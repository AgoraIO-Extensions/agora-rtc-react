import{c as l,h,S as m,A as v}from"./TrackBoundary-32089e08.js";import{F as f}from"./remote-audio-track-a2569d31.js";import{F as p}from"./remote-video-track-72764928.js";import{j as s}from"./jsx-runtime-1a9d9a93.js";import{F as g}from"./styles-6070efb3.js";import{r as a}from"./index-8b3efc3f.js";var T="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",k=87,C=20,n=[],A=()=>{for(let t=0;t<C;t++)n[t]=T.charAt(Math.random()*k);return n.join("")};function d(t){try{return t()}catch(e){console.error(e)}}var b=class{constructor(){this.push=this.addDisposer,this.disposers=new Map}addDisposer(t,e=this.genUID()){return this.flush(e),this.disposers.set(e,Array.isArray(t)?E(t):t),e}add(t,e=this.genUID()){const r=t();return r?this.addDisposer(r,e):e}addEventListener(t,e,r,i,o=this.genUID()){return t.addEventListener(e,r,i),this.addDisposer(()=>t.removeEventListener(e,r,i),o),o}setTimeout(t,e,r=this.genUID()){const i=window.setTimeout(()=>{this.remove(r),t()},e);return this.addDisposer(()=>window.clearTimeout(i),r)}setInterval(t,e,r=this.genUID()){const i=window.setInterval(t,e);return this.addDisposer(()=>window.clearInterval(i),r)}remove(t){const e=this.disposers.get(t);return this.disposers.delete(t),e}flush(t){const e=this.remove(t);e&&e()}flushAll(){this.disposers.forEach(d),this.disposers.clear()}genUID(){let t;do t=A();while(this.disposers.has(t));return t}};function E(t){return()=>t.forEach(d)}const w="AGORA-RTC-SDK-NG-FAKE-CHANNEL";class c extends l{constructor(){super(),this.remoteUsers=[],this._sideEffect=new b,h(this,"_disposable")}static create(e){const r=new c,i=typeof e=="function"?e(r):e;return Object.assign(r,i)}subscribe(e,r){if(r==="audio"){if(!e.audioTrack){const i=f.create();e.audioTrack=i,this._sideEffect.setInterval(()=>{i.setVolume(m({min:0,max:100}))},2e3,String(e.uid))}return Promise.resolve(e.audioTrack)}else{if(!e.videoTrack){const i=p.create();e.videoTrack=i}return Promise.resolve(e.videoTrack)}}async unsubscribe(e,r){(!r||r==="audio")&&e.audioTrack&&(e.audioTrack.stop(),e.audioTrack=void 0,this._sideEffect.flush(String(e.uid))),(!r||r==="video")&&e.videoTrack&&(e.videoTrack.stop(),e.videoTrack=void 0)}massUnsubscribe(e,r){e.forEach(i=>{this.unsubscribe(i,r)})}join(e,r,i,o){return this.isStringUID=typeof o=="string",this.uid=v(),this._joinInfo={uid:this.uid},this.channelName=w,Promise.resolve(this.uid)}async publish(){return Promise.resolve()}async unpublish(){return Promise.resolve()}leave(){return this.uid=void 0,this.channelName=void 0,Promise.resolve()}setClientRole(){return this.role="host",Promise.resolve()}renewToken(){return Promise.resolve()}getLocalAudioStats(){}getRemoteAudioStats(){}sendStreamMessage(){}}const R={width:"100%",height:"100%",background:"#1a1e21 center/cover no-repeat",filter:"blur(16px) brightness(0.4)"},x={position:"absolute",top:"50%",left:"50%",maxWidth:"50%",maxHeight:"50%",aspectRatio:"1",transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",objectFit:"cover"};function y({cover:t}){return s.jsx("div",{style:g,children:typeof t=="string"?s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{...R,backgroundImage:`url(${t})`}}),s.jsx("img",{src:t,style:x})]}):t()})}y.__docgenInfo={description:"User Cover image with blur background",methods:[],displayName:"UserCover",props:{cover:{required:!0,tsType:{name:"union",raw:"string | (() => ReactNode)",elements:[{name:"string"},{name:"unknown"}]},description:"Cover image url or a custom render function."}}};const u=a.createContext(null);function U({client:t,children:e}){return s.jsx(u.Provider,{value:t,children:e})}function P(t){const e=a.useContext(u);return t||e}function D(t){const e=P(t);if(!e)throw new Error("Agora RTC client not found. Should be wrapped in <AgoraRTCProvider value={client} />");return e}U.__docgenInfo={description:"",methods:[],displayName:"AgoraRTCProvider",props:{client:{required:!0,tsType:{name:"IAgoraRTCClient"},description:""},children:{required:!1,tsType:{name:"ReactNode"},description:""}}};export{U as A,c as F,y as U,D as u};
