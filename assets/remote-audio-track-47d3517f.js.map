{"version":3,"file":"remote-audio-track-47d3517f.js","sources":["../../../../node_modules/.pnpm/@agoraio-extensions+agora-rtc-sdk-ng-fake@https+++codeload.github.com+AgoraIO-Extensions+agor_4ipwkzf26pg57ngg64nj7kljyq/node_modules/@agoraio-extensions/agora-rtc-sdk-ng-fake/src/tracks/remote-audio-track.ts"],"sourcesContent":["import type { IRemoteAudioTrack } from \"agora-rtc-sdk-ng\";\n\nimport keyboardMp3 from \"../../assets/quick-mechanical-keyboard-14391.mp3\";\nimport { hideProperties } from \"../utils\";\n\nimport type { FakeRemoteTrackProps } from \"./remote-track\";\nimport { FakeRemoteTrack } from \"./remote-track\";\n\nexport interface FakeRemoteAudioTrackProps extends Omit<FakeRemoteTrackProps, \"trackMediaType\"> {\n  audioURI?: string;\n  /** 0~100 */\n  volume?: number;\n}\n\nexport class FakeRemoteAudioTrack extends FakeRemoteTrack {\n  public static override create(props?: FakeRemoteAudioTrackProps): IRemoteAudioTrack {\n    return new FakeRemoteAudioTrack(props) as unknown as IRemoteAudioTrack;\n  }\n\n  private readonly _audioURI: string;\n\n  public override valueOf(): string {\n    return \"valueOf\";\n  }\n\n  public override toString(): string {\n    return \"toString\";\n  }\n\n  public toJSON(): string {\n    return \"toJSON\";\n  }\n\n  protected constructor({\n    audioURI = keyboardMp3,\n    volume = 100,\n    ...props\n  }: FakeRemoteAudioTrackProps = {}) {\n    super({ ...props, trackMediaType: \"audio\" });\n    this._volume = Math.max(0, Math.min(100, volume));\n    this._audioURI = audioURI;\n\n    hideProperties(this, \"_audioEl\", \"_volume\", \"_audioURI\");\n  }\n  /**\n   * Plays a remote audio track.\n   *\n   * > When playing the audio track, you do not need to pass any DOM element.\n   */\n  public override play(): void {\n    if (!this._audioEl) {\n      this._audioEl = document.createElement(\"audio\");\n      this._audioEl.loop = true;\n      document.body.appendChild(this._audioEl);\n    }\n\n    this._audioEl.src = this._audioURI;\n    this._audioEl.volume = this._volume / 100;\n\n    if (this._audioEl) {\n      this.isPlaying = true;\n      this._audioEl.play().catch(console.log);\n    }\n  }\n  /**\n   * Stops playing the media track.\n   */\n  public override stop(): void {\n    if (this.isPlaying && this._audioEl) {\n      this.isPlaying = false;\n      this._audioEl.pause();\n    }\n  }\n  /**\n   * Sets the volume of a remote audio track.\n   *\n   * @param volume The volume. The value ranges from 0 (mute) to 100 (maximum). A value of 100 is the current volume.\n   */\n  public setVolume(volume: number): void {\n    volume = Math.max(0, Math.min(100, volume));\n    if (this._volume !== volume) {\n      this._volume = volume;\n      if (this._audioEl) {\n        this._audioEl.volume = volume / 100;\n      }\n    }\n  }\n  /**\n   * Gets the audio level of a remote audio track.\n   *\n   * @returns The audio level. The value range is [0,1]. 1 is the highest audio level.\n   * Usually a user with audio level above 0.6 is a speaking user.\n   *\n   */\n  public getVolumeLevel(): number {\n    return this._volume / 100;\n  }\n  /**\n   * **Since**\n   * <br>&emsp;&emsp;&emsp;*4.1.0*\n   *\n   * Sets the audio playback device, for example, the speaker.\n   *\n   * > This method supports Chrome on desktop devices only. Other browsers throw a `NOT_SUPPORTED` error when calling this method.\n   * @param deviceId Device ID, which can be retrieved by calling getPlaybackDevices().\n   */\n  public async setPlaybackDevice(deviceId: string): Promise<void> {\n    console.log(\"[FakeRemoteAudioTrack]: setPlaybackDevice\", deviceId);\n  }\n\n  private _audioEl?: HTMLAudioElement;\n  private _volume: number;\n}\n"],"names":["FakeRemoteAudioTrack","FakeRemoteTrack","audioURI","keyboardMp3","volume","props","hideProperties","deviceId"],"mappings":"iKAcO,MAAMA,UAA6BC,CAAgB,CAmB9C,YAAY,CACpB,SAAAC,EAAWC,EACX,OAAAC,EAAS,IACT,GAAGC,CACL,EAA+B,GAAI,CACjC,MAAM,CAAE,GAAGA,EAAO,eAAgB,OAAS,CAAA,EACtC,KAAA,QAAU,KAAK,IAAI,EAAG,KAAK,IAAI,IAAKD,CAAM,CAAC,EAChD,KAAK,UAAYF,EAEFI,EAAA,KAAM,WAAY,UAAW,WAAW,CACzD,CA5BA,OAAuB,OAAOD,EAAsD,CAC3E,OAAA,IAAIL,EAAqBK,CAAK,CACvC,CAIgB,SAAkB,CACzB,MAAA,SACT,CAEgB,UAAmB,CAC1B,MAAA,UACT,CAEO,QAAiB,CACf,MAAA,QACT,CAkBgB,MAAa,CACtB,KAAK,WACH,KAAA,SAAW,SAAS,cAAc,OAAO,EAC9C,KAAK,SAAS,KAAO,GACZ,SAAA,KAAK,YAAY,KAAK,QAAQ,GAGpC,KAAA,SAAS,IAAM,KAAK,UACpB,KAAA,SAAS,OAAS,KAAK,QAAU,IAElC,KAAK,WACP,KAAK,UAAY,GACjB,KAAK,SAAS,KAAA,EAAO,MAAM,QAAQ,GAAG,EAE1C,CAIgB,MAAa,CACvB,KAAK,WAAa,KAAK,WACzB,KAAK,UAAY,GACjB,KAAK,SAAS,QAElB,CAMO,UAAUD,EAAsB,CACrCA,EAAS,KAAK,IAAI,EAAG,KAAK,IAAI,IAAKA,CAAM,CAAC,EACtC,KAAK,UAAYA,IACnB,KAAK,QAAUA,EACX,KAAK,WACF,KAAA,SAAS,OAASA,EAAS,KAGtC,CAQO,gBAAyB,CAC9B,OAAO,KAAK,QAAU,GACxB,CAUA,MAAa,kBAAkBG,EAAiC,CACtD,QAAA,IAAI,4CAA6CA,CAAQ,CACnE,CAIF","x_google_ignoreList":[0]}