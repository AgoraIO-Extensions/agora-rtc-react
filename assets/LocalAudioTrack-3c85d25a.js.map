{"version":3,"file":"LocalAudioTrack-3c85d25a.js","sources":["../../src/components/LocalAudioTrack.tsx"],"sourcesContent":["import type { ILocalAudioTrack } from \"agora-rtc-sdk-ng\";\nimport type { ReactNode } from \"react\";\nimport { useEffect } from \"react\";\n\nimport { useAwaited } from \"../hooks/tools\";\nimport type { MaybePromiseOrNull } from \"../misc/utils\";\n\nimport { useAutoPlayAudioTrack } from \"./TrackBoundary\";\n\nexport interface LocalAudioTrackProps {\n  /**\n   * 要播放的本地音频轨道。通过 [createMicrophoneAudioTrack](https://docportal.shengwang.cn/cn/live-streaming-premium-4.x/API%20Reference/web_ng/interfaces/iagorartc.html#createmicrophoneaudiotrack) 创建。\n   */\n  readonly track?: MaybePromiseOrNull<ILocalAudioTrack>;\n\n  /**\n   * `true`：播放该轨道。`false`：停止播放该轨道。\n   */\n  readonly play?: boolean;\n\n  /**\n   * 音量大小。取值范围 [0, 1000]，0 代表静音，100 代表原始音量。100 以上会使用 [Web Audio API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API) 进行音量增益。\n   */\n  readonly volume?: number;\n\n  /**\n   * `true`：禁用该轨道。禁用后，SDK 将停止播放和发布该轨道。`false`：启用该轨道。\n   */\n  readonly disabled?: boolean;\n\n  /**\n   * `true`：暂停发送该轨道的媒体数据。`false`：恢复发送该轨道的媒体数据。\n   */\n  readonly muted?: boolean;\n\n  /**\n   * 需要展示的 React 节点。\n   */\n  readonly children?: ReactNode;\n}\n\n/**\n * 该组件用于播放本地音频轨道（不支持指定使用的媒体设备）。\n */\nexport function LocalAudioTrack({\n  track: maybeTrack,\n  play = false,\n  volume,\n  disabled,\n  muted,\n  children,\n}: LocalAudioTrackProps) {\n  const track = useAwaited(maybeTrack);\n\n  useAutoPlayAudioTrack(track, play);\n\n  useEffect(() => {\n    if (track && volume != null) {\n      track.setVolume(volume);\n    }\n  }, [track, volume]);\n\n  useEffect(() => {\n    if (track && disabled != null) {\n      track.setEnabled(!disabled).catch(console.warn);\n    }\n  }, [disabled, track]);\n\n  useEffect(() => {\n    if (track && muted != null) {\n      track.setMuted(muted).catch(console.warn);\n    }\n  }, [muted, track]);\n\n  return children ? <>{children}</> : null;\n}\n"],"names":["LocalAudioTrack","maybeTrack","play","volume","disabled","muted","children","track","useAwaited","useAutoPlayAudioTrack","useEffect","jsx","Fragment"],"mappings":"oJA4CA,SAAAA,EAAA,CACA,MAAAC,EACA,KAAAC,EAAA,GACA,OAAAC,EACA,SAAAC,EACA,MAAAC,EACA,SAAAC,CACA,EAAA,CACA,MAAAC,EAAAC,EAAAP,CAAA,EAEA,OAAAQ,EAAAF,EAAAL,CAAA,EAEAQ,EAAAA,UAAA,IAAA,CACAH,GAAAJ,GAAA,MACAI,EAAA,UAAAJ,CAAA,CACA,EACA,CAAAI,EAAAJ,CAAA,CAAA,EAEAO,EAAAA,UAAA,IAAA,CACAH,GAAAH,GAAA,MACAG,EAAA,WAAA,CAAAH,CAAA,EAAA,MAAA,QAAA,IAAA,CACA,EACA,CAAAA,EAAAG,CAAA,CAAA,EAEAG,EAAAA,UAAA,IAAA,CACAH,GAAAF,GAAA,MACAE,EAAA,SAAAF,CAAA,EAAA,MAAA,QAAA,IAAA,CACA,EACA,CAAAA,EAAAE,CAAA,CAAA,EAEAD,EAAAK,EAAAC,EAAA,CAAA,SAAAN,CAAA,CAAA,EAAA,IACA"}