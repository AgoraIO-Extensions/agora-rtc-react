var h=Object.defineProperty;var m=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var n=(e,t,r)=>(m(e,typeof t!="symbol"?t+"":t,r),r);import{g as v,h as f,S as p,A as g}from"./TrackBoundary-b755f9d3.js";import{F as T}from"./remote-video-track-2563c23b.js";import{F as k}from"./remote-audio-track-10a3ca7a.js";import{j as s}from"./jsx-runtime-94f6e698.js";import{F as C}from"./styles-8e94b0fb.js";import{r as d}from"./index-8db94870.js";var b="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",w=87,x=20,a=[],E=()=>{for(let e=0;e<x;e++)a[e]=b.charAt(Math.random()*w);return a.join("")};function c(e){try{return e()}catch(t){console.error(t)}}var A=class{constructor(){this.push=this.addDisposer,this.disposers=new Map}addDisposer(e,t=this.genUID()){return this.flush(t),this.disposers.set(t,Array.isArray(e)?R(e):e),t}add(e,t=this.genUID()){const r=e();return r?this.addDisposer(r,t):t}addEventListener(e,t,r,i,o=this.genUID()){return e.addEventListener(t,r,i),this.addDisposer(()=>e.removeEventListener(t,r,i),o),o}setTimeout(e,t,r=this.genUID()){const i=window.setTimeout(()=>{this.remove(r),e()},t);return this.addDisposer(()=>window.clearTimeout(i),r)}setInterval(e,t,r=this.genUID()){const i=window.setInterval(e,t);return this.addDisposer(()=>window.clearInterval(i),r)}remove(e){const t=this.disposers.get(e);return this.disposers.delete(e),t}flush(e){const t=this.remove(e);t&&t()}flushAll(){this.disposers.forEach(c),this.disposers.clear()}genUID(){let e;do e=E();while(this.disposers.has(e));return e}};function R(e){return()=>e.forEach(c)}class u extends v{constructor(){super();n(this,"remoteUsers",[]);n(this,"_sideEffect",new A);f(this,"_disposable")}static create(r){const i=new u,o=typeof r=="function"?r(i):r;return Object.assign(i,o)}subscribe(r,i){if(i==="audio"){if(!r.audioTrack){const o=k.create();r.audioTrack=o,this._sideEffect.setInterval(()=>{o.setVolume(p({min:0,max:100}))},2e3,String(r.uid))}return Promise.resolve(r.audioTrack)}else{if(!r.videoTrack){const o=T.create();r.videoTrack=o}return Promise.resolve(r.videoTrack)}}async unsubscribe(r,i){(!i||i==="audio")&&r.audioTrack&&(r.audioTrack.stop(),r.audioTrack=void 0,this._sideEffect.flush(String(r.uid))),(!i||i==="video")&&r.videoTrack&&(r.videoTrack.stop(),r.videoTrack=void 0)}massUnsubscribe(r,i){r.forEach(o=>{this.unsubscribe(o,i)})}join(){return Promise.resolve(g())}leave(){return Promise.resolve()}}const U={width:"100%",height:"100%",background:"#1a1e21 center/cover no-repeat",filter:"blur(16px) brightness(0.4)"},y={position:"absolute",top:"50%",left:"50%",maxWidth:"50%",maxHeight:"50%",aspectRatio:"1",transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",objectFit:"cover"};function j({cover:e}){return s.jsx("div",{style:C,children:typeof e=="string"?s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{...U,backgroundImage:`url(${e})`}}),s.jsx("img",{src:e,style:y})]}):e()})}j.__docgenInfo={description:"User Cover image with blur background",methods:[],displayName:"UserCover",props:{cover:{required:!0,tsType:{name:"union",raw:"string | (() => ReactNode)",elements:[{name:"string"},{name:"unknown"}]},description:"Cover image url or a custom render function."}}};const l=d.createContext(null);function I({client:e,children:t}){return s.jsx(l.Provider,{value:e,children:t})}function F(e){const t=d.useContext(l);return e||t}function q(e){const t=F(e);if(!t)throw new Error("Agora RTC client not found. Should be wrapped in <AgoraRTCProvider value={client} />");return t}I.__docgenInfo={description:"",methods:[],displayName:"AgoraRTCProvider",props:{client:{required:!0,tsType:{name:"IAgoraRTCClient"},description:""},children:{required:!1,tsType:{name:"ReactNode"},description:""}}};export{I as A,u as F,j as U,q as u};
//# sourceMappingURL=useRTCClient-c3e6f1e0.js.map
