var Cq=Object.defineProperty;var Tq=(e,t,o)=>t in e?Cq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var tg=(e,t,o)=>(Tq(e,typeof t!="symbol"?t+"":t,o),o);function rV(e,t){for(var o=0;o<t.length;o++){const s=t[o];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in e)){const u=Object.getOwnPropertyDescriptor(s,c);u&&Object.defineProperty(e,c,u.get?u:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function o(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(c){if(c.ep)return;c.ep=!0;const u=o(c);fetch(c.href,u)}})();var At=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Al(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function bq(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var o=function s(){if(this instanceof s){var c=[null];c.push.apply(c,arguments);var u=Function.bind.apply(t,c);return new u}return t.apply(this,arguments)};o.prototype=t.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var c=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(o,s,c.get?c:{enumerable:!0,get:function(){return e[s]}})}),o}var iV={exports:{}},aE={},oV={exports:{}},hn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qf=Symbol.for("react.element"),Rq=Symbol.for("react.portal"),Iq=Symbol.for("react.fragment"),wq=Symbol.for("react.strict_mode"),Oq=Symbol.for("react.profiler"),Aq=Symbol.for("react.provider"),Nq=Symbol.for("react.context"),xq=Symbol.for("react.forward_ref"),Pq=Symbol.for("react.suspense"),Dq=Symbol.for("react.memo"),kq=Symbol.for("react.lazy"),K2=Symbol.iterator;function Lq(e){return e===null||typeof e!="object"?null:(e=K2&&e[K2]||e["@@iterator"],typeof e=="function"?e:null)}var aV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sV=Object.assign,cV={};function Dh(e,t,o){this.props=e,this.context=t,this.refs=cV,this.updater=o||aV}Dh.prototype.isReactComponent={};Dh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Dh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function lV(){}lV.prototype=Dh.prototype;function pI(e,t,o){this.props=e,this.context=t,this.refs=cV,this.updater=o||aV}var fI=pI.prototype=new lV;fI.constructor=pI;sV(fI,Dh.prototype);fI.isPureReactComponent=!0;var Y2=Array.isArray,uV=Object.prototype.hasOwnProperty,mI={current:null},dV={key:!0,ref:!0,__self:!0,__source:!0};function hV(e,t,o){var s,c={},u=null,h=null;if(t!=null)for(s in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(u=""+t.key),t)uV.call(t,s)&&!dV.hasOwnProperty(s)&&(c[s]=t[s]);var f=arguments.length-2;if(f===1)c.children=o;else if(1<f){for(var m=Array(f),v=0;v<f;v++)m[v]=arguments[v+2];c.children=m}if(e&&e.defaultProps)for(s in f=e.defaultProps,f)c[s]===void 0&&(c[s]=f[s]);return{$$typeof:Qf,type:e,key:u,ref:h,props:c,_owner:mI.current}}function Mq(e,t){return{$$typeof:Qf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function gI(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qf}function Uq(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(o){return t[o]})}var q2=/\/+/g;function yC(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Uq(""+e.key):t.toString(36)}function Bg(e,t,o,s,c){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(u){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case Qf:case Rq:h=!0}}if(h)return h=e,c=c(h),e=s===""?"."+yC(h,0):s,Y2(c)?(o="",e!=null&&(o=e.replace(q2,"$&/")+"/"),Bg(c,t,o,"",function(v){return v})):c!=null&&(gI(c)&&(c=Mq(c,o+(!c.key||h&&h.key===c.key?"":(""+c.key).replace(q2,"$&/")+"/")+e)),t.push(c)),1;if(h=0,s=s===""?".":s+":",Y2(e))for(var f=0;f<e.length;f++){u=e[f];var m=s+yC(u,f);h+=Bg(u,t,o,m,c)}else if(m=Lq(e),typeof m=="function")for(e=m.call(e),f=0;!(u=e.next()).done;)u=u.value,m=s+yC(u,f++),h+=Bg(u,t,o,m,c);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function ng(e,t,o){if(e==null)return e;var s=[],c=0;return Bg(e,s,"","",function(u){return t.call(o,u,c++)}),s}function Fq(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(o){(e._status===0||e._status===-1)&&(e._status=1,e._result=o)},function(o){(e._status===0||e._status===-1)&&(e._status=2,e._result=o)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var So={current:null},$g={transition:null},Vq={ReactCurrentDispatcher:So,ReactCurrentBatchConfig:$g,ReactCurrentOwner:mI};hn.Children={map:ng,forEach:function(e,t,o){ng(e,function(){t.apply(this,arguments)},o)},count:function(e){var t=0;return ng(e,function(){t++}),t},toArray:function(e){return ng(e,function(t){return t})||[]},only:function(e){if(!gI(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};hn.Component=Dh;hn.Fragment=Iq;hn.Profiler=Oq;hn.PureComponent=pI;hn.StrictMode=wq;hn.Suspense=Pq;hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vq;hn.cloneElement=function(e,t,o){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=sV({},e.props),c=e.key,u=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,h=mI.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var f=e.type.defaultProps;for(m in t)uV.call(t,m)&&!dV.hasOwnProperty(m)&&(s[m]=t[m]===void 0&&f!==void 0?f[m]:t[m])}var m=arguments.length-2;if(m===1)s.children=o;else if(1<m){f=Array(m);for(var v=0;v<m;v++)f[v]=arguments[v+2];s.children=f}return{$$typeof:Qf,type:e.type,key:c,ref:u,props:s,_owner:h}};hn.createContext=function(e){return e={$$typeof:Nq,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Aq,_context:e},e.Consumer=e};hn.createElement=hV;hn.createFactory=function(e){var t=hV.bind(null,e);return t.type=e,t};hn.createRef=function(){return{current:null}};hn.forwardRef=function(e){return{$$typeof:xq,render:e}};hn.isValidElement=gI;hn.lazy=function(e){return{$$typeof:kq,_payload:{_status:-1,_result:e},_init:Fq}};hn.memo=function(e,t){return{$$typeof:Dq,type:e,compare:t===void 0?null:t}};hn.startTransition=function(e){var t=$g.transition;$g.transition={};try{e()}finally{$g.transition=t}};hn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};hn.useCallback=function(e,t){return So.current.useCallback(e,t)};hn.useContext=function(e){return So.current.useContext(e)};hn.useDebugValue=function(){};hn.useDeferredValue=function(e){return So.current.useDeferredValue(e)};hn.useEffect=function(e,t){return So.current.useEffect(e,t)};hn.useId=function(){return So.current.useId()};hn.useImperativeHandle=function(e,t,o){return So.current.useImperativeHandle(e,t,o)};hn.useInsertionEffect=function(e,t){return So.current.useInsertionEffect(e,t)};hn.useLayoutEffect=function(e,t){return So.current.useLayoutEffect(e,t)};hn.useMemo=function(e,t){return So.current.useMemo(e,t)};hn.useReducer=function(e,t,o){return So.current.useReducer(e,t,o)};hn.useRef=function(e){return So.current.useRef(e)};hn.useState=function(e){return So.current.useState(e)};hn.useSyncExternalStore=function(e,t,o){return So.current.useSyncExternalStore(e,t,o)};hn.useTransition=function(){return So.current.useTransition()};hn.version="18.2.0";oV.exports=hn;var b=oV.exports;const Dt=Al(b),_h=rV({__proto__:null,default:Dt},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jq=b,Bq=Symbol.for("react.element"),$q=Symbol.for("react.fragment"),Hq=Object.prototype.hasOwnProperty,Wq=jq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gq={key:!0,ref:!0,__self:!0,__source:!0};function pV(e,t,o){var s,c={},u=null,h=null;o!==void 0&&(u=""+o),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(h=t.ref);for(s in t)Hq.call(t,s)&&!Gq.hasOwnProperty(s)&&(c[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)c[s]===void 0&&(c[s]=t[s]);return{$$typeof:Bq,type:e,key:u,ref:h,props:c,_owner:Wq.current}}aE.Fragment=$q;aE.jsx=pV;aE.jsxs=pV;iV.exports=aE;var te=iV.exports;var fV={exports:{}};(function(e,t){(function(o,s){e.exports=s()})(At,function(){function o(n,r){return r.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(a){if(a!=="default"&&!(a in n)){var l=Object.getOwnPropertyDescriptor(i,a);Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:function(){return i[a]}})}})}),Object.freeze(n)}var s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof At<"u"?At:typeof self<"u"?self:{},c=function(n){try{return!!n()}catch{return!0}},u=!c(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),h=u,f=Function.prototype,m=f.bind,v=f.call,_=h&&m.bind(v,v),y=h?function(n){return n&&_(n)}:function(n){return n&&function(){return v.apply(n,arguments)}},T=y({}.isPrototypeOf),A=function(n){return n&&n.Math==Math&&n},I=A(typeof globalThis=="object"&&globalThis)||A(typeof window=="object"&&window)||A(typeof self=="object"&&self)||A(typeof s=="object"&&s)||function(){return this}()||Function("return this")(),O=u,L=Function.prototype,x=L.apply,N=L.call,D=typeof Reflect=="object"&&Reflect.apply||(O?N.bind(x):function(){return N.apply(x,arguments)}),U=function(n){return typeof n=="function"},V={},j=!c(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),B=u,Y=Function.prototype.call,ee=B?Y.bind(Y):function(){return Y.apply(Y,arguments)},H={},Z={}.propertyIsEnumerable,J=Object.getOwnPropertyDescriptor,X=J&&!Z.call({1:2},1);H.f=X?function(n){var r=J(this,n);return!!r&&r.enumerable}:Z;var ne,ie,ae=function(n,r){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:r}},pe=y,ue=pe({}.toString),Se=pe("".slice),Ee=function(n){return Se(ue(n),8,-1)},le=y,se=c,de=Ee,he=I.Object,xe=le("".split),Me=se(function(){return!he("z").propertyIsEnumerable(0)})?function(n){return de(n)=="String"?xe(n,""):he(n)}:he,it=I.TypeError,Be=function(n){if(n==null)throw it("Can't call method on "+n);return n},Tt=Me,It=Be,lt=function(n){return Tt(It(n))},Mt=U,ht=function(n){return typeof n=="object"?n!==null:Mt(n)},ze={},Ut=ze,Ft=I,Vt=U,qe=function(n){return Vt(n)?n:void 0},Ke=function(n,r){return arguments.length<2?qe(Ut[n])||qe(Ft[n]):Ut[n]&&Ut[n][r]||Ft[n]&&Ft[n][r]},Ge=Ke("navigator","userAgent")||"",rt=I,pt=Ge,Nt=rt.process,yt=rt.Deno,xt=Nt&&Nt.versions||yt&&yt.version,Yt=xt&&xt.v8;Yt&&(ie=(ne=Yt.split("."))[0]>0&&ne[0]<4?1:+(ne[0]+ne[1])),!ie&&pt&&(!(ne=pt.match(/Edge\/(\d+)/))||ne[1]>=74)&&(ne=pt.match(/Chrome\/(\d+)/))&&(ie=+ne[1]);var Nn=ie,vi=Nn,ur=c,Wn=!!Object.getOwnPropertySymbols&&!ur(function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&vi&&vi<41}),mn=Wn&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Or=Ke,Cn=U,Xt=T,Jt=mn,To=I.Object,Gi=Jt?function(n){return typeof n=="symbol"}:function(n){var r=Or("Symbol");return Cn(r)&&Xt(r.prototype,To(n))},yr=I.String,gn=function(n){try{return yr(n)}catch{return"Object"}},Ue=U,tt=gn,vn=I.TypeError,kt=function(n){if(Ue(n))return n;throw vn(tt(n)+" is not a function")},Ei=kt,Ar=function(n,r){var i=n[r];return i==null?void 0:Ei(i)},qn=ee,mt=U,Qt=ht,an=I.TypeError,vr={exports:{}},si=I,Cr=Object.defineProperty,Nr=function(n,r){try{Cr(si,n,{value:r,configurable:!0,writable:!0})}catch{si[n]=r}return r},Ai="__core-js_shared__",zi=I[Ai]||Nr(Ai,{}),co=zi;(vr.exports=function(n,r){return co[n]||(co[n]=r!==void 0?r:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var lo=Be,zs=I.Object,Hr=function(n){return zs(lo(n))},Ks=Hr,wc=y({}.hasOwnProperty),Xn=Object.hasOwn||function(n,r){return wc(Ks(n),r)},Oc=y,Ni=0,Ac=Math.random(),Nc=Oc(1 .toString),Go=function(n){return"Symbol("+(n===void 0?"":n)+")_"+Nc(++Ni+Ac,36)},Ys=I,Ka=vr.exports,bo=Xn,xc=Go,Pc=Wn,Ca=mn,ci=Ka("wks"),Wr=Ys.Symbol,zo=Wr&&Wr.for,qs=Ca?Wr:Wr&&Wr.withoutSetter||xc,or=function(n){if(!bo(ci,n)||!Pc&&typeof ci[n]!="string"){var r="Symbol."+n;Pc&&bo(Wr,n)?ci[n]=Wr[n]:ci[n]=Ca&&zo?zo(r):qs(r)}return ci[n]},Xs=ee,Dc=ht,Cs=Gi,kl=Ar,Ll=function(n,r){var i,a;if(r==="string"&&mt(i=n.toString)&&!Qt(a=qn(i,n))||mt(i=n.valueOf)&&!Qt(a=qn(i,n))||r!=="string"&&mt(i=n.toString)&&!Qt(a=qn(i,n)))return a;throw an("Can't convert object to primitive value")},Ml=or,Vn=I.TypeError,En=Ml("toPrimitive"),xn=function(n,r){if(!Dc(n)||Cs(n))return n;var i,a=kl(n,En);if(a){if(r===void 0&&(r="default"),i=Xs(a,n,r),!Dc(i)||Cs(i))return i;throw Vn("Can't convert object to primitive value")}return r===void 0&&(r="number"),Ll(n,r)},Gr=Gi,xr=function(n){var r=xn(n,"string");return Gr(r)?r:r+""},uo=ht,Ki=I.document,Ya=uo(Ki)&&uo(Ki.createElement),Js=function(n){return Ya?Ki.createElement(n):{}},Qh=Js,_i=!j&&!c(function(){return Object.defineProperty(Qh("div"),"a",{get:function(){return 7}}).a!=7}),Ul=j,Bu=ee,Ts=H,Qs=ae,kc=lt,Fl=xr,Zh=Xn,ep=_i,$u=Object.getOwnPropertyDescriptor;V.f=Ul?$u:function(n,r){if(n=kc(n),r=Fl(r),ep)try{return $u(n,r)}catch{}if(Zh(n,r))return Qs(!Bu(Ts.f,n,r),n[r])};var tp=c,ut=U,$t=/#|\.prototype\./,Pn=function(n,r){var i=dr[Pr(n)];return i==Hu||i!=ym&&(ut(r)?tp(r):!!r)},Pr=Pn.normalize=function(n){return String(n).replace($t,".").toLowerCase()},dr=Pn.data={},ym=Pn.NATIVE="N",Hu=Pn.POLYFILL="P",Wu=Pn,Cm=kt,Gu=u,Q5=y(y.bind),np=function(n,r){return Cm(n),r===void 0?n:Gu?Q5(n,r):function(){return n.apply(r,arguments)}},qa={},g1=j&&c(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),v1=I,Z5=ht,e6=v1.String,t6=v1.TypeError,Xa=function(n){if(Z5(n))return n;throw t6(e6(n)+" is not an object")},n6=j,r6=_i,i6=g1,Tm=Xa,E1=xr,o6=I.TypeError,c_=Object.defineProperty,a6=Object.getOwnPropertyDescriptor,s6="enumerable",c6="configurable",l6="writable";qa.f=n6?i6?function(n,r,i){if(Tm(n),r=E1(r),Tm(i),typeof n=="function"&&r==="prototype"&&"value"in i&&l6 in i&&!i.writable){var a=a6(n,r);a&&a.writable&&(n[r]=i.value,i={configurable:c6 in i?i.configurable:a.configurable,enumerable:s6 in i?i.enumerable:a.enumerable,writable:!1})}return c_(n,r,i)}:c_:function(n,r,i){if(Tm(n),r=E1(r),Tm(i),r6)try{return c_(n,r,i)}catch{}if("get"in i||"set"in i)throw o6("Accessors not supported");return"value"in i&&(n[r]=i.value),n};var u6=qa,d6=ae,Vl=j?function(n,r,i){return u6.f(n,r,d6(1,i))}:function(n,r,i){return n[r]=i,n},bm=I,h6=D,p6=y,f6=U,m6=V.f,g6=Wu,zu=ze,v6=np,Ku=Vl,_1=Xn,E6=function(n){var r=function(i,a,l){if(this instanceof r){switch(arguments.length){case 0:return new n;case 1:return new n(i);case 2:return new n(i,a)}return new n(i,a,l)}return h6(n,this,arguments)};return r.prototype=n.prototype,r},xi=function(n,r){var i,a,l,d,p,g,E,C,S=n.target,R=n.global,k=n.stat,F=n.proto,W=R?bm:k?bm[S]:(bm[S]||{}).prototype,G=R?zu:zu[S]||Ku(zu,S,{})[S],z=G.prototype;for(l in r)i=!g6(R?l:S+(k?".":"#")+l,n.forced)&&W&&_1(W,l),p=G[l],i&&(g=n.noTargetGet?(C=m6(W,l))&&C.value:W[l]),d=i&&g?g:r[l],i&&typeof p==typeof d||(E=n.bind&&i?v6(d,bm):n.wrap&&i?E6(d):F&&f6(d)?p6(d):d,(n.sham||d&&d.sham||p&&p.sham)&&Ku(E,"sham",!0),Ku(G,l,E),F&&(_1(zu,a=S+"Prototype")||Ku(zu,a,{}),Ku(zu[a],l,d),n.real&&z&&!z[l]&&Ku(z,l,d)))},_6=Math.ceil,S6=Math.floor,l_=function(n){var r=+n;return r!=r||r===0?0:(r>0?S6:_6)(r)},y6=l_,C6=Math.min,T6=function(n){return n>0?C6(y6(n),9007199254740991):0},Lc=function(n){return T6(n.length)},b6=kt,R6=Hr,I6=Me,w6=Lc,O6=I.TypeError,S1=function(n){return function(r,i,a,l){b6(i);var d=R6(r),p=I6(d),g=w6(d),E=n?g-1:0,C=n?-1:1;if(a<2)for(;;){if(E in p){l=p[E],E+=C;break}if(E+=C,n?E<0:g<=E)throw O6("Reduce of empty array with no initial value")}for(;n?E>=0:g>E;E+=C)E in p&&(l=i(l,p[E],E,d));return l}},A6={left:S1(!1),right:S1(!0)},N6=c,u_=function(n,r){var i=[][n];return!!i&&N6(function(){i.call(null,r||function(){throw 1},1)})},Rm=Ee(I.process)=="process",x6=A6.left,y1=Nn,P6=Rm;xi({target:"Array",proto:!0,forced:!u_("reduce")||!P6&&y1>79&&y1<83},{reduce:function(n){var r=arguments.length;return x6(this,n,r,r>1?arguments[1]:void 0)}});var D6=ze,Mc=function(n){return D6[n+"Prototype"]},k6=Mc("Array").reduce,L6=T,M6=k6,d_=Array.prototype,C1=function(n){var r=n.reduce;return n===d_||L6(d_,n)&&r===d_.reduce?M6:r},Uc=C1;let T1=!0,b1=!0;function Im(n,r,i){const a=n.match(r);return a&&a.length>=i&&parseInt(a[i],10)}function jl(n,r,i){if(!n.RTCPeerConnection)return;const a=n.RTCPeerConnection.prototype,l=a.addEventListener;a.addEventListener=function(p,g){if(p!==r)return l.apply(this,arguments);const E=C=>{const S=i(C);S&&(g.handleEvent?g.handleEvent(S):g(S))};return this._eventMap=this._eventMap||{},this._eventMap[r]||(this._eventMap[r]=new Map),this._eventMap[r].set(g,E),l.apply(this,[p,E])};const d=a.removeEventListener;a.removeEventListener=function(p,g){if(p!==r||!this._eventMap||!this._eventMap[r])return d.apply(this,arguments);if(!this._eventMap[r].has(g))return d.apply(this,arguments);const E=this._eventMap[r].get(g);return this._eventMap[r].delete(g),this._eventMap[r].size===0&&delete this._eventMap[r],Object.keys(this._eventMap).length===0&&delete this._eventMap,d.apply(this,[p,E])},Object.defineProperty(a,"on"+r,{get(){return this["_on"+r]},set(p){this["_on"+r]&&(this.removeEventListener(r,this["_on"+r]),delete this["_on"+r]),p&&this.addEventListener(r,this["_on"+r]=p)},enumerable:!0,configurable:!0})}function U6(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(T1=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function F6(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(b1=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function R1(){if(typeof window=="object"){if(T1)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function h_(n,r){b1&&console.warn(n+" is deprecated, please use "+r+" instead.")}function V6(n){const r={browser:null,version:null};if(n===void 0||!n.navigator)return r.browser="Not a browser.",r;const{navigator:i}=n;if(i.mozGetUserMedia)r.browser="firefox",r.version=Im(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)r.browser="chrome",r.version=Im(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!n.RTCPeerConnection||!i.userAgent.match(/AppleWebKit\/(\d+)\./))return r.browser="Not a supported browser.",r;r.browser="safari",r.version=Im(i.userAgent,/AppleWebKit\/(\d+)\./,1),r.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype}return r}function I1(n){return Object.prototype.toString.call(n)==="[object Object]"}function w1(n){var r;return I1(n)?Uc(r=Object.keys(n)).call(r,function(i,a){const l=I1(n[a]),d=l?w1(n[a]):n[a],p=l&&!Object.keys(d).length;return d===void 0||p?i:Object.assign(i,{[a]:d})},{}):n}function O1(n,r,i){const a=i?"outbound-rtp":"inbound-rtp",l=new Map;if(r===null)return l;const d=[];return n.forEach(p=>{p.type==="track"&&p.trackIdentifier===r.id&&d.push(p)}),d.forEach(p=>{n.forEach(g=>{g.type===a&&g.trackId===p.id&&function E(C,S,R){S&&!R.has(S.id)&&(R.set(S.id,S),Object.keys(S).forEach(k=>{k.endsWith("Id")?E(C,C.get(S[k]),R):k.endsWith("Ids")&&S[k].forEach(F=>{E(C,C.get(F),R)})}))}(n,g,l)})}),l}var j6=vr.exports,B6=Go,A1=j6("keys"),wm=function(n){return A1[n]||(A1[n]=B6(n))},$6=!c(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),H6=I,W6=Xn,G6=U,z6=Hr,K6=$6,N1=wm("IE_PROTO"),p_=H6.Object,Y6=p_.prototype,f_=K6?p_.getPrototypeOf:function(n){var r=z6(n);if(W6(r,N1))return r[N1];var i=r.constructor;return G6(i)&&r instanceof i?i.prototype:r instanceof p_?Y6:null},x1=I,q6=U,X6=x1.String,J6=x1.TypeError,Q6=y,Z6=Xa,e$=function(n){if(typeof n=="object"||q6(n))return n;throw J6("Can't set "+X6(n)+" as a prototype")},t$=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,i={};try{(n=Q6(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]),r=i instanceof Array}catch{}return function(a,l){return Z6(a),e$(l),r?n(a,l):a.__proto__=l,a}}():void 0),Om={},n$=l_,r$=Math.max,i$=Math.min,m_=function(n,r){var i=n$(n);return i<0?r$(i+r,0):i$(i,r)},o$=lt,a$=m_,s$=Lc,P1=function(n){return function(r,i,a){var l,d=o$(r),p=s$(d),g=a$(a,p);if(n&&i!=i){for(;p>g;)if((l=d[g++])!=l)return!0}else for(;p>g;g++)if((n||g in d)&&d[g]===i)return n||g||0;return!n&&-1}},c$={includes:P1(!0),indexOf:P1(!1)},Am={},g_=Xn,l$=lt,u$=c$.indexOf,d$=Am,D1=y([].push),k1=function(n,r){var i,a=l$(n),l=0,d=[];for(i in a)!g_(d$,i)&&g_(a,i)&&D1(d,i);for(;r.length>l;)g_(a,i=r[l++])&&(~u$(d,i)||D1(d,i));return d},v_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],h$=k1,p$=v_.concat("length","prototype");Om.f=Object.getOwnPropertyNames||function(n){return h$(n,p$)};var E_={};E_.f=Object.getOwnPropertySymbols;var f$=Ke,m$=Om,g$=E_,v$=Xa,E$=y([].concat),_$=f$("Reflect","ownKeys")||function(n){var r=m$.f(v$(n)),i=g$.f;return i?E$(r,i(n)):r},L1=Xn,S$=_$,y$=V,C$=qa,__={},T$=k1,b$=v_,S_=Object.keys||function(n){return T$(n,b$)},R$=j,I$=g1,w$=qa,O$=Xa,A$=lt,N$=S_;__.f=R$&&!I$?Object.defineProperties:function(n,r){O$(n);for(var i,a=A$(r),l=N$(r),d=l.length,p=0;d>p;)w$.f(n,i=l[p++],a[i]);return n};var Nm,M1=Ke("document","documentElement"),x$=Xa,P$=__,U1=v_,D$=Am,k$=M1,L$=Js,F1=wm("IE_PROTO"),y_=function(){},V1=function(n){return"<script>"+n+"<\/script>"},j1=function(n){n.write(V1("")),n.close();var r=n.parentWindow.Object;return n=null,r},xm=function(){try{Nm=new ActiveXObject("htmlfile")}catch{}var n,r;xm=typeof document<"u"?document.domain&&Nm?j1(Nm):((r=L$("iframe")).style.display="none",k$.appendChild(r),r.src="javascript:",(n=r.contentWindow.document).open(),n.write(V1("document.F=Object")),n.close(),n.F):j1(Nm);for(var i=U1.length;i--;)delete xm.prototype[U1[i]];return xm()};D$[F1]=!0;var Pm=Object.create||function(n,r){var i;return n!==null?(y_.prototype=x$(n),i=new y_,y_.prototype=null,i[F1]=n):i=xm(),r===void 0?i:P$.f(i,r)},M$=y("".replace),U$=String(Error("zxcasd").stack),B1=/\n\s*at [^:]*:[^\n]*/,F$=B1.test(U$),V$=ht,j$=Vl,Yu={},B$=Yu,$$=or("iterator"),H$=Array.prototype,$1={};$1[or("toStringTag")]="z";var C_=String($1)==="[object z]",W$=I,G$=C_,z$=U,Dm=Ee,K$=or("toStringTag"),Y$=W$.Object,q$=Dm(function(){return arguments}())=="Arguments",Fc=G$?Dm:function(n){var r,i,a;return n===void 0?"Undefined":n===null?"Null":typeof(i=function(l,d){try{return l[d]}catch{}}(r=Y$(n),K$))=="string"?i:q$?Dm(r):(a=Dm(r))=="Object"&&z$(r.callee)?"Arguments":a},X$=Fc,H1=Ar,J$=Yu,Q$=or("iterator"),W1=function(n){if(n!=null)return H1(n,Q$)||H1(n,"@@iterator")||J$[X$(n)]},Z$=ee,eH=kt,tH=Xa,nH=gn,rH=W1,iH=I.TypeError,oH=ee,G1=Xa,aH=Ar,sH=np,cH=ee,lH=Xa,uH=gn,dH=function(n){return n!==void 0&&(B$.Array===n||H$[$$]===n)},hH=Lc,z1=T,pH=function(n,r){var i=arguments.length<2?rH(n):r;if(eH(i))return tH(Z$(i,n));throw iH(nH(n)+" is not iterable")},fH=W1,K1=function(n,r,i){var a,l;G1(n);try{if(!(a=aH(n,"return"))){if(r==="throw")throw i;return i}a=oH(a,n)}catch(d){l=!0,a=d}if(r==="throw")throw i;if(l)throw a;return G1(a),i},mH=I.TypeError,km=function(n,r){this.stopped=n,this.result=r},Y1=km.prototype,Lm=function(n,r,i){var a,l,d,p,g,E,C,S=i&&i.that,R=!(!i||!i.AS_ENTRIES),k=!(!i||!i.IS_ITERATOR),F=!(!i||!i.INTERRUPTED),W=sH(r,S),G=function(oe){return a&&K1(a,"normal",oe),new km(!0,oe)},z=function(oe){return R?(lH(oe),F?W(oe[0],oe[1],G):W(oe[0],oe[1])):F?W(oe,G):W(oe)};if(k)a=n;else{if(!(l=fH(n)))throw mH(uH(n)+" is not iterable");if(dH(l)){for(d=0,p=hH(n);p>d;d++)if((g=z(n[d]))&&z1(Y1,g))return g;return new km(!1)}a=pH(n,l)}for(E=a.next;!(C=cH(E,a)).done;){try{g=z(C.value)}catch(oe){K1(a,"throw",oe)}if(typeof g=="object"&&g&&z1(Y1,g))return g}return new km(!1)},gH=Fc,vH=I.String,qu=function(n){if(gH(n)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return vH(n)},EH=qu,_H=ae,SH=!c(function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",_H(1,7)),n.stack!==7)}),yH=xi,CH=I,TH=T,bH=f_,Mm=t$,RH=function(n,r,i){for(var a=S$(r),l=C$.f,d=y$.f,p=0;p<a.length;p++){var g=a[p];L1(n,g)||i&&L1(i,g)||l(n,g,d(r,g))}},q1=Pm,Um=Vl,T_=ae,IH=function(n,r){if(F$&&typeof n=="string")for(;r--;)n=M$(n,B1,"");return n},wH=function(n,r){V$(r)&&"cause"in r&&j$(n,"cause",r.cause)},OH=Lm,AH=function(n,r){return n===void 0?arguments.length<2?"":r:EH(n)},NH=SH,xH=or("toStringTag"),Fm=CH.Error,PH=[].push,rp=function(n,r){var i,a=arguments.length>2?arguments[2]:void 0,l=TH(b_,this);Mm?i=Mm(new Fm,l?bH(this):b_):(i=l?this:q1(b_),Um(i,xH,"Error")),r!==void 0&&Um(i,"message",AH(r)),NH&&Um(i,"stack",IH(i.stack,1)),wH(i,a);var d=[];return OH(n,PH,{that:d}),Um(i,"errors",d),i};Mm?Mm(rp,Fm):RH(rp,Fm,{name:!0});var b_=rp.prototype=q1(Fm.prototype,{constructor:T_(1,rp),message:T_(1,""),name:T_(1,"AggregateError")});yH({global:!0},{AggregateError:rp});var DH=U,R_=zi,kH=y(Function.toString);DH(R_.inspectSource)||(R_.inspectSource=function(n){return kH(n)});var Vm,ip,jm,I_=R_.inspectSource,LH=U,MH=I_,X1=I.WeakMap,UH=LH(X1)&&/native code/.test(MH(X1)),J1=I,w_=y,FH=ht,VH=Vl,O_=Xn,A_=zi,jH=wm,BH=Am,Q1="Object already initialized",N_=J1.TypeError,$H=J1.WeakMap;if(UH||A_.state){var Bl=A_.state||(A_.state=new $H),HH=w_(Bl.get),Z1=w_(Bl.has),WH=w_(Bl.set);Vm=function(n,r){if(Z1(Bl,n))throw new N_(Q1);return r.facade=n,WH(Bl,n,r),r},ip=function(n){return HH(Bl,n)||{}},jm=function(n){return Z1(Bl,n)}}else{var Xu=jH("state");BH[Xu]=!0,Vm=function(n,r){if(O_(n,Xu))throw new N_(Q1);return r.facade=n,VH(n,Xu,r),r},ip=function(n){return O_(n,Xu)?n[Xu]:{}},jm=function(n){return O_(n,Xu)}}var $l,eO,tO,Bm={set:Vm,get:ip,has:jm,enforce:function(n){return jm(n)?ip(n):Vm(n,{})},getterFor:function(n){return function(r){var i;if(!FH(r)||(i=ip(r)).type!==n)throw N_("Incompatible receiver, "+n+" required");return i}}},x_=j,GH=Xn,nO=Function.prototype,zH=x_&&Object.getOwnPropertyDescriptor,P_=GH(nO,"name"),rO={EXISTS:P_,PROPER:P_&&(function(){}).name==="something",CONFIGURABLE:P_&&(!x_||x_&&zH(nO,"name").configurable)},KH=Vl,$m=function(n,r,i,a){a&&a.enumerable?n[r]=i:KH(n,r,i)},YH=c,qH=U,XH=Pm,iO=f_,JH=$m,D_=or("iterator"),oO=!1;[].keys&&("next"in(tO=[].keys())?(eO=iO(iO(tO)))!==Object.prototype&&($l=eO):oO=!0);var QH=$l==null||YH(function(){var n={};return $l[D_].call(n)!==n});qH(($l=QH?{}:XH($l))[D_])||JH($l,D_,function(){return this});var aO={IteratorPrototype:$l,BUGGY_SAFARI_ITERATORS:oO},ZH=Fc,eW=C_?{}.toString:function(){return"[object "+ZH(this)+"]"},tW=C_,nW=qa.f,rW=Vl,iW=Xn,oW=eW,sO=or("toStringTag"),op=function(n,r,i,a){if(n){var l=i?n:n.prototype;iW(l,sO)||nW(l,sO,{configurable:!0,value:r}),a&&!tW&&rW(l,"toString",oW)}},aW=aO.IteratorPrototype,sW=Pm,cW=ae,lW=op,uW=Yu,dW=function(){return this},hW=xi,pW=ee,fW=function(n,r,i,a){var l=r+" Iterator";return n.prototype=sW(aW,{next:cW(+!a,i)}),lW(n,l,!1,!0),uW[l]=dW,n},mW=f_,gW=op,cO=$m,lO=Yu,vW=rO.PROPER,Hm=aO.BUGGY_SAFARI_ITERATORS,k_=or("iterator"),uO="keys",Wm="values",dO="entries",EW=function(){return this},hO=function(n,r,i,a,l,d,p){fW(i,r,a);var g,E,C,S=function(oe){if(oe===l&&G)return G;if(!Hm&&oe in F)return F[oe];switch(oe){case uO:case Wm:case dO:return function(){return new i(this,oe)}}return function(){return new i(this)}},R=r+" Iterator",k=!1,F=n.prototype,W=F[k_]||F["@@iterator"]||l&&F[l],G=!Hm&&W||S(l),z=r=="Array"&&F.entries||W;if(z&&(g=mW(z.call(new n)))!==Object.prototype&&g.next&&(gW(g,R,!0,!0),lO[R]=EW),vW&&l==Wm&&W&&W.name!==Wm&&(k=!0,G=function(){return pW(W,this)}),l)if(E={values:S(Wm),keys:d?G:S(uO),entries:S(dO)},p)for(C in E)(Hm||k||!(C in F))&&cO(F,C,E[C]);else hW({target:r,proto:!0,forced:Hm||k},E);return p&&F[k_]!==G&&cO(F,k_,G,{name:l}),lO[r]=G,E},_W=lt,pO=Yu,fO=Bm;qa.f;var SW=hO,mO="Array Iterator",yW=fO.set,CW=fO.getterFor(mO);SW(Array,"Array",function(n,r){yW(this,{type:mO,target:_W(n),index:0,kind:r})},function(){var n=CW(this),r=n.target,i=n.kind,a=n.index++;return!r||a>=r.length?(n.target=void 0,{value:void 0,done:!0}):i=="keys"?{value:a,done:!1}:i=="values"?{value:r[a],done:!1}:{value:[a,r[a]],done:!1}},"values"),pO.Arguments=pO.Array;var gO=I.Promise,TW=$m,bW=Ke,RW=qa,IW=j,vO=or("species"),wW=T,OW=I.TypeError,EO=or("iterator"),_O=!1;try{var AW=0,SO={next:function(){return{done:!!AW++}},return:function(){_O=!0}};SO[EO]=function(){return this},Array.from(SO,function(){throw 2})}catch{}var NW=y,xW=c,yO=U,PW=Fc,DW=I_,CO=function(){},kW=[],TO=Ke("Reflect","construct"),L_=/^\s*(?:class|function)\b/,LW=NW(L_.exec),MW=!L_.exec(CO),ap=function(n){if(!yO(n))return!1;try{return TO(CO,kW,n),!0}catch{return!1}},bO=function(n){if(!yO(n))return!1;switch(PW(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return MW||!!LW(L_,DW(n))}catch{return!0}};bO.sham=!0;var sp,Ju,RO,M_,U_=!TO||xW(function(){var n;return ap(ap.call)||!ap(Object)||!ap(function(){n=!0})||n})?bO:ap,UW=U_,FW=gn,VW=I.TypeError,IO=Xa,jW=function(n){if(UW(n))return n;throw VW(FW(n)+" is not a constructor")},BW=or("species"),wO=function(n,r){var i,a=IO(n).constructor;return a===void 0||(i=IO(a)[BW])==null?r:jW(i)},F_=y([].slice),OO=/(?:ipad|iphone|ipod).*applewebkit/i.test(Ge),Ko=I,$W=D,HW=np,AO=U,WW=Xn,GW=c,NO=M1,zW=F_,xO=Js,KW=OO,YW=Rm,V_=Ko.setImmediate,j_=Ko.clearImmediate,qW=Ko.process,B_=Ko.Dispatch,XW=Ko.Function,PO=Ko.MessageChannel,JW=Ko.String,$_=0,cp={},QW="onreadystatechange";try{sp=Ko.location}catch{}var H_=function(n){if(WW(cp,n)){var r=cp[n];delete cp[n],r()}},W_=function(n){return function(){H_(n)}},DO=function(n){H_(n.data)},kO=function(n){Ko.postMessage(JW(n),sp.protocol+"//"+sp.host)};V_&&j_||(V_=function(n){var r=zW(arguments,1);return cp[++$_]=function(){$W(AO(n)?n:XW(n),void 0,r)},Ju($_),$_},j_=function(n){delete cp[n]},YW?Ju=function(n){qW.nextTick(W_(n))}:B_&&B_.now?Ju=function(n){B_.now(W_(n))}:PO&&!KW?(M_=(RO=new PO).port2,RO.port1.onmessage=DO,Ju=HW(M_.postMessage,M_)):Ko.addEventListener&&AO(Ko.postMessage)&&!Ko.importScripts&&sp&&sp.protocol!=="file:"&&!GW(kO)?(Ju=kO,Ko.addEventListener("message",DO,!1)):Ju=QW in xO("script")?function(n){NO.appendChild(xO("script")).onreadystatechange=function(){NO.removeChild(this),H_(n)}}:function(n){setTimeout(W_(n),0)});var lp,Hl,up,Qu,G_,z_,K_,LO,MO={set:V_,clear:j_},ZW=I,eG=/ipad|iphone|ipod/i.test(Ge)&&ZW.Pebble!==void 0,tG=/web0s(?!.*chrome)/i.test(Ge),Wl=I,UO=np,nG=V.f,Y_=MO.set,rG=OO,iG=eG,oG=tG,q_=Rm,FO=Wl.MutationObserver||Wl.WebKitMutationObserver,VO=Wl.document,jO=Wl.process,Gm=Wl.Promise,BO=nG(Wl,"queueMicrotask"),$O=BO&&BO.value;$O||(lp=function(){var n,r;for(q_&&(n=jO.domain)&&n.exit();Hl;){r=Hl.fn,Hl=Hl.next;try{r()}catch(i){throw Hl?Qu():up=void 0,i}}up=void 0,n&&n.enter()},rG||q_||oG||!FO||!VO?!iG&&Gm&&Gm.resolve?((K_=Gm.resolve(void 0)).constructor=Gm,LO=UO(K_.then,K_),Qu=function(){LO(lp)}):q_?Qu=function(){jO.nextTick(lp)}:(Y_=UO(Y_,Wl),Qu=function(){Y_(lp)}):(G_=!0,z_=VO.createTextNode(""),new FO(lp).observe(z_,{characterData:!0}),Qu=function(){z_.data=G_=!G_}));var aG=$O||function(n){var r={fn:n,next:void 0};up&&(up.next=r),Hl||(Hl=r,Qu()),up=r},Zu={},HO=kt,sG=function(n){var r,i;this.promise=new n(function(a,l){if(r!==void 0||i!==void 0)throw TypeError("Bad Promise constructor");r=a,i=l}),this.resolve=HO(r),this.reject=HO(i)};Zu.f=function(n){return new sG(n)};var cG=Xa,lG=ht,uG=Zu,WO=function(n,r){if(cG(n),lG(r)&&r.constructor===n)return r;var i=uG.f(n);return(0,i.resolve)(r),i.promise},dG=I,zm=function(n){try{return{error:!1,value:n()}}catch(r){return{error:!0,value:r}}},GO=function(){this.head=null,this.tail=null};GO.prototype={add:function(n){var r={item:n,next:null};this.head?this.tail.next=r:this.head=r,this.tail=r},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}};var X_,zO,J_,hG=typeof window=="object",Km=xi,Zs=I,pG=Ke,Vc=ee,Q_=gO,fG=function(n,r,i){for(var a in r)i&&i.unsafe&&n[a]?n[a]=r[a]:TW(n,a,r[a],i);return n},mG=op,gG=function(n){var r=bW(n),i=RW.f;IW&&r&&!r[vO]&&i(r,vO,{configurable:!0,get:function(){return this}})},Z_=kt,Ym=U,vG=ht,EG=function(n,r){if(wW(r,n))return n;throw OW("Incorrect invocation")},_G=I_,KO=Lm,SG=function(n,r){if(!r&&!_O)return!1;var i=!1;try{var a={};a[EO]=function(){return{next:function(){return{done:i=!0}}}},n(a)}catch{}return i},yG=wO,YO=MO.set,eS=aG,CG=WO,TG=function(n,r){var i=dG.console;i&&i.error&&(arguments.length==1?i.error(n):i.error(n,r))},qO=Zu,tS=zm,bG=GO,nS=Bm,RG=Wu,IG=hG,qm=Rm,XO=Nn,wG=or("species"),bs="Promise",JO=nS.getterFor(bs),OG=nS.set,AG=nS.getterFor(bs),NG=Q_&&Q_.prototype,Rs=Q_,Xm=NG,QO=Zs.TypeError,rS=Zs.document,iS=Zs.process,ed=qO.f,xG=ed,PG=!!(rS&&rS.createEvent&&Zs.dispatchEvent),ZO=Ym(Zs.PromiseRejectionEvent),eA="unhandledrejection",Jm=RG(bs,function(){var n=_G(Rs),r=n!==String(Rs);if(!r&&XO===66||!Xm.finally)return!0;if(XO>=51&&/native code/.test(n))return!1;var i=new Rs(function(l){l(1)}),a=function(l){l(function(){},function(){})};return(i.constructor={})[wG]=a,!(i.then(function(){})instanceof a)||!r&&IG&&!ZO}),DG=Jm||!SG(function(n){Rs.all(n).catch(function(){})}),tA=function(n){var r;return!(!vG(n)||!Ym(r=n.then))&&r},nA=function(n,r){var i,a,l,d=r.value,p=r.state==1,g=p?n.ok:n.fail,E=n.resolve,C=n.reject,S=n.domain;try{g?(p||(r.rejection===2&&LG(r),r.rejection=1),g===!0?i=d:(S&&S.enter(),i=g(d),S&&(S.exit(),l=!0)),i===n.promise?C(QO("Promise-chain cycle")):(a=tA(i))?Vc(a,i,E,C):E(i)):C(d)}catch(R){S&&!l&&S.exit(),C(R)}},rA=function(n,r){n.notified||(n.notified=!0,eS(function(){for(var i,a=n.reactions;i=a.get();)nA(i,n);n.notified=!1,r&&!n.rejection&&kG(n)}))},iA=function(n,r,i){var a,l;PG?((a=rS.createEvent("Event")).promise=r,a.reason=i,a.initEvent(n,!1,!0),Zs.dispatchEvent(a)):a={promise:r,reason:i},!ZO&&(l=Zs["on"+n])?l(a):n===eA&&TG("Unhandled promise rejection",i)},kG=function(n){Vc(YO,Zs,function(){var r,i=n.facade,a=n.value;if(oA(n)&&(r=tS(function(){qm?iS.emit("unhandledRejection",a,i):iA(eA,i,a)}),n.rejection=qm||oA(n)?2:1,r.error))throw r.value})},oA=function(n){return n.rejection!==1&&!n.parent},LG=function(n){Vc(YO,Zs,function(){var r=n.facade;qm?iS.emit("rejectionHandled",r):iA("rejectionhandled",r,n.value)})},td=function(n,r,i){return function(a){n(r,a,i)}},nd=function(n,r,i){n.done||(n.done=!0,i&&(n=i),n.value=r,n.state=2,rA(n,!0))},oS=function(n,r,i){if(!n.done){n.done=!0,i&&(n=i);try{if(n.facade===r)throw QO("Promise can't be resolved itself");var a=tA(r);a?eS(function(){var l={done:!1};try{Vc(a,r,td(oS,l,n),td(nd,l,n))}catch(d){nd(l,d,n)}}):(n.value=r,n.state=1,rA(n,!1))}catch(l){nd({done:!1},l,n)}}};Jm&&(Xm=(Rs=function(n){EG(this,Xm),Z_(n),Vc(X_,this);var r=JO(this);try{n(td(oS,r),td(nd,r))}catch(i){nd(r,i)}}).prototype,(X_=function(n){OG(this,{type:bs,done:!1,notified:!1,parent:!1,reactions:new bG,rejection:!1,state:0,value:void 0})}).prototype=fG(Xm,{then:function(n,r){var i=AG(this),a=ed(yG(this,Rs));return i.parent=!0,a.ok=!Ym(n)||n,a.fail=Ym(r)&&r,a.domain=qm?iS.domain:void 0,i.state==0?i.reactions.add(a):eS(function(){nA(a,i)}),a.promise},catch:function(n){return this.then(void 0,n)}}),zO=function(){var n=new X_,r=JO(n);this.promise=n,this.resolve=td(oS,r),this.reject=td(nd,r)},qO.f=ed=function(n){return n===Rs||n===J_?new zO(n):xG(n)}),Km({global:!0,wrap:!0,forced:Jm},{Promise:Rs}),mG(Rs,bs,!1,!0),gG(bs),J_=pG(bs),Km({target:bs,stat:!0,forced:Jm},{reject:function(n){var r=ed(this);return Vc(r.reject,void 0,n),r.promise}}),Km({target:bs,stat:!0,forced:!0},{resolve:function(n){return CG(this===J_?Rs:this,n)}}),Km({target:bs,stat:!0,forced:DG},{all:function(n){var r=this,i=ed(r),a=i.resolve,l=i.reject,d=tS(function(){var p=Z_(r.resolve),g=[],E=0,C=1;KO(n,function(S){var R=E++,k=!1;C++,Vc(p,r,S).then(function(F){k||(k=!0,g[R]=F,--C||a(g))},l)}),--C||a(g)});return d.error&&l(d.value),i.promise},race:function(n){var r=this,i=ed(r),a=i.reject,l=tS(function(){var d=Z_(r.resolve);KO(n,function(p){Vc(d,r,p).then(i.resolve,a)})});return l.error&&a(l.value),i.promise}});var MG=ee,UG=kt,FG=Zu,VG=zm,jG=Lm;xi({target:"Promise",stat:!0},{allSettled:function(n){var r=this,i=FG.f(r),a=i.resolve,l=i.reject,d=VG(function(){var p=UG(r.resolve),g=[],E=0,C=1;jG(n,function(S){var R=E++,k=!1;C++,MG(p,r,S).then(function(F){k||(k=!0,g[R]={status:"fulfilled",value:F},--C||a(g))},function(F){k||(k=!0,g[R]={status:"rejected",reason:F},--C||a(g))})}),--C||a(g)});return d.error&&l(d.value),i.promise}});var BG=kt,$G=Ke,HG=ee,WG=Zu,GG=zm,zG=Lm,aA="No one promise resolved";xi({target:"Promise",stat:!0},{any:function(n){var r=this,i=$G("AggregateError"),a=WG.f(r),l=a.resolve,d=a.reject,p=GG(function(){var g=BG(r.resolve),E=[],C=0,S=1,R=!1;zG(n,function(k){var F=C++,W=!1;S++,HG(g,r,k).then(function(G){W||R||(R=!0,l(G))},function(G){W||R||(W=!0,E[F]=G,--S||d(new i(E,aA)))})}),--S||d(new i(E,aA))});return p.error&&d(p.value),a.promise}});var sA=gO,KG=Ke,YG=U,qG=wO,cA=WO;xi({target:"Promise",proto:!0,real:!0,forced:!!sA&&c(function(){sA.prototype.finally.call({then:function(){}},function(){})})},{finally:function(n){var r=qG(this,KG("Promise")),i=YG(n);return this.then(i?function(a){return cA(r,n()).then(function(){return a})}:n,i?function(a){return cA(r,n()).then(function(){throw a})}:n)}});var aS=y,XG=l_,JG=qu,QG=Be,ZG=aS("".charAt),lA=aS("".charCodeAt),ez=aS("".slice),uA=function(n){return function(r,i){var a,l,d=JG(QG(r)),p=XG(i),g=d.length;return p<0||p>=g?n?"":void 0:(a=lA(d,p))<55296||a>56319||p+1===g||(l=lA(d,p+1))<56320||l>57343?n?ZG(d,p):a:n?ez(d,p,p+2):l-56320+(a-55296<<10)+65536}},tz={codeAt:uA(!1),charAt:uA(!0)}.charAt,nz=qu,dA=Bm,rz=hO,hA="String Iterator",iz=dA.set,oz=dA.getterFor(hA);rz(String,"String",function(n){iz(this,{type:hA,string:nz(n),index:0})},function(){var n,r=oz(this),i=r.string,a=r.index;return a>=i.length?{value:void 0,done:!0}:(n=tz(i,a),r.index+=n.length,{value:n,done:!1})});var az=ze.Promise,sz={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},cz=I,lz=Fc,uz=Vl,pA=Yu,fA=or("toStringTag");for(var sS in sz){var mA=cz[sS],cS=mA&&mA.prototype;cS&&lz(cS)!==fA&&uz(cS,fA,sS),pA[sS]=pA.Array}var gA=az,Ae=gA;const vA=R1;function EA(n,r){const i=n&&n.navigator;if(!i.mediaDevices)return;const a=function(p){if(typeof p!="object"||p.mandatory||p.optional)return p;const g={};return Object.keys(p).forEach(E=>{if(E==="require"||E==="advanced"||E==="mediaSource")return;const C=typeof p[E]=="object"?p[E]:{ideal:p[E]};C.exact!==void 0&&typeof C.exact=="number"&&(C.min=C.max=C.exact);const S=function(R,k){return R?R+k.charAt(0).toUpperCase()+k.slice(1):k==="deviceId"?"sourceId":k};if(C.ideal!==void 0){g.optional=g.optional||[];let R={};typeof C.ideal=="number"?(R[S("min",E)]=C.ideal,g.optional.push(R),R={},R[S("max",E)]=C.ideal,g.optional.push(R)):(R[S("",E)]=C.ideal,g.optional.push(R))}C.exact!==void 0&&typeof C.exact!="number"?(g.mandatory=g.mandatory||{},g.mandatory[S("",E)]=C.exact):["min","max"].forEach(R=>{C[R]!==void 0&&(g.mandatory=g.mandatory||{},g.mandatory[S(R,E)]=C[R])})}),p.advanced&&(g.optional=(g.optional||[]).concat(p.advanced)),g},l=function(p,g){if(r.version>=61)return g(p);if((p=JSON.parse(JSON.stringify(p)))&&typeof p.audio=="object"){const E=function(C,S,R){S in C&&!(R in C)&&(C[R]=C[S],delete C[S])};E((p=JSON.parse(JSON.stringify(p))).audio,"autoGainControl","googAutoGainControl"),E(p.audio,"noiseSuppression","googNoiseSuppression"),p.audio=a(p.audio)}if(p&&typeof p.video=="object"){let E=p.video.facingMode;E=E&&(typeof E=="object"?E:{ideal:E});const C=r.version<66;if(E&&(E.exact==="user"||E.exact==="environment"||E.ideal==="user"||E.ideal==="environment")&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||C)){let S;if(delete p.video.facingMode,E.exact==="environment"||E.ideal==="environment"?S=["back","rear"]:E.exact!=="user"&&E.ideal!=="user"||(S=["front"]),S)return i.mediaDevices.enumerateDevices().then(R=>{let k=(R=R.filter(F=>F.kind==="videoinput")).find(F=>S.some(W=>F.label.toLowerCase().includes(W)));return!k&&R.length&&S.includes("back")&&(k=R[R.length-1]),k&&(p.video.deviceId=E.exact?{exact:k.deviceId}:{ideal:k.deviceId}),p.video=a(p.video),vA("chrome: "+JSON.stringify(p)),g(p)})}p.video=a(p.video)}return vA("chrome: "+JSON.stringify(p)),g(p)},d=function(p){return r.version>=64?p:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[p.name]||p.name,message:p.message,constraint:p.constraint||p.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(i.getUserMedia=(function(p,g,E){l(p,C=>{i.webkitGetUserMedia(C,g,S=>{E&&E(d(S))})})}).bind(i),i.mediaDevices.getUserMedia){const p=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(g){return l(g,E=>p(E).then(C=>{if(E.audio&&!C.getAudioTracks().length||E.video&&!C.getVideoTracks().length)throw C.getTracks().forEach(S=>{S.stop()}),new DOMException("","NotFoundError");return C},C=>Ae.reject(d(C))))}}}function _A(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function SA(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(i){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=i)},enumerable:!0,configurable:!0});const r=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",a=>{let l;l=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(p=>p.track&&p.track.id===a.track.id):{track:a.track};const d=new Event("track");d.track=a.track,d.receiver=l,d.transceiver={receiver:l},d.streams=[i.stream],this.dispatchEvent(d)}),i.stream.getTracks().forEach(a=>{let l;l=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(p=>p.track&&p.track.id===a.id):{track:a};const d=new Event("track");d.track=a,d.receiver=l,d.transceiver={receiver:l},d.streams=[i.stream],this.dispatchEvent(d)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}else jl(n,"track",r=>(r.transceiver||Object.defineProperty(r,"transceiver",{value:{receiver:r.receiver}}),r))}function yA(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const r=function(l,d){return{track:d,get dtmf(){return this._dtmf===void 0&&(d.kind==="audio"?this._dtmf=l.createDTMFSender(d):this._dtmf=null),this._dtmf},_pc:l}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const l=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(p,g){let E=l.apply(this,arguments);return E||(E=r(this,p),this._senders.push(E)),E};const d=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(p){d.apply(this,arguments);const g=this._senders.indexOf(p);g!==-1&&this._senders.splice(g,1)}}const i=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],i.apply(this,[l]),l.getTracks().forEach(d=>{this._senders.push(r(this,d))})};const a=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],a.apply(this,[l]),l.getTracks().forEach(d=>{const p=this._senders.find(g=>g.track===d);p&&this._senders.splice(this._senders.indexOf(p),1)})}}else if(typeof n=="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const r=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const i=r.apply(this,[]);return i.forEach(a=>a._pc=this),i},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function CA(n){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[i,a,l]=arguments;if(arguments.length>0&&typeof i=="function")return r.apply(this,arguments);if(r.length===0&&(arguments.length===0||typeof i!="function"))return r.apply(this,[]);const d=function(g){const E={};return g.result().forEach(C=>{const S={id:C.id,timestamp:C.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[C.type]||C.type};C.names().forEach(R=>{S[R]=C.stat(R)}),E[S.id]=S}),E},p=function(g){return new Map(Object.keys(g).map(E=>[E,g[E]]))};if(arguments.length>=2){const g=function(E){a(p(d(E)))};return r.apply(this,[g,i])}return new Ae((g,E)=>{r.apply(this,[function(C){g(p(d(C)))},E])}).then(a,l)}}function TA(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const i=n.RTCPeerConnection.prototype.getSenders;i&&(n.RTCPeerConnection.prototype.getSenders=function(){const l=i.apply(this,[]);return l.forEach(d=>d._pc=this),l});const a=n.RTCPeerConnection.prototype.addTrack;a&&(n.RTCPeerConnection.prototype.addTrack=function(){const l=a.apply(this,arguments);return l._pc=this,l}),n.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(d=>O1(d,l.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const i=n.RTCPeerConnection.prototype.getReceivers;i&&(n.RTCPeerConnection.prototype.getReceivers=function(){const a=i.apply(this,[]);return a.forEach(l=>l._pc=this),a}),jl(n,"track",a=>(a.receiver._pc=a.srcElement,a)),n.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(l=>O1(l,a.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype)||!("getStats"in n.RTCRtpReceiver.prototype))return;const r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const i=arguments[0];let a,l,d;return this.getSenders().forEach(p=>{p.track===i&&(a?d=!0:a=p)}),this.getReceivers().forEach(p=>(p.track===i&&(l?d=!0:l=p),p.track===i)),d||a&&l?Ae.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():l?l.getStats():Ae.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return r.apply(this,arguments)}}function bA(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(d=>this._shimmedLocalStreams[d][0])};const r=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(d,p){if(!p)return r.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const g=r.apply(this,arguments);return this._shimmedLocalStreams[p.id]?this._shimmedLocalStreams[p.id].indexOf(g)===-1&&this._shimmedLocalStreams[p.id].push(g):this._shimmedLocalStreams[p.id]=[p,g],g};const i=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(d){this._shimmedLocalStreams=this._shimmedLocalStreams||{},d.getTracks().forEach(E=>{if(this.getSenders().find(C=>C.track===E))throw new DOMException("Track already exists.","InvalidAccessError")});const p=this.getSenders();i.apply(this,arguments);const g=this.getSenders().filter(E=>p.indexOf(E)===-1);this._shimmedLocalStreams[d.id]=[d].concat(g)};const a=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[d.id],a.apply(this,arguments)};const l=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},d&&Object.keys(this._shimmedLocalStreams).forEach(p=>{const g=this._shimmedLocalStreams[p].indexOf(d);g!==-1&&this._shimmedLocalStreams[p].splice(g,1),this._shimmedLocalStreams[p].length===1&&delete this._shimmedLocalStreams[p]}),l.apply(this,arguments)}}function RA(n,r){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&r.version>=65)return bA(n);const i=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const C=i.apply(this);return this._reverseStreams=this._reverseStreams||{},C.map(S=>this._reverseStreams[S.id])};const a=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(C){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},C.getTracks().forEach(S=>{if(this.getSenders().find(R=>R.track===S))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[C.id]){const S=new n.MediaStream(C.getTracks());this._streams[C.id]=S,this._reverseStreams[S.id]=C,C=S}a.apply(this,[C])};const l=n.RTCPeerConnection.prototype.removeStream;function d(C,S){let R=S.sdp;return Object.keys(C._reverseStreams||[]).forEach(k=>{const F=C._reverseStreams[k],W=C._streams[F.id];R=R.replace(new RegExp(W.id,"g"),F.id)}),new RTCSessionDescription({type:S.type,sdp:R})}function p(C,S){let R=S.sdp;return Object.keys(C._reverseStreams||[]).forEach(k=>{const F=C._reverseStreams[k],W=C._streams[F.id];R=R.replace(new RegExp(F.id,"g"),W.id)}),new RTCSessionDescription({type:S.type,sdp:R})}n.RTCPeerConnection.prototype.removeStream=function(C){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.apply(this,[this._streams[C.id]||C]),delete this._reverseStreams[this._streams[C.id]?this._streams[C.id].id:C.id],delete this._streams[C.id]},n.RTCPeerConnection.prototype.addTrack=function(C,S){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const R=[].slice.call(arguments,1);if(R.length!==1||!R[0].getTracks().find(W=>W===C))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(W=>W.track===C))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const F=this._streams[S.id];if(F)F.addTrack(C),Ae.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const W=new n.MediaStream([C]);this._streams[S.id]=W,this._reverseStreams[W.id]=S,this.addStream(W)}return this.getSenders().find(W=>W.track===C)},["createOffer","createAnswer"].forEach(function(C){const S=n.RTCPeerConnection.prototype[C],R={[C](){const k=arguments;return arguments.length&&typeof arguments[0]=="function"?S.apply(this,[F=>{const W=d(this,F);k[0].apply(null,[W])},F=>{k[1]&&k[1].apply(null,F)},arguments[2]]):S.apply(this,arguments).then(F=>d(this,F))}};n.RTCPeerConnection.prototype[C]=R[C]});const g=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=p(this,arguments[0]),g.apply(this,arguments)):g.apply(this,arguments)};const E=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const C=E.get.apply(this);return C.type===""?C:d(this,C)}}),n.RTCPeerConnection.prototype.removeTrack=function(C){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!C._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(C._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let S;this._streams=this._streams||{},Object.keys(this._streams).forEach(R=>{this._streams[R].getTracks().find(k=>C.track===k)&&(S=this._streams[R])}),S&&(S.getTracks().length===1?this.removeStream(this._reverseStreams[S.id]):S.removeTrack(C.track),this.dispatchEvent(new Event("negotiationneeded")))}}function lS(n,r){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const a=n.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};n.RTCPeerConnection.prototype[i]=l[i]})}function IA(n,r){jl(n,"negotiationneeded",i=>{const a=i.target;if(!(r.version<72||a.getConfiguration&&a.getConfiguration().sdpSemantics==="plan-b")||a.signalingState==="stable")return i})}var wA=Object.freeze({__proto__:null,shimMediaStream:_A,shimOnTrack:SA,shimGetSendersWithDtmf:yA,shimGetStats:CA,shimSenderReceiverGetStats:TA,shimAddTrackRemoveTrackWithNative:bA,shimAddTrackRemoveTrack:RA,shimPeerConnection:lS,fixNegotiationNeeded:IA,shimGetUserMedia:EA,shimGetDisplayMedia:function(n,r){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(typeof r=="function"?n.navigator.mediaDevices.getDisplayMedia=function(i){return r(i).then(a=>{const l=i.video&&i.video.width,d=i.video&&i.video.height,p=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:a,maxFrameRate:p||3}},l&&(i.video.mandatory.maxWidth=l),d&&(i.video.mandatory.maxHeight=d),n.navigator.mediaDevices.getUserMedia(i)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});function OA(n,r){const i=n&&n.navigator,a=n&&n.MediaStreamTrack;if(i.getUserMedia=function(l,d,p){h_("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(l).then(d,p)},!(r.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const l=function(p,g,E){g in p&&!(E in p)&&(p[E]=p[g],delete p[g])},d=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(p){return typeof p=="object"&&typeof p.audio=="object"&&(p=JSON.parse(JSON.stringify(p)),l(p.audio,"autoGainControl","mozAutoGainControl"),l(p.audio,"noiseSuppression","mozNoiseSuppression")),d(p)},a&&a.prototype.getSettings){const p=a.prototype.getSettings;a.prototype.getSettings=function(){const g=p.apply(this,arguments);return l(g,"mozAutoGainControl","autoGainControl"),l(g,"mozNoiseSuppression","noiseSuppression"),g}}if(a&&a.prototype.applyConstraints){const p=a.prototype.applyConstraints;a.prototype.applyConstraints=function(g){return this.kind==="audio"&&typeof g=="object"&&(g=JSON.parse(JSON.stringify(g)),l(g,"autoGainControl","mozAutoGainControl"),l(g,"noiseSuppression","mozNoiseSuppression")),p.apply(this,[g])}}}}function AA(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function uS(n,r){if(typeof n!="object"||!n.RTCPeerConnection&&!n.mozRTCPeerConnection)return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(l){const d=n.RTCPeerConnection.prototype[l],p={[l](){return arguments[0]=new(l==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),d.apply(this,arguments)}};n.RTCPeerConnection.prototype[l]=p[l]});const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},a=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[l,d,p]=arguments;return a.apply(this,[l||null]).then(g=>{if(r.version<53&&!d)try{g.forEach(E=>{E.type=i[E.type]||E.type})}catch(E){if(E.name!=="TypeError")throw E;g.forEach((C,S)=>{g.set(S,Object.assign({},C,{type:i[C.type]||C.type}))})}return g}).then(d,p)}}function NA(n){if(typeof n!="object"||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const r=n.RTCPeerConnection.prototype.getSenders;r&&(n.RTCPeerConnection.prototype.getSenders=function(){const a=r.apply(this,[]);return a.forEach(l=>l._pc=this),a});const i=n.RTCPeerConnection.prototype.addTrack;i&&(n.RTCPeerConnection.prototype.addTrack=function(){const a=i.apply(this,arguments);return a._pc=this,a}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Ae.resolve(new Map)}}function xA(n){if(typeof n!="object"||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const r=n.RTCPeerConnection.prototype.getReceivers;r&&(n.RTCPeerConnection.prototype.getReceivers=function(){const i=r.apply(this,[]);return i.forEach(a=>a._pc=this),i}),jl(n,"track",i=>(i.receiver._pc=i.srcElement,i)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function PA(n){n.RTCPeerConnection&&!("removeStream"in n.RTCPeerConnection.prototype)&&(n.RTCPeerConnection.prototype.removeStream=function(r){h_("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&r.getTracks().includes(i.track)&&this.removeTrack(i)})})}function DA(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function kA(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.addTransceiver;r&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const a=i.length>0;a&&i.forEach(d=>{if("rid"in d&&!/^[a-z0-9]{0,16}$/i.test(d.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in d&&!(parseFloat(d.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in d&&!(parseFloat(d.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=r.apply(this,arguments);if(a){const{sender:d}=l,p=d.getParameters();(!("encodings"in p)||p.encodings.length===1&&Object.keys(p.encodings[0]).length===0)&&(p.encodings=i,d.sendEncodings=i,this.setParametersPromises.push(d.setParameters(p).then(()=>{delete d.sendEncodings}).catch(()=>{delete d.sendEncodings})))}return l})}function LA(n){if(typeof n!="object"||!n.RTCRtpSender)return;const r=n.RTCRtpSender.prototype.getParameters;r&&(n.RTCRtpSender.prototype.getParameters=function(){const i=r.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function MA(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Ae.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}function UA(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Ae.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}var FA=Object.freeze({__proto__:null,shimOnTrack:AA,shimPeerConnection:uS,shimSenderGetStats:NA,shimReceiverGetStats:xA,shimRemoveStream:PA,shimRTCDataChannel:DA,shimAddTransceiver:kA,shimGetParameters:LA,shimCreateOffer:MA,shimCreateAnswer:UA,shimGetUserMedia:OA,shimGetDisplayMedia:function(n,r){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Ae.reject(a)}return i.video===!0?i.video={mediaSource:r}:i.video.mediaSource=r,n.navigator.mediaDevices.getUserMedia(i)})}});function VA(n){if(typeof n=="object"&&n.RTCPeerConnection){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const r=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(a=>r.call(this,a,i)),i.getVideoTracks().forEach(a=>r.call(this,a,i))},n.RTCPeerConnection.prototype.addTrack=function(i){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];return l&&l.forEach(p=>{this._localStreams?this._localStreams.includes(p)||this._localStreams.push(p):this._localStreams=[p]}),r.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(r);if(i===-1)return;this._localStreams.splice(i,1);const a=r.getTracks();this.getSenders().forEach(l=>{a.includes(l.track)&&this.removeTrack(l)})})}}function jA(n){if(typeof n=="object"&&n.RTCPeerConnection&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(i){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=i),this.addEventListener("track",this._onaddstreampoly=a=>{a.streams.forEach(l=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(l))return;this._remoteStreams.push(l);const d=new Event("addstream");d.stream=l,this.dispatchEvent(d)})})}});const r=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(l=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(l)>=0)return;i._remoteStreams.push(l);const d=new Event("addstream");d.stream=l,i.dispatchEvent(d)})}),r.apply(i,arguments)}}}function BA(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype,i=r.createOffer,a=r.createAnswer,l=r.setLocalDescription,d=r.setRemoteDescription,p=r.addIceCandidate;r.createOffer=function(E,C){const S=arguments.length>=2?arguments[2]:arguments[0],R=i.apply(this,[S]);return C?(R.then(E,C),Ae.resolve()):R},r.createAnswer=function(E,C){const S=arguments.length>=2?arguments[2]:arguments[0],R=a.apply(this,[S]);return C?(R.then(E,C),Ae.resolve()):R};let g=function(E,C,S){const R=l.apply(this,[E]);return S?(R.then(C,S),Ae.resolve()):R};r.setLocalDescription=g,g=function(E,C,S){const R=d.apply(this,[E]);return S?(R.then(C,S),Ae.resolve()):R},r.setRemoteDescription=g,g=function(E,C,S){const R=p.apply(this,[E]);return S?(R.then(C,S),Ae.resolve()):R},r.addIceCandidate=g}function $A(n){const r=n&&n.navigator;if(r.mediaDevices&&r.mediaDevices.getUserMedia){const i=r.mediaDevices,a=i.getUserMedia.bind(i);r.mediaDevices.getUserMedia=l=>a(HA(l))}!r.getUserMedia&&r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=(function(i,a,l){r.mediaDevices.getUserMedia(i).then(a,l)}).bind(r))}function HA(n){return n&&n.video!==void 0?Object.assign({},n,{video:w1(n.video)}):n}function WA(n){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection;n.RTCPeerConnection=function(i,a){if(i&&i.iceServers){const l=[];for(let d=0;d<i.iceServers.length;d++){let p=i.iceServers[d];!p.hasOwnProperty("urls")&&p.hasOwnProperty("url")?(h_("RTCIceServer.url","RTCIceServer.urls"),p=JSON.parse(JSON.stringify(p)),p.urls=p.url,delete p.url,l.push(p)):l.push(i.iceServers[d])}i.iceServers=l}return new r(i,a)},n.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:()=>r.generateCertificate})}function GA(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function zA(n){const r=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(i){if(i){i.offerToReceiveAudio!==void 0&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const a=this.getTransceivers().find(d=>d.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):i.offerToReceiveAudio!==!0||a||this.addTransceiver("audio",{direction:"recvonly"}),i.offerToReceiveVideo!==void 0&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const l=this.getTransceivers().find(d=>d.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):i.offerToReceiveVideo!==!0||l||this.addTransceiver("video",{direction:"recvonly"})}return r.apply(this,arguments)}}function KA(n){typeof n!="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}var YA=Object.freeze({__proto__:null,shimLocalStreamsAPI:VA,shimRemoteStreamsAPI:jA,shimCallbacksAPI:BA,shimGetUserMedia:$A,shimConstraints:HA,shimRTCIceServerUrls:WA,shimTrackEventTransceiver:GA,shimCreateOfferLegacy:zA,shimAudioContext:KA}),dz=`	
\v\f\r                　\u2028\u2029\uFEFF`,hz=Be,pz=qu,qA=y("".replace),Qm=`[	
\v\f\r                　\u2028\u2029\uFEFF]`,fz=RegExp("^"+Qm+Qm+"*"),mz=RegExp(Qm+Qm+"*$"),dS=function(n){return function(r){var i=pz(hz(r));return 1&n&&(i=qA(i,fz,"")),2&n&&(i=qA(i,mz,"")),i}},gz={start:dS(1),end:dS(2),trim:dS(3)},vz=rO.PROPER,Ez=c,XA=dz,_z=gz.trim;xi({target:"String",proto:!0,forced:function(n){return Ez(function(){return!!XA[n]()||"​᠎"[n]()!=="​᠎"||vz&&XA[n].name!==n})}("trim")},{trim:function(){return _z(this)}});var Sz=Mc("String").trim,yz=T,Cz=Sz,hS=String.prototype,ec=function(n){var r=n.trim;return typeof n=="string"||n===hS||yz(hS,n)&&r===hS.trim?Cz:r},pS={exports:{}};(function(n){const r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(i){return ec(i).call(i).split(`
`).map(a=>ec(a).call(a))},r.splitSections=function(i){return i.split(`
m=`).map((a,l)=>{var d;return ec(d=l>0?"m="+a:a).call(d)+`\r
`})},r.getDescription=function(i){const a=r.splitSections(i);return a&&a[0]},r.getMediaSections=function(i){const a=r.splitSections(i);return a.shift(),a},r.matchPrefix=function(i,a){return r.splitLines(i).filter(l=>l.indexOf(a)===0)},r.parseCandidate=function(i){let a;a=i.indexOf("a=candidate:")===0?i.substring(12).split(" "):i.substring(10).split(" ");const l={foundation:a[0],component:{1:"rtp",2:"rtcp"}[a[1]]||a[1],protocol:a[2].toLowerCase(),priority:parseInt(a[3],10),ip:a[4],address:a[4],port:parseInt(a[5],10),type:a[7]};for(let d=8;d<a.length;d+=2)switch(a[d]){case"raddr":l.relatedAddress=a[d+1];break;case"rport":l.relatedPort=parseInt(a[d+1],10);break;case"tcptype":l.tcpType=a[d+1];break;case"ufrag":l.ufrag=a[d+1],l.usernameFragment=a[d+1];break;default:l[a[d]]===void 0&&(l[a[d]]=a[d+1])}return l},r.writeCandidate=function(i){const a=[];a.push(i.foundation);const l=i.component;l==="rtp"?a.push(1):l==="rtcp"?a.push(2):a.push(l),a.push(i.protocol.toUpperCase()),a.push(i.priority),a.push(i.address||i.ip),a.push(i.port);const d=i.type;return a.push("typ"),a.push(d),d!=="host"&&i.relatedAddress&&i.relatedPort&&(a.push("raddr"),a.push(i.relatedAddress),a.push("rport"),a.push(i.relatedPort)),i.tcpType&&i.protocol.toLowerCase()==="tcp"&&(a.push("tcptype"),a.push(i.tcpType)),(i.usernameFragment||i.ufrag)&&(a.push("ufrag"),a.push(i.usernameFragment||i.ufrag)),"candidate:"+a.join(" ")},r.parseIceOptions=function(i){return i.substr(14).split(" ")},r.parseRtpMap=function(i){let a=i.substr(9).split(" ");const l={payloadType:parseInt(a.shift(),10)};return a=a[0].split("/"),l.name=a[0],l.clockRate=parseInt(a[1],10),l.channels=a.length===3?parseInt(a[2],10):1,l.numChannels=l.channels,l},r.writeRtpMap=function(i){let a=i.payloadType;i.preferredPayloadType!==void 0&&(a=i.preferredPayloadType);const l=i.channels||i.numChannels||1;return"a=rtpmap:"+a+" "+i.name+"/"+i.clockRate+(l!==1?"/"+l:"")+`\r
`},r.parseExtmap=function(i){const a=i.substr(9).split(" ");return{id:parseInt(a[0],10),direction:a[0].indexOf("/")>0?a[0].split("/")[1]:"sendrecv",uri:a[1]}},r.writeExtmap=function(i){return"a=extmap:"+(i.id||i.preferredId)+(i.direction&&i.direction!=="sendrecv"?"/"+i.direction:"")+" "+i.uri+`\r
`},r.parseFmtp=function(i){const a={};let l;const d=i.substr(i.indexOf(" ")+1).split(";");for(let E=0;E<d.length;E++){var p,g;l=ec(p=d[E]).call(p).split("="),a[ec(g=l[0]).call(g)]=l[1]}return a},r.writeFmtp=function(i){let a="",l=i.payloadType;if(i.preferredPayloadType!==void 0&&(l=i.preferredPayloadType),i.parameters&&Object.keys(i.parameters).length){const d=[];Object.keys(i.parameters).forEach(p=>{i.parameters[p]!==void 0?d.push(p+"="+i.parameters[p]):d.push(p)}),a+="a=fmtp:"+l+" "+d.join(";")+`\r
`}return a},r.parseRtcpFb=function(i){const a=i.substr(i.indexOf(" ")+1).split(" ");return{type:a.shift(),parameter:a.join(" ")}},r.writeRtcpFb=function(i){let a="",l=i.payloadType;return i.preferredPayloadType!==void 0&&(l=i.preferredPayloadType),i.rtcpFeedback&&i.rtcpFeedback.length&&i.rtcpFeedback.forEach(d=>{a+="a=rtcp-fb:"+l+" "+d.type+(d.parameter&&d.parameter.length?" "+d.parameter:"")+`\r
`}),a},r.parseSsrcMedia=function(i){const a=i.indexOf(" "),l={ssrc:parseInt(i.substr(7,a-7),10)},d=i.indexOf(":",a);return d>-1?(l.attribute=i.substr(a+1,d-a-1),l.value=i.substr(d+1)):l.attribute=i.substr(a+1),l},r.parseSsrcGroup=function(i){const a=i.substr(13).split(" ");return{semantics:a.shift(),ssrcs:a.map(l=>parseInt(l,10))}},r.getMid=function(i){const a=r.matchPrefix(i,"a=mid:")[0];if(a)return a.substr(6)},r.parseFingerprint=function(i){const a=i.substr(14).split(" ");return{algorithm:a[0].toLowerCase(),value:a[1].toUpperCase()}},r.getDtlsParameters=function(i,a){return{role:"auto",fingerprints:r.matchPrefix(i+a,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(i,a){let l="a=setup:"+a+`\r
`;return i.fingerprints.forEach(d=>{l+="a=fingerprint:"+d.algorithm+" "+d.value+`\r
`}),l},r.parseCryptoLine=function(i){const a=i.substr(9).split(" ");return{tag:parseInt(a[0],10),cryptoSuite:a[1],keyParams:a[2],sessionParams:a.slice(3)}},r.writeCryptoLine=function(i){return"a=crypto:"+i.tag+" "+i.cryptoSuite+" "+(typeof i.keyParams=="object"?r.writeCryptoKeyParams(i.keyParams):i.keyParams)+(i.sessionParams?" "+i.sessionParams.join(" "):"")+`\r
`},r.parseCryptoKeyParams=function(i){if(i.indexOf("inline:")!==0)return null;const a=i.substr(7).split("|");return{keyMethod:"inline",keySalt:a[0],lifeTime:a[1],mkiValue:a[2]?a[2].split(":")[0]:void 0,mkiLength:a[2]?a[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(i){return i.keyMethod+":"+i.keySalt+(i.lifeTime?"|"+i.lifeTime:"")+(i.mkiValue&&i.mkiLength?"|"+i.mkiValue+":"+i.mkiLength:"")},r.getCryptoParameters=function(i,a){return r.matchPrefix(i+a,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(i,a){const l=r.matchPrefix(i+a,"a=ice-ufrag:")[0],d=r.matchPrefix(i+a,"a=ice-pwd:")[0];return l&&d?{usernameFragment:l.substr(12),password:d.substr(10)}:null},r.writeIceParameters=function(i){let a="a=ice-ufrag:"+i.usernameFragment+`\r
a=ice-pwd:`+i.password+`\r
`;return i.iceLite&&(a+=`a=ice-lite\r
`),a},r.parseRtpParameters=function(i){const a={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=r.splitLines(i)[0].split(" ");for(let d=3;d<l.length;d++){const p=l[d],g=r.matchPrefix(i,"a=rtpmap:"+p+" ")[0];if(g){const E=r.parseRtpMap(g),C=r.matchPrefix(i,"a=fmtp:"+p+" ");switch(E.parameters=C.length?r.parseFmtp(C[0]):{},E.rtcpFeedback=r.matchPrefix(i,"a=rtcp-fb:"+p+" ").map(r.parseRtcpFb),a.codecs.push(E),E.name.toUpperCase()){case"RED":case"ULPFEC":a.fecMechanisms.push(E.name.toUpperCase())}}}return r.matchPrefix(i,"a=extmap:").forEach(d=>{a.headerExtensions.push(r.parseExtmap(d))}),a},r.writeRtpDescription=function(i,a){let l="";l+="m="+i+" ",l+=a.codecs.length>0?"9":"0",l+=" UDP/TLS/RTP/SAVPF ",l+=a.codecs.map(p=>p.preferredPayloadType!==void 0?p.preferredPayloadType:p.payloadType).join(" ")+`\r
`,l+=`c=IN IP4 0.0.0.0\r
`,l+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,a.codecs.forEach(p=>{l+=r.writeRtpMap(p),l+=r.writeFmtp(p),l+=r.writeRtcpFb(p)});let d=0;return a.codecs.forEach(p=>{p.maxptime>d&&(d=p.maxptime)}),d>0&&(l+="a=maxptime:"+d+`\r
`),a.headerExtensions&&a.headerExtensions.forEach(p=>{l+=r.writeExtmap(p)}),l},r.parseRtpEncodingParameters=function(i){const a=[],l=r.parseRtpParameters(i),d=l.fecMechanisms.indexOf("RED")!==-1,p=l.fecMechanisms.indexOf("ULPFEC")!==-1,g=r.matchPrefix(i,"a=ssrc:").map(k=>r.parseSsrcMedia(k)).filter(k=>k.attribute==="cname"),E=g.length>0&&g[0].ssrc;let C;const S=r.matchPrefix(i,"a=ssrc-group:FID").map(k=>k.substr(17).split(" ").map(F=>parseInt(F,10)));S.length>0&&S[0].length>1&&S[0][0]===E&&(C=S[0][1]),l.codecs.forEach(k=>{if(k.name.toUpperCase()==="RTX"&&k.parameters.apt){let F={ssrc:E,codecPayloadType:parseInt(k.parameters.apt,10)};E&&C&&(F.rtx={ssrc:C}),a.push(F),d&&(F=JSON.parse(JSON.stringify(F)),F.fec={ssrc:E,mechanism:p?"red+ulpfec":"red"},a.push(F))}}),a.length===0&&E&&a.push({ssrc:E});let R=r.matchPrefix(i,"b=");return R.length&&(R=R[0].indexOf("b=TIAS:")===0?parseInt(R[0].substr(7),10):R[0].indexOf("b=AS:")===0?1e3*parseInt(R[0].substr(5),10)*.95-16e3:void 0,a.forEach(k=>{k.maxBitrate=R})),a},r.parseRtcpParameters=function(i){const a={},l=r.matchPrefix(i,"a=ssrc:").map(g=>r.parseSsrcMedia(g)).filter(g=>g.attribute==="cname")[0];l&&(a.cname=l.value,a.ssrc=l.ssrc);const d=r.matchPrefix(i,"a=rtcp-rsize");a.reducedSize=d.length>0,a.compound=d.length===0;const p=r.matchPrefix(i,"a=rtcp-mux");return a.mux=p.length>0,a},r.writeRtcpParameters=function(i){let a="";return i.reducedSize&&(a+=`a=rtcp-rsize\r
`),i.mux&&(a+=`a=rtcp-mux\r
`),i.ssrc!==void 0&&i.cname&&(a+="a=ssrc:"+i.ssrc+" cname:"+i.cname+`\r
`),a},r.parseMsid=function(i){let a;const l=r.matchPrefix(i,"a=msid:");if(l.length===1)return a=l[0].substr(7).split(" "),{stream:a[0],track:a[1]};const d=r.matchPrefix(i,"a=ssrc:").map(p=>r.parseSsrcMedia(p)).filter(p=>p.attribute==="msid");return d.length>0?(a=d[0].value.split(" "),{stream:a[0],track:a[1]}):void 0},r.parseSctpDescription=function(i){const a=r.parseMLine(i),l=r.matchPrefix(i,"a=max-message-size:");let d;l.length>0&&(d=parseInt(l[0].substr(19),10)),isNaN(d)&&(d=65536);const p=r.matchPrefix(i,"a=sctp-port:");if(p.length>0)return{port:parseInt(p[0].substr(12),10),protocol:a.fmt,maxMessageSize:d};const g=r.matchPrefix(i,"a=sctpmap:");if(g.length>0){const E=g[0].substr(10).split(" ");return{port:parseInt(E[0],10),protocol:E[1],maxMessageSize:d}}},r.writeSctpDescription=function(i,a){let l=[];return l=i.protocol!=="DTLS/SCTP"?["m="+i.kind+" 9 "+i.protocol+" "+a.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+a.port+`\r
`]:["m="+i.kind+" 9 "+i.protocol+" "+a.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+a.port+" "+a.protocol+` 65535\r
`],a.maxMessageSize!==void 0&&l.push("a=max-message-size:"+a.maxMessageSize+`\r
`),l.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(i,a,l){let d;const p=a!==void 0?a:2;return d=i||r.generateSessionId(),`v=0\r
o=`+(l||"thisisadapterortc")+" "+d+" "+p+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},r.getDirection=function(i,a){const l=r.splitLines(i);for(let d=0;d<l.length;d++)switch(l[d]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return l[d].substr(2)}return a?r.getDirection(a):"sendrecv"},r.getKind=function(i){return r.splitLines(i)[0].split(" ")[0].substr(2)},r.isRejected=function(i){return i.split(" ",2)[1]==="0"},r.parseMLine=function(i){const a=r.splitLines(i)[0].substr(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},r.parseOLine=function(i){const a=r.matchPrefix(i,"o=")[0].substr(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},r.isValidSDP=function(i){if(typeof i!="string"||i.length===0)return!1;const a=r.splitLines(i);for(let l=0;l<a.length;l++)if(a[l].length<2||a[l].charAt(1)!=="=")return!1;return!0},n.exports=r})(pS);var rd=pS.exports,Tz=Object.freeze(o({__proto__:null,default:rd},[pS.exports]));function Zm(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const r=n.RTCIceCandidate;n.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&((i=JSON.parse(JSON.stringify(i))).candidate=i.candidate.substr(2)),i.candidate&&i.candidate.length){const a=new r(i),l=rd.parseCandidate(i.candidate),d=Object.assign(a,l);return d.toJSON=function(){return{candidate:d.candidate,sdpMid:d.sdpMid,sdpMLineIndex:d.sdpMLineIndex,usernameFragment:d.usernameFragment}},d}return new r(i)},n.RTCIceCandidate.prototype=r.prototype,jl(n,"icecandidate",i=>(i.candidate&&Object.defineProperty(i,"candidate",{value:new n.RTCIceCandidate(i.candidate),writable:"false"}),i))}function fS(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||jl(n,"icecandidate",r=>{if(r.candidate){const i=rd.parseCandidate(r.candidate.candidate);i.type==="relay"&&(r.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[i.priority>>24])}return r})}function e0(n,r){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const i=function(g){if(!g||!g.sdp)return!1;const E=rd.splitSections(g.sdp);return E.shift(),E.some(C=>{const S=rd.parseMLine(C);return S&&S.kind==="application"&&S.protocol.indexOf("SCTP")!==-1})},a=function(g){const E=g.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(E===null||E.length<2)return-1;const C=parseInt(E[1],10);return C!=C?-1:C},l=function(g){let E=65536;return r.browser==="firefox"&&(E=r.version<57?g===-1?16384:2147483637:r.version<60?r.version===57?65535:65536:2147483637),E},d=function(g,E){let C=65536;r.browser==="firefox"&&r.version===57&&(C=65535);const S=rd.matchPrefix(g.sdp,"a=max-message-size:");return S.length>0?C=parseInt(S[0].substr(19),10):r.browser==="firefox"&&E!==-1&&(C=2147483637),C},p=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,r.browser==="chrome"&&r.version>=76){const{sdpSemantics:g}=this.getConfiguration();g==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const g=a(arguments[0]),E=l(g),C=d(arguments[0],g);let S;S=E===0&&C===0?Number.POSITIVE_INFINITY:E===0||C===0?Math.max(E,C):Math.min(E,C);const R={};Object.defineProperty(R,"maxMessageSize",{get:()=>S}),this._sctp=R}return p.apply(this,arguments)}}function t0(n){if(!n.RTCPeerConnection||!("createDataChannel"in n.RTCPeerConnection.prototype))return;function r(a,l){const d=a.send;a.send=function(){const p=arguments[0],g=p.length||p.size||p.byteLength;if(a.readyState==="open"&&l.sctp&&g>l.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+l.sctp.maxMessageSize+" bytes)");return d.apply(a,arguments)}}const i=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const a=i.apply(this,arguments);return r(a,this),a},jl(n,"datachannel",a=>(r(a.channel,a.target),a))}function mS(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const r=n.RTCPeerConnection.prototype;Object.defineProperty(r,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(r,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(i){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),i&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=i)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(i=>{const a=r[i];r[i]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=l=>{const d=l.target;if(d._lastConnectionState!==d.connectionState){d._lastConnectionState=d.connectionState;const p=new Event("connectionstatechange",l);d.dispatchEvent(p)}return l},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),a.apply(this,arguments)}})}function gS(n,r){if(!n.RTCPeerConnection||r.browser==="chrome"&&r.version>=71||r.browser==="safari"&&r.version>=605)return;const i=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=a.sdp.split(`
`).filter(d=>ec(d).call(d)!=="a=extmap-allow-mixed").join(`
`);n.RTCSessionDescription&&a instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:a.type,sdp:l}):a.sdp=l}return i.apply(this,arguments)}}function n0(n,r){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const i=n.RTCPeerConnection.prototype.addIceCandidate;i&&i.length!==0&&(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(r.browser==="chrome"&&r.version<78||r.browser==="firefox"&&r.version<68||r.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Ae.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Ae.resolve())})}function r0(n,r){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const i=n.RTCPeerConnection.prototype.setLocalDescription;i&&i.length!==0&&(n.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return i.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer"}return a.sdp||a.type!=="offer"&&a.type!=="answer"?i.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(d=>i.apply(this,[d]))})}var bz=Object.freeze({__proto__:null,shimRTCIceCandidate:Zm,shimRTCIceCandidateRelayProtocol:fS,shimMaxMessageSize:e0,shimSendThrowTypeError:t0,shimConnectionState:mS,removeExtmapAllowMixed:gS,shimAddIceCandidateNullOrEmpty:n0,shimParameterlessSetLocalDescription:r0});let zr,qt;(function(){let{window:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const i=R1,a=V6(n),l={browserDetails:a,commonShim:bz,extractVersion:Im,disableLog:U6,disableWarnings:F6,sdp:Tz};switch(a.browser){case"chrome":if(!wA||!lS||!r.shimChrome)return i("Chrome shim is not included in this adapter release."),l;if(a.version===null)return i("Chrome shim can not determine version, not shimming."),l;i("adapter.js shimming chrome."),l.browserShim=wA,n0(n,a),r0(n),EA(n,a),_A(n),lS(n,a),SA(n),RA(n,a),yA(n),CA(n),TA(n),IA(n,a),Zm(n),fS(n),mS(n),e0(n,a),t0(n),gS(n,a);break;case"firefox":if(!FA||!uS||!r.shimFirefox)return i("Firefox shim is not included in this adapter release."),l;i("adapter.js shimming firefox."),l.browserShim=FA,n0(n,a),r0(n),OA(n,a),uS(n,a),AA(n),PA(n),NA(n),xA(n),DA(n),kA(n),LA(n),MA(n),UA(n),Zm(n),mS(n),e0(n,a),t0(n);break;case"safari":if(!YA||!r.shimSafari)return i("Safari shim is not included in this adapter release."),l;i("adapter.js shimming safari."),l.browserShim=YA,n0(n,a),r0(n),WA(n),zA(n),BA(n),VA(n),jA(n),GA(n),$A(n),KA(n),Zm(n),fS(n),e0(n,a),t0(n),gS(n,a);break;default:i("Unsupported browser!")}})({window:typeof window>"u"?void 0:window}),function(n){n.WIN_10="Windows 10",n.WIN_81="Windows 8.1",n.WIN_8="Windows 8",n.WIN_7="Windows 7",n.WIN_VISTA="Windows Vista",n.WIN_SERVER_2003="Windows Server 2003",n.WIN_XP="Windows XP",n.WIN_2000="Windows 2000",n.ANDROID="Android",n.HARMONY_OS="HarmonyOS",n.OPEN_BSD="Open BSD",n.SUN_OS="Sun OS",n.LINUX="Linux",n.IOS="iOS",n.MAC_OS="Mac OS",n.QNX="QNX",n.UNIX="UNIX",n.BEOS="BeOS",n.OS_2="OS/2",n.SEARCH_BOT="Search Bot"}(zr||(zr={})),function(n){n.CHROME="Chrome",n.SAFARI="Safari",n.EDGE="Edge",n.FIREFOX="Firefox",n.OPERA="OPR",n.QQ="QQBrowser",n.WECHAT="MicroMessenger"}(qt||(qt={}));var vS={exports:{}};(function(n,r){(function(i,a){var l="function",d="undefined",p="object",g="string",E="major",C="model",S="name",R="type",k="vendor",F="version",W="architecture",G="console",z="mobile",oe="tablet",ce="smarttv",ye="wearable",Ne="embedded",Te="Amazon",be="Apple",_e="ASUS",Ie="BlackBerry",Bt="Firefox",$e="Google",ln="Huawei",en="LG",Kn="Microsoft",Vr="Motorola",Bn="Opera",Zi="Samsung",fe="Sharp",Ce="Sony",Oe="Xiaomi",Je="Zebra",Pt="Facebook",Re="Chromium OS",P="Mac OS",K=function(Un){for(var ir={},on=0;on<Un.length;on++)ir[Un[on].toUpperCase()]=Un[on];return ir},Q=function(Un,ir){return typeof Un===g&&me(ir).indexOf(me(Un))!==-1},me=function(Un){return Un.toLowerCase()},et=function(Un,ir){if(typeof Un===g)return Un=Un.replace(/^\s\s*/,""),typeof ir===d?Un:Un.substring(0,350)},un=function(Un,ir){for(var on,Li,Ds,Fn,Ot,eo,il=0;il<ir.length&&!Ot;){var is=ir[il],z2=ir[il+1];for(on=Li=0;on<is.length&&!Ot&&is[on];)if(Ot=is[on++].exec(Un))for(Ds=0;Ds<z2.length;Ds++)eo=Ot[++Li],typeof(Fn=z2[Ds])===p&&Fn.length>0?Fn.length===2?typeof Fn[1]==l?this[Fn[0]]=Fn[1].call(this,eo):this[Fn[0]]=Fn[1]:Fn.length===3?typeof Fn[1]!==l||Fn[1].exec&&Fn[1].test?this[Fn[0]]=eo?eo.replace(Fn[1],Fn[2]):a:this[Fn[0]]=eo?Fn[1].call(this,eo,Fn[2]):a:Fn.length===4&&(this[Fn[0]]=eo?Fn[3].call(this,eo.replace(Fn[1],Fn[2])):a):this[Fn]=eo||a;il+=2}},jr=function(Un,ir){for(var on in ir)if(typeof ir[on]===p&&ir[on].length>0){for(var Li=0;Li<ir[on].length;Li++)if(Q(ir[on][Li],Un))return on==="?"?a:on}else if(Q(ir[on],Un))return on==="?"?a:on;return Un},Pa={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},nl={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[F,[S,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[F,[S,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[S,F],[/opios[\/ ]+([\w\.]+)/i],[F,[S,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[F,[S,Bn]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[S,F],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[F,[S,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[F,[S,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[F,[S,"WeChat"]],[/konqueror\/([\w\.]+)/i],[F,[S,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[F,[S,"IE"]],[/yabrowser\/([\w\.]+)/i],[F,[S,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[S,/(.+)/,"$1 Secure Browser"],F],[/\bfocus\/([\w\.]+)/i],[F,[S,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[F,[S,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[F,[S,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[F,[S,"Dolphin"]],[/coast\/([\w\.]+)/i],[F,[S,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[F,[S,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[F,[S,Bt]],[/\bqihu|(qi?ho?o?|360)browser/i],[[S,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[S,/(.+)/,"$1 Browser"],F],[/(comodo_dragon)\/([\w\.]+)/i],[[S,/_/g," "],F],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[S,F],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[S],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[S,Pt],F],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[S,F],[/\bgsa\/([\w\.]+) .*safari\//i],[F,[S,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[F,[S,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[S,"Chrome WebView"],F],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[F,[S,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[S,F],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[F,[S,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[F,S],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[S,[F,jr,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[S,F],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[S,"Netscape"],F],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[F,[S,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[S,F],[/(cobalt)\/([\w\.]+)/i],[S,[F,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[W,"amd64"]],[/(ia32(?=;))/i],[[W,me]],[/((?:i[346]|x)86)[;\)]/i],[[W,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[W,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[W,"armhf"]],[/windows (ce|mobile); ppc;/i],[[W,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[W,/ower/,"",me]],[/(sun4\w)[;\)]/i],[[W,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[W,me]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[C,[k,Zi],[R,oe]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[C,[k,Zi],[R,z]],[/\((ip(?:hone|od)[\w ]*);/i],[C,[k,be],[R,z]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[C,[k,be],[R,oe]],[/(macintosh);/i],[C,[k,be]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[C,[k,fe],[R,z]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[C,[k,ln],[R,oe]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[C,[k,ln],[R,z]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[C,/_/g," "],[k,Oe],[R,z]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[C,/_/g," "],[k,Oe],[R,oe]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[C,[k,"OPPO"],[R,z]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[C,[k,"Vivo"],[R,z]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[C,[k,"Realme"],[R,z]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[C,[k,Vr],[R,z]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[C,[k,Vr],[R,oe]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[C,[k,en],[R,oe]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[C,[k,en],[R,z]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[C,[k,"Lenovo"],[R,oe]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[C,/_/g," "],[k,"Nokia"],[R,z]],[/(pixel c)\b/i],[C,[k,$e],[R,oe]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[C,[k,$e],[R,z]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[C,[k,Ce],[R,z]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[C,"Xperia Tablet"],[k,Ce],[R,oe]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[C,[k,"OnePlus"],[R,z]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[C,[k,Te],[R,oe]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[C,/(.+)/g,"Fire Phone $1"],[k,Te],[R,z]],[/(playbook);[-\w\),; ]+(rim)/i],[C,k,[R,oe]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[C,[k,Ie],[R,z]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[C,[k,_e],[R,oe]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[C,[k,_e],[R,z]],[/(nexus 9)/i],[C,[k,"HTC"],[R,oe]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[k,[C,/_/g," "],[R,z]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[C,[k,"Acer"],[R,oe]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[C,[k,"Meizu"],[R,z]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[k,C,[R,z]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[k,C,[R,oe]],[/(surface duo)/i],[C,[k,Kn],[R,oe]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[C,[k,"Fairphone"],[R,z]],[/(u304aa)/i],[C,[k,"AT&T"],[R,z]],[/\bsie-(\w*)/i],[C,[k,"Siemens"],[R,z]],[/\b(rct\w+) b/i],[C,[k,"RCA"],[R,oe]],[/\b(venue[\d ]{2,7}) b/i],[C,[k,"Dell"],[R,oe]],[/\b(q(?:mv|ta)\w+) b/i],[C,[k,"Verizon"],[R,oe]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[C,[k,"Barnes & Noble"],[R,oe]],[/\b(tm\d{3}\w+) b/i],[C,[k,"NuVision"],[R,oe]],[/\b(k88) b/i],[C,[k,"ZTE"],[R,oe]],[/\b(nx\d{3}j) b/i],[C,[k,"ZTE"],[R,z]],[/\b(gen\d{3}) b.+49h/i],[C,[k,"Swiss"],[R,z]],[/\b(zur\d{3}) b/i],[C,[k,"Swiss"],[R,oe]],[/\b((zeki)?tb.*\b) b/i],[C,[k,"Zeki"],[R,oe]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[k,"Dragon Touch"],C,[R,oe]],[/\b(ns-?\w{0,9}) b/i],[C,[k,"Insignia"],[R,oe]],[/\b((nxa|next)-?\w{0,9}) b/i],[C,[k,"NextBook"],[R,oe]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[k,"Voice"],C,[R,z]],[/\b(lvtel\-)?(v1[12]) b/i],[[k,"LvTel"],C,[R,z]],[/\b(ph-1) /i],[C,[k,"Essential"],[R,z]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[C,[k,"Envizen"],[R,oe]],[/\b(trio[-\w\. ]+) b/i],[C,[k,"MachSpeed"],[R,oe]],[/\btu_(1491) b/i],[C,[k,"Rotor"],[R,oe]],[/(shield[\w ]+) b/i],[C,[k,"Nvidia"],[R,oe]],[/(sprint) (\w+)/i],[k,C,[R,z]],[/(kin\.[onetw]{3})/i],[[C,/\./g," "],[k,Kn],[R,z]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[C,[k,Je],[R,oe]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[C,[k,Je],[R,z]],[/smart-tv.+(samsung)/i],[k,[R,ce]],[/hbbtv.+maple;(\d+)/i],[[C,/^/,"SmartTV"],[k,Zi],[R,ce]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[k,en],[R,ce]],[/(apple) ?tv/i],[k,[C,"Apple TV"],[R,ce]],[/crkey/i],[[C,"Chromecast"],[k,$e],[R,ce]],[/droid.+aft(\w)( bui|\))/i],[C,[k,Te],[R,ce]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[C,[k,fe],[R,ce]],[/(bravia[\w ]+)( bui|\))/i],[C,[k,Ce],[R,ce]],[/(mitv-\w{5}) bui/i],[C,[k,Oe],[R,ce]],[/Hbbtv.*(technisat) (.*);/i],[k,C,[R,ce]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[k,et],[C,et],[R,ce]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[R,ce]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[k,C,[R,G]],[/droid.+; (shield) bui/i],[C,[k,"Nvidia"],[R,G]],[/(playstation [345portablevi]+)/i],[C,[k,Ce],[R,G]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[C,[k,Kn],[R,G]],[/((pebble))app/i],[k,C,[R,ye]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[C,[k,be],[R,ye]],[/droid.+; (glass) \d/i],[C,[k,$e],[R,ye]],[/droid.+; (wt63?0{2,3})\)/i],[C,[k,Je],[R,ye]],[/(quest( 2| pro)?)/i],[C,[k,Pt],[R,ye]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[k,[R,Ne]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[C,[R,z]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[C,[R,oe]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[R,oe]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[R,z]],[/(android[-\w\. ]{0,9});.+buil/i],[C,[k,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[F,[S,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[F,[S,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[S,F],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[F,S]],os:[[/microsoft (windows) (vista|xp)/i],[S,F],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[S,[F,jr,Pa]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[S,"Windows"],[F,jr,Pa]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[F,/_/g,"."],[S,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[S,P],[F,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[F,S],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[S,F],[/\(bb(10);/i],[F,[S,Ie]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[F,[S,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[F,[S,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[F,[S,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[F,[S,"watchOS"]],[/crkey\/([\d\.]+)/i],[F,[S,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[S,Re],F],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[S,F],[/(sunos) ?([\w\.\d]*)/i],[[S,"Solaris"],F],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[S,F]]},oa=function(Un,ir){if(typeof Un===p&&(ir=Un,Un=a),!(this instanceof oa))return new oa(Un,ir).getResult();var on=typeof i!==d&&i.navigator?i.navigator:a,Li=Un||(on&&on.userAgent?on.userAgent:""),Ds=on&&on.userAgentData?on.userAgentData:a,Fn=ir?function(Ot,eo){var il={};for(var is in Ot)eo[is]&&eo[is].length%2==0?il[is]=eo[is].concat(Ot[is]):il[is]=Ot[is];return il}(nl,ir):nl;return this.getBrowser=function(){var Ot={};return Ot.name=a,Ot.version=a,un.call(Ot,Li,Fn.browser),Ot.major=function(eo){return typeof eo===g?eo.replace(/[^\d\.]/g,"").split(".")[0]:a}(Ot.version),on&&on.brave&&typeof on.brave.isBrave==l&&(Ot.name="Brave"),Ot},this.getCPU=function(){var Ot={};return Ot.architecture=a,un.call(Ot,Li,Fn.cpu),Ot},this.getDevice=function(){var Ot={};return Ot.vendor=a,Ot.model=a,Ot.type=a,un.call(Ot,Li,Fn.device),!Ot.type&&Ds&&Ds.mobile&&(Ot.type=z),Ot.model=="Macintosh"&&on&&typeof on.standalone!==d&&on.maxTouchPoints&&on.maxTouchPoints>2&&(Ot.model="iPad",Ot.type=oe),Ot},this.getEngine=function(){var Ot={};return Ot.name=a,Ot.version=a,un.call(Ot,Li,Fn.engine),Ot},this.getOS=function(){var Ot={};return Ot.name=a,Ot.version=a,un.call(Ot,Li,Fn.os),!Ot.name&&Ds&&Ds.platform!="Unknown"&&(Ot.name=Ds.platform.replace(/chrome os/i,Re).replace(/macos/i,P)),Ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Li},this.setUA=function(Ot){return Li=typeof Ot===g&&Ot.length>350?et(Ot,350):Ot,this},this.setUA(Li),this};oa.VERSION="0.7.34",oa.BROWSER=K([S,F,E]),oa.CPU=K([W]),oa.DEVICE=K([C,k,R,G,z,ce,oe,ye,Ne]),oa.ENGINE=oa.OS=K([S,F]),n.exports&&(r=n.exports=oa),r.UAParser=oa;var rl=typeof i!==d&&(i.jQuery||i.Zepto);if(rl&&!rl.ua){var kd=new oa;rl.ua=kd.getResult(),rl.ua.get=function(){return kd.getUA()},rl.ua.set=function(Un){kd.setUA(Un);var ir=kd.getResult();for(var on in ir)rl.ua[on]=ir[on]}}})(typeof window=="object"?window:s)})(vS,vS.exports);const ES=new vS.exports;let _S,Ro,tc=ES.getResult(),SS=null;function Ht(n){if(!SS){n&&ES.setUA(n),tc=ES.getResult();const r=function(d){if(d.engine.name==="Blink"&&d.browser.name!=="WeChat")return qt.CHROME;switch(d.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return qt.CHROME;case"Safari":case"Mobile Safari":return qt.SAFARI;case"Edge":return qt.EDGE;case"Firefox":return qt.FIREFOX;case"QQBrowser":return qt.QQ;case"Opera":return qt.OPERA;case"WeChat":return qt.WECHAT;default:return d.browser.name||""}}(tc),i=function(d){let p;return p=d.engine.name==="Blink"?d.engine.version||"":d.browser.version||"",p.split(".")[0]}(tc),a=function(d){switch(d.os.name){case"Windows":return d.os.version?d.os.name+" "+d.os.version:d.os.name;default:return d.os.name||""}}(tc),l=tc.os.version;if(!(r&&i&&a&&l))return{name:r,version:i,os:a,osVersion:l};SS={name:r,version:i,os:a,osVersion:l}}return SS}function JA(){return Ht().os}function QA(){const n=Ht();return"".concat(n.os," ").concat(n.osVersion)}function i0(){const n=Ht();return!!(tc.engine.name==="WebKit"&&n.os===zr.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&n.name!==qt.SAFARI||yi()&&n.name!==qt.SAFARI)}function Rz(){const n=Ht();if(i0()){if(n.os===zr.MAC_OS)return!0;if(n.os===zr.IOS){const r=tc.os.version&&tc.os.version.split(".");if(r&&Number(r[0])===14&&r[1]&&Number(r[1])>=3||r&&Number(r[0])>14)return!0}}return!1}function Iz(){return tc.engine.name==="WebKit"}function yS(){return Ht().name===qt.CHROME}function Si(){return Ht().name===qt.SAFARI}function Dn(){return Ht().name===qt.FIREFOX}function yi(){return Ht().os===zr.IOS}function CS(n){const r=Ht();return!(r.name!==qt.CHROME||!r.osVersion)&&Number(r.version)>=n}function ZA(n){const r=Ht();return!(r.name!==qt.EDGE||!r.osVersion)&&Number(r.version)>=n}function eN(n){const r=Ht();return!(r.name!==qt.OPERA||!r.osVersion)&&Number(r.version)>=n}function tN(){const n=Ht();return!(n.name!==qt.CHROME||!n.osVersion)&&Number(n.version)<=90}function nN(){const n=Ht();if(n.os!==zr.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])<14||Number(r[0])===14&&Number(r[1])<=6}function id(){const n=Ht();if(n.os!==zr.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===15}function TS(){const n=Ht();if(n.os!==zr.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===16}function rN(){const n=Ht();if(n.os!==zr.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===15&&Number(r[1])>=1}function Is(){return Si()&&navigator.maxTouchPoints>0}function iN(){return Ht().name===qt.WECHAT}function oN(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function Gl(){const n=Ht();return n.name===qt.EDGE||n.name===qt.SAFARI?!1:!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function o0(){return JA()===zr.ANDROID}function dp(){const n=Ht();return o0()&&(n.name===qt.CHROME||n.name===qt.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}(function(n){n.L1T1="L1T1",n.L1T2="L1T2",n.L1T3="L1T3",n.L2T1_KEY="L2T1_KEY",n.L2T2_KEY="L2T2_KEY",n.L2T3_KEY="L2T3_KEY",n.L3T1_KEY="L3T1_KEY",n.L3T2_KEY="L3T2_KEY",n.L3T3_KEY="L3T3_KEY"})(_S||(_S={})),function(n){n.CERTIFICATE="certificate",n.CODEC="codec",n.CANDIDATE_PAIR="candidate-pair",n.LOCAL_CANDIDATE="local-candidate",n.REMOTE_CANDIDATE="remote-candidate",n.INBOUND="inbound-rtp",n.TRACK="track",n.OUTBOUND="outbound-rtp",n.PC="peer-connection",n.REMOTE_INBOUND="remote-inbound-rtp",n.REMOTE_OUTBOUND="remote-outbound-rtp",n.TRANSPORT="transport",n.CSRC="csrc",n.DATA_CHANNEL="data-channel",n.STREAM="stream",n.SENDER="sender",n.RECEIVER="receiver"}(Ro||(Ro={}));var aN={exports:{}},wz=xi,Oz=j,sN=qa.f;wz({target:"Object",stat:!0,forced:Object.defineProperty!==sN,sham:!Oz},{defineProperty:sN});var cN=ze.Object,Az=aN.exports=function(n,r,i){return cN.defineProperty(n,r,i)};cN.defineProperty.sham&&(Az.sham=!0);var lN=aN.exports;function w(n,r,i){return r in n?lN(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var bS,RS={exports:{}},uN=function(n,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return n.apply(r,i)}},Nz=uN,IS=Object.prototype.toString,wS=(bS=Object.create(null),function(n){var r=IS.call(n);return bS[r]||(bS[r]=r.slice(8,-1).toLowerCase())});function zl(n){return n=n.toLowerCase(),function(r){return wS(r)===n}}function OS(n){return Array.isArray(n)}function a0(n){return n===void 0}var dN=zl("ArrayBuffer");function hN(n){return n!==null&&typeof n=="object"}function s0(n){if(wS(n)!=="object")return!1;var r=Object.getPrototypeOf(n);return r===null||r===Object.prototype}var xz=zl("Date"),Pz=zl("File"),Dz=zl("Blob"),kz=zl("FileList");function AS(n){return IS.call(n)==="[object Function]"}var Lz=zl("URLSearchParams");function NS(n,r){if(n!=null)if(typeof n!="object"&&(n=[n]),OS(n))for(var i=0,a=n.length;i<a;i++)r.call(null,n[i],i,n);else for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&r.call(null,n[l],l,n)}var xS,Mz=(xS=typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array),function(n){return xS&&n instanceof xS}),Pi={isArray:OS,isArrayBuffer:dN,isBuffer:function(n){return n!==null&&!a0(n)&&n.constructor!==null&&!a0(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)},isFormData:function(n){var r="[object FormData]";return n&&(typeof FormData=="function"&&n instanceof FormData||IS.call(n)===r||AS(n.toString)&&n.toString()===r)},isArrayBufferView:function(n){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer&&dN(n.buffer)},isString:function(n){return typeof n=="string"},isNumber:function(n){return typeof n=="number"},isObject:hN,isPlainObject:s0,isUndefined:a0,isDate:xz,isFile:Pz,isBlob:Dz,isFunction:AS,isStream:function(n){return hN(n)&&AS(n.pipe)},isURLSearchParams:Lz,isStandardBrowserEnv:function(){return(typeof navigator>"u"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window<"u"&&typeof document<"u"},forEach:NS,merge:function n(){var r={};function i(d,p){s0(r[p])&&s0(d)?r[p]=n(r[p],d):s0(d)?r[p]=n({},d):OS(d)?r[p]=d.slice():r[p]=d}for(var a=0,l=arguments.length;a<l;a++)NS(arguments[a],i);return r},extend:function(n,r,i){return NS(r,function(a,l){n[l]=i&&typeof a=="function"?Nz(a,i):a}),n},trim:function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},stripBOM:function(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n},inherits:function(n,r,i,a){n.prototype=Object.create(r.prototype,a),n.prototype.constructor=n,i&&Object.assign(n.prototype,i)},toFlatObject:function(n,r,i){var a,l,d,p={};r=r||{};do{for(l=(a=Object.getOwnPropertyNames(n)).length;l-- >0;)p[d=a[l]]||(r[d]=n[d],p[d]=!0);n=Object.getPrototypeOf(n)}while(n&&(!i||i(n,r))&&n!==Object.prototype);return r},kindOf:wS,kindOfTest:zl,endsWith:function(n,r,i){n=String(n),(i===void 0||i>n.length)&&(i=n.length),i-=r.length;var a=n.indexOf(r,i);return a!==-1&&a===i},toArray:function(n){if(!n)return null;var r=n.length;if(a0(r))return null;for(var i=new Array(r);r-- >0;)i[r]=n[r];return i},isTypedArray:Mz,isFileList:kz},od=Pi;function pN(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var fN=function(n,r,i){if(!r)return n;var a;if(i)a=i(r);else if(od.isURLSearchParams(r))a=r.toString();else{var l=[];od.forEach(r,function(p,g){p!=null&&(od.isArray(p)?g+="[]":p=[p],od.forEach(p,function(E){od.isDate(E)?E=E.toISOString():od.isObject(E)&&(E=JSON.stringify(E)),l.push(pN(g)+"="+pN(E))}))}),a=l.join("&")}if(a){var d=n.indexOf("#");d!==-1&&(n=n.slice(0,d)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n},Uz=Pi;function c0(){this.handlers=[]}c0.prototype.use=function(n,r,i){return this.handlers.push({fulfilled:n,rejected:r,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1},c0.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)},c0.prototype.forEach=function(n){Uz.forEach(this.handlers,function(r){r!==null&&n(r)})};var Fz=c0,Vz=Pi,mN=Pi;function ad(n,r,i,a,l){Error.call(this),this.message=n,this.name="AxiosError",r&&(this.code=r),i&&(this.config=i),a&&(this.request=a),l&&(this.response=l)}mN.inherits(ad,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var gN=ad.prototype,vN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(n){vN[n]={value:n}}),Object.defineProperties(ad,vN),Object.defineProperty(gN,"isAxiosError",{value:!0}),ad.from=function(n,r,i,a,l,d){var p=Object.create(gN);return mN.toFlatObject(n,p,function(g){return g!==Error.prototype}),ad.call(p,n.message,r,i,a,l),p.name=n.name,d&&Object.assign(p,d),p};var sd=ad,EN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ja=Pi,_N=function(n,r){r=r||new FormData;var i=[];function a(l){return l===null?"":Ja.isDate(l)?l.toISOString():Ja.isArrayBuffer(l)||Ja.isTypedArray(l)?typeof Blob=="function"?new Blob([l]):Buffer.from(l):l}return function l(d,p){if(Ja.isPlainObject(d)||Ja.isArray(d)){if(i.indexOf(d)!==-1)throw Error("Circular reference detected in "+p);i.push(d),Ja.forEach(d,function(g,E){if(!Ja.isUndefined(g)){var C,S=p?p+"."+E:E;if(g&&!p&&typeof g=="object"){if(Ja.endsWith(E,"{}"))g=JSON.stringify(g);else if(Ja.endsWith(E,"[]")&&(C=Ja.toArray(g)))return void C.forEach(function(R){!Ja.isUndefined(R)&&r.append(S,a(R))})}l(g,S)}}),i.pop()}else r.append(p,a(d))}(n),r},PS=sd,l0=Pi,jz=l0.isStandardBrowserEnv()?{write:function(n,r,i,a,l,d){var p=[];p.push(n+"="+encodeURIComponent(r)),l0.isNumber(i)&&p.push("expires="+new Date(i).toGMTString()),l0.isString(a)&&p.push("path="+a),l0.isString(l)&&p.push("domain="+l),d===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Bz=function(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)},$z=function(n,r){return r?n.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):n},SN=function(n,r){return n&&!Bz(r)?$z(n,r):r},DS=Pi,Hz=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],yN=Pi,Wz=yN.isStandardBrowserEnv()?function(){var n,r=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function a(l){var d=l;return r&&(i.setAttribute("href",d),d=i.href),i.setAttribute("href",d),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return n=a(window.location.href),function(l){var d=yN.isString(l)?a(l):l;return d.protocol===n.protocol&&d.host===n.host}}():function(){return!0},kS=sd;function CN(n){kS.call(this,n??"canceled",kS.ERR_CANCELED),this.name="CanceledError"}Pi.inherits(CN,kS,{__CANCEL__:!0});var u0=CN,hp=Pi,Gz=function(n,r,i){var a=i.config.validateStatus;i.status&&a&&!a(i.status)?r(new PS("Request failed with status code "+i.status,[PS.ERR_BAD_REQUEST,PS.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):n(i)},zz=jz,Kz=fN,Yz=SN,qz=function(n){var r,i,a,l={};return n&&DS.forEach(n.split(`
`),function(d){if(a=d.indexOf(":"),r=DS.trim(d.substr(0,a)).toLowerCase(),i=DS.trim(d.substr(a+1)),r){if(l[r]&&Hz.indexOf(r)>=0)return;l[r]=r==="set-cookie"?(l[r]?l[r]:[]).concat([i]):l[r]?l[r]+", "+i:i}}),l},Xz=Wz,Jz=EN,nc=sd,Qz=u0,Zz=function(n){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""},e7=function(n){return new Promise(function(r,i){var a,l=n.data,d=n.headers,p=n.responseType;function g(){n.cancelToken&&n.cancelToken.unsubscribe(a),n.signal&&n.signal.removeEventListener("abort",a)}hp.isFormData(l)&&hp.isStandardBrowserEnv()&&delete d["Content-Type"];var E=new XMLHttpRequest;if(n.auth){var C=n.auth.username||"",S=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";d.Authorization="Basic "+btoa(C+":"+S)}var R=Yz(n.baseURL,n.url);function k(){if(E){var G="getAllResponseHeaders"in E?qz(E.getAllResponseHeaders()):null,z={data:p&&p!=="text"&&p!=="json"?E.response:E.responseText,status:E.status,statusText:E.statusText,headers:G,config:n,request:E};Gz(function(oe){r(oe),g()},function(oe){i(oe),g()},z),E=null}}if(E.open(n.method.toUpperCase(),Kz(R,n.params,n.paramsSerializer),!0),E.timeout=n.timeout,"onloadend"in E?E.onloadend=k:E.onreadystatechange=function(){E&&E.readyState===4&&(E.status!==0||E.responseURL&&E.responseURL.indexOf("file:")===0)&&setTimeout(k)},E.onabort=function(){E&&(i(new nc("Request aborted",nc.ECONNABORTED,n,E)),E=null)},E.onerror=function(){i(new nc("Network Error",nc.ERR_NETWORK,n,E,E)),E=null},E.ontimeout=function(){var G=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded",z=n.transitional||Jz;n.timeoutErrorMessage&&(G=n.timeoutErrorMessage),i(new nc(G,z.clarifyTimeoutError?nc.ETIMEDOUT:nc.ECONNABORTED,n,E)),E=null},hp.isStandardBrowserEnv()){var F=(n.withCredentials||Xz(R))&&n.xsrfCookieName?zz.read(n.xsrfCookieName):void 0;F&&(d[n.xsrfHeaderName]=F)}"setRequestHeader"in E&&hp.forEach(d,function(G,z){l===void 0&&z.toLowerCase()==="content-type"?delete d[z]:E.setRequestHeader(z,G)}),hp.isUndefined(n.withCredentials)||(E.withCredentials=!!n.withCredentials),p&&p!=="json"&&(E.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&E.addEventListener("progress",n.onDownloadProgress),typeof n.onUploadProgress=="function"&&E.upload&&E.upload.addEventListener("progress",n.onUploadProgress),(n.cancelToken||n.signal)&&(a=function(G){E&&(i(!G||G&&G.type?new Qz:G),E.abort(),E=null)},n.cancelToken&&n.cancelToken.subscribe(a),n.signal&&(n.signal.aborted?a():n.signal.addEventListener("abort",a))),l||(l=null);var W=Zz(R);W&&["http","https","file"].indexOf(W)===-1?i(new nc("Unsupported protocol "+W+":",nc.ERR_BAD_REQUEST,n)):E.send(l)})},Ci=Pi,TN=function(n,r){Vz.forEach(n,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(n[r]=i,delete n[a])})},bN=sd,t7=_N,n7={"Content-Type":"application/x-www-form-urlencoded"};function RN(n,r){!Ci.isUndefined(n)&&Ci.isUndefined(n["Content-Type"])&&(n["Content-Type"]=r)}var IN,d0={transitional:EN,adapter:((typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(IN=e7),IN),transformRequest:[function(n,r){if(TN(r,"Accept"),TN(r,"Content-Type"),Ci.isFormData(n)||Ci.isArrayBuffer(n)||Ci.isBuffer(n)||Ci.isStream(n)||Ci.isFile(n)||Ci.isBlob(n))return n;if(Ci.isArrayBufferView(n))return n.buffer;if(Ci.isURLSearchParams(n))return RN(r,"application/x-www-form-urlencoded;charset=utf-8"),n.toString();var i,a=Ci.isObject(n),l=r&&r["Content-Type"];if((i=Ci.isFileList(n))||a&&l==="multipart/form-data"){var d=this.env&&this.env.FormData;return t7(i?{"files[]":n}:n,d&&new d)}return a||l==="application/json"?(RN(r,"application/json"),function(p,g,E){if(Ci.isString(p))try{return(g||JSON.parse)(p),Ci.trim(p)}catch(C){if(C.name!=="SyntaxError")throw C}return(E||JSON.stringify)(p)}(n)):n}],transformResponse:[function(n){var r=this.transitional||d0.transitional,i=r&&r.silentJSONParsing,a=r&&r.forcedJSONParsing,l=!i&&this.responseType==="json";if(l||a&&Ci.isString(n)&&n.length)try{return JSON.parse(n)}catch(d){if(l)throw d.name==="SyntaxError"?bN.from(d,bN.ERR_BAD_RESPONSE,this,null,this.response):d}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:null},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ci.forEach(["delete","get","head"],function(n){d0.headers[n]={}}),Ci.forEach(["post","put","patch"],function(n){d0.headers[n]=Ci.merge(n7)});var LS=d0,r7=Pi,i7=LS,wN=function(n){return!(!n||!n.__CANCEL__)},ON=Pi,MS=function(n,r,i){var a=this||i7;return r7.forEach(i,function(l){n=l.call(a,n,r)}),n},o7=wN,a7=LS,s7=u0;function US(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new s7}var Yo=Pi,AN=function(n,r){r=r||{};var i={};function a(C,S){return Yo.isPlainObject(C)&&Yo.isPlainObject(S)?Yo.merge(C,S):Yo.isPlainObject(S)?Yo.merge({},S):Yo.isArray(S)?S.slice():S}function l(C){return Yo.isUndefined(r[C])?Yo.isUndefined(n[C])?void 0:a(void 0,n[C]):a(n[C],r[C])}function d(C){if(!Yo.isUndefined(r[C]))return a(void 0,r[C])}function p(C){return Yo.isUndefined(r[C])?Yo.isUndefined(n[C])?void 0:a(void 0,n[C]):a(void 0,r[C])}function g(C){return C in r?a(n[C],r[C]):C in n?a(void 0,n[C]):void 0}var E={url:d,method:d,data:d,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,beforeRedirect:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:g};return Yo.forEach(Object.keys(n).concat(Object.keys(r)),function(C){var S=E[C]||l,R=S(C);Yo.isUndefined(R)&&S!==g||(i[C]=R)}),i},NN="0.27.2",c7=NN,jc=sd,FS={};["object","boolean","number","function","string","symbol"].forEach(function(n,r){FS[n]=function(i){return typeof i===n||"a"+(r<1?"n ":" ")+n}});var xN={};FS.transitional=function(n,r,i){function a(l,d){return"[Axios v"+c7+"] Transitional option '"+l+"'"+d+(i?". "+i:"")}return function(l,d,p){if(n===!1)throw new jc(a(d," has been removed"+(r?" in "+r:"")),jc.ERR_DEPRECATED);return r&&!xN[d]&&(xN[d]=!0,console.warn(a(d," has been deprecated since v"+r+" and will be removed in the near future"))),!n||n(l,d,p)}};var PN=Pi,l7=fN,DN=Fz,kN=function(n){return US(n),n.headers=n.headers||{},n.data=MS.call(n,n.data,n.headers,n.transformRequest),n.headers=ON.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),ON.forEach(["delete","get","head","post","put","patch","common"],function(r){delete n.headers[r]}),(n.adapter||a7.adapter)(n).then(function(r){return US(n),r.data=MS.call(n,r.data,r.headers,n.transformResponse),r},function(r){return o7(r)||(US(n),r&&r.response&&(r.response.data=MS.call(n,r.response.data,r.response.headers,n.transformResponse))),Promise.reject(r)})},h0=AN,u7=SN,LN={assertOptions:function(n,r,i){if(typeof n!="object")throw new jc("options must be an object",jc.ERR_BAD_OPTION_VALUE);for(var a=Object.keys(n),l=a.length;l-- >0;){var d=a[l],p=r[d];if(p){var g=n[d],E=g===void 0||p(g,d,n);if(E!==!0)throw new jc("option "+d+" must be "+E,jc.ERR_BAD_OPTION_VALUE)}else if(i!==!0)throw new jc("Unknown option "+d,jc.ERR_BAD_OPTION)}},validators:FS},cd=LN.validators;function ld(n){this.defaults=n,this.interceptors={request:new DN,response:new DN}}ld.prototype.request=function(n,r){typeof n=="string"?(r=r||{}).url=n:r=n||{},(r=h0(this.defaults,r)).method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var i=r.transitional;i!==void 0&&LN.assertOptions(i,{silentJSONParsing:cd.transitional(cd.boolean),forcedJSONParsing:cd.transitional(cd.boolean),clarifyTimeoutError:cd.transitional(cd.boolean)},!1);var a=[],l=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(r)===!1||(l=l&&R.synchronous,a.unshift(R.fulfilled,R.rejected))});var d,p=[];if(this.interceptors.response.forEach(function(R){p.push(R.fulfilled,R.rejected)}),!l){var g=[kN,void 0];for(Array.prototype.unshift.apply(g,a),g=g.concat(p),d=Promise.resolve(r);g.length;)d=d.then(g.shift(),g.shift());return d}for(var E=r;a.length;){var C=a.shift(),S=a.shift();try{E=C(E)}catch(R){S(R);break}}try{d=kN(E)}catch(R){return Promise.reject(R)}for(;p.length;)d=d.then(p.shift(),p.shift());return d},ld.prototype.getUri=function(n){n=h0(this.defaults,n);var r=u7(n.baseURL,n.url);return l7(r,n.params,n.paramsSerializer)},PN.forEach(["delete","get","head","options"],function(n){ld.prototype[n]=function(r,i){return this.request(h0(i||{},{method:n,url:r,data:(i||{}).data}))}}),PN.forEach(["post","put","patch"],function(n){function r(i){return function(a,l,d){return this.request(h0(d||{},{method:n,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}ld.prototype[n]=r(),ld.prototype[n+"Form"]=r(!0)});var d7=ld,h7=u0;function ud(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(a){r=a});var i=this;this.promise.then(function(a){if(i._listeners){var l,d=i._listeners.length;for(l=0;l<d;l++)i._listeners[l](a);i._listeners=null}}),this.promise.then=function(a){var l,d=new Promise(function(p){i.subscribe(p),l=p}).then(a);return d.cancel=function(){i.unsubscribe(l)},d},n(function(a){i.reason||(i.reason=new h7(a),r(i.reason))})}ud.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},ud.prototype.subscribe=function(n){this.reason?n(this.reason):this._listeners?this._listeners.push(n):this._listeners=[n]},ud.prototype.unsubscribe=function(n){if(this._listeners){var r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}},ud.source=function(){var n;return{token:new ud(function(r){n=r}),cancel:n}};var p7=ud,f7=Pi,MN=Pi,m7=uN,p0=d7,g7=AN,Io=function n(r){var i=new p0(r),a=m7(p0.prototype.request,i);return MN.extend(a,p0.prototype,i),MN.extend(a,i),a.create=function(l){return n(g7(r,l))},a}(LS);Io.Axios=p0,Io.CanceledError=u0,Io.CancelToken=p7,Io.isCancel=wN,Io.VERSION=NN,Io.toFormData=_N,Io.AxiosError=sd,Io.Cancel=Io.CanceledError,Io.all=function(n){return Promise.all(n)},Io.spread=function(n){return function(r){return n.apply(null,r)}},Io.isAxiosError=function(n){return f7.isObject(n)&&n.isAxiosError===!0},RS.exports=Io,RS.exports.default=Io;var wo=RS.exports;class v7{constructor(r){w(this,"logger",void 0),w(this,"prefixLists",[]),this.logger=r}debug(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];this.logger.debug(...this.prefixLists,...i)}info(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];this.logger.info(...this.prefixLists,...i)}warning(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];this.logger.warning(...this.prefixLists,...i)}error(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];this.logger.error(...this.prefixLists,...i)}prefix(r){return this.prefixLists.push(r),this}popPrefix(){return this.prefixLists.pop(),this}}class Rn{constructor(){w(this,"_events",{}),w(this,"addListener",this.on)}getListeners(r){return this._events[r]?this._events[r].map(i=>i.listener):[]}on(r,i){this._events[r]||(this._events[r]=[]);const a=this._events[r];this._indexOfListener(a,i)===-1&&a.push({listener:i,once:!1})}once(r,i){this._events[r]||(this._events[r]=[]);const a=this._events[r];this._indexOfListener(a,i)===-1&&a.push({listener:i,once:!0})}off(r,i){if(!this._events[r])return;const a=this._events[r],l=this._indexOfListener(a,i);l!==-1&&a.splice(l,1),this._events[r].length===0&&delete this._events[r]}removeAllListeners(r){r?delete this._events[r]:this._events={}}emit(r){this._events[r]||(this._events[r]=[]);const i=this._events[r].map(p=>p);for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];for(let p=0;p<i.length;p+=1){const g=i[p];g.once&&this.off(r,g.listener),g.listener.apply(this,l||[])}}safeEmit(r){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];[...this._events[r]||[]].forEach(d=>{d.once&&this.off(r,d.listener);try{d.listener.apply(this,a)}catch(p){M.error("safeEmit event:".concat(r," error ").concat(p==null?void 0:p.toString()))}})}_indexOfListener(r,i){let a=r.length;for(;a--;)if(r[a].listener===i)return a;return-1}}const f0=new class extends Rn{reportLogUploadError(n){this.emit("REPORT_LOG_UPLOAD",n)}};let $;(function(n){n.UNEXPECTED_ERROR="UNEXPECTED_ERROR",n.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",n.TIMEOUT="TIMEOUT",n.INVALID_PARAMS="INVALID_PARAMS",n.NOT_READABLE="NOT_READABLE",n.NOT_SUPPORTED="NOT_SUPPORTED",n.INVALID_OPERATION="INVALID_OPERATION",n.OPERATION_ABORTED="OPERATION_ABORTED",n.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",n.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",n.NETWORK_ERROR="NETWORK_ERROR",n.NETWORK_TIMEOUT="NETWORK_TIMEOUT",n.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",n.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",n.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",n.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",n.ELECTRON_IS_NULL="ELECTRON_IS_NULL",n.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",n.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",n.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",n.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",n.PERMISSION_DENIED="PERMISSION_DENIED",n.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",n.TRACK_IS_DISABLED="TRACK_IS_DISABLED",n.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",n.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",n.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",n.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",n.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",n.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",n.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",n.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",n.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",n.UID_CONFLICT="UID_CONFLICT",n.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",n.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",n.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",n.INVALID_TRACK="INVALID_TRACK",n.SENDER_NOT_FOUND="SENDER_NOT_FOUND",n.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",n.SET_ANSWER_FAILED="SET_ANSWER_FAILED",n.ICE_FAILED="ICE_FAILED",n.PC_CLOSED="PC_CLOSED",n.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",n.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",n.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",n.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",n.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",n.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",n.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",n.INVALID_REMOTE_USER="INVALID_REMOTE_USER",n.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",n.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",n.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",n.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",n.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",n.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",n.WS_ABORT="WS_ABORT",n.WS_DISCONNECT="WS_DISCONNECT",n.WS_ERR="WS_ERR",n.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",n.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",n.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",n.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",n.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",n.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",n.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",n.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",n.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",n.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",n.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",n.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",n.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",n.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",n.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",n.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",n.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",n.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",n.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",n.INVALID_PLUGIN="INVALID_PLUGIN",n.DISCONNECT_P2P="DISCONNECT_P2P",n.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",n.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",n.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",n.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",n.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",n.PROHIBITED_OPERATION="PROHIBITED_OPERATION",n.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED"})($||($={}));class q extends Error{constructor(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;super(i),w(this,"code",void 0),w(this,"message",void 0),w(this,"data",void 0),w(this,"name","AgoraRTCException"),this.code=r,this.message="AgoraRTCError ".concat(this.code,": ").concat(i),this.data=a}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),`
`).concat(this.stack):"".concat(this.stack)}print(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return r==="error"&&M.error(this.toString()),r==="warning"&&M.warning(this.toString()),this}throw(){throw this.print(),this}}const Jn={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function VS(n,r){const i=Math.floor(r.timeout*Math.pow(r.timeoutFactor,n));return Math.min(r.maxRetryTimeout,i)}function Qa(n,r,i,a){const l=Object.assign({},Jn,a);let d=l.timeout;const p=async()=>{await function(C){return new Ae(S=>{window.setTimeout(S,C)})}(d),d*=l.timeoutFactor,d=Math.min(l.maxRetryTimeout,d)};let g=!1;const E=new Ae(async(C,S)=>{r=r||(()=>!1),i=i||(()=>!0);for(let R=0;R<l.maxRetryCount;R+=1){if(g)return S(new q($.OPERATION_ABORTED));try{const k=await n();if(!r(k,R)||R+1===l.maxRetryCount)return C(k);await p()}catch(k){if(!i(k,R)||R+1===l.maxRetryCount)return S(k);await p()}}});return E.cancel=()=>g=!0,E}function jS(){const n=new Date;return n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()}function UN(){const n=new Date,r=/((\d+:){2}\d+)/.exec(new Date().toUTCString());return r?(r==null?void 0:r[0])+":"+n.getUTCMilliseconds():n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()}const qo={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},m0=Date.now(),pp=n=>{for(const r in qo)if(Object.prototype.hasOwnProperty.call(qo,r)&&qo[r]===n)return r;return"DEFAULT"},M=new class{constructor(){w(this,"proxyServerURL",void 0),w(this,"logLevel",qo.DEBUG),w(this,"uploadState","collecting"),w(this,"uploadLogWaitingList",[]),w(this,"uploadLogUploadingList",[]),w(this,"uploadErrorCount",0),w(this,"currentLogID",0),w(this,"url",void 0),w(this,"extLog",(n,r)=>{this.appendLogToWaitingList(n,...r)})}debug(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const a=[qo.DEBUG].concat(r);this.log.apply(this,a)}info(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const a=[qo.INFO].concat(r);this.log.apply(this,a)}warning(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const a=[qo.WARNING].concat(r);this.log.apply(this,a)}error(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const a=[qo.ERROR].concat(r);this.log.apply(this,a)}upload(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const a=[qo.DEBUG].concat(r);this.uploadLog.apply(this,a)}setLogLevel(n){n=Math.min(Math.max(0,n),4),this.logLevel=n}enableLogUpload(){rn("UPLOAD_LOG",!0)}disableLogUpload(){rn("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(n){this.proxyServerURL=n}prefix(n){return new v7(this).prefix(n)}log(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(Date.now()-m0<100)return void setTimeout(()=>{this.log(...r)},Date.now()-m0);const a=Math.max(0,Math.min(4,r[0]));if(r[0]=jS()+" Agora-SDK [".concat(pp(a),"]:"),this.appendLogToWaitingList(a,...r),a<this.logLevel)return;const l=jS()+" %cAgora-SDK [".concat(pp(a),"]:");let d=[];if(!re("USE_NEW_LOG"))switch(a){case qo.DEBUG:d=[l,"color: #64B5F6;"].concat(r.slice(1)),console.log.apply(console,d);break;case qo.INFO:d=[l,"color: #1E88E5; font-weight: bold;"].concat(r.slice(1)),console.log.apply(console,d);break;case qo.WARNING:d=[l,"color: #FB8C00; font-weight: bold;"].concat(r.slice(1)),console.warn.apply(console,d);break;case qo.ERROR:d=[l,"color: #B00020; font-weight: bold;"].concat(r.slice(1)),console.error.apply(console,d)}}uploadLog(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(Date.now()-m0<100)return void setTimeout(()=>{this.uploadLog(...r)},Date.now()-m0);const a=Math.max(0,Math.min(4,r[0]));r[0]=jS()+" Agora-SDK [".concat(pp(a),"]:"),this.appendLogToWaitingList(a,...r)}appendLogToWaitingList(n){if(!re("UPLOAD_LOG"))return;for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];Array.isArray(i[0])?i[0][0]=UN()+" Agora-SDK [".concat(pp(n),"]:"):i[0]=UN()+" Agora-SDK [".concat(pp(n),"]:");let l="";i.forEach(d=>{typeof d=="object"&&(d=JSON.stringify(d)),l+="".concat(d," ")}),this.uploadLogWaitingList.push({payload_str:l,log_level:n,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){const n=this.uploadLogUploadingList,r={sdk_version:Xo,process_id:re("PROCESS_ID"),payload:JSON.stringify(n)};return Qa(async()=>{const i=await wo.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(re("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(re("LOG_UPLOAD_SERVER"),"/upload/v1")),r,{responseType:"text"});if(i.data!=="OK"){const a=new Error("unexpected upload log response");throw a.response=i,a}},()=>(this.uploadLogUploadingList=[],!1),i=>(i.response?f0.reportLogUploadError({status:i.response.status,data:i.response.data,headers:i.response.headers,message:i.message}):i.request?f0.reportLogUploadError({status:i.request.status,message:i.message}):f0.reportLogUploadError({status:-1,message:i.message}),!0),{timeout:re("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:re("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,re("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),re("UPLOAD_LOG_INTERVAL"))}).catch(n=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),re("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),re("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},BS="v4.18.2-0-g8d83af1d-dirty(7/11/2023, 7:07:15 PM)",Xo=function(n){if(n.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return n;const r=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(r&&r[1]&&r[2]){const a=r[1],l=r[2];return"".concat(a,".").concat(l)}const i=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(i&&i[1]&&i[2]){const a=i[1],l=i[2];return"".concat(a,".").concat(100*(Number(l)+1))}return"4.0.0.999"}("4.18.2"),$S=function(){try{return JSON.parse("true")===!0}catch{return!0}}(),FN=["CHINA","GLOBAL"],Oo=function(){const n="us".concat("erna","me"),r="pa".concat("sswo","rd"),i=["t","s","t"];i.splice(1,0,"e");const a=i.join(""),l=[];for(let g=0;g<6;g++)l.push("1");const d=l.join(""),p={};return p[n]=a,p[r]=d,Object.assign(p,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=Oo;const E7={"90p":bt(160,90),"90p_1":bt(160,90),"120p":bt(160,120,15,30,65),"120p_1":bt(160,120,15,30,65),"120p_3":bt(120,120,15,30,50),"120p_4":bt(212,120),"180p":bt(320,180,15,30,140),"180p_1":bt(320,180,15,30,140),"180p_3":bt(180,180,15,30,100),"180p_4":bt(240,180,15,30,120),"240p":bt(320,240,15,40,200),"240p_1":bt(320,240,15,40,200),"240p_3":bt(240,240,15,40,140),"240p_4":bt(424,240,15,40,220),"360p":bt(640,360,15,80,400),"360p_1":bt(640,360,15,80,400),"360p_3":bt(360,360,15,80,260),"360p_4":bt(640,360,30,80,600),"360p_6":bt(360,360,30,80,400),"360p_7":bt(480,360,15,80,320),"360p_8":bt(480,360,30,80,490),"360p_9":bt(640,360,15,80,800),"360p_10":bt(640,360,24,80,800),"360p_11":bt(640,360,24,80,1e3),"480p":bt(640,480,15,100,500),"480p_1":bt(640,480,15,100,500),"480p_2":bt(640,480,30,100,1e3),"480p_3":bt(480,480,15,100,400),"480p_4":bt(640,480,30,100,750),"480p_6":bt(480,480,30,100,600),"480p_8":bt(848,480,15,100,610),"480p_9":bt(848,480,30,100,930),"480p_10":bt(640,480,10,100,400),"720p":bt(1280,720,15,120,1130),"720p_1":bt(1280,720,15,120,1130),"720p_2":bt(1280,720,30,120,2e3),"720p_3":bt(1280,720,30,120,1710),"720p_5":bt(960,720,15,120,910),"720p_6":bt(960,720,30,120,1380),"1080p":bt(1920,1080,15,120,2080),"1080p_1":bt(1920,1080,15,120,2080),"1080p_2":bt(1920,1080,30,120,3e3),"1080p_3":bt(1920,1080,30,120,3150),"1080p_5":bt(1920,1080,60,120,4780),"1440p":bt(2560,1440,30,120,4850),"1440p_1":bt(2560,1440,30,120,4850),"1440p_2":bt(2560,1440,60,120,7350),"4k":bt(3840,2160,30,120,8910),"4k_1":bt(3840,2160,30,120,8910),"4k_3":bt(3840,2160,60,120,13500)},_7={"480p":Ta(640,480,5),"480p_1":Ta(640,480,5),"480p_2":Ta(640,480,30),"480p_3":Ta(640,480,15),"720p":Ta(1280,720,5),"720p_1":Ta(1280,720,5),"720p_2":Ta(1280,720,30),"720p_3":Ta(1280,720,15),"1080p":Ta(1920,1080,5),"1080p_1":Ta(1920,1080,5),"1080p_2":Ta(1920,1080,30),"1080p_3":Ta(1920,1080,15)},S7={"1SL1TL":WS(1,1),"3SL3TL":WS(3,3),"2SL3TL":WS(2,3)};function Kl(n){return n||(n="480p_1"),typeof n=="string"?Object.assign({},E7[n]):n}function HS(n){return typeof n=="string"?Object.assign({},_7[n]):n}function g0(n){return typeof n=="string"?Object.assign({},S7[n]):n}const y7={speech_low_quality:dd(16e3,!1),speech_standard:dd(32e3,!1,18),music_standard:dd(48e3,!1),standard_stereo:dd(48e3,!0,56),high_quality:dd(48e3,!1,128),high_quality_stereo:dd(48e3,!0,192)};function v0(n){return typeof n=="string"?Object.assign({},y7[n]):n}function rn(n,r,i){Object.keys(Yi).includes(n)&&(!i&&Object.keys(Yl).includes(n)||(Yi[n]=r))}function re(n){return Yi[n]}const Yi={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:FN,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TWCC:!1,PUBLISH_TWCC:!1,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_PUB_RTX:!1,USE_SUB_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,SVC:[],ENABLE_ENCODED_TRANSFORM:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0}},Yl={};function dd(n,r,i){return{sampleRate:n,stereo:r,bitrate:i}}function bt(n,r,i,a,l){return{width:n,height:r,frameRate:i,bitrateMin:a,bitrateMax:l}}function Ta(n,r,i,a,l){return{width:{max:n},height:{max:r},frameRate:i,bitrateMin:a,bitrateMax:l}}function WS(n,r){return{numSpatialLayers:n,numTemporalLayers:r}}$S||(Yi.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],Yi.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],Yi.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],Yi.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],Yi.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],Yi.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],Yi.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",Yi.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",Yi.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",Yi.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",Yi.AREAS=["NORTH_AMERICA","OVERSEA"]);const C7=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],ql=[],fp=[];function Xl(n,r){return!!r&&ql.some(i=>i.uid===n&&i.channelName===r)}var T7=xr,b7=qa,R7=ae,GS=function(n,r,i){var a=T7(r);a in n?b7.f(n,a,R7(0,i)):n[a]=i},VN=m_,I7=Lc,w7=GS,O7=I.Array,A7=Math.max,jN=function(n,r,i){for(var a=I7(n),l=VN(r,a),d=VN(i===void 0?a:i,a),p=O7(A7(d-l,0)),g=0;l<d;l++,g++)w7(p,g,n[l]);return p.length=g,p},BN=jN,N7=Math.floor,zS=function(n,r){var i=n.length,a=N7(i/2);return i<8?x7(n,r):P7(n,zS(BN(n,0,a),r),zS(BN(n,a),r),r)},x7=function(n,r){for(var i,a,l=n.length,d=1;d<l;){for(a=d,i=n[d];a&&r(n[a-1],i)>0;)n[a]=n[--a];a!==d++&&(n[a]=i)}return n},P7=function(n,r,i,a){for(var l=r.length,d=i.length,p=0,g=0;p<l||g<d;)n[p+g]=p<l&&g<d?a(r[p],i[g])<=0?r[p++]:i[g++]:p<l?r[p++]:i[g++];return n},D7=zS,$N=Ge.match(/firefox\/(\d+)/i),k7=!!$N&&+$N[1],L7=/MSIE|Trident/.test(Ge),HN=Ge.match(/AppleWebKit\/(\d+)\./),M7=!!HN&&+HN[1],U7=xi,WN=y,F7=kt,V7=Hr,j7=Lc,GN=qu,KS=c,B7=D7,$7=u_,zN=k7,H7=L7,KN=Nn,YN=M7,Bc=[],qN=WN(Bc.sort),W7=WN(Bc.push),G7=KS(function(){Bc.sort(void 0)}),z7=KS(function(){Bc.sort(null)}),K7=$7("sort"),XN=!KS(function(){if(KN)return KN<70;if(!(zN&&zN>3)){if(H7)return!0;if(YN)return YN<603;var n,r,i,a,l="";for(n=65;n<76;n++){switch(r=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(a=0;a<47;a++)Bc.push({k:r+a,v:i})}for(Bc.sort(function(d,p){return p.v-d.v}),a=0;a<Bc.length;a++)r=Bc[a].k.charAt(0),l.charAt(l.length-1)!==r&&(l+=r);return l!=="DGBEFHACIJK"}});U7({target:"Array",proto:!0,forced:G7||!z7||!K7||!XN},{sort:function(n){n!==void 0&&F7(n);var r=V7(this);if(XN)return n===void 0?qN(r):qN(r,n);var i,a,l=[],d=j7(r);for(a=0;a<d;a++)a in r&&W7(l,r[a]);for(B7(l,function(p){return function(g,E){return E===void 0?-1:g===void 0?1:p!==void 0?+p(g,E)||0:GN(g)>GN(E)?1:-1}}(n)),i=l.length,a=0;a<i;)r[a]=l[a++];for(;a<d;)delete r[a++];return r}});var Y7=Mc("Array").sort,q7=T,X7=Y7,YS=Array.prototype,qS=function(n){var r=n.sort;return n===YS||q7(YS,n)&&r===YS.sort?X7:r};function hd(n,r){if(typeof n!="boolean")throw new q($.INVALID_PARAMS,"Invalid ".concat(r,": The value is of the boolean type."))}function Tr(n,r,i){if(!i.includes(n))throw new q($.INVALID_PARAMS,"".concat(r," can only be set as ").concat(JSON.stringify(i)))}function sn(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4,l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(n<i||n>a||l&&!J7(n))throw new q($.INVALID_PARAMS,"invalid ".concat(r,": the value range is [").concat(i,", ").concat(a,"]. integer only"))}function XS(n,r){if(typeof n!="number"){if(!(n.min||n.max||n.ideal||n.exact))throw new q($.INVALID_PARAMS,"".concat(r," is not a valid ConstrainLong"));n.min!==void 0&&sn(n.min,"".concat(r,".min"),0,1/0),n.max!==void 0&&sn(n.max,"".concat(r,".max"),1,1/0),n.exact!==void 0&&sn(n.exact,"".concat(r,".exact"),1,1/0),n.ideal!==void 0&&sn(n.ideal,"".concat(r,".ideal"),1,1/0)}else sn(n,r,1,1/0)}function Kr(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(n==null)throw new q($.INVALID_PARAMS,"".concat(r||"param"," cannot be empty"));if(!JN(n,i,a,l))throw new q($.INVALID_PARAMS,"Invalid ".concat(r||"string param",": Length of the string: [").concat(i,",").concat(a,"].").concat(l?" ASCII characters only.":""))}function rc(n,r){if(!Array.isArray(n))throw new q($.INVALID_PARAMS,"".concat(r," should be an array"))}function JS(n){if(typeof n!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(n))throw M.error("Invalid Channel Name ".concat(n)),new q($.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function QS(n){if(r=n,!(typeof r=="number"&&Math.floor(r)===r&&0<=r&&r<=4294967295||JN(n,1,255)))throw M.error("Invalid UID ".concat(n," ").concat(typeof n)),new q($.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var r;typeof n=="string"&&M.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function Sn(n){return n==null}function JN(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,a=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof n=="string"&&n.length<=i&&n.length>=r&&(!a||Q7(n))}function J7(n){return typeof n=="number"&&n%1==0}function Q7(n){if(typeof n!="string")return!1;for(let r=0;r<n.length;r+=1){const i=n.charCodeAt(r);if(i<0||i>255)return!1}return!0}let QN,ZN,Yr;(function(n){n.FREE="free",n.UPLOADING="uploading"})(QN||(QN={})),function(n){n[n.MISC=0]="MISC",n[n.INTERNAL_EVENT=1]="INTERNAL_EVENT",n[n.PUBLIC_EVENT=2]="PUBLIC_EVENT",n[n.WEB_EVENT=3]="WEB_EVENT",n[n.INTERNAL_API=4]="INTERNAL_API",n[n.WEB_API=5]="WEB_API",n[n.PUBLIC_API=6]="PUBLIC_API"}(ZN||(ZN={})),function(n){n.NONE="none",n.INIT="init",n.CANPLAY="canplay",n.PLAYING="playing",n.PAUSED="paused",n.SUSPEND="suspend",n.STALLED="stalled",n.WAITING="waiting",n.ERROR="error",n.DESTROYED="destroyed",n.ABORT="abort",n.ENDED="ended",n.EMPTIED="emptied",n.LOADEDDATA="loadeddata"}(Yr||(Yr={}));const ZS={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function Z7(n){return Kr(n.reportId,"params.reportId",0,100,!1),Kr(n.category,"params.category",0,100,!1),Kr(n.event,"params.event",0,100,!1),Kr(n.label,"params.label",0,100,!1),sn(n.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}const e9={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let Mr,In,ex,ey,Qn,Tn,Jl,ic,pd,mp,Ao,qr,We,ty,Wt,vt,Di,Zt,je,Ye,ho,ft,tx,qi;function nx(n){return sn(n.timeout,"config.timeout",0,1e5),sn(n.timeoutFactor,"config.timeoutFactor",0,100,!1),sn(n.maxRetryCount,"config.maxRetryConfig",0,1/0),sn(n.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function t9(n){return Tr(n.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),Tr(n.mode,"config.mode",["rtc","live"]),n.audioCodec!==void 0&&Tr(n.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),n.proxyServer!==void 0&&Kr(n.proxyServer,"config.proxyServer",1,1e4),n.turnServer!==void 0&&rx(n.turnServer),n.httpRetryConfig!==void 0&&nx(n.httpRetryConfig),n.websocketRetryConfig!==void 0&&nx(n.websocketRetryConfig),!0}function gp(n){if(!Array.isArray(n)||n.length<1)return!1;try{n.forEach(r=>{if(!r.urls)throw Error()})}catch{return!1}return!0}function rx(n){return Kr(n.turnServerURL,"turnServerURL"),Kr(n.username,"username"),Kr(n.password,"password"),n.udpport&&sn(n.udpport,"udpport",1,99999,!0),n.forceturn&&hd(n.forceturn,"forceturn"),n.security&&hd(n.security,"security"),n.tcpport&&sn(n.tcpport,"tcpport",1,99999,!0),!0}function ix(n){return n.level!==void 0&&Tr(n.level,"level",[1,2,3]),!0}(function(n){n.PUBLISH="publish",n.SUBSCRIBE="subscribe",n.WS_COMPRESSOR_INIT="ws_compressor_init",n.SESSION_INIT="session_init",n.JOIN_CHOOSE_SERVER="join_choose_server",n.REQ_USER_ACCOUNT="req_user_account",n.JOIN_GATEWAY="join_gateway",n.REJOIN_GATEWAY="rejoin_gateway",n.STREAM_SWITCH="stream_switch",n.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",n.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",n.FIRST_VIDEO_RECEIVED="first_video_received",n.FIRST_AUDIO_RECEIVED="first_audio_received",n.FIRST_VIDEO_DECODE="first_video_decode",n.FIRST_AUDIO_DECODE="first_audio_decode",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_UPDATE_STREAM="on_update_stream",n.ON_REMOVE_STREAM="on_remove_stream",n.USER_ANALYTICS="req_user_analytics",n.PC_STATS="pc_stats"})(Mr||(Mr={})),function(n){n.SESSION="io.agora.pb.Wrtc.Session",n.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",n.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",n.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",n.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",n.PUBLISH="io.agora.pb.Wrtc.Publish",n.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",n.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",n.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",n.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",n.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",n.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",n.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",n.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",n.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",n.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",n.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",n.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",n.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",n.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",n.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",n.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",n.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",n.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",n.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",n.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",n.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",n.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",n.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",n.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",n.PC_STATS="io.agora.pb.Wrtc.PCStats"}(In||(In={})),function(n){n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(ex||(ex={})),function(n){n[n.SESSION=26]="SESSION",n[n.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",n[n.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",n[n.JOIN_GATEWAY=28]="JOIN_GATEWAY",n[n.PUBLISH=30]="PUBLISH",n[n.SUBSCRIBE=29]="SUBSCRIBE",n[n.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",n[n.STREAM_SWITCH=32]="STREAM_SWITCH",n[n.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",n[n.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",n[n.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",n[n.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",n[n.API_INVOKE=41]="API_INVOKE",n[n.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",n[n.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",n[n.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",n[n.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",n[n.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",n[n.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",n[n.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",n[n.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",n[n.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",n[n.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",n[n.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",n[n.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",n[n.USER_ANALYTICS=1e4]="USER_ANALYTICS",n[n.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(ey||(ey={})),function(n){n.CREATE_CLIENT="createClient",n.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",n.SET_AREA="setArea",n.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",n.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",n.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",n.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",n.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",n.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",n.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",n.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",n.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",n.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",n.START_PROXY_SERVER="Client.startProxyServer",n.STOP_PROXY_SERVER="Client.stopProxyServer",n.SET_PROXY_SERVER="Client.setProxyServer",n.SET_TURN_SERVER="Client.setTurnServer",n.SET_CLIENT_ROLE="Client.setClientRole",n.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",n.ENABLE_DUAL_STREAM="Client.enableDualStream",n.DISABLE_DUAL_STREAM="Client.disableDualStream",n.JOIN="Client.join",n.LEAVE="Client.leave",n.PUBLISH="Client.publish",n.UNPUBLISH="Client.unpublish",n.SUBSCRIBE="Client.subscribe",n.MASS_SUBSCRIBE="Client.massSubscribe",n.MASS_UNSUBSCRIBE="Client.massUnsubscribe",n.UNSUBSCRIBE="Client.unsubscribe",n.RENEW_TOKEN="Client.renewToken",n.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",n.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",n.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",n.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",n.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",n.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",n.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",n.DATACHANNEL_FAILBACK="Client._datachannelFailback",n.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",n.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",n.START_LIVE_STREAMING="Client.startLiveStreaming",n.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",n.STOP_LIVE_STREAMING="Client.stopLiveStreaming",n.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",n.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",n.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",n.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",n.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",n.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",n.SET_CONFIG_DISTRIBUTE="_configDistribute",n.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",n.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",n.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",n.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",n.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",n.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",n.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",n.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",n.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",n.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",n.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",n.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",n.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",n.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",n.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",n.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",n.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",n.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",n.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",n.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",n.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",n.STREAM_TYPE_CHANGE="streamTypeChange",n.CONNECTION_STATE_CHANGE="connectionStateChange",n.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",n.IMAGE_MODERATION_UPLOAD="imageModerationUpload"}(Qn||(Qn={})),function(n){n.TRACER="tracer"}(Tn||(Tn={})),function(n){n.IDLE="IDLE",n.INITING="INITING",n.INITEND="INITEND"}(Jl||(Jl={})),function(n){n.STATE_CHANGE="state_change",n.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",n.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",n.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(ic||(ic={})),function(n){n[n.ACCESS_POINT=101]="ACCESS_POINT",n[n.UNILBS=201]="UNILBS",n[n.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(pd||(pd={})),function(n){n[n.IIIEGAL_APPID=1]="IIIEGAL_APPID",n[n.IIIEGAL_UID=2]="IIIEGAL_UID",n[n.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(mp||(mp={})),function(n){n[n.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",n[n.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",n[n.INTERNAL_ERROR=8]="INTERNAL_ERROR",n[n.NO_AUTHORIZED=9]="NO_AUTHORIZED",n[n.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",n[n.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",n[n.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",n[n.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",n[n.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",n[n.USER_OVERLOAD=16]="USER_OVERLOAD",n[n.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",n[n.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(Ao||(Ao={})),function(n){n[n.NO_FLAG_SET=100]="NO_FLAG_SET",n[n.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",n[n.INVALID_FALG_SET=102]="INVALID_FALG_SET",n[n.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",n[n.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",n[n.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",n[n.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",n[n.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",n[n.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",n[n.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",n[n.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",n[n.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",n[n.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",n[n.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",n[n.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",n[n.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",n[n.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",n[n.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",n[n.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(qr||(qr={})),function(n){n[n.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",n[n.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",n[n.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",n[n.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",n[n.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",n[n.K_TICKET_INVALID=7]="K_TICKET_INVALID",n[n.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",n[n.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",n[n.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",n[n.K_UID_BANNED=14]="K_UID_BANNED",n[n.K_IP_BANNED=15]="K_IP_BANNED",n[n.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",n[n.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",n[n.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",n[n.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",n[n.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",n[n.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",n[n.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",n[n.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",n[n.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",n[n.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",n[n.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",n[n.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",n[n.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",n[n.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",n[n.ERR_INVALID_UID=117]="ERR_INVALID_UID",n[n.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",n[n.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",n[n.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",n[n.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",n[n.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",n[n.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",n[n.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",n[n.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",n[n.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",n[n.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",n[n.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",n[n.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",n[n.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",n[n.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",n[n.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",n[n.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",n[n.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",n[n.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",n[n.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",n[n.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",n[n.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",n[n.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",n[n.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",n[n.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",n[n.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",n[n.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",n[n.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",n[n.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",n[n.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",n[n.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",n[n.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",n[n.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",n[n.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",n[n.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",n[n.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",n[n.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",n[n.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(We||(We={})),function(n){n[n.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",n[n.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",n[n.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(ty||(ty={})),function(n){n.LEAVE="LEAVE",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.UID_BANNED="UID_BANNED",n.IP_BANNED="IP_BANNED",n.CHANNEL_BANNED="CHANNEL_BANNED",n.FALLBACK="FALLBACK",n.LICENSE_MISSING="LICENSE_MISSING",n.LICENSE_EXPIRED="LICENSE_EXPIRED",n.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",n.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",n.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",n.LICENSE_ILLEGAL="LICENSE_ILLEGAL"}(Wt||(Wt={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.MEDIA_RECONNECT_START="media-reconnect-start",n.MEDIA_RECONNECT_END="media-reconnect-end",n.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",n.USER_JOINED="user-joined",n.USER_LEAVED="user-left",n.USER_PUBLISHED="user-published",n.USER_UNPUBLISHED="user-unpublished",n.USER_INFO_UPDATED="user-info-updated",n.CLIENT_BANNED="client-banned",n.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",n.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",n.VOLUME_INDICATOR="volume-indicator",n.CRYPT_ERROR="crypt-error",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGED="stream-type-changed",n.STREAM_FALLBACK="stream-fallback",n.RECEIVE_METADATA="receive-metadata",n.STREAM_MESSAGE="stream-message",n.LIVE_STREAMING_ERROR="live-streaming-error",n.LIVE_STREAMING_WARNING="live-streaming-warning",n.INJECT_STREAM_STATUS="stream-inject-status",n.EXCEPTION="exception",n.ERROR="error",n.P2P_LOST="p2p_lost",n.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",n.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",n.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",n.PUBLISHED_USER_LIST="published-user-list",n.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",n.CONTENT_INSPECT_ERROR="content-inspect-error",n.CONTENT_INSPECT_RESULT="content-inspect-result",n.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change"}(vt||(vt={})),function(n){n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.MULTI_IP="MULTI_IP",n.TIMEOUT="TIMEOUT",n.OFFLINE="OFFLINE",n.LEAVE="LEAVE",n.P2P_FAILED="P2P_FAILED",n.FALLBACK="FALLBACK"}(Di||(Di={})),function(n){n.CONNECTING="connecting",n.CONNECTED="connected",n.RECONNECTING="reconnecting",n.CLOSED="closed"}(Zt||(Zt={})),function(n){n.WS_CONNECTED="ws_connected",n.WS_RECONNECTING="ws_reconnecting",n.WS_CLOSED="ws_closed",n.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",n.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",n.ON_BINARY_DATA="on_binary_data",n.REQUEST_RECOVER="request_recover",n.REQUEST_JOIN_INFO="request_join_info",n.REQUEST_REJOIN_INFO="req_rejoin_info",n.IS_P2P_DISCONNECTED="is_p2p_dis",n.DISCONNECT_P2P="dis_p2p",n.ABORT_P2P_EXECUTION="abort_p2p_execution",n.NEED_RENEW_SESSION="need-sid",n.REPORT_JOIN_GATEWAY="report_join_gateway",n.REQUEST_TIMEOUT="request_timeout",n.REQUEST_SUCCESS="request_success",n.JOIN_RESPONSE="join_response",n.DATACHANNEL_PRECONNECT="datachannel_preconnect",n.DATACHANNEL_CONNECTING="datachannel_connecting",n.DATACHANNEL_FAILBACK="datachannel_failback"}(je||(je={})),function(n){n.PING="ping",n.PING_BACK="ping_back",n.JOIN="join_v3",n.REJOIN="rejoin_v3",n.LEAVE="leave",n.SET_CLIENT_ROLE="set_client_role",n.PUBLISH="publish",n.UNPUBLISH="unpublish",n.SUBSCRIBE="subscribe",n.SUBSCRIBE_STREAMS="subscribe_streams",n.UNSUBSCRIBE="unsubscribe",n.UNSUBSCRIBE_STREAMS="unsubscribe_streams",n.SUBSCRIBE_CHANGE="subscribe_change",n.TRAFFIC_STATS="traffic_stats",n.RENEW_TOKEN="renew_token",n.SWITCH_VIDEO_STREAM="switch_video_stream",n.DEFAULT_VIDEO_STREAM="default_video_stream",n.SET_FALLBACK_OPTION="set_fallback_option",n.GATEWAY_INFO="gateway_info",n.CONTROL="control",n.SEND_METADATA="send_metadata",n.DATA_STREAM="data_stream",n.PICK_SVC_LAYER="pick_svc_layer",n.RESTART_ICE="restart_ice",n.CONNECT_PC="connect_pc",n.SET_VIDEO_PROFILE="set_video_profile",n.SET_PARAMETER="set_parameter"}(Ye||(Ye={})),function(n){n.PUBLISH_STATS="publish_stats",n.PUBLISH_RELATED_STATS="publish_related_stats",n.SUBSCRIBE_STATS="subscribe_stats",n.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",n.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",n.DENOISER_STATS="denoiser_stats",n.TRANSPORT_STATS="transport_stats",n.EXTENSION_USAGE_STATS="extension_usage_stats"}(ho||(ho={})),function(n){n.ON_USER_ONLINE="on_user_online",n.ON_USER_OFFLINE="on_user_offline",n.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",n.ON_PUBLISH_STREAM="on_publish_stream",n.ON_UPLINK_STATS="on_uplink_stats",n.ON_P2P_LOST="on_p2p_lost",n.ON_REMOVE_STREAM="on_remove_stream",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",n.ON_USER_BANNED="on_user_banned",n.ON_USER_LICENSE_BANNED="on_user_license_banned",n.ON_NOTIFICATION="on_notification",n.ON_CRYPT_ERROR="on_crypt_error",n.MUTE_AUDIO="mute_audio",n.MUTE_VIDEO="mute_video",n.UNMUTE_AUDIO="unmute_audio",n.UNMUTE_VIDEO="unmute_video",n.ON_P2P_OK="on_p2p_ok",n.RECEIVE_METADATA="receive_metadata",n.ON_DATA_STREAM="on_data_stream",n.ENABLE_LOCAL_VIDEO="enable_local_video",n.DISABLE_LOCAL_VIDEO="disable_local_video",n.ENABLE_LOCAL_AUDIO="enable_local_audio",n.DISABLE_LOCAL_AUDIO="disable_local_audio",n.ON_PUBLISHED_USER_LIST="on_published_user_list"}(ft||(ft={})),function(n){n.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",n.NEED_ANSWER="NEED_ANSWER",n.NEED_RENEGOTIATE="NEED_RENEGOTIATE",n.P2P_LOST="P2P_LOST",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NEED_UNPUB="NEED_UNPUB",n.NEED_UNSUB="NEED_UNSUB",n.NEED_UPLOAD="NEED_UPLOAD",n.NEED_CONTROL="NEED_CONTROL",n.START_RECONNECT="START_RECONNECT",n.END_RECONNECT="END_RECONNECT",n.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(tx||(tx={})),function(n){n.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",n.RECEIVE_TRACK_BUFFER="receive_track_buffer",n.ON_AUDIO_BUFFER="on_audio_buffer",n.UPDATE_SOURCE="update_source"}(qi||(qi={}));const ny={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},ry={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},ox={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},n9={uplinkNetworkQuality:0,downlinkNetworkQuality:0},ax={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let Ze,ar,$c;(function(n){n.CONNECTED="websocket:connected",n.RECONNECTING="websocket:reconnecting",n.WILL_RECONNECT="websocket:will_reconnect",n.CLOSED="websocket:closed",n.FAILED="websocket:failed",n.ON_MESSAGE="websocket:on_message",n.REQUEST_NEW_URLS="websocket:request_new_urls",n.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",n.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire"})(Ze||(Ze={})),function(n){n.TRANSCODE="mix_streaming",n.RAW="raw_streaming",n.INJECT="inject_streaming"}(ar||(ar={})),function(n){n[n.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",n[n.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",n[n.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",n[n.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",n[n.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",n[n.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",n[n.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",n[n.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",n[n.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}($c||($c={}));const r9={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},iy={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function oy(n,r){Kr(n.url,"".concat(r,".url"),1,1e3,!1),Sn(n.x)||sn(n.x,"".concat(r,".x"),0,1e4),Sn(n.y)||sn(n.y,"".concat(r,".y"),0,1e4),Sn(n.width)||sn(n.width,"".concat(r,".width"),0,1e4),Sn(n.height)||sn(n.height,"".concat(r,".height"),0,1e4),Sn(n.zOrder)||sn(n.zOrder,"".concat(r,".zOrder"),0,255),Sn(n.alpha)||sn(n.alpha,"".concat(r,".alpha"),0,1,!1)}const i9={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},o9={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let ba,fd,jn,sx,Xr,Za,Ti,Hc,sr,bn,Zn,E0,Xe,hr,md,ay,sy,vp,Wc,gd,Rt;function cx(n){if(!n.channelName)throw new q($.INVALID_PARAMS,"invalid channelName in info");if(typeof n.uid!="number")throw new q($.INVALID_PARAMS,"invalid uid in info, uid must be a number");return n.token&&Kr(n.token,"info.token",1,2047),QS(n.uid),JS(n.channelName),!0}function lx(n){return Tr(n,"mediaSource",["screen","window","application"]),!0}(function(n){n.WARNING="@live_uap-warning",n.ERROR="@line_uap-error",n.PUBLISH_STREAM_STATUS="@live_uap-publish-status",n.INJECT_STREAM_STATUS="@live_uap-inject-status",n.WORKER_STATUS="@live_uap-worker-status",n.REQUEST_NEW_ADDRESS="@live_uap-request-address"})(ba||(ba={})),function(n){n.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(fd||(fd={})),function(n){n[n.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",n[n.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",n[n.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",n[n.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",n[n.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",n[n.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",n[n.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",n[n.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",n[n.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",n[n.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",n[n.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",n[n.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",n[n.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",n[n.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",n[n.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",n[n.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(jn||(jn={})),function(n){n.CONNECT_FAILED="connect failed",n.CONNECT_TIMEOUT="connect timeout",n.WS_DISCONNECTED="websocket disconnected",n.REQUEST_TIMEOUT="request timeout",n.REQUEST_FAILED="request failed",n.WAIT_STATUS_TIMEOUT="wait status timeout",n.WAIT_STATUS_ERROR="wait status error",n.BAD_STATE="bad state",n.WS_ABORT="ws abort",n.AP_REQUEST_TIMEOUT="AP request timeout",n.AP_JSON_PARSE_ERROR="AP json parse error",n.AP_REQUEST_ERROR="AP request error",n.AP_REQUEST_ABORT="AP request abort"}(sx||(sx={})),function(n){n[n.SetSdkProfile=0]="SetSdkProfile",n[n.SetSourceChannel=1]="SetSourceChannel",n[n.SetSourceUserId=2]="SetSourceUserId",n[n.SetDestChannel=3]="SetDestChannel",n[n.StartPacketTransfer=4]="StartPacketTransfer",n[n.StopPacketTransfer=5]="StopPacketTransfer",n[n.UpdateDestChannel=6]="UpdateDestChannel",n[n.Reconnect=7]="Reconnect",n[n.SetVideoProfile=8]="SetVideoProfile"}(Xr||(Xr={})),function(n){n.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",n.NETWORK_CONNECTED="NETWORK_CONNECTED",n.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",n.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",n.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",n.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",n.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",n.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",n.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",n.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(Za||(Za={})),function(n){n.RELAY_STATE_IDLE="RELAY_STATE_IDLE",n.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",n.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",n.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(Ti||(Ti={})),function(n){n.RELAY_OK="RELAY_OK",n.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",n.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",n.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(Hc||(Hc={})),function(n){n.High="high",n.Low="low",n.Audio="audio",n.Screen="screen",n.ScreenLow="screen_low"}(sr||(sr={})),function(n){n.DISCONNECT="disconnect",n.CONNECTION_STATE_CHANGE="connection-state-change",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGE="stream-type-change",n.IS_P2P_DISCONNECTED="is-p2p-dis",n.DISCONNECT_P2P="dis-p2p",n.REQUEST_NEW_GATEWAY_LIST="req-gate-url",n.NEED_RENEW_SESSION="need-sid",n.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",n.JOIN_RESPONSE="join-response",n.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",n.RESET_CONNECTION_EVENTS="reset-connection-events",n.DATACHANNEL_PRECONNECT="datachannel_preconnect",n.DATACHANNEL_FAILBACK="datachannel_failback",n.RESET_SIGNAL="reset-signal"}(bn||(bn={})),function(n){n[n.Nothing=0]="Nothing",n[n.Audio=1]="Audio",n[n.LwoVideo=2]="LwoVideo",n[n.Video=4]="Video",n[n.Data=8]="Data"}(Zn||(Zn={})),function(n){n[n.websocket=0]="websocket",n[n.datachannel=1]="datachannel"}(E0||(E0={})),function(n){n.NEED_RENEGOTIATE="@need_renegotiate",n.NEED_REPLACE_TRACK="@need_replace_track",n.NEED_CLOSE="@need_close",n.NEED_ENABLE_TRACK="@need_enable_track",n.NEED_DISABLE_TRACK="@need_disable_track",n.NEED_SESSION_ID="@need_sid",n.SET_OPTIMIZATION_MODE="@set_optimization_mode",n.GET_STATS="@get_stats",n.GET_LOW_VIDEO_TRACK="@get_low_video_track",n.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",n.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",n.NEED_MUTE_TRACK="@need_mute_track",n.NEED_UNMUTE_TRACK="@need_unmute_track"}(Xe||(Xe={})),function(n){n.SCREEN_TRACK="screen_track",n.CUSTOM_TRACK="custome_track",n.LOW_STREAM="low_stream"}(hr||(hr={})),function(n){n[n.HIGH_STREAM=0]="HIGH_STREAM",n[n.LOW_STREAM=1]="LOW_STREAM"}(md||(md={})),function(n){n[n.HIGH_STREAM=0]="HIGH_STREAM",n[n.LOW_STREAM=1]="LOW_STREAM"}(ay||(ay={})),function(n){n[n.DISABLE=0]="DISABLE",n[n.LOW_STREAM=1]="LOW_STREAM",n[n.AUDIO_ONLY=2]="AUDIO_ONLY"}(sy||(sy={})),function(n){n.TRANSCEIVER_UPDATED="transceiver-updated"}(vp||(vp={})),function(n){n.SOURCE_STATE_CHANGE="source-state-change",n.TRACK_ENDED="track-ended",n.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",n.CLOSED="closed"}(Wc||(Wc={})),function(n){n.FIRST_FRAME_DECODED="first-frame-decoded",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(gd||(gd={})),function(n){n.CHINA="CHINA",n.ASIA="ASIA",n.NORTH_AMERICA="NORTH_AMERICA",n.EUROPE="EUROPE",n.JAPAN="JAPAN",n.INDIA="INDIA",n.KOREA="KOREA",n.HKMC="HKMC",n.US="US",n.OCEANIA="OCEANIA",n.SOUTH_AMERICA="SOUTH_AMERICA",n.AFRICA="AFRICA",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL",n.EXTENSIONS="EXTENSIONS"}(Rt||(Rt={}));const a9=[Rt.AFRICA,Rt.ASIA,Rt.CHINA,Rt.EUROPE,Rt.GLOBAL,Rt.INDIA,Rt.JAPAN,Rt.NORTH_AMERICA,Rt.OCEANIA,Rt.OVERSEA,Rt.SOUTH_AMERICA];let br;(function(n){n.CHINA="CN",n.ASIA="AS",n.NORTH_AMERICA="NA",n.EUROPE="EU",n.JAPAN="JP",n.INDIA="IN",n.KOREA="KR",n.HKMC="HK",n.US="US",n.OCEANIA="OC",n.SOUTH_AMERICA="SA",n.AFRICA="AF",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL",n.EXTENSIONS="GLOBAL"})(br||(br={}));const _0={CHINA:{},ASIA:{CODE:br.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:br.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:br.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:br.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","	uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:br.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:br.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:br.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:br.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:br.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:br.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:br.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:br.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:br.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};let Ep,ux,at,Ur,es,Pe,pr,wt,li,Gc,Jr,Xi,No,xo,cr,ws,kn,ts,dx,po,Jo,zc;$S&&(_0.CHINA={CODE:br.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(n){n.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(Ep||(Ep={}));class S0 extends Rn{constructor(r,i){super(),w(this,"onICEConnectionStateChange",void 0),w(this,"onConnectionStateChange",void 0),w(this,"onDTLSTransportStateChange",void 0),w(this,"onDTLSTransportError",void 0),w(this,"onICETransportStateChange",void 0),w(this,"onFirstAudioReceived",void 0),w(this,"onFirstVideoReceived",void 0),w(this,"onFirstAudioDecoded",void 0),w(this,"onFirstVideoDecoded",void 0),w(this,"onFirstVideoDecodedTimeout",void 0),w(this,"onSelectedLocalCandidateChanged",void 0),w(this,"onSelectedRemoteCandidateChanged",void 0),w(this,"establishPromise",void 0)}}(function(n){n.SEND="sendonly",n.RECV="recvonly",n.SENDRECV="sendrecv",n.INACTIVE="inactive"})(ux||(ux={})),function(n){n.VIDEO="video",n.AUDIO="audio"}(at||(at={})),function(n){n[n.UDP=0]="UDP",n[n.TCP=1]="TCP",n[n.RELAY=2]="RELAY"}(Ur||(Ur={})),function(n){n[n.FIRST_CONNECTION=0]="FIRST_CONNECTION",n[n.TCP_RESTART=1]="TCP_RESTART",n[n.RELAY_RESTART=2]="RELAY_RESTART",n[n.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",n[n.OLD_RESTART=11]="OLD_RESTART",n[n.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED"}(es||(es={})),function(n){n.LocalVideoTrack="videoTrack",n.LocalAudioTrack="audioTrack",n.LocalVideoLowTrack="videoLowTrack"}(Pe||(Pe={})),function(n){n.New="new",n.Connected="connected",n.Reconnecting="reconnecting",n.Disconnected="disconnected"}(pr||(pr={})),function(n){n.StateChange="stateChange",n.IceConnectionStateChange="iceConnectionStateChange",n.RequestMuteLocal="requestMuteLocal",n.RequestUnmuteLocal="requestUnmuteLocal",n.RequestRePublish="requestRePublish",n.RequestReSubscribe="requestReSubscribe",n.RequestUploadStats="requestUploadStats",n.MediaReconnectStart="MediaReconnectStart",n.MediaReconnectEnd="MediaReconnectEnd",n.NeedSignalRTT="NeedSignalRTT",n.RequestRestartICE="RequestRestartIce",n.PeerConnectionStateChange="PeerConnectionStateChange",n.RequestReconnect="RequestReconnect",n.RequestReconnectPC="RequestReconnectPC",n.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",n.P2PLost="P2PLost",n.UpdateVideoEncoder="UpdateVideoEncoder",n.ConnectionTypeChange="ConnectionTypeChange",n.RequestLowStreamParameter="RequestLowStreamParameter",n.QueryClientConnectionState="QueryClientConnectionState"}(wt||(wt={})),function(n){n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(li||(li={})),function(n){n.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(Gc||(Gc={})),function(n){n.ON_TRACK="on_track",n.ON_NODE="on_node"}(Jr||(Jr={})),function(n){n.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",n.REQUEST_CONSTRAINTS="request_constraints"}(Xi||(Xi={})),function(n){n.CONNECTING="CONNECTING",n.RECONNECTING="RECONNECTING",n.CONNECTED="CONNECTED",n.CLOSED="CLOSED"}(No||(No={})),function(n){n[n.CONNECT_AP=0]="CONNECT_AP",n[n.AP_CONNECTED=1]="AP_CONNECTED",n[n.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",n[n.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",n[n.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",n[n.CONNECT_WORKER=5]="CONNECT_WORKER",n[n.WORKER_CONNECTED=6]="WORKER_CONNECTED",n[n.CLOSED=7]="CLOSED"}(xo||(xo={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.STATE_CHANGE="state-change",n.INSPECT_RESULT="inspect-result",n.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",n.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(cr||(cr={})),function(n){n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.MULTI_IP="MULTI_IP",n.TIMEOUT="TIMEOUT",n.OFFLINE="OFFLINE",n.LEAVE="LEAVE",n.P2P_FAILED="P2P_FAILED",n.FALLBACK="FALLBACK"}(ws||(ws={})),function(n){n.CONNECTED="transmitter:connected",n.RECONNECTING="transmitter:reconnecting",n.WILL_RECONNECT="transmitter:will_reconnect",n.CLOSED="transmitter:closed",n.FAILED="transmitter:failed",n.ON_MESSAGE="transmitter:on_message",n.REQUEST_NEW_URLS="transmitter:request_new_urls",n.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",n.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",n.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",n.FAILBACK="transmitter:failback"}(kn||(kn={})),function(n){n.CAMERA_CHANGED="camera-changed",n.MICROPHONE_CHANGED="microphone-changed",n.PLAYBACK_DEVICE_CHANGED="playback-device-changed",n.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",n.AUTOPLAY_FAILED="autoplay-failed",n.SECURITY_POLICY_VIOLATION="security-policy-violation"}(ts||(ts={})),function(n){n[n.APP_TYPE_INVALID_VALUE=-1]="APP_TYPE_INVALID_VALUE",n[n.APP_TYPE_NATIVE=0]="APP_TYPE_NATIVE",n[n.APP_TYPE_NATIVE_COCOS=1]="APP_TYPE_NATIVE_COCOS",n[n.APP_TYPE_NATIVE_UNITY=2]="APP_TYPE_NATIVE_UNITY",n[n.APP_TYPE_NATIVE_ELECTRON=3]="APP_TYPE_NATIVE_ELECTRON",n[n.APP_TYPE_NATIVE_FLUTTER=4]="APP_TYPE_NATIVE_FLUTTER",n[n.APP_TYPE_NATIVE_UNREAL=5]="APP_TYPE_NATIVE_UNREAL",n[n.APP_TYPE_NATIVE_XAMARIN=6]="APP_TYPE_NATIVE_XAMARIN",n[n.APP_TYPE_NATIVE_API_CLOUD=7]="APP_TYPE_NATIVE_API_CLOUD",n[n.APP_TYPE_NATIVE_REACT_NATIVE=8]="APP_TYPE_NATIVE_REACT_NATIVE",n[n.APP_TYPE_NATIVE_PYTHON=9]="APP_TYPE_NATIVE_PYTHON",n[n.APP_TYPE_NATIVE_COCOS_CREATOR=10]="APP_TYPE_NATIVE_COCOS_CREATOR",n[n.APP_TYPE_NATIVE_RUST=11]="APP_TYPE_NATIVE_RUST",n[n.APP_TYPE_NATIVE_C_SHARP=12]="APP_TYPE_NATIVE_C_SHARP",n[n.APP_TYPE_NATIVE_CEF=13]="APP_TYPE_NATIVE_CEF",n[n.APP_TYPE_NATIVE_UNI_APP=14]="APP_TYPE_NATIVE_UNI_APP",n[n.APP_TYPE_WEBRTC=1e3]="APP_TYPE_WEBRTC",n[n.APP_TYPE_WEBRTC_REACT=1001]="APP_TYPE_WEBRTC_REACT",n[n.APP_TYPE_WEBRTC_VUE=1002]="APP_TYPE_WEBRTC_VUE",n[n.APP_TYPE_WEBRTC_ANGULAR=1003]="APP_TYPE_WEBRTC_ANGULAR"}(dx||(dx={})),function(n){n.CONNECTING="CONNECTING",n.RECONNECTING="RECONNECTING",n.CONNECTED="CONNECTED",n.CLOSED="CLOSED"}(po||(po={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.STATE_CHANGE="state-change",n.INSPECT_RESULT="inspect-result",n.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",n.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(Jo||(Jo={})),function(n){n[n.CONNECT_AP=0]="CONNECT_AP",n[n.AP_CONNECTED=1]="AP_CONNECTED",n[n.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",n[n.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",n[n.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",n[n.CONNECT_WORKER=5]="CONNECT_WORKER",n[n.WORKER_CONNECTED=6]="WORKER_CONNECTED",n[n.CLOSED=7]="CLOSED"}(zc||(zc={}));const ui={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1};function Gn(){return ui}let Er;(function(n){n[n.CHOOSE_SERVER=11]="CHOOSE_SERVER",n[n.CLOUD_PROXY=18]="CLOUD_PROXY",n[n.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",n[n.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"})(Er||(Er={}));var s9=Ee,_p=Array.isArray||function(n){return s9(n)=="Array"},c9=I,hx=_p,l9=U_,u9=ht,d9=or("species"),px=c9.Array,h9=function(n){var r;return hx(n)&&(r=n.constructor,(l9(r)&&(r===px||hx(r.prototype))||u9(r)&&(r=r[d9])===null)&&(r=void 0)),r===void 0?px:r},fx=function(n,r){return new(h9(n))(r===0?0:r)},p9=np,f9=Me,m9=Hr,g9=Lc,v9=fx,mx=y([].push),Kc=function(n){var r=n==1,i=n==2,a=n==3,l=n==4,d=n==6,p=n==7,g=n==5||d;return function(E,C,S,R){for(var k,F,W=m9(E),G=f9(W),z=p9(C,S),oe=g9(G),ce=0,ye=R||v9,Ne=r?ye(E,oe):i||p?ye(E,0):void 0;oe>ce;ce++)if((g||ce in G)&&(F=z(k=G[ce],ce,W),n))if(r)Ne[ce]=F;else if(F)switch(n){case 3:return!0;case 5:return k;case 6:return ce;case 2:mx(Ne,k)}else switch(n){case 4:return!1;case 7:mx(Ne,k)}return d?-1:a||l?l:Ne}},gx={forEach:Kc(0),map:Kc(1),filter:Kc(2),some:Kc(3),every:Kc(4),find:Kc(5),findIndex:Kc(6),filterReject:Kc(7)},E9=gx.forEach,vx=u_("forEach")?[].forEach:function(n){return E9(this,n,arguments.length>1?arguments[1]:void 0)};xi({target:"Array",proto:!0,forced:[].forEach!=vx},{forEach:vx});var _9=Mc("Array").forEach,S9=Fc,y9=Xn,C9=T,T9=_9,cy=Array.prototype,b9={DOMTokenList:!0,NodeList:!0},R9=function(n){var r=n.forEach;return n===cy||C9(cy,n)&&r===cy.forEach||y9(b9,S9(n))?T9:r},I9=Hr,Ex=S_;xi({target:"Object",stat:!0,forced:c(function(){Ex(1)})},{keys:function(n){return Ex(I9(n))}});var w9=ze.Object.keys,O9=C1,A9=xi,N9=_p,x9=y([].reverse),_x=[1,2];A9({target:"Array",proto:!0,forced:String(_x)===String(_x.reverse())},{reverse:function(){return N9(this)&&(this.length=this.length),x9(this)}});var P9=Mc("Array").reverse,D9=T,k9=P9,ly=Array.prototype,L9=function(n){var r=n.reverse;return n===ly||D9(ly,n)&&r===ly.reverse?k9:r},M9=c,U9=Nn,F9=or("species"),Sx=function(n){return U9>=51||!M9(function(){var r=[];return(r.constructor={})[F9]=function(){return{foo:1}},r[n](Boolean).foo!==1})},V9=xi,j9=I,yx=_p,B9=U_,$9=ht,Cx=m_,H9=Lc,W9=lt,G9=GS,z9=or,K9=F_,Y9=Sx("slice"),q9=z9("species"),uy=j9.Array,X9=Math.max;V9({target:"Array",proto:!0,forced:!Y9},{slice:function(n,r){var i,a,l,d=W9(this),p=H9(d),g=Cx(n,p),E=Cx(r===void 0?p:r,p);if(yx(d)&&(i=d.constructor,(B9(i)&&(i===uy||yx(i.prototype))||$9(i)&&(i=i[q9])===null)&&(i=void 0),i===uy||i===void 0))return K9(d,g,E);for(a=new(i===void 0?uy:i)(X9(E-g,0)),l=0;g<E;g++,l++)g in d&&G9(a,l,d[g]);return a.length=l,a}});var J9=Mc("Array").slice,Q9=T,Z9=J9,dy=Array.prototype,eK=function(n){var r=n.slice;return n===dy||Q9(dy,n)&&r===dy.slice?Z9:r};function ve(n,r,i,a,l){var d,p,g,E={};return R9(d=w9(a)).call(d,function(C){E[C]=a[C]}),E.enumerable=!!E.enumerable,E.configurable=!!E.configurable,("value"in E||E.initializer)&&(E.writable=!0),E=O9(p=L9(g=eK(i).call(i)).call(g)).call(p,function(C,S){return S(n,r,C)||C},E),l&&E.initializer!==void 0&&(E.value=E.initializer?E.initializer.call(l):void 0,E.initializer=void 0),E.initializer===void 0&&(lN(n,r,E),E=null),E}var tK=Mc("Array").keys,nK=Fc,rK=Xn,iK=T,oK=tK,hy=Array.prototype,aK={DOMTokenList:!0,NodeList:!0},Ql=function(n){var r=n.keys;return n===hy||iK(hy,n)&&r===hy.keys||rK(aK,nK(n))?oK:r};function Tx(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function bx(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Tx(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Tx(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}let y0=0,py=0;function Ra(n,r,i,a){return new Ae((l,d)=>{r.timeout=r.timeout||re("HTTP_CONNECT_TIMEOUT"),r.responseType=r.responseType||"json",r.data&&!i?(r.data=JSON.stringify(r.data),y0+=Cd(r.data)):i&&(r.data.size?y0+=r.data.size:r.data instanceof FormData?y0+=function(p){let g=0;return/DingTalk/i.test(navigator.userAgent)&&p.realFormData&&(p=p.realFormData),p.forEach(E=>{g+=typeof E=="string"?Cd(E):E.size}),g+138}(r.data):y0+=Cd(JSON.stringify(r.data))),r.headers=r.headers||{},r.headers["Content-Type"]=r.headers["Content-Type"]||"application/json",r.method="POST",r.url=n,wo.request(r).then(p=>{typeof p.data=="string"?py+=Cd(p.data):p.data instanceof ArrayBuffer||p.data instanceof Uint8Array?py+=p.data.byteLength:py+=Cd(JSON.stringify(p.data)),a&&l({data:p.data,headers:p.headers}),l(p.data)}).catch(p=>{wo.isCancel(p)?d(new q($.OPERATION_ABORTED,"cancel token canceled")):p.code==="ECONNABORTED"?d(new q($.NETWORK_TIMEOUT,p.message)):p.response?d(new q($.NETWORK_RESPONSE_ERROR,p.response.status)):d(new q($.NETWORK_ERROR,p.message))})})}async function sK(n,r){const i=new Blob([r.data],{type:"buffer"});return await Ra(n,bx(bx({},r),{},{data:i,headers:{"Content-Type":"application/octet-stream"}}),!0)}const er=new class extends Rn{set networkState(n){M.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+n),this.emit(Gc.NETWORK_STATE_CHANGE,n,this._networkState),n===li.ONLINE?this.emit(Gc.ONLINE):n===li.OFFLINE&&(this.onlineWaiter=new Ae(r=>{this.once(Gc.ONLINE,()=>{this.onlineWaiter=void 0,r(li.ONLINE)})}),this.emit(Gc.OFFLINE)),this._networkState=n}get networkState(){return this._networkState}constructor(){super(),w(this,"_moduleName","network-indicator"),w(this,"_networkState",li.ONLINE),w(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=li.ONLINE}),window.addEventListener("offline",()=>{this.networkState=li.OFFLINE})}};let fy=!1;const Po=new class extends Rn{constructor(){super(...arguments),w(this,"onAutoplayFailed",void 0),w(this,"onAudioAutoplayFailed",void 0)}};function Rx(){if(Ht(),!fy){const n=r=>{r.preventDefault(),fy=!1,dp()?document.body.removeEventListener("click",n,!0):(document.body.removeEventListener("touchstart",n,!0),document.body.removeEventListener("mousedown",n,!0))};fy=!0,dp()?document.body.addEventListener("click",n,!0):(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0)),M.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Po.onAutoplayFailed?Po.onAutoplayFailed():Po.onAudioAutoplayFailed?M.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):M.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),Po.emit("autoplay-failed")}}function my(n){return new TextEncoder().encode(n)}const Ix=function(n,r){const i=new Uint8Array(n.byteLength+r.byteLength);return i.set(new Uint8Array(n),0),i.set(new Uint8Array(r),n.byteLength),i},cK=async n=>function(r,i){let a="";return new Uint8Array(r).forEach(l=>{a+=l.toString(i).padStart(2,"0")}),a}(await crypto.subtle.digest("SHA-256",my(n)),16);function wx(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function st(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?wx(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):wx(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}function He(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(r,i,a){const l=a.value;if(typeof l=="function"){const d=n.className||r.__className__||(r.constructor.name==="AgoraRTCClient"?"Client":r.constructor.name);a.value=function(){for(var p=arguments.length,g=new Array(p),E=0;E<p;E++)g[E]=arguments[E];let C=g;if(n.argsMap)try{C=n.argsMap(this,...g)}catch(R){M.warning(R),C=[]}try{JSON.stringify(C)}catch{M.warning("arguments for method ".concat(d,".").concat(String(i)," not serializable for apiInvoke.")),C=[]}const S=(n.report||ke).reportApiInvoke(this._sessionId||null,{name:"".concat(d,".").concat(String(i)),options:C,tag:Tn.TRACER,reportResult:n.reportResult},n.throttleTime);try{const R=l.apply(this,g);return R instanceof Ae?R.then(k=>(S.onSuccess(n.reportResult&&k),k)).catch(k=>{throw S.onError(k),k}):(S.onSuccess(n.reportResult&&R),R)}catch(R){throw S.onError(R),R}}}return a}}const ke=new class{constructor(){w(this,"baseInfoMap",new Map),w(this,"proxyServer",void 0),w(this,"clientList",ql),w(this,"eventUploadTimer",void 0),w(this,"setSessionIdTimer",void 0),w(this,"url",void 0),w(this,"backupUrl",void 0),w(this,"_appId",void 0),w(this,"keyEventUploadPendingItems",[]),w(this,"normalEventUploadPendingItems",[]),w(this,"apiInvokeUploadPendingItems",[]),w(this,"apiInvokeCount",0),w(this,"ltsList",[]),w(this,"lastSendNormalEventTime",Date.now()),w(this,"customReportCounterTimer",void 0),w(this,"customReportCount",0),w(this,"extApiInvoke",async n=>{for(const r of n){const i=st(st({},r),{},{sid:null,invokeId:++this.apiInvokeCount,tag:Tn.TRACER});this.sendApiInvoke(i)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),re("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),re("EVENT_REPORT_SEND_INTERVAL"))}adjustSessionStartTime(n){if(!this.baseInfoMap.has(n)&&!this.baseInfoMap.get(n))return void M.error("adjust session ".concat(n," start time, sid is not exist or info is undefined"));const r=this.baseInfoMap.get(n),i=Date.now(),a=r.startTime;r.startTime=i,M.debug("rewrite session ".concat(n," startTime: ").concat(i," , ").concat(i-a,"ms")),this.baseInfoMap.set(n,r)}setAppId(n){this._appId=n}reportApiInvoke(n,r,i){r.timeout=r.timeout||6e4,r.reportResult=r.reportResult===void 0||r.reportResult;const a=Date.now();this.apiInvokeCount+=1;const l=this.apiInvokeCount,d=()=>({tag:r.tag,invokeId:l,sid:n,name:r.name,apiInvokeTime:a,options:r.options,states:r.states||null}),p=!!re("SHOW_REPORT_INVOKER_LOG");p&&M.info("".concat(r.name," start"),r.options);let g=!1;Zr(r.timeout).then(()=>{g||(this.sendApiInvoke(st(st({},d()),{},{error:$.API_INVOKE_TIMEOUT,success:!1})),M.debug("".concat(r.name," timeout")))});const E=new q($.UNEXPECTED_ERROR,"".concat(r.name,": this api invoke is end"));return{onSuccess:C=>{const S=()=>{if(g)throw E;return g=!0,this.sendApiInvoke(st(st({},d()),{},{success:!0},r.reportResult&&{result:C})),p&&M.info("".concat(r.name," onSuccess")),C};return i?HP(S,r.name+"Success",i,()=>g=!0):S()},onError:C=>{const S=()=>{if(g)throw C;g=!0,this.sendApiInvoke(st(st({},d()),{},{success:!1,error:C})),p&&M.info("".concat(r.name," onFailure"),C.toString())};return i?HP(S,r.name+"Error",i,()=>g=!0):S()}}}sessionInit(n,r){if(this.baseInfoMap.has(n))return;const i=Date.now(),a=this.createBaseInfo(n,i);a.cname=r.cname;const l=Object.assign({},{willUploadConsoleLog:re("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:$S?"global":"oversea",areas:re("AREAS")&&re("AREAS").join(",")},r.extend),d=Date.now(),p=st(st({},a),{},{eventType:Mr.SESSION_INIT,appid:r.appid,browser:navigator.userAgent,build:BS,lts:d,elapse:d-i,extend:JSON.stringify(l),mode:r.mode,process:re("PROCESS_ID"),appType:re("APP_TYPE"),success:!0,version:Xo});this.send({type:In.SESSION,data:p},!0)}joinChooseServer(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const a=i.info,l=Date.now(),d=st(st({},a),{},{eventType:Mr.JOIN_CHOOSE_SERVER,lts:l,eventElapse:l-r.lts,chooseServerAddr:r.csAddr,errorCode:r.ec,elapse:l-i.startTime,success:r.succ,chooseServerAddrList:JSON.stringify(r.serverList),uid:r.uid?parseInt(r.uid):null,cid:r.cid?parseInt(r.cid):null,chooseServerIp:r.csIp||"",opid:r.opid,unilbsServerIds:r.unilbsServerIds,extend:r.extend||void 0,isHttp3:r.isHttp3});this.send({type:In.JOIN_CHOOSE_SERVER,data:d},!0)}reqUserAccount(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const a=i.info,l=Date.now(),d=st(st({},a),{},{eventType:Mr.REQ_USER_ACCOUNT,lts:l,success:r.success,serverAddress:r.serverAddr,stringUid:r.stringUid,uid:r.uid,errorCode:r.errorCode,elapse:l-i.startTime,eventElapse:l-r.lts,extend:JSON.stringify(r.extend)});this.send({type:In.REQ_USER_ACCOUNT,data:d},!0)}joinGateway(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const a=i.info;r.vid&&(a.vid=r.vid),a.uid=r.uid,a.cid=r.cid;const l=Date.now(),{firstSuccess:d,avoidJoinStartTime:p,isProxy:g,addr:E}=r,C=l-(d&&p?p:i.startTime),S=st(st({},a),{},{eventType:Mr.JOIN_GATEWAY,lts:l,gatewayAddr:r.addr,success:r.succ,errorCode:r.ec,elapse:C,eventElapse:l-r.lts,firstSuccess:d,signalChannel:r.signalChannel}),R=S.success?1:0;if(r.succ&&(i.lastJoinSuccessTime=l),d)this.send({type:In.JOIN_GATEWAY,data:S},!0);else{let k;if(E)if(g){const W=E.match(/h=(\d{1,3}-){3}\d{1,3}/g),G=E.match(/p=[0-9]{1,6}/g);k={isSuccess:R,gatewayIp:W&&W.length?W[0].split("=")[1].replace(/-/g,"."):"",port:G&&G.length?G[0].split("=")[1]:"",isProxy:g?1:0}}else{const W=E.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),G=E.match(/:[0-9]{1,6}/g);k={isSuccess:R,gatewayIp:W&&W.length?W[0].split("//")[1].replace(/-/g,"."):"",port:G&&G.length?G[0].split(":")[1]:"",isProxy:g?1:0}}else k={isSuccess:R,gatewayIp:"",port:"",isProxy:g?1:0};delete S.success,delete S.eventType,delete S.firstSuccess,S.vid=Number(S.vid);const F=Object.assign({},S,k,{eventType:Mr.REJOIN_GATEWAY});this.send({type:In.RE_JOIN_GATEWAY,data:F},!0)}}joinChannelTimeout(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const a=Date.now(),l=st(st({},i.info),{},{lts:a,timeout:r,elapse:a-i.startTime});this.send({type:In.JOIN_CHANNEL_TIMEOUT,data:l},!0)}publish(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const a=i.info,l=Date.now(),d=st(st({},a),{},{eventType:Mr.PUBLISH,lts:l,eventElapse:r.eventElapse,elapse:l-i.startTime,success:r.succ,errorCode:r.ec,videoName:r.videoName,audioName:r.audioName,screenName:r.screenName,screenshare:r.screenshare,audio:r.audio,video:r.video,p2pid:r.p2pid,publishRequestid:r.publishRequestid});this.send({type:In.PUBLISH,data:d},!0)}subscribe(n,r,i){const a=this.baseInfoMap.get(n);if(!a)return;const l=a.info,d=Date.now(),p=st(st({},l),{},{eventType:Mr.SUBSCRIBE,lts:d,eventElapse:r.eventElapse,elapse:d-a.startTime,success:r.succ,errorCode:r.ec,video:r.video,audio:r.audio,subscribeRequestid:r.subscribeRequestid,p2pid:r.p2pid},i&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof r.peerid=="string"?p.peerSuid=r.peerid:p.peer=r.peerid,this.send({type:In.SUBSCRIBE,data:p},!0)}wsCompressorInit(n){var r;const i=[...Ql(r=this.baseInfoMap).call(r)],a=i.length?i[0]:"UnableToGetSid",l=this.baseInfoMap.get(a);if(!l)return;const d=l.info,p=Date.now(),g=st(st({},d),{},{eventType:Mr.WS_COMPRESSOR_INIT,lts:p,eventElapse:n.eventElapse,elapse:p-l.startTime,status:n.status?1:2});this.send({type:In.WS_COMPRESSOR_INIT,data:g},!0)}firstRemoteVideoDecode(n,r,i,a){const l=this.baseInfoMap.get(n);if(!l)return;const d=l.info,p=Date.now(),g=st(st(st({},d),a),{},{elapse:p-l.startTime,eventType:r,lts:p,firstDecodeFrame:Math.max(p-l.startTime,0),apEnd:Math.max(a.apEnd-l.startTime,0),apStart:Math.max(a.apStart-l.startTime,0),joinGwEnd:Math.max(a.joinGwEnd-l.startTime,0),joinGwStart:Math.max(a.joinGwStart-l.startTime,0),pcEnd:Math.max(a.pcEnd-l.startTime,0),pcStart:Math.max(a.pcStart-l.startTime,0),subscriberEnd:Math.max(a.subscriberEnd-l.startTime,0),subscriberStart:Math.max(a.subscriberStart-l.startTime,0),videoAddNotify:Math.max(a.videoAddNotify-l.startTime,0)});this.send({type:i,data:g},!0)}firstRemoteFrame(n,r,i,a){const l=this.baseInfoMap.get(n);if(!l)return;const d=l.info,p=Date.now(),g=st(st(st({},d),a),{},{elapse:p-l.startTime,eventType:r,lts:p});this.send({type:i,data:g},!0)}pcStats(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const a=i.info,l=Date.now(),d=st(st(st({},a),r),{},{vid:a.vid===void 0?0:Number(a.vid),elapse:l-i.startTime,eventType:Mr.PC_STATS,lts:l});this.send({type:In.PC_STATS,data:d},!0)}onGatewayStream(n,r,i,a){const l=this.baseInfoMap.get(n);if(!l)return;const d=l.info,p=Date.now(),g=st(st(st({},d),a),{},{eventType:r,lts:p});this.send({type:i,data:g},!0)}streamSwitch(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const a=i.info,l=Date.now(),d=st(st({},a),{},{eventType:Mr.STREAM_SWITCH,lts:l,isDual:r.isdual,elapse:l-i.startTime,success:r.succ});this.send({type:In.STREAM_SWITCH,data:d},!0)}requestProxyAppCenter(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const a=i.info,l=Date.now(),d=st(st({},a),{},{eventType:Mr.REQUEST_PROXY_APPCENTER,lts:l,eventElapse:l-r.lts,elapse:l-i.startTime,APAddr:r.APAddr,workerManagerList:r.workerManagerList,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:In.REQUEST_PROXY_APPCENTER,data:d},!0)}requestProxyWorkerManager(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const a=i.info,l=Date.now(),d=st(st({},a),{},{eventType:Mr.REQUEST_PROXY_WORKER_MANAGER,lts:l,eventElapse:l-r.lts,elapse:l-i.startTime,workerManagerAddr:r.workerManagerAddr,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:In.REQUEST_PROXY_WORKER_MANAGER,data:d},!0)}setProxyServer(n){this.proxyServer=n,n?M.debug("reportProxyServerurl: ".concat(n)):M.debug("disable reportProxyServerurl: ".concat(n))}peerPublishStatus(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const a=i.info,l=Date.now(),d=st(st({},a),{},{subscribeElapse:r.subscribeElapse,peer:r.peer,peerPublishDuration:Math.max(r.audioPublishDuration,r.videoPublishDuration),audiotag:r.audioPublishDuration>0?1:-1,videotag:r.videoPublishDuration>0?1:-1,lts:l,elapse:l-i.startTime,joinChannelSuccessElapse:l-(i.lastJoinSuccessTime||l),peerPublishDurationVideo:r.videoPublishDuration,peerPublishDurationAudio:r.audioPublishDuration});this.send({type:In.PEER_PUBLISH_STATUS,data:d},!0)}workerEvent(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const a=i.info,l=Date.now();(function(d,p,g){const E=d[p];if(!E||typeof E!="string")return[d];d[p]="";const C=Cd(JSON.stringify(d));let S=0;const R=[];let k=0;for(let F=0;F<E.length;F++)k+=E.charCodeAt(F)<=127?1:3,k<=g-C||(R[R.length]=tu(tu({},d),{},{[p]:E.substring(S,F)}),S=F,k=E.charCodeAt(F)<=127?1:3);return S!==E.length-1&&(R[R.length]=tu(tu({},d),{},{[p]:E.substring(S)})),R})(st(st(st({},a),r),{},{elapse:l-i.startTime,lts:l,productType:"WebRTC"}),"payload",1300).forEach(d=>this.send({type:In.WORKER_EVENT,data:d},!0))}apworkerEvent(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const a=i.info,l=Date.now(),d=st(st(st({},a),r),{},{elapse:l-i.startTime,lts:l});this.send({type:In.AP_WORKER_EVENT,data:d},!0)}joinWebProxyAP(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const a=i.info,l=Date.now(),d=st(st(st({},a),r),{},{elapse:l-i.startTime,lts:l,extend:r.extend||void 0});this.send({type:In.JOIN_WEB_PROXY_AP,data:d},!0)}WebSocketQuit(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const a=i.info,l=Date.now(),d=st(st(st({},a),r),{},{elapse:l-i.startTime,lts:l});this.send({type:In.WEBSOCKET_QUIT,data:d},!0)}async sendCustomReportMessage(n,r){if(this.customReportCount+=r.length,this.customReportCount>re("CUSTOM_REPORT_LIMIT"))throw new q($.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const i=Date.now(),a=r.map(l=>({type:In.USER_ANALYTICS,data:st(st({sid:n},l),{},{lts:i})}));try{re("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(a):await this.postDataToStatsCollector(a)}catch(l){throw M.error("send custom report message failed",l.toString()),new q($.CUSTOM_REPORT_SEND_FAILED,l.message)}}autoplayFailed(n,r,i,a){if(!n)return;const l=this.baseInfoMap.get(n);if(!l)return;const d=l.info,p=Date.now(),g=st(st({},d),{},{vid:d.vid===void 0?0:Number(d.vid),lts:p,elapse:p-l.startTime,cbRegistered:Po.onAutoplayFailed||Po.onAudioAutoplayFailed?1:-1,errorMsg:i,mediaType:r,trackId:a,extend:void 0});this.send({type:In.AUTOPLAY_FAILED,data:g},!0)}sendApiInvoke(n){const r=re("NOT_REPORT_EVENT");if(n.tag&&r.includes&&r.includes(n.tag))return!1;if(n.sid===null)return this.apiInvokeUploadPendingItems.push(n),!1;const i=this.baseInfoMap.get(n.sid);if(!i)return this.apiInvokeUploadPendingItems.push(n),!1;const{cname:a,uid:l,cid:d}=i.info;n.lts=n.lts||Date.now();let p;if(n.error)if(n.error instanceof q){const{code:E,message:C}=n.error;p=E||C||n.error.toString()}else p=n.error.toString();const g={invokeId:n.invokeId,sid:n.sid,cname:a,cid:d,uid:l,lts:n.lts,success:n.success,elapse:n.lts-i.startTime,execElapse:n.lts-n.apiInvokeTime,apiName:n.name,options:n.options?JSON.stringify(n.options):void 0,execStates:n.states?JSON.stringify(n.states):void 0,execResult:n.result?JSON.stringify(n.result):void 0,errorCode:n.error?p:void 0,errorMsg:n.error?JSON.stringify(n.error):void 0};return this.send({type:In.API_INVOKE,data:g},!1),!0}appendSessionId(){this.clientList.forEach(n=>{if(n._sessionId){const r=this.apiInvokeUploadPendingItems.length;for(let i=0;i<r;i++){const a=this.apiInvokeUploadPendingItems.shift();a&&(a.sid=n._sessionId,this.sendApiInvoke(Object.assign({},a)))}}})}send(n,r){if(r)return this.keyEventUploadPendingItems.push(n),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(n),this.normalEventUploadPendingItems.length>re("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(n,r){const i=[],a=[];for(;n.length;){const d=n.shift();i.length<20?i.push(d):a.push(d)}n.push(...a);for(const d of[...i]){var l;this.ltsList.indexOf(d.data.lts)!==-1?(d.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(d.data.lts)):(this.ltsList.push(d.data.lts),qS(l=this.ltsList).call(l,(p,g)=>p-g))}return r||(this.lastSendNormalEventTime=Date.now()),re("ENABLE_EVENT_REPORT")&&i.length&&(re("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(i):this.postDataToStatsCollector(i)).catch((d=>p=>{re("EVENT_REPORT_RETRY")&&(r?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(d):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(d),this.normalEventUploadPendingItems.length>re("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-re("NORMAL_EVENT_QUEUE_CAPACITY")),M.warning("report: drop normal events"))))})(i)),n}async postDataToStatsCollector2(n){er.networkState===li.OFFLINE&&await Ae.race([er.onlineWaiter,Zr(2*Jn.maxRetryTimeout)]);const r=l=>{let d=new Uint8Array;return l.forEach(p=>{const g=my(JSON.stringify(p.data)),E=new ArrayBuffer(5),C=(R=>{let k=0;return Object.entries(In).forEach(F=>{let[W,G]=F;G===R.type&&(k=ey[W])}),k})(p),S=new DataView(E);S.setUint16(0,g.byteLength,!0),S.setUint8(2,255&C),S.setUint8(3,C>>>8&255),S.setUint8(4,C>>>16&255),d=Ix(d,new Uint8Array(E)),d=Ix(d,g)}),d},i="event";let a=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(re("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(i):"https://".concat(re("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(i);for(let l=0;l<2;l+=1){l===1&&(a=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(re("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(i):"https://".concat(re("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(i));try{await Ra(a,{timeout:1e4,data:r(n),headers:st(st({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(d){if(l===1)throw d;continue}return}}async postDataToStatsCollector(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:n.map(d=>JSON.stringify(d)),vid:(d=>{const p=d&&d.data.sid&&this.baseInfoMap.get(d.data.sid);return p&&p.info.vid&&+p.info.vid||0})(n[0])};er.networkState===li.OFFLINE&&await Ae.race([er.onlineWaiter,Zr(2*Jn.maxRetryTimeout)]);const a=r?"/events/proto-raws":"/events/messages";let l=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(re("EVENT_REPORT_DOMAIN"),"&p=").concat(re("STATS_COLLECTOR_PORT"),"&d=").concat(a):"https://".concat(re("EVENT_REPORT_DOMAIN"),":").concat(re("STATS_COLLECTOR_PORT")).concat(a));for(let d=0;d<2;d+=1){d===1&&(l=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(re("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(re("STATS_COLLECTOR_PORT"),"&d=").concat(a):"https://".concat(re("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(re("STATS_COLLECTOR_PORT")).concat(a)));try{r?await sK(l,{timeout:1e4,data:i}):await Ra(l,{timeout:1e4,data:i})}catch(p){if(d===1)throw p;continue}return}}createBaseInfo(n,r){const i=Object.assign({},e9);return i.sid=n,this.baseInfoMap.set(n,{info:i,startTime:r}),i}reportResourceTiming(n,r){const i=performance.getEntriesByName(n),a=i[i.length-1];a&&this.reportApiInvoke(r,{name:"Client.resourceTiming",options:a,tag:Tn.TRACER}).onSuccess()}};f0.on("REPORT_LOG_UPLOAD",n=>{n.networkState=er.networkState,ke.reportApiInvoke(null,{name:"logUploadError",options:n,tag:Tn.TRACER})});class Ox extends Rn{constructor(r,i){super(),w(this,"trackMediaType",void 0),w(this,"_ID",void 0),w(this,"_rtpTransceiver",void 0),w(this,"_lowRtpTransceiver",void 0),w(this,"_hints",[]),w(this,"_isClosed",!1),w(this,"_originMediaStreamTrack",void 0),w(this,"_mediaStreamTrack",void 0),w(this,"_external",{}),this._ID=i||pn(8,"track-"),this._originMediaStreamTrack=r,this._mediaStreamTrack=r,function(a){fp.includes(a)||fp.push(a)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(r){if(!r){const i=ke.reportApiInvoke(null,{name:Qn.GET_MEDIA_STREAM_TRACK,options:[],tag:Tn.TRACER});this._mediaStreamTrack&&typeof this._mediaStreamTrack.label=="string"?i.onSuccess(this._mediaStreamTrack.label):i.onSuccess("")}return this._mediaStreamTrack}getRTCRtpTransceiver(r){return r===md.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(r){const i=fp.indexOf(r);i!==-1&&fp.splice(i,1)}(this),this.emit(Wc.CLOSED)}_updateRtpTransceiver(r,i){if(i===md.LOW_STREAM){if(this._lowRtpTransceiver===r)return;this._lowRtpTransceiver=r}else{if(this._rtpTransceiver===r)return;this._rtpTransceiver=r}this.emit(vp.TRANSCEIVER_UPDATED,r,i)}}let _r,lK=1;class bi{constructor(r){w(this,"lockingPromise",Ae.resolve()),w(this,"locks",0),w(this,"name",""),w(this,"lockId",void 0),this.lockId=lK++,r&&(this.name=r),M.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(r){let i;this.locks+=1,M.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat(typeof r=="string"?r:""));const a=new Ae(d=>{i=()=>{this.locks-=1,M.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat(typeof r=="string"?r:"")),d()}}),l=this.lockingPromise.then(()=>i);return this.lockingPromise=this.lockingPromise.then(()=>a),l}}function vd(n,r){return function(i,a,l){const d=l.value;if(typeof d!="function")throw new Error("Cannot use mutex on object property.");return l.value=async function(){const p=this[r];if(!p)throw new Error("mutex property key ".concat(r," doesn't exist on ").concat(n));const g=await p.lock("From ".concat(n,".").concat(a));try{for(var E=arguments.length,C=new Array(E),S=0;S<E;S++)C[S]=arguments[S];return await d.apply(this,C)}finally{g()}},l}}class gy extends Ox{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}set processorContext(r){this._processorContext=r}constructor(r,i){super(r,i),w(this,"_enabled",!0),w(this,"_muted",!1),w(this,"_isExternalTrack",!1),w(this,"_isClosed",!1),w(this,"_enabledMutex",void 0),w(this,"processor",void 0),w(this,"_processorContext",void 0),w(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new bi("".concat(this.getTrackId())),r.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var r,i;return(r=(i=this._originMediaStreamTrack)===null||i===void 0?void 0:i.label)!==null&&r!==void 0?r:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,M.debug("[".concat(this.getTrackId(),"] close")),this.emit(Xe.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(r,i){let a=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this._isExternalTrack=a,r!==this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),i&&this._originMediaStreamTrack.stop(),r.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=r,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mn(this,Xe.NEED_REPLACE_TRACK,this),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){M.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Wc.TRACK_ENDED)}stateCheck(r,i){if(M.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(r,": ").concat(i,"]")),hd(i,r),this._enabled&&this._muted&&r==="enabled"&&i===!1)throw new q($.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&r==="muted"&&i===!0)throw new q($.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}function Ax(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}(function(n){n.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",n.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",n.IOS_INTERRUPTION_START="ios-interruption-start",n.IOS_INTERRUPTION_END="ios-interruption-end",n.STATE_CHANGE="state-change"})(_r||(_r={}));const Nx=window.AudioContext||window.webkitAudioContext;let Do=null;const Gt=new class extends Rn{constructor(){super(...arguments),w(this,"prevState",void 0),w(this,"curState",void 0),w(this,"currentTime",void 0),w(this,"currentTimeStuckAt",void 0),w(this,"interruptDetectorTrack",void 0),w(this,"onLocalAudioTrackMute",()=>{M.info("ios15-interruption-start"),this.emit(_r.IOS_15_16_INTERRUPTION_START)}),w(this,"onLocalAudioTrackUnmute",async()=>{M.info("ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?M.info("ios15-interruption-end-canceled"):(Do&&await Do.suspend(),this.emit(_r.IOS_15_16_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(n){M.debug("webaudio bindInterruptDetectorTrack ".concat(n.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=n,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(n){M.debug("webaudio unbindInterruptDetectorTrack ".concat(n.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===n&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function uK(){if(!Nx)return void M.error("your browser is not support web audio");M.info("create audio context");const n=function(r){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?Ax(Object(a),!0).forEach(function(l){w(r,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):Ax(Object(a)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(a,l))})}return r}({},re("WEBAUDIO_INIT_OPTIONS"));M.debug("audio context init option:",JSON.stringify(n)),Do=new Nx(n),Gt.curState=Do.state,Do.onstatechange=()=>{Gt.prevState=Gt.curState,Gt.curState=Do?Do.state:void 0;const{prevState:r,curState:i}=Gt,a=i==="running",l=i==="interrupted",d=r==="running",p=r==="suspended",g=r==="interrupted",E=Ht().osVersion;(yi()||Is())&&d&&l&&(M.info("ios".concat(E,"-interruption-start")),Gt.emit(_r.IOS_INTERRUPTION_START)),(yi()||Is())&&(p||g)&&a&&(M.info("ios".concat(E,"-interruption-end")),Gt.emit(_r.IOS_INTERRUPTION_END)),r!==i&&(M.debug("AudioContext State Change","".concat(r,"=>").concat(i)),Gt.emit(_r.STATE_CHANGE))},setInterval(()=>{var r;const i=(r=Do)===null||r===void 0?void 0:r.currentTime;Gt.currentTime!==i?(Gt.currentTimeStuckAt&&(M.debug("AudioContext current time resume at ".concat(i)),Gt.currentTimeStuckAt=void 0),Gt.currentTime=i):(i!==Gt.currentTimeStuckAt&&(ke.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:i},tag:Tn.TRACER}).onSuccess(),M.warning("AudioContext current time stuck at ".concat(i))),Gt.currentTimeStuckAt=i)},5e3),async function(r){const i=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let a,l=!1,d=!1,p=!1;function g(z){r.state==="running"?E(!1):yi()||Is()?r.state==="suspended"&&(E(!0),z&&r.resume().then(S,S)):r.state!=="closed"&&(E(!0),z&&r.resume().then(S,S))}function E(z){if(l!==z){l=z;for(let oe=0,ce=i;oe<ce.length;oe+=1){const ye=ce[oe];z?window.addEventListener(ye,R,{capture:!0,passive:!0}):window.removeEventListener(ye,R,{capture:!0,passive:!0})}}}function C(){g(!0)}function S(){g(!1)}function R(){g(!0)}function k(z){if(!p)if(a.paused)if(z){F(!1),p=!0;let oe;try{oe=a.play(),oe?oe.then(W,W):(a.addEventListener("playing",W),a.addEventListener("abort",W),a.addEventListener("error",W))}catch{W()}}else F(!0);else F(!1)}function F(z){if(d!==z){d=z;for(let oe=0,ce=i;oe<ce.length;oe++){const ye=ce[oe];z?window.addEventListener(ye,G,{capture:!0,passive:!0}):window.removeEventListener(ye,G,{capture:!0,passive:!0})}}}function W(){a.removeEventListener("playing",W),a.removeEventListener("abort",W),a.removeEventListener("error",W),p=!1,k(!1)}function G(){k(!0)}if(yi()){const z=r.createMediaStreamDestination(),oe=document.createElement("div");oe.innerHTML="<audio x-webkit-airplay='deny'></audio>",a=oe.children.item(0),a.controls=!1,a.disableRemotePlayback=!0,a.preload="auto",a.srcObject=z.stream,k(!0)}Gt.on(_r.STATE_CHANGE,C),g(!1)}(Do)}function Ed(){if(!Do){if(uK(),!Do)throw new q($.NOT_SUPPORTED,"can not create audio context");return Do}return Do}function xx(){return!!Do}function Zl(n){if(function(){if(vy!==null)return vy;const a=Ed(),l=a.createBufferSource(),d=a.createGain(),p=a.createGain();l.connect(d),l.connect(p),l.disconnect(d);let g=!1;try{l.disconnect(d)}catch{g=!0}return l.disconnect(),vy=g,g}())return;const r=n.connect,i=n.disconnect;n.connect=(a,l,d)=>(n._inputNodes||(n._inputNodes=[]),n._inputNodes.includes(a)||(a instanceof AudioNode?(n._inputNodes.push(a),r.call(n,a,l,d)):r.call(n,a,l)),n),n.disconnect=(a,l,d)=>{i.call(n),a?Iy(n._inputNodes,a):n._inputNodes=[];for(const p of n._inputNodes)r.call(n,p)}}let vy=null;function Px(n,r){let i=!1;const a=1/r;if(re("DISABLE_WEBAUDIO")){const l=window.setInterval(()=>{i?window.clearInterval(l):n(performance.now()/1e3)},1e3*a)}else{const l=Ed();let d=l.createGain();d.gain.value=0,d.connect(l.destination);const p=()=>{if(i)return void(d=null);const g=l.createOscillator();g.onended=p,g.connect(d),g.start(0),g.stop(l.currentTime+a),n(l.currentTime)};p()}return()=>{i=!0}}class Dx{constructor(){w(this,"context",void 0),w(this,"analyserNode",void 0),w(this,"sourceNode",void 0),this.context=Ed(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(r){if(r!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch{}this.sourceNode=r,r==null||r.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||yi()||Is()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode))return 0;const r=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(r);else{const a=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(a);for(let l=0;l<r.length;++l)r[l]=a[l]/128-1}const i=Uc(r).call(r,(a,l)=>a+l*l,0)/r.length;return Math.max(10*Math.log10(i)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var r,i;(r=this.sourceNode)===null||r===void 0||r.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,(i=this.sourceNode)===null||i===void 0||i.connect(this.analyserNode)}catch{M.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class kx extends Rn{get processSourceNode(){return this.sourceNode}set processedNode(r){var i;if(!this.isDestroyed&&this._processedNode!==r){try{var a;(a=this.sourceNode)===null||a===void 0||a.disconnect(this.outputNode)}catch{}(i=this._processedNode)===null||i===void 0||i.disconnect(),this._processedNode=r,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),w(this,"outputNode",void 0),w(this,"outputTrack",void 0),w(this,"isPlayed",!1),w(this,"sourceNode",void 0),w(this,"context",void 0),w(this,"audioBufferNode",void 0),w(this,"destNode",void 0),w(this,"audioOutputLevel",0),w(this,"volumeLevelAnalyser",void 0),w(this,"_processedNode",void 0),w(this,"playNode",void 0),w(this,"isDestroyed",!1),w(this,"onNoAudioInput",void 0),w(this,"isNoAudioInput",!1),w(this,"_noAudioInputCount",0),this.context=Ed(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),Zl(this.outputNode),this.volumeLevelAnalyser=new Dx}startGetAudioBuffer(r){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(r),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=i=>{this.emit(qi.ON_AUDIO_BUFFER,function(a){for(let l=0;l<a.outputBuffer.numberOfChannels;l+=1){const d=a.outputBuffer.getChannelData(l);for(let p=0;p<d.length;p+=1)d[p]=0}return a.inputBuffer}(i))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Gn().webAudioMediaStreamDest)throw new q($.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(r){this.context.state!=="running"&&ns(()=>{Gt.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=r||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(r>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;yi()||Is()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume();const i=this.volumeLevelAnalyser.getAnalyserNode();let a;i.getFloatTimeDomainData?(a=new Float32Array(i.fftSize),i.getFloatTimeDomainData(a)):(a=new Uint8Array(i.fftSize),i.getByteTimeDomainData(a));let l=!1;for(let d=0;d<a.length;d++)a[d]!==0&&(l=!0);return l?(this.isNoAudioInput=!1,!0):(await Zr(200),await this.checkHasAudioInput(r?r+1:1)&&l)}getAudioVolume(){return this.outputNode.gain.value}setVolume(r){this.outputNode.gain.setValueAtTime(r,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var r,i;(r=this.processedNode)===null||r===void 0||r.disconnect(),(i=this.sourceNode)===null||i===void 0||i.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var r;this.processedNode?(r=this.processedNode)===null||r===void 0||r.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class Ey extends kx{get isFreeze(){return!1}constructor(r,i,a){var l;if(super(),w(this,"sourceNode",void 0),w(this,"track",void 0),w(this,"clonedTrack",void 0),w(this,"audioElement",void 0),w(this,"isCurrentTrackCloned",!1),w(this,"isRemoteTrack",!1),w(this,"originVolumeLevelAnalyser",void 0),w(this,"rebuildWebAudio",async()=>{if(M.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void M.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>M.info("resume success")),M.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const g=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?g.stop():this.isCurrentTrackCloned=!0;const E=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(E),Zl(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const C=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(C,this.context.currentTime),Zl(this.outputNode),this.emit(qi.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=E,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),r.kind!=="audio")throw new q($.UNEXPECTED_ERROR);this.track=r;const d=new MediaStream([this.track]);if(this.isRemoteTrack=!!i,this.sourceNode=this.context.createMediaStreamSource(d),Zl(this.sourceNode),a){const g=a.clone();g.enabled=!0,this.clonedTrack=g,M.debug("create an unmuted track ".concat(g.id," from the original track ").concat(a.id," to get the volume"));const E=this.context.createMediaStreamSource(new MediaStream([g]));Zl(E),this.originVolumeLevelAnalyser=new Dx,this.originVolumeLevelAnalyser.updateSource(E)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=d;const p=Ht();i&&p.os===zr.IOS&&Number((l=p.osVersion)===null||l===void 0?void 0:l.split(".")[0])<15&&(Gt.on(_r.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(g=>{g||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(r){this.sourceNode.disconnect(),this.track=r,this.isCurrentTrackCloned=!1;const i=new MediaStream([r]);this.sourceNode=this.context.createMediaStreamSource(i),Zl(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(qi.UPDATE_SOURCE),this.audioElement.srcObject=i}destroy(){var r;this.audioElement.srcObject=null,this.audioElement.remove(),Gt.off("state-change",this.rebuildWebAudio),(r=this.originVolumeLevelAnalyser)===null||r===void 0||r.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(r){return this.context.createMediaStreamSource(new MediaStream([r]))}updateOriginTrack(r){const i=r.clone();i.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=i),M.debug("create an unmuted track ".concat(i.id," from the original track ").concat(r.id," to get the volume"));const a=this.context.createMediaStreamSource(new MediaStream([i]));Zl(a),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(a)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function Lx(n,r){const i=(l,d)=>l?typeof l!="number"?l.max||l.exact||l.ideal||l.min||d:l:d,a={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxHeight:i(r.height,1080),maxWidth:i(r.width,1920)}}};return r.frameRate&&typeof r.frameRate!="number"?(a.video.mandatory.maxFrameRate=r.frameRate.max,a.video.mandatory.minFrameRate=r.frameRate.min):typeof r.frameRate=="number"&&(a.video.mandatory.maxFrameRate=r.frameRate),await navigator.mediaDevices.getUserMedia(a)}async function dK(n){const r=await Mx(n.mediaSource),i=await function(a){return new Ae((l,d)=>{const p=document.createElement("div");p.innerText="share screen",p.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const g=document.createElement("div");g.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const E=document.createElement("div");E.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",E.setAttribute("style","height: 12%;");const C=document.createElement("div");C.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const S=document.createElement("div");S.setAttribute("style","text-align: right; padding: 16px 0;");const R=document.createElement("button");R.innerHTML="cancel",R.setAttribute("style","width: 85px;"),R.onclick=()=>{document.body.removeChild(k);const F=new Error("NotAllowedError");F.name="NotAllowedError",d(F)},S.appendChild(R),g.appendChild(E),g.appendChild(C),g.appendChild(S);const k=document.createElement("div");k.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),k.appendChild(p),k.appendChild(g),document.body.appendChild(k),a.map(F=>{if(F.id){const W=document.createElement("div");W.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let G=F.thumbnail;const{width:z}=G.getSize();z>1920&&(G=G.resize({width:1920})),W.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+G.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+(F.name.replace(/[\u00A0-\u9999<>\&]/g,function(oe){return"&#"+oe.charCodeAt(0)+";"})+"</span>"),W.onclick=()=>{document.body.removeChild(k),l(F.id)},C.appendChild(W)}})})}(r);return await Lx(i,n)}async function Mx(n){let r=["window","screen"];n!=="application"&&n!=="window"||(r=["window"]),n==="screen"&&(r=["screen"]);const i=Ux();if(!i)throw new q($.ELECTRON_IS_NULL);let a=null;try{var l;a=((l=i.desktopCapturer)===null||l===void 0?void 0:l.getSources({types:r}))||i.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:r})}catch{a=null}a&&a.then||(a=new Ae((d,p)=>{i.desktopCapturer.getSources({types:r},(g,E)=>{g?p(g):d(E)})}));try{return await a}catch(d){throw new q($.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,d.toString())}}let C0=null;function Ux(){if(C0)return C0;try{return C0=window.require("electron"),C0}catch{return null}}function Fx(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}const _y=new bi("safari");let Vx=!1,jx=!1;async function Ia(n,r){let i=0,a=null;for(;i<2;)try{a=await hK(n,r,i>0);break}catch(l){if(l instanceof q)throw M.error("[".concat(r,"] ").concat(l.toString())),l;const d=T0(l.name||l.code||l,l.message);if(d.code===$.MEDIA_OPTION_INVALID){M.debug("[".concat(r,"] detect media option invalid, retry")),i+=1,await Zr(500);continue}throw M.error("[".concat(r,"] ").concat(d.toString())),d}if(!a)throw new q($.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return a}async function hK(n,r,i){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new q($.NOT_SUPPORTED,"can not find getUserMedia");i&&(n.video&&(delete n.video.width,delete n.video.height),n.screen&&(delete n.screen.width,delete n.screen.height));const a=Gn(),l=new MediaStream;if(n.audioSource&&l.addTrack(n.audioSource),n.videoSource&&l.addTrack(n.videoSource),!n.audio&&!n.video&&!n.screen)return M.debug("Using Video Source/ Audio Source"),l;if(n.screen)if(Ux())n.screen.sourceId?_d(l,await Lx(n.screen.sourceId,n.screen)):_d(l,await dK(n.screen));else if(yS()&&n.screen.extensionId&&n.screen.mandatory){if(!a.getStreamFromExtension)throw new q($.NOT_SUPPORTED,"This browser does not support screen sharing");M.debug("[".concat(r,'] Screen access on chrome stable, looking for extension"'));const k=await(p=n.screen.extensionId,g=r,new Ae((F,W)=>{try{chrome.runtime.sendMessage(p,{getStream:!0},G=>{if(!G||!G.streamId)return M.error("[".concat(g,"] No response from Chrome Plugin. Plugin not installed properly"),G),void W(new q($.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));F(G.streamId)})}catch(G){M.error("[".concat(g,"] AgoraRTC screensharing plugin is not accessible(").concat(p,")"),G.toString()),W(new q($.CHROME_PLUGIN_NOT_INSTALL))}}));n.screen.mandatory.chromeMediaSourceId=k,_d(l,await navigator.mediaDevices.getUserMedia({video:{mandatory:n.screen.mandatory}}))}else if(a.getDisplayMedia){var d;n.screen.mediaSource&&lx(n.screen.mediaSource);const k={width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate,displaySurface:(d=n.screen.displaySurface)!==null&&d!==void 0?d:n.screen.mediaSource==="screen"?"monitor":n.screen.mediaSource},{selfBrowserSurface:F,surfaceSwitching:W,systemAudio:G}=n.screen,z={selfBrowserSurface:F,surfaceSwitching:W,systemAudio:G};!F&&delete z.selfBrowserSurface,!W&&delete z.surfaceSwitching,!G&&delete z.systemAudio,M.debug("[".concat(r,"] getDisplayMedia:"),JSON.stringify({video:k,audio:!!n.screenAudio,controls:z})),_d(l,await navigator.mediaDevices.getDisplayMedia(function(oe){for(var ce=1;ce<arguments.length;ce++){var ye=arguments[ce]!=null?arguments[ce]:{};ce%2?Fx(Object(ye),!0).forEach(function(Ne){w(oe,Ne,ye[Ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(oe,Object.getOwnPropertyDescriptors(ye)):Fx(Object(ye)).forEach(function(Ne){Object.defineProperty(oe,Ne,Object.getOwnPropertyDescriptor(ye,Ne))})}return oe}({video:k,audio:!!n.screenAudio},z)))}else{if(!Dn())throw M.error("[".concat(r,"] This browser does not support screenSharing")),new q($.NOT_SUPPORTED,"This browser does not support screen sharing");{n.screen.mediaSource&&lx(n.screen.mediaSource);const k={video:{mediaSource:n.screen.mediaSource,width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate}};M.debug("[".concat(r,"] getUserMedia: ").concat(JSON.stringify(k))),_d(l,await navigator.mediaDevices.getUserMedia(k))}}var p,g;if(!n.video&&!n.audio)return l;let E={video:n.video,audio:n.audio},C=re("MEDIA_DEVICE_CONSTRAINTS");if(C)try{typeof C=="string"&&(C=JSON.parse(C)),E=function k(F,W){if(!WP(F)||!WP(W)||Array.isArray(F)&&!Array.isArray(W)||!Array.isArray(F)&&Array.isArray(W))return W;if(Array.isArray(W)&&Array.isArray(F)){const G=[...F];for(let z=0;z<W.length;z++)G[z]=k(F[z],W[z]);return G}{const G=tu({},F);for(const z in W)Object.prototype.hasOwnProperty.call(W,z)&&(Object.prototype.hasOwnProperty.call(F,z)?G[z]=k(F[z],W[z]):G[z]=W[z]);return G}}(E,C)}catch{}M.debug("[".concat(r,"] GetUserMedia"),JSON.stringify(E)),Ht();let S,R=null;(Si()||yi()||i0())&&(R=await _y.lock());try{S=await navigator.mediaDevices.getUserMedia(E)}catch(k){throw R&&R(),k}return E.audio&&(Vx=!0),E.video&&(jx=!0),_d(l,S),R&&R(),l}function T0(n,r){switch(n){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new q($.MEDIA_OPTION_INVALID,"".concat(n,": ").concat(r));case"NotFoundError":case"DevicesNotFoundError":return new q($.DEVICE_NOT_FOUND,"".concat(n,": ").concat(r));case"NotSupportedError":return new q($.NOT_SUPPORTED,"".concat(n,": ").concat(r));case"NotReadableError":return new q($.NOT_READABLE,"".concat(n,": ").concat(r));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new q($.PERMISSION_DENIED,"".concat(n,": ").concat(r));case"ConstraintNotSatisfiedError":return new q($.CONSTRAINT_NOT_SATISFIED,"".concat(n,": ").concat(r));default:return M.error("getUserMedia unexpected error",n),new q($.UNEXPECTED_ERROR,"".concat(n,": ").concat(r))}}function _d(n,r){const i=n.getVideoTracks()[0],a=n.getAudioTracks()[0],l=r.getVideoTracks()[0],d=r.getAudioTracks()[0];d&&(a&&n.removeTrack(a),n.addTrack(d)),l&&(i&&n.removeTrack(i),n.addTrack(l))}const ko=new class extends Rn{get state(){return this._state}set state(n){n!==this._state&&(this.emit(ic.STATE_CHANGE,n),this._state=n)}constructor(){super(),w(this,"_state",Jl.IDLE),w(this,"isAccessMicrophonePermission",!1),w(this,"isAccessCameraPermission",!1),w(this,"lastAccessMicrophonePermission",!1),w(this,"lastAccessCameraPermission",!1),w(this,"checkdeviceMatched",!1),w(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(re("ENUMERATE_DEVICES_INTERVAL")||(o0()||JA()===zr.HARMONY_OS)&&Gl())&&this.updateDevicesInfo()},re("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(n=>M.error(n.toString()))}async enumerateDevices(n,r){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new q($.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const a=await navigator.mediaDevices.enumerateDevices(),l=this.checkMediaDeviceInfoIsOk(a);let d=!this.isAccessMicrophonePermission&&n,p=!this.isAccessCameraPermission&&r;l.audio&&(d=!1),l.video&&(p=!1);let g=null,E=null,C=null;if(!i&&(d||p)){if(_y.isLocked&&(M.debug("[device manager] wait GUM lock"),(await _y.lock())(),M.debug("[device manager] GUM unlock")),Vx&&(d=!1,this.isAccessMicrophonePermission=!0),jx&&(p=!1,this.isAccessCameraPermission=!0),M.debug("[device manager] check media device permissions",n,r,d,p),d&&p){try{C=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(S){const R=T0(S.name||S.code||S,S.message);if(R.code===$.PERMISSION_DENIED)throw R;M.warning("getUserMedia failed in getDevices",R)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(d){try{g=await navigator.mediaDevices.getUserMedia({audio:n})}catch(S){const R=T0(S.name||S.code||S,S.message);if(R.code===$.PERMISSION_DENIED)throw R;M.warning("getUserMedia failed in getDevices",R)}this.isAccessMicrophonePermission=!0}else if(p){try{E=await navigator.mediaDevices.getUserMedia({video:r})}catch(S){const R=T0(S.name||S.code||S,S.message);if(R.code===$.PERMISSION_DENIED)throw R;M.warning("getUserMedia failed in getDevices",R)}this.isAccessCameraPermission=!0}M.debug("[device manager] mic permission",n,"cam permission",r)}try{const S=await navigator.mediaDevices.enumerateDevices();return g&&g.getTracks().forEach(R=>R.stop()),E&&E.getTracks().forEach(R=>R.stop()),C&&C.getTracks().forEach(R=>R.stop()),g=null,E=null,C=null,S}catch(S){return g&&g.getTracks().forEach(R=>R.stop()),E&&E.getTracks().forEach(R=>R.stop()),C&&C.getTracks().forEach(R=>R.stop()),g=null,E=null,C=null,new q($.ENUMERATE_DEVICES_FAILED,S.toString()).throw()}}async getRecordingDevices(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,n)).filter(r=>r.kind==="audioinput")}async getCamerasDevices(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,n)).filter(r=>r.kind==="videoinput")}async getSpeakers(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,n)).filter(r=>r.kind==="audiooutput")}searchDeviceIdByName(n){let r=null;return this.deviceInfoMap.forEach(i=>{i.device.label===n&&(r=i.device.deviceId)}),r}async getDeviceById(n){const r=(await this.enumerateDevices(!0,!0,!0)).find(i=>i.deviceId===n);if(!r)throw new q($.DEVICE_NOT_FOUND,"deviceId: ".concat(n));return r}async init(){this.state=Jl.INITING;try{await this.updateDevicesInfo(),this.state=Jl.INITEND}catch(n){throw M.warning("Device Detection functionality cannot start properly.",n.toString()),this.state=Jl.IDLE,!function(){return typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1"}()&&new q($.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),n}}async updateDevicesInfo(){const n=await this.enumerateDevices(!0,!0,!0),r=Date.now(),i=[];if(n[0]&&n[0].label&&this.checkdeviceMatched===!1){this.checkdeviceMatched=!0;const l=n.find(p=>p.kind==="audioinput"&&p.deviceId==="default"),d=n.find(p=>p.kind==="audiooutput"&&p.deviceId==="default");l&&d?d.groupId===l.groupId?M.debug("[device-check] default input ".concat(l.label," and output ").concat(d.label," is the same group")):M.warning("[device-check] default input ".concat(l.label," and output ").concat(d.label," is not the same group")):M.debug("[device-check] default input or output not found")}const a=this.checkMediaDeviceInfoIsOk(n);if(n.forEach(l=>{if(!l.deviceId)return;const d=this.deviceInfoMap.get("".concat(l.kind,"_").concat(l.deviceId));if((d?d.state:"INACTIVE")!=="ACTIVE"){const p={initAt:r,updateAt:r,device:l,state:"ACTIVE"};this.deviceInfoMap.set("".concat(l.kind,"_").concat(l.deviceId),p),i.push(p)}d&&(d.updateAt=r)}),this.deviceInfoMap.forEach((l,d)=>{l.state==="ACTIVE"&&l.updateAt!==r&&(l.state="INACTIVE",i.push(l))}),this.state!==Jl.INITEND)return a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));i.forEach(l=>{switch(l.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(ic.RECORDING_DEVICE_CHANGED,l);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(ic.CAMERA_DEVICE_CHANGED,l);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(ic.PLAYOUT_DEVICE_CHANGED,l)}}),a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(n){const r=n.filter(l=>l.kind==="audioinput"),i=n.filter(l=>l.kind==="videoinput"),a={audio:!1,video:!1};for(const l of r)if(l.label&&l.deviceId){a.audio=!0;break}for(const l of i)if(l.label&&l.deviceId){a.video=!0;break}return a}},pK=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],fo=new class{constructor(){w(this,"onAutoplayFailed",void 0),w(this,"elementMap",new Map),w(this,"elementStateMap",new Map),w(this,"elementsNeedToResume",[]),w(this,"sinkIdMap",new Map),w(this,"autoResumeAfterInterruption",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[r,i]=n;const a=this.elementStateMap.get(r),l=i.srcObject.getAudioTracks()[0];id()?l&&l.readyState==="live"&&Gt.curState==="running"&&(M.debug("auto resume after interruption for iOS 15"),i.pause(),i.play()):a&&a==="paused"&&l&&l.readyState==="live"&&Gt.curState==="running"&&(M.debug("auto resume after interruption for iOS"),i.play())})}),w(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[r,i]=n;const a=i.srcObject.getAudioTracks()[0];a&&a.readyState==="live"&&(M.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),i.pause(),i.play())})}),this.autoResumeAudioElement(),Gt.on(_r.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Gt.on(_r.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),Gt.on(_r.STATE_CHANGE,()=>{yi()&&Gt.prevState==="suspended"&&Gt.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(n,r){const i=this.elementMap.get(n);if(this.sinkIdMap.set(n,r),i)try{await i.setSinkId(r)}catch(a){throw new q($.PERMISSION_DENIED,"can not set sink id: "+a.toString())}}play(n,r,i,a){if(this.elementMap.has(r))return;const l=document.createElement("audio");l.autoplay=!0,l.srcObject=new MediaStream([n]),this.bindAudioElementEvents(r,l),this.elementMap.set(r,l),this.elementStateMap.set(r,Yr.INIT),this.setVolume(r,i);const d=this.sinkIdMap.get(r);if(d)try{l.setSinkId(d).catch(g=>{M.warning("[".concat(r,"] set sink id failed"),g.toString())})}catch(g){M.warning("[".concat(r,"] set sink id failed"),g.toString())}const p=l.play();p&&p.then&&p.catch(g=>{a&&ke.autoplayFailed(a,"audio",g.message,r),M.warning("audio element play warning",g.toString()),this.elementMap.has(r)&&g.name==="NotAllowedError"&&(M.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(l),ns(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),Rx()}))})}updateTrack(n,r){const i=this.elementMap.get(n);i&&(i.srcObject=new MediaStream([r]))}isPlaying(n){return this.elementMap.has(n)&&this.elementStateMap.get(n)==="playing"}setVolume(n,r){const i=this.elementMap.get(n);i&&(r=Math.max(0,Math.min(100,r)),i.volume=r/100)}stop(n){const r=this.elementMap.get(n);if(this.sinkIdMap.delete(n),!r)return;const i=this.elementsNeedToResume.indexOf(r);this.elementsNeedToResume.splice(i,1),r.srcObject=null,r.remove(),this.elementMap.delete(n),this.elementStateMap.delete(n)}bindAudioElementEvents(n,r){pK.forEach(i=>{r.addEventListener(i,a=>{const l=this.elementStateMap.get(n),d=a.type==="pause"?"paused":a.type;if(M.debug("[".concat(n,"] audio-element-status change ").concat(l," => ").concat(d)),a.type==="error"){const p=r==null?void 0:r.error;p&&M.error("[".concat(n,"] media error, code: ").concat(p.code,", message: ").concat(p.message))}this.elementStateMap.set(n,d)})})}getPlayerState(n){return this.elementStateMap.get(n)||"uninit"}autoResumeAudioElement(){const n=()=>{this.elementsNeedToResume.forEach(r=>{r.play().then(i=>{M.debug("Auto resume audio element success")}).catch(i=>{M.warning("Auto resume audio element failed!",i)})}),this.elementsNeedToResume=[]};new Ae(r=>{document.body?r():window.addEventListener("load",()=>r())}).then(()=>{dp()?document.body.addEventListener("click",n,!0):(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0))})}};function Ln(){return function(n,r,i){const a=i.value;return typeof a=="function"&&(i.value=function(){this._isClosed&&new q($.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var l=arguments.length,d=new Array(l),p=0;p<l;p++)d[p]=arguments[p];const g=a.apply(this,d);return g instanceof Ae?new Ae((E,C)=>{g.then(E).catch(C)}):g}),i}}var fK=Mc("Array").values,mK=Fc,gK=Xn,vK=T,EK=fK,Sy=Array.prototype,_K={DOMTokenList:!0,NodeList:!0},Os=function(n){var r=n.values;return n===Sy||vK(Sy,n)&&r===Sy.values||gK(_K,mK(n))?EK:r};function Bx(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function b0(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Bx(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Bx(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}class $x extends Rn{constructor(r){super(),w(this,"name","VideoProcessorDestination"),w(this,"ID","0"),w(this,"_source",void 0),w(this,"videoContext",void 0),w(this,"inputTrack",void 0),this.videoContext=r}get kind(){return"video"}get enabled(){return!0}pipe(){throw new q($.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new q($.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(r){if(r.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);r.track&&r.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=r.track,this.emit(Jr.ON_TRACK,r.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(Jr.ON_TRACK,void 0)}}class Hx extends Rn{set chained(r){this._chained=r}get chained(){return this._chained}constructor(r,i){super(),w(this,"constraintsMap",new Map),w(this,"statsRegistry",[]),w(this,"usageRegistry",[]),w(this,"trackId",void 0),w(this,"direction",void 0),w(this,"_chained",!1),this.trackId=r,this.direction=i}async getConstraints(){return await ei(this,Xi.REQUEST_CONSTRAINTS)}async requestApplyConstraints(r,i){var a;return M.info("processor ".concat(i.name," requestApplyConstraints for ").concat(this.trackId)),r&&this.constraintsMap.set(i,r),Mn(this,Xi.REQUEST_UPDATE_CONSTRAINTS,Array.from(Os(a=this.constraintsMap).call(a)))}async requestRevertConstraints(r){var i;if(this.constraintsMap.has(r))return M.info("processor ".concat(r.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(r),Mn(this,Xi.REQUEST_UPDATE_CONSTRAINTS,Array.from(Os(i=this.constraintsMap).call(i)))}registerStats(r,i,a){this.statsRegistry.find(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===i)||this.statsRegistry.push({processorName:r.name,processorID:r.ID,type:i,cb:a})}unregisterStats(r,i){const a=this.statsRegistry.findIndex(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===i);a!==-1&&this.statsRegistry.splice(a,1)}gatherStats(){const r=[];for(const{processorID:i,processorName:a,type:l,cb:d}of this.statsRegistry)try{const p=d();r.push({processorID:i,processorName:a,type:l,stats:p})}catch(p){M.error(new q($.UNEXPECTED_ERROR,p.message))}return r}registerUsage(r,i){this.usageRegistry.find(a=>a.processorID===r.ID&&a.processorName===r.name)||this.usageRegistry.push({processorID:r.ID,processorName:r.name,cb:i})}unregisterUsage(r){const i=this.usageRegistry.findIndex(a=>a.processorID===r.ID&&a.processorName===r.name);i!==-1&&this.usageRegistry.splice(i,1)}async gatherUsage(){const r=[];if(!this.chained)return[];for(const{cb:i}of this.usageRegistry)try{let a=i();a instanceof Ae&&(a=await a),r.push(b0(b0({},a),{},{direction:this.direction}))}catch(a){M.error("gather extension usage error",a)}return r}getDirection(){return this.direction}}class Wx extends Rn{constructor(r){super(),w(this,"name","AudioProcessorDestination"),w(this,"ID","0"),w(this,"inputTrack",void 0),w(this,"inputNode",void 0),w(this,"audioProcessorContext",void 0),w(this,"_source",void 0),this.audioProcessorContext=r}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new q($.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new q($.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(Jr.ON_TRACK,void 0),this.emit(Jr.ON_NODE,void 0)}updateInput(r){if(r.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);r.track&&this.inputTrack!==r.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=r.track,this.emit(Jr.ON_TRACK,this.inputTrack)),r.node&&this.inputNode!==r.node&&(this.audioProcessorContext.chained=!0,this.inputNode=r.node,this.emit(Jr.ON_NODE,this.inputNode))}}class Gx extends Rn{set chained(r){this._chained=r}get chained(){return this._chained}constructor(r,i,a){super(),w(this,"constraintsMap",new Map),w(this,"statsRegistry",[]),w(this,"audioContext",void 0),w(this,"trackId",void 0),w(this,"direction",void 0),w(this,"usageRegistry",[]),w(this,"_chained",!1),this.audioContext=r,this.trackId=i,this.direction=a}async getConstraints(){return ei(this,Xi.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(r,i){var a;return M.info("processor ".concat(i.name," requestApplyConstraints for ").concat(this.trackId)),r&&this.constraintsMap.set(i,r),Mn(this,Xi.REQUEST_UPDATE_CONSTRAINTS,Array.from(Os(a=this.constraintsMap).call(a)))}async requestRevertConstraints(r){var i;if(this.constraintsMap.has(r))return this.constraintsMap.delete(r),Mn(this,Xi.REQUEST_UPDATE_CONSTRAINTS,Array.from(Os(i=this.constraintsMap).call(i)))}registerStats(r,i,a){this.statsRegistry.find(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===i)||this.statsRegistry.push({processorName:r.name,processorID:r.ID,type:i,cb:a})}unregisterStats(r,i){const a=this.statsRegistry.findIndex(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===i);a!==-1&&this.statsRegistry.splice(a,1)}gatherStats(){const r=[];for(const{processorID:i,processorName:a,type:l,cb:d}of this.statsRegistry)try{const p=d();r.push({processorID:i,processorName:a,type:l,stats:p})}catch(p){M.error(new q($.UNEXPECTED_ERROR,p.message))}return r}registerUsage(r,i){this.usageRegistry.find(a=>a.processorID===r.ID&&a.processorName===r.name)||this.usageRegistry.push({processorID:r.ID,processorName:r.name,cb:i})}unregisterUsage(r){const i=this.usageRegistry.findIndex(a=>a.processorID===r.ID&&a.processorName===r.name);i!==-1&&this.usageRegistry.splice(i,1)}async gatherUsage(){const r=[];if(!this.chained)return[];for(const{cb:i}of this.usageRegistry)try{let a=i();a instanceof Ae&&(a=await a),r.push(b0(b0({},a),{},{direction:this.direction}))}catch(a){M.error("gather extension usage error",a)}return r}getDirection(){return this.direction}}class yy extends Rn{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),w(this,"context",void 0),w(this,"processSourceNode",void 0),w(this,"outputTrack",void 0),w(this,"processedNode",void 0),w(this,"clonedTrack",void 0),w(this,"outputNode",void 0),this.outputNode=new SK}setVolume(){}createOutputTrack(){throw new q($.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class SK{disconnect(){}connect(){}}let R0,Sd=null;class yK{constructor(){w(this,"state","open"),w(this,"trigger",void 0),w(this,"tasks",[]),M.debug("[macro-task-queue] is created."),this.trigger=setTimeout(()=>{this.state="closed",M.debug("[macro-task-queue] will be closed, all remaining tasks will execute. [".concat(this.tasks.map(r=>r.key),"]")),this.trigger=void 0,this.tasks.forEach(r=>{let{func:i}=r;return i()}),this.tasks.length=0,M.debug("[macro-task-queue] is closed.")})}enqueue(r,i){this.state!=="closed"&&(this.tasks.push({key:r,func:i}),M.debug("[macro-task-queue] is queued, current queue ".concat(this.tasks.length,". ").concat(typeof r=="string"?r:"")))}runTask(r){if(this.state==="closed")return;const i=this.tasks.findIndex(a=>a.key===r);if(i!==-1){const a=this.tasks.splice(i,1);M.debug("[macro-task-queue] is unqueued, current queue ".concat(this.tasks.length,". ").concat(typeof r=="string"?r:"")),a[0].func()}}release(){this.trigger&&(this.state="closed",clearTimeout(this.trigger),this.trigger=void 0,this.tasks.length=0,M.debug("[macro-task-queue] is closed."))}}function Cy(n){return function(r,i,a){var l;const d=(l=a.value)!==null&&l!==void 0?l:a.get,p=function(){Sd&&Sd.state==="open"&&Sd.runTask(n);for(var g=arguments.length,E=new Array(g),C=0;C<g;C++)E[C]=arguments[C];return d==null?void 0:d.apply(this,...E)};return a.value?a.value=p:a.get=p,a}}var zx,Kx,Yx,qx,Xx,Jx,Qx,Zx,eP,tP,nP,rP,iP,oP,aP,sP,cP,lP,uP,dP,hP,zt,pP,fP,mP,gP,vP,EP,As,_P,SP,yP,CP,TP,bP,RP,IP,wP,OP,AP,NP,di;function xP(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function Ty(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?xP(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):xP(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}(function(n){n.UPDATE_TRACK_SOURCE="update-track-source"})(R0||(R0={}));let Qr=(zx=Cy("INIT_WEBAUDIO"),Kx=Cy("INIT_WEBAUDIO"),Yx=Cy("INIT_WEBAUDIO"),qx=He({argsMap:(n,r)=>[n.getTrackId(),r],throttleTime:300}),Xx=He({argsMap:(n,r)=>[n.getTrackId(),r]}),Jx=Ln(),Qx=vd("LocalAudioTrack","_enabledMutex"),Zx=He({argsMap:(n,r)=>[n.getTrackId(),r]}),eP=Ln(),tP=vd("LocalAudioTrack","_enabledMutex"),nP=He({argsMap:(n,r)=>[n.getTrackId(),r]}),rP=Ln(),iP=Ln(),oP=Ln(),aP=He({argsMap:n=>[n.getTrackId()]}),sP=Ln(),cP=He({argsMap:n=>[n.getTrackId()]}),lP=Ln(),uP=He({argsMap:n=>[n.getTrackId()]}),dP=He({argsMap:(n,r)=>[n.getTrackId(),r.name]}),hP=He({argsMap:n=>[n.getTrackId()]}),ve((zt=class extends gy{get _source(){return this._trackSource}set _source(n){this._trackSource=n}get processorContext(){return this._processorContext}set processorContext(n){this._processorContext=n}get processorDestination(){return this._processorDestination}set processorDestination(n){this._processorDestination=n}get isPlaying(){return this._useAudioElement?fo.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(n,r,i,a,l){super(n,i),w(this,"trackMediaType","audio"),w(this,"_encoderConfig",void 0),w(this,"_trackSource",void 0),w(this,"_enabled",!0),w(this,"_volume",100),w(this,"_useAudioElement",!1),w(this,"_bypassWebAudio",!1),w(this,"processor",void 0),w(this,"_processorContext",void 0),w(this,"_processorDestination",void 0),w(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=r,this._getOriginVolumeLevel=!!a;const d=()=>{this.processorContext=new Gx(this._source.context,this.getTrackId(),"local"),this.processorDestination=new Wx(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(qi.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})},p=l&&Si()&&!xx();re("DISABLE_WEBAUDIO")?(this._source=new yy,this._useAudioElement=!0,this._bypassWebAudio=!0):p?this._source=new yy:(this._source=new Ey(n,!1,this._getOriginVolumeLevel?n:void 0),re("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0)),d(),!re("DISABLE_WEBAUDIO")&&p&&(Sd||(Sd=new yK),Sd).enqueue("INIT_WEBAUDIO",()=>{this._source=new Ey(n,!1,this._getOriginVolumeLevel?n:void 0),re("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0),d(),this.emit(R0.UPDATE_TRACK_SOURCE)})}setVolume(n){sn(n,"volume",0,1e3),this._volume=n,this._source.setVolume(n/100),this._useAudioElement&&fo.setVolume(this.getTrackId(),n);try{if(this._bypassWebAudio)return void M.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const r=this._source.createOutputTrack();this._mediaStreamTrack!==r&&(this._mediaStreamTrack=r,Mn(this,Xe.NEED_REPLACE_TRACK,this).then(()=>{M.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(i=>{M.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),i)}))}catch{}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(n){if(!this._useAudioElement)throw new q($.NOT_SUPPORTED,"your browser does not support setting the audio output device");await fo.setSinkID(this.getTrackId(),n)}async setEnabled(n,r,i){return this._setEnabled(n,r,i)}async _setEnabled(n,r,i){if(!i){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(M.info("[".concat(this.getTrackId(),"] start setEnabled"),n),n){this._originMediaStreamTrack.enabled=!0;try{i||(this._enabled=!0),await Mn(this,Xe.NEED_ENABLE_TRACK,this),M.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(n," success"))}catch(a){throw i||(this._enabled=!1),M.error("[".concat(this.getTrackId(),"] setEnabled to true error"),a.toString()),a}}else{this._originMediaStreamTrack.enabled=!1,i||(this._enabled=!1);try{await Mn(this,Xe.NEED_DISABLE_TRACK,this)}catch(a){throw i||(this._enabled=!0),M.error("[".concat(this.getTrackId(),"] setEnabled to false error"),a.toString()),a}}}async setMuted(n){n!==this._muted&&(this.stateCheck("muted",n),this._muted=n,this._originMediaStreamTrack.enabled=!n,M.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(n)),n?await Mn(this,Xe.NEED_MUTE_TRACK,this):await Mn(this,Xe.NEED_UNMUTE_TRACK,this))}getStats(){return Sp(()=>{M.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),wa(this,Xe.GET_STATS)||Ty({},ny)}setAudioFrameCallback(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!n)return this._source.removeAllListeners(qi.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(r),this._source.removeAllListeners(qi.ON_AUDIO_BUFFER),this._source.on(qi.ON_AUDIO_BUFFER,i=>n(i))}play(){M.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(M.debug("[".concat(this.getTrackId(),"] start audio playback in element")),fo.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){M.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?fo.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];M.debug("[".concat(this.getTrackId(),"] update player source track")),n&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&fo.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(n,r){this._originMediaStreamTrack!==n&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),n.addEventListener("ended",this._handleTrackEnded),r&&this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=n,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this.processor.updateInput({track:n,context:this.processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mn(this,Xe.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(n))}renewMediaStreamTrack(n){return Ae.resolve(void 0)}pipe(n){if(this._bypassWebAudio)throw new q($.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===n)return n;if(n._source)throw new q($.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),n}unpipe(){var n;if(!this.processor)return;const r=this.processor;(n=this._source.processSourceNode)===null||n===void 0||n.disconnect(),this.processor._source=!1,this.processor=void 0,r.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Jr.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(n),await Mn(this,Xe.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mn(this,Xe.NEED_REPLACE_TRACK,this))}),this.processorDestination.on(Jr.ON_NODE,n=>{this._source.processedNode=n})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Jr.ON_TRACK),this.processorDestination.removeAllListeners(Jr.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(Xi.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Xi.REQUEST_CONSTRAINTS)}}).prototype,"_source",[zx],Object.getOwnPropertyDescriptor(zt.prototype,"_source"),zt.prototype),ve(zt.prototype,"processorContext",[Kx],Object.getOwnPropertyDescriptor(zt.prototype,"processorContext"),zt.prototype),ve(zt.prototype,"processorDestination",[Yx],Object.getOwnPropertyDescriptor(zt.prototype,"processorDestination"),zt.prototype),ve(zt.prototype,"setVolume",[qx],Object.getOwnPropertyDescriptor(zt.prototype,"setVolume"),zt.prototype),ve(zt.prototype,"setPlaybackDevice",[Xx,Jx],Object.getOwnPropertyDescriptor(zt.prototype,"setPlaybackDevice"),zt.prototype),ve(zt.prototype,"setEnabled",[Qx,Zx,eP],Object.getOwnPropertyDescriptor(zt.prototype,"setEnabled"),zt.prototype),ve(zt.prototype,"setMuted",[tP,nP,rP],Object.getOwnPropertyDescriptor(zt.prototype,"setMuted"),zt.prototype),ve(zt.prototype,"getStats",[iP],Object.getOwnPropertyDescriptor(zt.prototype,"getStats"),zt.prototype),ve(zt.prototype,"setAudioFrameCallback",[oP],Object.getOwnPropertyDescriptor(zt.prototype,"setAudioFrameCallback"),zt.prototype),ve(zt.prototype,"play",[aP,sP],Object.getOwnPropertyDescriptor(zt.prototype,"play"),zt.prototype),ve(zt.prototype,"stop",[cP,lP],Object.getOwnPropertyDescriptor(zt.prototype,"stop"),zt.prototype),ve(zt.prototype,"close",[uP],Object.getOwnPropertyDescriptor(zt.prototype,"close"),zt.prototype),ve(zt.prototype,"pipe",[dP],Object.getOwnPropertyDescriptor(zt.prototype,"pipe"),zt.prototype),ve(zt.prototype,"unpipe",[hP],Object.getOwnPropertyDescriptor(zt.prototype,"unpipe"),zt.prototype),zt),I0=(pP=He({argsMap:(n,r)=>[n.getTrackId(),r]}),fP=Ln(),mP=vd("MicrophoneAudioTrack","_enabledMutex"),gP=He({argsMap:(n,r,i)=>[n.getTrackId(),r,i]}),vP=Ln(),EP=He({argsMap:n=>[n.getTrackId()]}),ve((As=class extends Qr{get __className__(){return"MicrophoneAudioTrack"}constructor(n,r,i,a){super(n,r.encoderConfig?v0(r.encoderConfig):{},a,re("GET_VOLUME_OF_MUTED_AUDIO_TRACK"),!0),w(this,"_config",void 0),w(this,"_deviceName","default"),w(this,"_constraints",void 0),w(this,"_originalConstraints",void 0),w(this,"_enabled",!0),this._config=r,this._constraints=i,this._originalConstraints=i,this._deviceName=n.label,typeof r.bypassWebAudio=="boolean"&&(this._bypassWebAudio=r.bypassWebAudio),(id()||TS())&&Gt.bindInterruptDetectorTrack(this),this.on(R0.UPDATE_TRACK_SOURCE,()=>{this.bindProcessorContextEvents()}),xx()&&this.bindProcessorContextEvents()}async setDevice(n){if(M.info("[".concat(this.getTrackId(),"] start set device to ").concat(n)),this._enabled)try{const r=await ko.getDeviceById(n),i={};i.audio=Ty({},this._constraints),i.audio.deviceId={exact:n},this._originMediaStreamTrack.stop();let a=null;try{a=await Ia(i,this.getTrackId())}catch(l){throw M.error("[".concat(this.getTrackId(),"] setDevice failed"),l.toString()),a=await Ia({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!1),this._deviceName=r.label,this._config.microphoneId=n,this._constraints.deviceId={exact:n}}catch(r){throw M.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}else try{const r=await ko.getDeviceById(n);this._deviceName=r.label,this._config.microphoneId=n,this._constraints.deviceId={exact:n}}catch(r){throw M.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}M.info("[".concat(this.getTrackId(),"] set device to ").concat(n," success"))}async setEnabled(n,r,i){if(r)return M.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(n);if(!i){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(M.info("[".concat(this.getTrackId(),"] start setEnabled"),n),!n){var a;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),(a=this._source.clonedTrack)===null||a===void 0||a.stop(),i||(this._enabled=!1);try{await Mn(this,Xe.NEED_DISABLE_TRACK,this)}catch(p){throw M.error("[".concat(this.getTrackId(),"] setEnabled false failed"),p.toString()),p}return}const l=Ty({},this._constraints),d=ko.searchDeviceIdByName(this._deviceName);d&&!l.deviceId&&(l.deviceId=d);try{i||(this._enabled=!0);const p=await Ia({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(p.getAudioTracks()[0],!1),await Mn(this,Xe.NEED_ENABLE_TRACK,this)}catch(p){throw i||(this._enabled=!1),M.error("[".concat(this.getTrackId(),"] setEnabled true failed"),p.toString()),p}M.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(id()||TS())&&Gt.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((yi()||Is())&&this._enabled&&!this._isClosed&&Gt.duringInterruption){const n=async()=>{Gt.off(_r.IOS_INTERRUPTION_END,n),this._enabled&&!this._isClosed&&(M.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Gt.on(_r.IOS_INTERRUPTION_END,n)}else M.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Wc.TRACK_ENDED)}async renewMediaStreamTrack(n){const r=n||this._constraints,i=ko.searchDeviceIdByName(this._deviceName);if(i&&!r.deviceId&&(r.deviceId=i),this._constraints=r,this._enabled){this._originMediaStreamTrack.stop();const a=await Ia({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!0)}}bindProcessorContextEvents(){this.processorContext.on(Xi.REQUEST_UPDATE_CONSTRAINTS,async(n,r,i)=>{try{const a=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(a),r()}catch(a){i(a)}}),this.processorContext.on(Xi.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[pP,fP],Object.getOwnPropertyDescriptor(As.prototype,"setDevice"),As.prototype),ve(As.prototype,"setEnabled",[mP,gP,vP],Object.getOwnPropertyDescriptor(As.prototype,"setEnabled"),As.prototype),ve(As.prototype,"close",[EP],Object.getOwnPropertyDescriptor(As.prototype,"close"),As.prototype),As),CK=(_P=He({argsMap:(n,r)=>[n.getTrackId(),r,n.duration]}),SP=Ln(),yP=He({argsMap:n=>[n.getTrackId()]}),CP=Ln(),TP=He({argsMap:n=>[n.getTrackId()]}),bP=Ln(),RP=He({argsMap:n=>[n.getTrackId()]}),IP=Ln(),wP=He({argsMap:n=>[n.getTrackId()]}),OP=Ln(),AP=He({argsMap:n=>[n.getTrackId()]}),NP=Ln(),ve((di=class extends Qr{get __className__(){return"BufferSourceAudioTrack"}constructor(n,r,i,a){super(r.createOutputTrack(),i,a),w(this,"source",void 0),w(this,"_bufferSource",void 0),this.source=n,this._bufferSource=r,this._bufferSource.on(qi.AUDIO_SOURCE_STATE_CHANGE,l=>{this.safeEmit(Wc.SOURCE_STATE_CHANGE,l)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(n){n&&this._bufferSource.updateOptions(n),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(n){this._bufferSource.seekAudioBuffer(n)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}setAudioBufferPlaybackSpeed(n){sn(n,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(n)}}).prototype,"startProcessAudioBuffer",[_P,SP],Object.getOwnPropertyDescriptor(di.prototype,"startProcessAudioBuffer"),di.prototype),ve(di.prototype,"pauseProcessAudioBuffer",[yP,CP],Object.getOwnPropertyDescriptor(di.prototype,"pauseProcessAudioBuffer"),di.prototype),ve(di.prototype,"seekAudioBuffer",[TP,bP],Object.getOwnPropertyDescriptor(di.prototype,"seekAudioBuffer"),di.prototype),ve(di.prototype,"resumeProcessAudioBuffer",[RP,IP],Object.getOwnPropertyDescriptor(di.prototype,"resumeProcessAudioBuffer"),di.prototype),ve(di.prototype,"stopProcessAudioBuffer",[wP,OP],Object.getOwnPropertyDescriptor(di.prototype,"stopProcessAudioBuffer"),di.prototype),ve(di.prototype,"setAudioBufferPlaybackSpeed",[AP,NP],Object.getOwnPropertyDescriptor(di.prototype,"setAudioBufferPlaybackSpeed"),di.prototype),di);class Ji extends Qr{get __className__(){return"MixingAudioTrack"}get isActive(){for(const r of this.trackList)if(r._enabled&&!r._isClosed&&!r.muted)return!0;return!1}constructor(){const r=Ed().createMediaStreamDestination();super(r.stream.getAudioTracks()[0],void 0,pn(8,"track-mix-")),w(this,"trackList",void 0),w(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=r,this.trackList=[]}hasAudioTrack(r){return this.trackList.indexOf(r)!==-1}addAudioTrack(r){this.trackList.indexOf(r)===-1?(M.debug("add ".concat(r.getTrackId()," to mixing track")),r._source.outputNode.connect(this.destNode),this.trackList.push(r),this.updateEncoderConfig()):M.debug("track ".concat(r.getTrackId()," is already added"))}removeAudioTrack(r){if(this.trackList.indexOf(r)!==-1){M.debug("remove ".concat(r.getTrackId()," from mixing track"));try{r._source.outputNode.disconnect(this.destNode)}catch{}Iy(this.trackList,r),this.updateEncoderConfig()}}updateEncoderConfig(){const r={};this.trackList.forEach(i=>{i._encoderConfig&&((i._encoderConfig.bitrate||0)>(r.bitrate||0)&&(r.bitrate=i._encoderConfig.bitrate),(i._encoderConfig.sampleRate||0)>(r.sampleRate||0)&&(r.sampleRate=i._encoderConfig.sampleRate),(i._encoderConfig.sampleSize||0)>(r.sampleSize||0)&&(r.sampleSize=i._encoderConfig.sampleSize),i._encoderConfig.stereo&&(r.stereo=!0))}),this._encoderConfig=r}_updateRtpTransceiver(r){this._rtpTransceiver!==r&&(this._rtpTransceiver=r,this.trackList.forEach(i=>{i instanceof Ji?i.emit(vp.TRANSCEIVER_UPDATED,r):i._updateRtpTransceiver(r)}))}}class TK extends Rn{constructor(){super(...arguments),w(this,"resultStorage",new Map)}setLocalAudioStats(r,i,a){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",r,this.checkAudioInputLevel(a,i)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",r,this.checkSendAudioBitrate(a,i))}setLocalVideoStats(r,i,a){this.record("SEND_VIDEO_BITRATE_TOO_LOW",r,this.checkSendVideoBitrate(a,i)),this.record("FRAMERATE_INPUT_TOO_LOW",r,this.checkFramerateInput(a,i)),this.record("FRAMERATE_SENT_TOO_LOW",r,this.checkFramerateSent(a))}setRemoteAudioStats(r,i){const a=r.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",a,this.checkAudioOutputLevel(i))}setRemoteVideoStats(r,i){const a=r.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",a,this.checkVideoDecode(i))}record(r,i,a){if(re("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(r)||this.resultStorage.set(r,{result:[],isPrevNormal:!0});const l=this.resultStorage.get(r);if(l&&(l.result.push(a),l.result.length>=5)){const d=l.result.includes(!0);l.isPrevNormal&&!d&&this.emit("exception",PP[r],r,i),!l.isPrevNormal&&d&&this.emit("exception",PP[r]+2e3,r+"_RECOVER",i),l.isPrevNormal=d,l.result=[]}}checkAudioOutputLevel(r){return!(r.receiveBitrate>0&&r.receiveLevel===0)}checkAudioInputLevel(r,i){return i instanceof Ji&&!i.isActive||!!i.muted||r.sendVolumeLevel!==0}checkFramerateInput(r,i){let a=null;i._encoderConfig&&i._encoderConfig.frameRate&&(a=ac(i._encoderConfig.frameRate));const l=r.captureFrameRate;return!a||!l||!(a>10&&l<5||a<10&&a>=5&&l<=1)}checkFramerateSent(r){return!(r.captureFrameRate&&r.sendFrameRate&&r.captureFrameRate>5&&r.sendFrameRate<=1)}checkSendVideoBitrate(r,i){return!!i.muted||r.sendBitrate!==0}checkSendAudioBitrate(r,i){return i instanceof Ji&&!i.isActive||!!i.muted||r.sendBitrate!==0}checkVideoDecode(r){return r.receiveBitrate===0||r.decodeFrameRate!==0}}const PP={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},Qo=new class{markSubscribeStart(n,r){performance.mark("agora-web-sdk/".concat(n,"/subscribe-").concat(r))}markPublishStart(n,r){performance.mark("agora-web-sdk/".concat(n,"/publish-").concat(r))}measureFromSubscribeStart(n,r){const i=performance.getEntriesByName("agora-web-sdk/".concat(n,"/subscribe-").concat(r));if(i.length>0){const a=i[i.length-1];return Math.round(performance.now()-a.startTime)}return 0}measureFromPublishStart(n,r){const i=performance.getEntriesByName("agora-web-sdk/".concat(n,"/publish-").concat(r));if(i.length>0){const a=i[i.length-1];return Math.round(performance.now()-a.startTime)}return 0}};function DP(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function eu(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?DP(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):DP(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}class yd{constructor(r){w(this,"store",void 0),w(this,"onStatsException",void 0),w(this,"onUploadPublishDuration",void 0),w(this,"onStatsChanged",void 0),w(this,"localStats",new Map),w(this,"remoteStats",new Map),w(this,"updateStatsInterval",void 0),w(this,"trafficStats",void 0),w(this,"trafficStatsPeerList",[]),w(this,"uplinkStats",void 0),w(this,"exceptionMonitor",void 0),w(this,"p2pChannel",void 0),w(this,"scalabilityMode",_S.L1T1),w(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=r,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new TK,this.exceptionMonitor.on("exception",(i,a,l)=>{this.onStatsException&&this.onStatsException(i,a,l)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(Pe.LocalAudioTrack)||eu({},ny)}getLocalVideoTrackStats(){return this.localStats.get(Pe.LocalVideoTrack)||eu({},ry)}getRemoteAudioTrackStats(r){const i=(d,p)=>{if(!this.trafficStats)return p;const g=this.trafficStats.peer_delay.find(E=>E.peer_uid===d);return g&&(p.publishDuration=g.B_ppad+(Date.now()-this.trafficStats.timestamp)),p},a={};if(r){var l;const d=(l=this.remoteStats.get(r))===null||l===void 0?void 0:l.audioStats;d&&(a[r]=i(r,d))}else Array.from(this.remoteStats.entries()).forEach(d=>{let[p,{audioStats:g}]=d;g&&(a[p]=i(p,g))});return a}getRemoteNetworkQualityStats(r){const i={};if(r){var a;const l=(a=this.remoteStats.get(r))===null||a===void 0?void 0:a.networkStats;l&&(i[r]=l)}else Array.from(this.remoteStats.entries()).forEach(l=>{let[d,{networkStats:p}]=l;p&&(i[d]=p)});return i}getRemoteVideoTrackStats(r){const i=(d,p)=>{if(!this.trafficStats)return p;const g=this.trafficStats.peer_delay.find(E=>E.peer_uid===d);return g&&(p.publishDuration=g.B_ppvd+(Date.now()-this.trafficStats.timestamp)),p},a={};if(r){var l;const d=(l=this.remoteStats.get(r))===null||l===void 0?void 0:l.videoStats;d&&(a[r]=i(r,d))}else Array.from(this.remoteStats.entries()).forEach(d=>{let[p,{videoStats:g}]=d;g&&(a[p]=i(p,g))});return a}getRTCStats(){let r=0,i=0,a=0,l=0;const d=this.localStats.get(Pe.LocalAudioTrack);d&&(r+=d.sendBytes,i+=d.sendBitrate);const p=this.localStats.get(Pe.LocalVideoTrack);p&&(r+=p.sendBytes,i+=p.sendBitrate);const g=this.localStats.get(Pe.LocalVideoLowTrack);g&&(r+=g.sendBytes,i+=g.sendBitrate),this.remoteStats.forEach(C=>{let{audioStats:S,videoStats:R}=C;S&&(a+=S.receiveBytes,l+=S.receiveBitrate),R&&(a+=R.receiveBytes,l+=R.receiveBitrate)});let E=1;return this.trafficStats&&(E+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:E,SendBitrate:i,SendBytes:r,RecvBytes:a,RecvBitrate:l,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(r){this.localStats.set(r,void 0)}removeLocalStats(r){r?this.localStats.delete(r):this.localStats.clear()}addRemoteStats(r){this.remoteStats.set(r,{})}removeRemoteStats(r){r?this.remoteStats.delete(r):this.remoteStats.clear()}addP2PChannel(r){this.p2pChannel=r}updateTrafficStats(r){r.peer_delay=r.peer_delay.filter(i=>i.B_ppad!==void 0||i.B_ppvd!==void 0),r.peer_delay.filter(i=>this.trafficStatsPeerList.indexOf(i.peer_uid)===-1).forEach(i=>{var a;const l=(a=this.p2pChannel)===null||a===void 0?void 0:a.getRemoteMedia(i.peer_uid),d=l!=null&&l.videoSSRC?Qo.measureFromSubscribeStart(this.store.clientId,l.videoSSRC):0,p=l!=null&&l.audioSSRC?Qo.measureFromSubscribeStart(this.store.clientId,l.audioSSRC):0;i.B_ppad!==void 0&&i.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(i.peer_uid,i.B_ppad,i.B_ppvd,d>p?d:p),this.trafficStatsPeerList.push(i.peer_uid))}),this.trafficStats=r}updateUplinkStats(r){this.uplinkStats&&this.uplinkStats.B_fir!==r.B_fir&&M.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(r.B_fir)),this.uplinkStats=r}static isRemoteVideoFreeze(r,i,a){if(!r)return!1;const l=!!a&&i.framesDecodeFreezeTime>a.framesDecodeFreezeTime,d=!a||i.framesDecodeCount>a.framesDecodeCount;return l||!d}static isRemoteAudioFreeze(r){return!!r&&r._isFreeze()}isLocalVideoFreeze(r){return!(!r.inputFrame||!r.sentFrame)&&r.inputFrame.frameRate>5&&r.sentFrame.frameRate<3}updateLocalStats(r){Array.from(this.localStats.entries()).forEach(i=>{let[a,l]=i;switch(a){case Pe.LocalVideoTrack:case Pe.LocalVideoLowTrack:{const p=l,g=eu({},ry),E=r.getStats(),C=r.getLocalMedia(a);if(E){const S=E.videoSend.find(R=>R.ssrc===(C==null?void 0:C.ssrcs[0].ssrcId));if(S){const R=r.getLocalVideoSize(),k=r.getEncoderConfig(Pe.LocalVideoTrack);S.codec!=="H264"&&S.codec!=="H265"&&S.codec!=="VP8"&&S.codec!=="VP9"&&S.codec!=="AV1X"&&S.codec!=="AV1"||(g.codecType=S.codec),g.sendBytes=S.bytes,g.sendBitrate=p?8*Math.max(0,g.sendBytes-p.sendBytes):0,S.inputFrame?(g.captureFrameRate=S.inputFrame.frameRate,g.captureResolutionHeight=S.inputFrame.height,g.captureResolutionWidth=S.inputFrame.width):R&&(g.captureResolutionWidth=R.width,g.captureResolutionHeight=R.height),S.sentFrame?(g.sendFrameRate=S.sentFrame.frameRate,g.sendResolutionHeight=S.sentFrame.height,g.sendResolutionWidth=S.sentFrame.width):R&&(g.sendResolutionWidth=R.width,g.sendResolutionHeight=R.height),S.avgEncodeMs&&(g.encodeDelay=S.avgEncodeMs),k&&k.bitrateMax&&(g.targetSendBitrate=1e3*k.bitrateMax),g.sendPackets=S.packets,g.sendPacketsLost=S.packetsLost,g.totalDuration=p?p.totalDuration+1:1,g.totalFreezeTime=p?p.totalFreezeTime:0,this.isLocalVideoFreeze(S)&&(g.totalFreezeTime+=1),S.scalabilityMode&&this.scalabilityMode!==S.scalabilityMode&&(M.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(S.scalabilityMode)),this.scalabilityMode=S.scalabilityMode)}this.trafficStats&&(g.sendPacketsLost=this.trafficStats.B_pvlr4/100)}var d;this.localStats.set(a,g),((p==null?void 0:p.sendResolutionWidth)!==g.sendResolutionWidth||(p==null?void 0:p.sendResolutionHeight)!==g.sendResolutionHeight)&&((d=this.onStatsChanged)===null||d===void 0||d.call(this,"resolution",{width:g.sendResolutionWidth,height:g.sendResolutionHeight})),g&&C&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,C.track,g);break}case Pe.LocalAudioTrack:{const p=l,g=eu({},ny),E=r.getStats(),C=r.getLocalMedia(a);if(E){const S=E.audioSend.find(R=>R.ssrc===(C==null?void 0:C.ssrcs[0].ssrcId));if(S){if(S.codec!=="opus"&&S.codec!=="aac"&&S.codec!=="PCMU"&&S.codec!=="PCMA"&&S.codec!=="G722"||(g.codecType=S.codec),S.inputLevel)g.sendVolumeLevel=Math.round(32767*S.inputLevel);else{const R=r.getLocalAudioVolume();R&&(g.sendVolumeLevel=Math.round(32767*R))}g.sendBytes=S.bytes,g.sendPackets=S.packets,g.sendPacketsLost=S.packetsLost,g.sendBitrate=p?8*Math.max(0,g.sendBytes-p.sendBytes):0}}this.trafficStats&&(g.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(Pe.LocalAudioTrack,g),g&&C&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,C.track,g);break}}})}updateRemoteStats(r){Array.from(this.remoteStats.entries()).forEach(i=>{let[a,{videoStats:l,audioStats:d,videoPcStats:p}]=i;const g=d,E=l,C=p,S=eu({},ox),R=eu({},ax),k=eu({},n9),{audioTrack:F,videoTrack:W,audioSSRC:G,videoSSRC:z}=r.getRemoteMedia(a),oe=r.getStats(),ce=oe==null?void 0:oe.audioRecv.find(Te=>Te.ssrc===G),ye=oe==null?void 0:oe.videoRecv.find(Te=>Te.ssrc===z),Ne=this.trafficStats&&this.trafficStats.peer_delay.find(Te=>Te.peer_uid===a);if(ce&&(ce.codec!=="opus"&&ce.codec!=="aac"&&ce.codec!=="PCMU"&&ce.codec!=="PCMA"&&ce.codec!=="G722"||(S.codecType=ce.codec),ce.outputLevel?S.receiveLevel=Math.round(32767*ce.outputLevel):F&&(S.receiveLevel=Math.round(32767*F.getVolumeLevel())),S.receiveBytes=ce.bytes,S.receivePackets=ce.packets,S.receivePacketsLost=ce.packetsLost,S.packetLossRate=S.receivePacketsLost/(S.receivePackets+S.receivePacketsLost),S.receiveBitrate=g?8*Math.max(0,S.receiveBytes-g.receiveBytes):0,S.totalDuration=g?g.totalDuration+1:1,S.totalFreezeTime=g?g.totalFreezeTime:0,S.freezeRate=S.totalFreezeTime/S.totalDuration,S.receiveDelay=ce.jitterBufferMs,S.totalDuration>10&&yd.isRemoteAudioFreeze(F)&&(S.totalFreezeTime+=1)),ye){ye.codec!=="H264"&&ye.codec!=="H265"&&ye.codec!=="VP8"&&ye.codec!=="VP9"&&ye.codec!=="AV1X"&&ye.codec!=="AV1"||(R.codecType=ye.codec),R.receiveBytes=ye.bytes,R.receiveBitrate=E?8*Math.max(0,R.receiveBytes-E.receiveBytes):0,R.decodeFrameRate=ye.decodeFrameRate<0?0:ye.decodeFrameRate,R.renderFrameRate=ye.decodeFrameRate<0?0:ye.decodeFrameRate,ye.outputFrame&&(R.renderFrameRate=ye.outputFrame.frameRate),ye.receivedFrame?(R.receiveFrameRate=ye.receivedFrame.frameRate,R.receiveResolutionHeight=ye.receivedFrame.height,R.receiveResolutionWidth=ye.receivedFrame.width):W&&(R.receiveResolutionHeight=W._videoHeight||0,R.receiveResolutionWidth=W._videoWidth||0),ye.framesRateFirefox!==void 0&&(R.receiveFrameRate=Math.round(ye.framesRateFirefox)),R.receivePackets=ye.packets,R.receivePacketsLost=ye.packetsLost,R.packetLossRate=R.receivePacketsLost/(R.receivePackets+R.receivePacketsLost),R.totalDuration=E?E.totalDuration+1:1,R.totalFreezeTime=E?E.totalFreezeTime:0,R.receiveDelay=ye.jitterBufferMs||0;const Te=!!z&&r.getRemoteVideoIsReady(z);W&&Te&&yd.isRemoteVideoFreeze(W,ye,C)&&(R.totalFreezeTime+=1),R.freezeRate=R.totalFreezeTime/R.totalDuration}Ne&&(S.end2EndDelay=Ne.B_ad,R.end2EndDelay=Ne.B_vd,S.transportDelay=Ne.B_ed,R.transportDelay=Ne.B_ed,S.currentPacketLossRate=Ne.B_ealr4/100,R.currentPacketLossRate=Ne.B_evlr4/100,k.uplinkNetworkQuality=Ne.B_punq?Ne.B_punq:0,k.downlinkNetworkQuality=Ne.B_pdnq?Ne.B_pdnq:0),this.remoteStats.set(a,{audioStats:S,videoStats:R,videoPcStats:ye,networkStats:k}),F&&this.exceptionMonitor.setRemoteAudioStats(F,S),W&&this.exceptionMonitor.setRemoteVideoStats(W,R)})}}const oc=new class extends Rn{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),w(this,"_lastHiddenTime",0),w(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),M.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}};function kP(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function w0(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?kP(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):kP(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}function O0(n){return n.match(/^[\.\:\d]+$/)?"".concat(n.replace(/[^\d]/g,"-"),".").concat(re("TURN_DOMAIN")):(M.info("Cannot recognized as IP address ".concat(n,". Used As Host instead")),n)}function LP(n,r){var i,a;const l=re("GATEWAY_DOMAINS");let d=l[1]&&r.indexOf(l[1])!==-1?1:0;n.addresses=n.addresses||[];const p=n.addresses.map(E=>E.domain_prefix?{address:"".concat(E.domain_prefix,".").concat(l[d++%l.length],":").concat(E.port)}:E.ip.match(/^[\.\:\d]+$/)?{ip:E.ip,port:E.port,address:"".concat(E.ip.replace(/[^\d]/g,"-"),".").concat(l[d++%l.length],":").concat(E.port)}:(M.info("Cannot recognized as IP address ".concat(E.ip,". Used As Host instead")),{ip:E.ip,port:E.port,address:"".concat(E.ip,":").concat(E.port)}));if((i=n.detail)!==null&&i!==void 0&&i[18]&&typeof((a=n.detail)===null||a===void 0?void 0:a[18])=="string"){const E=n.detail[18],C=E==null?void 0:E.split(";");for(let S=0;S<C.length;S++){var g;const R=ec(g=C[S]).call(g);p[S]&&R&&(p[S].ip6=R)}}return{gatewayAddrs:p,uid:n.uid,cid:n.cid,cert:n.cert,vid:n.detail&&n.detail[8],uni_lbs_ip:n.detail&&n.detail[1],res:n,csIp:n.detail&&n.detail[502]}}function ac(n){return typeof n=="number"?n:n.exact||n.ideal||n.max||n.min||0}function MP(n){const r=n._encoderConfig;if(!r)return{};const i={resolution:r.width&&r.height?"".concat(ac(r.width),"x").concat(ac(r.height)):void 0,maxVideoBW:r.bitrateMax,minVideoBW:r.bitrateMin};return typeof r.frameRate=="number"?(i.maxFrameRate=r.frameRate,i.minFrameRate=r.frameRate):r.frameRate&&(i.maxFrameRate=r.frameRate.max||r.frameRate.ideal||r.frameRate.exact||r.frameRate.min,i.minFrameRate=r.frameRate.min||r.frameRate.ideal||r.frameRate.exact||r.frameRate.max),i}function UP(n){return n>=0&&n<.17?1:n>=.17&&n<.36?2:n>=.36&&n<.59?3:n>=.59&&n<=1?4:n>1?5:0}function by(n,r){let i,a,l;switch(r){case Er.CHOOSE_SERVER:i=4096,a="choose server";break;case Er.CLOUD_PROXY:i=1048576,a="proxy";break;case Er.CLOUD_PROXY_5:i=4194304,a="proxy5";break;case Er.CLOUD_PROXY_FALLBACK:i=4194310,a="proxy fallback";break;default:throw new q($.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:n.detail&&n.detail[502],retry:!1})}if(n.response_body.forEach(d=>{d.buffer&&d.buffer.flag===i&&(l={code:d.buffer.code,addresses:(d.buffer.edges_services||[]).map(p=>w0(w0({},p),{},{ticket:d.buffer.cert})),server_ts:n.enter_ts,uid:d.buffer.uid,cid:d.buffer.cid,cname:d.buffer.cname,detail:w0(w0({},d.buffer.detail),n.detail),flag:d.buffer.flag,opid:n.opid,cert:d.buffer.cert})}),!l)throw new q($.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(a," from multi unilbs response"),{csIp:n.detail&&n.detail[502]});return l}async function bK(n,r){return await Ae.all(n.addresses.map(async i=>({address:O0(i.ip),tcpport:i.port,udpport:i.port,username:r&&re("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?r.toString():Oo.username,password:r&&re("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await cK(r.toString()):Oo.password})))}function RK(n,r){const i=r._videoWidth||r.getMediaStreamTrack(!0).getSettings().width;return i||M.warning("cannot get original video track's width, default scale down 4 times for low stream"),i?i/ac(n.width):4}function A0(n){let{candidateType:r,relayProtocol:i,type:a,address:l,port:d,protocol:p}=n;return a==="local-candidate"?{candidateType:r,relayProtocol:i,protocol:p}:{candidateType:r,relayProtocol:i,address:l,port:d,protocol:p}}function FP(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function tu(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?FP(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):FP(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}function Cd(n){return window.TextEncoder?new TextEncoder().encode(n).length:n.length}function Zr(n){return new Ae(r=>{window.setTimeout(r,n)})}function IK(n){const r=new q($.TIMEOUT,"timeout");return new Ae((i,a)=>{window.setTimeout(()=>a(r),n)})}function pn(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,r=arguments.length>1?arguments[1]:void 0;const i=Math.random().toString(16).substr(2,n).toLowerCase();return i.length===n?"".concat(r).concat(i):"".concat(r).concat(i)+pn(n-i.length,"")}function Ry(){return pn(32,"").toUpperCase()}const N0=()=>{};function VP(n){return new Ae((r,i)=>{let a=!1;const l=document.createElement("video");l.setAttribute("autoplay",""),l.setAttribute("muted",""),l.muted=!0,l.autoplay=!0,l.setAttribute("playsinline",""),l.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(l);const d=yi()?"canplay":"playing";l.addEventListener(d,()=>{const p=l.videoWidth,g=l.videoHeight;!p&&Dn()||(a=!0,l.srcObject=null,l.remove(),r([p,g]))}),l.srcObject=new MediaStream([n]),l.play().catch(N0),setTimeout(()=>{a||(l.srcObject=null,l.remove(),r([l.videoWidth,l.videoHeight]))},4e3)})}function Td(n){return Ae.all(n.map(r=>r.then(i=>{throw i},i=>i))).then(r=>{throw r},r=>r)}function ei(n,r){for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];return n.getListeners(r).length===0?Ae.reject(new q($.UNEXPECTED_ERROR,"can not emit promise")):new Ae((d,p)=>{n.emit(r,...a,d,p)})}function Mn(n,r){if(n.getListeners(r).length===0)return Ae.resolve();for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];return ei(n,r,...a)}function wa(n,r){if(n.getListeners(r).length===0)return null;for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];return nu(n,r,...a)}function nu(n,r){let i=null,a=null;for(var l=arguments.length,d=new Array(l>2?l-2:0),p=2;p<l;p++)d[p-2]=arguments[p];if(n.emit(r,...d,g=>{i=g},g=>{a=g}),a!==null)throw a;if(i===null)throw new q($.UNEXPECTED_ERROR,"handler is not sync");return i}function Iy(n,r){const i=n.indexOf(r);i!==-1&&n.splice(i,1)}function jP(n){const r=[];return n.forEach(i=>{r.indexOf(i)===-1&&r.push(i)}),r}function ns(n){Ae.resolve().then(n)}function tr(n){return JSON.parse(JSON.stringify(n))}const BP={};function Sp(n,r){BP[r]||(BP[r]=!0,n())}function wy(n){const r=window.atob(n),i=new Uint8Array(new ArrayBuffer(r.length));for(let a=0;a<r.length;a+=1)i[a]=r.charCodeAt(a);return i}function x0(n){let r="";for(let i=0;i<n.length;i+=1)r+=String.fromCharCode(n[i]);return window.btoa(r)}const $P=new class{constructor(){w(this,"fnMap",new Map)}throttleByKey(n,r,i,a){for(var l=arguments.length,d=new Array(l>4?l-4:0),p=4;p<l;p++)d[p-4]=arguments[p];if(this.fnMap.has(r)){const g=this.fnMap.get(r);if(g.threshold!==i){g.fn(...g.args),clearTimeout(g.timer);const E=window.setTimeout(()=>{const C=this.fnMap.get(r);C&&C.fn(...C.args),this.fnMap.delete(r)},i);this.fnMap.set(r,{fn:n,threshold:i,timer:E,args:d,skipFn:a})}else g.skipFn&&g.skipFn(...g.args),this.fnMap.set(r,tu(tu({},g),{},{fn:n,args:d,skipFn:a}))}else{const g=window.setTimeout(()=>{const E=this.fnMap.get(r);E&&E.fn(...E.args),this.fnMap.delete(r)},i);this.fnMap.set(r,{fn:n,threshold:i,timer:g,args:d,skipFn:a})}}},HP=$P.throttleByKey.bind($P),yp=async n=>{let{fragementLength:r,referenceList:i,asyncMapHandler:a,allFailedhandler:l,promisesCollector:d}=n,p=0;const g=r;let E,C=0;const S=async()=>{const R=(()=>{const k=p*g,F=k+g;return i.slice(k,F).map(a)})();d&&d.push(...R);try{E=await Td(R)}catch(k){if(C+=g,p++,!(C>=i.length))return void await S();l(k)}R.forEach(k=>k.cancel())};return await S(),E};function WP(n){return typeof n=="object"&&n!==null&&!(n instanceof RegExp)}const wK={[pd.ACCESS_POINT]:{[qr.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[qr.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[qr.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[qr.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[qr.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[qr.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[qr.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[qr.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[qr.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[qr.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[qr.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[qr.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[qr.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[qr.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[qr.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[qr.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[qr.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[qr.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[pd.UNILBS]:{[Ao.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Ao.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Ao.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Ao.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Ao.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Ao.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Ao.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Ao.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Ao.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Ao.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Ao.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Ao.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[pd.STRING_UID_ALLOCATOR]:{[mp.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[mp.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[mp.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function P0(n){const r=wK[Math.floor(n/1e4)];if(!r)return{desc:"unkonw error",retry:!1};const i=r[n%1e4];if(!i){if(Math.floor(n/1e4)===pd.ACCESS_POINT){const a=n%1e4;if(a.toString()[0]==="1")return{desc:n.toString(),retry:!1};if(a.toString()[0]==="2")return{desc:n.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return i}const OK={[We.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[We.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[We.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[We.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[We.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[We.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[We.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[We.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[We.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[We.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[We.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[We.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[We.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[We.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[We.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[We.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[We.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[We.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[We.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[We.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[We.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[We.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[We.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[We.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[We.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[We.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[We.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[We.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[We.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[We.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[We.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[We.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[We.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[We.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[We.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[We.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[We.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[We.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[We.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[We.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[We.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[We.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[We.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[We.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[We.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[We.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[We.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[We.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[We.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[We.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[We.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[We.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[We.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[We.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[We.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[We.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[We.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[We.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[We.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[We.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[We.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[We.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[We.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[We.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function Cp(n){return OK[n]||{desc:"UNKNOW_ERROR_".concat(n),action:"failed"}}function GP(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}class ru extends Rn{get url(){return this.websocket?this.websocket.url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(r){["tryNext","recover"].includes(r)&&this.resetReconnectCount(r),this._reconnectMode=r}get state(){return this._state}set state(r){r!==this._state&&(this._state=r,this._state==="reconnecting"?this.emit(Ze.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(Ze.CONNECTED):this._state==="closed"?this.emit(Ze.CLOSED):this._state==="failed"&&this.emit(Ze.FAILED))}resetReconnectCount(r){M.debug("websocket reset reconnect count, reason: "+r),this.reconnectCount=0}constructor(r,i){let a=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=arguments.length>3&&arguments[3]!==void 0&&arguments[3],d=arguments.length>4?arguments[4]:void 0;super(),w(this,"connectionID",0),w(this,"currentURLIndex",0),w(this,"urls",void 0),w(this,"_reconnectMode","tryNext"),w(this,"reconnectReason",void 0),w(this,"_initMutex",new bi("websocket")),w(this,"name",void 0),w(this,"_state","closed"),w(this,"reconnectInterrupter",void 0),w(this,"websocket",void 0),w(this,"retryConfig",void 0),w(this,"reconnectCount",0),w(this,"forceCloseTimeout",5e3),w(this,"onlineReconnectListener",void 0),w(this,"useCompress",void 0),w(this,"tryDoubleDomain",!1),w(this,"wsInflateLength",0),w(this,"wsDeflateLength",0),w(this,"closeEstablishingWs",()=>{}),w(this,"store",void 0),w(this,"joinChannelServiceRecordIndex",void 0),this.store=d,this.name=r,this.retryConfig=function(S){for(var R=1;R<arguments.length;R++){var k=arguments[R]!=null?arguments[R]:{};R%2?GP(Object(k),!0).forEach(function(F){w(S,F,k[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(k)):GP(Object(k)).forEach(function(F){Object.defineProperty(S,F,Object.getOwnPropertyDescriptor(k,F))})}return S}({},i),this.useCompress=a,this.tryDoubleDomain=l;const{timeout:p,timeoutFactor:g}=i,E=Math.max(300,Math.floor(3*p/5)),C=Math.max(1.2,Math.floor(8*g)/10);li.ONLINE&&(this.retryConfig.timeout=E,this.retryConfig.timeoutFactor=C),er.on(Gc.NETWORK_STATE_CHANGE,(S,R)=>{S!==R&&(this.resetReconnectCount("network state change: ".concat(R," -> ").concat(S)),S===li.ONLINE?(this.retryConfig.timeout=E,this.retryConfig.timeoutFactor=C):(this.retryConfig.timeout=p,this.retryConfig.timeoutFactor=g))})}getConnection(){return this.websocket||void 0}init(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;this.forceCloseTimeout=i;const a=(l,d)=>{this.urls=r;const p=this.urls[this.currentURLIndex];this.state="connecting",this.createWebSocketConnection(p).then(l).catch(d),this.once(Ze.CLOSED,()=>d(new q($.WS_DISCONNECT))),this.once(Ze.CONNECTED,()=>l())};return this._initMutex.lock().then(l=>new Ae((d,p)=>{a(d,p)}).then(()=>{l()}).catch(()=>{l()}))}close(r,i){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const a=this.websocket;i?setTimeout(()=>a.close(),500):a.close(),this.websocket=void 0}this.state=r?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(r,i){if(!this.websocket)return void M.warning("[".concat(this.name,"] can not reconnect, no websocket"));var a;r!==void 0&&(this.reconnectMode=r),M.debug("[".concat(this.name,"] reconnect is triggered initiative")),typeof this.joinChannelServiceRecordIndex=="number"&&((a=this.store)===null||a===void 0||a.recordJoinChannelService({status:"error",errors:[new Error(i)]},this.joinChannelServiceRecordIndex));const l=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),l&&l.bind(this.websocket)({code:9999,reason:i})}sendMessage(r){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new q($.WS_ABORT,"websocket is not ready");try{i||(r=JSON.stringify(r)),this.websocket.send(r)}catch(a){throw new q($.WS_ERR,"send websocket message error"+a.toString())}}setWsInflateData(r){this.wsDeflateLength=this.wsDeflateLength+r.originLength,this.wsInflateLength=this.wsInflateLength+r.compressedLength}getWsInflateData(){const r=this.wsInflateLength,i=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:r,wsDeflateLength:i}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(r,i){return this.connectionID+=1,this.connectionID,this.joinChannelServiceRecordIndex=void 0,new Ae((a,l)=>{var d;const p=S=>{var R;(R=this.store)===null||R===void 0||R.signalChannelOpen(),M.debug("[".concat(this.name,"] websocket opened:"),S),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),a()},g=async S=>{if(M.debug("[".concat(this.name,"] websocket close ").concat(this.websocket&&this.websocket.url,", code: ").concat(S.code,", reason: ").concat(S.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount<this.retryConfig.maxRetryCount){this.state==="connected"&&(this.reconnectReason=S.reason,this.state="reconnecting");const R=wa(this,Ze.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,k=await this.reconnectWithAction(R);if(this.state==="closed")return void M.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!k)return l(new q($.WS_DISCONNECT,"websocket reconnect failed: ".concat(S.code))),void this.close(!0);a()}else l(new q($.WS_DISCONNECT,"websocket close: ".concat(S.code))),this.close()},E=S=>{this.emit(Ze.ON_MESSAGE,S)};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),re("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(r=re("GATEWAY_WSS_ADDRESS")),M.debug("[".concat(this.name,"] start connect, url: ").concat(r));const C=(d=this.store)===null||d===void 0?void 0:d.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});this.chooseBestWebsocketConnection(r,!!i,C).then(S=>{var R;this.websocket=S,p&&p(S.url),S.onclose=g,S.onmessage=E,(R=this.store)===null||R===void 0||R.recordJoinChannelService({endTs:Date.now(),status:"success"},C),this.joinChannelServiceRecordIndex=C}).catch(S=>{var R;if((R=this.store)===null||R===void 0||R.recordJoinChannelService({endTs:Date.now(),status:S instanceof q&&S.code===$.WS_ABORT?"aborted":"error",errors:[S]},C),this.state!=="closed"){if(S instanceof q&&S.code===$.WS_ERR){const k=new q($.WS_ERR,"init websocket failed! Error: ".concat(S.toString()));return M.error("[".concat(this.name,"]").concat(k)),void l(k)}g&&g(S)}else l(new q($.WS_DISCONNECT,"websocket is closed: ".concat(S.toString())))})})}async reconnectWithAction(r){let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||!this.urls||this.state==="closed")return!1;this.onlineReconnectListener||er.networkState!==li.OFFLINE||(this.onlineReconnectListener=er.onlineWaiter&&er.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let a=!0;if(this.reconnectInterrupter=()=>{a=!1},i){const p=VS(this.reconnectCount,this.retryConfig);M.debug("[".concat(this.name,"] wait ").concat(p,"ms to reconnect websocket, mode: ").concat(r)),await Ae.race([Zr(p),this.onlineReconnectListener||new Ae(()=>{})])}if(this.state==="closed"||!a)return!1;this.reconnectCount+=1;const l=async(p,g)=>{this.emit(Ze.RECONNECT_CREATE_CONNECTION,g),await this.createWebSocketConnection(p)};try{if(r==="retry"){const p=this.urls[this.currentURLIndex];this.emit(Ze.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else if(r==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return await this.reconnectWithAction("recover",!1);M.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex));const p=this.urls[this.currentURLIndex];this.emit(Ze.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else if(r==="recover"){M.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(Ze.RECONNECT_WAITTING_FINISH,r),this.urls=await ei(this,Ze.REQUEST_NEW_URLS),this.currentURLIndex=0;const p=this.urls[this.currentURLIndex];await l(p,r)}return!0}catch(p){var d;return M.error("[".concat(this.name,"] reconnect failed"),p.toString()),p!=null&&(d=p.data)!==null&&d!==void 0&&d.desc&&Array.isArray(p.data.desc)&&p.data.desc.length&&p.data.desc.includes("dynamic key expired")?(this.emit(Ze.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(r,i)}}async chooseBestWebsocketConnection(r,i,a){return new Ae((l,d)=>{let p=!1;const g=[];this.closeEstablishingWs=()=>{M.debug("[choose-best-ws] close establishing websockets"),g.forEach(G=>{G.onclose=null,G.onopen=null,G.onmessage=null,G.close()}),d(new q($.WS_ABORT,"choose best websocket aborted"))};const E=re("GATEWAY_DOMAINS");let C;const S=r.indexOf("?h="),R=E.find(G=>S!==-1?r.includes(G,S):r.includes(G));M.debug("[choose-best-ws] currentDomain: ",R,", domains: ",E);let k=!this.tryDoubleDomain||i||!R;if(!k&&R){var F;const G=Date.now();try{E.forEach(z=>{const oe=S===-1?r.replace(R,z):r.substr(0,S)+r.substr(S).replace(R,z),ce=new WebSocket(oe);ce.binaryType="arraybuffer",g.push(ce),M.debug("[choose-best-ws] ws is connecting:",ce.url)})}catch{for(M.debug("[choose-best-ws] ws create failed, fallback to single url"),g.forEach(oe=>oe.close());g.length;)g.pop();k=!0}(F=this.store)===null||F===void 0||F.recordJoinChannelService({urls:g.map(z=>z.url),service:"gateway"},a),g.forEach(z=>{z.onopen=()=>{if(p)return;const oe=Date.now()-G;M.debug("[choose-best-ws] ws open cost ".concat(oe,"ms")),g.filter(ce=>ce!==z).forEach(ce=>{M.debug("[choose-best-ws]close backup websocket: ".concat(ce.url)),ce.close()}),p=!0,l(z)},z.onclose=oe=>{C=oe,!p&&(g.find(ce=>!(ce.readyState===WebSocket.CLOSED||ce.readyState===WebSocket.CLOSING))||(M.debug("[choose-best-ws] all websocket is closed"),p=!0,d(C)))},z.onmessage=oe=>{M.debug("[choose-best-ws]".concat(z.url," onmessage: ").concat(oe.data))}}),Zr(this.forceCloseTimeout).then(()=>{g.forEach(z=>{z.readyState!==WebSocket.OPEN&&z.close()})})}if(k){var W;let G;M.debug("[choose-best-ws] use single url: ",r),(W=this.store)===null||W===void 0||W.recordJoinChannelService({urls:[r],service:"gateway"},a);try{G=new WebSocket(r),g.push(G),G.binaryType="arraybuffer"}catch(z){const oe=new q($.WS_ERR,"init websocket failed! Error: ".concat(z.toString()));return M.error("[".concat(this.name,"]").concat(oe)),void d(oe)}G.onopen=()=>{l(G)},G.onclose=z=>{d(z)},G.onmessage=z=>{M.debug("[choose-best-ws]".concat(G.url," onmessage: ").concat(z.data))},Zr(this.forceCloseTimeout).then(()=>{G&&G.readyState!==WebSocket.OPEN&&G.close()})}}).then(l=>(this.closeEstablishingWs=void 0,l)).catch(l=>{throw this.closeEstablishingWs=void 0,l})}}class zP{constructor(r){w(this,"input",[]),w(this,"size",void 0),this.size=r}add(r){this.input.push(r),this.input.length>this.size&&this.input.splice(0,1)}mean(){var r;return this.input.length===0?0:Uc(r=this.input).call(r,(i,a)=>i+a)/this.input.length}}class KP extends Rn{get connectionState(){return this._connectionState}set connectionState(r){r!==this._connectionState&&(this._connectionState=r,r===Zt.CONNECTED?this.emit(je.WS_CONNECTED):r===Zt.RECONNECTING?this.emit(je.WS_RECONNECTING,this._websocketReconnectReason):r===Zt.CLOSED&&this.emit(je.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(r,i){super(),w(this,"_disconnectedReason",void 0),w(this,"_websocketReconnectReason",void 0),w(this,"_connectionState",Zt.CLOSED),w(this,"reconnectToken",void 0),w(this,"websocket",void 0),w(this,"openConnectionTime",void 0),w(this,"clientId",void 0),w(this,"lastMsgTime",Date.now()),w(this,"uploadCache",[]),w(this,"uploadCacheInterval",void 0),w(this,"rttRolling",new zP(5)),w(this,"pingpongTimer",void 0),w(this,"wsInflateDataTimer",void 0),w(this,"pingpongTimeoutCount",0),w(this,"joinResponse",void 0),w(this,"multiIpOption",void 0),w(this,"initError",void 0),w(this,"spec",void 0),w(this,"store",void 0),w(this,"onWebsocketMessage",a=>{if(a.data instanceof ArrayBuffer)return void this.emit(je.ON_BINARY_DATA,a.data);const l=JSON.parse(a.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const d="res-@".concat(l._id);this.emit(d,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")){if(this.emit(l._type,l._message),l._type===ft.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===ft.ON_USER_BANNED)switch(l._message.error_code){case 14:this.close(Wt.UID_BANNED);break;case 15:this.close(Wt.IP_BANNED);break;case 16:this.close(Wt.CHANNEL_BANNED)}if(l._type===ft.ON_USER_LICENSE_BANNED)switch(l._message.error_code){case We.ERR_LICENSE_MISSING:this.close(Wt.LICENSE_MISSING);break;case We.ERR_LICENSE_EXPIRED:this.close(Wt.LICENSE_EXPIRED);break;case We.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Wt.LICENSE_MINUTES_EXCEEDED);break;case We.ERR_LICENSE_PERIOD_INVALID:this.close(Wt.LICENSE_PERIOD_INVALID);break;case We.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Wt.LICENSE_MULTIPLE_SDK_SERVICE);break;case We.ERR_LICENSE_ILLEGAL:this.close(Wt.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=r.clientId,this.spec=r,this.store=i,this.websocket=new ru("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,i),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Zt.CONNECTED&&this.reconnect("retry",Di.OFFLINE)})}async request(r,i,a,l){const d=pn(6,""),p={_id:d,_type:r,_message:i},g=this.websocket.connectionID,E=()=>new Ae((W,G)=>{if(this.connectionState===Zt.CONNECTED)return W();const z=()=>{this.off(je.WS_CLOSED,oe),W()},oe=()=>{this.off(je.WS_CONNECTED,z),G(new q($.WS_ABORT))};this.once(je.WS_CONNECTED,z),this.once(je.WS_CLOSED,oe),r!==Ye.PUBLISH&&r!==Ye.SUBSCRIBE&&r!==Ye.UNSUBSCRIBE&&r!==Ye.UNPUBLISH&&r!==Ye.CONTROL&&r!==Ye.RESTART_ICE||this.once(je.DISCONNECT_P2P,()=>{G(new q($.DISCONNECT_P2P))}),r!==Ye.PUBLISH&&r!==Ye.RESTART_ICE||this.once(je.ABORT_P2P_EXECUTION,()=>{G(new q($.DISCONNECT_P2P))})});if(this.connectionState!==Zt.CONNECTING&&this.connectionState!==Zt.RECONNECTING||r===Ye.JOIN||r===Ye.REJOIN||await E(),this.websocket.sendMessage(p,!0),l)return;const C=new Ae((W,G)=>{let z=!1;const oe=(ye,Ne)=>{z=!0,W({isSuccess:ye==="success",message:Ne||{}}),this.off(je.WS_CLOSED,ce),this.off(je.WS_RECONNECTING,ce),this.emit(je.REQUEST_SUCCESS,r,i)};this.once("res-@".concat(d),oe);const ce=()=>{G(new q($.WS_ABORT,"type: ".concat(r))),this.off(je.WS_CLOSED,ce),this.off(je.WS_RECONNECTING,ce),this.off("res-@".concat(d),oe)};this.once(je.WS_CLOSED,ce),this.once(je.WS_RECONNECTING,ce),Zr(re("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==g||z||(M.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(r)),this.emit(je.REQUEST_TIMEOUT,r,i))})});let S=null;try{S=await C}catch(W){if(this.connectionState===Zt.CLOSED||r===Ye.LEAVE)throw new q($.WS_ABORT);return!this.spec.forceWaitGatewayResponse||a?W.throw():r===Ye.JOIN||r===Ye.REJOIN?null:(await E(),await this.request(r,i))}if(S.isSuccess)return S.message;const R=Number(S.message.error_code||S.message.code),k=Cp(R),F=new q($.UNEXPECTED_RESPONSE,"".concat(k.desc,": ").concat(S.message.error_str),{code:R,data:S.message});return k.action==="success"?S.message:(M.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(r,", error_code: ").concat(R,", message: ").concat(k.desc,", action: ").concat(k.action)),R===We.ERR_TOO_MANY_BROADCASTERS?((r===Ye.JOIN||r===Ye.REJOIN)&&(this.initError=F,this.close()),F.throw()):k.action==="failed"?F.throw():k.action==="quit"?(this.initError=F,this.close(),F.throw()):(R===We.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=S.message.option,M.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Di.MULTI_IP)):this.reconnect(k.action,Di.SERVER_ERROR),r===Ye.JOIN||r===Ye.REJOIN?null:await this.request(r,i)))}waitMessage(r,i){return new Ae(a=>{const l=d=>{(!i||i(d))&&(this.off(r,l),a(d))};this.on(r,l)})}upload(r,i){const a={_type:r,_message:i};try{this.websocket.sendMessage(a)}catch{const d=re("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(a),this.uploadCache.length>d&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Zt.CONNECTED)return;const p=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(p._type,p._message)},re("UPLOAD_CACHE_INTERVAL")||2e3))}}send(r,i){const a={_type:r,_message:i};this.websocket.sendMessage(a)}init(r,i){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Ae((a,l)=>{this.once(je.WS_CONNECTED,()=>a(this.joinResponse)),this.once(je.WS_CLOSED,()=>l(this.initError||new q($.WS_ABORT))),this.connectionState=Zt.CONNECTING,this.websocket.init(r).catch(l),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4),setTimeout(()=>{i&&this.openConnectionTime===void 0&&(M.debug("[".concat(this.clientId,"] init websocket timeout while join with fallback to proxy")),l(new q($.INIT_WEBSOCKET_TIMEOUT)))},re("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))})}close(r){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=r||Wt.LEAVE,this.connectionState=Zt.CLOSED,M.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),r===Wt.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new ru("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(je.ABORT_P2P_EXECUTION);const r=await ei(this,je.REQUEST_JOIN_INFO),i=await this.request(Ye.JOIN,r);if(!i)return this.emit(je.REPORT_JOIN_GATEWAY,$.TIMEOUT,this.url||""),!1;this.joinResponse=i,this.emit(je.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new q($.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const r=nu(this,je.REQUEST_REJOIN_INFO);r.token=this.reconnectToken;const i=await this.request(Ye.REJOIN,r);return!!i&&(this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),i.peers&&i.peers.forEach(a=>{this.emit(ft.ON_USER_ONLINE,{uid:a.uid}),a.audio&&this.emit(ft.ON_ADD_AUDIO_STREAM,{uid:a.uid,uint_id:a.uint_id,audio:!0,ssrcId:a.audio_ssrc}),a.video&&this.emit(ft.ON_ADD_VIDEO_STREAM,{uid:a.uid,uint_id:a.uint_id,video:!0,ssrcId:a.video_ssrc}),a.audio_mute?this.emit(ft.MUTE_AUDIO,{uid:a.uid}):this.emit(ft.UNMUTE_AUDIO,{uid:a.uid}),a.video_mute?this.emit(ft.MUTE_VIDEO,{uid:a.uid}):this.emit(ft.UNMUTE_VIDEO,{uid:a.uid}),a.audio_enable_local?this.emit(ft.ENABLE_LOCAL_AUDIO,{uid:a.uid}):this.emit(ft.DISABLE_LOCAL_AUDIO,{uid:a.uid}),a.video_enable_local?this.emit(ft.ENABLE_LOCAL_VIDEO,{uid:a.uid}):this.emit(ft.DISABLE_LOCAL_VIDEO,{uid:a.uid}),a.audio||a.video||this.emit(ft.ON_REMOVE_STREAM,{uid:a.uid,uint_id:a.uint_id})}),!0)}reconnect(r,i){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(r,i)}handleNotification(r){M.debug("[".concat(this.clientId,"] receive notification: "),r);const i=Cp(r.code);if(i.action!=="success"){if(i.action!=="failed")return i.action==="quit"?(i.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Wt.UID_BANNED),void this.close()):void this.reconnect(i.action,Di.SERVER_ERROR);M.error("[".concat(this.clientId,"] ignore error: "),i.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const r=re("PING_PONG_TIME_OUT"),i=Date.now();this.pingpongTimeoutCount>=r&&(M.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(i-this.lastMsgTime,"ms")),i-this.lastMsgTime>re("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Di.TIMEOUT):this.request(Ye.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const a=Date.now()-i;this.rttRolling.add(a),re("REPORT_STATS")&&this.send(Ye.PING_BACK,{pingpongElapse:a})}).catch(a=>{})}handleWsInflateData(){const{wsInflateLength:r,wsDeflateLength:i}=this.websocket.getWsInflateData();r!==0&&i!==0&&this.upload(ho.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:i,ws_inflate_length:r})}handleWebsocketEvents(){this.websocket.on(Ze.RECONNECT_WAITTING_FINISH,r=>{this.emit(je.WS_RECONNECT_WAITTING_FINISH,r)}),this.websocket.on(Ze.RECONNECT_CREATE_CONNECTION,r=>{this.emit(je.WS_RECONNECT_CREATE_CONNECTION,r)}),this.websocket.on(Ze.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Ze.CLOSED,()=>{this.connectionState=Zt.CLOSED}),this.websocket.on(Ze.FAILED,()=>{this._disconnectedReason=Wt.NETWORK_ERROR,this.connectionState=Zt.CLOSED}),this.websocket.on(Ze.RECONNECTING,r=>{this._websocketReconnectReason=r,this.joinResponse=void 0,this.connectionState===Zt.CONNECTED?this.connectionState=Zt.RECONNECTING:this.connectionState=Zt.CONNECTING}),this.websocket.on(Ze.WILL_RECONNECT,(r,i)=>{if(nu(this,je.IS_P2P_DISCONNECTED)&&r==="retry")return M.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(je.NEED_RENEW_SESSION),this.emit(je.DISCONNECT_P2P),i("tryNext");r!=="retry"&&(M.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(r)),this.reconnectToken=void 0,this.emit(je.NEED_RENEW_SESSION),this.emit(je.DISCONNECT_P2P)),i(r)}),this.websocket.on(Ze.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(r=>{M.warning("[".concat(this.clientId,"] rejoin failed ").concat(r)),this.reconnect("tryNext",Di.SERVER_ERROR)}):this.join().catch(r=>{if(this.emit(je.REPORT_JOIN_GATEWAY,r.message||r.code,this.url||""),r instanceof q&&r.code===$.UNEXPECTED_RESPONSE&&r.data.code===We.ERR_NO_AUTHORIZED)return M.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Di.SERVER_ERROR);M.error("[".concat(this.clientId,"] join gateway request failed"),r.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Di.SERVER_ERROR):(this.initError=r,this.close())})}),this.websocket.on(Ze.REQUEST_NEW_URLS,(r,i)=>{ei(this,je.REQUEST_RECOVER,this.multiIpOption).then(r).catch(i)}),this.websocket.on(Ze.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(ft.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}}function YP(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}class AK extends Rn{get url(){return this._url?this._url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(r){["tryNext","recover"].includes(r)&&this.resetReconnectCount(r),this._reconnectMode=r}get state(){return this._state}set state(r){r!==this._state&&(this._state=r,this._state==="reconnecting"?this.emit(kn.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(kn.CONNECTED):this._state==="closed"?this.emit(kn.CLOSED):this._state==="failed"&&this.emit(kn.FAILED))}constructor(r,i,a,l){super(),w(this,"connectionID",0),w(this,"currentURLIndex",0),w(this,"reconnectReason",void 0),w(this,"_reconnectMode","tryNext"),w(this,"_initMutex",void 0),w(this,"_name",void 0),w(this,"_state","closed"),w(this,"_reconnectInterrupter",void 0),w(this,"_url",void 0),w(this,"_retryConfig",void 0),w(this,"_reconnectCount",0),w(this,"_forceCloseTimeout",5e3),w(this,"_onlineReconnectListener",void 0),w(this,"_closeEstablishingTransmitter",()=>{}),w(this,"_store",void 0),w(this,"_joinChannelServiceRecordIndex",void 0),w(this,"_transmitter",void 0),w(this,"_useCompress",void 0),w(this,"_inflateLength",0),w(this,"_deflateLength",0),this._store=l,this._name=r,this._retryConfig=function(d){for(var p=1;p<arguments.length;p++){var g=arguments[p]!=null?arguments[p]:{};p%2?YP(Object(g),!0).forEach(function(E){w(d,E,g[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(g)):YP(Object(g)).forEach(function(E){Object.defineProperty(d,E,Object.getOwnPropertyDescriptor(g,E))})}return d}({},i),this._useCompress=a}resetReconnectCount(r){M.debug("".concat(this._name," reset reconnect count, reason: ").concat(r)),this._reconnectCount=0}close(r,i){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;const a=this._transmitter;i?setTimeout(()=>a.close(),500):a.close(),this._transmitter=void 0}this.state=r?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()}reconnect(r,i){if(!this._transmitter)return void M.warning("[".concat(this._name,"] can not reconnect, no websocket"));var a;r!==void 0&&(this.reconnectMode=r),M.debug("[".concat(this._name,"] reconnect is triggered initiative")),typeof this._joinChannelServiceRecordIndex=="number"&&((a=this._store)===null||a===void 0||a.recordJoinChannelService({status:"error",errors:[new Error(i)]},this._joinChannelServiceRecordIndex));const l=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),l&&l.bind(this._transmitter)({code:9999,reason:i})}getInflateData(){const r=this._inflateLength,i=this._deflateLength;return this.clearInflateData(),{inflateLength:r,deflateLength:i}}setInflateData(r){this._deflateLength=this._deflateLength+r.originLength,this._inflateLength=this._inflateLength+r.compressedLength}clearInflateData(){this._inflateLength=0,this._deflateLength=0}}function qP(n,r,i){if("getBigUint64"in DataView.prototype)return n.getBigUint64(r,i);const a=n.getUint32(r,i),l=n.getUint32(r+4,i),d=+!!i,p=+!i;return BigInt(a*p+l*d)<<BigInt(32)|BigInt(a*d+l*p)}function XP(n,r,i,a){if("setBigUint64"in DataView.prototype)return n.setBigUint64(r,i,a);const l=Number(i>>BigInt(32)),d=Number(i&BigInt(4294967295));a?(n.setUint32(r+4,l,a),n.setUint32(r,d,a)):(n.setUint32(r,l,a),n.setUint32(r+4,d,a))}let Zo;(function(n){n[n.Default=0]="Default",n[n.Ack=1]="Ack"})(Zo||(Zo={}));class NK{constructor(r,i,a){w(this,"version",1),w(this,"initialRTO",void 0),w(this,"maxBatchAckCount",void 0),w(this,"maxRTO",void 0),w(this,"initialRTT",void 0),w(this,"ID",void 0),w(this,"rtt",void 0),w(this,"packetNumber",1),w(this,"rtoRatioMap",new Map),w(this,"timeoutMap",new Map),w(this,"unorderedPacketQueue",[]),w(this,"batchAckPacketQueue",[]),w(this,"lastOrderedPacketNumber",0),w(this,"batchAckTimer",void 0),w(this,"sendImpl",void 0),w(this,"receiveImpl",void 0),this.sendImpl=r,this.receiveImpl=i,this.ID=pn(7,"transmitter-"),this.initialRTO=(a==null?void 0:a.initialRTO)!==void 0?a.initialRTO:re("TRANSMITTER_INITIAL_RTO"),this.initialRTT=(a==null?void 0:a.initialRTT)!==void 0?a.initialRTT:re("TRANSMITTER_INITIAL_RTT"),this.rtt=(a==null?void 0:a.initialRTT)!==void 0?a.initialRTT:re("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=(a==null?void 0:a.maxBatchAckCount)!==void 0?a.maxBatchAckCount:re("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=(a==null?void 0:a.maxRTO)!==void 0?a.maxRTO:re("TRANSMITTER_MAX_RTO")}packetize(r,i){return{type:Zo.Default,version:this.version,packetNumber:i,payload:r}}serialize(r){switch(r.type){case Zo.Default:{let i;typeof r.payload=="string"?i=new TextEncoder().encode(r.payload):i=r.payload;const a=new ArrayBuffer(i.length+15),l=new DataView(a);return l.setUint16(0,r.version),l.setUint8(2,r.type),l.setUint32(3,r.packetNumber),XP(l,7,BigInt(r.sendTs)),new Uint8Array(l.buffer).set(i,15),a}case Zo.Ack:{const i=new ArrayBuffer(16),a=new DataView(i);return a.setUint16(0,r.version),a.setUint8(2,r.type),a.setUint32(3,r.maxAckPacketNumber),a.setUint8(7,r.shift),XP(a,8,BigInt(r.ackSendTs)),i}}}deserialize(r){const i=new DataView(r),a=i.getUint16(0),l=i.getUint8(2);switch(l){case Zo.Default:{const d=i.getUint32(3),p=qP(i,7),g=r.slice(15),E=new TextDecoder().decode(g);return{version:a,type:l,packetNumber:d,sendTs:Number(p),payload:E}}case Zo.Ack:{const d=i.getUint32(3),p=i.getUint8(7),g=qP(i,8);return{version:a,type:l,maxAckPacketNumber:d,shift:p,ackSendTs:Number(g)}}default:throw M.error("[".concat(this.ID,"] Unrecognized packet type ").concat(l)),new Error("Unrecognized packet type ".concat(l))}}sendMessage(r){const i=this.packetize(r,this.packetNumber);this.packetNumber=this.packetNumber===4294967295?1:this.packetNumber+1;const a=this.calculateRTO(i),l=window.setTimeout(()=>{this.resendMessage(i)},a);this.timeoutMap.set(i.packetNumber,l),this.sendPacket(i)}onData(r){const i=this.deserialize(r);i.type===Zo.Default?this.ack(i):i.type===Zo.Ack&&(this.updateRTT(i,Math.round(performance.now())),this.clearRTO(i))}close(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach(r=>{let[i,a]=r;window.clearTimeout(a)}),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,this.batchAckTimer!==void 0&&window.clearTimeout(this.batchAckTimer)}resendMessage(r){const i=this.calculateRTO(r),a=window.setTimeout(()=>{this.resendMessage(r)},i);this.timeoutMap.set(r.packetNumber,a),this.sendPacket(r)}calculateRTO(r){const i=this.rtoRatioMap.get(r.packetNumber);if(i===void 0)return this.rtoRatioMap.set(r.packetNumber,1),this.initialRTO;{const a=9*this.rtt/8*i;return this.rtoRatioMap.set(r.packetNumber,i+1),a>this.maxRTO?this.maxRTO:a}}updateRTT(r,i){const a=r.ackSendTs;this.rtt=this.rtt*(7/8)+(i-a-this.rtt)/8}ack(r){if(r.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(r):(this.batchAckPacketQueue.push(r),this.batchAckTimer=window.setTimeout(()=>{this.batchAck()},this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(r.payload);;){const i=this.unorderedPacketQueue[0];if(!i){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl(i.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else if(r.packetNumber<=this.lastOrderedPacketNumber){const i={ackSendTs:r.sendTs,maxAckPacketNumber:r.packetNumber,shift:0,type:Zo.Ack,version:this.version};this.sendPacket(i)}else if(r.packetNumber>this.lastOrderedPacketNumber){this.unorderedPacketQueue[r.packetNumber-this.lastOrderedPacketNumber-2]=r;const i={ackSendTs:r.sendTs,maxAckPacketNumber:r.packetNumber,shift:0,type:Zo.Ack,version:this.version};this.sendPacket(i)}}batchAck(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0;const r={ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:Zo.Ack,version:this.version};this.sendPacket(r),this.batchAckPacketQueue=[]}sendPacket(r){r.type===Zo.Default&&(r.sendTs=Math.round(performance.now()));const i=this.serialize(r);this.sendImpl(i)}clearRTO(r){for(let i=r.maxAckPacketNumber-r.shift;i<=r.maxAckPacketNumber;i++){const a=this.timeoutMap.get(i);a!==void 0&&window.clearTimeout(a),this.timeoutMap.delete(i),this.rtoRatioMap.delete(i)}}}class JP extends AK{constructor(r,i){super(r,i,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3?arguments[3]:void 0),w(this,"_initMutex",void 0),w(this,"_reconnectInterrupter",void 0),w(this,"_url",void 0),w(this,"_transmitter",void 0),w(this,"_addresses",void 0),w(this,"_reliableTransmission",void 0),this._initMutex=new bi("datachannel");const{timeout:a,timeoutFactor:l}=i,d=Math.max(300,Math.floor(3*a/5)),p=Math.max(1.2,Math.floor(8*l)/10);li.ONLINE&&(this._retryConfig.timeout=d,this._retryConfig.timeoutFactor=p),er.on(Gc.NETWORK_STATE_CHANGE,(g,E)=>{g!==E&&(this.resetReconnectCount("network state change: ".concat(E," -> ").concat(g)),g===li.ONLINE?(this._retryConfig.timeout=d,this._retryConfig.timeoutFactor=p):(this._retryConfig.timeout=a,this._retryConfig.timeoutFactor=l))})}getConnection(){if(this._reliableTransmission)return this._reliableTransmission}async init(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;this._forceCloseTimeout=i;const a=(l,d)=>{this._addresses=r,this.currentURLIndex=this._addresses.findIndex(g=>g.fingerprint||re("FINGERPRINT"));const p=this._addresses[this.currentURLIndex];this.state="connecting",this.createTransmitterConnection(p).then(l).catch(d),this.once(kn.CLOSED,()=>d(new q($.WS_DISCONNECT))),this.once(kn.CONNECTED,()=>l())};return this._initMutex.lock().then(l=>new Ae((d,p)=>{a(d,p)}).then(()=>{l()}).catch(()=>{l()}))}sendMessage(r){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new q($.WS_ABORT,"datachannel is not ready");try{i||(r=JSON.stringify(r)),this._reliableTransmission.sendMessage(r)}catch(a){throw new q($.WS_ERR,"send datachannel signal message error"+a.toString())}}unbindDcCloseEventListener(){this._transmitter&&(this._transmitter.onclose=null)}sendMessageWithJSON(r){const i=JSON.stringify(r);return{compressed:i,compressedLength:i.length,origin:r}}sendMessageWithUint8Array(r){return{compressed:r,compressedLength:r.byteLength,origin:r}}createTransmitterConnection(r){return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(r.ip,":").concat(r.port),new Ae((i,a)=>{var l;const d=()=>{M.debug("[".concat(this._name,"] datachannel opened:"),this._url),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),i()},p=async S=>{var R;if((R=this._closeEstablishingTransmitter)===null||R===void 0||R.call(this),M.debug("[".concat(this._name,"] datachannel close ").concat(this._url,", code: ").concat(S.code,", reason: ").concat(S.reason,", current mode: ").concat(this.reconnectMode)),this._reconnectCount<this._retryConfig.maxRetryCount){this.state==="connected"&&(this.reconnectReason=S.reason,this.state="reconnecting");const k=wa(this,kn.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,F=await this.reconnectWithAction(k);if(this.state==="closed")return void M.debug("[".concat(this.connectionID,"] dc is closed, no need to reconnect"));if(!F)return a(new q($.WS_DISCONNECT,"datachannel reconnect failed: ".concat(S.code))),void this.close(!0);i()}else a(new q($.WS_DISCONNECT,"datachannel close: ".concat(S.code))),this.close()},g=S=>{var R;(R=this._reliableTransmission)===null||R===void 0||R.onData(S.data)};this._transmitter&&(this._transmitter.onclose=null,this._transmitter.close()),this._reliableTransmission&&(this._reliableTransmission.close(),this._reliableTransmission=void 0),M.debug("[".concat(this._name,"] start connect, address: ").concat(JSON.stringify(r)));const E=(l=this._store)===null||l===void 0?void 0:l.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),C=Date.now();ei(this,kn.TO_CONNECT_DATACHANNEL,r).then(S=>{var R,k;if(!S)throw new Error("transmissonInfo not exist yet");const{transmitter:F,close:W}=S;this._transmitter=F,(R=this._store)===null||R===void 0||R.signalChannelOpen();const G=Date.now()-C;M.debug("[choose dc] dc open cost ".concat(G,"ms")),this._reliableTransmission=new NK(z=>{var oe;this._transmitter&&this._transmitter.readyState==="open"&&((oe=this._transmitter)===null||oe===void 0||oe.send(z))},z=>{typeof z=="string"&&this.emit(kn.ON_MESSAGE,z)}),this._closeEstablishingTransmitter=()=>{var z;(z=this._reliableTransmission)===null||z===void 0||z.close(),this._reliableTransmission=void 0,W()},d&&d(),F.onclose=p,F.onmessage=g,(k=this._store)===null||k===void 0||k.recordJoinChannelService({endTs:Date.now(),status:"success"},E),this._joinChannelServiceRecordIndex=E}).catch(S=>{var R;if((R=this._store)===null||R===void 0||R.recordJoinChannelService({endTs:Date.now(),status:S instanceof q&&S.code===$.WS_ABORT?"aborted":"error",errors:[S]},E),this.state!=="closed"){if(S instanceof q&&S.code===$.WS_ERR){const k=new q($.WS_ERR,"init datachannel failed! Error: ".concat(S.toString()));return M.error("[".concat(this._name,"]").concat(k)),void a(k)}p&&p(S)}else a(new q($.WS_DISCONNECT,"datachannel is closed: ".concat(S.toString())))})})}async reconnectWithAction(r){let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this._reconnectCount>=this._retryConfig.maxRetryCount||!this._addresses||this.state==="closed")return!1;this._onlineReconnectListener||er.networkState!==li.OFFLINE||(this._onlineReconnectListener=er.onlineWaiter&&er.onlineWaiter.then(()=>{this._onlineReconnectListener=void 0}));let a=!0;if(this._reconnectInterrupter=()=>{a=!1},i){const p=VS(this._reconnectCount,this._retryConfig);M.debug("[".concat(this._name,"] wait ").concat(p,"ms to reconnect datachannel, mode: ").concat(r)),await Ae.race([Zr(p),this._onlineReconnectListener||new Ae(()=>{})])}if(this.state==="closed"||!a)return!1;this._reconnectCount+=1;const l=async(p,g)=>{this.emit(kn.RECONNECT_CREATE_CONNECTION,g),await this.createTransmitterConnection(p)};try{if(r==="retry"){const p=this._addresses[this.currentURLIndex];this.emit(kn.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else if(r==="tryNext"){this.currentURLIndex+=1;for(let g=this.currentURLIndex;g<this._addresses.length;g++){if(this._addresses[g].fingerprint||re("FINGERPRINT")){this.currentURLIndex=g;break}this.currentURLIndex+=1}if(this.currentURLIndex>=this._addresses.length)return M.debug("[".concat(this._name,"] the available addresses are exhausted, change to recover")),await this.reconnectWithAction("recover",!1);M.debug("[".concat(this._name,"] datachannel url length: ").concat(this._addresses.length," current index: ").concat(this.currentURLIndex));const p=this._addresses[this.currentURLIndex];this.emit(kn.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else r==="recover"&&(M.debug("[".concat(this._name,"] start to failback to websocket")),this.resetReconnectCount("recover mode"),this.emit(kn.RECONNECT_WAITTING_FINISH,r),this.emit(kn.FAILBACK));return!0}catch(p){var d;return M.error("[".concat(this._name,"] reconnect failed"),p.toString()),p!=null&&(d=p.data)!==null&&d!==void 0&&d.desc&&Array.isArray(p.data.desc)&&p.data.desc.length&&p.data.desc.includes("dynamic key expired")?(this.emit(kn.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(r,i)}}}class sc extends Rn{get connectionState(){return this._connectionState}set connectionState(r){r!==this._connectionState&&(this._connectionState=r,r===Zt.CONNECTED?this.emit(je.WS_CONNECTED):r===Zt.RECONNECTING?this.emit(je.WS_RECONNECTING,this._websocketReconnectReason):r===Zt.CLOSED&&this.emit(je.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(r,i){super(),w(this,"_disconnectedReason",void 0),w(this,"_websocketReconnectReason",void 0),w(this,"_connectionState",Zt.CLOSED),w(this,"reconnectToken",void 0),w(this,"websocket",void 0),w(this,"openConnectionTime",void 0),w(this,"clientId",void 0),w(this,"lastMsgTime",Date.now()),w(this,"uploadCache",[]),w(this,"uploadCacheInterval",void 0),w(this,"rttRolling",new zP(5)),w(this,"pingpongTimer",void 0),w(this,"inflateDataTimer",void 0),w(this,"pingpongTimeoutCount",0),w(this,"joinResponse",void 0),w(this,"multiIpOption",void 0),w(this,"initError",void 0),w(this,"spec",void 0),w(this,"store",void 0),w(this,"onWebsocketMessage",a=>{if(a instanceof ArrayBuffer)return void this.emit(je.ON_BINARY_DATA,a);const l=JSON.parse(a);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const d="res-@".concat(l._id);this.emit(d,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")&&(this.emit(l._type,l._message),l._type===ft.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===ft.ON_USER_BANNED))switch(l._message.error_code){case 14:this.close(Wt.UID_BANNED);break;case 15:this.close(Wt.IP_BANNED);break;case 16:this.close(Wt.CHANNEL_BANNED)}}),this.clientId=r.clientId,this.spec=r,this.store=i,this.websocket=new JP("gateway-".concat(this.clientId),this.spec.retryConfig,!0,i),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Zt.CONNECTED&&this.reconnect("retry",ws.OFFLINE)})}async request(r,i,a,l){const d=pn(6,""),p={_id:d,_type:r,_message:i},g=this.websocket.connectionID,E=()=>new Ae((W,G)=>{if(this.connectionState===Zt.CONNECTED)return W();const z=()=>{this.off(je.WS_CLOSED,oe),W()},oe=()=>{this.off(je.WS_CONNECTED,z),G(new q($.WS_ABORT))};this.once(je.WS_CONNECTED,z),this.once(je.WS_CLOSED,oe),r!==Ye.PUBLISH&&r!==Ye.SUBSCRIBE&&r!==Ye.UNSUBSCRIBE&&r!==Ye.UNPUBLISH&&r!==Ye.CONTROL&&r!==Ye.RESTART_ICE||this.once(je.DISCONNECT_P2P,()=>{G(new q($.DISCONNECT_P2P))}),r!==Ye.PUBLISH&&r!==Ye.RESTART_ICE||this.once(je.ABORT_P2P_EXECUTION,()=>{G(new q($.DISCONNECT_P2P))})});if(this.connectionState!==Zt.CONNECTING&&this.connectionState!==Zt.RECONNECTING||r===Ye.JOIN||r===Ye.REJOIN||await E(),r===Ye.LEAVE&&(this.websocket.unbindDcCloseEventListener(),l=!0),this.websocket.sendMessage(p,!0,!1),l)return;const C=new Ae((W,G)=>{let z=!1;const oe=(ye,Ne)=>{z=!0,W({isSuccess:ye==="success",message:Ne||{}}),this.off(je.WS_CLOSED,ce),this.off(je.WS_RECONNECTING,ce),this.emit(je.REQUEST_SUCCESS,r,i)};this.once("res-@".concat(d),oe);const ce=()=>{G(new q($.WS_ABORT,"type: ".concat(r))),this.off(je.WS_CLOSED,ce),this.off(je.WS_RECONNECTING,ce),this.off("res-@".concat(d),oe)};this.once(je.WS_CLOSED,ce),this.once(je.WS_RECONNECTING,ce),Zr(re("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==g||z||(M.warning("dc request timeout, type: ".concat(r)),this.emit(je.REQUEST_TIMEOUT,r,i))})});let S=null;try{S=await C}catch(W){if(this.connectionState===Zt.CLOSED||r===Ye.LEAVE)throw new q($.WS_ABORT);return!this.spec.forceWaitGatewayResponse||a?W.throw():r===Ye.JOIN||r===Ye.REJOIN?null:(await E(),await this.request(r,i))}if(S.isSuccess)return S.message;const R=Number(S.message.error_code||S.message.code),k=Cp(R),F=new q($.UNEXPECTED_RESPONSE,"".concat(k.desc,": ").concat(S.message.error_str),{code:R,data:S.message});return k.action==="success"?S.message:(M.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(r,", error_code: ").concat(R,", message: ").concat(k.desc,", action: ").concat(k.action)),R===We.ERR_TOO_MANY_BROADCASTERS?((r===Ye.JOIN||r===Ye.REJOIN)&&(this.initError=F,this.close()),F.throw()):k.action==="failed"?F.throw():k.action==="quit"?(this.initError=F,this.close(),F.throw()):(R===We.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=S.message.option,M.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",ws.MULTI_IP)):this.reconnect(k.action,ws.SERVER_ERROR),r===Ye.JOIN||r===Ye.REJOIN?null:await this.request(r,i)))}waitMessage(r,i){return new Ae(a=>{const l=d=>{(!i||i(d))&&(this.off(r,l),a(d))};this.on(r,l)})}upload(r,i){const a={_type:r,_message:i};try{this.websocket.sendMessage(a)}catch{const d=re("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(a),this.uploadCache.length>d&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Zt.CONNECTED)return;const p=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(p._type,p._message)},re("UPLOAD_CACHE_INTERVAL")||2e3))}}send(r,i){const a={_type:r,_message:i};this.websocket.sendMessage(a)}init(r,i){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Ae((a,l)=>{this.once(je.WS_CONNECTED,()=>a(this.joinResponse)),this.once(je.WS_CLOSED,()=>l(this.initError||new q($.WS_ABORT))),this.connectionState=Zt.CONNECTING,this.websocket.init(r).catch(l),this.websocket.once(kn.FAILBACK,()=>{this.openConnectionTime===void 0&&l(new q($.INIT_DATACHANNEL_TIMEOUT))}),this.inflateDataTimer&&window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=window.setInterval(()=>{this.handleInflateData()},2e4),setTimeout(()=>{i&&this.openConnectionTime===void 0&&(M.debug("[".concat(this.clientId,"] init datachannel timeout while join with failback to websocket")),l(new q($.INIT_DATACHANNEL_TIMEOUT)))},re("DC_JOIN_WITH_FAILBACK"))})}close(r){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=r||Wt.LEAVE,this.connectionState=Zt.CLOSED,M.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),r===Wt.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new JP("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(je.ABORT_P2P_EXECUTION);const r=await ei(this,je.DATACHANNEL_CONNECTING),i=await this.request(Ye.JOIN,r);if(!i)return this.emit(je.REPORT_JOIN_GATEWAY,$.TIMEOUT,this.url||""),!1;this.joinResponse=i,this.emit(je.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new q($.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const r=nu(this,je.REQUEST_REJOIN_INFO);r.token=this.reconnectToken;const i=await this.request(Ye.REJOIN,r);return!!i&&(this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),i.peers&&i.peers.forEach(a=>{this.emit(ft.ON_USER_ONLINE,{uid:a.uid}),a.audio&&this.emit(ft.ON_ADD_AUDIO_STREAM,{uid:a.uid,uint_id:a.uint_id,audio:!0,ssrcId:a.audio_ssrc}),a.video&&this.emit(ft.ON_ADD_VIDEO_STREAM,{uid:a.uid,uint_id:a.uint_id,video:!0,ssrcId:a.video_ssrc}),a.audio_mute?this.emit(ft.MUTE_AUDIO,{uid:a.uid}):this.emit(ft.UNMUTE_AUDIO,{uid:a.uid}),a.video_mute?this.emit(ft.MUTE_VIDEO,{uid:a.uid}):this.emit(ft.UNMUTE_VIDEO,{uid:a.uid}),a.audio_enable_local?this.emit(ft.ENABLE_LOCAL_AUDIO,{uid:a.uid}):this.emit(ft.DISABLE_LOCAL_AUDIO,{uid:a.uid}),a.video_enable_local?this.emit(ft.ENABLE_LOCAL_VIDEO,{uid:a.uid}):this.emit(ft.DISABLE_LOCAL_VIDEO,{uid:a.uid}),a.audio||a.video||this.emit(ft.ON_REMOVE_STREAM,{uid:a.uid,uint_id:a.uint_id})}),!0)}reconnect(r,i){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(r,i)}handleNotification(r){M.debug("[".concat(this.clientId,"] receive notification: "),r);const i=Cp(r.code);if(i.action!=="success"){if(i.action!=="failed")return i.action==="quit"?(i.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Wt.UID_BANNED),void this.close()):void this.reconnect(i.action,ws.SERVER_ERROR);M.error("[".concat(this.clientId,"] ignore error: "),i.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const r=re("PING_PONG_TIME_OUT"),i=Date.now();this.pingpongTimeoutCount>=r&&(M.warning("PINGPONG Timeout. Last Socket Message: ".concat(i-this.lastMsgTime,"ms")),i-this.lastMsgTime>re("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",ws.TIMEOUT):this.request(Ye.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const a=Date.now()-i;this.rttRolling.add(a),re("REPORT_STATS")&&this.send(Ye.PING_BACK,{pingpongElapse:a})}).catch(a=>{})}handleInflateData(){const{inflateLength:r,deflateLength:i}=this.websocket.getInflateData();r!==0&&i!==0&&this.upload(ho.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:i,ws_inflate_length:r})}handleWebsocketEvents(){this.websocket.on(kn.RECONNECT_WAITTING_FINISH,r=>{this.emit(je.WS_RECONNECT_WAITTING_FINISH,r)}),this.websocket.on(kn.RECONNECT_CREATE_CONNECTION,r=>{this.emit(je.WS_RECONNECT_CREATE_CONNECTION,r)}),this.websocket.on(kn.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(kn.CLOSED,()=>{this.connectionState=Zt.CLOSED}),this.websocket.on(kn.FAILED,()=>{this._disconnectedReason=Wt.NETWORK_ERROR,this.connectionState=Zt.CLOSED}),this.websocket.on(kn.RECONNECTING,r=>{this._websocketReconnectReason=r,this.joinResponse=void 0,this.connectionState===Zt.CONNECTED?this.connectionState=Zt.RECONNECTING:this.connectionState=Zt.CONNECTING}),this.websocket.on(kn.WILL_RECONNECT,(r,i)=>{if(nu(this,je.IS_P2P_DISCONNECTED)&&r==="retry")return M.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(je.NEED_RENEW_SESSION),this.emit(je.DISCONNECT_P2P),i("tryNext");r!=="retry"&&(M.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(r)),this.reconnectToken=void 0,this.emit(je.NEED_RENEW_SESSION),this.emit(je.DISCONNECT_P2P)),i(r)}),this.websocket.on(kn.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(r=>{M.warning("[".concat(this.clientId,"] rejoin failed ").concat(r)),this.reconnect("tryNext",ws.SERVER_ERROR)}):this.join().catch(r=>{if(this.emit(je.REPORT_JOIN_GATEWAY,r.message||r.code,this.url||""),r instanceof q&&r.code===$.UNEXPECTED_RESPONSE&&r.data.code===We.ERR_NO_AUTHORIZED)return M.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",ws.SERVER_ERROR);M.error("[".concat(this.clientId,"] join gateway request failed"),r.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",ws.SERVER_ERROR):(this.initError=r,this.close())})}),this.websocket.on(kn.REQUEST_NEW_URLS,(r,i)=>{ei(this,je.REQUEST_RECOVER,this.multiIpOption).then(r).catch(i)}),this.websocket.on(kn.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(ft.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(kn.TO_CONNECT_DATACHANNEL,async(r,i,a)=>ei(this,je.DATACHANNEL_PRECONNECT,r).then(i).catch(a)),this.websocket.on(kn.FAILBACK,()=>{this.openConnectionTime!==void 0&&this.emit(je.DATACHANNEL_FAILBACK)})}}function QP(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function Ns(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?QP(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):QP(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}const Oy=new Map;class xK extends Rn{get state(){return this._state}set state(r){if(r===this._state)return;const i=this._state;this._state=r,r==="DISCONNECTED"&&this._disconnectedReason?this.emit(bn.CONNECTION_STATE_CHANGE,r,i,this._disconnectedReason):this.emit(bn.CONNECTION_STATE_CHANGE,r,i)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(r){M.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(r)),this._joinGatewayStartTime=r}constructor(r,i){super(),w(this,"store",void 0),w(this,"joinInfo",void 0),w(this,"key",void 0),w(this,"signal",void 0),w(this,"role",void 0),w(this,"inChannelInfo",{joinAt:null,duration:0}),w(this,"spec",void 0),w(this,"_state","DISCONNECTED"),w(this,"_statsCollector",void 0),w(this,"_disconnectedReason",void 0),w(this,"isSignalRecover",!1),w(this,"hasChangeBGPAddress",!1),w(this,"trafficStatsInterval",void 0),w(this,"networkQualityInterval",void 0),w(this,"_joinGatewayStartTime",0),w(this,"_signalTimeout",!1),w(this,"_clientRoleOptions",void 0),w(this,"_isProactiveJoin",!1),this.store=r,this.spec=i,this.signal=this.store.useDataChannel?new sc(Ns(Ns({},i),{},{retryConfig:i.websocketRetryConfig}),r):new KP(Ns(Ns({},i),{},{retryConfig:i.websocketRetryConfig}),r),this._statsCollector=i.statsCollector,this.role=i.role||"audience",this._clientRoleOptions=i.clientRoleOptions,this.handleSignalEvents()}async join(r,i,a){if(this.signal instanceof sc){let E=!1;r.cloudProxyServer!=="disabled"?(M.debug("[".concat(this.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(r.cloudProxyServer,")")),E=!0):"".concat(r.apResponse.cid,"_").concat(r.apResponse.cert).length>255||"".concat(r.apResponse.cid,"_").concat(r.apResponse.cert).length<22?(M.debug("[".concat(this.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),E=!0):r.apResponse.addresses.some(C=>C.fingerprint)||re("FINGERPRINT")||(M.debug("[".concat(this.store.clientId,"] Dc is not supported, because fingerprint does not exist")),E=!0),E&&this.resetSignal()}this.store.joinGatewayStart(),r.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);const l=Date.now();let d=Oy.get(r.cname);if(d||(d=new Map,Oy.set(r.cname,d)),this._isProactiveJoin=!0,d.has(r.uid)){const E=new q($.UID_CONFLICT);throw ke.joinGateway(r.sid,{lts:l,succ:!1,ec:E.message,addr:null,uid:r.uid,cid:r.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!r.proxyServer,signalChannel:this.signal instanceof sc?"1":"0"}),this._isProactiveJoin=!1,E}d.set(r.uid,!0),this.joinInfo=r,this.key=i;let p=0;this.joinGatewayStartTime=l;const g=r.proxyServer;try{let E;if(M.debug("[".concat(this.store.clientId,"] use ").concat(this.signal instanceof sc?"datachannel":"websocket"," join uid ").concat(p)),this.signal instanceof sc)E=await this.signal.init(r.apResponse.addresses,a);else{const C=r.proxyServer,S=C?r.gatewayAddrs.map(R=>{const k=R.address.split(":");return"wss://".concat(C,"/ws/?h=").concat(k[0],"&p=").concat(k[1])}):r.gatewayAddrs.map(R=>"wss://".concat(R.address));E=await this.signal.init(S,a)}p=E.uid,M.debug("[".concat(this.store.clientId,"] ").concat(this.signal instanceof sc?"datachannel":"websocket"," join uid ").concat(p," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(E){throw E&&E.code===$.INIT_WEBSOCKET_TIMEOUT?(M.warning("[".concat(this.store.clientId,"] User join failed"),E.toString()),E):E&&E.code===$.INIT_DATACHANNEL_TIMEOUT?(M.warning("[".concat(this.store.clientId,"] User join datachannel failed"),E.toString()),this.resetSignal(),E):(M.error("[".concat(this.store.clientId,"] User join failed"),E.toString()),ke.joinGateway(r.sid,{lts:l,succ:!1,ec:E.message,addr:this.signal.url,uid:r.uid,cid:r.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!g,signalChannel:this.signal instanceof sc?"1":"0"}),this._isProactiveJoin=!1,d.delete(r.uid),this.signal.close(),E)}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),M.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(E=>{M.warning("[".concat(this.store.clientId,"] get traffic stats error"),E.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(bn.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(bn.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(bn.NETWORK_QUALITY,{uplinkNetworkQuality:UP(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:UP(this._statsCollector.trafficStats.B_dnq)}):this.emit(bn.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),p}async leave(){let r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){i!==Wt.FALLBACK&&(this.state="DISCONNECTING");try{r||this.signal.connectionState!==Zt.CONNECTED||await function(a,l){return l===1/0?a:Ae.race([a,IK(l)])}(this.signal.request(Ye.LEAVE,void 0,!0),3e3)}catch(a){M.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),a)}this.signal.close(i),i!==Wt.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(r,i,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q($.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const l={state:"offer",p2p_id:this.store.p2pId,ortc:i,mode:this.spec.mode,extend:re("PUB_EXTEND"),twcc:!!re("PUBLISH_TWCC"),rtx:!!re("USE_PUB_RTX")};try{return(await this.signal.request(Ye.PUBLISH,l,!0))._message}catch(d){if(a&&d.data&&d.data.code===We.ERR_PUBLISH_REQUEST_INVALID)return M.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),d.toString()),await this.tryUnpubBeforeRepub(r,i),this.publish(r,i,!1);throw d}}async unpublish(r,i){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q($.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(Ye.UNPUBLISH,{stream_id:i,ortc:r},!0)}catch(a){M.warning("[".concat(this.store.clientId,"] unpublish warning: "),a)}}async subscribe(r,i,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q($.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const l={stream_id:r,stream_type:i.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!re("SUBSCRIBE_TWCC"),rtx:!!re("USE_SUB_RTX"),extend:re("SUB_EXTEND"),ssrcId:i.ssrcId,svc:Array.isArray(re("SVC"))&&re("SVC").length!==0?re("SVC"):void 0};try{return(await this.signal.request(Ye.SUBSCRIBE,l,!0))._message}catch(d){if(a&&d.data&&d.data.code===We.ERR_SUBSCRIBE_REQUEST_INVALID)return M.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),d.toString()),await this.tryUnsubBeforeResub(r,i),await this.subscribe(r,i,!1);throw d}}async subscribeAll(r,i){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q($.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const a={p2p_id:this.store.p2pId,users:r,dtx:!1,rtx:!!re("USE_SUB_RTX")};try{return await this.signal.request(Ye.SUBSCRIBE_STREAMS,a,!0)}catch(l){if(i&&l.data&&l.data.code===We.ERR_SUBSCRIBE_REQUEST_INVALID)return M.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),l.toString()),await this.tryMassUnsubBeforeResub(r),await this.subscribeAll(r,!1);throw l}}async setVideoProfile(r){const i=function(a){if(!(a.bitrateMax&&a.bitrateMin&&a.frameRate&&a.height&&a.width))return;let l=a.frameRate,d=a.width,p=a.height,g=!0;return typeof l!="number"&&(l=l.exact||l.ideal||l.max||l.min||0,l||(g=!1)),typeof d!="number"&&(d=d.exact||d.ideal||d.max||d.min||0,d||(g=!1)),typeof p!="number"&&(p=p.exact||p.ideal||p.max||p.min||0,l||(g=!1)),g?{stream_type:0,width:d,height:p,fps:l,start_bps:1e3*a.bitrateMax,min_bps:1e3*a.bitrateMin,target_bps:1e3*a.bitrateMax}:void 0}(r);if(i)return this.signal.request(Ye.SET_VIDEO_PROFILE,i);M.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(r,i){try{await this.signal.request(Ye.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:r,stream_id:i},!0)}catch(a){M.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),a)}}async massUnsubscribe(r){try{await this.signal.request(Ye.UNSUBSCRIBE_STREAMS,r,!0)}catch(i){M.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),i)}}async reconnectPC(r){const{iceParameters:i,dtlsParameters:a,rtpCapabilities:l}=r;return{gatewayEstablishParams:await this.signal.request(Ye.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:i,dtlsParameters:a,rtpCapabilities:l}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(Ye.GATEWAY_INFO)}async renewToken(r){await this.signal.request(Ye.RENEW_TOKEN,r),this.key=r.token}async setClientRole(r,i){if(i&&(this._clientRoleOptions=Object.assign({},i)),this.state!=="CONNECTED")return void(this.role=r);let a;a=r==="audience"?this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:0,await this.signal.request(Ye.SET_CLIENT_ROLE,{role:r,level:a,client_ts:Date.now()}),this.role=r}async setRemoteVideoStreamType(r,i){await this.signal.request(Ye.SWITCH_VIDEO_STREAM,{stream_id:r,stream_type:i})}async setDefaultRemoteVideoStreamType(r){await this.signal.request(Ye.DEFAULT_VIDEO_STREAM,{stream_type:r})}async setStreamFallbackOption(r,i){await this.signal.request(Ye.SET_FALLBACK_OPTION,{stream_id:r,fallback_type:i})}async pickSVCLayer(r,i){await this.signal.request(Ye.PICK_SVC_LAYER,{stream_id:r,spatial_layer:i.spatialLayer,temporal_layer:i.temporalLayer})}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),Ns({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(Ye.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const r=Oy.get(this.joinInfo.cname);r&&r.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const r=function(i){let a;return a=i.startsWith("dc")?i.match(/(dc\:\/\/)?([^:]+):(\d+)/):i.match(/(wss\:\/\/)?([^:]+):(\d+)/),a?{username:Oo.username,password:Oo.password,turnServerURL:a[2],tcpport:parseInt(a[3])+30,udpport:parseInt(a[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],r&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push(Ns(Ns({},Oo),{},{turnServerURL:r.turnServerURL,tcpport:r.tcpport,udpport:r.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;const r=await this.signal.request(Ye.TRAFFIC_STATS,void 0,!0);r.timestamp=Date.now(),r.peer_delay.forEach(i=>{const a=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(l=>l.peer_uid===i.peer_uid);a&&a.B_st!==i.B_st&&ns(()=>{this.emit(bn.STREAM_TYPE_CHANGE,i.peer_uid,i.B_st)})}),this._statsCollector.updateTrafficStats(r)}getJoinMessage(r){if(!this.joinInfo||!this.key)throw new q($.UNEXPECTED_ERROR,"can not generate join message, no join info");const i=Object.assign({},this.joinInfo.apResponse);let a=re("REPORT_APP_SCENARIO");if(typeof a!="string")try{a=JSON.stringify(a)}catch{a=void 0}a&&a.length>128&&(a=void 0);const l=Ns({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:Xo,browser:navigator.userAgent,process_id:re("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:i,extend:re("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:a,attributes:{userAttributes:{enablePublishedUserList:re("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:re("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:typeof re("SUBSCRIBE_AUDIO_FILTER_TOPN")=="number"?re("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:typeof re("ENABLE_PUBLISH_AUDIO_FILTER")=="boolean"?re("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:typeof re("ENABLE_USER_LICENSE_CHECK")=="boolean"?re("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:re("USE_PUB_RTX")===!0||re("USE_SUB_RTX")===!0||void 0}},join_ts:this.joinGatewayStartTime},r);return this.joinInfo.stringUid&&(l.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(l.aes_mode=this.joinInfo.aesmode,re("ENCRYPT_AES")?(l.aes_secret=this.joinInfo.aespassword,l.aes_encrypt=!0):l.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(l.aes_salt=this.joinInfo.aessalt)),i.addresses[this.signal.websocket.currentURLIndex]&&(l.ap_response.ticket=i.addresses[this.signal.websocket.currentURLIndex].ticket,delete i.addresses),this.joinInfo.defaultVideoStream!==void 0&&(l.default_video_stream=this.joinInfo.defaultVideoStream),l}getRejoinMessage(){if(!this.joinInfo)throw new q($.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(je.WS_RECONNECT_WAITTING_FINISH,r=>{["tryNext","recover"].includes(r)&&this.joinInfo&&ke.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(je.WS_RECONNECT_CREATE_CONNECTION,r=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(je.WS_RECONNECTING,r=>{this.joinInfo&&ke.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:r||Di.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",ke.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(je.WS_CLOSED,r=>{let i;switch(r){case Wt.LEAVE:i=Di.LEAVE;break;case Wt.UID_BANNED:case Wt.IP_BANNED:case Wt.CHANNEL_BANNED:case Wt.SERVER_ERROR:i=Di.SERVER_ERROR;break;case Wt.FALLBACK:i=Di.FALLBACK;break;case Wt.LICENSE_MISSING:case Wt.LICENSE_EXPIRED:case Wt.LICENSE_MINUTES_EXCEEDED:case Wt.LICENSE_PERIOD_INVALID:case Wt.LICENSE_MULTIPLE_SDK_SERVICE:case Wt.LICENSE_ILLEGAL:i=r;break;default:i=Di.NETWORK_ERROR}M.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(i||"undefined -> "+Di.NETWORK_ERROR)),this.joinInfo&&ke.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:r===Wt.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:i}),this._disconnectedReason=r,r!==Wt.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(je.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&(this.role==="audience"&&this._clientRoleOptions&&this._clientRoleOptions.level&&(M.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),ke.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof sc?"1":"0"}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&this.joinInfo.setLocalAPVersion===1)){const r=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!r)return void M.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(r));rn("EVENT_REPORT_DOMAIN",r[1]),rn("EVENT_REPORT_BACKUP_DOMAIN",r[1]),rn("LOG_UPLOAD_SERVER","".concat(r[1],":6444"))}}),this.signal.on(ft.ON_UPLINK_STATS,r=>{this._statsCollector.updateUplinkStats(r)}),this.signal.on(je.REQUEST_RECOVER,(r,i,a)=>{if(!this.joinInfo)return a(new q($.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));r&&(this.joinInfo.multiIP=r,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,ei(this,bn.REQUEST_NEW_GATEWAY_LIST).then(i).catch(a)}),this.signal.on(je.REQUEST_JOIN_INFO,async r=>{var i;this.updateTurnConfigFromSignal();const{iceParameters:a,dtlsParameters:l,rtpCapabilities:d}=await ei(this,bn.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:(i=this.joinInfo)===null||i===void 0?void 0:i.turnServer});r(this.getJoinMessage({ortc:{iceParameters:a,dtlsParameters:l,rtpCapabilities:d,version:"2"}}))}),this.signal.on(je.REQUEST_REJOIN_INFO,r=>{r(this.getRejoinMessage())}),this.signal.on(je.REPORT_JOIN_GATEWAY,(r,i)=>{this.joinInfo&&(ke.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:r,addr:i,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof sc?"1":"0"}),this._isProactiveJoin=!1)}),this.signal.on(je.IS_P2P_DISCONNECTED,r=>{r(nu(this,bn.IS_P2P_DISCONNECTED))}),this.signal.on(je.DISCONNECT_P2P,()=>{this.emit(bn.DISCONNECT_P2P)}),this.signal.on(je.NEED_RENEW_SESSION,()=>{this.emit(bn.NEED_RENEW_SESSION)}),this.signal.on(je.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(je.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(je.JOIN_RESPONSE,r=>{const i=this.getCurrentGatewayAddress();this.emit(bn.JOIN_RESPONSE,r,i)}),this.signal.on(je.DATACHANNEL_PRECONNECT,async(r,i,a)=>{this.updateTurnConfigFromSignal();const l=this.getCurrentGatewayAddress();return ei(this,bn.DATACHANNEL_PRECONNECT,r,l).then(i).catch(a)}),this.signal.on(je.DATACHANNEL_CONNECTING,async r=>{const{iceParameters:i,dtlsParameters:a,rtpCapabilities:l}=await ei(this,bn.REQUEST_DC_CONNECTION_PARAMS);r(this.getJoinMessage({ortc:{iceParameters:i,dtlsParameters:a,rtpCapabilities:l,version:"2"}}))}),this.signal.on(je.DATACHANNEL_FAILBACK,()=>{M.warning("[".concat(this.store.clientId,"] User join datachannel failed")),this.reset(),this.resetSignal(),this.emit(bn.DATACHANNEL_FAILBACK)})}async tryUnsubBeforeResub(r,i){try{await this.signal.request(Ye.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:r,ortc:[i]},!0)}catch(a){throw M.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),a),a}}async tryUnpubBeforeRepub(r,i){try{await this.signal.request(Ye.UNPUBLISH,{stream_id:r,ortc:i},!0)}catch(a){throw M.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),a),a}}async tryMassUnsubBeforeResub(r){const i={users:r.map(a=>({stream_id:a.stream_id,stream_type:a.stream_type}))};try{await this.signal.request(Ye.UNSUBSCRIBE_STREAMS,i,!0)}catch(a){throw M.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),a),a}}async muteLocal(r,i){const a={action:r.find(l=>l.stream_type===sr.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:r,stream_id:i};try{await this.signal.request(Ye.CONTROL,a,!0,!0)}catch(l){throw M.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),l),l}}async unmuteLocal(r,i){const a={action:r.find(l=>l.stream_type===sr.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:r,stream_id:i};try{await this.signal.request(Ye.CONTROL,a,!0,!0)}catch(l){throw M.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),l),l}}uploadStats(r,i){this.signal.upload(r,i)}getSignalRTT(){return this.signal.rtt}async restartICE(r){const i={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:r};try{return await this.signal.request(Ye.RESTART_ICE,i,!0)}catch(a){throw M.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),a),a}}reconnect(){this.state==="CONNECTED"&&this.signal.reconnect(void 0,Di.P2P_FAILED)}getCurrentGatewayAddress(){var r;if(!re("GATEWAY_WSS_ADDRESS"))return(r=this.joinInfo)!==null&&r!==void 0&&r.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(r){await this.signal.request(Ye.SET_PARAMETER,{enablePublishAudioFilter:r})}resetSignal(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(Wt.FALLBACK)),this.store.useDataChannel=!1,this.signal=new KP(Ns(Ns({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(bn.RESET_SIGNAL,E0.websocket)}}/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */(function(){var n;function r(fe){var Ce=0;return function(){return Ce<fe.length?{done:!1,value:fe[Ce++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(fe,Ce,Oe){return fe==Array.prototype||fe==Object.prototype||(fe[Ce]=Oe.value),fe},a,l=function(fe){fe=[typeof globalThis=="object"&&globalThis,fe,typeof window=="object"&&window,typeof self=="object"&&self,typeof s=="object"&&s];for(var Ce=0;Ce<fe.length;++Ce){var Oe=fe[Ce];if(Oe&&Oe.Math==Math)return Oe}throw Error("Cannot find global object")}(this);function d(fe,Ce){if(Ce)e:{var Oe=l;fe=fe.split(".");for(var Je=0;Je<fe.length-1;Je++){var Pt=fe[Je];if(!(Pt in Oe))break e;Oe=Oe[Pt]}(Ce=Ce(Je=Oe[fe=fe[fe.length-1]]))!=Je&&Ce!=null&&i(Oe,fe,{configurable:!0,writable:!0,value:Ce})}}function p(fe){return(fe={next:fe})[Symbol.iterator]=function(){return this},fe}function g(fe){var Ce=typeof Symbol<"u"&&Symbol.iterator&&fe[Symbol.iterator];return Ce?Ce.call(fe):{next:r(fe)}}if(d("Symbol",function(fe){function Ce(Pt,Re){this.A=Pt,i(this,"description",{configurable:!0,writable:!0,value:Re})}if(fe)return fe;Ce.prototype.toString=function(){return this.A};var Oe="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Je=0;return function Pt(Re){if(this instanceof Pt)throw new TypeError("Symbol is not a constructor");return new Ce(Oe+(Re||"")+"_"+Je++,Re)}}),d("Symbol.iterator",function(fe){if(fe)return fe;fe=Symbol("Symbol.iterator");for(var Ce="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Oe=0;Oe<Ce.length;Oe++){var Je=l[Ce[Oe]];typeof Je=="function"&&typeof Je.prototype[fe]!="function"&&i(Je.prototype,fe,{configurable:!0,writable:!0,value:function(){return p(r(this))}})}return fe}),typeof Object.setPrototypeOf=="function")a=Object.setPrototypeOf;else{var E;e:{var C={};try{C.__proto__={a:!0},E=C.a;break e}catch{}E=!1}a=E?function(fe,Ce){if(fe.__proto__=Ce,fe.__proto__!==Ce)throw new TypeError(fe+" is not extensible");return fe}:null}var S=a;function R(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function k(fe){if(fe.m)throw new TypeError("Generator is already running");fe.m=!0}function F(fe,Ce){return fe.h=3,{value:Ce}}function W(fe){this.g=new R,this.G=fe}function G(fe,Ce,Oe,Je){try{var Pt=Ce.call(fe.g.j,Oe);if(!(Pt instanceof Object))throw new TypeError("Iterator result "+Pt+" is not an object");if(!Pt.done)return fe.g.m=!1,Pt;var Re=Pt.value}catch(P){return fe.g.j=null,fe.g.s(P),z(fe)}return fe.g.j=null,Je.call(fe.g,Re),z(fe)}function z(fe){for(;fe.g.h;)try{var Ce=fe.G(fe.g);if(Ce)return fe.g.m=!1,{value:Ce.value,done:!1}}catch(Oe){fe.g.v=void 0,fe.g.s(Oe)}if(fe.g.m=!1,fe.g.l){if(Ce=fe.g.l,fe.g.l=null,Ce.F)throw Ce.D;return{value:Ce.return,done:!0}}return{value:void 0,done:!0}}function oe(fe){this.next=function(Ce){return fe.o(Ce)},this.throw=function(Ce){return fe.s(Ce)},this.return=function(Ce){return function(Oe,Je){k(Oe.g);var Pt=Oe.g.j;return Pt?G(Oe,"return"in Pt?Pt.return:function(Re){return{value:Re,done:!0}},Je,Oe.g.return):(Oe.g.return(Je),z(Oe))}(fe,Ce)},this[Symbol.iterator]=function(){return this}}function ce(fe,Ce){return Ce=new oe(new W(Ce)),S&&fe.prototype&&S(Ce,fe.prototype),Ce}if(R.prototype.o=function(fe){this.v=fe},R.prototype.s=function(fe){this.l={D:fe,F:!0},this.h=this.C||this.u},R.prototype.return=function(fe){this.l={return:fe},this.h=this.u},W.prototype.o=function(fe){return k(this.g),this.g.j?G(this,this.g.j.next,fe,this.g.o):(this.g.o(fe),z(this))},W.prototype.s=function(fe){return k(this.g),this.g.j?G(this,this.g.j.throw,fe,this.g.o):(this.g.s(fe),z(this))},d("Array.prototype.entries",function(fe){return fe||function(){return function(Ce,Oe){Ce instanceof String&&(Ce+="");var Je=0,Pt=!1,Re={next:function(){if(!Pt&&Je<Ce.length){var P=Je++;return{value:Oe(P,Ce[P]),done:!1}}return Pt=!0,{done:!0,value:void 0}}};return Re[Symbol.iterator]=function(){return Re},Re}(this,function(Ce,Oe){return[Ce,Oe]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var ye=function(fe,Ce){for(var Oe=0;Oe<fe.length;Oe++)Ce(fe[Oe])},Ne=function(fe){return fe.replace(/\r?\n|\r/g,`\r
`)},Te=function(fe,Ce,Oe){return Ce instanceof Blob?(Oe=Oe!==void 0?Oe+"":typeof Ce.name=="string"?Ce.name:"blob",Ce.name===Oe&&Object.prototype.toString.call(Ce)!=="[object Blob]"||(Ce=new File([Ce],Oe)),[String(fe),Ce]):[String(fe),String(Ce)]},be=function(fe,Ce){if(fe.length<Ce)throw new TypeError(Ce+" argument required, but only "+fe.length+" present.")},_e=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,Ie=_e.FormData,Bt=_e.XMLHttpRequest&&_e.XMLHttpRequest.prototype.send,$e=_e.Request&&_e.fetch,ln=_e.navigator&&_e.navigator.sendBeacon,en=_e.Element&&_e.Element.prototype,Kn=_e.Symbol&&Symbol.toStringTag;Kn&&(Blob.prototype[Kn]||(Blob.prototype[Kn]="Blob"),"File"in _e&&!File.prototype[Kn]&&(File.prototype[Kn]="File"));try{new File([],"")}catch{_e.File=function(Ce,Oe,Je){return Ce=new Blob(Ce,Je||{}),Object.defineProperties(Ce,{name:{value:Oe},lastModified:{value:+(Je&&Je.lastModified!==void 0?new Date(Je.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),Kn&&Object.defineProperty(Ce,Kn,{value:"File"}),Ce}}var Vr=function(fe){return fe.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},Bn=function(fe){this.i=[];var Ce=this;fe&&ye(fe.elements,function(Oe){if(Oe.name&&!Oe.disabled&&Oe.type!=="submit"&&Oe.type!=="button"&&!Oe.matches("form fieldset[disabled] *"))if(Oe.type==="file"){var Je=Oe.files&&Oe.files.length?Oe.files:[new File([],"",{type:"application/octet-stream"})];ye(Je,function(Pt){Ce.append(Oe.name,Pt)})}else Oe.type==="select-multiple"||Oe.type==="select-one"?ye(Oe.options,function(Pt){!Pt.disabled&&Pt.selected&&Ce.append(Oe.name,Pt.value)}):Oe.type==="checkbox"||Oe.type==="radio"?Oe.checked&&Ce.append(Oe.name,Oe.value):(Je=Oe.type==="textarea"?Ne(Oe.value):Oe.value,Ce.append(Oe.name,Je))})};if((n=Bn.prototype).append=function(fe,Ce,Oe){be(arguments,2),this.i.push(Te(fe,Ce,Oe))},n.delete=function(fe){be(arguments,1);var Ce=[];fe=String(fe),ye(this.i,function(Oe){Oe[0]!==fe&&Ce.push(Oe)}),this.i=Ce},n.entries=function fe(){var Ce,Oe=this;return ce(fe,function(Je){if(Je.h==1&&(Ce=0),Je.h!=3)return Ce<Oe.i.length?Je=F(Je,Oe.i[Ce]):(Je.h=0,Je=void 0),Je;Ce++,Je.h=2})},n.forEach=function(fe,Ce){be(arguments,1);for(var Oe=g(this),Je=Oe.next();!Je.done;Je=Oe.next()){var Pt=g(Je.value);Je=Pt.next().value,Pt=Pt.next().value,fe.call(Ce,Pt,Je,this)}},n.get=function(fe){be(arguments,1);var Ce=this.i;fe=String(fe);for(var Oe=0;Oe<Ce.length;Oe++)if(Ce[Oe][0]===fe)return Ce[Oe][1];return null},n.getAll=function(fe){be(arguments,1);var Ce=[];return fe=String(fe),ye(this.i,function(Oe){Oe[0]===fe&&Ce.push(Oe[1])}),Ce},n.has=function(fe){be(arguments,1),fe=String(fe);for(var Ce=0;Ce<this.i.length;Ce++)if(this.i[Ce][0]===fe)return!0;return!1},n.keys=function fe(){var Ce,Oe,Je,Pt,Re=this;return ce(fe,function(P){if(P.h==1&&(Ce=g(Re),Oe=Ce.next()),P.h!=3)return Oe.done?void(P.h=0):(Je=Oe.value,Pt=g(Je),F(P,Pt.next().value));Oe=Ce.next(),P.h=2})},n.set=function(fe,Ce,Oe){be(arguments,2),fe=String(fe);var Je=[],Pt=Te(fe,Ce,Oe),Re=!0;ye(this.i,function(P){P[0]===fe?Re&&(Re=!Je.push(Pt)):Je.push(P)}),Re&&Je.push(Pt),this.i=Je},n.values=function fe(){var Ce,Oe,Je,Pt,Re=this;return ce(fe,function(P){if(P.h==1&&(Ce=g(Re),Oe=Ce.next()),P.h!=3)return Oe.done?void(P.h=0):(Je=Oe.value,(Pt=g(Je)).next(),F(P,Pt.next().value));Oe=Ce.next(),P.h=2})},Bn.prototype._asNative=function(){for(var fe=new Ie,Ce=g(this),Oe=Ce.next();!Oe.done;Oe=Ce.next()){var Je=g(Oe.value);Oe=Je.next().value,Je=Je.next().value,fe.append(Oe,Je)}return fe},Bn.prototype._blob=function(){var fe="----formdata-polyfill-"+Math.random(),Ce=[],Oe="--"+fe+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(Je,Pt){return typeof Je=="string"?Ce.push(Oe+Vr(Ne(Pt))+`"\r
\r
`+Ne(Je)+`\r
`):Ce.push(Oe+Vr(Ne(Pt))+'"; filename="'+Vr(Je.name)+`"\r
Content-Type: `+(Je.type||"application/octet-stream")+`\r
\r
`,Je,`\r
`)}),Ce.push("--"+fe+"--"),new Blob(Ce,{type:"multipart/form-data; boundary="+fe})},Bn.prototype[Symbol.iterator]=function(){return this.entries()},Bn.prototype.toString=function(){return"[object FormData]"},en&&!en.matches&&(en.matches=en.matchesSelector||en.mozMatchesSelector||en.msMatchesSelector||en.oMatchesSelector||en.webkitMatchesSelector||function(fe){for(var Ce=(fe=(this.document||this.ownerDocument).querySelectorAll(fe)).length;0<=--Ce&&fe.item(Ce)!==this;);return-1<Ce}),Kn&&(Bn.prototype[Kn]="FormData"),Bt){var Zi=_e.XMLHttpRequest.prototype.setRequestHeader;_e.XMLHttpRequest.prototype.setRequestHeader=function(fe,Ce){Zi.call(this,fe,Ce),fe.toLowerCase()==="content-type"&&(this.B=!0)},_e.XMLHttpRequest.prototype.send=function(fe){fe instanceof Bn?(fe=fe._blob(),this.B||this.setRequestHeader("Content-Type",fe.type),Bt.call(this,fe)):Bt.call(this,fe)}}$e&&(_e.fetch=function(fe,Ce){return Ce&&Ce.body&&Ce.body instanceof Bn&&(Ce.body=Ce.body._blob()),$e.call(this,fe,Ce)}),ln&&(_e.navigator.sendBeacon=function(fe,Ce){return Ce instanceof Bn&&(Ce=Ce._asNative()),ln.call(this,fe,Ce)}),_e.FormData=Bn}})();const D0=()=>{const n=re("AREAS");return n.length===0&&n.push(Rt.GLOBAL),Uc(n).call(n,(r,i,a)=>{const l=ZP(i);return l?a===0?l:"".concat(r,",").concat(l):r},"")},ZP=n=>n===Rt.OVERSEA?"".concat(br.ASIA,",").concat(br.EUROPE,",").concat(br.AFRICA,",").concat(br.NORTH_AMERICA,",").concat(br.SOUTH_AMERICA,",").concat(br.OCEANIA):br[n],PK=n=>{const r={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return n.map(i=>{const a=_0[i],l=Object.keys(a);l&&l.map(d=>{d!=="CODE"&&(r[d]=r[d].concat(a[d]))})}),r},k0={GLOBAL:{ASIA:[Rt.CHINA,Rt.JAPAN,Rt.INDIA,Rt.KOREA,Rt.HKMC],EUROPE:[],NORTH_AMERICA:[Rt.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},Ay=Object.keys(k0[Rt.GLOBAL]),eD=[Rt.CHINA,Rt.NORTH_AMERICA,Rt.EUROPE,Rt.ASIA,Rt.JAPAN,Rt.INDIA,Rt.OCEANIA,Rt.SOUTH_AMERICA,Rt.AFRICA,Rt.KOREA,Rt.HKMC,Rt.US],DK=function(n,r){let i=[];if(n.includes(Rt.GLOBAL)){const d=[Rt.GLOBAL,Rt.OVERSEA],p=Object.keys(_0);if(r===Rt.GLOBAL)throw new q($.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(r===Rt.CHINA)i=[Rt.OVERSEA];else if(l=r,Ay.includes(l)){const g=(a=r,k0[Rt.GLOBAL][a]||[]),E=[...d,r,...g];i=p.filter(C=>!E.includes(C))}else if(function(g){let E=!1;return Ay.forEach(C=>{k0[Rt.GLOBAL][C].includes(g)&&(E=!0)}),E}(r)){const g=function(C){let S;return Ay.forEach(R=>{k0[Rt.GLOBAL][R].includes(C)&&(S=R)}),S}(r),E=[...d,g,r];i=p.filter(C=>!E.includes(C))}else i=n;i=function(g){const E=[];return eD.forEach(C=>{g.includes(C)&&E.push(C)}),E.concat(g.filter(C=>!eD.includes(C)))}(i)}else i=n;var a,l;return i};function tD(n){if(!n&&re("AREAS").includes(Rt.EXTENSIONS))return M.debug("update area from ap : reset"),void Ny(FN,!0);if(!re("AREAS").includes(Rt.GLOBAL)||!n)return;let r=_0.EXTENSIONS;r&&(r={CODE:ZP(Rt.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(n,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(n,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(n,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(n,".agora.io"),"cds-ap-web-2-".concat(n,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(n,".agora.io"),"sua-ap-web-2-".concat(n,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(n,".agora.io"),"uap-ap-web-2-".concat(n,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(n,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(n,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(n,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(n,".agora.io")]},M.debug("update area from ap success: ".concat(n,",config is "),r),rn("AREAS",[Rt.EXTENSIONS],!0),Object.keys(r).map(i=>{i==="LOG_UPLOAD_SERVER"||i==="EVENT_REPORT_DOMAIN"||i==="EVENT_REPORT_BACKUP_DOMAIN"||i==="PROXY_SERVER_TYPE3"?rn(i,r[i][0]):rn(i,r[i])}))}function Ny(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=ke.reportApiInvoke(null,{name:Qn.SET_AREA,options:n,tag:Tn.TRACER});try{let a=[];if(typeof n=="string"&&(a=[n]),Array.isArray(n)&&(n.forEach(d=>{if(!a9.includes(d))throw new q($.INVALID_PARAMS,"invalid area code")}),a=n),Object.prototype.toString.call(n)==="[object Object]"){const{areaCode:d,excludedArea:p}=n;if(!d)throw new q($.INVALID_PARAMS,"area code is needed");let g=d;typeof d=="string"&&(g=[d]),a=p?DK(g,p):g}if(!r){if(Yl.AREAS){const d=new q($.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return i.onError(d),void M.warning("setArea is prohibited because of config-distribute")}if(a.includes(Rt.GLOBAL)&&re("AREAS")===Rt.EXTENSIONS){const d=new q($.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return i.onError(d),void M.warning("setArea is prohibited because of ap extensions")}}rn("AREAS",a,r);const l=PK(a);Object.keys(l).map(d=>{d==="LOG_UPLOAD_SERVER"||d==="EVENT_REPORT_DOMAIN"||d==="EVENT_REPORT_BACKUP_DOMAIN"||d==="PROXY_SERVER_TYPE3"?rn(d,l[d][0]):rn(d,l[d])}),M.debug("set area success:",a.join(","))}catch(a){throw i.onError(a),a}i.onSuccess()}function nD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function rD(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?nD(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):nD(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}let xy=1;function kK(n,r,i,a,l){xy+=1;const d={sid:i.sid,command:"convergeAllocateEdge",uid:"666",appId:i.appId,ts:Math.floor(Date.now()/1e3),seq:xy,requestId:xy,version:Xo,cname:i.cname},p={service_name:r,json_body:JSON.stringify(d)};let g,E,C=n[0];return Qa(async()=>{g=Date.now();const S=await Ra(C,{data:p,cancelToken:a,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(E=Date.now()-g,S.code!==0){const F=new q($.UNEXPECTED_RESPONSE,"live streaming ap error, code"+S.code,{retry:!0,responseTime:E});throw M.error(F.toString()),F}const R=JSON.parse(S.json_body);if(R.code!==200){const F=new q($.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(R.code,", reason: ").concat(R.reason),{code:R.code,responseTime:E});throw M.error(F.toString()),F}if(!R.servers||R.servers.length===0){const F=new q($.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:R.code,responseTime:E});throw M.error(F.toString()),F}const k=function(F,W){return{addressList:F.servers.map(G=>"wss://".concat(G.address.replace(/\./g,"-"),".").concat(re("WORKER_DOMAIN"),":").concat(G.wss,"?serviceName=").concat(encodeURIComponent(W))),workerToken:F.workerToken,vid:F.vid}}(R,r);return re("LIVE_STREAMING_ADDRESS")&&(k.addressList=re("LIVE_STREAMING_ADDRESS")instanceof Array?re("LIVE_STREAMING_ADDRESS"):[re("LIVE_STREAMING_ADDRESS")]),rD(rD({},k),{},{responseTime:E})},(S,R)=>(ke.apworkerEvent(i.sid,{success:!0,sc:200,serviceName:r,responseDetail:JSON.stringify(S.addressList),firstSuccess:R===0,responseTime:E,serverIp:n[R%n.length]}),!1),(S,R)=>(ke.apworkerEvent(i.sid,{success:!1,sc:S.data&&S.data.code||200,serviceName:r,responseTime:E,serverIp:n[R%n.length]}),!!(S.code!==$.OPERATION_ABORTED&&S.code!==$.UNEXPECTED_RESPONSE||S.data&&S.data.retry)&&(C=n[(R+1)%n.length],!0)),l)}let Py=1;function iD(n,r,i,a){let{url:l,areaCode:d}=n;const p=Date.now();let g;const[E,C]=cD(r,d,[Er.CHOOSE_SERVER]);let S=er.networkState;return Qa(async()=>{S&&er.networkState===li.OFFLINE&&er.onlineWaiter&&await Ae.race([er.onlineWaiter,Zr(a&&a.maxRetryTimeout||Jn.maxRetryTimeout)]),S=er.networkState;const{data:R,headers:k}=await Ra(l,{data:E,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);g=k.http3==="1"?1:-1,ke.reportResourceTiming(l,r.sid),aD(R,l,r,p,[Er.CHOOSE_SERVER],g);const F=by(R,Er.CHOOSE_SERVER);return sD(F),LP(F,l)},R=>(R&&ke.joinChooseServer(r.sid,{lts:p,succ:!0,csAddr:l,opid:C,serverList:R.gatewayAddrs.map(k=>k.address),ec:null,cid:R.cid.toString(),uid:R.uid.toString(),csIp:R.csIp,unilbsServerIds:[Er.CHOOSE_SERVER].toString(),isHttp3:g}),!1),R=>R.code!==$.OPERATION_ABORTED&&(R.code===$.CAN_NOT_GET_GATEWAY_SERVER?R.data.retry:(ke.joinChooseServer(r.sid,{lts:p,succ:!1,csAddr:l,serverList:null,opid:C,ec:R.code,csIp:R.data&&R.data.csIp,unilbsServerIds:[Er.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:S}),isHttp3:g}),M.warning("[".concat(r.clientId,"] Choose server network error, retry"),R),!0)),a)}function oD(n,r,i,a){let l,{url:d,areaCode:p,serviceIds:g}=n;const E=Date.now(),[C,S]=cD(r,p,g);let R;return Qa(async()=>{R&&er.networkState===li.OFFLINE&&er.onlineWaiter&&await Ae.race([er.onlineWaiter,Zr(a&&a.maxRetryTimeout||Jn.maxRetryTimeout)]),R=er.networkState;const{data:k,headers:F}=await Ra(d,{data:C,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);l=F.http3==="1"?1:-1,ke.reportResourceTiming(d,r.sid),aD(k,d,r,E,g,l);const W=by(k,Er.CHOOSE_SERVER),G=by(k,r.cloudProxyServer==="proxy5"?Er.CLOUD_PROXY_5:r.cloudProxyServer==="proxy3"||r.cloudProxyServer==="proxy4"?Er.CLOUD_PROXY:Er.CLOUD_PROXY_FALLBACK);return sD(W),{gatewayInfo:LP(W,d),proxyInfo:G,url:d}},k=>(k.gatewayInfo&&ke.joinChooseServer(r.sid,{lts:E,succ:!0,csAddr:d,serverList:k.gatewayInfo.gatewayAddrs.map(F=>F.address),ec:null,opid:S,cid:k.gatewayInfo.cid.toString(),uid:k.gatewayInfo.uid.toString(),csIp:k.gatewayInfo.csIp,unilbsServerIds:g.toString(),isHttp3:l}),k.proxyInfo&&ke.joinWebProxyAP(r.sid,{lts:E,sucess:1,apServerAddr:d,turnServerAddrList:k.proxyInfo.addresses.map(F=>F.ip).join(","),errorCode:null,eventType:r.cloudProxyServer,unilbsServerIds:g.toString()}),!1),k=>k.code!==$.OPERATION_ABORTED&&(k.code===$.CAN_NOT_GET_GATEWAY_SERVER?k.data.retry:(ke.joinWebProxyAP(r.sid,{lts:E,sucess:0,apServerAddr:d,turnServerAddrList:null,errorCode:k.code,eventType:r.cloudProxyServer,unilbsServerIds:g.toString(),extend:JSON.stringify({networkState:R})}),M.warning("[".concat(r.clientId,"] multi unilbs network error, retry"),k),!0)),a)}const aD=(n,r,i,a,l,d)=>{const p=[],g=E=>{E.flag===4096?ke.joinChooseServer(i.sid,{lts:a,succ:!1,csAddr:r,opid:n.opid,serverList:null,ec:E.error.message,csIp:E.error.data&&E.error.data.csIp,unilbsServerIds:l.toString(),isHttp3:d}):E.flag!==1048576&&E.flag!==4194304&&E.flag!==4194310||ke.joinWebProxyAP(i.sid,{lts:a,sucess:0,apServerAddr:r,turnServerAddrList:null,errorCode:E.error.code,eventType:i.cloudProxyServer,unilbsServerIds:l.toString()})};if(n.response_body.forEach(E=>{const C=E.buffer.code;if(E.uri===23&&C===0&&!E.buffer.edges_services)if(E.buffer.flag===4194310)M.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),E.buffer.edges_services=[];else{const S={error:new q($.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:n.detail[502]}),flag:E.buffer.flag};p.push(S),g(S)}if(C!==0){const S=P0(C),R={error:new q($.CAN_NOT_GET_GATEWAY_SERVER,S.desc,{desc:S.desc,retry:S.retry,csIp:n.detail[502]}),flag:E.buffer.flag};E.buffer.flag===4194310?M.warning(R.error.toString()):p.push(R),g(R)}}),p.length)throw M.warning("[".concat(i.clientId,"] multi unilbs ").concat(r," failed, ").concat(p.map(E=>"flag: ".concat(E.flag,", message: ").concat(E.error.message,", retry: ").concat(E.error.data.retry)).join(" | "))),new q($.CAN_NOT_GET_GATEWAY_SERVER,p.map(E=>"flag: ".concat(E.flag,", message: ").concat(E.error.message)).join(" | "),{retry:!!p.find(E=>E.error.data.retry),csIp:n.detail[502],desc:[...new Set(p.map(E=>{var C,S;return E==null||(C=E.error)===null||C===void 0||(S=C.data)===null||S===void 0?void 0:S.desc}).filter(E=>!!E))]})},sD=n=>{var r,i,a,l;if(n.addresses&&n.addresses.length===0&&n.code===0)throw new q($.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:n.detail&&n.detail[502]});if(re("AP_AREA")&&((a=n.detail)!==null&&a!==void 0&&a[23]&&typeof((l=n.detail)===null||l===void 0?void 0:l[23])=="string"?tD(n.detail[23].toLowerCase()):tD()),(r=n.detail)!==null&&r!==void 0&&r[19]&&typeof((i=n.detail)===null||i===void 0?void 0:i[19])=="string"){const p=n.detail[19],g=p==null?void 0:p.split(";");for(let E=0;E<g.length;E++){var d;const C=ec(d=g[E]).call(d);n.addresses[E]&&g&&(n.addresses[E].fingerprint=C)}}if(re("GATEWAY_ADDRESS")&&re("GATEWAY_ADDRESS").length>0){M.debug("assign gateway address to",re("GATEWAY_ADDRESS"));const p=re("GATEWAY_ADDRESS").map(g=>{var E,C;const S=(E=(C=n.addresses.find(R=>R.ip===g.ip&&R.port===g.port))===null||C===void 0?void 0:C.fingerprint)!==null&&E!==void 0?E:"";return{ip:g.ip,port:g.port,ticket:n.addresses[0]&&n.addresses[0].ticket,fingerprint:S}});n.addresses=p}},LK=(n,r)=>{if(n.response_body&&n.response_body.length){const i=n.response_body[0];if(i.buffer.code!==0){const a=P0(i.buffer.code);throw new q($.UPDATE_TICKET_FAILED,"[".concat(i.buffer.code,"]: ").concat(a.desc),{retry:a.retry})}return i.buffer.ticket}throw M.debug("update ticket request received ap response without response body:",r),new q($.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},cD=(n,r,i)=>{const a=Math.floor(Math.random()*1e12),l={appid:n.appId,client_ts:Date.now(),opid:a,sid:n.sid,request_bodies:[{uri:22,buffer:{cname:n.cname,detail:{6:n.stringUid,11:r,12:re("USE_NEW_TOKEN")?"1":void 0,22:r},key:n.token,service_ids:i,uid:n.uid||0}}]};l.request_bodies.forEach(p=>{n.multiIP&&n.multiIP.gateway_ip&&(p.buffer.detail[5]=JSON.stringify({vocs_ip:[n.multiIP.uni_lbs_ip],vos_ip:[n.multiIP.gateway_ip]}))});const d=new FormData;return d.append("request",JSON.stringify(l)),[d,a]},MK=(n,r)=>{const i=Math.floor(Math.random()*1e12),a={appid:n.appId,client_ts:Date.now(),opid:i,sid:n.sid,request_bodies:[{uri:28,buffer:{cname:n.cname,detail:{1:"",6:n.stringUid,12:"1"},token:n.token,service_ids:r,uid:n.uid||0,edges_services:n.apResponse.addresses.map(d=>({ip:d.ip,port:d.port}))}}]},l=new FormData;return l.append("request",JSON.stringify(a)),[l,i]};let bd=0;async function Dy(n,r,i,a){return{gatewayInfo:await async function(d,p,g,E){let C=null;const S=[],R=async()=>{const F=re("WEBCS_DOMAIN").slice(0,re("AJAX_REQUEST_CONCURRENT")).map(z=>({url:d.proxyServer?"https://".concat(d.proxyServer,"/ap/?url=").concat(z+"/api/v2/transpond/webrtc?v=2"):"https://".concat(z,"/api/v2/transpond/webrtc?v=2"),areaCode:D0()})),W=E.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:F.map(z=>z.url)}),G=await yp({fragementLength:re("FRAGEMENT_LENGTH"),referenceList:F,asyncMapHandler:z=>(M.debug("[".concat(d.clientId,"] Connect to choose_server:"),z.url),iD(z,d,p,g)),allFailedhandler:z=>{throw E.recordJoinChannelService({endTs:Date.now(),status:"error",errors:z},W),z[0]},promisesCollector:S});return E.recordJoinChannelService({endTs:Date.now(),status:"success"},W),G},k=async()=>{if(await Zr(1e3),C!==null)return C;const F=re("WEBCS_DOMAIN_BACKUP_LIST").map(z=>({url:d.proxyServer?"https://".concat(d.proxyServer,"/ap/?url=").concat(z+"/api/v2/transpond/webrtc?v=2"):"https://".concat(z,"/api/v2/transpond/webrtc?v=2"),areaCode:D0()})),W=E.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:F.map(z=>z.url)}),G=await yp({fragementLength:re("FRAGEMENT_LENGTH"),referenceList:F,asyncMapHandler:z=>(M.debug("[".concat(d.clientId,"] Connect to backup choose_server:"),z.url),iD(z,d,p,g)),allFailedhandler:z=>{throw E.recordJoinChannelService({endTs:Date.now(),status:"error",errors:z},W),z[0]},promisesCollector:S});return E.recordJoinChannelService({endTs:Date.now(),status:"success"},W),G};try{return C=await Td([R(),k()]),S.length&&S.forEach(F=>F.cancel&&typeof F.cancel=="function"&&F.cancel()),C}catch(F){throw F[0]}}(n,r,i,a)}}async function lD(n,r,i,a,l){const d=n.cloudProxyServer;if(d==="disabled"){if(!a)return;if(n.useLocalAccessPoint)return await Dy(n,r,i,l);if(re("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:C,proxyInfo:S}=await dD(n,r,i,l);return n.turnServer&&n.turnServer.mode!=="auto"||(n.turnServer={mode:"manual",servers:S.map(R=>({turnServerURL:R.address,tcpport:R.tcpport||Oo.tcpport,udpport:R.udpport||Oo.udpport,username:R.username||Oo.username,password:R.password||Oo.password,forceturn:!1,security:!0}))}),{gatewayInfo:C}}return await Dy(n,r,i,l)}const{proxyInfo:p,gatewayInfo:g}=await dD(n,r,i,l),E={gatewayInfo:g};return n.turnServer={mode:"manual",servers:p.map(C=>({turnServerURL:C.address,tcpport:d==="proxy3"?void 0:C.tcpport?C.tcpport:Oo.tcpport,udpport:d==="proxy4"?void 0:C.udpport?C.udpport:Oo.udpport,username:C.username||Oo.username,password:C.password||Oo.password,forceturn:d!=="proxy4",security:d==="proxy5"}))},M.debug("[".concat(n.clientId,"] set proxy server: ").concat(n.proxyServer,", mode: ").concat(d)),E}async function uD(n,r,i,a,l){const d=re("ACCOUNT_REGISTER").slice(0,re("AJAX_REQUEST_CONCURRENT"));let p=[];p=r.proxyServer?d.map(E=>"https://".concat(r.proxyServer,"/ap/?url=").concat(E+"/api/v1")):d.map(E=>"https://".concat(E,"/api/v1"));const g=l==null?void 0:l.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:p});try{const E=await async function(C,S,R,k,F){const W=Date.now(),G={sid:R.sid,opid:10,appid:R.appId,string_uid:S};let z=C[0];const oe=await Qa(()=>Ra(z+"".concat(z.indexOf("?")===-1?"?":"&","action=stringuid"),{data:G,cancelToken:k,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(ce,ye)=>{if(ce.code===0){if(ce.uid<=0||ce.uid>=Math.pow(2,32))throw M.error("Invalid Uint Uid ".concat(S," => ").concat(ce.uid),ce),ke.reqUserAccount(G.sid,{lts:W,success:!1,serverAddr:z,stringUid:G.string_uid,uid:ce.uid,errorCode:$.INVALID_UINT_UID_FROM_STRING_UID,extend:G}),new q($.INVALID_UINT_UID_FROM_STRING_UID);return ke.reqUserAccount(G.sid,{lts:W,success:!0,serverAddr:z,stringUid:G.string_uid,uid:ce.uid,errorCode:null,extend:G}),!1}const Ne=P0(ce.code);return Ne.retry&&(z=C[(ye+1)%C.length]),ke.reqUserAccount(G.sid,{lts:W,success:!1,serverAddr:z,stringUid:G.string_uid,uid:ce.uid,errorCode:Ne.desc,extend:G}),Ne.retry},(ce,ye)=>ce.code!==$.OPERATION_ABORTED&&(ke.reqUserAccount(G.sid,{lts:W,success:!1,serverAddr:z,stringUid:G.string_uid,uid:null,errorCode:ce.code,extend:G}),z=C[(ye+1)%C.length],!0),F);if(oe.code!==0){const ce=P0(oe.code);throw new q($.UNEXPECTED_RESPONSE,ce.desc)}return oe}(p,n,r,i,a);return l==null||l.recordJoinChannelService({status:"success",endTs:Date.now()},g),E.uid}catch(E){throw l==null||l.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[E]},g),E}}async function UK(n,r,i){const a=re("CDS_AP").slice(0,re("AJAX_REQUEST_CONCURRENT")).map(g=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(g+"/api/v1"):"https://".concat(g,"/api/v1?action=config")).map(g=>function(E,C,S,R){const k=Ht(),F={flag:64,cipher_method:0,features:{device:k.name,system:k.os,system_general:navigator.userAgent,vendor:C.appId,version:Xo,cname:C.cname,sid:C.sid,session_id:C.sid,detail:"",proxyServer:C.proxyServer}};return Qa(()=>Ra(E,{data:F,timeout:1e3,cancelToken:S,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,W=>W.code!==$.OPERATION_ABORTED,R)}(g,n,r,i));let l=null,d=null,p={};try{l=await Td(a)}catch(g){if(g.code===$.OPERATION_ABORTED)throw g;d=g}if(a.forEach(g=>g.cancel()),ke.reportApiInvoke(n.sid,{name:Qn.REQUEST_CONFIG_DISTRIBUTE,options:{error:d,res:l}}).onSuccess(),l&&l.test_tags)try{p=function(g){if(!g.test_tags)return{};const E=g.test_tags,C=Object.keys(E),S={};return C.forEach(R=>{var k;const F=ec(k=R.slice(4)).call(k),W=JSON.parse(E[R])[1];S[F]=W}),S}(l)}catch{}return p}async function dD(n,r,i,a){const l=re("PROXY_SERVER_TYPE3"),d=(F,W,G)=>{let z=G||l;return Array.isArray(z)&&(z=W%2==0?l[1]:l[0]),"https://".concat(z,"/ap/?url=").concat(F)};let p=null;const g=[],E=async()=>{const F=re("WEBCS_DOMAIN").slice(0,re("AJAX_REQUEST_CONCURRENT")).map((z,oe)=>{let ce;return ce=n.cloudProxyServer==="disabled"&&n.proxyServer?d("".concat(z,"/api/v2/transpond/webrtc?v=2"),oe,n.proxyServer):n.cloudProxyServer==="disabled"||n.cloudProxyServer==="fallback"?"https://".concat(z,"/api/v2/transpond/webrtc?v=2"):d("".concat(z,"/api/v2/transpond/webrtc?v=2"),oe),{url:ce,areaCode:D0(),serviceIds:[Er.CHOOSE_SERVER,n.cloudProxyServer==="proxy5"?Er.CLOUD_PROXY_5:n.cloudProxyServer==="proxy3"||n.cloudProxyServer==="proxy4"?Er.CLOUD_PROXY:Er.CLOUD_PROXY_FALLBACK]}}),W=a.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:F.map(z=>z.url)}),G=await yp({fragementLength:re("FRAGEMENT_LENGTH"),referenceList:F,asyncMapHandler:z=>(M.debug("[".concat(n.clientId,"] Connect to choose_server:"),z.url),oD(z,n,r,i)),allFailedhandler:z=>{throw a.recordJoinChannelService({endTs:Date.now(),status:"error",errors:z},W),z[0]},promisesCollector:g});return a.recordJoinChannelService({endTs:Date.now(),status:"success"},W),G},C=async()=>{if(await Zr(1e3),p!==null)return p;const F=re("WEBCS_DOMAIN_BACKUP_LIST").map((z,oe)=>{let ce;return ce=n.cloudProxyServer==="disabled"&&n.proxyServer?d("".concat(z,"/api/v2/transpond/webrtc?v=2"),oe,n.proxyServer):n.cloudProxyServer==="disabled"||n.cloudProxyServer==="fallback"?"https://".concat(z,"/api/v2/transpond/webrtc?v=2"):d("".concat(z,"/api/v2/transpond/webrtc?v=2"),oe),{url:ce,areaCode:D0(),serviceIds:[Er.CHOOSE_SERVER,n.cloudProxyServer==="proxy5"?Er.CLOUD_PROXY_5:n.cloudProxyServer==="proxy3"||n.cloudProxyServer==="proxy4"?Er.CLOUD_PROXY:Er.CLOUD_PROXY_FALLBACK]}}),W=a.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:F.map(z=>z.url)}),G=await yp({fragementLength:re("FRAGEMENT_LENGTH"),referenceList:F,asyncMapHandler:z=>(M.debug("[".concat(n.clientId,"] Connect to backup choose_server:"),z.url),oD(z,n,r,i)),allFailedhandler:z=>{throw a.recordJoinChannelService({endTs:Date.now(),status:"error",errors:z},W),z[0]},promisesCollector:g});return a.recordJoinChannelService({endTs:Date.now(),status:"success"},W),G};let S,R,k;try{({gatewayInfo:S,proxyInfo:R,url:k}=await Td([E(),C()]))}catch(F){throw F[0]}if(g.length&&g.forEach(F=>F.cancel&&typeof F.cancel=="function"&&F.cancel()),!S||!R)throw new q($.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(n.apUrl=k,n.cloudProxyServer!=="disabled"&&Array.isArray(l)&&k){const F=/^https?:\/\/(.+?)(\/.*)?$/.exec(k)[1];l.includes(F)&&(n.proxyServer=F,M.setProxyServer(F),ke.setProxyServer(F))}return p={gatewayInfo:S,proxyInfo:await bK(R,S.uid)},p}async function hD(n,r,i,a){const l=re("UAP_AP").slice(0,re("AJAX_REQUEST_CONCURRENT")).map(d=>r.proxyServer?"https://".concat(r.proxyServer,"/ap/?url=").concat(d+"/api/v1?action=uap"):"https://".concat(d,"/api/v1?action=uap"));return await kK(l,n,r,i,a)}async function FK(n,r,i){const a=re("UAP_AP").slice(0,re("AJAX_REQUEST_CONCURRENT")).map(l=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(l+"/api/v1?action=uap"):"https://".concat(l,"/api/v1?action=uap")).map(l=>function(d,p,g,E){const C={command:"convergeAllocateEdge",sid:p.sid,appId:p.appId,token:p.token,ts:Date.now(),version:Xo,cname:p.cname,uid:p.uid.toString(),requestId:Py,seq:Py};Py+=1;const S={service_name:"tele_channel",json_body:JSON.stringify(C)};return Qa(async()=>{const R=await Ra(d,{data:S,cancelToken:g,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(R.code!==0){const F=new q($.UNEXPECTED_RESPONSE,"cross channel ap error, code"+R.code,{retry:!0});throw M.error(F.toString()),F}const k=JSON.parse(R.json_body);if(k.code!==200){const F=new q($.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(k.code,", reason: ").concat(k.reason));throw M.error(F.toString()),F}if(!k.servers||k.servers.length===0){const F=new q($.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw M.error(F.toString()),F}return{vid:k.vid,workerToken:k.workerToken,addressList:(re("CHANNEL_MEDIA_RELAY_SERVERS")||k.servers).map(F=>"wss://".concat(F.address.replace(/\./g,"-"),".").concat(re("WORKER_DOMAIN"),":").concat(F.wss))}},void 0,R=>!!(R.code!==$.OPERATION_ABORTED&&R.code!==$.UNEXPECTED_RESPONSE||R.data&&R.data.retry),E)}(l,n,r,i));try{const l=await Td(a);return a.forEach(d=>d.cancel()),l}catch(l){throw l[0]}}async function VK(n,r,i){let a=null;const l=[],d=async p=>{const g=re(p?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(E=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(E+"/api/v2/transpond/webrtc?v=2"):"https://".concat(E,"/api/v2/transpond/webrtc?v=2"));return p&&(await Zr(1e3),a!==null)?a:await yp({fragementLength:re("FRAGEMENT_LENGTH"),referenceList:g,asyncMapHandler:E=>(M.debug("[".concat(n.clientId,"] update ticket, Connect to ").concat(p?"backup":""," choose_server:"),E),function(C,S,R,k){const[F]=MK(S,[Er.CHOOSE_SERVER]);let W=er.networkState;return Qa(async()=>{W&&er.networkState===li.OFFLINE&&er.onlineWaiter&&await Ae.race([er.onlineWaiter,Zr(k&&k.maxRetryTimeout||Jn.maxRetryTimeout)]),W=er.networkState;const G=await Ra(C,{data:F,cancelToken:R,headers:{"Content-Type":"multipart/form-data;"}},!0);return LK(G,C)},()=>!1,G=>G.code!==$.OPERATION_ABORTED&&(G.code===$.UPDATE_TICKET_FAILED?G.data.retry:(M.warning("[".concat(S.clientId,"] update ticket network error, retry"),G),!0)),k)}(E,n,r,i)),allFailedhandler:E=>{throw E[0]},promisesCollector:l})};try{return a=await Td([d(!1),d(!0)]),l.length&&l.forEach(p=>p.cancel&&typeof p.cancel=="function"&&p.cancel()),a}catch(p){throw p[0]}}function pD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function fD(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?pD(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):pD(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}class jK extends Rn{constructor(){super(),w(this,"configs",void 0),w(this,"joinInfo",void 0),w(this,"cancelToken",void 0),w(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),w(this,"interval",void 0),w(this,"mutex",new bi("config-distribute")),w(this,"mutableParamsRead",!1)}startGetConfigDistribute(r,i){this.joinInfo=r,this.cancelToken=i,this.interval&&this.stopGetConfigDistribute(),re("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},re("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,ke.reportApiInvoke(null,{options:void 0,name:Qn.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Tn.TRACER}).onSuccess(JSON.stringify(Yl))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void M.debug("[config-distribute] get config distribute interrupted have no joininfo");let r;const i=await this.mutex.lock();try{r=await UK(this.joinInfo,this.cancelToken,this.retryConfig),M.debug("[config-distribute] get config distribute",JSON.stringify(r)),r.limit_bitrate&&this.handleBitrateLimit(r.limit_bitrate),this.cacheGlobalParameterConfig(r),this.configs=r}catch(a){const l=new q($.NETWORK_RESPONSE_ERROR,a);M.warning("[config-distribute] ".concat(l.toString()))}finally{i()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(r){var i;(i=r)&&i.uplink&&i.id&&i.uplink.max_bitrate!==void 0&&i.uplink.min_bitrate!==void 0&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==r.id&&this.emit(Ep.UPDATE_BITRATE_LIMIT,r):this.emit(Ep.UPDATE_BITRATE_LIMIT,r))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&fD({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(r){var i;const a=qS(i=Object.keys(r).filter(d=>/^webrtc_ng_global_parameter/.test(d))).call(i);for(let d=0;d<a.length;d++)for(let p=a.length-1;p>d;p--){const g=a[p];if(typeof r[g].__priority=="number"){const E=r[g].__priority,C=a[p-1];if(typeof r[C].__priority=="number"){if(!(E>r[C].__priority))continue;{const S=g;a[p]=a[p-1],a[p-1]=S}}else{const S=g;a[p]=a[p-1],a[p-1]=S}}}const l={};a.forEach(d=>{const p=r[d],g=p.__expires;Object.keys(p).forEach(E=>{E==="__priority"||E==="__expires"||Object.prototype.hasOwnProperty.call(l,E)||(l[E]=fD({value:p[E]},g&&{expires:g}))})});try{const d=JSON.stringify(l),p=window.btoa(d);window.localStorage.setItem("websdk_ng_global_parameter",p),M.debug("Caching global parameters ".concat(d))}catch(d){M.error("Error caching global parameters:",d.message)}}}function mD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function Tp(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?mD(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):mD(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}class BK extends Rn{constructor(r,i,a,l){super(),w(this,"spec",void 0),w(this,"token",void 0),w(this,"websocket",void 0),w(this,"pingpongTimer",void 0),w(this,"reconnectMode","retry"),w(this,"serviceMode",void 0),w(this,"reqId",0),w(this,"commandReqId",0),w(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),w(this,"handleWebSocketMessage",d=>{if(!d.data)return;const p=JSON.parse(d.data);p.requestId?this.emit("@".concat(p.requestId,"-").concat(p.sid),p):this.serviceMode===ar.INJECT?this.emit(ba.INJECT_STREAM_STATUS,p):(ke.workerEvent(this.spec.sid,{actionType:"status",serverCode:p.code,workerType:this.serviceMode===ar.TRANSCODE?1:2}),this.emit(ba.PUBLISH_STREAM_STATUS,p))}),this.spec=i,this.token=r,this.serviceMode=l,this.websocket=new ru("live-streaming",a),this.websocket.on(Ze.CONNECTED,this.handleWebSocketOpen),this.websocket.on(Ze.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(Ze.REQUEST_NEW_URLS,(d,p)=>{ei(this,ba.REQUEST_NEW_ADDRESS).then(d).catch(p)}),this.websocket.on(Ze.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(r){return this.websocket.init(r)}async request(r,i,a,l){this.reqId+=1,r==="request"&&(this.commandReqId+=1);const d=this.commandReqId,p=this.reqId;if(!p||!this.websocket)throw new q($.UNEXPECTED_ERROR);const g=Tp({command:r,sdkVersion:Xo==="4.18.2"?"0.0.1":Xo,seq:p,requestId:p,allocate:a,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},i);if(this.websocket.state==="closed")throw new q($.WS_DISCONNECT);const E=()=>new Ae((k,F)=>{this.websocket.once(Ze.CLOSED,()=>F(new q($.WS_ABORT))),this.websocket.once(Ze.CONNECTED,k)});this.websocket.state!=="connected"&&await E(),g.clientRequest&&(g.clientRequest.workerToken=this.token);const C=new Ae((k,F)=>{const W=()=>{F(new q($.WS_ABORT))};this.websocket.once(Ze.RECONNECTING,W),this.websocket.once(Ze.CLOSED,W),this.once("@".concat(p,"-").concat(this.spec.sid),G=>{k(G)})});l&&ke.workerEvent(this.spec.sid,Tp(Tp({},l),{},{requestId:d,actionType:"request",payload:JSON.stringify(i.clientRequest),serverCode:0,code:0}));const S=Date.now();this.websocket.sendMessage(g);let R=null;try{R=await C}catch(k){if(this.websocket.state==="closed")throw k;return await E(),await this.request(r,i,a)}return l&&ke.workerEvent(this.spec.sid,Tp(Tp({},l),{},{requestId:d,actionType:"response",payload:JSON.stringify(R.serverResponse),serverCode:R.code,success:R.code===200,responseTime:Date.now()-S})),R.code!==200&&this.handleResponseError(R),R}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const r=Xo==="4.18.2"?"0.0.1":Xo;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:r,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(r){switch(r.code){case jn.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void M.warning("live stream response already exists stream");case jn.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case jn.LIVE_STREAM_RESPONSE_BAD_STREAM:case jn.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new q($.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:r.code}).throw();case jn.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;throw new q($.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case jn.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new q($.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:r.code}).throw();case jn.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const i=new q($.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(ba.WARNING,i,r.serverResponse.url)}case jn.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const i=new q($.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(ba.WARNING,i,r.serverResponse.url)}case jn.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new q($.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case jn.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new q($.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:r.code}).throw();case jn.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const i=new q($.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(ba.WARNING,i,r.serverResponse.url)}case jn.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new q($.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:r.code}).throw();case jn.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new q($.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case jn.LIVE_STREAM_RESPONSE_WORKER_LOST:case jn.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;throw new q($.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case jn.ERROR_FAIL_SEND_MESSAGE:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;if(r.serverResponse.command==="UpdateTranscoding"||r.serverResponse.command==="ControlStream")return new q($.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:r.code}).throw();throw new q($.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case jn.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case jn.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case jn.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case jn.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new q($.LIVE_STREAMING_CDN_ERROR,"",{code:r.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(N0)},6e3)}}function gD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function ki(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?gD(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):gD(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}class $K extends Rn{constructor(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jn,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Jn;super(),w(this,"onLiveStreamWarning",void 0),w(this,"onLiveStreamError",void 0),w(this,"onInjectStatusChange",void 0),w(this,"spec",void 0),w(this,"retryTimeout",1e4),w(this,"connection",void 0),w(this,"httpRetryConfig",void 0),w(this,"wsRetryConfig",void 0),w(this,"streamingTasks",new Map),w(this,"isStartingStreamingTask",!1),w(this,"taskMutex",new bi("live-streaming")),w(this,"cancelToken",wo.CancelToken.source()),w(this,"transcodingConfig",void 0),w(this,"injectConfig",ki({},o9)),w(this,"injectLoopTimes",0),w(this,"uapResponse",void 0),w(this,"lastTaskId",1),w(this,"statusError",new Map),this.spec=r,this.httpRetryConfig=a,this.wsRetryConfig=i}async setTranscodingConfig(r){const i=ki(ki({},i9),r);i.videoCodecProfile!==66&&i.videoCodecProfile!==77&&i.videoCodecProfile!==100&&(M.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(i.videoCodecProfile," -> 100")),i.videoCodecProfile=100),i.transcodingUsers||(i.transcodingUsers=i.userConfigs),i.transcodingUsers&&(i.transcodingUsers=i.transcodingUsers.map(p=>ki(ki(ki({},r9),p),{},{zOrder:p.zOrder?p.zOrder+1:1}))),function(p){Sn(p.width)||sn(p.width,"config.width",0,1e4),Sn(p.height)||sn(p.height,"config.height",0,1e4),Sn(p.videoBitrate)||sn(p.videoBitrate,"config.videoBitrate",1,1e6),Sn(p.videoFrameRate)||sn(p.videoFrameRate,"config.videoFrameRate"),Sn(p.lowLatency)||hd(p.lowLatency,"config.lowLatency"),Sn(p.audioSampleRate)||Tr(p.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),Sn(p.audioBitrate)||sn(p.audioBitrate,"config.audioBitrate",1,128),Sn(p.audioChannels)||Tr(p.audioChannels,"config.audioChannels",[1,2,3,4,5]),Sn(p.videoGop)||sn(p.videoGop,"config.videoGop"),Sn(p.videoCodecProfile)||Tr(p.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),Sn(p.userCount)||sn(p.userCount,"config.userCount",0,17),Sn(p.backgroundColor)||sn(p.backgroundColor,"config.backgroundColor",0,16777215),Sn(p.userConfigExtraInfo)||Kr(p.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),p.transcodingUsers&&!Sn(p.transcodingUsers)&&(rc(p.transcodingUsers,"config.transcodingUsers"),p.transcodingUsers.forEach((g,E)=>{QS(g.uid),Sn(g.x)||sn(g.x,"transcodingUser[".concat(E,"].x"),0,1e4),Sn(g.y)||sn(g.y,"transcodingUser[".concat(E,"].y"),0,1e4),Sn(g.width)||sn(g.width,"transcodingUser[".concat(E,"].width"),0,1e4),Sn(g.height)||sn(g.height,"transcodingUser[".concat(E,"].height"),0,1e4),Sn(g.zOrder)||sn(g.zOrder-1,"transcodingUser[".concat(E,"].zOrder"),0,100),Sn(g.alpha)||sn(g.alpha,"transcodingUser[".concat(E,"].alpha"),0,1,!1)})),Sn(p.watermark)||oy(p.watermark,"watermark"),Sn(p.backgroundImage)||oy(p.backgroundImage,"backgroundImage"),p.images&&!Sn(p.images)&&(rc(p.images,"config.images"),p.images.forEach((g,E)=>{oy(g,"images[".concat(E,"]"))}))}(i);const a=[];i.images&&a.push(...i.images.map(p=>ki(ki(ki({},iy),p),{},{zOrder:255}))),i.backgroundImage&&(a.push(ki(ki(ki({},iy),i.backgroundImage),{},{zOrder:0})),delete i.backgroundImage),i.watermark&&(a.push(ki(ki(ki({},iy),i.watermark),{},{zOrder:255})),delete i.watermark),i.images=a,i.transcodingUsers&&(i.userConfigs=i.transcodingUsers.map(p=>ki({},p)),i.userCount=i.transcodingUsers.length,delete i.transcodingUsers);const l=(i.userConfigs||[]).map(p=>typeof p.uid=="number"?Ae.resolve(p.uid):uD(p.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await Ae.all(l)).forEach((p,g)=>{i.userConfigs&&i.userConfigs[g]&&(i.userConfigs[g].uid=p)}),this.transcodingConfig=i,this.connection)try{var d;const p=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(Os(d=this.streamingTasks).call(d)).map(g=>g.taskId).join("#")});M.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(p.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(p){if(!p.data||!p.data.retry)throw p;p.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(g=>{M.warning("[".concat(this.spec.clientId,"] live streaming receive error"),p.toString(),"try to republish",g.url),this.startLiveStreamingTask(g.url,g.mode,p).then(()=>{M.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(g.url," success"))}).catch(E=>{M.error("[".concat(this.spec.clientId,"] live streaming republish failed"),g.url,E.toString()),this.onLiveStreamError&&this.onLiveStreamError(g.url,E)})})}}setInjectStreamConfig(r,i){this.injectConfig=Object.assign({},this.injectConfig,r),this.injectLoopTimes=i}async startLiveStreamingTask(r,i,a){var l;if(Array.from(Os(l=this.streamingTasks).call(l)).find(E=>E.mode===ar.INJECT)&&i===ar.INJECT)return new q($.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&i===ar.TRANSCODE)throw new q($.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let d={command:"PublishStream",ts:Date.now(),url:r,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};M.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(r,", mode: ").concat(i));const p=await this.taskMutex.lock();if(!this.connection&&a)return void p();if(this.streamingTasks.get(r)&&!a)return p(),new q($.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(i))}catch(E){throw p(),E}switch(i){case ar.TRANSCODE:d.transcodingConfig=ki({},this.transcodingConfig);break;case ar.RAW:break;case ar.INJECT:d={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:r,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(d.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const g=this.lastTaskId++;try{const E=new Ae((S,R)=>{Zr(this.retryTimeout).then(()=>{if(a)return R(a);const k=this.statusError.get(r);return k?(this.statusError.delete(r),R(k)):void 0})}),C=await Ae.race([this.connection.request("request",{clientRequest:d},!0,{url:r,command:"PublishStream",workerType:i===ar.TRANSCODE?1:2,requestByUser:!a,tid:g.toString()}),E]);this.isStartingStreamingTask=!1,M.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(C.code)),this.streamingTasks.set(r,{clientRequest:d,mode:i,url:r,taskId:g}),p()}catch(E){if(p(),this.isStartingStreamingTask=!1,!E.data||!E.data.retry||a)throw E;return E.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(r,i,E)):await this.startLiveStreamingTask(r,i,E)}}stopLiveStreamingTask(r){return new Ae((i,a)=>{const l=this.streamingTasks.get(r);if(!l||!this.connection)return new q($.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const d=l.mode;l.abortTask=()=>{M.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(r),i()},this.connection.request("request",{clientRequest:{command:d===ar.INJECT?"UninjectStream":"UnpublishStream",url:l.url}},!1,{url:r,command:"UnPublishStream",workerType:d===ar.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(p=>{M.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(p.code)),this.streamingTasks.delete(r),this.streamingTasks.size===0&&d!==ar.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),i(),d===ar.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange($c.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,r)}).catch(a)})}async controlInjectStream(r,i,a,l){const d=this.streamingTasks.get(r);if(!d||!this.connection||d.mode!==ar.INJECT)throw new q($.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:r,control:i,audioVolume:a,position:l}})).serverResponse}resetAllTask(){var r;const i=Array.from(Os(r=this.streamingTasks).call(r));this.terminate();for(const a of i)this.startLiveStreamingTask(a.url,a.mode).catch(l=>{this.onLiveStreamError&&this.onLiveStreamError(a.url,l)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=wo.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(r){if(this.connection)throw new q($.UNEXPECTED_ERROR,"live streaming connection has already connected");const i=await ei(this,fd.REQUEST_WORKER_MANAGER_LIST,r);return this.uapResponse=i,this.connection=new BK(i.workerToken,this.spec,this.wsRetryConfig,r),this.connection.on(ba.WARNING,(a,l)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(l,a)),this.connection.on(ba.PUBLISH_STREAM_STATUS,a=>this.handlePublishStreamServer(a)),this.connection.on(ba.INJECT_STREAM_STATUS,a=>this.handleInjectStreamServerStatus(a)),this.connection.on(ba.REQUEST_NEW_ADDRESS,(a,l)=>{if(!this.connection)return l(new q($.UNEXPECTED_ERROR,"can not get new live streaming address list"));ei(this,fd.REQUEST_WORKER_MANAGER_LIST,r).then(d=>{this.uapResponse=d,a(d.addressList)}).catch(l)}),await this.connection.init(i.addressList),this.connection}handlePublishStreamServer(r){const i=r.serverStatus&&r.serverStatus.url||"empty_url",a=this.streamingTasks.get(i),l=r.reason;switch(r.code){case jn.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case jn.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case jn.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case jn.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const p=new q($.LIVE_STREAMING_CDN_ERROR,"",{code:r.code});if(a)return M.error(p.toString()),this.onLiveStreamError&&this.onLiveStreamError(i,p);if(!this.isStartingStreamingTask)return;this.statusError.set(i,p)}case jn.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const p=new q($.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,l);return this.onLiveStreamWarning&&this.onLiveStreamWarning(i,p)}case jn.LIVE_STREAM_RESPONSE_WORKER_LOST:case jn.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var d;if(!this.connection)return;this.connection.tryNextAddress();const p=Array.from(Os(d=this.streamingTasks).call(d));for(const g of p)g.abortTask?g.abortTask():(M.warning("[".concat(this.spec.clientId,"] publish stream status code"),r.code,"try to republish",g.url),this.startLiveStreamingTask(g.url,g.mode,new q($.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:r.code})).then(()=>{M.debug("[".concat(this.spec.clientId,"] republish live stream success"),g.url)}).catch(E=>{M.error(E.toString()),this.onLiveStreamError&&this.onLiveStreamError(g.url,E)}));return}}}handleInjectStreamServerStatus(r){const i=Number(r.uid),a=r.serverStatus&&r.serverStatus.url;switch(r.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange($c.INJECT_STREAM_STATUS_START_SUCCESS,i,a));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange($c.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,i,a),void this.streamingTasks.delete(a);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange($c.INJECT_STREAM_STATUS_START_UNAUTHORIZED,i,a),void this.streamingTasks.delete(a);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange($c.INJECT_STREAM_STATUS_BROKEN,i,a),void this.streamingTasks.delete(a);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange($c.INJECT_STREAM_STATUS_START_TIMEOUT,i,a),void this.streamingTasks.delete(a);default:return void M.debug("inject stream server status",r)}}hasUrl(r){return this.streamingTasks.has(r)}}class vD{constructor(){w(this,"destChannelMediaInfos",new Map),w(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(r){cx(r),this.srcChannelMediaInfo=r}addDestChannelInfo(r){cx(r),this.destChannelMediaInfos.set(r.channelName,r)}removeDestChannelInfo(r){JS(r),this.destChannelMediaInfos.delete(r)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function ED(n){if(!(n instanceof vD))return new q($.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const r=n.getSrcChannelMediaInfo(),i=n.getDestChannelMediaInfo();if(!r)return new q($.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if(i.size===0)return new q($.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}class HK extends Rn{constructor(r,i,a){super(),w(this,"ws",void 0),w(this,"requestId",1),w(this,"heartBeatTimer",void 0),w(this,"joinInfo",void 0),w(this,"clientId",void 0),w(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),w(this,"onClose",l=>{this.emit("close"),this.dispose()}),w(this,"onMessage",l=>{const d=JSON.parse(l.data);if(!d||d.command!=="serverResponse"||!d.requestId)return d&&d.command==="serverStatus"&&d.serverStatus&&d.serverStatus.command?(this.emit("status",d.serverStatus),void this.emit(d.serverStatus.command,d.serverStatus)):void 0;this.emit("req_".concat(d.requestId),d)}),this.joinInfo=r,this.clientId=i,this.ws=new ru("cross-channel-".concat(this.clientId),a),this.ws.on(Ze.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(Ze.CONNECTED,this.onOpen),this.ws.on(Ze.ON_MESSAGE,this.onMessage),this.ws.on(Ze.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(r){const i=this.requestId++;return r.requestId=i,r.seq=i,this.ws.sendMessage(r),i}waitStatus(r){return new Ae((i,a)=>{const l=window.setTimeout(()=>{a(new q($.TIMEOUT,"wait status timeout, status: ".concat(r)))},5e3);this.once(r,d=>{window.clearTimeout(l),d.state&&d.state!==0?a(new q($.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(r))):i(void 0)}),this.once("dispose",()=>{window.clearTimeout(l),a(new q($.WS_ABORT))})})}async request(r){if(this.ws.state==="closed")throw new q($.WS_DISCONNECT);const i=()=>new Ae((p,g)=>{this.ws.once(Ze.CLOSED,()=>g(new q($.WS_ABORT))),this.ws.once(Ze.CONNECTED,p)});this.ws.state!=="connected"&&await i();const a=this.sendMessage(r),l=new Ae((p,g)=>{const E=()=>{g(new q($.WS_ABORT))};this.ws.once(Ze.RECONNECTING,E),this.ws.once(Ze.CLOSED,E),this.once("req_".concat(a),p),Zr(3e3).then(()=>{this.removeAllListeners("req_".concat(a)),this.ws.off(Ze.RECONNECTING,E),this.ws.off(Ze.CLOSED,E),g(new q($.TIMEOUT,"cross channel ws request timeout"))})}),d=await l;if(!d||d.code!==200)throw new q($.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(d)));return d}async connect(r){this.ws.removeAllListeners(Ze.REQUEST_NEW_URLS),this.ws.on(Ze.REQUEST_NEW_URLS,i=>{i(r)}),await this.ws.init(r)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(r){const i=this.requestId++;return r.requestId=i,this.ws.sendMessage(r),i}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class WK extends Rn{set state(r){r!==this._state&&(r!==Ti.RELAY_STATE_FAILURE&&(this.errorCode=Hc.RELAY_OK),this.emit("state",r,this.errorCode),this._state=r)}get state(){return this._state}constructor(r,i,a,l,d){super(),w(this,"joinInfo",void 0),w(this,"sid",void 0),w(this,"clientId",void 0),w(this,"cancelToken",wo.CancelToken.source()),w(this,"workerToken",void 0),w(this,"requestId",0),w(this,"signal",void 0),w(this,"prevChannelMediaConfig",void 0),w(this,"httpRetryConfig",void 0),w(this,"_resolution",void 0),w(this,"_state",Ti.RELAY_STATE_IDLE),w(this,"errorCode",Hc.RELAY_OK),w(this,"onStatus",p=>{M.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(p))),p&&p.command&&(p.command==="onAudioPacketReceived"&&this.emit("event",Za.PACKET_RECEIVED_AUDIO_FROM_SRC),p.command==="onVideoPacketReceived"&&this.emit("event",Za.PACKET_RECEIVED_VIDEO_FROM_SRC),p.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=Hc.SRC_TOKEN_EXPIRED,this.state=Ti.RELAY_STATE_FAILURE),p.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=Hc.DEST_TOKEN_EXPIRED,this.state=Ti.RELAY_STATE_FAILURE))}),w(this,"onReconnect",async()=>{M.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",Za.NETWORK_DISCONNECTED),this.state=Ti.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(p=>{this.state!==Ti.RELAY_STATE_IDLE&&(M.error("auto restart channel media relay failed",p.toString()),this.errorCode=Hc.SERVER_CONNECTION_LOST,this.state=Ti.RELAY_STATE_FAILURE)})}),this.joinInfo=r,this.clientId=i,this.sid=Ry(),this.signal=new HK(this.joinInfo,this.clientId,a),this.httpRetryConfig=l,this._resolution=d}async startChannelMediaRelay(r){if(this.state!==Ti.RELAY_STATE_IDLE)throw new q($.INVALID_OPERATION);this.state=Ti.RELAY_STATE_CONNECTING,await this.connect(),M.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(r)}catch(i){throw i.data&&i.data.serverResponse&&i.data.serverResponse.command==="SetSourceChannel"?new q($.CROSS_CHANNEL_FAILED_JOIN_SRC):i.data&&i.data.serverResponse&&i.serverResponse.command==="SetDestChannelStatus"?new q($.CROSS_CHANNEL_FAILED_JOIN_DEST):i.data&&i.data.serverResponse&&i.serverResponse.command==="StartPacketTransfer"?new q($.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):i}this.prevChannelMediaConfig=r}async updateChannelMediaRelay(r){if(this.state!==Ti.RELAY_STATE_RUNNING)throw new q($.INVALID_OPERATION);await this.sendUpdateMessage(r),this.prevChannelMediaConfig=r}async setVideoProfile(r){if(this._resolution=r,this.state!==Ti.RELAY_STATE_RUNNING)throw new q($.INVALID_OPERATION);const i=this.genMessage(Xr.SetVideoProfile);await this.signal.request(i),M.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),M.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=Ti.RELAY_STATE_IDLE,this.dispose()}dispose(){M.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=wo.CancelToken.source(),this.state=Ti.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const r=await FK(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=r.workerToken,await this.signal.connect(r.addressList),this.emit("event",Za.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(r){const i=this.genMessage(Xr.StopPacketTransfer);await this.signal.request(i),await this.signal.waitStatus("Normal Quit"),M.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const a=this.genMessage(Xr.SetSdkProfile,r);await this.signal.request(a),M.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const l=this.genMessage(Xr.SetSourceChannel,r);await this.signal.request(l),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",Za.PACKET_JOINED_SRC_CHANNEL),M.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const d=this.genMessage(Xr.SetSourceUserId,r);await this.signal.request(d),M.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const p=this.genMessage(Xr.SetDestChannel,r);await this.signal.request(p),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",Za.PACKET_JOINED_DEST_CHANNEL),M.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const g=this.genMessage(Xr.StartPacketTransfer,r);await this.signal.request(g),this.emit("event",Za.PACKET_SENT_TO_DEST_CHANNEL),this.state=Ti.RELAY_STATE_RUNNING,M.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(r){const i=this.genMessage(Xr.UpdateDestChannel,r);await this.signal.request(i),this.emit("event",Za.PACKET_UPDATE_DEST_CHANNEL),M.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const r=this.genMessage(Xr.StopPacketTransfer);await this.signal.request(r),M.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(r,i){const a=[],l=[],d=[];this.requestId+=1;const p={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:Xo,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};p.sdkVersion==="4.18.2"&&(p.sdkVersion="0.0.1");let g=null,E=null;switch(r){case Xr.SetSdkProfile:return p.clientRequest={command:"SetSdkProfile",type:"multi_channel"},p;case Xr.SetSourceChannel:if(E=i&&i.getSrcChannelMediaInfo(),!E)throw new q($.UNEXPECTED_ERROR,"can not find source config");return p.clientRequest={command:"SetSourceChannel",uid:"0",channelName:E.channelName,token:E.token||this.joinInfo.appId},p;case Xr.SetSourceUserId:if(E=i&&i.getSrcChannelMediaInfo(),!E)throw new q($.UNEXPECTED_ERROR,"can not find source config");return p.clientRequest={command:"SetSourceUserId",uid:E.uid+""},p;case Xr.SetDestChannel:if(g=i&&i.getDestChannelMediaInfo(),!g)throw new q($.UNEXPECTED_ERROR,"can not find dest config");return g.forEach(C=>{a.push(C.channelName),l.push(C.uid+""),d.push(C.token||this.joinInfo.appId)}),p.clientRequest={command:"SetDestChannel",channelName:a,uid:l,token:d},p;case Xr.StartPacketTransfer:return p.clientRequest={command:"StartPacketTransfer"},p;case Xr.Reconnect:return p.clientRequest={command:"Reconnect"},p;case Xr.StopPacketTransfer:return p.clientRequest={command:"StopPacketTransfer"},p;case Xr.UpdateDestChannel:if(g=i&&i.getDestChannelMediaInfo(),!g)throw new q($.UNEXPECTED_ERROR,"can not find dest config");return g.forEach(C=>{a.push(C.channelName),l.push(C.uid+""),d.push(C.token||this.joinInfo.appId)}),p.clientRequest={command:"UpdateDestChannel",channelName:a,uid:l,token:d},p;case Xr.SetVideoProfile:p.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return p}}const ky=n=>{const r=document.createElement("canvas");return r.width=2,r.height=2,new Ae((i,a)=>{r.toBlob(async l=>{if(r.remove(),l){const d=await _D(l);i({buffer:d,width:r.width,height:r.height})}else a(new q($.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},n,1)})},_D=async n=>{const r=await n.arrayBuffer();return new Uint8Array(r)};function SD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function yD(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?SD(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):SD(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}class Ly{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(r){r!==this._videoElementStatus&&(M.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(r)),this._videoElementStatus=r)}constructor(r){w(this,"trackId",void 0),w(this,"config",void 0),w(this,"onFirstVideoFrameDecoded",void 0),w(this,"freezeTimeCounterList",[]),w(this,"renderFreezeAccTime",0),w(this,"isKeepLastFrame",!1),w(this,"timeUpdatedCount",0),w(this,"freezeTime",0),w(this,"playbackTime",0),w(this,"lastTimeUpdatedTime",0),w(this,"autoplayFailed",!1),w(this,"videoTrack",void 0),w(this,"videoElement",void 0),w(this,"cacheVideoElement",void 0),w(this,"videoElementCheckInterval",void 0),w(this,"_videoElementStatus",Yr.NONE),w(this,"isGettingVideoDimensions",!1),w(this,"startGetVideoDimensions",()=>{const i=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return M.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(i,500)};!this.isGettingVideoDimensions&&i()}),w(this,"autoResumeAfterInterruption",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&Gt.curState==="running"&&(M.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(QA())),rN()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),w(this,"handleVideoEvents",i=>{switch(i.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=Yr.PLAYING;break;case"loadeddata":if(this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch{}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=Yr.CANPLAY;break;case"stalled":this.videoElementStatus=Yr.STALLED;break;case"suspend":this.videoElementStatus=Yr.SUSPEND;break;case"pause":this.videoElementStatus=Yr.PAUSED,yi()||Is()||Si()&&this.autoplayFailed||!this.videoTrack||this.videoTrack.readyState!=="live"||(M.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=Yr.WAITING;break;case"abort":this.videoElementStatus=Yr.ABORT;break;case"ended":this.videoElementStatus=Yr.ENDED;break;case"emptied":this.videoElementStatus=Yr.EMPTIED;break;case"error":{this.videoElementStatus=Yr.ERROR;const a=this.videoElement.error;a&&M.error("[".concat(this.trackId,"] media error, code: ").concat(a.code,", message: ").concat(a.message));break}case"timeupdate":{const a=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=a);const l=a-this.lastTimeUpdatedTime,d=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=a,oc.lastVisibleTime<oc.lastHiddenTime||d<oc.lastHiddenTime||d<oc.lastVisibleTime)return;for(l>re("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=l),this.playbackTime+=l;this.playbackTime>=6e3;){this.playbackTime-=6e3;const p=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(p),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),w(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&(M.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(QA())),rN()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),this.trackId=r.trackId,this.config=r,r.element instanceof HTMLVideoElement?this.videoElement=r.element:this.videoElement=document.createElement("video"),Gt.on(_r.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Gt.on(_r.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var r;return(r=this.videoElement.parentElement)!==null&&r!==void 0?r:void 0}updateConfig(r){this.config=r,this.trackId=r.trackId,r.element!==this.videoElement&&(this.destroy(),this.videoElement=r.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(r){this.videoTrack!==r&&(this.videoTrack=r,this.initVideoElement())}play(r){const i=this.videoElement.play();i&&i.catch&&i.catch(l=>{r&&ke.autoplayFailed(r,"video",l.message,this.trackId),l.name==="NotAllowedError"?(M.warning("detected video element autoplay failed",l),this.autoplayFailed=!0,this.handleAutoPlayFailed()):M.warning("[".concat(this.trackId,"] play warning: "),l)});const a=Ht();if((a.name==="Safari"&&Number(a.version)===15||id())&&i&&i.then&&i.catch){const l=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};i.then(l).catch(l)}}getCurrentFrame(){const r=document.createElement("canvas");r.width=this.videoElement.videoWidth,r.height=this.videoElement.videoHeight;const i=r.getContext("2d");if(!i)return M.error("create canvas context failed!"),new ImageData(2,2);i.drawImage(this.videoElement,0,0,r.width,r.height);const a=i.getImageData(0,0,r.width,r.height);return r.remove(),a}async getCurrentFrameToUint8Array(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const a=document.createElement("canvas");a.width=this.videoElement.videoWidth,a.height=this.videoElement.videoHeight;const l=a.getContext("2d");return l?(l.drawImage(this.videoElement,0,0,a.width,a.height),new Ae((d,p)=>{a.toBlob(async g=>{if(a.remove(),g){const E=await _D(g);d({buffer:E,width:a.width,height:a.height})}else p(new q($.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},r,i<0?.1:i>1?1:i)})):await ky(r)}destroy(){Gt.off(_r.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Gt.off(_r.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[]}initVideoElement(){if(this.videoElementStatus=Yr.INIT,!this.videoElementCheckInterval&&(CD.forEach(d=>{this.videoElement.addEventListener(d,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{(function(d){return d!==document.body&&document.body.contains(d)})(this.videoElement)||(this.videoElementStatus=Yr.DESTROYED)},1e3),re("ENABLE_VIDEO_FRAME_CALLBACK"))){var r,i;let d;const p=(g,E)=>{if(this.videoElementStatus===Yr.PLAYING){if(d){const R=E.presentationTime-d.presentationTime;R>re("VIDEO_FREEZE_DURATION")&&oc.lastVisibleTime>=oc.lastHiddenTime&&d.timestamp>oc.lastVisibleTime&&d.timestamp>oc.lastHiddenTime&&(this.renderFreezeAccTime+=R)}d=yD(yD({},E),{},{timestamp:g})}var C,S;re("ENABLE_VIDEO_FRAME_CALLBACK")&&((C=(S=this.videoElement).requestVideoFrameCallback)===null||C===void 0||C.call(S,p))};(r=(i=this.videoElement).requestVideoFrameCallback)===null||r===void 0||r.call(i,p)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),o0()&&(this.videoElement.poster="noposter");const a=Ht();a.name==="Safari"&&Number(a.version)===15||id()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Dn()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Dn()&&this.videoElement.load());const l=this.videoElement.play();l!==void 0&&l.catch(d=>{M.debug("[".concat(this.trackId,"] playback interrupted"),d.toString())})}resetVideoElement(){CD.forEach(r=>{this.videoElement&&this.videoElement.removeEventListener(r,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=Yr.NONE}handleAutoPlayFailed(){const r=i=>{i.preventDefault(),this.videoElement.play().then(()=>{M.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(a=>{M.error(a)}),this.autoplayFailed=!1,dp()?document.body.removeEventListener("click",r,!0):(document.body.removeEventListener("touchstart",r,!0),document.body.removeEventListener("mousedown",r,!0))};dp()?document.body.addEventListener("click",r,!0):(document.body.addEventListener("touchstart",r,!0),document.body.addEventListener("mousedown",r,!0)),Rx()}}const CD=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class TD extends Ly{constructor(r){super(r),w(this,"container",void 0),w(this,"slot",void 0),this.slot=r.element,this.updateConfig(r)}updateConfig(r){this.config=r,this.trackId=r.trackId;const i=r.element;i!==this.slot&&(this.destroy(),this.slot=i),this.createElements()}updateVideoTrack(r){this.videoTrack!==r&&(this.videoTrack=r,this.createElements())}play(r){var i;(i=this.container)!==null&&i!==void 0&&i.contains(this.videoElement)&&super.play(r)}getCurrentFrame(){var r;return(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(r){var i;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(i=this.container)!==null&&i!==void 0&&i.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(r,a):await ky(r)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",re("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var r;!this.container||(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var r;if((r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=document.createElement("video")}}resetVideoElement(){var r;(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}function L0(n){const r={};n.facingMode&&(r.facingMode=n.facingMode),n.cameraId&&(r.deviceId={exact:n.cameraId});const i=Kl(n.encoderConfig);return r.width=i.width,r.height=i.height,!oN()&&i.frameRate&&(r.frameRate=i.frameRate),Ht().name===qt.EDGE&&typeof r.frameRate=="object"&&(r.frameRate.max=60),Dn()&&(r.frameRate={ideal:30,max:30}),r}function GK(n){const r={};n.screenSourceType&&(r.mediaSource=n.screenSourceType),n.extensionId&&yS()&&(r.extensionId=n.extensionId);const{displaySurface:i,selfBrowserSurface:a,surfaceSwitching:l,systemAudio:d}=n;(CS(107)||ZA(107)||eN(93))&&(i&&(Tr(i,"displaySurface",["browser","window","monitor"]),r.displaySurface=i),a?(Tr(a,"selfBrowserSurface",["exclude","include"]),r.selfBrowserSurface=a):r.selfBrowserSurface="include",l&&(Tr(l,"surfaceSwitching",["exclude","include"]),r.surfaceSwitching=l)),(CS(105)||ZA(105)||eN(91))&&d&&(Tr(d,"systemAudio",["exclude","include"]),r.systemAudio=d),n.electronScreenSourceId&&(r.sourceId=n.electronScreenSourceId);const p=n.encoderConfig?HS(n.encoderConfig):null;return r.mandatory={chromeMediaSource:"desktop",maxWidth:p?p.width:void 0,maxHeight:p?p.height:void 0},p&&(p.frameRate&&(typeof p.frameRate=="number"?(r.mandatory.maxFrameRate=p.frameRate,r.mandatory.minFrameRate=p.frameRate):(r.mandatory.maxFrameRate=p.frameRate.max||p.frameRate.ideal||p.frameRate.exact||void 0,r.mandatory.minFrameRate=p.frameRate.min||p.frameRate.ideal||p.frameRate.exact||void 0),r.frameRate=p.frameRate),p.width&&(r.width=p.width),p.height&&(r.height=p.height)),r}function bD(n){const r={};if(oN()||(n.AGC!==void 0&&(r.autoGainControl=n.AGC),n.AEC!==void 0&&(r.echoCancellation=n.AEC),n.ANS!==void 0&&(r.noiseSuppression=n.ANS,yS()&&n.ANS&&(r.googHighpassFilter=n.ANS))),n.encoderConfig){const i=v0(n.encoderConfig);r.channelCount=i.stereo?2:1,r.sampleRate=i.sampleRate,r.sampleSize=i.sampleSize}return n.microphoneId&&(r.deviceId={exact:n.microphoneId}),o0()&&(r.sampleRate=void 0),r}var Rd,M0;(function(n){n.COVERED="COVERED",n.POSITION="POSITION",n.SIZE="SIZE",n.STYLE="STYLE"})(Rd||(Rd={})),function(n){n.UNMOUNTED="UNMOUNTED",n.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(M0||(M0={}));var RD,ID,wD,OD,AD,ND,xD,PD,DD,kD,LD,MD,UD,FD,VD,jD,BD,$D,HD,WD,GD,zD,KD,YD,Et,qD,XD,JD,QD,ZD,ek,tk,nk,ea,rk=new class{constructor(){w(this,"_clientSize",null),w(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),w(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),w(this,"getStyle",n=>window.getComputedStyle(n,null)),w(this,"checkCssVisibleProperty",n=>{let r=!0;const i=this.getStyle(n),{display:a,visibility:l,opacity:d,filter:p}=i;return(a==="none"||["hidden","collapse"].includes(l)||Number(d)<.1)&&(r=!1),r?(p&&p.split(" ").filter(g=>{const E=g.split("(")[0];return["brightness","blur","opacity"].includes(E)}).map(g=>{const[E,C]=g.split(/\(|\)/);return[E,Number(C.match(/^[0-9\.]+/))]}).forEach(g=>{const[E,C]=g;switch(E){case"brightness":(C<.1||C>3)&&(r=!1);break;case"blur":C>3&&(r=!1);break;case"opacity":C<.1&&(r=!1)}}),r):!1}),w(this,"checkPropertyUpToAllParentNodes",(n,r)=>{let i=!0,a=!0;const l=p=>r(p);let d=n;for(;d&&a;)l(d)||(i=!1,a=!1),d=d.parentElement,d||(a=!1);return i}),w(this,"checkActualCssVisibleIncludeInherit",n=>this.checkPropertyUpToAllParentNodes(n,this.checkCssVisibleProperty)),w(this,"getSizeAboutClient",n=>{const{width:r,height:i,left:a,right:l,top:d,bottom:p}=n.getBoundingClientRect(),g=this.getClientWidth(),E=this.getClientHeight();return{width:r,height:i,left:a,right:l,top:d,bottom:p,clientWidth:g,clientHeight:E,clientMin:Math.min(g,E)}}),w(this,"checkActualSize",()=>{const{width:n,height:r,clientMin:i}=this._clientSize;return this.checkSizeIsVisible(n,r,i)}),w(this,"elementFromPoint",(n,r)=>document.elementFromPoint?document.elementFromPoint(n,r):null),w(this,"checkCoverForAPoint",(n,r,i)=>{const a=this.elementFromPoint(n,r);return a!==null&&a!==i}),w(this,"getPointPositionList",()=>{const{width:n,height:r,left:i,top:a}=this._clientSize,l=n/6,d=r/6,p=[],g=10**6;for(let E=0;E<5;E++)for(let C=0;C<5;C++){const S=(i*g+(E===0?.1:E===4?(l*E*g-1e5)/g:l*E)*g)/g,R=(a*g+(C===0?.1:C===4?(d*C*g-1e5)/g:d*C)*g)/g;p.push({x:S,y:R})}return[...p]}),w(this,"checkElementCover",n=>this.getPointPositionList().map(r=>this.checkCoverForAPoint(r.x,r.y,n)).filter(r=>!!r).length>6),w(this,"checkSizeIsVisible",(n,r,i)=>(n>50||i/n<=10)&&(r>50||i/r<=10)),w(this,"checkSizeOfPartInClient",()=>{const{left:n,right:r,top:i,bottom:a,clientHeight:l,clientWidth:d,clientMin:p}=this._clientSize;let g,E,C,S;if(n<0)g=0;else{if(!(n<d))return!1;g=n}if(r<0)return!1;if(E=r<d?r:d,i<0)C=0;else{if(!(i<l))return!1;C=i}if(a<0)return!1;S=a<l?a:l;const R=E-g,k=S-C;return this.checkSizeIsVisible(R,k,p)}),w(this,"returnHiddenResult",n=>(this._clientSize=null,{visible:!1,reason:n})),w(this,"checkOneElementVisible",n=>{if(n instanceof HTMLElement){if(this.checkElementIsMountedOnDom(n)){if(this.checkActualCssVisibleIncludeInherit(n)){if(this._clientSize=this.getSizeAboutClient(n),this.checkElementCover(n))return this.returnHiddenResult(Rd.COVERED);{const r=this.checkActualSize(),i=this.checkSizeOfPartInClient();return r&&!i?this.returnHiddenResult(Rd.POSITION):r?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(Rd.SIZE)}}return this.returnHiddenResult(Rd.STYLE)}return this.returnHiddenResult(M0.UNMOUNTED)}return this.returnHiddenResult(M0.INVALID_HTML_ELEMENT)}),w(this,"checkElementIsMountedOnDom",n=>this.checkPropertyUpToAllParentNodes(n,r=>r.nodeName.toUpperCase()!=="HTML"?r.parentElement!==null:!!document.documentElement))}};function ik(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function bp(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?ik(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ik(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}let nr=(RD=He({argsMap:(n,r,i)=>[n.getTrackId(),typeof r=="string"?r:r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",i]}),ID=Ln(),wD=He({argsMap:n=>[n.getTrackId()]}),OD=vd("LocalVideoTrack","_enabledMutex"),AD=He({argsMap:(n,r)=>[n.getTrackId(),r]}),ND=Ln(),xD=vd("LocalVideoTrack","_enabledMutex"),PD=He({argsMap:(n,r)=>[n.getTrackId(),r]}),DD=Ln(),kD=He({argsMap:(n,r)=>[n.getTrackId(),r]}),LD=Ln(),MD=Ln(),UD=He({argsMap:(n,r,i)=>[n.getTrackId(),r,i]}),FD=Ln(),VD=Ln(),jD=Ln(),BD=Ln(),$D=Ln(),HD=Ln(),WD=Ln(),GD=He({argsMap:(n,r)=>[n.getTrackId(),r.name]}),zD=He({argsMap:n=>[n.getTrackId()]}),KD=He({argsMap:n=>[n.getTrackId()]}),YD=He({argsMap:(n,r,i)=>[n.getTrackId(),r.label,i]}),ve((Et=class mV extends gy{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Yr.PLAYING)}get processorContext(){return this._processorContext}set processorContext(r){this._processorContext=r}get __className__(){return"LocalVideoTrack"}constructor(r,i,a,l,d,p){if(super(r,d),w(this,"trackMediaType","video"),w(this,"_player",void 0),w(this,"_videoVisibleTimer",null),w(this,"_previousVideoVisibleStatus",void 0),w(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),w(this,"_encoderConfig",void 0),w(this,"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),w(this,"_optimizationMode",void 0),w(this,"_videoHeight",void 0),w(this,"_videoWidth",void 0),w(this,"_forceBitrateLimit",void 0),w(this,"_enabled",!0),w(this,"processorDestination",void 0),w(this,"_processorContext",void 0),Si()){const{width:g,height:E}=r.getSettings();this._videoWidth=g,this._videoHeight=E}else this.updateMediaStreamTrackResolution();this._encoderConfig=i,this._scalabiltyMode=a,this._optimizationMode=l,this._hints=p||[],this._hints.indexOf(hr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile(),i&&this._hints.indexOf(hr.CUSTOM_TRACK)!==-1&&this.setEncoderConfiguration(i),this.processorContext=new Hx(this.getTrackId(),"local"),this.processorDestination=new $x(this.processorContext),this.bindProcessorDestinationEvents()}play(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof r=="string"){const l=document.getElementById(r);l?r=l:(M.warning("[".concat(this.getTrackId(),'] can not find "#').concat(r,'" element, use document.body')),r=document.body)}M.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(i));const a=bp(bp(bp({},this._getDefaultPlayerConfig()),i),{},{trackId:this.getTrackId(),element:r});this._player?this._player.updateConfig(a):(r instanceof HTMLVideoElement?this._player=new Ly(a):this._player=new TD(a),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const l=this.getVideoElementVisibleStatus();this.safeEmit(Wc.VIDEO_ELEMENT_VISIBLE_STATUS,l)}catch{}},re("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,M.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(r,i){if(!i){if(r===this._enabled)return;this.stateCheck("enabled",r)}if(M.info("[".concat(this.getTrackId(),"] start setEnabled"),r),!r){this._originMediaStreamTrack.enabled=!1;try{await Mn(this,Xe.NEED_DISABLE_TRACK,this)}catch(a){throw M.error("[".concat(this.getTrackId(),"] setEnabled to false error"),a.toString()),a}return i||(this._enabled=!1),void M.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await Mn(this,Xe.NEED_ENABLE_TRACK,this)}catch(a){throw M.error("[".concat(this.getTrackId(),"] setEnabled to true error"),a.toString()),a}M.info("[".concat(this.getTrackId(),"] setEnabled to true success")),i||(this._enabled=!0)}async setMuted(r){r!==this._muted&&(this.stateCheck("muted",r),this._muted=r,this._originMediaStreamTrack.enabled=!r,M.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(r)),r?await Mn(this,Xe.NEED_MUTE_TRACK,this):await Mn(this,Xe.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(r,i){if(!this._enabled)throw new q($.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(r=Kl(r),this._forceBitrateLimit&&(r.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:r.bitrateMax,r.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:r.bitrateMin),r.width||r.height||r.frameRate){const a=L0({encoderConfig:r});(Si()||yi()||Is())&&(a.deviceId=void 0),M.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(r),JSON.stringify(a));try{await this._originMediaStreamTrack.applyConstraints(a),this.updateMediaStreamTrackResolution()}catch(l){const d=new q($.UNEXPECTED_ERROR,l.toString());throw M.error("[".concat(this.getTrackId(),"] applyConstraints error"),d.toString()),d}}this._encoderConfig=r,this._hints.indexOf(hr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Mn(this,Xe.NEED_UPDATE_VIDEO_ENCODER,this)}catch(a){return a.throw()}}getStats(){return Sp(()=>{M.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),wa(this,Xe.GET_STATS)||bp({},ry)}async setBeautyEffect(r){M.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(r,i):await ky(r)}clone(r,i,a,l){const d=this._mediaStreamTrack.clone();return new mV(d,r,i,a,l)}async setBitrateLimit(r){if(M.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(r))),r){this._forceBitrateLimit=r,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<r.max_bitrate?this._encoderConfig.bitrateMax:r.max_bitrate:this._encoderConfig.bitrateMax=r.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=r.min_bitrate);try{await Mn(this,Xe.NEED_UPDATE_VIDEO_ENCODER,this)}catch(i){return i.throw()}}}async setOptimizationMode(r){if(r!=="motion"&&r!=="detail"&&r!=="balanced")return void M.error($.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const i=this._optimizationMode;try{this._optimizationMode=r,await Mn(this,Xe.SET_OPTIMIZATION_MODE,this)}catch(a){throw this._optimizationMode=i,M.error("[".concat(this.getTrackId(),"] set optimization mode failed"),a.toString()),a}M.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(r,")"))}setScalabiltyMode(r){if(r.numSpatialLayers===1&&r.numTemporalLayers!==1)return M.error($.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=r,M.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(r,")"))}updateMediaStreamTrackResolution(){VP(this._originMediaStreamTrack).then(r=>{let[i,a]=r;this._videoHeight=a,this._videoWidth=i}).catch(N0)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:r,height:i,frameRate:a}=this.getMediaStreamTrackSettings();if(!r||!i||!a)return;const[l,d]=function(p,g,E){const C=re("BITRATE_ADAPTER_TYPE");let S;const R=200*Math.pow(E/15,.6)*Math.pow(p*g/640/360,.75),k=R;if(C==="STANDARD_BITRATE")S=4*R;else{if(C!=="COMPATIABLE_BITRATE")return;S=2*R}return[Math.floor(S),Math.floor(k)]}(r,i,a)||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=d,this._encoderConfig.bitrateMax=l,M.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(r,", h: ").concat(i,", fps: ").concat(a,"] => [brMax: ").concat(l,", brMin: ").concat(d,"]")))}getVideoElementVisibleStatus(){try{var r,i;const a=this==null||(r=this._player)===null||r===void 0?void 0:r.getContainerElement(),l={track:this,element:this==null||(i=this._player)===null||i===void 0?void 0:i.getVideoElement(),slot:a==null?void 0:a.parentElement},{element:d,slot:p}=l;if(this.isPlaying&&d instanceof HTMLVideoElement&&p instanceof HTMLElement){const g=rk.checkOneElementVisible(d),E=Object.assign({},g);if(E.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=E.visible;const C=ke.reportApiInvoke(null,{tag:Tn.TRACER,name:Qn.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});E.visible?C.onSuccess("Video is visible"):C.onSuccess("Invisible because of ".concat(E.reason))}return E}return}catch(a){throw new q($.GET_VIDEO_ELEMENT_VISIBLE_ERROR,a.message)}}async renewMediaStreamTrack(r){}pipe(r){if(this.processor===r)return r;if(r._source)throw new q($.INVALID_OPERATION,"Processor ".concat(r.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=r,this.processor._source=this,r.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),r}unpipe(){if(!this.processor)return;const r=this.processor;this.processor._source=void 0,this.processor=void 0,r.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}async replaceTrack(r,i){if(!(r instanceof MediaStreamTrack))throw new q($.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if(r.kind!=="video")throw new q($.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(r,i,!0),this.updateMediaStreamTrackResolution()}bindProcessorDestinationEvents(){this.processorDestination.on(Jr.ON_TRACK,async r=>{r?r!==this._mediaStreamTrack&&(this._mediaStreamTrack=r,this._updatePlayerSource(),await Mn(this,Xe.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mn(this,Xe.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Jr.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(Xi.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Xi.REQUEST_CONSTRAINTS)}}).prototype,"play",[RD,ID],Object.getOwnPropertyDescriptor(Et.prototype,"play"),Et.prototype),ve(Et.prototype,"stop",[wD],Object.getOwnPropertyDescriptor(Et.prototype,"stop"),Et.prototype),ve(Et.prototype,"setEnabled",[OD,AD,ND],Object.getOwnPropertyDescriptor(Et.prototype,"setEnabled"),Et.prototype),ve(Et.prototype,"setMuted",[xD,PD,DD],Object.getOwnPropertyDescriptor(Et.prototype,"setMuted"),Et.prototype),ve(Et.prototype,"setEncoderConfiguration",[kD,LD],Object.getOwnPropertyDescriptor(Et.prototype,"setEncoderConfiguration"),Et.prototype),ve(Et.prototype,"getStats",[MD],Object.getOwnPropertyDescriptor(Et.prototype,"getStats"),Et.prototype),ve(Et.prototype,"setBeautyEffect",[UD,FD],Object.getOwnPropertyDescriptor(Et.prototype,"setBeautyEffect"),Et.prototype),ve(Et.prototype,"getCurrentFrameData",[VD],Object.getOwnPropertyDescriptor(Et.prototype,"getCurrentFrameData"),Et.prototype),ve(Et.prototype,"getCurrentFrameImage",[jD],Object.getOwnPropertyDescriptor(Et.prototype,"getCurrentFrameImage"),Et.prototype),ve(Et.prototype,"setBitrateLimit",[BD],Object.getOwnPropertyDescriptor(Et.prototype,"setBitrateLimit"),Et.prototype),ve(Et.prototype,"setOptimizationMode",[$D],Object.getOwnPropertyDescriptor(Et.prototype,"setOptimizationMode"),Et.prototype),ve(Et.prototype,"setScalabiltyMode",[HD],Object.getOwnPropertyDescriptor(Et.prototype,"setScalabiltyMode"),Et.prototype),ve(Et.prototype,"updateMediaStreamTrackResolution",[WD],Object.getOwnPropertyDescriptor(Et.prototype,"updateMediaStreamTrackResolution"),Et.prototype),ve(Et.prototype,"pipe",[GD],Object.getOwnPropertyDescriptor(Et.prototype,"pipe"),Et.prototype),ve(Et.prototype,"unpipe",[zD],Object.getOwnPropertyDescriptor(Et.prototype,"unpipe"),Et.prototype),ve(Et.prototype,"close",[KD],Object.getOwnPropertyDescriptor(Et.prototype,"close"),Et.prototype),ve(Et.prototype,"replaceTrack",[YD],Object.getOwnPropertyDescriptor(Et.prototype,"replaceTrack"),Et.prototype),Et),ok=(qD=He({argsMap:(n,r)=>[n.getTrackId(),r]}),XD=Ln(),JD=vd("CameraVideoTrack","_enabledMutex"),QD=He({argsMap:(n,r)=>[n.getTrackId(),r]}),ZD=Ln(),ek=He({argsMap:(n,r)=>[n.getTrackId(),r]}),tk=Ln(),nk=He({argsMap:n=>[n.getTrackId()]}),ve((ea=class extends nr{get __className__(){return"CameraVideoTrack"}constructor(n,r,i,a,l,d){super(n,Kl(r.encoderConfig),a,l,d),w(this,"_config",void 0),w(this,"_originalConstraints",void 0),w(this,"_constraints",void 0),w(this,"_enabled",!0),w(this,"_deviceName","default"),w(this,"tryResumeVideoForIOS15_16WeChat",async()=>{(id()||TS())&&!function(){const p=Ht();if(p.os!==zr.IOS||!p.osVersion)return!1;const g=p.osVersion.split(".");return Number(g[0])===15&&Number(g[1])>=2}()&&iN()&&this._enabled&&!this._isClosed&&(M.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=r,this._originalConstraints=i,this._constraints=i,this._deviceName=n.label,this._encoderConfig=Kl(this._config.encoderConfig),Gt.on(_r.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Gt.on(_r.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(n){if(M.info("[".concat(this.getTrackId(),"] set device to ").concat(n)),this._enabled)try{const r=await ko.getDeviceById(n),i={};i.video=bp({},this._constraints),i.video.deviceId={exact:n},i.video.facingMode=void 0,this._originMediaStreamTrack.stop();let a=null;try{a=await Ia(i,this.getTrackId())}catch(l){throw M.error("[".concat(this.getTrackId(),"] setDevice failed"),l.toString()),a=await Ia({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(a.getVideoTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(a.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=r.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(r){throw M.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}else try{const r=await ko.getDeviceById(n);this._deviceName=r.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(r){throw M.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}M.info("[".concat(this.getTrackId(),"] setDevice success"))}async setEnabled(n,r){if(!r){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(M.info("[".concat(this.getTrackId(),"] start setEnabled"),n),n){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const i=await Ia({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1)}await Mn(this,Xe.NEED_ENABLE_TRACK,this)}catch(i){throw M.error("[".concat(this.getTrackId(),"] setEnabled true error"),i.toString()),i}this.updateMediaStreamTrackResolution(),M.info("[".concat(this.getTrackId(),"] setEnabled to true success")),r||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),r||(this._enabled=!1);try{await Mn(this,Xe.NEED_DISABLE_TRACK,this)}catch(i){throw M.error("[".concat(this.getTrackId(),"] setEnabled to false error"),i.toString()),i}M.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(n,r){if(!this._enabled)throw new q($.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");n=Kl(n),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:n.bitrateMin);const i=tr(this._config);i.encoderConfig=n;const a=L0(i);(Si()||yi()||Is())&&(a.deviceId=void 0),M.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(a));try{await this._originMediaStreamTrack.applyConstraints(a),this.updateMediaStreamTrackResolution()}catch(l){const d=new q($.UNEXPECTED_ERROR,l.toString());throw M.error("[".concat(this.getTrackId(),"] applyConstraints error"),d.toString()),d}this._config=i,this._constraints=a,this._originalConstraints=a,this._encoderConfig=n,this._hints.indexOf(hr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Mn(this,Xe.NEED_UPDATE_VIDEO_ENCODER,this)}catch(l){return l.throw()}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((yi()||Is())&&this._enabled&&!this._isClosed&&Gt.duringInterruption){const n=async()=>{Gt.off(_r.IOS_INTERRUPTION_END,n),this._enabled&&!this._isClosed&&(M.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Gt.on(_r.IOS_INTERRUPTION_END,n)}else M.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Wc.TRACK_ENDED)}async renewMediaStreamTrack(n){const r=n||this._constraints,i=ko.searchDeviceIdByName(this._deviceName);if(i&&!r.deviceId&&(r.deviceId={exact:i}),this._enabled){const a=await Ia({video:r},this.getTrackId());this._constraints=r,await this._updateOriginMediaStreamTrack(a.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),Gt.off(_r.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Gt.off(_r.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}bindProcessorContextEvents(){this.processorContext.on(Xi.REQUEST_UPDATE_CONSTRAINTS,async(n,r,i)=>{try{const a=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(a),r()}catch(a){i(a)}}),this.processorContext.on(Xi.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[qD,XD],Object.getOwnPropertyDescriptor(ea.prototype,"setDevice"),ea.prototype),ve(ea.prototype,"setEnabled",[JD,QD,ZD],Object.getOwnPropertyDescriptor(ea.prototype,"setEnabled"),ea.prototype),ve(ea.prototype,"setEncoderConfiguration",[ek,tk],Object.getOwnPropertyDescriptor(ea.prototype,"setEncoderConfiguration"),ea.prototype),ve(ea.prototype,"close",[nk],Object.getOwnPropertyDescriptor(ea.prototype,"close"),ea.prototype),ea);class My{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}constructor(r,i){w(this,"uid",void 0),w(this,"_uintid",void 0),w(this,"_trust_in_room_",!0),w(this,"_trust_audio_enabled_state_",!0),w(this,"_trust_video_enabled_state_",!0),w(this,"_trust_audio_mute_state_",!0),w(this,"_trust_video_mute_state_",!0),w(this,"_audio_muted_",!1),w(this,"_video_muted_",!1),w(this,"_audio_enabled_",!0),w(this,"_video_enabled_",!0),w(this,"_audio_added_",!1),w(this,"_video_added_",!1),w(this,"_trust_video_stream_added_state_",!0),w(this,"_trust_audio_stream_added_state_",!0),w(this,"_audioTrack",void 0),w(this,"_videoTrack",void 0),w(this,"_audioSSRC",void 0),w(this,"_videoSSRC",void 0),w(this,"_audioOrtc",void 0),w(this,"_videoOrtc",void 0),w(this,"_cname",void 0),w(this,"_rtxSsrcId",void 0),this.uid=r,this._uintid=i}}var zK=gA,KK=Zu,YK=zm;xi({target:"Promise",stat:!0},{try:function(n){var r=KK.f(this),i=YK(n);return(i.error?r.reject:r.resolve)(i.value),r.promise}});var Uy=zK,qK=xi,XK=I,JK=c,QK=_p,ZK=ht,eY=Hr,tY=Lc,ak=GS,nY=fx,rY=Sx,iY=Nn,sk=or("isConcatSpreadable"),ck=9007199254740991,lk="Maximum allowed index exceeded",uk=XK.TypeError,oY=iY>=51||!JK(function(){var n=[];return n[sk]=!1,n.concat()[0]!==n}),aY=rY("concat"),sY=function(n){if(!ZK(n))return!1;var r=n[sk];return r!==void 0?!!r:QK(n)};qK({target:"Array",proto:!0,forced:!oY||!aY},{concat:function(n){var r,i,a,l,d,p=eY(this),g=nY(p,0),E=0;for(r=-1,a=arguments.length;r<a;r++)if(sY(d=r===-1?p:arguments[r])){if(E+(l=tY(d))>ck)throw uk(lk);for(i=0;i<l;i++,E++)i in d&&ak(g,E,d[i])}else{if(E>=ck)throw uk(lk);ak(g,E++,d)}return g.length=E,g}});var dk={},cY=Ee,lY=lt,hk=Om.f,uY=jN,pk=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];dk.f=function(n){return pk&&cY(n)=="Window"?function(r){try{return hk(r)}catch{return uY(pk)}}(n):hk(lY(n))};var Rp={},dY=or;Rp.f=dY;var fk=ze,hY=Xn,pY=Rp,fY=qa.f,Fr=function(n){var r=fk.Symbol||(fk.Symbol={});hY(r,n)||fY(r,n,{value:pY.f(n)})},Id=xi,Fy=I,mY=Ke,gY=D,Ip=ee,vY=y,wd=j,iu=Wn,Vy=c,ti=Xn,EY=_p,_Y=U,SY=ht,yY=T,jy=Gi,By=Xa,CY=Hr,U0=lt,$y=xr,mk=qu,Hy=ae,wp=Pm,gk=S_,TY=Om,vk=dk,Wy=E_,Ek=V,_k=qa,bY=__,Sk=H,RY=F_,Gy=$m,Op=vr.exports,yk=Am,Ck=Go,Tk=or,IY=Rp,wY=Fr,OY=op,bk=Bm,F0=gx.forEach,Lo=wm("hidden"),V0="Symbol",Rk=Tk("toPrimitive"),AY=bk.set,Ik=bk.getterFor(V0),rs=Object.prototype,Yc=Fy.Symbol,ou=Yc&&Yc.prototype,wk=Fy.TypeError,zy=Fy.QObject,Ap=mY("JSON","stringify"),Ok=Ek.f,qc=_k.f,Ak=vk.f,NY=Sk.f,Nk=vY([].push),cc=Op("symbols"),Np=Op("op-symbols"),Ky=Op("string-to-symbol-registry"),Yy=Op("symbol-to-string-registry"),xY=Op("wks"),qy=!zy||!zy.prototype||!zy.prototype.findChild,Xy=wd&&Vy(function(){return wp(qc({},"a",{get:function(){return qc(this,"a",{value:7}).a}})).a!=7})?function(n,r,i){var a=Ok(rs,r);a&&delete rs[r],qc(n,r,i),a&&n!==rs&&qc(rs,r,a)}:qc,Jy=function(n,r){var i=cc[n]=wp(ou);return AY(i,{type:V0,tag:n,description:r}),wd||(i.description=r),i},j0=function(n,r,i){n===rs&&j0(Np,r,i),By(n);var a=$y(r);return By(i),ti(cc,a)?(i.enumerable?(ti(n,Lo)&&n[Lo][a]&&(n[Lo][a]=!1),i=wp(i,{enumerable:Hy(0,!1)})):(ti(n,Lo)||qc(n,Lo,Hy(1,{})),n[Lo][a]=!0),Xy(n,a,i)):qc(n,a,i)},Qy=function(n,r){By(n);var i=U0(r),a=gk(i).concat(Zy(i));return F0(a,function(l){wd&&!Ip(xk,i,l)||j0(n,l,i[l])}),n},xk=function(n){var r=$y(n),i=Ip(NY,this,r);return!(this===rs&&ti(cc,r)&&!ti(Np,r))&&(!(i||!ti(this,r)||!ti(cc,r)||ti(this,Lo)&&this[Lo][r])||i)},Pk=function(n,r){var i=U0(n),a=$y(r);if(i!==rs||!ti(cc,a)||ti(Np,a)){var l=Ok(i,a);return!l||!ti(cc,a)||ti(i,Lo)&&i[Lo][a]||(l.enumerable=!0),l}},Dk=function(n){var r=Ak(U0(n)),i=[];return F0(r,function(a){ti(cc,a)||ti(yk,a)||Nk(i,a)}),i},Zy=function(n){var r=n===rs,i=Ak(r?Np:U0(n)),a=[];return F0(i,function(l){!ti(cc,l)||r&&!ti(rs,l)||Nk(a,cc[l])}),a};if(iu||(Gy(ou=(Yc=function(){if(yY(ou,this))throw wk("Symbol is not a constructor");var n=arguments.length&&arguments[0]!==void 0?mk(arguments[0]):void 0,r=Ck(n),i=function(a){this===rs&&Ip(i,Np,a),ti(this,Lo)&&ti(this[Lo],r)&&(this[Lo][r]=!1),Xy(this,r,Hy(1,a))};return wd&&qy&&Xy(rs,r,{configurable:!0,set:i}),Jy(r,n)}).prototype,"toString",function(){return Ik(this).tag}),Gy(Yc,"withoutSetter",function(n){return Jy(Ck(n),n)}),Sk.f=xk,_k.f=j0,bY.f=Qy,Ek.f=Pk,TY.f=vk.f=Dk,Wy.f=Zy,IY.f=function(n){return Jy(Tk(n),n)},wd&&qc(ou,"description",{configurable:!0,get:function(){return Ik(this).description}})),Id({global:!0,wrap:!0,forced:!iu,sham:!iu},{Symbol:Yc}),F0(gk(xY),function(n){wY(n)}),Id({target:V0,stat:!0,forced:!iu},{for:function(n){var r=mk(n);if(ti(Ky,r))return Ky[r];var i=Yc(r);return Ky[r]=i,Yy[i]=r,i},keyFor:function(n){if(!jy(n))throw wk(n+" is not a symbol");if(ti(Yy,n))return Yy[n]},useSetter:function(){qy=!0},useSimple:function(){qy=!1}}),Id({target:"Object",stat:!0,forced:!iu,sham:!wd},{create:function(n,r){return r===void 0?wp(n):Qy(wp(n),r)},defineProperty:j0,defineProperties:Qy,getOwnPropertyDescriptor:Pk}),Id({target:"Object",stat:!0,forced:!iu},{getOwnPropertyNames:Dk,getOwnPropertySymbols:Zy}),Id({target:"Object",stat:!0,forced:Vy(function(){Wy.f(1)})},{getOwnPropertySymbols:function(n){return Wy.f(CY(n))}}),Ap&&Id({target:"JSON",stat:!0,forced:!iu||Vy(function(){var n=Yc();return Ap([n])!="[null]"||Ap({a:n})!="{}"||Ap(Object(n))!="{}"})},{stringify:function(n,r,i){var a=RY(arguments),l=r;if((SY(r)||n!==void 0)&&!jy(n))return EY(r)||(r=function(d,p){if(_Y(l)&&(p=Ip(l,this,d,p)),!jy(p))return p}),a[1]=r,gY(Ap,null,a)}}),!ou[Rk]){var PY=ou.valueOf;Gy(ou,Rk,function(n){return Ip(PY,this)})}OY(Yc,V0),yk[Lo]=!0,Fr("asyncIterator"),Fr("hasInstance"),Fr("isConcatSpreadable"),Fr("iterator"),Fr("match"),Fr("matchAll"),Fr("replace"),Fr("search"),Fr("species"),Fr("split"),Fr("toPrimitive"),Fr("toStringTag"),Fr("unscopables"),op(I.JSON,"JSON",!0);var DY=ze.Symbol;Fr("asyncDispose"),Fr("dispose"),Fr("matcher"),Fr("metadata"),Fr("observable"),Fr("patternMatch"),Fr("replaceAll");var kk=DY,Lk=Rp.f("asyncIterator"),kY=Lk;function Mk(n){this.wrapped=n}function xp(n){var r,i;function a(d,p){try{var g=n[d](p),E=g.value,C=E instanceof Mk;Uy.resolve(C?E.wrapped:E).then(function(S){C?a(d==="return"?"return":"next",S):l(g.done?"return":"normal",S)},function(S){a("throw",S)})}catch(S){l("throw",S)}}function l(d,p){switch(d){case"return":r.resolve({value:p,done:!0});break;case"throw":r.reject(p);break;default:r.resolve({value:p,done:!1})}(r=r.next)?a(r.key,r.arg):i=null}this._invoke=function(d,p){return new Uy(function(g,E){var C={key:d,arg:p,resolve:g,reject:E,next:null};i?i=i.next=C:(r=i=C,a(d,p))})},typeof n.return!="function"&&(this.return=void 0)}function Oa(n){return function(){return new xp(n.apply(this,arguments))}}function _t(n){return new Mk(n)}xp.prototype[typeof kk=="function"&&kY||"@@asyncIterator"]=function(){return this},xp.prototype.next=function(n){return this._invoke("next",n)},xp.prototype.throw=function(n){return this._invoke("throw",n)},xp.prototype.return=function(n){return this._invoke("return",n)};var LY=Rp.f("iterator");function B0(n,r){var i={},a=!1;function l(d,p){return a=!0,p=new Uy(function(g){g(n[d](p))}),{done:!1,value:r(p)}}return i[kk!==void 0&&LY||"@@iterator"]=function(){return this},i.next=function(d){return a?(a=!1,d):l("next",d)},typeof n.throw=="function"&&(i.throw=function(d){if(a)throw a=!1,d;return l("throw",d)}),typeof n.return=="function"&&(i.return=function(d){return a?(a=!1,d):l("return",d)}),i}var Uk=Lk,rr={exports:{}};function Fk(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function Vk(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Fk(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Fk(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}function eC(n,r,i,a,l,d,p){let g=[],E=[],C=[],S=[],R=!1,k=!1;if(rr.exports.parse(n).mediaDescriptions.forEach(F=>{p&&p!==F.attributes.direction||(F.media.mediaType!=="video"||R||(E=F.attributes.payloads,S=F.attributes.extmaps,R=!0),F.media.mediaType!=="audio"||k||(g=F.attributes.payloads,C=F.attributes.extmaps,k=!0))}),!S||E.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!C||g.length===0)throw new Error("Cannot get audio capabilities from SDP.");return E.forEach(F=>{var W;(W=F.rtpMap)!==null&&W!==void 0&&W.clockRate&&(F.rtpMap.clockRate=parseInt(F.rtpMap.clockRate))}),g.forEach(F=>{var W;(W=F.rtpMap)!==null&&W!==void 0&&W.clockRate&&(F.rtpMap.clockRate=parseInt(F.rtpMap.clockRate))}),r&&(g=g.filter(F=>{var W;return((W=F.rtpMap)===null||W===void 0?void 0:W.encodingName.toLowerCase())!=="rtx"}),E=E.filter(F=>{var W;return((W=F.rtpMap)===null||W===void 0?void 0:W.encodingName.toLowerCase())!=="rtx"})),i&&(E=E.filter(F=>{var W;return!/(red)|(ulpfec)|(flexfec)/i.test(((W=F.rtpMap)===null||W===void 0?void 0:W.encodingName)||"")})),a&&(g=g.filter(F=>{var W;return!/(red)|(ulpfec)|(flexfec)/i.test(((W=F.rtpMap)===null||W===void 0?void 0:W.encodingName)||"")})),l&&(l==null?void 0:l.length)>0&&(g=g.filter(F=>{var W;return l.includes(((W=F.rtpMap)===null||W===void 0?void 0:W.encodingName.toLowerCase())||"")})),d&&(d==null?void 0:d.length)>0&&(E=E.filter(F=>{var W;return d.includes(((W=F.rtpMap)===null||W===void 0?void 0:W.encodingName.toLowerCase())||"")})),{audioCodecs:g,videoCodecs:E,audioExtensions:C,videoExtensions:S}}function au(n){const r=rr.exports.parse(n);let i,a;for(const l of r.mediaDescriptions){if(!i){const d=l.attributes.iceUfrag,p=l.attributes.icePwd;if(!d||!p)throw new Error("Cannot get iceUfrag or icePwd from SDP.");i={iceUfrag:d,icePwd:p}}if(!a){const d=l.attributes.fingerprints;d.length>0&&(a={fingerprints:d})}}if(!a&&r.attributes.fingerprints.length>0&&(a={fingerprints:r.attributes.fingerprints}),!a||!i)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:i,dtlsParameters:a}}function jk(n,r){const i=[],a=n.attributes.ssrcGroups.filter(p=>p.semantic==="FID"),l=n.attributes.ssrcGroups.find(p=>p.semantic==="SIM"),d=n.attributes.ssrcs;if(l)l.ssrcIds.forEach(p=>{var g;const E=(g=a.find(C=>C.ssrcIds[0]===p))===null||g===void 0?void 0:g.ssrcIds[1];i.push({ssrcId:p,rtx:r?E:void 0})});else if(a.length>0){const p=a[0].ssrcIds[0],g=a[0].ssrcIds[1];i.push({ssrcId:p,rtx:r?g:void 0})}else{if(d.length===0)throw new Error("No ssrcs found on local media description.");i.push({ssrcId:d[0].ssrcId})}return i}function Bk(n,r){const{cname:i}=n;let a;r&&r.ip&&typeof r.port=="number"?(a=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:r.ip,port:r.port.toString(),type:"host",extension:{}}],M.debug("Using remote candidate from AP ".concat(r.ip,":").concat(r.port)),r.ip6&&(a.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:r.ip6,port:r.port.toString(),type:"host",extension:{}}),M.debug("Using IPV6 remote candidate from AP ".concat(r.ip6,":").concat(r.port)))):a=n.iceParameters.candidates.map(g=>({foundation:g.foundation,componentId:"1",transport:g.protocol,priority:g.priority.toString(),connectionAddress:g.ip,port:g.port.toString(),type:g.type,extension:{}}));const l={fingerprints:n.dtlsParameters.fingerprints.map(g=>({hashFunction:g.algorithm,fingerprint:g.fingerprint}))},d={iceUfrag:n.iceParameters.iceUfrag,icePwd:n.iceParameters.icePwd};let p;switch(n.dtlsParameters.role){case"server":p="passive";break;case"client":p="active";break;case"auto":p="actpass"}return{dtlsParameters:l,iceParameters:d,candidates:a,rtpCapabilities:rC(n.rtpCapabilities),setup:p,cname:i}}function ta(n,r,i){const a=[],l=[];return n.forEach(d=>{let{ssrcId:p,rtx:g}=d;const E=pn(8,"track-"),C={ssrcId:p,attributes:Vk({label:E,mslabel:i=i||pn(10,""),msid:"".concat(i," ").concat(E)},r&&{cname:r})};if(a.push(C),g!==void 0){const S={ssrcId:g,attributes:Vk({label:E,mslabel:i,msid:"".concat(i," ").concat(E)},r&&{cname:r})};a.push(S),l.push({semantic:"FID",ssrcIds:[p,g]})}}),n.length>1&&l.push({semantic:"SIM",ssrcIds:n.map(d=>{let{ssrcId:p}=d;return p})}),{ssrcs:a,ssrcGroups:l}}function Od(n,r){r instanceof Qr&&n.attributes.payloads.forEach(i=>{var a;const l=(a=i.rtpMap)===null||a===void 0?void 0:a.encodingName.toLowerCase();if(!l||["opus","pcmu","pcma","g722"].indexOf(l)===-1)return;i.fmtp||(i.fmtp={parameters:{}}),i.fmtp.parameters.minptime="10",i.fmtp.parameters.useinbandfec="1";const d=r._encoderConfig;d&&l!=="pcmu"&&l!=="pcma"&&l!=="g722"&&(d.bitrate&&!Dn()&&(i.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*d.bitrate))),d.sampleRate&&(i.fmtp.parameters.maxplaybackrate="".concat(d.sampleRate),i.fmtp.parameters["sprop-maxcapturerate"]="".concat(d.sampleRate)),d.stereo&&(i.fmtp.parameters.stereo="1",i.fmtp.parameters["sprop-stereo"]="1"))})}function tC(n){const r=n.attributes.unrecognized.findIndex(i=>i.attField==="x-google-flag"&&i.attValue==="conference");r!==-1&&n.attributes.unrecognized.splice(r,1)}function nC(n,r){if(!(r instanceof nr&&r._encoderConfig&&r._hints.indexOf(hr.SCREEN_TRACK)===-1))return;const i=r._encoderConfig;Gn().supportMinBitrate&&i.bitrateMin&&n.attributes.payloads.forEach(a=>{var l;["h264","h265","vp8","vp9","av1"].includes(((l=a.rtpMap)===null||l===void 0?void 0:l.encodingName.toLowerCase())||"")&&(a.fmtp||(a.fmtp={parameters:{}}),a.fmtp.parameters["x-google-min-bitrate"]="".concat(i.bitrateMin))}),Gn().supportMinBitrate&&!r._hints.includes(hr.LOW_STREAM)&&i.bitrateMax&&n.attributes.payloads.forEach(a=>{var l;["h264","h265","vp8","vp9","av1"].includes(((l=a.rtpMap)===null||l===void 0?void 0:l.encodingName.toLowerCase())||"")&&(a.fmtp||(a.fmtp={parameters:{}}),a.fmtp.parameters["x-google-start-bitrate"]="".concat(re("X_GOOGLE_START_BITRATE")||Math.floor(i.bitrateMax)))})}function $k(n){if(n.media.mediaType!=="video")return;const r=Ht();if(r.name!==qt.SAFARI&&r.os!==zr.IOS)return;const i=n.attributes.extmaps.findIndex(a=>/video-orientation/g.test(a.extensionName));i!==-1&&n.attributes.extmaps.splice(i,1)}function $0(n,r,i){if(!r)return;let a,l;if(n.media.mediaType==="video"?(a=i.videoExtensions,l=i.videoCodecs):(a=i.audioExtensions,l=i.audioCodecs),r.twcc===!0){const d=a.find(p=>p.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");d&&(n.attributes.extmaps.find(p=>p.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")||n.attributes.extmaps.push({entry:d.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(p,g){return g.filter(E=>!!p.find(C=>C.payloadType===E.payloadType&&!!C.rtcpFeedbacks.find(S=>S.type==="transport-cc")))}(l,n.attributes.payloads).forEach(p=>{p.rtcpFeedbacks.find(g=>g.type==="transport-cc")||p.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(r.twcc===!1){const d=n.attributes.extmaps.findIndex(p=>p.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");d!==-1&&n.attributes.extmaps.splice(d,1),n.attributes.payloads.forEach(p=>{const g=p.rtcpFeedbacks.findIndex(E=>E.type==="transport-cc");g!==-1&&p.rtcpFeedbacks.splice(g,1)})}if(r.remb===!0){const d=a.find(p=>p.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");d&&(n.attributes.extmaps.find(p=>p.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time")||n.attributes.extmaps.push({entry:d.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(p,g){return g.filter(E=>!!p.find(C=>C.payloadType===E.payloadType&&!!C.rtcpFeedbacks.find(S=>S.type==="goog-remb")))}(l,n.attributes.payloads).forEach(p=>{p.rtcpFeedbacks.find(g=>g.type==="goog-remb")||p.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(r.remb===!1){const d=n.attributes.extmaps.findIndex(p=>p.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");d!==-1&&n.attributes.extmaps.splice(d,1),n.attributes.payloads.forEach(p=>{const g=p.rtcpFeedbacks.findIndex(E=>E.type==="goog-remb");g!==-1&&p.rtcpFeedbacks.splice(g,1)})}}function Hk(n,r,i){if(Dn()||n.media.mediaType!=="video"||!(r instanceof nr)||i!=="vp9"&&i!=="vp8"||i==="vp8"&&!re("SIMULCAST")||r._scalabiltyMode===void 0||r._scalabiltyMode.numSpatialLayers<=1)return;const a=i==="vp8"?2:r._scalabiltyMode.numSpatialLayers,l=n.attributes.ssrcs[0],d=n.attributes.ssrcGroups.find(g=>g.semantic==="FID"&&g.ssrcIds[0]===l.ssrcId),p={semantic:"SIM",ssrcIds:[l.ssrcId]};for(let g=1;g<a;g++)n.attributes.ssrcs.push({ssrcId:l.ssrcId+g,attributes:tr(l.attributes)}),p.ssrcIds.push(l.ssrcId+g),d&&(n.attributes.ssrcs.push({ssrcId:d.ssrcIds[1]+g,attributes:tr(l.attributes)}),n.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[l.ssrcId+g,d.ssrcIds[1]+g]}));n.attributes.ssrcGroups.unshift(p)}async function Wk(n,r,i,a,l){const d=new RTCPeerConnection;d.addTransceiver("video",{direction:"sendonly"}),d.addTransceiver("audio",{direction:"sendonly"}),d.addTransceiver("video",{direction:"recvonly"}),d.addTransceiver("audio",{direction:"recvonly"});const p=(await d.createOffer()).sdp,g=eC(p,n,r,i,a,l,"sendonly"),E=eC(p,n,r,i,a,l,"recvonly"),C={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},S={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},R={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(H0(g,E,"videoExtensions",C,S,R),H0(g,E,"videoCodecs",C,S,R),H0(g,E,"audioExtensions",C,S,R),H0(g,E,"audioCodecs",C,S,R),re("RAISE_H264_BASELINE_PRIORITY")){const k=R.videoCodecs.findIndex(F=>{var W,G;return((W=F.rtpMap)===null||W===void 0?void 0:W.encodingName.toLocaleLowerCase())==="h264"&&((G=F.fmtp)===null||G===void 0?void 0:G.parameters["profile-level-id"])==="42001f"});if(k!==-1){const F=R.videoCodecs.findIndex(W=>{var G;return((G=W.rtpMap)===null||G===void 0?void 0:G.encodingName.toLocaleLowerCase())==="h264"});if(F<k){M.debug("raising H264 baseline profile priority");const W=R.videoCodecs[k];R.videoCodecs.splice(k,1),R.videoCodecs.splice(F,0,W)}F!==-1&&(S.videoCodecs=S.videoCodecs.filter(W=>{var G,z;return!(((G=W.rtpMap)===null||G===void 0?void 0:G.encodingName.toLocaleLowerCase())==="h264"&&((z=W.fmtp)===null||z===void 0?void 0:z.parameters["profile-level-id"])!=="42001f")})),F!==-1&&re("FILTER_SEND_H264_BASELINE")&&(C.videoCodecs=C.videoCodecs.filter(W=>{var G,z;return!(((G=W.rtpMap)===null||G===void 0?void 0:G.encodingName.toLocaleLowerCase())==="h264"&&((z=W.fmtp)===null||z===void 0?void 0:z.parameters["profile-level-id"])!=="42001f")}))}}try{d.close()}catch{}return{send:C,recv:S,sendrecv:R}}function H0(n,r,i,a,l,d){if(i==="videoExtensions"||i==="audioExtensions"){const p=[];return n[i].forEach(g=>{r[i].some((E,C)=>{if(g.entry===E.entry&&g.extensionName===E.extensionName)return p.push(C),!0})?d[i].push(g):a[i].push(g)}),void r[i].forEach((g,E)=>{p.indexOf(E)===-1&&l[i].push(g)})}if(i==="videoCodecs"||i==="audioCodecs"){const p=[];return n[i].forEach(g=>{r[i].some((E,C)=>{if(g.payloadType===E.payloadType&&JSON.stringify(g)===JSON.stringify(E))return p.push(C),!0})?d[i].push(g):a[i].push(g)}),void r[i].forEach((g,E)=>{p.indexOf(E)===-1&&l[i].push(g)})}}function rC(n){const{send:r,recv:i,sendrecv:a}=n;if(!a){if(!r||!i)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:r,recv:i}}let l,d;return r?(l={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},l.audioCodecs=[...r.audioCodecs,...a.audioCodecs],l.videoCodecs=[...r.videoCodecs,...a.videoCodecs],l.audioExtensions=[...r.audioExtensions,...a.audioExtensions],l.videoExtensions=[...r.videoExtensions,...a.videoExtensions]):l=a,i?(d={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},d.audioCodecs=[...i.audioCodecs,...a.audioCodecs],d.videoCodecs=[...i.videoCodecs,...a.videoCodecs],d.audioExtensions=[...i.audioExtensions,...a.audioExtensions],d.videoExtensions=[...i.videoExtensions,...a.videoExtensions]):d=a,{send:l,recv:d}}function Xc(n){n.media.mediaType==="audio"&&n.attributes.payloads.filter(r=>{var i;return((i=r.rtpMap)===null||i===void 0?void 0:i.encodingName.toLowerCase())==="opus"}).forEach(r=>{r.fmtp||(r.fmtp={parameters:{}}),r.fmtp.parameters.stereo="1",r.fmtp.parameters["sprop-stereo"]="1"})}function Gk(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function zk(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Gk(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Gk(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}(function(n,r){n.exports=(()=>{var i={8:(d,p,g)=>{g.r(p),g.d(p,{Parser:()=>ln,Printer:()=>Zi,parse:()=>Je,print:()=>Pt});const E=`
`,C="".concat("\r").concat(E),S=" ";let R;function k(Re){return Re>="0"&&Re<="9"}function F(Re){return Re>="!"&&Re<="~"}function W(Re){return F(Re)||Re>=""&&Re<="ÿ"}function G(Re){return Re==="!"||Re>="#"&&Re<="'"||Re>="*"&&Re<="+"||Re>="-"&&Re<="."||Re>="0"&&Re<="9"||Re>="A"&&Re<="Z"||Re>="^"&&Re<="~"}function z(Re){return Re>="1"&&Re<="9"}function oe(Re){return Re>="A"&&Re<="Z"||Re>="a"&&Re<="z"}function ce(Re){return Re==="d"||Re==="h"||Re==="m"||Re==="s"}function ye(Re){return Re>""&&Re<"	"||Re>"\v"&&Re<"\f"||Re>""&&Re<"ÿ"}function Ne(Re){return oe(Re)||k(Re)||Re==="+"||Re==="/"}function Te(Re){return k(Re)||oe(Re)||Re==="+"||Re==="/"||Re==="-"||Re==="_"}function be(Re){return oe(Re)||k(Re)||Re==="+"||Re==="/"}function _e(Re,P){var K=Object.keys(Re);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(Re);P&&(Q=Q.filter(function(me){return Object.getOwnPropertyDescriptor(Re,me).enumerable})),K.push.apply(K,Q)}return K}function Ie(Re){for(var P=1;P<arguments.length;P++){var K=arguments[P]!=null?arguments[P]:{};P%2?_e(Object(K),!0).forEach(function(Q){Bt(Re,Q,K[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Re,Object.getOwnPropertyDescriptors(K)):_e(Object(K)).forEach(function(Q){Object.defineProperty(Re,Q,Object.getOwnPropertyDescriptor(K,Q))})}return Re}function Bt(Re,P,K){return P in Re?Object.defineProperty(Re,P,{value:K,enumerable:!0,configurable:!0,writable:!0}):Re[P]=K,Re}(function(Re){Re.VERSION="v",Re.ORIGIN="o",Re.SESSION_NAME="s",Re.INFORMATION="i",Re.URI="u",Re.EMAIL="e",Re.PHONE="p",Re.CONNECTION="c",Re.BANDWIDTH="b",Re.TIME="t",Re.REPEAT="r",Re.ZONE_ADJUSTMENTS="z",Re.KEY="k",Re.ATTRIBUTE="a",Re.MEDIA="m"})(R||(R={}));class $e{consumeText(P,K){let Q=K;for(;Q<P.length;){const me=P[Q];if(me==="\0"||me==="\r"||me===E)break;Q+=1}if(Q-K==0)throw new Error("Invalid text, at ".concat(P));return Q}consumeUnicastAddress(P,K,Q){return this.consumeTill(P,K,S)}consumeOneOrMore(P,K,Q){let me=K;for(;Q(P[me]);)me++;if(me-K==0)throw new Error("Invalid rule at ".concat(K,"."));return me}consumeSpace(P,K){if(P[K]===S)return K+1;throw new Error("Invalid space at ".concat(K,"."))}consumeIP4Address(P,K){let Q=K;for(let me=0;me<4;me++)if(Q=this.consumeDecimalUChar(P,Q),me!==3){if(P[Q]!==".")throw new Error("Invalid IP4 address.");Q++}return Q}consumeDecimalUChar(P,K){let Q=K;for(let et=0;et<3&&k(P[Q]);et++,Q++);if(Q-K==0)throw new Error("Invalid decimal uchar.");const me=parseInt(P.slice(K,Q));if(me>=0&&me<=255)return Q;throw new Error("Invalid decimal uchar")}consumeIP6Address(P,K){let Q=this.consumeHexpart(P,K);return P[Q]===":"&&(Q+=1,Q=this.consumeIP4Address(P,Q)),Q}consumeHexpart(P,K){let Q=K;if(P[Q]===":"&&P[Q+1]===":"){Q+=2;try{Q=this.consumeHexseq(P,Q)}catch{}return Q}if(Q=this.consumeHexseq(P,Q),P[Q]===":"&&P[Q+1]===":"){Q+=2;try{Q=this.consumeHexseq(P,Q)}catch{}return Q}return Q}consumeHexseq(P,K){let Q=K;for(;Q=this.consumeHex4(P,Q),P[Q]===":"&&P[Q+1]!==":";)Q+=1;return Q}consumeHex4(P,K){let Q=0;for(;Q<4;Q++)if(!((me=P[K+Q])>="0"&&me<="9"||me>="a"&&me<="f"||me>="A"&&me<="F")){if(Q===0)throw new Error("Invalid hex 4");break}var me;return K+Q}consumeFQDN(P,K){let Q=K;for(;k(P[Q])||oe(P[Q])||P[Q]==="-"||P[Q]===".";)Q+=1;if(Q-K<4)throw new Error("Invalid FQDN");return Q}consumeExtnAddr(P,K){return this.consumeOneOrMore(P,K,W)}consumeMulticastAddress(P,K,Q){switch(Q){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(P,K);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(P,K);default:try{return this.consumeFQDN(P,K)}catch{return this.consumeExtnAddr(P,K)}}}consumeIP6MulticastAddress(P,K){const Q=this.consumeHexpart(P,K);return P[Q]==="/"?this.consumeInteger(P,Q+1):Q}consumeIP4MulticastAddress(P,K){let Q=K+3;const me=P.slice(K,Q),et=parseInt(me);if(et<224||et>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let un=0;un<3;un++){if(P[Q]!==".")throw new Error("Invalid IP4 multicast address.");Q+=1,Q=this.consumeDecimalUChar(P,Q)}return P[Q]==="/"&&(Q+=1),Q=this.consumeTTL(P,Q),P[Q]==="/"&&(Q=this.consumeInteger(P,Q)),Q}consumeInteger(P,K){if(!z(P[K]))throw new Error("Invalid integer.");for(K+=1;k(P[K]);)K+=1;return K}consumeTTL(P,K){if(P[K]==="0")return K+1;if(!z(P[K]))throw new Error("Invalid TTL.");K+=1;for(let Q=0;Q<2&&k(P[K]);Q++)K+=1;return K}consumeToken(P,K){return this.consumeOneOrMore(P,K,G)}consumeTime(P,K){let Q=K;if(P[Q]==="0")return Q+1;for(z(P[Q])&&(Q+=1);k(P[Q]);)Q++;if(Q-K<10)throw new Error("Invalid time");return Q}consumeAddress(P,K){return this.consumeTill(P,K,S)}consumeTypedTime(P,K){let Q=K;return Q=this.consumeOneOrMore(P,Q,k),ce(P[Q])?Q+1:Q}consumeRepeatInterval(P,K){if(!z(P[K]))throw new Error("Invalid repeat interval");for(K+=1;k(P[K]);)K+=1;return ce(P[K])&&(K+=1),K}consumePort(P,K){return this.consumeOneOrMore(P,K,k)}consume(P,K,Q){for(let me=0;me<Q.length;me++){if(K+me>=P.length)throw new Error("consume exceeding value length");if(P[K+me]!==Q[me])throw new Error("consume ".concat(Q," failed at ").concat(me))}return K+Q.length}consumeTill(P,K,Q){let me=K;for(;me<P.length&&(typeof Q!="string"||P[me]!==Q)&&(typeof Q!="function"||!Q(P[me]));)me++;return me}}class ln extends $e{constructor(){super(),Bt(this,"records",[]),Bt(this,"currentLine",0)}parse(P){const K=this.probeEOL(P);this.records=P.split(K).filter(Li=>!!Li.trim()).map(this.parseLine),this.currentLine=0;const Q=this.parseVersion(),me=this.parseOrigin(),et=this.parseSessionName(),un=this.parseInformation(),jr=this.parseUri(),Pa=this.parseEmail(),nl=this.parsePhone(),oa=this.parseConnection(),rl=this.parseBandWidth(),kd=this.parseTimeFields(),Un=this.parseKey(),ir=this.parseSessionAttribute(),on=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:Q,origin:me,sessionName:et,information:un,uri:jr,emails:Pa,phones:nl,connection:oa,bandwidths:rl,timeFields:kd,key:Un,attributes:ir,mediaDescriptions:on}}getCurrentRecord(){const P=this.records[this.currentLine];if(!P)throw new Error("Record doesn't exit.");return P}probeEOL(P){for(let K=0;K<P.length;K++)if(P[K]===E)return P[K-1]==="\r"?C:E;throw new Error("Invalid newline character.")}parseLine(P,K){if(P.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const Q=P[0];if(P[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:Q,value:P.slice(2),line:K,cur:0}}parseSessionAttribute(){const P=new Kn;for(;this.currentLine<this.records.length;){const K=this.getCurrentRecord();if(K.type!==R.ATTRIBUTE)break;const Q={attField:this.extractOneOrMore(K,me=>G(me)&&me!==":"),_cur:0};K.value[K.cur]===":"&&(K.cur+=1,Q.attValue=this.extractOneOrMore(K,ye)),P.parse(Q),this.currentLine++}return P.digest()}parseMediaAttributes(P){const K=new Vr(P);for(;this.currentLine<this.records.length;){const Q=this.getCurrentRecord();if(Q.type!==R.ATTRIBUTE)break;const me={attField:this.extractOneOrMore(Q,et=>G(et)&&et!==":"),_cur:0};Q.value[Q.cur]===":"&&(Q.cur+=1,me.attValue=this.extractOneOrMore(Q,ye)),K.parse(me),this.currentLine++}return K.digest()}parseKey(){const P=this.getCurrentRecord();if(P.type===R.KEY){if(P.value==="prompt"||P.value==="clear:"||P.value==="base64:"||P.value==="uri:")return P.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const P=this.getCurrentRecord();if(P.type===R.ZONE_ADJUSTMENTS){const K=[];for(;;)try{const Q=this.extract(P,this.consumeTime);this.consumeSpaceForRecord(P);let me=!1;P.value[P.cur]==="-"&&(me=!0,P.cur+=1);const et=this.extract(P,this.consumeTypedTime);K.push({time:Q,typedTime:et,back:me})}catch{break}if(K.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,K}return[]}parseRepeat(){const P=[];for(;;){const K=this.getCurrentRecord();if(K.type!==R.REPEAT)break;{const Q=this.extract(K,this.consumeRepeatInterval),me=this.parseTypedTime(K);P.push({repeatInterval:Q,typedTimes:me}),this.currentLine++}}return P}parseTypedTime(P){const K=[];for(;;)try{this.consumeSpaceForRecord(P),K.push(this.extract(P,this.consumeTypedTime))}catch{break}if(K.length===0)throw new Error("Invalid typed time.");return K}parseTime(){const P=this.getCurrentRecord(),K=this.extract(P,this.consumeTime);this.consumeSpaceForRecord(P);const Q=this.extract(P,this.consumeTime);return this.currentLine++,{startTime:K,stopTime:Q}}parseBandWidth(){const P=[];for(;this.currentLine<this.records.length;){const K=this.getCurrentRecord();if(K.type!==R.BANDWIDTH)break;{const Q=this.extractOneOrMore(K,G);if(K.value[K.cur]!==":")throw new Error("Invalid bandwidth field.");K.cur++;const me=this.extractOneOrMore(K,k);P.push({bwtype:Q,bandwidth:me}),this.currentLine++}}return P}parseVersion(){const P=this.getCurrentRecord();if(P.type!==R.VERSION)throw new Error("first sdp record must be version");const K=P.value.slice(0,this.consumeOneOrMore(P.value,0,k));if(K.length!==P.value.length)throw new Error('invalid proto version, "v='.concat(P.value,'"'));return this.currentLine++,K}parseOrigin(){const P=this.getCurrentRecord();if(P.type!==R.ORIGIN)throw new Error("second line of sdp must be origin");const K=this.extractOneOrMore(P,W);this.consumeSpaceForRecord(P);const Q=this.extractOneOrMore(P,k);this.consumeSpaceForRecord(P);const me=this.extractOneOrMore(P,k);this.consumeSpaceForRecord(P);const et=this.extractOneOrMore(P,G);this.consumeSpaceForRecord(P);const un=this.extractOneOrMore(P,G);this.consumeSpaceForRecord(P);const jr=this.extract(P,this.consumeUnicastAddress);return this.currentLine++,{username:K,sessId:Q,sessVersion:me,nettype:et,addrtype:un,unicastAddress:jr}}parseSessionName(){const P=this.getCurrentRecord();if(P.type===R.SESSION_NAME){const K=this.extract(P,this.consumeText);return this.currentLine++,K}}parseInformation(){const P=this.getCurrentRecord();if(P.type!==R.INFORMATION)return;const K=this.extract(P,this.consumeText);return this.currentLine++,K}parseUri(){const P=this.getCurrentRecord();if(P.type===R.URI)return this.currentLine++,P.value}parseEmail(){const P=[];for(;;){const K=this.getCurrentRecord();if(K.type!==R.EMAIL)break;P.push(K.value),this.currentLine++}return P}parsePhone(){const P=[];for(;;){const K=this.getCurrentRecord();if(K.type!==R.PHONE)break;P.push(K.value),this.currentLine++}return P}parseConnection(){const P=this.getCurrentRecord();if(P.type===R.CONNECTION){const K=this.extractOneOrMore(P,G);this.consumeSpaceForRecord(P);const Q=this.extractOneOrMore(P,G);this.consumeSpaceForRecord(P);const me=this.extract(P,this.consumeAddress);return this.currentLine++,{nettype:K,addrtype:Q,address:me}}}parseMedia(){const P=this.getCurrentRecord(),K=this.extract(P,this.consumeToken);this.consumeSpaceForRecord(P);let Q=this.extract(P,this.consumePort);P.value[P.cur]==="/"&&(P.cur+=1,Q+=this.extract(P,this.consumeInteger)),this.consumeSpaceForRecord(P);const me=[];for(me.push(this.extract(P,this.consumeToken));P.value[P.cur]==="/";)P.cur+=1,me.push(this.extract(P,this.consumeToken));if(me.length===0)throw new Error("Invalid proto");const et=this.parseFmt(P);return this.currentLine++,{mediaType:K,port:Q,protos:me,fmts:et}}parseTimeFields(){const P=[];for(;this.getCurrentRecord().type===R.TIME;){const K=this.parseTime(),Q=this.parseRepeat(),me=this.parseZone();P.push({time:K,repeats:Q,zones:me})}return P}parseMediaDescription(){const P=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===R.MEDIA;){const K=this.parseMedia(),Q=this.parseInformation(),me=this.parseConnections(),et=this.parseBandWidth(),un=this.parseKey(),jr=this.parseMediaAttributes(K);P.push({media:K,information:Q,connections:me,bandwidths:et,key:un,attributes:jr})}return P}parseConnections(){const P=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===R.CONNECTION;)P.push(this.parseConnection());return P}parseFmt(P){const K=[];for(;;)try{this.consumeSpaceForRecord(P),K.push(this.extract(P,this.consumeToken))}catch{break}if(K.length===0)throw new Error("Invalid fmts");return K}extract(P,K,...Q){const me=K.call(this,P.value,P.cur,...Q),et=P.value.slice(P.cur,me);return P.cur=me,et}extractOneOrMore(P,K){const Q=this.consumeOneOrMore(P.value,P.cur,K),me=P.value.slice(P.cur,Q);return P.cur=Q,me}consumeSpaceForRecord(P){if(P.value[P.cur]!==S)throw new Error("Invalid space at ".concat(P.cur,"."));P.cur+=1}}class en extends $e{constructor(...P){super(...P),Bt(this,"attributes",void 0),Bt(this,"digested",!1)}extractOneOrMore(P,K,Q){const me=this.consumeOneOrMore(P.attValue,P._cur,K),et=P.attValue.slice(P._cur,me),[un,jr]=Q||[];if(typeof un=="number"&&et.length<un)throw new Error("error in length, should be more or equal than ".concat(un," characters."));if(typeof jr=="number"&&et.length>jr)throw new Error("error in length, should be less or equal than ".concat(jr," characters."));return P._cur=me,et}consumeAttributeSpace(P){if(P.attValue[P._cur]!==S)throw new Error("Invalid space at ".concat(P._cur,"."));P._cur+=1}extract(P,K,...Q){if(!P.attValue)throw new Error("Nothing to extract from attValue.");const me=K.call(this,P.attValue,P._cur,...Q),et=P.attValue.slice(P._cur,me);return P._cur=me,et}atEnd(P){if(!P.attValue)throw new Error;return P._cur>=P.attValue.length}peekChar(P){if(!P.attValue)throw new Error;return P.attValue[P._cur]}peek(P,K){if(!P.attValue)throw new Error;for(let Q=0;Q<K.length;Q++)if(K[Q]!==P.attValue[P._cur+Q])return!1;return!0}parseIceUfrag(P){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(P,Ne,[4,256])}parseIcePwd(P){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(P,Ne,[22,256])}parseIceOptions(P){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const K=[];for(;!this.atEnd(P);){K.push(this.extractOneOrMore(P,Ne));try{this.consumeAttributeSpace(P)}catch(Q){if(this.atEnd(P))break;throw Q}}this.attributes.iceOptions=K}parseFingerprint(P){const K=this.extract(P,this.consumeToken);this.consumeAttributeSpace(P);const Q=this.extract(P,this.consumeTill);this.attributes.fingerprints.push({hashFunction:K,fingerprint:Q})}parseExtmap(P){const K=this.extractOneOrMore(P,k);let Q;this.peekChar(P)==="/"&&(this.extract(P,this.consume,"/"),Q=this.extract(P,this.consumeToken)),this.consumeAttributeSpace(P);const me=this.extract(P,this.consumeTill,S),et=Ie(Ie({entry:parseInt(K,10)},Q&&{direction:Q}),{},{extensionName:me});this.peekChar(P)===S&&(this.consumeAttributeSpace(P),et.extensionAttributes=this.extract(P,this.consumeTill)),this.attributes.extmaps.push(et)}parseSetup(P){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const K=this.extract(P,this.consumeTill);if(K!=="active"&&K!=="passive"&&K!=="actpass"&&K!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=K}}class Kn extends en{constructor(...P){super(...P),Bt(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(P){if(this.digested)throw new Error("already digested");try{switch(P.attField){case"group":this.parseGroup(P);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(P);break;case"ice-pwd":this.parseIcePwd(P);break;case"ice-options":this.parseIceOptions(P);break;case"fingerprint":this.parseFingerprint(P);break;case"setup":this.parseSetup(P);break;case"tls-id":this.parseTlsId(P);break;case"identity":this.parseIdentity(P);break;case"extmap":this.parseExtmap(P);break;case"msid-semantic":this.parseMsidSemantic(P);break;default:P.ignored=!0,this.attributes.unrecognized.push(P)}}catch(K){throw console.error("parsing session attribute ".concat(P.attField,' error, "a=').concat(P.attField,":").concat(P.attValue,'"')),K}if(!P.ignored&&P.attValue&&!this.atEnd(P))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(P){const K=this.extract(P,this.consumeToken),Q=[];for(;!this.atEnd(P)&&this.peekChar(P)===S;)this.consumeAttributeSpace(P),Q.push(this.extract(P,this.consumeToken));this.attributes.groups.push({semantic:K,identificationTag:Q})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(P){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(P,Te)}parseIdentity(P){const K=this.extractOneOrMore(P,be),Q=[];for(;!this.atEnd(P)&&this.peekChar(P)===S;){this.consumeAttributeSpace(P);const me=this.extract(P,this.consumeToken);this.extract(P,this.consume,"=");const et=this.extractOneOrMore(P,un=>un!==S&&ye(un));Q.push({name:me,value:et})}this.attributes.identities.push({assertionValue:K,extensions:Q})}parseMsidSemantic(P){this.peekChar(P)===S&&this.consumeAttributeSpace(P);const K={semantic:this.extract(P,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(P)}catch{break}if(this.peekChar(P)==="*"){this.extract(P,this.consume,"*"),K.applyForAll=!0;break}{const Q=this.extract(P,this.consumeTill,S);K.identifierList.push(Q)}}this.attributes.msidSemantic=K}}class Vr extends en{constructor(P){super(),Bt(this,"attributes",void 0),P.protos.indexOf("RTP")!==-1||P.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(P){if(this.digested)throw new Error("already digested");try{switch(P.attField){case"extmap":this.parseExtmap(P);break;case"setup":this.parseSetup(P);break;case"ice-ufrag":this.parseIceUfrag(P);break;case"ice-pwd":this.parseIcePwd(P);break;case"ice-options":this.parseIceOptions(P);break;case"candidate":this.parseCandidate(P);break;case"remote-candidate":this.parseRemoteCandidate(P);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(P);break;case"rtpmap":this.parseRtpmap(P);break;case"ptime":this.parsePtime(P);break;case"maxptime":this.parseMaxPtime(P);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(P);break;case"ssrc":this.parseSSRC(P);break;case"fmtp":this.parseFmtp(P);break;case"rtcp-fb":this.parseRtcpFb(P);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(P);break;case"mid":this.parseMid(P);break;case"msid":this.parseMsid(P);break;case"imageattr":this.parseImageAttr(P);break;case"rid":this.parseRid(P);break;case"simulcast":this.parseSimulcast(P);break;case"sctp-port":this.parseSctpPort(P);break;case"max-message-size":this.parseMaxMessageSize(P);break;case"ssrc-group":this.parseSSRCGroup(P);break;default:P.ignored=!0,this.attributes.unrecognized.push(P)}}catch(K){throw console.error("parsing media attribute ".concat(P.attField,' error, "a=').concat(P.attField,":").concat(P.attValue,'"')),K}if(!P.ignored&&P.attValue&&!this.atEnd(P))throw new Error("attribute parsing error")}parseCandidate(P){const K=this.extractOneOrMore(P,Ne,[1,32]);this.consumeAttributeSpace(P);const Q=this.extractOneOrMore(P,k,[1,5]);this.consumeAttributeSpace(P);const me=this.extract(P,this.consumeToken);this.consumeAttributeSpace(P);const et=this.extractOneOrMore(P,k,[1,10]);this.consumeAttributeSpace(P);const un=this.extract(P,this.consumeAddress);this.consumeAttributeSpace(P);const jr=this.extract(P,this.consumePort);this.consumeAttributeSpace(P),this.extract(P,this.consume,"typ"),this.consumeAttributeSpace(P);const Pa={foundation:K,componentId:Q,transport:me,priority:et,connectionAddress:un,port:jr,type:this.extract(P,this.consumeToken),extension:{}};for(this.peek(P," raddr")&&(this.extract(P,this.consume," raddr"),this.consumeAttributeSpace(P),Pa.relAddr=this.extract(P,this.consumeAddress)),this.peek(P," rport")&&(this.extract(P,this.consume," rport"),this.consumeAttributeSpace(P),Pa.relPort=this.extract(P,this.consumePort));this.peekChar(P)===S;){this.consumeAttributeSpace(P);const nl=this.extract(P,this.consumeToken);this.consumeAttributeSpace(P),Pa.extension[nl]=this.extractOneOrMore(P,F)}this.attributes.candidates.push(Pa)}parseRemoteCandidate(P){const K=[];for(;;){const Q=this.extractOneOrMore(P,k,[1,5]);this.consumeAttributeSpace(P);const me=this.extract(P,this.consumeAddress);this.consumeAttributeSpace(P);const et=this.extract(P,this.consumePort);K.push({componentId:Q,connectionAddress:me,port:et});try{this.consumeAttributeSpace(P)}catch{break}}this.attributes.remoteCandidatesList.push(K)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(P){const K=this.extract(P,this.consumeToken);this.consumeAttributeSpace(P);const Q=this.extract(P,this.consumeTill,"/");this.extract(P,this.consume,"/");const me={encodingName:Q,clockRate:this.extractOneOrMore(P,k)};this.atEnd(P)||this.peekChar(P)!=="/"||(this.extract(P,this.consume,"/"),me.encodingParameters=parseInt(this.extract(P,this.consumeTill),10));const et=this.attributes.payloads.find(un=>un.payloadType===parseInt(K,10));et?et.rtpMap=me:this.attributes.payloads.push({payloadType:parseInt(K,10),rtpMap:me,rtcpFeedbacks:[]})}parsePtime(P){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(P,this.consumeTill)}parseMaxPtime(P){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(P,this.consumeTill)}parseDirection(P){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=P.attField}parseSSRC(P){const K=this.extractOneOrMore(P,k);this.consumeAttributeSpace(P);const Q=this.extract(P,this.consumeTill,":");let me;this.peekChar(P)===":"&&(this.extract(P,this.consume,":"),me=this.extract(P,this.consumeTill));const et=this.attributes.ssrcs.find(un=>un.ssrcId===parseInt(K,10));et?et.attributes[Q]=me:this.attributes.ssrcs.push({ssrcId:parseInt(K,10),attributes:{[Q]:me}})}parseFmtp(P){const K=this.extract(P,this.consumeTill,S);this.consumeAttributeSpace(P);const Q=this.extract(P,this.consumeTill),me={};Q.split(";").forEach(un=>{let[jr,Pa]=un.split("=");jr=jr.trim();const nl=typeof Pa=="string"?Pa.trim():null;typeof jr=="string"&&jr.length>0&&(me[jr]=nl)});const et=this.attributes.payloads.find(un=>un.payloadType===parseInt(K,10));et?et.fmtp={parameters:me}:this.attributes.payloads.push({payloadType:parseInt(K,10),rtcpFeedbacks:[],fmtp:{parameters:me}})}parseFmtParameters(P){const K={},Q=this.extract(P,this.consumeTill,"=");P._cur++;const me=this.extract(P,this.consumeTill,";");for(K[Q]=me;P.attValue[P._cur]===";";){const et=this.extract(P,this.consumeTill,"=");P._cur++;const un=this.extract(P,this.consumeTill,";");K[et]=un}return K}parseRtcpFb(P){let K="";K=this.peekChar(P)==="*"?this.extract(P,this.consume,"*"):this.extract(P,this.consumeTill,S),this.consumeAttributeSpace(P);const Q=this.extract(P,this.consumeTill,S);let me;switch(Q){case"trr-int":me={type:Q,interval:this.extract(P,this.consumeTill)};break;case"ack":case"nack":default:{const et={type:Q};this.peekChar(P)===S&&(this.consumeAttributeSpace(P),et.parameter=this.extract(P,this.consumeToken),this.peekChar(P)===S&&(et.additional=this.extract(P,this.consumeTill))),me=et}}if(K==="*")this.attributes.rtcpFeedbackWildcards.push(me);else{const et=this.attributes.payloads.find(un=>un.payloadType===parseInt(K,10));et?et.rtcpFeedbacks.push(me):this.attributes.payloads.push({payloadType:parseInt(K,10),rtcpFeedbacks:[me]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(P){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const K={port:this.extract(P,this.consumePort)};this.peekChar(P)===S&&(this.consumeAttributeSpace(P),K.netType=this.extractOneOrMore(P,G),this.consumeAttributeSpace(P),K.addressType=this.extractOneOrMore(P,G),this.consumeAttributeSpace(P),K.address=this.extract(P,this.consumeAddress)),this.attributes.rtcp=K}parseMsid(P){const K={id:this.extractOneOrMore(P,G,[1,64])};this.peekChar(P)===S&&(this.consumeAttributeSpace(P),K.appdata=this.extractOneOrMore(P,G,[1,64])),this.attributes.msids.push(K)}parseImageAttr(P){this.attributes.imageattr.push(P.attValue)}parseRid(P){const K=this.extractOneOrMore(P,me=>oe(me)||k(me)||me==="_"||me==="-");this.consumeAttributeSpace(P);const Q={id:K,direction:this.extract(P,this.consumeToken),params:[]};if(this.peekChar(P)===S){if(this.consumeAttributeSpace(P),this.peek(P,"pt=")){this.extract(P,this.consume,"pt=");const me=[];for(;;){const et=this.extract(P,this.consumeToken);me.push(et);try{this.extract(P,this.consume,",")}catch{break}}Q.payloads=me,this.peekChar(P)===S&&this.extract(P,this.consume,S)}for(;;){const me=this.extract(P,this.consumeToken);switch(me){case"depend":{const et={type:me,rids:this.extract(P,this.consume,"=").split(",")};Q.params.push(et);break}case"max-width":case"height-width":case"max-fps":case"max-fs":case"max-br":case"max-pps":case"max-bpp":default:{const et={type:me};this.peekChar(P)==="="&&(this.extract(P,this.consume,"="),et.val=this.extract(P,this.consumeTill,";")),Q.params.push(et)}}try{this.extract(P,this.consume,";")}catch{break}}}this.attributes.rids.push(Q)}parseSimulcast(P){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=P.attValue,this.extract(P,this.consumeTill)}parseSctpPort(P){this.attributes.sctpPort=this.extractOneOrMore(P,k,[1,5])}parseMaxMessageSize(P){this.attributes.maxMessageSize=this.extractOneOrMore(P,k,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(P){this.attributes.mid=this.extract(P,this.consumeToken)}parseSSRCGroup(P){const K=this.extract(P,this.consumeToken),Q=[];for(;;)try{this.consumeAttributeSpace(P);const me=this.extract(P,this.consumeInteger);Q.push(parseInt(me,10))}catch{break}this.attributes.ssrcGroups.push({semantic:K,ssrcIds:Q})}}function Bn(Re,P,K){return P in Re?Object.defineProperty(Re,P,{value:K,enumerable:!0,configurable:!0,writable:!0}):Re[P]=K,Re}class Zi{constructor(){Bn(this,"eol",C)}print(P,K){let Q="";return K&&(this.eol=K),Q+=this.printVersion(P.version),Q+=this.printOrigin(P.origin),Q+=this.printSessionName(P.sessionName),Q+=this.printInformation(P.information),Q+=this.printUri(P.uri),Q+=this.printEmail(P.emails),Q+=this.printPhone(P.phones),Q+=this.printConnection(P.connection),Q+=this.printBandwidth(P.bandwidths),Q+=this.printTimeFields(P.timeFields),Q+=this.printKey(P.key),Q+=this.printSessionAttributes(P.attributes),Q+=this.printMediaDescription(P.mediaDescriptions),Q}printVersion(P){return"v=".concat(P).concat(this.eol)}printOrigin(P){return"o=".concat(P.username," ").concat(P.sessId," ").concat(P.sessVersion," ").concat(P.nettype," ").concat(P.addrtype," ").concat(P.unicastAddress).concat(this.eol)}printSessionName(P){return P?"s=".concat(P).concat(this.eol):""}printInformation(P){return P?"i=".concat(P).concat(this.eol):""}printUri(P){return P?"u=".concat(P).concat(this.eol):""}printEmail(P){let K="";for(const Q of P)K+="e=".concat(Q).concat(this.eol);return K}printPhone(P){let K="";for(const Q of P)K+="e=".concat(Q).concat(this.eol);return K}printConnection(P){return P?"c=".concat(P.nettype," ").concat(P.addrtype," ").concat(P.address).concat(this.eol):""}printBandwidth(P){let K="";for(const Q of P)K+="b=".concat(Q.bwtype,":").concat(Q.bandwidth).concat(this.eol);return K}printTimeFields(P){let K="";for(const Q of P){K+="t=".concat(Q.time.startTime," ").concat(Q.time.startTime).concat(this.eol);for(const me of Q.repeats)K+="r=".concat(me.repeatInterval," ").concat(me.typedTimes.join(" ")).concat(this.eol);Q.zoneAdjustments&&(K+="z=",K+="z=".concat(Q.zoneAdjustments.map(me=>"".concat(me.time," ").concat(me.back?"-":""," ").concat(me.typedTime)).join(" ")).concat(this.eol),K+=this.eol)}return K}printKey(P){return P?"k=".concat(P).concat(this.eol):""}printAttributes(P){let K="";for(const Q of P)K+="a=".concat(Q.attField).concat(Q.attValue?":".concat(Q.attValue):"").concat(this.eol);return K}printMediaDescription(P){let K="";for(const Q of P)K+=this.printMedia(Q.media),K+=this.printInformation(Q.information),K+=this.printConnections(Q.connections),K+=this.printBandwidth(Q.bandwidths),K+=this.printKey(Q.key),K+=this.printMediaAttributes(Q);return K}printConnections(P){let K="";for(const Q of P)K+=this.printConnection(Q);return K}printMedia(P){return"m=".concat(P.mediaType," ").concat(P.port," ").concat(P.protos.join("/")," ").concat(P.fmts.join(" ")).concat(this.eol)}printSessionAttributes(P){return new Ce(this.eol).print(P)}printMediaAttributes(P){return new Oe(this.eol).print(P)}}class fe{constructor(P){Bn(this,"eol",void 0),this.eol=P}printIceUfrag(P){return P===void 0?"":"a=ice-ufrag:".concat(P).concat(this.eol)}printIcePwd(P){return P===void 0?"":"a=ice-pwd:".concat(P).concat(this.eol)}printIceOptions(P){return P===void 0?"":"a=ice-options:".concat(P.join(S)).concat(this.eol)}printFingerprints(P){return P.length>0?P.map(K=>"a=fingerprint:".concat(K.hashFunction).concat(S).concat(K.fingerprint)).join(this.eol)+this.eol:""}printExtmap(P){return P.map(K=>"a=extmap:".concat(K.entry).concat(K.direction?"/".concat(K.direction):"").concat(S).concat(K.extensionName).concat(K.extensionAttributes?"".concat(S).concat(K.extensionAttributes):"").concat(this.eol)).join("")}printSetup(P){return P===void 0?"":"a=setup:".concat(P).concat(this.eol)}printUnrecognized(P){return P.map(K=>"a=".concat(K.attField).concat(K.attValue?":".concat(K.attValue):"").concat(this.eol)).join("")}}class Ce extends fe{print(P){let K="";return K+=this.printGroups(P.groups),K+=this.printMsidSemantic(P.msidSemantic),K+=this.printIceLite(P.iceLite),K+=this.printIceUfrag(P.iceUfrag),K+=this.printIcePwd(P.icePwd),K+=this.printIceOptions(P.iceOptions),K+=this.printFingerprints(P.fingerprints),K+=this.printSetup(P.setup),K+=this.printTlsId(P.tlsId),K+=this.printIdentity(P.identities),K+=this.printExtmap(P.extmaps),K+=this.printUnrecognized(P.unrecognized),K}printGroups(P){let K="";return P.length>0&&(K+=P.map(Q=>"a=group:".concat(Q.semantic).concat(Q.identificationTag.map(me=>"".concat(S).concat(me)).join("")).concat(this.eol)).join("")),K}printIceLite(P){return P===void 0?"":"a=ice-lite"+this.eol}printTlsId(P){return P?"a=tls-id:".concat(P).concat(this.eol):""}printIdentity(P){return P.length===0?"":P.map(K=>"a=identity:".concat(K.assertionValue).concat(K.extensions.map(Q=>"".concat(S).concat(Q.name).concat(Q.value?"=".concat(Q.value):"")))).join(this.eol)+this.eol}printMsidSemantic(P){if(!P)return"";let K="a=msid-semantic:".concat(P.semantic);return P.applyForAll?K+="".concat(S,"*"):P.identifierList.length>0&&(K+=P.identifierList.map(Q=>"".concat(S).concat(Q))),K+this.eol}}class Oe extends fe{print(P){const K=P.attributes;let Q="";return Q+=this.printRTCP(K.rtcp),Q+=this.printIceUfrag(K.iceUfrag),Q+=this.printIcePwd(K.icePwd),Q+=this.printIceOptions(K.iceOptions),Q+=this.printCandidates(K.candidates),Q+=this.printRemoteCandidatesList(K.remoteCandidatesList),Q+=this.printEndOfCandidates(K.endOfCandidates),Q+=this.printFingerprints(K.fingerprints),Q+=this.printSetup(K.setup),Q+=this.printMid(K.mid),Q+=this.printExtmap(K.extmaps),Q+=this.printRTPRelated(K),Q+=this.printPtime(K.ptime),Q+=this.printMaxPtime(K.maxPtime),Q+=this.printDirection(K.direction),Q+=this.printSSRCGroups(K.ssrcGroups),Q+=this.printSSRC(K.ssrcs),Q+=this.printRTCPMux(K.rtcpMux),Q+=this.printRTCPMuxOnly(K.rtcpMuxOnly),Q+=this.printRTCPRsize(K.rtcpRsize),Q+=this.printMSId(K.msids),Q+=this.printImageattr(K.imageattr),Q+=this.printRid(K.rids),Q+=this.printSimulcast(K.simulcast),Q+=this.printSCTPPort(K.sctpPort),Q+=this.printMaxMessageSize(K.maxMessageSize),Q+=this.printUnrecognized(K.unrecognized),Q}printCandidates(P){return P.map(K=>"a=candidate:".concat(K.foundation).concat(S).concat(K.componentId).concat(S).concat(K.transport).concat(S).concat(K.priority).concat(S).concat(K.connectionAddress).concat(S).concat(K.port).concat(S,"typ").concat(S).concat(K.type).concat(K.relAddr?"".concat(S,"raddr").concat(S).concat(K.relAddr):"").concat(K.relPort?"".concat(S,"rport").concat(S).concat(K.relPort):"").concat(Object.keys(K.extension).map(Q=>"".concat(S).concat(Q).concat(S).concat(K.extension[Q])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(P){return P.map(K=>"a=remote-candidates:".concat(K.join(S)).concat(this.eol)).join("")}printEndOfCandidates(P){return P===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(P){if(!P.payloads)return"";const K=P.payloads;let Q="";Q+=P.rtcpFeedbackWildcards.map(me=>this.printRTCPFeedback("*",me)).join("");for(const me of K)Q+=this.printRtpMap(me.payloadType,me.rtpMap),Q+=this.printFmtp(me.payloadType,me.fmtp),Q+=me.rtcpFeedbacks.map(et=>this.printRTCPFeedback(me.payloadType,et)).join("");return Q}printFmtp(P,K){if(!K)return"";const Q=Object.keys(K.parameters);return Q.length===1&&K.parameters[Q[0]]===null?"a=fmtp:".concat(P).concat(S).concat(Q[0]).concat(this.eol):"a=fmtp:".concat(P).concat(S).concat(Object.keys(K.parameters).map(me=>"".concat(me,"=").concat(K.parameters[me])).join(";")).concat(this.eol)}printRtpMap(P,K){return K?"a=rtpmap:".concat(P).concat(S).concat(K.encodingName,"/").concat(K.clockRate).concat(K.encodingParameters?"/".concat(K.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(P,K){let Q="a=rtcp-fb:".concat(P).concat(S),me=K;switch(me.type){case"trr-int":Q+="ttr-int".concat(S).concat(me.interval);break;case"ack":case"nack":default:me=me,Q+="".concat(me.type),me.parameter&&(Q+="".concat(S).concat(me.parameter),me.additional&&(Q+="".concat(S).concat(me.additional)))}return Q+this.eol}printPtime(P){return P===void 0?"":"a=ptime:".concat(P).concat(this.eol)}printMaxPtime(P){return P===void 0?"":"a=maxptime:".concat(P).concat(this.eol)}printDirection(P){return P===void 0?"":"a=".concat(P).concat(this.eol)}printSSRC(P){return P.map(K=>Object.keys(K.attributes).map(Q=>"a=ssrc:".concat(K.ssrcId.toString(10)).concat(S).concat(Q).concat(K.attributes[Q]?":".concat(K.attributes[Q]):"").concat(this.eol)).join("")).join("")}printRTCPMux(P){return P===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(P){return P===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(P){return P===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(P){if(P===void 0)return"";let K="a=rtcp:".concat(P.port);return P.netType&&(K+="".concat(S).concat(P.netType)),P.addressType&&(K+="".concat(S).concat(P.addressType)),P.address&&(K+="".concat(S).concat(P.address)),K+this.eol}printMSId(P){return P.map(K=>"a=msid:".concat(K.id).concat(K.appdata?"".concat(S).concat(K.appdata):"").concat(this.eol)).join("")}printImageattr(P){return P.map(K=>"a=imageattr:".concat(K).concat(this.eol)).join("")}printRid(P){return P.map(K=>{let Q="a=rid:".concat(K.id).concat(S).concat(K.direction);return K.payloads&&(Q+="".concat(S,"pt=").concat(K.payloads.join(","))),K.params.length>0&&(Q+="".concat(S).concat(K.params.map(me=>me.type==="depend"?"depend=".concat(me.rids.join(",")):"".concat(me.type,"=").concat(me.val)).join(";"))),Q+this.eol}).join("")}printSimulcast(P){return P===void 0?"":"a=simulcast:".concat(P).concat(this.eol)}printSCTPPort(P){return P===void 0?"":"a=sctp-port:".concat(P).concat(this.eol)}printMaxMessageSize(P){return P===void 0?"":"a=max-message-size:".concat(P).concat(this.eol)}printMid(P){return P===void 0?"":"a=mid:".concat(P).concat(this.eol)}printSSRCGroups(P){return P.map(K=>"a=ssrc-group:".concat(K.semantic).concat(K.ssrcIds.map(Q=>"".concat(S).concat(Q.toString(10))).join("")).concat(this.eol)).join("")}}function Je(Re){return new ln().parse(Re)}function Pt(Re,P){return new Zi().print(Re,P)}}},a={};function l(d){if(a[d])return a[d].exports;var p=a[d]={exports:{}};return i[d](p,p.exports,l),p.exports}return l.d=(d,p)=>{for(var g in p)l.o(p,g)&&!l.o(d,g)&&Object.defineProperty(d,g,{enumerable:!0,get:p[g]})},l.o=(d,p)=>Object.prototype.hasOwnProperty.call(d,p),l.r=d=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},l(8)})()})(rr);class MY{constructor(r){w(this,"sessionDesc",void 0),w(this,"localCapabilities",void 0),w(this,"rtpCapabilities",void 0),w(this,"candidates",void 0),w(this,"iceParameters",void 0),w(this,"dtlsParameters",void 0),w(this,"setup",void 0),w(this,"currentMidIndex",void 0),w(this,"cname",void 0),r=tr(r);const{remoteIceParameters:i,remoteDtlsParameters:a,candidates:l,remoteRTPCapabilities:d,remoteSetup:p,localCapabilities:g,sdkCodec:E,cname:C}=r,S=rr.exports.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=d,this.candidates=l,this.iceParameters=i,this.dtlsParameters=a,this.setup=p,this.localCapabilities=g,this.cname=C;for(let R=0;R<S.mediaDescriptions.length;R++){const k=S.mediaDescriptions[R];k.attributes.iceUfrag=i.iceUfrag,k.attributes.icePwd=i.icePwd,k.attributes.fingerprints=a.fingerprints,k.attributes.candidates=l,k.attributes.setup=p,k.media.mediaType==="video"&&(k.media.fmts=d.videoCodecs.map(F=>F.payloadType.toString(10)),k.attributes.payloads=d.videoCodecs,k.attributes.extmaps=d.videoExtensions),k.media.mediaType==="audio"&&(k.media.fmts=d.audioCodecs.map(F=>F.payloadType.toString(10)),k.attributes.payloads=d.audioCodecs,k.attributes.extmaps=d.audioExtensions),S.mediaDescriptions[R]=this.mungMediaDesc(k)}this.sessionDesc=S,this.currentMidIndex=S.mediaDescriptions.length-1}toString(){return rr.exports.print(this.sessionDesc)}send(r,i,a){const{ssrcs:l,ssrcGroups:d}=ta(i,this.cname),p=this.sessionDesc.mediaDescriptions.find(C=>r===at.VIDEO?C.media.mediaType==="video":C.media.mediaType==="audio"),g=l[0].attributes.label,E=l[0].attributes.mslabel;return p.attributes.ssrcs=p.attributes.ssrcs.concat(l),p.attributes.ssrcGroups=p.attributes.ssrcGroups.concat(d),{id:g,mslabel:E}}batchSend(r){return r.map(i=>{let{kind:a,ssrcMsg:l}=i;return this.send(a,l,void 0)})}stopSending(r){this.sessionDesc.mediaDescriptions.forEach(i=>{const a=[],l=[],d=[];i.attributes.ssrcs.forEach(p=>{r.includes(p.attributes.label||"")?d.push(p):a.push(p)}),i.attributes.ssrcGroups.forEach(p=>{d.map(g=>g.ssrcId).includes(p.ssrcIds[0])||l.push(p)}),i.attributes.ssrcs=a,i.attributes.ssrcGroups=l})}mute(r){const i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(r){const i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}receive(r,i,a){r.forEach((l,d)=>{const p=l._mediaStreamTrack,g=this.sessionDesc.mediaDescriptions.findIndex(C=>C.attributes.mid===p.kind),E=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[g],l);this.sessionDesc.mediaDescriptions[g]=E})}stopReceiving(r){}updateCandidates(r){r===Ur.TCP?this.candidates.forEach(i=>{this.candidates.findIndex(a=>a.transport==="tcp"&&a.connectionAddress===i.connectionAddress&&a.port===i.port)===-1&&this.candidates.push(zk(zk({},i),{},{foundation:"tcpcandidate",priority:Number(i.priority)-1+"",transport:"tcp",port:Number(i.port)+90+""}))}):this.candidates=this.candidates.filter(i=>i.transport!=="tcp");for(const i of this.sessionDesc.mediaDescriptions)i.attributes.candidates=this.candidates}restartICE(r){r=tr(r),this.iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=r.iceUfrag,i.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const i=[];for(let a=0;a<r;a++)i.push((this.currentMidIndex+a+1).toString(10));return i}mungRecvMediaDsec(r,i){const a=tr(r);return Od(a,i),nC(a,i),a}updateRecvMedia(r,i){const a=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(a!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[a],i);this.sessionDesc.mediaDescriptions[a]=l}}bumpMid(r){this.currentMidIndex+=r}updateTrackLabel(r,i,a){const l=this.sessionDesc.mediaDescriptions.find(p=>r===at.VIDEO?p.attributes.mid==="video":p.attributes.mid==="audio");if(l){const p=l.attributes.ssrcs.find(g=>g.attributes.label===i);var d;p&&(p.attributes.label=a,(d=p.attributes.msid)===null||d===void 0||d.replace(i,a))}}mungMediaDesc(r){const i=tr(r);return tC(i),function(a){const l=a.attributes.extmaps.find(d=>d.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");l&&a.attributes.extmaps.splice(a.attributes.extmaps.indexOf(l),1),a.attributes.payloads.forEach(d=>{const p=d.rtcpFeedbacks.findIndex(g=>g.type==="transport-cc");p!==-1&&d.rtcpFeedbacks.splice(p,1)})}(i),i}getSSRC(r){for(const i of this.sessionDesc.mediaDescriptions)for(const a of i.attributes.ssrcs)if(a.attributes.label===r)return[a]}}function Aa(n){if(Array.isArray(n))return n.map(i=>i);if(!Kk(n))return n;const r={};for(const i in n)Kk(n[i])||Array.isArray(n[i])?r[i]=Aa(n[i]):r[i]=n[i];return r}function Kk(n){return!(typeof n!="object"||Array.isArray(n)||!n)}function UY(){const n=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return n&&n[0]?Number(n[0].split("/")[1]):null}function FY(n){return window.RTCStatsReport?n.getStats()instanceof Ae:!1}class iC{constructor(r){w(this,"input",[]),w(this,"size",void 0),this.size=r}add(r){this.input.push(r),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const Jc={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},Pp={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:Jc,remoteCandidate:Jc}},Yk={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},qk={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},Xk={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},Jk={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function Qk(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function Zk(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Qk(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Qk(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}class oC{constructor(r,i){w(this,"onFirstVideoReceived",void 0),w(this,"onFirstVideoDecoded",void 0),w(this,"onFirstAudioReceived",void 0),w(this,"onFirstVideoDecodedTimeout",void 0),w(this,"onFirstAudioDecoded",void 0),w(this,"onSelectedLocalCandidateChanged",void 0),w(this,"onSelectedRemoteCandidateChanged",void 0),w(this,"videoIsReady",!1),w(this,"videoIsReady2",{}),w(this,"pc",void 0),w(this,"options",void 0),w(this,"intervalTimer",void 0),w(this,"stats",Aa(Pp)),w(this,"isFirstVideoReceived",{}),w(this,"isFirstVideoDecoded",{}),w(this,"isFirstAudioReceived",{}),w(this,"isFirstAudioDecoded",{}),w(this,"isFirstVideoDecodedTimeout",{}),w(this,"lossRateWindowStats",[]),this.pc=r,this.options=i,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new Ae(r=>{r({local:Zk({},Jc),remote:Zk({},Jc)})})}setVideoIsReady(r){this.videoIsReady=r}setVideoIsReady2(r,i){this.videoIsReady2[r]=i}getVideoIsReady(r){return this.videoIsReady2[r]||!1}setIsFirstAudioDecoded(r){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(r){this.lossRateWindowStats.push(r),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const i=this.lossRateWindowStats.length,a=["videoSend","audioSend","videoRecv","audioRecv"];let l=0,d=0,p=0,g=0;for(const E of a)r[E].forEach((C,S)=>{if(!this.lossRateWindowStats[i-1][E][S]||!this.lossRateWindowStats[0][E][S])return;const R=this.lossRateWindowStats[i-1][E][S].packets-this.lossRateWindowStats[0][E][S].packets,k=this.lossRateWindowStats[i-1][E][S].packetsLost-this.lossRateWindowStats[0][E][S].packetsLost;E==="videoSend"||E==="audioSend"?(l+=R,p+=k):(d+=R,g+=k),Number.isNaN(R)||Number.isNaN(R)?C.packetLostRate=0:C.packetLostRate=R<=0||k<=0?0:k/(R+k)});r.sendPacketLossRate=l<=0||p<=0?0:p/(l+p),r.recvPacketLossRate=d<=0||g<=0?0:g/(d+g)}}function eL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function VY(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?eL(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):eL(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}class jY extends oC{constructor(){super(...arguments),w(this,"_stats",Pp),w(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const r=await this._getStats(),i=this.statsResponsesToObjects(r);this._stats=Aa(Pp);const a=i.filter(d=>d.type==="ssrc");this.processSSRCStats(a);const l=i.find(d=>d.type==="VideoBwe");l&&this.processBandwidthStats(l),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(r){this._stats.bitrate={actualEncoded:Number(r.googActualEncBitrate),targetEncoded:Number(r.googTargetEncBitrate),retransmit:Number(r.googRetransmitBitrate),transmit:Number(r.googTransmitBitrate)},this._stats.sendBandwidth=Number(r.googAvailableSendBandwidth)}processSSRCStats(r){r.forEach(i=>{const a=i.id.includes("send");switch("".concat(i.mediaType,"_").concat(a?"send":"recv")){case"video_send":{const l=Aa(qk);l.codec=i.googCodecName,l.adaptionChangeReason="none",i.googCpuLimitedResolution&&(l.adaptionChangeReason="cpu"),i.googBandwidthLimitedResolution&&(l.adaptionChangeReason="bandwidth"),l.avgEncodeMs=Number(i.googAvgEncodeMs),l.inputFrame={width:Number(i.googFrameWidthInput)||Number(i.googFrameWidthSent),height:Number(i.googFrameHeightInput)||Number(i.googFrameHeightSent),frameRate:Number(i.googFrameRateInput)},l.sentFrame={width:Number(i.googFrameWidthSent),height:Number(i.googFrameHeightSent),frameRate:Number(i.googFrameRateInput)},l.firsCount=Number(i.googFirReceived),l.nacksCount=Number(i.googNacksReceived),l.plisCount=Number(i.googPlisReceived),l.frameCount=Number(i.framesEncoded),l.bytes=Number(i.bytesSent),l.packets=Number(i.packetsSent),l.packetsLost=Number(i.packetsLost),l.ssrc=Number(i.ssrc),l.rttMs=Number(i.googRtt||0),this._stats.videoSend.push(l),this._stats.rtt=l.rttMs;break}case"video_recv":{const l=Aa(Yk),d=this.lastDecodeVideoReceiverStats.get(Number(i.ssrc));if(l.codec=i.googCodecName,l.targetDelayMs=Number(i.googTargetDelayMs),l.renderDelayMs=Number(i.googRenderDelayMs),l.currentDelayMs=Number(i.googCurrentDelayMs),l.minPlayoutDelayMs=Number(i.googMinPlayoutDelayMs),l.decodeMs=Number(i.googDecodeMs),l.maxDecodeMs=Number(i.googMaxDecodeMs),l.receivedFrame={width:Number(i.googFrameWidthReceived),height:Number(i.googFrameHeightReceived),frameRate:Number(i.googFrameRateReceived)},l.decodedFrame={width:Number(i.googFrameWidthReceived),height:Number(i.googFrameHeightReceived),frameRate:Number(i.googFrameRateDecoded)},l.decodeFrameRate=Number(i.googFrameRateDecoded),l.outputFrame={width:Number(i.googFrameWidthReceived),height:Number(i.googFrameHeightReceived),frameRate:Number(i.googFrameRateOutput)},l.jitterBufferMs=Number(i.googJitterBufferMs),l.firsCount=Number(i.googFirsSent),l.nacksCount=Number(i.googNacksSent),l.plisCount=Number(i.googPlisSent),l.framesDecodeCount=Number(i.framesDecoded),l.bytes=Number(i.bytesReceived),l.packets=Number(i.packetsReceived),l.packetsLost=Number(i.packetsLost),l.ssrc=Number(i.ssrc),l.packets>0&&!this.isFirstVideoReceived[l.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(l.ssrc),this.isFirstVideoReceived[l.ssrc]=!0),l.framesDecodeCount>0&&!this.isFirstVideoDecoded[l.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(l.ssrc,l.decodedFrame.width,l.decodedFrame.height),this.isFirstVideoDecoded[l.ssrc]=!0),d){const p=d.stats,g=Date.now()-d.lts;l.framesDecodeFreezeTime=p.framesDecodeFreezeTime,l.framesDecodeInterval=p.framesDecodeInterval,l.framesDecodeCount>p.framesDecodeCount&&this.isFirstVideoDecoded[l.ssrc]?(d.lts=Date.now(),l.framesDecodeInterval=g,l.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(i.ssrc,10))?l.framesDecodeFreezeTime+=l.framesDecodeInterval:this.setVideoIsReady2(parseInt(i.ssrc,10),!0))):l.framesDecodeCount<d.stats.framesDecodeCount&&(l.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(l.ssrc,{stats:VY({},l),lts:Date.now()}),this._stats.videoRecv.push(l);break}case"audio_recv":{const l=Aa(Jk);l.codec=i.googCodecName,l.outputLevel=Math.abs(Number(i.audioOutputLevel))/32767,l.decodingCNG=Number(i.googDecodingCNG),l.decodingCTN=Number(i.googDecodingCTN),l.decodingCTSG=Number(i.googDecodingCTSG),l.decodingNormal=Number(i.googDecodingNormal),l.decodingPLC=Number(i.googDecodingPLC),l.decodingPLCCNG=Number(i.googDecodingPLCCNG),l.expandRate=Number(i.googExpandRate),l.accelerateRate=Number(i.googAccelerateRate),l.preemptiveExpandRate=Number(i.googPreemptiveExpandRate),l.secondaryDecodedRate=Number(i.googSecondaryDecodedRate),l.speechExpandRate=Number(i.googSpeechExpandRate),l.preferredJitterBufferMs=Number(i.googPreferredJitterBufferMs),l.jitterBufferMs=Number(i.googJitterBufferMs),l.jitterMs=Number(i.googJitterReceived),l.bytes=Number(i.bytesReceived),l.packets=Number(i.packetsReceived),l.packetsLost=Number(i.packetsLost),l.ssrc=Number(i.ssrc),l.receivedFrames=Number(i.googDecodingCTN)||Number(i.packetsReceived),l.droppedFrames=Number(i.googDecodingPLC)+Number(i.googDecodingPLCCNG)||Number(i.packetsLost),l.receivedFrames>0&&!this.isFirstAudioReceived[l.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(l.ssrc),this.isFirstAudioReceived[l.ssrc]=!0),l.decodingNormal>0&&!this.isFirstAudioDecoded[l.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(l.ssrc),this.isFirstAudioDecoded[l.ssrc]=!0),this._stats.audioRecv.push(l);break}case"audio_send":{const l=Aa(Xk);l.codec=i.googCodecName,l.inputLevel=Math.abs(Number(i.audioInputLevel))/32767,l.aecReturnLoss=Number(i.googEchoCancellationReturnLoss||0),l.aecReturnLossEnhancement=Number(i.googEchoCancellationReturnLossEnhancement||0),l.residualEchoLikelihood=Number(i.googResidualEchoLikelihood||0),l.residualEchoLikelihoodRecentMax=Number(i.googResidualEchoLikelihoodRecentMax||0),l.bytes=Number(i.bytesSent),l.packets=Number(i.packetsSent),l.packetsLost=Number(i.packetsLost),l.ssrc=Number(i.ssrc),l.rttMs=Number(i.googRtt||0),this._stats.rtt=l.rttMs,this._stats.audioSend.push(l);break}}})}_getStats(){return new Ae((r,i)=>{this.pc.getStats(r,i)})}statsResponsesToObjects(r){const i=[];return r.result().forEach(a=>{const l={id:a.id,timestamp:a.timestamp.valueOf().toString(),type:a.type};a.names().forEach(d=>{l[d]=a.stat(d)}),i.push(l)}),i}}function tL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function su(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?tL(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):tL(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}class nL extends oC{constructor(){super(...arguments),w(this,"_stats",Pp),w(this,"report",void 0),w(this,"lastDecodeVideoReceiverStats",new Map),w(this,"lastVideoFramesRecv",new Map),w(this,"lastVideoFramesSent",new Map),w(this,"lastVideoFramesDecode",new Map),w(this,"lastVideoJBDelay",new Map),w(this,"lastAudioJBDelay",new Map),w(this,"mediaBytesSent",new Map),w(this,"mediaBytesRetransmit",new Map),w(this,"mediaBytesTargetEncode",new Map),w(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=Aa(Pp),this.report.forEach(r=>{switch(r.type){case Ro.OUTBOUND:r.mediaType==="audio"?this.processAudioOutboundStats(r):r.mediaType==="video"&&this.processVideoOutboundStats(r);break;case Ro.INBOUND:r.mediaType==="audio"?this.processAudioInboundStats(r):r.mediaType==="video"&&this.processVideoInboundStats(r);break;case Ro.TRANSPORT:{const i=this.report.get(r.selectedCandidatePairId);i&&this.processCandidatePairStats(i);break}case Ro.CANDIDATE_PAIR:r.selected&&this.processCandidatePairStats(r)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const r=await this.pc.getStats(),i={local:su({},Jc),remote:su({},Jc)};return r.forEach(a=>{let l;if(a.type===Ro.TRANSPORT&&(l=r.get(a.selectedCandidatePairId)),a.type===Ro.CANDIDATE_PAIR&&a.selected&&(l=a),l){const d=(p,g)=>{p.type=g.type,p.id=g.id,g.address&&(p.address=g.address),g.candidateType&&(p.candidateType=g.candidateType),g.port&&(p.port=g.port),g.priority&&(p.priority=g.priority),g.protocol&&(p.protocol=g.protocol),g.relayProtocol&&(p.relayProtocol=g.relayProtocol)};if(l.localCandidateId){const p=r.get(l.localCandidateId);p&&d(i.local,p)}if(l.remoteCandidateId){const p=r.get(l.remoteCandidateId);p&&d(i.remote,p)}}}),i}processCandidatePairStats(r){if(this._stats.sendBandwidth=r.availableOutgoingBitrate||0,r.currentRoundTripTime&&(this._stats.rtt=1e3*r.currentRoundTripTime),this._stats.videoSend.forEach(i=>{r.currentRoundTripTime&&(i.rttMs=1e3*r.currentRoundTripTime)}),this._stats.audioSend.forEach(i=>{r.currentRoundTripTime&&(i.rttMs=1e3*r.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=r.id,r.localCandidateId){const i=this.report.get(r.localCandidateId);i&&this.processCandidateStats(i)}if(r.remoteCandidateId){const i=this.report.get(r.remoteCandidateId);i&&this.processCandidateStats(i)}}processCandidateStats(r){let i;r.type===Ro.LOCAL_CANDIDATE&&(i=this._stats.selectedCandidatePair.localCandidate),r.type===Ro.REMOTE_CANDIDATE&&(i=this._stats.selectedCandidatePair.remoteCandidate),i&&(i.type=r.type,i.id=r.id,r.address&&(i.address=r.address),r.candidateType&&(i.candidateType=r.candidateType),r.port&&(i.port=r.port),r.priority&&(i.priority=r.priority),r.protocol&&(i.protocol=r.protocol),r.relayProtocol&&(i.relayProtocol=r.relayProtocol),r.type===Ro.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==i.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(su({},i),su({},this.stats.selectedCandidatePair.localCandidate)),r.type===Ro.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==i.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(su({},i),su({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(r){let i=this._stats.audioRecv.find(a=>a.ssrc===r.ssrc);i||(i=Aa(Jk),this._stats.audioRecv.push(i)),i.ssrc=r.ssrc,i.packets=r.packetsReceived,i.packetsLost=r.packetsLost,i.bytes=r.bytesReceived,i.jitterMs=1e3*r.jitter,this.processAudioTrackReceiverStats(r,r.trackId,i),r.codecId&&(i.codec=this.getCodecFromCodecStats(r.codecId)),i.receivedFrames||(i.receivedFrames=r.packetsReceived),i.droppedFrames||(i.droppedFrames=r.packetsLost),i.receivedFrames>0&&!this.isFirstAudioReceived[i.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(i.ssrc),this.isFirstAudioReceived[i.ssrc]=!0),i.outputLevel&&i.outputLevel>0&&!this.isFirstAudioDecoded[i.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(i.ssrc),this.isFirstAudioDecoded[i.ssrc]=!0),typeof r.concealedSamples=="number"&&(i.concealedSamples=r.concealedSamples)}processVideoInboundStats(r){let i=this._stats.videoRecv.find(p=>p.ssrc===r.ssrc);i||(i=Aa(Yk),this._stats.videoRecv.push(i)),i.ssrc=r.ssrc,i.packets=r.packetsReceived,i.packetsLost=r.packetsLost,i.bytes=r.bytesReceived,i.firsCount=r.firCount,i.nacksCount=r.nackCount,i.plisCount=r.pliCount,i.framesDecodeCount=r.framesDecoded,i.totalInterFrameDelay=r.totalInterFrameDelay,i.totalSquaredInterFrameDelay=r.totalSquaredInterFrameDelay;const a=this.lastDecodeVideoReceiverStats.get(i.ssrc),l=this.lastVideoFramesDecode.get(i.ssrc),d=Date.now();if(i.framesDecodeCount>0&&!this.isFirstVideoDecoded[i.ssrc]){const p=i.decodedFrame?i.decodedFrame.width:0,g=i.decodedFrame?i.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(i.ssrc,p,g),this.isFirstVideoDecoded[i.ssrc]=!0}if(a){const p=a.stats,g=d-a.lts;i.framesDecodeFreezeTime=p.framesDecodeFreezeTime,i.framesDecodeInterval=p.framesDecodeInterval,!this.isFirstVideoDecoded[i.ssrc]&&g>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[i.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(i.ssrc),this.isFirstVideoDecodedTimeout[i.ssrc]=!0),i.framesDecodeCount>p.framesDecodeCount&&this.isFirstVideoDecoded[i.ssrc]?(a.lts=Date.now(),i.framesDecodeInterval=g,i.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(r.ssrc))?i.framesDecodeFreezeTime+=i.framesDecodeInterval:this.setVideoIsReady2(parseInt(r.ssrc,10),!0))):i.framesDecodeCount<p.framesDecodeCount&&(i.framesDecodeInterval=0),r.framesDecoded&&r.qpSum&&(a.stats.framesDecodeCount>r.framesDecoded?i.qpSumPerFrame=r.qpSum/r.framesDecoded:i.qpSumPerFrame=(r.qpSum-a.qpSum)/(r.framesDecoded-a.stats.framesDecodeCount))}l&&d-l.lts>=800?(i.decodeFrameRate=Math.round((i.framesDecodeCount-l.count)/((d-l.lts)/1e3)),this.lastVideoFramesDecode.set(i.ssrc,{count:i.framesDecodeCount,lts:d,rate:i.decodeFrameRate})):l?i.decodeFrameRate=l.rate:this.lastVideoFramesDecode.set(i.ssrc,{count:i.framesDecodeCount,lts:d,rate:0}),r.totalDecodeTime&&(i.decodeMs=1e3*r.totalDecodeTime),this.processVideoTrackReceiverStats(r,r.trackId,i),r.codecId&&(i.codec=this.getCodecFromCodecStats(r.codecId)),r.framerateMean&&(i.framesRateFirefox=r.framerateMean),i.packets>0&&!this.isFirstVideoReceived[i.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(i.ssrc),this.isFirstVideoReceived[i.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(i.ssrc,{stats:su({},i),lts:a?a.lts:Date.now(),qpSum:r.qpSum})}processVideoOutboundStats(r){let i=this._stats.videoSend.find(l=>l.ssrc===r.ssrc);i||(i=Aa(qk),this._stats.videoSend.push(i));const a=this.mediaBytesSent.get(r.ssrc);if(a)a.add(r.bytesSent);else{const l=new iC(10);l.add(r.bytesSent),this.mediaBytesSent.set(r.ssrc,l)}if(r.retransmittedBytesSent!==void 0){const l=this.mediaBytesRetransmit.get(r.ssrc);if(l)l.add(r.retransmittedBytesSent);else{const d=new iC(10);d.add(r.retransmittedBytesSent),this.mediaBytesRetransmit.set(r.ssrc,d)}}if(r.totalEncodedBytesTarget){const l=this.mediaBytesTargetEncode.get(r.ssrc);if(l)l.add(r.totalEncodedBytesTarget);else{const d=new iC(10);d.add(r.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(r.ssrc,d)}}if(i.ssrc=r.ssrc,i.bytes=r.bytesSent,i.packets=r.packetsSent,i.firsCount=r.firCount,i.nacksCount=r.nackCount,i.plisCount=r.pliCount,i.frameCount=r.framesEncoded,i.adaptionChangeReason=r.qualityLimitationReason,i.scalabilityMode=r.scalabilityMode,r.totalEncodeTime&&r.framesEncoded){const l=this.lastEncoderMs.get(r.ssrc);if(!l||l.lastFrameCount>r.framesEncoded)i.avgEncodeMs=1e3*r.totalEncodeTime/r.framesEncoded;else{const d=r.framesEncoded-l.lastFrameCount,p=r.totalEncodeTime-l.lastEncoderTime;i.avgEncodeMs=1e3*p/d}}if(r.framesEncoded&&r.qpSum){const l=this.lastEncoderMs.get(r.ssrc);!l||l.lastFrameCount>r.framesEncoded?i.qpSumPerFrame=r.qpSum/r.framesEncoded:i.qpSumPerFrame=(r.qpSum-l.lastQpSum)/(r.framesEncoded-l.lastFrameCount)}if(this.lastEncoderMs.set(r.ssrc,{lastFrameCount:r.framesEncoded,lastEncoderTime:r.totalEncodeTime,lastQpSum:r.qpSum,lts:Date.now()}),r.codecId&&(i.codec=this.getCodecFromCodecStats(r.codecId)),r.mediaSourceId&&this.processVideoMediaSource(r.mediaSourceId,i),this.processVideoTrackSenderStats(r,r.trackId,i),r.remoteId)this.processRemoteInboundStats(r.remoteId,i);else{const l=this.findRemoteStatsId(r.ssrc,Ro.REMOTE_INBOUND);l&&this.processRemoteInboundStats(l,i)}}processAudioOutboundStats(r){let i=this._stats.audioSend.find(a=>a.ssrc===r.ssrc);if(i||(i=Aa(Xk),this._stats.audioSend.push(i)),i.ssrc=r.ssrc,i.packets=r.packetsSent,i.bytes=r.bytesSent,r.mediaSourceId&&this.processAudioMediaSource(r.mediaSourceId,i),r.codecId&&(i.codec=this.getCodecFromCodecStats(r.codecId)),this.processAudioTrackSenderStats(r,r.trackId,i),r.remoteId)this.processRemoteInboundStats(r.remoteId,i);else{const a=this.findRemoteStatsId(r.ssrc,Ro.REMOTE_INBOUND);a&&this.processRemoteInboundStats(a,i)}}findRemoteStatsId(r,i){var a;const l=Array.from(Os(a=this.report).call(a)).find(d=>d.type===i&&d.ssrc===r);return l?l.id:null}processVideoMediaSource(r,i){const a=this.report.get(r);a&&a.width&&a.height&&a.framesPerSecond&&(i.inputFrame={width:a.width,height:a.height,frameRate:a.framesPerSecond})}processAudioMediaSource(r,i){const a=this.report.get(r);a&&(i.inputLevel=a.audioLevel)}processVideoTrackSenderStats(r,i,a){var l,d,p;const g=i?this.report.get(i):void 0,E=(l=g==null?void 0:g.framesSent)!==null&&l!==void 0?l:r.framesSent;let C=(d=g==null?void 0:g.frameWidth)!==null&&d!==void 0?d:r.frameWidth,S=(p=g==null?void 0:g.frameHeight)!==null&&p!==void 0?p:r.frameHeight;if(typeof E!="number")return;typeof C=="number"&&typeof S=="number"||(C=0,S=0);let R=0;const k=Date.now(),F=this.lastVideoFramesSent.get(a.ssrc);F&&k-F.lts>=800?(R=Math.round((E-F.count)/((k-F.lts)/1e3)),this.lastVideoFramesSent.set(a.ssrc,{count:E,lts:k,rate:R})):F?R=F.rate:this.lastVideoFramesSent.set(a.ssrc,{count:E,lts:k,rate:0}),a.sentFrame={width:C,height:S,frameRate:Math.max(0,R)}}processVideoTrackReceiverStats(r,i,a){var l,d,p,g,E;const C=i?this.report.get(i):void 0,S=(l=C==null?void 0:C.framesReceived)!==null&&l!==void 0?l:r.framesReceived,R=(d=C==null?void 0:C.frameWidth)!==null&&d!==void 0?d:r.frameWidth,k=(p=C==null?void 0:C.frameHeight)!==null&&p!==void 0?p:r.frameHeight,F=(g=C==null?void 0:C.jitterBufferDelay)!==null&&g!==void 0?g:r.jitterBufferDelay,W=(E=C==null?void 0:C.jitterBufferEmittedCount)!==null&&E!==void 0?E:r.jitterBufferEmittedCount;if(typeof S=="number"){const G=this.lastVideoFramesRecv.get(a.ssrc),z=Date.now();a.framesReceivedCount=S;let oe=0;G&&z-G.lts>=800?(oe=Math.round((S-G.count)/((z-G.lts)/1e3)),this.lastVideoFramesRecv.set(a.ssrc,{count:S,lts:z,rate:oe})):G?oe=G.rate:this.lastVideoFramesRecv.set(a.ssrc,{count:S,lts:z,rate:0}),a.receivedFrame={width:R||0,height:k||0,frameRate:oe||0},a.decodedFrame={width:R||0,height:k||0,frameRate:a.decodeFrameRate||0},a.outputFrame={width:R||0,height:k||0,frameRate:a.decodeFrameRate||0}}if(F&&W){let G=this.lastVideoJBDelay.get(a.ssrc);this.lastVideoJBDelay.set(a.ssrc,{jitterBufferDelay:F,jitterBufferEmittedCount:W}),G||(G={jitterBufferDelay:0,jitterBufferEmittedCount:0});const z=1e3*(F-G.jitterBufferDelay)/(W-G.jitterBufferEmittedCount);a.jitterBufferMs=z,a.currentDelayMs=Math.round(z)}}processAudioTrackSenderStats(r,i,a){var l,d,p,g;const E=i?this.report.get(i):void 0,C=(l=(d=E==null?void 0:E.echoReturnLoss)!==null&&d!==void 0?d:r.echoReturnLoss)!==null&&l!==void 0?l:0,S=(p=(g=E==null?void 0:E.echoReturnLossEnhancement)!==null&&g!==void 0?g:r.echoReturnLossEnhancement)!==null&&p!==void 0?p:0;a.aecReturnLoss=C,a.aecReturnLossEnhancement=S}processAudioTrackReceiverStats(r,i,a){var l,d,p,g,E,C,S;const R=i?this.report.get(i):void 0,k=(l=R==null?void 0:R.removedSamplesForAcceleration)!==null&&l!==void 0?l:r.removedSamplesForAcceleration,F=(d=R==null?void 0:R.totalSamplesReceived)!==null&&d!==void 0?d:r.totalSamplesReceived,W=(p=R==null?void 0:R.jitterBufferDelay)!==null&&p!==void 0?p:r.jitterBufferDelay,G=(g=R==null?void 0:R.jitterBufferEmittedCount)!==null&&g!==void 0?g:r.jitterBufferEmittedCount,z=(E=R==null?void 0:R.audioLevel)!==null&&E!==void 0?E:r==null?void 0:r.audioLevel,oe=(C=R==null?void 0:R.totalSamplesDuration)!==null&&C!==void 0?C:r==null?void 0:r.totalSamplesDuration,ce=(S=R==null?void 0:R.concealedSamples)!==null&&S!==void 0?S:r.concealedSamples;if(k&&F&&(a.accelerateRate=k/F),W&&G){let Ne=this.lastAudioJBDelay.get(a.ssrc);this.lastAudioJBDelay.set(a.ssrc,{jitterBufferDelay:W,jitterBufferEmittedCount:G}),Ne||(Ne={jitterBufferDelay:0,jitterBufferEmittedCount:0});const Te=1e3*(W-Ne.jitterBufferDelay)/(G-Ne.jitterBufferEmittedCount);a.jitterBufferMs=Math.round(Te)}a.outputLevel=z;let ye=1920;oe&&F&&(ye=F/oe/50,a.receivedFrames=Math.round(F/ye)),ce&&(a.droppedFrames=Math.round(ce/ye))}processRemoteInboundStats(r,i){const a=this.report.get(r);a&&(i.packetsLost=a.packetsLost,a.roundTripTime&&(i.rttMs=1e3*a.roundTripTime))}getCodecFromCodecStats(r){const i=this.report.get(r);if(!i)return"";const a=i.mimeType.match(/\/(.*)$/);return a&&a[1]?a[1]:""}updateSendBitrate(){let r=0,i=null,a=null;this.mediaBytesSent.forEach(d=>{r+=d.diffMean()}),this.mediaBytesRetransmit.forEach(d=>{i=i===null?d.diffMean():i+d.diffMean()}),this.mediaBytesTargetEncode.forEach(d=>{a=a===null?d.diffMean():a+d.diffMean()});const l=i!==null?r-i:r;this._stats.bitrate={actualEncoded:8*l/(this.options.updateInterval/1e3),transmit:8*r/(this.options.updateInterval/1e3)},i!==null&&(this._stats.bitrate.retransmit=8*i/(this.options.updateInterval/1e3)),a!==null&&(this._stats.bitrate.targetEncoded=8*a/(this.options.updateInterval/1e3))}}class BY extends oC{updateStats(){return Ae.resolve()}}function aC(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:500,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e4;const d=UY();return d?d<76?new jY(n,{updateInterval:r,lossRateInterval:i,freezeRateLimit:a,firstVideoDecodedTimeout:l}):new nL(n,{updateInterval:r,lossRateInterval:i,freezeRateLimit:a,firstVideoDecodedTimeout:l}):FY(n)?new nL(n,{updateInterval:r,lossRateInterval:i,freezeRateLimit:a,firstVideoDecodedTimeout:l}):new BY(n,{updateInterval:r,lossRateInterval:i,freezeRateLimit:a,firstVideoDecodedTimeout:l})}var tn;function rL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function iL(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?rL(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):rL(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}let Dp=(ve((tn=class Zp extends S0{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}constructor(r,i){super(r,i),w(this,"store",void 0),w(this,"peerConnection",void 0),w(this,"remoteSDP",void 0),w(this,"initialOffer",void 0),w(this,"statsFilter",void 0),w(this,"useRTX",!1),w(this,"localCapabilities",void 0),w(this,"localCandidateCount",0),w(this,"allCandidatesReceived",!1),w(this,"establishPromise",void 0),w(this,"mutex",new bi("P2PConnection-mutex")),this.store=i,this.peerConnection=new RTCPeerConnection(Zp.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.statsFilter=aC(this.peerConnection,re("STATS_UPDATE_INTERVAL"),void 0,Dn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const r=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!r.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const i=au(r.sdp),a=eC(r.sdp,!this.useRTX,re("FILTER_VIDEO_FEC"),re("FILTER_AUDIO_FEC"),["opus"]);return this.localCapabilities=a,this.initialOffer=r,iL(iL({},i),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:a},offerSDP:r.sdp})}catch(r){throw new q($.GET_LOCAL_CONNECTION_PARAMS_FAILED,r.toString())}}async connect(r,i,a,l,d,p){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new MY({remoteIceParameters:r,remoteDtlsParameters:i,candidates:a,remoteRTPCapabilities:l.send,remoteSetup:d,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:p});const g=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(g){throw new q($.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(g.toString()))}}send(r,i){var a=this;return Oa(function*(){const l=yield _t(a.mutex.lock());try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const d=r.map(k=>a.peerConnection.addTrack(k._mediaStreamTrack)),p=yield _t(a.peerConnection.createOffer()),g=rr.exports.parse(p.sdp),E=r.map(k=>{const F=k._mediaStreamTrack,W=g.mediaDescriptions.find(G=>G.attributes.mid===F.kind);if(!W)throw new Error("Cannot extract ssrc from mediaDescription.");return function(G,z,oe){const ce=G.attributes.ssrcs.filter(Ne=>Ne.attributes.label===z),ye=G.attributes.ssrcGroups;if(ce.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(ye&&ce.length>1){const Ne=ye.find(Te=>Te.ssrcIds.indexOf(ce[0].ssrcId)!==-1);return Ne?[{ssrcId:Ne.ssrcIds[0],rtx:oe?Ne.ssrcIds[1]:void 0}]:[{ssrcId:ce[0].ssrcId}]}return[{ssrcId:ce[0].ssrcId}]}(W,F.id,a.useRTX)});let C;try{C=yield E}catch(k){throw d.forEach(F=>{Si()&&F.replaceTrack(null),a.peerConnection.removeTrack(F)}),k}const S=a.mungSendOfferSDP(p.sdp,r);a.remoteSDP.receive(r,i,C);const R=a.remoteSDP.toString();return yield _t(a.peerConnection.setLocalDescription({type:"offer",sdp:S})),yield _t(a.applySendEncodings(d,r)),yield _t(a.peerConnection.setRemoteDescription({type:"answer",sdp:R})),r.map((k,F)=>{const W=k._mediaStreamTrack.id;return{localSSRC:E[F],id:W}})}catch(d){throw new q($.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(d.toString()))}finally{l()}})()}async stopSending(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const i=this.peerConnection.getSenders().filter(d=>{var p;return r.indexOf(((p=d.track)===null||p===void 0?void 0:p.id)||"")!==-1});if(i.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");i.map(d=>{Si()&&d.replaceTrack(null),this.peerConnection.removeTrack(d)});const a=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(a),this.remoteSDP.stopReceiving(r);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(i){throw new q($.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(i.toString()))}}async receive(r,i,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(r," before remoteSDP created."));const{id:d,mslabel:p}=this.remoteSDP.send(r,i,l),g=new Ae((S,R)=>{const k=setTimeout(()=>{R(new Error("Cannot receive track, id: ".concat(d)))},1e4),F=W=>{const G=Ht();if((G.name==="Safari"&&Number(G.version)===11||yi())&&W.track.id!==d&&W.streams[0].id===p){var z;const oe=W.streams[0].getTracks()[0];return(z=this.remoteSDP)===null||z===void 0||z.updateTrackLabel(r,d,W.track.id),this.peerConnection.removeEventListener("track",F),clearTimeout(k),void S(oe)}if(W.track.id===d)return this.peerConnection.removeEventListener("track",F),clearTimeout(k),void S(W.track)};this.peerConnection.addEventListener("track",F)}),E=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:E});const C=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(C),{track:await g,id:d}}catch(d){throw new q($.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(d.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const a=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(a)}catch(i){throw new q($.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}async muteRemote(r){}async unmuteRemote(r){}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getSenders().filter(a=>{var l;return r.indexOf(((l=a.track)===null||l===void 0?void 0:l.id)||"")!==-1});if(i.length!==r.length)throw new Error("sender' length doesn't match mids' length.");i.map(a=>{if(Si()&&a.track)a.track.enabled=!1;else{const l=a.getParameters();l.encodings.forEach(d=>d.active=!1),a.setParameters(l)}})}catch(i){throw new q($.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getSenders().filter(d=>{var p;return r.indexOf(((p=d.track)===null||p===void 0?void 0:p.id)||"")!==-1});if(i.length!==r.length)throw new Error("Senders' length doesn't match mids' length.");i.map(async d=>{if(Si()&&d.track)d.track.enabled=!0;else{const p=d.getParameters();p.encodings.forEach(g=>g.active=!0),await d.setParameters(p)}});const a=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(a);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(i){throw new q($.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(i.toString()))}}restartICE(r){var i=this;return Oa(function*(){const a=yield _t(i.mutex.lock("From P2PConnection.restartICE"));try{if(!i.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Gn().supportPCSetConfiguration){const E=i.peerConnection.getConfiguration(),C=r===Ur.RELAY?"relay":"all";E.iceTransportPolicy!==C&&(M.debug("[".concat(i.store.clientId,"] restartICE change iceTransportPolicy from [").concat(E.iceTransportPolicy,"] to [").concat(C,"]")),E.iceTransportPolicy=C,i.peerConnection.setConfiguration(E))}else if(r===Ur.RELAY)return;r!==Ur.RELAY&&i.remoteSDP.updateCandidates(r);const l=yield _t(i.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const d=au(l.sdp),{remoteIceParameters:p}=yield d.iceParameters;i.remoteSDP.restartICE(p);const g=i.remoteSDP.toString();yield _t(i.peerConnection.setLocalDescription(l)),yield _t(i.peerConnection.setRemoteDescription({type:"answer",sdp:g}))}catch(l){M.warning("[".concat(i.store.clientId,"] restart ICE failed, abort operation"),l)}finally{a()}})()}close(){var r;this.peerConnection.close(),(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const a=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(a.sdp,[i]);this.remoteSDP.updateRecvMedia(i._mediaStreamTrack.kind,i);const d=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(a){throw new q($.EXCHANGE_SDP_FAILED,a.toString())}}async updateSendParameters(r,i){const a=this.peerConnection.getSenders().filter(l=>{var d;return((d=l.track)===null||d===void 0?void 0:d.id)===r});a.length===1&&await this.applySendEncodings(a,[i])}setStatsRemoteVideoIsReady(r,i){this.statsFilter.setVideoIsReady2(r,i)}async replaceTrack(r,i){const a=this.peerConnection.getSenders().find(l=>{var d;return((d=l.track)===null||d===void 0?void 0:d.id)===i});a&&await a.replaceTrack(r._mediaStreamTrack)}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,M.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,M.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},re("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const i={iceServers:[],sdpSemantics:"plan-b"};return r.iceServers?i.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(gp(r.turnServer.servers)?i.iceServers=r.turnServer.servers:(i.iceServers&&i.iceServers.push(...Zp.turnServerConfigToIceServers(r.turnServer.servers)),re("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&r.turnServer.serversFromGateway&&i.iceServers.push(...Zp.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(a=>{a.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(r){const i=[];return r.forEach(a=>{a.security?a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}):(a.udpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.udpport,"?transport=udp")}),a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}))}),i}async applySendEncodings(r,i){try{if(!Gn().supportSetRtpSenderParameters||r.length!==i.length)return;for(let l=0;l<r.length;l++){var a;const d=r[l],p=i[l];if(!p)continue;const g={},E={};if(p instanceof nr)switch(p._optimizationMode){case"motion":g.degradationPreference="maintain-framerate";break;case"detail":g.degradationPreference="maintain-resolution";break;default:g.degradationPreference="balanced"}if(re("DSCP_TYPE")&&Gl()){const R=re("DSCP_TYPE");["very-low","low","medium","high"].includes(R)&&(E.networkPriority=R)}const C=d.getParameters(),S=(a=C.encodings)===null||a===void 0?void 0:a[0];S&&Object.assign(S,E),Object.assign(C,g),await d.setParameters(C)}}catch{M.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(r,i){const a=rr.exports.parse(r);return i.forEach((l,d)=>{const p=l._mediaStreamTrack,g=a.mediaDescriptions.find(E=>E.attributes.mid===p.kind);g&&Od(g,l)}),rr.exports.print(a)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,i,a)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,i,a)},this.statsFilter.onSelectedLocalCandidateChanged=(r,i)=>{var a;(a=this.onSelectedLocalCandidateChanged)===null||a===void 0||a.call(this,r,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,i)=>{var a;(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0||a.call(this,r,i)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const i=this.remoteSDP.batchSend(r).map((d,p)=>{let{id:g,mslabel:E}=d;const{kind:C}=r[p];return new Ae((S,R)=>{const k=setTimeout(()=>{R(new Error("Cannot receive track, id: ".concat(g)))},1e4),F=W=>{const G=Ht();if(G.name==="Safari"&&Number(G.version)===11&&W.track.id!==g&&W.streams[0].id===E){var z;const oe=W.streams[0].getTracks()[0];return(z=this.remoteSDP)===null||z===void 0||z.updateTrackLabel(C,g,W.track.id),this.peerConnection.removeEventListener("track",F),clearTimeout(k),void S({track:oe,id:g})}if(W.track.id===g)return this.peerConnection.removeEventListener("track",F),clearTimeout(k),void S({track:W.track,id:g})};this.peerConnection.addEventListener("track",F)})}),a=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:a});const l=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(l),await Ae.all(i)}catch(i){throw new q($.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(i.toString()))}}async getRemoteSSRC(r){if(!this.remoteSDP)return;const i=this.remoteSDP.getSSRC(r);return i==null?void 0:i[0].ssrcId}setConfiguration(r){if(Gn().supportPCSetConfiguration){const i=Zp.resolvePCConfiguration(r);this.peerConnection.setConfiguration(i)}}}).prototype,"connect",[na],Object.getOwnPropertyDescriptor(tn.prototype,"connect"),tn.prototype),ve(tn.prototype,"stopSending",[na],Object.getOwnPropertyDescriptor(tn.prototype,"stopSending"),tn.prototype),ve(tn.prototype,"receive",[na],Object.getOwnPropertyDescriptor(tn.prototype,"receive"),tn.prototype),ve(tn.prototype,"stopReceiving",[na],Object.getOwnPropertyDescriptor(tn.prototype,"stopReceiving"),tn.prototype),ve(tn.prototype,"muteRemote",[na],Object.getOwnPropertyDescriptor(tn.prototype,"muteRemote"),tn.prototype),ve(tn.prototype,"unmuteRemote",[na],Object.getOwnPropertyDescriptor(tn.prototype,"unmuteRemote"),tn.prototype),ve(tn.prototype,"muteLocal",[na],Object.getOwnPropertyDescriptor(tn.prototype,"muteLocal"),tn.prototype),ve(tn.prototype,"unmuteLocal",[na],Object.getOwnPropertyDescriptor(tn.prototype,"unmuteLocal"),tn.prototype),ve(tn.prototype,"close",[na],Object.getOwnPropertyDescriptor(tn.prototype,"close"),tn.prototype),ve(tn.prototype,"updateEncoderConfig",[na],Object.getOwnPropertyDescriptor(tn.prototype,"updateEncoderConfig"),tn.prototype),ve(tn.prototype,"updateSendParameters",[na],Object.getOwnPropertyDescriptor(tn.prototype,"updateSendParameters"),tn.prototype),ve(tn.prototype,"replaceTrack",[na],Object.getOwnPropertyDescriptor(tn.prototype,"replaceTrack"),tn.prototype),ve(tn.prototype,"getRemoteSSRC",[na],Object.getOwnPropertyDescriptor(tn.prototype,"getRemoteSSRC"),tn.prototype),tn);function na(n,r,i){const a=n[r];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,d=await l.lock("Locking from P2PConnection.".concat(r));try{for(var p=arguments.length,g=new Array(p),E=0;E<p;E++)g[E]=arguments[E];return await a.apply(this,g)}finally{d()}},i}function oL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function aL(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?oL(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):oL(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}const W0="9",sL=4e4;class $Y{get localCapabilities(){return tr(this._localCapabilities)}get rtpCapabilities(){return tr(this._rtpCapabilities)}get candidates(){return tr(this._candidates)}get iceParameters(){return tr(this._iceParameters)}get dtlsParameters(){return tr(this._dtlsParameters)}constructor(r){w(this,"sessionDesc",void 0),w(this,"_localCapabilities",void 0),w(this,"_rtpCapabilities",void 0),w(this,"_candidates",void 0),w(this,"_iceParameters",void 0),w(this,"_dtlsParameters",void 0),w(this,"setup",void 0),w(this,"currentMidIndex",void 0),w(this,"cname",void 0),w(this,"firefoxSsrcMidMap",new Map),r=tr(r);const{remoteIceParameters:i,remoteDtlsParameters:a,candidates:l,remoteRTPCapabilities:d,remoteSetup:p,localCapabilities:g,cname:E}=r,C=rr.exports.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`);this._rtpCapabilities=d,this._candidates=l,this._iceParameters=i,this._dtlsParameters=a,this._localCapabilities=g,this.setup=p,this.cname=E;const S=this.rtpCapabilities.send;for(const R of C.mediaDescriptions){if(R.attributes.iceUfrag=i.iceUfrag,R.attributes.icePwd=i.icePwd,R.attributes.fingerprints=a.fingerprints,R.attributes.candidates=l,R.attributes.setup=p,R.media.mediaType==="video"&&(R.media.fmts=S.videoCodecs.map(k=>k.payloadType.toString(10)),R.attributes.payloads=S.videoCodecs,R.attributes.extmaps=S.videoExtensions,re("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:k,ssrcGroups:F}=ta([{ssrcId:sL,rtx:re("USE_SUB_RTX")?40001:void 0}],this.cname);R.attributes.ssrcs=k,R.attributes.ssrcGroups=F}if(R.media.mediaType==="audio"&&(R.media.fmts=S.audioCodecs.map(k=>k.payloadType.toString(10)),R.attributes.payloads=S.audioCodecs,R.attributes.extmaps=S.audioExtensions,Xc(R),re("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:k,ssrcGroups:F}=ta([{ssrcId:2e4}],this.cname);R.attributes.ssrcs=k,R.attributes.ssrcGroups=F}}this.sessionDesc=C,this.currentMidIndex=C.mediaDescriptions.length-1}preloadRemoteMedia(){const r=re("PRELOAD_MEDIA_COUNT");this.rtpCapabilities;const i=this.candidates,a=this.dtlsParameters,l=this.iceParameters,d=this.rtpCapabilities.send;for(let p=1;p<r;p++){const g=2*p+2e4,E=2*p+sL,{ssrcs:C,ssrcGroups:S}=ta([{ssrcId:g}],this.cname),{ssrcs:R,ssrcGroups:k}=ta([{ssrcId:E,rtx:re("USE_SUB_RTX")?E+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:W0,protos:["UDP","TLS","RTP","SAVPF"],fmts:d.videoCodecs.map(F=>F.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:i,extmaps:d.videoExtensions,fingerprints:a.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:R,ssrcGroups:k,rtcpFeedbackWildcards:[],payloads:d.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:W0,protos:["UDP","TLS","RTP","SAVPF"],fmts:d.audioCodecs.map(F=>F.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:i,extmaps:d.audioExtensions,fingerprints:a.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:C,ssrcGroups:S,rtcpFeedbackWildcards:[],payloads:d.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return rr.exports.print(this.sessionDesc)}send(r,i,a,l){const{ssrcs:d,ssrcGroups:p}=ta(i,this.cname,re("SYNC_GROUP")?a:void 0),g=this.findPreloadMediaDesc(d);if(g){if(Dn()&&this.firefoxSsrcMidMap.set(d[0].ssrcId,g.attributes.mid),l&&(l.twcc||l.remb)){const E=this.sessionDesc.mediaDescriptions.indexOf(g);return this.sessionDesc.mediaDescriptions[E]=this.mungSendMediaDesc(g,l),{mid:g.attributes.mid,needExchangeSDP:!0}}return{mid:g.attributes.mid,needExchangeSDP:!1}}{const E=this.findAvailableMediaIndex(r,d);let C;return E===-1||E===1&&(Si()||tN())||E===0&&re("USE_SUB_RTX")||nN()?(C=this.createOrRecycleSendMedia(r,d,p,"sendonly",l),this.updateBundleMids()):(C=tr(this.sessionDesc.mediaDescriptions[E]),C.attributes.direction="sendonly",C.attributes.ssrcs=d,C.attributes.ssrcGroups=p,this.sessionDesc.mediaDescriptions[E]=this.mungSendMediaDesc(C,l)),Dn()&&this.firefoxSsrcMidMap.set(d[0].ssrcId,C.attributes.mid),{mid:C.attributes.mid,needExchangeSDP:!0}}}batchSend(r){const i=r.map(d=>{let{kind:p,ssrcMsg:g,mslabel:E}=d;return this.send(p,g,E)}),a=[];let l=!1;return i.forEach(d=>{let{mid:p,needExchangeSDP:g}=d;g&&(l=!0),a.push(p)}),{mids:a,needExchangeSDP:l}}stopSending(r){const i=this.sessionDesc.mediaDescriptions.filter(a=>a.attributes.mid&&r.indexOf(a.attributes.mid)!==-1);if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");i.forEach(a=>{a.attributes.mid==="0"||Dn()||nN()?a.attributes.ssrcs=[]:(a.attributes.ssrcs=[],a.attributes.direction="inactive",a.media.port="0")}),this.updateBundleMids()}mute(r){const i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(r){const i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}muteRemote(r){const i=this.sessionDesc.mediaDescriptions.filter(a=>r.includes(a.attributes.mid||""));if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(a=>{a.attributes.direction="inactive"})}unmuteRemote(r){const i=this.sessionDesc.mediaDescriptions.filter(a=>r.includes(a.attributes.mid||""));if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(a=>{a.attributes.direction="recvonly"})}receive(r,i,a,l){r.forEach((d,p)=>{this.createOrRecycleRecvMedia(d,[],"recvonly",i,a,l[p])}),this.updateBundleMids()}stopReceiving(r){const i=this.sessionDesc.mediaDescriptions.filter(a=>r.indexOf(a.attributes.mid)!==-1);if(i.length!==r.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");i.forEach(a=>{a.media.port="0",a.attributes.direction="inactive"}),this.updateBundleMids()}updateCandidates(r){r===Ur.TCP?this._candidates.forEach(i=>{this._candidates.findIndex(a=>a.transport==="tcp"&&a.connectionAddress===i.connectionAddress&&a.port===i.port)===-1&&this._candidates.push(aL(aL({},i),{},{foundation:"tcpcandidate",priority:Number(i.priority)-1+"",transport:"tcp",port:Number(i.port)+90+""}))}):this._candidates=this._candidates.filter(i=>i.transport!=="tcp");for(const i of this.sessionDesc.mediaDescriptions)i.attributes.candidates=this.candidates}restartICE(r){r=tr(r),this._iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=r.iceUfrag,i.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const i=[];for(let a=0;a<r;a++)i.push((this.currentMidIndex+a+1).toString(10));return i}findAvailableMediaIndex(r,i){return this.sessionDesc.mediaDescriptions.findIndex(a=>{const l=a.media.mediaType===r&&a.media.port!=="0"&&(a.attributes.direction==="sendonly"||a.attributes.direction==="sendrecv")&&a.attributes.ssrcs.length===0;if(Dn()){if(l){const d=this.firefoxSsrcMidMap.get(i[0].ssrcId);return!(d||a.attributes.mid!=="0"&&a.attributes.mid!=="1")||!(!d||d!==a.attributes.mid)}return!1}return l})}createOrRecycleRecvMedia(r,i,a,l,d,p){const g=r._mediaStreamTrack.kind,E=this.rtpCapabilities.recv,C=this.localCapabilities.send;let S=[];if(g===at.VIDEO){var R,k;if(re("H264_PROFILE_LEVEL_ID")&&l==="h264"&&(S=E.videoCodecs.filter(oe=>{var ce,ye;return(((ce=oe.rtpMap)===null||ce===void 0?void 0:ce.encodingName.toLowerCase())||"").includes(l)&&(oe==null||(ye=oe.fmtp)===null||ye===void 0?void 0:ye.parameters["profile-level-id"])===re("H264_PROFILE_LEVEL_ID")})),!S||((R=S)===null||R===void 0?void 0:R.length)===0){const oe=C.videoCodecs.filter(ce=>{var ye;return(((ye=ce.rtpMap)===null||ye===void 0?void 0:ye.encodingName.toLowerCase())||"").includes(l)});oe.length!==0&&(S=E.videoCodecs.filter(ce=>oe.some(ye=>ye.payloadType===ce.payloadType)))}if(re("USE_PUB_RTX")){const oe=S.map(ye=>ye.payloadType.toString()),ce=E.videoCodecs.filter(ye=>{var Ne,Te;return((Ne=ye.rtpMap)===null||Ne===void 0?void 0:Ne.encodingName)==="rtx"&&oe.includes(((Te=ye.fmtp)===null||Te===void 0?void 0:Te.parameters.apt)||"")});S=[...S,...ce]}S.length===0&&(M.warning("codec ".concat(l," not included in rtpCapabilities, fallback to default payloads: ").concat((k=E.videoCodecs[0].rtpMap)===null||k===void 0?void 0:k.encodingName)),S=E.videoCodecs)}else S=E.audioCodecs.filter(oe=>{var ce;return(((ce=oe.rtpMap)===null||ce===void 0?void 0:ce.encodingName.toLowerCase())||"").includes(d)}),S.length===0&&(M.warning("codec ".concat(d," not included in rtpCapabilities, fallback to opus")),S=E.audioCodecs.filter(oe=>{var ce;return(((ce=oe.rtpMap)===null||ce===void 0?void 0:ce.encodingName.toLowerCase())||"").includes("opus")}));const F=g===at.VIDEO?E.videoExtensions:E.audioExtensions;this.currentMidIndex+=1;const W="".concat(this.currentMidIndex);let G={media:{mediaType:g,port:W0,protos:["UDP","TLS","RTP","SAVPF"],fmts:S.map(oe=>oe.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:F,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:S,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:a,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(W)}};G=this.mungRecvMediaDsec(G,r,p);const z=this.findFirstClosedMedia(g);if(z){const oe=this.sessionDesc.mediaDescriptions.indexOf(z);this.sessionDesc.mediaDescriptions[oe]=G}else this.sessionDesc.mediaDescriptions.push(G);return G}createOrRecycleSendMedia(r,i,a,l,d){const p=this.rtpCapabilities.send,g=r===at.VIDEO?p.videoCodecs:p.audioCodecs,E=r===at.VIDEO?p.videoExtensions:p.audioExtensions;this.currentMidIndex+=1;const C="".concat(this.currentMidIndex);let S={media:{mediaType:r,port:W0,protos:["UDP","TLS","RTP","SAVPF"],fmts:g.map(k=>k.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:E,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:a,rtcpFeedbackWildcards:[],payloads:g,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:l,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(C)}};S=this.mungSendMediaDesc(S,d);const R=this.findFirstClosedMedia(r);if(R){const k=this.sessionDesc.mediaDescriptions.indexOf(R);this.sessionDesc.mediaDescriptions[k]=S}else this.sessionDesc.mediaDescriptions.push(S);return S}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(r=>r.media.port!=="0").map(r=>r.attributes.mid)}mungRecvMediaDsec(r,i,a){const l=tr(r);return tC(l),Od(l,i),nC(l,i),$k(l),$0(l,a,this.localCapabilities.send),l}mungSendMediaDesc(r,i){const a=tr(r);return $0(a,i,this.localCapabilities.recv),Xc(a),a}updateRecvMedia(r,i){const a=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(a!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[a],i);this.sessionDesc.mediaDescriptions[a]=l}}bumpMid(r){this.currentMidIndex+=r}findFirstClosedMedia(r){return this.sessionDesc.mediaDescriptions.find(i=>Dn()?i.media.port==="0"&&i.media.mediaType===r:i.media.port==="0")}findPreloadMediaDesc(r){return this.sessionDesc.mediaDescriptions.find(i=>{var a,l;return((a=i.attributes)===null||a===void 0||(l=a.ssrcs[0])===null||l===void 0?void 0:l.ssrcId)===r[0].ssrcId})}getSSRC(r){var i;return(i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===r))===null||i===void 0?void 0:i.attributes.ssrcs}}var nn;function cL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function Ad(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?cL(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):cL(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}let lc=(ve((nn=class ef extends S0{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var r,i,a;return(r=(i=this.peerConnection.getReceivers()[0])===null||i===void 0||(a=i.transport)===null||a===void 0?void 0:a.state)!==null&&r!==void 0?r:null}constructor(r,i){super(r,i),w(this,"store",void 0),w(this,"peerConnection",void 0),w(this,"remoteSDP",void 0),w(this,"initialOffer",void 0),w(this,"transportEventReceiver",void 0),w(this,"statsFilter",void 0),w(this,"localCapabilities",void 0),w(this,"localCandidateCount",0),w(this,"allCandidatesReceived",!1),w(this,"selectedCandidatePairTimer",void 0),w(this,"establishPromise",void 0),w(this,"mutex",new bi("P2PConnection-mutex")),this.store=i,this.peerConnection=new RTCPeerConnection(ef.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.statsFilter=aC(this.peerConnection,re("STATS_UPDATE_INTERVAL"),void 0,Dn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const r=await this.peerConnection.createOffer();if(!r.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const i=au(r.sdp),a=await Wk(!re("USE_PUB_RTX")&&!re("USE_SUB_RTX"),re("FILTER_VIDEO_FEC"),re("FILTER_AUDIO_FEC"));return this.localCapabilities=rC(a),this.initialOffer=r,Ad(Ad({},i),{},{rtpCapabilities:a,offerSDP:r.sdp})}catch(r){throw new q($.GET_LOCAL_CONNECTION_PARAMS_FAILED,r.toString())}}async connect(r,i,a,l,d,p){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new $Y({remoteIceParameters:r,remoteDtlsParameters:i,candidates:a,remoteRTPCapabilities:l,remoteSetup:d,localCapabilities:this.localCapabilities,cname:p});const g=this.remoteSDP.toString(),E=rr.exports.parse(this.initialOffer.sdp),C=E.mediaDescriptions.find(F=>F.media.mediaType==="audio");C&&Xc(C);const S=rr.exports.print(E),R=this.logSDPExchange(S||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:S}),R==null||R(g),await this.peerConnection.setRemoteDescription({type:"answer",sdp:g});const k=this.peerConnection.getTransceivers()[0];if(k!=null&&k.receiver&&this.tryBindTransportEvents(k.receiver),re("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia();const F=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:F});const W=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(W)}}catch(g){throw new q($.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(g.toString()))}}send(r,i,a){var l=this;return Oa(function*(){const d=yield _t(l.mutex.lock("From P2PConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const p=[];r.forEach(G=>{const z=l.peerConnection.addTransceiver(G._mediaStreamTrack,{direction:"sendonly"});p.push(z),G._updateRtpTransceiver(z)}),Dn()&&re("SIMULCAST")===!0&&(yield _t(l.applySimulcastForFirefox(p,r)));const g=yield _t(l.peerConnection.createOffer()),E=l.remoteSDP.predictReceivingMids(r.length),C=l.mungSendOfferSDP(g.sdp,r,E),S=rr.exports.parse(C),R=E.map(G=>{const z=S.mediaDescriptions.find(oe=>oe.attributes.mid===G);if(!z)throw new Error("Cannot extract ssrc from mediaDescription.");return jk(z,re("USE_PUB_RTX"))});let k;try{k=yield R}catch(G){k=[],l.remoteSDP.receive(r,i,a,k);const z=l.remoteSDP.toString();throw yield _t(l.peerConnection.setLocalDescription({type:"offer",sdp:C})),yield _t(l.peerConnection.setRemoteDescription({type:"answer",sdp:z})),yield _t(l.stopSending(E,!0)),G}l.remoteSDP.receive(r,i,a,k);const F=l.remoteSDP.toString(),W=l.logSDPExchange(C,"offer","local","send");return yield _t(l.peerConnection.setLocalDescription({type:"offer",sdp:C})),yield _t(l.applySimulcastEncodings(p,r)),yield _t(l.applySendEncodings(p,r)),W==null||W(F),yield _t(l.peerConnection.setRemoteDescription({type:"answer",sdp:F})),p.map((G,z)=>{const oe=E[z];return{localSSRC:R[z],id:oe,transceiver:G}})}catch(p){throw p instanceof q?p:new q($.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(p.toString()))}finally{d()}})()}async stopSending(r,i){const a=i?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(E=>r.indexOf(E.mid)!==-1);if(l.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");l.map(E=>{var C;E.direction="inactive",(C=E.stop)===null||C===void 0||C.call(E)});const d=await this.peerConnection.createOffer(),p=this.logSDPExchange(d.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(d),this.remoteSDP.stopReceiving(r);const g=this.remoteSDP.toString();p==null||p(g),await this.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(l){throw new q($.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(l.toString()))}finally{a&&a()}}async receive(r,i,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(r," before remoteSDP created."));const{mid:d,needExchangeSDP:p}=this.remoteSDP.send(r,i,a,l);if(p){const E=this.remoteSDP.toString(),C=this.logSDPExchange(E,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:E});const S=await this.peerConnection.createAnswer(),R=this.mungReceiveAnswerSDP(S.sdp,d,r);C==null||C(R||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:R}),M.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(r," by exchanging SDP."))}else M.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(r," no need to exchange SDP."));const g=this.peerConnection.getTransceivers().find(E=>E.mid===d);if(!g)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:g.receiver.track,id:d,transceiver:g}}catch(d){throw new q($.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(d.toString()))}}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:i,needExchangeSDP:a}=this.remoteSDP.batchSend(r);if(a){const l=this.remoteSDP.toString(),d=this.logSDPExchange(l,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:l});const p=await this.peerConnection.createAnswer();d==null||d(p.sdp||""),await this.peerConnection.setLocalDescription(p),M.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))}else M.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive no need to exchange SDP."));return i.map(l=>{const d=this.peerConnection.getTransceivers().find(p=>p.mid===l);if(!d)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:d.receiver.track,id:l,transceiver:d}})}catch(i){throw new q($.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(i.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new q($.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}async muteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.mute(r);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new q($.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(i.toString()))}}async unmuteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.unmute(r);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new q($.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(i.toString()))}}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(i.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(p=>{p.direction="inactive"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.muteRemote(r);const d=this.remoteSDP.toString();l==null||l(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(i){throw new q($.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(i.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(async(p,g)=>{p.direction="sendonly"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.unmuteRemote(r);const d=this.remoteSDP.toString();l==null||l(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(i){throw new q($.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(i.toString()))}}restartICE(r){var i=this;return Oa(function*(){const a=yield _t(i.mutex.lock("From P2PConnection.restartICE"));try{if(!i.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Gn().supportPCSetConfiguration){const C=i.peerConnection.getConfiguration(),S=r===Ur.RELAY?"relay":"all";C.iceTransportPolicy!==S&&(M.debug("[".concat(i.store.clientId,"] restartICE change iceTransportPolicy from [").concat(C.iceTransportPolicy,"] to [").concat(S,"]")),C.iceTransportPolicy=S,i.peerConnection.setConfiguration(C))}else if(r===Ur.RELAY)return;r!==Ur.RELAY&&i.remoteSDP.updateCandidates(r);const l=yield _t(i.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const d=au(l.sdp),{remoteIceParameters:p}=yield d.iceParameters;i.remoteSDP.restartICE(p);const g=i.remoteSDP.toString(),E=i.logSDPExchange(l.sdp||"","offer","local","restartICE");i.store.descriptionStart(),yield _t(i.peerConnection.setLocalDescription(l)),E==null||E(g),yield _t(i.peerConnection.setRemoteDescription({type:"answer",sdp:g}))}catch(l){M.warning("[".concat(i.store.clientId,"] restart ICE failed, abort operation"),l)}finally{a()}})()}close(){var r;this.peerConnection.close(),(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const a=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(a.sdp,[i],[r]);this.remoteSDP.updateRecvMedia(r,i);const d=this.remoteSDP.toString(),p=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),p==null||p(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(a){throw new q($.EXCHANGE_SDP_FAILED,a.toString())}}async updateSendParameters(r,i){const a=this.peerConnection.getTransceivers().filter(l=>l.mid===r);a.length===1&&(this.isVP8Simulcast(i)?Dn()||await this.applySimulcastEncodings(a,[i]):await this.applySendEncodings(a,[i]))}setStatsRemoteVideoIsReady(r,i){this.statsFilter.setVideoIsReady2(r,i)}async replaceTrack(r,i){const a=this.peerConnection.getTransceivers().find(l=>l.mid===i);a&&await a.sender.replaceTrack(r._mediaStreamTrack)}async getSelectedCandidatePair(){const r=this.peerConnection.getReceivers();if(r.length>0&&r[0].transport&&r[0].transport.iceTransport&&r[0].transport.iceTransport.getSelectedCandidatePair&&r[0].transport.iceTransport.getSelectedCandidatePair()){const i=r[0].transport.iceTransport,{local:a,remote:l}=i.getSelectedCandidatePair();return{local:Ad(Ad({},Jc),{},{candidateType:a.type,protocol:a.protocol,address:a.address,port:a.port}),remote:Ad(Ad({},Jc),{},{candidateType:l.type,protocol:l.protocol,address:l.address,port:l.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,M.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,M.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},re("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const i={iceServers:[]};return r.iceServers?i.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(gp(r.turnServer.servers)?i.iceServers=r.turnServer.servers:(i.iceServers&&i.iceServers.push(...ef.turnServerConfigToIceServers(r.turnServer.servers)),re("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&r.turnServer.serversFromGateway&&i.iceServers.push(...ef.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),re("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(a=>{a.forceturn&&(i.iceTransportPolicy="relay")}))),re("ENABLE_ENCODED_TRANSFORM")&&Gn().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),i}static turnServerConfigToIceServers(r){const i=[];return r.forEach(a=>{a.security?a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(O0(a.turnServerURL),":").concat(a.tcpport,"?transport=tcp")}):(a.udpport&&!re("FORCE_TURN_TCP")&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.udpport,"?transport=udp")}),a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}))}),i}tryBindTransportEvents(r){const i=r.transport;if(i){this.transportEventReceiver=r,i.onstatechange=()=>{var l;i!=null&&i.state&&((l=this.onDTLSTransportStateChange)===null||l===void 0||l.call(this,i.state))},i.onerror=l=>{var d;(d=this.onDTLSTransportError)===null||d===void 0||d.call(this,"error"in l?l.error:l)};const a=i.iceTransport;a&&(a.onstatechange=()=>{const l=i==null?void 0:i.iceTransport.state;var d;l&&((d=this.onICETransportStateChange)===null||d===void 0||d.call(this,l))},a.getSelectedCandidatePair&&(a.onselectedcandidatepairchange=()=>{if(a.getSelectedCandidatePair()){const{local:l,remote:d}=a.getSelectedCandidatePair();M.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:l.type,protocol:l.protocol}),", remote ").concat(JSON.stringify({candidateType:d.type,protocol:d.protocol,address:d.address,port:d.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async applySendEncodings(r,i){try{if(!Gn().supportSetRtpSenderParameters||r.length!==i.length)return;for(let C=0;C<r.length;C++){const S=r[C],R=i[C];if(R&&R instanceof nr){var a,l;if(this.isVP8Simulcast(R))continue;const k={},F={};switch(R._optimizationMode){case"motion":k.degradationPreference="maintain-framerate";break;case"detail":k.degradationPreference="maintain-resolution";break;default:k.degradationPreference="balanced"}var d,p,g,E;if((a=R._encoderConfig)!==null&&a!==void 0&&a.bitrateMax&&(F.maxBitrate=1e3*((d=R._encoderConfig)===null||d===void 0?void 0:d.bitrateMax)),R._hints.includes(hr.LOW_STREAM)&&((p=R._encoderConfig)!==null&&p!==void 0&&p.frameRate&&(F.maxFramerate=ac(R._encoderConfig.frameRate)),(g=R._encoderConfig)!==null&&g!==void 0&&g.scaleResolutionDownBy&&((E=R._encoderConfig)===null||E===void 0?void 0:E.scaleResolutionDownBy)>1&&(F.scaleResolutionDownBy=R._encoderConfig.scaleResolutionDownBy)),re("DSCP_TYPE")&&Gl()){const z=re("DSCP_TYPE");["very-low","low","medium","high"].includes(z)&&(F.networkPriority=z)}const W=S.sender.getParameters(),G=(l=W.encodings)===null||l===void 0?void 0:l[0];Dn()&&!G&&(k.encodings=[F]),G&&Object.assign(G,F),Object.assign(W,k),await S.sender.setParameters(W)}}}catch{M.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(r,i,a){const l=rr.exports.parse(r);return i.forEach((d,p)=>{const g=a[p],E=l.mediaDescriptions.find(C=>C.attributes.mid===g);E&&(Od(E,d),Hk(E,d,this.store.codec))}),rr.exports.print(l)}mungReceiveAnswerSDP(r,i,a){const l=rr.exports.parse(r),d=l.mediaDescriptions.find(p=>p.attributes.mid===i);return d&&a===at.AUDIO&&d.media.mediaType==="audio"&&Xc(d),rr.exports.print(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,i,a)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,i,a)},this.statsFilter.onSelectedLocalCandidateChanged=(r,i)=>{var a;(a=this.onSelectedLocalCandidateChanged)===null||a===void 0||a.call(this,r,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,i)=>{var a;(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0||a.call(this,r,i)},this.statsFilter.onFirstVideoDecodedTimeout=r=>{var i;(i=this.onFirstVideoDecodedTimeout)===null||i===void 0||i.call(this,r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(r,i){if(r.length===i.length)for(let g=0;g<r.length;g++){var a,l,d,p;const E=r[g],C=i[g];if(C instanceof nr&&!C._hints.includes(hr.LOW_STREAM)&&(a=C._encoderConfig)!==null&&a!==void 0&&a.bitrateMax&&((l=C._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(d=C._scalabiltyMode)!==null&&d!==void 0&&d.numSpatialLayers&&((p=C._scalabiltyMode)===null||p===void 0?void 0:p.numSpatialLayers)>1&&this.store.codec==="vp8"){const S={},R={high:1e3*(C._encoderConfig.bitrateMax-50),medium:5e4};S.encodings=[{rid:"m",active:!0,maxBitrate:R.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:R.high}];const k=E.sender.getParameters();await E.sender.setParameters(Object.assign(k,S))}}}async applySimulcastEncodings(r,i){if(!Dn()&&r.length===i.length)for(let a=0;a<r.length;a++){const l=i[a];if(l instanceof nr&&this.isVP8Simulcast(l)){const d=r[a],p={},g={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};p.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:g.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:g.medium,scaleResolutionDownBy:4}];const E=d.sender.getParameters();await d.sender.setParameters(Object.assign(E,p))}}}isVP8Simulcast(r){var i,a,l,d;return!!(r instanceof nr&&re("SIMULCAST")&&this.store.codec==="vp8"&&!r._hints.includes(hr.LOW_STREAM)&&(i=r._encoderConfig)!==null&&i!==void 0&&i.bitrateMax&&((a=r._encoderConfig)===null||a===void 0?void 0:a.bitrateMax)>200&&(l=r._scalabiltyMode)!==null&&l!==void 0&&l.numSpatialLayers&&((d=r._scalabiltyMode)===null||d===void 0?void 0:d.numSpatialLayers)>1)}logSDPExchange(r,i,a,l){if(re("SDP_LOGGING"))return M.upload("[".concat(this.store.clientId,"] exchanging ").concat(a," ").concat(i," SDP during P2PConnection.").concat(l,`
`),r),i==="offer"?d=>{this.logSDPExchange(d,"answer",a==="local"?"remote":"local",l)}:void 0}async getRemoteSSRC(r){if(!this.remoteSDP)return;const i=this.remoteSDP.getSSRC(r);return i==null?void 0:i[0].ssrcId}setConfiguration(r){if(Gn().supportPCSetConfiguration){const i=ef.resolvePCConfiguration(r);this.peerConnection.setConfiguration(i)}}}).prototype,"connect",[ra],Object.getOwnPropertyDescriptor(nn.prototype,"connect"),nn.prototype),ve(nn.prototype,"receive",[ra],Object.getOwnPropertyDescriptor(nn.prototype,"receive"),nn.prototype),ve(nn.prototype,"batchReceive",[ra],Object.getOwnPropertyDescriptor(nn.prototype,"batchReceive"),nn.prototype),ve(nn.prototype,"stopReceiving",[ra],Object.getOwnPropertyDescriptor(nn.prototype,"stopReceiving"),nn.prototype),ve(nn.prototype,"muteRemote",[ra],Object.getOwnPropertyDescriptor(nn.prototype,"muteRemote"),nn.prototype),ve(nn.prototype,"unmuteRemote",[ra],Object.getOwnPropertyDescriptor(nn.prototype,"unmuteRemote"),nn.prototype),ve(nn.prototype,"muteLocal",[ra],Object.getOwnPropertyDescriptor(nn.prototype,"muteLocal"),nn.prototype),ve(nn.prototype,"unmuteLocal",[ra],Object.getOwnPropertyDescriptor(nn.prototype,"unmuteLocal"),nn.prototype),ve(nn.prototype,"close",[ra],Object.getOwnPropertyDescriptor(nn.prototype,"close"),nn.prototype),ve(nn.prototype,"updateEncoderConfig",[ra],Object.getOwnPropertyDescriptor(nn.prototype,"updateEncoderConfig"),nn.prototype),ve(nn.prototype,"updateSendParameters",[ra],Object.getOwnPropertyDescriptor(nn.prototype,"updateSendParameters"),nn.prototype),ve(nn.prototype,"replaceTrack",[ra],Object.getOwnPropertyDescriptor(nn.prototype,"replaceTrack"),nn.prototype),ve(nn.prototype,"getRemoteSSRC",[ra],Object.getOwnPropertyDescriptor(nn.prototype,"getRemoteSSRC"),nn.prototype),nn);function ra(n,r,i){const a=n[r];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,d=await l.lock("From P2PConnection.".concat(r));try{for(var p=arguments.length,g=new Array(p),E=0;E<p;E++)g[E]=arguments[E];return await a.apply(this,g)}finally{d()}},i}function lL(n,r){let i=document.createElement("video"),a=document.createElement("canvas");i.setAttribute("style","display:none"),a.setAttribute("style","display:none"),i.setAttribute("muted",""),i.muted=!0,i.setAttribute("autoplay",""),i.autoplay=!0,i.setAttribute("playsinline",""),a.width=ac(r.width),a.height=ac(r.height);const l=ac(r.framerate||15);document.body.append(i),document.body.append(a);let d=n._mediaStreamTrack;i.srcObject=new MediaStream([d]),i.play();const p=a.getContext("2d");if(!p)throw new q($.UNEXPECTED_ERROR,"can not get canvas context");const g=Gn(),E=a.captureStream(g.supportRequestFrame?0:l).getVideoTracks()[0],C=Px(()=>(()=>{if(i.paused&&i.play(),i.videoHeight>2&&i.videoWidth>2){const R=i.videoWidth,k=i.videoHeight/R,F=a.width*k;Math.abs(F-a.height)>=2&&(M.debug("adjust low stream resolution","".concat(a.width,"x").concat(a.height," -> ").concat(a.width,"x").concat(F)),a.height=F)}p.drawImage(i,0,0,a.width,a.height),E.requestFrame&&E.requestFrame(),d!==n._mediaStreamTrack&&(d=n._mediaStreamTrack,i.srcObject=new MediaStream([d]))})(),l),S=E.stop;return E.stop=()=>{S.call(E),C(),i&&(i.remove(),i=null),a&&(a.width=0,a.remove(),a=null),M.debug("clean low stream renderer")},E}var uL,dL,hL,pL,ia,fL,mL,gL,vL,EL,_L,hi;function SL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function G0(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?SL(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):SL(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}class yL extends Ox{getUserId(){return this._userId}constructor(r,i,a,l){super(r,"track-".concat(r.kind,"-").concat(i,"-").concat(l.clientId,"_").concat(pn(5,""))),w(this,"_userId",void 0),w(this,"_uintId",void 0),w(this,"_isDestroyed",!1),w(this,"store",void 0),w(this,"processor",void 0),w(this,"processorContext",void 0),this._userId=i,this._uintId=a,this.store=l}_updateOriginMediaStreamTrack(r){this._originMediaStreamTrack=r,this._mediaStreamTrack=r,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,M.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let z0=(uL=He({argsMap:(n,r,i)=>[n.getTrackId(),typeof r=="string"?r:r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",i]}),dL=He({argsMap:n=>[n.getTrackId()]}),hL=He({argsMap:(n,r)=>[n.getTrackId(),r.name]}),pL=He({argsMap:n=>[n.getTrackId()]}),ve((ia=class extends yL{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Yr.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(n,r,i,a){super(n,r,i,a),w(this,"_videoVisibleTimer",null),w(this,"_previousVideoVisibleStatus",void 0),w(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),w(this,"trackMediaType","video"),w(this,"_videoWidth",void 0),w(this,"_videoHeight",void 0),w(this,"_player",void 0),w(this,"processorDestination",void 0),w(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new Hx(this.getTrackId(),"remote"),this.processorDestination=new $x(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return Sp(()=>{M.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),wa(this,Xe.GET_STATS)||G0({},ax)}play(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof n=="string"){const a=document.getElementById(n);a?n=a:(M.warning("[".concat(this.getTrackId(),'] can not find "#').concat(n,'" element, use document.body')),n=document.body)}M.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(r));const i=G0(G0({fit:"cover"},r),{},{trackId:this.getTrackId(),element:n});this._player?this._player.updateConfig(i):(n instanceof HTMLVideoElement?this._player=new Ly(i):this._player=new TD(i),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(gd.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const a=this.getVideoElementVisibleStatus();this.safeEmit(gd.VIDEO_ELEMENT_VISIBLE_STATUS,a)}catch{}},re("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,M.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){VP(this._originMediaStreamTrack).then(n=>{let[r,i]=n;this._videoHeight=i,this._videoWidth=r}).catch(N0)}_updatePlayerSource(){M.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var n,r;const i=this==null||(n=this._player)===null||n===void 0?void 0:n.getContainerElement(),a={track:this,element:this==null||(r=this._player)===null||r===void 0?void 0:r.getVideoElement(),slot:i==null?void 0:i.parentElement},{element:l,slot:d}=a;if(this.isPlaying&&l instanceof HTMLVideoElement&&d instanceof HTMLElement){const p=rk.checkOneElementVisible(l),g=Object.assign({},p);if(g.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=g.visible;const E=ke.reportApiInvoke(null,{tag:Tn.TRACER,name:Qn.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});g.visible?E.onSuccess("Video is visible"):E.onSuccess("Invisible because of ".concat(g.reason))}return g}return}catch(i){throw new q($.GET_VIDEO_ELEMENT_VISIBLE_ERROR,i.message)}}pipe(n){if(this.processor===n)return n;if(n._source)throw new q($.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),n}unpipe(){if(!this.processor)return;const n=this.processor;this.processor._source=void 0,this.processor=void 0,n.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Jr.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Jr.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}}).prototype,"play",[uL],Object.getOwnPropertyDescriptor(ia.prototype,"play"),ia.prototype),ve(ia.prototype,"stop",[dL],Object.getOwnPropertyDescriptor(ia.prototype,"stop"),ia.prototype),ve(ia.prototype,"pipe",[hL],Object.getOwnPropertyDescriptor(ia.prototype,"pipe"),ia.prototype),ve(ia.prototype,"unpipe",[pL],Object.getOwnPropertyDescriptor(ia.prototype,"unpipe"),ia.prototype),ia),K0=(fL=He({argsMap:(n,r)=>[n.getTrackId(),r],throttleTime:300}),mL=He({argsMap:(n,r)=>[n.getTrackId(),r]}),gL=He({argsMap:n=>[n.getTrackId()]}),vL=He({argsMap:n=>[n.getTrackId()]}),EL=He({argsMap:(n,r)=>[n.getTrackId(),r.name]}),_L=He({argsMap:n=>[n.getTrackId()]}),ve((hi=class extends yL{get isPlaying(){return this._useAudioElement?fo.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(n,r,i,a){super(n,r,i,a),w(this,"trackMediaType","audio"),w(this,"_source",void 0),w(this,"_useAudioElement",!0),w(this,"_volume",100),w(this,"processorContext",void 0),w(this,"processorDestination",void 0),w(this,"_played",!1),w(this,"_bypassWebAudio",!1),re("DISABLE_WEBAUDIO")?(this._source=new yy,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new Ey(n,!0),re("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(qi.RECEIVE_TRACK_BUFFER,()=>{this.safeEmit(gd.FIRST_FRAME_DECODED)}),this.processorContext=new Gx(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new Wx(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(qi.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!n)return this._source.removeAllListeners(qi.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(r),this._source.removeAllListeners(qi.ON_AUDIO_BUFFER),this._source.on(qi.ON_AUDIO_BUFFER,i=>n(i))}setVolume(n){this._volume=n,this._useAudioElement?fo.setVolume(this.getTrackId(),n):this._source.setVolume(n/100)}async setPlaybackDevice(n){if(!this._useAudioElement)throw new q($.NOT_SUPPORTED,"your browser does not support setting the audio output device");await fo.setSinkID(this.getTrackId(),n)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Sp(()=>{M.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),wa(this,Xe.GET_STATS)||G0({},ox)}play(){M.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(M.debug("[".concat(this.getTrackId(),"] use audio element to play")),fo.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){M.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?fo.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];M.debug("[".concat(this.getTrackId(),"] update player source track")),n&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&fo.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(n){if(this._bypassWebAudio)throw new q($.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===n)return n;if(n._source)throw new q($.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),n}unpipe(){var n;if(this._bypassWebAudio)throw new q($.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const r=this.processor;(n=this._source.processSourceNode)===null||n===void 0||n.disconnect(),this.processor._source=!1,this.processor=void 0,r.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Jr.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(n)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(Jr.ON_NODE,n=>{this._source.processedNode=n;const r=!n;this._useAudioElement!==r&&(this._played?(this.stop(),this._useAudioElement=r,this.play()):this._useAudioElement=r)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Jr.ON_TRACK),this.processorDestination.removeAllListeners(Jr.ON_NODE)}}).prototype,"setVolume",[fL],Object.getOwnPropertyDescriptor(hi.prototype,"setVolume"),hi.prototype),ve(hi.prototype,"setPlaybackDevice",[mL],Object.getOwnPropertyDescriptor(hi.prototype,"setPlaybackDevice"),hi.prototype),ve(hi.prototype,"play",[gL],Object.getOwnPropertyDescriptor(hi.prototype,"play"),hi.prototype),ve(hi.prototype,"stop",[vL],Object.getOwnPropertyDescriptor(hi.prototype,"stop"),hi.prototype),ve(hi.prototype,"pipe",[EL],Object.getOwnPropertyDescriptor(hi.prototype,"pipe"),hi.prototype),ve(hi.prototype,"unpipe",[_L],Object.getOwnPropertyDescriptor(hi.prototype,"unpipe"),hi.prototype),hi);function CL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function TL(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?CL(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):CL(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}class HY extends Rn{constructor(){super(),w(this,"uplinkStatsUploadInterval",void 0),w(this,"uplinkRelatedStatsUploadInterval",void 0),w(this,"uplinkDenoiserStatsUploadInterval",void 0),w(this,"transportStatsUploadInterval",void 0),w(this,"uplinkExtensionStatsUploadInterval",void 0),w(this,"downlinkExtensionStatsUploadInterval",void 0),w(this,"extensionUsageStatsUploadInterval",void 0),w(this,"downlinkStatsUploadInterval",void 0),w(this,"downlinkRelatedStatsUploadInterval",void 0),w(this,"lastStats",void 0),w(this,"uploadUnplinkStarted",!1),w(this,"uploadDownlinkStarted",!1),w(this,"uploadTransportStarted",!1),w(this,"uploadExtensionUsageStarted",!1),w(this,"requestStats",void 0),w(this,"requestLocalMedia",void 0),w(this,"requestRemoteMedia",void 0),w(this,"requestAllTracks",void 0),w(this,"requestVideoIsReady",void 0),w(this,"requestUpload",void 0)}startUploadTransportStats(){this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval(()=>{var r;const i=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);i&&this.uploadTransportStats(i)},1e3))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval);const r=new Map;this.extensionUsageStatsUploadInterval=window.setInterval(async()=>{var i,a,l;const d=Date.now(),p={connectionInterval:re("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:d};let g=[];const E=((i=this.requestAllTracks)===null||i===void 0?void 0:i.call(this))||[];for(const k of E)!k.muted&&k.enabled&&(g=g.concat(await k.getProcessorUsage()));const C=((a=this.requestRemoteMedia)===null||a===void 0?void 0:a.call(this))||[];for(const[k,F]of C)F.has(at.VIDEO)&&k.videoTrack&&(g=g.concat(await k.videoTrack.getProcessorUsage())),F.has(at.AUDIO)&&k.audioTrack&&(g=g.concat(await k.audioTrack.getProcessorUsage()));if(g.length===0)return;p.details=function(k,F){const W={};for(const{id:ce,value:ye,level:Ne,direction:Te}of k){var G;const be=(G=F.get(ce))!==null&&G!==void 0?G:0,_e=ye===2?be+re("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:be;var z,oe;F.set(ce,_e),W[ce]?(ye===2&&(W[ce].value=ye),Ne>W[ce].level&&(W[ce].level=Ne),Te==="remote"&&(W[ce].remoteUidCount+=1),W[ce].totalTs=(z=F.get(ce))!==null&&z!==void 0?z:0):W[ce]={value:ye,level:Ne,remoteUidCount:Te==="local"?0:1,totalTs:(oe=F.get(ce))!==null&&oe!==void 0?oe:0}}return Object.keys(W).map(ce=>{const{level:ye,value:Ne,totalTs:Te}=W[ce];return{id:ce,level:ye,value:Ne,totalTs:Te}})}(g,r);const S=Date.now(),R=S>d?S:d+1;(l=this.requestUpload)===null||l===void 0||l.call(this,ho.EXTENSION_USAGE_STATS,{usageStats:p,sendTs:R})},re("EXTENSION_USAGE_UPLOAD_INTERVAL"))}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var r;const i=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);i&&(this.uploadUplinkStats(i),this.lastStats=i)},3e3),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var r;const i=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);i&&this.uploadRelatedUplinkStats(i,this.lastStats),this.lastStats=i},1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval(()=>{var r;const i=(r=this.requestAllTracks)===null||r===void 0?void 0:r.call(this);i&&this.uploadDenoiserStats(i)},2e3),this.uplinkExtensionStatsUploadInterval&&window.clearInterval(this.uplinkExtensionStatsUploadInterval),this.uplinkExtensionStatsUploadInterval=window.setInterval(()=>{var r;const i=(r=this.requestAllTracks)===null||r===void 0?void 0:r.call(this);i&&this.uploadExtensionStats(i)},2e3))}uploadTransportStats(r){ns(()=>{var i;(i=this.requestUpload)===null||i===void 0||i.call(this,ho.TRANSPORT_STATS,function(a){const l={connectionType:100,googRtt:a.rtt};if(a.selectedCandidatePair.localCandidate.candidateType==="relay"){const d=a.selectedCandidatePair.localCandidate.relayProtocol;d==="udp"&&(l.connectionType=101),d==="tcp"&&(l.connectionType=103),d==="tls"&&(l.connectionType=104)}return l}(r))})}uploadUplinkStats(r){var i;(((i=this.requestLocalMedia)===null||i===void 0?void 0:i.call(this))||[]).forEach(a=>{let[l,{track:d,ssrcs:p}]=a;switch(l){case Pe.LocalVideoLowTrack:case Pe.LocalVideoTrack:{const g=function(S,R,k){var F;const W=R.videoSend.find(z=>z.ssrc===S);if(!W)return null;const G={id:pn(10,""),timestamp:new Date(R.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:W.ssrc.toString()};switch(G.A_vstd=k._originMediaStreamTrack&&!k._originMediaStreamTrack.enabled||k._mediaStreamTrack&&!k._mediaStreamTrack.enabled?"1":"0",W.sentFrame&&(G.A_fhs=W.sentFrame.height.toString(),G.A_frs=W.sentFrame.frameRate.toString(),G.A_fws=W.sentFrame.width.toString()),W.adaptionChangeReason){case"none":G.A_ac="0";break;case"cpu":G.A_ac="1";break;case"bandwidth":G.A_ac="2";break;case"other":G.A_ac="3"}return G.A_lvps=ZS[k._player?k._player.videoElementStatus:"uninit"].toString(),G.A_nr=(F=W.nacksCount)===null||F===void 0?void 0:F.toString(),W.avgEncodeMs&&(G.A_aem=W.avgEncodeMs.toFixed(0).toString()),G}(p[0].ssrcId,r,d),E=l===Pe.LocalVideoTrack?function(S,R,k){var F,W,G,z,oe,ce,ye,Ne;const Te=R.videoSend.find($e=>$e.ssrc===S);if(!Te)return null;const be={id:pn(10,""),timestamp:new Date(R.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:Te.ssrc.toString()},_e=(F=(W=(G=Te.inputFrame)===null||G===void 0?void 0:G.height)!==null&&W!==void 0?W:k==null?void 0:k._videoHeight)!==null&&F!==void 0?F:0,Ie=(z=(oe=(ce=Te.inputFrame)===null||ce===void 0?void 0:ce.width)!==null&&oe!==void 0?oe:k==null?void 0:k._videoWidth)!==null&&z!==void 0?z:0,Bt=(ye=(Ne=Te.inputFrame)===null||Ne===void 0?void 0:Ne.frameRate)!==null&&ye!==void 0?ye:0;return _e&&(be.A_fhi=_e+""),Ie&&(be.A_fwi=Ie+""),Bt&&(be.A_fri=Bt+""),be}(p[0].ssrcId,r,d):null;g&&ns(()=>{var S;return(S=this.requestUpload)===null||S===void 0?void 0:S.call(this,ho.PUBLISH_STATS,{stream_type:l===Pe.LocalVideoLowTrack?"low":"high",stats:TL(TL({},g),E)})});const C=function(S){const R={id:"bweforvideo",timestamp:new Date(S.timestamp).toISOString(),type:"VideoBwe"};return S.bitrate.retransmit&&(R.A_rb=S.bitrate.retransmit.toString()),S.bitrate.targetEncoded&&(R.A_teb=S.bitrate.targetEncoded.toString()),R.A_aeb=S.bitrate.actualEncoded.toString(),R.A_tb=S.bitrate.transmit.toString(),S.sendBandwidth!==void 0&&(R.A_asb=S.sendBandwidth.toString()),R}(r);C&&setTimeout(()=>{var S;return(S=this.requestUpload)===null||S===void 0?void 0:S.call(this,ho.PUBLISH_STATS,{stream_type:l===Pe.LocalVideoLowTrack?"low":"high",stats:C})},1e3);break}case Pe.LocalAudioTrack:{const g=function(E,C,S){const R=C.audioSend.find(F=>F.ssrc===E);if(!R)return null;const k={id:pn(10,""),timestamp:new Date(C.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:R.ssrc.toString()};return k.A_astd=S._originMediaStreamTrack&&!S._originMediaStreamTrack.enabled||S._mediaStreamTrack&&!S._mediaStreamTrack.enabled?"1":"0",R.inputLevel?k.A_ail=Math.round(100*R.inputLevel).toString():k.A_ail=Math.round(100*S._source.getAccurateVolumeLevel()).toString(),k.A_apil=Math.round(100*S._source.getAccurateVolumeLevel()).toString(),R.aecReturnLoss&&(k.A_ecrl=Math.round(R.aecReturnLoss).toString()),R.aecReturnLossEnhancement&&(k.A_ecrle=Math.round(R.aecReturnLossEnhancement).toString()),k}(p[0].ssrcId,r,d);g&&ns(()=>{var E;return(E=this.requestUpload)===null||E===void 0?void 0:E.call(this,ho.PUBLISH_STATS,{stream_type:"high",stats:g})});break}}})}uploadRelatedUplinkStats(r,i){var a;(((a=this.requestLocalMedia)===null||a===void 0?void 0:a.call(this))||[]).filter(l=>{let[d]=l;return d===Pe.LocalVideoLowTrack||d===Pe.LocalVideoTrack}).forEach(l=>{let[d,{ssrcs:p}]=l;const g=function(E,C){const S=C.videoSend.find(R=>R.ssrc===E);return S?{mediaType:"video",isVideoMute:!1,frameRateInput:S.inputFrame&&S.inputFrame.frameRate.toString(),frameRateSent:S.sentFrame&&S.sentFrame.frameRate.toString(),googRtt:S.rttMs.toString(),qpSumPerFrame:Math.floor(S.qpSumPerFrame).toString()}:null}(p[0].ssrcId,r);g&&ns(()=>{var E;(E=this.requestUpload)===null||E===void 0||E.call(this,ho.PUBLISH_RELATED_STATS,{stream_type:d===Pe.LocalVideoLowTrack?"low":"high",stats:g})})})}uploadDenoiserStats(r){for(let d=0;d<r.length;d++){const p=r[d];if(p instanceof I0){var i,a,l;const g=(i=(a=p._external).getDenoiserStats)===null||i===void 0?void 0:i.call(a);return void(g&&((l=this.requestUpload)===null||l===void 0||l.call(this,ho.DENOISER_STATS,g)))}}}uploadExtensionStats(r){for(let i=0;i<r.length;i++)r[i].getProcessorStats().forEach(a=>{var l;(l=this.requestUpload)===null||l===void 0||l.call(this,a.type,a.stats)})}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}startUploadDownlinkStats(){if(this.uploadDownlinkStarted)return;let r;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);let i=!1;this.downlinkStatsUploadInterval=window.setInterval(()=>{var a;const l=(a=this.requestStats)===null||a===void 0?void 0:a.call(this);l&&(this.uploadDownlinkStats(l,i,r),r=l),i=!i},3e3),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var a;const l=(a=this.requestStats)===null||a===void 0?void 0:a.call(this);l&&(this.uploadRelatedDownlinkStats(l,this.lastStats),this.lastStats=l)},1e3),this.downlinkExtensionStatsUploadInterval&&window.clearInterval(this.downlinkExtensionStatsUploadInterval),this.downlinkExtensionStatsUploadInterval=window.setInterval(()=>{var a;const l=(a=this.requestRemoteMedia)===null||a===void 0?void 0:a.call(this);l&&this.uploadDownlinkExtensionStats(l)},2e3)}uploadDownlinkStats(r,i,a){var l;(((l=this.requestRemoteMedia)===null||l===void 0?void 0:l.call(this))||[]).forEach(d=>{let[p,g]=d;if(g.has(at.VIDEO)&&p.videoTrack){const E=p.videoTrack?function(C,S,R,k,F){const W=S.videoRecv.find(ce=>ce.ssrc===C);if(!W)return null;const G={id:pn(10,""),timestamp:new Date(S.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:W.ssrc.toString()};var z,oe;if(G.bytesReceived=W.bytes.toString(),G.packetsLost=W.packetsLost.toString(),G.packetsReceived=W.packets.toString(),W.framesRateFirefox&&(G.A_frr=W.framesRateFirefox.toString()),W.receivedFrame?(G.A_frr=W.receivedFrame.frameRate.toString(),G.A_fhr=W.receivedFrame.height.toString(),G.A_fwr=W.receivedFrame.width.toString()):(G.A_fhr=(z=k._videoHeight)===null||z===void 0?void 0:z.toString(),G.A_fwr=(oe=k._videoWidth)===null||oe===void 0?void 0:oe.toString()),G.A_frd=W.decodeFrameRate.toString(),W.outputFrame&&(G.A_fro=W.outputFrame.frameRate.toString()),W.jitterBufferMs!==void 0&&(G.A_jbm=Math.floor(W.jitterBufferMs).toString()),W.currentDelayMs!==void 0&&(G.A_cdm=Math.floor(W.currentDelayMs).toString()),G.A_fs=W.firsCount.toString(),G.A_ns=W.nacksCount.toString(),G.A_ps=W.plisCount.toString(),k&&(G.A_vrtd=k._originMediaStreamTrack.enabled&&k._mediaStreamTrack.enabled?"0":"1"),k._player&&k._player.freezeTimeCounterList.length>0&&(G.A_vrft=Math.round(k._player.freezeTimeCounterList.splice(0,1)[0]).toString()),F&&k._player&&oc.visibility==="visible"){const ce=Math.min(6e3,k._player.renderFreezeAccTime);G.A_vrrft=Math.round(ce).toString(),k._player.renderFreezeAccTime=Math.max(0,k._player.renderFreezeAccTime-ce)}if(G.A_rvps=ZS[k._player?k._player.videoElementStatus:"uninit"].toString(),R){const ce=R.videoRecv.find(ye=>ye.ssrc===C);if(ce&&W.totalInterFrameDelay!==void 0&&W.totalSquaredInterFrameDelay!==void 0&&ce.totalInterFrameDelay!==void 0&&ce.totalSquaredInterFrameDelay!==void 0){const ye=W.totalInterFrameDelay-ce.totalInterFrameDelay,Ne=W.totalSquaredInterFrameDelay-ce.totalSquaredInterFrameDelay,Te=W.framesDecodeCount-ce.framesDecodeCount,be=ye/Te*1e3,_e=Math.round(1e3*Math.sqrt((Ne-Math.pow(ye,2)/Te)/Te));!isNaN(_e)&&be+_e>Math.max(3*be,be+150)&&(G.A_ifdsd=_e.toString())}}return G}(p._videoSSRC,r,a,p.videoTrack,i):void 0;E&&ns(()=>{var C;return(C=this.requestUpload)===null||C===void 0?void 0:C.call(this,ho.SUBSCRIBE_STATS,{stream_id:p.uid,stats:E})})}if(g.has(at.AUDIO)&&p.audioTrack){const E=p.audioTrack?function(C,S,R,k){const F=S.audioRecv.find(G=>G.ssrc===C);if(!F)return null;const W={id:pn(10,""),timestamp:new Date(S.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:F.ssrc.toString()};if(W.bytesReceived=F.bytes.toString(),W.packetsLost=F.packetsLost.toString(),W.packetsReceived=F.packets.toString(),F.outputLevel?W.A_aol=Math.round(100*F.outputLevel).toString():W.A_aol=Math.round(100*k._source.getAccurateVolumeLevel()).toString(),W.A_apol=Math.round(100*k._source.getAccurateVolumeLevel()).toString(),k&&(W.A_artd=k._originMediaStreamTrack.enabled&&k._mediaStreamTrack.enabled?"0":"1"),W.A_jr=F.jitterMs.toString(),W.A_jbm=Math.floor(F.jitterBufferMs).toString(),W.A_cdm=Math.floor(F.jitterBufferMs).toString(),W.A_raps=ZS[fo.getPlayerState(k.getTrackId())].toString(),R){const G=R.audioRecv.find(z=>z.ssrc===C);if(G){const z=F.concealedSamples-G.concealedSamples;z>0&&(W.A_cs=Math.round(z).toString())}}return W}(p._audioSSRC,r,a,p.audioTrack):void 0;E&&ns(()=>{var C;return(C=this.requestUpload)===null||C===void 0?void 0:C.call(this,ho.SUBSCRIBE_STATS,{stream_id:p.uid,stats:E})})}})}uploadRelatedDownlinkStats(r,i){var a;(((a=this.requestRemoteMedia)===null||a===void 0?void 0:a.call(this))||[]).forEach(l=>{let[d,p]=l;if(p.has(at.VIDEO)&&d.videoTrack){var g;const E=(d._videoSSRC&&((g=this.requestVideoIsReady)===null||g===void 0?void 0:g.call(this,d._videoSSRC))||!1)===!0,C=function(S,R,k,F,W,G){const z=k.videoRecv.find(Ne=>Ne.ssrc===S),oe=W?W.videoRecv.find(Ne=>Ne.ssrc===S):void 0;if(!z)return null;const ce=yd.isRemoteVideoFreeze(G,z,oe)&&R,ye={mediaType:"video",isVideoMute:!1,peerId:F,frameRateReceived:z.receivedFrame&&z.receivedFrame.frameRate.toString(),frameRateDecoded:z.decodedFrame&&z.decodedFrame.frameRate.toString(),isFreeze:ce,bytesReceived:z.bytes.toString(),packetsReceived:z.packets.toString(),packetsLost:z.packetsLost.toString(),qpSumPerFrame:Math.floor(z.qpSumPerFrame).toString()};return z.framesRateFirefox&&(ye.frameRateDecoded=z.framesRateFirefox.toString(),ye.frameRateReceived=z.framesRateFirefox.toString()),ye}(d._videoSSRC,E,r,d.uid,i,d.videoTrack);C&&ns(()=>{var S;(S=this.requestUpload)===null||S===void 0||S.call(this,ho.SUBSCRIBE_RELATED_STATS,{stream_id:d.uid,stats:C})})}if(p.has(at.AUDIO)&&d.audioTrack){const E=function(C,S,R,k){const F=S.audioRecv.find(G=>G.ssrc===C);if(!F)return null;const W=yd.isRemoteAudioFreeze(k);return{mediaType:"audio",isAudioMute:!1,peerId:R,googJitterReceived:F.jitterMs.toString(),isFreeze:W,bytesReceived:F.bytes.toString(),packetsReceived:F.packets.toString(),packetsLost:F.packetsLost.toString(),frameReceived:F.receivedFrames.toString(),frameDropped:F.droppedFrames.toString()}}(d._audioSSRC,r,d.uid,d.audioTrack);E&&ns(()=>{var C;(C=this.requestUpload)===null||C===void 0||C.call(this,ho.SUBSCRIBE_RELATED_STATS,{stream_id:d.uid,stats:E})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}stopUploadTransportStats(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval),this.extensionUsageStatsUploadInterval=void 0)}uploadDownlinkExtensionStats(r){r.forEach(i=>{let[a,l]=i;l.has(at.VIDEO)&&a.videoTrack&&a.videoTrack.getProcessorStats().forEach(d=>{var p;(p=this.requestUpload)===null||p===void 0||p.call(this,d.type,d.stats)}),l.has(at.AUDIO)&&a.audioTrack&&a.audioTrack.getProcessorStats().forEach(d=>{var p;(p=this.requestUpload)===null||p===void 0||p.call(this,d.type,d.stats)})})}}function bL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function RL(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?bL(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):bL(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}const IL=`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0
a=msid-semantic: WMS
a=ice-lite
m=application 9 UDP/DTLS/SCTP webrtc-datachannel
c=IN IP4 127.0.0.1
a=mid:0
`,Y0="9",sC=2e4,cC=4e4;class WY{get localCapabilities(){return tr(this._localCapabilities)}get rtpCapabilities(){return tr(this._rtpCapabilities)}get candidates(){return tr(this._candidates)}get iceParameters(){return tr(this._iceParameters)}get dtlsParameters(){return tr(this._dtlsParameters)}constructor(r){w(this,"sessionDesc",void 0),w(this,"_localCapabilities",void 0),w(this,"_rtpCapabilities",void 0),w(this,"_candidates",void 0),w(this,"_iceParameters",void 0),w(this,"_dtlsParameters",void 0),w(this,"setup",void 0),w(this,"currentMidIndex",void 0),w(this,"cname",void 0),w(this,"firefoxSsrcMidMap",new Map),r=tr(r);const{remoteIceParameters:i,remoteDtlsParameters:a,candidates:l,remoteRTPCapabilities:d,remoteSetup:p,localCapabilities:g,cname:E}=r,C=rr.exports.parse(IL);this._rtpCapabilities=d,this._candidates=l,this._iceParameters=i,this._dtlsParameters=a,this._localCapabilities=g,this.setup=p,this.cname=E;const S=this.rtpCapabilities.send;for(const R of C.mediaDescriptions){if(R.attributes.iceUfrag=i.iceUfrag,R.attributes.icePwd=i.icePwd,R.attributes.fingerprints=a.fingerprints,R.attributes.candidates=l,R.attributes.setup=p,R.media.mediaType==="application"&&(R.attributes.sctpPort="5000"),R.media.mediaType==="video"&&(R.media.fmts=S.videoCodecs.map(k=>k.payloadType.toString(10)),R.attributes.payloads=S.videoCodecs,R.attributes.extmaps=S.videoExtensions,re("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:k,ssrcGroups:F}=ta([{ssrcId:cC,rtx:re("USE_SUB_RTX")?40001:void 0}],this.cname);R.attributes.ssrcs=k,R.attributes.ssrcGroups=F}if(R.media.mediaType==="audio"&&(R.media.fmts=S.audioCodecs.map(k=>k.payloadType.toString(10)),R.attributes.payloads=S.audioCodecs,R.attributes.extmaps=S.audioExtensions,Xc(R),re("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:k,ssrcGroups:F}=ta([{ssrcId:sC}],this.cname);R.attributes.ssrcs=k,R.attributes.ssrcGroups=F}}this.sessionDesc=C,this.currentMidIndex=C.mediaDescriptions.length-1}updateRemoteRTPCapabilities(r){const i=rr.exports.parse(IL);this._rtpCapabilities=r;const a=this.rtpCapabilities.send;for(const l of i.mediaDescriptions){if(l.attributes.iceUfrag=this._iceParameters.iceUfrag,l.attributes.icePwd=this._iceParameters.icePwd,l.attributes.fingerprints=this._dtlsParameters.fingerprints,l.attributes.candidates=this._candidates,l.attributes.setup=this.setup,l.media.mediaType==="application"&&(l.attributes.sctpPort="5000"),l.media.mediaType==="video"&&(l.media.fmts=a.videoCodecs.map(d=>d.payloadType.toString(10)),l.attributes.payloads=a.videoCodecs,l.attributes.extmaps=a.videoExtensions,re("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:d,ssrcGroups:p}=ta([{ssrcId:cC,rtx:re("USE_SUB_RTX")?40001:void 0}],this.cname);l.attributes.ssrcs=d,l.attributes.ssrcGroups=p}if(l.media.mediaType==="audio"&&(l.media.fmts=a.audioCodecs.map(d=>d.payloadType.toString(10)),l.attributes.payloads=a.audioCodecs,l.attributes.extmaps=a.audioExtensions,re("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:d,ssrcGroups:p}=ta([{ssrcId:sC}],this.cname);l.attributes.ssrcs=d,l.attributes.ssrcGroups=p}}this.sessionDesc=i,this.currentMidIndex=i.mediaDescriptions.length-1}preloadRemoteMedia(r){this.rtpCapabilities;const i=this.candidates,a=this.dtlsParameters,l=this.iceParameters,d=this.rtpCapabilities.send;for(let p=1;p<r;p++){const g=2*p+sC,E=2*p+cC,{ssrcs:C,ssrcGroups:S}=ta([{ssrcId:g}],this.cname),{ssrcs:R,ssrcGroups:k}=ta([{ssrcId:E,rtx:re("USE_SUB_RTX")?E+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:Y0,protos:["UDP","TLS","RTP","SAVPF"],fmts:d.videoCodecs.map(F=>F.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:i,extmaps:d.videoExtensions,fingerprints:a.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:R,ssrcGroups:k,rtcpFeedbackWildcards:[],payloads:d.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:Y0,protos:["UDP","TLS","RTP","SAVPF"],fmts:d.audioCodecs.map(F=>F.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:i,extmaps:d.audioExtensions,fingerprints:a.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:C,ssrcGroups:S,rtcpFeedbackWildcards:[],payloads:d.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return rr.exports.print(this.sessionDesc)}send(r,i,a,l){const{ssrcs:d,ssrcGroups:p}=ta(i,this.cname,re("SYNC_GROUP")?a:void 0),g=this.findPreloadMediaDesc(d);if(g){if(Dn()&&this.firefoxSsrcMidMap.set(d[0].ssrcId,g.attributes.mid),l&&(l.twcc||l.remb)){const E=this.sessionDesc.mediaDescriptions.indexOf(g);return this.sessionDesc.mediaDescriptions[E]=this.mungSendMediaDesc(g,l),{mid:g.attributes.mid,needExchangeSDP:!0}}return{mid:g.attributes.mid,needExchangeSDP:!1}}{const E=this.findAvailableMediaIndex(r,d);let C;return E===-1||Si()||yi()||tN()||E===0&&re("USE_SUB_RTX")?(C=this.createOrRecycleSendMedia(r,d,p,"sendonly",l),this.updateBundleMids()):(C=tr(this.sessionDesc.mediaDescriptions[E]),C.attributes.direction="sendonly",C.attributes.ssrcs=d,C.attributes.ssrcGroups=p,this.sessionDesc.mediaDescriptions[E]=this.mungSendMediaDesc(C,l)),Dn()&&this.firefoxSsrcMidMap.set(d[0].ssrcId,C.attributes.mid),{mid:C.attributes.mid,needExchangeSDP:!0}}}batchSend(r){const i=r.map(d=>{let{kind:p,ssrcMsg:g,mslabel:E}=d;return this.send(p,g,E)}),a=[];let l=!1;return i.forEach(d=>{let{mid:p,needExchangeSDP:g}=d;g&&(l=!0),a.push(p)}),{mids:a,needExchangeSDP:l}}stopSending(r){const i=this.sessionDesc.mediaDescriptions.filter(a=>a.attributes.mid&&r.indexOf(a.attributes.mid)!==-1);if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");i.forEach(a=>{a.attributes.mid==="0"||Dn()||Si()||yi()?a.attributes.ssrcs=[]:(a.attributes.ssrcs=[],a.attributes.direction="inactive",a.media.port="0")}),this.updateBundleMids()}mute(r){const i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(r){const i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}muteRemote(r){const i=this.sessionDesc.mediaDescriptions.filter(a=>r.includes(a.attributes.mid||""));if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(a=>{a.attributes.direction="inactive"})}unmuteRemote(r){const i=this.sessionDesc.mediaDescriptions.filter(a=>r.includes(a.attributes.mid||""));if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(a=>{a.attributes.direction="recvonly"})}receive(r,i,a,l){r.forEach((d,p)=>{this.createOrRecycleRecvMedia(d,[],"recvonly",i,a,l[p])}),this.updateBundleMids()}stopReceiving(r){const i=this.sessionDesc.mediaDescriptions.filter(a=>r.indexOf(a.attributes.mid)!==-1);if(i.length!==r.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");i.forEach(a=>{a.media.port="0",a.attributes.direction="inactive"}),this.updateBundleMids()}updateCandidates(r){r===Ur.TCP?this._candidates.forEach(i=>{this._candidates.findIndex(a=>a.transport==="tcp"&&a.connectionAddress===i.connectionAddress&&a.port===i.port)===-1&&this._candidates.push(RL(RL({},i),{},{foundation:"tcpcandidate",priority:Number(i.priority)-1+"",transport:"tcp",port:Number(i.port)+90+""}))}):this._candidates=this._candidates.filter(i=>i.transport!=="tcp");for(const i of this.sessionDesc.mediaDescriptions)i.attributes.candidates=this.candidates}restartICE(r){r=tr(r),this._iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=r.iceUfrag,i.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const i=[];for(let a=0;a<r;a++)i.push((this.currentMidIndex+a+1).toString(10));return i}findAvailableMediaIndex(r,i){return this.sessionDesc.mediaDescriptions.findIndex(a=>{const l=a.media.mediaType===r&&a.media.port!=="0"&&(a.attributes.direction==="sendonly"||a.attributes.direction==="sendrecv")&&a.attributes.ssrcs.length===0;if(Dn()){if(l){const d=this.firefoxSsrcMidMap.get(i[0].ssrcId);return!(d||a.attributes.mid!=="0"&&a.attributes.mid!=="1")||!(!d||d!==a.attributes.mid)}return!1}return l})}createOrRecycleRecvMedia(r,i,a,l,d,p){const g=r._mediaStreamTrack.kind,E=this.rtpCapabilities.recv,C=this.localCapabilities.send;let S=[];if(g===at.VIDEO){var R,k;if(re("H264_PROFILE_LEVEL_ID")&&l==="h264"&&(S=E.videoCodecs.filter(oe=>{var ce,ye;return(((ce=oe.rtpMap)===null||ce===void 0?void 0:ce.encodingName.toLowerCase())||"").includes(l)&&(oe==null||(ye=oe.fmtp)===null||ye===void 0?void 0:ye.parameters["profile-level-id"])===re("H264_PROFILE_LEVEL_ID")})),!S||((R=S)===null||R===void 0?void 0:R.length)===0){const oe=C.videoCodecs.filter(ce=>{var ye;return(((ye=ce.rtpMap)===null||ye===void 0?void 0:ye.encodingName.toLowerCase())||"").includes(l)});oe.length!==0&&(S=E.videoCodecs.filter(ce=>oe.some(ye=>ye.payloadType===ce.payloadType)))}if(re("USE_PUB_RTX")){const oe=S.map(ye=>ye.payloadType.toString()),ce=E.videoCodecs.filter(ye=>{var Ne,Te;return((Ne=ye.rtpMap)===null||Ne===void 0?void 0:Ne.encodingName)==="rtx"&&oe.includes(((Te=ye.fmtp)===null||Te===void 0?void 0:Te.parameters.apt)||"")});S=[...S,...ce]}S.length===0&&(M.warning("codec ".concat(l," not included in rtpCapabilities, fallback to default payloads: ").concat((k=E.videoCodecs[0].rtpMap)===null||k===void 0?void 0:k.encodingName)),S=E.videoCodecs)}else S=E.audioCodecs.filter(oe=>{var ce;return(((ce=oe.rtpMap)===null||ce===void 0?void 0:ce.encodingName.toLowerCase())||"").includes(d)}),S.length===0&&(M.warning("codec ".concat(d," not included in rtpCapabilities, fallback to opus")),S=E.audioCodecs.filter(oe=>{var ce;return(((ce=oe.rtpMap)===null||ce===void 0?void 0:ce.encodingName.toLowerCase())||"").includes("opus")}));const F=g===at.VIDEO?E.videoExtensions:E.audioExtensions;this.currentMidIndex+=1;const W="".concat(this.currentMidIndex);let G={media:{mediaType:g,port:Y0,protos:["UDP","TLS","RTP","SAVPF"],fmts:S.map(oe=>oe.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:F,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:S,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:a,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(W)}};G=this.mungRecvMediaDsec(G,r,p);const z=this.findFirstClosedMedia(g);if(z){const oe=this.sessionDesc.mediaDescriptions.indexOf(z);this.sessionDesc.mediaDescriptions[oe]=G}else this.sessionDesc.mediaDescriptions.push(G);return G}createOrRecycleSendMedia(r,i,a,l,d){const p=this.rtpCapabilities.send,g=r===at.VIDEO?p.videoCodecs:p.audioCodecs,E=r===at.VIDEO?p.videoExtensions:p.audioExtensions;this.currentMidIndex+=1;const C="".concat(this.currentMidIndex);let S={media:{mediaType:r,port:Y0,protos:["UDP","TLS","RTP","SAVPF"],fmts:g.map(k=>k.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:E,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:a,rtcpFeedbackWildcards:[],payloads:g,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:l,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(C)}};S=this.mungSendMediaDesc(S,d);const R=this.findFirstClosedMedia(r);if(R){const k=this.sessionDesc.mediaDescriptions.indexOf(R);this.sessionDesc.mediaDescriptions[k]=S}else this.sessionDesc.mediaDescriptions.push(S);return S}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(r=>r.media.port!=="0").map(r=>r.attributes.mid)}mungRecvMediaDsec(r,i,a){const l=tr(r);return tC(l),Od(l,i),nC(l,i),$k(l),$0(l,a,this.localCapabilities.send),l}mungSendMediaDesc(r,i){const a=tr(r);return $0(a,i,this.localCapabilities.recv),Xc(a),a}updateRecvMedia(r,i){const a=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(a!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[a],i);this.sessionDesc.mediaDescriptions[a]=l}}bumpMid(r){this.currentMidIndex+=r}findFirstClosedMedia(r){return this.sessionDesc.mediaDescriptions.find(i=>Dn()?i.media.port==="0"&&i.media.mediaType===r:i.media.port==="0")}findPreloadMediaDesc(r){return this.sessionDesc.mediaDescriptions.find(i=>{var a,l;return((a=i.attributes)===null||a===void 0||(l=a.ssrcs[0])===null||l===void 0?void 0:l.ssrcId)===r[0].ssrcId})}getSSRC(r){var i;return(i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===r))===null||i===void 0?void 0:i.attributes.ssrcs}}var Kt;function wL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function q0(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?wL(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):wL(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}let GY=(ve((Kt=class Hg extends S0{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(r,i,a){super(r,i),w(this,"store",void 0),w(this,"peerConnection",void 0),w(this,"remoteSDP",void 0),w(this,"initialOffer",void 0),w(this,"transportEventReceiver",void 0),w(this,"statsFilter",void 0),w(this,"localCapabilities",void 0),w(this,"localCandidateCount",0),w(this,"allCandidatesReceived",!1),w(this,"establishPromise",void 0),w(this,"mutex",new bi("NVExtentionsConnection-mutex")),w(this,"rtcMedia",void 0),this.store=i,this.peerConnection=a,this.statsFilter=aC(this.peerConnection,re("STATS_UPDATE_INTERVAL"),void 0,Dn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(r){try{const i=await this.peerConnection.createOffer();if(!i.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const a=au(i.sdp),l=await Wk(!re("USE_PUB_RTX")&&!re("USE_SUB_RTX"),re("FILTER_VIDEO_FEC"),re("FILTER_AUDIO_FEC"));return this.localCapabilities=l,this.initialOffer=i,q0(q0({},a),{},{rtpCapabilities:l,offerSDP:i.sdp})}catch(i){throw new q($.GET_LOCAL_CONNECTION_PARAMS_FAILED,i.toString())}}async connect(r,i,a,l,d,p){try{if(!this.initialOffer)throw new Error("Cannot establish NVConnection without initial offer.");this.remoteSDP=new WY({remoteIceParameters:r,remoteDtlsParameters:i,candidates:a,remoteRTPCapabilities:l,remoteSetup:d,localCapabilities:rC(this.localCapabilities),cname:p});const g=this.remoteSDP.toString(),E=rr.exports.parse(this.initialOffer.sdp),C=E.mediaDescriptions.find(k=>k.media.mediaType==="audio");C&&Xc(C);const S=rr.exports.print(E),R=this.logSDPExchange(S||"","offer","local","connect");await this.peerConnection.setLocalDescription({type:"offer",sdp:S}),R==null||R(g),await this.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(g){throw new q($.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(g.toString()))}}async updateRemoteConnect(r){var i,a,l;(i=this.remoteSDP)===null||i===void 0||i.updateRemoteRTPCapabilities(r),(a=this.remoteSDP)===null||a===void 0||a.preloadRemoteMedia(2);const d=(l=this.remoteSDP)===null||l===void 0?void 0:l.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:d});const p=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(p),M.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.")}send(r,i,a){var l=this;return Oa(function*(){const d=yield _t(l.mutex.lock("From NVExtentionsConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");const p=[];r.forEach(G=>{const z=l.peerConnection.addTransceiver(G._mediaStreamTrack,{direction:"sendonly"});p.push(z)}),Dn()&&re("SIMULCAST")===!0&&(yield _t(l.applySimulcastForFirefox(p,r)));const g=yield _t(l.peerConnection.createOffer()),E=l.remoteSDP.predictReceivingMids(r.length),C=l.mungSendOfferSDP(g.sdp,r,E),S=rr.exports.parse(C),R=E.map(G=>{const z=S.mediaDescriptions.find(oe=>oe.attributes.mid===G);if(!z)throw new Error("Cannot extract ssrc from mediaDescription.");return jk(z,re("USE_PUB_RTX"))});let k;try{k=yield R}catch(G){k=[],l.remoteSDP.receive(r,i,a,k);const z=l.remoteSDP.toString();throw yield _t(l.peerConnection.setLocalDescription({type:"offer",sdp:C})),yield _t(l.peerConnection.setRemoteDescription({type:"answer",sdp:z})),yield _t(l.stopSending(E,!0)),G}l.remoteSDP.receive(r,i,a,k);const F=l.remoteSDP.toString(),W=l.logSDPExchange(C,"offer","local","send");return yield _t(l.peerConnection.setLocalDescription({type:"offer",sdp:C})),yield _t(l.applySimulcastEncodings(p,r)),yield _t(l.applySendEncodings(p,r)),W==null||W(F),yield _t(l.peerConnection.setRemoteDescription({type:"answer",sdp:F})),p.map((G,z)=>{const oe=E[z];return{localSSRC:R[z],id:oe,transceiver:G}})}catch(p){throw p instanceof q?p:new q($.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(p.toString()))}finally{d()}})()}async stopSending(r,i){const a=i?void 0:await this.mutex.lock("From NVExtentionsConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(E=>r.indexOf(E.mid)!==-1);if(l.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");l.map(E=>{var C;E.direction="inactive",(C=E.stop)===null||C===void 0||C.call(E)});const d=await this.peerConnection.createOffer(),p=this.logSDPExchange(d.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(d),this.remoteSDP.stopReceiving(r);const g=this.remoteSDP.toString();p==null||p(g),await this.peerConnection.setRemoteDescription({type:"answer",sdp:g})}catch(l){throw new q($.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(l.toString()))}finally{a&&a()}}async receive(r,i,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.receive ".concat(r," before remoteSDP created."));const{mid:d,needExchangeSDP:p}=this.remoteSDP.send(r,i,a,l);if(p){const E=this.remoteSDP.toString(),C=this.logSDPExchange(E,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:E});const S=await this.peerConnection.createAnswer(),R=this.mungReceiveAnswerSDP(S.sdp,d,r);C==null||C(R||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:R}),M.debug("[NVExtentionsConnection] receive ".concat(r," by exchanging SDP."))}else M.debug("[NVExtentionsConnection] receive ".concat(r," no need to exchange SDP."));const g=this.peerConnection.getTransceivers().find(E=>E.mid===d);if(!g)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:g.receiver.track,id:d}}catch(d){throw new q($.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(d.toString()))}}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");const{mids:i,needExchangeSDP:a}=this.remoteSDP.batchSend(r);if(a){const l=this.remoteSDP.toString(),d=this.logSDPExchange(l,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:l});const p=await this.peerConnection.createAnswer();d==null||d(p.sdp||""),await this.peerConnection.setLocalDescription(p),M.debug("[NVExtentionsConnection] batchReceive by exchanging SDP.")}else M.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");return i.map(l=>{const d=this.peerConnection.getTransceivers().find(p=>p.mid===l);if(!d)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:d.receiver.track,id:l}})}catch(i){throw new q($.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(i.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new q($.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat(i.toString()))}}async muteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.mute(r);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new q($.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat(i.toString()))}}async unmuteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.unmute(r);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new q($.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat(i.toString()))}}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(i.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(p=>{p.direction="inactive"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.muteRemote(r);const d=this.remoteSDP.toString();l==null||l(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(i){throw new q($.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(i.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(async(p,g)=>{p.direction="sendonly"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.unmuteRemote(r);const d=this.remoteSDP.toString();l==null||l(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(i){throw new q($.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat(i.toString()))}}restartICE(r){var i=this;return Oa(function*(){const a=yield _t(i.mutex.lock("From NVExtentionsConnection.restartICE"));try{if(!i.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Gn().supportPCSetConfiguration){const C=i.peerConnection.getConfiguration(),S=r===Ur.RELAY?"relay":"all";C.iceTransportPolicy!==S&&(M.debug("restartICE change iceTransportPolicy from [".concat(C.iceTransportPolicy,"] to [").concat(S,"]")),C.iceTransportPolicy=S,i.peerConnection.setConfiguration(C))}else if(r===Ur.RELAY)return;r!==Ur.RELAY&&i.remoteSDP.updateCandidates(r);const l=yield _t(i.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const d=au(l.sdp),{remoteIceParameters:p}=yield d.iceParameters;i.remoteSDP.restartICE(p);const g=i.remoteSDP.toString(),E=i.logSDPExchange(l.sdp||"","offer","local","restartICE");yield _t(i.peerConnection.setLocalDescription(l)),E==null||E(g),yield _t(i.peerConnection.setRemoteDescription({type:"answer",sdp:g}))}catch(l){M.warning("restart ICE failed, abort operation",l)}finally{a()}})()}close(){var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,i){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");const a=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(a.sdp,[i],[r]);this.remoteSDP.updateRecvMedia(r,i);const d=this.remoteSDP.toString(),p=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),p==null||p(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(a){throw new q($.EXCHANGE_SDP_FAILED,a.toString())}}async updateSendParameters(r,i){const a=this.peerConnection.getTransceivers().filter(l=>l.mid===r);a.length===1&&(this.isVP8Simulcast(i)?Dn()||await this.applySimulcastEncodings(a,[i]):await this.applySendEncodings(a,[i]))}setStatsRemoteVideoIsReady(r,i){this.statsFilter.setVideoIsReady2(r,i)}async replaceTrack(r,i){const a=this.peerConnection.getTransceivers().find(l=>l.mid===i);a&&await a.sender.replaceTrack(r._mediaStreamTrack)}getP2PConnectionParams(){var r;if((r=this.peerConnection.currentLocalDescription)===null||r===void 0||!r.sdp||!this.localCapabilities)throw new Error;return q0(q0({},au(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,M.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,M.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},re("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const i={iceServers:[]};return r.iceServers?i.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(gp(r.turnServer.servers)?i.iceServers=r.turnServer.servers:(i.iceServers&&i.iceServers.push(...Hg.turnServerConfigToIceServers(r.turnServer.servers)),re("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&r.turnServer.serversFromGateway&&i.iceServers.push(...Hg.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),re("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(a=>{a.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(r){const i=[];return r.forEach(a=>{a.security?a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(O0(a.turnServerURL),":").concat(a.tcpport,"?transport=tcp")}):(a.udpport&&!re("FORCE_TURN_TCP")&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.udpport,"?transport=udp")}),a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}))}),i}async applySendEncodings(r,i){try{if(!Gn().supportSetRtpSenderParameters||r.length!==i.length)return;for(let C=0;C<r.length;C++){const S=r[C],R=i[C];if(R&&R instanceof nr){var a,l;if(this.isVP8Simulcast(R))continue;const k={},F={};switch(R._optimizationMode){case"motion":k.degradationPreference="maintain-framerate";break;case"detail":k.degradationPreference="maintain-resolution";break;default:k.degradationPreference="balanced"}var d,p,g,E;if((a=R._encoderConfig)!==null&&a!==void 0&&a.bitrateMax&&(F.maxBitrate=1e3*((d=R._encoderConfig)===null||d===void 0?void 0:d.bitrateMax)),R._hints.includes(hr.LOW_STREAM)&&((p=R._encoderConfig)!==null&&p!==void 0&&p.frameRate&&(F.maxFramerate=ac(R._encoderConfig.frameRate)),(g=R._encoderConfig)!==null&&g!==void 0&&g.scaleResolutionDownBy&&((E=R._encoderConfig)===null||E===void 0?void 0:E.scaleResolutionDownBy)>1&&(F.scaleResolutionDownBy=R._encoderConfig.scaleResolutionDownBy)),re("DSCP_TYPE")&&Gl()){const z=re("DSCP_TYPE");["very-low","low","medium","high"].includes(z)&&(F.networkPriority=z)}const W=S.sender.getParameters(),G=(l=W.encodings)===null||l===void 0?void 0:l[0];Dn()&&!G&&(k.encodings=[F]),G&&Object.assign(G,F),Object.assign(W,k),await S.sender.setParameters(W)}}}catch{M.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(r,i,a){const l=rr.exports.parse(r);return i.forEach((d,p)=>{const g=a[p],E=l.mediaDescriptions.find(C=>C.attributes.mid===g);E&&(Od(E,d),Hk(E,d,this.store.codec))}),rr.exports.print(l)}mungReceiveAnswerSDP(r,i,a){const l=rr.exports.parse(r),d=l.mediaDescriptions.find(p=>p.attributes.mid===i);return d&&a===at.AUDIO&&d.media.mediaType==="audio"&&Xc(d),rr.exports.print(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,i,a)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,i,a)},this.statsFilter.onSelectedLocalCandidateChanged=(r,i)=>{var a;(a=this.onSelectedLocalCandidateChanged)===null||a===void 0||a.call(this,r,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,i)=>{var a;(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0||a.call(this,r,i)},this.statsFilter.onFirstVideoDecodedTimeout=r=>{var i;(i=this.onFirstVideoDecodedTimeout)===null||i===void 0||i.call(this,r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(r,i){if(r.length===i.length)for(let g=0;g<r.length;g++){var a,l,d,p;const E=r[g],C=i[g];if(C instanceof nr&&!C._hints.includes(hr.LOW_STREAM)&&(a=C._encoderConfig)!==null&&a!==void 0&&a.bitrateMax&&((l=C._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(d=C._scalabiltyMode)!==null&&d!==void 0&&d.numSpatialLayers&&((p=C._scalabiltyMode)===null||p===void 0?void 0:p.numSpatialLayers)>1&&this.store.codec==="vp8"){const S={},R={high:1e3*(C._encoderConfig.bitrateMax-50),medium:5e4};S.encodings=[{rid:"m",active:!0,maxBitrate:R.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:R.high}];const k=E.sender.getParameters();await E.sender.setParameters(Object.assign(k,S))}}}async applySimulcastEncodings(r,i){if(!Dn()&&r.length===i.length)for(let a=0;a<r.length;a++){const l=i[a];if(l instanceof nr&&this.isVP8Simulcast(l)){const d=r[a],p={},g={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};p.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:g.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:g.medium,scaleResolutionDownBy:4}];const E=d.sender.getParameters();await d.sender.setParameters(Object.assign(E,p))}}}isVP8Simulcast(r){var i,a,l,d;return!!(r instanceof nr&&re("SIMULCAST")&&this.store.codec==="vp8"&&!r._hints.includes(hr.LOW_STREAM)&&(i=r._encoderConfig)!==null&&i!==void 0&&i.bitrateMax&&((a=r._encoderConfig)===null||a===void 0?void 0:a.bitrateMax)>200&&(l=r._scalabiltyMode)!==null&&l!==void 0&&l.numSpatialLayers&&((d=r._scalabiltyMode)===null||d===void 0?void 0:d.numSpatialLayers)>1)}logSDPExchange(r,i,a,l){if(re("SDP_LOGGING"))return M.upload("exchanging ".concat(a," ").concat(i," SDP during NVExtentionsConnection.").concat(l,`
`),r),i==="offer"?d=>{this.logSDPExchange(d,"answer",a==="local"?"remote":"local",l)}:void 0}async getRemoteSSRC(r){if(!this.remoteSDP)return;const i=this.remoteSDP.getSSRC(r);return i==null?void 0:i[0].ssrcId}setConfiguration(r){if(Gn().supportPCSetConfiguration){const i=Hg.resolvePCConfiguration(r);this.peerConnection.setConfiguration(i)}}}).prototype,"connect",[Mo],Object.getOwnPropertyDescriptor(Kt.prototype,"connect"),Kt.prototype),ve(Kt.prototype,"updateRemoteConnect",[Mo],Object.getOwnPropertyDescriptor(Kt.prototype,"updateRemoteConnect"),Kt.prototype),ve(Kt.prototype,"receive",[Mo],Object.getOwnPropertyDescriptor(Kt.prototype,"receive"),Kt.prototype),ve(Kt.prototype,"batchReceive",[Mo],Object.getOwnPropertyDescriptor(Kt.prototype,"batchReceive"),Kt.prototype),ve(Kt.prototype,"stopReceiving",[Mo],Object.getOwnPropertyDescriptor(Kt.prototype,"stopReceiving"),Kt.prototype),ve(Kt.prototype,"muteRemote",[Mo],Object.getOwnPropertyDescriptor(Kt.prototype,"muteRemote"),Kt.prototype),ve(Kt.prototype,"unmuteRemote",[Mo],Object.getOwnPropertyDescriptor(Kt.prototype,"unmuteRemote"),Kt.prototype),ve(Kt.prototype,"muteLocal",[Mo],Object.getOwnPropertyDescriptor(Kt.prototype,"muteLocal"),Kt.prototype),ve(Kt.prototype,"unmuteLocal",[Mo],Object.getOwnPropertyDescriptor(Kt.prototype,"unmuteLocal"),Kt.prototype),ve(Kt.prototype,"close",[Mo],Object.getOwnPropertyDescriptor(Kt.prototype,"close"),Kt.prototype),ve(Kt.prototype,"updateEncoderConfig",[Mo],Object.getOwnPropertyDescriptor(Kt.prototype,"updateEncoderConfig"),Kt.prototype),ve(Kt.prototype,"updateSendParameters",[Mo],Object.getOwnPropertyDescriptor(Kt.prototype,"updateSendParameters"),Kt.prototype),ve(Kt.prototype,"replaceTrack",[Mo],Object.getOwnPropertyDescriptor(Kt.prototype,"replaceTrack"),Kt.prototype),ve(Kt.prototype,"getRemoteSSRC",[Mo],Object.getOwnPropertyDescriptor(Kt.prototype,"getRemoteSSRC"),Kt.prototype),Kt);function Mo(n,r,i){const a=n[r];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,d=await l.lock("From NVExtentionsConnection.".concat(r));try{for(var p=arguments.length,g=new Array(p),E=0;E<p;E++)g[E]=arguments[E];return await a.apply(this,g)}finally{d()}},i}var cn;function OL(n){var r,i,a,l=2;for(typeof Symbol<"u"&&(i=Uk,a=Symbol.iterator);l--;){if(i&&(r=n[i])!=null)return r.call(n);if(a&&(r=n[a])!=null)return new lC(r.call(n));i="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")}function lC(n){function r(i){if(Object(i)!==i)return Ae.reject(new TypeError(i+" is not an object."));var a=i.done;return Ae.resolve(i.value).then(function(l){return{value:l,done:a}})}return(lC=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(i){var a=this.s.return;return a===void 0?Ae.resolve({value:i,done:!0}):r(a.apply(this.s,arguments))},throw:function(i){var a=this.s.return;return a===void 0?Ae.reject(i):r(a.apply(this.s,arguments))}},new lC(n)}let Qc=(ve((cn=class Wg extends S0{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(r,i){super(r,i),w(this,"store",void 0),w(this,"peerConnection",void 0),w(this,"cname",void 0),w(this,"mutex",new bi("DataChannelConnection-mutex")),w(this,"dataChannel",void 0),w(this,"_p2pConnection",void 0),w(this,"establishPromise",void 0),w(this,"_nvMedia",void 0),this.store=i,this.store.dcId=this.store.dcId+1,this.peerConnection=new RTCPeerConnection(Wg.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.dataChannel=this.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),this.dataChannel.binaryType="arraybuffer",this._p2pConnection=new GY(r,i,this.peerConnection),this.bindPCEvents(),this.establishPromise=this._p2pConnection.establishPromise}async establish(){var r;const i=(r=this._nvMedia)===null||r===void 0?void 0:r.getLocalRtpCapabilities();return await this._p2pConnection.establish(i)}getP2PConnectionParams(){return this._p2pConnection.getP2PConnectionParams()}async connect(r,i,a,l,d,p){return this.cname=p,await this._p2pConnection.connect(r,i,a,l,d,p),await new Ae((g,E)=>{const C=setTimeout(()=>{this.closeSignal(),E(new q($.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(a))))},2e3);this.dataChannel.onopen=()=>{if(this.dataChannel.readyState==="open")return clearTimeout(C),void g()},this.dataChannel.onerror=S=>{this.closeSignal(),E(S)}}),{transmitter:this.dataChannel,close:this.closeSignal.bind(this)}}send(r,i,a){var l=this;return Oa(function*(){const d=yield _t(l.mutex.lock("From DataChannelConnection.send"));try{return yield*B0(OL(l._p2pConnection.send(r,i,a)),_t)}finally{d()}})()}async stopSending(r,i){return this._p2pConnection.stopSending(r,i)}async receive(r,i,a,l){return this._nvMedia?(M.debug("[DataChannelConnection] receive ".concat(r," by DataChannel.")),await this._nvMedia.reveiveByRTCMedia(r,i,this.cname)):(M.debug("[DataChannelConnection] receive ".concat(r," by WebRTC.")),await this._p2pConnection.receive(r,i,a,l))}async batchReceive(r){return[...await this._p2pConnection.batchReceive(r)]}async stopReceiving(r){return await this._p2pConnection.stopReceiving(r)}async muteRemote(r){return await this._p2pConnection.muteRemote(r)}async unmuteRemote(r){return await this._p2pConnection.unmuteRemote(r)}async muteLocal(r){return await this._p2pConnection.muteLocal(r)}async unmuteLocal(r){return await this._p2pConnection.unmuteLocal(r)}restartICE(r){var i=this;return Oa(function*(){return yield*B0(OL(i._p2pConnection.restartICE(r)),_t)})()}close(){var r;(r=this._nvMedia)===null||r===void 0||r.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)}getStats(){return this._p2pConnection.getStats()}getRemoteVideoIsReady(r){return this._p2pConnection.getRemoteVideoIsReady(r)}updateRemoteConnect(r){var i;(i=this._nvMedia)===null||i===void 0||i.setRemoteRtpCapabilities(r),this._p2pConnection.updateRemoteConnect(r)}async updateEncoderConfig(r,i){return await this._p2pConnection.updateEncoderConfig(r,i)}async updateSendParameters(r,i){return await this._p2pConnection.updateSendParameters(r,i)}setStatsRemoteVideoIsReady(r,i){this._p2pConnection.setStatsRemoteVideoIsReady(r,i)}async replaceTrack(r,i){return await this._p2pConnection.replaceTrack(r,i)}async getRemoteSSRC(r){return this._p2pConnection.getRemoteSSRC(r)}logSDPExchange(r,i,a,l){if(re("SDP_LOGGING"))return M.upload("exchanging ".concat(a," ").concat(i," SDP during DataChannelConnection.").concat(l,`
`),r),i==="offer"?d=>{this.logSDPExchange(d,"answer",a==="local"?"remote":"local",l)}:void 0}static resolvePCConfiguration(r){const i={iceServers:[]};return r.iceServers?i.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(gp(r.turnServer.servers)?i.iceServers=r.turnServer.servers:(i.iceServers&&i.iceServers.push(...Wg.turnServerConfigToIceServers(r.turnServer.servers)),re("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&r.turnServer.serversFromGateway&&i.iceServers.push(...Wg.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),re("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(a=>{a.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(r){const i=[];return r.forEach(a=>{a.security?a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(O0(a.turnServerURL),":").concat(a.tcpport,"?transport=tcp")}):(a.udpport&&!re("FORCE_TURN_TCP")&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.udpport,"?transport=udp")}),a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}))}),i}bindPCEvents(){this._p2pConnection.onICEConnectionStateChange=r=>{var i;return(i=this.onICEConnectionStateChange)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onConnectionStateChange=r=>{var i;return(i=this.onConnectionStateChange)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onDTLSTransportStateChange=r=>{var i;return(i=this.onDTLSTransportStateChange)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onDTLSTransportError=r=>{var i;return(i=this.onDTLSTransportError)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onICETransportStateChange=r=>{var i;return(i=this.onICETransportStateChange)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onFirstAudioReceived=r=>{var i;return(i=this.onFirstAudioReceived)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onFirstVideoReceived=r=>{var i;return(i=this.onFirstVideoReceived)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onFirstAudioDecoded=r=>{var i;return(i=this.onFirstAudioDecoded)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onFirstVideoDecoded=(r,i,a)=>{var l;return(l=this.onFirstVideoDecoded)===null||l===void 0?void 0:l.call(this,r,i,a)},this._p2pConnection.onFirstVideoDecodedTimeout=r=>{var i;return(i=this.onFirstVideoDecodedTimeout)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onSelectedLocalCandidateChanged=(r,i)=>{var a;return(a=this.onSelectedLocalCandidateChanged)===null||a===void 0?void 0:a.call(this,r,i)},this._p2pConnection.onSelectedRemoteCandidateChanged=(r,i)=>{var a;return(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0?void 0:a.call(this,r,i)}}closeSignal(){this.dataChannel.close(),this.peerConnection.close()}unbindConnectionEvents(r){r.onConnectionStateChange=void 0,r.onICEConnectionStateChange=void 0,r.onICETransportStateChange=void 0,r.onDTLSTransportStateChange=void 0,r.onDTLSTransportError=void 0,r.onFirstAudioDecoded=void 0,r.onFirstAudioReceived=void 0,r.onFirstVideoDecoded=void 0,r.onFirstVideoReceived=void 0,r.onSelectedLocalCandidateChanged=void 0,r.onSelectedRemoteCandidateChanged=void 0,r.onFirstVideoDecodedTimeout=void 0}setConfiguration(r){this._p2pConnection.setConfiguration(r)}}).prototype,"connect",[Na],Object.getOwnPropertyDescriptor(cn.prototype,"connect"),cn.prototype),ve(cn.prototype,"receive",[Na],Object.getOwnPropertyDescriptor(cn.prototype,"receive"),cn.prototype),ve(cn.prototype,"stopReceiving",[Na],Object.getOwnPropertyDescriptor(cn.prototype,"stopReceiving"),cn.prototype),ve(cn.prototype,"muteRemote",[Na],Object.getOwnPropertyDescriptor(cn.prototype,"muteRemote"),cn.prototype),ve(cn.prototype,"unmuteRemote",[Na],Object.getOwnPropertyDescriptor(cn.prototype,"unmuteRemote"),cn.prototype),ve(cn.prototype,"muteLocal",[Na],Object.getOwnPropertyDescriptor(cn.prototype,"muteLocal"),cn.prototype),ve(cn.prototype,"unmuteLocal",[Na],Object.getOwnPropertyDescriptor(cn.prototype,"unmuteLocal"),cn.prototype),ve(cn.prototype,"close",[Na],Object.getOwnPropertyDescriptor(cn.prototype,"close"),cn.prototype),ve(cn.prototype,"updateEncoderConfig",[Na],Object.getOwnPropertyDescriptor(cn.prototype,"updateEncoderConfig"),cn.prototype),ve(cn.prototype,"updateSendParameters",[Na],Object.getOwnPropertyDescriptor(cn.prototype,"updateSendParameters"),cn.prototype),ve(cn.prototype,"replaceTrack",[Na],Object.getOwnPropertyDescriptor(cn.prototype,"replaceTrack"),cn.prototype),ve(cn.prototype,"getRemoteSSRC",[Na],Object.getOwnPropertyDescriptor(cn.prototype,"getRemoteSSRC"),cn.prototype),cn);function Na(n,r,i){const a=n[r];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,d=await l.lock("From DataChannelConnection.".concat(r));try{for(var p=arguments.length,g=new Array(p),E=0;E<p;E++)g[E]=arguments[E];return await a.apply(this,g)}finally{d()}},i}var Lt;function AL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function Zc(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?AL(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):AL(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}function NL(n){var r,i,a,l=2;for(typeof Symbol<"u"&&(i=Uk,a=Symbol.iterator);l--;){if(i&&(r=n[i])!=null)return r.call(n);if(a&&(r=n[a])!=null)return new uC(r.call(n));i="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")}function uC(n){function r(i){if(Object(i)!==i)return Ae.reject(new TypeError(i+" is not an object."));var a=i.done;return Ae.resolve(i.value).then(function(l){return{value:l,done:a}})}return(uC=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(i){var a=this.s.return;return a===void 0?Ae.resolve({value:i,done:!0}):r(a.apply(this.s,arguments))},throw:function(i){var a=this.s.return;return a===void 0?Ae.reject(i):r(a.apply(this.s,arguments))}},new uC(n)}let zY=(ve((Lt=class extends Rn{get state(){return this._state}set state(n){const r=this._state;this._state=n,this.emit(wt.StateChange,r,this._state)}constructor(n,r){super(),w(this,"store",void 0),w(this,"statsUploader",void 0),w(this,"connection",void 0),w(this,"localTrackMap",new Map),w(this,"remoteUserMap",new Map),w(this,"pendingLocalTracks",[]),w(this,"pendingRemoteTracks",[]),w(this,"statsCollector",void 0),w(this,"isPlanB",!1),w(this,"shouldForwardP2PCreation",void 0),w(this,"iceFailedCount",0),w(this,"dtlsFailedCount",0),w(this,"mutex",new bi("P2PChannel-mutex")),w(this,"_state",pr.Disconnected),w(this,"_pcStatsUploadType",re("NEW_ICE_RESTART")?es.FIRST_CONNECTION:es.OLD_FIRST_CONNECTION),w(this,"_isInRestartIce",!1),w(this,"_isStartRestartIce",!1),w(this,"_restartStates",["disconnected","failed"]),w(this,"_restartTimer",void 0),w(this,"_isFirstConnected",!0),w(this,"handleMuteLocalTrack",async(i,a,l)=>{const d=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==pr.Connected)return void l(new q($.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const p=this.filterTobeMutedTracks(i);if(p.length===0)return void a();const g=p.find(C=>C[0]==="videoLowTrack");g&&g[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(p.map(C=>{let[,{id:S}]=C;return S}));const E=this.createMuteMessage(p);await Mn(this,wt.RequestMuteLocal,E),a()}catch(p){l(p)}finally{d()}}),w(this,"handleUnmuteLocalTrack",async(i,a,l)=>{const d=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==pr.Connected)return void l(new q($.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const p=this.filterTobeUnmutedTracks(i);if(p.length===0)return void a();const g=p.find(C=>C[0]==="videoLowTrack");if(g){const C=g[1];if(C.track._originMediaStreamTrack.stop(),Gn().supportDualStreamEncoding){const S=i._mediaStreamTrack.clone();C.track._mediaStreamTrack=S,C.track._originMediaStreamTrack=S}else{const S=lL(i,nu(this,wt.RequestLowStreamParameter));C.track._mediaStreamTrack=S,C.track._originMediaStreamTrack=S}await new Ae((S,R)=>{this.handleReplaceTrack(C.track,S,R,!0)})}await this.connection.unmuteLocal(p.map(C=>{let[,{id:S}]=C;return S}));const E=this.createUnmuteMessage(p);await Mn(this,wt.RequestUnmuteLocal,E),a()}catch(p){l(p)}finally{d()}}),w(this,"handleUpdateVideoEncoder",async(i,a,l)=>{const d=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const p=this.localTrackMap.get(Pe.LocalVideoTrack);if(!this.connection||!p||p.track!==i||this.state!==pr.Connected)return void a();const{id:g,track:E}=p;await this.connection.updateSendParameters(g,E),await this.connection.updateEncoderConfig(g,E),this.emit(wt.UpdateVideoEncoder,E),a()}catch(p){l(p)}finally{d()}}),w(this,"handleSetOptimizationMode",async(i,a,l)=>{const d=await this.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const p=this.localTrackMap.get(Pe.LocalVideoTrack);if(!this.connection||!p||p.track!==i||this.state!==pr.Connected)return;const{id:g,track:E}=p;await this.connection.updateSendParameters(g,E),a()}catch(p){l(p)}finally{d()}}),w(this,"handleReplaceTrack",async(i,a,l,d)=>{let p;M.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(i.getTrackId(),"]")),typeof d=="boolean"&&d||(p=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var g;const C=Array.from(this.localTrackMap.entries()).find(S=>{let[,{track:R}]=S;return i===R});if(!this.connection||!C||this.state!==pr.Connected)return void a();if(await((g=this.connection)===null||g===void 0?void 0:g.replaceTrack(i,C[1].id)),this.isPlanB){const S=C[1];S.id=i._mediaStreamTrack.id,this.localTrackMap.set(C[0],S)}if(C[0]===Pe.LocalVideoTrack&&Gn().supportDualStreamEncoding){const S=this.localTrackMap.get(Pe.LocalVideoLowTrack);if(S){const R=i._mediaStreamTrack.clone();S.track._originMediaStreamTrack.stop(),S.track._mediaStreamTrack=R,S.track._originMediaStreamTrack=R,await new Ae((k,F)=>{this.handleReplaceTrack(S.track,k,F,!0)})}}a()}catch(C){l(C)}finally{var E;(E=p)===null||E===void 0||E()}}),w(this,"handleGetLocalVideoStats",i=>{i(this.statsCollector.getLocalVideoTrackStats())}),w(this,"handleGetLocalAudioStats",i=>{i(this.statsCollector.getLocalAudioTrackStats())}),w(this,"handleGetRemoteVideoStats",i=>this.statsCollector.getRemoteVideoTrackStats(i.uid)[i.uid]),w(this,"handleGetRemoteAudioStats",i=>this.statsCollector.getRemoteAudioTrackStats(i.uid)[i.uid]),this.store=n,this.statsCollector=r,this.statsCollector.addP2PChannel(this),this.statsUploader=new HY,this.bindStatsUploaderEvents(),this.isPlanB=!Gn().supportUnifiedPlan||re("CHROME_FORCE_PLAN_B")&&Gl(),this.shouldForwardP2PCreation=re("FORWARD_P2P_CREATION")&&Gn().supportPCSetConfiguration,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new Qc({},this.store):this.isPlanB?new Dp({},this.store):new lc({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(n,r){var i;this.state=pr.New;const a=this.shouldForwardP2PCreation&&((i=this.connection)===null||i===void 0?void 0:i.peerConnectionState)==="closed";if(this.shouldForwardP2PCreation&&!a||(a&&this.connection&&(M.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.store.useDataChannel?new Qc(n,this.store):this.isPlanB?new Dp(n,this.store):new lc(n,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new q($.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=re("NEW_ICE_RESTART")?es.FIRST_CONNECTION:es.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(n),this.connection.establishPromise}async connect(n,r,i,a,l,d){if(!this.connection)throw new q($.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.connection instanceof Qc?this.connection.updateRemoteConnect(a):(this.store.peerConnectionStart(),await this.connection.connect(n,r,i,a,l,d),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=pr.Connected)}async preConnect(n,r,i,a,l,d){if(!this.connection)throw new q($.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.store.peerConnectionStart();const p=await this.connection.connect(n,r,i,a,l,d);return this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=pr.Connected,p}getEstablishParams(){if(this.connection instanceof Qc)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")}publish(n,r,i){var a=this;return Oa(function*(){const l=yield _t(a.mutex.lock("From P2PChannel.publish"));try{if(!a.connection||a.state!==pr.Connected){if(a.state===pr.Disconnected)throw new q($.UNEXPECTED_ERROR,"PeerConnection already disconnected.");a.throwIfTrackTypeNotMatch(n);const p=n.filter(g=>a.pendingLocalTracks.indexOf(g)===-1);return void(a.pendingLocalTracks=a.pendingLocalTracks.concat(p))}a.store.pubId=a.store.pubId+1,Qo.markPublishStart(a.store.clientId,a.store.pubId);const d=a.filterTobePublishedTracks(n,r,i);if(d.length===0)return void(yield _t(a.tryToUnmuteAudio(n)));yield*B0(NL(a.doPublish(a.connection,d)),_t)}finally{l()}})()}doPublish(n,r){var i=this;return Oa(function*(){r.forEach(C=>{let{track:S,type:R}=C;const k=Date.now();i.store.publish(S.getTrackId(),R===Pe.LocalAudioTrack?"audio":"video",k)}),i.bindLocalTrackEvents(r);const a=yield _t(n.send(r.map(C=>{let{track:S}=C;return S}),i.store.codec,i.store.audioCodec)),l=(yield _t(a.next())).value,d=i.createGatewayPublishMessage(r,l);let p;try{p=yield d}catch(C){throw a.throw(C),(C==null?void 0:C.code)===$.WS_ABORT&&r.forEach(S=>{let{track:R}=S;i.pendingLocalTracks.indexOf(R)===-1&&i.pendingLocalTracks.push(R)}),i.unbindLocalTrackEvents(r),C}const g=i.mapPubResToRemoteConfig(d,p),E=(yield _t(a.next(g))).value;r.forEach(C=>{let{type:S}=C;i.statsCollector.addLocalStats(S)}),i.assignLocalTracks(r,E),i.statsUploader.startUploadUplinkStats(),r.forEach(C=>{let{track:S,type:R}=C;const k=Date.now();i.store.publish(S.getTrackId(),R===Pe.LocalAudioTrack?"audio":"video",void 0,k)})})()}publishLowStream(n){var r=this;return Oa(function*(){if(!r.connection||r.state!==pr.Connected)return;const i=yield _t(r.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const l=r.localTrackMap.get(Pe.LocalVideoTrack);if(!l)throw new q($.UNEXPECTED_ERROR,"Could not find high stream");if(r.localTrackMap.has(Pe.LocalVideoLowTrack))throw new q($.UNEXPECTED_ERROR,"[".concat(r.store.clientId,"] Can't publish low stream when stream already publish"));const d=[{track:r.getLowVideoTrack(l.track,n),type:Pe.LocalVideoLowTrack}];if(yield*B0(NL(r.doPublish(r.connection,d)),_t),l.track.muted||!l.track.enabled){var a;const p=(a=r.localTrackMap.get(Pe.LocalVideoLowTrack))===null||a===void 0?void 0:a.id;p!==void 0&&(yield _t(r.connection.muteLocal([p])))}}finally{i()}})()}async republish(){this.pendingLocalTracks.length>0&&(M.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await ei(this,wt.RequestRePublish,this.pendingLocalTracks),this.emit(wt.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async reSubscribe(n){for(let r=this.pendingRemoteTracks.length-1;r>=0;r--){const{user:i,kind:a}=this.pendingRemoteTracks[r];(a!==at.AUDIO||i._audio_added_&&i._audioSSRC)&&(a!==at.VIDEO||i._video_added_&&i._videoSSRC)||this.pendingRemoteTracks.splice(r,1)}if(n)await ei(this,wt.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:r,kind:i}of this.pendingRemoteTracks)await this.subscribe(r,i,i===at.VIDEO?r._videoSSRC:r._audioSSRC);this.pendingRemoteTracks.forEach(r=>{let{user:i}=r;this.emit(wt.MediaReconnectEnd,i.uid)}),this.pendingRemoteTracks=[]}async unpublish(n){if(!this.connection||this.state!==pr.Connected)return void n.forEach(a=>{const l=this.pendingLocalTracks.indexOf(a);l!==-1&&this.pendingLocalTracks.splice(l,1)});const r=this.filterTobeUnpublishedTracks(n);if(r.length===0)return;const i=r.find(a=>a[0]==="videoLowTrack");return i&&i[1].track.close(),this.doUnpublish(this.connection,r)}async unpublishLowStream(){if(!this.connection||this.state!==pr.Connected)return;const n=this.localTrackMap.get(Pe.LocalVideoLowTrack);if(!n)return;n.track.close();const r=[[Pe.LocalVideoLowTrack,n]];return this.doUnpublish(this.connection,r)}async doUnpublish(n,r){const i=this.createGatewayUnpublishMessage(r);return await n.stopSending(r.map(a=>{let[,{id:l}]=a;return l})),this.withdrawLocalTracks(r),this.unbindLocalTrackEvents(r.map(a=>{let[l,{track:d}]=a;return{type:l,track:d}})),r.forEach(a=>{let[l]=a;this.statsCollector.removeLocalStats(l)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadUplinkStats(),i}async subscribe(n,r,i,a,l){var d;if(!this.connection||this.state!==pr.Connected)throw new q($.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if((d=this.remoteUserMap.get(n))!==null&&d!==void 0&&d.has(r))return;let p,g,E;if(l){const R=l.find(F=>{let{stream_type:W}=F;return W===r});if(!R)throw new q($.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(r," for user: ").concat(n.uid," because subscribe answer from gateway does not contain stream_type: ").concat(r,"."));const k=await this.connection.receive(r,R.ssrcs,String(n._uintid),R.attributes);this.connection instanceof lc&&(E=k.transceiver),p=k.track,g=k.id}else{const R=await this.connection.receive(r,[{ssrcId:i,rtx:a}],String(n._uintid),void 0);this.connection instanceof lc&&(E=R.transceiver),p=R.track,g=R.id}r===at.AUDIO?(n._audioTrack?n._audioTrack._updateOriginMediaStreamTrack(p):(n._audioTrack=new K0(p,n.uid,n._uintid,this.store),M.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(n._audioTrack.getTrackId()))),E&&n._audioTrack._updateRtpTransceiver(E),this.bindRemoteTrackEvents(n,n._audioTrack)):(n._videoTrack?n._videoTrack._updateOriginMediaStreamTrack(p):(n._videoTrack=new z0(p,n.uid,n._uintid,this.store),M.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(n._videoTrack.getTrackId()))),E&&n._videoTrack._updateRtpTransceiver(E),this.bindRemoteTrackEvents(n,n._videoTrack));const C=this.remoteUserMap.get(n);C?C.set(r,g):this.remoteUserMap.set(n,new Map([[r,g]])),this.statsCollector.addRemoteStats(n.uid),this.statsUploader.startUploadDownlinkStats();const S=this.pendingRemoteTracks.findIndex(R=>{let{user:k,kind:F}=R;return k.uid===n.uid&&r===F});S!==-1&&(this.pendingRemoteTracks.splice(S,1),this.emit(wt.MediaReconnectEnd,n.uid))}async massSubscribe(n){return this.massSubscribeNoLock(n)}async massSubscribeNoLock(n){if(!this.connection||this.state!==pr.Connected)throw new q($.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");n=n.filter(i=>{var a;let{user:l,mediaType:d}=i;return!((a=this.remoteUserMap.get(l))!==null&&a!==void 0&&a.has(d))});const r=await this.connection.batchReceive(n.map(i=>{let{user:a,mediaType:l,ssrcId:d,rtxSsrcId:p}=i;return{kind:l,ssrcMsg:[{ssrcId:d,rtx:p}],mslabel:String(a._uintid)}}));n.forEach((i,a)=>{let{user:l,mediaType:d}=i;const{track:p,id:g,transceiver:E}=r[a];d===at.AUDIO?(l._audioTrack?l._audioTrack._updateOriginMediaStreamTrack(p):(l._audioTrack=new K0(p,l.uid,l._uintid,this.store),M.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(l._audioTrack.getTrackId()))),E&&l._audioTrack._updateRtpTransceiver(E),this.bindRemoteTrackEvents(l,l._audioTrack)):(l._videoTrack?l._videoTrack._updateOriginMediaStreamTrack(p):(l._videoTrack=new z0(p,l.uid,l._uintid,this.store),M.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(l._videoTrack.getTrackId()))),E&&l._videoTrack._updateRtpTransceiver(E),this.bindRemoteTrackEvents(l,l._videoTrack));const C=this.remoteUserMap.get(l);C?C.set(d,g):this.remoteUserMap.set(l,new Map([[d,g]])),this.statsCollector.addRemoteStats(l.uid),this.statsUploader.startUploadDownlinkStats();const S=this.pendingRemoteTracks.findIndex(R=>{let{user:k,kind:F}=R;return k.uid===l.uid&&d===F});S!==-1&&(this.pendingRemoteTracks.splice(S,1),this.emit(wt.MediaReconnectEnd,l.uid))})}async unsubscribe(n,r,i){const a=this.pendingRemoteTracks.filter(p=>{let{user:g,kind:E}=p;return r!==void 0?g.uid===n.uid&&r===E:g.uid===n.uid});if(a.forEach(p=>{const g=this.pendingRemoteTracks.indexOf(p);this.pendingRemoteTracks.splice(g,1)}),this.connection&&this.state===pr.Connected||i||a.forEach(p=>{let{kind:g}=p;var E;if(g===at.AUDIO)(E=n._audioTrack)===null||E===void 0||E._destroy(),n._audioTrack=void 0;else if(g===at.VIDEO){var C;(C=n._videoTrack)===null||C===void 0||C._destroy(),n._videoTrack=void 0}}),!this.connection||this.state!==pr.Connected)return;const l=this.filterTobeUnSubscribedTracks(n,r);if(l.length===0)return;await this.connection.stopReceiving(l.map(p=>{let[,{id:g}]=p;return g}));const d=this.createUnsubscribeMessage(l);return this.withdrawRemoteTracks(l),this.remoteUserMap.size===0&&this.statsUploader.stopUploadDownlinkStats(),l.forEach(p=>{let[g,{kind:E}]=p;var C,S;if(E===at.VIDEO&&g._videoSSRC&&((C=this.connection)===null||C===void 0||C.setStatsRemoteVideoIsReady(g._videoSSRC,!1)),E===at.VIDEO)this.unbindRemoteTrackEvents(g._videoTrack),i||((S=g._videoTrack)===null||S===void 0||S._destroy(),g._videoTrack=void 0);else if(E===at.AUDIO){var R;this.unbindRemoteTrackEvents(g._audioTrack),!i&&((R=g._audioTrack)===null||R===void 0||R._destroy(),g._audioTrack=void 0)}}),d}async massUnsubscribe(n){return this.massUnsubscribeNoLock(n)}async massUnsubscribeNoLock(n){let r=[];for(const{user:l,mediaType:d}of n){const p=this.pendingRemoteTracks.filter(g=>{let{user:E,kind:C}=g;return d!==void 0?E.uid===l.uid&&d===C:E.uid===l.uid});p.forEach(g=>{const E=this.pendingRemoteTracks.indexOf(g);this.pendingRemoteTracks.splice(E,1)}),r=r.concat(p)}if(!this.connection||this.state!==pr.Connected)return void r.forEach(l=>{let{user:d,kind:p}=l;var g;if(p===at.AUDIO)(g=d._audioTrack)===null||g===void 0||g._destroy(),d._audioTrack=void 0;else if(p===at.VIDEO){var E;(E=d._videoTrack)===null||E===void 0||E._destroy(),d._videoTrack=void 0}});const i=Uc(n).call(n,(l,d)=>{let{user:p,mediaType:g}=d;const E=this.filterTobeUnSubscribedTracks(p,g);return l.concat(E)},[]);if(i.length===0)return;await this.connection.stopReceiving(i.map(l=>{let[,{id:d}]=l;return d}));const a=this.createUnsubscribeAllMessage(i);return this.withdrawRemoteTracks(i),this.remoteUserMap.size===0&&this.statsUploader.stopUploadDownlinkStats(),i.forEach(l=>{let[d,{kind:p}]=l;var g,E;if(p===at.VIDEO&&d._videoSSRC&&((g=this.connection)===null||g===void 0||g.setStatsRemoteVideoIsReady(d._videoSSRC,!1)),p===at.VIDEO)this.unbindRemoteTrackEvents(d._videoTrack),(E=d._videoTrack)===null||E===void 0||E._destroy(),d._videoTrack=void 0;else if(p===at.AUDIO){var C;this.unbindRemoteTrackEvents(d._audioTrack),(C=d._audioTrack)===null||C===void 0||C._destroy(),d._audioTrack=void 0}}),a}async muteRemote(n,r){if(!this.connection)return;const i=this.remoteUserMap.get(n);if(!i)return void M.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(n.uid,"."));if(!i.get(r))return void M.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(n.uid," media type ").concat(r,"."));const a=r===at.VIDEO?n._videoSSRC:n._audioSSRC;a!==void 0&&this.connection.setStatsRemoteVideoIsReady(a,!1)}async unmuteRemote(n,r){return this.unmuteRemoteNoLock(n,r)}async unmuteRemoteNoLock(n,r){if(!this.connection)return;const i=this.remoteUserMap.get(n);if(!i)return void M.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(n.uid,"."));i.get(r)||M.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(n.uid," media type ").concat(r,"."))}getAllTracks(n){const r=this.localTrackMap.get(Pe.LocalAudioTrack);if((r==null?void 0:r.track)instanceof Ji){const i=r.track;return Array.from(this.localTrackMap.entries()).filter(a=>{let[l]=a;return l!==Pe.LocalAudioTrack}).filter(a=>{let[l]=a;return!(n&&l===Pe.LocalVideoLowTrack)}).map(a=>{let[,{track:l}]=a;return l}).concat(i.trackList)}return Array.from(this.localTrackMap.entries()).filter(i=>{let[a]=i;return!(n&&a===Pe.LocalVideoLowTrack)}).map(i=>{let[,{track:a}]=i;return a})}reportPublishEvent(n,r,i,a,l){if(n){const p=this.localTrackMap.get(Pe.LocalAudioTrack),g=a?this.localTrackMap.get(Pe.LocalVideoLowTrack):this.localTrackMap.get(Pe.LocalVideoTrack);ke.publish(this.store.sessionId,{eventElapse:Qo.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:r,audioName:p==null?void 0:p.track.getTrackLabel(),videoName:g==null?void 0:g.track.getTrackLabel(),screenshare:(g==null?void 0:g.track._hints.indexOf(hr.SCREEN_TRACK))!==-1,audio:!!p,video:!!g,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}else{var d;i||(i=[]);const p=i.find(E=>E instanceof Qr),g=a?(d=this.localTrackMap.get(Pe.LocalVideoTrack))===null||d===void 0?void 0:d.track:i.find(E=>E instanceof nr);ke.publish(this.store.sessionId,{eventElapse:Qo.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:r,audioName:p==null?void 0:p.getTrackLabel(),videoName:g==null?void 0:g.getTrackLabel(),screenshare:(g==null?void 0:g._hints.indexOf(hr.SCREEN_TRACK))!==-1,audio:!!p,video:!!g,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}}reportSubscribeEvent(n,r,i,a){const l=a===at.VIDEO?i._videoSSRC:i._audioSSRC;l&&ke.subscribe(this.store.sessionId,{succ:n,ec:r,video:a===at.VIDEO,audio:a===at.AUDIO,peerid:i.uid,subscribeRequestid:a===at.VIDEO?i._videoSSRC:i._audioSSRC,p2pid:this.store.p2pId,eventElapse:Qo.measureFromSubscribeStart(this.store.clientId,l)})}reset(){M.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new bi("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new Qc({},this.store):this.isPlanB?new Dp({},this.store):new lc({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const n=this.localTrackMap.get(Pe.LocalAudioTrack);if((n==null?void 0:n.track)instanceof Ji){if(n.track.trackList.length>0){const r=n.track;n.track.trackList.forEach(i=>{r.removeAudioTrack(i)})}n.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=pr.Disconnected}getStats(){var n;return(n=this.connection)===null||n===void 0?void 0:n.getStats()}getRemoteVideoIsReady(n){var r;return((r=this.connection)===null||r===void 0?void 0:r.getRemoteVideoIsReady(n))||!1}getLocalAudioVolume(){const n=this.localTrackMap.get(Pe.LocalAudioTrack);if(n)return n.track.getVolumeLevel()}getLocalVideoSize(){const n=this.localTrackMap.get(Pe.LocalVideoTrack);if(n)return{width:n.track._videoWidth||0,height:n.track._videoHeight||0}}getEncoderConfig(n){const r=this.localTrackMap.get(n);return r&&r.track instanceof nr||r&&r.track instanceof Qr?r.track._encoderConfig:void 0}getLocalMedia(n){return this.localTrackMap.get(n)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(n,r){if(!n)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(n);return!!i&&(!r||i.has(r))}async hasRemoteMediaWithLock(n,r){if(!n)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(n);return!!i&&(!r||i.has(r))}getRemoteMedia(n){var r;const i=Array.from(Ql(r=this.remoteUserMap).call(r)).find(a=>a.uid===n);return i?{audioTrack:i.audioTrack,audioSSRC:i._audioSSRC,videoTrack:i.videoTrack,videoSSRC:i._videoSSRC}:{}}getAudioLevels(){let n=Array.from(this.remoteUserMap.entries()).map(i=>{let[a]=i;return{uid:a.uid,level:a.audioTrack?100*a.audioTrack._source.getAccurateVolumeLevel():0}});const r=this.localTrackMap.get(Pe.LocalAudioTrack);return r&&n.push({level:100*r.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),n=qS(n).call(n,(i,a)=>i.level-a.level),n}async disconnectForReconnect(){this.connection&&(M.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=pr.Reconnecting,re("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r]=n;var i;r._videoTrack&&r._videoTrack._player&&((i=r._videoTrack._player.getVideoElement())===null||i===void 0||i.pause(),r._videoTrack._player.isKeepLastFrame=!0,r._videoTrack._originMediaStreamTrack.stop())}),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new Qc({},this.store):this.isPlanB?new Dp({},this.store):new lc({},this.store),this.bindConnectionEvents(this.connection)),this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(n=>{let[r,{track:i}]=n;switch(r){case Pe.LocalVideoTrack:i._hints.includes(hr.LOW_STREAM)?i.close():this.pendingLocalTracks.push(i);break;case Pe.LocalAudioTrack:i instanceof Ji?this.pendingLocalTracks=this.pendingLocalTracks.concat(i.trackList):this.pendingLocalTracks.push(i);break;case Pe.LocalVideoLowTrack:}}),this.emit(wt.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r,i]=n;Array.from(Ql(i).call(i)).forEach(a=>{this.setPendingRemoteMedia(r,a)}),this.emit(wt.MediaReconnectStart,r.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),M.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(n,r){for(const i of this.pendingRemoteTracks){const{user:a,kind:l}=i;if((n instanceof My?n.uid:n)===a.uid&&r===l)return!0}return!1}setPendingRemoteMedia(n,r){this.hasPendingRemoteMedia(n,r)||this.pendingRemoteTracks.push({user:n,kind:r})}restartICE(n){var r=this;return Oa(function*(){if(!r.connection||r.state!==pr.Connected||r.connection instanceof Qc)return;const i=yield _t(r.mutex.lock("From P2PChannel.restartICE"));let a;try{a=yield _t(r.connection.restartICE(n));const d=yield _t(a.next());if(d.done)return;const p=d.value,g=yield p;switch(r.reportPCDisconnectedOrFailed(n),n){case Ur.TCP:r._pcStatsUploadType=es.TCP_RESTART;break;case Ur.RELAY:r._pcStatsUploadType=es.RELAY_RESTART;break;default:r._pcStatsUploadType=es.OLD_RESTART}r._isInRestartIce=!0,a.next(g)}catch(d){var l;(l=a)===null||l===void 0||l.throw(d)}finally{i()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats(),r=this.localTrackMap.get(Pe.LocalVideoTrack),i=this.localTrackMap.get(Pe.LocalAudioTrack),a=n.videoSend.find(F=>F.ssrc===(r==null?void 0:r.ssrcs[0].ssrcId)),l=n.audioSend.find(F=>F.ssrc===(i==null?void 0:i.ssrcs[0].ssrcId));if(!a||!l)return 1;const d=wa(this,wt.NeedSignalRTT),p=a?a.rttMs:void 0,g=l?l.rttMs:void 0,E=p&&g?(p+g)/2:p||g,C=(E&&d?(E+d)/2:E||d)||0,S=100*n.sendPacketLossRate*.7/50+.3*C/1500,R=S<.17?1:S<.36?2:S<.59?3:S<.1?4:5,k=r==null?void 0:r.track;if(k&&k._encoderConfig&&k._hints.indexOf(hr.SCREEN_TRACK)===-1){const F=k._encoderConfig.bitrateMax,W=n.bitrate.actualEncoded;if(F&&W){const G=(1e3*F-W)/(1e3*F);return C7[G<.15?0:G<.3?1:G<.45?2:G<.6?3:4][R]}}return R}getDownlinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats();let r=0;return Array.from(this.remoteUserMap.entries()).forEach(i=>{let[a]=i;const l=a._audioSSRC,d=a._videoSSRC,p=n.audioRecv.find(W=>W.ssrc===l),g=n.videoRecv.find(W=>W.ssrc===d);if(!p&&!g)return void(r+=1);const E=wa(this,wt.NeedSignalRTT),C=n.rtt,S=(C&&E?(C+E)/2:C||E)||0,R=p?p.jitterMs:void 0,k=n.recvPacketLossRate;let F=.7*k*100/50+.3*S/1500;R&&(F=.6*k*100/50+.2*S/1500+.2*R/400),r+=F<.1?1:F<.17?2:F<.36?3:F<.59?4:5}),this.remoteUserMap.size>0?Math.round(r/this.remoteUserMap.size):r}async muteLocalTrack(n){return new Ae((r,i)=>{this.handleMuteLocalTrack(n,r,i)})}filterTobePublishedTracks(n,r,i){const a=[],l=Gn(),d=this.getAllTracks();n=jP(n=n.filter(E=>d.indexOf(E)===-1));let p=!1,g=!1;for(const E of n){if(E instanceof nr&&(this.localTrackMap.has(Pe.LocalVideoTrack)||p?new q($.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(a.push({track:E,type:Pe.LocalVideoTrack}),p=!0),r)){const C=this.getLowVideoTrack(E,i);a.push({track:C,type:Pe.LocalVideoLowTrack})}if(E instanceof Qr){const C=this.localTrackMap.get(Pe.LocalAudioTrack);if(C){if(!(C.track instanceof Ji))throw new q($.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(E._bypassWebAudio)throw new q($.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");C.track.addAudioTrack(E),this.bindLocalAudioTrackEvents(E,!0)}else if(g){const S=a.find(R=>{let{type:k}=R;return k===Pe.LocalAudioTrack});if(!(S.track instanceof Ji))throw new q($.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(E._bypassWebAudio)throw new q($.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");S.track.addAudioTrack(E)}else{if(!l.webAudioMediaStreamDest||E instanceof Ji||E._bypassWebAudio)a.push({track:E,type:Pe.LocalAudioTrack});else{const S=new Ji;S.addAudioTrack(E),a.push({track:S,type:Pe.LocalAudioTrack})}g=!0}}}return a}filterTobeUnpublishedTracks(n){const r=[],i=this.getAllTracks();n=jP(n=n.filter(a=>i.indexOf(a)!==-1));for(const a of n){if(a instanceof Qr){const l=this.localTrackMap.get(Pe.LocalAudioTrack);if(!l)continue;l.track instanceof Ji?(l.track.removeAudioTrack(a),this.unbindLocalAudioTrackEvents(a),l.track.trackList.length===0&&(r.push([Pe.LocalAudioTrack,l]),l.track.close())):r.push([Pe.LocalAudioTrack,l])}if(a instanceof nr){const l=this.localTrackMap.get(Pe.LocalVideoTrack);if(!l)continue;r.push([Pe.LocalVideoTrack,l]);const d=this.localTrackMap.get(Pe.LocalVideoLowTrack);d&&r.push([Pe.LocalVideoLowTrack,d])}}return r}bindLocalTrackEvents(n){n.forEach(r=>{let{track:i,type:a}=r;switch(a){case Pe.LocalVideoTrack:i.addListener(Xe.GET_STATS,this.handleGetLocalVideoStats),i.addListener(Xe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(Xe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(Xe.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.addListener(Xe.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),i.addListener(Xe.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.addListener(Xe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(Xe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Pe.LocalAudioTrack:this.bindLocalAudioTrackEvents(i);break;case Pe.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(n,r){n instanceof Ji?n.trackList.forEach(i=>{i.addListener(Xe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(Xe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(Xe.GET_STATS,this.handleGetLocalAudioStats),i.addListener(Xe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(Xe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.addListener(Xe.GET_STATS,this.handleGetLocalAudioStats),n.addListener(Xe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.addListener(Xe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.addListener(Xe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.addListener(Xe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),r||n.addListener(Xe.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(n){n||(n=Array.from(this.localTrackMap.entries()).map(r=>{let[i,{track:a}]=r;return{track:a,type:i}})),n.forEach(r=>{let{track:i,type:a}=r;switch(a){case Pe.LocalVideoTrack:i.off(Xe.GET_STATS,this.handleGetLocalVideoStats),i.off(Xe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.off(Xe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.off(Xe.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.off(Xe.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),i.off(Xe.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.off(Xe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.off(Xe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Pe.LocalAudioTrack:this.unbindLocalAudioTrackEvents(i);break;case Pe.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(n){n instanceof Ji?n.trackList.forEach(r=>{r.off(Xe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(Xe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(Xe.GET_STATS,this.handleGetLocalAudioStats),r.off(Xe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(Xe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.off(Xe.GET_STATS,this.handleGetLocalAudioStats),n.off(Xe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(Xe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(Xe.NEED_REPLACE_TRACK,this.handleReplaceTrack),n.off(Xe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(Xe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(n,r){r instanceof z0&&r.addListener(Xe.GET_STATS,i=>{i(this.handleGetRemoteVideoStats(n))}),r instanceof K0&&r.addListener(Xe.GET_STATS,i=>{i(this.handleGetRemoteAudioStats(n))})}unbindRemoteTrackEvents(n){n&&n.removeAllListeners(Xe.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r,i]=n;i.has(at.AUDIO)&&this.unbindRemoteTrackEvents(r._audioTrack),i.has(at.VIDEO)&&this.unbindRemoteTrackEvents(r._videoTrack)})}createGatewayPublishMessage(n,r){return n.map((i,a)=>{let l,d,{track:p,type:g}=i;switch(g){case Pe.LocalAudioTrack:l=sr.Audio,d={dtx:p instanceof I0&&p._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case Pe.LocalVideoTrack:l=p._hints.includes(hr.SCREEN_TRACK)?sr.Screen:sr.High,d=Zc(Zc({},MP(p)),{},{codec:this.store.codec});break;case Pe.LocalVideoLowTrack:l=sr.Low,d=Zc(Zc({},MP(p)),{},{codec:this.store.codec})}return{stream_type:l,attributes:d,ssrcs:r[a]}})}createGatewayUnpublishMessage(n){return n.map(r=>{let i,[a,{track:l,ssrcs:d,id:p}]=r;switch(a){case Pe.LocalVideoTrack:i=l._hints.includes(hr.SCREEN_TRACK)?sr.Screen:sr.High;break;case Pe.LocalAudioTrack:i=sr.Audio;break;case Pe.LocalVideoLowTrack:i=sr.Low}return{stream_type:i,ssrcs:d,mid:p}})}assignLocalTracks(n,r){n.forEach((i,a)=>{let{track:l,type:d}=i;this.localTrackMap.set(d,{track:l,id:r[a].id,ssrcs:r[a].localSSRC})})}withdrawLocalTracks(n){n.forEach(r=>{let[i]=r;this.localTrackMap.delete(i)})}bindConnectionEvents(n){n.onConnectionStateChange=async r=>{if(M.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(r,")")),this.emit(wt.PeerConnectionStateChange,r),r!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),r==="connected"&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),re("NEW_ICE_RESTART")){if(this._restartStates.includes(r)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const i=d=>{(n.iceConnectionState==="disconnected"||n.iceConnectionState==="checking"||n.iceConnectionState==="failed")&&(M.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(d)),wa(this,wt.QueryClientConnectionState)==="CONNECTED"&&this.emit(wt.RequestRestartICE,d))},a=()=>{n.iceConnectionState!=="disconnected"&&n.iceConnectionState!=="checking"&&n.iceConnectionState!=="failed"||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),M.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout(()=>this.emit(wt.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},l=re("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout(()=>{if(re("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&Gn().supportPCSetConfiguration)i(Ur.RELAY),this._restartTimer=window.setTimeout(a,l);else if(Dn())i(Ur.UDP),this._restartTimer=window.setTimeout(a,4e3);else{if(i(Ur.TCP),Gn().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout(()=>{i(Ur.RELAY),this._restartTimer=window.setTimeout(a,l)},l));this._restartTimer=window.setTimeout(a,l)}},800))}}else{if(r==="disconnected"&&n.iceConnectionState==="disconnected")return setTimeout(()=>{n.iceConnectionState==="disconnected"&&re("ICE_RESTART")&&wa(this,wt.QueryClientConnectionState)==="CONNECTED"&&this.emit(wt.RequestRestartICE)},800),void setTimeout(()=>{n.peerConnectionState==="disconnected"&&(M.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout(()=>this.emit(wt.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);r==="failed"&&(M.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout(()=>this.emit(wt.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())}},n.onICEConnectionStateChange=r=>{r!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),M.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(r,")")),ke.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:r,tag:Tn.TRACER}).onSuccess(),this.emit(wt.IceConnectionStateChange,r)},n.onICETransportStateChange=r=>{M.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(r,")"))},n.onDTLSTransportStateChange=r=>{M.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(r,")"))},n.onDTLSTransportError=r=>{M.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(r,")"))},n.onFirstAudioDecoded=r=>{var i;const a=Array.from(Ql(i=this.remoteUserMap).call(i)).find(d=>d._audioSSRC===r);var l;a&&(this.store.subscribe(a.uid,"audio",void 0,void 0,void 0,Date.now()),(l=a.audioTrack)===null||l===void 0||l.emit(gd.FIRST_FRAME_DECODED),ke.firstRemoteFrame(this.store.sessionId,Mr.FIRST_AUDIO_DECODE,In.FIRST_AUDIO_DECODE,{peer:a._uintid,subscribeElapse:Qo.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId}))},n.onFirstAudioReceived=r=>{var i;const a=Array.from(Ql(i=this.remoteUserMap).call(i)).find(l=>l._audioSSRC===r);a&&ke.firstRemoteFrame(this.store.sessionId,Mr.FIRST_AUDIO_RECEIVED,In.FIRST_AUDIO_RECEIVED,{peer:a._uintid,subscribeElapse:Qo.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId})},n.onFirstVideoDecoded=(r,i,a)=>{this.reportVideoFirstFrameDecoded(r,i,a)},n.onFirstVideoReceived=r=>{var i;const a=Array.from(Ql(i=this.remoteUserMap).call(i)).find(l=>l._videoSSRC===r);a&&ke.firstRemoteFrame(this.store.sessionId,Mr.FIRST_VIDEO_RECEIVED,In.FIRST_VIDEO_RECEIVED,{peer:a._uintid,subscribeElapse:Qo.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId})},n.onSelectedLocalCandidateChanged=(r,i)=>{const a=r.candidateType==="relay",l=i.candidateType==="relay";i.candidateType!=="unknown"&&a===l||this.emit(wt.ConnectionTypeChange,a),M.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(A0(i))," -> ").concat(JSON.stringify(A0(r)),")"))},n.onSelectedRemoteCandidateChanged=(r,i)=>{M.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(A0(i))," -> ").concat(JSON.stringify(A0(r)),")"))},n.onFirstVideoDecodedTimeout=r=>{this.reportVideoFirstFrameDecoded(r,void 0,void 0,!0)}}unbindConnectionEvents(n){n.onConnectionStateChange=void 0,n.onICEConnectionStateChange=void 0,n.onICETransportStateChange=void 0,n.onDTLSTransportStateChange=void 0,n.onDTLSTransportError=void 0,n.onFirstAudioDecoded=void 0,n.onFirstAudioReceived=void 0,n.onFirstVideoDecoded=void 0,n.onFirstVideoReceived=void 0,n.onSelectedLocalCandidateChanged=void 0,n.onSelectedRemoteCandidateChanged=void 0,n.onFirstVideoDecodedTimeout=void 0}filterTobeMutedTracks(n){const r=[];if(this.getAllTracks().indexOf(n)===-1)return r;const i=this.localTrackMap.get(Pe.LocalAudioTrack);if(n instanceof Qr&&(i==null?void 0:i.track)instanceof Ji)return i.track.isActive||r.push([Pe.LocalAudioTrack,i]),r;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:d}]=l;return n===d});if(a&&(r.push(a),a[0]===Pe.LocalVideoTrack)){const l=this.localTrackMap.get(Pe.LocalVideoLowTrack);l&&r.push([Pe.LocalVideoLowTrack,l])}return r}filterTobeUnmutedTracks(n){const r=[],i=this.localTrackMap.get(Pe.LocalAudioTrack);if(n instanceof Qr&&(i==null?void 0:i.track)instanceof Ji)return i.track.isActive&&r.push([Pe.LocalAudioTrack,i]),r;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:d}]=l;return n===d});if(a)if(a[0]===Pe.LocalVideoTrack){r.push(a);const l=this.localTrackMap.get(Pe.LocalVideoLowTrack);l&&r.push([Pe.LocalVideoLowTrack,l])}else r.push(a);return r}createMuteMessage(n){return n.map(r=>{let i,[a,{track:l,ssrcs:d,id:p}]=r;switch(a){case Pe.LocalAudioTrack:i=sr.Audio;break;case Pe.LocalVideoTrack:i=l._hints.includes(hr.SCREEN_TRACK)?sr.Screen:sr.High;break;case Pe.LocalVideoLowTrack:i=sr.Low}return{stream_type:i,ssrcs:d,mid:p}})}createUnmuteMessage(n){return n.map(r=>{let i,[a,{track:l,ssrcs:d,id:p}]=r;switch(a){case Pe.LocalAudioTrack:i=sr.Audio;break;case Pe.LocalVideoTrack:i=l._hints.includes(hr.SCREEN_TRACK)?sr.Screen:sr.High;break;case Pe.LocalVideoLowTrack:i=sr.Low}return{stream_type:i,ssrcs:d,mid:p}})}filterTobeUnSubscribedTracks(n,r){const i=[],a=this.remoteUserMap.get(n);if(!a)return i;if(r){const l=a.get(r);if(!l)return i;i.push([n,{kind:r,id:l}])}else Array.from(a.entries()).forEach(l=>{let[d,p]=l;i.push([n,{kind:d,id:p}])});return i}createUnsubscribeMessage(n){const r=[];return n.forEach(i=>{let[a,{kind:l,id:d}]=i;switch(l){case at.VIDEO:return void(a._videoSSRC&&r.push({stream_type:at.VIDEO,ssrcId:a._videoSSRC}));case at.AUDIO:return void(a._audioSSRC&&r.push({stream_type:at.AUDIO,ssrcId:a._audioSSRC}))}}),r}createUnsubscribeAllMessage(n){const r=new Map;return n.forEach(i=>{let[a,{kind:l}]=i;if(r.has(a)){let d=r.get(a);l===at.VIDEO?d|=Zn.Video:d|=Zn.Audio,r.set(a,d)}else l===at.VIDEO?r.set(a,Zn.Video):r.set(a,Zn.Audio)}),{users:Array.from(r.entries()).map(i=>{let[a,l]=i;return{stream_id:a.uid,stream_type:l}})}}withdrawRemoteTracks(n){n.forEach(r=>{let[i,{kind:a}]=r;const l=this.remoteUserMap.get(i);l&&(l.delete(a),Array.from(l.entries()).length===0&&this.remoteUserMap.delete(i))})}async updateBitrateLimit(n){const r=this.localTrackMap.get(Pe.LocalVideoTrack),i=this.localTrackMap.get(Pe.LocalVideoLowTrack);r&&await r.track.setBitrateLimit(n.uplink),i&&n.low_stream_uplink&&await i.track.setBitrateLimit({max_bitrate:n.low_stream_uplink.bitrate,min_bitrate:n.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}mapPubResToRemoteConfig(n,r){return n.map((i,a)=>{var l;let{stream_type:d}=i;return(l=r.find(p=>{let{stream_type:g}=p;return d===g}))===null||l===void 0?void 0:l.attributes})}async tryToUnmuteAudio(n){for(let i=0;i<n.length;i++)if(n[i]instanceof Qr){var r;const a=this.filterTobeUnmutedTracks(n[i]);if(a.length===0)continue;await((r=this.connection)===null||r===void 0?void 0:r.unmuteLocal(a.map(d=>{let[,{id:p}]=d;return p})));const l=this.createUnmuteMessage(a);return void await Mn(this,wt.RequestUnmuteLocal,l)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=n=>{var r;return!((r=this.connection)===null||r===void 0||!r.getRemoteVideoIsReady(n))},this.statsUploader.requestUpload=(n,r)=>this.emit(wt.RequestUploadStats,n,r),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Zr(VS(this.dtlsFailedCount,Jn)),this.emit(wt.RequestReconnect)}async reconnectP2P(){const n=Array.from(this.localTrackMap.entries()),r=this.createGatewayUnpublishMessage(n);Array.from(this.remoteUserMap.entries()),r.length>0&&await ei(this,wt.RequestUnpublishForReconnectPC,r),this.disconnectForReconnect(),this.emit(wt.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(Pe.LocalVideoTrack)||this.pendingLocalTracks.some(n=>n instanceof nr)}throwIfTrackTypeNotMatch(n){if(n.filter(r=>r instanceof nr).length>1)throw new q($.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n.filter(r=>r instanceof Qr).length>1&&(n.some(r=>r instanceof Qr&&r._bypassWebAudio)||!Gn().webAudioMediaStreamDest))throw new q($.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const r of n){if(r instanceof nr&&this.pendingLocalTracks.some(i=>i instanceof nr))throw new q($.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(r instanceof Qr&&this.pendingLocalTracks.some(i=>i instanceof Qr)&&(!Gn().webAudioMediaStreamDest||r._bypassWebAudio||this.pendingLocalTracks.some(i=>i instanceof Qr&&i._bypassWebAudio)))throw new q($.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(n,r){const i=Gn().supportDualStreamEncoding,a=Zc(Zc({},{width:160,height:120,framerate:15,bitrate:50}),r);let l;l=i?n._mediaStreamTrack.clone():lL(n,a);const d=pn(8,"track-low-"),p=new nr(l,Zc(Zc({},i&&{scaleResolutionDownBy:RK(a,n)}),{},{frameRate:a.framerate,bitrateMax:a.bitrate,bitrateMin:a.bitrate}),void 0,void 0,d);return p.on(vp.TRANSCEIVER_UPDATED,g=>{n._updateRtpTransceiver(g,md.LOW_STREAM)}),p._hints.push(hr.LOW_STREAM),n.addListener(Xe.NEED_CLOSE,()=>{p.close()}),p}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(n,r,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(this.connection&&this.connection instanceof lc){var l,d,p,g;const E=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:C,dtlsTransportState:S,peerConnectionState:R}=this.connection,{local:k,remote:F}=await this.connection.getSelectedCandidatePair();ke.pcStats(this.store.sessionId,{startTime:E,eventElapse:n-E||0,iceconnectionsate:C,dtlsstate:S,connectionstate:R,intSucc:r?1:2,error:a,selectedLocalCandidateProtocol:(l=k==null?void 0:k.protocol)!==null&&l!==void 0?l:"",selectedLocalCandidateType:(d=k.candidateType)!==null&&d!==void 0?d:"",selectedLocalCandidateAddress:"".concat(k.address,":").concat(k.port),selectedRemoteCandidateProtocol:(p=F.protocol)!==null&&p!==void 0?p:"",selectedRemoteCandidateType:(g=F.candidateType)!==null&&g!==void 0?g:"",selectedRemoteCandidateAddress:"".concat(F.address,":").concat(F.port),restartCnt:i})}}reportVideoFirstFrameDecoded(n,r,i,a){var l;const d=Array.from(Ql(l=this.remoteUserMap).call(l)).find(p=>p._videoSSRC===n);if(d){a||this.store.subscribe(d.uid,"video",void 0,void 0,void 0,void 0,Date.now());const p=this.store.keyMetrics,g=p.subscribe.find(E=>E.userId===d.uid&&E.type==="video");ke.firstRemoteVideoDecode(this.store.sessionId,Mr.FIRST_VIDEO_DECODE,In.FIRST_VIDEO_DECODE,{peer:d._uintid,videowidth:r,videoheight:i,subscribeElapse:Qo.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId,apEnd:p.requestAPEnd||0,apStart:p.requestAPStart||0,joinGwEnd:p.joinGatewayEnd||0,joinGwStart:p.joinGatewayStart||0,pcEnd:p.peerConnectionEnd||0,pcStart:p.peerConnectionStart||0,subscriberEnd:(g==null?void 0:g.subscribeEnd)||0,subscriberStart:(g==null?void 0:g.subscribeStart)||0,videoAddNotify:(g==null?void 0:g.streamAdded)||0,state:a?1:0})}}async remoteMediaSsrcChanged(n,r,i){if(!this.connection)return!1;const a=this.remoteUserMap.get(n);if(!a)return!1;const l=a.get(r);if(!l)return!1;const d=await this.connection.getRemoteSSRC(l);return d!==void 0&&d!==i}resetConnection(n){M.debug("[".concat(this.store.clientId,"] [P2PChannel] reset connection to ").concat(n)),this.state===pr.Connected?(M.debug("[".concat(this.store.clientId,"] [P2PChannel] fallback to websocket but P2PChannel state still connected, disconnect first")),this.disconnectForReconnect()):(this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=n===E0.datachannel?new Qc({},this.store):this.isPlanB?new Dp({},this.store):new lc({},this.store),this.bindConnectionEvents(this.connection)))}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(n=>{let[r,{track:i}]=n;r===Pe.LocalVideoLowTrack?i._updateRtpTransceiver(void 0,md.LOW_STREAM):i._updateRtpTransceiver(void 0)})}reportPCDisconnectedOrFailed(n){this.connection&&this.connection instanceof lc&&(this.connection.iceConnectionState!=="disconnected"&&this.connection.iceConnectionState!=="checking"&&this.connection.iceConnectionState!=="failed"||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===es.TCP_RESTART&&n===Ur.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,es.DISCONNECTED_OR_FAILED)))}}).prototype,"startP2PConnection",[mo],Object.getOwnPropertyDescriptor(Lt.prototype,"startP2PConnection"),Lt.prototype),ve(Lt.prototype,"connect",[mo],Object.getOwnPropertyDescriptor(Lt.prototype,"connect"),Lt.prototype),ve(Lt.prototype,"preConnect",[mo],Object.getOwnPropertyDescriptor(Lt.prototype,"preConnect"),Lt.prototype),ve(Lt.prototype,"unpublish",[mo],Object.getOwnPropertyDescriptor(Lt.prototype,"unpublish"),Lt.prototype),ve(Lt.prototype,"unpublishLowStream",[mo],Object.getOwnPropertyDescriptor(Lt.prototype,"unpublishLowStream"),Lt.prototype),ve(Lt.prototype,"subscribe",[mo],Object.getOwnPropertyDescriptor(Lt.prototype,"subscribe"),Lt.prototype),ve(Lt.prototype,"massSubscribe",[mo],Object.getOwnPropertyDescriptor(Lt.prototype,"massSubscribe"),Lt.prototype),ve(Lt.prototype,"unsubscribe",[mo],Object.getOwnPropertyDescriptor(Lt.prototype,"unsubscribe"),Lt.prototype),ve(Lt.prototype,"massUnsubscribe",[mo],Object.getOwnPropertyDescriptor(Lt.prototype,"massUnsubscribe"),Lt.prototype),ve(Lt.prototype,"muteRemote",[mo],Object.getOwnPropertyDescriptor(Lt.prototype,"muteRemote"),Lt.prototype),ve(Lt.prototype,"unmuteRemote",[mo],Object.getOwnPropertyDescriptor(Lt.prototype,"unmuteRemote"),Lt.prototype),ve(Lt.prototype,"hasRemoteMediaWithLock",[mo],Object.getOwnPropertyDescriptor(Lt.prototype,"hasRemoteMediaWithLock"),Lt.prototype),ve(Lt.prototype,"disconnectForReconnect",[mo],Object.getOwnPropertyDescriptor(Lt.prototype,"disconnectForReconnect"),Lt.prototype),ve(Lt.prototype,"updateBitrateLimit",[mo],Object.getOwnPropertyDescriptor(Lt.prototype,"updateBitrateLimit"),Lt.prototype),ve(Lt.prototype,"remoteMediaSsrcChanged",[mo],Object.getOwnPropertyDescriptor(Lt.prototype,"remoteMediaSsrcChanged"),Lt.prototype),Lt);function mo(n,r,i){const a=n[r];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,d=await l.lock("From P2PChannel.".concat(r));try{for(var p=arguments.length,g=new Array(p),E=0;E<p;E++)g[E]=arguments[E];return await a.apply(this,g)}finally{d()}},i}function xL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function Le(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?xL(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):xL(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}var gt;(function(n){n.SET_SESSION_ID="SET_SESSION_ID",n.SET_P2P_ID="SET_P2P_id",n.SET_DC_ID="SET_DC_id",n.SET_UID="SET_UID",n.SET_PUB_ID="SET_PUB_ID",n.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",n.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",n.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",n.AVOID_JOIN_START="AVOID_JOIN_START",n.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",n.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",n.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",n.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",n.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",n.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",n.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",n.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",n.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",n.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",n.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",n.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",n.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",n.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",n.RESET_KEY_METRICS="RESET_KEY_METRICS",n.SET_USE_DATACHANNEL="SET_USE_DATACHANNEL"})(gt||(gt={}));class KY{constructor(r,i,a,l){w(this,"state",void 0),this.state={codec:r,audioCodec:i,mode:a,clientId:l,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useDataChannel:!1}}dispatch(r){this.state=function(i,a){switch(a.type){case gt.SET_SESSION_ID:return Le(Le({},i),{},{sessionId:a.sessionId});case gt.SET_P2P_ID:return Le(Le({},i),{},{p2pId:a.p2pId});case gt.SET_UID:return Le(Le({},i),{},{uid:a.uid});case gt.SET_PUB_ID:return Le(Le({},i),{},{pubId:a.pubId});case gt.KEY_METRIC_CLIENT_CREATED:return Le(Le({},i),{},{keyMetrics:Le(Le({},i.keyMetrics),{},{clientCreated:a.metric})});case gt.KEY_METRIC_JOIN_START:return Le(Le({},i),{},{keyMetrics:Le(Le({},i.keyMetrics),{},{joinStart:a.metric})});case gt.AVOID_JOIN_START:return Le(Le({},i),{},{avoidJoinStart:a.avoidJoinStart});case gt.KEY_METRIC_JOIN_END:return Le(Le({},i),{},{keyMetrics:Le(Le({},i.keyMetrics),{},{joinEnd:a.metric})});case gt.KEY_METRIC_REQUEST_AP_START:return Le(Le({},i),{},{keyMetrics:Le(Le({},i.keyMetrics),{},{requestAPStart:a.metric})});case gt.KEY_METRIC_REQUEST_AP_END:return Le(Le({},i),{},{keyMetrics:Le(Le({},i.keyMetrics),{},{requestAPEnd:a.metric})});case gt.KEY_METRIC_JOIN_GATEWAY_START:return Le(Le({},i),{},{keyMetrics:Le(Le({},i.keyMetrics),{},{joinGatewayStart:a.metric})});case gt.KEY_METRIC_JOIN_GATEWAY_END:return Le(Le({},i),{},{keyMetrics:Le(Le({},i.keyMetrics),{},{joinGatewayEnd:a.metric})});case gt.KEY_METRIC_PEER_CONNECTION_START:return Le(Le({},i),{},{keyMetrics:Le(Le({},i.keyMetrics),{},{peerConnectionStart:a.metric})});case gt.KEY_METRIC_PEER_CONNECTION_END:return Le(Le({},i),{},{keyMetrics:Le(Le({},i.keyMetrics),{},{peerConnectionEnd:a.metric})});case gt.KEY_METRIC_DESCRIPTION_START:return Le(Le({},i),{},{keyMetrics:Le(Le({},i.keyMetrics),{},{descriptionStart:a.metric})});case gt.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return Le(Le({},i),{},{keyMetrics:Le(Le({},i.keyMetrics),{},{signalChannelOpen:a.metric})});case gt.KEY_METRIC_ICE_CONNECTION_END:return Le(Le({},i),{},{keyMetrics:Le(Le({},i.keyMetrics),{},{iceConnectionEnd:a.metric})});case gt.KEY_METRIC_PUBLISH:{const l=i.keyMetrics.publish,d=l.findIndex(p=>p.trackId===a.metric.trackId);return d!==-1?(l[d]=Le(Le({},l[d]),a.metric),Le(Le({},i),{},{keyMetrics:Le(Le({},i.keyMetrics),{},{publish:[...l]})})):Le(Le({},i),{},{keyMetrics:Le(Le({},i.keyMetrics),{},{publish:[...i.keyMetrics.publish,a.metric]})})}case gt.KEY_METRIC_SUBSCRIBE:{const l=i.keyMetrics.subscribe,d=l.findIndex(p=>p.userId===a.metric.userId&&p.type===a.metric.type);return d!==-1?(l[d]=Le(Le({},l[d]),a.metric),Le(Le({},i),{},{keyMetrics:Le(Le({},i.keyMetrics),{},{subscribe:[...l]})})):Le(Le({},i),{},{keyMetrics:Le(Le({},i.keyMetrics),{},{subscribe:[...i.keyMetrics.subscribe,a.metric]})})}case gt.SET_CLOUD_PROXY_SERVER_MODE:return i.cloudProxyServerMode=a.mode,i;case gt.RECORD_JOIN_CHANNEL_SERVICE:return typeof a.index!="number"?i.joinChannelServiceRecords=[...i.joinChannelServiceRecords,a.record]:(i.joinChannelServiceRecords[a.index]=Le(Le({},i.joinChannelServiceRecords[a.index]),a.record),i.joinChannelServiceRecords=[...i.joinChannelServiceRecords]),i;case gt.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return i.joinChannelServiceRecords=[],i;case gt.RESET_KEY_METRICS:return i.keyMetrics={publish:[],subscribe:[]},i;case gt.SET_USE_DATACHANNEL:return Le(Le({},i),{},{useDataChannel:a.val});default:return i}}(this.state,r)}set sessionId(r){this.dispatch({type:gt.SET_SESSION_ID,sessionId:r})}get sessionId(){return this.state.sessionId}get codec(){return this.state.codec}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(r){this.dispatch({type:gt.SET_P2P_ID,p2pId:r})}get p2pId(){return this.state.p2pId}set dcId(r){this.dispatch({type:gt.SET_DC_ID,dcId:r})}get dcId(){return this.state.dcId}set uid(r){this.dispatch({type:gt.SET_UID,uid:r})}get uid(){return this.state.uid}set pubId(r){this.dispatch({type:gt.SET_PUB_ID,pubId:r})}get pubId(){return this.state.pubId}set cloudProxyServerMode(r){this.dispatch({type:gt.SET_CLOUD_PROXY_SERVER_MODE,mode:r})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useDataChannel(r){this.dispatch({type:gt.SET_USE_DATACHANNEL,val:r})}get useDataChannel(){return this.state.useDataChannel}clientCreated(){this.dispatch({type:gt.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:gt.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:gt.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:gt.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:gt.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:gt.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:gt.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:gt.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:gt.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:gt.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:gt.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:gt.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(r,i,a,l){this.dispatch({type:gt.KEY_METRIC_PUBLISH,metric:Le(Le({trackId:r,type:i},a&&{publishStart:a}),l&&{publishEnd:l})})}subscribe(r,i,a,l,d,p,g){this.dispatch({type:gt.KEY_METRIC_SUBSCRIBE,metric:Le(Le(Le(Le(Le({userId:r,type:i},a&&{subscribeStart:a}),l&&{subscribeEnd:l}),d&&{firstFrame:d}),p&&{streamAdded:p}),g&&{firstDecoded:g})})}massSubscribe(r,i,a,l){r.forEach(d=>{this.dispatch({type:gt.KEY_METRIC_SUBSCRIBE,metric:Le(Le(Le({userId:d.userId,type:d.type},i&&{subscribeStart:i}),a&&{subscribeEnd:a}),l&&{firstFrame:l})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(r,i){r.service==="gateway"&&Array.isArray(r.urls)&&(r.urls=r.urls.map(a=>a.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof i!="number"?(this.dispatch({type:gt.RECORD_JOIN_CHANNEL_SERVICE,record:Le(Le({},r),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(i<0||i>=this.state.joinChannelServiceRecords.length||this.dispatch({type:gt.RECORD_JOIN_CHANNEL_SERVICE,record:r,index:i}),i)}catch{return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:gt.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:gt.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch{return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(r){this.dispatch({type:gt.AVOID_JOIN_START,avoidJoinStart:r})}}let X0;const YY=()=>(X0||X0||(X0=(window.location.protocol.split(":")[0]||"").toUpperCase(),X0))==="HTTPS",PL=()=>window.isSecureContext!==void 0;function qY(n){let r=LL();return function(i,a){let l=i.appId;l!==void 0&&(jt(a,10),xs(a,l));let d=i.cid;d!==void 0&&(jt(a,16),jt(a,d));let p=i.cname;p!==void 0&&(jt(a,26),xs(a,p));let g=i.deviceId;g!==void 0&&(jt(a,34),xs(a,g));let E=i.elapse;E!==void 0&&(jt(a,40),el(a,E));let C=i.fileSize;C!==void 0&&(jt(a,48),el(a,Nd(C)));let S=i.height;S!==void 0&&(jt(a,56),el(a,Nd(S)));let R=i.jpg;R!==void 0&&(jt(a,66),jt(a,R.length),function(Zi,fe){let Ce=xd(Zi,fe.length);Zi.bytes.set(fe,Ce)}(a,R));let k=i.networkType;k!==void 0&&(jt(a,72),el(a,Nd(k)));let F=i.osType;F!==void 0&&(jt(a,80),el(a,Nd(F)));let W=i.requestId;W!==void 0&&(jt(a,90),xs(a,W));let G=i.sdkVersion;G!==void 0&&(jt(a,98),xs(a,G));let z=i.sequence;z!==void 0&&(jt(a,104),el(a,Nd(z)));let oe=i.sid;oe!==void 0&&(jt(a,114),xs(a,oe));let ce=i.timestamp;ce!==void 0&&(jt(a,120),el(a,ce));let ye=i.uid;ye!==void 0&&(jt(a,128),jt(a,ye));let Ne=i.vid;Ne!==void 0&&(jt(a,136),jt(a,Ne));let Te=i.width;Te!==void 0&&(jt(a,144),el(a,Nd(Te)));let be=i.service;be!==void 0&&(jt(a,152),jt(a,be));let _e=i.callbackData;_e!==void 0&&(jt(a,162),xs(a,_e));let Ie=i.jpgEncryption;Ie!==void 0&&(jt(a,168),jt(a,Ie));let Bt=i.requestType;Bt!==void 0&&(jt(a,176),jt(a,Bt));let $e=i.scorePorn;$e!==void 0&&(jt(a,185),mC(a,$e));let ln=i.scoreSexy;ln!==void 0&&(jt(a,193),mC(a,ln));let en=i.scoreNeutral;en!==void 0&&(jt(a,201),mC(a,en));let Kn=i.scene;Kn!==void 0&&(jt(a,208),jt(a,Kn));let Vr=i.ossFilePrefix;Vr!==void 0&&(jt(a,218),xs(a,Vr));let Bn=i.serviceVendor;if(Bn!==void 0)for(let Zi of Bn){jt(a,226);let fe=LL();QY(Zi,fe),jt(a,fe.limit),nq(a,fe),tq(fe)}}(n,r),function(i){let a=i.bytes,l=i.limit;return a.length===l?a:a.subarray(0,l)}(r)}function XY(n){return function(i){let a={};e:for(;!ML(i);){let l=Ps(i);switch(l>>>3){case 0:break e;case 1:a.code=Ps(i);break;case 2:a.msg=UL(i,Ps(i));break;case 3:{let d=ZY(i);a.data=JY(i),i.limit=d;break}default:DL(i,7&l)}}return a}({bytes:r=n,offset:0,limit:r.length});var r}function JY(n){let r={};e:for(;!ML(n);){let i=Ps(n);switch(i>>>3){case 0:break e;case 1:r.requestId=UL(n,Ps(n));break;case 2:r.requestType=Ps(n)>>>0;break;case 3:r.scorePorn=fC(n);break;case 4:r.scoreSexy=fC(n);break;case 5:r.scoreNeutral=fC(n);break;case 6:r.requestScene=Ps(n)>>>0;break;case 7:r.scene=Ps(n)>>>0;break;default:DL(n,7&i)}}return r}function QY(n,r){let i=n.service;i!==void 0&&(jt(r,8),jt(r,i));let a=n.vendor;a!==void 0&&(jt(r,16),jt(r,a));let l=n.token;l!==void 0&&(jt(r,26),xs(r,l));let d=n.callbackUrl;d!==void 0&&(jt(r,34),xs(r,d))}function ZY(n){let r=Ps(n),i=n.limit;return n.limit=n.offset+r,i}function DL(n,r){switch(r){case 0:for(;128&FL(n););break;case 2:hC(n,Ps(n));break;case 5:hC(n,4);break;case 1:hC(n,8);break;default:throw new Error("Unimplemented type: "+r)}}let eq=new Float32Array(1);new Uint8Array(eq.buffer);let dC=new Float64Array(1),Qi=new Uint8Array(dC.buffer);function Nd(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}let kL=[];function LL(){const n=kL.pop();return n?(n.offset=n.limit=0,n):{bytes:new Uint8Array(64),offset:0,limit:0}}function tq(n){kL.push(n)}function hC(n,r){if(n.offset+r>n.limit)throw new Error("Skip past limit");n.offset+=r}function ML(n){return n.offset>=n.limit}function xd(n,r){let i=n.bytes,a=n.offset,l=n.limit,d=a+r;if(d>i.length){let p=new Uint8Array(2*d);p.set(i),n.bytes=p}return n.offset=d,d>l&&(n.limit=d),a}function pC(n,r){let i=n.offset;if(i+r>n.limit)throw new Error("Read past limit");return n.offset+=r,i}function UL(n,r){let i=pC(n,r),a=String.fromCharCode,l=n.bytes,d="�",p="";for(let g=0;g<r;g++){let E,C,S,R,k=l[g+i];128&k?(224&k)==192?g+1>=r?p+=d:(E=l[g+i+1],(192&E)!=128?p+=d:(R=(31&k)<<6|63&E,R<128?p+=d:(p+=a(R),g++))):(240&k)==224?g+2>=r?p+=d:(E=l[g+i+1],C=l[g+i+2],(49344&(E|C<<8))!=32896?p+=d:(R=(15&k)<<12|(63&E)<<6|63&C,R<2048||R>=55296&&R<=57343?p+=d:(p+=a(R),g+=2))):(248&k)==240?g+3>=r?p+=d:(E=l[g+i+1],C=l[g+i+2],S=l[g+i+3],(12632256&(E|C<<8|S<<16))!=8421504?p+=d:(R=(7&k)<<18|(63&E)<<12|(63&C)<<6|63&S,R<65536||R>1114111?p+=d:(R-=65536,p+=a(55296+(R>>10),56320+(1023&R)),g+=3))):p+=d:p+=a(k)}return p}function xs(n,r){let i=r.length,a=0;for(let p=0;p<i;p++){let g=r.charCodeAt(p);g>=55296&&g<=56319&&p+1<i&&(g=(g<<10)+r.charCodeAt(++p)-56613888),a+=g<128?1:g<2048?2:g<65536?3:4}jt(n,a);let l=xd(n,a),d=n.bytes;for(let p=0;p<i;p++){let g=r.charCodeAt(p);g>=55296&&g<=56319&&p+1<i&&(g=(g<<10)+r.charCodeAt(++p)-56613888),g<128?d[l++]=g:(g<2048?d[l++]=g>>6&31|192:(g<65536?d[l++]=g>>12&15|224:(d[l++]=g>>18&7|240,d[l++]=g>>12&63|128),d[l++]=g>>6&63|128),d[l++]=63&g|128)}}function nq(n,r){let i=xd(n,r.limit),a=n.bytes,l=r.bytes;for(let d=0,p=r.limit;d<p;d++)a[d+i]=l[d]}function FL(n){return n.bytes[pC(n,1)]}function VL(n,r){let i=xd(n,1);n.bytes[i]=r}function fC(n){let r=pC(n,8),i=n.bytes;return Qi[0]=i[r++],Qi[1]=i[r++],Qi[2]=i[r++],Qi[3]=i[r++],Qi[4]=i[r++],Qi[5]=i[r++],Qi[6]=i[r++],Qi[7]=i[r++],dC[0]}function mC(n,r){let i=xd(n,8),a=n.bytes;dC[0]=r,a[i++]=Qi[0],a[i++]=Qi[1],a[i++]=Qi[2],a[i++]=Qi[3],a[i++]=Qi[4],a[i++]=Qi[5],a[i++]=Qi[6],a[i++]=Qi[7]}function Ps(n){let r,i=0,a=0;do r=FL(n),i<32&&(a|=(127&r)<<i),i+=7;while(128&r);return a}function jt(n,r){for(r>>>=0;r>=128;)VL(n,127&r|128),r>>>=7;VL(n,r)}function el(n,r){let i=r.low>>>0,a=(r.low>>>28|r.high<<4)>>>0,l=r.high>>>24,d=l===0?a===0?i<16384?i<128?1:2:i<1<<21?3:4:a<16384?a<128?5:6:a<1<<21?7:8:l<128?9:10,p=xd(n,d),g=n.bytes;switch(d){case 10:g[p+9]=l>>>7&1;case 9:g[p+8]=d!==9?128|l:127&l;case 8:g[p+7]=d!==8?a>>>21|128:a>>>21&127;case 7:g[p+6]=d!==7?a>>>14|128:a>>>14&127;case 6:g[p+5]=d!==6?a>>>7|128:a>>>7&127;case 5:g[p+4]=d!==5?128|a:127&a;case 4:g[p+3]=d!==4?i>>>21|128:i>>>21&127;case 3:g[p+2]=d!==3?i>>>14|128:i>>>14&127;case 2:g[p+1]=d!==2?i>>>7|128:i>>>7&127;case 1:g[p]=d!==1?128|i:127&i}}const rq=async(n,r,i)=>{const a=function(p){const g=[];for(let E=0;E<p.length;E+=2)g.push(parseInt(p.slice(E,E+2),16));return Uint8Array.from(g)}(function(p){const g="0123456789abcdef";function E(Bt){let $e,ln="";for($e=0;$e<=3;$e++)ln+=g.charAt(Bt>>8*$e+4&15)+g.charAt(Bt>>8*$e&15);return ln}function C(Bt,$e){const ln=(65535&Bt)+(65535&$e);return(Bt>>16)+($e>>16)+(ln>>16)<<16|65535&ln}function S(Bt,$e,ln,en,Kn,Vr){return C(function(Bn,Zi){return Bn<<Zi|Bn>>>32-Zi}(C(C($e,Bt),C(en,Vr)),Kn),ln)}function R(Bt,$e,ln,en,Kn,Vr,Bn){return S($e&ln|~$e&en,Bt,$e,Kn,Vr,Bn)}function k(Bt,$e,ln,en,Kn,Vr,Bn){return S($e&en|ln&~en,Bt,$e,Kn,Vr,Bn)}function F(Bt,$e,ln,en,Kn,Vr,Bn){return S($e^ln^en,Bt,$e,Kn,Vr,Bn)}function W(Bt,$e,ln,en,Kn,Vr,Bn){return S(ln^($e|~en),Bt,$e,Kn,Vr,Bn)}const G=function(Bt){let $e;const ln=1+(Bt.length+8>>6),en=new Array(16*ln);for($e=0;$e<16*ln;$e++)en[$e]=0;for($e=0;$e<Bt.length;$e++)en[$e>>2]|=Bt.charCodeAt($e)<<$e%4*8;return en[$e>>2]|=128<<$e%4*8,en[16*ln-2]=8*Bt.length,en}(p);let z,oe,ce,ye,Ne,Te=1732584193,be=-271733879,_e=-1732584194,Ie=271733878;for(z=0;z<G.length;z+=16)oe=Te,ce=be,ye=_e,Ne=Ie,Te=R(Te,be,_e,Ie,G[z+0],7,-680876936),Ie=R(Ie,Te,be,_e,G[z+1],12,-389564586),_e=R(_e,Ie,Te,be,G[z+2],17,606105819),be=R(be,_e,Ie,Te,G[z+3],22,-1044525330),Te=R(Te,be,_e,Ie,G[z+4],7,-176418897),Ie=R(Ie,Te,be,_e,G[z+5],12,1200080426),_e=R(_e,Ie,Te,be,G[z+6],17,-1473231341),be=R(be,_e,Ie,Te,G[z+7],22,-45705983),Te=R(Te,be,_e,Ie,G[z+8],7,1770035416),Ie=R(Ie,Te,be,_e,G[z+9],12,-1958414417),_e=R(_e,Ie,Te,be,G[z+10],17,-42063),be=R(be,_e,Ie,Te,G[z+11],22,-1990404162),Te=R(Te,be,_e,Ie,G[z+12],7,1804603682),Ie=R(Ie,Te,be,_e,G[z+13],12,-40341101),_e=R(_e,Ie,Te,be,G[z+14],17,-1502002290),be=R(be,_e,Ie,Te,G[z+15],22,1236535329),Te=k(Te,be,_e,Ie,G[z+1],5,-165796510),Ie=k(Ie,Te,be,_e,G[z+6],9,-1069501632),_e=k(_e,Ie,Te,be,G[z+11],14,643717713),be=k(be,_e,Ie,Te,G[z+0],20,-373897302),Te=k(Te,be,_e,Ie,G[z+5],5,-701558691),Ie=k(Ie,Te,be,_e,G[z+10],9,38016083),_e=k(_e,Ie,Te,be,G[z+15],14,-660478335),be=k(be,_e,Ie,Te,G[z+4],20,-405537848),Te=k(Te,be,_e,Ie,G[z+9],5,568446438),Ie=k(Ie,Te,be,_e,G[z+14],9,-1019803690),_e=k(_e,Ie,Te,be,G[z+3],14,-187363961),be=k(be,_e,Ie,Te,G[z+8],20,1163531501),Te=k(Te,be,_e,Ie,G[z+13],5,-1444681467),Ie=k(Ie,Te,be,_e,G[z+2],9,-51403784),_e=k(_e,Ie,Te,be,G[z+7],14,1735328473),be=k(be,_e,Ie,Te,G[z+12],20,-1926607734),Te=F(Te,be,_e,Ie,G[z+5],4,-378558),Ie=F(Ie,Te,be,_e,G[z+8],11,-2022574463),_e=F(_e,Ie,Te,be,G[z+11],16,1839030562),be=F(be,_e,Ie,Te,G[z+14],23,-35309556),Te=F(Te,be,_e,Ie,G[z+1],4,-1530992060),Ie=F(Ie,Te,be,_e,G[z+4],11,1272893353),_e=F(_e,Ie,Te,be,G[z+7],16,-155497632),be=F(be,_e,Ie,Te,G[z+10],23,-1094730640),Te=F(Te,be,_e,Ie,G[z+13],4,681279174),Ie=F(Ie,Te,be,_e,G[z+0],11,-358537222),_e=F(_e,Ie,Te,be,G[z+3],16,-722521979),be=F(be,_e,Ie,Te,G[z+6],23,76029189),Te=F(Te,be,_e,Ie,G[z+9],4,-640364487),Ie=F(Ie,Te,be,_e,G[z+12],11,-421815835),_e=F(_e,Ie,Te,be,G[z+15],16,530742520),be=F(be,_e,Ie,Te,G[z+2],23,-995338651),Te=W(Te,be,_e,Ie,G[z+0],6,-198630844),Ie=W(Ie,Te,be,_e,G[z+7],10,1126891415),_e=W(_e,Ie,Te,be,G[z+14],15,-1416354905),be=W(be,_e,Ie,Te,G[z+5],21,-57434055),Te=W(Te,be,_e,Ie,G[z+12],6,1700485571),Ie=W(Ie,Te,be,_e,G[z+3],10,-1894986606),_e=W(_e,Ie,Te,be,G[z+10],15,-1051523),be=W(be,_e,Ie,Te,G[z+1],21,-2054922799),Te=W(Te,be,_e,Ie,G[z+8],6,1873313359),Ie=W(Ie,Te,be,_e,G[z+15],10,-30611744),_e=W(_e,Ie,Te,be,G[z+6],15,-1560198380),be=W(be,_e,Ie,Te,G[z+13],21,1309151649),Te=W(Te,be,_e,Ie,G[z+4],6,-145523070),Ie=W(Ie,Te,be,_e,G[z+11],10,-1120210379),_e=W(_e,Ie,Te,be,G[z+2],15,718787259),be=W(be,_e,Ie,Te,G[z+9],21,-343485551),Te=C(Te,oe),be=C(be,ce),_e=C(_e,ye),Ie=C(Ie,Ne);return E(Te)+E(be)+E(_e)+E(Ie)}(""+r+i)).slice(0,16),l=a.slice(0,12),d=await window.crypto.subtle.importKey("raw",a,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:l},d,n))},jL=async(n,r,i)=>await rq(n.buffer,r,i);function BL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}const iq=new Map([["moderation",1],["supervise",2]]);class J0 extends Rn{get connectionState(){return this._connectionState}set connectionState(r){if(this._connectionState===r)return;const i=this._connectionState;this._connectionState=r,this.emit(cr.CONNECTION_STATE_CHANGE,i,r)}get inspectType(){return this._inspectType}set inspectType(r){var i;this._inspectMode=Uc(i=r.map(a=>iq.get(a)||0)).call(i,(a,l)=>a+l),this._inspectType=r}get quality(){return this._quality}set quality(r){this._quality=r>1?1:r<.1?.1:r,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(r){super(),w(this,"name","AgoraRTCVideoContentInspect"),w(this,"_connectionState",No.CONNECTING),w(this,"_innerConnectionState",void 0),w(this,"sequence",0),w(this,"inspectStartTime",void 0),w(this,"workerManagerConnection",void 0),w(this,"workerConnection",void 0),w(this,"workerMessageLengthLimit",void 0),w(this,"inspectIntervalMinimum",void 0),w(this,"qualityRatio",void 0),w(this,"_connectInfo",void 0),w(this,"_cancelTokenSource",wo.CancelToken.source()),w(this,"_retryConfig",void 0),w(this,"wmSequence",0),w(this,"inspectInterval",void 0),w(this,"inspectTimer",null),w(this,"ossFilePrefix",void 0),w(this,"extraInfo",void 0),w(this,"_inspectType",void 0),w(this,"_inspectMode",void 0),w(this,"_quality",1),w(this,"qualityTimer",null),w(this,"_inspectId",void 0),w(this,"_needWorkUrlOnly",!1),w(this,"inspectImage",()=>{if(this.connectionState!==No.CONNECTED)throw new q($.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===No.CONNECTED?this.requestToInspectImage():M.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=pn(5,"inspect-"),this.workerMessageLengthLimit=re("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=re("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=re("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=r.interval,this.ossFilePrefix=r.ossFilePrefix,this.extraInfo=r.extraInfo,this.inspectType=r.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new ru("worker-manager-"+this._inspectId,Jn),this.on(cr.STATE_CHANGE,(i,a)=>{this._innerConnectionState=i,M.debug("[".concat(this._inspectId,"] Inspect operation :").concat(xo[i]," ").concat(a||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new ru("worker-"+this._inspectId,Jn),this.handleWorkerEvents()}async init(r,i){this.emit(cr.STATE_CHANGE,xo.CONNECT_AP),this._connectInfo=r;const a=this._cancelTokenSource.token;return this._retryConfig=i,new Ae((l,d)=>{this.on(cr.CONNECTION_STATE_CHANGE,(p,g)=>{g===No.CONNECTED&&l()}),this.requestAP(r,a,i).then(p=>{this.connectWorkerManager(p)}).catch(p=>{d(p)})})}async requestAP(r,i,a){const l=re("WEBCS_DOMAIN").map(g=>"https://".concat(g,"/api/v1")),d=await function(g,E,C,S){let{appId:R,areaCode:k,cname:F,sid:W,token:G,uid:z}=E;bd++;const oe="image_moderation_api",ce={service_name:oe,json_body:JSON.stringify({appId:R,areaCode:k,cname:F,command:"allocateEdge",requestId:bd,seq:bd,sid:W,token:G,ts:Date.now(),uid:z+""})};let ye,Ne,Te=g[0];return Qa(async()=>{ye=Date.now();const be=await Ra(Te,{data:ce,cancelToken:C,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(Ne=Date.now()-ye,be.code!==0){const $e=new q($.UNEXPECTED_RESPONSE,"image inspect ap error, code"+be.code,{retry:!0,responseTime:Ne});throw M.error($e.toString()),$e}const _e=JSON.parse(be.json_body);if(_e.code!==200){const $e=new q($.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(_e.code,", reason: ").concat(_e.reason),{code:_e.code,responseTime:Ne});throw M.error($e.toString()),$e}if(!_e.servers||!Array.isArray(_e.servers)||_e.servers.length===0){const $e=new q($.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:_e.code,responseTime:Ne});throw M.error($e.toString()),$e}const Ie=re("VIDEO_INSPECT_WORKER_MANAGER_HOST"),Bt=re("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:_e.servers.map($e=>{let{address:ln,wss:en}=$e;if(ln&&en)return"wss://".concat(ln.replace(/\./g,"-"),".").concat(Ie,":").concat(Bt||en)}).filter($e=>!!$e),workerToken:_e.workerToken,vid:_e.vid,responseTime:Ne}},(be,_e)=>(ke.apworkerEvent(W,{success:!0,sc:200,serviceName:oe,responseDetail:JSON.stringify(be.addressList),firstSuccess:_e===0,responseTime:Ne,serverIp:g[_e%g.length]}),!1),(be,_e)=>(ke.apworkerEvent(W,{success:!1,sc:be.data&&be.data.code||200,serviceName:oe,responseTime:Ne,serverIp:g[_e%g.length]}),!!(be.code!==$.OPERATION_ABORTED&&be.code!==$.UNEXPECTED_RESPONSE||be.data&&be.data.retry)&&(Te=g[(_e+1)%g.length],!0)),S)}(l,r,i,a);this.emit(cr.STATE_CHANGE,xo.AP_CONNECTED);const{addressList:p}=d;return this.wmSequence++,p}async connectWorkerManager(r){let i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this._needWorkUrlOnly=i,this.emit(cr.STATE_CHANGE,xo.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(r,1e4)}async connectWorker(r){await this.workerConnection.init([r])}handleWorkerManagerEvents(){this.workerManagerConnection.on(Ze.CONNECTED,async()=>{this.emit(cr.STATE_CHANGE,xo.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.18.2",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on(Ze.CLOSED,()=>{this._innerConnectionState<xo.GET_WORKER_MANAGER_RESPONSE&&M.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on(Ze.FAILED,()=>{this._innerConnectionState<xo.GET_WORKER_MANAGER_RESPONSE&&M.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on(Ze.RECONNECTING,()=>{this._innerConnectionState<xo.GET_WORKER_MANAGER_RESPONSE&&M.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on(Ze.ON_MESSAGE,async r=>{this.emit(cr.STATE_CHANGE,xo.GET_WORKER_MANAGER_RESPONSE);const i=this.workerManagerConnection.url;this.workerManagerConnection.close();const a=JSON.parse(r.data);if(a.code!==200)throw M.error("[".concat(this._inspectId,"] Unexpected code ").concat(a.code," from worker manager")),new q($.UNEXPECTED_RESPONSE,"response code of worker is unexpected",a);if(!(a.serverResponse&&a.serverResponse.portWss&&i))throw M.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(a))),new q($.UNEXPECTED_RESPONSE,"response content of worker is unexpected",a);{const l=re("VIDEO_INSPECT_WORKER_PORT")||a.serverResponse.portWss,d=i.replace(/:\d+\/?$/,":".concat(l));this.emit(cr.STATE_CHANGE,xo.CONNECT_WORKER,d),this._needWorkUrlOnly?this.emit(cr.REQUEST_NEW_WORKER_URL,d):await this.connectWorker(d)}}),this.workerManagerConnection.on(Ze.WILL_RECONNECT,(r,i)=>{i(r)}),this.workerManagerConnection.on(Ze.REQUEST_NEW_URLS,(r,i)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(r).catch(i)})}handleWorkerEvents(){this.workerConnection.on(Ze.CONNECTED,async()=>{this.emit(cr.STATE_CHANGE,xo.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=No.CONNECTED}),this.workerConnection.on(Ze.ON_MESSAGE,async r=>{if(r.data instanceof ArrayBuffer){const a=XY(new Uint8Array(r.data));if(re("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&M.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(a)),a.code===200){if(Array.isArray(this.inspectType)&&this.inspectType.length===1&&this.inspectType[0]==="supervise")return void this.emit(cr.INSPECT_RESULT,void 0,void 0);if(a.data&&a.data.scorePorn&&a.data.scoreSexy&&a.data.scoreNeutral){var i;const l={porn:a.data.scorePorn,sexy:a.data.scoreSexy,neutral:a.data.scoreNeutral},d=Uc(i=Object.keys(l)).call(i,(g,E)=>l[g]>l[E]?g:E,"porn"),p=Object.keys(l).find(g=>g===d);this.emit(cr.INSPECT_RESULT,p)}else this.emit(cr.INSPECT_RESULT,void 0,new q($.UNEXPECTED_RESPONSE,a.code+"","There is an unexpected data on message"))}else this.emit(cr.INSPECT_RESULT,void 0,new q($.UNEXPECTED_RESPONSE,a.code+"",a.msg))}else M.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(cr.INSPECT_RESULT,void 0,new q($.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on(Ze.CLOSED,()=>{this.connectionState=No.CLOSED}),this.workerConnection.on(Ze.FAILED,()=>{this.connectionState=No.CLOSED}),this.workerConnection.on(Ze.RECONNECTING,()=>{this.connectionState=this.connectionState===No.CONNECTED?No.RECONNECTING:No.CONNECTING}),this.workerConnection.on(Ze.WILL_RECONNECT,(r,i)=>{r==="recover"&&i(r),i("tryNext")}),this.workerConnection.on(Ze.REQUEST_NEW_URLS,(r,i)=>{this.workerManagerConnection.close(),this.once(cr.REQUEST_NEW_WORKER_URL,a=>{r([a])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(a=>{this.connectWorkerManager(a,!0)}).catch(a=>{i(a)})})}static intToLong(r){return{low:r|=0,high:r>>31,unsigned:r>=0}}async requestToInspectImage(){this.sequence++;const r=wa(this,cr.CLIENT_LOCAL_VIDEO_TRACK),i={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(r){if(!r.isPlaying)return void this.emit(cr.INSPECT_RESULT,void 0,new q($.INVALID_OPERATION,"Only the track being played can be inspected"));const a=await this.generateRequestData(r,i);this.workerConnection.sendMessage(a,!0,!0)}else this.emit(cr.INSPECT_RESULT,void 0,new q($.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(r,i){let{appId:a,cname:l,cid:d,vid:p,sid:g,uid:E}=i;const C=Date.now(),S=await r.getCurrentFrameImage("image/jpeg",this.quality),R=await jL(S,a,l),k=this.sequence+"-"+d+"-"+E+"-"+C+"-"+pn(12,""),F={appId:a,cid:d,cname:l,deviceId:"",elapse:J0.intToLong(Number(C-this.inspectStartTime)),fileSize:R.byteLength,jpgEncryption:2,height:S.height,width:S.width,jpg:R,networkType:6,osType:7,requestId:k,sdkVersion:"4.18.2",sequence:this.sequence,sid:g,timestamp:J0.intToLong(C),uid:E,vid:p,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};this.extraInfo===void 0&&delete F.callbackData,this.ossFilePrefix===void 0&&delete F.ossFilePrefix;const W=qY(F);if(W.byteLength<this.workerMessageLengthLimit){if(re("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const G=function(z){for(var oe=1;oe<arguments.length;oe++){var ce=arguments[oe]!=null?arguments[oe]:{};oe%2?BL(Object(ce),!0).forEach(function(ye){w(z,ye,ce[ye])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(ce)):BL(Object(ce)).forEach(function(ye){Object.defineProperty(z,ye,Object.getOwnPropertyDescriptor(ce,ye))})}return z}({},F);delete G.jpg,M.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(G))}return W}{const G=this.quality*this.qualityRatio;return this.quality=G,await this.generateRequestData(r,{appId:a,cname:l,cid:d,vid:p,sid:g,uid:E})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=wo.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=No.CLOSED,this.emit(cr.STATE_CHANGE,xo.CLOSED)}}function oq(n){let r=function(){const i=cq.pop();return i?(i.offset=i.limit=0,i):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(i,a){let l=i.appId;l!==void 0&&(zn(a,10),cu(a,l));let d=i.cid;d!==void 0&&(zn(a,16),zn(a,d));let p=i.cname;p!==void 0&&(zn(a,26),cu(a,p));let g=i.deviceId;g!==void 0&&(zn(a,34),cu(a,g));let E=i.elapse;E!==void 0&&(zn(a,40),tl(a,E));let C=i.fileSize;C!==void 0&&(zn(a,48),tl(a,Pd(C)));let S=i.height;S!==void 0&&(zn(a,56),tl(a,Pd(S)));let R=i.jpg;R!==void 0&&(zn(a,66),zn(a,R.length),HL(a,R));let k=i.networkType;k!==void 0&&(zn(a,72),tl(a,Pd(k)));let F=i.osType;F!==void 0&&(zn(a,80),tl(a,Pd(F)));let W=i.requestId;W!==void 0&&(zn(a,90),cu(a,W));let G=i.sdkVersion;G!==void 0&&(zn(a,98),cu(a,G));let z=i.sequence;z!==void 0&&(zn(a,104),tl(a,Pd(z)));let oe=i.sid;oe!==void 0&&(zn(a,114),cu(a,oe));let ce=i.timestamp;ce!==void 0&&(zn(a,120),tl(a,ce));let ye=i.uid;ye!==void 0&&(zn(a,128),zn(a,ye));let Ne=i.vid;Ne!==void 0&&(zn(a,136),zn(a,Ne));let Te=i.width;Te!==void 0&&(zn(a,144),tl(a,Pd(Te)));let be=i.service;be!==void 0&&(zn(a,152),zn(a,be));let _e=i.callbackData;_e!==void 0&&(zn(a,162),zn(a,_e.length),HL(a,_e));let Ie=i.ticket;Ie!==void 0&&(zn(a,170),cu(a,Ie))}(n,r),function(i){let a=i.bytes,l=i.limit;return a.length===l?a:a.subarray(0,l)}(r)}function aq(n){return function(i){let a={};e:for(;!lq(i);){let l=kp(i);switch(l>>>3){case 0:break e;case 1:a.code=kp(i);break;case 2:a.msg=WL(i,kp(i));break;case 3:a.requestId=WL(i,kp(i));break;case 4:a.timestamp=uq(i,!1);break;default:sq(i,7&l)}}return a}({bytes:r=n,offset:0,limit:r.length});var r}function sq(n,r){switch(r){case 0:for(;128&xa(n););break;case 2:gC(n,kp(n));break;case 5:gC(n,4);break;case 1:gC(n,8);break;default:throw new Error("Unimplemented type: "+r)}}function Pd(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}let cq=[];function gC(n,r){if(n.offset+r>n.limit)throw new Error("Skip past limit");n.offset+=r}function lq(n){return n.offset>=n.limit}function Q0(n,r){let i=n.bytes,a=n.offset,l=n.limit,d=a+r;if(d>i.length){let p=new Uint8Array(2*d);p.set(i),n.bytes=p}return n.offset=d,d>l&&(n.limit=d),a}function $L(n,r){let i=n.offset;if(i+r>n.limit)throw new Error("Read past limit");return n.offset+=r,i}function HL(n,r){let i=Q0(n,r.length);n.bytes.set(r,i)}function WL(n,r){let i=$L(n,r),a=String.fromCharCode,l=n.bytes,d="�",p="";for(let g=0;g<r;g++){let E,C,S,R,k=l[g+i];128&k?(224&k)==192?g+1>=r?p+=d:(E=l[g+i+1],(192&E)!=128?p+=d:(R=(31&k)<<6|63&E,R<128?p+=d:(p+=a(R),g++))):(240&k)==224?g+2>=r?p+=d:(E=l[g+i+1],C=l[g+i+2],(49344&(E|C<<8))!=32896?p+=d:(R=(15&k)<<12|(63&E)<<6|63&C,R<2048||R>=55296&&R<=57343?p+=d:(p+=a(R),g+=2))):(248&k)==240?g+3>=r?p+=d:(E=l[g+i+1],C=l[g+i+2],S=l[g+i+3],(12632256&(E|C<<8|S<<16))!=8421504?p+=d:(R=(7&k)<<18|(63&E)<<12|(63&C)<<6|63&S,R<65536||R>1114111?p+=d:(R-=65536,p+=a(55296+(R>>10),56320+(1023&R)),g+=3))):p+=d:p+=a(k)}return p}function cu(n,r){let i=r.length,a=0;for(let p=0;p<i;p++){let g=r.charCodeAt(p);g>=55296&&g<=56319&&p+1<i&&(g=(g<<10)+r.charCodeAt(++p)-56613888),a+=g<128?1:g<2048?2:g<65536?3:4}zn(n,a);let l=Q0(n,a),d=n.bytes;for(let p=0;p<i;p++){let g=r.charCodeAt(p);g>=55296&&g<=56319&&p+1<i&&(g=(g<<10)+r.charCodeAt(++p)-56613888),g<128?d[l++]=g:(g<2048?d[l++]=g>>6&31|192:(g<65536?d[l++]=g>>12&15|224:(d[l++]=g>>18&7|240,d[l++]=g>>12&63|128),d[l++]=g>>6&63|128),d[l++]=63&g|128)}}function xa(n){return n.bytes[$L(n,1)]}function GL(n,r){let i=Q0(n,1);n.bytes[i]=r}function kp(n){let r,i=0,a=0;do r=xa(n),i<32&&(a|=(127&r)<<i),i+=7;while(128&r);return a}function zn(n,r){for(r>>>=0;r>=128;)GL(n,127&r|128),r>>>=7;GL(n,r)}function uq(n,r){let i,a=0,l=0,d=0;return i=xa(n),a=127&i,128&i&&(i=xa(n),a|=(127&i)<<7,128&i&&(i=xa(n),a|=(127&i)<<14,128&i&&(i=xa(n),a|=(127&i)<<21,128&i&&(i=xa(n),l=127&i,128&i&&(i=xa(n),l|=(127&i)<<7,128&i&&(i=xa(n),l|=(127&i)<<14,128&i&&(i=xa(n),l|=(127&i)<<21,128&i&&(i=xa(n),d=127&i,128&i&&(i=xa(n),d|=(127&i)<<7))))))))),{low:a|l<<28,high:l>>>4|d<<24,unsigned:r}}function tl(n,r){let i=r.low>>>0,a=(r.low>>>28|r.high<<4)>>>0,l=r.high>>>24,d=l===0?a===0?i<16384?i<128?1:2:i<1<<21?3:4:a<16384?a<128?5:6:a<1<<21?7:8:l<128?9:10,p=Q0(n,d),g=n.bytes;switch(d){case 10:g[p+9]=l>>>7&1;case 9:g[p+8]=d!==9?128|l:127&l;case 8:g[p+7]=d!==8?a>>>21|128:a>>>21&127;case 7:g[p+6]=d!==7?a>>>14|128:a>>>14&127;case 6:g[p+5]=d!==6?a>>>7|128:a>>>7&127;case 5:g[p+4]=d!==5?128|a:127&a;case 4:g[p+3]=d!==4?i>>>21|128:i>>>21&127;case 3:g[p+2]=d!==3?i>>>14|128:i>>>14&127;case 2:g[p+1]=d!==2?i>>>7|128:i>>>7&127;case 1:g[p]=d!==1?128|i:127&i}}const zL={},KL={},YL=4294967296,qL=18446744073709552e3,XL=qL/2,vC=QL(0,!0),JL=QL(0),dq=Dd(0,-2147483648,!1),hq=Dd(-1,2147483647,!1),pq=Dd(-1,-1,!0);function QL(n,r){let i,a,l;return r?(l=0<=(n>>>=0)&&n<256)&&(a=KL[n],a)?a:(i=Dd(n,0,!0),l&&(KL[n]=i),i):(l=-128<=(n|=0)&&n<128)&&(a=zL[n],a)?a:(i=Dd(n,n<0?-1:0,!1),l&&(zL[n]=i),i)}function Dd(n,r,i){return{low:0|n,high:0|r,unsigned:!!i}}function fq(n,r){if(isNaN(n))return r?vC:JL;if(r){if(n<0)return vC;if(n>=qL)return pq}else{if(n<=-XL)return dq;if(n+1>=XL)return hq}return n<0?r?vC:JL:Dd(n%YL|0,n/YL|0,r)}function ZL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}class EC extends Rn{get connectionState(){return this._connectionState}set connectionState(r){if(this._connectionState===r)return;const i=this._connectionState;this._connectionState=r,this.emit(Jo.CONNECTION_STATE_CHANGE,r,i)}get quality(){return this._quality}set quality(r){this._quality=r>1?1:r<.1?.1:r,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this._qualityRatio},6e4))}constructor(r){var i;super(),w(this,"name","AgoraRTCImageModeration"),w(this,"_connectionState",po.CONNECTING),w(this,"_sequence",0),w(this,"_moderationStartTime",void 0),w(this,"_workerConnection",void 0),w(this,"_workerMessageLengthLimit",void 0),w(this,"_qualityRatio",void 0),w(this,"_connectInfo",void 0),w(this,"_cancelTokenSource",wo.CancelToken.source()),w(this,"_retryConfig",void 0),w(this,"_moderationInterval",void 0),w(this,"_moderationTimer",null),w(this,"_moderationMode",1),w(this,"_quality",1),w(this,"_qualityTimer",null),w(this,"_ticket",void 0),w(this,"_moderationIntervalMinimum",void 0),w(this,"_uploadFailedNum",0),w(this,"_uploadNum",0),w(this,"_uploadTimer",null),w(this,"_moderationId",void 0),w(this,"inspectImage",()=>{if(this.connectionState!==po.CONNECTED)throw new q($.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval(()=>{this.connectionState===po.CONNECTED?this.requestToInspectImage():M.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)},this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()}),this._moderationId=pn(5,"image-moderation-"),this._workerMessageLengthLimit=re("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=re("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=(i=r.interval)!==null&&i!==void 0?i:1e3,this._qualityRatio=re("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new ru("worker-"+this._moderationId,Jn),this.on(Jo.STATE_CHANGE,(a,l)=>{M.debug("[".concat(this._moderationId,"] Moderation operation :").concat(zc[a]," ").concat(l||""))}),this.handleWorkerEvents()}async init(r,i){this.emit(Jo.STATE_CHANGE,zc.CONNECT_AP),this._connectInfo=r;const a=this._cancelTokenSource.token;return this._retryConfig=i,new Ae((l,d)=>{this.on(Jo.CONNECTION_STATE_CHANGE,(p,g)=>{p===po.CONNECTED&&l()}),this.requestAP(r,a,i).then(p=>{this.connectWorker(p)}).catch(p=>{d(p)})})}updateConfig(r){var i;this._moderationInterval=(i=r.interval)!==null&&i!==void 0?i:1e3,M.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(r))),this.connectionState===po.CONNECTED&&this.inspectImage()}async requestAP(r,i,a){const l=re("WEBCS_DOMAIN").map(E=>"https://".concat(E,"/api/v1")),d=await function(E,C,S,R){let{appId:k,areaCode:F,cname:W,sid:G,token:z,uid:oe}=C;bd++;const ce="moderation_plugin",ye={service_name:ce,json_body:JSON.stringify({appId:k,areaCode:F,cname:W,command:"allocateEdge",requestId:bd,seq:bd,sid:G,appToken:z,ts:Date.now(),uid:oe+""})};let Ne,Te,be=E[0];return Qa(async()=>{Ne=Date.now();const _e=await Ra(be,{data:ye,cancelToken:S,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(Te=Date.now()-Ne,_e.code!==0){const $e=new q($.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+_e.code,{retry:!0,responseTime:Te});throw M.error($e.toString()),$e}const Ie=JSON.parse(_e.json_body);if(Ie.code!==200){const $e=new q($.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(Ie.code,", reason: ").concat(Ie.reason),{code:Ie.code,responseTime:Te});throw M.error($e.toString()),$e}if(!Ie.servers||!Array.isArray(Ie.servers)||Ie.servers.length===0){const $e=new q($.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:Ie.code,responseTime:Te});throw M.error($e.toString()),$e}if(!Ie.servers.some($e=>!!$e.wss)){const $e=new q($.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:Ie.code,responseTime:Te});throw M.error($e.toString()),$e}const Bt=re("IMAGE_MODERATION_WORKER_HOST");return{addressList:Ie.servers.map($e=>{let{address:ln,wss:en}=$e;if(ln&&en)return"wss://".concat(ln.replace(/\./g,"-"),".").concat(Bt,":").concat(en,"/moderation")}).filter($e=>!!$e),workerToken:Ie.workerToken,vid:Ie.vid,ticket:Ie.appTicket,responseTime:Te}},(_e,Ie)=>(ke.apworkerEvent(G,{success:!0,sc:200,serviceName:ce,responseDetail:JSON.stringify(_e.addressList),firstSuccess:Ie===0,responseTime:Te,serverIp:E[Ie%E.length]}),!1),(_e,Ie)=>(ke.apworkerEvent(G,{success:!1,sc:_e.data&&_e.data.code||200,serviceName:ce,responseTime:Te,serverIp:E[Ie%E.length]}),!!(_e.code!==$.OPERATION_ABORTED&&_e.code!==$.UNEXPECTED_RESPONSE||_e.data&&_e.data.retry)&&(be=E[(Ie+1)%E.length],!0)),R)}(l,r,i,a);this.emit(Jo.STATE_CHANGE,zc.AP_CONNECTED);const{addressList:p,ticket:g}=d;return this._ticket=g,p}async connectWorker(r){this.emit(Jo.STATE_CHANGE,zc.CONNECT_WORKER),await this._workerConnection.init(r,1e4)}handleWorkerEvents(){this._workerConnection.on(Ze.CONNECTED,async()=>{this.emit(Jo.STATE_CHANGE,zc.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=po.CONNECTED}),this._workerConnection.on(Ze.CLOSED,()=>{this.connectionState=po.CLOSED}),this._workerConnection.on(Ze.FAILED,()=>{this.connectionState=po.CLOSED}),this._workerConnection.on(Ze.RECONNECTING,()=>{this.connectionState=this.connectionState===po.CONNECTED?po.RECONNECTING:po.CONNECTING}),this._workerConnection.on(Ze.ON_MESSAGE,async r=>{if(r.data instanceof ArrayBuffer){const i=aq(new Uint8Array(r.data));re("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&M.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(i)),this._uploadNum++,i.code===void 0||i.code===0||(this._uploadFailedNum++,M.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(i.code,", msg is ").concat(i.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout(()=>{ke.reportApiInvoke(this._connectInfo.sid||null,{name:Qn.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,i.code],tag:Tn.TRACER}).onError(new q($.IMAGE_MODERATION_UPLOAD_FAILED,i.msg)),this._uploadTimer=null},re("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else M.error("[".concat(this._moderationId,"] Unexpected message type from worker"))}),this._workerConnection.on(Ze.WILL_RECONNECT,(r,i)=>{r==="recover"&&i(r),i("tryNext")}),this._workerConnection.on(Ze.REQUEST_NEW_URLS,(r,i)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(r).catch(i)})}static intToLong(r){return{low:r|=0,high:r>>31,unsigned:r>=0}}async requestToInspectImage(){const r=wa(this,Jo.CLIENT_LOCAL_VIDEO_TRACK),i={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(r){if(!r.isPlaying)return void(re("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&M.debug("Only the track being played can be inspected"));this._sequence++;const a=await this.generateRequestData(r,i);this._workerConnection.sendMessage(a,!0,!0)}else re("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&M.debug("Only the track being published can be inspected")}async generateRequestData(r,i){let{appId:a,cname:l,cid:d,vid:p,sid:g,uid:E}=i;const C=Date.now(),S=await r.getCurrentFrameImage("image/jpeg",this.quality),R=await jL(S,a,l),k=this._sequence+"-"+d+"-"+E+"-"+C+"-"+pn(12,""),F={appId:a,cid:d,cname:l,deviceId:"",elapse:EC.intToLong(Number(C-this._moderationStartTime)),fileSize:S.buffer.byteLength,height:S.height,width:S.width,jpg:R,networkType:6,osType:7,requestId:k,sdkVersion:"4.18.2",sequence:this._sequence,sid:g,timestamp:fq(C),uid:E,vid:p,service:this._moderationMode,ticket:this._ticket},W=oq(F);if(W.byteLength<this._workerMessageLengthLimit){if(re("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const G=function(z){for(var oe=1;oe<arguments.length;oe++){var ce=arguments[oe]!=null?arguments[oe]:{};oe%2?ZL(Object(ce),!0).forEach(function(ye){w(z,ye,ce[ye])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(ce)):ZL(Object(ce)).forEach(function(ye){Object.defineProperty(z,ye,Object.getOwnPropertyDescriptor(ce,ye))})}return z}({},F);delete G.jpg,M.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(G))}return W}{const G=this.quality*this._qualityRatio;return this.quality=G,await this.generateRequestData(r,{appId:a,cname:l,cid:d,vid:p,sid:g,uid:E})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=wo.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=po.CLOSED,this.emit(Jo.STATE_CHANGE,zc.CLOSED)}}var e2,t2,n2,r2,i2,o2,a2,s2,c2,l2,u2,d2,h2,p2,f2,m2,g2,v2,E2,_2,S2,y2,C2,T2,b2,R2,I2,w2,O2,A2,N2,x2,P2,D2,k2,L2,M2,U2,F2,we;function V2(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function Lp(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?V2(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):V2(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}let mq=(e2=He(),t2=He({argsMap:(n,r)=>(Array.isArray(r)||(r=[r]),r.map(i=>i?Object(i).toString():"null"))}),n2=He({argsMap:(n,r)=>(r||(r=[]),Array.isArray(r)||(r=[r]),r.map(i=>i.getTrackId()))}),r2=He({argsMap:(n,r,i)=>[r.uid,i]}),i2=He({argsMap:(n,r)=>r.map(i=>{let{user:a,mediaType:l}=i;return[a==null?void 0:a.uid,l]})}),o2=He({argsMap:(n,r,i)=>[r.uid,i]}),a2=He({argsMap:(n,r)=>r.map(i=>{let{user:a,mediaType:l}=i;return{uid:a==null?void 0:a.uid,mediaType:l}})}),s2=He(),c2=He(),l2=He(),u2=He(),d2=He(),h2=He(),p2=He(),f2=He(),m2=He(),g2=He(),v2=He(),E2=He(),_2=He(),S2=He(),y2=He({argsMap:(n,r)=>[r]}),C2=He(),T2=He(),b2=He(),R2=He(),I2=He(),w2=He(),O2=He(),A2=He(),N2=He(),x2=He(),P2=He({argsMap:(n,r)=>(Array.isArray(r)||(r=[r]),[JSON.stringify(r)])}),D2=He(),k2=He(),L2=He(),M2=He(),U2=He({reportResult:!0}),F2=He(),ve((we=class extends Rn{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get mode(){return this._config.mode}get role(){var n;return((n=this._config)===null||n===void 0?void 0:n.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(n){let r;if(super(),w(this,"store",void 0),w(this,"_uid",void 0),w(this,"_channelName",void 0),w(this,"_uintUid",void 0),w(this,"_users",[]),w(this,"_config",void 0),w(this,"_clientId",void 0),w(this,"_appId",void 0),w(this,"_sessionId",null),w(this,"_key",void 0),w(this,"_joinInfo",void 0),w(this,"_gateway",void 0),w(this,"_statsCollector",void 0),w(this,"_configDistribute",void 0),w(this,"_leaveMutex",new bi("client-leave")),w(this,"_publishMutex",new bi("client-publish")),w(this,"_renewTokenMutex",new bi("client-renewtoken")),w(this,"_subscribeMutex",new bi("client-subscribe")),w(this,"_encryptionMode","none"),w(this,"_encryptionSecret",null),w(this,"_encryptionSalt",null),w(this,"_proxyServer",void 0),w(this,"_turnServer",{servers:[],mode:"auto"}),w(this,"_cloudProxyServerMode","disabled"),w(this,"_isDualStreamEnabled",!1),w(this,"_defaultStreamFallbackType",void 0),w(this,"_lowStreamParameter",void 0),w(this,"_streamFallbackTypeCacheMap",new Map),w(this,"_remoteStreamTypeCacheMap",new Map),w(this,"_axiosCancelSource",wo.CancelToken.source()),w(this,"_audioVolumeIndicationInterval",void 0),w(this,"_networkQualityInterval",void 0),w(this,"_userOfflineTimeout",void 0),w(this,"_streamRemovedTimeout",void 0),w(this,"_injectStreamingClient",void 0),w(this,"_liveTranscodeStreamingClient",void 0),w(this,"_liveRawStreamingClient",void 0),w(this,"_channelMediaRelayClient",void 0),w(this,"_networkQualitySensitivity","normal"),w(this,"_p2pChannel",void 0),w(this,"_useLocalAccessPoint",!1),w(this,"_setLocalAPVersion",void 0),w(this,"_joinAndNotLeaveYet",!1),w(this,"_numberOfJoinCount",0),w(this,"_remoteDefaultVideoStreamType",void 0),w(this,"_inspect",void 0),w(this,"_moderation",void 0),w(this,"_license",void 0),w(this,"_handleLocalTrackEnable",(i,a,l)=>{this.publish(i,!1).then(a).catch(l)}),w(this,"_handleLocalTrackDisable",(i,a,l)=>{this.unpublish(i).then(a).catch(l)}),w(this,"_handleUserOnline",i=>{if(re("BLOCK_LOCAL_CLIENT")&&Xl(i.uid,this.channelName))return void M.debug("[".concat(i.uid,"] will be ignored in local"));this.isStringUID&&typeof i.uid!="string"&&M.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const a=this._users.find(l=>l.uid===i.uid);if(a)a._trust_in_room_=!0;else{const l=new My(i.uid,i.uint_id||i.uid);this._users.push(l),M.debug("[".concat(this._clientId,"] user online"),i.uid),this.safeEmit(vt.USER_JOINED,l)}}),w(this,"_handleUserOffline",i=>{if(re("BLOCK_LOCAL_CLIENT")&&Xl(i.uid,this.channelName))return;const a=this._users.find(l=>l.uid===i.uid);a&&(this._handleRemoveStream(i),Iy(this._users,a),this._remoteStreamTypeCacheMap.delete(a.uid),this._streamFallbackTypeCacheMap.delete(a.uid),M.debug("[".concat(this._clientId,"] user offline"),i.uid,"reason:",i.reason),this.safeEmit(vt.USER_LEAVED,a,i.reason))}),w(this,"_handleAddAudioOrVideoStream",(i,a,l,d,p,g,E)=>{if(re("BLOCK_LOCAL_CLIENT")&&Xl(a,this.channelName))return;const C=this._users.find(R=>R.uid===a);if(!C)return void M.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));M.debug("[".concat(this._clientId,"] stream added with uid ").concat(a,", type ").concat(i)),this.store.subscribe(C.uid,i,void 0,void 0,void 0,Date.now());const S=i==="audio"?C.hasAudio:C.hasVideo;C._uintid||(C._uintid=p||a),i==="audio"?C._trust_audio_stream_added_state_=!0:C._trust_video_stream_added_state_=!0,i==="audio"?(C._audio_added_=!0,l!==void 0&&(C._audioSSRC=l),d!==void 0&&(C._cname=d),g&&(C._audioOrtc=g)):(C._video_added_=!0,l!==void 0&&(C._videoSSRC=l),d!==void 0&&(C._cname=d),E!==void 0&&(C._rtxSsrcId=E),g&&(C._videoOrtc=g)),(i==="audio"?C.hasAudio:C.hasVideo)&&!S&&(M.info("[".concat(this._clientId,"] remote user ").concat(C.uid," published ").concat(i)),this.safeEmit(vt.USER_PUBLISHED,C,i)),i==="video"?ke.onGatewayStream(this._sessionId,Mr.ON_ADD_VIDEO_STREAM,In.ON_ADD_VIDEO_STREAM,{peer:p||a}):ke.onGatewayStream(this._sessionId,Mr.ON_ADD_AUDIO_STREAM,In.ON_ADD_AUDIO_STREAM,{peer:p||a}),this._p2pChannel.remoteMediaSsrcChanged(C,i,l).then(R=>{if(R)return M.debug("[".concat(this._clientId,"] resubscribe ").concat(i," for user ").concat(C.uid," after rejoin because SSRC id changed.")),this._p2pChannel.unsubscribe(C,i,!0).then(()=>this._subscribe(C,i,!0).catch(k=>{M.error("[".concat(this._clientId,"] resubscribe error"),k.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(C,i)&&(M.debug("[".concat(this._clientId,"] resubscribe ").concat(i," for user ").concat(C.uid," after reconnect.")),this._subscribe(C,i,!0).catch(R=>{M.error("[".concat(this._clientId,"] resubscribe error"),R.toString())}))}),w(this,"_handleRemoveStream",i=>{if(re("BLOCK_LOCAL_CLIENT")&&Xl(i.uid,this.channelName))return;const a=this._users.find(d=>d.uid===i.uid);if(!a)return void M.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));M.debug("[".concat(this._clientId,"] stream removed with uid ").concat(i.uid));let l=()=>{};a.hasAudio&&a.hasVideo?l=()=>{M.info("[".concat(this._clientId,"] remote user ").concat(a.uid," unpublished audio track")),this.safeEmit(vt.USER_UNPUBLISHED,a,"audio"),M.info("[".concat(this._clientId,"] remote user ").concat(a.uid," unpublished video track")),this.safeEmit(vt.USER_UNPUBLISHED,a,"video")}:a.hasVideo?l=()=>{M.info("[".concat(this._clientId,"] remote user ").concat(a.uid," unpublished video track")),this.safeEmit(vt.USER_UNPUBLISHED,a,"video")}:a.hasAudio&&(l=()=>{M.info("[".concat(this._clientId,"] remote user ").concat(a.uid," unpublished audio track")),this.safeEmit(vt.USER_UNPUBLISHED,a,"audio")}),a._trust_audio_stream_added_state_=!0,a._trust_video_stream_added_state_=!0,a._audio_added_=!1,a._video_added_=!1,this._p2pChannel.unsubscribe(a).then(d=>{if(d)return this._gateway.unsubscribe(d,a.uid)}),a._audioSSRC=void 0,a._videoSSRC=void 0,a._audioOrtc=void 0,a._videoOrtc=void 0,a._rtxSsrcId=void 0,ke.onGatewayStream(this._sessionId,Mr.ON_REMOVE_STREAM,In.ON_REMOVE_STREAM,{peer:i.uint_id||i.uid}),l()}),w(this,"_handleSetStreamLocalEnable",(i,a,l)=>{if(re("BLOCK_LOCAL_CLIENT")&&Xl(a,this.channelName))return;const d=this._users.find(E=>E.uid===a);if(!d)return void M.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));M.debug("[".concat(this._clientId,"] local ").concat(i," ").concat(l?"enabled":"disabled"," with uid ").concat(a));const p=i==="audio"?d.hasAudio:d.hasVideo;if(i==="audio"){d._trust_audio_enabled_state_=!0;const E=d._audio_enabled_;if(d._audio_enabled_=l,d._audio_enabled_===E)return;{const C=d._audio_enabled_?"enable-local-audio":"disable-local-audio";M.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(a,", msg: ").concat(C)),this.safeEmit(vt.USER_INFO_UPDATED,a,C)}}else{d._trust_video_enabled_state_=!0;const E=d._video_enabled_;if(d._video_enabled_=l,d._video_enabled_===E)return;{const C=d._video_enabled_?"enable-local-video":"disable-local-video";M.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(a,", msg: ").concat(C)),this.safeEmit(vt.USER_INFO_UPDATED,a,C)}}const g=i==="audio"?d.hasAudio:d.hasVideo;return p!==g?!p&&g?(M.info("[".concat(this._clientId,"] remote user ").concat(a," published ").concat(i)),void this.safeEmit(vt.USER_PUBLISHED,d,i)):(i==="video"&&d._videoTrack&&d._videoTrack._destroy(),i==="audio"&&d._audioTrack,this._p2pChannel.muteRemote(d,i),M.info("[".concat(this._clientId,"] remote user ").concat(a," unpublished ").concat(i)),void this.safeEmit(vt.USER_UNPUBLISHED,d,i)):void 0}),w(this,"_handleMuteStream",(i,a,l)=>{if(re("BLOCK_LOCAL_CLIENT")&&Xl(i,this.channelName))return;M.debug("[".concat(this._clientId,"] receive mute message"),i,a,l);const d=this._users.find(E=>E.uid===i);if(!d)return void M.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(i));const p=a==="audio"?d.hasAudio:d.hasVideo;if(a==="audio"){d._trust_audio_mute_state_=!0;const E=d._audio_muted_;if(d._audio_muted_=l,d._audio_muted_===E)return;{const C=d._audio_muted_?"mute-audio":"unmute-audio";M.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(i,", msg: ").concat(C)),this.safeEmit(vt.USER_INFO_UPDATED,i,C)}}else{d._trust_video_mute_state_=!0;const E=d._video_muted_;if(d._video_muted_=l,d._video_muted_===E)return;{const C=d._video_muted_?"mute-video":"unmute-video";M.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(i,", msg: ").concat(C)),this.safeEmit(vt.USER_INFO_UPDATED,i,C)}}const g=a==="audio"?d.hasAudio:d.hasVideo;if(p!==g){if(!p&&g)return(a==="audio"?d._audioSSRC:d._videoSSRC)?(M.info("[".concat(this._clientId,"] remote user ").concat(i," published ").concat(a)),void this.safeEmit(vt.USER_PUBLISHED,d,a)):void M.warning("[".concat(this._clientId,"] remote user ").concat(i," receive ").concat(a," unmute message  before add stream message, ").concat(a," SSRC doesn't exist yet."));a==="video"&&d._videoTrack&&d._videoTrack._destroy(),a==="audio"&&d._audioTrack,this._p2pChannel.muteRemote(d,a),M.info("[".concat(this._clientId,"] remote user ").concat(i," unpublished ").concat(a)),this.safeEmit(vt.USER_UNPUBLISHED,d,a)}}),w(this,"_handleP2PLost",async i=>{M.debug("[".concat(this._clientId,"] receive p2p lost"),i),parseInt(i.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():M.warning("[".concat(this._clientId,"] P2PLost stream not found"),i)}),w(this,"_handleTokenWillExpire",()=>{M.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(vt.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),w(this,"_handleBeforeUnload",i=>{i.type==="beforeunload"&&i.returnValue!==void 0&&i.returnValue!==""||(this.leave(),M.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),w(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.safeEmit(vt.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const i={downlinkNetworkQuality:0,uplinkNetworkQuality:0};i.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),i.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(vt.NETWORK_QUALITY,i)}),this._config=n,this._clientId=pn(5,"client-"),this.store=new KY(n.codec,n.audioCodec,n.mode,this._clientId),this.store.clientCreated(),n.proxyServer&&this.setProxyServer(n.proxyServer,!0),n.turnServer&&this.setTurnServer(n.turnServer,!0),M.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(Xo," build: ").concat(BS,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),n.clientRoleOptions)try{ix(n.clientRoleOptions),r=Object.assign({},n.clientRoleOptions)}catch(i){M.warning("[".concat(this._clientId,"] ").concat(i.toString()))}this._statsCollector=new yd(this.store),this._statsCollector.onStatsException=(i,a,l)=>{M.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(i,", msg: ").concat(a,", uid: ").concat(l)),this.safeEmit(vt.EXCEPTION,{code:i,msg:a,uid:l})},this._statsCollector.onUploadPublishDuration=(i,a,l,d)=>{const p=this._users.find(g=>g.uid===i);p&&ke.peerPublishStatus(this._sessionId,{subscribeElapse:d,audioPublishDuration:a,videoPublishDuration:l,peer:p._uintid})},this.store.useDataChannel=Gn().supportDataChannel&&re("SIGNAL_CHANNEL"),this._gateway=new xK(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:n.websocketRetryConfig||Jn,httpRetryConfig:n.httpRetryConfig||Jn,forceWaitGatewayResponse:n.forceWaitGatewayResponse===void 0||n.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:n.role,clientRoleOptions:r}),this._configDistribute=new jK,this._p2pChannel=new zY(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async join(n,r,i,a,l){const d=++this._numberOfJoinCount;this.store.joinStart(),a&&(this.store.uid=a);const p=YY(),g=PL()?window.isSecureContext:"Browser Not Support";if(!PL()&&!p||!window.isSecureContext){const F="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";M.warning(F)}const E=Ry();this.connectionState==="DISCONNECTED"&&(this.store.avoidJoinStart=Math.round(Date.now()),M.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart)));const C=ke.reportApiInvoke(E,{name:Qn.JOIN,options:[n,r,i,a],states:{isHttps:p,isSecureContext:g},tag:Tn.TRACER});ke.setAppId(n);try{if(!i&&i!==null)throw new q($.INVALID_PARAMS,"Invalid token: ".concat(i,". If you don not use token, set it to null"));i&&Kr(i,"token",1,2047),Kr(n,"appid",1,2047),JS(r),a&&QS(a),l&&Kr(l,"optionalInfo",1,2047)}catch(F){throw C.onError(F),F}if(M.info("[".concat(this._clientId,"] start join channel ").concat(r,", join number: ").concat(d)),this._leaveMutex.isLocked&&(M.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),M.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){const F=new q($.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw C.onError(F),F}this._sessionId||(this._sessionId=E,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING";const S=Lp({clientId:this._clientId,appId:n,sid:this._sessionId,cname:r,uid:typeof a!="string"?a:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:i||n,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:l,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(S.setLocalAPVersion=this._setLocalAPVersion),typeof a=="string"&&(S.stringUid=a,this._uintUid?(S.uid=this._uintUid,this._uintUid=void 0):S.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(S.aesmode=this._encryptionMode,S.aespassword=await(async F=>{const W=wy(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),G=await window.crypto.subtle.importKey("spki",W,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),z=my(F),oe=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},G,z);return x0(new Uint8Array(oe))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new q($.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(S.aessalt=this._encryptionSalt)}this._startSession(this._sessionId,{channel:r,appId:n});const R=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&R===this._sessionId&&ke.joinChannelTimeout(this._sessionId,5)},5e3);try{let F;const W=S.cloudProxyServer;if(["proxy3","proxy4","proxy5"].includes(W)){const ce=re("PROXY_SERVER_TYPE3");Array.isArray(ce)?S.proxyServer=ce[0]:S.proxyServer=ce}if(ke.setProxyServer(S.proxyServer),M.setProxyServer(S.proxyServer),this.store.requestAPStart(),S.stringUid&&!S.uid){const ce=await uD(S.stringUid,S,this._axiosCancelSource.token,this._config.httpRetryConfig||Jn,this.store);M.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(S.stringUid," => ").concat(ce)),S.uid=ce,F=await lD(S,this._axiosCancelSource.token,this._config.httpRetryConfig||Jn,!0,this.store)}else F=await lD(S,this._axiosCancelSource.token,this._config.httpRetryConfig||Jn,!0,this.store);if(!this._joinAndNotLeaveYet)throw new q($.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(S,this._axiosCancelSource.token),this._configDistribute.on(Ep.UPDATE_BITRATE_LIMIT,ce=>{this._p2pChannel.updateBitrateLimit(ce)})},0),this._key=i||n;const G=F.gatewayInfo;this._joinInfo=Lp(Lp({},S),{},{cid:G.cid,uid:S.uid?S.uid:G.uid,vid:G.vid,apResponse:G.res,uni_lbs_ip:G.uni_lbs_ip,gatewayAddrs:G.gatewayAddrs});const z=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new q($.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));C.onSuccess(z),this._appId=n,this._channelName=S.cname,this._uid=z,this.store.uid=z,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(Si()?"beforeunload":"pagehide",this._handleBeforeUnload)},0);const oe=S.stringUid?"string uid: ".concat(S.stringUid,",uid: ").concat(S.uid):"uid: ".concat(this._uid);return M.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(r,",").concat(oe)),setTimeout(()=>{M.startUpload()},5e3),this.store.joinEnd(),k=this,ql.includes(k)||ql.push(k),z}catch(F){const W=Array.isArray(F)?F[0]:F;throw W&&W.code===$.OPERATION_ABORTED?M.warning("[".concat(this._clientId,"] join number: ").concat(d,", Joining channel failed, rollback"),W):M.error("[".concat(this._clientId,"] join number: ").concat(d,", Joining channel failed, rollback"),W),W.code!==$.OPERATION_ABORTED&&this._numberOfJoinCount===d&&(this._gateway.state="DISCONNECTED",this._reset()),C.onError(W),W}var k}_joinGateway(){if(!this._joinInfo||!this._key)throw new q($.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||this._joinInfo.proxyServer||!re("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(n=>n).catch(n=>{if(n.code===$.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,Wt.FALLBACK),n;if(n.code===$.INIT_DATACHANNEL_TIMEOUT)return this._gateway.leave(!0,Wt.FALLBACK),n;throw n}).then(n=>{if(n instanceof q){if(n.code===$.INIT_WEBSOCKET_TIMEOUT){if(M.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new q($.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const r=re("PROXY_SERVER_TYPE3");if(Array.isArray(r))if(this._joinInfo.apUrl){const a=/^https?:\/\/(.+?)(\/.*)?$/.exec(this._joinInfo.apUrl)[1].split("."),l=a.slice(a.length-2).join(".");r.forEach(d=>{this._joinInfo&&d.includes(l)&&(this._joinInfo.proxyServer=d)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=r[0])}else this._joinInfo.proxyServer=r[0];else this._joinInfo.proxyServer=r;const i=re("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);return i&&i[1]&&i[1]!=="443"&&M.setProxyServer(this._joinInfo.proxyServer),re("STATS_COLLECTOR_PORT").toString()!=="443"&&ke.setProxyServer(this._joinInfo.proxyServer),ke.reportApiInvoke(this._sessionId,{name:Qn.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:Tn.TRACER}).onSuccess(),this.safeEmit(vt.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),re("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&this._joinInfo.turnServer.servers.forEach(a=>{"forceturn"in a&&(a.forceturn=!0)}),this._gateway.join(this._joinInfo,this._key)}if(M.info("[".concat(this._clientId,"] join by datachannel timeout, fallback to websocket")),!this._joinInfo||!this._key)throw new q($.INVALID_OPERATION);return ke.reportApiInvoke(this._sessionId,{name:Qn.DATACHANNEL_FAILBACK,options:[this.store.clientId],tag:Tn.TRACER}).onSuccess(),this._joinGateway()}return n}).then(n=>n)}async leave(){M.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(Si()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(r){const i=ql.indexOf(r);i!==-1&&ql.splice(i,1)}(this);const n=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return M.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void n();await this._gateway.leave(this.connectionState!=="CONNECTED"),M.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),n()}async publish(n){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Array.isArray(n)||(n=[n]),n.length===0)throw new q($.INVALID_PARAMS,"track list is empty");if(this._gateway.role==="audience")throw new q($.INVALID_OPERATION,"audience can not publish stream");for(const a of n){if(!(a instanceof gy))throw new q($.INVALID_PARAMS,"parameter is not local track");if(!a._enabled&&r)throw new q($.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(a.getTrackId()))}M.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(n.map(a=>"".concat(a.getTrackId()," "))));const i=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),r&&n.forEach(a=>{const l=this._configDistribute.getBitrateLimit();a instanceof nr&&l&&a.setBitrateLimit(l.uplink)});try{await this._publishHighStream(n),M.info("[".concat(this._clientId,"] Publish success, id ").concat(n.map(a=>"".concat(a.getTrackId()," "))))}catch(a){throw M.error("[".concat(this._clientId,"] publish error"),a.toString()),a}finally{i()}}async unpublish(n){if(!this._joinInfo||this._uid===void 0)throw new q($.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");n?Array.isArray(n)||(n=[n]):n=this._p2pChannel.getAllTracks(!0),M.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(n.map(i=>"".concat(i.getTrackId()," "))," "));const r=await this._publishMutex.lock();try{const i=await this._p2pChannel.unpublish(n);i&&await this._gateway.unpublish(i,this._uid),M.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(n.map(a=>"".concat(a.getTrackId()))))}catch(i){throw M.error("[".concat(this._clientId,"] unpublish error"),i.toString()),i}finally{r&&r()}}async subscribe(n,r){return this._subscribe(n,r)}async _subscribe(n,r,i){if(Tr(r,"mediaType",["audio","video"]),!this._joinInfo)throw new q($.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q($.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(E=>E===n)){const E=new q($.INVALID_REMOTE_USER,"user is not in the channel");throw M.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid,", this user is not in the channel")),E}if(!n.hasAudio&&!n.hasVideo){const E=new q($.INVALID_REMOTE_USER,"user is not published");throw M.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid,", user is not published")),E}if(!(i||(r!=="audio"||n.hasAudio&&n._audioSSRC!==void 0)&&(r!=="video"||n.hasVideo&&n._videoSSRC!==void 0))){const E=new q($.REMOTE_USER_IS_NOT_PUBLISHED);throw M.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid," with mediaType ").concat(r,", remote track is not published")),E}const a=r==="audio"?n._audioSSRC:n._videoSSRC,l=r==="audio"?n._audioOrtc:n._videoOrtc,d=r==="video"?n._rtxSsrcId:void 0,p={stream_type:r==="audio"?at.AUDIO:at.VIDEO,ssrcId:a},g=await this._subscribeMutex.lock();M.info("[".concat(this._clientId,"] subscribe user ").concat(n.uid,", mediaType: ").concat(r));try{if(await this._p2pChannel.hasRemoteMediaWithLock(n,r))await this._p2pChannel.unmuteRemote(n,r);else try{Qo.markSubscribeStart(this.store.clientId,a),this.store.subscribe(n.uid,r,Date.now()),await this._p2pChannel.subscribe(n,r,a,d,l);try{await this._gateway.subscribe(n.uid,p,!0)}catch(C){if((C==null?void 0:C.code)!==$.WS_ABORT)throw await this._p2pChannel.unsubscribe(n,r),C;await this._p2pChannel.unsubscribe(n,r,!0),this._p2pChannel.setPendingRemoteMedia(n,r)}this.store.subscribe(n.uid,r,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,n,r)}catch(C){throw this._p2pChannel.reportSubscribeEvent(!1,C==null?void 0:C.code,n,r),C}M.info("[".concat(this._clientId,"] subscribe success user ").concat(n.uid,", mediaType: ").concat(r)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(n.uid,this._defaultStreamFallbackType).catch(C=>{M.warning("[".concat(this._clientId,"] auto set fallback failed"),C)});const E=r==="audio"?n._audioTrack:n._videoTrack;if(!E)throw new q($.UNEXPECTED_ERROR,"can not find remote track in user object");return E}catch(E){throw M.error("[".concat(this._clientId,"] subscribe user ").concat(n.uid," error"),E),E}finally{g()}}async massSubscribe(n){if(rc(n,"subscribeList"),!this._joinInfo)throw new q($.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q($.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const r=Date.now(),i=new Map,a=await this._subscribeMutex.lock();M.info("[".concat(this._clientId,"]start massSubscribe user ").concat(n.map(g=>{let{user:E,mediaType:C}=g;return"user: ".concat(E==null?void 0:E.uid,", mediaType: ").concat(C)}).join("; ")));const l=(n=[...n]).map(g=>{let{user:E,mediaType:C}=g;return{user:E,mediaType:C}}),d=await this._p2pChannel.globalLock();try{var p;for(let E=n.length-1;E>=0;E--){const C=n[E],{user:S,mediaType:R}=C;if(Tr(R,"mediaType",["audio","video"]),!S){const W=new q($.INVALID_PARAMS,"user property does not exist in subscribeList item");throw M.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),W}if(!this._users.find(W=>W===S)){const W=new q($.INVALID_REMOTE_USER,"user is not in the channel");M.error("[".concat(this._clientId,"] can not massSubscribe ").concat(S.uid,", this user is not in the channel")),l[E].error=W,n.splice(E,1);continue}if(R==="audio"&&(!S.hasAudio||S._audioSSRC===void 0)||R==="video"&&(!S.hasVideo||S._videoSSRC===void 0)){const W=new q($.REMOTE_USER_IS_NOT_PUBLISHED);M.error("[".concat(this._clientId,"] can not subscribe ").concat(S.uid," with mediaType ").concat(R,", remote user is not published")),l[E].error=W,n.splice(E,1);continue}const k=Zn.Video|Zn.LwoVideo,F=i.get(S);if(F){if(R==="video"?F&k:F&Zn.Audio){n.splice(E,1),M.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(S.uid,", mediaType:").concat(R," twice"));continue}i.set(S,F|(R==="video"?k:Zn.Audio))}else i.set(S,R==="video"?k:Zn.Audio)}for(let E=n.length-1;E>=0;E--){const C=n[E],{user:S,mediaType:R}=C,k=Zn.Video|Zn.LwoVideo;if(this._p2pChannel.hasRemoteMedia(S,R)){await this._p2pChannel.unmuteRemoteNoLock(S,R);const F=i.get(S);i.set(S,R==="video"?F^k:F^Zn.Audio),n.splice(E,1)}}this.store.massSubscribe(n.map(E=>({userId:E.user.uid,type:E.mediaType})),r);const g=Uc(p=Array.from(i.entries())).call(p,(E,C)=>{let[S,R]=C;if(R===0)return E;const k={stream_id:S.uid,stream_type:R};return R&Zn.Audio&&(k.audio_ssrc=S._audioSSRC),R&Zn.Video&&(k.video_ssrc=S._videoSSRC),E.push(k),E},[]);try{n.length>0&&await this._p2pChannel.massSubscribeNoLock(n.map(C=>{let{user:S,mediaType:R}=C;return{user:S,mediaType:R,ssrcId:R===at.VIDEO?S._videoSSRC:S._audioSSRC,rtxSsrcId:R===at.VIDEO?S._rtxSsrcId:void 0}}));const E=new Map;if(g.length>0){const C=await this._gateway.subscribeAll(g,!0);((C==null?void 0:C.users)||[]).forEach(S=>{let{stream_id:R,video_error_code:k,audio_error_code:F,error_code:W}=S;(k||F||W)&&E.set(R,{video_error_code:k,audio_error_code:F,error_code:W})})}if(Array.from(E.entries()).length>0){const C=Array.from(E.entries()).map(S=>{let R,[k,F]=S;return F.error_code||F.video_error_code&&F.audio_error_code?R=void 0:F.video_error_code?R=at.VIDEO:F.audio_error_code&&(R=at.AUDIO),{user:this.remoteUsers.find(W=>W.uid===k),mediaType:R}});await this._p2pChannel.massUnsubscribeNoLock(C)}for(const C of l){const S=E.get(C.user.uid);if(S){const R=S.error_code||C.mediaType==="audio"&&S.audio_error_code||C.mediaType==="video"&&S.video_error_code;if(R){const k=Cp(R);M.error("user:".concat(C.user.uid," mediaType:").concat(C.mediaType," has massSubscribe error ").concat(k.desc)),C.error=new q($.SUBSCRIBE_FAILED,"code ".concat(R,": ").concat(k.desc))}}C.error||(C.mediaType==="video"?C.track=C.user.videoTrack:C.track=C.user.audioTrack)}return this.store.massSubscribe(l.filter(C=>!C.error).map(C=>({userId:C.user.uid,type:C.mediaType})),void 0,Date.now()),l.forEach(C=>{var S;ke.subscribe(this.store.sessionId,{succ:!!C.error,ec:((S=C.error)===null||S===void 0?void 0:S.code)||null,video:C.mediaType===at.VIDEO,audio:C.mediaType===at.AUDIO,peerid:C.user.uid,subscribeRequestid:C.mediaType===at.VIDEO?C.user._videoSSRC:C.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-r)},!0)}),M.info("[".concat(this._clientId,"] massSubscribe success ").concat(n.map(C=>{let{user:S,mediaType:R}=C;return"user: ".concat(S==null?void 0:S.uid,", mediaType: ").concat(R)}).join("; "))),l}catch(E){throw await this._p2pChannel.massUnsubscribeNoLock(n),E}}finally{d(),a()}}async unsubscribe(n,r){if(r&&Tr(r,"mediaType",["audio","video"]),!this._joinInfo)throw new q($.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(a=>a===n)){const a=new q($.INVALID_REMOTE_USER,"user is not in the channel");throw M.error("[".concat(this._clientId,"] can not unsubscribe ").concat(n.uid,", user is not in the channel")),a}M.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(n.uid,", mediaType: ").concat(r));const i=await this._subscribeMutex.lock();try{const a=await this._p2pChannel.unsubscribe(n,r);a&&await this._gateway.unsubscribe(a,n.uid),M.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(n.uid,", mediaType: ").concat(r))}catch(a){if(a.code===$.DISCONNECT_P2P)return void M.warning("disconnecting p2p, abort unsubscribe request.");throw M.error("[".concat(this._clientId,"] unsubscribe user ").concat(n.uid," error"),a.toString()),a}finally{i()}}async massUnsubscribe(n){if(rc(n,"unsubscribeList"),!this._joinInfo)throw new q($.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");M.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(n.map(i=>{let{user:a,mediaType:l}=i;return"user: ".concat(a==null?void 0:a.uid,", mediaType: ").concat(l,";")}).join())),n=[...n];const r=new Map;for(let i=n.length-1;i>=0;i--){const{user:a,mediaType:l}=n[i];if(!a){const p=new q($.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw M.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),p}if(Tr(l,"mediaType",["video","audio",void 0]),!this._users.find(p=>p===a)){M.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(a.uid,", user is not in the channel")),n.splice(i,1);continue}const d=Zn.Video|Zn.LwoVideo;if(r.has(a)){const p=r.get(a);let g;switch(l){case"video":g=p&d;break;case"audio":g=p&Zn.Audio;break;default:g=p&(Zn.Audio|d)}if(g){M.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(a.uid,",mediaType:").concat(l," twice.")),n.splice(i,1);continue}l?l==="audio"?r.set(a,p|Zn.Audio):l==="video"&&r.set(a,p|d):r.set(a,p|Zn.Audio|d)}else l?l==="audio"?r.set(a,Zn.Audio):l==="video"&&r.set(a,d):r.set(a,Zn.Audio|d)}try{const i=await this._p2pChannel.massUnsubscribe(n);i&&await this._gateway.massUnsubscribe(i),M.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(n.map(a=>{let{user:l,mediaType:d}=a;return"user: ".concat(l==null?void 0:l.uid,", mediaType: ").concat(d,";")}).join()))}catch(i){if(i.code===$.DISCONNECT_P2P)return void M.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw M.error("[".concat(this._clientId,"] massUnsubscribe error"),i.toString()),i}}setLowStreamParameter(n){(function(i){if(!i)throw new q($.INVALID_PARAMS);Sn(i.width)||XS(i.width,"streamParameter.width"),Sn(i.height)||XS(i.height,"streamParameter.height"),Sn(i.framerate)||XS(i.framerate,"streamParameter.framerate"),Sn(i.bitrate)||sn(i.bitrate,"streamParameter.bitrate")})(n),(!n.width&&n.height||n.width&&!n.height)&&M.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),M.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(n));const r=this._configDistribute.getLowStreamConfigDistribute();r&&r.bitrate&&n.bitrate&&r.bitrate<n.bitrate&&(n.bitrate=r.bitrate),this._lowStreamParameter=n}async enableDualStream(){if(!Gn().supportDualStream)throw ke.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new q($.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new q($.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(n){throw ke.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),n}this._isDualStreamEnabled=!0,ke.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),M.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new q($.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(Pe.LocalVideoLowTrack))try{const n=await this._p2pChannel.unpublishLowStream();n&&await this._gateway.unpublish(n,this._joinInfo.stringUid||this._joinInfo.uid)}catch(n){throw ke.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),n}this._isDualStreamEnabled=!1,ke.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),M.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(n,r){if(function(i){Tr(i,"role",["audience","host"])}(n),r&&ix(r),this.mode==="rtc")throw M.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole")),new q($.INVALID_OPERATION,"rtc mode can not use setClientRole");if(r&&r.level&&n==="host")throw new q($.INVALID_OPERATION,"host mode can not set audience latency level");if(n==="audience"&&this._p2pChannel.hasLocalMedia())throw new q($.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(n,r),this._config.role=n,M.info("[".concat(this._clientId,"] set client role to ").concat(n,", level: ").concat(r&&r.level))}setProxyServer(n,r){if(Kr(n,"proxyServer"),!r){if(this.connectionState!=="DISCONNECTED")throw new q($.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new q($.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=n,ke.setProxyServer(this._proxyServer),M.setProxyServer(this._proxyServer),M.info("[".concat(this._clientId,"] Set proxy server ").concat(r?"by initialize call":""," success."))}setTurnServer(n,r){if(Array.isArray(n)||(n=[n]),!r){if(this.connectionState!=="DISCONNECTED")throw new q($.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new q($.INVALID_OPERATION,"You have already set the proxy")}if(gp(n))return this._turnServer={servers:n,mode:"original-manual"},void M.info("[".concat(this._clientId,"] Set original turnserver ").concat(r?"by initialize call":""," success: ").concat(n.map(i=>i.urls).join(","),"."));n.forEach(i=>rx(i)),this._turnServer={servers:n,mode:"manual"},M.info("[".concat(this._clientId,"] Set turnserver ").concat(r?"by initialize call":""," success."))}setLicense(n){if(this.connectionState!=="DISCONNECTED")throw new q($.INVALID_OPERATION,"you should set license before join channel");if(Kr(n,"license",32,32),!/^[A-Za-z\d]+$/.test(n))throw new q($.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=n,M.info("[".concat(this._clientId,"] set license success"),n)}startProxyServer(n){if(this.connectionState!=="DISCONNECTED")throw new q($.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint)throw new q($.INVALID_OPERATION,"You have already set the proxy");const r=[3,4,5];let i;switch(n===void 0&&(n=3),n){case 1:case 2:throw new q($.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:i="proxy3";break;case 4:i="proxy4";break;case 5:i="proxy5";break;default:throw new q($.INVALID_PARAMS,"proxy server mode must be ".concat(r.join("|")))}this._cloudProxyServerMode=i,this.store.cloudProxyServerMode=i,M.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if(this.connectionState!=="DISCONNECTED")throw new q($.INVALID_OPERATION,"Stop proxy server after leave channel");ke.setProxyServer(),M.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",M.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(n){if(!n.accessPoints)throw new q($.INVALID_PARAMS,"accessPoints is required.");rc(n.accessPoints.serverList,"accessPoints.serverList"),Kr(n.accessPoints.domain,"accessPoints.domain");const r=(k,F)=>{sn(k,F,0,65535,!0)};let i=443;if(n.accessPoints.port&&(r(n.accessPoints.port,"accessPoints.port"),i=n.accessPoints.port),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new q($.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");re("CLOSE_AFB_FOR_LOCAL_AP")&&(rn("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),rn("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const a=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,l=n.accessPoints.domain,d=n.accessPoints.serverList.map(k=>a.test(k)?"".concat(k.replace(/\./g,"-"),".").concat(l):k),p=d.map(k=>"".concat(k,":").concat(i));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,rn("WEBCS_DOMAIN",p),rn("WEBCS_DOMAIN_BACKUP_LIST",p),rn("GATEWAY_DOMAINS",[l]),n.report&&n.report.hostname&&Array.isArray(n.report.hostname)&&n.report.hostname.length?(rc(n.report.hostname,"report.hostname"),rn("EVENT_REPORT_DOMAIN",n.report.hostname[0]),rn("EVENT_REPORT_BACKUP_DOMAIN",n.report.hostname[1]||n.report.hostname[0])):(rn("EVENT_REPORT_DOMAIN",d[0]),rn("EVENT_REPORT_BACKUP_DOMAIN",d[1]||d[0]));let g=6443;n.report&&n.report.port&&(r(n.report.port,"report.port"),g=n.report.port),rn("STATS_COLLECTOR_PORT",g),n.report?rn("ENABLE_EVENT_REPORT",!0):rn("ENABLE_EVENT_REPORT",!1);let E="";n.log&&n.log.hostname&&Array.isArray(n.log.hostname)&&n.log.hostname.length?(rc(n.log.hostname,"log.hostname"),E=n.log.hostname[0]):E=d[0];let C=6444;n.log&&n.log.port&&(r(n.log.port,"log.port"),C=n.log.port),rn("LOG_UPLOAD_SERVER","".concat(E,":").concat(C));let S=[];n.cds&&n.cds.hostname&&Array.isArray(n.cds.hostname)&&n.cds.hostname.length?(rc(n.cds.hostname,"cds.hostname"),S=n.cds.hostname):S=d;let R=443;n.cds&&n.cds.port&&(r(n.cds.port,"cds.port"),R=n.cds.port),rn("CDS_AP",S.map(k=>"".concat(k,":").concat(R))),n.cds?rn("ENABLE_CONFIG_DISTRIBUTE",!0):rn("ENABLE_CONFIG_DISTRIBUTE",!1),M.info("set local access point v2 success")}setLocalAccessPoints(n,r){if(rc(n,"serverList"),Kr(r,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new q($.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const i=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;n=n.map(a=>i.test(a)?"".concat(a.replace(/\./g,"-"),".").concat(r):a),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,rn("WEBCS_DOMAIN",n),rn("WEBCS_DOMAIN_BACKUP_LIST",n),rn("GATEWAY_DOMAINS",[r]),rn("EVENT_REPORT_DOMAIN",n[0]),rn("EVENT_REPORT_BACKUP_DOMAIN",n[1]||n[0]),rn("LOG_UPLOAD_SERVER","".concat(n[0],":6444")),M.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(n){if(Tr(n,"streamType",[0,1]),this._remoteDefaultVideoStreamType=n,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(n),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(r){throw M.error("[".concat(this._clientId,"] set default remote video stream type error"),r.toString()),r}else M.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(n))}async setRemoteVideoStreamType(n,r){Tr(r,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(n,r),setTimeout(()=>{const i=this._users.find(a=>a.uid===n);i&&i.videoTrack&&i.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(i){throw M.error("[".concat(this._clientId,"] set remote video stream type error"),i.toString()),i}M.info("[".concat(this._clientId,"] set remote ").concat(n," video stream type to ").concat(r)),this._remoteStreamTypeCacheMap.set(n,r)}async setStreamFallbackOption(n,r){Tr(r,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(n,r)}catch(i){throw M.error("[".concat(this._clientId,"] set stream fallback option"),i.toString()),i}M.info("[".concat(this._clientId,"] set remote ").concat(n," stream fallback type to ").concat(r)),this._streamFallbackTypeCacheMap.set(n,r)}setEncryptionConfig(n,r,i){if(function(a){Tr(a,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(n),Kr(r,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(n)){if(!i||!(i instanceof Uint8Array&&i.length===32))throw new q($.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(i)throw new q($.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test(r)||M.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),this._encryptionMode=n,this._encryptionSecret=r,i&&(this._encryptionSalt=x0(i))}async renewToken(n){if(Kr(n,"token",1,2047),!this._key||!this._joinInfo)throw new q($.INVALID_OPERATION,"renewToken should not be called before user join");const r=this._key;this._key=n,this._joinInfo&&(this._joinInfo.token=n);const i=await this._renewTokenMutex.lock();try{if(re("USE_NEW_TOKEN")){M.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const a=await VK(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Jn);M.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:n,ticket:a})}else M.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:n});M.debug("[".concat(this._clientId,"] renewToken success"))}catch(a){throw this._key=r,this._joinInfo.token=r,M.error("[".concat(this._clientId,"] renewToken failed"),a.toString()),a}finally{i()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?M.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{const n=this._p2pChannel.getAudioLevels();this.safeEmit(vt.VOLUME_INDICATOR,n)},re("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const n=this._statsCollector.getRTCStats(),r=this._gateway.getInChannelInfo();return n.Duration=Math.round(r.duration/1e3),n}async startLiveStreaming(n,r){if(!r){if(this.codec!=="h264")throw new q($.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new q($.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(n)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(n))throw new q($.LIVE_STREAMING_TASK_CONFLICT);const i=r?ar.TRANSCODE:ar.RAW;return this._createLiveStreamingClient(i).startLiveStreamingTask(n,i)}setLiveTranscoding(n){return this._createLiveStreamingClient(ar.TRANSCODE).setTranscodingConfig(n)}async stopLiveStreaming(n){const r=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(i=>i&&i.hasUrl(n));if(!r.length)throw new q($.INVALID_PARAMS,"can not find live streaming url to stop");await Ae.all(r.map(i=>i&&i.stopLiveStreamingTask(n)))}async addInjectStreamUrl(n,r){if(!this._joinInfo)throw new q($.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const i=this._createLiveStreamingClient(ar.INJECT);i.setInjectStreamConfig(r,0),await i.startLiveStreamingTask(n,ar.INJECT)}async removeInjectStreamUrl(){var n;const r=this._createLiveStreamingClient(ar.INJECT),i=Array.from(Os(n=r.streamingTasks).call(n)).find(a=>a.mode===ar.INJECT);if(!this._joinInfo||!i)throw new q($.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await r.stopLiveStreamingTask(i.url)}async startChannelMediaRelay(n){ED(n),await this._createChannelMediaRelayClient().startChannelMediaRelay(n)}async updateChannelMediaRelay(n){ED(n),await this._createChannelMediaRelayClient().updateChannelMediaRelay(n)}async stopChannelMediaRelay(){await this._createChannelMediaRelayClient().stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}sendStreamMessage(n){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new q($.INVALID_OPERATION,"can not send data stream, not joined");if(typeof n=="string"&&(n=new TextEncoder().encode(n)),new Blob([n]).size>1024)throw new q($.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(Ye.DATA_STREAM,{payload:x0(n)},!r)}sendMetadata(n){if(!this._joinInfo)throw new q($.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([n]).size>1024)throw new q($.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Ye.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:x0(n)})}async sendCustomReportMessage(n){if(Array.isArray(n)||(n=[n]),n.forEach(Z7),!this._joinInfo)throw new q($.INVALID_OPERATION,"can not send custom report, not joined");await ke.sendCustomReportMessage(this._joinInfo.sid,n)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(n,r){Tr(r.spatialLayer,"spatialLayer",[0,1,2,3]),Tr(r.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(n,r)}catch(i){throw M.error("[".concat(this._clientId,"] pick SVC layer failed"),i.toString()),i}}_reset(){if(M.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=wo.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach(n=>{n._audioTrack&&n._audioTrack._destroy(),n._videoTrack&&n._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new bi("client-publish"),this._subscribeMutex=new bi("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}if(this._moderation)try{this.setImageModeration(!1)}catch{}}_startSession(n,r){const i=n||Ry();n?M.debug("[".concat(this._clientId,"] new Session ").concat(i)):M.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(i)),this._sessionId=i,this.store.sessionId=i,r?ke.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:r.channel,appid:r.appId,mode:this.mode}):this._joinInfo?ke.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this.mode}):this._gateway.joinInfo&&ke.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this.mode}),this._joinInfo&&(this._joinInfo.sid=i),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=i)}async _publishHighStream(n){if(!this._joinInfo||this._uid===void 0)throw new q($.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q($.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&re("FORCE_TURN")&&!re("TURN_ENABLE_TCP")&&!re("TURN_ENABLE_UDP"))throw new q($.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");M.debug("[".concat(this._clientId,"] publish high stream"));try{const i=await this._p2pChannel.publish(n,this._isDualStreamEnabled,this._lowStreamParameter),a=(await i.next()).value;if(a){var r;let l;try{l=await this._gateway.publish(this._uid,a,!0)}catch(d){if(d.code!==$.DISCONNECT_P2P)throw i.throw(d),d}await i.next(((r=l)===null||r===void 0?void 0:r.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const l of n)l instanceof nr&&l._encoderConfig&&this._gateway.setVideoProfile(l._encoderConfig),!l.muted&&l.enabled||await this._p2pChannel.muteLocalTrack(l)}catch(i){if(this._p2pChannel.reportPublishEvent(!1,i==null?void 0:i.code,n),(i==null?void 0:i.code)===$.WS_ABORT)return;throw i}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new q($.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q($.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));M.debug("[".concat(this._clientId,"] publish low stream"));const n=this._configDistribute.getLowStreamConfigDistribute();n&&n.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&n.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=n.bitrate));try{const i=await this._p2pChannel.publishLowStream(this._lowStreamParameter),a=(await i.next()).value;if(a){var r;let l;try{l=await this._gateway.publish(this._uid,a,!0)}catch(d){if(d.code!==$.DISCONNECT_P2P)throw i.throw(d),d}i.next(((r=l)===null||r===void 0?void 0:r.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(i){if(this._p2pChannel.reportPublishEvent(!1,i==null?void 0:i.code,void 0,!0),(i==null?void 0:i.code)===$.WS_ABORT)return;throw i}}_createLiveStreamingClient(n){if(!this._joinInfo||!this._appId)return new q($.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const r=()=>new $K(this._joinInfo,this._config.websocketRetryConfig||Jn,this._config.httpRetryConfig||Jn),i=a=>{a.onLiveStreamError=(l,d)=>{ke.reportApiInvoke(this._sessionId,{name:Qn.ON_LIVE_STREAM_ERROR,options:[l,d],tag:Tn.TRACER}).onSuccess(),this.safeEmit(vt.LIVE_STREAMING_ERROR,l,d)},a.onLiveStreamWarning=(l,d)=>{ke.reportApiInvoke(this._sessionId,{name:Qn.ON_LIVE_STREAM_WARNING,options:[l,d],tag:Tn.TRACER}).onSuccess(),this.safeEmit(vt.LIVE_STREAMING_WARNING,l,d)},a.on(fd.REQUEST_WORKER_MANAGER_LIST,(l,d,p)=>{if(!this._joinInfo)return p(new q($.INVALID_OPERATION,"can not find join info to get worker manager"));hD(l,this._joinInfo,this._axiosCancelSource.token,Jn).then(d).catch(p)})};switch(n){case ar.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=r(),i(this._liveRawStreamingClient)),this._liveRawStreamingClient;case ar.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=r(),i(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case ar.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=r(),this._injectStreamingClient.on(fd.REQUEST_WORKER_MANAGER_LIST,(a,l,d)=>{if(!this._joinInfo)return d(new q($.INVALID_OPERATION,"can not find join info to get worker manager"));hD(a,this._joinInfo,this._axiosCancelSource.token,Jn).then(l).catch(d)}),this._injectStreamingClient.onInjectStatusChange=(a,l,d)=>{this.emit(vt.INJECT_STREAM_STATUS,a,l,d)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){if(!this._joinInfo)return new q($.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:n,sendResolutionHeight:r}=this.getLocalVideoStats(),i={width:n,height:r};this._channelMediaRelayClient=new WK(this._joinInfo,this._clientId,this._config.websocketRetryConfig||Jn,this._config.httpRetryConfig||Jn,i),this._channelMediaRelayClient.on("state",a=>{a===Ti.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.safeEmit(vt.CHANNEL_MEDIA_RELAY_STATE,a)}),this._channelMediaRelayClient.on("event",a=>{this.safeEmit(vt.CHANNEL_MEDIA_RELAY_EVENT,a)}),this._statsCollector.onStatsChanged=(a,l)=>{var d;a==="resolution"&&((d=this._channelMediaRelayClient)===null||d===void 0||d.setVideoProfile(l))}}return this._channelMediaRelayClient}_handleGatewayEvents(){this._gateway.on(bn.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(bn.CONNECTION_STATE_CHANGE,(n,r,i)=>{var a;if(i===Wt.FALLBACK)return;const l=()=>{this.safeEmit(vt.CONNECTION_STATE_CHANGE,n,r,i)};if(ke.reportApiInvoke(this._sessionId||((a=this._gateway.joinInfo)===null||a===void 0?void 0:a.sid)||null,{name:Qn.CONNECTION_STATE_CHANGE,options:[n,r,i],tag:Tn.TRACER}).onSuccess(JSON.stringify({cur:n,prev:r,reason:i})),M.info("[".concat(this._clientId,"] connection state change: ").concat(r," -> ").concat(n)),n==="DISCONNECTED")return this._reset(),void l();if(n==="RECONNECTING")this._users.forEach(p=>{p._trust_in_room_=!1,p._trust_audio_enabled_state_=!1,p._trust_video_enabled_state_=!1,p._trust_audio_mute_state_=!1,p._trust_video_mute_state_=!1,p._trust_audio_stream_added_state_=!1,p._trust_video_stream_added_state_=!1,p._audioSSRC=void 0,p._videoSSRC=void 0,p._videoOrtc=void 0,p._audioOrtc=void 0,p._cname=void 0,p._rtxSsrcId=void 0}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(n==="CONNECTED"){var d;this._streamFallbackTypeCacheMap.forEach((p,g)=>{this._gateway.setStreamFallbackOption(g,p).catch(E=>{M.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),E)})}),this._remoteStreamTypeCacheMap.forEach((p,g)=>{this._gateway.setRemoteVideoStreamType(g,p).catch(E=>{M.warning("[".concat(this._clientId,"] auto set remote stream type failed"),E)})}),this._remoteDefaultVideoStreamType!==void 0&&((d=this._joinInfo)===null||d===void 0?void 0:d.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{M.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(p=>{M.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(p))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(p=>!p._trust_in_room_).forEach(p=>{M.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(p.uid)),this._handleUserOffline({uid:p.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(p=>{p._trust_audio_mute_state_||(M.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(p.uid)),this._handleMuteStream(p.uid,"audio",!1)),p._trust_video_mute_state_||(M.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(p.uid)),this._handleMuteStream(p.uid,"video",!1)),p._trust_audio_enabled_state_||(M.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(p.uid)),this._handleSetStreamLocalEnable("audio",p.uid,!0)),p._trust_video_enabled_state_||(M.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(p.uid)),this._handleSetStreamLocalEnable("video",p.uid,!0)),p._trust_video_stream_added_state_||(M.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(p.uid)),this._handleResetAddStream(p,"video")),p._trust_audio_stream_added_state_||(M.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(p.uid)),this._handleResetAddStream(p,"audio")),p._video_added_||p._audio_added_||(M.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(p.uid)),this._handleRemoveStream({uid:p.uid,uint_id:p._uintid}))}))},1e3)}l()}),this._gateway.on(bn.REQUEST_NEW_GATEWAY_LIST,(n,r)=>{if(!this._joinInfo)return r(new q($.UNEXPECTED_ERROR,"can not recover, no join info"));Dy(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Jn,this.store).then(i=>{this._joinInfo&&(this._joinInfo.apResponse=i.gatewayInfo.res,this._joinInfo.gatewayAddrs=i.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=i.gatewayInfo.uni_lbs_ip),n(i.gatewayInfo.gatewayAddrs.map(a=>{if(this._joinInfo&&this._joinInfo.proxyServer){const l=a.address.split(":");return"wss://".concat(this._joinInfo.proxyServer,"/ws/?h=").concat(l[0],"&p=").concat(l[1])}return"wss://".concat(a.address)}))}).catch(r)}),this._gateway.on(bn.NETWORK_QUALITY,n=>{this._networkQualitySensitivity==="normal"&&this.safeEmit(vt.NETWORK_QUALITY,n)}),this._gateway.on(bn.STREAM_TYPE_CHANGE,(n,r)=>{this.safeEmit(vt.STREAM_TYPE_CHANGED,n,r),ke.reportApiInvoke(this._sessionId,{name:Qn.STREAM_TYPE_CHANGE,options:[n,r],tag:Tn.TRACER}).onSuccess(JSON.stringify({uid:n,streamType:r}))}),this._gateway.on(bn.IS_P2P_DISCONNECTED,n=>{this._p2pChannel.isP2PDisconnected()?n(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?n(!1):n(!0)}),this._gateway.on(bn.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(bn.REQUEST_P2P_CONNECTION_PARAMS,async(n,r,i)=>{try{r(await this._p2pChannel.startP2PConnection(n))}catch(a){i(a)}}),this._gateway.on(bn.JOIN_RESPONSE,(n,r)=>{const{dtlsParameters:i,iceParameters:a,candidates:l,rtpCapabilities:d,setup:p,cname:g}=Bk(n.ortc,r);this._p2pChannel.connect(a,i,l,d,p,g)}),this._gateway.on(bn.REQUEST_DC_CONNECTION_PARAMS,n=>{n(this._p2pChannel.getEstablishParams())}),this._gateway.on(bn.RESET_SIGNAL,n=>{this._p2pChannel.resetConnection(n),this._handleGatewaySignalEvents()}),this._gateway.on(bn.DATACHANNEL_FAILBACK,()=>{this._joinGateway()}),this._gateway.on(bn.DATACHANNEL_PRECONNECT,async(n,r,i,a)=>{var l,d,p,g,E,C;await this._p2pChannel.startP2PConnection({turnServer:(l=this._joinInfo)===null||l===void 0?void 0:l.turnServer},!0);const S=function(R,k){let F;return k&&k.ip&&typeof k.port=="number"?(F=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:k.ip,port:k.port.toString(),type:"host",extension:{}}],M.debug("Using remote candidate from AP ".concat(k.ip,":").concat(k.port)),k.ip6&&(F.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:k.ip6,port:k.port.toString(),type:"host",extension:{}}),M.debug("Using IPV6 remote candidate from AP ".concat(k.ip6,":").concat(k.port)))):F=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:R.ip,port:R.port.toString(),type:"host",extension:{}}],F}(n,r);return this._p2pChannel.preConnect({iceUfrag:"".concat((d=this._joinInfo)===null||d===void 0?void 0:d.apResponse.cid,"_").concat((p=this._joinInfo)===null||p===void 0?void 0:p.apResponse.cert),icePwd:"".concat((g=this._joinInfo)===null||g===void 0?void 0:g.apResponse.cid,"_").concat((E=this._joinInfo)===null||E===void 0?void 0:E.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:(C=re("FINGERPRINT"))!==null&&C!==void 0?C:n.fingerprint}]},S,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(i).catch(a)})}_handleGatewaySignalEvents(){this._gateway.signal.on(ft.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(ft.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(ft.ON_ADD_AUDIO_STREAM,n=>this._handleAddAudioOrVideoStream("audio",n.uid,n.ssrcId,n.cname,n.uint_id,n.ortc)),this._gateway.signal.on(ft.ON_ADD_VIDEO_STREAM,n=>this._handleAddAudioOrVideoStream("video",n.uid,n.ssrcId,n.cname,n.uint_id,n.ortc,n.rtxSsrcId)),this._gateway.signal.on(ft.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(ft.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(ft.MUTE_AUDIO,n=>this._handleMuteStream(n.uid,"audio",!0)),this._gateway.signal.on(ft.UNMUTE_AUDIO,n=>this._handleMuteStream(n.uid,"audio",!1)),this._gateway.signal.on(ft.MUTE_VIDEO,n=>this._handleMuteStream(n.uid,"video",!0)),this._gateway.signal.on(ft.UNMUTE_VIDEO,n=>this._handleMuteStream(n.uid,"video",!1)),this._gateway.signal.on(ft.RECEIVE_METADATA,n=>{const r=wy(n.metadata);this.safeEmit(vt.RECEIVE_METADATA,n.uid,r)}),this._gateway.signal.on(ft.ON_DATA_STREAM,n=>{n.seq&&delete n.seq,n.payload=wy(n.payload),this.safeEmit(vt.STREAM_MESSAGE,n.uid,n.payload),this.onStreamMessage&&this.onStreamMessage(n)}),this._gateway.signal.on(ft.ON_CRYPT_ERROR,()=>{Sp(()=>{M.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(vt.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(ft.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(ft.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{M.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0),this.safeEmit(vt.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(ft.ON_STREAM_FALLBACK_UPDATE,n=>{M.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(n.stream_id,", attr: ").concat(n.stream_type)),this.safeEmit(vt.STREAM_FALLBACK,n.stream_id,n.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(ft.ON_PUBLISH_STREAM,n=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:n.proxy})),M.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(n))))}),this._gateway.signal.on(ft.ENABLE_LOCAL_VIDEO,n=>{this._handleSetStreamLocalEnable("video",n.uid,!0)}),this._gateway.signal.on(ft.DISABLE_LOCAL_VIDEO,n=>{this._handleSetStreamLocalEnable("video",n.uid,!1)}),this._gateway.signal.on(je.REQUEST_TIMEOUT,(n,r)=>{if(this._joinInfo)switch(n){case Ye.PUBLISH:{if(!r)return;const p=(r=r).ortc;if(p){var i,a,l,d;const g=p.some(S=>{let{stream_type:R}=S;return R===sr.Audio}),E=p.some(S=>{let{stream_type:R}=S;return R!==sr.Audio}),C=p.some(S=>{let{stream_type:R}=S;return R===sr.Screen||R===sr.ScreenLow});r.state==="offer"&&ke.publish(this._joinInfo.sid,{eventElapse:Qo.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:$.TIMEOUT,audio:g,video:E,p2pid:r.p2p_id,publishRequestid:this.store.pubId,screenshare:C,audioName:g?(i=p.find(S=>{let{stream_type:R}=S;return R===sr.Audio}))===null||i===void 0||(a=i.ssrcs[0])===null||a===void 0?void 0:a.ssrcId.toString():void 0,videoName:E?(l=p.find(S=>{let{stream_type:R}=S;return R!==sr.Audio}))===null||l===void 0||(d=l.ssrcs[0])===null||d===void 0?void 0:d.ssrcId.toString():void 0})}break}case Ye.SUBSCRIBE:(r=r)&&ke.subscribe(this._joinInfo.sid,{succ:!1,ec:$.TIMEOUT,audio:r.stream_type===at.AUDIO,video:r.stream_type===at.VIDEO,peerid:r.stream_id,subscribeRequestid:r.ssrcId,p2pid:this.store.p2pId,eventElapse:Qo.measureFromSubscribeStart(this.store.clientId,r.ssrcId)})}}),this._gateway.signal.on(ft.ON_P2P_OK,n=>{this.uid,this._uid}),this._gateway.signal.on(ft.ON_PUBLISHED_USER_LIST,n=>{if(n==null||!n.users)return;re("BLOCK_LOCAL_CLIENT")&&(n.users=n.users.filter(a=>!Xl(a.audio_ssrc,this.channelName)));const r=[],i=[];for(const a of n.users){let l=this._users.find(C=>C.uid===a.stream_id);l?l._trust_in_room_=!0:(l=new My(a.stream_id,a.stream_id),this._users.push(l),this.getListeners(vt.PUBLISHED_USER_LIST).length===0&&(M.debug("[".concat(this._clientId,"] user online"),a.stream_id),this.safeEmit(vt.USER_JOINED,l)));const d=Zn.Audio&a.stream_type,p=(Zn.Video|Zn.LwoVideo)&a.stream_type,g=d&&l.hasAudio,E=p&&l.hasVideo;p&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0,l._videoSSRC=a.video_ssrc,l._rtxSsrcId=a.video_rtx),d&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0,l._audioSSRC=a.audio_ssrc),d&&!g&&this.getListeners(vt.PUBLISHED_USER_LIST).length===0&&(M.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published audio")),this.safeEmit(vt.USER_PUBLISHED,l,"audio")),p&&!E&&this.getListeners(vt.PUBLISHED_USER_LIST).length===0&&(M.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published video")),this.safeEmit(vt.USER_PUBLISHED,l,"video")),(d&&!g||p&&!E)&&r.push(l),p&&this._p2pChannel.hasPendingRemoteMedia(l,"video")&&i.push({user:l,mediaType:"video"}),d&&this._p2pChannel.hasPendingRemoteMedia(l,"audio")&&i.push({user:l,mediaType:"audio"})}i.length>0&&(M.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(i.map(a=>"user: ".concat(a.user.uid,", mediaType: ").concat(a.mediaType)).join("; ")," ")),this.massSubscribe(i).catch(a=>{M.error("[".concat(this._clientId,"] mass resubscribe error"),a.toString())})),this.getListeners(vt.PUBLISHED_USER_LIST).length>0?(M.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(r.map(a=>a.uid).join(", "))),this.safeEmit(vt.PUBLISHED_USER_LIST,r)):M.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(r.map(a=>a.uid).join(", ")))})}_handleP2PChannelEvents(){this._p2pChannel.on(wt.RequestMuteLocal,async(n,r,i)=>{if(this._joinInfo)try{await this._gateway.muteLocal(n,this._joinInfo.stringUid||this._joinInfo.uid),r()}catch(a){a.code===$.DISCONNECT_P2P?r():i(a)}else r()}),this._p2pChannel.on(wt.RequestUnmuteLocal,async(n,r,i)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(n,this._joinInfo.stringUid||this._joinInfo.uid),r()}catch(a){a.code===$.DISCONNECT_P2P?r():i(a)}else r()}),this._p2pChannel.on(wt.RequestRePublish,(n,r,i)=>{this.publish(n,!1).then(r).catch(i)}),this._p2pChannel.on(wt.RequestReSubscribe,async(n,r,i)=>{try{for(const{user:a,kind:l}of n)l===at.VIDEO?await this.subscribe(a,"video"):await this.subscribe(a,"audio");r()}catch(a){i(a)}}),this._p2pChannel.on(wt.RequestUploadStats,(n,r)=>{this._gateway.uploadStats(n,r)}),this._p2pChannel.on(wt.MediaReconnectStart,n=>{this.safeEmit(vt.MEDIA_RECONNECT_START,n)}),this._p2pChannel.on(wt.MediaReconnectEnd,n=>{this.safeEmit(vt.MEDIA_RECONNECT_END,n)}),this._p2pChannel.on(wt.NeedSignalRTT,n=>{n(this._gateway.getSignalRTT())}),this._p2pChannel.on(wt.RequestRestartICE,async n=>{const r=await this._p2pChannel.restartICE(n),i=await r.next();if(i.done)return;const a=i.value;let l;try{l=await this._gateway.restartICE({iceParameters:a})}catch(p){return void r.throw(p)}const{iceParameters:d}=function(p){const g=p.iceParameters;return{iceParameters:{iceUfrag:g.iceUfrag,icePwd:g.icePwd}}}(l);await r.next({remoteIceParameters:d})}),this._p2pChannel.on(wt.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(wt.RequestReconnectPC,async()=>{var n;const{iceParameters:r,dtlsParameters:i,rtpCapabilities:a}=await this._p2pChannel.startP2PConnection({turnServer:(n=this._joinInfo)===null||n===void 0?void 0:n.turnServer}),{gatewayEstablishParams:l,gatewayAddress:d}=await this._gateway.reconnectPC({iceParameters:r,dtlsParameters:i,rtpCapabilities:a}),{dtlsParameters:p,iceParameters:g,candidates:E,rtpCapabilities:C,setup:S,cname:R}=Bk(l,d);await this._p2pChannel.connect(g,p,E,C,S,R),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(wt.RequestUnpublishForReconnectPC,async(n,r,i)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(n,this._uid),r()):i()}),this._p2pChannel.on(wt.P2PLost,()=>{this.safeEmit(vt.P2P_LOST,this.store.uid)}),this._p2pChannel.on(wt.UpdateVideoEncoder,n=>{n._encoderConfig&&this._gateway.setVideoProfile(n._encoderConfig)}),this._p2pChannel.on(wt.ConnectionTypeChange,n=>{this.safeEmit(vt.IS_USING_CLOUD_PROXY,n)}),this._p2pChannel.on(wt.RequestLowStreamParameter,n=>{n(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(wt.QueryClientConnectionState,n=>{n(this.connectionState)})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(n){if(this.connectionState!=="CONNECTED"||!this._joinInfo)throw new q($.INVALID_OPERATION,"[".concat(this._clientId,"] Client did not join channel"));if(this._inspect)throw new q($.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));if(!n)throw new q($.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig is necessary"));if(!n.inspectType||!Array.isArray(n.inspectType))throw new q($.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));{const r=[...new Set(n.inspectType)];r.forEach(i=>{if(!["supervise","moderation"].includes(i))throw new q($.INVALID_PARAMS,"[".concat(this._clientId,"] ").concat(i," is not a valid inspect type."))}),n.inspectType=r}if(n&&n.extraInfo&&n.extraInfo.length>1024)throw new q($.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const r=new J0(n);this._inspect=r,this.handleVideoInspectEvents(this._inspect),await r.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},Jn)}catch(r){throw Array.isArray(r)?r[0]:r}}async disableContentInspect(){if(!this._inspect)throw new q($.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(n){throw Array.isArray(n)?n[0]:n}}async setImageModeration(n,r){if(hd(n,"enabled"),n){if(!r)throw new q($.INVALID_PARAMS,"[".concat(this._clientId,"] config is necessary"));if(sn(r.interval,"interval",1e3,1/0),this.connectionState!=="CONNECTED"||!this._joinInfo)throw new q($.INVALID_OPERATION,"[".concat(this._clientId,'] can not enable image moderation, not joined"'));try{if(this._moderation)return void this._moderation.updateConfig(r);const i=new EC(r);this._moderation=i,this.handleImageModerationEvents(this._moderation),await i.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},Jn)}catch(i){throw Array.isArray(i)?i[0]:i}}else{if(!this._moderation)throw new q($.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(i){throw Array.isArray(i)?i[0]:i}}}handleImageModerationEvents(n){n.on(Jo.CONNECTION_STATE_CHANGE,(r,i)=>{switch(this.emit(vt.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,r,i),r){case po.CONNECTED:if(this.connectionState!=="CONNECTED")throw this.setImageModeration(!1),new q($.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");n.inspectImage()}}),n.on(Jo.CLIENT_LOCAL_VIDEO_TRACK,r=>{r(this.localTracks.filter(i=>i.trackMediaType==="video")[0])})}handleVideoInspectEvents(n){n.on(cr.CONNECTION_STATE_CHANGE,(r,i)=>{switch(this.emit(vt.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,r,i),i){case No.CONNECTED:if(this.connectionState!=="CONNECTED")return void this.emit(vt.CONTENT_INSPECT_ERROR,new q($.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));n.inspectImage()}}),n.on(cr.INSPECT_RESULT,(r,i)=>{var a;if((i==null?void 0:i.code)===$.INVALID_OPERATION&&this.connectionState==="DISCONNECTED")return M.debug("Stop inspect content because that has left channel"),this==null||(a=this._inspect)===null||a===void 0||a.close(),void(this._inspect=void 0);this.emit(vt.CONTENT_INSPECT_RESULT,r,i)}),n.on(cr.CLIENT_LOCAL_VIDEO_TRACK,r=>{r(this.localTracks.filter(i=>i.trackMediaType==="video")[0])})}getJoinChannelServiceRecords(){return M.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(n){hd(n,"enabled"),rn("ENABLE_PUBLISH_AUDIO_FILTER",n),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(n)}_handleResetAddStream(n,r){switch(r){case"audio":n._audio_added_=!1,n._trust_audio_stream_added_state_=!0;break;case"video":n._video_added_=!1,n._trust_video_stream_added_state_=!0}}}).prototype,"leave",[e2],Object.getOwnPropertyDescriptor(we.prototype,"leave"),we.prototype),ve(we.prototype,"publish",[t2],Object.getOwnPropertyDescriptor(we.prototype,"publish"),we.prototype),ve(we.prototype,"unpublish",[n2],Object.getOwnPropertyDescriptor(we.prototype,"unpublish"),we.prototype),ve(we.prototype,"subscribe",[r2],Object.getOwnPropertyDescriptor(we.prototype,"subscribe"),we.prototype),ve(we.prototype,"massSubscribe",[i2],Object.getOwnPropertyDescriptor(we.prototype,"massSubscribe"),we.prototype),ve(we.prototype,"unsubscribe",[o2],Object.getOwnPropertyDescriptor(we.prototype,"unsubscribe"),we.prototype),ve(we.prototype,"massUnsubscribe",[a2],Object.getOwnPropertyDescriptor(we.prototype,"massUnsubscribe"),we.prototype),ve(we.prototype,"setLowStreamParameter",[s2],Object.getOwnPropertyDescriptor(we.prototype,"setLowStreamParameter"),we.prototype),ve(we.prototype,"enableDualStream",[c2],Object.getOwnPropertyDescriptor(we.prototype,"enableDualStream"),we.prototype),ve(we.prototype,"disableDualStream",[l2],Object.getOwnPropertyDescriptor(we.prototype,"disableDualStream"),we.prototype),ve(we.prototype,"setClientRole",[u2],Object.getOwnPropertyDescriptor(we.prototype,"setClientRole"),we.prototype),ve(we.prototype,"setProxyServer",[d2],Object.getOwnPropertyDescriptor(we.prototype,"setProxyServer"),we.prototype),ve(we.prototype,"setTurnServer",[h2],Object.getOwnPropertyDescriptor(we.prototype,"setTurnServer"),we.prototype),ve(we.prototype,"setLicense",[p2],Object.getOwnPropertyDescriptor(we.prototype,"setLicense"),we.prototype),ve(we.prototype,"startProxyServer",[f2],Object.getOwnPropertyDescriptor(we.prototype,"startProxyServer"),we.prototype),ve(we.prototype,"stopProxyServer",[m2],Object.getOwnPropertyDescriptor(we.prototype,"stopProxyServer"),we.prototype),ve(we.prototype,"setLocalAccessPointsV2",[g2],Object.getOwnPropertyDescriptor(we.prototype,"setLocalAccessPointsV2"),we.prototype),ve(we.prototype,"setLocalAccessPoints",[v2],Object.getOwnPropertyDescriptor(we.prototype,"setLocalAccessPoints"),we.prototype),ve(we.prototype,"setRemoteDefaultVideoStreamType",[E2],Object.getOwnPropertyDescriptor(we.prototype,"setRemoteDefaultVideoStreamType"),we.prototype),ve(we.prototype,"setRemoteVideoStreamType",[_2],Object.getOwnPropertyDescriptor(we.prototype,"setRemoteVideoStreamType"),we.prototype),ve(we.prototype,"setStreamFallbackOption",[S2],Object.getOwnPropertyDescriptor(we.prototype,"setStreamFallbackOption"),we.prototype),ve(we.prototype,"setEncryptionConfig",[y2],Object.getOwnPropertyDescriptor(we.prototype,"setEncryptionConfig"),we.prototype),ve(we.prototype,"renewToken",[C2],Object.getOwnPropertyDescriptor(we.prototype,"renewToken"),we.prototype),ve(we.prototype,"enableAudioVolumeIndicator",[T2],Object.getOwnPropertyDescriptor(we.prototype,"enableAudioVolumeIndicator"),we.prototype),ve(we.prototype,"startLiveStreaming",[b2],Object.getOwnPropertyDescriptor(we.prototype,"startLiveStreaming"),we.prototype),ve(we.prototype,"setLiveTranscoding",[R2],Object.getOwnPropertyDescriptor(we.prototype,"setLiveTranscoding"),we.prototype),ve(we.prototype,"stopLiveStreaming",[I2],Object.getOwnPropertyDescriptor(we.prototype,"stopLiveStreaming"),we.prototype),ve(we.prototype,"addInjectStreamUrl",[w2],Object.getOwnPropertyDescriptor(we.prototype,"addInjectStreamUrl"),we.prototype),ve(we.prototype,"removeInjectStreamUrl",[O2],Object.getOwnPropertyDescriptor(we.prototype,"removeInjectStreamUrl"),we.prototype),ve(we.prototype,"startChannelMediaRelay",[A2],Object.getOwnPropertyDescriptor(we.prototype,"startChannelMediaRelay"),we.prototype),ve(we.prototype,"updateChannelMediaRelay",[N2],Object.getOwnPropertyDescriptor(we.prototype,"updateChannelMediaRelay"),we.prototype),ve(we.prototype,"stopChannelMediaRelay",[x2],Object.getOwnPropertyDescriptor(we.prototype,"stopChannelMediaRelay"),we.prototype),ve(we.prototype,"sendCustomReportMessage",[P2],Object.getOwnPropertyDescriptor(we.prototype,"sendCustomReportMessage"),we.prototype),ve(we.prototype,"pickSVCLayer",[D2],Object.getOwnPropertyDescriptor(we.prototype,"pickSVCLayer"),we.prototype),ve(we.prototype,"enableContentInspect",[k2],Object.getOwnPropertyDescriptor(we.prototype,"enableContentInspect"),we.prototype),ve(we.prototype,"disableContentInspect",[L2],Object.getOwnPropertyDescriptor(we.prototype,"disableContentInspect"),we.prototype),ve(we.prototype,"setImageModeration",[M2],Object.getOwnPropertyDescriptor(we.prototype,"setImageModeration"),we.prototype),ve(we.prototype,"getJoinChannelServiceRecords",[U2],Object.getOwnPropertyDescriptor(we.prototype,"getJoinChannelServiceRecords"),we.prototype),ve(we.prototype,"setPublishAudioFilterEnabled",[F2],Object.getOwnPropertyDescriptor(we.prototype,"setPublishAudioFilterEnabled"),we.prototype),we);class gq extends kx{set currentState(r){r!==this._currentState&&(this._currentState=r,this.safeEmit(qi.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),w(this,"audioBuffer",void 0),w(this,"sourceNode",void 0),w(this,"startPlayTime",0),w(this,"startPlayOffset",0),w(this,"pausePlayTime",0),w(this,"options",void 0),w(this,"currentLoopCount",0),w(this,"currentPlaybackSpeed",100),w(this,"_currentState","stopped"),this.audioBuffer=r,this.options=i,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(r){this.currentState==="stopped"?(this.options=r,this.startPlayOffset=this.options.startPlayTime||0):M.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(r){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=r,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=r))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}setAudioBufferPlaybackSpeed(r){this.sourceNode&&(this.currentState==="playing"&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=r/100),this.currentPlaybackSpeed=r}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const r=this.context.createBufferSource();return r.buffer=this.audioBuffer,r.loop=!!this.options.loop,r.connect(this.outputNode),r.playbackRate.value=this.currentPlaybackSpeed/100,r}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const j2=new Map;async function vq(n,r){let i=null;if(typeof n=="string"){const l=j2.get(n);if(l)return M.debug("use cached audio resource: ",n),l;try{i=(await Qa(()=>wo.get(n,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(d){throw new q($.FETCH_AUDIO_FILE_FAILED,d.toString())}}else i=await new Ae((d,p)=>{const g=new FileReader;g.onload=E=>{E.target?d(E.target.result):p(new q($.READ_LOCAL_AUDIO_FILE_ERROR))},g.onerror=()=>{p(new q($.READ_LOCAL_AUDIO_FILE_ERROR))},g.readAsArrayBuffer(n)});const a=await function(l){const d=Ed();return new Ae((p,g)=>{d.decodeAudioData(l,E=>{p(E)},E=>{g(new q($.DECODE_AUDIO_FILE_FAILED,E.toString()))})})}(i);return typeof n=="string"&&r&&j2.set(n,a),a}function B2(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function Z0(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?B2(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):B2(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}function _C(n,r,i,a){i.optimizationMode&&(a&&a.width&&a.height?(i.encoderConfig=Z0(Z0({},a),{},{bitrateMin:a.bitrateMin,bitrateMax:a.bitrateMax}),i.optimizationMode!=="motion"&&i.optimizationMode!=="detail"||(r.contentHint=i.optimizationMode,r.contentHint===i.optimizationMode?M.debug("[".concat(n,"] set content hint to"),i.optimizationMode):M.debug("[".concat(n,"] set content hint failed")))):M.warning("[".concat(n,"] can not apply optimization mode bitrate config, no encoderConfig")))}const Eq=Ht().name;function _q(n,r,i,a){let l,d=0,p=null;return new Ae((g,E)=>{setTimeout(()=>{l&&(l(),g(d))},r),l=Px(()=>{(function(){d>a&&l&&(l(),g(d));const C=i.getContext("2d");if(!C){const k=new q($.UNEXPECTED_ERROR,"can not get canvas 2d context.");return M.error(k.toString()),void E(k)}C.drawImage(n,0,0,160,120);const S=C.getImageData(0,0,i.width,i.height),R=Math.floor(S.data.length/3);if(p){for(let k=0;k<R;k+=3)if(S.data[k]!==p[k])return d+=1,void(p=S.data);p=S.data}else p=S.data})()},30)})}class Mp{constructor(r,i){w(this,"id",0),w(this,"element",void 0),w(this,"peerPair",void 0),w(this,"context",void 0),w(this,"audioPlayerElement",void 0),w(this,"audioTrack",void 0),Mp.count+=1,this.id=Mp.count,this.element=r,this.context=i}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=r=>{const i=document.createElement("audio");i.srcObject=new MediaStream([r.track]),i.play(),this.audioPlayerElement=i}}async switchSdp(){if(!this.peerPair)return;const r=async(a,l)=>{const d=l==="offer"?await a.createOffer():await a.createAnswer();return await a.setLocalDescription(d),a.iceGatheringState==="complete"?a.localDescription:new Ae(p=>{a.onicegatheringstatechange=()=>{a.iceGatheringState==="complete"&&p(a.localDescription)}})},i=async(a,l)=>await a.setRemoteDescription(l);try{const a=await r(this.peerPair[0],"offer");await i(this.peerPair[1],a);const l=await r(this.peerPair[1],"answer");await i(this.peerPair[0],l)}catch(a){throw new q($.LOCAL_AEC_ERROR,a.toString()).print()}}async getTracksFromMediaElement(r){if(this.audioTrack)return this.audioTrack;let i;try{r instanceof HTMLVideoElement&&(r.captureStream?r.captureStream():r.mozCaptureStream()),i=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(r).connect(i)}catch(l){throw new q($.LOCAL_AEC_ERROR,l.toString()).print()}if(!i)throw new q($.LOCAL_AEC_ERROR,"no dest node when local aec").print();const a=i.stream.getAudioTracks()[0];return this.audioTrack=a,a}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const r=this.element,i=await this.getTracksFromMediaElement(r);this.peerPair&&this.peerPair[0].addTrack(i),await this.switchSdp()}close(){M.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(r=>{r.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var $2,eg;w(Mp,"count",0);const Sq=window.AudioContext||window.webkitAudioContext,yq=new($2=He({report:ke}),ve((eg=class{constructor(){w(this,"units",[]),w(this,"context",void 0)}processExternalMediaAEC(n){if(!this._doesEnvironmentNeedAEC())return M.debug("the system does not need to process local aec"),-1;this.context||(this.context=new Sq);let r=this.units.find(i=>i&&i.getElement()===n);return r||(r=new Mp(n,this.context),this.units.push(r)),r.startEchoCancellation(),M.debug("start processing local audio echo cancellation, id is",r.id),r.id}_doesEnvironmentNeedAEC(){return Ht().name!==qt.SAFARI}}).prototype,"processExternalMediaAEC",[$2],Object.getOwnPropertyDescriptor(eg.prototype,"processExternalMediaAEC"),eg.prototype),eg);function H2(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,a)}return i}function W2(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?H2(Object(i),!0).forEach(function(a){w(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):H2(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}const SC=window||document;function G2(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!SC)return;const i=fr._cspEventHandlerPointer;if(i&&r)return void console.error(i,r);const a=l=>{if(!(l&&l.blockedURI&&(fr.onSecurityPolicyViolation||fr.getListeners(ts.SECURITY_POLICY_VIOLATION).length>0)))return;const d=l.blockedURI;re("CSP_DETECTED_HOSTNAME_LIST").some(p=>d.includes(p))&&(fr.onSecurityPolicyViolation&&typeof fr.onSecurityPolicyViolation=="function"&&fr.onSecurityPolicyViolation(l),fr.getListeners(ts.SECURITY_POLICY_VIOLATION).length>0&&fr.safeEmit(ts.SECURITY_POLICY_VIOLATION,l))};i&&SC.removeEventListener("securitypolicyviolation",i),(r||n&&typeof n=="function"||fr.getListeners(ts.SECURITY_POLICY_VIOLATION).length>0)&&SC.addEventListener("securitypolicyviolation",a),fr._cspEventHandlerPointer=a}rn("PROCESS_ID","process-".concat(pn(8,""),"-").concat(pn(4,""),"-").concat(pn(4,""),"-").concat(pn(4,""),"-").concat(pn(12,""))),function(){const n=Ht();ui.getDisplayMedia=function(r){return!!(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)}(),ui.getStreamFromExtension=n.name===qt.CHROME&&Number(n.version)>34,ui.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const r=new RTCPeerConnection;let i=!1;try{r.addTransceiver("audio"),i=!0}catch{}return r.close(),i}(),ui.supportMinBitrate=n.name===qt.CHROME||n.name===qt.EDGE,ui.supportSetRtpSenderParameters=function(){const r=Ht();return!window.RTCRtpSender||!window.RTCRtpSender.prototype.setParameters||!window.RTCRtpSender.prototype.getParameters?!1:!!Gl()||!(!Si()&&!i0())||r.name===qt.FIREFOX&&Number(r.version)>=64}(),n.name===qt.SAFARI&&(Number(n.version)>=14?ui.supportDualStream=!0:ui.supportDualStream=!1),ui.webAudioMediaStreamDest=function(){const r=Ht();return!(r.name===qt.SAFARI&&Number(r.version)<12)}(),ui.supportReplaceTrack=function(){return window.RTCRtpSender?typeof RTCRtpSender.prototype.replaceTrack=="function":!1}(),ui.supportWebGL=typeof WebGLRenderingContext<"u",ui.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Gl()||(ui.webAudioWithAEC=!0),ui.supportShareAudio=function(){const r=Ht();return(r.os===zr.WIN_10||r.os===zr.WIN_81||r.os===zr.WIN_7||r.os===zr.LINUX||r.os===zr.MAC_OS)&&r.name===qt.CHROME&&Number(r.version)>=74}(),ui.supportDualStreamEncoding=function(){const r=Ht();return re("DISABLE_WEBAUDIO")?!0:r.name==="Safari"&&Number(r.version)>=14||!!(r.name==="Chrome"&&/Windows/i.test(r.os||"")&&Number(r.version)>=100&&re("CHROME_DUAL_STREAM_USE_ENCODING"))}(),ui.supportDataChannel=function(){return!!(CS(76)||function(r){const i=Ht();return!(i.name!==qt.FIREFOX||!i.osVersion)&&Number(i.version)>=r}(68)||function(r){const i=Ht();return!(i.name!==qt.SAFARI||!i.osVersion)&&Number(i.version)>=r}(14))}(),ui.supportPCSetConfiguration=function(){const r=window.RTCPeerConnection;return!Dn()&&!!r&&r.prototype.setConfiguration instanceof Function}(),ui.supportWebRTCEncodedTransform=function(){const r=Ht();return r.name==="Chrome"&&Number(r.version)>=86}(),M.info("browser compatibility",JSON.stringify(ui),JSON.stringify(n))}(),function(){let n;try{n=window.localStorage.getItem("websdk_ng_global_parameter")}catch(r){return void M.error("Error loading sdk config",r.message)}if(n)try{const r=JSON.parse(window.atob(n)),i=Date.now();M.debug("Loading global parameters from cache",r),Object.keys(r).forEach(a=>{if(Object.prototype.hasOwnProperty.call(Yi,a)){const{value:l,expires:d}=r[a];if(d&&d<=i)return;Yl[a]=l,Yi[a]=l}})}catch(r){M.error("Error loading mutableParamsCache: ".concat(n),r.message)}}(),Array.isArray(Yl.AREAS)&&Yl.AREAS.length>0&&Ny(Yl.AREAS,!0);const fr=function(n){const r=new Rn,i=n,a={getListeners:r.getListeners.bind(r),on:(l,d)=>(function(p,g){p===ts.SECURITY_POLICY_VIOLATION&&G2(g,!0)}(l,d),r.on.bind(r)(l,d)),addListener:r.addListener.bind(r),once:r.once.bind(r),off:r.off.bind(r),removeAllListeners:r.removeAllListeners.bind(r),emit:r.emit.bind(r),safeEmit:r.safeEmit.bind(r)};return W2(W2({},i),a)}({__CLIENT_LIST__:ql,__TRACK_LIST__:fp,VERSION:Xo,BUILD:BS,setParameter:(n,r,i)=>{M.debug("setParameter key:".concat(n,", value:").concat(JSON.stringify(r))),rn(n,r,i)},getParameter:re,getSupportedCodec:async function(){let n={audio:[],video:[]};try{let r=new RTCPeerConnection;r.addTransceiver("video",{direction:"recvonly"}),r.addTransceiver("audio",{direction:"recvonly"});const i=(await r.createOffer()).sdp;if(!i)return n;r.close(),r=null,n=function(a){const l={video:[],audio:[]};return a.match(/ VP8/i)&&l.video.push("VP8"),a.match(/ VP9/i)&&l.video.push("VP9"),a.match(/ AV1/i)&&l.video.push("AV1"),a.match(/ H264/i)&&l.video.push("H264"),a.match(/ H265/i)&&l.video.push("H265"),a.match(/ opus/i)&&l.audio.push("OPUS"),a.match(/ PCMU/i)&&l.audio.push("PCMU"),a.match(/ PCMA/i)&&l.audio.push("PCMA"),a.match(/ G722/i)&&l.audio.push("G722"),l}(i)}catch(r){throw new q($.CREATE_OFFER_FAILED,r.toString&&r.toString()).print()}return n},checkSystemRequirements:function(){const n=ke.reportApiInvoke(null,{name:Qn.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Tn.TRACER});let r=!1;try{const d=window.RTCPeerConnection,p=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,g=window.WebSocket;r=!!(d&&p&&g)}catch(d){return M.error("check system requirement failed: ",d),!1}let i=!1;const a=Ht();a.name===qt.CHROME&&Number(a.version)>=58&&(!Iz()||Rz())&&(i=!0),a.name===qt.FIREFOX&&Number(a.version)>=56&&(i=!0),a.name===qt.OPERA&&Number(a.version)>=45&&(i=!0),a.name===qt.SAFARI&&Number(a.version)>=11&&(i=!0),(iN()||Ht().name===qt.QQ)&&(i=!0),M.debug("checkSystemRequirements, api:",r,"browser",i);const l=r&&i;return n.onSuccess(l),l},getDevices:function(n){return ko.enumerateDevices(!0,!0,n)},getMicrophones:function(n){return ko.getRecordingDevices(n)},getCameras:function(n){return ko.getCamerasDevices(n)},getElectronScreenSources:Mx,getPlaybackDevices:function(n){return ko.getSpeakers(n)},createClient:function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const r=ke.reportApiInvoke(null,{name:Qn.CREATE_CLIENT,options:[n],tag:Tn.TRACER});try{t9(n)}catch(i){throw r.onError(i),i}return n.audioCodec===void 0&&(n.audioCodec="opus"),r.onSuccess(),new mq(Lp(Lp({forceWaitGatewayResponse:!0},n),{},{role:n.mode==="rtc"?"host":n.role||"audience"}))},createCameraVideoTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=ke.reportApiInvoke(null,{tag:Tn.TRACER,name:Qn.CREATE_CAM_VIDEO_TRACK,options:[Z0({},n)]}),i=L0(n),a=pn(8,"track-cam-");let l=null;M.info("start create camera video track with config",JSON.stringify(n),"trackId",a);try{l=(await Ia({video:i},a)).getVideoTracks()[0]||null}catch(p){throw r.onError(p),p}if(!l){const p=new q($.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(p),p.throw()}n.optimizationMode&&_C(a,l,n,Kl(n.encoderConfig));const d=new ok(l,n,i,n.scalabiltyMode?g0(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,a);return r.onSuccess(d.getTrackId()),M.info("create camera video success, trackId:",a),d},createCustomVideoTrack:function(n){const r=ke.reportApiInvoke(null,{tag:Tn.TRACER,name:Qn.CREATE_CUSTOM_VIDEO_TRACK,options:[n]}),i=new nr(n.mediaStreamTrack,{width:n.width,height:n.height,frameRate:n.frameRate,bitrateMax:n.bitrateMax,bitrateMin:n.bitrateMin},n.scalabiltyMode?g0(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,pn(8,"track-cus-"),[hr.CUSTOM_TRACK]);return r.onSuccess(i.getTrackId()),M.info("create custom video track success with config",n,"trackId",i.getTrackId()),i},createScreenVideoTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable";const i=ke.reportApiInvoke(null,{tag:Tn.TRACER,name:Qn.CREATE_SCREEN_VIDEO_TRACK,options:[Z0({},n),r]});n.encoderConfig?typeof n.encoderConfig=="string"||n.encoderConfig.width&&n.encoderConfig.height||(n.encoderConfig.width={max:1920},n.encoderConfig.height={max:1080}):n.encoderConfig="1080p_2";const a=GK(n),l=pn(8,"track-scr-v-");let d=null,p=null;const g=Gn();if(!g.supportShareAudio&&r==="enable"){const S=new q($.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return i.onError(S),S.throw()}M.info("start create screen video track with config",n,"withAudio",r,"trackId",l);try{const S=await Ia({screen:a,screenAudio:r==="auto"?g.supportShareAudio:r==="enable"},l);d=S.getVideoTracks()[0]||null,p=S.getAudioTracks()[0]||null}catch(S){throw i.onError(S),S}if(!d){const S=new q($.UNEXPECTED_ERROR,"can not find track in media stream");return i.onError(S),S.throw()}if(!p&&r==="enable"){d&&d.stop();const S=new q($.SHARE_AUDIO_NOT_ALLOWED);return i.onError(S),S.throw()}n.optimizationMode||(n.optimizationMode="detail"),n.optimizationMode&&(_C(l,d,n,n.encoderConfig&&HS(n.encoderConfig)),n.encoderConfig&&typeof n.encoderConfig!="string"&&(n.encoderConfig.bitrateMin=n.encoderConfig.bitrateMax));const E=new nr(d,n.encoderConfig?HS(n.encoderConfig):{},n.scalabiltyMode?g0(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,l,[hr.SCREEN_TRACK]);if(!p)return i.onSuccess(E.getTrackId()),M.info("create screen video track success","video:",E.getTrackId()),E;const C=new Qr(p,void 0,pn(8,"track-scr-a-"),!1,!0);return i.onSuccess([E.getTrackId(),C.getTrackId()]),M.info("create screen video track success","video:",E.getTrackId(),"audio:",C.getTrackId()),[E,C]},createMicrophoneAndCameraTracks:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=ke.reportApiInvoke(null,{tag:Tn.TRACER,name:Qn.CREATE_MIC_AND_CAM_TRACKS,options:[n,r]}),a=L0(r),l=bD(n),d=pn(8,"track-mic-"),p=pn(8,"track-cam-");let g=null,E=null;M.info("start create camera video track(".concat(p,") and microphone audio track(").concat(d,") with config, audio: ").concat(JSON.stringify(n),", video: ").concat(JSON.stringify(r)));try{const R=await Ia({audio:l,video:a},"".concat(d,"-").concat(p));g=R.getAudioTracks()[0],E=R.getVideoTracks()[0]}catch(R){throw i.onError(R),R}if(!g||!E){const R=new q($.UNEXPECTED_ERROR,"can not find tracks in media stream");return i.onError(R),R.throw()}r.optimizationMode&&_C(p,E,r,Kl(r.encoderConfig));const C=new I0(g,n,l,d),S=new ok(E,r,a,r.scalabiltyMode?g0(r.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},r.optimizationMode,p);return i.onSuccess([C.getTrackId(),S.getTrackId()]),M.info("create camera video track(".concat(p,") and microphone audio track(").concat(d,") success")),[C,S]},createMicrophoneAudioTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=ke.reportApiInvoke(null,{tag:Tn.TRACER,name:Qn.CREATE_MIC_AUDIO_TRACK,options:[n]}),i=bD(n),a=pn(8,"track-mic-");let l=null;M.info("start create microphone audio track with config",JSON.stringify(n),"trackId",a);try{l=(await Ia({audio:i},a)).getAudioTracks()[0]||null}catch(p){throw r.onError(p),p}if(!l){const p=new q($.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(p),p.throw()}const d=new I0(l,n,i,a);return r.onSuccess(d.getTrackId()),M.info("create microphone audio track success, trackId:",a),d},createCustomAudioTrack:function(n){const r=ke.reportApiInvoke(null,{tag:Tn.TRACER,name:Qn.CREATE_CUSTOM_AUDIO_TRACK,options:[n]}),i=new Qr(n.mediaStreamTrack,n.encoderConfig?v0(n.encoderConfig):{},pn(8,"track-cus-"),!1,!0);return M.info("create custom audio track success with config",n,"trackId",i.getTrackId()),r.onSuccess(i.getTrackId()),i},createBufferSourceAudioTrack:async function(n){const r=ke.reportApiInvoke(null,{tag:Tn.TRACER,name:Qn.CREATE_BUFFER_AUDIO_TRACK,options:[n]});if(re("DISABLE_WEBAUDIO"))throw new q($.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");const i=pn(8,"track-buf-");M.info("start create buffer source audio track with config",JSON.stringify(n),"trackId",i);const a=n.source;if(!(n.source instanceof AudioBuffer))try{n.source=await vq(n.source,n.cacheOnlineFile)}catch(p){return r.onError(p),p.throw()}const l=new gq(n.source),d=new CK(a,l,n.encoderConfig?v0(n.encoderConfig):{},i);return M.info("create buffer source audio track success, trackId:",i),r.onSuccess(d.getTrackId()),d},setAppType:function(n){if(M.debug("setAppType: ".concat(n)),!(Number.isInteger(n)&&n>=0))throw M.debug("Invalid appType"),new q($.INVALID_PARAMS,"invalid app type",n);rn("APP_TYPE",Math.floor(n))},setLogLevel:function(n){M.setLogLevel(n)},enableLogUpload:function(){re("USE_NEW_LOG")?rn("UPLOAD_LOG",!0):M.enableLogUpload()},disableLogUpload:function(){re("USE_NEW_LOG")?rn("UPLOAD_LOG",!1):M.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new vD},checkAudioTrackIsActive:async function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const i=ke.reportApiInvoke(null,{tag:Tn.TRACER,name:Qn.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[r]});if(!(n instanceof Qr||n instanceof K0)){const E=new q($.INVALID_TRACK,"the parameter is not a audio track");return i.onError(E),E.throw()}r&&r<1e3&&(r=1e3);const a=n instanceof Qr?n.getTrackLabel():"remote_track",l=n.getVolumeLevel();let d=l,p=l;const g=Date.now();return new Ae(E=>{const C=setInterval(()=>{const S=n.getVolumeLevel();d=S>d?S:d,p=S<p?S:p;const R=d-p>1e-4,k=Date.now()-g;if(R||k>r){clearInterval(C);const F=R,W={duration:k,deviceLabel:a,maxVolumeLevel:d,result:F};M.info("[track-".concat(n.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(W))),i.onSuccess(W),E(F)}},200)})},checkVideoTrackIsActive:async function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const i=ke.reportApiInvoke(null,{tag:Tn.TRACER,name:Qn.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[r]});if(!(n instanceof nr||n instanceof z0)){const k=new q($.INVALID_TRACK,"the parameter is not a video track");return i.onError(k),k.throw()}const a=4;r&&r<1e3&&(r=1e3);const l=n instanceof nr?n.getTrackLabel():"remote_track",d=n.getMediaStreamTrack(!0),p=document.createElement("video");p.style.width="1px",p.style.height="1px",p.setAttribute("muted",""),p.muted=!0,p.setAttribute("playsinline",""),p.controls=!1,(Si()||i0())&&(p.style.opacity="0.01",p.style.position="fixed",p.style.left="0",p.style.top="0",document.body.appendChild(p)),p.srcObject=new MediaStream([d]),p.play();const g=document.createElement("canvas");g.width=160,g.height=120;let E=0,C=0;try{const k=Date.now();E=await _q(p,r,g,a),C=Date.now()-k}catch(k){throw i.onError(k),k}Eq===qt.SAFARI&&(p.pause(),p.remove()),p.srcObject=null;const S=E>a,R={duration:C,changedPicNum:E,deviceLabel:l,result:S};return M.info("[track-".concat(n.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(R))),i.onSuccess(R),S},setArea:Ny,audioElementPlayCenter:fo,processExternalMediaAEC:function(n){yq.processExternalMediaAEC(n)},registerExtensions:function(n){n.forEach(r=>{const i=r;i.__registered__=!0,i.logger.hookLog=M.extLog,i.reporter.hookApiInvoke=ke.extApiInvoke,i.parameters&&Object.keys(i.parameters).forEach(a=>{i.parameters[a]=re(a)})})},ChannelMediaRelayError:Hc,ChannelMediaRelayEvent:Za,ChannelMediaRelayState:Ti,RemoteStreamFallbackType:sy,RemoteStreamType:ay,ConnectionDisconnectedReason:Wt,AudienceLatencyLevelType:ty,AREAS:Rt});return Object.defineProperties(fr,{onAudioAutoplayFailed:{get:()=>Po.onAudioAutoplayFailed,set:n=>{Po.onAudioAutoplayFailed=n}},onAutoplayFailed:{get:()=>Po.onAutoplayFailed,set:n=>{Po.onAutoplayFailed=n}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>fr._onSecurityPolicyViolation,set(n){fr._onSecurityPolicyViolation=n,G2(n)}}}),ko.on(ic.CAMERA_DEVICE_CHANGED,n=>{M.info("camera device changed",JSON.stringify(n)),fr.onCameraChanged&&fr.onCameraChanged(n),fr.safeEmit(ts.CAMERA_CHANGED,n)}),ko.on(ic.RECORDING_DEVICE_CHANGED,n=>{M.info("microphone device changed",JSON.stringify(n)),fr.onMicrophoneChanged&&fr.onMicrophoneChanged(n),fr.safeEmit(ts.MICROPHONE_CHANGED,n)}),ko.on(ic.PLAYOUT_DEVICE_CHANGED,n=>{M.debug("playout device changed",JSON.stringify(n)),fr.onPlaybackDeviceChanged&&fr.onPlaybackDeviceChanged(n),fr.safeEmit(ts.PLAYBACK_DEVICE_CHANGED,n)}),fo.onAutoplayFailed=()=>{M.info("detect audio element autoplay failed"),Po.onAudioAutoplayFailed&&Po.onAudioAutoplayFailed()},Gt.on("autoplay-failed",()=>{M.info("detect webaudio autoplay failed"),Po.onAudioAutoplayFailed&&Po.onAudioAutoplayFailed(),fr.safeEmit(ts.AUTOPLAY_FAILED)}),window&&(window.__ARTC__=fr),fr})})(fV);var zq=fV.exports;const bu=Al(zq);var Eb={},gV={exports:{}},Ea={},vV={exports:{}},EV={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ue,Se){var Ee=ue.length;ue.push(Se);e:for(;0<Ee;){var le=Ee-1>>>1,se=ue[le];if(0<c(se,Se))ue[le]=Se,ue[Ee]=se,Ee=le;else break e}}function o(ue){return ue.length===0?null:ue[0]}function s(ue){if(ue.length===0)return null;var Se=ue[0],Ee=ue.pop();if(Ee!==Se){ue[0]=Ee;e:for(var le=0,se=ue.length,de=se>>>1;le<de;){var he=2*(le+1)-1,xe=ue[he],Me=he+1,it=ue[Me];if(0>c(xe,Ee))Me<se&&0>c(it,xe)?(ue[le]=it,ue[Me]=Ee,le=Me):(ue[le]=xe,ue[he]=Ee,le=he);else if(Me<se&&0>c(it,Ee))ue[le]=it,ue[Me]=Ee,le=Me;else break e}}return Se}function c(ue,Se){var Ee=ue.sortIndex-Se.sortIndex;return Ee!==0?Ee:ue.id-Se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var h=Date,f=h.now();e.unstable_now=function(){return h.now()-f}}var m=[],v=[],_=1,y=null,T=3,A=!1,I=!1,O=!1,L=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(ue){for(var Se=o(v);Se!==null;){if(Se.callback===null)s(v);else if(Se.startTime<=ue)s(v),Se.sortIndex=Se.expirationTime,t(m,Se);else break;Se=o(v)}}function U(ue){if(O=!1,D(ue),!I)if(o(m)!==null)I=!0,ae(V);else{var Se=o(v);Se!==null&&pe(U,Se.startTime-ue)}}function V(ue,Se){I=!1,O&&(O=!1,x(Y),Y=-1),A=!0;var Ee=T;try{for(D(Se),y=o(m);y!==null&&(!(y.expirationTime>Se)||ue&&!Z());){var le=y.callback;if(typeof le=="function"){y.callback=null,T=y.priorityLevel;var se=le(y.expirationTime<=Se);Se=e.unstable_now(),typeof se=="function"?y.callback=se:y===o(m)&&s(m),D(Se)}else s(m);y=o(m)}if(y!==null)var de=!0;else{var he=o(v);he!==null&&pe(U,he.startTime-Se),de=!1}return de}finally{y=null,T=Ee,A=!1}}var j=!1,B=null,Y=-1,ee=5,H=-1;function Z(){return!(e.unstable_now()-H<ee)}function J(){if(B!==null){var ue=e.unstable_now();H=ue;var Se=!0;try{Se=B(!0,ue)}finally{Se?X():(j=!1,B=null)}}else j=!1}var X;if(typeof N=="function")X=function(){N(J)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ie=ne.port2;ne.port1.onmessage=J,X=function(){ie.postMessage(null)}}else X=function(){L(J,0)};function ae(ue){B=ue,j||(j=!0,X())}function pe(ue,Se){Y=L(function(){ue(e.unstable_now())},Se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ue){ue.callback=null},e.unstable_continueExecution=function(){I||A||(I=!0,ae(V))},e.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<ue?Math.floor(1e3/ue):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return o(m)},e.unstable_next=function(ue){switch(T){case 1:case 2:case 3:var Se=3;break;default:Se=T}var Ee=T;T=Se;try{return ue()}finally{T=Ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ue,Se){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var Ee=T;T=ue;try{return Se()}finally{T=Ee}},e.unstable_scheduleCallback=function(ue,Se,Ee){var le=e.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?le+Ee:le):Ee=le,ue){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=Ee+se,ue={id:_++,callback:Se,priorityLevel:ue,startTime:Ee,expirationTime:se,sortIndex:-1},Ee>le?(ue.sortIndex=Ee,t(v,ue),o(m)===null&&ue===o(v)&&(O?(x(Y),Y=-1):O=!0,pe(U,Ee-le))):(ue.sortIndex=se,t(m,ue),I||A||(I=!0,ae(V))),ue},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(ue){var Se=T;return function(){var Ee=T;T=Se;try{return ue.apply(this,arguments)}finally{T=Ee}}}})(EV);vV.exports=EV;var Kq=vV.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _V=b,ma=Kq;function Fe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var SV=new Set,bf={};function xu(e,t){Sh(e,t),Sh(e+"Capture",t)}function Sh(e,t){for(bf[e]=t,e=0;e<t.length;e++)SV.add(t[e])}var _c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_b=Object.prototype.hasOwnProperty,Yq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,X2={},J2={};function qq(e){return _b.call(J2,e)?!0:_b.call(X2,e)?!1:Yq.test(e)?J2[e]=!0:(X2[e]=!0,!1)}function Xq(e,t,o,s){if(o!==null&&o.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Jq(e,t,o,s){if(t===null||typeof t>"u"||Xq(e,t,o,s))return!0;if(s)return!1;if(o!==null)switch(o.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function yo(e,t,o,s,c,u,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=c,this.mustUseProperty=o,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=h}var $i={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$i[e]=new yo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$i[t]=new yo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$i[e]=new yo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$i[e]=new yo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$i[e]=new yo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$i[e]=new yo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$i[e]=new yo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$i[e]=new yo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$i[e]=new yo(e,5,!1,e.toLowerCase(),null,!1,!1)});var vI=/[\-:]([a-z])/g;function EI(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vI,EI);$i[t]=new yo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vI,EI);$i[t]=new yo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vI,EI);$i[t]=new yo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$i[e]=new yo(e,1,!1,e.toLowerCase(),null,!1,!1)});$i.xlinkHref=new yo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$i[e]=new yo(e,1,!1,e.toLowerCase(),null,!0,!0)});function _I(e,t,o,s){var c=$i.hasOwnProperty(t)?$i[t]:null;(c!==null?c.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Jq(t,o,c,s)&&(o=null),s||c===null?qq(t)&&(o===null?e.removeAttribute(t):e.setAttribute(t,""+o)):c.mustUseProperty?e[c.propertyName]=o===null?c.type===3?!1:"":o:(t=c.attributeName,s=c.attributeNamespace,o===null?e.removeAttribute(t):(c=c.type,o=c===3||c===4&&o===!0?"":""+o,s?e.setAttributeNS(s,t,o):e.setAttribute(t,o))))}var Ic=_V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rg=Symbol.for("react.element"),Yd=Symbol.for("react.portal"),qd=Symbol.for("react.fragment"),SI=Symbol.for("react.strict_mode"),Sb=Symbol.for("react.profiler"),yV=Symbol.for("react.provider"),CV=Symbol.for("react.context"),yI=Symbol.for("react.forward_ref"),yb=Symbol.for("react.suspense"),Cb=Symbol.for("react.suspense_list"),CI=Symbol.for("react.memo"),cl=Symbol.for("react.lazy"),TV=Symbol.for("react.offscreen"),Q2=Symbol.iterator;function Up(e){return e===null||typeof e!="object"?null:(e=Q2&&e[Q2]||e["@@iterator"],typeof e=="function"?e:null)}var wr=Object.assign,CC;function tf(e){if(CC===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);CC=t&&t[1]||""}return`
`+CC+e}var TC=!1;function bC(e,t){if(!e||TC)return"";TC=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(v){var s=v}Reflect.construct(e,[],t)}else{try{t.call()}catch(v){s=v}e.call(t.prototype)}else{try{throw Error()}catch(v){s=v}e()}}catch(v){if(v&&s&&typeof v.stack=="string"){for(var c=v.stack.split(`
`),u=s.stack.split(`
`),h=c.length-1,f=u.length-1;1<=h&&0<=f&&c[h]!==u[f];)f--;for(;1<=h&&0<=f;h--,f--)if(c[h]!==u[f]){if(h!==1||f!==1)do if(h--,f--,0>f||c[h]!==u[f]){var m=`
`+c[h].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=h&&0<=f);break}}}finally{TC=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?tf(e):""}function Qq(e){switch(e.tag){case 5:return tf(e.type);case 16:return tf("Lazy");case 13:return tf("Suspense");case 19:return tf("SuspenseList");case 0:case 2:case 15:return e=bC(e.type,!1),e;case 11:return e=bC(e.type.render,!1),e;case 1:return e=bC(e.type,!0),e;default:return""}}function Tb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qd:return"Fragment";case Yd:return"Portal";case Sb:return"Profiler";case SI:return"StrictMode";case yb:return"Suspense";case Cb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case CV:return(e.displayName||"Context")+".Consumer";case yV:return(e._context.displayName||"Context")+".Provider";case yI:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case CI:return t=e.displayName||null,t!==null?t:Tb(e.type)||"Memo";case cl:t=e._payload,e=e._init;try{return Tb(e(t))}catch{}}return null}function Zq(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tb(t);case 8:return t===SI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Il(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bV(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function eX(e){var t=bV(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,u=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(h){s=""+h,u.call(this,h)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(h){s=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ig(e){e._valueTracker||(e._valueTracker=eX(e))}function RV(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),s="";return e&&(s=bV(e)?e.checked?"true":"false":e.value),e=s,e!==o?(t.setValue(e),!0):!1}function uv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function bb(e,t){var o=t.checked;return wr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function Z2(e,t){var o=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;o=Il(t.value!=null?t.value:o),e._wrapperState={initialChecked:s,initialValue:o,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function IV(e,t){t=t.checked,t!=null&&_I(e,"checked",t,!1)}function Rb(e,t){IV(e,t);var o=Il(t.value),s=t.type;if(o!=null)s==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ib(e,t.type,o):t.hasOwnProperty("defaultValue")&&Ib(e,t.type,Il(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function eM(e,t,o){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,o||t===e.value||(e.value=t),e.defaultValue=t}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function Ib(e,t,o){(t!=="number"||uv(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var nf=Array.isArray;function uh(e,t,o,s){if(e=e.options,t){t={};for(var c=0;c<o.length;c++)t["$"+o[c]]=!0;for(o=0;o<e.length;o++)c=t.hasOwnProperty("$"+e[o].value),e[o].selected!==c&&(e[o].selected=c),c&&s&&(e[o].defaultSelected=!0)}else{for(o=""+Il(o),t=null,c=0;c<e.length;c++){if(e[c].value===o){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function wb(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return wr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tM(e,t){var o=t.value;if(o==null){if(o=t.children,t=t.defaultValue,o!=null){if(t!=null)throw Error(Fe(92));if(nf(o)){if(1<o.length)throw Error(Fe(93));o=o[0]}t=o}t==null&&(t=""),o=t}e._wrapperState={initialValue:Il(o)}}function wV(e,t){var o=Il(t.value),s=Il(t.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),t.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),s!=null&&(e.defaultValue=""+s)}function nM(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function OV(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ob(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?OV(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var og,AV=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,o,s,c){MSApp.execUnsafeLocalFunction(function(){return e(t,o,s,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(og=og||document.createElement("div"),og.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=og.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Rf(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var cf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tX=["Webkit","ms","Moz","O"];Object.keys(cf).forEach(function(e){tX.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cf[t]=cf[e]})});function NV(e,t,o){return t==null||typeof t=="boolean"||t===""?"":o||typeof t!="number"||t===0||cf.hasOwnProperty(e)&&cf[e]?(""+t).trim():t+"px"}function xV(e,t){e=e.style;for(var o in t)if(t.hasOwnProperty(o)){var s=o.indexOf("--")===0,c=NV(o,t[o],s);o==="float"&&(o="cssFloat"),s?e.setProperty(o,c):e[o]=c}}var nX=wr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ab(e,t){if(t){if(nX[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Fe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Fe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Fe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Fe(62))}}function Nb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xb=null;function TI(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pb=null,dh=null,hh=null;function rM(e){if(e=tm(e)){if(typeof Pb!="function")throw Error(Fe(280));var t=e.stateNode;t&&(t=dE(t),Pb(e.stateNode,e.type,t))}}function PV(e){dh?hh?hh.push(e):hh=[e]:dh=e}function DV(){if(dh){var e=dh,t=hh;if(hh=dh=null,rM(e),t)for(e=0;e<t.length;e++)rM(t[e])}}function kV(e,t){return e(t)}function LV(){}var RC=!1;function MV(e,t,o){if(RC)return e(t,o);RC=!0;try{return kV(e,t,o)}finally{RC=!1,(dh!==null||hh!==null)&&(LV(),DV())}}function If(e,t){var o=e.stateNode;if(o===null)return null;var s=dE(o);if(s===null)return null;o=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(Fe(231,t,typeof o));return o}var Db=!1;if(_c)try{var Fp={};Object.defineProperty(Fp,"passive",{get:function(){Db=!0}}),window.addEventListener("test",Fp,Fp),window.removeEventListener("test",Fp,Fp)}catch{Db=!1}function rX(e,t,o,s,c,u,h,f,m){var v=Array.prototype.slice.call(arguments,3);try{t.apply(o,v)}catch(_){this.onError(_)}}var lf=!1,dv=null,hv=!1,kb=null,iX={onError:function(e){lf=!0,dv=e}};function oX(e,t,o,s,c,u,h,f,m){lf=!1,dv=null,rX.apply(iX,arguments)}function aX(e,t,o,s,c,u,h,f,m){if(oX.apply(this,arguments),lf){if(lf){var v=dv;lf=!1,dv=null}else throw Error(Fe(198));hv||(hv=!0,kb=v)}}function Pu(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function UV(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function iM(e){if(Pu(e)!==e)throw Error(Fe(188))}function sX(e){var t=e.alternate;if(!t){if(t=Pu(e),t===null)throw Error(Fe(188));return t!==e?null:e}for(var o=e,s=t;;){var c=o.return;if(c===null)break;var u=c.alternate;if(u===null){if(s=c.return,s!==null){o=s;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===o)return iM(c),e;if(u===s)return iM(c),t;u=u.sibling}throw Error(Fe(188))}if(o.return!==s.return)o=c,s=u;else{for(var h=!1,f=c.child;f;){if(f===o){h=!0,o=c,s=u;break}if(f===s){h=!0,s=c,o=u;break}f=f.sibling}if(!h){for(f=u.child;f;){if(f===o){h=!0,o=u,s=c;break}if(f===s){h=!0,s=u,o=c;break}f=f.sibling}if(!h)throw Error(Fe(189))}}if(o.alternate!==s)throw Error(Fe(190))}if(o.tag!==3)throw Error(Fe(188));return o.stateNode.current===o?e:t}function FV(e){return e=sX(e),e!==null?VV(e):null}function VV(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=VV(e);if(t!==null)return t;e=e.sibling}return null}var jV=ma.unstable_scheduleCallback,oM=ma.unstable_cancelCallback,cX=ma.unstable_shouldYield,lX=ma.unstable_requestPaint,$r=ma.unstable_now,uX=ma.unstable_getCurrentPriorityLevel,bI=ma.unstable_ImmediatePriority,BV=ma.unstable_UserBlockingPriority,pv=ma.unstable_NormalPriority,dX=ma.unstable_LowPriority,$V=ma.unstable_IdlePriority,sE=null,Vs=null;function hX(e){if(Vs&&typeof Vs.onCommitFiberRoot=="function")try{Vs.onCommitFiberRoot(sE,e,void 0,(e.current.flags&128)===128)}catch{}}var ms=Math.clz32?Math.clz32:mX,pX=Math.log,fX=Math.LN2;function mX(e){return e>>>=0,e===0?32:31-(pX(e)/fX|0)|0}var ag=64,sg=4194304;function rf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fv(e,t){var o=e.pendingLanes;if(o===0)return 0;var s=0,c=e.suspendedLanes,u=e.pingedLanes,h=o&268435455;if(h!==0){var f=h&~c;f!==0?s=rf(f):(u&=h,u!==0&&(s=rf(u)))}else h=o&~c,h!==0?s=rf(h):u!==0&&(s=rf(u));if(s===0)return 0;if(t!==0&&t!==s&&!(t&c)&&(c=s&-s,u=t&-t,c>=u||c===16&&(u&4194240)!==0))return t;if(s&4&&(s|=o&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)o=31-ms(t),c=1<<o,s|=e[o],t&=~c;return s}function gX(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vX(e,t){for(var o=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes;0<u;){var h=31-ms(u),f=1<<h,m=c[h];m===-1?(!(f&o)||f&s)&&(c[h]=gX(f,t)):m<=t&&(e.expiredLanes|=f),u&=~f}}function Lb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function HV(){var e=ag;return ag<<=1,!(ag&4194240)&&(ag=64),e}function IC(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function Zf(e,t,o){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ms(t),e[t]=o}function EX(e,t){var o=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<o;){var c=31-ms(o),u=1<<c;t[c]=0,s[c]=-1,e[c]=-1,o&=~u}}function RI(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var s=31-ms(o),c=1<<s;c&t|e[s]&t&&(e[s]|=t),o&=~c}}var $n=0;function WV(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var GV,II,zV,KV,YV,Mb=!1,cg=[],vl=null,El=null,_l=null,wf=new Map,Of=new Map,ul=[],_X="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function aM(e,t){switch(e){case"focusin":case"focusout":vl=null;break;case"dragenter":case"dragleave":El=null;break;case"mouseover":case"mouseout":_l=null;break;case"pointerover":case"pointerout":wf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Of.delete(t.pointerId)}}function Vp(e,t,o,s,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:o,eventSystemFlags:s,nativeEvent:u,targetContainers:[c]},t!==null&&(t=tm(t),t!==null&&II(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function SX(e,t,o,s,c){switch(t){case"focusin":return vl=Vp(vl,e,t,o,s,c),!0;case"dragenter":return El=Vp(El,e,t,o,s,c),!0;case"mouseover":return _l=Vp(_l,e,t,o,s,c),!0;case"pointerover":var u=c.pointerId;return wf.set(u,Vp(wf.get(u)||null,e,t,o,s,c)),!0;case"gotpointercapture":return u=c.pointerId,Of.set(u,Vp(Of.get(u)||null,e,t,o,s,c)),!0}return!1}function qV(e){var t=fu(e.target);if(t!==null){var o=Pu(t);if(o!==null){if(t=o.tag,t===13){if(t=UV(o),t!==null){e.blockedOn=t,YV(e.priority,function(){zV(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=Ub(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var s=new o.constructor(o.type,o);xb=s,o.target.dispatchEvent(s),xb=null}else return t=tm(o),t!==null&&II(t),e.blockedOn=o,!1;t.shift()}return!0}function sM(e,t,o){Gg(e)&&o.delete(t)}function yX(){Mb=!1,vl!==null&&Gg(vl)&&(vl=null),El!==null&&Gg(El)&&(El=null),_l!==null&&Gg(_l)&&(_l=null),wf.forEach(sM),Of.forEach(sM)}function jp(e,t){e.blockedOn===t&&(e.blockedOn=null,Mb||(Mb=!0,ma.unstable_scheduleCallback(ma.unstable_NormalPriority,yX)))}function Af(e){function t(c){return jp(c,e)}if(0<cg.length){jp(cg[0],e);for(var o=1;o<cg.length;o++){var s=cg[o];s.blockedOn===e&&(s.blockedOn=null)}}for(vl!==null&&jp(vl,e),El!==null&&jp(El,e),_l!==null&&jp(_l,e),wf.forEach(t),Of.forEach(t),o=0;o<ul.length;o++)s=ul[o],s.blockedOn===e&&(s.blockedOn=null);for(;0<ul.length&&(o=ul[0],o.blockedOn===null);)qV(o),o.blockedOn===null&&ul.shift()}var ph=Ic.ReactCurrentBatchConfig,mv=!0;function CX(e,t,o,s){var c=$n,u=ph.transition;ph.transition=null;try{$n=1,wI(e,t,o,s)}finally{$n=c,ph.transition=u}}function TX(e,t,o,s){var c=$n,u=ph.transition;ph.transition=null;try{$n=4,wI(e,t,o,s)}finally{$n=c,ph.transition=u}}function wI(e,t,o,s){if(mv){var c=Ub(e,t,o,s);if(c===null)MC(e,t,s,gv,o),aM(e,s);else if(SX(c,e,t,o,s))s.stopPropagation();else if(aM(e,s),t&4&&-1<_X.indexOf(e)){for(;c!==null;){var u=tm(c);if(u!==null&&GV(u),u=Ub(e,t,o,s),u===null&&MC(e,t,s,gv,o),u===c)break;c=u}c!==null&&s.stopPropagation()}else MC(e,t,s,null,o)}}var gv=null;function Ub(e,t,o,s){if(gv=null,e=TI(s),e=fu(e),e!==null)if(t=Pu(e),t===null)e=null;else if(o=t.tag,o===13){if(e=UV(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return gv=e,null}function XV(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uX()){case bI:return 1;case BV:return 4;case pv:case dX:return 16;case $V:return 536870912;default:return 16}default:return 16}}var hl=null,OI=null,zg=null;function JV(){if(zg)return zg;var e,t=OI,o=t.length,s,c="value"in hl?hl.value:hl.textContent,u=c.length;for(e=0;e<o&&t[e]===c[e];e++);var h=o-e;for(s=1;s<=h&&t[o-s]===c[u-s];s++);return zg=c.slice(e,1<s?1-s:void 0)}function Kg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lg(){return!0}function cM(){return!1}function _a(e){function t(o,s,c,u,h){this._reactName=o,this._targetInst=c,this.type=s,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(o=e[f],this[f]=o?o(u):u[f]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?lg:cM,this.isPropagationStopped=cM,this}return wr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=lg)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=lg)},persist:function(){},isPersistent:lg}),t}var kh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},AI=_a(kh),em=wr({},kh,{view:0,detail:0}),bX=_a(em),wC,OC,Bp,cE=wr({},em,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:NI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bp&&(Bp&&e.type==="mousemove"?(wC=e.screenX-Bp.screenX,OC=e.screenY-Bp.screenY):OC=wC=0,Bp=e),wC)},movementY:function(e){return"movementY"in e?e.movementY:OC}}),lM=_a(cE),RX=wr({},cE,{dataTransfer:0}),IX=_a(RX),wX=wr({},em,{relatedTarget:0}),AC=_a(wX),OX=wr({},kh,{animationName:0,elapsedTime:0,pseudoElement:0}),AX=_a(OX),NX=wr({},kh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xX=_a(NX),PX=wr({},kh,{data:0}),uM=_a(PX),DX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MX(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=LX[e])?!!t[e]:!1}function NI(){return MX}var UX=wr({},em,{key:function(e){if(e.key){var t=DX[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Kg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kX[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:NI,charCode:function(e){return e.type==="keypress"?Kg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Kg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),FX=_a(UX),VX=wr({},cE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dM=_a(VX),jX=wr({},em,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:NI}),BX=_a(jX),$X=wr({},kh,{propertyName:0,elapsedTime:0,pseudoElement:0}),HX=_a($X),WX=wr({},cE,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),GX=_a(WX),zX=[9,13,27,32],xI=_c&&"CompositionEvent"in window,uf=null;_c&&"documentMode"in document&&(uf=document.documentMode);var KX=_c&&"TextEvent"in window&&!uf,QV=_c&&(!xI||uf&&8<uf&&11>=uf),hM=String.fromCharCode(32),pM=!1;function ZV(e,t){switch(e){case"keyup":return zX.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ej(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xd=!1;function YX(e,t){switch(e){case"compositionend":return ej(t);case"keypress":return t.which!==32?null:(pM=!0,hM);case"textInput":return e=t.data,e===hM&&pM?null:e;default:return null}}function qX(e,t){if(Xd)return e==="compositionend"||!xI&&ZV(e,t)?(e=JV(),zg=OI=hl=null,Xd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return QV&&t.locale!=="ko"?null:t.data;default:return null}}var XX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!XX[e.type]:t==="textarea"}function tj(e,t,o,s){PV(s),t=vv(t,"onChange"),0<t.length&&(o=new AI("onChange","change",null,o,s),e.push({event:o,listeners:t}))}var df=null,Nf=null;function JX(e){hj(e,0)}function lE(e){var t=Zd(e);if(RV(t))return e}function QX(e,t){if(e==="change")return t}var nj=!1;if(_c){var NC;if(_c){var xC="oninput"in document;if(!xC){var mM=document.createElement("div");mM.setAttribute("oninput","return;"),xC=typeof mM.oninput=="function"}NC=xC}else NC=!1;nj=NC&&(!document.documentMode||9<document.documentMode)}function gM(){df&&(df.detachEvent("onpropertychange",rj),Nf=df=null)}function rj(e){if(e.propertyName==="value"&&lE(Nf)){var t=[];tj(t,Nf,e,TI(e)),MV(JX,t)}}function ZX(e,t,o){e==="focusin"?(gM(),df=t,Nf=o,df.attachEvent("onpropertychange",rj)):e==="focusout"&&gM()}function eJ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lE(Nf)}function tJ(e,t){if(e==="click")return lE(t)}function nJ(e,t){if(e==="input"||e==="change")return lE(t)}function rJ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Es=typeof Object.is=="function"?Object.is:rJ;function xf(e,t){if(Es(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(s=0;s<o.length;s++){var c=o[s];if(!_b.call(t,c)||!Es(e[c],t[c]))return!1}return!0}function vM(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function EM(e,t){var o=vM(e);e=0;for(var s;o;){if(o.nodeType===3){if(s=e+o.textContent.length,e<=t&&s>=t)return{node:o,offset:t-e};e=s}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=vM(o)}}function ij(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ij(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function oj(){for(var e=window,t=uv();t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=uv(e.document)}return t}function PI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function iJ(e){var t=oj(),o=e.focusedElem,s=e.selectionRange;if(t!==o&&o&&o.ownerDocument&&ij(o.ownerDocument.documentElement,o)){if(s!==null&&PI(o)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in o)o.selectionStart=t,o.selectionEnd=Math.min(e,o.value.length);else if(e=(t=o.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=o.textContent.length,u=Math.min(s.start,c);s=s.end===void 0?u:Math.min(s.end,c),!e.extend&&u>s&&(c=s,s=u,u=c),c=EM(o,u);var h=EM(o,s);c&&h&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),u>s?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=o;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<t.length;o++)e=t[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var oJ=_c&&"documentMode"in document&&11>=document.documentMode,Jd=null,Fb=null,hf=null,Vb=!1;function _M(e,t,o){var s=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Vb||Jd==null||Jd!==uv(s)||(s=Jd,"selectionStart"in s&&PI(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),hf&&xf(hf,s)||(hf=s,s=vv(Fb,"onSelect"),0<s.length&&(t=new AI("onSelect","select",null,t,o),e.push({event:t,listeners:s}),t.target=Jd)))}function ug(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var Qd={animationend:ug("Animation","AnimationEnd"),animationiteration:ug("Animation","AnimationIteration"),animationstart:ug("Animation","AnimationStart"),transitionend:ug("Transition","TransitionEnd")},PC={},aj={};_c&&(aj=document.createElement("div").style,"AnimationEvent"in window||(delete Qd.animationend.animation,delete Qd.animationiteration.animation,delete Qd.animationstart.animation),"TransitionEvent"in window||delete Qd.transitionend.transition);function uE(e){if(PC[e])return PC[e];if(!Qd[e])return e;var t=Qd[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in aj)return PC[e]=t[o];return e}var sj=uE("animationend"),cj=uE("animationiteration"),lj=uE("animationstart"),uj=uE("transitionend"),dj=new Map,SM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nl(e,t){dj.set(e,t),xu(t,[e])}for(var DC=0;DC<SM.length;DC++){var kC=SM[DC],aJ=kC.toLowerCase(),sJ=kC[0].toUpperCase()+kC.slice(1);Nl(aJ,"on"+sJ)}Nl(sj,"onAnimationEnd");Nl(cj,"onAnimationIteration");Nl(lj,"onAnimationStart");Nl("dblclick","onDoubleClick");Nl("focusin","onFocus");Nl("focusout","onBlur");Nl(uj,"onTransitionEnd");Sh("onMouseEnter",["mouseout","mouseover"]);Sh("onMouseLeave",["mouseout","mouseover"]);Sh("onPointerEnter",["pointerout","pointerover"]);Sh("onPointerLeave",["pointerout","pointerover"]);xu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xu("onBeforeInput",["compositionend","keypress","textInput","paste"]);xu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var of="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(of));function yM(e,t,o){var s=e.type||"unknown-event";e.currentTarget=o,aX(s,t,void 0,e),e.currentTarget=null}function hj(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var s=e[o],c=s.event;s=s.listeners;e:{var u=void 0;if(t)for(var h=s.length-1;0<=h;h--){var f=s[h],m=f.instance,v=f.currentTarget;if(f=f.listener,m!==u&&c.isPropagationStopped())break e;yM(c,f,v),u=m}else for(h=0;h<s.length;h++){if(f=s[h],m=f.instance,v=f.currentTarget,f=f.listener,m!==u&&c.isPropagationStopped())break e;yM(c,f,v),u=m}}}if(hv)throw e=kb,hv=!1,kb=null,e}function mr(e,t){var o=t[Wb];o===void 0&&(o=t[Wb]=new Set);var s=e+"__bubble";o.has(s)||(pj(t,e,2,!1),o.add(s))}function LC(e,t,o){var s=0;t&&(s|=4),pj(o,e,s,t)}var dg="_reactListening"+Math.random().toString(36).slice(2);function Pf(e){if(!e[dg]){e[dg]=!0,SV.forEach(function(o){o!=="selectionchange"&&(cJ.has(o)||LC(o,!1,e),LC(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[dg]||(t[dg]=!0,LC("selectionchange",!1,t))}}function pj(e,t,o,s){switch(XV(t)){case 1:var c=CX;break;case 4:c=TX;break;default:c=wI}o=c.bind(null,t,o,e),c=void 0,!Db||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,o,{capture:!0,passive:c}):e.addEventListener(t,o,!0):c!==void 0?e.addEventListener(t,o,{passive:c}):e.addEventListener(t,o,!1)}function MC(e,t,o,s,c){var u=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var h=s.tag;if(h===3||h===4){var f=s.stateNode.containerInfo;if(f===c||f.nodeType===8&&f.parentNode===c)break;if(h===4)for(h=s.return;h!==null;){var m=h.tag;if((m===3||m===4)&&(m=h.stateNode.containerInfo,m===c||m.nodeType===8&&m.parentNode===c))return;h=h.return}for(;f!==null;){if(h=fu(f),h===null)return;if(m=h.tag,m===5||m===6){s=u=h;continue e}f=f.parentNode}}s=s.return}MV(function(){var v=u,_=TI(o),y=[];e:{var T=dj.get(e);if(T!==void 0){var A=AI,I=e;switch(e){case"keypress":if(Kg(o)===0)break e;case"keydown":case"keyup":A=FX;break;case"focusin":I="focus",A=AC;break;case"focusout":I="blur",A=AC;break;case"beforeblur":case"afterblur":A=AC;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=lM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=IX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=BX;break;case sj:case cj:case lj:A=AX;break;case uj:A=HX;break;case"scroll":A=bX;break;case"wheel":A=GX;break;case"copy":case"cut":case"paste":A=xX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=dM}var O=(t&4)!==0,L=!O&&e==="scroll",x=O?T!==null?T+"Capture":null:T;O=[];for(var N=v,D;N!==null;){D=N;var U=D.stateNode;if(D.tag===5&&U!==null&&(D=U,x!==null&&(U=If(N,x),U!=null&&O.push(Df(N,U,D)))),L)break;N=N.return}0<O.length&&(T=new A(T,I,null,o,_),y.push({event:T,listeners:O}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",A=e==="mouseout"||e==="pointerout",T&&o!==xb&&(I=o.relatedTarget||o.fromElement)&&(fu(I)||I[Sc]))break e;if((A||T)&&(T=_.window===_?_:(T=_.ownerDocument)?T.defaultView||T.parentWindow:window,A?(I=o.relatedTarget||o.toElement,A=v,I=I?fu(I):null,I!==null&&(L=Pu(I),I!==L||I.tag!==5&&I.tag!==6)&&(I=null)):(A=null,I=v),A!==I)){if(O=lM,U="onMouseLeave",x="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(O=dM,U="onPointerLeave",x="onPointerEnter",N="pointer"),L=A==null?T:Zd(A),D=I==null?T:Zd(I),T=new O(U,N+"leave",A,o,_),T.target=L,T.relatedTarget=D,U=null,fu(_)===v&&(O=new O(x,N+"enter",I,o,_),O.target=D,O.relatedTarget=L,U=O),L=U,A&&I)t:{for(O=A,x=I,N=0,D=O;D;D=Ld(D))N++;for(D=0,U=x;U;U=Ld(U))D++;for(;0<N-D;)O=Ld(O),N--;for(;0<D-N;)x=Ld(x),D--;for(;N--;){if(O===x||x!==null&&O===x.alternate)break t;O=Ld(O),x=Ld(x)}O=null}else O=null;A!==null&&CM(y,T,A,O,!1),I!==null&&L!==null&&CM(y,L,I,O,!0)}}e:{if(T=v?Zd(v):window,A=T.nodeName&&T.nodeName.toLowerCase(),A==="select"||A==="input"&&T.type==="file")var V=QX;else if(fM(T))if(nj)V=nJ;else{V=eJ;var j=ZX}else(A=T.nodeName)&&A.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(V=tJ);if(V&&(V=V(e,v))){tj(y,V,o,_);break e}j&&j(e,T,v),e==="focusout"&&(j=T._wrapperState)&&j.controlled&&T.type==="number"&&Ib(T,"number",T.value)}switch(j=v?Zd(v):window,e){case"focusin":(fM(j)||j.contentEditable==="true")&&(Jd=j,Fb=v,hf=null);break;case"focusout":hf=Fb=Jd=null;break;case"mousedown":Vb=!0;break;case"contextmenu":case"mouseup":case"dragend":Vb=!1,_M(y,o,_);break;case"selectionchange":if(oJ)break;case"keydown":case"keyup":_M(y,o,_)}var B;if(xI)e:{switch(e){case"compositionstart":var Y="onCompositionStart";break e;case"compositionend":Y="onCompositionEnd";break e;case"compositionupdate":Y="onCompositionUpdate";break e}Y=void 0}else Xd?ZV(e,o)&&(Y="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Y="onCompositionStart");Y&&(QV&&o.locale!=="ko"&&(Xd||Y!=="onCompositionStart"?Y==="onCompositionEnd"&&Xd&&(B=JV()):(hl=_,OI="value"in hl?hl.value:hl.textContent,Xd=!0)),j=vv(v,Y),0<j.length&&(Y=new uM(Y,e,null,o,_),y.push({event:Y,listeners:j}),B?Y.data=B:(B=ej(o),B!==null&&(Y.data=B)))),(B=KX?YX(e,o):qX(e,o))&&(v=vv(v,"onBeforeInput"),0<v.length&&(_=new uM("onBeforeInput","beforeinput",null,o,_),y.push({event:_,listeners:v}),_.data=B))}hj(y,t)})}function Df(e,t,o){return{instance:e,listener:t,currentTarget:o}}function vv(e,t){for(var o=t+"Capture",s=[];e!==null;){var c=e,u=c.stateNode;c.tag===5&&u!==null&&(c=u,u=If(e,o),u!=null&&s.unshift(Df(e,u,c)),u=If(e,t),u!=null&&s.push(Df(e,u,c))),e=e.return}return s}function Ld(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function CM(e,t,o,s,c){for(var u=t._reactName,h=[];o!==null&&o!==s;){var f=o,m=f.alternate,v=f.stateNode;if(m!==null&&m===s)break;f.tag===5&&v!==null&&(f=v,c?(m=If(o,u),m!=null&&h.unshift(Df(o,m,f))):c||(m=If(o,u),m!=null&&h.push(Df(o,m,f)))),o=o.return}h.length!==0&&e.push({event:t,listeners:h})}var lJ=/\r\n?/g,uJ=/\u0000|\uFFFD/g;function TM(e){return(typeof e=="string"?e:""+e).replace(lJ,`
`).replace(uJ,"")}function hg(e,t,o){if(t=TM(t),TM(e)!==t&&o)throw Error(Fe(425))}function Ev(){}var jb=null,Bb=null;function $b(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hb=typeof setTimeout=="function"?setTimeout:void 0,dJ=typeof clearTimeout=="function"?clearTimeout:void 0,bM=typeof Promise=="function"?Promise:void 0,hJ=typeof queueMicrotask=="function"?queueMicrotask:typeof bM<"u"?function(e){return bM.resolve(null).then(e).catch(pJ)}:Hb;function pJ(e){setTimeout(function(){throw e})}function UC(e,t){var o=t,s=0;do{var c=o.nextSibling;if(e.removeChild(o),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(s===0){e.removeChild(c),Af(t);return}s--}else o!=="$"&&o!=="$?"&&o!=="$!"||s++;o=c}while(o);Af(t)}function Sl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function RM(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(t===0)return e;t--}else o==="/$"&&t++}e=e.previousSibling}return null}var Lh=Math.random().toString(36).slice(2),Fs="__reactFiber$"+Lh,kf="__reactProps$"+Lh,Sc="__reactContainer$"+Lh,Wb="__reactEvents$"+Lh,fJ="__reactListeners$"+Lh,mJ="__reactHandles$"+Lh;function fu(e){var t=e[Fs];if(t)return t;for(var o=e.parentNode;o;){if(t=o[Sc]||o[Fs]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=RM(e);e!==null;){if(o=e[Fs])return o;e=RM(e)}return t}e=o,o=e.parentNode}return null}function tm(e){return e=e[Fs]||e[Sc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Fe(33))}function dE(e){return e[kf]||null}var Gb=[],eh=-1;function xl(e){return{current:e}}function gr(e){0>eh||(e.current=Gb[eh],Gb[eh]=null,eh--)}function lr(e,t){eh++,Gb[eh]=e.current,e.current=t}var wl={},so=xl(wl),jo=xl(!1),Ru=wl;function yh(e,t){var o=e.type.contextTypes;if(!o)return wl;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var c={},u;for(u in o)c[u]=t[u];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Bo(e){return e=e.childContextTypes,e!=null}function _v(){gr(jo),gr(so)}function IM(e,t,o){if(so.current!==wl)throw Error(Fe(168));lr(so,t),lr(jo,o)}function fj(e,t,o){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return o;s=s.getChildContext();for(var c in s)if(!(c in t))throw Error(Fe(108,Zq(e)||"Unknown",c));return wr({},o,s)}function Sv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wl,Ru=so.current,lr(so,e),lr(jo,jo.current),!0}function wM(e,t,o){var s=e.stateNode;if(!s)throw Error(Fe(169));o?(e=fj(e,t,Ru),s.__reactInternalMemoizedMergedChildContext=e,gr(jo),gr(so),lr(so,e)):gr(jo),lr(jo,o)}var pc=null,hE=!1,FC=!1;function mj(e){pc===null?pc=[e]:pc.push(e)}function gJ(e){hE=!0,mj(e)}function Pl(){if(!FC&&pc!==null){FC=!0;var e=0,t=$n;try{var o=pc;for($n=1;e<o.length;e++){var s=o[e];do s=s(!0);while(s!==null)}pc=null,hE=!1}catch(c){throw pc!==null&&(pc=pc.slice(e+1)),jV(bI,Pl),c}finally{$n=t,FC=!1}}return null}var th=[],nh=0,yv=null,Cv=0,Ma=[],Ua=0,Iu=null,mc=1,gc="";function lu(e,t){th[nh++]=Cv,th[nh++]=yv,yv=e,Cv=t}function gj(e,t,o){Ma[Ua++]=mc,Ma[Ua++]=gc,Ma[Ua++]=Iu,Iu=e;var s=mc;e=gc;var c=32-ms(s)-1;s&=~(1<<c),o+=1;var u=32-ms(t)+c;if(30<u){var h=c-c%5;u=(s&(1<<h)-1).toString(32),s>>=h,c-=h,mc=1<<32-ms(t)+c|o<<c|s,gc=u+e}else mc=1<<u|o<<c|s,gc=e}function DI(e){e.return!==null&&(lu(e,1),gj(e,1,0))}function kI(e){for(;e===yv;)yv=th[--nh],th[nh]=null,Cv=th[--nh],th[nh]=null;for(;e===Iu;)Iu=Ma[--Ua],Ma[Ua]=null,gc=Ma[--Ua],Ma[Ua]=null,mc=Ma[--Ua],Ma[Ua]=null}var ha=null,ua=null,Sr=!1,ds=null;function vj(e,t){var o=Fa(5,null,null,0);o.elementType="DELETED",o.stateNode=t,o.return=e,t=e.deletions,t===null?(e.deletions=[o],e.flags|=16):t.push(o)}function OM(e,t){switch(e.tag){case 5:var o=e.type;return t=t.nodeType!==1||o.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ha=e,ua=Sl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ha=e,ua=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(o=Iu!==null?{id:mc,overflow:gc}:null,e.memoizedState={dehydrated:t,treeContext:o,retryLane:1073741824},o=Fa(18,null,null,0),o.stateNode=t,o.return=e,e.child=o,ha=e,ua=null,!0):!1;default:return!1}}function zb(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Kb(e){if(Sr){var t=ua;if(t){var o=t;if(!OM(e,t)){if(zb(e))throw Error(Fe(418));t=Sl(o.nextSibling);var s=ha;t&&OM(e,t)?vj(s,o):(e.flags=e.flags&-4097|2,Sr=!1,ha=e)}}else{if(zb(e))throw Error(Fe(418));e.flags=e.flags&-4097|2,Sr=!1,ha=e}}}function AM(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ha=e}function pg(e){if(e!==ha)return!1;if(!Sr)return AM(e),Sr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$b(e.type,e.memoizedProps)),t&&(t=ua)){if(zb(e))throw Ej(),Error(Fe(418));for(;t;)vj(e,t),t=Sl(t.nextSibling)}if(AM(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Fe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(t===0){ua=Sl(e.nextSibling);break e}t--}else o!=="$"&&o!=="$!"&&o!=="$?"||t++}e=e.nextSibling}ua=null}}else ua=ha?Sl(e.stateNode.nextSibling):null;return!0}function Ej(){for(var e=ua;e;)e=Sl(e.nextSibling)}function Ch(){ua=ha=null,Sr=!1}function LI(e){ds===null?ds=[e]:ds.push(e)}var vJ=Ic.ReactCurrentBatchConfig;function ss(e,t){if(e&&e.defaultProps){t=wr({},t),e=e.defaultProps;for(var o in e)t[o]===void 0&&(t[o]=e[o]);return t}return t}var Tv=xl(null),bv=null,rh=null,MI=null;function UI(){MI=rh=bv=null}function FI(e){var t=Tv.current;gr(Tv),e._currentValue=t}function Yb(e,t,o){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===o)break;e=e.return}}function fh(e,t){bv=e,MI=rh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Fo=!0),e.firstContext=null)}function Ba(e){var t=e._currentValue;if(MI!==e)if(e={context:e,memoizedValue:t,next:null},rh===null){if(bv===null)throw Error(Fe(308));rh=e,bv.dependencies={lanes:0,firstContext:e}}else rh=rh.next=e;return t}var mu=null;function VI(e){mu===null?mu=[e]:mu.push(e)}function _j(e,t,o,s){var c=t.interleaved;return c===null?(o.next=o,VI(t)):(o.next=c.next,c.next=o),t.interleaved=o,yc(e,s)}function yc(e,t){e.lanes|=t;var o=e.alternate;for(o!==null&&(o.lanes|=t),o=e,e=e.return;e!==null;)e.childLanes|=t,o=e.alternate,o!==null&&(o.childLanes|=t),o=e,e=e.return;return o.tag===3?o.stateNode:null}var ll=!1;function jI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yl(e,t,o){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,yn&2){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,yc(e,o)}return c=s.interleaved,c===null?(t.next=t,VI(s)):(t.next=c.next,c.next=t),s.interleaved=t,yc(e,o)}function Yg(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,o|=s,t.lanes=o,RI(e,o)}}function NM(e,t){var o=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,o===s)){var c=null,u=null;if(o=o.firstBaseUpdate,o!==null){do{var h={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};u===null?c=u=h:u=u.next=h,o=o.next}while(o!==null);u===null?c=u=t:u=u.next=t}else c=u=t;o={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:s.shared,effects:s.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}function Rv(e,t,o,s){var c=e.updateQueue;ll=!1;var u=c.firstBaseUpdate,h=c.lastBaseUpdate,f=c.shared.pending;if(f!==null){c.shared.pending=null;var m=f,v=m.next;m.next=null,h===null?u=v:h.next=v,h=m;var _=e.alternate;_!==null&&(_=_.updateQueue,f=_.lastBaseUpdate,f!==h&&(f===null?_.firstBaseUpdate=v:f.next=v,_.lastBaseUpdate=m))}if(u!==null){var y=c.baseState;h=0,_=v=m=null,f=u;do{var T=f.lane,A=f.eventTime;if((s&T)===T){_!==null&&(_=_.next={eventTime:A,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var I=e,O=f;switch(T=t,A=o,O.tag){case 1:if(I=O.payload,typeof I=="function"){y=I.call(A,y,T);break e}y=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=O.payload,T=typeof I=="function"?I.call(A,y,T):I,T==null)break e;y=wr({},y,T);break e;case 2:ll=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,T=c.effects,T===null?c.effects=[f]:T.push(f))}else A={eventTime:A,lane:T,tag:f.tag,payload:f.payload,callback:f.callback,next:null},_===null?(v=_=A,m=y):_=_.next=A,h|=T;if(f=f.next,f===null){if(f=c.shared.pending,f===null)break;T=f,f=T.next,T.next=null,c.lastBaseUpdate=T,c.shared.pending=null}}while(1);if(_===null&&(m=y),c.baseState=m,c.firstBaseUpdate=v,c.lastBaseUpdate=_,t=c.shared.interleaved,t!==null){c=t;do h|=c.lane,c=c.next;while(c!==t)}else u===null&&(c.shared.lanes=0);Ou|=h,e.lanes=h,e.memoizedState=y}}function xM(e,t,o){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],c=s.callback;if(c!==null){if(s.callback=null,s=o,typeof c!="function")throw Error(Fe(191,c));c.call(s)}}}var yj=new _V.Component().refs;function qb(e,t,o,s){t=e.memoizedState,o=o(s,t),o=o==null?t:wr({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var pE={isMounted:function(e){return(e=e._reactInternals)?Pu(e)===e:!1},enqueueSetState:function(e,t,o){e=e._reactInternals;var s=vo(),c=Tl(e),u=vc(s,c);u.payload=t,o!=null&&(u.callback=o),t=yl(e,u,c),t!==null&&(gs(t,e,c,s),Yg(t,e,c))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var s=vo(),c=Tl(e),u=vc(s,c);u.tag=1,u.payload=t,o!=null&&(u.callback=o),t=yl(e,u,c),t!==null&&(gs(t,e,c,s),Yg(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=vo(),s=Tl(e),c=vc(o,s);c.tag=2,t!=null&&(c.callback=t),t=yl(e,c,s),t!==null&&(gs(t,e,s,o),Yg(t,e,s))}};function PM(e,t,o,s,c,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,u,h):t.prototype&&t.prototype.isPureReactComponent?!xf(o,s)||!xf(c,u):!0}function Cj(e,t,o){var s=!1,c=wl,u=t.contextType;return typeof u=="object"&&u!==null?u=Ba(u):(c=Bo(t)?Ru:so.current,s=t.contextTypes,u=(s=s!=null)?yh(e,c):wl),t=new t(o,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=pE,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=u),t}function DM(e,t,o,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,s),t.state!==e&&pE.enqueueReplaceState(t,t.state,null)}function Xb(e,t,o,s){var c=e.stateNode;c.props=o,c.state=e.memoizedState,c.refs=yj,jI(e);var u=t.contextType;typeof u=="object"&&u!==null?c.context=Ba(u):(u=Bo(t)?Ru:so.current,c.context=yh(e,u)),c.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(qb(e,t,u,o),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&pE.enqueueReplaceState(c,c.state,null),Rv(e,o,c,s),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function $p(e,t,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(Fe(309));var s=o.stateNode}if(!s)throw Error(Fe(147,e));var c=s,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(h){var f=c.refs;f===yj&&(f=c.refs={}),h===null?delete f[u]:f[u]=h},t._stringRef=u,t)}if(typeof e!="string")throw Error(Fe(284));if(!o._owner)throw Error(Fe(290,e))}return e}function fg(e,t){throw e=Object.prototype.toString.call(t),Error(Fe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kM(e){var t=e._init;return t(e._payload)}function Tj(e){function t(x,N){if(e){var D=x.deletions;D===null?(x.deletions=[N],x.flags|=16):D.push(N)}}function o(x,N){if(!e)return null;for(;N!==null;)t(x,N),N=N.sibling;return null}function s(x,N){for(x=new Map;N!==null;)N.key!==null?x.set(N.key,N):x.set(N.index,N),N=N.sibling;return x}function c(x,N){return x=bl(x,N),x.index=0,x.sibling=null,x}function u(x,N,D){return x.index=D,e?(D=x.alternate,D!==null?(D=D.index,D<N?(x.flags|=2,N):D):(x.flags|=2,N)):(x.flags|=1048576,N)}function h(x){return e&&x.alternate===null&&(x.flags|=2),x}function f(x,N,D,U){return N===null||N.tag!==6?(N=GC(D,x.mode,U),N.return=x,N):(N=c(N,D),N.return=x,N)}function m(x,N,D,U){var V=D.type;return V===qd?_(x,N,D.props.children,U,D.key):N!==null&&(N.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===cl&&kM(V)===N.type)?(U=c(N,D.props),U.ref=$p(x,N,D),U.return=x,U):(U=ev(D.type,D.key,D.props,null,x.mode,U),U.ref=$p(x,N,D),U.return=x,U)}function v(x,N,D,U){return N===null||N.tag!==4||N.stateNode.containerInfo!==D.containerInfo||N.stateNode.implementation!==D.implementation?(N=zC(D,x.mode,U),N.return=x,N):(N=c(N,D.children||[]),N.return=x,N)}function _(x,N,D,U,V){return N===null||N.tag!==7?(N=yu(D,x.mode,U,V),N.return=x,N):(N=c(N,D),N.return=x,N)}function y(x,N,D){if(typeof N=="string"&&N!==""||typeof N=="number")return N=GC(""+N,x.mode,D),N.return=x,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case rg:return D=ev(N.type,N.key,N.props,null,x.mode,D),D.ref=$p(x,null,N),D.return=x,D;case Yd:return N=zC(N,x.mode,D),N.return=x,N;case cl:var U=N._init;return y(x,U(N._payload),D)}if(nf(N)||Up(N))return N=yu(N,x.mode,D,null),N.return=x,N;fg(x,N)}return null}function T(x,N,D,U){var V=N!==null?N.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return V!==null?null:f(x,N,""+D,U);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case rg:return D.key===V?m(x,N,D,U):null;case Yd:return D.key===V?v(x,N,D,U):null;case cl:return V=D._init,T(x,N,V(D._payload),U)}if(nf(D)||Up(D))return V!==null?null:_(x,N,D,U,null);fg(x,D)}return null}function A(x,N,D,U,V){if(typeof U=="string"&&U!==""||typeof U=="number")return x=x.get(D)||null,f(N,x,""+U,V);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case rg:return x=x.get(U.key===null?D:U.key)||null,m(N,x,U,V);case Yd:return x=x.get(U.key===null?D:U.key)||null,v(N,x,U,V);case cl:var j=U._init;return A(x,N,D,j(U._payload),V)}if(nf(U)||Up(U))return x=x.get(D)||null,_(N,x,U,V,null);fg(N,U)}return null}function I(x,N,D,U){for(var V=null,j=null,B=N,Y=N=0,ee=null;B!==null&&Y<D.length;Y++){B.index>Y?(ee=B,B=null):ee=B.sibling;var H=T(x,B,D[Y],U);if(H===null){B===null&&(B=ee);break}e&&B&&H.alternate===null&&t(x,B),N=u(H,N,Y),j===null?V=H:j.sibling=H,j=H,B=ee}if(Y===D.length)return o(x,B),Sr&&lu(x,Y),V;if(B===null){for(;Y<D.length;Y++)B=y(x,D[Y],U),B!==null&&(N=u(B,N,Y),j===null?V=B:j.sibling=B,j=B);return Sr&&lu(x,Y),V}for(B=s(x,B);Y<D.length;Y++)ee=A(B,x,Y,D[Y],U),ee!==null&&(e&&ee.alternate!==null&&B.delete(ee.key===null?Y:ee.key),N=u(ee,N,Y),j===null?V=ee:j.sibling=ee,j=ee);return e&&B.forEach(function(Z){return t(x,Z)}),Sr&&lu(x,Y),V}function O(x,N,D,U){var V=Up(D);if(typeof V!="function")throw Error(Fe(150));if(D=V.call(D),D==null)throw Error(Fe(151));for(var j=V=null,B=N,Y=N=0,ee=null,H=D.next();B!==null&&!H.done;Y++,H=D.next()){B.index>Y?(ee=B,B=null):ee=B.sibling;var Z=T(x,B,H.value,U);if(Z===null){B===null&&(B=ee);break}e&&B&&Z.alternate===null&&t(x,B),N=u(Z,N,Y),j===null?V=Z:j.sibling=Z,j=Z,B=ee}if(H.done)return o(x,B),Sr&&lu(x,Y),V;if(B===null){for(;!H.done;Y++,H=D.next())H=y(x,H.value,U),H!==null&&(N=u(H,N,Y),j===null?V=H:j.sibling=H,j=H);return Sr&&lu(x,Y),V}for(B=s(x,B);!H.done;Y++,H=D.next())H=A(B,x,Y,H.value,U),H!==null&&(e&&H.alternate!==null&&B.delete(H.key===null?Y:H.key),N=u(H,N,Y),j===null?V=H:j.sibling=H,j=H);return e&&B.forEach(function(J){return t(x,J)}),Sr&&lu(x,Y),V}function L(x,N,D,U){if(typeof D=="object"&&D!==null&&D.type===qd&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case rg:e:{for(var V=D.key,j=N;j!==null;){if(j.key===V){if(V=D.type,V===qd){if(j.tag===7){o(x,j.sibling),N=c(j,D.props.children),N.return=x,x=N;break e}}else if(j.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===cl&&kM(V)===j.type){o(x,j.sibling),N=c(j,D.props),N.ref=$p(x,j,D),N.return=x,x=N;break e}o(x,j);break}else t(x,j);j=j.sibling}D.type===qd?(N=yu(D.props.children,x.mode,U,D.key),N.return=x,x=N):(U=ev(D.type,D.key,D.props,null,x.mode,U),U.ref=$p(x,N,D),U.return=x,x=U)}return h(x);case Yd:e:{for(j=D.key;N!==null;){if(N.key===j)if(N.tag===4&&N.stateNode.containerInfo===D.containerInfo&&N.stateNode.implementation===D.implementation){o(x,N.sibling),N=c(N,D.children||[]),N.return=x,x=N;break e}else{o(x,N);break}else t(x,N);N=N.sibling}N=zC(D,x.mode,U),N.return=x,x=N}return h(x);case cl:return j=D._init,L(x,N,j(D._payload),U)}if(nf(D))return I(x,N,D,U);if(Up(D))return O(x,N,D,U);fg(x,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,N!==null&&N.tag===6?(o(x,N.sibling),N=c(N,D),N.return=x,x=N):(o(x,N),N=GC(D,x.mode,U),N.return=x,x=N),h(x)):o(x,N)}return L}var Th=Tj(!0),bj=Tj(!1),nm={},js=xl(nm),Lf=xl(nm),Mf=xl(nm);function gu(e){if(e===nm)throw Error(Fe(174));return e}function BI(e,t){switch(lr(Mf,t),lr(Lf,e),lr(js,nm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ob(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ob(t,e)}gr(js),lr(js,t)}function bh(){gr(js),gr(Lf),gr(Mf)}function Rj(e){gu(Mf.current);var t=gu(js.current),o=Ob(t,e.type);t!==o&&(lr(Lf,e),lr(js,o))}function $I(e){Lf.current===e&&(gr(js),gr(Lf))}var Rr=xl(0);function Iv(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var VC=[];function HI(){for(var e=0;e<VC.length;e++)VC[e]._workInProgressVersionPrimary=null;VC.length=0}var qg=Ic.ReactCurrentDispatcher,jC=Ic.ReactCurrentBatchConfig,wu=0,Ir=null,pi=null,Ri=null,wv=!1,pf=!1,Uf=0,EJ=0;function to(){throw Error(Fe(321))}function WI(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!Es(e[o],t[o]))return!1;return!0}function GI(e,t,o,s,c,u){if(wu=u,Ir=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qg.current=e===null||e.memoizedState===null?CJ:TJ,e=o(s,c),pf){u=0;do{if(pf=!1,Uf=0,25<=u)throw Error(Fe(301));u+=1,Ri=pi=null,t.updateQueue=null,qg.current=bJ,e=o(s,c)}while(pf)}if(qg.current=Ov,t=pi!==null&&pi.next!==null,wu=0,Ri=pi=Ir=null,wv=!1,t)throw Error(Fe(300));return e}function zI(){var e=Uf!==0;return Uf=0,e}function Ls(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ri===null?Ir.memoizedState=Ri=e:Ri=Ri.next=e,Ri}function $a(){if(pi===null){var e=Ir.alternate;e=e!==null?e.memoizedState:null}else e=pi.next;var t=Ri===null?Ir.memoizedState:Ri.next;if(t!==null)Ri=t,pi=e;else{if(e===null)throw Error(Fe(310));pi=e,e={memoizedState:pi.memoizedState,baseState:pi.baseState,baseQueue:pi.baseQueue,queue:pi.queue,next:null},Ri===null?Ir.memoizedState=Ri=e:Ri=Ri.next=e}return Ri}function Ff(e,t){return typeof t=="function"?t(e):t}function BC(e){var t=$a(),o=t.queue;if(o===null)throw Error(Fe(311));o.lastRenderedReducer=e;var s=pi,c=s.baseQueue,u=o.pending;if(u!==null){if(c!==null){var h=c.next;c.next=u.next,u.next=h}s.baseQueue=c=u,o.pending=null}if(c!==null){u=c.next,s=s.baseState;var f=h=null,m=null,v=u;do{var _=v.lane;if((wu&_)===_)m!==null&&(m=m.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),s=v.hasEagerState?v.eagerState:e(s,v.action);else{var y={lane:_,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};m===null?(f=m=y,h=s):m=m.next=y,Ir.lanes|=_,Ou|=_}v=v.next}while(v!==null&&v!==u);m===null?h=s:m.next=f,Es(s,t.memoizedState)||(Fo=!0),t.memoizedState=s,t.baseState=h,t.baseQueue=m,o.lastRenderedState=s}if(e=o.interleaved,e!==null){c=e;do u=c.lane,Ir.lanes|=u,Ou|=u,c=c.next;while(c!==e)}else c===null&&(o.lanes=0);return[t.memoizedState,o.dispatch]}function $C(e){var t=$a(),o=t.queue;if(o===null)throw Error(Fe(311));o.lastRenderedReducer=e;var s=o.dispatch,c=o.pending,u=t.memoizedState;if(c!==null){o.pending=null;var h=c=c.next;do u=e(u,h.action),h=h.next;while(h!==c);Es(u,t.memoizedState)||(Fo=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),o.lastRenderedState=u}return[u,s]}function Ij(){}function wj(e,t){var o=Ir,s=$a(),c=t(),u=!Es(s.memoizedState,c);if(u&&(s.memoizedState=c,Fo=!0),s=s.queue,KI(Nj.bind(null,o,s,e),[e]),s.getSnapshot!==t||u||Ri!==null&&Ri.memoizedState.tag&1){if(o.flags|=2048,Vf(9,Aj.bind(null,o,s,c,t),void 0,null),Ii===null)throw Error(Fe(349));wu&30||Oj(o,t,c)}return c}function Oj(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=Ir.updateQueue,t===null?(t={lastEffect:null,stores:null},Ir.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function Aj(e,t,o,s){t.value=o,t.getSnapshot=s,xj(t)&&Pj(e)}function Nj(e,t,o){return o(function(){xj(t)&&Pj(e)})}function xj(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!Es(e,o)}catch{return!0}}function Pj(e){var t=yc(e,1);t!==null&&gs(t,e,1,-1)}function LM(e){var t=Ls();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ff,lastRenderedState:e},t.queue=e,e=e.dispatch=yJ.bind(null,Ir,e),[t.memoizedState,e]}function Vf(e,t,o,s){return e={tag:e,create:t,destroy:o,deps:s,next:null},t=Ir.updateQueue,t===null?(t={lastEffect:null,stores:null},Ir.updateQueue=t,t.lastEffect=e.next=e):(o=t.lastEffect,o===null?t.lastEffect=e.next=e:(s=o.next,o.next=e,e.next=s,t.lastEffect=e)),e}function Dj(){return $a().memoizedState}function Xg(e,t,o,s){var c=Ls();Ir.flags|=e,c.memoizedState=Vf(1|t,o,void 0,s===void 0?null:s)}function fE(e,t,o,s){var c=$a();s=s===void 0?null:s;var u=void 0;if(pi!==null){var h=pi.memoizedState;if(u=h.destroy,s!==null&&WI(s,h.deps)){c.memoizedState=Vf(t,o,u,s);return}}Ir.flags|=e,c.memoizedState=Vf(1|t,o,u,s)}function MM(e,t){return Xg(8390656,8,e,t)}function KI(e,t){return fE(2048,8,e,t)}function kj(e,t){return fE(4,2,e,t)}function Lj(e,t){return fE(4,4,e,t)}function Mj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Uj(e,t,o){return o=o!=null?o.concat([e]):null,fE(4,4,Mj.bind(null,t,e),o)}function YI(){}function Fj(e,t){var o=$a();t=t===void 0?null:t;var s=o.memoizedState;return s!==null&&t!==null&&WI(t,s[1])?s[0]:(o.memoizedState=[e,t],e)}function Vj(e,t){var o=$a();t=t===void 0?null:t;var s=o.memoizedState;return s!==null&&t!==null&&WI(t,s[1])?s[0]:(e=e(),o.memoizedState=[e,t],e)}function jj(e,t,o){return wu&21?(Es(o,t)||(o=HV(),Ir.lanes|=o,Ou|=o,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Fo=!0),e.memoizedState=o)}function _J(e,t){var o=$n;$n=o!==0&&4>o?o:4,e(!0);var s=jC.transition;jC.transition={};try{e(!1),t()}finally{$n=o,jC.transition=s}}function Bj(){return $a().memoizedState}function SJ(e,t,o){var s=Tl(e);if(o={lane:s,action:o,hasEagerState:!1,eagerState:null,next:null},$j(e))Hj(t,o);else if(o=_j(e,t,o,s),o!==null){var c=vo();gs(o,e,s,c),Wj(o,t,s)}}function yJ(e,t,o){var s=Tl(e),c={lane:s,action:o,hasEagerState:!1,eagerState:null,next:null};if($j(e))Hj(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,f=u(h,o);if(c.hasEagerState=!0,c.eagerState=f,Es(f,h)){var m=t.interleaved;m===null?(c.next=c,VI(t)):(c.next=m.next,m.next=c),t.interleaved=c;return}}catch{}finally{}o=_j(e,t,c,s),o!==null&&(c=vo(),gs(o,e,s,c),Wj(o,t,s))}}function $j(e){var t=e.alternate;return e===Ir||t!==null&&t===Ir}function Hj(e,t){pf=wv=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function Wj(e,t,o){if(o&4194240){var s=t.lanes;s&=e.pendingLanes,o|=s,t.lanes=o,RI(e,o)}}var Ov={readContext:Ba,useCallback:to,useContext:to,useEffect:to,useImperativeHandle:to,useInsertionEffect:to,useLayoutEffect:to,useMemo:to,useReducer:to,useRef:to,useState:to,useDebugValue:to,useDeferredValue:to,useTransition:to,useMutableSource:to,useSyncExternalStore:to,useId:to,unstable_isNewReconciler:!1},CJ={readContext:Ba,useCallback:function(e,t){return Ls().memoizedState=[e,t===void 0?null:t],e},useContext:Ba,useEffect:MM,useImperativeHandle:function(e,t,o){return o=o!=null?o.concat([e]):null,Xg(4194308,4,Mj.bind(null,t,e),o)},useLayoutEffect:function(e,t){return Xg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xg(4,2,e,t)},useMemo:function(e,t){var o=Ls();return t=t===void 0?null:t,e=e(),o.memoizedState=[e,t],e},useReducer:function(e,t,o){var s=Ls();return t=o!==void 0?o(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=SJ.bind(null,Ir,e),[s.memoizedState,e]},useRef:function(e){var t=Ls();return e={current:e},t.memoizedState=e},useState:LM,useDebugValue:YI,useDeferredValue:function(e){return Ls().memoizedState=e},useTransition:function(){var e=LM(!1),t=e[0];return e=_J.bind(null,e[1]),Ls().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,o){var s=Ir,c=Ls();if(Sr){if(o===void 0)throw Error(Fe(407));o=o()}else{if(o=t(),Ii===null)throw Error(Fe(349));wu&30||Oj(s,t,o)}c.memoizedState=o;var u={value:o,getSnapshot:t};return c.queue=u,MM(Nj.bind(null,s,u,e),[e]),s.flags|=2048,Vf(9,Aj.bind(null,s,u,o,t),void 0,null),o},useId:function(){var e=Ls(),t=Ii.identifierPrefix;if(Sr){var o=gc,s=mc;o=(s&~(1<<32-ms(s)-1)).toString(32)+o,t=":"+t+"R"+o,o=Uf++,0<o&&(t+="H"+o.toString(32)),t+=":"}else o=EJ++,t=":"+t+"r"+o.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},TJ={readContext:Ba,useCallback:Fj,useContext:Ba,useEffect:KI,useImperativeHandle:Uj,useInsertionEffect:kj,useLayoutEffect:Lj,useMemo:Vj,useReducer:BC,useRef:Dj,useState:function(){return BC(Ff)},useDebugValue:YI,useDeferredValue:function(e){var t=$a();return jj(t,pi.memoizedState,e)},useTransition:function(){var e=BC(Ff)[0],t=$a().memoizedState;return[e,t]},useMutableSource:Ij,useSyncExternalStore:wj,useId:Bj,unstable_isNewReconciler:!1},bJ={readContext:Ba,useCallback:Fj,useContext:Ba,useEffect:KI,useImperativeHandle:Uj,useInsertionEffect:kj,useLayoutEffect:Lj,useMemo:Vj,useReducer:$C,useRef:Dj,useState:function(){return $C(Ff)},useDebugValue:YI,useDeferredValue:function(e){var t=$a();return pi===null?t.memoizedState=e:jj(t,pi.memoizedState,e)},useTransition:function(){var e=$C(Ff)[0],t=$a().memoizedState;return[e,t]},useMutableSource:Ij,useSyncExternalStore:wj,useId:Bj,unstable_isNewReconciler:!1};function Rh(e,t){try{var o="",s=t;do o+=Qq(s),s=s.return;while(s);var c=o}catch(u){c=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:c,digest:null}}function HC(e,t,o){return{value:e,source:null,stack:o??null,digest:t??null}}function Jb(e,t){try{console.error(t.value)}catch(o){setTimeout(function(){throw o})}}var RJ=typeof WeakMap=="function"?WeakMap:Map;function Gj(e,t,o){o=vc(-1,o),o.tag=3,o.payload={element:null};var s=t.value;return o.callback=function(){Nv||(Nv=!0,sR=s),Jb(e,t)},o}function zj(e,t,o){o=vc(-1,o),o.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var c=t.value;o.payload=function(){return s(c)},o.callback=function(){Jb(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(o.callback=function(){Jb(e,t),typeof s!="function"&&(Cl===null?Cl=new Set([this]):Cl.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),o}function UM(e,t,o){var s=e.pingCache;if(s===null){s=e.pingCache=new RJ;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(o)||(c.add(o),e=VJ.bind(null,e,t,o),t.then(e,e))}function FM(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function VM(e,t,o,s,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(t=vc(-1,1),t.tag=2,yl(o,t,1))),o.lanes|=1),e)}var IJ=Ic.ReactCurrentOwner,Fo=!1;function go(e,t,o,s){t.child=e===null?bj(t,null,o,s):Th(t,e.child,o,s)}function jM(e,t,o,s,c){o=o.render;var u=t.ref;return fh(t,c),s=GI(e,t,o,s,u,c),o=zI(),e!==null&&!Fo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Cc(e,t,c)):(Sr&&o&&DI(t),t.flags|=1,go(e,t,s,c),t.child)}function BM(e,t,o,s,c){if(e===null){var u=o.type;return typeof u=="function"&&!nw(u)&&u.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(t.tag=15,t.type=u,Kj(e,t,u,s,c)):(e=ev(o.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&c)){var h=u.memoizedProps;if(o=o.compare,o=o!==null?o:xf,o(h,s)&&e.ref===t.ref)return Cc(e,t,c)}return t.flags|=1,e=bl(u,s),e.ref=t.ref,e.return=t,t.child=e}function Kj(e,t,o,s,c){if(e!==null){var u=e.memoizedProps;if(xf(u,s)&&e.ref===t.ref)if(Fo=!1,t.pendingProps=s=u,(e.lanes&c)!==0)e.flags&131072&&(Fo=!0);else return t.lanes=e.lanes,Cc(e,t,c)}return Qb(e,t,o,s,c)}function Yj(e,t,o){var s=t.pendingProps,c=s.children,u=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},lr(oh,la),la|=o;else{if(!(o&1073741824))return e=u!==null?u.baseLanes|o:o,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,lr(oh,la),la|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=u!==null?u.baseLanes:o,lr(oh,la),la|=s}else u!==null?(s=u.baseLanes|o,t.memoizedState=null):s=o,lr(oh,la),la|=s;return go(e,t,c,o),t.child}function qj(e,t){var o=t.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(t.flags|=512,t.flags|=2097152)}function Qb(e,t,o,s,c){var u=Bo(o)?Ru:so.current;return u=yh(t,u),fh(t,c),o=GI(e,t,o,s,u,c),s=zI(),e!==null&&!Fo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Cc(e,t,c)):(Sr&&s&&DI(t),t.flags|=1,go(e,t,o,c),t.child)}function $M(e,t,o,s,c){if(Bo(o)){var u=!0;Sv(t)}else u=!1;if(fh(t,c),t.stateNode===null)Jg(e,t),Cj(t,o,s),Xb(t,o,s,c),s=!0;else if(e===null){var h=t.stateNode,f=t.memoizedProps;h.props=f;var m=h.context,v=o.contextType;typeof v=="object"&&v!==null?v=Ba(v):(v=Bo(o)?Ru:so.current,v=yh(t,v));var _=o.getDerivedStateFromProps,y=typeof _=="function"||typeof h.getSnapshotBeforeUpdate=="function";y||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(f!==s||m!==v)&&DM(t,h,s,v),ll=!1;var T=t.memoizedState;h.state=T,Rv(t,s,h,c),m=t.memoizedState,f!==s||T!==m||jo.current||ll?(typeof _=="function"&&(qb(t,o,_,s),m=t.memoizedState),(f=ll||PM(t,o,f,s,T,m,v))?(y||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=m),h.props=s,h.state=m,h.context=v,s=f):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{h=t.stateNode,Sj(e,t),f=t.memoizedProps,v=t.type===t.elementType?f:ss(t.type,f),h.props=v,y=t.pendingProps,T=h.context,m=o.contextType,typeof m=="object"&&m!==null?m=Ba(m):(m=Bo(o)?Ru:so.current,m=yh(t,m));var A=o.getDerivedStateFromProps;(_=typeof A=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(f!==y||T!==m)&&DM(t,h,s,m),ll=!1,T=t.memoizedState,h.state=T,Rv(t,s,h,c);var I=t.memoizedState;f!==y||T!==I||jo.current||ll?(typeof A=="function"&&(qb(t,o,A,s),I=t.memoizedState),(v=ll||PM(t,o,v,s,T,I,m)||!1)?(_||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(s,I,m),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(s,I,m)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||f===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=I),h.props=s,h.state=I,h.context=m,s=v):(typeof h.componentDidUpdate!="function"||f===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),s=!1)}return Zb(e,t,o,s,u,c)}function Zb(e,t,o,s,c,u){qj(e,t);var h=(t.flags&128)!==0;if(!s&&!h)return c&&wM(t,o,!1),Cc(e,t,u);s=t.stateNode,IJ.current=t;var f=h&&typeof o.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&h?(t.child=Th(t,e.child,null,u),t.child=Th(t,null,f,u)):go(e,t,f,u),t.memoizedState=s.state,c&&wM(t,o,!0),t.child}function Xj(e){var t=e.stateNode;t.pendingContext?IM(e,t.pendingContext,t.pendingContext!==t.context):t.context&&IM(e,t.context,!1),BI(e,t.containerInfo)}function HM(e,t,o,s,c){return Ch(),LI(c),t.flags|=256,go(e,t,o,s),t.child}var eR={dehydrated:null,treeContext:null,retryLane:0};function tR(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jj(e,t,o){var s=t.pendingProps,c=Rr.current,u=!1,h=(t.flags&128)!==0,f;if((f=h)||(f=e!==null&&e.memoizedState===null?!1:(c&2)!==0),f?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),lr(Rr,c&1),e===null)return Kb(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(h=s.children,e=s.fallback,u?(s=t.mode,u=t.child,h={mode:"hidden",children:h},!(s&1)&&u!==null?(u.childLanes=0,u.pendingProps=h):u=vE(h,s,0,null),e=yu(e,s,o,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=tR(o),t.memoizedState=eR,e):qI(t,h));if(c=e.memoizedState,c!==null&&(f=c.dehydrated,f!==null))return wJ(e,t,h,s,f,c,o);if(u){u=s.fallback,h=t.mode,c=e.child,f=c.sibling;var m={mode:"hidden",children:s.children};return!(h&1)&&t.child!==c?(s=t.child,s.childLanes=0,s.pendingProps=m,t.deletions=null):(s=bl(c,m),s.subtreeFlags=c.subtreeFlags&14680064),f!==null?u=bl(f,u):(u=yu(u,h,o,null),u.flags|=2),u.return=t,s.return=t,s.sibling=u,t.child=s,s=u,u=t.child,h=e.child.memoizedState,h=h===null?tR(o):{baseLanes:h.baseLanes|o,cachePool:null,transitions:h.transitions},u.memoizedState=h,u.childLanes=e.childLanes&~o,t.memoizedState=eR,s}return u=e.child,e=u.sibling,s=bl(u,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=o),s.return=t,s.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=s,t.memoizedState=null,s}function qI(e,t){return t=vE({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mg(e,t,o,s){return s!==null&&LI(s),Th(t,e.child,null,o),e=qI(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wJ(e,t,o,s,c,u,h){if(o)return t.flags&256?(t.flags&=-257,s=HC(Error(Fe(422))),mg(e,t,h,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=s.fallback,c=t.mode,s=vE({mode:"visible",children:s.children},c,0,null),u=yu(u,c,h,null),u.flags|=2,s.return=t,u.return=t,s.sibling=u,t.child=s,t.mode&1&&Th(t,e.child,null,h),t.child.memoizedState=tR(h),t.memoizedState=eR,u);if(!(t.mode&1))return mg(e,t,h,null);if(c.data==="$!"){if(s=c.nextSibling&&c.nextSibling.dataset,s)var f=s.dgst;return s=f,u=Error(Fe(419)),s=HC(u,s,void 0),mg(e,t,h,s)}if(f=(h&e.childLanes)!==0,Fo||f){if(s=Ii,s!==null){switch(h&-h){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(s.suspendedLanes|h)?0:c,c!==0&&c!==u.retryLane&&(u.retryLane=c,yc(e,c),gs(s,e,c,-1))}return tw(),s=HC(Error(Fe(421))),mg(e,t,h,s)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=jJ.bind(null,e),c._reactRetry=t,null):(e=u.treeContext,ua=Sl(c.nextSibling),ha=t,Sr=!0,ds=null,e!==null&&(Ma[Ua++]=mc,Ma[Ua++]=gc,Ma[Ua++]=Iu,mc=e.id,gc=e.overflow,Iu=t),t=qI(t,s.children),t.flags|=4096,t)}function WM(e,t,o){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Yb(e.return,t,o)}function WC(e,t,o,s,c){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:o,tailMode:c}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=s,u.tail=o,u.tailMode=c)}function Qj(e,t,o){var s=t.pendingProps,c=s.revealOrder,u=s.tail;if(go(e,t,s.children,o),s=Rr.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&WM(e,o,t);else if(e.tag===19)WM(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(lr(Rr,s),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(o=t.child,c=null;o!==null;)e=o.alternate,e!==null&&Iv(e)===null&&(c=o),o=o.sibling;o=c,o===null?(c=t.child,t.child=null):(c=o.sibling,o.sibling=null),WC(t,!1,c,o,u);break;case"backwards":for(o=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Iv(e)===null){t.child=c;break}e=c.sibling,c.sibling=o,o=c,c=e}WC(t,!0,o,null,u);break;case"together":WC(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Cc(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),Ou|=t.lanes,!(o&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Fe(153));if(t.child!==null){for(e=t.child,o=bl(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=bl(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function OJ(e,t,o){switch(t.tag){case 3:Xj(t),Ch();break;case 5:Rj(t);break;case 1:Bo(t.type)&&Sv(t);break;case 4:BI(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,c=t.memoizedProps.value;lr(Tv,s._currentValue),s._currentValue=c;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(lr(Rr,Rr.current&1),t.flags|=128,null):o&t.child.childLanes?Jj(e,t,o):(lr(Rr,Rr.current&1),e=Cc(e,t,o),e!==null?e.sibling:null);lr(Rr,Rr.current&1);break;case 19:if(s=(o&t.childLanes)!==0,e.flags&128){if(s)return Qj(e,t,o);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),lr(Rr,Rr.current),s)break;return null;case 22:case 23:return t.lanes=0,Yj(e,t,o)}return Cc(e,t,o)}var Zj,nR,e3,t3;Zj=function(e,t){for(var o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};nR=function(){};e3=function(e,t,o,s){var c=e.memoizedProps;if(c!==s){e=t.stateNode,gu(js.current);var u=null;switch(o){case"input":c=bb(e,c),s=bb(e,s),u=[];break;case"select":c=wr({},c,{value:void 0}),s=wr({},s,{value:void 0}),u=[];break;case"textarea":c=wb(e,c),s=wb(e,s),u=[];break;default:typeof c.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Ev)}Ab(o,s);var h;o=null;for(v in c)if(!s.hasOwnProperty(v)&&c.hasOwnProperty(v)&&c[v]!=null)if(v==="style"){var f=c[v];for(h in f)f.hasOwnProperty(h)&&(o||(o={}),o[h]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(bf.hasOwnProperty(v)?u||(u=[]):(u=u||[]).push(v,null));for(v in s){var m=s[v];if(f=c!=null?c[v]:void 0,s.hasOwnProperty(v)&&m!==f&&(m!=null||f!=null))if(v==="style")if(f){for(h in f)!f.hasOwnProperty(h)||m&&m.hasOwnProperty(h)||(o||(o={}),o[h]="");for(h in m)m.hasOwnProperty(h)&&f[h]!==m[h]&&(o||(o={}),o[h]=m[h])}else o||(u||(u=[]),u.push(v,o)),o=m;else v==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,f=f?f.__html:void 0,m!=null&&f!==m&&(u=u||[]).push(v,m)):v==="children"?typeof m!="string"&&typeof m!="number"||(u=u||[]).push(v,""+m):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(bf.hasOwnProperty(v)?(m!=null&&v==="onScroll"&&mr("scroll",e),u||f===m||(u=[])):(u=u||[]).push(v,m))}o&&(u=u||[]).push("style",o);var v=u;(t.updateQueue=v)&&(t.flags|=4)}};t3=function(e,t,o,s){o!==s&&(t.flags|=4)};function Hp(e,t){if(!Sr)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function no(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,s=0;if(t)for(var c=e.child;c!==null;)o|=c.lanes|c.childLanes,s|=c.subtreeFlags&14680064,s|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)o|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=o,t}function AJ(e,t,o){var s=t.pendingProps;switch(kI(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return no(t),null;case 1:return Bo(t.type)&&_v(),no(t),null;case 3:return s=t.stateNode,bh(),gr(jo),gr(so),HI(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(pg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ds!==null&&(uR(ds),ds=null))),nR(e,t),no(t),null;case 5:$I(t);var c=gu(Mf.current);if(o=t.type,e!==null&&t.stateNode!=null)e3(e,t,o,s,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Fe(166));return no(t),null}if(e=gu(js.current),pg(t)){s=t.stateNode,o=t.type;var u=t.memoizedProps;switch(s[Fs]=t,s[kf]=u,e=(t.mode&1)!==0,o){case"dialog":mr("cancel",s),mr("close",s);break;case"iframe":case"object":case"embed":mr("load",s);break;case"video":case"audio":for(c=0;c<of.length;c++)mr(of[c],s);break;case"source":mr("error",s);break;case"img":case"image":case"link":mr("error",s),mr("load",s);break;case"details":mr("toggle",s);break;case"input":Z2(s,u),mr("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!u.multiple},mr("invalid",s);break;case"textarea":tM(s,u),mr("invalid",s)}Ab(o,u),c=null;for(var h in u)if(u.hasOwnProperty(h)){var f=u[h];h==="children"?typeof f=="string"?s.textContent!==f&&(u.suppressHydrationWarning!==!0&&hg(s.textContent,f,e),c=["children",f]):typeof f=="number"&&s.textContent!==""+f&&(u.suppressHydrationWarning!==!0&&hg(s.textContent,f,e),c=["children",""+f]):bf.hasOwnProperty(h)&&f!=null&&h==="onScroll"&&mr("scroll",s)}switch(o){case"input":ig(s),eM(s,u,!0);break;case"textarea":ig(s),nM(s);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(s.onclick=Ev)}s=c,t.updateQueue=s,s!==null&&(t.flags|=4)}else{h=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=OV(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=h.createElement(o,{is:s.is}):(e=h.createElement(o),o==="select"&&(h=e,s.multiple?h.multiple=!0:s.size&&(h.size=s.size))):e=h.createElementNS(e,o),e[Fs]=t,e[kf]=s,Zj(e,t,!1,!1),t.stateNode=e;e:{switch(h=Nb(o,s),o){case"dialog":mr("cancel",e),mr("close",e),c=s;break;case"iframe":case"object":case"embed":mr("load",e),c=s;break;case"video":case"audio":for(c=0;c<of.length;c++)mr(of[c],e);c=s;break;case"source":mr("error",e),c=s;break;case"img":case"image":case"link":mr("error",e),mr("load",e),c=s;break;case"details":mr("toggle",e),c=s;break;case"input":Z2(e,s),c=bb(e,s),mr("invalid",e);break;case"option":c=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},c=wr({},s,{value:void 0}),mr("invalid",e);break;case"textarea":tM(e,s),c=wb(e,s),mr("invalid",e);break;default:c=s}Ab(o,c),f=c;for(u in f)if(f.hasOwnProperty(u)){var m=f[u];u==="style"?xV(e,m):u==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&AV(e,m)):u==="children"?typeof m=="string"?(o!=="textarea"||m!=="")&&Rf(e,m):typeof m=="number"&&Rf(e,""+m):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(bf.hasOwnProperty(u)?m!=null&&u==="onScroll"&&mr("scroll",e):m!=null&&_I(e,u,m,h))}switch(o){case"input":ig(e),eM(e,s,!1);break;case"textarea":ig(e),nM(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Il(s.value));break;case"select":e.multiple=!!s.multiple,u=s.value,u!=null?uh(e,!!s.multiple,u,!1):s.defaultValue!=null&&uh(e,!!s.multiple,s.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Ev)}switch(o){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return no(t),null;case 6:if(e&&t.stateNode!=null)t3(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Fe(166));if(o=gu(Mf.current),gu(js.current),pg(t)){if(s=t.stateNode,o=t.memoizedProps,s[Fs]=t,(u=s.nodeValue!==o)&&(e=ha,e!==null))switch(e.tag){case 3:hg(s.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hg(s.nodeValue,o,(e.mode&1)!==0)}u&&(t.flags|=4)}else s=(o.nodeType===9?o:o.ownerDocument).createTextNode(s),s[Fs]=t,t.stateNode=s}return no(t),null;case 13:if(gr(Rr),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Sr&&ua!==null&&t.mode&1&&!(t.flags&128))Ej(),Ch(),t.flags|=98560,u=!1;else if(u=pg(t),s!==null&&s.dehydrated!==null){if(e===null){if(!u)throw Error(Fe(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(Fe(317));u[Fs]=t}else Ch(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;no(t),u=!1}else ds!==null&&(uR(ds),ds=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=o,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Rr.current&1?fi===0&&(fi=3):tw())),t.updateQueue!==null&&(t.flags|=4),no(t),null);case 4:return bh(),nR(e,t),e===null&&Pf(t.stateNode.containerInfo),no(t),null;case 10:return FI(t.type._context),no(t),null;case 17:return Bo(t.type)&&_v(),no(t),null;case 19:if(gr(Rr),u=t.memoizedState,u===null)return no(t),null;if(s=(t.flags&128)!==0,h=u.rendering,h===null)if(s)Hp(u,!1);else{if(fi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=Iv(e),h!==null){for(t.flags|=128,Hp(u,!1),s=h.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=o,o=t.child;o!==null;)u=o,e=s,u.flags&=14680066,h=u.alternate,h===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=h.childLanes,u.lanes=h.lanes,u.child=h.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=h.memoizedProps,u.memoizedState=h.memoizedState,u.updateQueue=h.updateQueue,u.type=h.type,e=h.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return lr(Rr,Rr.current&1|2),t.child}e=e.sibling}u.tail!==null&&$r()>Ih&&(t.flags|=128,s=!0,Hp(u,!1),t.lanes=4194304)}else{if(!s)if(e=Iv(h),e!==null){if(t.flags|=128,s=!0,o=e.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),Hp(u,!0),u.tail===null&&u.tailMode==="hidden"&&!h.alternate&&!Sr)return no(t),null}else 2*$r()-u.renderingStartTime>Ih&&o!==1073741824&&(t.flags|=128,s=!0,Hp(u,!1),t.lanes=4194304);u.isBackwards?(h.sibling=t.child,t.child=h):(o=u.last,o!==null?o.sibling=h:t.child=h,u.last=h)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=$r(),t.sibling=null,o=Rr.current,lr(Rr,s?o&1|2:o&1),t):(no(t),null);case 22:case 23:return ew(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?la&1073741824&&(no(t),t.subtreeFlags&6&&(t.flags|=8192)):no(t),null;case 24:return null;case 25:return null}throw Error(Fe(156,t.tag))}function NJ(e,t){switch(kI(t),t.tag){case 1:return Bo(t.type)&&_v(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return bh(),gr(jo),gr(so),HI(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $I(t),null;case 13:if(gr(Rr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Fe(340));Ch()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gr(Rr),null;case 4:return bh(),null;case 10:return FI(t.type._context),null;case 22:case 23:return ew(),null;case 24:return null;default:return null}}var gg=!1,oo=!1,xJ=typeof WeakSet=="function"?WeakSet:Set,nt=null;function ih(e,t){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(s){Dr(e,t,s)}else o.current=null}function rR(e,t,o){try{o()}catch(s){Dr(e,t,s)}}var GM=!1;function PJ(e,t){if(jb=mv,e=oj(),PI(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var s=o.getSelection&&o.getSelection();if(s&&s.rangeCount!==0){o=s.anchorNode;var c=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{o.nodeType,u.nodeType}catch{o=null;break e}var h=0,f=-1,m=-1,v=0,_=0,y=e,T=null;t:for(;;){for(var A;y!==o||c!==0&&y.nodeType!==3||(f=h+c),y!==u||s!==0&&y.nodeType!==3||(m=h+s),y.nodeType===3&&(h+=y.nodeValue.length),(A=y.firstChild)!==null;)T=y,y=A;for(;;){if(y===e)break t;if(T===o&&++v===c&&(f=h),T===u&&++_===s&&(m=h),(A=y.nextSibling)!==null)break;y=T,T=y.parentNode}y=A}o=f===-1||m===-1?null:{start:f,end:m}}else o=null}o=o||{start:0,end:0}}else o=null;for(Bb={focusedElem:e,selectionRange:o},mv=!1,nt=t;nt!==null;)if(t=nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nt=e;else for(;nt!==null;){t=nt;try{var I=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var O=I.memoizedProps,L=I.memoizedState,x=t.stateNode,N=x.getSnapshotBeforeUpdate(t.elementType===t.type?O:ss(t.type,O),L);x.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var D=t.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(U){Dr(t,t.return,U)}if(e=t.sibling,e!==null){e.return=t.return,nt=e;break}nt=t.return}return I=GM,GM=!1,I}function ff(e,t,o){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&e)===e){var u=c.destroy;c.destroy=void 0,u!==void 0&&rR(t,o,u)}c=c.next}while(c!==s)}}function mE(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var o=t=t.next;do{if((o.tag&e)===e){var s=o.create;o.destroy=s()}o=o.next}while(o!==t)}}function iR(e){var t=e.ref;if(t!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof t=="function"?t(e):t.current=e}}function n3(e){var t=e.alternate;t!==null&&(e.alternate=null,n3(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Fs],delete t[kf],delete t[Wb],delete t[fJ],delete t[mJ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function r3(e){return e.tag===5||e.tag===3||e.tag===4}function zM(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||r3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function oR(e,t,o){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?o.nodeType===8?o.parentNode.insertBefore(e,t):o.insertBefore(e,t):(o.nodeType===8?(t=o.parentNode,t.insertBefore(e,o)):(t=o,t.appendChild(e)),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=Ev));else if(s!==4&&(e=e.child,e!==null))for(oR(e,t,o),e=e.sibling;e!==null;)oR(e,t,o),e=e.sibling}function aR(e,t,o){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(aR(e,t,o),e=e.sibling;e!==null;)aR(e,t,o),e=e.sibling}var Mi=null,cs=!1;function ol(e,t,o){for(o=o.child;o!==null;)i3(e,t,o),o=o.sibling}function i3(e,t,o){if(Vs&&typeof Vs.onCommitFiberUnmount=="function")try{Vs.onCommitFiberUnmount(sE,o)}catch{}switch(o.tag){case 5:oo||ih(o,t);case 6:var s=Mi,c=cs;Mi=null,ol(e,t,o),Mi=s,cs=c,Mi!==null&&(cs?(e=Mi,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):Mi.removeChild(o.stateNode));break;case 18:Mi!==null&&(cs?(e=Mi,o=o.stateNode,e.nodeType===8?UC(e.parentNode,o):e.nodeType===1&&UC(e,o),Af(e)):UC(Mi,o.stateNode));break;case 4:s=Mi,c=cs,Mi=o.stateNode.containerInfo,cs=!0,ol(e,t,o),Mi=s,cs=c;break;case 0:case 11:case 14:case 15:if(!oo&&(s=o.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){c=s=s.next;do{var u=c,h=u.destroy;u=u.tag,h!==void 0&&(u&2||u&4)&&rR(o,t,h),c=c.next}while(c!==s)}ol(e,t,o);break;case 1:if(!oo&&(ih(o,t),s=o.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=o.memoizedProps,s.state=o.memoizedState,s.componentWillUnmount()}catch(f){Dr(o,t,f)}ol(e,t,o);break;case 21:ol(e,t,o);break;case 22:o.mode&1?(oo=(s=oo)||o.memoizedState!==null,ol(e,t,o),oo=s):ol(e,t,o);break;default:ol(e,t,o)}}function KM(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new xJ),t.forEach(function(s){var c=BJ.bind(null,e,s);o.has(s)||(o.add(s),s.then(c,c))})}}function os(e,t){var o=t.deletions;if(o!==null)for(var s=0;s<o.length;s++){var c=o[s];try{var u=e,h=t,f=h;e:for(;f!==null;){switch(f.tag){case 5:Mi=f.stateNode,cs=!1;break e;case 3:Mi=f.stateNode.containerInfo,cs=!0;break e;case 4:Mi=f.stateNode.containerInfo,cs=!0;break e}f=f.return}if(Mi===null)throw Error(Fe(160));i3(u,h,c),Mi=null,cs=!1;var m=c.alternate;m!==null&&(m.return=null),c.return=null}catch(v){Dr(c,t,v)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)o3(t,e),t=t.sibling}function o3(e,t){var o=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(os(t,e),ks(e),s&4){try{ff(3,e,e.return),mE(3,e)}catch(O){Dr(e,e.return,O)}try{ff(5,e,e.return)}catch(O){Dr(e,e.return,O)}}break;case 1:os(t,e),ks(e),s&512&&o!==null&&ih(o,o.return);break;case 5:if(os(t,e),ks(e),s&512&&o!==null&&ih(o,o.return),e.flags&32){var c=e.stateNode;try{Rf(c,"")}catch(O){Dr(e,e.return,O)}}if(s&4&&(c=e.stateNode,c!=null)){var u=e.memoizedProps,h=o!==null?o.memoizedProps:u,f=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{f==="input"&&u.type==="radio"&&u.name!=null&&IV(c,u),Nb(f,h);var v=Nb(f,u);for(h=0;h<m.length;h+=2){var _=m[h],y=m[h+1];_==="style"?xV(c,y):_==="dangerouslySetInnerHTML"?AV(c,y):_==="children"?Rf(c,y):_I(c,_,y,v)}switch(f){case"input":Rb(c,u);break;case"textarea":wV(c,u);break;case"select":var T=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!u.multiple;var A=u.value;A!=null?uh(c,!!u.multiple,A,!1):T!==!!u.multiple&&(u.defaultValue!=null?uh(c,!!u.multiple,u.defaultValue,!0):uh(c,!!u.multiple,u.multiple?[]:"",!1))}c[kf]=u}catch(O){Dr(e,e.return,O)}}break;case 6:if(os(t,e),ks(e),s&4){if(e.stateNode===null)throw Error(Fe(162));c=e.stateNode,u=e.memoizedProps;try{c.nodeValue=u}catch(O){Dr(e,e.return,O)}}break;case 3:if(os(t,e),ks(e),s&4&&o!==null&&o.memoizedState.isDehydrated)try{Af(t.containerInfo)}catch(O){Dr(e,e.return,O)}break;case 4:os(t,e),ks(e);break;case 13:os(t,e),ks(e),c=e.child,c.flags&8192&&(u=c.memoizedState!==null,c.stateNode.isHidden=u,!u||c.alternate!==null&&c.alternate.memoizedState!==null||(QI=$r())),s&4&&KM(e);break;case 22:if(_=o!==null&&o.memoizedState!==null,e.mode&1?(oo=(v=oo)||_,os(t,e),oo=v):os(t,e),ks(e),s&8192){if(v=e.memoizedState!==null,(e.stateNode.isHidden=v)&&!_&&e.mode&1)for(nt=e,_=e.child;_!==null;){for(y=nt=_;nt!==null;){switch(T=nt,A=T.child,T.tag){case 0:case 11:case 14:case 15:ff(4,T,T.return);break;case 1:ih(T,T.return);var I=T.stateNode;if(typeof I.componentWillUnmount=="function"){s=T,o=T.return;try{t=s,I.props=t.memoizedProps,I.state=t.memoizedState,I.componentWillUnmount()}catch(O){Dr(s,o,O)}}break;case 5:ih(T,T.return);break;case 22:if(T.memoizedState!==null){qM(y);continue}}A!==null?(A.return=T,nt=A):qM(y)}_=_.sibling}e:for(_=null,y=e;;){if(y.tag===5){if(_===null){_=y;try{c=y.stateNode,v?(u=c.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(f=y.stateNode,m=y.memoizedProps.style,h=m!=null&&m.hasOwnProperty("display")?m.display:null,f.style.display=NV("display",h))}catch(O){Dr(e,e.return,O)}}}else if(y.tag===6){if(_===null)try{y.stateNode.nodeValue=v?"":y.memoizedProps}catch(O){Dr(e,e.return,O)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;_===y&&(_=null),y=y.return}_===y&&(_=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:os(t,e),ks(e),s&4&&KM(e);break;case 21:break;default:os(t,e),ks(e)}}function ks(e){var t=e.flags;if(t&2){try{e:{for(var o=e.return;o!==null;){if(r3(o)){var s=o;break e}o=o.return}throw Error(Fe(160))}switch(s.tag){case 5:var c=s.stateNode;s.flags&32&&(Rf(c,""),s.flags&=-33);var u=zM(e);aR(e,u,c);break;case 3:case 4:var h=s.stateNode.containerInfo,f=zM(e);oR(e,f,h);break;default:throw Error(Fe(161))}}catch(m){Dr(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function DJ(e,t,o){nt=e,a3(e)}function a3(e,t,o){for(var s=(e.mode&1)!==0;nt!==null;){var c=nt,u=c.child;if(c.tag===22&&s){var h=c.memoizedState!==null||gg;if(!h){var f=c.alternate,m=f!==null&&f.memoizedState!==null||oo;f=gg;var v=oo;if(gg=h,(oo=m)&&!v)for(nt=c;nt!==null;)h=nt,m=h.child,h.tag===22&&h.memoizedState!==null?XM(c):m!==null?(m.return=h,nt=m):XM(c);for(;u!==null;)nt=u,a3(u),u=u.sibling;nt=c,gg=f,oo=v}YM(e)}else c.subtreeFlags&8772&&u!==null?(u.return=c,nt=u):YM(e)}}function YM(e){for(;nt!==null;){var t=nt;if(t.flags&8772){var o=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:oo||mE(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!oo)if(o===null)s.componentDidMount();else{var c=t.elementType===t.type?o.memoizedProps:ss(t.type,o.memoizedProps);s.componentDidUpdate(c,o.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&xM(t,u,s);break;case 3:var h=t.updateQueue;if(h!==null){if(o=null,t.child!==null)switch(t.child.tag){case 5:o=t.child.stateNode;break;case 1:o=t.child.stateNode}xM(t,h,o)}break;case 5:var f=t.stateNode;if(o===null&&t.flags&4){o=f;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&o.focus();break;case"img":m.src&&(o.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var v=t.alternate;if(v!==null){var _=v.memoizedState;if(_!==null){var y=_.dehydrated;y!==null&&Af(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}oo||t.flags&512&&iR(t)}catch(T){Dr(t,t.return,T)}}if(t===e){nt=null;break}if(o=t.sibling,o!==null){o.return=t.return,nt=o;break}nt=t.return}}function qM(e){for(;nt!==null;){var t=nt;if(t===e){nt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,nt=o;break}nt=t.return}}function XM(e){for(;nt!==null;){var t=nt;try{switch(t.tag){case 0:case 11:case 15:var o=t.return;try{mE(4,t)}catch(m){Dr(t,o,m)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var c=t.return;try{s.componentDidMount()}catch(m){Dr(t,c,m)}}var u=t.return;try{iR(t)}catch(m){Dr(t,u,m)}break;case 5:var h=t.return;try{iR(t)}catch(m){Dr(t,h,m)}}}catch(m){Dr(t,t.return,m)}if(t===e){nt=null;break}var f=t.sibling;if(f!==null){f.return=t.return,nt=f;break}nt=t.return}}var kJ=Math.ceil,Av=Ic.ReactCurrentDispatcher,XI=Ic.ReactCurrentOwner,Va=Ic.ReactCurrentBatchConfig,yn=0,Ii=null,ii=null,ji=0,la=0,oh=xl(0),fi=0,jf=null,Ou=0,gE=0,JI=0,mf=null,Uo=null,QI=0,Ih=1/0,hc=null,Nv=!1,sR=null,Cl=null,vg=!1,pl=null,xv=0,gf=0,cR=null,Qg=-1,Zg=0;function vo(){return yn&6?$r():Qg!==-1?Qg:Qg=$r()}function Tl(e){return e.mode&1?yn&2&&ji!==0?ji&-ji:vJ.transition!==null?(Zg===0&&(Zg=HV()),Zg):(e=$n,e!==0||(e=window.event,e=e===void 0?16:XV(e.type)),e):1}function gs(e,t,o,s){if(50<gf)throw gf=0,cR=null,Error(Fe(185));Zf(e,o,s),(!(yn&2)||e!==Ii)&&(e===Ii&&(!(yn&2)&&(gE|=o),fi===4&&dl(e,ji)),$o(e,s),o===1&&yn===0&&!(t.mode&1)&&(Ih=$r()+500,hE&&Pl()))}function $o(e,t){var o=e.callbackNode;vX(e,t);var s=fv(e,e===Ii?ji:0);if(s===0)o!==null&&oM(o),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(o!=null&&oM(o),t===1)e.tag===0?gJ(JM.bind(null,e)):mj(JM.bind(null,e)),hJ(function(){!(yn&6)&&Pl()}),o=null;else{switch(WV(s)){case 1:o=bI;break;case 4:o=BV;break;case 16:o=pv;break;case 536870912:o=$V;break;default:o=pv}o=f3(o,s3.bind(null,e))}e.callbackPriority=t,e.callbackNode=o}}function s3(e,t){if(Qg=-1,Zg=0,yn&6)throw Error(Fe(327));var o=e.callbackNode;if(mh()&&e.callbackNode!==o)return null;var s=fv(e,e===Ii?ji:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Pv(e,s);else{t=s;var c=yn;yn|=2;var u=l3();(Ii!==e||ji!==t)&&(hc=null,Ih=$r()+500,Su(e,t));do try{UJ();break}catch(f){c3(e,f)}while(1);UI(),Av.current=u,yn=c,ii!==null?t=0:(Ii=null,ji=0,t=fi)}if(t!==0){if(t===2&&(c=Lb(e),c!==0&&(s=c,t=lR(e,c))),t===1)throw o=jf,Su(e,0),dl(e,s),$o(e,$r()),o;if(t===6)dl(e,s);else{if(c=e.current.alternate,!(s&30)&&!LJ(c)&&(t=Pv(e,s),t===2&&(u=Lb(e),u!==0&&(s=u,t=lR(e,u))),t===1))throw o=jf,Su(e,0),dl(e,s),$o(e,$r()),o;switch(e.finishedWork=c,e.finishedLanes=s,t){case 0:case 1:throw Error(Fe(345));case 2:uu(e,Uo,hc);break;case 3:if(dl(e,s),(s&130023424)===s&&(t=QI+500-$r(),10<t)){if(fv(e,0)!==0)break;if(c=e.suspendedLanes,(c&s)!==s){vo(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Hb(uu.bind(null,e,Uo,hc),t);break}uu(e,Uo,hc);break;case 4:if(dl(e,s),(s&4194240)===s)break;for(t=e.eventTimes,c=-1;0<s;){var h=31-ms(s);u=1<<h,h=t[h],h>c&&(c=h),s&=~u}if(s=c,s=$r()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*kJ(s/1960))-s,10<s){e.timeoutHandle=Hb(uu.bind(null,e,Uo,hc),s);break}uu(e,Uo,hc);break;case 5:uu(e,Uo,hc);break;default:throw Error(Fe(329))}}}return $o(e,$r()),e.callbackNode===o?s3.bind(null,e):null}function lR(e,t){var o=mf;return e.current.memoizedState.isDehydrated&&(Su(e,t).flags|=256),e=Pv(e,t),e!==2&&(t=Uo,Uo=o,t!==null&&uR(t)),e}function uR(e){Uo===null?Uo=e:Uo.push.apply(Uo,e)}function LJ(e){for(var t=e;;){if(t.flags&16384){var o=t.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var s=0;s<o.length;s++){var c=o[s],u=c.getSnapshot;c=c.value;try{if(!Es(u(),c))return!1}catch{return!1}}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function dl(e,t){for(t&=~JI,t&=~gE,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var o=31-ms(t),s=1<<o;e[o]=-1,t&=~s}}function JM(e){if(yn&6)throw Error(Fe(327));mh();var t=fv(e,0);if(!(t&1))return $o(e,$r()),null;var o=Pv(e,t);if(e.tag!==0&&o===2){var s=Lb(e);s!==0&&(t=s,o=lR(e,s))}if(o===1)throw o=jf,Su(e,0),dl(e,t),$o(e,$r()),o;if(o===6)throw Error(Fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,uu(e,Uo,hc),$o(e,$r()),null}function ZI(e,t){var o=yn;yn|=1;try{return e(t)}finally{yn=o,yn===0&&(Ih=$r()+500,hE&&Pl())}}function Au(e){pl!==null&&pl.tag===0&&!(yn&6)&&mh();var t=yn;yn|=1;var o=Va.transition,s=$n;try{if(Va.transition=null,$n=1,e)return e()}finally{$n=s,Va.transition=o,yn=t,!(yn&6)&&Pl()}}function ew(){la=oh.current,gr(oh)}function Su(e,t){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,dJ(o)),ii!==null)for(o=ii.return;o!==null;){var s=o;switch(kI(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&_v();break;case 3:bh(),gr(jo),gr(so),HI();break;case 5:$I(s);break;case 4:bh();break;case 13:gr(Rr);break;case 19:gr(Rr);break;case 10:FI(s.type._context);break;case 22:case 23:ew()}o=o.return}if(Ii=e,ii=e=bl(e.current,null),ji=la=t,fi=0,jf=null,JI=gE=Ou=0,Uo=mf=null,mu!==null){for(t=0;t<mu.length;t++)if(o=mu[t],s=o.interleaved,s!==null){o.interleaved=null;var c=s.next,u=o.pending;if(u!==null){var h=u.next;u.next=c,s.next=h}o.pending=s}mu=null}return e}function c3(e,t){do{var o=ii;try{if(UI(),qg.current=Ov,wv){for(var s=Ir.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}wv=!1}if(wu=0,Ri=pi=Ir=null,pf=!1,Uf=0,XI.current=null,o===null||o.return===null){fi=1,jf=t,ii=null;break}e:{var u=e,h=o.return,f=o,m=t;if(t=ji,f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var v=m,_=f,y=_.tag;if(!(_.mode&1)&&(y===0||y===11||y===15)){var T=_.alternate;T?(_.updateQueue=T.updateQueue,_.memoizedState=T.memoizedState,_.lanes=T.lanes):(_.updateQueue=null,_.memoizedState=null)}var A=FM(h);if(A!==null){A.flags&=-257,VM(A,h,f,u,t),A.mode&1&&UM(u,v,t),t=A,m=v;var I=t.updateQueue;if(I===null){var O=new Set;O.add(m),t.updateQueue=O}else I.add(m);break e}else{if(!(t&1)){UM(u,v,t),tw();break e}m=Error(Fe(426))}}else if(Sr&&f.mode&1){var L=FM(h);if(L!==null){!(L.flags&65536)&&(L.flags|=256),VM(L,h,f,u,t),LI(Rh(m,f));break e}}u=m=Rh(m,f),fi!==4&&(fi=2),mf===null?mf=[u]:mf.push(u),u=h;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var x=Gj(u,m,t);NM(u,x);break e;case 1:f=m;var N=u.type,D=u.stateNode;if(!(u.flags&128)&&(typeof N.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Cl===null||!Cl.has(D)))){u.flags|=65536,t&=-t,u.lanes|=t;var U=zj(u,f,t);NM(u,U);break e}}u=u.return}while(u!==null)}d3(o)}catch(V){t=V,ii===o&&o!==null&&(ii=o=o.return);continue}break}while(1)}function l3(){var e=Av.current;return Av.current=Ov,e===null?Ov:e}function tw(){(fi===0||fi===3||fi===2)&&(fi=4),Ii===null||!(Ou&268435455)&&!(gE&268435455)||dl(Ii,ji)}function Pv(e,t){var o=yn;yn|=2;var s=l3();(Ii!==e||ji!==t)&&(hc=null,Su(e,t));do try{MJ();break}catch(c){c3(e,c)}while(1);if(UI(),yn=o,Av.current=s,ii!==null)throw Error(Fe(261));return Ii=null,ji=0,fi}function MJ(){for(;ii!==null;)u3(ii)}function UJ(){for(;ii!==null&&!cX();)u3(ii)}function u3(e){var t=p3(e.alternate,e,la);e.memoizedProps=e.pendingProps,t===null?d3(e):ii=t,XI.current=null}function d3(e){var t=e;do{var o=t.alternate;if(e=t.return,t.flags&32768){if(o=NJ(o,t),o!==null){o.flags&=32767,ii=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{fi=6,ii=null;return}}else if(o=AJ(o,t,la),o!==null){ii=o;return}if(t=t.sibling,t!==null){ii=t;return}ii=t=e}while(t!==null);fi===0&&(fi=5)}function uu(e,t,o){var s=$n,c=Va.transition;try{Va.transition=null,$n=1,FJ(e,t,o,s)}finally{Va.transition=c,$n=s}return null}function FJ(e,t,o,s){do mh();while(pl!==null);if(yn&6)throw Error(Fe(327));o=e.finishedWork;var c=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(Fe(177));e.callbackNode=null,e.callbackPriority=0;var u=o.lanes|o.childLanes;if(EX(e,u),e===Ii&&(ii=Ii=null,ji=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||vg||(vg=!0,f3(pv,function(){return mh(),null})),u=(o.flags&15990)!==0,o.subtreeFlags&15990||u){u=Va.transition,Va.transition=null;var h=$n;$n=1;var f=yn;yn|=4,XI.current=null,PJ(e,o),o3(o,e),iJ(Bb),mv=!!jb,Bb=jb=null,e.current=o,DJ(o),lX(),yn=f,$n=h,Va.transition=u}else e.current=o;if(vg&&(vg=!1,pl=e,xv=c),u=e.pendingLanes,u===0&&(Cl=null),hX(o.stateNode),$o(e,$r()),t!==null)for(s=e.onRecoverableError,o=0;o<t.length;o++)c=t[o],s(c.value,{componentStack:c.stack,digest:c.digest});if(Nv)throw Nv=!1,e=sR,sR=null,e;return xv&1&&e.tag!==0&&mh(),u=e.pendingLanes,u&1?e===cR?gf++:(gf=0,cR=e):gf=0,Pl(),null}function mh(){if(pl!==null){var e=WV(xv),t=Va.transition,o=$n;try{if(Va.transition=null,$n=16>e?16:e,pl===null)var s=!1;else{if(e=pl,pl=null,xv=0,yn&6)throw Error(Fe(331));var c=yn;for(yn|=4,nt=e.current;nt!==null;){var u=nt,h=u.child;if(nt.flags&16){var f=u.deletions;if(f!==null){for(var m=0;m<f.length;m++){var v=f[m];for(nt=v;nt!==null;){var _=nt;switch(_.tag){case 0:case 11:case 15:ff(8,_,u)}var y=_.child;if(y!==null)y.return=_,nt=y;else for(;nt!==null;){_=nt;var T=_.sibling,A=_.return;if(n3(_),_===v){nt=null;break}if(T!==null){T.return=A,nt=T;break}nt=A}}}var I=u.alternate;if(I!==null){var O=I.child;if(O!==null){I.child=null;do{var L=O.sibling;O.sibling=null,O=L}while(O!==null)}}nt=u}}if(u.subtreeFlags&2064&&h!==null)h.return=u,nt=h;else e:for(;nt!==null;){if(u=nt,u.flags&2048)switch(u.tag){case 0:case 11:case 15:ff(9,u,u.return)}var x=u.sibling;if(x!==null){x.return=u.return,nt=x;break e}nt=u.return}}var N=e.current;for(nt=N;nt!==null;){h=nt;var D=h.child;if(h.subtreeFlags&2064&&D!==null)D.return=h,nt=D;else e:for(h=N;nt!==null;){if(f=nt,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:mE(9,f)}}catch(V){Dr(f,f.return,V)}if(f===h){nt=null;break e}var U=f.sibling;if(U!==null){U.return=f.return,nt=U;break e}nt=f.return}}if(yn=c,Pl(),Vs&&typeof Vs.onPostCommitFiberRoot=="function")try{Vs.onPostCommitFiberRoot(sE,e)}catch{}s=!0}return s}finally{$n=o,Va.transition=t}}return!1}function QM(e,t,o){t=Rh(o,t),t=Gj(e,t,1),e=yl(e,t,1),t=vo(),e!==null&&(Zf(e,1,t),$o(e,t))}function Dr(e,t,o){if(e.tag===3)QM(e,e,o);else for(;t!==null;){if(t.tag===3){QM(t,e,o);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Cl===null||!Cl.has(s))){e=Rh(o,e),e=zj(t,e,1),t=yl(t,e,1),e=vo(),t!==null&&(Zf(t,1,e),$o(t,e));break}}t=t.return}}function VJ(e,t,o){var s=e.pingCache;s!==null&&s.delete(t),t=vo(),e.pingedLanes|=e.suspendedLanes&o,Ii===e&&(ji&o)===o&&(fi===4||fi===3&&(ji&130023424)===ji&&500>$r()-QI?Su(e,0):JI|=o),$o(e,t)}function h3(e,t){t===0&&(e.mode&1?(t=sg,sg<<=1,!(sg&130023424)&&(sg=4194304)):t=1);var o=vo();e=yc(e,t),e!==null&&(Zf(e,t,o),$o(e,o))}function jJ(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),h3(e,o)}function BJ(e,t){var o=0;switch(e.tag){case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(o=c.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Fe(314))}s!==null&&s.delete(t),h3(e,o)}var p3;p3=function(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps||jo.current)Fo=!0;else{if(!(e.lanes&o)&&!(t.flags&128))return Fo=!1,OJ(e,t,o);Fo=!!(e.flags&131072)}else Fo=!1,Sr&&t.flags&1048576&&gj(t,Cv,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Jg(e,t),e=t.pendingProps;var c=yh(t,so.current);fh(t,o),c=GI(null,t,s,e,c,o);var u=zI();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bo(s)?(u=!0,Sv(t)):u=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,jI(t),c.updater=pE,t.stateNode=c,c._reactInternals=t,Xb(t,s,e,o),t=Zb(null,t,s,!0,u,o)):(t.tag=0,Sr&&u&&DI(t),go(null,t,c,o),t=t.child),t;case 16:s=t.elementType;e:{switch(Jg(e,t),e=t.pendingProps,c=s._init,s=c(s._payload),t.type=s,c=t.tag=HJ(s),e=ss(s,e),c){case 0:t=Qb(null,t,s,e,o);break e;case 1:t=$M(null,t,s,e,o);break e;case 11:t=jM(null,t,s,e,o);break e;case 14:t=BM(null,t,s,ss(s.type,e),o);break e}throw Error(Fe(306,s,""))}return t;case 0:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:ss(s,c),Qb(e,t,s,c,o);case 1:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:ss(s,c),$M(e,t,s,c,o);case 3:e:{if(Xj(t),e===null)throw Error(Fe(387));s=t.pendingProps,u=t.memoizedState,c=u.element,Sj(e,t),Rv(t,s,null,o);var h=t.memoizedState;if(s=h.element,u.isDehydrated)if(u={element:s,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){c=Rh(Error(Fe(423)),t),t=HM(e,t,s,o,c);break e}else if(s!==c){c=Rh(Error(Fe(424)),t),t=HM(e,t,s,o,c);break e}else for(ua=Sl(t.stateNode.containerInfo.firstChild),ha=t,Sr=!0,ds=null,o=bj(t,null,s,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ch(),s===c){t=Cc(e,t,o);break e}go(e,t,s,o)}t=t.child}return t;case 5:return Rj(t),e===null&&Kb(t),s=t.type,c=t.pendingProps,u=e!==null?e.memoizedProps:null,h=c.children,$b(s,c)?h=null:u!==null&&$b(s,u)&&(t.flags|=32),qj(e,t),go(e,t,h,o),t.child;case 6:return e===null&&Kb(t),null;case 13:return Jj(e,t,o);case 4:return BI(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Th(t,null,s,o):go(e,t,s,o),t.child;case 11:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:ss(s,c),jM(e,t,s,c,o);case 7:return go(e,t,t.pendingProps,o),t.child;case 8:return go(e,t,t.pendingProps.children,o),t.child;case 12:return go(e,t,t.pendingProps.children,o),t.child;case 10:e:{if(s=t.type._context,c=t.pendingProps,u=t.memoizedProps,h=c.value,lr(Tv,s._currentValue),s._currentValue=h,u!==null)if(Es(u.value,h)){if(u.children===c.children&&!jo.current){t=Cc(e,t,o);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var f=u.dependencies;if(f!==null){h=u.child;for(var m=f.firstContext;m!==null;){if(m.context===s){if(u.tag===1){m=vc(-1,o&-o),m.tag=2;var v=u.updateQueue;if(v!==null){v=v.shared;var _=v.pending;_===null?m.next=m:(m.next=_.next,_.next=m),v.pending=m}}u.lanes|=o,m=u.alternate,m!==null&&(m.lanes|=o),Yb(u.return,o,t),f.lanes|=o;break}m=m.next}}else if(u.tag===10)h=u.type===t.type?null:u.child;else if(u.tag===18){if(h=u.return,h===null)throw Error(Fe(341));h.lanes|=o,f=h.alternate,f!==null&&(f.lanes|=o),Yb(h,o,t),h=u.sibling}else h=u.child;if(h!==null)h.return=u;else for(h=u;h!==null;){if(h===t){h=null;break}if(u=h.sibling,u!==null){u.return=h.return,h=u;break}h=h.return}u=h}go(e,t,c.children,o),t=t.child}return t;case 9:return c=t.type,s=t.pendingProps.children,fh(t,o),c=Ba(c),s=s(c),t.flags|=1,go(e,t,s,o),t.child;case 14:return s=t.type,c=ss(s,t.pendingProps),c=ss(s.type,c),BM(e,t,s,c,o);case 15:return Kj(e,t,t.type,t.pendingProps,o);case 17:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:ss(s,c),Jg(e,t),t.tag=1,Bo(s)?(e=!0,Sv(t)):e=!1,fh(t,o),Cj(t,s,c),Xb(t,s,c,o),Zb(null,t,s,!0,e,o);case 19:return Qj(e,t,o);case 22:return Yj(e,t,o)}throw Error(Fe(156,t.tag))};function f3(e,t){return jV(e,t)}function $J(e,t,o,s){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fa(e,t,o,s){return new $J(e,t,o,s)}function nw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function HJ(e){if(typeof e=="function")return nw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===yI)return 11;if(e===CI)return 14}return 2}function bl(e,t){var o=e.alternate;return o===null?(o=Fa(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function ev(e,t,o,s,c,u){var h=2;if(s=e,typeof e=="function")nw(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case qd:return yu(o.children,c,u,t);case SI:h=8,c|=8;break;case Sb:return e=Fa(12,o,t,c|2),e.elementType=Sb,e.lanes=u,e;case yb:return e=Fa(13,o,t,c),e.elementType=yb,e.lanes=u,e;case Cb:return e=Fa(19,o,t,c),e.elementType=Cb,e.lanes=u,e;case TV:return vE(o,c,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yV:h=10;break e;case CV:h=9;break e;case yI:h=11;break e;case CI:h=14;break e;case cl:h=16,s=null;break e}throw Error(Fe(130,e==null?e:typeof e,""))}return t=Fa(h,o,t,c),t.elementType=e,t.type=s,t.lanes=u,t}function yu(e,t,o,s){return e=Fa(7,e,s,t),e.lanes=o,e}function vE(e,t,o,s){return e=Fa(22,e,s,t),e.elementType=TV,e.lanes=o,e.stateNode={isHidden:!1},e}function GC(e,t,o){return e=Fa(6,e,null,t),e.lanes=o,e}function zC(e,t,o){return t=Fa(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function WJ(e,t,o,s,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=IC(0),this.expirationTimes=IC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=IC(0),this.identifierPrefix=s,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function rw(e,t,o,s,c,u,h,f,m){return e=new WJ(e,t,o,f,m),t===1?(t=1,u===!0&&(t|=8)):t=0,u=Fa(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:s,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},jI(u),e}function GJ(e,t,o){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yd,key:s==null?null:""+s,children:e,containerInfo:t,implementation:o}}function m3(e){if(!e)return wl;e=e._reactInternals;e:{if(Pu(e)!==e||e.tag!==1)throw Error(Fe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Fe(171))}if(e.tag===1){var o=e.type;if(Bo(o))return fj(e,o,t)}return t}function g3(e,t,o,s,c,u,h,f,m){return e=rw(o,s,!0,e,c,u,h,f,m),e.context=m3(null),o=e.current,s=vo(),c=Tl(o),u=vc(s,c),u.callback=t??null,yl(o,u,c),e.current.lanes=c,Zf(e,c,s),$o(e,s),e}function EE(e,t,o,s){var c=t.current,u=vo(),h=Tl(c);return o=m3(o),t.context===null?t.context=o:t.pendingContext=o,t=vc(u,h),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=yl(c,t,h),e!==null&&(gs(e,c,h,u),Yg(e,c,h)),h}function Dv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ZM(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function iw(e,t){ZM(e,t),(e=e.alternate)&&ZM(e,t)}function zJ(){return null}var v3=typeof reportError=="function"?reportError:function(e){console.error(e)};function ow(e){this._internalRoot=e}_E.prototype.render=ow.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Fe(409));EE(e,t,null,null)};_E.prototype.unmount=ow.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Au(function(){EE(null,e,null,null)}),t[Sc]=null}};function _E(e){this._internalRoot=e}_E.prototype.unstable_scheduleHydration=function(e){if(e){var t=KV();e={blockedOn:null,target:e,priority:t};for(var o=0;o<ul.length&&t!==0&&t<ul[o].priority;o++);ul.splice(o,0,e),o===0&&qV(e)}};function aw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function SE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function eU(){}function KJ(e,t,o,s,c){if(c){if(typeof s=="function"){var u=s;s=function(){var v=Dv(h);u.call(v)}}var h=g3(t,s,e,0,null,!1,!1,"",eU);return e._reactRootContainer=h,e[Sc]=h.current,Pf(e.nodeType===8?e.parentNode:e),Au(),h}for(;c=e.lastChild;)e.removeChild(c);if(typeof s=="function"){var f=s;s=function(){var v=Dv(m);f.call(v)}}var m=rw(e,0,!1,null,null,!1,!1,"",eU);return e._reactRootContainer=m,e[Sc]=m.current,Pf(e.nodeType===8?e.parentNode:e),Au(function(){EE(t,m,o,s)}),m}function yE(e,t,o,s,c){var u=o._reactRootContainer;if(u){var h=u;if(typeof c=="function"){var f=c;c=function(){var m=Dv(h);f.call(m)}}EE(t,h,e,c)}else h=KJ(o,t,e,c,s);return Dv(h)}GV=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var o=rf(t.pendingLanes);o!==0&&(RI(t,o|1),$o(t,$r()),!(yn&6)&&(Ih=$r()+500,Pl()))}break;case 13:Au(function(){var s=yc(e,1);if(s!==null){var c=vo();gs(s,e,1,c)}}),iw(e,1)}};II=function(e){if(e.tag===13){var t=yc(e,134217728);if(t!==null){var o=vo();gs(t,e,134217728,o)}iw(e,134217728)}};zV=function(e){if(e.tag===13){var t=Tl(e),o=yc(e,t);if(o!==null){var s=vo();gs(o,e,t,s)}iw(e,t)}};KV=function(){return $n};YV=function(e,t){var o=$n;try{return $n=e,t()}finally{$n=o}};Pb=function(e,t,o){switch(t){case"input":if(Rb(e,o),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<o.length;t++){var s=o[t];if(s!==e&&s.form===e.form){var c=dE(s);if(!c)throw Error(Fe(90));RV(s),Rb(s,c)}}}break;case"textarea":wV(e,o);break;case"select":t=o.value,t!=null&&uh(e,!!o.multiple,t,!1)}};kV=ZI;LV=Au;var YJ={usingClientEntryPoint:!1,Events:[tm,Zd,dE,PV,DV,ZI]},Wp={findFiberByHostInstance:fu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},qJ={bundleType:Wp.bundleType,version:Wp.version,rendererPackageName:Wp.rendererPackageName,rendererConfig:Wp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ic.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=FV(e),e===null?null:e.stateNode},findFiberByHostInstance:Wp.findFiberByHostInstance||zJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eg.isDisabled&&Eg.supportsFiber)try{sE=Eg.inject(qJ),Vs=Eg}catch{}}Ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YJ;Ea.createPortal=function(e,t){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aw(t))throw Error(Fe(200));return GJ(e,t,null,o)};Ea.createRoot=function(e,t){if(!aw(e))throw Error(Fe(299));var o=!1,s="",c=v3;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=rw(e,1,!1,null,null,o,!1,s,c),e[Sc]=t.current,Pf(e.nodeType===8?e.parentNode:e),new ow(t)};Ea.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Fe(188)):(e=Object.keys(e).join(","),Error(Fe(268,e)));return e=FV(t),e=e===null?null:e.stateNode,e};Ea.flushSync=function(e){return Au(e)};Ea.hydrate=function(e,t,o){if(!SE(t))throw Error(Fe(200));return yE(null,e,t,!0,o)};Ea.hydrateRoot=function(e,t,o){if(!aw(e))throw Error(Fe(405));var s=o!=null&&o.hydratedSources||null,c=!1,u="",h=v3;if(o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onRecoverableError!==void 0&&(h=o.onRecoverableError)),t=g3(t,null,e,1,o??null,c,!1,u,h),e[Sc]=t.current,Pf(e),s)for(e=0;e<s.length;e++)o=s[e],c=o._getVersion,c=c(o._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[o,c]:t.mutableSourceEagerHydrationData.push(o,c);return new _E(t)};Ea.render=function(e,t,o){if(!SE(t))throw Error(Fe(200));return yE(null,e,t,!1,o)};Ea.unmountComponentAtNode=function(e){if(!SE(e))throw Error(Fe(40));return e._reactRootContainer?(Au(function(){yE(null,null,e,!1,function(){e._reactRootContainer=null,e[Sc]=null})}),!0):!1};Ea.unstable_batchedUpdates=ZI;Ea.unstable_renderSubtreeIntoContainer=function(e,t,o,s){if(!SE(o))throw Error(Fe(200));if(e==null||e._reactInternals===void 0)throw Error(Fe(38));return yE(e,t,o,!1,s)};Ea.version="18.2.0-next-9e3b772b8-20220608";function E3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E3)}catch(e){console.error(e)}}E3(),gV.exports=Ea;var Du=gV.exports;const _3=Al(Du),XJ=rV({__proto__:null,default:_3},[Du]);var tU=Du;Eb.createRoot=tU.createRoot,Eb.hydrateRoot=tU.hydrateRoot;/**
 * @remix-run/router v1.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bf(){return Bf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},Bf.apply(this,arguments)}var fl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(fl||(fl={}));const nU="popstate";function JJ(e){e===void 0&&(e={});function t(c,u){let{pathname:h="/",search:f="",hash:m=""}=ku(c.location.hash.substr(1));return dR("",{pathname:h,search:f,hash:m},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function o(c,u){let h=c.document.querySelector("base"),f="";if(h&&h.getAttribute("href")){let m=c.location.href,v=m.indexOf("#");f=v===-1?m:m.slice(0,v)}return f+"#"+(typeof u=="string"?u:S3(u))}function s(c,u){CE(c.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(u)+")")}return ZJ(t,o,s,e)}function mi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function CE(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function QJ(){return Math.random().toString(36).substr(2,8)}function rU(e,t){return{usr:e.state,key:e.key,idx:t}}function dR(e,t,o,s){return o===void 0&&(o=null),Bf({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ku(t):t,{state:o,key:t&&t.key||s||QJ()})}function S3(e){let{pathname:t="/",search:o="",hash:s=""}=e;return o&&o!=="?"&&(t+=o.charAt(0)==="?"?o:"?"+o),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function ku(e){let t={};if(e){let o=e.indexOf("#");o>=0&&(t.hash=e.substr(o),e=e.substr(0,o));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function ZJ(e,t,o,s){s===void 0&&(s={});let{window:c=document.defaultView,v5Compat:u=!1}=s,h=c.history,f=fl.Pop,m=null,v=_();v==null&&(v=0,h.replaceState(Bf({},h.state,{idx:v}),""));function _(){return(h.state||{idx:null}).idx}function y(){f=fl.Pop;let L=_(),x=L==null?null:L-v;v=L,m&&m({action:f,location:O.location,delta:x})}function T(L,x){f=fl.Push;let N=dR(O.location,L,x);o&&o(N,L),v=_()+1;let D=rU(N,v),U=O.createHref(N);try{h.pushState(D,"",U)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;c.location.assign(U)}u&&m&&m({action:f,location:O.location,delta:1})}function A(L,x){f=fl.Replace;let N=dR(O.location,L,x);o&&o(N,L),v=_();let D=rU(N,v),U=O.createHref(N);h.replaceState(D,"",U),u&&m&&m({action:f,location:O.location,delta:0})}function I(L){let x=c.location.origin!=="null"?c.location.origin:c.location.href,N=typeof L=="string"?L:S3(L);return mi(x,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,x)}let O={get action(){return f},get location(){return e(c,h)},listen(L){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(nU,y),m=L,()=>{c.removeEventListener(nU,y),m=null}},createHref(L){return t(c,L)},createURL:I,encodeLocation(L){let x=I(L);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:T,replace:A,go(L){return h.go(L)}};return O}var iU;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(iU||(iU={}));function eQ(e,t,o){o===void 0&&(o="/");let s=typeof t=="string"?ku(t):t,c=T3(s.pathname||"/",o);if(c==null)return null;let u=y3(e);tQ(u);let h=null;for(let f=0;h==null&&f<u.length;++f)h=uQ(u[f],pQ(c));return h}function y3(e,t,o,s){t===void 0&&(t=[]),o===void 0&&(o=[]),s===void 0&&(s="");let c=(u,h,f)=>{let m={relativePath:f===void 0?u.path||"":f,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};m.relativePath.startsWith("/")&&(mi(m.relativePath.startsWith(s),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(s.length));let v=Cu([s,m.relativePath]),_=o.concat(m);u.children&&u.children.length>0&&(mi(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),y3(u.children,t,_,v)),!(u.path==null&&!u.index)&&t.push({path:v,score:cQ(v,u.index),routesMeta:_})};return e.forEach((u,h)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))c(u,h);else for(let m of C3(u.path))c(u,h,m)}),t}function C3(e){let t=e.split("/");if(t.length===0)return[];let[o,...s]=t,c=o.endsWith("?"),u=o.replace(/\?$/,"");if(s.length===0)return c?[u,""]:[u];let h=C3(s.join("/")),f=[];return f.push(...h.map(m=>m===""?u:[u,m].join("/"))),c&&f.push(...h),f.map(m=>e.startsWith("/")&&m===""?"/":m)}function tQ(e){e.sort((t,o)=>t.score!==o.score?o.score-t.score:lQ(t.routesMeta.map(s=>s.childrenIndex),o.routesMeta.map(s=>s.childrenIndex)))}const nQ=/^:\w+$/,rQ=3,iQ=2,oQ=1,aQ=10,sQ=-2,oU=e=>e==="*";function cQ(e,t){let o=e.split("/"),s=o.length;return o.some(oU)&&(s+=sQ),t&&(s+=iQ),o.filter(c=>!oU(c)).reduce((c,u)=>c+(nQ.test(u)?rQ:u===""?oQ:aQ),s)}function lQ(e,t){return e.length===t.length&&e.slice(0,-1).every((s,c)=>s===t[c])?e[e.length-1]-t[t.length-1]:0}function uQ(e,t){let{routesMeta:o}=e,s={},c="/",u=[];for(let h=0;h<o.length;++h){let f=o[h],m=h===o.length-1,v=c==="/"?t:t.slice(c.length)||"/",_=dQ({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},v);if(!_)return null;Object.assign(s,_.params);let y=f.route;u.push({params:s,pathname:Cu([c,_.pathname]),pathnameBase:_Q(Cu([c,_.pathnameBase])),route:y}),_.pathnameBase!=="/"&&(c=Cu([c,_.pathnameBase]))}return u}function dQ(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[o,s]=hQ(e.path,e.caseSensitive,e.end),c=t.match(o);if(!c)return null;let u=c[0],h=u.replace(/(.)\/+$/,"$1"),f=c.slice(1);return{params:s.reduce((v,_,y)=>{if(_==="*"){let T=f[y]||"";h=u.slice(0,u.length-T.length).replace(/(.)\/+$/,"$1")}return v[_]=fQ(f[y]||"",_),v},{}),pathname:u,pathnameBase:h,pattern:e}}function hQ(e,t,o){t===void 0&&(t=!1),o===void 0&&(o=!0),CE(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(h,f)=>(s.push(f),"/([^\\/]+)"));return e.endsWith("*")?(s.push("*"),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),s]}function pQ(e){try{return decodeURI(e)}catch(t){return CE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function fQ(e,t){try{return decodeURIComponent(e)}catch(o){return CE(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+o+").")),e}}function T3(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let o=t.endsWith("/")?t.length-1:t.length,s=e.charAt(o);return s&&s!=="/"?null:e.slice(o)||"/"}function mQ(e,t){t===void 0&&(t="/");let{pathname:o,search:s="",hash:c=""}=typeof e=="string"?ku(e):e;return{pathname:o?o.startsWith("/")?o:gQ(o,t):t,search:SQ(s),hash:yQ(c)}}function gQ(e,t){let o=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?o.length>1&&o.pop():c!=="."&&o.push(c)}),o.length>1?o.join("/"):"/"}function KC(e,t,o,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vQ(e){return e.filter((t,o)=>o===0||t.route.path&&t.route.path.length>0)}function EQ(e,t,o,s){s===void 0&&(s=!1);let c;typeof e=="string"?c=ku(e):(c=Bf({},e),mi(!c.pathname||!c.pathname.includes("?"),KC("?","pathname","search",c)),mi(!c.pathname||!c.pathname.includes("#"),KC("#","pathname","hash",c)),mi(!c.search||!c.search.includes("#"),KC("#","search","hash",c)));let u=e===""||c.pathname==="",h=u?"/":c.pathname,f;if(s||h==null)f=o;else{let y=t.length-1;if(h.startsWith("..")){let T=h.split("/");for(;T[0]==="..";)T.shift(),y-=1;c.pathname=T.join("/")}f=y>=0?t[y]:"/"}let m=mQ(c,f),v=h&&h!=="/"&&h.endsWith("/"),_=(u||h===".")&&o.endsWith("/");return!m.pathname.endsWith("/")&&(v||_)&&(m.pathname+="/"),m}const Cu=e=>e.join("/").replace(/\/\/+/g,"/"),_Q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),SQ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,yQ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function CQ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const b3=["post","put","patch","delete"];new Set(b3);const TQ=["get",...b3];new Set(TQ);/**
 * React Router v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},kv.apply(this,arguments)}const sw=b.createContext(null),bQ=b.createContext(null),TE=b.createContext(null),bE=b.createContext(null),Mh=b.createContext({outlet:null,matches:[],isDataRoute:!1}),R3=b.createContext(null);function RE(){return b.useContext(bE)!=null}function I3(){return RE()||mi(!1),b.useContext(bE).location}function w3(e){b.useContext(TE).static||b.useLayoutEffect(e)}function RQ(){let{isDataRoute:e}=b.useContext(Mh);return e?FQ():IQ()}function IQ(){RE()||mi(!1);let e=b.useContext(sw),{basename:t,navigator:o}=b.useContext(TE),{matches:s}=b.useContext(Mh),{pathname:c}=I3(),u=JSON.stringify(vQ(s).map(m=>m.pathnameBase)),h=b.useRef(!1);return w3(()=>{h.current=!0}),b.useCallback(function(m,v){if(v===void 0&&(v={}),!h.current)return;if(typeof m=="number"){o.go(m);return}let _=EQ(m,JSON.parse(u),c,v.relative==="path");e==null&&t!=="/"&&(_.pathname=_.pathname==="/"?t:Cu([t,_.pathname])),(v.replace?o.replace:o.push)(_,v.state,v)},[t,o,u,c,e])}function wQ(e,t){return OQ(e,t)}function OQ(e,t,o){RE()||mi(!1);let{navigator:s}=b.useContext(TE),{matches:c}=b.useContext(Mh),u=c[c.length-1],h=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=I3(),v;if(t){var _;let O=typeof t=="string"?ku(t):t;f==="/"||(_=O.pathname)!=null&&_.startsWith(f)||mi(!1),v=O}else v=m;let y=v.pathname||"/",T=f==="/"?y:y.slice(f.length)||"/",A=eQ(e,{pathname:T}),I=DQ(A&&A.map(O=>Object.assign({},O,{params:Object.assign({},h,O.params),pathname:Cu([f,s.encodeLocation?s.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?f:Cu([f,s.encodeLocation?s.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),c,o);return t&&I?b.createElement(bE.Provider,{value:{location:kv({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:fl.Pop}},I):I}function AQ(){let e=UQ(),t=CQ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),o=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},u=null;return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),o?b.createElement("pre",{style:c},o):null,u)}const NQ=b.createElement(AQ,null);class xQ extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,o){return o.location!==t.location||o.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||o.error,location:o.location,revalidation:t.revalidation||o.revalidation}}componentDidCatch(t,o){console.error("React Router caught the following error during render",t,o)}render(){return this.state.error?b.createElement(Mh.Provider,{value:this.props.routeContext},b.createElement(R3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function PQ(e){let{routeContext:t,match:o,children:s}=e,c=b.useContext(sw);return c&&c.static&&c.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=o.route.id),b.createElement(Mh.Provider,{value:t},s)}function DQ(e,t,o){var s;if(t===void 0&&(t=[]),o===void 0&&(o=null),e==null){var c;if((c=o)!=null&&c.errors)e=o.matches;else return null}let u=e,h=(s=o)==null?void 0:s.errors;if(h!=null){let f=u.findIndex(m=>m.route.id&&(h==null?void 0:h[m.route.id]));f>=0||mi(!1),u=u.slice(0,Math.min(u.length,f+1))}return u.reduceRight((f,m,v)=>{let _=m.route.id?h==null?void 0:h[m.route.id]:null,y=null;o&&(y=m.route.errorElement||NQ);let T=t.concat(u.slice(0,v+1)),A=()=>{let I;return _?I=y:m.route.Component?I=b.createElement(m.route.Component,null):m.route.element?I=m.route.element:I=f,b.createElement(PQ,{match:m,routeContext:{outlet:f,matches:T,isDataRoute:o!=null},children:I})};return o&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?b.createElement(xQ,{location:o.location,revalidation:o.revalidation,component:y,error:_,children:A(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):A()},null)}var hR;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(hR||(hR={}));var $f;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})($f||($f={}));function kQ(e){let t=b.useContext(sw);return t||mi(!1),t}function LQ(e){let t=b.useContext(bQ);return t||mi(!1),t}function MQ(e){let t=b.useContext(Mh);return t||mi(!1),t}function O3(e){let t=MQ(),o=t.matches[t.matches.length-1];return o.route.id||mi(!1),o.route.id}function UQ(){var e;let t=b.useContext(R3),o=LQ($f.UseRouteError),s=O3($f.UseRouteError);return t||((e=o.errors)==null?void 0:e[s])}function FQ(){let{router:e}=kQ(hR.UseNavigateStable),t=O3($f.UseNavigateStable),o=b.useRef(!1);return w3(()=>{o.current=!0}),b.useCallback(function(c,u){u===void 0&&(u={}),o.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,kv({fromRouteId:t},u)))},[e,t])}function du(e){mi(!1)}function VQ(e){let{basename:t="/",children:o=null,location:s,navigationType:c=fl.Pop,navigator:u,static:h=!1}=e;RE()&&mi(!1);let f=t.replace(/^\/*/,"/"),m=b.useMemo(()=>({basename:f,navigator:u,static:h}),[f,u,h]);typeof s=="string"&&(s=ku(s));let{pathname:v="/",search:_="",hash:y="",state:T=null,key:A="default"}=s,I=b.useMemo(()=>{let O=T3(v,f);return O==null?null:{location:{pathname:O,search:_,hash:y,state:T,key:A},navigationType:c}},[f,v,_,y,T,A,c]);return I==null?null:b.createElement(TE.Provider,{value:m},b.createElement(bE.Provider,{children:o,value:I}))}function jQ(e){let{children:t,location:o}=e;return wQ(pR(t),o)}var aU;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(aU||(aU={}));new Promise(()=>{});function pR(e,t){t===void 0&&(t=[]);let o=[];return b.Children.forEach(e,(s,c)=>{if(!b.isValidElement(s))return;let u=[...t,c];if(s.type===b.Fragment){o.push.apply(o,pR(s.props.children,u));return}s.type!==du&&mi(!1),!s.props.index||!s.props.children||mi(!1);let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=pR(s.props.children,u)),o.push(h)}),o}/**
 * React Router DOM v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const BQ="startTransition",sU=_h[BQ];function $Q(e){let{basename:t,children:o,future:s,window:c}=e,u=b.useRef();u.current==null&&(u.current=JJ({window:c,v5Compat:!0}));let h=u.current,[f,m]=b.useState({action:h.action,location:h.location}),{v7_startTransition:v}=s||{},_=b.useCallback(y=>{v&&sU?sU(()=>m(y)):m(y)},[m,v]);return b.useLayoutEffect(()=>h.listen(_),[h,_]),b.createElement(VQ,{basename:t,children:o,location:f.location,navigationType:f.action,navigator:h})}var cU;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(cU||(cU={}));var lU;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(lU||(lU={}));function Wa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function An(e){"@babel/helpers - typeof";return An=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},An(e)}function HQ(e,t){if(An(e)!=="object"||e===null)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var s=o.call(e,t||"default");if(An(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A3(e){var t=HQ(e,"string");return An(t)==="symbol"?t:String(t)}function uU(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,A3(s.key),s)}}function Ga(e,t,o){return t&&uU(e.prototype,t),o&&uU(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function fR(e,t){return fR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,c){return s.__proto__=c,s},fR(e,t)}function Uh(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fR(e,t)}function Lv(e){return Lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Lv(e)}function WQ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GQ(e,t){if(t&&(An(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mv(e)}function Fh(e){var t=WQ();return function(){var s=Lv(e),c;if(t){var u=Lv(this).constructor;c=Reflect.construct(s,arguments,u)}else c=s.apply(this,arguments);return GQ(this,c)}}var N3={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function o(){for(var s=[],c=0;c<arguments.length;c++){var u=arguments[c];if(u){var h=typeof u;if(h==="string"||h==="number")s.push(u);else if(Array.isArray(u)){if(u.length){var f=o.apply(null,u);f&&s.push(f)}}else if(h==="object"){if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]")){s.push(u.toString());continue}for(var m in u)t.call(u,m)&&u[m]&&s.push(m)}}}return s.join(" ")}e.exports?(o.default=o,e.exports=o):window.classNames=o})()})(N3);var zQ=N3.exports;const ot=Al(zQ);function Ve(){return Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},Ve.apply(this,arguments)}var x3={exports:{}},Hn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oi=typeof Symbol=="function"&&Symbol.for,cw=Oi?Symbol.for("react.element"):60103,lw=Oi?Symbol.for("react.portal"):60106,IE=Oi?Symbol.for("react.fragment"):60107,wE=Oi?Symbol.for("react.strict_mode"):60108,OE=Oi?Symbol.for("react.profiler"):60114,AE=Oi?Symbol.for("react.provider"):60109,NE=Oi?Symbol.for("react.context"):60110,uw=Oi?Symbol.for("react.async_mode"):60111,xE=Oi?Symbol.for("react.concurrent_mode"):60111,PE=Oi?Symbol.for("react.forward_ref"):60112,DE=Oi?Symbol.for("react.suspense"):60113,KQ=Oi?Symbol.for("react.suspense_list"):60120,kE=Oi?Symbol.for("react.memo"):60115,LE=Oi?Symbol.for("react.lazy"):60116,YQ=Oi?Symbol.for("react.block"):60121,qQ=Oi?Symbol.for("react.fundamental"):60117,XQ=Oi?Symbol.for("react.responder"):60118,JQ=Oi?Symbol.for("react.scope"):60119;function Sa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case cw:switch(e=e.type,e){case uw:case xE:case IE:case OE:case wE:case DE:return e;default:switch(e=e&&e.$$typeof,e){case NE:case PE:case LE:case kE:case AE:return e;default:return t}}case lw:return t}}}function P3(e){return Sa(e)===xE}Hn.AsyncMode=uw;Hn.ConcurrentMode=xE;Hn.ContextConsumer=NE;Hn.ContextProvider=AE;Hn.Element=cw;Hn.ForwardRef=PE;Hn.Fragment=IE;Hn.Lazy=LE;Hn.Memo=kE;Hn.Portal=lw;Hn.Profiler=OE;Hn.StrictMode=wE;Hn.Suspense=DE;Hn.isAsyncMode=function(e){return P3(e)||Sa(e)===uw};Hn.isConcurrentMode=P3;Hn.isContextConsumer=function(e){return Sa(e)===NE};Hn.isContextProvider=function(e){return Sa(e)===AE};Hn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===cw};Hn.isForwardRef=function(e){return Sa(e)===PE};Hn.isFragment=function(e){return Sa(e)===IE};Hn.isLazy=function(e){return Sa(e)===LE};Hn.isMemo=function(e){return Sa(e)===kE};Hn.isPortal=function(e){return Sa(e)===lw};Hn.isProfiler=function(e){return Sa(e)===OE};Hn.isStrictMode=function(e){return Sa(e)===wE};Hn.isSuspense=function(e){return Sa(e)===DE};Hn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===IE||e===xE||e===OE||e===wE||e===DE||e===KQ||typeof e=="object"&&e!==null&&(e.$$typeof===LE||e.$$typeof===kE||e.$$typeof===AE||e.$$typeof===NE||e.$$typeof===PE||e.$$typeof===qQ||e.$$typeof===XQ||e.$$typeof===JQ||e.$$typeof===YQ)};Hn.typeOf=Sa;x3.exports=Hn;var dw=x3.exports;function Ol(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[];return Dt.Children.forEach(e,function(s){s==null&&!t.keepEmpty||(Array.isArray(s)?o=o.concat(Ol(s)):dw.isFragment(s)&&s.props?o=o.concat(Ol(s.props.children,t)):o.push(s))}),o}var mR={},QQ=function(t){};function ZQ(e,t){}function eZ(e,t){}function tZ(){mR={}}function D3(e,t,o){!t&&!mR[o]&&(e(!1,o),mR[o]=!0)}function Eo(e,t){D3(ZQ,e,t)}function nZ(e,t){D3(eZ,e,t)}Eo.preMessage=QQ;Eo.resetWarned=tZ;Eo.noteOnce=nZ;function Qe(e,t,o){return t=A3(t),t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function dU(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),o.push.apply(o,s)}return o}function ge(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?dU(Object(o),!0).forEach(function(s){Qe(e,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):dU(Object(o)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(o,s))})}return e}function ME(e,t,o){var s=b.useRef({});return(!("value"in s.current)||o(s.current.condition,t))&&(s.current.value=e(),s.current.condition=t),s.current.value}function hw(e,t){typeof e=="function"?e(t):An(e)==="object"&&e&&"current"in e&&(e.current=t)}function Lu(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var s=t.filter(function(c){return c});return s.length<=1?s[0]:function(c){t.forEach(function(u){hw(u,c)})}}function pw(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return ME(function(){return Lu.apply(void 0,t)},t,function(s,c){return s.length===c.length&&s.every(function(u,h){return u===c[h]})})}function rm(e){var t,o,s=dw.isMemo(e)?e.type.type:e.type;return!(typeof s=="function"&&!((t=s.prototype)!==null&&t!==void 0&&t.render)||typeof e=="function"&&!((o=e.prototype)!==null&&o!==void 0&&o.render))}function Uv(e){return e instanceof HTMLElement||e instanceof SVGElement}function gR(e){return Uv(e)?e:e instanceof Dt.Component?_3.findDOMNode(e):null}var k3=function(){if(typeof Map<"u")return Map;function e(t,o){var s=-1;return t.some(function(c,u){return c[0]===o?(s=u,!0):!1}),s}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(o){var s=e(this.__entries__,o),c=this.__entries__[s];return c&&c[1]},t.prototype.set=function(o,s){var c=e(this.__entries__,o);~c?this.__entries__[c][1]=s:this.__entries__.push([o,s])},t.prototype.delete=function(o){var s=this.__entries__,c=e(s,o);~c&&s.splice(c,1)},t.prototype.has=function(o){return!!~e(this.__entries__,o)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(o,s){s===void 0&&(s=null);for(var c=0,u=this.__entries__;c<u.length;c++){var h=u[c];o.call(s,h[1],h[0])}},t}()}(),vR=typeof window<"u"&&typeof document<"u"&&window.document===document,Fv=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),rZ=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Fv):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),iZ=2;function oZ(e,t){var o=!1,s=!1,c=0;function u(){o&&(o=!1,e()),s&&f()}function h(){rZ(u)}function f(){var m=Date.now();if(o){if(m-c<iZ)return;s=!0}else o=!0,s=!1,setTimeout(h,t);c=m}return f}var aZ=20,sZ=["top","right","bottom","left","width","height","size","weight"],cZ=typeof MutationObserver<"u",lZ=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=oZ(this.refresh.bind(this),aZ)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var o=this.observers_,s=o.indexOf(t);~s&&o.splice(s,1),!o.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(o){return o.gatherActive(),o.hasActive()});return t.forEach(function(o){return o.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!vR||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),cZ?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!vR||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var o=t.propertyName,s=o===void 0?"":o,c=sZ.some(function(u){return!!~s.indexOf(u)});c&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),L3=function(e,t){for(var o=0,s=Object.keys(t);o<s.length;o++){var c=s[o];Object.defineProperty(e,c,{value:t[c],enumerable:!1,writable:!1,configurable:!0})}return e},wh=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||Fv},M3=UE(0,0,0,0);function Vv(e){return parseFloat(e)||0}function hU(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return t.reduce(function(s,c){var u=e["border-"+c+"-width"];return s+Vv(u)},0)}function uZ(e){for(var t=["top","right","bottom","left"],o={},s=0,c=t;s<c.length;s++){var u=c[s],h=e["padding-"+u];o[u]=Vv(h)}return o}function dZ(e){var t=e.getBBox();return UE(0,0,t.width,t.height)}function hZ(e){var t=e.clientWidth,o=e.clientHeight;if(!t&&!o)return M3;var s=wh(e).getComputedStyle(e),c=uZ(s),u=c.left+c.right,h=c.top+c.bottom,f=Vv(s.width),m=Vv(s.height);if(s.boxSizing==="border-box"&&(Math.round(f+u)!==t&&(f-=hU(s,"left","right")+u),Math.round(m+h)!==o&&(m-=hU(s,"top","bottom")+h)),!fZ(e)){var v=Math.round(f+u)-t,_=Math.round(m+h)-o;Math.abs(v)!==1&&(f-=v),Math.abs(_)!==1&&(m-=_)}return UE(c.left,c.top,f,m)}var pZ=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof wh(e).SVGGraphicsElement}:function(e){return e instanceof wh(e).SVGElement&&typeof e.getBBox=="function"}}();function fZ(e){return e===wh(e).document.documentElement}function mZ(e){return vR?pZ(e)?dZ(e):hZ(e):M3}function gZ(e){var t=e.x,o=e.y,s=e.width,c=e.height,u=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,h=Object.create(u.prototype);return L3(h,{x:t,y:o,width:s,height:c,top:o,right:t+s,bottom:c+o,left:t}),h}function UE(e,t,o,s){return{x:e,y:t,width:o,height:s}}var vZ=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=UE(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=mZ(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),EZ=function(){function e(t,o){var s=gZ(o);L3(this,{target:t,contentRect:s})}return e}(),_Z=function(){function e(t,o,s){if(this.activeObservations_=[],this.observations_=new k3,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=o,this.callbackCtx_=s}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof wh(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(t)||(o.set(t,new vZ(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof wh(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(t)&&(o.delete(t),o.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(o){o.isActive()&&t.activeObservations_.push(o)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,o=this.activeObservations_.map(function(s){return new EZ(s.target,s.broadcastRect())});this.callback_.call(t,o,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),U3=typeof WeakMap<"u"?new WeakMap:new k3,F3=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var o=lZ.getInstance(),s=new _Z(t,o,this);U3.set(this,s)}return e}();["observe","unobserve","disconnect"].forEach(function(e){F3.prototype[e]=function(){var t;return(t=U3.get(this))[e].apply(t,arguments)}});var SZ=function(){return typeof Fv.ResizeObserver<"u"?Fv.ResizeObserver:F3}(),ml=new Map;function yZ(e){e.forEach(function(t){var o,s=t.target;(o=ml.get(s))===null||o===void 0||o.forEach(function(c){return c(s)})})}var V3=new SZ(yZ);function CZ(e,t){ml.has(e)||(ml.set(e,new Set),V3.observe(e)),ml.get(e).add(t)}function TZ(e,t){ml.has(e)&&(ml.get(e).delete(t),ml.get(e).size||(V3.unobserve(e),ml.delete(e)))}var bZ=function(e){Uh(o,e);var t=Fh(o);function o(){return Wa(this,o),t.apply(this,arguments)}return Ga(o,[{key:"render",value:function(){return this.props.children}}]),o}(b.Component),ER=b.createContext(null);function RZ(e){var t=e.children,o=e.onBatchResize,s=b.useRef(0),c=b.useRef([]),u=b.useContext(ER),h=b.useCallback(function(f,m,v){s.current+=1;var _=s.current;c.current.push({size:f,element:m,data:v}),Promise.resolve().then(function(){_===s.current&&(o==null||o(c.current),c.current=[])}),u==null||u(f,m,v)},[o,u]);return b.createElement(ER.Provider,{value:h},t)}function IZ(e,t){var o=e.children,s=e.disabled,c=b.useRef(null),u=b.useRef(null),h=b.useContext(ER),f=typeof o=="function",m=f?o(c):o,v=b.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),_=!f&&b.isValidElement(m)&&rm(m),y=_?m.ref:null,T=b.useMemo(function(){return Lu(y,c)},[y,c]),A=function(){return gR(c.current)||gR(u.current)};b.useImperativeHandle(t,function(){return A()});var I=b.useRef(e);I.current=e;var O=b.useCallback(function(L){var x=I.current,N=x.onResize,D=x.data,U=L.getBoundingClientRect(),V=U.width,j=U.height,B=L.offsetWidth,Y=L.offsetHeight,ee=Math.floor(V),H=Math.floor(j);if(v.current.width!==ee||v.current.height!==H||v.current.offsetWidth!==B||v.current.offsetHeight!==Y){var Z={width:ee,height:H,offsetWidth:B,offsetHeight:Y};v.current=Z;var J=B===Math.round(V)?V:B,X=Y===Math.round(j)?j:Y,ne=ge(ge({},Z),{},{offsetWidth:J,offsetHeight:X});h==null||h(ne,L,D),N&&Promise.resolve().then(function(){N(ne,L)})}},[]);return b.useEffect(function(){var L=A();return L&&!s&&CZ(L,O),function(){return TZ(L,O)}},[c.current,s]),b.createElement(bZ,{ref:u},_?b.cloneElement(m,{ref:T}):m)}var wZ=b.forwardRef(IZ),OZ="rc-observer-key";function AZ(e,t){var o=e.children,s=typeof o=="function"?[o]:Ol(o);return s.map(function(c,u){var h=(c==null?void 0:c.key)||"".concat(OZ,"-").concat(u);return b.createElement(wZ,Ve({},e,{key:h,ref:u===0?t:void 0}),c)})}var Mu=b.forwardRef(AZ);Mu.Collection=RZ;function Hs(e,t){var o=ge({},e);return Array.isArray(t)&&t.forEach(function(s){delete o[s]}),o}function _R(e,t){(t==null||t>e.length)&&(t=e.length);for(var o=0,s=new Array(t);o<t;o++)s[o]=e[o];return s}function NZ(e){if(Array.isArray(e))return _R(e)}function j3(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fw(e,t){if(e){if(typeof e=="string")return _R(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return _R(e,t)}}function xZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dt(e){return NZ(e)||j3(e)||fw(e)||xZ()}var B3=function(t){return+setTimeout(t,16)},$3=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(B3=function(t){return window.requestAnimationFrame(t)},$3=function(t){return window.cancelAnimationFrame(t)});var pU=0,mw=new Map;function H3(e){mw.delete(e)}var _o=function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;pU+=1;var s=pU;function c(u){if(u===0)H3(s),t();else{var h=B3(function(){c(u-1)});mw.set(s,h)}}return c(o),s};_o.cancel=function(e){var t=mw.get(e);return H3(t),$3(t)};function gw(e){for(var t=0,o,s=0,c=e.length;c>=4;++s,c-=4)o=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,t=(o&65535)*1540483477+((o>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function PZ(e,t){if(e==null)return{};var o={},s=Object.keys(e),c,u;for(u=0;u<s.length;u++)c=s[u],!(t.indexOf(c)>=0)&&(o[c]=e[c]);return o}function fn(e,t){if(e==null)return{};var o=PZ(e,t),s,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)s=u[c],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(o[s]=e[s])}return o}function vw(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=new Set;function c(u,h){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,m=s.has(u);if(Eo(!m,"Warning: There may be circular references"),m)return!1;if(u===h)return!0;if(o&&f>1)return!1;s.add(u);var v=f+1;if(Array.isArray(u)){if(!Array.isArray(h)||u.length!==h.length)return!1;for(var _=0;_<u.length;_++)if(!c(u[_],h[_],v))return!1;return!0}if(u&&h&&An(u)==="object"&&An(h)==="object"){var y=Object.keys(u);return y.length!==Object.keys(h).length?!1:y.every(function(T){return c(u[T],h[T],v)})}return!1}return c(e,t)}var DZ=function(){function e(t){Wa(this,e),Qe(this,"instanceId",void 0),Qe(this,"cache",new Map),this.instanceId=t}return Ga(e,[{key:"get",value:function(o){return this.cache.get(o.join("%"))||null}},{key:"update",value:function(o,s){var c=o.join("%"),u=this.cache.get(c),h=s(u);h===null?this.cache.delete(c):this.cache.set(c,h)}}]),e}(),SR="data-token-hash",gh="data-css-hash",ah="__cssinjs_instance__";function kZ(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(gh,"]"))||[],o=document.head.firstChild;Array.from(t).forEach(function(c){c[ah]=c[ah]||e,c[ah]===e&&document.head.insertBefore(c,o)});var s={};Array.from(document.querySelectorAll("style[".concat(gh,"]"))).forEach(function(c){var u=c.getAttribute(gh);if(s[u]){if(c[ah]===e){var h;(h=c.parentNode)===null||h===void 0||h.removeChild(c)}}else s[u]=!0})}return new DZ(e)}var Ew=b.createContext({hashPriority:"low",cache:kZ(),defaultCache:!0});function ga(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function LZ(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var o=t;o;){if(o===e)return!0;o=o.parentNode}return!1}var fU="data-rc-order",MZ="rc-util-key",yR=new Map;function W3(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):MZ}function FE(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function UZ(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function G3(e){return Array.from((yR.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function z3(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ga())return null;var o=t.csp,s=t.prepend,c=document.createElement("style");c.setAttribute(fU,UZ(s)),o!=null&&o.nonce&&(c.nonce=o==null?void 0:o.nonce),c.innerHTML=e;var u=FE(t),h=u.firstChild;if(s){if(s==="queue"){var f=G3(u).filter(function(m){return["prepend","prependQueue"].includes(m.getAttribute(fU))});if(f.length)return u.insertBefore(c,f[f.length-1].nextSibling),c}u.insertBefore(c,h)}else u.appendChild(c);return c}function K3(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=FE(t);return G3(o).find(function(s){return s.getAttribute(W3(t))===e})}function jv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=K3(e,t);if(o){var s=FE(t);s.removeChild(o)}}function FZ(e,t){var o=yR.get(e);if(!o||!LZ(document,o)){var s=z3("",t),c=s.parentNode;yR.set(e,c),e.removeChild(s)}}function Oh(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=FE(o);FZ(s,o);var c=K3(t,o);if(c){var u,h;if((u=o.csp)!==null&&u!==void 0&&u.nonce&&c.nonce!==((h=o.csp)===null||h===void 0?void 0:h.nonce)){var f;c.nonce=(f=o.csp)===null||f===void 0?void 0:f.nonce}return c.innerHTML!==e&&(c.innerHTML=e),c}var m=z3(e,o);return m.setAttribute(W3(o),t),m}function Bv(e){var t="";return Object.keys(e).forEach(function(o){var s=e[o];t+=o,s&&An(s)==="object"?t+=Bv(s):t+=s}),t}function VZ(e,t){return gw("".concat(t,"_").concat(Bv(e)))}var vf="layer-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),Y3="903px";function jZ(e,t){if(ga()){var o;Oh(e,vf);var s=document.createElement("div");s.style.position="fixed",s.style.left="0",s.style.top="0",t==null||t(s),document.body.appendChild(s);var c=getComputedStyle(s).width===Y3;return(o=s.parentNode)===null||o===void 0||o.removeChild(s),jv(vf),c}return!1}var YC=void 0;function BZ(){return YC===void 0&&(YC=jZ("@layer ".concat(vf," { .").concat(vf," { width: ").concat(Y3,"!important; } }"),function(e){e.className=vf})),YC}function q3(e){if(Array.isArray(e))return e}function $Z(e,t){var o=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(o!=null){var s,c,u,h,f=[],m=!0,v=!1;try{if(u=(o=o.call(e)).next,t===0){if(Object(o)!==o)return;m=!1}else for(;!(m=(s=u.call(o)).done)&&(f.push(s.value),f.length!==t);m=!0);}catch(_){v=!0,c=_}finally{try{if(!m&&o.return!=null&&(h=o.return(),Object(h)!==h))return}finally{if(v)throw c}}return f}}function X3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function De(e,t){return q3(e)||$Z(e,t)||fw(e,t)||X3()}var mU=ga()?b.useLayoutEffect:b.useEffect,kr=function(t,o){var s=b.useRef(!0);mU(function(){return t(s.current)},o),mU(function(){return s.current=!1,function(){s.current=!0}},[])},gU=function(t,o){kr(function(s){if(!s)return t()},o)},HZ=ge({},_h),vU=HZ.useInsertionEffect,WZ=function(t,o,s){b.useMemo(t,s),kr(o,s)},GZ=vU?function(e,t,o){return vU(function(){return e(),t()},o)}:WZ;function J3(e,t,o,s,c){var u=b.useContext(Ew),h=u.cache,f=[e].concat(dt(t)),m=f.join("_"),v=function(T){h.update(f,function(A){var I=A||[],O=De(I,2),L=O[0],x=L===void 0?0:L,N=O[1],D=N,U=D||o(),V=[x,U];return T?T(V):V})};b.useMemo(function(){return v()},[m]);var _=h.get(f)[1];return GZ(function(){c==null||c(_)},function(){return v(function(y){var T=De(y,2),A=T[0],I=T[1];return[A+1,I]}),function(){h.update(f,function(y){var T=y||[],A=De(T,2),I=A[0],O=I===void 0?0:I,L=A[1],x=O-1;return x===0?(s==null||s(L,!1),null):[O-1,L]})}},[m]),_}var zZ={},KZ="css",pu=new Map;function YZ(e){pu.set(e,(pu.get(e)||0)+1)}function qZ(e,t){if(typeof document<"u"){var o=document.querySelectorAll("style[".concat(SR,'="').concat(e,'"]'));o.forEach(function(s){if(s[ah]===t){var c;(c=s.parentNode)===null||c===void 0||c.removeChild(s)}})}}function XZ(e,t){pu.set(e,(pu.get(e)||0)-1);var o=Array.from(pu.keys()),s=o.filter(function(c){var u=pu.get(c)||0;return u<=0});s.length<o.length&&s.forEach(function(c){qZ(c,t),pu.delete(c)})}var Q3=function(t,o,s,c){var u=s.getDerivativeToken(t),h=ge(ge({},u),o);return c&&(h=c(h)),h};function JZ(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=b.useContext(Ew),c=s.cache.instanceId,u=o.salt,h=u===void 0?"":u,f=o.override,m=f===void 0?zZ:f,v=o.formatToken,_=b.useMemo(function(){return Object.assign.apply(Object,[{}].concat(dt(t)))},[t]),y=b.useMemo(function(){return Bv(_)},[_]),T=b.useMemo(function(){return Bv(m)},[m]),A=J3("token",[h,e.id,y,T],function(){var I=Q3(_,m,e,v),O=VZ(I,h);I._tokenKey=O,YZ(O);var L="".concat(KZ,"-").concat(gw(O));return I._hashId=L,[I,L]},function(I){XZ(I[0]._tokenKey,c)});return A}var QZ={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Z3="comm",eB="rule",tB="decl",ZZ="@import",eee="@keyframes",tee="@layer",nee=Math.abs,_w=String.fromCharCode;function nB(e){return e.trim()}function tv(e,t,o){return e.replace(t,o)}function ree(e,t){return e.indexOf(t)}function Hf(e,t){return e.charCodeAt(t)|0}function Wf(e,t,o){return e.slice(t,o)}function fc(e){return e.length}function iee(e){return e.length}function _g(e,t){return t.push(e),e}var VE=1,Ah=1,rB=0,Ha=0,ni=0,Vh="";function Sw(e,t,o,s,c,u,h,f){return{value:e,root:t,parent:o,type:s,props:c,children:u,line:VE,column:Ah,length:h,return:"",siblings:f}}function oee(){return ni}function aee(){return ni=Ha>0?Hf(Vh,--Ha):0,Ah--,ni===10&&(Ah=1,VE--),ni}function vs(){return ni=Ha<rB?Hf(Vh,Ha++):0,Ah++,ni===10&&(Ah=1,VE++),ni}function Tu(){return Hf(Vh,Ha)}function nv(){return Ha}function jE(e,t){return Wf(Vh,e,t)}function CR(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function see(e){return VE=Ah=1,rB=fc(Vh=e),Ha=0,[]}function cee(e){return Vh="",e}function qC(e){return nB(jE(Ha-1,TR(e===91?e+2:e===40?e+1:e)))}function lee(e){for(;(ni=Tu())&&ni<33;)vs();return CR(e)>2||CR(ni)>3?"":" "}function uee(e,t){for(;--t&&vs()&&!(ni<48||ni>102||ni>57&&ni<65||ni>70&&ni<97););return jE(e,nv()+(t<6&&Tu()==32&&vs()==32))}function TR(e){for(;vs();)switch(ni){case e:return Ha;case 34:case 39:e!==34&&e!==39&&TR(ni);break;case 40:e===41&&TR(e);break;case 92:vs();break}return Ha}function dee(e,t){for(;vs()&&e+ni!==47+10;)if(e+ni===42+42&&Tu()===47)break;return"/*"+jE(t,Ha-1)+"*"+_w(e===47?e:vs())}function hee(e){for(;!CR(Tu());)vs();return jE(e,Ha)}function pee(e){return cee(rv("",null,null,null,[""],e=see(e),0,[0],e))}function rv(e,t,o,s,c,u,h,f,m){for(var v=0,_=0,y=h,T=0,A=0,I=0,O=1,L=1,x=1,N=0,D="",U=c,V=u,j=s,B=D;L;)switch(I=N,N=vs()){case 40:if(I!=108&&Hf(B,y-1)==58){ree(B+=tv(qC(N),"&","&\f"),"&\f")!=-1&&(x=-1);break}case 34:case 39:case 91:B+=qC(N);break;case 9:case 10:case 13:case 32:B+=lee(I);break;case 92:B+=uee(nv()-1,7);continue;case 47:switch(Tu()){case 42:case 47:_g(fee(dee(vs(),nv()),t,o,m),m);break;default:B+="/"}break;case 123*O:f[v++]=fc(B)*x;case 125*O:case 59:case 0:switch(N){case 0:case 125:L=0;case 59+_:x==-1&&(B=tv(B,/\f/g,"")),A>0&&fc(B)-y&&_g(A>32?_U(B+";",s,o,y-1,m):_U(tv(B," ","")+";",s,o,y-2,m),m);break;case 59:B+=";";default:if(_g(j=EU(B,t,o,v,_,c,f,D,U=[],V=[],y,u),u),N===123)if(_===0)rv(B,t,j,j,U,u,y,f,V);else switch(T===99&&Hf(B,3)===110?100:T){case 100:case 108:case 109:case 115:rv(e,j,j,s&&_g(EU(e,j,j,0,0,c,f,D,c,U=[],y,V),V),c,V,y,f,s?U:V);break;default:rv(B,j,j,j,[""],V,0,f,V)}}v=_=A=0,O=x=1,D=B="",y=h;break;case 58:y=1+fc(B),A=I;default:if(O<1){if(N==123)--O;else if(N==125&&O++==0&&aee()==125)continue}switch(B+=_w(N),N*O){case 38:x=_>0?1:(B+="\f",-1);break;case 44:f[v++]=(fc(B)-1)*x,x=1;break;case 64:Tu()===45&&(B+=qC(vs())),T=Tu(),_=y=fc(D=B+=hee(nv())),N++;break;case 45:I===45&&fc(B)==2&&(O=0)}}return u}function EU(e,t,o,s,c,u,h,f,m,v,_,y){for(var T=c-1,A=c===0?u:[""],I=iee(A),O=0,L=0,x=0;O<s;++O)for(var N=0,D=Wf(e,T+1,T=nee(L=h[O])),U=e;N<I;++N)(U=nB(L>0?A[N]+" "+D:tv(D,/&\f/g,A[N])))&&(m[x++]=U);return Sw(e,t,o,c===0?eB:f,m,v,_,y)}function fee(e,t,o,s){return Sw(e,t,o,Z3,_w(oee()),Wf(e,2,-2),0,s)}function _U(e,t,o,s,c){return Sw(e,t,o,tB,Wf(e,0,s),Wf(e,s+1,-1),s,c)}function bR(e,t){for(var o="",s=0;s<e.length;s++)o+=t(e[s],s,e,t)||"";return o}function mee(e,t,o,s){switch(e.type){case tee:if(e.children.length)break;case ZZ:case tB:return e.return=e.return||e.value;case Z3:return"";case eee:return e.return=e.value+"{"+bR(e.children,s)+"}";case eB:if(!fc(e.value=e.props.join(",")))return""}return fc(o=bR(e.children,s))?e.return=e.value+"{"+o+"}":""}var SU=ga(),gee="_skip_check_",iB="_multi_value_";function yU(e){var t=bR(pee(e),mee);return t.replace(/\{%%%\:[^;];}/g,";")}function vee(e){return An(e)==="object"&&e&&(gee in e||iB in e)}function Eee(e,t,o){if(!t)return e;var s=".".concat(t),c=o==="low"?":where(".concat(s,")"):s,u=e.split(",").map(function(h){var f,m=h.trim().split(/\s+/),v=m[0]||"",_=((f=v.match(/^\w+/))===null||f===void 0?void 0:f[0])||"";return v="".concat(_).concat(c).concat(v.slice(_.length)),[v].concat(dt(m.slice(1))).join(" ")});return u.join(",")}var _ee=function e(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},c=s.root,u=s.injectHash,h=s.parentSelectors,f=o.hashId,m=o.layer;o.path;var v=o.hashPriority,_=o.transformers,y=_===void 0?[]:_;o.linters;var T="",A={};function I(D){var U=D.getName(f);if(!A[U]){var V=e(D.style,o,{root:!1,parentSelectors:h}),j=De(V,1),B=j[0];A[U]="@keyframes ".concat(D.getName(f)).concat(B)}}function O(D){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return D.forEach(function(V){Array.isArray(V)?O(V,U):V&&U.push(V)}),U}var L=O(Array.isArray(t)?t:[t]);if(L.forEach(function(D){var U=typeof D=="string"&&!c?{}:D;if(typeof U=="string")T+="".concat(U,`
`);else if(U._keyframe)I(U);else{var V=y.reduce(function(j,B){var Y;return(B==null||(Y=B.visit)===null||Y===void 0?void 0:Y.call(B,j))||j},U);Object.keys(V).forEach(function(j){var B=V[j];if(An(B)==="object"&&B&&(j!=="animationName"||!B._keyframe)&&!vee(B)){var Y=!1,ee=j.trim(),H=!1;(c||u)&&f?ee.startsWith("@")?Y=!0:ee=Eee(j,f,v):c&&!f&&(ee==="&"||ee==="")&&(ee="",H=!0);var Z=e(B,o,{root:H,injectHash:Y,parentSelectors:[].concat(dt(h),[ee])}),J=De(Z,2),X=J[0],ne=J[1];A=ge(ge({},A),ne),T+="".concat(ee).concat(X)}else{let ue=function(Se,Ee){var le=Se.replace(/[A-Z]/g,function(de){return"-".concat(de.toLowerCase())}),se=Ee;!QZ[Se]&&typeof se=="number"&&se!==0&&(se="".concat(se,"px")),Se==="animationName"&&Ee!==null&&Ee!==void 0&&Ee._keyframe&&(I(Ee),se=Ee.getName(f)),T+="".concat(le,":").concat(se,";")};var pe=ue,ie,ae=(ie=B==null?void 0:B.value)!==null&&ie!==void 0?ie:B;An(B)==="object"&&B!==null&&B!==void 0&&B[iB]&&Array.isArray(ae)?ae.forEach(function(Se){ue(j,Se)}):ue(j,ae)}})}}),!c)T="{".concat(T,"}");else if(m&&BZ()){var x=m.split(","),N=x[x.length-1].trim();T="@layer ".concat(N," {").concat(T,"}"),x.length>1&&(T="@layer ".concat(m,"{%%%:%}").concat(T))}return[T,A]};function See(e,t){return gw("".concat(e.join("%")).concat(t))}function yee(){return null}function RR(e,t){var o=e.token,s=e.path,c=e.hashId,u=e.layer,h=e.nonce,f=b.useContext(Ew),m=f.autoClear;f.mock;var v=f.defaultCache,_=f.hashPriority,y=f.container,T=f.ssrInline,A=f.transformers,I=f.linters,O=f.cache,L=o._tokenKey,x=[L].concat(dt(s)),N=SU,D=J3("style",x,function(){var Y=t(),ee=_ee(Y,{hashId:c,hashPriority:_,layer:u,path:s.join("-"),transformers:A,linters:I}),H=De(ee,2),Z=H[0],J=H[1],X=yU(Z),ne=See(x,X);return[X,L,ne,J]},function(Y,ee){var H=De(Y,3),Z=H[2];(ee||m)&&SU&&jv(Z,{mark:gh})},function(Y){var ee=De(Y,4),H=ee[0];ee[1];var Z=ee[2],J=ee[3];if(N){var X={mark:gh,prepend:"queue",attachTo:y},ne=typeof h=="function"?h():h;ne&&(X.csp={nonce:ne});var ie=Oh(H,Z,X);ie[ah]=O.instanceId,ie.setAttribute(SR,L),Object.keys(J).forEach(function(ae){Oh(yU(J[ae]),"_effect-".concat(ae),X)})}}),U=De(D,3),V=U[0],j=U[1],B=U[2];return function(Y){var ee;if(!T||N||!v)ee=b.createElement(yee,null);else{var H;ee=b.createElement("style",Ve({},(H={},Qe(H,SR,j),Qe(H,gh,B),H),{dangerouslySetInnerHTML:{__html:V}}))}return b.createElement(b.Fragment,null,ee,Y)}}var ai=function(){function e(t,o){Wa(this,e),Qe(this,"name",void 0),Qe(this,"style",void 0),Qe(this,"_keyframe",!0),this.name=t,this.style=o}return Ga(e,[{key:"getName",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return o?"".concat(o,"-").concat(this.name):this.name}}]),e}();function Cee(e,t){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}var yw=function(){function e(){Wa(this,e),Qe(this,"cache",void 0),Qe(this,"keys",void 0),Qe(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Ga(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(o){var s,c,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,h={map:this.cache};return o.forEach(function(f){if(!h)h=void 0;else{var m,v;h=(m=h)===null||m===void 0||(v=m.map)===null||v===void 0?void 0:v.get(f)}}),(s=h)!==null&&s!==void 0&&s.value&&u&&(h.value[1]=this.cacheCallTimes++),(c=h)===null||c===void 0?void 0:c.value}},{key:"get",value:function(o){var s;return(s=this.internalGet(o,!0))===null||s===void 0?void 0:s[0]}},{key:"has",value:function(o){return!!this.internalGet(o)}},{key:"set",value:function(o,s){var c=this;if(!this.has(o)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var u=this.keys.reduce(function(v,_){var y=De(v,2),T=y[1];return c.internalGet(_)[1]<T?[_,c.internalGet(_)[1]]:v},[this.keys[0],this.cacheCallTimes]),h=De(u,1),f=h[0];this.delete(f)}this.keys.push(o)}var m=this.cache;o.forEach(function(v,_){if(_===o.length-1)m.set(v,{value:[s,c.cacheCallTimes++]});else{var y=m.get(v);y?y.map||(y.map=new Map):m.set(v,{map:new Map}),m=m.get(v).map}})}},{key:"deleteByPath",value:function(o,s){var c=o.get(s[0]);if(s.length===1){var u;return c.map?o.set(s[0],{map:c.map}):o.delete(s[0]),(u=c.value)===null||u===void 0?void 0:u[0]}var h=this.deleteByPath(c.map,s.slice(1));return(!c.map||c.map.size===0)&&!c.value&&o.delete(s[0]),h}},{key:"delete",value:function(o){if(this.has(o))return this.keys=this.keys.filter(function(s){return!Cee(s,o)}),this.deleteByPath(this.cache,o)}}]),e}();Qe(yw,"MAX_CACHE_SIZE",20);Qe(yw,"MAX_CACHE_OFFSET",5);var CU=0,Tee=function(){function e(t){Wa(this,e),Qe(this,"derivatives",void 0),Qe(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=CU,t.length===0&&(t.length>0,void 0),CU+=1}return Ga(e,[{key:"getDerivativeToken",value:function(o){return this.derivatives.reduce(function(s,c){return c(o,s)},void 0)}}]),e}(),XC=new yw;function $v(e){var t=Array.isArray(e)?e:[e];return XC.has(t)||XC.set(t,new Tee(t)),XC.get(t)}function Md(e){return e.notSplit=!0,e}Md(["borderTop","borderBottom"]),Md(["borderTop"]),Md(["borderBottom"]),Md(["borderLeft","borderRight"]),Md(["borderLeft"]),Md(["borderRight"]);var bee=b.createContext({});const Cw=bee;function Ree(e){return q3(e)||j3(e)||fw(e)||X3()}function ps(e,t){for(var o=e,s=0;s<t.length;s+=1){if(o==null)return;o=o[t[s]]}return o}function oB(e,t,o,s){if(!t.length)return o;var c=Ree(t),u=c[0],h=c.slice(1),f;return!e&&typeof u=="number"?f=[]:Array.isArray(e)?f=dt(e):f=ge({},e),s&&o===void 0&&h.length===1?delete f[u][h[0]]:f[u]=oB(f[u],h,o,s),f}function ls(e,t,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&s&&o===void 0&&!ps(e,t.slice(0,-1))?e:oB(e,t,o,s)}function Iee(e){return An(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function TU(e){return Array.isArray(e)?[]:{}}var wee=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function sh(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var s=TU(t[0]);return t.forEach(function(c){function u(h,f){var m=new Set(f),v=ps(c,h),_=Array.isArray(v);if(_||Iee(v)){if(!m.has(v)){m.add(v);var y=ps(s,h);_?s=ls(s,h,[]):(!y||An(y)!=="object")&&(s=ls(s,h,TU(v))),wee(v).forEach(function(T){u([].concat(dt(h),[T]),m)})}}else s=ls(s,h,v)}u([])}),s}const Oee=b.createContext(void 0),Aee={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};var Nee={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const xee={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},aB=xee,Pee={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},Nee),timePickerLocale:Object.assign({},aB)},bU=Pee,aa="${label} is not a valid ${type}",Dee={locale:"en",Pagination:Aee,DatePicker:bU,TimePicker:aB,Calendar:bU,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:aa,method:aa,array:aa,object:aa,number:aa,date:aa,boolean:aa,integer:aa,float:aa,regexp:aa,email:aa,url:aa,hex:aa},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}},Gf=Dee;let JC=Object.assign({},Gf.Modal);function RU(e){e?JC=Object.assign(Object.assign({},JC),e):JC=Object.assign({},Gf.Modal)}const kee=b.createContext(void 0),Tw=kee,Lee=(e,t)=>{const o=b.useContext(Tw),s=b.useMemo(()=>{var u;const h=t||Gf[e],f=(u=o==null?void 0:o[e])!==null&&u!==void 0?u:{};return Object.assign(Object.assign({},typeof h=="function"?h():h),f||{})},[e,t,o]),c=b.useMemo(()=>{const u=o==null?void 0:o.locale;return o!=null&&o.exist&&!u?Gf.locale:u},[o]);return[s,c]},Mee=Lee,Uee="internalMark",Fee=e=>{const{locale:t={},children:o,_ANT_MARK__:s}=e;b.useEffect(()=>(RU(t&&t.Modal),()=>{RU()}),[t]);const c=b.useMemo(()=>Object.assign(Object.assign({},t),{exist:!0}),[t]);return b.createElement(Tw.Provider,{value:c},o)},Vee=Fee,jee="5.6.4",Hv=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];function Bi(e,t){Bee(e)&&(e="100%");var o=$ee(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),o&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function Sg(e){return Math.min(1,Math.max(0,e))}function Bee(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function $ee(e){return typeof e=="string"&&e.indexOf("%")!==-1}function sB(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function yg(e){return e<=1?"".concat(Number(e)*100,"%"):e}function vu(e){return e.length===1?"0"+e:String(e)}function Hee(e,t,o){return{r:Bi(e,255)*255,g:Bi(t,255)*255,b:Bi(o,255)*255}}function IU(e,t,o){e=Bi(e,255),t=Bi(t,255),o=Bi(o,255);var s=Math.max(e,t,o),c=Math.min(e,t,o),u=0,h=0,f=(s+c)/2;if(s===c)h=0,u=0;else{var m=s-c;switch(h=f>.5?m/(2-s-c):m/(s+c),s){case e:u=(t-o)/m+(t<o?6:0);break;case t:u=(o-e)/m+2;break;case o:u=(e-t)/m+4;break}u/=6}return{h:u,s:h,l:f}}function QC(e,t,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?e+(t-e)*(6*o):o<1/2?t:o<2/3?e+(t-e)*(2/3-o)*6:e}function Wee(e,t,o){var s,c,u;if(e=Bi(e,360),t=Bi(t,100),o=Bi(o,100),t===0)c=o,u=o,s=o;else{var h=o<.5?o*(1+t):o+t-o*t,f=2*o-h;s=QC(f,h,e+1/3),c=QC(f,h,e),u=QC(f,h,e-1/3)}return{r:s*255,g:c*255,b:u*255}}function IR(e,t,o){e=Bi(e,255),t=Bi(t,255),o=Bi(o,255);var s=Math.max(e,t,o),c=Math.min(e,t,o),u=0,h=s,f=s-c,m=s===0?0:f/s;if(s===c)u=0;else{switch(s){case e:u=(t-o)/f+(t<o?6:0);break;case t:u=(o-e)/f+2;break;case o:u=(e-t)/f+4;break}u/=6}return{h:u,s:m,v:h}}function Gee(e,t,o){e=Bi(e,360)*6,t=Bi(t,100),o=Bi(o,100);var s=Math.floor(e),c=e-s,u=o*(1-t),h=o*(1-c*t),f=o*(1-(1-c)*t),m=s%6,v=[o,h,u,u,f,o][m],_=[f,o,o,h,u,u][m],y=[u,u,f,o,o,h][m];return{r:v*255,g:_*255,b:y*255}}function wR(e,t,o,s){var c=[vu(Math.round(e).toString(16)),vu(Math.round(t).toString(16)),vu(Math.round(o).toString(16))];return s&&c[0].startsWith(c[0].charAt(1))&&c[1].startsWith(c[1].charAt(1))&&c[2].startsWith(c[2].charAt(1))?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0):c.join("")}function zee(e,t,o,s,c){var u=[vu(Math.round(e).toString(16)),vu(Math.round(t).toString(16)),vu(Math.round(o).toString(16)),vu(Kee(s))];return c&&u[0].startsWith(u[0].charAt(1))&&u[1].startsWith(u[1].charAt(1))&&u[2].startsWith(u[2].charAt(1))&&u[3].startsWith(u[3].charAt(1))?u[0].charAt(0)+u[1].charAt(0)+u[2].charAt(0)+u[3].charAt(0):u.join("")}function Kee(e){return Math.round(parseFloat(e)*255).toString(16)}function wU(e){return ca(e)/255}function ca(e){return parseInt(e,16)}function Yee(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var OR={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Kd(e){var t={r:0,g:0,b:0},o=1,s=null,c=null,u=null,h=!1,f=!1;return typeof e=="string"&&(e=Jee(e)),typeof e=="object"&&(uc(e.r)&&uc(e.g)&&uc(e.b)?(t=Hee(e.r,e.g,e.b),h=!0,f=String(e.r).substr(-1)==="%"?"prgb":"rgb"):uc(e.h)&&uc(e.s)&&uc(e.v)?(s=yg(e.s),c=yg(e.v),t=Gee(e.h,s,c),h=!0,f="hsv"):uc(e.h)&&uc(e.s)&&uc(e.l)&&(s=yg(e.s),u=yg(e.l),t=Wee(e.h,s,u),h=!0,f="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(o=e.a)),o=sB(o),{ok:h,format:e.format||f,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:o}}var qee="[-\\+]?\\d+%?",Xee="[-\\+]?\\d*\\.\\d+%?",gl="(?:".concat(Xee,")|(?:").concat(qee,")"),ZC="[\\s|\\(]+(".concat(gl,")[,|\\s]+(").concat(gl,")[,|\\s]+(").concat(gl,")\\s*\\)?"),eT="[\\s|\\(]+(".concat(gl,")[,|\\s]+(").concat(gl,")[,|\\s]+(").concat(gl,")[,|\\s]+(").concat(gl,")\\s*\\)?"),as={CSS_UNIT:new RegExp(gl),rgb:new RegExp("rgb"+ZC),rgba:new RegExp("rgba"+eT),hsl:new RegExp("hsl"+ZC),hsla:new RegExp("hsla"+eT),hsv:new RegExp("hsv"+ZC),hsva:new RegExp("hsva"+eT),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Jee(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(OR[e])e=OR[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var o=as.rgb.exec(e);return o?{r:o[1],g:o[2],b:o[3]}:(o=as.rgba.exec(e),o?{r:o[1],g:o[2],b:o[3],a:o[4]}:(o=as.hsl.exec(e),o?{h:o[1],s:o[2],l:o[3]}:(o=as.hsla.exec(e),o?{h:o[1],s:o[2],l:o[3],a:o[4]}:(o=as.hsv.exec(e),o?{h:o[1],s:o[2],v:o[3]}:(o=as.hsva.exec(e),o?{h:o[1],s:o[2],v:o[3],a:o[4]}:(o=as.hex8.exec(e),o?{r:ca(o[1]),g:ca(o[2]),b:ca(o[3]),a:wU(o[4]),format:t?"name":"hex8"}:(o=as.hex6.exec(e),o?{r:ca(o[1]),g:ca(o[2]),b:ca(o[3]),format:t?"name":"hex"}:(o=as.hex4.exec(e),o?{r:ca(o[1]+o[1]),g:ca(o[2]+o[2]),b:ca(o[3]+o[3]),a:wU(o[4]+o[4]),format:t?"name":"hex8"}:(o=as.hex3.exec(e),o?{r:ca(o[1]+o[1]),g:ca(o[2]+o[2]),b:ca(o[3]+o[3]),format:t?"name":"hex"}:!1)))))))))}function uc(e){return!!as.CSS_UNIT.exec(String(e))}var Vi=function(){function e(t,o){t===void 0&&(t=""),o===void 0&&(o={});var s;if(t instanceof e)return t;typeof t=="number"&&(t=Yee(t)),this.originalInput=t;var c=Kd(t);this.originalInput=t,this.r=c.r,this.g=c.g,this.b=c.b,this.a=c.a,this.roundA=Math.round(100*this.a)/100,this.format=(s=o.format)!==null&&s!==void 0?s:c.format,this.gradientType=o.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=c.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),o,s,c,u=t.r/255,h=t.g/255,f=t.b/255;return u<=.03928?o=u/12.92:o=Math.pow((u+.055)/1.055,2.4),h<=.03928?s=h/12.92:s=Math.pow((h+.055)/1.055,2.4),f<=.03928?c=f/12.92:c=Math.pow((f+.055)/1.055,2.4),.2126*o+.7152*s+.0722*c},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=sB(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=IR(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=IR(this.r,this.g,this.b),o=Math.round(t.h*360),s=Math.round(t.s*100),c=Math.round(t.v*100);return this.a===1?"hsv(".concat(o,", ").concat(s,"%, ").concat(c,"%)"):"hsva(".concat(o,", ").concat(s,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=IU(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=IU(this.r,this.g,this.b),o=Math.round(t.h*360),s=Math.round(t.s*100),c=Math.round(t.l*100);return this.a===1?"hsl(".concat(o,", ").concat(s,"%, ").concat(c,"%)"):"hsla(".concat(o,", ").concat(s,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),wR(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),zee(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),o=Math.round(this.g),s=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(o,", ").concat(s,")"):"rgba(".concat(t,", ").concat(o,", ").concat(s,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(o){return"".concat(Math.round(Bi(o,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(o){return Math.round(Bi(o,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+wR(this.r,this.g,this.b,!1),o=0,s=Object.entries(OR);o<s.length;o++){var c=s[o],u=c[0],h=c[1];if(t===h)return u}return!1},e.prototype.toString=function(t){var o=!!t;t=t??this.format;var s=!1,c=this.a<1&&this.a>=0,u=!o&&c&&(t.startsWith("hex")||t==="name");return u?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(s=this.toRgbString()),t==="prgb"&&(s=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(s=this.toHexString()),t==="hex3"&&(s=this.toHexString(!0)),t==="hex4"&&(s=this.toHex8String(!0)),t==="hex8"&&(s=this.toHex8String()),t==="name"&&(s=this.toName()),t==="hsl"&&(s=this.toHslString()),t==="hsv"&&(s=this.toHsvString()),s||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var o=this.toHsl();return o.l+=t/100,o.l=Sg(o.l),new e(o)},e.prototype.brighten=function(t){t===void 0&&(t=10);var o=this.toRgb();return o.r=Math.max(0,Math.min(255,o.r-Math.round(255*-(t/100)))),o.g=Math.max(0,Math.min(255,o.g-Math.round(255*-(t/100)))),o.b=Math.max(0,Math.min(255,o.b-Math.round(255*-(t/100)))),new e(o)},e.prototype.darken=function(t){t===void 0&&(t=10);var o=this.toHsl();return o.l-=t/100,o.l=Sg(o.l),new e(o)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var o=this.toHsl();return o.s-=t/100,o.s=Sg(o.s),new e(o)},e.prototype.saturate=function(t){t===void 0&&(t=10);var o=this.toHsl();return o.s+=t/100,o.s=Sg(o.s),new e(o)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var o=this.toHsl(),s=(o.h+t)%360;return o.h=s<0?360+s:s,new e(o)},e.prototype.mix=function(t,o){o===void 0&&(o=50);var s=this.toRgb(),c=new e(t).toRgb(),u=o/100,h={r:(c.r-s.r)*u+s.r,g:(c.g-s.g)*u+s.g,b:(c.b-s.b)*u+s.b,a:(c.a-s.a)*u+s.a};return new e(h)},e.prototype.analogous=function(t,o){t===void 0&&(t=6),o===void 0&&(o=30);var s=this.toHsl(),c=360/o,u=[this];for(s.h=(s.h-(c*t>>1)+720)%360;--t;)s.h=(s.h+c)%360,u.push(new e(s));return u},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var o=this.toHsv(),s=o.h,c=o.s,u=o.v,h=[],f=1/t;t--;)h.push(new e({h:s,s:c,v:u})),u=(u+f)%1;return h},e.prototype.splitcomplement=function(){var t=this.toHsl(),o=t.h;return[this,new e({h:(o+72)%360,s:t.s,l:t.l}),new e({h:(o+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var o=this.toRgb(),s=new e(t).toRgb(),c=o.a+s.a*(1-o.a);return new e({r:(o.r*o.a+s.r*s.a*(1-o.a))/c,g:(o.g*o.a+s.g*s.a*(1-o.a))/c,b:(o.b*o.a+s.b*s.a*(1-o.a))/c,a:c})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var o=this.toHsl(),s=o.h,c=[this],u=360/t,h=1;h<t;h++)c.push(new e({h:(s+h*u)%360,s:o.s,l:o.l}));return c},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),Cg=2,OU=.16,Qee=.05,Zee=.05,ete=.15,cB=5,lB=4,tte=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function AU(e){var t=e.r,o=e.g,s=e.b,c=IR(t,o,s);return{h:c.h*360,s:c.s,v:c.v}}function Tg(e){var t=e.r,o=e.g,s=e.b;return"#".concat(wR(t,o,s,!1))}function nte(e,t,o){var s=o/100,c={r:(t.r-e.r)*s+e.r,g:(t.g-e.g)*s+e.g,b:(t.b-e.b)*s+e.b};return c}function NU(e,t,o){var s;return Math.round(e.h)>=60&&Math.round(e.h)<=240?s=o?Math.round(e.h)-Cg*t:Math.round(e.h)+Cg*t:s=o?Math.round(e.h)+Cg*t:Math.round(e.h)-Cg*t,s<0?s+=360:s>=360&&(s-=360),s}function xU(e,t,o){if(e.h===0&&e.s===0)return e.s;var s;return o?s=e.s-OU*t:t===lB?s=e.s+OU:s=e.s+Qee*t,s>1&&(s=1),o&&t===cB&&s>.1&&(s=.1),s<.06&&(s=.06),Number(s.toFixed(2))}function PU(e,t,o){var s;return o?s=e.v+Zee*t:s=e.v-ete*t,s>1&&(s=1),Number(s.toFixed(2))}function Tc(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[],s=Kd(e),c=cB;c>0;c-=1){var u=AU(s),h=Tg(Kd({h:NU(u,c,!0),s:xU(u,c,!0),v:PU(u,c,!0)}));o.push(h)}o.push(Tg(s));for(var f=1;f<=lB;f+=1){var m=AU(s),v=Tg(Kd({h:NU(m,f),s:xU(m,f),v:PU(m,f)}));o.push(v)}return t.theme==="dark"?tte.map(function(_){var y=_.index,T=_.opacity,A=Tg(nte(Kd(t.backgroundColor||"#141414"),Kd(o[y]),T*100));return A}):o}var tT={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Ef={},nT={};Object.keys(tT).forEach(function(e){Ef[e]=Tc(tT[e]),Ef[e].primary=Ef[e][5],nT[e]=Tc(tT[e],{theme:"dark",backgroundColor:"#141414"}),nT[e].primary=nT[e][5]});var rte=Ef.gold,ite=Ef.blue;const ote=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}},uB=ote;function ate(e){const{sizeUnit:t,sizeStep:o}=e;return{sizeXXL:t*(o+8),sizeXL:t*(o+4),sizeLG:t*(o+2),sizeMD:t*(o+1),sizeMS:t*o,size:t*o,sizeSM:t*(o-1),sizeXS:t*(o-2),sizeXXS:t*(o-3)}}const bw={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},ste=Object.assign(Object.assign({},bw),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),im=ste;function dB(e,t){let{generateColorPalettes:o,generateNeutralColorPalettes:s}=t;const{colorSuccess:c,colorWarning:u,colorError:h,colorInfo:f,colorPrimary:m,colorBgBase:v,colorTextBase:_}=e,y=o(m),T=o(c),A=o(u),I=o(h),O=o(f),L=s(v,_);return Object.assign(Object.assign({},L),{colorPrimaryBg:y[1],colorPrimaryBgHover:y[2],colorPrimaryBorder:y[3],colorPrimaryBorderHover:y[4],colorPrimaryHover:y[5],colorPrimary:y[6],colorPrimaryActive:y[7],colorPrimaryTextHover:y[8],colorPrimaryText:y[9],colorPrimaryTextActive:y[10],colorSuccessBg:T[1],colorSuccessBgHover:T[2],colorSuccessBorder:T[3],colorSuccessBorderHover:T[4],colorSuccessHover:T[4],colorSuccess:T[6],colorSuccessActive:T[7],colorSuccessTextHover:T[8],colorSuccessText:T[9],colorSuccessTextActive:T[10],colorErrorBg:I[1],colorErrorBgHover:I[2],colorErrorBorder:I[3],colorErrorBorderHover:I[4],colorErrorHover:I[5],colorError:I[6],colorErrorActive:I[7],colorErrorTextHover:I[8],colorErrorText:I[9],colorErrorTextActive:I[10],colorWarningBg:A[1],colorWarningBgHover:A[2],colorWarningBorder:A[3],colorWarningBorderHover:A[4],colorWarningHover:A[4],colorWarning:A[6],colorWarningActive:A[7],colorWarningTextHover:A[8],colorWarningText:A[9],colorWarningTextActive:A[10],colorInfoBg:O[1],colorInfoBgHover:O[2],colorInfoBorder:O[3],colorInfoBorderHover:O[4],colorInfoHover:O[4],colorInfo:O[6],colorInfoActive:O[7],colorInfoTextHover:O[8],colorInfoText:O[9],colorInfoTextActive:O[10],colorBgMask:new Vi("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const cte=e=>{let t=e,o=e,s=e,c=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?o=4:e<8&&e>=7?o=5:e<14&&e>=8?o=6:e<16&&e>=14?o=7:e>=16&&(o=8),e<6&&e>=2?s=1:e>=6&&(s=2),e>4&&e<8?c=4:e>=8&&(c=6),{borderRadius:e>16?16:e,borderRadiusXS:s,borderRadiusSM:o,borderRadiusLG:t,borderRadiusOuter:c}},lte=cte;function ute(e){const{motionUnit:t,motionBase:o,borderRadius:s,lineWidth:c}=e;return Object.assign({motionDurationFast:`${(o+t).toFixed(1)}s`,motionDurationMid:`${(o+t*2).toFixed(1)}s`,motionDurationSlow:`${(o+t*3).toFixed(1)}s`,lineWidthBold:c+1},lte(s))}const dc=(e,t)=>new Vi(e).setAlpha(t).toRgbString(),Gp=(e,t)=>new Vi(e).darken(t).toHexString(),dte=e=>{const t=Tc(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},hte=(e,t)=>{const o=e||"#fff",s=t||"#000";return{colorBgBase:o,colorTextBase:s,colorText:dc(s,.88),colorTextSecondary:dc(s,.65),colorTextTertiary:dc(s,.45),colorTextQuaternary:dc(s,.25),colorFill:dc(s,.15),colorFillSecondary:dc(s,.06),colorFillTertiary:dc(s,.04),colorFillQuaternary:dc(s,.02),colorBgLayout:Gp(o,4),colorBgContainer:Gp(o,0),colorBgElevated:Gp(o,0),colorBgSpotlight:dc(s,.85),colorBorder:Gp(o,15),colorBorderSecondary:Gp(o,6)}};function pte(e){const t=new Array(10).fill(null).map((o,s)=>{const c=s-1,u=e*Math.pow(2.71828,c/5),h=s>1?Math.floor(u):Math.ceil(u);return Math.floor(h/2)*2});return t[1]=e,t.map(o=>{const s=o+8;return{size:o,lineHeight:s/o}})}const fte=e=>{const t=pte(e),o=t.map(c=>c.size),s=t.map(c=>c.lineHeight);return{fontSizeSM:o[0],fontSize:o[1],fontSizeLG:o[2],fontSizeXL:o[3],fontSizeHeading1:o[6],fontSizeHeading2:o[5],fontSizeHeading3:o[4],fontSizeHeading4:o[3],fontSizeHeading5:o[2],lineHeight:s[1],lineHeightLG:s[2],lineHeightSM:s[0],lineHeightHeading1:s[6],lineHeightHeading2:s[5],lineHeightHeading3:s[4],lineHeightHeading4:s[3],lineHeightHeading5:s[2]}},hB=fte;function om(e){const t=Object.keys(bw).map(o=>{const s=Tc(e[o]);return new Array(10).fill(1).reduce((c,u,h)=>(c[`${o}-${h+1}`]=s[h],c[`${o}${h+1}`]=s[h],c),{})}).reduce((o,s)=>(o=Object.assign(Object.assign({},o),s),o),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),dB(e,{generateColorPalettes:dte,generateNeutralColorPalettes:hte})),hB(e.fontSize)),ate(e)),uB(e)),ute(e))}function rT(e){return e>=0&&e<=255}function bg(e,t){const{r:o,g:s,b:c,a:u}=new Vi(e).toRgb();if(u<1)return e;const{r:h,g:f,b:m}=new Vi(t).toRgb();for(let v=.01;v<=1;v+=.01){const _=Math.round((o-h*(1-v))/v),y=Math.round((s-f*(1-v))/v),T=Math.round((c-m*(1-v))/v);if(rT(_)&&rT(y)&&rT(T))return new Vi({r:_,g:y,b:T,a:Math.round(v*100)/100}).toRgbString()}return new Vi({r:o,g:s,b:c,a:1}).toRgbString()}var mte=globalThis&&globalThis.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function pB(e){const{override:t}=e,o=mte(e,["override"]),s=Object.assign({},t);Object.keys(im).forEach(T=>{delete s[T]});const c=Object.assign(Object.assign({},o),s),u=480,h=576,f=768,m=992,v=1200,_=1600;if(c.motion===!1){const T="0s";c.motionDurationFast=T,c.motionDurationMid=T,c.motionDurationSlow=T}return Object.assign(Object.assign(Object.assign({},c),{colorLink:c.colorInfoText,colorLinkHover:c.colorInfoHover,colorLinkActive:c.colorInfoActive,colorFillContent:c.colorFillSecondary,colorFillContentHover:c.colorFill,colorFillAlter:c.colorFillQuaternary,colorBgContainerDisabled:c.colorFillTertiary,colorBorderBg:c.colorBgContainer,colorSplit:bg(c.colorBorderSecondary,c.colorBgContainer),colorTextPlaceholder:c.colorTextQuaternary,colorTextDisabled:c.colorTextQuaternary,colorTextHeading:c.colorText,colorTextLabel:c.colorTextSecondary,colorTextDescription:c.colorTextTertiary,colorTextLightSolid:c.colorWhite,colorHighlight:c.colorError,colorBgTextHover:c.colorFillSecondary,colorBgTextActive:c.colorFill,colorIcon:c.colorTextTertiary,colorIconHover:c.colorText,colorErrorOutline:bg(c.colorErrorBg,c.colorBgContainer),colorWarningOutline:bg(c.colorWarningBg,c.colorBgContainer),fontSizeIcon:c.fontSizeSM,lineWidthFocus:c.lineWidth*4,lineWidth:c.lineWidth,controlOutlineWidth:c.lineWidth*2,controlInteractiveSize:c.controlHeight/2,controlItemBgHover:c.colorFillTertiary,controlItemBgActive:c.colorPrimaryBg,controlItemBgActiveHover:c.colorPrimaryBgHover,controlItemBgActiveDisabled:c.colorFill,controlTmpOutline:c.colorFillQuaternary,controlOutline:bg(c.colorPrimaryBg,c.colorBgContainer),lineType:c.lineType,borderRadius:c.borderRadius,borderRadiusXS:c.borderRadiusXS,borderRadiusSM:c.borderRadiusSM,borderRadiusLG:c.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:c.sizeXXS,paddingXS:c.sizeXS,paddingSM:c.sizeSM,padding:c.size,paddingMD:c.sizeMD,paddingLG:c.sizeLG,paddingXL:c.sizeXL,paddingContentHorizontalLG:c.sizeLG,paddingContentVerticalLG:c.sizeMS,paddingContentHorizontal:c.sizeMS,paddingContentVertical:c.sizeSM,paddingContentHorizontalSM:c.size,paddingContentVerticalSM:c.sizeXS,marginXXS:c.sizeXXS,marginXS:c.sizeXS,marginSM:c.sizeSM,margin:c.size,marginMD:c.sizeMD,marginLG:c.sizeLG,marginXL:c.sizeXL,marginXXL:c.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:u,screenXSMin:u,screenXSMax:h-1,screenSM:h,screenSMMin:h,screenSMMax:f-1,screenMD:f,screenMDMin:f,screenMDMax:m-1,screenLG:m,screenLGMin:m,screenLGMax:v-1,screenXL:v,screenXLMin:v,screenXLMax:_-1,screenXXL:_,screenXXLMin:_,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Vi("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Vi("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Vi("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),s)}function hs(e){var t=b.useRef();t.current=e;var o=b.useCallback(function(){for(var s,c=arguments.length,u=new Array(c),h=0;h<c;h++)u[h]=arguments[h];return(s=t.current)===null||s===void 0?void 0:s.call.apply(s,[t].concat(u))},[]);return o}function vh(e){var t=b.useRef(!1),o=b.useState(e),s=De(o,2),c=s[0],u=s[1];b.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function h(f,m){m&&t.current||u(f)}return[c,h]}function iT(e){return e!==void 0}function Rl(e,t){var o=t||{},s=o.defaultValue,c=o.value,u=o.onChange,h=o.postState,f=vh(function(){return iT(c)?c:iT(s)?typeof s=="function"?s():s:typeof e=="function"?e():e}),m=De(f,2),v=m[0],_=m[1],y=c!==void 0?c:v,T=h?h(y):y,A=hs(u),I=vh([y]),O=De(I,2),L=O[0],x=O[1];gU(function(){var D=L[0];v!==D&&A(v,D)},[L]),gU(function(){iT(c)||_(c)},[c]);var N=hs(function(D,U){_(D,U),x([y],U)});return[T,N]}const fB="anticon",gte=(e,t)=>t||(e?`ant-${e}`:"ant"),wi=b.createContext({getPrefixCls:gte,iconPrefixCls:fB}),mB=e=>({color:e.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}}),vte=(e,t,o,s,c)=>{const u=e/2,h=0,f=u,m=o*1/Math.sqrt(2),v=u-o*(1-1/Math.sqrt(2)),_=u-t*(1/Math.sqrt(2)),y=o*(Math.sqrt(2)-1)+t*(1/Math.sqrt(2)),T=2*u-_,A=y,I=2*u-m,O=v,L=2*u-h,x=f,N=u*Math.sqrt(2)+o*(Math.sqrt(2)-2),D=o*(Math.sqrt(2)-1);return{pointerEvents:"none",width:e,height:e,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:e,height:e/2,background:s,clipPath:{_multi_value_:!0,value:[`polygon(${D}px 100%, 50% ${D}px, ${2*u-D}px 100%, ${D}px 100%)`,`path('M ${h} ${f} A ${o} ${o} 0 0 0 ${m} ${v} L ${_} ${y} A ${t} ${t} 0 0 1 ${T} ${A} L ${I} ${O} A ${o} ${o} 0 0 0 ${L} ${x} Z')`]},content:'""'},"&::after":{content:'""',position:"absolute",width:N,height:N,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${t}px 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:c,zIndex:0,background:"transparent"}}},Ete={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},BE=e=>({boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:e.fontFamily}),gB=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),AR=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),_te=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active,\n  &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),Ste=(e,t)=>{const{fontFamily:o,fontSize:s}=e,c=`[class^="${t}"], [class*=" ${t}"]`;return{[c]:{fontFamily:o,fontSize:s,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[c]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},vB=e=>({outline:`${e.lineWidthFocus}px solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),yte=e=>({"&:focus-visible":Object.assign({},vB(e))});function Uu(e,t,o,s){return c=>{const[u,h,f]=am(),{getPrefixCls:m,iconPrefixCls:v,csp:_}=b.useContext(wi),y=m(),T={theme:u,token:h,hashId:f,nonce:()=>_==null?void 0:_.nonce};return RR(Object.assign(Object.assign({},T),{path:["Shared",y]}),()=>[{"&":_te(h)}]),[RR(Object.assign(Object.assign({},T),{path:[e,c,v]}),()=>{const{token:A,flush:I}=Tte(h),O=Object.assign({},h[e]);if(s!=null&&s.deprecatedTokens){const{deprecatedTokens:V}=s;V.forEach(j=>{let[B,Y]=j;var ee;(O!=null&&O[B]||O!=null&&O[Y])&&((ee=O[Y])!==null&&ee!==void 0||(O[Y]=O==null?void 0:O[B]))})}const L=typeof o=="function"?o(Ho(A,O??{})):o,x=Object.assign(Object.assign({},L),O),N=`.${c}`,D=Ho(A,{componentCls:N,prefixCls:c,iconCls:`.${v}`,antCls:`.${y}`},x),U=t(D,{hashId:f,prefixCls:c,rootPrefixCls:y,iconPrefixCls:v,overrideComponentToken:O});return I(e,x),[(s==null?void 0:s.resetStyle)===!1?null:Ste(h,c),U]}),f]}}const EB=typeof CSSINJS_STATISTIC<"u";let NR=!0;function Ho(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];if(!EB)return Object.assign.apply(Object,[{}].concat(t));NR=!1;const s={};return t.forEach(c=>{Object.keys(c).forEach(h=>{Object.defineProperty(s,h,{configurable:!0,enumerable:!0,get:()=>c[h]})})}),NR=!0,s}function Cte(){}function Tte(e){let t,o=e,s=Cte;return EB&&(t=new Set,o=new Proxy(e,{get(c,u){return NR&&t.add(u),c[u]}}),s=(c,u)=>{Array.from(t)}),{token:o,keys:t,flush:s}}function bte(e,t){return Hv.reduce((o,s)=>{const c=e[`${s}1`],u=e[`${s}3`],h=e[`${s}6`],f=e[`${s}7`];return Object.assign(Object.assign({},o),t(s,{lightColor:c,lightBorderColor:u,darkColor:h,textColor:f}))},{})}const Rte=$v(om),Wv={token:im,hashed:!0},_B=Dt.createContext(Wv);function am(){const{token:e,hashed:t,theme:o,components:s}=Dt.useContext(_B),c=`${jee}-${t||""}`,u=o||Rte,[h,f]=JZ(u,[im,e],{salt:c,override:Object.assign({override:e},s),formatToken:pB});return[u,h,t?f:""]}const Ite=`-ant-${Date.now()}-${Math.random()}`;function wte(e,t){const o={},s=(h,f)=>{let m=h.clone();return m=(f==null?void 0:f(m))||m,m.toRgbString()},c=(h,f)=>{const m=new Vi(h),v=Tc(m.toRgbString());o[`${f}-color`]=s(m),o[`${f}-color-disabled`]=v[1],o[`${f}-color-hover`]=v[4],o[`${f}-color-active`]=v[6],o[`${f}-color-outline`]=m.clone().setAlpha(.2).toRgbString(),o[`${f}-color-deprecated-bg`]=v[0],o[`${f}-color-deprecated-border`]=v[2]};if(t.primaryColor){c(t.primaryColor,"primary");const h=new Vi(t.primaryColor),f=Tc(h.toRgbString());f.forEach((v,_)=>{o[`primary-${_+1}`]=v}),o["primary-color-deprecated-l-35"]=s(h,v=>v.lighten(35)),o["primary-color-deprecated-l-20"]=s(h,v=>v.lighten(20)),o["primary-color-deprecated-t-20"]=s(h,v=>v.tint(20)),o["primary-color-deprecated-t-50"]=s(h,v=>v.tint(50)),o["primary-color-deprecated-f-12"]=s(h,v=>v.setAlpha(v.getAlpha()*.12));const m=new Vi(f[0]);o["primary-color-active-deprecated-f-30"]=s(m,v=>v.setAlpha(v.getAlpha()*.3)),o["primary-color-active-deprecated-d-02"]=s(m,v=>v.darken(2))}return t.successColor&&c(t.successColor,"success"),t.warningColor&&c(t.warningColor,"warning"),t.errorColor&&c(t.errorColor,"error"),t.infoColor&&c(t.infoColor,"info"),`
  :root {
    ${Object.keys(o).map(h=>`--${e}-${h}: ${o[h]};`).join(`
`)}
  }
  `.trim()}function Ote(e,t){const o=wte(e,t);ga()&&Oh(o,`${Ite}-dynamic-theme`)}const xR=b.createContext(!1),Ate=e=>{let{children:t,disabled:o}=e;const s=b.useContext(xR);return b.createElement(xR.Provider,{value:o??s},t)},Rw=xR,Nte=e=>{const t=Dt.useContext($E);return Dt.useMemo(()=>e?typeof e=="string"?e??t:e instanceof Function?e(t):t:t,[e,t])},Iw=Nte,SB=b.createContext(void 0),xte=e=>{let{children:t,size:o}=e;const s=Iw(o);return b.createElement(SB.Provider,{value:s},t)},$E=SB;function Pte(){const e=b.useContext(Rw),t=b.useContext($E);return{componentDisabled:e,componentSize:t}}function Dte(e,t){const o=e||{},s=o.inherit===!1||!t?Wv:t;return ME(()=>{if(!e)return t;const u=Object.assign({},s.components);return Object.keys(e.components||{}).forEach(h=>{u[h]=Object.assign(Object.assign({},u[h]),e.components[h])}),Object.assign(Object.assign(Object.assign({},s),o),{token:Object.assign(Object.assign({},s.token),o.token),components:u})},[o,s],(u,h)=>u.some((f,m)=>{const v=h[m];return!vw(f,v,!0)}))}var kte=["children"],yB=b.createContext({});function Lte(e){var t=e.children,o=fn(e,kte);return b.createElement(yB.Provider,{value:o},t)}var Mte=function(e){Uh(o,e);var t=Fh(o);function o(){return Wa(this,o),t.apply(this,arguments)}return Ga(o,[{key:"render",value:function(){return this.props.children}}]),o}(b.Component),hu="none",Rg="appear",Ig="enter",wg="leave",DU="none",us="prepare",ch="start",lh="active",ww="end",CB="prepared";function kU(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit".concat(e)]="webkit".concat(t),o["Moz".concat(e)]="moz".concat(t),o["ms".concat(e)]="MS".concat(t),o["O".concat(e)]="o".concat(t.toLowerCase()),o}function Ute(e,t){var o={animationend:kU("Animation","AnimationEnd"),transitionend:kU("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete o.animationend.animation,"TransitionEvent"in t||delete o.transitionend.transition),o}var Fte=Ute(ga(),typeof window<"u"?window:{}),TB={};if(ga()){var Vte=document.createElement("div");TB=Vte.style}var Og={};function bB(e){if(Og[e])return Og[e];var t=Fte[e];if(t)for(var o=Object.keys(t),s=o.length,c=0;c<s;c+=1){var u=o[c];if(Object.prototype.hasOwnProperty.call(t,u)&&u in TB)return Og[e]=t[u],Og[e]}return""}var RB=bB("animationend"),IB=bB("transitionend"),wB=!!(RB&&IB),LU=RB||"animationend",MU=IB||"transitionend";function UU(e,t){if(!e)return null;if(An(e)==="object"){var o=t.replace(/-\w/g,function(s){return s[1].toUpperCase()});return e[o]}return"".concat(e,"-").concat(t)}const jte=function(e){var t=b.useRef(),o=b.useRef(e);o.current=e;var s=b.useCallback(function(h){o.current(h)},[]);function c(h){h&&(h.removeEventListener(MU,s),h.removeEventListener(LU,s))}function u(h){t.current&&t.current!==h&&c(t.current),h&&h!==t.current&&(h.addEventListener(MU,s),h.addEventListener(LU,s),t.current=h)}return b.useEffect(function(){return function(){c(t.current)}},[]),[u,c]};var OB=ga()?b.useLayoutEffect:b.useEffect;const Bte=function(){var e=b.useRef(null);function t(){_o.cancel(e.current)}function o(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var u=_o(function(){c<=1?s({isCanceled:function(){return u!==e.current}}):o(s,c-1)});e.current=u}return b.useEffect(function(){return function(){t()}},[]),[o,t]};var $te=[us,ch,lh,ww],Hte=[us,CB],AB=!1,Wte=!0;function NB(e){return e===lh||e===ww}const Gte=function(e,t,o){var s=vh(DU),c=De(s,2),u=c[0],h=c[1],f=Bte(),m=De(f,2),v=m[0],_=m[1];function y(){h(us,!0)}var T=t?Hte:$te;return OB(function(){if(u!==DU&&u!==ww){var A=T.indexOf(u),I=T[A+1],O=o(u);O===AB?h(I,!0):I&&v(function(L){function x(){L.isCanceled()||h(I,!0)}O===!0?x():Promise.resolve(O).then(x)})}},[e,u]),b.useEffect(function(){return function(){_()}},[]),[y,u]};function zte(e,t,o,s){var c=s.motionEnter,u=c===void 0?!0:c,h=s.motionAppear,f=h===void 0?!0:h,m=s.motionLeave,v=m===void 0?!0:m,_=s.motionDeadline,y=s.motionLeaveImmediately,T=s.onAppearPrepare,A=s.onEnterPrepare,I=s.onLeavePrepare,O=s.onAppearStart,L=s.onEnterStart,x=s.onLeaveStart,N=s.onAppearActive,D=s.onEnterActive,U=s.onLeaveActive,V=s.onAppearEnd,j=s.onEnterEnd,B=s.onLeaveEnd,Y=s.onVisibleChanged,ee=vh(),H=De(ee,2),Z=H[0],J=H[1],X=vh(hu),ne=De(X,2),ie=ne[0],ae=ne[1],pe=vh(null),ue=De(pe,2),Se=ue[0],Ee=ue[1],le=b.useRef(!1),se=b.useRef(null);function de(){return o()}var he=b.useRef(!1);function xe(){ae(hu,!0),Ee(null,!0)}function Me(Ke){var Ge=de();if(!(Ke&&!Ke.deadline&&Ke.target!==Ge)){var rt=he.current,pt;ie===Rg&&rt?pt=V==null?void 0:V(Ge,Ke):ie===Ig&&rt?pt=j==null?void 0:j(Ge,Ke):ie===wg&&rt&&(pt=B==null?void 0:B(Ge,Ke)),ie!==hu&&rt&&pt!==!1&&xe()}}var it=jte(Me),Be=De(it,1),Tt=Be[0],It=function(Ge){var rt,pt,Nt;switch(Ge){case Rg:return rt={},Qe(rt,us,T),Qe(rt,ch,O),Qe(rt,lh,N),rt;case Ig:return pt={},Qe(pt,us,A),Qe(pt,ch,L),Qe(pt,lh,D),pt;case wg:return Nt={},Qe(Nt,us,I),Qe(Nt,ch,x),Qe(Nt,lh,U),Nt;default:return{}}},lt=b.useMemo(function(){return It(ie)},[ie]),Mt=Gte(ie,!e,function(Ke){if(Ke===us){var Ge=lt[us];return Ge?Ge(de()):AB}if(Ut in lt){var rt;Ee(((rt=lt[Ut])===null||rt===void 0?void 0:rt.call(lt,de(),null))||null)}return Ut===lh&&(Tt(de()),_>0&&(clearTimeout(se.current),se.current=setTimeout(function(){Me({deadline:!0})},_))),Ut===CB&&xe(),Wte}),ht=De(Mt,2),ze=ht[0],Ut=ht[1],Ft=NB(Ut);he.current=Ft,OB(function(){J(t);var Ke=le.current;le.current=!0;var Ge;!Ke&&t&&f&&(Ge=Rg),Ke&&t&&u&&(Ge=Ig),(Ke&&!t&&v||!Ke&&y&&!t&&v)&&(Ge=wg);var rt=It(Ge);Ge&&(e||rt[us])?(ae(Ge),ze()):ae(hu)},[t]),b.useEffect(function(){(ie===Rg&&!f||ie===Ig&&!u||ie===wg&&!v)&&ae(hu)},[f,u,v]),b.useEffect(function(){return function(){le.current=!1,clearTimeout(se.current)}},[]);var Vt=b.useRef(!1);b.useEffect(function(){Z&&(Vt.current=!0),Z!==void 0&&ie===hu&&((Vt.current||Z)&&(Y==null||Y(Z)),Vt.current=!0)},[Z,ie]);var qe=Se;return lt[us]&&Ut===ch&&(qe=ge({transition:"none"},qe)),[ie,Ut,qe,Z??t]}function Kte(e){var t=e;An(e)==="object"&&(t=e.transitionSupport);function o(c,u){return!!(c.motionName&&t&&u!==!1)}var s=b.forwardRef(function(c,u){var h=c.visible,f=h===void 0?!0:h,m=c.removeOnLeave,v=m===void 0?!0:m,_=c.forceRender,y=c.children,T=c.motionName,A=c.leavedClassName,I=c.eventProps,O=b.useContext(yB),L=O.motion,x=o(c,L),N=b.useRef(),D=b.useRef();function U(){try{return N.current instanceof HTMLElement?N.current:gR(D.current)}catch{return null}}var V=zte(x,f,U,c),j=De(V,4),B=j[0],Y=j[1],ee=j[2],H=j[3],Z=b.useRef(H);H&&(Z.current=!0);var J=b.useCallback(function(Ee){N.current=Ee,hw(u,Ee)},[u]),X,ne=ge(ge({},I),{},{visible:f});if(!y)X=null;else if(B===hu)H?X=y(ge({},ne),J):!v&&Z.current&&A?X=y(ge(ge({},ne),{},{className:A}),J):_||!v&&!A?X=y(ge(ge({},ne),{},{style:{display:"none"}}),J):X=null;else{var ie,ae;Y===us?ae="prepare":NB(Y)?ae="active":Y===ch&&(ae="start");var pe=UU(T,"".concat(B,"-").concat(ae));X=y(ge(ge({},ne),{},{className:ot(UU(T,B),(ie={},Qe(ie,pe,pe&&ae),Qe(ie,T,typeof T=="string"),ie)),style:ee}),J)}if(b.isValidElement(X)&&rm(X)){var ue=X,Se=ue.ref;Se||(X=b.cloneElement(X,{ref:J}))}return b.createElement(Mte,{ref:D},X)});return s.displayName="CSSMotion",s}const jh=Kte(wB);var PR="add",DR="keep",kR="remove",oT="removed";function Yte(e){var t;return e&&An(e)==="object"&&"key"in e?t=e:t={key:e},ge(ge({},t),{},{key:String(t.key)})}function LR(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(Yte)}function qte(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=[],s=0,c=t.length,u=LR(e),h=LR(t);u.forEach(function(v){for(var _=!1,y=s;y<c;y+=1){var T=h[y];if(T.key===v.key){s<y&&(o=o.concat(h.slice(s,y).map(function(A){return ge(ge({},A),{},{status:PR})})),s=y),o.push(ge(ge({},T),{},{status:DR})),s+=1,_=!0;break}}_||o.push(ge(ge({},v),{},{status:kR}))}),s<c&&(o=o.concat(h.slice(s).map(function(v){return ge(ge({},v),{},{status:PR})})));var f={};o.forEach(function(v){var _=v.key;f[_]=(f[_]||0)+1});var m=Object.keys(f).filter(function(v){return f[v]>1});return m.forEach(function(v){o=o.filter(function(_){var y=_.key,T=_.status;return y!==v||T!==kR}),o.forEach(function(_){_.key===v&&(_.status=DR)})}),o}var Xte=["component","children","onVisibleChanged","onAllRemoved"],Jte=["status"],Qte=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function Zte(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jh,o=function(s){Uh(u,s);var c=Fh(u);function u(){var h;Wa(this,u);for(var f=arguments.length,m=new Array(f),v=0;v<f;v++)m[v]=arguments[v];return h=c.call.apply(c,[this].concat(m)),Qe(Mv(h),"state",{keyEntities:[]}),Qe(Mv(h),"removeKey",function(_){var y=h.state.keyEntities,T=y.map(function(A){return A.key!==_?A:ge(ge({},A),{},{status:oT})});return h.setState({keyEntities:T}),T.filter(function(A){var I=A.status;return I!==oT}).length}),h}return Ga(u,[{key:"render",value:function(){var f=this,m=this.state.keyEntities,v=this.props,_=v.component,y=v.children,T=v.onVisibleChanged,A=v.onAllRemoved,I=fn(v,Xte),O=_||b.Fragment,L={};return Qte.forEach(function(x){L[x]=I[x],delete I[x]}),delete I.keys,b.createElement(O,I,m.map(function(x){var N=x.status,D=fn(x,Jte),U=N===PR||N===DR;return b.createElement(t,Ve({},L,{key:D.key,visible:U,eventProps:D,onVisibleChanged:function(j){if(T==null||T(j,{key:D.key}),!j){var B=f.removeKey(D.key);B===0&&A&&A()}}}),y)}))}}],[{key:"getDerivedStateFromProps",value:function(f,m){var v=f.keys,_=m.keyEntities,y=LR(v),T=qte(_,y);return{keyEntities:T.filter(function(A){var I=_.find(function(O){var L=O.key;return A.key===L});return!(I&&I.status===oT&&A.status===kR)})}}}]),u}(b.Component);return Qe(o,"defaultProps",{component:"div"}),o}Zte(wB);function ene(e){const{children:t}=e,[,o]=am(),{motion:s}=o,c=b.useRef(!1);return c.current=c.current||s===!1,c.current?b.createElement(Lte,{motion:s},t):t}const tne=(e,t)=>{const[o,s]=am();return RR({theme:o,token:s,hashId:"",path:["ant-design-icons",e],nonce:()=>t==null?void 0:t.nonce},()=>[{[`.${e}`]:Object.assign(Object.assign({},gB()),{[`.${e} .${e}-icon`]:{display:"block"}})}])},nne=tne;var rne=globalThis&&globalThis.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const ine=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select","button"],one="ant";let xB;function ane(){return xB||one}function sne(e){return Object.keys(e).some(t=>t.endsWith("Color"))}const cne=e=>{let{prefixCls:t,iconPrefixCls:o,theme:s}=e;t!==void 0&&(xB=t),s&&sne(s)&&Ote(ane(),s)},lne=e=>{const{children:t,csp:o,autoInsertSpaceInButton:s,form:c,locale:u,componentSize:h,direction:f,space:m,virtual:v,dropdownMatchSelectWidth:_,popupMatchSelectWidth:y,popupOverflow:T,legacyLocale:A,parentContext:I,iconPrefixCls:O,theme:L,componentDisabled:x}=e,N=b.useCallback((ie,ae)=>{const{prefixCls:pe}=e;if(ae)return ae;const ue=pe||I.getPrefixCls("");return ie?`${ue}-${ie}`:ue},[I.getPrefixCls,e.prefixCls]),D=O||I.iconPrefixCls||fB,U=D!==I.iconPrefixCls,V=o||I.csp,j=nne(D,V),B=Dte(L,I.theme),Y={csp:V,autoInsertSpaceInButton:s,locale:u||A,direction:f,space:m,virtual:v,popupMatchSelectWidth:y??_,popupOverflow:T,getPrefixCls:N,iconPrefixCls:D,theme:B},ee=Object.assign({},I);Object.keys(Y).forEach(ie=>{Y[ie]!==void 0&&(ee[ie]=Y[ie])}),ine.forEach(ie=>{const ae=e[ie];ae&&(ee[ie]=ae)});const H=ME(()=>ee,ee,(ie,ae)=>{const pe=Object.keys(ie),ue=Object.keys(ae);return pe.length!==ue.length||pe.some(Se=>ie[Se]!==ae[Se])}),Z=b.useMemo(()=>({prefixCls:D,csp:V}),[D,V]);let J=U?j(t):t;const X=b.useMemo(()=>{var ie,ae,pe;return sh(((ie=Gf.Form)===null||ie===void 0?void 0:ie.defaultValidateMessages)||{},((pe=(ae=H.locale)===null||ae===void 0?void 0:ae.Form)===null||pe===void 0?void 0:pe.defaultValidateMessages)||{},(c==null?void 0:c.validateMessages)||{})},[H,c==null?void 0:c.validateMessages]);Object.keys(X).length>0&&(J=b.createElement(Oee.Provider,{value:X},t)),u&&(J=b.createElement(Vee,{locale:u,_ANT_MARK__:Uee},J)),(D||V)&&(J=b.createElement(Cw.Provider,{value:Z},J)),h&&(J=b.createElement(xte,{size:h},J)),J=b.createElement(ene,null,J);const ne=b.useMemo(()=>{const ie=B||{},{algorithm:ae,token:pe}=ie,ue=rne(ie,["algorithm","token"]),Se=ae&&(!Array.isArray(ae)||ae.length>0)?$v(ae):void 0;return Object.assign(Object.assign({},ue),{theme:Se,token:Object.assign(Object.assign({},im),pe)})},[B]);return L&&(J=b.createElement(_B.Provider,{value:ne},J)),x!==void 0&&(J=b.createElement(Ate,{disabled:x},J)),b.createElement(wi.Provider,{value:H},J)},sm=e=>{const t=b.useContext(wi),o=b.useContext(Tw);return b.createElement(lne,Object.assign({parentContext:t,legacyLocale:o},e))};sm.ConfigContext=wi;sm.SizeContext=$E;sm.config=cne;sm.useConfig=Pte;Object.defineProperty(sm,"SizeContext",{get:()=>$E});function PB(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}function une(e){return PB(e)!==(e==null?void 0:e.ownerDocument)}function Gv(e){return une(e)?PB(e):null}function dne(e,t){Eo(e,"[@ant-design/icons] ".concat(t))}function FU(e){return An(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(An(e.icon)==="object"||typeof e.icon=="function")}function VU(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,o){var s=e[o];switch(o){case"class":t.className=s,delete t.class;break;default:t[o]=s}return t},{})}function MR(e,t,o){return o?Dt.createElement(e.tag,ge(ge({key:t},VU(e.attrs)),o),(e.children||[]).map(function(s,c){return MR(s,"".concat(t,"-").concat(e.tag,"-").concat(c))})):Dt.createElement(e.tag,ge({key:t},VU(e.attrs)),(e.children||[]).map(function(s,c){return MR(s,"".concat(t,"-").concat(e.tag,"-").concat(c))}))}function DB(e){return Tc(e)[0]}function kB(e){return e?Array.isArray(e)?e:[e]:[]}var hne=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,pne=function(t){var o=b.useContext(Cw),s=o.csp,c=o.prefixCls,u=hne;c&&(u=u.replace(/anticon/g,c)),b.useEffect(function(){var h=t.current,f=Gv(h);Oh(u,"@ant-design-icons",{prepend:!0,csp:s,attachTo:f})},[])},fne=["icon","className","onClick","style","primaryColor","secondaryColor"],_f={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function mne(e){var t=e.primaryColor,o=e.secondaryColor;_f.primaryColor=t,_f.secondaryColor=o||DB(t),_f.calculated=!!o}function gne(){return ge({},_f)}var HE=function(t){var o=t.icon,s=t.className,c=t.onClick,u=t.style,h=t.primaryColor,f=t.secondaryColor,m=fn(t,fne),v=b.useRef(),_=_f;if(h&&(_={primaryColor:h,secondaryColor:f||DB(h)}),pne(v),dne(FU(o),"icon should be icon definiton, but got ".concat(o)),!FU(o))return null;var y=o;return y&&typeof y.icon=="function"&&(y=ge(ge({},y),{},{icon:y.icon(_.primaryColor,_.secondaryColor)})),MR(y.icon,"svg-".concat(y.name),ge(ge({className:s,onClick:c,style:u,"data-icon":y.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},m),{},{ref:v}))};HE.displayName="IconReact";HE.getTwoToneColors=gne;HE.setTwoToneColors=mne;const Ow=HE;function LB(e){var t=kB(e),o=De(t,2),s=o[0],c=o[1];return Ow.setTwoToneColors({primaryColor:s,secondaryColor:c})}function vne(){var e=Ow.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var Ene=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];LB(ite.primary);var WE=b.forwardRef(function(e,t){var o,s=e.className,c=e.icon,u=e.spin,h=e.rotate,f=e.tabIndex,m=e.onClick,v=e.twoToneColor,_=fn(e,Ene),y=b.useContext(Cw),T=y.prefixCls,A=T===void 0?"anticon":T,I=y.rootClassName,O=ot(I,A,(o={},Qe(o,"".concat(A,"-").concat(c.name),!!c.name),Qe(o,"".concat(A,"-spin"),!!u||c.name==="loading"),o),s),L=f;L===void 0&&m&&(L=-1);var x=h?{msTransform:"rotate(".concat(h,"deg)"),transform:"rotate(".concat(h,"deg)")}:void 0,N=kB(v),D=De(N,2),U=D[0],V=D[1];return b.createElement("span",Ve({role:"img","aria-label":c.name},_,{ref:t,tabIndex:L,onClick:m,className:O}),b.createElement(Ow,{icon:c,primaryColor:U,secondaryColor:V,style:x}))});WE.displayName="AntdIcon";WE.getTwoToneColor=vne;WE.setTwoToneColor=LB;const Ws=WE;var _ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"};const Sne=_ne;var yne=function(t,o){return b.createElement(Ws,Ve({},t,{ref:o,icon:Sne}))};const Cne=b.forwardRef(yne),{isValidElement:Nu}=_h;function MB(e){return e&&Nu(e)&&e.type===b.Fragment}function Tne(e,t,o){return Nu(e)?b.cloneElement(e,typeof o=="function"?o(e.props||{}):o):t}function Dl(e,t){return Tne(e,e,t)}var ct={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var o=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||o>=ct.F1&&o<=ct.F12)return!1;switch(o){case ct.ALT:case ct.CAPS_LOCK:case ct.CONTEXT_MENU:case ct.CTRL:case ct.DOWN:case ct.END:case ct.ESC:case ct.HOME:case ct.INSERT:case ct.LEFT:case ct.MAC_FF_META:case ct.META:case ct.NUMLOCK:case ct.NUM_CENTER:case ct.PAGE_DOWN:case ct.PAGE_UP:case ct.PAUSE:case ct.PRINT_SCREEN:case ct.RIGHT:case ct.SHIFT:case ct.UP:case ct.WIN_KEY:case ct.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=ct.ZERO&&t<=ct.NINE||t>=ct.NUM_ZERO&&t<=ct.NUM_MULTIPLY||t>=ct.A&&t<=ct.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case ct.SPACE:case ct.QUESTION_MARK:case ct.NUM_PLUS:case ct.NUM_MINUS:case ct.NUM_PERIOD:case ct.NUM_DIVISION:case ct.SEMICOLON:case ct.DASH:case ct.EQUALS:case ct.COMMA:case ct.PERIOD:case ct.SLASH:case ct.APOSTROPHE:case ct.SINGLE_QUOTE:case ct.OPEN_SQUARE_BRACKET:case ct.BACKSLASH:case ct.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},bne={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const Rne=bne;var Ine=function(t,o){return b.createElement(Ws,Ve({},t,{ref:o,icon:Rne}))};const wne=b.forwardRef(Ine);function va(){va=function(){return e};var e={},t=Object.prototype,o=t.hasOwnProperty,s=Object.defineProperty||function(J,X,ne){J[X]=ne.value},c=typeof Symbol=="function"?Symbol:{},u=c.iterator||"@@iterator",h=c.asyncIterator||"@@asyncIterator",f=c.toStringTag||"@@toStringTag";function m(J,X,ne){return Object.defineProperty(J,X,{value:ne,enumerable:!0,configurable:!0,writable:!0}),J[X]}try{m({},"")}catch{m=function(ne,ie,ae){return ne[ie]=ae}}function v(J,X,ne,ie){var ae=X&&X.prototype instanceof T?X:T,pe=Object.create(ae.prototype),ue=new ee(ie||[]);return s(pe,"_invoke",{value:V(J,ne,ue)}),pe}function _(J,X,ne){try{return{type:"normal",arg:J.call(X,ne)}}catch(ie){return{type:"throw",arg:ie}}}e.wrap=v;var y={};function T(){}function A(){}function I(){}var O={};m(O,u,function(){return this});var L=Object.getPrototypeOf,x=L&&L(L(H([])));x&&x!==t&&o.call(x,u)&&(O=x);var N=I.prototype=T.prototype=Object.create(O);function D(J){["next","throw","return"].forEach(function(X){m(J,X,function(ne){return this._invoke(X,ne)})})}function U(J,X){function ne(ae,pe,ue,Se){var Ee=_(J[ae],J,pe);if(Ee.type!=="throw"){var le=Ee.arg,se=le.value;return se&&An(se)=="object"&&o.call(se,"__await")?X.resolve(se.__await).then(function(de){ne("next",de,ue,Se)},function(de){ne("throw",de,ue,Se)}):X.resolve(se).then(function(de){le.value=de,ue(le)},function(de){return ne("throw",de,ue,Se)})}Se(Ee.arg)}var ie;s(this,"_invoke",{value:function(pe,ue){function Se(){return new X(function(Ee,le){ne(pe,ue,Ee,le)})}return ie=ie?ie.then(Se,Se):Se()}})}function V(J,X,ne){var ie="suspendedStart";return function(ae,pe){if(ie==="executing")throw new Error("Generator is already running");if(ie==="completed"){if(ae==="throw")throw pe;return Z()}for(ne.method=ae,ne.arg=pe;;){var ue=ne.delegate;if(ue){var Se=j(ue,ne);if(Se){if(Se===y)continue;return Se}}if(ne.method==="next")ne.sent=ne._sent=ne.arg;else if(ne.method==="throw"){if(ie==="suspendedStart")throw ie="completed",ne.arg;ne.dispatchException(ne.arg)}else ne.method==="return"&&ne.abrupt("return",ne.arg);ie="executing";var Ee=_(J,X,ne);if(Ee.type==="normal"){if(ie=ne.done?"completed":"suspendedYield",Ee.arg===y)continue;return{value:Ee.arg,done:ne.done}}Ee.type==="throw"&&(ie="completed",ne.method="throw",ne.arg=Ee.arg)}}}function j(J,X){var ne=X.method,ie=J.iterator[ne];if(ie===void 0)return X.delegate=null,ne==="throw"&&J.iterator.return&&(X.method="return",X.arg=void 0,j(J,X),X.method==="throw")||ne!=="return"&&(X.method="throw",X.arg=new TypeError("The iterator does not provide a '"+ne+"' method")),y;var ae=_(ie,J.iterator,X.arg);if(ae.type==="throw")return X.method="throw",X.arg=ae.arg,X.delegate=null,y;var pe=ae.arg;return pe?pe.done?(X[J.resultName]=pe.value,X.next=J.nextLoc,X.method!=="return"&&(X.method="next",X.arg=void 0),X.delegate=null,y):pe:(X.method="throw",X.arg=new TypeError("iterator result is not an object"),X.delegate=null,y)}function B(J){var X={tryLoc:J[0]};1 in J&&(X.catchLoc=J[1]),2 in J&&(X.finallyLoc=J[2],X.afterLoc=J[3]),this.tryEntries.push(X)}function Y(J){var X=J.completion||{};X.type="normal",delete X.arg,J.completion=X}function ee(J){this.tryEntries=[{tryLoc:"root"}],J.forEach(B,this),this.reset(!0)}function H(J){if(J){var X=J[u];if(X)return X.call(J);if(typeof J.next=="function")return J;if(!isNaN(J.length)){var ne=-1,ie=function ae(){for(;++ne<J.length;)if(o.call(J,ne))return ae.value=J[ne],ae.done=!1,ae;return ae.value=void 0,ae.done=!0,ae};return ie.next=ie}}return{next:Z}}function Z(){return{value:void 0,done:!0}}return A.prototype=I,s(N,"constructor",{value:I,configurable:!0}),s(I,"constructor",{value:A,configurable:!0}),A.displayName=m(I,f,"GeneratorFunction"),e.isGeneratorFunction=function(J){var X=typeof J=="function"&&J.constructor;return!!X&&(X===A||(X.displayName||X.name)==="GeneratorFunction")},e.mark=function(J){return Object.setPrototypeOf?Object.setPrototypeOf(J,I):(J.__proto__=I,m(J,f,"GeneratorFunction")),J.prototype=Object.create(N),J},e.awrap=function(J){return{__await:J}},D(U.prototype),m(U.prototype,h,function(){return this}),e.AsyncIterator=U,e.async=function(J,X,ne,ie,ae){ae===void 0&&(ae=Promise);var pe=new U(v(J,X,ne,ie),ae);return e.isGeneratorFunction(X)?pe:pe.next().then(function(ue){return ue.done?ue.value:pe.next()})},D(N),m(N,f,"Generator"),m(N,u,function(){return this}),m(N,"toString",function(){return"[object Generator]"}),e.keys=function(J){var X=Object(J),ne=[];for(var ie in X)ne.push(ie);return ne.reverse(),function ae(){for(;ne.length;){var pe=ne.pop();if(pe in X)return ae.value=pe,ae.done=!1,ae}return ae.done=!0,ae}},e.values=H,ee.prototype={constructor:ee,reset:function(X){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Y),!X)for(var ne in this)ne.charAt(0)==="t"&&o.call(this,ne)&&!isNaN(+ne.slice(1))&&(this[ne]=void 0)},stop:function(){this.done=!0;var X=this.tryEntries[0].completion;if(X.type==="throw")throw X.arg;return this.rval},dispatchException:function(X){if(this.done)throw X;var ne=this;function ie(le,se){return ue.type="throw",ue.arg=X,ne.next=le,se&&(ne.method="next",ne.arg=void 0),!!se}for(var ae=this.tryEntries.length-1;ae>=0;--ae){var pe=this.tryEntries[ae],ue=pe.completion;if(pe.tryLoc==="root")return ie("end");if(pe.tryLoc<=this.prev){var Se=o.call(pe,"catchLoc"),Ee=o.call(pe,"finallyLoc");if(Se&&Ee){if(this.prev<pe.catchLoc)return ie(pe.catchLoc,!0);if(this.prev<pe.finallyLoc)return ie(pe.finallyLoc)}else if(Se){if(this.prev<pe.catchLoc)return ie(pe.catchLoc,!0)}else{if(!Ee)throw new Error("try statement without catch or finally");if(this.prev<pe.finallyLoc)return ie(pe.finallyLoc)}}}},abrupt:function(X,ne){for(var ie=this.tryEntries.length-1;ie>=0;--ie){var ae=this.tryEntries[ie];if(ae.tryLoc<=this.prev&&o.call(ae,"finallyLoc")&&this.prev<ae.finallyLoc){var pe=ae;break}}pe&&(X==="break"||X==="continue")&&pe.tryLoc<=ne&&ne<=pe.finallyLoc&&(pe=null);var ue=pe?pe.completion:{};return ue.type=X,ue.arg=ne,pe?(this.method="next",this.next=pe.finallyLoc,y):this.complete(ue)},complete:function(X,ne){if(X.type==="throw")throw X.arg;return X.type==="break"||X.type==="continue"?this.next=X.arg:X.type==="return"?(this.rval=this.arg=X.arg,this.method="return",this.next="end"):X.type==="normal"&&ne&&(this.next=ne),y},finish:function(X){for(var ne=this.tryEntries.length-1;ne>=0;--ne){var ie=this.tryEntries[ne];if(ie.finallyLoc===X)return this.complete(ie.completion,ie.afterLoc),Y(ie),y}},catch:function(X){for(var ne=this.tryEntries.length-1;ne>=0;--ne){var ie=this.tryEntries[ne];if(ie.tryLoc===X){var ae=ie.completion;if(ae.type==="throw"){var pe=ae.arg;Y(ie)}return pe}}throw new Error("illegal catch attempt")},delegateYield:function(X,ne,ie){return this.delegate={iterator:H(X),resultName:ne,nextLoc:ie},this.method==="next"&&(this.arg=void 0),y}},e}function jU(e,t,o,s,c,u,h){try{var f=e[u](h),m=f.value}catch(v){o(v);return}f.done?t(m):Promise.resolve(m).then(s,c)}function Bh(e){return function(){var t=this,o=arguments;return new Promise(function(s,c){var u=e.apply(t,o);function h(m){jU(u,s,c,h,f,"next",m)}function f(m){jU(u,s,c,h,f,"throw",m)}h(void 0)})}}var cm=ge({},XJ),One=cm.version,Ane=cm.render,Nne=cm.unmountComponentAtNode,GE;try{var xne=Number((One||"").split(".")[0]);xne>=18&&(GE=cm.createRoot)}catch{}function BU(e){var t=cm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&An(t)==="object"&&(t.usingClientEntryPoint=e)}var zv="__rc_react_root__";function Pne(e,t){BU(!0);var o=t[zv]||GE(t);BU(!1),o.render(e),t[zv]=o}function Dne(e,t){Ane(e,t)}function kne(e,t){if(GE){Pne(e,t);return}Dne(e,t)}function Lne(e){return UR.apply(this,arguments)}function UR(){return UR=Bh(va().mark(function e(t){return va().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Promise.resolve().then(function(){var c;(c=t[zv])===null||c===void 0||c.unmount(),delete t[zv]}));case 1:case"end":return s.stop()}},e)})),UR.apply(this,arguments)}function Mne(e){Nne(e)}function Une(e){return FR.apply(this,arguments)}function FR(){return FR=Bh(va().mark(function e(t){return va().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(GE===void 0){s.next=2;break}return s.abrupt("return",Lne(t));case 2:Mne(t);case 3:case"end":return s.stop()}},e)})),FR.apply(this,arguments)}const Aw=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),o=t.width,s=t.height;if(o||s)return!0}if(e.getBoundingClientRect){var c=e.getBoundingClientRect(),u=c.width,h=c.height;if(u||h)return!0}}return!1},Fne=e=>{const{componentCls:t,colorPrimary:o}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${o})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}},Vne=Uu("Wave",e=>[Fne(e)]);function jne(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function aT(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&jne(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function Bne(e){const{borderTopColor:t,borderColor:o,backgroundColor:s}=getComputedStyle(e);return aT(t)?t:aT(o)?o:aT(s)?s:null}function sT(e){return Number.isNaN(e)?0:e}const $ne=e=>{const{className:t,target:o}=e,s=b.useRef(null),[c,u]=b.useState(null),[h,f]=b.useState([]),[m,v]=b.useState(0),[_,y]=b.useState(0),[T,A]=b.useState(0),[I,O]=b.useState(0),[L,x]=b.useState(!1),N={left:m,top:_,width:T,height:I,borderRadius:h.map(U=>`${U}px`).join(" ")};c&&(N["--wave-color"]=c);function D(){const U=getComputedStyle(o);u(Bne(o));const V=U.position==="static",{borderLeftWidth:j,borderTopWidth:B}=U;v(V?o.offsetLeft:sT(-parseFloat(j))),y(V?o.offsetTop:sT(-parseFloat(B))),A(o.offsetWidth),O(o.offsetHeight);const{borderTopLeftRadius:Y,borderTopRightRadius:ee,borderBottomLeftRadius:H,borderBottomRightRadius:Z}=U;f([Y,ee,Z,H].map(J=>sT(parseFloat(J))))}return b.useEffect(()=>{if(o){const U=_o(()=>{D(),x(!0)});let V;return typeof ResizeObserver<"u"&&(V=new ResizeObserver(D),V.observe(o)),()=>{_o.cancel(U),V==null||V.disconnect()}}},[]),L?b.createElement(jh,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(U,V)=>{var j;if(V.deadline||V.propertyName==="opacity"){const B=(j=s.current)===null||j===void 0?void 0:j.parentElement;Une(B).then(()=>{B==null||B.remove()})}return!1}},U=>{let{className:V}=U;return b.createElement("div",{ref:s,className:ot(t,V),style:N})}):null};function Hne(e,t){const o=document.createElement("div");o.style.position="absolute",o.style.left="0px",o.style.top="0px",e==null||e.insertBefore(o,e==null?void 0:e.firstChild),kne(b.createElement($ne,{target:e,className:t}),o)}function Wne(e,t){function o(){const s=e.current;Hne(s,t)}return o}const Gne=e=>{const{children:t,disabled:o}=e,{getPrefixCls:s}=b.useContext(wi),c=b.useRef(null),u=s("wave"),[,h]=Vne(u),f=Wne(c,ot(u,h));if(Dt.useEffect(()=>{const v=c.current;if(!v||v.nodeType!==1||o)return;const _=y=>{y.target.tagName==="INPUT"||!Aw(y.target)||!v.getAttribute||v.getAttribute("disabled")||v.disabled||v.className.includes("disabled")||v.className.includes("-leave")||f()};return v.addEventListener("click",_,!0),()=>{v.removeEventListener("click",_,!0)}},[o]),!Dt.isValidElement(t))return t??null;const m=rm(t)?Lu(t.ref,c):c;return Dl(t,{ref:m})},zne=Gne;globalThis&&globalThis.__rest;const UB=b.createContext(null),Kne=(e,t)=>{const o=b.useContext(UB),s=b.useMemo(()=>{if(!o)return"";const{compactDirection:c,isFirstItem:u,isLastItem:h}=o,f=c==="vertical"?"-vertical-":"-";return ot({[`${e}-compact${f}item`]:!0,[`${e}-compact${f}first-item`]:u,[`${e}-compact${f}last-item`]:h,[`${e}-compact${f}item-rtl`]:t==="rtl"})},[e,t,o]);return{compactSize:o==null?void 0:o.compactSize,compactDirection:o==null?void 0:o.compactDirection,compactItemClassnames:s}},Yne=e=>{let{children:t}=e;return b.createElement(UB.Provider,{value:null},t)},qne=b.forwardRef((e,t)=>{const{className:o,style:s,children:c,prefixCls:u}=e,h=ot(`${u}-icon`,o);return Dt.createElement("span",{ref:t,className:h,style:s},c)}),FB=qne,$U=b.forwardRef((e,t)=>{let{prefixCls:o,className:s,style:c,iconClassName:u}=e;const h=ot(`${o}-loading-icon`,s);return Dt.createElement(FB,{prefixCls:o,className:h,style:c,ref:t},Dt.createElement(wne,{className:u}))}),cT=()=>({width:0,opacity:0,transform:"scale(0)"}),lT=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),Xne=e=>{let{prefixCls:t,loading:o,existIcon:s,className:c,style:u}=e;const h=!!o;return s?Dt.createElement($U,{prefixCls:t,className:c,style:u}):Dt.createElement(jh,{visible:h,motionName:`${t}-loading-icon-motion`,removeOnLeave:!0,onAppearStart:cT,onAppearActive:lT,onEnterStart:cT,onEnterActive:lT,onLeaveStart:lT,onLeaveActive:cT},(f,m)=>{let{className:v,style:_}=f;return Dt.createElement($U,{prefixCls:t,className:c,style:Object.assign(Object.assign({},u),_),ref:m,iconClassName:v})})},Jne=Xne;var Qne=globalThis&&globalThis.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const VB=b.createContext(void 0),Zne=e=>{const{getPrefixCls:t,direction:o}=b.useContext(wi),{prefixCls:s,size:c,className:u}=e,h=Qne(e,["prefixCls","size","className"]),f=t("btn-group",s),[,,m]=am();let v="";switch(c){case"large":v="lg";break;case"small":v="sm";break}const _=ot(f,{[`${f}-${v}`]:v,[`${f}-rtl`]:o==="rtl"},u,m);return b.createElement(VB.Provider,{value:c},b.createElement("div",Object.assign({},h,{className:_})))},ere=Zne,HU=/^[\u4e00-\u9fa5]{2}$/,VR=HU.test.bind(HU);function tre(e){return typeof e=="string"}function uT(e){return e==="text"||e==="link"}function nre(e,t){if(e==null)return;const o=t?" ":"";return typeof e!="string"&&typeof e!="number"&&tre(e.type)&&VR(e.props.children)?Dl(e,{children:e.props.children.split("").join(o)}):typeof e=="string"?VR(e)?Dt.createElement("span",null,e.split("").join(o)):Dt.createElement("span",null,e):MB(e)?Dt.createElement("span",null,e):e}function rre(e,t){let o=!1;const s=[];return Dt.Children.forEach(e,c=>{const u=typeof c,h=u==="string"||u==="number";if(o&&h){const f=s.length-1,m=s[f];s[f]=`${m}${c}`}else s.push(c);o=h}),Dt.Children.map(s,c=>nre(c,t))}function ire(e,t,o){const{focusElCls:s,focus:c,borderElCls:u}=o,h=u?"> *":"",f=["hover",c?"focus":null,"active"].filter(Boolean).map(m=>`&:${m} ${h}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:-e.lineWidth},"&-item":Object.assign(Object.assign({[f]:{zIndex:2}},s?{[`&${s}`]:{zIndex:2}}:{}),{[`&[disabled] ${h}`]:{zIndex:0}})}}function ore(e,t,o){const{borderElCls:s}=o,c=s?`> ${s}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${c}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function jB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:o}=e,s=`${o}-compact`;return{[s]:Object.assign(Object.assign({},ire(e,s,t)),ore(o,s,t))}}function are(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:-e.lineWidth},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function sre(e,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function cre(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:Object.assign(Object.assign({},are(e,t)),sre(e.componentCls,t))}}const WU=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),lre=e=>{const{componentCls:t,fontSize:o,lineWidth:s,colorPrimaryHover:c,colorErrorHover:u}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:-s,[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:o}},WU(`${t}-primary`,c),WU(`${t}-danger`,u)]}},ure=lre,dre=e=>{const{componentCls:t,iconCls:o,buttonFontWeight:s}=e;return{[t]:{outline:"none",position:"relative",display:"inline-block",fontWeight:s,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:`${e.lineWidth}px ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:e.lineHeight,color:e.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${t}-icon`]:{lineHeight:0},[`> ${o} + span, > span + ${o}`]:{marginInlineStart:e.marginXS},[`&:not(${t}-icon-only) > ${t}-icon`]:{[`&${t}-loading-icon, &:not(:last-child)`]:{marginInlineEnd:e.marginXS}},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},yte(e)),[`&-icon-only${t}-compact-item`]:{flex:"none"},[`&-compact-item${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:e.lineWidth,height:`calc(100% + ${e.lineWidth*2}px)`,backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-vertical-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:`calc(100% + ${e.lineWidth*2}px)`,height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},bc=(e,t,o)=>({[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":t,"&:active":o}}),hre=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),pre=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.controlHeight/2,paddingInlineEnd:e.controlHeight/2}),fre=e=>({cursor:"not-allowed",borderColor:e.colorBorder,color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,boxShadow:"none"}),Kv=(e,t,o,s,c,u,h)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:t||void 0,backgroundColor:"transparent",borderColor:o||void 0,boxShadow:"none"},bc(e,Object.assign({backgroundColor:"transparent"},u),Object.assign({backgroundColor:"transparent"},h))),{"&:disabled":{cursor:"not-allowed",color:s||void 0,borderColor:c||void 0}})}),Nw=e=>({[`&:disabled, &${e.componentCls}-disabled`]:Object.assign({},fre(e))}),BB=e=>Object.assign({},Nw(e)),Yv=e=>({[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",color:e.colorTextDisabled}}),$B=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},BB(e)),{backgroundColor:e.colorBgContainer,borderColor:e.colorBorder,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`}),bc(e.componentCls,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),Kv(e.componentCls,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:e.colorError,borderColor:e.colorError},bc(e.componentCls,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),Kv(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),Nw(e))}),mre=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},BB(e)),{color:e.colorTextLightSolid,backgroundColor:e.colorPrimary,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`}),bc(e.componentCls,{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryHover},{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryActive})),Kv(e.componentCls,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({backgroundColor:e.colorError,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`},bc(e.componentCls,{backgroundColor:e.colorErrorHover},{backgroundColor:e.colorErrorActive})),Kv(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),Nw(e))}),gre=e=>Object.assign(Object.assign({},$B(e)),{borderStyle:"dashed"}),vre=e=>Object.assign(Object.assign(Object.assign({color:e.colorLink},bc(e.componentCls,{color:e.colorLinkHover},{color:e.colorLinkActive})),Yv(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},bc(e.componentCls,{color:e.colorErrorHover},{color:e.colorErrorActive})),Yv(e))}),Ere=e=>Object.assign(Object.assign(Object.assign({},bc(e.componentCls,{color:e.colorText,backgroundColor:e.colorBgTextHover},{color:e.colorText,backgroundColor:e.colorBgTextActive})),Yv(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},Yv(e)),bc(e.componentCls,{color:e.colorErrorHover,backgroundColor:e.colorErrorBg},{color:e.colorErrorHover,backgroundColor:e.colorErrorBg}))}),_re=e=>{const{componentCls:t}=e;return{[`${t}-default`]:$B(e),[`${t}-primary`]:mre(e),[`${t}-dashed`]:gre(e),[`${t}-link`]:vre(e),[`${t}-text`]:Ere(e)}},xw=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:o,controlHeight:s,fontSize:c,lineHeight:u,lineWidth:h,borderRadius:f,buttonPaddingHorizontal:m,iconCls:v}=e,_=Math.max(0,(s-c*u)/2-h),y=m-h,T=`${o}-icon-only`;return[{[`${o}${t}`]:{fontSize:c,height:s,padding:`${_}px ${y}px`,borderRadius:f,[`&${T}`]:{width:s,paddingInlineStart:0,paddingInlineEnd:0,[`&${o}-round`]:{width:"auto"},[v]:{fontSize:e.buttonIconOnlyFontSize}},[`&${o}-loading`]:{opacity:e.opacityLoading,cursor:"default"},[`${o}-loading-icon`]:{transition:`width ${e.motionDurationSlow} ${e.motionEaseInOut}, opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`}}},{[`${o}${o}-circle${t}`]:hre(e)},{[`${o}${o}-round${t}`]:pre(e)}]},Sre=e=>xw(e),yre=e=>{const t=Ho(e,{controlHeight:e.controlHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:8,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.fontSizeLG-2});return xw(t,`${e.componentCls}-sm`)},Cre=e=>{const t=Ho(e,{controlHeight:e.controlHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.fontSizeLG+2});return xw(t,`${e.componentCls}-lg`)},Tre=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},bre=Uu("Button",e=>{const{controlTmpOutline:t,paddingContentHorizontal:o}=e,s=Ho(e,{colorOutlineDefault:t,buttonPaddingHorizontal:o,buttonIconOnlyFontSize:e.fontSizeLG,buttonFontWeight:400});return[dre(s),yre(s),Sre(s),Cre(s),Tre(s),_re(s),ure(s),jB(e),cre(e)]});var Rre=globalThis&&globalThis.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function Ire(e){if(typeof e=="object"&&e){const t=e==null?void 0:e.delay;return{loading:!1,delay:!Number.isNaN(t)&&typeof t=="number"?t:0}}return{loading:!!e,delay:0}}const wre=(e,t)=>{var o,s;const{loading:c=!1,prefixCls:u,type:h="default",danger:f,shape:m="default",size:v,styles:_,disabled:y,className:T,rootClassName:A,children:I,icon:O,ghost:L=!1,block:x=!1,htmlType:N="button",classNames:D,style:U={}}=e,V=Rre(e,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","ghost","block","htmlType","classNames","style"]),{getPrefixCls:j,autoInsertSpaceInButton:B,direction:Y,button:ee}=b.useContext(wi),H=j("btn",u),[Z,J]=bre(H),X=b.useContext(Rw),ne=y??X,ie=b.useContext(VB),ae=b.useMemo(()=>Ire(c),[c]),[pe,ue]=b.useState(ae.loading),[Se,Ee]=b.useState(!1),se=Lu(t,b.createRef()),de=b.Children.count(I)===1&&!O&&!uT(h);b.useEffect(()=>{let Ge=null;ae.delay>0?Ge=setTimeout(()=>{Ge=null,ue(!0)},ae.delay):ue(ae.loading);function rt(){Ge&&(clearTimeout(Ge),Ge=null)}return rt},[ae]),b.useEffect(()=>{if(!se||!se.current||B===!1)return;const Ge=se.current.textContent;de&&VR(Ge)?Se||Ee(!0):Se&&Ee(!1)},[se]);const he=Ge=>{const{onClick:rt}=e;if(pe||ne){Ge.preventDefault();return}rt==null||rt(Ge)},xe=B!==!1,{compactSize:Me,compactItemClassnames:it}=Kne(H,Y),Be={large:"lg",small:"sm",middle:void 0},Tt=Iw(Ge=>{var rt,pt;return(pt=(rt=v??Me)!==null&&rt!==void 0?rt:ie)!==null&&pt!==void 0?pt:Ge}),It=Tt&&Be[Tt]||"",lt=pe?"loading":O,Mt=Hs(V,["navigate"]),ht=ot(H,J,{[`${H}-${m}`]:m!=="default"&&m,[`${H}-${h}`]:h,[`${H}-${It}`]:It,[`${H}-icon-only`]:!I&&I!==0&&!!lt,[`${H}-background-ghost`]:L&&!uT(h),[`${H}-loading`]:pe,[`${H}-two-chinese-chars`]:Se&&xe&&!pe,[`${H}-block`]:x,[`${H}-dangerous`]:!!f,[`${H}-rtl`]:Y==="rtl"},it,T,A,ee==null?void 0:ee.className),ze=Object.assign(Object.assign({},ee==null?void 0:ee.style),U),Ut=ot(D==null?void 0:D.icon,(o=ee==null?void 0:ee.classNames)===null||o===void 0?void 0:o.icon),Ft=Object.assign(Object.assign({},(_==null?void 0:_.icon)||{}),((s=ee==null?void 0:ee.styles)===null||s===void 0?void 0:s.icon)||{}),Vt=O&&!pe?Dt.createElement(FB,{prefixCls:H,className:Ut,style:Ft},O):Dt.createElement(Jne,{existIcon:!!O,prefixCls:H,loading:!!pe}),qe=I||I===0?rre(I,de&&xe):null;if(Mt.href!==void 0)return Z(Dt.createElement("a",Object.assign({},Mt,{className:ot(ht,{[`${H}-disabled`]:ne}),style:ze,onClick:he,ref:se}),Vt,qe));let Ke=Dt.createElement("button",Object.assign({},V,{type:N,className:ht,style:ze,onClick:he,disabled:ne,ref:se}),Vt,qe);return uT(h)||(Ke=Dt.createElement(zne,{disabled:!!pe},Ke)),Z(Ke)},Pw=b.forwardRef(wre);Pw.Group=ere;Pw.__ANT_BUTTON=!0;const ao=Pw,dT=()=>({height:0,opacity:0}),GU=e=>{const{scrollHeight:t}=e;return{height:t,opacity:1}},Ore=e=>({height:e?e.offsetHeight:0}),hT=(e,t)=>(t==null?void 0:t.deadline)===!0||t.propertyName==="height",Are=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:dT,onEnterStart:dT,onAppearActive:GU,onEnterActive:GU,onLeaveStart:Ore,onLeaveActive:dT,onAppearEnd:hT,onEnterEnd:hT,onLeaveEnd:hT,motionDeadline:500}},Nre=(e,t,o)=>o!==void 0?o:`${e}-${t}`,xre=Are;var HB=b.createContext(null),zU=[];function Pre(e,t){var o=b.useState(function(){if(!ga())return null;var I=document.createElement("div");return I}),s=De(o,1),c=s[0],u=b.useRef(!1),h=b.useContext(HB),f=b.useState(zU),m=De(f,2),v=m[0],_=m[1],y=h||(u.current?void 0:function(I){_(function(O){var L=[I].concat(dt(O));return L})});function T(){c.parentElement||document.body.appendChild(c),u.current=!0}function A(){var I;(I=c.parentElement)===null||I===void 0||I.removeChild(c),u.current=!1}return kr(function(){return e?h?h(T):T():A(),A},[e]),kr(function(){v.length&&(v.forEach(function(I){return I()}),_(zU))},[v]),[c,y]}var pT;function Dre(e){if(typeof document>"u")return 0;if(e||pT===void 0){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var o=document.createElement("div"),s=o.style;s.position="absolute",s.top="0",s.left="0",s.pointerEvents="none",s.visibility="hidden",s.width="200px",s.height="150px",s.overflow="hidden",o.appendChild(t),document.body.appendChild(o);var c=t.offsetWidth;o.style.overflow="scroll";var u=t.offsetWidth;c===u&&(u=o.clientWidth),document.body.removeChild(o),pT=c-u}return pT}function kre(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Lre="rc-util-locker-".concat(Date.now()),KU=0;function Mre(e){var t=!!e,o=b.useState(function(){return KU+=1,"".concat(Lre,"_").concat(KU)}),s=De(o,1),c=s[0];kr(function(){if(t){var u=Dre(),h=kre();Oh(`
html body {
  overflow-y: hidden;
  `.concat(h?"width: calc(100% - ".concat(u,"px);"):"",`
}`),c)}else jv(c);return function(){jv(c)}},[t,c])}var YU=!1;function Ure(e){return typeof e=="boolean"&&(YU=e),YU}var qU=function(t){return t===!1?!1:!ga()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},WB=b.forwardRef(function(e,t){var o=e.open,s=e.autoLock,c=e.getContainer;e.debug;var u=e.autoDestroy,h=u===void 0?!0:u,f=e.children,m=b.useState(o),v=De(m,2),_=v[0],y=v[1],T=_||o;b.useEffect(function(){(h||o)&&y(o)},[o,h]);var A=b.useState(function(){return qU(c)}),I=De(A,2),O=I[0],L=I[1];b.useEffect(function(){var Z=qU(c);L(Z??null)});var x=Pre(T&&!O),N=De(x,2),D=N[0],U=N[1],V=O??D;Mre(s&&o&&ga()&&(V===D||V===document.body));var j=null;if(f&&rm(f)&&t){var B=f;j=B.ref}var Y=pw(j,t);if(!T||!ga()||O===void 0)return null;var ee=V===!1||Ure(),H=f;return t&&(H=b.cloneElement(f,{ref:Y})),b.createElement(HB.Provider,{value:U},ee?H:Du.createPortal(H,V))});function Fre(){var e=ge({},_h);return e.useId}var XU=0;function Vre(e){var t=b.useState("ssr-id"),o=De(t,2),s=o[0],c=o[1],u=Fre(),h=u==null?void 0:u();return b.useEffect(function(){if(!u){var f=XU;XU+=1,c("rc_unique_".concat(f))}},[]),e||h||s}var GB=function(t){if(ga()&&window.document.documentElement){var o=Array.isArray(t)?t:[t],s=window.document.documentElement;return o.some(function(c){return c in s.style})}return!1},jre=function(t,o){if(!GB(t))return!1;var s=document.createElement("div"),c=s.style[t];return s.style[t]=o,s.style[t]!==c};function JU(e,t){return!Array.isArray(e)&&t!==void 0?jre(e,t):GB(e)}var Eu="RC_FORM_INTERNAL_HOOKS",Yn=function(){Eo(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Nh=b.createContext({getFieldValue:Yn,getFieldsValue:Yn,getFieldError:Yn,getFieldWarning:Yn,getFieldsError:Yn,isFieldsTouched:Yn,isFieldTouched:Yn,isFieldValidating:Yn,isFieldsValidating:Yn,resetFields:Yn,setFields:Yn,setFieldValue:Yn,setFieldsValue:Yn,validateFields:Yn,submit:Yn,getInternalHooks:function(){return Yn(),{dispatch:Yn,initEntityValue:Yn,registerField:Yn,useSubscribe:Yn,setInitialValues:Yn,destroyForm:Yn,setCallbacks:Yn,registerWatch:Yn,getFields:Yn,setValidateMessages:Yn,setPreserve:Yn,getInitialValue:Yn}}}),qv=b.createContext(null);function jR(e){return e==null?[]:Array.isArray(e)?e:[e]}function Bre(e){return e&&!!e._init}function _u(){return _u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},_u.apply(this,arguments)}function $re(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,zf(e,t)}function BR(e){return BR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},BR(e)}function zf(e,t){return zf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,c){return s.__proto__=c,s},zf(e,t)}function Hre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function iv(e,t,o){return Hre()?iv=Reflect.construct.bind():iv=function(c,u,h){var f=[null];f.push.apply(f,u);var m=Function.bind.apply(c,f),v=new m;return h&&zf(v,h.prototype),v},iv.apply(null,arguments)}function Wre(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function $R(e){var t=typeof Map=="function"?new Map:void 0;return $R=function(s){if(s===null||!Wre(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(s))return t.get(s);t.set(s,c)}function c(){return iv(s,arguments,BR(this).constructor)}return c.prototype=Object.create(s.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),zf(c,s)},$R(e)}var Gre=/%[sdj%]/g,zre=function(){};typeof process<"u"&&process.env;function HR(e){if(!e||!e.length)return null;var t={};return e.forEach(function(o){var s=o.field;t[s]=t[s]||[],t[s].push(o)}),t}function da(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),s=1;s<t;s++)o[s-1]=arguments[s];var c=0,u=o.length;if(typeof e=="function")return e.apply(null,o);if(typeof e=="string"){var h=e.replace(Gre,function(f){if(f==="%%")return"%";if(c>=u)return f;switch(f){case"%s":return String(o[c++]);case"%d":return Number(o[c++]);case"%j":try{return JSON.stringify(o[c++])}catch{return"[Circular]"}break;default:return f}});return h}return e}function Kre(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function gi(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||Kre(t)&&typeof e=="string"&&!e)}function Yre(e,t,o){var s=[],c=0,u=e.length;function h(f){s.push.apply(s,f||[]),c++,c===u&&o(s)}e.forEach(function(f){t(f,h)})}function QU(e,t,o){var s=0,c=e.length;function u(h){if(h&&h.length){o(h);return}var f=s;s=s+1,f<c?t(e[f],u):o([])}u([])}function qre(e){var t=[];return Object.keys(e).forEach(function(o){t.push.apply(t,e[o]||[])}),t}var ZU=function(e){$re(t,e);function t(o,s){var c;return c=e.call(this,"Async Validation Error")||this,c.errors=o,c.fields=s,c}return t}($R(Error));function Xre(e,t,o,s,c){if(t.first){var u=new Promise(function(T,A){var I=function(x){return s(x),x.length?A(new ZU(x,HR(x))):T(c)},O=qre(e);QU(O,o,I)});return u.catch(function(T){return T}),u}var h=t.firstFields===!0?Object.keys(e):t.firstFields||[],f=Object.keys(e),m=f.length,v=0,_=[],y=new Promise(function(T,A){var I=function(L){if(_.push.apply(_,L),v++,v===m)return s(_),_.length?A(new ZU(_,HR(_))):T(c)};f.length||(s(_),T(c)),f.forEach(function(O){var L=e[O];h.indexOf(O)!==-1?QU(L,o,I):Yre(L,o,I)})});return y.catch(function(T){return T}),y}function Jre(e){return!!(e&&e.message!==void 0)}function Qre(e,t){for(var o=e,s=0;s<t.length;s++){if(o==null)return o;o=o[t[s]]}return o}function e4(e,t){return function(o){var s;return e.fullFields?s=Qre(t,e.fullFields):s=t[o.field||e.fullField],Jre(o)?(o.field=o.field||e.fullField,o.fieldValue=s,o):{message:typeof o=="function"?o():o,fieldValue:s,field:o.field||e.fullField}}}function t4(e,t){if(t){for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];typeof s=="object"&&typeof e[o]=="object"?e[o]=_u({},e[o],s):e[o]=s}}return e}var zB=function(t,o,s,c,u,h){t.required&&(!s.hasOwnProperty(t.field)||gi(o,h||t.type))&&c.push(da(u.messages.required,t.fullField))},Zre=function(t,o,s,c,u){(/^\s+$/.test(o)||o==="")&&c.push(da(u.messages.whitespace,t.fullField))},Ag,eie=function(){if(Ag)return Ag;var e="[a-fA-F\\d:]",t=function(U){return U&&U.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},o="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",s="[a-fA-F\\d]{1,4}",c=(`
(?:
(?:`+s+":){7}(?:"+s+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+s+":){6}(?:"+o+"|:"+s+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+s+":){5}(?::"+o+"|(?::"+s+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+s+":){4}(?:(?::"+s+"){0,1}:"+o+"|(?::"+s+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+s+":){3}(?:(?::"+s+"){0,2}:"+o+"|(?::"+s+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+s+":){2}(?:(?::"+s+"){0,3}:"+o+"|(?::"+s+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+s+":){1}(?:(?::"+s+"){0,4}:"+o+"|(?::"+s+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+s+"){0,5}:"+o+"|(?::"+s+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),u=new RegExp("(?:^"+o+"$)|(?:^"+c+"$)"),h=new RegExp("^"+o+"$"),f=new RegExp("^"+c+"$"),m=function(U){return U&&U.exact?u:new RegExp("(?:"+t(U)+o+t(U)+")|(?:"+t(U)+c+t(U)+")","g")};m.v4=function(D){return D&&D.exact?h:new RegExp(""+t(D)+o+t(D),"g")},m.v6=function(D){return D&&D.exact?f:new RegExp(""+t(D)+c+t(D),"g")};var v="(?:(?:[a-z]+:)?//)",_="(?:\\S+(?::\\S*)?@)?",y=m.v4().source,T=m.v6().source,A="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",I="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",O="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",L="(?::\\d{2,5})?",x='(?:[/?#][^\\s"]*)?',N="(?:"+v+"|www\\.)"+_+"(?:localhost|"+y+"|"+T+"|"+A+I+O+")"+L+x;return Ag=new RegExp("(?:^"+N+"$)","i"),Ag},n4={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},af={integer:function(t){return af.number(t)&&parseInt(t,10)===t},float:function(t){return af.number(t)&&!af.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!af.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(n4.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(eie())},hex:function(t){return typeof t=="string"&&!!t.match(n4.hex)}},tie=function(t,o,s,c,u){if(t.required&&o===void 0){zB(t,o,s,c,u);return}var h=["integer","float","array","regexp","object","method","email","number","date","url","hex"],f=t.type;h.indexOf(f)>-1?af[f](o)||c.push(da(u.messages.types[f],t.fullField,t.type)):f&&typeof o!==t.type&&c.push(da(u.messages.types[f],t.fullField,t.type))},nie=function(t,o,s,c,u){var h=typeof t.len=="number",f=typeof t.min=="number",m=typeof t.max=="number",v=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_=o,y=null,T=typeof o=="number",A=typeof o=="string",I=Array.isArray(o);if(T?y="number":A?y="string":I&&(y="array"),!y)return!1;I&&(_=o.length),A&&(_=o.replace(v,"_").length),h?_!==t.len&&c.push(da(u.messages[y].len,t.fullField,t.len)):f&&!m&&_<t.min?c.push(da(u.messages[y].min,t.fullField,t.min)):m&&!f&&_>t.max?c.push(da(u.messages[y].max,t.fullField,t.max)):f&&m&&(_<t.min||_>t.max)&&c.push(da(u.messages[y].range,t.fullField,t.min,t.max))},Ud="enum",rie=function(t,o,s,c,u){t[Ud]=Array.isArray(t[Ud])?t[Ud]:[],t[Ud].indexOf(o)===-1&&c.push(da(u.messages[Ud],t.fullField,t[Ud].join(", ")))},iie=function(t,o,s,c,u){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(o)||c.push(da(u.messages.pattern.mismatch,t.fullField,o,t.pattern));else if(typeof t.pattern=="string"){var h=new RegExp(t.pattern);h.test(o)||c.push(da(u.messages.pattern.mismatch,t.fullField,o,t.pattern))}}},dn={required:zB,whitespace:Zre,type:tie,range:nie,enum:rie,pattern:iie},oie=function(t,o,s,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(gi(o,"string")&&!t.required)return s();dn.required(t,o,c,h,u,"string"),gi(o,"string")||(dn.type(t,o,c,h,u),dn.range(t,o,c,h,u),dn.pattern(t,o,c,h,u),t.whitespace===!0&&dn.whitespace(t,o,c,h,u))}s(h)},aie=function(t,o,s,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(gi(o)&&!t.required)return s();dn.required(t,o,c,h,u),o!==void 0&&dn.type(t,o,c,h,u)}s(h)},sie=function(t,o,s,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(o===""&&(o=void 0),gi(o)&&!t.required)return s();dn.required(t,o,c,h,u),o!==void 0&&(dn.type(t,o,c,h,u),dn.range(t,o,c,h,u))}s(h)},cie=function(t,o,s,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(gi(o)&&!t.required)return s();dn.required(t,o,c,h,u),o!==void 0&&dn.type(t,o,c,h,u)}s(h)},lie=function(t,o,s,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(gi(o)&&!t.required)return s();dn.required(t,o,c,h,u),gi(o)||dn.type(t,o,c,h,u)}s(h)},uie=function(t,o,s,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(gi(o)&&!t.required)return s();dn.required(t,o,c,h,u),o!==void 0&&(dn.type(t,o,c,h,u),dn.range(t,o,c,h,u))}s(h)},die=function(t,o,s,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(gi(o)&&!t.required)return s();dn.required(t,o,c,h,u),o!==void 0&&(dn.type(t,o,c,h,u),dn.range(t,o,c,h,u))}s(h)},hie=function(t,o,s,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(o==null&&!t.required)return s();dn.required(t,o,c,h,u,"array"),o!=null&&(dn.type(t,o,c,h,u),dn.range(t,o,c,h,u))}s(h)},pie=function(t,o,s,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(gi(o)&&!t.required)return s();dn.required(t,o,c,h,u),o!==void 0&&dn.type(t,o,c,h,u)}s(h)},fie="enum",mie=function(t,o,s,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(gi(o)&&!t.required)return s();dn.required(t,o,c,h,u),o!==void 0&&dn[fie](t,o,c,h,u)}s(h)},gie=function(t,o,s,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(gi(o,"string")&&!t.required)return s();dn.required(t,o,c,h,u),gi(o,"string")||dn.pattern(t,o,c,h,u)}s(h)},vie=function(t,o,s,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(gi(o,"date")&&!t.required)return s();if(dn.required(t,o,c,h,u),!gi(o,"date")){var m;o instanceof Date?m=o:m=new Date(o),dn.type(t,m,c,h,u),m&&dn.range(t,m.getTime(),c,h,u)}}s(h)},Eie=function(t,o,s,c,u){var h=[],f=Array.isArray(o)?"array":typeof o;dn.required(t,o,c,h,u,f),s(h)},fT=function(t,o,s,c,u){var h=t.type,f=[],m=t.required||!t.required&&c.hasOwnProperty(t.field);if(m){if(gi(o,h)&&!t.required)return s();dn.required(t,o,c,f,u,h),gi(o,h)||dn.type(t,o,c,f,u)}s(f)},_ie=function(t,o,s,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(gi(o)&&!t.required)return s();dn.required(t,o,c,h,u)}s(h)},Sf={string:oie,method:aie,number:sie,boolean:cie,regexp:lie,integer:uie,float:die,array:hie,object:pie,enum:mie,pattern:gie,date:vie,url:fT,hex:fT,email:fT,required:Eie,any:_ie};function WR(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var GR=WR(),lm=function(){function e(o){this.rules=null,this._messages=GR,this.define(o)}var t=e.prototype;return t.define=function(s){var c=this;if(!s)throw new Error("Cannot configure a schema with no rules");if(typeof s!="object"||Array.isArray(s))throw new Error("Rules must be an object");this.rules={},Object.keys(s).forEach(function(u){var h=s[u];c.rules[u]=Array.isArray(h)?h:[h]})},t.messages=function(s){return s&&(this._messages=t4(WR(),s)),this._messages},t.validate=function(s,c,u){var h=this;c===void 0&&(c={}),u===void 0&&(u=function(){});var f=s,m=c,v=u;if(typeof m=="function"&&(v=m,m={}),!this.rules||Object.keys(this.rules).length===0)return v&&v(null,f),Promise.resolve(f);function _(O){var L=[],x={};function N(U){if(Array.isArray(U)){var V;L=(V=L).concat.apply(V,U)}else L.push(U)}for(var D=0;D<O.length;D++)N(O[D]);L.length?(x=HR(L),v(L,x)):v(null,f)}if(m.messages){var y=this.messages();y===GR&&(y=WR()),t4(y,m.messages),m.messages=y}else m.messages=this.messages();var T={},A=m.keys||Object.keys(this.rules);A.forEach(function(O){var L=h.rules[O],x=f[O];L.forEach(function(N){var D=N;typeof D.transform=="function"&&(f===s&&(f=_u({},f)),x=f[O]=D.transform(x)),typeof D=="function"?D={validator:D}:D=_u({},D),D.validator=h.getValidationMethod(D),D.validator&&(D.field=O,D.fullField=D.fullField||O,D.type=h.getType(D),T[O]=T[O]||[],T[O].push({rule:D,value:x,source:f,field:O}))})});var I={};return Xre(T,m,function(O,L){var x=O.rule,N=(x.type==="object"||x.type==="array")&&(typeof x.fields=="object"||typeof x.defaultField=="object");N=N&&(x.required||!x.required&&O.value),x.field=O.field;function D(j,B){return _u({},B,{fullField:x.fullField+"."+j,fullFields:x.fullFields?[].concat(x.fullFields,[j]):[j]})}function U(j){j===void 0&&(j=[]);var B=Array.isArray(j)?j:[j];!m.suppressWarning&&B.length&&e.warning("async-validator:",B),B.length&&x.message!==void 0&&(B=[].concat(x.message));var Y=B.map(e4(x,f));if(m.first&&Y.length)return I[x.field]=1,L(Y);if(!N)L(Y);else{if(x.required&&!O.value)return x.message!==void 0?Y=[].concat(x.message).map(e4(x,f)):m.error&&(Y=[m.error(x,da(m.messages.required,x.field))]),L(Y);var ee={};x.defaultField&&Object.keys(O.value).map(function(J){ee[J]=x.defaultField}),ee=_u({},ee,O.rule.fields);var H={};Object.keys(ee).forEach(function(J){var X=ee[J],ne=Array.isArray(X)?X:[X];H[J]=ne.map(D.bind(null,J))});var Z=new e(H);Z.messages(m.messages),O.rule.options&&(O.rule.options.messages=m.messages,O.rule.options.error=m.error),Z.validate(O.value,O.rule.options||m,function(J){var X=[];Y&&Y.length&&X.push.apply(X,Y),J&&J.length&&X.push.apply(X,J),L(X.length?X:null)})}}var V;if(x.asyncValidator)V=x.asyncValidator(x,O.value,U,O.source,m);else if(x.validator){try{V=x.validator(x,O.value,U,O.source,m)}catch(j){console.error==null||console.error(j),m.suppressValidatorError||setTimeout(function(){throw j},0),U(j.message)}V===!0?U():V===!1?U(typeof x.message=="function"?x.message(x.fullField||x.field):x.message||(x.fullField||x.field)+" fails"):V instanceof Array?U(V):V instanceof Error&&U(V.message)}V&&V.then&&V.then(function(){return U()},function(j){return U(j)})},function(O){_(O)},f)},t.getType=function(s){if(s.type===void 0&&s.pattern instanceof RegExp&&(s.type="pattern"),typeof s.validator!="function"&&s.type&&!Sf.hasOwnProperty(s.type))throw new Error(da("Unknown rule type %s",s.type));return s.type||"string"},t.getValidationMethod=function(s){if(typeof s.validator=="function")return s.validator;var c=Object.keys(s),u=c.indexOf("message");return u!==-1&&c.splice(u,1),c.length===1&&c[0]==="required"?Sf.required:Sf[this.getType(s)]||void 0},e}();lm.register=function(t,o){if(typeof o!="function")throw new Error("Cannot register a validator by type, validator is not a function");Sf[t]=o};lm.warning=zre;lm.messages=GR;lm.validators=Sf;var sa="'${name}' is not a valid ${type}",KB={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:sa,method:sa,array:sa,object:sa,number:sa,date:sa,boolean:sa,integer:sa,float:sa,regexp:sa,email:sa,url:sa,hex:sa},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},r4=lm;function Sie(e,t){return e.replace(/\$\{\w+\}/g,function(o){var s=o.slice(2,-1);return t[s]})}var i4="CODE_LOGIC_ERROR";function zR(e,t,o,s,c){return KR.apply(this,arguments)}function KR(){return KR=Bh(va().mark(function e(t,o,s,c,u){var h,f,m,v,_,y,T,A,I;return va().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return h=ge({},s),delete h.ruleIndex,r4.warning=function(){},h.validator&&(f=h.validator,h.validator=function(){try{return f.apply(void 0,arguments)}catch(x){return console.error(x),Promise.reject(i4)}}),m=null,h&&h.type==="array"&&h.defaultField&&(m=h.defaultField,delete h.defaultField),v=new r4(Qe({},t,[h])),_=sh(KB,c.validateMessages),v.messages(_),y=[],L.prev=10,L.next=13,Promise.resolve(v.validate(Qe({},t,o),ge({},c)));case 13:L.next=18;break;case 15:L.prev=15,L.t0=L.catch(10),L.t0.errors&&(y=L.t0.errors.map(function(x,N){var D=x.message,U=D===i4?_.default:D;return b.isValidElement(U)?b.cloneElement(U,{key:"error_".concat(N)}):U}));case 18:if(!(!y.length&&m)){L.next=23;break}return L.next=21,Promise.all(o.map(function(x,N){return zR("".concat(t,".").concat(N),x,m,c,u)}));case 21:return T=L.sent,L.abrupt("return",T.reduce(function(x,N){return[].concat(dt(x),dt(N))},[]));case 23:return A=ge(ge({},s),{},{name:t,enum:(s.enum||[]).join(", ")},u),I=y.map(function(x){return typeof x=="string"?Sie(x,A):x}),L.abrupt("return",I);case 26:case"end":return L.stop()}},e,null,[[10,15]])})),KR.apply(this,arguments)}function yie(e,t,o,s,c,u){var h=e.join("."),f=o.map(function(_,y){var T=_.validator,A=ge(ge({},_),{},{ruleIndex:y});return T&&(A.validator=function(I,O,L){var x=!1,N=function(){for(var V=arguments.length,j=new Array(V),B=0;B<V;B++)j[B]=arguments[B];Promise.resolve().then(function(){Eo(!x,"Your validator function has already return a promise. `callback` will be ignored."),x||L.apply(void 0,j)})},D=T(I,O,N);x=D&&typeof D.then=="function"&&typeof D.catch=="function",Eo(x,"`callback` is deprecated. Please return a promise instead."),x&&D.then(function(){L()}).catch(function(U){L(U||" ")})}),A}).sort(function(_,y){var T=_.warningOnly,A=_.ruleIndex,I=y.warningOnly,O=y.ruleIndex;return!!T==!!I?A-O:T?1:-1}),m;if(c===!0)m=new Promise(function(){var _=Bh(va().mark(function y(T,A){var I,O,L;return va().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:I=0;case 1:if(!(I<f.length)){N.next=12;break}return O=f[I],N.next=5,zR(h,t,O,s,u);case 5:if(L=N.sent,!L.length){N.next=9;break}return A([{errors:L,rule:O}]),N.abrupt("return");case 9:I+=1,N.next=1;break;case 12:T([]);case 13:case"end":return N.stop()}},y)}));return function(y,T){return _.apply(this,arguments)}}());else{var v=f.map(function(_){return zR(h,t,_,s,u).then(function(y){return{errors:y,rule:_}})});m=(c?Tie(v):Cie(v)).then(function(_){return Promise.reject(_)})}return m.catch(function(_){return _}),m}function Cie(e){return YR.apply(this,arguments)}function YR(){return YR=Bh(va().mark(function e(t){return va().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Promise.all(t).then(function(c){var u,h=(u=[]).concat.apply(u,dt(c));return h}));case 1:case"end":return s.stop()}},e)})),YR.apply(this,arguments)}function Tie(e){return qR.apply(this,arguments)}function qR(){return qR=Bh(va().mark(function e(t){var o;return va().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=0,c.abrupt("return",new Promise(function(u){t.forEach(function(h){h.then(function(f){f.errors.length&&u([f]),o+=1,o===t.length&&u([])})})}));case 2:case"end":return c.stop()}},e)})),qR.apply(this,arguments)}function Br(e){return jR(e)}function o4(e,t){var o={};return t.forEach(function(s){var c=ps(e,s);o=ls(o,s,c)}),o}function yf(e,t){return e&&e.some(function(o){return YB(o,t)})}function YB(e,t){return!e||!t||e.length!==t.length?!1:e.every(function(o,s){return t[s]===o})}function bie(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||An(e)!=="object"||An(t)!=="object")return!1;var o=Object.keys(e),s=Object.keys(t),c=new Set([].concat(o,s));return dt(c).every(function(u){var h=e[u],f=t[u];return typeof h=="function"&&typeof f=="function"?!0:h===f})}function Rie(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&An(t.target)==="object"&&e in t.target?t.target[e]:t}function a4(e,t,o){var s=e.length;if(t<0||t>=s||o<0||o>=s)return e;var c=e[t],u=t-o;return u>0?[].concat(dt(e.slice(0,o)),[c],dt(e.slice(o,t)),dt(e.slice(t+1,s))):u<0?[].concat(dt(e.slice(0,t)),dt(e.slice(t+1,o+1)),[c],dt(e.slice(o+1,s))):e}var Iie=["name"],Da=[];function s4(e,t,o,s,c,u){return typeof e=="function"?e(t,o,"source"in u?{source:u.source}:{}):s!==c}var Dw=function(e){Uh(o,e);var t=Fh(o);function o(s){var c;if(Wa(this,o),c=t.call(this,s),c.state={resetCount:0},c.cancelRegisterFunc=null,c.mounted=!1,c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.prevValidating=void 0,c.errors=Da,c.warnings=Da,c.cancelRegister=function(){var m=c.props,v=m.preserve,_=m.isListField,y=m.name;c.cancelRegisterFunc&&c.cancelRegisterFunc(_,v,Br(y)),c.cancelRegisterFunc=null},c.getNamePath=function(){var m=c.props,v=m.name,_=m.fieldContext,y=_.prefixName,T=y===void 0?[]:y;return v!==void 0?[].concat(dt(T),dt(v)):[]},c.getRules=function(){var m=c.props,v=m.rules,_=v===void 0?[]:v,y=m.fieldContext;return _.map(function(T){return typeof T=="function"?T(y):T})},c.refresh=function(){c.mounted&&c.setState(function(m){var v=m.resetCount;return{resetCount:v+1}})},c.triggerMetaEvent=function(m){var v=c.props.onMetaChange;v==null||v(ge(ge({},c.getMeta()),{},{destroy:m}))},c.onStoreChange=function(m,v,_){var y=c.props,T=y.shouldUpdate,A=y.dependencies,I=A===void 0?[]:A,O=y.onReset,L=_.store,x=c.getNamePath(),N=c.getValue(m),D=c.getValue(L),U=v&&yf(v,x);switch(_.type==="valueUpdate"&&_.source==="external"&&N!==D&&(c.touched=!0,c.dirty=!0,c.validatePromise=null,c.errors=Da,c.warnings=Da,c.triggerMetaEvent()),_.type){case"reset":if(!v||U){c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.errors=Da,c.warnings=Da,c.triggerMetaEvent(),O==null||O(),c.refresh();return}break;case"remove":{if(T){c.reRender();return}break}case"setField":{if(U){var V=_.data;"touched"in V&&(c.touched=V.touched),"validating"in V&&!("originRCField"in V)&&(c.validatePromise=V.validating?Promise.resolve([]):null),"errors"in V&&(c.errors=V.errors||Da),"warnings"in V&&(c.warnings=V.warnings||Da),c.dirty=!0,c.triggerMetaEvent(),c.reRender();return}if(T&&!x.length&&s4(T,m,L,N,D,_)){c.reRender();return}break}case"dependenciesUpdate":{var j=I.map(Br);if(j.some(function(B){return yf(_.relatedFields,B)})){c.reRender();return}break}default:if(U||(!I.length||x.length||T)&&s4(T,m,L,N,D,_)){c.reRender();return}break}T===!0&&c.reRender()},c.validateRules=function(m){var v=c.getNamePath(),_=c.getValue(),y=m||{},T=y.triggerName,A=y.validateOnly,I=A===void 0?!1:A,O=Promise.resolve().then(function(){if(!c.mounted)return[];var L=c.props,x=L.validateFirst,N=x===void 0?!1:x,D=L.messageVariables,U=c.getRules();T&&(U=U.filter(function(j){return j}).filter(function(j){var B=j.validateTrigger;if(!B)return!0;var Y=jR(B);return Y.includes(T)}));var V=yie(v,_,U,m,N,D);return V.catch(function(j){return j}).then(function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Da;if(c.validatePromise===O){var B;c.validatePromise=null;var Y=[],ee=[];(B=j.forEach)===null||B===void 0||B.call(j,function(H){var Z=H.rule.warningOnly,J=H.errors,X=J===void 0?Da:J;Z?ee.push.apply(ee,dt(X)):Y.push.apply(Y,dt(X))}),c.errors=Y,c.warnings=ee,c.triggerMetaEvent(),c.reRender()}}),V});return I||(c.validatePromise=O,c.dirty=!0,c.errors=Da,c.warnings=Da,c.triggerMetaEvent(),c.reRender()),O},c.isFieldValidating=function(){return!!c.validatePromise},c.isFieldTouched=function(){return c.touched},c.isFieldDirty=function(){if(c.dirty||c.props.initialValue!==void 0)return!0;var m=c.props.fieldContext,v=m.getInternalHooks(Eu),_=v.getInitialValue;return _(c.getNamePath())!==void 0},c.getErrors=function(){return c.errors},c.getWarnings=function(){return c.warnings},c.isListField=function(){return c.props.isListField},c.isList=function(){return c.props.isList},c.isPreserve=function(){return c.props.preserve},c.getMeta=function(){c.prevValidating=c.isFieldValidating();var m={touched:c.isFieldTouched(),validating:c.prevValidating,errors:c.errors,warnings:c.warnings,name:c.getNamePath(),validated:c.validatePromise===null};return m},c.getOnlyChild=function(m){if(typeof m=="function"){var v=c.getMeta();return ge(ge({},c.getOnlyChild(m(c.getControlled(),v,c.props.fieldContext))),{},{isFunction:!0})}var _=Ol(m);return _.length!==1||!b.isValidElement(_[0])?{child:_,isFunction:!1}:{child:_[0],isFunction:!1}},c.getValue=function(m){var v=c.props.fieldContext.getFieldsValue,_=c.getNamePath();return ps(m||v(!0),_)},c.getControlled=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=c.props,_=v.trigger,y=v.validateTrigger,T=v.getValueFromEvent,A=v.normalize,I=v.valuePropName,O=v.getValueProps,L=v.fieldContext,x=y!==void 0?y:L.validateTrigger,N=c.getNamePath(),D=L.getInternalHooks,U=L.getFieldsValue,V=D(Eu),j=V.dispatch,B=c.getValue(),Y=O||function(J){return Qe({},I,J)},ee=m[_],H=ge(ge({},m),Y(B));H[_]=function(){c.touched=!0,c.dirty=!0,c.triggerMetaEvent();for(var J,X=arguments.length,ne=new Array(X),ie=0;ie<X;ie++)ne[ie]=arguments[ie];T?J=T.apply(void 0,ne):J=Rie.apply(void 0,[I].concat(ne)),A&&(J=A(J,B,U(!0))),j({type:"updateValue",namePath:N,value:J}),ee&&ee.apply(void 0,ne)};var Z=jR(x||[]);return Z.forEach(function(J){var X=H[J];H[J]=function(){X&&X.apply(void 0,arguments);var ne=c.props.rules;ne&&ne.length&&j({type:"validateField",namePath:N,triggerName:J})}}),H},s.fieldContext){var u=s.fieldContext.getInternalHooks,h=u(Eu),f=h.initEntityValue;f(Mv(c))}return c}return Ga(o,[{key:"componentDidMount",value:function(){var c=this.props,u=c.shouldUpdate,h=c.fieldContext;if(this.mounted=!0,h){var f=h.getInternalHooks,m=f(Eu),v=m.registerField;this.cancelRegisterFunc=v(this)}u===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var c=this.state.resetCount,u=this.props.children,h=this.getOnlyChild(u),f=h.child,m=h.isFunction,v;return m?v=f:b.isValidElement(f)?v=b.cloneElement(f,this.getControlled(f.props)):(Eo(!f,"`children` of Field is not validate ReactElement."),v=f),b.createElement(b.Fragment,{key:c},v)}}]),o}(b.Component);Dw.contextType=Nh;Dw.defaultProps={trigger:"onChange",valuePropName:"value"};function qB(e){var t=e.name,o=fn(e,Iie),s=b.useContext(Nh),c=b.useContext(qv),u=t!==void 0?Br(t):void 0,h="keep";return o.isListField||(h="_".concat((u||[]).join("_"))),b.createElement(Dw,Ve({key:h,name:u,isListField:!!c},o,{fieldContext:s}))}var wie=function(t){var o=t.name,s=t.initialValue,c=t.children,u=t.rules,h=t.validateTrigger,f=t.isListField,m=b.useContext(Nh),v=b.useContext(qv),_=b.useRef({keys:[],id:0}),y=_.current,T=b.useMemo(function(){var L=Br(m.prefixName)||[];return[].concat(dt(L),dt(Br(o)))},[m.prefixName,o]),A=b.useMemo(function(){return ge(ge({},m),{},{prefixName:T})},[m,T]),I=b.useMemo(function(){return{getKey:function(x){var N=T.length,D=x[N];return[y.keys[D],x.slice(N+1)]}}},[T]);if(typeof c!="function")return Eo(!1,"Form.List only accepts function as children."),null;var O=function(x,N,D){var U=D.source;return U==="internal"?!1:x!==N};return b.createElement(qv.Provider,{value:I},b.createElement(Nh.Provider,{value:A},b.createElement(qB,{name:[],shouldUpdate:O,rules:u,validateTrigger:h,initialValue:s,isList:!0,isListField:f??!!v},function(L,x){var N=L.value,D=N===void 0?[]:N,U=L.onChange,V=m.getFieldValue,j=function(){var H=V(T||[]);return H||[]},B={add:function(H,Z){var J=j();Z>=0&&Z<=J.length?(y.keys=[].concat(dt(y.keys.slice(0,Z)),[y.id],dt(y.keys.slice(Z))),U([].concat(dt(J.slice(0,Z)),[H],dt(J.slice(Z))))):(y.keys=[].concat(dt(y.keys),[y.id]),U([].concat(dt(J),[H]))),y.id+=1},remove:function(H){var Z=j(),J=new Set(Array.isArray(H)?H:[H]);J.size<=0||(y.keys=y.keys.filter(function(X,ne){return!J.has(ne)}),U(Z.filter(function(X,ne){return!J.has(ne)})))},move:function(H,Z){if(H!==Z){var J=j();H<0||H>=J.length||Z<0||Z>=J.length||(y.keys=a4(y.keys,H,Z),U(a4(J,H,Z)))}}},Y=D||[];return Array.isArray(Y)||(Y=[]),c(Y.map(function(ee,H){var Z=y.keys[H];return Z===void 0&&(y.keys[H]=y.id,Z=y.keys[H],y.id+=1),{name:H,key:Z,isListField:!0}}),B,x)})))};function Oie(e){var t=!1,o=e.length,s=[];return e.length?new Promise(function(c,u){e.forEach(function(h,f){h.catch(function(m){return t=!0,m}).then(function(m){o-=1,s[f]=m,!(o>0)&&(t&&u(s),c(s))})})}):Promise.resolve([])}var XB="__@field_split__";function mT(e){return e.map(function(t){return"".concat(An(t),":").concat(t)}).join(XB)}var Fd=function(){function e(){Wa(this,e),this.kvs=new Map}return Ga(e,[{key:"set",value:function(o,s){this.kvs.set(mT(o),s)}},{key:"get",value:function(o){return this.kvs.get(mT(o))}},{key:"update",value:function(o,s){var c=this.get(o),u=s(c);u?this.set(o,u):this.delete(o)}},{key:"delete",value:function(o){this.kvs.delete(mT(o))}},{key:"map",value:function(o){return dt(this.kvs.entries()).map(function(s){var c=De(s,2),u=c[0],h=c[1],f=u.split(XB);return o({key:f.map(function(m){var v=m.match(/^([^:]*):(.*)$/),_=De(v,3),y=_[1],T=_[2];return y==="number"?Number(T):T}),value:h})})}},{key:"toJSON",value:function(){var o={};return this.map(function(s){var c=s.key,u=s.value;return o[c.join(".")]=u,null}),o}}]),e}(),Aie=["name"],Nie=Ga(function e(t){var o=this;Wa(this,e),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:o.getFieldValue,getFieldsValue:o.getFieldsValue,getFieldError:o.getFieldError,getFieldWarning:o.getFieldWarning,getFieldsError:o.getFieldsError,isFieldsTouched:o.isFieldsTouched,isFieldTouched:o.isFieldTouched,isFieldValidating:o.isFieldValidating,isFieldsValidating:o.isFieldsValidating,resetFields:o.resetFields,setFields:o.setFields,setFieldValue:o.setFieldValue,setFieldsValue:o.setFieldsValue,validateFields:o.validateFields,submit:o.submit,_init:!0,getInternalHooks:o.getInternalHooks}},this.getInternalHooks=function(s){return s===Eu?(o.formHooked=!0,{dispatch:o.dispatch,initEntityValue:o.initEntityValue,registerField:o.registerField,useSubscribe:o.useSubscribe,setInitialValues:o.setInitialValues,destroyForm:o.destroyForm,setCallbacks:o.setCallbacks,setValidateMessages:o.setValidateMessages,getFields:o.getFields,setPreserve:o.setPreserve,getInitialValue:o.getInitialValue,registerWatch:o.registerWatch}):(Eo(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(s){o.subscribable=s},this.prevWithoutPreserves=null,this.setInitialValues=function(s,c){if(o.initialValues=s||{},c){var u,h=sh(s,o.store);(u=o.prevWithoutPreserves)===null||u===void 0||u.map(function(f){var m=f.key;h=ls(h,m,ps(s,m))}),o.prevWithoutPreserves=null,o.updateStore(h)}},this.destroyForm=function(){var s=new Fd;o.getFieldEntities(!0).forEach(function(c){o.isMergedPreserve(c.isPreserve())||s.set(c.getNamePath(),!0)}),o.prevWithoutPreserves=s},this.getInitialValue=function(s){var c=ps(o.initialValues,s);return s.length?sh(c):c},this.setCallbacks=function(s){o.callbacks=s},this.setValidateMessages=function(s){o.validateMessages=s},this.setPreserve=function(s){o.preserve=s},this.watchList=[],this.registerWatch=function(s){return o.watchList.push(s),function(){o.watchList=o.watchList.filter(function(c){return c!==s})}},this.notifyWatch=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(o.watchList.length){var c=o.getFieldsValue(),u=o.getFieldsValue(!0);o.watchList.forEach(function(h){h(c,u,s)})}},this.timeoutId=null,this.warningUnhooked=function(){},this.updateStore=function(s){o.store=s},this.getFieldEntities=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return s?o.fieldEntities.filter(function(c){return c.getNamePath().length}):o.fieldEntities},this.getFieldsMap=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,c=new Fd;return o.getFieldEntities(s).forEach(function(u){var h=u.getNamePath();c.set(h,u)}),c},this.getFieldEntitiesForNamePathList=function(s){if(!s)return o.getFieldEntities(!0);var c=o.getFieldsMap(!0);return s.map(function(u){var h=Br(u);return c.get(h)||{INVALIDATE_NAME_PATH:Br(u)}})},this.getFieldsValue=function(s,c){if(o.warningUnhooked(),s===!0&&!c)return o.store;var u=o.getFieldEntitiesForNamePathList(Array.isArray(s)?s:null),h=[];return u.forEach(function(f){var m,v="INVALIDATE_NAME_PATH"in f?f.INVALIDATE_NAME_PATH:f.getNamePath();if(!(!s&&(!((m=f.isListField)===null||m===void 0)&&m.call(f))))if(!c)h.push(v);else{var _="getMeta"in f?f.getMeta():null;c(_)&&h.push(v)}}),o4(o.store,h.map(Br))},this.getFieldValue=function(s){o.warningUnhooked();var c=Br(s);return ps(o.store,c)},this.getFieldsError=function(s){o.warningUnhooked();var c=o.getFieldEntitiesForNamePathList(s);return c.map(function(u,h){return u&&!("INVALIDATE_NAME_PATH"in u)?{name:u.getNamePath(),errors:u.getErrors(),warnings:u.getWarnings()}:{name:Br(s[h]),errors:[],warnings:[]}})},this.getFieldError=function(s){o.warningUnhooked();var c=Br(s),u=o.getFieldsError([c])[0];return u.errors},this.getFieldWarning=function(s){o.warningUnhooked();var c=Br(s),u=o.getFieldsError([c])[0];return u.warnings},this.isFieldsTouched=function(){o.warningUnhooked();for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];var h=c[0],f=c[1],m,v=!1;c.length===0?m=null:c.length===1?Array.isArray(h)?(m=h.map(Br),v=!1):(m=null,v=h):(m=h.map(Br),v=f);var _=o.getFieldEntities(!0),y=function(L){return L.isFieldTouched()};if(!m)return v?_.every(y):_.some(y);var T=new Fd;m.forEach(function(O){T.set(O,[])}),_.forEach(function(O){var L=O.getNamePath();m.forEach(function(x){x.every(function(N,D){return L[D]===N})&&T.update(x,function(N){return[].concat(dt(N),[O])})})});var A=function(L){return L.some(y)},I=T.map(function(O){var L=O.value;return L});return v?I.every(A):I.some(A)},this.isFieldTouched=function(s){return o.warningUnhooked(),o.isFieldsTouched([s])},this.isFieldsValidating=function(s){o.warningUnhooked();var c=o.getFieldEntities();if(!s)return c.some(function(h){return h.isFieldValidating()});var u=s.map(Br);return c.some(function(h){var f=h.getNamePath();return yf(u,f)&&h.isFieldValidating()})},this.isFieldValidating=function(s){return o.warningUnhooked(),o.isFieldsValidating([s])},this.resetWithFieldInitialValue=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=new Fd,u=o.getFieldEntities(!0);u.forEach(function(m){var v=m.props.initialValue,_=m.getNamePath();if(v!==void 0){var y=c.get(_)||new Set;y.add({entity:m,value:v}),c.set(_,y)}});var h=function(v){v.forEach(function(_){var y=_.props.initialValue;if(y!==void 0){var T=_.getNamePath(),A=o.getInitialValue(T);if(A!==void 0)Eo(!1,"Form already set 'initialValues' with path '".concat(T.join("."),"'. Field can not overwrite it."));else{var I=c.get(T);if(I&&I.size>1)Eo(!1,"Multiple Field with path '".concat(T.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(I){var O=o.getFieldValue(T);(!s.skipExist||O===void 0)&&o.updateStore(ls(o.store,T,dt(I)[0].value))}}}})},f;s.entities?f=s.entities:s.namePathList?(f=[],s.namePathList.forEach(function(m){var v=c.get(m);if(v){var _;(_=f).push.apply(_,dt(dt(v).map(function(y){return y.entity})))}})):f=u,h(f)},this.resetFields=function(s){o.warningUnhooked();var c=o.store;if(!s){o.updateStore(sh(o.initialValues)),o.resetWithFieldInitialValue(),o.notifyObservers(c,null,{type:"reset"}),o.notifyWatch();return}var u=s.map(Br);u.forEach(function(h){var f=o.getInitialValue(h);o.updateStore(ls(o.store,h,f))}),o.resetWithFieldInitialValue({namePathList:u}),o.notifyObservers(c,u,{type:"reset"}),o.notifyWatch(u)},this.setFields=function(s){o.warningUnhooked();var c=o.store,u=[];s.forEach(function(h){var f=h.name,m=fn(h,Aie),v=Br(f);u.push(v),"value"in m&&o.updateStore(ls(o.store,v,m.value)),o.notifyObservers(c,[v],{type:"setField",data:h})}),o.notifyWatch(u)},this.getFields=function(){var s=o.getFieldEntities(!0),c=s.map(function(u){var h=u.getNamePath(),f=u.getMeta(),m=ge(ge({},f),{},{name:h,value:o.getFieldValue(h)});return Object.defineProperty(m,"originRCField",{value:!0}),m});return c},this.initEntityValue=function(s){var c=s.props.initialValue;if(c!==void 0){var u=s.getNamePath(),h=ps(o.store,u);h===void 0&&o.updateStore(ls(o.store,u,c))}},this.isMergedPreserve=function(s){var c=s!==void 0?s:o.preserve;return c??!0},this.registerField=function(s){o.fieldEntities.push(s);var c=s.getNamePath();if(o.notifyWatch([c]),s.props.initialValue!==void 0){var u=o.store;o.resetWithFieldInitialValue({entities:[s],skipExist:!0}),o.notifyObservers(u,[s.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(h,f){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(o.fieldEntities=o.fieldEntities.filter(function(y){return y!==s}),!o.isMergedPreserve(f)&&(!h||m.length>1)){var v=h?void 0:o.getInitialValue(c);if(c.length&&o.getFieldValue(c)!==v&&o.fieldEntities.every(function(y){return!YB(y.getNamePath(),c)})){var _=o.store;o.updateStore(ls(_,c,v,!0)),o.notifyObservers(_,[c],{type:"remove"}),o.triggerDependenciesUpdate(_,c)}}o.notifyWatch([c])}},this.dispatch=function(s){switch(s.type){case"updateValue":{var c=s.namePath,u=s.value;o.updateValue(c,u);break}case"validateField":{var h=s.namePath,f=s.triggerName;o.validateFields([h],{triggerName:f});break}}},this.notifyObservers=function(s,c,u){if(o.subscribable){var h=ge(ge({},u),{},{store:o.getFieldsValue(!0)});o.getFieldEntities().forEach(function(f){var m=f.onStoreChange;m(s,c,h)})}else o.forceRootUpdate()},this.triggerDependenciesUpdate=function(s,c){var u=o.getDependencyChildrenFields(c);return u.length&&o.validateFields(u),o.notifyObservers(s,u,{type:"dependenciesUpdate",relatedFields:[c].concat(dt(u))}),u},this.updateValue=function(s,c){var u=Br(s),h=o.store;o.updateStore(ls(o.store,u,c)),o.notifyObservers(h,[u],{type:"valueUpdate",source:"internal"}),o.notifyWatch([u]);var f=o.triggerDependenciesUpdate(h,u),m=o.callbacks.onValuesChange;if(m){var v=o4(o.store,[u]);m(v,o.getFieldsValue())}o.triggerOnFieldsChange([u].concat(dt(f)))},this.setFieldsValue=function(s){o.warningUnhooked();var c=o.store;if(s){var u=sh(o.store,s);o.updateStore(u)}o.notifyObservers(c,null,{type:"valueUpdate",source:"external"}),o.notifyWatch()},this.setFieldValue=function(s,c){o.setFields([{name:s,value:c}])},this.getDependencyChildrenFields=function(s){var c=new Set,u=[],h=new Fd;o.getFieldEntities().forEach(function(m){var v=m.props.dependencies;(v||[]).forEach(function(_){var y=Br(_);h.update(y,function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return T.add(m),T})})});var f=function m(v){var _=h.get(v)||new Set;_.forEach(function(y){if(!c.has(y)){c.add(y);var T=y.getNamePath();y.isFieldDirty()&&T.length&&(u.push(T),m(T))}})};return f(s),u},this.triggerOnFieldsChange=function(s,c){var u=o.callbacks.onFieldsChange;if(u){var h=o.getFields();if(c){var f=new Fd;c.forEach(function(v){var _=v.name,y=v.errors;f.set(_,y)}),h.forEach(function(v){v.errors=f.get(v.name)||v.errors})}var m=h.filter(function(v){var _=v.name;return yf(s,_)});m.length&&u(m,h)}},this.validateFields=function(s,c){o.warningUnhooked();var u,h;Array.isArray(s)||typeof s=="string"||typeof c=="string"?(u=s,h=c):h=s;var f=!!u,m=f?u.map(Br):[],v=[],_=String(Date.now()),y=new Set;o.getFieldEntities(!0).forEach(function(O){var L;if(f||m.push(O.getNamePath()),!((L=h)===null||L===void 0)&&L.recursive&&f){var x=O.getNamePath();x.every(function(U,V){return u[V]===U||u[V]===void 0})&&m.push(x)}if(!(!O.props.rules||!O.props.rules.length)){var N=O.getNamePath();if(y.add(N.join(_)),!f||yf(m,N)){var D=O.validateRules(ge({validateMessages:ge(ge({},KB),o.validateMessages)},h));v.push(D.then(function(){return{name:N,errors:[],warnings:[]}}).catch(function(U){var V,j=[],B=[];return(V=U.forEach)===null||V===void 0||V.call(U,function(Y){var ee=Y.rule.warningOnly,H=Y.errors;ee?B.push.apply(B,dt(H)):j.push.apply(j,dt(H))}),j.length?Promise.reject({name:N,errors:j,warnings:B}):{name:N,errors:j,warnings:B}}))}}});var T=Oie(v);o.lastValidatePromise=T,T.catch(function(O){return O}).then(function(O){var L=O.map(function(x){var N=x.name;return N});o.notifyObservers(o.store,L,{type:"validateFinish"}),o.triggerOnFieldsChange(L,O)});var A=T.then(function(){return o.lastValidatePromise===T?Promise.resolve(o.getFieldsValue(m)):Promise.reject([])}).catch(function(O){var L=O.filter(function(x){return x&&x.errors.length});return Promise.reject({values:o.getFieldsValue(m),errorFields:L,outOfDate:o.lastValidatePromise!==T})});A.catch(function(O){return O});var I=m.filter(function(O){return y.has(O.join(_))});return o.triggerOnFieldsChange(I),A},this.submit=function(){o.warningUnhooked(),o.validateFields().then(function(s){var c=o.callbacks.onFinish;if(c)try{c(s)}catch(u){console.error(u)}}).catch(function(s){var c=o.callbacks.onFinishFailed;c&&c(s)})},this.forceRootUpdate=t});function JB(e){var t=b.useRef(),o=b.useState({}),s=De(o,2),c=s[1];if(!t.current)if(e)t.current=e;else{var u=function(){c({})},h=new Nie(u);t.current=h.getForm()}return[t.current]}var XR=b.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),xie=function(t){var o=t.validateMessages,s=t.onFormChange,c=t.onFormFinish,u=t.children,h=b.useContext(XR),f=b.useRef({});return b.createElement(XR.Provider,{value:ge(ge({},h),{},{validateMessages:ge(ge({},h.validateMessages),o),triggerFormChange:function(v,_){s&&s(v,{changedFields:_,forms:f.current}),h.triggerFormChange(v,_)},triggerFormFinish:function(v,_){c&&c(v,{values:_,forms:f.current}),h.triggerFormFinish(v,_)},registerForm:function(v,_){v&&(f.current=ge(ge({},f.current),{},Qe({},v,_))),h.registerForm(v,_)},unregisterForm:function(v){var _=ge({},f.current);delete _[v],f.current=_,h.unregisterForm(v)}})},u)},Pie=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],Die=function(t,o){var s=t.name,c=t.initialValues,u=t.fields,h=t.form,f=t.preserve,m=t.children,v=t.component,_=v===void 0?"form":v,y=t.validateMessages,T=t.validateTrigger,A=T===void 0?"onChange":T,I=t.onValuesChange,O=t.onFieldsChange,L=t.onFinish,x=t.onFinishFailed,N=fn(t,Pie),D=b.useContext(XR),U=JB(h),V=De(U,1),j=V[0],B=j.getInternalHooks(Eu),Y=B.useSubscribe,ee=B.setInitialValues,H=B.setCallbacks,Z=B.setValidateMessages,J=B.setPreserve,X=B.destroyForm;b.useImperativeHandle(o,function(){return j}),b.useEffect(function(){return D.registerForm(s,j),function(){D.unregisterForm(s)}},[D,j,s]),Z(ge(ge({},D.validateMessages),y)),H({onValuesChange:I,onFieldsChange:function(se){if(D.triggerFormChange(s,se),O){for(var de=arguments.length,he=new Array(de>1?de-1:0),xe=1;xe<de;xe++)he[xe-1]=arguments[xe];O.apply(void 0,[se].concat(he))}},onFinish:function(se){D.triggerFormFinish(s,se),L&&L(se)},onFinishFailed:x}),J(f);var ne=b.useRef(null);ee(c,!ne.current),ne.current||(ne.current=!0),b.useEffect(function(){return X},[]);var ie,ae=typeof m=="function";if(ae){var pe=j.getFieldsValue(!0);ie=m(pe,j)}else ie=m;Y(!ae);var ue=b.useRef();b.useEffect(function(){bie(ue.current||[],u||[])||j.setFields(u||[]),ue.current=u},[u,j]);var Se=b.useMemo(function(){return ge(ge({},j),{},{validateTrigger:A})},[j,A]),Ee=b.createElement(qv.Provider,{value:null},b.createElement(Nh.Provider,{value:Se},ie));return _===!1?Ee:b.createElement(_,Ve({},N,{onSubmit:function(se){se.preventDefault(),se.stopPropagation(),j.submit()},onReset:function(se){var de;se.preventDefault(),j.resetFields(),(de=N.onReset)===null||de===void 0||de.call(N,se)}}),Ee)};function c4(e){try{return JSON.stringify(e)}catch{return Math.random()}}function kie(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var s=t[0],c=s===void 0?[]:s,u=t[1],h=u===void 0?{}:u,f=Bre(h)?{form:h}:h,m=f.form,v=b.useState(),_=De(v,2),y=_[0],T=_[1],A=b.useMemo(function(){return c4(y)},[y]),I=b.useRef(A);I.current=A;var O=b.useContext(Nh),L=m||O,x=L&&L._init,N=Br(c),D=b.useRef(N);return D.current=N,b.useEffect(function(){if(x){var U=L.getFieldsValue,V=L.getInternalHooks,j=V(Eu),B=j.registerWatch,Y=B(function(H,Z){var J=ps(f.preserve?Z:H,D.current),X=c4(J);I.current!==X&&(I.current=X,T(J))}),ee=ps(f.preserve?U(!0):U(),D.current);return T(ee),Y}},[x]),y}var Lie=b.forwardRef(Die),um=Lie;um.FormProvider=xie;um.Field=qB;um.List=wie;um.useForm=JB;um.useWatch=kie;const Mie=b.createContext({}),Uie=e=>({animationDuration:e,animationFillMode:"both"}),Fie=e=>({animationDuration:e,animationFillMode:"both"}),QB=function(e,t,o,s){const u=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${u}${e}-enter,
      ${u}${e}-appear
    `]:Object.assign(Object.assign({},Uie(s)),{animationPlayState:"paused"}),[`${u}${e}-leave`]:Object.assign(Object.assign({},Fie(s)),{animationPlayState:"paused"}),[`
      ${u}${e}-enter${e}-enter-active,
      ${u}${e}-appear${e}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${u}${e}-leave${e}-leave-active`]:{animationName:o,animationPlayState:"running",pointerEvents:"none"}}},Vie=new ai("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),jie=new ai("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),Bie=new ai("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),$ie=new ai("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),Hie=new ai("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),Wie=new ai("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),Gie=new ai("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),zie=new ai("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),Kie={"slide-up":{inKeyframes:Vie,outKeyframes:jie},"slide-down":{inKeyframes:Bie,outKeyframes:$ie},"slide-left":{inKeyframes:Hie,outKeyframes:Wie},"slide-right":{inKeyframes:Gie,outKeyframes:zie}},l4=(e,t)=>{const{antCls:o}=e,s=`${o}-${t}`,{inKeyframes:c,outKeyframes:u}=Kie[t];return[QB(s,c,u,e.motionDurationMid),{[`
      ${s}-enter,
      ${s}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${s}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]},Yie=new ai("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),qie=new ai("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),u4=new ai("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),d4=new ai("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),Xie=new ai("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),Jie=new ai("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),Qie=new ai("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),Zie=new ai("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),eoe=new ai("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),toe=new ai("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),noe=new ai("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),roe=new ai("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),ioe={zoom:{inKeyframes:Yie,outKeyframes:qie},"zoom-big":{inKeyframes:u4,outKeyframes:d4},"zoom-big-fast":{inKeyframes:u4,outKeyframes:d4},"zoom-left":{inKeyframes:Qie,outKeyframes:Zie},"zoom-right":{inKeyframes:eoe,outKeyframes:toe},"zoom-up":{inKeyframes:Xie,outKeyframes:Jie},"zoom-down":{inKeyframes:noe,outKeyframes:roe}},ZB=(e,t)=>{const{antCls:o}=e,s=`${o}-${t}`,{inKeyframes:c,outKeyframes:u}=ioe[t];return[QB(s,c,u,t==="zoom-big-fast"?e.motionDurationFast:e.motionDurationMid),{[`
        ${s}-enter,
        ${s}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${s}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},ooe=e=>({[e.componentCls]:{[`${e.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}},[`${e.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}}}),aoe=ooe,soe=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var coe=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Vd=void 0;function loe(e,t){var o=e.prefixCls,s=e.invalidate,c=e.item,u=e.renderItem,h=e.responsive,f=e.responsiveDisabled,m=e.registerSize,v=e.itemKey,_=e.className,y=e.style,T=e.children,A=e.display,I=e.order,O=e.component,L=O===void 0?"div":O,x=fn(e,coe),N=h&&!A;function D(Y){m(v,Y)}b.useEffect(function(){return function(){D(null)}},[]);var U=u&&c!==Vd?u(c):T,V;s||(V={opacity:N?0:1,height:N?0:Vd,overflowY:N?"hidden":Vd,order:h?I:Vd,pointerEvents:N?"none":Vd,position:N?"absolute":Vd});var j={};N&&(j["aria-hidden"]=!0);var B=b.createElement(L,Ve({className:ot(!s&&o,_),style:ge(ge({},V),y)},j,x,{ref:t}),U);return h&&(B=b.createElement(Mu,{onResize:function(ee){var H=ee.offsetWidth;D(H)},disabled:f},B)),B}var Cf=b.forwardRef(loe);Cf.displayName="Item";function uoe(e){if(typeof MessageChannel>"u")_o(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}function doe(){var e=b.useRef(null),t=function(s){e.current||(e.current=[],uoe(function(){Du.unstable_batchedUpdates(function(){e.current.forEach(function(c){c()}),e.current=null})})),e.current.push(s)};return t}function zp(e,t){var o=b.useState(t),s=De(o,2),c=s[0],u=s[1],h=hs(function(f){e(function(){u(f)})});return[c,h]}var Xv=Dt.createContext(null),hoe=["component"],poe=["className"],foe=["className"],moe=function(t,o){var s=b.useContext(Xv);if(!s){var c=t.component,u=c===void 0?"div":c,h=fn(t,hoe);return b.createElement(u,Ve({},h,{ref:o}))}var f=s.className,m=fn(s,poe),v=t.className,_=fn(t,foe);return b.createElement(Xv.Provider,{value:null},b.createElement(Cf,Ve({ref:o,className:ot(f,v)},m,_)))},e8=b.forwardRef(moe);e8.displayName="RawItem";var goe=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],t8="responsive",n8="invalidate";function voe(e){return"+ ".concat(e.length," ...")}function Eoe(e,t){var o=e.prefixCls,s=o===void 0?"rc-overflow":o,c=e.data,u=c===void 0?[]:c,h=e.renderItem,f=e.renderRawItem,m=e.itemKey,v=e.itemWidth,_=v===void 0?10:v,y=e.ssr,T=e.style,A=e.className,I=e.maxCount,O=e.renderRest,L=e.renderRawRest,x=e.suffix,N=e.component,D=N===void 0?"div":N,U=e.itemComponent,V=e.onVisibleChange,j=fn(e,goe),B=y==="full",Y=doe(),ee=zp(Y,null),H=De(ee,2),Z=H[0],J=H[1],X=Z||0,ne=zp(Y,new Map),ie=De(ne,2),ae=ie[0],pe=ie[1],ue=zp(Y,0),Se=De(ue,2),Ee=Se[0],le=Se[1],se=zp(Y,0),de=De(se,2),he=de[0],xe=de[1],Me=zp(Y,0),it=De(Me,2),Be=it[0],Tt=it[1],It=b.useState(null),lt=De(It,2),Mt=lt[0],ht=lt[1],ze=b.useState(null),Ut=De(ze,2),Ft=Ut[0],Vt=Ut[1],qe=b.useMemo(function(){return Ft===null&&B?Number.MAX_SAFE_INTEGER:Ft||0},[Ft,Z]),Ke=b.useState(!1),Ge=De(Ke,2),rt=Ge[0],pt=Ge[1],Nt="".concat(s,"-item"),yt=Math.max(Ee,he),xt=I===t8,Yt=u.length&&xt,Nn=I===n8,vi=Yt||typeof I=="number"&&u.length>I,ur=b.useMemo(function(){var mt=u;return Yt?Z===null&&B?mt=u:mt=u.slice(0,Math.min(u.length,X/_)):typeof I=="number"&&(mt=u.slice(0,I)),mt},[u,_,Z,I,Yt]),Wn=b.useMemo(function(){return Yt?u.slice(qe+1):u.slice(ur.length)},[u,ur,Yt,qe]),mn=b.useCallback(function(mt,Qt){var an;return typeof m=="function"?m(mt):(an=m&&(mt==null?void 0:mt[m]))!==null&&an!==void 0?an:Qt},[m]),Or=b.useCallback(h||function(mt){return mt},[h]);function Cn(mt,Qt,an){Ft===mt&&(Qt===void 0||Qt===Mt)||(Vt(mt),an||(pt(mt<u.length-1),V==null||V(mt)),Qt!==void 0&&ht(Qt))}function Xt(mt,Qt){J(Qt.clientWidth)}function Jt(mt,Qt){pe(function(an){var vr=new Map(an);return Qt===null?vr.delete(mt):vr.set(mt,Qt),vr})}function To(mt,Qt){xe(Qt),le(he)}function Gi(mt,Qt){Tt(Qt)}function yr(mt){return ae.get(mn(ur[mt],mt))}kr(function(){if(X&&typeof yt=="number"&&ur){var mt=Be,Qt=ur.length,an=Qt-1;if(!Qt){Cn(0,null);return}for(var vr=0;vr<Qt;vr+=1){var si=yr(vr);if(B&&(si=si||0),si===void 0){Cn(vr-1,void 0,!0);break}if(mt+=si,an===0&&mt<=X||vr===an-1&&mt+yr(an)<=X){Cn(an,null);break}else if(mt+yt>X){Cn(vr-1,mt-si-Be+he);break}}x&&yr(0)+Be>X&&ht(null)}},[X,ae,he,Be,mn,ur]);var gn=rt&&!!Wn.length,Ue={};Mt!==null&&Yt&&(Ue={position:"absolute",left:Mt,top:0});var tt={prefixCls:Nt,responsive:Yt,component:U,invalidate:Nn},vn=f?function(mt,Qt){var an=mn(mt,Qt);return b.createElement(Xv.Provider,{key:an,value:ge(ge({},tt),{},{order:Qt,item:mt,itemKey:an,registerSize:Jt,display:Qt<=qe})},f(mt,Qt))}:function(mt,Qt){var an=mn(mt,Qt);return b.createElement(Cf,Ve({},tt,{order:Qt,key:an,item:mt,renderItem:Or,itemKey:an,registerSize:Jt,display:Qt<=qe}))},kt,Ei={order:gn?qe:Number.MAX_SAFE_INTEGER,className:"".concat(Nt,"-rest"),registerSize:To,display:gn};if(L)L&&(kt=b.createElement(Xv.Provider,{value:ge(ge({},tt),Ei)},L(Wn)));else{var Ar=O||voe;kt=b.createElement(Cf,Ve({},tt,Ei),typeof Ar=="function"?Ar(Wn):Ar)}var qn=b.createElement(D,Ve({className:ot(!Nn&&s,A),style:T,ref:t},j),ur.map(vn),vi?kt:null,x&&b.createElement(Cf,Ve({},tt,{responsive:xt,responsiveDisabled:!Yt,order:qe,className:"".concat(Nt,"-suffix"),registerSize:Gi,display:!0,style:Ue}),x));return xt&&(qn=b.createElement(Mu,{onResize:Xt,disabled:!Yt},qn)),qn}var Ec=b.forwardRef(Eoe);Ec.displayName="Overflow";Ec.Item=e8;Ec.RESPONSIVE=t8;Ec.INVALIDATE=n8;var h4=b.createContext(null);function p4(e){return e?Array.isArray(e)?e:[e]:[]}function _oe(e,t,o,s){return b.useMemo(function(){var c=p4(o??t),u=p4(s??t),h=new Set(c),f=new Set(u);return e&&(h.has("hover")&&(h.delete("hover"),h.add("click")),f.has("hover")&&(f.delete("hover"),f.add("click"))),[h,f]},[e,t,o,s])}function Soe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;return o?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function yoe(e,t,o,s){for(var c=o.points,u=Object.keys(e),h=0;h<u.length;h+=1){var f,m=u[h];if(Soe((f=e[m])===null||f===void 0?void 0:f.points,c,s))return"".concat(t,"-placement-").concat(m)}return""}function f4(e,t,o,s){return t||(o?{motionName:"".concat(e,"-").concat(o)}:s?{motionName:s}:null)}function dm(e){return e.ownerDocument.defaultView}function JR(e){for(var t=[],o=e==null?void 0:e.parentElement,s=["hidden","scroll","clip","auto"];o;){var c=dm(o).getComputedStyle(o),u=c.overflowX,h=c.overflowY,f=c.overflow;[u,h,f].some(function(m){return s.includes(m)})&&t.push(o),o=o.parentElement}return t}function Kf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?t:e}function Kp(e){return Kf(parseFloat(e),0)}function m4(e,t){var o=ge({},e);return(t||[]).forEach(function(s){if(!(s instanceof HTMLBodyElement)){var c=dm(s).getComputedStyle(s),u=c.overflow,h=c.overflowClipMargin,f=c.borderTopWidth,m=c.borderBottomWidth,v=c.borderLeftWidth,_=c.borderRightWidth,y=s.getBoundingClientRect(),T=s.offsetHeight,A=s.clientHeight,I=s.offsetWidth,O=s.clientWidth,L=Kp(f),x=Kp(m),N=Kp(v),D=Kp(_),U=Kf(Math.round(y.width/I*1e3)/1e3),V=Kf(Math.round(y.height/T*1e3)/1e3),j=(I-O-N-D)*U,B=(T-A-L-x)*V,Y=L*V,ee=x*V,H=N*U,Z=D*U,J=0,X=0;if(u==="clip"){var ne=Kp(h);J=ne*U,X=ne*V}var ie=y.x+H-J,ae=y.y+Y-X,pe=ie+y.width+2*J-H-Z-j,ue=ae+y.height+2*X-Y-ee-B;o.left=Math.max(o.left,ie),o.top=Math.max(o.top,ae),o.right=Math.min(o.right,pe),o.bottom=Math.min(o.bottom,ue)}}),o}function g4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o="".concat(t),s=o.match(/^(.*)\%$/);return s?e*(parseFloat(s[1])/100):parseFloat(o)}function v4(e,t){var o=t||[],s=De(o,2),c=s[0],u=s[1];return[g4(e.width,c),g4(e.height,u)]}function E4(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function jd(e,t){var o=t[0],s=t[1],c,u;return o==="t"?u=e.y:o==="b"?u=e.y+e.height:u=e.y+e.height/2,s==="l"?c=e.x:s==="r"?c=e.x+e.width:c=e.x+e.width/2,{x:c,y:u}}function al(e,t){var o={t:"b",b:"t",l:"r",r:"l"};return e.map(function(s,c){return c===t?o[s]||"c":s}).join("")}function Coe(e,t,o,s,c,u,h){var f=b.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:c[s]||{}}),m=De(f,2),v=m[0],_=m[1],y=b.useRef(0),T=b.useMemo(function(){return t?JR(t):[]},[t]),A=b.useRef({}),I=function(){A.current={}};e||I();var O=hs(function(){if(t&&o&&e){let _i=function(Bu,Ts){var Qs=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ut,kc=J.x+Bu,Fl=J.y+Ts,Zh=kc+he,ep=Fl+de,$u=Math.max(kc,Qs.left),tp=Math.max(Fl,Qs.top),ut=Math.min(Zh,Qs.right),$t=Math.min(ep,Qs.bottom);return Math.max(0,(ut-$u)*($t-tp))},Ul=function(){Nr=J.y+Ue,Ai=Nr+de,zi=J.x+gn,co=zi+he};var Js=_i,Qh=Ul,N=t,D=N.style.left,U=N.style.top,V=N.style.right,j=N.style.bottom,B=N.ownerDocument,Y=dm(N),ee=ge(ge({},c[s]),u);N.style.left="0",N.style.top="0",N.style.right="auto",N.style.bottom="auto";var H;if(Array.isArray(o))H={x:o[0],y:o[1],width:0,height:0};else{var Z=o.getBoundingClientRect();H={x:Z.x,y:Z.y,width:Z.width,height:Z.height}}var J=N.getBoundingClientRect(),X=Y.getComputedStyle(N),ne=X.width,ie=X.height,ae=B.documentElement,pe=ae.clientWidth,ue=ae.clientHeight,Se=ae.scrollWidth,Ee=ae.scrollHeight,le=ae.scrollTop,se=ae.scrollLeft,de=J.height,he=J.width,xe=H.height,Me=H.width,it={left:0,top:0,right:pe,bottom:ue},Be={left:-se,top:-le,right:Se-se,bottom:Ee-le},Tt=ee.htmlRegion,It="visible",lt="visibleFirst";Tt!=="scroll"&&Tt!==lt&&(Tt=It);var Mt=Tt===lt,ht=m4(Be,T),ze=m4(it,T),Ut=Tt===It?ze:ht,Ft=Mt?ze:Ut;N.style.left="auto",N.style.top="auto",N.style.right="0",N.style.bottom="0";var Vt=N.getBoundingClientRect();N.style.left=D,N.style.top=U,N.style.right=V,N.style.bottom=j;var qe=Kf(Math.round(he/parseFloat(ne)*1e3)/1e3),Ke=Kf(Math.round(de/parseFloat(ie)*1e3)/1e3);if(qe===0||Ke===0||Uv(o)&&!Aw(o))return;var Ge=ee.offset,rt=ee.targetOffset,pt=v4(J,Ge),Nt=De(pt,2),yt=Nt[0],xt=Nt[1],Yt=v4(H,rt),Nn=De(Yt,2),vi=Nn[0],ur=Nn[1];H.x-=vi,H.y-=ur;var Wn=ee.points||[],mn=De(Wn,2),Or=mn[0],Cn=mn[1],Xt=E4(Cn),Jt=E4(Or),To=jd(H,Xt),Gi=jd(J,Jt),yr=ge({},ee),gn=To.x-Gi.x+yt,Ue=To.y-Gi.y+xt,tt=_i(gn,Ue),vn=_i(gn,Ue,ze),kt=jd(H,["t","l"]),Ei=jd(J,["t","l"]),Ar=jd(H,["b","r"]),qn=jd(J,["b","r"]),mt=ee.overflow||{},Qt=mt.adjustX,an=mt.adjustY,vr=mt.shiftX,si=mt.shiftY,Cr=function(Ts){return typeof Ts=="boolean"?Ts:Ts>=0},Nr,Ai,zi,co;Ul();var lo=Cr(an),zs=Jt[0]===Xt[0];if(lo&&Jt[0]==="t"&&(Ai>Ft.bottom||A.current.bt)){var Hr=Ue;zs?Hr-=de-xe:Hr=kt.y-qn.y-xt;var Ks=_i(gn,Hr),wc=_i(gn,Hr,ze);Ks>tt||Ks===tt&&(!Mt||wc>=vn)?(A.current.bt=!0,Ue=Hr,yr.points=[al(Jt,0),al(Xt,0)]):A.current.bt=!1}if(lo&&Jt[0]==="b"&&(Nr<Ft.top||A.current.tb)){var Xn=Ue;zs?Xn+=de-xe:Xn=Ar.y-Ei.y-xt;var Oc=_i(gn,Xn),Ni=_i(gn,Xn,ze);Oc>tt||Oc===tt&&(!Mt||Ni>=vn)?(A.current.tb=!0,Ue=Xn,yr.points=[al(Jt,0),al(Xt,0)]):A.current.tb=!1}var Ac=Cr(Qt),Nc=Jt[1]===Xt[1];if(Ac&&Jt[1]==="l"&&(co>Ft.right||A.current.rl)){var Go=gn;Nc?Go-=he-Me:Go=kt.x-qn.x-yt;var Ys=_i(Go,Ue),Ka=_i(Go,Ue,ze);Ys>tt||Ys===tt&&(!Mt||Ka>=vn)?(A.current.rl=!0,gn=Go,yr.points=[al(Jt,1),al(Xt,1)]):A.current.rl=!1}if(Ac&&Jt[1]==="r"&&(zi<Ft.left||A.current.lr)){var bo=gn;Nc?bo+=he-Me:bo=Ar.x-Ei.x-yt;var xc=_i(bo,Ue),Pc=_i(bo,Ue,ze);xc>tt||xc===tt&&(!Mt||Pc>=vn)?(A.current.lr=!0,gn=bo,yr.points=[al(Jt,1),al(Xt,1)]):A.current.lr=!1}Ul();var Ca=vr===!0?0:vr;typeof Ca=="number"&&(zi<ze.left&&(gn-=zi-ze.left,H.x+Me<ze.left+Ca&&(gn+=H.x-ze.left+Me-Ca)),co>ze.right&&(gn-=co-ze.right,H.x>ze.right-Ca&&(gn+=H.x-ze.right+Ca)));var ci=si===!0?0:si;typeof ci=="number"&&(Nr<ze.top&&(Ue-=Nr-ze.top,H.y+xe<ze.top+ci&&(Ue+=H.y-ze.top+xe-ci)),Ai>ze.bottom&&(Ue-=Ai-ze.bottom,H.y>ze.bottom-ci&&(Ue+=H.y-ze.bottom+ci)));var Wr=J.x+gn,zo=Wr+he,qs=J.y+Ue,or=qs+de,Xs=H.x,Dc=Xs+Me,Cs=H.y,kl=Cs+xe,Ll=Math.max(Wr,Xs),Ml=Math.min(zo,Dc),Vn=(Ll+Ml)/2,En=Vn-Wr,xn=Math.max(qs,Cs),Gr=Math.min(or,kl),xr=(xn+Gr)/2,uo=xr-qs;h==null||h(t,yr);var Ki=Vt.right-J.x-(gn+J.width),Ya=Vt.bottom-J.y-(Ue+J.height);_({ready:!0,offsetX:gn/qe,offsetY:Ue/Ke,offsetR:Ki/qe,offsetB:Ya/Ke,arrowX:En/qe,arrowY:uo/Ke,scaleX:qe,scaleY:Ke,align:yr})}}),L=function(){y.current+=1;var D=y.current;Promise.resolve().then(function(){y.current===D&&O()})},x=function(){_(function(D){return ge(ge({},D),{},{ready:!1})})};return kr(x,[s]),kr(function(){e||x()},[e]),[v.ready,v.offsetX,v.offsetY,v.offsetR,v.offsetB,v.arrowX,v.arrowY,v.scaleX,v.scaleY,v.align,L]}function Toe(e,t,o,s){kr(function(){if(e&&t&&o){let y=function(){s()};var _=y,c=t,u=o,h=JR(c),f=JR(u),m=dm(u),v=new Set([m].concat(dt(h),dt(f)));return v.forEach(function(T){T.addEventListener("scroll",y,{passive:!0})}),m.addEventListener("resize",y,{passive:!0}),s(),function(){v.forEach(function(T){T.removeEventListener("scroll",y),m.removeEventListener("resize",y)})}}},[e,t,o])}function boe(e,t,o,s,c,u,h,f){var m=b.useRef(e),v=b.useRef(!1);m.current!==e&&(v.current=!0,m.current=e),b.useEffect(function(){var _=_o(function(){v.current=!1});return function(){_o.cancel(_)}},[e]),b.useEffect(function(){if(t&&s&&(!c||u)){var _=function(){var j=!1,B=function(H){var Z=H.target;j=h(Z)},Y=function(H){var Z=H.target;!v.current&&m.current&&!j&&!h(Z)&&f(!1)};return[B,Y]},y=_(),T=De(y,2),A=T[0],I=T[1],O=_(),L=De(O,2),x=L[0],N=L[1],D=dm(s);D.addEventListener("mousedown",A),D.addEventListener("click",I),D.addEventListener("contextmenu",I);var U=Gv(o);return U&&(U.addEventListener("mousedown",x),U.addEventListener("click",N),U.addEventListener("contextmenu",N)),function(){D.removeEventListener("mousedown",A),D.removeEventListener("click",I),D.removeEventListener("contextmenu",I),U&&(U.removeEventListener("mousedown",x),U.removeEventListener("click",N),U.removeEventListener("contextmenu",N))}}},[t,o,s,c,u])}function Roe(e){var t=e.prefixCls,o=e.align,s=e.arrow,c=e.arrowPos,u=s||{},h=u.className,f=u.content,m=c.x,v=m===void 0?0:m,_=c.y,y=_===void 0?0:_,T=b.useRef();if(!o||!o.points)return null;var A={position:"absolute"};if(o.autoArrow!==!1){var I=o.points[0],O=o.points[1],L=I[0],x=I[1],N=O[0],D=O[1];L===N||!["t","b"].includes(L)?A.top=y:L==="t"?A.top=0:A.bottom=0,x===D||!["l","r"].includes(x)?A.left=v:x==="l"?A.left=0:A.right=0}return b.createElement("div",{ref:T,className:ot("".concat(t,"-arrow"),h),style:A},f)}function Ioe(e){var t=e.prefixCls,o=e.open,s=e.zIndex,c=e.mask,u=e.motion;return c?b.createElement(jh,Ve({},u,{motionAppear:!0,visible:o,removeOnLeave:!0}),function(h){var f=h.className;return b.createElement("div",{style:{zIndex:s},className:ot("".concat(t,"-mask"),f)})}):null}var woe=b.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),Ooe=b.forwardRef(function(e,t){var o=e.popup,s=e.className,c=e.prefixCls,u=e.style,h=e.target,f=e.onVisibleChanged,m=e.open,v=e.keepDom,_=e.onClick,y=e.mask,T=e.arrow,A=e.arrowPos,I=e.align,O=e.motion,L=e.maskMotion,x=e.forceRender,N=e.getPopupContainer,D=e.autoDestroy,U=e.portal,V=e.zIndex,j=e.onMouseEnter,B=e.onMouseLeave,Y=e.ready,ee=e.offsetX,H=e.offsetY,Z=e.offsetR,J=e.offsetB,X=e.onAlign,ne=e.onPrepare,ie=e.stretch,ae=e.targetWidth,pe=e.targetHeight,ue=typeof o=="function"?o():o,Se=m||v,Ee=(N==null?void 0:N.length)>0,le=b.useState(!N||!Ee),se=De(le,2),de=se[0],he=se[1];if(kr(function(){!de&&Ee&&h&&he(!0)},[de,Ee,h]),!de)return null;var xe="auto",Me={left:"-1000vw",top:"-1000vh",right:xe,bottom:xe};if(Y||!m){var it=I.points,Be=I._experimental,Tt=Be==null?void 0:Be.dynamicInset,It=Tt&&it[0][1]==="r",lt=Tt&&it[0][0]==="b";It?(Me.right=Z,Me.left=xe):(Me.left=ee,Me.right=xe),lt?(Me.bottom=J,Me.top=xe):(Me.top=H,Me.bottom=xe)}var Mt={};return ie&&(ie.includes("height")&&pe?Mt.height=pe:ie.includes("minHeight")&&pe&&(Mt.minHeight=pe),ie.includes("width")&&ae?Mt.width=ae:ie.includes("minWidth")&&ae&&(Mt.minWidth=ae)),m||(Mt.pointerEvents="none"),b.createElement(U,{open:x||Se,getContainer:N&&function(){return N(h)},autoDestroy:D},b.createElement(Ioe,{prefixCls:c,open:m,zIndex:V,mask:y,motion:L}),b.createElement(Mu,{onResize:X,disabled:!m},function(ht){return b.createElement(jh,Ve({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:x,leavedClassName:"".concat(c,"-hidden")},O,{onAppearPrepare:ne,onEnterPrepare:ne,visible:m,onVisibleChanged:function(Ut){var Ft;O==null||(Ft=O.onVisibleChanged)===null||Ft===void 0||Ft.call(O,Ut),f(Ut)}}),function(ze,Ut){var Ft=ze.className,Vt=ze.style,qe=ot(c,Ft,s);return b.createElement("div",{ref:Lu(ht,t,Ut),className:qe,style:ge(ge(ge(ge({"--arrow-x":"".concat(A.x||0,"px"),"--arrow-y":"".concat(A.y||0,"px")},Me),Mt),Vt),{},{boxSizing:"border-box",zIndex:V},u),onMouseEnter:j,onMouseLeave:B,onClick:_},T&&b.createElement(Roe,{prefixCls:c,arrow:T,arrowPos:A,align:I}),b.createElement(woe,{cache:!m},ue))})}))}),Aoe=b.forwardRef(function(e,t){var o=e.children,s=e.getTriggerDOMNode,c=rm(o),u=b.useCallback(function(f){hw(t,s?s(f):f)},[s]),h=pw(u,o.ref);return c?b.cloneElement(o,{ref:h}):o}),Noe=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function xoe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:WB,t=b.forwardRef(function(o,s){var c=o.prefixCls,u=c===void 0?"rc-trigger-popup":c,h=o.children,f=o.action,m=f===void 0?"hover":f,v=o.showAction,_=o.hideAction,y=o.popupVisible,T=o.defaultPopupVisible,A=o.onPopupVisibleChange,I=o.afterPopupVisibleChange,O=o.mouseEnterDelay,L=o.mouseLeaveDelay,x=L===void 0?.1:L,N=o.focusDelay,D=o.blurDelay,U=o.mask,V=o.maskClosable,j=V===void 0?!0:V,B=o.getPopupContainer,Y=o.forceRender,ee=o.autoDestroy,H=o.destroyPopupOnHide,Z=o.popup,J=o.popupClassName,X=o.popupStyle,ne=o.popupPlacement,ie=o.builtinPlacements,ae=ie===void 0?{}:ie,pe=o.popupAlign,ue=o.zIndex,Se=o.stretch,Ee=o.getPopupClassNameFromAlign,le=o.alignPoint,se=o.onPopupClick,de=o.onPopupAlign,he=o.arrow,xe=o.popupMotion,Me=o.maskMotion,it=o.popupTransitionName,Be=o.popupAnimation,Tt=o.maskTransitionName,It=o.maskAnimation,lt=o.className,Mt=o.getTriggerDOMNode,ht=fn(o,Noe),ze=ee||H||!1,Ut=b.useState(!1),Ft=De(Ut,2),Vt=Ft[0],qe=Ft[1];kr(function(){qe(soe())},[]);var Ke=b.useRef({}),Ge=b.useContext(h4),rt=b.useMemo(function(){return{registerSubPopup:function($t,Pn){Ke.current[$t]=Pn,Ge==null||Ge.registerSubPopup($t,Pn)}}},[Ge]),pt=Vre(),Nt=b.useState(null),yt=De(Nt,2),xt=yt[0],Yt=yt[1],Nn=hs(function(ut){Uv(ut)&&xt!==ut&&Yt(ut),Ge==null||Ge.registerSubPopup(pt,ut)}),vi=b.useState(null),ur=De(vi,2),Wn=ur[0],mn=ur[1],Or=hs(function(ut){Uv(ut)&&Wn!==ut&&mn(ut)}),Cn=b.Children.only(h),Xt=(Cn==null?void 0:Cn.props)||{},Jt={},To=hs(function(ut){var $t,Pn,Pr=Wn;return(Pr==null?void 0:Pr.contains(ut))||(($t=Gv(Pr))===null||$t===void 0?void 0:$t.host)===ut||ut===Pr||(xt==null?void 0:xt.contains(ut))||((Pn=Gv(xt))===null||Pn===void 0?void 0:Pn.host)===ut||ut===xt||Object.values(Ke.current).some(function(dr){return(dr==null?void 0:dr.contains(ut))||ut===dr})}),Gi=f4(u,xe,Be,it),yr=f4(u,Me,It,Tt),gn=b.useState(T||!1),Ue=De(gn,2),tt=Ue[0],vn=Ue[1],kt=y??tt,Ei=hs(function(ut){y===void 0&&vn(ut)});kr(function(){vn(y||!1)},[y]);var Ar=b.useRef(kt);Ar.current=kt;var qn=hs(function(ut){kt!==ut&&(Ei(ut),A==null||A(ut))}),mt=b.useRef(),Qt=function(){clearTimeout(mt.current)},an=function($t){var Pn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Qt(),Pn===0?qn($t):mt.current=setTimeout(function(){qn($t)},Pn*1e3)};b.useEffect(function(){return Qt},[]);var vr=b.useState(!1),si=De(vr,2),Cr=si[0],Nr=si[1];kr(function(ut){(!ut||kt)&&Nr(!0)},[kt]);var Ai=b.useState(null),zi=De(Ai,2),co=zi[0],lo=zi[1],zs=b.useState([0,0]),Hr=De(zs,2),Ks=Hr[0],wc=Hr[1],Xn=function($t){wc([$t.clientX,$t.clientY])},Oc=Coe(kt,xt,le?Ks:Wn,ne,ae,pe,de),Ni=De(Oc,11),Ac=Ni[0],Nc=Ni[1],Go=Ni[2],Ys=Ni[3],Ka=Ni[4],bo=Ni[5],xc=Ni[6],Pc=Ni[7],Ca=Ni[8],ci=Ni[9],Wr=Ni[10],zo=hs(function(){Cr||Wr()});Toe(kt,Wn,xt,zo),kr(function(){zo()},[Ks,ne]),kr(function(){kt&&!(ae!=null&&ae[ne])&&zo()},[JSON.stringify(pe)]);var qs=b.useMemo(function(){var ut=yoe(ae,u,ci,le);return ot(ut,Ee==null?void 0:Ee(ci))},[ci,Ee,ae,u,le]);b.useImperativeHandle(s,function(){return{forceAlign:zo}});var or=function($t){Nr(!1),Wr(),I==null||I($t)},Xs=function(){return new Promise(function($t){lo(function(){return $t})})};kr(function(){co&&(Wr(),co(),lo(null))},[co]);var Dc=b.useState(0),Cs=De(Dc,2),kl=Cs[0],Ll=Cs[1],Ml=b.useState(0),Vn=De(Ml,2),En=Vn[0],xn=Vn[1],Gr=function($t,Pn){if(zo(),Se){var Pr=Pn.getBoundingClientRect();Ll(Pr.width),xn(Pr.height)}},xr=_oe(Vt,m,v,_),uo=De(xr,2),Ki=uo[0],Ya=uo[1],Js=function($t,Pn,Pr,dr){Jt[$t]=function(ym){var Hu;dr==null||dr(ym),an(Pn,Pr);for(var Wu=arguments.length,Cm=new Array(Wu>1?Wu-1:0),Gu=1;Gu<Wu;Gu++)Cm[Gu-1]=arguments[Gu];(Hu=Xt[$t])===null||Hu===void 0||Hu.call.apply(Hu,[Xt,ym].concat(Cm))}},Qh=Ki.has("click"),_i=Ya.has("click")||Ya.has("contextMenu");(Qh||_i)&&(Jt.onClick=function(ut){var $t;Ar.current&&_i?an(!1):!Ar.current&&Qh&&(Xn(ut),an(!0));for(var Pn=arguments.length,Pr=new Array(Pn>1?Pn-1:0),dr=1;dr<Pn;dr++)Pr[dr-1]=arguments[dr];($t=Xt.onClick)===null||$t===void 0||$t.call.apply($t,[Xt,ut].concat(Pr))}),boe(kt,_i,Wn,xt,U,j,To,an);var Ul=Ki.has("hover"),Bu=Ya.has("hover"),Ts,Qs;Ul&&(Js("onMouseEnter",!0,O,function(ut){Xn(ut)}),Ts=function(){an(!0,O)},le&&(Jt.onMouseMove=function(ut){var $t;($t=Xt.onMouseMove)===null||$t===void 0||$t.call(Xt,ut)})),Bu&&(Js("onMouseLeave",!1,x),Qs=function(){an(!1,x)}),Ki.has("focus")&&Js("onFocus",!0,N),Ya.has("focus")&&Js("onBlur",!1,D),Ki.has("contextMenu")&&(Jt.onContextMenu=function(ut){var $t;Ar.current&&Ya.has("contextMenu")?an(!1):(Xn(ut),an(!0)),ut.preventDefault();for(var Pn=arguments.length,Pr=new Array(Pn>1?Pn-1:0),dr=1;dr<Pn;dr++)Pr[dr-1]=arguments[dr];($t=Xt.onContextMenu)===null||$t===void 0||$t.call.apply($t,[Xt,ut].concat(Pr))}),lt&&(Jt.className=ot(Xt.className,lt));var kc=ge(ge({},Xt),Jt),Fl={},Zh=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Zh.forEach(function(ut){ht[ut]&&(Fl[ut]=function(){for(var $t,Pn=arguments.length,Pr=new Array(Pn),dr=0;dr<Pn;dr++)Pr[dr]=arguments[dr];($t=kc[ut])===null||$t===void 0||$t.call.apply($t,[kc].concat(Pr)),ht[ut].apply(ht,Pr)})});var ep=b.cloneElement(Cn,ge(ge({},kc),Fl)),$u={x:bo,y:xc},tp=he?ge({},he!==!0?he:{}):null;return b.createElement(b.Fragment,null,b.createElement(Mu,{disabled:!kt,ref:Or,onResize:Gr},b.createElement(Aoe,{getTriggerDOMNode:Mt},ep)),b.createElement(h4.Provider,{value:rt},b.createElement(Ooe,{portal:e,ref:Nn,prefixCls:u,popup:Z,className:ot(J,qs),style:X,target:Wn,onMouseEnter:Ts,onMouseLeave:Qs,zIndex:ue,open:kt,keepDom:Cr,onClick:se,mask:U,motion:Gi,maskMotion:yr,onVisibleChanged:or,onPrepare:Xs,forceRender:Y,autoDestroy:ze,getPopupContainer:B,align:ci,arrow:tp,arrowPos:$u,ready:Ac,offsetX:Nc,offsetY:Go,offsetR:Ys,offsetB:Ka,onAlign:zo,stretch:Se,targetWidth:kl/Pc,targetHeight:En/Ca})))});return t}const r8=xoe(WB);function _4(e,t,o){return ot({[`${e}-status-success`]:t==="success",[`${e}-status-warning`]:t==="warning",[`${e}-status-error`]:t==="error",[`${e}-status-validating`]:t==="validating",[`${e}-has-feedback`]:o})}const Poe=(e,t)=>t||e;var Doe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const koe=Doe;var Loe=function(t,o){return b.createElement(Ws,Ve({},t,{ref:o,icon:koe}))};const Moe=b.forwardRef(Loe);var Bd={shiftX:64,adjustY:1},$d={adjustX:1,shiftY:!0},ka=[0,0],Uoe={left:{points:["cr","cl"],overflow:$d,offset:[-4,0],targetOffset:ka},right:{points:["cl","cr"],overflow:$d,offset:[4,0],targetOffset:ka},top:{points:["bc","tc"],overflow:Bd,offset:[0,-4],targetOffset:ka},bottom:{points:["tc","bc"],overflow:Bd,offset:[0,4],targetOffset:ka},topLeft:{points:["bl","tl"],overflow:Bd,offset:[0,-4],targetOffset:ka},leftTop:{points:["tr","tl"],overflow:$d,offset:[-4,0],targetOffset:ka},topRight:{points:["br","tr"],overflow:Bd,offset:[0,-4],targetOffset:ka},rightTop:{points:["tl","tr"],overflow:$d,offset:[4,0],targetOffset:ka},bottomRight:{points:["tr","br"],overflow:Bd,offset:[0,4],targetOffset:ka},rightBottom:{points:["bl","br"],overflow:$d,offset:[4,0],targetOffset:ka},bottomLeft:{points:["tl","bl"],overflow:Bd,offset:[0,4],targetOffset:ka},leftBottom:{points:["br","bl"],overflow:$d,offset:[-4,0],targetOffset:ka}};function i8(e){var t=e.children,o=e.prefixCls,s=e.id,c=e.overlayInnerStyle,u=e.className,h=e.style;return b.createElement("div",{className:ot("".concat(o,"-content"),u),style:h},b.createElement("div",{className:"".concat(o,"-inner"),id:s,role:"tooltip",style:c},typeof t=="function"?t():t))}var Foe=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],Voe=function(t,o){var s=t.overlayClassName,c=t.trigger,u=c===void 0?["hover"]:c,h=t.mouseEnterDelay,f=h===void 0?0:h,m=t.mouseLeaveDelay,v=m===void 0?.1:m,_=t.overlayStyle,y=t.prefixCls,T=y===void 0?"rc-tooltip":y,A=t.children,I=t.onVisibleChange,O=t.afterVisibleChange,L=t.transitionName,x=t.animation,N=t.motion,D=t.placement,U=D===void 0?"right":D,V=t.align,j=V===void 0?{}:V,B=t.destroyTooltipOnHide,Y=B===void 0?!1:B,ee=t.defaultVisible,H=t.getTooltipContainer,Z=t.overlayInnerStyle;t.arrowContent;var J=t.overlay,X=t.id,ne=t.showArrow,ie=ne===void 0?!0:ne,ae=fn(t,Foe),pe=b.useRef(null);b.useImperativeHandle(o,function(){return pe.current});var ue=ge({},ae);"visible"in t&&(ue.popupVisible=t.visible);var Se=function(){return b.createElement(i8,{key:"content",prefixCls:T,id:X,overlayInnerStyle:Z},J)};return b.createElement(r8,Ve({popupClassName:s,prefixCls:T,popup:Se,action:u,builtinPlacements:Uoe,popupPlacement:U,ref:pe,popupAlign:j,getPopupContainer:H,onPopupVisibleChange:I,afterPopupVisibleChange:O,popupTransitionName:L,popupAnimation:x,popupMotion:N,defaultPopupVisible:ee,autoDestroy:Y,mouseLeaveDelay:v,popupStyle:_,mouseEnterDelay:f,arrow:ie},ue),A)};const joe=b.forwardRef(Voe),o8=8;function a8(e){const t=o8,{contentRadius:o,limitVerticalRadius:s}=e,c=o>12?o+2:12;return{dropdownArrowOffset:c,dropdownArrowOffsetVertical:s?t:c}}function Ng(e,t){return e?t:{}}function Boe(e,t){const{componentCls:o,sizePopupArrow:s,borderRadiusXS:c,borderRadiusOuter:u,boxShadowPopoverArrow:h}=e,{colorBg:f,contentRadius:m=e.borderRadiusLG,limitVerticalRadius:v,arrowDistance:_=0,arrowPlacement:y={left:!0,right:!0,top:!0,bottom:!0}}=t,{dropdownArrowOffsetVertical:T,dropdownArrowOffset:A}=a8({contentRadius:m,limitVerticalRadius:v});return{[o]:Object.assign(Object.assign(Object.assign(Object.assign({[`${o}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},vte(s,c,u,f,h)),{"&:before":{background:f}})]},Ng(!!y.top,{[[`&-placement-top ${o}-arrow`,`&-placement-topLeft ${o}-arrow`,`&-placement-topRight ${o}-arrow`].join(",")]:{bottom:_,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${o}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${o}-arrow`]:{left:{_skip_check_:!0,value:A}},[`&-placement-topRight ${o}-arrow`]:{right:{_skip_check_:!0,value:A}}})),Ng(!!y.bottom,{[[`&-placement-bottom ${o}-arrow`,`&-placement-bottomLeft ${o}-arrow`,`&-placement-bottomRight ${o}-arrow`].join(",")]:{top:_,transform:"translateY(-100%)"},[`&-placement-bottom ${o}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${o}-arrow`]:{left:{_skip_check_:!0,value:A}},[`&-placement-bottomRight ${o}-arrow`]:{right:{_skip_check_:!0,value:A}}})),Ng(!!y.left,{[[`&-placement-left ${o}-arrow`,`&-placement-leftTop ${o}-arrow`,`&-placement-leftBottom ${o}-arrow`].join(",")]:{right:{_skip_check_:!0,value:_},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${o}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${o}-arrow`]:{top:T},[`&-placement-leftBottom ${o}-arrow`]:{bottom:T}})),Ng(!!y.right,{[[`&-placement-right ${o}-arrow`,`&-placement-rightTop ${o}-arrow`,`&-placement-rightBottom ${o}-arrow`].join(",")]:{left:{_skip_check_:!0,value:_},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${o}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${o}-arrow`]:{top:T},[`&-placement-rightBottom ${o}-arrow`]:{bottom:T}}))}}function $oe(e,t,o,s){if(s===!1)return{adjustX:!1,adjustY:!1};const c=s&&typeof s=="object"?s:{},u={};switch(e){case"top":case"bottom":u.shiftX=t.dropdownArrowOffset*2+o;break;case"left":case"right":u.shiftY=t.dropdownArrowOffsetVertical*2+o;break}const h=Object.assign(Object.assign({},u),c);return h.shiftX||(h.adjustX=!0),h.shiftY||(h.adjustY=!0),h}const S4={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},Hoe={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},Woe=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function Goe(e){const{arrowWidth:t,autoAdjustOverflow:o,arrowPointAtCenter:s,offset:c,borderRadius:u,visibleFirst:h}=e,f=t/2,m={};return Object.keys(S4).forEach(v=>{const _=s&&Hoe[v]||S4[v],y=Object.assign(Object.assign({},_),{offset:[0,0]});switch(m[v]=y,Woe.has(v)&&(y.autoArrow=!1),v){case"top":case"topLeft":case"topRight":y.offset[1]=-f-c;break;case"bottom":case"bottomLeft":case"bottomRight":y.offset[1]=f+c;break;case"left":case"leftTop":case"leftBottom":y.offset[0]=-f-c;break;case"right":case"rightTop":case"rightBottom":y.offset[0]=f+c;break}const T=a8({contentRadius:u,limitVerticalRadius:!0});if(s)switch(v){case"topLeft":case"bottomLeft":y.offset[0]=-T.dropdownArrowOffset-f;break;case"topRight":case"bottomRight":y.offset[0]=T.dropdownArrowOffset+f;break;case"leftTop":case"rightTop":y.offset[1]=-T.dropdownArrowOffset-f;break;case"leftBottom":case"rightBottom":y.offset[1]=T.dropdownArrowOffset+f;break}y.overflow=$oe(v,T,t,o),h&&(y.htmlRegion="visibleFirst")}),m}const zoe=e=>{const t=e!=null&&e.algorithm?$v(e.algorithm):$v(om),o=Object.assign(Object.assign({},im),e==null?void 0:e.token);return Q3(o,{override:e==null?void 0:e.token},t,pB)},Koe=zoe;function Yoe(e){const{sizeUnit:t,sizeStep:o}=e,s=o-2;return{sizeXXL:t*(s+10),sizeXL:t*(s+6),sizeLG:t*(s+2),sizeMD:t*(s+2),sizeMS:t*(s+1),size:t*s,sizeSM:t*s,sizeXS:t*(s-1),sizeXXS:t*(s-1)}}const qoe=(e,t)=>{const o=t??om(e),s=o.fontSizeSM,c=o.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o),Yoe(t??e)),hB(s)),{controlHeight:c}),uB(Object.assign(Object.assign({},o),{controlHeight:c})))},Xoe=qoe,sl=(e,t)=>new Vi(e).setAlpha(t).toRgbString(),Hd=(e,t)=>new Vi(e).lighten(t).toHexString(),Joe=e=>{const t=Tc(e,{theme:"dark"});return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[6],6:t[5],7:t[4],8:t[6],9:t[5],10:t[4]}},Qoe=(e,t)=>{const o=e||"#000",s=t||"#fff";return{colorBgBase:o,colorTextBase:s,colorText:sl(s,.85),colorTextSecondary:sl(s,.65),colorTextTertiary:sl(s,.45),colorTextQuaternary:sl(s,.25),colorFill:sl(s,.18),colorFillSecondary:sl(s,.12),colorFillTertiary:sl(s,.08),colorFillQuaternary:sl(s,.04),colorBgElevated:Hd(o,12),colorBgContainer:Hd(o,8),colorBgLayout:Hd(o,0),colorBgSpotlight:Hd(o,26),colorBorder:Hd(o,26),colorBorderSecondary:Hd(o,19)}},Zoe=(e,t)=>{const o=Object.keys(bw).map(c=>{const u=Tc(e[c],{theme:"dark"});return new Array(10).fill(1).reduce((h,f,m)=>(h[`${c}-${m+1}`]=u[m],h[`${c}${m+1}`]=u[m],h),{})}).reduce((c,u)=>(c=Object.assign(Object.assign({},c),u),c),{}),s=t??om(e);return Object.assign(Object.assign(Object.assign({},s),o),dB(e,{generateColorPalettes:Joe,generateNeutralColorPalettes:Qoe}))},eae=Zoe;function tae(){const[e,t,o]=am();return{theme:e,token:t,hashId:o}}const nae={defaultConfig:Wv,defaultSeed:Wv.token,useToken:tae,defaultAlgorithm:om,darkAlgorithm:eae,compactAlgorithm:Xoe,getDesignToken:Koe},rae=e=>{const{componentCls:t,tooltipMaxWidth:o,tooltipColor:s,tooltipBg:c,tooltipBorderRadius:u,zIndexPopup:h,controlHeight:f,boxShadowSecondary:m,paddingSM:v,paddingXS:_,tooltipRadiusOuter:y}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},BE(e)),{position:"absolute",zIndex:h,display:"block",width:"max-content",maxWidth:o,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":c,[`${t}-inner`]:{minWidth:f,minHeight:f,padding:`${v/2}px ${_}px`,color:s,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:c,borderRadius:u,boxShadow:m,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${t}-inner`]:{borderRadius:Math.min(u,o8)}},[`${t}-content`]:{position:"relative"}}),bte(e,(T,A)=>{let{darkColor:I}=A;return{[`&${t}-${T}`]:{[`${t}-inner`]:{backgroundColor:I},[`${t}-arrow`]:{"--antd-arrow-background-color":I}}}})),{"&-rtl":{direction:"rtl"}})},Boe(Ho(e,{borderRadiusOuter:y}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:u,limitVerticalRadius:!0}),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},s8=(e,t)=>Uu("Tooltip",s=>{if(t===!1)return[];const{borderRadius:c,colorTextLightSolid:u,colorBgDefault:h,borderRadiusOuter:f}=s,m=Ho(s,{tooltipMaxWidth:250,tooltipColor:u,tooltipBorderRadius:c,tooltipBg:h,tooltipRadiusOuter:f>4?4:f});return[rae(m),ZB(s,"zoom-big-fast")]},s=>{let{zIndexPopupBase:c,colorBgSpotlight:u}=s;return{zIndexPopup:c+70,colorBgDefault:u}},{resetStyle:!1})(e),iae=Hv.map(e=>`${e}-inverse`);function oae(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(dt(iae),dt(Hv)).includes(e):Hv.includes(e)}function c8(e,t){const o=oae(t),s=ot({[`${e}-${t}`]:t&&o}),c={},u={};return t&&!o&&(c.background=t,u["--antd-arrow-background-color"]=t),{className:s,overlayStyle:c,arrowStyle:u}}function aae(e){const{prefixCls:t,className:o,placement:s="top",title:c,color:u,overlayInnerStyle:h}=e,{getPrefixCls:f}=b.useContext(wi),m=f("tooltip",t),[v,_]=s8(m,!0),y=c8(m,u),T=Object.assign(Object.assign({},h),y.overlayStyle),A=y.arrowStyle;return v(b.createElement("div",{className:ot(_,m,`${m}-pure`,`${m}-placement-${s}`,o,y.className),style:A},b.createElement("div",{className:`${m}-arrow`}),b.createElement(i8,Object.assign({},e,{className:_,prefixCls:m,overlayInnerStyle:T}),c)))}var sae=globalThis&&globalThis.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const{useToken:cae}=nae,lae=(e,t)=>{const o={},s=Object.assign({},e);return t.forEach(c=>{e&&c in e&&(o[c]=e[c],delete s[c])}),{picked:o,omitted:s}};function uae(e,t){const o=e.type;if((o.__ANT_BUTTON===!0||e.type==="button")&&e.props.disabled||o.__ANT_SWITCH===!0&&(e.props.disabled||e.props.loading)||o.__ANT_RADIO===!0&&e.props.disabled){const{picked:s,omitted:c}=lae(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),u=Object.assign(Object.assign({display:"inline-block"},s),{cursor:"not-allowed",width:e.props.block?"100%":void 0}),h=Object.assign(Object.assign({},c),{pointerEvents:"none"}),f=Dl(e,{style:h,className:null});return b.createElement("span",{style:u,className:ot(e.props.className,`${t}-disabled-compatible-wrapper`)},f)}return e}const l8=b.forwardRef((e,t)=>{var o,s;const{prefixCls:c,openClassName:u,getTooltipContainer:h,overlayClassName:f,color:m,overlayInnerStyle:v,children:_,afterOpenChange:y,afterVisibleChange:T,destroyTooltipOnHide:A,arrow:I=!0,title:O,overlay:L,builtinPlacements:x,arrowPointAtCenter:N=!1,autoAdjustOverflow:D=!0}=e,U=!!I,{token:V}=cae(),{getPopupContainer:j,getPrefixCls:B,direction:Y}=b.useContext(wi),ee=b.useRef(null),H=()=>{var qe;(qe=ee.current)===null||qe===void 0||qe.forceAlign()};b.useImperativeHandle(t,()=>({forceAlign:H,forcePopupAlign:()=>{H()}}));const[Z,J]=Rl(!1,{value:(o=e.open)!==null&&o!==void 0?o:e.visible,defaultValue:(s=e.defaultOpen)!==null&&s!==void 0?s:e.defaultVisible}),X=!O&&!L&&O!==0,ne=qe=>{var Ke,Ge;J(X?!1:qe),X||((Ke=e.onOpenChange)===null||Ke===void 0||Ke.call(e,qe),(Ge=e.onVisibleChange)===null||Ge===void 0||Ge.call(e,qe))},ie=b.useMemo(()=>{var qe,Ke;let Ge=N;return typeof I=="object"&&(Ge=(Ke=(qe=I.pointAtCenter)!==null&&qe!==void 0?qe:I.arrowPointAtCenter)!==null&&Ke!==void 0?Ke:N),x||Goe({arrowPointAtCenter:Ge,autoAdjustOverflow:D,arrowWidth:U?V.sizePopupArrow:0,borderRadius:V.borderRadius,offset:V.marginXXS,visibleFirst:!0})},[N,I,x,V]),ae=b.useMemo(()=>O===0?O:L||O||"",[L,O]),pe=b.createElement(Yne,null,typeof ae=="function"?ae():ae),{getPopupContainer:ue,placement:Se="top",mouseEnterDelay:Ee=.1,mouseLeaveDelay:le=.1,overlayStyle:se,rootClassName:de}=e,he=sae(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),xe=B("tooltip",c),Me=B(),it=e["data-popover-inject"];let Be=Z;!("open"in e)&&!("visible"in e)&&X&&(Be=!1);const Tt=uae(Nu(_)&&!MB(_)?_:b.createElement("span",null,_),xe),It=Tt.props,lt=!It.className||typeof It.className=="string"?ot(It.className,{[u||`${xe}-open`]:!0}):It.className,[Mt,ht]=s8(xe,!it),ze=c8(xe,m),Ut=Object.assign(Object.assign({},v),ze.overlayStyle),Ft=ze.arrowStyle,Vt=ot(f,{[`${xe}-rtl`]:Y==="rtl"},ze.className,de,ht);return Mt(b.createElement(joe,Object.assign({},he,{showArrow:U,placement:Se,mouseEnterDelay:Ee,mouseLeaveDelay:le,prefixCls:xe,overlayClassName:Vt,overlayStyle:Object.assign(Object.assign({},Ft),se),getTooltipContainer:ue||h||j,ref:ee,builtinPlacements:ie,overlay:pe,visible:Be,onVisibleChange:ne,afterVisibleChange:y??T,overlayInnerStyle:Ut,arrowContent:b.createElement("span",{className:`${xe}-arrow-content`}),motion:{motionName:Nre(Me,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!A}),Be?Dl(Tt,{className:lt}):Tt))});l8._InternalPanelDoNotUseOrYouWillBeFired=aae;const Jv=l8;var dae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};const hae=dae;var pae=function(t,o){return b.createElement(Ws,Ve({},t,{ref:o,icon:hae}))};const y4=b.forwardRef(pae);var u8=b.createContext(null);function kw(e,t){return e===void 0?null:"".concat(e,"-").concat(t)}function d8(e){var t=b.useContext(u8);return kw(t,e)}var fae=["children","locked"],_s=b.createContext(null);function mae(e,t){var o=ge({},e);return Object.keys(t).forEach(function(s){var c=t[s];c!==void 0&&(o[s]=c)}),o}function Yf(e){var t=e.children,o=e.locked,s=fn(e,fae),c=b.useContext(_s),u=ME(function(){return mae(c,s)},[c,s],function(h,f){return!o&&(h[0]!==f[0]||!vw(h[1],f[1],!0))});return b.createElement(_s.Provider,{value:u},t)}var gae=[],h8=b.createContext(null);function zE(){return b.useContext(h8)}var p8=b.createContext(gae);function $h(e){var t=b.useContext(p8);return b.useMemo(function(){return e!==void 0?[].concat(dt(t),[e]):t},[t,e])}var f8=b.createContext(null),Lw=b.createContext({});function C4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Aw(e)){var o=e.nodeName.toLowerCase(),s=["input","select","textarea","button"].includes(o)||e.isContentEditable||o==="a"&&!!e.getAttribute("href"),c=e.getAttribute("tabindex"),u=Number(c),h=null;return c&&!Number.isNaN(u)?h=u:s&&h===null&&(h=0),s&&e.disabled&&(h=null),h!==null&&(h>=0||t&&h<0)}return!1}function vae(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=dt(e.querySelectorAll("*")).filter(function(s){return C4(s,t)});return C4(e,t)&&o.unshift(e),o}var QR=ct.LEFT,ZR=ct.RIGHT,eI=ct.UP,ov=ct.DOWN,av=ct.ENTER,m8=ct.ESC,Yp=ct.HOME,qp=ct.END,T4=[eI,ov,QR,ZR];function Eae(e,t,o,s){var c,u,h,f,m="prev",v="next",_="children",y="parent";if(e==="inline"&&s===av)return{inlineTrigger:!0};var T=(c={},Qe(c,eI,m),Qe(c,ov,v),c),A=(u={},Qe(u,QR,o?v:m),Qe(u,ZR,o?m:v),Qe(u,ov,_),Qe(u,av,_),u),I=(h={},Qe(h,eI,m),Qe(h,ov,v),Qe(h,av,_),Qe(h,m8,y),Qe(h,QR,o?_:y),Qe(h,ZR,o?y:_),h),O={inline:T,horizontal:A,vertical:I,inlineSub:T,horizontalSub:I,verticalSub:I},L=(f=O["".concat(e).concat(t?"":"Sub")])===null||f===void 0?void 0:f[s];switch(L){case m:return{offset:-1,sibling:!0};case v:return{offset:1,sibling:!0};case y:return{offset:-1,sibling:!1};case _:return{offset:1,sibling:!1};default:return null}}function _ae(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}function Sae(e,t){for(var o=e||document.activeElement;o;){if(t.has(o))return o;o=o.parentElement}return null}function g8(e,t){var o=vae(e,!0);return o.filter(function(s){return t.has(s)})}function b4(e,t,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!e)return null;var c=g8(e,t),u=c.length,h=c.findIndex(function(f){return o===f});return s<0?h===-1?h=u-1:h-=1:s>0&&(h+=1),h=(h+u)%u,c[h]}function yae(e,t,o,s,c,u,h,f,m,v){var _=b.useRef(),y=b.useRef();y.current=t;var T=function(){_o.cancel(_.current)};return b.useEffect(function(){return function(){T()}},[]),function(A){var I=A.which;if([].concat(T4,[av,m8,Yp,qp]).includes(I)){var O,L,x,N=function(){O=new Set,L=new Map,x=new Map;var ie=u();return ie.forEach(function(ae){var pe=document.querySelector("[data-menu-id='".concat(kw(s,ae),"']"));pe&&(O.add(pe),x.set(pe,ae),L.set(ae,pe))}),O};N();var D=L.get(t),U=Sae(D,O),V=x.get(U),j=Eae(e,h(V,!0).length===1,o,I);if(!j&&I!==Yp&&I!==qp)return;(T4.includes(I)||[Yp,qp].includes(I))&&A.preventDefault();var B=function(ie){if(ie){var ae=ie,pe=ie.querySelector("a");pe!=null&&pe.getAttribute("href")&&(ae=pe);var ue=x.get(ie);f(ue),T(),_.current=_o(function(){y.current===ue&&ae.focus()})}};if([Yp,qp].includes(I)||j.sibling||!U){var Y;!U||e==="inline"?Y=c.current:Y=_ae(U);var ee,H=g8(Y,O);I===Yp?ee=H[0]:I===qp?ee=H[H.length-1]:ee=b4(Y,O,U,j.offset),B(ee)}else if(j.inlineTrigger)m(V);else if(j.offset>0)m(V,!0),T(),_.current=_o(function(){N();var ne=U.getAttribute("aria-controls"),ie=document.getElementById(ne),ae=b4(ie,O);B(ae)},5);else if(j.offset<0){var Z=h(V,!0),J=Z[Z.length-2],X=L.get(J);m(J,!1),B(X)}}v==null||v(A)}}function Cae(e){Promise.resolve().then(e)}var Mw="__RC_UTIL_PATH_SPLIT__",R4=function(t){return t.join(Mw)},Tae=function(t){return t.split(Mw)},tI="rc-menu-more";function bae(){var e=b.useState({}),t=De(e,2),o=t[1],s=b.useRef(new Map),c=b.useRef(new Map),u=b.useState([]),h=De(u,2),f=h[0],m=h[1],v=b.useRef(0),_=b.useRef(!1),y=function(){_.current||o({})},T=b.useCallback(function(D,U){var V=R4(U);c.current.set(V,D),s.current.set(D,V),v.current+=1;var j=v.current;Cae(function(){j===v.current&&y()})},[]),A=b.useCallback(function(D,U){var V=R4(U);c.current.delete(V),s.current.delete(D)},[]),I=b.useCallback(function(D){m(D)},[]),O=b.useCallback(function(D,U){var V=s.current.get(D)||"",j=Tae(V);return U&&f.includes(j[0])&&j.unshift(tI),j},[f]),L=b.useCallback(function(D,U){return D.some(function(V){var j=O(V,!0);return j.includes(U)})},[O]),x=function(){var U=dt(s.current.keys());return f.length&&U.push(tI),U},N=b.useCallback(function(D){var U="".concat(s.current.get(D)).concat(Mw),V=new Set;return dt(c.current.keys()).forEach(function(j){j.startsWith(U)&&V.add(c.current.get(j))}),V},[]);return b.useEffect(function(){return function(){_.current=!0}},[]),{registerPath:T,unregisterPath:A,refreshOverflowKeys:I,isSubPathKey:L,getKeyPath:O,getKeys:x,getSubPathKeys:N}}function sf(e){var t=b.useRef(e);t.current=e;var o=b.useCallback(function(){for(var s,c=arguments.length,u=new Array(c),h=0;h<c;h++)u[h]=arguments[h];return(s=t.current)===null||s===void 0?void 0:s.call.apply(s,[t].concat(u))},[]);return e?o:void 0}var Rae=Math.random().toFixed(5).toString().slice(2),I4=0;function Iae(e){var t=Rl(e,{value:e}),o=De(t,2),s=o[0],c=o[1];return b.useEffect(function(){I4+=1;var u="".concat(Rae,"-").concat(I4);c("rc-menu-uuid-".concat(u))},[]),s}function v8(e,t,o,s){var c=b.useContext(_s),u=c.activeKey,h=c.onActive,f=c.onInactive,m={active:u===e};return t||(m.onMouseEnter=function(v){o==null||o({key:e,domEvent:v}),h(e)},m.onMouseLeave=function(v){s==null||s({key:e,domEvent:v}),f(e)}),m}function E8(e){var t=b.useContext(_s),o=t.mode,s=t.rtl,c=t.inlineIndent;if(o!=="inline")return null;var u=e;return s?{paddingRight:u*c}:{paddingLeft:u*c}}function _8(e){var t=e.icon,o=e.props,s=e.children,c;return typeof t=="function"?c=b.createElement(t,ge({},o)):c=t,c||s||null}var wae=["item"];function Qv(e){var t=e.item,o=fn(e,wae);return Object.defineProperty(o,"item",{get:function(){return Eo(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),o}var Oae=["title","attribute","elementRef"],Aae=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],Nae=["active"],xae=function(e){Uh(o,e);var t=Fh(o);function o(){return Wa(this,o),t.apply(this,arguments)}return Ga(o,[{key:"render",value:function(){var c=this.props,u=c.title,h=c.attribute,f=c.elementRef,m=fn(c,Oae),v=Hs(m,["eventKey","popupClassName","popupOffset","onTitleClick"]);return Eo(!h,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),b.createElement(Ec.Item,Ve({},h,{title:typeof u=="string"?u:void 0},v,{ref:f}))}}]),o}(b.Component),Pae=b.forwardRef(function(e,t){var o,s=e.style,c=e.className,u=e.eventKey;e.warnKey;var h=e.disabled,f=e.itemIcon,m=e.children,v=e.role,_=e.onMouseEnter,y=e.onMouseLeave,T=e.onClick,A=e.onKeyDown,I=e.onFocus,O=fn(e,Aae),L=d8(u),x=b.useContext(_s),N=x.prefixCls,D=x.onItemClick,U=x.disabled,V=x.overflowDisabled,j=x.itemIcon,B=x.selectedKeys,Y=x.onActive,ee=b.useContext(Lw),H=ee._internalRenderMenuItem,Z="".concat(N,"-item"),J=b.useRef(),X=b.useRef(),ne=U||h,ie=pw(t,X),ae=$h(u),pe=function(It){return{key:u,keyPath:dt(ae).reverse(),item:J.current,domEvent:It}},ue=f||j,Se=v8(u,ne,_,y),Ee=Se.active,le=fn(Se,Nae),se=B.includes(u),de=E8(ae.length),he=function(It){if(!ne){var lt=pe(It);T==null||T(Qv(lt)),D(lt)}},xe=function(It){if(A==null||A(It),It.which===ct.ENTER){var lt=pe(It);T==null||T(Qv(lt)),D(lt)}},Me=function(It){Y(u),I==null||I(It)},it={};e.role==="option"&&(it["aria-selected"]=se);var Be=b.createElement(xae,Ve({ref:J,elementRef:ie,role:v===null?"none":v||"menuitem",tabIndex:h?null:-1,"data-menu-id":V&&L?null:L},O,le,it,{component:"li","aria-disabled":h,style:ge(ge({},de),s),className:ot(Z,(o={},Qe(o,"".concat(Z,"-active"),Ee),Qe(o,"".concat(Z,"-selected"),se),Qe(o,"".concat(Z,"-disabled"),ne),o),c),onClick:he,onKeyDown:xe,onFocus:Me}),m,b.createElement(_8,{props:ge(ge({},e),{},{isSelected:se}),icon:ue}));return H&&(Be=H(Be,e,{selected:se})),Be});function Dae(e,t){var o=e.eventKey,s=zE(),c=$h(o);return b.useEffect(function(){if(s)return s.registerPath(o,c),function(){s.unregisterPath(o,c)}},[c]),s?null:b.createElement(Pae,Ve({},e,{ref:t}))}const KE=b.forwardRef(Dae);var kae=["className","children"],Lae=function(t,o){var s=t.className,c=t.children,u=fn(t,kae),h=b.useContext(_s),f=h.prefixCls,m=h.mode,v=h.rtl;return b.createElement("ul",Ve({className:ot(f,v&&"".concat(f,"-rtl"),"".concat(f,"-sub"),"".concat(f,"-").concat(m==="inline"?"inline":"vertical"),s),role:"menu"},u,{"data-menu-list":!0,ref:o}),c)},Uw=b.forwardRef(Lae);Uw.displayName="SubMenuList";var Mae=["label","children","key","type"];function Fw(e,t){return Ol(e).map(function(o,s){if(b.isValidElement(o)){var c,u,h=o.key,f=(c=(u=o.props)===null||u===void 0?void 0:u.eventKey)!==null&&c!==void 0?c:h,m=f==null;m&&(f="tmp_key-".concat([].concat(dt(t),[s]).join("-")));var v={key:f,eventKey:f};return b.cloneElement(o,v)}return o})}function nI(e){return(e||[]).map(function(t,o){if(t&&An(t)==="object"){var s=t,c=s.label,u=s.children,h=s.key,f=s.type,m=fn(s,Mae),v=h??"tmp-".concat(o);return u||f==="group"?f==="group"?b.createElement(qE,Ve({key:v},m,{title:c}),nI(u)):b.createElement(YE,Ve({key:v},m,{title:c}),nI(u)):f==="divider"?b.createElement(Vw,Ve({key:v},m)):b.createElement(KE,Ve({key:v},m),c)}return null}).filter(function(t){return t})}function Uae(e,t,o){var s=e;return t&&(s=nI(t)),Fw(s,o)}var io={adjustX:1,adjustY:1},Fae={topLeft:{points:["bl","tl"],overflow:io},topRight:{points:["br","tr"],overflow:io},bottomLeft:{points:["tl","bl"],overflow:io},bottomRight:{points:["tr","br"],overflow:io},leftTop:{points:["tr","tl"],overflow:io},leftBottom:{points:["br","bl"],overflow:io},rightTop:{points:["tl","tr"],overflow:io},rightBottom:{points:["bl","br"],overflow:io}},Vae={topLeft:{points:["bl","tl"],overflow:io},topRight:{points:["br","tr"],overflow:io},bottomLeft:{points:["tl","bl"],overflow:io},bottomRight:{points:["tr","br"],overflow:io},rightTop:{points:["tr","tl"],overflow:io},rightBottom:{points:["br","bl"],overflow:io},leftTop:{points:["tl","tr"],overflow:io},leftBottom:{points:["bl","br"],overflow:io}};function S8(e,t,o){if(t)return t;if(o)return o[e]||o.other}var jae={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Bae(e){var t=e.prefixCls,o=e.visible,s=e.children,c=e.popup,u=e.popupClassName,h=e.popupOffset,f=e.disabled,m=e.mode,v=e.onVisibleChange,_=b.useContext(_s),y=_.getPopupContainer,T=_.rtl,A=_.subMenuOpenDelay,I=_.subMenuCloseDelay,O=_.builtinPlacements,L=_.triggerSubMenuAction,x=_.forceSubMenuRender,N=_.rootClassName,D=_.motion,U=_.defaultMotions,V=b.useState(!1),j=De(V,2),B=j[0],Y=j[1],ee=ge(T?ge({},Vae):ge({},Fae),O),H=jae[m],Z=S8(m,D,U),J=b.useRef(Z);m!=="inline"&&(J.current=Z);var X=ge(ge({},J.current),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),ne=b.useRef();return b.useEffect(function(){return ne.current=_o(function(){Y(o)}),function(){_o.cancel(ne.current)}},[o]),b.createElement(r8,{prefixCls:t,popupClassName:ot("".concat(t,"-popup"),Qe({},"".concat(t,"-rtl"),T),u,N),stretch:m==="horizontal"?"minWidth":null,getPopupContainer:y,builtinPlacements:ee,popupPlacement:H,popupVisible:B,popup:c,popupAlign:h&&{offset:h},action:f?[]:[L],mouseEnterDelay:A,mouseLeaveDelay:I,onPopupVisibleChange:v,forceRender:x,popupMotion:X},s)}function $ae(e){var t=e.id,o=e.open,s=e.keyPath,c=e.children,u="inline",h=b.useContext(_s),f=h.prefixCls,m=h.forceSubMenuRender,v=h.motion,_=h.defaultMotions,y=h.mode,T=b.useRef(!1);T.current=y===u;var A=b.useState(!T.current),I=De(A,2),O=I[0],L=I[1],x=T.current?o:!1;b.useEffect(function(){T.current&&L(!1)},[y]);var N=ge({},S8(u,v,_));s.length>1&&(N.motionAppear=!1);var D=N.onVisibleChanged;return N.onVisibleChanged=function(U){return!T.current&&!U&&L(!0),D==null?void 0:D(U)},O?null:b.createElement(Yf,{mode:u,locked:!T.current},b.createElement(jh,Ve({visible:x},N,{forceRender:m,removeOnLeave:!1,leavedClassName:"".concat(f,"-hidden")}),function(U){var V=U.className,j=U.style;return b.createElement(Uw,{id:t,className:V,style:j},c)}))}var Hae=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Wae=["active"],Gae=function(t){var o,s=t.style,c=t.className,u=t.title,h=t.eventKey;t.warnKey;var f=t.disabled,m=t.internalPopupClose,v=t.children,_=t.itemIcon,y=t.expandIcon,T=t.popupClassName,A=t.popupOffset,I=t.onClick,O=t.onMouseEnter,L=t.onMouseLeave,x=t.onTitleClick,N=t.onTitleMouseEnter,D=t.onTitleMouseLeave,U=fn(t,Hae),V=d8(h),j=b.useContext(_s),B=j.prefixCls,Y=j.mode,ee=j.openKeys,H=j.disabled,Z=j.overflowDisabled,J=j.activeKey,X=j.selectedKeys,ne=j.itemIcon,ie=j.expandIcon,ae=j.onItemClick,pe=j.onOpenChange,ue=j.onActive,Se=b.useContext(Lw),Ee=Se._internalRenderSubMenuItem,le=b.useContext(f8),se=le.isSubPathKey,de=$h(),he="".concat(B,"-submenu"),xe=H||f,Me=b.useRef(),it=b.useRef(),Be=_||ne,Tt=y||ie,It=ee.includes(h),lt=!Z&&It,Mt=se(X,h),ht=v8(h,xe,N,D),ze=ht.active,Ut=fn(ht,Wae),Ft=b.useState(!1),Vt=De(Ft,2),qe=Vt[0],Ke=Vt[1],Ge=function(Jt){xe||Ke(Jt)},rt=function(Jt){Ge(!0),O==null||O({key:h,domEvent:Jt})},pt=function(Jt){Ge(!1),L==null||L({key:h,domEvent:Jt})},Nt=b.useMemo(function(){return ze||(Y!=="inline"?qe||se([J],h):!1)},[Y,ze,J,qe,h,se]),yt=E8(de.length),xt=function(Jt){xe||(x==null||x({key:h,domEvent:Jt}),Y==="inline"&&pe(h,!It))},Yt=sf(function(Xt){I==null||I(Qv(Xt)),ae(Xt)}),Nn=function(Jt){Y!=="inline"&&pe(h,Jt)},vi=function(){ue(h)},ur=V&&"".concat(V,"-popup"),Wn=b.createElement("div",Ve({role:"menuitem",style:yt,className:"".concat(he,"-title"),tabIndex:xe?null:-1,ref:Me,title:typeof u=="string"?u:null,"data-menu-id":Z&&V?null:V,"aria-expanded":lt,"aria-haspopup":!0,"aria-controls":ur,"aria-disabled":xe,onClick:xt,onFocus:vi},Ut),u,b.createElement(_8,{icon:Y!=="horizontal"?Tt:null,props:ge(ge({},t),{},{isOpen:lt,isSubMenu:!0})},b.createElement("i",{className:"".concat(he,"-arrow")}))),mn=b.useRef(Y);if(Y!=="inline"&&de.length>1?mn.current="vertical":mn.current=Y,!Z){var Or=mn.current;Wn=b.createElement(Bae,{mode:Or,prefixCls:he,visible:!m&&lt&&Y!=="inline",popupClassName:T,popupOffset:A,popup:b.createElement(Yf,{mode:Or==="horizontal"?"vertical":Or},b.createElement(Uw,{id:ur,ref:it},v)),disabled:xe,onVisibleChange:Nn},Wn)}var Cn=b.createElement(Ec.Item,Ve({role:"none"},U,{component:"li",style:s,className:ot(he,"".concat(he,"-").concat(Y),c,(o={},Qe(o,"".concat(he,"-open"),lt),Qe(o,"".concat(he,"-active"),Nt),Qe(o,"".concat(he,"-selected"),Mt),Qe(o,"".concat(he,"-disabled"),xe),o)),onMouseEnter:rt,onMouseLeave:pt}),Wn,!Z&&b.createElement($ae,{id:ur,open:lt,keyPath:de},v));return Ee&&(Cn=Ee(Cn,t,{selected:Mt,active:Nt,open:lt,disabled:xe})),b.createElement(Yf,{onItemClick:Yt,mode:Y==="horizontal"?"vertical":Y,itemIcon:Be,expandIcon:Tt},Cn)};function YE(e){var t=e.eventKey,o=e.children,s=$h(t),c=Fw(o,s),u=zE();b.useEffect(function(){if(u)return u.registerPath(t,s),function(){u.unregisterPath(t,s)}},[s]);var h;return u?h=c:h=b.createElement(Gae,e,c),b.createElement(p8.Provider,{value:s},h)}var zae=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],Wd=[],Kae=b.forwardRef(function(e,t){var o,s,c=e,u=c.prefixCls,h=u===void 0?"rc-menu":u,f=c.rootClassName,m=c.style,v=c.className,_=c.tabIndex,y=_===void 0?0:_,T=c.items,A=c.children,I=c.direction,O=c.id,L=c.mode,x=L===void 0?"vertical":L,N=c.inlineCollapsed,D=c.disabled,U=c.disabledOverflow,V=c.subMenuOpenDelay,j=V===void 0?.1:V,B=c.subMenuCloseDelay,Y=B===void 0?.1:B,ee=c.forceSubMenuRender,H=c.defaultOpenKeys,Z=c.openKeys,J=c.activeKey,X=c.defaultActiveFirst,ne=c.selectable,ie=ne===void 0?!0:ne,ae=c.multiple,pe=ae===void 0?!1:ae,ue=c.defaultSelectedKeys,Se=c.selectedKeys,Ee=c.onSelect,le=c.onDeselect,se=c.inlineIndent,de=se===void 0?24:se,he=c.motion,xe=c.defaultMotions,Me=c.triggerSubMenuAction,it=Me===void 0?"hover":Me,Be=c.builtinPlacements,Tt=c.itemIcon,It=c.expandIcon,lt=c.overflowedIndicator,Mt=lt===void 0?"...":lt,ht=c.overflowedIndicatorPopupClassName,ze=c.getPopupContainer,Ut=c.onClick,Ft=c.onOpenChange,Vt=c.onKeyDown;c.openAnimation,c.openTransitionName;var qe=c._internalRenderMenuItem,Ke=c._internalRenderSubMenuItem,Ge=fn(c,zae),rt=b.useMemo(function(){return Uae(A,T,Wd)},[A,T]),pt=b.useState(!1),Nt=De(pt,2),yt=Nt[0],xt=Nt[1],Yt=b.useRef(),Nn=Iae(O),vi=I==="rtl",ur=Rl(H,{value:Z,postState:function(En){return En||Wd}}),Wn=De(ur,2),mn=Wn[0],Or=Wn[1],Cn=function(En){var xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function Gr(){Or(En),Ft==null||Ft(En)}xn?Du.flushSync(Gr):Gr()},Xt=b.useState(mn),Jt=De(Xt,2),To=Jt[0],Gi=Jt[1],yr=b.useRef(!1),gn=b.useMemo(function(){return(x==="inline"||x==="vertical")&&N?["vertical",N]:[x,!1]},[x,N]),Ue=De(gn,2),tt=Ue[0],vn=Ue[1],kt=tt==="inline",Ei=b.useState(tt),Ar=De(Ei,2),qn=Ar[0],mt=Ar[1],Qt=b.useState(vn),an=De(Qt,2),vr=an[0],si=an[1];b.useEffect(function(){mt(tt),si(vn),yr.current&&(kt?Or(To):Cn(Wd))},[tt,vn]);var Cr=b.useState(0),Nr=De(Cr,2),Ai=Nr[0],zi=Nr[1],co=Ai>=rt.length-1||qn!=="horizontal"||U;b.useEffect(function(){kt&&Gi(mn)},[mn]),b.useEffect(function(){return yr.current=!0,function(){yr.current=!1}},[]);var lo=bae(),zs=lo.registerPath,Hr=lo.unregisterPath,Ks=lo.refreshOverflowKeys,wc=lo.isSubPathKey,Xn=lo.getKeyPath,Oc=lo.getKeys,Ni=lo.getSubPathKeys,Ac=b.useMemo(function(){return{registerPath:zs,unregisterPath:Hr}},[zs,Hr]),Nc=b.useMemo(function(){return{isSubPathKey:wc}},[wc]);b.useEffect(function(){Ks(co?Wd:rt.slice(Ai+1).map(function(Vn){return Vn.key}))},[Ai,co]);var Go=Rl(J||X&&((o=rt[0])===null||o===void 0?void 0:o.key),{value:J}),Ys=De(Go,2),Ka=Ys[0],bo=Ys[1],xc=sf(function(Vn){bo(Vn)}),Pc=sf(function(){bo(void 0)});b.useImperativeHandle(t,function(){return{list:Yt.current,focus:function(En){var xn,Gr=Ka??((xn=rt.find(function(Ya){return!Ya.props.disabled}))===null||xn===void 0?void 0:xn.key);if(Gr){var xr,uo,Ki;(xr=Yt.current)===null||xr===void 0||(uo=xr.querySelector("li[data-menu-id='".concat(kw(Nn,Gr),"']")))===null||uo===void 0||(Ki=uo.focus)===null||Ki===void 0||Ki.call(uo,En)}}}});var Ca=Rl(ue||[],{value:Se,postState:function(En){return Array.isArray(En)?En:En==null?Wd:[En]}}),ci=De(Ca,2),Wr=ci[0],zo=ci[1],qs=function(En){if(ie){var xn=En.key,Gr=Wr.includes(xn),xr;pe?Gr?xr=Wr.filter(function(Ki){return Ki!==xn}):xr=[].concat(dt(Wr),[xn]):xr=[xn],zo(xr);var uo=ge(ge({},En),{},{selectedKeys:xr});Gr?le==null||le(uo):Ee==null||Ee(uo)}!pe&&mn.length&&qn!=="inline"&&Cn(Wd)},or=sf(function(Vn){Ut==null||Ut(Qv(Vn)),qs(Vn)}),Xs=sf(function(Vn,En){var xn=mn.filter(function(xr){return xr!==Vn});if(En)xn.push(Vn);else if(qn!=="inline"){var Gr=Ni(Vn);xn=xn.filter(function(xr){return!Gr.has(xr)})}vw(mn,xn,!0)||Cn(xn,!0)}),Dc=function(En,xn){var Gr=xn??!mn.includes(En);Xs(En,Gr)},Cs=yae(qn,Ka,vi,Nn,Yt,Oc,Xn,bo,Dc,Vt);b.useEffect(function(){xt(!0)},[]);var kl=b.useMemo(function(){return{_internalRenderMenuItem:qe,_internalRenderSubMenuItem:Ke}},[qe,Ke]),Ll=qn!=="horizontal"||U?rt:rt.map(function(Vn,En){return b.createElement(Yf,{key:Vn.key,overflowDisabled:En>Ai},Vn)}),Ml=b.createElement(Ec,Ve({id:O,ref:Yt,prefixCls:"".concat(h,"-overflow"),component:"ul",itemComponent:KE,className:ot(h,"".concat(h,"-root"),"".concat(h,"-").concat(qn),v,(s={},Qe(s,"".concat(h,"-inline-collapsed"),vr),Qe(s,"".concat(h,"-rtl"),vi),s),f),dir:I,style:m,role:"menu",tabIndex:y,data:Ll,renderRawItem:function(En){return En},renderRawRest:function(En){var xn=En.length,Gr=xn?rt.slice(-xn):null;return b.createElement(YE,{eventKey:tI,title:Mt,disabled:co,internalPopupClose:xn===0,popupClassName:ht},Gr)},maxCount:qn!=="horizontal"||U?Ec.INVALIDATE:Ec.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(En){zi(En)},onKeyDown:Cs},Ge));return b.createElement(Lw.Provider,{value:kl},b.createElement(u8.Provider,{value:Nn},b.createElement(Yf,{prefixCls:h,rootClassName:f,mode:qn,openKeys:mn,rtl:vi,disabled:D,motion:yt?he:null,defaultMotions:yt?xe:null,activeKey:Ka,onActive:xc,onInactive:Pc,selectedKeys:Wr,inlineIndent:de,subMenuOpenDelay:j,subMenuCloseDelay:Y,forceSubMenuRender:ee,builtinPlacements:Be,triggerSubMenuAction:it,getPopupContainer:ze,itemIcon:Tt,expandIcon:It,onItemClick:or,onOpenChange:Xs},b.createElement(f8.Provider,{value:Nc},Ml),b.createElement("div",{style:{display:"none"},"aria-hidden":!0},b.createElement(h8.Provider,{value:Ac},rt)))))}),Yae=["className","title","eventKey","children"],qae=["children"],Xae=function(t){var o=t.className,s=t.title;t.eventKey;var c=t.children,u=fn(t,Yae),h=b.useContext(_s),f=h.prefixCls,m="".concat(f,"-item-group");return b.createElement("li",Ve({role:"presentation"},u,{onClick:function(_){return _.stopPropagation()},className:ot(m,o)}),b.createElement("div",{role:"presentation",className:"".concat(m,"-title"),title:typeof s=="string"?s:void 0},s),b.createElement("ul",{role:"group",className:"".concat(m,"-list")},c))};function qE(e){var t=e.children,o=fn(e,qae),s=$h(o.eventKey),c=Fw(t,s),u=zE();return u?c:b.createElement(Xae,Hs(o,["warnKey"]),c)}function Vw(e){var t=e.className,o=e.style,s=b.useContext(_s),c=s.prefixCls,u=zE();return u?null:b.createElement("li",{className:ot("".concat(c,"-item-divider"),t),style:o})}var hm=Kae;hm.Item=KE;hm.SubMenu=YE;hm.ItemGroup=qE;hm.Divider=Vw;var Jae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"};const Qae=Jae;var Zae=function(t,o){return b.createElement(Ws,Ve({},t,{ref:o,icon:Qae}))};const ese=b.forwardRef(Zae),tse=b.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),Zv=tse;globalThis&&globalThis.__rest;const nse=b.createContext(null),w4=nse;var rse=globalThis&&globalThis.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const ise=e=>{const{prefixCls:t,className:o,dashed:s}=e,c=rse(e,["prefixCls","className","dashed"]),{getPrefixCls:u}=b.useContext(wi),h=u("menu",t),f=ot({[`${h}-item-divider-dashed`]:!!s},o);return b.createElement(Vw,Object.assign({className:f},c))},y8=ise;var ose={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"};const ase=ose;var sse=function(t,o){return b.createElement(Ws,Ve({},t,{ref:o,icon:ase}))};const cse=b.forwardRef(sse);var lse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};const use=lse;var dse=function(t,o){return b.createElement(Ws,Ve({},t,{ref:o,icon:use}))};const O4=b.forwardRef(dse),hse=e=>!isNaN(parseFloat(e))&&isFinite(e),pse=hse,fse=e=>{const{componentCls:t,colorBgContainer:o,colorBgBody:s,colorText:c}=e;return{[`${t}-sider-light`]:{background:o,[`${t}-sider-trigger`]:{color:c,background:o},[`${t}-sider-zero-width-trigger`]:{color:c,background:o,border:`1px solid ${s}`,borderInlineStart:0}}}},mse=fse,gse=e=>{const{antCls:t,componentCls:o,colorText:s,colorTextLightSolid:c,colorBgHeader:u,colorBgBody:h,colorBgTrigger:f,layoutHeaderHeight:m,layoutHeaderPaddingInline:v,layoutHeaderColor:_,layoutFooterPadding:y,layoutTriggerHeight:T,layoutZeroTriggerSize:A,motionDurationMid:I,motionDurationSlow:O,fontSize:L,borderRadius:x}=e;return{[o]:Object.assign(Object.assign({display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:h,"&, *":{boxSizing:"border-box"},[`&${o}-has-sider`]:{flexDirection:"row",[`> ${o}, > ${o}-content`]:{width:0}},[`${o}-header, &${o}-footer`]:{flex:"0 0 auto"},[`${o}-sider`]:{position:"relative",minWidth:0,background:u,transition:`all ${I}, background 0s`,"&-children":{height:"100%",marginTop:-.1,paddingTop:.1,[`${t}-menu${t}-menu-inline-collapsed`]:{width:"auto"}},"&-has-trigger":{paddingBottom:T},"&-right":{order:1},"&-trigger":{position:"fixed",bottom:0,zIndex:1,height:T,color:c,lineHeight:`${T}px`,textAlign:"center",background:f,cursor:"pointer",transition:`all ${I}`},"&-zero-width":{"> *":{overflow:"hidden"},"&-trigger":{position:"absolute",top:m,insetInlineEnd:-A,zIndex:1,width:A,height:A,color:c,fontSize:e.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:u,borderStartStartRadius:0,borderStartEndRadius:x,borderEndEndRadius:x,borderEndStartRadius:0,cursor:"pointer",transition:`background ${O} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${O}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:-A,borderStartStartRadius:x,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:x}}}}},mse(e)),{"&-rtl":{direction:"rtl"}}),[`${o}-header`]:{height:m,paddingInline:v,color:_,lineHeight:`${m}px`,background:u,[`${t}-menu`]:{lineHeight:"inherit"}},[`${o}-footer`]:{padding:y,color:s,fontSize:L,background:h},[`${o}-content`]:{flex:"auto",minHeight:0}}},C8=Uu("Layout",e=>{const{colorText:t,controlHeightSM:o,controlHeight:s,controlHeightLG:c,marginXXS:u}=e,h=c*1.25,f=Ho(e,{layoutHeaderHeight:s*2,layoutHeaderPaddingInline:h,layoutHeaderColor:t,layoutFooterPadding:`${o}px ${h}px`,layoutTriggerHeight:c+u*2,layoutZeroTriggerSize:c});return[gse(f)]},e=>{const{colorBgLayout:t}=e;return{colorBgHeader:"#001529",colorBgBody:t,colorBgTrigger:"#002140"}});var T8=globalThis&&globalThis.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const b8=b.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}});function XE(e){let{suffixCls:t,tagName:o,displayName:s}=e;return c=>b.forwardRef((h,f)=>b.createElement(c,Object.assign({ref:f,suffixCls:t,tagName:o},h)))}const jw=b.forwardRef((e,t)=>{const{prefixCls:o,suffixCls:s,className:c,tagName:u}=e,h=T8(e,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:f}=b.useContext(wi),m=f("layout",o),[v,_]=C8(m),y=s?`${m}-${s}`:m;return v(b.createElement(u,Object.assign({className:ot(o||y,c,_),ref:t},h)))}),vse=b.forwardRef((e,t)=>{const{direction:o}=b.useContext(wi),[s,c]=b.useState([]),{prefixCls:u,className:h,rootClassName:f,children:m,hasSider:v,tagName:_}=e,y=T8(e,["prefixCls","className","rootClassName","children","hasSider","tagName"]),T=Hs(y,["suffixCls"]),{getPrefixCls:A}=b.useContext(wi),I=A("layout",u),[O,L]=C8(I),x=ot(I,{[`${I}-has-sider`]:typeof v=="boolean"?v:s.length>0,[`${I}-rtl`]:o==="rtl"},h,f,L),N=b.useMemo(()=>({siderHook:{addSider:D=>{c(U=>[].concat(dt(U),[D]))},removeSider:D=>{c(U=>U.filter(V=>V!==D))}}}),[]);return O(b.createElement(b8.Provider,{value:N},b.createElement(_,Object.assign({ref:t,className:x},T),m)))}),Ese=XE({tagName:"section",displayName:"Layout"})(vse),_se=XE({suffixCls:"header",tagName:"header",displayName:"Header"})(jw),Sse=XE({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(jw),yse=XE({suffixCls:"content",tagName:"main",displayName:"Content"})(jw),Cse=Ese;var Tse=globalThis&&globalThis.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const A4={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},Bw=b.createContext({}),bse=(()=>{let e=0;return function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e+=1,`${t}${e}`}})(),Rse=b.forwardRef((e,t)=>{var{prefixCls:o,className:s,trigger:c,children:u,defaultCollapsed:h=!1,theme:f="dark",style:m={},collapsible:v=!1,reverseArrow:_=!1,width:y=200,collapsedWidth:T=80,zeroWidthTriggerStyle:A,breakpoint:I,onCollapse:O,onBreakpoint:L}=e,x=Tse(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]);const{siderHook:N}=b.useContext(b8),[D,U]=b.useState("collapsed"in x?x.collapsed:h),[V,j]=b.useState(!1);b.useEffect(()=>{"collapsed"in x&&U(x.collapsed)},[x.collapsed]);const B=(X,ne)=>{"collapsed"in x||U(X),O==null||O(X,ne)},Y=b.useRef();Y.current=X=>{j(X.matches),L==null||L(X.matches),D!==X.matches&&B(X.matches,"responsive")},b.useEffect(()=>{function X(ie){return Y.current(ie)}let ne;if(typeof window<"u"){const{matchMedia:ie}=window;if(ie&&I&&I in A4){ne=ie(`(max-width: ${A4[I]})`);try{ne.addEventListener("change",X)}catch{ne.addListener(X)}X(ne)}}return()=>{try{ne==null||ne.removeEventListener("change",X)}catch{ne==null||ne.removeListener(X)}}},[I]),b.useEffect(()=>{const X=bse("ant-sider-");return N.addSider(X),()=>N.removeSider(X)},[]);const ee=()=>{B(!D,"clickTrigger")},{getPrefixCls:H}=b.useContext(wi),Z=()=>{const X=H("layout-sider",o),ne=Hs(x,["collapsed"]),ie=D?T:y,ae=pse(ie)?`${ie}px`:String(ie),pe=parseFloat(String(T||0))===0?b.createElement("span",{onClick:ee,className:ot(`${X}-zero-width-trigger`,`${X}-zero-width-trigger-${_?"right":"left"}`),style:A},c||b.createElement(cse,null)):null,Ee={expanded:_?b.createElement(y4,null):b.createElement(O4,null),collapsed:_?b.createElement(O4,null):b.createElement(y4,null)}[D?"collapsed":"expanded"],le=c!==null?pe||b.createElement("div",{className:`${X}-trigger`,onClick:ee,style:{width:ae}},c||Ee):null,se=Object.assign(Object.assign({},m),{flex:`0 0 ${ae}`,maxWidth:ae,minWidth:ae,width:ae}),de=ot(X,`${X}-${f}`,{[`${X}-collapsed`]:!!D,[`${X}-has-trigger`]:v&&c!==null&&!pe,[`${X}-below`]:!!V,[`${X}-zero-width`]:parseFloat(ae)===0},s);return b.createElement("aside",Object.assign({className:de},ne,{style:se,ref:t}),b.createElement("div",{className:`${X}-children`},u),v||V&&pe?le:null)},J=b.useMemo(()=>({siderCollapsed:D}),[D]);return b.createElement(Bw.Provider,{value:J},Z())}),Ise=Rse,wse=e=>{var t;const{className:o,children:s,icon:c,title:u,danger:h}=e,{prefixCls:f,firstLevel:m,direction:v,disableMenuItemTitleTooltip:_,inlineCollapsed:y}=b.useContext(Zv),T=N=>{const D=b.createElement("span",{className:`${f}-title-content`},s);return(!c||Nu(s)&&s.type==="span")&&s&&N&&m&&typeof s=="string"?b.createElement("div",{className:`${f}-inline-collapsed-noicon`},s.charAt(0)):D},{siderCollapsed:A}=b.useContext(Bw);let I=u;typeof u>"u"?I=m?s:"":u===!1&&(I="");const O={title:I};!A&&!y&&(O.title=null,O.open=!1);const L=Ol(s).length;let x=b.createElement(KE,Object.assign({},Hs(e,["title","icon","danger"]),{className:ot({[`${f}-item-danger`]:h,[`${f}-item-only-child`]:(c?L+1:L)===1},o),title:typeof u=="string"?u:void 0}),Dl(c,{className:ot(Nu(c)?(t=c.props)===null||t===void 0?void 0:t.className:"",`${f}-item-icon`)}),T(y));return _||(x=b.createElement(Jv,Object.assign({},O,{placement:v==="rtl"?"left":"right",overlayClassName:`${f}-inline-collapsed-tooltip`}),x)),x},R8=wse,Ose=e=>{var t;const{popupClassName:o,icon:s,title:c,theme:u}=e,h=b.useContext(Zv),{prefixCls:f,inlineCollapsed:m,theme:v}=h,_=$h();let y;if(!s)y=m&&!_.length&&c&&typeof c=="string"?b.createElement("div",{className:`${f}-inline-collapsed-noicon`},c.charAt(0)):b.createElement("span",{className:`${f}-title-content`},c);else{const A=Nu(c)&&c.type==="span";y=b.createElement(b.Fragment,null,Dl(s,{className:ot(Nu(s)?(t=s.props)===null||t===void 0?void 0:t.className:"",`${f}-item-icon`)}),A?c:b.createElement("span",{className:`${f}-title-content`},c))}const T=b.useMemo(()=>Object.assign(Object.assign({},h),{firstLevel:!1}),[h]);return b.createElement(Zv.Provider,{value:T},b.createElement(YE,Object.assign({},Hs(e,["icon"]),{title:y,popupClassName:ot(f,o,`${f}-${u||v}`)})))},I8=Ose;var Ase=globalThis&&globalThis.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function rI(e){return(e||[]).map((t,o)=>{if(t&&typeof t=="object"){const s=t,{label:c,children:u,key:h,type:f}=s,m=Ase(s,["label","children","key","type"]),v=h??`tmp-${o}`;return u||f==="group"?f==="group"?b.createElement(qE,Object.assign({key:v},m,{title:c}),rI(u)):b.createElement(I8,Object.assign({key:v},m,{title:c}),rI(u)):f==="divider"?b.createElement(y8,Object.assign({key:v},m)):b.createElement(R8,Object.assign({key:v},m),c)}return null}).filter(t=>t)}function Nse(e){return b.useMemo(()=>e&&rI(e),[e])}const xse=e=>{const{componentCls:t,motionDurationSlow:o,menuHorizontalHeight:s,colorSplit:c,lineWidth:u,lineType:h,menuItemPaddingInline:f}=e;return{[`${t}-horizontal`]:{lineHeight:`${s}px`,border:0,borderBottom:`${u}px ${h} ${c}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${t}-item, ${t}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:f},[`> ${t}-item:hover,
        > ${t}-item-active,
        > ${t}-submenu ${t}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${t}-item, ${t}-submenu-title`]:{transition:[`border-color ${o}`,`background ${o}`].join(",")},[`${t}-submenu-arrow`]:{display:"none"}}}},Pse=xse,Dse=e=>{let{componentCls:t,menuArrowOffset:o}=e;return{[`${t}-rtl`]:{direction:"rtl"},[`${t}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${t}-rtl${t}-vertical,
    ${t}-submenu-rtl ${t}-vertical`]:{[`${t}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(-${o})`},"&::after":{transform:`rotate(45deg) translateY(${o})`}}}}},kse=Dse,N4=e=>Object.assign({},vB(e)),Lse=(e,t)=>{const{componentCls:o,itemColor:s,itemSelectedColor:c,groupTitleColor:u,itemBg:h,subMenuItemBg:f,itemSelectedBg:m,activeBarHeight:v,activeBarWidth:_,activeBarBorderWidth:y,motionDurationSlow:T,motionEaseInOut:A,motionEaseOut:I,menuItemPaddingInline:O,motionDurationMid:L,itemHoverColor:x,lineType:N,colorSplit:D,itemDisabledColor:U,dangerItemColor:V,dangerItemHoverColor:j,dangerItemSelectedColor:B,dangerItemActiveBg:Y,dangerItemSelectedBg:ee,itemHoverBg:H,menuSubMenuBg:Z,horizontalItemSelectedColor:J,horizontalItemSelectedBg:X,horizontalItemBorderRadius:ne,horizontalItemHoverBg:ie}=e;return{[`${o}-${t}, ${o}-${t} > ${o}`]:{color:s,background:h,[`&${o}-root:focus-visible`]:Object.assign({},N4(e)),[`${o}-item-group-title`]:{color:u},[`${o}-submenu-selected`]:{[`> ${o}-submenu-title`]:{color:c}},[`${o}-item-disabled, ${o}-submenu-disabled`]:{color:`${U} !important`},[`${o}-item:hover, ${o}-submenu-title:hover`]:{[`&:not(${o}-item-selected):not(${o}-submenu-selected)`]:{color:x}},[`&:not(${o}-horizontal)`]:{[`${o}-item:not(${o}-item-selected)`]:{"&:hover":{backgroundColor:H},"&:active":{backgroundColor:m}},[`${o}-submenu-title`]:{"&:hover":{backgroundColor:H},"&:active":{backgroundColor:m}}},[`${o}-item-danger`]:{color:V,[`&${o}-item:hover`]:{[`&:not(${o}-item-selected):not(${o}-submenu-selected)`]:{color:j}},[`&${o}-item:active`]:{background:Y}},[`${o}-item a`]:{"&, &:hover":{color:"inherit"}},[`${o}-item-selected`]:{color:c,[`&${o}-item-danger`]:{color:B},"a, a:hover":{color:"inherit"}},[`& ${o}-item-selected`]:{backgroundColor:m,[`&${o}-item-danger`]:{backgroundColor:ee}},[`${o}-item, ${o}-submenu-title`]:{[`&:not(${o}-item-disabled):focus-visible`]:Object.assign({},N4(e))},[`&${o}-submenu > ${o}`]:{backgroundColor:Z},[`&${o}-popup > ${o}`]:{backgroundColor:h},[`&${o}-horizontal`]:Object.assign(Object.assign({},t==="dark"?{borderBottom:0}:{}),{[`> ${o}-item, > ${o}-submenu`]:{top:y,marginTop:-y,marginBottom:0,borderRadius:ne,"&::after":{position:"absolute",insetInline:O,bottom:0,borderBottom:`${v}px solid transparent`,transition:`border-color ${T} ${A}`,content:'""'},"&:hover, &-active, &-open":{background:ie,"&::after":{borderBottomWidth:v,borderBottomColor:J}},"&-selected":{color:J,backgroundColor:X,"&::after":{borderBottomWidth:v,borderBottomColor:J}}}}),[`&${o}-root`]:{[`&${o}-inline, &${o}-vertical`]:{borderInlineEnd:`${y}px ${N} ${D}`}},[`&${o}-inline`]:{[`${o}-sub${o}-inline`]:{background:f},[`${o}-item, ${o}-submenu-title`]:y&&_?{width:`calc(100% + ${y}px)`}:{},[`${o}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${_}px solid ${c}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${L} ${I}`,`opacity ${L} ${I}`].join(","),content:'""'},[`&${o}-item-danger`]:{"&::after":{borderInlineEndColor:B}}},[`${o}-selected, ${o}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${L} ${A}`,`opacity ${L} ${A}`].join(",")}}}}}},x4=Lse,P4=e=>{const{componentCls:t,menuItemHeight:o,itemMarginInline:s,padding:c,menuArrowSize:u,marginXS:h,marginXXS:f}=e,m=c+u+h;return{[`${t}-item`]:{position:"relative",overflow:"hidden"},[`${t}-item, ${t}-submenu-title`]:{height:o,lineHeight:`${o}px`,paddingInline:c,overflow:"hidden",textOverflow:"ellipsis",marginInline:s,marginBlock:f,width:`calc(100% - ${s*2}px)`},[`> ${t}-item,
            > ${t}-submenu > ${t}-submenu-title`]:{height:o,lineHeight:`${o}px`},[`${t}-item-group-list ${t}-submenu-title,
            ${t}-submenu-title`]:{paddingInlineEnd:m}}},Mse=e=>{const{componentCls:t,iconCls:o,menuItemHeight:s,colorTextLightSolid:c,dropdownWidth:u,controlHeightLG:h,motionDurationMid:f,motionEaseOut:m,paddingXL:v,itemMarginInline:_,fontSizeLG:y,motionDurationSlow:T,paddingXS:A,boxShadowSecondary:I}=e,O={height:s,lineHeight:`${s}px`,listStylePosition:"inside",listStyleType:"disc"};return[{[t]:{"&-inline, &-vertical":Object.assign({[`&${t}-root`]:{boxShadow:"none"}},P4(e))},[`${t}-submenu-popup`]:{[`${t}-vertical`]:Object.assign(Object.assign({},P4(e)),{boxShadow:I})}},{[`${t}-submenu-popup ${t}-vertical${t}-sub`]:{minWidth:u,maxHeight:`calc(100vh - ${h*2.5}px)`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${t}-inline`]:{width:"100%",[`&${t}-root`]:{[`${t}-item, ${t}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${T}`,`background ${T}`,`padding ${f} ${m}`].join(","),[`> ${t}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${t}-sub${t}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${t}-submenu > ${t}-submenu-title`]:O,[`& ${t}-item-group-title`]:{paddingInlineStart:v}},[`${t}-item`]:O}},{[`${t}-inline-collapsed`]:{width:s*2,[`&${t}-root`]:{[`${t}-item, ${t}-submenu ${t}-submenu-title`]:{[`> ${t}-inline-collapsed-noicon`]:{fontSize:y,textAlign:"center"}}},[`> ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-submenu > ${t}-submenu-title,
          > ${t}-submenu > ${t}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${y/2}px - ${_}px)`,textOverflow:"clip",[`
            ${t}-submenu-arrow,
            ${t}-submenu-expand-icon
          `]:{opacity:0},[`${t}-item-icon, ${o}`]:{margin:0,fontSize:y,lineHeight:`${s}px`,"+ span":{display:"inline-block",opacity:0}}},[`${t}-item-icon, ${o}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${t}-item-icon, ${o}`]:{display:"none"},"a, a:hover":{color:c}},[`${t}-item-group-title`]:Object.assign(Object.assign({},Ete),{paddingInline:A})}}]},Use=Mse,D4=e=>{const{componentCls:t,fontSize:o,motionDurationSlow:s,motionDurationMid:c,motionEaseInOut:u,motionEaseOut:h,iconCls:f,controlHeightSM:m}=e;return{[`${t}-item, ${t}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${s}`,`background ${s}`,`padding ${s} ${u}`].join(","),[`${t}-item-icon, ${f}`]:{minWidth:o,fontSize:o,transition:[`font-size ${c} ${h}`,`margin ${s} ${u}`,`color ${s}`].join(","),"+ span":{marginInlineStart:m-o,opacity:1,transition:[`opacity ${s} ${u}`,`margin ${s}`,`color ${s}`].join(",")}},[`${t}-item-icon`]:Object.assign({},gB()),[`&${t}-item-only-child`]:{[`> ${f}, > ${t}-item-icon`]:{marginInlineEnd:0}}},[`${t}-item-disabled, ${t}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${t}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},k4=e=>{const{componentCls:t,motionDurationSlow:o,motionEaseInOut:s,borderRadius:c,menuArrowSize:u,menuArrowOffset:h}=e;return{[`${t}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:e.margin,width:u,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${o} ${s}, opacity ${o}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:u*.6,height:u*.15,backgroundColor:"currentcolor",borderRadius:c,transition:[`background ${o} ${s}`,`transform ${o} ${s}`,`top ${o} ${s}`,`color ${o} ${s}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(-${h})`},"&::after":{transform:`rotate(-45deg) translateY(${h})`}}}}},Fse=e=>{const{antCls:t,componentCls:o,fontSize:s,motionDurationSlow:c,motionDurationMid:u,motionEaseInOut:h,lineHeight:f,paddingXS:m,padding:v,colorSplit:_,lineWidth:y,zIndexPopup:T,borderRadiusLG:A,subMenuItemBorderRadius:I,menuArrowSize:O,menuArrowOffset:L,lineType:x,menuPanelMaskInset:N}=e;return[{"":{[`${o}`]:Object.assign(Object.assign({},AR()),{"&-hidden":{display:"none"}})},[`${o}-submenu-hidden`]:{display:"none"}},{[o]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},BE(e)),AR()),{marginBottom:0,paddingInlineStart:0,fontSize:s,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${c} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${o}-item`]:{flex:"none"}},[`${o}-item, ${o}-submenu, ${o}-submenu-title`]:{borderRadius:e.itemBorderRadius},[`${o}-item-group-title`]:{padding:`${m}px ${v}px`,fontSize:s,lineHeight:f,transition:`all ${c}`},[`&-horizontal ${o}-submenu`]:{transition:[`border-color ${c} ${h}`,`background ${c} ${h}`].join(",")},[`${o}-submenu, ${o}-submenu-inline`]:{transition:[`border-color ${c} ${h}`,`background ${c} ${h}`,`padding ${u} ${h}`].join(",")},[`${o}-submenu ${o}-sub`]:{cursor:"initial",transition:[`background ${c} ${h}`,`padding ${c} ${h}`].join(",")},[`${o}-title-content`]:{transition:`color ${c}`},[`${o}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${o}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:_,borderStyle:x,borderWidth:0,borderTopWidth:y,marginBlock:y,padding:0,"&-dashed":{borderStyle:"dashed"}}}),D4(e)),{[`${o}-item-group`]:{[`${o}-item-group-list`]:{margin:0,padding:0,[`${o}-item, ${o}-submenu-title`]:{paddingInline:`${s*2}px ${v}px`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:T,borderRadius:A,boxShadow:"none",transformOrigin:"0 0",[`&${o}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:`${N}px 0 0`,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'}},"&-placement-rightTop::before":{top:0,insetInlineStart:N},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:e.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:e.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:e.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:e.paddingXS},[`> ${o}`]:Object.assign(Object.assign(Object.assign({borderRadius:A},D4(e)),k4(e)),{[`${o}-item, ${o}-submenu > ${o}-submenu-title`]:{borderRadius:I},[`${o}-submenu-title::after`]:{transition:`transform ${c} ${h}`}})}}),k4(e)),{[`&-inline-collapsed ${o}-submenu-arrow,
        &-inline ${o}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${L})`},"&::after":{transform:`rotate(45deg) translateX(-${L})`}},[`${o}-submenu-open${o}-submenu-inline > ${o}-submenu-title > ${o}-submenu-arrow`]:{transform:`translateY(-${O*.2}px)`,"&::after":{transform:`rotate(-45deg) translateX(-${L})`},"&::before":{transform:`rotate(45deg) translateX(${L})`}}})},{[`${t}-layout-header`]:{[o]:{lineHeight:"inherit"}}}]},Vse=(e,t)=>Uu("Menu",(s,c)=>{let{overrideComponentToken:u}=c;if(t===!1)return[];const{colorBgElevated:h,colorPrimary:f,colorError:m,colorErrorHover:v,colorTextLightSolid:_,controlHeightLG:y,fontSize:T}=s,A=T/7*5,I=Ho(s,{menuItemHeight:y,menuItemPaddingInline:s.margin,menuArrowSize:A,menuHorizontalHeight:y*1.15,menuArrowOffset:`${A*.25}px`,menuPanelMaskInset:-7,menuSubMenuBg:h}),O=new Vi(_).setAlpha(.65).toRgbString(),L=Ho(I,{itemColor:O,itemHoverColor:_,groupTitleColor:O,itemSelectedColor:_,itemBg:"#001529",subMenuItemBg:"#000c17",itemActiveBg:"transparent",itemSelectedBg:f,activeBarWidth:0,activeBarHeight:0,activeBarBorderWidth:0,itemDisabledColor:new Vi(_).setAlpha(.25).toRgbString(),dangerItemColor:m,dangerItemHoverColor:v,dangerItemSelectedColor:_,dangerItemActiveBg:m,dangerItemSelectedBg:m,menuSubMenuBg:"#001529",horizontalItemSelectedColor:_,horizontalItemSelectedBg:f},Object.assign({},u));return[Fse(I),Pse(I),Use(I),x4(I,"light"),x4(L,"dark"),kse(I),aoe(I),l4(I,"slide-up"),l4(I,"slide-down"),ZB(I,"zoom-big")]},s=>{const{colorPrimary:c,colorError:u,colorTextDisabled:h,colorErrorBg:f,colorText:m,colorTextDescription:v,colorBgContainer:_,colorFillAlter:y,colorFillContent:T,lineWidth:A,lineWidthBold:I,controlItemBgActive:O,colorBgTextHover:L}=s;return{dropdownWidth:160,zIndexPopup:s.zIndexPopupBase+50,radiusItem:s.borderRadiusLG,itemBorderRadius:s.borderRadiusLG,radiusSubMenuItem:s.borderRadiusSM,subMenuItemBorderRadius:s.borderRadiusSM,colorItemText:m,itemColor:m,colorItemTextHover:m,itemHoverColor:m,colorItemTextHoverHorizontal:c,horizontalItemHoverColor:c,colorGroupTitle:v,groupTitleColor:v,colorItemTextSelected:c,itemSelectedColor:c,colorItemTextSelectedHorizontal:c,horizontalItemSelectedColor:c,colorItemBg:_,itemBg:_,colorItemBgHover:L,itemHoverBg:L,colorItemBgActive:T,itemActiveBg:T,colorSubItemBg:y,subMenuItemBg:y,colorItemBgSelected:O,itemSelectedBg:O,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:0,colorActiveBarHeight:I,activeBarHeight:I,colorActiveBarBorderSize:A,activeBarBorderWidth:A,colorItemTextDisabled:h,itemDisabledColor:h,colorDangerItemText:u,dangerItemColor:u,colorDangerItemTextHover:u,dangerItemHoverColor:u,colorDangerItemTextSelected:u,dangerItemSelectedColor:u,colorDangerItemBgActive:f,dangerItemActiveBg:f,colorDangerItemBgSelected:f,dangerItemSelectedBg:f,itemMarginInline:s.marginXXS,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent"}},{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"]]})(e);var jse=globalThis&&globalThis.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const Bse=b.forwardRef((e,t)=>{var o,s;const c=b.useContext(w4),u=c||{},{getPrefixCls:h,getPopupContainer:f,direction:m}=b.useContext(wi),v=h(),{prefixCls:_,className:y,theme:T="light",expandIcon:A,_internalDisableMenuItemTitleTooltip:I,inlineCollapsed:O,siderCollapsed:L,items:x,children:N,rootClassName:D,mode:U,selectable:V,onClick:j,overflowedIndicatorPopupClassName:B}=e,Y=jse(e,["prefixCls","className","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","items","children","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),ee=Hs(Y,["collapsedWidth"]),H=Nse(x)||N;(o=u.validator)===null||o===void 0||o.call(u,{mode:U});const Z=hs(function(){var se;j==null||j.apply(void 0,arguments),(se=u.onClick)===null||se===void 0||se.call(u)}),J=u.mode||U,X=V??u.selectable,ne=b.useMemo(()=>L!==void 0?L:O,[O,L]),ie={horizontal:{motionName:`${v}-slide-up`},inline:xre(v),other:{motionName:`${v}-zoom-big`}},ae=h("menu",_||u.prefixCls),[pe,ue]=Vse(ae,!c),Se=ot(`${ae}-${T}`,y);let Ee;if(typeof A=="function")Ee=A;else{const se=A||u.expandIcon;Ee=Dl(se,{className:ot(`${ae}-submenu-expand-icon`,(s=se==null?void 0:se.props)===null||s===void 0?void 0:s.className)})}const le=b.useMemo(()=>({prefixCls:ae,inlineCollapsed:ne||!1,direction:m,firstLevel:!0,theme:T,mode:J,disableMenuItemTitleTooltip:I}),[ae,ne,m,I,T]);return pe(b.createElement(w4.Provider,{value:null},b.createElement(Zv.Provider,{value:le},b.createElement(hm,Object.assign({getPopupContainer:f,overflowedIndicator:b.createElement(ese,null),overflowedIndicatorPopupClassName:ot(ae,`${ae}-${T}`,B),mode:J,selectable:X,onClick:Z},ee,{inlineCollapsed:ne,className:Se,prefixCls:ae,direction:m,defaultMotions:ie,expandIcon:Ee,ref:t,rootClassName:ot(D,ue)}),H))))}),$se=Bse,pm=b.forwardRef((e,t)=>{const o=b.useRef(null),s=b.useContext(Bw);return b.useImperativeHandle(t,()=>({menu:o.current,focus:c=>{var u;(u=o.current)===null||u===void 0||u.focus(c)}})),b.createElement($se,Object.assign({ref:o},e,s))});pm.Item=R8;pm.SubMenu=I8;pm.Divider=y8;pm.ItemGroup=qE;const Hse=pm,Wse=e=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),$w=e=>({borderColor:e.inputBorderHoverColor,borderInlineEndWidth:e.lineWidth}),iI=e=>({borderColor:e.inputBorderHoverColor,boxShadow:`0 0 0 ${e.controlOutlineWidth}px ${e.controlOutline}`,borderInlineEndWidth:e.lineWidth,outline:0}),w8=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover":Object.assign({},$w(Ho(e,{inputBorderHoverColor:e.colorBorder})))}),O8=e=>{const{inputPaddingVerticalLG:t,fontSizeLG:o,lineHeightLG:s,borderRadiusLG:c,inputPaddingHorizontalLG:u}=e;return{padding:`${t}px ${u}px`,fontSize:o,lineHeight:s,borderRadius:c}},A8=e=>({padding:`${e.inputPaddingVerticalSM}px ${e.controlPaddingHorizontalSM-1}px`,borderRadius:e.borderRadiusSM}),N8=(e,t)=>{const{componentCls:o,colorError:s,colorWarning:c,colorErrorOutline:u,colorWarningOutline:h,colorErrorBorderHover:f,colorWarningBorderHover:m}=e;return{[`&-status-error:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:s,"&:hover":{borderColor:f},"&:focus, &-focused":Object.assign({},iI(Ho(e,{inputBorderActiveColor:s,inputBorderHoverColor:s,controlOutline:u}))),[`${o}-prefix, ${o}-suffix`]:{color:s}},[`&-status-warning:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:c,"&:hover":{borderColor:m},"&:focus, &-focused":Object.assign({},iI(Ho(e,{inputBorderActiveColor:c,inputBorderHoverColor:c,controlOutline:h}))),[`${o}-prefix, ${o}-suffix`]:{color:c}}}},x8=e=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${e.inputPaddingVertical}px ${e.inputPaddingHorizontal}px`,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,backgroundColor:e.colorBgContainer,backgroundImage:"none",borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:e.colorBorder,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`},Wse(e.colorTextPlaceholder)),{"&:hover":Object.assign({},$w(e)),"&:focus, &-focused":Object.assign({},iI(e)),"&-disabled, &[disabled]":Object.assign({},w8(e)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},O8(e)),"&-sm":Object.assign({},A8(e)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}}),Gse=e=>{const{componentCls:t,antCls:o}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${t}, &-lg > ${t}-group-addon`]:Object.assign({},O8(e)),[`&-sm ${t}, &-sm > ${t}-group-addon`]:Object.assign({},A8(e)),[`&-lg ${o}-select-single ${o}-select-selector`]:{height:e.controlHeightLG},[`&-sm ${o}-select-single ${o}-select-selector`]:{height:e.controlHeightSM},[`> ${t}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${t}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${e.inputPaddingHorizontal}px`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,textAlign:"center",backgroundColor:e.colorFillAlter,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${o}-select`]:{margin:`-${e.inputPaddingVertical+1}px -${e.inputPaddingHorizontal}px`,[`&${o}-select-single:not(${o}-select-customize-input)`]:{[`${o}-select-selector`]:{backgroundColor:"inherit",border:`${e.lineWidth}px ${e.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${o}-select-selector`]:{color:e.colorPrimary}}},[`${o}-cascader-picker`]:{margin:`-9px -${e.inputPaddingHorizontal}px`,backgroundColor:"transparent",[`${o}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},[`${t}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${t}-search-with-button &`]:{zIndex:0}}},[`> ${t}:first-child, ${t}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${o}-select ${o}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}-affix-wrapper`]:{[`&:not(:first-child) ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}:last-child, ${t}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${o}-select ${o}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${t}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${t}-search &`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}},[`&:not(:first-child), ${t}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${t}-group-compact`]:Object.assign(Object.assign({display:"block"},AR()),{[`${t}-group-addon, ${t}-group-wrap, > ${t}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${t}-affix-wrapper,
        & > ${t}-number-affix-wrapper,
        & > ${o}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:-e.lineWidth,borderInlineEndWidth:e.lineWidth},[`${t}`]:{float:"none"},[`& > ${o}-select > ${o}-select-selector,
      & > ${o}-select-auto-complete ${t},
      & > ${o}-cascader-picker ${t},
      & > ${t}-group-wrapper ${t}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${o}-select-focused`]:{zIndex:1},[`& > ${o}-select > ${o}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${o}-select:first-child > ${o}-select-selector,
      & > ${o}-select-auto-complete:first-child ${t},
      & > ${o}-cascader-picker:first-child ${t}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,
      & > ${o}-select:last-child > ${o}-select-selector,
      & > ${o}-cascader-picker:last-child ${t},
      & > ${o}-cascader-picker-focused:last-child ${t}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${o}-select-auto-complete ${t}`]:{verticalAlign:"top"},[`${t}-group-wrapper + ${t}-group-wrapper`]:{marginInlineStart:-e.lineWidth,[`${t}-affix-wrapper`]:{borderRadius:0}},[`${t}-group-wrapper:not(:last-child)`]:{[`&${t}-search > ${t}-group`]:{[`& > ${t}-group-addon > ${t}-search-button`]:{borderRadius:0},[`& > ${t}`]:{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}}}})}},zse=e=>{const{componentCls:t,controlHeightSM:o,lineWidth:s}=e,c=16,u=(o-s*2-c)/2;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},BE(e)),x8(e)),N8(e,t)),{'&[type="color"]':{height:e.controlHeight,[`&${t}-lg`]:{height:e.controlHeightLG},[`&${t}-sm`]:{height:o,paddingTop:u,paddingBottom:u}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},Kse=e=>{const{componentCls:t}=e;return{[`${t}-clear-icon`]:{margin:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${e.inputAffixPadding}px`}}}},Yse=e=>{const{componentCls:t,inputAffixPadding:o,colorTextDescription:s,motionDurationSlow:c,colorIcon:u,colorIconHover:h,iconCls:f}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},x8(e)),{display:"inline-flex",[`&:not(${t}-affix-wrapper-disabled):hover`]:Object.assign(Object.assign({},$w(e)),{zIndex:1,[`${t}-search-with-button &`]:{zIndex:0}}),"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${t}[disabled]`]:{background:"transparent"}},[`> input${t}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:s},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:o},"&-suffix":{marginInlineStart:o}}}),Kse(e)),{[`${f}${t}-password-icon`]:{color:u,cursor:"pointer",transition:`all ${c}`,"&:hover":{color:h}}}),N8(e,`${t}-affix-wrapper`))}},qse=e=>{const{componentCls:t,colorError:o,colorWarning:s,borderRadiusLG:c,borderRadiusSM:u}=e;return{[`${t}-group`]:Object.assign(Object.assign(Object.assign({},BE(e)),Gse(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${t}-group-addon`]:{borderRadius:c}},"&-sm":{[`${t}-group-addon`]:{borderRadius:u}},"&-status-error":{[`${t}-group-addon`]:{color:o,borderColor:o}},"&-status-warning":{[`${t}-group-addon`]:{color:s,borderColor:s}},"&-disabled":{[`${t}-group-addon`]:Object.assign({},w8(e))},[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}})}},Xse=e=>{const{componentCls:t,antCls:o}=e,s=`${t}-search`;return{[s]:{[`${t}`]:{"&:hover, &:focus":{borderColor:e.colorPrimaryHover,[`+ ${t}-group-addon ${s}-button:not(${o}-btn-primary)`]:{borderInlineStartColor:e.colorPrimaryHover}}},[`${t}-affix-wrapper`]:{borderRadius:0},[`${t}-lg`]:{lineHeight:e.lineHeightLG-2e-4},[`> ${t}-group`]:{[`> ${t}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${s}-button`]:{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius,borderEndStartRadius:0},[`${s}-button:not(${o}-btn-primary)`]:{color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive},[`&${o}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${s}-button`]:{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${s}-button`]:{height:e.controlHeightLG},[`&-small ${s}-button`]:{height:e.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${t}-compact-item`]:{[`&:not(${t}-compact-last-item)`]:{[`${t}-group-addon`]:{[`${t}-search-button`]:{marginInlineEnd:-e.lineWidth,borderRadius:0}}},[`&:not(${t}-compact-first-item)`]:{[`${t},${t}-affix-wrapper`]:{borderRadius:0}},[`> ${t}-group-addon ${t}-search-button,
        > ${t},
        ${t}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${t}-affix-wrapper-focused`]:{zIndex:2}}}}};function P8(e){return Ho(e,{inputAffixPadding:e.paddingXXS,inputPaddingVertical:Math.max(Math.round((e.controlHeight-e.fontSize*e.lineHeight)/2*10)/10-e.lineWidth,3),inputPaddingVerticalLG:Math.ceil((e.controlHeightLG-e.fontSizeLG*e.lineHeightLG)/2*10)/10-e.lineWidth,inputPaddingVerticalSM:Math.max(Math.round((e.controlHeightSM-e.fontSize*e.lineHeight)/2*10)/10-e.lineWidth,0),inputPaddingHorizontal:e.paddingSM-e.lineWidth,inputPaddingHorizontalSM:e.paddingXS-e.lineWidth,inputPaddingHorizontalLG:e.controlPaddingHorizontal-e.lineWidth,inputBorderHoverColor:e.colorPrimaryHover,inputBorderActiveColor:e.colorPrimaryHover})}const Jse=e=>{const{componentCls:t,paddingLG:o}=e,s=`${t}-textarea`;return{[s]:{position:"relative","&-show-count":{[`> ${t}`]:{height:"100%"},[`${t}-data-count`]:{position:"absolute",bottom:-e.fontSize*e.lineHeight,insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${t}`]:{paddingInlineEnd:o}},[`&-affix-wrapper${s}-has-feedback`]:{[`${t}`]:{paddingInlineEnd:o}},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingXS,insetBlockStart:e.paddingXS},[`${s}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.inputPaddingHorizontal,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},Qse=Uu("Input",e=>{const t=P8(e);return[zse(t),Jse(t),Yse(t),qse(t),Xse(t),jB(t)]});function Gd(e){return!!(e.addonBefore||e.addonAfter)}function gT(e){return!!(e.prefix||e.suffix||e.allowClear)}function vT(e,t,o,s){if(o){var c=t;if(t.type==="click"){var u=e.cloneNode(!0);c=Object.create(t,{target:{value:u},currentTarget:{value:u}}),u.value="",o(c);return}if(s!==void 0){c=Object.create(t,{target:{value:e},currentTarget:{value:e}}),e.value=s,o(c);return}o(c)}}function Zse(e){return typeof e>"u"||e===null?"":String(e)}var ece=function(t){var o,s,c=t.inputElement,u=t.prefixCls,h=t.prefix,f=t.suffix,m=t.addonBefore,v=t.addonAfter,_=t.className,y=t.style,T=t.disabled,A=t.readOnly,I=t.focused,O=t.triggerFocus,L=t.allowClear,x=t.value,N=t.handleReset,D=t.hidden,U=t.classes,V=t.classNames,j=t.dataAttrs,B=t.styles,Y=b.useRef(null),ee=function(le){var se;(se=Y.current)!==null&&se!==void 0&&se.contains(le.target)&&(O==null||O())},H=function(){var le;if(!L)return null;var se=!T&&!A&&x,de="".concat(u,"-clear-icon"),he=An(L)==="object"&&L!==null&&L!==void 0&&L.clearIcon?L.clearIcon:"✖";return Dt.createElement("span",{onClick:N,onMouseDown:function(Me){return Me.preventDefault()},className:ot(de,(le={},Qe(le,"".concat(de,"-hidden"),!se),Qe(le,"".concat(de,"-has-suffix"),!!f),le)),role:"button",tabIndex:-1},he)},Z=b.cloneElement(c,{value:x,hidden:D,className:ot((o=c.props)===null||o===void 0?void 0:o.className,!gT(t)&&!Gd(t)&&_)||null,style:ge(ge({},(s=c.props)===null||s===void 0?void 0:s.style),!gT(t)&&!Gd(t)?y:{})});if(gT(t)){var J,X="".concat(u,"-affix-wrapper"),ne=ot(X,(J={},Qe(J,"".concat(X,"-disabled"),T),Qe(J,"".concat(X,"-focused"),I),Qe(J,"".concat(X,"-readonly"),A),Qe(J,"".concat(X,"-input-with-clear-btn"),f&&L&&x),J),!Gd(t)&&_,U==null?void 0:U.affixWrapper),ie=(f||L)&&Dt.createElement("span",{className:ot("".concat(u,"-suffix"),V==null?void 0:V.suffix),style:B==null?void 0:B.suffix},H(),f);Z=Dt.createElement("span",Ve({className:ne,style:Gd(t)?void 0:y,hidden:!Gd(t)&&D,onClick:ee},j==null?void 0:j.affixWrapper,{ref:Y}),h&&Dt.createElement("span",{className:ot("".concat(u,"-prefix"),V==null?void 0:V.prefix),style:B==null?void 0:B.prefix},h),b.cloneElement(c,{value:x,hidden:null}),ie)}if(Gd(t)){var ae="".concat(u,"-group"),pe="".concat(ae,"-addon"),ue=ot("".concat(u,"-wrapper"),ae,U==null?void 0:U.wrapper),Se=ot("".concat(u,"-group-wrapper"),_,U==null?void 0:U.group);return Dt.createElement("span",{className:Se,style:y,hidden:D},Dt.createElement("span",{className:ue},m&&Dt.createElement("span",{className:pe},m),b.cloneElement(Z,{hidden:null}),v&&Dt.createElement("span",{className:pe},v)))}return Z};globalThis&&globalThis.__rest;function tce(e,t){if(!e)return;e.focus(t);const{cursor:o}=t||{};if(o){const s=e.value.length;switch(o){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(s,s);break;default:e.setSelectionRange(0,s);break}}}var nce=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,rce=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],ET={},La;function ice(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&ET[o])return ET[o];var s=window.getComputedStyle(e),c=s.getPropertyValue("box-sizing")||s.getPropertyValue("-moz-box-sizing")||s.getPropertyValue("-webkit-box-sizing"),u=parseFloat(s.getPropertyValue("padding-bottom"))+parseFloat(s.getPropertyValue("padding-top")),h=parseFloat(s.getPropertyValue("border-bottom-width"))+parseFloat(s.getPropertyValue("border-top-width")),f=rce.map(function(v){return"".concat(v,":").concat(s.getPropertyValue(v))}).join(";"),m={sizingStyle:f,paddingSize:u,borderSize:h,boxSizing:c};return t&&o&&(ET[o]=m),m}function oce(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;La||(La=document.createElement("textarea"),La.setAttribute("tab-index","-1"),La.setAttribute("aria-hidden","true"),document.body.appendChild(La)),e.getAttribute("wrap")?La.setAttribute("wrap",e.getAttribute("wrap")):La.removeAttribute("wrap");var c=ice(e,t),u=c.paddingSize,h=c.borderSize,f=c.boxSizing,m=c.sizingStyle;La.setAttribute("style","".concat(m,";").concat(nce)),La.value=e.value||e.placeholder||"";var v=void 0,_=void 0,y,T=La.scrollHeight;if(f==="border-box"?T+=h:f==="content-box"&&(T-=u),o!==null||s!==null){La.value=" ";var A=La.scrollHeight-u;o!==null&&(v=A*o,f==="border-box"&&(v=v+u+h),T=Math.max(v,T)),s!==null&&(_=A*s,f==="border-box"&&(_=_+u+h),y=T>_?"":"hidden",T=Math.min(_,T))}var I={height:T,overflowY:y,resize:"none"};return v&&(I.minHeight=v),_&&(I.maxHeight=_),I}var ace=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],_T=0,ST=1,yT=2,sce=b.forwardRef(function(e,t){var o=e,s=o.prefixCls;o.onPressEnter;var c=o.defaultValue,u=o.value,h=o.autoSize,f=o.onResize,m=o.className,v=o.style,_=o.disabled,y=o.onChange;o.onInternalAutoSize;var T=fn(o,ace),A=Rl(c,{value:u,postState:function(he){return he??""}}),I=De(A,2),O=I[0],L=I[1],x=function(he){L(he.target.value),y==null||y(he)},N=b.useRef();b.useImperativeHandle(t,function(){return{textArea:N.current}});var D=b.useMemo(function(){return h&&An(h)==="object"?[h.minRows,h.maxRows]:[]},[h]),U=De(D,2),V=U[0],j=U[1],B=!!h,Y=function(){try{if(document.activeElement===N.current){var he=N.current,xe=he.selectionStart,Me=he.selectionEnd,it=he.scrollTop;N.current.setSelectionRange(xe,Me),N.current.scrollTop=it}}catch{}},ee=b.useState(yT),H=De(ee,2),Z=H[0],J=H[1],X=b.useState(),ne=De(X,2),ie=ne[0],ae=ne[1],pe=function(){J(_T)};kr(function(){B&&pe()},[u,V,j,B]),kr(function(){if(Z===_T)J(ST);else if(Z===ST){var de=oce(N.current,!1,V,j);J(yT),ae(de)}else Y()},[Z]);var ue=b.useRef(),Se=function(){_o.cancel(ue.current)},Ee=function(he){Z===yT&&(f==null||f(he),h&&(Se(),ue.current=_o(function(){pe()})))};b.useEffect(function(){return Se},[]);var le=B?ie:null,se=ge(ge({},v),le);return(Z===_T||Z===ST)&&(se.overflowY="hidden",se.overflowX="hidden"),b.createElement(Mu,{onResize:Ee,disabled:!(h||f)},b.createElement("textarea",Ve({},T,{ref:N,style:se,className:ot(s,m,Qe({},"".concat(s,"-disabled"),_)),disabled:_,value:O,onChange:x})))}),cce=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","className","style","disabled","hidden","classNames","styles","onResize"];function D8(e,t){return dt(e||"").slice(0,t).join("")}function L4(e,t,o,s){var c=o;return e?c=D8(o,s):dt(t||"").length<o.length&&dt(o||"").length>s&&(c=t),c}var lce=Dt.forwardRef(function(e,t){var o,s=e.defaultValue,c=e.value,u=e.onFocus,h=e.onBlur,f=e.onChange,m=e.allowClear,v=e.maxLength,_=e.onCompositionStart,y=e.onCompositionEnd,T=e.suffix,A=e.prefixCls,I=A===void 0?"rc-textarea":A,O=e.classes,L=e.showCount,x=e.className,N=e.style,D=e.disabled,U=e.hidden,V=e.classNames,j=e.styles,B=e.onResize,Y=fn(e,cce),ee=Rl(s,{value:c,defaultValue:s}),H=De(ee,2),Z=H[0],J=H[1],X=b.useRef(null),ne=Dt.useState(!1),ie=De(ne,2),ae=ie[0],pe=ie[1],ue=Dt.useState(!1),Se=De(ue,2),Ee=Se[0],le=Se[1],se=Dt.useRef(),de=Dt.useRef(0),he=Dt.useState(null),xe=De(he,2),Me=xe[0],it=xe[1],Be=function(){X.current.textArea.focus()};b.useImperativeHandle(t,function(){return{resizableTextArea:X.current,focus:Be,blur:function(){X.current.textArea.blur()}}}),b.useEffect(function(){pe(function(Nt){return!D&&Nt})},[D]);var Tt=Number(v)>0,It=function(yt){le(!0),se.current=Z,de.current=yt.currentTarget.selectionStart,_==null||_(yt)},lt=function(yt){le(!1);var xt=yt.currentTarget.value;if(Tt){var Yt,Nn=de.current>=v+1||de.current===((Yt=se.current)===null||Yt===void 0?void 0:Yt.length);xt=L4(Nn,se.current,xt,v)}xt!==Z&&(J(xt),vT(yt.currentTarget,yt,f,xt)),y==null||y(yt)},Mt=function(yt){var xt=yt.target.value;if(!Ee&&Tt){var Yt=yt.target.selectionStart>=v+1||yt.target.selectionStart===xt.length||!yt.target.selectionStart;xt=L4(Yt,Z,xt,v)}J(xt),vT(yt.currentTarget,yt,f,xt)},ht=function(yt){var xt=Y.onPressEnter,Yt=Y.onKeyDown;yt.key==="Enter"&&xt&&xt(yt),Yt==null||Yt(yt)},ze=function(yt){pe(!0),u==null||u(yt)},Ut=function(yt){pe(!1),h==null||h(yt)},Ft=function(yt){J(""),Be(),vT(X.current.textArea,yt,f)},Vt=Zse(Z);!Ee&&Tt&&c==null&&(Vt=D8(Vt,v));var qe=T,Ke;if(L){var Ge=dt(Vt).length;An(L)==="object"?Ke=L.formatter({value:Vt,count:Ge,maxLength:v}):Ke="".concat(Ge).concat(Tt?" / ".concat(v):""),qe=Dt.createElement(Dt.Fragment,null,qe,Dt.createElement("span",{className:ot("".concat(I,"-data-count"),V==null?void 0:V.count),style:j==null?void 0:j.count},Ke))}var rt=function(yt){B==null||B(yt),Me===null?it("mounted"):Me==="mounted"&&it("resized")},pt=Dt.createElement(ece,{value:Vt,allowClear:m,handleReset:Ft,suffix:qe,prefixCls:I,classes:{affixWrapper:ot(O==null?void 0:O.affixWrapper,(o={},Qe(o,"".concat(I,"-show-count"),L),Qe(o,"".concat(I,"-textarea-allow-clear"),m),o))},disabled:D,focused:ae,className:x,style:ge(ge({},N),Me==="resized"?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof Ke=="string"?Ke:void 0}},hidden:U,inputElement:Dt.createElement(sce,Ve({},Y,{onKeyDown:ht,onChange:Mt,onFocus:ze,onBlur:Ut,onCompositionStart:It,onCompositionEnd:lt,className:V==null?void 0:V.textarea,style:ge(ge({},j==null?void 0:j.textarea),{},{resize:N==null?void 0:N.resize}),disabled:D,prefixCls:I,onResize:rt,ref:X}))});return pt}),uce=globalThis&&globalThis.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const dce=b.forwardRef((e,t)=>{var{prefixCls:o,bordered:s=!0,size:c,disabled:u,status:h,allowClear:f,showCount:m,classNames:v}=e,_=uce(e,["prefixCls","bordered","size","disabled","status","allowClear","showCount","classNames"]);const{getPrefixCls:y,direction:T}=b.useContext(wi),A=Iw(c),I=b.useContext(Rw),O=u??I,{status:L,hasFeedback:x,feedbackIcon:N}=b.useContext(Mie),D=Poe(L,h),U=b.useRef(null);b.useImperativeHandle(t,()=>{var ee;return{resizableTextArea:(ee=U.current)===null||ee===void 0?void 0:ee.resizableTextArea,focus:H=>{var Z,J;tce((J=(Z=U.current)===null||Z===void 0?void 0:Z.resizableTextArea)===null||J===void 0?void 0:J.textArea,H)},blur:()=>{var H;return(H=U.current)===null||H===void 0?void 0:H.blur()}}});const V=y("input",o);let j;typeof f=="object"&&(f!=null&&f.clearIcon)?j=f:f&&(j={clearIcon:b.createElement(Cne,null)});const[B,Y]=Qse(V);return B(b.createElement(lce,Object.assign({},_,{disabled:O,allowClear:j,classes:{affixWrapper:ot(`${V}-textarea-affix-wrapper`,{[`${V}-affix-wrapper-rtl`]:T==="rtl",[`${V}-affix-wrapper-borderless`]:!s,[`${V}-affix-wrapper-sm`]:A==="small",[`${V}-affix-wrapper-lg`]:A==="large",[`${V}-textarea-show-count`]:m},_4(`${V}-affix-wrapper`,D),Y)},classNames:Object.assign(Object.assign({},v),{textarea:ot({[`${V}-borderless`]:!s,[`${V}-sm`]:A==="small",[`${V}-lg`]:A==="large"},_4(V,D),Y,v==null?void 0:v.textarea)}),prefixCls:V,suffix:x&&b.createElement("span",{className:`${V}-textarea-suffix`},N),showCount:m,ref:U})))}),hce=dce,fm=Cse;fm.Header=_se;fm.Footer=Sse;fm.Content=yse;fm.Sider=Ise;const oI=fm;var pce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const fce=pce;var mce=function(t,o){return b.createElement(Ws,Ve({},t,{ref:o,icon:fce}))};const gce=b.forwardRef(mce);var vce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};const Ece=vce;var _ce=function(t,o){return b.createElement(Ws,Ve({},t,{ref:o,icon:Ece}))};const Sce=b.forwardRef(_ce);var yce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};const Cce=yce;var Tce=function(t,o){return b.createElement(Ws,Ve({},t,{ref:o,icon:Cce}))};const bce=b.forwardRef(Tce);var Rce=globalThis&&globalThis.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const Ice={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},wce=b.forwardRef((e,t)=>{const o=v=>{const{keyCode:_}=v;_===ct.ENTER&&v.preventDefault()},s=v=>{const{keyCode:_}=v,{onClick:y}=e;_===ct.ENTER&&y&&y()},{style:c,noStyle:u,disabled:h}=e,f=Rce(e,["style","noStyle","disabled"]);let m={};return u||(m=Object.assign({},Ice)),h&&(m.pointerEvents="none"),m=Object.assign(Object.assign({},m),c),b.createElement("div",Object.assign({role:"button",tabIndex:0,ref:t},f,{onKeyDown:o,onKeyUp:s,style:m}))}),M4=wce;var Oce=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,o=[],s=0;s<e.rangeCount;s++)o.push(e.getRangeAt(s));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||o.forEach(function(c){e.addRange(c)}),t&&t.focus()}},Ace=Oce,U4={"text/plain":"Text","text/html":"Url",default:"Text"},Nce="Copy to clipboard: #{key}, Enter";function xce(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function Pce(e,t){var o,s,c,u,h,f,m=!1;t||(t={}),o=t.debug||!1;try{c=Ace(),u=document.createRange(),h=document.getSelection(),f=document.createElement("span"),f.textContent=e,f.ariaHidden="true",f.style.all="unset",f.style.position="fixed",f.style.top=0,f.style.clip="rect(0, 0, 0, 0)",f.style.whiteSpace="pre",f.style.webkitUserSelect="text",f.style.MozUserSelect="text",f.style.msUserSelect="text",f.style.userSelect="text",f.addEventListener("copy",function(_){if(_.stopPropagation(),t.format)if(_.preventDefault(),typeof _.clipboardData>"u"){o&&console.warn("unable to use e.clipboardData"),o&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var y=U4[t.format]||U4.default;window.clipboardData.setData(y,e)}else _.clipboardData.clearData(),_.clipboardData.setData(t.format,e);t.onCopy&&(_.preventDefault(),t.onCopy(_.clipboardData))}),document.body.appendChild(f),u.selectNodeContents(f),h.addRange(u);var v=document.execCommand("copy");if(!v)throw new Error("copy command was unsuccessful");m=!0}catch(_){o&&console.error("unable to copy using execCommand: ",_),o&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),m=!0}catch(y){o&&console.error("unable to copy using clipboardData: ",y),o&&console.error("falling back to prompt"),s=xce("message"in t?t.message:Nce),window.prompt(s,e)}}finally{h&&(typeof h.removeRange=="function"?h.removeRange(u):h.removeAllRanges()),f&&document.body.removeChild(f),c()}return m}var Dce=Pce;const kce=Al(Dce),Lce=(e,t,o,s)=>{const{titleMarginBottom:c,fontWeightStrong:u}=s;return{marginBottom:c,color:o,fontWeight:u,fontSize:e,lineHeight:t}},Mce=e=>{const t=[1,2,3,4,5],o={};return t.forEach(s=>{o[`
      h${s}&,
      div&-h${s},
      div&-h${s} > textarea,
      h${s}
    `]=Lce(e[`fontSizeHeading${s}`],e[`lineHeightHeading${s}`],e.colorTextHeading,e)}),o},Uce=e=>{const{componentCls:t}=e;return{"a&, a":Object.assign(Object.assign({},mB(e)),{textDecoration:e.linkDecoration,"&:active, &:hover":{textDecoration:e.linkHoverDecoration},[`&[disabled], &${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:e.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},Fce=e=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:rte[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:e.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),Vce=e=>{const{componentCls:t}=e,s=P8(e).inputPaddingVertical+1;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:-e.paddingSM,marginTop:-s,marginBottom:`calc(1em - ${s}px)`},[`${t}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:e.marginXS+2,insetBlockEnd:e.marginXS,color:e.colorTextDescription,fontWeight:"normal",fontSize:e.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},jce=e=>({"&-copy-success":{"\n    &,\n    &:hover,\n    &:focus":{color:e.colorSuccess}}}),Bce=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),$ce=e=>{const{componentCls:t,titleMarginTop:o}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorText,wordBreak:"break-word",lineHeight:e.lineHeight,[`&${t}-secondary`]:{color:e.colorTextDescription},[`&${t}-success`]:{color:e.colorSuccess},[`&${t}-warning`]:{color:e.colorWarning},[`&${t}-danger`]:{color:e.colorError,"a&:active, a&:focus":{color:e.colorErrorActive},"a&:hover":{color:e.colorErrorHover}},[`&${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},Mce(e)),{[`
      & + h1${t},
      & + h2${t},
      & + h3${t},
      & + h4${t},
      & + h5${t}
      `]:{marginTop:o},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:o}}}),Fce(e)),Uce(e)),{[`
        ${t}-expand,
        ${t}-edit,
        ${t}-copy
      `]:Object.assign(Object.assign({},mB(e)),{marginInlineStart:e.marginXXS})}),Vce(e)),jce(e)),Bce()),{"&-rtl":{direction:"rtl"}})}},k8=Uu("Typography",e=>[$ce(e)],e=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em",fontWeightStrong:e.fontWeightStrong})),Hce=e=>{let{prefixCls:t,"aria-label":o,className:s,style:c,direction:u,maxLength:h,autoSize:f=!0,value:m,onSave:v,onCancel:_,onEnd:y,component:T,enterIcon:A=b.createElement(bce,null)}=e;const I=b.useRef(null),O=b.useRef(!1),L=b.useRef(),[x,N]=b.useState(m);b.useEffect(()=>{N(m)},[m]),b.useEffect(()=>{if(I.current&&I.current.resizableTextArea){const{textArea:ne}=I.current.resizableTextArea;ne.focus();const{length:ie}=ne.value;ne.setSelectionRange(ie,ie)}},[]);const D=ne=>{let{target:ie}=ne;N(ie.value.replace(/[\n\r]/g,""))},U=()=>{O.current=!0},V=()=>{O.current=!1},j=ne=>{let{keyCode:ie}=ne;O.current||(L.current=ie)},B=()=>{v(x.trim())},Y=ne=>{let{keyCode:ie,ctrlKey:ae,altKey:pe,metaKey:ue,shiftKey:Se}=ne;L.current===ie&&!O.current&&!ae&&!pe&&!ue&&!Se&&(ie===ct.ENTER?(B(),y==null||y()):ie===ct.ESC&&_())},ee=()=>{B()},H=T?`${t}-${T}`:"",[Z,J]=k8(t),X=ot(t,`${t}-edit-content`,{[`${t}-rtl`]:u==="rtl"},s,H,J);return Z(b.createElement("div",{className:X,style:c},b.createElement(hce,{ref:I,maxLength:h,value:x,onChange:D,onKeyDown:j,onKeyUp:Y,onCompositionStart:U,onCompositionEnd:V,onBlur:ee,"aria-label":o,rows:1,autoSize:f}),A!==null?Dl(A,{className:`${t}-edit-content-confirm`}):null))},Wce=Hce;var Gce=globalThis&&globalThis.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const zce=b.forwardRef((e,t)=>{var{prefixCls:o,component:s="article",className:c,rootClassName:u,setContentRef:h,children:f,direction:m}=e,v=Gce(e,["prefixCls","component","className","rootClassName","setContentRef","children","direction"]);const{getPrefixCls:_,direction:y}=b.useContext(wi),T=m??y;let A=t;h&&(A=Lu(t,h));const I=_("typography",o),[O,L]=k8(I),x=ot(I,{[`${I}-rtl`]:T==="rtl"},c,u,L);return O(b.createElement(s,Object.assign({className:x,ref:A},v),f))}),L8=zce;function CT(e,t){return b.useMemo(()=>{const o=!!e;return[o,Object.assign(Object.assign({},t),o&&typeof e=="object"?e:null)]},[e])}const Kce=(e,t)=>{const o=b.useRef(!1);b.useEffect(()=>{o.current?e():o.current=!0},t)},Yce=Kce;function M8(e){const t=typeof e;return t==="string"||t==="number"}function qce(e){let t=0;return e.forEach(o=>{M8(o)?t+=String(o).length:t+=1}),t}function F4(e,t){let o=0;const s=[];for(let c=0;c<e.length;c+=1){if(o===t)return s;const u=e[c],f=M8(u)?String(u).length:1,m=o+f;if(m>t){const v=t-o;return s.push(String(u).slice(0,v)),s}s.push(u),o=m}return e}const Xce=0,xg=1,V4=2,TT=3,j4=4,Jce=e=>{let{enabledMeasure:t,children:o,text:s,width:c,fontSize:u,rows:h,onEllipsis:f}=e;const[[m,v,_],y]=b.useState([0,0,0]),[T,A]=b.useState(Xce),[I,O]=b.useState(0),L=b.useRef(null),x=b.useRef(null),N=b.useMemo(()=>Ol(s),[s]),D=b.useMemo(()=>qce(N),[N]),U=b.useMemo(()=>!t||T!==TT?o(N,!1):o(F4(N,v),v<D),[t,T,o,N,v,D]);kr(()=>{t&&c&&u&&D&&(A(xg),y([0,Math.ceil(D/2),D]))},[t,c,u,s,D,h]),kr(()=>{var Y;T===xg&&O(((Y=L.current)===null||Y===void 0?void 0:Y.offsetHeight)||0)},[T]),kr(()=>{var Y,ee;if(I){if(T===xg){const H=((Y=x.current)===null||Y===void 0?void 0:Y.offsetHeight)||0,Z=h*I;H<=Z?(A(j4),f(!1)):A(V4)}else if(T===V4)if(m!==_){const H=((ee=x.current)===null||ee===void 0?void 0:ee.offsetHeight)||0,Z=h*I;let J=m,X=_;m===_-1?X=m:H<=Z?J=v:X=v;const ne=Math.ceil((J+X)/2);y([J,ne,X])}else A(TT),f(!0)}},[T,m,_,h,I]);const V={width:c,whiteSpace:"normal",margin:0,padding:0},j=(Y,ee,H)=>b.createElement("span",{"aria-hidden":!0,ref:ee,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.floor(u/2)*2},H)},Y),B=(Y,ee)=>{const H=F4(N,Y);return j(o(H,!0),ee,V)};return b.createElement(b.Fragment,null,U,t&&T!==TT&&T!==j4&&b.createElement(b.Fragment,null,j("lg",L,{wordBreak:"keep-all",whiteSpace:"nowrap"}),T===xg?j(o(N,!1),x,V):B(v,x)))},Qce=Jce,Zce=e=>{let{enabledEllipsis:t,isEllipsis:o,children:s,tooltipProps:c}=e;return!(c!=null&&c.title)||!t?s:b.createElement(Jv,Object.assign({open:o?void 0:!1},c),s)},ele=Zce;var tle=globalThis&&globalThis.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function nle(e,t){let{mark:o,code:s,underline:c,delete:u,strong:h,keyboard:f,italic:m}=e,v=t;function _(y,T){T&&(v=b.createElement(y,{},v))}return _("strong",h),_("u",c),_("del",u),_("code",s),_("mark",o),_("kbd",f),_("i",m),v}function Pg(e,t,o){return e===!0||e===void 0?t:e||o&&t}function B4(e){return e===!1?[!1,!1]:Array.isArray(e)?e:[e]}const rle="...",ile=b.forwardRef((e,t)=>{var o,s,c;const{prefixCls:u,className:h,style:f,type:m,disabled:v,children:_,ellipsis:y,editable:T,copyable:A,component:I,title:O}=e,L=tle(e,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:x,direction:N}=b.useContext(wi),[D]=Mee("Text"),U=b.useRef(null),V=b.useRef(null),j=x("typography",u),B=Hs(L,["mark","code","delete","underline","strong","keyboard","italic"]),[Y,ee]=CT(T),[H,Z]=Rl(!1,{value:ee.editing}),{triggerType:J=["icon"]}=ee,X=Ue=>{var tt;Ue&&((tt=ee.onStart)===null||tt===void 0||tt.call(ee)),Z(Ue)};Yce(()=>{var Ue;H||(Ue=V.current)===null||Ue===void 0||Ue.focus()},[H]);const ne=Ue=>{Ue==null||Ue.preventDefault(),X(!0)},ie=Ue=>{var tt;(tt=ee.onChange)===null||tt===void 0||tt.call(ee,Ue),X(!1)},ae=()=>{var Ue;(Ue=ee.onCancel)===null||Ue===void 0||Ue.call(ee),X(!1)},[pe,ue]=CT(A),[Se,Ee]=b.useState(!1),le=b.useRef(null),se={};ue.format&&(se.format=ue.format);const de=()=>{le.current&&clearTimeout(le.current)},he=Ue=>{var tt;Ue==null||Ue.preventDefault(),Ue==null||Ue.stopPropagation(),kce(ue.text||String(_)||"",se),Ee(!0),de(),le.current=setTimeout(()=>{Ee(!1)},3e3),(tt=ue.onCopy)===null||tt===void 0||tt.call(ue,Ue)};b.useEffect(()=>de,[]);const[xe,Me]=b.useState(!1),[it,Be]=b.useState(!1),[Tt,It]=b.useState(!1),[lt,Mt]=b.useState(!1),[ht,ze]=b.useState(!1),[Ut,Ft]=b.useState(!0),[Vt,qe]=CT(y,{expandable:!1}),Ke=Vt&&!Tt,{rows:Ge=1}=qe,rt=b.useMemo(()=>!Ke||qe.suffix!==void 0||qe.onEllipsis||qe.expandable||Y||pe,[Ke,qe,Y,pe]);kr(()=>{Vt&&!rt&&(Me(JU("webkitLineClamp")),Be(JU("textOverflow")))},[rt,Vt]);const pt=b.useMemo(()=>rt?!1:Ge===1?it:xe,[rt,it,xe]),Nt=Ke&&(pt?ht:lt),yt=Ke&&Ge===1&&pt,xt=Ke&&Ge>1&&pt,Yt=Ue=>{var tt;It(!0),(tt=qe.onExpand)===null||tt===void 0||tt.call(qe,Ue)},[Nn,vi]=b.useState(0),[ur,Wn]=b.useState(0),mn=(Ue,tt)=>{let{offsetWidth:vn}=Ue;var kt;vi(vn),Wn(parseInt((kt=window.getComputedStyle)===null||kt===void 0?void 0:kt.call(window,tt).fontSize,10)||0)},Or=Ue=>{var tt;Mt(Ue),lt!==Ue&&((tt=qe.onEllipsis)===null||tt===void 0||tt.call(qe,Ue))};b.useEffect(()=>{const Ue=U.current;if(Vt&&pt&&Ue){const tt=xt?Ue.offsetHeight<Ue.scrollHeight:Ue.offsetWidth<Ue.scrollWidth;ht!==tt&&ze(tt)}},[Vt,pt,_,xt,Ut]),b.useEffect(()=>{const Ue=U.current;if(typeof IntersectionObserver>"u"||!Ue||!pt||!Ke)return;const tt=new IntersectionObserver(()=>{Ft(!!Ue.offsetParent)});return tt.observe(Ue),()=>{tt.disconnect()}},[pt,Ke]);let Cn={};qe.tooltip===!0?Cn={title:(o=ee.text)!==null&&o!==void 0?o:_}:b.isValidElement(qe.tooltip)?Cn={title:qe.tooltip}:typeof qe.tooltip=="object"?Cn=Object.assign({title:(s=ee.text)!==null&&s!==void 0?s:_},qe.tooltip):Cn={title:qe.tooltip};const Xt=b.useMemo(()=>{const Ue=tt=>["string","number"].includes(typeof tt);if(!(!Vt||pt)){if(Ue(ee.text))return ee.text;if(Ue(_))return _;if(Ue(O))return O;if(Ue(Cn.title))return Cn.title}},[Vt,pt,O,Cn.title,Nt]);if(H)return b.createElement(Wce,{value:(c=ee.text)!==null&&c!==void 0?c:typeof _=="string"?_:"",onSave:ie,onCancel:ae,onEnd:ee.onEnd,prefixCls:j,className:h,style:f,direction:N,component:I,maxLength:ee.maxLength,autoSize:ee.autoSize,enterIcon:ee.enterIcon});const Jt=()=>{const{expandable:Ue,symbol:tt}=qe;if(!Ue)return null;let vn;return tt?vn=tt:vn=D==null?void 0:D.expand,b.createElement("a",{key:"expand",className:`${j}-expand`,onClick:Yt,"aria-label":D==null?void 0:D.expand},vn)},To=()=>{if(!Y)return;const{icon:Ue,tooltip:tt}=ee,vn=Ol(tt)[0]||(D==null?void 0:D.edit),kt=typeof vn=="string"?vn:"";return J.includes("icon")?b.createElement(Jv,{key:"edit",title:tt===!1?"":vn},b.createElement(M4,{ref:V,className:`${j}-edit`,onClick:ne,"aria-label":kt},Ue||b.createElement(Sce,{role:"button"}))):null},Gi=()=>{if(!pe)return;const{tooltips:Ue,icon:tt}=ue,vn=B4(Ue),kt=B4(tt),Ei=Se?Pg(vn[1],D==null?void 0:D.copied):Pg(vn[0],D==null?void 0:D.copy),Ar=Se?D==null?void 0:D.copied:D==null?void 0:D.copy,qn=typeof Ei=="string"?Ei:Ar;return b.createElement(Jv,{key:"copy",title:Ei},b.createElement(M4,{className:ot(`${j}-copy`,Se&&`${j}-copy-success`),onClick:he,"aria-label":qn},Se?Pg(kt[1],b.createElement(Moe,null),!0):Pg(kt[0],b.createElement(gce,null),!0)))},yr=Ue=>[Ue&&Jt(),To(),Gi()],gn=Ue=>[Ue&&b.createElement("span",{"aria-hidden":!0,key:"ellipsis"},rle),qe.suffix,yr(Ue)];return b.createElement(Mu,{onResize:mn,disabled:!Ke||pt},Ue=>b.createElement(ele,{tooltipProps:Cn,enabledEllipsis:Ke,isEllipsis:Nt},b.createElement(L8,Object.assign({className:ot({[`${j}-${m}`]:m,[`${j}-disabled`]:v,[`${j}-ellipsis`]:Vt,[`${j}-single-line`]:Ke&&Ge===1,[`${j}-ellipsis-single-line`]:yt,[`${j}-ellipsis-multiple-line`]:xt},h),prefixCls:u,style:Object.assign(Object.assign({},f),{WebkitLineClamp:xt?Ge:void 0}),component:I,ref:Lu(Ue,U,t),direction:N,onClick:J.includes("text")?ne:void 0,"aria-label":Xt==null?void 0:Xt.toString(),title:O},B),b.createElement(Qce,{enabledMeasure:Ke&&!pt,text:_,rows:Ge,width:Nn,fontSize:ur,onEllipsis:Or},(tt,vn)=>{let kt=tt;return tt.length&&vn&&Xt&&(kt=b.createElement("span",{key:"show-content","aria-hidden":!0},kt)),nle(e,b.createElement(b.Fragment,null,kt,gn(vn)))}))))}),JE=ile;var ole=globalThis&&globalThis.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const ale=b.forwardRef((e,t)=>{var{ellipsis:o,rel:s}=e,c=ole(e,["ellipsis","rel"]);const u=Object.assign(Object.assign({},c),{rel:s===void 0&&c.target==="_blank"?"noopener noreferrer":s});return delete u.navigate,b.createElement(JE,Object.assign({},u,{ref:t,ellipsis:!!o,component:"a"}))}),sle=ale,cle=b.forwardRef((e,t)=>b.createElement(JE,Object.assign({ref:t},e,{component:"div"}))),lle=cle;var ule=globalThis&&globalThis.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const dle=(e,t)=>{var{ellipsis:o}=e,s=ule(e,["ellipsis"]);const c=b.useMemo(()=>o&&typeof o=="object"?Hs(o,["expandable","rows"]):o,[o]);return b.createElement(JE,Object.assign({ref:t},s,{ellipsis:c,component:"span"}))},hle=b.forwardRef(dle);var ple=globalThis&&globalThis.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const fle=[1,2,3,4,5],mle=b.forwardRef((e,t)=>{const{level:o=1}=e,s=ple(e,["level"]);let c;return fle.includes(o)?c=`h${o}`:c="h1",b.createElement(JE,Object.assign({ref:t},s,{component:c}))}),gle=mle,mm=L8;mm.Text=hle;mm.Link=sle;mm.Title=gle;mm.Paragraph=lle;const Co=mm;function U8(e){var t,o,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(o=U8(e[t]))&&(s&&(s+=" "),s+=o);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function Hw(){for(var e,t,o=0,s="";o<arguments.length;)(e=arguments[o++])&&(t=U8(e))&&(s&&(s+=" "),s+=t);return s}const vle=b.forwardRef(({className:e,children:t},o)=>te.jsx("div",{className:Hw(e,"b-1 b-solid b-coolgray-6 rd of-hidden relative"),ref:o,style:{width:288,height:216},children:t})),ja=Object.assign(b.forwardRef(({className:e,children:t},o)=>te.jsx("div",{className:Hw(e,"flex-1 p-10 p-t-4 flex gap-5"),ref:o,children:t})),{Item:vle}),oi=({children:e})=>te.jsx("div",{className:"h-screen flex flex-col",children:e}),Rc=({children:e})=>te.jsx("samp",{className:"z-2 inline-flex items-center gap-1 absolute bottom-0 bg-black c-white px-1 text-sm",children:e}),Dg=14,kg=8,bT=8,RT=4;function Ele({volumeLevel:e=0,noise:t=.075,...o}){const[s,c]=b.useState(0);return b.useEffect(()=>{if(e&&t){const u=Math.max(0,Math.min(1,t)),h=setInterval(()=>{c(e+Math.random()*u*(Math.random()>.5?1:-1))},50);return()=>clearInterval(h)}},[e,t]),te.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...o,children:[te.jsx("defs",{children:te.jsx("clipPath",{id:"icon-mic-v-clip",children:te.jsx("rect",{height:Dg,rx:kg/2,width:kg,x:bT,y:RT})})}),te.jsx("path",{d:"M0 0h24v24H0z",fill:"#999CA3",opacity:".01"}),te.jsx("rect",{clipPath:"url(#icon-mic-v-clip)",fill:"#fff",height:Dg,width:kg,x:bT,y:RT}),te.jsx("path",{d:"M4 16.625h2v-1.25H4v1.25Zm6 4h4v-1.25h-4v1.25Zm8-4h2v-1.25h-2v1.25Zm-4 4A4.625 4.625 0 0 0 18.625 16h-1.25A3.375 3.375 0 0 1 14 19.375v1.25ZM5.375 16A4.625 4.625 0 0 0 10 20.625v-1.25A3.375 3.375 0 0 1 6.625 16h-1.25Z",fill:"#fff"}),te.jsx("g",{clipPath:"url(#icon-mic-v-clip)",children:te.jsx("rect",{fill:"#44AD00",height:Dg*2,style:{transform:`translateY(${(1-s)*Dg}px)`,transition:"transform .1s"},width:kg,x:bT,y:RT})})]})}const _le=b.memo(function(t){return te.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[te.jsx("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),te.jsx("path",{clipRule:"evenodd",d:"M19.277 16.625H20v-1.25h-1.973l1.25 1.25Zm-3.239 2.065.89.89a4.602 4.602 0 0 1-2.716 1.04l-.212.005h-4a4.626 4.626 0 0 1-4.55-3.787l-.033-.213H4v-1.25h2c.345 0 .625.28.625.625a3.375 3.375 0 0 0 3.19 3.37l.185.005h4a3.36 3.36 0 0 0 2.038-.685Zm.587-4.717V8a4.625 4.625 0 0 0-8.5-2.526l.911.91a3.374 3.374 0 0 1 6.281.991H14v1.25h1.375v.75H14v1.25h1.375v.75h-1.348l1.25 1.25h.098v.098l1.25 1.25Zm-2.587 2.717.89.89A4.625 4.625 0 0 1 7.375 14v-3.973l1.25 1.25v.098h.098l1.25 1.25H8.625V14a3.375 3.375 0 0 0 5.413 2.69Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})}),Sle=b.memo(function(t){return te.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[te.jsx("circle",{cx:"12",cy:"11",r:"7",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),te.jsx("circle",{cx:"12",cy:"11",r:"3",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),te.jsx("circle",{cx:"14.625",cy:"6.625",fill:"#fff",r:".625"}),te.jsx("path",{d:"M7 18.25a8.004 8.004 0 0 0 10 0",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"})]})}),yle=b.memo(function(t){return te.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[te.jsx("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),te.jsx("path",{clipRule:"evenodd",d:"m15.72 18.373.91.909a8.63 8.63 0 0 1-9.788-.364l-.232-.18.78-.976a7.38 7.38 0 0 0 8.33.61Zm2.434-2.87A7.625 7.625 0 0 0 7.497 4.846l.897.896a6.375 6.375 0 0 1 8.864 8.864l.896.897Zm-3.857 1.446.952.951A7.625 7.625 0 0 1 5.1 7.751l.951.952a6.375 6.375 0 0 0 8.246 8.246Zm.956-4.348a3.625 3.625 0 0 0-4.854-4.854l.964.964a2.378 2.378 0 0 1 2.926 2.926l.964.964Zm-.628-5.351a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})});function Vo(e,t,o){return e.on(t,o),()=>e.off(t,o)}function Cle(e){try{return e()}catch(t){console.error(t)}}function Hh(e){return()=>e.forEach(Cle)}function Ww(e,t){const o=setTimeout(e,t);return()=>clearTimeout(o)}function F8(){let e,t,o;function s(){if(t){const v=t;t=void 0,v()}}async function c(){if(o){const v=o;o=void 0;try{await v()}catch(_){console.error(_)}}}async function u(v){e=!0,await c();try{o=await v()}catch(_){console.error(_)}e=!1,s()}async function h(){e=!0,await c(),e=!1,s()}function f(v){e?t=()=>u(v):u(v)}function m(){e?t=h:h()}return{run:f,dispose:m}}const V8=typeof document<"u"?b.useLayoutEffect:b.useEffect;function Tle(e){return e!=null&&typeof e.then=="function"}function Fu(){const e=b.useRef(!1);return b.useEffect(()=>(e.current=!1,()=>{e.current=!0}),[]),e}function ble(){const e=Fu();function t(o,s){return new Promise(async(c,u)=>{try{const h=await o;e.current||c(h)}catch(h){e.current?s&&s(h):u(h)}})}return b.useCallback(t,[e])}function QE(e){const t=ble(),[o,s]=b.useState();return V8(()=>{Tle(e)?t(e).then(s):s(e)},[e,t]),o}function Wh(e,t){const o=b.useRef();b.useEffect(()=>{const{run:s,dispose:c}=o.current||(o.current=F8());return s(e),c},t)}function Rle(e,t){const o=e.split("."),s=t.split("."),c=Math.max(o.length,s.length);for(let u=0;u<c;u++){const h=parseInt(o[u]||"0"),f=parseInt(s[u]||"0");if(h>f)return 1;if(h<f)return-1}return 0}const j8=b.createContext(null);function B8({client:e,children:t}){return te.jsx(j8.Provider,{value:e,children:t})}function Ile(e){const t=b.useContext(j8);return e||t}function za(e){const t=Ile(e);if(!t)throw new Error("Agora RTC client not found. Should be wrapped in <AgoraRTCProvider value={client} />");return t}function wle(e){const t=za(e),[o,s]=b.useState(t?t.connectionState:"DISCONNECTED");return b.useEffect(()=>{if(t){s(t.connectionState);let c;return Hh([Vo(t,"connection-state-change",u=>{c==null||c(),u==="CONNECTED"?c=Ww(()=>s(u),0):s(u)}),()=>c==null?void 0:c()])}else s("DISCONNECTED")},[t]),o}function ys(e){const t=za(e),[o,s]=b.useState(t?t.connectionState==="CONNECTED":!1);return b.useEffect(()=>{if(t){s(t.connectionState==="CONNECTED");let c;return Hh([Vo(t,"connection-state-change",u=>{c==null||c(),c=Ww(()=>s(u==="CONNECTED"),0)}),()=>c==null?void 0:c()])}else s(!1)},[t]),o}function ZE(e){const t=za(e),[o,s]=b.useState(t==null?void 0:t.uid);return b.useEffect(()=>{if(t)return Vo(t,"connection-state-change",c=>{if(c==="CONNECTED")return Ww(()=>s(t.uid),0);c==="DISCONNECTED"&&s(void 0)})},[t]),o}class pa extends Error{constructor(o,s){var t=(...args)=>{super(...args);tg(this,"rtcMethod");tg(this,"rtcError");tg(this,"name","AgoraRTCReactException")};t(typeof s=="string"?s:s.message),this.rtcMethod=o,this.rtcError=s}log(o){console[o](this)}}function Hi(e,t=!0,o){const s=za(o),c=ys(o),[u,h]=b.useState(!1),[f,m]=b.useState(0),[v,_]=b.useState(null),y=Fu();return Wh(async()=>{if(y.current||(_(null),m(0),h(!1)),t&&s){try{y.current||h(!0);const{appid:T,channel:A,token:I,uid:O}=typeof e=="function"?await e():e,L=await s.join(T,A,I,O);y.current||m(L)}catch(T){console.error(T),y.current||_(new pa("IAgoraRTCClient.join",T))}return y.current||h(!1),()=>{for(const T of s.localTracks)T.isPlaying&&T.stop(),T.close();return s.leave()}}},[t,o]),{data:f,isLoading:u,isConnected:c,error:v}}const $4=()=>({uplink:0,downlink:0,delay:0});function Ole(e){const t=za(e),[o,s]=b.useState($4);return b.useEffect(()=>{if(t)return Vo(t,"network-quality",c=>s({uplink:c.uplinkNetworkQuality,downlink:c.downlinkNetworkQuality,delay:t.getRTCStats().RTT??0}));s($4())},[t]),o}function Gh(e,t=!0,o){const s=za(o),c=ys(o),u=b.useRef([]),[h,f]=b.useState(!1),[m,v]=b.useState(null),_=Fu();return Wh(async()=>{if(_.current||(f(!1),v(null)),!s||!c||!t)return;const y=e.filter(Boolean),T=O=>{const L=Rle(bu.VERSION,"4.18.2")>=0;return L||new pa("usePublish","please check your agora-rtc-sdk-ng version in package.json, it's recommend upgrade to >= 4.18.2").log("warn"),L?s.mode!=="live"||s.role!=="audience":!0},A=O=>u.current.some(L=>L&&L.getTrackId()===O.getTrackId()),I=O=>T()&&O.enabled&&t&&!A(O);for(let O=0;O<y.length;O++){const L=y[O];if(L&&I(L)){try{_.current||f(!0),await s.publish(L)}catch(x){console.error(x),_.current||v(new pa("IAgoraRTCClient.publish",x))}_.current||f(!1)}}u.current=y},[c,t,s,e]),{isLoading:h,error:m}}function zh(e=!0,t={ANS:!0,AEC:!0},o){const s=ys(o),[c,u]=b.useState(null),[h,f]=b.useState(!1),[m,v]=b.useState(null),_=Fu();return Wh(async()=>{if(s&&e&&!c){try{_.current||f(!0);const y=await bu.createMicrophoneAudioTrack(t);_.current||u(y)}catch(y){console.error(y),_.current||v(new pa("IAgoraRTC.createMicrophoneAudioTrack",y))}_.current||f(!1)}!s&&!_.current&&u(null)},[s,e]),{localMicrophoneTrack:c,isLoading:h,error:m}}function Kh(e=!0,t){const o=ys(t),[s,c]=b.useState(null),[u,h]=b.useState(!1),[f,m]=b.useState(null),v=Fu();return Wh(async()=>{if(v.current||(h(!1),m(null)),o&&e&&!s){try{v.current||h(!0);const _=await bu.createCameraVideoTrack();v.current||c(_)}catch(_){console.error(_),v.current||m(new pa("IAgoraRTC.createCameraVideoTrack",_))}v.current||h(!1)}!o&&!v.current&&c(null)},[o,e]),{localCameraTrack:s,isLoading:u,error:f}}function gm(e,t){const o=za(t),[s,c]=b.useState([]),u=ys(),h=b.useRef([]),[f,m]=b.useState(!1),[v,_]=b.useState(null),y=Fu();return Wh(async()=>{if(y.current||_(null),!Array.isArray(e)||!u)return;const T=async O=>{if(!O.audioTrack&&e.some(({uid:L})=>O.uid===L)){try{y.current||m(!0),await o.subscribe(O,"audio")}catch(L){console.error(L),y.current||_(new pa("IAgoraRTCClient.subscribe",L))}O.audioTrack&&!h.current.some(L=>L.getUserId()===O.uid)&&h.current.push(O.audioTrack),h.current=h.current.map(L=>O.audioTrack&&L.getUserId()===O.uid&&L.getTrackId()!==O.audioTrack.getTrackId()?O.audioTrack:L),y.current||(c(h.current),m(!1))}},A=async O=>{if(e.some(({uid:L})=>O.uid===L)){y.current||(h.current=h.current.filter(L=>L.getUserId()!==O.uid),c(h.current));try{y.current||m(!0),await o.unsubscribe(O,"audio")}catch(L){console.error(L),y.current||_(new pa("IAgoraRTCClient.unsubscribe",L))}y.current||m(!1)}};e.map(O=>{!O.audioTrack&&O.hasAudio&&T(O)});const I=[];for(let O=0;O<h.current.length;O++){const L=h.current[O];if(!e.some(x=>x.uid===L.getUserId())){const x=o.remoteUsers.find(N=>N.uid===L.getUserId());x&&(I.push({user:x,mediaType:"audio"}),h.current.splice(O,1),O--)}}if(I.length>0){try{y.current||m(!0),await o.massUnsubscribe(I)}catch(O){console.error(O),y.current||_(new pa("IAgoraRTCClient.massUnsubscribe",O))}y.current||(c(h.current.slice()),m(!1))}return Hh([Vo(o,"user-published",(O,L)=>{e.find(x=>x.uid===O.uid)&&L==="audio"&&T(O)}),Vo(o,"user-unpublished",(O,L)=>{e.find(x=>x.uid===O.uid)&&L==="audio"&&A(O)})])},[u,o,e]),{audioTracks:s,isLoading:f,error:v}}function vm(e,t){const o=za(t),[s,c]=b.useState([]),u=ys(),h=b.useRef([]),[f,m]=b.useState(!1),[v,_]=b.useState(null),y=Fu();return Wh(async()=>{if(y.current||_(null),!Array.isArray(e)||!u)return;const T=async O=>{if(!O.videoTrack&&e.some(({uid:L})=>O.uid===L)){try{y.current||m(!0),await o.subscribe(O,"video")}catch(L){console.error(L),y.current||_(new pa("IAgoraRTCClient.subscribe",L))}O.videoTrack&&!h.current.some(L=>L.getUserId()===O.uid)&&h.current.push(O.videoTrack),h.current=h.current.map(L=>O.videoTrack&&L.getUserId()===O.uid&&L.getTrackId()!==O.videoTrack.getTrackId()?O.videoTrack:L),y.current||(c(h.current),m(!1))}},A=async O=>{if(e.some(({uid:L})=>O.uid===L)){y.current||(h.current=h.current.filter(L=>L.getUserId()!==O.uid),c(h.current));try{y.current||m(!0),await o.unsubscribe(O,"video")}catch(L){console.error(L),y.current||_(new pa("IAgoraRTCClient.unsubscribe",L))}y.current||m(!1)}};e.map(O=>{!O.videoTrack&&O.hasVideo&&T(O)});const I=[];for(let O=0;O<h.current.length;O++){const L=h.current[O];if(!e.some(x=>x.uid===L.getUserId())){const x=o.remoteUsers.find(N=>N.uid===L.getUserId());x&&(I.push({user:x,mediaType:"video"}),h.current.splice(O,1),O--)}}if(I.length>0){try{y.current||m(!0),await o.massUnsubscribe(I)}catch(O){console.error(O),y.current||_(new pa("IAgoraRTCClient.massUnsubscribe",O))}y.current||(c(h.current.slice()),m(!1))}return Hh([Vo(o,"user-published",(O,L)=>{e.find(x=>x.uid===O.uid)&&L==="video"&&T(O)}),Vo(o,"user-unpublished",(O,L)=>{e.find(x=>x.uid===O.uid)&&L==="video"&&A(O)})])},[u,o,e]),{videoTracks:s,isLoading:f,error:v}}function H4(e,t,o){const s=za(o),c=t==="audio"?"audioTrack":"videoTrack",[u,h]=b.useState(e&&e[c]),f=ys(),m=b.useRef(),[v,_]=b.useState(!1),[y,T]=b.useState(null);return b.useEffect(()=>{if(!e||!f)return;let A=!1;A||T(null);const I=t==="audio"?"hasAudio":"hasVideo",O=e.uid,L=async(D,U)=>{if(D[c]&&s.remoteUsers.some(({uid:V})=>D.uid===V))try{A||_(!0),await s.unsubscribe(D,U)}catch(V){A||T(new pa("IAgoraRTCClient.unsubscribe",V)),console.error(V)}A||(h(void 0),_(!1))},x=async(D,U)=>{try{!D[c]&&s.remoteUsers.some(({uid:V})=>D.uid===V)&&(A||_(!0),await s.subscribe(D,U)),A||h(D[c])}catch(V){A||T(new pa("IAgoraRTCClient.subscribe",V)),console.error(V)}A||_(!1)},N=m.current||(m.current=F8());return!e[c]&&e[I]?N.run(()=>x(e,t)):h(e[c]),Hh([()=>{A=!0,N.dispose()},Vo(s,"user-published",(D,U)=>{D.uid===O&&U===t&&N.run(()=>x(D,t))}),Vo(s,"user-unpublished",(D,U)=>{D.uid===O&&U===t&&N.run(()=>L(D,t))})])},[f,s,e,t,c]),{track:u,isLoading:v,error:y}}function Gs(e){const t=za(e),[o,s]=b.useState(t?t.remoteUsers:[]);return b.useEffect(()=>{if(t){const c=()=>s(t.remoteUsers.slice());return Hh([Vo(t,"user-joined",c),Vo(t,"user-left",c),Vo(t,"user-published",c),Vo(t,"user-unpublished",c)])}},[t]),o}const $8=b.createContext(void 0);function Gw(e,t,o){const s=b.useContext($8);b.useEffect(()=>{if(e)return o&&t?e.play(o):e.stop(),s?(s.onMount(e),()=>s.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,o,t,s])}function zw(e,t){const o=b.useContext($8);V8(()=>{if(e)return t?e.play():e.stop(),o?(o.onMount(e),()=>o.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,t,o])}function Kw({track:e,play:t=!1,volume:o,disabled:s,muted:c,children:u}){const h=QE(e);return zw(h,t),b.useEffect(()=>{h&&o!=null&&h.setVolume(o)},[h,o]),b.useEffect(()=>{h&&s!=null&&h.setEnabled(!s).catch(console.warn)},[s,h]),b.useEffect(()=>{h&&c!=null&&h.setMuted(c).catch(console.warn)},[c,h]),u?te.jsx(te.Fragment,{children:u}):null}const e_={position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#000"},H8={width:"100%",height:"100%"},Em={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:2},Yh=(e,t)=>b.useMemo(()=>({...e,...t}),[e,t]);function Yw({track:e,play:t,disabled:o,muted:s,style:c,...u}){const h=Yh(H8,c),[f,m]=b.useState(null),v=QE(e);return Gw(v,t,f),b.useEffect(()=>{v&&o!=null&&v.setEnabled(!o).catch(console.warn)},[o,v]),b.useEffect(()=>{v&&s!=null&&v.setMuted(s).catch(console.warn)},[s,v]),te.jsx("div",{...u,ref:m,style:h})}const Ale={width:"100%",height:"100%",background:"#1a1e21 center/cover no-repeat",filter:"blur(16px) brightness(0.4)"},Nle={position:"absolute",top:"50%",left:"50%",maxWidth:"50%",maxHeight:"50%",aspectRatio:"1",transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",objectFit:"cover"};function t_({cover:e}){return te.jsx("div",{style:Em,children:typeof e=="string"?te.jsxs(te.Fragment,{children:[te.jsx("div",{style:{...Ale,backgroundImage:`url(${e})`}}),te.jsx("img",{src:e,style:Nle})]}):e()})}function W8({micOn:e,cameraOn:t,audioTrack:o,videoTrack:s,playAudio:c,playVideo:u,volume:h,cover:f,children:m,style:v,..._}){const y=Yh(e_,v);return u=u??!!t,c=c??!!e,te.jsxs("div",{..._,style:y,children:[te.jsx(Yw,{disabled:!t,play:u,track:s}),te.jsx(Kw,{disabled:!e,play:c,track:o,volume:h}),f&&!t&&te.jsx(t_,{cover:f}),te.jsx("div",{style:Em,children:m})]})}function G8({track:e,play:t=!1,playbackDeviceId:o,volume:s,children:c}){return zw(e,t),b.useEffect(()=>{e&&o!=null&&e.setPlaybackDevice(o).catch(console.warn)},[e,o]),b.useEffect(()=>{e&&s!=null&&e.setVolume(s)},[e,s]),c?te.jsx(te.Fragment,{children:c}):null}function qw({track:e,play:t,style:o,...s}){const c=Yh(H8,o),[u,h]=b.useState(null);return Gw(e,t,u),te.jsx("div",{...s,ref:h,style:c})}function Xw({user:e,playVideo:t,playAudio:o,playbackDeviceId:s,volume:c,cover:u,style:h,children:f,...m}){const v=Yh(e_,h),{track:_}=H4(e,"video"),{track:y}=H4(e,"audio");return t=t??(e==null?void 0:e.hasVideo),o=o??(e==null?void 0:e.hasAudio),te.jsxs("div",{...m,style:v,children:[te.jsx(qw,{play:t,track:_}),te.jsx(G8,{play:o,playbackDeviceId:s,track:y,volume:c}),u&&!t&&te.jsx(t_,{cover:u}),te.jsx("div",{style:Em,children:f})]})}function xle({track:e,deviceId:t,...o}){const s=QE(e);return b.useEffect(()=>{s&&t!=null&&s.setDevice(t).catch(console.warn)},[t,s]),te.jsx(Kw,{track:e,...o})}function Ple({track:e,deviceId:t,...o}){const s=QE(e);return b.useEffect(()=>{s&&t!=null&&s.setDevice(t).catch(console.warn)},[t,s]),te.jsx(Yw,{track:e,...o})}function Jw({micOn:e,cameraOn:t,audioTrack:o,videoTrack:s,playAudio:c=!1,playVideo:u,micDeviceId:h,cameraDeviceId:f,volume:m,cover:v,children:_,style:y,...T}){const A=Yh(e_,y);return u=u??!!t,c=c??!!e,te.jsxs("div",{...T,style:A,children:[te.jsx(Ple,{deviceId:f,disabled:!t,play:u,track:s}),te.jsx(xle,{deviceId:h,disabled:!e,play:c,track:o,volume:m}),v&&!t&&te.jsx(t_,{cover:v}),te.jsx("div",{style:Em,children:_})]})}function _m({track:e,playVideo:t,cover:o,client:s,style:c,children:u,...h}){var _,y;const f=Yh(e_,c),v=(y=(_=za(s).remoteUsers)==null?void 0:_.find(T=>T.uid===(e==null?void 0:e.getUserId())))==null?void 0:y.hasVideo;return t=t??v,te.jsxs("div",{...h,style:f,children:[te.jsx(qw,{play:t,track:e}),o&&!t&&te.jsx(t_,{cover:o}),te.jsx("div",{style:Em,children:u})]})}const Qw=({published:e,total:t})=>te.jsx("div",{className:"p-4 text-xl",children:te.jsxs("span",{className:"inline-flex items-center gap-1 py-2 px-3 rd b-1 b-solid",children:[te.jsx("i",{className:"i-lucide-users"}),te.jsxs("samp",{className:"text-base",children:[e,"/",t]})]})});var Zw={exports:{}};Zw.exports;(function(e){(function(t,o,s){function c(m){var v=this,_=f();v.next=function(){var y=2091639*v.s0+v.c*23283064365386963e-26;return v.s0=v.s1,v.s1=v.s2,v.s2=y-(v.c=y|0)},v.c=1,v.s0=_(" "),v.s1=_(" "),v.s2=_(" "),v.s0-=_(m),v.s0<0&&(v.s0+=1),v.s1-=_(m),v.s1<0&&(v.s1+=1),v.s2-=_(m),v.s2<0&&(v.s2+=1),_=null}function u(m,v){return v.c=m.c,v.s0=m.s0,v.s1=m.s1,v.s2=m.s2,v}function h(m,v){var _=new c(m),y=v&&v.state,T=_.next;return T.int32=function(){return _.next()*4294967296|0},T.double=function(){return T()+(T()*2097152|0)*11102230246251565e-32},T.quick=T,y&&(typeof y=="object"&&u(y,_),T.state=function(){return u(_,{})}),T}function f(){var m=4022871197,v=function(_){_=String(_);for(var y=0;y<_.length;y++){m+=_.charCodeAt(y);var T=.02519603282416938*m;m=T>>>0,T-=m,T*=m,m=T>>>0,T-=m,m+=T*4294967296}return(m>>>0)*23283064365386963e-26};return v}o&&o.exports?o.exports=h:s&&s.amd?s(function(){return h}):this.alea=h})(At,e,!1)})(Zw);var Dle=Zw.exports,e1={exports:{}};e1.exports;(function(e){(function(t,o,s){function c(f){var m=this,v="";m.x=0,m.y=0,m.z=0,m.w=0,m.next=function(){var y=m.x^m.x<<11;return m.x=m.y,m.y=m.z,m.z=m.w,m.w^=m.w>>>19^y^y>>>8},f===(f|0)?m.x=f:v+=f;for(var _=0;_<v.length+64;_++)m.x^=v.charCodeAt(_)|0,m.next()}function u(f,m){return m.x=f.x,m.y=f.y,m.z=f.z,m.w=f.w,m}function h(f,m){var v=new c(f),_=m&&m.state,y=function(){return(v.next()>>>0)/4294967296};return y.double=function(){do var T=v.next()>>>11,A=(v.next()>>>0)/4294967296,I=(T+A)/(1<<21);while(I===0);return I},y.int32=v.next,y.quick=y,_&&(typeof _=="object"&&u(_,v),y.state=function(){return u(v,{})}),y}o&&o.exports?o.exports=h:s&&s.amd?s(function(){return h}):this.xor128=h})(At,e,!1)})(e1);var kle=e1.exports,t1={exports:{}};t1.exports;(function(e){(function(t,o,s){function c(f){var m=this,v="";m.next=function(){var y=m.x^m.x>>>2;return m.x=m.y,m.y=m.z,m.z=m.w,m.w=m.v,(m.d=m.d+362437|0)+(m.v=m.v^m.v<<4^(y^y<<1))|0},m.x=0,m.y=0,m.z=0,m.w=0,m.v=0,f===(f|0)?m.x=f:v+=f;for(var _=0;_<v.length+64;_++)m.x^=v.charCodeAt(_)|0,_==v.length&&(m.d=m.x<<10^m.x>>>4),m.next()}function u(f,m){return m.x=f.x,m.y=f.y,m.z=f.z,m.w=f.w,m.v=f.v,m.d=f.d,m}function h(f,m){var v=new c(f),_=m&&m.state,y=function(){return(v.next()>>>0)/4294967296};return y.double=function(){do var T=v.next()>>>11,A=(v.next()>>>0)/4294967296,I=(T+A)/(1<<21);while(I===0);return I},y.int32=v.next,y.quick=y,_&&(typeof _=="object"&&u(_,v),y.state=function(){return u(v,{})}),y}o&&o.exports?o.exports=h:s&&s.amd?s(function(){return h}):this.xorwow=h})(At,e,!1)})(t1);var Lle=t1.exports,n1={exports:{}};n1.exports;(function(e){(function(t,o,s){function c(f){var m=this;m.next=function(){var _=m.x,y=m.i,T,A;return T=_[y],T^=T>>>7,A=T^T<<24,T=_[y+1&7],A^=T^T>>>10,T=_[y+3&7],A^=T^T>>>3,T=_[y+4&7],A^=T^T<<7,T=_[y+7&7],T=T^T<<13,A^=T^T<<9,_[y]=A,m.i=y+1&7,A};function v(_,y){var T,A=[];if(y===(y|0))A[0]=y;else for(y=""+y,T=0;T<y.length;++T)A[T&7]=A[T&7]<<15^y.charCodeAt(T)+A[T+1&7]<<13;for(;A.length<8;)A.push(0);for(T=0;T<8&&A[T]===0;++T);for(T==8?A[7]=-1:A[T],_.x=A,_.i=0,T=256;T>0;--T)_.next()}v(m,f)}function u(f,m){return m.x=f.x.slice(),m.i=f.i,m}function h(f,m){f==null&&(f=+new Date);var v=new c(f),_=m&&m.state,y=function(){return(v.next()>>>0)/4294967296};return y.double=function(){do var T=v.next()>>>11,A=(v.next()>>>0)/4294967296,I=(T+A)/(1<<21);while(I===0);return I},y.int32=v.next,y.quick=y,_&&(_.x&&u(_,v),y.state=function(){return u(v,{})}),y}o&&o.exports?o.exports=h:s&&s.amd?s(function(){return h}):this.xorshift7=h})(At,e,!1)})(n1);var Mle=n1.exports,r1={exports:{}};r1.exports;(function(e){(function(t,o,s){function c(f){var m=this;m.next=function(){var _=m.w,y=m.X,T=m.i,A,I;return m.w=_=_+1640531527|0,I=y[T+34&127],A=y[T=T+1&127],I^=I<<13,A^=A<<17,I^=I>>>15,A^=A>>>12,I=y[T]=I^A,m.i=T,I+(_^_>>>16)|0};function v(_,y){var T,A,I,O,L,x=[],N=128;for(y===(y|0)?(A=y,y=null):(y=y+"\0",A=0,N=Math.max(N,y.length)),I=0,O=-32;O<N;++O)y&&(A^=y.charCodeAt((O+32)%y.length)),O===0&&(L=A),A^=A<<10,A^=A>>>15,A^=A<<4,A^=A>>>13,O>=0&&(L=L+1640531527|0,T=x[O&127]^=A+L,I=T==0?I+1:0);for(I>=128&&(x[(y&&y.length||0)&127]=-1),I=127,O=4*128;O>0;--O)A=x[I+34&127],T=x[I=I+1&127],A^=A<<13,T^=T<<17,A^=A>>>15,T^=T>>>12,x[I]=A^T;_.w=L,_.X=x,_.i=I}v(m,f)}function u(f,m){return m.i=f.i,m.w=f.w,m.X=f.X.slice(),m}function h(f,m){f==null&&(f=+new Date);var v=new c(f),_=m&&m.state,y=function(){return(v.next()>>>0)/4294967296};return y.double=function(){do var T=v.next()>>>11,A=(v.next()>>>0)/4294967296,I=(T+A)/(1<<21);while(I===0);return I},y.int32=v.next,y.quick=y,_&&(_.X&&u(_,v),y.state=function(){return u(v,{})}),y}o&&o.exports?o.exports=h:s&&s.amd?s(function(){return h}):this.xor4096=h})(At,e,!1)})(r1);var Ule=r1.exports,i1={exports:{}};i1.exports;(function(e){(function(t,o,s){function c(f){var m=this,v="";m.next=function(){var y=m.b,T=m.c,A=m.d,I=m.a;return y=y<<25^y>>>7^T,T=T-A|0,A=A<<24^A>>>8^I,I=I-y|0,m.b=y=y<<20^y>>>12^T,m.c=T=T-A|0,m.d=A<<16^T>>>16^I,m.a=I-y|0},m.a=0,m.b=0,m.c=-1640531527,m.d=1367130551,f===Math.floor(f)?(m.a=f/4294967296|0,m.b=f|0):v+=f;for(var _=0;_<v.length+20;_++)m.b^=v.charCodeAt(_)|0,m.next()}function u(f,m){return m.a=f.a,m.b=f.b,m.c=f.c,m.d=f.d,m}function h(f,m){var v=new c(f),_=m&&m.state,y=function(){return(v.next()>>>0)/4294967296};return y.double=function(){do var T=v.next()>>>11,A=(v.next()>>>0)/4294967296,I=(T+A)/(1<<21);while(I===0);return I},y.int32=v.next,y.quick=y,_&&(typeof _=="object"&&u(_,v),y.state=function(){return u(v,{})}),y}o&&o.exports?o.exports=h:s&&s.amd?s(function(){return h}):this.tychei=h})(At,e,!1)})(i1);var Fle=i1.exports,z8={exports:{}};(function(e){(function(t,o,s){var c=256,u=6,h=52,f="random",m=s.pow(c,u),v=s.pow(2,h),_=v*2,y=c-1,T;function A(U,V,j){var B=[];V=V==!0?{entropy:!0}:V||{};var Y=x(L(V.entropy?[U,D(o)]:U??N(),3),B),ee=new I(B),H=function(){for(var Z=ee.g(u),J=m,X=0;Z<v;)Z=(Z+X)*c,J*=c,X=ee.g(1);for(;Z>=_;)Z/=2,J/=2,X>>>=1;return(Z+X)/J};return H.int32=function(){return ee.g(4)|0},H.quick=function(){return ee.g(4)/4294967296},H.double=H,x(D(ee.S),o),(V.pass||j||function(Z,J,X,ne){return ne&&(ne.S&&O(ne,ee),Z.state=function(){return O(ee,{})}),X?(s[f]=Z,J):Z})(H,Y,"global"in V?V.global:this==s,V.state)}function I(U){var V,j=U.length,B=this,Y=0,ee=B.i=B.j=0,H=B.S=[];for(j||(U=[j++]);Y<c;)H[Y]=Y++;for(Y=0;Y<c;Y++)H[Y]=H[ee=y&ee+U[Y%j]+(V=H[Y])],H[ee]=V;(B.g=function(Z){for(var J,X=0,ne=B.i,ie=B.j,ae=B.S;Z--;)J=ae[ne=y&ne+1],X=X*c+ae[y&(ae[ne]=ae[ie=y&ie+J])+(ae[ie]=J)];return B.i=ne,B.j=ie,X})(c)}function O(U,V){return V.i=U.i,V.j=U.j,V.S=U.S.slice(),V}function L(U,V){var j=[],B=typeof U,Y;if(V&&B=="object")for(Y in U)try{j.push(L(U[Y],V-1))}catch{}return j.length?j:B=="string"?U:U+"\0"}function x(U,V){for(var j=U+"",B,Y=0;Y<j.length;)V[y&Y]=y&(B^=V[y&Y]*19)+j.charCodeAt(Y++);return D(V)}function N(){try{var U;return T&&(U=T.randomBytes)||(U=new Uint8Array(c),(t.crypto||t.msCrypto).getRandomValues(U)),D(U)}catch{var V=t.navigator,j=V&&V.plugins;return[+new Date,t,j,t.screen,D(o)]}}function D(U){return String.fromCharCode.apply(0,U)}x(s.random(),o),e.exports?e.exports=A:s["seed"+f]=A})(typeof self<"u"?self:At,[],Math)})(z8);var Vle=z8.exports,jle=Dle,Ble=kle,$le=Lle,Hle=Mle,Wle=Ule,Gle=Fle,Vu=Vle;Vu.alea=jle;Vu.xor128=Ble;Vu.xorwow=$le;Vu.xorshift7=Hle;Vu.xor4096=Wle;Vu.tychei=Gle;var zle=Vu;const K8=Al(zle);let Y8=K8();function Kle(){return Y8()}function W4(e){Y8=K8(e)}function q8(e,t){const o=Array.isArray(e)?()=>Yle(e):e;return(t==null?void 0:t.length)===void 0?o(0):Array.from({length:t.length},(s,c)=>o(c))}function Yle(e){return e[Math.floor(Kle()*e.length)]}function qle(e,t){return q8(e,t)}var G4={withAccents:{male:["Adrián","Ægir","Álvaro","André","Andrés","Árni","Asbjørn","Björn","César","Daníel","Davíð","Emílio","Fañch","François","František","Gísli","Götz","Guðjón","Guðmundur","Günter","Halldór","Hans-Jörg","Hans-Jürgen","Hüseyin","Iñaki","János","Jesús","Jiří","Jóhann","Jóhannes","Jokūbas","Jón","José","Jörn","Julião","Jürgen","Kristján","Maël","Magnús","Mathéo","Mátyás","Michał","Noël","Nuñez","Ólafur","Óscar","Øyvind","Páll","Paweł","Pétur","Ramón","Raúl","René","Ruairí","Rubén","Seán","Sérgio","Sigurður","Sönke","Stefán","Tomáš","Þorsteinn"],female:["Ædel","Agnès","Alícia","Änne","Antónia","Ásta","Auður","Cäcilia","Chloë","Claúdia","Dörte","Elín","Elísabet","Eliška","Františka","Glória","Grażyna","Guðbjörg","Guðný","Guðrún","Henriëtte","Ingibjörg","Íris","Jóhanna","Jóna","Júlia","Käte","Katrín","Kolbrún","Kristín","KŠthe","Letícia","Lídia","Lúcia","Małgorzata","Margrét","María","Mónica","Natália","Ólöf","Patrícia","Ragnheiður","Renée","Ružena","Siân","Sigríður","Sigrún","Sílvia","Sørina","Věra","Virgínia","Zoë","Þóra","Þórunn"]},withoutAccents:{male:["Abdul","Abdullahi","Abubakar","Adam","Adamu","Adiy","Ahmad","Ajay","Akira","Alan","Alberto","Alejandro","Aleksander","Aleksandr","Aleksey","Alex","Alexander","Alexey","Ali","Aliyu","Aminu","Amit","Amiyr","Amiyt","Amnuai","Amphon","Anah","Anan","Andreas","Andrew","Andrey","Andri","Andries","Andrzej","Anil","Anthony","Anton","Antonio","Arnar","Artur","Artyom","Arun","Ashok","Atli","Avraham","Bartosz","Bello","Bernd","Bin","Birgir","Bjarni","Blessing","Bongani","Brian","Bunmi","Carlos","Carol","Chan","Chao","Charles","Charoen","Chen","Cheng","Christian","Christopher","Colin","Daniel","Daniyel","Dariusz","David","Denis","Dennis","Diego","Dieter","Dilip","Dinesh","Dmitriy","Dmitry","Einar","Eliyahu","Emmanuel","Evgeniy","Fernando","Fran","Francis","Francisco","Francisco-Javier","Frank","Franz","Gang","Gareth","Gary","George","Gerhard","Graham","Grzegorz","Gunnar","Guy","Haim","Haiyan","Hans","Hans-Ulrich","Haruna","Hassan","Heike","Heinz","Helgi","Helmut","Hendrik","Herbert","Hideo","Hiromi","Hiroshi","Hong","Horst","Hui","Ian","Ibrahim","Idris","Igor","Ilya","Isa","Isaac","Isah","Ivan","Jabulani","Jacek","Jacobus","Jakub","James","Jan","Janusz","Javier","Jean","Jerzy","Jesus","Jason","Jianguo","Jianhua","Jianjun","Jianping","Jin","Joan","Johan","Johannes","John","Jonathan","Jorge","Jose","Jose-Antonio","Jose-Luis","Jose-Manuel","Jose-Maria","Josef","Joseph","Joyce","Juan","Kabiru","Kai","Kamil","Karen","Karl","Karl-Heinz","Katsumi","Kazuo","Kelvin","Kenji","Kenneth","Kevin","Kiran","Kirill","Kiyoshi","Kjartan","Klaus","Ko","Koichi","Koji","Konstantin","Koshi","Krishna","Kristinn","Krzysztof","Kun","Lakshmi","Lan","Laxmi","Lei","Li","Lihua","Lijun","Lilian","Lin","Ling","Liping","Liyor","Luis","Lukasz","Maciej","Mahmood","Maksim","Manfred","Manoj","Manuel","Marcin","Mardkhay","Marek","Mariusz","Mark","Martin","Masami","Masao","Mateusz","Matt","Matthew","Meiyr","Michael","Michal","Miguel","Miguel-Angel","Mikhail","Min","Ming","Mitsuo","Miykhael","Miykhal","Mo","Mohamed","Mohammad","Mohammed","Mohan","Moses","Moshe","Mpho","Muhammad","Muhammed","Mukesh","Musa","Narong","Nathan","Nicola","Nikita","Nikolay","Ning","Nkosinathi","Noam","Oleg","Omer","Otieno","Pablo","Patrick","Paul","Pavel","Pawel","Pedro","Peng","Peter","Petrus","Philip","Pieter","Ping","Piotr","Prasit","Prasoet","Pricha","Pushpa","Qiang","Qing","Radha","Rafael","Ragnar","Raj","Rajendra","Rajesh","Raju","Rakesh","Ram","Ramesh","Raphael","Rattana","Ravi","Richard","Robert","Roman","Rong","Roy","Ryan","Salisu","Saman","Samran","Samuel","Sani","Sanjay","Santosh","Sam","Sammy","Sawat","Sebastian","Sergey","Sergio","Shankar","Shay","Shigeru","Shimon","Shlomo","Shoji","Sibusiso","Simon","Sipho","Sombat","Sombun","Somchai","Somchit","Somkhit","Somkiat","Sommai","Somnuek","Somphon","Somphong","Somsak","Sri","Stefan","Stephen","Steve","Steven","Suman","Sunday","Sunil","Sunthon","Suresh","Sushila","Suwit","Sveinn","Tadashi","Takashi","Takeshi","Tal","Tebogo","Thabo","Thawi","Themba","Thomas","Thulani","Tomasz","Toshio","Udom","Umar","Uriy","Usman","Uwe","Victor","Vijay","Viktor","Vincent","Vinod","Vladimir","Walter","Wanchai","Waraphon","Wei","Werner","Wichai","Wichian","Willem","William","Winai","Wirat","Wirot","Wojciech","Wolfgang","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Xolani","Yaakv","Yahaya","Yakubu","Yan","Yasuo","Yhudah","Ying","Yisrael","Yong","Yosef","Yoshie","Yoshimi","Yoshio","Yu","Yue","Yukio","Yun","Yuriy","Yusuf","Yuval","Zbigniew","Zhen","Zhiqiang"],female:["Agata","Agnieszka","Aisha","Akira","Aleksandra","Alina","Alyona","Amina","Amnuai","Ana","Ana-Maria","Anah","Anan","Anastasiya","Andrea","Angela","Anita","Ann","Anna","Anong","Antonia","Asha","Barbara","Beata","Berglind","Bin","Birgit","Birna","Blessing","Brigitte","Bunmi","Busisiwe","Carmen","Carol","Caroline","Catherine","Chan","Chanah","Chao","Charoen","Chayah","Chen","Cheng","Christa","Christine","Claire","Claudia","Cristina","Darya","Dolores","Dorota","Edda","Ekaterina","Elena","Elisabeth","Elizabeth","Elke","Emiko","Emma","Erika","Erla","Erna","Ester","Esther","Eunice","Eva","Eugenia","Ewa","Faith","Fatima","Fiona","Fran","Francisca","Fumiko","Galina","Gabra","Gisela","Gita","Grace","Hadiza","Haiyan","Hanna","Haruna","Hauwa","Heike","Helen","Helga","Hildur","Hiroko","Hiromi","Hisako","Hong","Hui","Hulda","Inga","Ingrid","Irina","Isa","Isabel","Isah","Iwona","Jackline","Jan","Jane","Janet","Jean","Jennifer","Jianhua","Jianping","Jin","Joan","Joanna","Johanna","Josefa","Joy","Joyce","Juan","Julie","Justyna","Kai","Kanchana","Karen","Karin","Karolina","Kasia","Katarzyna","Katsumi","Keiko","Kiran","Kiyoko","Kristina","Kseniya","Kun","Lakshmi","Lalita","Lan","Latda","Laura","Laxmi","Leah","Lei","Li","Lihua","Lijun","Lilian","Lilja","Lin","Linda","Lindiwe","Ling","Liping","Lisa","Lucia","Lucy","Lyubov","Lyudmila","Magda","Magdalena","Mali","Manju","Margaret","Maria","Maria-Isabel","Maria-Jose","Maria-Pilar","Marina","Mariya","Marta","Martha","Mary","Maryam","Masako","Masami","Mei","Mercy","Michal","Michiko","Mieko","Min","Mina","Ming","Miriam","Miyoko","Mo","Monika","Mpho","Na","Nadezhda","Nan","Nancy","Natalya","Ngozi","Nicola","Ning","Nittaya","Noam","Nobuko","Nokuthula","Nonhlanhla","Noriko","Nushi","Olga","Omer","Patricia","Paula","Paulina","Peng","Petra","Phonthip","Pilar","Ping","Prani","Purity","Pushpa","Qing","Rachel","Radha","Rattana","Rebecca","Reiko","Rekha","Renate","Rita","Rong","Rosa","Rose","Rut","Ruth","Ryoko","Sabine","Sachiko","Samran","Santosh","Sara","Sarah","Sam","Sammy","Sawat","Shanti","Sharon","Shay","Shizuko","Shoshanah","Sibongile","Sita","Sombat","Sombun","Somchit","Somkhit","Sommai","Somnuek","Somphon","Somphong","Sri","Steinunn","Sukanya","Suman","Sunday","Sunita","Suphaphon","Susan","Susanne","Sushila","Svetlana","Takako","Tamar","Tatyana","Tal","Tebogo","Teruko","Thawi","Tomiko","Toshiko","Unnur","Urai","Urmila","Ursula","Usha","Valentina","Victoria","Wanjiru","Wanphen","Watsana","Wei","Wilai","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Yael","Yan","Yasuko","Yelena","Yhudiyt","Ying","Yoko","Yong","Yoshie","Yoshiko","Yoshimi","Yu","Yue","Yuko","Yuliya","Yun","Yuval","Zainab","Zandile","Zanele","Zhen"]}};function Xle(e){var t,o;const s=(t=e==null?void 0:e.withAccents)!=null&&t,c=(o=e==null?void 0:e.gender)!=null?o:qle(["male","female"]),u=e==null?void 0:e.locale;return q8(s?u?u==null?void 0:u.withAccents[c]:G4.withAccents[c]:u?u==null?void 0:u.withoutAccents[c]:G4.withoutAccents[c],e)}var Jle={china:["Peking roasted duck","Kung pao chicken","Sweet and sour pork","Hot pot","Dim sum","Dumplings","Ma po tofu","Char siu","Chicken chow mein","Beef chow mein","vegetable chow mein","Chicken fried rice","Beef fried rice","Vegetable fried Rice","Special fried Rice","Sichuan pork","Xiaolongbao","Zhajiangmian","Wonton soup","Sweet and sour pork","Duck spring Rolls","Vegetable spring Rolls","Wonton","Peking duck","Lamb hot pot","Spicy crayfish","Guilin rice noodles","Lanzhou hand-pulled noodles","Steamed crab","Shredded pork with garlic sauce","Red braised pork","Sweet and sour Ribs","Xinjiang","Braised pork with vermicelli"],italy:["Butternut squash risotto","Mushroom risotto","Beetroot risotto","Courgette risotto","Pizza","Gnocchi","Spaghetti bolognese","Spaghetti carbonara","Pesto alla Genovese","Beef lasagne","Vegetable lasagne","Gelato","Prosciutto di Parma","Ribollita","Bagna cauda","Polenta","Tortelli and ravioli","Focaccia","Garlic bread","Arancini","Il tartufo","Panzerotto fritto","Fiorentina","Minestrone","Frico","Arrosticini","Olive ascolante","Fritto misto piemontes","Tiramisù"],india:["Biryani","Dosa","Tandoori chicken","Samosas","Chaat","Plain naan","Garlic naan","Pilau rice","Steamed rice","Chicken madras","Vegetable madras","Chicken vindaloo","Chicken jalfrezi","Chicken roghan josh","Lamb roghan josh","Beef roghan josh","Butter chicken","Dosa","Gulab jamun","Chicken korma","Mutter paneer","Papadum","Paratha","Raita","Saag paneer","Tandoori chicken","Chicken tikka masala","Pakora","Dal","Chapati","Pasanda","Aloo gobi","Kofta","Chicken makhani","Paneer naan","Chana Aloo Curry"],mexico:["Chilaquiles","Pozole","Tacos al pastor","Tostadas","Chiles en nogada","Elote","Enchiladas","Mole","Guacamole","Tamales","Huevos rancheros","Machaca","Discada","Beef Burrito","Chicken Burrito","Pozole de pollo o duajolote","Menudo","Cochinita pibil","Tamale","Quesadilla","Frijoles puercos","Chile en nogada","Esquites","Alegria de amaranto","Pipián","Aguachile","Ceviche","Pescado zarandeado","Camarones a la diabla","Birria de chivo","Tlayuda","Guacamole con chapulines","Flautas","Torta Ahogada","Carnitas","Caldo Azteca","Gorditas de Nata"],japan:["Sushi","Udon","Tofu","Tempura","Yakitori","Sashimi","Ramen","Donburi","Natto","Oden","Tamagoyaki","Soba","Tonkatsu","Kashipan","Sukiyaki","Miso soup","Okonomiyaki","Mentaiko","Nikujaga","Unagi no kabayaki","Shabu Shabu","Onigiri","Gyoza","Takoyaki","aiseki ryori","Edamame","Yakisoba","Chawanmushi","Wagashi"],france:["Foie gras","Huîtres","Cassoulet","Poulet basquaise","Escargots au beurre persillé","Mouclade charentaise","Galettes bretonnes","Flemish carbonnade","Quiche lorraine","Raclette","Cheese fondue","Beef fondue","Gratin dauphinois","Tartiflette","Bouillabaisse","Ratatouille","Boeuf bourguignon","Blanquette de veau","Pot-au-feu","Coq-au-vin","Hachis parmentier","Steak tartare","Choucroute","Soufflé au fromage","Cuisses de grenouilles","Soupe à l’oignon","Baguette","Croissant","French cheeses","Fondant au chocolat","Tarte tatin","Macarons","Crème brûlée","Île flottante","Profiteroles","Pain au chocolat"],lebanon:["Kibbeh","Kafta","Kanafeh","Hummus","Rice pilaf","Fattoush","Manakish","Tabbouleh","Sfeeha","Fattoush","Labneh","Muhammara","Lahm bi ajin","Kaak","Chanklich","Mssabaha","Shawarma","Kebbe","Falafel","Halewit el jeben","Namoura","Maamoul","Foul mdammas","Balila","Kawarma","Fattouch"],thailand:["Pad kra pao moo","Tom kha gai","Khao Pad","Chicken pad Thai","Vegetable pad Thai","Moo satay","Tom yum goong","Khao niew mamuang","Kai yad sai","Khao soi","Pad see ew","Laab moo","Gaeng panang","Gai pad med ma muang","Som tam","Poh pia tod","Gaeng massaman","Pla kapung nueng manao","Tod mun pla","Gaeng ped","Gaeng garee","Gaeng keow wan","Moo ping","Durian","Sai ooah","Hoy tod","Kuay teow reua","Mu kratha","Kao ka moo","Yam nua"],greece:["Moussaka","Papoutsakia","Pastitsio","Souvlaki","Soutzoukakia","Stifado","Tomatokeftedes","Tzatziki","Kolokithokeftedes","Giouvetsi","Choriatiki","Kleftiko","Gemista","Fasolada","Bougatsa","Tiropita","Spanakopita","Feta Cheese with Honey","Horta","Tirokroketes","Briam","Saganaki","Gigantes","Dolmades","Fasolatha","Koulouri","Loukoumades","Gyros","Galaktoboureko","Baklava"],turkey:["Şiş kebap","Döner","Köfte","Pide","Kumpir","Meze","Mantı","Lahmacun","Menemen","Şiş kebap","İskender kebab","Corba","Kuzu tandir","Çiğ Köfte","Pilav","Yaprak sarma","Dolma","İmam bayıldı","Borek","Durum","Kumpir","Balik ekmek","Simit","Kunefe","Baklava","Lokum","Halva","Mozzaik pasta","Güllaç","Mercimek Köftesi","Haydari","Tursu suyu","Kahvalti","Kazan dibi","Hunkar begendi","Islak burgers","Salep","Yogurtlu kebab"],spain:["Tortilla de patatas","Fabada asturiana","Calçots","Boquerones al vinagre","Empanada gallega","Paella","Gazpacho","Gachas","Migas","Bocadillo de calamares","Pulpo a feira","Caldo gallego","Lentejas con chorizo","Cocido madrileño","Cachopo","Caracoles"],venezuela:["Pabellón criollo","Arepa","Mondongo","Empanadas","Quesillo","Chicha andina","Tequeños","Cachapa","Hallaca","Perico","Pasticho","Mandocas","Caraotas negras","Patacones","Dulce de leche","Pan de Jamón"],chile:["Humitas","Empanadas","Porotos con riendas","Completos","Manjar","Cordero al palo","Pastel de choclo","Mote con huesillos","Sopaipillas","Curanto"],argentina:["Milanesas","Empanadas","Pizza fugazeta","Asado","Choripan","Bondiola","Bife de chorizo"],colombia:["Bandeja paisa","Chuleta valluna","Sancocho trifásico","Empanada valluna","Salpicon de frutas","Pastel de garbanzo","Ajiaco","Arepas","Arroz de lisa","Sancocho","Pan de bono","Cuchuco","Oblea","Cazuela de mariscos","Pan de yuca","Bollo Limpio","Almojábana","Empanadas","Arroz con Coco","Sopa de mondongo","Cazuela de Mariscos","Arroz con Pollo","Arepa de Huevo","Mote de Queso"],ecuador:["Encebollado","Ceviche","Tigrillo","Bolon de verde","Llapingacho","Mote pillo","Locro de papa","Churrasco"],peru:["Ceviche","Arroz con pollo","Aji de gallina","Llunca de gallina"],"el salvador":["Pupusa","Sopa de patas","Rigua","Flor de izote con huevo","Gallo en chicha"],romania:["Sarmale","Mici","Pomana porcului","Ciorbă de fasole cu ciolan","Ciorbă de burtă","Ciorbă rădăuțeană","Plăcintă cu brânză","Ciorbă de potroace","Mămăligă cu brânză și smântână","Tochitură","Piftie","Iahnie de fasole","Slănină afumată","Cârnați afumați","Varză a la Cluj","Gulaș de cartofi cu afumătură","Cozonac de casă","Ciorbă ardelenească de porc","Mucenici moldovenești","Salată de boeuf","Dovleac copt","Papanași cu brânză de vacă și afine","Drob de miel","Pârjoale moldovenești","Zacuscă de vinete","Zacuscă de fasole","Turtă dulce","Clătitele cu gem","Clătitele cu brânza de vacă","Balmoș","Cozonac","Chiftele"]},z4;(z4=Object.keys(Jle))==null||z4.length;var K4,Qle={olympic:["Archery","Artistic Gymnastics","Artistic Swimming","Athletics","Badminton","Baseball Softball","Basketball","Beach Volleyball","BMX Freestyle","BMX Racing","Boxing","Kayak Flatwater","Kayak Slalom","Diving","Equestrian","Fencing","Football","Golf","Handball","Hockey","Judo","Karate","Marathon Swimming","Modern Pentathlon","Mountain Bike","Rhythmic Gymnastics","Road Cycling","Rowing","Rugby","Sailing","Shooting","Skateboarding","Sport Climbing","Surfing","Swimming","Table Tennis","Taekwondo","Tennis","Track Cycling","Trampoline","Triathlon","Volleyball","Water Polo","Weightlifting","Wrestling"],winterOlympic:["Alpine Skiing","Biathlon","Bobsleigh","Cross-Country Skiing","Curling","Figure Skating","Freestyle Skiing","Ice Hockey","Luge","Nordic Combined","Short Track Speed Skating","Skeleton","Ski Jumping","Snowboard","Speed Skating"],outdoor:["Archery","Athletics","Badminton","Baseball","Basketball","Bowling","Boxing","Camping","Canoeing","Climbing","Cricket","Curling","Cycling","Equestrian","Fencing","Football","Golf","Gymnastics","Handball","Hang Gliding","High Jumping","Hockey","Ice Hockey","Judo","Karate","Kite Flying","Monkey Bars","Motorsports","Netball","Rowing","Rugby","Running","Sailing","Skateboarding","Slide","Snow Skiing","Soccer","Street Hockey","Surfing","Swimming","Table Tennis","Tennis","Trekking","Triathlon","Volleyball","Weightlifting","Wrestling"]};(K4=Object.keys(Qle))==null||K4.length;var X8={exports:{}};function Zle(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var IT={exports:{}};const eue={},tue=Object.freeze(Object.defineProperty({__proto__:null,default:eue},Symbol.toStringTag,{value:"Module"})),nue=bq(tue);var Y4;function _n(){return Y4||(Y4=1,function(e,t){(function(o,s){e.exports=s()})(At,function(){var o=o||function(s,c){var u;if(typeof window<"u"&&window.crypto&&(u=window.crypto),typeof self<"u"&&self.crypto&&(u=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(u=globalThis.crypto),!u&&typeof window<"u"&&window.msCrypto&&(u=window.msCrypto),!u&&typeof At<"u"&&At.crypto&&(u=At.crypto),!u&&typeof Zle=="function")try{u=nue}catch{}var h=function(){if(u){if(typeof u.getRandomValues=="function")try{return u.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof u.randomBytes=="function")try{return u.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},f=Object.create||function(){function N(){}return function(D){var U;return N.prototype=D,U=new N,N.prototype=null,U}}(),m={},v=m.lib={},_=v.Base=function(){return{extend:function(N){var D=f(this);return N&&D.mixIn(N),(!D.hasOwnProperty("init")||this.init===D.init)&&(D.init=function(){D.$super.init.apply(this,arguments)}),D.init.prototype=D,D.$super=this,D},create:function(){var N=this.extend();return N.init.apply(N,arguments),N},init:function(){},mixIn:function(N){for(var D in N)N.hasOwnProperty(D)&&(this[D]=N[D]);N.hasOwnProperty("toString")&&(this.toString=N.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),y=v.WordArray=_.extend({init:function(N,D){N=this.words=N||[],D!=c?this.sigBytes=D:this.sigBytes=N.length*4},toString:function(N){return(N||A).stringify(this)},concat:function(N){var D=this.words,U=N.words,V=this.sigBytes,j=N.sigBytes;if(this.clamp(),V%4)for(var B=0;B<j;B++){var Y=U[B>>>2]>>>24-B%4*8&255;D[V+B>>>2]|=Y<<24-(V+B)%4*8}else for(var ee=0;ee<j;ee+=4)D[V+ee>>>2]=U[ee>>>2];return this.sigBytes+=j,this},clamp:function(){var N=this.words,D=this.sigBytes;N[D>>>2]&=4294967295<<32-D%4*8,N.length=s.ceil(D/4)},clone:function(){var N=_.clone.call(this);return N.words=this.words.slice(0),N},random:function(N){for(var D=[],U=0;U<N;U+=4)D.push(h());return new y.init(D,N)}}),T=m.enc={},A=T.Hex={stringify:function(N){for(var D=N.words,U=N.sigBytes,V=[],j=0;j<U;j++){var B=D[j>>>2]>>>24-j%4*8&255;V.push((B>>>4).toString(16)),V.push((B&15).toString(16))}return V.join("")},parse:function(N){for(var D=N.length,U=[],V=0;V<D;V+=2)U[V>>>3]|=parseInt(N.substr(V,2),16)<<24-V%8*4;return new y.init(U,D/2)}},I=T.Latin1={stringify:function(N){for(var D=N.words,U=N.sigBytes,V=[],j=0;j<U;j++){var B=D[j>>>2]>>>24-j%4*8&255;V.push(String.fromCharCode(B))}return V.join("")},parse:function(N){for(var D=N.length,U=[],V=0;V<D;V++)U[V>>>2]|=(N.charCodeAt(V)&255)<<24-V%4*8;return new y.init(U,D)}},O=T.Utf8={stringify:function(N){try{return decodeURIComponent(escape(I.stringify(N)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(N){return I.parse(unescape(encodeURIComponent(N)))}},L=v.BufferedBlockAlgorithm=_.extend({reset:function(){this._data=new y.init,this._nDataBytes=0},_append:function(N){typeof N=="string"&&(N=O.parse(N)),this._data.concat(N),this._nDataBytes+=N.sigBytes},_process:function(N){var D,U=this._data,V=U.words,j=U.sigBytes,B=this.blockSize,Y=B*4,ee=j/Y;N?ee=s.ceil(ee):ee=s.max((ee|0)-this._minBufferSize,0);var H=ee*B,Z=s.min(H*4,j);if(H){for(var J=0;J<H;J+=B)this._doProcessBlock(V,J);D=V.splice(0,H),U.sigBytes-=Z}return new y.init(D,Z)},clone:function(){var N=_.clone.call(this);return N._data=this._data.clone(),N},_minBufferSize:0});v.Hasher=L.extend({cfg:_.extend(),init:function(N){this.cfg=this.cfg.extend(N),this.reset()},reset:function(){L.reset.call(this),this._doReset()},update:function(N){return this._append(N),this._process(),this},finalize:function(N){N&&this._append(N);var D=this._doFinalize();return D},blockSize:16,_createHelper:function(N){return function(D,U){return new N.init(U).finalize(D)}},_createHmacHelper:function(N){return function(D,U){return new x.HMAC.init(N,U).finalize(D)}}});var x=m.algo={};return m}(Math);return o})}(IT)),IT.exports}var wT={exports:{}},q4;function n_(){return q4||(q4=1,function(e,t){(function(o,s){e.exports=s(_n())})(At,function(o){return function(s){var c=o,u=c.lib,h=u.Base,f=u.WordArray,m=c.x64={};m.Word=h.extend({init:function(v,_){this.high=v,this.low=_}}),m.WordArray=h.extend({init:function(v,_){v=this.words=v||[],_!=s?this.sigBytes=_:this.sigBytes=v.length*8},toX32:function(){for(var v=this.words,_=v.length,y=[],T=0;T<_;T++){var A=v[T];y.push(A.high),y.push(A.low)}return f.create(y,this.sigBytes)},clone:function(){for(var v=h.clone.call(this),_=v.words=this.words.slice(0),y=_.length,T=0;T<y;T++)_[T]=_[T].clone();return v}})}(),o})}(wT)),wT.exports}var OT={exports:{}},X4;function rue(){return X4||(X4=1,function(e,t){(function(o,s){e.exports=s(_n())})(At,function(o){return function(){if(typeof ArrayBuffer=="function"){var s=o,c=s.lib,u=c.WordArray,h=u.init,f=u.init=function(m){if(m instanceof ArrayBuffer&&(m=new Uint8Array(m)),(m instanceof Int8Array||typeof Uint8ClampedArray<"u"&&m instanceof Uint8ClampedArray||m instanceof Int16Array||m instanceof Uint16Array||m instanceof Int32Array||m instanceof Uint32Array||m instanceof Float32Array||m instanceof Float64Array)&&(m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength)),m instanceof Uint8Array){for(var v=m.byteLength,_=[],y=0;y<v;y++)_[y>>>2]|=m[y]<<24-y%4*8;h.call(this,_,v)}else h.apply(this,arguments)};f.prototype=u}}(),o.lib.WordArray})}(OT)),OT.exports}var AT={exports:{}},J4;function iue(){return J4||(J4=1,function(e,t){(function(o,s){e.exports=s(_n())})(At,function(o){return function(){var s=o,c=s.lib,u=c.WordArray,h=s.enc;h.Utf16=h.Utf16BE={stringify:function(m){for(var v=m.words,_=m.sigBytes,y=[],T=0;T<_;T+=2){var A=v[T>>>2]>>>16-T%4*8&65535;y.push(String.fromCharCode(A))}return y.join("")},parse:function(m){for(var v=m.length,_=[],y=0;y<v;y++)_[y>>>1]|=m.charCodeAt(y)<<16-y%2*16;return u.create(_,v*2)}},h.Utf16LE={stringify:function(m){for(var v=m.words,_=m.sigBytes,y=[],T=0;T<_;T+=2){var A=f(v[T>>>2]>>>16-T%4*8&65535);y.push(String.fromCharCode(A))}return y.join("")},parse:function(m){for(var v=m.length,_=[],y=0;y<v;y++)_[y>>>1]|=f(m.charCodeAt(y)<<16-y%2*16);return u.create(_,v*2)}};function f(m){return m<<8&4278255360|m>>>8&16711935}}(),o.enc.Utf16})}(AT)),AT.exports}var NT={exports:{}},Q4;function qh(){return Q4||(Q4=1,function(e,t){(function(o,s){e.exports=s(_n())})(At,function(o){return function(){var s=o,c=s.lib,u=c.WordArray,h=s.enc;h.Base64={stringify:function(m){var v=m.words,_=m.sigBytes,y=this._map;m.clamp();for(var T=[],A=0;A<_;A+=3)for(var I=v[A>>>2]>>>24-A%4*8&255,O=v[A+1>>>2]>>>24-(A+1)%4*8&255,L=v[A+2>>>2]>>>24-(A+2)%4*8&255,x=I<<16|O<<8|L,N=0;N<4&&A+N*.75<_;N++)T.push(y.charAt(x>>>6*(3-N)&63));var D=y.charAt(64);if(D)for(;T.length%4;)T.push(D);return T.join("")},parse:function(m){var v=m.length,_=this._map,y=this._reverseMap;if(!y){y=this._reverseMap=[];for(var T=0;T<_.length;T++)y[_.charCodeAt(T)]=T}var A=_.charAt(64);if(A){var I=m.indexOf(A);I!==-1&&(v=I)}return f(m,v,y)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function f(m,v,_){for(var y=[],T=0,A=0;A<v;A++)if(A%4){var I=_[m.charCodeAt(A-1)]<<A%4*2,O=_[m.charCodeAt(A)]>>>6-A%4*2,L=I|O;y[T>>>2]|=L<<24-T%4*8,T++}return u.create(y,T)}}(),o.enc.Base64})}(NT)),NT.exports}var xT={exports:{}},Z4;function oue(){return Z4||(Z4=1,function(e,t){(function(o,s){e.exports=s(_n())})(At,function(o){return function(){var s=o,c=s.lib,u=c.WordArray,h=s.enc;h.Base64url={stringify:function(m,v=!0){var _=m.words,y=m.sigBytes,T=v?this._safe_map:this._map;m.clamp();for(var A=[],I=0;I<y;I+=3)for(var O=_[I>>>2]>>>24-I%4*8&255,L=_[I+1>>>2]>>>24-(I+1)%4*8&255,x=_[I+2>>>2]>>>24-(I+2)%4*8&255,N=O<<16|L<<8|x,D=0;D<4&&I+D*.75<y;D++)A.push(T.charAt(N>>>6*(3-D)&63));var U=T.charAt(64);if(U)for(;A.length%4;)A.push(U);return A.join("")},parse:function(m,v=!0){var _=m.length,y=v?this._safe_map:this._map,T=this._reverseMap;if(!T){T=this._reverseMap=[];for(var A=0;A<y.length;A++)T[y.charCodeAt(A)]=A}var I=y.charAt(64);if(I){var O=m.indexOf(I);O!==-1&&(_=O)}return f(m,_,T)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function f(m,v,_){for(var y=[],T=0,A=0;A<v;A++)if(A%4){var I=_[m.charCodeAt(A-1)]<<A%4*2,O=_[m.charCodeAt(A)]>>>6-A%4*2,L=I|O;y[T>>>2]|=L<<24-T%4*8,T++}return u.create(y,T)}}(),o.enc.Base64url})}(xT)),xT.exports}var PT={exports:{}},eF;function Xh(){return eF||(eF=1,function(e,t){(function(o,s){e.exports=s(_n())})(At,function(o){return function(s){var c=o,u=c.lib,h=u.WordArray,f=u.Hasher,m=c.algo,v=[];(function(){for(var O=0;O<64;O++)v[O]=s.abs(s.sin(O+1))*4294967296|0})();var _=m.MD5=f.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(O,L){for(var x=0;x<16;x++){var N=L+x,D=O[N];O[N]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}var U=this._hash.words,V=O[L+0],j=O[L+1],B=O[L+2],Y=O[L+3],ee=O[L+4],H=O[L+5],Z=O[L+6],J=O[L+7],X=O[L+8],ne=O[L+9],ie=O[L+10],ae=O[L+11],pe=O[L+12],ue=O[L+13],Se=O[L+14],Ee=O[L+15],le=U[0],se=U[1],de=U[2],he=U[3];le=y(le,se,de,he,V,7,v[0]),he=y(he,le,se,de,j,12,v[1]),de=y(de,he,le,se,B,17,v[2]),se=y(se,de,he,le,Y,22,v[3]),le=y(le,se,de,he,ee,7,v[4]),he=y(he,le,se,de,H,12,v[5]),de=y(de,he,le,se,Z,17,v[6]),se=y(se,de,he,le,J,22,v[7]),le=y(le,se,de,he,X,7,v[8]),he=y(he,le,se,de,ne,12,v[9]),de=y(de,he,le,se,ie,17,v[10]),se=y(se,de,he,le,ae,22,v[11]),le=y(le,se,de,he,pe,7,v[12]),he=y(he,le,se,de,ue,12,v[13]),de=y(de,he,le,se,Se,17,v[14]),se=y(se,de,he,le,Ee,22,v[15]),le=T(le,se,de,he,j,5,v[16]),he=T(he,le,se,de,Z,9,v[17]),de=T(de,he,le,se,ae,14,v[18]),se=T(se,de,he,le,V,20,v[19]),le=T(le,se,de,he,H,5,v[20]),he=T(he,le,se,de,ie,9,v[21]),de=T(de,he,le,se,Ee,14,v[22]),se=T(se,de,he,le,ee,20,v[23]),le=T(le,se,de,he,ne,5,v[24]),he=T(he,le,se,de,Se,9,v[25]),de=T(de,he,le,se,Y,14,v[26]),se=T(se,de,he,le,X,20,v[27]),le=T(le,se,de,he,ue,5,v[28]),he=T(he,le,se,de,B,9,v[29]),de=T(de,he,le,se,J,14,v[30]),se=T(se,de,he,le,pe,20,v[31]),le=A(le,se,de,he,H,4,v[32]),he=A(he,le,se,de,X,11,v[33]),de=A(de,he,le,se,ae,16,v[34]),se=A(se,de,he,le,Se,23,v[35]),le=A(le,se,de,he,j,4,v[36]),he=A(he,le,se,de,ee,11,v[37]),de=A(de,he,le,se,J,16,v[38]),se=A(se,de,he,le,ie,23,v[39]),le=A(le,se,de,he,ue,4,v[40]),he=A(he,le,se,de,V,11,v[41]),de=A(de,he,le,se,Y,16,v[42]),se=A(se,de,he,le,Z,23,v[43]),le=A(le,se,de,he,ne,4,v[44]),he=A(he,le,se,de,pe,11,v[45]),de=A(de,he,le,se,Ee,16,v[46]),se=A(se,de,he,le,B,23,v[47]),le=I(le,se,de,he,V,6,v[48]),he=I(he,le,se,de,J,10,v[49]),de=I(de,he,le,se,Se,15,v[50]),se=I(se,de,he,le,H,21,v[51]),le=I(le,se,de,he,pe,6,v[52]),he=I(he,le,se,de,Y,10,v[53]),de=I(de,he,le,se,ie,15,v[54]),se=I(se,de,he,le,j,21,v[55]),le=I(le,se,de,he,X,6,v[56]),he=I(he,le,se,de,Ee,10,v[57]),de=I(de,he,le,se,Z,15,v[58]),se=I(se,de,he,le,ue,21,v[59]),le=I(le,se,de,he,ee,6,v[60]),he=I(he,le,se,de,ae,10,v[61]),de=I(de,he,le,se,B,15,v[62]),se=I(se,de,he,le,ne,21,v[63]),U[0]=U[0]+le|0,U[1]=U[1]+se|0,U[2]=U[2]+de|0,U[3]=U[3]+he|0},_doFinalize:function(){var O=this._data,L=O.words,x=this._nDataBytes*8,N=O.sigBytes*8;L[N>>>5]|=128<<24-N%32;var D=s.floor(x/4294967296),U=x;L[(N+64>>>9<<4)+15]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,L[(N+64>>>9<<4)+14]=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360,O.sigBytes=(L.length+1)*4,this._process();for(var V=this._hash,j=V.words,B=0;B<4;B++){var Y=j[B];j[B]=(Y<<8|Y>>>24)&16711935|(Y<<24|Y>>>8)&4278255360}return V},clone:function(){var O=f.clone.call(this);return O._hash=this._hash.clone(),O}});function y(O,L,x,N,D,U,V){var j=O+(L&x|~L&N)+D+V;return(j<<U|j>>>32-U)+L}function T(O,L,x,N,D,U,V){var j=O+(L&N|x&~N)+D+V;return(j<<U|j>>>32-U)+L}function A(O,L,x,N,D,U,V){var j=O+(L^x^N)+D+V;return(j<<U|j>>>32-U)+L}function I(O,L,x,N,D,U,V){var j=O+(x^(L|~N))+D+V;return(j<<U|j>>>32-U)+L}c.MD5=f._createHelper(_),c.HmacMD5=f._createHmacHelper(_)}(Math),o.MD5})}(PT)),PT.exports}var DT={exports:{}},tF;function o1(){return tF||(tF=1,function(e,t){(function(o,s){e.exports=s(_n())})(At,function(o){return function(){var s=o,c=s.lib,u=c.WordArray,h=c.Hasher,f=s.algo,m=[],v=f.SHA1=h.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(_,y){for(var T=this._hash.words,A=T[0],I=T[1],O=T[2],L=T[3],x=T[4],N=0;N<80;N++){if(N<16)m[N]=_[y+N]|0;else{var D=m[N-3]^m[N-8]^m[N-14]^m[N-16];m[N]=D<<1|D>>>31}var U=(A<<5|A>>>27)+x+m[N];N<20?U+=(I&O|~I&L)+1518500249:N<40?U+=(I^O^L)+1859775393:N<60?U+=(I&O|I&L|O&L)-1894007588:U+=(I^O^L)-899497514,x=L,L=O,O=I<<30|I>>>2,I=A,A=U}T[0]=T[0]+A|0,T[1]=T[1]+I|0,T[2]=T[2]+O|0,T[3]=T[3]+L|0,T[4]=T[4]+x|0},_doFinalize:function(){var _=this._data,y=_.words,T=this._nDataBytes*8,A=_.sigBytes*8;return y[A>>>5]|=128<<24-A%32,y[(A+64>>>9<<4)+14]=Math.floor(T/4294967296),y[(A+64>>>9<<4)+15]=T,_.sigBytes=y.length*4,this._process(),this._hash},clone:function(){var _=h.clone.call(this);return _._hash=this._hash.clone(),_}});s.SHA1=h._createHelper(v),s.HmacSHA1=h._createHmacHelper(v)}(),o.SHA1})}(DT)),DT.exports}var kT={exports:{}},nF;function J8(){return nF||(nF=1,function(e,t){(function(o,s){e.exports=s(_n())})(At,function(o){return function(s){var c=o,u=c.lib,h=u.WordArray,f=u.Hasher,m=c.algo,v=[],_=[];(function(){function A(x){for(var N=s.sqrt(x),D=2;D<=N;D++)if(!(x%D))return!1;return!0}function I(x){return(x-(x|0))*4294967296|0}for(var O=2,L=0;L<64;)A(O)&&(L<8&&(v[L]=I(s.pow(O,1/2))),_[L]=I(s.pow(O,1/3)),L++),O++})();var y=[],T=m.SHA256=f.extend({_doReset:function(){this._hash=new h.init(v.slice(0))},_doProcessBlock:function(A,I){for(var O=this._hash.words,L=O[0],x=O[1],N=O[2],D=O[3],U=O[4],V=O[5],j=O[6],B=O[7],Y=0;Y<64;Y++){if(Y<16)y[Y]=A[I+Y]|0;else{var ee=y[Y-15],H=(ee<<25|ee>>>7)^(ee<<14|ee>>>18)^ee>>>3,Z=y[Y-2],J=(Z<<15|Z>>>17)^(Z<<13|Z>>>19)^Z>>>10;y[Y]=H+y[Y-7]+J+y[Y-16]}var X=U&V^~U&j,ne=L&x^L&N^x&N,ie=(L<<30|L>>>2)^(L<<19|L>>>13)^(L<<10|L>>>22),ae=(U<<26|U>>>6)^(U<<21|U>>>11)^(U<<7|U>>>25),pe=B+ae+X+_[Y]+y[Y],ue=ie+ne;B=j,j=V,V=U,U=D+pe|0,D=N,N=x,x=L,L=pe+ue|0}O[0]=O[0]+L|0,O[1]=O[1]+x|0,O[2]=O[2]+N|0,O[3]=O[3]+D|0,O[4]=O[4]+U|0,O[5]=O[5]+V|0,O[6]=O[6]+j|0,O[7]=O[7]+B|0},_doFinalize:function(){var A=this._data,I=A.words,O=this._nDataBytes*8,L=A.sigBytes*8;return I[L>>>5]|=128<<24-L%32,I[(L+64>>>9<<4)+14]=s.floor(O/4294967296),I[(L+64>>>9<<4)+15]=O,A.sigBytes=I.length*4,this._process(),this._hash},clone:function(){var A=f.clone.call(this);return A._hash=this._hash.clone(),A}});c.SHA256=f._createHelper(T),c.HmacSHA256=f._createHmacHelper(T)}(Math),o.SHA256})}(kT)),kT.exports}var LT={exports:{}},rF;function aue(){return rF||(rF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),J8())})(At,function(o){return function(){var s=o,c=s.lib,u=c.WordArray,h=s.algo,f=h.SHA256,m=h.SHA224=f.extend({_doReset:function(){this._hash=new u.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var v=f._doFinalize.call(this);return v.sigBytes-=4,v}});s.SHA224=f._createHelper(m),s.HmacSHA224=f._createHmacHelper(m)}(),o.SHA224})}(LT)),LT.exports}var MT={exports:{}},iF;function Q8(){return iF||(iF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),n_())})(At,function(o){return function(){var s=o,c=s.lib,u=c.Hasher,h=s.x64,f=h.Word,m=h.WordArray,v=s.algo;function _(){return f.create.apply(f,arguments)}var y=[_(1116352408,3609767458),_(1899447441,602891725),_(3049323471,3964484399),_(3921009573,2173295548),_(961987163,4081628472),_(1508970993,3053834265),_(2453635748,2937671579),_(2870763221,3664609560),_(3624381080,2734883394),_(310598401,1164996542),_(607225278,1323610764),_(1426881987,3590304994),_(1925078388,4068182383),_(2162078206,991336113),_(2614888103,633803317),_(3248222580,3479774868),_(3835390401,2666613458),_(4022224774,944711139),_(264347078,2341262773),_(604807628,2007800933),_(770255983,1495990901),_(1249150122,1856431235),_(1555081692,3175218132),_(1996064986,2198950837),_(2554220882,3999719339),_(2821834349,766784016),_(2952996808,2566594879),_(3210313671,3203337956),_(3336571891,1034457026),_(3584528711,2466948901),_(113926993,3758326383),_(338241895,168717936),_(666307205,1188179964),_(773529912,1546045734),_(1294757372,1522805485),_(1396182291,2643833823),_(1695183700,2343527390),_(1986661051,1014477480),_(2177026350,1206759142),_(2456956037,344077627),_(2730485921,1290863460),_(2820302411,3158454273),_(3259730800,3505952657),_(3345764771,106217008),_(3516065817,3606008344),_(3600352804,1432725776),_(4094571909,1467031594),_(275423344,851169720),_(430227734,3100823752),_(506948616,1363258195),_(659060556,3750685593),_(883997877,3785050280),_(958139571,3318307427),_(1322822218,3812723403),_(1537002063,2003034995),_(1747873779,3602036899),_(1955562222,1575990012),_(2024104815,1125592928),_(2227730452,2716904306),_(2361852424,442776044),_(2428436474,593698344),_(2756734187,3733110249),_(3204031479,2999351573),_(3329325298,3815920427),_(3391569614,3928383900),_(3515267271,566280711),_(3940187606,3454069534),_(4118630271,4000239992),_(116418474,1914138554),_(174292421,2731055270),_(289380356,3203993006),_(460393269,320620315),_(685471733,587496836),_(852142971,1086792851),_(1017036298,365543100),_(1126000580,2618297676),_(1288033470,3409855158),_(1501505948,4234509866),_(1607167915,987167468),_(1816402316,1246189591)],T=[];(function(){for(var I=0;I<80;I++)T[I]=_()})();var A=v.SHA512=u.extend({_doReset:function(){this._hash=new m.init([new f.init(1779033703,4089235720),new f.init(3144134277,2227873595),new f.init(1013904242,4271175723),new f.init(2773480762,1595750129),new f.init(1359893119,2917565137),new f.init(2600822924,725511199),new f.init(528734635,4215389547),new f.init(1541459225,327033209)])},_doProcessBlock:function(I,O){for(var L=this._hash.words,x=L[0],N=L[1],D=L[2],U=L[3],V=L[4],j=L[5],B=L[6],Y=L[7],ee=x.high,H=x.low,Z=N.high,J=N.low,X=D.high,ne=D.low,ie=U.high,ae=U.low,pe=V.high,ue=V.low,Se=j.high,Ee=j.low,le=B.high,se=B.low,de=Y.high,he=Y.low,xe=ee,Me=H,it=Z,Be=J,Tt=X,It=ne,lt=ie,Mt=ae,ht=pe,ze=ue,Ut=Se,Ft=Ee,Vt=le,qe=se,Ke=de,Ge=he,rt=0;rt<80;rt++){var pt,Nt,yt=T[rt];if(rt<16)Nt=yt.high=I[O+rt*2]|0,pt=yt.low=I[O+rt*2+1]|0;else{var xt=T[rt-15],Yt=xt.high,Nn=xt.low,vi=(Yt>>>1|Nn<<31)^(Yt>>>8|Nn<<24)^Yt>>>7,ur=(Nn>>>1|Yt<<31)^(Nn>>>8|Yt<<24)^(Nn>>>7|Yt<<25),Wn=T[rt-2],mn=Wn.high,Or=Wn.low,Cn=(mn>>>19|Or<<13)^(mn<<3|Or>>>29)^mn>>>6,Xt=(Or>>>19|mn<<13)^(Or<<3|mn>>>29)^(Or>>>6|mn<<26),Jt=T[rt-7],To=Jt.high,Gi=Jt.low,yr=T[rt-16],gn=yr.high,Ue=yr.low;pt=ur+Gi,Nt=vi+To+(pt>>>0<ur>>>0?1:0),pt=pt+Xt,Nt=Nt+Cn+(pt>>>0<Xt>>>0?1:0),pt=pt+Ue,Nt=Nt+gn+(pt>>>0<Ue>>>0?1:0),yt.high=Nt,yt.low=pt}var tt=ht&Ut^~ht&Vt,vn=ze&Ft^~ze&qe,kt=xe&it^xe&Tt^it&Tt,Ei=Me&Be^Me&It^Be&It,Ar=(xe>>>28|Me<<4)^(xe<<30|Me>>>2)^(xe<<25|Me>>>7),qn=(Me>>>28|xe<<4)^(Me<<30|xe>>>2)^(Me<<25|xe>>>7),mt=(ht>>>14|ze<<18)^(ht>>>18|ze<<14)^(ht<<23|ze>>>9),Qt=(ze>>>14|ht<<18)^(ze>>>18|ht<<14)^(ze<<23|ht>>>9),an=y[rt],vr=an.high,si=an.low,Cr=Ge+Qt,Nr=Ke+mt+(Cr>>>0<Ge>>>0?1:0),Cr=Cr+vn,Nr=Nr+tt+(Cr>>>0<vn>>>0?1:0),Cr=Cr+si,Nr=Nr+vr+(Cr>>>0<si>>>0?1:0),Cr=Cr+pt,Nr=Nr+Nt+(Cr>>>0<pt>>>0?1:0),Ai=qn+Ei,zi=Ar+kt+(Ai>>>0<qn>>>0?1:0);Ke=Vt,Ge=qe,Vt=Ut,qe=Ft,Ut=ht,Ft=ze,ze=Mt+Cr|0,ht=lt+Nr+(ze>>>0<Mt>>>0?1:0)|0,lt=Tt,Mt=It,Tt=it,It=Be,it=xe,Be=Me,Me=Cr+Ai|0,xe=Nr+zi+(Me>>>0<Cr>>>0?1:0)|0}H=x.low=H+Me,x.high=ee+xe+(H>>>0<Me>>>0?1:0),J=N.low=J+Be,N.high=Z+it+(J>>>0<Be>>>0?1:0),ne=D.low=ne+It,D.high=X+Tt+(ne>>>0<It>>>0?1:0),ae=U.low=ae+Mt,U.high=ie+lt+(ae>>>0<Mt>>>0?1:0),ue=V.low=ue+ze,V.high=pe+ht+(ue>>>0<ze>>>0?1:0),Ee=j.low=Ee+Ft,j.high=Se+Ut+(Ee>>>0<Ft>>>0?1:0),se=B.low=se+qe,B.high=le+Vt+(se>>>0<qe>>>0?1:0),he=Y.low=he+Ge,Y.high=de+Ke+(he>>>0<Ge>>>0?1:0)},_doFinalize:function(){var I=this._data,O=I.words,L=this._nDataBytes*8,x=I.sigBytes*8;O[x>>>5]|=128<<24-x%32,O[(x+128>>>10<<5)+30]=Math.floor(L/4294967296),O[(x+128>>>10<<5)+31]=L,I.sigBytes=O.length*4,this._process();var N=this._hash.toX32();return N},clone:function(){var I=u.clone.call(this);return I._hash=this._hash.clone(),I},blockSize:1024/32});s.SHA512=u._createHelper(A),s.HmacSHA512=u._createHmacHelper(A)}(),o.SHA512})}(MT)),MT.exports}var UT={exports:{}},oF;function sue(){return oF||(oF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),n_(),Q8())})(At,function(o){return function(){var s=o,c=s.x64,u=c.Word,h=c.WordArray,f=s.algo,m=f.SHA512,v=f.SHA384=m.extend({_doReset:function(){this._hash=new h.init([new u.init(3418070365,3238371032),new u.init(1654270250,914150663),new u.init(2438529370,812702999),new u.init(355462360,4144912697),new u.init(1731405415,4290775857),new u.init(2394180231,1750603025),new u.init(3675008525,1694076839),new u.init(1203062813,3204075428)])},_doFinalize:function(){var _=m._doFinalize.call(this);return _.sigBytes-=16,_}});s.SHA384=m._createHelper(v),s.HmacSHA384=m._createHmacHelper(v)}(),o.SHA384})}(UT)),UT.exports}var FT={exports:{}},aF;function cue(){return aF||(aF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),n_())})(At,function(o){return function(s){var c=o,u=c.lib,h=u.WordArray,f=u.Hasher,m=c.x64,v=m.Word,_=c.algo,y=[],T=[],A=[];(function(){for(var L=1,x=0,N=0;N<24;N++){y[L+5*x]=(N+1)*(N+2)/2%64;var D=x%5,U=(2*L+3*x)%5;L=D,x=U}for(var L=0;L<5;L++)for(var x=0;x<5;x++)T[L+5*x]=x+(2*L+3*x)%5*5;for(var V=1,j=0;j<24;j++){for(var B=0,Y=0,ee=0;ee<7;ee++){if(V&1){var H=(1<<ee)-1;H<32?Y^=1<<H:B^=1<<H-32}V&128?V=V<<1^113:V<<=1}A[j]=v.create(B,Y)}})();var I=[];(function(){for(var L=0;L<25;L++)I[L]=v.create()})();var O=_.SHA3=f.extend({cfg:f.cfg.extend({outputLength:512}),_doReset:function(){for(var L=this._state=[],x=0;x<25;x++)L[x]=new v.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(L,x){for(var N=this._state,D=this.blockSize/2,U=0;U<D;U++){var V=L[x+2*U],j=L[x+2*U+1];V=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360,j=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360;var B=N[U];B.high^=j,B.low^=V}for(var Y=0;Y<24;Y++){for(var ee=0;ee<5;ee++){for(var H=0,Z=0,J=0;J<5;J++){var B=N[ee+5*J];H^=B.high,Z^=B.low}var X=I[ee];X.high=H,X.low=Z}for(var ee=0;ee<5;ee++)for(var ne=I[(ee+4)%5],ie=I[(ee+1)%5],ae=ie.high,pe=ie.low,H=ne.high^(ae<<1|pe>>>31),Z=ne.low^(pe<<1|ae>>>31),J=0;J<5;J++){var B=N[ee+5*J];B.high^=H,B.low^=Z}for(var ue=1;ue<25;ue++){var H,Z,B=N[ue],Se=B.high,Ee=B.low,le=y[ue];le<32?(H=Se<<le|Ee>>>32-le,Z=Ee<<le|Se>>>32-le):(H=Ee<<le-32|Se>>>64-le,Z=Se<<le-32|Ee>>>64-le);var se=I[T[ue]];se.high=H,se.low=Z}var de=I[0],he=N[0];de.high=he.high,de.low=he.low;for(var ee=0;ee<5;ee++)for(var J=0;J<5;J++){var ue=ee+5*J,B=N[ue],xe=I[ue],Me=I[(ee+1)%5+5*J],it=I[(ee+2)%5+5*J];B.high=xe.high^~Me.high&it.high,B.low=xe.low^~Me.low&it.low}var B=N[0],Be=A[Y];B.high^=Be.high,B.low^=Be.low}},_doFinalize:function(){var L=this._data,x=L.words;this._nDataBytes*8;var N=L.sigBytes*8,D=this.blockSize*32;x[N>>>5]|=1<<24-N%32,x[(s.ceil((N+1)/D)*D>>>5)-1]|=128,L.sigBytes=x.length*4,this._process();for(var U=this._state,V=this.cfg.outputLength/8,j=V/8,B=[],Y=0;Y<j;Y++){var ee=U[Y],H=ee.high,Z=ee.low;H=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360,Z=(Z<<8|Z>>>24)&16711935|(Z<<24|Z>>>8)&4278255360,B.push(Z),B.push(H)}return new h.init(B,V)},clone:function(){for(var L=f.clone.call(this),x=L._state=this._state.slice(0),N=0;N<25;N++)x[N]=x[N].clone();return L}});c.SHA3=f._createHelper(O),c.HmacSHA3=f._createHmacHelper(O)}(Math),o.SHA3})}(FT)),FT.exports}var VT={exports:{}},sF;function lue(){return sF||(sF=1,function(e,t){(function(o,s){e.exports=s(_n())})(At,function(o){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(s){var c=o,u=c.lib,h=u.WordArray,f=u.Hasher,m=c.algo,v=h.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),_=h.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),y=h.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),T=h.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),A=h.create([0,1518500249,1859775393,2400959708,2840853838]),I=h.create([1352829926,1548603684,1836072691,2053994217,0]),O=m.RIPEMD160=f.extend({_doReset:function(){this._hash=h.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(j,B){for(var Y=0;Y<16;Y++){var ee=B+Y,H=j[ee];j[ee]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360}var Z=this._hash.words,J=A.words,X=I.words,ne=v.words,ie=_.words,ae=y.words,pe=T.words,ue,Se,Ee,le,se,de,he,xe,Me,it;de=ue=Z[0],he=Se=Z[1],xe=Ee=Z[2],Me=le=Z[3],it=se=Z[4];for(var Be,Y=0;Y<80;Y+=1)Be=ue+j[B+ne[Y]]|0,Y<16?Be+=L(Se,Ee,le)+J[0]:Y<32?Be+=x(Se,Ee,le)+J[1]:Y<48?Be+=N(Se,Ee,le)+J[2]:Y<64?Be+=D(Se,Ee,le)+J[3]:Be+=U(Se,Ee,le)+J[4],Be=Be|0,Be=V(Be,ae[Y]),Be=Be+se|0,ue=se,se=le,le=V(Ee,10),Ee=Se,Se=Be,Be=de+j[B+ie[Y]]|0,Y<16?Be+=U(he,xe,Me)+X[0]:Y<32?Be+=D(he,xe,Me)+X[1]:Y<48?Be+=N(he,xe,Me)+X[2]:Y<64?Be+=x(he,xe,Me)+X[3]:Be+=L(he,xe,Me)+X[4],Be=Be|0,Be=V(Be,pe[Y]),Be=Be+it|0,de=it,it=Me,Me=V(xe,10),xe=he,he=Be;Be=Z[1]+Ee+Me|0,Z[1]=Z[2]+le+it|0,Z[2]=Z[3]+se+de|0,Z[3]=Z[4]+ue+he|0,Z[4]=Z[0]+Se+xe|0,Z[0]=Be},_doFinalize:function(){var j=this._data,B=j.words,Y=this._nDataBytes*8,ee=j.sigBytes*8;B[ee>>>5]|=128<<24-ee%32,B[(ee+64>>>9<<4)+14]=(Y<<8|Y>>>24)&16711935|(Y<<24|Y>>>8)&4278255360,j.sigBytes=(B.length+1)*4,this._process();for(var H=this._hash,Z=H.words,J=0;J<5;J++){var X=Z[J];Z[J]=(X<<8|X>>>24)&16711935|(X<<24|X>>>8)&4278255360}return H},clone:function(){var j=f.clone.call(this);return j._hash=this._hash.clone(),j}});function L(j,B,Y){return j^B^Y}function x(j,B,Y){return j&B|~j&Y}function N(j,B,Y){return(j|~B)^Y}function D(j,B,Y){return j&Y|B&~Y}function U(j,B,Y){return j^(B|~Y)}function V(j,B){return j<<B|j>>>32-B}c.RIPEMD160=f._createHelper(O),c.HmacRIPEMD160=f._createHmacHelper(O)}(),o.RIPEMD160})}(VT)),VT.exports}var jT={exports:{}},cF;function a1(){return cF||(cF=1,function(e,t){(function(o,s){e.exports=s(_n())})(At,function(o){(function(){var s=o,c=s.lib,u=c.Base,h=s.enc,f=h.Utf8,m=s.algo;m.HMAC=u.extend({init:function(v,_){v=this._hasher=new v.init,typeof _=="string"&&(_=f.parse(_));var y=v.blockSize,T=y*4;_.sigBytes>T&&(_=v.finalize(_)),_.clamp();for(var A=this._oKey=_.clone(),I=this._iKey=_.clone(),O=A.words,L=I.words,x=0;x<y;x++)O[x]^=1549556828,L[x]^=909522486;A.sigBytes=I.sigBytes=T,this.reset()},reset:function(){var v=this._hasher;v.reset(),v.update(this._iKey)},update:function(v){return this._hasher.update(v),this},finalize:function(v){var _=this._hasher,y=_.finalize(v);_.reset();var T=_.finalize(this._oKey.clone().concat(y));return T}})})()})}(jT)),jT.exports}var BT={exports:{}},lF;function uue(){return lF||(lF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),o1(),a1())})(At,function(o){return function(){var s=o,c=s.lib,u=c.Base,h=c.WordArray,f=s.algo,m=f.SHA1,v=f.HMAC,_=f.PBKDF2=u.extend({cfg:u.extend({keySize:128/32,hasher:m,iterations:1}),init:function(y){this.cfg=this.cfg.extend(y)},compute:function(y,T){for(var A=this.cfg,I=v.create(A.hasher,y),O=h.create(),L=h.create([1]),x=O.words,N=L.words,D=A.keySize,U=A.iterations;x.length<D;){var V=I.update(T).finalize(L);I.reset();for(var j=V.words,B=j.length,Y=V,ee=1;ee<U;ee++){Y=I.finalize(Y),I.reset();for(var H=Y.words,Z=0;Z<B;Z++)j[Z]^=H[Z]}O.concat(V),N[0]++}return O.sigBytes=D*4,O}});s.PBKDF2=function(y,T,A){return _.create(A).compute(y,T)}}(),o.PBKDF2})}(BT)),BT.exports}var $T={exports:{}},uF;function ju(){return uF||(uF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),o1(),a1())})(At,function(o){return function(){var s=o,c=s.lib,u=c.Base,h=c.WordArray,f=s.algo,m=f.MD5,v=f.EvpKDF=u.extend({cfg:u.extend({keySize:128/32,hasher:m,iterations:1}),init:function(_){this.cfg=this.cfg.extend(_)},compute:function(_,y){for(var T,A=this.cfg,I=A.hasher.create(),O=h.create(),L=O.words,x=A.keySize,N=A.iterations;L.length<x;){T&&I.update(T),T=I.update(_).finalize(y),I.reset();for(var D=1;D<N;D++)T=I.finalize(T),I.reset();O.concat(T)}return O.sigBytes=x*4,O}});s.EvpKDF=function(_,y,T){return v.create(T).compute(_,y)}}(),o.EvpKDF})}($T)),$T.exports}var HT={exports:{}},dF;function Wi(){return dF||(dF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),ju())})(At,function(o){o.lib.Cipher||function(s){var c=o,u=c.lib,h=u.Base,f=u.WordArray,m=u.BufferedBlockAlgorithm,v=c.enc;v.Utf8;var _=v.Base64,y=c.algo,T=y.EvpKDF,A=u.Cipher=m.extend({cfg:h.extend(),createEncryptor:function(H,Z){return this.create(this._ENC_XFORM_MODE,H,Z)},createDecryptor:function(H,Z){return this.create(this._DEC_XFORM_MODE,H,Z)},init:function(H,Z,J){this.cfg=this.cfg.extend(J),this._xformMode=H,this._key=Z,this.reset()},reset:function(){m.reset.call(this),this._doReset()},process:function(H){return this._append(H),this._process()},finalize:function(H){H&&this._append(H);var Z=this._doFinalize();return Z},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function H(Z){return typeof Z=="string"?ee:j}return function(Z){return{encrypt:function(J,X,ne){return H(X).encrypt(Z,J,X,ne)},decrypt:function(J,X,ne){return H(X).decrypt(Z,J,X,ne)}}}}()});u.StreamCipher=A.extend({_doFinalize:function(){var H=this._process(!0);return H},blockSize:1});var I=c.mode={},O=u.BlockCipherMode=h.extend({createEncryptor:function(H,Z){return this.Encryptor.create(H,Z)},createDecryptor:function(H,Z){return this.Decryptor.create(H,Z)},init:function(H,Z){this._cipher=H,this._iv=Z}}),L=I.CBC=function(){var H=O.extend();H.Encryptor=H.extend({processBlock:function(J,X){var ne=this._cipher,ie=ne.blockSize;Z.call(this,J,X,ie),ne.encryptBlock(J,X),this._prevBlock=J.slice(X,X+ie)}}),H.Decryptor=H.extend({processBlock:function(J,X){var ne=this._cipher,ie=ne.blockSize,ae=J.slice(X,X+ie);ne.decryptBlock(J,X),Z.call(this,J,X,ie),this._prevBlock=ae}});function Z(J,X,ne){var ie,ae=this._iv;ae?(ie=ae,this._iv=s):ie=this._prevBlock;for(var pe=0;pe<ne;pe++)J[X+pe]^=ie[pe]}return H}(),x=c.pad={},N=x.Pkcs7={pad:function(H,Z){for(var J=Z*4,X=J-H.sigBytes%J,ne=X<<24|X<<16|X<<8|X,ie=[],ae=0;ae<X;ae+=4)ie.push(ne);var pe=f.create(ie,X);H.concat(pe)},unpad:function(H){var Z=H.words[H.sigBytes-1>>>2]&255;H.sigBytes-=Z}};u.BlockCipher=A.extend({cfg:A.cfg.extend({mode:L,padding:N}),reset:function(){var H;A.reset.call(this);var Z=this.cfg,J=Z.iv,X=Z.mode;this._xformMode==this._ENC_XFORM_MODE?H=X.createEncryptor:(H=X.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==H?this._mode.init(this,J&&J.words):(this._mode=H.call(X,this,J&&J.words),this._mode.__creator=H)},_doProcessBlock:function(H,Z){this._mode.processBlock(H,Z)},_doFinalize:function(){var H,Z=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Z.pad(this._data,this.blockSize),H=this._process(!0)):(H=this._process(!0),Z.unpad(H)),H},blockSize:128/32});var D=u.CipherParams=h.extend({init:function(H){this.mixIn(H)},toString:function(H){return(H||this.formatter).stringify(this)}}),U=c.format={},V=U.OpenSSL={stringify:function(H){var Z,J=H.ciphertext,X=H.salt;return X?Z=f.create([1398893684,1701076831]).concat(X).concat(J):Z=J,Z.toString(_)},parse:function(H){var Z,J=_.parse(H),X=J.words;return X[0]==1398893684&&X[1]==1701076831&&(Z=f.create(X.slice(2,4)),X.splice(0,4),J.sigBytes-=16),D.create({ciphertext:J,salt:Z})}},j=u.SerializableCipher=h.extend({cfg:h.extend({format:V}),encrypt:function(H,Z,J,X){X=this.cfg.extend(X);var ne=H.createEncryptor(J,X),ie=ne.finalize(Z),ae=ne.cfg;return D.create({ciphertext:ie,key:J,iv:ae.iv,algorithm:H,mode:ae.mode,padding:ae.padding,blockSize:H.blockSize,formatter:X.format})},decrypt:function(H,Z,J,X){X=this.cfg.extend(X),Z=this._parse(Z,X.format);var ne=H.createDecryptor(J,X).finalize(Z.ciphertext);return ne},_parse:function(H,Z){return typeof H=="string"?Z.parse(H,this):H}}),B=c.kdf={},Y=B.OpenSSL={execute:function(H,Z,J,X){X||(X=f.random(64/8));var ne=T.create({keySize:Z+J}).compute(H,X),ie=f.create(ne.words.slice(Z),J*4);return ne.sigBytes=Z*4,D.create({key:ne,iv:ie,salt:X})}},ee=u.PasswordBasedCipher=j.extend({cfg:j.cfg.extend({kdf:Y}),encrypt:function(H,Z,J,X){X=this.cfg.extend(X);var ne=X.kdf.execute(J,H.keySize,H.ivSize);X.iv=ne.iv;var ie=j.encrypt.call(this,H,Z,ne.key,X);return ie.mixIn(ne),ie},decrypt:function(H,Z,J,X){X=this.cfg.extend(X),Z=this._parse(Z,X.format);var ne=X.kdf.execute(J,H.keySize,H.ivSize,Z.salt);X.iv=ne.iv;var ie=j.decrypt.call(this,H,Z,ne.key,X);return ie}})}()})}(HT)),HT.exports}var WT={exports:{}},hF;function due(){return hF||(hF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),Wi())})(At,function(o){return o.mode.CFB=function(){var s=o.lib.BlockCipherMode.extend();s.Encryptor=s.extend({processBlock:function(u,h){var f=this._cipher,m=f.blockSize;c.call(this,u,h,m,f),this._prevBlock=u.slice(h,h+m)}}),s.Decryptor=s.extend({processBlock:function(u,h){var f=this._cipher,m=f.blockSize,v=u.slice(h,h+m);c.call(this,u,h,m,f),this._prevBlock=v}});function c(u,h,f,m){var v,_=this._iv;_?(v=_.slice(0),this._iv=void 0):v=this._prevBlock,m.encryptBlock(v,0);for(var y=0;y<f;y++)u[h+y]^=v[y]}return s}(),o.mode.CFB})}(WT)),WT.exports}var GT={exports:{}},pF;function hue(){return pF||(pF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),Wi())})(At,function(o){return o.mode.CTR=function(){var s=o.lib.BlockCipherMode.extend(),c=s.Encryptor=s.extend({processBlock:function(u,h){var f=this._cipher,m=f.blockSize,v=this._iv,_=this._counter;v&&(_=this._counter=v.slice(0),this._iv=void 0);var y=_.slice(0);f.encryptBlock(y,0),_[m-1]=_[m-1]+1|0;for(var T=0;T<m;T++)u[h+T]^=y[T]}});return s.Decryptor=c,s}(),o.mode.CTR})}(GT)),GT.exports}var zT={exports:{}},fF;function pue(){return fF||(fF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),Wi())})(At,function(o){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return o.mode.CTRGladman=function(){var s=o.lib.BlockCipherMode.extend();function c(f){if((f>>24&255)===255){var m=f>>16&255,v=f>>8&255,_=f&255;m===255?(m=0,v===255?(v=0,_===255?_=0:++_):++v):++m,f=0,f+=m<<16,f+=v<<8,f+=_}else f+=1<<24;return f}function u(f){return(f[0]=c(f[0]))===0&&(f[1]=c(f[1])),f}var h=s.Encryptor=s.extend({processBlock:function(f,m){var v=this._cipher,_=v.blockSize,y=this._iv,T=this._counter;y&&(T=this._counter=y.slice(0),this._iv=void 0),u(T);var A=T.slice(0);v.encryptBlock(A,0);for(var I=0;I<_;I++)f[m+I]^=A[I]}});return s.Decryptor=h,s}(),o.mode.CTRGladman})}(zT)),zT.exports}var KT={exports:{}},mF;function fue(){return mF||(mF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),Wi())})(At,function(o){return o.mode.OFB=function(){var s=o.lib.BlockCipherMode.extend(),c=s.Encryptor=s.extend({processBlock:function(u,h){var f=this._cipher,m=f.blockSize,v=this._iv,_=this._keystream;v&&(_=this._keystream=v.slice(0),this._iv=void 0),f.encryptBlock(_,0);for(var y=0;y<m;y++)u[h+y]^=_[y]}});return s.Decryptor=c,s}(),o.mode.OFB})}(KT)),KT.exports}var YT={exports:{}},gF;function mue(){return gF||(gF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),Wi())})(At,function(o){return o.mode.ECB=function(){var s=o.lib.BlockCipherMode.extend();return s.Encryptor=s.extend({processBlock:function(c,u){this._cipher.encryptBlock(c,u)}}),s.Decryptor=s.extend({processBlock:function(c,u){this._cipher.decryptBlock(c,u)}}),s}(),o.mode.ECB})}(YT)),YT.exports}var qT={exports:{}},vF;function gue(){return vF||(vF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),Wi())})(At,function(o){return o.pad.AnsiX923={pad:function(s,c){var u=s.sigBytes,h=c*4,f=h-u%h,m=u+f-1;s.clamp(),s.words[m>>>2]|=f<<24-m%4*8,s.sigBytes+=f},unpad:function(s){var c=s.words[s.sigBytes-1>>>2]&255;s.sigBytes-=c}},o.pad.Ansix923})}(qT)),qT.exports}var XT={exports:{}},EF;function vue(){return EF||(EF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),Wi())})(At,function(o){return o.pad.Iso10126={pad:function(s,c){var u=c*4,h=u-s.sigBytes%u;s.concat(o.lib.WordArray.random(h-1)).concat(o.lib.WordArray.create([h<<24],1))},unpad:function(s){var c=s.words[s.sigBytes-1>>>2]&255;s.sigBytes-=c}},o.pad.Iso10126})}(XT)),XT.exports}var JT={exports:{}},_F;function Eue(){return _F||(_F=1,function(e,t){(function(o,s,c){e.exports=s(_n(),Wi())})(At,function(o){return o.pad.Iso97971={pad:function(s,c){s.concat(o.lib.WordArray.create([2147483648],1)),o.pad.ZeroPadding.pad(s,c)},unpad:function(s){o.pad.ZeroPadding.unpad(s),s.sigBytes--}},o.pad.Iso97971})}(JT)),JT.exports}var QT={exports:{}},SF;function _ue(){return SF||(SF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),Wi())})(At,function(o){return o.pad.ZeroPadding={pad:function(s,c){var u=c*4;s.clamp(),s.sigBytes+=u-(s.sigBytes%u||u)},unpad:function(s){for(var c=s.words,u=s.sigBytes-1,u=s.sigBytes-1;u>=0;u--)if(c[u>>>2]>>>24-u%4*8&255){s.sigBytes=u+1;break}}},o.pad.ZeroPadding})}(QT)),QT.exports}var ZT={exports:{}},yF;function Sue(){return yF||(yF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),Wi())})(At,function(o){return o.pad.NoPadding={pad:function(){},unpad:function(){}},o.pad.NoPadding})}(ZT)),ZT.exports}var eb={exports:{}},CF;function yue(){return CF||(CF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),Wi())})(At,function(o){return function(s){var c=o,u=c.lib,h=u.CipherParams,f=c.enc,m=f.Hex,v=c.format;v.Hex={stringify:function(_){return _.ciphertext.toString(m)},parse:function(_){var y=m.parse(_);return h.create({ciphertext:y})}}}(),o.format.Hex})}(eb)),eb.exports}var tb={exports:{}},TF;function Cue(){return TF||(TF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),qh(),Xh(),ju(),Wi())})(At,function(o){return function(){var s=o,c=s.lib,u=c.BlockCipher,h=s.algo,f=[],m=[],v=[],_=[],y=[],T=[],A=[],I=[],O=[],L=[];(function(){for(var D=[],U=0;U<256;U++)U<128?D[U]=U<<1:D[U]=U<<1^283;for(var V=0,j=0,U=0;U<256;U++){var B=j^j<<1^j<<2^j<<3^j<<4;B=B>>>8^B&255^99,f[V]=B,m[B]=V;var Y=D[V],ee=D[Y],H=D[ee],Z=D[B]*257^B*16843008;v[V]=Z<<24|Z>>>8,_[V]=Z<<16|Z>>>16,y[V]=Z<<8|Z>>>24,T[V]=Z;var Z=H*16843009^ee*65537^Y*257^V*16843008;A[B]=Z<<24|Z>>>8,I[B]=Z<<16|Z>>>16,O[B]=Z<<8|Z>>>24,L[B]=Z,V?(V=Y^D[D[D[H^Y]]],j^=D[D[j]]):V=j=1}})();var x=[0,1,2,4,8,16,32,64,128,27,54],N=h.AES=u.extend({_doReset:function(){var D;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var U=this._keyPriorReset=this._key,V=U.words,j=U.sigBytes/4,B=this._nRounds=j+6,Y=(B+1)*4,ee=this._keySchedule=[],H=0;H<Y;H++)H<j?ee[H]=V[H]:(D=ee[H-1],H%j?j>6&&H%j==4&&(D=f[D>>>24]<<24|f[D>>>16&255]<<16|f[D>>>8&255]<<8|f[D&255]):(D=D<<8|D>>>24,D=f[D>>>24]<<24|f[D>>>16&255]<<16|f[D>>>8&255]<<8|f[D&255],D^=x[H/j|0]<<24),ee[H]=ee[H-j]^D);for(var Z=this._invKeySchedule=[],J=0;J<Y;J++){var H=Y-J;if(J%4)var D=ee[H];else var D=ee[H-4];J<4||H<=4?Z[J]=D:Z[J]=A[f[D>>>24]]^I[f[D>>>16&255]]^O[f[D>>>8&255]]^L[f[D&255]]}}},encryptBlock:function(D,U){this._doCryptBlock(D,U,this._keySchedule,v,_,y,T,f)},decryptBlock:function(D,U){var V=D[U+1];D[U+1]=D[U+3],D[U+3]=V,this._doCryptBlock(D,U,this._invKeySchedule,A,I,O,L,m);var V=D[U+1];D[U+1]=D[U+3],D[U+3]=V},_doCryptBlock:function(D,U,V,j,B,Y,ee,H){for(var Z=this._nRounds,J=D[U]^V[0],X=D[U+1]^V[1],ne=D[U+2]^V[2],ie=D[U+3]^V[3],ae=4,pe=1;pe<Z;pe++){var ue=j[J>>>24]^B[X>>>16&255]^Y[ne>>>8&255]^ee[ie&255]^V[ae++],Se=j[X>>>24]^B[ne>>>16&255]^Y[ie>>>8&255]^ee[J&255]^V[ae++],Ee=j[ne>>>24]^B[ie>>>16&255]^Y[J>>>8&255]^ee[X&255]^V[ae++],le=j[ie>>>24]^B[J>>>16&255]^Y[X>>>8&255]^ee[ne&255]^V[ae++];J=ue,X=Se,ne=Ee,ie=le}var ue=(H[J>>>24]<<24|H[X>>>16&255]<<16|H[ne>>>8&255]<<8|H[ie&255])^V[ae++],Se=(H[X>>>24]<<24|H[ne>>>16&255]<<16|H[ie>>>8&255]<<8|H[J&255])^V[ae++],Ee=(H[ne>>>24]<<24|H[ie>>>16&255]<<16|H[J>>>8&255]<<8|H[X&255])^V[ae++],le=(H[ie>>>24]<<24|H[J>>>16&255]<<16|H[X>>>8&255]<<8|H[ne&255])^V[ae++];D[U]=ue,D[U+1]=Se,D[U+2]=Ee,D[U+3]=le},keySize:256/32});s.AES=u._createHelper(N)}(),o.AES})}(tb)),tb.exports}var nb={exports:{}},bF;function Tue(){return bF||(bF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),qh(),Xh(),ju(),Wi())})(At,function(o){return function(){var s=o,c=s.lib,u=c.WordArray,h=c.BlockCipher,f=s.algo,m=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],v=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],_=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],y=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],T=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],A=f.DES=h.extend({_doReset:function(){for(var x=this._key,N=x.words,D=[],U=0;U<56;U++){var V=m[U]-1;D[U]=N[V>>>5]>>>31-V%32&1}for(var j=this._subKeys=[],B=0;B<16;B++){for(var Y=j[B]=[],ee=_[B],U=0;U<24;U++)Y[U/6|0]|=D[(v[U]-1+ee)%28]<<31-U%6,Y[4+(U/6|0)]|=D[28+(v[U+24]-1+ee)%28]<<31-U%6;Y[0]=Y[0]<<1|Y[0]>>>31;for(var U=1;U<7;U++)Y[U]=Y[U]>>>(U-1)*4+3;Y[7]=Y[7]<<5|Y[7]>>>27}for(var H=this._invSubKeys=[],U=0;U<16;U++)H[U]=j[15-U]},encryptBlock:function(x,N){this._doCryptBlock(x,N,this._subKeys)},decryptBlock:function(x,N){this._doCryptBlock(x,N,this._invSubKeys)},_doCryptBlock:function(x,N,D){this._lBlock=x[N],this._rBlock=x[N+1],I.call(this,4,252645135),I.call(this,16,65535),O.call(this,2,858993459),O.call(this,8,16711935),I.call(this,1,1431655765);for(var U=0;U<16;U++){for(var V=D[U],j=this._lBlock,B=this._rBlock,Y=0,ee=0;ee<8;ee++)Y|=y[ee][((B^V[ee])&T[ee])>>>0];this._lBlock=B,this._rBlock=j^Y}var H=this._lBlock;this._lBlock=this._rBlock,this._rBlock=H,I.call(this,1,1431655765),O.call(this,8,16711935),O.call(this,2,858993459),I.call(this,16,65535),I.call(this,4,252645135),x[N]=this._lBlock,x[N+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function I(x,N){var D=(this._lBlock>>>x^this._rBlock)&N;this._rBlock^=D,this._lBlock^=D<<x}function O(x,N){var D=(this._rBlock>>>x^this._lBlock)&N;this._lBlock^=D,this._rBlock^=D<<x}s.DES=h._createHelper(A);var L=f.TripleDES=h.extend({_doReset:function(){var x=this._key,N=x.words;if(N.length!==2&&N.length!==4&&N.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var D=N.slice(0,2),U=N.length<4?N.slice(0,2):N.slice(2,4),V=N.length<6?N.slice(0,2):N.slice(4,6);this._des1=A.createEncryptor(u.create(D)),this._des2=A.createEncryptor(u.create(U)),this._des3=A.createEncryptor(u.create(V))},encryptBlock:function(x,N){this._des1.encryptBlock(x,N),this._des2.decryptBlock(x,N),this._des3.encryptBlock(x,N)},decryptBlock:function(x,N){this._des3.decryptBlock(x,N),this._des2.encryptBlock(x,N),this._des1.decryptBlock(x,N)},keySize:192/32,ivSize:64/32,blockSize:64/32});s.TripleDES=h._createHelper(L)}(),o.TripleDES})}(nb)),nb.exports}var rb={exports:{}},RF;function bue(){return RF||(RF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),qh(),Xh(),ju(),Wi())})(At,function(o){return function(){var s=o,c=s.lib,u=c.StreamCipher,h=s.algo,f=h.RC4=u.extend({_doReset:function(){for(var _=this._key,y=_.words,T=_.sigBytes,A=this._S=[],I=0;I<256;I++)A[I]=I;for(var I=0,O=0;I<256;I++){var L=I%T,x=y[L>>>2]>>>24-L%4*8&255;O=(O+A[I]+x)%256;var N=A[I];A[I]=A[O],A[O]=N}this._i=this._j=0},_doProcessBlock:function(_,y){_[y]^=m.call(this)},keySize:256/32,ivSize:0});function m(){for(var _=this._S,y=this._i,T=this._j,A=0,I=0;I<4;I++){y=(y+1)%256,T=(T+_[y])%256;var O=_[y];_[y]=_[T],_[T]=O,A|=_[(_[y]+_[T])%256]<<24-I*8}return this._i=y,this._j=T,A}s.RC4=u._createHelper(f);var v=h.RC4Drop=f.extend({cfg:f.cfg.extend({drop:192}),_doReset:function(){f._doReset.call(this);for(var _=this.cfg.drop;_>0;_--)m.call(this)}});s.RC4Drop=u._createHelper(v)}(),o.RC4})}(rb)),rb.exports}var ib={exports:{}},IF;function Rue(){return IF||(IF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),qh(),Xh(),ju(),Wi())})(At,function(o){return function(){var s=o,c=s.lib,u=c.StreamCipher,h=s.algo,f=[],m=[],v=[],_=h.Rabbit=u.extend({_doReset:function(){for(var T=this._key.words,A=this.cfg.iv,I=0;I<4;I++)T[I]=(T[I]<<8|T[I]>>>24)&16711935|(T[I]<<24|T[I]>>>8)&4278255360;var O=this._X=[T[0],T[3]<<16|T[2]>>>16,T[1],T[0]<<16|T[3]>>>16,T[2],T[1]<<16|T[0]>>>16,T[3],T[2]<<16|T[1]>>>16],L=this._C=[T[2]<<16|T[2]>>>16,T[0]&4294901760|T[1]&65535,T[3]<<16|T[3]>>>16,T[1]&4294901760|T[2]&65535,T[0]<<16|T[0]>>>16,T[2]&4294901760|T[3]&65535,T[1]<<16|T[1]>>>16,T[3]&4294901760|T[0]&65535];this._b=0;for(var I=0;I<4;I++)y.call(this);for(var I=0;I<8;I++)L[I]^=O[I+4&7];if(A){var x=A.words,N=x[0],D=x[1],U=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,V=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,j=U>>>16|V&4294901760,B=V<<16|U&65535;L[0]^=U,L[1]^=j,L[2]^=V,L[3]^=B,L[4]^=U,L[5]^=j,L[6]^=V,L[7]^=B;for(var I=0;I<4;I++)y.call(this)}},_doProcessBlock:function(T,A){var I=this._X;y.call(this),f[0]=I[0]^I[5]>>>16^I[3]<<16,f[1]=I[2]^I[7]>>>16^I[5]<<16,f[2]=I[4]^I[1]>>>16^I[7]<<16,f[3]=I[6]^I[3]>>>16^I[1]<<16;for(var O=0;O<4;O++)f[O]=(f[O]<<8|f[O]>>>24)&16711935|(f[O]<<24|f[O]>>>8)&4278255360,T[A+O]^=f[O]},blockSize:128/32,ivSize:64/32});function y(){for(var T=this._X,A=this._C,I=0;I<8;I++)m[I]=A[I];A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<m[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<m[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<m[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<m[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<m[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<m[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<m[6]>>>0?1:0)|0,this._b=A[7]>>>0<m[7]>>>0?1:0;for(var I=0;I<8;I++){var O=T[I]+A[I],L=O&65535,x=O>>>16,N=((L*L>>>17)+L*x>>>15)+x*x,D=((O&4294901760)*O|0)+((O&65535)*O|0);v[I]=N^D}T[0]=v[0]+(v[7]<<16|v[7]>>>16)+(v[6]<<16|v[6]>>>16)|0,T[1]=v[1]+(v[0]<<8|v[0]>>>24)+v[7]|0,T[2]=v[2]+(v[1]<<16|v[1]>>>16)+(v[0]<<16|v[0]>>>16)|0,T[3]=v[3]+(v[2]<<8|v[2]>>>24)+v[1]|0,T[4]=v[4]+(v[3]<<16|v[3]>>>16)+(v[2]<<16|v[2]>>>16)|0,T[5]=v[5]+(v[4]<<8|v[4]>>>24)+v[3]|0,T[6]=v[6]+(v[5]<<16|v[5]>>>16)+(v[4]<<16|v[4]>>>16)|0,T[7]=v[7]+(v[6]<<8|v[6]>>>24)+v[5]|0}s.Rabbit=u._createHelper(_)}(),o.Rabbit})}(ib)),ib.exports}var ob={exports:{}},wF;function Iue(){return wF||(wF=1,function(e,t){(function(o,s,c){e.exports=s(_n(),qh(),Xh(),ju(),Wi())})(At,function(o){return function(){var s=o,c=s.lib,u=c.StreamCipher,h=s.algo,f=[],m=[],v=[],_=h.RabbitLegacy=u.extend({_doReset:function(){var T=this._key.words,A=this.cfg.iv,I=this._X=[T[0],T[3]<<16|T[2]>>>16,T[1],T[0]<<16|T[3]>>>16,T[2],T[1]<<16|T[0]>>>16,T[3],T[2]<<16|T[1]>>>16],O=this._C=[T[2]<<16|T[2]>>>16,T[0]&4294901760|T[1]&65535,T[3]<<16|T[3]>>>16,T[1]&4294901760|T[2]&65535,T[0]<<16|T[0]>>>16,T[2]&4294901760|T[3]&65535,T[1]<<16|T[1]>>>16,T[3]&4294901760|T[0]&65535];this._b=0;for(var L=0;L<4;L++)y.call(this);for(var L=0;L<8;L++)O[L]^=I[L+4&7];if(A){var x=A.words,N=x[0],D=x[1],U=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,V=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,j=U>>>16|V&4294901760,B=V<<16|U&65535;O[0]^=U,O[1]^=j,O[2]^=V,O[3]^=B,O[4]^=U,O[5]^=j,O[6]^=V,O[7]^=B;for(var L=0;L<4;L++)y.call(this)}},_doProcessBlock:function(T,A){var I=this._X;y.call(this),f[0]=I[0]^I[5]>>>16^I[3]<<16,f[1]=I[2]^I[7]>>>16^I[5]<<16,f[2]=I[4]^I[1]>>>16^I[7]<<16,f[3]=I[6]^I[3]>>>16^I[1]<<16;for(var O=0;O<4;O++)f[O]=(f[O]<<8|f[O]>>>24)&16711935|(f[O]<<24|f[O]>>>8)&4278255360,T[A+O]^=f[O]},blockSize:128/32,ivSize:64/32});function y(){for(var T=this._X,A=this._C,I=0;I<8;I++)m[I]=A[I];A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<m[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<m[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<m[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<m[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<m[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<m[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<m[6]>>>0?1:0)|0,this._b=A[7]>>>0<m[7]>>>0?1:0;for(var I=0;I<8;I++){var O=T[I]+A[I],L=O&65535,x=O>>>16,N=((L*L>>>17)+L*x>>>15)+x*x,D=((O&4294901760)*O|0)+((O&65535)*O|0);v[I]=N^D}T[0]=v[0]+(v[7]<<16|v[7]>>>16)+(v[6]<<16|v[6]>>>16)|0,T[1]=v[1]+(v[0]<<8|v[0]>>>24)+v[7]|0,T[2]=v[2]+(v[1]<<16|v[1]>>>16)+(v[0]<<16|v[0]>>>16)|0,T[3]=v[3]+(v[2]<<8|v[2]>>>24)+v[1]|0,T[4]=v[4]+(v[3]<<16|v[3]>>>16)+(v[2]<<16|v[2]>>>16)|0,T[5]=v[5]+(v[4]<<8|v[4]>>>24)+v[3]|0,T[6]=v[6]+(v[5]<<16|v[5]>>>16)+(v[4]<<16|v[4]>>>16)|0,T[7]=v[7]+(v[6]<<8|v[6]>>>24)+v[5]|0}s.RabbitLegacy=u._createHelper(_)}(),o.RabbitLegacy})}(ob)),ob.exports}(function(e,t){(function(o,s,c){e.exports=s(_n(),n_(),rue(),iue(),qh(),oue(),Xh(),o1(),J8(),aue(),Q8(),sue(),cue(),lue(),a1(),uue(),ju(),Wi(),due(),hue(),pue(),fue(),mue(),gue(),vue(),Eue(),_ue(),Sue(),yue(),Cue(),Tue(),bue(),Rue(),Iue())})(At,function(o){return o})})(X8);var wue=X8.exports;const OF=Al(wue);let Z8="U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==";{const e=OF.AES.decrypt("U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==","U2FsdGVkX1/fp5K6GAphzVxz");Z8=JSON.parse(e.toString(OF.enc.Utf8))}const St={appId:Z8,channel:{}.AGORA_CHANNEL||"test",token:{}.AGORA_TOKEN?{}.AGORA_TOKEN:null};function Oue(){return[{channel:{}.AGORA_CHANNEL_0||"test0",token:{}.AGORA_TOKEN_0},{channel:{}.AGORA_CHANNEL_1||"test1",token:{}.AGORA_TOKEN_1},{channel:{}.AGORA_CHANNEL_2||"test2",token:{}.AGORA_TOKEN_2},{channel:{}.AGORA_CHANNEL_3||"test3",token:{}.AGORA_TOKEN_3},{channel:{}.AGORA_CHANNEL_4||"test4",token:{}.AGORA_TOKEN_4},{channel:{}.AGORA_CHANNEL_5||"test5",token:{}.AGORA_TOKEN_5},{channel:{}.AGORA_CHANNEL_6||"test6",token:{}.AGORA_TOKEN_6},{channel:{}.AGORA_CHANNEL_7||"test7",token:{}.AGORA_TOKEN_7},{channel:{}.AGORA_CHANNEL_8||"test8",token:{}.AGORA_TOKEN_8},{channel:{}.AGORA_CHANNEL_9||"test9",token:{}.AGORA_TOKEN_9}]}const Ss=e=>{W4(String(e));const t=Xle();return W4(),t},$s=()=>"https://www.agora.io/en/wp-content/uploads/2022/10/3d-spatial-audio-icon.svg";function s1({micOn:e,cameraOn:t,renderAction:o,renderLocalUser:s,renderRemoteUsers:c}){const u=ys(),h=ZE()||0,f=b.useMemo(()=>Ss(h),[h]),m=b.useMemo(()=>$s(),[]),v=Gs(),_=v.filter(I=>I.hasAudio||I.hasVideo),y=e||t,{localMicrophoneTrack:T}=zh(e),{localCameraTrack:A}=Kh(t);return Gh([T,A]),te.jsxs(te.Fragment,{children:[o?o():void 0,te.jsx(Qw,{published:_.length+(y?1:0),total:v.length+1}),te.jsxs(ja,{children:[u&&(s?s():te.jsx(ja.Item,{children:te.jsx(Jw,{audioTrack:T,cameraOn:t,cover:m,micOn:e,videoTrack:A,children:te.jsx(Rc,{children:`${f}{${h}}`})})})),c?c():void 0]})]})}const Lg=({children:e,clientConfig:t={mode:"rtc",codec:"vp8"}})=>{const[o]=b.useState(()=>bu.createClient(t));return te.jsx(B8,{client:o,children:e})},ya=({calling:e,micOn:t,cameraOn:o,setMic:s,setCamera:c,setCalling:u})=>te.jsx(te.Fragment,{children:te.jsxs("div",{className:"inset-0 top-a flex justify-center items-center gap-3 px-6 py-3 bg-#21242c c-coolgray-3",children:[te.jsxs("div",{className:"flex-1 flex top-0 left-0 h-full items-center gap-3 px-6 py-3",children:[s&&te.jsx("button",{className:"btn",onClick:()=>s(),children:t?te.jsx(Ele,{}):te.jsx(_le,{})}),c&&te.jsx("button",{className:"btn",onClick:()=>c(),children:o?te.jsx(Sle,{}):te.jsx(yle,{})})]}),u&&te.jsx("button",{className:Hw("btn btn-phone",{"btn-phone-active":e}),onClick:()=>u(),children:e?te.jsx("i",{className:"i-mdi-phone-hangup"}):te.jsx("i",{className:"i-mdi-phone"})})]})}),AF=e=>{let t;const o=new Set,s=(m,v)=>{const _=typeof m=="function"?m(t):m;if(!Object.is(_,t)){const y=t;t=v??typeof _!="object"?_:Object.assign({},t,_),o.forEach(T=>T(t,y))}},c=()=>t,f={setState:s,getState:c,subscribe:m=>(o.add(m),()=>o.delete(m)),destroy:()=>{o.clear()}};return t=e(s,c,f),f},Aue=e=>e?AF(e):AF;var e5={exports:{}},t5={},n5={exports:{}},r5={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xh=b;function Nue(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xue=typeof Object.is=="function"?Object.is:Nue,Pue=xh.useState,Due=xh.useEffect,kue=xh.useLayoutEffect,Lue=xh.useDebugValue;function Mue(e,t){var o=t(),s=Pue({inst:{value:o,getSnapshot:t}}),c=s[0].inst,u=s[1];return kue(function(){c.value=o,c.getSnapshot=t,ab(c)&&u({inst:c})},[e,o,t]),Due(function(){return ab(c)&&u({inst:c}),e(function(){ab(c)&&u({inst:c})})},[e]),Lue(o),o}function ab(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!xue(e,o)}catch{return!0}}function Uue(e,t){return t()}var Fue=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Uue:Mue;r5.useSyncExternalStore=xh.useSyncExternalStore!==void 0?xh.useSyncExternalStore:Fue;n5.exports=r5;var Vue=n5.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_=b,jue=Vue;function Bue(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $ue=typeof Object.is=="function"?Object.is:Bue,Hue=jue.useSyncExternalStore,Wue=r_.useRef,Gue=r_.useEffect,zue=r_.useMemo,Kue=r_.useDebugValue;t5.useSyncExternalStoreWithSelector=function(e,t,o,s,c){var u=Wue(null);if(u.current===null){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=zue(function(){function m(A){if(!v){if(v=!0,_=A,A=s(A),c!==void 0&&h.hasValue){var I=h.value;if(c(I,A))return y=I}return y=A}if(I=y,$ue(_,A))return I;var O=s(A);return c!==void 0&&c(I,O)?I:(_=A,y=O)}var v=!1,_,y,T=o===void 0?null:o;return[function(){return m(t())},T===null?void 0:function(){return m(T())}]},[t,o,s,c]);var f=Hue(e,u[0],u[1]);return Gue(function(){h.hasValue=!0,h.value=f},[f]),Kue(f),f};e5.exports=t5;var Yue=e5.exports;const que=Al(Yue),{useSyncExternalStoreWithSelector:Xue}=que;function Jue(e,t=e.getState,o){const s=Xue(e.subscribe,e.getState,e.getServerState||e.getState,t,o);return b.useDebugValue(s),s}const NF=e=>{const t=typeof e=="function"?Aue(e):e,o=(s,c)=>Jue(t,s,c);return Object.assign(o,t),o},Que=e=>e?NF(e):NF,Zue=St.appId,ede=Oue(),Tf=Que((e,t)=>({getRooms:()=>{let{rooms:o}=t();o=ede.map(({token:s,channel:c})=>{const u=bu.createClient({mode:"live",codec:"vp8"});return u.join(Zue,c,s||null,null),{channel:c,token:s,client:u}}),e({rooms:o})},selectChannel:async o=>{let{hostRoom:s,localTracks:c}=t();const{rooms:u}=t();if(!o){s&&(c&&s.client.localTracks.length>0&&await s.client.unpublish(c),s.client.setClientRole("audience"),s=null,e({hostRoom:s,localTracks:c}));return}if(s){if(s.client.channelName===o)return;c&&await s.client.unpublish(c),await s.client.setClientRole("audience")}s=u==null?void 0:u.find(h=>h.client.channelName===o),s&&(await s.client.setClientRole("host"),c||(c=await bu.createMicrophoneAndCameraTracks()),await s.client.publish(c)),e({localTracks:c,hostRoom:s})},dispose:()=>{const{rooms:o,hostRoom:s}=t();if(s==null||s.client.leave(),o)for(const c of o)c.client.leave()}}));var tde=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function nde(e){var t=e.defaultInputValue,o=t===void 0?"":t,s=e.defaultMenuIsOpen,c=s===void 0?!1:s,u=e.defaultValue,h=u===void 0?null:u,f=e.inputValue,m=e.menuIsOpen,v=e.onChange,_=e.onInputChange,y=e.onMenuClose,T=e.onMenuOpen,A=e.value,I=fn(e,tde),O=b.useState(f!==void 0?f:o),L=De(O,2),x=L[0],N=L[1],D=b.useState(m!==void 0?m:c),U=De(D,2),V=U[0],j=U[1],B=b.useState(A!==void 0?A:h),Y=De(B,2),ee=Y[0],H=Y[1],Z=b.useCallback(function(ue,Se){typeof v=="function"&&v(ue,Se),H(ue)},[v]),J=b.useCallback(function(ue,Se){var Ee;typeof _=="function"&&(Ee=_(ue,Se)),N(Ee!==void 0?Ee:ue)},[_]),X=b.useCallback(function(){typeof T=="function"&&T(),j(!0)},[T]),ne=b.useCallback(function(){typeof y=="function"&&y(),j(!1)},[y]),ie=f!==void 0?f:x,ae=m!==void 0?m:V,pe=A!==void 0?A:ee;return ge(ge({},I),{},{inputValue:ie,menuIsOpen:ae,onChange:Z,onInputChange:J,onMenuClose:ne,onMenuOpen:X,value:pe})}function rde(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function ide(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var ode=function(){function e(o){var s=this;this._insertTag=function(c){var u;s.tags.length===0?s.insertionPoint?u=s.insertionPoint.nextSibling:s.prepend?u=s.container.firstChild:u=s.before:u=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(c,u),s.tags.push(c)},this.isSpeedy=o.speedy===void 0?!0:o.speedy,this.tags=[],this.ctr=0,this.nonce=o.nonce,this.key=o.key,this.container=o.container,this.prepend=o.prepend,this.insertionPoint=o.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ide(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var u=rde(c);try{u.insertRule(s,u.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){return s.parentNode&&s.parentNode.removeChild(s)}),this.tags=[],this.ctr=0},e}(),ro="-ms-",eE="-moz-",wn="-webkit-",i5="comm",c1="rule",l1="decl",ade="@import",o5="@keyframes",sde="@layer",cde=Math.abs,i_=String.fromCharCode,lde=Object.assign;function ude(e,t){return Fi(e,0)^45?(((t<<2^Fi(e,0))<<2^Fi(e,1))<<2^Fi(e,2))<<2^Fi(e,3):0}function a5(e){return e.trim()}function dde(e,t){return(e=t.exec(e))?e[0]:e}function On(e,t,o){return e.replace(t,o)}function aI(e,t){return e.indexOf(t)}function Fi(e,t){return e.charCodeAt(t)|0}function qf(e,t,o){return e.slice(t,o)}function Ms(e){return e.length}function u1(e){return e.length}function Mg(e,t){return t.push(e),e}function hde(e,t){return e.map(t).join("")}var o_=1,Ph=1,s5=0,Wo=0,ri=0,Jh="";function a_(e,t,o,s,c,u,h){return{value:e,root:t,parent:o,type:s,props:c,children:u,line:o_,column:Ph,length:h,return:""}}function Xp(e,t){return lde(a_("",null,null,"",null,null,0),e,{length:-e.length},t)}function pde(){return ri}function fde(){return ri=Wo>0?Fi(Jh,--Wo):0,Ph--,ri===10&&(Ph=1,o_--),ri}function fa(){return ri=Wo<s5?Fi(Jh,Wo++):0,Ph++,ri===10&&(Ph=1,o_++),ri}function Bs(){return Fi(Jh,Wo)}function sv(){return Wo}function Sm(e,t){return qf(Jh,e,t)}function Xf(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function c5(e){return o_=Ph=1,s5=Ms(Jh=e),Wo=0,[]}function l5(e){return Jh="",e}function cv(e){return a5(Sm(Wo-1,sI(e===91?e+2:e===40?e+1:e)))}function mde(e){for(;(ri=Bs())&&ri<33;)fa();return Xf(e)>2||Xf(ri)>3?"":" "}function gde(e,t){for(;--t&&fa()&&!(ri<48||ri>102||ri>57&&ri<65||ri>70&&ri<97););return Sm(e,sv()+(t<6&&Bs()==32&&fa()==32))}function sI(e){for(;fa();)switch(ri){case e:return Wo;case 34:case 39:e!==34&&e!==39&&sI(ri);break;case 40:e===41&&sI(e);break;case 92:fa();break}return Wo}function vde(e,t){for(;fa()&&e+ri!==47+10;)if(e+ri===42+42&&Bs()===47)break;return"/*"+Sm(t,Wo-1)+"*"+i_(e===47?e:fa())}function Ede(e){for(;!Xf(Bs());)fa();return Sm(e,Wo)}function _de(e){return l5(lv("",null,null,null,[""],e=c5(e),0,[0],e))}function lv(e,t,o,s,c,u,h,f,m){for(var v=0,_=0,y=h,T=0,A=0,I=0,O=1,L=1,x=1,N=0,D="",U=c,V=u,j=s,B=D;L;)switch(I=N,N=fa()){case 40:if(I!=108&&Fi(B,y-1)==58){aI(B+=On(cv(N),"&","&\f"),"&\f")!=-1&&(x=-1);break}case 34:case 39:case 91:B+=cv(N);break;case 9:case 10:case 13:case 32:B+=mde(I);break;case 92:B+=gde(sv()-1,7);continue;case 47:switch(Bs()){case 42:case 47:Mg(Sde(vde(fa(),sv()),t,o),m);break;default:B+="/"}break;case 123*O:f[v++]=Ms(B)*x;case 125*O:case 59:case 0:switch(N){case 0:case 125:L=0;case 59+_:x==-1&&(B=On(B,/\f/g,"")),A>0&&Ms(B)-y&&Mg(A>32?PF(B+";",s,o,y-1):PF(On(B," ","")+";",s,o,y-2),m);break;case 59:B+=";";default:if(Mg(j=xF(B,t,o,v,_,c,f,D,U=[],V=[],y),u),N===123)if(_===0)lv(B,t,j,j,U,u,y,f,V);else switch(T===99&&Fi(B,3)===110?100:T){case 100:case 108:case 109:case 115:lv(e,j,j,s&&Mg(xF(e,j,j,0,0,c,f,D,c,U=[],y),V),c,V,y,f,s?U:V);break;default:lv(B,j,j,j,[""],V,0,f,V)}}v=_=A=0,O=x=1,D=B="",y=h;break;case 58:y=1+Ms(B),A=I;default:if(O<1){if(N==123)--O;else if(N==125&&O++==0&&fde()==125)continue}switch(B+=i_(N),N*O){case 38:x=_>0?1:(B+="\f",-1);break;case 44:f[v++]=(Ms(B)-1)*x,x=1;break;case 64:Bs()===45&&(B+=cv(fa())),T=Bs(),_=y=Ms(D=B+=Ede(sv())),N++;break;case 45:I===45&&Ms(B)==2&&(O=0)}}return u}function xF(e,t,o,s,c,u,h,f,m,v,_){for(var y=c-1,T=c===0?u:[""],A=u1(T),I=0,O=0,L=0;I<s;++I)for(var x=0,N=qf(e,y+1,y=cde(O=h[I])),D=e;x<A;++x)(D=a5(O>0?T[x]+" "+N:On(N,/&\f/g,T[x])))&&(m[L++]=D);return a_(e,t,o,c===0?c1:f,m,v,_)}function Sde(e,t,o){return a_(e,t,o,i5,i_(pde()),qf(e,2,-2),0)}function PF(e,t,o,s){return a_(e,t,o,l1,qf(e,0,s),qf(e,s+1,-1),s)}function Eh(e,t){for(var o="",s=u1(e),c=0;c<s;c++)o+=t(e[c],c,e,t)||"";return o}function yde(e,t,o,s){switch(e.type){case sde:if(e.children.length)break;case ade:case l1:return e.return=e.return||e.value;case i5:return"";case o5:return e.return=e.value+"{"+Eh(e.children,s)+"}";case c1:e.value=e.props.join(",")}return Ms(o=Eh(e.children,s))?e.return=e.value+"{"+o+"}":""}function Cde(e){var t=u1(e);return function(o,s,c,u){for(var h="",f=0;f<t;f++)h+=e[f](o,s,c,u)||"";return h}}function Tde(e){return function(t){t.root||(t=t.return)&&e(t)}}function bde(e){var t=Object.create(null);return function(o){return t[o]===void 0&&(t[o]=e(o)),t[o]}}var Rde=function(t,o,s){for(var c=0,u=0;c=u,u=Bs(),c===38&&u===12&&(o[s]=1),!Xf(u);)fa();return Sm(t,Wo)},Ide=function(t,o){var s=-1,c=44;do switch(Xf(c)){case 0:c===38&&Bs()===12&&(o[s]=1),t[s]+=Rde(Wo-1,o,s);break;case 2:t[s]+=cv(c);break;case 4:if(c===44){t[++s]=Bs()===58?"&\f":"",o[s]=t[s].length;break}default:t[s]+=i_(c)}while(c=fa());return t},wde=function(t,o){return l5(Ide(c5(t),o))},DF=new WeakMap,Ode=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var o=t.value,s=t.parent,c=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&o.charCodeAt(0)!==58&&!DF.get(s))&&!c){DF.set(t,!0);for(var u=[],h=wde(o,u),f=s.props,m=0,v=0;m<h.length;m++)for(var _=0;_<f.length;_++,v++)t.props[v]=u[m]?h[m].replace(/&\f/g,f[_]):f[_]+" "+h[m]}}},Ade=function(t){if(t.type==="decl"){var o=t.value;o.charCodeAt(0)===108&&o.charCodeAt(2)===98&&(t.return="",t.value="")}};function u5(e,t){switch(ude(e,t)){case 5103:return wn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return wn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return wn+e+eE+e+ro+e+e;case 6828:case 4268:return wn+e+ro+e+e;case 6165:return wn+e+ro+"flex-"+e+e;case 5187:return wn+e+On(e,/(\w+).+(:[^]+)/,wn+"box-$1$2"+ro+"flex-$1$2")+e;case 5443:return wn+e+ro+"flex-item-"+On(e,/flex-|-self/,"")+e;case 4675:return wn+e+ro+"flex-line-pack"+On(e,/align-content|flex-|-self/,"")+e;case 5548:return wn+e+ro+On(e,"shrink","negative")+e;case 5292:return wn+e+ro+On(e,"basis","preferred-size")+e;case 6060:return wn+"box-"+On(e,"-grow","")+wn+e+ro+On(e,"grow","positive")+e;case 4554:return wn+On(e,/([^-])(transform)/g,"$1"+wn+"$2")+e;case 6187:return On(On(On(e,/(zoom-|grab)/,wn+"$1"),/(image-set)/,wn+"$1"),e,"")+e;case 5495:case 3959:return On(e,/(image-set\([^]*)/,wn+"$1$`$1");case 4968:return On(On(e,/(.+:)(flex-)?(.*)/,wn+"box-pack:$3"+ro+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+wn+e+e;case 4095:case 3583:case 4068:case 2532:return On(e,/(.+)-inline(.+)/,wn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ms(e)-1-t>6)switch(Fi(e,t+1)){case 109:if(Fi(e,t+4)!==45)break;case 102:return On(e,/(.+:)(.+)-([^]+)/,"$1"+wn+"$2-$3$1"+eE+(Fi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~aI(e,"stretch")?u5(On(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Fi(e,t+1)!==115)break;case 6444:switch(Fi(e,Ms(e)-3-(~aI(e,"!important")&&10))){case 107:return On(e,":",":"+wn)+e;case 101:return On(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+wn+(Fi(e,14)===45?"inline-":"")+"box$3$1"+wn+"$2$3$1"+ro+"$2box$3")+e}break;case 5936:switch(Fi(e,t+11)){case 114:return wn+e+ro+On(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return wn+e+ro+On(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return wn+e+ro+On(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return wn+e+ro+e+e}return e}var Nde=function(t,o,s,c){if(t.length>-1&&!t.return)switch(t.type){case l1:t.return=u5(t.value,t.length);break;case o5:return Eh([Xp(t,{value:On(t.value,"@","@"+wn)})],c);case c1:if(t.length)return hde(t.props,function(u){switch(dde(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Eh([Xp(t,{props:[On(u,/:(read-\w+)/,":"+eE+"$1")]})],c);case"::placeholder":return Eh([Xp(t,{props:[On(u,/:(plac\w+)/,":"+wn+"input-$1")]}),Xp(t,{props:[On(u,/:(plac\w+)/,":"+eE+"$1")]}),Xp(t,{props:[On(u,/:(plac\w+)/,ro+"input-$1")]})],c)}return""})}},xde=[Nde],Pde=function(t){var o=t.key;if(o==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(O){var L=O.getAttribute("data-emotion");L.indexOf(" ")!==-1&&(document.head.appendChild(O),O.setAttribute("data-s",""))})}var c=t.stylisPlugins||xde,u={},h,f=[];h=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+o+' "]'),function(O){for(var L=O.getAttribute("data-emotion").split(" "),x=1;x<L.length;x++)u[L[x]]=!0;f.push(O)});var m,v=[Ode,Ade];{var _,y=[yde,Tde(function(O){_.insert(O)})],T=Cde(v.concat(c,y)),A=function(L){return Eh(_de(L),T)};m=function(L,x,N,D){_=N,A(L?L+"{"+x.styles+"}":x.styles),D&&(I.inserted[x.name]=!0)}}var I={key:o,sheet:new ode({key:o,container:h,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:u,registered:{},insert:m};return I.sheet.hydrate(f),I},d5=dw,Dde={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},kde={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},h5={};h5[d5.ForwardRef]=Dde;h5[d5.Memo]=kde;var Lde=!0;function Mde(e,t,o){var s="";return o.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):s+=c+" "}),s}var p5=function(t,o,s){var c=t.key+"-"+o.name;(s===!1||Lde===!1)&&t.registered[c]===void 0&&(t.registered[c]=o.styles)},Ude=function(t,o,s){p5(t,o,s);var c=t.key+"-"+o.name;if(t.inserted[o.name]===void 0){var u=o;do t.insert(o===u?"."+c:"",u,t.sheet,!0),u=u.next;while(u!==void 0)}};function Fde(e){for(var t=0,o,s=0,c=e.length;c>=4;++s,c-=4)o=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,t=(o&65535)*1540483477+((o>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Vde={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},jde=/[A-Z]|^ms/g,Bde=/_EMO_([^_]+?)_([^]*?)_EMO_/g,f5=function(t){return t.charCodeAt(1)===45},kF=function(t){return t!=null&&typeof t!="boolean"},sb=bde(function(e){return f5(e)?e:e.replace(jde,"-$&").toLowerCase()}),LF=function(t,o){switch(t){case"animation":case"animationName":if(typeof o=="string")return o.replace(Bde,function(s,c,u){return Us={name:c,styles:u,next:Us},c})}return Vde[t]!==1&&!f5(t)&&typeof o=="number"&&o!==0?o+"px":o};function Jf(e,t,o){if(o==null)return"";if(o.__emotion_styles!==void 0)return o;switch(typeof o){case"boolean":return"";case"object":{if(o.anim===1)return Us={name:o.name,styles:o.styles,next:Us},o.name;if(o.styles!==void 0){var s=o.next;if(s!==void 0)for(;s!==void 0;)Us={name:s.name,styles:s.styles,next:Us},s=s.next;var c=o.styles+";";return c}return $de(e,t,o)}case"function":{if(e!==void 0){var u=Us,h=o(e);return Us=u,Jf(e,t,h)}break}}if(t==null)return o;var f=t[o];return f!==void 0?f:o}function $de(e,t,o){var s="";if(Array.isArray(o))for(var c=0;c<o.length;c++)s+=Jf(e,t,o[c])+";";else for(var u in o){var h=o[u];if(typeof h!="object")t!=null&&t[h]!==void 0?s+=u+"{"+t[h]+"}":kF(h)&&(s+=sb(u)+":"+LF(u,h)+";");else if(Array.isArray(h)&&typeof h[0]=="string"&&(t==null||t[h[0]]===void 0))for(var f=0;f<h.length;f++)kF(h[f])&&(s+=sb(u)+":"+LF(u,h[f])+";");else{var m=Jf(e,t,h);switch(u){case"animation":case"animationName":{s+=sb(u)+":"+m+";";break}default:s+=u+"{"+m+"}"}}}return s}var MF=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Us,m5=function(t,o,s){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var c=!0,u="";Us=void 0;var h=t[0];h==null||h.raw===void 0?(c=!1,u+=Jf(s,o,h)):u+=h[0];for(var f=1;f<t.length;f++)u+=Jf(s,o,t[f]),c&&(u+=h[f]);MF.lastIndex=0;for(var m="",v;(v=MF.exec(u))!==null;)m+="-"+v[1];var _=Fde(u)+m;return{name:_,styles:u,next:Us}},Hde=function(t){return t()},Wde=_h["useInsertionEffect"]?_h["useInsertionEffect"]:!1,Gde=Wde||Hde,d1={}.hasOwnProperty,g5=b.createContext(typeof HTMLElement<"u"?Pde({key:"css"}):null);g5.Provider;var zde=function(t){return b.forwardRef(function(o,s){var c=b.useContext(g5);return t(o,c,s)})},Kde=b.createContext({}),cI="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Yde=function(t,o){var s={};for(var c in o)d1.call(o,c)&&(s[c]=o[c]);return s[cI]=t,s},qde=function(t){var o=t.cache,s=t.serialized,c=t.isStringTag;return p5(o,s,c),Gde(function(){return Ude(o,s,c)}),null},Xde=zde(function(e,t,o){var s=e.css;typeof s=="string"&&t.registered[s]!==void 0&&(s=t.registered[s]);var c=e[cI],u=[s],h="";typeof e.className=="string"?h=Mde(t.registered,u,e.className):e.className!=null&&(h=e.className+" ");var f=m5(u,void 0,b.useContext(Kde));h+=t.key+"-"+f.name;var m={};for(var v in e)d1.call(e,v)&&v!=="css"&&v!==cI&&(m[v]=e[v]);return m.ref=o,m.className=h,b.createElement(b.Fragment,null,b.createElement(qde,{cache:t,serialized:f,isStringTag:typeof c=="string"}),b.createElement(c,m))}),Jde=Xde,Ct=function(t,o){var s=arguments;if(o==null||!d1.call(o,"css"))return b.createElement.apply(void 0,s);var c=s.length,u=new Array(c);u[0]=Jde,u[1]=Yde(t,o);for(var h=2;h<c;h++)u[h]=s[h];return b.createElement.apply(null,u)};function h1(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return m5(t)}var Qde=function(){var t=h1.apply(void 0,arguments),o="animation-"+t.name;return{name:o,styles:"@keyframes "+o+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function Zde(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function ehe(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}const the=["top","right","bottom","left"];the.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);function fs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function v5(e){return fs(e).getComputedStyle(e)}function E5(e){return e instanceof fs(e).Node}function _5(e){return E5(e)?(e.nodeName||"").toLowerCase():"#document"}function p1(e){return e instanceof fs(e).HTMLElement}function UF(e){return typeof ShadowRoot<"u"&&(e instanceof fs(e).ShadowRoot||e instanceof ShadowRoot)}function S5(e){const{overflow:t,overflowX:o,overflowY:s,display:c}=v5(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+o)&&!["inline","contents"].includes(c)}function nhe(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function rhe(e){return["html","body","#document"].includes(_5(e))}const ihe=Math.min,ohe=Math.max,tE=Math.round,Ug=Math.floor,nE=e=>({x:e,y:e});function ahe(e){const t=v5(e);let o=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const c=p1(e),u=c?e.offsetWidth:o,h=c?e.offsetHeight:s,f=tE(o)!==u||tE(s)!==h;return f&&(o=u,s=h),{width:o,height:s,$:f}}function lI(e){return e instanceof fs(e).Element}function f1(e){return lI(e)?e:e.contextElement}function cb(e){const t=f1(e);if(!p1(t))return nE(1);const o=t.getBoundingClientRect(),{width:s,height:c,$:u}=ahe(t);let h=(u?tE(o.width):o.width)/s,f=(u?tE(o.height):o.height)/c;return h&&Number.isFinite(h)||(h=1),f&&Number.isFinite(f)||(f=1),{x:h,y:f}}const she=nE(0);function che(e){const t=fs(e);return nhe()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:she}function FF(e,t,o,s){t===void 0&&(t=!1),o===void 0&&(o=!1);const c=e.getBoundingClientRect(),u=f1(e);let h=nE(1);t&&(s?lI(s)&&(h=cb(s)):h=cb(e));const f=function(T,A,I){return A===void 0&&(A=!1),!(!I||A&&I!==fs(T))&&A}(u,o,s)?che(u):nE(0);let m=(c.left+f.x)/h.x,v=(c.top+f.y)/h.y,_=c.width/h.x,y=c.height/h.y;if(u){const T=fs(u),A=s&&lI(s)?fs(s):s;let I=T.frameElement;for(;I&&s&&A!==T;){const O=cb(I),L=I.getBoundingClientRect(),x=getComputedStyle(I),N=L.left+(I.clientLeft+parseFloat(x.paddingLeft))*O.x,D=L.top+(I.clientTop+parseFloat(x.paddingTop))*O.y;m*=O.x,v*=O.y,_*=O.x,y*=O.y,m+=N,v+=D,I=fs(I).frameElement}}return ehe({width:_,height:y,x:m,y:v})}function y5(e){return((E5(e)?e.ownerDocument:e.document)||window.document).documentElement}function lhe(e){if(_5(e)==="html")return e;const t=e.assignedSlot||e.parentNode||UF(e)&&e.host||y5(e);return UF(t)?t.host:t}function C5(e){const t=lhe(e);return rhe(t)?e.ownerDocument?e.ownerDocument.body:e.body:p1(t)&&S5(t)?t:C5(t)}function uI(e,t){var o;t===void 0&&(t=[]);const s=C5(e),c=s===((o=e.ownerDocument)==null?void 0:o.body),u=fs(s);return c?t.concat(u,u.visualViewport||[],S5(s)?s:[]):t.concat(s,uI(s))}function uhe(e,t,o,s){s===void 0&&(s={});const{ancestorScroll:c=!0,ancestorResize:u=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:m=!1}=s,v=f1(e),_=c||u?[...v?uI(v):[],...uI(t)]:[];_.forEach(L=>{c&&L.addEventListener("scroll",o,{passive:!0}),u&&L.addEventListener("resize",o)});const y=v&&f?function(L,x){let N,D=null;const U=y5(L);function V(){clearTimeout(N),D&&D.disconnect(),D=null}return function j(B,Y){B===void 0&&(B=!1),Y===void 0&&(Y=1),V();const{left:ee,top:H,width:Z,height:J}=L.getBoundingClientRect();if(B||x(),!Z||!J)return;const X={rootMargin:-Ug(H)+"px "+-Ug(U.clientWidth-(ee+Z))+"px "+-Ug(U.clientHeight-(H+J))+"px "+-Ug(ee)+"px",threshold:ohe(0,ihe(1,Y))||1};let ne=!0;function ie(ae){const pe=ae[0].intersectionRatio;if(pe!==Y){if(!ne)return j();pe?j(!1,pe):N=setTimeout(()=>{j(!1,1e-7)},100)}ne=!1}try{D=new IntersectionObserver(ie,{...X,root:U.ownerDocument})}catch{D=new IntersectionObserver(ie,X)}D.observe(L)}(!0),V}(v,o):null;let T,A=-1,I=null;h&&(I=new ResizeObserver(L=>{let[x]=L;x&&x.target===v&&I&&(I.unobserve(t),cancelAnimationFrame(A),A=requestAnimationFrame(()=>{I&&I.observe(t)})),o()}),v&&!m&&I.observe(v),I.observe(t));let O=m?FF(e):null;return m&&function L(){const x=FF(e);!O||x.x===O.x&&x.y===O.y&&x.width===O.width&&x.height===O.height||o(),O=x,T=requestAnimationFrame(L)}(),o(),()=>{_.forEach(L=>{c&&L.removeEventListener("scroll",o),u&&L.removeEventListener("resize",o)}),y&&y(),I&&I.disconnect(),I=null,m&&cancelAnimationFrame(T)}}var dI=b.useLayoutEffect,dhe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],rE=function(){};function hhe(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function phe(e,t){for(var o=arguments.length,s=new Array(o>2?o-2:0),c=2;c<o;c++)s[c-2]=arguments[c];var u=[].concat(s);if(t&&e)for(var h in t)t.hasOwnProperty(h)&&t[h]&&u.push("".concat(hhe(e,h)));return u.filter(function(f){return f}).map(function(f){return String(f).trim()}).join(" ")}var VF=function(t){return Che(t)?t.filter(Boolean):An(t)==="object"&&t!==null?[t]:[]},T5=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var o=fn(t,dhe);return ge({},o)},Lr=function(t,o,s){var c=t.cx,u=t.getStyles,h=t.getClassNames,f=t.className;return{css:u(o,t),className:c(s??{},h(o,t),f)}};function s_(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function fhe(e){return s_(e)?window.innerHeight:e.clientHeight}function b5(e){return s_(e)?window.pageYOffset:e.scrollTop}function iE(e,t){if(s_(e)){window.scrollTo(0,t);return}e.scrollTop=t}function mhe(e){var t=getComputedStyle(e),o=t.position==="absolute",s=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var c=e;c=c.parentElement;)if(t=getComputedStyle(c),!(o&&t.position==="static")&&s.test(t.overflow+t.overflowY+t.overflowX))return c;return document.documentElement}function ghe(e,t,o,s){return o*((e=e/s-1)*e*e+1)+t}function Fg(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:rE,c=b5(e),u=t-c,h=10,f=0;function m(){f+=h;var v=ghe(f,c,u,o);iE(e,v),f<o?window.requestAnimationFrame(m):s(e)}m()}function jF(e,t){var o=e.getBoundingClientRect(),s=t.getBoundingClientRect(),c=t.offsetHeight/3;s.bottom+c>o.bottom?iE(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+c,e.scrollHeight)):s.top-c<o.top&&iE(e,Math.max(t.offsetTop-c,0))}function vhe(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function BF(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Ehe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var R5=!1,_he={get passive(){return R5=!0}},Vg=typeof window<"u"?window:{};Vg.addEventListener&&Vg.removeEventListener&&(Vg.addEventListener("p",rE,_he),Vg.removeEventListener("p",rE,!1));var She=R5;function yhe(e){return e!=null}function Che(e){return Array.isArray(e)}function jg(e,t,o){return e?t:o}var The=function(t){for(var o=arguments.length,s=new Array(o>1?o-1:0),c=1;c<o;c++)s[c-1]=arguments[c];var u=Object.entries(t).filter(function(h){var f=De(h,1),m=f[0];return!s.includes(m)});return u.reduce(function(h,f){var m=De(f,2),v=m[0],_=m[1];return h[v]=_,h},{})};function bhe(e){var t=e.maxHeight,o=e.menuEl,s=e.minHeight,c=e.placement,u=e.shouldScroll,h=e.isFixedPosition,f=e.controlHeight,m=mhe(o),v={placement:"bottom",maxHeight:t};if(!o||!o.offsetParent)return v;var _=m.getBoundingClientRect(),y=_.height,T=o.getBoundingClientRect(),A=T.bottom,I=T.height,O=T.top,L=o.offsetParent.getBoundingClientRect(),x=L.top,N=h?window.innerHeight:fhe(m),D=b5(m),U=parseInt(getComputedStyle(o).marginBottom,10),V=parseInt(getComputedStyle(o).marginTop,10),j=x-V,B=N-O,Y=j+D,ee=y-D-O,H=A-N+D+U,Z=D+O-V,J=160;switch(c){case"auto":case"bottom":if(B>=I)return{placement:"bottom",maxHeight:t};if(ee>=I&&!h)return u&&Fg(m,H,J),{placement:"bottom",maxHeight:t};if(!h&&ee>=s||h&&B>=s){u&&Fg(m,H,J);var X=h?B-U:ee-U;return{placement:"bottom",maxHeight:X}}if(c==="auto"||h){var ne=t,ie=h?j:Y;return ie>=s&&(ne=Math.min(ie-U-f,t)),{placement:"top",maxHeight:ne}}if(c==="bottom")return u&&iE(m,H),{placement:"bottom",maxHeight:t};break;case"top":if(j>=I)return{placement:"top",maxHeight:t};if(Y>=I&&!h)return u&&Fg(m,Z,J),{placement:"top",maxHeight:t};if(!h&&Y>=s||h&&j>=s){var ae=t;return(!h&&Y>=s||h&&j>=s)&&(ae=h?j-V:Y-V),u&&Fg(m,Z,J),{placement:"top",maxHeight:ae}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(c,'".'))}return v}function Rhe(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var I5=function(t){return t==="auto"?"bottom":t},Ihe=function(t,o){var s,c=t.placement,u=t.theme,h=u.borderRadius,f=u.spacing,m=u.colors;return ge((s={label:"menu"},Qe(s,Rhe(c),"100%"),Qe(s,"position","absolute"),Qe(s,"width","100%"),Qe(s,"zIndex",1),s),o?{}:{backgroundColor:m.neutral0,borderRadius:h,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:f.menuGutter,marginTop:f.menuGutter})},w5=b.createContext(null),whe=function(t){var o=t.children,s=t.minMenuHeight,c=t.maxMenuHeight,u=t.menuPlacement,h=t.menuPosition,f=t.menuShouldScrollIntoView,m=t.theme,v=b.useContext(w5)||{},_=v.setPortalPlacement,y=b.useRef(null),T=b.useState(c),A=De(T,2),I=A[0],O=A[1],L=b.useState(null),x=De(L,2),N=x[0],D=x[1],U=m.spacing.controlHeight;return dI(function(){var V=y.current;if(V){var j=h==="fixed",B=f&&!j,Y=bhe({maxHeight:c,menuEl:V,minHeight:s,placement:u,shouldScroll:B,isFixedPosition:j,controlHeight:U});O(Y.maxHeight),D(Y.placement),_==null||_(Y.placement)}},[c,u,h,f,s,_,U]),o({ref:y,placerProps:ge(ge({},t),{},{placement:N||I5(u),maxHeight:I})})},Ohe=function(t){var o=t.children,s=t.innerRef,c=t.innerProps;return Ct("div",Ve({},Lr(t,"menu",{menu:!0}),{ref:s},c),o)},Ahe=Ohe,Nhe=function(t,o){var s=t.maxHeight,c=t.theme.spacing.baseUnit;return ge({maxHeight:s,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},o?{}:{paddingBottom:c,paddingTop:c})},xhe=function(t){var o=t.children,s=t.innerProps,c=t.innerRef,u=t.isMulti;return Ct("div",Ve({},Lr(t,"menuList",{"menu-list":!0,"menu-list--is-multi":u}),{ref:c},s),o)},O5=function(t,o){var s=t.theme,c=s.spacing.baseUnit,u=s.colors;return ge({textAlign:"center"},o?{}:{color:u.neutral40,padding:"".concat(c*2,"px ").concat(c*3,"px")})},Phe=O5,Dhe=O5,A5=function(t){var o=t.children,s=t.innerProps;return Ct("div",Ve({},Lr(t,"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),o)};A5.defaultProps={children:"No options"};var N5=function(t){var o=t.children,s=t.innerProps;return Ct("div",Ve({},Lr(t,"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),o)};N5.defaultProps={children:"Loading..."};var khe=function(t){var o=t.rect,s=t.offset,c=t.position;return{left:o.left,position:c,top:s,width:o.width,zIndex:1}},Lhe=function(t){var o=t.appendTo,s=t.children,c=t.controlElement,u=t.innerProps,h=t.menuPlacement,f=t.menuPosition,m=b.useRef(null),v=b.useRef(null),_=b.useState(I5(h)),y=De(_,2),T=y[0],A=y[1],I=b.useMemo(function(){return{setPortalPlacement:A}},[]),O=b.useState(null),L=De(O,2),x=L[0],N=L[1],D=b.useCallback(function(){if(c){var B=vhe(c),Y=f==="fixed"?0:window.pageYOffset,ee=B[T]+Y;(ee!==(x==null?void 0:x.offset)||B.left!==(x==null?void 0:x.rect.left)||B.width!==(x==null?void 0:x.rect.width))&&N({offset:ee,rect:B})}},[c,f,T,x==null?void 0:x.offset,x==null?void 0:x.rect.left,x==null?void 0:x.rect.width]);dI(function(){D()},[D]);var U=b.useCallback(function(){typeof v.current=="function"&&(v.current(),v.current=null),c&&m.current&&(v.current=uhe(c,m.current,D,{elementResize:"ResizeObserver"in window}))},[c,D]);dI(function(){U()},[U]);var V=b.useCallback(function(B){m.current=B,U()},[U]);if(!o&&f!=="fixed"||!x)return null;var j=Ct("div",Ve({ref:V},Lr(ge(ge({},t),{},{offset:x.offset,position:f,rect:x.rect}),"menuPortal",{"menu-portal":!0}),u),s);return Ct(w5.Provider,{value:I},o?Du.createPortal(j,o):j)},Mhe=function(t){var o=t.isDisabled,s=t.isRtl;return{label:"container",direction:s?"rtl":void 0,pointerEvents:o?"none":void 0,position:"relative"}},Uhe=function(t){var o=t.children,s=t.innerProps,c=t.isDisabled,u=t.isRtl;return Ct("div",Ve({},Lr(t,"container",{"--is-disabled":c,"--is-rtl":u}),s),o)},Fhe=function(t,o){var s=t.theme.spacing,c=t.isMulti,u=t.hasValue,h=t.selectProps.controlShouldRenderValue;return ge({alignItems:"center",display:c&&u&&h?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},o?{}:{padding:"".concat(s.baseUnit/2,"px ").concat(s.baseUnit*2,"px")})},Vhe=function(t){var o=t.children,s=t.innerProps,c=t.isMulti,u=t.hasValue;return Ct("div",Ve({},Lr(t,"valueContainer",{"value-container":!0,"value-container--is-multi":c,"value-container--has-value":u}),s),o)},jhe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Bhe=function(t){var o=t.children,s=t.innerProps;return Ct("div",Ve({},Lr(t,"indicatorsContainer",{indicators:!0}),s),o)},$F,$he=["size"],Hhe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},x5=function(t){var o=t.size,s=fn(t,$he);return Ct("svg",Ve({height:o,width:o,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Hhe},s))},m1=function(t){return Ct(x5,Ve({size:20},t),Ct("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},P5=function(t){return Ct(x5,Ve({size:20},t),Ct("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},D5=function(t,o){var s=t.isFocused,c=t.theme,u=c.spacing.baseUnit,h=c.colors;return ge({label:"indicatorContainer",display:"flex",transition:"color 150ms"},o?{}:{color:s?h.neutral60:h.neutral20,padding:u*2,":hover":{color:s?h.neutral80:h.neutral40}})},Whe=D5,Ghe=function(t){var o=t.children,s=t.innerProps;return Ct("div",Ve({},Lr(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),s),o||Ct(P5,null))},zhe=D5,Khe=function(t){var o=t.children,s=t.innerProps;return Ct("div",Ve({},Lr(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),s),o||Ct(m1,null))},Yhe=function(t,o){var s=t.isDisabled,c=t.theme,u=c.spacing.baseUnit,h=c.colors;return ge({label:"indicatorSeparator",alignSelf:"stretch",width:1},o?{}:{backgroundColor:s?h.neutral10:h.neutral20,marginBottom:u*2,marginTop:u*2})},qhe=function(t){var o=t.innerProps;return Ct("span",Ve({},o,Lr(t,"indicatorSeparator",{"indicator-separator":!0})))},Xhe=Qde($F||($F=Zde([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),Jhe=function(t,o){var s=t.isFocused,c=t.size,u=t.theme,h=u.colors,f=u.spacing.baseUnit;return ge({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:c,lineHeight:1,marginRight:c,textAlign:"center",verticalAlign:"middle"},o?{}:{color:s?h.neutral60:h.neutral20,padding:f*2})},lb=function(t){var o=t.delay,s=t.offset;return Ct("span",{css:h1({animation:"".concat(Xhe," 1s ease-in-out ").concat(o,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:s?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},k5=function(t){var o=t.innerProps,s=t.isRtl;return Ct("div",Ve({},Lr(t,"loadingIndicator",{indicator:!0,"loading-indicator":!0}),o),Ct(lb,{delay:0,offset:s}),Ct(lb,{delay:160,offset:!0}),Ct(lb,{delay:320,offset:!s}))};k5.defaultProps={size:4};var Qhe=function(t,o){var s=t.isDisabled,c=t.isFocused,u=t.theme,h=u.colors,f=u.borderRadius,m=u.spacing;return ge({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:m.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},o?{}:{backgroundColor:s?h.neutral5:h.neutral0,borderColor:s?h.neutral10:c?h.primary:h.neutral20,borderRadius:f,borderStyle:"solid",borderWidth:1,boxShadow:c?"0 0 0 1px ".concat(h.primary):void 0,"&:hover":{borderColor:c?h.primary:h.neutral30}})},Zhe=function(t){var o=t.children,s=t.isDisabled,c=t.isFocused,u=t.innerRef,h=t.innerProps,f=t.menuIsOpen;return Ct("div",Ve({ref:u},Lr(t,"control",{control:!0,"control--is-disabled":s,"control--is-focused":c,"control--menu-is-open":f}),h),o)},epe=Zhe,tpe=["data"],npe=function(t,o){var s=t.theme.spacing;return o?{}:{paddingBottom:s.baseUnit*2,paddingTop:s.baseUnit*2}},rpe=function(t){var o=t.children,s=t.cx,c=t.getStyles,u=t.getClassNames,h=t.Heading,f=t.headingProps,m=t.innerProps,v=t.label,_=t.theme,y=t.selectProps;return Ct("div",Ve({},Lr(t,"group",{group:!0}),m),Ct(h,Ve({},f,{selectProps:y,theme:_,getStyles:c,getClassNames:u,cx:s}),v),Ct("div",null,o))},ipe=function(t,o){var s=t.theme,c=s.colors,u=s.spacing;return ge({label:"group",cursor:"default",display:"block"},o?{}:{color:c.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:u.baseUnit*3,paddingRight:u.baseUnit*3,textTransform:"uppercase"})},ope=function(t){var o=T5(t);o.data;var s=fn(o,tpe);return Ct("div",Ve({},Lr(t,"groupHeading",{"group-heading":!0}),s))},ape=rpe,spe=["innerRef","isDisabled","isHidden","inputClassName"],cpe=function(t,o){var s=t.isDisabled,c=t.value,u=t.theme,h=u.spacing,f=u.colors;return ge(ge({visibility:s?"hidden":"visible",transform:c?"translateZ(0)":""},lpe),o?{}:{margin:h.baseUnit/2,paddingBottom:h.baseUnit/2,paddingTop:h.baseUnit/2,color:f.neutral80})},L5={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},lpe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":ge({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},L5)},upe=function(t){return ge({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},L5)},dpe=function(t){var o=t.cx,s=t.value,c=T5(t),u=c.innerRef,h=c.isDisabled,f=c.isHidden,m=c.inputClassName,v=fn(c,spe);return Ct("div",Ve({},Lr(t,"input",{"input-container":!0}),{"data-value":s||""}),Ct("input",Ve({className:o({input:!0},m),ref:u,style:upe(f),disabled:h},v)))},hpe=dpe,ppe=function(t,o){var s=t.theme,c=s.spacing,u=s.borderRadius,h=s.colors;return ge({label:"multiValue",display:"flex",minWidth:0},o?{}:{backgroundColor:h.neutral10,borderRadius:u/2,margin:c.baseUnit/2})},fpe=function(t,o){var s=t.theme,c=s.borderRadius,u=s.colors,h=t.cropWithEllipsis;return ge({overflow:"hidden",textOverflow:h||h===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},o?{}:{borderRadius:c/2,color:u.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},mpe=function(t,o){var s=t.theme,c=s.spacing,u=s.borderRadius,h=s.colors,f=t.isFocused;return ge({alignItems:"center",display:"flex"},o?{}:{borderRadius:u/2,backgroundColor:f?h.dangerLight:void 0,paddingLeft:c.baseUnit,paddingRight:c.baseUnit,":hover":{backgroundColor:h.dangerLight,color:h.danger}})},M5=function(t){var o=t.children,s=t.innerProps;return Ct("div",s,o)},gpe=M5,vpe=M5;function Epe(e){var t=e.children,o=e.innerProps;return Ct("div",Ve({role:"button"},o),t||Ct(m1,{size:14}))}var _pe=function(t){var o=t.children,s=t.components,c=t.data,u=t.innerProps,h=t.isDisabled,f=t.removeProps,m=t.selectProps,v=s.Container,_=s.Label,y=s.Remove;return Ct(v,{data:c,innerProps:ge(ge({},Lr(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":h})),u),selectProps:m},Ct(_,{data:c,innerProps:ge({},Lr(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:m},o),Ct(y,{data:c,innerProps:ge(ge({},Lr(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(o||"option")},f),selectProps:m}))},Spe=_pe,ype=function(t,o){var s=t.isDisabled,c=t.isFocused,u=t.isSelected,h=t.theme,f=h.spacing,m=h.colors;return ge({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},o?{}:{backgroundColor:u?m.primary:c?m.primary25:"transparent",color:s?m.neutral20:u?m.neutral0:"inherit",padding:"".concat(f.baseUnit*2,"px ").concat(f.baseUnit*3,"px"),":active":{backgroundColor:s?void 0:u?m.primary:m.primary50}})},Cpe=function(t){var o=t.children,s=t.isDisabled,c=t.isFocused,u=t.isSelected,h=t.innerRef,f=t.innerProps;return Ct("div",Ve({},Lr(t,"option",{option:!0,"option--is-disabled":s,"option--is-focused":c,"option--is-selected":u}),{ref:h,"aria-disabled":s},f),o)},Tpe=Cpe,bpe=function(t,o){var s=t.theme,c=s.spacing,u=s.colors;return ge({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},o?{}:{color:u.neutral50,marginLeft:c.baseUnit/2,marginRight:c.baseUnit/2})},Rpe=function(t){var o=t.children,s=t.innerProps;return Ct("div",Ve({},Lr(t,"placeholder",{placeholder:!0}),s),o)},Ipe=Rpe,wpe=function(t,o){var s=t.isDisabled,c=t.theme,u=c.spacing,h=c.colors;return ge({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},o?{}:{color:s?h.neutral40:h.neutral80,marginLeft:u.baseUnit/2,marginRight:u.baseUnit/2})},Ope=function(t){var o=t.children,s=t.isDisabled,c=t.innerProps;return Ct("div",Ve({},Lr(t,"singleValue",{"single-value":!0,"single-value--is-disabled":s}),c),o)},Ape=Ope,Npe={ClearIndicator:Khe,Control:epe,DropdownIndicator:Ghe,DownChevron:P5,CrossIcon:m1,Group:ape,GroupHeading:ope,IndicatorsContainer:Bhe,IndicatorSeparator:qhe,Input:hpe,LoadingIndicator:k5,Menu:Ahe,MenuList:xhe,MenuPortal:Lhe,LoadingMessage:N5,NoOptionsMessage:A5,MultiValue:Spe,MultiValueContainer:gpe,MultiValueLabel:vpe,MultiValueRemove:Epe,Option:Tpe,Placeholder:Ipe,SelectContainer:Uhe,SingleValue:Ape,ValueContainer:Vhe},xpe=function(t){return ge(ge({},Npe),t.components)},HF=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Ppe(e,t){return!!(e===t||HF(e)&&HF(t))}function Dpe(e,t){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(!Ppe(e[o],t[o]))return!1;return!0}function kpe(e,t){t===void 0&&(t=Dpe);var o=null;function s(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];if(o&&o.lastThis===this&&t(c,o.lastArgs))return o.lastResult;var h=e.apply(this,c);return o={lastResult:h,lastArgs:c,lastThis:this},h}return s.clear=function(){o=null},s}var Lpe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Mpe=function(t){return Ct("span",Ve({css:Lpe},t))},WF=Mpe,Upe={guidance:function(t){var o=t.isSearchable,s=t.isMulti,c=t.isDisabled,u=t.tabSelectsValue,h=t.context;switch(h){case"menu":return"Use Up and Down to choose options".concat(c?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(u?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(t["aria-label"]||"Select"," is focused ").concat(o?",type to refine list":"",", press Down to open the menu, ").concat(s?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var o=t.action,s=t.label,c=s===void 0?"":s,u=t.labels,h=t.isDisabled;switch(o){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(c,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(u.length>1?"s":""," ").concat(u.join(","),", selected.");case"select-option":return h?"option ".concat(c," is disabled. Select another option."):"option ".concat(c,", selected.");default:return""}},onFocus:function(t){var o=t.context,s=t.focused,c=t.options,u=t.label,h=u===void 0?"":u,f=t.selectValue,m=t.isDisabled,v=t.isSelected,_=function(I,O){return I&&I.length?"".concat(I.indexOf(O)+1," of ").concat(I.length):""};if(o==="value"&&f)return"value ".concat(h," focused, ").concat(_(f,s),".");if(o==="menu"){var y=m?" disabled":"",T="".concat(v?"selected":"focused").concat(y);return"option ".concat(h," ").concat(T,", ").concat(_(c,s),".")}return""},onFilter:function(t){var o=t.inputValue,s=t.resultsMessage;return"".concat(s).concat(o?" for search term "+o:"",".")}},Fpe=function(t){var o=t.ariaSelection,s=t.focusedOption,c=t.focusedValue,u=t.focusableOptions,h=t.isFocused,f=t.selectValue,m=t.selectProps,v=t.id,_=m.ariaLiveMessages,y=m.getOptionLabel,T=m.inputValue,A=m.isMulti,I=m.isOptionDisabled,O=m.isSearchable,L=m.menuIsOpen,x=m.options,N=m.screenReaderStatus,D=m.tabSelectsValue,U=m["aria-label"],V=m["aria-live"],j=b.useMemo(function(){return ge(ge({},Upe),_||{})},[_]),B=b.useMemo(function(){var ne="";if(o&&j.onChange){var ie=o.option,ae=o.options,pe=o.removedValue,ue=o.removedValues,Se=o.value,Ee=function(it){return Array.isArray(it)?null:it},le=pe||ie||Ee(Se),se=le?y(le):"",de=ae||ue||void 0,he=de?de.map(y):[],xe=ge({isDisabled:le&&I(le,f),label:se,labels:he},o);ne=j.onChange(xe)}return ne},[o,j,I,f,y]),Y=b.useMemo(function(){var ne="",ie=s||c,ae=!!(s&&f&&f.includes(s));if(ie&&j.onFocus){var pe={focused:ie,label:y(ie),isDisabled:I(ie,f),isSelected:ae,options:u,context:ie===s?"menu":"value",selectValue:f};ne=j.onFocus(pe)}return ne},[s,c,y,I,j,u,f]),ee=b.useMemo(function(){var ne="";if(L&&x.length&&j.onFilter){var ie=N({count:u.length});ne=j.onFilter({inputValue:T,resultsMessage:ie})}return ne},[u,T,L,j,x,N]),H=b.useMemo(function(){var ne="";if(j.guidance){var ie=c?"value":L?"menu":"input";ne=j.guidance({"aria-label":U,context:ie,isDisabled:s&&I(s,f),isMulti:A,isSearchable:O,tabSelectsValue:D})}return ne},[U,s,c,A,I,O,L,j,f,D]),Z="".concat(Y," ").concat(ee," ").concat(H),J=Ct(b.Fragment,null,Ct("span",{id:"aria-selection"},B),Ct("span",{id:"aria-context"},Z)),X=(o==null?void 0:o.action)==="initial-input-focus";return Ct(b.Fragment,null,Ct(WF,{id:v},X&&J),Ct(WF,{"aria-live":V,"aria-atomic":"false","aria-relevant":"additions text"},h&&!X&&J))},Vpe=Fpe,hI=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],jpe=new RegExp("["+hI.map(function(e){return e.letters}).join("")+"]","g"),U5={};for(var ub=0;ub<hI.length;ub++)for(var db=hI[ub],hb=0;hb<db.letters.length;hb++)U5[db.letters[hb]]=db.base;var F5=function(t){return t.replace(jpe,function(o){return U5[o]})},Bpe=kpe(F5),GF=function(t){return t.replace(/^\s+|\s+$/g,"")},$pe=function(t){return"".concat(t.label," ").concat(t.value)},Hpe=function(t){return function(o,s){if(o.data.__isNew__)return!0;var c=ge({ignoreCase:!0,ignoreAccents:!0,stringify:$pe,trim:!0,matchFrom:"any"},t),u=c.ignoreCase,h=c.ignoreAccents,f=c.stringify,m=c.trim,v=c.matchFrom,_=m?GF(s):s,y=m?GF(f(o)):f(o);return u&&(_=_.toLowerCase(),y=y.toLowerCase()),h&&(_=Bpe(_),y=F5(y)),v==="start"?y.substr(0,_.length)===_:y.indexOf(_)>-1}},Wpe=["innerRef"];function Gpe(e){var t=e.innerRef,o=fn(e,Wpe),s=The(o,"onExited","in","enter","exit","appear");return Ct("input",Ve({ref:t},s,{css:h1({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var zpe=function(t){t.preventDefault(),t.stopPropagation()};function Kpe(e){var t=e.isEnabled,o=e.onBottomArrive,s=e.onBottomLeave,c=e.onTopArrive,u=e.onTopLeave,h=b.useRef(!1),f=b.useRef(!1),m=b.useRef(0),v=b.useRef(null),_=b.useCallback(function(L,x){if(v.current!==null){var N=v.current,D=N.scrollTop,U=N.scrollHeight,V=N.clientHeight,j=v.current,B=x>0,Y=U-V-D,ee=!1;Y>x&&h.current&&(s&&s(L),h.current=!1),B&&f.current&&(u&&u(L),f.current=!1),B&&x>Y?(o&&!h.current&&o(L),j.scrollTop=U,ee=!0,h.current=!0):!B&&-x>D&&(c&&!f.current&&c(L),j.scrollTop=0,ee=!0,f.current=!0),ee&&zpe(L)}},[o,s,c,u]),y=b.useCallback(function(L){_(L,L.deltaY)},[_]),T=b.useCallback(function(L){m.current=L.changedTouches[0].clientY},[]),A=b.useCallback(function(L){var x=m.current-L.changedTouches[0].clientY;_(L,x)},[_]),I=b.useCallback(function(L){if(L){var x=She?{passive:!1}:!1;L.addEventListener("wheel",y,x),L.addEventListener("touchstart",T,x),L.addEventListener("touchmove",A,x)}},[A,T,y]),O=b.useCallback(function(L){L&&(L.removeEventListener("wheel",y,!1),L.removeEventListener("touchstart",T,!1),L.removeEventListener("touchmove",A,!1))},[A,T,y]);return b.useEffect(function(){if(t){var L=v.current;return I(L),function(){O(L)}}},[t,I,O]),function(L){v.current=L}}var zF=["boxSizing","height","overflow","paddingRight","position"],KF={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function YF(e){e.preventDefault()}function qF(e){e.stopPropagation()}function XF(){var e=this.scrollTop,t=this.scrollHeight,o=e+this.offsetHeight;e===0?this.scrollTop=1:o===t&&(this.scrollTop=e-1)}function JF(){return"ontouchstart"in window||navigator.maxTouchPoints}var QF=!!(typeof window<"u"&&window.document&&window.document.createElement),Jp=0,zd={capture:!1,passive:!1};function Ype(e){var t=e.isEnabled,o=e.accountForScrollbars,s=o===void 0?!0:o,c=b.useRef({}),u=b.useRef(null),h=b.useCallback(function(m){if(QF){var v=document.body,_=v&&v.style;if(s&&zF.forEach(function(I){var O=_&&_[I];c.current[I]=O}),s&&Jp<1){var y=parseInt(c.current.paddingRight,10)||0,T=document.body?document.body.clientWidth:0,A=window.innerWidth-T+y||0;Object.keys(KF).forEach(function(I){var O=KF[I];_&&(_[I]=O)}),_&&(_.paddingRight="".concat(A,"px"))}v&&JF()&&(v.addEventListener("touchmove",YF,zd),m&&(m.addEventListener("touchstart",XF,zd),m.addEventListener("touchmove",qF,zd))),Jp+=1}},[s]),f=b.useCallback(function(m){if(QF){var v=document.body,_=v&&v.style;Jp=Math.max(Jp-1,0),s&&Jp<1&&zF.forEach(function(y){var T=c.current[y];_&&(_[y]=T)}),v&&JF()&&(v.removeEventListener("touchmove",YF,zd),m&&(m.removeEventListener("touchstart",XF,zd),m.removeEventListener("touchmove",qF,zd)))}},[s]);return b.useEffect(function(){if(t){var m=u.current;return h(m),function(){f(m)}}},[t,h,f]),function(m){u.current=m}}var qpe=function(){return document.activeElement&&document.activeElement.blur()},Xpe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Jpe(e){var t=e.children,o=e.lockEnabled,s=e.captureEnabled,c=s===void 0?!0:s,u=e.onBottomArrive,h=e.onBottomLeave,f=e.onTopArrive,m=e.onTopLeave,v=Kpe({isEnabled:c,onBottomArrive:u,onBottomLeave:h,onTopArrive:f,onTopLeave:m}),_=Ype({isEnabled:o}),y=function(A){v(A),_(A)};return Ct(b.Fragment,null,o&&Ct("div",{onClick:qpe,css:Xpe}),t(y))}var Qpe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Zpe=function(t){var o=t.name,s=t.onFocus;return Ct("input",{required:!0,name:o,tabIndex:-1,"aria-hidden":"true",onFocus:s,css:Qpe,value:"",onChange:function(){}})},efe=Zpe,tfe=function(t){return t.label},nfe=function(t){return t.label},rfe=function(t){return t.value},ife=function(t){return!!t.isDisabled},ofe={clearIndicator:zhe,container:Mhe,control:Qhe,dropdownIndicator:Whe,group:npe,groupHeading:ipe,indicatorsContainer:jhe,indicatorSeparator:Yhe,input:cpe,loadingIndicator:Jhe,loadingMessage:Dhe,menu:Ihe,menuList:Nhe,menuPortal:khe,multiValue:ppe,multiValueLabel:fpe,multiValueRemove:mpe,noOptionsMessage:Phe,option:ype,placeholder:bpe,singleValue:wpe,valueContainer:Fhe},afe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},sfe=4,V5=4,cfe=38,lfe=V5*2,ufe={baseUnit:V5,controlHeight:cfe,menuGutter:lfe},pb={borderRadius:sfe,colors:afe,spacing:ufe},dfe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:BF(),captureMenuScroll:!BF(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Hpe(),formatGroupLabel:tfe,getOptionLabel:nfe,getOptionValue:rfe,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:ife,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Ehe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var o=t.count;return"".concat(o," result").concat(o!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function ZF(e,t,o,s){var c=H5(e,t,o),u=W5(e,t,o),h=$5(e,t),f=oE(e,t);return{type:"option",data:t,isDisabled:c,isSelected:u,label:h,value:f,index:s}}function j5(e,t){return e.options.map(function(o,s){if("options"in o){var c=o.options.map(function(h,f){return ZF(e,h,t,f)}).filter(function(h){return eV(e,h)});return c.length>0?{type:"group",data:o,options:c,index:s}:void 0}var u=ZF(e,o,t,s);return eV(e,u)?u:void 0}).filter(yhe)}function B5(e){return e.reduce(function(t,o){return o.type==="group"?t.push.apply(t,dt(o.options.map(function(s){return s.data}))):t.push(o.data),t},[])}function hfe(e,t){return B5(j5(e,t))}function eV(e,t){var o=e.inputValue,s=o===void 0?"":o,c=t.data,u=t.isSelected,h=t.label,f=t.value;return(!z5(e)||!u)&&G5(e,{label:h,value:f,data:c},s)}function pfe(e,t){var o=e.focusedValue,s=e.selectValue,c=s.indexOf(o);if(c>-1){var u=t.indexOf(o);if(u>-1)return o;if(c<t.length)return t[c]}return null}function ffe(e,t){var o=e.focusedOption;return o&&t.indexOf(o)>-1?o:t[0]}var $5=function(t,o){return t.getOptionLabel(o)},oE=function(t,o){return t.getOptionValue(o)};function H5(e,t,o){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,o):!1}function W5(e,t,o){if(o.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,o);var s=oE(e,t);return o.some(function(c){return oE(e,c)===s})}function G5(e,t,o){return e.filterOption?e.filterOption(t,o):!0}var z5=function(t){var o=t.hideSelectedOptions,s=t.isMulti;return o===void 0?s:o},mfe=1,K5=function(e){Uh(o,e);var t=Fh(o);function o(s){var c;if(Wa(this,o),c=t.call(this,s),c.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},c.blockOptionHover=!1,c.isComposing=!1,c.commonProps=void 0,c.initialTouchX=0,c.initialTouchY=0,c.instancePrefix="",c.openAfterFocus=!1,c.scrollToFocusedOptionOnUpdate=!1,c.userIsDragging=void 0,c.controlRef=null,c.getControlRef=function(f){c.controlRef=f},c.focusedOptionRef=null,c.getFocusedOptionRef=function(f){c.focusedOptionRef=f},c.menuListRef=null,c.getMenuListRef=function(f){c.menuListRef=f},c.inputRef=null,c.getInputRef=function(f){c.inputRef=f},c.focus=c.focusInput,c.blur=c.blurInput,c.onChange=function(f,m){var v=c.props,_=v.onChange,y=v.name;m.name=y,c.ariaOnChange(f,m),_(f,m)},c.setValue=function(f,m,v){var _=c.props,y=_.closeMenuOnSelect,T=_.isMulti,A=_.inputValue;c.onInputChange("",{action:"set-value",prevInputValue:A}),y&&(c.setState({inputIsHiddenAfterUpdate:!T}),c.onMenuClose()),c.setState({clearFocusValueOnUpdate:!0}),c.onChange(f,{action:m,option:v})},c.selectOption=function(f){var m=c.props,v=m.blurInputOnSelect,_=m.isMulti,y=m.name,T=c.state.selectValue,A=_&&c.isOptionSelected(f,T),I=c.isOptionDisabled(f,T);if(A){var O=c.getOptionValue(f);c.setValue(T.filter(function(L){return c.getOptionValue(L)!==O}),"deselect-option",f)}else if(!I)_?c.setValue([].concat(dt(T),[f]),"select-option",f):c.setValue(f,"select-option");else{c.ariaOnChange(f,{action:"select-option",option:f,name:y});return}v&&c.blurInput()},c.removeValue=function(f){var m=c.props.isMulti,v=c.state.selectValue,_=c.getOptionValue(f),y=v.filter(function(A){return c.getOptionValue(A)!==_}),T=jg(m,y,y[0]||null);c.onChange(T,{action:"remove-value",removedValue:f}),c.focusInput()},c.clearValue=function(){var f=c.state.selectValue;c.onChange(jg(c.props.isMulti,[],null),{action:"clear",removedValues:f})},c.popValue=function(){var f=c.props.isMulti,m=c.state.selectValue,v=m[m.length-1],_=m.slice(0,m.length-1),y=jg(f,_,_[0]||null);c.onChange(y,{action:"pop-value",removedValue:v})},c.getValue=function(){return c.state.selectValue},c.cx=function(){for(var f=arguments.length,m=new Array(f),v=0;v<f;v++)m[v]=arguments[v];return phe.apply(void 0,[c.props.classNamePrefix].concat(m))},c.getOptionLabel=function(f){return $5(c.props,f)},c.getOptionValue=function(f){return oE(c.props,f)},c.getStyles=function(f,m){var v=c.props.unstyled,_=ofe[f](m,v);_.boxSizing="border-box";var y=c.props.styles[f];return y?y(_,m):_},c.getClassNames=function(f,m){var v,_;return(v=(_=c.props.classNames)[f])===null||v===void 0?void 0:v.call(_,m)},c.getElementId=function(f){return"".concat(c.instancePrefix,"-").concat(f)},c.getComponents=function(){return xpe(c.props)},c.buildCategorizedOptions=function(){return j5(c.props,c.state.selectValue)},c.getCategorizedOptions=function(){return c.props.menuIsOpen?c.buildCategorizedOptions():[]},c.buildFocusableOptions=function(){return B5(c.buildCategorizedOptions())},c.getFocusableOptions=function(){return c.props.menuIsOpen?c.buildFocusableOptions():[]},c.ariaOnChange=function(f,m){c.setState({ariaSelection:ge({value:f},m)})},c.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),c.focusInput())},c.onMenuMouseMove=function(f){c.blockOptionHover=!1},c.onControlMouseDown=function(f){if(!f.defaultPrevented){var m=c.props.openMenuOnClick;c.state.isFocused?c.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&c.onMenuClose():m&&c.openMenu("first"):(m&&(c.openAfterFocus=!0),c.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},c.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0)&&!c.props.isDisabled){var m=c.props,v=m.isMulti,_=m.menuIsOpen;c.focusInput(),_?(c.setState({inputIsHiddenAfterUpdate:!v}),c.onMenuClose()):c.openMenu("first"),f.preventDefault()}},c.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(c.clearValue(),f.preventDefault(),c.openAfterFocus=!1,f.type==="touchend"?c.focusInput():setTimeout(function(){return c.focusInput()}))},c.onScroll=function(f){typeof c.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&s_(f.target)&&c.props.onMenuClose():typeof c.props.closeMenuOnScroll=="function"&&c.props.closeMenuOnScroll(f)&&c.props.onMenuClose()},c.onCompositionStart=function(){c.isComposing=!0},c.onCompositionEnd=function(){c.isComposing=!1},c.onTouchStart=function(f){var m=f.touches,v=m&&m.item(0);v&&(c.initialTouchX=v.clientX,c.initialTouchY=v.clientY,c.userIsDragging=!1)},c.onTouchMove=function(f){var m=f.touches,v=m&&m.item(0);if(v){var _=Math.abs(v.clientX-c.initialTouchX),y=Math.abs(v.clientY-c.initialTouchY),T=5;c.userIsDragging=_>T||y>T}},c.onTouchEnd=function(f){c.userIsDragging||(c.controlRef&&!c.controlRef.contains(f.target)&&c.menuListRef&&!c.menuListRef.contains(f.target)&&c.blurInput(),c.initialTouchX=0,c.initialTouchY=0)},c.onControlTouchEnd=function(f){c.userIsDragging||c.onControlMouseDown(f)},c.onClearIndicatorTouchEnd=function(f){c.userIsDragging||c.onClearIndicatorMouseDown(f)},c.onDropdownIndicatorTouchEnd=function(f){c.userIsDragging||c.onDropdownIndicatorMouseDown(f)},c.handleInputChange=function(f){var m=c.props.inputValue,v=f.currentTarget.value;c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange(v,{action:"input-change",prevInputValue:m}),c.props.menuIsOpen||c.onMenuOpen()},c.onInputFocus=function(f){c.props.onFocus&&c.props.onFocus(f),c.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(c.openAfterFocus||c.props.openMenuOnFocus)&&c.openMenu("first"),c.openAfterFocus=!1},c.onInputBlur=function(f){var m=c.props.inputValue;if(c.menuListRef&&c.menuListRef.contains(document.activeElement)){c.inputRef.focus();return}c.props.onBlur&&c.props.onBlur(f),c.onInputChange("",{action:"input-blur",prevInputValue:m}),c.onMenuClose(),c.setState({focusedValue:null,isFocused:!1})},c.onOptionHover=function(f){c.blockOptionHover||c.state.focusedOption===f||c.setState({focusedOption:f})},c.shouldHideSelectedOptions=function(){return z5(c.props)},c.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),c.focus()},c.onKeyDown=function(f){var m=c.props,v=m.isMulti,_=m.backspaceRemovesValue,y=m.escapeClearsValue,T=m.inputValue,A=m.isClearable,I=m.isDisabled,O=m.menuIsOpen,L=m.onKeyDown,x=m.tabSelectsValue,N=m.openMenuOnFocus,D=c.state,U=D.focusedOption,V=D.focusedValue,j=D.selectValue;if(!I&&!(typeof L=="function"&&(L(f),f.defaultPrevented))){switch(c.blockOptionHover=!0,f.key){case"ArrowLeft":if(!v||T)return;c.focusValue("previous");break;case"ArrowRight":if(!v||T)return;c.focusValue("next");break;case"Delete":case"Backspace":if(T)return;if(V)c.removeValue(V);else{if(!_)return;v?c.popValue():A&&c.clearValue()}break;case"Tab":if(c.isComposing||f.shiftKey||!O||!x||!U||N&&c.isOptionSelected(U,j))return;c.selectOption(U);break;case"Enter":if(f.keyCode===229)break;if(O){if(!U||c.isComposing)return;c.selectOption(U);break}return;case"Escape":O?(c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange("",{action:"menu-close",prevInputValue:T}),c.onMenuClose()):A&&y&&c.clearValue();break;case" ":if(T)return;if(!O){c.openMenu("first");break}if(!U)return;c.selectOption(U);break;case"ArrowUp":O?c.focusOption("up"):c.openMenu("last");break;case"ArrowDown":O?c.focusOption("down"):c.openMenu("first");break;case"PageUp":if(!O)return;c.focusOption("pageup");break;case"PageDown":if(!O)return;c.focusOption("pagedown");break;case"Home":if(!O)return;c.focusOption("first");break;case"End":if(!O)return;c.focusOption("last");break;default:return}f.preventDefault()}},c.instancePrefix="react-select-"+(c.props.instanceId||++mfe),c.state.selectValue=VF(s.value),s.menuIsOpen&&c.state.selectValue.length){var u=c.buildFocusableOptions(),h=u.indexOf(c.state.selectValue[0]);c.state.focusedOption=u[h]}return c}return Ga(o,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&jF(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(c){var u=this.props,h=u.isDisabled,f=u.menuIsOpen,m=this.state.isFocused;(m&&!h&&c.isDisabled||m&&f&&!c.menuIsOpen)&&this.focusInput(),m&&h&&!c.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!m&&!h&&c.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(jF(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(c,u){this.props.onInputChange(c,u)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(c){var u=this,h=this.state,f=h.selectValue,m=h.isFocused,v=this.buildFocusableOptions(),_=c==="first"?0:v.length-1;if(!this.props.isMulti){var y=v.indexOf(f[0]);y>-1&&(_=y)}this.scrollToFocusedOptionOnUpdate=!(m&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:v[_]},function(){return u.onMenuOpen()})}},{key:"focusValue",value:function(c){var u=this.state,h=u.selectValue,f=u.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var m=h.indexOf(f);f||(m=-1);var v=h.length-1,_=-1;if(h.length){switch(c){case"previous":m===0?_=0:m===-1?_=v:_=m-1;break;case"next":m>-1&&m<v&&(_=m+1);break}this.setState({inputIsHidden:_!==-1,focusedValue:h[_]})}}}},{key:"focusOption",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",u=this.props.pageSize,h=this.state.focusedOption,f=this.getFocusableOptions();if(f.length){var m=0,v=f.indexOf(h);h||(v=-1),c==="up"?m=v>0?v-1:f.length-1:c==="down"?m=(v+1)%f.length:c==="pageup"?(m=v-u,m<0&&(m=0)):c==="pagedown"?(m=v+u,m>f.length-1&&(m=f.length-1)):c==="last"&&(m=f.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:f[m],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(pb):ge(ge({},pb),this.props.theme):pb}},{key:"getCommonProps",value:function(){var c=this.clearValue,u=this.cx,h=this.getStyles,f=this.getClassNames,m=this.getValue,v=this.selectOption,_=this.setValue,y=this.props,T=y.isMulti,A=y.isRtl,I=y.options,O=this.hasValue();return{clearValue:c,cx:u,getStyles:h,getClassNames:f,getValue:m,hasValue:O,isMulti:T,isRtl:A,options:I,selectOption:v,selectProps:y,setValue:_,theme:this.getTheme()}}},{key:"hasValue",value:function(){var c=this.state.selectValue;return c.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var c=this.props,u=c.isClearable,h=c.isMulti;return u===void 0?h:u}},{key:"isOptionDisabled",value:function(c,u){return H5(this.props,c,u)}},{key:"isOptionSelected",value:function(c,u){return W5(this.props,c,u)}},{key:"filterOption",value:function(c,u){return G5(this.props,c,u)}},{key:"formatOptionLabel",value:function(c,u){if(typeof this.props.formatOptionLabel=="function"){var h=this.props.inputValue,f=this.state.selectValue;return this.props.formatOptionLabel(c,{context:u,inputValue:h,selectValue:f})}else return this.getOptionLabel(c)}},{key:"formatGroupLabel",value:function(c){return this.props.formatGroupLabel(c)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var c=this.props,u=c.isDisabled,h=c.isSearchable,f=c.inputId,m=c.inputValue,v=c.tabIndex,_=c.form,y=c.menuIsOpen,T=c.required,A=this.getComponents(),I=A.Input,O=this.state,L=O.inputIsHidden,x=O.ariaSelection,N=this.commonProps,D=f||this.getElementId("input"),U=ge(ge(ge({"aria-autocomplete":"list","aria-expanded":y,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":T,role:"combobox"},y&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!h&&{"aria-readonly":!0}),this.hasValue()?(x==null?void 0:x.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return h?b.createElement(I,Ve({},N,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:D,innerRef:this.getInputRef,isDisabled:u,isHidden:L,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:v,form:_,type:"text",value:m},U)):b.createElement(Gpe,Ve({id:D,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:rE,onFocus:this.onInputFocus,disabled:u,tabIndex:v,inputMode:"none",form:_,value:""},U))}},{key:"renderPlaceholderOrValue",value:function(){var c=this,u=this.getComponents(),h=u.MultiValue,f=u.MultiValueContainer,m=u.MultiValueLabel,v=u.MultiValueRemove,_=u.SingleValue,y=u.Placeholder,T=this.commonProps,A=this.props,I=A.controlShouldRenderValue,O=A.isDisabled,L=A.isMulti,x=A.inputValue,N=A.placeholder,D=this.state,U=D.selectValue,V=D.focusedValue,j=D.isFocused;if(!this.hasValue()||!I)return x?null:b.createElement(y,Ve({},T,{key:"placeholder",isDisabled:O,isFocused:j,innerProps:{id:this.getElementId("placeholder")}}),N);if(L)return U.map(function(Y,ee){var H=Y===V,Z="".concat(c.getOptionLabel(Y),"-").concat(c.getOptionValue(Y));return b.createElement(h,Ve({},T,{components:{Container:f,Label:m,Remove:v},isFocused:H,isDisabled:O,key:Z,index:ee,removeProps:{onClick:function(){return c.removeValue(Y)},onTouchEnd:function(){return c.removeValue(Y)},onMouseDown:function(X){X.preventDefault()}},data:Y}),c.formatOptionLabel(Y,"value"))});if(x)return null;var B=U[0];return b.createElement(_,Ve({},T,{data:B,isDisabled:O}),this.formatOptionLabel(B,"value"))}},{key:"renderClearIndicator",value:function(){var c=this.getComponents(),u=c.ClearIndicator,h=this.commonProps,f=this.props,m=f.isDisabled,v=f.isLoading,_=this.state.isFocused;if(!this.isClearable()||!u||m||!this.hasValue()||v)return null;var y={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(u,Ve({},h,{innerProps:y,isFocused:_}))}},{key:"renderLoadingIndicator",value:function(){var c=this.getComponents(),u=c.LoadingIndicator,h=this.commonProps,f=this.props,m=f.isDisabled,v=f.isLoading,_=this.state.isFocused;if(!u||!v)return null;var y={"aria-hidden":"true"};return b.createElement(u,Ve({},h,{innerProps:y,isDisabled:m,isFocused:_}))}},{key:"renderIndicatorSeparator",value:function(){var c=this.getComponents(),u=c.DropdownIndicator,h=c.IndicatorSeparator;if(!u||!h)return null;var f=this.commonProps,m=this.props.isDisabled,v=this.state.isFocused;return b.createElement(h,Ve({},f,{isDisabled:m,isFocused:v}))}},{key:"renderDropdownIndicator",value:function(){var c=this.getComponents(),u=c.DropdownIndicator;if(!u)return null;var h=this.commonProps,f=this.props.isDisabled,m=this.state.isFocused,v={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(u,Ve({},h,{innerProps:v,isDisabled:f,isFocused:m}))}},{key:"renderMenu",value:function(){var c=this,u=this.getComponents(),h=u.Group,f=u.GroupHeading,m=u.Menu,v=u.MenuList,_=u.MenuPortal,y=u.LoadingMessage,T=u.NoOptionsMessage,A=u.Option,I=this.commonProps,O=this.state.focusedOption,L=this.props,x=L.captureMenuScroll,N=L.inputValue,D=L.isLoading,U=L.loadingMessage,V=L.minMenuHeight,j=L.maxMenuHeight,B=L.menuIsOpen,Y=L.menuPlacement,ee=L.menuPosition,H=L.menuPortalTarget,Z=L.menuShouldBlockScroll,J=L.menuShouldScrollIntoView,X=L.noOptionsMessage,ne=L.onMenuScrollToTop,ie=L.onMenuScrollToBottom;if(!B)return null;var ae=function(de,he){var xe=de.type,Me=de.data,it=de.isDisabled,Be=de.isSelected,Tt=de.label,It=de.value,lt=O===Me,Mt=it?void 0:function(){return c.onOptionHover(Me)},ht=it?void 0:function(){return c.selectOption(Me)},ze="".concat(c.getElementId("option"),"-").concat(he),Ut={id:ze,onClick:ht,onMouseMove:Mt,onMouseOver:Mt,tabIndex:-1};return b.createElement(A,Ve({},I,{innerProps:Ut,data:Me,isDisabled:it,isSelected:Be,key:ze,label:Tt,type:xe,value:It,isFocused:lt,innerRef:lt?c.getFocusedOptionRef:void 0}),c.formatOptionLabel(de.data,"menu"))},pe;if(this.hasOptions())pe=this.getCategorizedOptions().map(function(se){if(se.type==="group"){var de=se.data,he=se.options,xe=se.index,Me="".concat(c.getElementId("group"),"-").concat(xe),it="".concat(Me,"-heading");return b.createElement(h,Ve({},I,{key:Me,data:de,options:he,Heading:f,headingProps:{id:it,data:se.data},label:c.formatGroupLabel(se.data)}),se.options.map(function(Be){return ae(Be,"".concat(xe,"-").concat(Be.index))}))}else if(se.type==="option")return ae(se,"".concat(se.index))});else if(D){var ue=U({inputValue:N});if(ue===null)return null;pe=b.createElement(y,I,ue)}else{var Se=X({inputValue:N});if(Se===null)return null;pe=b.createElement(T,I,Se)}var Ee={minMenuHeight:V,maxMenuHeight:j,menuPlacement:Y,menuPosition:ee,menuShouldScrollIntoView:J},le=b.createElement(whe,Ve({},I,Ee),function(se){var de=se.ref,he=se.placerProps,xe=he.placement,Me=he.maxHeight;return b.createElement(m,Ve({},I,Ee,{innerRef:de,innerProps:{onMouseDown:c.onMenuMouseDown,onMouseMove:c.onMenuMouseMove,id:c.getElementId("listbox")},isLoading:D,placement:xe}),b.createElement(Jpe,{captureEnabled:x,onTopArrive:ne,onBottomArrive:ie,lockEnabled:Z},function(it){return b.createElement(v,Ve({},I,{innerRef:function(Tt){c.getMenuListRef(Tt),it(Tt)},isLoading:D,maxHeight:Me,focusedOption:O}),pe)}))});return H||ee==="fixed"?b.createElement(_,Ve({},I,{appendTo:H,controlElement:this.controlRef,menuPlacement:Y,menuPosition:ee}),le):le}},{key:"renderFormField",value:function(){var c=this,u=this.props,h=u.delimiter,f=u.isDisabled,m=u.isMulti,v=u.name,_=u.required,y=this.state.selectValue;if(_&&!this.hasValue()&&!f)return b.createElement(efe,{name:v,onFocus:this.onValueInputFocus});if(!(!v||f))if(m)if(h){var T=y.map(function(O){return c.getOptionValue(O)}).join(h);return b.createElement("input",{name:v,type:"hidden",value:T})}else{var A=y.length>0?y.map(function(O,L){return b.createElement("input",{key:"i-".concat(L),name:v,type:"hidden",value:c.getOptionValue(O)})}):b.createElement("input",{name:v,type:"hidden",value:""});return b.createElement("div",null,A)}else{var I=y[0]?this.getOptionValue(y[0]):"";return b.createElement("input",{name:v,type:"hidden",value:I})}}},{key:"renderLiveRegion",value:function(){var c=this.commonProps,u=this.state,h=u.ariaSelection,f=u.focusedOption,m=u.focusedValue,v=u.isFocused,_=u.selectValue,y=this.getFocusableOptions();return b.createElement(Vpe,Ve({},c,{id:this.getElementId("live-region"),ariaSelection:h,focusedOption:f,focusedValue:m,isFocused:v,selectValue:_,focusableOptions:y}))}},{key:"render",value:function(){var c=this.getComponents(),u=c.Control,h=c.IndicatorsContainer,f=c.SelectContainer,m=c.ValueContainer,v=this.props,_=v.className,y=v.id,T=v.isDisabled,A=v.menuIsOpen,I=this.state.isFocused,O=this.commonProps=this.getCommonProps();return b.createElement(f,Ve({},O,{className:_,innerProps:{id:y,onKeyDown:this.onKeyDown},isDisabled:T,isFocused:I}),this.renderLiveRegion(),b.createElement(u,Ve({},O,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:T,isFocused:I,menuIsOpen:A}),b.createElement(m,Ve({},O,{isDisabled:T}),this.renderPlaceholderOrValue(),this.renderInput()),b.createElement(h,Ve({},O,{isDisabled:T}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(c,u){var h=u.prevProps,f=u.clearFocusValueOnUpdate,m=u.inputIsHiddenAfterUpdate,v=u.ariaSelection,_=u.isFocused,y=u.prevWasFocused,T=c.options,A=c.value,I=c.menuIsOpen,O=c.inputValue,L=c.isMulti,x=VF(A),N={};if(h&&(A!==h.value||T!==h.options||I!==h.menuIsOpen||O!==h.inputValue)){var D=I?hfe(c,x):[],U=f?pfe(u,x):null,V=ffe(u,D);N={selectValue:x,focusedOption:V,focusedValue:U,clearFocusValueOnUpdate:!1}}var j=m!=null&&c!==h?{inputIsHidden:m,inputIsHiddenAfterUpdate:void 0}:{},B=v,Y=_&&y;return _&&!Y&&(B={value:jg(L,x,x[0]||null),options:x,action:"initial-input-focus"},Y=!y),(v==null?void 0:v.action)==="initial-input-focus"&&(B=null),ge(ge(ge({},N),j),{},{prevProps:c,ariaSelection:B,prevWasFocused:Y})}}]),o}(b.Component);K5.defaultProps=dfe;var gfe=b.forwardRef(function(e,t){var o=nde(e);return b.createElement(K5,Ve({ref:t},o))}),vfe=gfe;const{Title:Efe,Paragraph:_fe}=Co,Sfe=b.memo(function({label:t}){const s=Gs().filter(m=>m.hasAudio||m.hasVideo),c=Tf(m=>m.localTracks),u=Tf(m=>m.hostRoom),h=ys(),f=za();return te.jsxs("div",{className:"room-selector-item",children:[te.jsx("i",{className:"i-mdi-chat-processing-outline text-5 color-zinc"}),te.jsx("code",{className:"bg-rose color-white px-2 rounded",children:t}),h&&c&&f.uid&&(u==null?void 0:u.client.channelName)===f.channelName&&te.jsxs("div",{className:"user",children:[te.jsx(W8,{audioTrack:c[0],cameraOn:!0,micOn:!0,videoTrack:c[1]}),te.jsx("div",{className:"mask"}),te.jsx("label",{className:"label",children:Ss(f.uid)})]},f.uid),te.jsx(te.Fragment,{children:s.map(m=>te.jsxs("div",{className:"user",children:[te.jsx(Xw,{user:m}),te.jsx("div",{className:"mask"}),te.jsx("label",{className:"label",children:Ss(m.uid)})]},m.uid))})]})}),yfe=({innerProps:e,isDisabled:t,label:o,data:s})=>{const{client:c}=s.value;return t?null:te.jsx("div",{...e,children:te.jsx(B8,{client:c,children:te.jsx(Sfe,{label:o})})})},Cfe=()=>{const e=Tf(h=>h.getRooms),[t,o]=b.useState(!1);b.useEffect(()=>{e()},[]);const s=Tf(h=>h.rooms),c=Tf(h=>h.selectChannel),u=b.useMemo(()=>s==null?void 0:s.map(h=>({label:h.channel.replace(/[^0-9]*/,"Room"),value:h})),[s]);return te.jsx(oi,{children:t?te.jsx("div",{className:"max-w-lg p-10",children:te.jsx(vfe,{components:{Option:yfe},isMulti:!1,menuIsOpen:!0,onChange:h=>{var f;return c((f=h==null?void 0:h.value)==null?void 0:f.channel)},options:u})}):te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(Efe,{children:"multi-channel"}),te.jsx(_fe,{children:"This is multi-channel example. By create multi Agora Client. You can join multi-channel"}),te.jsx("div",{className:"text-xl",children:te.jsx(ao,{onClick:()=>o(!0),type:"primary",children:"show demo"})})]})})};const{Title:Tfe,Paragraph:bfe,Text:Rfe}=Co,Ife=()=>{const[e,t]=b.useState(!1);Hi({appid:St.appId,channel:St.channel,token:St.token},e);const[o,s]=b.useState(!1),[c,u]=b.useState(!1),h=Gs(),[f,m]=b.useState(!0),{videoTracks:v}=vm(f?h:h.filter((A,I)=>I==0)),{audioTracks:_}=gm(h);_.map(A=>A.play());const y=()=>te.jsx("div",{className:"p-4 text-xl",children:te.jsx(ao,{onClick:()=>m(A=>!A),type:"primary",children:`switch to layout ${f?2:1}`})}),T=()=>te.jsx(te.Fragment,{children:f?te.jsx(wfe,{videoTracks:v}):te.jsx(Ofe,{videoTracks:v})});return te.jsxs(oi,{children:[e?te.jsx(s1,{cameraOn:c,micOn:o,renderAction:y,renderRemoteUsers:T}):te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(Tfe,{children:"SwitchLayout"}),te.jsxs(bfe,{children:["By using ",te.jsx(Rfe,{keyboard:!0,children:"useRemoteVideoTracks"})," hook to dynamically switch the camera track, this will not generate a new track, but only dynamically subscribe and unsubscribe the track according to your needs."]})]}),te.jsx(ya,{calling:e,cameraOn:c,micOn:o,setCalling:()=>{t(A=>!A)},setCamera:()=>{u(A=>!A)},setMic:()=>{s(A=>!A)}})]})};function wfe({videoTracks:e}){return te.jsx(te.Fragment,{children:e.map(t=>te.jsxs(ja.Item,{children:[te.jsx(_m,{cover:$s(),track:t},t.getUserId()),te.jsx(Rc,{children:`Layout1 ${Ss(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}function Ofe({videoTracks:e}){return te.jsx(te.Fragment,{children:e.map(t=>te.jsxs(ja.Item,{children:[te.jsx(_m,{cover:$s(),track:t},t.getUserId()),te.jsx(Rc,{children:`Layout2 ${Ss(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}const Y5=[{label:"switch-layout",component:Ife},{label:"multi-channel",component:Cfe}];function Afe({videoTracks:e}){return te.jsx(te.Fragment,{children:e.map(t=>te.jsxs(ja.Item,{children:[te.jsx(_m,{cover:$s(),track:t},t.getUserId()),te.jsx(Rc,{children:`${Ss(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}const Nfe=()=>{const[e,t]=b.useState(!1);Hi({appid:St.appId,channel:St.channel,token:St.token},e);const[o,s]=b.useState(!1),[c,u]=b.useState(!1),h=Gs(),{videoTracks:f}=vm(h),{audioTracks:m}=gm(h);return m.map(v=>v.play()),te.jsxs(oi,{children:[e?te.jsx(s1,{cameraOn:c,micOn:o,renderRemoteUsers:()=>te.jsx(Afe,{videoTracks:f})}):te.jsx(oi,{}),te.jsx(ya,{calling:e,cameraOn:c,micOn:o,setCalling:()=>{t(v=>!v)},setCamera:()=>{u(v=>!v)},setMic:()=>{s(v=>!v)}})]})},q5=[{label:"overview",component:Nfe}],{Title:xfe,Paragraph:fb}=Co,Pfe=()=>{Hi({appid:St.appId,channel:St.channel,token:St.token},!0);const[e,t]=b.useState(!1),[o,s]=b.useState(),{localMicrophoneTrack:c}=zh(e);return Gh([c]),b.useEffect(()=>{c&&s({muted:c.muted,isPlaying:c.isPlaying,enabled:c.enabled})},[e,c]),te.jsxs(oi,{children:[te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(xfe,{children:"local audio track status"}),o&&te.jsxs(te.Fragment,{children:[te.jsx(fb,{children:`muted: ${o==null?void 0:o.muted}`}),te.jsx(fb,{children:`isPlaying: ${o.isPlaying}`}),te.jsx(fb,{children:`enabled: ${o==null?void 0:o.enabled}`})]}),te.jsx(Kw,{disabled:!e,track:c})]}),te.jsx(ya,{micOn:e,setMic:()=>{t(u=>!u)}})]})},{Title:Dfe}=Co,kfe=()=>{Hi({appid:St.appId,channel:St.channel,token:St.token},!0);const[e,t]=b.useState(!1),[o,s]=b.useState(!1),[c,u]=b.useState(!1),[h,f]=b.useState(!1),{localMicrophoneTrack:m}=zh(e),{localCameraTrack:v}=Kh(o);return Gh([m,v]),te.jsxs(oi,{children:[te.jsxs("div",{className:"h-screen p-3 overflow-auto",children:[te.jsx(Dfe,{children:"local user status"}),te.jsxs(ao,{className:"m-2",onClick:()=>{f(_=>!_)},type:h?"primary":"default",children:["playAudio : ",JSON.stringify(h)]}),te.jsxs(ao,{className:"m-2",onClick:()=>{u(_=>!_)},type:c?"primary":"default",children:["playVideo : ",JSON.stringify(c)]}),te.jsx(ao,{className:"m-2",onClick:()=>{u(!0),s(!1)},type:"primary",children:"cameraOn=false playVideo=true"}),te.jsx(ao,{className:"m-2",onClick:()=>{u(!1),s(!0)},type:"primary",children:"cameraOn=true playVideo=false"}),te.jsx(W8,{audioTrack:m,cameraOn:o,className:"m-2",micOn:e,playAudio:h,playVideo:c,style:{width:"300px",height:"300px"},videoTrack:v})]}),te.jsx(ya,{cameraOn:o,micOn:e,setCamera:()=>{s(_=>!_)},setMic:()=>{t(_=>!_)}})]})},{Title:Lfe}=Co,Mfe=()=>{Hi({appid:St.appId,channel:St.channel,token:St.token},!0);const[e,t]=b.useState(!1),{localCameraTrack:o}=Kh();return Gh([o]),te.jsxs(oi,{children:[te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(Lfe,{children:"local video track"}),te.jsx(Yw,{disabled:!e,play:e,style:{width:"300px",height:"300px"},track:o})]}),te.jsx(ya,{cameraOn:e,setCamera:()=>{t(s=>!s)}})]})},{Title:Ufe}=Co,Ffe=()=>{const[e,t]=b.useState(!1);Hi({appid:St.appId,channel:St.channel,token:St.token},e);const[o,s]=b.useState(),c=Gs(),{audioTracks:u}=gm(c);return b.useEffect(()=>{if(u&&u.length>0){const h=[];u.map(f=>{h.push({isPlay:f.isPlaying,id:f.getTrackId(),track:f})}),s(h)}else s([])},[u]),b.useEffect(()=>{e||s([])},[e]),te.jsxs(oi,{children:[te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(Ufe,{children:"remote audio track status"}),o&&o.length>0&&o.map(h=>te.jsxs("div",{children:[te.jsx("div",{className:"p-4 text-xl",children:te.jsx(ao,{onClick:()=>{h.isPlay=!h.isPlay,s([...o])},type:"primary",children:"switch this remote audio track play status"})}),h.isPlay,te.jsx(G8,{play:h.isPlay,track:h.track})]},h.id))]}),te.jsx(ya,{calling:e,setCalling:()=>{t(h=>!h)}})]})},{Title:Vfe}=Co,jfe=()=>{const[e,t]=b.useState(!1),o=b.useMemo(()=>$s(),[]);Hi({appid:St.appId,channel:St.channel,token:St.token},e);const[s,c]=b.useState(),u=Gs();return b.useEffect(()=>{if(u.length>0){const h=[];u.map(f=>{h.push({playVideo:!0,playAudio:!0,id:f.uid,user:f})}),c(h)}else c([])},[u]),b.useEffect(()=>{e||c([])},[e]),te.jsxs(oi,{children:[te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(Vfe,{children:"RemoteUser"}),s&&s.length>0&&s.map(h=>te.jsxs("div",{children:[te.jsxs("div",{className:"text-xl",children:[te.jsx(ao,{className:"m-2",onClick:()=>{h.playVideo=!h.playVideo,c([...s])},type:h.playVideo?"default":"primary",children:`${h.playVideo?"stop":"play"} RemoteUser Video`}),te.jsx(ao,{className:"m-2",onClick:()=>{h.playAudio=!h.playAudio,c([...s])},type:h.playAudio?"default":"primary",children:`${h.playAudio?"stop":"play"} RemoteUser Audio`})]}),te.jsx("div",{className:"p-4 text-xl",children:te.jsx(Xw,{cover:o,playAudio:h.playAudio,playVideo:h.playVideo,style:{width:"150px",height:"100px"},user:h.user})})]},h.id))]}),te.jsx(ya,{calling:e,setCalling:()=>{t(h=>!h)}})]})},{Title:Bfe}=Co,$fe=()=>{const[e,t]=b.useState(!1);Hi({appid:St.appId,channel:St.channel,token:St.token},e);const[o,s]=b.useState(),c=Gs(),{videoTracks:u}=vm(c);return b.useEffect(()=>{if(u&&u.length>0){const h=[];u.map(f=>{h.push({isPlay:!0,id:f.getTrackId(),track:f})}),s(h)}else s([])},[u]),b.useEffect(()=>{e||s([])},[e]),te.jsxs(oi,{children:[te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(Bfe,{children:"remote video track status"}),o&&o.length>0&&o.map(h=>te.jsxs("div",{children:[te.jsx("div",{className:"p-4 text-xl",children:te.jsx(ao,{onClick:()=>{h.isPlay=!h.isPlay,s([...o])},type:"primary",children:"switch this remote video track play status"})}),te.jsx("div",{className:"p-4 text-xl",children:te.jsx(qw,{play:h.isPlay,style:{width:"150px",height:"100px"},track:h.track})})]},h.id))]}),te.jsx(ya,{calling:e,setCalling:()=>{t(h=>!h)}})]})},X5=[{label:"LocalAudioTrack",component:Pfe},{label:"RemoteAudioTrack",component:Ffe},{label:"LocalVideoTrack",component:Mfe},{label:"RemoteVideoTrack",component:$fe},{label:"LocalUser",component:kfe},{label:"RemoteUser",component:jfe}],{Title:Hfe}=Co,Wfe=()=>{Hi({appid:St.appId,channel:St.channel,token:St.token},!0);const[e,t]=b.useState(!1),{localMicrophoneTrack:o}=zh();return zw(o,e),te.jsxs(oi,{children:[te.jsx("div",{className:"h-screen p-3",children:te.jsx(Hfe,{children:"useAutoPlayAudioTrack"})}),te.jsx(ya,{micOn:e,setMic:()=>{t(s=>!s)}})]})},{Title:Gfe}=Co,zfe=()=>{Hi({appid:St.appId,channel:St.channel,token:St.token},!0);const[e,t]=b.useState(!1),o=b.useRef(null),{localCameraTrack:s}=Kh();return Gw(s,e,o.current),te.jsxs(oi,{children:[te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(Gfe,{children:"useAutoPlayVideoTrack"}),te.jsx("div",{className:"p-4 text-xl",children:te.jsx("div",{ref:c=>o.current=c,style:{width:"150px",height:"100px"}})})]}),te.jsx(ya,{cameraOn:e,setCamera:()=>{t(c=>!c)}})]})},{Title:Kfe,Paragraph:mb,Text:Yfe}=Co,qfe=()=>{const[e,t]=b.useState(!1),o=wle();return Hi({appid:St.appId,channel:St.channel,token:St.token},e),te.jsx(oi,{children:te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(Kfe,{children:"useConnectionState"}),te.jsxs(mb,{children:["By using ",te.jsx(Yfe,{keyboard:!0,children:"useConnectionState"})," hook to get the current connection state of the client."]}),te.jsx(mb,{children:`result: ${o}`}),te.jsxs(mb,{children:[te.jsx(ao,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),te.jsx(ao,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:Xfe,Paragraph:gb,Text:Jfe}=Co,Qfe=()=>{const[e,t]=b.useState(!1),o=ZE();return Hi({appid:St.appId,channel:St.channel,token:St.token},e),te.jsx(oi,{children:te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(Xfe,{children:"useCurrentUID"}),te.jsxs(gb,{children:["By using ",te.jsx(Jfe,{keyboard:!0,children:"useCurrentUID"})," hook to get the UID of the current user."]}),te.jsx(gb,{children:`result: ${o}`}),te.jsxs(gb,{children:[te.jsx(ao,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),te.jsx(ao,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:Zfe,Paragraph:vb,Text:eme}=Co,tme=()=>{const[e,t]=b.useState(!1),o=ys();return Hi({appid:St.appId,channel:St.channel,token:St.token},e),te.jsx(oi,{children:te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(Zfe,{children:"useIsConnected"}),te.jsxs(vb,{children:["By using ",te.jsx(eme,{keyboard:!0,children:"useIsConnected"})," hook to determines whether the client is successfully connected to Agora server."]}),te.jsx(vb,{children:`result: ${o}`}),te.jsxs(vb,{children:[te.jsx(ao,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),te.jsx(ao,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:nme,Paragraph:tV,Text:Qp}=Co,rme=()=>{const[e,t]=b.useState(!1),{data:o,isLoading:s,isConnected:c,error:u}=Hi({appid:St.appId,channel:St.channel,token:St.token},e),[h,f]=b.useState(!1),[m,v]=b.useState(!1),_=Gs(),{videoTracks:y}=vm(_),{audioTracks:T}=gm(_);T.map(I=>I.play());const A=()=>te.jsx(te.Fragment,{children:y.map(I=>te.jsxs(ja.Item,{children:[te.jsx(_m,{cover:$s(),track:I},I.getUserId()),te.jsx(Rc,{children:`${Ss(I.getUserId())}{${I.getUserId()}}`})]},I.getUserId()))});return te.jsxs(oi,{children:[te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(nme,{children:"UseJoin"}),te.jsxs(tV,{children:["By using ",te.jsx(Qp,{keyboard:!0,children:"UseJoin"})," hook to join room."]}),te.jsxs(tV,{children:["You can do some actions like fetching token before calling join.",te.jsx("br",{}),"Below is the returned data."]}),te.jsxs(Qp,{children:["data: ",o]}),te.jsxs(Qp,{className:"pl-3",children:["isLoading: ",`${s}`]}),te.jsxs(Qp,{className:"pl-3",children:["isConnected: ",`${c}`]}),te.jsxs(Qp,{className:"pl-3",children:["error: ",`${JSON.stringify(u)}`]})]}),e&&te.jsx(s1,{cameraOn:m,micOn:h,renderRemoteUsers:A}),te.jsx(ya,{calling:e,cameraOn:m,micOn:h,setCalling:()=>{t(I=>!I)},setCamera:()=>{v(I=>!I)},setMic:()=>{f(I=>!I)}})]})},{Title:ime,Paragraph:ome}=Co,ame=()=>{const e=Ole();return Hi({appid:St.appId,channel:St.channel,token:St.token},!0),te.jsx(oi,{children:te.jsxs("div",{className:"h-screen p-3",children:[te.jsx(ime,{children:"useNetworkQuality"}),te.jsx(ome,{children:`result: ${JSON.stringify(e)}`})]})})},sme=()=>{const[e,t]=b.useState(!1),o=ZE()||0,s=b.useMemo(()=>Ss(o),[o]),c=b.useMemo(()=>$s(),[]),{isConnected:u}=Hi({appid:St.appId,channel:St.channel,token:St.token},e),[h,f]=b.useState(!1),[m,v]=b.useState(!1),{localMicrophoneTrack:_}=zh(h),{localCameraTrack:y}=Kh(m);Gh([_,y]);const T=Gs(),A=T.filter(x=>x.hasAudio||x.hasVideo),{videoTracks:I}=vm(T),{audioTracks:O}=gm(T);O.map(x=>x.play());const L=()=>te.jsx(te.Fragment,{children:I.map(x=>te.jsxs(ja.Item,{children:[te.jsx(_m,{cover:$s(),track:x},x.getUserId()),te.jsx(Rc,{children:`Layout1 ${Ss(x.getUserId())}{${x.getUserId()}}`})]},x.getUserId()))});return te.jsxs(oi,{children:[te.jsxs(te.Fragment,{children:[te.jsx(Qw,{published:A.length+(h||m?1:0),total:T.length+1}),te.jsxs(ja,{children:[u&&te.jsx(ja.Item,{children:te.jsx(Jw,{audioTrack:_,cameraOn:m,cover:c,micOn:h,videoTrack:y,children:te.jsx(Rc,{children:`${s}{${o}}`})})}),L?L():void 0]})]}),te.jsx(ya,{calling:e,cameraOn:m,micOn:h,setCalling:()=>t(x=>!x),setCamera:()=>{v(x=>!x)},setMic:()=>{f(x=>!x)}})]})},cme=()=>{const[e,t]=b.useState(!1),o=ys(),s=ZE()||0,c=b.useMemo(()=>Ss(s),[s]),u=b.useMemo(()=>$s(),[]);Hi({appid:St.appId,channel:St.channel,token:St.token},e);const[h,f]=b.useState(!1),[m,v]=b.useState(!1),{localMicrophoneTrack:_}=zh(h),{localCameraTrack:y}=Kh(m);Gh([_,y]);const T=Gs(),A=T.filter(I=>I.hasAudio||I.hasVideo);return te.jsxs(oi,{children:[te.jsxs(te.Fragment,{children:[te.jsx(Qw,{published:A.length+(h||m?1:0),total:T.length+1}),te.jsxs(ja,{children:[o&&te.jsx(ja.Item,{children:te.jsx(Jw,{audioTrack:_,cameraOn:m,cover:u,micOn:h,videoTrack:y,children:te.jsx(Rc,{children:`${c}{${s}}`})})}),T.map(I=>te.jsxs(ja.Item,{children:[te.jsx(Xw,{cover:$s(),user:I}),te.jsx(Rc,{children:`${Ss(I.uid)}{${I.uid}}`})]},I.uid))]})]}),te.jsx(ya,{calling:e,cameraOn:m,micOn:h,setCalling:()=>t(I=>!I),setCamera:()=>{v(I=>!I)},setMic:()=>{f(I=>!I)}})]})},J5=[{label:"useJoin",component:rme},{label:"usePublish",component:sme},{label:"useRemoteUsers",component:cme},{label:"useConnectionState",component:qfe},{label:"useIsConnected",component:tme},{label:"useCurrentUID",component:Qfe},{label:"useAutoPlayAudioTrack",component:Wfe},{label:"useAutoPlayVideoTrack",component:zfe},{label:"useNetworkQuality",component:ame}],nV=()=>te.jsx(oi,{}),{Content:lme,Sider:ume}=oI,Ui=["Basic","Hooks","Components","Advanced","Setting"],dme=[{label:Ui[0],key:Ui[0],children:q5.map(e=>({key:`/${Ui[0]}/${e.label}`,label:e.label}))},{label:Ui[1],key:Ui[1],children:J5.map(e=>({key:`/${Ui[1]}/${e.label}`,label:e.label}))},{label:Ui[2],key:Ui[2],children:X5.map(e=>({key:`/${Ui[2]}/${e.label}`,label:e.label}))},{label:Ui[3],key:Ui[3],children:Y5.map(e=>({key:`/${Ui[3]}/${e.label}`,label:e.label}))}];function hme(){const[e,t]=b.useState(!1),[o,s]=b.useState([window.location.hash.slice(1).split("/")[1]]),c=h=>{const f=h.find(m=>o.indexOf(m)===-1);f&&Ui.indexOf(f)===-1?s(h):s(f?[f]:[])},u=RQ();return te.jsx(te.Fragment,{children:te.jsxs(oI,{children:[te.jsx(ume,{collapsed:e,collapsible:!0,onCollapse:h=>t(h),style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0},children:te.jsx(Hse,{items:dme,mode:"inline",onClick:h=>{u(h.key)},onOpenChange:c,openKeys:o,selectedKeys:[window.location.hash.slice(1)],theme:"dark"})}),te.jsx(oI,{style:{marginLeft:e?80:200},children:te.jsxs(lme,{children:[te.jsxs(jQ,{children:[te.jsx(du,{Component:()=>te.jsx(nV,{}),path:"/*"}),te.jsx(du,{Component:()=>te.jsx(nV,{}),path:"/setting"}),q5.map(({label:h,component:f})=>{const m=f;return te.jsx(du,{Component:()=>te.jsx(Lg,{children:te.jsx(m,{})}),path:`/${Ui[0]}/${h}`},h)}),J5.map(({label:h,component:f})=>{const m=f;return te.jsx(du,{Component:()=>te.jsx(Lg,{children:te.jsx(m,{})}),path:`/${Ui[1]}/${h}`},h)}),X5.map(({label:h,component:f})=>{const m=f;return te.jsx(du,{Component:()=>te.jsx(Lg,{children:te.jsx(m,{})}),path:`/${Ui[2]}/${h}`},h)}),Y5.map(({label:h,component:f})=>{const m=f;return te.jsx(du,{Component:()=>te.jsx(Lg,{children:te.jsx(m,{})}),path:`/${Ui[3]}/${h}`},h)})]}),te.jsx("a",{"aria-label":"View source on GitHub",className:"github-corner",href:"https://github.com/AgoraIO-Extensions/agora-rtc-react",rel:"noreferrer",target:"_blank",children:te.jsxs("svg",{"aria-hidden":"true",className:"github-corner-svg",height:"80",viewBox:"0 0 250 250",width:"80",children:[te.jsx("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),te.jsx("path",{className:"github-corner-svg-arm",d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}),te.jsx("path",{className:"github-corner-svg-body",d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"})]})})]})})]})})}bu.setLogLevel(2);Eb.createRoot(document.getElementById("root")).render(te.jsx(b.StrictMode,{children:te.jsx($Q,{children:te.jsx(hme,{})})}));
