var GX=Object.defineProperty;var zX=(e,t,o)=>t in e?GX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var gg=(e,t,o)=>(zX(e,typeof t!="symbol"?t+"":t,o),o);function YV(e,t){for(var o=0;o<t.length;o++){const a=t[o];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const u=Object.getOwnPropertyDescriptor(a,c);u&&Object.defineProperty(e,c,u.get?u:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function o(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(c){if(c.ep)return;c.ep=!0;const u=o(c);fetch(c.href,u)}})();var Dt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ul(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function KX(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var o=function a(){if(this instanceof a){var c=[null];c.push.apply(c,arguments);var u=Function.bind.apply(t,c);return new u}return t.apply(this,arguments)};o.prototype=t.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(o,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),o}var qV={exports:{}},wE={},XV={exports:{}},pn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm=Symbol.for("react.element"),YX=Symbol.for("react.portal"),qX=Symbol.for("react.fragment"),XX=Symbol.for("react.strict_mode"),JX=Symbol.for("react.profiler"),QX=Symbol.for("react.provider"),ZX=Symbol.for("react.context"),eJ=Symbol.for("react.forward_ref"),tJ=Symbol.for("react.suspense"),nJ=Symbol.for("react.memo"),rJ=Symbol.for("react.lazy"),wM=Symbol.iterator;function iJ(e){return e===null||typeof e!="object"?null:(e=wM&&e[wM]||e["@@iterator"],typeof e=="function"?e:null)}var JV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QV=Object.assign,ZV={};function Bh(e,t,o){this.props=e,this.context=t,this.refs=ZV,this.updater=o||JV}Bh.prototype.isReactComponent={};Bh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Bh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ej(){}ej.prototype=Bh.prototype;function jI(e,t,o){this.props=e,this.context=t,this.refs=ZV,this.updater=o||JV}var BI=jI.prototype=new ej;BI.constructor=jI;QV(BI,Bh.prototype);BI.isPureReactComponent=!0;var OM=Array.isArray,tj=Object.prototype.hasOwnProperty,$I={current:null},nj={key:!0,ref:!0,__self:!0,__source:!0};function rj(e,t,o){var a,c={},u=null,h=null;if(t!=null)for(a in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(u=""+t.key),t)tj.call(t,a)&&!nj.hasOwnProperty(a)&&(c[a]=t[a]);var f=arguments.length-2;if(f===1)c.children=o;else if(1<f){for(var m=Array(f),g=0;g<f;g++)m[g]=arguments[g+2];c.children=m}if(e&&e.defaultProps)for(a in f=e.defaultProps,f)c[a]===void 0&&(c[a]=f[a]);return{$$typeof:mm,type:e,key:u,ref:h,props:c,_owner:$I.current}}function oJ(e,t){return{$$typeof:mm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function HI(e){return typeof e=="object"&&e!==null&&e.$$typeof===mm}function aJ(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(o){return t[o]})}var AM=/\/+/g;function HC(e,t){return typeof e=="object"&&e!==null&&e.key!=null?aJ(""+e.key):t.toString(36)}function iv(e,t,o,a,c){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(u){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case mm:case YX:h=!0}}if(h)return h=e,c=c(h),e=a===""?"."+HC(h,0):a,OM(c)?(o="",e!=null&&(o=e.replace(AM,"$&/")+"/"),iv(c,t,o,"",function(g){return g})):c!=null&&(HI(c)&&(c=oJ(c,o+(!c.key||h&&h.key===c.key?"":(""+c.key).replace(AM,"$&/")+"/")+e)),t.push(c)),1;if(h=0,a=a===""?".":a+":",OM(e))for(var f=0;f<e.length;f++){u=e[f];var m=a+HC(u,f);h+=iv(u,t,o,m,c)}else if(m=iJ(e),typeof m=="function")for(e=m.call(e),f=0;!(u=e.next()).done;)u=u.value,m=a+HC(u,f++),h+=iv(u,t,o,m,c);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function vg(e,t,o){if(e==null)return e;var a=[],c=0;return iv(e,a,"","",function(u){return t.call(o,u,c++)}),a}function sJ(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(o){(e._status===0||e._status===-1)&&(e._status=1,e._result=o)},function(o){(e._status===0||e._status===-1)&&(e._status=2,e._result=o)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Co={current:null},ov={transition:null},cJ={ReactCurrentDispatcher:Co,ReactCurrentBatchConfig:ov,ReactCurrentOwner:$I};pn.Children={map:vg,forEach:function(e,t,o){vg(e,function(){t.apply(this,arguments)},o)},count:function(e){var t=0;return vg(e,function(){t++}),t},toArray:function(e){return vg(e,function(t){return t})||[]},only:function(e){if(!HI(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};pn.Component=Bh;pn.Fragment=qX;pn.Profiler=JX;pn.PureComponent=jI;pn.StrictMode=XX;pn.Suspense=tJ;pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cJ;pn.cloneElement=function(e,t,o){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=QV({},e.props),c=e.key,u=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,h=$I.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var f=e.type.defaultProps;for(m in t)tj.call(t,m)&&!nj.hasOwnProperty(m)&&(a[m]=t[m]===void 0&&f!==void 0?f[m]:t[m])}var m=arguments.length-2;if(m===1)a.children=o;else if(1<m){f=Array(m);for(var g=0;g<m;g++)f[g]=arguments[g+2];a.children=f}return{$$typeof:mm,type:e.type,key:c,ref:u,props:a,_owner:h}};pn.createContext=function(e){return e={$$typeof:ZX,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:QX,_context:e},e.Consumer=e};pn.createElement=rj;pn.createFactory=function(e){var t=rj.bind(null,e);return t.type=e,t};pn.createRef=function(){return{current:null}};pn.forwardRef=function(e){return{$$typeof:eJ,render:e}};pn.isValidElement=HI;pn.lazy=function(e){return{$$typeof:rJ,_payload:{_status:-1,_result:e},_init:sJ}};pn.memo=function(e,t){return{$$typeof:nJ,type:e,compare:t===void 0?null:t}};pn.startTransition=function(e){var t=ov.transition;ov.transition={};try{e()}finally{ov.transition=t}};pn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};pn.useCallback=function(e,t){return Co.current.useCallback(e,t)};pn.useContext=function(e){return Co.current.useContext(e)};pn.useDebugValue=function(){};pn.useDeferredValue=function(e){return Co.current.useDeferredValue(e)};pn.useEffect=function(e,t){return Co.current.useEffect(e,t)};pn.useId=function(){return Co.current.useId()};pn.useImperativeHandle=function(e,t,o){return Co.current.useImperativeHandle(e,t,o)};pn.useInsertionEffect=function(e,t){return Co.current.useInsertionEffect(e,t)};pn.useLayoutEffect=function(e,t){return Co.current.useLayoutEffect(e,t)};pn.useMemo=function(e,t){return Co.current.useMemo(e,t)};pn.useReducer=function(e,t,o){return Co.current.useReducer(e,t,o)};pn.useRef=function(e){return Co.current.useRef(e)};pn.useState=function(e){return Co.current.useState(e)};pn.useSyncExternalStore=function(e,t,o){return Co.current.useSyncExternalStore(e,t,o)};pn.useTransition=function(){return Co.current.useTransition()};pn.version="18.2.0";XV.exports=pn;var S=XV.exports;const lt=Ul(S),wh=YV({__proto__:null,default:lt},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lJ=S,uJ=Symbol.for("react.element"),dJ=Symbol.for("react.fragment"),hJ=Object.prototype.hasOwnProperty,pJ=lJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fJ={key:!0,ref:!0,__self:!0,__source:!0};function ij(e,t,o){var a,c={},u=null,h=null;o!==void 0&&(u=""+o),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(h=t.ref);for(a in t)hJ.call(t,a)&&!fJ.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:uJ,type:e,key:u,ref:h,props:c,_owner:pJ.current}}wE.Fragment=dJ;wE.jsx=ij;wE.jsxs=ij;qV.exports=wE;var ne=qV.exports;var oj={exports:{}};(function(e,t){(function(o,a){e.exports=a()})(Dt,function(){function o(n,r){return r.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(s){if(s!=="default"&&!(s in n)){var l=Object.getOwnPropertyDescriptor(i,s);Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:function(){return i[s]}})}})}),Object.freeze(n)}var a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Dt<"u"?Dt:typeof self<"u"?self:{},c=function(n){try{return!!n()}catch{return!0}},u=!c(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),h=u,f=Function.prototype,m=f.bind,g=f.call,_=h&&m.bind(g,g),y=h?function(n){return n&&_(n)}:function(n){return n&&function(){return g.apply(n,arguments)}},b=y({}.isPrototypeOf),A=function(n){return n&&n.Math==Math&&n},I=A(typeof globalThis=="object"&&globalThis)||A(typeof window=="object"&&window)||A(typeof self=="object"&&self)||A(typeof a=="object"&&a)||function(){return this}()||Function("return this")(),w=u,D=Function.prototype,x=D.apply,O=D.call,P=typeof Reflect=="object"&&Reflect.apply||(w?O.bind(x):function(){return O.apply(x,arguments)}),M=function(n){return typeof n=="function"},V={},F=!c(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),B=u,H=Function.prototype.call,K=B?H.bind(H):function(){return H.apply(H,arguments)},$={},Z={}.propertyIsEnumerable,z=Object.getOwnPropertyDescriptor,G=z&&!Z.call({1:2},1);$.f=G?function(n){var r=z(this,n);return!!r&&r.enumerable}:Z;var ee,re,oe=function(n,r){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:r}},pe=y,ue=pe({}.toString),me=pe("".slice),fe=function(n){return me(ue(n),8,-1)},se=y,ae=c,de=fe,ce=I.Object,we=se("".split),Ie=ae(function(){return!ce("z").propertyIsEnumerable(0)})?function(n){return de(n)=="String"?we(n,""):ce(n)}:ce,He=I.TypeError,Le=function(n){if(n==null)throw He("Can't call method on "+n);return n},ft=Ie,gt=Le,at=function(n){return ft(gt(n))},rt=M,pt=function(n){return typeof n=="object"?n!==null:rt(n)},Ye={},yt=Ye,kt=I,Lt=M,Xe=function(n){return Lt(n)?n:void 0},qe=function(n,r){return arguments.length<2?Xe(yt[n])||Xe(kt[n]):yt[n]&&yt[n][r]||kt[n]&&kt[n][r]},Ge=qe("navigator","userAgent")||"",nt=I,mt=Ge,bt=nt.process,wt=nt.Deno,Mt=bt&&bt.versions||wt&&wt.version,Yt=Mt&&Mt.v8;Yt&&(re=(ee=Yt.split("."))[0]>0&&ee[0]<4?1:+(ee[0]+ee[1])),!re&&mt&&(!(ee=mt.match(/Edge\/(\d+)/))||ee[1]>=74)&&(ee=mt.match(/Chrome\/(\d+)/))&&(re=+ee[1]);var Nn=re,Ei=Nn,dr=c,Gn=!!Object.getOwnPropertySymbols&&!dr(function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&Ei&&Ei<41}),mn=Gn&&!Symbol.sham&&typeof Symbol.iterator=="symbol",xr=qe,Cn=M,Xt=b,Jt=mn,Ro=I.Object,qi=Jt?function(n){return typeof n=="symbol"}:function(n){var r=xr("Symbol");return Cn(r)&&Xt(r.prototype,Ro(n))},br=I.String,gn=function(n){try{return br(n)}catch{return"Object"}},Ve=M,st=gn,vn=I.TypeError,Ft=function(n){if(Ve(n))return n;throw vn(st(n)+" is not a function")},_i=Ft,Pr=function(n,r){var i=n[r];return i==null?void 0:_i(i)},Xn=K,_t=M,Qt=pt,an=I.TypeError,_r={exports:{}},ci=I,Tr=Object.defineProperty,Dr=function(n,r){try{Tr(ci,n,{value:r,configurable:!0,writable:!0})}catch{ci[n]=r}return r},xi="__core-js_shared__",Xi=I[xi]||Dr(xi,{}),ho=Xi;(_r.exports=function(n,r){return ho[n]||(ho[n]=r!==void 0?r:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var po=Le,Xs=I.Object,Gr=function(n){return Xs(po(n))},Js=Gr,Lc=y({}.hasOwnProperty),Jn=Object.hasOwn||function(n,r){return Lc(Js(n),r)},Mc=y,Pi=0,Uc=Math.random(),Fc=Mc(1 .toString),Yo=function(n){return"Symbol("+(n===void 0?"":n)+")_"+Fc(++Pi+Uc,36)},Qs=I,qa=_r.exports,Io=Jn,Vc=Yo,jc=Gn,Ta=mn,li=qa("wks"),zr=Qs.Symbol,qo=zr&&zr.for,Zs=Ta?zr:zr&&zr.withoutSetter||Vc,ar=function(n){if(!Io(li,n)||!jc&&typeof li[n]!="string"){var r="Symbol."+n;jc&&Io(zr,n)?li[n]=zr[n]:li[n]=Ta&&qo?qo(r):Zs(r)}return li[n]},ec=K,Bc=pt,Os=qi,$l=Pr,Hl=function(n,r){var i,s;if(r==="string"&&_t(i=n.toString)&&!Qt(s=Xn(i,n))||_t(i=n.valueOf)&&!Qt(s=Xn(i,n))||r!=="string"&&_t(i=n.toString)&&!Qt(s=Xn(i,n)))return s;throw an("Can't convert object to primitive value")},Wl=ar,Vn=I.TypeError,En=Wl("toPrimitive"),xn=function(n,r){if(!Bc(n)||Os(n))return n;var i,s=$l(n,En);if(s){if(r===void 0&&(r="default"),i=ec(s,n,r),!Bc(i)||Os(i))return i;throw Vn("Can't convert object to primitive value")}return r===void 0&&(r="number"),Hl(n,r)},Kr=qi,kr=function(n){var r=xn(n,"string");return Kr(r)?r:r+""},fo=pt,Ji=I.document,Xa=fo(Ji)&&fo(Ji.createElement),tc=function(n){return Xa?Ji.createElement(n):{}},up=tc,Si=!F&&!c(function(){return Object.defineProperty(up("div"),"a",{get:function(){return 7}}).a!=7}),Gl=F,qu=K,As=$,nc=oe,$c=at,zl=kr,dp=Jn,hp=Si,Xu=Object.getOwnPropertyDescriptor;V.f=Gl?Xu:function(n,r){if(n=$c(n),r=zl(r),hp)try{return Xu(n,r)}catch{}if(dp(n,r))return nc(!qu(As.f,n,r),n[r])};var pp=c,vt=M,$t=/#|\.prototype\./,Pn=function(n,r){var i=hr[Lr(n)];return i==Ju||i!=Mm&&(vt(r)?pp(r):!!r)},Lr=Pn.normalize=function(n){return String(n).replace($t,".").toLowerCase()},hr=Pn.data={},Mm=Pn.NATIVE="N",Ju=Pn.POLYFILL="P",Qu=Pn,Um=Ft,Zu=u,y$=y(y.bind),fp=function(n,r){return Um(n),r===void 0?n:Zu?y$(n,r):function(){return n.apply(r,arguments)}},Ja={},Xw=F&&c(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),Jw=I,C$=pt,b$=Jw.String,T$=Jw.TypeError,Qa=function(n){if(C$(n))return n;throw T$(b$(n)+" is not an object")},R$=F,I$=Si,w$=Xw,Fm=Qa,Qw=kr,O$=I.TypeError,N_=Object.defineProperty,A$=Object.getOwnPropertyDescriptor,N$="enumerable",x$="configurable",P$="writable";Ja.f=R$?w$?function(n,r,i){if(Fm(n),r=Qw(r),Fm(i),typeof n=="function"&&r==="prototype"&&"value"in i&&P$ in i&&!i.writable){var s=A$(n,r);s&&s.writable&&(n[r]=i.value,i={configurable:x$ in i?i.configurable:s.configurable,enumerable:N$ in i?i.enumerable:s.enumerable,writable:!1})}return N_(n,r,i)}:N_:function(n,r,i){if(Fm(n),r=Qw(r),Fm(i),I$)try{return N_(n,r,i)}catch{}if("get"in i||"set"in i)throw O$("Accessors not supported");return"value"in i&&(n[r]=i.value),n};var D$=Ja,k$=oe,Kl=F?function(n,r,i){return D$.f(n,r,k$(1,i))}:function(n,r,i){return n[r]=i,n},Vm=I,L$=P,M$=y,U$=M,F$=V.f,V$=Qu,ed=Ye,j$=fp,td=Kl,Zw=Jn,B$=function(n){var r=function(i,s,l){if(this instanceof r){switch(arguments.length){case 0:return new n;case 1:return new n(i);case 2:return new n(i,s)}return new n(i,s,l)}return L$(n,this,arguments)};return r.prototype=n.prototype,r},Di=function(n,r){var i,s,l,d,p,v,E,T,C=n.target,R=n.global,L=n.stat,j=n.proto,Y=R?Vm:L?Vm[C]:(Vm[C]||{}).prototype,q=R?ed:ed[C]||td(ed,C,{})[C],X=q.prototype;for(l in r)i=!V$(R?l:C+(L?".":"#")+l,n.forced)&&Y&&Zw(Y,l),p=q[l],i&&(v=n.noTargetGet?(T=F$(Y,l))&&T.value:Y[l]),d=i&&v?v:r[l],i&&typeof p==typeof d||(E=n.bind&&i?j$(d,Vm):n.wrap&&i?B$(d):j&&U$(d)?M$(d):d,(n.sham||d&&d.sham||p&&p.sham)&&td(E,"sham",!0),td(q,l,E),j&&(Zw(ed,s=C+"Prototype")||td(ed,s,{}),td(ed[s],l,d),n.real&&X&&!X[l]&&td(X,l,d)))},$$=Math.ceil,H$=Math.floor,x_=function(n){var r=+n;return r!=r||r===0?0:(r>0?H$:$$)(r)},W$=x_,G$=Math.min,z$=function(n){return n>0?G$(W$(n),9007199254740991):0},Hc=function(n){return z$(n.length)},K$=Ft,Y$=Gr,q$=Ie,X$=Hc,J$=I.TypeError,eO=function(n){return function(r,i,s,l){K$(i);var d=Y$(r),p=q$(d),v=X$(d),E=n?v-1:0,T=n?-1:1;if(s<2)for(;;){if(E in p){l=p[E],E+=T;break}if(E+=T,n?E<0:v<=E)throw J$("Reduce of empty array with no initial value")}for(;n?E>=0:v>E;E+=T)E in p&&(l=i(l,p[E],E,d));return l}},Q$={left:eO(!1),right:eO(!0)},Z$=c,P_=function(n,r){var i=[][n];return!!i&&Z$(function(){i.call(null,r||function(){throw 1},1)})},jm=fe(I.process)=="process",eH=Q$.left,tO=Nn,tH=jm;Di({target:"Array",proto:!0,forced:!P_("reduce")||!tH&&tO>79&&tO<83},{reduce:function(n){var r=arguments.length;return eH(this,n,r,r>1?arguments[1]:void 0)}});var nH=Ye,Wc=function(n){return nH[n+"Prototype"]},rH=Wc("Array").reduce,iH=b,oH=rH,D_=Array.prototype,nO=function(n){var r=n.reduce;return n===D_||iH(D_,n)&&r===D_.reduce?oH:r},Gc=nO;let rO=!0,iO=!0;function Bm(n,r,i){const s=n.match(r);return s&&s.length>=i&&parseInt(s[i],10)}function Yl(n,r,i){if(!n.RTCPeerConnection)return;const s=n.RTCPeerConnection.prototype,l=s.addEventListener;s.addEventListener=function(p,v){if(p!==r)return l.apply(this,arguments);const E=T=>{const C=i(T);C&&(v.handleEvent?v.handleEvent(C):v(C))};return this._eventMap=this._eventMap||{},this._eventMap[r]||(this._eventMap[r]=new Map),this._eventMap[r].set(v,E),l.apply(this,[p,E])};const d=s.removeEventListener;s.removeEventListener=function(p,v){if(p!==r||!this._eventMap||!this._eventMap[r])return d.apply(this,arguments);if(!this._eventMap[r].has(v))return d.apply(this,arguments);const E=this._eventMap[r].get(v);return this._eventMap[r].delete(v),this._eventMap[r].size===0&&delete this._eventMap[r],Object.keys(this._eventMap).length===0&&delete this._eventMap,d.apply(this,[p,E])},Object.defineProperty(s,"on"+r,{get(){return this["_on"+r]},set(p){this["_on"+r]&&(this.removeEventListener(r,this["_on"+r]),delete this["_on"+r]),p&&this.addEventListener(r,this["_on"+r]=p)},enumerable:!0,configurable:!0})}function aH(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(rO=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function sH(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(iO=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function oO(){if(typeof window=="object"){if(rO)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function k_(n,r){iO&&console.warn(n+" is deprecated, please use "+r+" instead.")}function cH(n){const r={browser:null,version:null};if(n===void 0||!n.navigator)return r.browser="Not a browser.",r;const{navigator:i}=n;if(i.mozGetUserMedia)r.browser="firefox",r.version=Bm(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)r.browser="chrome",r.version=Bm(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!n.RTCPeerConnection||!i.userAgent.match(/AppleWebKit\/(\d+)\./))return r.browser="Not a supported browser.",r;r.browser="safari",r.version=Bm(i.userAgent,/AppleWebKit\/(\d+)\./,1),r.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype}return r}function aO(n){return Object.prototype.toString.call(n)==="[object Object]"}function sO(n){var r;return aO(n)?Gc(r=Object.keys(n)).call(r,function(i,s){const l=aO(n[s]),d=l?sO(n[s]):n[s],p=l&&!Object.keys(d).length;return d===void 0||p?i:Object.assign(i,{[s]:d})},{}):n}function cO(n,r,i){const s=i?"outbound-rtp":"inbound-rtp",l=new Map;if(r===null)return l;const d=[];return n.forEach(p=>{p.type==="track"&&p.trackIdentifier===r.id&&d.push(p)}),d.forEach(p=>{n.forEach(v=>{v.type===s&&v.trackId===p.id&&function E(T,C,R){C&&!R.has(C.id)&&(R.set(C.id,C),Object.keys(C).forEach(L=>{L.endsWith("Id")?E(T,T.get(C[L]),R):L.endsWith("Ids")&&C[L].forEach(j=>{E(T,T.get(j),R)})}))}(n,v,l)})}),l}var lH=_r.exports,uH=Yo,lO=lH("keys"),$m=function(n){return lO[n]||(lO[n]=uH(n))},dH=!c(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),hH=I,pH=Jn,fH=M,mH=Gr,gH=dH,uO=$m("IE_PROTO"),L_=hH.Object,vH=L_.prototype,M_=gH?L_.getPrototypeOf:function(n){var r=mH(n);if(pH(r,uO))return r[uO];var i=r.constructor;return fH(i)&&r instanceof i?i.prototype:r instanceof L_?vH:null},dO=I,EH=M,_H=dO.String,SH=dO.TypeError,yH=y,CH=Qa,bH=function(n){if(typeof n=="object"||EH(n))return n;throw SH("Can't set "+_H(n)+" as a prototype")},TH=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,i={};try{(n=yH(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]),r=i instanceof Array}catch{}return function(s,l){return CH(s),bH(l),r?n(s,l):s.__proto__=l,s}}():void 0),Hm={},RH=x_,IH=Math.max,wH=Math.min,U_=function(n,r){var i=RH(n);return i<0?IH(i+r,0):wH(i,r)},OH=at,AH=U_,NH=Hc,hO=function(n){return function(r,i,s){var l,d=OH(r),p=NH(d),v=AH(s,p);if(n&&i!=i){for(;p>v;)if((l=d[v++])!=l)return!0}else for(;p>v;v++)if((n||v in d)&&d[v]===i)return n||v||0;return!n&&-1}},xH={includes:hO(!0),indexOf:hO(!1)},Wm={},F_=Jn,PH=at,DH=xH.indexOf,kH=Wm,pO=y([].push),fO=function(n,r){var i,s=PH(n),l=0,d=[];for(i in s)!F_(kH,i)&&F_(s,i)&&pO(d,i);for(;r.length>l;)F_(s,i=r[l++])&&(~DH(d,i)||pO(d,i));return d},V_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],LH=fO,MH=V_.concat("length","prototype");Hm.f=Object.getOwnPropertyNames||function(n){return LH(n,MH)};var j_={};j_.f=Object.getOwnPropertySymbols;var UH=qe,FH=Hm,VH=j_,jH=Qa,BH=y([].concat),$H=UH("Reflect","ownKeys")||function(n){var r=FH.f(jH(n)),i=VH.f;return i?BH(r,i(n)):r},mO=Jn,HH=$H,WH=V,GH=Ja,B_={},zH=fO,KH=V_,$_=Object.keys||function(n){return zH(n,KH)},YH=F,qH=Xw,XH=Ja,JH=Qa,QH=at,ZH=$_;B_.f=YH&&!qH?Object.defineProperties:function(n,r){JH(n);for(var i,s=QH(r),l=ZH(r),d=l.length,p=0;d>p;)XH.f(n,i=l[p++],s[i]);return n};var Gm,gO=qe("document","documentElement"),eW=Qa,tW=B_,vO=V_,nW=Wm,rW=gO,iW=tc,EO=$m("IE_PROTO"),H_=function(){},_O=function(n){return"<script>"+n+"<\/script>"},SO=function(n){n.write(_O("")),n.close();var r=n.parentWindow.Object;return n=null,r},zm=function(){try{Gm=new ActiveXObject("htmlfile")}catch{}var n,r;zm=typeof document<"u"?document.domain&&Gm?SO(Gm):((r=iW("iframe")).style.display="none",rW.appendChild(r),r.src="javascript:",(n=r.contentWindow.document).open(),n.write(_O("document.F=Object")),n.close(),n.F):SO(Gm);for(var i=vO.length;i--;)delete zm.prototype[vO[i]];return zm()};nW[EO]=!0;var Km=Object.create||function(n,r){var i;return n!==null?(H_.prototype=eW(n),i=new H_,H_.prototype=null,i[EO]=n):i=zm(),r===void 0?i:tW.f(i,r)},oW=y("".replace),aW=String(Error("zxcasd").stack),yO=/\n\s*at [^:]*:[^\n]*/,sW=yO.test(aW),cW=pt,lW=Kl,nd={},uW=nd,dW=ar("iterator"),hW=Array.prototype,CO={};CO[ar("toStringTag")]="z";var W_=String(CO)==="[object z]",pW=I,fW=W_,mW=M,Ym=fe,gW=ar("toStringTag"),vW=pW.Object,EW=Ym(function(){return arguments}())=="Arguments",zc=fW?Ym:function(n){var r,i,s;return n===void 0?"Undefined":n===null?"Null":typeof(i=function(l,d){try{return l[d]}catch{}}(r=vW(n),gW))=="string"?i:EW?Ym(r):(s=Ym(r))=="Object"&&mW(r.callee)?"Arguments":s},_W=zc,bO=Pr,SW=nd,yW=ar("iterator"),TO=function(n){if(n!=null)return bO(n,yW)||bO(n,"@@iterator")||SW[_W(n)]},CW=K,bW=Ft,TW=Qa,RW=gn,IW=TO,wW=I.TypeError,OW=K,RO=Qa,AW=Pr,NW=fp,xW=K,PW=Qa,DW=gn,kW=function(n){return n!==void 0&&(uW.Array===n||hW[dW]===n)},LW=Hc,IO=b,MW=function(n,r){var i=arguments.length<2?IW(n):r;if(bW(i))return TW(CW(i,n));throw wW(RW(n)+" is not iterable")},UW=TO,wO=function(n,r,i){var s,l;RO(n);try{if(!(s=AW(n,"return"))){if(r==="throw")throw i;return i}s=OW(s,n)}catch(d){l=!0,s=d}if(r==="throw")throw i;if(l)throw s;return RO(s),i},FW=I.TypeError,qm=function(n,r){this.stopped=n,this.result=r},OO=qm.prototype,Xm=function(n,r,i){var s,l,d,p,v,E,T,C=i&&i.that,R=!(!i||!i.AS_ENTRIES),L=!(!i||!i.IS_ITERATOR),j=!(!i||!i.INTERRUPTED),Y=NW(r,C),q=function(le){return s&&wO(s,"normal",le),new qm(!0,le)},X=function(le){return R?(PW(le),j?Y(le[0],le[1],q):Y(le[0],le[1])):j?Y(le,q):Y(le)};if(L)s=n;else{if(!(l=UW(n)))throw FW(DW(n)+" is not iterable");if(kW(l)){for(d=0,p=LW(n);p>d;d++)if((v=X(n[d]))&&IO(OO,v))return v;return new qm(!1)}s=MW(n,l)}for(E=s.next;!(T=xW(E,s)).done;){try{v=X(T.value)}catch(le){wO(s,"throw",le)}if(typeof v=="object"&&v&&IO(OO,v))return v}return new qm(!1)},VW=zc,jW=I.String,rd=function(n){if(VW(n)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return jW(n)},BW=rd,$W=oe,HW=!c(function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",$W(1,7)),n.stack!==7)}),WW=Di,GW=I,zW=b,KW=M_,Jm=TH,YW=function(n,r,i){for(var s=HH(r),l=GH.f,d=WH.f,p=0;p<s.length;p++){var v=s[p];mO(n,v)||i&&mO(i,v)||l(n,v,d(r,v))}},AO=Km,Qm=Kl,G_=oe,qW=function(n,r){if(sW&&typeof n=="string")for(;r--;)n=oW(n,yO,"");return n},XW=function(n,r){cW(r)&&"cause"in r&&lW(n,"cause",r.cause)},JW=Xm,QW=function(n,r){return n===void 0?arguments.length<2?"":r:BW(n)},ZW=HW,e7=ar("toStringTag"),Zm=GW.Error,t7=[].push,mp=function(n,r){var i,s=arguments.length>2?arguments[2]:void 0,l=zW(z_,this);Jm?i=Jm(new Zm,l?KW(this):z_):(i=l?this:AO(z_),Qm(i,e7,"Error")),r!==void 0&&Qm(i,"message",QW(r)),ZW&&Qm(i,"stack",qW(i.stack,1)),XW(i,s);var d=[];return JW(n,t7,{that:d}),Qm(i,"errors",d),i};Jm?Jm(mp,Zm):YW(mp,Zm,{name:!0});var z_=mp.prototype=AO(Zm.prototype,{constructor:G_(1,mp),message:G_(1,""),name:G_(1,"AggregateError")});WW({global:!0},{AggregateError:mp});var n7=M,K_=Xi,r7=y(Function.toString);n7(K_.inspectSource)||(K_.inspectSource=function(n){return r7(n)});var e0,gp,t0,Y_=K_.inspectSource,i7=M,o7=Y_,NO=I.WeakMap,a7=i7(NO)&&/native code/.test(o7(NO)),xO=I,q_=y,s7=pt,c7=Kl,X_=Jn,J_=Xi,l7=$m,u7=Wm,PO="Object already initialized",Q_=xO.TypeError,d7=xO.WeakMap;if(a7||J_.state){var ql=J_.state||(J_.state=new d7),h7=q_(ql.get),DO=q_(ql.has),p7=q_(ql.set);e0=function(n,r){if(DO(ql,n))throw new Q_(PO);return r.facade=n,p7(ql,n,r),r},gp=function(n){return h7(ql,n)||{}},t0=function(n){return DO(ql,n)}}else{var id=l7("state");u7[id]=!0,e0=function(n,r){if(X_(n,id))throw new Q_(PO);return r.facade=n,c7(n,id,r),r},gp=function(n){return X_(n,id)?n[id]:{}},t0=function(n){return X_(n,id)}}var Xl,kO,LO,n0={set:e0,get:gp,has:t0,enforce:function(n){return t0(n)?gp(n):e0(n,{})},getterFor:function(n){return function(r){var i;if(!s7(r)||(i=gp(r)).type!==n)throw Q_("Incompatible receiver, "+n+" required");return i}}},Z_=F,f7=Jn,MO=Function.prototype,m7=Z_&&Object.getOwnPropertyDescriptor,eS=f7(MO,"name"),UO={EXISTS:eS,PROPER:eS&&(function(){}).name==="something",CONFIGURABLE:eS&&(!Z_||Z_&&m7(MO,"name").configurable)},g7=Kl,r0=function(n,r,i,s){s&&s.enumerable?n[r]=i:g7(n,r,i)},v7=c,E7=M,_7=Km,FO=M_,S7=r0,tS=ar("iterator"),VO=!1;[].keys&&("next"in(LO=[].keys())?(kO=FO(FO(LO)))!==Object.prototype&&(Xl=kO):VO=!0);var y7=Xl==null||v7(function(){var n={};return Xl[tS].call(n)!==n});E7((Xl=y7?{}:_7(Xl))[tS])||S7(Xl,tS,function(){return this});var jO={IteratorPrototype:Xl,BUGGY_SAFARI_ITERATORS:VO},C7=zc,b7=W_?{}.toString:function(){return"[object "+C7(this)+"]"},T7=W_,R7=Ja.f,I7=Kl,w7=Jn,O7=b7,BO=ar("toStringTag"),vp=function(n,r,i,s){if(n){var l=i?n:n.prototype;w7(l,BO)||R7(l,BO,{configurable:!0,value:r}),s&&!T7&&I7(l,"toString",O7)}},A7=jO.IteratorPrototype,N7=Km,x7=oe,P7=vp,D7=nd,k7=function(){return this},L7=Di,M7=K,U7=function(n,r,i,s){var l=r+" Iterator";return n.prototype=N7(A7,{next:x7(+!s,i)}),P7(n,l,!1,!0),D7[l]=k7,n},F7=M_,V7=vp,$O=r0,HO=nd,j7=UO.PROPER,i0=jO.BUGGY_SAFARI_ITERATORS,nS=ar("iterator"),WO="keys",o0="values",GO="entries",B7=function(){return this},zO=function(n,r,i,s,l,d,p){U7(i,r,s);var v,E,T,C=function(le){if(le===l&&q)return q;if(!i0&&le in j)return j[le];switch(le){case WO:case o0:case GO:return function(){return new i(this,le)}}return function(){return new i(this)}},R=r+" Iterator",L=!1,j=n.prototype,Y=j[nS]||j["@@iterator"]||l&&j[l],q=!i0&&Y||C(l),X=r=="Array"&&j.entries||Y;if(X&&(v=F7(X.call(new n)))!==Object.prototype&&v.next&&(V7(v,R,!0,!0),HO[R]=B7),j7&&l==o0&&Y&&Y.name!==o0&&(L=!0,q=function(){return M7(Y,this)}),l)if(E={values:C(o0),keys:d?q:C(WO),entries:C(GO)},p)for(T in E)(i0||L||!(T in j))&&$O(j,T,E[T]);else L7({target:r,proto:!0,forced:i0||L},E);return p&&j[nS]!==q&&$O(j,nS,q,{name:l}),HO[r]=q,E},$7=at,KO=nd,YO=n0;Ja.f;var H7=zO,qO="Array Iterator",W7=YO.set,G7=YO.getterFor(qO);H7(Array,"Array",function(n,r){W7(this,{type:qO,target:$7(n),index:0,kind:r})},function(){var n=G7(this),r=n.target,i=n.kind,s=n.index++;return!r||s>=r.length?(n.target=void 0,{value:void 0,done:!0}):i=="keys"?{value:s,done:!1}:i=="values"?{value:r[s],done:!1}:{value:[s,r[s]],done:!1}},"values"),KO.Arguments=KO.Array;var XO=I.Promise,z7=r0,K7=qe,Y7=Ja,q7=F,JO=ar("species"),X7=b,J7=I.TypeError,QO=ar("iterator"),ZO=!1;try{var Q7=0,eA={next:function(){return{done:!!Q7++}},return:function(){ZO=!0}};eA[QO]=function(){return this},Array.from(eA,function(){throw 2})}catch{}var Z7=y,eG=c,tA=M,tG=zc,nG=Y_,nA=function(){},rG=[],rA=qe("Reflect","construct"),rS=/^\s*(?:class|function)\b/,iG=Z7(rS.exec),oG=!rS.exec(nA),Ep=function(n){if(!tA(n))return!1;try{return rA(nA,rG,n),!0}catch{return!1}},iA=function(n){if(!tA(n))return!1;switch(tG(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return oG||!!iG(rS,nG(n))}catch{return!0}};iA.sham=!0;var _p,od,oA,iS,oS=!rA||eG(function(){var n;return Ep(Ep.call)||!Ep(Object)||!Ep(function(){n=!0})||n})?iA:Ep,aG=oS,sG=gn,cG=I.TypeError,aA=Qa,lG=function(n){if(aG(n))return n;throw cG(sG(n)+" is not a constructor")},uG=ar("species"),sA=function(n,r){var i,s=aA(n).constructor;return s===void 0||(i=aA(s)[uG])==null?r:lG(i)},aS=y([].slice),cA=/(?:ipad|iphone|ipod).*applewebkit/i.test(Ge),Xo=I,dG=P,hG=fp,lA=M,pG=Jn,fG=c,uA=gO,mG=aS,dA=tc,gG=cA,vG=jm,sS=Xo.setImmediate,cS=Xo.clearImmediate,EG=Xo.process,lS=Xo.Dispatch,_G=Xo.Function,hA=Xo.MessageChannel,SG=Xo.String,uS=0,Sp={},yG="onreadystatechange";try{_p=Xo.location}catch{}var dS=function(n){if(pG(Sp,n)){var r=Sp[n];delete Sp[n],r()}},hS=function(n){return function(){dS(n)}},pA=function(n){dS(n.data)},fA=function(n){Xo.postMessage(SG(n),_p.protocol+"//"+_p.host)};sS&&cS||(sS=function(n){var r=mG(arguments,1);return Sp[++uS]=function(){dG(lA(n)?n:_G(n),void 0,r)},od(uS),uS},cS=function(n){delete Sp[n]},vG?od=function(n){EG.nextTick(hS(n))}:lS&&lS.now?od=function(n){lS.now(hS(n))}:hA&&!gG?(iS=(oA=new hA).port2,oA.port1.onmessage=pA,od=hG(iS.postMessage,iS)):Xo.addEventListener&&lA(Xo.postMessage)&&!Xo.importScripts&&_p&&_p.protocol!=="file:"&&!fG(fA)?(od=fA,Xo.addEventListener("message",pA,!1)):od=yG in dA("script")?function(n){uA.appendChild(dA("script")).onreadystatechange=function(){uA.removeChild(this),dS(n)}}:function(n){setTimeout(hS(n),0)});var yp,Jl,Cp,ad,pS,fS,mS,mA,gA={set:sS,clear:cS},CG=I,bG=/ipad|iphone|ipod/i.test(Ge)&&CG.Pebble!==void 0,TG=/web0s(?!.*chrome)/i.test(Ge),Ql=I,vA=fp,RG=V.f,gS=gA.set,IG=cA,wG=bG,OG=TG,vS=jm,EA=Ql.MutationObserver||Ql.WebKitMutationObserver,_A=Ql.document,SA=Ql.process,a0=Ql.Promise,yA=RG(Ql,"queueMicrotask"),CA=yA&&yA.value;CA||(yp=function(){var n,r;for(vS&&(n=SA.domain)&&n.exit();Jl;){r=Jl.fn,Jl=Jl.next;try{r()}catch(i){throw Jl?ad():Cp=void 0,i}}Cp=void 0,n&&n.enter()},IG||vS||OG||!EA||!_A?!wG&&a0&&a0.resolve?((mS=a0.resolve(void 0)).constructor=a0,mA=vA(mS.then,mS),ad=function(){mA(yp)}):vS?ad=function(){SA.nextTick(yp)}:(gS=vA(gS,Ql),ad=function(){gS(yp)}):(pS=!0,fS=_A.createTextNode(""),new EA(yp).observe(fS,{characterData:!0}),ad=function(){fS.data=pS=!pS}));var AG=CA||function(n){var r={fn:n,next:void 0};Cp&&(Cp.next=r),Jl||(Jl=r,ad()),Cp=r},sd={},bA=Ft,NG=function(n){var r,i;this.promise=new n(function(s,l){if(r!==void 0||i!==void 0)throw TypeError("Bad Promise constructor");r=s,i=l}),this.resolve=bA(r),this.reject=bA(i)};sd.f=function(n){return new NG(n)};var xG=Qa,PG=pt,DG=sd,TA=function(n,r){if(xG(n),PG(r)&&r.constructor===n)return r;var i=DG.f(n);return(0,i.resolve)(r),i.promise},kG=I,s0=function(n){try{return{error:!1,value:n()}}catch(r){return{error:!0,value:r}}},RA=function(){this.head=null,this.tail=null};RA.prototype={add:function(n){var r={item:n,next:null};this.head?this.tail.next=r:this.head=r,this.tail=r},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}};var ES,IA,_S,LG=typeof window=="object",c0=Di,rc=I,MG=qe,Kc=K,SS=XO,UG=function(n,r,i){for(var s in r)i&&i.unsafe&&n[s]?n[s]=r[s]:z7(n,s,r[s],i);return n},FG=vp,VG=function(n){var r=K7(n),i=Y7.f;q7&&r&&!r[JO]&&i(r,JO,{configurable:!0,get:function(){return this}})},yS=Ft,l0=M,jG=pt,BG=function(n,r){if(X7(r,n))return n;throw J7("Incorrect invocation")},$G=Y_,wA=Xm,HG=function(n,r){if(!r&&!ZO)return!1;var i=!1;try{var s={};s[QO]=function(){return{next:function(){return{done:i=!0}}}},n(s)}catch{}return i},WG=sA,OA=gA.set,CS=AG,GG=TA,zG=function(n,r){var i=kG.console;i&&i.error&&(arguments.length==1?i.error(n):i.error(n,r))},AA=sd,bS=s0,KG=RA,TS=n0,YG=Qu,qG=LG,u0=jm,NA=Nn,XG=ar("species"),Ns="Promise",xA=TS.getterFor(Ns),JG=TS.set,QG=TS.getterFor(Ns),ZG=SS&&SS.prototype,xs=SS,d0=ZG,PA=rc.TypeError,RS=rc.document,IS=rc.process,cd=AA.f,ez=cd,tz=!!(RS&&RS.createEvent&&rc.dispatchEvent),DA=l0(rc.PromiseRejectionEvent),kA="unhandledrejection",h0=YG(Ns,function(){var n=$G(xs),r=n!==String(xs);if(!r&&NA===66||!d0.finally)return!0;if(NA>=51&&/native code/.test(n))return!1;var i=new xs(function(l){l(1)}),s=function(l){l(function(){},function(){})};return(i.constructor={})[XG]=s,!(i.then(function(){})instanceof s)||!r&&qG&&!DA}),nz=h0||!HG(function(n){xs.all(n).catch(function(){})}),LA=function(n){var r;return!(!jG(n)||!l0(r=n.then))&&r},MA=function(n,r){var i,s,l,d=r.value,p=r.state==1,v=p?n.ok:n.fail,E=n.resolve,T=n.reject,C=n.domain;try{v?(p||(r.rejection===2&&iz(r),r.rejection=1),v===!0?i=d:(C&&C.enter(),i=v(d),C&&(C.exit(),l=!0)),i===n.promise?T(PA("Promise-chain cycle")):(s=LA(i))?Kc(s,i,E,T):E(i)):T(d)}catch(R){C&&!l&&C.exit(),T(R)}},UA=function(n,r){n.notified||(n.notified=!0,CS(function(){for(var i,s=n.reactions;i=s.get();)MA(i,n);n.notified=!1,r&&!n.rejection&&rz(n)}))},FA=function(n,r,i){var s,l;tz?((s=RS.createEvent("Event")).promise=r,s.reason=i,s.initEvent(n,!1,!0),rc.dispatchEvent(s)):s={promise:r,reason:i},!DA&&(l=rc["on"+n])?l(s):n===kA&&zG("Unhandled promise rejection",i)},rz=function(n){Kc(OA,rc,function(){var r,i=n.facade,s=n.value;if(VA(n)&&(r=bS(function(){u0?IS.emit("unhandledRejection",s,i):FA(kA,i,s)}),n.rejection=u0||VA(n)?2:1,r.error))throw r.value})},VA=function(n){return n.rejection!==1&&!n.parent},iz=function(n){Kc(OA,rc,function(){var r=n.facade;u0?IS.emit("rejectionHandled",r):FA("rejectionhandled",r,n.value)})},ld=function(n,r,i){return function(s){n(r,s,i)}},ud=function(n,r,i){n.done||(n.done=!0,i&&(n=i),n.value=r,n.state=2,UA(n,!0))},wS=function(n,r,i){if(!n.done){n.done=!0,i&&(n=i);try{if(n.facade===r)throw PA("Promise can't be resolved itself");var s=LA(r);s?CS(function(){var l={done:!1};try{Kc(s,r,ld(wS,l,n),ld(ud,l,n))}catch(d){ud(l,d,n)}}):(n.value=r,n.state=1,UA(n,!1))}catch(l){ud({done:!1},l,n)}}};h0&&(d0=(xs=function(n){BG(this,d0),yS(n),Kc(ES,this);var r=xA(this);try{n(ld(wS,r),ld(ud,r))}catch(i){ud(r,i)}}).prototype,(ES=function(n){JG(this,{type:Ns,done:!1,notified:!1,parent:!1,reactions:new KG,rejection:!1,state:0,value:void 0})}).prototype=UG(d0,{then:function(n,r){var i=QG(this),s=cd(WG(this,xs));return i.parent=!0,s.ok=!l0(n)||n,s.fail=l0(r)&&r,s.domain=u0?IS.domain:void 0,i.state==0?i.reactions.add(s):CS(function(){MA(s,i)}),s.promise},catch:function(n){return this.then(void 0,n)}}),IA=function(){var n=new ES,r=xA(n);this.promise=n,this.resolve=ld(wS,r),this.reject=ld(ud,r)},AA.f=cd=function(n){return n===xs||n===_S?new IA(n):ez(n)}),c0({global:!0,wrap:!0,forced:h0},{Promise:xs}),FG(xs,Ns,!1,!0),VG(Ns),_S=MG(Ns),c0({target:Ns,stat:!0,forced:h0},{reject:function(n){var r=cd(this);return Kc(r.reject,void 0,n),r.promise}}),c0({target:Ns,stat:!0,forced:!0},{resolve:function(n){return GG(this===_S?xs:this,n)}}),c0({target:Ns,stat:!0,forced:nz},{all:function(n){var r=this,i=cd(r),s=i.resolve,l=i.reject,d=bS(function(){var p=yS(r.resolve),v=[],E=0,T=1;wA(n,function(C){var R=E++,L=!1;T++,Kc(p,r,C).then(function(j){L||(L=!0,v[R]=j,--T||s(v))},l)}),--T||s(v)});return d.error&&l(d.value),i.promise},race:function(n){var r=this,i=cd(r),s=i.reject,l=bS(function(){var d=yS(r.resolve);wA(n,function(p){Kc(d,r,p).then(i.resolve,s)})});return l.error&&s(l.value),i.promise}});var oz=K,az=Ft,sz=sd,cz=s0,lz=Xm;Di({target:"Promise",stat:!0},{allSettled:function(n){var r=this,i=sz.f(r),s=i.resolve,l=i.reject,d=cz(function(){var p=az(r.resolve),v=[],E=0,T=1;lz(n,function(C){var R=E++,L=!1;T++,oz(p,r,C).then(function(j){L||(L=!0,v[R]={status:"fulfilled",value:j},--T||s(v))},function(j){L||(L=!0,v[R]={status:"rejected",reason:j},--T||s(v))})}),--T||s(v)});return d.error&&l(d.value),i.promise}});var uz=Ft,dz=qe,hz=K,pz=sd,fz=s0,mz=Xm,jA="No one promise resolved";Di({target:"Promise",stat:!0},{any:function(n){var r=this,i=dz("AggregateError"),s=pz.f(r),l=s.resolve,d=s.reject,p=fz(function(){var v=uz(r.resolve),E=[],T=0,C=1,R=!1;mz(n,function(L){var j=T++,Y=!1;C++,hz(v,r,L).then(function(q){Y||R||(R=!0,l(q))},function(q){Y||R||(Y=!0,E[j]=q,--C||d(new i(E,jA)))})}),--C||d(new i(E,jA))});return p.error&&d(p.value),s.promise}});var BA=XO,gz=qe,vz=M,Ez=sA,$A=TA;Di({target:"Promise",proto:!0,real:!0,forced:!!BA&&c(function(){BA.prototype.finally.call({then:function(){}},function(){})})},{finally:function(n){var r=Ez(this,gz("Promise")),i=vz(n);return this.then(i?function(s){return $A(r,n()).then(function(){return s})}:n,i?function(s){return $A(r,n()).then(function(){throw s})}:n)}});var OS=y,_z=x_,Sz=rd,yz=Le,Cz=OS("".charAt),HA=OS("".charCodeAt),bz=OS("".slice),WA=function(n){return function(r,i){var s,l,d=Sz(yz(r)),p=_z(i),v=d.length;return p<0||p>=v?n?"":void 0:(s=HA(d,p))<55296||s>56319||p+1===v||(l=HA(d,p+1))<56320||l>57343?n?Cz(d,p):s:n?bz(d,p,p+2):l-56320+(s-55296<<10)+65536}},Tz={codeAt:WA(!1),charAt:WA(!0)}.charAt,Rz=rd,GA=n0,Iz=zO,zA="String Iterator",wz=GA.set,Oz=GA.getterFor(zA);Iz(String,"String",function(n){wz(this,{type:zA,string:Rz(n),index:0})},function(){var n,r=Oz(this),i=r.string,s=r.index;return s>=i.length?{value:void 0,done:!0}:(n=Tz(i,s),r.index+=n.length,{value:n,done:!1})});var Az=Ye.Promise,Nz={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},xz=I,Pz=zc,Dz=Kl,KA=nd,YA=ar("toStringTag");for(var AS in Nz){var qA=xz[AS],NS=qA&&qA.prototype;NS&&Pz(NS)!==YA&&Dz(NS,YA,AS),KA[AS]=KA.Array}var XA=Az,Pe=XA;const JA=oO;function QA(n,r){const i=n&&n.navigator;if(!i.mediaDevices)return;const s=function(p){if(typeof p!="object"||p.mandatory||p.optional)return p;const v={};return Object.keys(p).forEach(E=>{if(E==="require"||E==="advanced"||E==="mediaSource")return;const T=typeof p[E]=="object"?p[E]:{ideal:p[E]};T.exact!==void 0&&typeof T.exact=="number"&&(T.min=T.max=T.exact);const C=function(R,L){return R?R+L.charAt(0).toUpperCase()+L.slice(1):L==="deviceId"?"sourceId":L};if(T.ideal!==void 0){v.optional=v.optional||[];let R={};typeof T.ideal=="number"?(R[C("min",E)]=T.ideal,v.optional.push(R),R={},R[C("max",E)]=T.ideal,v.optional.push(R)):(R[C("",E)]=T.ideal,v.optional.push(R))}T.exact!==void 0&&typeof T.exact!="number"?(v.mandatory=v.mandatory||{},v.mandatory[C("",E)]=T.exact):["min","max"].forEach(R=>{T[R]!==void 0&&(v.mandatory=v.mandatory||{},v.mandatory[C(R,E)]=T[R])})}),p.advanced&&(v.optional=(v.optional||[]).concat(p.advanced)),v},l=function(p,v){if(r.version>=61)return v(p);if((p=JSON.parse(JSON.stringify(p)))&&typeof p.audio=="object"){const E=function(T,C,R){C in T&&!(R in T)&&(T[R]=T[C],delete T[C])};E((p=JSON.parse(JSON.stringify(p))).audio,"autoGainControl","googAutoGainControl"),E(p.audio,"noiseSuppression","googNoiseSuppression"),p.audio=s(p.audio)}if(p&&typeof p.video=="object"){let E=p.video.facingMode;E=E&&(typeof E=="object"?E:{ideal:E});const T=r.version<66;if(E&&(E.exact==="user"||E.exact==="environment"||E.ideal==="user"||E.ideal==="environment")&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||T)){let C;if(delete p.video.facingMode,E.exact==="environment"||E.ideal==="environment"?C=["back","rear"]:E.exact!=="user"&&E.ideal!=="user"||(C=["front"]),C)return i.mediaDevices.enumerateDevices().then(R=>{let L=(R=R.filter(j=>j.kind==="videoinput")).find(j=>C.some(Y=>j.label.toLowerCase().includes(Y)));return!L&&R.length&&C.includes("back")&&(L=R[R.length-1]),L&&(p.video.deviceId=E.exact?{exact:L.deviceId}:{ideal:L.deviceId}),p.video=s(p.video),JA("chrome: "+JSON.stringify(p)),v(p)})}p.video=s(p.video)}return JA("chrome: "+JSON.stringify(p)),v(p)},d=function(p){return r.version>=64?p:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[p.name]||p.name,message:p.message,constraint:p.constraint||p.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(i.getUserMedia=(function(p,v,E){l(p,T=>{i.webkitGetUserMedia(T,v,C=>{E&&E(d(C))})})}).bind(i),i.mediaDevices.getUserMedia){const p=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(v){return l(v,E=>p(E).then(T=>{if(E.audio&&!T.getAudioTracks().length||E.video&&!T.getVideoTracks().length)throw T.getTracks().forEach(C=>{C.stop()}),new DOMException("","NotFoundError");return T},T=>Pe.reject(d(T))))}}}function ZA(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function eN(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(i){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=i)},enumerable:!0,configurable:!0});const r=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",s=>{let l;l=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(p=>p.track&&p.track.id===s.track.id):{track:s.track};const d=new Event("track");d.track=s.track,d.receiver=l,d.transceiver={receiver:l},d.streams=[i.stream],this.dispatchEvent(d)}),i.stream.getTracks().forEach(s=>{let l;l=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(p=>p.track&&p.track.id===s.id):{track:s};const d=new Event("track");d.track=s,d.receiver=l,d.transceiver={receiver:l},d.streams=[i.stream],this.dispatchEvent(d)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}else Yl(n,"track",r=>(r.transceiver||Object.defineProperty(r,"transceiver",{value:{receiver:r.receiver}}),r))}function tN(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const r=function(l,d){return{track:d,get dtmf(){return this._dtmf===void 0&&(d.kind==="audio"?this._dtmf=l.createDTMFSender(d):this._dtmf=null),this._dtmf},_pc:l}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const l=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(p,v){let E=l.apply(this,arguments);return E||(E=r(this,p),this._senders.push(E)),E};const d=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(p){d.apply(this,arguments);const v=this._senders.indexOf(p);v!==-1&&this._senders.splice(v,1)}}const i=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],i.apply(this,[l]),l.getTracks().forEach(d=>{this._senders.push(r(this,d))})};const s=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],s.apply(this,[l]),l.getTracks().forEach(d=>{const p=this._senders.find(v=>v.track===d);p&&this._senders.splice(this._senders.indexOf(p),1)})}}else if(typeof n=="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const r=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const i=r.apply(this,[]);return i.forEach(s=>s._pc=this),i},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function nN(n){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[i,s,l]=arguments;if(arguments.length>0&&typeof i=="function")return r.apply(this,arguments);if(r.length===0&&(arguments.length===0||typeof i!="function"))return r.apply(this,[]);const d=function(v){const E={};return v.result().forEach(T=>{const C={id:T.id,timestamp:T.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[T.type]||T.type};T.names().forEach(R=>{C[R]=T.stat(R)}),E[C.id]=C}),E},p=function(v){return new Map(Object.keys(v).map(E=>[E,v[E]]))};if(arguments.length>=2){const v=function(E){s(p(d(E)))};return r.apply(this,[v,i])}return new Pe((v,E)=>{r.apply(this,[function(T){v(p(d(T)))},E])}).then(s,l)}}function rN(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const i=n.RTCPeerConnection.prototype.getSenders;i&&(n.RTCPeerConnection.prototype.getSenders=function(){const l=i.apply(this,[]);return l.forEach(d=>d._pc=this),l});const s=n.RTCPeerConnection.prototype.addTrack;s&&(n.RTCPeerConnection.prototype.addTrack=function(){const l=s.apply(this,arguments);return l._pc=this,l}),n.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(d=>cO(d,l.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const i=n.RTCPeerConnection.prototype.getReceivers;i&&(n.RTCPeerConnection.prototype.getReceivers=function(){const s=i.apply(this,[]);return s.forEach(l=>l._pc=this),s}),Yl(n,"track",s=>(s.receiver._pc=s.srcElement,s)),n.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>cO(l,s.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype)||!("getStats"in n.RTCRtpReceiver.prototype))return;const r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const i=arguments[0];let s,l,d;return this.getSenders().forEach(p=>{p.track===i&&(s?d=!0:s=p)}),this.getReceivers().forEach(p=>(p.track===i&&(l?d=!0:l=p),p.track===i)),d||s&&l?Pe.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():l?l.getStats():Pe.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return r.apply(this,arguments)}}function iN(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(d=>this._shimmedLocalStreams[d][0])};const r=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(d,p){if(!p)return r.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const v=r.apply(this,arguments);return this._shimmedLocalStreams[p.id]?this._shimmedLocalStreams[p.id].indexOf(v)===-1&&this._shimmedLocalStreams[p.id].push(v):this._shimmedLocalStreams[p.id]=[p,v],v};const i=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(d){this._shimmedLocalStreams=this._shimmedLocalStreams||{},d.getTracks().forEach(E=>{if(this.getSenders().find(T=>T.track===E))throw new DOMException("Track already exists.","InvalidAccessError")});const p=this.getSenders();i.apply(this,arguments);const v=this.getSenders().filter(E=>p.indexOf(E)===-1);this._shimmedLocalStreams[d.id]=[d].concat(v)};const s=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[d.id],s.apply(this,arguments)};const l=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},d&&Object.keys(this._shimmedLocalStreams).forEach(p=>{const v=this._shimmedLocalStreams[p].indexOf(d);v!==-1&&this._shimmedLocalStreams[p].splice(v,1),this._shimmedLocalStreams[p].length===1&&delete this._shimmedLocalStreams[p]}),l.apply(this,arguments)}}function oN(n,r){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&r.version>=65)return iN(n);const i=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const T=i.apply(this);return this._reverseStreams=this._reverseStreams||{},T.map(C=>this._reverseStreams[C.id])};const s=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(T){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},T.getTracks().forEach(C=>{if(this.getSenders().find(R=>R.track===C))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[T.id]){const C=new n.MediaStream(T.getTracks());this._streams[T.id]=C,this._reverseStreams[C.id]=T,T=C}s.apply(this,[T])};const l=n.RTCPeerConnection.prototype.removeStream;function d(T,C){let R=C.sdp;return Object.keys(T._reverseStreams||[]).forEach(L=>{const j=T._reverseStreams[L],Y=T._streams[j.id];R=R.replace(new RegExp(Y.id,"g"),j.id)}),new RTCSessionDescription({type:C.type,sdp:R})}function p(T,C){let R=C.sdp;return Object.keys(T._reverseStreams||[]).forEach(L=>{const j=T._reverseStreams[L],Y=T._streams[j.id];R=R.replace(new RegExp(j.id,"g"),Y.id)}),new RTCSessionDescription({type:C.type,sdp:R})}n.RTCPeerConnection.prototype.removeStream=function(T){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.apply(this,[this._streams[T.id]||T]),delete this._reverseStreams[this._streams[T.id]?this._streams[T.id].id:T.id],delete this._streams[T.id]},n.RTCPeerConnection.prototype.addTrack=function(T,C){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const R=[].slice.call(arguments,1);if(R.length!==1||!R[0].getTracks().find(Y=>Y===T))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(Y=>Y.track===T))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const j=this._streams[C.id];if(j)j.addTrack(T),Pe.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const Y=new n.MediaStream([T]);this._streams[C.id]=Y,this._reverseStreams[Y.id]=C,this.addStream(Y)}return this.getSenders().find(Y=>Y.track===T)},["createOffer","createAnswer"].forEach(function(T){const C=n.RTCPeerConnection.prototype[T],R={[T](){const L=arguments;return arguments.length&&typeof arguments[0]=="function"?C.apply(this,[j=>{const Y=d(this,j);L[0].apply(null,[Y])},j=>{L[1]&&L[1].apply(null,j)},arguments[2]]):C.apply(this,arguments).then(j=>d(this,j))}};n.RTCPeerConnection.prototype[T]=R[T]});const v=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=p(this,arguments[0]),v.apply(this,arguments)):v.apply(this,arguments)};const E=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const T=E.get.apply(this);return T.type===""?T:d(this,T)}}),n.RTCPeerConnection.prototype.removeTrack=function(T){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!T._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(T._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let C;this._streams=this._streams||{},Object.keys(this._streams).forEach(R=>{this._streams[R].getTracks().find(L=>T.track===L)&&(C=this._streams[R])}),C&&(C.getTracks().length===1?this.removeStream(this._reverseStreams[C.id]):C.removeTrack(T.track),this.dispatchEvent(new Event("negotiationneeded")))}}function xS(n,r){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=n.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};n.RTCPeerConnection.prototype[i]=l[i]})}function aN(n,r){Yl(n,"negotiationneeded",i=>{const s=i.target;if(!(r.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")||s.signalingState==="stable")return i})}var sN=Object.freeze({__proto__:null,shimMediaStream:ZA,shimOnTrack:eN,shimGetSendersWithDtmf:tN,shimGetStats:nN,shimSenderReceiverGetStats:rN,shimAddTrackRemoveTrackWithNative:iN,shimAddTrackRemoveTrack:oN,shimPeerConnection:xS,fixNegotiationNeeded:aN,shimGetUserMedia:QA,shimGetDisplayMedia:function(n,r){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(typeof r=="function"?n.navigator.mediaDevices.getDisplayMedia=function(i){return r(i).then(s=>{const l=i.video&&i.video.width,d=i.video&&i.video.height,p=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:s,maxFrameRate:p||3}},l&&(i.video.mandatory.maxWidth=l),d&&(i.video.mandatory.maxHeight=d),n.navigator.mediaDevices.getUserMedia(i)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});function cN(n,r){const i=n&&n.navigator,s=n&&n.MediaStreamTrack;if(i.getUserMedia=function(l,d,p){k_("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(l).then(d,p)},!(r.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const l=function(p,v,E){v in p&&!(E in p)&&(p[E]=p[v],delete p[v])},d=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(p){return typeof p=="object"&&typeof p.audio=="object"&&(p=JSON.parse(JSON.stringify(p)),l(p.audio,"autoGainControl","mozAutoGainControl"),l(p.audio,"noiseSuppression","mozNoiseSuppression")),d(p)},s&&s.prototype.getSettings){const p=s.prototype.getSettings;s.prototype.getSettings=function(){const v=p.apply(this,arguments);return l(v,"mozAutoGainControl","autoGainControl"),l(v,"mozNoiseSuppression","noiseSuppression"),v}}if(s&&s.prototype.applyConstraints){const p=s.prototype.applyConstraints;s.prototype.applyConstraints=function(v){return this.kind==="audio"&&typeof v=="object"&&(v=JSON.parse(JSON.stringify(v)),l(v,"autoGainControl","mozAutoGainControl"),l(v,"noiseSuppression","mozNoiseSuppression")),p.apply(this,[v])}}}}function lN(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function PS(n,r){if(typeof n!="object"||!n.RTCPeerConnection&&!n.mozRTCPeerConnection)return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(l){const d=n.RTCPeerConnection.prototype[l],p={[l](){return arguments[0]=new(l==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),d.apply(this,arguments)}};n.RTCPeerConnection.prototype[l]=p[l]});const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[l,d,p]=arguments;return s.apply(this,[l||null]).then(v=>{if(r.version<53&&!d)try{v.forEach(E=>{E.type=i[E.type]||E.type})}catch(E){if(E.name!=="TypeError")throw E;v.forEach((T,C)=>{v.set(C,Object.assign({},T,{type:i[T.type]||T.type}))})}return v}).then(d,p)}}function uN(n){if(typeof n!="object"||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const r=n.RTCPeerConnection.prototype.getSenders;r&&(n.RTCPeerConnection.prototype.getSenders=function(){const s=r.apply(this,[]);return s.forEach(l=>l._pc=this),s});const i=n.RTCPeerConnection.prototype.addTrack;i&&(n.RTCPeerConnection.prototype.addTrack=function(){const s=i.apply(this,arguments);return s._pc=this,s}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Pe.resolve(new Map)}}function dN(n){if(typeof n!="object"||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const r=n.RTCPeerConnection.prototype.getReceivers;r&&(n.RTCPeerConnection.prototype.getReceivers=function(){const i=r.apply(this,[]);return i.forEach(s=>s._pc=this),i}),Yl(n,"track",i=>(i.receiver._pc=i.srcElement,i)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function hN(n){n.RTCPeerConnection&&!("removeStream"in n.RTCPeerConnection.prototype)&&(n.RTCPeerConnection.prototype.removeStream=function(r){k_("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&r.getTracks().includes(i.track)&&this.removeTrack(i)})})}function pN(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function fN(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.addTransceiver;r&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const s=i.length>0;s&&i.forEach(d=>{if("rid"in d&&!/^[a-z0-9]{0,16}$/i.test(d.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in d&&!(parseFloat(d.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in d&&!(parseFloat(d.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=r.apply(this,arguments);if(s){const{sender:d}=l,p=d.getParameters();(!("encodings"in p)||p.encodings.length===1&&Object.keys(p.encodings[0]).length===0)&&(p.encodings=i,d.sendEncodings=i,this.setParametersPromises.push(d.setParameters(p).then(()=>{delete d.sendEncodings}).catch(()=>{delete d.sendEncodings})))}return l})}function mN(n){if(typeof n!="object"||!n.RTCRtpSender)return;const r=n.RTCRtpSender.prototype.getParameters;r&&(n.RTCRtpSender.prototype.getParameters=function(){const i=r.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function gN(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Pe.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}function vN(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Pe.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}var EN=Object.freeze({__proto__:null,shimOnTrack:lN,shimPeerConnection:PS,shimSenderGetStats:uN,shimReceiverGetStats:dN,shimRemoveStream:hN,shimRTCDataChannel:pN,shimAddTransceiver:fN,shimGetParameters:mN,shimCreateOffer:gN,shimCreateAnswer:vN,shimGetUserMedia:cN,shimGetDisplayMedia:function(n,r){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Pe.reject(s)}return i.video===!0?i.video={mediaSource:r}:i.video.mediaSource=r,n.navigator.mediaDevices.getUserMedia(i)})}});function _N(n){if(typeof n=="object"&&n.RTCPeerConnection){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const r=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(s=>r.call(this,s,i)),i.getVideoTracks().forEach(s=>r.call(this,s,i))},n.RTCPeerConnection.prototype.addTrack=function(i){for(var s=arguments.length,l=new Array(s>1?s-1:0),d=1;d<s;d++)l[d-1]=arguments[d];return l&&l.forEach(p=>{this._localStreams?this._localStreams.includes(p)||this._localStreams.push(p):this._localStreams=[p]}),r.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(r);if(i===-1)return;this._localStreams.splice(i,1);const s=r.getTracks();this.getSenders().forEach(l=>{s.includes(l.track)&&this.removeTrack(l)})})}}function SN(n){if(typeof n=="object"&&n.RTCPeerConnection&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(i){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=i),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(l=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(l))return;this._remoteStreams.push(l);const d=new Event("addstream");d.stream=l,this.dispatchEvent(d)})})}});const r=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(l=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(l)>=0)return;i._remoteStreams.push(l);const d=new Event("addstream");d.stream=l,i.dispatchEvent(d)})}),r.apply(i,arguments)}}}function yN(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype,i=r.createOffer,s=r.createAnswer,l=r.setLocalDescription,d=r.setRemoteDescription,p=r.addIceCandidate;r.createOffer=function(E,T){const C=arguments.length>=2?arguments[2]:arguments[0],R=i.apply(this,[C]);return T?(R.then(E,T),Pe.resolve()):R},r.createAnswer=function(E,T){const C=arguments.length>=2?arguments[2]:arguments[0],R=s.apply(this,[C]);return T?(R.then(E,T),Pe.resolve()):R};let v=function(E,T,C){const R=l.apply(this,[E]);return C?(R.then(T,C),Pe.resolve()):R};r.setLocalDescription=v,v=function(E,T,C){const R=d.apply(this,[E]);return C?(R.then(T,C),Pe.resolve()):R},r.setRemoteDescription=v,v=function(E,T,C){const R=p.apply(this,[E]);return C?(R.then(T,C),Pe.resolve()):R},r.addIceCandidate=v}function CN(n){const r=n&&n.navigator;if(r.mediaDevices&&r.mediaDevices.getUserMedia){const i=r.mediaDevices,s=i.getUserMedia.bind(i);r.mediaDevices.getUserMedia=l=>s(bN(l))}!r.getUserMedia&&r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=(function(i,s,l){r.mediaDevices.getUserMedia(i).then(s,l)}).bind(r))}function bN(n){return n&&n.video!==void 0?Object.assign({},n,{video:sO(n.video)}):n}function TN(n){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection;n.RTCPeerConnection=function(i,s){if(i&&i.iceServers){const l=[];for(let d=0;d<i.iceServers.length;d++){let p=i.iceServers[d];!p.hasOwnProperty("urls")&&p.hasOwnProperty("url")?(k_("RTCIceServer.url","RTCIceServer.urls"),p=JSON.parse(JSON.stringify(p)),p.urls=p.url,delete p.url,l.push(p)):l.push(i.iceServers[d])}i.iceServers=l}return new r(i,s)},n.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:()=>r.generateCertificate})}function RN(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function IN(n){const r=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(i){if(i){i.offerToReceiveAudio!==void 0&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const s=this.getTransceivers().find(d=>d.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):i.offerToReceiveAudio!==!0||s||this.addTransceiver("audio",{direction:"recvonly"}),i.offerToReceiveVideo!==void 0&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const l=this.getTransceivers().find(d=>d.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):i.offerToReceiveVideo!==!0||l||this.addTransceiver("video",{direction:"recvonly"})}return r.apply(this,arguments)}}function wN(n){typeof n!="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}var ON=Object.freeze({__proto__:null,shimLocalStreamsAPI:_N,shimRemoteStreamsAPI:SN,shimCallbacksAPI:yN,shimGetUserMedia:CN,shimConstraints:bN,shimRTCIceServerUrls:TN,shimTrackEventTransceiver:RN,shimCreateOfferLegacy:IN,shimAudioContext:wN}),kz=`	
\v\f\r                　\u2028\u2029\uFEFF`,Lz=Le,Mz=rd,AN=y("".replace),p0=`[	
\v\f\r                　\u2028\u2029\uFEFF]`,Uz=RegExp("^"+p0+p0+"*"),Fz=RegExp(p0+p0+"*$"),DS=function(n){return function(r){var i=Mz(Lz(r));return 1&n&&(i=AN(i,Uz,"")),2&n&&(i=AN(i,Fz,"")),i}},Vz={start:DS(1),end:DS(2),trim:DS(3)},jz=UO.PROPER,Bz=c,NN=kz,$z=Vz.trim;Di({target:"String",proto:!0,forced:function(n){return Bz(function(){return!!NN[n]()||"​᠎"[n]()!=="​᠎"||jz&&NN[n].name!==n})}("trim")},{trim:function(){return $z(this)}});var Hz=Wc("String").trim,Wz=b,Gz=Hz,kS=String.prototype,ic=function(n){var r=n.trim;return typeof n=="string"||n===kS||Wz(kS,n)&&r===kS.trim?Gz:r},LS={exports:{}};(function(n){const r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(i){return ic(i).call(i).split(`
`).map(s=>ic(s).call(s))},r.splitSections=function(i){return i.split(`
m=`).map((s,l)=>{var d;return ic(d=l>0?"m="+s:s).call(d)+`\r
`})},r.getDescription=function(i){const s=r.splitSections(i);return s&&s[0]},r.getMediaSections=function(i){const s=r.splitSections(i);return s.shift(),s},r.matchPrefix=function(i,s){return r.splitLines(i).filter(l=>l.indexOf(s)===0)},r.parseCandidate=function(i){let s;s=i.indexOf("a=candidate:")===0?i.substring(12).split(" "):i.substring(10).split(" ");const l={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let d=8;d<s.length;d+=2)switch(s[d]){case"raddr":l.relatedAddress=s[d+1];break;case"rport":l.relatedPort=parseInt(s[d+1],10);break;case"tcptype":l.tcpType=s[d+1];break;case"ufrag":l.ufrag=s[d+1],l.usernameFragment=s[d+1];break;default:l[s[d]]===void 0&&(l[s[d]]=s[d+1])}return l},r.writeCandidate=function(i){const s=[];s.push(i.foundation);const l=i.component;l==="rtp"?s.push(1):l==="rtcp"?s.push(2):s.push(l),s.push(i.protocol.toUpperCase()),s.push(i.priority),s.push(i.address||i.ip),s.push(i.port);const d=i.type;return s.push("typ"),s.push(d),d!=="host"&&i.relatedAddress&&i.relatedPort&&(s.push("raddr"),s.push(i.relatedAddress),s.push("rport"),s.push(i.relatedPort)),i.tcpType&&i.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(i.tcpType)),(i.usernameFragment||i.ufrag)&&(s.push("ufrag"),s.push(i.usernameFragment||i.ufrag)),"candidate:"+s.join(" ")},r.parseIceOptions=function(i){return i.substr(14).split(" ")},r.parseRtpMap=function(i){let s=i.substr(9).split(" ");const l={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),l.name=s[0],l.clockRate=parseInt(s[1],10),l.channels=s.length===3?parseInt(s[2],10):1,l.numChannels=l.channels,l},r.writeRtpMap=function(i){let s=i.payloadType;i.preferredPayloadType!==void 0&&(s=i.preferredPayloadType);const l=i.channels||i.numChannels||1;return"a=rtpmap:"+s+" "+i.name+"/"+i.clockRate+(l!==1?"/"+l:"")+`\r
`},r.parseExtmap=function(i){const s=i.substr(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1]}},r.writeExtmap=function(i){return"a=extmap:"+(i.id||i.preferredId)+(i.direction&&i.direction!=="sendrecv"?"/"+i.direction:"")+" "+i.uri+`\r
`},r.parseFmtp=function(i){const s={};let l;const d=i.substr(i.indexOf(" ")+1).split(";");for(let E=0;E<d.length;E++){var p,v;l=ic(p=d[E]).call(p).split("="),s[ic(v=l[0]).call(v)]=l[1]}return s},r.writeFmtp=function(i){let s="",l=i.payloadType;if(i.preferredPayloadType!==void 0&&(l=i.preferredPayloadType),i.parameters&&Object.keys(i.parameters).length){const d=[];Object.keys(i.parameters).forEach(p=>{i.parameters[p]!==void 0?d.push(p+"="+i.parameters[p]):d.push(p)}),s+="a=fmtp:"+l+" "+d.join(";")+`\r
`}return s},r.parseRtcpFb=function(i){const s=i.substr(i.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},r.writeRtcpFb=function(i){let s="",l=i.payloadType;return i.preferredPayloadType!==void 0&&(l=i.preferredPayloadType),i.rtcpFeedback&&i.rtcpFeedback.length&&i.rtcpFeedback.forEach(d=>{s+="a=rtcp-fb:"+l+" "+d.type+(d.parameter&&d.parameter.length?" "+d.parameter:"")+`\r
`}),s},r.parseSsrcMedia=function(i){const s=i.indexOf(" "),l={ssrc:parseInt(i.substr(7,s-7),10)},d=i.indexOf(":",s);return d>-1?(l.attribute=i.substr(s+1,d-s-1),l.value=i.substr(d+1)):l.attribute=i.substr(s+1),l},r.parseSsrcGroup=function(i){const s=i.substr(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(l=>parseInt(l,10))}},r.getMid=function(i){const s=r.matchPrefix(i,"a=mid:")[0];if(s)return s.substr(6)},r.parseFingerprint=function(i){const s=i.substr(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},r.getDtlsParameters=function(i,s){return{role:"auto",fingerprints:r.matchPrefix(i+s,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(i,s){let l="a=setup:"+s+`\r
`;return i.fingerprints.forEach(d=>{l+="a=fingerprint:"+d.algorithm+" "+d.value+`\r
`}),l},r.parseCryptoLine=function(i){const s=i.substr(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},r.writeCryptoLine=function(i){return"a=crypto:"+i.tag+" "+i.cryptoSuite+" "+(typeof i.keyParams=="object"?r.writeCryptoKeyParams(i.keyParams):i.keyParams)+(i.sessionParams?" "+i.sessionParams.join(" "):"")+`\r
`},r.parseCryptoKeyParams=function(i){if(i.indexOf("inline:")!==0)return null;const s=i.substr(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(i){return i.keyMethod+":"+i.keySalt+(i.lifeTime?"|"+i.lifeTime:"")+(i.mkiValue&&i.mkiLength?"|"+i.mkiValue+":"+i.mkiLength:"")},r.getCryptoParameters=function(i,s){return r.matchPrefix(i+s,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(i,s){const l=r.matchPrefix(i+s,"a=ice-ufrag:")[0],d=r.matchPrefix(i+s,"a=ice-pwd:")[0];return l&&d?{usernameFragment:l.substr(12),password:d.substr(10)}:null},r.writeIceParameters=function(i){let s="a=ice-ufrag:"+i.usernameFragment+`\r
a=ice-pwd:`+i.password+`\r
`;return i.iceLite&&(s+=`a=ice-lite\r
`),s},r.parseRtpParameters=function(i){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=r.splitLines(i)[0].split(" ");for(let d=3;d<l.length;d++){const p=l[d],v=r.matchPrefix(i,"a=rtpmap:"+p+" ")[0];if(v){const E=r.parseRtpMap(v),T=r.matchPrefix(i,"a=fmtp:"+p+" ");switch(E.parameters=T.length?r.parseFmtp(T[0]):{},E.rtcpFeedback=r.matchPrefix(i,"a=rtcp-fb:"+p+" ").map(r.parseRtcpFb),s.codecs.push(E),E.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(E.name.toUpperCase())}}}return r.matchPrefix(i,"a=extmap:").forEach(d=>{s.headerExtensions.push(r.parseExtmap(d))}),s},r.writeRtpDescription=function(i,s){let l="";l+="m="+i+" ",l+=s.codecs.length>0?"9":"0",l+=" UDP/TLS/RTP/SAVPF ",l+=s.codecs.map(p=>p.preferredPayloadType!==void 0?p.preferredPayloadType:p.payloadType).join(" ")+`\r
`,l+=`c=IN IP4 0.0.0.0\r
`,l+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(p=>{l+=r.writeRtpMap(p),l+=r.writeFmtp(p),l+=r.writeRtcpFb(p)});let d=0;return s.codecs.forEach(p=>{p.maxptime>d&&(d=p.maxptime)}),d>0&&(l+="a=maxptime:"+d+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(p=>{l+=r.writeExtmap(p)}),l},r.parseRtpEncodingParameters=function(i){const s=[],l=r.parseRtpParameters(i),d=l.fecMechanisms.indexOf("RED")!==-1,p=l.fecMechanisms.indexOf("ULPFEC")!==-1,v=r.matchPrefix(i,"a=ssrc:").map(L=>r.parseSsrcMedia(L)).filter(L=>L.attribute==="cname"),E=v.length>0&&v[0].ssrc;let T;const C=r.matchPrefix(i,"a=ssrc-group:FID").map(L=>L.substr(17).split(" ").map(j=>parseInt(j,10)));C.length>0&&C[0].length>1&&C[0][0]===E&&(T=C[0][1]),l.codecs.forEach(L=>{if(L.name.toUpperCase()==="RTX"&&L.parameters.apt){let j={ssrc:E,codecPayloadType:parseInt(L.parameters.apt,10)};E&&T&&(j.rtx={ssrc:T}),s.push(j),d&&(j=JSON.parse(JSON.stringify(j)),j.fec={ssrc:E,mechanism:p?"red+ulpfec":"red"},s.push(j))}}),s.length===0&&E&&s.push({ssrc:E});let R=r.matchPrefix(i,"b=");return R.length&&(R=R[0].indexOf("b=TIAS:")===0?parseInt(R[0].substr(7),10):R[0].indexOf("b=AS:")===0?1e3*parseInt(R[0].substr(5),10)*.95-16e3:void 0,s.forEach(L=>{L.maxBitrate=R})),s},r.parseRtcpParameters=function(i){const s={},l=r.matchPrefix(i,"a=ssrc:").map(v=>r.parseSsrcMedia(v)).filter(v=>v.attribute==="cname")[0];l&&(s.cname=l.value,s.ssrc=l.ssrc);const d=r.matchPrefix(i,"a=rtcp-rsize");s.reducedSize=d.length>0,s.compound=d.length===0;const p=r.matchPrefix(i,"a=rtcp-mux");return s.mux=p.length>0,s},r.writeRtcpParameters=function(i){let s="";return i.reducedSize&&(s+=`a=rtcp-rsize\r
`),i.mux&&(s+=`a=rtcp-mux\r
`),i.ssrc!==void 0&&i.cname&&(s+="a=ssrc:"+i.ssrc+" cname:"+i.cname+`\r
`),s},r.parseMsid=function(i){let s;const l=r.matchPrefix(i,"a=msid:");if(l.length===1)return s=l[0].substr(7).split(" "),{stream:s[0],track:s[1]};const d=r.matchPrefix(i,"a=ssrc:").map(p=>r.parseSsrcMedia(p)).filter(p=>p.attribute==="msid");return d.length>0?(s=d[0].value.split(" "),{stream:s[0],track:s[1]}):void 0},r.parseSctpDescription=function(i){const s=r.parseMLine(i),l=r.matchPrefix(i,"a=max-message-size:");let d;l.length>0&&(d=parseInt(l[0].substr(19),10)),isNaN(d)&&(d=65536);const p=r.matchPrefix(i,"a=sctp-port:");if(p.length>0)return{port:parseInt(p[0].substr(12),10),protocol:s.fmt,maxMessageSize:d};const v=r.matchPrefix(i,"a=sctpmap:");if(v.length>0){const E=v[0].substr(10).split(" ");return{port:parseInt(E[0],10),protocol:E[1],maxMessageSize:d}}},r.writeSctpDescription=function(i,s){let l=[];return l=i.protocol!=="DTLS/SCTP"?["m="+i.kind+" 9 "+i.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:["m="+i.kind+" 9 "+i.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&l.push("a=max-message-size:"+s.maxMessageSize+`\r
`),l.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(i,s,l){let d;const p=s!==void 0?s:2;return d=i||r.generateSessionId(),`v=0\r
o=`+(l||"thisisadapterortc")+" "+d+" "+p+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},r.getDirection=function(i,s){const l=r.splitLines(i);for(let d=0;d<l.length;d++)switch(l[d]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return l[d].substr(2)}return s?r.getDirection(s):"sendrecv"},r.getKind=function(i){return r.splitLines(i)[0].split(" ")[0].substr(2)},r.isRejected=function(i){return i.split(" ",2)[1]==="0"},r.parseMLine=function(i){const s=r.splitLines(i)[0].substr(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},r.parseOLine=function(i){const s=r.matchPrefix(i,"o=")[0].substr(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},r.isValidSDP=function(i){if(typeof i!="string"||i.length===0)return!1;const s=r.splitLines(i);for(let l=0;l<s.length;l++)if(s[l].length<2||s[l].charAt(1)!=="=")return!1;return!0},n.exports=r})(LS);var dd=LS.exports,zz=Object.freeze(o({__proto__:null,default:dd},[LS.exports]));function f0(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const r=n.RTCIceCandidate;n.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&((i=JSON.parse(JSON.stringify(i))).candidate=i.candidate.substr(2)),i.candidate&&i.candidate.length){const s=new r(i),l=dd.parseCandidate(i.candidate),d=Object.assign(s,l);return d.toJSON=function(){return{candidate:d.candidate,sdpMid:d.sdpMid,sdpMLineIndex:d.sdpMLineIndex,usernameFragment:d.usernameFragment}},d}return new r(i)},n.RTCIceCandidate.prototype=r.prototype,Yl(n,"icecandidate",i=>(i.candidate&&Object.defineProperty(i,"candidate",{value:new n.RTCIceCandidate(i.candidate),writable:"false"}),i))}function MS(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||Yl(n,"icecandidate",r=>{if(r.candidate){const i=dd.parseCandidate(r.candidate.candidate);i.type==="relay"&&(r.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[i.priority>>24])}return r})}function m0(n,r){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const i=function(v){if(!v||!v.sdp)return!1;const E=dd.splitSections(v.sdp);return E.shift(),E.some(T=>{const C=dd.parseMLine(T);return C&&C.kind==="application"&&C.protocol.indexOf("SCTP")!==-1})},s=function(v){const E=v.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(E===null||E.length<2)return-1;const T=parseInt(E[1],10);return T!=T?-1:T},l=function(v){let E=65536;return r.browser==="firefox"&&(E=r.version<57?v===-1?16384:2147483637:r.version<60?r.version===57?65535:65536:2147483637),E},d=function(v,E){let T=65536;r.browser==="firefox"&&r.version===57&&(T=65535);const C=dd.matchPrefix(v.sdp,"a=max-message-size:");return C.length>0?T=parseInt(C[0].substr(19),10):r.browser==="firefox"&&E!==-1&&(T=2147483637),T},p=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,r.browser==="chrome"&&r.version>=76){const{sdpSemantics:v}=this.getConfiguration();v==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const v=s(arguments[0]),E=l(v),T=d(arguments[0],v);let C;C=E===0&&T===0?Number.POSITIVE_INFINITY:E===0||T===0?Math.max(E,T):Math.min(E,T);const R={};Object.defineProperty(R,"maxMessageSize",{get:()=>C}),this._sctp=R}return p.apply(this,arguments)}}function g0(n){if(!n.RTCPeerConnection||!("createDataChannel"in n.RTCPeerConnection.prototype))return;function r(s,l){const d=s.send;s.send=function(){const p=arguments[0],v=p.length||p.size||p.byteLength;if(s.readyState==="open"&&l.sctp&&v>l.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+l.sctp.maxMessageSize+" bytes)");return d.apply(s,arguments)}}const i=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const s=i.apply(this,arguments);return r(s,this),s},Yl(n,"datachannel",s=>(r(s.channel,s.target),s))}function US(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const r=n.RTCPeerConnection.prototype;Object.defineProperty(r,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(r,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(i){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),i&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=i)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(i=>{const s=r[i];r[i]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=l=>{const d=l.target;if(d._lastConnectionState!==d.connectionState){d._lastConnectionState=d.connectionState;const p=new Event("connectionstatechange",l);d.dispatchEvent(p)}return l},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function FS(n,r){if(!n.RTCPeerConnection||r.browser==="chrome"&&r.version>=71||r.browser==="safari"&&r.version>=605)return;const i=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=s.sdp.split(`
`).filter(d=>ic(d).call(d)!=="a=extmap-allow-mixed").join(`
`);n.RTCSessionDescription&&s instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:s.type,sdp:l}):s.sdp=l}return i.apply(this,arguments)}}function v0(n,r){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const i=n.RTCPeerConnection.prototype.addIceCandidate;i&&i.length!==0&&(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(r.browser==="chrome"&&r.version<78||r.browser==="firefox"&&r.version<68||r.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Pe.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Pe.resolve())})}function E0(n,r){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const i=n.RTCPeerConnection.prototype.setLocalDescription;i&&i.length!==0&&(n.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return i.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer"}return s.sdp||s.type!=="offer"&&s.type!=="answer"?i.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(d=>i.apply(this,[d]))})}var Kz=Object.freeze({__proto__:null,shimRTCIceCandidate:f0,shimRTCIceCandidateRelayProtocol:MS,shimMaxMessageSize:m0,shimSendThrowTypeError:g0,shimConnectionState:US,removeExtmapAllowMixed:FS,shimAddIceCandidateNullOrEmpty:v0,shimParameterlessSetLocalDescription:E0});let Yr,qt;(function(){let{window:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const i=oO,s=cH(n),l={browserDetails:s,commonShim:Kz,extractVersion:Bm,disableLog:aH,disableWarnings:sH,sdp:zz};switch(s.browser){case"chrome":if(!sN||!xS||!r.shimChrome)return i("Chrome shim is not included in this adapter release."),l;if(s.version===null)return i("Chrome shim can not determine version, not shimming."),l;i("adapter.js shimming chrome."),l.browserShim=sN,v0(n,s),E0(n),QA(n,s),ZA(n),xS(n,s),eN(n),oN(n,s),tN(n),nN(n),rN(n),aN(n,s),f0(n),MS(n),US(n),m0(n,s),g0(n),FS(n,s);break;case"firefox":if(!EN||!PS||!r.shimFirefox)return i("Firefox shim is not included in this adapter release."),l;i("adapter.js shimming firefox."),l.browserShim=EN,v0(n,s),E0(n),cN(n,s),PS(n,s),lN(n),hN(n),uN(n),dN(n),pN(n),fN(n),mN(n),gN(n),vN(n),f0(n),US(n),m0(n,s),g0(n);break;case"safari":if(!ON||!r.shimSafari)return i("Safari shim is not included in this adapter release."),l;i("adapter.js shimming safari."),l.browserShim=ON,v0(n,s),E0(n),TN(n),IN(n),yN(n),_N(n),SN(n),RN(n),CN(n),wN(n),f0(n),MS(n),m0(n,s),g0(n),FS(n,s);break;default:i("Unsupported browser!")}})({window:typeof window>"u"?void 0:window}),function(n){n.WIN_10="Windows 10",n.WIN_81="Windows 8.1",n.WIN_8="Windows 8",n.WIN_7="Windows 7",n.WIN_VISTA="Windows Vista",n.WIN_SERVER_2003="Windows Server 2003",n.WIN_XP="Windows XP",n.WIN_2000="Windows 2000",n.ANDROID="Android",n.HARMONY_OS="HarmonyOS",n.OPEN_BSD="Open BSD",n.SUN_OS="Sun OS",n.LINUX="Linux",n.IOS="iOS",n.MAC_OS="Mac OS",n.QNX="QNX",n.UNIX="UNIX",n.BEOS="BeOS",n.OS_2="OS/2",n.SEARCH_BOT="Search Bot"}(Yr||(Yr={})),function(n){n.CHROME="Chrome",n.SAFARI="Safari",n.EDGE="Edge",n.FIREFOX="Firefox",n.OPERA="OPR",n.QQ="QQBrowser",n.WECHAT="MicroMessenger"}(qt||(qt={}));var VS={exports:{}};(function(n,r){(function(i,s){var l="function",d="undefined",p="object",v="string",E="major",T="model",C="name",R="type",L="vendor",j="version",Y="architecture",q="console",X="mobile",le="tablet",he="smarttv",ye="wearable",ke="embedded",be="Amazon",Te="Apple",Se="ASUS",Oe="BlackBerry",Bt="Firefox",We="Google",ln="Huawei",en="LG",Yn="Microsoft",Br="Motorola",Bn="Opera",ro="Samsung",ge="Sharp",Ce="Sony",Ne="Xiaomi",tt="Zebra",Ut="Facebook",Re="Chromium OS",k="Mac OS",J=function(Un){for(var or={},on=0;on<Un.length;on++)or[Un[on].toUpperCase()]=Un[on];return or},te=function(Un,or){return typeof Un===v&&Ee(or).indexOf(Ee(Un))!==-1},Ee=function(Un){return Un.toLowerCase()},ot=function(Un,or){if(typeof Un===v)return Un=Un.replace(/^\s\s*/,""),typeof or===d?Un:Un.substring(0,350)},un=function(Un,or){for(var on,Ui,Vs,Fn,Pt,io,hl=0;hl<or.length&&!Pt;){var as=or[hl],IM=or[hl+1];for(on=Ui=0;on<as.length&&!Pt&&as[on];)if(Pt=as[on++].exec(Un))for(Vs=0;Vs<IM.length;Vs++)io=Pt[++Ui],typeof(Fn=IM[Vs])===p&&Fn.length>0?Fn.length===2?typeof Fn[1]==l?this[Fn[0]]=Fn[1].call(this,io):this[Fn[0]]=Fn[1]:Fn.length===3?typeof Fn[1]!==l||Fn[1].exec&&Fn[1].test?this[Fn[0]]=io?io.replace(Fn[1],Fn[2]):s:this[Fn[0]]=io?Fn[1].call(this,io,Fn[2]):s:Fn.length===4&&(this[Fn[0]]=io?Fn[3].call(this,io.replace(Fn[1],Fn[2])):s):this[Fn]=io||s;hl+=2}},$r=function(Un,or){for(var on in or)if(typeof or[on]===p&&or[on].length>0){for(var Ui=0;Ui<or[on].length;Ui++)if(te(or[on][Ui],Un))return on==="?"?s:on}else if(te(or[on],Un))return on==="?"?s:on;return Un},ka={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ul={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[j,[C,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[j,[C,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[C,j],[/opios[\/ ]+([\w\.]+)/i],[j,[C,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[j,[C,Bn]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[C,j],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[j,[C,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[j,[C,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[j,[C,"WeChat"]],[/konqueror\/([\w\.]+)/i],[j,[C,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[j,[C,"IE"]],[/yabrowser\/([\w\.]+)/i],[j,[C,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[C,/(.+)/,"$1 Secure Browser"],j],[/\bfocus\/([\w\.]+)/i],[j,[C,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[j,[C,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[j,[C,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[j,[C,"Dolphin"]],[/coast\/([\w\.]+)/i],[j,[C,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[j,[C,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[j,[C,Bt]],[/\bqihu|(qi?ho?o?|360)browser/i],[[C,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[C,/(.+)/,"$1 Browser"],j],[/(comodo_dragon)\/([\w\.]+)/i],[[C,/_/g," "],j],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[C,j],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[C],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[C,Ut],j],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[C,j],[/\bgsa\/([\w\.]+) .*safari\//i],[j,[C,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[j,[C,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[C,"Chrome WebView"],j],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[j,[C,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[C,j],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[j,[C,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[j,C],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[C,[j,$r,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[C,j],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[C,"Netscape"],j],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[j,[C,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[C,j],[/(cobalt)\/([\w\.]+)/i],[C,[j,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[Y,"amd64"]],[/(ia32(?=;))/i],[[Y,Ee]],[/((?:i[346]|x)86)[;\)]/i],[[Y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[Y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[Y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[Y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[Y,/ower/,"",Ee]],[/(sun4\w)[;\)]/i],[[Y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[Y,Ee]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[T,[L,ro],[R,le]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[T,[L,ro],[R,X]],[/\((ip(?:hone|od)[\w ]*);/i],[T,[L,Te],[R,X]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[T,[L,Te],[R,le]],[/(macintosh);/i],[T,[L,Te]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[T,[L,ge],[R,X]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[T,[L,ln],[R,le]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[T,[L,ln],[R,X]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[T,/_/g," "],[L,Ne],[R,X]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[T,/_/g," "],[L,Ne],[R,le]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[T,[L,"OPPO"],[R,X]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[T,[L,"Vivo"],[R,X]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[T,[L,"Realme"],[R,X]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[T,[L,Br],[R,X]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[T,[L,Br],[R,le]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[T,[L,en],[R,le]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[T,[L,en],[R,X]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[T,[L,"Lenovo"],[R,le]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[T,/_/g," "],[L,"Nokia"],[R,X]],[/(pixel c)\b/i],[T,[L,We],[R,le]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[T,[L,We],[R,X]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[T,[L,Ce],[R,X]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[T,"Xperia Tablet"],[L,Ce],[R,le]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[T,[L,"OnePlus"],[R,X]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[T,[L,be],[R,le]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[T,/(.+)/g,"Fire Phone $1"],[L,be],[R,X]],[/(playbook);[-\w\),; ]+(rim)/i],[T,L,[R,le]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[T,[L,Oe],[R,X]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[T,[L,Se],[R,le]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[T,[L,Se],[R,X]],[/(nexus 9)/i],[T,[L,"HTC"],[R,le]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[L,[T,/_/g," "],[R,X]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[T,[L,"Acer"],[R,le]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[T,[L,"Meizu"],[R,X]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[L,T,[R,X]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[L,T,[R,le]],[/(surface duo)/i],[T,[L,Yn],[R,le]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[T,[L,"Fairphone"],[R,X]],[/(u304aa)/i],[T,[L,"AT&T"],[R,X]],[/\bsie-(\w*)/i],[T,[L,"Siemens"],[R,X]],[/\b(rct\w+) b/i],[T,[L,"RCA"],[R,le]],[/\b(venue[\d ]{2,7}) b/i],[T,[L,"Dell"],[R,le]],[/\b(q(?:mv|ta)\w+) b/i],[T,[L,"Verizon"],[R,le]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[T,[L,"Barnes & Noble"],[R,le]],[/\b(tm\d{3}\w+) b/i],[T,[L,"NuVision"],[R,le]],[/\b(k88) b/i],[T,[L,"ZTE"],[R,le]],[/\b(nx\d{3}j) b/i],[T,[L,"ZTE"],[R,X]],[/\b(gen\d{3}) b.+49h/i],[T,[L,"Swiss"],[R,X]],[/\b(zur\d{3}) b/i],[T,[L,"Swiss"],[R,le]],[/\b((zeki)?tb.*\b) b/i],[T,[L,"Zeki"],[R,le]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[L,"Dragon Touch"],T,[R,le]],[/\b(ns-?\w{0,9}) b/i],[T,[L,"Insignia"],[R,le]],[/\b((nxa|next)-?\w{0,9}) b/i],[T,[L,"NextBook"],[R,le]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[L,"Voice"],T,[R,X]],[/\b(lvtel\-)?(v1[12]) b/i],[[L,"LvTel"],T,[R,X]],[/\b(ph-1) /i],[T,[L,"Essential"],[R,X]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[T,[L,"Envizen"],[R,le]],[/\b(trio[-\w\. ]+) b/i],[T,[L,"MachSpeed"],[R,le]],[/\btu_(1491) b/i],[T,[L,"Rotor"],[R,le]],[/(shield[\w ]+) b/i],[T,[L,"Nvidia"],[R,le]],[/(sprint) (\w+)/i],[L,T,[R,X]],[/(kin\.[onetw]{3})/i],[[T,/\./g," "],[L,Yn],[R,X]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[T,[L,tt],[R,le]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[T,[L,tt],[R,X]],[/smart-tv.+(samsung)/i],[L,[R,he]],[/hbbtv.+maple;(\d+)/i],[[T,/^/,"SmartTV"],[L,ro],[R,he]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[L,en],[R,he]],[/(apple) ?tv/i],[L,[T,"Apple TV"],[R,he]],[/crkey/i],[[T,"Chromecast"],[L,We],[R,he]],[/droid.+aft(\w)( bui|\))/i],[T,[L,be],[R,he]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[T,[L,ge],[R,he]],[/(bravia[\w ]+)( bui|\))/i],[T,[L,Ce],[R,he]],[/(mitv-\w{5}) bui/i],[T,[L,Ne],[R,he]],[/Hbbtv.*(technisat) (.*);/i],[L,T,[R,he]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[L,ot],[T,ot],[R,he]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[R,he]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[L,T,[R,q]],[/droid.+; (shield) bui/i],[T,[L,"Nvidia"],[R,q]],[/(playstation [345portablevi]+)/i],[T,[L,Ce],[R,q]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[T,[L,Yn],[R,q]],[/((pebble))app/i],[L,T,[R,ye]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[T,[L,Te],[R,ye]],[/droid.+; (glass) \d/i],[T,[L,We],[R,ye]],[/droid.+; (wt63?0{2,3})\)/i],[T,[L,tt],[R,ye]],[/(quest( 2| pro)?)/i],[T,[L,Ut],[R,ye]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[L,[R,ke]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[T,[R,X]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[T,[R,le]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[R,le]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[R,X]],[/(android[-\w\. ]{0,9});.+buil/i],[T,[L,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[j,[C,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[j,[C,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[C,j],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[j,C]],os:[[/microsoft (windows) (vista|xp)/i],[C,j],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[C,[j,$r,ka]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[C,"Windows"],[j,$r,ka]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[j,/_/g,"."],[C,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[C,k],[j,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[j,C],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[C,j],[/\(bb(10);/i],[j,[C,Oe]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[j,[C,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[j,[C,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[j,[C,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[j,[C,"watchOS"]],[/crkey\/([\d\.]+)/i],[j,[C,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[C,Re],j],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[C,j],[/(sunos) ?([\w\.\d]*)/i],[[C,"Solaris"],j],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[C,j]]},ca=function(Un,or){if(typeof Un===p&&(or=Un,Un=s),!(this instanceof ca))return new ca(Un,or).getResult();var on=typeof i!==d&&i.navigator?i.navigator:s,Ui=Un||(on&&on.userAgent?on.userAgent:""),Vs=on&&on.userAgentData?on.userAgentData:s,Fn=or?function(Pt,io){var hl={};for(var as in Pt)io[as]&&io[as].length%2==0?hl[as]=io[as].concat(Pt[as]):hl[as]=Pt[as];return hl}(ul,or):ul;return this.getBrowser=function(){var Pt={};return Pt.name=s,Pt.version=s,un.call(Pt,Ui,Fn.browser),Pt.major=function(io){return typeof io===v?io.replace(/[^\d\.]/g,"").split(".")[0]:s}(Pt.version),on&&on.brave&&typeof on.brave.isBrave==l&&(Pt.name="Brave"),Pt},this.getCPU=function(){var Pt={};return Pt.architecture=s,un.call(Pt,Ui,Fn.cpu),Pt},this.getDevice=function(){var Pt={};return Pt.vendor=s,Pt.model=s,Pt.type=s,un.call(Pt,Ui,Fn.device),!Pt.type&&Vs&&Vs.mobile&&(Pt.type=X),Pt.model=="Macintosh"&&on&&typeof on.standalone!==d&&on.maxTouchPoints&&on.maxTouchPoints>2&&(Pt.model="iPad",Pt.type=le),Pt},this.getEngine=function(){var Pt={};return Pt.name=s,Pt.version=s,un.call(Pt,Ui,Fn.engine),Pt},this.getOS=function(){var Pt={};return Pt.name=s,Pt.version=s,un.call(Pt,Ui,Fn.os),!Pt.name&&Vs&&Vs.platform!="Unknown"&&(Pt.name=Vs.platform.replace(/chrome os/i,Re).replace(/macos/i,k)),Pt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ui},this.setUA=function(Pt){return Ui=typeof Pt===v&&Pt.length>350?ot(Pt,350):Pt,this},this.setUA(Ui),this};ca.VERSION="0.7.34",ca.BROWSER=J([C,j,E]),ca.CPU=J([Y]),ca.DEVICE=J([T,L,R,q,X,he,le,ye,ke]),ca.ENGINE=ca.OS=J([C,j]),n.exports&&(r=n.exports=ca),r.UAParser=ca;var dl=typeof i!==d&&(i.jQuery||i.Zepto);if(dl&&!dl.ua){var $d=new ca;dl.ua=$d.getResult(),dl.ua.get=function(){return $d.getUA()},dl.ua.set=function(Un){$d.setUA(Un);var or=$d.getResult();for(var on in or)dl.ua[on]=or[on]}}})(typeof window=="object"?window:a)})(VS,VS.exports);const jS=new VS.exports;let BS,wo,oc=jS.getResult(),$S=null;function Ht(n){if(!$S){n&&jS.setUA(n),oc=jS.getResult();const r=function(d){if(d.engine.name==="Blink"&&d.browser.name!=="WeChat")return qt.CHROME;switch(d.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return qt.CHROME;case"Safari":case"Mobile Safari":return qt.SAFARI;case"Edge":return qt.EDGE;case"Firefox":return qt.FIREFOX;case"QQBrowser":return qt.QQ;case"Opera":return qt.OPERA;case"WeChat":return qt.WECHAT;default:return d.browser.name||""}}(oc),i=function(d){let p;return p=d.engine.name==="Blink"?d.engine.version||"":d.browser.version||"",p.split(".")[0]}(oc),s=function(d){switch(d.os.name){case"Windows":return d.os.version?d.os.name+" "+d.os.version:d.os.name;default:return d.os.name||""}}(oc),l=oc.os.version;if(!(r&&i&&s&&l))return{name:r,version:i,os:s,osVersion:l};$S={name:r,version:i,os:s,osVersion:l}}return $S}function xN(){return Ht().os}function PN(){const n=Ht();return"".concat(n.os," ").concat(n.osVersion)}function _0(){const n=Ht();return!!(oc.engine.name==="WebKit"&&n.os===Yr.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&n.name!==qt.SAFARI||Ci()&&n.name!==qt.SAFARI)}function Yz(){const n=Ht();if(_0()){if(n.os===Yr.MAC_OS)return!0;if(n.os===Yr.IOS){const r=oc.os.version&&oc.os.version.split(".");if(r&&Number(r[0])===14&&r[1]&&Number(r[1])>=3||r&&Number(r[0])>14)return!0}}return!1}function qz(){return oc.engine.name==="WebKit"}function HS(){return Ht().name===qt.CHROME}function yi(){return Ht().name===qt.SAFARI}function Dn(){return Ht().name===qt.FIREFOX}function Ci(){return Ht().os===Yr.IOS}function WS(n){const r=Ht();return!(r.name!==qt.CHROME||!r.osVersion)&&Number(r.version)>=n}function DN(n){const r=Ht();return!(r.name!==qt.EDGE||!r.osVersion)&&Number(r.version)>=n}function kN(n){const r=Ht();return!(r.name!==qt.OPERA||!r.osVersion)&&Number(r.version)>=n}function LN(){const n=Ht();return!(n.name!==qt.CHROME||!n.osVersion)&&Number(n.version)<=90}function MN(){const n=Ht();if(n.os!==Yr.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])<14||Number(r[0])===14&&Number(r[1])<=6}function hd(){const n=Ht();if(n.os!==Yr.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===15}function GS(){const n=Ht();if(n.os!==Yr.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===16}function UN(){const n=Ht();if(n.os!==Yr.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===15&&Number(r[1])>=1}function Ps(){return yi()&&navigator.maxTouchPoints>0}function FN(){return Ht().name===qt.WECHAT}function VN(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function Zl(){const n=Ht();return n.name===qt.EDGE||n.name===qt.SAFARI?!1:!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function S0(){return xN()===Yr.ANDROID}function bp(){const n=Ht();return S0()&&(n.name===qt.CHROME||n.name===qt.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}(function(n){n.L1T1="L1T1",n.L1T2="L1T2",n.L1T3="L1T3",n.L2T1_KEY="L2T1_KEY",n.L2T2_KEY="L2T2_KEY",n.L2T3_KEY="L2T3_KEY",n.L3T1_KEY="L3T1_KEY",n.L3T2_KEY="L3T2_KEY",n.L3T3_KEY="L3T3_KEY"})(BS||(BS={})),function(n){n.CERTIFICATE="certificate",n.CODEC="codec",n.CANDIDATE_PAIR="candidate-pair",n.LOCAL_CANDIDATE="local-candidate",n.REMOTE_CANDIDATE="remote-candidate",n.INBOUND="inbound-rtp",n.TRACK="track",n.OUTBOUND="outbound-rtp",n.PC="peer-connection",n.REMOTE_INBOUND="remote-inbound-rtp",n.REMOTE_OUTBOUND="remote-outbound-rtp",n.TRANSPORT="transport",n.CSRC="csrc",n.DATA_CHANNEL="data-channel",n.STREAM="stream",n.SENDER="sender",n.RECEIVER="receiver"}(wo||(wo={}));var jN={exports:{}},Xz=Di,Jz=F,BN=Ja.f;Xz({target:"Object",stat:!0,forced:Object.defineProperty!==BN,sham:!Jz},{defineProperty:BN});var $N=Ye.Object,Qz=jN.exports=function(n,r,i){return $N.defineProperty(n,r,i)};$N.defineProperty.sham&&(Qz.sham=!0);var HN=jN.exports;function N(n,r,i){return r in n?HN(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var zS,KS={exports:{}},WN=function(n,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return n.apply(r,i)}},Zz=WN,YS=Object.prototype.toString,qS=(zS=Object.create(null),function(n){var r=YS.call(n);return zS[r]||(zS[r]=r.slice(8,-1).toLowerCase())});function eu(n){return n=n.toLowerCase(),function(r){return qS(r)===n}}function XS(n){return Array.isArray(n)}function y0(n){return n===void 0}var GN=eu("ArrayBuffer");function zN(n){return n!==null&&typeof n=="object"}function C0(n){if(qS(n)!=="object")return!1;var r=Object.getPrototypeOf(n);return r===null||r===Object.prototype}var e9=eu("Date"),t9=eu("File"),n9=eu("Blob"),r9=eu("FileList");function JS(n){return YS.call(n)==="[object Function]"}var i9=eu("URLSearchParams");function QS(n,r){if(n!=null)if(typeof n!="object"&&(n=[n]),XS(n))for(var i=0,s=n.length;i<s;i++)r.call(null,n[i],i,n);else for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&r.call(null,n[l],l,n)}var ZS,o9=(ZS=typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array),function(n){return ZS&&n instanceof ZS}),ki={isArray:XS,isArrayBuffer:GN,isBuffer:function(n){return n!==null&&!y0(n)&&n.constructor!==null&&!y0(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)},isFormData:function(n){var r="[object FormData]";return n&&(typeof FormData=="function"&&n instanceof FormData||YS.call(n)===r||JS(n.toString)&&n.toString()===r)},isArrayBufferView:function(n){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer&&GN(n.buffer)},isString:function(n){return typeof n=="string"},isNumber:function(n){return typeof n=="number"},isObject:zN,isPlainObject:C0,isUndefined:y0,isDate:e9,isFile:t9,isBlob:n9,isFunction:JS,isStream:function(n){return zN(n)&&JS(n.pipe)},isURLSearchParams:i9,isStandardBrowserEnv:function(){return(typeof navigator>"u"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window<"u"&&typeof document<"u"},forEach:QS,merge:function n(){var r={};function i(d,p){C0(r[p])&&C0(d)?r[p]=n(r[p],d):C0(d)?r[p]=n({},d):XS(d)?r[p]=d.slice():r[p]=d}for(var s=0,l=arguments.length;s<l;s++)QS(arguments[s],i);return r},extend:function(n,r,i){return QS(r,function(s,l){n[l]=i&&typeof s=="function"?Zz(s,i):s}),n},trim:function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},stripBOM:function(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n},inherits:function(n,r,i,s){n.prototype=Object.create(r.prototype,s),n.prototype.constructor=n,i&&Object.assign(n.prototype,i)},toFlatObject:function(n,r,i){var s,l,d,p={};r=r||{};do{for(l=(s=Object.getOwnPropertyNames(n)).length;l-- >0;)p[d=s[l]]||(r[d]=n[d],p[d]=!0);n=Object.getPrototypeOf(n)}while(n&&(!i||i(n,r))&&n!==Object.prototype);return r},kindOf:qS,kindOfTest:eu,endsWith:function(n,r,i){n=String(n),(i===void 0||i>n.length)&&(i=n.length),i-=r.length;var s=n.indexOf(r,i);return s!==-1&&s===i},toArray:function(n){if(!n)return null;var r=n.length;if(y0(r))return null;for(var i=new Array(r);r-- >0;)i[r]=n[r];return i},isTypedArray:o9,isFileList:r9},pd=ki;function KN(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var YN=function(n,r,i){if(!r)return n;var s;if(i)s=i(r);else if(pd.isURLSearchParams(r))s=r.toString();else{var l=[];pd.forEach(r,function(p,v){p!=null&&(pd.isArray(p)?v+="[]":p=[p],pd.forEach(p,function(E){pd.isDate(E)?E=E.toISOString():pd.isObject(E)&&(E=JSON.stringify(E)),l.push(KN(v)+"="+KN(E))}))}),s=l.join("&")}if(s){var d=n.indexOf("#");d!==-1&&(n=n.slice(0,d)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n},a9=ki;function b0(){this.handlers=[]}b0.prototype.use=function(n,r,i){return this.handlers.push({fulfilled:n,rejected:r,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1},b0.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)},b0.prototype.forEach=function(n){a9.forEach(this.handlers,function(r){r!==null&&n(r)})};var s9=b0,c9=ki,qN=ki;function fd(n,r,i,s,l){Error.call(this),this.message=n,this.name="AxiosError",r&&(this.code=r),i&&(this.config=i),s&&(this.request=s),l&&(this.response=l)}qN.inherits(fd,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var XN=fd.prototype,JN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(n){JN[n]={value:n}}),Object.defineProperties(fd,JN),Object.defineProperty(XN,"isAxiosError",{value:!0}),fd.from=function(n,r,i,s,l,d){var p=Object.create(XN);return qN.toFlatObject(n,p,function(v){return v!==Error.prototype}),fd.call(p,n.message,r,i,s,l),p.name=n.name,d&&Object.assign(p,d),p};var md=fd,QN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Za=ki,ZN=function(n,r){r=r||new FormData;var i=[];function s(l){return l===null?"":Za.isDate(l)?l.toISOString():Za.isArrayBuffer(l)||Za.isTypedArray(l)?typeof Blob=="function"?new Blob([l]):Buffer.from(l):l}return function l(d,p){if(Za.isPlainObject(d)||Za.isArray(d)){if(i.indexOf(d)!==-1)throw Error("Circular reference detected in "+p);i.push(d),Za.forEach(d,function(v,E){if(!Za.isUndefined(v)){var T,C=p?p+"."+E:E;if(v&&!p&&typeof v=="object"){if(Za.endsWith(E,"{}"))v=JSON.stringify(v);else if(Za.endsWith(E,"[]")&&(T=Za.toArray(v)))return void T.forEach(function(R){!Za.isUndefined(R)&&r.append(C,s(R))})}l(v,C)}}),i.pop()}else r.append(p,s(d))}(n),r},ey=md,T0=ki,l9=T0.isStandardBrowserEnv()?{write:function(n,r,i,s,l,d){var p=[];p.push(n+"="+encodeURIComponent(r)),T0.isNumber(i)&&p.push("expires="+new Date(i).toGMTString()),T0.isString(s)&&p.push("path="+s),T0.isString(l)&&p.push("domain="+l),d===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},u9=function(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)},d9=function(n,r){return r?n.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):n},ex=function(n,r){return n&&!u9(r)?d9(n,r):r},ty=ki,h9=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],tx=ki,p9=tx.isStandardBrowserEnv()?function(){var n,r=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function s(l){var d=l;return r&&(i.setAttribute("href",d),d=i.href),i.setAttribute("href",d),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return n=s(window.location.href),function(l){var d=tx.isString(l)?s(l):l;return d.protocol===n.protocol&&d.host===n.host}}():function(){return!0},ny=md;function nx(n){ny.call(this,n??"canceled",ny.ERR_CANCELED),this.name="CanceledError"}ki.inherits(nx,ny,{__CANCEL__:!0});var R0=nx,Tp=ki,f9=function(n,r,i){var s=i.config.validateStatus;i.status&&s&&!s(i.status)?r(new ey("Request failed with status code "+i.status,[ey.ERR_BAD_REQUEST,ey.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):n(i)},m9=l9,g9=YN,v9=ex,E9=function(n){var r,i,s,l={};return n&&ty.forEach(n.split(`
`),function(d){if(s=d.indexOf(":"),r=ty.trim(d.substr(0,s)).toLowerCase(),i=ty.trim(d.substr(s+1)),r){if(l[r]&&h9.indexOf(r)>=0)return;l[r]=r==="set-cookie"?(l[r]?l[r]:[]).concat([i]):l[r]?l[r]+", "+i:i}}),l},_9=p9,S9=QN,ac=md,y9=R0,C9=function(n){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""},b9=function(n){return new Promise(function(r,i){var s,l=n.data,d=n.headers,p=n.responseType;function v(){n.cancelToken&&n.cancelToken.unsubscribe(s),n.signal&&n.signal.removeEventListener("abort",s)}Tp.isFormData(l)&&Tp.isStandardBrowserEnv()&&delete d["Content-Type"];var E=new XMLHttpRequest;if(n.auth){var T=n.auth.username||"",C=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";d.Authorization="Basic "+btoa(T+":"+C)}var R=v9(n.baseURL,n.url);function L(){if(E){var q="getAllResponseHeaders"in E?E9(E.getAllResponseHeaders()):null,X={data:p&&p!=="text"&&p!=="json"?E.response:E.responseText,status:E.status,statusText:E.statusText,headers:q,config:n,request:E};f9(function(le){r(le),v()},function(le){i(le),v()},X),E=null}}if(E.open(n.method.toUpperCase(),g9(R,n.params,n.paramsSerializer),!0),E.timeout=n.timeout,"onloadend"in E?E.onloadend=L:E.onreadystatechange=function(){E&&E.readyState===4&&(E.status!==0||E.responseURL&&E.responseURL.indexOf("file:")===0)&&setTimeout(L)},E.onabort=function(){E&&(i(new ac("Request aborted",ac.ECONNABORTED,n,E)),E=null)},E.onerror=function(){i(new ac("Network Error",ac.ERR_NETWORK,n,E,E)),E=null},E.ontimeout=function(){var q=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded",X=n.transitional||S9;n.timeoutErrorMessage&&(q=n.timeoutErrorMessage),i(new ac(q,X.clarifyTimeoutError?ac.ETIMEDOUT:ac.ECONNABORTED,n,E)),E=null},Tp.isStandardBrowserEnv()){var j=(n.withCredentials||_9(R))&&n.xsrfCookieName?m9.read(n.xsrfCookieName):void 0;j&&(d[n.xsrfHeaderName]=j)}"setRequestHeader"in E&&Tp.forEach(d,function(q,X){l===void 0&&X.toLowerCase()==="content-type"?delete d[X]:E.setRequestHeader(X,q)}),Tp.isUndefined(n.withCredentials)||(E.withCredentials=!!n.withCredentials),p&&p!=="json"&&(E.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&E.addEventListener("progress",n.onDownloadProgress),typeof n.onUploadProgress=="function"&&E.upload&&E.upload.addEventListener("progress",n.onUploadProgress),(n.cancelToken||n.signal)&&(s=function(q){E&&(i(!q||q&&q.type?new y9:q),E.abort(),E=null)},n.cancelToken&&n.cancelToken.subscribe(s),n.signal&&(n.signal.aborted?s():n.signal.addEventListener("abort",s))),l||(l=null);var Y=C9(R);Y&&["http","https","file"].indexOf(Y)===-1?i(new ac("Unsupported protocol "+Y+":",ac.ERR_BAD_REQUEST,n)):E.send(l)})},bi=ki,rx=function(n,r){c9.forEach(n,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(n[r]=i,delete n[s])})},ix=md,T9=ZN,R9={"Content-Type":"application/x-www-form-urlencoded"};function ox(n,r){!bi.isUndefined(n)&&bi.isUndefined(n["Content-Type"])&&(n["Content-Type"]=r)}var ax,I0={transitional:QN,adapter:((typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(ax=b9),ax),transformRequest:[function(n,r){if(rx(r,"Accept"),rx(r,"Content-Type"),bi.isFormData(n)||bi.isArrayBuffer(n)||bi.isBuffer(n)||bi.isStream(n)||bi.isFile(n)||bi.isBlob(n))return n;if(bi.isArrayBufferView(n))return n.buffer;if(bi.isURLSearchParams(n))return ox(r,"application/x-www-form-urlencoded;charset=utf-8"),n.toString();var i,s=bi.isObject(n),l=r&&r["Content-Type"];if((i=bi.isFileList(n))||s&&l==="multipart/form-data"){var d=this.env&&this.env.FormData;return T9(i?{"files[]":n}:n,d&&new d)}return s||l==="application/json"?(ox(r,"application/json"),function(p,v,E){if(bi.isString(p))try{return(v||JSON.parse)(p),bi.trim(p)}catch(T){if(T.name!=="SyntaxError")throw T}return(E||JSON.stringify)(p)}(n)):n}],transformResponse:[function(n){var r=this.transitional||I0.transitional,i=r&&r.silentJSONParsing,s=r&&r.forcedJSONParsing,l=!i&&this.responseType==="json";if(l||s&&bi.isString(n)&&n.length)try{return JSON.parse(n)}catch(d){if(l)throw d.name==="SyntaxError"?ix.from(d,ix.ERR_BAD_RESPONSE,this,null,this.response):d}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:null},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};bi.forEach(["delete","get","head"],function(n){I0.headers[n]={}}),bi.forEach(["post","put","patch"],function(n){I0.headers[n]=bi.merge(R9)});var ry=I0,I9=ki,w9=ry,sx=function(n){return!(!n||!n.__CANCEL__)},cx=ki,iy=function(n,r,i){var s=this||w9;return I9.forEach(i,function(l){n=l.call(s,n,r)}),n},O9=sx,A9=ry,N9=R0;function oy(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new N9}var Jo=ki,lx=function(n,r){r=r||{};var i={};function s(T,C){return Jo.isPlainObject(T)&&Jo.isPlainObject(C)?Jo.merge(T,C):Jo.isPlainObject(C)?Jo.merge({},C):Jo.isArray(C)?C.slice():C}function l(T){return Jo.isUndefined(r[T])?Jo.isUndefined(n[T])?void 0:s(void 0,n[T]):s(n[T],r[T])}function d(T){if(!Jo.isUndefined(r[T]))return s(void 0,r[T])}function p(T){return Jo.isUndefined(r[T])?Jo.isUndefined(n[T])?void 0:s(void 0,n[T]):s(void 0,r[T])}function v(T){return T in r?s(n[T],r[T]):T in n?s(void 0,n[T]):void 0}var E={url:d,method:d,data:d,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,beforeRedirect:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:v};return Jo.forEach(Object.keys(n).concat(Object.keys(r)),function(T){var C=E[T]||l,R=C(T);Jo.isUndefined(R)&&C!==v||(i[T]=R)}),i},ux="0.27.2",x9=ux,Yc=md,ay={};["object","boolean","number","function","string","symbol"].forEach(function(n,r){ay[n]=function(i){return typeof i===n||"a"+(r<1?"n ":" ")+n}});var dx={};ay.transitional=function(n,r,i){function s(l,d){return"[Axios v"+x9+"] Transitional option '"+l+"'"+d+(i?". "+i:"")}return function(l,d,p){if(n===!1)throw new Yc(s(d," has been removed"+(r?" in "+r:"")),Yc.ERR_DEPRECATED);return r&&!dx[d]&&(dx[d]=!0,console.warn(s(d," has been deprecated since v"+r+" and will be removed in the near future"))),!n||n(l,d,p)}};var hx=ki,P9=YN,px=s9,fx=function(n){return oy(n),n.headers=n.headers||{},n.data=iy.call(n,n.data,n.headers,n.transformRequest),n.headers=cx.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),cx.forEach(["delete","get","head","post","put","patch","common"],function(r){delete n.headers[r]}),(n.adapter||A9.adapter)(n).then(function(r){return oy(n),r.data=iy.call(n,r.data,r.headers,n.transformResponse),r},function(r){return O9(r)||(oy(n),r&&r.response&&(r.response.data=iy.call(n,r.response.data,r.response.headers,n.transformResponse))),Promise.reject(r)})},w0=lx,D9=ex,mx={assertOptions:function(n,r,i){if(typeof n!="object")throw new Yc("options must be an object",Yc.ERR_BAD_OPTION_VALUE);for(var s=Object.keys(n),l=s.length;l-- >0;){var d=s[l],p=r[d];if(p){var v=n[d],E=v===void 0||p(v,d,n);if(E!==!0)throw new Yc("option "+d+" must be "+E,Yc.ERR_BAD_OPTION_VALUE)}else if(i!==!0)throw new Yc("Unknown option "+d,Yc.ERR_BAD_OPTION)}},validators:ay},gd=mx.validators;function vd(n){this.defaults=n,this.interceptors={request:new px,response:new px}}vd.prototype.request=function(n,r){typeof n=="string"?(r=r||{}).url=n:r=n||{},(r=w0(this.defaults,r)).method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var i=r.transitional;i!==void 0&&mx.assertOptions(i,{silentJSONParsing:gd.transitional(gd.boolean),forcedJSONParsing:gd.transitional(gd.boolean),clarifyTimeoutError:gd.transitional(gd.boolean)},!1);var s=[],l=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(r)===!1||(l=l&&R.synchronous,s.unshift(R.fulfilled,R.rejected))});var d,p=[];if(this.interceptors.response.forEach(function(R){p.push(R.fulfilled,R.rejected)}),!l){var v=[fx,void 0];for(Array.prototype.unshift.apply(v,s),v=v.concat(p),d=Promise.resolve(r);v.length;)d=d.then(v.shift(),v.shift());return d}for(var E=r;s.length;){var T=s.shift(),C=s.shift();try{E=T(E)}catch(R){C(R);break}}try{d=fx(E)}catch(R){return Promise.reject(R)}for(;p.length;)d=d.then(p.shift(),p.shift());return d},vd.prototype.getUri=function(n){n=w0(this.defaults,n);var r=D9(n.baseURL,n.url);return P9(r,n.params,n.paramsSerializer)},hx.forEach(["delete","get","head","options"],function(n){vd.prototype[n]=function(r,i){return this.request(w0(i||{},{method:n,url:r,data:(i||{}).data}))}}),hx.forEach(["post","put","patch"],function(n){function r(i){return function(s,l,d){return this.request(w0(d||{},{method:n,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:l}))}}vd.prototype[n]=r(),vd.prototype[n+"Form"]=r(!0)});var k9=vd,L9=R0;function Ed(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(s){r=s});var i=this;this.promise.then(function(s){if(i._listeners){var l,d=i._listeners.length;for(l=0;l<d;l++)i._listeners[l](s);i._listeners=null}}),this.promise.then=function(s){var l,d=new Promise(function(p){i.subscribe(p),l=p}).then(s);return d.cancel=function(){i.unsubscribe(l)},d},n(function(s){i.reason||(i.reason=new L9(s),r(i.reason))})}Ed.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Ed.prototype.subscribe=function(n){this.reason?n(this.reason):this._listeners?this._listeners.push(n):this._listeners=[n]},Ed.prototype.unsubscribe=function(n){if(this._listeners){var r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}},Ed.source=function(){var n;return{token:new Ed(function(r){n=r}),cancel:n}};var M9=Ed,U9=ki,gx=ki,F9=WN,O0=k9,V9=lx,Oo=function n(r){var i=new O0(r),s=F9(O0.prototype.request,i);return gx.extend(s,O0.prototype,i),gx.extend(s,i),s.create=function(l){return n(V9(r,l))},s}(ry);Oo.Axios=O0,Oo.CanceledError=R0,Oo.CancelToken=M9,Oo.isCancel=sx,Oo.VERSION=ux,Oo.toFormData=ZN,Oo.AxiosError=md,Oo.Cancel=Oo.CanceledError,Oo.all=function(n){return Promise.all(n)},Oo.spread=function(n){return function(r){return n.apply(null,r)}},Oo.isAxiosError=function(n){return U9.isObject(n)&&n.isAxiosError===!0},KS.exports=Oo,KS.exports.default=Oo;var Ao=KS.exports;class j9{constructor(r){N(this,"logger",void 0),N(this,"prefixLists",[]),this.logger=r}debug(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];this.logger.debug(...this.prefixLists,...i)}info(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];this.logger.info(...this.prefixLists,...i)}warning(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];this.logger.warning(...this.prefixLists,...i)}error(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];this.logger.error(...this.prefixLists,...i)}prefix(r){return this.prefixLists.push(r),this}popPrefix(){return this.prefixLists.pop(),this}}class In{constructor(){N(this,"_events",{}),N(this,"addListener",this.on)}getListeners(r){return this._events[r]?this._events[r].map(i=>i.listener):[]}on(r,i){this._events[r]||(this._events[r]=[]);const s=this._events[r];this._indexOfListener(s,i)===-1&&s.push({listener:i,once:!1})}once(r,i){this._events[r]||(this._events[r]=[]);const s=this._events[r];this._indexOfListener(s,i)===-1&&s.push({listener:i,once:!0})}off(r,i){if(!this._events[r])return;const s=this._events[r],l=this._indexOfListener(s,i);l!==-1&&s.splice(l,1),this._events[r].length===0&&delete this._events[r]}removeAllListeners(r){r?delete this._events[r]:this._events={}}emit(r){this._events[r]||(this._events[r]=[]);const i=this._events[r].map(p=>p);for(var s=arguments.length,l=new Array(s>1?s-1:0),d=1;d<s;d++)l[d-1]=arguments[d];for(let p=0;p<i.length;p+=1){const v=i[p];v.once&&this.off(r,v.listener),v.listener.apply(this,l||[])}}safeEmit(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),l=1;l<i;l++)s[l-1]=arguments[l];[...this._events[r]||[]].forEach(d=>{d.once&&this.off(r,d.listener);try{d.listener.apply(this,s)}catch(p){U.error("safeEmit event:".concat(r," error ").concat(p==null?void 0:p.toString()))}})}_indexOfListener(r,i){let s=r.length;for(;s--;)if(r[s].listener===i)return s;return-1}}const A0=new class extends In{reportLogUploadError(n){this.emit("REPORT_LOG_UPLOAD",n)}};let W;(function(n){n.UNEXPECTED_ERROR="UNEXPECTED_ERROR",n.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",n.TIMEOUT="TIMEOUT",n.INVALID_PARAMS="INVALID_PARAMS",n.NOT_READABLE="NOT_READABLE",n.NOT_SUPPORTED="NOT_SUPPORTED",n.INVALID_OPERATION="INVALID_OPERATION",n.OPERATION_ABORTED="OPERATION_ABORTED",n.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",n.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",n.NETWORK_ERROR="NETWORK_ERROR",n.NETWORK_TIMEOUT="NETWORK_TIMEOUT",n.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",n.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",n.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",n.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",n.ELECTRON_IS_NULL="ELECTRON_IS_NULL",n.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",n.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",n.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",n.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",n.PERMISSION_DENIED="PERMISSION_DENIED",n.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",n.TRACK_IS_DISABLED="TRACK_IS_DISABLED",n.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",n.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",n.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",n.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",n.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",n.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",n.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",n.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",n.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",n.UID_CONFLICT="UID_CONFLICT",n.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",n.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",n.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",n.INVALID_TRACK="INVALID_TRACK",n.SENDER_NOT_FOUND="SENDER_NOT_FOUND",n.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",n.SET_ANSWER_FAILED="SET_ANSWER_FAILED",n.ICE_FAILED="ICE_FAILED",n.PC_CLOSED="PC_CLOSED",n.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",n.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",n.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",n.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",n.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",n.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",n.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",n.INVALID_REMOTE_USER="INVALID_REMOTE_USER",n.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",n.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",n.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",n.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",n.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",n.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",n.WS_ABORT="WS_ABORT",n.WS_DISCONNECT="WS_DISCONNECT",n.WS_ERR="WS_ERR",n.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",n.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",n.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",n.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",n.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",n.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",n.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",n.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",n.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",n.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",n.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",n.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",n.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",n.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",n.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",n.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",n.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",n.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",n.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",n.INVALID_PLUGIN="INVALID_PLUGIN",n.DISCONNECT_P2P="DISCONNECT_P2P",n.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",n.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",n.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",n.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",n.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",n.PROHIBITED_OPERATION="PROHIBITED_OPERATION",n.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED"})(W||(W={}));class Q extends Error{constructor(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=arguments.length>2?arguments[2]:void 0;super(i),N(this,"code",void 0),N(this,"message",void 0),N(this,"data",void 0),N(this,"name","AgoraRTCException"),this.code=r,this.message="AgoraRTCError ".concat(this.code,": ").concat(i),this.data=s}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),`
`).concat(this.stack):"".concat(this.stack)}print(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return r==="error"&&U.error(this.toString()),r==="warning"&&U.warning(this.toString()),this}throw(){throw this.print(),this}}const Qn={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function sy(n,r){const i=Math.floor(r.timeout*Math.pow(r.timeoutFactor,n));return Math.min(r.maxRetryTimeout,i)}function es(n,r,i,s){const l=Object.assign({},Qn,s);let d=l.timeout;const p=async()=>{await function(T){return new Pe(C=>{window.setTimeout(C,T)})}(d),d*=l.timeoutFactor,d=Math.min(l.maxRetryTimeout,d)};let v=!1;const E=new Pe(async(T,C)=>{r=r||(()=>!1),i=i||(()=>!0);for(let R=0;R<l.maxRetryCount;R+=1){if(v)return C(new Q(W.OPERATION_ABORTED));try{const L=await n();if(!r(L,R)||R+1===l.maxRetryCount)return T(L);await p()}catch(L){if(!i(L,R)||R+1===l.maxRetryCount)return C(L);await p()}}});return E.cancel=()=>v=!0,E}function cy(){const n=new Date;return n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()}function vx(){const n=new Date,r=/((\d+:){2}\d+)/.exec(new Date().toUTCString());return r?(r==null?void 0:r[0])+":"+n.getUTCMilliseconds():n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()}const Qo={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},N0=Date.now(),Rp=n=>{for(const r in Qo)if(Object.prototype.hasOwnProperty.call(Qo,r)&&Qo[r]===n)return r;return"DEFAULT"},U=new class{constructor(){N(this,"proxyServerURL",void 0),N(this,"logLevel",Qo.DEBUG),N(this,"uploadState","collecting"),N(this,"uploadLogWaitingList",[]),N(this,"uploadLogUploadingList",[]),N(this,"uploadErrorCount",0),N(this,"currentLogID",0),N(this,"url",void 0),N(this,"extLog",(n,r)=>{this.appendLogToWaitingList(n,...r)})}debug(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const s=[Qo.DEBUG].concat(r);this.log.apply(this,s)}info(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const s=[Qo.INFO].concat(r);this.log.apply(this,s)}warning(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const s=[Qo.WARNING].concat(r);this.log.apply(this,s)}error(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const s=[Qo.ERROR].concat(r);this.log.apply(this,s)}upload(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const s=[Qo.DEBUG].concat(r);this.uploadLog.apply(this,s)}setLogLevel(n){n=Math.min(Math.max(0,n),4),this.logLevel=n}enableLogUpload(){rn("UPLOAD_LOG",!0)}disableLogUpload(){rn("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(n){this.proxyServerURL=n}prefix(n){return new j9(this).prefix(n)}log(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(Date.now()-N0<100)return void setTimeout(()=>{this.log(...r)},Date.now()-N0);const s=Math.max(0,Math.min(4,r[0]));if(r[0]=cy()+" Agora-SDK [".concat(Rp(s),"]:"),this.appendLogToWaitingList(s,...r),s<this.logLevel)return;const l=cy()+" %cAgora-SDK [".concat(Rp(s),"]:");let d=[];if(!ie("USE_NEW_LOG"))switch(s){case Qo.DEBUG:d=[l,"color: #64B5F6;"].concat(r.slice(1)),console.log.apply(console,d);break;case Qo.INFO:d=[l,"color: #1E88E5; font-weight: bold;"].concat(r.slice(1)),console.log.apply(console,d);break;case Qo.WARNING:d=[l,"color: #FB8C00; font-weight: bold;"].concat(r.slice(1)),console.warn.apply(console,d);break;case Qo.ERROR:d=[l,"color: #B00020; font-weight: bold;"].concat(r.slice(1)),console.error.apply(console,d)}}uploadLog(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(Date.now()-N0<100)return void setTimeout(()=>{this.uploadLog(...r)},Date.now()-N0);const s=Math.max(0,Math.min(4,r[0]));r[0]=cy()+" Agora-SDK [".concat(Rp(s),"]:"),this.appendLogToWaitingList(s,...r)}appendLogToWaitingList(n){if(!ie("UPLOAD_LOG"))return;for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];Array.isArray(i[0])?i[0][0]=vx()+" Agora-SDK [".concat(Rp(n),"]:"):i[0]=vx()+" Agora-SDK [".concat(Rp(n),"]:");let l="";i.forEach(d=>{typeof d=="object"&&(d=JSON.stringify(d)),l+="".concat(d," ")}),this.uploadLogWaitingList.push({payload_str:l,log_level:n,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){const n=this.uploadLogUploadingList,r={sdk_version:Zo,process_id:ie("PROCESS_ID"),payload:JSON.stringify(n)};return es(async()=>{const i=await Ao.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(ie("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(ie("LOG_UPLOAD_SERVER"),"/upload/v1")),r,{responseType:"text"});if(i.data!=="OK"){const s=new Error("unexpected upload log response");throw s.response=i,s}},()=>(this.uploadLogUploadingList=[],!1),i=>(i.response?A0.reportLogUploadError({status:i.response.status,data:i.response.data,headers:i.response.headers,message:i.message}):i.request?A0.reportLogUploadError({status:i.request.status,message:i.message}):A0.reportLogUploadError({status:-1,message:i.message}),!0),{timeout:ie("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:ie("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,ie("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),ie("UPLOAD_LOG_INTERVAL"))}).catch(n=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),ie("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),ie("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},ly="v4.18.2-0-g8d83af1d-dirty(7/11/2023, 7:07:15 PM)",Zo=function(n){if(n.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return n;const r=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(r&&r[1]&&r[2]){const s=r[1],l=r[2];return"".concat(s,".").concat(l)}const i=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(i&&i[1]&&i[2]){const s=i[1],l=i[2];return"".concat(s,".").concat(100*(Number(l)+1))}return"4.0.0.999"}("4.18.2"),uy=function(){try{return JSON.parse("true")===!0}catch{return!0}}(),Ex=["CHINA","GLOBAL"],No=function(){const n="us".concat("erna","me"),r="pa".concat("sswo","rd"),i=["t","s","t"];i.splice(1,0,"e");const s=i.join(""),l=[];for(let v=0;v<6;v++)l.push("1");const d=l.join(""),p={};return p[n]=s,p[r]=d,Object.assign(p,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=No;const B9={"90p":At(160,90),"90p_1":At(160,90),"120p":At(160,120,15,30,65),"120p_1":At(160,120,15,30,65),"120p_3":At(120,120,15,30,50),"120p_4":At(212,120),"180p":At(320,180,15,30,140),"180p_1":At(320,180,15,30,140),"180p_3":At(180,180,15,30,100),"180p_4":At(240,180,15,30,120),"240p":At(320,240,15,40,200),"240p_1":At(320,240,15,40,200),"240p_3":At(240,240,15,40,140),"240p_4":At(424,240,15,40,220),"360p":At(640,360,15,80,400),"360p_1":At(640,360,15,80,400),"360p_3":At(360,360,15,80,260),"360p_4":At(640,360,30,80,600),"360p_6":At(360,360,30,80,400),"360p_7":At(480,360,15,80,320),"360p_8":At(480,360,30,80,490),"360p_9":At(640,360,15,80,800),"360p_10":At(640,360,24,80,800),"360p_11":At(640,360,24,80,1e3),"480p":At(640,480,15,100,500),"480p_1":At(640,480,15,100,500),"480p_2":At(640,480,30,100,1e3),"480p_3":At(480,480,15,100,400),"480p_4":At(640,480,30,100,750),"480p_6":At(480,480,30,100,600),"480p_8":At(848,480,15,100,610),"480p_9":At(848,480,30,100,930),"480p_10":At(640,480,10,100,400),"720p":At(1280,720,15,120,1130),"720p_1":At(1280,720,15,120,1130),"720p_2":At(1280,720,30,120,2e3),"720p_3":At(1280,720,30,120,1710),"720p_5":At(960,720,15,120,910),"720p_6":At(960,720,30,120,1380),"1080p":At(1920,1080,15,120,2080),"1080p_1":At(1920,1080,15,120,2080),"1080p_2":At(1920,1080,30,120,3e3),"1080p_3":At(1920,1080,30,120,3150),"1080p_5":At(1920,1080,60,120,4780),"1440p":At(2560,1440,30,120,4850),"1440p_1":At(2560,1440,30,120,4850),"1440p_2":At(2560,1440,60,120,7350),"4k":At(3840,2160,30,120,8910),"4k_1":At(3840,2160,30,120,8910),"4k_3":At(3840,2160,60,120,13500)},$9={"480p":Ra(640,480,5),"480p_1":Ra(640,480,5),"480p_2":Ra(640,480,30),"480p_3":Ra(640,480,15),"720p":Ra(1280,720,5),"720p_1":Ra(1280,720,5),"720p_2":Ra(1280,720,30),"720p_3":Ra(1280,720,15),"1080p":Ra(1920,1080,5),"1080p_1":Ra(1920,1080,5),"1080p_2":Ra(1920,1080,30),"1080p_3":Ra(1920,1080,15)},H9={"1SL1TL":hy(1,1),"3SL3TL":hy(3,3),"2SL3TL":hy(2,3)};function tu(n){return n||(n="480p_1"),typeof n=="string"?Object.assign({},B9[n]):n}function dy(n){return typeof n=="string"?Object.assign({},$9[n]):n}function x0(n){return typeof n=="string"?Object.assign({},H9[n]):n}const W9={speech_low_quality:_d(16e3,!1),speech_standard:_d(32e3,!1,18),music_standard:_d(48e3,!1),standard_stereo:_d(48e3,!0,56),high_quality:_d(48e3,!1,128),high_quality_stereo:_d(48e3,!0,192)};function P0(n){return typeof n=="string"?Object.assign({},W9[n]):n}function rn(n,r,i){Object.keys(Qi).includes(n)&&(!i&&Object.keys(nu).includes(n)||(Qi[n]=r))}function ie(n){return Qi[n]}const Qi={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:Ex,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TWCC:!1,PUBLISH_TWCC:!1,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_PUB_RTX:!1,USE_SUB_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,SVC:[],ENABLE_ENCODED_TRANSFORM:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0}},nu={};function _d(n,r,i){return{sampleRate:n,stereo:r,bitrate:i}}function At(n,r,i,s,l){return{width:n,height:r,frameRate:i,bitrateMin:s,bitrateMax:l}}function Ra(n,r,i,s,l){return{width:{max:n},height:{max:r},frameRate:i,bitrateMin:s,bitrateMax:l}}function hy(n,r){return{numSpatialLayers:n,numTemporalLayers:r}}uy||(Qi.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],Qi.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],Qi.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],Qi.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],Qi.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],Qi.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],Qi.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",Qi.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",Qi.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",Qi.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",Qi.AREAS=["NORTH_AMERICA","OVERSEA"]);const G9=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],ru=[],Ip=[];function iu(n,r){return!!r&&ru.some(i=>i.uid===n&&i.channelName===r)}var z9=kr,K9=Ja,Y9=oe,py=function(n,r,i){var s=z9(r);s in n?K9.f(n,s,Y9(0,i)):n[s]=i},_x=U_,q9=Hc,X9=py,J9=I.Array,Q9=Math.max,Sx=function(n,r,i){for(var s=q9(n),l=_x(r,s),d=_x(i===void 0?s:i,s),p=J9(Q9(d-l,0)),v=0;l<d;l++,v++)X9(p,v,n[l]);return p.length=v,p},yx=Sx,Z9=Math.floor,fy=function(n,r){var i=n.length,s=Z9(i/2);return i<8?eK(n,r):tK(n,fy(yx(n,0,s),r),fy(yx(n,s),r),r)},eK=function(n,r){for(var i,s,l=n.length,d=1;d<l;){for(s=d,i=n[d];s&&r(n[s-1],i)>0;)n[s]=n[--s];s!==d++&&(n[s]=i)}return n},tK=function(n,r,i,s){for(var l=r.length,d=i.length,p=0,v=0;p<l||v<d;)n[p+v]=p<l&&v<d?s(r[p],i[v])<=0?r[p++]:i[v++]:p<l?r[p++]:i[v++];return n},nK=fy,Cx=Ge.match(/firefox\/(\d+)/i),rK=!!Cx&&+Cx[1],iK=/MSIE|Trident/.test(Ge),bx=Ge.match(/AppleWebKit\/(\d+)\./),oK=!!bx&&+bx[1],aK=Di,Tx=y,sK=Ft,cK=Gr,lK=Hc,Rx=rd,my=c,uK=nK,dK=P_,Ix=rK,hK=iK,wx=Nn,Ox=oK,qc=[],Ax=Tx(qc.sort),pK=Tx(qc.push),fK=my(function(){qc.sort(void 0)}),mK=my(function(){qc.sort(null)}),gK=dK("sort"),Nx=!my(function(){if(wx)return wx<70;if(!(Ix&&Ix>3)){if(hK)return!0;if(Ox)return Ox<603;var n,r,i,s,l="";for(n=65;n<76;n++){switch(r=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(s=0;s<47;s++)qc.push({k:r+s,v:i})}for(qc.sort(function(d,p){return p.v-d.v}),s=0;s<qc.length;s++)r=qc[s].k.charAt(0),l.charAt(l.length-1)!==r&&(l+=r);return l!=="DGBEFHACIJK"}});aK({target:"Array",proto:!0,forced:fK||!mK||!gK||!Nx},{sort:function(n){n!==void 0&&sK(n);var r=cK(this);if(Nx)return n===void 0?Ax(r):Ax(r,n);var i,s,l=[],d=lK(r);for(s=0;s<d;s++)s in r&&pK(l,r[s]);for(uK(l,function(p){return function(v,E){return E===void 0?-1:v===void 0?1:p!==void 0?+p(v,E)||0:Rx(v)>Rx(E)?1:-1}}(n)),i=l.length,s=0;s<i;)r[s]=l[s++];for(;s<d;)delete r[s++];return r}});var vK=Wc("Array").sort,EK=b,_K=vK,gy=Array.prototype,vy=function(n){var r=n.sort;return n===gy||EK(gy,n)&&r===gy.sort?_K:r};function Sd(n,r){if(typeof n!="boolean")throw new Q(W.INVALID_PARAMS,"Invalid ".concat(r,": The value is of the boolean type."))}function Rr(n,r,i){if(!i.includes(n))throw new Q(W.INVALID_PARAMS,"".concat(r," can only be set as ").concat(JSON.stringify(i)))}function sn(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4,l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(n<i||n>s||l&&!SK(n))throw new Q(W.INVALID_PARAMS,"invalid ".concat(r,": the value range is [").concat(i,", ").concat(s,"]. integer only"))}function Ey(n,r){if(typeof n!="number"){if(!(n.min||n.max||n.ideal||n.exact))throw new Q(W.INVALID_PARAMS,"".concat(r," is not a valid ConstrainLong"));n.min!==void 0&&sn(n.min,"".concat(r,".min"),0,1/0),n.max!==void 0&&sn(n.max,"".concat(r,".max"),1,1/0),n.exact!==void 0&&sn(n.exact,"".concat(r,".exact"),1,1/0),n.ideal!==void 0&&sn(n.ideal,"".concat(r,".ideal"),1,1/0)}else sn(n,r,1,1/0)}function qr(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(n==null)throw new Q(W.INVALID_PARAMS,"".concat(r||"param"," cannot be empty"));if(!xx(n,i,s,l))throw new Q(W.INVALID_PARAMS,"Invalid ".concat(r||"string param",": Length of the string: [").concat(i,",").concat(s,"].").concat(l?" ASCII characters only.":""))}function sc(n,r){if(!Array.isArray(n))throw new Q(W.INVALID_PARAMS,"".concat(r," should be an array"))}function _y(n){if(typeof n!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(n))throw U.error("Invalid Channel Name ".concat(n)),new Q(W.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function Sy(n){if(r=n,!(typeof r=="number"&&Math.floor(r)===r&&0<=r&&r<=4294967295||xx(n,1,255)))throw U.error("Invalid UID ".concat(n," ").concat(typeof n)),new Q(W.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var r;typeof n=="string"&&U.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function Sn(n){return n==null}function xx(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof n=="string"&&n.length<=i&&n.length>=r&&(!s||yK(n))}function SK(n){return typeof n=="number"&&n%1==0}function yK(n){if(typeof n!="string")return!1;for(let r=0;r<n.length;r+=1){const i=n.charCodeAt(r);if(i<0||i>255)return!1}return!0}let Px,Dx,Xr;(function(n){n.FREE="free",n.UPLOADING="uploading"})(Px||(Px={})),function(n){n[n.MISC=0]="MISC",n[n.INTERNAL_EVENT=1]="INTERNAL_EVENT",n[n.PUBLIC_EVENT=2]="PUBLIC_EVENT",n[n.WEB_EVENT=3]="WEB_EVENT",n[n.INTERNAL_API=4]="INTERNAL_API",n[n.WEB_API=5]="WEB_API",n[n.PUBLIC_API=6]="PUBLIC_API"}(Dx||(Dx={})),function(n){n.NONE="none",n.INIT="init",n.CANPLAY="canplay",n.PLAYING="playing",n.PAUSED="paused",n.SUSPEND="suspend",n.STALLED="stalled",n.WAITING="waiting",n.ERROR="error",n.DESTROYED="destroyed",n.ABORT="abort",n.ENDED="ended",n.EMPTIED="emptied",n.LOADEDDATA="loadeddata"}(Xr||(Xr={}));const yy={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function CK(n){return qr(n.reportId,"params.reportId",0,100,!1),qr(n.category,"params.category",0,100,!1),qr(n.event,"params.event",0,100,!1),qr(n.label,"params.label",0,100,!1),sn(n.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}const bK={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let Fr,wn,kx,Cy,Zn,bn,ou,cc,yd,wp,xo,Jr,Ke,by,Wt,Tt,Li,Zt,$e,Je,mo,Et,Lx,Zi;function Mx(n){return sn(n.timeout,"config.timeout",0,1e5),sn(n.timeoutFactor,"config.timeoutFactor",0,100,!1),sn(n.maxRetryCount,"config.maxRetryConfig",0,1/0),sn(n.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function TK(n){return Rr(n.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),Rr(n.mode,"config.mode",["rtc","live"]),n.audioCodec!==void 0&&Rr(n.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),n.proxyServer!==void 0&&qr(n.proxyServer,"config.proxyServer",1,1e4),n.turnServer!==void 0&&Ux(n.turnServer),n.httpRetryConfig!==void 0&&Mx(n.httpRetryConfig),n.websocketRetryConfig!==void 0&&Mx(n.websocketRetryConfig),!0}function Op(n){if(!Array.isArray(n)||n.length<1)return!1;try{n.forEach(r=>{if(!r.urls)throw Error()})}catch{return!1}return!0}function Ux(n){return qr(n.turnServerURL,"turnServerURL"),qr(n.username,"username"),qr(n.password,"password"),n.udpport&&sn(n.udpport,"udpport",1,99999,!0),n.forceturn&&Sd(n.forceturn,"forceturn"),n.security&&Sd(n.security,"security"),n.tcpport&&sn(n.tcpport,"tcpport",1,99999,!0),!0}function Fx(n){return n.level!==void 0&&Rr(n.level,"level",[1,2,3]),!0}(function(n){n.PUBLISH="publish",n.SUBSCRIBE="subscribe",n.WS_COMPRESSOR_INIT="ws_compressor_init",n.SESSION_INIT="session_init",n.JOIN_CHOOSE_SERVER="join_choose_server",n.REQ_USER_ACCOUNT="req_user_account",n.JOIN_GATEWAY="join_gateway",n.REJOIN_GATEWAY="rejoin_gateway",n.STREAM_SWITCH="stream_switch",n.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",n.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",n.FIRST_VIDEO_RECEIVED="first_video_received",n.FIRST_AUDIO_RECEIVED="first_audio_received",n.FIRST_VIDEO_DECODE="first_video_decode",n.FIRST_AUDIO_DECODE="first_audio_decode",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_UPDATE_STREAM="on_update_stream",n.ON_REMOVE_STREAM="on_remove_stream",n.USER_ANALYTICS="req_user_analytics",n.PC_STATS="pc_stats"})(Fr||(Fr={})),function(n){n.SESSION="io.agora.pb.Wrtc.Session",n.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",n.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",n.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",n.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",n.PUBLISH="io.agora.pb.Wrtc.Publish",n.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",n.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",n.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",n.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",n.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",n.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",n.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",n.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",n.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",n.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",n.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",n.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",n.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",n.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",n.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",n.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",n.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",n.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",n.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",n.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",n.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",n.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",n.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",n.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",n.PC_STATS="io.agora.pb.Wrtc.PCStats"}(wn||(wn={})),function(n){n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(kx||(kx={})),function(n){n[n.SESSION=26]="SESSION",n[n.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",n[n.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",n[n.JOIN_GATEWAY=28]="JOIN_GATEWAY",n[n.PUBLISH=30]="PUBLISH",n[n.SUBSCRIBE=29]="SUBSCRIBE",n[n.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",n[n.STREAM_SWITCH=32]="STREAM_SWITCH",n[n.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",n[n.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",n[n.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",n[n.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",n[n.API_INVOKE=41]="API_INVOKE",n[n.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",n[n.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",n[n.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",n[n.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",n[n.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",n[n.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",n[n.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",n[n.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",n[n.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",n[n.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",n[n.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",n[n.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",n[n.USER_ANALYTICS=1e4]="USER_ANALYTICS",n[n.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(Cy||(Cy={})),function(n){n.CREATE_CLIENT="createClient",n.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",n.SET_AREA="setArea",n.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",n.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",n.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",n.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",n.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",n.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",n.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",n.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",n.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",n.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",n.START_PROXY_SERVER="Client.startProxyServer",n.STOP_PROXY_SERVER="Client.stopProxyServer",n.SET_PROXY_SERVER="Client.setProxyServer",n.SET_TURN_SERVER="Client.setTurnServer",n.SET_CLIENT_ROLE="Client.setClientRole",n.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",n.ENABLE_DUAL_STREAM="Client.enableDualStream",n.DISABLE_DUAL_STREAM="Client.disableDualStream",n.JOIN="Client.join",n.LEAVE="Client.leave",n.PUBLISH="Client.publish",n.UNPUBLISH="Client.unpublish",n.SUBSCRIBE="Client.subscribe",n.MASS_SUBSCRIBE="Client.massSubscribe",n.MASS_UNSUBSCRIBE="Client.massUnsubscribe",n.UNSUBSCRIBE="Client.unsubscribe",n.RENEW_TOKEN="Client.renewToken",n.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",n.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",n.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",n.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",n.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",n.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",n.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",n.DATACHANNEL_FAILBACK="Client._datachannelFailback",n.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",n.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",n.START_LIVE_STREAMING="Client.startLiveStreaming",n.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",n.STOP_LIVE_STREAMING="Client.stopLiveStreaming",n.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",n.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",n.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",n.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",n.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",n.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",n.SET_CONFIG_DISTRIBUTE="_configDistribute",n.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",n.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",n.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",n.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",n.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",n.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",n.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",n.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",n.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",n.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",n.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",n.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",n.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",n.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",n.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",n.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",n.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",n.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",n.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",n.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",n.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",n.STREAM_TYPE_CHANGE="streamTypeChange",n.CONNECTION_STATE_CHANGE="connectionStateChange",n.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",n.IMAGE_MODERATION_UPLOAD="imageModerationUpload"}(Zn||(Zn={})),function(n){n.TRACER="tracer"}(bn||(bn={})),function(n){n.IDLE="IDLE",n.INITING="INITING",n.INITEND="INITEND"}(ou||(ou={})),function(n){n.STATE_CHANGE="state_change",n.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",n.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",n.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(cc||(cc={})),function(n){n[n.ACCESS_POINT=101]="ACCESS_POINT",n[n.UNILBS=201]="UNILBS",n[n.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(yd||(yd={})),function(n){n[n.IIIEGAL_APPID=1]="IIIEGAL_APPID",n[n.IIIEGAL_UID=2]="IIIEGAL_UID",n[n.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(wp||(wp={})),function(n){n[n.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",n[n.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",n[n.INTERNAL_ERROR=8]="INTERNAL_ERROR",n[n.NO_AUTHORIZED=9]="NO_AUTHORIZED",n[n.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",n[n.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",n[n.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",n[n.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",n[n.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",n[n.USER_OVERLOAD=16]="USER_OVERLOAD",n[n.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",n[n.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(xo||(xo={})),function(n){n[n.NO_FLAG_SET=100]="NO_FLAG_SET",n[n.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",n[n.INVALID_FALG_SET=102]="INVALID_FALG_SET",n[n.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",n[n.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",n[n.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",n[n.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",n[n.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",n[n.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",n[n.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",n[n.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",n[n.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",n[n.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",n[n.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",n[n.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",n[n.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",n[n.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",n[n.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",n[n.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(Jr||(Jr={})),function(n){n[n.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",n[n.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",n[n.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",n[n.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",n[n.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",n[n.K_TICKET_INVALID=7]="K_TICKET_INVALID",n[n.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",n[n.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",n[n.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",n[n.K_UID_BANNED=14]="K_UID_BANNED",n[n.K_IP_BANNED=15]="K_IP_BANNED",n[n.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",n[n.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",n[n.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",n[n.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",n[n.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",n[n.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",n[n.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",n[n.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",n[n.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",n[n.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",n[n.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",n[n.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",n[n.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",n[n.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",n[n.ERR_INVALID_UID=117]="ERR_INVALID_UID",n[n.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",n[n.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",n[n.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",n[n.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",n[n.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",n[n.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",n[n.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",n[n.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",n[n.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",n[n.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",n[n.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",n[n.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",n[n.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",n[n.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",n[n.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",n[n.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",n[n.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",n[n.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",n[n.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",n[n.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",n[n.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",n[n.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",n[n.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",n[n.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",n[n.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",n[n.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",n[n.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",n[n.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",n[n.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",n[n.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",n[n.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",n[n.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",n[n.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",n[n.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",n[n.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",n[n.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",n[n.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(Ke||(Ke={})),function(n){n[n.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",n[n.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",n[n.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(by||(by={})),function(n){n.LEAVE="LEAVE",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.UID_BANNED="UID_BANNED",n.IP_BANNED="IP_BANNED",n.CHANNEL_BANNED="CHANNEL_BANNED",n.FALLBACK="FALLBACK",n.LICENSE_MISSING="LICENSE_MISSING",n.LICENSE_EXPIRED="LICENSE_EXPIRED",n.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",n.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",n.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",n.LICENSE_ILLEGAL="LICENSE_ILLEGAL"}(Wt||(Wt={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.MEDIA_RECONNECT_START="media-reconnect-start",n.MEDIA_RECONNECT_END="media-reconnect-end",n.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",n.USER_JOINED="user-joined",n.USER_LEAVED="user-left",n.USER_PUBLISHED="user-published",n.USER_UNPUBLISHED="user-unpublished",n.USER_INFO_UPDATED="user-info-updated",n.CLIENT_BANNED="client-banned",n.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",n.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",n.VOLUME_INDICATOR="volume-indicator",n.CRYPT_ERROR="crypt-error",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGED="stream-type-changed",n.STREAM_FALLBACK="stream-fallback",n.RECEIVE_METADATA="receive-metadata",n.STREAM_MESSAGE="stream-message",n.LIVE_STREAMING_ERROR="live-streaming-error",n.LIVE_STREAMING_WARNING="live-streaming-warning",n.INJECT_STREAM_STATUS="stream-inject-status",n.EXCEPTION="exception",n.ERROR="error",n.P2P_LOST="p2p_lost",n.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",n.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",n.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",n.PUBLISHED_USER_LIST="published-user-list",n.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",n.CONTENT_INSPECT_ERROR="content-inspect-error",n.CONTENT_INSPECT_RESULT="content-inspect-result",n.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change"}(Tt||(Tt={})),function(n){n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.MULTI_IP="MULTI_IP",n.TIMEOUT="TIMEOUT",n.OFFLINE="OFFLINE",n.LEAVE="LEAVE",n.P2P_FAILED="P2P_FAILED",n.FALLBACK="FALLBACK"}(Li||(Li={})),function(n){n.CONNECTING="connecting",n.CONNECTED="connected",n.RECONNECTING="reconnecting",n.CLOSED="closed"}(Zt||(Zt={})),function(n){n.WS_CONNECTED="ws_connected",n.WS_RECONNECTING="ws_reconnecting",n.WS_CLOSED="ws_closed",n.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",n.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",n.ON_BINARY_DATA="on_binary_data",n.REQUEST_RECOVER="request_recover",n.REQUEST_JOIN_INFO="request_join_info",n.REQUEST_REJOIN_INFO="req_rejoin_info",n.IS_P2P_DISCONNECTED="is_p2p_dis",n.DISCONNECT_P2P="dis_p2p",n.ABORT_P2P_EXECUTION="abort_p2p_execution",n.NEED_RENEW_SESSION="need-sid",n.REPORT_JOIN_GATEWAY="report_join_gateway",n.REQUEST_TIMEOUT="request_timeout",n.REQUEST_SUCCESS="request_success",n.JOIN_RESPONSE="join_response",n.DATACHANNEL_PRECONNECT="datachannel_preconnect",n.DATACHANNEL_CONNECTING="datachannel_connecting",n.DATACHANNEL_FAILBACK="datachannel_failback"}($e||($e={})),function(n){n.PING="ping",n.PING_BACK="ping_back",n.JOIN="join_v3",n.REJOIN="rejoin_v3",n.LEAVE="leave",n.SET_CLIENT_ROLE="set_client_role",n.PUBLISH="publish",n.UNPUBLISH="unpublish",n.SUBSCRIBE="subscribe",n.SUBSCRIBE_STREAMS="subscribe_streams",n.UNSUBSCRIBE="unsubscribe",n.UNSUBSCRIBE_STREAMS="unsubscribe_streams",n.SUBSCRIBE_CHANGE="subscribe_change",n.TRAFFIC_STATS="traffic_stats",n.RENEW_TOKEN="renew_token",n.SWITCH_VIDEO_STREAM="switch_video_stream",n.DEFAULT_VIDEO_STREAM="default_video_stream",n.SET_FALLBACK_OPTION="set_fallback_option",n.GATEWAY_INFO="gateway_info",n.CONTROL="control",n.SEND_METADATA="send_metadata",n.DATA_STREAM="data_stream",n.PICK_SVC_LAYER="pick_svc_layer",n.RESTART_ICE="restart_ice",n.CONNECT_PC="connect_pc",n.SET_VIDEO_PROFILE="set_video_profile",n.SET_PARAMETER="set_parameter"}(Je||(Je={})),function(n){n.PUBLISH_STATS="publish_stats",n.PUBLISH_RELATED_STATS="publish_related_stats",n.SUBSCRIBE_STATS="subscribe_stats",n.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",n.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",n.DENOISER_STATS="denoiser_stats",n.TRANSPORT_STATS="transport_stats",n.EXTENSION_USAGE_STATS="extension_usage_stats"}(mo||(mo={})),function(n){n.ON_USER_ONLINE="on_user_online",n.ON_USER_OFFLINE="on_user_offline",n.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",n.ON_PUBLISH_STREAM="on_publish_stream",n.ON_UPLINK_STATS="on_uplink_stats",n.ON_P2P_LOST="on_p2p_lost",n.ON_REMOVE_STREAM="on_remove_stream",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",n.ON_USER_BANNED="on_user_banned",n.ON_USER_LICENSE_BANNED="on_user_license_banned",n.ON_NOTIFICATION="on_notification",n.ON_CRYPT_ERROR="on_crypt_error",n.MUTE_AUDIO="mute_audio",n.MUTE_VIDEO="mute_video",n.UNMUTE_AUDIO="unmute_audio",n.UNMUTE_VIDEO="unmute_video",n.ON_P2P_OK="on_p2p_ok",n.RECEIVE_METADATA="receive_metadata",n.ON_DATA_STREAM="on_data_stream",n.ENABLE_LOCAL_VIDEO="enable_local_video",n.DISABLE_LOCAL_VIDEO="disable_local_video",n.ENABLE_LOCAL_AUDIO="enable_local_audio",n.DISABLE_LOCAL_AUDIO="disable_local_audio",n.ON_PUBLISHED_USER_LIST="on_published_user_list"}(Et||(Et={})),function(n){n.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",n.NEED_ANSWER="NEED_ANSWER",n.NEED_RENEGOTIATE="NEED_RENEGOTIATE",n.P2P_LOST="P2P_LOST",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NEED_UNPUB="NEED_UNPUB",n.NEED_UNSUB="NEED_UNSUB",n.NEED_UPLOAD="NEED_UPLOAD",n.NEED_CONTROL="NEED_CONTROL",n.START_RECONNECT="START_RECONNECT",n.END_RECONNECT="END_RECONNECT",n.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(Lx||(Lx={})),function(n){n.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",n.RECEIVE_TRACK_BUFFER="receive_track_buffer",n.ON_AUDIO_BUFFER="on_audio_buffer",n.UPDATE_SOURCE="update_source"}(Zi||(Zi={}));const Ty={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},Ry={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},Vx={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},RK={uplinkNetworkQuality:0,downlinkNetworkQuality:0},jx={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let it,sr,Xc;(function(n){n.CONNECTED="websocket:connected",n.RECONNECTING="websocket:reconnecting",n.WILL_RECONNECT="websocket:will_reconnect",n.CLOSED="websocket:closed",n.FAILED="websocket:failed",n.ON_MESSAGE="websocket:on_message",n.REQUEST_NEW_URLS="websocket:request_new_urls",n.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",n.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire"})(it||(it={})),function(n){n.TRANSCODE="mix_streaming",n.RAW="raw_streaming",n.INJECT="inject_streaming"}(sr||(sr={})),function(n){n[n.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",n[n.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",n[n.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",n[n.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",n[n.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",n[n.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",n[n.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",n[n.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",n[n.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(Xc||(Xc={}));const IK={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},Iy={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function wy(n,r){qr(n.url,"".concat(r,".url"),1,1e3,!1),Sn(n.x)||sn(n.x,"".concat(r,".x"),0,1e4),Sn(n.y)||sn(n.y,"".concat(r,".y"),0,1e4),Sn(n.width)||sn(n.width,"".concat(r,".width"),0,1e4),Sn(n.height)||sn(n.height,"".concat(r,".height"),0,1e4),Sn(n.zOrder)||sn(n.zOrder,"".concat(r,".zOrder"),0,255),Sn(n.alpha)||sn(n.alpha,"".concat(r,".alpha"),0,1,!1)}const wK={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},OK={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let Ia,Cd,jn,Bx,Qr,ts,Ti,Jc,cr,Tn,er,D0,et,pr,bd,Oy,Ay,Ap,Qc,Td,Nt;function $x(n){if(!n.channelName)throw new Q(W.INVALID_PARAMS,"invalid channelName in info");if(typeof n.uid!="number")throw new Q(W.INVALID_PARAMS,"invalid uid in info, uid must be a number");return n.token&&qr(n.token,"info.token",1,2047),Sy(n.uid),_y(n.channelName),!0}function Hx(n){return Rr(n,"mediaSource",["screen","window","application"]),!0}(function(n){n.WARNING="@live_uap-warning",n.ERROR="@line_uap-error",n.PUBLISH_STREAM_STATUS="@live_uap-publish-status",n.INJECT_STREAM_STATUS="@live_uap-inject-status",n.WORKER_STATUS="@live_uap-worker-status",n.REQUEST_NEW_ADDRESS="@live_uap-request-address"})(Ia||(Ia={})),function(n){n.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(Cd||(Cd={})),function(n){n[n.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",n[n.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",n[n.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",n[n.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",n[n.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",n[n.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",n[n.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",n[n.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",n[n.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",n[n.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",n[n.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",n[n.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",n[n.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",n[n.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",n[n.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",n[n.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(jn||(jn={})),function(n){n.CONNECT_FAILED="connect failed",n.CONNECT_TIMEOUT="connect timeout",n.WS_DISCONNECTED="websocket disconnected",n.REQUEST_TIMEOUT="request timeout",n.REQUEST_FAILED="request failed",n.WAIT_STATUS_TIMEOUT="wait status timeout",n.WAIT_STATUS_ERROR="wait status error",n.BAD_STATE="bad state",n.WS_ABORT="ws abort",n.AP_REQUEST_TIMEOUT="AP request timeout",n.AP_JSON_PARSE_ERROR="AP json parse error",n.AP_REQUEST_ERROR="AP request error",n.AP_REQUEST_ABORT="AP request abort"}(Bx||(Bx={})),function(n){n[n.SetSdkProfile=0]="SetSdkProfile",n[n.SetSourceChannel=1]="SetSourceChannel",n[n.SetSourceUserId=2]="SetSourceUserId",n[n.SetDestChannel=3]="SetDestChannel",n[n.StartPacketTransfer=4]="StartPacketTransfer",n[n.StopPacketTransfer=5]="StopPacketTransfer",n[n.UpdateDestChannel=6]="UpdateDestChannel",n[n.Reconnect=7]="Reconnect",n[n.SetVideoProfile=8]="SetVideoProfile"}(Qr||(Qr={})),function(n){n.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",n.NETWORK_CONNECTED="NETWORK_CONNECTED",n.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",n.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",n.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",n.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",n.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",n.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",n.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",n.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(ts||(ts={})),function(n){n.RELAY_STATE_IDLE="RELAY_STATE_IDLE",n.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",n.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",n.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(Ti||(Ti={})),function(n){n.RELAY_OK="RELAY_OK",n.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",n.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",n.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(Jc||(Jc={})),function(n){n.High="high",n.Low="low",n.Audio="audio",n.Screen="screen",n.ScreenLow="screen_low"}(cr||(cr={})),function(n){n.DISCONNECT="disconnect",n.CONNECTION_STATE_CHANGE="connection-state-change",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGE="stream-type-change",n.IS_P2P_DISCONNECTED="is-p2p-dis",n.DISCONNECT_P2P="dis-p2p",n.REQUEST_NEW_GATEWAY_LIST="req-gate-url",n.NEED_RENEW_SESSION="need-sid",n.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",n.JOIN_RESPONSE="join-response",n.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",n.RESET_CONNECTION_EVENTS="reset-connection-events",n.DATACHANNEL_PRECONNECT="datachannel_preconnect",n.DATACHANNEL_FAILBACK="datachannel_failback",n.RESET_SIGNAL="reset-signal"}(Tn||(Tn={})),function(n){n[n.Nothing=0]="Nothing",n[n.Audio=1]="Audio",n[n.LwoVideo=2]="LwoVideo",n[n.Video=4]="Video",n[n.Data=8]="Data"}(er||(er={})),function(n){n[n.websocket=0]="websocket",n[n.datachannel=1]="datachannel"}(D0||(D0={})),function(n){n.NEED_RENEGOTIATE="@need_renegotiate",n.NEED_REPLACE_TRACK="@need_replace_track",n.NEED_CLOSE="@need_close",n.NEED_ENABLE_TRACK="@need_enable_track",n.NEED_DISABLE_TRACK="@need_disable_track",n.NEED_SESSION_ID="@need_sid",n.SET_OPTIMIZATION_MODE="@set_optimization_mode",n.GET_STATS="@get_stats",n.GET_LOW_VIDEO_TRACK="@get_low_video_track",n.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",n.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",n.NEED_MUTE_TRACK="@need_mute_track",n.NEED_UNMUTE_TRACK="@need_unmute_track"}(et||(et={})),function(n){n.SCREEN_TRACK="screen_track",n.CUSTOM_TRACK="custome_track",n.LOW_STREAM="low_stream"}(pr||(pr={})),function(n){n[n.HIGH_STREAM=0]="HIGH_STREAM",n[n.LOW_STREAM=1]="LOW_STREAM"}(bd||(bd={})),function(n){n[n.HIGH_STREAM=0]="HIGH_STREAM",n[n.LOW_STREAM=1]="LOW_STREAM"}(Oy||(Oy={})),function(n){n[n.DISABLE=0]="DISABLE",n[n.LOW_STREAM=1]="LOW_STREAM",n[n.AUDIO_ONLY=2]="AUDIO_ONLY"}(Ay||(Ay={})),function(n){n.TRANSCEIVER_UPDATED="transceiver-updated"}(Ap||(Ap={})),function(n){n.SOURCE_STATE_CHANGE="source-state-change",n.TRACK_ENDED="track-ended",n.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",n.CLOSED="closed"}(Qc||(Qc={})),function(n){n.FIRST_FRAME_DECODED="first-frame-decoded",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(Td||(Td={})),function(n){n.CHINA="CHINA",n.ASIA="ASIA",n.NORTH_AMERICA="NORTH_AMERICA",n.EUROPE="EUROPE",n.JAPAN="JAPAN",n.INDIA="INDIA",n.KOREA="KOREA",n.HKMC="HKMC",n.US="US",n.OCEANIA="OCEANIA",n.SOUTH_AMERICA="SOUTH_AMERICA",n.AFRICA="AFRICA",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL",n.EXTENSIONS="EXTENSIONS"}(Nt||(Nt={}));const AK=[Nt.AFRICA,Nt.ASIA,Nt.CHINA,Nt.EUROPE,Nt.GLOBAL,Nt.INDIA,Nt.JAPAN,Nt.NORTH_AMERICA,Nt.OCEANIA,Nt.OVERSEA,Nt.SOUTH_AMERICA];let Ir;(function(n){n.CHINA="CN",n.ASIA="AS",n.NORTH_AMERICA="NA",n.EUROPE="EU",n.JAPAN="JP",n.INDIA="IN",n.KOREA="KR",n.HKMC="HK",n.US="US",n.OCEANIA="OC",n.SOUTH_AMERICA="SA",n.AFRICA="AF",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL",n.EXTENSIONS="GLOBAL"})(Ir||(Ir={}));const k0={CHINA:{},ASIA:{CODE:Ir.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Ir.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Ir.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Ir.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","	uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Ir.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Ir.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:Ir.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:Ir.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Ir.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Ir.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Ir.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Ir.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Ir.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};let Np,Wx,ut,Vr,ns,Me,fr,xt,ui,Zc,Zr,eo,Po,Do,lr,Ds,kn,rs,Gx,go,ea,el;uy&&(k0.CHINA={CODE:Ir.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(n){n.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(Np||(Np={}));class L0 extends In{constructor(r,i){super(),N(this,"onICEConnectionStateChange",void 0),N(this,"onConnectionStateChange",void 0),N(this,"onDTLSTransportStateChange",void 0),N(this,"onDTLSTransportError",void 0),N(this,"onICETransportStateChange",void 0),N(this,"onFirstAudioReceived",void 0),N(this,"onFirstVideoReceived",void 0),N(this,"onFirstAudioDecoded",void 0),N(this,"onFirstVideoDecoded",void 0),N(this,"onFirstVideoDecodedTimeout",void 0),N(this,"onSelectedLocalCandidateChanged",void 0),N(this,"onSelectedRemoteCandidateChanged",void 0),N(this,"establishPromise",void 0)}}(function(n){n.SEND="sendonly",n.RECV="recvonly",n.SENDRECV="sendrecv",n.INACTIVE="inactive"})(Wx||(Wx={})),function(n){n.VIDEO="video",n.AUDIO="audio"}(ut||(ut={})),function(n){n[n.UDP=0]="UDP",n[n.TCP=1]="TCP",n[n.RELAY=2]="RELAY"}(Vr||(Vr={})),function(n){n[n.FIRST_CONNECTION=0]="FIRST_CONNECTION",n[n.TCP_RESTART=1]="TCP_RESTART",n[n.RELAY_RESTART=2]="RELAY_RESTART",n[n.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",n[n.OLD_RESTART=11]="OLD_RESTART",n[n.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED"}(ns||(ns={})),function(n){n.LocalVideoTrack="videoTrack",n.LocalAudioTrack="audioTrack",n.LocalVideoLowTrack="videoLowTrack"}(Me||(Me={})),function(n){n.New="new",n.Connected="connected",n.Reconnecting="reconnecting",n.Disconnected="disconnected"}(fr||(fr={})),function(n){n.StateChange="stateChange",n.IceConnectionStateChange="iceConnectionStateChange",n.RequestMuteLocal="requestMuteLocal",n.RequestUnmuteLocal="requestUnmuteLocal",n.RequestRePublish="requestRePublish",n.RequestReSubscribe="requestReSubscribe",n.RequestUploadStats="requestUploadStats",n.MediaReconnectStart="MediaReconnectStart",n.MediaReconnectEnd="MediaReconnectEnd",n.NeedSignalRTT="NeedSignalRTT",n.RequestRestartICE="RequestRestartIce",n.PeerConnectionStateChange="PeerConnectionStateChange",n.RequestReconnect="RequestReconnect",n.RequestReconnectPC="RequestReconnectPC",n.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",n.P2PLost="P2PLost",n.UpdateVideoEncoder="UpdateVideoEncoder",n.ConnectionTypeChange="ConnectionTypeChange",n.RequestLowStreamParameter="RequestLowStreamParameter",n.QueryClientConnectionState="QueryClientConnectionState"}(xt||(xt={})),function(n){n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(ui||(ui={})),function(n){n.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(Zc||(Zc={})),function(n){n.ON_TRACK="on_track",n.ON_NODE="on_node"}(Zr||(Zr={})),function(n){n.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",n.REQUEST_CONSTRAINTS="request_constraints"}(eo||(eo={})),function(n){n.CONNECTING="CONNECTING",n.RECONNECTING="RECONNECTING",n.CONNECTED="CONNECTED",n.CLOSED="CLOSED"}(Po||(Po={})),function(n){n[n.CONNECT_AP=0]="CONNECT_AP",n[n.AP_CONNECTED=1]="AP_CONNECTED",n[n.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",n[n.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",n[n.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",n[n.CONNECT_WORKER=5]="CONNECT_WORKER",n[n.WORKER_CONNECTED=6]="WORKER_CONNECTED",n[n.CLOSED=7]="CLOSED"}(Do||(Do={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.STATE_CHANGE="state-change",n.INSPECT_RESULT="inspect-result",n.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",n.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(lr||(lr={})),function(n){n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.MULTI_IP="MULTI_IP",n.TIMEOUT="TIMEOUT",n.OFFLINE="OFFLINE",n.LEAVE="LEAVE",n.P2P_FAILED="P2P_FAILED",n.FALLBACK="FALLBACK"}(Ds||(Ds={})),function(n){n.CONNECTED="transmitter:connected",n.RECONNECTING="transmitter:reconnecting",n.WILL_RECONNECT="transmitter:will_reconnect",n.CLOSED="transmitter:closed",n.FAILED="transmitter:failed",n.ON_MESSAGE="transmitter:on_message",n.REQUEST_NEW_URLS="transmitter:request_new_urls",n.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",n.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",n.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",n.FAILBACK="transmitter:failback"}(kn||(kn={})),function(n){n.CAMERA_CHANGED="camera-changed",n.MICROPHONE_CHANGED="microphone-changed",n.PLAYBACK_DEVICE_CHANGED="playback-device-changed",n.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",n.AUTOPLAY_FAILED="autoplay-failed",n.SECURITY_POLICY_VIOLATION="security-policy-violation"}(rs||(rs={})),function(n){n[n.APP_TYPE_INVALID_VALUE=-1]="APP_TYPE_INVALID_VALUE",n[n.APP_TYPE_NATIVE=0]="APP_TYPE_NATIVE",n[n.APP_TYPE_NATIVE_COCOS=1]="APP_TYPE_NATIVE_COCOS",n[n.APP_TYPE_NATIVE_UNITY=2]="APP_TYPE_NATIVE_UNITY",n[n.APP_TYPE_NATIVE_ELECTRON=3]="APP_TYPE_NATIVE_ELECTRON",n[n.APP_TYPE_NATIVE_FLUTTER=4]="APP_TYPE_NATIVE_FLUTTER",n[n.APP_TYPE_NATIVE_UNREAL=5]="APP_TYPE_NATIVE_UNREAL",n[n.APP_TYPE_NATIVE_XAMARIN=6]="APP_TYPE_NATIVE_XAMARIN",n[n.APP_TYPE_NATIVE_API_CLOUD=7]="APP_TYPE_NATIVE_API_CLOUD",n[n.APP_TYPE_NATIVE_REACT_NATIVE=8]="APP_TYPE_NATIVE_REACT_NATIVE",n[n.APP_TYPE_NATIVE_PYTHON=9]="APP_TYPE_NATIVE_PYTHON",n[n.APP_TYPE_NATIVE_COCOS_CREATOR=10]="APP_TYPE_NATIVE_COCOS_CREATOR",n[n.APP_TYPE_NATIVE_RUST=11]="APP_TYPE_NATIVE_RUST",n[n.APP_TYPE_NATIVE_C_SHARP=12]="APP_TYPE_NATIVE_C_SHARP",n[n.APP_TYPE_NATIVE_CEF=13]="APP_TYPE_NATIVE_CEF",n[n.APP_TYPE_NATIVE_UNI_APP=14]="APP_TYPE_NATIVE_UNI_APP",n[n.APP_TYPE_WEBRTC=1e3]="APP_TYPE_WEBRTC",n[n.APP_TYPE_WEBRTC_REACT=1001]="APP_TYPE_WEBRTC_REACT",n[n.APP_TYPE_WEBRTC_VUE=1002]="APP_TYPE_WEBRTC_VUE",n[n.APP_TYPE_WEBRTC_ANGULAR=1003]="APP_TYPE_WEBRTC_ANGULAR"}(Gx||(Gx={})),function(n){n.CONNECTING="CONNECTING",n.RECONNECTING="RECONNECTING",n.CONNECTED="CONNECTED",n.CLOSED="CLOSED"}(go||(go={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.STATE_CHANGE="state-change",n.INSPECT_RESULT="inspect-result",n.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",n.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(ea||(ea={})),function(n){n[n.CONNECT_AP=0]="CONNECT_AP",n[n.AP_CONNECTED=1]="AP_CONNECTED",n[n.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",n[n.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",n[n.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",n[n.CONNECT_WORKER=5]="CONNECT_WORKER",n[n.WORKER_CONNECTED=6]="WORKER_CONNECTED",n[n.CLOSED=7]="CLOSED"}(el||(el={}));const di={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1};function zn(){return di}let Sr;(function(n){n[n.CHOOSE_SERVER=11]="CHOOSE_SERVER",n[n.CLOUD_PROXY=18]="CLOUD_PROXY",n[n.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",n[n.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"})(Sr||(Sr={}));var NK=fe,xp=Array.isArray||function(n){return NK(n)=="Array"},xK=I,zx=xp,PK=oS,DK=pt,kK=ar("species"),Kx=xK.Array,LK=function(n){var r;return zx(n)&&(r=n.constructor,(PK(r)&&(r===Kx||zx(r.prototype))||DK(r)&&(r=r[kK])===null)&&(r=void 0)),r===void 0?Kx:r},Yx=function(n,r){return new(LK(n))(r===0?0:r)},MK=fp,UK=Ie,FK=Gr,VK=Hc,jK=Yx,qx=y([].push),tl=function(n){var r=n==1,i=n==2,s=n==3,l=n==4,d=n==6,p=n==7,v=n==5||d;return function(E,T,C,R){for(var L,j,Y=FK(E),q=UK(Y),X=MK(T,C),le=VK(q),he=0,ye=R||jK,ke=r?ye(E,le):i||p?ye(E,0):void 0;le>he;he++)if((v||he in q)&&(j=X(L=q[he],he,Y),n))if(r)ke[he]=j;else if(j)switch(n){case 3:return!0;case 5:return L;case 6:return he;case 2:qx(ke,L)}else switch(n){case 4:return!1;case 7:qx(ke,L)}return d?-1:s||l?l:ke}},Xx={forEach:tl(0),map:tl(1),filter:tl(2),some:tl(3),every:tl(4),find:tl(5),findIndex:tl(6),filterReject:tl(7)},BK=Xx.forEach,Jx=P_("forEach")?[].forEach:function(n){return BK(this,n,arguments.length>1?arguments[1]:void 0)};Di({target:"Array",proto:!0,forced:[].forEach!=Jx},{forEach:Jx});var $K=Wc("Array").forEach,HK=zc,WK=Jn,GK=b,zK=$K,Ny=Array.prototype,KK={DOMTokenList:!0,NodeList:!0},YK=function(n){var r=n.forEach;return n===Ny||GK(Ny,n)&&r===Ny.forEach||WK(KK,HK(n))?zK:r},qK=Gr,Qx=$_;Di({target:"Object",stat:!0,forced:c(function(){Qx(1)})},{keys:function(n){return Qx(qK(n))}});var XK=Ye.Object.keys,JK=nO,QK=Di,ZK=xp,eY=y([].reverse),Zx=[1,2];QK({target:"Array",proto:!0,forced:String(Zx)===String(Zx.reverse())},{reverse:function(){return ZK(this)&&(this.length=this.length),eY(this)}});var tY=Wc("Array").reverse,nY=b,rY=tY,xy=Array.prototype,iY=function(n){var r=n.reverse;return n===xy||nY(xy,n)&&r===xy.reverse?rY:r},oY=c,aY=Nn,sY=ar("species"),eP=function(n){return aY>=51||!oY(function(){var r=[];return(r.constructor={})[sY]=function(){return{foo:1}},r[n](Boolean).foo!==1})},cY=Di,lY=I,tP=xp,uY=oS,dY=pt,nP=U_,hY=Hc,pY=at,fY=py,mY=ar,gY=aS,vY=eP("slice"),EY=mY("species"),Py=lY.Array,_Y=Math.max;cY({target:"Array",proto:!0,forced:!vY},{slice:function(n,r){var i,s,l,d=pY(this),p=hY(d),v=nP(n,p),E=nP(r===void 0?p:r,p);if(tP(d)&&(i=d.constructor,(uY(i)&&(i===Py||tP(i.prototype))||dY(i)&&(i=i[EY])===null)&&(i=void 0),i===Py||i===void 0))return gY(d,v,E);for(s=new(i===void 0?Py:i)(_Y(E-v,0)),l=0;v<E;v++,l++)v in d&&fY(s,l,d[v]);return s.length=l,s}});var SY=Wc("Array").slice,yY=b,CY=SY,Dy=Array.prototype,bY=function(n){var r=n.slice;return n===Dy||yY(Dy,n)&&r===Dy.slice?CY:r};function _e(n,r,i,s,l){var d,p,v,E={};return YK(d=XK(s)).call(d,function(T){E[T]=s[T]}),E.enumerable=!!E.enumerable,E.configurable=!!E.configurable,("value"in E||E.initializer)&&(E.writable=!0),E=JK(p=iY(v=bY(i).call(i)).call(v)).call(p,function(T,C){return C(n,r,T)||T},E),l&&E.initializer!==void 0&&(E.value=E.initializer?E.initializer.call(l):void 0,E.initializer=void 0),E.initializer===void 0&&(HN(n,r,E),E=null),E}var TY=Wc("Array").keys,RY=zc,IY=Jn,wY=b,OY=TY,ky=Array.prototype,AY={DOMTokenList:!0,NodeList:!0},au=function(n){var r=n.keys;return n===ky||wY(ky,n)&&r===ky.keys||IY(AY,RY(n))?OY:r};function rP(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function iP(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?rP(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):rP(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}let M0=0,Ly=0;function wa(n,r,i,s){return new Pe((l,d)=>{r.timeout=r.timeout||ie("HTTP_CONNECT_TIMEOUT"),r.responseType=r.responseType||"json",r.data&&!i?(r.data=JSON.stringify(r.data),M0+=Nd(r.data)):i&&(r.data.size?M0+=r.data.size:r.data instanceof FormData?M0+=function(p){let v=0;return/DingTalk/i.test(navigator.userAgent)&&p.realFormData&&(p=p.realFormData),p.forEach(E=>{v+=typeof E=="string"?Nd(E):E.size}),v+138}(r.data):M0+=Nd(JSON.stringify(r.data))),r.headers=r.headers||{},r.headers["Content-Type"]=r.headers["Content-Type"]||"application/json",r.method="POST",r.url=n,Ao.request(r).then(p=>{typeof p.data=="string"?Ly+=Nd(p.data):p.data instanceof ArrayBuffer||p.data instanceof Uint8Array?Ly+=p.data.byteLength:Ly+=Nd(JSON.stringify(p.data)),s&&l({data:p.data,headers:p.headers}),l(p.data)}).catch(p=>{Ao.isCancel(p)?d(new Q(W.OPERATION_ABORTED,"cancel token canceled")):p.code==="ECONNABORTED"?d(new Q(W.NETWORK_TIMEOUT,p.message)):p.response?d(new Q(W.NETWORK_RESPONSE_ERROR,p.response.status)):d(new Q(W.NETWORK_ERROR,p.message))})})}async function NY(n,r){const i=new Blob([r.data],{type:"buffer"});return await wa(n,iP(iP({},r),{},{data:i,headers:{"Content-Type":"application/octet-stream"}}),!0)}const tr=new class extends In{set networkState(n){U.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+n),this.emit(Zc.NETWORK_STATE_CHANGE,n,this._networkState),n===ui.ONLINE?this.emit(Zc.ONLINE):n===ui.OFFLINE&&(this.onlineWaiter=new Pe(r=>{this.once(Zc.ONLINE,()=>{this.onlineWaiter=void 0,r(ui.ONLINE)})}),this.emit(Zc.OFFLINE)),this._networkState=n}get networkState(){return this._networkState}constructor(){super(),N(this,"_moduleName","network-indicator"),N(this,"_networkState",ui.ONLINE),N(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=ui.ONLINE}),window.addEventListener("offline",()=>{this.networkState=ui.OFFLINE})}};let My=!1;const ko=new class extends In{constructor(){super(...arguments),N(this,"onAutoplayFailed",void 0),N(this,"onAudioAutoplayFailed",void 0)}};function oP(){if(Ht(),!My){const n=r=>{r.preventDefault(),My=!1,bp()?document.body.removeEventListener("click",n,!0):(document.body.removeEventListener("touchstart",n,!0),document.body.removeEventListener("mousedown",n,!0))};My=!0,bp()?document.body.addEventListener("click",n,!0):(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0)),U.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),ko.onAutoplayFailed?ko.onAutoplayFailed():ko.onAudioAutoplayFailed?U.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):U.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),ko.emit("autoplay-failed")}}function Uy(n){return new TextEncoder().encode(n)}const aP=function(n,r){const i=new Uint8Array(n.byteLength+r.byteLength);return i.set(new Uint8Array(n),0),i.set(new Uint8Array(r),n.byteLength),i},xY=async n=>function(r,i){let s="";return new Uint8Array(r).forEach(l=>{s+=l.toString(i).padStart(2,"0")}),s}(await crypto.subtle.digest("SHA-256",Uy(n)),16);function sP(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function dt(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?sP(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):sP(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function ze(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(r,i,s){const l=s.value;if(typeof l=="function"){const d=n.className||r.__className__||(r.constructor.name==="AgoraRTCClient"?"Client":r.constructor.name);s.value=function(){for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];let T=v;if(n.argsMap)try{T=n.argsMap(this,...v)}catch(R){U.warning(R),T=[]}try{JSON.stringify(T)}catch{U.warning("arguments for method ".concat(d,".").concat(String(i)," not serializable for apiInvoke.")),T=[]}const C=(n.report||Ue).reportApiInvoke(this._sessionId||null,{name:"".concat(d,".").concat(String(i)),options:T,tag:bn.TRACER,reportResult:n.reportResult},n.throttleTime);try{const R=l.apply(this,v);return R instanceof Pe?R.then(L=>(C.onSuccess(n.reportResult&&L),L)).catch(L=>{throw C.onError(L),L}):(C.onSuccess(n.reportResult&&R),R)}catch(R){throw C.onError(R),R}}}return s}}const Ue=new class{constructor(){N(this,"baseInfoMap",new Map),N(this,"proxyServer",void 0),N(this,"clientList",ru),N(this,"eventUploadTimer",void 0),N(this,"setSessionIdTimer",void 0),N(this,"url",void 0),N(this,"backupUrl",void 0),N(this,"_appId",void 0),N(this,"keyEventUploadPendingItems",[]),N(this,"normalEventUploadPendingItems",[]),N(this,"apiInvokeUploadPendingItems",[]),N(this,"apiInvokeCount",0),N(this,"ltsList",[]),N(this,"lastSendNormalEventTime",Date.now()),N(this,"customReportCounterTimer",void 0),N(this,"customReportCount",0),N(this,"extApiInvoke",async n=>{for(const r of n){const i=dt(dt({},r),{},{sid:null,invokeId:++this.apiInvokeCount,tag:bn.TRACER});this.sendApiInvoke(i)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),ie("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),ie("EVENT_REPORT_SEND_INTERVAL"))}adjustSessionStartTime(n){if(!this.baseInfoMap.has(n)&&!this.baseInfoMap.get(n))return void U.error("adjust session ".concat(n," start time, sid is not exist or info is undefined"));const r=this.baseInfoMap.get(n),i=Date.now(),s=r.startTime;r.startTime=i,U.debug("rewrite session ".concat(n," startTime: ").concat(i," , ").concat(i-s,"ms")),this.baseInfoMap.set(n,r)}setAppId(n){this._appId=n}reportApiInvoke(n,r,i){r.timeout=r.timeout||6e4,r.reportResult=r.reportResult===void 0||r.reportResult;const s=Date.now();this.apiInvokeCount+=1;const l=this.apiInvokeCount,d=()=>({tag:r.tag,invokeId:l,sid:n,name:r.name,apiInvokeTime:s,options:r.options,states:r.states||null}),p=!!ie("SHOW_REPORT_INVOKER_LOG");p&&U.info("".concat(r.name," start"),r.options);let v=!1;ti(r.timeout).then(()=>{v||(this.sendApiInvoke(dt(dt({},d()),{},{error:W.API_INVOKE_TIMEOUT,success:!1})),U.debug("".concat(r.name," timeout")))});const E=new Q(W.UNEXPECTED_ERROR,"".concat(r.name,": this api invoke is end"));return{onSuccess:T=>{const C=()=>{if(v)throw E;return v=!0,this.sendApiInvoke(dt(dt({},d()),{},{success:!0},r.reportResult&&{result:T})),p&&U.info("".concat(r.name," onSuccess")),T};return i?bD(C,r.name+"Success",i,()=>v=!0):C()},onError:T=>{const C=()=>{if(v)throw T;v=!0,this.sendApiInvoke(dt(dt({},d()),{},{success:!1,error:T})),p&&U.info("".concat(r.name," onFailure"),T.toString())};return i?bD(C,r.name+"Error",i,()=>v=!0):C()}}}sessionInit(n,r){if(this.baseInfoMap.has(n))return;const i=Date.now(),s=this.createBaseInfo(n,i);s.cname=r.cname;const l=Object.assign({},{willUploadConsoleLog:ie("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:uy?"global":"oversea",areas:ie("AREAS")&&ie("AREAS").join(",")},r.extend),d=Date.now(),p=dt(dt({},s),{},{eventType:Fr.SESSION_INIT,appid:r.appid,browser:navigator.userAgent,build:ly,lts:d,elapse:d-i,extend:JSON.stringify(l),mode:r.mode,process:ie("PROCESS_ID"),appType:ie("APP_TYPE"),success:!0,version:Zo});this.send({type:wn.SESSION,data:p},!0)}joinChooseServer(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),d=dt(dt({},s),{},{eventType:Fr.JOIN_CHOOSE_SERVER,lts:l,eventElapse:l-r.lts,chooseServerAddr:r.csAddr,errorCode:r.ec,elapse:l-i.startTime,success:r.succ,chooseServerAddrList:JSON.stringify(r.serverList),uid:r.uid?parseInt(r.uid):null,cid:r.cid?parseInt(r.cid):null,chooseServerIp:r.csIp||"",opid:r.opid,unilbsServerIds:r.unilbsServerIds,extend:r.extend||void 0,isHttp3:r.isHttp3});this.send({type:wn.JOIN_CHOOSE_SERVER,data:d},!0)}reqUserAccount(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),d=dt(dt({},s),{},{eventType:Fr.REQ_USER_ACCOUNT,lts:l,success:r.success,serverAddress:r.serverAddr,stringUid:r.stringUid,uid:r.uid,errorCode:r.errorCode,elapse:l-i.startTime,eventElapse:l-r.lts,extend:JSON.stringify(r.extend)});this.send({type:wn.REQ_USER_ACCOUNT,data:d},!0)}joinGateway(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info;r.vid&&(s.vid=r.vid),s.uid=r.uid,s.cid=r.cid;const l=Date.now(),{firstSuccess:d,avoidJoinStartTime:p,isProxy:v,addr:E}=r,T=l-(d&&p?p:i.startTime),C=dt(dt({},s),{},{eventType:Fr.JOIN_GATEWAY,lts:l,gatewayAddr:r.addr,success:r.succ,errorCode:r.ec,elapse:T,eventElapse:l-r.lts,firstSuccess:d,signalChannel:r.signalChannel}),R=C.success?1:0;if(r.succ&&(i.lastJoinSuccessTime=l),d)this.send({type:wn.JOIN_GATEWAY,data:C},!0);else{let L;if(E)if(v){const Y=E.match(/h=(\d{1,3}-){3}\d{1,3}/g),q=E.match(/p=[0-9]{1,6}/g);L={isSuccess:R,gatewayIp:Y&&Y.length?Y[0].split("=")[1].replace(/-/g,"."):"",port:q&&q.length?q[0].split("=")[1]:"",isProxy:v?1:0}}else{const Y=E.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),q=E.match(/:[0-9]{1,6}/g);L={isSuccess:R,gatewayIp:Y&&Y.length?Y[0].split("//")[1].replace(/-/g,"."):"",port:q&&q.length?q[0].split(":")[1]:"",isProxy:v?1:0}}else L={isSuccess:R,gatewayIp:"",port:"",isProxy:v?1:0};delete C.success,delete C.eventType,delete C.firstSuccess,C.vid=Number(C.vid);const j=Object.assign({},C,L,{eventType:Fr.REJOIN_GATEWAY});this.send({type:wn.RE_JOIN_GATEWAY,data:j},!0)}}joinChannelTimeout(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=Date.now(),l=dt(dt({},i.info),{},{lts:s,timeout:r,elapse:s-i.startTime});this.send({type:wn.JOIN_CHANNEL_TIMEOUT,data:l},!0)}publish(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),d=dt(dt({},s),{},{eventType:Fr.PUBLISH,lts:l,eventElapse:r.eventElapse,elapse:l-i.startTime,success:r.succ,errorCode:r.ec,videoName:r.videoName,audioName:r.audioName,screenName:r.screenName,screenshare:r.screenshare,audio:r.audio,video:r.video,p2pid:r.p2pid,publishRequestid:r.publishRequestid});this.send({type:wn.PUBLISH,data:d},!0)}subscribe(n,r,i){const s=this.baseInfoMap.get(n);if(!s)return;const l=s.info,d=Date.now(),p=dt(dt({},l),{},{eventType:Fr.SUBSCRIBE,lts:d,eventElapse:r.eventElapse,elapse:d-s.startTime,success:r.succ,errorCode:r.ec,video:r.video,audio:r.audio,subscribeRequestid:r.subscribeRequestid,p2pid:r.p2pid},i&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof r.peerid=="string"?p.peerSuid=r.peerid:p.peer=r.peerid,this.send({type:wn.SUBSCRIBE,data:p},!0)}wsCompressorInit(n){var r;const i=[...au(r=this.baseInfoMap).call(r)],s=i.length?i[0]:"UnableToGetSid",l=this.baseInfoMap.get(s);if(!l)return;const d=l.info,p=Date.now(),v=dt(dt({},d),{},{eventType:Fr.WS_COMPRESSOR_INIT,lts:p,eventElapse:n.eventElapse,elapse:p-l.startTime,status:n.status?1:2});this.send({type:wn.WS_COMPRESSOR_INIT,data:v},!0)}firstRemoteVideoDecode(n,r,i,s){const l=this.baseInfoMap.get(n);if(!l)return;const d=l.info,p=Date.now(),v=dt(dt(dt({},d),s),{},{elapse:p-l.startTime,eventType:r,lts:p,firstDecodeFrame:Math.max(p-l.startTime,0),apEnd:Math.max(s.apEnd-l.startTime,0),apStart:Math.max(s.apStart-l.startTime,0),joinGwEnd:Math.max(s.joinGwEnd-l.startTime,0),joinGwStart:Math.max(s.joinGwStart-l.startTime,0),pcEnd:Math.max(s.pcEnd-l.startTime,0),pcStart:Math.max(s.pcStart-l.startTime,0),subscriberEnd:Math.max(s.subscriberEnd-l.startTime,0),subscriberStart:Math.max(s.subscriberStart-l.startTime,0),videoAddNotify:Math.max(s.videoAddNotify-l.startTime,0)});this.send({type:i,data:v},!0)}firstRemoteFrame(n,r,i,s){const l=this.baseInfoMap.get(n);if(!l)return;const d=l.info,p=Date.now(),v=dt(dt(dt({},d),s),{},{elapse:p-l.startTime,eventType:r,lts:p});this.send({type:i,data:v},!0)}pcStats(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),d=dt(dt(dt({},s),r),{},{vid:s.vid===void 0?0:Number(s.vid),elapse:l-i.startTime,eventType:Fr.PC_STATS,lts:l});this.send({type:wn.PC_STATS,data:d},!0)}onGatewayStream(n,r,i,s){const l=this.baseInfoMap.get(n);if(!l)return;const d=l.info,p=Date.now(),v=dt(dt(dt({},d),s),{},{eventType:r,lts:p});this.send({type:i,data:v},!0)}streamSwitch(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),d=dt(dt({},s),{},{eventType:Fr.STREAM_SWITCH,lts:l,isDual:r.isdual,elapse:l-i.startTime,success:r.succ});this.send({type:wn.STREAM_SWITCH,data:d},!0)}requestProxyAppCenter(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),d=dt(dt({},s),{},{eventType:Fr.REQUEST_PROXY_APPCENTER,lts:l,eventElapse:l-r.lts,elapse:l-i.startTime,APAddr:r.APAddr,workerManagerList:r.workerManagerList,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:wn.REQUEST_PROXY_APPCENTER,data:d},!0)}requestProxyWorkerManager(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),d=dt(dt({},s),{},{eventType:Fr.REQUEST_PROXY_WORKER_MANAGER,lts:l,eventElapse:l-r.lts,elapse:l-i.startTime,workerManagerAddr:r.workerManagerAddr,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:wn.REQUEST_PROXY_WORKER_MANAGER,data:d},!0)}setProxyServer(n){this.proxyServer=n,n?U.debug("reportProxyServerurl: ".concat(n)):U.debug("disable reportProxyServerurl: ".concat(n))}peerPublishStatus(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),d=dt(dt({},s),{},{subscribeElapse:r.subscribeElapse,peer:r.peer,peerPublishDuration:Math.max(r.audioPublishDuration,r.videoPublishDuration),audiotag:r.audioPublishDuration>0?1:-1,videotag:r.videoPublishDuration>0?1:-1,lts:l,elapse:l-i.startTime,joinChannelSuccessElapse:l-(i.lastJoinSuccessTime||l),peerPublishDurationVideo:r.videoPublishDuration,peerPublishDurationAudio:r.audioPublishDuration});this.send({type:wn.PEER_PUBLISH_STATUS,data:d},!0)}workerEvent(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now();(function(d,p,v){const E=d[p];if(!E||typeof E!="string")return[d];d[p]="";const T=Nd(JSON.stringify(d));let C=0;const R=[];let L=0;for(let j=0;j<E.length;j++)L+=E.charCodeAt(j)<=127?1:3,L<=v-T||(R[R.length]=lu(lu({},d),{},{[p]:E.substring(C,j)}),C=j,L=E.charCodeAt(j)<=127?1:3);return C!==E.length-1&&(R[R.length]=lu(lu({},d),{},{[p]:E.substring(C)})),R})(dt(dt(dt({},s),r),{},{elapse:l-i.startTime,lts:l,productType:"WebRTC"}),"payload",1300).forEach(d=>this.send({type:wn.WORKER_EVENT,data:d},!0))}apworkerEvent(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),d=dt(dt(dt({},s),r),{},{elapse:l-i.startTime,lts:l});this.send({type:wn.AP_WORKER_EVENT,data:d},!0)}joinWebProxyAP(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),d=dt(dt(dt({},s),r),{},{elapse:l-i.startTime,lts:l,extend:r.extend||void 0});this.send({type:wn.JOIN_WEB_PROXY_AP,data:d},!0)}WebSocketQuit(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),d=dt(dt(dt({},s),r),{},{elapse:l-i.startTime,lts:l});this.send({type:wn.WEBSOCKET_QUIT,data:d},!0)}async sendCustomReportMessage(n,r){if(this.customReportCount+=r.length,this.customReportCount>ie("CUSTOM_REPORT_LIMIT"))throw new Q(W.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const i=Date.now(),s=r.map(l=>({type:wn.USER_ANALYTICS,data:dt(dt({sid:n},l),{},{lts:i})}));try{ie("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(s):await this.postDataToStatsCollector(s)}catch(l){throw U.error("send custom report message failed",l.toString()),new Q(W.CUSTOM_REPORT_SEND_FAILED,l.message)}}autoplayFailed(n,r,i,s){if(!n)return;const l=this.baseInfoMap.get(n);if(!l)return;const d=l.info,p=Date.now(),v=dt(dt({},d),{},{vid:d.vid===void 0?0:Number(d.vid),lts:p,elapse:p-l.startTime,cbRegistered:ko.onAutoplayFailed||ko.onAudioAutoplayFailed?1:-1,errorMsg:i,mediaType:r,trackId:s,extend:void 0});this.send({type:wn.AUTOPLAY_FAILED,data:v},!0)}sendApiInvoke(n){const r=ie("NOT_REPORT_EVENT");if(n.tag&&r.includes&&r.includes(n.tag))return!1;if(n.sid===null)return this.apiInvokeUploadPendingItems.push(n),!1;const i=this.baseInfoMap.get(n.sid);if(!i)return this.apiInvokeUploadPendingItems.push(n),!1;const{cname:s,uid:l,cid:d}=i.info;n.lts=n.lts||Date.now();let p;if(n.error)if(n.error instanceof Q){const{code:E,message:T}=n.error;p=E||T||n.error.toString()}else p=n.error.toString();const v={invokeId:n.invokeId,sid:n.sid,cname:s,cid:d,uid:l,lts:n.lts,success:n.success,elapse:n.lts-i.startTime,execElapse:n.lts-n.apiInvokeTime,apiName:n.name,options:n.options?JSON.stringify(n.options):void 0,execStates:n.states?JSON.stringify(n.states):void 0,execResult:n.result?JSON.stringify(n.result):void 0,errorCode:n.error?p:void 0,errorMsg:n.error?JSON.stringify(n.error):void 0};return this.send({type:wn.API_INVOKE,data:v},!1),!0}appendSessionId(){this.clientList.forEach(n=>{if(n._sessionId){const r=this.apiInvokeUploadPendingItems.length;for(let i=0;i<r;i++){const s=this.apiInvokeUploadPendingItems.shift();s&&(s.sid=n._sessionId,this.sendApiInvoke(Object.assign({},s)))}}})}send(n,r){if(r)return this.keyEventUploadPendingItems.push(n),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(n),this.normalEventUploadPendingItems.length>ie("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(n,r){const i=[],s=[];for(;n.length;){const d=n.shift();i.length<20?i.push(d):s.push(d)}n.push(...s);for(const d of[...i]){var l;this.ltsList.indexOf(d.data.lts)!==-1?(d.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(d.data.lts)):(this.ltsList.push(d.data.lts),vy(l=this.ltsList).call(l,(p,v)=>p-v))}return r||(this.lastSendNormalEventTime=Date.now()),ie("ENABLE_EVENT_REPORT")&&i.length&&(ie("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(i):this.postDataToStatsCollector(i)).catch((d=>p=>{ie("EVENT_REPORT_RETRY")&&(r?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(d):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(d),this.normalEventUploadPendingItems.length>ie("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-ie("NORMAL_EVENT_QUEUE_CAPACITY")),U.warning("report: drop normal events"))))})(i)),n}async postDataToStatsCollector2(n){tr.networkState===ui.OFFLINE&&await Pe.race([tr.onlineWaiter,ti(2*Qn.maxRetryTimeout)]);const r=l=>{let d=new Uint8Array;return l.forEach(p=>{const v=Uy(JSON.stringify(p.data)),E=new ArrayBuffer(5),T=(R=>{let L=0;return Object.entries(wn).forEach(j=>{let[Y,q]=j;q===R.type&&(L=Cy[Y])}),L})(p),C=new DataView(E);C.setUint16(0,v.byteLength,!0),C.setUint8(2,255&T),C.setUint8(3,T>>>8&255),C.setUint8(4,T>>>16&255),d=aP(d,new Uint8Array(E)),d=aP(d,v)}),d},i="event";let s=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ie("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(i):"https://".concat(ie("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(i);for(let l=0;l<2;l+=1){l===1&&(s=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ie("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(i):"https://".concat(ie("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(i));try{await wa(s,{timeout:1e4,data:r(n),headers:dt(dt({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(d){if(l===1)throw d;continue}return}}async postDataToStatsCollector(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:n.map(d=>JSON.stringify(d)),vid:(d=>{const p=d&&d.data.sid&&this.baseInfoMap.get(d.data.sid);return p&&p.info.vid&&+p.info.vid||0})(n[0])};tr.networkState===ui.OFFLINE&&await Pe.race([tr.onlineWaiter,ti(2*Qn.maxRetryTimeout)]);const s=r?"/events/proto-raws":"/events/messages";let l=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ie("EVENT_REPORT_DOMAIN"),"&p=").concat(ie("STATS_COLLECTOR_PORT"),"&d=").concat(s):"https://".concat(ie("EVENT_REPORT_DOMAIN"),":").concat(ie("STATS_COLLECTOR_PORT")).concat(s));for(let d=0;d<2;d+=1){d===1&&(l=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ie("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(ie("STATS_COLLECTOR_PORT"),"&d=").concat(s):"https://".concat(ie("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(ie("STATS_COLLECTOR_PORT")).concat(s)));try{r?await NY(l,{timeout:1e4,data:i}):await wa(l,{timeout:1e4,data:i})}catch(p){if(d===1)throw p;continue}return}}createBaseInfo(n,r){const i=Object.assign({},bK);return i.sid=n,this.baseInfoMap.set(n,{info:i,startTime:r}),i}reportResourceTiming(n,r){const i=performance.getEntriesByName(n),s=i[i.length-1];s&&this.reportApiInvoke(r,{name:"Client.resourceTiming",options:s,tag:bn.TRACER}).onSuccess()}};A0.on("REPORT_LOG_UPLOAD",n=>{n.networkState=tr.networkState,Ue.reportApiInvoke(null,{name:"logUploadError",options:n,tag:bn.TRACER})});class cP extends In{constructor(r,i){super(),N(this,"trackMediaType",void 0),N(this,"_ID",void 0),N(this,"_rtpTransceiver",void 0),N(this,"_lowRtpTransceiver",void 0),N(this,"_hints",[]),N(this,"_isClosed",!1),N(this,"_originMediaStreamTrack",void 0),N(this,"_mediaStreamTrack",void 0),N(this,"_external",{}),this._ID=i||fn(8,"track-"),this._originMediaStreamTrack=r,this._mediaStreamTrack=r,function(s){Ip.includes(s)||Ip.push(s)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(r){if(!r){const i=Ue.reportApiInvoke(null,{name:Zn.GET_MEDIA_STREAM_TRACK,options:[],tag:bn.TRACER});this._mediaStreamTrack&&typeof this._mediaStreamTrack.label=="string"?i.onSuccess(this._mediaStreamTrack.label):i.onSuccess("")}return this._mediaStreamTrack}getRTCRtpTransceiver(r){return r===bd.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(r){const i=Ip.indexOf(r);i!==-1&&Ip.splice(i,1)}(this),this.emit(Qc.CLOSED)}_updateRtpTransceiver(r,i){if(i===bd.LOW_STREAM){if(this._lowRtpTransceiver===r)return;this._lowRtpTransceiver=r}else{if(this._rtpTransceiver===r)return;this._rtpTransceiver=r}this.emit(Ap.TRANSCEIVER_UPDATED,r,i)}}let yr,PY=1;class Ri{constructor(r){N(this,"lockingPromise",Pe.resolve()),N(this,"locks",0),N(this,"name",""),N(this,"lockId",void 0),this.lockId=PY++,r&&(this.name=r),U.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(r){let i;this.locks+=1,U.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat(typeof r=="string"?r:""));const s=new Pe(d=>{i=()=>{this.locks-=1,U.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat(typeof r=="string"?r:"")),d()}}),l=this.lockingPromise.then(()=>i);return this.lockingPromise=this.lockingPromise.then(()=>s),l}}function Rd(n,r){return function(i,s,l){const d=l.value;if(typeof d!="function")throw new Error("Cannot use mutex on object property.");return l.value=async function(){const p=this[r];if(!p)throw new Error("mutex property key ".concat(r," doesn't exist on ").concat(n));const v=await p.lock("From ".concat(n,".").concat(s));try{for(var E=arguments.length,T=new Array(E),C=0;C<E;C++)T[C]=arguments[C];return await d.apply(this,T)}finally{v()}},l}}class Fy extends cP{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}set processorContext(r){this._processorContext=r}constructor(r,i){super(r,i),N(this,"_enabled",!0),N(this,"_muted",!1),N(this,"_isExternalTrack",!1),N(this,"_isClosed",!1),N(this,"_enabledMutex",void 0),N(this,"processor",void 0),N(this,"_processorContext",void 0),N(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new Ri("".concat(this.getTrackId())),r.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var r,i;return(r=(i=this._originMediaStreamTrack)===null||i===void 0?void 0:i.label)!==null&&r!==void 0?r:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,U.debug("[".concat(this.getTrackId(),"] close")),this.emit(et.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(r,i){let s=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this._isExternalTrack=s,r!==this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),i&&this._originMediaStreamTrack.stop(),r.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=r,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mn(this,et.NEED_REPLACE_TRACK,this),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){U.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Qc.TRACK_ENDED)}stateCheck(r,i){if(U.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(r,": ").concat(i,"]")),Sd(i,r),this._enabled&&this._muted&&r==="enabled"&&i===!1)throw new Q(W.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&r==="muted"&&i===!0)throw new Q(W.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}function lP(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}(function(n){n.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",n.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",n.IOS_INTERRUPTION_START="ios-interruption-start",n.IOS_INTERRUPTION_END="ios-interruption-end",n.STATE_CHANGE="state-change"})(yr||(yr={}));const uP=window.AudioContext||window.webkitAudioContext;let Lo=null;const Gt=new class extends In{constructor(){super(...arguments),N(this,"prevState",void 0),N(this,"curState",void 0),N(this,"currentTime",void 0),N(this,"currentTimeStuckAt",void 0),N(this,"interruptDetectorTrack",void 0),N(this,"onLocalAudioTrackMute",()=>{U.info("ios15-interruption-start"),this.emit(yr.IOS_15_16_INTERRUPTION_START)}),N(this,"onLocalAudioTrackUnmute",async()=>{U.info("ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?U.info("ios15-interruption-end-canceled"):(Lo&&await Lo.suspend(),this.emit(yr.IOS_15_16_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(n){U.debug("webaudio bindInterruptDetectorTrack ".concat(n.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=n,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(n){U.debug("webaudio unbindInterruptDetectorTrack ".concat(n.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===n&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function DY(){if(!uP)return void U.error("your browser is not support web audio");U.info("create audio context");const n=function(r){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?lP(Object(s),!0).forEach(function(l){N(r,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):lP(Object(s)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(s,l))})}return r}({},ie("WEBAUDIO_INIT_OPTIONS"));U.debug("audio context init option:",JSON.stringify(n)),Lo=new uP(n),Gt.curState=Lo.state,Lo.onstatechange=()=>{Gt.prevState=Gt.curState,Gt.curState=Lo?Lo.state:void 0;const{prevState:r,curState:i}=Gt,s=i==="running",l=i==="interrupted",d=r==="running",p=r==="suspended",v=r==="interrupted",E=Ht().osVersion;(Ci()||Ps())&&d&&l&&(U.info("ios".concat(E,"-interruption-start")),Gt.emit(yr.IOS_INTERRUPTION_START)),(Ci()||Ps())&&(p||v)&&s&&(U.info("ios".concat(E,"-interruption-end")),Gt.emit(yr.IOS_INTERRUPTION_END)),r!==i&&(U.debug("AudioContext State Change","".concat(r,"=>").concat(i)),Gt.emit(yr.STATE_CHANGE))},setInterval(()=>{var r;const i=(r=Lo)===null||r===void 0?void 0:r.currentTime;Gt.currentTime!==i?(Gt.currentTimeStuckAt&&(U.debug("AudioContext current time resume at ".concat(i)),Gt.currentTimeStuckAt=void 0),Gt.currentTime=i):(i!==Gt.currentTimeStuckAt&&(Ue.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:i},tag:bn.TRACER}).onSuccess(),U.warning("AudioContext current time stuck at ".concat(i))),Gt.currentTimeStuckAt=i)},5e3),async function(r){const i=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let s,l=!1,d=!1,p=!1;function v(X){r.state==="running"?E(!1):Ci()||Ps()?r.state==="suspended"&&(E(!0),X&&r.resume().then(C,C)):r.state!=="closed"&&(E(!0),X&&r.resume().then(C,C))}function E(X){if(l!==X){l=X;for(let le=0,he=i;le<he.length;le+=1){const ye=he[le];X?window.addEventListener(ye,R,{capture:!0,passive:!0}):window.removeEventListener(ye,R,{capture:!0,passive:!0})}}}function T(){v(!0)}function C(){v(!1)}function R(){v(!0)}function L(X){if(!p)if(s.paused)if(X){j(!1),p=!0;let le;try{le=s.play(),le?le.then(Y,Y):(s.addEventListener("playing",Y),s.addEventListener("abort",Y),s.addEventListener("error",Y))}catch{Y()}}else j(!0);else j(!1)}function j(X){if(d!==X){d=X;for(let le=0,he=i;le<he.length;le++){const ye=he[le];X?window.addEventListener(ye,q,{capture:!0,passive:!0}):window.removeEventListener(ye,q,{capture:!0,passive:!0})}}}function Y(){s.removeEventListener("playing",Y),s.removeEventListener("abort",Y),s.removeEventListener("error",Y),p=!1,L(!1)}function q(){L(!0)}if(Ci()){const X=r.createMediaStreamDestination(),le=document.createElement("div");le.innerHTML="<audio x-webkit-airplay='deny'></audio>",s=le.children.item(0),s.controls=!1,s.disableRemotePlayback=!0,s.preload="auto",s.srcObject=X.stream,L(!0)}Gt.on(yr.STATE_CHANGE,T),v(!1)}(Lo)}function Id(){if(!Lo){if(DY(),!Lo)throw new Q(W.NOT_SUPPORTED,"can not create audio context");return Lo}return Lo}function dP(){return!!Lo}function su(n){if(function(){if(Vy!==null)return Vy;const s=Id(),l=s.createBufferSource(),d=s.createGain(),p=s.createGain();l.connect(d),l.connect(p),l.disconnect(d);let v=!1;try{l.disconnect(d)}catch{v=!0}return l.disconnect(),Vy=v,v}())return;const r=n.connect,i=n.disconnect;n.connect=(s,l,d)=>(n._inputNodes||(n._inputNodes=[]),n._inputNodes.includes(s)||(s instanceof AudioNode?(n._inputNodes.push(s),r.call(n,s,l,d)):r.call(n,s,l)),n),n.disconnect=(s,l,d)=>{i.call(n),s?Yy(n._inputNodes,s):n._inputNodes=[];for(const p of n._inputNodes)r.call(n,p)}}let Vy=null;function hP(n,r){let i=!1;const s=1/r;if(ie("DISABLE_WEBAUDIO")){const l=window.setInterval(()=>{i?window.clearInterval(l):n(performance.now()/1e3)},1e3*s)}else{const l=Id();let d=l.createGain();d.gain.value=0,d.connect(l.destination);const p=()=>{if(i)return void(d=null);const v=l.createOscillator();v.onended=p,v.connect(d),v.start(0),v.stop(l.currentTime+s),n(l.currentTime)};p()}return()=>{i=!0}}class pP{constructor(){N(this,"context",void 0),N(this,"analyserNode",void 0),N(this,"sourceNode",void 0),this.context=Id(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(r){if(r!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch{}this.sourceNode=r,r==null||r.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||Ci()||Ps()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode))return 0;const r=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(r);else{const s=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(s);for(let l=0;l<r.length;++l)r[l]=s[l]/128-1}const i=Gc(r).call(r,(s,l)=>s+l*l,0)/r.length;return Math.max(10*Math.log10(i)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var r,i;(r=this.sourceNode)===null||r===void 0||r.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,(i=this.sourceNode)===null||i===void 0||i.connect(this.analyserNode)}catch{U.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class fP extends In{get processSourceNode(){return this.sourceNode}set processedNode(r){var i;if(!this.isDestroyed&&this._processedNode!==r){try{var s;(s=this.sourceNode)===null||s===void 0||s.disconnect(this.outputNode)}catch{}(i=this._processedNode)===null||i===void 0||i.disconnect(),this._processedNode=r,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),N(this,"outputNode",void 0),N(this,"outputTrack",void 0),N(this,"isPlayed",!1),N(this,"sourceNode",void 0),N(this,"context",void 0),N(this,"audioBufferNode",void 0),N(this,"destNode",void 0),N(this,"audioOutputLevel",0),N(this,"volumeLevelAnalyser",void 0),N(this,"_processedNode",void 0),N(this,"playNode",void 0),N(this,"isDestroyed",!1),N(this,"onNoAudioInput",void 0),N(this,"isNoAudioInput",!1),N(this,"_noAudioInputCount",0),this.context=Id(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),su(this.outputNode),this.volumeLevelAnalyser=new pP}startGetAudioBuffer(r){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(r),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=i=>{this.emit(Zi.ON_AUDIO_BUFFER,function(s){for(let l=0;l<s.outputBuffer.numberOfChannels;l+=1){const d=s.outputBuffer.getChannelData(l);for(let p=0;p<d.length;p+=1)d[p]=0}return s.inputBuffer}(i))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!zn().webAudioMediaStreamDest)throw new Q(W.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(r){this.context.state!=="running"&&is(()=>{Gt.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=r||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(r>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;Ci()||Ps()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume();const i=this.volumeLevelAnalyser.getAnalyserNode();let s;i.getFloatTimeDomainData?(s=new Float32Array(i.fftSize),i.getFloatTimeDomainData(s)):(s=new Uint8Array(i.fftSize),i.getByteTimeDomainData(s));let l=!1;for(let d=0;d<s.length;d++)s[d]!==0&&(l=!0);return l?(this.isNoAudioInput=!1,!0):(await ti(200),await this.checkHasAudioInput(r?r+1:1)&&l)}getAudioVolume(){return this.outputNode.gain.value}setVolume(r){this.outputNode.gain.setValueAtTime(r,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var r,i;(r=this.processedNode)===null||r===void 0||r.disconnect(),(i=this.sourceNode)===null||i===void 0||i.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var r;this.processedNode?(r=this.processedNode)===null||r===void 0||r.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class jy extends fP{get isFreeze(){return!1}constructor(r,i,s){var l;if(super(),N(this,"sourceNode",void 0),N(this,"track",void 0),N(this,"clonedTrack",void 0),N(this,"audioElement",void 0),N(this,"isCurrentTrackCloned",!1),N(this,"isRemoteTrack",!1),N(this,"originVolumeLevelAnalyser",void 0),N(this,"rebuildWebAudio",async()=>{if(U.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void U.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>U.info("resume success")),U.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const v=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?v.stop():this.isCurrentTrackCloned=!0;const E=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(E),su(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const T=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(T,this.context.currentTime),su(this.outputNode),this.emit(Zi.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=E,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),r.kind!=="audio")throw new Q(W.UNEXPECTED_ERROR);this.track=r;const d=new MediaStream([this.track]);if(this.isRemoteTrack=!!i,this.sourceNode=this.context.createMediaStreamSource(d),su(this.sourceNode),s){const v=s.clone();v.enabled=!0,this.clonedTrack=v,U.debug("create an unmuted track ".concat(v.id," from the original track ").concat(s.id," to get the volume"));const E=this.context.createMediaStreamSource(new MediaStream([v]));su(E),this.originVolumeLevelAnalyser=new pP,this.originVolumeLevelAnalyser.updateSource(E)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=d;const p=Ht();i&&p.os===Yr.IOS&&Number((l=p.osVersion)===null||l===void 0?void 0:l.split(".")[0])<15&&(Gt.on(yr.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(v=>{v||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(r){this.sourceNode.disconnect(),this.track=r,this.isCurrentTrackCloned=!1;const i=new MediaStream([r]);this.sourceNode=this.context.createMediaStreamSource(i),su(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(Zi.UPDATE_SOURCE),this.audioElement.srcObject=i}destroy(){var r;this.audioElement.srcObject=null,this.audioElement.remove(),Gt.off("state-change",this.rebuildWebAudio),(r=this.originVolumeLevelAnalyser)===null||r===void 0||r.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(r){return this.context.createMediaStreamSource(new MediaStream([r]))}updateOriginTrack(r){const i=r.clone();i.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=i),U.debug("create an unmuted track ".concat(i.id," from the original track ").concat(r.id," to get the volume"));const s=this.context.createMediaStreamSource(new MediaStream([i]));su(s),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(s)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function mP(n,r){const i=(l,d)=>l?typeof l!="number"?l.max||l.exact||l.ideal||l.min||d:l:d,s={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxHeight:i(r.height,1080),maxWidth:i(r.width,1920)}}};return r.frameRate&&typeof r.frameRate!="number"?(s.video.mandatory.maxFrameRate=r.frameRate.max,s.video.mandatory.minFrameRate=r.frameRate.min):typeof r.frameRate=="number"&&(s.video.mandatory.maxFrameRate=r.frameRate),await navigator.mediaDevices.getUserMedia(s)}async function kY(n){const r=await gP(n.mediaSource),i=await function(s){return new Pe((l,d)=>{const p=document.createElement("div");p.innerText="share screen",p.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const v=document.createElement("div");v.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const E=document.createElement("div");E.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",E.setAttribute("style","height: 12%;");const T=document.createElement("div");T.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const C=document.createElement("div");C.setAttribute("style","text-align: right; padding: 16px 0;");const R=document.createElement("button");R.innerHTML="cancel",R.setAttribute("style","width: 85px;"),R.onclick=()=>{document.body.removeChild(L);const j=new Error("NotAllowedError");j.name="NotAllowedError",d(j)},C.appendChild(R),v.appendChild(E),v.appendChild(T),v.appendChild(C);const L=document.createElement("div");L.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),L.appendChild(p),L.appendChild(v),document.body.appendChild(L),s.map(j=>{if(j.id){const Y=document.createElement("div");Y.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let q=j.thumbnail;const{width:X}=q.getSize();X>1920&&(q=q.resize({width:1920})),Y.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+q.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+(j.name.replace(/[\u00A0-\u9999<>\&]/g,function(le){return"&#"+le.charCodeAt(0)+";"})+"</span>"),Y.onclick=()=>{document.body.removeChild(L),l(j.id)},T.appendChild(Y)}})})}(r);return await mP(i,n)}async function gP(n){let r=["window","screen"];n!=="application"&&n!=="window"||(r=["window"]),n==="screen"&&(r=["screen"]);const i=vP();if(!i)throw new Q(W.ELECTRON_IS_NULL);let s=null;try{var l;s=((l=i.desktopCapturer)===null||l===void 0?void 0:l.getSources({types:r}))||i.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:r})}catch{s=null}s&&s.then||(s=new Pe((d,p)=>{i.desktopCapturer.getSources({types:r},(v,E)=>{v?p(v):d(E)})}));try{return await s}catch(d){throw new Q(W.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,d.toString())}}let U0=null;function vP(){if(U0)return U0;try{return U0=window.require("electron"),U0}catch{return null}}function EP(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}const By=new Ri("safari");let _P=!1,SP=!1;async function Oa(n,r){let i=0,s=null;for(;i<2;)try{s=await LY(n,r,i>0);break}catch(l){if(l instanceof Q)throw U.error("[".concat(r,"] ").concat(l.toString())),l;const d=F0(l.name||l.code||l,l.message);if(d.code===W.MEDIA_OPTION_INVALID){U.debug("[".concat(r,"] detect media option invalid, retry")),i+=1,await ti(500);continue}throw U.error("[".concat(r,"] ").concat(d.toString())),d}if(!s)throw new Q(W.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return s}async function LY(n,r,i){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Q(W.NOT_SUPPORTED,"can not find getUserMedia");i&&(n.video&&(delete n.video.width,delete n.video.height),n.screen&&(delete n.screen.width,delete n.screen.height));const s=zn(),l=new MediaStream;if(n.audioSource&&l.addTrack(n.audioSource),n.videoSource&&l.addTrack(n.videoSource),!n.audio&&!n.video&&!n.screen)return U.debug("Using Video Source/ Audio Source"),l;if(n.screen)if(vP())n.screen.sourceId?wd(l,await mP(n.screen.sourceId,n.screen)):wd(l,await kY(n.screen));else if(HS()&&n.screen.extensionId&&n.screen.mandatory){if(!s.getStreamFromExtension)throw new Q(W.NOT_SUPPORTED,"This browser does not support screen sharing");U.debug("[".concat(r,'] Screen access on chrome stable, looking for extension"'));const L=await(p=n.screen.extensionId,v=r,new Pe((j,Y)=>{try{chrome.runtime.sendMessage(p,{getStream:!0},q=>{if(!q||!q.streamId)return U.error("[".concat(v,"] No response from Chrome Plugin. Plugin not installed properly"),q),void Y(new Q(W.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));j(q.streamId)})}catch(q){U.error("[".concat(v,"] AgoraRTC screensharing plugin is not accessible(").concat(p,")"),q.toString()),Y(new Q(W.CHROME_PLUGIN_NOT_INSTALL))}}));n.screen.mandatory.chromeMediaSourceId=L,wd(l,await navigator.mediaDevices.getUserMedia({video:{mandatory:n.screen.mandatory}}))}else if(s.getDisplayMedia){var d;n.screen.mediaSource&&Hx(n.screen.mediaSource);const L={width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate,displaySurface:(d=n.screen.displaySurface)!==null&&d!==void 0?d:n.screen.mediaSource==="screen"?"monitor":n.screen.mediaSource},{selfBrowserSurface:j,surfaceSwitching:Y,systemAudio:q}=n.screen,X={selfBrowserSurface:j,surfaceSwitching:Y,systemAudio:q};!j&&delete X.selfBrowserSurface,!Y&&delete X.surfaceSwitching,!q&&delete X.systemAudio,U.debug("[".concat(r,"] getDisplayMedia:"),JSON.stringify({video:L,audio:!!n.screenAudio,controls:X})),wd(l,await navigator.mediaDevices.getDisplayMedia(function(le){for(var he=1;he<arguments.length;he++){var ye=arguments[he]!=null?arguments[he]:{};he%2?EP(Object(ye),!0).forEach(function(ke){N(le,ke,ye[ke])}):Object.getOwnPropertyDescriptors?Object.defineProperties(le,Object.getOwnPropertyDescriptors(ye)):EP(Object(ye)).forEach(function(ke){Object.defineProperty(le,ke,Object.getOwnPropertyDescriptor(ye,ke))})}return le}({video:L,audio:!!n.screenAudio},X)))}else{if(!Dn())throw U.error("[".concat(r,"] This browser does not support screenSharing")),new Q(W.NOT_SUPPORTED,"This browser does not support screen sharing");{n.screen.mediaSource&&Hx(n.screen.mediaSource);const L={video:{mediaSource:n.screen.mediaSource,width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate}};U.debug("[".concat(r,"] getUserMedia: ").concat(JSON.stringify(L))),wd(l,await navigator.mediaDevices.getUserMedia(L))}}var p,v;if(!n.video&&!n.audio)return l;let E={video:n.video,audio:n.audio},T=ie("MEDIA_DEVICE_CONSTRAINTS");if(T)try{typeof T=="string"&&(T=JSON.parse(T)),E=function L(j,Y){if(!TD(j)||!TD(Y)||Array.isArray(j)&&!Array.isArray(Y)||!Array.isArray(j)&&Array.isArray(Y))return Y;if(Array.isArray(Y)&&Array.isArray(j)){const q=[...j];for(let X=0;X<Y.length;X++)q[X]=L(j[X],Y[X]);return q}{const q=lu({},j);for(const X in Y)Object.prototype.hasOwnProperty.call(Y,X)&&(Object.prototype.hasOwnProperty.call(j,X)?q[X]=L(j[X],Y[X]):q[X]=Y[X]);return q}}(E,T)}catch{}U.debug("[".concat(r,"] GetUserMedia"),JSON.stringify(E)),Ht();let C,R=null;(yi()||Ci()||_0())&&(R=await By.lock());try{C=await navigator.mediaDevices.getUserMedia(E)}catch(L){throw R&&R(),L}return E.audio&&(_P=!0),E.video&&(SP=!0),wd(l,C),R&&R(),l}function F0(n,r){switch(n){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new Q(W.MEDIA_OPTION_INVALID,"".concat(n,": ").concat(r));case"NotFoundError":case"DevicesNotFoundError":return new Q(W.DEVICE_NOT_FOUND,"".concat(n,": ").concat(r));case"NotSupportedError":return new Q(W.NOT_SUPPORTED,"".concat(n,": ").concat(r));case"NotReadableError":return new Q(W.NOT_READABLE,"".concat(n,": ").concat(r));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new Q(W.PERMISSION_DENIED,"".concat(n,": ").concat(r));case"ConstraintNotSatisfiedError":return new Q(W.CONSTRAINT_NOT_SATISFIED,"".concat(n,": ").concat(r));default:return U.error("getUserMedia unexpected error",n),new Q(W.UNEXPECTED_ERROR,"".concat(n,": ").concat(r))}}function wd(n,r){const i=n.getVideoTracks()[0],s=n.getAudioTracks()[0],l=r.getVideoTracks()[0],d=r.getAudioTracks()[0];d&&(s&&n.removeTrack(s),n.addTrack(d)),l&&(i&&n.removeTrack(i),n.addTrack(l))}const Mo=new class extends In{get state(){return this._state}set state(n){n!==this._state&&(this.emit(cc.STATE_CHANGE,n),this._state=n)}constructor(){super(),N(this,"_state",ou.IDLE),N(this,"isAccessMicrophonePermission",!1),N(this,"isAccessCameraPermission",!1),N(this,"lastAccessMicrophonePermission",!1),N(this,"lastAccessCameraPermission",!1),N(this,"checkdeviceMatched",!1),N(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(ie("ENUMERATE_DEVICES_INTERVAL")||(S0()||xN()===Yr.HARMONY_OS)&&Zl())&&this.updateDevicesInfo()},ie("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(n=>U.error(n.toString()))}async enumerateDevices(n,r){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new Q(W.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const s=await navigator.mediaDevices.enumerateDevices(),l=this.checkMediaDeviceInfoIsOk(s);let d=!this.isAccessMicrophonePermission&&n,p=!this.isAccessCameraPermission&&r;l.audio&&(d=!1),l.video&&(p=!1);let v=null,E=null,T=null;if(!i&&(d||p)){if(By.isLocked&&(U.debug("[device manager] wait GUM lock"),(await By.lock())(),U.debug("[device manager] GUM unlock")),_P&&(d=!1,this.isAccessMicrophonePermission=!0),SP&&(p=!1,this.isAccessCameraPermission=!0),U.debug("[device manager] check media device permissions",n,r,d,p),d&&p){try{T=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(C){const R=F0(C.name||C.code||C,C.message);if(R.code===W.PERMISSION_DENIED)throw R;U.warning("getUserMedia failed in getDevices",R)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(d){try{v=await navigator.mediaDevices.getUserMedia({audio:n})}catch(C){const R=F0(C.name||C.code||C,C.message);if(R.code===W.PERMISSION_DENIED)throw R;U.warning("getUserMedia failed in getDevices",R)}this.isAccessMicrophonePermission=!0}else if(p){try{E=await navigator.mediaDevices.getUserMedia({video:r})}catch(C){const R=F0(C.name||C.code||C,C.message);if(R.code===W.PERMISSION_DENIED)throw R;U.warning("getUserMedia failed in getDevices",R)}this.isAccessCameraPermission=!0}U.debug("[device manager] mic permission",n,"cam permission",r)}try{const C=await navigator.mediaDevices.enumerateDevices();return v&&v.getTracks().forEach(R=>R.stop()),E&&E.getTracks().forEach(R=>R.stop()),T&&T.getTracks().forEach(R=>R.stop()),v=null,E=null,T=null,C}catch(C){return v&&v.getTracks().forEach(R=>R.stop()),E&&E.getTracks().forEach(R=>R.stop()),T&&T.getTracks().forEach(R=>R.stop()),v=null,E=null,T=null,new Q(W.ENUMERATE_DEVICES_FAILED,C.toString()).throw()}}async getRecordingDevices(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,n)).filter(r=>r.kind==="audioinput")}async getCamerasDevices(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,n)).filter(r=>r.kind==="videoinput")}async getSpeakers(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,n)).filter(r=>r.kind==="audiooutput")}searchDeviceIdByName(n){let r=null;return this.deviceInfoMap.forEach(i=>{i.device.label===n&&(r=i.device.deviceId)}),r}async getDeviceById(n){const r=(await this.enumerateDevices(!0,!0,!0)).find(i=>i.deviceId===n);if(!r)throw new Q(W.DEVICE_NOT_FOUND,"deviceId: ".concat(n));return r}async init(){this.state=ou.INITING;try{await this.updateDevicesInfo(),this.state=ou.INITEND}catch(n){throw U.warning("Device Detection functionality cannot start properly.",n.toString()),this.state=ou.IDLE,!function(){return typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1"}()&&new Q(W.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),n}}async updateDevicesInfo(){const n=await this.enumerateDevices(!0,!0,!0),r=Date.now(),i=[];if(n[0]&&n[0].label&&this.checkdeviceMatched===!1){this.checkdeviceMatched=!0;const l=n.find(p=>p.kind==="audioinput"&&p.deviceId==="default"),d=n.find(p=>p.kind==="audiooutput"&&p.deviceId==="default");l&&d?d.groupId===l.groupId?U.debug("[device-check] default input ".concat(l.label," and output ").concat(d.label," is the same group")):U.warning("[device-check] default input ".concat(l.label," and output ").concat(d.label," is not the same group")):U.debug("[device-check] default input or output not found")}const s=this.checkMediaDeviceInfoIsOk(n);if(n.forEach(l=>{if(!l.deviceId)return;const d=this.deviceInfoMap.get("".concat(l.kind,"_").concat(l.deviceId));if((d?d.state:"INACTIVE")!=="ACTIVE"){const p={initAt:r,updateAt:r,device:l,state:"ACTIVE"};this.deviceInfoMap.set("".concat(l.kind,"_").concat(l.deviceId),p),i.push(p)}d&&(d.updateAt=r)}),this.deviceInfoMap.forEach((l,d)=>{l.state==="ACTIVE"&&l.updateAt!==r&&(l.state="INACTIVE",i.push(l))}),this.state!==ou.INITEND)return s.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(s.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));i.forEach(l=>{switch(l.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(cc.RECORDING_DEVICE_CHANGED,l);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(cc.CAMERA_DEVICE_CHANGED,l);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(cc.PLAYOUT_DEVICE_CHANGED,l)}}),s.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),s.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(n){const r=n.filter(l=>l.kind==="audioinput"),i=n.filter(l=>l.kind==="videoinput"),s={audio:!1,video:!1};for(const l of r)if(l.label&&l.deviceId){s.audio=!0;break}for(const l of i)if(l.label&&l.deviceId){s.video=!0;break}return s}},MY=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],vo=new class{constructor(){N(this,"onAutoplayFailed",void 0),N(this,"elementMap",new Map),N(this,"elementStateMap",new Map),N(this,"elementsNeedToResume",[]),N(this,"sinkIdMap",new Map),N(this,"autoResumeAfterInterruption",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[r,i]=n;const s=this.elementStateMap.get(r),l=i.srcObject.getAudioTracks()[0];hd()?l&&l.readyState==="live"&&Gt.curState==="running"&&(U.debug("auto resume after interruption for iOS 15"),i.pause(),i.play()):s&&s==="paused"&&l&&l.readyState==="live"&&Gt.curState==="running"&&(U.debug("auto resume after interruption for iOS"),i.play())})}),N(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[r,i]=n;const s=i.srcObject.getAudioTracks()[0];s&&s.readyState==="live"&&(U.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),i.pause(),i.play())})}),this.autoResumeAudioElement(),Gt.on(yr.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Gt.on(yr.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),Gt.on(yr.STATE_CHANGE,()=>{Ci()&&Gt.prevState==="suspended"&&Gt.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(n,r){const i=this.elementMap.get(n);if(this.sinkIdMap.set(n,r),i)try{await i.setSinkId(r)}catch(s){throw new Q(W.PERMISSION_DENIED,"can not set sink id: "+s.toString())}}play(n,r,i,s){if(this.elementMap.has(r))return;const l=document.createElement("audio");l.autoplay=!0,l.srcObject=new MediaStream([n]),this.bindAudioElementEvents(r,l),this.elementMap.set(r,l),this.elementStateMap.set(r,Xr.INIT),this.setVolume(r,i);const d=this.sinkIdMap.get(r);if(d)try{l.setSinkId(d).catch(v=>{U.warning("[".concat(r,"] set sink id failed"),v.toString())})}catch(v){U.warning("[".concat(r,"] set sink id failed"),v.toString())}const p=l.play();p&&p.then&&p.catch(v=>{s&&Ue.autoplayFailed(s,"audio",v.message,r),U.warning("audio element play warning",v.toString()),this.elementMap.has(r)&&v.name==="NotAllowedError"&&(U.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(l),is(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),oP()}))})}updateTrack(n,r){const i=this.elementMap.get(n);i&&(i.srcObject=new MediaStream([r]))}isPlaying(n){return this.elementMap.has(n)&&this.elementStateMap.get(n)==="playing"}setVolume(n,r){const i=this.elementMap.get(n);i&&(r=Math.max(0,Math.min(100,r)),i.volume=r/100)}stop(n){const r=this.elementMap.get(n);if(this.sinkIdMap.delete(n),!r)return;const i=this.elementsNeedToResume.indexOf(r);this.elementsNeedToResume.splice(i,1),r.srcObject=null,r.remove(),this.elementMap.delete(n),this.elementStateMap.delete(n)}bindAudioElementEvents(n,r){MY.forEach(i=>{r.addEventListener(i,s=>{const l=this.elementStateMap.get(n),d=s.type==="pause"?"paused":s.type;if(U.debug("[".concat(n,"] audio-element-status change ").concat(l," => ").concat(d)),s.type==="error"){const p=r==null?void 0:r.error;p&&U.error("[".concat(n,"] media error, code: ").concat(p.code,", message: ").concat(p.message))}this.elementStateMap.set(n,d)})})}getPlayerState(n){return this.elementStateMap.get(n)||"uninit"}autoResumeAudioElement(){const n=()=>{this.elementsNeedToResume.forEach(r=>{r.play().then(i=>{U.debug("Auto resume audio element success")}).catch(i=>{U.warning("Auto resume audio element failed!",i)})}),this.elementsNeedToResume=[]};new Pe(r=>{document.body?r():window.addEventListener("load",()=>r())}).then(()=>{bp()?document.body.addEventListener("click",n,!0):(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0))})}};function Ln(){return function(n,r,i){const s=i.value;return typeof s=="function"&&(i.value=function(){this._isClosed&&new Q(W.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var l=arguments.length,d=new Array(l),p=0;p<l;p++)d[p]=arguments[p];const v=s.apply(this,d);return v instanceof Pe?new Pe((E,T)=>{v.then(E).catch(T)}):v}),i}}var UY=Wc("Array").values,FY=zc,VY=Jn,jY=b,BY=UY,$y=Array.prototype,$Y={DOMTokenList:!0,NodeList:!0},ks=function(n){var r=n.values;return n===$y||jY($y,n)&&r===$y.values||VY($Y,FY(n))?BY:r};function yP(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function V0(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?yP(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):yP(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class CP extends In{constructor(r){super(),N(this,"name","VideoProcessorDestination"),N(this,"ID","0"),N(this,"_source",void 0),N(this,"videoContext",void 0),N(this,"inputTrack",void 0),this.videoContext=r}get kind(){return"video"}get enabled(){return!0}pipe(){throw new Q(W.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new Q(W.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(r){if(r.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);r.track&&r.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=r.track,this.emit(Zr.ON_TRACK,r.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(Zr.ON_TRACK,void 0)}}class bP extends In{set chained(r){this._chained=r}get chained(){return this._chained}constructor(r,i){super(),N(this,"constraintsMap",new Map),N(this,"statsRegistry",[]),N(this,"usageRegistry",[]),N(this,"trackId",void 0),N(this,"direction",void 0),N(this,"_chained",!1),this.trackId=r,this.direction=i}async getConstraints(){return await ni(this,eo.REQUEST_CONSTRAINTS)}async requestApplyConstraints(r,i){var s;return U.info("processor ".concat(i.name," requestApplyConstraints for ").concat(this.trackId)),r&&this.constraintsMap.set(i,r),Mn(this,eo.REQUEST_UPDATE_CONSTRAINTS,Array.from(ks(s=this.constraintsMap).call(s)))}async requestRevertConstraints(r){var i;if(this.constraintsMap.has(r))return U.info("processor ".concat(r.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(r),Mn(this,eo.REQUEST_UPDATE_CONSTRAINTS,Array.from(ks(i=this.constraintsMap).call(i)))}registerStats(r,i,s){this.statsRegistry.find(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===i)||this.statsRegistry.push({processorName:r.name,processorID:r.ID,type:i,cb:s})}unregisterStats(r,i){const s=this.statsRegistry.findIndex(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===i);s!==-1&&this.statsRegistry.splice(s,1)}gatherStats(){const r=[];for(const{processorID:i,processorName:s,type:l,cb:d}of this.statsRegistry)try{const p=d();r.push({processorID:i,processorName:s,type:l,stats:p})}catch(p){U.error(new Q(W.UNEXPECTED_ERROR,p.message))}return r}registerUsage(r,i){this.usageRegistry.find(s=>s.processorID===r.ID&&s.processorName===r.name)||this.usageRegistry.push({processorID:r.ID,processorName:r.name,cb:i})}unregisterUsage(r){const i=this.usageRegistry.findIndex(s=>s.processorID===r.ID&&s.processorName===r.name);i!==-1&&this.usageRegistry.splice(i,1)}async gatherUsage(){const r=[];if(!this.chained)return[];for(const{cb:i}of this.usageRegistry)try{let s=i();s instanceof Pe&&(s=await s),r.push(V0(V0({},s),{},{direction:this.direction}))}catch(s){U.error("gather extension usage error",s)}return r}getDirection(){return this.direction}}class TP extends In{constructor(r){super(),N(this,"name","AudioProcessorDestination"),N(this,"ID","0"),N(this,"inputTrack",void 0),N(this,"inputNode",void 0),N(this,"audioProcessorContext",void 0),N(this,"_source",void 0),this.audioProcessorContext=r}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new Q(W.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new Q(W.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(Zr.ON_TRACK,void 0),this.emit(Zr.ON_NODE,void 0)}updateInput(r){if(r.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);r.track&&this.inputTrack!==r.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=r.track,this.emit(Zr.ON_TRACK,this.inputTrack)),r.node&&this.inputNode!==r.node&&(this.audioProcessorContext.chained=!0,this.inputNode=r.node,this.emit(Zr.ON_NODE,this.inputNode))}}class RP extends In{set chained(r){this._chained=r}get chained(){return this._chained}constructor(r,i,s){super(),N(this,"constraintsMap",new Map),N(this,"statsRegistry",[]),N(this,"audioContext",void 0),N(this,"trackId",void 0),N(this,"direction",void 0),N(this,"usageRegistry",[]),N(this,"_chained",!1),this.audioContext=r,this.trackId=i,this.direction=s}async getConstraints(){return ni(this,eo.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(r,i){var s;return U.info("processor ".concat(i.name," requestApplyConstraints for ").concat(this.trackId)),r&&this.constraintsMap.set(i,r),Mn(this,eo.REQUEST_UPDATE_CONSTRAINTS,Array.from(ks(s=this.constraintsMap).call(s)))}async requestRevertConstraints(r){var i;if(this.constraintsMap.has(r))return this.constraintsMap.delete(r),Mn(this,eo.REQUEST_UPDATE_CONSTRAINTS,Array.from(ks(i=this.constraintsMap).call(i)))}registerStats(r,i,s){this.statsRegistry.find(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===i)||this.statsRegistry.push({processorName:r.name,processorID:r.ID,type:i,cb:s})}unregisterStats(r,i){const s=this.statsRegistry.findIndex(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===i);s!==-1&&this.statsRegistry.splice(s,1)}gatherStats(){const r=[];for(const{processorID:i,processorName:s,type:l,cb:d}of this.statsRegistry)try{const p=d();r.push({processorID:i,processorName:s,type:l,stats:p})}catch(p){U.error(new Q(W.UNEXPECTED_ERROR,p.message))}return r}registerUsage(r,i){this.usageRegistry.find(s=>s.processorID===r.ID&&s.processorName===r.name)||this.usageRegistry.push({processorID:r.ID,processorName:r.name,cb:i})}unregisterUsage(r){const i=this.usageRegistry.findIndex(s=>s.processorID===r.ID&&s.processorName===r.name);i!==-1&&this.usageRegistry.splice(i,1)}async gatherUsage(){const r=[];if(!this.chained)return[];for(const{cb:i}of this.usageRegistry)try{let s=i();s instanceof Pe&&(s=await s),r.push(V0(V0({},s),{},{direction:this.direction}))}catch(s){U.error("gather extension usage error",s)}return r}getDirection(){return this.direction}}class Hy extends In{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),N(this,"context",void 0),N(this,"processSourceNode",void 0),N(this,"outputTrack",void 0),N(this,"processedNode",void 0),N(this,"clonedTrack",void 0),N(this,"outputNode",void 0),this.outputNode=new HY}setVolume(){}createOutputTrack(){throw new Q(W.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class HY{disconnect(){}connect(){}}let j0,Od=null;class WY{constructor(){N(this,"state","open"),N(this,"trigger",void 0),N(this,"tasks",[]),U.debug("[macro-task-queue] is created."),this.trigger=setTimeout(()=>{this.state="closed",U.debug("[macro-task-queue] will be closed, all remaining tasks will execute. [".concat(this.tasks.map(r=>r.key),"]")),this.trigger=void 0,this.tasks.forEach(r=>{let{func:i}=r;return i()}),this.tasks.length=0,U.debug("[macro-task-queue] is closed.")})}enqueue(r,i){this.state!=="closed"&&(this.tasks.push({key:r,func:i}),U.debug("[macro-task-queue] is queued, current queue ".concat(this.tasks.length,". ").concat(typeof r=="string"?r:"")))}runTask(r){if(this.state==="closed")return;const i=this.tasks.findIndex(s=>s.key===r);if(i!==-1){const s=this.tasks.splice(i,1);U.debug("[macro-task-queue] is unqueued, current queue ".concat(this.tasks.length,". ").concat(typeof r=="string"?r:"")),s[0].func()}}release(){this.trigger&&(this.state="closed",clearTimeout(this.trigger),this.trigger=void 0,this.tasks.length=0,U.debug("[macro-task-queue] is closed."))}}function Wy(n){return function(r,i,s){var l;const d=(l=s.value)!==null&&l!==void 0?l:s.get,p=function(){Od&&Od.state==="open"&&Od.runTask(n);for(var v=arguments.length,E=new Array(v),T=0;T<v;T++)E[T]=arguments[T];return d==null?void 0:d.apply(this,...E)};return s.value?s.value=p:s.get=p,s}}var IP,wP,OP,AP,NP,xP,PP,DP,kP,LP,MP,UP,FP,VP,jP,BP,$P,HP,WP,GP,zP,zt,KP,YP,qP,XP,JP,QP,Ls,ZP,eD,tD,nD,rD,iD,oD,aD,sD,cD,lD,uD,hi;function dD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function Gy(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?dD(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):dD(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}(function(n){n.UPDATE_TRACK_SOURCE="update-track-source"})(j0||(j0={}));let ei=(IP=Wy("INIT_WEBAUDIO"),wP=Wy("INIT_WEBAUDIO"),OP=Wy("INIT_WEBAUDIO"),AP=ze({argsMap:(n,r)=>[n.getTrackId(),r],throttleTime:300}),NP=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),xP=Ln(),PP=Rd("LocalAudioTrack","_enabledMutex"),DP=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),kP=Ln(),LP=Rd("LocalAudioTrack","_enabledMutex"),MP=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),UP=Ln(),FP=Ln(),VP=Ln(),jP=ze({argsMap:n=>[n.getTrackId()]}),BP=Ln(),$P=ze({argsMap:n=>[n.getTrackId()]}),HP=Ln(),WP=ze({argsMap:n=>[n.getTrackId()]}),GP=ze({argsMap:(n,r)=>[n.getTrackId(),r.name]}),zP=ze({argsMap:n=>[n.getTrackId()]}),_e((zt=class extends Fy{get _source(){return this._trackSource}set _source(n){this._trackSource=n}get processorContext(){return this._processorContext}set processorContext(n){this._processorContext=n}get processorDestination(){return this._processorDestination}set processorDestination(n){this._processorDestination=n}get isPlaying(){return this._useAudioElement?vo.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(n,r,i,s,l){super(n,i),N(this,"trackMediaType","audio"),N(this,"_encoderConfig",void 0),N(this,"_trackSource",void 0),N(this,"_enabled",!0),N(this,"_volume",100),N(this,"_useAudioElement",!1),N(this,"_bypassWebAudio",!1),N(this,"processor",void 0),N(this,"_processorContext",void 0),N(this,"_processorDestination",void 0),N(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=r,this._getOriginVolumeLevel=!!s;const d=()=>{this.processorContext=new RP(this._source.context,this.getTrackId(),"local"),this.processorDestination=new TP(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(Zi.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})},p=l&&yi()&&!dP();ie("DISABLE_WEBAUDIO")?(this._source=new Hy,this._useAudioElement=!0,this._bypassWebAudio=!0):p?this._source=new Hy:(this._source=new jy(n,!1,this._getOriginVolumeLevel?n:void 0),ie("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0)),d(),!ie("DISABLE_WEBAUDIO")&&p&&(Od||(Od=new WY),Od).enqueue("INIT_WEBAUDIO",()=>{this._source=new jy(n,!1,this._getOriginVolumeLevel?n:void 0),ie("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0),d(),this.emit(j0.UPDATE_TRACK_SOURCE)})}setVolume(n){sn(n,"volume",0,1e3),this._volume=n,this._source.setVolume(n/100),this._useAudioElement&&vo.setVolume(this.getTrackId(),n);try{if(this._bypassWebAudio)return void U.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const r=this._source.createOutputTrack();this._mediaStreamTrack!==r&&(this._mediaStreamTrack=r,Mn(this,et.NEED_REPLACE_TRACK,this).then(()=>{U.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(i=>{U.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),i)}))}catch{}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(n){if(!this._useAudioElement)throw new Q(W.NOT_SUPPORTED,"your browser does not support setting the audio output device");await vo.setSinkID(this.getTrackId(),n)}async setEnabled(n,r,i){return this._setEnabled(n,r,i)}async _setEnabled(n,r,i){if(!i){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(U.info("[".concat(this.getTrackId(),"] start setEnabled"),n),n){this._originMediaStreamTrack.enabled=!0;try{i||(this._enabled=!0),await Mn(this,et.NEED_ENABLE_TRACK,this),U.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(n," success"))}catch(s){throw i||(this._enabled=!1),U.error("[".concat(this.getTrackId(),"] setEnabled to true error"),s.toString()),s}}else{this._originMediaStreamTrack.enabled=!1,i||(this._enabled=!1);try{await Mn(this,et.NEED_DISABLE_TRACK,this)}catch(s){throw i||(this._enabled=!0),U.error("[".concat(this.getTrackId(),"] setEnabled to false error"),s.toString()),s}}}async setMuted(n){n!==this._muted&&(this.stateCheck("muted",n),this._muted=n,this._originMediaStreamTrack.enabled=!n,U.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(n)),n?await Mn(this,et.NEED_MUTE_TRACK,this):await Mn(this,et.NEED_UNMUTE_TRACK,this))}getStats(){return Pp(()=>{U.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),Aa(this,et.GET_STATS)||Gy({},Ty)}setAudioFrameCallback(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!n)return this._source.removeAllListeners(Zi.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(r),this._source.removeAllListeners(Zi.ON_AUDIO_BUFFER),this._source.on(Zi.ON_AUDIO_BUFFER,i=>n(i))}play(){U.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(U.debug("[".concat(this.getTrackId(),"] start audio playback in element")),vo.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){U.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?vo.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];U.debug("[".concat(this.getTrackId(),"] update player source track")),n&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&vo.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(n,r){this._originMediaStreamTrack!==n&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),n.addEventListener("ended",this._handleTrackEnded),r&&this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=n,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this.processor.updateInput({track:n,context:this.processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mn(this,et.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(n))}renewMediaStreamTrack(n){return Pe.resolve(void 0)}pipe(n){if(this._bypassWebAudio)throw new Q(W.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===n)return n;if(n._source)throw new Q(W.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),n}unpipe(){var n;if(!this.processor)return;const r=this.processor;(n=this._source.processSourceNode)===null||n===void 0||n.disconnect(),this.processor._source=!1,this.processor=void 0,r.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Zr.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(n),await Mn(this,et.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mn(this,et.NEED_REPLACE_TRACK,this))}),this.processorDestination.on(Zr.ON_NODE,n=>{this._source.processedNode=n})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Zr.ON_TRACK),this.processorDestination.removeAllListeners(Zr.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(eo.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(eo.REQUEST_CONSTRAINTS)}}).prototype,"_source",[IP],Object.getOwnPropertyDescriptor(zt.prototype,"_source"),zt.prototype),_e(zt.prototype,"processorContext",[wP],Object.getOwnPropertyDescriptor(zt.prototype,"processorContext"),zt.prototype),_e(zt.prototype,"processorDestination",[OP],Object.getOwnPropertyDescriptor(zt.prototype,"processorDestination"),zt.prototype),_e(zt.prototype,"setVolume",[AP],Object.getOwnPropertyDescriptor(zt.prototype,"setVolume"),zt.prototype),_e(zt.prototype,"setPlaybackDevice",[NP,xP],Object.getOwnPropertyDescriptor(zt.prototype,"setPlaybackDevice"),zt.prototype),_e(zt.prototype,"setEnabled",[PP,DP,kP],Object.getOwnPropertyDescriptor(zt.prototype,"setEnabled"),zt.prototype),_e(zt.prototype,"setMuted",[LP,MP,UP],Object.getOwnPropertyDescriptor(zt.prototype,"setMuted"),zt.prototype),_e(zt.prototype,"getStats",[FP],Object.getOwnPropertyDescriptor(zt.prototype,"getStats"),zt.prototype),_e(zt.prototype,"setAudioFrameCallback",[VP],Object.getOwnPropertyDescriptor(zt.prototype,"setAudioFrameCallback"),zt.prototype),_e(zt.prototype,"play",[jP,BP],Object.getOwnPropertyDescriptor(zt.prototype,"play"),zt.prototype),_e(zt.prototype,"stop",[$P,HP],Object.getOwnPropertyDescriptor(zt.prototype,"stop"),zt.prototype),_e(zt.prototype,"close",[WP],Object.getOwnPropertyDescriptor(zt.prototype,"close"),zt.prototype),_e(zt.prototype,"pipe",[GP],Object.getOwnPropertyDescriptor(zt.prototype,"pipe"),zt.prototype),_e(zt.prototype,"unpipe",[zP],Object.getOwnPropertyDescriptor(zt.prototype,"unpipe"),zt.prototype),zt),B0=(KP=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),YP=Ln(),qP=Rd("MicrophoneAudioTrack","_enabledMutex"),XP=ze({argsMap:(n,r,i)=>[n.getTrackId(),r,i]}),JP=Ln(),QP=ze({argsMap:n=>[n.getTrackId()]}),_e((Ls=class extends ei{get __className__(){return"MicrophoneAudioTrack"}constructor(n,r,i,s){super(n,r.encoderConfig?P0(r.encoderConfig):{},s,ie("GET_VOLUME_OF_MUTED_AUDIO_TRACK"),!0),N(this,"_config",void 0),N(this,"_deviceName","default"),N(this,"_constraints",void 0),N(this,"_originalConstraints",void 0),N(this,"_enabled",!0),this._config=r,this._constraints=i,this._originalConstraints=i,this._deviceName=n.label,typeof r.bypassWebAudio=="boolean"&&(this._bypassWebAudio=r.bypassWebAudio),(hd()||GS())&&Gt.bindInterruptDetectorTrack(this),this.on(j0.UPDATE_TRACK_SOURCE,()=>{this.bindProcessorContextEvents()}),dP()&&this.bindProcessorContextEvents()}async setDevice(n){if(U.info("[".concat(this.getTrackId(),"] start set device to ").concat(n)),this._enabled)try{const r=await Mo.getDeviceById(n),i={};i.audio=Gy({},this._constraints),i.audio.deviceId={exact:n},this._originMediaStreamTrack.stop();let s=null;try{s=await Oa(i,this.getTrackId())}catch(l){throw U.error("[".concat(this.getTrackId(),"] setDevice failed"),l.toString()),s=await Oa({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(s.getAudioTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(s.getAudioTracks()[0],!1),this._deviceName=r.label,this._config.microphoneId=n,this._constraints.deviceId={exact:n}}catch(r){throw U.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}else try{const r=await Mo.getDeviceById(n);this._deviceName=r.label,this._config.microphoneId=n,this._constraints.deviceId={exact:n}}catch(r){throw U.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}U.info("[".concat(this.getTrackId(),"] set device to ").concat(n," success"))}async setEnabled(n,r,i){if(r)return U.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(n);if(!i){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(U.info("[".concat(this.getTrackId(),"] start setEnabled"),n),!n){var s;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),(s=this._source.clonedTrack)===null||s===void 0||s.stop(),i||(this._enabled=!1);try{await Mn(this,et.NEED_DISABLE_TRACK,this)}catch(p){throw U.error("[".concat(this.getTrackId(),"] setEnabled false failed"),p.toString()),p}return}const l=Gy({},this._constraints),d=Mo.searchDeviceIdByName(this._deviceName);d&&!l.deviceId&&(l.deviceId=d);try{i||(this._enabled=!0);const p=await Oa({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(p.getAudioTracks()[0],!1),await Mn(this,et.NEED_ENABLE_TRACK,this)}catch(p){throw i||(this._enabled=!1),U.error("[".concat(this.getTrackId(),"] setEnabled true failed"),p.toString()),p}U.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(hd()||GS())&&Gt.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Ci()||Ps())&&this._enabled&&!this._isClosed&&Gt.duringInterruption){const n=async()=>{Gt.off(yr.IOS_INTERRUPTION_END,n),this._enabled&&!this._isClosed&&(U.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Gt.on(yr.IOS_INTERRUPTION_END,n)}else U.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Qc.TRACK_ENDED)}async renewMediaStreamTrack(n){const r=n||this._constraints,i=Mo.searchDeviceIdByName(this._deviceName);if(i&&!r.deviceId&&(r.deviceId=i),this._constraints=r,this._enabled){this._originMediaStreamTrack.stop();const s=await Oa({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(s.getAudioTracks()[0],!0)}}bindProcessorContextEvents(){this.processorContext.on(eo.REQUEST_UPDATE_CONSTRAINTS,async(n,r,i)=>{try{const s=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(s),r()}catch(s){i(s)}}),this.processorContext.on(eo.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[KP,YP],Object.getOwnPropertyDescriptor(Ls.prototype,"setDevice"),Ls.prototype),_e(Ls.prototype,"setEnabled",[qP,XP,JP],Object.getOwnPropertyDescriptor(Ls.prototype,"setEnabled"),Ls.prototype),_e(Ls.prototype,"close",[QP],Object.getOwnPropertyDescriptor(Ls.prototype,"close"),Ls.prototype),Ls),GY=(ZP=ze({argsMap:(n,r)=>[n.getTrackId(),r,n.duration]}),eD=Ln(),tD=ze({argsMap:n=>[n.getTrackId()]}),nD=Ln(),rD=ze({argsMap:n=>[n.getTrackId()]}),iD=Ln(),oD=ze({argsMap:n=>[n.getTrackId()]}),aD=Ln(),sD=ze({argsMap:n=>[n.getTrackId()]}),cD=Ln(),lD=ze({argsMap:n=>[n.getTrackId()]}),uD=Ln(),_e((hi=class extends ei{get __className__(){return"BufferSourceAudioTrack"}constructor(n,r,i,s){super(r.createOutputTrack(),i,s),N(this,"source",void 0),N(this,"_bufferSource",void 0),this.source=n,this._bufferSource=r,this._bufferSource.on(Zi.AUDIO_SOURCE_STATE_CHANGE,l=>{this.safeEmit(Qc.SOURCE_STATE_CHANGE,l)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(n){n&&this._bufferSource.updateOptions(n),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(n){this._bufferSource.seekAudioBuffer(n)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}setAudioBufferPlaybackSpeed(n){sn(n,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(n)}}).prototype,"startProcessAudioBuffer",[ZP,eD],Object.getOwnPropertyDescriptor(hi.prototype,"startProcessAudioBuffer"),hi.prototype),_e(hi.prototype,"pauseProcessAudioBuffer",[tD,nD],Object.getOwnPropertyDescriptor(hi.prototype,"pauseProcessAudioBuffer"),hi.prototype),_e(hi.prototype,"seekAudioBuffer",[rD,iD],Object.getOwnPropertyDescriptor(hi.prototype,"seekAudioBuffer"),hi.prototype),_e(hi.prototype,"resumeProcessAudioBuffer",[oD,aD],Object.getOwnPropertyDescriptor(hi.prototype,"resumeProcessAudioBuffer"),hi.prototype),_e(hi.prototype,"stopProcessAudioBuffer",[sD,cD],Object.getOwnPropertyDescriptor(hi.prototype,"stopProcessAudioBuffer"),hi.prototype),_e(hi.prototype,"setAudioBufferPlaybackSpeed",[lD,uD],Object.getOwnPropertyDescriptor(hi.prototype,"setAudioBufferPlaybackSpeed"),hi.prototype),hi);class to extends ei{get __className__(){return"MixingAudioTrack"}get isActive(){for(const r of this.trackList)if(r._enabled&&!r._isClosed&&!r.muted)return!0;return!1}constructor(){const r=Id().createMediaStreamDestination();super(r.stream.getAudioTracks()[0],void 0,fn(8,"track-mix-")),N(this,"trackList",void 0),N(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=r,this.trackList=[]}hasAudioTrack(r){return this.trackList.indexOf(r)!==-1}addAudioTrack(r){this.trackList.indexOf(r)===-1?(U.debug("add ".concat(r.getTrackId()," to mixing track")),r._source.outputNode.connect(this.destNode),this.trackList.push(r),this.updateEncoderConfig()):U.debug("track ".concat(r.getTrackId()," is already added"))}removeAudioTrack(r){if(this.trackList.indexOf(r)!==-1){U.debug("remove ".concat(r.getTrackId()," from mixing track"));try{r._source.outputNode.disconnect(this.destNode)}catch{}Yy(this.trackList,r),this.updateEncoderConfig()}}updateEncoderConfig(){const r={};this.trackList.forEach(i=>{i._encoderConfig&&((i._encoderConfig.bitrate||0)>(r.bitrate||0)&&(r.bitrate=i._encoderConfig.bitrate),(i._encoderConfig.sampleRate||0)>(r.sampleRate||0)&&(r.sampleRate=i._encoderConfig.sampleRate),(i._encoderConfig.sampleSize||0)>(r.sampleSize||0)&&(r.sampleSize=i._encoderConfig.sampleSize),i._encoderConfig.stereo&&(r.stereo=!0))}),this._encoderConfig=r}_updateRtpTransceiver(r){this._rtpTransceiver!==r&&(this._rtpTransceiver=r,this.trackList.forEach(i=>{i instanceof to?i.emit(Ap.TRANSCEIVER_UPDATED,r):i._updateRtpTransceiver(r)}))}}class zY extends In{constructor(){super(...arguments),N(this,"resultStorage",new Map)}setLocalAudioStats(r,i,s){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",r,this.checkAudioInputLevel(s,i)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",r,this.checkSendAudioBitrate(s,i))}setLocalVideoStats(r,i,s){this.record("SEND_VIDEO_BITRATE_TOO_LOW",r,this.checkSendVideoBitrate(s,i)),this.record("FRAMERATE_INPUT_TOO_LOW",r,this.checkFramerateInput(s,i)),this.record("FRAMERATE_SENT_TOO_LOW",r,this.checkFramerateSent(s))}setRemoteAudioStats(r,i){const s=r.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",s,this.checkAudioOutputLevel(i))}setRemoteVideoStats(r,i){const s=r.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",s,this.checkVideoDecode(i))}record(r,i,s){if(ie("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(r)||this.resultStorage.set(r,{result:[],isPrevNormal:!0});const l=this.resultStorage.get(r);if(l&&(l.result.push(s),l.result.length>=5)){const d=l.result.includes(!0);l.isPrevNormal&&!d&&this.emit("exception",hD[r],r,i),!l.isPrevNormal&&d&&this.emit("exception",hD[r]+2e3,r+"_RECOVER",i),l.isPrevNormal=d,l.result=[]}}checkAudioOutputLevel(r){return!(r.receiveBitrate>0&&r.receiveLevel===0)}checkAudioInputLevel(r,i){return i instanceof to&&!i.isActive||!!i.muted||r.sendVolumeLevel!==0}checkFramerateInput(r,i){let s=null;i._encoderConfig&&i._encoderConfig.frameRate&&(s=uc(i._encoderConfig.frameRate));const l=r.captureFrameRate;return!s||!l||!(s>10&&l<5||s<10&&s>=5&&l<=1)}checkFramerateSent(r){return!(r.captureFrameRate&&r.sendFrameRate&&r.captureFrameRate>5&&r.sendFrameRate<=1)}checkSendVideoBitrate(r,i){return!!i.muted||r.sendBitrate!==0}checkSendAudioBitrate(r,i){return i instanceof to&&!i.isActive||!!i.muted||r.sendBitrate!==0}checkVideoDecode(r){return r.receiveBitrate===0||r.decodeFrameRate!==0}}const hD={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},ta=new class{markSubscribeStart(n,r){performance.mark("agora-web-sdk/".concat(n,"/subscribe-").concat(r))}markPublishStart(n,r){performance.mark("agora-web-sdk/".concat(n,"/publish-").concat(r))}measureFromSubscribeStart(n,r){const i=performance.getEntriesByName("agora-web-sdk/".concat(n,"/subscribe-").concat(r));if(i.length>0){const s=i[i.length-1];return Math.round(performance.now()-s.startTime)}return 0}measureFromPublishStart(n,r){const i=performance.getEntriesByName("agora-web-sdk/".concat(n,"/publish-").concat(r));if(i.length>0){const s=i[i.length-1];return Math.round(performance.now()-s.startTime)}return 0}};function pD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function cu(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?pD(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):pD(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class Ad{constructor(r){N(this,"store",void 0),N(this,"onStatsException",void 0),N(this,"onUploadPublishDuration",void 0),N(this,"onStatsChanged",void 0),N(this,"localStats",new Map),N(this,"remoteStats",new Map),N(this,"updateStatsInterval",void 0),N(this,"trafficStats",void 0),N(this,"trafficStatsPeerList",[]),N(this,"uplinkStats",void 0),N(this,"exceptionMonitor",void 0),N(this,"p2pChannel",void 0),N(this,"scalabilityMode",BS.L1T1),N(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=r,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new zY,this.exceptionMonitor.on("exception",(i,s,l)=>{this.onStatsException&&this.onStatsException(i,s,l)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(Me.LocalAudioTrack)||cu({},Ty)}getLocalVideoTrackStats(){return this.localStats.get(Me.LocalVideoTrack)||cu({},Ry)}getRemoteAudioTrackStats(r){const i=(d,p)=>{if(!this.trafficStats)return p;const v=this.trafficStats.peer_delay.find(E=>E.peer_uid===d);return v&&(p.publishDuration=v.B_ppad+(Date.now()-this.trafficStats.timestamp)),p},s={};if(r){var l;const d=(l=this.remoteStats.get(r))===null||l===void 0?void 0:l.audioStats;d&&(s[r]=i(r,d))}else Array.from(this.remoteStats.entries()).forEach(d=>{let[p,{audioStats:v}]=d;v&&(s[p]=i(p,v))});return s}getRemoteNetworkQualityStats(r){const i={};if(r){var s;const l=(s=this.remoteStats.get(r))===null||s===void 0?void 0:s.networkStats;l&&(i[r]=l)}else Array.from(this.remoteStats.entries()).forEach(l=>{let[d,{networkStats:p}]=l;p&&(i[d]=p)});return i}getRemoteVideoTrackStats(r){const i=(d,p)=>{if(!this.trafficStats)return p;const v=this.trafficStats.peer_delay.find(E=>E.peer_uid===d);return v&&(p.publishDuration=v.B_ppvd+(Date.now()-this.trafficStats.timestamp)),p},s={};if(r){var l;const d=(l=this.remoteStats.get(r))===null||l===void 0?void 0:l.videoStats;d&&(s[r]=i(r,d))}else Array.from(this.remoteStats.entries()).forEach(d=>{let[p,{videoStats:v}]=d;v&&(s[p]=i(p,v))});return s}getRTCStats(){let r=0,i=0,s=0,l=0;const d=this.localStats.get(Me.LocalAudioTrack);d&&(r+=d.sendBytes,i+=d.sendBitrate);const p=this.localStats.get(Me.LocalVideoTrack);p&&(r+=p.sendBytes,i+=p.sendBitrate);const v=this.localStats.get(Me.LocalVideoLowTrack);v&&(r+=v.sendBytes,i+=v.sendBitrate),this.remoteStats.forEach(T=>{let{audioStats:C,videoStats:R}=T;C&&(s+=C.receiveBytes,l+=C.receiveBitrate),R&&(s+=R.receiveBytes,l+=R.receiveBitrate)});let E=1;return this.trafficStats&&(E+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:E,SendBitrate:i,SendBytes:r,RecvBytes:s,RecvBitrate:l,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(r){this.localStats.set(r,void 0)}removeLocalStats(r){r?this.localStats.delete(r):this.localStats.clear()}addRemoteStats(r){this.remoteStats.set(r,{})}removeRemoteStats(r){r?this.remoteStats.delete(r):this.remoteStats.clear()}addP2PChannel(r){this.p2pChannel=r}updateTrafficStats(r){r.peer_delay=r.peer_delay.filter(i=>i.B_ppad!==void 0||i.B_ppvd!==void 0),r.peer_delay.filter(i=>this.trafficStatsPeerList.indexOf(i.peer_uid)===-1).forEach(i=>{var s;const l=(s=this.p2pChannel)===null||s===void 0?void 0:s.getRemoteMedia(i.peer_uid),d=l!=null&&l.videoSSRC?ta.measureFromSubscribeStart(this.store.clientId,l.videoSSRC):0,p=l!=null&&l.audioSSRC?ta.measureFromSubscribeStart(this.store.clientId,l.audioSSRC):0;i.B_ppad!==void 0&&i.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(i.peer_uid,i.B_ppad,i.B_ppvd,d>p?d:p),this.trafficStatsPeerList.push(i.peer_uid))}),this.trafficStats=r}updateUplinkStats(r){this.uplinkStats&&this.uplinkStats.B_fir!==r.B_fir&&U.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(r.B_fir)),this.uplinkStats=r}static isRemoteVideoFreeze(r,i,s){if(!r)return!1;const l=!!s&&i.framesDecodeFreezeTime>s.framesDecodeFreezeTime,d=!s||i.framesDecodeCount>s.framesDecodeCount;return l||!d}static isRemoteAudioFreeze(r){return!!r&&r._isFreeze()}isLocalVideoFreeze(r){return!(!r.inputFrame||!r.sentFrame)&&r.inputFrame.frameRate>5&&r.sentFrame.frameRate<3}updateLocalStats(r){Array.from(this.localStats.entries()).forEach(i=>{let[s,l]=i;switch(s){case Me.LocalVideoTrack:case Me.LocalVideoLowTrack:{const p=l,v=cu({},Ry),E=r.getStats(),T=r.getLocalMedia(s);if(E){const C=E.videoSend.find(R=>R.ssrc===(T==null?void 0:T.ssrcs[0].ssrcId));if(C){const R=r.getLocalVideoSize(),L=r.getEncoderConfig(Me.LocalVideoTrack);C.codec!=="H264"&&C.codec!=="H265"&&C.codec!=="VP8"&&C.codec!=="VP9"&&C.codec!=="AV1X"&&C.codec!=="AV1"||(v.codecType=C.codec),v.sendBytes=C.bytes,v.sendBitrate=p?8*Math.max(0,v.sendBytes-p.sendBytes):0,C.inputFrame?(v.captureFrameRate=C.inputFrame.frameRate,v.captureResolutionHeight=C.inputFrame.height,v.captureResolutionWidth=C.inputFrame.width):R&&(v.captureResolutionWidth=R.width,v.captureResolutionHeight=R.height),C.sentFrame?(v.sendFrameRate=C.sentFrame.frameRate,v.sendResolutionHeight=C.sentFrame.height,v.sendResolutionWidth=C.sentFrame.width):R&&(v.sendResolutionWidth=R.width,v.sendResolutionHeight=R.height),C.avgEncodeMs&&(v.encodeDelay=C.avgEncodeMs),L&&L.bitrateMax&&(v.targetSendBitrate=1e3*L.bitrateMax),v.sendPackets=C.packets,v.sendPacketsLost=C.packetsLost,v.totalDuration=p?p.totalDuration+1:1,v.totalFreezeTime=p?p.totalFreezeTime:0,this.isLocalVideoFreeze(C)&&(v.totalFreezeTime+=1),C.scalabilityMode&&this.scalabilityMode!==C.scalabilityMode&&(U.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(C.scalabilityMode)),this.scalabilityMode=C.scalabilityMode)}this.trafficStats&&(v.sendPacketsLost=this.trafficStats.B_pvlr4/100)}var d;this.localStats.set(s,v),((p==null?void 0:p.sendResolutionWidth)!==v.sendResolutionWidth||(p==null?void 0:p.sendResolutionHeight)!==v.sendResolutionHeight)&&((d=this.onStatsChanged)===null||d===void 0||d.call(this,"resolution",{width:v.sendResolutionWidth,height:v.sendResolutionHeight})),v&&T&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,T.track,v);break}case Me.LocalAudioTrack:{const p=l,v=cu({},Ty),E=r.getStats(),T=r.getLocalMedia(s);if(E){const C=E.audioSend.find(R=>R.ssrc===(T==null?void 0:T.ssrcs[0].ssrcId));if(C){if(C.codec!=="opus"&&C.codec!=="aac"&&C.codec!=="PCMU"&&C.codec!=="PCMA"&&C.codec!=="G722"||(v.codecType=C.codec),C.inputLevel)v.sendVolumeLevel=Math.round(32767*C.inputLevel);else{const R=r.getLocalAudioVolume();R&&(v.sendVolumeLevel=Math.round(32767*R))}v.sendBytes=C.bytes,v.sendPackets=C.packets,v.sendPacketsLost=C.packetsLost,v.sendBitrate=p?8*Math.max(0,v.sendBytes-p.sendBytes):0}}this.trafficStats&&(v.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(Me.LocalAudioTrack,v),v&&T&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,T.track,v);break}}})}updateRemoteStats(r){Array.from(this.remoteStats.entries()).forEach(i=>{let[s,{videoStats:l,audioStats:d,videoPcStats:p}]=i;const v=d,E=l,T=p,C=cu({},Vx),R=cu({},jx),L=cu({},RK),{audioTrack:j,videoTrack:Y,audioSSRC:q,videoSSRC:X}=r.getRemoteMedia(s),le=r.getStats(),he=le==null?void 0:le.audioRecv.find(be=>be.ssrc===q),ye=le==null?void 0:le.videoRecv.find(be=>be.ssrc===X),ke=this.trafficStats&&this.trafficStats.peer_delay.find(be=>be.peer_uid===s);if(he&&(he.codec!=="opus"&&he.codec!=="aac"&&he.codec!=="PCMU"&&he.codec!=="PCMA"&&he.codec!=="G722"||(C.codecType=he.codec),he.outputLevel?C.receiveLevel=Math.round(32767*he.outputLevel):j&&(C.receiveLevel=Math.round(32767*j.getVolumeLevel())),C.receiveBytes=he.bytes,C.receivePackets=he.packets,C.receivePacketsLost=he.packetsLost,C.packetLossRate=C.receivePacketsLost/(C.receivePackets+C.receivePacketsLost),C.receiveBitrate=v?8*Math.max(0,C.receiveBytes-v.receiveBytes):0,C.totalDuration=v?v.totalDuration+1:1,C.totalFreezeTime=v?v.totalFreezeTime:0,C.freezeRate=C.totalFreezeTime/C.totalDuration,C.receiveDelay=he.jitterBufferMs,C.totalDuration>10&&Ad.isRemoteAudioFreeze(j)&&(C.totalFreezeTime+=1)),ye){ye.codec!=="H264"&&ye.codec!=="H265"&&ye.codec!=="VP8"&&ye.codec!=="VP9"&&ye.codec!=="AV1X"&&ye.codec!=="AV1"||(R.codecType=ye.codec),R.receiveBytes=ye.bytes,R.receiveBitrate=E?8*Math.max(0,R.receiveBytes-E.receiveBytes):0,R.decodeFrameRate=ye.decodeFrameRate<0?0:ye.decodeFrameRate,R.renderFrameRate=ye.decodeFrameRate<0?0:ye.decodeFrameRate,ye.outputFrame&&(R.renderFrameRate=ye.outputFrame.frameRate),ye.receivedFrame?(R.receiveFrameRate=ye.receivedFrame.frameRate,R.receiveResolutionHeight=ye.receivedFrame.height,R.receiveResolutionWidth=ye.receivedFrame.width):Y&&(R.receiveResolutionHeight=Y._videoHeight||0,R.receiveResolutionWidth=Y._videoWidth||0),ye.framesRateFirefox!==void 0&&(R.receiveFrameRate=Math.round(ye.framesRateFirefox)),R.receivePackets=ye.packets,R.receivePacketsLost=ye.packetsLost,R.packetLossRate=R.receivePacketsLost/(R.receivePackets+R.receivePacketsLost),R.totalDuration=E?E.totalDuration+1:1,R.totalFreezeTime=E?E.totalFreezeTime:0,R.receiveDelay=ye.jitterBufferMs||0;const be=!!X&&r.getRemoteVideoIsReady(X);Y&&be&&Ad.isRemoteVideoFreeze(Y,ye,T)&&(R.totalFreezeTime+=1),R.freezeRate=R.totalFreezeTime/R.totalDuration}ke&&(C.end2EndDelay=ke.B_ad,R.end2EndDelay=ke.B_vd,C.transportDelay=ke.B_ed,R.transportDelay=ke.B_ed,C.currentPacketLossRate=ke.B_ealr4/100,R.currentPacketLossRate=ke.B_evlr4/100,L.uplinkNetworkQuality=ke.B_punq?ke.B_punq:0,L.downlinkNetworkQuality=ke.B_pdnq?ke.B_pdnq:0),this.remoteStats.set(s,{audioStats:C,videoStats:R,videoPcStats:ye,networkStats:L}),j&&this.exceptionMonitor.setRemoteAudioStats(j,C),Y&&this.exceptionMonitor.setRemoteVideoStats(Y,R)})}}const lc=new class extends In{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),N(this,"_lastHiddenTime",0),N(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),U.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}};function fD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function $0(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?fD(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):fD(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function H0(n){return n.match(/^[\.\:\d]+$/)?"".concat(n.replace(/[^\d]/g,"-"),".").concat(ie("TURN_DOMAIN")):(U.info("Cannot recognized as IP address ".concat(n,". Used As Host instead")),n)}function mD(n,r){var i,s;const l=ie("GATEWAY_DOMAINS");let d=l[1]&&r.indexOf(l[1])!==-1?1:0;n.addresses=n.addresses||[];const p=n.addresses.map(E=>E.domain_prefix?{address:"".concat(E.domain_prefix,".").concat(l[d++%l.length],":").concat(E.port)}:E.ip.match(/^[\.\:\d]+$/)?{ip:E.ip,port:E.port,address:"".concat(E.ip.replace(/[^\d]/g,"-"),".").concat(l[d++%l.length],":").concat(E.port)}:(U.info("Cannot recognized as IP address ".concat(E.ip,". Used As Host instead")),{ip:E.ip,port:E.port,address:"".concat(E.ip,":").concat(E.port)}));if((i=n.detail)!==null&&i!==void 0&&i[18]&&typeof((s=n.detail)===null||s===void 0?void 0:s[18])=="string"){const E=n.detail[18],T=E==null?void 0:E.split(";");for(let C=0;C<T.length;C++){var v;const R=ic(v=T[C]).call(v);p[C]&&R&&(p[C].ip6=R)}}return{gatewayAddrs:p,uid:n.uid,cid:n.cid,cert:n.cert,vid:n.detail&&n.detail[8],uni_lbs_ip:n.detail&&n.detail[1],res:n,csIp:n.detail&&n.detail[502]}}function uc(n){return typeof n=="number"?n:n.exact||n.ideal||n.max||n.min||0}function gD(n){const r=n._encoderConfig;if(!r)return{};const i={resolution:r.width&&r.height?"".concat(uc(r.width),"x").concat(uc(r.height)):void 0,maxVideoBW:r.bitrateMax,minVideoBW:r.bitrateMin};return typeof r.frameRate=="number"?(i.maxFrameRate=r.frameRate,i.minFrameRate=r.frameRate):r.frameRate&&(i.maxFrameRate=r.frameRate.max||r.frameRate.ideal||r.frameRate.exact||r.frameRate.min,i.minFrameRate=r.frameRate.min||r.frameRate.ideal||r.frameRate.exact||r.frameRate.max),i}function vD(n){return n>=0&&n<.17?1:n>=.17&&n<.36?2:n>=.36&&n<.59?3:n>=.59&&n<=1?4:n>1?5:0}function zy(n,r){let i,s,l;switch(r){case Sr.CHOOSE_SERVER:i=4096,s="choose server";break;case Sr.CLOUD_PROXY:i=1048576,s="proxy";break;case Sr.CLOUD_PROXY_5:i=4194304,s="proxy5";break;case Sr.CLOUD_PROXY_FALLBACK:i=4194310,s="proxy fallback";break;default:throw new Q(W.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:n.detail&&n.detail[502],retry:!1})}if(n.response_body.forEach(d=>{d.buffer&&d.buffer.flag===i&&(l={code:d.buffer.code,addresses:(d.buffer.edges_services||[]).map(p=>$0($0({},p),{},{ticket:d.buffer.cert})),server_ts:n.enter_ts,uid:d.buffer.uid,cid:d.buffer.cid,cname:d.buffer.cname,detail:$0($0({},d.buffer.detail),n.detail),flag:d.buffer.flag,opid:n.opid,cert:d.buffer.cert})}),!l)throw new Q(W.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(s," from multi unilbs response"),{csIp:n.detail&&n.detail[502]});return l}async function KY(n,r){return await Pe.all(n.addresses.map(async i=>({address:H0(i.ip),tcpport:i.port,udpport:i.port,username:r&&ie("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?r.toString():No.username,password:r&&ie("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await xY(r.toString()):No.password})))}function YY(n,r){const i=r._videoWidth||r.getMediaStreamTrack(!0).getSettings().width;return i||U.warning("cannot get original video track's width, default scale down 4 times for low stream"),i?i/uc(n.width):4}function W0(n){let{candidateType:r,relayProtocol:i,type:s,address:l,port:d,protocol:p}=n;return s==="local-candidate"?{candidateType:r,relayProtocol:i,protocol:p}:{candidateType:r,relayProtocol:i,address:l,port:d,protocol:p}}function ED(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function lu(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?ED(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ED(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function Nd(n){return window.TextEncoder?new TextEncoder().encode(n).length:n.length}function ti(n){return new Pe(r=>{window.setTimeout(r,n)})}function qY(n){const r=new Q(W.TIMEOUT,"timeout");return new Pe((i,s)=>{window.setTimeout(()=>s(r),n)})}function fn(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,r=arguments.length>1?arguments[1]:void 0;const i=Math.random().toString(16).substr(2,n).toLowerCase();return i.length===n?"".concat(r).concat(i):"".concat(r).concat(i)+fn(n-i.length,"")}function Ky(){return fn(32,"").toUpperCase()}const G0=()=>{};function _D(n){return new Pe((r,i)=>{let s=!1;const l=document.createElement("video");l.setAttribute("autoplay",""),l.setAttribute("muted",""),l.muted=!0,l.autoplay=!0,l.setAttribute("playsinline",""),l.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(l);const d=Ci()?"canplay":"playing";l.addEventListener(d,()=>{const p=l.videoWidth,v=l.videoHeight;!p&&Dn()||(s=!0,l.srcObject=null,l.remove(),r([p,v]))}),l.srcObject=new MediaStream([n]),l.play().catch(G0),setTimeout(()=>{s||(l.srcObject=null,l.remove(),r([l.videoWidth,l.videoHeight]))},4e3)})}function xd(n){return Pe.all(n.map(r=>r.then(i=>{throw i},i=>i))).then(r=>{throw r},r=>r)}function ni(n,r){for(var i=arguments.length,s=new Array(i>2?i-2:0),l=2;l<i;l++)s[l-2]=arguments[l];return n.getListeners(r).length===0?Pe.reject(new Q(W.UNEXPECTED_ERROR,"can not emit promise")):new Pe((d,p)=>{n.emit(r,...s,d,p)})}function Mn(n,r){if(n.getListeners(r).length===0)return Pe.resolve();for(var i=arguments.length,s=new Array(i>2?i-2:0),l=2;l<i;l++)s[l-2]=arguments[l];return ni(n,r,...s)}function Aa(n,r){if(n.getListeners(r).length===0)return null;for(var i=arguments.length,s=new Array(i>2?i-2:0),l=2;l<i;l++)s[l-2]=arguments[l];return uu(n,r,...s)}function uu(n,r){let i=null,s=null;for(var l=arguments.length,d=new Array(l>2?l-2:0),p=2;p<l;p++)d[p-2]=arguments[p];if(n.emit(r,...d,v=>{i=v},v=>{s=v}),s!==null)throw s;if(i===null)throw new Q(W.UNEXPECTED_ERROR,"handler is not sync");return i}function Yy(n,r){const i=n.indexOf(r);i!==-1&&n.splice(i,1)}function SD(n){const r=[];return n.forEach(i=>{r.indexOf(i)===-1&&r.push(i)}),r}function is(n){Pe.resolve().then(n)}function nr(n){return JSON.parse(JSON.stringify(n))}const yD={};function Pp(n,r){yD[r]||(yD[r]=!0,n())}function qy(n){const r=window.atob(n),i=new Uint8Array(new ArrayBuffer(r.length));for(let s=0;s<r.length;s+=1)i[s]=r.charCodeAt(s);return i}function z0(n){let r="";for(let i=0;i<n.length;i+=1)r+=String.fromCharCode(n[i]);return window.btoa(r)}const CD=new class{constructor(){N(this,"fnMap",new Map)}throttleByKey(n,r,i,s){for(var l=arguments.length,d=new Array(l>4?l-4:0),p=4;p<l;p++)d[p-4]=arguments[p];if(this.fnMap.has(r)){const v=this.fnMap.get(r);if(v.threshold!==i){v.fn(...v.args),clearTimeout(v.timer);const E=window.setTimeout(()=>{const T=this.fnMap.get(r);T&&T.fn(...T.args),this.fnMap.delete(r)},i);this.fnMap.set(r,{fn:n,threshold:i,timer:E,args:d,skipFn:s})}else v.skipFn&&v.skipFn(...v.args),this.fnMap.set(r,lu(lu({},v),{},{fn:n,args:d,skipFn:s}))}else{const v=window.setTimeout(()=>{const E=this.fnMap.get(r);E&&E.fn(...E.args),this.fnMap.delete(r)},i);this.fnMap.set(r,{fn:n,threshold:i,timer:v,args:d,skipFn:s})}}},bD=CD.throttleByKey.bind(CD),Dp=async n=>{let{fragementLength:r,referenceList:i,asyncMapHandler:s,allFailedhandler:l,promisesCollector:d}=n,p=0;const v=r;let E,T=0;const C=async()=>{const R=(()=>{const L=p*v,j=L+v;return i.slice(L,j).map(s)})();d&&d.push(...R);try{E=await xd(R)}catch(L){if(T+=v,p++,!(T>=i.length))return void await C();l(L)}R.forEach(L=>L.cancel())};return await C(),E};function TD(n){return typeof n=="object"&&n!==null&&!(n instanceof RegExp)}const XY={[yd.ACCESS_POINT]:{[Jr.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[Jr.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[Jr.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[Jr.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[Jr.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[Jr.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[Jr.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[Jr.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[Jr.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[Jr.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[Jr.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[Jr.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[Jr.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[Jr.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[Jr.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[Jr.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[Jr.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[Jr.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[yd.UNILBS]:{[xo.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[xo.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[xo.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[xo.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[xo.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[xo.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[xo.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[xo.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[xo.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[xo.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[xo.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[xo.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[yd.STRING_UID_ALLOCATOR]:{[wp.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[wp.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[wp.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function K0(n){const r=XY[Math.floor(n/1e4)];if(!r)return{desc:"unkonw error",retry:!1};const i=r[n%1e4];if(!i){if(Math.floor(n/1e4)===yd.ACCESS_POINT){const s=n%1e4;if(s.toString()[0]==="1")return{desc:n.toString(),retry:!1};if(s.toString()[0]==="2")return{desc:n.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return i}const JY={[Ke.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[Ke.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[Ke.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[Ke.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[Ke.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[Ke.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[Ke.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[Ke.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[Ke.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[Ke.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[Ke.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[Ke.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Ke.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Ke.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[Ke.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[Ke.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[Ke.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[Ke.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[Ke.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[Ke.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[Ke.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[Ke.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[Ke.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[Ke.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[Ke.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[Ke.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[Ke.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[Ke.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[Ke.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[Ke.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[Ke.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[Ke.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[Ke.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[Ke.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[Ke.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[Ke.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[Ke.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[Ke.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Ke.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Ke.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[Ke.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[Ke.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Ke.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Ke.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[Ke.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[Ke.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[Ke.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[Ke.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[Ke.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[Ke.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[Ke.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[Ke.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[Ke.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[Ke.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[Ke.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[Ke.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[Ke.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[Ke.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[Ke.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[Ke.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[Ke.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[Ke.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[Ke.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[Ke.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function kp(n){return JY[n]||{desc:"UNKNOW_ERROR_".concat(n),action:"failed"}}function RD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}class du extends In{get url(){return this.websocket?this.websocket.url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(r){["tryNext","recover"].includes(r)&&this.resetReconnectCount(r),this._reconnectMode=r}get state(){return this._state}set state(r){r!==this._state&&(this._state=r,this._state==="reconnecting"?this.emit(it.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(it.CONNECTED):this._state==="closed"?this.emit(it.CLOSED):this._state==="failed"&&this.emit(it.FAILED))}resetReconnectCount(r){U.debug("websocket reset reconnect count, reason: "+r),this.reconnectCount=0}constructor(r,i){let s=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=arguments.length>3&&arguments[3]!==void 0&&arguments[3],d=arguments.length>4?arguments[4]:void 0;super(),N(this,"connectionID",0),N(this,"currentURLIndex",0),N(this,"urls",void 0),N(this,"_reconnectMode","tryNext"),N(this,"reconnectReason",void 0),N(this,"_initMutex",new Ri("websocket")),N(this,"name",void 0),N(this,"_state","closed"),N(this,"reconnectInterrupter",void 0),N(this,"websocket",void 0),N(this,"retryConfig",void 0),N(this,"reconnectCount",0),N(this,"forceCloseTimeout",5e3),N(this,"onlineReconnectListener",void 0),N(this,"useCompress",void 0),N(this,"tryDoubleDomain",!1),N(this,"wsInflateLength",0),N(this,"wsDeflateLength",0),N(this,"closeEstablishingWs",()=>{}),N(this,"store",void 0),N(this,"joinChannelServiceRecordIndex",void 0),this.store=d,this.name=r,this.retryConfig=function(C){for(var R=1;R<arguments.length;R++){var L=arguments[R]!=null?arguments[R]:{};R%2?RD(Object(L),!0).forEach(function(j){N(C,j,L[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(L)):RD(Object(L)).forEach(function(j){Object.defineProperty(C,j,Object.getOwnPropertyDescriptor(L,j))})}return C}({},i),this.useCompress=s,this.tryDoubleDomain=l;const{timeout:p,timeoutFactor:v}=i,E=Math.max(300,Math.floor(3*p/5)),T=Math.max(1.2,Math.floor(8*v)/10);ui.ONLINE&&(this.retryConfig.timeout=E,this.retryConfig.timeoutFactor=T),tr.on(Zc.NETWORK_STATE_CHANGE,(C,R)=>{C!==R&&(this.resetReconnectCount("network state change: ".concat(R," -> ").concat(C)),C===ui.ONLINE?(this.retryConfig.timeout=E,this.retryConfig.timeoutFactor=T):(this.retryConfig.timeout=p,this.retryConfig.timeoutFactor=v))})}getConnection(){return this.websocket||void 0}init(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;this.forceCloseTimeout=i;const s=(l,d)=>{this.urls=r;const p=this.urls[this.currentURLIndex];this.state="connecting",this.createWebSocketConnection(p).then(l).catch(d),this.once(it.CLOSED,()=>d(new Q(W.WS_DISCONNECT))),this.once(it.CONNECTED,()=>l())};return this._initMutex.lock().then(l=>new Pe((d,p)=>{s(d,p)}).then(()=>{l()}).catch(()=>{l()}))}close(r,i){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const s=this.websocket;i?setTimeout(()=>s.close(),500):s.close(),this.websocket=void 0}this.state=r?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(r,i){if(!this.websocket)return void U.warning("[".concat(this.name,"] can not reconnect, no websocket"));var s;r!==void 0&&(this.reconnectMode=r),U.debug("[".concat(this.name,"] reconnect is triggered initiative")),typeof this.joinChannelServiceRecordIndex=="number"&&((s=this.store)===null||s===void 0||s.recordJoinChannelService({status:"error",errors:[new Error(i)]},this.joinChannelServiceRecordIndex));const l=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),l&&l.bind(this.websocket)({code:9999,reason:i})}sendMessage(r){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new Q(W.WS_ABORT,"websocket is not ready");try{i||(r=JSON.stringify(r)),this.websocket.send(r)}catch(s){throw new Q(W.WS_ERR,"send websocket message error"+s.toString())}}setWsInflateData(r){this.wsDeflateLength=this.wsDeflateLength+r.originLength,this.wsInflateLength=this.wsInflateLength+r.compressedLength}getWsInflateData(){const r=this.wsInflateLength,i=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:r,wsDeflateLength:i}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(r,i){return this.connectionID+=1,this.connectionID,this.joinChannelServiceRecordIndex=void 0,new Pe((s,l)=>{var d;const p=C=>{var R;(R=this.store)===null||R===void 0||R.signalChannelOpen(),U.debug("[".concat(this.name,"] websocket opened:"),C),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),s()},v=async C=>{if(U.debug("[".concat(this.name,"] websocket close ").concat(this.websocket&&this.websocket.url,", code: ").concat(C.code,", reason: ").concat(C.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount<this.retryConfig.maxRetryCount){this.state==="connected"&&(this.reconnectReason=C.reason,this.state="reconnecting");const R=Aa(this,it.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,L=await this.reconnectWithAction(R);if(this.state==="closed")return void U.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!L)return l(new Q(W.WS_DISCONNECT,"websocket reconnect failed: ".concat(C.code))),void this.close(!0);s()}else l(new Q(W.WS_DISCONNECT,"websocket close: ".concat(C.code))),this.close()},E=C=>{this.emit(it.ON_MESSAGE,C)};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),ie("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(r=ie("GATEWAY_WSS_ADDRESS")),U.debug("[".concat(this.name,"] start connect, url: ").concat(r));const T=(d=this.store)===null||d===void 0?void 0:d.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});this.chooseBestWebsocketConnection(r,!!i,T).then(C=>{var R;this.websocket=C,p&&p(C.url),C.onclose=v,C.onmessage=E,(R=this.store)===null||R===void 0||R.recordJoinChannelService({endTs:Date.now(),status:"success"},T),this.joinChannelServiceRecordIndex=T}).catch(C=>{var R;if((R=this.store)===null||R===void 0||R.recordJoinChannelService({endTs:Date.now(),status:C instanceof Q&&C.code===W.WS_ABORT?"aborted":"error",errors:[C]},T),this.state!=="closed"){if(C instanceof Q&&C.code===W.WS_ERR){const L=new Q(W.WS_ERR,"init websocket failed! Error: ".concat(C.toString()));return U.error("[".concat(this.name,"]").concat(L)),void l(L)}v&&v(C)}else l(new Q(W.WS_DISCONNECT,"websocket is closed: ".concat(C.toString())))})})}async reconnectWithAction(r){let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||!this.urls||this.state==="closed")return!1;this.onlineReconnectListener||tr.networkState!==ui.OFFLINE||(this.onlineReconnectListener=tr.onlineWaiter&&tr.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let s=!0;if(this.reconnectInterrupter=()=>{s=!1},i){const p=sy(this.reconnectCount,this.retryConfig);U.debug("[".concat(this.name,"] wait ").concat(p,"ms to reconnect websocket, mode: ").concat(r)),await Pe.race([ti(p),this.onlineReconnectListener||new Pe(()=>{})])}if(this.state==="closed"||!s)return!1;this.reconnectCount+=1;const l=async(p,v)=>{this.emit(it.RECONNECT_CREATE_CONNECTION,v),await this.createWebSocketConnection(p)};try{if(r==="retry"){const p=this.urls[this.currentURLIndex];this.emit(it.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else if(r==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return await this.reconnectWithAction("recover",!1);U.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex));const p=this.urls[this.currentURLIndex];this.emit(it.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else if(r==="recover"){U.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(it.RECONNECT_WAITTING_FINISH,r),this.urls=await ni(this,it.REQUEST_NEW_URLS),this.currentURLIndex=0;const p=this.urls[this.currentURLIndex];await l(p,r)}return!0}catch(p){var d;return U.error("[".concat(this.name,"] reconnect failed"),p.toString()),p!=null&&(d=p.data)!==null&&d!==void 0&&d.desc&&Array.isArray(p.data.desc)&&p.data.desc.length&&p.data.desc.includes("dynamic key expired")?(this.emit(it.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(r,i)}}async chooseBestWebsocketConnection(r,i,s){return new Pe((l,d)=>{let p=!1;const v=[];this.closeEstablishingWs=()=>{U.debug("[choose-best-ws] close establishing websockets"),v.forEach(q=>{q.onclose=null,q.onopen=null,q.onmessage=null,q.close()}),d(new Q(W.WS_ABORT,"choose best websocket aborted"))};const E=ie("GATEWAY_DOMAINS");let T;const C=r.indexOf("?h="),R=E.find(q=>C!==-1?r.includes(q,C):r.includes(q));U.debug("[choose-best-ws] currentDomain: ",R,", domains: ",E);let L=!this.tryDoubleDomain||i||!R;if(!L&&R){var j;const q=Date.now();try{E.forEach(X=>{const le=C===-1?r.replace(R,X):r.substr(0,C)+r.substr(C).replace(R,X),he=new WebSocket(le);he.binaryType="arraybuffer",v.push(he),U.debug("[choose-best-ws] ws is connecting:",he.url)})}catch{for(U.debug("[choose-best-ws] ws create failed, fallback to single url"),v.forEach(le=>le.close());v.length;)v.pop();L=!0}(j=this.store)===null||j===void 0||j.recordJoinChannelService({urls:v.map(X=>X.url),service:"gateway"},s),v.forEach(X=>{X.onopen=()=>{if(p)return;const le=Date.now()-q;U.debug("[choose-best-ws] ws open cost ".concat(le,"ms")),v.filter(he=>he!==X).forEach(he=>{U.debug("[choose-best-ws]close backup websocket: ".concat(he.url)),he.close()}),p=!0,l(X)},X.onclose=le=>{T=le,!p&&(v.find(he=>!(he.readyState===WebSocket.CLOSED||he.readyState===WebSocket.CLOSING))||(U.debug("[choose-best-ws] all websocket is closed"),p=!0,d(T)))},X.onmessage=le=>{U.debug("[choose-best-ws]".concat(X.url," onmessage: ").concat(le.data))}}),ti(this.forceCloseTimeout).then(()=>{v.forEach(X=>{X.readyState!==WebSocket.OPEN&&X.close()})})}if(L){var Y;let q;U.debug("[choose-best-ws] use single url: ",r),(Y=this.store)===null||Y===void 0||Y.recordJoinChannelService({urls:[r],service:"gateway"},s);try{q=new WebSocket(r),v.push(q),q.binaryType="arraybuffer"}catch(X){const le=new Q(W.WS_ERR,"init websocket failed! Error: ".concat(X.toString()));return U.error("[".concat(this.name,"]").concat(le)),void d(le)}q.onopen=()=>{l(q)},q.onclose=X=>{d(X)},q.onmessage=X=>{U.debug("[choose-best-ws]".concat(q.url," onmessage: ").concat(X.data))},ti(this.forceCloseTimeout).then(()=>{q&&q.readyState!==WebSocket.OPEN&&q.close()})}}).then(l=>(this.closeEstablishingWs=void 0,l)).catch(l=>{throw this.closeEstablishingWs=void 0,l})}}class ID{constructor(r){N(this,"input",[]),N(this,"size",void 0),this.size=r}add(r){this.input.push(r),this.input.length>this.size&&this.input.splice(0,1)}mean(){var r;return this.input.length===0?0:Gc(r=this.input).call(r,(i,s)=>i+s)/this.input.length}}class wD extends In{get connectionState(){return this._connectionState}set connectionState(r){r!==this._connectionState&&(this._connectionState=r,r===Zt.CONNECTED?this.emit($e.WS_CONNECTED):r===Zt.RECONNECTING?this.emit($e.WS_RECONNECTING,this._websocketReconnectReason):r===Zt.CLOSED&&this.emit($e.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(r,i){super(),N(this,"_disconnectedReason",void 0),N(this,"_websocketReconnectReason",void 0),N(this,"_connectionState",Zt.CLOSED),N(this,"reconnectToken",void 0),N(this,"websocket",void 0),N(this,"openConnectionTime",void 0),N(this,"clientId",void 0),N(this,"lastMsgTime",Date.now()),N(this,"uploadCache",[]),N(this,"uploadCacheInterval",void 0),N(this,"rttRolling",new ID(5)),N(this,"pingpongTimer",void 0),N(this,"wsInflateDataTimer",void 0),N(this,"pingpongTimeoutCount",0),N(this,"joinResponse",void 0),N(this,"multiIpOption",void 0),N(this,"initError",void 0),N(this,"spec",void 0),N(this,"store",void 0),N(this,"onWebsocketMessage",s=>{if(s.data instanceof ArrayBuffer)return void this.emit($e.ON_BINARY_DATA,s.data);const l=JSON.parse(s.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const d="res-@".concat(l._id);this.emit(d,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")){if(this.emit(l._type,l._message),l._type===Et.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===Et.ON_USER_BANNED)switch(l._message.error_code){case 14:this.close(Wt.UID_BANNED);break;case 15:this.close(Wt.IP_BANNED);break;case 16:this.close(Wt.CHANNEL_BANNED)}if(l._type===Et.ON_USER_LICENSE_BANNED)switch(l._message.error_code){case Ke.ERR_LICENSE_MISSING:this.close(Wt.LICENSE_MISSING);break;case Ke.ERR_LICENSE_EXPIRED:this.close(Wt.LICENSE_EXPIRED);break;case Ke.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Wt.LICENSE_MINUTES_EXCEEDED);break;case Ke.ERR_LICENSE_PERIOD_INVALID:this.close(Wt.LICENSE_PERIOD_INVALID);break;case Ke.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Wt.LICENSE_MULTIPLE_SDK_SERVICE);break;case Ke.ERR_LICENSE_ILLEGAL:this.close(Wt.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=r.clientId,this.spec=r,this.store=i,this.websocket=new du("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,i),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Zt.CONNECTED&&this.reconnect("retry",Li.OFFLINE)})}async request(r,i,s,l){const d=fn(6,""),p={_id:d,_type:r,_message:i},v=this.websocket.connectionID,E=()=>new Pe((Y,q)=>{if(this.connectionState===Zt.CONNECTED)return Y();const X=()=>{this.off($e.WS_CLOSED,le),Y()},le=()=>{this.off($e.WS_CONNECTED,X),q(new Q(W.WS_ABORT))};this.once($e.WS_CONNECTED,X),this.once($e.WS_CLOSED,le),r!==Je.PUBLISH&&r!==Je.SUBSCRIBE&&r!==Je.UNSUBSCRIBE&&r!==Je.UNPUBLISH&&r!==Je.CONTROL&&r!==Je.RESTART_ICE||this.once($e.DISCONNECT_P2P,()=>{q(new Q(W.DISCONNECT_P2P))}),r!==Je.PUBLISH&&r!==Je.RESTART_ICE||this.once($e.ABORT_P2P_EXECUTION,()=>{q(new Q(W.DISCONNECT_P2P))})});if(this.connectionState!==Zt.CONNECTING&&this.connectionState!==Zt.RECONNECTING||r===Je.JOIN||r===Je.REJOIN||await E(),this.websocket.sendMessage(p,!0),l)return;const T=new Pe((Y,q)=>{let X=!1;const le=(ye,ke)=>{X=!0,Y({isSuccess:ye==="success",message:ke||{}}),this.off($e.WS_CLOSED,he),this.off($e.WS_RECONNECTING,he),this.emit($e.REQUEST_SUCCESS,r,i)};this.once("res-@".concat(d),le);const he=()=>{q(new Q(W.WS_ABORT,"type: ".concat(r))),this.off($e.WS_CLOSED,he),this.off($e.WS_RECONNECTING,he),this.off("res-@".concat(d),le)};this.once($e.WS_CLOSED,he),this.once($e.WS_RECONNECTING,he),ti(ie("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==v||X||(U.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(r)),this.emit($e.REQUEST_TIMEOUT,r,i))})});let C=null;try{C=await T}catch(Y){if(this.connectionState===Zt.CLOSED||r===Je.LEAVE)throw new Q(W.WS_ABORT);return!this.spec.forceWaitGatewayResponse||s?Y.throw():r===Je.JOIN||r===Je.REJOIN?null:(await E(),await this.request(r,i))}if(C.isSuccess)return C.message;const R=Number(C.message.error_code||C.message.code),L=kp(R),j=new Q(W.UNEXPECTED_RESPONSE,"".concat(L.desc,": ").concat(C.message.error_str),{code:R,data:C.message});return L.action==="success"?C.message:(U.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(r,", error_code: ").concat(R,", message: ").concat(L.desc,", action: ").concat(L.action)),R===Ke.ERR_TOO_MANY_BROADCASTERS?((r===Je.JOIN||r===Je.REJOIN)&&(this.initError=j,this.close()),j.throw()):L.action==="failed"?j.throw():L.action==="quit"?(this.initError=j,this.close(),j.throw()):(R===Ke.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=C.message.option,U.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Li.MULTI_IP)):this.reconnect(L.action,Li.SERVER_ERROR),r===Je.JOIN||r===Je.REJOIN?null:await this.request(r,i)))}waitMessage(r,i){return new Pe(s=>{const l=d=>{(!i||i(d))&&(this.off(r,l),s(d))};this.on(r,l)})}upload(r,i){const s={_type:r,_message:i};try{this.websocket.sendMessage(s)}catch{const d=ie("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(s),this.uploadCache.length>d&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Zt.CONNECTED)return;const p=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(p._type,p._message)},ie("UPLOAD_CACHE_INTERVAL")||2e3))}}send(r,i){const s={_type:r,_message:i};this.websocket.sendMessage(s)}init(r,i){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Pe((s,l)=>{this.once($e.WS_CONNECTED,()=>s(this.joinResponse)),this.once($e.WS_CLOSED,()=>l(this.initError||new Q(W.WS_ABORT))),this.connectionState=Zt.CONNECTING,this.websocket.init(r).catch(l),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4),setTimeout(()=>{i&&this.openConnectionTime===void 0&&(U.debug("[".concat(this.clientId,"] init websocket timeout while join with fallback to proxy")),l(new Q(W.INIT_WEBSOCKET_TIMEOUT)))},ie("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))})}close(r){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=r||Wt.LEAVE,this.connectionState=Zt.CLOSED,U.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),r===Wt.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new du("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit($e.ABORT_P2P_EXECUTION);const r=await ni(this,$e.REQUEST_JOIN_INFO),i=await this.request(Je.JOIN,r);if(!i)return this.emit($e.REPORT_JOIN_GATEWAY,W.TIMEOUT,this.url||""),!1;this.joinResponse=i,this.emit($e.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new Q(W.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const r=uu(this,$e.REQUEST_REJOIN_INFO);r.token=this.reconnectToken;const i=await this.request(Je.REJOIN,r);return!!i&&(this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),i.peers&&i.peers.forEach(s=>{this.emit(Et.ON_USER_ONLINE,{uid:s.uid}),s.audio&&this.emit(Et.ON_ADD_AUDIO_STREAM,{uid:s.uid,uint_id:s.uint_id,audio:!0,ssrcId:s.audio_ssrc}),s.video&&this.emit(Et.ON_ADD_VIDEO_STREAM,{uid:s.uid,uint_id:s.uint_id,video:!0,ssrcId:s.video_ssrc}),s.audio_mute?this.emit(Et.MUTE_AUDIO,{uid:s.uid}):this.emit(Et.UNMUTE_AUDIO,{uid:s.uid}),s.video_mute?this.emit(Et.MUTE_VIDEO,{uid:s.uid}):this.emit(Et.UNMUTE_VIDEO,{uid:s.uid}),s.audio_enable_local?this.emit(Et.ENABLE_LOCAL_AUDIO,{uid:s.uid}):this.emit(Et.DISABLE_LOCAL_AUDIO,{uid:s.uid}),s.video_enable_local?this.emit(Et.ENABLE_LOCAL_VIDEO,{uid:s.uid}):this.emit(Et.DISABLE_LOCAL_VIDEO,{uid:s.uid}),s.audio||s.video||this.emit(Et.ON_REMOVE_STREAM,{uid:s.uid,uint_id:s.uint_id})}),!0)}reconnect(r,i){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(r,i)}handleNotification(r){U.debug("[".concat(this.clientId,"] receive notification: "),r);const i=kp(r.code);if(i.action!=="success"){if(i.action!=="failed")return i.action==="quit"?(i.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Wt.UID_BANNED),void this.close()):void this.reconnect(i.action,Li.SERVER_ERROR);U.error("[".concat(this.clientId,"] ignore error: "),i.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const r=ie("PING_PONG_TIME_OUT"),i=Date.now();this.pingpongTimeoutCount>=r&&(U.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(i-this.lastMsgTime,"ms")),i-this.lastMsgTime>ie("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Li.TIMEOUT):this.request(Je.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const s=Date.now()-i;this.rttRolling.add(s),ie("REPORT_STATS")&&this.send(Je.PING_BACK,{pingpongElapse:s})}).catch(s=>{})}handleWsInflateData(){const{wsInflateLength:r,wsDeflateLength:i}=this.websocket.getWsInflateData();r!==0&&i!==0&&this.upload(mo.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:i,ws_inflate_length:r})}handleWebsocketEvents(){this.websocket.on(it.RECONNECT_WAITTING_FINISH,r=>{this.emit($e.WS_RECONNECT_WAITTING_FINISH,r)}),this.websocket.on(it.RECONNECT_CREATE_CONNECTION,r=>{this.emit($e.WS_RECONNECT_CREATE_CONNECTION,r)}),this.websocket.on(it.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(it.CLOSED,()=>{this.connectionState=Zt.CLOSED}),this.websocket.on(it.FAILED,()=>{this._disconnectedReason=Wt.NETWORK_ERROR,this.connectionState=Zt.CLOSED}),this.websocket.on(it.RECONNECTING,r=>{this._websocketReconnectReason=r,this.joinResponse=void 0,this.connectionState===Zt.CONNECTED?this.connectionState=Zt.RECONNECTING:this.connectionState=Zt.CONNECTING}),this.websocket.on(it.WILL_RECONNECT,(r,i)=>{if(uu(this,$e.IS_P2P_DISCONNECTED)&&r==="retry")return U.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit($e.NEED_RENEW_SESSION),this.emit($e.DISCONNECT_P2P),i("tryNext");r!=="retry"&&(U.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(r)),this.reconnectToken=void 0,this.emit($e.NEED_RENEW_SESSION),this.emit($e.DISCONNECT_P2P)),i(r)}),this.websocket.on(it.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(r=>{U.warning("[".concat(this.clientId,"] rejoin failed ").concat(r)),this.reconnect("tryNext",Li.SERVER_ERROR)}):this.join().catch(r=>{if(this.emit($e.REPORT_JOIN_GATEWAY,r.message||r.code,this.url||""),r instanceof Q&&r.code===W.UNEXPECTED_RESPONSE&&r.data.code===Ke.ERR_NO_AUTHORIZED)return U.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Li.SERVER_ERROR);U.error("[".concat(this.clientId,"] join gateway request failed"),r.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Li.SERVER_ERROR):(this.initError=r,this.close())})}),this.websocket.on(it.REQUEST_NEW_URLS,(r,i)=>{ni(this,$e.REQUEST_RECOVER,this.multiIpOption).then(r).catch(i)}),this.websocket.on(it.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(Et.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}}function OD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}class QY extends In{get url(){return this._url?this._url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(r){["tryNext","recover"].includes(r)&&this.resetReconnectCount(r),this._reconnectMode=r}get state(){return this._state}set state(r){r!==this._state&&(this._state=r,this._state==="reconnecting"?this.emit(kn.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(kn.CONNECTED):this._state==="closed"?this.emit(kn.CLOSED):this._state==="failed"&&this.emit(kn.FAILED))}constructor(r,i,s,l){super(),N(this,"connectionID",0),N(this,"currentURLIndex",0),N(this,"reconnectReason",void 0),N(this,"_reconnectMode","tryNext"),N(this,"_initMutex",void 0),N(this,"_name",void 0),N(this,"_state","closed"),N(this,"_reconnectInterrupter",void 0),N(this,"_url",void 0),N(this,"_retryConfig",void 0),N(this,"_reconnectCount",0),N(this,"_forceCloseTimeout",5e3),N(this,"_onlineReconnectListener",void 0),N(this,"_closeEstablishingTransmitter",()=>{}),N(this,"_store",void 0),N(this,"_joinChannelServiceRecordIndex",void 0),N(this,"_transmitter",void 0),N(this,"_useCompress",void 0),N(this,"_inflateLength",0),N(this,"_deflateLength",0),this._store=l,this._name=r,this._retryConfig=function(d){for(var p=1;p<arguments.length;p++){var v=arguments[p]!=null?arguments[p]:{};p%2?OD(Object(v),!0).forEach(function(E){N(d,E,v[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(v)):OD(Object(v)).forEach(function(E){Object.defineProperty(d,E,Object.getOwnPropertyDescriptor(v,E))})}return d}({},i),this._useCompress=s}resetReconnectCount(r){U.debug("".concat(this._name," reset reconnect count, reason: ").concat(r)),this._reconnectCount=0}close(r,i){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;const s=this._transmitter;i?setTimeout(()=>s.close(),500):s.close(),this._transmitter=void 0}this.state=r?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()}reconnect(r,i){if(!this._transmitter)return void U.warning("[".concat(this._name,"] can not reconnect, no websocket"));var s;r!==void 0&&(this.reconnectMode=r),U.debug("[".concat(this._name,"] reconnect is triggered initiative")),typeof this._joinChannelServiceRecordIndex=="number"&&((s=this._store)===null||s===void 0||s.recordJoinChannelService({status:"error",errors:[new Error(i)]},this._joinChannelServiceRecordIndex));const l=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),l&&l.bind(this._transmitter)({code:9999,reason:i})}getInflateData(){const r=this._inflateLength,i=this._deflateLength;return this.clearInflateData(),{inflateLength:r,deflateLength:i}}setInflateData(r){this._deflateLength=this._deflateLength+r.originLength,this._inflateLength=this._inflateLength+r.compressedLength}clearInflateData(){this._inflateLength=0,this._deflateLength=0}}function AD(n,r,i){if("getBigUint64"in DataView.prototype)return n.getBigUint64(r,i);const s=n.getUint32(r,i),l=n.getUint32(r+4,i),d=+!!i,p=+!i;return BigInt(s*p+l*d)<<BigInt(32)|BigInt(s*d+l*p)}function ND(n,r,i,s){if("setBigUint64"in DataView.prototype)return n.setBigUint64(r,i,s);const l=Number(i>>BigInt(32)),d=Number(i&BigInt(4294967295));s?(n.setUint32(r+4,l,s),n.setUint32(r,d,s)):(n.setUint32(r,l,s),n.setUint32(r+4,d,s))}let na;(function(n){n[n.Default=0]="Default",n[n.Ack=1]="Ack"})(na||(na={}));class ZY{constructor(r,i,s){N(this,"version",1),N(this,"initialRTO",void 0),N(this,"maxBatchAckCount",void 0),N(this,"maxRTO",void 0),N(this,"initialRTT",void 0),N(this,"ID",void 0),N(this,"rtt",void 0),N(this,"packetNumber",1),N(this,"rtoRatioMap",new Map),N(this,"timeoutMap",new Map),N(this,"unorderedPacketQueue",[]),N(this,"batchAckPacketQueue",[]),N(this,"lastOrderedPacketNumber",0),N(this,"batchAckTimer",void 0),N(this,"sendImpl",void 0),N(this,"receiveImpl",void 0),this.sendImpl=r,this.receiveImpl=i,this.ID=fn(7,"transmitter-"),this.initialRTO=(s==null?void 0:s.initialRTO)!==void 0?s.initialRTO:ie("TRANSMITTER_INITIAL_RTO"),this.initialRTT=(s==null?void 0:s.initialRTT)!==void 0?s.initialRTT:ie("TRANSMITTER_INITIAL_RTT"),this.rtt=(s==null?void 0:s.initialRTT)!==void 0?s.initialRTT:ie("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=(s==null?void 0:s.maxBatchAckCount)!==void 0?s.maxBatchAckCount:ie("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=(s==null?void 0:s.maxRTO)!==void 0?s.maxRTO:ie("TRANSMITTER_MAX_RTO")}packetize(r,i){return{type:na.Default,version:this.version,packetNumber:i,payload:r}}serialize(r){switch(r.type){case na.Default:{let i;typeof r.payload=="string"?i=new TextEncoder().encode(r.payload):i=r.payload;const s=new ArrayBuffer(i.length+15),l=new DataView(s);return l.setUint16(0,r.version),l.setUint8(2,r.type),l.setUint32(3,r.packetNumber),ND(l,7,BigInt(r.sendTs)),new Uint8Array(l.buffer).set(i,15),s}case na.Ack:{const i=new ArrayBuffer(16),s=new DataView(i);return s.setUint16(0,r.version),s.setUint8(2,r.type),s.setUint32(3,r.maxAckPacketNumber),s.setUint8(7,r.shift),ND(s,8,BigInt(r.ackSendTs)),i}}}deserialize(r){const i=new DataView(r),s=i.getUint16(0),l=i.getUint8(2);switch(l){case na.Default:{const d=i.getUint32(3),p=AD(i,7),v=r.slice(15),E=new TextDecoder().decode(v);return{version:s,type:l,packetNumber:d,sendTs:Number(p),payload:E}}case na.Ack:{const d=i.getUint32(3),p=i.getUint8(7),v=AD(i,8);return{version:s,type:l,maxAckPacketNumber:d,shift:p,ackSendTs:Number(v)}}default:throw U.error("[".concat(this.ID,"] Unrecognized packet type ").concat(l)),new Error("Unrecognized packet type ".concat(l))}}sendMessage(r){const i=this.packetize(r,this.packetNumber);this.packetNumber=this.packetNumber===4294967295?1:this.packetNumber+1;const s=this.calculateRTO(i),l=window.setTimeout(()=>{this.resendMessage(i)},s);this.timeoutMap.set(i.packetNumber,l),this.sendPacket(i)}onData(r){const i=this.deserialize(r);i.type===na.Default?this.ack(i):i.type===na.Ack&&(this.updateRTT(i,Math.round(performance.now())),this.clearRTO(i))}close(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach(r=>{let[i,s]=r;window.clearTimeout(s)}),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,this.batchAckTimer!==void 0&&window.clearTimeout(this.batchAckTimer)}resendMessage(r){const i=this.calculateRTO(r),s=window.setTimeout(()=>{this.resendMessage(r)},i);this.timeoutMap.set(r.packetNumber,s),this.sendPacket(r)}calculateRTO(r){const i=this.rtoRatioMap.get(r.packetNumber);if(i===void 0)return this.rtoRatioMap.set(r.packetNumber,1),this.initialRTO;{const s=9*this.rtt/8*i;return this.rtoRatioMap.set(r.packetNumber,i+1),s>this.maxRTO?this.maxRTO:s}}updateRTT(r,i){const s=r.ackSendTs;this.rtt=this.rtt*(7/8)+(i-s-this.rtt)/8}ack(r){if(r.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(r):(this.batchAckPacketQueue.push(r),this.batchAckTimer=window.setTimeout(()=>{this.batchAck()},this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(r.payload);;){const i=this.unorderedPacketQueue[0];if(!i){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl(i.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else if(r.packetNumber<=this.lastOrderedPacketNumber){const i={ackSendTs:r.sendTs,maxAckPacketNumber:r.packetNumber,shift:0,type:na.Ack,version:this.version};this.sendPacket(i)}else if(r.packetNumber>this.lastOrderedPacketNumber){this.unorderedPacketQueue[r.packetNumber-this.lastOrderedPacketNumber-2]=r;const i={ackSendTs:r.sendTs,maxAckPacketNumber:r.packetNumber,shift:0,type:na.Ack,version:this.version};this.sendPacket(i)}}batchAck(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0;const r={ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:na.Ack,version:this.version};this.sendPacket(r),this.batchAckPacketQueue=[]}sendPacket(r){r.type===na.Default&&(r.sendTs=Math.round(performance.now()));const i=this.serialize(r);this.sendImpl(i)}clearRTO(r){for(let i=r.maxAckPacketNumber-r.shift;i<=r.maxAckPacketNumber;i++){const s=this.timeoutMap.get(i);s!==void 0&&window.clearTimeout(s),this.timeoutMap.delete(i),this.rtoRatioMap.delete(i)}}}class xD extends QY{constructor(r,i){super(r,i,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3?arguments[3]:void 0),N(this,"_initMutex",void 0),N(this,"_reconnectInterrupter",void 0),N(this,"_url",void 0),N(this,"_transmitter",void 0),N(this,"_addresses",void 0),N(this,"_reliableTransmission",void 0),this._initMutex=new Ri("datachannel");const{timeout:s,timeoutFactor:l}=i,d=Math.max(300,Math.floor(3*s/5)),p=Math.max(1.2,Math.floor(8*l)/10);ui.ONLINE&&(this._retryConfig.timeout=d,this._retryConfig.timeoutFactor=p),tr.on(Zc.NETWORK_STATE_CHANGE,(v,E)=>{v!==E&&(this.resetReconnectCount("network state change: ".concat(E," -> ").concat(v)),v===ui.ONLINE?(this._retryConfig.timeout=d,this._retryConfig.timeoutFactor=p):(this._retryConfig.timeout=s,this._retryConfig.timeoutFactor=l))})}getConnection(){if(this._reliableTransmission)return this._reliableTransmission}async init(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;this._forceCloseTimeout=i;const s=(l,d)=>{this._addresses=r,this.currentURLIndex=this._addresses.findIndex(v=>v.fingerprint||ie("FINGERPRINT"));const p=this._addresses[this.currentURLIndex];this.state="connecting",this.createTransmitterConnection(p).then(l).catch(d),this.once(kn.CLOSED,()=>d(new Q(W.WS_DISCONNECT))),this.once(kn.CONNECTED,()=>l())};return this._initMutex.lock().then(l=>new Pe((d,p)=>{s(d,p)}).then(()=>{l()}).catch(()=>{l()}))}sendMessage(r){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new Q(W.WS_ABORT,"datachannel is not ready");try{i||(r=JSON.stringify(r)),this._reliableTransmission.sendMessage(r)}catch(s){throw new Q(W.WS_ERR,"send datachannel signal message error"+s.toString())}}unbindDcCloseEventListener(){this._transmitter&&(this._transmitter.onclose=null)}sendMessageWithJSON(r){const i=JSON.stringify(r);return{compressed:i,compressedLength:i.length,origin:r}}sendMessageWithUint8Array(r){return{compressed:r,compressedLength:r.byteLength,origin:r}}createTransmitterConnection(r){return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(r.ip,":").concat(r.port),new Pe((i,s)=>{var l;const d=()=>{U.debug("[".concat(this._name,"] datachannel opened:"),this._url),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),i()},p=async C=>{var R;if((R=this._closeEstablishingTransmitter)===null||R===void 0||R.call(this),U.debug("[".concat(this._name,"] datachannel close ").concat(this._url,", code: ").concat(C.code,", reason: ").concat(C.reason,", current mode: ").concat(this.reconnectMode)),this._reconnectCount<this._retryConfig.maxRetryCount){this.state==="connected"&&(this.reconnectReason=C.reason,this.state="reconnecting");const L=Aa(this,kn.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,j=await this.reconnectWithAction(L);if(this.state==="closed")return void U.debug("[".concat(this.connectionID,"] dc is closed, no need to reconnect"));if(!j)return s(new Q(W.WS_DISCONNECT,"datachannel reconnect failed: ".concat(C.code))),void this.close(!0);i()}else s(new Q(W.WS_DISCONNECT,"datachannel close: ".concat(C.code))),this.close()},v=C=>{var R;(R=this._reliableTransmission)===null||R===void 0||R.onData(C.data)};this._transmitter&&(this._transmitter.onclose=null,this._transmitter.close()),this._reliableTransmission&&(this._reliableTransmission.close(),this._reliableTransmission=void 0),U.debug("[".concat(this._name,"] start connect, address: ").concat(JSON.stringify(r)));const E=(l=this._store)===null||l===void 0?void 0:l.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),T=Date.now();ni(this,kn.TO_CONNECT_DATACHANNEL,r).then(C=>{var R,L;if(!C)throw new Error("transmissonInfo not exist yet");const{transmitter:j,close:Y}=C;this._transmitter=j,(R=this._store)===null||R===void 0||R.signalChannelOpen();const q=Date.now()-T;U.debug("[choose dc] dc open cost ".concat(q,"ms")),this._reliableTransmission=new ZY(X=>{var le;this._transmitter&&this._transmitter.readyState==="open"&&((le=this._transmitter)===null||le===void 0||le.send(X))},X=>{typeof X=="string"&&this.emit(kn.ON_MESSAGE,X)}),this._closeEstablishingTransmitter=()=>{var X;(X=this._reliableTransmission)===null||X===void 0||X.close(),this._reliableTransmission=void 0,Y()},d&&d(),j.onclose=p,j.onmessage=v,(L=this._store)===null||L===void 0||L.recordJoinChannelService({endTs:Date.now(),status:"success"},E),this._joinChannelServiceRecordIndex=E}).catch(C=>{var R;if((R=this._store)===null||R===void 0||R.recordJoinChannelService({endTs:Date.now(),status:C instanceof Q&&C.code===W.WS_ABORT?"aborted":"error",errors:[C]},E),this.state!=="closed"){if(C instanceof Q&&C.code===W.WS_ERR){const L=new Q(W.WS_ERR,"init datachannel failed! Error: ".concat(C.toString()));return U.error("[".concat(this._name,"]").concat(L)),void s(L)}p&&p(C)}else s(new Q(W.WS_DISCONNECT,"datachannel is closed: ".concat(C.toString())))})})}async reconnectWithAction(r){let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this._reconnectCount>=this._retryConfig.maxRetryCount||!this._addresses||this.state==="closed")return!1;this._onlineReconnectListener||tr.networkState!==ui.OFFLINE||(this._onlineReconnectListener=tr.onlineWaiter&&tr.onlineWaiter.then(()=>{this._onlineReconnectListener=void 0}));let s=!0;if(this._reconnectInterrupter=()=>{s=!1},i){const p=sy(this._reconnectCount,this._retryConfig);U.debug("[".concat(this._name,"] wait ").concat(p,"ms to reconnect datachannel, mode: ").concat(r)),await Pe.race([ti(p),this._onlineReconnectListener||new Pe(()=>{})])}if(this.state==="closed"||!s)return!1;this._reconnectCount+=1;const l=async(p,v)=>{this.emit(kn.RECONNECT_CREATE_CONNECTION,v),await this.createTransmitterConnection(p)};try{if(r==="retry"){const p=this._addresses[this.currentURLIndex];this.emit(kn.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else if(r==="tryNext"){this.currentURLIndex+=1;for(let v=this.currentURLIndex;v<this._addresses.length;v++){if(this._addresses[v].fingerprint||ie("FINGERPRINT")){this.currentURLIndex=v;break}this.currentURLIndex+=1}if(this.currentURLIndex>=this._addresses.length)return U.debug("[".concat(this._name,"] the available addresses are exhausted, change to recover")),await this.reconnectWithAction("recover",!1);U.debug("[".concat(this._name,"] datachannel url length: ").concat(this._addresses.length," current index: ").concat(this.currentURLIndex));const p=this._addresses[this.currentURLIndex];this.emit(kn.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else r==="recover"&&(U.debug("[".concat(this._name,"] start to failback to websocket")),this.resetReconnectCount("recover mode"),this.emit(kn.RECONNECT_WAITTING_FINISH,r),this.emit(kn.FAILBACK));return!0}catch(p){var d;return U.error("[".concat(this._name,"] reconnect failed"),p.toString()),p!=null&&(d=p.data)!==null&&d!==void 0&&d.desc&&Array.isArray(p.data.desc)&&p.data.desc.length&&p.data.desc.includes("dynamic key expired")?(this.emit(kn.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(r,i)}}}class dc extends In{get connectionState(){return this._connectionState}set connectionState(r){r!==this._connectionState&&(this._connectionState=r,r===Zt.CONNECTED?this.emit($e.WS_CONNECTED):r===Zt.RECONNECTING?this.emit($e.WS_RECONNECTING,this._websocketReconnectReason):r===Zt.CLOSED&&this.emit($e.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(r,i){super(),N(this,"_disconnectedReason",void 0),N(this,"_websocketReconnectReason",void 0),N(this,"_connectionState",Zt.CLOSED),N(this,"reconnectToken",void 0),N(this,"websocket",void 0),N(this,"openConnectionTime",void 0),N(this,"clientId",void 0),N(this,"lastMsgTime",Date.now()),N(this,"uploadCache",[]),N(this,"uploadCacheInterval",void 0),N(this,"rttRolling",new ID(5)),N(this,"pingpongTimer",void 0),N(this,"inflateDataTimer",void 0),N(this,"pingpongTimeoutCount",0),N(this,"joinResponse",void 0),N(this,"multiIpOption",void 0),N(this,"initError",void 0),N(this,"spec",void 0),N(this,"store",void 0),N(this,"onWebsocketMessage",s=>{if(s instanceof ArrayBuffer)return void this.emit($e.ON_BINARY_DATA,s);const l=JSON.parse(s);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const d="res-@".concat(l._id);this.emit(d,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")&&(this.emit(l._type,l._message),l._type===Et.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===Et.ON_USER_BANNED))switch(l._message.error_code){case 14:this.close(Wt.UID_BANNED);break;case 15:this.close(Wt.IP_BANNED);break;case 16:this.close(Wt.CHANNEL_BANNED)}}),this.clientId=r.clientId,this.spec=r,this.store=i,this.websocket=new xD("gateway-".concat(this.clientId),this.spec.retryConfig,!0,i),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Zt.CONNECTED&&this.reconnect("retry",Ds.OFFLINE)})}async request(r,i,s,l){const d=fn(6,""),p={_id:d,_type:r,_message:i},v=this.websocket.connectionID,E=()=>new Pe((Y,q)=>{if(this.connectionState===Zt.CONNECTED)return Y();const X=()=>{this.off($e.WS_CLOSED,le),Y()},le=()=>{this.off($e.WS_CONNECTED,X),q(new Q(W.WS_ABORT))};this.once($e.WS_CONNECTED,X),this.once($e.WS_CLOSED,le),r!==Je.PUBLISH&&r!==Je.SUBSCRIBE&&r!==Je.UNSUBSCRIBE&&r!==Je.UNPUBLISH&&r!==Je.CONTROL&&r!==Je.RESTART_ICE||this.once($e.DISCONNECT_P2P,()=>{q(new Q(W.DISCONNECT_P2P))}),r!==Je.PUBLISH&&r!==Je.RESTART_ICE||this.once($e.ABORT_P2P_EXECUTION,()=>{q(new Q(W.DISCONNECT_P2P))})});if(this.connectionState!==Zt.CONNECTING&&this.connectionState!==Zt.RECONNECTING||r===Je.JOIN||r===Je.REJOIN||await E(),r===Je.LEAVE&&(this.websocket.unbindDcCloseEventListener(),l=!0),this.websocket.sendMessage(p,!0,!1),l)return;const T=new Pe((Y,q)=>{let X=!1;const le=(ye,ke)=>{X=!0,Y({isSuccess:ye==="success",message:ke||{}}),this.off($e.WS_CLOSED,he),this.off($e.WS_RECONNECTING,he),this.emit($e.REQUEST_SUCCESS,r,i)};this.once("res-@".concat(d),le);const he=()=>{q(new Q(W.WS_ABORT,"type: ".concat(r))),this.off($e.WS_CLOSED,he),this.off($e.WS_RECONNECTING,he),this.off("res-@".concat(d),le)};this.once($e.WS_CLOSED,he),this.once($e.WS_RECONNECTING,he),ti(ie("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==v||X||(U.warning("dc request timeout, type: ".concat(r)),this.emit($e.REQUEST_TIMEOUT,r,i))})});let C=null;try{C=await T}catch(Y){if(this.connectionState===Zt.CLOSED||r===Je.LEAVE)throw new Q(W.WS_ABORT);return!this.spec.forceWaitGatewayResponse||s?Y.throw():r===Je.JOIN||r===Je.REJOIN?null:(await E(),await this.request(r,i))}if(C.isSuccess)return C.message;const R=Number(C.message.error_code||C.message.code),L=kp(R),j=new Q(W.UNEXPECTED_RESPONSE,"".concat(L.desc,": ").concat(C.message.error_str),{code:R,data:C.message});return L.action==="success"?C.message:(U.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(r,", error_code: ").concat(R,", message: ").concat(L.desc,", action: ").concat(L.action)),R===Ke.ERR_TOO_MANY_BROADCASTERS?((r===Je.JOIN||r===Je.REJOIN)&&(this.initError=j,this.close()),j.throw()):L.action==="failed"?j.throw():L.action==="quit"?(this.initError=j,this.close(),j.throw()):(R===Ke.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=C.message.option,U.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Ds.MULTI_IP)):this.reconnect(L.action,Ds.SERVER_ERROR),r===Je.JOIN||r===Je.REJOIN?null:await this.request(r,i)))}waitMessage(r,i){return new Pe(s=>{const l=d=>{(!i||i(d))&&(this.off(r,l),s(d))};this.on(r,l)})}upload(r,i){const s={_type:r,_message:i};try{this.websocket.sendMessage(s)}catch{const d=ie("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(s),this.uploadCache.length>d&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Zt.CONNECTED)return;const p=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(p._type,p._message)},ie("UPLOAD_CACHE_INTERVAL")||2e3))}}send(r,i){const s={_type:r,_message:i};this.websocket.sendMessage(s)}init(r,i){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Pe((s,l)=>{this.once($e.WS_CONNECTED,()=>s(this.joinResponse)),this.once($e.WS_CLOSED,()=>l(this.initError||new Q(W.WS_ABORT))),this.connectionState=Zt.CONNECTING,this.websocket.init(r).catch(l),this.websocket.once(kn.FAILBACK,()=>{this.openConnectionTime===void 0&&l(new Q(W.INIT_DATACHANNEL_TIMEOUT))}),this.inflateDataTimer&&window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=window.setInterval(()=>{this.handleInflateData()},2e4),setTimeout(()=>{i&&this.openConnectionTime===void 0&&(U.debug("[".concat(this.clientId,"] init datachannel timeout while join with failback to websocket")),l(new Q(W.INIT_DATACHANNEL_TIMEOUT)))},ie("DC_JOIN_WITH_FAILBACK"))})}close(r){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=r||Wt.LEAVE,this.connectionState=Zt.CLOSED,U.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),r===Wt.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new xD("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit($e.ABORT_P2P_EXECUTION);const r=await ni(this,$e.DATACHANNEL_CONNECTING),i=await this.request(Je.JOIN,r);if(!i)return this.emit($e.REPORT_JOIN_GATEWAY,W.TIMEOUT,this.url||""),!1;this.joinResponse=i,this.emit($e.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new Q(W.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const r=uu(this,$e.REQUEST_REJOIN_INFO);r.token=this.reconnectToken;const i=await this.request(Je.REJOIN,r);return!!i&&(this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),i.peers&&i.peers.forEach(s=>{this.emit(Et.ON_USER_ONLINE,{uid:s.uid}),s.audio&&this.emit(Et.ON_ADD_AUDIO_STREAM,{uid:s.uid,uint_id:s.uint_id,audio:!0,ssrcId:s.audio_ssrc}),s.video&&this.emit(Et.ON_ADD_VIDEO_STREAM,{uid:s.uid,uint_id:s.uint_id,video:!0,ssrcId:s.video_ssrc}),s.audio_mute?this.emit(Et.MUTE_AUDIO,{uid:s.uid}):this.emit(Et.UNMUTE_AUDIO,{uid:s.uid}),s.video_mute?this.emit(Et.MUTE_VIDEO,{uid:s.uid}):this.emit(Et.UNMUTE_VIDEO,{uid:s.uid}),s.audio_enable_local?this.emit(Et.ENABLE_LOCAL_AUDIO,{uid:s.uid}):this.emit(Et.DISABLE_LOCAL_AUDIO,{uid:s.uid}),s.video_enable_local?this.emit(Et.ENABLE_LOCAL_VIDEO,{uid:s.uid}):this.emit(Et.DISABLE_LOCAL_VIDEO,{uid:s.uid}),s.audio||s.video||this.emit(Et.ON_REMOVE_STREAM,{uid:s.uid,uint_id:s.uint_id})}),!0)}reconnect(r,i){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(r,i)}handleNotification(r){U.debug("[".concat(this.clientId,"] receive notification: "),r);const i=kp(r.code);if(i.action!=="success"){if(i.action!=="failed")return i.action==="quit"?(i.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Wt.UID_BANNED),void this.close()):void this.reconnect(i.action,Ds.SERVER_ERROR);U.error("[".concat(this.clientId,"] ignore error: "),i.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const r=ie("PING_PONG_TIME_OUT"),i=Date.now();this.pingpongTimeoutCount>=r&&(U.warning("PINGPONG Timeout. Last Socket Message: ".concat(i-this.lastMsgTime,"ms")),i-this.lastMsgTime>ie("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Ds.TIMEOUT):this.request(Je.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const s=Date.now()-i;this.rttRolling.add(s),ie("REPORT_STATS")&&this.send(Je.PING_BACK,{pingpongElapse:s})}).catch(s=>{})}handleInflateData(){const{inflateLength:r,deflateLength:i}=this.websocket.getInflateData();r!==0&&i!==0&&this.upload(mo.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:i,ws_inflate_length:r})}handleWebsocketEvents(){this.websocket.on(kn.RECONNECT_WAITTING_FINISH,r=>{this.emit($e.WS_RECONNECT_WAITTING_FINISH,r)}),this.websocket.on(kn.RECONNECT_CREATE_CONNECTION,r=>{this.emit($e.WS_RECONNECT_CREATE_CONNECTION,r)}),this.websocket.on(kn.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(kn.CLOSED,()=>{this.connectionState=Zt.CLOSED}),this.websocket.on(kn.FAILED,()=>{this._disconnectedReason=Wt.NETWORK_ERROR,this.connectionState=Zt.CLOSED}),this.websocket.on(kn.RECONNECTING,r=>{this._websocketReconnectReason=r,this.joinResponse=void 0,this.connectionState===Zt.CONNECTED?this.connectionState=Zt.RECONNECTING:this.connectionState=Zt.CONNECTING}),this.websocket.on(kn.WILL_RECONNECT,(r,i)=>{if(uu(this,$e.IS_P2P_DISCONNECTED)&&r==="retry")return U.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit($e.NEED_RENEW_SESSION),this.emit($e.DISCONNECT_P2P),i("tryNext");r!=="retry"&&(U.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(r)),this.reconnectToken=void 0,this.emit($e.NEED_RENEW_SESSION),this.emit($e.DISCONNECT_P2P)),i(r)}),this.websocket.on(kn.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(r=>{U.warning("[".concat(this.clientId,"] rejoin failed ").concat(r)),this.reconnect("tryNext",Ds.SERVER_ERROR)}):this.join().catch(r=>{if(this.emit($e.REPORT_JOIN_GATEWAY,r.message||r.code,this.url||""),r instanceof Q&&r.code===W.UNEXPECTED_RESPONSE&&r.data.code===Ke.ERR_NO_AUTHORIZED)return U.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Ds.SERVER_ERROR);U.error("[".concat(this.clientId,"] join gateway request failed"),r.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Ds.SERVER_ERROR):(this.initError=r,this.close())})}),this.websocket.on(kn.REQUEST_NEW_URLS,(r,i)=>{ni(this,$e.REQUEST_RECOVER,this.multiIpOption).then(r).catch(i)}),this.websocket.on(kn.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(Et.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(kn.TO_CONNECT_DATACHANNEL,async(r,i,s)=>ni(this,$e.DATACHANNEL_PRECONNECT,r).then(i).catch(s)),this.websocket.on(kn.FAILBACK,()=>{this.openConnectionTime!==void 0&&this.emit($e.DATACHANNEL_FAILBACK)})}}function PD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function Ms(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?PD(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):PD(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}const Xy=new Map;class eq extends In{get state(){return this._state}set state(r){if(r===this._state)return;const i=this._state;this._state=r,r==="DISCONNECTED"&&this._disconnectedReason?this.emit(Tn.CONNECTION_STATE_CHANGE,r,i,this._disconnectedReason):this.emit(Tn.CONNECTION_STATE_CHANGE,r,i)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(r){U.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(r)),this._joinGatewayStartTime=r}constructor(r,i){super(),N(this,"store",void 0),N(this,"joinInfo",void 0),N(this,"key",void 0),N(this,"signal",void 0),N(this,"role",void 0),N(this,"inChannelInfo",{joinAt:null,duration:0}),N(this,"spec",void 0),N(this,"_state","DISCONNECTED"),N(this,"_statsCollector",void 0),N(this,"_disconnectedReason",void 0),N(this,"isSignalRecover",!1),N(this,"hasChangeBGPAddress",!1),N(this,"trafficStatsInterval",void 0),N(this,"networkQualityInterval",void 0),N(this,"_joinGatewayStartTime",0),N(this,"_signalTimeout",!1),N(this,"_clientRoleOptions",void 0),N(this,"_isProactiveJoin",!1),this.store=r,this.spec=i,this.signal=this.store.useDataChannel?new dc(Ms(Ms({},i),{},{retryConfig:i.websocketRetryConfig}),r):new wD(Ms(Ms({},i),{},{retryConfig:i.websocketRetryConfig}),r),this._statsCollector=i.statsCollector,this.role=i.role||"audience",this._clientRoleOptions=i.clientRoleOptions,this.handleSignalEvents()}async join(r,i,s){if(this.signal instanceof dc){let E=!1;r.cloudProxyServer!=="disabled"?(U.debug("[".concat(this.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(r.cloudProxyServer,")")),E=!0):"".concat(r.apResponse.cid,"_").concat(r.apResponse.cert).length>255||"".concat(r.apResponse.cid,"_").concat(r.apResponse.cert).length<22?(U.debug("[".concat(this.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),E=!0):r.apResponse.addresses.some(T=>T.fingerprint)||ie("FINGERPRINT")||(U.debug("[".concat(this.store.clientId,"] Dc is not supported, because fingerprint does not exist")),E=!0),E&&this.resetSignal()}this.store.joinGatewayStart(),r.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);const l=Date.now();let d=Xy.get(r.cname);if(d||(d=new Map,Xy.set(r.cname,d)),this._isProactiveJoin=!0,d.has(r.uid)){const E=new Q(W.UID_CONFLICT);throw Ue.joinGateway(r.sid,{lts:l,succ:!1,ec:E.message,addr:null,uid:r.uid,cid:r.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!r.proxyServer,signalChannel:this.signal instanceof dc?"1":"0"}),this._isProactiveJoin=!1,E}d.set(r.uid,!0),this.joinInfo=r,this.key=i;let p=0;this.joinGatewayStartTime=l;const v=r.proxyServer;try{let E;if(U.debug("[".concat(this.store.clientId,"] use ").concat(this.signal instanceof dc?"datachannel":"websocket"," join uid ").concat(p)),this.signal instanceof dc)E=await this.signal.init(r.apResponse.addresses,s);else{const T=r.proxyServer,C=T?r.gatewayAddrs.map(R=>{const L=R.address.split(":");return"wss://".concat(T,"/ws/?h=").concat(L[0],"&p=").concat(L[1])}):r.gatewayAddrs.map(R=>"wss://".concat(R.address));E=await this.signal.init(C,s)}p=E.uid,U.debug("[".concat(this.store.clientId,"] ").concat(this.signal instanceof dc?"datachannel":"websocket"," join uid ").concat(p," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(E){throw E&&E.code===W.INIT_WEBSOCKET_TIMEOUT?(U.warning("[".concat(this.store.clientId,"] User join failed"),E.toString()),E):E&&E.code===W.INIT_DATACHANNEL_TIMEOUT?(U.warning("[".concat(this.store.clientId,"] User join datachannel failed"),E.toString()),this.resetSignal(),E):(U.error("[".concat(this.store.clientId,"] User join failed"),E.toString()),Ue.joinGateway(r.sid,{lts:l,succ:!1,ec:E.message,addr:this.signal.url,uid:r.uid,cid:r.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!v,signalChannel:this.signal instanceof dc?"1":"0"}),this._isProactiveJoin=!1,d.delete(r.uid),this.signal.close(),E)}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),U.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(E=>{U.warning("[".concat(this.store.clientId,"] get traffic stats error"),E.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(Tn.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(Tn.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(Tn.NETWORK_QUALITY,{uplinkNetworkQuality:vD(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:vD(this._statsCollector.trafficStats.B_dnq)}):this.emit(Tn.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),p}async leave(){let r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){i!==Wt.FALLBACK&&(this.state="DISCONNECTING");try{r||this.signal.connectionState!==Zt.CONNECTED||await function(s,l){return l===1/0?s:Pe.race([s,qY(l)])}(this.signal.request(Je.LEAVE,void 0,!0),3e3)}catch(s){U.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),s)}this.signal.close(i),i!==Wt.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(r,i,s){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Q(W.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const l={state:"offer",p2p_id:this.store.p2pId,ortc:i,mode:this.spec.mode,extend:ie("PUB_EXTEND"),twcc:!!ie("PUBLISH_TWCC"),rtx:!!ie("USE_PUB_RTX")};try{return(await this.signal.request(Je.PUBLISH,l,!0))._message}catch(d){if(s&&d.data&&d.data.code===Ke.ERR_PUBLISH_REQUEST_INVALID)return U.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),d.toString()),await this.tryUnpubBeforeRepub(r,i),this.publish(r,i,!1);throw d}}async unpublish(r,i){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Q(W.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(Je.UNPUBLISH,{stream_id:i,ortc:r},!0)}catch(s){U.warning("[".concat(this.store.clientId,"] unpublish warning: "),s)}}async subscribe(r,i,s){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Q(W.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const l={stream_id:r,stream_type:i.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!ie("SUBSCRIBE_TWCC"),rtx:!!ie("USE_SUB_RTX"),extend:ie("SUB_EXTEND"),ssrcId:i.ssrcId,svc:Array.isArray(ie("SVC"))&&ie("SVC").length!==0?ie("SVC"):void 0};try{return(await this.signal.request(Je.SUBSCRIBE,l,!0))._message}catch(d){if(s&&d.data&&d.data.code===Ke.ERR_SUBSCRIBE_REQUEST_INVALID)return U.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),d.toString()),await this.tryUnsubBeforeResub(r,i),await this.subscribe(r,i,!1);throw d}}async subscribeAll(r,i){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Q(W.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const s={p2p_id:this.store.p2pId,users:r,dtx:!1,rtx:!!ie("USE_SUB_RTX")};try{return await this.signal.request(Je.SUBSCRIBE_STREAMS,s,!0)}catch(l){if(i&&l.data&&l.data.code===Ke.ERR_SUBSCRIBE_REQUEST_INVALID)return U.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),l.toString()),await this.tryMassUnsubBeforeResub(r),await this.subscribeAll(r,!1);throw l}}async setVideoProfile(r){const i=function(s){if(!(s.bitrateMax&&s.bitrateMin&&s.frameRate&&s.height&&s.width))return;let l=s.frameRate,d=s.width,p=s.height,v=!0;return typeof l!="number"&&(l=l.exact||l.ideal||l.max||l.min||0,l||(v=!1)),typeof d!="number"&&(d=d.exact||d.ideal||d.max||d.min||0,d||(v=!1)),typeof p!="number"&&(p=p.exact||p.ideal||p.max||p.min||0,l||(v=!1)),v?{stream_type:0,width:d,height:p,fps:l,start_bps:1e3*s.bitrateMax,min_bps:1e3*s.bitrateMin,target_bps:1e3*s.bitrateMax}:void 0}(r);if(i)return this.signal.request(Je.SET_VIDEO_PROFILE,i);U.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(r,i){try{await this.signal.request(Je.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:r,stream_id:i},!0)}catch(s){U.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),s)}}async massUnsubscribe(r){try{await this.signal.request(Je.UNSUBSCRIBE_STREAMS,r,!0)}catch(i){U.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),i)}}async reconnectPC(r){const{iceParameters:i,dtlsParameters:s,rtpCapabilities:l}=r;return{gatewayEstablishParams:await this.signal.request(Je.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:i,dtlsParameters:s,rtpCapabilities:l}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(Je.GATEWAY_INFO)}async renewToken(r){await this.signal.request(Je.RENEW_TOKEN,r),this.key=r.token}async setClientRole(r,i){if(i&&(this._clientRoleOptions=Object.assign({},i)),this.state!=="CONNECTED")return void(this.role=r);let s;s=r==="audience"?this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:0,await this.signal.request(Je.SET_CLIENT_ROLE,{role:r,level:s,client_ts:Date.now()}),this.role=r}async setRemoteVideoStreamType(r,i){await this.signal.request(Je.SWITCH_VIDEO_STREAM,{stream_id:r,stream_type:i})}async setDefaultRemoteVideoStreamType(r){await this.signal.request(Je.DEFAULT_VIDEO_STREAM,{stream_type:r})}async setStreamFallbackOption(r,i){await this.signal.request(Je.SET_FALLBACK_OPTION,{stream_id:r,fallback_type:i})}async pickSVCLayer(r,i){await this.signal.request(Je.PICK_SVC_LAYER,{stream_id:r,spatial_layer:i.spatialLayer,temporal_layer:i.temporalLayer})}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),Ms({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(Je.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const r=Xy.get(this.joinInfo.cname);r&&r.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const r=function(i){let s;return s=i.startsWith("dc")?i.match(/(dc\:\/\/)?([^:]+):(\d+)/):i.match(/(wss\:\/\/)?([^:]+):(\d+)/),s?{username:No.username,password:No.password,turnServerURL:s[2],tcpport:parseInt(s[3])+30,udpport:parseInt(s[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],r&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push(Ms(Ms({},No),{},{turnServerURL:r.turnServerURL,tcpport:r.tcpport,udpport:r.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;const r=await this.signal.request(Je.TRAFFIC_STATS,void 0,!0);r.timestamp=Date.now(),r.peer_delay.forEach(i=>{const s=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(l=>l.peer_uid===i.peer_uid);s&&s.B_st!==i.B_st&&is(()=>{this.emit(Tn.STREAM_TYPE_CHANGE,i.peer_uid,i.B_st)})}),this._statsCollector.updateTrafficStats(r)}getJoinMessage(r){if(!this.joinInfo||!this.key)throw new Q(W.UNEXPECTED_ERROR,"can not generate join message, no join info");const i=Object.assign({},this.joinInfo.apResponse);let s=ie("REPORT_APP_SCENARIO");if(typeof s!="string")try{s=JSON.stringify(s)}catch{s=void 0}s&&s.length>128&&(s=void 0);const l=Ms({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:Zo,browser:navigator.userAgent,process_id:ie("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:i,extend:ie("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:s,attributes:{userAttributes:{enablePublishedUserList:ie("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:ie("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:typeof ie("SUBSCRIBE_AUDIO_FILTER_TOPN")=="number"?ie("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:typeof ie("ENABLE_PUBLISH_AUDIO_FILTER")=="boolean"?ie("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:typeof ie("ENABLE_USER_LICENSE_CHECK")=="boolean"?ie("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:ie("USE_PUB_RTX")===!0||ie("USE_SUB_RTX")===!0||void 0}},join_ts:this.joinGatewayStartTime},r);return this.joinInfo.stringUid&&(l.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(l.aes_mode=this.joinInfo.aesmode,ie("ENCRYPT_AES")?(l.aes_secret=this.joinInfo.aespassword,l.aes_encrypt=!0):l.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(l.aes_salt=this.joinInfo.aessalt)),i.addresses[this.signal.websocket.currentURLIndex]&&(l.ap_response.ticket=i.addresses[this.signal.websocket.currentURLIndex].ticket,delete i.addresses),this.joinInfo.defaultVideoStream!==void 0&&(l.default_video_stream=this.joinInfo.defaultVideoStream),l}getRejoinMessage(){if(!this.joinInfo)throw new Q(W.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on($e.WS_RECONNECT_WAITTING_FINISH,r=>{["tryNext","recover"].includes(r)&&this.joinInfo&&Ue.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on($e.WS_RECONNECT_CREATE_CONNECTION,r=>{this.joinGatewayStartTime=Date.now()}),this.signal.on($e.WS_RECONNECTING,r=>{this.joinInfo&&Ue.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:r||Li.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",Ue.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on($e.WS_CLOSED,r=>{let i;switch(r){case Wt.LEAVE:i=Li.LEAVE;break;case Wt.UID_BANNED:case Wt.IP_BANNED:case Wt.CHANNEL_BANNED:case Wt.SERVER_ERROR:i=Li.SERVER_ERROR;break;case Wt.FALLBACK:i=Li.FALLBACK;break;case Wt.LICENSE_MISSING:case Wt.LICENSE_EXPIRED:case Wt.LICENSE_MINUTES_EXCEEDED:case Wt.LICENSE_PERIOD_INVALID:case Wt.LICENSE_MULTIPLE_SDK_SERVICE:case Wt.LICENSE_ILLEGAL:i=r;break;default:i=Li.NETWORK_ERROR}U.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(i||"undefined -> "+Li.NETWORK_ERROR)),this.joinInfo&&Ue.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:r===Wt.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:i}),this._disconnectedReason=r,r!==Wt.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on($e.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&(this.role==="audience"&&this._clientRoleOptions&&this._clientRoleOptions.level&&(U.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),Ue.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof dc?"1":"0"}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&this.joinInfo.setLocalAPVersion===1)){const r=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!r)return void U.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(r));rn("EVENT_REPORT_DOMAIN",r[1]),rn("EVENT_REPORT_BACKUP_DOMAIN",r[1]),rn("LOG_UPLOAD_SERVER","".concat(r[1],":6444"))}}),this.signal.on(Et.ON_UPLINK_STATS,r=>{this._statsCollector.updateUplinkStats(r)}),this.signal.on($e.REQUEST_RECOVER,(r,i,s)=>{if(!this.joinInfo)return s(new Q(W.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));r&&(this.joinInfo.multiIP=r,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,ni(this,Tn.REQUEST_NEW_GATEWAY_LIST).then(i).catch(s)}),this.signal.on($e.REQUEST_JOIN_INFO,async r=>{var i;this.updateTurnConfigFromSignal();const{iceParameters:s,dtlsParameters:l,rtpCapabilities:d}=await ni(this,Tn.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:(i=this.joinInfo)===null||i===void 0?void 0:i.turnServer});r(this.getJoinMessage({ortc:{iceParameters:s,dtlsParameters:l,rtpCapabilities:d,version:"2"}}))}),this.signal.on($e.REQUEST_REJOIN_INFO,r=>{r(this.getRejoinMessage())}),this.signal.on($e.REPORT_JOIN_GATEWAY,(r,i)=>{this.joinInfo&&(Ue.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:r,addr:i,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof dc?"1":"0"}),this._isProactiveJoin=!1)}),this.signal.on($e.IS_P2P_DISCONNECTED,r=>{r(uu(this,Tn.IS_P2P_DISCONNECTED))}),this.signal.on($e.DISCONNECT_P2P,()=>{this.emit(Tn.DISCONNECT_P2P)}),this.signal.on($e.NEED_RENEW_SESSION,()=>{this.emit(Tn.NEED_RENEW_SESSION)}),this.signal.on($e.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on($e.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on($e.JOIN_RESPONSE,r=>{const i=this.getCurrentGatewayAddress();this.emit(Tn.JOIN_RESPONSE,r,i)}),this.signal.on($e.DATACHANNEL_PRECONNECT,async(r,i,s)=>{this.updateTurnConfigFromSignal();const l=this.getCurrentGatewayAddress();return ni(this,Tn.DATACHANNEL_PRECONNECT,r,l).then(i).catch(s)}),this.signal.on($e.DATACHANNEL_CONNECTING,async r=>{const{iceParameters:i,dtlsParameters:s,rtpCapabilities:l}=await ni(this,Tn.REQUEST_DC_CONNECTION_PARAMS);r(this.getJoinMessage({ortc:{iceParameters:i,dtlsParameters:s,rtpCapabilities:l,version:"2"}}))}),this.signal.on($e.DATACHANNEL_FAILBACK,()=>{U.warning("[".concat(this.store.clientId,"] User join datachannel failed")),this.reset(),this.resetSignal(),this.emit(Tn.DATACHANNEL_FAILBACK)})}async tryUnsubBeforeResub(r,i){try{await this.signal.request(Je.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:r,ortc:[i]},!0)}catch(s){throw U.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),s),s}}async tryUnpubBeforeRepub(r,i){try{await this.signal.request(Je.UNPUBLISH,{stream_id:r,ortc:i},!0)}catch(s){throw U.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),s),s}}async tryMassUnsubBeforeResub(r){const i={users:r.map(s=>({stream_id:s.stream_id,stream_type:s.stream_type}))};try{await this.signal.request(Je.UNSUBSCRIBE_STREAMS,i,!0)}catch(s){throw U.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),s),s}}async muteLocal(r,i){const s={action:r.find(l=>l.stream_type===cr.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:r,stream_id:i};try{await this.signal.request(Je.CONTROL,s,!0,!0)}catch(l){throw U.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),l),l}}async unmuteLocal(r,i){const s={action:r.find(l=>l.stream_type===cr.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:r,stream_id:i};try{await this.signal.request(Je.CONTROL,s,!0,!0)}catch(l){throw U.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),l),l}}uploadStats(r,i){this.signal.upload(r,i)}getSignalRTT(){return this.signal.rtt}async restartICE(r){const i={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:r};try{return await this.signal.request(Je.RESTART_ICE,i,!0)}catch(s){throw U.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),s),s}}reconnect(){this.state==="CONNECTED"&&this.signal.reconnect(void 0,Li.P2P_FAILED)}getCurrentGatewayAddress(){var r;if(!ie("GATEWAY_WSS_ADDRESS"))return(r=this.joinInfo)!==null&&r!==void 0&&r.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(r){await this.signal.request(Je.SET_PARAMETER,{enablePublishAudioFilter:r})}resetSignal(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(Wt.FALLBACK)),this.store.useDataChannel=!1,this.signal=new wD(Ms(Ms({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(Tn.RESET_SIGNAL,D0.websocket)}}/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */(function(){var n;function r(ge){var Ce=0;return function(){return Ce<ge.length?{done:!1,value:ge[Ce++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(ge,Ce,Ne){return ge==Array.prototype||ge==Object.prototype||(ge[Ce]=Ne.value),ge},s,l=function(ge){ge=[typeof globalThis=="object"&&globalThis,ge,typeof window=="object"&&window,typeof self=="object"&&self,typeof a=="object"&&a];for(var Ce=0;Ce<ge.length;++Ce){var Ne=ge[Ce];if(Ne&&Ne.Math==Math)return Ne}throw Error("Cannot find global object")}(this);function d(ge,Ce){if(Ce)e:{var Ne=l;ge=ge.split(".");for(var tt=0;tt<ge.length-1;tt++){var Ut=ge[tt];if(!(Ut in Ne))break e;Ne=Ne[Ut]}(Ce=Ce(tt=Ne[ge=ge[ge.length-1]]))!=tt&&Ce!=null&&i(Ne,ge,{configurable:!0,writable:!0,value:Ce})}}function p(ge){return(ge={next:ge})[Symbol.iterator]=function(){return this},ge}function v(ge){var Ce=typeof Symbol<"u"&&Symbol.iterator&&ge[Symbol.iterator];return Ce?Ce.call(ge):{next:r(ge)}}if(d("Symbol",function(ge){function Ce(Ut,Re){this.A=Ut,i(this,"description",{configurable:!0,writable:!0,value:Re})}if(ge)return ge;Ce.prototype.toString=function(){return this.A};var Ne="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",tt=0;return function Ut(Re){if(this instanceof Ut)throw new TypeError("Symbol is not a constructor");return new Ce(Ne+(Re||"")+"_"+tt++,Re)}}),d("Symbol.iterator",function(ge){if(ge)return ge;ge=Symbol("Symbol.iterator");for(var Ce="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Ne=0;Ne<Ce.length;Ne++){var tt=l[Ce[Ne]];typeof tt=="function"&&typeof tt.prototype[ge]!="function"&&i(tt.prototype,ge,{configurable:!0,writable:!0,value:function(){return p(r(this))}})}return ge}),typeof Object.setPrototypeOf=="function")s=Object.setPrototypeOf;else{var E;e:{var T={};try{T.__proto__={a:!0},E=T.a;break e}catch{}E=!1}s=E?function(ge,Ce){if(ge.__proto__=Ce,ge.__proto__!==Ce)throw new TypeError(ge+" is not extensible");return ge}:null}var C=s;function R(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function L(ge){if(ge.m)throw new TypeError("Generator is already running");ge.m=!0}function j(ge,Ce){return ge.h=3,{value:Ce}}function Y(ge){this.g=new R,this.G=ge}function q(ge,Ce,Ne,tt){try{var Ut=Ce.call(ge.g.j,Ne);if(!(Ut instanceof Object))throw new TypeError("Iterator result "+Ut+" is not an object");if(!Ut.done)return ge.g.m=!1,Ut;var Re=Ut.value}catch(k){return ge.g.j=null,ge.g.s(k),X(ge)}return ge.g.j=null,tt.call(ge.g,Re),X(ge)}function X(ge){for(;ge.g.h;)try{var Ce=ge.G(ge.g);if(Ce)return ge.g.m=!1,{value:Ce.value,done:!1}}catch(Ne){ge.g.v=void 0,ge.g.s(Ne)}if(ge.g.m=!1,ge.g.l){if(Ce=ge.g.l,ge.g.l=null,Ce.F)throw Ce.D;return{value:Ce.return,done:!0}}return{value:void 0,done:!0}}function le(ge){this.next=function(Ce){return ge.o(Ce)},this.throw=function(Ce){return ge.s(Ce)},this.return=function(Ce){return function(Ne,tt){L(Ne.g);var Ut=Ne.g.j;return Ut?q(Ne,"return"in Ut?Ut.return:function(Re){return{value:Re,done:!0}},tt,Ne.g.return):(Ne.g.return(tt),X(Ne))}(ge,Ce)},this[Symbol.iterator]=function(){return this}}function he(ge,Ce){return Ce=new le(new Y(Ce)),C&&ge.prototype&&C(Ce,ge.prototype),Ce}if(R.prototype.o=function(ge){this.v=ge},R.prototype.s=function(ge){this.l={D:ge,F:!0},this.h=this.C||this.u},R.prototype.return=function(ge){this.l={return:ge},this.h=this.u},Y.prototype.o=function(ge){return L(this.g),this.g.j?q(this,this.g.j.next,ge,this.g.o):(this.g.o(ge),X(this))},Y.prototype.s=function(ge){return L(this.g),this.g.j?q(this,this.g.j.throw,ge,this.g.o):(this.g.s(ge),X(this))},d("Array.prototype.entries",function(ge){return ge||function(){return function(Ce,Ne){Ce instanceof String&&(Ce+="");var tt=0,Ut=!1,Re={next:function(){if(!Ut&&tt<Ce.length){var k=tt++;return{value:Ne(k,Ce[k]),done:!1}}return Ut=!0,{done:!0,value:void 0}}};return Re[Symbol.iterator]=function(){return Re},Re}(this,function(Ce,Ne){return[Ce,Ne]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var ye=function(ge,Ce){for(var Ne=0;Ne<ge.length;Ne++)Ce(ge[Ne])},ke=function(ge){return ge.replace(/\r?\n|\r/g,`\r
`)},be=function(ge,Ce,Ne){return Ce instanceof Blob?(Ne=Ne!==void 0?Ne+"":typeof Ce.name=="string"?Ce.name:"blob",Ce.name===Ne&&Object.prototype.toString.call(Ce)!=="[object Blob]"||(Ce=new File([Ce],Ne)),[String(ge),Ce]):[String(ge),String(Ce)]},Te=function(ge,Ce){if(ge.length<Ce)throw new TypeError(Ce+" argument required, but only "+ge.length+" present.")},Se=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,Oe=Se.FormData,Bt=Se.XMLHttpRequest&&Se.XMLHttpRequest.prototype.send,We=Se.Request&&Se.fetch,ln=Se.navigator&&Se.navigator.sendBeacon,en=Se.Element&&Se.Element.prototype,Yn=Se.Symbol&&Symbol.toStringTag;Yn&&(Blob.prototype[Yn]||(Blob.prototype[Yn]="Blob"),"File"in Se&&!File.prototype[Yn]&&(File.prototype[Yn]="File"));try{new File([],"")}catch{Se.File=function(Ce,Ne,tt){return Ce=new Blob(Ce,tt||{}),Object.defineProperties(Ce,{name:{value:Ne},lastModified:{value:+(tt&&tt.lastModified!==void 0?new Date(tt.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),Yn&&Object.defineProperty(Ce,Yn,{value:"File"}),Ce}}var Br=function(ge){return ge.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},Bn=function(ge){this.i=[];var Ce=this;ge&&ye(ge.elements,function(Ne){if(Ne.name&&!Ne.disabled&&Ne.type!=="submit"&&Ne.type!=="button"&&!Ne.matches("form fieldset[disabled] *"))if(Ne.type==="file"){var tt=Ne.files&&Ne.files.length?Ne.files:[new File([],"",{type:"application/octet-stream"})];ye(tt,function(Ut){Ce.append(Ne.name,Ut)})}else Ne.type==="select-multiple"||Ne.type==="select-one"?ye(Ne.options,function(Ut){!Ut.disabled&&Ut.selected&&Ce.append(Ne.name,Ut.value)}):Ne.type==="checkbox"||Ne.type==="radio"?Ne.checked&&Ce.append(Ne.name,Ne.value):(tt=Ne.type==="textarea"?ke(Ne.value):Ne.value,Ce.append(Ne.name,tt))})};if((n=Bn.prototype).append=function(ge,Ce,Ne){Te(arguments,2),this.i.push(be(ge,Ce,Ne))},n.delete=function(ge){Te(arguments,1);var Ce=[];ge=String(ge),ye(this.i,function(Ne){Ne[0]!==ge&&Ce.push(Ne)}),this.i=Ce},n.entries=function ge(){var Ce,Ne=this;return he(ge,function(tt){if(tt.h==1&&(Ce=0),tt.h!=3)return Ce<Ne.i.length?tt=j(tt,Ne.i[Ce]):(tt.h=0,tt=void 0),tt;Ce++,tt.h=2})},n.forEach=function(ge,Ce){Te(arguments,1);for(var Ne=v(this),tt=Ne.next();!tt.done;tt=Ne.next()){var Ut=v(tt.value);tt=Ut.next().value,Ut=Ut.next().value,ge.call(Ce,Ut,tt,this)}},n.get=function(ge){Te(arguments,1);var Ce=this.i;ge=String(ge);for(var Ne=0;Ne<Ce.length;Ne++)if(Ce[Ne][0]===ge)return Ce[Ne][1];return null},n.getAll=function(ge){Te(arguments,1);var Ce=[];return ge=String(ge),ye(this.i,function(Ne){Ne[0]===ge&&Ce.push(Ne[1])}),Ce},n.has=function(ge){Te(arguments,1),ge=String(ge);for(var Ce=0;Ce<this.i.length;Ce++)if(this.i[Ce][0]===ge)return!0;return!1},n.keys=function ge(){var Ce,Ne,tt,Ut,Re=this;return he(ge,function(k){if(k.h==1&&(Ce=v(Re),Ne=Ce.next()),k.h!=3)return Ne.done?void(k.h=0):(tt=Ne.value,Ut=v(tt),j(k,Ut.next().value));Ne=Ce.next(),k.h=2})},n.set=function(ge,Ce,Ne){Te(arguments,2),ge=String(ge);var tt=[],Ut=be(ge,Ce,Ne),Re=!0;ye(this.i,function(k){k[0]===ge?Re&&(Re=!tt.push(Ut)):tt.push(k)}),Re&&tt.push(Ut),this.i=tt},n.values=function ge(){var Ce,Ne,tt,Ut,Re=this;return he(ge,function(k){if(k.h==1&&(Ce=v(Re),Ne=Ce.next()),k.h!=3)return Ne.done?void(k.h=0):(tt=Ne.value,(Ut=v(tt)).next(),j(k,Ut.next().value));Ne=Ce.next(),k.h=2})},Bn.prototype._asNative=function(){for(var ge=new Oe,Ce=v(this),Ne=Ce.next();!Ne.done;Ne=Ce.next()){var tt=v(Ne.value);Ne=tt.next().value,tt=tt.next().value,ge.append(Ne,tt)}return ge},Bn.prototype._blob=function(){var ge="----formdata-polyfill-"+Math.random(),Ce=[],Ne="--"+ge+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(tt,Ut){return typeof tt=="string"?Ce.push(Ne+Br(ke(Ut))+`"\r
\r
`+ke(tt)+`\r
`):Ce.push(Ne+Br(ke(Ut))+'"; filename="'+Br(tt.name)+`"\r
Content-Type: `+(tt.type||"application/octet-stream")+`\r
\r
`,tt,`\r
`)}),Ce.push("--"+ge+"--"),new Blob(Ce,{type:"multipart/form-data; boundary="+ge})},Bn.prototype[Symbol.iterator]=function(){return this.entries()},Bn.prototype.toString=function(){return"[object FormData]"},en&&!en.matches&&(en.matches=en.matchesSelector||en.mozMatchesSelector||en.msMatchesSelector||en.oMatchesSelector||en.webkitMatchesSelector||function(ge){for(var Ce=(ge=(this.document||this.ownerDocument).querySelectorAll(ge)).length;0<=--Ce&&ge.item(Ce)!==this;);return-1<Ce}),Yn&&(Bn.prototype[Yn]="FormData"),Bt){var ro=Se.XMLHttpRequest.prototype.setRequestHeader;Se.XMLHttpRequest.prototype.setRequestHeader=function(ge,Ce){ro.call(this,ge,Ce),ge.toLowerCase()==="content-type"&&(this.B=!0)},Se.XMLHttpRequest.prototype.send=function(ge){ge instanceof Bn?(ge=ge._blob(),this.B||this.setRequestHeader("Content-Type",ge.type),Bt.call(this,ge)):Bt.call(this,ge)}}We&&(Se.fetch=function(ge,Ce){return Ce&&Ce.body&&Ce.body instanceof Bn&&(Ce.body=Ce.body._blob()),We.call(this,ge,Ce)}),ln&&(Se.navigator.sendBeacon=function(ge,Ce){return Ce instanceof Bn&&(Ce=Ce._asNative()),ln.call(this,ge,Ce)}),Se.FormData=Bn}})();const Y0=()=>{const n=ie("AREAS");return n.length===0&&n.push(Nt.GLOBAL),Gc(n).call(n,(r,i,s)=>{const l=DD(i);return l?s===0?l:"".concat(r,",").concat(l):r},"")},DD=n=>n===Nt.OVERSEA?"".concat(Ir.ASIA,",").concat(Ir.EUROPE,",").concat(Ir.AFRICA,",").concat(Ir.NORTH_AMERICA,",").concat(Ir.SOUTH_AMERICA,",").concat(Ir.OCEANIA):Ir[n],tq=n=>{const r={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return n.map(i=>{const s=k0[i],l=Object.keys(s);l&&l.map(d=>{d!=="CODE"&&(r[d]=r[d].concat(s[d]))})}),r},q0={GLOBAL:{ASIA:[Nt.CHINA,Nt.JAPAN,Nt.INDIA,Nt.KOREA,Nt.HKMC],EUROPE:[],NORTH_AMERICA:[Nt.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},Jy=Object.keys(q0[Nt.GLOBAL]),kD=[Nt.CHINA,Nt.NORTH_AMERICA,Nt.EUROPE,Nt.ASIA,Nt.JAPAN,Nt.INDIA,Nt.OCEANIA,Nt.SOUTH_AMERICA,Nt.AFRICA,Nt.KOREA,Nt.HKMC,Nt.US],nq=function(n,r){let i=[];if(n.includes(Nt.GLOBAL)){const d=[Nt.GLOBAL,Nt.OVERSEA],p=Object.keys(k0);if(r===Nt.GLOBAL)throw new Q(W.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(r===Nt.CHINA)i=[Nt.OVERSEA];else if(l=r,Jy.includes(l)){const v=(s=r,q0[Nt.GLOBAL][s]||[]),E=[...d,r,...v];i=p.filter(T=>!E.includes(T))}else if(function(v){let E=!1;return Jy.forEach(T=>{q0[Nt.GLOBAL][T].includes(v)&&(E=!0)}),E}(r)){const v=function(T){let C;return Jy.forEach(R=>{q0[Nt.GLOBAL][R].includes(T)&&(C=R)}),C}(r),E=[...d,v,r];i=p.filter(T=>!E.includes(T))}else i=n;i=function(v){const E=[];return kD.forEach(T=>{v.includes(T)&&E.push(T)}),E.concat(v.filter(T=>!kD.includes(T)))}(i)}else i=n;var s,l;return i};function LD(n){if(!n&&ie("AREAS").includes(Nt.EXTENSIONS))return U.debug("update area from ap : reset"),void Qy(Ex,!0);if(!ie("AREAS").includes(Nt.GLOBAL)||!n)return;let r=k0.EXTENSIONS;r&&(r={CODE:DD(Nt.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(n,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(n,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(n,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(n,".agora.io"),"cds-ap-web-2-".concat(n,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(n,".agora.io"),"sua-ap-web-2-".concat(n,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(n,".agora.io"),"uap-ap-web-2-".concat(n,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(n,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(n,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(n,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(n,".agora.io")]},U.debug("update area from ap success: ".concat(n,",config is "),r),rn("AREAS",[Nt.EXTENSIONS],!0),Object.keys(r).map(i=>{i==="LOG_UPLOAD_SERVER"||i==="EVENT_REPORT_DOMAIN"||i==="EVENT_REPORT_BACKUP_DOMAIN"||i==="PROXY_SERVER_TYPE3"?rn(i,r[i][0]):rn(i,r[i])}))}function Qy(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=Ue.reportApiInvoke(null,{name:Zn.SET_AREA,options:n,tag:bn.TRACER});try{let s=[];if(typeof n=="string"&&(s=[n]),Array.isArray(n)&&(n.forEach(d=>{if(!AK.includes(d))throw new Q(W.INVALID_PARAMS,"invalid area code")}),s=n),Object.prototype.toString.call(n)==="[object Object]"){const{areaCode:d,excludedArea:p}=n;if(!d)throw new Q(W.INVALID_PARAMS,"area code is needed");let v=d;typeof d=="string"&&(v=[d]),s=p?nq(v,p):v}if(!r){if(nu.AREAS){const d=new Q(W.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return i.onError(d),void U.warning("setArea is prohibited because of config-distribute")}if(s.includes(Nt.GLOBAL)&&ie("AREAS")===Nt.EXTENSIONS){const d=new Q(W.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return i.onError(d),void U.warning("setArea is prohibited because of ap extensions")}}rn("AREAS",s,r);const l=tq(s);Object.keys(l).map(d=>{d==="LOG_UPLOAD_SERVER"||d==="EVENT_REPORT_DOMAIN"||d==="EVENT_REPORT_BACKUP_DOMAIN"||d==="PROXY_SERVER_TYPE3"?rn(d,l[d][0]):rn(d,l[d])}),U.debug("set area success:",s.join(","))}catch(s){throw i.onError(s),s}i.onSuccess()}function MD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function UD(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?MD(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):MD(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}let Zy=1;function rq(n,r,i,s,l){Zy+=1;const d={sid:i.sid,command:"convergeAllocateEdge",uid:"666",appId:i.appId,ts:Math.floor(Date.now()/1e3),seq:Zy,requestId:Zy,version:Zo,cname:i.cname},p={service_name:r,json_body:JSON.stringify(d)};let v,E,T=n[0];return es(async()=>{v=Date.now();const C=await wa(T,{data:p,cancelToken:s,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(E=Date.now()-v,C.code!==0){const j=new Q(W.UNEXPECTED_RESPONSE,"live streaming ap error, code"+C.code,{retry:!0,responseTime:E});throw U.error(j.toString()),j}const R=JSON.parse(C.json_body);if(R.code!==200){const j=new Q(W.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(R.code,", reason: ").concat(R.reason),{code:R.code,responseTime:E});throw U.error(j.toString()),j}if(!R.servers||R.servers.length===0){const j=new Q(W.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:R.code,responseTime:E});throw U.error(j.toString()),j}const L=function(j,Y){return{addressList:j.servers.map(q=>"wss://".concat(q.address.replace(/\./g,"-"),".").concat(ie("WORKER_DOMAIN"),":").concat(q.wss,"?serviceName=").concat(encodeURIComponent(Y))),workerToken:j.workerToken,vid:j.vid}}(R,r);return ie("LIVE_STREAMING_ADDRESS")&&(L.addressList=ie("LIVE_STREAMING_ADDRESS")instanceof Array?ie("LIVE_STREAMING_ADDRESS"):[ie("LIVE_STREAMING_ADDRESS")]),UD(UD({},L),{},{responseTime:E})},(C,R)=>(Ue.apworkerEvent(i.sid,{success:!0,sc:200,serviceName:r,responseDetail:JSON.stringify(C.addressList),firstSuccess:R===0,responseTime:E,serverIp:n[R%n.length]}),!1),(C,R)=>(Ue.apworkerEvent(i.sid,{success:!1,sc:C.data&&C.data.code||200,serviceName:r,responseTime:E,serverIp:n[R%n.length]}),!!(C.code!==W.OPERATION_ABORTED&&C.code!==W.UNEXPECTED_RESPONSE||C.data&&C.data.retry)&&(T=n[(R+1)%n.length],!0)),l)}let eC=1;function FD(n,r,i,s){let{url:l,areaCode:d}=n;const p=Date.now();let v;const[E,T]=$D(r,d,[Sr.CHOOSE_SERVER]);let C=tr.networkState;return es(async()=>{C&&tr.networkState===ui.OFFLINE&&tr.onlineWaiter&&await Pe.race([tr.onlineWaiter,ti(s&&s.maxRetryTimeout||Qn.maxRetryTimeout)]),C=tr.networkState;const{data:R,headers:L}=await wa(l,{data:E,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);v=L.http3==="1"?1:-1,Ue.reportResourceTiming(l,r.sid),jD(R,l,r,p,[Sr.CHOOSE_SERVER],v);const j=zy(R,Sr.CHOOSE_SERVER);return BD(j),mD(j,l)},R=>(R&&Ue.joinChooseServer(r.sid,{lts:p,succ:!0,csAddr:l,opid:T,serverList:R.gatewayAddrs.map(L=>L.address),ec:null,cid:R.cid.toString(),uid:R.uid.toString(),csIp:R.csIp,unilbsServerIds:[Sr.CHOOSE_SERVER].toString(),isHttp3:v}),!1),R=>R.code!==W.OPERATION_ABORTED&&(R.code===W.CAN_NOT_GET_GATEWAY_SERVER?R.data.retry:(Ue.joinChooseServer(r.sid,{lts:p,succ:!1,csAddr:l,serverList:null,opid:T,ec:R.code,csIp:R.data&&R.data.csIp,unilbsServerIds:[Sr.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:C}),isHttp3:v}),U.warning("[".concat(r.clientId,"] Choose server network error, retry"),R),!0)),s)}function VD(n,r,i,s){let l,{url:d,areaCode:p,serviceIds:v}=n;const E=Date.now(),[T,C]=$D(r,p,v);let R;return es(async()=>{R&&tr.networkState===ui.OFFLINE&&tr.onlineWaiter&&await Pe.race([tr.onlineWaiter,ti(s&&s.maxRetryTimeout||Qn.maxRetryTimeout)]),R=tr.networkState;const{data:L,headers:j}=await wa(d,{data:T,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);l=j.http3==="1"?1:-1,Ue.reportResourceTiming(d,r.sid),jD(L,d,r,E,v,l);const Y=zy(L,Sr.CHOOSE_SERVER),q=zy(L,r.cloudProxyServer==="proxy5"?Sr.CLOUD_PROXY_5:r.cloudProxyServer==="proxy3"||r.cloudProxyServer==="proxy4"?Sr.CLOUD_PROXY:Sr.CLOUD_PROXY_FALLBACK);return BD(Y),{gatewayInfo:mD(Y,d),proxyInfo:q,url:d}},L=>(L.gatewayInfo&&Ue.joinChooseServer(r.sid,{lts:E,succ:!0,csAddr:d,serverList:L.gatewayInfo.gatewayAddrs.map(j=>j.address),ec:null,opid:C,cid:L.gatewayInfo.cid.toString(),uid:L.gatewayInfo.uid.toString(),csIp:L.gatewayInfo.csIp,unilbsServerIds:v.toString(),isHttp3:l}),L.proxyInfo&&Ue.joinWebProxyAP(r.sid,{lts:E,sucess:1,apServerAddr:d,turnServerAddrList:L.proxyInfo.addresses.map(j=>j.ip).join(","),errorCode:null,eventType:r.cloudProxyServer,unilbsServerIds:v.toString()}),!1),L=>L.code!==W.OPERATION_ABORTED&&(L.code===W.CAN_NOT_GET_GATEWAY_SERVER?L.data.retry:(Ue.joinWebProxyAP(r.sid,{lts:E,sucess:0,apServerAddr:d,turnServerAddrList:null,errorCode:L.code,eventType:r.cloudProxyServer,unilbsServerIds:v.toString(),extend:JSON.stringify({networkState:R})}),U.warning("[".concat(r.clientId,"] multi unilbs network error, retry"),L),!0)),s)}const jD=(n,r,i,s,l,d)=>{const p=[],v=E=>{E.flag===4096?Ue.joinChooseServer(i.sid,{lts:s,succ:!1,csAddr:r,opid:n.opid,serverList:null,ec:E.error.message,csIp:E.error.data&&E.error.data.csIp,unilbsServerIds:l.toString(),isHttp3:d}):E.flag!==1048576&&E.flag!==4194304&&E.flag!==4194310||Ue.joinWebProxyAP(i.sid,{lts:s,sucess:0,apServerAddr:r,turnServerAddrList:null,errorCode:E.error.code,eventType:i.cloudProxyServer,unilbsServerIds:l.toString()})};if(n.response_body.forEach(E=>{const T=E.buffer.code;if(E.uri===23&&T===0&&!E.buffer.edges_services)if(E.buffer.flag===4194310)U.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),E.buffer.edges_services=[];else{const C={error:new Q(W.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:n.detail[502]}),flag:E.buffer.flag};p.push(C),v(C)}if(T!==0){const C=K0(T),R={error:new Q(W.CAN_NOT_GET_GATEWAY_SERVER,C.desc,{desc:C.desc,retry:C.retry,csIp:n.detail[502]}),flag:E.buffer.flag};E.buffer.flag===4194310?U.warning(R.error.toString()):p.push(R),v(R)}}),p.length)throw U.warning("[".concat(i.clientId,"] multi unilbs ").concat(r," failed, ").concat(p.map(E=>"flag: ".concat(E.flag,", message: ").concat(E.error.message,", retry: ").concat(E.error.data.retry)).join(" | "))),new Q(W.CAN_NOT_GET_GATEWAY_SERVER,p.map(E=>"flag: ".concat(E.flag,", message: ").concat(E.error.message)).join(" | "),{retry:!!p.find(E=>E.error.data.retry),csIp:n.detail[502],desc:[...new Set(p.map(E=>{var T,C;return E==null||(T=E.error)===null||T===void 0||(C=T.data)===null||C===void 0?void 0:C.desc}).filter(E=>!!E))]})},BD=n=>{var r,i,s,l;if(n.addresses&&n.addresses.length===0&&n.code===0)throw new Q(W.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:n.detail&&n.detail[502]});if(ie("AP_AREA")&&((s=n.detail)!==null&&s!==void 0&&s[23]&&typeof((l=n.detail)===null||l===void 0?void 0:l[23])=="string"?LD(n.detail[23].toLowerCase()):LD()),(r=n.detail)!==null&&r!==void 0&&r[19]&&typeof((i=n.detail)===null||i===void 0?void 0:i[19])=="string"){const p=n.detail[19],v=p==null?void 0:p.split(";");for(let E=0;E<v.length;E++){var d;const T=ic(d=v[E]).call(d);n.addresses[E]&&v&&(n.addresses[E].fingerprint=T)}}if(ie("GATEWAY_ADDRESS")&&ie("GATEWAY_ADDRESS").length>0){U.debug("assign gateway address to",ie("GATEWAY_ADDRESS"));const p=ie("GATEWAY_ADDRESS").map(v=>{var E,T;const C=(E=(T=n.addresses.find(R=>R.ip===v.ip&&R.port===v.port))===null||T===void 0?void 0:T.fingerprint)!==null&&E!==void 0?E:"";return{ip:v.ip,port:v.port,ticket:n.addresses[0]&&n.addresses[0].ticket,fingerprint:C}});n.addresses=p}},iq=(n,r)=>{if(n.response_body&&n.response_body.length){const i=n.response_body[0];if(i.buffer.code!==0){const s=K0(i.buffer.code);throw new Q(W.UPDATE_TICKET_FAILED,"[".concat(i.buffer.code,"]: ").concat(s.desc),{retry:s.retry})}return i.buffer.ticket}throw U.debug("update ticket request received ap response without response body:",r),new Q(W.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},$D=(n,r,i)=>{const s=Math.floor(Math.random()*1e12),l={appid:n.appId,client_ts:Date.now(),opid:s,sid:n.sid,request_bodies:[{uri:22,buffer:{cname:n.cname,detail:{6:n.stringUid,11:r,12:ie("USE_NEW_TOKEN")?"1":void 0,22:r},key:n.token,service_ids:i,uid:n.uid||0}}]};l.request_bodies.forEach(p=>{n.multiIP&&n.multiIP.gateway_ip&&(p.buffer.detail[5]=JSON.stringify({vocs_ip:[n.multiIP.uni_lbs_ip],vos_ip:[n.multiIP.gateway_ip]}))});const d=new FormData;return d.append("request",JSON.stringify(l)),[d,s]},oq=(n,r)=>{const i=Math.floor(Math.random()*1e12),s={appid:n.appId,client_ts:Date.now(),opid:i,sid:n.sid,request_bodies:[{uri:28,buffer:{cname:n.cname,detail:{1:"",6:n.stringUid,12:"1"},token:n.token,service_ids:r,uid:n.uid||0,edges_services:n.apResponse.addresses.map(d=>({ip:d.ip,port:d.port}))}}]},l=new FormData;return l.append("request",JSON.stringify(s)),[l,i]};let Pd=0;async function tC(n,r,i,s){return{gatewayInfo:await async function(d,p,v,E){let T=null;const C=[],R=async()=>{const j=ie("WEBCS_DOMAIN").slice(0,ie("AJAX_REQUEST_CONCURRENT")).map(X=>({url:d.proxyServer?"https://".concat(d.proxyServer,"/ap/?url=").concat(X+"/api/v2/transpond/webrtc?v=2"):"https://".concat(X,"/api/v2/transpond/webrtc?v=2"),areaCode:Y0()})),Y=E.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:j.map(X=>X.url)}),q=await Dp({fragementLength:ie("FRAGEMENT_LENGTH"),referenceList:j,asyncMapHandler:X=>(U.debug("[".concat(d.clientId,"] Connect to choose_server:"),X.url),FD(X,d,p,v)),allFailedhandler:X=>{throw E.recordJoinChannelService({endTs:Date.now(),status:"error",errors:X},Y),X[0]},promisesCollector:C});return E.recordJoinChannelService({endTs:Date.now(),status:"success"},Y),q},L=async()=>{if(await ti(1e3),T!==null)return T;const j=ie("WEBCS_DOMAIN_BACKUP_LIST").map(X=>({url:d.proxyServer?"https://".concat(d.proxyServer,"/ap/?url=").concat(X+"/api/v2/transpond/webrtc?v=2"):"https://".concat(X,"/api/v2/transpond/webrtc?v=2"),areaCode:Y0()})),Y=E.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:j.map(X=>X.url)}),q=await Dp({fragementLength:ie("FRAGEMENT_LENGTH"),referenceList:j,asyncMapHandler:X=>(U.debug("[".concat(d.clientId,"] Connect to backup choose_server:"),X.url),FD(X,d,p,v)),allFailedhandler:X=>{throw E.recordJoinChannelService({endTs:Date.now(),status:"error",errors:X},Y),X[0]},promisesCollector:C});return E.recordJoinChannelService({endTs:Date.now(),status:"success"},Y),q};try{return T=await xd([R(),L()]),C.length&&C.forEach(j=>j.cancel&&typeof j.cancel=="function"&&j.cancel()),T}catch(j){throw j[0]}}(n,r,i,s)}}async function HD(n,r,i,s,l){const d=n.cloudProxyServer;if(d==="disabled"){if(!s)return;if(n.useLocalAccessPoint)return await tC(n,r,i,l);if(ie("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:T,proxyInfo:C}=await GD(n,r,i,l);return n.turnServer&&n.turnServer.mode!=="auto"||(n.turnServer={mode:"manual",servers:C.map(R=>({turnServerURL:R.address,tcpport:R.tcpport||No.tcpport,udpport:R.udpport||No.udpport,username:R.username||No.username,password:R.password||No.password,forceturn:!1,security:!0}))}),{gatewayInfo:T}}return await tC(n,r,i,l)}const{proxyInfo:p,gatewayInfo:v}=await GD(n,r,i,l),E={gatewayInfo:v};return n.turnServer={mode:"manual",servers:p.map(T=>({turnServerURL:T.address,tcpport:d==="proxy3"?void 0:T.tcpport?T.tcpport:No.tcpport,udpport:d==="proxy4"?void 0:T.udpport?T.udpport:No.udpport,username:T.username||No.username,password:T.password||No.password,forceturn:d!=="proxy4",security:d==="proxy5"}))},U.debug("[".concat(n.clientId,"] set proxy server: ").concat(n.proxyServer,", mode: ").concat(d)),E}async function WD(n,r,i,s,l){const d=ie("ACCOUNT_REGISTER").slice(0,ie("AJAX_REQUEST_CONCURRENT"));let p=[];p=r.proxyServer?d.map(E=>"https://".concat(r.proxyServer,"/ap/?url=").concat(E+"/api/v1")):d.map(E=>"https://".concat(E,"/api/v1"));const v=l==null?void 0:l.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:p});try{const E=await async function(T,C,R,L,j){const Y=Date.now(),q={sid:R.sid,opid:10,appid:R.appId,string_uid:C};let X=T[0];const le=await es(()=>wa(X+"".concat(X.indexOf("?")===-1?"?":"&","action=stringuid"),{data:q,cancelToken:L,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(he,ye)=>{if(he.code===0){if(he.uid<=0||he.uid>=Math.pow(2,32))throw U.error("Invalid Uint Uid ".concat(C," => ").concat(he.uid),he),Ue.reqUserAccount(q.sid,{lts:Y,success:!1,serverAddr:X,stringUid:q.string_uid,uid:he.uid,errorCode:W.INVALID_UINT_UID_FROM_STRING_UID,extend:q}),new Q(W.INVALID_UINT_UID_FROM_STRING_UID);return Ue.reqUserAccount(q.sid,{lts:Y,success:!0,serverAddr:X,stringUid:q.string_uid,uid:he.uid,errorCode:null,extend:q}),!1}const ke=K0(he.code);return ke.retry&&(X=T[(ye+1)%T.length]),Ue.reqUserAccount(q.sid,{lts:Y,success:!1,serverAddr:X,stringUid:q.string_uid,uid:he.uid,errorCode:ke.desc,extend:q}),ke.retry},(he,ye)=>he.code!==W.OPERATION_ABORTED&&(Ue.reqUserAccount(q.sid,{lts:Y,success:!1,serverAddr:X,stringUid:q.string_uid,uid:null,errorCode:he.code,extend:q}),X=T[(ye+1)%T.length],!0),j);if(le.code!==0){const he=K0(le.code);throw new Q(W.UNEXPECTED_RESPONSE,he.desc)}return le}(p,n,r,i,s);return l==null||l.recordJoinChannelService({status:"success",endTs:Date.now()},v),E.uid}catch(E){throw l==null||l.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[E]},v),E}}async function aq(n,r,i){const s=ie("CDS_AP").slice(0,ie("AJAX_REQUEST_CONCURRENT")).map(v=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(v+"/api/v1"):"https://".concat(v,"/api/v1?action=config")).map(v=>function(E,T,C,R){const L=Ht(),j={flag:64,cipher_method:0,features:{device:L.name,system:L.os,system_general:navigator.userAgent,vendor:T.appId,version:Zo,cname:T.cname,sid:T.sid,session_id:T.sid,detail:"",proxyServer:T.proxyServer}};return es(()=>wa(E,{data:j,timeout:1e3,cancelToken:C,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,Y=>Y.code!==W.OPERATION_ABORTED,R)}(v,n,r,i));let l=null,d=null,p={};try{l=await xd(s)}catch(v){if(v.code===W.OPERATION_ABORTED)throw v;d=v}if(s.forEach(v=>v.cancel()),Ue.reportApiInvoke(n.sid,{name:Zn.REQUEST_CONFIG_DISTRIBUTE,options:{error:d,res:l}}).onSuccess(),l&&l.test_tags)try{p=function(v){if(!v.test_tags)return{};const E=v.test_tags,T=Object.keys(E),C={};return T.forEach(R=>{var L;const j=ic(L=R.slice(4)).call(L),Y=JSON.parse(E[R])[1];C[j]=Y}),C}(l)}catch{}return p}async function GD(n,r,i,s){const l=ie("PROXY_SERVER_TYPE3"),d=(j,Y,q)=>{let X=q||l;return Array.isArray(X)&&(X=Y%2==0?l[1]:l[0]),"https://".concat(X,"/ap/?url=").concat(j)};let p=null;const v=[],E=async()=>{const j=ie("WEBCS_DOMAIN").slice(0,ie("AJAX_REQUEST_CONCURRENT")).map((X,le)=>{let he;return he=n.cloudProxyServer==="disabled"&&n.proxyServer?d("".concat(X,"/api/v2/transpond/webrtc?v=2"),le,n.proxyServer):n.cloudProxyServer==="disabled"||n.cloudProxyServer==="fallback"?"https://".concat(X,"/api/v2/transpond/webrtc?v=2"):d("".concat(X,"/api/v2/transpond/webrtc?v=2"),le),{url:he,areaCode:Y0(),serviceIds:[Sr.CHOOSE_SERVER,n.cloudProxyServer==="proxy5"?Sr.CLOUD_PROXY_5:n.cloudProxyServer==="proxy3"||n.cloudProxyServer==="proxy4"?Sr.CLOUD_PROXY:Sr.CLOUD_PROXY_FALLBACK]}}),Y=s.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:j.map(X=>X.url)}),q=await Dp({fragementLength:ie("FRAGEMENT_LENGTH"),referenceList:j,asyncMapHandler:X=>(U.debug("[".concat(n.clientId,"] Connect to choose_server:"),X.url),VD(X,n,r,i)),allFailedhandler:X=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:X},Y),X[0]},promisesCollector:v});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},Y),q},T=async()=>{if(await ti(1e3),p!==null)return p;const j=ie("WEBCS_DOMAIN_BACKUP_LIST").map((X,le)=>{let he;return he=n.cloudProxyServer==="disabled"&&n.proxyServer?d("".concat(X,"/api/v2/transpond/webrtc?v=2"),le,n.proxyServer):n.cloudProxyServer==="disabled"||n.cloudProxyServer==="fallback"?"https://".concat(X,"/api/v2/transpond/webrtc?v=2"):d("".concat(X,"/api/v2/transpond/webrtc?v=2"),le),{url:he,areaCode:Y0(),serviceIds:[Sr.CHOOSE_SERVER,n.cloudProxyServer==="proxy5"?Sr.CLOUD_PROXY_5:n.cloudProxyServer==="proxy3"||n.cloudProxyServer==="proxy4"?Sr.CLOUD_PROXY:Sr.CLOUD_PROXY_FALLBACK]}}),Y=s.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:j.map(X=>X.url)}),q=await Dp({fragementLength:ie("FRAGEMENT_LENGTH"),referenceList:j,asyncMapHandler:X=>(U.debug("[".concat(n.clientId,"] Connect to backup choose_server:"),X.url),VD(X,n,r,i)),allFailedhandler:X=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:X},Y),X[0]},promisesCollector:v});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},Y),q};let C,R,L;try{({gatewayInfo:C,proxyInfo:R,url:L}=await xd([E(),T()]))}catch(j){throw j[0]}if(v.length&&v.forEach(j=>j.cancel&&typeof j.cancel=="function"&&j.cancel()),!C||!R)throw new Q(W.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(n.apUrl=L,n.cloudProxyServer!=="disabled"&&Array.isArray(l)&&L){const j=/^https?:\/\/(.+?)(\/.*)?$/.exec(L)[1];l.includes(j)&&(n.proxyServer=j,U.setProxyServer(j),Ue.setProxyServer(j))}return p={gatewayInfo:C,proxyInfo:await KY(R,C.uid)},p}async function zD(n,r,i,s){const l=ie("UAP_AP").slice(0,ie("AJAX_REQUEST_CONCURRENT")).map(d=>r.proxyServer?"https://".concat(r.proxyServer,"/ap/?url=").concat(d+"/api/v1?action=uap"):"https://".concat(d,"/api/v1?action=uap"));return await rq(l,n,r,i,s)}async function sq(n,r,i){const s=ie("UAP_AP").slice(0,ie("AJAX_REQUEST_CONCURRENT")).map(l=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(l+"/api/v1?action=uap"):"https://".concat(l,"/api/v1?action=uap")).map(l=>function(d,p,v,E){const T={command:"convergeAllocateEdge",sid:p.sid,appId:p.appId,token:p.token,ts:Date.now(),version:Zo,cname:p.cname,uid:p.uid.toString(),requestId:eC,seq:eC};eC+=1;const C={service_name:"tele_channel",json_body:JSON.stringify(T)};return es(async()=>{const R=await wa(d,{data:C,cancelToken:v,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(R.code!==0){const j=new Q(W.UNEXPECTED_RESPONSE,"cross channel ap error, code"+R.code,{retry:!0});throw U.error(j.toString()),j}const L=JSON.parse(R.json_body);if(L.code!==200){const j=new Q(W.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(L.code,", reason: ").concat(L.reason));throw U.error(j.toString()),j}if(!L.servers||L.servers.length===0){const j=new Q(W.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw U.error(j.toString()),j}return{vid:L.vid,workerToken:L.workerToken,addressList:(ie("CHANNEL_MEDIA_RELAY_SERVERS")||L.servers).map(j=>"wss://".concat(j.address.replace(/\./g,"-"),".").concat(ie("WORKER_DOMAIN"),":").concat(j.wss))}},void 0,R=>!!(R.code!==W.OPERATION_ABORTED&&R.code!==W.UNEXPECTED_RESPONSE||R.data&&R.data.retry),E)}(l,n,r,i));try{const l=await xd(s);return s.forEach(d=>d.cancel()),l}catch(l){throw l[0]}}async function cq(n,r,i){let s=null;const l=[],d=async p=>{const v=ie(p?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(E=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(E+"/api/v2/transpond/webrtc?v=2"):"https://".concat(E,"/api/v2/transpond/webrtc?v=2"));return p&&(await ti(1e3),s!==null)?s:await Dp({fragementLength:ie("FRAGEMENT_LENGTH"),referenceList:v,asyncMapHandler:E=>(U.debug("[".concat(n.clientId,"] update ticket, Connect to ").concat(p?"backup":""," choose_server:"),E),function(T,C,R,L){const[j]=oq(C,[Sr.CHOOSE_SERVER]);let Y=tr.networkState;return es(async()=>{Y&&tr.networkState===ui.OFFLINE&&tr.onlineWaiter&&await Pe.race([tr.onlineWaiter,ti(L&&L.maxRetryTimeout||Qn.maxRetryTimeout)]),Y=tr.networkState;const q=await wa(T,{data:j,cancelToken:R,headers:{"Content-Type":"multipart/form-data;"}},!0);return iq(q,T)},()=>!1,q=>q.code!==W.OPERATION_ABORTED&&(q.code===W.UPDATE_TICKET_FAILED?q.data.retry:(U.warning("[".concat(C.clientId,"] update ticket network error, retry"),q),!0)),L)}(E,n,r,i)),allFailedhandler:E=>{throw E[0]},promisesCollector:l})};try{return s=await xd([d(!1),d(!0)]),l.length&&l.forEach(p=>p.cancel&&typeof p.cancel=="function"&&p.cancel()),s}catch(p){throw p[0]}}function KD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function YD(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?KD(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):KD(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class lq extends In{constructor(){super(),N(this,"configs",void 0),N(this,"joinInfo",void 0),N(this,"cancelToken",void 0),N(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),N(this,"interval",void 0),N(this,"mutex",new Ri("config-distribute")),N(this,"mutableParamsRead",!1)}startGetConfigDistribute(r,i){this.joinInfo=r,this.cancelToken=i,this.interval&&this.stopGetConfigDistribute(),ie("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},ie("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,Ue.reportApiInvoke(null,{options:void 0,name:Zn.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:bn.TRACER}).onSuccess(JSON.stringify(nu))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void U.debug("[config-distribute] get config distribute interrupted have no joininfo");let r;const i=await this.mutex.lock();try{r=await aq(this.joinInfo,this.cancelToken,this.retryConfig),U.debug("[config-distribute] get config distribute",JSON.stringify(r)),r.limit_bitrate&&this.handleBitrateLimit(r.limit_bitrate),this.cacheGlobalParameterConfig(r),this.configs=r}catch(s){const l=new Q(W.NETWORK_RESPONSE_ERROR,s);U.warning("[config-distribute] ".concat(l.toString()))}finally{i()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(r){var i;(i=r)&&i.uplink&&i.id&&i.uplink.max_bitrate!==void 0&&i.uplink.min_bitrate!==void 0&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==r.id&&this.emit(Np.UPDATE_BITRATE_LIMIT,r):this.emit(Np.UPDATE_BITRATE_LIMIT,r))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&YD({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(r){var i;const s=vy(i=Object.keys(r).filter(d=>/^webrtc_ng_global_parameter/.test(d))).call(i);for(let d=0;d<s.length;d++)for(let p=s.length-1;p>d;p--){const v=s[p];if(typeof r[v].__priority=="number"){const E=r[v].__priority,T=s[p-1];if(typeof r[T].__priority=="number"){if(!(E>r[T].__priority))continue;{const C=v;s[p]=s[p-1],s[p-1]=C}}else{const C=v;s[p]=s[p-1],s[p-1]=C}}}const l={};s.forEach(d=>{const p=r[d],v=p.__expires;Object.keys(p).forEach(E=>{E==="__priority"||E==="__expires"||Object.prototype.hasOwnProperty.call(l,E)||(l[E]=YD({value:p[E]},v&&{expires:v}))})});try{const d=JSON.stringify(l),p=window.btoa(d);window.localStorage.setItem("websdk_ng_global_parameter",p),U.debug("Caching global parameters ".concat(d))}catch(d){U.error("Error caching global parameters:",d.message)}}}function qD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function Lp(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?qD(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):qD(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class uq extends In{constructor(r,i,s,l){super(),N(this,"spec",void 0),N(this,"token",void 0),N(this,"websocket",void 0),N(this,"pingpongTimer",void 0),N(this,"reconnectMode","retry"),N(this,"serviceMode",void 0),N(this,"reqId",0),N(this,"commandReqId",0),N(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),N(this,"handleWebSocketMessage",d=>{if(!d.data)return;const p=JSON.parse(d.data);p.requestId?this.emit("@".concat(p.requestId,"-").concat(p.sid),p):this.serviceMode===sr.INJECT?this.emit(Ia.INJECT_STREAM_STATUS,p):(Ue.workerEvent(this.spec.sid,{actionType:"status",serverCode:p.code,workerType:this.serviceMode===sr.TRANSCODE?1:2}),this.emit(Ia.PUBLISH_STREAM_STATUS,p))}),this.spec=i,this.token=r,this.serviceMode=l,this.websocket=new du("live-streaming",s),this.websocket.on(it.CONNECTED,this.handleWebSocketOpen),this.websocket.on(it.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(it.REQUEST_NEW_URLS,(d,p)=>{ni(this,Ia.REQUEST_NEW_ADDRESS).then(d).catch(p)}),this.websocket.on(it.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(r){return this.websocket.init(r)}async request(r,i,s,l){this.reqId+=1,r==="request"&&(this.commandReqId+=1);const d=this.commandReqId,p=this.reqId;if(!p||!this.websocket)throw new Q(W.UNEXPECTED_ERROR);const v=Lp({command:r,sdkVersion:Zo==="4.18.2"?"0.0.1":Zo,seq:p,requestId:p,allocate:s,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},i);if(this.websocket.state==="closed")throw new Q(W.WS_DISCONNECT);const E=()=>new Pe((L,j)=>{this.websocket.once(it.CLOSED,()=>j(new Q(W.WS_ABORT))),this.websocket.once(it.CONNECTED,L)});this.websocket.state!=="connected"&&await E(),v.clientRequest&&(v.clientRequest.workerToken=this.token);const T=new Pe((L,j)=>{const Y=()=>{j(new Q(W.WS_ABORT))};this.websocket.once(it.RECONNECTING,Y),this.websocket.once(it.CLOSED,Y),this.once("@".concat(p,"-").concat(this.spec.sid),q=>{L(q)})});l&&Ue.workerEvent(this.spec.sid,Lp(Lp({},l),{},{requestId:d,actionType:"request",payload:JSON.stringify(i.clientRequest),serverCode:0,code:0}));const C=Date.now();this.websocket.sendMessage(v);let R=null;try{R=await T}catch(L){if(this.websocket.state==="closed")throw L;return await E(),await this.request(r,i,s)}return l&&Ue.workerEvent(this.spec.sid,Lp(Lp({},l),{},{requestId:d,actionType:"response",payload:JSON.stringify(R.serverResponse),serverCode:R.code,success:R.code===200,responseTime:Date.now()-C})),R.code!==200&&this.handleResponseError(R),R}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const r=Zo==="4.18.2"?"0.0.1":Zo;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:r,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(r){switch(r.code){case jn.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void U.warning("live stream response already exists stream");case jn.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case jn.LIVE_STREAM_RESPONSE_BAD_STREAM:case jn.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new Q(W.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:r.code}).throw();case jn.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;throw new Q(W.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case jn.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new Q(W.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:r.code}).throw();case jn.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const i=new Q(W.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(Ia.WARNING,i,r.serverResponse.url)}case jn.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const i=new Q(W.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(Ia.WARNING,i,r.serverResponse.url)}case jn.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new Q(W.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case jn.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new Q(W.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:r.code}).throw();case jn.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const i=new Q(W.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(Ia.WARNING,i,r.serverResponse.url)}case jn.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new Q(W.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:r.code}).throw();case jn.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new Q(W.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case jn.LIVE_STREAM_RESPONSE_WORKER_LOST:case jn.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;throw new Q(W.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case jn.ERROR_FAIL_SEND_MESSAGE:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;if(r.serverResponse.command==="UpdateTranscoding"||r.serverResponse.command==="ControlStream")return new Q(W.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:r.code}).throw();throw new Q(W.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case jn.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case jn.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case jn.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case jn.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new Q(W.LIVE_STREAMING_CDN_ERROR,"",{code:r.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(G0)},6e3)}}function XD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function Mi(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?XD(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):XD(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class dq extends In{constructor(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qn,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qn;super(),N(this,"onLiveStreamWarning",void 0),N(this,"onLiveStreamError",void 0),N(this,"onInjectStatusChange",void 0),N(this,"spec",void 0),N(this,"retryTimeout",1e4),N(this,"connection",void 0),N(this,"httpRetryConfig",void 0),N(this,"wsRetryConfig",void 0),N(this,"streamingTasks",new Map),N(this,"isStartingStreamingTask",!1),N(this,"taskMutex",new Ri("live-streaming")),N(this,"cancelToken",Ao.CancelToken.source()),N(this,"transcodingConfig",void 0),N(this,"injectConfig",Mi({},OK)),N(this,"injectLoopTimes",0),N(this,"uapResponse",void 0),N(this,"lastTaskId",1),N(this,"statusError",new Map),this.spec=r,this.httpRetryConfig=s,this.wsRetryConfig=i}async setTranscodingConfig(r){const i=Mi(Mi({},wK),r);i.videoCodecProfile!==66&&i.videoCodecProfile!==77&&i.videoCodecProfile!==100&&(U.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(i.videoCodecProfile," -> 100")),i.videoCodecProfile=100),i.transcodingUsers||(i.transcodingUsers=i.userConfigs),i.transcodingUsers&&(i.transcodingUsers=i.transcodingUsers.map(p=>Mi(Mi(Mi({},IK),p),{},{zOrder:p.zOrder?p.zOrder+1:1}))),function(p){Sn(p.width)||sn(p.width,"config.width",0,1e4),Sn(p.height)||sn(p.height,"config.height",0,1e4),Sn(p.videoBitrate)||sn(p.videoBitrate,"config.videoBitrate",1,1e6),Sn(p.videoFrameRate)||sn(p.videoFrameRate,"config.videoFrameRate"),Sn(p.lowLatency)||Sd(p.lowLatency,"config.lowLatency"),Sn(p.audioSampleRate)||Rr(p.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),Sn(p.audioBitrate)||sn(p.audioBitrate,"config.audioBitrate",1,128),Sn(p.audioChannels)||Rr(p.audioChannels,"config.audioChannels",[1,2,3,4,5]),Sn(p.videoGop)||sn(p.videoGop,"config.videoGop"),Sn(p.videoCodecProfile)||Rr(p.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),Sn(p.userCount)||sn(p.userCount,"config.userCount",0,17),Sn(p.backgroundColor)||sn(p.backgroundColor,"config.backgroundColor",0,16777215),Sn(p.userConfigExtraInfo)||qr(p.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),p.transcodingUsers&&!Sn(p.transcodingUsers)&&(sc(p.transcodingUsers,"config.transcodingUsers"),p.transcodingUsers.forEach((v,E)=>{Sy(v.uid),Sn(v.x)||sn(v.x,"transcodingUser[".concat(E,"].x"),0,1e4),Sn(v.y)||sn(v.y,"transcodingUser[".concat(E,"].y"),0,1e4),Sn(v.width)||sn(v.width,"transcodingUser[".concat(E,"].width"),0,1e4),Sn(v.height)||sn(v.height,"transcodingUser[".concat(E,"].height"),0,1e4),Sn(v.zOrder)||sn(v.zOrder-1,"transcodingUser[".concat(E,"].zOrder"),0,100),Sn(v.alpha)||sn(v.alpha,"transcodingUser[".concat(E,"].alpha"),0,1,!1)})),Sn(p.watermark)||wy(p.watermark,"watermark"),Sn(p.backgroundImage)||wy(p.backgroundImage,"backgroundImage"),p.images&&!Sn(p.images)&&(sc(p.images,"config.images"),p.images.forEach((v,E)=>{wy(v,"images[".concat(E,"]"))}))}(i);const s=[];i.images&&s.push(...i.images.map(p=>Mi(Mi(Mi({},Iy),p),{},{zOrder:255}))),i.backgroundImage&&(s.push(Mi(Mi(Mi({},Iy),i.backgroundImage),{},{zOrder:0})),delete i.backgroundImage),i.watermark&&(s.push(Mi(Mi(Mi({},Iy),i.watermark),{},{zOrder:255})),delete i.watermark),i.images=s,i.transcodingUsers&&(i.userConfigs=i.transcodingUsers.map(p=>Mi({},p)),i.userCount=i.transcodingUsers.length,delete i.transcodingUsers);const l=(i.userConfigs||[]).map(p=>typeof p.uid=="number"?Pe.resolve(p.uid):WD(p.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await Pe.all(l)).forEach((p,v)=>{i.userConfigs&&i.userConfigs[v]&&(i.userConfigs[v].uid=p)}),this.transcodingConfig=i,this.connection)try{var d;const p=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(ks(d=this.streamingTasks).call(d)).map(v=>v.taskId).join("#")});U.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(p.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(p){if(!p.data||!p.data.retry)throw p;p.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(v=>{U.warning("[".concat(this.spec.clientId,"] live streaming receive error"),p.toString(),"try to republish",v.url),this.startLiveStreamingTask(v.url,v.mode,p).then(()=>{U.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(v.url," success"))}).catch(E=>{U.error("[".concat(this.spec.clientId,"] live streaming republish failed"),v.url,E.toString()),this.onLiveStreamError&&this.onLiveStreamError(v.url,E)})})}}setInjectStreamConfig(r,i){this.injectConfig=Object.assign({},this.injectConfig,r),this.injectLoopTimes=i}async startLiveStreamingTask(r,i,s){var l;if(Array.from(ks(l=this.streamingTasks).call(l)).find(E=>E.mode===sr.INJECT)&&i===sr.INJECT)return new Q(W.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&i===sr.TRANSCODE)throw new Q(W.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let d={command:"PublishStream",ts:Date.now(),url:r,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};U.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(r,", mode: ").concat(i));const p=await this.taskMutex.lock();if(!this.connection&&s)return void p();if(this.streamingTasks.get(r)&&!s)return p(),new Q(W.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(i))}catch(E){throw p(),E}switch(i){case sr.TRANSCODE:d.transcodingConfig=Mi({},this.transcodingConfig);break;case sr.RAW:break;case sr.INJECT:d={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:r,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(d.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const v=this.lastTaskId++;try{const E=new Pe((C,R)=>{ti(this.retryTimeout).then(()=>{if(s)return R(s);const L=this.statusError.get(r);return L?(this.statusError.delete(r),R(L)):void 0})}),T=await Pe.race([this.connection.request("request",{clientRequest:d},!0,{url:r,command:"PublishStream",workerType:i===sr.TRANSCODE?1:2,requestByUser:!s,tid:v.toString()}),E]);this.isStartingStreamingTask=!1,U.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(T.code)),this.streamingTasks.set(r,{clientRequest:d,mode:i,url:r,taskId:v}),p()}catch(E){if(p(),this.isStartingStreamingTask=!1,!E.data||!E.data.retry||s)throw E;return E.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(r,i,E)):await this.startLiveStreamingTask(r,i,E)}}stopLiveStreamingTask(r){return new Pe((i,s)=>{const l=this.streamingTasks.get(r);if(!l||!this.connection)return new Q(W.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const d=l.mode;l.abortTask=()=>{U.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(r),i()},this.connection.request("request",{clientRequest:{command:d===sr.INJECT?"UninjectStream":"UnpublishStream",url:l.url}},!1,{url:r,command:"UnPublishStream",workerType:d===sr.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(p=>{U.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(p.code)),this.streamingTasks.delete(r),this.streamingTasks.size===0&&d!==sr.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),i(),d===sr.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(Xc.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,r)}).catch(s)})}async controlInjectStream(r,i,s,l){const d=this.streamingTasks.get(r);if(!d||!this.connection||d.mode!==sr.INJECT)throw new Q(W.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:r,control:i,audioVolume:s,position:l}})).serverResponse}resetAllTask(){var r;const i=Array.from(ks(r=this.streamingTasks).call(r));this.terminate();for(const s of i)this.startLiveStreamingTask(s.url,s.mode).catch(l=>{this.onLiveStreamError&&this.onLiveStreamError(s.url,l)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=Ao.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(r){if(this.connection)throw new Q(W.UNEXPECTED_ERROR,"live streaming connection has already connected");const i=await ni(this,Cd.REQUEST_WORKER_MANAGER_LIST,r);return this.uapResponse=i,this.connection=new uq(i.workerToken,this.spec,this.wsRetryConfig,r),this.connection.on(Ia.WARNING,(s,l)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(l,s)),this.connection.on(Ia.PUBLISH_STREAM_STATUS,s=>this.handlePublishStreamServer(s)),this.connection.on(Ia.INJECT_STREAM_STATUS,s=>this.handleInjectStreamServerStatus(s)),this.connection.on(Ia.REQUEST_NEW_ADDRESS,(s,l)=>{if(!this.connection)return l(new Q(W.UNEXPECTED_ERROR,"can not get new live streaming address list"));ni(this,Cd.REQUEST_WORKER_MANAGER_LIST,r).then(d=>{this.uapResponse=d,s(d.addressList)}).catch(l)}),await this.connection.init(i.addressList),this.connection}handlePublishStreamServer(r){const i=r.serverStatus&&r.serverStatus.url||"empty_url",s=this.streamingTasks.get(i),l=r.reason;switch(r.code){case jn.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case jn.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case jn.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case jn.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const p=new Q(W.LIVE_STREAMING_CDN_ERROR,"",{code:r.code});if(s)return U.error(p.toString()),this.onLiveStreamError&&this.onLiveStreamError(i,p);if(!this.isStartingStreamingTask)return;this.statusError.set(i,p)}case jn.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const p=new Q(W.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,l);return this.onLiveStreamWarning&&this.onLiveStreamWarning(i,p)}case jn.LIVE_STREAM_RESPONSE_WORKER_LOST:case jn.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var d;if(!this.connection)return;this.connection.tryNextAddress();const p=Array.from(ks(d=this.streamingTasks).call(d));for(const v of p)v.abortTask?v.abortTask():(U.warning("[".concat(this.spec.clientId,"] publish stream status code"),r.code,"try to republish",v.url),this.startLiveStreamingTask(v.url,v.mode,new Q(W.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:r.code})).then(()=>{U.debug("[".concat(this.spec.clientId,"] republish live stream success"),v.url)}).catch(E=>{U.error(E.toString()),this.onLiveStreamError&&this.onLiveStreamError(v.url,E)}));return}}}handleInjectStreamServerStatus(r){const i=Number(r.uid),s=r.serverStatus&&r.serverStatus.url;switch(r.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(Xc.INJECT_STREAM_STATUS_START_SUCCESS,i,s));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(Xc.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,i,s),void this.streamingTasks.delete(s);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(Xc.INJECT_STREAM_STATUS_START_UNAUTHORIZED,i,s),void this.streamingTasks.delete(s);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(Xc.INJECT_STREAM_STATUS_BROKEN,i,s),void this.streamingTasks.delete(s);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(Xc.INJECT_STREAM_STATUS_START_TIMEOUT,i,s),void this.streamingTasks.delete(s);default:return void U.debug("inject stream server status",r)}}hasUrl(r){return this.streamingTasks.has(r)}}class JD{constructor(){N(this,"destChannelMediaInfos",new Map),N(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(r){$x(r),this.srcChannelMediaInfo=r}addDestChannelInfo(r){$x(r),this.destChannelMediaInfos.set(r.channelName,r)}removeDestChannelInfo(r){_y(r),this.destChannelMediaInfos.delete(r)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function QD(n){if(!(n instanceof JD))return new Q(W.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const r=n.getSrcChannelMediaInfo(),i=n.getDestChannelMediaInfo();if(!r)return new Q(W.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if(i.size===0)return new Q(W.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}class hq extends In{constructor(r,i,s){super(),N(this,"ws",void 0),N(this,"requestId",1),N(this,"heartBeatTimer",void 0),N(this,"joinInfo",void 0),N(this,"clientId",void 0),N(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),N(this,"onClose",l=>{this.emit("close"),this.dispose()}),N(this,"onMessage",l=>{const d=JSON.parse(l.data);if(!d||d.command!=="serverResponse"||!d.requestId)return d&&d.command==="serverStatus"&&d.serverStatus&&d.serverStatus.command?(this.emit("status",d.serverStatus),void this.emit(d.serverStatus.command,d.serverStatus)):void 0;this.emit("req_".concat(d.requestId),d)}),this.joinInfo=r,this.clientId=i,this.ws=new du("cross-channel-".concat(this.clientId),s),this.ws.on(it.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(it.CONNECTED,this.onOpen),this.ws.on(it.ON_MESSAGE,this.onMessage),this.ws.on(it.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(r){const i=this.requestId++;return r.requestId=i,r.seq=i,this.ws.sendMessage(r),i}waitStatus(r){return new Pe((i,s)=>{const l=window.setTimeout(()=>{s(new Q(W.TIMEOUT,"wait status timeout, status: ".concat(r)))},5e3);this.once(r,d=>{window.clearTimeout(l),d.state&&d.state!==0?s(new Q(W.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(r))):i(void 0)}),this.once("dispose",()=>{window.clearTimeout(l),s(new Q(W.WS_ABORT))})})}async request(r){if(this.ws.state==="closed")throw new Q(W.WS_DISCONNECT);const i=()=>new Pe((p,v)=>{this.ws.once(it.CLOSED,()=>v(new Q(W.WS_ABORT))),this.ws.once(it.CONNECTED,p)});this.ws.state!=="connected"&&await i();const s=this.sendMessage(r),l=new Pe((p,v)=>{const E=()=>{v(new Q(W.WS_ABORT))};this.ws.once(it.RECONNECTING,E),this.ws.once(it.CLOSED,E),this.once("req_".concat(s),p),ti(3e3).then(()=>{this.removeAllListeners("req_".concat(s)),this.ws.off(it.RECONNECTING,E),this.ws.off(it.CLOSED,E),v(new Q(W.TIMEOUT,"cross channel ws request timeout"))})}),d=await l;if(!d||d.code!==200)throw new Q(W.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(d)));return d}async connect(r){this.ws.removeAllListeners(it.REQUEST_NEW_URLS),this.ws.on(it.REQUEST_NEW_URLS,i=>{i(r)}),await this.ws.init(r)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(r){const i=this.requestId++;return r.requestId=i,this.ws.sendMessage(r),i}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class pq extends In{set state(r){r!==this._state&&(r!==Ti.RELAY_STATE_FAILURE&&(this.errorCode=Jc.RELAY_OK),this.emit("state",r,this.errorCode),this._state=r)}get state(){return this._state}constructor(r,i,s,l,d){super(),N(this,"joinInfo",void 0),N(this,"sid",void 0),N(this,"clientId",void 0),N(this,"cancelToken",Ao.CancelToken.source()),N(this,"workerToken",void 0),N(this,"requestId",0),N(this,"signal",void 0),N(this,"prevChannelMediaConfig",void 0),N(this,"httpRetryConfig",void 0),N(this,"_resolution",void 0),N(this,"_state",Ti.RELAY_STATE_IDLE),N(this,"errorCode",Jc.RELAY_OK),N(this,"onStatus",p=>{U.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(p))),p&&p.command&&(p.command==="onAudioPacketReceived"&&this.emit("event",ts.PACKET_RECEIVED_AUDIO_FROM_SRC),p.command==="onVideoPacketReceived"&&this.emit("event",ts.PACKET_RECEIVED_VIDEO_FROM_SRC),p.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=Jc.SRC_TOKEN_EXPIRED,this.state=Ti.RELAY_STATE_FAILURE),p.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=Jc.DEST_TOKEN_EXPIRED,this.state=Ti.RELAY_STATE_FAILURE))}),N(this,"onReconnect",async()=>{U.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",ts.NETWORK_DISCONNECTED),this.state=Ti.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(p=>{this.state!==Ti.RELAY_STATE_IDLE&&(U.error("auto restart channel media relay failed",p.toString()),this.errorCode=Jc.SERVER_CONNECTION_LOST,this.state=Ti.RELAY_STATE_FAILURE)})}),this.joinInfo=r,this.clientId=i,this.sid=Ky(),this.signal=new hq(this.joinInfo,this.clientId,s),this.httpRetryConfig=l,this._resolution=d}async startChannelMediaRelay(r){if(this.state!==Ti.RELAY_STATE_IDLE)throw new Q(W.INVALID_OPERATION);this.state=Ti.RELAY_STATE_CONNECTING,await this.connect(),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(r)}catch(i){throw i.data&&i.data.serverResponse&&i.data.serverResponse.command==="SetSourceChannel"?new Q(W.CROSS_CHANNEL_FAILED_JOIN_SRC):i.data&&i.data.serverResponse&&i.serverResponse.command==="SetDestChannelStatus"?new Q(W.CROSS_CHANNEL_FAILED_JOIN_DEST):i.data&&i.data.serverResponse&&i.serverResponse.command==="StartPacketTransfer"?new Q(W.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):i}this.prevChannelMediaConfig=r}async updateChannelMediaRelay(r){if(this.state!==Ti.RELAY_STATE_RUNNING)throw new Q(W.INVALID_OPERATION);await this.sendUpdateMessage(r),this.prevChannelMediaConfig=r}async setVideoProfile(r){if(this._resolution=r,this.state!==Ti.RELAY_STATE_RUNNING)throw new Q(W.INVALID_OPERATION);const i=this.genMessage(Qr.SetVideoProfile);await this.signal.request(i),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),U.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=Ti.RELAY_STATE_IDLE,this.dispose()}dispose(){U.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=Ao.CancelToken.source(),this.state=Ti.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const r=await sq(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=r.workerToken,await this.signal.connect(r.addressList),this.emit("event",ts.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(r){const i=this.genMessage(Qr.StopPacketTransfer);await this.signal.request(i),await this.signal.waitStatus("Normal Quit"),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const s=this.genMessage(Qr.SetSdkProfile,r);await this.signal.request(s),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const l=this.genMessage(Qr.SetSourceChannel,r);await this.signal.request(l),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",ts.PACKET_JOINED_SRC_CHANNEL),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const d=this.genMessage(Qr.SetSourceUserId,r);await this.signal.request(d),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const p=this.genMessage(Qr.SetDestChannel,r);await this.signal.request(p),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",ts.PACKET_JOINED_DEST_CHANNEL),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const v=this.genMessage(Qr.StartPacketTransfer,r);await this.signal.request(v),this.emit("event",ts.PACKET_SENT_TO_DEST_CHANNEL),this.state=Ti.RELAY_STATE_RUNNING,U.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(r){const i=this.genMessage(Qr.UpdateDestChannel,r);await this.signal.request(i),this.emit("event",ts.PACKET_UPDATE_DEST_CHANNEL),U.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const r=this.genMessage(Qr.StopPacketTransfer);await this.signal.request(r),U.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(r,i){const s=[],l=[],d=[];this.requestId+=1;const p={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:Zo,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};p.sdkVersion==="4.18.2"&&(p.sdkVersion="0.0.1");let v=null,E=null;switch(r){case Qr.SetSdkProfile:return p.clientRequest={command:"SetSdkProfile",type:"multi_channel"},p;case Qr.SetSourceChannel:if(E=i&&i.getSrcChannelMediaInfo(),!E)throw new Q(W.UNEXPECTED_ERROR,"can not find source config");return p.clientRequest={command:"SetSourceChannel",uid:"0",channelName:E.channelName,token:E.token||this.joinInfo.appId},p;case Qr.SetSourceUserId:if(E=i&&i.getSrcChannelMediaInfo(),!E)throw new Q(W.UNEXPECTED_ERROR,"can not find source config");return p.clientRequest={command:"SetSourceUserId",uid:E.uid+""},p;case Qr.SetDestChannel:if(v=i&&i.getDestChannelMediaInfo(),!v)throw new Q(W.UNEXPECTED_ERROR,"can not find dest config");return v.forEach(T=>{s.push(T.channelName),l.push(T.uid+""),d.push(T.token||this.joinInfo.appId)}),p.clientRequest={command:"SetDestChannel",channelName:s,uid:l,token:d},p;case Qr.StartPacketTransfer:return p.clientRequest={command:"StartPacketTransfer"},p;case Qr.Reconnect:return p.clientRequest={command:"Reconnect"},p;case Qr.StopPacketTransfer:return p.clientRequest={command:"StopPacketTransfer"},p;case Qr.UpdateDestChannel:if(v=i&&i.getDestChannelMediaInfo(),!v)throw new Q(W.UNEXPECTED_ERROR,"can not find dest config");return v.forEach(T=>{s.push(T.channelName),l.push(T.uid+""),d.push(T.token||this.joinInfo.appId)}),p.clientRequest={command:"UpdateDestChannel",channelName:s,uid:l,token:d},p;case Qr.SetVideoProfile:p.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return p}}const nC=n=>{const r=document.createElement("canvas");return r.width=2,r.height=2,new Pe((i,s)=>{r.toBlob(async l=>{if(r.remove(),l){const d=await ZD(l);i({buffer:d,width:r.width,height:r.height})}else s(new Q(W.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},n,1)})},ZD=async n=>{const r=await n.arrayBuffer();return new Uint8Array(r)};function ek(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function tk(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?ek(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ek(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class rC{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(r){r!==this._videoElementStatus&&(U.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(r)),this._videoElementStatus=r)}constructor(r){N(this,"trackId",void 0),N(this,"config",void 0),N(this,"onFirstVideoFrameDecoded",void 0),N(this,"freezeTimeCounterList",[]),N(this,"renderFreezeAccTime",0),N(this,"isKeepLastFrame",!1),N(this,"timeUpdatedCount",0),N(this,"freezeTime",0),N(this,"playbackTime",0),N(this,"lastTimeUpdatedTime",0),N(this,"autoplayFailed",!1),N(this,"videoTrack",void 0),N(this,"videoElement",void 0),N(this,"cacheVideoElement",void 0),N(this,"videoElementCheckInterval",void 0),N(this,"_videoElementStatus",Xr.NONE),N(this,"isGettingVideoDimensions",!1),N(this,"startGetVideoDimensions",()=>{const i=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return U.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(i,500)};!this.isGettingVideoDimensions&&i()}),N(this,"autoResumeAfterInterruption",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&Gt.curState==="running"&&(U.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(PN())),UN()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),N(this,"handleVideoEvents",i=>{switch(i.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=Xr.PLAYING;break;case"loadeddata":if(this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch{}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=Xr.CANPLAY;break;case"stalled":this.videoElementStatus=Xr.STALLED;break;case"suspend":this.videoElementStatus=Xr.SUSPEND;break;case"pause":this.videoElementStatus=Xr.PAUSED,Ci()||Ps()||yi()&&this.autoplayFailed||!this.videoTrack||this.videoTrack.readyState!=="live"||(U.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=Xr.WAITING;break;case"abort":this.videoElementStatus=Xr.ABORT;break;case"ended":this.videoElementStatus=Xr.ENDED;break;case"emptied":this.videoElementStatus=Xr.EMPTIED;break;case"error":{this.videoElementStatus=Xr.ERROR;const s=this.videoElement.error;s&&U.error("[".concat(this.trackId,"] media error, code: ").concat(s.code,", message: ").concat(s.message));break}case"timeupdate":{const s=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=s);const l=s-this.lastTimeUpdatedTime,d=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=s,lc.lastVisibleTime<lc.lastHiddenTime||d<lc.lastHiddenTime||d<lc.lastVisibleTime)return;for(l>ie("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=l),this.playbackTime+=l;this.playbackTime>=6e3;){this.playbackTime-=6e3;const p=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(p),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),N(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&(U.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(PN())),UN()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),this.trackId=r.trackId,this.config=r,r.element instanceof HTMLVideoElement?this.videoElement=r.element:this.videoElement=document.createElement("video"),Gt.on(yr.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Gt.on(yr.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var r;return(r=this.videoElement.parentElement)!==null&&r!==void 0?r:void 0}updateConfig(r){this.config=r,this.trackId=r.trackId,r.element!==this.videoElement&&(this.destroy(),this.videoElement=r.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(r){this.videoTrack!==r&&(this.videoTrack=r,this.initVideoElement())}play(r){const i=this.videoElement.play();i&&i.catch&&i.catch(l=>{r&&Ue.autoplayFailed(r,"video",l.message,this.trackId),l.name==="NotAllowedError"?(U.warning("detected video element autoplay failed",l),this.autoplayFailed=!0,this.handleAutoPlayFailed()):U.warning("[".concat(this.trackId,"] play warning: "),l)});const s=Ht();if((s.name==="Safari"&&Number(s.version)===15||hd())&&i&&i.then&&i.catch){const l=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};i.then(l).catch(l)}}getCurrentFrame(){const r=document.createElement("canvas");r.width=this.videoElement.videoWidth,r.height=this.videoElement.videoHeight;const i=r.getContext("2d");if(!i)return U.error("create canvas context failed!"),new ImageData(2,2);i.drawImage(this.videoElement,0,0,r.width,r.height);const s=i.getImageData(0,0,r.width,r.height);return r.remove(),s}async getCurrentFrameToUint8Array(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const s=document.createElement("canvas");s.width=this.videoElement.videoWidth,s.height=this.videoElement.videoHeight;const l=s.getContext("2d");return l?(l.drawImage(this.videoElement,0,0,s.width,s.height),new Pe((d,p)=>{s.toBlob(async v=>{if(s.remove(),v){const E=await ZD(v);d({buffer:E,width:s.width,height:s.height})}else p(new Q(W.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},r,i<0?.1:i>1?1:i)})):await nC(r)}destroy(){Gt.off(yr.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Gt.off(yr.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[]}initVideoElement(){if(this.videoElementStatus=Xr.INIT,!this.videoElementCheckInterval&&(nk.forEach(d=>{this.videoElement.addEventListener(d,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{(function(d){return d!==document.body&&document.body.contains(d)})(this.videoElement)||(this.videoElementStatus=Xr.DESTROYED)},1e3),ie("ENABLE_VIDEO_FRAME_CALLBACK"))){var r,i;let d;const p=(v,E)=>{if(this.videoElementStatus===Xr.PLAYING){if(d){const R=E.presentationTime-d.presentationTime;R>ie("VIDEO_FREEZE_DURATION")&&lc.lastVisibleTime>=lc.lastHiddenTime&&d.timestamp>lc.lastVisibleTime&&d.timestamp>lc.lastHiddenTime&&(this.renderFreezeAccTime+=R)}d=tk(tk({},E),{},{timestamp:v})}var T,C;ie("ENABLE_VIDEO_FRAME_CALLBACK")&&((T=(C=this.videoElement).requestVideoFrameCallback)===null||T===void 0||T.call(C,p))};(r=(i=this.videoElement).requestVideoFrameCallback)===null||r===void 0||r.call(i,p)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),S0()&&(this.videoElement.poster="noposter");const s=Ht();s.name==="Safari"&&Number(s.version)===15||hd()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Dn()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Dn()&&this.videoElement.load());const l=this.videoElement.play();l!==void 0&&l.catch(d=>{U.debug("[".concat(this.trackId,"] playback interrupted"),d.toString())})}resetVideoElement(){nk.forEach(r=>{this.videoElement&&this.videoElement.removeEventListener(r,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=Xr.NONE}handleAutoPlayFailed(){const r=i=>{i.preventDefault(),this.videoElement.play().then(()=>{U.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(s=>{U.error(s)}),this.autoplayFailed=!1,bp()?document.body.removeEventListener("click",r,!0):(document.body.removeEventListener("touchstart",r,!0),document.body.removeEventListener("mousedown",r,!0))};bp()?document.body.addEventListener("click",r,!0):(document.body.addEventListener("touchstart",r,!0),document.body.addEventListener("mousedown",r,!0)),oP()}}const nk=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class rk extends rC{constructor(r){super(r),N(this,"container",void 0),N(this,"slot",void 0),this.slot=r.element,this.updateConfig(r)}updateConfig(r){this.config=r,this.trackId=r.trackId;const i=r.element;i!==this.slot&&(this.destroy(),this.slot=i),this.createElements()}updateVideoTrack(r){this.videoTrack!==r&&(this.videoTrack=r,this.createElements())}play(r){var i;(i=this.container)!==null&&i!==void 0&&i.contains(this.videoElement)&&super.play(r)}getCurrentFrame(){var r;return(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(r){var i;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(i=this.container)!==null&&i!==void 0&&i.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(r,s):await nC(r)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",ie("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var r;!this.container||(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var r;if((r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=document.createElement("video")}}resetVideoElement(){var r;(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}function X0(n){const r={};n.facingMode&&(r.facingMode=n.facingMode),n.cameraId&&(r.deviceId={exact:n.cameraId});const i=tu(n.encoderConfig);return r.width=i.width,r.height=i.height,!VN()&&i.frameRate&&(r.frameRate=i.frameRate),Ht().name===qt.EDGE&&typeof r.frameRate=="object"&&(r.frameRate.max=60),Dn()&&(r.frameRate={ideal:30,max:30}),r}function fq(n){const r={};n.screenSourceType&&(r.mediaSource=n.screenSourceType),n.extensionId&&HS()&&(r.extensionId=n.extensionId);const{displaySurface:i,selfBrowserSurface:s,surfaceSwitching:l,systemAudio:d}=n;(WS(107)||DN(107)||kN(93))&&(i&&(Rr(i,"displaySurface",["browser","window","monitor"]),r.displaySurface=i),s?(Rr(s,"selfBrowserSurface",["exclude","include"]),r.selfBrowserSurface=s):r.selfBrowserSurface="include",l&&(Rr(l,"surfaceSwitching",["exclude","include"]),r.surfaceSwitching=l)),(WS(105)||DN(105)||kN(91))&&d&&(Rr(d,"systemAudio",["exclude","include"]),r.systemAudio=d),n.electronScreenSourceId&&(r.sourceId=n.electronScreenSourceId);const p=n.encoderConfig?dy(n.encoderConfig):null;return r.mandatory={chromeMediaSource:"desktop",maxWidth:p?p.width:void 0,maxHeight:p?p.height:void 0},p&&(p.frameRate&&(typeof p.frameRate=="number"?(r.mandatory.maxFrameRate=p.frameRate,r.mandatory.minFrameRate=p.frameRate):(r.mandatory.maxFrameRate=p.frameRate.max||p.frameRate.ideal||p.frameRate.exact||void 0,r.mandatory.minFrameRate=p.frameRate.min||p.frameRate.ideal||p.frameRate.exact||void 0),r.frameRate=p.frameRate),p.width&&(r.width=p.width),p.height&&(r.height=p.height)),r}function ik(n){const r={};if(VN()||(n.AGC!==void 0&&(r.autoGainControl=n.AGC),n.AEC!==void 0&&(r.echoCancellation=n.AEC),n.ANS!==void 0&&(r.noiseSuppression=n.ANS,HS()&&n.ANS&&(r.googHighpassFilter=n.ANS))),n.encoderConfig){const i=P0(n.encoderConfig);r.channelCount=i.stereo?2:1,r.sampleRate=i.sampleRate,r.sampleSize=i.sampleSize}return n.microphoneId&&(r.deviceId={exact:n.microphoneId}),S0()&&(r.sampleRate=void 0),r}var Dd,J0;(function(n){n.COVERED="COVERED",n.POSITION="POSITION",n.SIZE="SIZE",n.STYLE="STYLE"})(Dd||(Dd={})),function(n){n.UNMOUNTED="UNMOUNTED",n.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(J0||(J0={}));var ok,ak,sk,ck,lk,uk,dk,hk,pk,fk,mk,gk,vk,Ek,_k,Sk,yk,Ck,bk,Tk,Rk,Ik,wk,Ok,Rt,Ak,Nk,xk,Pk,Dk,kk,Lk,Mk,ra,Uk=new class{constructor(){N(this,"_clientSize",null),N(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),N(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),N(this,"getStyle",n=>window.getComputedStyle(n,null)),N(this,"checkCssVisibleProperty",n=>{let r=!0;const i=this.getStyle(n),{display:s,visibility:l,opacity:d,filter:p}=i;return(s==="none"||["hidden","collapse"].includes(l)||Number(d)<.1)&&(r=!1),r?(p&&p.split(" ").filter(v=>{const E=v.split("(")[0];return["brightness","blur","opacity"].includes(E)}).map(v=>{const[E,T]=v.split(/\(|\)/);return[E,Number(T.match(/^[0-9\.]+/))]}).forEach(v=>{const[E,T]=v;switch(E){case"brightness":(T<.1||T>3)&&(r=!1);break;case"blur":T>3&&(r=!1);break;case"opacity":T<.1&&(r=!1)}}),r):!1}),N(this,"checkPropertyUpToAllParentNodes",(n,r)=>{let i=!0,s=!0;const l=p=>r(p);let d=n;for(;d&&s;)l(d)||(i=!1,s=!1),d=d.parentElement,d||(s=!1);return i}),N(this,"checkActualCssVisibleIncludeInherit",n=>this.checkPropertyUpToAllParentNodes(n,this.checkCssVisibleProperty)),N(this,"getSizeAboutClient",n=>{const{width:r,height:i,left:s,right:l,top:d,bottom:p}=n.getBoundingClientRect(),v=this.getClientWidth(),E=this.getClientHeight();return{width:r,height:i,left:s,right:l,top:d,bottom:p,clientWidth:v,clientHeight:E,clientMin:Math.min(v,E)}}),N(this,"checkActualSize",()=>{const{width:n,height:r,clientMin:i}=this._clientSize;return this.checkSizeIsVisible(n,r,i)}),N(this,"elementFromPoint",(n,r)=>document.elementFromPoint?document.elementFromPoint(n,r):null),N(this,"checkCoverForAPoint",(n,r,i)=>{const s=this.elementFromPoint(n,r);return s!==null&&s!==i}),N(this,"getPointPositionList",()=>{const{width:n,height:r,left:i,top:s}=this._clientSize,l=n/6,d=r/6,p=[],v=10**6;for(let E=0;E<5;E++)for(let T=0;T<5;T++){const C=(i*v+(E===0?.1:E===4?(l*E*v-1e5)/v:l*E)*v)/v,R=(s*v+(T===0?.1:T===4?(d*T*v-1e5)/v:d*T)*v)/v;p.push({x:C,y:R})}return[...p]}),N(this,"checkElementCover",n=>this.getPointPositionList().map(r=>this.checkCoverForAPoint(r.x,r.y,n)).filter(r=>!!r).length>6),N(this,"checkSizeIsVisible",(n,r,i)=>(n>50||i/n<=10)&&(r>50||i/r<=10)),N(this,"checkSizeOfPartInClient",()=>{const{left:n,right:r,top:i,bottom:s,clientHeight:l,clientWidth:d,clientMin:p}=this._clientSize;let v,E,T,C;if(n<0)v=0;else{if(!(n<d))return!1;v=n}if(r<0)return!1;if(E=r<d?r:d,i<0)T=0;else{if(!(i<l))return!1;T=i}if(s<0)return!1;C=s<l?s:l;const R=E-v,L=C-T;return this.checkSizeIsVisible(R,L,p)}),N(this,"returnHiddenResult",n=>(this._clientSize=null,{visible:!1,reason:n})),N(this,"checkOneElementVisible",n=>{if(n instanceof HTMLElement){if(this.checkElementIsMountedOnDom(n)){if(this.checkActualCssVisibleIncludeInherit(n)){if(this._clientSize=this.getSizeAboutClient(n),this.checkElementCover(n))return this.returnHiddenResult(Dd.COVERED);{const r=this.checkActualSize(),i=this.checkSizeOfPartInClient();return r&&!i?this.returnHiddenResult(Dd.POSITION):r?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(Dd.SIZE)}}return this.returnHiddenResult(Dd.STYLE)}return this.returnHiddenResult(J0.UNMOUNTED)}return this.returnHiddenResult(J0.INVALID_HTML_ELEMENT)}),N(this,"checkElementIsMountedOnDom",n=>this.checkPropertyUpToAllParentNodes(n,r=>r.nodeName.toUpperCase()!=="HTML"?r.parentElement!==null:!!document.documentElement))}};function Fk(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function Mp(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Fk(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Fk(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}let rr=(ok=ze({argsMap:(n,r,i)=>[n.getTrackId(),typeof r=="string"?r:r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",i]}),ak=Ln(),sk=ze({argsMap:n=>[n.getTrackId()]}),ck=Rd("LocalVideoTrack","_enabledMutex"),lk=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),uk=Ln(),dk=Rd("LocalVideoTrack","_enabledMutex"),hk=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),pk=Ln(),fk=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),mk=Ln(),gk=Ln(),vk=ze({argsMap:(n,r,i)=>[n.getTrackId(),r,i]}),Ek=Ln(),_k=Ln(),Sk=Ln(),yk=Ln(),Ck=Ln(),bk=Ln(),Tk=Ln(),Rk=ze({argsMap:(n,r)=>[n.getTrackId(),r.name]}),Ik=ze({argsMap:n=>[n.getTrackId()]}),wk=ze({argsMap:n=>[n.getTrackId()]}),Ok=ze({argsMap:(n,r,i)=>[n.getTrackId(),r.label,i]}),_e((Rt=class aj extends Fy{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Xr.PLAYING)}get processorContext(){return this._processorContext}set processorContext(r){this._processorContext=r}get __className__(){return"LocalVideoTrack"}constructor(r,i,s,l,d,p){if(super(r,d),N(this,"trackMediaType","video"),N(this,"_player",void 0),N(this,"_videoVisibleTimer",null),N(this,"_previousVideoVisibleStatus",void 0),N(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),N(this,"_encoderConfig",void 0),N(this,"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),N(this,"_optimizationMode",void 0),N(this,"_videoHeight",void 0),N(this,"_videoWidth",void 0),N(this,"_forceBitrateLimit",void 0),N(this,"_enabled",!0),N(this,"processorDestination",void 0),N(this,"_processorContext",void 0),yi()){const{width:v,height:E}=r.getSettings();this._videoWidth=v,this._videoHeight=E}else this.updateMediaStreamTrackResolution();this._encoderConfig=i,this._scalabiltyMode=s,this._optimizationMode=l,this._hints=p||[],this._hints.indexOf(pr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile(),i&&this._hints.indexOf(pr.CUSTOM_TRACK)!==-1&&this.setEncoderConfiguration(i),this.processorContext=new bP(this.getTrackId(),"local"),this.processorDestination=new CP(this.processorContext),this.bindProcessorDestinationEvents()}play(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof r=="string"){const l=document.getElementById(r);l?r=l:(U.warning("[".concat(this.getTrackId(),'] can not find "#').concat(r,'" element, use document.body')),r=document.body)}U.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(i));const s=Mp(Mp(Mp({},this._getDefaultPlayerConfig()),i),{},{trackId:this.getTrackId(),element:r});this._player?this._player.updateConfig(s):(r instanceof HTMLVideoElement?this._player=new rC(s):this._player=new rk(s),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const l=this.getVideoElementVisibleStatus();this.safeEmit(Qc.VIDEO_ELEMENT_VISIBLE_STATUS,l)}catch{}},ie("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,U.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(r,i){if(!i){if(r===this._enabled)return;this.stateCheck("enabled",r)}if(U.info("[".concat(this.getTrackId(),"] start setEnabled"),r),!r){this._originMediaStreamTrack.enabled=!1;try{await Mn(this,et.NEED_DISABLE_TRACK,this)}catch(s){throw U.error("[".concat(this.getTrackId(),"] setEnabled to false error"),s.toString()),s}return i||(this._enabled=!1),void U.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await Mn(this,et.NEED_ENABLE_TRACK,this)}catch(s){throw U.error("[".concat(this.getTrackId(),"] setEnabled to true error"),s.toString()),s}U.info("[".concat(this.getTrackId(),"] setEnabled to true success")),i||(this._enabled=!0)}async setMuted(r){r!==this._muted&&(this.stateCheck("muted",r),this._muted=r,this._originMediaStreamTrack.enabled=!r,U.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(r)),r?await Mn(this,et.NEED_MUTE_TRACK,this):await Mn(this,et.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(r,i){if(!this._enabled)throw new Q(W.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(r=tu(r),this._forceBitrateLimit&&(r.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:r.bitrateMax,r.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:r.bitrateMin),r.width||r.height||r.frameRate){const s=X0({encoderConfig:r});(yi()||Ci()||Ps())&&(s.deviceId=void 0),U.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(r),JSON.stringify(s));try{await this._originMediaStreamTrack.applyConstraints(s),this.updateMediaStreamTrackResolution()}catch(l){const d=new Q(W.UNEXPECTED_ERROR,l.toString());throw U.error("[".concat(this.getTrackId(),"] applyConstraints error"),d.toString()),d}}this._encoderConfig=r,this._hints.indexOf(pr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Mn(this,et.NEED_UPDATE_VIDEO_ENCODER,this)}catch(s){return s.throw()}}getStats(){return Pp(()=>{U.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),Aa(this,et.GET_STATS)||Mp({},Ry)}async setBeautyEffect(r){U.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(r,i):await nC(r)}clone(r,i,s,l){const d=this._mediaStreamTrack.clone();return new aj(d,r,i,s,l)}async setBitrateLimit(r){if(U.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(r))),r){this._forceBitrateLimit=r,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<r.max_bitrate?this._encoderConfig.bitrateMax:r.max_bitrate:this._encoderConfig.bitrateMax=r.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=r.min_bitrate);try{await Mn(this,et.NEED_UPDATE_VIDEO_ENCODER,this)}catch(i){return i.throw()}}}async setOptimizationMode(r){if(r!=="motion"&&r!=="detail"&&r!=="balanced")return void U.error(W.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const i=this._optimizationMode;try{this._optimizationMode=r,await Mn(this,et.SET_OPTIMIZATION_MODE,this)}catch(s){throw this._optimizationMode=i,U.error("[".concat(this.getTrackId(),"] set optimization mode failed"),s.toString()),s}U.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(r,")"))}setScalabiltyMode(r){if(r.numSpatialLayers===1&&r.numTemporalLayers!==1)return U.error(W.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=r,U.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(r,")"))}updateMediaStreamTrackResolution(){_D(this._originMediaStreamTrack).then(r=>{let[i,s]=r;this._videoHeight=s,this._videoWidth=i}).catch(G0)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:r,height:i,frameRate:s}=this.getMediaStreamTrackSettings();if(!r||!i||!s)return;const[l,d]=function(p,v,E){const T=ie("BITRATE_ADAPTER_TYPE");let C;const R=200*Math.pow(E/15,.6)*Math.pow(p*v/640/360,.75),L=R;if(T==="STANDARD_BITRATE")C=4*R;else{if(T!=="COMPATIABLE_BITRATE")return;C=2*R}return[Math.floor(C),Math.floor(L)]}(r,i,s)||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=d,this._encoderConfig.bitrateMax=l,U.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(r,", h: ").concat(i,", fps: ").concat(s,"] => [brMax: ").concat(l,", brMin: ").concat(d,"]")))}getVideoElementVisibleStatus(){try{var r,i;const s=this==null||(r=this._player)===null||r===void 0?void 0:r.getContainerElement(),l={track:this,element:this==null||(i=this._player)===null||i===void 0?void 0:i.getVideoElement(),slot:s==null?void 0:s.parentElement},{element:d,slot:p}=l;if(this.isPlaying&&d instanceof HTMLVideoElement&&p instanceof HTMLElement){const v=Uk.checkOneElementVisible(d),E=Object.assign({},v);if(E.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=E.visible;const T=Ue.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});E.visible?T.onSuccess("Video is visible"):T.onSuccess("Invisible because of ".concat(E.reason))}return E}return}catch(s){throw new Q(W.GET_VIDEO_ELEMENT_VISIBLE_ERROR,s.message)}}async renewMediaStreamTrack(r){}pipe(r){if(this.processor===r)return r;if(r._source)throw new Q(W.INVALID_OPERATION,"Processor ".concat(r.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=r,this.processor._source=this,r.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),r}unpipe(){if(!this.processor)return;const r=this.processor;this.processor._source=void 0,this.processor=void 0,r.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}async replaceTrack(r,i){if(!(r instanceof MediaStreamTrack))throw new Q(W.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if(r.kind!=="video")throw new Q(W.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(r,i,!0),this.updateMediaStreamTrackResolution()}bindProcessorDestinationEvents(){this.processorDestination.on(Zr.ON_TRACK,async r=>{r?r!==this._mediaStreamTrack&&(this._mediaStreamTrack=r,this._updatePlayerSource(),await Mn(this,et.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mn(this,et.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Zr.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(eo.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(eo.REQUEST_CONSTRAINTS)}}).prototype,"play",[ok,ak],Object.getOwnPropertyDescriptor(Rt.prototype,"play"),Rt.prototype),_e(Rt.prototype,"stop",[sk],Object.getOwnPropertyDescriptor(Rt.prototype,"stop"),Rt.prototype),_e(Rt.prototype,"setEnabled",[ck,lk,uk],Object.getOwnPropertyDescriptor(Rt.prototype,"setEnabled"),Rt.prototype),_e(Rt.prototype,"setMuted",[dk,hk,pk],Object.getOwnPropertyDescriptor(Rt.prototype,"setMuted"),Rt.prototype),_e(Rt.prototype,"setEncoderConfiguration",[fk,mk],Object.getOwnPropertyDescriptor(Rt.prototype,"setEncoderConfiguration"),Rt.prototype),_e(Rt.prototype,"getStats",[gk],Object.getOwnPropertyDescriptor(Rt.prototype,"getStats"),Rt.prototype),_e(Rt.prototype,"setBeautyEffect",[vk,Ek],Object.getOwnPropertyDescriptor(Rt.prototype,"setBeautyEffect"),Rt.prototype),_e(Rt.prototype,"getCurrentFrameData",[_k],Object.getOwnPropertyDescriptor(Rt.prototype,"getCurrentFrameData"),Rt.prototype),_e(Rt.prototype,"getCurrentFrameImage",[Sk],Object.getOwnPropertyDescriptor(Rt.prototype,"getCurrentFrameImage"),Rt.prototype),_e(Rt.prototype,"setBitrateLimit",[yk],Object.getOwnPropertyDescriptor(Rt.prototype,"setBitrateLimit"),Rt.prototype),_e(Rt.prototype,"setOptimizationMode",[Ck],Object.getOwnPropertyDescriptor(Rt.prototype,"setOptimizationMode"),Rt.prototype),_e(Rt.prototype,"setScalabiltyMode",[bk],Object.getOwnPropertyDescriptor(Rt.prototype,"setScalabiltyMode"),Rt.prototype),_e(Rt.prototype,"updateMediaStreamTrackResolution",[Tk],Object.getOwnPropertyDescriptor(Rt.prototype,"updateMediaStreamTrackResolution"),Rt.prototype),_e(Rt.prototype,"pipe",[Rk],Object.getOwnPropertyDescriptor(Rt.prototype,"pipe"),Rt.prototype),_e(Rt.prototype,"unpipe",[Ik],Object.getOwnPropertyDescriptor(Rt.prototype,"unpipe"),Rt.prototype),_e(Rt.prototype,"close",[wk],Object.getOwnPropertyDescriptor(Rt.prototype,"close"),Rt.prototype),_e(Rt.prototype,"replaceTrack",[Ok],Object.getOwnPropertyDescriptor(Rt.prototype,"replaceTrack"),Rt.prototype),Rt),Vk=(Ak=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),Nk=Ln(),xk=Rd("CameraVideoTrack","_enabledMutex"),Pk=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),Dk=Ln(),kk=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),Lk=Ln(),Mk=ze({argsMap:n=>[n.getTrackId()]}),_e((ra=class extends rr{get __className__(){return"CameraVideoTrack"}constructor(n,r,i,s,l,d){super(n,tu(r.encoderConfig),s,l,d),N(this,"_config",void 0),N(this,"_originalConstraints",void 0),N(this,"_constraints",void 0),N(this,"_enabled",!0),N(this,"_deviceName","default"),N(this,"tryResumeVideoForIOS15_16WeChat",async()=>{(hd()||GS())&&!function(){const p=Ht();if(p.os!==Yr.IOS||!p.osVersion)return!1;const v=p.osVersion.split(".");return Number(v[0])===15&&Number(v[1])>=2}()&&FN()&&this._enabled&&!this._isClosed&&(U.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=r,this._originalConstraints=i,this._constraints=i,this._deviceName=n.label,this._encoderConfig=tu(this._config.encoderConfig),Gt.on(yr.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Gt.on(yr.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(n){if(U.info("[".concat(this.getTrackId(),"] set device to ").concat(n)),this._enabled)try{const r=await Mo.getDeviceById(n),i={};i.video=Mp({},this._constraints),i.video.deviceId={exact:n},i.video.facingMode=void 0,this._originMediaStreamTrack.stop();let s=null;try{s=await Oa(i,this.getTrackId())}catch(l){throw U.error("[".concat(this.getTrackId(),"] setDevice failed"),l.toString()),s=await Oa({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(s.getVideoTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(s.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=r.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(r){throw U.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}else try{const r=await Mo.getDeviceById(n);this._deviceName=r.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(r){throw U.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}U.info("[".concat(this.getTrackId(),"] setDevice success"))}async setEnabled(n,r){if(!r){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(U.info("[".concat(this.getTrackId(),"] start setEnabled"),n),n){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const i=await Oa({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1)}await Mn(this,et.NEED_ENABLE_TRACK,this)}catch(i){throw U.error("[".concat(this.getTrackId(),"] setEnabled true error"),i.toString()),i}this.updateMediaStreamTrackResolution(),U.info("[".concat(this.getTrackId(),"] setEnabled to true success")),r||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),r||(this._enabled=!1);try{await Mn(this,et.NEED_DISABLE_TRACK,this)}catch(i){throw U.error("[".concat(this.getTrackId(),"] setEnabled to false error"),i.toString()),i}U.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(n,r){if(!this._enabled)throw new Q(W.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");n=tu(n),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:n.bitrateMin);const i=nr(this._config);i.encoderConfig=n;const s=X0(i);(yi()||Ci()||Ps())&&(s.deviceId=void 0),U.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(s));try{await this._originMediaStreamTrack.applyConstraints(s),this.updateMediaStreamTrackResolution()}catch(l){const d=new Q(W.UNEXPECTED_ERROR,l.toString());throw U.error("[".concat(this.getTrackId(),"] applyConstraints error"),d.toString()),d}this._config=i,this._constraints=s,this._originalConstraints=s,this._encoderConfig=n,this._hints.indexOf(pr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Mn(this,et.NEED_UPDATE_VIDEO_ENCODER,this)}catch(l){return l.throw()}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Ci()||Ps())&&this._enabled&&!this._isClosed&&Gt.duringInterruption){const n=async()=>{Gt.off(yr.IOS_INTERRUPTION_END,n),this._enabled&&!this._isClosed&&(U.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Gt.on(yr.IOS_INTERRUPTION_END,n)}else U.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Qc.TRACK_ENDED)}async renewMediaStreamTrack(n){const r=n||this._constraints,i=Mo.searchDeviceIdByName(this._deviceName);if(i&&!r.deviceId&&(r.deviceId={exact:i}),this._enabled){const s=await Oa({video:r},this.getTrackId());this._constraints=r,await this._updateOriginMediaStreamTrack(s.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),Gt.off(yr.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Gt.off(yr.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}bindProcessorContextEvents(){this.processorContext.on(eo.REQUEST_UPDATE_CONSTRAINTS,async(n,r,i)=>{try{const s=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(s),r()}catch(s){i(s)}}),this.processorContext.on(eo.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[Ak,Nk],Object.getOwnPropertyDescriptor(ra.prototype,"setDevice"),ra.prototype),_e(ra.prototype,"setEnabled",[xk,Pk,Dk],Object.getOwnPropertyDescriptor(ra.prototype,"setEnabled"),ra.prototype),_e(ra.prototype,"setEncoderConfiguration",[kk,Lk],Object.getOwnPropertyDescriptor(ra.prototype,"setEncoderConfiguration"),ra.prototype),_e(ra.prototype,"close",[Mk],Object.getOwnPropertyDescriptor(ra.prototype,"close"),ra.prototype),ra);class iC{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}constructor(r,i){N(this,"uid",void 0),N(this,"_uintid",void 0),N(this,"_trust_in_room_",!0),N(this,"_trust_audio_enabled_state_",!0),N(this,"_trust_video_enabled_state_",!0),N(this,"_trust_audio_mute_state_",!0),N(this,"_trust_video_mute_state_",!0),N(this,"_audio_muted_",!1),N(this,"_video_muted_",!1),N(this,"_audio_enabled_",!0),N(this,"_video_enabled_",!0),N(this,"_audio_added_",!1),N(this,"_video_added_",!1),N(this,"_trust_video_stream_added_state_",!0),N(this,"_trust_audio_stream_added_state_",!0),N(this,"_audioTrack",void 0),N(this,"_videoTrack",void 0),N(this,"_audioSSRC",void 0),N(this,"_videoSSRC",void 0),N(this,"_audioOrtc",void 0),N(this,"_videoOrtc",void 0),N(this,"_cname",void 0),N(this,"_rtxSsrcId",void 0),this.uid=r,this._uintid=i}}var mq=XA,gq=sd,vq=s0;Di({target:"Promise",stat:!0},{try:function(n){var r=gq.f(this),i=vq(n);return(i.error?r.reject:r.resolve)(i.value),r.promise}});var oC=mq,Eq=Di,_q=I,Sq=c,yq=xp,Cq=pt,bq=Gr,Tq=Hc,jk=py,Rq=Yx,Iq=eP,wq=Nn,Bk=ar("isConcatSpreadable"),$k=9007199254740991,Hk="Maximum allowed index exceeded",Wk=_q.TypeError,Oq=wq>=51||!Sq(function(){var n=[];return n[Bk]=!1,n.concat()[0]!==n}),Aq=Iq("concat"),Nq=function(n){if(!Cq(n))return!1;var r=n[Bk];return r!==void 0?!!r:yq(n)};Eq({target:"Array",proto:!0,forced:!Oq||!Aq},{concat:function(n){var r,i,s,l,d,p=bq(this),v=Rq(p,0),E=0;for(r=-1,s=arguments.length;r<s;r++)if(Nq(d=r===-1?p:arguments[r])){if(E+(l=Tq(d))>$k)throw Wk(Hk);for(i=0;i<l;i++,E++)i in d&&jk(v,E,d[i])}else{if(E>=$k)throw Wk(Hk);jk(v,E++,d)}return v.length=E,v}});var Gk={},xq=fe,Pq=at,zk=Hm.f,Dq=Sx,Kk=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Gk.f=function(n){return Kk&&xq(n)=="Window"?function(r){try{return zk(r)}catch{return Dq(Kk)}}(n):zk(Pq(n))};var Up={},kq=ar;Up.f=kq;var Yk=Ye,Lq=Jn,Mq=Up,Uq=Ja.f,jr=function(n){var r=Yk.Symbol||(Yk.Symbol={});Lq(r,n)||Uq(r,n,{value:Mq.f(n)})},kd=Di,aC=I,Fq=qe,Vq=P,Fp=K,jq=y,Ld=F,hu=Gn,sC=c,ri=Jn,Bq=xp,$q=M,Hq=pt,Wq=b,cC=qi,lC=Qa,Gq=Gr,Q0=at,uC=kr,qk=rd,dC=oe,Vp=Km,Xk=$_,zq=Hm,Jk=Gk,hC=j_,Qk=V,Zk=Ja,Kq=B_,eL=$,Yq=aS,pC=r0,jp=_r.exports,tL=Wm,nL=Yo,rL=ar,qq=Up,Xq=jr,Jq=vp,iL=n0,Z0=Xx.forEach,Uo=$m("hidden"),eg="Symbol",oL=rL("toPrimitive"),Qq=iL.set,aL=iL.getterFor(eg),os=Object.prototype,nl=aC.Symbol,pu=nl&&nl.prototype,sL=aC.TypeError,fC=aC.QObject,Bp=Fq("JSON","stringify"),cL=Qk.f,rl=Zk.f,lL=Jk.f,Zq=eL.f,uL=jq([].push),hc=jp("symbols"),$p=jp("op-symbols"),mC=jp("string-to-symbol-registry"),gC=jp("symbol-to-string-registry"),eX=jp("wks"),vC=!fC||!fC.prototype||!fC.prototype.findChild,EC=Ld&&sC(function(){return Vp(rl({},"a",{get:function(){return rl(this,"a",{value:7}).a}})).a!=7})?function(n,r,i){var s=cL(os,r);s&&delete os[r],rl(n,r,i),s&&n!==os&&rl(os,r,s)}:rl,_C=function(n,r){var i=hc[n]=Vp(pu);return Qq(i,{type:eg,tag:n,description:r}),Ld||(i.description=r),i},tg=function(n,r,i){n===os&&tg($p,r,i),lC(n);var s=uC(r);return lC(i),ri(hc,s)?(i.enumerable?(ri(n,Uo)&&n[Uo][s]&&(n[Uo][s]=!1),i=Vp(i,{enumerable:dC(0,!1)})):(ri(n,Uo)||rl(n,Uo,dC(1,{})),n[Uo][s]=!0),EC(n,s,i)):rl(n,s,i)},SC=function(n,r){lC(n);var i=Q0(r),s=Xk(i).concat(yC(i));return Z0(s,function(l){Ld&&!Fp(dL,i,l)||tg(n,l,i[l])}),n},dL=function(n){var r=uC(n),i=Fp(Zq,this,r);return!(this===os&&ri(hc,r)&&!ri($p,r))&&(!(i||!ri(this,r)||!ri(hc,r)||ri(this,Uo)&&this[Uo][r])||i)},hL=function(n,r){var i=Q0(n),s=uC(r);if(i!==os||!ri(hc,s)||ri($p,s)){var l=cL(i,s);return!l||!ri(hc,s)||ri(i,Uo)&&i[Uo][s]||(l.enumerable=!0),l}},pL=function(n){var r=lL(Q0(n)),i=[];return Z0(r,function(s){ri(hc,s)||ri(tL,s)||uL(i,s)}),i},yC=function(n){var r=n===os,i=lL(r?$p:Q0(n)),s=[];return Z0(i,function(l){!ri(hc,l)||r&&!ri(os,l)||uL(s,hc[l])}),s};if(hu||(pC(pu=(nl=function(){if(Wq(pu,this))throw sL("Symbol is not a constructor");var n=arguments.length&&arguments[0]!==void 0?qk(arguments[0]):void 0,r=nL(n),i=function(s){this===os&&Fp(i,$p,s),ri(this,Uo)&&ri(this[Uo],r)&&(this[Uo][r]=!1),EC(this,r,dC(1,s))};return Ld&&vC&&EC(os,r,{configurable:!0,set:i}),_C(r,n)}).prototype,"toString",function(){return aL(this).tag}),pC(nl,"withoutSetter",function(n){return _C(nL(n),n)}),eL.f=dL,Zk.f=tg,Kq.f=SC,Qk.f=hL,zq.f=Jk.f=pL,hC.f=yC,qq.f=function(n){return _C(rL(n),n)},Ld&&rl(pu,"description",{configurable:!0,get:function(){return aL(this).description}})),kd({global:!0,wrap:!0,forced:!hu,sham:!hu},{Symbol:nl}),Z0(Xk(eX),function(n){Xq(n)}),kd({target:eg,stat:!0,forced:!hu},{for:function(n){var r=qk(n);if(ri(mC,r))return mC[r];var i=nl(r);return mC[r]=i,gC[i]=r,i},keyFor:function(n){if(!cC(n))throw sL(n+" is not a symbol");if(ri(gC,n))return gC[n]},useSetter:function(){vC=!0},useSimple:function(){vC=!1}}),kd({target:"Object",stat:!0,forced:!hu,sham:!Ld},{create:function(n,r){return r===void 0?Vp(n):SC(Vp(n),r)},defineProperty:tg,defineProperties:SC,getOwnPropertyDescriptor:hL}),kd({target:"Object",stat:!0,forced:!hu},{getOwnPropertyNames:pL,getOwnPropertySymbols:yC}),kd({target:"Object",stat:!0,forced:sC(function(){hC.f(1)})},{getOwnPropertySymbols:function(n){return hC.f(Gq(n))}}),Bp&&kd({target:"JSON",stat:!0,forced:!hu||sC(function(){var n=nl();return Bp([n])!="[null]"||Bp({a:n})!="{}"||Bp(Object(n))!="{}"})},{stringify:function(n,r,i){var s=Yq(arguments),l=r;if((Hq(r)||n!==void 0)&&!cC(n))return Bq(r)||(r=function(d,p){if($q(l)&&(p=Fp(l,this,d,p)),!cC(p))return p}),s[1]=r,Vq(Bp,null,s)}}),!pu[oL]){var tX=pu.valueOf;pC(pu,oL,function(n){return Fp(tX,this)})}Jq(nl,eg),tL[Uo]=!0,jr("asyncIterator"),jr("hasInstance"),jr("isConcatSpreadable"),jr("iterator"),jr("match"),jr("matchAll"),jr("replace"),jr("search"),jr("species"),jr("split"),jr("toPrimitive"),jr("toStringTag"),jr("unscopables"),vp(I.JSON,"JSON",!0);var nX=Ye.Symbol;jr("asyncDispose"),jr("dispose"),jr("matcher"),jr("metadata"),jr("observable"),jr("patternMatch"),jr("replaceAll");var fL=nX,mL=Up.f("asyncIterator"),rX=mL;function gL(n){this.wrapped=n}function Hp(n){var r,i;function s(d,p){try{var v=n[d](p),E=v.value,T=E instanceof gL;oC.resolve(T?E.wrapped:E).then(function(C){T?s(d==="return"?"return":"next",C):l(v.done?"return":"normal",C)},function(C){s("throw",C)})}catch(C){l("throw",C)}}function l(d,p){switch(d){case"return":r.resolve({value:p,done:!0});break;case"throw":r.reject(p);break;default:r.resolve({value:p,done:!1})}(r=r.next)?s(r.key,r.arg):i=null}this._invoke=function(d,p){return new oC(function(v,E){var T={key:d,arg:p,resolve:v,reject:E,next:null};i?i=i.next=T:(r=i=T,s(d,p))})},typeof n.return!="function"&&(this.return=void 0)}function Na(n){return function(){return new Hp(n.apply(this,arguments))}}function It(n){return new gL(n)}Hp.prototype[typeof fL=="function"&&rX||"@@asyncIterator"]=function(){return this},Hp.prototype.next=function(n){return this._invoke("next",n)},Hp.prototype.throw=function(n){return this._invoke("throw",n)},Hp.prototype.return=function(n){return this._invoke("return",n)};var iX=Up.f("iterator");function ng(n,r){var i={},s=!1;function l(d,p){return s=!0,p=new oC(function(v){v(n[d](p))}),{done:!1,value:r(p)}}return i[fL!==void 0&&iX||"@@iterator"]=function(){return this},i.next=function(d){return s?(s=!1,d):l("next",d)},typeof n.throw=="function"&&(i.throw=function(d){if(s)throw s=!1,d;return l("throw",d)}),typeof n.return=="function"&&(i.return=function(d){return s?(s=!1,d):l("return",d)}),i}var vL=mL,ir={exports:{}};function EL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function _L(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?EL(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):EL(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function CC(n,r,i,s,l,d,p){let v=[],E=[],T=[],C=[],R=!1,L=!1;if(ir.exports.parse(n).mediaDescriptions.forEach(j=>{p&&p!==j.attributes.direction||(j.media.mediaType!=="video"||R||(E=j.attributes.payloads,C=j.attributes.extmaps,R=!0),j.media.mediaType!=="audio"||L||(v=j.attributes.payloads,T=j.attributes.extmaps,L=!0))}),!C||E.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!T||v.length===0)throw new Error("Cannot get audio capabilities from SDP.");return E.forEach(j=>{var Y;(Y=j.rtpMap)!==null&&Y!==void 0&&Y.clockRate&&(j.rtpMap.clockRate=parseInt(j.rtpMap.clockRate))}),v.forEach(j=>{var Y;(Y=j.rtpMap)!==null&&Y!==void 0&&Y.clockRate&&(j.rtpMap.clockRate=parseInt(j.rtpMap.clockRate))}),r&&(v=v.filter(j=>{var Y;return((Y=j.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLowerCase())!=="rtx"}),E=E.filter(j=>{var Y;return((Y=j.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLowerCase())!=="rtx"})),i&&(E=E.filter(j=>{var Y;return!/(red)|(ulpfec)|(flexfec)/i.test(((Y=j.rtpMap)===null||Y===void 0?void 0:Y.encodingName)||"")})),s&&(v=v.filter(j=>{var Y;return!/(red)|(ulpfec)|(flexfec)/i.test(((Y=j.rtpMap)===null||Y===void 0?void 0:Y.encodingName)||"")})),l&&(l==null?void 0:l.length)>0&&(v=v.filter(j=>{var Y;return l.includes(((Y=j.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLowerCase())||"")})),d&&(d==null?void 0:d.length)>0&&(E=E.filter(j=>{var Y;return d.includes(((Y=j.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLowerCase())||"")})),{audioCodecs:v,videoCodecs:E,audioExtensions:T,videoExtensions:C}}function fu(n){const r=ir.exports.parse(n);let i,s;for(const l of r.mediaDescriptions){if(!i){const d=l.attributes.iceUfrag,p=l.attributes.icePwd;if(!d||!p)throw new Error("Cannot get iceUfrag or icePwd from SDP.");i={iceUfrag:d,icePwd:p}}if(!s){const d=l.attributes.fingerprints;d.length>0&&(s={fingerprints:d})}}if(!s&&r.attributes.fingerprints.length>0&&(s={fingerprints:r.attributes.fingerprints}),!s||!i)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:i,dtlsParameters:s}}function SL(n,r){const i=[],s=n.attributes.ssrcGroups.filter(p=>p.semantic==="FID"),l=n.attributes.ssrcGroups.find(p=>p.semantic==="SIM"),d=n.attributes.ssrcs;if(l)l.ssrcIds.forEach(p=>{var v;const E=(v=s.find(T=>T.ssrcIds[0]===p))===null||v===void 0?void 0:v.ssrcIds[1];i.push({ssrcId:p,rtx:r?E:void 0})});else if(s.length>0){const p=s[0].ssrcIds[0],v=s[0].ssrcIds[1];i.push({ssrcId:p,rtx:r?v:void 0})}else{if(d.length===0)throw new Error("No ssrcs found on local media description.");i.push({ssrcId:d[0].ssrcId})}return i}function yL(n,r){const{cname:i}=n;let s;r&&r.ip&&typeof r.port=="number"?(s=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:r.ip,port:r.port.toString(),type:"host",extension:{}}],U.debug("Using remote candidate from AP ".concat(r.ip,":").concat(r.port)),r.ip6&&(s.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:r.ip6,port:r.port.toString(),type:"host",extension:{}}),U.debug("Using IPV6 remote candidate from AP ".concat(r.ip6,":").concat(r.port)))):s=n.iceParameters.candidates.map(v=>({foundation:v.foundation,componentId:"1",transport:v.protocol,priority:v.priority.toString(),connectionAddress:v.ip,port:v.port.toString(),type:v.type,extension:{}}));const l={fingerprints:n.dtlsParameters.fingerprints.map(v=>({hashFunction:v.algorithm,fingerprint:v.fingerprint}))},d={iceUfrag:n.iceParameters.iceUfrag,icePwd:n.iceParameters.icePwd};let p;switch(n.dtlsParameters.role){case"server":p="passive";break;case"client":p="active";break;case"auto":p="actpass"}return{dtlsParameters:l,iceParameters:d,candidates:s,rtpCapabilities:RC(n.rtpCapabilities),setup:p,cname:i}}function ia(n,r,i){const s=[],l=[];return n.forEach(d=>{let{ssrcId:p,rtx:v}=d;const E=fn(8,"track-"),T={ssrcId:p,attributes:_L({label:E,mslabel:i=i||fn(10,""),msid:"".concat(i," ").concat(E)},r&&{cname:r})};if(s.push(T),v!==void 0){const C={ssrcId:v,attributes:_L({label:E,mslabel:i,msid:"".concat(i," ").concat(E)},r&&{cname:r})};s.push(C),l.push({semantic:"FID",ssrcIds:[p,v]})}}),n.length>1&&l.push({semantic:"SIM",ssrcIds:n.map(d=>{let{ssrcId:p}=d;return p})}),{ssrcs:s,ssrcGroups:l}}function Md(n,r){r instanceof ei&&n.attributes.payloads.forEach(i=>{var s;const l=(s=i.rtpMap)===null||s===void 0?void 0:s.encodingName.toLowerCase();if(!l||["opus","pcmu","pcma","g722"].indexOf(l)===-1)return;i.fmtp||(i.fmtp={parameters:{}}),i.fmtp.parameters.minptime="10",i.fmtp.parameters.useinbandfec="1";const d=r._encoderConfig;d&&l!=="pcmu"&&l!=="pcma"&&l!=="g722"&&(d.bitrate&&!Dn()&&(i.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*d.bitrate))),d.sampleRate&&(i.fmtp.parameters.maxplaybackrate="".concat(d.sampleRate),i.fmtp.parameters["sprop-maxcapturerate"]="".concat(d.sampleRate)),d.stereo&&(i.fmtp.parameters.stereo="1",i.fmtp.parameters["sprop-stereo"]="1"))})}function bC(n){const r=n.attributes.unrecognized.findIndex(i=>i.attField==="x-google-flag"&&i.attValue==="conference");r!==-1&&n.attributes.unrecognized.splice(r,1)}function TC(n,r){if(!(r instanceof rr&&r._encoderConfig&&r._hints.indexOf(pr.SCREEN_TRACK)===-1))return;const i=r._encoderConfig;zn().supportMinBitrate&&i.bitrateMin&&n.attributes.payloads.forEach(s=>{var l;["h264","h265","vp8","vp9","av1"].includes(((l=s.rtpMap)===null||l===void 0?void 0:l.encodingName.toLowerCase())||"")&&(s.fmtp||(s.fmtp={parameters:{}}),s.fmtp.parameters["x-google-min-bitrate"]="".concat(i.bitrateMin))}),zn().supportMinBitrate&&!r._hints.includes(pr.LOW_STREAM)&&i.bitrateMax&&n.attributes.payloads.forEach(s=>{var l;["h264","h265","vp8","vp9","av1"].includes(((l=s.rtpMap)===null||l===void 0?void 0:l.encodingName.toLowerCase())||"")&&(s.fmtp||(s.fmtp={parameters:{}}),s.fmtp.parameters["x-google-start-bitrate"]="".concat(ie("X_GOOGLE_START_BITRATE")||Math.floor(i.bitrateMax)))})}function CL(n){if(n.media.mediaType!=="video")return;const r=Ht();if(r.name!==qt.SAFARI&&r.os!==Yr.IOS)return;const i=n.attributes.extmaps.findIndex(s=>/video-orientation/g.test(s.extensionName));i!==-1&&n.attributes.extmaps.splice(i,1)}function rg(n,r,i){if(!r)return;let s,l;if(n.media.mediaType==="video"?(s=i.videoExtensions,l=i.videoCodecs):(s=i.audioExtensions,l=i.audioCodecs),r.twcc===!0){const d=s.find(p=>p.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");d&&(n.attributes.extmaps.find(p=>p.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")||n.attributes.extmaps.push({entry:d.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(p,v){return v.filter(E=>!!p.find(T=>T.payloadType===E.payloadType&&!!T.rtcpFeedbacks.find(C=>C.type==="transport-cc")))}(l,n.attributes.payloads).forEach(p=>{p.rtcpFeedbacks.find(v=>v.type==="transport-cc")||p.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(r.twcc===!1){const d=n.attributes.extmaps.findIndex(p=>p.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");d!==-1&&n.attributes.extmaps.splice(d,1),n.attributes.payloads.forEach(p=>{const v=p.rtcpFeedbacks.findIndex(E=>E.type==="transport-cc");v!==-1&&p.rtcpFeedbacks.splice(v,1)})}if(r.remb===!0){const d=s.find(p=>p.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");d&&(n.attributes.extmaps.find(p=>p.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time")||n.attributes.extmaps.push({entry:d.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(p,v){return v.filter(E=>!!p.find(T=>T.payloadType===E.payloadType&&!!T.rtcpFeedbacks.find(C=>C.type==="goog-remb")))}(l,n.attributes.payloads).forEach(p=>{p.rtcpFeedbacks.find(v=>v.type==="goog-remb")||p.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(r.remb===!1){const d=n.attributes.extmaps.findIndex(p=>p.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");d!==-1&&n.attributes.extmaps.splice(d,1),n.attributes.payloads.forEach(p=>{const v=p.rtcpFeedbacks.findIndex(E=>E.type==="goog-remb");v!==-1&&p.rtcpFeedbacks.splice(v,1)})}}function bL(n,r,i){if(Dn()||n.media.mediaType!=="video"||!(r instanceof rr)||i!=="vp9"&&i!=="vp8"||i==="vp8"&&!ie("SIMULCAST")||r._scalabiltyMode===void 0||r._scalabiltyMode.numSpatialLayers<=1)return;const s=i==="vp8"?2:r._scalabiltyMode.numSpatialLayers,l=n.attributes.ssrcs[0],d=n.attributes.ssrcGroups.find(v=>v.semantic==="FID"&&v.ssrcIds[0]===l.ssrcId),p={semantic:"SIM",ssrcIds:[l.ssrcId]};for(let v=1;v<s;v++)n.attributes.ssrcs.push({ssrcId:l.ssrcId+v,attributes:nr(l.attributes)}),p.ssrcIds.push(l.ssrcId+v),d&&(n.attributes.ssrcs.push({ssrcId:d.ssrcIds[1]+v,attributes:nr(l.attributes)}),n.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[l.ssrcId+v,d.ssrcIds[1]+v]}));n.attributes.ssrcGroups.unshift(p)}async function TL(n,r,i,s,l){const d=new RTCPeerConnection;d.addTransceiver("video",{direction:"sendonly"}),d.addTransceiver("audio",{direction:"sendonly"}),d.addTransceiver("video",{direction:"recvonly"}),d.addTransceiver("audio",{direction:"recvonly"});const p=(await d.createOffer()).sdp,v=CC(p,n,r,i,s,l,"sendonly"),E=CC(p,n,r,i,s,l,"recvonly"),T={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},C={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},R={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(ig(v,E,"videoExtensions",T,C,R),ig(v,E,"videoCodecs",T,C,R),ig(v,E,"audioExtensions",T,C,R),ig(v,E,"audioCodecs",T,C,R),ie("RAISE_H264_BASELINE_PRIORITY")){const L=R.videoCodecs.findIndex(j=>{var Y,q;return((Y=j.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLocaleLowerCase())==="h264"&&((q=j.fmtp)===null||q===void 0?void 0:q.parameters["profile-level-id"])==="42001f"});if(L!==-1){const j=R.videoCodecs.findIndex(Y=>{var q;return((q=Y.rtpMap)===null||q===void 0?void 0:q.encodingName.toLocaleLowerCase())==="h264"});if(j<L){U.debug("raising H264 baseline profile priority");const Y=R.videoCodecs[L];R.videoCodecs.splice(L,1),R.videoCodecs.splice(j,0,Y)}j!==-1&&(C.videoCodecs=C.videoCodecs.filter(Y=>{var q,X;return!(((q=Y.rtpMap)===null||q===void 0?void 0:q.encodingName.toLocaleLowerCase())==="h264"&&((X=Y.fmtp)===null||X===void 0?void 0:X.parameters["profile-level-id"])!=="42001f")})),j!==-1&&ie("FILTER_SEND_H264_BASELINE")&&(T.videoCodecs=T.videoCodecs.filter(Y=>{var q,X;return!(((q=Y.rtpMap)===null||q===void 0?void 0:q.encodingName.toLocaleLowerCase())==="h264"&&((X=Y.fmtp)===null||X===void 0?void 0:X.parameters["profile-level-id"])!=="42001f")}))}}try{d.close()}catch{}return{send:T,recv:C,sendrecv:R}}function ig(n,r,i,s,l,d){if(i==="videoExtensions"||i==="audioExtensions"){const p=[];return n[i].forEach(v=>{r[i].some((E,T)=>{if(v.entry===E.entry&&v.extensionName===E.extensionName)return p.push(T),!0})?d[i].push(v):s[i].push(v)}),void r[i].forEach((v,E)=>{p.indexOf(E)===-1&&l[i].push(v)})}if(i==="videoCodecs"||i==="audioCodecs"){const p=[];return n[i].forEach(v=>{r[i].some((E,T)=>{if(v.payloadType===E.payloadType&&JSON.stringify(v)===JSON.stringify(E))return p.push(T),!0})?d[i].push(v):s[i].push(v)}),void r[i].forEach((v,E)=>{p.indexOf(E)===-1&&l[i].push(v)})}}function RC(n){const{send:r,recv:i,sendrecv:s}=n;if(!s){if(!r||!i)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:r,recv:i}}let l,d;return r?(l={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},l.audioCodecs=[...r.audioCodecs,...s.audioCodecs],l.videoCodecs=[...r.videoCodecs,...s.videoCodecs],l.audioExtensions=[...r.audioExtensions,...s.audioExtensions],l.videoExtensions=[...r.videoExtensions,...s.videoExtensions]):l=s,i?(d={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},d.audioCodecs=[...i.audioCodecs,...s.audioCodecs],d.videoCodecs=[...i.videoCodecs,...s.videoCodecs],d.audioExtensions=[...i.audioExtensions,...s.audioExtensions],d.videoExtensions=[...i.videoExtensions,...s.videoExtensions]):d=s,{send:l,recv:d}}function il(n){n.media.mediaType==="audio"&&n.attributes.payloads.filter(r=>{var i;return((i=r.rtpMap)===null||i===void 0?void 0:i.encodingName.toLowerCase())==="opus"}).forEach(r=>{r.fmtp||(r.fmtp={parameters:{}}),r.fmtp.parameters.stereo="1",r.fmtp.parameters["sprop-stereo"]="1"})}function RL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function IL(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?RL(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):RL(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}(function(n,r){n.exports=(()=>{var i={8:(d,p,v)=>{v.r(p),v.d(p,{Parser:()=>ln,Printer:()=>ro,parse:()=>tt,print:()=>Ut});const E=`
`,T="".concat("\r").concat(E),C=" ";let R;function L(Re){return Re>="0"&&Re<="9"}function j(Re){return Re>="!"&&Re<="~"}function Y(Re){return j(Re)||Re>=""&&Re<="ÿ"}function q(Re){return Re==="!"||Re>="#"&&Re<="'"||Re>="*"&&Re<="+"||Re>="-"&&Re<="."||Re>="0"&&Re<="9"||Re>="A"&&Re<="Z"||Re>="^"&&Re<="~"}function X(Re){return Re>="1"&&Re<="9"}function le(Re){return Re>="A"&&Re<="Z"||Re>="a"&&Re<="z"}function he(Re){return Re==="d"||Re==="h"||Re==="m"||Re==="s"}function ye(Re){return Re>""&&Re<"	"||Re>"\v"&&Re<"\f"||Re>""&&Re<"ÿ"}function ke(Re){return le(Re)||L(Re)||Re==="+"||Re==="/"}function be(Re){return L(Re)||le(Re)||Re==="+"||Re==="/"||Re==="-"||Re==="_"}function Te(Re){return le(Re)||L(Re)||Re==="+"||Re==="/"}function Se(Re,k){var J=Object.keys(Re);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(Re);k&&(te=te.filter(function(Ee){return Object.getOwnPropertyDescriptor(Re,Ee).enumerable})),J.push.apply(J,te)}return J}function Oe(Re){for(var k=1;k<arguments.length;k++){var J=arguments[k]!=null?arguments[k]:{};k%2?Se(Object(J),!0).forEach(function(te){Bt(Re,te,J[te])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Re,Object.getOwnPropertyDescriptors(J)):Se(Object(J)).forEach(function(te){Object.defineProperty(Re,te,Object.getOwnPropertyDescriptor(J,te))})}return Re}function Bt(Re,k,J){return k in Re?Object.defineProperty(Re,k,{value:J,enumerable:!0,configurable:!0,writable:!0}):Re[k]=J,Re}(function(Re){Re.VERSION="v",Re.ORIGIN="o",Re.SESSION_NAME="s",Re.INFORMATION="i",Re.URI="u",Re.EMAIL="e",Re.PHONE="p",Re.CONNECTION="c",Re.BANDWIDTH="b",Re.TIME="t",Re.REPEAT="r",Re.ZONE_ADJUSTMENTS="z",Re.KEY="k",Re.ATTRIBUTE="a",Re.MEDIA="m"})(R||(R={}));class We{consumeText(k,J){let te=J;for(;te<k.length;){const Ee=k[te];if(Ee==="\0"||Ee==="\r"||Ee===E)break;te+=1}if(te-J==0)throw new Error("Invalid text, at ".concat(k));return te}consumeUnicastAddress(k,J,te){return this.consumeTill(k,J,C)}consumeOneOrMore(k,J,te){let Ee=J;for(;te(k[Ee]);)Ee++;if(Ee-J==0)throw new Error("Invalid rule at ".concat(J,"."));return Ee}consumeSpace(k,J){if(k[J]===C)return J+1;throw new Error("Invalid space at ".concat(J,"."))}consumeIP4Address(k,J){let te=J;for(let Ee=0;Ee<4;Ee++)if(te=this.consumeDecimalUChar(k,te),Ee!==3){if(k[te]!==".")throw new Error("Invalid IP4 address.");te++}return te}consumeDecimalUChar(k,J){let te=J;for(let ot=0;ot<3&&L(k[te]);ot++,te++);if(te-J==0)throw new Error("Invalid decimal uchar.");const Ee=parseInt(k.slice(J,te));if(Ee>=0&&Ee<=255)return te;throw new Error("Invalid decimal uchar")}consumeIP6Address(k,J){let te=this.consumeHexpart(k,J);return k[te]===":"&&(te+=1,te=this.consumeIP4Address(k,te)),te}consumeHexpart(k,J){let te=J;if(k[te]===":"&&k[te+1]===":"){te+=2;try{te=this.consumeHexseq(k,te)}catch{}return te}if(te=this.consumeHexseq(k,te),k[te]===":"&&k[te+1]===":"){te+=2;try{te=this.consumeHexseq(k,te)}catch{}return te}return te}consumeHexseq(k,J){let te=J;for(;te=this.consumeHex4(k,te),k[te]===":"&&k[te+1]!==":";)te+=1;return te}consumeHex4(k,J){let te=0;for(;te<4;te++)if(!((Ee=k[J+te])>="0"&&Ee<="9"||Ee>="a"&&Ee<="f"||Ee>="A"&&Ee<="F")){if(te===0)throw new Error("Invalid hex 4");break}var Ee;return J+te}consumeFQDN(k,J){let te=J;for(;L(k[te])||le(k[te])||k[te]==="-"||k[te]===".";)te+=1;if(te-J<4)throw new Error("Invalid FQDN");return te}consumeExtnAddr(k,J){return this.consumeOneOrMore(k,J,Y)}consumeMulticastAddress(k,J,te){switch(te){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(k,J);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(k,J);default:try{return this.consumeFQDN(k,J)}catch{return this.consumeExtnAddr(k,J)}}}consumeIP6MulticastAddress(k,J){const te=this.consumeHexpart(k,J);return k[te]==="/"?this.consumeInteger(k,te+1):te}consumeIP4MulticastAddress(k,J){let te=J+3;const Ee=k.slice(J,te),ot=parseInt(Ee);if(ot<224||ot>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let un=0;un<3;un++){if(k[te]!==".")throw new Error("Invalid IP4 multicast address.");te+=1,te=this.consumeDecimalUChar(k,te)}return k[te]==="/"&&(te+=1),te=this.consumeTTL(k,te),k[te]==="/"&&(te=this.consumeInteger(k,te)),te}consumeInteger(k,J){if(!X(k[J]))throw new Error("Invalid integer.");for(J+=1;L(k[J]);)J+=1;return J}consumeTTL(k,J){if(k[J]==="0")return J+1;if(!X(k[J]))throw new Error("Invalid TTL.");J+=1;for(let te=0;te<2&&L(k[J]);te++)J+=1;return J}consumeToken(k,J){return this.consumeOneOrMore(k,J,q)}consumeTime(k,J){let te=J;if(k[te]==="0")return te+1;for(X(k[te])&&(te+=1);L(k[te]);)te++;if(te-J<10)throw new Error("Invalid time");return te}consumeAddress(k,J){return this.consumeTill(k,J,C)}consumeTypedTime(k,J){let te=J;return te=this.consumeOneOrMore(k,te,L),he(k[te])?te+1:te}consumeRepeatInterval(k,J){if(!X(k[J]))throw new Error("Invalid repeat interval");for(J+=1;L(k[J]);)J+=1;return he(k[J])&&(J+=1),J}consumePort(k,J){return this.consumeOneOrMore(k,J,L)}consume(k,J,te){for(let Ee=0;Ee<te.length;Ee++){if(J+Ee>=k.length)throw new Error("consume exceeding value length");if(k[J+Ee]!==te[Ee])throw new Error("consume ".concat(te," failed at ").concat(Ee))}return J+te.length}consumeTill(k,J,te){let Ee=J;for(;Ee<k.length&&(typeof te!="string"||k[Ee]!==te)&&(typeof te!="function"||!te(k[Ee]));)Ee++;return Ee}}class ln extends We{constructor(){super(),Bt(this,"records",[]),Bt(this,"currentLine",0)}parse(k){const J=this.probeEOL(k);this.records=k.split(J).filter(Ui=>!!Ui.trim()).map(this.parseLine),this.currentLine=0;const te=this.parseVersion(),Ee=this.parseOrigin(),ot=this.parseSessionName(),un=this.parseInformation(),$r=this.parseUri(),ka=this.parseEmail(),ul=this.parsePhone(),ca=this.parseConnection(),dl=this.parseBandWidth(),$d=this.parseTimeFields(),Un=this.parseKey(),or=this.parseSessionAttribute(),on=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:te,origin:Ee,sessionName:ot,information:un,uri:$r,emails:ka,phones:ul,connection:ca,bandwidths:dl,timeFields:$d,key:Un,attributes:or,mediaDescriptions:on}}getCurrentRecord(){const k=this.records[this.currentLine];if(!k)throw new Error("Record doesn't exit.");return k}probeEOL(k){for(let J=0;J<k.length;J++)if(k[J]===E)return k[J-1]==="\r"?T:E;throw new Error("Invalid newline character.")}parseLine(k,J){if(k.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const te=k[0];if(k[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:te,value:k.slice(2),line:J,cur:0}}parseSessionAttribute(){const k=new Yn;for(;this.currentLine<this.records.length;){const J=this.getCurrentRecord();if(J.type!==R.ATTRIBUTE)break;const te={attField:this.extractOneOrMore(J,Ee=>q(Ee)&&Ee!==":"),_cur:0};J.value[J.cur]===":"&&(J.cur+=1,te.attValue=this.extractOneOrMore(J,ye)),k.parse(te),this.currentLine++}return k.digest()}parseMediaAttributes(k){const J=new Br(k);for(;this.currentLine<this.records.length;){const te=this.getCurrentRecord();if(te.type!==R.ATTRIBUTE)break;const Ee={attField:this.extractOneOrMore(te,ot=>q(ot)&&ot!==":"),_cur:0};te.value[te.cur]===":"&&(te.cur+=1,Ee.attValue=this.extractOneOrMore(te,ye)),J.parse(Ee),this.currentLine++}return J.digest()}parseKey(){const k=this.getCurrentRecord();if(k.type===R.KEY){if(k.value==="prompt"||k.value==="clear:"||k.value==="base64:"||k.value==="uri:")return k.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const k=this.getCurrentRecord();if(k.type===R.ZONE_ADJUSTMENTS){const J=[];for(;;)try{const te=this.extract(k,this.consumeTime);this.consumeSpaceForRecord(k);let Ee=!1;k.value[k.cur]==="-"&&(Ee=!0,k.cur+=1);const ot=this.extract(k,this.consumeTypedTime);J.push({time:te,typedTime:ot,back:Ee})}catch{break}if(J.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,J}return[]}parseRepeat(){const k=[];for(;;){const J=this.getCurrentRecord();if(J.type!==R.REPEAT)break;{const te=this.extract(J,this.consumeRepeatInterval),Ee=this.parseTypedTime(J);k.push({repeatInterval:te,typedTimes:Ee}),this.currentLine++}}return k}parseTypedTime(k){const J=[];for(;;)try{this.consumeSpaceForRecord(k),J.push(this.extract(k,this.consumeTypedTime))}catch{break}if(J.length===0)throw new Error("Invalid typed time.");return J}parseTime(){const k=this.getCurrentRecord(),J=this.extract(k,this.consumeTime);this.consumeSpaceForRecord(k);const te=this.extract(k,this.consumeTime);return this.currentLine++,{startTime:J,stopTime:te}}parseBandWidth(){const k=[];for(;this.currentLine<this.records.length;){const J=this.getCurrentRecord();if(J.type!==R.BANDWIDTH)break;{const te=this.extractOneOrMore(J,q);if(J.value[J.cur]!==":")throw new Error("Invalid bandwidth field.");J.cur++;const Ee=this.extractOneOrMore(J,L);k.push({bwtype:te,bandwidth:Ee}),this.currentLine++}}return k}parseVersion(){const k=this.getCurrentRecord();if(k.type!==R.VERSION)throw new Error("first sdp record must be version");const J=k.value.slice(0,this.consumeOneOrMore(k.value,0,L));if(J.length!==k.value.length)throw new Error('invalid proto version, "v='.concat(k.value,'"'));return this.currentLine++,J}parseOrigin(){const k=this.getCurrentRecord();if(k.type!==R.ORIGIN)throw new Error("second line of sdp must be origin");const J=this.extractOneOrMore(k,Y);this.consumeSpaceForRecord(k);const te=this.extractOneOrMore(k,L);this.consumeSpaceForRecord(k);const Ee=this.extractOneOrMore(k,L);this.consumeSpaceForRecord(k);const ot=this.extractOneOrMore(k,q);this.consumeSpaceForRecord(k);const un=this.extractOneOrMore(k,q);this.consumeSpaceForRecord(k);const $r=this.extract(k,this.consumeUnicastAddress);return this.currentLine++,{username:J,sessId:te,sessVersion:Ee,nettype:ot,addrtype:un,unicastAddress:$r}}parseSessionName(){const k=this.getCurrentRecord();if(k.type===R.SESSION_NAME){const J=this.extract(k,this.consumeText);return this.currentLine++,J}}parseInformation(){const k=this.getCurrentRecord();if(k.type!==R.INFORMATION)return;const J=this.extract(k,this.consumeText);return this.currentLine++,J}parseUri(){const k=this.getCurrentRecord();if(k.type===R.URI)return this.currentLine++,k.value}parseEmail(){const k=[];for(;;){const J=this.getCurrentRecord();if(J.type!==R.EMAIL)break;k.push(J.value),this.currentLine++}return k}parsePhone(){const k=[];for(;;){const J=this.getCurrentRecord();if(J.type!==R.PHONE)break;k.push(J.value),this.currentLine++}return k}parseConnection(){const k=this.getCurrentRecord();if(k.type===R.CONNECTION){const J=this.extractOneOrMore(k,q);this.consumeSpaceForRecord(k);const te=this.extractOneOrMore(k,q);this.consumeSpaceForRecord(k);const Ee=this.extract(k,this.consumeAddress);return this.currentLine++,{nettype:J,addrtype:te,address:Ee}}}parseMedia(){const k=this.getCurrentRecord(),J=this.extract(k,this.consumeToken);this.consumeSpaceForRecord(k);let te=this.extract(k,this.consumePort);k.value[k.cur]==="/"&&(k.cur+=1,te+=this.extract(k,this.consumeInteger)),this.consumeSpaceForRecord(k);const Ee=[];for(Ee.push(this.extract(k,this.consumeToken));k.value[k.cur]==="/";)k.cur+=1,Ee.push(this.extract(k,this.consumeToken));if(Ee.length===0)throw new Error("Invalid proto");const ot=this.parseFmt(k);return this.currentLine++,{mediaType:J,port:te,protos:Ee,fmts:ot}}parseTimeFields(){const k=[];for(;this.getCurrentRecord().type===R.TIME;){const J=this.parseTime(),te=this.parseRepeat(),Ee=this.parseZone();k.push({time:J,repeats:te,zones:Ee})}return k}parseMediaDescription(){const k=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===R.MEDIA;){const J=this.parseMedia(),te=this.parseInformation(),Ee=this.parseConnections(),ot=this.parseBandWidth(),un=this.parseKey(),$r=this.parseMediaAttributes(J);k.push({media:J,information:te,connections:Ee,bandwidths:ot,key:un,attributes:$r})}return k}parseConnections(){const k=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===R.CONNECTION;)k.push(this.parseConnection());return k}parseFmt(k){const J=[];for(;;)try{this.consumeSpaceForRecord(k),J.push(this.extract(k,this.consumeToken))}catch{break}if(J.length===0)throw new Error("Invalid fmts");return J}extract(k,J,...te){const Ee=J.call(this,k.value,k.cur,...te),ot=k.value.slice(k.cur,Ee);return k.cur=Ee,ot}extractOneOrMore(k,J){const te=this.consumeOneOrMore(k.value,k.cur,J),Ee=k.value.slice(k.cur,te);return k.cur=te,Ee}consumeSpaceForRecord(k){if(k.value[k.cur]!==C)throw new Error("Invalid space at ".concat(k.cur,"."));k.cur+=1}}class en extends We{constructor(...k){super(...k),Bt(this,"attributes",void 0),Bt(this,"digested",!1)}extractOneOrMore(k,J,te){const Ee=this.consumeOneOrMore(k.attValue,k._cur,J),ot=k.attValue.slice(k._cur,Ee),[un,$r]=te||[];if(typeof un=="number"&&ot.length<un)throw new Error("error in length, should be more or equal than ".concat(un," characters."));if(typeof $r=="number"&&ot.length>$r)throw new Error("error in length, should be less or equal than ".concat($r," characters."));return k._cur=Ee,ot}consumeAttributeSpace(k){if(k.attValue[k._cur]!==C)throw new Error("Invalid space at ".concat(k._cur,"."));k._cur+=1}extract(k,J,...te){if(!k.attValue)throw new Error("Nothing to extract from attValue.");const Ee=J.call(this,k.attValue,k._cur,...te),ot=k.attValue.slice(k._cur,Ee);return k._cur=Ee,ot}atEnd(k){if(!k.attValue)throw new Error;return k._cur>=k.attValue.length}peekChar(k){if(!k.attValue)throw new Error;return k.attValue[k._cur]}peek(k,J){if(!k.attValue)throw new Error;for(let te=0;te<J.length;te++)if(J[te]!==k.attValue[k._cur+te])return!1;return!0}parseIceUfrag(k){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(k,ke,[4,256])}parseIcePwd(k){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(k,ke,[22,256])}parseIceOptions(k){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const J=[];for(;!this.atEnd(k);){J.push(this.extractOneOrMore(k,ke));try{this.consumeAttributeSpace(k)}catch(te){if(this.atEnd(k))break;throw te}}this.attributes.iceOptions=J}parseFingerprint(k){const J=this.extract(k,this.consumeToken);this.consumeAttributeSpace(k);const te=this.extract(k,this.consumeTill);this.attributes.fingerprints.push({hashFunction:J,fingerprint:te})}parseExtmap(k){const J=this.extractOneOrMore(k,L);let te;this.peekChar(k)==="/"&&(this.extract(k,this.consume,"/"),te=this.extract(k,this.consumeToken)),this.consumeAttributeSpace(k);const Ee=this.extract(k,this.consumeTill,C),ot=Oe(Oe({entry:parseInt(J,10)},te&&{direction:te}),{},{extensionName:Ee});this.peekChar(k)===C&&(this.consumeAttributeSpace(k),ot.extensionAttributes=this.extract(k,this.consumeTill)),this.attributes.extmaps.push(ot)}parseSetup(k){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const J=this.extract(k,this.consumeTill);if(J!=="active"&&J!=="passive"&&J!=="actpass"&&J!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=J}}class Yn extends en{constructor(...k){super(...k),Bt(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(k){if(this.digested)throw new Error("already digested");try{switch(k.attField){case"group":this.parseGroup(k);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(k);break;case"ice-pwd":this.parseIcePwd(k);break;case"ice-options":this.parseIceOptions(k);break;case"fingerprint":this.parseFingerprint(k);break;case"setup":this.parseSetup(k);break;case"tls-id":this.parseTlsId(k);break;case"identity":this.parseIdentity(k);break;case"extmap":this.parseExtmap(k);break;case"msid-semantic":this.parseMsidSemantic(k);break;default:k.ignored=!0,this.attributes.unrecognized.push(k)}}catch(J){throw console.error("parsing session attribute ".concat(k.attField,' error, "a=').concat(k.attField,":").concat(k.attValue,'"')),J}if(!k.ignored&&k.attValue&&!this.atEnd(k))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(k){const J=this.extract(k,this.consumeToken),te=[];for(;!this.atEnd(k)&&this.peekChar(k)===C;)this.consumeAttributeSpace(k),te.push(this.extract(k,this.consumeToken));this.attributes.groups.push({semantic:J,identificationTag:te})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(k){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(k,be)}parseIdentity(k){const J=this.extractOneOrMore(k,Te),te=[];for(;!this.atEnd(k)&&this.peekChar(k)===C;){this.consumeAttributeSpace(k);const Ee=this.extract(k,this.consumeToken);this.extract(k,this.consume,"=");const ot=this.extractOneOrMore(k,un=>un!==C&&ye(un));te.push({name:Ee,value:ot})}this.attributes.identities.push({assertionValue:J,extensions:te})}parseMsidSemantic(k){this.peekChar(k)===C&&this.consumeAttributeSpace(k);const J={semantic:this.extract(k,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(k)}catch{break}if(this.peekChar(k)==="*"){this.extract(k,this.consume,"*"),J.applyForAll=!0;break}{const te=this.extract(k,this.consumeTill,C);J.identifierList.push(te)}}this.attributes.msidSemantic=J}}class Br extends en{constructor(k){super(),Bt(this,"attributes",void 0),k.protos.indexOf("RTP")!==-1||k.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(k){if(this.digested)throw new Error("already digested");try{switch(k.attField){case"extmap":this.parseExtmap(k);break;case"setup":this.parseSetup(k);break;case"ice-ufrag":this.parseIceUfrag(k);break;case"ice-pwd":this.parseIcePwd(k);break;case"ice-options":this.parseIceOptions(k);break;case"candidate":this.parseCandidate(k);break;case"remote-candidate":this.parseRemoteCandidate(k);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(k);break;case"rtpmap":this.parseRtpmap(k);break;case"ptime":this.parsePtime(k);break;case"maxptime":this.parseMaxPtime(k);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(k);break;case"ssrc":this.parseSSRC(k);break;case"fmtp":this.parseFmtp(k);break;case"rtcp-fb":this.parseRtcpFb(k);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(k);break;case"mid":this.parseMid(k);break;case"msid":this.parseMsid(k);break;case"imageattr":this.parseImageAttr(k);break;case"rid":this.parseRid(k);break;case"simulcast":this.parseSimulcast(k);break;case"sctp-port":this.parseSctpPort(k);break;case"max-message-size":this.parseMaxMessageSize(k);break;case"ssrc-group":this.parseSSRCGroup(k);break;default:k.ignored=!0,this.attributes.unrecognized.push(k)}}catch(J){throw console.error("parsing media attribute ".concat(k.attField,' error, "a=').concat(k.attField,":").concat(k.attValue,'"')),J}if(!k.ignored&&k.attValue&&!this.atEnd(k))throw new Error("attribute parsing error")}parseCandidate(k){const J=this.extractOneOrMore(k,ke,[1,32]);this.consumeAttributeSpace(k);const te=this.extractOneOrMore(k,L,[1,5]);this.consumeAttributeSpace(k);const Ee=this.extract(k,this.consumeToken);this.consumeAttributeSpace(k);const ot=this.extractOneOrMore(k,L,[1,10]);this.consumeAttributeSpace(k);const un=this.extract(k,this.consumeAddress);this.consumeAttributeSpace(k);const $r=this.extract(k,this.consumePort);this.consumeAttributeSpace(k),this.extract(k,this.consume,"typ"),this.consumeAttributeSpace(k);const ka={foundation:J,componentId:te,transport:Ee,priority:ot,connectionAddress:un,port:$r,type:this.extract(k,this.consumeToken),extension:{}};for(this.peek(k," raddr")&&(this.extract(k,this.consume," raddr"),this.consumeAttributeSpace(k),ka.relAddr=this.extract(k,this.consumeAddress)),this.peek(k," rport")&&(this.extract(k,this.consume," rport"),this.consumeAttributeSpace(k),ka.relPort=this.extract(k,this.consumePort));this.peekChar(k)===C;){this.consumeAttributeSpace(k);const ul=this.extract(k,this.consumeToken);this.consumeAttributeSpace(k),ka.extension[ul]=this.extractOneOrMore(k,j)}this.attributes.candidates.push(ka)}parseRemoteCandidate(k){const J=[];for(;;){const te=this.extractOneOrMore(k,L,[1,5]);this.consumeAttributeSpace(k);const Ee=this.extract(k,this.consumeAddress);this.consumeAttributeSpace(k);const ot=this.extract(k,this.consumePort);J.push({componentId:te,connectionAddress:Ee,port:ot});try{this.consumeAttributeSpace(k)}catch{break}}this.attributes.remoteCandidatesList.push(J)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(k){const J=this.extract(k,this.consumeToken);this.consumeAttributeSpace(k);const te=this.extract(k,this.consumeTill,"/");this.extract(k,this.consume,"/");const Ee={encodingName:te,clockRate:this.extractOneOrMore(k,L)};this.atEnd(k)||this.peekChar(k)!=="/"||(this.extract(k,this.consume,"/"),Ee.encodingParameters=parseInt(this.extract(k,this.consumeTill),10));const ot=this.attributes.payloads.find(un=>un.payloadType===parseInt(J,10));ot?ot.rtpMap=Ee:this.attributes.payloads.push({payloadType:parseInt(J,10),rtpMap:Ee,rtcpFeedbacks:[]})}parsePtime(k){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(k,this.consumeTill)}parseMaxPtime(k){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(k,this.consumeTill)}parseDirection(k){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=k.attField}parseSSRC(k){const J=this.extractOneOrMore(k,L);this.consumeAttributeSpace(k);const te=this.extract(k,this.consumeTill,":");let Ee;this.peekChar(k)===":"&&(this.extract(k,this.consume,":"),Ee=this.extract(k,this.consumeTill));const ot=this.attributes.ssrcs.find(un=>un.ssrcId===parseInt(J,10));ot?ot.attributes[te]=Ee:this.attributes.ssrcs.push({ssrcId:parseInt(J,10),attributes:{[te]:Ee}})}parseFmtp(k){const J=this.extract(k,this.consumeTill,C);this.consumeAttributeSpace(k);const te=this.extract(k,this.consumeTill),Ee={};te.split(";").forEach(un=>{let[$r,ka]=un.split("=");$r=$r.trim();const ul=typeof ka=="string"?ka.trim():null;typeof $r=="string"&&$r.length>0&&(Ee[$r]=ul)});const ot=this.attributes.payloads.find(un=>un.payloadType===parseInt(J,10));ot?ot.fmtp={parameters:Ee}:this.attributes.payloads.push({payloadType:parseInt(J,10),rtcpFeedbacks:[],fmtp:{parameters:Ee}})}parseFmtParameters(k){const J={},te=this.extract(k,this.consumeTill,"=");k._cur++;const Ee=this.extract(k,this.consumeTill,";");for(J[te]=Ee;k.attValue[k._cur]===";";){const ot=this.extract(k,this.consumeTill,"=");k._cur++;const un=this.extract(k,this.consumeTill,";");J[ot]=un}return J}parseRtcpFb(k){let J="";J=this.peekChar(k)==="*"?this.extract(k,this.consume,"*"):this.extract(k,this.consumeTill,C),this.consumeAttributeSpace(k);const te=this.extract(k,this.consumeTill,C);let Ee;switch(te){case"trr-int":Ee={type:te,interval:this.extract(k,this.consumeTill)};break;case"ack":case"nack":default:{const ot={type:te};this.peekChar(k)===C&&(this.consumeAttributeSpace(k),ot.parameter=this.extract(k,this.consumeToken),this.peekChar(k)===C&&(ot.additional=this.extract(k,this.consumeTill))),Ee=ot}}if(J==="*")this.attributes.rtcpFeedbackWildcards.push(Ee);else{const ot=this.attributes.payloads.find(un=>un.payloadType===parseInt(J,10));ot?ot.rtcpFeedbacks.push(Ee):this.attributes.payloads.push({payloadType:parseInt(J,10),rtcpFeedbacks:[Ee]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(k){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const J={port:this.extract(k,this.consumePort)};this.peekChar(k)===C&&(this.consumeAttributeSpace(k),J.netType=this.extractOneOrMore(k,q),this.consumeAttributeSpace(k),J.addressType=this.extractOneOrMore(k,q),this.consumeAttributeSpace(k),J.address=this.extract(k,this.consumeAddress)),this.attributes.rtcp=J}parseMsid(k){const J={id:this.extractOneOrMore(k,q,[1,64])};this.peekChar(k)===C&&(this.consumeAttributeSpace(k),J.appdata=this.extractOneOrMore(k,q,[1,64])),this.attributes.msids.push(J)}parseImageAttr(k){this.attributes.imageattr.push(k.attValue)}parseRid(k){const J=this.extractOneOrMore(k,Ee=>le(Ee)||L(Ee)||Ee==="_"||Ee==="-");this.consumeAttributeSpace(k);const te={id:J,direction:this.extract(k,this.consumeToken),params:[]};if(this.peekChar(k)===C){if(this.consumeAttributeSpace(k),this.peek(k,"pt=")){this.extract(k,this.consume,"pt=");const Ee=[];for(;;){const ot=this.extract(k,this.consumeToken);Ee.push(ot);try{this.extract(k,this.consume,",")}catch{break}}te.payloads=Ee,this.peekChar(k)===C&&this.extract(k,this.consume,C)}for(;;){const Ee=this.extract(k,this.consumeToken);switch(Ee){case"depend":{const ot={type:Ee,rids:this.extract(k,this.consume,"=").split(",")};te.params.push(ot);break}case"max-width":case"height-width":case"max-fps":case"max-fs":case"max-br":case"max-pps":case"max-bpp":default:{const ot={type:Ee};this.peekChar(k)==="="&&(this.extract(k,this.consume,"="),ot.val=this.extract(k,this.consumeTill,";")),te.params.push(ot)}}try{this.extract(k,this.consume,";")}catch{break}}}this.attributes.rids.push(te)}parseSimulcast(k){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=k.attValue,this.extract(k,this.consumeTill)}parseSctpPort(k){this.attributes.sctpPort=this.extractOneOrMore(k,L,[1,5])}parseMaxMessageSize(k){this.attributes.maxMessageSize=this.extractOneOrMore(k,L,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(k){this.attributes.mid=this.extract(k,this.consumeToken)}parseSSRCGroup(k){const J=this.extract(k,this.consumeToken),te=[];for(;;)try{this.consumeAttributeSpace(k);const Ee=this.extract(k,this.consumeInteger);te.push(parseInt(Ee,10))}catch{break}this.attributes.ssrcGroups.push({semantic:J,ssrcIds:te})}}function Bn(Re,k,J){return k in Re?Object.defineProperty(Re,k,{value:J,enumerable:!0,configurable:!0,writable:!0}):Re[k]=J,Re}class ro{constructor(){Bn(this,"eol",T)}print(k,J){let te="";return J&&(this.eol=J),te+=this.printVersion(k.version),te+=this.printOrigin(k.origin),te+=this.printSessionName(k.sessionName),te+=this.printInformation(k.information),te+=this.printUri(k.uri),te+=this.printEmail(k.emails),te+=this.printPhone(k.phones),te+=this.printConnection(k.connection),te+=this.printBandwidth(k.bandwidths),te+=this.printTimeFields(k.timeFields),te+=this.printKey(k.key),te+=this.printSessionAttributes(k.attributes),te+=this.printMediaDescription(k.mediaDescriptions),te}printVersion(k){return"v=".concat(k).concat(this.eol)}printOrigin(k){return"o=".concat(k.username," ").concat(k.sessId," ").concat(k.sessVersion," ").concat(k.nettype," ").concat(k.addrtype," ").concat(k.unicastAddress).concat(this.eol)}printSessionName(k){return k?"s=".concat(k).concat(this.eol):""}printInformation(k){return k?"i=".concat(k).concat(this.eol):""}printUri(k){return k?"u=".concat(k).concat(this.eol):""}printEmail(k){let J="";for(const te of k)J+="e=".concat(te).concat(this.eol);return J}printPhone(k){let J="";for(const te of k)J+="e=".concat(te).concat(this.eol);return J}printConnection(k){return k?"c=".concat(k.nettype," ").concat(k.addrtype," ").concat(k.address).concat(this.eol):""}printBandwidth(k){let J="";for(const te of k)J+="b=".concat(te.bwtype,":").concat(te.bandwidth).concat(this.eol);return J}printTimeFields(k){let J="";for(const te of k){J+="t=".concat(te.time.startTime," ").concat(te.time.startTime).concat(this.eol);for(const Ee of te.repeats)J+="r=".concat(Ee.repeatInterval," ").concat(Ee.typedTimes.join(" ")).concat(this.eol);te.zoneAdjustments&&(J+="z=",J+="z=".concat(te.zoneAdjustments.map(Ee=>"".concat(Ee.time," ").concat(Ee.back?"-":""," ").concat(Ee.typedTime)).join(" ")).concat(this.eol),J+=this.eol)}return J}printKey(k){return k?"k=".concat(k).concat(this.eol):""}printAttributes(k){let J="";for(const te of k)J+="a=".concat(te.attField).concat(te.attValue?":".concat(te.attValue):"").concat(this.eol);return J}printMediaDescription(k){let J="";for(const te of k)J+=this.printMedia(te.media),J+=this.printInformation(te.information),J+=this.printConnections(te.connections),J+=this.printBandwidth(te.bandwidths),J+=this.printKey(te.key),J+=this.printMediaAttributes(te);return J}printConnections(k){let J="";for(const te of k)J+=this.printConnection(te);return J}printMedia(k){return"m=".concat(k.mediaType," ").concat(k.port," ").concat(k.protos.join("/")," ").concat(k.fmts.join(" ")).concat(this.eol)}printSessionAttributes(k){return new Ce(this.eol).print(k)}printMediaAttributes(k){return new Ne(this.eol).print(k)}}class ge{constructor(k){Bn(this,"eol",void 0),this.eol=k}printIceUfrag(k){return k===void 0?"":"a=ice-ufrag:".concat(k).concat(this.eol)}printIcePwd(k){return k===void 0?"":"a=ice-pwd:".concat(k).concat(this.eol)}printIceOptions(k){return k===void 0?"":"a=ice-options:".concat(k.join(C)).concat(this.eol)}printFingerprints(k){return k.length>0?k.map(J=>"a=fingerprint:".concat(J.hashFunction).concat(C).concat(J.fingerprint)).join(this.eol)+this.eol:""}printExtmap(k){return k.map(J=>"a=extmap:".concat(J.entry).concat(J.direction?"/".concat(J.direction):"").concat(C).concat(J.extensionName).concat(J.extensionAttributes?"".concat(C).concat(J.extensionAttributes):"").concat(this.eol)).join("")}printSetup(k){return k===void 0?"":"a=setup:".concat(k).concat(this.eol)}printUnrecognized(k){return k.map(J=>"a=".concat(J.attField).concat(J.attValue?":".concat(J.attValue):"").concat(this.eol)).join("")}}class Ce extends ge{print(k){let J="";return J+=this.printGroups(k.groups),J+=this.printMsidSemantic(k.msidSemantic),J+=this.printIceLite(k.iceLite),J+=this.printIceUfrag(k.iceUfrag),J+=this.printIcePwd(k.icePwd),J+=this.printIceOptions(k.iceOptions),J+=this.printFingerprints(k.fingerprints),J+=this.printSetup(k.setup),J+=this.printTlsId(k.tlsId),J+=this.printIdentity(k.identities),J+=this.printExtmap(k.extmaps),J+=this.printUnrecognized(k.unrecognized),J}printGroups(k){let J="";return k.length>0&&(J+=k.map(te=>"a=group:".concat(te.semantic).concat(te.identificationTag.map(Ee=>"".concat(C).concat(Ee)).join("")).concat(this.eol)).join("")),J}printIceLite(k){return k===void 0?"":"a=ice-lite"+this.eol}printTlsId(k){return k?"a=tls-id:".concat(k).concat(this.eol):""}printIdentity(k){return k.length===0?"":k.map(J=>"a=identity:".concat(J.assertionValue).concat(J.extensions.map(te=>"".concat(C).concat(te.name).concat(te.value?"=".concat(te.value):"")))).join(this.eol)+this.eol}printMsidSemantic(k){if(!k)return"";let J="a=msid-semantic:".concat(k.semantic);return k.applyForAll?J+="".concat(C,"*"):k.identifierList.length>0&&(J+=k.identifierList.map(te=>"".concat(C).concat(te))),J+this.eol}}class Ne extends ge{print(k){const J=k.attributes;let te="";return te+=this.printRTCP(J.rtcp),te+=this.printIceUfrag(J.iceUfrag),te+=this.printIcePwd(J.icePwd),te+=this.printIceOptions(J.iceOptions),te+=this.printCandidates(J.candidates),te+=this.printRemoteCandidatesList(J.remoteCandidatesList),te+=this.printEndOfCandidates(J.endOfCandidates),te+=this.printFingerprints(J.fingerprints),te+=this.printSetup(J.setup),te+=this.printMid(J.mid),te+=this.printExtmap(J.extmaps),te+=this.printRTPRelated(J),te+=this.printPtime(J.ptime),te+=this.printMaxPtime(J.maxPtime),te+=this.printDirection(J.direction),te+=this.printSSRCGroups(J.ssrcGroups),te+=this.printSSRC(J.ssrcs),te+=this.printRTCPMux(J.rtcpMux),te+=this.printRTCPMuxOnly(J.rtcpMuxOnly),te+=this.printRTCPRsize(J.rtcpRsize),te+=this.printMSId(J.msids),te+=this.printImageattr(J.imageattr),te+=this.printRid(J.rids),te+=this.printSimulcast(J.simulcast),te+=this.printSCTPPort(J.sctpPort),te+=this.printMaxMessageSize(J.maxMessageSize),te+=this.printUnrecognized(J.unrecognized),te}printCandidates(k){return k.map(J=>"a=candidate:".concat(J.foundation).concat(C).concat(J.componentId).concat(C).concat(J.transport).concat(C).concat(J.priority).concat(C).concat(J.connectionAddress).concat(C).concat(J.port).concat(C,"typ").concat(C).concat(J.type).concat(J.relAddr?"".concat(C,"raddr").concat(C).concat(J.relAddr):"").concat(J.relPort?"".concat(C,"rport").concat(C).concat(J.relPort):"").concat(Object.keys(J.extension).map(te=>"".concat(C).concat(te).concat(C).concat(J.extension[te])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(k){return k.map(J=>"a=remote-candidates:".concat(J.join(C)).concat(this.eol)).join("")}printEndOfCandidates(k){return k===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(k){if(!k.payloads)return"";const J=k.payloads;let te="";te+=k.rtcpFeedbackWildcards.map(Ee=>this.printRTCPFeedback("*",Ee)).join("");for(const Ee of J)te+=this.printRtpMap(Ee.payloadType,Ee.rtpMap),te+=this.printFmtp(Ee.payloadType,Ee.fmtp),te+=Ee.rtcpFeedbacks.map(ot=>this.printRTCPFeedback(Ee.payloadType,ot)).join("");return te}printFmtp(k,J){if(!J)return"";const te=Object.keys(J.parameters);return te.length===1&&J.parameters[te[0]]===null?"a=fmtp:".concat(k).concat(C).concat(te[0]).concat(this.eol):"a=fmtp:".concat(k).concat(C).concat(Object.keys(J.parameters).map(Ee=>"".concat(Ee,"=").concat(J.parameters[Ee])).join(";")).concat(this.eol)}printRtpMap(k,J){return J?"a=rtpmap:".concat(k).concat(C).concat(J.encodingName,"/").concat(J.clockRate).concat(J.encodingParameters?"/".concat(J.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(k,J){let te="a=rtcp-fb:".concat(k).concat(C),Ee=J;switch(Ee.type){case"trr-int":te+="ttr-int".concat(C).concat(Ee.interval);break;case"ack":case"nack":default:Ee=Ee,te+="".concat(Ee.type),Ee.parameter&&(te+="".concat(C).concat(Ee.parameter),Ee.additional&&(te+="".concat(C).concat(Ee.additional)))}return te+this.eol}printPtime(k){return k===void 0?"":"a=ptime:".concat(k).concat(this.eol)}printMaxPtime(k){return k===void 0?"":"a=maxptime:".concat(k).concat(this.eol)}printDirection(k){return k===void 0?"":"a=".concat(k).concat(this.eol)}printSSRC(k){return k.map(J=>Object.keys(J.attributes).map(te=>"a=ssrc:".concat(J.ssrcId.toString(10)).concat(C).concat(te).concat(J.attributes[te]?":".concat(J.attributes[te]):"").concat(this.eol)).join("")).join("")}printRTCPMux(k){return k===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(k){return k===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(k){return k===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(k){if(k===void 0)return"";let J="a=rtcp:".concat(k.port);return k.netType&&(J+="".concat(C).concat(k.netType)),k.addressType&&(J+="".concat(C).concat(k.addressType)),k.address&&(J+="".concat(C).concat(k.address)),J+this.eol}printMSId(k){return k.map(J=>"a=msid:".concat(J.id).concat(J.appdata?"".concat(C).concat(J.appdata):"").concat(this.eol)).join("")}printImageattr(k){return k.map(J=>"a=imageattr:".concat(J).concat(this.eol)).join("")}printRid(k){return k.map(J=>{let te="a=rid:".concat(J.id).concat(C).concat(J.direction);return J.payloads&&(te+="".concat(C,"pt=").concat(J.payloads.join(","))),J.params.length>0&&(te+="".concat(C).concat(J.params.map(Ee=>Ee.type==="depend"?"depend=".concat(Ee.rids.join(",")):"".concat(Ee.type,"=").concat(Ee.val)).join(";"))),te+this.eol}).join("")}printSimulcast(k){return k===void 0?"":"a=simulcast:".concat(k).concat(this.eol)}printSCTPPort(k){return k===void 0?"":"a=sctp-port:".concat(k).concat(this.eol)}printMaxMessageSize(k){return k===void 0?"":"a=max-message-size:".concat(k).concat(this.eol)}printMid(k){return k===void 0?"":"a=mid:".concat(k).concat(this.eol)}printSSRCGroups(k){return k.map(J=>"a=ssrc-group:".concat(J.semantic).concat(J.ssrcIds.map(te=>"".concat(C).concat(te.toString(10))).join("")).concat(this.eol)).join("")}}function tt(Re){return new ln().parse(Re)}function Ut(Re,k){return new ro().print(Re,k)}}},s={};function l(d){if(s[d])return s[d].exports;var p=s[d]={exports:{}};return i[d](p,p.exports,l),p.exports}return l.d=(d,p)=>{for(var v in p)l.o(p,v)&&!l.o(d,v)&&Object.defineProperty(d,v,{enumerable:!0,get:p[v]})},l.o=(d,p)=>Object.prototype.hasOwnProperty.call(d,p),l.r=d=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},l(8)})()})(ir);class oX{constructor(r){N(this,"sessionDesc",void 0),N(this,"localCapabilities",void 0),N(this,"rtpCapabilities",void 0),N(this,"candidates",void 0),N(this,"iceParameters",void 0),N(this,"dtlsParameters",void 0),N(this,"setup",void 0),N(this,"currentMidIndex",void 0),N(this,"cname",void 0),r=nr(r);const{remoteIceParameters:i,remoteDtlsParameters:s,candidates:l,remoteRTPCapabilities:d,remoteSetup:p,localCapabilities:v,sdkCodec:E,cname:T}=r,C=ir.exports.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=d,this.candidates=l,this.iceParameters=i,this.dtlsParameters=s,this.setup=p,this.localCapabilities=v,this.cname=T;for(let R=0;R<C.mediaDescriptions.length;R++){const L=C.mediaDescriptions[R];L.attributes.iceUfrag=i.iceUfrag,L.attributes.icePwd=i.icePwd,L.attributes.fingerprints=s.fingerprints,L.attributes.candidates=l,L.attributes.setup=p,L.media.mediaType==="video"&&(L.media.fmts=d.videoCodecs.map(j=>j.payloadType.toString(10)),L.attributes.payloads=d.videoCodecs,L.attributes.extmaps=d.videoExtensions),L.media.mediaType==="audio"&&(L.media.fmts=d.audioCodecs.map(j=>j.payloadType.toString(10)),L.attributes.payloads=d.audioCodecs,L.attributes.extmaps=d.audioExtensions),C.mediaDescriptions[R]=this.mungMediaDesc(L)}this.sessionDesc=C,this.currentMidIndex=C.mediaDescriptions.length-1}toString(){return ir.exports.print(this.sessionDesc)}send(r,i,s){const{ssrcs:l,ssrcGroups:d}=ia(i,this.cname),p=this.sessionDesc.mediaDescriptions.find(T=>r===ut.VIDEO?T.media.mediaType==="video":T.media.mediaType==="audio"),v=l[0].attributes.label,E=l[0].attributes.mslabel;return p.attributes.ssrcs=p.attributes.ssrcs.concat(l),p.attributes.ssrcGroups=p.attributes.ssrcGroups.concat(d),{id:v,mslabel:E}}batchSend(r){return r.map(i=>{let{kind:s,ssrcMsg:l}=i;return this.send(s,l,void 0)})}stopSending(r){this.sessionDesc.mediaDescriptions.forEach(i=>{const s=[],l=[],d=[];i.attributes.ssrcs.forEach(p=>{r.includes(p.attributes.label||"")?d.push(p):s.push(p)}),i.attributes.ssrcGroups.forEach(p=>{d.map(v=>v.ssrcId).includes(p.ssrcIds[0])||l.push(p)}),i.attributes.ssrcs=s,i.attributes.ssrcGroups=l})}mute(r){const i=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(r){const i=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}receive(r,i,s){r.forEach((l,d)=>{const p=l._mediaStreamTrack,v=this.sessionDesc.mediaDescriptions.findIndex(T=>T.attributes.mid===p.kind),E=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[v],l);this.sessionDesc.mediaDescriptions[v]=E})}stopReceiving(r){}updateCandidates(r){r===Vr.TCP?this.candidates.forEach(i=>{this.candidates.findIndex(s=>s.transport==="tcp"&&s.connectionAddress===i.connectionAddress&&s.port===i.port)===-1&&this.candidates.push(IL(IL({},i),{},{foundation:"tcpcandidate",priority:Number(i.priority)-1+"",transport:"tcp",port:Number(i.port)+90+""}))}):this.candidates=this.candidates.filter(i=>i.transport!=="tcp");for(const i of this.sessionDesc.mediaDescriptions)i.attributes.candidates=this.candidates}restartICE(r){r=nr(r),this.iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=r.iceUfrag,i.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const i=[];for(let s=0;s<r;s++)i.push((this.currentMidIndex+s+1).toString(10));return i}mungRecvMediaDsec(r,i){const s=nr(r);return Md(s,i),TC(s,i),s}updateRecvMedia(r,i){const s=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(s!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[s],i);this.sessionDesc.mediaDescriptions[s]=l}}bumpMid(r){this.currentMidIndex+=r}updateTrackLabel(r,i,s){const l=this.sessionDesc.mediaDescriptions.find(p=>r===ut.VIDEO?p.attributes.mid==="video":p.attributes.mid==="audio");if(l){const p=l.attributes.ssrcs.find(v=>v.attributes.label===i);var d;p&&(p.attributes.label=s,(d=p.attributes.msid)===null||d===void 0||d.replace(i,s))}}mungMediaDesc(r){const i=nr(r);return bC(i),function(s){const l=s.attributes.extmaps.find(d=>d.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");l&&s.attributes.extmaps.splice(s.attributes.extmaps.indexOf(l),1),s.attributes.payloads.forEach(d=>{const p=d.rtcpFeedbacks.findIndex(v=>v.type==="transport-cc");p!==-1&&d.rtcpFeedbacks.splice(p,1)})}(i),i}getSSRC(r){for(const i of this.sessionDesc.mediaDescriptions)for(const s of i.attributes.ssrcs)if(s.attributes.label===r)return[s]}}function xa(n){if(Array.isArray(n))return n.map(i=>i);if(!wL(n))return n;const r={};for(const i in n)wL(n[i])||Array.isArray(n[i])?r[i]=xa(n[i]):r[i]=n[i];return r}function wL(n){return!(typeof n!="object"||Array.isArray(n)||!n)}function aX(){const n=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return n&&n[0]?Number(n[0].split("/")[1]):null}function sX(n){return window.RTCStatsReport?n.getStats()instanceof Pe:!1}class IC{constructor(r){N(this,"input",[]),N(this,"size",void 0),this.size=r}add(r){this.input.push(r),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const ol={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},Wp={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:ol,remoteCandidate:ol}},OL={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},AL={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},NL={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},xL={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function PL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function DL(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?PL(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):PL(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class wC{constructor(r,i){N(this,"onFirstVideoReceived",void 0),N(this,"onFirstVideoDecoded",void 0),N(this,"onFirstAudioReceived",void 0),N(this,"onFirstVideoDecodedTimeout",void 0),N(this,"onFirstAudioDecoded",void 0),N(this,"onSelectedLocalCandidateChanged",void 0),N(this,"onSelectedRemoteCandidateChanged",void 0),N(this,"videoIsReady",!1),N(this,"videoIsReady2",{}),N(this,"pc",void 0),N(this,"options",void 0),N(this,"intervalTimer",void 0),N(this,"stats",xa(Wp)),N(this,"isFirstVideoReceived",{}),N(this,"isFirstVideoDecoded",{}),N(this,"isFirstAudioReceived",{}),N(this,"isFirstAudioDecoded",{}),N(this,"isFirstVideoDecodedTimeout",{}),N(this,"lossRateWindowStats",[]),this.pc=r,this.options=i,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new Pe(r=>{r({local:DL({},ol),remote:DL({},ol)})})}setVideoIsReady(r){this.videoIsReady=r}setVideoIsReady2(r,i){this.videoIsReady2[r]=i}getVideoIsReady(r){return this.videoIsReady2[r]||!1}setIsFirstAudioDecoded(r){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(r){this.lossRateWindowStats.push(r),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const i=this.lossRateWindowStats.length,s=["videoSend","audioSend","videoRecv","audioRecv"];let l=0,d=0,p=0,v=0;for(const E of s)r[E].forEach((T,C)=>{if(!this.lossRateWindowStats[i-1][E][C]||!this.lossRateWindowStats[0][E][C])return;const R=this.lossRateWindowStats[i-1][E][C].packets-this.lossRateWindowStats[0][E][C].packets,L=this.lossRateWindowStats[i-1][E][C].packetsLost-this.lossRateWindowStats[0][E][C].packetsLost;E==="videoSend"||E==="audioSend"?(l+=R,p+=L):(d+=R,v+=L),Number.isNaN(R)||Number.isNaN(R)?T.packetLostRate=0:T.packetLostRate=R<=0||L<=0?0:L/(R+L)});r.sendPacketLossRate=l<=0||p<=0?0:p/(l+p),r.recvPacketLossRate=d<=0||v<=0?0:v/(d+v)}}function kL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function cX(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?kL(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):kL(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class lX extends wC{constructor(){super(...arguments),N(this,"_stats",Wp),N(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const r=await this._getStats(),i=this.statsResponsesToObjects(r);this._stats=xa(Wp);const s=i.filter(d=>d.type==="ssrc");this.processSSRCStats(s);const l=i.find(d=>d.type==="VideoBwe");l&&this.processBandwidthStats(l),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(r){this._stats.bitrate={actualEncoded:Number(r.googActualEncBitrate),targetEncoded:Number(r.googTargetEncBitrate),retransmit:Number(r.googRetransmitBitrate),transmit:Number(r.googTransmitBitrate)},this._stats.sendBandwidth=Number(r.googAvailableSendBandwidth)}processSSRCStats(r){r.forEach(i=>{const s=i.id.includes("send");switch("".concat(i.mediaType,"_").concat(s?"send":"recv")){case"video_send":{const l=xa(AL);l.codec=i.googCodecName,l.adaptionChangeReason="none",i.googCpuLimitedResolution&&(l.adaptionChangeReason="cpu"),i.googBandwidthLimitedResolution&&(l.adaptionChangeReason="bandwidth"),l.avgEncodeMs=Number(i.googAvgEncodeMs),l.inputFrame={width:Number(i.googFrameWidthInput)||Number(i.googFrameWidthSent),height:Number(i.googFrameHeightInput)||Number(i.googFrameHeightSent),frameRate:Number(i.googFrameRateInput)},l.sentFrame={width:Number(i.googFrameWidthSent),height:Number(i.googFrameHeightSent),frameRate:Number(i.googFrameRateInput)},l.firsCount=Number(i.googFirReceived),l.nacksCount=Number(i.googNacksReceived),l.plisCount=Number(i.googPlisReceived),l.frameCount=Number(i.framesEncoded),l.bytes=Number(i.bytesSent),l.packets=Number(i.packetsSent),l.packetsLost=Number(i.packetsLost),l.ssrc=Number(i.ssrc),l.rttMs=Number(i.googRtt||0),this._stats.videoSend.push(l),this._stats.rtt=l.rttMs;break}case"video_recv":{const l=xa(OL),d=this.lastDecodeVideoReceiverStats.get(Number(i.ssrc));if(l.codec=i.googCodecName,l.targetDelayMs=Number(i.googTargetDelayMs),l.renderDelayMs=Number(i.googRenderDelayMs),l.currentDelayMs=Number(i.googCurrentDelayMs),l.minPlayoutDelayMs=Number(i.googMinPlayoutDelayMs),l.decodeMs=Number(i.googDecodeMs),l.maxDecodeMs=Number(i.googMaxDecodeMs),l.receivedFrame={width:Number(i.googFrameWidthReceived),height:Number(i.googFrameHeightReceived),frameRate:Number(i.googFrameRateReceived)},l.decodedFrame={width:Number(i.googFrameWidthReceived),height:Number(i.googFrameHeightReceived),frameRate:Number(i.googFrameRateDecoded)},l.decodeFrameRate=Number(i.googFrameRateDecoded),l.outputFrame={width:Number(i.googFrameWidthReceived),height:Number(i.googFrameHeightReceived),frameRate:Number(i.googFrameRateOutput)},l.jitterBufferMs=Number(i.googJitterBufferMs),l.firsCount=Number(i.googFirsSent),l.nacksCount=Number(i.googNacksSent),l.plisCount=Number(i.googPlisSent),l.framesDecodeCount=Number(i.framesDecoded),l.bytes=Number(i.bytesReceived),l.packets=Number(i.packetsReceived),l.packetsLost=Number(i.packetsLost),l.ssrc=Number(i.ssrc),l.packets>0&&!this.isFirstVideoReceived[l.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(l.ssrc),this.isFirstVideoReceived[l.ssrc]=!0),l.framesDecodeCount>0&&!this.isFirstVideoDecoded[l.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(l.ssrc,l.decodedFrame.width,l.decodedFrame.height),this.isFirstVideoDecoded[l.ssrc]=!0),d){const p=d.stats,v=Date.now()-d.lts;l.framesDecodeFreezeTime=p.framesDecodeFreezeTime,l.framesDecodeInterval=p.framesDecodeInterval,l.framesDecodeCount>p.framesDecodeCount&&this.isFirstVideoDecoded[l.ssrc]?(d.lts=Date.now(),l.framesDecodeInterval=v,l.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(i.ssrc,10))?l.framesDecodeFreezeTime+=l.framesDecodeInterval:this.setVideoIsReady2(parseInt(i.ssrc,10),!0))):l.framesDecodeCount<d.stats.framesDecodeCount&&(l.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(l.ssrc,{stats:cX({},l),lts:Date.now()}),this._stats.videoRecv.push(l);break}case"audio_recv":{const l=xa(xL);l.codec=i.googCodecName,l.outputLevel=Math.abs(Number(i.audioOutputLevel))/32767,l.decodingCNG=Number(i.googDecodingCNG),l.decodingCTN=Number(i.googDecodingCTN),l.decodingCTSG=Number(i.googDecodingCTSG),l.decodingNormal=Number(i.googDecodingNormal),l.decodingPLC=Number(i.googDecodingPLC),l.decodingPLCCNG=Number(i.googDecodingPLCCNG),l.expandRate=Number(i.googExpandRate),l.accelerateRate=Number(i.googAccelerateRate),l.preemptiveExpandRate=Number(i.googPreemptiveExpandRate),l.secondaryDecodedRate=Number(i.googSecondaryDecodedRate),l.speechExpandRate=Number(i.googSpeechExpandRate),l.preferredJitterBufferMs=Number(i.googPreferredJitterBufferMs),l.jitterBufferMs=Number(i.googJitterBufferMs),l.jitterMs=Number(i.googJitterReceived),l.bytes=Number(i.bytesReceived),l.packets=Number(i.packetsReceived),l.packetsLost=Number(i.packetsLost),l.ssrc=Number(i.ssrc),l.receivedFrames=Number(i.googDecodingCTN)||Number(i.packetsReceived),l.droppedFrames=Number(i.googDecodingPLC)+Number(i.googDecodingPLCCNG)||Number(i.packetsLost),l.receivedFrames>0&&!this.isFirstAudioReceived[l.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(l.ssrc),this.isFirstAudioReceived[l.ssrc]=!0),l.decodingNormal>0&&!this.isFirstAudioDecoded[l.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(l.ssrc),this.isFirstAudioDecoded[l.ssrc]=!0),this._stats.audioRecv.push(l);break}case"audio_send":{const l=xa(NL);l.codec=i.googCodecName,l.inputLevel=Math.abs(Number(i.audioInputLevel))/32767,l.aecReturnLoss=Number(i.googEchoCancellationReturnLoss||0),l.aecReturnLossEnhancement=Number(i.googEchoCancellationReturnLossEnhancement||0),l.residualEchoLikelihood=Number(i.googResidualEchoLikelihood||0),l.residualEchoLikelihoodRecentMax=Number(i.googResidualEchoLikelihoodRecentMax||0),l.bytes=Number(i.bytesSent),l.packets=Number(i.packetsSent),l.packetsLost=Number(i.packetsLost),l.ssrc=Number(i.ssrc),l.rttMs=Number(i.googRtt||0),this._stats.rtt=l.rttMs,this._stats.audioSend.push(l);break}}})}_getStats(){return new Pe((r,i)=>{this.pc.getStats(r,i)})}statsResponsesToObjects(r){const i=[];return r.result().forEach(s=>{const l={id:s.id,timestamp:s.timestamp.valueOf().toString(),type:s.type};s.names().forEach(d=>{l[d]=s.stat(d)}),i.push(l)}),i}}function LL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function mu(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?LL(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):LL(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class ML extends wC{constructor(){super(...arguments),N(this,"_stats",Wp),N(this,"report",void 0),N(this,"lastDecodeVideoReceiverStats",new Map),N(this,"lastVideoFramesRecv",new Map),N(this,"lastVideoFramesSent",new Map),N(this,"lastVideoFramesDecode",new Map),N(this,"lastVideoJBDelay",new Map),N(this,"lastAudioJBDelay",new Map),N(this,"mediaBytesSent",new Map),N(this,"mediaBytesRetransmit",new Map),N(this,"mediaBytesTargetEncode",new Map),N(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=xa(Wp),this.report.forEach(r=>{switch(r.type){case wo.OUTBOUND:r.mediaType==="audio"?this.processAudioOutboundStats(r):r.mediaType==="video"&&this.processVideoOutboundStats(r);break;case wo.INBOUND:r.mediaType==="audio"?this.processAudioInboundStats(r):r.mediaType==="video"&&this.processVideoInboundStats(r);break;case wo.TRANSPORT:{const i=this.report.get(r.selectedCandidatePairId);i&&this.processCandidatePairStats(i);break}case wo.CANDIDATE_PAIR:r.selected&&this.processCandidatePairStats(r)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const r=await this.pc.getStats(),i={local:mu({},ol),remote:mu({},ol)};return r.forEach(s=>{let l;if(s.type===wo.TRANSPORT&&(l=r.get(s.selectedCandidatePairId)),s.type===wo.CANDIDATE_PAIR&&s.selected&&(l=s),l){const d=(p,v)=>{p.type=v.type,p.id=v.id,v.address&&(p.address=v.address),v.candidateType&&(p.candidateType=v.candidateType),v.port&&(p.port=v.port),v.priority&&(p.priority=v.priority),v.protocol&&(p.protocol=v.protocol),v.relayProtocol&&(p.relayProtocol=v.relayProtocol)};if(l.localCandidateId){const p=r.get(l.localCandidateId);p&&d(i.local,p)}if(l.remoteCandidateId){const p=r.get(l.remoteCandidateId);p&&d(i.remote,p)}}}),i}processCandidatePairStats(r){if(this._stats.sendBandwidth=r.availableOutgoingBitrate||0,r.currentRoundTripTime&&(this._stats.rtt=1e3*r.currentRoundTripTime),this._stats.videoSend.forEach(i=>{r.currentRoundTripTime&&(i.rttMs=1e3*r.currentRoundTripTime)}),this._stats.audioSend.forEach(i=>{r.currentRoundTripTime&&(i.rttMs=1e3*r.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=r.id,r.localCandidateId){const i=this.report.get(r.localCandidateId);i&&this.processCandidateStats(i)}if(r.remoteCandidateId){const i=this.report.get(r.remoteCandidateId);i&&this.processCandidateStats(i)}}processCandidateStats(r){let i;r.type===wo.LOCAL_CANDIDATE&&(i=this._stats.selectedCandidatePair.localCandidate),r.type===wo.REMOTE_CANDIDATE&&(i=this._stats.selectedCandidatePair.remoteCandidate),i&&(i.type=r.type,i.id=r.id,r.address&&(i.address=r.address),r.candidateType&&(i.candidateType=r.candidateType),r.port&&(i.port=r.port),r.priority&&(i.priority=r.priority),r.protocol&&(i.protocol=r.protocol),r.relayProtocol&&(i.relayProtocol=r.relayProtocol),r.type===wo.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==i.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(mu({},i),mu({},this.stats.selectedCandidatePair.localCandidate)),r.type===wo.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==i.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(mu({},i),mu({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(r){let i=this._stats.audioRecv.find(s=>s.ssrc===r.ssrc);i||(i=xa(xL),this._stats.audioRecv.push(i)),i.ssrc=r.ssrc,i.packets=r.packetsReceived,i.packetsLost=r.packetsLost,i.bytes=r.bytesReceived,i.jitterMs=1e3*r.jitter,this.processAudioTrackReceiverStats(r,r.trackId,i),r.codecId&&(i.codec=this.getCodecFromCodecStats(r.codecId)),i.receivedFrames||(i.receivedFrames=r.packetsReceived),i.droppedFrames||(i.droppedFrames=r.packetsLost),i.receivedFrames>0&&!this.isFirstAudioReceived[i.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(i.ssrc),this.isFirstAudioReceived[i.ssrc]=!0),i.outputLevel&&i.outputLevel>0&&!this.isFirstAudioDecoded[i.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(i.ssrc),this.isFirstAudioDecoded[i.ssrc]=!0),typeof r.concealedSamples=="number"&&(i.concealedSamples=r.concealedSamples)}processVideoInboundStats(r){let i=this._stats.videoRecv.find(p=>p.ssrc===r.ssrc);i||(i=xa(OL),this._stats.videoRecv.push(i)),i.ssrc=r.ssrc,i.packets=r.packetsReceived,i.packetsLost=r.packetsLost,i.bytes=r.bytesReceived,i.firsCount=r.firCount,i.nacksCount=r.nackCount,i.plisCount=r.pliCount,i.framesDecodeCount=r.framesDecoded,i.totalInterFrameDelay=r.totalInterFrameDelay,i.totalSquaredInterFrameDelay=r.totalSquaredInterFrameDelay;const s=this.lastDecodeVideoReceiverStats.get(i.ssrc),l=this.lastVideoFramesDecode.get(i.ssrc),d=Date.now();if(i.framesDecodeCount>0&&!this.isFirstVideoDecoded[i.ssrc]){const p=i.decodedFrame?i.decodedFrame.width:0,v=i.decodedFrame?i.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(i.ssrc,p,v),this.isFirstVideoDecoded[i.ssrc]=!0}if(s){const p=s.stats,v=d-s.lts;i.framesDecodeFreezeTime=p.framesDecodeFreezeTime,i.framesDecodeInterval=p.framesDecodeInterval,!this.isFirstVideoDecoded[i.ssrc]&&v>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[i.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(i.ssrc),this.isFirstVideoDecodedTimeout[i.ssrc]=!0),i.framesDecodeCount>p.framesDecodeCount&&this.isFirstVideoDecoded[i.ssrc]?(s.lts=Date.now(),i.framesDecodeInterval=v,i.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(r.ssrc))?i.framesDecodeFreezeTime+=i.framesDecodeInterval:this.setVideoIsReady2(parseInt(r.ssrc,10),!0))):i.framesDecodeCount<p.framesDecodeCount&&(i.framesDecodeInterval=0),r.framesDecoded&&r.qpSum&&(s.stats.framesDecodeCount>r.framesDecoded?i.qpSumPerFrame=r.qpSum/r.framesDecoded:i.qpSumPerFrame=(r.qpSum-s.qpSum)/(r.framesDecoded-s.stats.framesDecodeCount))}l&&d-l.lts>=800?(i.decodeFrameRate=Math.round((i.framesDecodeCount-l.count)/((d-l.lts)/1e3)),this.lastVideoFramesDecode.set(i.ssrc,{count:i.framesDecodeCount,lts:d,rate:i.decodeFrameRate})):l?i.decodeFrameRate=l.rate:this.lastVideoFramesDecode.set(i.ssrc,{count:i.framesDecodeCount,lts:d,rate:0}),r.totalDecodeTime&&(i.decodeMs=1e3*r.totalDecodeTime),this.processVideoTrackReceiverStats(r,r.trackId,i),r.codecId&&(i.codec=this.getCodecFromCodecStats(r.codecId)),r.framerateMean&&(i.framesRateFirefox=r.framerateMean),i.packets>0&&!this.isFirstVideoReceived[i.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(i.ssrc),this.isFirstVideoReceived[i.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(i.ssrc,{stats:mu({},i),lts:s?s.lts:Date.now(),qpSum:r.qpSum})}processVideoOutboundStats(r){let i=this._stats.videoSend.find(l=>l.ssrc===r.ssrc);i||(i=xa(AL),this._stats.videoSend.push(i));const s=this.mediaBytesSent.get(r.ssrc);if(s)s.add(r.bytesSent);else{const l=new IC(10);l.add(r.bytesSent),this.mediaBytesSent.set(r.ssrc,l)}if(r.retransmittedBytesSent!==void 0){const l=this.mediaBytesRetransmit.get(r.ssrc);if(l)l.add(r.retransmittedBytesSent);else{const d=new IC(10);d.add(r.retransmittedBytesSent),this.mediaBytesRetransmit.set(r.ssrc,d)}}if(r.totalEncodedBytesTarget){const l=this.mediaBytesTargetEncode.get(r.ssrc);if(l)l.add(r.totalEncodedBytesTarget);else{const d=new IC(10);d.add(r.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(r.ssrc,d)}}if(i.ssrc=r.ssrc,i.bytes=r.bytesSent,i.packets=r.packetsSent,i.firsCount=r.firCount,i.nacksCount=r.nackCount,i.plisCount=r.pliCount,i.frameCount=r.framesEncoded,i.adaptionChangeReason=r.qualityLimitationReason,i.scalabilityMode=r.scalabilityMode,r.totalEncodeTime&&r.framesEncoded){const l=this.lastEncoderMs.get(r.ssrc);if(!l||l.lastFrameCount>r.framesEncoded)i.avgEncodeMs=1e3*r.totalEncodeTime/r.framesEncoded;else{const d=r.framesEncoded-l.lastFrameCount,p=r.totalEncodeTime-l.lastEncoderTime;i.avgEncodeMs=1e3*p/d}}if(r.framesEncoded&&r.qpSum){const l=this.lastEncoderMs.get(r.ssrc);!l||l.lastFrameCount>r.framesEncoded?i.qpSumPerFrame=r.qpSum/r.framesEncoded:i.qpSumPerFrame=(r.qpSum-l.lastQpSum)/(r.framesEncoded-l.lastFrameCount)}if(this.lastEncoderMs.set(r.ssrc,{lastFrameCount:r.framesEncoded,lastEncoderTime:r.totalEncodeTime,lastQpSum:r.qpSum,lts:Date.now()}),r.codecId&&(i.codec=this.getCodecFromCodecStats(r.codecId)),r.mediaSourceId&&this.processVideoMediaSource(r.mediaSourceId,i),this.processVideoTrackSenderStats(r,r.trackId,i),r.remoteId)this.processRemoteInboundStats(r.remoteId,i);else{const l=this.findRemoteStatsId(r.ssrc,wo.REMOTE_INBOUND);l&&this.processRemoteInboundStats(l,i)}}processAudioOutboundStats(r){let i=this._stats.audioSend.find(s=>s.ssrc===r.ssrc);if(i||(i=xa(NL),this._stats.audioSend.push(i)),i.ssrc=r.ssrc,i.packets=r.packetsSent,i.bytes=r.bytesSent,r.mediaSourceId&&this.processAudioMediaSource(r.mediaSourceId,i),r.codecId&&(i.codec=this.getCodecFromCodecStats(r.codecId)),this.processAudioTrackSenderStats(r,r.trackId,i),r.remoteId)this.processRemoteInboundStats(r.remoteId,i);else{const s=this.findRemoteStatsId(r.ssrc,wo.REMOTE_INBOUND);s&&this.processRemoteInboundStats(s,i)}}findRemoteStatsId(r,i){var s;const l=Array.from(ks(s=this.report).call(s)).find(d=>d.type===i&&d.ssrc===r);return l?l.id:null}processVideoMediaSource(r,i){const s=this.report.get(r);s&&s.width&&s.height&&s.framesPerSecond&&(i.inputFrame={width:s.width,height:s.height,frameRate:s.framesPerSecond})}processAudioMediaSource(r,i){const s=this.report.get(r);s&&(i.inputLevel=s.audioLevel)}processVideoTrackSenderStats(r,i,s){var l,d,p;const v=i?this.report.get(i):void 0,E=(l=v==null?void 0:v.framesSent)!==null&&l!==void 0?l:r.framesSent;let T=(d=v==null?void 0:v.frameWidth)!==null&&d!==void 0?d:r.frameWidth,C=(p=v==null?void 0:v.frameHeight)!==null&&p!==void 0?p:r.frameHeight;if(typeof E!="number")return;typeof T=="number"&&typeof C=="number"||(T=0,C=0);let R=0;const L=Date.now(),j=this.lastVideoFramesSent.get(s.ssrc);j&&L-j.lts>=800?(R=Math.round((E-j.count)/((L-j.lts)/1e3)),this.lastVideoFramesSent.set(s.ssrc,{count:E,lts:L,rate:R})):j?R=j.rate:this.lastVideoFramesSent.set(s.ssrc,{count:E,lts:L,rate:0}),s.sentFrame={width:T,height:C,frameRate:Math.max(0,R)}}processVideoTrackReceiverStats(r,i,s){var l,d,p,v,E;const T=i?this.report.get(i):void 0,C=(l=T==null?void 0:T.framesReceived)!==null&&l!==void 0?l:r.framesReceived,R=(d=T==null?void 0:T.frameWidth)!==null&&d!==void 0?d:r.frameWidth,L=(p=T==null?void 0:T.frameHeight)!==null&&p!==void 0?p:r.frameHeight,j=(v=T==null?void 0:T.jitterBufferDelay)!==null&&v!==void 0?v:r.jitterBufferDelay,Y=(E=T==null?void 0:T.jitterBufferEmittedCount)!==null&&E!==void 0?E:r.jitterBufferEmittedCount;if(typeof C=="number"){const q=this.lastVideoFramesRecv.get(s.ssrc),X=Date.now();s.framesReceivedCount=C;let le=0;q&&X-q.lts>=800?(le=Math.round((C-q.count)/((X-q.lts)/1e3)),this.lastVideoFramesRecv.set(s.ssrc,{count:C,lts:X,rate:le})):q?le=q.rate:this.lastVideoFramesRecv.set(s.ssrc,{count:C,lts:X,rate:0}),s.receivedFrame={width:R||0,height:L||0,frameRate:le||0},s.decodedFrame={width:R||0,height:L||0,frameRate:s.decodeFrameRate||0},s.outputFrame={width:R||0,height:L||0,frameRate:s.decodeFrameRate||0}}if(j&&Y){let q=this.lastVideoJBDelay.get(s.ssrc);this.lastVideoJBDelay.set(s.ssrc,{jitterBufferDelay:j,jitterBufferEmittedCount:Y}),q||(q={jitterBufferDelay:0,jitterBufferEmittedCount:0});const X=1e3*(j-q.jitterBufferDelay)/(Y-q.jitterBufferEmittedCount);s.jitterBufferMs=X,s.currentDelayMs=Math.round(X)}}processAudioTrackSenderStats(r,i,s){var l,d,p,v;const E=i?this.report.get(i):void 0,T=(l=(d=E==null?void 0:E.echoReturnLoss)!==null&&d!==void 0?d:r.echoReturnLoss)!==null&&l!==void 0?l:0,C=(p=(v=E==null?void 0:E.echoReturnLossEnhancement)!==null&&v!==void 0?v:r.echoReturnLossEnhancement)!==null&&p!==void 0?p:0;s.aecReturnLoss=T,s.aecReturnLossEnhancement=C}processAudioTrackReceiverStats(r,i,s){var l,d,p,v,E,T,C;const R=i?this.report.get(i):void 0,L=(l=R==null?void 0:R.removedSamplesForAcceleration)!==null&&l!==void 0?l:r.removedSamplesForAcceleration,j=(d=R==null?void 0:R.totalSamplesReceived)!==null&&d!==void 0?d:r.totalSamplesReceived,Y=(p=R==null?void 0:R.jitterBufferDelay)!==null&&p!==void 0?p:r.jitterBufferDelay,q=(v=R==null?void 0:R.jitterBufferEmittedCount)!==null&&v!==void 0?v:r.jitterBufferEmittedCount,X=(E=R==null?void 0:R.audioLevel)!==null&&E!==void 0?E:r==null?void 0:r.audioLevel,le=(T=R==null?void 0:R.totalSamplesDuration)!==null&&T!==void 0?T:r==null?void 0:r.totalSamplesDuration,he=(C=R==null?void 0:R.concealedSamples)!==null&&C!==void 0?C:r.concealedSamples;if(L&&j&&(s.accelerateRate=L/j),Y&&q){let ke=this.lastAudioJBDelay.get(s.ssrc);this.lastAudioJBDelay.set(s.ssrc,{jitterBufferDelay:Y,jitterBufferEmittedCount:q}),ke||(ke={jitterBufferDelay:0,jitterBufferEmittedCount:0});const be=1e3*(Y-ke.jitterBufferDelay)/(q-ke.jitterBufferEmittedCount);s.jitterBufferMs=Math.round(be)}s.outputLevel=X;let ye=1920;le&&j&&(ye=j/le/50,s.receivedFrames=Math.round(j/ye)),he&&(s.droppedFrames=Math.round(he/ye))}processRemoteInboundStats(r,i){const s=this.report.get(r);s&&(i.packetsLost=s.packetsLost,s.roundTripTime&&(i.rttMs=1e3*s.roundTripTime))}getCodecFromCodecStats(r){const i=this.report.get(r);if(!i)return"";const s=i.mimeType.match(/\/(.*)$/);return s&&s[1]?s[1]:""}updateSendBitrate(){let r=0,i=null,s=null;this.mediaBytesSent.forEach(d=>{r+=d.diffMean()}),this.mediaBytesRetransmit.forEach(d=>{i=i===null?d.diffMean():i+d.diffMean()}),this.mediaBytesTargetEncode.forEach(d=>{s=s===null?d.diffMean():s+d.diffMean()});const l=i!==null?r-i:r;this._stats.bitrate={actualEncoded:8*l/(this.options.updateInterval/1e3),transmit:8*r/(this.options.updateInterval/1e3)},i!==null&&(this._stats.bitrate.retransmit=8*i/(this.options.updateInterval/1e3)),s!==null&&(this._stats.bitrate.targetEncoded=8*s/(this.options.updateInterval/1e3))}}class uX extends wC{updateStats(){return Pe.resolve()}}function OC(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:500,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e4;const d=aX();return d?d<76?new lX(n,{updateInterval:r,lossRateInterval:i,freezeRateLimit:s,firstVideoDecodedTimeout:l}):new ML(n,{updateInterval:r,lossRateInterval:i,freezeRateLimit:s,firstVideoDecodedTimeout:l}):sX(n)?new ML(n,{updateInterval:r,lossRateInterval:i,freezeRateLimit:s,firstVideoDecodedTimeout:l}):new uX(n,{updateInterval:r,lossRateInterval:i,freezeRateLimit:s,firstVideoDecodedTimeout:l})}var tn;function UL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function FL(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?UL(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):UL(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}let Gp=(_e((tn=class hf extends L0{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}constructor(r,i){super(r,i),N(this,"store",void 0),N(this,"peerConnection",void 0),N(this,"remoteSDP",void 0),N(this,"initialOffer",void 0),N(this,"statsFilter",void 0),N(this,"useRTX",!1),N(this,"localCapabilities",void 0),N(this,"localCandidateCount",0),N(this,"allCandidatesReceived",!1),N(this,"establishPromise",void 0),N(this,"mutex",new Ri("P2PConnection-mutex")),this.store=i,this.peerConnection=new RTCPeerConnection(hf.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.statsFilter=OC(this.peerConnection,ie("STATS_UPDATE_INTERVAL"),void 0,Dn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const r=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!r.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const i=fu(r.sdp),s=CC(r.sdp,!this.useRTX,ie("FILTER_VIDEO_FEC"),ie("FILTER_AUDIO_FEC"),["opus"]);return this.localCapabilities=s,this.initialOffer=r,FL(FL({},i),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:s},offerSDP:r.sdp})}catch(r){throw new Q(W.GET_LOCAL_CONNECTION_PARAMS_FAILED,r.toString())}}async connect(r,i,s,l,d,p){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new oX({remoteIceParameters:r,remoteDtlsParameters:i,candidates:s,remoteRTPCapabilities:l.send,remoteSetup:d,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:p});const v=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(v){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(v.toString()))}}send(r,i){var s=this;return Na(function*(){const l=yield It(s.mutex.lock());try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const d=r.map(L=>s.peerConnection.addTrack(L._mediaStreamTrack)),p=yield It(s.peerConnection.createOffer()),v=ir.exports.parse(p.sdp),E=r.map(L=>{const j=L._mediaStreamTrack,Y=v.mediaDescriptions.find(q=>q.attributes.mid===j.kind);if(!Y)throw new Error("Cannot extract ssrc from mediaDescription.");return function(q,X,le){const he=q.attributes.ssrcs.filter(ke=>ke.attributes.label===X),ye=q.attributes.ssrcGroups;if(he.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(ye&&he.length>1){const ke=ye.find(be=>be.ssrcIds.indexOf(he[0].ssrcId)!==-1);return ke?[{ssrcId:ke.ssrcIds[0],rtx:le?ke.ssrcIds[1]:void 0}]:[{ssrcId:he[0].ssrcId}]}return[{ssrcId:he[0].ssrcId}]}(Y,j.id,s.useRTX)});let T;try{T=yield E}catch(L){throw d.forEach(j=>{yi()&&j.replaceTrack(null),s.peerConnection.removeTrack(j)}),L}const C=s.mungSendOfferSDP(p.sdp,r);s.remoteSDP.receive(r,i,T);const R=s.remoteSDP.toString();return yield It(s.peerConnection.setLocalDescription({type:"offer",sdp:C})),yield It(s.applySendEncodings(d,r)),yield It(s.peerConnection.setRemoteDescription({type:"answer",sdp:R})),r.map((L,j)=>{const Y=L._mediaStreamTrack.id;return{localSSRC:E[j],id:Y}})}catch(d){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(d.toString()))}finally{l()}})()}async stopSending(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const i=this.peerConnection.getSenders().filter(d=>{var p;return r.indexOf(((p=d.track)===null||p===void 0?void 0:p.id)||"")!==-1});if(i.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");i.map(d=>{yi()&&d.replaceTrack(null),this.peerConnection.removeTrack(d)});const s=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(s),this.remoteSDP.stopReceiving(r);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(i){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(i.toString()))}}async receive(r,i,s,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(r," before remoteSDP created."));const{id:d,mslabel:p}=this.remoteSDP.send(r,i,l),v=new Pe((C,R)=>{const L=setTimeout(()=>{R(new Error("Cannot receive track, id: ".concat(d)))},1e4),j=Y=>{const q=Ht();if((q.name==="Safari"&&Number(q.version)===11||Ci())&&Y.track.id!==d&&Y.streams[0].id===p){var X;const le=Y.streams[0].getTracks()[0];return(X=this.remoteSDP)===null||X===void 0||X.updateTrackLabel(r,d,Y.track.id),this.peerConnection.removeEventListener("track",j),clearTimeout(L),void C(le)}if(Y.track.id===d)return this.peerConnection.removeEventListener("track",j),clearTimeout(L),void C(Y.track)};this.peerConnection.addEventListener("track",j)}),E=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:E});const T=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(T),{track:await v,id:d}}catch(d){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(d.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const s=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(s)}catch(i){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}async muteRemote(r){}async unmuteRemote(r){}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getSenders().filter(s=>{var l;return r.indexOf(((l=s.track)===null||l===void 0?void 0:l.id)||"")!==-1});if(i.length!==r.length)throw new Error("sender' length doesn't match mids' length.");i.map(s=>{if(yi()&&s.track)s.track.enabled=!1;else{const l=s.getParameters();l.encodings.forEach(d=>d.active=!1),s.setParameters(l)}})}catch(i){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getSenders().filter(d=>{var p;return r.indexOf(((p=d.track)===null||p===void 0?void 0:p.id)||"")!==-1});if(i.length!==r.length)throw new Error("Senders' length doesn't match mids' length.");i.map(async d=>{if(yi()&&d.track)d.track.enabled=!0;else{const p=d.getParameters();p.encodings.forEach(v=>v.active=!0),await d.setParameters(p)}});const s=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(s);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(i){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(i.toString()))}}restartICE(r){var i=this;return Na(function*(){const s=yield It(i.mutex.lock("From P2PConnection.restartICE"));try{if(!i.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(zn().supportPCSetConfiguration){const E=i.peerConnection.getConfiguration(),T=r===Vr.RELAY?"relay":"all";E.iceTransportPolicy!==T&&(U.debug("[".concat(i.store.clientId,"] restartICE change iceTransportPolicy from [").concat(E.iceTransportPolicy,"] to [").concat(T,"]")),E.iceTransportPolicy=T,i.peerConnection.setConfiguration(E))}else if(r===Vr.RELAY)return;r!==Vr.RELAY&&i.remoteSDP.updateCandidates(r);const l=yield It(i.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const d=fu(l.sdp),{remoteIceParameters:p}=yield d.iceParameters;i.remoteSDP.restartICE(p);const v=i.remoteSDP.toString();yield It(i.peerConnection.setLocalDescription(l)),yield It(i.peerConnection.setRemoteDescription({type:"answer",sdp:v}))}catch(l){U.warning("[".concat(i.store.clientId,"] restart ICE failed, abort operation"),l)}finally{s()}})()}close(){var r;this.peerConnection.close(),(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const s=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(s.sdp,[i]);this.remoteSDP.updateRecvMedia(i._mediaStreamTrack.kind,i);const d=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(s){throw new Q(W.EXCHANGE_SDP_FAILED,s.toString())}}async updateSendParameters(r,i){const s=this.peerConnection.getSenders().filter(l=>{var d;return((d=l.track)===null||d===void 0?void 0:d.id)===r});s.length===1&&await this.applySendEncodings(s,[i])}setStatsRemoteVideoIsReady(r,i){this.statsFilter.setVideoIsReady2(r,i)}async replaceTrack(r,i){const s=this.peerConnection.getSenders().find(l=>{var d;return((d=l.track)===null||d===void 0?void 0:d.id)===i});s&&await s.replaceTrack(r._mediaStreamTrack)}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,U.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,U.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},ie("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const i={iceServers:[],sdpSemantics:"plan-b"};return r.iceServers?i.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(Op(r.turnServer.servers)?i.iceServers=r.turnServer.servers:(i.iceServers&&i.iceServers.push(...hf.turnServerConfigToIceServers(r.turnServer.servers)),ie("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&r.turnServer.serversFromGateway&&i.iceServers.push(...hf.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(r){const i=[];return r.forEach(s=>{s.security?s.tcpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),i}async applySendEncodings(r,i){try{if(!zn().supportSetRtpSenderParameters||r.length!==i.length)return;for(let l=0;l<r.length;l++){var s;const d=r[l],p=i[l];if(!p)continue;const v={},E={};if(p instanceof rr)switch(p._optimizationMode){case"motion":v.degradationPreference="maintain-framerate";break;case"detail":v.degradationPreference="maintain-resolution";break;default:v.degradationPreference="balanced"}if(ie("DSCP_TYPE")&&Zl()){const R=ie("DSCP_TYPE");["very-low","low","medium","high"].includes(R)&&(E.networkPriority=R)}const T=d.getParameters(),C=(s=T.encodings)===null||s===void 0?void 0:s[0];C&&Object.assign(C,E),Object.assign(T,v),await d.setParameters(T)}}catch{U.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(r,i){const s=ir.exports.parse(r);return i.forEach((l,d)=>{const p=l._mediaStreamTrack,v=s.mediaDescriptions.find(E=>E.attributes.mid===p.kind);v&&Md(v,l)}),ir.exports.print(s)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,i,s)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,i,s)},this.statsFilter.onSelectedLocalCandidateChanged=(r,i)=>{var s;(s=this.onSelectedLocalCandidateChanged)===null||s===void 0||s.call(this,r,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,i)=>{var s;(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0||s.call(this,r,i)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const i=this.remoteSDP.batchSend(r).map((d,p)=>{let{id:v,mslabel:E}=d;const{kind:T}=r[p];return new Pe((C,R)=>{const L=setTimeout(()=>{R(new Error("Cannot receive track, id: ".concat(v)))},1e4),j=Y=>{const q=Ht();if(q.name==="Safari"&&Number(q.version)===11&&Y.track.id!==v&&Y.streams[0].id===E){var X;const le=Y.streams[0].getTracks()[0];return(X=this.remoteSDP)===null||X===void 0||X.updateTrackLabel(T,v,Y.track.id),this.peerConnection.removeEventListener("track",j),clearTimeout(L),void C({track:le,id:v})}if(Y.track.id===v)return this.peerConnection.removeEventListener("track",j),clearTimeout(L),void C({track:Y.track,id:v})};this.peerConnection.addEventListener("track",j)})}),s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});const l=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(l),await Pe.all(i)}catch(i){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(i.toString()))}}async getRemoteSSRC(r){if(!this.remoteSDP)return;const i=this.remoteSDP.getSSRC(r);return i==null?void 0:i[0].ssrcId}setConfiguration(r){if(zn().supportPCSetConfiguration){const i=hf.resolvePCConfiguration(r);this.peerConnection.setConfiguration(i)}}}).prototype,"connect",[oa],Object.getOwnPropertyDescriptor(tn.prototype,"connect"),tn.prototype),_e(tn.prototype,"stopSending",[oa],Object.getOwnPropertyDescriptor(tn.prototype,"stopSending"),tn.prototype),_e(tn.prototype,"receive",[oa],Object.getOwnPropertyDescriptor(tn.prototype,"receive"),tn.prototype),_e(tn.prototype,"stopReceiving",[oa],Object.getOwnPropertyDescriptor(tn.prototype,"stopReceiving"),tn.prototype),_e(tn.prototype,"muteRemote",[oa],Object.getOwnPropertyDescriptor(tn.prototype,"muteRemote"),tn.prototype),_e(tn.prototype,"unmuteRemote",[oa],Object.getOwnPropertyDescriptor(tn.prototype,"unmuteRemote"),tn.prototype),_e(tn.prototype,"muteLocal",[oa],Object.getOwnPropertyDescriptor(tn.prototype,"muteLocal"),tn.prototype),_e(tn.prototype,"unmuteLocal",[oa],Object.getOwnPropertyDescriptor(tn.prototype,"unmuteLocal"),tn.prototype),_e(tn.prototype,"close",[oa],Object.getOwnPropertyDescriptor(tn.prototype,"close"),tn.prototype),_e(tn.prototype,"updateEncoderConfig",[oa],Object.getOwnPropertyDescriptor(tn.prototype,"updateEncoderConfig"),tn.prototype),_e(tn.prototype,"updateSendParameters",[oa],Object.getOwnPropertyDescriptor(tn.prototype,"updateSendParameters"),tn.prototype),_e(tn.prototype,"replaceTrack",[oa],Object.getOwnPropertyDescriptor(tn.prototype,"replaceTrack"),tn.prototype),_e(tn.prototype,"getRemoteSSRC",[oa],Object.getOwnPropertyDescriptor(tn.prototype,"getRemoteSSRC"),tn.prototype),tn);function oa(n,r,i){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,d=await l.lock("Locking from P2PConnection.".concat(r));try{for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];return await s.apply(this,v)}finally{d()}},i}function VL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function jL(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?VL(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):VL(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}const og="9",BL=4e4;class dX{get localCapabilities(){return nr(this._localCapabilities)}get rtpCapabilities(){return nr(this._rtpCapabilities)}get candidates(){return nr(this._candidates)}get iceParameters(){return nr(this._iceParameters)}get dtlsParameters(){return nr(this._dtlsParameters)}constructor(r){N(this,"sessionDesc",void 0),N(this,"_localCapabilities",void 0),N(this,"_rtpCapabilities",void 0),N(this,"_candidates",void 0),N(this,"_iceParameters",void 0),N(this,"_dtlsParameters",void 0),N(this,"setup",void 0),N(this,"currentMidIndex",void 0),N(this,"cname",void 0),N(this,"firefoxSsrcMidMap",new Map),r=nr(r);const{remoteIceParameters:i,remoteDtlsParameters:s,candidates:l,remoteRTPCapabilities:d,remoteSetup:p,localCapabilities:v,cname:E}=r,T=ir.exports.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`);this._rtpCapabilities=d,this._candidates=l,this._iceParameters=i,this._dtlsParameters=s,this._localCapabilities=v,this.setup=p,this.cname=E;const C=this.rtpCapabilities.send;for(const R of T.mediaDescriptions){if(R.attributes.iceUfrag=i.iceUfrag,R.attributes.icePwd=i.icePwd,R.attributes.fingerprints=s.fingerprints,R.attributes.candidates=l,R.attributes.setup=p,R.media.mediaType==="video"&&(R.media.fmts=C.videoCodecs.map(L=>L.payloadType.toString(10)),R.attributes.payloads=C.videoCodecs,R.attributes.extmaps=C.videoExtensions,ie("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:L,ssrcGroups:j}=ia([{ssrcId:BL,rtx:ie("USE_SUB_RTX")?40001:void 0}],this.cname);R.attributes.ssrcs=L,R.attributes.ssrcGroups=j}if(R.media.mediaType==="audio"&&(R.media.fmts=C.audioCodecs.map(L=>L.payloadType.toString(10)),R.attributes.payloads=C.audioCodecs,R.attributes.extmaps=C.audioExtensions,il(R),ie("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:L,ssrcGroups:j}=ia([{ssrcId:2e4}],this.cname);R.attributes.ssrcs=L,R.attributes.ssrcGroups=j}}this.sessionDesc=T,this.currentMidIndex=T.mediaDescriptions.length-1}preloadRemoteMedia(){const r=ie("PRELOAD_MEDIA_COUNT");this.rtpCapabilities;const i=this.candidates,s=this.dtlsParameters,l=this.iceParameters,d=this.rtpCapabilities.send;for(let p=1;p<r;p++){const v=2*p+2e4,E=2*p+BL,{ssrcs:T,ssrcGroups:C}=ia([{ssrcId:v}],this.cname),{ssrcs:R,ssrcGroups:L}=ia([{ssrcId:E,rtx:ie("USE_SUB_RTX")?E+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:og,protos:["UDP","TLS","RTP","SAVPF"],fmts:d.videoCodecs.map(j=>j.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:i,extmaps:d.videoExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:R,ssrcGroups:L,rtcpFeedbackWildcards:[],payloads:d.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:og,protos:["UDP","TLS","RTP","SAVPF"],fmts:d.audioCodecs.map(j=>j.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:i,extmaps:d.audioExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:T,ssrcGroups:C,rtcpFeedbackWildcards:[],payloads:d.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return ir.exports.print(this.sessionDesc)}send(r,i,s,l){const{ssrcs:d,ssrcGroups:p}=ia(i,this.cname,ie("SYNC_GROUP")?s:void 0),v=this.findPreloadMediaDesc(d);if(v){if(Dn()&&this.firefoxSsrcMidMap.set(d[0].ssrcId,v.attributes.mid),l&&(l.twcc||l.remb)){const E=this.sessionDesc.mediaDescriptions.indexOf(v);return this.sessionDesc.mediaDescriptions[E]=this.mungSendMediaDesc(v,l),{mid:v.attributes.mid,needExchangeSDP:!0}}return{mid:v.attributes.mid,needExchangeSDP:!1}}{const E=this.findAvailableMediaIndex(r,d);let T;return E===-1||E===1&&(yi()||LN())||E===0&&ie("USE_SUB_RTX")||MN()?(T=this.createOrRecycleSendMedia(r,d,p,"sendonly",l),this.updateBundleMids()):(T=nr(this.sessionDesc.mediaDescriptions[E]),T.attributes.direction="sendonly",T.attributes.ssrcs=d,T.attributes.ssrcGroups=p,this.sessionDesc.mediaDescriptions[E]=this.mungSendMediaDesc(T,l)),Dn()&&this.firefoxSsrcMidMap.set(d[0].ssrcId,T.attributes.mid),{mid:T.attributes.mid,needExchangeSDP:!0}}}batchSend(r){const i=r.map(d=>{let{kind:p,ssrcMsg:v,mslabel:E}=d;return this.send(p,v,E)}),s=[];let l=!1;return i.forEach(d=>{let{mid:p,needExchangeSDP:v}=d;v&&(l=!0),s.push(p)}),{mids:s,needExchangeSDP:l}}stopSending(r){const i=this.sessionDesc.mediaDescriptions.filter(s=>s.attributes.mid&&r.indexOf(s.attributes.mid)!==-1);if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");i.forEach(s=>{s.attributes.mid==="0"||Dn()||MN()?s.attributes.ssrcs=[]:(s.attributes.ssrcs=[],s.attributes.direction="inactive",s.media.port="0")}),this.updateBundleMids()}mute(r){const i=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(r){const i=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}muteRemote(r){const i=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(s=>{s.attributes.direction="inactive"})}unmuteRemote(r){const i=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(s=>{s.attributes.direction="recvonly"})}receive(r,i,s,l){r.forEach((d,p)=>{this.createOrRecycleRecvMedia(d,[],"recvonly",i,s,l[p])}),this.updateBundleMids()}stopReceiving(r){const i=this.sessionDesc.mediaDescriptions.filter(s=>r.indexOf(s.attributes.mid)!==-1);if(i.length!==r.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");i.forEach(s=>{s.media.port="0",s.attributes.direction="inactive"}),this.updateBundleMids()}updateCandidates(r){r===Vr.TCP?this._candidates.forEach(i=>{this._candidates.findIndex(s=>s.transport==="tcp"&&s.connectionAddress===i.connectionAddress&&s.port===i.port)===-1&&this._candidates.push(jL(jL({},i),{},{foundation:"tcpcandidate",priority:Number(i.priority)-1+"",transport:"tcp",port:Number(i.port)+90+""}))}):this._candidates=this._candidates.filter(i=>i.transport!=="tcp");for(const i of this.sessionDesc.mediaDescriptions)i.attributes.candidates=this.candidates}restartICE(r){r=nr(r),this._iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=r.iceUfrag,i.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const i=[];for(let s=0;s<r;s++)i.push((this.currentMidIndex+s+1).toString(10));return i}findAvailableMediaIndex(r,i){return this.sessionDesc.mediaDescriptions.findIndex(s=>{const l=s.media.mediaType===r&&s.media.port!=="0"&&(s.attributes.direction==="sendonly"||s.attributes.direction==="sendrecv")&&s.attributes.ssrcs.length===0;if(Dn()){if(l){const d=this.firefoxSsrcMidMap.get(i[0].ssrcId);return!(d||s.attributes.mid!=="0"&&s.attributes.mid!=="1")||!(!d||d!==s.attributes.mid)}return!1}return l})}createOrRecycleRecvMedia(r,i,s,l,d,p){const v=r._mediaStreamTrack.kind,E=this.rtpCapabilities.recv,T=this.localCapabilities.send;let C=[];if(v===ut.VIDEO){var R,L;if(ie("H264_PROFILE_LEVEL_ID")&&l==="h264"&&(C=E.videoCodecs.filter(le=>{var he,ye;return(((he=le.rtpMap)===null||he===void 0?void 0:he.encodingName.toLowerCase())||"").includes(l)&&(le==null||(ye=le.fmtp)===null||ye===void 0?void 0:ye.parameters["profile-level-id"])===ie("H264_PROFILE_LEVEL_ID")})),!C||((R=C)===null||R===void 0?void 0:R.length)===0){const le=T.videoCodecs.filter(he=>{var ye;return(((ye=he.rtpMap)===null||ye===void 0?void 0:ye.encodingName.toLowerCase())||"").includes(l)});le.length!==0&&(C=E.videoCodecs.filter(he=>le.some(ye=>ye.payloadType===he.payloadType)))}if(ie("USE_PUB_RTX")){const le=C.map(ye=>ye.payloadType.toString()),he=E.videoCodecs.filter(ye=>{var ke,be;return((ke=ye.rtpMap)===null||ke===void 0?void 0:ke.encodingName)==="rtx"&&le.includes(((be=ye.fmtp)===null||be===void 0?void 0:be.parameters.apt)||"")});C=[...C,...he]}C.length===0&&(U.warning("codec ".concat(l," not included in rtpCapabilities, fallback to default payloads: ").concat((L=E.videoCodecs[0].rtpMap)===null||L===void 0?void 0:L.encodingName)),C=E.videoCodecs)}else C=E.audioCodecs.filter(le=>{var he;return(((he=le.rtpMap)===null||he===void 0?void 0:he.encodingName.toLowerCase())||"").includes(d)}),C.length===0&&(U.warning("codec ".concat(d," not included in rtpCapabilities, fallback to opus")),C=E.audioCodecs.filter(le=>{var he;return(((he=le.rtpMap)===null||he===void 0?void 0:he.encodingName.toLowerCase())||"").includes("opus")}));const j=v===ut.VIDEO?E.videoExtensions:E.audioExtensions;this.currentMidIndex+=1;const Y="".concat(this.currentMidIndex);let q={media:{mediaType:v,port:og,protos:["UDP","TLS","RTP","SAVPF"],fmts:C.map(le=>le.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:j,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:C,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:s,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(Y)}};q=this.mungRecvMediaDsec(q,r,p);const X=this.findFirstClosedMedia(v);if(X){const le=this.sessionDesc.mediaDescriptions.indexOf(X);this.sessionDesc.mediaDescriptions[le]=q}else this.sessionDesc.mediaDescriptions.push(q);return q}createOrRecycleSendMedia(r,i,s,l,d){const p=this.rtpCapabilities.send,v=r===ut.VIDEO?p.videoCodecs:p.audioCodecs,E=r===ut.VIDEO?p.videoExtensions:p.audioExtensions;this.currentMidIndex+=1;const T="".concat(this.currentMidIndex);let C={media:{mediaType:r,port:og,protos:["UDP","TLS","RTP","SAVPF"],fmts:v.map(L=>L.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:E,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:s,rtcpFeedbackWildcards:[],payloads:v,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:l,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(T)}};C=this.mungSendMediaDesc(C,d);const R=this.findFirstClosedMedia(r);if(R){const L=this.sessionDesc.mediaDescriptions.indexOf(R);this.sessionDesc.mediaDescriptions[L]=C}else this.sessionDesc.mediaDescriptions.push(C);return C}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(r=>r.media.port!=="0").map(r=>r.attributes.mid)}mungRecvMediaDsec(r,i,s){const l=nr(r);return bC(l),Md(l,i),TC(l,i),CL(l),rg(l,s,this.localCapabilities.send),l}mungSendMediaDesc(r,i){const s=nr(r);return rg(s,i,this.localCapabilities.recv),il(s),s}updateRecvMedia(r,i){const s=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(s!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[s],i);this.sessionDesc.mediaDescriptions[s]=l}}bumpMid(r){this.currentMidIndex+=r}findFirstClosedMedia(r){return this.sessionDesc.mediaDescriptions.find(i=>Dn()?i.media.port==="0"&&i.media.mediaType===r:i.media.port==="0")}findPreloadMediaDesc(r){return this.sessionDesc.mediaDescriptions.find(i=>{var s,l;return((s=i.attributes)===null||s===void 0||(l=s.ssrcs[0])===null||l===void 0?void 0:l.ssrcId)===r[0].ssrcId})}getSSRC(r){var i;return(i=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r))===null||i===void 0?void 0:i.attributes.ssrcs}}var nn;function $L(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function Ud(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?$L(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):$L(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}let pc=(_e((nn=class pf extends L0{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var r,i,s;return(r=(i=this.peerConnection.getReceivers()[0])===null||i===void 0||(s=i.transport)===null||s===void 0?void 0:s.state)!==null&&r!==void 0?r:null}constructor(r,i){super(r,i),N(this,"store",void 0),N(this,"peerConnection",void 0),N(this,"remoteSDP",void 0),N(this,"initialOffer",void 0),N(this,"transportEventReceiver",void 0),N(this,"statsFilter",void 0),N(this,"localCapabilities",void 0),N(this,"localCandidateCount",0),N(this,"allCandidatesReceived",!1),N(this,"selectedCandidatePairTimer",void 0),N(this,"establishPromise",void 0),N(this,"mutex",new Ri("P2PConnection-mutex")),this.store=i,this.peerConnection=new RTCPeerConnection(pf.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.statsFilter=OC(this.peerConnection,ie("STATS_UPDATE_INTERVAL"),void 0,Dn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const r=await this.peerConnection.createOffer();if(!r.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const i=fu(r.sdp),s=await TL(!ie("USE_PUB_RTX")&&!ie("USE_SUB_RTX"),ie("FILTER_VIDEO_FEC"),ie("FILTER_AUDIO_FEC"));return this.localCapabilities=RC(s),this.initialOffer=r,Ud(Ud({},i),{},{rtpCapabilities:s,offerSDP:r.sdp})}catch(r){throw new Q(W.GET_LOCAL_CONNECTION_PARAMS_FAILED,r.toString())}}async connect(r,i,s,l,d,p){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new dX({remoteIceParameters:r,remoteDtlsParameters:i,candidates:s,remoteRTPCapabilities:l,remoteSetup:d,localCapabilities:this.localCapabilities,cname:p});const v=this.remoteSDP.toString(),E=ir.exports.parse(this.initialOffer.sdp),T=E.mediaDescriptions.find(j=>j.media.mediaType==="audio");T&&il(T);const C=ir.exports.print(E),R=this.logSDPExchange(C||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:C}),R==null||R(v),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v});const L=this.peerConnection.getTransceivers()[0];if(L!=null&&L.receiver&&this.tryBindTransportEvents(L.receiver),ie("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia();const j=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:j});const Y=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(Y)}}catch(v){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(v.toString()))}}send(r,i,s){var l=this;return Na(function*(){const d=yield It(l.mutex.lock("From P2PConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const p=[];r.forEach(q=>{const X=l.peerConnection.addTransceiver(q._mediaStreamTrack,{direction:"sendonly"});p.push(X),q._updateRtpTransceiver(X)}),Dn()&&ie("SIMULCAST")===!0&&(yield It(l.applySimulcastForFirefox(p,r)));const v=yield It(l.peerConnection.createOffer()),E=l.remoteSDP.predictReceivingMids(r.length),T=l.mungSendOfferSDP(v.sdp,r,E),C=ir.exports.parse(T),R=E.map(q=>{const X=C.mediaDescriptions.find(le=>le.attributes.mid===q);if(!X)throw new Error("Cannot extract ssrc from mediaDescription.");return SL(X,ie("USE_PUB_RTX"))});let L;try{L=yield R}catch(q){L=[],l.remoteSDP.receive(r,i,s,L);const X=l.remoteSDP.toString();throw yield It(l.peerConnection.setLocalDescription({type:"offer",sdp:T})),yield It(l.peerConnection.setRemoteDescription({type:"answer",sdp:X})),yield It(l.stopSending(E,!0)),q}l.remoteSDP.receive(r,i,s,L);const j=l.remoteSDP.toString(),Y=l.logSDPExchange(T,"offer","local","send");return yield It(l.peerConnection.setLocalDescription({type:"offer",sdp:T})),yield It(l.applySimulcastEncodings(p,r)),yield It(l.applySendEncodings(p,r)),Y==null||Y(j),yield It(l.peerConnection.setRemoteDescription({type:"answer",sdp:j})),p.map((q,X)=>{const le=E[X];return{localSSRC:R[X],id:le,transceiver:q}})}catch(p){throw p instanceof Q?p:new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(p.toString()))}finally{d()}})()}async stopSending(r,i){const s=i?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(E=>r.indexOf(E.mid)!==-1);if(l.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");l.map(E=>{var T;E.direction="inactive",(T=E.stop)===null||T===void 0||T.call(E)});const d=await this.peerConnection.createOffer(),p=this.logSDPExchange(d.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(d),this.remoteSDP.stopReceiving(r);const v=this.remoteSDP.toString();p==null||p(v),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(l){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(l.toString()))}finally{s&&s()}}async receive(r,i,s,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(r," before remoteSDP created."));const{mid:d,needExchangeSDP:p}=this.remoteSDP.send(r,i,s,l);if(p){const E=this.remoteSDP.toString(),T=this.logSDPExchange(E,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:E});const C=await this.peerConnection.createAnswer(),R=this.mungReceiveAnswerSDP(C.sdp,d,r);T==null||T(R||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:R}),U.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(r," by exchanging SDP."))}else U.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(r," no need to exchange SDP."));const v=this.peerConnection.getTransceivers().find(E=>E.mid===d);if(!v)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:v.receiver.track,id:d,transceiver:v}}catch(d){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(d.toString()))}}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:i,needExchangeSDP:s}=this.remoteSDP.batchSend(r);if(s){const l=this.remoteSDP.toString(),d=this.logSDPExchange(l,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:l});const p=await this.peerConnection.createAnswer();d==null||d(p.sdp||""),await this.peerConnection.setLocalDescription(p),U.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))}else U.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive no need to exchange SDP."));return i.map(l=>{const d=this.peerConnection.getTransceivers().find(p=>p.mid===l);if(!d)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:d.receiver.track,id:l,transceiver:d}})}catch(i){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(i.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const i=this.remoteSDP.toString(),s=this.logSDPExchange(i,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}async muteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.mute(r);const i=this.remoteSDP.toString(),s=this.logSDPExchange(i,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(i.toString()))}}async unmuteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.unmute(r);const i=this.remoteSDP.toString(),s=this.logSDPExchange(i,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(i.toString()))}}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(i.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(p=>{p.direction="inactive"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.muteRemote(r);const d=this.remoteSDP.toString();l==null||l(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(i){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(i.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(async(p,v)=>{p.direction="sendonly"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.unmuteRemote(r);const d=this.remoteSDP.toString();l==null||l(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(i){throw new Q(W.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(i.toString()))}}restartICE(r){var i=this;return Na(function*(){const s=yield It(i.mutex.lock("From P2PConnection.restartICE"));try{if(!i.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(zn().supportPCSetConfiguration){const T=i.peerConnection.getConfiguration(),C=r===Vr.RELAY?"relay":"all";T.iceTransportPolicy!==C&&(U.debug("[".concat(i.store.clientId,"] restartICE change iceTransportPolicy from [").concat(T.iceTransportPolicy,"] to [").concat(C,"]")),T.iceTransportPolicy=C,i.peerConnection.setConfiguration(T))}else if(r===Vr.RELAY)return;r!==Vr.RELAY&&i.remoteSDP.updateCandidates(r);const l=yield It(i.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const d=fu(l.sdp),{remoteIceParameters:p}=yield d.iceParameters;i.remoteSDP.restartICE(p);const v=i.remoteSDP.toString(),E=i.logSDPExchange(l.sdp||"","offer","local","restartICE");i.store.descriptionStart(),yield It(i.peerConnection.setLocalDescription(l)),E==null||E(v),yield It(i.peerConnection.setRemoteDescription({type:"answer",sdp:v}))}catch(l){U.warning("[".concat(i.store.clientId,"] restart ICE failed, abort operation"),l)}finally{s()}})()}close(){var r;this.peerConnection.close(),(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const s=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(s.sdp,[i],[r]);this.remoteSDP.updateRecvMedia(r,i);const d=this.remoteSDP.toString(),p=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),p==null||p(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(s){throw new Q(W.EXCHANGE_SDP_FAILED,s.toString())}}async updateSendParameters(r,i){const s=this.peerConnection.getTransceivers().filter(l=>l.mid===r);s.length===1&&(this.isVP8Simulcast(i)?Dn()||await this.applySimulcastEncodings(s,[i]):await this.applySendEncodings(s,[i]))}setStatsRemoteVideoIsReady(r,i){this.statsFilter.setVideoIsReady2(r,i)}async replaceTrack(r,i){const s=this.peerConnection.getTransceivers().find(l=>l.mid===i);s&&await s.sender.replaceTrack(r._mediaStreamTrack)}async getSelectedCandidatePair(){const r=this.peerConnection.getReceivers();if(r.length>0&&r[0].transport&&r[0].transport.iceTransport&&r[0].transport.iceTransport.getSelectedCandidatePair&&r[0].transport.iceTransport.getSelectedCandidatePair()){const i=r[0].transport.iceTransport,{local:s,remote:l}=i.getSelectedCandidatePair();return{local:Ud(Ud({},ol),{},{candidateType:s.type,protocol:s.protocol,address:s.address,port:s.port}),remote:Ud(Ud({},ol),{},{candidateType:l.type,protocol:l.protocol,address:l.address,port:l.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,U.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,U.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},ie("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const i={iceServers:[]};return r.iceServers?i.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(Op(r.turnServer.servers)?i.iceServers=r.turnServer.servers:(i.iceServers&&i.iceServers.push(...pf.turnServerConfigToIceServers(r.turnServer.servers)),ie("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&r.turnServer.serversFromGateway&&i.iceServers.push(...pf.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),ie("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(i.iceTransportPolicy="relay")}))),ie("ENABLE_ENCODED_TRANSFORM")&&zn().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),i}static turnServerConfigToIceServers(r){const i=[];return r.forEach(s=>{s.security?s.tcpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(H0(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&!ie("FORCE_TURN_TCP")&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),i}tryBindTransportEvents(r){const i=r.transport;if(i){this.transportEventReceiver=r,i.onstatechange=()=>{var l;i!=null&&i.state&&((l=this.onDTLSTransportStateChange)===null||l===void 0||l.call(this,i.state))},i.onerror=l=>{var d;(d=this.onDTLSTransportError)===null||d===void 0||d.call(this,"error"in l?l.error:l)};const s=i.iceTransport;s&&(s.onstatechange=()=>{const l=i==null?void 0:i.iceTransport.state;var d;l&&((d=this.onICETransportStateChange)===null||d===void 0||d.call(this,l))},s.getSelectedCandidatePair&&(s.onselectedcandidatepairchange=()=>{if(s.getSelectedCandidatePair()){const{local:l,remote:d}=s.getSelectedCandidatePair();U.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:l.type,protocol:l.protocol}),", remote ").concat(JSON.stringify({candidateType:d.type,protocol:d.protocol,address:d.address,port:d.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async applySendEncodings(r,i){try{if(!zn().supportSetRtpSenderParameters||r.length!==i.length)return;for(let T=0;T<r.length;T++){const C=r[T],R=i[T];if(R&&R instanceof rr){var s,l;if(this.isVP8Simulcast(R))continue;const L={},j={};switch(R._optimizationMode){case"motion":L.degradationPreference="maintain-framerate";break;case"detail":L.degradationPreference="maintain-resolution";break;default:L.degradationPreference="balanced"}var d,p,v,E;if((s=R._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&(j.maxBitrate=1e3*((d=R._encoderConfig)===null||d===void 0?void 0:d.bitrateMax)),R._hints.includes(pr.LOW_STREAM)&&((p=R._encoderConfig)!==null&&p!==void 0&&p.frameRate&&(j.maxFramerate=uc(R._encoderConfig.frameRate)),(v=R._encoderConfig)!==null&&v!==void 0&&v.scaleResolutionDownBy&&((E=R._encoderConfig)===null||E===void 0?void 0:E.scaleResolutionDownBy)>1&&(j.scaleResolutionDownBy=R._encoderConfig.scaleResolutionDownBy)),ie("DSCP_TYPE")&&Zl()){const X=ie("DSCP_TYPE");["very-low","low","medium","high"].includes(X)&&(j.networkPriority=X)}const Y=C.sender.getParameters(),q=(l=Y.encodings)===null||l===void 0?void 0:l[0];Dn()&&!q&&(L.encodings=[j]),q&&Object.assign(q,j),Object.assign(Y,L),await C.sender.setParameters(Y)}}}catch{U.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(r,i,s){const l=ir.exports.parse(r);return i.forEach((d,p)=>{const v=s[p],E=l.mediaDescriptions.find(T=>T.attributes.mid===v);E&&(Md(E,d),bL(E,d,this.store.codec))}),ir.exports.print(l)}mungReceiveAnswerSDP(r,i,s){const l=ir.exports.parse(r),d=l.mediaDescriptions.find(p=>p.attributes.mid===i);return d&&s===ut.AUDIO&&d.media.mediaType==="audio"&&il(d),ir.exports.print(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,i,s)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,i,s)},this.statsFilter.onSelectedLocalCandidateChanged=(r,i)=>{var s;(s=this.onSelectedLocalCandidateChanged)===null||s===void 0||s.call(this,r,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,i)=>{var s;(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0||s.call(this,r,i)},this.statsFilter.onFirstVideoDecodedTimeout=r=>{var i;(i=this.onFirstVideoDecodedTimeout)===null||i===void 0||i.call(this,r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(r,i){if(r.length===i.length)for(let v=0;v<r.length;v++){var s,l,d,p;const E=r[v],T=i[v];if(T instanceof rr&&!T._hints.includes(pr.LOW_STREAM)&&(s=T._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&((l=T._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(d=T._scalabiltyMode)!==null&&d!==void 0&&d.numSpatialLayers&&((p=T._scalabiltyMode)===null||p===void 0?void 0:p.numSpatialLayers)>1&&this.store.codec==="vp8"){const C={},R={high:1e3*(T._encoderConfig.bitrateMax-50),medium:5e4};C.encodings=[{rid:"m",active:!0,maxBitrate:R.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:R.high}];const L=E.sender.getParameters();await E.sender.setParameters(Object.assign(L,C))}}}async applySimulcastEncodings(r,i){if(!Dn()&&r.length===i.length)for(let s=0;s<r.length;s++){const l=i[s];if(l instanceof rr&&this.isVP8Simulcast(l)){const d=r[s],p={},v={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};p.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:v.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:v.medium,scaleResolutionDownBy:4}];const E=d.sender.getParameters();await d.sender.setParameters(Object.assign(E,p))}}}isVP8Simulcast(r){var i,s,l,d;return!!(r instanceof rr&&ie("SIMULCAST")&&this.store.codec==="vp8"&&!r._hints.includes(pr.LOW_STREAM)&&(i=r._encoderConfig)!==null&&i!==void 0&&i.bitrateMax&&((s=r._encoderConfig)===null||s===void 0?void 0:s.bitrateMax)>200&&(l=r._scalabiltyMode)!==null&&l!==void 0&&l.numSpatialLayers&&((d=r._scalabiltyMode)===null||d===void 0?void 0:d.numSpatialLayers)>1)}logSDPExchange(r,i,s,l){if(ie("SDP_LOGGING"))return U.upload("[".concat(this.store.clientId,"] exchanging ").concat(s," ").concat(i," SDP during P2PConnection.").concat(l,`
`),r),i==="offer"?d=>{this.logSDPExchange(d,"answer",s==="local"?"remote":"local",l)}:void 0}async getRemoteSSRC(r){if(!this.remoteSDP)return;const i=this.remoteSDP.getSSRC(r);return i==null?void 0:i[0].ssrcId}setConfiguration(r){if(zn().supportPCSetConfiguration){const i=pf.resolvePCConfiguration(r);this.peerConnection.setConfiguration(i)}}}).prototype,"connect",[aa],Object.getOwnPropertyDescriptor(nn.prototype,"connect"),nn.prototype),_e(nn.prototype,"receive",[aa],Object.getOwnPropertyDescriptor(nn.prototype,"receive"),nn.prototype),_e(nn.prototype,"batchReceive",[aa],Object.getOwnPropertyDescriptor(nn.prototype,"batchReceive"),nn.prototype),_e(nn.prototype,"stopReceiving",[aa],Object.getOwnPropertyDescriptor(nn.prototype,"stopReceiving"),nn.prototype),_e(nn.prototype,"muteRemote",[aa],Object.getOwnPropertyDescriptor(nn.prototype,"muteRemote"),nn.prototype),_e(nn.prototype,"unmuteRemote",[aa],Object.getOwnPropertyDescriptor(nn.prototype,"unmuteRemote"),nn.prototype),_e(nn.prototype,"muteLocal",[aa],Object.getOwnPropertyDescriptor(nn.prototype,"muteLocal"),nn.prototype),_e(nn.prototype,"unmuteLocal",[aa],Object.getOwnPropertyDescriptor(nn.prototype,"unmuteLocal"),nn.prototype),_e(nn.prototype,"close",[aa],Object.getOwnPropertyDescriptor(nn.prototype,"close"),nn.prototype),_e(nn.prototype,"updateEncoderConfig",[aa],Object.getOwnPropertyDescriptor(nn.prototype,"updateEncoderConfig"),nn.prototype),_e(nn.prototype,"updateSendParameters",[aa],Object.getOwnPropertyDescriptor(nn.prototype,"updateSendParameters"),nn.prototype),_e(nn.prototype,"replaceTrack",[aa],Object.getOwnPropertyDescriptor(nn.prototype,"replaceTrack"),nn.prototype),_e(nn.prototype,"getRemoteSSRC",[aa],Object.getOwnPropertyDescriptor(nn.prototype,"getRemoteSSRC"),nn.prototype),nn);function aa(n,r,i){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,d=await l.lock("From P2PConnection.".concat(r));try{for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];return await s.apply(this,v)}finally{d()}},i}function HL(n,r){let i=document.createElement("video"),s=document.createElement("canvas");i.setAttribute("style","display:none"),s.setAttribute("style","display:none"),i.setAttribute("muted",""),i.muted=!0,i.setAttribute("autoplay",""),i.autoplay=!0,i.setAttribute("playsinline",""),s.width=uc(r.width),s.height=uc(r.height);const l=uc(r.framerate||15);document.body.append(i),document.body.append(s);let d=n._mediaStreamTrack;i.srcObject=new MediaStream([d]),i.play();const p=s.getContext("2d");if(!p)throw new Q(W.UNEXPECTED_ERROR,"can not get canvas context");const v=zn(),E=s.captureStream(v.supportRequestFrame?0:l).getVideoTracks()[0],T=hP(()=>(()=>{if(i.paused&&i.play(),i.videoHeight>2&&i.videoWidth>2){const R=i.videoWidth,L=i.videoHeight/R,j=s.width*L;Math.abs(j-s.height)>=2&&(U.debug("adjust low stream resolution","".concat(s.width,"x").concat(s.height," -> ").concat(s.width,"x").concat(j)),s.height=j)}p.drawImage(i,0,0,s.width,s.height),E.requestFrame&&E.requestFrame(),d!==n._mediaStreamTrack&&(d=n._mediaStreamTrack,i.srcObject=new MediaStream([d]))})(),l),C=E.stop;return E.stop=()=>{C.call(E),T(),i&&(i.remove(),i=null),s&&(s.width=0,s.remove(),s=null),U.debug("clean low stream renderer")},E}var WL,GL,zL,KL,sa,YL,qL,XL,JL,QL,ZL,pi;function e2(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function ag(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?e2(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):e2(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class t2 extends cP{getUserId(){return this._userId}constructor(r,i,s,l){super(r,"track-".concat(r.kind,"-").concat(i,"-").concat(l.clientId,"_").concat(fn(5,""))),N(this,"_userId",void 0),N(this,"_uintId",void 0),N(this,"_isDestroyed",!1),N(this,"store",void 0),N(this,"processor",void 0),N(this,"processorContext",void 0),this._userId=i,this._uintId=s,this.store=l}_updateOriginMediaStreamTrack(r){this._originMediaStreamTrack=r,this._mediaStreamTrack=r,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,U.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let sg=(WL=ze({argsMap:(n,r,i)=>[n.getTrackId(),typeof r=="string"?r:r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",i]}),GL=ze({argsMap:n=>[n.getTrackId()]}),zL=ze({argsMap:(n,r)=>[n.getTrackId(),r.name]}),KL=ze({argsMap:n=>[n.getTrackId()]}),_e((sa=class extends t2{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Xr.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(n,r,i,s){super(n,r,i,s),N(this,"_videoVisibleTimer",null),N(this,"_previousVideoVisibleStatus",void 0),N(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),N(this,"trackMediaType","video"),N(this,"_videoWidth",void 0),N(this,"_videoHeight",void 0),N(this,"_player",void 0),N(this,"processorDestination",void 0),N(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new bP(this.getTrackId(),"remote"),this.processorDestination=new CP(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return Pp(()=>{U.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),Aa(this,et.GET_STATS)||ag({},jx)}play(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof n=="string"){const s=document.getElementById(n);s?n=s:(U.warning("[".concat(this.getTrackId(),'] can not find "#').concat(n,'" element, use document.body')),n=document.body)}U.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(r));const i=ag(ag({fit:"cover"},r),{},{trackId:this.getTrackId(),element:n});this._player?this._player.updateConfig(i):(n instanceof HTMLVideoElement?this._player=new rC(i):this._player=new rk(i),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(Td.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const s=this.getVideoElementVisibleStatus();this.safeEmit(Td.VIDEO_ELEMENT_VISIBLE_STATUS,s)}catch{}},ie("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,U.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){_D(this._originMediaStreamTrack).then(n=>{let[r,i]=n;this._videoHeight=i,this._videoWidth=r}).catch(G0)}_updatePlayerSource(){U.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var n,r;const i=this==null||(n=this._player)===null||n===void 0?void 0:n.getContainerElement(),s={track:this,element:this==null||(r=this._player)===null||r===void 0?void 0:r.getVideoElement(),slot:i==null?void 0:i.parentElement},{element:l,slot:d}=s;if(this.isPlaying&&l instanceof HTMLVideoElement&&d instanceof HTMLElement){const p=Uk.checkOneElementVisible(l),v=Object.assign({},p);if(v.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=v.visible;const E=Ue.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});v.visible?E.onSuccess("Video is visible"):E.onSuccess("Invisible because of ".concat(v.reason))}return v}return}catch(i){throw new Q(W.GET_VIDEO_ELEMENT_VISIBLE_ERROR,i.message)}}pipe(n){if(this.processor===n)return n;if(n._source)throw new Q(W.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),n}unpipe(){if(!this.processor)return;const n=this.processor;this.processor._source=void 0,this.processor=void 0,n.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Zr.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Zr.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}}).prototype,"play",[WL],Object.getOwnPropertyDescriptor(sa.prototype,"play"),sa.prototype),_e(sa.prototype,"stop",[GL],Object.getOwnPropertyDescriptor(sa.prototype,"stop"),sa.prototype),_e(sa.prototype,"pipe",[zL],Object.getOwnPropertyDescriptor(sa.prototype,"pipe"),sa.prototype),_e(sa.prototype,"unpipe",[KL],Object.getOwnPropertyDescriptor(sa.prototype,"unpipe"),sa.prototype),sa),cg=(YL=ze({argsMap:(n,r)=>[n.getTrackId(),r],throttleTime:300}),qL=ze({argsMap:(n,r)=>[n.getTrackId(),r]}),XL=ze({argsMap:n=>[n.getTrackId()]}),JL=ze({argsMap:n=>[n.getTrackId()]}),QL=ze({argsMap:(n,r)=>[n.getTrackId(),r.name]}),ZL=ze({argsMap:n=>[n.getTrackId()]}),_e((pi=class extends t2{get isPlaying(){return this._useAudioElement?vo.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(n,r,i,s){super(n,r,i,s),N(this,"trackMediaType","audio"),N(this,"_source",void 0),N(this,"_useAudioElement",!0),N(this,"_volume",100),N(this,"processorContext",void 0),N(this,"processorDestination",void 0),N(this,"_played",!1),N(this,"_bypassWebAudio",!1),ie("DISABLE_WEBAUDIO")?(this._source=new Hy,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new jy(n,!0),ie("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(Zi.RECEIVE_TRACK_BUFFER,()=>{this.safeEmit(Td.FIRST_FRAME_DECODED)}),this.processorContext=new RP(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new TP(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(Zi.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!n)return this._source.removeAllListeners(Zi.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(r),this._source.removeAllListeners(Zi.ON_AUDIO_BUFFER),this._source.on(Zi.ON_AUDIO_BUFFER,i=>n(i))}setVolume(n){this._volume=n,this._useAudioElement?vo.setVolume(this.getTrackId(),n):this._source.setVolume(n/100)}async setPlaybackDevice(n){if(!this._useAudioElement)throw new Q(W.NOT_SUPPORTED,"your browser does not support setting the audio output device");await vo.setSinkID(this.getTrackId(),n)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Pp(()=>{U.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),Aa(this,et.GET_STATS)||ag({},Vx)}play(){U.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(U.debug("[".concat(this.getTrackId(),"] use audio element to play")),vo.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){U.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?vo.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];U.debug("[".concat(this.getTrackId(),"] update player source track")),n&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&vo.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(n){if(this._bypassWebAudio)throw new Q(W.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===n)return n;if(n._source)throw new Q(W.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),n}unpipe(){var n;if(this._bypassWebAudio)throw new Q(W.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const r=this.processor;(n=this._source.processSourceNode)===null||n===void 0||n.disconnect(),this.processor._source=!1,this.processor=void 0,r.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Zr.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(n)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(Zr.ON_NODE,n=>{this._source.processedNode=n;const r=!n;this._useAudioElement!==r&&(this._played?(this.stop(),this._useAudioElement=r,this.play()):this._useAudioElement=r)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Zr.ON_TRACK),this.processorDestination.removeAllListeners(Zr.ON_NODE)}}).prototype,"setVolume",[YL],Object.getOwnPropertyDescriptor(pi.prototype,"setVolume"),pi.prototype),_e(pi.prototype,"setPlaybackDevice",[qL],Object.getOwnPropertyDescriptor(pi.prototype,"setPlaybackDevice"),pi.prototype),_e(pi.prototype,"play",[XL],Object.getOwnPropertyDescriptor(pi.prototype,"play"),pi.prototype),_e(pi.prototype,"stop",[JL],Object.getOwnPropertyDescriptor(pi.prototype,"stop"),pi.prototype),_e(pi.prototype,"pipe",[QL],Object.getOwnPropertyDescriptor(pi.prototype,"pipe"),pi.prototype),_e(pi.prototype,"unpipe",[ZL],Object.getOwnPropertyDescriptor(pi.prototype,"unpipe"),pi.prototype),pi);function n2(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function r2(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?n2(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):n2(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class hX extends In{constructor(){super(),N(this,"uplinkStatsUploadInterval",void 0),N(this,"uplinkRelatedStatsUploadInterval",void 0),N(this,"uplinkDenoiserStatsUploadInterval",void 0),N(this,"transportStatsUploadInterval",void 0),N(this,"uplinkExtensionStatsUploadInterval",void 0),N(this,"downlinkExtensionStatsUploadInterval",void 0),N(this,"extensionUsageStatsUploadInterval",void 0),N(this,"downlinkStatsUploadInterval",void 0),N(this,"downlinkRelatedStatsUploadInterval",void 0),N(this,"lastStats",void 0),N(this,"uploadUnplinkStarted",!1),N(this,"uploadDownlinkStarted",!1),N(this,"uploadTransportStarted",!1),N(this,"uploadExtensionUsageStarted",!1),N(this,"requestStats",void 0),N(this,"requestLocalMedia",void 0),N(this,"requestRemoteMedia",void 0),N(this,"requestAllTracks",void 0),N(this,"requestVideoIsReady",void 0),N(this,"requestUpload",void 0)}startUploadTransportStats(){this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval(()=>{var r;const i=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);i&&this.uploadTransportStats(i)},1e3))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval);const r=new Map;this.extensionUsageStatsUploadInterval=window.setInterval(async()=>{var i,s,l;const d=Date.now(),p={connectionInterval:ie("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:d};let v=[];const E=((i=this.requestAllTracks)===null||i===void 0?void 0:i.call(this))||[];for(const L of E)!L.muted&&L.enabled&&(v=v.concat(await L.getProcessorUsage()));const T=((s=this.requestRemoteMedia)===null||s===void 0?void 0:s.call(this))||[];for(const[L,j]of T)j.has(ut.VIDEO)&&L.videoTrack&&(v=v.concat(await L.videoTrack.getProcessorUsage())),j.has(ut.AUDIO)&&L.audioTrack&&(v=v.concat(await L.audioTrack.getProcessorUsage()));if(v.length===0)return;p.details=function(L,j){const Y={};for(const{id:he,value:ye,level:ke,direction:be}of L){var q;const Te=(q=j.get(he))!==null&&q!==void 0?q:0,Se=ye===2?Te+ie("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:Te;var X,le;j.set(he,Se),Y[he]?(ye===2&&(Y[he].value=ye),ke>Y[he].level&&(Y[he].level=ke),be==="remote"&&(Y[he].remoteUidCount+=1),Y[he].totalTs=(X=j.get(he))!==null&&X!==void 0?X:0):Y[he]={value:ye,level:ke,remoteUidCount:be==="local"?0:1,totalTs:(le=j.get(he))!==null&&le!==void 0?le:0}}return Object.keys(Y).map(he=>{const{level:ye,value:ke,totalTs:be}=Y[he];return{id:he,level:ye,value:ke,totalTs:be}})}(v,r);const C=Date.now(),R=C>d?C:d+1;(l=this.requestUpload)===null||l===void 0||l.call(this,mo.EXTENSION_USAGE_STATS,{usageStats:p,sendTs:R})},ie("EXTENSION_USAGE_UPLOAD_INTERVAL"))}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var r;const i=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);i&&(this.uploadUplinkStats(i),this.lastStats=i)},3e3),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var r;const i=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);i&&this.uploadRelatedUplinkStats(i,this.lastStats),this.lastStats=i},1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval(()=>{var r;const i=(r=this.requestAllTracks)===null||r===void 0?void 0:r.call(this);i&&this.uploadDenoiserStats(i)},2e3),this.uplinkExtensionStatsUploadInterval&&window.clearInterval(this.uplinkExtensionStatsUploadInterval),this.uplinkExtensionStatsUploadInterval=window.setInterval(()=>{var r;const i=(r=this.requestAllTracks)===null||r===void 0?void 0:r.call(this);i&&this.uploadExtensionStats(i)},2e3))}uploadTransportStats(r){is(()=>{var i;(i=this.requestUpload)===null||i===void 0||i.call(this,mo.TRANSPORT_STATS,function(s){const l={connectionType:100,googRtt:s.rtt};if(s.selectedCandidatePair.localCandidate.candidateType==="relay"){const d=s.selectedCandidatePair.localCandidate.relayProtocol;d==="udp"&&(l.connectionType=101),d==="tcp"&&(l.connectionType=103),d==="tls"&&(l.connectionType=104)}return l}(r))})}uploadUplinkStats(r){var i;(((i=this.requestLocalMedia)===null||i===void 0?void 0:i.call(this))||[]).forEach(s=>{let[l,{track:d,ssrcs:p}]=s;switch(l){case Me.LocalVideoLowTrack:case Me.LocalVideoTrack:{const v=function(C,R,L){var j;const Y=R.videoSend.find(X=>X.ssrc===C);if(!Y)return null;const q={id:fn(10,""),timestamp:new Date(R.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:Y.ssrc.toString()};switch(q.A_vstd=L._originMediaStreamTrack&&!L._originMediaStreamTrack.enabled||L._mediaStreamTrack&&!L._mediaStreamTrack.enabled?"1":"0",Y.sentFrame&&(q.A_fhs=Y.sentFrame.height.toString(),q.A_frs=Y.sentFrame.frameRate.toString(),q.A_fws=Y.sentFrame.width.toString()),Y.adaptionChangeReason){case"none":q.A_ac="0";break;case"cpu":q.A_ac="1";break;case"bandwidth":q.A_ac="2";break;case"other":q.A_ac="3"}return q.A_lvps=yy[L._player?L._player.videoElementStatus:"uninit"].toString(),q.A_nr=(j=Y.nacksCount)===null||j===void 0?void 0:j.toString(),Y.avgEncodeMs&&(q.A_aem=Y.avgEncodeMs.toFixed(0).toString()),q}(p[0].ssrcId,r,d),E=l===Me.LocalVideoTrack?function(C,R,L){var j,Y,q,X,le,he,ye,ke;const be=R.videoSend.find(We=>We.ssrc===C);if(!be)return null;const Te={id:fn(10,""),timestamp:new Date(R.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:be.ssrc.toString()},Se=(j=(Y=(q=be.inputFrame)===null||q===void 0?void 0:q.height)!==null&&Y!==void 0?Y:L==null?void 0:L._videoHeight)!==null&&j!==void 0?j:0,Oe=(X=(le=(he=be.inputFrame)===null||he===void 0?void 0:he.width)!==null&&le!==void 0?le:L==null?void 0:L._videoWidth)!==null&&X!==void 0?X:0,Bt=(ye=(ke=be.inputFrame)===null||ke===void 0?void 0:ke.frameRate)!==null&&ye!==void 0?ye:0;return Se&&(Te.A_fhi=Se+""),Oe&&(Te.A_fwi=Oe+""),Bt&&(Te.A_fri=Bt+""),Te}(p[0].ssrcId,r,d):null;v&&is(()=>{var C;return(C=this.requestUpload)===null||C===void 0?void 0:C.call(this,mo.PUBLISH_STATS,{stream_type:l===Me.LocalVideoLowTrack?"low":"high",stats:r2(r2({},v),E)})});const T=function(C){const R={id:"bweforvideo",timestamp:new Date(C.timestamp).toISOString(),type:"VideoBwe"};return C.bitrate.retransmit&&(R.A_rb=C.bitrate.retransmit.toString()),C.bitrate.targetEncoded&&(R.A_teb=C.bitrate.targetEncoded.toString()),R.A_aeb=C.bitrate.actualEncoded.toString(),R.A_tb=C.bitrate.transmit.toString(),C.sendBandwidth!==void 0&&(R.A_asb=C.sendBandwidth.toString()),R}(r);T&&setTimeout(()=>{var C;return(C=this.requestUpload)===null||C===void 0?void 0:C.call(this,mo.PUBLISH_STATS,{stream_type:l===Me.LocalVideoLowTrack?"low":"high",stats:T})},1e3);break}case Me.LocalAudioTrack:{const v=function(E,T,C){const R=T.audioSend.find(j=>j.ssrc===E);if(!R)return null;const L={id:fn(10,""),timestamp:new Date(T.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:R.ssrc.toString()};return L.A_astd=C._originMediaStreamTrack&&!C._originMediaStreamTrack.enabled||C._mediaStreamTrack&&!C._mediaStreamTrack.enabled?"1":"0",R.inputLevel?L.A_ail=Math.round(100*R.inputLevel).toString():L.A_ail=Math.round(100*C._source.getAccurateVolumeLevel()).toString(),L.A_apil=Math.round(100*C._source.getAccurateVolumeLevel()).toString(),R.aecReturnLoss&&(L.A_ecrl=Math.round(R.aecReturnLoss).toString()),R.aecReturnLossEnhancement&&(L.A_ecrle=Math.round(R.aecReturnLossEnhancement).toString()),L}(p[0].ssrcId,r,d);v&&is(()=>{var E;return(E=this.requestUpload)===null||E===void 0?void 0:E.call(this,mo.PUBLISH_STATS,{stream_type:"high",stats:v})});break}}})}uploadRelatedUplinkStats(r,i){var s;(((s=this.requestLocalMedia)===null||s===void 0?void 0:s.call(this))||[]).filter(l=>{let[d]=l;return d===Me.LocalVideoLowTrack||d===Me.LocalVideoTrack}).forEach(l=>{let[d,{ssrcs:p}]=l;const v=function(E,T){const C=T.videoSend.find(R=>R.ssrc===E);return C?{mediaType:"video",isVideoMute:!1,frameRateInput:C.inputFrame&&C.inputFrame.frameRate.toString(),frameRateSent:C.sentFrame&&C.sentFrame.frameRate.toString(),googRtt:C.rttMs.toString(),qpSumPerFrame:Math.floor(C.qpSumPerFrame).toString()}:null}(p[0].ssrcId,r);v&&is(()=>{var E;(E=this.requestUpload)===null||E===void 0||E.call(this,mo.PUBLISH_RELATED_STATS,{stream_type:d===Me.LocalVideoLowTrack?"low":"high",stats:v})})})}uploadDenoiserStats(r){for(let d=0;d<r.length;d++){const p=r[d];if(p instanceof B0){var i,s,l;const v=(i=(s=p._external).getDenoiserStats)===null||i===void 0?void 0:i.call(s);return void(v&&((l=this.requestUpload)===null||l===void 0||l.call(this,mo.DENOISER_STATS,v)))}}}uploadExtensionStats(r){for(let i=0;i<r.length;i++)r[i].getProcessorStats().forEach(s=>{var l;(l=this.requestUpload)===null||l===void 0||l.call(this,s.type,s.stats)})}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}startUploadDownlinkStats(){if(this.uploadDownlinkStarted)return;let r;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);let i=!1;this.downlinkStatsUploadInterval=window.setInterval(()=>{var s;const l=(s=this.requestStats)===null||s===void 0?void 0:s.call(this);l&&(this.uploadDownlinkStats(l,i,r),r=l),i=!i},3e3),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var s;const l=(s=this.requestStats)===null||s===void 0?void 0:s.call(this);l&&(this.uploadRelatedDownlinkStats(l,this.lastStats),this.lastStats=l)},1e3),this.downlinkExtensionStatsUploadInterval&&window.clearInterval(this.downlinkExtensionStatsUploadInterval),this.downlinkExtensionStatsUploadInterval=window.setInterval(()=>{var s;const l=(s=this.requestRemoteMedia)===null||s===void 0?void 0:s.call(this);l&&this.uploadDownlinkExtensionStats(l)},2e3)}uploadDownlinkStats(r,i,s){var l;(((l=this.requestRemoteMedia)===null||l===void 0?void 0:l.call(this))||[]).forEach(d=>{let[p,v]=d;if(v.has(ut.VIDEO)&&p.videoTrack){const E=p.videoTrack?function(T,C,R,L,j){const Y=C.videoRecv.find(he=>he.ssrc===T);if(!Y)return null;const q={id:fn(10,""),timestamp:new Date(C.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:Y.ssrc.toString()};var X,le;if(q.bytesReceived=Y.bytes.toString(),q.packetsLost=Y.packetsLost.toString(),q.packetsReceived=Y.packets.toString(),Y.framesRateFirefox&&(q.A_frr=Y.framesRateFirefox.toString()),Y.receivedFrame?(q.A_frr=Y.receivedFrame.frameRate.toString(),q.A_fhr=Y.receivedFrame.height.toString(),q.A_fwr=Y.receivedFrame.width.toString()):(q.A_fhr=(X=L._videoHeight)===null||X===void 0?void 0:X.toString(),q.A_fwr=(le=L._videoWidth)===null||le===void 0?void 0:le.toString()),q.A_frd=Y.decodeFrameRate.toString(),Y.outputFrame&&(q.A_fro=Y.outputFrame.frameRate.toString()),Y.jitterBufferMs!==void 0&&(q.A_jbm=Math.floor(Y.jitterBufferMs).toString()),Y.currentDelayMs!==void 0&&(q.A_cdm=Math.floor(Y.currentDelayMs).toString()),q.A_fs=Y.firsCount.toString(),q.A_ns=Y.nacksCount.toString(),q.A_ps=Y.plisCount.toString(),L&&(q.A_vrtd=L._originMediaStreamTrack.enabled&&L._mediaStreamTrack.enabled?"0":"1"),L._player&&L._player.freezeTimeCounterList.length>0&&(q.A_vrft=Math.round(L._player.freezeTimeCounterList.splice(0,1)[0]).toString()),j&&L._player&&lc.visibility==="visible"){const he=Math.min(6e3,L._player.renderFreezeAccTime);q.A_vrrft=Math.round(he).toString(),L._player.renderFreezeAccTime=Math.max(0,L._player.renderFreezeAccTime-he)}if(q.A_rvps=yy[L._player?L._player.videoElementStatus:"uninit"].toString(),R){const he=R.videoRecv.find(ye=>ye.ssrc===T);if(he&&Y.totalInterFrameDelay!==void 0&&Y.totalSquaredInterFrameDelay!==void 0&&he.totalInterFrameDelay!==void 0&&he.totalSquaredInterFrameDelay!==void 0){const ye=Y.totalInterFrameDelay-he.totalInterFrameDelay,ke=Y.totalSquaredInterFrameDelay-he.totalSquaredInterFrameDelay,be=Y.framesDecodeCount-he.framesDecodeCount,Te=ye/be*1e3,Se=Math.round(1e3*Math.sqrt((ke-Math.pow(ye,2)/be)/be));!isNaN(Se)&&Te+Se>Math.max(3*Te,Te+150)&&(q.A_ifdsd=Se.toString())}}return q}(p._videoSSRC,r,s,p.videoTrack,i):void 0;E&&is(()=>{var T;return(T=this.requestUpload)===null||T===void 0?void 0:T.call(this,mo.SUBSCRIBE_STATS,{stream_id:p.uid,stats:E})})}if(v.has(ut.AUDIO)&&p.audioTrack){const E=p.audioTrack?function(T,C,R,L){const j=C.audioRecv.find(q=>q.ssrc===T);if(!j)return null;const Y={id:fn(10,""),timestamp:new Date(C.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:j.ssrc.toString()};if(Y.bytesReceived=j.bytes.toString(),Y.packetsLost=j.packetsLost.toString(),Y.packetsReceived=j.packets.toString(),j.outputLevel?Y.A_aol=Math.round(100*j.outputLevel).toString():Y.A_aol=Math.round(100*L._source.getAccurateVolumeLevel()).toString(),Y.A_apol=Math.round(100*L._source.getAccurateVolumeLevel()).toString(),L&&(Y.A_artd=L._originMediaStreamTrack.enabled&&L._mediaStreamTrack.enabled?"0":"1"),Y.A_jr=j.jitterMs.toString(),Y.A_jbm=Math.floor(j.jitterBufferMs).toString(),Y.A_cdm=Math.floor(j.jitterBufferMs).toString(),Y.A_raps=yy[vo.getPlayerState(L.getTrackId())].toString(),R){const q=R.audioRecv.find(X=>X.ssrc===T);if(q){const X=j.concealedSamples-q.concealedSamples;X>0&&(Y.A_cs=Math.round(X).toString())}}return Y}(p._audioSSRC,r,s,p.audioTrack):void 0;E&&is(()=>{var T;return(T=this.requestUpload)===null||T===void 0?void 0:T.call(this,mo.SUBSCRIBE_STATS,{stream_id:p.uid,stats:E})})}})}uploadRelatedDownlinkStats(r,i){var s;(((s=this.requestRemoteMedia)===null||s===void 0?void 0:s.call(this))||[]).forEach(l=>{let[d,p]=l;if(p.has(ut.VIDEO)&&d.videoTrack){var v;const E=(d._videoSSRC&&((v=this.requestVideoIsReady)===null||v===void 0?void 0:v.call(this,d._videoSSRC))||!1)===!0,T=function(C,R,L,j,Y,q){const X=L.videoRecv.find(ke=>ke.ssrc===C),le=Y?Y.videoRecv.find(ke=>ke.ssrc===C):void 0;if(!X)return null;const he=Ad.isRemoteVideoFreeze(q,X,le)&&R,ye={mediaType:"video",isVideoMute:!1,peerId:j,frameRateReceived:X.receivedFrame&&X.receivedFrame.frameRate.toString(),frameRateDecoded:X.decodedFrame&&X.decodedFrame.frameRate.toString(),isFreeze:he,bytesReceived:X.bytes.toString(),packetsReceived:X.packets.toString(),packetsLost:X.packetsLost.toString(),qpSumPerFrame:Math.floor(X.qpSumPerFrame).toString()};return X.framesRateFirefox&&(ye.frameRateDecoded=X.framesRateFirefox.toString(),ye.frameRateReceived=X.framesRateFirefox.toString()),ye}(d._videoSSRC,E,r,d.uid,i,d.videoTrack);T&&is(()=>{var C;(C=this.requestUpload)===null||C===void 0||C.call(this,mo.SUBSCRIBE_RELATED_STATS,{stream_id:d.uid,stats:T})})}if(p.has(ut.AUDIO)&&d.audioTrack){const E=function(T,C,R,L){const j=C.audioRecv.find(q=>q.ssrc===T);if(!j)return null;const Y=Ad.isRemoteAudioFreeze(L);return{mediaType:"audio",isAudioMute:!1,peerId:R,googJitterReceived:j.jitterMs.toString(),isFreeze:Y,bytesReceived:j.bytes.toString(),packetsReceived:j.packets.toString(),packetsLost:j.packetsLost.toString(),frameReceived:j.receivedFrames.toString(),frameDropped:j.droppedFrames.toString()}}(d._audioSSRC,r,d.uid,d.audioTrack);E&&is(()=>{var T;(T=this.requestUpload)===null||T===void 0||T.call(this,mo.SUBSCRIBE_RELATED_STATS,{stream_id:d.uid,stats:E})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}stopUploadTransportStats(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval),this.extensionUsageStatsUploadInterval=void 0)}uploadDownlinkExtensionStats(r){r.forEach(i=>{let[s,l]=i;l.has(ut.VIDEO)&&s.videoTrack&&s.videoTrack.getProcessorStats().forEach(d=>{var p;(p=this.requestUpload)===null||p===void 0||p.call(this,d.type,d.stats)}),l.has(ut.AUDIO)&&s.audioTrack&&s.audioTrack.getProcessorStats().forEach(d=>{var p;(p=this.requestUpload)===null||p===void 0||p.call(this,d.type,d.stats)})})}}function i2(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function o2(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?i2(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):i2(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}const a2=`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0
a=msid-semantic: WMS
a=ice-lite
m=application 9 UDP/DTLS/SCTP webrtc-datachannel
c=IN IP4 127.0.0.1
a=mid:0
`,lg="9",AC=2e4,NC=4e4;class pX{get localCapabilities(){return nr(this._localCapabilities)}get rtpCapabilities(){return nr(this._rtpCapabilities)}get candidates(){return nr(this._candidates)}get iceParameters(){return nr(this._iceParameters)}get dtlsParameters(){return nr(this._dtlsParameters)}constructor(r){N(this,"sessionDesc",void 0),N(this,"_localCapabilities",void 0),N(this,"_rtpCapabilities",void 0),N(this,"_candidates",void 0),N(this,"_iceParameters",void 0),N(this,"_dtlsParameters",void 0),N(this,"setup",void 0),N(this,"currentMidIndex",void 0),N(this,"cname",void 0),N(this,"firefoxSsrcMidMap",new Map),r=nr(r);const{remoteIceParameters:i,remoteDtlsParameters:s,candidates:l,remoteRTPCapabilities:d,remoteSetup:p,localCapabilities:v,cname:E}=r,T=ir.exports.parse(a2);this._rtpCapabilities=d,this._candidates=l,this._iceParameters=i,this._dtlsParameters=s,this._localCapabilities=v,this.setup=p,this.cname=E;const C=this.rtpCapabilities.send;for(const R of T.mediaDescriptions){if(R.attributes.iceUfrag=i.iceUfrag,R.attributes.icePwd=i.icePwd,R.attributes.fingerprints=s.fingerprints,R.attributes.candidates=l,R.attributes.setup=p,R.media.mediaType==="application"&&(R.attributes.sctpPort="5000"),R.media.mediaType==="video"&&(R.media.fmts=C.videoCodecs.map(L=>L.payloadType.toString(10)),R.attributes.payloads=C.videoCodecs,R.attributes.extmaps=C.videoExtensions,ie("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:L,ssrcGroups:j}=ia([{ssrcId:NC,rtx:ie("USE_SUB_RTX")?40001:void 0}],this.cname);R.attributes.ssrcs=L,R.attributes.ssrcGroups=j}if(R.media.mediaType==="audio"&&(R.media.fmts=C.audioCodecs.map(L=>L.payloadType.toString(10)),R.attributes.payloads=C.audioCodecs,R.attributes.extmaps=C.audioExtensions,il(R),ie("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:L,ssrcGroups:j}=ia([{ssrcId:AC}],this.cname);R.attributes.ssrcs=L,R.attributes.ssrcGroups=j}}this.sessionDesc=T,this.currentMidIndex=T.mediaDescriptions.length-1}updateRemoteRTPCapabilities(r){const i=ir.exports.parse(a2);this._rtpCapabilities=r;const s=this.rtpCapabilities.send;for(const l of i.mediaDescriptions){if(l.attributes.iceUfrag=this._iceParameters.iceUfrag,l.attributes.icePwd=this._iceParameters.icePwd,l.attributes.fingerprints=this._dtlsParameters.fingerprints,l.attributes.candidates=this._candidates,l.attributes.setup=this.setup,l.media.mediaType==="application"&&(l.attributes.sctpPort="5000"),l.media.mediaType==="video"&&(l.media.fmts=s.videoCodecs.map(d=>d.payloadType.toString(10)),l.attributes.payloads=s.videoCodecs,l.attributes.extmaps=s.videoExtensions,ie("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:d,ssrcGroups:p}=ia([{ssrcId:NC,rtx:ie("USE_SUB_RTX")?40001:void 0}],this.cname);l.attributes.ssrcs=d,l.attributes.ssrcGroups=p}if(l.media.mediaType==="audio"&&(l.media.fmts=s.audioCodecs.map(d=>d.payloadType.toString(10)),l.attributes.payloads=s.audioCodecs,l.attributes.extmaps=s.audioExtensions,ie("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:d,ssrcGroups:p}=ia([{ssrcId:AC}],this.cname);l.attributes.ssrcs=d,l.attributes.ssrcGroups=p}}this.sessionDesc=i,this.currentMidIndex=i.mediaDescriptions.length-1}preloadRemoteMedia(r){this.rtpCapabilities;const i=this.candidates,s=this.dtlsParameters,l=this.iceParameters,d=this.rtpCapabilities.send;for(let p=1;p<r;p++){const v=2*p+AC,E=2*p+NC,{ssrcs:T,ssrcGroups:C}=ia([{ssrcId:v}],this.cname),{ssrcs:R,ssrcGroups:L}=ia([{ssrcId:E,rtx:ie("USE_SUB_RTX")?E+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:lg,protos:["UDP","TLS","RTP","SAVPF"],fmts:d.videoCodecs.map(j=>j.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:i,extmaps:d.videoExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:R,ssrcGroups:L,rtcpFeedbackWildcards:[],payloads:d.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:lg,protos:["UDP","TLS","RTP","SAVPF"],fmts:d.audioCodecs.map(j=>j.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:i,extmaps:d.audioExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:T,ssrcGroups:C,rtcpFeedbackWildcards:[],payloads:d.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return ir.exports.print(this.sessionDesc)}send(r,i,s,l){const{ssrcs:d,ssrcGroups:p}=ia(i,this.cname,ie("SYNC_GROUP")?s:void 0),v=this.findPreloadMediaDesc(d);if(v){if(Dn()&&this.firefoxSsrcMidMap.set(d[0].ssrcId,v.attributes.mid),l&&(l.twcc||l.remb)){const E=this.sessionDesc.mediaDescriptions.indexOf(v);return this.sessionDesc.mediaDescriptions[E]=this.mungSendMediaDesc(v,l),{mid:v.attributes.mid,needExchangeSDP:!0}}return{mid:v.attributes.mid,needExchangeSDP:!1}}{const E=this.findAvailableMediaIndex(r,d);let T;return E===-1||yi()||Ci()||LN()||E===0&&ie("USE_SUB_RTX")?(T=this.createOrRecycleSendMedia(r,d,p,"sendonly",l),this.updateBundleMids()):(T=nr(this.sessionDesc.mediaDescriptions[E]),T.attributes.direction="sendonly",T.attributes.ssrcs=d,T.attributes.ssrcGroups=p,this.sessionDesc.mediaDescriptions[E]=this.mungSendMediaDesc(T,l)),Dn()&&this.firefoxSsrcMidMap.set(d[0].ssrcId,T.attributes.mid),{mid:T.attributes.mid,needExchangeSDP:!0}}}batchSend(r){const i=r.map(d=>{let{kind:p,ssrcMsg:v,mslabel:E}=d;return this.send(p,v,E)}),s=[];let l=!1;return i.forEach(d=>{let{mid:p,needExchangeSDP:v}=d;v&&(l=!0),s.push(p)}),{mids:s,needExchangeSDP:l}}stopSending(r){const i=this.sessionDesc.mediaDescriptions.filter(s=>s.attributes.mid&&r.indexOf(s.attributes.mid)!==-1);if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");i.forEach(s=>{s.attributes.mid==="0"||Dn()||yi()||Ci()?s.attributes.ssrcs=[]:(s.attributes.ssrcs=[],s.attributes.direction="inactive",s.media.port="0")}),this.updateBundleMids()}mute(r){const i=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(r){const i=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}muteRemote(r){const i=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(s=>{s.attributes.direction="inactive"})}unmuteRemote(r){const i=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(s=>{s.attributes.direction="recvonly"})}receive(r,i,s,l){r.forEach((d,p)=>{this.createOrRecycleRecvMedia(d,[],"recvonly",i,s,l[p])}),this.updateBundleMids()}stopReceiving(r){const i=this.sessionDesc.mediaDescriptions.filter(s=>r.indexOf(s.attributes.mid)!==-1);if(i.length!==r.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");i.forEach(s=>{s.media.port="0",s.attributes.direction="inactive"}),this.updateBundleMids()}updateCandidates(r){r===Vr.TCP?this._candidates.forEach(i=>{this._candidates.findIndex(s=>s.transport==="tcp"&&s.connectionAddress===i.connectionAddress&&s.port===i.port)===-1&&this._candidates.push(o2(o2({},i),{},{foundation:"tcpcandidate",priority:Number(i.priority)-1+"",transport:"tcp",port:Number(i.port)+90+""}))}):this._candidates=this._candidates.filter(i=>i.transport!=="tcp");for(const i of this.sessionDesc.mediaDescriptions)i.attributes.candidates=this.candidates}restartICE(r){r=nr(r),this._iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=r.iceUfrag,i.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const i=[];for(let s=0;s<r;s++)i.push((this.currentMidIndex+s+1).toString(10));return i}findAvailableMediaIndex(r,i){return this.sessionDesc.mediaDescriptions.findIndex(s=>{const l=s.media.mediaType===r&&s.media.port!=="0"&&(s.attributes.direction==="sendonly"||s.attributes.direction==="sendrecv")&&s.attributes.ssrcs.length===0;if(Dn()){if(l){const d=this.firefoxSsrcMidMap.get(i[0].ssrcId);return!(d||s.attributes.mid!=="0"&&s.attributes.mid!=="1")||!(!d||d!==s.attributes.mid)}return!1}return l})}createOrRecycleRecvMedia(r,i,s,l,d,p){const v=r._mediaStreamTrack.kind,E=this.rtpCapabilities.recv,T=this.localCapabilities.send;let C=[];if(v===ut.VIDEO){var R,L;if(ie("H264_PROFILE_LEVEL_ID")&&l==="h264"&&(C=E.videoCodecs.filter(le=>{var he,ye;return(((he=le.rtpMap)===null||he===void 0?void 0:he.encodingName.toLowerCase())||"").includes(l)&&(le==null||(ye=le.fmtp)===null||ye===void 0?void 0:ye.parameters["profile-level-id"])===ie("H264_PROFILE_LEVEL_ID")})),!C||((R=C)===null||R===void 0?void 0:R.length)===0){const le=T.videoCodecs.filter(he=>{var ye;return(((ye=he.rtpMap)===null||ye===void 0?void 0:ye.encodingName.toLowerCase())||"").includes(l)});le.length!==0&&(C=E.videoCodecs.filter(he=>le.some(ye=>ye.payloadType===he.payloadType)))}if(ie("USE_PUB_RTX")){const le=C.map(ye=>ye.payloadType.toString()),he=E.videoCodecs.filter(ye=>{var ke,be;return((ke=ye.rtpMap)===null||ke===void 0?void 0:ke.encodingName)==="rtx"&&le.includes(((be=ye.fmtp)===null||be===void 0?void 0:be.parameters.apt)||"")});C=[...C,...he]}C.length===0&&(U.warning("codec ".concat(l," not included in rtpCapabilities, fallback to default payloads: ").concat((L=E.videoCodecs[0].rtpMap)===null||L===void 0?void 0:L.encodingName)),C=E.videoCodecs)}else C=E.audioCodecs.filter(le=>{var he;return(((he=le.rtpMap)===null||he===void 0?void 0:he.encodingName.toLowerCase())||"").includes(d)}),C.length===0&&(U.warning("codec ".concat(d," not included in rtpCapabilities, fallback to opus")),C=E.audioCodecs.filter(le=>{var he;return(((he=le.rtpMap)===null||he===void 0?void 0:he.encodingName.toLowerCase())||"").includes("opus")}));const j=v===ut.VIDEO?E.videoExtensions:E.audioExtensions;this.currentMidIndex+=1;const Y="".concat(this.currentMidIndex);let q={media:{mediaType:v,port:lg,protos:["UDP","TLS","RTP","SAVPF"],fmts:C.map(le=>le.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:j,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:C,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:s,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(Y)}};q=this.mungRecvMediaDsec(q,r,p);const X=this.findFirstClosedMedia(v);if(X){const le=this.sessionDesc.mediaDescriptions.indexOf(X);this.sessionDesc.mediaDescriptions[le]=q}else this.sessionDesc.mediaDescriptions.push(q);return q}createOrRecycleSendMedia(r,i,s,l,d){const p=this.rtpCapabilities.send,v=r===ut.VIDEO?p.videoCodecs:p.audioCodecs,E=r===ut.VIDEO?p.videoExtensions:p.audioExtensions;this.currentMidIndex+=1;const T="".concat(this.currentMidIndex);let C={media:{mediaType:r,port:lg,protos:["UDP","TLS","RTP","SAVPF"],fmts:v.map(L=>L.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:E,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:s,rtcpFeedbackWildcards:[],payloads:v,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:l,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(T)}};C=this.mungSendMediaDesc(C,d);const R=this.findFirstClosedMedia(r);if(R){const L=this.sessionDesc.mediaDescriptions.indexOf(R);this.sessionDesc.mediaDescriptions[L]=C}else this.sessionDesc.mediaDescriptions.push(C);return C}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(r=>r.media.port!=="0").map(r=>r.attributes.mid)}mungRecvMediaDsec(r,i,s){const l=nr(r);return bC(l),Md(l,i),TC(l,i),CL(l),rg(l,s,this.localCapabilities.send),l}mungSendMediaDesc(r,i){const s=nr(r);return rg(s,i,this.localCapabilities.recv),il(s),s}updateRecvMedia(r,i){const s=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(s!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[s],i);this.sessionDesc.mediaDescriptions[s]=l}}bumpMid(r){this.currentMidIndex+=r}findFirstClosedMedia(r){return this.sessionDesc.mediaDescriptions.find(i=>Dn()?i.media.port==="0"&&i.media.mediaType===r:i.media.port==="0")}findPreloadMediaDesc(r){return this.sessionDesc.mediaDescriptions.find(i=>{var s,l;return((s=i.attributes)===null||s===void 0||(l=s.ssrcs[0])===null||l===void 0?void 0:l.ssrcId)===r[0].ssrcId})}getSSRC(r){var i;return(i=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r))===null||i===void 0?void 0:i.attributes.ssrcs}}var Kt;function s2(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function ug(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?s2(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):s2(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}let fX=(_e((Kt=class av extends L0{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(r,i,s){super(r,i),N(this,"store",void 0),N(this,"peerConnection",void 0),N(this,"remoteSDP",void 0),N(this,"initialOffer",void 0),N(this,"transportEventReceiver",void 0),N(this,"statsFilter",void 0),N(this,"localCapabilities",void 0),N(this,"localCandidateCount",0),N(this,"allCandidatesReceived",!1),N(this,"establishPromise",void 0),N(this,"mutex",new Ri("NVExtentionsConnection-mutex")),N(this,"rtcMedia",void 0),this.store=i,this.peerConnection=s,this.statsFilter=OC(this.peerConnection,ie("STATS_UPDATE_INTERVAL"),void 0,Dn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(r){try{const i=await this.peerConnection.createOffer();if(!i.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const s=fu(i.sdp),l=await TL(!ie("USE_PUB_RTX")&&!ie("USE_SUB_RTX"),ie("FILTER_VIDEO_FEC"),ie("FILTER_AUDIO_FEC"));return this.localCapabilities=l,this.initialOffer=i,ug(ug({},s),{},{rtpCapabilities:l,offerSDP:i.sdp})}catch(i){throw new Q(W.GET_LOCAL_CONNECTION_PARAMS_FAILED,i.toString())}}async connect(r,i,s,l,d,p){try{if(!this.initialOffer)throw new Error("Cannot establish NVConnection without initial offer.");this.remoteSDP=new pX({remoteIceParameters:r,remoteDtlsParameters:i,candidates:s,remoteRTPCapabilities:l,remoteSetup:d,localCapabilities:RC(this.localCapabilities),cname:p});const v=this.remoteSDP.toString(),E=ir.exports.parse(this.initialOffer.sdp),T=E.mediaDescriptions.find(L=>L.media.mediaType==="audio");T&&il(T);const C=ir.exports.print(E),R=this.logSDPExchange(C||"","offer","local","connect");await this.peerConnection.setLocalDescription({type:"offer",sdp:C}),R==null||R(v),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(v){throw new Q(W.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(v.toString()))}}async updateRemoteConnect(r){var i,s,l;(i=this.remoteSDP)===null||i===void 0||i.updateRemoteRTPCapabilities(r),(s=this.remoteSDP)===null||s===void 0||s.preloadRemoteMedia(2);const d=(l=this.remoteSDP)===null||l===void 0?void 0:l.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:d});const p=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(p),U.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.")}send(r,i,s){var l=this;return Na(function*(){const d=yield It(l.mutex.lock("From NVExtentionsConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");const p=[];r.forEach(q=>{const X=l.peerConnection.addTransceiver(q._mediaStreamTrack,{direction:"sendonly"});p.push(X)}),Dn()&&ie("SIMULCAST")===!0&&(yield It(l.applySimulcastForFirefox(p,r)));const v=yield It(l.peerConnection.createOffer()),E=l.remoteSDP.predictReceivingMids(r.length),T=l.mungSendOfferSDP(v.sdp,r,E),C=ir.exports.parse(T),R=E.map(q=>{const X=C.mediaDescriptions.find(le=>le.attributes.mid===q);if(!X)throw new Error("Cannot extract ssrc from mediaDescription.");return SL(X,ie("USE_PUB_RTX"))});let L;try{L=yield R}catch(q){L=[],l.remoteSDP.receive(r,i,s,L);const X=l.remoteSDP.toString();throw yield It(l.peerConnection.setLocalDescription({type:"offer",sdp:T})),yield It(l.peerConnection.setRemoteDescription({type:"answer",sdp:X})),yield It(l.stopSending(E,!0)),q}l.remoteSDP.receive(r,i,s,L);const j=l.remoteSDP.toString(),Y=l.logSDPExchange(T,"offer","local","send");return yield It(l.peerConnection.setLocalDescription({type:"offer",sdp:T})),yield It(l.applySimulcastEncodings(p,r)),yield It(l.applySendEncodings(p,r)),Y==null||Y(j),yield It(l.peerConnection.setRemoteDescription({type:"answer",sdp:j})),p.map((q,X)=>{const le=E[X];return{localSSRC:R[X],id:le,transceiver:q}})}catch(p){throw p instanceof Q?p:new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(p.toString()))}finally{d()}})()}async stopSending(r,i){const s=i?void 0:await this.mutex.lock("From NVExtentionsConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(E=>r.indexOf(E.mid)!==-1);if(l.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");l.map(E=>{var T;E.direction="inactive",(T=E.stop)===null||T===void 0||T.call(E)});const d=await this.peerConnection.createOffer(),p=this.logSDPExchange(d.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(d),this.remoteSDP.stopReceiving(r);const v=this.remoteSDP.toString();p==null||p(v),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(l){throw new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(l.toString()))}finally{s&&s()}}async receive(r,i,s,l){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.receive ".concat(r," before remoteSDP created."));const{mid:d,needExchangeSDP:p}=this.remoteSDP.send(r,i,s,l);if(p){const E=this.remoteSDP.toString(),T=this.logSDPExchange(E,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:E});const C=await this.peerConnection.createAnswer(),R=this.mungReceiveAnswerSDP(C.sdp,d,r);T==null||T(R||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:R}),U.debug("[NVExtentionsConnection] receive ".concat(r," by exchanging SDP."))}else U.debug("[NVExtentionsConnection] receive ".concat(r," no need to exchange SDP."));const v=this.peerConnection.getTransceivers().find(E=>E.mid===d);if(!v)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:v.receiver.track,id:d}}catch(d){throw new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(d.toString()))}}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");const{mids:i,needExchangeSDP:s}=this.remoteSDP.batchSend(r);if(s){const l=this.remoteSDP.toString(),d=this.logSDPExchange(l,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:l});const p=await this.peerConnection.createAnswer();d==null||d(p.sdp||""),await this.peerConnection.setLocalDescription(p),U.debug("[NVExtentionsConnection] batchReceive by exchanging SDP.")}else U.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");return i.map(l=>{const d=this.peerConnection.getTransceivers().find(p=>p.mid===l);if(!d)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:d.receiver.track,id:l}})}catch(i){throw new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(i.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const i=this.remoteSDP.toString(),s=this.logSDPExchange(i,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat(i.toString()))}}async muteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.mute(r);const i=this.remoteSDP.toString(),s=this.logSDPExchange(i,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat(i.toString()))}}async unmuteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.unmute(r);const i=this.remoteSDP.toString(),s=this.logSDPExchange(i,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat(i.toString()))}}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(i.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(p=>{p.direction="inactive"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.muteRemote(r);const d=this.remoteSDP.toString();l==null||l(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(i){throw new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(i.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(async(p,v)=>{p.direction="sendonly"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.unmuteRemote(r);const d=this.remoteSDP.toString();l==null||l(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(i){throw new Q(W.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat(i.toString()))}}restartICE(r){var i=this;return Na(function*(){const s=yield It(i.mutex.lock("From NVExtentionsConnection.restartICE"));try{if(!i.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(zn().supportPCSetConfiguration){const T=i.peerConnection.getConfiguration(),C=r===Vr.RELAY?"relay":"all";T.iceTransportPolicy!==C&&(U.debug("restartICE change iceTransportPolicy from [".concat(T.iceTransportPolicy,"] to [").concat(C,"]")),T.iceTransportPolicy=C,i.peerConnection.setConfiguration(T))}else if(r===Vr.RELAY)return;r!==Vr.RELAY&&i.remoteSDP.updateCandidates(r);const l=yield It(i.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const d=fu(l.sdp),{remoteIceParameters:p}=yield d.iceParameters;i.remoteSDP.restartICE(p);const v=i.remoteSDP.toString(),E=i.logSDPExchange(l.sdp||"","offer","local","restartICE");yield It(i.peerConnection.setLocalDescription(l)),E==null||E(v),yield It(i.peerConnection.setRemoteDescription({type:"answer",sdp:v}))}catch(l){U.warning("restart ICE failed, abort operation",l)}finally{s()}})()}close(){var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,i){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");const s=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(s.sdp,[i],[r]);this.remoteSDP.updateRecvMedia(r,i);const d=this.remoteSDP.toString(),p=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),p==null||p(d),await this.peerConnection.setRemoteDescription({type:"answer",sdp:d})}catch(s){throw new Q(W.EXCHANGE_SDP_FAILED,s.toString())}}async updateSendParameters(r,i){const s=this.peerConnection.getTransceivers().filter(l=>l.mid===r);s.length===1&&(this.isVP8Simulcast(i)?Dn()||await this.applySimulcastEncodings(s,[i]):await this.applySendEncodings(s,[i]))}setStatsRemoteVideoIsReady(r,i){this.statsFilter.setVideoIsReady2(r,i)}async replaceTrack(r,i){const s=this.peerConnection.getTransceivers().find(l=>l.mid===i);s&&await s.sender.replaceTrack(r._mediaStreamTrack)}getP2PConnectionParams(){var r;if((r=this.peerConnection.currentLocalDescription)===null||r===void 0||!r.sdp||!this.localCapabilities)throw new Error;return ug(ug({},fu(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,U.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,U.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},ie("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const i={iceServers:[]};return r.iceServers?i.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(Op(r.turnServer.servers)?i.iceServers=r.turnServer.servers:(i.iceServers&&i.iceServers.push(...av.turnServerConfigToIceServers(r.turnServer.servers)),ie("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&r.turnServer.serversFromGateway&&i.iceServers.push(...av.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),ie("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(r){const i=[];return r.forEach(s=>{s.security?s.tcpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(H0(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&!ie("FORCE_TURN_TCP")&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),i}async applySendEncodings(r,i){try{if(!zn().supportSetRtpSenderParameters||r.length!==i.length)return;for(let T=0;T<r.length;T++){const C=r[T],R=i[T];if(R&&R instanceof rr){var s,l;if(this.isVP8Simulcast(R))continue;const L={},j={};switch(R._optimizationMode){case"motion":L.degradationPreference="maintain-framerate";break;case"detail":L.degradationPreference="maintain-resolution";break;default:L.degradationPreference="balanced"}var d,p,v,E;if((s=R._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&(j.maxBitrate=1e3*((d=R._encoderConfig)===null||d===void 0?void 0:d.bitrateMax)),R._hints.includes(pr.LOW_STREAM)&&((p=R._encoderConfig)!==null&&p!==void 0&&p.frameRate&&(j.maxFramerate=uc(R._encoderConfig.frameRate)),(v=R._encoderConfig)!==null&&v!==void 0&&v.scaleResolutionDownBy&&((E=R._encoderConfig)===null||E===void 0?void 0:E.scaleResolutionDownBy)>1&&(j.scaleResolutionDownBy=R._encoderConfig.scaleResolutionDownBy)),ie("DSCP_TYPE")&&Zl()){const X=ie("DSCP_TYPE");["very-low","low","medium","high"].includes(X)&&(j.networkPriority=X)}const Y=C.sender.getParameters(),q=(l=Y.encodings)===null||l===void 0?void 0:l[0];Dn()&&!q&&(L.encodings=[j]),q&&Object.assign(q,j),Object.assign(Y,L),await C.sender.setParameters(Y)}}}catch{U.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(r,i,s){const l=ir.exports.parse(r);return i.forEach((d,p)=>{const v=s[p],E=l.mediaDescriptions.find(T=>T.attributes.mid===v);E&&(Md(E,d),bL(E,d,this.store.codec))}),ir.exports.print(l)}mungReceiveAnswerSDP(r,i,s){const l=ir.exports.parse(r),d=l.mediaDescriptions.find(p=>p.attributes.mid===i);return d&&s===ut.AUDIO&&d.media.mediaType==="audio"&&il(d),ir.exports.print(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,i,s)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,i,s)},this.statsFilter.onSelectedLocalCandidateChanged=(r,i)=>{var s;(s=this.onSelectedLocalCandidateChanged)===null||s===void 0||s.call(this,r,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,i)=>{var s;(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0||s.call(this,r,i)},this.statsFilter.onFirstVideoDecodedTimeout=r=>{var i;(i=this.onFirstVideoDecodedTimeout)===null||i===void 0||i.call(this,r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(r,i){if(r.length===i.length)for(let v=0;v<r.length;v++){var s,l,d,p;const E=r[v],T=i[v];if(T instanceof rr&&!T._hints.includes(pr.LOW_STREAM)&&(s=T._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&((l=T._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(d=T._scalabiltyMode)!==null&&d!==void 0&&d.numSpatialLayers&&((p=T._scalabiltyMode)===null||p===void 0?void 0:p.numSpatialLayers)>1&&this.store.codec==="vp8"){const C={},R={high:1e3*(T._encoderConfig.bitrateMax-50),medium:5e4};C.encodings=[{rid:"m",active:!0,maxBitrate:R.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:R.high}];const L=E.sender.getParameters();await E.sender.setParameters(Object.assign(L,C))}}}async applySimulcastEncodings(r,i){if(!Dn()&&r.length===i.length)for(let s=0;s<r.length;s++){const l=i[s];if(l instanceof rr&&this.isVP8Simulcast(l)){const d=r[s],p={},v={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};p.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:v.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:v.medium,scaleResolutionDownBy:4}];const E=d.sender.getParameters();await d.sender.setParameters(Object.assign(E,p))}}}isVP8Simulcast(r){var i,s,l,d;return!!(r instanceof rr&&ie("SIMULCAST")&&this.store.codec==="vp8"&&!r._hints.includes(pr.LOW_STREAM)&&(i=r._encoderConfig)!==null&&i!==void 0&&i.bitrateMax&&((s=r._encoderConfig)===null||s===void 0?void 0:s.bitrateMax)>200&&(l=r._scalabiltyMode)!==null&&l!==void 0&&l.numSpatialLayers&&((d=r._scalabiltyMode)===null||d===void 0?void 0:d.numSpatialLayers)>1)}logSDPExchange(r,i,s,l){if(ie("SDP_LOGGING"))return U.upload("exchanging ".concat(s," ").concat(i," SDP during NVExtentionsConnection.").concat(l,`
`),r),i==="offer"?d=>{this.logSDPExchange(d,"answer",s==="local"?"remote":"local",l)}:void 0}async getRemoteSSRC(r){if(!this.remoteSDP)return;const i=this.remoteSDP.getSSRC(r);return i==null?void 0:i[0].ssrcId}setConfiguration(r){if(zn().supportPCSetConfiguration){const i=av.resolvePCConfiguration(r);this.peerConnection.setConfiguration(i)}}}).prototype,"connect",[Fo],Object.getOwnPropertyDescriptor(Kt.prototype,"connect"),Kt.prototype),_e(Kt.prototype,"updateRemoteConnect",[Fo],Object.getOwnPropertyDescriptor(Kt.prototype,"updateRemoteConnect"),Kt.prototype),_e(Kt.prototype,"receive",[Fo],Object.getOwnPropertyDescriptor(Kt.prototype,"receive"),Kt.prototype),_e(Kt.prototype,"batchReceive",[Fo],Object.getOwnPropertyDescriptor(Kt.prototype,"batchReceive"),Kt.prototype),_e(Kt.prototype,"stopReceiving",[Fo],Object.getOwnPropertyDescriptor(Kt.prototype,"stopReceiving"),Kt.prototype),_e(Kt.prototype,"muteRemote",[Fo],Object.getOwnPropertyDescriptor(Kt.prototype,"muteRemote"),Kt.prototype),_e(Kt.prototype,"unmuteRemote",[Fo],Object.getOwnPropertyDescriptor(Kt.prototype,"unmuteRemote"),Kt.prototype),_e(Kt.prototype,"muteLocal",[Fo],Object.getOwnPropertyDescriptor(Kt.prototype,"muteLocal"),Kt.prototype),_e(Kt.prototype,"unmuteLocal",[Fo],Object.getOwnPropertyDescriptor(Kt.prototype,"unmuteLocal"),Kt.prototype),_e(Kt.prototype,"close",[Fo],Object.getOwnPropertyDescriptor(Kt.prototype,"close"),Kt.prototype),_e(Kt.prototype,"updateEncoderConfig",[Fo],Object.getOwnPropertyDescriptor(Kt.prototype,"updateEncoderConfig"),Kt.prototype),_e(Kt.prototype,"updateSendParameters",[Fo],Object.getOwnPropertyDescriptor(Kt.prototype,"updateSendParameters"),Kt.prototype),_e(Kt.prototype,"replaceTrack",[Fo],Object.getOwnPropertyDescriptor(Kt.prototype,"replaceTrack"),Kt.prototype),_e(Kt.prototype,"getRemoteSSRC",[Fo],Object.getOwnPropertyDescriptor(Kt.prototype,"getRemoteSSRC"),Kt.prototype),Kt);function Fo(n,r,i){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,d=await l.lock("From NVExtentionsConnection.".concat(r));try{for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];return await s.apply(this,v)}finally{d()}},i}var cn;function c2(n){var r,i,s,l=2;for(typeof Symbol<"u"&&(i=vL,s=Symbol.iterator);l--;){if(i&&(r=n[i])!=null)return r.call(n);if(s&&(r=n[s])!=null)return new xC(r.call(n));i="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}function xC(n){function r(i){if(Object(i)!==i)return Pe.reject(new TypeError(i+" is not an object."));var s=i.done;return Pe.resolve(i.value).then(function(l){return{value:l,done:s}})}return(xC=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(i){var s=this.s.return;return s===void 0?Pe.resolve({value:i,done:!0}):r(s.apply(this.s,arguments))},throw:function(i){var s=this.s.return;return s===void 0?Pe.reject(i):r(s.apply(this.s,arguments))}},new xC(n)}let al=(_e((cn=class sv extends L0{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(r,i){super(r,i),N(this,"store",void 0),N(this,"peerConnection",void 0),N(this,"cname",void 0),N(this,"mutex",new Ri("DataChannelConnection-mutex")),N(this,"dataChannel",void 0),N(this,"_p2pConnection",void 0),N(this,"establishPromise",void 0),N(this,"_nvMedia",void 0),this.store=i,this.store.dcId=this.store.dcId+1,this.peerConnection=new RTCPeerConnection(sv.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.dataChannel=this.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),this.dataChannel.binaryType="arraybuffer",this._p2pConnection=new fX(r,i,this.peerConnection),this.bindPCEvents(),this.establishPromise=this._p2pConnection.establishPromise}async establish(){var r;const i=(r=this._nvMedia)===null||r===void 0?void 0:r.getLocalRtpCapabilities();return await this._p2pConnection.establish(i)}getP2PConnectionParams(){return this._p2pConnection.getP2PConnectionParams()}async connect(r,i,s,l,d,p){return this.cname=p,await this._p2pConnection.connect(r,i,s,l,d,p),await new Pe((v,E)=>{const T=setTimeout(()=>{this.closeSignal(),E(new Q(W.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(s))))},2e3);this.dataChannel.onopen=()=>{if(this.dataChannel.readyState==="open")return clearTimeout(T),void v()},this.dataChannel.onerror=C=>{this.closeSignal(),E(C)}}),{transmitter:this.dataChannel,close:this.closeSignal.bind(this)}}send(r,i,s){var l=this;return Na(function*(){const d=yield It(l.mutex.lock("From DataChannelConnection.send"));try{return yield*ng(c2(l._p2pConnection.send(r,i,s)),It)}finally{d()}})()}async stopSending(r,i){return this._p2pConnection.stopSending(r,i)}async receive(r,i,s,l){return this._nvMedia?(U.debug("[DataChannelConnection] receive ".concat(r," by DataChannel.")),await this._nvMedia.reveiveByRTCMedia(r,i,this.cname)):(U.debug("[DataChannelConnection] receive ".concat(r," by WebRTC.")),await this._p2pConnection.receive(r,i,s,l))}async batchReceive(r){return[...await this._p2pConnection.batchReceive(r)]}async stopReceiving(r){return await this._p2pConnection.stopReceiving(r)}async muteRemote(r){return await this._p2pConnection.muteRemote(r)}async unmuteRemote(r){return await this._p2pConnection.unmuteRemote(r)}async muteLocal(r){return await this._p2pConnection.muteLocal(r)}async unmuteLocal(r){return await this._p2pConnection.unmuteLocal(r)}restartICE(r){var i=this;return Na(function*(){return yield*ng(c2(i._p2pConnection.restartICE(r)),It)})()}close(){var r;(r=this._nvMedia)===null||r===void 0||r.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)}getStats(){return this._p2pConnection.getStats()}getRemoteVideoIsReady(r){return this._p2pConnection.getRemoteVideoIsReady(r)}updateRemoteConnect(r){var i;(i=this._nvMedia)===null||i===void 0||i.setRemoteRtpCapabilities(r),this._p2pConnection.updateRemoteConnect(r)}async updateEncoderConfig(r,i){return await this._p2pConnection.updateEncoderConfig(r,i)}async updateSendParameters(r,i){return await this._p2pConnection.updateSendParameters(r,i)}setStatsRemoteVideoIsReady(r,i){this._p2pConnection.setStatsRemoteVideoIsReady(r,i)}async replaceTrack(r,i){return await this._p2pConnection.replaceTrack(r,i)}async getRemoteSSRC(r){return this._p2pConnection.getRemoteSSRC(r)}logSDPExchange(r,i,s,l){if(ie("SDP_LOGGING"))return U.upload("exchanging ".concat(s," ").concat(i," SDP during DataChannelConnection.").concat(l,`
`),r),i==="offer"?d=>{this.logSDPExchange(d,"answer",s==="local"?"remote":"local",l)}:void 0}static resolvePCConfiguration(r){const i={iceServers:[]};return r.iceServers?i.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(Op(r.turnServer.servers)?i.iceServers=r.turnServer.servers:(i.iceServers&&i.iceServers.push(...sv.turnServerConfigToIceServers(r.turnServer.servers)),ie("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&r.turnServer.serversFromGateway&&i.iceServers.push(...sv.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),ie("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(r){const i=[];return r.forEach(s=>{s.security?s.tcpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(H0(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&!ie("FORCE_TURN_TCP")&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),i}bindPCEvents(){this._p2pConnection.onICEConnectionStateChange=r=>{var i;return(i=this.onICEConnectionStateChange)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onConnectionStateChange=r=>{var i;return(i=this.onConnectionStateChange)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onDTLSTransportStateChange=r=>{var i;return(i=this.onDTLSTransportStateChange)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onDTLSTransportError=r=>{var i;return(i=this.onDTLSTransportError)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onICETransportStateChange=r=>{var i;return(i=this.onICETransportStateChange)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onFirstAudioReceived=r=>{var i;return(i=this.onFirstAudioReceived)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onFirstVideoReceived=r=>{var i;return(i=this.onFirstVideoReceived)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onFirstAudioDecoded=r=>{var i;return(i=this.onFirstAudioDecoded)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onFirstVideoDecoded=(r,i,s)=>{var l;return(l=this.onFirstVideoDecoded)===null||l===void 0?void 0:l.call(this,r,i,s)},this._p2pConnection.onFirstVideoDecodedTimeout=r=>{var i;return(i=this.onFirstVideoDecodedTimeout)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onSelectedLocalCandidateChanged=(r,i)=>{var s;return(s=this.onSelectedLocalCandidateChanged)===null||s===void 0?void 0:s.call(this,r,i)},this._p2pConnection.onSelectedRemoteCandidateChanged=(r,i)=>{var s;return(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0?void 0:s.call(this,r,i)}}closeSignal(){this.dataChannel.close(),this.peerConnection.close()}unbindConnectionEvents(r){r.onConnectionStateChange=void 0,r.onICEConnectionStateChange=void 0,r.onICETransportStateChange=void 0,r.onDTLSTransportStateChange=void 0,r.onDTLSTransportError=void 0,r.onFirstAudioDecoded=void 0,r.onFirstAudioReceived=void 0,r.onFirstVideoDecoded=void 0,r.onFirstVideoReceived=void 0,r.onSelectedLocalCandidateChanged=void 0,r.onSelectedRemoteCandidateChanged=void 0,r.onFirstVideoDecodedTimeout=void 0}setConfiguration(r){this._p2pConnection.setConfiguration(r)}}).prototype,"connect",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"connect"),cn.prototype),_e(cn.prototype,"receive",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"receive"),cn.prototype),_e(cn.prototype,"stopReceiving",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"stopReceiving"),cn.prototype),_e(cn.prototype,"muteRemote",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"muteRemote"),cn.prototype),_e(cn.prototype,"unmuteRemote",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"unmuteRemote"),cn.prototype),_e(cn.prototype,"muteLocal",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"muteLocal"),cn.prototype),_e(cn.prototype,"unmuteLocal",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"unmuteLocal"),cn.prototype),_e(cn.prototype,"close",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"close"),cn.prototype),_e(cn.prototype,"updateEncoderConfig",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"updateEncoderConfig"),cn.prototype),_e(cn.prototype,"updateSendParameters",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"updateSendParameters"),cn.prototype),_e(cn.prototype,"replaceTrack",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"replaceTrack"),cn.prototype),_e(cn.prototype,"getRemoteSSRC",[Pa],Object.getOwnPropertyDescriptor(cn.prototype,"getRemoteSSRC"),cn.prototype),cn);function Pa(n,r,i){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,d=await l.lock("From DataChannelConnection.".concat(r));try{for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];return await s.apply(this,v)}finally{d()}},i}var Vt;function l2(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function sl(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?l2(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):l2(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function u2(n){var r,i,s,l=2;for(typeof Symbol<"u"&&(i=vL,s=Symbol.iterator);l--;){if(i&&(r=n[i])!=null)return r.call(n);if(s&&(r=n[s])!=null)return new PC(r.call(n));i="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}function PC(n){function r(i){if(Object(i)!==i)return Pe.reject(new TypeError(i+" is not an object."));var s=i.done;return Pe.resolve(i.value).then(function(l){return{value:l,done:s}})}return(PC=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(i){var s=this.s.return;return s===void 0?Pe.resolve({value:i,done:!0}):r(s.apply(this.s,arguments))},throw:function(i){var s=this.s.return;return s===void 0?Pe.reject(i):r(s.apply(this.s,arguments))}},new PC(n)}let mX=(_e((Vt=class extends In{get state(){return this._state}set state(n){const r=this._state;this._state=n,this.emit(xt.StateChange,r,this._state)}constructor(n,r){super(),N(this,"store",void 0),N(this,"statsUploader",void 0),N(this,"connection",void 0),N(this,"localTrackMap",new Map),N(this,"remoteUserMap",new Map),N(this,"pendingLocalTracks",[]),N(this,"pendingRemoteTracks",[]),N(this,"statsCollector",void 0),N(this,"isPlanB",!1),N(this,"shouldForwardP2PCreation",void 0),N(this,"iceFailedCount",0),N(this,"dtlsFailedCount",0),N(this,"mutex",new Ri("P2PChannel-mutex")),N(this,"_state",fr.Disconnected),N(this,"_pcStatsUploadType",ie("NEW_ICE_RESTART")?ns.FIRST_CONNECTION:ns.OLD_FIRST_CONNECTION),N(this,"_isInRestartIce",!1),N(this,"_isStartRestartIce",!1),N(this,"_restartStates",["disconnected","failed"]),N(this,"_restartTimer",void 0),N(this,"_isFirstConnected",!0),N(this,"handleMuteLocalTrack",async(i,s,l)=>{const d=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==fr.Connected)return void l(new Q(W.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const p=this.filterTobeMutedTracks(i);if(p.length===0)return void s();const v=p.find(T=>T[0]==="videoLowTrack");v&&v[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(p.map(T=>{let[,{id:C}]=T;return C}));const E=this.createMuteMessage(p);await Mn(this,xt.RequestMuteLocal,E),s()}catch(p){l(p)}finally{d()}}),N(this,"handleUnmuteLocalTrack",async(i,s,l)=>{const d=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==fr.Connected)return void l(new Q(W.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const p=this.filterTobeUnmutedTracks(i);if(p.length===0)return void s();const v=p.find(T=>T[0]==="videoLowTrack");if(v){const T=v[1];if(T.track._originMediaStreamTrack.stop(),zn().supportDualStreamEncoding){const C=i._mediaStreamTrack.clone();T.track._mediaStreamTrack=C,T.track._originMediaStreamTrack=C}else{const C=HL(i,uu(this,xt.RequestLowStreamParameter));T.track._mediaStreamTrack=C,T.track._originMediaStreamTrack=C}await new Pe((C,R)=>{this.handleReplaceTrack(T.track,C,R,!0)})}await this.connection.unmuteLocal(p.map(T=>{let[,{id:C}]=T;return C}));const E=this.createUnmuteMessage(p);await Mn(this,xt.RequestUnmuteLocal,E),s()}catch(p){l(p)}finally{d()}}),N(this,"handleUpdateVideoEncoder",async(i,s,l)=>{const d=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const p=this.localTrackMap.get(Me.LocalVideoTrack);if(!this.connection||!p||p.track!==i||this.state!==fr.Connected)return void s();const{id:v,track:E}=p;await this.connection.updateSendParameters(v,E),await this.connection.updateEncoderConfig(v,E),this.emit(xt.UpdateVideoEncoder,E),s()}catch(p){l(p)}finally{d()}}),N(this,"handleSetOptimizationMode",async(i,s,l)=>{const d=await this.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const p=this.localTrackMap.get(Me.LocalVideoTrack);if(!this.connection||!p||p.track!==i||this.state!==fr.Connected)return;const{id:v,track:E}=p;await this.connection.updateSendParameters(v,E),s()}catch(p){l(p)}finally{d()}}),N(this,"handleReplaceTrack",async(i,s,l,d)=>{let p;U.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(i.getTrackId(),"]")),typeof d=="boolean"&&d||(p=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var v;const T=Array.from(this.localTrackMap.entries()).find(C=>{let[,{track:R}]=C;return i===R});if(!this.connection||!T||this.state!==fr.Connected)return void s();if(await((v=this.connection)===null||v===void 0?void 0:v.replaceTrack(i,T[1].id)),this.isPlanB){const C=T[1];C.id=i._mediaStreamTrack.id,this.localTrackMap.set(T[0],C)}if(T[0]===Me.LocalVideoTrack&&zn().supportDualStreamEncoding){const C=this.localTrackMap.get(Me.LocalVideoLowTrack);if(C){const R=i._mediaStreamTrack.clone();C.track._originMediaStreamTrack.stop(),C.track._mediaStreamTrack=R,C.track._originMediaStreamTrack=R,await new Pe((L,j)=>{this.handleReplaceTrack(C.track,L,j,!0)})}}s()}catch(T){l(T)}finally{var E;(E=p)===null||E===void 0||E()}}),N(this,"handleGetLocalVideoStats",i=>{i(this.statsCollector.getLocalVideoTrackStats())}),N(this,"handleGetLocalAudioStats",i=>{i(this.statsCollector.getLocalAudioTrackStats())}),N(this,"handleGetRemoteVideoStats",i=>this.statsCollector.getRemoteVideoTrackStats(i.uid)[i.uid]),N(this,"handleGetRemoteAudioStats",i=>this.statsCollector.getRemoteAudioTrackStats(i.uid)[i.uid]),this.store=n,this.statsCollector=r,this.statsCollector.addP2PChannel(this),this.statsUploader=new hX,this.bindStatsUploaderEvents(),this.isPlanB=!zn().supportUnifiedPlan||ie("CHROME_FORCE_PLAN_B")&&Zl(),this.shouldForwardP2PCreation=ie("FORWARD_P2P_CREATION")&&zn().supportPCSetConfiguration,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new al({},this.store):this.isPlanB?new Gp({},this.store):new pc({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(n,r){var i;this.state=fr.New;const s=this.shouldForwardP2PCreation&&((i=this.connection)===null||i===void 0?void 0:i.peerConnectionState)==="closed";if(this.shouldForwardP2PCreation&&!s||(s&&this.connection&&(U.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.store.useDataChannel?new al(n,this.store):this.isPlanB?new Gp(n,this.store):new pc(n,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new Q(W.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=ie("NEW_ICE_RESTART")?ns.FIRST_CONNECTION:ns.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(n),this.connection.establishPromise}async connect(n,r,i,s,l,d){if(!this.connection)throw new Q(W.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.connection instanceof al?this.connection.updateRemoteConnect(s):(this.store.peerConnectionStart(),await this.connection.connect(n,r,i,s,l,d),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=fr.Connected)}async preConnect(n,r,i,s,l,d){if(!this.connection)throw new Q(W.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.store.peerConnectionStart();const p=await this.connection.connect(n,r,i,s,l,d);return this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=fr.Connected,p}getEstablishParams(){if(this.connection instanceof al)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")}publish(n,r,i){var s=this;return Na(function*(){const l=yield It(s.mutex.lock("From P2PChannel.publish"));try{if(!s.connection||s.state!==fr.Connected){if(s.state===fr.Disconnected)throw new Q(W.UNEXPECTED_ERROR,"PeerConnection already disconnected.");s.throwIfTrackTypeNotMatch(n);const p=n.filter(v=>s.pendingLocalTracks.indexOf(v)===-1);return void(s.pendingLocalTracks=s.pendingLocalTracks.concat(p))}s.store.pubId=s.store.pubId+1,ta.markPublishStart(s.store.clientId,s.store.pubId);const d=s.filterTobePublishedTracks(n,r,i);if(d.length===0)return void(yield It(s.tryToUnmuteAudio(n)));yield*ng(u2(s.doPublish(s.connection,d)),It)}finally{l()}})()}doPublish(n,r){var i=this;return Na(function*(){r.forEach(T=>{let{track:C,type:R}=T;const L=Date.now();i.store.publish(C.getTrackId(),R===Me.LocalAudioTrack?"audio":"video",L)}),i.bindLocalTrackEvents(r);const s=yield It(n.send(r.map(T=>{let{track:C}=T;return C}),i.store.codec,i.store.audioCodec)),l=(yield It(s.next())).value,d=i.createGatewayPublishMessage(r,l);let p;try{p=yield d}catch(T){throw s.throw(T),(T==null?void 0:T.code)===W.WS_ABORT&&r.forEach(C=>{let{track:R}=C;i.pendingLocalTracks.indexOf(R)===-1&&i.pendingLocalTracks.push(R)}),i.unbindLocalTrackEvents(r),T}const v=i.mapPubResToRemoteConfig(d,p),E=(yield It(s.next(v))).value;r.forEach(T=>{let{type:C}=T;i.statsCollector.addLocalStats(C)}),i.assignLocalTracks(r,E),i.statsUploader.startUploadUplinkStats(),r.forEach(T=>{let{track:C,type:R}=T;const L=Date.now();i.store.publish(C.getTrackId(),R===Me.LocalAudioTrack?"audio":"video",void 0,L)})})()}publishLowStream(n){var r=this;return Na(function*(){if(!r.connection||r.state!==fr.Connected)return;const i=yield It(r.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const l=r.localTrackMap.get(Me.LocalVideoTrack);if(!l)throw new Q(W.UNEXPECTED_ERROR,"Could not find high stream");if(r.localTrackMap.has(Me.LocalVideoLowTrack))throw new Q(W.UNEXPECTED_ERROR,"[".concat(r.store.clientId,"] Can't publish low stream when stream already publish"));const d=[{track:r.getLowVideoTrack(l.track,n),type:Me.LocalVideoLowTrack}];if(yield*ng(u2(r.doPublish(r.connection,d)),It),l.track.muted||!l.track.enabled){var s;const p=(s=r.localTrackMap.get(Me.LocalVideoLowTrack))===null||s===void 0?void 0:s.id;p!==void 0&&(yield It(r.connection.muteLocal([p])))}}finally{i()}})()}async republish(){this.pendingLocalTracks.length>0&&(U.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await ni(this,xt.RequestRePublish,this.pendingLocalTracks),this.emit(xt.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async reSubscribe(n){for(let r=this.pendingRemoteTracks.length-1;r>=0;r--){const{user:i,kind:s}=this.pendingRemoteTracks[r];(s!==ut.AUDIO||i._audio_added_&&i._audioSSRC)&&(s!==ut.VIDEO||i._video_added_&&i._videoSSRC)||this.pendingRemoteTracks.splice(r,1)}if(n)await ni(this,xt.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:r,kind:i}of this.pendingRemoteTracks)await this.subscribe(r,i,i===ut.VIDEO?r._videoSSRC:r._audioSSRC);this.pendingRemoteTracks.forEach(r=>{let{user:i}=r;this.emit(xt.MediaReconnectEnd,i.uid)}),this.pendingRemoteTracks=[]}async unpublish(n){if(!this.connection||this.state!==fr.Connected)return void n.forEach(s=>{const l=this.pendingLocalTracks.indexOf(s);l!==-1&&this.pendingLocalTracks.splice(l,1)});const r=this.filterTobeUnpublishedTracks(n);if(r.length===0)return;const i=r.find(s=>s[0]==="videoLowTrack");return i&&i[1].track.close(),this.doUnpublish(this.connection,r)}async unpublishLowStream(){if(!this.connection||this.state!==fr.Connected)return;const n=this.localTrackMap.get(Me.LocalVideoLowTrack);if(!n)return;n.track.close();const r=[[Me.LocalVideoLowTrack,n]];return this.doUnpublish(this.connection,r)}async doUnpublish(n,r){const i=this.createGatewayUnpublishMessage(r);return await n.stopSending(r.map(s=>{let[,{id:l}]=s;return l})),this.withdrawLocalTracks(r),this.unbindLocalTrackEvents(r.map(s=>{let[l,{track:d}]=s;return{type:l,track:d}})),r.forEach(s=>{let[l]=s;this.statsCollector.removeLocalStats(l)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadUplinkStats(),i}async subscribe(n,r,i,s,l){var d;if(!this.connection||this.state!==fr.Connected)throw new Q(W.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if((d=this.remoteUserMap.get(n))!==null&&d!==void 0&&d.has(r))return;let p,v,E;if(l){const R=l.find(j=>{let{stream_type:Y}=j;return Y===r});if(!R)throw new Q(W.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(r," for user: ").concat(n.uid," because subscribe answer from gateway does not contain stream_type: ").concat(r,"."));const L=await this.connection.receive(r,R.ssrcs,String(n._uintid),R.attributes);this.connection instanceof pc&&(E=L.transceiver),p=L.track,v=L.id}else{const R=await this.connection.receive(r,[{ssrcId:i,rtx:s}],String(n._uintid),void 0);this.connection instanceof pc&&(E=R.transceiver),p=R.track,v=R.id}r===ut.AUDIO?(n._audioTrack?n._audioTrack._updateOriginMediaStreamTrack(p):(n._audioTrack=new cg(p,n.uid,n._uintid,this.store),U.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(n._audioTrack.getTrackId()))),E&&n._audioTrack._updateRtpTransceiver(E),this.bindRemoteTrackEvents(n,n._audioTrack)):(n._videoTrack?n._videoTrack._updateOriginMediaStreamTrack(p):(n._videoTrack=new sg(p,n.uid,n._uintid,this.store),U.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(n._videoTrack.getTrackId()))),E&&n._videoTrack._updateRtpTransceiver(E),this.bindRemoteTrackEvents(n,n._videoTrack));const T=this.remoteUserMap.get(n);T?T.set(r,v):this.remoteUserMap.set(n,new Map([[r,v]])),this.statsCollector.addRemoteStats(n.uid),this.statsUploader.startUploadDownlinkStats();const C=this.pendingRemoteTracks.findIndex(R=>{let{user:L,kind:j}=R;return L.uid===n.uid&&r===j});C!==-1&&(this.pendingRemoteTracks.splice(C,1),this.emit(xt.MediaReconnectEnd,n.uid))}async massSubscribe(n){return this.massSubscribeNoLock(n)}async massSubscribeNoLock(n){if(!this.connection||this.state!==fr.Connected)throw new Q(W.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");n=n.filter(i=>{var s;let{user:l,mediaType:d}=i;return!((s=this.remoteUserMap.get(l))!==null&&s!==void 0&&s.has(d))});const r=await this.connection.batchReceive(n.map(i=>{let{user:s,mediaType:l,ssrcId:d,rtxSsrcId:p}=i;return{kind:l,ssrcMsg:[{ssrcId:d,rtx:p}],mslabel:String(s._uintid)}}));n.forEach((i,s)=>{let{user:l,mediaType:d}=i;const{track:p,id:v,transceiver:E}=r[s];d===ut.AUDIO?(l._audioTrack?l._audioTrack._updateOriginMediaStreamTrack(p):(l._audioTrack=new cg(p,l.uid,l._uintid,this.store),U.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(l._audioTrack.getTrackId()))),E&&l._audioTrack._updateRtpTransceiver(E),this.bindRemoteTrackEvents(l,l._audioTrack)):(l._videoTrack?l._videoTrack._updateOriginMediaStreamTrack(p):(l._videoTrack=new sg(p,l.uid,l._uintid,this.store),U.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(l._videoTrack.getTrackId()))),E&&l._videoTrack._updateRtpTransceiver(E),this.bindRemoteTrackEvents(l,l._videoTrack));const T=this.remoteUserMap.get(l);T?T.set(d,v):this.remoteUserMap.set(l,new Map([[d,v]])),this.statsCollector.addRemoteStats(l.uid),this.statsUploader.startUploadDownlinkStats();const C=this.pendingRemoteTracks.findIndex(R=>{let{user:L,kind:j}=R;return L.uid===l.uid&&d===j});C!==-1&&(this.pendingRemoteTracks.splice(C,1),this.emit(xt.MediaReconnectEnd,l.uid))})}async unsubscribe(n,r,i){const s=this.pendingRemoteTracks.filter(p=>{let{user:v,kind:E}=p;return r!==void 0?v.uid===n.uid&&r===E:v.uid===n.uid});if(s.forEach(p=>{const v=this.pendingRemoteTracks.indexOf(p);this.pendingRemoteTracks.splice(v,1)}),this.connection&&this.state===fr.Connected||i||s.forEach(p=>{let{kind:v}=p;var E;if(v===ut.AUDIO)(E=n._audioTrack)===null||E===void 0||E._destroy(),n._audioTrack=void 0;else if(v===ut.VIDEO){var T;(T=n._videoTrack)===null||T===void 0||T._destroy(),n._videoTrack=void 0}}),!this.connection||this.state!==fr.Connected)return;const l=this.filterTobeUnSubscribedTracks(n,r);if(l.length===0)return;await this.connection.stopReceiving(l.map(p=>{let[,{id:v}]=p;return v}));const d=this.createUnsubscribeMessage(l);return this.withdrawRemoteTracks(l),this.remoteUserMap.size===0&&this.statsUploader.stopUploadDownlinkStats(),l.forEach(p=>{let[v,{kind:E}]=p;var T,C;if(E===ut.VIDEO&&v._videoSSRC&&((T=this.connection)===null||T===void 0||T.setStatsRemoteVideoIsReady(v._videoSSRC,!1)),E===ut.VIDEO)this.unbindRemoteTrackEvents(v._videoTrack),i||((C=v._videoTrack)===null||C===void 0||C._destroy(),v._videoTrack=void 0);else if(E===ut.AUDIO){var R;this.unbindRemoteTrackEvents(v._audioTrack),!i&&((R=v._audioTrack)===null||R===void 0||R._destroy(),v._audioTrack=void 0)}}),d}async massUnsubscribe(n){return this.massUnsubscribeNoLock(n)}async massUnsubscribeNoLock(n){let r=[];for(const{user:l,mediaType:d}of n){const p=this.pendingRemoteTracks.filter(v=>{let{user:E,kind:T}=v;return d!==void 0?E.uid===l.uid&&d===T:E.uid===l.uid});p.forEach(v=>{const E=this.pendingRemoteTracks.indexOf(v);this.pendingRemoteTracks.splice(E,1)}),r=r.concat(p)}if(!this.connection||this.state!==fr.Connected)return void r.forEach(l=>{let{user:d,kind:p}=l;var v;if(p===ut.AUDIO)(v=d._audioTrack)===null||v===void 0||v._destroy(),d._audioTrack=void 0;else if(p===ut.VIDEO){var E;(E=d._videoTrack)===null||E===void 0||E._destroy(),d._videoTrack=void 0}});const i=Gc(n).call(n,(l,d)=>{let{user:p,mediaType:v}=d;const E=this.filterTobeUnSubscribedTracks(p,v);return l.concat(E)},[]);if(i.length===0)return;await this.connection.stopReceiving(i.map(l=>{let[,{id:d}]=l;return d}));const s=this.createUnsubscribeAllMessage(i);return this.withdrawRemoteTracks(i),this.remoteUserMap.size===0&&this.statsUploader.stopUploadDownlinkStats(),i.forEach(l=>{let[d,{kind:p}]=l;var v,E;if(p===ut.VIDEO&&d._videoSSRC&&((v=this.connection)===null||v===void 0||v.setStatsRemoteVideoIsReady(d._videoSSRC,!1)),p===ut.VIDEO)this.unbindRemoteTrackEvents(d._videoTrack),(E=d._videoTrack)===null||E===void 0||E._destroy(),d._videoTrack=void 0;else if(p===ut.AUDIO){var T;this.unbindRemoteTrackEvents(d._audioTrack),(T=d._audioTrack)===null||T===void 0||T._destroy(),d._audioTrack=void 0}}),s}async muteRemote(n,r){if(!this.connection)return;const i=this.remoteUserMap.get(n);if(!i)return void U.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(n.uid,"."));if(!i.get(r))return void U.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(n.uid," media type ").concat(r,"."));const s=r===ut.VIDEO?n._videoSSRC:n._audioSSRC;s!==void 0&&this.connection.setStatsRemoteVideoIsReady(s,!1)}async unmuteRemote(n,r){return this.unmuteRemoteNoLock(n,r)}async unmuteRemoteNoLock(n,r){if(!this.connection)return;const i=this.remoteUserMap.get(n);if(!i)return void U.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(n.uid,"."));i.get(r)||U.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(n.uid," media type ").concat(r,"."))}getAllTracks(n){const r=this.localTrackMap.get(Me.LocalAudioTrack);if((r==null?void 0:r.track)instanceof to){const i=r.track;return Array.from(this.localTrackMap.entries()).filter(s=>{let[l]=s;return l!==Me.LocalAudioTrack}).filter(s=>{let[l]=s;return!(n&&l===Me.LocalVideoLowTrack)}).map(s=>{let[,{track:l}]=s;return l}).concat(i.trackList)}return Array.from(this.localTrackMap.entries()).filter(i=>{let[s]=i;return!(n&&s===Me.LocalVideoLowTrack)}).map(i=>{let[,{track:s}]=i;return s})}reportPublishEvent(n,r,i,s,l){if(n){const p=this.localTrackMap.get(Me.LocalAudioTrack),v=s?this.localTrackMap.get(Me.LocalVideoLowTrack):this.localTrackMap.get(Me.LocalVideoTrack);Ue.publish(this.store.sessionId,{eventElapse:ta.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:r,audioName:p==null?void 0:p.track.getTrackLabel(),videoName:v==null?void 0:v.track.getTrackLabel(),screenshare:(v==null?void 0:v.track._hints.indexOf(pr.SCREEN_TRACK))!==-1,audio:!!p,video:!!v,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}else{var d;i||(i=[]);const p=i.find(E=>E instanceof ei),v=s?(d=this.localTrackMap.get(Me.LocalVideoTrack))===null||d===void 0?void 0:d.track:i.find(E=>E instanceof rr);Ue.publish(this.store.sessionId,{eventElapse:ta.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:r,audioName:p==null?void 0:p.getTrackLabel(),videoName:v==null?void 0:v.getTrackLabel(),screenshare:(v==null?void 0:v._hints.indexOf(pr.SCREEN_TRACK))!==-1,audio:!!p,video:!!v,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}}reportSubscribeEvent(n,r,i,s){const l=s===ut.VIDEO?i._videoSSRC:i._audioSSRC;l&&Ue.subscribe(this.store.sessionId,{succ:n,ec:r,video:s===ut.VIDEO,audio:s===ut.AUDIO,peerid:i.uid,subscribeRequestid:s===ut.VIDEO?i._videoSSRC:i._audioSSRC,p2pid:this.store.p2pId,eventElapse:ta.measureFromSubscribeStart(this.store.clientId,l)})}reset(){U.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new Ri("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new al({},this.store):this.isPlanB?new Gp({},this.store):new pc({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const n=this.localTrackMap.get(Me.LocalAudioTrack);if((n==null?void 0:n.track)instanceof to){if(n.track.trackList.length>0){const r=n.track;n.track.trackList.forEach(i=>{r.removeAudioTrack(i)})}n.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=fr.Disconnected}getStats(){var n;return(n=this.connection)===null||n===void 0?void 0:n.getStats()}getRemoteVideoIsReady(n){var r;return((r=this.connection)===null||r===void 0?void 0:r.getRemoteVideoIsReady(n))||!1}getLocalAudioVolume(){const n=this.localTrackMap.get(Me.LocalAudioTrack);if(n)return n.track.getVolumeLevel()}getLocalVideoSize(){const n=this.localTrackMap.get(Me.LocalVideoTrack);if(n)return{width:n.track._videoWidth||0,height:n.track._videoHeight||0}}getEncoderConfig(n){const r=this.localTrackMap.get(n);return r&&r.track instanceof rr||r&&r.track instanceof ei?r.track._encoderConfig:void 0}getLocalMedia(n){return this.localTrackMap.get(n)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(n,r){if(!n)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(n);return!!i&&(!r||i.has(r))}async hasRemoteMediaWithLock(n,r){if(!n)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(n);return!!i&&(!r||i.has(r))}getRemoteMedia(n){var r;const i=Array.from(au(r=this.remoteUserMap).call(r)).find(s=>s.uid===n);return i?{audioTrack:i.audioTrack,audioSSRC:i._audioSSRC,videoTrack:i.videoTrack,videoSSRC:i._videoSSRC}:{}}getAudioLevels(){let n=Array.from(this.remoteUserMap.entries()).map(i=>{let[s]=i;return{uid:s.uid,level:s.audioTrack?100*s.audioTrack._source.getAccurateVolumeLevel():0}});const r=this.localTrackMap.get(Me.LocalAudioTrack);return r&&n.push({level:100*r.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),n=vy(n).call(n,(i,s)=>i.level-s.level),n}async disconnectForReconnect(){this.connection&&(U.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=fr.Reconnecting,ie("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r]=n;var i;r._videoTrack&&r._videoTrack._player&&((i=r._videoTrack._player.getVideoElement())===null||i===void 0||i.pause(),r._videoTrack._player.isKeepLastFrame=!0,r._videoTrack._originMediaStreamTrack.stop())}),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new al({},this.store):this.isPlanB?new Gp({},this.store):new pc({},this.store),this.bindConnectionEvents(this.connection)),this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(n=>{let[r,{track:i}]=n;switch(r){case Me.LocalVideoTrack:i._hints.includes(pr.LOW_STREAM)?i.close():this.pendingLocalTracks.push(i);break;case Me.LocalAudioTrack:i instanceof to?this.pendingLocalTracks=this.pendingLocalTracks.concat(i.trackList):this.pendingLocalTracks.push(i);break;case Me.LocalVideoLowTrack:}}),this.emit(xt.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r,i]=n;Array.from(au(i).call(i)).forEach(s=>{this.setPendingRemoteMedia(r,s)}),this.emit(xt.MediaReconnectStart,r.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),U.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(n,r){for(const i of this.pendingRemoteTracks){const{user:s,kind:l}=i;if((n instanceof iC?n.uid:n)===s.uid&&r===l)return!0}return!1}setPendingRemoteMedia(n,r){this.hasPendingRemoteMedia(n,r)||this.pendingRemoteTracks.push({user:n,kind:r})}restartICE(n){var r=this;return Na(function*(){if(!r.connection||r.state!==fr.Connected||r.connection instanceof al)return;const i=yield It(r.mutex.lock("From P2PChannel.restartICE"));let s;try{s=yield It(r.connection.restartICE(n));const d=yield It(s.next());if(d.done)return;const p=d.value,v=yield p;switch(r.reportPCDisconnectedOrFailed(n),n){case Vr.TCP:r._pcStatsUploadType=ns.TCP_RESTART;break;case Vr.RELAY:r._pcStatsUploadType=ns.RELAY_RESTART;break;default:r._pcStatsUploadType=ns.OLD_RESTART}r._isInRestartIce=!0,s.next(v)}catch(d){var l;(l=s)===null||l===void 0||l.throw(d)}finally{i()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats(),r=this.localTrackMap.get(Me.LocalVideoTrack),i=this.localTrackMap.get(Me.LocalAudioTrack),s=n.videoSend.find(j=>j.ssrc===(r==null?void 0:r.ssrcs[0].ssrcId)),l=n.audioSend.find(j=>j.ssrc===(i==null?void 0:i.ssrcs[0].ssrcId));if(!s||!l)return 1;const d=Aa(this,xt.NeedSignalRTT),p=s?s.rttMs:void 0,v=l?l.rttMs:void 0,E=p&&v?(p+v)/2:p||v,T=(E&&d?(E+d)/2:E||d)||0,C=100*n.sendPacketLossRate*.7/50+.3*T/1500,R=C<.17?1:C<.36?2:C<.59?3:C<.1?4:5,L=r==null?void 0:r.track;if(L&&L._encoderConfig&&L._hints.indexOf(pr.SCREEN_TRACK)===-1){const j=L._encoderConfig.bitrateMax,Y=n.bitrate.actualEncoded;if(j&&Y){const q=(1e3*j-Y)/(1e3*j);return G9[q<.15?0:q<.3?1:q<.45?2:q<.6?3:4][R]}}return R}getDownlinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats();let r=0;return Array.from(this.remoteUserMap.entries()).forEach(i=>{let[s]=i;const l=s._audioSSRC,d=s._videoSSRC,p=n.audioRecv.find(Y=>Y.ssrc===l),v=n.videoRecv.find(Y=>Y.ssrc===d);if(!p&&!v)return void(r+=1);const E=Aa(this,xt.NeedSignalRTT),T=n.rtt,C=(T&&E?(T+E)/2:T||E)||0,R=p?p.jitterMs:void 0,L=n.recvPacketLossRate;let j=.7*L*100/50+.3*C/1500;R&&(j=.6*L*100/50+.2*C/1500+.2*R/400),r+=j<.1?1:j<.17?2:j<.36?3:j<.59?4:5}),this.remoteUserMap.size>0?Math.round(r/this.remoteUserMap.size):r}async muteLocalTrack(n){return new Pe((r,i)=>{this.handleMuteLocalTrack(n,r,i)})}filterTobePublishedTracks(n,r,i){const s=[],l=zn(),d=this.getAllTracks();n=SD(n=n.filter(E=>d.indexOf(E)===-1));let p=!1,v=!1;for(const E of n){if(E instanceof rr&&(this.localTrackMap.has(Me.LocalVideoTrack)||p?new Q(W.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(s.push({track:E,type:Me.LocalVideoTrack}),p=!0),r)){const T=this.getLowVideoTrack(E,i);s.push({track:T,type:Me.LocalVideoLowTrack})}if(E instanceof ei){const T=this.localTrackMap.get(Me.LocalAudioTrack);if(T){if(!(T.track instanceof to))throw new Q(W.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(E._bypassWebAudio)throw new Q(W.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");T.track.addAudioTrack(E),this.bindLocalAudioTrackEvents(E,!0)}else if(v){const C=s.find(R=>{let{type:L}=R;return L===Me.LocalAudioTrack});if(!(C.track instanceof to))throw new Q(W.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(E._bypassWebAudio)throw new Q(W.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");C.track.addAudioTrack(E)}else{if(!l.webAudioMediaStreamDest||E instanceof to||E._bypassWebAudio)s.push({track:E,type:Me.LocalAudioTrack});else{const C=new to;C.addAudioTrack(E),s.push({track:C,type:Me.LocalAudioTrack})}v=!0}}}return s}filterTobeUnpublishedTracks(n){const r=[],i=this.getAllTracks();n=SD(n=n.filter(s=>i.indexOf(s)!==-1));for(const s of n){if(s instanceof ei){const l=this.localTrackMap.get(Me.LocalAudioTrack);if(!l)continue;l.track instanceof to?(l.track.removeAudioTrack(s),this.unbindLocalAudioTrackEvents(s),l.track.trackList.length===0&&(r.push([Me.LocalAudioTrack,l]),l.track.close())):r.push([Me.LocalAudioTrack,l])}if(s instanceof rr){const l=this.localTrackMap.get(Me.LocalVideoTrack);if(!l)continue;r.push([Me.LocalVideoTrack,l]);const d=this.localTrackMap.get(Me.LocalVideoLowTrack);d&&r.push([Me.LocalVideoLowTrack,d])}}return r}bindLocalTrackEvents(n){n.forEach(r=>{let{track:i,type:s}=r;switch(s){case Me.LocalVideoTrack:i.addListener(et.GET_STATS,this.handleGetLocalVideoStats),i.addListener(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(et.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.addListener(et.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),i.addListener(et.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.addListener(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Me.LocalAudioTrack:this.bindLocalAudioTrackEvents(i);break;case Me.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(n,r){n instanceof to?n.trackList.forEach(i=>{i.addListener(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(et.GET_STATS,this.handleGetLocalAudioStats),i.addListener(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.addListener(et.GET_STATS,this.handleGetLocalAudioStats),n.addListener(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.addListener(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.addListener(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.addListener(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),r||n.addListener(et.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(n){n||(n=Array.from(this.localTrackMap.entries()).map(r=>{let[i,{track:s}]=r;return{track:s,type:i}})),n.forEach(r=>{let{track:i,type:s}=r;switch(s){case Me.LocalVideoTrack:i.off(et.GET_STATS,this.handleGetLocalVideoStats),i.off(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.off(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.off(et.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.off(et.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),i.off(et.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.off(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.off(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Me.LocalAudioTrack:this.unbindLocalAudioTrackEvents(i);break;case Me.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(n){n instanceof to?n.trackList.forEach(r=>{r.off(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(et.GET_STATS,this.handleGetLocalAudioStats),r.off(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.off(et.GET_STATS,this.handleGetLocalAudioStats),n.off(et.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(et.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(et.NEED_REPLACE_TRACK,this.handleReplaceTrack),n.off(et.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(et.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(n,r){r instanceof sg&&r.addListener(et.GET_STATS,i=>{i(this.handleGetRemoteVideoStats(n))}),r instanceof cg&&r.addListener(et.GET_STATS,i=>{i(this.handleGetRemoteAudioStats(n))})}unbindRemoteTrackEvents(n){n&&n.removeAllListeners(et.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r,i]=n;i.has(ut.AUDIO)&&this.unbindRemoteTrackEvents(r._audioTrack),i.has(ut.VIDEO)&&this.unbindRemoteTrackEvents(r._videoTrack)})}createGatewayPublishMessage(n,r){return n.map((i,s)=>{let l,d,{track:p,type:v}=i;switch(v){case Me.LocalAudioTrack:l=cr.Audio,d={dtx:p instanceof B0&&p._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case Me.LocalVideoTrack:l=p._hints.includes(pr.SCREEN_TRACK)?cr.Screen:cr.High,d=sl(sl({},gD(p)),{},{codec:this.store.codec});break;case Me.LocalVideoLowTrack:l=cr.Low,d=sl(sl({},gD(p)),{},{codec:this.store.codec})}return{stream_type:l,attributes:d,ssrcs:r[s]}})}createGatewayUnpublishMessage(n){return n.map(r=>{let i,[s,{track:l,ssrcs:d,id:p}]=r;switch(s){case Me.LocalVideoTrack:i=l._hints.includes(pr.SCREEN_TRACK)?cr.Screen:cr.High;break;case Me.LocalAudioTrack:i=cr.Audio;break;case Me.LocalVideoLowTrack:i=cr.Low}return{stream_type:i,ssrcs:d,mid:p}})}assignLocalTracks(n,r){n.forEach((i,s)=>{let{track:l,type:d}=i;this.localTrackMap.set(d,{track:l,id:r[s].id,ssrcs:r[s].localSSRC})})}withdrawLocalTracks(n){n.forEach(r=>{let[i]=r;this.localTrackMap.delete(i)})}bindConnectionEvents(n){n.onConnectionStateChange=async r=>{if(U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(r,")")),this.emit(xt.PeerConnectionStateChange,r),r!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),r==="connected"&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),ie("NEW_ICE_RESTART")){if(this._restartStates.includes(r)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const i=d=>{(n.iceConnectionState==="disconnected"||n.iceConnectionState==="checking"||n.iceConnectionState==="failed")&&(U.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(d)),Aa(this,xt.QueryClientConnectionState)==="CONNECTED"&&this.emit(xt.RequestRestartICE,d))},s=()=>{n.iceConnectionState!=="disconnected"&&n.iceConnectionState!=="checking"&&n.iceConnectionState!=="failed"||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),U.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout(()=>this.emit(xt.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},l=ie("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout(()=>{if(ie("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&zn().supportPCSetConfiguration)i(Vr.RELAY),this._restartTimer=window.setTimeout(s,l);else if(Dn())i(Vr.UDP),this._restartTimer=window.setTimeout(s,4e3);else{if(i(Vr.TCP),zn().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout(()=>{i(Vr.RELAY),this._restartTimer=window.setTimeout(s,l)},l));this._restartTimer=window.setTimeout(s,l)}},800))}}else{if(r==="disconnected"&&n.iceConnectionState==="disconnected")return setTimeout(()=>{n.iceConnectionState==="disconnected"&&ie("ICE_RESTART")&&Aa(this,xt.QueryClientConnectionState)==="CONNECTED"&&this.emit(xt.RequestRestartICE)},800),void setTimeout(()=>{n.peerConnectionState==="disconnected"&&(U.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout(()=>this.emit(xt.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);r==="failed"&&(U.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout(()=>this.emit(xt.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())}},n.onICEConnectionStateChange=r=>{r!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(r,")")),Ue.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:r,tag:bn.TRACER}).onSuccess(),this.emit(xt.IceConnectionStateChange,r)},n.onICETransportStateChange=r=>{U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(r,")"))},n.onDTLSTransportStateChange=r=>{U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(r,")"))},n.onDTLSTransportError=r=>{U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(r,")"))},n.onFirstAudioDecoded=r=>{var i;const s=Array.from(au(i=this.remoteUserMap).call(i)).find(d=>d._audioSSRC===r);var l;s&&(this.store.subscribe(s.uid,"audio",void 0,void 0,void 0,Date.now()),(l=s.audioTrack)===null||l===void 0||l.emit(Td.FIRST_FRAME_DECODED),Ue.firstRemoteFrame(this.store.sessionId,Fr.FIRST_AUDIO_DECODE,wn.FIRST_AUDIO_DECODE,{peer:s._uintid,subscribeElapse:ta.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId}))},n.onFirstAudioReceived=r=>{var i;const s=Array.from(au(i=this.remoteUserMap).call(i)).find(l=>l._audioSSRC===r);s&&Ue.firstRemoteFrame(this.store.sessionId,Fr.FIRST_AUDIO_RECEIVED,wn.FIRST_AUDIO_RECEIVED,{peer:s._uintid,subscribeElapse:ta.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId})},n.onFirstVideoDecoded=(r,i,s)=>{this.reportVideoFirstFrameDecoded(r,i,s)},n.onFirstVideoReceived=r=>{var i;const s=Array.from(au(i=this.remoteUserMap).call(i)).find(l=>l._videoSSRC===r);s&&Ue.firstRemoteFrame(this.store.sessionId,Fr.FIRST_VIDEO_RECEIVED,wn.FIRST_VIDEO_RECEIVED,{peer:s._uintid,subscribeElapse:ta.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId})},n.onSelectedLocalCandidateChanged=(r,i)=>{const s=r.candidateType==="relay",l=i.candidateType==="relay";i.candidateType!=="unknown"&&s===l||this.emit(xt.ConnectionTypeChange,s),U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(W0(i))," -> ").concat(JSON.stringify(W0(r)),")"))},n.onSelectedRemoteCandidateChanged=(r,i)=>{U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(W0(i))," -> ").concat(JSON.stringify(W0(r)),")"))},n.onFirstVideoDecodedTimeout=r=>{this.reportVideoFirstFrameDecoded(r,void 0,void 0,!0)}}unbindConnectionEvents(n){n.onConnectionStateChange=void 0,n.onICEConnectionStateChange=void 0,n.onICETransportStateChange=void 0,n.onDTLSTransportStateChange=void 0,n.onDTLSTransportError=void 0,n.onFirstAudioDecoded=void 0,n.onFirstAudioReceived=void 0,n.onFirstVideoDecoded=void 0,n.onFirstVideoReceived=void 0,n.onSelectedLocalCandidateChanged=void 0,n.onSelectedRemoteCandidateChanged=void 0,n.onFirstVideoDecodedTimeout=void 0}filterTobeMutedTracks(n){const r=[];if(this.getAllTracks().indexOf(n)===-1)return r;const i=this.localTrackMap.get(Me.LocalAudioTrack);if(n instanceof ei&&(i==null?void 0:i.track)instanceof to)return i.track.isActive||r.push([Me.LocalAudioTrack,i]),r;const s=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:d}]=l;return n===d});if(s&&(r.push(s),s[0]===Me.LocalVideoTrack)){const l=this.localTrackMap.get(Me.LocalVideoLowTrack);l&&r.push([Me.LocalVideoLowTrack,l])}return r}filterTobeUnmutedTracks(n){const r=[],i=this.localTrackMap.get(Me.LocalAudioTrack);if(n instanceof ei&&(i==null?void 0:i.track)instanceof to)return i.track.isActive&&r.push([Me.LocalAudioTrack,i]),r;const s=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:d}]=l;return n===d});if(s)if(s[0]===Me.LocalVideoTrack){r.push(s);const l=this.localTrackMap.get(Me.LocalVideoLowTrack);l&&r.push([Me.LocalVideoLowTrack,l])}else r.push(s);return r}createMuteMessage(n){return n.map(r=>{let i,[s,{track:l,ssrcs:d,id:p}]=r;switch(s){case Me.LocalAudioTrack:i=cr.Audio;break;case Me.LocalVideoTrack:i=l._hints.includes(pr.SCREEN_TRACK)?cr.Screen:cr.High;break;case Me.LocalVideoLowTrack:i=cr.Low}return{stream_type:i,ssrcs:d,mid:p}})}createUnmuteMessage(n){return n.map(r=>{let i,[s,{track:l,ssrcs:d,id:p}]=r;switch(s){case Me.LocalAudioTrack:i=cr.Audio;break;case Me.LocalVideoTrack:i=l._hints.includes(pr.SCREEN_TRACK)?cr.Screen:cr.High;break;case Me.LocalVideoLowTrack:i=cr.Low}return{stream_type:i,ssrcs:d,mid:p}})}filterTobeUnSubscribedTracks(n,r){const i=[],s=this.remoteUserMap.get(n);if(!s)return i;if(r){const l=s.get(r);if(!l)return i;i.push([n,{kind:r,id:l}])}else Array.from(s.entries()).forEach(l=>{let[d,p]=l;i.push([n,{kind:d,id:p}])});return i}createUnsubscribeMessage(n){const r=[];return n.forEach(i=>{let[s,{kind:l,id:d}]=i;switch(l){case ut.VIDEO:return void(s._videoSSRC&&r.push({stream_type:ut.VIDEO,ssrcId:s._videoSSRC}));case ut.AUDIO:return void(s._audioSSRC&&r.push({stream_type:ut.AUDIO,ssrcId:s._audioSSRC}))}}),r}createUnsubscribeAllMessage(n){const r=new Map;return n.forEach(i=>{let[s,{kind:l}]=i;if(r.has(s)){let d=r.get(s);l===ut.VIDEO?d|=er.Video:d|=er.Audio,r.set(s,d)}else l===ut.VIDEO?r.set(s,er.Video):r.set(s,er.Audio)}),{users:Array.from(r.entries()).map(i=>{let[s,l]=i;return{stream_id:s.uid,stream_type:l}})}}withdrawRemoteTracks(n){n.forEach(r=>{let[i,{kind:s}]=r;const l=this.remoteUserMap.get(i);l&&(l.delete(s),Array.from(l.entries()).length===0&&this.remoteUserMap.delete(i))})}async updateBitrateLimit(n){const r=this.localTrackMap.get(Me.LocalVideoTrack),i=this.localTrackMap.get(Me.LocalVideoLowTrack);r&&await r.track.setBitrateLimit(n.uplink),i&&n.low_stream_uplink&&await i.track.setBitrateLimit({max_bitrate:n.low_stream_uplink.bitrate,min_bitrate:n.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}mapPubResToRemoteConfig(n,r){return n.map((i,s)=>{var l;let{stream_type:d}=i;return(l=r.find(p=>{let{stream_type:v}=p;return d===v}))===null||l===void 0?void 0:l.attributes})}async tryToUnmuteAudio(n){for(let i=0;i<n.length;i++)if(n[i]instanceof ei){var r;const s=this.filterTobeUnmutedTracks(n[i]);if(s.length===0)continue;await((r=this.connection)===null||r===void 0?void 0:r.unmuteLocal(s.map(d=>{let[,{id:p}]=d;return p})));const l=this.createUnmuteMessage(s);return void await Mn(this,xt.RequestUnmuteLocal,l)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=n=>{var r;return!((r=this.connection)===null||r===void 0||!r.getRemoteVideoIsReady(n))},this.statsUploader.requestUpload=(n,r)=>this.emit(xt.RequestUploadStats,n,r),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await ti(sy(this.dtlsFailedCount,Qn)),this.emit(xt.RequestReconnect)}async reconnectP2P(){const n=Array.from(this.localTrackMap.entries()),r=this.createGatewayUnpublishMessage(n);Array.from(this.remoteUserMap.entries()),r.length>0&&await ni(this,xt.RequestUnpublishForReconnectPC,r),this.disconnectForReconnect(),this.emit(xt.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(Me.LocalVideoTrack)||this.pendingLocalTracks.some(n=>n instanceof rr)}throwIfTrackTypeNotMatch(n){if(n.filter(r=>r instanceof rr).length>1)throw new Q(W.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n.filter(r=>r instanceof ei).length>1&&(n.some(r=>r instanceof ei&&r._bypassWebAudio)||!zn().webAudioMediaStreamDest))throw new Q(W.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const r of n){if(r instanceof rr&&this.pendingLocalTracks.some(i=>i instanceof rr))throw new Q(W.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(r instanceof ei&&this.pendingLocalTracks.some(i=>i instanceof ei)&&(!zn().webAudioMediaStreamDest||r._bypassWebAudio||this.pendingLocalTracks.some(i=>i instanceof ei&&i._bypassWebAudio)))throw new Q(W.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(n,r){const i=zn().supportDualStreamEncoding,s=sl(sl({},{width:160,height:120,framerate:15,bitrate:50}),r);let l;l=i?n._mediaStreamTrack.clone():HL(n,s);const d=fn(8,"track-low-"),p=new rr(l,sl(sl({},i&&{scaleResolutionDownBy:YY(s,n)}),{},{frameRate:s.framerate,bitrateMax:s.bitrate,bitrateMin:s.bitrate}),void 0,void 0,d);return p.on(Ap.TRANSCEIVER_UPDATED,v=>{n._updateRtpTransceiver(v,bd.LOW_STREAM)}),p._hints.push(pr.LOW_STREAM),n.addListener(et.NEED_CLOSE,()=>{p.close()}),p}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(n,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(this.connection&&this.connection instanceof pc){var l,d,p,v;const E=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:T,dtlsTransportState:C,peerConnectionState:R}=this.connection,{local:L,remote:j}=await this.connection.getSelectedCandidatePair();Ue.pcStats(this.store.sessionId,{startTime:E,eventElapse:n-E||0,iceconnectionsate:T,dtlsstate:C,connectionstate:R,intSucc:r?1:2,error:s,selectedLocalCandidateProtocol:(l=L==null?void 0:L.protocol)!==null&&l!==void 0?l:"",selectedLocalCandidateType:(d=L.candidateType)!==null&&d!==void 0?d:"",selectedLocalCandidateAddress:"".concat(L.address,":").concat(L.port),selectedRemoteCandidateProtocol:(p=j.protocol)!==null&&p!==void 0?p:"",selectedRemoteCandidateType:(v=j.candidateType)!==null&&v!==void 0?v:"",selectedRemoteCandidateAddress:"".concat(j.address,":").concat(j.port),restartCnt:i})}}reportVideoFirstFrameDecoded(n,r,i,s){var l;const d=Array.from(au(l=this.remoteUserMap).call(l)).find(p=>p._videoSSRC===n);if(d){s||this.store.subscribe(d.uid,"video",void 0,void 0,void 0,void 0,Date.now());const p=this.store.keyMetrics,v=p.subscribe.find(E=>E.userId===d.uid&&E.type==="video");Ue.firstRemoteVideoDecode(this.store.sessionId,Fr.FIRST_VIDEO_DECODE,wn.FIRST_VIDEO_DECODE,{peer:d._uintid,videowidth:r,videoheight:i,subscribeElapse:ta.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId,apEnd:p.requestAPEnd||0,apStart:p.requestAPStart||0,joinGwEnd:p.joinGatewayEnd||0,joinGwStart:p.joinGatewayStart||0,pcEnd:p.peerConnectionEnd||0,pcStart:p.peerConnectionStart||0,subscriberEnd:(v==null?void 0:v.subscribeEnd)||0,subscriberStart:(v==null?void 0:v.subscribeStart)||0,videoAddNotify:(v==null?void 0:v.streamAdded)||0,state:s?1:0})}}async remoteMediaSsrcChanged(n,r,i){if(!this.connection)return!1;const s=this.remoteUserMap.get(n);if(!s)return!1;const l=s.get(r);if(!l)return!1;const d=await this.connection.getRemoteSSRC(l);return d!==void 0&&d!==i}resetConnection(n){U.debug("[".concat(this.store.clientId,"] [P2PChannel] reset connection to ").concat(n)),this.state===fr.Connected?(U.debug("[".concat(this.store.clientId,"] [P2PChannel] fallback to websocket but P2PChannel state still connected, disconnect first")),this.disconnectForReconnect()):(this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=n===D0.datachannel?new al({},this.store):this.isPlanB?new Gp({},this.store):new pc({},this.store),this.bindConnectionEvents(this.connection)))}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(n=>{let[r,{track:i}]=n;r===Me.LocalVideoLowTrack?i._updateRtpTransceiver(void 0,bd.LOW_STREAM):i._updateRtpTransceiver(void 0)})}reportPCDisconnectedOrFailed(n){this.connection&&this.connection instanceof pc&&(this.connection.iceConnectionState!=="disconnected"&&this.connection.iceConnectionState!=="checking"&&this.connection.iceConnectionState!=="failed"||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===ns.TCP_RESTART&&n===Vr.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,ns.DISCONNECTED_OR_FAILED)))}}).prototype,"startP2PConnection",[Eo],Object.getOwnPropertyDescriptor(Vt.prototype,"startP2PConnection"),Vt.prototype),_e(Vt.prototype,"connect",[Eo],Object.getOwnPropertyDescriptor(Vt.prototype,"connect"),Vt.prototype),_e(Vt.prototype,"preConnect",[Eo],Object.getOwnPropertyDescriptor(Vt.prototype,"preConnect"),Vt.prototype),_e(Vt.prototype,"unpublish",[Eo],Object.getOwnPropertyDescriptor(Vt.prototype,"unpublish"),Vt.prototype),_e(Vt.prototype,"unpublishLowStream",[Eo],Object.getOwnPropertyDescriptor(Vt.prototype,"unpublishLowStream"),Vt.prototype),_e(Vt.prototype,"subscribe",[Eo],Object.getOwnPropertyDescriptor(Vt.prototype,"subscribe"),Vt.prototype),_e(Vt.prototype,"massSubscribe",[Eo],Object.getOwnPropertyDescriptor(Vt.prototype,"massSubscribe"),Vt.prototype),_e(Vt.prototype,"unsubscribe",[Eo],Object.getOwnPropertyDescriptor(Vt.prototype,"unsubscribe"),Vt.prototype),_e(Vt.prototype,"massUnsubscribe",[Eo],Object.getOwnPropertyDescriptor(Vt.prototype,"massUnsubscribe"),Vt.prototype),_e(Vt.prototype,"muteRemote",[Eo],Object.getOwnPropertyDescriptor(Vt.prototype,"muteRemote"),Vt.prototype),_e(Vt.prototype,"unmuteRemote",[Eo],Object.getOwnPropertyDescriptor(Vt.prototype,"unmuteRemote"),Vt.prototype),_e(Vt.prototype,"hasRemoteMediaWithLock",[Eo],Object.getOwnPropertyDescriptor(Vt.prototype,"hasRemoteMediaWithLock"),Vt.prototype),_e(Vt.prototype,"disconnectForReconnect",[Eo],Object.getOwnPropertyDescriptor(Vt.prototype,"disconnectForReconnect"),Vt.prototype),_e(Vt.prototype,"updateBitrateLimit",[Eo],Object.getOwnPropertyDescriptor(Vt.prototype,"updateBitrateLimit"),Vt.prototype),_e(Vt.prototype,"remoteMediaSsrcChanged",[Eo],Object.getOwnPropertyDescriptor(Vt.prototype,"remoteMediaSsrcChanged"),Vt.prototype),Vt);function Eo(n,r,i){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,d=await l.lock("From P2PChannel.".concat(r));try{for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];return await s.apply(this,v)}finally{d()}},i}function d2(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function Fe(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?d2(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):d2(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var Ct;(function(n){n.SET_SESSION_ID="SET_SESSION_ID",n.SET_P2P_ID="SET_P2P_id",n.SET_DC_ID="SET_DC_id",n.SET_UID="SET_UID",n.SET_PUB_ID="SET_PUB_ID",n.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",n.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",n.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",n.AVOID_JOIN_START="AVOID_JOIN_START",n.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",n.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",n.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",n.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",n.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",n.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",n.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",n.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",n.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",n.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",n.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",n.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",n.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",n.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",n.RESET_KEY_METRICS="RESET_KEY_METRICS",n.SET_USE_DATACHANNEL="SET_USE_DATACHANNEL"})(Ct||(Ct={}));class gX{constructor(r,i,s,l){N(this,"state",void 0),this.state={codec:r,audioCodec:i,mode:s,clientId:l,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useDataChannel:!1}}dispatch(r){this.state=function(i,s){switch(s.type){case Ct.SET_SESSION_ID:return Fe(Fe({},i),{},{sessionId:s.sessionId});case Ct.SET_P2P_ID:return Fe(Fe({},i),{},{p2pId:s.p2pId});case Ct.SET_UID:return Fe(Fe({},i),{},{uid:s.uid});case Ct.SET_PUB_ID:return Fe(Fe({},i),{},{pubId:s.pubId});case Ct.KEY_METRIC_CLIENT_CREATED:return Fe(Fe({},i),{},{keyMetrics:Fe(Fe({},i.keyMetrics),{},{clientCreated:s.metric})});case Ct.KEY_METRIC_JOIN_START:return Fe(Fe({},i),{},{keyMetrics:Fe(Fe({},i.keyMetrics),{},{joinStart:s.metric})});case Ct.AVOID_JOIN_START:return Fe(Fe({},i),{},{avoidJoinStart:s.avoidJoinStart});case Ct.KEY_METRIC_JOIN_END:return Fe(Fe({},i),{},{keyMetrics:Fe(Fe({},i.keyMetrics),{},{joinEnd:s.metric})});case Ct.KEY_METRIC_REQUEST_AP_START:return Fe(Fe({},i),{},{keyMetrics:Fe(Fe({},i.keyMetrics),{},{requestAPStart:s.metric})});case Ct.KEY_METRIC_REQUEST_AP_END:return Fe(Fe({},i),{},{keyMetrics:Fe(Fe({},i.keyMetrics),{},{requestAPEnd:s.metric})});case Ct.KEY_METRIC_JOIN_GATEWAY_START:return Fe(Fe({},i),{},{keyMetrics:Fe(Fe({},i.keyMetrics),{},{joinGatewayStart:s.metric})});case Ct.KEY_METRIC_JOIN_GATEWAY_END:return Fe(Fe({},i),{},{keyMetrics:Fe(Fe({},i.keyMetrics),{},{joinGatewayEnd:s.metric})});case Ct.KEY_METRIC_PEER_CONNECTION_START:return Fe(Fe({},i),{},{keyMetrics:Fe(Fe({},i.keyMetrics),{},{peerConnectionStart:s.metric})});case Ct.KEY_METRIC_PEER_CONNECTION_END:return Fe(Fe({},i),{},{keyMetrics:Fe(Fe({},i.keyMetrics),{},{peerConnectionEnd:s.metric})});case Ct.KEY_METRIC_DESCRIPTION_START:return Fe(Fe({},i),{},{keyMetrics:Fe(Fe({},i.keyMetrics),{},{descriptionStart:s.metric})});case Ct.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return Fe(Fe({},i),{},{keyMetrics:Fe(Fe({},i.keyMetrics),{},{signalChannelOpen:s.metric})});case Ct.KEY_METRIC_ICE_CONNECTION_END:return Fe(Fe({},i),{},{keyMetrics:Fe(Fe({},i.keyMetrics),{},{iceConnectionEnd:s.metric})});case Ct.KEY_METRIC_PUBLISH:{const l=i.keyMetrics.publish,d=l.findIndex(p=>p.trackId===s.metric.trackId);return d!==-1?(l[d]=Fe(Fe({},l[d]),s.metric),Fe(Fe({},i),{},{keyMetrics:Fe(Fe({},i.keyMetrics),{},{publish:[...l]})})):Fe(Fe({},i),{},{keyMetrics:Fe(Fe({},i.keyMetrics),{},{publish:[...i.keyMetrics.publish,s.metric]})})}case Ct.KEY_METRIC_SUBSCRIBE:{const l=i.keyMetrics.subscribe,d=l.findIndex(p=>p.userId===s.metric.userId&&p.type===s.metric.type);return d!==-1?(l[d]=Fe(Fe({},l[d]),s.metric),Fe(Fe({},i),{},{keyMetrics:Fe(Fe({},i.keyMetrics),{},{subscribe:[...l]})})):Fe(Fe({},i),{},{keyMetrics:Fe(Fe({},i.keyMetrics),{},{subscribe:[...i.keyMetrics.subscribe,s.metric]})})}case Ct.SET_CLOUD_PROXY_SERVER_MODE:return i.cloudProxyServerMode=s.mode,i;case Ct.RECORD_JOIN_CHANNEL_SERVICE:return typeof s.index!="number"?i.joinChannelServiceRecords=[...i.joinChannelServiceRecords,s.record]:(i.joinChannelServiceRecords[s.index]=Fe(Fe({},i.joinChannelServiceRecords[s.index]),s.record),i.joinChannelServiceRecords=[...i.joinChannelServiceRecords]),i;case Ct.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return i.joinChannelServiceRecords=[],i;case Ct.RESET_KEY_METRICS:return i.keyMetrics={publish:[],subscribe:[]},i;case Ct.SET_USE_DATACHANNEL:return Fe(Fe({},i),{},{useDataChannel:s.val});default:return i}}(this.state,r)}set sessionId(r){this.dispatch({type:Ct.SET_SESSION_ID,sessionId:r})}get sessionId(){return this.state.sessionId}get codec(){return this.state.codec}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(r){this.dispatch({type:Ct.SET_P2P_ID,p2pId:r})}get p2pId(){return this.state.p2pId}set dcId(r){this.dispatch({type:Ct.SET_DC_ID,dcId:r})}get dcId(){return this.state.dcId}set uid(r){this.dispatch({type:Ct.SET_UID,uid:r})}get uid(){return this.state.uid}set pubId(r){this.dispatch({type:Ct.SET_PUB_ID,pubId:r})}get pubId(){return this.state.pubId}set cloudProxyServerMode(r){this.dispatch({type:Ct.SET_CLOUD_PROXY_SERVER_MODE,mode:r})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useDataChannel(r){this.dispatch({type:Ct.SET_USE_DATACHANNEL,val:r})}get useDataChannel(){return this.state.useDataChannel}clientCreated(){this.dispatch({type:Ct.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:Ct.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:Ct.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:Ct.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:Ct.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:Ct.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:Ct.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:Ct.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:Ct.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:Ct.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:Ct.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:Ct.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(r,i,s,l){this.dispatch({type:Ct.KEY_METRIC_PUBLISH,metric:Fe(Fe({trackId:r,type:i},s&&{publishStart:s}),l&&{publishEnd:l})})}subscribe(r,i,s,l,d,p,v){this.dispatch({type:Ct.KEY_METRIC_SUBSCRIBE,metric:Fe(Fe(Fe(Fe(Fe({userId:r,type:i},s&&{subscribeStart:s}),l&&{subscribeEnd:l}),d&&{firstFrame:d}),p&&{streamAdded:p}),v&&{firstDecoded:v})})}massSubscribe(r,i,s,l){r.forEach(d=>{this.dispatch({type:Ct.KEY_METRIC_SUBSCRIBE,metric:Fe(Fe(Fe({userId:d.userId,type:d.type},i&&{subscribeStart:i}),s&&{subscribeEnd:s}),l&&{firstFrame:l})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(r,i){r.service==="gateway"&&Array.isArray(r.urls)&&(r.urls=r.urls.map(s=>s.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof i!="number"?(this.dispatch({type:Ct.RECORD_JOIN_CHANNEL_SERVICE,record:Fe(Fe({},r),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(i<0||i>=this.state.joinChannelServiceRecords.length||this.dispatch({type:Ct.RECORD_JOIN_CHANNEL_SERVICE,record:r,index:i}),i)}catch{return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:Ct.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:Ct.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch{return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(r){this.dispatch({type:Ct.AVOID_JOIN_START,avoidJoinStart:r})}}let dg;const vX=()=>(dg||dg||(dg=(window.location.protocol.split(":")[0]||"").toUpperCase(),dg))==="HTTPS",h2=()=>window.isSecureContext!==void 0;function EX(n){let r=m2();return function(i,s){let l=i.appId;l!==void 0&&(jt(s,10),Us(s,l));let d=i.cid;d!==void 0&&(jt(s,16),jt(s,d));let p=i.cname;p!==void 0&&(jt(s,26),Us(s,p));let v=i.deviceId;v!==void 0&&(jt(s,34),Us(s,v));let E=i.elapse;E!==void 0&&(jt(s,40),cl(s,E));let T=i.fileSize;T!==void 0&&(jt(s,48),cl(s,Fd(T)));let C=i.height;C!==void 0&&(jt(s,56),cl(s,Fd(C)));let R=i.jpg;R!==void 0&&(jt(s,66),jt(s,R.length),function(ro,ge){let Ce=Vd(ro,ge.length);ro.bytes.set(ge,Ce)}(s,R));let L=i.networkType;L!==void 0&&(jt(s,72),cl(s,Fd(L)));let j=i.osType;j!==void 0&&(jt(s,80),cl(s,Fd(j)));let Y=i.requestId;Y!==void 0&&(jt(s,90),Us(s,Y));let q=i.sdkVersion;q!==void 0&&(jt(s,98),Us(s,q));let X=i.sequence;X!==void 0&&(jt(s,104),cl(s,Fd(X)));let le=i.sid;le!==void 0&&(jt(s,114),Us(s,le));let he=i.timestamp;he!==void 0&&(jt(s,120),cl(s,he));let ye=i.uid;ye!==void 0&&(jt(s,128),jt(s,ye));let ke=i.vid;ke!==void 0&&(jt(s,136),jt(s,ke));let be=i.width;be!==void 0&&(jt(s,144),cl(s,Fd(be)));let Te=i.service;Te!==void 0&&(jt(s,152),jt(s,Te));let Se=i.callbackData;Se!==void 0&&(jt(s,162),Us(s,Se));let Oe=i.jpgEncryption;Oe!==void 0&&(jt(s,168),jt(s,Oe));let Bt=i.requestType;Bt!==void 0&&(jt(s,176),jt(s,Bt));let We=i.scorePorn;We!==void 0&&(jt(s,185),UC(s,We));let ln=i.scoreSexy;ln!==void 0&&(jt(s,193),UC(s,ln));let en=i.scoreNeutral;en!==void 0&&(jt(s,201),UC(s,en));let Yn=i.scene;Yn!==void 0&&(jt(s,208),jt(s,Yn));let Br=i.ossFilePrefix;Br!==void 0&&(jt(s,218),Us(s,Br));let Bn=i.serviceVendor;if(Bn!==void 0)for(let ro of Bn){jt(s,226);let ge=m2();yX(ro,ge),jt(s,ge.limit),RX(s,ge),TX(ge)}}(n,r),function(i){let s=i.bytes,l=i.limit;return s.length===l?s:s.subarray(0,l)}(r)}function _X(n){return function(i){let s={};e:for(;!g2(i);){let l=Fs(i);switch(l>>>3){case 0:break e;case 1:s.code=Fs(i);break;case 2:s.msg=v2(i,Fs(i));break;case 3:{let d=CX(i);s.data=SX(i),i.limit=d;break}default:p2(i,7&l)}}return s}({bytes:r=n,offset:0,limit:r.length});var r}function SX(n){let r={};e:for(;!g2(n);){let i=Fs(n);switch(i>>>3){case 0:break e;case 1:r.requestId=v2(n,Fs(n));break;case 2:r.requestType=Fs(n)>>>0;break;case 3:r.scorePorn=MC(n);break;case 4:r.scoreSexy=MC(n);break;case 5:r.scoreNeutral=MC(n);break;case 6:r.requestScene=Fs(n)>>>0;break;case 7:r.scene=Fs(n)>>>0;break;default:p2(n,7&i)}}return r}function yX(n,r){let i=n.service;i!==void 0&&(jt(r,8),jt(r,i));let s=n.vendor;s!==void 0&&(jt(r,16),jt(r,s));let l=n.token;l!==void 0&&(jt(r,26),Us(r,l));let d=n.callbackUrl;d!==void 0&&(jt(r,34),Us(r,d))}function CX(n){let r=Fs(n),i=n.limit;return n.limit=n.offset+r,i}function p2(n,r){switch(r){case 0:for(;128&E2(n););break;case 2:kC(n,Fs(n));break;case 5:kC(n,4);break;case 1:kC(n,8);break;default:throw new Error("Unimplemented type: "+r)}}let bX=new Float32Array(1);new Uint8Array(bX.buffer);let DC=new Float64Array(1),no=new Uint8Array(DC.buffer);function Fd(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}let f2=[];function m2(){const n=f2.pop();return n?(n.offset=n.limit=0,n):{bytes:new Uint8Array(64),offset:0,limit:0}}function TX(n){f2.push(n)}function kC(n,r){if(n.offset+r>n.limit)throw new Error("Skip past limit");n.offset+=r}function g2(n){return n.offset>=n.limit}function Vd(n,r){let i=n.bytes,s=n.offset,l=n.limit,d=s+r;if(d>i.length){let p=new Uint8Array(2*d);p.set(i),n.bytes=p}return n.offset=d,d>l&&(n.limit=d),s}function LC(n,r){let i=n.offset;if(i+r>n.limit)throw new Error("Read past limit");return n.offset+=r,i}function v2(n,r){let i=LC(n,r),s=String.fromCharCode,l=n.bytes,d="�",p="";for(let v=0;v<r;v++){let E,T,C,R,L=l[v+i];128&L?(224&L)==192?v+1>=r?p+=d:(E=l[v+i+1],(192&E)!=128?p+=d:(R=(31&L)<<6|63&E,R<128?p+=d:(p+=s(R),v++))):(240&L)==224?v+2>=r?p+=d:(E=l[v+i+1],T=l[v+i+2],(49344&(E|T<<8))!=32896?p+=d:(R=(15&L)<<12|(63&E)<<6|63&T,R<2048||R>=55296&&R<=57343?p+=d:(p+=s(R),v+=2))):(248&L)==240?v+3>=r?p+=d:(E=l[v+i+1],T=l[v+i+2],C=l[v+i+3],(12632256&(E|T<<8|C<<16))!=8421504?p+=d:(R=(7&L)<<18|(63&E)<<12|(63&T)<<6|63&C,R<65536||R>1114111?p+=d:(R-=65536,p+=s(55296+(R>>10),56320+(1023&R)),v+=3))):p+=d:p+=s(L)}return p}function Us(n,r){let i=r.length,s=0;for(let p=0;p<i;p++){let v=r.charCodeAt(p);v>=55296&&v<=56319&&p+1<i&&(v=(v<<10)+r.charCodeAt(++p)-56613888),s+=v<128?1:v<2048?2:v<65536?3:4}jt(n,s);let l=Vd(n,s),d=n.bytes;for(let p=0;p<i;p++){let v=r.charCodeAt(p);v>=55296&&v<=56319&&p+1<i&&(v=(v<<10)+r.charCodeAt(++p)-56613888),v<128?d[l++]=v:(v<2048?d[l++]=v>>6&31|192:(v<65536?d[l++]=v>>12&15|224:(d[l++]=v>>18&7|240,d[l++]=v>>12&63|128),d[l++]=v>>6&63|128),d[l++]=63&v|128)}}function RX(n,r){let i=Vd(n,r.limit),s=n.bytes,l=r.bytes;for(let d=0,p=r.limit;d<p;d++)s[d+i]=l[d]}function E2(n){return n.bytes[LC(n,1)]}function _2(n,r){let i=Vd(n,1);n.bytes[i]=r}function MC(n){let r=LC(n,8),i=n.bytes;return no[0]=i[r++],no[1]=i[r++],no[2]=i[r++],no[3]=i[r++],no[4]=i[r++],no[5]=i[r++],no[6]=i[r++],no[7]=i[r++],DC[0]}function UC(n,r){let i=Vd(n,8),s=n.bytes;DC[0]=r,s[i++]=no[0],s[i++]=no[1],s[i++]=no[2],s[i++]=no[3],s[i++]=no[4],s[i++]=no[5],s[i++]=no[6],s[i++]=no[7]}function Fs(n){let r,i=0,s=0;do r=E2(n),i<32&&(s|=(127&r)<<i),i+=7;while(128&r);return s}function jt(n,r){for(r>>>=0;r>=128;)_2(n,127&r|128),r>>>=7;_2(n,r)}function cl(n,r){let i=r.low>>>0,s=(r.low>>>28|r.high<<4)>>>0,l=r.high>>>24,d=l===0?s===0?i<16384?i<128?1:2:i<1<<21?3:4:s<16384?s<128?5:6:s<1<<21?7:8:l<128?9:10,p=Vd(n,d),v=n.bytes;switch(d){case 10:v[p+9]=l>>>7&1;case 9:v[p+8]=d!==9?128|l:127&l;case 8:v[p+7]=d!==8?s>>>21|128:s>>>21&127;case 7:v[p+6]=d!==7?s>>>14|128:s>>>14&127;case 6:v[p+5]=d!==6?s>>>7|128:s>>>7&127;case 5:v[p+4]=d!==5?128|s:127&s;case 4:v[p+3]=d!==4?i>>>21|128:i>>>21&127;case 3:v[p+2]=d!==3?i>>>14|128:i>>>14&127;case 2:v[p+1]=d!==2?i>>>7|128:i>>>7&127;case 1:v[p]=d!==1?128|i:127&i}}const IX=async(n,r,i)=>{const s=function(p){const v=[];for(let E=0;E<p.length;E+=2)v.push(parseInt(p.slice(E,E+2),16));return Uint8Array.from(v)}(function(p){const v="0123456789abcdef";function E(Bt){let We,ln="";for(We=0;We<=3;We++)ln+=v.charAt(Bt>>8*We+4&15)+v.charAt(Bt>>8*We&15);return ln}function T(Bt,We){const ln=(65535&Bt)+(65535&We);return(Bt>>16)+(We>>16)+(ln>>16)<<16|65535&ln}function C(Bt,We,ln,en,Yn,Br){return T(function(Bn,ro){return Bn<<ro|Bn>>>32-ro}(T(T(We,Bt),T(en,Br)),Yn),ln)}function R(Bt,We,ln,en,Yn,Br,Bn){return C(We&ln|~We&en,Bt,We,Yn,Br,Bn)}function L(Bt,We,ln,en,Yn,Br,Bn){return C(We&en|ln&~en,Bt,We,Yn,Br,Bn)}function j(Bt,We,ln,en,Yn,Br,Bn){return C(We^ln^en,Bt,We,Yn,Br,Bn)}function Y(Bt,We,ln,en,Yn,Br,Bn){return C(ln^(We|~en),Bt,We,Yn,Br,Bn)}const q=function(Bt){let We;const ln=1+(Bt.length+8>>6),en=new Array(16*ln);for(We=0;We<16*ln;We++)en[We]=0;for(We=0;We<Bt.length;We++)en[We>>2]|=Bt.charCodeAt(We)<<We%4*8;return en[We>>2]|=128<<We%4*8,en[16*ln-2]=8*Bt.length,en}(p);let X,le,he,ye,ke,be=1732584193,Te=-271733879,Se=-1732584194,Oe=271733878;for(X=0;X<q.length;X+=16)le=be,he=Te,ye=Se,ke=Oe,be=R(be,Te,Se,Oe,q[X+0],7,-680876936),Oe=R(Oe,be,Te,Se,q[X+1],12,-389564586),Se=R(Se,Oe,be,Te,q[X+2],17,606105819),Te=R(Te,Se,Oe,be,q[X+3],22,-1044525330),be=R(be,Te,Se,Oe,q[X+4],7,-176418897),Oe=R(Oe,be,Te,Se,q[X+5],12,1200080426),Se=R(Se,Oe,be,Te,q[X+6],17,-1473231341),Te=R(Te,Se,Oe,be,q[X+7],22,-45705983),be=R(be,Te,Se,Oe,q[X+8],7,1770035416),Oe=R(Oe,be,Te,Se,q[X+9],12,-1958414417),Se=R(Se,Oe,be,Te,q[X+10],17,-42063),Te=R(Te,Se,Oe,be,q[X+11],22,-1990404162),be=R(be,Te,Se,Oe,q[X+12],7,1804603682),Oe=R(Oe,be,Te,Se,q[X+13],12,-40341101),Se=R(Se,Oe,be,Te,q[X+14],17,-1502002290),Te=R(Te,Se,Oe,be,q[X+15],22,1236535329),be=L(be,Te,Se,Oe,q[X+1],5,-165796510),Oe=L(Oe,be,Te,Se,q[X+6],9,-1069501632),Se=L(Se,Oe,be,Te,q[X+11],14,643717713),Te=L(Te,Se,Oe,be,q[X+0],20,-373897302),be=L(be,Te,Se,Oe,q[X+5],5,-701558691),Oe=L(Oe,be,Te,Se,q[X+10],9,38016083),Se=L(Se,Oe,be,Te,q[X+15],14,-660478335),Te=L(Te,Se,Oe,be,q[X+4],20,-405537848),be=L(be,Te,Se,Oe,q[X+9],5,568446438),Oe=L(Oe,be,Te,Se,q[X+14],9,-1019803690),Se=L(Se,Oe,be,Te,q[X+3],14,-187363961),Te=L(Te,Se,Oe,be,q[X+8],20,1163531501),be=L(be,Te,Se,Oe,q[X+13],5,-1444681467),Oe=L(Oe,be,Te,Se,q[X+2],9,-51403784),Se=L(Se,Oe,be,Te,q[X+7],14,1735328473),Te=L(Te,Se,Oe,be,q[X+12],20,-1926607734),be=j(be,Te,Se,Oe,q[X+5],4,-378558),Oe=j(Oe,be,Te,Se,q[X+8],11,-2022574463),Se=j(Se,Oe,be,Te,q[X+11],16,1839030562),Te=j(Te,Se,Oe,be,q[X+14],23,-35309556),be=j(be,Te,Se,Oe,q[X+1],4,-1530992060),Oe=j(Oe,be,Te,Se,q[X+4],11,1272893353),Se=j(Se,Oe,be,Te,q[X+7],16,-155497632),Te=j(Te,Se,Oe,be,q[X+10],23,-1094730640),be=j(be,Te,Se,Oe,q[X+13],4,681279174),Oe=j(Oe,be,Te,Se,q[X+0],11,-358537222),Se=j(Se,Oe,be,Te,q[X+3],16,-722521979),Te=j(Te,Se,Oe,be,q[X+6],23,76029189),be=j(be,Te,Se,Oe,q[X+9],4,-640364487),Oe=j(Oe,be,Te,Se,q[X+12],11,-421815835),Se=j(Se,Oe,be,Te,q[X+15],16,530742520),Te=j(Te,Se,Oe,be,q[X+2],23,-995338651),be=Y(be,Te,Se,Oe,q[X+0],6,-198630844),Oe=Y(Oe,be,Te,Se,q[X+7],10,1126891415),Se=Y(Se,Oe,be,Te,q[X+14],15,-1416354905),Te=Y(Te,Se,Oe,be,q[X+5],21,-57434055),be=Y(be,Te,Se,Oe,q[X+12],6,1700485571),Oe=Y(Oe,be,Te,Se,q[X+3],10,-1894986606),Se=Y(Se,Oe,be,Te,q[X+10],15,-1051523),Te=Y(Te,Se,Oe,be,q[X+1],21,-2054922799),be=Y(be,Te,Se,Oe,q[X+8],6,1873313359),Oe=Y(Oe,be,Te,Se,q[X+15],10,-30611744),Se=Y(Se,Oe,be,Te,q[X+6],15,-1560198380),Te=Y(Te,Se,Oe,be,q[X+13],21,1309151649),be=Y(be,Te,Se,Oe,q[X+4],6,-145523070),Oe=Y(Oe,be,Te,Se,q[X+11],10,-1120210379),Se=Y(Se,Oe,be,Te,q[X+2],15,718787259),Te=Y(Te,Se,Oe,be,q[X+9],21,-343485551),be=T(be,le),Te=T(Te,he),Se=T(Se,ye),Oe=T(Oe,ke);return E(be)+E(Te)+E(Se)+E(Oe)}(""+r+i)).slice(0,16),l=s.slice(0,12),d=await window.crypto.subtle.importKey("raw",s,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:l},d,n))},S2=async(n,r,i)=>await IX(n.buffer,r,i);function y2(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}const wX=new Map([["moderation",1],["supervise",2]]);class hg extends In{get connectionState(){return this._connectionState}set connectionState(r){if(this._connectionState===r)return;const i=this._connectionState;this._connectionState=r,this.emit(lr.CONNECTION_STATE_CHANGE,i,r)}get inspectType(){return this._inspectType}set inspectType(r){var i;this._inspectMode=Gc(i=r.map(s=>wX.get(s)||0)).call(i,(s,l)=>s+l),this._inspectType=r}get quality(){return this._quality}set quality(r){this._quality=r>1?1:r<.1?.1:r,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(r){super(),N(this,"name","AgoraRTCVideoContentInspect"),N(this,"_connectionState",Po.CONNECTING),N(this,"_innerConnectionState",void 0),N(this,"sequence",0),N(this,"inspectStartTime",void 0),N(this,"workerManagerConnection",void 0),N(this,"workerConnection",void 0),N(this,"workerMessageLengthLimit",void 0),N(this,"inspectIntervalMinimum",void 0),N(this,"qualityRatio",void 0),N(this,"_connectInfo",void 0),N(this,"_cancelTokenSource",Ao.CancelToken.source()),N(this,"_retryConfig",void 0),N(this,"wmSequence",0),N(this,"inspectInterval",void 0),N(this,"inspectTimer",null),N(this,"ossFilePrefix",void 0),N(this,"extraInfo",void 0),N(this,"_inspectType",void 0),N(this,"_inspectMode",void 0),N(this,"_quality",1),N(this,"qualityTimer",null),N(this,"_inspectId",void 0),N(this,"_needWorkUrlOnly",!1),N(this,"inspectImage",()=>{if(this.connectionState!==Po.CONNECTED)throw new Q(W.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===Po.CONNECTED?this.requestToInspectImage():U.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=fn(5,"inspect-"),this.workerMessageLengthLimit=ie("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=ie("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=ie("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=r.interval,this.ossFilePrefix=r.ossFilePrefix,this.extraInfo=r.extraInfo,this.inspectType=r.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new du("worker-manager-"+this._inspectId,Qn),this.on(lr.STATE_CHANGE,(i,s)=>{this._innerConnectionState=i,U.debug("[".concat(this._inspectId,"] Inspect operation :").concat(Do[i]," ").concat(s||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new du("worker-"+this._inspectId,Qn),this.handleWorkerEvents()}async init(r,i){this.emit(lr.STATE_CHANGE,Do.CONNECT_AP),this._connectInfo=r;const s=this._cancelTokenSource.token;return this._retryConfig=i,new Pe((l,d)=>{this.on(lr.CONNECTION_STATE_CHANGE,(p,v)=>{v===Po.CONNECTED&&l()}),this.requestAP(r,s,i).then(p=>{this.connectWorkerManager(p)}).catch(p=>{d(p)})})}async requestAP(r,i,s){const l=ie("WEBCS_DOMAIN").map(v=>"https://".concat(v,"/api/v1")),d=await function(v,E,T,C){let{appId:R,areaCode:L,cname:j,sid:Y,token:q,uid:X}=E;Pd++;const le="image_moderation_api",he={service_name:le,json_body:JSON.stringify({appId:R,areaCode:L,cname:j,command:"allocateEdge",requestId:Pd,seq:Pd,sid:Y,token:q,ts:Date.now(),uid:X+""})};let ye,ke,be=v[0];return es(async()=>{ye=Date.now();const Te=await wa(be,{data:he,cancelToken:T,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(ke=Date.now()-ye,Te.code!==0){const We=new Q(W.UNEXPECTED_RESPONSE,"image inspect ap error, code"+Te.code,{retry:!0,responseTime:ke});throw U.error(We.toString()),We}const Se=JSON.parse(Te.json_body);if(Se.code!==200){const We=new Q(W.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(Se.code,", reason: ").concat(Se.reason),{code:Se.code,responseTime:ke});throw U.error(We.toString()),We}if(!Se.servers||!Array.isArray(Se.servers)||Se.servers.length===0){const We=new Q(W.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:Se.code,responseTime:ke});throw U.error(We.toString()),We}const Oe=ie("VIDEO_INSPECT_WORKER_MANAGER_HOST"),Bt=ie("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:Se.servers.map(We=>{let{address:ln,wss:en}=We;if(ln&&en)return"wss://".concat(ln.replace(/\./g,"-"),".").concat(Oe,":").concat(Bt||en)}).filter(We=>!!We),workerToken:Se.workerToken,vid:Se.vid,responseTime:ke}},(Te,Se)=>(Ue.apworkerEvent(Y,{success:!0,sc:200,serviceName:le,responseDetail:JSON.stringify(Te.addressList),firstSuccess:Se===0,responseTime:ke,serverIp:v[Se%v.length]}),!1),(Te,Se)=>(Ue.apworkerEvent(Y,{success:!1,sc:Te.data&&Te.data.code||200,serviceName:le,responseTime:ke,serverIp:v[Se%v.length]}),!!(Te.code!==W.OPERATION_ABORTED&&Te.code!==W.UNEXPECTED_RESPONSE||Te.data&&Te.data.retry)&&(be=v[(Se+1)%v.length],!0)),C)}(l,r,i,s);this.emit(lr.STATE_CHANGE,Do.AP_CONNECTED);const{addressList:p}=d;return this.wmSequence++,p}async connectWorkerManager(r){let i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this._needWorkUrlOnly=i,this.emit(lr.STATE_CHANGE,Do.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(r,1e4)}async connectWorker(r){await this.workerConnection.init([r])}handleWorkerManagerEvents(){this.workerManagerConnection.on(it.CONNECTED,async()=>{this.emit(lr.STATE_CHANGE,Do.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.18.2",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on(it.CLOSED,()=>{this._innerConnectionState<Do.GET_WORKER_MANAGER_RESPONSE&&U.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on(it.FAILED,()=>{this._innerConnectionState<Do.GET_WORKER_MANAGER_RESPONSE&&U.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on(it.RECONNECTING,()=>{this._innerConnectionState<Do.GET_WORKER_MANAGER_RESPONSE&&U.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on(it.ON_MESSAGE,async r=>{this.emit(lr.STATE_CHANGE,Do.GET_WORKER_MANAGER_RESPONSE);const i=this.workerManagerConnection.url;this.workerManagerConnection.close();const s=JSON.parse(r.data);if(s.code!==200)throw U.error("[".concat(this._inspectId,"] Unexpected code ").concat(s.code," from worker manager")),new Q(W.UNEXPECTED_RESPONSE,"response code of worker is unexpected",s);if(!(s.serverResponse&&s.serverResponse.portWss&&i))throw U.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(s))),new Q(W.UNEXPECTED_RESPONSE,"response content of worker is unexpected",s);{const l=ie("VIDEO_INSPECT_WORKER_PORT")||s.serverResponse.portWss,d=i.replace(/:\d+\/?$/,":".concat(l));this.emit(lr.STATE_CHANGE,Do.CONNECT_WORKER,d),this._needWorkUrlOnly?this.emit(lr.REQUEST_NEW_WORKER_URL,d):await this.connectWorker(d)}}),this.workerManagerConnection.on(it.WILL_RECONNECT,(r,i)=>{i(r)}),this.workerManagerConnection.on(it.REQUEST_NEW_URLS,(r,i)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(r).catch(i)})}handleWorkerEvents(){this.workerConnection.on(it.CONNECTED,async()=>{this.emit(lr.STATE_CHANGE,Do.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=Po.CONNECTED}),this.workerConnection.on(it.ON_MESSAGE,async r=>{if(r.data instanceof ArrayBuffer){const s=_X(new Uint8Array(r.data));if(ie("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&U.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(s)),s.code===200){if(Array.isArray(this.inspectType)&&this.inspectType.length===1&&this.inspectType[0]==="supervise")return void this.emit(lr.INSPECT_RESULT,void 0,void 0);if(s.data&&s.data.scorePorn&&s.data.scoreSexy&&s.data.scoreNeutral){var i;const l={porn:s.data.scorePorn,sexy:s.data.scoreSexy,neutral:s.data.scoreNeutral},d=Gc(i=Object.keys(l)).call(i,(v,E)=>l[v]>l[E]?v:E,"porn"),p=Object.keys(l).find(v=>v===d);this.emit(lr.INSPECT_RESULT,p)}else this.emit(lr.INSPECT_RESULT,void 0,new Q(W.UNEXPECTED_RESPONSE,s.code+"","There is an unexpected data on message"))}else this.emit(lr.INSPECT_RESULT,void 0,new Q(W.UNEXPECTED_RESPONSE,s.code+"",s.msg))}else U.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(lr.INSPECT_RESULT,void 0,new Q(W.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on(it.CLOSED,()=>{this.connectionState=Po.CLOSED}),this.workerConnection.on(it.FAILED,()=>{this.connectionState=Po.CLOSED}),this.workerConnection.on(it.RECONNECTING,()=>{this.connectionState=this.connectionState===Po.CONNECTED?Po.RECONNECTING:Po.CONNECTING}),this.workerConnection.on(it.WILL_RECONNECT,(r,i)=>{r==="recover"&&i(r),i("tryNext")}),this.workerConnection.on(it.REQUEST_NEW_URLS,(r,i)=>{this.workerManagerConnection.close(),this.once(lr.REQUEST_NEW_WORKER_URL,s=>{r([s])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(s=>{this.connectWorkerManager(s,!0)}).catch(s=>{i(s)})})}static intToLong(r){return{low:r|=0,high:r>>31,unsigned:r>=0}}async requestToInspectImage(){this.sequence++;const r=Aa(this,lr.CLIENT_LOCAL_VIDEO_TRACK),i={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(r){if(!r.isPlaying)return void this.emit(lr.INSPECT_RESULT,void 0,new Q(W.INVALID_OPERATION,"Only the track being played can be inspected"));const s=await this.generateRequestData(r,i);this.workerConnection.sendMessage(s,!0,!0)}else this.emit(lr.INSPECT_RESULT,void 0,new Q(W.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(r,i){let{appId:s,cname:l,cid:d,vid:p,sid:v,uid:E}=i;const T=Date.now(),C=await r.getCurrentFrameImage("image/jpeg",this.quality),R=await S2(C,s,l),L=this.sequence+"-"+d+"-"+E+"-"+T+"-"+fn(12,""),j={appId:s,cid:d,cname:l,deviceId:"",elapse:hg.intToLong(Number(T-this.inspectStartTime)),fileSize:R.byteLength,jpgEncryption:2,height:C.height,width:C.width,jpg:R,networkType:6,osType:7,requestId:L,sdkVersion:"4.18.2",sequence:this.sequence,sid:v,timestamp:hg.intToLong(T),uid:E,vid:p,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};this.extraInfo===void 0&&delete j.callbackData,this.ossFilePrefix===void 0&&delete j.ossFilePrefix;const Y=EX(j);if(Y.byteLength<this.workerMessageLengthLimit){if(ie("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const q=function(X){for(var le=1;le<arguments.length;le++){var he=arguments[le]!=null?arguments[le]:{};le%2?y2(Object(he),!0).forEach(function(ye){N(X,ye,he[ye])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(he)):y2(Object(he)).forEach(function(ye){Object.defineProperty(X,ye,Object.getOwnPropertyDescriptor(he,ye))})}return X}({},j);delete q.jpg,U.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(q))}return Y}{const q=this.quality*this.qualityRatio;return this.quality=q,await this.generateRequestData(r,{appId:s,cname:l,cid:d,vid:p,sid:v,uid:E})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Ao.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=Po.CLOSED,this.emit(lr.STATE_CHANGE,Do.CLOSED)}}function OX(n){let r=function(){const i=xX.pop();return i?(i.offset=i.limit=0,i):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(i,s){let l=i.appId;l!==void 0&&(Kn(s,10),gu(s,l));let d=i.cid;d!==void 0&&(Kn(s,16),Kn(s,d));let p=i.cname;p!==void 0&&(Kn(s,26),gu(s,p));let v=i.deviceId;v!==void 0&&(Kn(s,34),gu(s,v));let E=i.elapse;E!==void 0&&(Kn(s,40),ll(s,E));let T=i.fileSize;T!==void 0&&(Kn(s,48),ll(s,jd(T)));let C=i.height;C!==void 0&&(Kn(s,56),ll(s,jd(C)));let R=i.jpg;R!==void 0&&(Kn(s,66),Kn(s,R.length),b2(s,R));let L=i.networkType;L!==void 0&&(Kn(s,72),ll(s,jd(L)));let j=i.osType;j!==void 0&&(Kn(s,80),ll(s,jd(j)));let Y=i.requestId;Y!==void 0&&(Kn(s,90),gu(s,Y));let q=i.sdkVersion;q!==void 0&&(Kn(s,98),gu(s,q));let X=i.sequence;X!==void 0&&(Kn(s,104),ll(s,jd(X)));let le=i.sid;le!==void 0&&(Kn(s,114),gu(s,le));let he=i.timestamp;he!==void 0&&(Kn(s,120),ll(s,he));let ye=i.uid;ye!==void 0&&(Kn(s,128),Kn(s,ye));let ke=i.vid;ke!==void 0&&(Kn(s,136),Kn(s,ke));let be=i.width;be!==void 0&&(Kn(s,144),ll(s,jd(be)));let Te=i.service;Te!==void 0&&(Kn(s,152),Kn(s,Te));let Se=i.callbackData;Se!==void 0&&(Kn(s,162),Kn(s,Se.length),b2(s,Se));let Oe=i.ticket;Oe!==void 0&&(Kn(s,170),gu(s,Oe))}(n,r),function(i){let s=i.bytes,l=i.limit;return s.length===l?s:s.subarray(0,l)}(r)}function AX(n){return function(i){let s={};e:for(;!PX(i);){let l=zp(i);switch(l>>>3){case 0:break e;case 1:s.code=zp(i);break;case 2:s.msg=T2(i,zp(i));break;case 3:s.requestId=T2(i,zp(i));break;case 4:s.timestamp=DX(i,!1);break;default:NX(i,7&l)}}return s}({bytes:r=n,offset:0,limit:r.length});var r}function NX(n,r){switch(r){case 0:for(;128&Da(n););break;case 2:FC(n,zp(n));break;case 5:FC(n,4);break;case 1:FC(n,8);break;default:throw new Error("Unimplemented type: "+r)}}function jd(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}let xX=[];function FC(n,r){if(n.offset+r>n.limit)throw new Error("Skip past limit");n.offset+=r}function PX(n){return n.offset>=n.limit}function pg(n,r){let i=n.bytes,s=n.offset,l=n.limit,d=s+r;if(d>i.length){let p=new Uint8Array(2*d);p.set(i),n.bytes=p}return n.offset=d,d>l&&(n.limit=d),s}function C2(n,r){let i=n.offset;if(i+r>n.limit)throw new Error("Read past limit");return n.offset+=r,i}function b2(n,r){let i=pg(n,r.length);n.bytes.set(r,i)}function T2(n,r){let i=C2(n,r),s=String.fromCharCode,l=n.bytes,d="�",p="";for(let v=0;v<r;v++){let E,T,C,R,L=l[v+i];128&L?(224&L)==192?v+1>=r?p+=d:(E=l[v+i+1],(192&E)!=128?p+=d:(R=(31&L)<<6|63&E,R<128?p+=d:(p+=s(R),v++))):(240&L)==224?v+2>=r?p+=d:(E=l[v+i+1],T=l[v+i+2],(49344&(E|T<<8))!=32896?p+=d:(R=(15&L)<<12|(63&E)<<6|63&T,R<2048||R>=55296&&R<=57343?p+=d:(p+=s(R),v+=2))):(248&L)==240?v+3>=r?p+=d:(E=l[v+i+1],T=l[v+i+2],C=l[v+i+3],(12632256&(E|T<<8|C<<16))!=8421504?p+=d:(R=(7&L)<<18|(63&E)<<12|(63&T)<<6|63&C,R<65536||R>1114111?p+=d:(R-=65536,p+=s(55296+(R>>10),56320+(1023&R)),v+=3))):p+=d:p+=s(L)}return p}function gu(n,r){let i=r.length,s=0;for(let p=0;p<i;p++){let v=r.charCodeAt(p);v>=55296&&v<=56319&&p+1<i&&(v=(v<<10)+r.charCodeAt(++p)-56613888),s+=v<128?1:v<2048?2:v<65536?3:4}Kn(n,s);let l=pg(n,s),d=n.bytes;for(let p=0;p<i;p++){let v=r.charCodeAt(p);v>=55296&&v<=56319&&p+1<i&&(v=(v<<10)+r.charCodeAt(++p)-56613888),v<128?d[l++]=v:(v<2048?d[l++]=v>>6&31|192:(v<65536?d[l++]=v>>12&15|224:(d[l++]=v>>18&7|240,d[l++]=v>>12&63|128),d[l++]=v>>6&63|128),d[l++]=63&v|128)}}function Da(n){return n.bytes[C2(n,1)]}function R2(n,r){let i=pg(n,1);n.bytes[i]=r}function zp(n){let r,i=0,s=0;do r=Da(n),i<32&&(s|=(127&r)<<i),i+=7;while(128&r);return s}function Kn(n,r){for(r>>>=0;r>=128;)R2(n,127&r|128),r>>>=7;R2(n,r)}function DX(n,r){let i,s=0,l=0,d=0;return i=Da(n),s=127&i,128&i&&(i=Da(n),s|=(127&i)<<7,128&i&&(i=Da(n),s|=(127&i)<<14,128&i&&(i=Da(n),s|=(127&i)<<21,128&i&&(i=Da(n),l=127&i,128&i&&(i=Da(n),l|=(127&i)<<7,128&i&&(i=Da(n),l|=(127&i)<<14,128&i&&(i=Da(n),l|=(127&i)<<21,128&i&&(i=Da(n),d=127&i,128&i&&(i=Da(n),d|=(127&i)<<7))))))))),{low:s|l<<28,high:l>>>4|d<<24,unsigned:r}}function ll(n,r){let i=r.low>>>0,s=(r.low>>>28|r.high<<4)>>>0,l=r.high>>>24,d=l===0?s===0?i<16384?i<128?1:2:i<1<<21?3:4:s<16384?s<128?5:6:s<1<<21?7:8:l<128?9:10,p=pg(n,d),v=n.bytes;switch(d){case 10:v[p+9]=l>>>7&1;case 9:v[p+8]=d!==9?128|l:127&l;case 8:v[p+7]=d!==8?s>>>21|128:s>>>21&127;case 7:v[p+6]=d!==7?s>>>14|128:s>>>14&127;case 6:v[p+5]=d!==6?s>>>7|128:s>>>7&127;case 5:v[p+4]=d!==5?128|s:127&s;case 4:v[p+3]=d!==4?i>>>21|128:i>>>21&127;case 3:v[p+2]=d!==3?i>>>14|128:i>>>14&127;case 2:v[p+1]=d!==2?i>>>7|128:i>>>7&127;case 1:v[p]=d!==1?128|i:127&i}}const I2={},w2={},O2=4294967296,A2=18446744073709552e3,N2=A2/2,VC=P2(0,!0),x2=P2(0),kX=Bd(0,-2147483648,!1),LX=Bd(-1,2147483647,!1),MX=Bd(-1,-1,!0);function P2(n,r){let i,s,l;return r?(l=0<=(n>>>=0)&&n<256)&&(s=w2[n],s)?s:(i=Bd(n,0,!0),l&&(w2[n]=i),i):(l=-128<=(n|=0)&&n<128)&&(s=I2[n],s)?s:(i=Bd(n,n<0?-1:0,!1),l&&(I2[n]=i),i)}function Bd(n,r,i){return{low:0|n,high:0|r,unsigned:!!i}}function UX(n,r){if(isNaN(n))return r?VC:x2;if(r){if(n<0)return VC;if(n>=A2)return MX}else{if(n<=-N2)return kX;if(n+1>=N2)return LX}return n<0?r?VC:x2:Bd(n%O2|0,n/O2|0,r)}function D2(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}class jC extends In{get connectionState(){return this._connectionState}set connectionState(r){if(this._connectionState===r)return;const i=this._connectionState;this._connectionState=r,this.emit(ea.CONNECTION_STATE_CHANGE,r,i)}get quality(){return this._quality}set quality(r){this._quality=r>1?1:r<.1?.1:r,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this._qualityRatio},6e4))}constructor(r){var i;super(),N(this,"name","AgoraRTCImageModeration"),N(this,"_connectionState",go.CONNECTING),N(this,"_sequence",0),N(this,"_moderationStartTime",void 0),N(this,"_workerConnection",void 0),N(this,"_workerMessageLengthLimit",void 0),N(this,"_qualityRatio",void 0),N(this,"_connectInfo",void 0),N(this,"_cancelTokenSource",Ao.CancelToken.source()),N(this,"_retryConfig",void 0),N(this,"_moderationInterval",void 0),N(this,"_moderationTimer",null),N(this,"_moderationMode",1),N(this,"_quality",1),N(this,"_qualityTimer",null),N(this,"_ticket",void 0),N(this,"_moderationIntervalMinimum",void 0),N(this,"_uploadFailedNum",0),N(this,"_uploadNum",0),N(this,"_uploadTimer",null),N(this,"_moderationId",void 0),N(this,"inspectImage",()=>{if(this.connectionState!==go.CONNECTED)throw new Q(W.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval(()=>{this.connectionState===go.CONNECTED?this.requestToInspectImage():U.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)},this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()}),this._moderationId=fn(5,"image-moderation-"),this._workerMessageLengthLimit=ie("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=ie("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=(i=r.interval)!==null&&i!==void 0?i:1e3,this._qualityRatio=ie("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new du("worker-"+this._moderationId,Qn),this.on(ea.STATE_CHANGE,(s,l)=>{U.debug("[".concat(this._moderationId,"] Moderation operation :").concat(el[s]," ").concat(l||""))}),this.handleWorkerEvents()}async init(r,i){this.emit(ea.STATE_CHANGE,el.CONNECT_AP),this._connectInfo=r;const s=this._cancelTokenSource.token;return this._retryConfig=i,new Pe((l,d)=>{this.on(ea.CONNECTION_STATE_CHANGE,(p,v)=>{p===go.CONNECTED&&l()}),this.requestAP(r,s,i).then(p=>{this.connectWorker(p)}).catch(p=>{d(p)})})}updateConfig(r){var i;this._moderationInterval=(i=r.interval)!==null&&i!==void 0?i:1e3,U.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(r))),this.connectionState===go.CONNECTED&&this.inspectImage()}async requestAP(r,i,s){const l=ie("WEBCS_DOMAIN").map(E=>"https://".concat(E,"/api/v1")),d=await function(E,T,C,R){let{appId:L,areaCode:j,cname:Y,sid:q,token:X,uid:le}=T;Pd++;const he="moderation_plugin",ye={service_name:he,json_body:JSON.stringify({appId:L,areaCode:j,cname:Y,command:"allocateEdge",requestId:Pd,seq:Pd,sid:q,appToken:X,ts:Date.now(),uid:le+""})};let ke,be,Te=E[0];return es(async()=>{ke=Date.now();const Se=await wa(Te,{data:ye,cancelToken:C,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(be=Date.now()-ke,Se.code!==0){const We=new Q(W.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+Se.code,{retry:!0,responseTime:be});throw U.error(We.toString()),We}const Oe=JSON.parse(Se.json_body);if(Oe.code!==200){const We=new Q(W.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(Oe.code,", reason: ").concat(Oe.reason),{code:Oe.code,responseTime:be});throw U.error(We.toString()),We}if(!Oe.servers||!Array.isArray(Oe.servers)||Oe.servers.length===0){const We=new Q(W.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:Oe.code,responseTime:be});throw U.error(We.toString()),We}if(!Oe.servers.some(We=>!!We.wss)){const We=new Q(W.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:Oe.code,responseTime:be});throw U.error(We.toString()),We}const Bt=ie("IMAGE_MODERATION_WORKER_HOST");return{addressList:Oe.servers.map(We=>{let{address:ln,wss:en}=We;if(ln&&en)return"wss://".concat(ln.replace(/\./g,"-"),".").concat(Bt,":").concat(en,"/moderation")}).filter(We=>!!We),workerToken:Oe.workerToken,vid:Oe.vid,ticket:Oe.appTicket,responseTime:be}},(Se,Oe)=>(Ue.apworkerEvent(q,{success:!0,sc:200,serviceName:he,responseDetail:JSON.stringify(Se.addressList),firstSuccess:Oe===0,responseTime:be,serverIp:E[Oe%E.length]}),!1),(Se,Oe)=>(Ue.apworkerEvent(q,{success:!1,sc:Se.data&&Se.data.code||200,serviceName:he,responseTime:be,serverIp:E[Oe%E.length]}),!!(Se.code!==W.OPERATION_ABORTED&&Se.code!==W.UNEXPECTED_RESPONSE||Se.data&&Se.data.retry)&&(Te=E[(Oe+1)%E.length],!0)),R)}(l,r,i,s);this.emit(ea.STATE_CHANGE,el.AP_CONNECTED);const{addressList:p,ticket:v}=d;return this._ticket=v,p}async connectWorker(r){this.emit(ea.STATE_CHANGE,el.CONNECT_WORKER),await this._workerConnection.init(r,1e4)}handleWorkerEvents(){this._workerConnection.on(it.CONNECTED,async()=>{this.emit(ea.STATE_CHANGE,el.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=go.CONNECTED}),this._workerConnection.on(it.CLOSED,()=>{this.connectionState=go.CLOSED}),this._workerConnection.on(it.FAILED,()=>{this.connectionState=go.CLOSED}),this._workerConnection.on(it.RECONNECTING,()=>{this.connectionState=this.connectionState===go.CONNECTED?go.RECONNECTING:go.CONNECTING}),this._workerConnection.on(it.ON_MESSAGE,async r=>{if(r.data instanceof ArrayBuffer){const i=AX(new Uint8Array(r.data));ie("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&U.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(i)),this._uploadNum++,i.code===void 0||i.code===0||(this._uploadFailedNum++,U.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(i.code,", msg is ").concat(i.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout(()=>{Ue.reportApiInvoke(this._connectInfo.sid||null,{name:Zn.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,i.code],tag:bn.TRACER}).onError(new Q(W.IMAGE_MODERATION_UPLOAD_FAILED,i.msg)),this._uploadTimer=null},ie("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else U.error("[".concat(this._moderationId,"] Unexpected message type from worker"))}),this._workerConnection.on(it.WILL_RECONNECT,(r,i)=>{r==="recover"&&i(r),i("tryNext")}),this._workerConnection.on(it.REQUEST_NEW_URLS,(r,i)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(r).catch(i)})}static intToLong(r){return{low:r|=0,high:r>>31,unsigned:r>=0}}async requestToInspectImage(){const r=Aa(this,ea.CLIENT_LOCAL_VIDEO_TRACK),i={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(r){if(!r.isPlaying)return void(ie("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&U.debug("Only the track being played can be inspected"));this._sequence++;const s=await this.generateRequestData(r,i);this._workerConnection.sendMessage(s,!0,!0)}else ie("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&U.debug("Only the track being published can be inspected")}async generateRequestData(r,i){let{appId:s,cname:l,cid:d,vid:p,sid:v,uid:E}=i;const T=Date.now(),C=await r.getCurrentFrameImage("image/jpeg",this.quality),R=await S2(C,s,l),L=this._sequence+"-"+d+"-"+E+"-"+T+"-"+fn(12,""),j={appId:s,cid:d,cname:l,deviceId:"",elapse:jC.intToLong(Number(T-this._moderationStartTime)),fileSize:C.buffer.byteLength,height:C.height,width:C.width,jpg:R,networkType:6,osType:7,requestId:L,sdkVersion:"4.18.2",sequence:this._sequence,sid:v,timestamp:UX(T),uid:E,vid:p,service:this._moderationMode,ticket:this._ticket},Y=OX(j);if(Y.byteLength<this._workerMessageLengthLimit){if(ie("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const q=function(X){for(var le=1;le<arguments.length;le++){var he=arguments[le]!=null?arguments[le]:{};le%2?D2(Object(he),!0).forEach(function(ye){N(X,ye,he[ye])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(he)):D2(Object(he)).forEach(function(ye){Object.defineProperty(X,ye,Object.getOwnPropertyDescriptor(he,ye))})}return X}({},j);delete q.jpg,U.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(q))}return Y}{const q=this.quality*this._qualityRatio;return this.quality=q,await this.generateRequestData(r,{appId:s,cname:l,cid:d,vid:p,sid:v,uid:E})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Ao.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=go.CLOSED,this.emit(ea.STATE_CHANGE,el.CLOSED)}}var k2,L2,M2,U2,F2,V2,j2,B2,$2,H2,W2,G2,z2,K2,Y2,q2,X2,J2,Q2,Z2,eM,tM,nM,rM,iM,oM,aM,sM,cM,lM,uM,dM,hM,pM,fM,mM,gM,vM,EM,Ae;function _M(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function Kp(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?_M(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):_M(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}let FX=(k2=ze(),L2=ze({argsMap:(n,r)=>(Array.isArray(r)||(r=[r]),r.map(i=>i?Object(i).toString():"null"))}),M2=ze({argsMap:(n,r)=>(r||(r=[]),Array.isArray(r)||(r=[r]),r.map(i=>i.getTrackId()))}),U2=ze({argsMap:(n,r,i)=>[r.uid,i]}),F2=ze({argsMap:(n,r)=>r.map(i=>{let{user:s,mediaType:l}=i;return[s==null?void 0:s.uid,l]})}),V2=ze({argsMap:(n,r,i)=>[r.uid,i]}),j2=ze({argsMap:(n,r)=>r.map(i=>{let{user:s,mediaType:l}=i;return{uid:s==null?void 0:s.uid,mediaType:l}})}),B2=ze(),$2=ze(),H2=ze(),W2=ze(),G2=ze(),z2=ze(),K2=ze(),Y2=ze(),q2=ze(),X2=ze(),J2=ze(),Q2=ze(),Z2=ze(),eM=ze(),tM=ze({argsMap:(n,r)=>[r]}),nM=ze(),rM=ze(),iM=ze(),oM=ze(),aM=ze(),sM=ze(),cM=ze(),lM=ze(),uM=ze(),dM=ze(),hM=ze({argsMap:(n,r)=>(Array.isArray(r)||(r=[r]),[JSON.stringify(r)])}),pM=ze(),fM=ze(),mM=ze(),gM=ze(),vM=ze({reportResult:!0}),EM=ze(),_e((Ae=class extends In{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get mode(){return this._config.mode}get role(){var n;return((n=this._config)===null||n===void 0?void 0:n.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(n){let r;if(super(),N(this,"store",void 0),N(this,"_uid",void 0),N(this,"_channelName",void 0),N(this,"_uintUid",void 0),N(this,"_users",[]),N(this,"_config",void 0),N(this,"_clientId",void 0),N(this,"_appId",void 0),N(this,"_sessionId",null),N(this,"_key",void 0),N(this,"_joinInfo",void 0),N(this,"_gateway",void 0),N(this,"_statsCollector",void 0),N(this,"_configDistribute",void 0),N(this,"_leaveMutex",new Ri("client-leave")),N(this,"_publishMutex",new Ri("client-publish")),N(this,"_renewTokenMutex",new Ri("client-renewtoken")),N(this,"_subscribeMutex",new Ri("client-subscribe")),N(this,"_encryptionMode","none"),N(this,"_encryptionSecret",null),N(this,"_encryptionSalt",null),N(this,"_proxyServer",void 0),N(this,"_turnServer",{servers:[],mode:"auto"}),N(this,"_cloudProxyServerMode","disabled"),N(this,"_isDualStreamEnabled",!1),N(this,"_defaultStreamFallbackType",void 0),N(this,"_lowStreamParameter",void 0),N(this,"_streamFallbackTypeCacheMap",new Map),N(this,"_remoteStreamTypeCacheMap",new Map),N(this,"_axiosCancelSource",Ao.CancelToken.source()),N(this,"_audioVolumeIndicationInterval",void 0),N(this,"_networkQualityInterval",void 0),N(this,"_userOfflineTimeout",void 0),N(this,"_streamRemovedTimeout",void 0),N(this,"_injectStreamingClient",void 0),N(this,"_liveTranscodeStreamingClient",void 0),N(this,"_liveRawStreamingClient",void 0),N(this,"_channelMediaRelayClient",void 0),N(this,"_networkQualitySensitivity","normal"),N(this,"_p2pChannel",void 0),N(this,"_useLocalAccessPoint",!1),N(this,"_setLocalAPVersion",void 0),N(this,"_joinAndNotLeaveYet",!1),N(this,"_numberOfJoinCount",0),N(this,"_remoteDefaultVideoStreamType",void 0),N(this,"_inspect",void 0),N(this,"_moderation",void 0),N(this,"_license",void 0),N(this,"_handleLocalTrackEnable",(i,s,l)=>{this.publish(i,!1).then(s).catch(l)}),N(this,"_handleLocalTrackDisable",(i,s,l)=>{this.unpublish(i).then(s).catch(l)}),N(this,"_handleUserOnline",i=>{if(ie("BLOCK_LOCAL_CLIENT")&&iu(i.uid,this.channelName))return void U.debug("[".concat(i.uid,"] will be ignored in local"));this.isStringUID&&typeof i.uid!="string"&&U.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const s=this._users.find(l=>l.uid===i.uid);if(s)s._trust_in_room_=!0;else{const l=new iC(i.uid,i.uint_id||i.uid);this._users.push(l),U.debug("[".concat(this._clientId,"] user online"),i.uid),this.safeEmit(Tt.USER_JOINED,l)}}),N(this,"_handleUserOffline",i=>{if(ie("BLOCK_LOCAL_CLIENT")&&iu(i.uid,this.channelName))return;const s=this._users.find(l=>l.uid===i.uid);s&&(this._handleRemoveStream(i),Yy(this._users,s),this._remoteStreamTypeCacheMap.delete(s.uid),this._streamFallbackTypeCacheMap.delete(s.uid),U.debug("[".concat(this._clientId,"] user offline"),i.uid,"reason:",i.reason),this.safeEmit(Tt.USER_LEAVED,s,i.reason))}),N(this,"_handleAddAudioOrVideoStream",(i,s,l,d,p,v,E)=>{if(ie("BLOCK_LOCAL_CLIENT")&&iu(s,this.channelName))return;const T=this._users.find(R=>R.uid===s);if(!T)return void U.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));U.debug("[".concat(this._clientId,"] stream added with uid ").concat(s,", type ").concat(i)),this.store.subscribe(T.uid,i,void 0,void 0,void 0,Date.now());const C=i==="audio"?T.hasAudio:T.hasVideo;T._uintid||(T._uintid=p||s),i==="audio"?T._trust_audio_stream_added_state_=!0:T._trust_video_stream_added_state_=!0,i==="audio"?(T._audio_added_=!0,l!==void 0&&(T._audioSSRC=l),d!==void 0&&(T._cname=d),v&&(T._audioOrtc=v)):(T._video_added_=!0,l!==void 0&&(T._videoSSRC=l),d!==void 0&&(T._cname=d),E!==void 0&&(T._rtxSsrcId=E),v&&(T._videoOrtc=v)),(i==="audio"?T.hasAudio:T.hasVideo)&&!C&&(U.info("[".concat(this._clientId,"] remote user ").concat(T.uid," published ").concat(i)),this.safeEmit(Tt.USER_PUBLISHED,T,i)),i==="video"?Ue.onGatewayStream(this._sessionId,Fr.ON_ADD_VIDEO_STREAM,wn.ON_ADD_VIDEO_STREAM,{peer:p||s}):Ue.onGatewayStream(this._sessionId,Fr.ON_ADD_AUDIO_STREAM,wn.ON_ADD_AUDIO_STREAM,{peer:p||s}),this._p2pChannel.remoteMediaSsrcChanged(T,i,l).then(R=>{if(R)return U.debug("[".concat(this._clientId,"] resubscribe ").concat(i," for user ").concat(T.uid," after rejoin because SSRC id changed.")),this._p2pChannel.unsubscribe(T,i,!0).then(()=>this._subscribe(T,i,!0).catch(L=>{U.error("[".concat(this._clientId,"] resubscribe error"),L.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(T,i)&&(U.debug("[".concat(this._clientId,"] resubscribe ").concat(i," for user ").concat(T.uid," after reconnect.")),this._subscribe(T,i,!0).catch(R=>{U.error("[".concat(this._clientId,"] resubscribe error"),R.toString())}))}),N(this,"_handleRemoveStream",i=>{if(ie("BLOCK_LOCAL_CLIENT")&&iu(i.uid,this.channelName))return;const s=this._users.find(d=>d.uid===i.uid);if(!s)return void U.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));U.debug("[".concat(this._clientId,"] stream removed with uid ").concat(i.uid));let l=()=>{};s.hasAudio&&s.hasVideo?l=()=>{U.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished audio track")),this.safeEmit(Tt.USER_UNPUBLISHED,s,"audio"),U.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished video track")),this.safeEmit(Tt.USER_UNPUBLISHED,s,"video")}:s.hasVideo?l=()=>{U.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished video track")),this.safeEmit(Tt.USER_UNPUBLISHED,s,"video")}:s.hasAudio&&(l=()=>{U.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished audio track")),this.safeEmit(Tt.USER_UNPUBLISHED,s,"audio")}),s._trust_audio_stream_added_state_=!0,s._trust_video_stream_added_state_=!0,s._audio_added_=!1,s._video_added_=!1,this._p2pChannel.unsubscribe(s).then(d=>{if(d)return this._gateway.unsubscribe(d,s.uid)}),s._audioSSRC=void 0,s._videoSSRC=void 0,s._audioOrtc=void 0,s._videoOrtc=void 0,s._rtxSsrcId=void 0,Ue.onGatewayStream(this._sessionId,Fr.ON_REMOVE_STREAM,wn.ON_REMOVE_STREAM,{peer:i.uint_id||i.uid}),l()}),N(this,"_handleSetStreamLocalEnable",(i,s,l)=>{if(ie("BLOCK_LOCAL_CLIENT")&&iu(s,this.channelName))return;const d=this._users.find(E=>E.uid===s);if(!d)return void U.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));U.debug("[".concat(this._clientId,"] local ").concat(i," ").concat(l?"enabled":"disabled"," with uid ").concat(s));const p=i==="audio"?d.hasAudio:d.hasVideo;if(i==="audio"){d._trust_audio_enabled_state_=!0;const E=d._audio_enabled_;if(d._audio_enabled_=l,d._audio_enabled_===E)return;{const T=d._audio_enabled_?"enable-local-audio":"disable-local-audio";U.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(s,", msg: ").concat(T)),this.safeEmit(Tt.USER_INFO_UPDATED,s,T)}}else{d._trust_video_enabled_state_=!0;const E=d._video_enabled_;if(d._video_enabled_=l,d._video_enabled_===E)return;{const T=d._video_enabled_?"enable-local-video":"disable-local-video";U.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(s,", msg: ").concat(T)),this.safeEmit(Tt.USER_INFO_UPDATED,s,T)}}const v=i==="audio"?d.hasAudio:d.hasVideo;return p!==v?!p&&v?(U.info("[".concat(this._clientId,"] remote user ").concat(s," published ").concat(i)),void this.safeEmit(Tt.USER_PUBLISHED,d,i)):(i==="video"&&d._videoTrack&&d._videoTrack._destroy(),i==="audio"&&d._audioTrack,this._p2pChannel.muteRemote(d,i),U.info("[".concat(this._clientId,"] remote user ").concat(s," unpublished ").concat(i)),void this.safeEmit(Tt.USER_UNPUBLISHED,d,i)):void 0}),N(this,"_handleMuteStream",(i,s,l)=>{if(ie("BLOCK_LOCAL_CLIENT")&&iu(i,this.channelName))return;U.debug("[".concat(this._clientId,"] receive mute message"),i,s,l);const d=this._users.find(E=>E.uid===i);if(!d)return void U.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(i));const p=s==="audio"?d.hasAudio:d.hasVideo;if(s==="audio"){d._trust_audio_mute_state_=!0;const E=d._audio_muted_;if(d._audio_muted_=l,d._audio_muted_===E)return;{const T=d._audio_muted_?"mute-audio":"unmute-audio";U.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(i,", msg: ").concat(T)),this.safeEmit(Tt.USER_INFO_UPDATED,i,T)}}else{d._trust_video_mute_state_=!0;const E=d._video_muted_;if(d._video_muted_=l,d._video_muted_===E)return;{const T=d._video_muted_?"mute-video":"unmute-video";U.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(i,", msg: ").concat(T)),this.safeEmit(Tt.USER_INFO_UPDATED,i,T)}}const v=s==="audio"?d.hasAudio:d.hasVideo;if(p!==v){if(!p&&v)return(s==="audio"?d._audioSSRC:d._videoSSRC)?(U.info("[".concat(this._clientId,"] remote user ").concat(i," published ").concat(s)),void this.safeEmit(Tt.USER_PUBLISHED,d,s)):void U.warning("[".concat(this._clientId,"] remote user ").concat(i," receive ").concat(s," unmute message  before add stream message, ").concat(s," SSRC doesn't exist yet."));s==="video"&&d._videoTrack&&d._videoTrack._destroy(),s==="audio"&&d._audioTrack,this._p2pChannel.muteRemote(d,s),U.info("[".concat(this._clientId,"] remote user ").concat(i," unpublished ").concat(s)),this.safeEmit(Tt.USER_UNPUBLISHED,d,s)}}),N(this,"_handleP2PLost",async i=>{U.debug("[".concat(this._clientId,"] receive p2p lost"),i),parseInt(i.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():U.warning("[".concat(this._clientId,"] P2PLost stream not found"),i)}),N(this,"_handleTokenWillExpire",()=>{U.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(Tt.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),N(this,"_handleBeforeUnload",i=>{i.type==="beforeunload"&&i.returnValue!==void 0&&i.returnValue!==""||(this.leave(),U.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),N(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.safeEmit(Tt.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const i={downlinkNetworkQuality:0,uplinkNetworkQuality:0};i.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),i.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(Tt.NETWORK_QUALITY,i)}),this._config=n,this._clientId=fn(5,"client-"),this.store=new gX(n.codec,n.audioCodec,n.mode,this._clientId),this.store.clientCreated(),n.proxyServer&&this.setProxyServer(n.proxyServer,!0),n.turnServer&&this.setTurnServer(n.turnServer,!0),U.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(Zo," build: ").concat(ly,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),n.clientRoleOptions)try{Fx(n.clientRoleOptions),r=Object.assign({},n.clientRoleOptions)}catch(i){U.warning("[".concat(this._clientId,"] ").concat(i.toString()))}this._statsCollector=new Ad(this.store),this._statsCollector.onStatsException=(i,s,l)=>{U.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(i,", msg: ").concat(s,", uid: ").concat(l)),this.safeEmit(Tt.EXCEPTION,{code:i,msg:s,uid:l})},this._statsCollector.onUploadPublishDuration=(i,s,l,d)=>{const p=this._users.find(v=>v.uid===i);p&&Ue.peerPublishStatus(this._sessionId,{subscribeElapse:d,audioPublishDuration:s,videoPublishDuration:l,peer:p._uintid})},this.store.useDataChannel=zn().supportDataChannel&&ie("SIGNAL_CHANNEL"),this._gateway=new eq(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:n.websocketRetryConfig||Qn,httpRetryConfig:n.httpRetryConfig||Qn,forceWaitGatewayResponse:n.forceWaitGatewayResponse===void 0||n.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:n.role,clientRoleOptions:r}),this._configDistribute=new lq,this._p2pChannel=new mX(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async join(n,r,i,s,l){const d=++this._numberOfJoinCount;this.store.joinStart(),s&&(this.store.uid=s);const p=vX(),v=h2()?window.isSecureContext:"Browser Not Support";if(!h2()&&!p||!window.isSecureContext){const j="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";U.warning(j)}const E=Ky();this.connectionState==="DISCONNECTED"&&(this.store.avoidJoinStart=Math.round(Date.now()),U.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart)));const T=Ue.reportApiInvoke(E,{name:Zn.JOIN,options:[n,r,i,s],states:{isHttps:p,isSecureContext:v},tag:bn.TRACER});Ue.setAppId(n);try{if(!i&&i!==null)throw new Q(W.INVALID_PARAMS,"Invalid token: ".concat(i,". If you don not use token, set it to null"));i&&qr(i,"token",1,2047),qr(n,"appid",1,2047),_y(r),s&&Sy(s),l&&qr(l,"optionalInfo",1,2047)}catch(j){throw T.onError(j),j}if(U.info("[".concat(this._clientId,"] start join channel ").concat(r,", join number: ").concat(d)),this._leaveMutex.isLocked&&(U.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),U.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){const j=new Q(W.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw T.onError(j),j}this._sessionId||(this._sessionId=E,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING";const C=Kp({clientId:this._clientId,appId:n,sid:this._sessionId,cname:r,uid:typeof s!="string"?s:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:i||n,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:l,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(C.setLocalAPVersion=this._setLocalAPVersion),typeof s=="string"&&(C.stringUid=s,this._uintUid?(C.uid=this._uintUid,this._uintUid=void 0):C.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(C.aesmode=this._encryptionMode,C.aespassword=await(async j=>{const Y=qy(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),q=await window.crypto.subtle.importKey("spki",Y,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),X=Uy(j),le=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},q,X);return z0(new Uint8Array(le))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new Q(W.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(C.aessalt=this._encryptionSalt)}this._startSession(this._sessionId,{channel:r,appId:n});const R=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&R===this._sessionId&&Ue.joinChannelTimeout(this._sessionId,5)},5e3);try{let j;const Y=C.cloudProxyServer;if(["proxy3","proxy4","proxy5"].includes(Y)){const he=ie("PROXY_SERVER_TYPE3");Array.isArray(he)?C.proxyServer=he[0]:C.proxyServer=he}if(Ue.setProxyServer(C.proxyServer),U.setProxyServer(C.proxyServer),this.store.requestAPStart(),C.stringUid&&!C.uid){const he=await WD(C.stringUid,C,this._axiosCancelSource.token,this._config.httpRetryConfig||Qn,this.store);U.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(C.stringUid," => ").concat(he)),C.uid=he,j=await HD(C,this._axiosCancelSource.token,this._config.httpRetryConfig||Qn,!0,this.store)}else j=await HD(C,this._axiosCancelSource.token,this._config.httpRetryConfig||Qn,!0,this.store);if(!this._joinAndNotLeaveYet)throw new Q(W.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(C,this._axiosCancelSource.token),this._configDistribute.on(Np.UPDATE_BITRATE_LIMIT,he=>{this._p2pChannel.updateBitrateLimit(he)})},0),this._key=i||n;const q=j.gatewayInfo;this._joinInfo=Kp(Kp({},C),{},{cid:q.cid,uid:C.uid?C.uid:q.uid,vid:q.vid,apResponse:q.res,uni_lbs_ip:q.uni_lbs_ip,gatewayAddrs:q.gatewayAddrs});const X=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new Q(W.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));T.onSuccess(X),this._appId=n,this._channelName=C.cname,this._uid=X,this.store.uid=X,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(yi()?"beforeunload":"pagehide",this._handleBeforeUnload)},0);const le=C.stringUid?"string uid: ".concat(C.stringUid,",uid: ").concat(C.uid):"uid: ".concat(this._uid);return U.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(r,",").concat(le)),setTimeout(()=>{U.startUpload()},5e3),this.store.joinEnd(),L=this,ru.includes(L)||ru.push(L),X}catch(j){const Y=Array.isArray(j)?j[0]:j;throw Y&&Y.code===W.OPERATION_ABORTED?U.warning("[".concat(this._clientId,"] join number: ").concat(d,", Joining channel failed, rollback"),Y):U.error("[".concat(this._clientId,"] join number: ").concat(d,", Joining channel failed, rollback"),Y),Y.code!==W.OPERATION_ABORTED&&this._numberOfJoinCount===d&&(this._gateway.state="DISCONNECTED",this._reset()),T.onError(Y),Y}var L}_joinGateway(){if(!this._joinInfo||!this._key)throw new Q(W.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||this._joinInfo.proxyServer||!ie("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(n=>n).catch(n=>{if(n.code===W.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,Wt.FALLBACK),n;if(n.code===W.INIT_DATACHANNEL_TIMEOUT)return this._gateway.leave(!0,Wt.FALLBACK),n;throw n}).then(n=>{if(n instanceof Q){if(n.code===W.INIT_WEBSOCKET_TIMEOUT){if(U.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new Q(W.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const r=ie("PROXY_SERVER_TYPE3");if(Array.isArray(r))if(this._joinInfo.apUrl){const s=/^https?:\/\/(.+?)(\/.*)?$/.exec(this._joinInfo.apUrl)[1].split("."),l=s.slice(s.length-2).join(".");r.forEach(d=>{this._joinInfo&&d.includes(l)&&(this._joinInfo.proxyServer=d)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=r[0])}else this._joinInfo.proxyServer=r[0];else this._joinInfo.proxyServer=r;const i=ie("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);return i&&i[1]&&i[1]!=="443"&&U.setProxyServer(this._joinInfo.proxyServer),ie("STATS_COLLECTOR_PORT").toString()!=="443"&&Ue.setProxyServer(this._joinInfo.proxyServer),Ue.reportApiInvoke(this._sessionId,{name:Zn.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:bn.TRACER}).onSuccess(),this.safeEmit(Tt.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),ie("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&this._joinInfo.turnServer.servers.forEach(s=>{"forceturn"in s&&(s.forceturn=!0)}),this._gateway.join(this._joinInfo,this._key)}if(U.info("[".concat(this._clientId,"] join by datachannel timeout, fallback to websocket")),!this._joinInfo||!this._key)throw new Q(W.INVALID_OPERATION);return Ue.reportApiInvoke(this._sessionId,{name:Zn.DATACHANNEL_FAILBACK,options:[this.store.clientId],tag:bn.TRACER}).onSuccess(),this._joinGateway()}return n}).then(n=>n)}async leave(){U.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(yi()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(r){const i=ru.indexOf(r);i!==-1&&ru.splice(i,1)}(this);const n=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return U.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void n();await this._gateway.leave(this.connectionState!=="CONNECTED"),U.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),n()}async publish(n){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Array.isArray(n)||(n=[n]),n.length===0)throw new Q(W.INVALID_PARAMS,"track list is empty");if(this._gateway.role==="audience")throw new Q(W.INVALID_OPERATION,"audience can not publish stream");for(const s of n){if(!(s instanceof Fy))throw new Q(W.INVALID_PARAMS,"parameter is not local track");if(!s._enabled&&r)throw new Q(W.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(s.getTrackId()))}U.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(n.map(s=>"".concat(s.getTrackId()," "))));const i=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),r&&n.forEach(s=>{const l=this._configDistribute.getBitrateLimit();s instanceof rr&&l&&s.setBitrateLimit(l.uplink)});try{await this._publishHighStream(n),U.info("[".concat(this._clientId,"] Publish success, id ").concat(n.map(s=>"".concat(s.getTrackId()," "))))}catch(s){throw U.error("[".concat(this._clientId,"] publish error"),s.toString()),s}finally{i()}}async unpublish(n){if(!this._joinInfo||this._uid===void 0)throw new Q(W.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");n?Array.isArray(n)||(n=[n]):n=this._p2pChannel.getAllTracks(!0),U.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(n.map(i=>"".concat(i.getTrackId()," "))," "));const r=await this._publishMutex.lock();try{const i=await this._p2pChannel.unpublish(n);i&&await this._gateway.unpublish(i,this._uid),U.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(n.map(s=>"".concat(s.getTrackId()))))}catch(i){throw U.error("[".concat(this._clientId,"] unpublish error"),i.toString()),i}finally{r&&r()}}async subscribe(n,r){return this._subscribe(n,r)}async _subscribe(n,r,i){if(Rr(r,"mediaType",["audio","video"]),!this._joinInfo)throw new Q(W.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Q(W.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(E=>E===n)){const E=new Q(W.INVALID_REMOTE_USER,"user is not in the channel");throw U.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid,", this user is not in the channel")),E}if(!n.hasAudio&&!n.hasVideo){const E=new Q(W.INVALID_REMOTE_USER,"user is not published");throw U.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid,", user is not published")),E}if(!(i||(r!=="audio"||n.hasAudio&&n._audioSSRC!==void 0)&&(r!=="video"||n.hasVideo&&n._videoSSRC!==void 0))){const E=new Q(W.REMOTE_USER_IS_NOT_PUBLISHED);throw U.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid," with mediaType ").concat(r,", remote track is not published")),E}const s=r==="audio"?n._audioSSRC:n._videoSSRC,l=r==="audio"?n._audioOrtc:n._videoOrtc,d=r==="video"?n._rtxSsrcId:void 0,p={stream_type:r==="audio"?ut.AUDIO:ut.VIDEO,ssrcId:s},v=await this._subscribeMutex.lock();U.info("[".concat(this._clientId,"] subscribe user ").concat(n.uid,", mediaType: ").concat(r));try{if(await this._p2pChannel.hasRemoteMediaWithLock(n,r))await this._p2pChannel.unmuteRemote(n,r);else try{ta.markSubscribeStart(this.store.clientId,s),this.store.subscribe(n.uid,r,Date.now()),await this._p2pChannel.subscribe(n,r,s,d,l);try{await this._gateway.subscribe(n.uid,p,!0)}catch(T){if((T==null?void 0:T.code)!==W.WS_ABORT)throw await this._p2pChannel.unsubscribe(n,r),T;await this._p2pChannel.unsubscribe(n,r,!0),this._p2pChannel.setPendingRemoteMedia(n,r)}this.store.subscribe(n.uid,r,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,n,r)}catch(T){throw this._p2pChannel.reportSubscribeEvent(!1,T==null?void 0:T.code,n,r),T}U.info("[".concat(this._clientId,"] subscribe success user ").concat(n.uid,", mediaType: ").concat(r)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(n.uid,this._defaultStreamFallbackType).catch(T=>{U.warning("[".concat(this._clientId,"] auto set fallback failed"),T)});const E=r==="audio"?n._audioTrack:n._videoTrack;if(!E)throw new Q(W.UNEXPECTED_ERROR,"can not find remote track in user object");return E}catch(E){throw U.error("[".concat(this._clientId,"] subscribe user ").concat(n.uid," error"),E),E}finally{v()}}async massSubscribe(n){if(sc(n,"subscribeList"),!this._joinInfo)throw new Q(W.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Q(W.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const r=Date.now(),i=new Map,s=await this._subscribeMutex.lock();U.info("[".concat(this._clientId,"]start massSubscribe user ").concat(n.map(v=>{let{user:E,mediaType:T}=v;return"user: ".concat(E==null?void 0:E.uid,", mediaType: ").concat(T)}).join("; ")));const l=(n=[...n]).map(v=>{let{user:E,mediaType:T}=v;return{user:E,mediaType:T}}),d=await this._p2pChannel.globalLock();try{var p;for(let E=n.length-1;E>=0;E--){const T=n[E],{user:C,mediaType:R}=T;if(Rr(R,"mediaType",["audio","video"]),!C){const Y=new Q(W.INVALID_PARAMS,"user property does not exist in subscribeList item");throw U.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),Y}if(!this._users.find(Y=>Y===C)){const Y=new Q(W.INVALID_REMOTE_USER,"user is not in the channel");U.error("[".concat(this._clientId,"] can not massSubscribe ").concat(C.uid,", this user is not in the channel")),l[E].error=Y,n.splice(E,1);continue}if(R==="audio"&&(!C.hasAudio||C._audioSSRC===void 0)||R==="video"&&(!C.hasVideo||C._videoSSRC===void 0)){const Y=new Q(W.REMOTE_USER_IS_NOT_PUBLISHED);U.error("[".concat(this._clientId,"] can not subscribe ").concat(C.uid," with mediaType ").concat(R,", remote user is not published")),l[E].error=Y,n.splice(E,1);continue}const L=er.Video|er.LwoVideo,j=i.get(C);if(j){if(R==="video"?j&L:j&er.Audio){n.splice(E,1),U.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(C.uid,", mediaType:").concat(R," twice"));continue}i.set(C,j|(R==="video"?L:er.Audio))}else i.set(C,R==="video"?L:er.Audio)}for(let E=n.length-1;E>=0;E--){const T=n[E],{user:C,mediaType:R}=T,L=er.Video|er.LwoVideo;if(this._p2pChannel.hasRemoteMedia(C,R)){await this._p2pChannel.unmuteRemoteNoLock(C,R);const j=i.get(C);i.set(C,R==="video"?j^L:j^er.Audio),n.splice(E,1)}}this.store.massSubscribe(n.map(E=>({userId:E.user.uid,type:E.mediaType})),r);const v=Gc(p=Array.from(i.entries())).call(p,(E,T)=>{let[C,R]=T;if(R===0)return E;const L={stream_id:C.uid,stream_type:R};return R&er.Audio&&(L.audio_ssrc=C._audioSSRC),R&er.Video&&(L.video_ssrc=C._videoSSRC),E.push(L),E},[]);try{n.length>0&&await this._p2pChannel.massSubscribeNoLock(n.map(T=>{let{user:C,mediaType:R}=T;return{user:C,mediaType:R,ssrcId:R===ut.VIDEO?C._videoSSRC:C._audioSSRC,rtxSsrcId:R===ut.VIDEO?C._rtxSsrcId:void 0}}));const E=new Map;if(v.length>0){const T=await this._gateway.subscribeAll(v,!0);((T==null?void 0:T.users)||[]).forEach(C=>{let{stream_id:R,video_error_code:L,audio_error_code:j,error_code:Y}=C;(L||j||Y)&&E.set(R,{video_error_code:L,audio_error_code:j,error_code:Y})})}if(Array.from(E.entries()).length>0){const T=Array.from(E.entries()).map(C=>{let R,[L,j]=C;return j.error_code||j.video_error_code&&j.audio_error_code?R=void 0:j.video_error_code?R=ut.VIDEO:j.audio_error_code&&(R=ut.AUDIO),{user:this.remoteUsers.find(Y=>Y.uid===L),mediaType:R}});await this._p2pChannel.massUnsubscribeNoLock(T)}for(const T of l){const C=E.get(T.user.uid);if(C){const R=C.error_code||T.mediaType==="audio"&&C.audio_error_code||T.mediaType==="video"&&C.video_error_code;if(R){const L=kp(R);U.error("user:".concat(T.user.uid," mediaType:").concat(T.mediaType," has massSubscribe error ").concat(L.desc)),T.error=new Q(W.SUBSCRIBE_FAILED,"code ".concat(R,": ").concat(L.desc))}}T.error||(T.mediaType==="video"?T.track=T.user.videoTrack:T.track=T.user.audioTrack)}return this.store.massSubscribe(l.filter(T=>!T.error).map(T=>({userId:T.user.uid,type:T.mediaType})),void 0,Date.now()),l.forEach(T=>{var C;Ue.subscribe(this.store.sessionId,{succ:!!T.error,ec:((C=T.error)===null||C===void 0?void 0:C.code)||null,video:T.mediaType===ut.VIDEO,audio:T.mediaType===ut.AUDIO,peerid:T.user.uid,subscribeRequestid:T.mediaType===ut.VIDEO?T.user._videoSSRC:T.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-r)},!0)}),U.info("[".concat(this._clientId,"] massSubscribe success ").concat(n.map(T=>{let{user:C,mediaType:R}=T;return"user: ".concat(C==null?void 0:C.uid,", mediaType: ").concat(R)}).join("; "))),l}catch(E){throw await this._p2pChannel.massUnsubscribeNoLock(n),E}}finally{d(),s()}}async unsubscribe(n,r){if(r&&Rr(r,"mediaType",["audio","video"]),!this._joinInfo)throw new Q(W.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(s=>s===n)){const s=new Q(W.INVALID_REMOTE_USER,"user is not in the channel");throw U.error("[".concat(this._clientId,"] can not unsubscribe ").concat(n.uid,", user is not in the channel")),s}U.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(n.uid,", mediaType: ").concat(r));const i=await this._subscribeMutex.lock();try{const s=await this._p2pChannel.unsubscribe(n,r);s&&await this._gateway.unsubscribe(s,n.uid),U.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(n.uid,", mediaType: ").concat(r))}catch(s){if(s.code===W.DISCONNECT_P2P)return void U.warning("disconnecting p2p, abort unsubscribe request.");throw U.error("[".concat(this._clientId,"] unsubscribe user ").concat(n.uid," error"),s.toString()),s}finally{i()}}async massUnsubscribe(n){if(sc(n,"unsubscribeList"),!this._joinInfo)throw new Q(W.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");U.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(n.map(i=>{let{user:s,mediaType:l}=i;return"user: ".concat(s==null?void 0:s.uid,", mediaType: ").concat(l,";")}).join())),n=[...n];const r=new Map;for(let i=n.length-1;i>=0;i--){const{user:s,mediaType:l}=n[i];if(!s){const p=new Q(W.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw U.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),p}if(Rr(l,"mediaType",["video","audio",void 0]),!this._users.find(p=>p===s)){U.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(s.uid,", user is not in the channel")),n.splice(i,1);continue}const d=er.Video|er.LwoVideo;if(r.has(s)){const p=r.get(s);let v;switch(l){case"video":v=p&d;break;case"audio":v=p&er.Audio;break;default:v=p&(er.Audio|d)}if(v){U.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(s.uid,",mediaType:").concat(l," twice.")),n.splice(i,1);continue}l?l==="audio"?r.set(s,p|er.Audio):l==="video"&&r.set(s,p|d):r.set(s,p|er.Audio|d)}else l?l==="audio"?r.set(s,er.Audio):l==="video"&&r.set(s,d):r.set(s,er.Audio|d)}try{const i=await this._p2pChannel.massUnsubscribe(n);i&&await this._gateway.massUnsubscribe(i),U.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(n.map(s=>{let{user:l,mediaType:d}=s;return"user: ".concat(l==null?void 0:l.uid,", mediaType: ").concat(d,";")}).join()))}catch(i){if(i.code===W.DISCONNECT_P2P)return void U.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw U.error("[".concat(this._clientId,"] massUnsubscribe error"),i.toString()),i}}setLowStreamParameter(n){(function(i){if(!i)throw new Q(W.INVALID_PARAMS);Sn(i.width)||Ey(i.width,"streamParameter.width"),Sn(i.height)||Ey(i.height,"streamParameter.height"),Sn(i.framerate)||Ey(i.framerate,"streamParameter.framerate"),Sn(i.bitrate)||sn(i.bitrate,"streamParameter.bitrate")})(n),(!n.width&&n.height||n.width&&!n.height)&&U.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),U.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(n));const r=this._configDistribute.getLowStreamConfigDistribute();r&&r.bitrate&&n.bitrate&&r.bitrate<n.bitrate&&(n.bitrate=r.bitrate),this._lowStreamParameter=n}async enableDualStream(){if(!zn().supportDualStream)throw Ue.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new Q(W.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new Q(W.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(n){throw Ue.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),n}this._isDualStreamEnabled=!0,Ue.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),U.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new Q(W.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(Me.LocalVideoLowTrack))try{const n=await this._p2pChannel.unpublishLowStream();n&&await this._gateway.unpublish(n,this._joinInfo.stringUid||this._joinInfo.uid)}catch(n){throw Ue.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),n}this._isDualStreamEnabled=!1,Ue.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),U.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(n,r){if(function(i){Rr(i,"role",["audience","host"])}(n),r&&Fx(r),this.mode==="rtc")throw U.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole")),new Q(W.INVALID_OPERATION,"rtc mode can not use setClientRole");if(r&&r.level&&n==="host")throw new Q(W.INVALID_OPERATION,"host mode can not set audience latency level");if(n==="audience"&&this._p2pChannel.hasLocalMedia())throw new Q(W.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(n,r),this._config.role=n,U.info("[".concat(this._clientId,"] set client role to ").concat(n,", level: ").concat(r&&r.level))}setProxyServer(n,r){if(qr(n,"proxyServer"),!r){if(this.connectionState!=="DISCONNECTED")throw new Q(W.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new Q(W.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=n,Ue.setProxyServer(this._proxyServer),U.setProxyServer(this._proxyServer),U.info("[".concat(this._clientId,"] Set proxy server ").concat(r?"by initialize call":""," success."))}setTurnServer(n,r){if(Array.isArray(n)||(n=[n]),!r){if(this.connectionState!=="DISCONNECTED")throw new Q(W.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new Q(W.INVALID_OPERATION,"You have already set the proxy")}if(Op(n))return this._turnServer={servers:n,mode:"original-manual"},void U.info("[".concat(this._clientId,"] Set original turnserver ").concat(r?"by initialize call":""," success: ").concat(n.map(i=>i.urls).join(","),"."));n.forEach(i=>Ux(i)),this._turnServer={servers:n,mode:"manual"},U.info("[".concat(this._clientId,"] Set turnserver ").concat(r?"by initialize call":""," success."))}setLicense(n){if(this.connectionState!=="DISCONNECTED")throw new Q(W.INVALID_OPERATION,"you should set license before join channel");if(qr(n,"license",32,32),!/^[A-Za-z\d]+$/.test(n))throw new Q(W.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=n,U.info("[".concat(this._clientId,"] set license success"),n)}startProxyServer(n){if(this.connectionState!=="DISCONNECTED")throw new Q(W.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint)throw new Q(W.INVALID_OPERATION,"You have already set the proxy");const r=[3,4,5];let i;switch(n===void 0&&(n=3),n){case 1:case 2:throw new Q(W.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:i="proxy3";break;case 4:i="proxy4";break;case 5:i="proxy5";break;default:throw new Q(W.INVALID_PARAMS,"proxy server mode must be ".concat(r.join("|")))}this._cloudProxyServerMode=i,this.store.cloudProxyServerMode=i,U.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if(this.connectionState!=="DISCONNECTED")throw new Q(W.INVALID_OPERATION,"Stop proxy server after leave channel");Ue.setProxyServer(),U.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",U.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(n){if(!n.accessPoints)throw new Q(W.INVALID_PARAMS,"accessPoints is required.");sc(n.accessPoints.serverList,"accessPoints.serverList"),qr(n.accessPoints.domain,"accessPoints.domain");const r=(L,j)=>{sn(L,j,0,65535,!0)};let i=443;if(n.accessPoints.port&&(r(n.accessPoints.port,"accessPoints.port"),i=n.accessPoints.port),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new Q(W.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");ie("CLOSE_AFB_FOR_LOCAL_AP")&&(rn("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),rn("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const s=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,l=n.accessPoints.domain,d=n.accessPoints.serverList.map(L=>s.test(L)?"".concat(L.replace(/\./g,"-"),".").concat(l):L),p=d.map(L=>"".concat(L,":").concat(i));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,rn("WEBCS_DOMAIN",p),rn("WEBCS_DOMAIN_BACKUP_LIST",p),rn("GATEWAY_DOMAINS",[l]),n.report&&n.report.hostname&&Array.isArray(n.report.hostname)&&n.report.hostname.length?(sc(n.report.hostname,"report.hostname"),rn("EVENT_REPORT_DOMAIN",n.report.hostname[0]),rn("EVENT_REPORT_BACKUP_DOMAIN",n.report.hostname[1]||n.report.hostname[0])):(rn("EVENT_REPORT_DOMAIN",d[0]),rn("EVENT_REPORT_BACKUP_DOMAIN",d[1]||d[0]));let v=6443;n.report&&n.report.port&&(r(n.report.port,"report.port"),v=n.report.port),rn("STATS_COLLECTOR_PORT",v),n.report?rn("ENABLE_EVENT_REPORT",!0):rn("ENABLE_EVENT_REPORT",!1);let E="";n.log&&n.log.hostname&&Array.isArray(n.log.hostname)&&n.log.hostname.length?(sc(n.log.hostname,"log.hostname"),E=n.log.hostname[0]):E=d[0];let T=6444;n.log&&n.log.port&&(r(n.log.port,"log.port"),T=n.log.port),rn("LOG_UPLOAD_SERVER","".concat(E,":").concat(T));let C=[];n.cds&&n.cds.hostname&&Array.isArray(n.cds.hostname)&&n.cds.hostname.length?(sc(n.cds.hostname,"cds.hostname"),C=n.cds.hostname):C=d;let R=443;n.cds&&n.cds.port&&(r(n.cds.port,"cds.port"),R=n.cds.port),rn("CDS_AP",C.map(L=>"".concat(L,":").concat(R))),n.cds?rn("ENABLE_CONFIG_DISTRIBUTE",!0):rn("ENABLE_CONFIG_DISTRIBUTE",!1),U.info("set local access point v2 success")}setLocalAccessPoints(n,r){if(sc(n,"serverList"),qr(r,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new Q(W.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const i=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;n=n.map(s=>i.test(s)?"".concat(s.replace(/\./g,"-"),".").concat(r):s),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,rn("WEBCS_DOMAIN",n),rn("WEBCS_DOMAIN_BACKUP_LIST",n),rn("GATEWAY_DOMAINS",[r]),rn("EVENT_REPORT_DOMAIN",n[0]),rn("EVENT_REPORT_BACKUP_DOMAIN",n[1]||n[0]),rn("LOG_UPLOAD_SERVER","".concat(n[0],":6444")),U.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(n){if(Rr(n,"streamType",[0,1]),this._remoteDefaultVideoStreamType=n,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(n),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(r){throw U.error("[".concat(this._clientId,"] set default remote video stream type error"),r.toString()),r}else U.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(n))}async setRemoteVideoStreamType(n,r){Rr(r,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(n,r),setTimeout(()=>{const i=this._users.find(s=>s.uid===n);i&&i.videoTrack&&i.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(i){throw U.error("[".concat(this._clientId,"] set remote video stream type error"),i.toString()),i}U.info("[".concat(this._clientId,"] set remote ").concat(n," video stream type to ").concat(r)),this._remoteStreamTypeCacheMap.set(n,r)}async setStreamFallbackOption(n,r){Rr(r,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(n,r)}catch(i){throw U.error("[".concat(this._clientId,"] set stream fallback option"),i.toString()),i}U.info("[".concat(this._clientId,"] set remote ").concat(n," stream fallback type to ").concat(r)),this._streamFallbackTypeCacheMap.set(n,r)}setEncryptionConfig(n,r,i){if(function(s){Rr(s,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(n),qr(r,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(n)){if(!i||!(i instanceof Uint8Array&&i.length===32))throw new Q(W.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(i)throw new Q(W.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test(r)||U.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),this._encryptionMode=n,this._encryptionSecret=r,i&&(this._encryptionSalt=z0(i))}async renewToken(n){if(qr(n,"token",1,2047),!this._key||!this._joinInfo)throw new Q(W.INVALID_OPERATION,"renewToken should not be called before user join");const r=this._key;this._key=n,this._joinInfo&&(this._joinInfo.token=n);const i=await this._renewTokenMutex.lock();try{if(ie("USE_NEW_TOKEN")){U.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const s=await cq(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Qn);U.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:n,ticket:s})}else U.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:n});U.debug("[".concat(this._clientId,"] renewToken success"))}catch(s){throw this._key=r,this._joinInfo.token=r,U.error("[".concat(this._clientId,"] renewToken failed"),s.toString()),s}finally{i()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?U.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{const n=this._p2pChannel.getAudioLevels();this.safeEmit(Tt.VOLUME_INDICATOR,n)},ie("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const n=this._statsCollector.getRTCStats(),r=this._gateway.getInChannelInfo();return n.Duration=Math.round(r.duration/1e3),n}async startLiveStreaming(n,r){if(!r){if(this.codec!=="h264")throw new Q(W.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new Q(W.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(n)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(n))throw new Q(W.LIVE_STREAMING_TASK_CONFLICT);const i=r?sr.TRANSCODE:sr.RAW;return this._createLiveStreamingClient(i).startLiveStreamingTask(n,i)}setLiveTranscoding(n){return this._createLiveStreamingClient(sr.TRANSCODE).setTranscodingConfig(n)}async stopLiveStreaming(n){const r=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(i=>i&&i.hasUrl(n));if(!r.length)throw new Q(W.INVALID_PARAMS,"can not find live streaming url to stop");await Pe.all(r.map(i=>i&&i.stopLiveStreamingTask(n)))}async addInjectStreamUrl(n,r){if(!this._joinInfo)throw new Q(W.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const i=this._createLiveStreamingClient(sr.INJECT);i.setInjectStreamConfig(r,0),await i.startLiveStreamingTask(n,sr.INJECT)}async removeInjectStreamUrl(){var n;const r=this._createLiveStreamingClient(sr.INJECT),i=Array.from(ks(n=r.streamingTasks).call(n)).find(s=>s.mode===sr.INJECT);if(!this._joinInfo||!i)throw new Q(W.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await r.stopLiveStreamingTask(i.url)}async startChannelMediaRelay(n){QD(n),await this._createChannelMediaRelayClient().startChannelMediaRelay(n)}async updateChannelMediaRelay(n){QD(n),await this._createChannelMediaRelayClient().updateChannelMediaRelay(n)}async stopChannelMediaRelay(){await this._createChannelMediaRelayClient().stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}sendStreamMessage(n){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new Q(W.INVALID_OPERATION,"can not send data stream, not joined");if(typeof n=="string"&&(n=new TextEncoder().encode(n)),new Blob([n]).size>1024)throw new Q(W.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(Je.DATA_STREAM,{payload:z0(n)},!r)}sendMetadata(n){if(!this._joinInfo)throw new Q(W.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([n]).size>1024)throw new Q(W.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Je.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:z0(n)})}async sendCustomReportMessage(n){if(Array.isArray(n)||(n=[n]),n.forEach(CK),!this._joinInfo)throw new Q(W.INVALID_OPERATION,"can not send custom report, not joined");await Ue.sendCustomReportMessage(this._joinInfo.sid,n)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(n,r){Rr(r.spatialLayer,"spatialLayer",[0,1,2,3]),Rr(r.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(n,r)}catch(i){throw U.error("[".concat(this._clientId,"] pick SVC layer failed"),i.toString()),i}}_reset(){if(U.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=Ao.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach(n=>{n._audioTrack&&n._audioTrack._destroy(),n._videoTrack&&n._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new Ri("client-publish"),this._subscribeMutex=new Ri("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}if(this._moderation)try{this.setImageModeration(!1)}catch{}}_startSession(n,r){const i=n||Ky();n?U.debug("[".concat(this._clientId,"] new Session ").concat(i)):U.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(i)),this._sessionId=i,this.store.sessionId=i,r?Ue.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:r.channel,appid:r.appId,mode:this.mode}):this._joinInfo?Ue.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this.mode}):this._gateway.joinInfo&&Ue.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this.mode}),this._joinInfo&&(this._joinInfo.sid=i),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=i)}async _publishHighStream(n){if(!this._joinInfo||this._uid===void 0)throw new Q(W.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Q(W.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&ie("FORCE_TURN")&&!ie("TURN_ENABLE_TCP")&&!ie("TURN_ENABLE_UDP"))throw new Q(W.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");U.debug("[".concat(this._clientId,"] publish high stream"));try{const i=await this._p2pChannel.publish(n,this._isDualStreamEnabled,this._lowStreamParameter),s=(await i.next()).value;if(s){var r;let l;try{l=await this._gateway.publish(this._uid,s,!0)}catch(d){if(d.code!==W.DISCONNECT_P2P)throw i.throw(d),d}await i.next(((r=l)===null||r===void 0?void 0:r.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const l of n)l instanceof rr&&l._encoderConfig&&this._gateway.setVideoProfile(l._encoderConfig),!l.muted&&l.enabled||await this._p2pChannel.muteLocalTrack(l)}catch(i){if(this._p2pChannel.reportPublishEvent(!1,i==null?void 0:i.code,n),(i==null?void 0:i.code)===W.WS_ABORT)return;throw i}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new Q(W.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Q(W.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));U.debug("[".concat(this._clientId,"] publish low stream"));const n=this._configDistribute.getLowStreamConfigDistribute();n&&n.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&n.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=n.bitrate));try{const i=await this._p2pChannel.publishLowStream(this._lowStreamParameter),s=(await i.next()).value;if(s){var r;let l;try{l=await this._gateway.publish(this._uid,s,!0)}catch(d){if(d.code!==W.DISCONNECT_P2P)throw i.throw(d),d}i.next(((r=l)===null||r===void 0?void 0:r.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(i){if(this._p2pChannel.reportPublishEvent(!1,i==null?void 0:i.code,void 0,!0),(i==null?void 0:i.code)===W.WS_ABORT)return;throw i}}_createLiveStreamingClient(n){if(!this._joinInfo||!this._appId)return new Q(W.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const r=()=>new dq(this._joinInfo,this._config.websocketRetryConfig||Qn,this._config.httpRetryConfig||Qn),i=s=>{s.onLiveStreamError=(l,d)=>{Ue.reportApiInvoke(this._sessionId,{name:Zn.ON_LIVE_STREAM_ERROR,options:[l,d],tag:bn.TRACER}).onSuccess(),this.safeEmit(Tt.LIVE_STREAMING_ERROR,l,d)},s.onLiveStreamWarning=(l,d)=>{Ue.reportApiInvoke(this._sessionId,{name:Zn.ON_LIVE_STREAM_WARNING,options:[l,d],tag:bn.TRACER}).onSuccess(),this.safeEmit(Tt.LIVE_STREAMING_WARNING,l,d)},s.on(Cd.REQUEST_WORKER_MANAGER_LIST,(l,d,p)=>{if(!this._joinInfo)return p(new Q(W.INVALID_OPERATION,"can not find join info to get worker manager"));zD(l,this._joinInfo,this._axiosCancelSource.token,Qn).then(d).catch(p)})};switch(n){case sr.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=r(),i(this._liveRawStreamingClient)),this._liveRawStreamingClient;case sr.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=r(),i(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case sr.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=r(),this._injectStreamingClient.on(Cd.REQUEST_WORKER_MANAGER_LIST,(s,l,d)=>{if(!this._joinInfo)return d(new Q(W.INVALID_OPERATION,"can not find join info to get worker manager"));zD(s,this._joinInfo,this._axiosCancelSource.token,Qn).then(l).catch(d)}),this._injectStreamingClient.onInjectStatusChange=(s,l,d)=>{this.emit(Tt.INJECT_STREAM_STATUS,s,l,d)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){if(!this._joinInfo)return new Q(W.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:n,sendResolutionHeight:r}=this.getLocalVideoStats(),i={width:n,height:r};this._channelMediaRelayClient=new pq(this._joinInfo,this._clientId,this._config.websocketRetryConfig||Qn,this._config.httpRetryConfig||Qn,i),this._channelMediaRelayClient.on("state",s=>{s===Ti.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.safeEmit(Tt.CHANNEL_MEDIA_RELAY_STATE,s)}),this._channelMediaRelayClient.on("event",s=>{this.safeEmit(Tt.CHANNEL_MEDIA_RELAY_EVENT,s)}),this._statsCollector.onStatsChanged=(s,l)=>{var d;s==="resolution"&&((d=this._channelMediaRelayClient)===null||d===void 0||d.setVideoProfile(l))}}return this._channelMediaRelayClient}_handleGatewayEvents(){this._gateway.on(Tn.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(Tn.CONNECTION_STATE_CHANGE,(n,r,i)=>{var s;if(i===Wt.FALLBACK)return;const l=()=>{this.safeEmit(Tt.CONNECTION_STATE_CHANGE,n,r,i)};if(Ue.reportApiInvoke(this._sessionId||((s=this._gateway.joinInfo)===null||s===void 0?void 0:s.sid)||null,{name:Zn.CONNECTION_STATE_CHANGE,options:[n,r,i],tag:bn.TRACER}).onSuccess(JSON.stringify({cur:n,prev:r,reason:i})),U.info("[".concat(this._clientId,"] connection state change: ").concat(r," -> ").concat(n)),n==="DISCONNECTED")return this._reset(),void l();if(n==="RECONNECTING")this._users.forEach(p=>{p._trust_in_room_=!1,p._trust_audio_enabled_state_=!1,p._trust_video_enabled_state_=!1,p._trust_audio_mute_state_=!1,p._trust_video_mute_state_=!1,p._trust_audio_stream_added_state_=!1,p._trust_video_stream_added_state_=!1,p._audioSSRC=void 0,p._videoSSRC=void 0,p._videoOrtc=void 0,p._audioOrtc=void 0,p._cname=void 0,p._rtxSsrcId=void 0}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(n==="CONNECTED"){var d;this._streamFallbackTypeCacheMap.forEach((p,v)=>{this._gateway.setStreamFallbackOption(v,p).catch(E=>{U.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),E)})}),this._remoteStreamTypeCacheMap.forEach((p,v)=>{this._gateway.setRemoteVideoStreamType(v,p).catch(E=>{U.warning("[".concat(this._clientId,"] auto set remote stream type failed"),E)})}),this._remoteDefaultVideoStreamType!==void 0&&((d=this._joinInfo)===null||d===void 0?void 0:d.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{U.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(p=>{U.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(p))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(p=>!p._trust_in_room_).forEach(p=>{U.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(p.uid)),this._handleUserOffline({uid:p.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(p=>{p._trust_audio_mute_state_||(U.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(p.uid)),this._handleMuteStream(p.uid,"audio",!1)),p._trust_video_mute_state_||(U.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(p.uid)),this._handleMuteStream(p.uid,"video",!1)),p._trust_audio_enabled_state_||(U.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(p.uid)),this._handleSetStreamLocalEnable("audio",p.uid,!0)),p._trust_video_enabled_state_||(U.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(p.uid)),this._handleSetStreamLocalEnable("video",p.uid,!0)),p._trust_video_stream_added_state_||(U.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(p.uid)),this._handleResetAddStream(p,"video")),p._trust_audio_stream_added_state_||(U.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(p.uid)),this._handleResetAddStream(p,"audio")),p._video_added_||p._audio_added_||(U.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(p.uid)),this._handleRemoveStream({uid:p.uid,uint_id:p._uintid}))}))},1e3)}l()}),this._gateway.on(Tn.REQUEST_NEW_GATEWAY_LIST,(n,r)=>{if(!this._joinInfo)return r(new Q(W.UNEXPECTED_ERROR,"can not recover, no join info"));tC(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Qn,this.store).then(i=>{this._joinInfo&&(this._joinInfo.apResponse=i.gatewayInfo.res,this._joinInfo.gatewayAddrs=i.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=i.gatewayInfo.uni_lbs_ip),n(i.gatewayInfo.gatewayAddrs.map(s=>{if(this._joinInfo&&this._joinInfo.proxyServer){const l=s.address.split(":");return"wss://".concat(this._joinInfo.proxyServer,"/ws/?h=").concat(l[0],"&p=").concat(l[1])}return"wss://".concat(s.address)}))}).catch(r)}),this._gateway.on(Tn.NETWORK_QUALITY,n=>{this._networkQualitySensitivity==="normal"&&this.safeEmit(Tt.NETWORK_QUALITY,n)}),this._gateway.on(Tn.STREAM_TYPE_CHANGE,(n,r)=>{this.safeEmit(Tt.STREAM_TYPE_CHANGED,n,r),Ue.reportApiInvoke(this._sessionId,{name:Zn.STREAM_TYPE_CHANGE,options:[n,r],tag:bn.TRACER}).onSuccess(JSON.stringify({uid:n,streamType:r}))}),this._gateway.on(Tn.IS_P2P_DISCONNECTED,n=>{this._p2pChannel.isP2PDisconnected()?n(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?n(!1):n(!0)}),this._gateway.on(Tn.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(Tn.REQUEST_P2P_CONNECTION_PARAMS,async(n,r,i)=>{try{r(await this._p2pChannel.startP2PConnection(n))}catch(s){i(s)}}),this._gateway.on(Tn.JOIN_RESPONSE,(n,r)=>{const{dtlsParameters:i,iceParameters:s,candidates:l,rtpCapabilities:d,setup:p,cname:v}=yL(n.ortc,r);this._p2pChannel.connect(s,i,l,d,p,v)}),this._gateway.on(Tn.REQUEST_DC_CONNECTION_PARAMS,n=>{n(this._p2pChannel.getEstablishParams())}),this._gateway.on(Tn.RESET_SIGNAL,n=>{this._p2pChannel.resetConnection(n),this._handleGatewaySignalEvents()}),this._gateway.on(Tn.DATACHANNEL_FAILBACK,()=>{this._joinGateway()}),this._gateway.on(Tn.DATACHANNEL_PRECONNECT,async(n,r,i,s)=>{var l,d,p,v,E,T;await this._p2pChannel.startP2PConnection({turnServer:(l=this._joinInfo)===null||l===void 0?void 0:l.turnServer},!0);const C=function(R,L){let j;return L&&L.ip&&typeof L.port=="number"?(j=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:L.ip,port:L.port.toString(),type:"host",extension:{}}],U.debug("Using remote candidate from AP ".concat(L.ip,":").concat(L.port)),L.ip6&&(j.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:L.ip6,port:L.port.toString(),type:"host",extension:{}}),U.debug("Using IPV6 remote candidate from AP ".concat(L.ip6,":").concat(L.port)))):j=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:R.ip,port:R.port.toString(),type:"host",extension:{}}],j}(n,r);return this._p2pChannel.preConnect({iceUfrag:"".concat((d=this._joinInfo)===null||d===void 0?void 0:d.apResponse.cid,"_").concat((p=this._joinInfo)===null||p===void 0?void 0:p.apResponse.cert),icePwd:"".concat((v=this._joinInfo)===null||v===void 0?void 0:v.apResponse.cid,"_").concat((E=this._joinInfo)===null||E===void 0?void 0:E.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:(T=ie("FINGERPRINT"))!==null&&T!==void 0?T:n.fingerprint}]},C,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(i).catch(s)})}_handleGatewaySignalEvents(){this._gateway.signal.on(Et.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(Et.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(Et.ON_ADD_AUDIO_STREAM,n=>this._handleAddAudioOrVideoStream("audio",n.uid,n.ssrcId,n.cname,n.uint_id,n.ortc)),this._gateway.signal.on(Et.ON_ADD_VIDEO_STREAM,n=>this._handleAddAudioOrVideoStream("video",n.uid,n.ssrcId,n.cname,n.uint_id,n.ortc,n.rtxSsrcId)),this._gateway.signal.on(Et.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(Et.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(Et.MUTE_AUDIO,n=>this._handleMuteStream(n.uid,"audio",!0)),this._gateway.signal.on(Et.UNMUTE_AUDIO,n=>this._handleMuteStream(n.uid,"audio",!1)),this._gateway.signal.on(Et.MUTE_VIDEO,n=>this._handleMuteStream(n.uid,"video",!0)),this._gateway.signal.on(Et.UNMUTE_VIDEO,n=>this._handleMuteStream(n.uid,"video",!1)),this._gateway.signal.on(Et.RECEIVE_METADATA,n=>{const r=qy(n.metadata);this.safeEmit(Tt.RECEIVE_METADATA,n.uid,r)}),this._gateway.signal.on(Et.ON_DATA_STREAM,n=>{n.seq&&delete n.seq,n.payload=qy(n.payload),this.safeEmit(Tt.STREAM_MESSAGE,n.uid,n.payload),this.onStreamMessage&&this.onStreamMessage(n)}),this._gateway.signal.on(Et.ON_CRYPT_ERROR,()=>{Pp(()=>{U.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(Tt.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(Et.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(Et.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{U.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0),this.safeEmit(Tt.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(Et.ON_STREAM_FALLBACK_UPDATE,n=>{U.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(n.stream_id,", attr: ").concat(n.stream_type)),this.safeEmit(Tt.STREAM_FALLBACK,n.stream_id,n.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(Et.ON_PUBLISH_STREAM,n=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:n.proxy})),U.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(n))))}),this._gateway.signal.on(Et.ENABLE_LOCAL_VIDEO,n=>{this._handleSetStreamLocalEnable("video",n.uid,!0)}),this._gateway.signal.on(Et.DISABLE_LOCAL_VIDEO,n=>{this._handleSetStreamLocalEnable("video",n.uid,!1)}),this._gateway.signal.on($e.REQUEST_TIMEOUT,(n,r)=>{if(this._joinInfo)switch(n){case Je.PUBLISH:{if(!r)return;const p=(r=r).ortc;if(p){var i,s,l,d;const v=p.some(C=>{let{stream_type:R}=C;return R===cr.Audio}),E=p.some(C=>{let{stream_type:R}=C;return R!==cr.Audio}),T=p.some(C=>{let{stream_type:R}=C;return R===cr.Screen||R===cr.ScreenLow});r.state==="offer"&&Ue.publish(this._joinInfo.sid,{eventElapse:ta.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:W.TIMEOUT,audio:v,video:E,p2pid:r.p2p_id,publishRequestid:this.store.pubId,screenshare:T,audioName:v?(i=p.find(C=>{let{stream_type:R}=C;return R===cr.Audio}))===null||i===void 0||(s=i.ssrcs[0])===null||s===void 0?void 0:s.ssrcId.toString():void 0,videoName:E?(l=p.find(C=>{let{stream_type:R}=C;return R!==cr.Audio}))===null||l===void 0||(d=l.ssrcs[0])===null||d===void 0?void 0:d.ssrcId.toString():void 0})}break}case Je.SUBSCRIBE:(r=r)&&Ue.subscribe(this._joinInfo.sid,{succ:!1,ec:W.TIMEOUT,audio:r.stream_type===ut.AUDIO,video:r.stream_type===ut.VIDEO,peerid:r.stream_id,subscribeRequestid:r.ssrcId,p2pid:this.store.p2pId,eventElapse:ta.measureFromSubscribeStart(this.store.clientId,r.ssrcId)})}}),this._gateway.signal.on(Et.ON_P2P_OK,n=>{this.uid,this._uid}),this._gateway.signal.on(Et.ON_PUBLISHED_USER_LIST,n=>{if(n==null||!n.users)return;ie("BLOCK_LOCAL_CLIENT")&&(n.users=n.users.filter(s=>!iu(s.audio_ssrc,this.channelName)));const r=[],i=[];for(const s of n.users){let l=this._users.find(T=>T.uid===s.stream_id);l?l._trust_in_room_=!0:(l=new iC(s.stream_id,s.stream_id),this._users.push(l),this.getListeners(Tt.PUBLISHED_USER_LIST).length===0&&(U.debug("[".concat(this._clientId,"] user online"),s.stream_id),this.safeEmit(Tt.USER_JOINED,l)));const d=er.Audio&s.stream_type,p=(er.Video|er.LwoVideo)&s.stream_type,v=d&&l.hasAudio,E=p&&l.hasVideo;p&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0,l._videoSSRC=s.video_ssrc,l._rtxSsrcId=s.video_rtx),d&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0,l._audioSSRC=s.audio_ssrc),d&&!v&&this.getListeners(Tt.PUBLISHED_USER_LIST).length===0&&(U.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published audio")),this.safeEmit(Tt.USER_PUBLISHED,l,"audio")),p&&!E&&this.getListeners(Tt.PUBLISHED_USER_LIST).length===0&&(U.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published video")),this.safeEmit(Tt.USER_PUBLISHED,l,"video")),(d&&!v||p&&!E)&&r.push(l),p&&this._p2pChannel.hasPendingRemoteMedia(l,"video")&&i.push({user:l,mediaType:"video"}),d&&this._p2pChannel.hasPendingRemoteMedia(l,"audio")&&i.push({user:l,mediaType:"audio"})}i.length>0&&(U.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(i.map(s=>"user: ".concat(s.user.uid,", mediaType: ").concat(s.mediaType)).join("; ")," ")),this.massSubscribe(i).catch(s=>{U.error("[".concat(this._clientId,"] mass resubscribe error"),s.toString())})),this.getListeners(Tt.PUBLISHED_USER_LIST).length>0?(U.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(r.map(s=>s.uid).join(", "))),this.safeEmit(Tt.PUBLISHED_USER_LIST,r)):U.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(r.map(s=>s.uid).join(", ")))})}_handleP2PChannelEvents(){this._p2pChannel.on(xt.RequestMuteLocal,async(n,r,i)=>{if(this._joinInfo)try{await this._gateway.muteLocal(n,this._joinInfo.stringUid||this._joinInfo.uid),r()}catch(s){s.code===W.DISCONNECT_P2P?r():i(s)}else r()}),this._p2pChannel.on(xt.RequestUnmuteLocal,async(n,r,i)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(n,this._joinInfo.stringUid||this._joinInfo.uid),r()}catch(s){s.code===W.DISCONNECT_P2P?r():i(s)}else r()}),this._p2pChannel.on(xt.RequestRePublish,(n,r,i)=>{this.publish(n,!1).then(r).catch(i)}),this._p2pChannel.on(xt.RequestReSubscribe,async(n,r,i)=>{try{for(const{user:s,kind:l}of n)l===ut.VIDEO?await this.subscribe(s,"video"):await this.subscribe(s,"audio");r()}catch(s){i(s)}}),this._p2pChannel.on(xt.RequestUploadStats,(n,r)=>{this._gateway.uploadStats(n,r)}),this._p2pChannel.on(xt.MediaReconnectStart,n=>{this.safeEmit(Tt.MEDIA_RECONNECT_START,n)}),this._p2pChannel.on(xt.MediaReconnectEnd,n=>{this.safeEmit(Tt.MEDIA_RECONNECT_END,n)}),this._p2pChannel.on(xt.NeedSignalRTT,n=>{n(this._gateway.getSignalRTT())}),this._p2pChannel.on(xt.RequestRestartICE,async n=>{const r=await this._p2pChannel.restartICE(n),i=await r.next();if(i.done)return;const s=i.value;let l;try{l=await this._gateway.restartICE({iceParameters:s})}catch(p){return void r.throw(p)}const{iceParameters:d}=function(p){const v=p.iceParameters;return{iceParameters:{iceUfrag:v.iceUfrag,icePwd:v.icePwd}}}(l);await r.next({remoteIceParameters:d})}),this._p2pChannel.on(xt.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(xt.RequestReconnectPC,async()=>{var n;const{iceParameters:r,dtlsParameters:i,rtpCapabilities:s}=await this._p2pChannel.startP2PConnection({turnServer:(n=this._joinInfo)===null||n===void 0?void 0:n.turnServer}),{gatewayEstablishParams:l,gatewayAddress:d}=await this._gateway.reconnectPC({iceParameters:r,dtlsParameters:i,rtpCapabilities:s}),{dtlsParameters:p,iceParameters:v,candidates:E,rtpCapabilities:T,setup:C,cname:R}=yL(l,d);await this._p2pChannel.connect(v,p,E,T,C,R),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(xt.RequestUnpublishForReconnectPC,async(n,r,i)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(n,this._uid),r()):i()}),this._p2pChannel.on(xt.P2PLost,()=>{this.safeEmit(Tt.P2P_LOST,this.store.uid)}),this._p2pChannel.on(xt.UpdateVideoEncoder,n=>{n._encoderConfig&&this._gateway.setVideoProfile(n._encoderConfig)}),this._p2pChannel.on(xt.ConnectionTypeChange,n=>{this.safeEmit(Tt.IS_USING_CLOUD_PROXY,n)}),this._p2pChannel.on(xt.RequestLowStreamParameter,n=>{n(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(xt.QueryClientConnectionState,n=>{n(this.connectionState)})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(n){if(this.connectionState!=="CONNECTED"||!this._joinInfo)throw new Q(W.INVALID_OPERATION,"[".concat(this._clientId,"] Client did not join channel"));if(this._inspect)throw new Q(W.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));if(!n)throw new Q(W.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig is necessary"));if(!n.inspectType||!Array.isArray(n.inspectType))throw new Q(W.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));{const r=[...new Set(n.inspectType)];r.forEach(i=>{if(!["supervise","moderation"].includes(i))throw new Q(W.INVALID_PARAMS,"[".concat(this._clientId,"] ").concat(i," is not a valid inspect type."))}),n.inspectType=r}if(n&&n.extraInfo&&n.extraInfo.length>1024)throw new Q(W.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const r=new hg(n);this._inspect=r,this.handleVideoInspectEvents(this._inspect),await r.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},Qn)}catch(r){throw Array.isArray(r)?r[0]:r}}async disableContentInspect(){if(!this._inspect)throw new Q(W.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(n){throw Array.isArray(n)?n[0]:n}}async setImageModeration(n,r){if(Sd(n,"enabled"),n){if(!r)throw new Q(W.INVALID_PARAMS,"[".concat(this._clientId,"] config is necessary"));if(sn(r.interval,"interval",1e3,1/0),this.connectionState!=="CONNECTED"||!this._joinInfo)throw new Q(W.INVALID_OPERATION,"[".concat(this._clientId,'] can not enable image moderation, not joined"'));try{if(this._moderation)return void this._moderation.updateConfig(r);const i=new jC(r);this._moderation=i,this.handleImageModerationEvents(this._moderation),await i.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},Qn)}catch(i){throw Array.isArray(i)?i[0]:i}}else{if(!this._moderation)throw new Q(W.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(i){throw Array.isArray(i)?i[0]:i}}}handleImageModerationEvents(n){n.on(ea.CONNECTION_STATE_CHANGE,(r,i)=>{switch(this.emit(Tt.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,r,i),r){case go.CONNECTED:if(this.connectionState!=="CONNECTED")throw this.setImageModeration(!1),new Q(W.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");n.inspectImage()}}),n.on(ea.CLIENT_LOCAL_VIDEO_TRACK,r=>{r(this.localTracks.filter(i=>i.trackMediaType==="video")[0])})}handleVideoInspectEvents(n){n.on(lr.CONNECTION_STATE_CHANGE,(r,i)=>{switch(this.emit(Tt.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,r,i),i){case Po.CONNECTED:if(this.connectionState!=="CONNECTED")return void this.emit(Tt.CONTENT_INSPECT_ERROR,new Q(W.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));n.inspectImage()}}),n.on(lr.INSPECT_RESULT,(r,i)=>{var s;if((i==null?void 0:i.code)===W.INVALID_OPERATION&&this.connectionState==="DISCONNECTED")return U.debug("Stop inspect content because that has left channel"),this==null||(s=this._inspect)===null||s===void 0||s.close(),void(this._inspect=void 0);this.emit(Tt.CONTENT_INSPECT_RESULT,r,i)}),n.on(lr.CLIENT_LOCAL_VIDEO_TRACK,r=>{r(this.localTracks.filter(i=>i.trackMediaType==="video")[0])})}getJoinChannelServiceRecords(){return U.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(n){Sd(n,"enabled"),rn("ENABLE_PUBLISH_AUDIO_FILTER",n),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(n)}_handleResetAddStream(n,r){switch(r){case"audio":n._audio_added_=!1,n._trust_audio_stream_added_state_=!0;break;case"video":n._video_added_=!1,n._trust_video_stream_added_state_=!0}}}).prototype,"leave",[k2],Object.getOwnPropertyDescriptor(Ae.prototype,"leave"),Ae.prototype),_e(Ae.prototype,"publish",[L2],Object.getOwnPropertyDescriptor(Ae.prototype,"publish"),Ae.prototype),_e(Ae.prototype,"unpublish",[M2],Object.getOwnPropertyDescriptor(Ae.prototype,"unpublish"),Ae.prototype),_e(Ae.prototype,"subscribe",[U2],Object.getOwnPropertyDescriptor(Ae.prototype,"subscribe"),Ae.prototype),_e(Ae.prototype,"massSubscribe",[F2],Object.getOwnPropertyDescriptor(Ae.prototype,"massSubscribe"),Ae.prototype),_e(Ae.prototype,"unsubscribe",[V2],Object.getOwnPropertyDescriptor(Ae.prototype,"unsubscribe"),Ae.prototype),_e(Ae.prototype,"massUnsubscribe",[j2],Object.getOwnPropertyDescriptor(Ae.prototype,"massUnsubscribe"),Ae.prototype),_e(Ae.prototype,"setLowStreamParameter",[B2],Object.getOwnPropertyDescriptor(Ae.prototype,"setLowStreamParameter"),Ae.prototype),_e(Ae.prototype,"enableDualStream",[$2],Object.getOwnPropertyDescriptor(Ae.prototype,"enableDualStream"),Ae.prototype),_e(Ae.prototype,"disableDualStream",[H2],Object.getOwnPropertyDescriptor(Ae.prototype,"disableDualStream"),Ae.prototype),_e(Ae.prototype,"setClientRole",[W2],Object.getOwnPropertyDescriptor(Ae.prototype,"setClientRole"),Ae.prototype),_e(Ae.prototype,"setProxyServer",[G2],Object.getOwnPropertyDescriptor(Ae.prototype,"setProxyServer"),Ae.prototype),_e(Ae.prototype,"setTurnServer",[z2],Object.getOwnPropertyDescriptor(Ae.prototype,"setTurnServer"),Ae.prototype),_e(Ae.prototype,"setLicense",[K2],Object.getOwnPropertyDescriptor(Ae.prototype,"setLicense"),Ae.prototype),_e(Ae.prototype,"startProxyServer",[Y2],Object.getOwnPropertyDescriptor(Ae.prototype,"startProxyServer"),Ae.prototype),_e(Ae.prototype,"stopProxyServer",[q2],Object.getOwnPropertyDescriptor(Ae.prototype,"stopProxyServer"),Ae.prototype),_e(Ae.prototype,"setLocalAccessPointsV2",[X2],Object.getOwnPropertyDescriptor(Ae.prototype,"setLocalAccessPointsV2"),Ae.prototype),_e(Ae.prototype,"setLocalAccessPoints",[J2],Object.getOwnPropertyDescriptor(Ae.prototype,"setLocalAccessPoints"),Ae.prototype),_e(Ae.prototype,"setRemoteDefaultVideoStreamType",[Q2],Object.getOwnPropertyDescriptor(Ae.prototype,"setRemoteDefaultVideoStreamType"),Ae.prototype),_e(Ae.prototype,"setRemoteVideoStreamType",[Z2],Object.getOwnPropertyDescriptor(Ae.prototype,"setRemoteVideoStreamType"),Ae.prototype),_e(Ae.prototype,"setStreamFallbackOption",[eM],Object.getOwnPropertyDescriptor(Ae.prototype,"setStreamFallbackOption"),Ae.prototype),_e(Ae.prototype,"setEncryptionConfig",[tM],Object.getOwnPropertyDescriptor(Ae.prototype,"setEncryptionConfig"),Ae.prototype),_e(Ae.prototype,"renewToken",[nM],Object.getOwnPropertyDescriptor(Ae.prototype,"renewToken"),Ae.prototype),_e(Ae.prototype,"enableAudioVolumeIndicator",[rM],Object.getOwnPropertyDescriptor(Ae.prototype,"enableAudioVolumeIndicator"),Ae.prototype),_e(Ae.prototype,"startLiveStreaming",[iM],Object.getOwnPropertyDescriptor(Ae.prototype,"startLiveStreaming"),Ae.prototype),_e(Ae.prototype,"setLiveTranscoding",[oM],Object.getOwnPropertyDescriptor(Ae.prototype,"setLiveTranscoding"),Ae.prototype),_e(Ae.prototype,"stopLiveStreaming",[aM],Object.getOwnPropertyDescriptor(Ae.prototype,"stopLiveStreaming"),Ae.prototype),_e(Ae.prototype,"addInjectStreamUrl",[sM],Object.getOwnPropertyDescriptor(Ae.prototype,"addInjectStreamUrl"),Ae.prototype),_e(Ae.prototype,"removeInjectStreamUrl",[cM],Object.getOwnPropertyDescriptor(Ae.prototype,"removeInjectStreamUrl"),Ae.prototype),_e(Ae.prototype,"startChannelMediaRelay",[lM],Object.getOwnPropertyDescriptor(Ae.prototype,"startChannelMediaRelay"),Ae.prototype),_e(Ae.prototype,"updateChannelMediaRelay",[uM],Object.getOwnPropertyDescriptor(Ae.prototype,"updateChannelMediaRelay"),Ae.prototype),_e(Ae.prototype,"stopChannelMediaRelay",[dM],Object.getOwnPropertyDescriptor(Ae.prototype,"stopChannelMediaRelay"),Ae.prototype),_e(Ae.prototype,"sendCustomReportMessage",[hM],Object.getOwnPropertyDescriptor(Ae.prototype,"sendCustomReportMessage"),Ae.prototype),_e(Ae.prototype,"pickSVCLayer",[pM],Object.getOwnPropertyDescriptor(Ae.prototype,"pickSVCLayer"),Ae.prototype),_e(Ae.prototype,"enableContentInspect",[fM],Object.getOwnPropertyDescriptor(Ae.prototype,"enableContentInspect"),Ae.prototype),_e(Ae.prototype,"disableContentInspect",[mM],Object.getOwnPropertyDescriptor(Ae.prototype,"disableContentInspect"),Ae.prototype),_e(Ae.prototype,"setImageModeration",[gM],Object.getOwnPropertyDescriptor(Ae.prototype,"setImageModeration"),Ae.prototype),_e(Ae.prototype,"getJoinChannelServiceRecords",[vM],Object.getOwnPropertyDescriptor(Ae.prototype,"getJoinChannelServiceRecords"),Ae.prototype),_e(Ae.prototype,"setPublishAudioFilterEnabled",[EM],Object.getOwnPropertyDescriptor(Ae.prototype,"setPublishAudioFilterEnabled"),Ae.prototype),Ae);class VX extends fP{set currentState(r){r!==this._currentState&&(this._currentState=r,this.safeEmit(Zi.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),N(this,"audioBuffer",void 0),N(this,"sourceNode",void 0),N(this,"startPlayTime",0),N(this,"startPlayOffset",0),N(this,"pausePlayTime",0),N(this,"options",void 0),N(this,"currentLoopCount",0),N(this,"currentPlaybackSpeed",100),N(this,"_currentState","stopped"),this.audioBuffer=r,this.options=i,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(r){this.currentState==="stopped"?(this.options=r,this.startPlayOffset=this.options.startPlayTime||0):U.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(r){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=r,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=r))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}setAudioBufferPlaybackSpeed(r){this.sourceNode&&(this.currentState==="playing"&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=r/100),this.currentPlaybackSpeed=r}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const r=this.context.createBufferSource();return r.buffer=this.audioBuffer,r.loop=!!this.options.loop,r.connect(this.outputNode),r.playbackRate.value=this.currentPlaybackSpeed/100,r}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const SM=new Map;async function jX(n,r){let i=null;if(typeof n=="string"){const l=SM.get(n);if(l)return U.debug("use cached audio resource: ",n),l;try{i=(await es(()=>Ao.get(n,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(d){throw new Q(W.FETCH_AUDIO_FILE_FAILED,d.toString())}}else i=await new Pe((d,p)=>{const v=new FileReader;v.onload=E=>{E.target?d(E.target.result):p(new Q(W.READ_LOCAL_AUDIO_FILE_ERROR))},v.onerror=()=>{p(new Q(W.READ_LOCAL_AUDIO_FILE_ERROR))},v.readAsArrayBuffer(n)});const s=await function(l){const d=Id();return new Pe((p,v)=>{d.decodeAudioData(l,E=>{p(E)},E=>{v(new Q(W.DECODE_AUDIO_FILE_FAILED,E.toString()))})})}(i);return typeof n=="string"&&r&&SM.set(n,s),s}function yM(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function fg(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?yM(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):yM(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function BC(n,r,i,s){i.optimizationMode&&(s&&s.width&&s.height?(i.encoderConfig=fg(fg({},s),{},{bitrateMin:s.bitrateMin,bitrateMax:s.bitrateMax}),i.optimizationMode!=="motion"&&i.optimizationMode!=="detail"||(r.contentHint=i.optimizationMode,r.contentHint===i.optimizationMode?U.debug("[".concat(n,"] set content hint to"),i.optimizationMode):U.debug("[".concat(n,"] set content hint failed")))):U.warning("[".concat(n,"] can not apply optimization mode bitrate config, no encoderConfig")))}const BX=Ht().name;function $X(n,r,i,s){let l,d=0,p=null;return new Pe((v,E)=>{setTimeout(()=>{l&&(l(),v(d))},r),l=hP(()=>{(function(){d>s&&l&&(l(),v(d));const T=i.getContext("2d");if(!T){const L=new Q(W.UNEXPECTED_ERROR,"can not get canvas 2d context.");return U.error(L.toString()),void E(L)}T.drawImage(n,0,0,160,120);const C=T.getImageData(0,0,i.width,i.height),R=Math.floor(C.data.length/3);if(p){for(let L=0;L<R;L+=3)if(C.data[L]!==p[L])return d+=1,void(p=C.data);p=C.data}else p=C.data})()},30)})}class Yp{constructor(r,i){N(this,"id",0),N(this,"element",void 0),N(this,"peerPair",void 0),N(this,"context",void 0),N(this,"audioPlayerElement",void 0),N(this,"audioTrack",void 0),Yp.count+=1,this.id=Yp.count,this.element=r,this.context=i}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=r=>{const i=document.createElement("audio");i.srcObject=new MediaStream([r.track]),i.play(),this.audioPlayerElement=i}}async switchSdp(){if(!this.peerPair)return;const r=async(s,l)=>{const d=l==="offer"?await s.createOffer():await s.createAnswer();return await s.setLocalDescription(d),s.iceGatheringState==="complete"?s.localDescription:new Pe(p=>{s.onicegatheringstatechange=()=>{s.iceGatheringState==="complete"&&p(s.localDescription)}})},i=async(s,l)=>await s.setRemoteDescription(l);try{const s=await r(this.peerPair[0],"offer");await i(this.peerPair[1],s);const l=await r(this.peerPair[1],"answer");await i(this.peerPair[0],l)}catch(s){throw new Q(W.LOCAL_AEC_ERROR,s.toString()).print()}}async getTracksFromMediaElement(r){if(this.audioTrack)return this.audioTrack;let i;try{r instanceof HTMLVideoElement&&(r.captureStream?r.captureStream():r.mozCaptureStream()),i=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(r).connect(i)}catch(l){throw new Q(W.LOCAL_AEC_ERROR,l.toString()).print()}if(!i)throw new Q(W.LOCAL_AEC_ERROR,"no dest node when local aec").print();const s=i.stream.getAudioTracks()[0];return this.audioTrack=s,s}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const r=this.element,i=await this.getTracksFromMediaElement(r);this.peerPair&&this.peerPair[0].addTrack(i),await this.switchSdp()}close(){U.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(r=>{r.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var CM,mg;N(Yp,"count",0);const HX=window.AudioContext||window.webkitAudioContext,WX=new(CM=ze({report:Ue}),_e((mg=class{constructor(){N(this,"units",[]),N(this,"context",void 0)}processExternalMediaAEC(n){if(!this._doesEnvironmentNeedAEC())return U.debug("the system does not need to process local aec"),-1;this.context||(this.context=new HX);let r=this.units.find(i=>i&&i.getElement()===n);return r||(r=new Yp(n,this.context),this.units.push(r)),r.startEchoCancellation(),U.debug("start processing local audio echo cancellation, id is",r.id),r.id}_doesEnvironmentNeedAEC(){return Ht().name!==qt.SAFARI}}).prototype,"processExternalMediaAEC",[CM],Object.getOwnPropertyDescriptor(mg.prototype,"processExternalMediaAEC"),mg.prototype),mg);function bM(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function TM(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?bM(Object(i),!0).forEach(function(s){N(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):bM(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}const $C=window||document;function RM(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!$C)return;const i=mr._cspEventHandlerPointer;if(i&&r)return void console.error(i,r);const s=l=>{if(!(l&&l.blockedURI&&(mr.onSecurityPolicyViolation||mr.getListeners(rs.SECURITY_POLICY_VIOLATION).length>0)))return;const d=l.blockedURI;ie("CSP_DETECTED_HOSTNAME_LIST").some(p=>d.includes(p))&&(mr.onSecurityPolicyViolation&&typeof mr.onSecurityPolicyViolation=="function"&&mr.onSecurityPolicyViolation(l),mr.getListeners(rs.SECURITY_POLICY_VIOLATION).length>0&&mr.safeEmit(rs.SECURITY_POLICY_VIOLATION,l))};i&&$C.removeEventListener("securitypolicyviolation",i),(r||n&&typeof n=="function"||mr.getListeners(rs.SECURITY_POLICY_VIOLATION).length>0)&&$C.addEventListener("securitypolicyviolation",s),mr._cspEventHandlerPointer=s}rn("PROCESS_ID","process-".concat(fn(8,""),"-").concat(fn(4,""),"-").concat(fn(4,""),"-").concat(fn(4,""),"-").concat(fn(12,""))),function(){const n=Ht();di.getDisplayMedia=function(r){return!!(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)}(),di.getStreamFromExtension=n.name===qt.CHROME&&Number(n.version)>34,di.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const r=new RTCPeerConnection;let i=!1;try{r.addTransceiver("audio"),i=!0}catch{}return r.close(),i}(),di.supportMinBitrate=n.name===qt.CHROME||n.name===qt.EDGE,di.supportSetRtpSenderParameters=function(){const r=Ht();return!window.RTCRtpSender||!window.RTCRtpSender.prototype.setParameters||!window.RTCRtpSender.prototype.getParameters?!1:!!Zl()||!(!yi()&&!_0())||r.name===qt.FIREFOX&&Number(r.version)>=64}(),n.name===qt.SAFARI&&(Number(n.version)>=14?di.supportDualStream=!0:di.supportDualStream=!1),di.webAudioMediaStreamDest=function(){const r=Ht();return!(r.name===qt.SAFARI&&Number(r.version)<12)}(),di.supportReplaceTrack=function(){return window.RTCRtpSender?typeof RTCRtpSender.prototype.replaceTrack=="function":!1}(),di.supportWebGL=typeof WebGLRenderingContext<"u",di.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Zl()||(di.webAudioWithAEC=!0),di.supportShareAudio=function(){const r=Ht();return(r.os===Yr.WIN_10||r.os===Yr.WIN_81||r.os===Yr.WIN_7||r.os===Yr.LINUX||r.os===Yr.MAC_OS)&&r.name===qt.CHROME&&Number(r.version)>=74}(),di.supportDualStreamEncoding=function(){const r=Ht();return ie("DISABLE_WEBAUDIO")?!0:r.name==="Safari"&&Number(r.version)>=14||!!(r.name==="Chrome"&&/Windows/i.test(r.os||"")&&Number(r.version)>=100&&ie("CHROME_DUAL_STREAM_USE_ENCODING"))}(),di.supportDataChannel=function(){return!!(WS(76)||function(r){const i=Ht();return!(i.name!==qt.FIREFOX||!i.osVersion)&&Number(i.version)>=r}(68)||function(r){const i=Ht();return!(i.name!==qt.SAFARI||!i.osVersion)&&Number(i.version)>=r}(14))}(),di.supportPCSetConfiguration=function(){const r=window.RTCPeerConnection;return!Dn()&&!!r&&r.prototype.setConfiguration instanceof Function}(),di.supportWebRTCEncodedTransform=function(){const r=Ht();return r.name==="Chrome"&&Number(r.version)>=86}(),U.info("browser compatibility",JSON.stringify(di),JSON.stringify(n))}(),function(){let n;try{n=window.localStorage.getItem("websdk_ng_global_parameter")}catch(r){return void U.error("Error loading sdk config",r.message)}if(n)try{const r=JSON.parse(window.atob(n)),i=Date.now();U.debug("Loading global parameters from cache",r),Object.keys(r).forEach(s=>{if(Object.prototype.hasOwnProperty.call(Qi,s)){const{value:l,expires:d}=r[s];if(d&&d<=i)return;nu[s]=l,Qi[s]=l}})}catch(r){U.error("Error loading mutableParamsCache: ".concat(n),r.message)}}(),Array.isArray(nu.AREAS)&&nu.AREAS.length>0&&Qy(nu.AREAS,!0);const mr=function(n){const r=new In,i=n,s={getListeners:r.getListeners.bind(r),on:(l,d)=>(function(p,v){p===rs.SECURITY_POLICY_VIOLATION&&RM(v,!0)}(l,d),r.on.bind(r)(l,d)),addListener:r.addListener.bind(r),once:r.once.bind(r),off:r.off.bind(r),removeAllListeners:r.removeAllListeners.bind(r),emit:r.emit.bind(r),safeEmit:r.safeEmit.bind(r)};return TM(TM({},i),s)}({__CLIENT_LIST__:ru,__TRACK_LIST__:Ip,VERSION:Zo,BUILD:ly,setParameter:(n,r,i)=>{U.debug("setParameter key:".concat(n,", value:").concat(JSON.stringify(r))),rn(n,r,i)},getParameter:ie,getSupportedCodec:async function(){let n={audio:[],video:[]};try{let r=new RTCPeerConnection;r.addTransceiver("video",{direction:"recvonly"}),r.addTransceiver("audio",{direction:"recvonly"});const i=(await r.createOffer()).sdp;if(!i)return n;r.close(),r=null,n=function(s){const l={video:[],audio:[]};return s.match(/ VP8/i)&&l.video.push("VP8"),s.match(/ VP9/i)&&l.video.push("VP9"),s.match(/ AV1/i)&&l.video.push("AV1"),s.match(/ H264/i)&&l.video.push("H264"),s.match(/ H265/i)&&l.video.push("H265"),s.match(/ opus/i)&&l.audio.push("OPUS"),s.match(/ PCMU/i)&&l.audio.push("PCMU"),s.match(/ PCMA/i)&&l.audio.push("PCMA"),s.match(/ G722/i)&&l.audio.push("G722"),l}(i)}catch(r){throw new Q(W.CREATE_OFFER_FAILED,r.toString&&r.toString()).print()}return n},checkSystemRequirements:function(){const n=Ue.reportApiInvoke(null,{name:Zn.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:bn.TRACER});let r=!1;try{const d=window.RTCPeerConnection,p=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,v=window.WebSocket;r=!!(d&&p&&v)}catch(d){return U.error("check system requirement failed: ",d),!1}let i=!1;const s=Ht();s.name===qt.CHROME&&Number(s.version)>=58&&(!qz()||Yz())&&(i=!0),s.name===qt.FIREFOX&&Number(s.version)>=56&&(i=!0),s.name===qt.OPERA&&Number(s.version)>=45&&(i=!0),s.name===qt.SAFARI&&Number(s.version)>=11&&(i=!0),(FN()||Ht().name===qt.QQ)&&(i=!0),U.debug("checkSystemRequirements, api:",r,"browser",i);const l=r&&i;return n.onSuccess(l),l},getDevices:function(n){return Mo.enumerateDevices(!0,!0,n)},getMicrophones:function(n){return Mo.getRecordingDevices(n)},getCameras:function(n){return Mo.getCamerasDevices(n)},getElectronScreenSources:gP,getPlaybackDevices:function(n){return Mo.getSpeakers(n)},createClient:function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const r=Ue.reportApiInvoke(null,{name:Zn.CREATE_CLIENT,options:[n],tag:bn.TRACER});try{TK(n)}catch(i){throw r.onError(i),i}return n.audioCodec===void 0&&(n.audioCodec="opus"),r.onSuccess(),new FX(Kp(Kp({forceWaitGatewayResponse:!0},n),{},{role:n.mode==="rtc"?"host":n.role||"audience"}))},createCameraVideoTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=Ue.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CREATE_CAM_VIDEO_TRACK,options:[fg({},n)]}),i=X0(n),s=fn(8,"track-cam-");let l=null;U.info("start create camera video track with config",JSON.stringify(n),"trackId",s);try{l=(await Oa({video:i},s)).getVideoTracks()[0]||null}catch(p){throw r.onError(p),p}if(!l){const p=new Q(W.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(p),p.throw()}n.optimizationMode&&BC(s,l,n,tu(n.encoderConfig));const d=new Vk(l,n,i,n.scalabiltyMode?x0(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,s);return r.onSuccess(d.getTrackId()),U.info("create camera video success, trackId:",s),d},createCustomVideoTrack:function(n){const r=Ue.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CREATE_CUSTOM_VIDEO_TRACK,options:[n]}),i=new rr(n.mediaStreamTrack,{width:n.width,height:n.height,frameRate:n.frameRate,bitrateMax:n.bitrateMax,bitrateMin:n.bitrateMin},n.scalabiltyMode?x0(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,fn(8,"track-cus-"),[pr.CUSTOM_TRACK]);return r.onSuccess(i.getTrackId()),U.info("create custom video track success with config",n,"trackId",i.getTrackId()),i},createScreenVideoTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable";const i=Ue.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CREATE_SCREEN_VIDEO_TRACK,options:[fg({},n),r]});n.encoderConfig?typeof n.encoderConfig=="string"||n.encoderConfig.width&&n.encoderConfig.height||(n.encoderConfig.width={max:1920},n.encoderConfig.height={max:1080}):n.encoderConfig="1080p_2";const s=fq(n),l=fn(8,"track-scr-v-");let d=null,p=null;const v=zn();if(!v.supportShareAudio&&r==="enable"){const C=new Q(W.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return i.onError(C),C.throw()}U.info("start create screen video track with config",n,"withAudio",r,"trackId",l);try{const C=await Oa({screen:s,screenAudio:r==="auto"?v.supportShareAudio:r==="enable"},l);d=C.getVideoTracks()[0]||null,p=C.getAudioTracks()[0]||null}catch(C){throw i.onError(C),C}if(!d){const C=new Q(W.UNEXPECTED_ERROR,"can not find track in media stream");return i.onError(C),C.throw()}if(!p&&r==="enable"){d&&d.stop();const C=new Q(W.SHARE_AUDIO_NOT_ALLOWED);return i.onError(C),C.throw()}n.optimizationMode||(n.optimizationMode="detail"),n.optimizationMode&&(BC(l,d,n,n.encoderConfig&&dy(n.encoderConfig)),n.encoderConfig&&typeof n.encoderConfig!="string"&&(n.encoderConfig.bitrateMin=n.encoderConfig.bitrateMax));const E=new rr(d,n.encoderConfig?dy(n.encoderConfig):{},n.scalabiltyMode?x0(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,l,[pr.SCREEN_TRACK]);if(!p)return i.onSuccess(E.getTrackId()),U.info("create screen video track success","video:",E.getTrackId()),E;const T=new ei(p,void 0,fn(8,"track-scr-a-"),!1,!0);return i.onSuccess([E.getTrackId(),T.getTrackId()]),U.info("create screen video track success","video:",E.getTrackId(),"audio:",T.getTrackId()),[E,T]},createMicrophoneAndCameraTracks:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=Ue.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CREATE_MIC_AND_CAM_TRACKS,options:[n,r]}),s=X0(r),l=ik(n),d=fn(8,"track-mic-"),p=fn(8,"track-cam-");let v=null,E=null;U.info("start create camera video track(".concat(p,") and microphone audio track(").concat(d,") with config, audio: ").concat(JSON.stringify(n),", video: ").concat(JSON.stringify(r)));try{const R=await Oa({audio:l,video:s},"".concat(d,"-").concat(p));v=R.getAudioTracks()[0],E=R.getVideoTracks()[0]}catch(R){throw i.onError(R),R}if(!v||!E){const R=new Q(W.UNEXPECTED_ERROR,"can not find tracks in media stream");return i.onError(R),R.throw()}r.optimizationMode&&BC(p,E,r,tu(r.encoderConfig));const T=new B0(v,n,l,d),C=new Vk(E,r,s,r.scalabiltyMode?x0(r.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},r.optimizationMode,p);return i.onSuccess([T.getTrackId(),C.getTrackId()]),U.info("create camera video track(".concat(p,") and microphone audio track(").concat(d,") success")),[T,C]},createMicrophoneAudioTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=Ue.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CREATE_MIC_AUDIO_TRACK,options:[n]}),i=ik(n),s=fn(8,"track-mic-");let l=null;U.info("start create microphone audio track with config",JSON.stringify(n),"trackId",s);try{l=(await Oa({audio:i},s)).getAudioTracks()[0]||null}catch(p){throw r.onError(p),p}if(!l){const p=new Q(W.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(p),p.throw()}const d=new B0(l,n,i,s);return r.onSuccess(d.getTrackId()),U.info("create microphone audio track success, trackId:",s),d},createCustomAudioTrack:function(n){const r=Ue.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CREATE_CUSTOM_AUDIO_TRACK,options:[n]}),i=new ei(n.mediaStreamTrack,n.encoderConfig?P0(n.encoderConfig):{},fn(8,"track-cus-"),!1,!0);return U.info("create custom audio track success with config",n,"trackId",i.getTrackId()),r.onSuccess(i.getTrackId()),i},createBufferSourceAudioTrack:async function(n){const r=Ue.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CREATE_BUFFER_AUDIO_TRACK,options:[n]});if(ie("DISABLE_WEBAUDIO"))throw new Q(W.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");const i=fn(8,"track-buf-");U.info("start create buffer source audio track with config",JSON.stringify(n),"trackId",i);const s=n.source;if(!(n.source instanceof AudioBuffer))try{n.source=await jX(n.source,n.cacheOnlineFile)}catch(p){return r.onError(p),p.throw()}const l=new VX(n.source),d=new GY(s,l,n.encoderConfig?P0(n.encoderConfig):{},i);return U.info("create buffer source audio track success, trackId:",i),r.onSuccess(d.getTrackId()),d},setAppType:function(n){if(U.debug("setAppType: ".concat(n)),!(Number.isInteger(n)&&n>=0))throw U.debug("Invalid appType"),new Q(W.INVALID_PARAMS,"invalid app type",n);rn("APP_TYPE",Math.floor(n))},setLogLevel:function(n){U.setLogLevel(n)},enableLogUpload:function(){ie("USE_NEW_LOG")?rn("UPLOAD_LOG",!0):U.enableLogUpload()},disableLogUpload:function(){ie("USE_NEW_LOG")?rn("UPLOAD_LOG",!1):U.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new JD},checkAudioTrackIsActive:async function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const i=Ue.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[r]});if(!(n instanceof ei||n instanceof cg)){const E=new Q(W.INVALID_TRACK,"the parameter is not a audio track");return i.onError(E),E.throw()}r&&r<1e3&&(r=1e3);const s=n instanceof ei?n.getTrackLabel():"remote_track",l=n.getVolumeLevel();let d=l,p=l;const v=Date.now();return new Pe(E=>{const T=setInterval(()=>{const C=n.getVolumeLevel();d=C>d?C:d,p=C<p?C:p;const R=d-p>1e-4,L=Date.now()-v;if(R||L>r){clearInterval(T);const j=R,Y={duration:L,deviceLabel:s,maxVolumeLevel:d,result:j};U.info("[track-".concat(n.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(Y))),i.onSuccess(Y),E(j)}},200)})},checkVideoTrackIsActive:async function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const i=Ue.reportApiInvoke(null,{tag:bn.TRACER,name:Zn.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[r]});if(!(n instanceof rr||n instanceof sg)){const L=new Q(W.INVALID_TRACK,"the parameter is not a video track");return i.onError(L),L.throw()}const s=4;r&&r<1e3&&(r=1e3);const l=n instanceof rr?n.getTrackLabel():"remote_track",d=n.getMediaStreamTrack(!0),p=document.createElement("video");p.style.width="1px",p.style.height="1px",p.setAttribute("muted",""),p.muted=!0,p.setAttribute("playsinline",""),p.controls=!1,(yi()||_0())&&(p.style.opacity="0.01",p.style.position="fixed",p.style.left="0",p.style.top="0",document.body.appendChild(p)),p.srcObject=new MediaStream([d]),p.play();const v=document.createElement("canvas");v.width=160,v.height=120;let E=0,T=0;try{const L=Date.now();E=await $X(p,r,v,s),T=Date.now()-L}catch(L){throw i.onError(L),L}BX===qt.SAFARI&&(p.pause(),p.remove()),p.srcObject=null;const C=E>s,R={duration:T,changedPicNum:E,deviceLabel:l,result:C};return U.info("[track-".concat(n.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(R))),i.onSuccess(R),C},setArea:Qy,audioElementPlayCenter:vo,processExternalMediaAEC:function(n){WX.processExternalMediaAEC(n)},registerExtensions:function(n){n.forEach(r=>{const i=r;i.__registered__=!0,i.logger.hookLog=U.extLog,i.reporter.hookApiInvoke=Ue.extApiInvoke,i.parameters&&Object.keys(i.parameters).forEach(s=>{i.parameters[s]=ie(s)})})},ChannelMediaRelayError:Jc,ChannelMediaRelayEvent:ts,ChannelMediaRelayState:Ti,RemoteStreamFallbackType:Ay,RemoteStreamType:Oy,ConnectionDisconnectedReason:Wt,AudienceLatencyLevelType:by,AREAS:Nt});return Object.defineProperties(mr,{onAudioAutoplayFailed:{get:()=>ko.onAudioAutoplayFailed,set:n=>{ko.onAudioAutoplayFailed=n}},onAutoplayFailed:{get:()=>ko.onAutoplayFailed,set:n=>{ko.onAutoplayFailed=n}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>mr._onSecurityPolicyViolation,set(n){mr._onSecurityPolicyViolation=n,RM(n)}}}),Mo.on(cc.CAMERA_DEVICE_CHANGED,n=>{U.info("camera device changed",JSON.stringify(n)),mr.onCameraChanged&&mr.onCameraChanged(n),mr.safeEmit(rs.CAMERA_CHANGED,n)}),Mo.on(cc.RECORDING_DEVICE_CHANGED,n=>{U.info("microphone device changed",JSON.stringify(n)),mr.onMicrophoneChanged&&mr.onMicrophoneChanged(n),mr.safeEmit(rs.MICROPHONE_CHANGED,n)}),Mo.on(cc.PLAYOUT_DEVICE_CHANGED,n=>{U.debug("playout device changed",JSON.stringify(n)),mr.onPlaybackDeviceChanged&&mr.onPlaybackDeviceChanged(n),mr.safeEmit(rs.PLAYBACK_DEVICE_CHANGED,n)}),vo.onAutoplayFailed=()=>{U.info("detect audio element autoplay failed"),ko.onAudioAutoplayFailed&&ko.onAudioAutoplayFailed()},Gt.on("autoplay-failed",()=>{U.info("detect webaudio autoplay failed"),ko.onAudioAutoplayFailed&&ko.onAudioAutoplayFailed(),mr.safeEmit(rs.AUTOPLAY_FAILED)}),window&&(window.__ARTC__=mr),mr})})(oj);var mJ=oj.exports;const Du=Ul(mJ);var BT={},sj={exports:{}},Sa={},cj={exports:{}},lj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ue,me){var fe=ue.length;ue.push(me);e:for(;0<fe;){var se=fe-1>>>1,ae=ue[se];if(0<c(ae,me))ue[se]=me,ue[fe]=ae,fe=se;else break e}}function o(ue){return ue.length===0?null:ue[0]}function a(ue){if(ue.length===0)return null;var me=ue[0],fe=ue.pop();if(fe!==me){ue[0]=fe;e:for(var se=0,ae=ue.length,de=ae>>>1;se<de;){var ce=2*(se+1)-1,we=ue[ce],Ie=ce+1,He=ue[Ie];if(0>c(we,fe))Ie<ae&&0>c(He,we)?(ue[se]=He,ue[Ie]=fe,se=Ie):(ue[se]=we,ue[ce]=fe,se=ce);else if(Ie<ae&&0>c(He,fe))ue[se]=He,ue[Ie]=fe,se=Ie;else break e}}return me}function c(ue,me){var fe=ue.sortIndex-me.sortIndex;return fe!==0?fe:ue.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var h=Date,f=h.now();e.unstable_now=function(){return h.now()-f}}var m=[],g=[],_=1,y=null,b=3,A=!1,I=!1,w=!1,D=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(ue){for(var me=o(g);me!==null;){if(me.callback===null)a(g);else if(me.startTime<=ue)a(g),me.sortIndex=me.expirationTime,t(m,me);else break;me=o(g)}}function M(ue){if(w=!1,P(ue),!I)if(o(m)!==null)I=!0,oe(V);else{var me=o(g);me!==null&&pe(M,me.startTime-ue)}}function V(ue,me){I=!1,w&&(w=!1,x(H),H=-1),A=!0;var fe=b;try{for(P(me),y=o(m);y!==null&&(!(y.expirationTime>me)||ue&&!Z());){var se=y.callback;if(typeof se=="function"){y.callback=null,b=y.priorityLevel;var ae=se(y.expirationTime<=me);me=e.unstable_now(),typeof ae=="function"?y.callback=ae:y===o(m)&&a(m),P(me)}else a(m);y=o(m)}if(y!==null)var de=!0;else{var ce=o(g);ce!==null&&pe(M,ce.startTime-me),de=!1}return de}finally{y=null,b=fe,A=!1}}var F=!1,B=null,H=-1,K=5,$=-1;function Z(){return!(e.unstable_now()-$<K)}function z(){if(B!==null){var ue=e.unstable_now();$=ue;var me=!0;try{me=B(!0,ue)}finally{me?G():(F=!1,B=null)}}else F=!1}var G;if(typeof O=="function")G=function(){O(z)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,re=ee.port2;ee.port1.onmessage=z,G=function(){re.postMessage(null)}}else G=function(){D(z,0)};function oe(ue){B=ue,F||(F=!0,G())}function pe(ue,me){H=D(function(){ue(e.unstable_now())},me)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ue){ue.callback=null},e.unstable_continueExecution=function(){I||A||(I=!0,oe(V))},e.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<ue?Math.floor(1e3/ue):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return o(m)},e.unstable_next=function(ue){switch(b){case 1:case 2:case 3:var me=3;break;default:me=b}var fe=b;b=me;try{return ue()}finally{b=fe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ue,me){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var fe=b;b=ue;try{return me()}finally{b=fe}},e.unstable_scheduleCallback=function(ue,me,fe){var se=e.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?se+fe:se):fe=se,ue){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=fe+ae,ue={id:_++,callback:me,priorityLevel:ue,startTime:fe,expirationTime:ae,sortIndex:-1},fe>se?(ue.sortIndex=fe,t(g,ue),o(m)===null&&ue===o(g)&&(w?(x(H),H=-1):w=!0,pe(M,fe-se))):(ue.sortIndex=ae,t(m,ue),I||A||(I=!0,oe(V))),ue},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(ue){var me=b;return function(){var fe=b;b=me;try{return ue.apply(this,arguments)}finally{b=fe}}}})(lj);cj.exports=lj;var gJ=cj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uj=S,Ea=gJ;function je(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dj=new Set,Vf={};function ju(e,t){Oh(e,t),Oh(e+"Capture",t)}function Oh(e,t){for(Vf[e]=t,e=0;e<t.length;e++)dj.add(t[e])}var Tc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$T=Object.prototype.hasOwnProperty,vJ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,NM={},xM={};function EJ(e){return $T.call(xM,e)?!0:$T.call(NM,e)?!1:vJ.test(e)?xM[e]=!0:(NM[e]=!0,!1)}function _J(e,t,o,a){if(o!==null&&o.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function SJ(e,t,o,a){if(t===null||typeof t>"u"||_J(e,t,o,a))return!0;if(a)return!1;if(o!==null)switch(o.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function bo(e,t,o,a,c,u,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=o,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=h}var Gi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Gi[e]=new bo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Gi[t]=new bo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Gi[e]=new bo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Gi[e]=new bo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Gi[e]=new bo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Gi[e]=new bo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Gi[e]=new bo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Gi[e]=new bo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Gi[e]=new bo(e,5,!1,e.toLowerCase(),null,!1,!1)});var WI=/[\-:]([a-z])/g;function GI(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(WI,GI);Gi[t]=new bo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(WI,GI);Gi[t]=new bo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(WI,GI);Gi[t]=new bo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Gi[e]=new bo(e,1,!1,e.toLowerCase(),null,!1,!1)});Gi.xlinkHref=new bo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Gi[e]=new bo(e,1,!1,e.toLowerCase(),null,!0,!0)});function zI(e,t,o,a){var c=Gi.hasOwnProperty(t)?Gi[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(SJ(t,o,c,a)&&(o=null),a||c===null?EJ(t)&&(o===null?e.removeAttribute(t):e.setAttribute(t,""+o)):c.mustUseProperty?e[c.propertyName]=o===null?c.type===3?!1:"":o:(t=c.attributeName,a=c.attributeNamespace,o===null?e.removeAttribute(t):(c=c.type,o=c===3||c===4&&o===!0?"":""+o,a?e.setAttributeNS(a,t,o):e.setAttribute(t,o))))}var Dc=uj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Eg=Symbol.for("react.element"),rh=Symbol.for("react.portal"),ih=Symbol.for("react.fragment"),KI=Symbol.for("react.strict_mode"),HT=Symbol.for("react.profiler"),hj=Symbol.for("react.provider"),pj=Symbol.for("react.context"),YI=Symbol.for("react.forward_ref"),WT=Symbol.for("react.suspense"),GT=Symbol.for("react.suspense_list"),qI=Symbol.for("react.memo"),gl=Symbol.for("react.lazy"),fj=Symbol.for("react.offscreen"),PM=Symbol.iterator;function qp(e){return e===null||typeof e!="object"?null:(e=PM&&e[PM]||e["@@iterator"],typeof e=="function"?e:null)}var Nr=Object.assign,WC;function ff(e){if(WC===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);WC=t&&t[1]||""}return`
`+WC+e}var GC=!1;function zC(e,t){if(!e||GC)return"";GC=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var a=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){a=g}e.call(t.prototype)}else{try{throw Error()}catch(g){a=g}e()}}catch(g){if(g&&a&&typeof g.stack=="string"){for(var c=g.stack.split(`
`),u=a.stack.split(`
`),h=c.length-1,f=u.length-1;1<=h&&0<=f&&c[h]!==u[f];)f--;for(;1<=h&&0<=f;h--,f--)if(c[h]!==u[f]){if(h!==1||f!==1)do if(h--,f--,0>f||c[h]!==u[f]){var m=`
`+c[h].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=h&&0<=f);break}}}finally{GC=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?ff(e):""}function yJ(e){switch(e.tag){case 5:return ff(e.type);case 16:return ff("Lazy");case 13:return ff("Suspense");case 19:return ff("SuspenseList");case 0:case 2:case 15:return e=zC(e.type,!1),e;case 11:return e=zC(e.type.render,!1),e;case 1:return e=zC(e.type,!0),e;default:return""}}function zT(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ih:return"Fragment";case rh:return"Portal";case HT:return"Profiler";case KI:return"StrictMode";case WT:return"Suspense";case GT:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pj:return(e.displayName||"Context")+".Consumer";case hj:return(e._context.displayName||"Context")+".Provider";case YI:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qI:return t=e.displayName||null,t!==null?t:zT(e.type)||"Memo";case gl:t=e._payload,e=e._init;try{return zT(e(t))}catch{}}return null}function CJ(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zT(t);case 8:return t===KI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Dl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mj(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function bJ(e){var t=mj(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,u=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(h){a=""+h,u.call(this,h)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(h){a=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function _g(e){e._valueTracker||(e._valueTracker=bJ(e))}function gj(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),a="";return e&&(a=mj(e)?e.checked?"true":"false":e.value),e=a,e!==o?(t.setValue(e),!0):!1}function Av(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function KT(e,t){var o=t.checked;return Nr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function DM(e,t){var o=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;o=Dl(t.value!=null?t.value:o),e._wrapperState={initialChecked:a,initialValue:o,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function vj(e,t){t=t.checked,t!=null&&zI(e,"checked",t,!1)}function YT(e,t){vj(e,t);var o=Dl(t.value),a=t.type;if(o!=null)a==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?qT(e,t.type,o):t.hasOwnProperty("defaultValue")&&qT(e,t.type,Dl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function kM(e,t,o){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,o||t===e.value||(e.value=t),e.defaultValue=t}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function qT(e,t,o){(t!=="number"||Av(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var mf=Array.isArray;function _h(e,t,o,a){if(e=e.options,t){t={};for(var c=0;c<o.length;c++)t["$"+o[c]]=!0;for(o=0;o<e.length;o++)c=t.hasOwnProperty("$"+e[o].value),e[o].selected!==c&&(e[o].selected=c),c&&a&&(e[o].defaultSelected=!0)}else{for(o=""+Dl(o),t=null,c=0;c<e.length;c++){if(e[c].value===o){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function XT(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(je(91));return Nr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function LM(e,t){var o=t.value;if(o==null){if(o=t.children,t=t.defaultValue,o!=null){if(t!=null)throw Error(je(92));if(mf(o)){if(1<o.length)throw Error(je(93));o=o[0]}t=o}t==null&&(t=""),o=t}e._wrapperState={initialValue:Dl(o)}}function Ej(e,t){var o=Dl(t.value),a=Dl(t.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),t.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),a!=null&&(e.defaultValue=""+a)}function MM(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _j(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function JT(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_j(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Sg,Sj=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,o,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,o,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Sg=Sg||document.createElement("div"),Sg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Sg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function jf(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var Sf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TJ=["Webkit","ms","Moz","O"];Object.keys(Sf).forEach(function(e){TJ.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sf[t]=Sf[e]})});function yj(e,t,o){return t==null||typeof t=="boolean"||t===""?"":o||typeof t!="number"||t===0||Sf.hasOwnProperty(e)&&Sf[e]?(""+t).trim():t+"px"}function Cj(e,t){e=e.style;for(var o in t)if(t.hasOwnProperty(o)){var a=o.indexOf("--")===0,c=yj(o,t[o],a);o==="float"&&(o="cssFloat"),a?e.setProperty(o,c):e[o]=c}}var RJ=Nr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function QT(e,t){if(t){if(RJ[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(je(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(je(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(je(61))}if(t.style!=null&&typeof t.style!="object")throw Error(je(62))}}function ZT(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eR=null;function XI(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tR=null,Sh=null,yh=null;function UM(e){if(e=Em(e)){if(typeof tR!="function")throw Error(je(280));var t=e.stateNode;t&&(t=PE(t),tR(e.stateNode,e.type,t))}}function bj(e){Sh?yh?yh.push(e):yh=[e]:Sh=e}function Tj(){if(Sh){var e=Sh,t=yh;if(yh=Sh=null,UM(e),t)for(e=0;e<t.length;e++)UM(t[e])}}function Rj(e,t){return e(t)}function Ij(){}var KC=!1;function wj(e,t,o){if(KC)return e(t,o);KC=!0;try{return Rj(e,t,o)}finally{KC=!1,(Sh!==null||yh!==null)&&(Ij(),Tj())}}function Bf(e,t){var o=e.stateNode;if(o===null)return null;var a=PE(o);if(a===null)return null;o=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(je(231,t,typeof o));return o}var nR=!1;if(Tc)try{var Xp={};Object.defineProperty(Xp,"passive",{get:function(){nR=!0}}),window.addEventListener("test",Xp,Xp),window.removeEventListener("test",Xp,Xp)}catch{nR=!1}function IJ(e,t,o,a,c,u,h,f,m){var g=Array.prototype.slice.call(arguments,3);try{t.apply(o,g)}catch(_){this.onError(_)}}var yf=!1,Nv=null,xv=!1,rR=null,wJ={onError:function(e){yf=!0,Nv=e}};function OJ(e,t,o,a,c,u,h,f,m){yf=!1,Nv=null,IJ.apply(wJ,arguments)}function AJ(e,t,o,a,c,u,h,f,m){if(OJ.apply(this,arguments),yf){if(yf){var g=Nv;yf=!1,Nv=null}else throw Error(je(198));xv||(xv=!0,rR=g)}}function Bu(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function Oj(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function FM(e){if(Bu(e)!==e)throw Error(je(188))}function NJ(e){var t=e.alternate;if(!t){if(t=Bu(e),t===null)throw Error(je(188));return t!==e?null:e}for(var o=e,a=t;;){var c=o.return;if(c===null)break;var u=c.alternate;if(u===null){if(a=c.return,a!==null){o=a;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===o)return FM(c),e;if(u===a)return FM(c),t;u=u.sibling}throw Error(je(188))}if(o.return!==a.return)o=c,a=u;else{for(var h=!1,f=c.child;f;){if(f===o){h=!0,o=c,a=u;break}if(f===a){h=!0,a=c,o=u;break}f=f.sibling}if(!h){for(f=u.child;f;){if(f===o){h=!0,o=u,a=c;break}if(f===a){h=!0,a=u,o=c;break}f=f.sibling}if(!h)throw Error(je(189))}}if(o.alternate!==a)throw Error(je(190))}if(o.tag!==3)throw Error(je(188));return o.stateNode.current===o?e:t}function Aj(e){return e=NJ(e),e!==null?Nj(e):null}function Nj(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Nj(e);if(t!==null)return t;e=e.sibling}return null}var xj=Ea.unstable_scheduleCallback,VM=Ea.unstable_cancelCallback,xJ=Ea.unstable_shouldYield,PJ=Ea.unstable_requestPaint,Wr=Ea.unstable_now,DJ=Ea.unstable_getCurrentPriorityLevel,JI=Ea.unstable_ImmediatePriority,Pj=Ea.unstable_UserBlockingPriority,Pv=Ea.unstable_NormalPriority,kJ=Ea.unstable_LowPriority,Dj=Ea.unstable_IdlePriority,OE=null,Gs=null;function LJ(e){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(OE,e,void 0,(e.current.flags&128)===128)}catch{}}var Es=Math.clz32?Math.clz32:FJ,MJ=Math.log,UJ=Math.LN2;function FJ(e){return e>>>=0,e===0?32:31-(MJ(e)/UJ|0)|0}var yg=64,Cg=4194304;function gf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Dv(e,t){var o=e.pendingLanes;if(o===0)return 0;var a=0,c=e.suspendedLanes,u=e.pingedLanes,h=o&268435455;if(h!==0){var f=h&~c;f!==0?a=gf(f):(u&=h,u!==0&&(a=gf(u)))}else h=o&~c,h!==0?a=gf(h):u!==0&&(a=gf(u));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,u=t&-t,c>=u||c===16&&(u&4194240)!==0))return t;if(a&4&&(a|=o&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)o=31-Es(t),c=1<<o,a|=e[o],t&=~c;return a}function VJ(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jJ(e,t){for(var o=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes;0<u;){var h=31-Es(u),f=1<<h,m=c[h];m===-1?(!(f&o)||f&a)&&(c[h]=VJ(f,t)):m<=t&&(e.expiredLanes|=f),u&=~f}}function iR(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function kj(){var e=yg;return yg<<=1,!(yg&4194240)&&(yg=64),e}function YC(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function gm(e,t,o){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Es(t),e[t]=o}function BJ(e,t){var o=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<o;){var c=31-Es(o),u=1<<c;t[c]=0,a[c]=-1,e[c]=-1,o&=~u}}function QI(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var a=31-Es(o),c=1<<a;c&t|e[a]&t&&(e[a]|=t),o&=~c}}var $n=0;function Lj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Mj,ZI,Uj,Fj,Vj,oR=!1,bg=[],Rl=null,Il=null,wl=null,$f=new Map,Hf=new Map,El=[],$J="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jM(e,t){switch(e){case"focusin":case"focusout":Rl=null;break;case"dragenter":case"dragleave":Il=null;break;case"mouseover":case"mouseout":wl=null;break;case"pointerover":case"pointerout":$f.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hf.delete(t.pointerId)}}function Jp(e,t,o,a,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:o,eventSystemFlags:a,nativeEvent:u,targetContainers:[c]},t!==null&&(t=Em(t),t!==null&&ZI(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function HJ(e,t,o,a,c){switch(t){case"focusin":return Rl=Jp(Rl,e,t,o,a,c),!0;case"dragenter":return Il=Jp(Il,e,t,o,a,c),!0;case"mouseover":return wl=Jp(wl,e,t,o,a,c),!0;case"pointerover":var u=c.pointerId;return $f.set(u,Jp($f.get(u)||null,e,t,o,a,c)),!0;case"gotpointercapture":return u=c.pointerId,Hf.set(u,Jp(Hf.get(u)||null,e,t,o,a,c)),!0}return!1}function jj(e){var t=Cu(e.target);if(t!==null){var o=Bu(t);if(o!==null){if(t=o.tag,t===13){if(t=Oj(o),t!==null){e.blockedOn=t,Vj(e.priority,function(){Uj(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=aR(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var a=new o.constructor(o.type,o);eR=a,o.target.dispatchEvent(a),eR=null}else return t=Em(o),t!==null&&ZI(t),e.blockedOn=o,!1;t.shift()}return!0}function BM(e,t,o){cv(e)&&o.delete(t)}function WJ(){oR=!1,Rl!==null&&cv(Rl)&&(Rl=null),Il!==null&&cv(Il)&&(Il=null),wl!==null&&cv(wl)&&(wl=null),$f.forEach(BM),Hf.forEach(BM)}function Qp(e,t){e.blockedOn===t&&(e.blockedOn=null,oR||(oR=!0,Ea.unstable_scheduleCallback(Ea.unstable_NormalPriority,WJ)))}function Wf(e){function t(c){return Qp(c,e)}if(0<bg.length){Qp(bg[0],e);for(var o=1;o<bg.length;o++){var a=bg[o];a.blockedOn===e&&(a.blockedOn=null)}}for(Rl!==null&&Qp(Rl,e),Il!==null&&Qp(Il,e),wl!==null&&Qp(wl,e),$f.forEach(t),Hf.forEach(t),o=0;o<El.length;o++)a=El[o],a.blockedOn===e&&(a.blockedOn=null);for(;0<El.length&&(o=El[0],o.blockedOn===null);)jj(o),o.blockedOn===null&&El.shift()}var Ch=Dc.ReactCurrentBatchConfig,kv=!0;function GJ(e,t,o,a){var c=$n,u=Ch.transition;Ch.transition=null;try{$n=1,e1(e,t,o,a)}finally{$n=c,Ch.transition=u}}function zJ(e,t,o,a){var c=$n,u=Ch.transition;Ch.transition=null;try{$n=4,e1(e,t,o,a)}finally{$n=c,Ch.transition=u}}function e1(e,t,o,a){if(kv){var c=aR(e,t,o,a);if(c===null)ib(e,t,a,Lv,o),jM(e,a);else if(HJ(c,e,t,o,a))a.stopPropagation();else if(jM(e,a),t&4&&-1<$J.indexOf(e)){for(;c!==null;){var u=Em(c);if(u!==null&&Mj(u),u=aR(e,t,o,a),u===null&&ib(e,t,a,Lv,o),u===c)break;c=u}c!==null&&a.stopPropagation()}else ib(e,t,a,null,o)}}var Lv=null;function aR(e,t,o,a){if(Lv=null,e=XI(a),e=Cu(e),e!==null)if(t=Bu(e),t===null)e=null;else if(o=t.tag,o===13){if(e=Oj(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Lv=e,null}function Bj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DJ()){case JI:return 1;case Pj:return 4;case Pv:case kJ:return 16;case Dj:return 536870912;default:return 16}default:return 16}}var Sl=null,t1=null,lv=null;function $j(){if(lv)return lv;var e,t=t1,o=t.length,a,c="value"in Sl?Sl.value:Sl.textContent,u=c.length;for(e=0;e<o&&t[e]===c[e];e++);var h=o-e;for(a=1;a<=h&&t[o-a]===c[u-a];a++);return lv=c.slice(e,1<a?1-a:void 0)}function uv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Tg(){return!0}function $M(){return!1}function ya(e){function t(o,a,c,u,h){this._reactName=o,this._targetInst=c,this.type=a,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(o=e[f],this[f]=o?o(u):u[f]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Tg:$M,this.isPropagationStopped=$M,this}return Nr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Tg)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Tg)},persist:function(){},isPersistent:Tg}),t}var $h={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},n1=ya($h),vm=Nr({},$h,{view:0,detail:0}),KJ=ya(vm),qC,XC,Zp,AE=Nr({},vm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:r1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zp&&(Zp&&e.type==="mousemove"?(qC=e.screenX-Zp.screenX,XC=e.screenY-Zp.screenY):XC=qC=0,Zp=e),qC)},movementY:function(e){return"movementY"in e?e.movementY:XC}}),HM=ya(AE),YJ=Nr({},AE,{dataTransfer:0}),qJ=ya(YJ),XJ=Nr({},vm,{relatedTarget:0}),JC=ya(XJ),JJ=Nr({},$h,{animationName:0,elapsedTime:0,pseudoElement:0}),QJ=ya(JJ),ZJ=Nr({},$h,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eQ=ya(ZJ),tQ=Nr({},$h,{data:0}),WM=ya(tQ),nQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oQ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=iQ[e])?!!t[e]:!1}function r1(){return oQ}var aQ=Nr({},vm,{key:function(e){if(e.key){var t=nQ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=uv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rQ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:r1,charCode:function(e){return e.type==="keypress"?uv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?uv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sQ=ya(aQ),cQ=Nr({},AE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),GM=ya(cQ),lQ=Nr({},vm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:r1}),uQ=ya(lQ),dQ=Nr({},$h,{propertyName:0,elapsedTime:0,pseudoElement:0}),hQ=ya(dQ),pQ=Nr({},AE,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fQ=ya(pQ),mQ=[9,13,27,32],i1=Tc&&"CompositionEvent"in window,Cf=null;Tc&&"documentMode"in document&&(Cf=document.documentMode);var gQ=Tc&&"TextEvent"in window&&!Cf,Hj=Tc&&(!i1||Cf&&8<Cf&&11>=Cf),zM=String.fromCharCode(32),KM=!1;function Wj(e,t){switch(e){case"keyup":return mQ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var oh=!1;function vQ(e,t){switch(e){case"compositionend":return Gj(t);case"keypress":return t.which!==32?null:(KM=!0,zM);case"textInput":return e=t.data,e===zM&&KM?null:e;default:return null}}function EQ(e,t){if(oh)return e==="compositionend"||!i1&&Wj(e,t)?(e=$j(),lv=t1=Sl=null,oh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hj&&t.locale!=="ko"?null:t.data;default:return null}}var _Q={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_Q[e.type]:t==="textarea"}function zj(e,t,o,a){bj(a),t=Mv(t,"onChange"),0<t.length&&(o=new n1("onChange","change",null,o,a),e.push({event:o,listeners:t}))}var bf=null,Gf=null;function SQ(e){r3(e,0)}function NE(e){var t=ch(e);if(gj(t))return e}function yQ(e,t){if(e==="change")return t}var Kj=!1;if(Tc){var QC;if(Tc){var ZC="oninput"in document;if(!ZC){var qM=document.createElement("div");qM.setAttribute("oninput","return;"),ZC=typeof qM.oninput=="function"}QC=ZC}else QC=!1;Kj=QC&&(!document.documentMode||9<document.documentMode)}function XM(){bf&&(bf.detachEvent("onpropertychange",Yj),Gf=bf=null)}function Yj(e){if(e.propertyName==="value"&&NE(Gf)){var t=[];zj(t,Gf,e,XI(e)),wj(SQ,t)}}function CQ(e,t,o){e==="focusin"?(XM(),bf=t,Gf=o,bf.attachEvent("onpropertychange",Yj)):e==="focusout"&&XM()}function bQ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return NE(Gf)}function TQ(e,t){if(e==="click")return NE(t)}function RQ(e,t){if(e==="input"||e==="change")return NE(t)}function IQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ys=typeof Object.is=="function"?Object.is:IQ;function zf(e,t){if(ys(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(a=0;a<o.length;a++){var c=o[a];if(!$T.call(t,c)||!ys(e[c],t[c]))return!1}return!0}function JM(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function QM(e,t){var o=JM(e);e=0;for(var a;o;){if(o.nodeType===3){if(a=e+o.textContent.length,e<=t&&a>=t)return{node:o,offset:t-e};e=a}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=JM(o)}}function qj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Xj(){for(var e=window,t=Av();t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=Av(e.document)}return t}function o1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function wQ(e){var t=Xj(),o=e.focusedElem,a=e.selectionRange;if(t!==o&&o&&o.ownerDocument&&qj(o.ownerDocument.documentElement,o)){if(a!==null&&o1(o)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in o)o.selectionStart=t,o.selectionEnd=Math.min(e,o.value.length);else if(e=(t=o.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=o.textContent.length,u=Math.min(a.start,c);a=a.end===void 0?u:Math.min(a.end,c),!e.extend&&u>a&&(c=a,a=u,u=c),c=QM(o,u);var h=QM(o,a);c&&h&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),u>a?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=o;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<t.length;o++)e=t[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var OQ=Tc&&"documentMode"in document&&11>=document.documentMode,ah=null,sR=null,Tf=null,cR=!1;function ZM(e,t,o){var a=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;cR||ah==null||ah!==Av(a)||(a=ah,"selectionStart"in a&&o1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Tf&&zf(Tf,a)||(Tf=a,a=Mv(sR,"onSelect"),0<a.length&&(t=new n1("onSelect","select",null,t,o),e.push({event:t,listeners:a}),t.target=ah)))}function Rg(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var sh={animationend:Rg("Animation","AnimationEnd"),animationiteration:Rg("Animation","AnimationIteration"),animationstart:Rg("Animation","AnimationStart"),transitionend:Rg("Transition","TransitionEnd")},eb={},Jj={};Tc&&(Jj=document.createElement("div").style,"AnimationEvent"in window||(delete sh.animationend.animation,delete sh.animationiteration.animation,delete sh.animationstart.animation),"TransitionEvent"in window||delete sh.transitionend.transition);function xE(e){if(eb[e])return eb[e];if(!sh[e])return e;var t=sh[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in Jj)return eb[e]=t[o];return e}var Qj=xE("animationend"),Zj=xE("animationiteration"),e3=xE("animationstart"),t3=xE("transitionend"),n3=new Map,eU="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fl(e,t){n3.set(e,t),ju(t,[e])}for(var tb=0;tb<eU.length;tb++){var nb=eU[tb],AQ=nb.toLowerCase(),NQ=nb[0].toUpperCase()+nb.slice(1);Fl(AQ,"on"+NQ)}Fl(Qj,"onAnimationEnd");Fl(Zj,"onAnimationIteration");Fl(e3,"onAnimationStart");Fl("dblclick","onDoubleClick");Fl("focusin","onFocus");Fl("focusout","onBlur");Fl(t3,"onTransitionEnd");Oh("onMouseEnter",["mouseout","mouseover"]);Oh("onMouseLeave",["mouseout","mouseover"]);Oh("onPointerEnter",["pointerout","pointerover"]);Oh("onPointerLeave",["pointerout","pointerover"]);ju("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ju("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ju("onBeforeInput",["compositionend","keypress","textInput","paste"]);ju("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(vf));function tU(e,t,o){var a=e.type||"unknown-event";e.currentTarget=o,AJ(a,t,void 0,e),e.currentTarget=null}function r3(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var a=e[o],c=a.event;a=a.listeners;e:{var u=void 0;if(t)for(var h=a.length-1;0<=h;h--){var f=a[h],m=f.instance,g=f.currentTarget;if(f=f.listener,m!==u&&c.isPropagationStopped())break e;tU(c,f,g),u=m}else for(h=0;h<a.length;h++){if(f=a[h],m=f.instance,g=f.currentTarget,f=f.listener,m!==u&&c.isPropagationStopped())break e;tU(c,f,g),u=m}}}if(xv)throw e=rR,xv=!1,rR=null,e}function gr(e,t){var o=t[pR];o===void 0&&(o=t[pR]=new Set);var a=e+"__bubble";o.has(a)||(i3(t,e,2,!1),o.add(a))}function rb(e,t,o){var a=0;t&&(a|=4),i3(o,e,a,t)}var Ig="_reactListening"+Math.random().toString(36).slice(2);function Kf(e){if(!e[Ig]){e[Ig]=!0,dj.forEach(function(o){o!=="selectionchange"&&(xQ.has(o)||rb(o,!1,e),rb(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ig]||(t[Ig]=!0,rb("selectionchange",!1,t))}}function i3(e,t,o,a){switch(Bj(t)){case 1:var c=GJ;break;case 4:c=zJ;break;default:c=e1}o=c.bind(null,t,o,e),c=void 0,!nR||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,o,{capture:!0,passive:c}):e.addEventListener(t,o,!0):c!==void 0?e.addEventListener(t,o,{passive:c}):e.addEventListener(t,o,!1)}function ib(e,t,o,a,c){var u=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var h=a.tag;if(h===3||h===4){var f=a.stateNode.containerInfo;if(f===c||f.nodeType===8&&f.parentNode===c)break;if(h===4)for(h=a.return;h!==null;){var m=h.tag;if((m===3||m===4)&&(m=h.stateNode.containerInfo,m===c||m.nodeType===8&&m.parentNode===c))return;h=h.return}for(;f!==null;){if(h=Cu(f),h===null)return;if(m=h.tag,m===5||m===6){a=u=h;continue e}f=f.parentNode}}a=a.return}wj(function(){var g=u,_=XI(o),y=[];e:{var b=n3.get(e);if(b!==void 0){var A=n1,I=e;switch(e){case"keypress":if(uv(o)===0)break e;case"keydown":case"keyup":A=sQ;break;case"focusin":I="focus",A=JC;break;case"focusout":I="blur",A=JC;break;case"beforeblur":case"afterblur":A=JC;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=HM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=qJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=uQ;break;case Qj:case Zj:case e3:A=QJ;break;case t3:A=hQ;break;case"scroll":A=KJ;break;case"wheel":A=fQ;break;case"copy":case"cut":case"paste":A=eQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=GM}var w=(t&4)!==0,D=!w&&e==="scroll",x=w?b!==null?b+"Capture":null:b;w=[];for(var O=g,P;O!==null;){P=O;var M=P.stateNode;if(P.tag===5&&M!==null&&(P=M,x!==null&&(M=Bf(O,x),M!=null&&w.push(Yf(O,M,P)))),D)break;O=O.return}0<w.length&&(b=new A(b,I,null,o,_),y.push({event:b,listeners:w}))}}if(!(t&7)){e:{if(b=e==="mouseover"||e==="pointerover",A=e==="mouseout"||e==="pointerout",b&&o!==eR&&(I=o.relatedTarget||o.fromElement)&&(Cu(I)||I[Rc]))break e;if((A||b)&&(b=_.window===_?_:(b=_.ownerDocument)?b.defaultView||b.parentWindow:window,A?(I=o.relatedTarget||o.toElement,A=g,I=I?Cu(I):null,I!==null&&(D=Bu(I),I!==D||I.tag!==5&&I.tag!==6)&&(I=null)):(A=null,I=g),A!==I)){if(w=HM,M="onMouseLeave",x="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(w=GM,M="onPointerLeave",x="onPointerEnter",O="pointer"),D=A==null?b:ch(A),P=I==null?b:ch(I),b=new w(M,O+"leave",A,o,_),b.target=D,b.relatedTarget=P,M=null,Cu(_)===g&&(w=new w(x,O+"enter",I,o,_),w.target=P,w.relatedTarget=D,M=w),D=M,A&&I)t:{for(w=A,x=I,O=0,P=w;P;P=Hd(P))O++;for(P=0,M=x;M;M=Hd(M))P++;for(;0<O-P;)w=Hd(w),O--;for(;0<P-O;)x=Hd(x),P--;for(;O--;){if(w===x||x!==null&&w===x.alternate)break t;w=Hd(w),x=Hd(x)}w=null}else w=null;A!==null&&nU(y,b,A,w,!1),I!==null&&D!==null&&nU(y,D,I,w,!0)}}e:{if(b=g?ch(g):window,A=b.nodeName&&b.nodeName.toLowerCase(),A==="select"||A==="input"&&b.type==="file")var V=yQ;else if(YM(b))if(Kj)V=RQ;else{V=bQ;var F=CQ}else(A=b.nodeName)&&A.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(V=TQ);if(V&&(V=V(e,g))){zj(y,V,o,_);break e}F&&F(e,b,g),e==="focusout"&&(F=b._wrapperState)&&F.controlled&&b.type==="number"&&qT(b,"number",b.value)}switch(F=g?ch(g):window,e){case"focusin":(YM(F)||F.contentEditable==="true")&&(ah=F,sR=g,Tf=null);break;case"focusout":Tf=sR=ah=null;break;case"mousedown":cR=!0;break;case"contextmenu":case"mouseup":case"dragend":cR=!1,ZM(y,o,_);break;case"selectionchange":if(OQ)break;case"keydown":case"keyup":ZM(y,o,_)}var B;if(i1)e:{switch(e){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else oh?Wj(e,o)&&(H="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(H="onCompositionStart");H&&(Hj&&o.locale!=="ko"&&(oh||H!=="onCompositionStart"?H==="onCompositionEnd"&&oh&&(B=$j()):(Sl=_,t1="value"in Sl?Sl.value:Sl.textContent,oh=!0)),F=Mv(g,H),0<F.length&&(H=new WM(H,e,null,o,_),y.push({event:H,listeners:F}),B?H.data=B:(B=Gj(o),B!==null&&(H.data=B)))),(B=gQ?vQ(e,o):EQ(e,o))&&(g=Mv(g,"onBeforeInput"),0<g.length&&(_=new WM("onBeforeInput","beforeinput",null,o,_),y.push({event:_,listeners:g}),_.data=B))}r3(y,t)})}function Yf(e,t,o){return{instance:e,listener:t,currentTarget:o}}function Mv(e,t){for(var o=t+"Capture",a=[];e!==null;){var c=e,u=c.stateNode;c.tag===5&&u!==null&&(c=u,u=Bf(e,o),u!=null&&a.unshift(Yf(e,u,c)),u=Bf(e,t),u!=null&&a.push(Yf(e,u,c))),e=e.return}return a}function Hd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function nU(e,t,o,a,c){for(var u=t._reactName,h=[];o!==null&&o!==a;){var f=o,m=f.alternate,g=f.stateNode;if(m!==null&&m===a)break;f.tag===5&&g!==null&&(f=g,c?(m=Bf(o,u),m!=null&&h.unshift(Yf(o,m,f))):c||(m=Bf(o,u),m!=null&&h.push(Yf(o,m,f)))),o=o.return}h.length!==0&&e.push({event:t,listeners:h})}var PQ=/\r\n?/g,DQ=/\u0000|\uFFFD/g;function rU(e){return(typeof e=="string"?e:""+e).replace(PQ,`
`).replace(DQ,"")}function wg(e,t,o){if(t=rU(t),rU(e)!==t&&o)throw Error(je(425))}function Uv(){}var lR=null,uR=null;function dR(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hR=typeof setTimeout=="function"?setTimeout:void 0,kQ=typeof clearTimeout=="function"?clearTimeout:void 0,iU=typeof Promise=="function"?Promise:void 0,LQ=typeof queueMicrotask=="function"?queueMicrotask:typeof iU<"u"?function(e){return iU.resolve(null).then(e).catch(MQ)}:hR;function MQ(e){setTimeout(function(){throw e})}function ob(e,t){var o=t,a=0;do{var c=o.nextSibling;if(e.removeChild(o),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(a===0){e.removeChild(c),Wf(t);return}a--}else o!=="$"&&o!=="$?"&&o!=="$!"||a++;o=c}while(o);Wf(t)}function Ol(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function oU(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(t===0)return e;t--}else o==="/$"&&t++}e=e.previousSibling}return null}var Hh=Math.random().toString(36).slice(2),Ws="__reactFiber$"+Hh,qf="__reactProps$"+Hh,Rc="__reactContainer$"+Hh,pR="__reactEvents$"+Hh,UQ="__reactListeners$"+Hh,FQ="__reactHandles$"+Hh;function Cu(e){var t=e[Ws];if(t)return t;for(var o=e.parentNode;o;){if(t=o[Rc]||o[Ws]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=oU(e);e!==null;){if(o=e[Ws])return o;e=oU(e)}return t}e=o,o=e.parentNode}return null}function Em(e){return e=e[Ws]||e[Rc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ch(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(je(33))}function PE(e){return e[qf]||null}var fR=[],lh=-1;function Vl(e){return{current:e}}function vr(e){0>lh||(e.current=fR[lh],fR[lh]=null,lh--)}function ur(e,t){lh++,fR[lh]=e.current,e.current=t}var kl={},uo=Vl(kl),$o=Vl(!1),ku=kl;function Ah(e,t){var o=e.type.contextTypes;if(!o)return kl;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},u;for(u in o)c[u]=t[u];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Ho(e){return e=e.childContextTypes,e!=null}function Fv(){vr($o),vr(uo)}function aU(e,t,o){if(uo.current!==kl)throw Error(je(168));ur(uo,t),ur($o,o)}function o3(e,t,o){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return o;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(je(108,CJ(e)||"Unknown",c));return Nr({},o,a)}function Vv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||kl,ku=uo.current,ur(uo,e),ur($o,$o.current),!0}function sU(e,t,o){var a=e.stateNode;if(!a)throw Error(je(169));o?(e=o3(e,t,ku),a.__reactInternalMemoizedMergedChildContext=e,vr($o),vr(uo),ur(uo,e)):vr($o),ur($o,o)}var vc=null,DE=!1,ab=!1;function a3(e){vc===null?vc=[e]:vc.push(e)}function VQ(e){DE=!0,a3(e)}function jl(){if(!ab&&vc!==null){ab=!0;var e=0,t=$n;try{var o=vc;for($n=1;e<o.length;e++){var a=o[e];do a=a(!0);while(a!==null)}vc=null,DE=!1}catch(c){throw vc!==null&&(vc=vc.slice(e+1)),xj(JI,jl),c}finally{$n=t,ab=!1}}return null}var uh=[],dh=0,jv=null,Bv=0,Fa=[],Va=0,Lu=null,_c=1,Sc="";function vu(e,t){uh[dh++]=Bv,uh[dh++]=jv,jv=e,Bv=t}function s3(e,t,o){Fa[Va++]=_c,Fa[Va++]=Sc,Fa[Va++]=Lu,Lu=e;var a=_c;e=Sc;var c=32-Es(a)-1;a&=~(1<<c),o+=1;var u=32-Es(t)+c;if(30<u){var h=c-c%5;u=(a&(1<<h)-1).toString(32),a>>=h,c-=h,_c=1<<32-Es(t)+c|o<<c|a,Sc=u+e}else _c=1<<u|o<<c|a,Sc=e}function a1(e){e.return!==null&&(vu(e,1),s3(e,1,0))}function s1(e){for(;e===jv;)jv=uh[--dh],uh[dh]=null,Bv=uh[--dh],uh[dh]=null;for(;e===Lu;)Lu=Fa[--Va],Fa[Va]=null,Sc=Fa[--Va],Fa[Va]=null,_c=Fa[--Va],Fa[Va]=null}var ma=null,pa=null,Cr=!1,fs=null;function c3(e,t){var o=ja(5,null,null,0);o.elementType="DELETED",o.stateNode=t,o.return=e,t=e.deletions,t===null?(e.deletions=[o],e.flags|=16):t.push(o)}function cU(e,t){switch(e.tag){case 5:var o=e.type;return t=t.nodeType!==1||o.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ma=e,pa=Ol(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ma=e,pa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(o=Lu!==null?{id:_c,overflow:Sc}:null,e.memoizedState={dehydrated:t,treeContext:o,retryLane:1073741824},o=ja(18,null,null,0),o.stateNode=t,o.return=e,e.child=o,ma=e,pa=null,!0):!1;default:return!1}}function mR(e){return(e.mode&1)!==0&&(e.flags&128)===0}function gR(e){if(Cr){var t=pa;if(t){var o=t;if(!cU(e,t)){if(mR(e))throw Error(je(418));t=Ol(o.nextSibling);var a=ma;t&&cU(e,t)?c3(a,o):(e.flags=e.flags&-4097|2,Cr=!1,ma=e)}}else{if(mR(e))throw Error(je(418));e.flags=e.flags&-4097|2,Cr=!1,ma=e}}}function lU(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ma=e}function Og(e){if(e!==ma)return!1;if(!Cr)return lU(e),Cr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!dR(e.type,e.memoizedProps)),t&&(t=pa)){if(mR(e))throw l3(),Error(je(418));for(;t;)c3(e,t),t=Ol(t.nextSibling)}if(lU(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(je(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(t===0){pa=Ol(e.nextSibling);break e}t--}else o!=="$"&&o!=="$!"&&o!=="$?"||t++}e=e.nextSibling}pa=null}}else pa=ma?Ol(e.stateNode.nextSibling):null;return!0}function l3(){for(var e=pa;e;)e=Ol(e.nextSibling)}function Nh(){pa=ma=null,Cr=!1}function c1(e){fs===null?fs=[e]:fs.push(e)}var jQ=Dc.ReactCurrentBatchConfig;function ls(e,t){if(e&&e.defaultProps){t=Nr({},t),e=e.defaultProps;for(var o in e)t[o]===void 0&&(t[o]=e[o]);return t}return t}var $v=Vl(null),Hv=null,hh=null,l1=null;function u1(){l1=hh=Hv=null}function d1(e){var t=$v.current;vr($v),e._currentValue=t}function vR(e,t,o){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===o)break;e=e.return}}function bh(e,t){Hv=e,l1=hh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(jo=!0),e.firstContext=null)}function Ha(e){var t=e._currentValue;if(l1!==e)if(e={context:e,memoizedValue:t,next:null},hh===null){if(Hv===null)throw Error(je(308));hh=e,Hv.dependencies={lanes:0,firstContext:e}}else hh=hh.next=e;return t}var bu=null;function h1(e){bu===null?bu=[e]:bu.push(e)}function u3(e,t,o,a){var c=t.interleaved;return c===null?(o.next=o,h1(t)):(o.next=c.next,c.next=o),t.interleaved=o,Ic(e,a)}function Ic(e,t){e.lanes|=t;var o=e.alternate;for(o!==null&&(o.lanes|=t),o=e,e=e.return;e!==null;)e.childLanes|=t,o=e.alternate,o!==null&&(o.childLanes|=t),o=e,e=e.return;return o.tag===3?o.stateNode:null}var vl=!1;function p1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function d3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function yc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Al(e,t,o){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,yn&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Ic(e,o)}return c=a.interleaved,c===null?(t.next=t,h1(a)):(t.next=c.next,c.next=t),a.interleaved=t,Ic(e,o)}function dv(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,o|=a,t.lanes=o,QI(e,o)}}function uU(e,t){var o=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,o===a)){var c=null,u=null;if(o=o.firstBaseUpdate,o!==null){do{var h={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};u===null?c=u=h:u=u.next=h,o=o.next}while(o!==null);u===null?c=u=t:u=u.next=t}else c=u=t;o={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:a.shared,effects:a.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}function Wv(e,t,o,a){var c=e.updateQueue;vl=!1;var u=c.firstBaseUpdate,h=c.lastBaseUpdate,f=c.shared.pending;if(f!==null){c.shared.pending=null;var m=f,g=m.next;m.next=null,h===null?u=g:h.next=g,h=m;var _=e.alternate;_!==null&&(_=_.updateQueue,f=_.lastBaseUpdate,f!==h&&(f===null?_.firstBaseUpdate=g:f.next=g,_.lastBaseUpdate=m))}if(u!==null){var y=c.baseState;h=0,_=g=m=null,f=u;do{var b=f.lane,A=f.eventTime;if((a&b)===b){_!==null&&(_=_.next={eventTime:A,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var I=e,w=f;switch(b=t,A=o,w.tag){case 1:if(I=w.payload,typeof I=="function"){y=I.call(A,y,b);break e}y=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=w.payload,b=typeof I=="function"?I.call(A,y,b):I,b==null)break e;y=Nr({},y,b);break e;case 2:vl=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,b=c.effects,b===null?c.effects=[f]:b.push(f))}else A={eventTime:A,lane:b,tag:f.tag,payload:f.payload,callback:f.callback,next:null},_===null?(g=_=A,m=y):_=_.next=A,h|=b;if(f=f.next,f===null){if(f=c.shared.pending,f===null)break;b=f,f=b.next,b.next=null,c.lastBaseUpdate=b,c.shared.pending=null}}while(1);if(_===null&&(m=y),c.baseState=m,c.firstBaseUpdate=g,c.lastBaseUpdate=_,t=c.shared.interleaved,t!==null){c=t;do h|=c.lane,c=c.next;while(c!==t)}else u===null&&(c.shared.lanes=0);Uu|=h,e.lanes=h,e.memoizedState=y}}function dU(e,t,o){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=o,typeof c!="function")throw Error(je(191,c));c.call(a)}}}var h3=new uj.Component().refs;function ER(e,t,o,a){t=e.memoizedState,o=o(a,t),o=o==null?t:Nr({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var kE={isMounted:function(e){return(e=e._reactInternals)?Bu(e)===e:!1},enqueueSetState:function(e,t,o){e=e._reactInternals;var a=So(),c=xl(e),u=yc(a,c);u.payload=t,o!=null&&(u.callback=o),t=Al(e,u,c),t!==null&&(_s(t,e,c,a),dv(t,e,c))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var a=So(),c=xl(e),u=yc(a,c);u.tag=1,u.payload=t,o!=null&&(u.callback=o),t=Al(e,u,c),t!==null&&(_s(t,e,c,a),dv(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=So(),a=xl(e),c=yc(o,a);c.tag=2,t!=null&&(c.callback=t),t=Al(e,c,a),t!==null&&(_s(t,e,a,o),dv(t,e,a))}};function hU(e,t,o,a,c,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,u,h):t.prototype&&t.prototype.isPureReactComponent?!zf(o,a)||!zf(c,u):!0}function p3(e,t,o){var a=!1,c=kl,u=t.contextType;return typeof u=="object"&&u!==null?u=Ha(u):(c=Ho(t)?ku:uo.current,a=t.contextTypes,u=(a=a!=null)?Ah(e,c):kl),t=new t(o,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=kE,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=u),t}function pU(e,t,o,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,a),t.state!==e&&kE.enqueueReplaceState(t,t.state,null)}function _R(e,t,o,a){var c=e.stateNode;c.props=o,c.state=e.memoizedState,c.refs=h3,p1(e);var u=t.contextType;typeof u=="object"&&u!==null?c.context=Ha(u):(u=Ho(t)?ku:uo.current,c.context=Ah(e,u)),c.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(ER(e,t,u,o),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&kE.enqueueReplaceState(c,c.state,null),Wv(e,o,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function ef(e,t,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(je(309));var a=o.stateNode}if(!a)throw Error(je(147,e));var c=a,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(h){var f=c.refs;f===h3&&(f=c.refs={}),h===null?delete f[u]:f[u]=h},t._stringRef=u,t)}if(typeof e!="string")throw Error(je(284));if(!o._owner)throw Error(je(290,e))}return e}function Ag(e,t){throw e=Object.prototype.toString.call(t),Error(je(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fU(e){var t=e._init;return t(e._payload)}function f3(e){function t(x,O){if(e){var P=x.deletions;P===null?(x.deletions=[O],x.flags|=16):P.push(O)}}function o(x,O){if(!e)return null;for(;O!==null;)t(x,O),O=O.sibling;return null}function a(x,O){for(x=new Map;O!==null;)O.key!==null?x.set(O.key,O):x.set(O.index,O),O=O.sibling;return x}function c(x,O){return x=Pl(x,O),x.index=0,x.sibling=null,x}function u(x,O,P){return x.index=P,e?(P=x.alternate,P!==null?(P=P.index,P<O?(x.flags|=2,O):P):(x.flags|=2,O)):(x.flags|=1048576,O)}function h(x){return e&&x.alternate===null&&(x.flags|=2),x}function f(x,O,P,M){return O===null||O.tag!==6?(O=pb(P,x.mode,M),O.return=x,O):(O=c(O,P),O.return=x,O)}function m(x,O,P,M){var V=P.type;return V===ih?_(x,O,P.props.children,M,P.key):O!==null&&(O.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===gl&&fU(V)===O.type)?(M=c(O,P.props),M.ref=ef(x,O,P),M.return=x,M):(M=vv(P.type,P.key,P.props,null,x.mode,M),M.ref=ef(x,O,P),M.return=x,M)}function g(x,O,P,M){return O===null||O.tag!==4||O.stateNode.containerInfo!==P.containerInfo||O.stateNode.implementation!==P.implementation?(O=fb(P,x.mode,M),O.return=x,O):(O=c(O,P.children||[]),O.return=x,O)}function _(x,O,P,M,V){return O===null||O.tag!==7?(O=Au(P,x.mode,M,V),O.return=x,O):(O=c(O,P),O.return=x,O)}function y(x,O,P){if(typeof O=="string"&&O!==""||typeof O=="number")return O=pb(""+O,x.mode,P),O.return=x,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Eg:return P=vv(O.type,O.key,O.props,null,x.mode,P),P.ref=ef(x,null,O),P.return=x,P;case rh:return O=fb(O,x.mode,P),O.return=x,O;case gl:var M=O._init;return y(x,M(O._payload),P)}if(mf(O)||qp(O))return O=Au(O,x.mode,P,null),O.return=x,O;Ag(x,O)}return null}function b(x,O,P,M){var V=O!==null?O.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return V!==null?null:f(x,O,""+P,M);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Eg:return P.key===V?m(x,O,P,M):null;case rh:return P.key===V?g(x,O,P,M):null;case gl:return V=P._init,b(x,O,V(P._payload),M)}if(mf(P)||qp(P))return V!==null?null:_(x,O,P,M,null);Ag(x,P)}return null}function A(x,O,P,M,V){if(typeof M=="string"&&M!==""||typeof M=="number")return x=x.get(P)||null,f(O,x,""+M,V);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Eg:return x=x.get(M.key===null?P:M.key)||null,m(O,x,M,V);case rh:return x=x.get(M.key===null?P:M.key)||null,g(O,x,M,V);case gl:var F=M._init;return A(x,O,P,F(M._payload),V)}if(mf(M)||qp(M))return x=x.get(P)||null,_(O,x,M,V,null);Ag(O,M)}return null}function I(x,O,P,M){for(var V=null,F=null,B=O,H=O=0,K=null;B!==null&&H<P.length;H++){B.index>H?(K=B,B=null):K=B.sibling;var $=b(x,B,P[H],M);if($===null){B===null&&(B=K);break}e&&B&&$.alternate===null&&t(x,B),O=u($,O,H),F===null?V=$:F.sibling=$,F=$,B=K}if(H===P.length)return o(x,B),Cr&&vu(x,H),V;if(B===null){for(;H<P.length;H++)B=y(x,P[H],M),B!==null&&(O=u(B,O,H),F===null?V=B:F.sibling=B,F=B);return Cr&&vu(x,H),V}for(B=a(x,B);H<P.length;H++)K=A(B,x,H,P[H],M),K!==null&&(e&&K.alternate!==null&&B.delete(K.key===null?H:K.key),O=u(K,O,H),F===null?V=K:F.sibling=K,F=K);return e&&B.forEach(function(Z){return t(x,Z)}),Cr&&vu(x,H),V}function w(x,O,P,M){var V=qp(P);if(typeof V!="function")throw Error(je(150));if(P=V.call(P),P==null)throw Error(je(151));for(var F=V=null,B=O,H=O=0,K=null,$=P.next();B!==null&&!$.done;H++,$=P.next()){B.index>H?(K=B,B=null):K=B.sibling;var Z=b(x,B,$.value,M);if(Z===null){B===null&&(B=K);break}e&&B&&Z.alternate===null&&t(x,B),O=u(Z,O,H),F===null?V=Z:F.sibling=Z,F=Z,B=K}if($.done)return o(x,B),Cr&&vu(x,H),V;if(B===null){for(;!$.done;H++,$=P.next())$=y(x,$.value,M),$!==null&&(O=u($,O,H),F===null?V=$:F.sibling=$,F=$);return Cr&&vu(x,H),V}for(B=a(x,B);!$.done;H++,$=P.next())$=A(B,x,H,$.value,M),$!==null&&(e&&$.alternate!==null&&B.delete($.key===null?H:$.key),O=u($,O,H),F===null?V=$:F.sibling=$,F=$);return e&&B.forEach(function(z){return t(x,z)}),Cr&&vu(x,H),V}function D(x,O,P,M){if(typeof P=="object"&&P!==null&&P.type===ih&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case Eg:e:{for(var V=P.key,F=O;F!==null;){if(F.key===V){if(V=P.type,V===ih){if(F.tag===7){o(x,F.sibling),O=c(F,P.props.children),O.return=x,x=O;break e}}else if(F.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===gl&&fU(V)===F.type){o(x,F.sibling),O=c(F,P.props),O.ref=ef(x,F,P),O.return=x,x=O;break e}o(x,F);break}else t(x,F);F=F.sibling}P.type===ih?(O=Au(P.props.children,x.mode,M,P.key),O.return=x,x=O):(M=vv(P.type,P.key,P.props,null,x.mode,M),M.ref=ef(x,O,P),M.return=x,x=M)}return h(x);case rh:e:{for(F=P.key;O!==null;){if(O.key===F)if(O.tag===4&&O.stateNode.containerInfo===P.containerInfo&&O.stateNode.implementation===P.implementation){o(x,O.sibling),O=c(O,P.children||[]),O.return=x,x=O;break e}else{o(x,O);break}else t(x,O);O=O.sibling}O=fb(P,x.mode,M),O.return=x,x=O}return h(x);case gl:return F=P._init,D(x,O,F(P._payload),M)}if(mf(P))return I(x,O,P,M);if(qp(P))return w(x,O,P,M);Ag(x,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,O!==null&&O.tag===6?(o(x,O.sibling),O=c(O,P),O.return=x,x=O):(o(x,O),O=pb(P,x.mode,M),O.return=x,x=O),h(x)):o(x,O)}return D}var xh=f3(!0),m3=f3(!1),_m={},zs=Vl(_m),Xf=Vl(_m),Jf=Vl(_m);function Tu(e){if(e===_m)throw Error(je(174));return e}function f1(e,t){switch(ur(Jf,t),ur(Xf,e),ur(zs,_m),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:JT(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=JT(t,e)}vr(zs),ur(zs,t)}function Ph(){vr(zs),vr(Xf),vr(Jf)}function g3(e){Tu(Jf.current);var t=Tu(zs.current),o=JT(t,e.type);t!==o&&(ur(Xf,e),ur(zs,o))}function m1(e){Xf.current===e&&(vr(zs),vr(Xf))}var wr=Vl(0);function Gv(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sb=[];function g1(){for(var e=0;e<sb.length;e++)sb[e]._workInProgressVersionPrimary=null;sb.length=0}var hv=Dc.ReactCurrentDispatcher,cb=Dc.ReactCurrentBatchConfig,Mu=0,Ar=null,fi=null,Ii=null,zv=!1,Rf=!1,Qf=0,BQ=0;function oo(){throw Error(je(321))}function v1(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!ys(e[o],t[o]))return!1;return!0}function E1(e,t,o,a,c,u){if(Mu=u,Ar=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hv.current=e===null||e.memoizedState===null?GQ:zQ,e=o(a,c),Rf){u=0;do{if(Rf=!1,Qf=0,25<=u)throw Error(je(301));u+=1,Ii=fi=null,t.updateQueue=null,hv.current=KQ,e=o(a,c)}while(Rf)}if(hv.current=Kv,t=fi!==null&&fi.next!==null,Mu=0,Ii=fi=Ar=null,zv=!1,t)throw Error(je(300));return e}function _1(){var e=Qf!==0;return Qf=0,e}function Bs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ii===null?Ar.memoizedState=Ii=e:Ii=Ii.next=e,Ii}function Wa(){if(fi===null){var e=Ar.alternate;e=e!==null?e.memoizedState:null}else e=fi.next;var t=Ii===null?Ar.memoizedState:Ii.next;if(t!==null)Ii=t,fi=e;else{if(e===null)throw Error(je(310));fi=e,e={memoizedState:fi.memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},Ii===null?Ar.memoizedState=Ii=e:Ii=Ii.next=e}return Ii}function Zf(e,t){return typeof t=="function"?t(e):t}function lb(e){var t=Wa(),o=t.queue;if(o===null)throw Error(je(311));o.lastRenderedReducer=e;var a=fi,c=a.baseQueue,u=o.pending;if(u!==null){if(c!==null){var h=c.next;c.next=u.next,u.next=h}a.baseQueue=c=u,o.pending=null}if(c!==null){u=c.next,a=a.baseState;var f=h=null,m=null,g=u;do{var _=g.lane;if((Mu&_)===_)m!==null&&(m=m.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),a=g.hasEagerState?g.eagerState:e(a,g.action);else{var y={lane:_,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};m===null?(f=m=y,h=a):m=m.next=y,Ar.lanes|=_,Uu|=_}g=g.next}while(g!==null&&g!==u);m===null?h=a:m.next=f,ys(a,t.memoizedState)||(jo=!0),t.memoizedState=a,t.baseState=h,t.baseQueue=m,o.lastRenderedState=a}if(e=o.interleaved,e!==null){c=e;do u=c.lane,Ar.lanes|=u,Uu|=u,c=c.next;while(c!==e)}else c===null&&(o.lanes=0);return[t.memoizedState,o.dispatch]}function ub(e){var t=Wa(),o=t.queue;if(o===null)throw Error(je(311));o.lastRenderedReducer=e;var a=o.dispatch,c=o.pending,u=t.memoizedState;if(c!==null){o.pending=null;var h=c=c.next;do u=e(u,h.action),h=h.next;while(h!==c);ys(u,t.memoizedState)||(jo=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),o.lastRenderedState=u}return[u,a]}function v3(){}function E3(e,t){var o=Ar,a=Wa(),c=t(),u=!ys(a.memoizedState,c);if(u&&(a.memoizedState=c,jo=!0),a=a.queue,S1(y3.bind(null,o,a,e),[e]),a.getSnapshot!==t||u||Ii!==null&&Ii.memoizedState.tag&1){if(o.flags|=2048,em(9,S3.bind(null,o,a,c,t),void 0,null),Oi===null)throw Error(je(349));Mu&30||_3(o,t,c)}return c}function _3(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=Ar.updateQueue,t===null?(t={lastEffect:null,stores:null},Ar.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function S3(e,t,o,a){t.value=o,t.getSnapshot=a,C3(t)&&b3(e)}function y3(e,t,o){return o(function(){C3(t)&&b3(e)})}function C3(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!ys(e,o)}catch{return!0}}function b3(e){var t=Ic(e,1);t!==null&&_s(t,e,1,-1)}function mU(e){var t=Bs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zf,lastRenderedState:e},t.queue=e,e=e.dispatch=WQ.bind(null,Ar,e),[t.memoizedState,e]}function em(e,t,o,a){return e={tag:e,create:t,destroy:o,deps:a,next:null},t=Ar.updateQueue,t===null?(t={lastEffect:null,stores:null},Ar.updateQueue=t,t.lastEffect=e.next=e):(o=t.lastEffect,o===null?t.lastEffect=e.next=e:(a=o.next,o.next=e,e.next=a,t.lastEffect=e)),e}function T3(){return Wa().memoizedState}function pv(e,t,o,a){var c=Bs();Ar.flags|=e,c.memoizedState=em(1|t,o,void 0,a===void 0?null:a)}function LE(e,t,o,a){var c=Wa();a=a===void 0?null:a;var u=void 0;if(fi!==null){var h=fi.memoizedState;if(u=h.destroy,a!==null&&v1(a,h.deps)){c.memoizedState=em(t,o,u,a);return}}Ar.flags|=e,c.memoizedState=em(1|t,o,u,a)}function gU(e,t){return pv(8390656,8,e,t)}function S1(e,t){return LE(2048,8,e,t)}function R3(e,t){return LE(4,2,e,t)}function I3(e,t){return LE(4,4,e,t)}function w3(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function O3(e,t,o){return o=o!=null?o.concat([e]):null,LE(4,4,w3.bind(null,t,e),o)}function y1(){}function A3(e,t){var o=Wa();t=t===void 0?null:t;var a=o.memoizedState;return a!==null&&t!==null&&v1(t,a[1])?a[0]:(o.memoizedState=[e,t],e)}function N3(e,t){var o=Wa();t=t===void 0?null:t;var a=o.memoizedState;return a!==null&&t!==null&&v1(t,a[1])?a[0]:(e=e(),o.memoizedState=[e,t],e)}function x3(e,t,o){return Mu&21?(ys(o,t)||(o=kj(),Ar.lanes|=o,Uu|=o,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,jo=!0),e.memoizedState=o)}function $Q(e,t){var o=$n;$n=o!==0&&4>o?o:4,e(!0);var a=cb.transition;cb.transition={};try{e(!1),t()}finally{$n=o,cb.transition=a}}function P3(){return Wa().memoizedState}function HQ(e,t,o){var a=xl(e);if(o={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null},D3(e))k3(t,o);else if(o=u3(e,t,o,a),o!==null){var c=So();_s(o,e,a,c),L3(o,t,a)}}function WQ(e,t,o){var a=xl(e),c={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null};if(D3(e))k3(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,f=u(h,o);if(c.hasEagerState=!0,c.eagerState=f,ys(f,h)){var m=t.interleaved;m===null?(c.next=c,h1(t)):(c.next=m.next,m.next=c),t.interleaved=c;return}}catch{}finally{}o=u3(e,t,c,a),o!==null&&(c=So(),_s(o,e,a,c),L3(o,t,a))}}function D3(e){var t=e.alternate;return e===Ar||t!==null&&t===Ar}function k3(e,t){Rf=zv=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function L3(e,t,o){if(o&4194240){var a=t.lanes;a&=e.pendingLanes,o|=a,t.lanes=o,QI(e,o)}}var Kv={readContext:Ha,useCallback:oo,useContext:oo,useEffect:oo,useImperativeHandle:oo,useInsertionEffect:oo,useLayoutEffect:oo,useMemo:oo,useReducer:oo,useRef:oo,useState:oo,useDebugValue:oo,useDeferredValue:oo,useTransition:oo,useMutableSource:oo,useSyncExternalStore:oo,useId:oo,unstable_isNewReconciler:!1},GQ={readContext:Ha,useCallback:function(e,t){return Bs().memoizedState=[e,t===void 0?null:t],e},useContext:Ha,useEffect:gU,useImperativeHandle:function(e,t,o){return o=o!=null?o.concat([e]):null,pv(4194308,4,w3.bind(null,t,e),o)},useLayoutEffect:function(e,t){return pv(4194308,4,e,t)},useInsertionEffect:function(e,t){return pv(4,2,e,t)},useMemo:function(e,t){var o=Bs();return t=t===void 0?null:t,e=e(),o.memoizedState=[e,t],e},useReducer:function(e,t,o){var a=Bs();return t=o!==void 0?o(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=HQ.bind(null,Ar,e),[a.memoizedState,e]},useRef:function(e){var t=Bs();return e={current:e},t.memoizedState=e},useState:mU,useDebugValue:y1,useDeferredValue:function(e){return Bs().memoizedState=e},useTransition:function(){var e=mU(!1),t=e[0];return e=$Q.bind(null,e[1]),Bs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,o){var a=Ar,c=Bs();if(Cr){if(o===void 0)throw Error(je(407));o=o()}else{if(o=t(),Oi===null)throw Error(je(349));Mu&30||_3(a,t,o)}c.memoizedState=o;var u={value:o,getSnapshot:t};return c.queue=u,gU(y3.bind(null,a,u,e),[e]),a.flags|=2048,em(9,S3.bind(null,a,u,o,t),void 0,null),o},useId:function(){var e=Bs(),t=Oi.identifierPrefix;if(Cr){var o=Sc,a=_c;o=(a&~(1<<32-Es(a)-1)).toString(32)+o,t=":"+t+"R"+o,o=Qf++,0<o&&(t+="H"+o.toString(32)),t+=":"}else o=BQ++,t=":"+t+"r"+o.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},zQ={readContext:Ha,useCallback:A3,useContext:Ha,useEffect:S1,useImperativeHandle:O3,useInsertionEffect:R3,useLayoutEffect:I3,useMemo:N3,useReducer:lb,useRef:T3,useState:function(){return lb(Zf)},useDebugValue:y1,useDeferredValue:function(e){var t=Wa();return x3(t,fi.memoizedState,e)},useTransition:function(){var e=lb(Zf)[0],t=Wa().memoizedState;return[e,t]},useMutableSource:v3,useSyncExternalStore:E3,useId:P3,unstable_isNewReconciler:!1},KQ={readContext:Ha,useCallback:A3,useContext:Ha,useEffect:S1,useImperativeHandle:O3,useInsertionEffect:R3,useLayoutEffect:I3,useMemo:N3,useReducer:ub,useRef:T3,useState:function(){return ub(Zf)},useDebugValue:y1,useDeferredValue:function(e){var t=Wa();return fi===null?t.memoizedState=e:x3(t,fi.memoizedState,e)},useTransition:function(){var e=ub(Zf)[0],t=Wa().memoizedState;return[e,t]},useMutableSource:v3,useSyncExternalStore:E3,useId:P3,unstable_isNewReconciler:!1};function Dh(e,t){try{var o="",a=t;do o+=yJ(a),a=a.return;while(a);var c=o}catch(u){c=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:c,digest:null}}function db(e,t,o){return{value:e,source:null,stack:o??null,digest:t??null}}function SR(e,t){try{console.error(t.value)}catch(o){setTimeout(function(){throw o})}}var YQ=typeof WeakMap=="function"?WeakMap:Map;function M3(e,t,o){o=yc(-1,o),o.tag=3,o.payload={element:null};var a=t.value;return o.callback=function(){qv||(qv=!0,NR=a),SR(e,t)},o}function U3(e,t,o){o=yc(-1,o),o.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;o.payload=function(){return a(c)},o.callback=function(){SR(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(o.callback=function(){SR(e,t),typeof a!="function"&&(Nl===null?Nl=new Set([this]):Nl.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),o}function vU(e,t,o){var a=e.pingCache;if(a===null){a=e.pingCache=new YQ;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(o)||(c.add(o),e=cZ.bind(null,e,t,o),t.then(e,e))}function EU(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _U(e,t,o,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(t=yc(-1,1),t.tag=2,Al(o,t,1))),o.lanes|=1),e)}var qQ=Dc.ReactCurrentOwner,jo=!1;function _o(e,t,o,a){t.child=e===null?m3(t,null,o,a):xh(t,e.child,o,a)}function SU(e,t,o,a,c){o=o.render;var u=t.ref;return bh(t,c),a=E1(e,t,o,a,u,c),o=_1(),e!==null&&!jo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,wc(e,t,c)):(Cr&&o&&a1(t),t.flags|=1,_o(e,t,a,c),t.child)}function yU(e,t,o,a,c){if(e===null){var u=o.type;return typeof u=="function"&&!A1(u)&&u.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(t.tag=15,t.type=u,F3(e,t,u,a,c)):(e=vv(o.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&c)){var h=u.memoizedProps;if(o=o.compare,o=o!==null?o:zf,o(h,a)&&e.ref===t.ref)return wc(e,t,c)}return t.flags|=1,e=Pl(u,a),e.ref=t.ref,e.return=t,t.child=e}function F3(e,t,o,a,c){if(e!==null){var u=e.memoizedProps;if(zf(u,a)&&e.ref===t.ref)if(jo=!1,t.pendingProps=a=u,(e.lanes&c)!==0)e.flags&131072&&(jo=!0);else return t.lanes=e.lanes,wc(e,t,c)}return yR(e,t,o,a,c)}function V3(e,t,o){var a=t.pendingProps,c=a.children,u=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ur(fh,ha),ha|=o;else{if(!(o&1073741824))return e=u!==null?u.baseLanes|o:o,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ur(fh,ha),ha|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=u!==null?u.baseLanes:o,ur(fh,ha),ha|=a}else u!==null?(a=u.baseLanes|o,t.memoizedState=null):a=o,ur(fh,ha),ha|=a;return _o(e,t,c,o),t.child}function j3(e,t){var o=t.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(t.flags|=512,t.flags|=2097152)}function yR(e,t,o,a,c){var u=Ho(o)?ku:uo.current;return u=Ah(t,u),bh(t,c),o=E1(e,t,o,a,u,c),a=_1(),e!==null&&!jo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,wc(e,t,c)):(Cr&&a&&a1(t),t.flags|=1,_o(e,t,o,c),t.child)}function CU(e,t,o,a,c){if(Ho(o)){var u=!0;Vv(t)}else u=!1;if(bh(t,c),t.stateNode===null)fv(e,t),p3(t,o,a),_R(t,o,a,c),a=!0;else if(e===null){var h=t.stateNode,f=t.memoizedProps;h.props=f;var m=h.context,g=o.contextType;typeof g=="object"&&g!==null?g=Ha(g):(g=Ho(o)?ku:uo.current,g=Ah(t,g));var _=o.getDerivedStateFromProps,y=typeof _=="function"||typeof h.getSnapshotBeforeUpdate=="function";y||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(f!==a||m!==g)&&pU(t,h,a,g),vl=!1;var b=t.memoizedState;h.state=b,Wv(t,a,h,c),m=t.memoizedState,f!==a||b!==m||$o.current||vl?(typeof _=="function"&&(ER(t,o,_,a),m=t.memoizedState),(f=vl||hU(t,o,f,a,b,m,g))?(y||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=m),h.props=a,h.state=m,h.context=g,a=f):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{h=t.stateNode,d3(e,t),f=t.memoizedProps,g=t.type===t.elementType?f:ls(t.type,f),h.props=g,y=t.pendingProps,b=h.context,m=o.contextType,typeof m=="object"&&m!==null?m=Ha(m):(m=Ho(o)?ku:uo.current,m=Ah(t,m));var A=o.getDerivedStateFromProps;(_=typeof A=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(f!==y||b!==m)&&pU(t,h,a,m),vl=!1,b=t.memoizedState,h.state=b,Wv(t,a,h,c);var I=t.memoizedState;f!==y||b!==I||$o.current||vl?(typeof A=="function"&&(ER(t,o,A,a),I=t.memoizedState),(g=vl||hU(t,o,g,a,b,I,m)||!1)?(_||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(a,I,m),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(a,I,m)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||f===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=I),h.props=a,h.state=I,h.context=m,a=g):(typeof h.componentDidUpdate!="function"||f===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),a=!1)}return CR(e,t,o,a,u,c)}function CR(e,t,o,a,c,u){j3(e,t);var h=(t.flags&128)!==0;if(!a&&!h)return c&&sU(t,o,!1),wc(e,t,u);a=t.stateNode,qQ.current=t;var f=h&&typeof o.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&h?(t.child=xh(t,e.child,null,u),t.child=xh(t,null,f,u)):_o(e,t,f,u),t.memoizedState=a.state,c&&sU(t,o,!0),t.child}function B3(e){var t=e.stateNode;t.pendingContext?aU(e,t.pendingContext,t.pendingContext!==t.context):t.context&&aU(e,t.context,!1),f1(e,t.containerInfo)}function bU(e,t,o,a,c){return Nh(),c1(c),t.flags|=256,_o(e,t,o,a),t.child}var bR={dehydrated:null,treeContext:null,retryLane:0};function TR(e){return{baseLanes:e,cachePool:null,transitions:null}}function $3(e,t,o){var a=t.pendingProps,c=wr.current,u=!1,h=(t.flags&128)!==0,f;if((f=h)||(f=e!==null&&e.memoizedState===null?!1:(c&2)!==0),f?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),ur(wr,c&1),e===null)return gR(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(h=a.children,e=a.fallback,u?(a=t.mode,u=t.child,h={mode:"hidden",children:h},!(a&1)&&u!==null?(u.childLanes=0,u.pendingProps=h):u=FE(h,a,0,null),e=Au(e,a,o,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=TR(o),t.memoizedState=bR,e):C1(t,h));if(c=e.memoizedState,c!==null&&(f=c.dehydrated,f!==null))return XQ(e,t,h,a,f,c,o);if(u){u=a.fallback,h=t.mode,c=e.child,f=c.sibling;var m={mode:"hidden",children:a.children};return!(h&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=m,t.deletions=null):(a=Pl(c,m),a.subtreeFlags=c.subtreeFlags&14680064),f!==null?u=Pl(f,u):(u=Au(u,h,o,null),u.flags|=2),u.return=t,a.return=t,a.sibling=u,t.child=a,a=u,u=t.child,h=e.child.memoizedState,h=h===null?TR(o):{baseLanes:h.baseLanes|o,cachePool:null,transitions:h.transitions},u.memoizedState=h,u.childLanes=e.childLanes&~o,t.memoizedState=bR,a}return u=e.child,e=u.sibling,a=Pl(u,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=o),a.return=t,a.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=a,t.memoizedState=null,a}function C1(e,t){return t=FE({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ng(e,t,o,a){return a!==null&&c1(a),xh(t,e.child,null,o),e=C1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function XQ(e,t,o,a,c,u,h){if(o)return t.flags&256?(t.flags&=-257,a=db(Error(je(422))),Ng(e,t,h,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=a.fallback,c=t.mode,a=FE({mode:"visible",children:a.children},c,0,null),u=Au(u,c,h,null),u.flags|=2,a.return=t,u.return=t,a.sibling=u,t.child=a,t.mode&1&&xh(t,e.child,null,h),t.child.memoizedState=TR(h),t.memoizedState=bR,u);if(!(t.mode&1))return Ng(e,t,h,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var f=a.dgst;return a=f,u=Error(je(419)),a=db(u,a,void 0),Ng(e,t,h,a)}if(f=(h&e.childLanes)!==0,jo||f){if(a=Oi,a!==null){switch(h&-h){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|h)?0:c,c!==0&&c!==u.retryLane&&(u.retryLane=c,Ic(e,c),_s(a,e,c,-1))}return O1(),a=db(Error(je(421))),Ng(e,t,h,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=lZ.bind(null,e),c._reactRetry=t,null):(e=u.treeContext,pa=Ol(c.nextSibling),ma=t,Cr=!0,fs=null,e!==null&&(Fa[Va++]=_c,Fa[Va++]=Sc,Fa[Va++]=Lu,_c=e.id,Sc=e.overflow,Lu=t),t=C1(t,a.children),t.flags|=4096,t)}function TU(e,t,o){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),vR(e.return,t,o)}function hb(e,t,o,a,c){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:o,tailMode:c}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=a,u.tail=o,u.tailMode=c)}function H3(e,t,o){var a=t.pendingProps,c=a.revealOrder,u=a.tail;if(_o(e,t,a.children,o),a=wr.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&TU(e,o,t);else if(e.tag===19)TU(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(ur(wr,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(o=t.child,c=null;o!==null;)e=o.alternate,e!==null&&Gv(e)===null&&(c=o),o=o.sibling;o=c,o===null?(c=t.child,t.child=null):(c=o.sibling,o.sibling=null),hb(t,!1,c,o,u);break;case"backwards":for(o=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Gv(e)===null){t.child=c;break}e=c.sibling,c.sibling=o,o=c,c=e}hb(t,!0,o,null,u);break;case"together":hb(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function fv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wc(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),Uu|=t.lanes,!(o&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(je(153));if(t.child!==null){for(e=t.child,o=Pl(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=Pl(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function JQ(e,t,o){switch(t.tag){case 3:B3(t),Nh();break;case 5:g3(t);break;case 1:Ho(t.type)&&Vv(t);break;case 4:f1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;ur($v,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(ur(wr,wr.current&1),t.flags|=128,null):o&t.child.childLanes?$3(e,t,o):(ur(wr,wr.current&1),e=wc(e,t,o),e!==null?e.sibling:null);ur(wr,wr.current&1);break;case 19:if(a=(o&t.childLanes)!==0,e.flags&128){if(a)return H3(e,t,o);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ur(wr,wr.current),a)break;return null;case 22:case 23:return t.lanes=0,V3(e,t,o)}return wc(e,t,o)}var W3,RR,G3,z3;W3=function(e,t){for(var o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};RR=function(){};G3=function(e,t,o,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Tu(zs.current);var u=null;switch(o){case"input":c=KT(e,c),a=KT(e,a),u=[];break;case"select":c=Nr({},c,{value:void 0}),a=Nr({},a,{value:void 0}),u=[];break;case"textarea":c=XT(e,c),a=XT(e,a),u=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Uv)}QT(o,a);var h;o=null;for(g in c)if(!a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&c[g]!=null)if(g==="style"){var f=c[g];for(h in f)f.hasOwnProperty(h)&&(o||(o={}),o[h]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Vf.hasOwnProperty(g)?u||(u=[]):(u=u||[]).push(g,null));for(g in a){var m=a[g];if(f=c!=null?c[g]:void 0,a.hasOwnProperty(g)&&m!==f&&(m!=null||f!=null))if(g==="style")if(f){for(h in f)!f.hasOwnProperty(h)||m&&m.hasOwnProperty(h)||(o||(o={}),o[h]="");for(h in m)m.hasOwnProperty(h)&&f[h]!==m[h]&&(o||(o={}),o[h]=m[h])}else o||(u||(u=[]),u.push(g,o)),o=m;else g==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,f=f?f.__html:void 0,m!=null&&f!==m&&(u=u||[]).push(g,m)):g==="children"?typeof m!="string"&&typeof m!="number"||(u=u||[]).push(g,""+m):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Vf.hasOwnProperty(g)?(m!=null&&g==="onScroll"&&gr("scroll",e),u||f===m||(u=[])):(u=u||[]).push(g,m))}o&&(u=u||[]).push("style",o);var g=u;(t.updateQueue=g)&&(t.flags|=4)}};z3=function(e,t,o,a){o!==a&&(t.flags|=4)};function tf(e,t){if(!Cr)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ao(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,a=0;if(t)for(var c=e.child;c!==null;)o|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)o|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=o,t}function QQ(e,t,o){var a=t.pendingProps;switch(s1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ao(t),null;case 1:return Ho(t.type)&&Fv(),ao(t),null;case 3:return a=t.stateNode,Ph(),vr($o),vr(uo),g1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Og(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,fs!==null&&(DR(fs),fs=null))),RR(e,t),ao(t),null;case 5:m1(t);var c=Tu(Jf.current);if(o=t.type,e!==null&&t.stateNode!=null)G3(e,t,o,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(je(166));return ao(t),null}if(e=Tu(zs.current),Og(t)){a=t.stateNode,o=t.type;var u=t.memoizedProps;switch(a[Ws]=t,a[qf]=u,e=(t.mode&1)!==0,o){case"dialog":gr("cancel",a),gr("close",a);break;case"iframe":case"object":case"embed":gr("load",a);break;case"video":case"audio":for(c=0;c<vf.length;c++)gr(vf[c],a);break;case"source":gr("error",a);break;case"img":case"image":case"link":gr("error",a),gr("load",a);break;case"details":gr("toggle",a);break;case"input":DM(a,u),gr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!u.multiple},gr("invalid",a);break;case"textarea":LM(a,u),gr("invalid",a)}QT(o,u),c=null;for(var h in u)if(u.hasOwnProperty(h)){var f=u[h];h==="children"?typeof f=="string"?a.textContent!==f&&(u.suppressHydrationWarning!==!0&&wg(a.textContent,f,e),c=["children",f]):typeof f=="number"&&a.textContent!==""+f&&(u.suppressHydrationWarning!==!0&&wg(a.textContent,f,e),c=["children",""+f]):Vf.hasOwnProperty(h)&&f!=null&&h==="onScroll"&&gr("scroll",a)}switch(o){case"input":_g(a),kM(a,u,!0);break;case"textarea":_g(a),MM(a);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(a.onclick=Uv)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{h=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_j(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=h.createElement(o,{is:a.is}):(e=h.createElement(o),o==="select"&&(h=e,a.multiple?h.multiple=!0:a.size&&(h.size=a.size))):e=h.createElementNS(e,o),e[Ws]=t,e[qf]=a,W3(e,t,!1,!1),t.stateNode=e;e:{switch(h=ZT(o,a),o){case"dialog":gr("cancel",e),gr("close",e),c=a;break;case"iframe":case"object":case"embed":gr("load",e),c=a;break;case"video":case"audio":for(c=0;c<vf.length;c++)gr(vf[c],e);c=a;break;case"source":gr("error",e),c=a;break;case"img":case"image":case"link":gr("error",e),gr("load",e),c=a;break;case"details":gr("toggle",e),c=a;break;case"input":DM(e,a),c=KT(e,a),gr("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Nr({},a,{value:void 0}),gr("invalid",e);break;case"textarea":LM(e,a),c=XT(e,a),gr("invalid",e);break;default:c=a}QT(o,c),f=c;for(u in f)if(f.hasOwnProperty(u)){var m=f[u];u==="style"?Cj(e,m):u==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&Sj(e,m)):u==="children"?typeof m=="string"?(o!=="textarea"||m!=="")&&jf(e,m):typeof m=="number"&&jf(e,""+m):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Vf.hasOwnProperty(u)?m!=null&&u==="onScroll"&&gr("scroll",e):m!=null&&zI(e,u,m,h))}switch(o){case"input":_g(e),kM(e,a,!1);break;case"textarea":_g(e),MM(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Dl(a.value));break;case"select":e.multiple=!!a.multiple,u=a.value,u!=null?_h(e,!!a.multiple,u,!1):a.defaultValue!=null&&_h(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Uv)}switch(o){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ao(t),null;case 6:if(e&&t.stateNode!=null)z3(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(je(166));if(o=Tu(Jf.current),Tu(zs.current),Og(t)){if(a=t.stateNode,o=t.memoizedProps,a[Ws]=t,(u=a.nodeValue!==o)&&(e=ma,e!==null))switch(e.tag){case 3:wg(a.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wg(a.nodeValue,o,(e.mode&1)!==0)}u&&(t.flags|=4)}else a=(o.nodeType===9?o:o.ownerDocument).createTextNode(a),a[Ws]=t,t.stateNode=a}return ao(t),null;case 13:if(vr(wr),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Cr&&pa!==null&&t.mode&1&&!(t.flags&128))l3(),Nh(),t.flags|=98560,u=!1;else if(u=Og(t),a!==null&&a.dehydrated!==null){if(e===null){if(!u)throw Error(je(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(je(317));u[Ws]=t}else Nh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ao(t),u=!1}else fs!==null&&(DR(fs),fs=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=o,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||wr.current&1?mi===0&&(mi=3):O1())),t.updateQueue!==null&&(t.flags|=4),ao(t),null);case 4:return Ph(),RR(e,t),e===null&&Kf(t.stateNode.containerInfo),ao(t),null;case 10:return d1(t.type._context),ao(t),null;case 17:return Ho(t.type)&&Fv(),ao(t),null;case 19:if(vr(wr),u=t.memoizedState,u===null)return ao(t),null;if(a=(t.flags&128)!==0,h=u.rendering,h===null)if(a)tf(u,!1);else{if(mi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=Gv(e),h!==null){for(t.flags|=128,tf(u,!1),a=h.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=o,o=t.child;o!==null;)u=o,e=a,u.flags&=14680066,h=u.alternate,h===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=h.childLanes,u.lanes=h.lanes,u.child=h.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=h.memoizedProps,u.memoizedState=h.memoizedState,u.updateQueue=h.updateQueue,u.type=h.type,e=h.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return ur(wr,wr.current&1|2),t.child}e=e.sibling}u.tail!==null&&Wr()>kh&&(t.flags|=128,a=!0,tf(u,!1),t.lanes=4194304)}else{if(!a)if(e=Gv(h),e!==null){if(t.flags|=128,a=!0,o=e.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),tf(u,!0),u.tail===null&&u.tailMode==="hidden"&&!h.alternate&&!Cr)return ao(t),null}else 2*Wr()-u.renderingStartTime>kh&&o!==1073741824&&(t.flags|=128,a=!0,tf(u,!1),t.lanes=4194304);u.isBackwards?(h.sibling=t.child,t.child=h):(o=u.last,o!==null?o.sibling=h:t.child=h,u.last=h)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=Wr(),t.sibling=null,o=wr.current,ur(wr,a?o&1|2:o&1),t):(ao(t),null);case 22:case 23:return w1(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?ha&1073741824&&(ao(t),t.subtreeFlags&6&&(t.flags|=8192)):ao(t),null;case 24:return null;case 25:return null}throw Error(je(156,t.tag))}function ZQ(e,t){switch(s1(t),t.tag){case 1:return Ho(t.type)&&Fv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ph(),vr($o),vr(uo),g1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return m1(t),null;case 13:if(vr(wr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(je(340));Nh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return vr(wr),null;case 4:return Ph(),null;case 10:return d1(t.type._context),null;case 22:case 23:return w1(),null;case 24:return null;default:return null}}var xg=!1,lo=!1,eZ=typeof WeakSet=="function"?WeakSet:Set,ct=null;function ph(e,t){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(a){Mr(e,t,a)}else o.current=null}function IR(e,t,o){try{o()}catch(a){Mr(e,t,a)}}var RU=!1;function tZ(e,t){if(lR=kv,e=Xj(),o1(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var a=o.getSelection&&o.getSelection();if(a&&a.rangeCount!==0){o=a.anchorNode;var c=a.anchorOffset,u=a.focusNode;a=a.focusOffset;try{o.nodeType,u.nodeType}catch{o=null;break e}var h=0,f=-1,m=-1,g=0,_=0,y=e,b=null;t:for(;;){for(var A;y!==o||c!==0&&y.nodeType!==3||(f=h+c),y!==u||a!==0&&y.nodeType!==3||(m=h+a),y.nodeType===3&&(h+=y.nodeValue.length),(A=y.firstChild)!==null;)b=y,y=A;for(;;){if(y===e)break t;if(b===o&&++g===c&&(f=h),b===u&&++_===a&&(m=h),(A=y.nextSibling)!==null)break;y=b,b=y.parentNode}y=A}o=f===-1||m===-1?null:{start:f,end:m}}else o=null}o=o||{start:0,end:0}}else o=null;for(uR={focusedElem:e,selectionRange:o},kv=!1,ct=t;ct!==null;)if(t=ct,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ct=e;else for(;ct!==null;){t=ct;try{var I=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var w=I.memoizedProps,D=I.memoizedState,x=t.stateNode,O=x.getSnapshotBeforeUpdate(t.elementType===t.type?w:ls(t.type,w),D);x.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var P=t.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(je(163))}}catch(M){Mr(t,t.return,M)}if(e=t.sibling,e!==null){e.return=t.return,ct=e;break}ct=t.return}return I=RU,RU=!1,I}function If(e,t,o){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var u=c.destroy;c.destroy=void 0,u!==void 0&&IR(t,o,u)}c=c.next}while(c!==a)}}function ME(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var o=t=t.next;do{if((o.tag&e)===e){var a=o.create;o.destroy=a()}o=o.next}while(o!==t)}}function wR(e){var t=e.ref;if(t!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof t=="function"?t(e):t.current=e}}function K3(e){var t=e.alternate;t!==null&&(e.alternate=null,K3(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ws],delete t[qf],delete t[pR],delete t[UQ],delete t[FQ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Y3(e){return e.tag===5||e.tag===3||e.tag===4}function IU(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Y3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function OR(e,t,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?o.nodeType===8?o.parentNode.insertBefore(e,t):o.insertBefore(e,t):(o.nodeType===8?(t=o.parentNode,t.insertBefore(e,o)):(t=o,t.appendChild(e)),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=Uv));else if(a!==4&&(e=e.child,e!==null))for(OR(e,t,o),e=e.sibling;e!==null;)OR(e,t,o),e=e.sibling}function AR(e,t,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(AR(e,t,o),e=e.sibling;e!==null;)AR(e,t,o),e=e.sibling}var Fi=null,us=!1;function pl(e,t,o){for(o=o.child;o!==null;)q3(e,t,o),o=o.sibling}function q3(e,t,o){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(OE,o)}catch{}switch(o.tag){case 5:lo||ph(o,t);case 6:var a=Fi,c=us;Fi=null,pl(e,t,o),Fi=a,us=c,Fi!==null&&(us?(e=Fi,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):Fi.removeChild(o.stateNode));break;case 18:Fi!==null&&(us?(e=Fi,o=o.stateNode,e.nodeType===8?ob(e.parentNode,o):e.nodeType===1&&ob(e,o),Wf(e)):ob(Fi,o.stateNode));break;case 4:a=Fi,c=us,Fi=o.stateNode.containerInfo,us=!0,pl(e,t,o),Fi=a,us=c;break;case 0:case 11:case 14:case 15:if(!lo&&(a=o.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var u=c,h=u.destroy;u=u.tag,h!==void 0&&(u&2||u&4)&&IR(o,t,h),c=c.next}while(c!==a)}pl(e,t,o);break;case 1:if(!lo&&(ph(o,t),a=o.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=o.memoizedProps,a.state=o.memoizedState,a.componentWillUnmount()}catch(f){Mr(o,t,f)}pl(e,t,o);break;case 21:pl(e,t,o);break;case 22:o.mode&1?(lo=(a=lo)||o.memoizedState!==null,pl(e,t,o),lo=a):pl(e,t,o);break;default:pl(e,t,o)}}function wU(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new eZ),t.forEach(function(a){var c=uZ.bind(null,e,a);o.has(a)||(o.add(a),a.then(c,c))})}}function ss(e,t){var o=t.deletions;if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];try{var u=e,h=t,f=h;e:for(;f!==null;){switch(f.tag){case 5:Fi=f.stateNode,us=!1;break e;case 3:Fi=f.stateNode.containerInfo,us=!0;break e;case 4:Fi=f.stateNode.containerInfo,us=!0;break e}f=f.return}if(Fi===null)throw Error(je(160));q3(u,h,c),Fi=null,us=!1;var m=c.alternate;m!==null&&(m.return=null),c.return=null}catch(g){Mr(c,t,g)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)X3(t,e),t=t.sibling}function X3(e,t){var o=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ss(t,e),js(e),a&4){try{If(3,e,e.return),ME(3,e)}catch(w){Mr(e,e.return,w)}try{If(5,e,e.return)}catch(w){Mr(e,e.return,w)}}break;case 1:ss(t,e),js(e),a&512&&o!==null&&ph(o,o.return);break;case 5:if(ss(t,e),js(e),a&512&&o!==null&&ph(o,o.return),e.flags&32){var c=e.stateNode;try{jf(c,"")}catch(w){Mr(e,e.return,w)}}if(a&4&&(c=e.stateNode,c!=null)){var u=e.memoizedProps,h=o!==null?o.memoizedProps:u,f=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{f==="input"&&u.type==="radio"&&u.name!=null&&vj(c,u),ZT(f,h);var g=ZT(f,u);for(h=0;h<m.length;h+=2){var _=m[h],y=m[h+1];_==="style"?Cj(c,y):_==="dangerouslySetInnerHTML"?Sj(c,y):_==="children"?jf(c,y):zI(c,_,y,g)}switch(f){case"input":YT(c,u);break;case"textarea":Ej(c,u);break;case"select":var b=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!u.multiple;var A=u.value;A!=null?_h(c,!!u.multiple,A,!1):b!==!!u.multiple&&(u.defaultValue!=null?_h(c,!!u.multiple,u.defaultValue,!0):_h(c,!!u.multiple,u.multiple?[]:"",!1))}c[qf]=u}catch(w){Mr(e,e.return,w)}}break;case 6:if(ss(t,e),js(e),a&4){if(e.stateNode===null)throw Error(je(162));c=e.stateNode,u=e.memoizedProps;try{c.nodeValue=u}catch(w){Mr(e,e.return,w)}}break;case 3:if(ss(t,e),js(e),a&4&&o!==null&&o.memoizedState.isDehydrated)try{Wf(t.containerInfo)}catch(w){Mr(e,e.return,w)}break;case 4:ss(t,e),js(e);break;case 13:ss(t,e),js(e),c=e.child,c.flags&8192&&(u=c.memoizedState!==null,c.stateNode.isHidden=u,!u||c.alternate!==null&&c.alternate.memoizedState!==null||(R1=Wr())),a&4&&wU(e);break;case 22:if(_=o!==null&&o.memoizedState!==null,e.mode&1?(lo=(g=lo)||_,ss(t,e),lo=g):ss(t,e),js(e),a&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!_&&e.mode&1)for(ct=e,_=e.child;_!==null;){for(y=ct=_;ct!==null;){switch(b=ct,A=b.child,b.tag){case 0:case 11:case 14:case 15:If(4,b,b.return);break;case 1:ph(b,b.return);var I=b.stateNode;if(typeof I.componentWillUnmount=="function"){a=b,o=b.return;try{t=a,I.props=t.memoizedProps,I.state=t.memoizedState,I.componentWillUnmount()}catch(w){Mr(a,o,w)}}break;case 5:ph(b,b.return);break;case 22:if(b.memoizedState!==null){AU(y);continue}}A!==null?(A.return=b,ct=A):AU(y)}_=_.sibling}e:for(_=null,y=e;;){if(y.tag===5){if(_===null){_=y;try{c=y.stateNode,g?(u=c.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(f=y.stateNode,m=y.memoizedProps.style,h=m!=null&&m.hasOwnProperty("display")?m.display:null,f.style.display=yj("display",h))}catch(w){Mr(e,e.return,w)}}}else if(y.tag===6){if(_===null)try{y.stateNode.nodeValue=g?"":y.memoizedProps}catch(w){Mr(e,e.return,w)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;_===y&&(_=null),y=y.return}_===y&&(_=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:ss(t,e),js(e),a&4&&wU(e);break;case 21:break;default:ss(t,e),js(e)}}function js(e){var t=e.flags;if(t&2){try{e:{for(var o=e.return;o!==null;){if(Y3(o)){var a=o;break e}o=o.return}throw Error(je(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(jf(c,""),a.flags&=-33);var u=IU(e);AR(e,u,c);break;case 3:case 4:var h=a.stateNode.containerInfo,f=IU(e);OR(e,f,h);break;default:throw Error(je(161))}}catch(m){Mr(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nZ(e,t,o){ct=e,J3(e)}function J3(e,t,o){for(var a=(e.mode&1)!==0;ct!==null;){var c=ct,u=c.child;if(c.tag===22&&a){var h=c.memoizedState!==null||xg;if(!h){var f=c.alternate,m=f!==null&&f.memoizedState!==null||lo;f=xg;var g=lo;if(xg=h,(lo=m)&&!g)for(ct=c;ct!==null;)h=ct,m=h.child,h.tag===22&&h.memoizedState!==null?NU(c):m!==null?(m.return=h,ct=m):NU(c);for(;u!==null;)ct=u,J3(u),u=u.sibling;ct=c,xg=f,lo=g}OU(e)}else c.subtreeFlags&8772&&u!==null?(u.return=c,ct=u):OU(e)}}function OU(e){for(;ct!==null;){var t=ct;if(t.flags&8772){var o=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:lo||ME(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!lo)if(o===null)a.componentDidMount();else{var c=t.elementType===t.type?o.memoizedProps:ls(t.type,o.memoizedProps);a.componentDidUpdate(c,o.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&dU(t,u,a);break;case 3:var h=t.updateQueue;if(h!==null){if(o=null,t.child!==null)switch(t.child.tag){case 5:o=t.child.stateNode;break;case 1:o=t.child.stateNode}dU(t,h,o)}break;case 5:var f=t.stateNode;if(o===null&&t.flags&4){o=f;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&o.focus();break;case"img":m.src&&(o.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var g=t.alternate;if(g!==null){var _=g.memoizedState;if(_!==null){var y=_.dehydrated;y!==null&&Wf(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(je(163))}lo||t.flags&512&&wR(t)}catch(b){Mr(t,t.return,b)}}if(t===e){ct=null;break}if(o=t.sibling,o!==null){o.return=t.return,ct=o;break}ct=t.return}}function AU(e){for(;ct!==null;){var t=ct;if(t===e){ct=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ct=o;break}ct=t.return}}function NU(e){for(;ct!==null;){var t=ct;try{switch(t.tag){case 0:case 11:case 15:var o=t.return;try{ME(4,t)}catch(m){Mr(t,o,m)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(m){Mr(t,c,m)}}var u=t.return;try{wR(t)}catch(m){Mr(t,u,m)}break;case 5:var h=t.return;try{wR(t)}catch(m){Mr(t,h,m)}}}catch(m){Mr(t,t.return,m)}if(t===e){ct=null;break}var f=t.sibling;if(f!==null){f.return=t.return,ct=f;break}ct=t.return}}var rZ=Math.ceil,Yv=Dc.ReactCurrentDispatcher,b1=Dc.ReactCurrentOwner,Ba=Dc.ReactCurrentBatchConfig,yn=0,Oi=null,ai=null,$i=0,ha=0,fh=Vl(0),mi=0,tm=null,Uu=0,UE=0,T1=0,wf=null,Vo=null,R1=0,kh=1/0,gc=null,qv=!1,NR=null,Nl=null,Pg=!1,yl=null,Xv=0,Of=0,xR=null,mv=-1,gv=0;function So(){return yn&6?Wr():mv!==-1?mv:mv=Wr()}function xl(e){return e.mode&1?yn&2&&$i!==0?$i&-$i:jQ.transition!==null?(gv===0&&(gv=kj()),gv):(e=$n,e!==0||(e=window.event,e=e===void 0?16:Bj(e.type)),e):1}function _s(e,t,o,a){if(50<Of)throw Of=0,xR=null,Error(je(185));gm(e,o,a),(!(yn&2)||e!==Oi)&&(e===Oi&&(!(yn&2)&&(UE|=o),mi===4&&_l(e,$i)),Wo(e,a),o===1&&yn===0&&!(t.mode&1)&&(kh=Wr()+500,DE&&jl()))}function Wo(e,t){var o=e.callbackNode;jJ(e,t);var a=Dv(e,e===Oi?$i:0);if(a===0)o!==null&&VM(o),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(o!=null&&VM(o),t===1)e.tag===0?VQ(xU.bind(null,e)):a3(xU.bind(null,e)),LQ(function(){!(yn&6)&&jl()}),o=null;else{switch(Lj(a)){case 1:o=JI;break;case 4:o=Pj;break;case 16:o=Pv;break;case 536870912:o=Dj;break;default:o=Pv}o=oB(o,Q3.bind(null,e))}e.callbackPriority=t,e.callbackNode=o}}function Q3(e,t){if(mv=-1,gv=0,yn&6)throw Error(je(327));var o=e.callbackNode;if(Th()&&e.callbackNode!==o)return null;var a=Dv(e,e===Oi?$i:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Jv(e,a);else{t=a;var c=yn;yn|=2;var u=eB();(Oi!==e||$i!==t)&&(gc=null,kh=Wr()+500,Ou(e,t));do try{aZ();break}catch(f){Z3(e,f)}while(1);u1(),Yv.current=u,yn=c,ai!==null?t=0:(Oi=null,$i=0,t=mi)}if(t!==0){if(t===2&&(c=iR(e),c!==0&&(a=c,t=PR(e,c))),t===1)throw o=tm,Ou(e,0),_l(e,a),Wo(e,Wr()),o;if(t===6)_l(e,a);else{if(c=e.current.alternate,!(a&30)&&!iZ(c)&&(t=Jv(e,a),t===2&&(u=iR(e),u!==0&&(a=u,t=PR(e,u))),t===1))throw o=tm,Ou(e,0),_l(e,a),Wo(e,Wr()),o;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(je(345));case 2:Eu(e,Vo,gc);break;case 3:if(_l(e,a),(a&130023424)===a&&(t=R1+500-Wr(),10<t)){if(Dv(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){So(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=hR(Eu.bind(null,e,Vo,gc),t);break}Eu(e,Vo,gc);break;case 4:if(_l(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var h=31-Es(a);u=1<<h,h=t[h],h>c&&(c=h),a&=~u}if(a=c,a=Wr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*rZ(a/1960))-a,10<a){e.timeoutHandle=hR(Eu.bind(null,e,Vo,gc),a);break}Eu(e,Vo,gc);break;case 5:Eu(e,Vo,gc);break;default:throw Error(je(329))}}}return Wo(e,Wr()),e.callbackNode===o?Q3.bind(null,e):null}function PR(e,t){var o=wf;return e.current.memoizedState.isDehydrated&&(Ou(e,t).flags|=256),e=Jv(e,t),e!==2&&(t=Vo,Vo=o,t!==null&&DR(t)),e}function DR(e){Vo===null?Vo=e:Vo.push.apply(Vo,e)}function iZ(e){for(var t=e;;){if(t.flags&16384){var o=t.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var a=0;a<o.length;a++){var c=o[a],u=c.getSnapshot;c=c.value;try{if(!ys(u(),c))return!1}catch{return!1}}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _l(e,t){for(t&=~T1,t&=~UE,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var o=31-Es(t),a=1<<o;e[o]=-1,t&=~a}}function xU(e){if(yn&6)throw Error(je(327));Th();var t=Dv(e,0);if(!(t&1))return Wo(e,Wr()),null;var o=Jv(e,t);if(e.tag!==0&&o===2){var a=iR(e);a!==0&&(t=a,o=PR(e,a))}if(o===1)throw o=tm,Ou(e,0),_l(e,t),Wo(e,Wr()),o;if(o===6)throw Error(je(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Eu(e,Vo,gc),Wo(e,Wr()),null}function I1(e,t){var o=yn;yn|=1;try{return e(t)}finally{yn=o,yn===0&&(kh=Wr()+500,DE&&jl())}}function Fu(e){yl!==null&&yl.tag===0&&!(yn&6)&&Th();var t=yn;yn|=1;var o=Ba.transition,a=$n;try{if(Ba.transition=null,$n=1,e)return e()}finally{$n=a,Ba.transition=o,yn=t,!(yn&6)&&jl()}}function w1(){ha=fh.current,vr(fh)}function Ou(e,t){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,kQ(o)),ai!==null)for(o=ai.return;o!==null;){var a=o;switch(s1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Fv();break;case 3:Ph(),vr($o),vr(uo),g1();break;case 5:m1(a);break;case 4:Ph();break;case 13:vr(wr);break;case 19:vr(wr);break;case 10:d1(a.type._context);break;case 22:case 23:w1()}o=o.return}if(Oi=e,ai=e=Pl(e.current,null),$i=ha=t,mi=0,tm=null,T1=UE=Uu=0,Vo=wf=null,bu!==null){for(t=0;t<bu.length;t++)if(o=bu[t],a=o.interleaved,a!==null){o.interleaved=null;var c=a.next,u=o.pending;if(u!==null){var h=u.next;u.next=c,a.next=h}o.pending=a}bu=null}return e}function Z3(e,t){do{var o=ai;try{if(u1(),hv.current=Kv,zv){for(var a=Ar.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}zv=!1}if(Mu=0,Ii=fi=Ar=null,Rf=!1,Qf=0,b1.current=null,o===null||o.return===null){mi=1,tm=t,ai=null;break}e:{var u=e,h=o.return,f=o,m=t;if(t=$i,f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var g=m,_=f,y=_.tag;if(!(_.mode&1)&&(y===0||y===11||y===15)){var b=_.alternate;b?(_.updateQueue=b.updateQueue,_.memoizedState=b.memoizedState,_.lanes=b.lanes):(_.updateQueue=null,_.memoizedState=null)}var A=EU(h);if(A!==null){A.flags&=-257,_U(A,h,f,u,t),A.mode&1&&vU(u,g,t),t=A,m=g;var I=t.updateQueue;if(I===null){var w=new Set;w.add(m),t.updateQueue=w}else I.add(m);break e}else{if(!(t&1)){vU(u,g,t),O1();break e}m=Error(je(426))}}else if(Cr&&f.mode&1){var D=EU(h);if(D!==null){!(D.flags&65536)&&(D.flags|=256),_U(D,h,f,u,t),c1(Dh(m,f));break e}}u=m=Dh(m,f),mi!==4&&(mi=2),wf===null?wf=[u]:wf.push(u),u=h;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var x=M3(u,m,t);uU(u,x);break e;case 1:f=m;var O=u.type,P=u.stateNode;if(!(u.flags&128)&&(typeof O.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Nl===null||!Nl.has(P)))){u.flags|=65536,t&=-t,u.lanes|=t;var M=U3(u,f,t);uU(u,M);break e}}u=u.return}while(u!==null)}nB(o)}catch(V){t=V,ai===o&&o!==null&&(ai=o=o.return);continue}break}while(1)}function eB(){var e=Yv.current;return Yv.current=Kv,e===null?Kv:e}function O1(){(mi===0||mi===3||mi===2)&&(mi=4),Oi===null||!(Uu&268435455)&&!(UE&268435455)||_l(Oi,$i)}function Jv(e,t){var o=yn;yn|=2;var a=eB();(Oi!==e||$i!==t)&&(gc=null,Ou(e,t));do try{oZ();break}catch(c){Z3(e,c)}while(1);if(u1(),yn=o,Yv.current=a,ai!==null)throw Error(je(261));return Oi=null,$i=0,mi}function oZ(){for(;ai!==null;)tB(ai)}function aZ(){for(;ai!==null&&!xJ();)tB(ai)}function tB(e){var t=iB(e.alternate,e,ha);e.memoizedProps=e.pendingProps,t===null?nB(e):ai=t,b1.current=null}function nB(e){var t=e;do{var o=t.alternate;if(e=t.return,t.flags&32768){if(o=ZQ(o,t),o!==null){o.flags&=32767,ai=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{mi=6,ai=null;return}}else if(o=QQ(o,t,ha),o!==null){ai=o;return}if(t=t.sibling,t!==null){ai=t;return}ai=t=e}while(t!==null);mi===0&&(mi=5)}function Eu(e,t,o){var a=$n,c=Ba.transition;try{Ba.transition=null,$n=1,sZ(e,t,o,a)}finally{Ba.transition=c,$n=a}return null}function sZ(e,t,o,a){do Th();while(yl!==null);if(yn&6)throw Error(je(327));o=e.finishedWork;var c=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(je(177));e.callbackNode=null,e.callbackPriority=0;var u=o.lanes|o.childLanes;if(BJ(e,u),e===Oi&&(ai=Oi=null,$i=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||Pg||(Pg=!0,oB(Pv,function(){return Th(),null})),u=(o.flags&15990)!==0,o.subtreeFlags&15990||u){u=Ba.transition,Ba.transition=null;var h=$n;$n=1;var f=yn;yn|=4,b1.current=null,tZ(e,o),X3(o,e),wQ(uR),kv=!!lR,uR=lR=null,e.current=o,nZ(o),PJ(),yn=f,$n=h,Ba.transition=u}else e.current=o;if(Pg&&(Pg=!1,yl=e,Xv=c),u=e.pendingLanes,u===0&&(Nl=null),LJ(o.stateNode),Wo(e,Wr()),t!==null)for(a=e.onRecoverableError,o=0;o<t.length;o++)c=t[o],a(c.value,{componentStack:c.stack,digest:c.digest});if(qv)throw qv=!1,e=NR,NR=null,e;return Xv&1&&e.tag!==0&&Th(),u=e.pendingLanes,u&1?e===xR?Of++:(Of=0,xR=e):Of=0,jl(),null}function Th(){if(yl!==null){var e=Lj(Xv),t=Ba.transition,o=$n;try{if(Ba.transition=null,$n=16>e?16:e,yl===null)var a=!1;else{if(e=yl,yl=null,Xv=0,yn&6)throw Error(je(331));var c=yn;for(yn|=4,ct=e.current;ct!==null;){var u=ct,h=u.child;if(ct.flags&16){var f=u.deletions;if(f!==null){for(var m=0;m<f.length;m++){var g=f[m];for(ct=g;ct!==null;){var _=ct;switch(_.tag){case 0:case 11:case 15:If(8,_,u)}var y=_.child;if(y!==null)y.return=_,ct=y;else for(;ct!==null;){_=ct;var b=_.sibling,A=_.return;if(K3(_),_===g){ct=null;break}if(b!==null){b.return=A,ct=b;break}ct=A}}}var I=u.alternate;if(I!==null){var w=I.child;if(w!==null){I.child=null;do{var D=w.sibling;w.sibling=null,w=D}while(w!==null)}}ct=u}}if(u.subtreeFlags&2064&&h!==null)h.return=u,ct=h;else e:for(;ct!==null;){if(u=ct,u.flags&2048)switch(u.tag){case 0:case 11:case 15:If(9,u,u.return)}var x=u.sibling;if(x!==null){x.return=u.return,ct=x;break e}ct=u.return}}var O=e.current;for(ct=O;ct!==null;){h=ct;var P=h.child;if(h.subtreeFlags&2064&&P!==null)P.return=h,ct=P;else e:for(h=O;ct!==null;){if(f=ct,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:ME(9,f)}}catch(V){Mr(f,f.return,V)}if(f===h){ct=null;break e}var M=f.sibling;if(M!==null){M.return=f.return,ct=M;break e}ct=f.return}}if(yn=c,jl(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(OE,e)}catch{}a=!0}return a}finally{$n=o,Ba.transition=t}}return!1}function PU(e,t,o){t=Dh(o,t),t=M3(e,t,1),e=Al(e,t,1),t=So(),e!==null&&(gm(e,1,t),Wo(e,t))}function Mr(e,t,o){if(e.tag===3)PU(e,e,o);else for(;t!==null;){if(t.tag===3){PU(t,e,o);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Nl===null||!Nl.has(a))){e=Dh(o,e),e=U3(t,e,1),t=Al(t,e,1),e=So(),t!==null&&(gm(t,1,e),Wo(t,e));break}}t=t.return}}function cZ(e,t,o){var a=e.pingCache;a!==null&&a.delete(t),t=So(),e.pingedLanes|=e.suspendedLanes&o,Oi===e&&($i&o)===o&&(mi===4||mi===3&&($i&130023424)===$i&&500>Wr()-R1?Ou(e,0):T1|=o),Wo(e,t)}function rB(e,t){t===0&&(e.mode&1?(t=Cg,Cg<<=1,!(Cg&130023424)&&(Cg=4194304)):t=1);var o=So();e=Ic(e,t),e!==null&&(gm(e,t,o),Wo(e,o))}function lZ(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),rB(e,o)}function uZ(e,t){var o=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(o=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(je(314))}a!==null&&a.delete(t),rB(e,o)}var iB;iB=function(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps||$o.current)jo=!0;else{if(!(e.lanes&o)&&!(t.flags&128))return jo=!1,JQ(e,t,o);jo=!!(e.flags&131072)}else jo=!1,Cr&&t.flags&1048576&&s3(t,Bv,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;fv(e,t),e=t.pendingProps;var c=Ah(t,uo.current);bh(t,o),c=E1(null,t,a,e,c,o);var u=_1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ho(a)?(u=!0,Vv(t)):u=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,p1(t),c.updater=kE,t.stateNode=c,c._reactInternals=t,_R(t,a,e,o),t=CR(null,t,a,!0,u,o)):(t.tag=0,Cr&&u&&a1(t),_o(null,t,c,o),t=t.child),t;case 16:a=t.elementType;e:{switch(fv(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=hZ(a),e=ls(a,e),c){case 0:t=yR(null,t,a,e,o);break e;case 1:t=CU(null,t,a,e,o);break e;case 11:t=SU(null,t,a,e,o);break e;case 14:t=yU(null,t,a,ls(a.type,e),o);break e}throw Error(je(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:ls(a,c),yR(e,t,a,c,o);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:ls(a,c),CU(e,t,a,c,o);case 3:e:{if(B3(t),e===null)throw Error(je(387));a=t.pendingProps,u=t.memoizedState,c=u.element,d3(e,t),Wv(t,a,null,o);var h=t.memoizedState;if(a=h.element,u.isDehydrated)if(u={element:a,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){c=Dh(Error(je(423)),t),t=bU(e,t,a,o,c);break e}else if(a!==c){c=Dh(Error(je(424)),t),t=bU(e,t,a,o,c);break e}else for(pa=Ol(t.stateNode.containerInfo.firstChild),ma=t,Cr=!0,fs=null,o=m3(t,null,a,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Nh(),a===c){t=wc(e,t,o);break e}_o(e,t,a,o)}t=t.child}return t;case 5:return g3(t),e===null&&gR(t),a=t.type,c=t.pendingProps,u=e!==null?e.memoizedProps:null,h=c.children,dR(a,c)?h=null:u!==null&&dR(a,u)&&(t.flags|=32),j3(e,t),_o(e,t,h,o),t.child;case 6:return e===null&&gR(t),null;case 13:return $3(e,t,o);case 4:return f1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=xh(t,null,a,o):_o(e,t,a,o),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:ls(a,c),SU(e,t,a,c,o);case 7:return _o(e,t,t.pendingProps,o),t.child;case 8:return _o(e,t,t.pendingProps.children,o),t.child;case 12:return _o(e,t,t.pendingProps.children,o),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,u=t.memoizedProps,h=c.value,ur($v,a._currentValue),a._currentValue=h,u!==null)if(ys(u.value,h)){if(u.children===c.children&&!$o.current){t=wc(e,t,o);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var f=u.dependencies;if(f!==null){h=u.child;for(var m=f.firstContext;m!==null;){if(m.context===a){if(u.tag===1){m=yc(-1,o&-o),m.tag=2;var g=u.updateQueue;if(g!==null){g=g.shared;var _=g.pending;_===null?m.next=m:(m.next=_.next,_.next=m),g.pending=m}}u.lanes|=o,m=u.alternate,m!==null&&(m.lanes|=o),vR(u.return,o,t),f.lanes|=o;break}m=m.next}}else if(u.tag===10)h=u.type===t.type?null:u.child;else if(u.tag===18){if(h=u.return,h===null)throw Error(je(341));h.lanes|=o,f=h.alternate,f!==null&&(f.lanes|=o),vR(h,o,t),h=u.sibling}else h=u.child;if(h!==null)h.return=u;else for(h=u;h!==null;){if(h===t){h=null;break}if(u=h.sibling,u!==null){u.return=h.return,h=u;break}h=h.return}u=h}_o(e,t,c.children,o),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,bh(t,o),c=Ha(c),a=a(c),t.flags|=1,_o(e,t,a,o),t.child;case 14:return a=t.type,c=ls(a,t.pendingProps),c=ls(a.type,c),yU(e,t,a,c,o);case 15:return F3(e,t,t.type,t.pendingProps,o);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:ls(a,c),fv(e,t),t.tag=1,Ho(a)?(e=!0,Vv(t)):e=!1,bh(t,o),p3(t,a,c),_R(t,a,c,o),CR(null,t,a,!0,e,o);case 19:return H3(e,t,o);case 22:return V3(e,t,o)}throw Error(je(156,t.tag))};function oB(e,t){return xj(e,t)}function dZ(e,t,o,a){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ja(e,t,o,a){return new dZ(e,t,o,a)}function A1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hZ(e){if(typeof e=="function")return A1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===YI)return 11;if(e===qI)return 14}return 2}function Pl(e,t){var o=e.alternate;return o===null?(o=ja(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function vv(e,t,o,a,c,u){var h=2;if(a=e,typeof e=="function")A1(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case ih:return Au(o.children,c,u,t);case KI:h=8,c|=8;break;case HT:return e=ja(12,o,t,c|2),e.elementType=HT,e.lanes=u,e;case WT:return e=ja(13,o,t,c),e.elementType=WT,e.lanes=u,e;case GT:return e=ja(19,o,t,c),e.elementType=GT,e.lanes=u,e;case fj:return FE(o,c,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case hj:h=10;break e;case pj:h=9;break e;case YI:h=11;break e;case qI:h=14;break e;case gl:h=16,a=null;break e}throw Error(je(130,e==null?e:typeof e,""))}return t=ja(h,o,t,c),t.elementType=e,t.type=a,t.lanes=u,t}function Au(e,t,o,a){return e=ja(7,e,a,t),e.lanes=o,e}function FE(e,t,o,a){return e=ja(22,e,a,t),e.elementType=fj,e.lanes=o,e.stateNode={isHidden:!1},e}function pb(e,t,o){return e=ja(6,e,null,t),e.lanes=o,e}function fb(e,t,o){return t=ja(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function pZ(e,t,o,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=YC(0),this.expirationTimes=YC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=YC(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function N1(e,t,o,a,c,u,h,f,m){return e=new pZ(e,t,o,f,m),t===1?(t=1,u===!0&&(t|=8)):t=0,u=ja(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:a,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},p1(u),e}function fZ(e,t,o){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rh,key:a==null?null:""+a,children:e,containerInfo:t,implementation:o}}function aB(e){if(!e)return kl;e=e._reactInternals;e:{if(Bu(e)!==e||e.tag!==1)throw Error(je(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ho(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(je(171))}if(e.tag===1){var o=e.type;if(Ho(o))return o3(e,o,t)}return t}function sB(e,t,o,a,c,u,h,f,m){return e=N1(o,a,!0,e,c,u,h,f,m),e.context=aB(null),o=e.current,a=So(),c=xl(o),u=yc(a,c),u.callback=t??null,Al(o,u,c),e.current.lanes=c,gm(e,c,a),Wo(e,a),e}function VE(e,t,o,a){var c=t.current,u=So(),h=xl(c);return o=aB(o),t.context===null?t.context=o:t.pendingContext=o,t=yc(u,h),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Al(c,t,h),e!==null&&(_s(e,c,h,u),dv(e,c,h)),h}function Qv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function DU(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function x1(e,t){DU(e,t),(e=e.alternate)&&DU(e,t)}function mZ(){return null}var cB=typeof reportError=="function"?reportError:function(e){console.error(e)};function P1(e){this._internalRoot=e}jE.prototype.render=P1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(je(409));VE(e,t,null,null)};jE.prototype.unmount=P1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fu(function(){VE(null,e,null,null)}),t[Rc]=null}};function jE(e){this._internalRoot=e}jE.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fj();e={blockedOn:null,target:e,priority:t};for(var o=0;o<El.length&&t!==0&&t<El[o].priority;o++);El.splice(o,0,e),o===0&&jj(e)}};function D1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function BE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function kU(){}function gZ(e,t,o,a,c){if(c){if(typeof a=="function"){var u=a;a=function(){var g=Qv(h);u.call(g)}}var h=sB(t,a,e,0,null,!1,!1,"",kU);return e._reactRootContainer=h,e[Rc]=h.current,Kf(e.nodeType===8?e.parentNode:e),Fu(),h}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var f=a;a=function(){var g=Qv(m);f.call(g)}}var m=N1(e,0,!1,null,null,!1,!1,"",kU);return e._reactRootContainer=m,e[Rc]=m.current,Kf(e.nodeType===8?e.parentNode:e),Fu(function(){VE(t,m,o,a)}),m}function $E(e,t,o,a,c){var u=o._reactRootContainer;if(u){var h=u;if(typeof c=="function"){var f=c;c=function(){var m=Qv(h);f.call(m)}}VE(t,h,e,c)}else h=gZ(o,t,e,c,a);return Qv(h)}Mj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var o=gf(t.pendingLanes);o!==0&&(QI(t,o|1),Wo(t,Wr()),!(yn&6)&&(kh=Wr()+500,jl()))}break;case 13:Fu(function(){var a=Ic(e,1);if(a!==null){var c=So();_s(a,e,1,c)}}),x1(e,1)}};ZI=function(e){if(e.tag===13){var t=Ic(e,134217728);if(t!==null){var o=So();_s(t,e,134217728,o)}x1(e,134217728)}};Uj=function(e){if(e.tag===13){var t=xl(e),o=Ic(e,t);if(o!==null){var a=So();_s(o,e,t,a)}x1(e,t)}};Fj=function(){return $n};Vj=function(e,t){var o=$n;try{return $n=e,t()}finally{$n=o}};tR=function(e,t,o){switch(t){case"input":if(YT(e,o),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<o.length;t++){var a=o[t];if(a!==e&&a.form===e.form){var c=PE(a);if(!c)throw Error(je(90));gj(a),YT(a,c)}}}break;case"textarea":Ej(e,o);break;case"select":t=o.value,t!=null&&_h(e,!!o.multiple,t,!1)}};Rj=I1;Ij=Fu;var vZ={usingClientEntryPoint:!1,Events:[Em,ch,PE,bj,Tj,I1]},nf={findFiberByHostInstance:Cu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},EZ={bundleType:nf.bundleType,version:nf.version,rendererPackageName:nf.rendererPackageName,rendererConfig:nf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Aj(e),e===null?null:e.stateNode},findFiberByHostInstance:nf.findFiberByHostInstance||mZ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dg.isDisabled&&Dg.supportsFiber)try{OE=Dg.inject(EZ),Gs=Dg}catch{}}Sa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vZ;Sa.createPortal=function(e,t){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!D1(t))throw Error(je(200));return fZ(e,t,null,o)};Sa.createRoot=function(e,t){if(!D1(e))throw Error(je(299));var o=!1,a="",c=cB;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=N1(e,1,!1,null,null,o,!1,a,c),e[Rc]=t.current,Kf(e.nodeType===8?e.parentNode:e),new P1(t)};Sa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(je(188)):(e=Object.keys(e).join(","),Error(je(268,e)));return e=Aj(t),e=e===null?null:e.stateNode,e};Sa.flushSync=function(e){return Fu(e)};Sa.hydrate=function(e,t,o){if(!BE(t))throw Error(je(200));return $E(null,e,t,!0,o)};Sa.hydrateRoot=function(e,t,o){if(!D1(e))throw Error(je(405));var a=o!=null&&o.hydratedSources||null,c=!1,u="",h=cB;if(o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onRecoverableError!==void 0&&(h=o.onRecoverableError)),t=sB(t,null,e,1,o??null,c,!1,u,h),e[Rc]=t.current,Kf(e),a)for(e=0;e<a.length;e++)o=a[e],c=o._getVersion,c=c(o._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[o,c]:t.mutableSourceEagerHydrationData.push(o,c);return new jE(t)};Sa.render=function(e,t,o){if(!BE(t))throw Error(je(200));return $E(null,e,t,!1,o)};Sa.unmountComponentAtNode=function(e){if(!BE(e))throw Error(je(40));return e._reactRootContainer?(Fu(function(){$E(null,null,e,!1,function(){e._reactRootContainer=null,e[Rc]=null})}),!0):!1};Sa.unstable_batchedUpdates=I1;Sa.unstable_renderSubtreeIntoContainer=function(e,t,o,a){if(!BE(o))throw Error(je(200));if(e==null||e._reactInternals===void 0)throw Error(je(38));return $E(e,t,o,!1,a)};Sa.version="18.2.0-next-9e3b772b8-20220608";function lB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lB)}catch(e){console.error(e)}}lB(),sj.exports=Sa;var Bl=sj.exports;const uB=Ul(Bl),_Z=YV({__proto__:null,default:uB},[Bl]);var LU=Bl;BT.createRoot=LU.createRoot,BT.hydrateRoot=LU.hydrateRoot;/**
 * @remix-run/router v1.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nm(){return nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},nm.apply(this,arguments)}var Cl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Cl||(Cl={}));const MU="popstate";function SZ(e){e===void 0&&(e={});function t(c,u){let{pathname:h="/",search:f="",hash:m=""}=$u(c.location.hash.substr(1));return kR("",{pathname:h,search:f,hash:m},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function o(c,u){let h=c.document.querySelector("base"),f="";if(h&&h.getAttribute("href")){let m=c.location.href,g=m.indexOf("#");f=g===-1?m:m.slice(0,g)}return f+"#"+(typeof u=="string"?u:dB(u))}function a(c,u){HE(c.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(u)+")")}return CZ(t,o,a,e)}function gi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function HE(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function yZ(){return Math.random().toString(36).substr(2,8)}function UU(e,t){return{usr:e.state,key:e.key,idx:t}}function kR(e,t,o,a){return o===void 0&&(o=null),nm({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?$u(t):t,{state:o,key:t&&t.key||a||yZ()})}function dB(e){let{pathname:t="/",search:o="",hash:a=""}=e;return o&&o!=="?"&&(t+=o.charAt(0)==="?"?o:"?"+o),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function $u(e){let t={};if(e){let o=e.indexOf("#");o>=0&&(t.hash=e.substr(o),e=e.substr(0,o));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function CZ(e,t,o,a){a===void 0&&(a={});let{window:c=document.defaultView,v5Compat:u=!1}=a,h=c.history,f=Cl.Pop,m=null,g=_();g==null&&(g=0,h.replaceState(nm({},h.state,{idx:g}),""));function _(){return(h.state||{idx:null}).idx}function y(){f=Cl.Pop;let D=_(),x=D==null?null:D-g;g=D,m&&m({action:f,location:w.location,delta:x})}function b(D,x){f=Cl.Push;let O=kR(w.location,D,x);o&&o(O,D),g=_()+1;let P=UU(O,g),M=w.createHref(O);try{h.pushState(P,"",M)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;c.location.assign(M)}u&&m&&m({action:f,location:w.location,delta:1})}function A(D,x){f=Cl.Replace;let O=kR(w.location,D,x);o&&o(O,D),g=_();let P=UU(O,g),M=w.createHref(O);h.replaceState(P,"",M),u&&m&&m({action:f,location:w.location,delta:0})}function I(D){let x=c.location.origin!=="null"?c.location.origin:c.location.href,O=typeof D=="string"?D:dB(D);return gi(x,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,x)}let w={get action(){return f},get location(){return e(c,h)},listen(D){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(MU,y),m=D,()=>{c.removeEventListener(MU,y),m=null}},createHref(D){return t(c,D)},createURL:I,encodeLocation(D){let x=I(D);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:b,replace:A,go(D){return h.go(D)}};return w}var FU;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(FU||(FU={}));function bZ(e,t,o){o===void 0&&(o="/");let a=typeof t=="string"?$u(t):t,c=fB(a.pathname||"/",o);if(c==null)return null;let u=hB(e);TZ(u);let h=null;for(let f=0;h==null&&f<u.length;++f)h=DZ(u[f],MZ(c));return h}function hB(e,t,o,a){t===void 0&&(t=[]),o===void 0&&(o=[]),a===void 0&&(a="");let c=(u,h,f)=>{let m={relativePath:f===void 0?u.path||"":f,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};m.relativePath.startsWith("/")&&(gi(m.relativePath.startsWith(a),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(a.length));let g=Nu([a,m.relativePath]),_=o.concat(m);u.children&&u.children.length>0&&(gi(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),hB(u.children,t,_,g)),!(u.path==null&&!u.index)&&t.push({path:g,score:xZ(g,u.index),routesMeta:_})};return e.forEach((u,h)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))c(u,h);else for(let m of pB(u.path))c(u,h,m)}),t}function pB(e){let t=e.split("/");if(t.length===0)return[];let[o,...a]=t,c=o.endsWith("?"),u=o.replace(/\?$/,"");if(a.length===0)return c?[u,""]:[u];let h=pB(a.join("/")),f=[];return f.push(...h.map(m=>m===""?u:[u,m].join("/"))),c&&f.push(...h),f.map(m=>e.startsWith("/")&&m===""?"/":m)}function TZ(e){e.sort((t,o)=>t.score!==o.score?o.score-t.score:PZ(t.routesMeta.map(a=>a.childrenIndex),o.routesMeta.map(a=>a.childrenIndex)))}const RZ=/^:\w+$/,IZ=3,wZ=2,OZ=1,AZ=10,NZ=-2,VU=e=>e==="*";function xZ(e,t){let o=e.split("/"),a=o.length;return o.some(VU)&&(a+=NZ),t&&(a+=wZ),o.filter(c=>!VU(c)).reduce((c,u)=>c+(RZ.test(u)?IZ:u===""?OZ:AZ),a)}function PZ(e,t){return e.length===t.length&&e.slice(0,-1).every((a,c)=>a===t[c])?e[e.length-1]-t[t.length-1]:0}function DZ(e,t){let{routesMeta:o}=e,a={},c="/",u=[];for(let h=0;h<o.length;++h){let f=o[h],m=h===o.length-1,g=c==="/"?t:t.slice(c.length)||"/",_=kZ({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},g);if(!_)return null;Object.assign(a,_.params);let y=f.route;u.push({params:a,pathname:Nu([c,_.pathname]),pathnameBase:$Z(Nu([c,_.pathnameBase])),route:y}),_.pathnameBase!=="/"&&(c=Nu([c,_.pathnameBase]))}return u}function kZ(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[o,a]=LZ(e.path,e.caseSensitive,e.end),c=t.match(o);if(!c)return null;let u=c[0],h=u.replace(/(.)\/+$/,"$1"),f=c.slice(1);return{params:a.reduce((g,_,y)=>{if(_==="*"){let b=f[y]||"";h=u.slice(0,u.length-b.length).replace(/(.)\/+$/,"$1")}return g[_]=UZ(f[y]||"",_),g},{}),pathname:u,pathnameBase:h,pattern:e}}function LZ(e,t,o){t===void 0&&(t=!1),o===void 0&&(o=!0),HE(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(h,f)=>(a.push(f),"/([^\\/]+)"));return e.endsWith("*")?(a.push("*"),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),a]}function MZ(e){try{return decodeURI(e)}catch(t){return HE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function UZ(e,t){try{return decodeURIComponent(e)}catch(o){return HE(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+o+").")),e}}function fB(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let o=t.endsWith("/")?t.length-1:t.length,a=e.charAt(o);return a&&a!=="/"?null:e.slice(o)||"/"}function FZ(e,t){t===void 0&&(t="/");let{pathname:o,search:a="",hash:c=""}=typeof e=="string"?$u(e):e;return{pathname:o?o.startsWith("/")?o:VZ(o,t):t,search:HZ(a),hash:WZ(c)}}function VZ(e,t){let o=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?o.length>1&&o.pop():c!=="."&&o.push(c)}),o.length>1?o.join("/"):"/"}function mb(e,t,o,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jZ(e){return e.filter((t,o)=>o===0||t.route.path&&t.route.path.length>0)}function BZ(e,t,o,a){a===void 0&&(a=!1);let c;typeof e=="string"?c=$u(e):(c=nm({},e),gi(!c.pathname||!c.pathname.includes("?"),mb("?","pathname","search",c)),gi(!c.pathname||!c.pathname.includes("#"),mb("#","pathname","hash",c)),gi(!c.search||!c.search.includes("#"),mb("#","search","hash",c)));let u=e===""||c.pathname==="",h=u?"/":c.pathname,f;if(a||h==null)f=o;else{let y=t.length-1;if(h.startsWith("..")){let b=h.split("/");for(;b[0]==="..";)b.shift(),y-=1;c.pathname=b.join("/")}f=y>=0?t[y]:"/"}let m=FZ(c,f),g=h&&h!=="/"&&h.endsWith("/"),_=(u||h===".")&&o.endsWith("/");return!m.pathname.endsWith("/")&&(g||_)&&(m.pathname+="/"),m}const Nu=e=>e.join("/").replace(/\/\/+/g,"/"),$Z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),HZ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,WZ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function GZ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const mB=["post","put","patch","delete"];new Set(mB);const zZ=["get",...mB];new Set(zZ);/**
 * React Router v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zv(){return Zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},Zv.apply(this,arguments)}const k1=S.createContext(null),KZ=S.createContext(null),WE=S.createContext(null),GE=S.createContext(null),Wh=S.createContext({outlet:null,matches:[],isDataRoute:!1}),gB=S.createContext(null);function zE(){return S.useContext(GE)!=null}function vB(){return zE()||gi(!1),S.useContext(GE).location}function EB(e){S.useContext(WE).static||S.useLayoutEffect(e)}function YZ(){let{isDataRoute:e}=S.useContext(Wh);return e?see():qZ()}function qZ(){zE()||gi(!1);let e=S.useContext(k1),{basename:t,navigator:o}=S.useContext(WE),{matches:a}=S.useContext(Wh),{pathname:c}=vB(),u=JSON.stringify(jZ(a).map(m=>m.pathnameBase)),h=S.useRef(!1);return EB(()=>{h.current=!0}),S.useCallback(function(m,g){if(g===void 0&&(g={}),!h.current)return;if(typeof m=="number"){o.go(m);return}let _=BZ(m,JSON.parse(u),c,g.relative==="path");e==null&&t!=="/"&&(_.pathname=_.pathname==="/"?t:Nu([t,_.pathname])),(g.replace?o.replace:o.push)(_,g.state,g)},[t,o,u,c,e])}function XZ(e,t){return JZ(e,t)}function JZ(e,t,o){zE()||gi(!1);let{navigator:a}=S.useContext(WE),{matches:c}=S.useContext(Wh),u=c[c.length-1],h=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=vB(),g;if(t){var _;let w=typeof t=="string"?$u(t):t;f==="/"||(_=w.pathname)!=null&&_.startsWith(f)||gi(!1),g=w}else g=m;let y=g.pathname||"/",b=f==="/"?y:y.slice(f.length)||"/",A=bZ(e,{pathname:b}),I=nee(A&&A.map(w=>Object.assign({},w,{params:Object.assign({},h,w.params),pathname:Nu([f,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?f:Nu([f,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),c,o);return t&&I?S.createElement(GE.Provider,{value:{location:Zv({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Cl.Pop}},I):I}function QZ(){let e=aee(),t=GZ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),o=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},u=null;return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),o?S.createElement("pre",{style:c},o):null,u)}const ZZ=S.createElement(QZ,null);class eee extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,o){return o.location!==t.location||o.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||o.error,location:o.location,revalidation:t.revalidation||o.revalidation}}componentDidCatch(t,o){console.error("React Router caught the following error during render",t,o)}render(){return this.state.error?S.createElement(Wh.Provider,{value:this.props.routeContext},S.createElement(gB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tee(e){let{routeContext:t,match:o,children:a}=e,c=S.useContext(k1);return c&&c.static&&c.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=o.route.id),S.createElement(Wh.Provider,{value:t},a)}function nee(e,t,o){var a;if(t===void 0&&(t=[]),o===void 0&&(o=null),e==null){var c;if((c=o)!=null&&c.errors)e=o.matches;else return null}let u=e,h=(a=o)==null?void 0:a.errors;if(h!=null){let f=u.findIndex(m=>m.route.id&&(h==null?void 0:h[m.route.id]));f>=0||gi(!1),u=u.slice(0,Math.min(u.length,f+1))}return u.reduceRight((f,m,g)=>{let _=m.route.id?h==null?void 0:h[m.route.id]:null,y=null;o&&(y=m.route.errorElement||ZZ);let b=t.concat(u.slice(0,g+1)),A=()=>{let I;return _?I=y:m.route.Component?I=S.createElement(m.route.Component,null):m.route.element?I=m.route.element:I=f,S.createElement(tee,{match:m,routeContext:{outlet:f,matches:b,isDataRoute:o!=null},children:I})};return o&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?S.createElement(eee,{location:o.location,revalidation:o.revalidation,component:y,error:_,children:A(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):A()},null)}var LR;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(LR||(LR={}));var rm;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(rm||(rm={}));function ree(e){let t=S.useContext(k1);return t||gi(!1),t}function iee(e){let t=S.useContext(KZ);return t||gi(!1),t}function oee(e){let t=S.useContext(Wh);return t||gi(!1),t}function _B(e){let t=oee(),o=t.matches[t.matches.length-1];return o.route.id||gi(!1),o.route.id}function aee(){var e;let t=S.useContext(gB),o=iee(rm.UseRouteError),a=_B(rm.UseRouteError);return t||((e=o.errors)==null?void 0:e[a])}function see(){let{router:e}=ree(LR.UseNavigateStable),t=_B(rm.UseNavigateStable),o=S.useRef(!1);return EB(()=>{o.current=!0}),S.useCallback(function(c,u){u===void 0&&(u={}),o.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,Zv({fromRouteId:t},u)))},[e,t])}function _u(e){gi(!1)}function cee(e){let{basename:t="/",children:o=null,location:a,navigationType:c=Cl.Pop,navigator:u,static:h=!1}=e;zE()&&gi(!1);let f=t.replace(/^\/*/,"/"),m=S.useMemo(()=>({basename:f,navigator:u,static:h}),[f,u,h]);typeof a=="string"&&(a=$u(a));let{pathname:g="/",search:_="",hash:y="",state:b=null,key:A="default"}=a,I=S.useMemo(()=>{let w=fB(g,f);return w==null?null:{location:{pathname:w,search:_,hash:y,state:b,key:A},navigationType:c}},[f,g,_,y,b,A,c]);return I==null?null:S.createElement(WE.Provider,{value:m},S.createElement(GE.Provider,{children:o,value:I}))}function lee(e){let{children:t,location:o}=e;return XZ(MR(t),o)}var jU;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(jU||(jU={}));new Promise(()=>{});function MR(e,t){t===void 0&&(t=[]);let o=[];return S.Children.forEach(e,(a,c)=>{if(!S.isValidElement(a))return;let u=[...t,c];if(a.type===S.Fragment){o.push.apply(o,MR(a.props.children,u));return}a.type!==_u&&gi(!1),!a.props.index||!a.props.children||gi(!1);let h={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(h.children=MR(a.props.children,u)),o.push(h)}),o}/**
 * React Router DOM v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const uee="startTransition",BU=wh[uee];function dee(e){let{basename:t,children:o,future:a,window:c}=e,u=S.useRef();u.current==null&&(u.current=SZ({window:c,v5Compat:!0}));let h=u.current,[f,m]=S.useState({action:h.action,location:h.location}),{v7_startTransition:g}=a||{},_=S.useCallback(y=>{g&&BU?BU(()=>m(y)):m(y)},[m,g]);return S.useLayoutEffect(()=>h.listen(_),[h,_]),S.createElement(cee,{basename:t,children:o,location:f.location,navigationType:f.action,navigator:h})}var $U;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})($U||($U={}));var HU;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(HU||(HU={}));function za(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rn(e){"@babel/helpers - typeof";return Rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rn(e)}function hee(e,t){if(Rn(e)!=="object"||e===null)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var a=o.call(e,t||"default");if(Rn(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SB(e){var t=hee(e,"string");return Rn(t)==="symbol"?t:String(t)}function WU(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,SB(a.key),a)}}function Ka(e,t,o){return t&&WU(e.prototype,t),o&&WU(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function UR(e,t){return UR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},UR(e,t)}function Gh(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UR(e,t)}function eE(e){return eE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},eE(e)}function pee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tE(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fee(e,t){if(t&&(Rn(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tE(e)}function zh(e){var t=pee();return function(){var a=eE(e),c;if(t){var u=eE(this).constructor;c=Reflect.construct(a,arguments,u)}else c=a.apply(this,arguments);return fee(this,c)}}var yB={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function o(){for(var a=[],c=0;c<arguments.length;c++){var u=arguments[c];if(u){var h=typeof u;if(h==="string"||h==="number")a.push(u);else if(Array.isArray(u)){if(u.length){var f=o.apply(null,u);f&&a.push(f)}}else if(h==="object"){if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]")){a.push(u.toString());continue}for(var m in u)t.call(u,m)&&u[m]&&a.push(m)}}}return a.join(" ")}e.exports?(o.default=o,e.exports=o):window.classNames=o})()})(yB);var mee=yB.exports;const Be=Ul(mee);function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},xe.apply(this,arguments)}var CB={exports:{}},Wn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ai=typeof Symbol=="function"&&Symbol.for,L1=Ai?Symbol.for("react.element"):60103,M1=Ai?Symbol.for("react.portal"):60106,KE=Ai?Symbol.for("react.fragment"):60107,YE=Ai?Symbol.for("react.strict_mode"):60108,qE=Ai?Symbol.for("react.profiler"):60114,XE=Ai?Symbol.for("react.provider"):60109,JE=Ai?Symbol.for("react.context"):60110,U1=Ai?Symbol.for("react.async_mode"):60111,QE=Ai?Symbol.for("react.concurrent_mode"):60111,ZE=Ai?Symbol.for("react.forward_ref"):60112,e_=Ai?Symbol.for("react.suspense"):60113,gee=Ai?Symbol.for("react.suspense_list"):60120,t_=Ai?Symbol.for("react.memo"):60115,n_=Ai?Symbol.for("react.lazy"):60116,vee=Ai?Symbol.for("react.block"):60121,Eee=Ai?Symbol.for("react.fundamental"):60117,_ee=Ai?Symbol.for("react.responder"):60118,See=Ai?Symbol.for("react.scope"):60119;function Ca(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case L1:switch(e=e.type,e){case U1:case QE:case KE:case qE:case YE:case e_:return e;default:switch(e=e&&e.$$typeof,e){case JE:case ZE:case n_:case t_:case XE:return e;default:return t}}case M1:return t}}}function bB(e){return Ca(e)===QE}Wn.AsyncMode=U1;Wn.ConcurrentMode=QE;Wn.ContextConsumer=JE;Wn.ContextProvider=XE;Wn.Element=L1;Wn.ForwardRef=ZE;Wn.Fragment=KE;Wn.Lazy=n_;Wn.Memo=t_;Wn.Portal=M1;Wn.Profiler=qE;Wn.StrictMode=YE;Wn.Suspense=e_;Wn.isAsyncMode=function(e){return bB(e)||Ca(e)===U1};Wn.isConcurrentMode=bB;Wn.isContextConsumer=function(e){return Ca(e)===JE};Wn.isContextProvider=function(e){return Ca(e)===XE};Wn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===L1};Wn.isForwardRef=function(e){return Ca(e)===ZE};Wn.isFragment=function(e){return Ca(e)===KE};Wn.isLazy=function(e){return Ca(e)===n_};Wn.isMemo=function(e){return Ca(e)===t_};Wn.isPortal=function(e){return Ca(e)===M1};Wn.isProfiler=function(e){return Ca(e)===qE};Wn.isStrictMode=function(e){return Ca(e)===YE};Wn.isSuspense=function(e){return Ca(e)===e_};Wn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===KE||e===QE||e===qE||e===YE||e===e_||e===gee||typeof e=="object"&&e!==null&&(e.$$typeof===n_||e.$$typeof===t_||e.$$typeof===XE||e.$$typeof===JE||e.$$typeof===ZE||e.$$typeof===Eee||e.$$typeof===_ee||e.$$typeof===See||e.$$typeof===vee)};Wn.typeOf=Ca;CB.exports=Wn;var F1=CB.exports;function Oc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[];return lt.Children.forEach(e,function(a){a==null&&!t.keepEmpty||(Array.isArray(a)?o=o.concat(Oc(a)):F1.isFragment(a)&&a.props?o=o.concat(Oc(a.props.children,t)):o.push(a))}),o}var FR={},yee=function(t){};function Cee(e,t){}function bee(e,t){}function Tee(){FR={}}function TB(e,t,o){!t&&!FR[o]&&(e(!1,o),FR[o]=!0)}function yo(e,t){TB(Cee,e,t)}function Ree(e,t){TB(bee,e,t)}yo.preMessage=yee;yo.resetWarned=Tee;yo.noteOnce=Ree;function Qe(e,t,o){return t=SB(t),t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function GU(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),o.push.apply(o,a)}return o}function ve(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?GU(Object(o),!0).forEach(function(a){Qe(e,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):GU(Object(o)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))})}return e}function r_(e,t,o){var a=S.useRef({});return(!("value"in a.current)||o(a.current.condition,t))&&(a.current.value=e(),a.current.condition=t),a.current.value}function V1(e,t){typeof e=="function"?e(t):Rn(e)==="object"&&e&&"current"in e&&(e.current=t)}function Rs(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var a=t.filter(function(c){return c});return a.length<=1?a[0]:function(c){t.forEach(function(u){V1(u,c)})}}function j1(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r_(function(){return Rs.apply(void 0,t)},t,function(a,c){return a.length===c.length&&a.every(function(u,h){return u===c[h]})})}function Kh(e){var t,o,a=F1.isMemo(e)?e.type.type:e.type;return!(typeof a=="function"&&!((t=a.prototype)!==null&&t!==void 0&&t.render)||typeof e=="function"&&!((o=e.prototype)!==null&&o!==void 0&&o.render))}function nE(e){return e instanceof HTMLElement||e instanceof SVGElement}function VR(e){return nE(e)?e:e instanceof lt.Component?uB.findDOMNode(e):null}var RB=function(){if(typeof Map<"u")return Map;function e(t,o){var a=-1;return t.some(function(c,u){return c[0]===o?(a=u,!0):!1}),a}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(o){var a=e(this.__entries__,o),c=this.__entries__[a];return c&&c[1]},t.prototype.set=function(o,a){var c=e(this.__entries__,o);~c?this.__entries__[c][1]=a:this.__entries__.push([o,a])},t.prototype.delete=function(o){var a=this.__entries__,c=e(a,o);~c&&a.splice(c,1)},t.prototype.has=function(o){return!!~e(this.__entries__,o)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(o,a){a===void 0&&(a=null);for(var c=0,u=this.__entries__;c<u.length;c++){var h=u[c];o.call(a,h[1],h[0])}},t}()}(),jR=typeof window<"u"&&typeof document<"u"&&window.document===document,rE=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Iee=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(rE):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),wee=2;function Oee(e,t){var o=!1,a=!1,c=0;function u(){o&&(o=!1,e()),a&&f()}function h(){Iee(u)}function f(){var m=Date.now();if(o){if(m-c<wee)return;a=!0}else o=!0,a=!1,setTimeout(h,t);c=m}return f}var Aee=20,Nee=["top","right","bottom","left","width","height","size","weight"],xee=typeof MutationObserver<"u",Pee=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Oee(this.refresh.bind(this),Aee)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var o=this.observers_,a=o.indexOf(t);~a&&o.splice(a,1),!o.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(o){return o.gatherActive(),o.hasActive()});return t.forEach(function(o){return o.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!jR||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),xee?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!jR||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var o=t.propertyName,a=o===void 0?"":o,c=Nee.some(function(u){return!!~a.indexOf(u)});c&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),IB=function(e,t){for(var o=0,a=Object.keys(t);o<a.length;o++){var c=a[o];Object.defineProperty(e,c,{value:t[c],enumerable:!1,writable:!1,configurable:!0})}return e},Lh=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||rE},wB=i_(0,0,0,0);function iE(e){return parseFloat(e)||0}function zU(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return t.reduce(function(a,c){var u=e["border-"+c+"-width"];return a+iE(u)},0)}function Dee(e){for(var t=["top","right","bottom","left"],o={},a=0,c=t;a<c.length;a++){var u=c[a],h=e["padding-"+u];o[u]=iE(h)}return o}function kee(e){var t=e.getBBox();return i_(0,0,t.width,t.height)}function Lee(e){var t=e.clientWidth,o=e.clientHeight;if(!t&&!o)return wB;var a=Lh(e).getComputedStyle(e),c=Dee(a),u=c.left+c.right,h=c.top+c.bottom,f=iE(a.width),m=iE(a.height);if(a.boxSizing==="border-box"&&(Math.round(f+u)!==t&&(f-=zU(a,"left","right")+u),Math.round(m+h)!==o&&(m-=zU(a,"top","bottom")+h)),!Uee(e)){var g=Math.round(f+u)-t,_=Math.round(m+h)-o;Math.abs(g)!==1&&(f-=g),Math.abs(_)!==1&&(m-=_)}return i_(c.left,c.top,f,m)}var Mee=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Lh(e).SVGGraphicsElement}:function(e){return e instanceof Lh(e).SVGElement&&typeof e.getBBox=="function"}}();function Uee(e){return e===Lh(e).document.documentElement}function Fee(e){return jR?Mee(e)?kee(e):Lee(e):wB}function Vee(e){var t=e.x,o=e.y,a=e.width,c=e.height,u=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,h=Object.create(u.prototype);return IB(h,{x:t,y:o,width:a,height:c,top:o,right:t+a,bottom:c+o,left:t}),h}function i_(e,t,o,a){return{x:e,y:t,width:o,height:a}}var jee=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=i_(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=Fee(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),Bee=function(){function e(t,o){var a=Vee(o);IB(this,{target:t,contentRect:a})}return e}(),$ee=function(){function e(t,o,a){if(this.activeObservations_=[],this.observations_=new RB,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=o,this.callbackCtx_=a}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Lh(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(t)||(o.set(t,new jee(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Lh(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(t)&&(o.delete(t),o.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(o){o.isActive()&&t.activeObservations_.push(o)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,o=this.activeObservations_.map(function(a){return new Bee(a.target,a.broadcastRect())});this.callback_.call(t,o,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),OB=typeof WeakMap<"u"?new WeakMap:new RB,AB=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var o=Pee.getInstance(),a=new $ee(t,o,this);OB.set(this,a)}return e}();["observe","unobserve","disconnect"].forEach(function(e){AB.prototype[e]=function(){var t;return(t=OB.get(this))[e].apply(t,arguments)}});var Hee=function(){return typeof rE.ResizeObserver<"u"?rE.ResizeObserver:AB}(),bl=new Map;function Wee(e){e.forEach(function(t){var o,a=t.target;(o=bl.get(a))===null||o===void 0||o.forEach(function(c){return c(a)})})}var NB=new Hee(Wee);function Gee(e,t){bl.has(e)||(bl.set(e,new Set),NB.observe(e)),bl.get(e).add(t)}function zee(e,t){bl.has(e)&&(bl.get(e).delete(t),bl.get(e).size||(NB.unobserve(e),bl.delete(e)))}var Kee=function(e){Gh(o,e);var t=zh(o);function o(){return za(this,o),t.apply(this,arguments)}return Ka(o,[{key:"render",value:function(){return this.props.children}}]),o}(S.Component),BR=S.createContext(null);function Yee(e){var t=e.children,o=e.onBatchResize,a=S.useRef(0),c=S.useRef([]),u=S.useContext(BR),h=S.useCallback(function(f,m,g){a.current+=1;var _=a.current;c.current.push({size:f,element:m,data:g}),Promise.resolve().then(function(){_===a.current&&(o==null||o(c.current),c.current=[])}),u==null||u(f,m,g)},[o,u]);return S.createElement(BR.Provider,{value:h},t)}function qee(e,t){var o=e.children,a=e.disabled,c=S.useRef(null),u=S.useRef(null),h=S.useContext(BR),f=typeof o=="function",m=f?o(c):o,g=S.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),_=!f&&S.isValidElement(m)&&Kh(m),y=_?m.ref:null,b=S.useMemo(function(){return Rs(y,c)},[y,c]),A=function(){return VR(c.current)||VR(u.current)};S.useImperativeHandle(t,function(){return A()});var I=S.useRef(e);I.current=e;var w=S.useCallback(function(D){var x=I.current,O=x.onResize,P=x.data,M=D.getBoundingClientRect(),V=M.width,F=M.height,B=D.offsetWidth,H=D.offsetHeight,K=Math.floor(V),$=Math.floor(F);if(g.current.width!==K||g.current.height!==$||g.current.offsetWidth!==B||g.current.offsetHeight!==H){var Z={width:K,height:$,offsetWidth:B,offsetHeight:H};g.current=Z;var z=B===Math.round(V)?V:B,G=H===Math.round(F)?F:H,ee=ve(ve({},Z),{},{offsetWidth:z,offsetHeight:G});h==null||h(ee,D,P),O&&Promise.resolve().then(function(){O(ee,D)})}},[]);return S.useEffect(function(){var D=A();return D&&!a&&Gee(D,w),function(){return zee(D,w)}},[c.current,a]),S.createElement(Kee,{ref:u},_?S.cloneElement(m,{ref:b}):m)}var Xee=S.forwardRef(qee),Jee="rc-observer-key";function Qee(e,t){var o=e.children,a=typeof o=="function"?[o]:Oc(o);return a.map(function(c,u){var h=(c==null?void 0:c.key)||"".concat(Jee,"-").concat(u);return S.createElement(Xee,xe({},e,{key:h,ref:u===0?t:void 0}),c)})}var Hu=S.forwardRef(Qee);Hu.Collection=Yee;function Ko(e,t){var o=ve({},e);return Array.isArray(t)&&t.forEach(function(a){delete o[a]}),o}function $R(e,t){(t==null||t>e.length)&&(t=e.length);for(var o=0,a=new Array(t);o<t;o++)a[o]=e[o];return a}function Zee(e){if(Array.isArray(e))return $R(e)}function xB(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function B1(e,t){if(e){if(typeof e=="string")return $R(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return $R(e,t)}}function ete(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ze(e){return Zee(e)||xB(e)||B1(e)||ete()}var PB=function(t){return+setTimeout(t,16)},DB=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(PB=function(t){return window.requestAnimationFrame(t)},DB=function(t){return window.cancelAnimationFrame(t)});var KU=0,$1=new Map;function kB(e){$1.delete(e)}var Hi=function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;KU+=1;var a=KU;function c(u){if(u===0)kB(a),t();else{var h=PB(function(){c(u-1)});$1.set(a,h)}}return c(o),a};Hi.cancel=function(e){var t=$1.get(e);return kB(t),DB(t)};function H1(e){for(var t=0,o,a=0,c=e.length;c>=4;++a,c-=4)o=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,t=(o&65535)*1540483477+((o>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function tte(e,t){if(e==null)return{};var o={},a=Object.keys(e),c,u;for(u=0;u<a.length;u++)c=a[u],!(t.indexOf(c)>=0)&&(o[c]=e[c]);return o}function dn(e,t){if(e==null)return{};var o=tte(e,t),a,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)a=u[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}function W1(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=new Set;function c(u,h){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,m=a.has(u);if(yo(!m,"Warning: There may be circular references"),m)return!1;if(u===h)return!0;if(o&&f>1)return!1;a.add(u);var g=f+1;if(Array.isArray(u)){if(!Array.isArray(h)||u.length!==h.length)return!1;for(var _=0;_<u.length;_++)if(!c(u[_],h[_],g))return!1;return!0}if(u&&h&&Rn(u)==="object"&&Rn(h)==="object"){var y=Object.keys(u);return y.length!==Object.keys(h).length?!1:y.every(function(b){return c(u[b],h[b],g)})}return!1}return c(e,t)}var nte=function(){function e(t){za(this,e),Qe(this,"instanceId",void 0),Qe(this,"cache",new Map),this.instanceId=t}return Ka(e,[{key:"get",value:function(o){return this.cache.get(o.join("%"))||null}},{key:"update",value:function(o,a){var c=o.join("%"),u=this.cache.get(c),h=a(u);h===null?this.cache.delete(c):this.cache.set(c,h)}}]),e}(),HR="data-token-hash",Rh="data-css-hash",mh="__cssinjs_instance__";function rte(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(Rh,"]"))||[],o=document.head.firstChild;Array.from(t).forEach(function(c){c[mh]=c[mh]||e,c[mh]===e&&document.head.insertBefore(c,o)});var a={};Array.from(document.querySelectorAll("style[".concat(Rh,"]"))).forEach(function(c){var u=c.getAttribute(Rh);if(a[u]){if(c[mh]===e){var h;(h=c.parentNode)===null||h===void 0||h.removeChild(c)}}else a[u]=!0})}return new nte(e)}var ite=S.createContext({hashPriority:"low",cache:rte(),defaultCache:!0});const G1=ite;function Go(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function ote(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var o=t;o;){if(o===e)return!0;o=o.parentNode}return!1}var YU="data-rc-order",ate="rc-util-key",WR=new Map;function LB(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):ate}function o_(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function ste(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function MB(e){return Array.from((WR.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function UB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Go())return null;var o=t.csp,a=t.prepend,c=document.createElement("style");c.setAttribute(YU,ste(a)),o!=null&&o.nonce&&(c.nonce=o==null?void 0:o.nonce),c.innerHTML=e;var u=o_(t),h=u.firstChild;if(a){if(a==="queue"){var f=MB(u).filter(function(m){return["prepend","prependQueue"].includes(m.getAttribute(YU))});if(f.length)return u.insertBefore(c,f[f.length-1].nextSibling),c}u.insertBefore(c,h)}else u.appendChild(c);return c}function FB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=o_(t);return MB(o).find(function(a){return a.getAttribute(LB(t))===e})}function oE(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=FB(e,t);if(o){var a=o_(t);a.removeChild(o)}}function cte(e,t){var o=WR.get(e);if(!o||!ote(document,o)){var a=UB("",t),c=a.parentNode;WR.set(e,c),e.removeChild(a)}}function Mh(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o_(o);cte(a,o);var c=FB(t,o);if(c){var u,h;if((u=o.csp)!==null&&u!==void 0&&u.nonce&&c.nonce!==((h=o.csp)===null||h===void 0?void 0:h.nonce)){var f;c.nonce=(f=o.csp)===null||f===void 0?void 0:f.nonce}return c.innerHTML!==e&&(c.innerHTML=e),c}var m=UB(e,o);return m.setAttribute(LB(o),t),m}function aE(e){var t="";return Object.keys(e).forEach(function(o){var a=e[o];t+=o,a&&Rn(a)==="object"?t+=aE(a):t+=a}),t}function lte(e,t){return H1("".concat(t,"_").concat(aE(e)))}var Af="layer-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),VB="903px";function ute(e,t){if(Go()){var o;Mh(e,Af);var a=document.createElement("div");a.style.position="fixed",a.style.left="0",a.style.top="0",t==null||t(a),document.body.appendChild(a);var c=getComputedStyle(a).width===VB;return(o=a.parentNode)===null||o===void 0||o.removeChild(a),oE(Af),c}return!1}var gb=void 0;function dte(){return gb===void 0&&(gb=ute("@layer ".concat(Af," { .").concat(Af," { width: ").concat(VB,"!important; } }"),function(e){e.className=Af})),gb}function jB(e){if(Array.isArray(e))return e}function hte(e,t){var o=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(o!=null){var a,c,u,h,f=[],m=!0,g=!1;try{if(u=(o=o.call(e)).next,t===0){if(Object(o)!==o)return;m=!1}else for(;!(m=(a=u.call(o)).done)&&(f.push(a.value),f.length!==t);m=!0);}catch(_){g=!0,c=_}finally{try{if(!m&&o.return!=null&&(h=o.return(),Object(h)!==h))return}finally{if(g)throw c}}return f}}function BB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function De(e,t){return jB(e)||hte(e,t)||B1(e,t)||BB()}var qU=Go()?S.useLayoutEffect:S.useEffect,Or=function(t,o){var a=S.useRef(!0);qU(function(){return t(a.current)},o),qU(function(){return a.current=!1,function(){a.current=!0}},[])},XU=function(t,o){Or(function(a){if(!a)return t()},o)},pte=ve({},wh),JU=pte.useInsertionEffect,fte=function(t,o,a){S.useMemo(t,a),Or(o,a)},mte=JU?function(e,t,o){return JU(function(){return e(),t()},o)}:fte;const gte=mte;function $B(e,t,o,a,c){var u=S.useContext(G1),h=u.cache,f=[e].concat(Ze(t)),m=f.join("_"),g=function(b){h.update(f,function(A){var I=A||[],w=De(I,2),D=w[0],x=D===void 0?0:D,O=w[1],P=O,M=P||o(),V=[x,M];return b?b(V):V})};S.useMemo(function(){return g()},[m]);var _=h.get(f)[1];return gte(function(){c==null||c(_)},function(){return g(function(y){var b=De(y,2),A=b[0],I=b[1];return[A+1,I]}),function(){h.update(f,function(y){var b=y||[],A=De(b,2),I=A[0],w=I===void 0?0:I,D=A[1],x=w-1;return x===0?(a==null||a(D,!1),null):[w-1,D]})}},[m]),_}var vte={},Ete="css",yu=new Map;function _te(e){yu.set(e,(yu.get(e)||0)+1)}function Ste(e,t){if(typeof document<"u"){var o=document.querySelectorAll("style[".concat(HR,'="').concat(e,'"]'));o.forEach(function(a){if(a[mh]===t){var c;(c=a.parentNode)===null||c===void 0||c.removeChild(a)}})}}function yte(e,t){yu.set(e,(yu.get(e)||0)-1);var o=Array.from(yu.keys()),a=o.filter(function(c){var u=yu.get(c)||0;return u<=0});a.length<o.length&&a.forEach(function(c){Ste(c,t),yu.delete(c)})}var HB=function(t,o,a,c){var u=a.getDerivativeToken(t),h=ve(ve({},u),o);return c&&(h=c(h)),h};function Cte(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=S.useContext(G1),c=a.cache.instanceId,u=o.salt,h=u===void 0?"":u,f=o.override,m=f===void 0?vte:f,g=o.formatToken,_=S.useMemo(function(){return Object.assign.apply(Object,[{}].concat(Ze(t)))},[t]),y=S.useMemo(function(){return aE(_)},[_]),b=S.useMemo(function(){return aE(m)},[m]),A=$B("token",[h,e.id,y,b],function(){var I=HB(_,m,e,g),w=lte(I,h);I._tokenKey=w,_te(w);var D="".concat(Ete,"-").concat(H1(w));return I._hashId=D,[I,D]},function(I){yte(I[0]._tokenKey,c)});return A}var bte={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},WB="comm",GB="rule",zB="decl",Tte="@import",Rte="@keyframes",Ite="@layer",wte=Math.abs,z1=String.fromCharCode;function KB(e){return e.trim()}function Ev(e,t,o){return e.replace(t,o)}function Ote(e,t){return e.indexOf(t)}function im(e,t){return e.charCodeAt(t)|0}function om(e,t,o){return e.slice(t,o)}function Ec(e){return e.length}function Ate(e){return e.length}function kg(e,t){return t.push(e),e}var a_=1,Uh=1,YB=0,Ga=0,ii=0,Yh="";function K1(e,t,o,a,c,u,h,f){return{value:e,root:t,parent:o,type:a,props:c,children:u,line:a_,column:Uh,length:h,return:"",siblings:f}}function Nte(){return ii}function xte(){return ii=Ga>0?im(Yh,--Ga):0,Uh--,ii===10&&(Uh=1,a_--),ii}function Ss(){return ii=Ga<YB?im(Yh,Ga++):0,Uh++,ii===10&&(Uh=1,a_++),ii}function xu(){return im(Yh,Ga)}function _v(){return Ga}function s_(e,t){return om(Yh,e,t)}function GR(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Pte(e){return a_=Uh=1,YB=Ec(Yh=e),Ga=0,[]}function Dte(e){return Yh="",e}function vb(e){return KB(s_(Ga-1,zR(e===91?e+2:e===40?e+1:e)))}function kte(e){for(;(ii=xu())&&ii<33;)Ss();return GR(e)>2||GR(ii)>3?"":" "}function Lte(e,t){for(;--t&&Ss()&&!(ii<48||ii>102||ii>57&&ii<65||ii>70&&ii<97););return s_(e,_v()+(t<6&&xu()==32&&Ss()==32))}function zR(e){for(;Ss();)switch(ii){case e:return Ga;case 34:case 39:e!==34&&e!==39&&zR(ii);break;case 40:e===41&&zR(e);break;case 92:Ss();break}return Ga}function Mte(e,t){for(;Ss()&&e+ii!==47+10;)if(e+ii===42+42&&xu()===47)break;return"/*"+s_(t,Ga-1)+"*"+z1(e===47?e:Ss())}function Ute(e){for(;!GR(xu());)Ss();return s_(e,Ga)}function Fte(e){return Dte(Sv("",null,null,null,[""],e=Pte(e),0,[0],e))}function Sv(e,t,o,a,c,u,h,f,m){for(var g=0,_=0,y=h,b=0,A=0,I=0,w=1,D=1,x=1,O=0,P="",M=c,V=u,F=a,B=P;D;)switch(I=O,O=Ss()){case 40:if(I!=108&&im(B,y-1)==58){Ote(B+=Ev(vb(O),"&","&\f"),"&\f")!=-1&&(x=-1);break}case 34:case 39:case 91:B+=vb(O);break;case 9:case 10:case 13:case 32:B+=kte(I);break;case 92:B+=Lte(_v()-1,7);continue;case 47:switch(xu()){case 42:case 47:kg(Vte(Mte(Ss(),_v()),t,o,m),m);break;default:B+="/"}break;case 123*w:f[g++]=Ec(B)*x;case 125*w:case 59:case 0:switch(O){case 0:case 125:D=0;case 59+_:x==-1&&(B=Ev(B,/\f/g,"")),A>0&&Ec(B)-y&&kg(A>32?ZU(B+";",a,o,y-1,m):ZU(Ev(B," ","")+";",a,o,y-2,m),m);break;case 59:B+=";";default:if(kg(F=QU(B,t,o,g,_,c,f,P,M=[],V=[],y,u),u),O===123)if(_===0)Sv(B,t,F,F,M,u,y,f,V);else switch(b===99&&im(B,3)===110?100:b){case 100:case 108:case 109:case 115:Sv(e,F,F,a&&kg(QU(e,F,F,0,0,c,f,P,c,M=[],y,V),V),c,V,y,f,a?M:V);break;default:Sv(B,F,F,F,[""],V,0,f,V)}}g=_=A=0,w=x=1,P=B="",y=h;break;case 58:y=1+Ec(B),A=I;default:if(w<1){if(O==123)--w;else if(O==125&&w++==0&&xte()==125)continue}switch(B+=z1(O),O*w){case 38:x=_>0?1:(B+="\f",-1);break;case 44:f[g++]=(Ec(B)-1)*x,x=1;break;case 64:xu()===45&&(B+=vb(Ss())),b=xu(),_=y=Ec(P=B+=Ute(_v())),O++;break;case 45:I===45&&Ec(B)==2&&(w=0)}}return u}function QU(e,t,o,a,c,u,h,f,m,g,_,y){for(var b=c-1,A=c===0?u:[""],I=Ate(A),w=0,D=0,x=0;w<a;++w)for(var O=0,P=om(e,b+1,b=wte(D=h[w])),M=e;O<I;++O)(M=KB(D>0?A[O]+" "+P:Ev(P,/&\f/g,A[O])))&&(m[x++]=M);return K1(e,t,o,c===0?GB:f,m,g,_,y)}function Vte(e,t,o,a){return K1(e,t,o,WB,z1(Nte()),om(e,2,-2),0,a)}function ZU(e,t,o,a,c){return K1(e,t,o,zB,om(e,0,a),om(e,a+1,-1),a,c)}function KR(e,t){for(var o="",a=0;a<e.length;a++)o+=t(e[a],a,e,t)||"";return o}function jte(e,t,o,a){switch(e.type){case Ite:if(e.children.length)break;case Tte:case zB:return e.return=e.return||e.value;case WB:return"";case Rte:return e.return=e.value+"{"+KR(e.children,a)+"}";case GB:if(!Ec(e.value=e.props.join(",")))return""}return Ec(o=KR(e.children,a))?e.return=e.value+"{"+o+"}":""}var e4=Go(),Bte="_skip_check_",qB="_multi_value_";function t4(e){var t=KR(Fte(e),jte);return t.replace(/\{%%%\:[^;];}/g,";")}function $te(e){return Rn(e)==="object"&&e&&(Bte in e||qB in e)}function Hte(e,t,o){if(!t)return e;var a=".".concat(t),c=o==="low"?":where(".concat(a,")"):a,u=e.split(",").map(function(h){var f,m=h.trim().split(/\s+/),g=m[0]||"",_=((f=g.match(/^\w+/))===null||f===void 0?void 0:f[0])||"";return g="".concat(_).concat(c).concat(g.slice(_.length)),[g].concat(Ze(m.slice(1))).join(" ")});return u.join(",")}var Wte=function e(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},c=a.root,u=a.injectHash,h=a.parentSelectors,f=o.hashId,m=o.layer;o.path;var g=o.hashPriority,_=o.transformers,y=_===void 0?[]:_;o.linters;var b="",A={};function I(P){var M=P.getName(f);if(!A[M]){var V=e(P.style,o,{root:!1,parentSelectors:h}),F=De(V,1),B=F[0];A[M]="@keyframes ".concat(P.getName(f)).concat(B)}}function w(P){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return P.forEach(function(V){Array.isArray(V)?w(V,M):V&&M.push(V)}),M}var D=w(Array.isArray(t)?t:[t]);if(D.forEach(function(P){var M=typeof P=="string"&&!c?{}:P;if(typeof M=="string")b+="".concat(M,`
`);else if(M._keyframe)I(M);else{var V=y.reduce(function(F,B){var H;return(B==null||(H=B.visit)===null||H===void 0?void 0:H.call(B,F))||F},M);Object.keys(V).forEach(function(F){var B=V[F];if(Rn(B)==="object"&&B&&(F!=="animationName"||!B._keyframe)&&!$te(B)){var H=!1,K=F.trim(),$=!1;(c||u)&&f?K.startsWith("@")?H=!0:K=Hte(F,f,g):c&&!f&&(K==="&"||K==="")&&(K="",$=!0);var Z=e(B,o,{root:$,injectHash:H,parentSelectors:[].concat(Ze(h),[K])}),z=De(Z,2),G=z[0],ee=z[1];A=ve(ve({},A),ee),b+="".concat(K).concat(G)}else{let ue=function(me,fe){var se=me.replace(/[A-Z]/g,function(de){return"-".concat(de.toLowerCase())}),ae=fe;!bte[me]&&typeof ae=="number"&&ae!==0&&(ae="".concat(ae,"px")),me==="animationName"&&fe!==null&&fe!==void 0&&fe._keyframe&&(I(fe),ae=fe.getName(f)),b+="".concat(se,":").concat(ae,";")};var pe=ue,re,oe=(re=B==null?void 0:B.value)!==null&&re!==void 0?re:B;Rn(B)==="object"&&B!==null&&B!==void 0&&B[qB]&&Array.isArray(oe)?oe.forEach(function(me){ue(F,me)}):ue(F,oe)}})}}),!c)b="{".concat(b,"}");else if(m&&dte()){var x=m.split(","),O=x[x.length-1].trim();b="@layer ".concat(O," {").concat(b,"}"),x.length>1&&(b="@layer ".concat(m,"{%%%:%}").concat(b))}return[b,A]};function Gte(e,t){return H1("".concat(e.join("%")).concat(t))}function zte(){return null}function YR(e,t){var o=e.token,a=e.path,c=e.hashId,u=e.layer,h=e.nonce,f=S.useContext(G1),m=f.autoClear;f.mock;var g=f.defaultCache,_=f.hashPriority,y=f.container,b=f.ssrInline,A=f.transformers,I=f.linters,w=f.cache,D=o._tokenKey,x=[D].concat(Ze(a)),O=e4,P=$B("style",x,function(){var H=t(),K=Wte(H,{hashId:c,hashPriority:_,layer:u,path:a.join("-"),transformers:A,linters:I}),$=De(K,2),Z=$[0],z=$[1],G=t4(Z),ee=Gte(x,G);return[G,D,ee,z]},function(H,K){var $=De(H,3),Z=$[2];(K||m)&&e4&&oE(Z,{mark:Rh})},function(H){var K=De(H,4),$=K[0];K[1];var Z=K[2],z=K[3];if(O){var G={mark:Rh,prepend:"queue",attachTo:y},ee=typeof h=="function"?h():h;ee&&(G.csp={nonce:ee});var re=Mh($,Z,G);re[mh]=w.instanceId,re.setAttribute(HR,D),Object.keys(z).forEach(function(oe){Mh(t4(z[oe]),"_effect-".concat(oe),G)})}}),M=De(P,3),V=M[0],F=M[1],B=M[2];return function(H){var K;if(!b||O||!g)K=S.createElement(zte,null);else{var $;K=S.createElement("style",xe({},($={},Qe($,HR,F),Qe($,Rh,B),$),{dangerouslySetInnerHTML:{__html:V}}))}return S.createElement(S.Fragment,null,K,H)}}var Er=function(){function e(t,o){za(this,e),Qe(this,"name",void 0),Qe(this,"style",void 0),Qe(this,"_keyframe",!0),this.name=t,this.style=o}return Ka(e,[{key:"getName",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return o?"".concat(o,"-").concat(this.name):this.name}}]),e}();function Kte(e,t){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}var Y1=function(){function e(){za(this,e),Qe(this,"cache",void 0),Qe(this,"keys",void 0),Qe(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Ka(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(o){var a,c,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,h={map:this.cache};return o.forEach(function(f){if(!h)h=void 0;else{var m,g;h=(m=h)===null||m===void 0||(g=m.map)===null||g===void 0?void 0:g.get(f)}}),(a=h)!==null&&a!==void 0&&a.value&&u&&(h.value[1]=this.cacheCallTimes++),(c=h)===null||c===void 0?void 0:c.value}},{key:"get",value:function(o){var a;return(a=this.internalGet(o,!0))===null||a===void 0?void 0:a[0]}},{key:"has",value:function(o){return!!this.internalGet(o)}},{key:"set",value:function(o,a){var c=this;if(!this.has(o)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var u=this.keys.reduce(function(g,_){var y=De(g,2),b=y[1];return c.internalGet(_)[1]<b?[_,c.internalGet(_)[1]]:g},[this.keys[0],this.cacheCallTimes]),h=De(u,1),f=h[0];this.delete(f)}this.keys.push(o)}var m=this.cache;o.forEach(function(g,_){if(_===o.length-1)m.set(g,{value:[a,c.cacheCallTimes++]});else{var y=m.get(g);y?y.map||(y.map=new Map):m.set(g,{map:new Map}),m=m.get(g).map}})}},{key:"deleteByPath",value:function(o,a){var c=o.get(a[0]);if(a.length===1){var u;return c.map?o.set(a[0],{map:c.map}):o.delete(a[0]),(u=c.value)===null||u===void 0?void 0:u[0]}var h=this.deleteByPath(c.map,a.slice(1));return(!c.map||c.map.size===0)&&!c.value&&o.delete(a[0]),h}},{key:"delete",value:function(o){if(this.has(o))return this.keys=this.keys.filter(function(a){return!Kte(a,o)}),this.deleteByPath(this.cache,o)}}]),e}();Qe(Y1,"MAX_CACHE_SIZE",20);Qe(Y1,"MAX_CACHE_OFFSET",5);var n4=0,Yte=function(){function e(t){za(this,e),Qe(this,"derivatives",void 0),Qe(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=n4,t.length===0&&(t.length>0,void 0),n4+=1}return Ka(e,[{key:"getDerivativeToken",value:function(o){return this.derivatives.reduce(function(a,c){return c(o,a)},void 0)}}]),e}(),Eb=new Y1;function sE(e){var t=Array.isArray(e)?e:[e];return Eb.has(t)||Eb.set(t,new Yte(t)),Eb.get(t)}function Wd(e){return e.notSplit=!0,e}Wd(["borderTop","borderBottom"]),Wd(["borderTop"]),Wd(["borderBottom"]),Wd(["borderLeft","borderRight"]),Wd(["borderLeft"]),Wd(["borderRight"]);var qte=S.createContext({});const q1=qte;function Xte(e){return jB(e)||xB(e)||B1(e)||BB()}function gs(e,t){for(var o=e,a=0;a<t.length;a+=1){if(o==null)return;o=o[t[a]]}return o}function XB(e,t,o,a){if(!t.length)return o;var c=Xte(t),u=c[0],h=c.slice(1),f;return!e&&typeof u=="number"?f=[]:Array.isArray(e)?f=Ze(e):f=ve({},e),a&&o===void 0&&h.length===1?delete f[u][h[0]]:f[u]=XB(f[u],h,o,a),f}function ds(e,t,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&a&&o===void 0&&!gs(e,t.slice(0,-1))?e:XB(e,t,o,a)}function Jte(e){return Rn(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function r4(e){return Array.isArray(e)?[]:{}}var Qte=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function gh(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var a=r4(t[0]);return t.forEach(function(c){function u(h,f){var m=new Set(f),g=gs(c,h),_=Array.isArray(g);if(_||Jte(g)){if(!m.has(g)){m.add(g);var y=gs(a,h);_?a=ds(a,h,[]):(!y||Rn(y)!=="object")&&(a=ds(a,h,r4(g))),Qte(g).forEach(function(b){u([].concat(Ze(h),[b]),m)})}}else a=ds(a,h,g)}u([])}),a}const JB=S.createContext(void 0),Zte={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};var ene={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const tne={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},QB=tne,nne={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},ene),timePickerLocale:Object.assign({},QB)},i4=nne,la="${label} is not a valid ${type}",rne={locale:"en",Pagination:Zte,DatePicker:i4,TimePicker:QB,Calendar:i4,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:la,method:la,array:la,object:la,number:la,date:la,boolean:la,integer:la,float:la,regexp:la,email:la,url:la,hex:la},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}},Fh=rne;let _b=Object.assign({},Fh.Modal);function o4(e){e?_b=Object.assign(Object.assign({},_b),e):_b=Object.assign({},Fh.Modal)}const ine=S.createContext(void 0),X1=ine,one=(e,t)=>{const o=S.useContext(X1),a=S.useMemo(()=>{var u;const h=t||Fh[e],f=(u=o==null?void 0:o[e])!==null&&u!==void 0?u:{};return Object.assign(Object.assign({},typeof h=="function"?h():h),f||{})},[e,t,o]),c=S.useMemo(()=>{const u=o==null?void 0:o.locale;return o!=null&&o.exist&&!u?Fh.locale:u},[o]);return[a,c]},ZB=one,ane="internalMark",sne=e=>{const{locale:t={},children:o,_ANT_MARK__:a}=e;S.useEffect(()=>(o4(t&&t.Modal),()=>{o4()}),[t]);const c=S.useMemo(()=>Object.assign(Object.assign({},t),{exist:!0}),[t]);return S.createElement(X1.Provider,{value:c},o)},cne=sne,lne="5.6.4",cE=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];function Wi(e,t){une(e)&&(e="100%");var o=dne(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),o&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function Lg(e){return Math.min(1,Math.max(0,e))}function une(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function dne(e){return typeof e=="string"&&e.indexOf("%")!==-1}function e8(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Mg(e){return e<=1?"".concat(Number(e)*100,"%"):e}function Ru(e){return e.length===1?"0"+e:String(e)}function hne(e,t,o){return{r:Wi(e,255)*255,g:Wi(t,255)*255,b:Wi(o,255)*255}}function a4(e,t,o){e=Wi(e,255),t=Wi(t,255),o=Wi(o,255);var a=Math.max(e,t,o),c=Math.min(e,t,o),u=0,h=0,f=(a+c)/2;if(a===c)h=0,u=0;else{var m=a-c;switch(h=f>.5?m/(2-a-c):m/(a+c),a){case e:u=(t-o)/m+(t<o?6:0);break;case t:u=(o-e)/m+2;break;case o:u=(e-t)/m+4;break}u/=6}return{h:u,s:h,l:f}}function Sb(e,t,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?e+(t-e)*(6*o):o<1/2?t:o<2/3?e+(t-e)*(2/3-o)*6:e}function pne(e,t,o){var a,c,u;if(e=Wi(e,360),t=Wi(t,100),o=Wi(o,100),t===0)c=o,u=o,a=o;else{var h=o<.5?o*(1+t):o+t-o*t,f=2*o-h;a=Sb(f,h,e+1/3),c=Sb(f,h,e),u=Sb(f,h,e-1/3)}return{r:a*255,g:c*255,b:u*255}}function qR(e,t,o){e=Wi(e,255),t=Wi(t,255),o=Wi(o,255);var a=Math.max(e,t,o),c=Math.min(e,t,o),u=0,h=a,f=a-c,m=a===0?0:f/a;if(a===c)u=0;else{switch(a){case e:u=(t-o)/f+(t<o?6:0);break;case t:u=(o-e)/f+2;break;case o:u=(e-t)/f+4;break}u/=6}return{h:u,s:m,v:h}}function fne(e,t,o){e=Wi(e,360)*6,t=Wi(t,100),o=Wi(o,100);var a=Math.floor(e),c=e-a,u=o*(1-t),h=o*(1-c*t),f=o*(1-(1-c)*t),m=a%6,g=[o,h,u,u,f,o][m],_=[f,o,o,h,u,u][m],y=[u,u,f,o,o,h][m];return{r:g*255,g:_*255,b:y*255}}function XR(e,t,o,a){var c=[Ru(Math.round(e).toString(16)),Ru(Math.round(t).toString(16)),Ru(Math.round(o).toString(16))];return a&&c[0].startsWith(c[0].charAt(1))&&c[1].startsWith(c[1].charAt(1))&&c[2].startsWith(c[2].charAt(1))?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0):c.join("")}function mne(e,t,o,a,c){var u=[Ru(Math.round(e).toString(16)),Ru(Math.round(t).toString(16)),Ru(Math.round(o).toString(16)),Ru(gne(a))];return c&&u[0].startsWith(u[0].charAt(1))&&u[1].startsWith(u[1].charAt(1))&&u[2].startsWith(u[2].charAt(1))&&u[3].startsWith(u[3].charAt(1))?u[0].charAt(0)+u[1].charAt(0)+u[2].charAt(0)+u[3].charAt(0):u.join("")}function gne(e){return Math.round(parseFloat(e)*255).toString(16)}function s4(e){return da(e)/255}function da(e){return parseInt(e,16)}function vne(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var JR={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function th(e){var t={r:0,g:0,b:0},o=1,a=null,c=null,u=null,h=!1,f=!1;return typeof e=="string"&&(e=Sne(e)),typeof e=="object"&&(fc(e.r)&&fc(e.g)&&fc(e.b)?(t=hne(e.r,e.g,e.b),h=!0,f=String(e.r).substr(-1)==="%"?"prgb":"rgb"):fc(e.h)&&fc(e.s)&&fc(e.v)?(a=Mg(e.s),c=Mg(e.v),t=fne(e.h,a,c),h=!0,f="hsv"):fc(e.h)&&fc(e.s)&&fc(e.l)&&(a=Mg(e.s),u=Mg(e.l),t=pne(e.h,a,u),h=!0,f="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(o=e.a)),o=e8(o),{ok:h,format:e.format||f,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:o}}var Ene="[-\\+]?\\d+%?",_ne="[-\\+]?\\d*\\.\\d+%?",Tl="(?:".concat(_ne,")|(?:").concat(Ene,")"),yb="[\\s|\\(]+(".concat(Tl,")[,|\\s]+(").concat(Tl,")[,|\\s]+(").concat(Tl,")\\s*\\)?"),Cb="[\\s|\\(]+(".concat(Tl,")[,|\\s]+(").concat(Tl,")[,|\\s]+(").concat(Tl,")[,|\\s]+(").concat(Tl,")\\s*\\)?"),cs={CSS_UNIT:new RegExp(Tl),rgb:new RegExp("rgb"+yb),rgba:new RegExp("rgba"+Cb),hsl:new RegExp("hsl"+yb),hsla:new RegExp("hsla"+Cb),hsv:new RegExp("hsv"+yb),hsva:new RegExp("hsva"+Cb),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Sne(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(JR[e])e=JR[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var o=cs.rgb.exec(e);return o?{r:o[1],g:o[2],b:o[3]}:(o=cs.rgba.exec(e),o?{r:o[1],g:o[2],b:o[3],a:o[4]}:(o=cs.hsl.exec(e),o?{h:o[1],s:o[2],l:o[3]}:(o=cs.hsla.exec(e),o?{h:o[1],s:o[2],l:o[3],a:o[4]}:(o=cs.hsv.exec(e),o?{h:o[1],s:o[2],v:o[3]}:(o=cs.hsva.exec(e),o?{h:o[1],s:o[2],v:o[3],a:o[4]}:(o=cs.hex8.exec(e),o?{r:da(o[1]),g:da(o[2]),b:da(o[3]),a:s4(o[4]),format:t?"name":"hex8"}:(o=cs.hex6.exec(e),o?{r:da(o[1]),g:da(o[2]),b:da(o[3]),format:t?"name":"hex"}:(o=cs.hex4.exec(e),o?{r:da(o[1]+o[1]),g:da(o[2]+o[2]),b:da(o[3]+o[3]),a:s4(o[4]+o[4]),format:t?"name":"hex8"}:(o=cs.hex3.exec(e),o?{r:da(o[1]+o[1]),g:da(o[2]+o[2]),b:da(o[3]+o[3]),format:t?"name":"hex"}:!1)))))))))}function fc(e){return!!cs.CSS_UNIT.exec(String(e))}var Bi=function(){function e(t,o){t===void 0&&(t=""),o===void 0&&(o={});var a;if(t instanceof e)return t;typeof t=="number"&&(t=vne(t)),this.originalInput=t;var c=th(t);this.originalInput=t,this.r=c.r,this.g=c.g,this.b=c.b,this.a=c.a,this.roundA=Math.round(100*this.a)/100,this.format=(a=o.format)!==null&&a!==void 0?a:c.format,this.gradientType=o.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=c.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),o,a,c,u=t.r/255,h=t.g/255,f=t.b/255;return u<=.03928?o=u/12.92:o=Math.pow((u+.055)/1.055,2.4),h<=.03928?a=h/12.92:a=Math.pow((h+.055)/1.055,2.4),f<=.03928?c=f/12.92:c=Math.pow((f+.055)/1.055,2.4),.2126*o+.7152*a+.0722*c},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=e8(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=qR(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=qR(this.r,this.g,this.b),o=Math.round(t.h*360),a=Math.round(t.s*100),c=Math.round(t.v*100);return this.a===1?"hsv(".concat(o,", ").concat(a,"%, ").concat(c,"%)"):"hsva(".concat(o,", ").concat(a,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=a4(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=a4(this.r,this.g,this.b),o=Math.round(t.h*360),a=Math.round(t.s*100),c=Math.round(t.l*100);return this.a===1?"hsl(".concat(o,", ").concat(a,"%, ").concat(c,"%)"):"hsla(".concat(o,", ").concat(a,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),XR(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),mne(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),o=Math.round(this.g),a=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(o,", ").concat(a,")"):"rgba(".concat(t,", ").concat(o,", ").concat(a,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(o){return"".concat(Math.round(Wi(o,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(o){return Math.round(Wi(o,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+XR(this.r,this.g,this.b,!1),o=0,a=Object.entries(JR);o<a.length;o++){var c=a[o],u=c[0],h=c[1];if(t===h)return u}return!1},e.prototype.toString=function(t){var o=!!t;t=t??this.format;var a=!1,c=this.a<1&&this.a>=0,u=!o&&c&&(t.startsWith("hex")||t==="name");return u?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(a=this.toRgbString()),t==="prgb"&&(a=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(a=this.toHexString()),t==="hex3"&&(a=this.toHexString(!0)),t==="hex4"&&(a=this.toHex8String(!0)),t==="hex8"&&(a=this.toHex8String()),t==="name"&&(a=this.toName()),t==="hsl"&&(a=this.toHslString()),t==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var o=this.toHsl();return o.l+=t/100,o.l=Lg(o.l),new e(o)},e.prototype.brighten=function(t){t===void 0&&(t=10);var o=this.toRgb();return o.r=Math.max(0,Math.min(255,o.r-Math.round(255*-(t/100)))),o.g=Math.max(0,Math.min(255,o.g-Math.round(255*-(t/100)))),o.b=Math.max(0,Math.min(255,o.b-Math.round(255*-(t/100)))),new e(o)},e.prototype.darken=function(t){t===void 0&&(t=10);var o=this.toHsl();return o.l-=t/100,o.l=Lg(o.l),new e(o)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var o=this.toHsl();return o.s-=t/100,o.s=Lg(o.s),new e(o)},e.prototype.saturate=function(t){t===void 0&&(t=10);var o=this.toHsl();return o.s+=t/100,o.s=Lg(o.s),new e(o)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var o=this.toHsl(),a=(o.h+t)%360;return o.h=a<0?360+a:a,new e(o)},e.prototype.mix=function(t,o){o===void 0&&(o=50);var a=this.toRgb(),c=new e(t).toRgb(),u=o/100,h={r:(c.r-a.r)*u+a.r,g:(c.g-a.g)*u+a.g,b:(c.b-a.b)*u+a.b,a:(c.a-a.a)*u+a.a};return new e(h)},e.prototype.analogous=function(t,o){t===void 0&&(t=6),o===void 0&&(o=30);var a=this.toHsl(),c=360/o,u=[this];for(a.h=(a.h-(c*t>>1)+720)%360;--t;)a.h=(a.h+c)%360,u.push(new e(a));return u},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var o=this.toHsv(),a=o.h,c=o.s,u=o.v,h=[],f=1/t;t--;)h.push(new e({h:a,s:c,v:u})),u=(u+f)%1;return h},e.prototype.splitcomplement=function(){var t=this.toHsl(),o=t.h;return[this,new e({h:(o+72)%360,s:t.s,l:t.l}),new e({h:(o+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var o=this.toRgb(),a=new e(t).toRgb(),c=o.a+a.a*(1-o.a);return new e({r:(o.r*o.a+a.r*a.a*(1-o.a))/c,g:(o.g*o.a+a.g*a.a*(1-o.a))/c,b:(o.b*o.a+a.b*a.a*(1-o.a))/c,a:c})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var o=this.toHsl(),a=o.h,c=[this],u=360/t,h=1;h<t;h++)c.push(new e({h:(a+h*u)%360,s:o.s,l:o.l}));return c},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),Ug=2,c4=.16,yne=.05,Cne=.05,bne=.15,t8=5,n8=4,Tne=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function l4(e){var t=e.r,o=e.g,a=e.b,c=qR(t,o,a);return{h:c.h*360,s:c.s,v:c.v}}function Fg(e){var t=e.r,o=e.g,a=e.b;return"#".concat(XR(t,o,a,!1))}function Rne(e,t,o){var a=o/100,c={r:(t.r-e.r)*a+e.r,g:(t.g-e.g)*a+e.g,b:(t.b-e.b)*a+e.b};return c}function u4(e,t,o){var a;return Math.round(e.h)>=60&&Math.round(e.h)<=240?a=o?Math.round(e.h)-Ug*t:Math.round(e.h)+Ug*t:a=o?Math.round(e.h)+Ug*t:Math.round(e.h)-Ug*t,a<0?a+=360:a>=360&&(a-=360),a}function d4(e,t,o){if(e.h===0&&e.s===0)return e.s;var a;return o?a=e.s-c4*t:t===n8?a=e.s+c4:a=e.s+yne*t,a>1&&(a=1),o&&t===t8&&a>.1&&(a=.1),a<.06&&(a=.06),Number(a.toFixed(2))}function h4(e,t,o){var a;return o?a=e.v+Cne*t:a=e.v-bne*t,a>1&&(a=1),Number(a.toFixed(2))}function Ac(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[],a=th(e),c=t8;c>0;c-=1){var u=l4(a),h=Fg(th({h:u4(u,c,!0),s:d4(u,c,!0),v:h4(u,c,!0)}));o.push(h)}o.push(Fg(a));for(var f=1;f<=n8;f+=1){var m=l4(a),g=Fg(th({h:u4(m,f),s:d4(m,f),v:h4(m,f)}));o.push(g)}return t.theme==="dark"?Tne.map(function(_){var y=_.index,b=_.opacity,A=Fg(Rne(th(t.backgroundColor||"#141414"),th(o[y]),b*100));return A}):o}var bb={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Nf={},Tb={};Object.keys(bb).forEach(function(e){Nf[e]=Ac(bb[e]),Nf[e].primary=Nf[e][5],Tb[e]=Ac(bb[e],{theme:"dark",backgroundColor:"#141414"}),Tb[e].primary=Tb[e][5]});var Ine=Nf.gold,wne=Nf.blue;const One=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}},r8=One;function Ane(e){const{sizeUnit:t,sizeStep:o}=e;return{sizeXXL:t*(o+8),sizeXL:t*(o+4),sizeLG:t*(o+2),sizeMD:t*(o+1),sizeMS:t*o,size:t*o,sizeSM:t*(o-1),sizeXS:t*(o-2),sizeXXS:t*(o-3)}}const J1={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},Nne=Object.assign(Object.assign({},J1),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),Sm=Nne;function i8(e,t){let{generateColorPalettes:o,generateNeutralColorPalettes:a}=t;const{colorSuccess:c,colorWarning:u,colorError:h,colorInfo:f,colorPrimary:m,colorBgBase:g,colorTextBase:_}=e,y=o(m),b=o(c),A=o(u),I=o(h),w=o(f),D=a(g,_);return Object.assign(Object.assign({},D),{colorPrimaryBg:y[1],colorPrimaryBgHover:y[2],colorPrimaryBorder:y[3],colorPrimaryBorderHover:y[4],colorPrimaryHover:y[5],colorPrimary:y[6],colorPrimaryActive:y[7],colorPrimaryTextHover:y[8],colorPrimaryText:y[9],colorPrimaryTextActive:y[10],colorSuccessBg:b[1],colorSuccessBgHover:b[2],colorSuccessBorder:b[3],colorSuccessBorderHover:b[4],colorSuccessHover:b[4],colorSuccess:b[6],colorSuccessActive:b[7],colorSuccessTextHover:b[8],colorSuccessText:b[9],colorSuccessTextActive:b[10],colorErrorBg:I[1],colorErrorBgHover:I[2],colorErrorBorder:I[3],colorErrorBorderHover:I[4],colorErrorHover:I[5],colorError:I[6],colorErrorActive:I[7],colorErrorTextHover:I[8],colorErrorText:I[9],colorErrorTextActive:I[10],colorWarningBg:A[1],colorWarningBgHover:A[2],colorWarningBorder:A[3],colorWarningBorderHover:A[4],colorWarningHover:A[4],colorWarning:A[6],colorWarningActive:A[7],colorWarningTextHover:A[8],colorWarningText:A[9],colorWarningTextActive:A[10],colorInfoBg:w[1],colorInfoBgHover:w[2],colorInfoBorder:w[3],colorInfoBorderHover:w[4],colorInfoHover:w[4],colorInfo:w[6],colorInfoActive:w[7],colorInfoTextHover:w[8],colorInfoText:w[9],colorInfoTextActive:w[10],colorBgMask:new Bi("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const xne=e=>{let t=e,o=e,a=e,c=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?o=4:e<8&&e>=7?o=5:e<14&&e>=8?o=6:e<16&&e>=14?o=7:e>=16&&(o=8),e<6&&e>=2?a=1:e>=6&&(a=2),e>4&&e<8?c=4:e>=8&&(c=6),{borderRadius:e>16?16:e,borderRadiusXS:a,borderRadiusSM:o,borderRadiusLG:t,borderRadiusOuter:c}},Pne=xne;function Dne(e){const{motionUnit:t,motionBase:o,borderRadius:a,lineWidth:c}=e;return Object.assign({motionDurationFast:`${(o+t).toFixed(1)}s`,motionDurationMid:`${(o+t*2).toFixed(1)}s`,motionDurationSlow:`${(o+t*3).toFixed(1)}s`,lineWidthBold:c+1},Pne(a))}const mc=(e,t)=>new Bi(e).setAlpha(t).toRgbString(),rf=(e,t)=>new Bi(e).darken(t).toHexString(),kne=e=>{const t=Ac(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},Lne=(e,t)=>{const o=e||"#fff",a=t||"#000";return{colorBgBase:o,colorTextBase:a,colorText:mc(a,.88),colorTextSecondary:mc(a,.65),colorTextTertiary:mc(a,.45),colorTextQuaternary:mc(a,.25),colorFill:mc(a,.15),colorFillSecondary:mc(a,.06),colorFillTertiary:mc(a,.04),colorFillQuaternary:mc(a,.02),colorBgLayout:rf(o,4),colorBgContainer:rf(o,0),colorBgElevated:rf(o,0),colorBgSpotlight:mc(a,.85),colorBorder:rf(o,15),colorBorderSecondary:rf(o,6)}};function Mne(e){const t=new Array(10).fill(null).map((o,a)=>{const c=a-1,u=e*Math.pow(2.71828,c/5),h=a>1?Math.floor(u):Math.ceil(u);return Math.floor(h/2)*2});return t[1]=e,t.map(o=>{const a=o+8;return{size:o,lineHeight:a/o}})}const Une=e=>{const t=Mne(e),o=t.map(c=>c.size),a=t.map(c=>c.lineHeight);return{fontSizeSM:o[0],fontSize:o[1],fontSizeLG:o[2],fontSizeXL:o[3],fontSizeHeading1:o[6],fontSizeHeading2:o[5],fontSizeHeading3:o[4],fontSizeHeading4:o[3],fontSizeHeading5:o[2],lineHeight:a[1],lineHeightLG:a[2],lineHeightSM:a[0],lineHeightHeading1:a[6],lineHeightHeading2:a[5],lineHeightHeading3:a[4],lineHeightHeading4:a[3],lineHeightHeading5:a[2]}},o8=Une;function ym(e){const t=Object.keys(J1).map(o=>{const a=Ac(e[o]);return new Array(10).fill(1).reduce((c,u,h)=>(c[`${o}-${h+1}`]=a[h],c[`${o}${h+1}`]=a[h],c),{})}).reduce((o,a)=>(o=Object.assign(Object.assign({},o),a),o),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),i8(e,{generateColorPalettes:kne,generateNeutralColorPalettes:Lne})),o8(e.fontSize)),Ane(e)),r8(e)),Dne(e))}function Rb(e){return e>=0&&e<=255}function Vg(e,t){const{r:o,g:a,b:c,a:u}=new Bi(e).toRgb();if(u<1)return e;const{r:h,g:f,b:m}=new Bi(t).toRgb();for(let g=.01;g<=1;g+=.01){const _=Math.round((o-h*(1-g))/g),y=Math.round((a-f*(1-g))/g),b=Math.round((c-m*(1-g))/g);if(Rb(_)&&Rb(y)&&Rb(b))return new Bi({r:_,g:y,b,a:Math.round(g*100)/100}).toRgbString()}return new Bi({r:o,g:a,b:c,a:1}).toRgbString()}var Fne=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};function a8(e){const{override:t}=e,o=Fne(e,["override"]),a=Object.assign({},t);Object.keys(Sm).forEach(b=>{delete a[b]});const c=Object.assign(Object.assign({},o),a),u=480,h=576,f=768,m=992,g=1200,_=1600;if(c.motion===!1){const b="0s";c.motionDurationFast=b,c.motionDurationMid=b,c.motionDurationSlow=b}return Object.assign(Object.assign(Object.assign({},c),{colorLink:c.colorInfoText,colorLinkHover:c.colorInfoHover,colorLinkActive:c.colorInfoActive,colorFillContent:c.colorFillSecondary,colorFillContentHover:c.colorFill,colorFillAlter:c.colorFillQuaternary,colorBgContainerDisabled:c.colorFillTertiary,colorBorderBg:c.colorBgContainer,colorSplit:Vg(c.colorBorderSecondary,c.colorBgContainer),colorTextPlaceholder:c.colorTextQuaternary,colorTextDisabled:c.colorTextQuaternary,colorTextHeading:c.colorText,colorTextLabel:c.colorTextSecondary,colorTextDescription:c.colorTextTertiary,colorTextLightSolid:c.colorWhite,colorHighlight:c.colorError,colorBgTextHover:c.colorFillSecondary,colorBgTextActive:c.colorFill,colorIcon:c.colorTextTertiary,colorIconHover:c.colorText,colorErrorOutline:Vg(c.colorErrorBg,c.colorBgContainer),colorWarningOutline:Vg(c.colorWarningBg,c.colorBgContainer),fontSizeIcon:c.fontSizeSM,lineWidthFocus:c.lineWidth*4,lineWidth:c.lineWidth,controlOutlineWidth:c.lineWidth*2,controlInteractiveSize:c.controlHeight/2,controlItemBgHover:c.colorFillTertiary,controlItemBgActive:c.colorPrimaryBg,controlItemBgActiveHover:c.colorPrimaryBgHover,controlItemBgActiveDisabled:c.colorFill,controlTmpOutline:c.colorFillQuaternary,controlOutline:Vg(c.colorPrimaryBg,c.colorBgContainer),lineType:c.lineType,borderRadius:c.borderRadius,borderRadiusXS:c.borderRadiusXS,borderRadiusSM:c.borderRadiusSM,borderRadiusLG:c.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:c.sizeXXS,paddingXS:c.sizeXS,paddingSM:c.sizeSM,padding:c.size,paddingMD:c.sizeMD,paddingLG:c.sizeLG,paddingXL:c.sizeXL,paddingContentHorizontalLG:c.sizeLG,paddingContentVerticalLG:c.sizeMS,paddingContentHorizontal:c.sizeMS,paddingContentVertical:c.sizeSM,paddingContentHorizontalSM:c.size,paddingContentVerticalSM:c.sizeXS,marginXXS:c.sizeXXS,marginXS:c.sizeXS,marginSM:c.sizeSM,margin:c.size,marginMD:c.sizeMD,marginLG:c.sizeLG,marginXL:c.sizeXL,marginXXL:c.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:u,screenXSMin:u,screenXSMax:h-1,screenSM:h,screenSMMin:h,screenSMMax:f-1,screenMD:f,screenMDMin:f,screenMDMax:m-1,screenLG:m,screenLGMin:m,screenLGMax:g-1,screenXL:g,screenXLMin:g,screenXLMax:_-1,screenXXL:_,screenXXLMin:_,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Bi("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Bi("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Bi("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),a)}function ms(e){var t=S.useRef();t.current=e;var o=S.useCallback(function(){for(var a,c=arguments.length,u=new Array(c),h=0;h<c;h++)u[h]=arguments[h];return(a=t.current)===null||a===void 0?void 0:a.call.apply(a,[t].concat(u))},[]);return o}function Pu(e){var t=S.useRef(!1),o=S.useState(e),a=De(o,2),c=a[0],u=a[1];S.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function h(f,m){m&&t.current||u(f)}return[c,h]}function Ib(e){return e!==void 0}function Cc(e,t){var o=t||{},a=o.defaultValue,c=o.value,u=o.onChange,h=o.postState,f=Pu(function(){return Ib(c)?c:Ib(a)?typeof a=="function"?a():a:typeof e=="function"?e():e}),m=De(f,2),g=m[0],_=m[1],y=c!==void 0?c:g,b=h?h(y):y,A=ms(u),I=Pu([y]),w=De(I,2),D=w[0],x=w[1];XU(function(){var P=D[0];g!==P&&A(g,P)},[D]),XU(function(){Ib(c)||_(c)},[c]);var O=ms(function(P,M){_(P,M),x([y],M)});return[b,O]}const Q1="anticon",Vne=(e,t)=>t||(e?`ant-${e}`:"ant"),Hn=S.createContext({getPrefixCls:Vne,iconPrefixCls:Q1}),s8=e=>({color:e.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}}),jne=(e,t,o,a,c)=>{const u=e/2,h=0,f=u,m=o*1/Math.sqrt(2),g=u-o*(1-1/Math.sqrt(2)),_=u-t*(1/Math.sqrt(2)),y=o*(Math.sqrt(2)-1)+t*(1/Math.sqrt(2)),b=2*u-_,A=y,I=2*u-m,w=g,D=2*u-h,x=f,O=u*Math.sqrt(2)+o*(Math.sqrt(2)-2),P=o*(Math.sqrt(2)-1);return{pointerEvents:"none",width:e,height:e,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:e,height:e/2,background:a,clipPath:{_multi_value_:!0,value:[`polygon(${P}px 100%, 50% ${P}px, ${2*u-P}px 100%, ${P}px 100%)`,`path('M ${h} ${f} A ${o} ${o} 0 0 0 ${m} ${g} L ${_} ${y} A ${t} ${t} 0 0 1 ${b} ${A} L ${I} ${w} A ${o} ${o} 0 0 0 ${D} ${x} Z')`]},content:'""'},"&::after":{content:'""',position:"absolute",width:O,height:O,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${t}px 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:c,zIndex:0,background:"transparent"}}},Bne={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},Wu=e=>({boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:e.fontFamily}),c8=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),QR=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),$ne=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active,\n  &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),Hne=(e,t)=>{const{fontFamily:o,fontSize:a}=e,c=`[class^="${t}"], [class*=" ${t}"]`;return{[c]:{fontFamily:o,fontSize:a,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[c]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},l8=e=>({outline:`${e.lineWidthFocus}px solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),Wne=e=>({"&:focus-visible":Object.assign({},l8(e))});function Is(e,t,o,a){return c=>{const[u,h,f]=qh(),{getPrefixCls:m,iconPrefixCls:g,csp:_}=S.useContext(Hn),y=m(),b={theme:u,token:h,hashId:f,nonce:()=>_==null?void 0:_.nonce};return YR(Object.assign(Object.assign({},b),{path:["Shared",y]}),()=>[{"&":$ne(h)}]),[YR(Object.assign(Object.assign({},b),{path:[e,c,g]}),()=>{const{token:A,flush:I}=zne(h),w=Object.assign({},h[e]);if(a!=null&&a.deprecatedTokens){const{deprecatedTokens:V}=a;V.forEach(F=>{let[B,H]=F;var K;(w!=null&&w[B]||w!=null&&w[H])&&((K=w[H])!==null&&K!==void 0||(w[H]=w==null?void 0:w[B]))})}const D=typeof o=="function"?o(zi(A,w??{})):o,x=Object.assign(Object.assign({},D),w),O=`.${c}`,P=zi(A,{componentCls:O,prefixCls:c,iconCls:`.${g}`,antCls:`.${y}`},x),M=t(P,{hashId:f,prefixCls:c,rootPrefixCls:y,iconPrefixCls:g,overrideComponentToken:w});return I(e,x),[(a==null?void 0:a.resetStyle)===!1?null:Hne(h,c),M]}),f]}}const u8=typeof CSSINJS_STATISTIC<"u";let ZR=!0;function zi(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];if(!u8)return Object.assign.apply(Object,[{}].concat(t));ZR=!1;const a={};return t.forEach(c=>{Object.keys(c).forEach(h=>{Object.defineProperty(a,h,{configurable:!0,enumerable:!0,get:()=>c[h]})})}),ZR=!0,a}function Gne(){}function zne(e){let t,o=e,a=Gne;return u8&&(t=new Set,o=new Proxy(e,{get(c,u){return ZR&&t.add(u),c[u]}}),a=(c,u)=>{Array.from(t)}),{token:o,keys:t,flush:a}}function Kne(e,t){return cE.reduce((o,a)=>{const c=e[`${a}1`],u=e[`${a}3`],h=e[`${a}6`],f=e[`${a}7`];return Object.assign(Object.assign({},o),t(a,{lightColor:c,lightBorderColor:u,darkColor:h,textColor:f}))},{})}const Yne=sE(ym),lE={token:Sm,hashed:!0},d8=lt.createContext(lE);function qh(){const{token:e,hashed:t,theme:o,components:a}=lt.useContext(d8),c=`${lne}-${t||""}`,u=o||Yne,[h,f]=Cte(u,[Sm,e],{salt:c,override:Object.assign({override:e},a),formatToken:a8});return[u,h,t?f:""]}const qne=`-ant-${Date.now()}-${Math.random()}`;function Xne(e,t){const o={},a=(h,f)=>{let m=h.clone();return m=(f==null?void 0:f(m))||m,m.toRgbString()},c=(h,f)=>{const m=new Bi(h),g=Ac(m.toRgbString());o[`${f}-color`]=a(m),o[`${f}-color-disabled`]=g[1],o[`${f}-color-hover`]=g[4],o[`${f}-color-active`]=g[6],o[`${f}-color-outline`]=m.clone().setAlpha(.2).toRgbString(),o[`${f}-color-deprecated-bg`]=g[0],o[`${f}-color-deprecated-border`]=g[2]};if(t.primaryColor){c(t.primaryColor,"primary");const h=new Bi(t.primaryColor),f=Ac(h.toRgbString());f.forEach((g,_)=>{o[`primary-${_+1}`]=g}),o["primary-color-deprecated-l-35"]=a(h,g=>g.lighten(35)),o["primary-color-deprecated-l-20"]=a(h,g=>g.lighten(20)),o["primary-color-deprecated-t-20"]=a(h,g=>g.tint(20)),o["primary-color-deprecated-t-50"]=a(h,g=>g.tint(50)),o["primary-color-deprecated-f-12"]=a(h,g=>g.setAlpha(g.getAlpha()*.12));const m=new Bi(f[0]);o["primary-color-active-deprecated-f-30"]=a(m,g=>g.setAlpha(g.getAlpha()*.3)),o["primary-color-active-deprecated-d-02"]=a(m,g=>g.darken(2))}return t.successColor&&c(t.successColor,"success"),t.warningColor&&c(t.warningColor,"warning"),t.errorColor&&c(t.errorColor,"error"),t.infoColor&&c(t.infoColor,"info"),`
  :root {
    ${Object.keys(o).map(h=>`--${e}-${h}: ${o[h]};`).join(`
`)}
  }
  `.trim()}function Jne(e,t){const o=Xne(e,t);Go()&&Mh(o,`${qne}-dynamic-theme`)}const eI=S.createContext(!1),h8=e=>{let{children:t,disabled:o}=e;const a=S.useContext(eI);return S.createElement(eI.Provider,{value:o??a},t)},Cm=eI,Qne=e=>{const t=lt.useContext(c_);return lt.useMemo(()=>e?typeof e=="string"?e??t:e instanceof Function?e(t):t:t,[e,t])},Xh=Qne,p8=S.createContext(void 0),f8=e=>{let{children:t,size:o}=e;const a=Xh(o);return S.createElement(p8.Provider,{value:a},t)},c_=p8;function Zne(){const e=S.useContext(Cm),t=S.useContext(c_);return{componentDisabled:e,componentSize:t}}function ere(e,t){const o=e||{},a=o.inherit===!1||!t?lE:t;return r_(()=>{if(!e)return t;const u=Object.assign({},a.components);return Object.keys(e.components||{}).forEach(h=>{u[h]=Object.assign(Object.assign({},u[h]),e.components[h])}),Object.assign(Object.assign(Object.assign({},a),o),{token:Object.assign(Object.assign({},a.token),o.token),components:u})},[o,a],(u,h)=>u.some((f,m)=>{const g=h[m];return!W1(f,g,!0)}))}var tre=["children"],m8=S.createContext({});function nre(e){var t=e.children,o=dn(e,tre);return S.createElement(m8.Provider,{value:o},t)}var rre=function(e){Gh(o,e);var t=zh(o);function o(){return za(this,o),t.apply(this,arguments)}return Ka(o,[{key:"render",value:function(){return this.props.children}}]),o}(S.Component),Su="none",jg="appear",Bg="enter",$g="leave",p4="none",hs="prepare",vh="start",Eh="active",Z1="end",g8="prepared";function f4(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit".concat(e)]="webkit".concat(t),o["Moz".concat(e)]="moz".concat(t),o["ms".concat(e)]="MS".concat(t),o["O".concat(e)]="o".concat(t.toLowerCase()),o}function ire(e,t){var o={animationend:f4("Animation","AnimationEnd"),transitionend:f4("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete o.animationend.animation,"TransitionEvent"in t||delete o.transitionend.transition),o}var ore=ire(Go(),typeof window<"u"?window:{}),v8={};if(Go()){var are=document.createElement("div");v8=are.style}var Hg={};function E8(e){if(Hg[e])return Hg[e];var t=ore[e];if(t)for(var o=Object.keys(t),a=o.length,c=0;c<a;c+=1){var u=o[c];if(Object.prototype.hasOwnProperty.call(t,u)&&u in v8)return Hg[e]=t[u],Hg[e]}return""}var _8=E8("animationend"),S8=E8("transitionend"),y8=!!(_8&&S8),m4=_8||"animationend",g4=S8||"transitionend";function v4(e,t){if(!e)return null;if(Rn(e)==="object"){var o=t.replace(/-\w/g,function(a){return a[1].toUpperCase()});return e[o]}return"".concat(e,"-").concat(t)}const sre=function(e){var t=S.useRef(),o=S.useRef(e);o.current=e;var a=S.useCallback(function(h){o.current(h)},[]);function c(h){h&&(h.removeEventListener(g4,a),h.removeEventListener(m4,a))}function u(h){t.current&&t.current!==h&&c(t.current),h&&h!==t.current&&(h.addEventListener(g4,a),h.addEventListener(m4,a),t.current=h)}return S.useEffect(function(){return function(){c(t.current)}},[]),[u,c]};var C8=Go()?S.useLayoutEffect:S.useEffect;const cre=function(){var e=S.useRef(null);function t(){Hi.cancel(e.current)}function o(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var u=Hi(function(){c<=1?a({isCanceled:function(){return u!==e.current}}):o(a,c-1)});e.current=u}return S.useEffect(function(){return function(){t()}},[]),[o,t]};var lre=[hs,vh,Eh,Z1],ure=[hs,g8],b8=!1,dre=!0;function T8(e){return e===Eh||e===Z1}const hre=function(e,t,o){var a=Pu(p4),c=De(a,2),u=c[0],h=c[1],f=cre(),m=De(f,2),g=m[0],_=m[1];function y(){h(hs,!0)}var b=t?ure:lre;return C8(function(){if(u!==p4&&u!==Z1){var A=b.indexOf(u),I=b[A+1],w=o(u);w===b8?h(I,!0):I&&g(function(D){function x(){D.isCanceled()||h(I,!0)}w===!0?x():Promise.resolve(w).then(x)})}},[e,u]),S.useEffect(function(){return function(){_()}},[]),[y,u]};function pre(e,t,o,a){var c=a.motionEnter,u=c===void 0?!0:c,h=a.motionAppear,f=h===void 0?!0:h,m=a.motionLeave,g=m===void 0?!0:m,_=a.motionDeadline,y=a.motionLeaveImmediately,b=a.onAppearPrepare,A=a.onEnterPrepare,I=a.onLeavePrepare,w=a.onAppearStart,D=a.onEnterStart,x=a.onLeaveStart,O=a.onAppearActive,P=a.onEnterActive,M=a.onLeaveActive,V=a.onAppearEnd,F=a.onEnterEnd,B=a.onLeaveEnd,H=a.onVisibleChanged,K=Pu(),$=De(K,2),Z=$[0],z=$[1],G=Pu(Su),ee=De(G,2),re=ee[0],oe=ee[1],pe=Pu(null),ue=De(pe,2),me=ue[0],fe=ue[1],se=S.useRef(!1),ae=S.useRef(null);function de(){return o()}var ce=S.useRef(!1);function we(){oe(Su,!0),fe(null,!0)}function Ie(qe){var Ge=de();if(!(qe&&!qe.deadline&&qe.target!==Ge)){var nt=ce.current,mt;re===jg&&nt?mt=V==null?void 0:V(Ge,qe):re===Bg&&nt?mt=F==null?void 0:F(Ge,qe):re===$g&&nt&&(mt=B==null?void 0:B(Ge,qe)),re!==Su&&nt&&mt!==!1&&we()}}var He=sre(Ie),Le=De(He,1),ft=Le[0],gt=function(Ge){var nt,mt,bt;switch(Ge){case jg:return nt={},Qe(nt,hs,b),Qe(nt,vh,w),Qe(nt,Eh,O),nt;case Bg:return mt={},Qe(mt,hs,A),Qe(mt,vh,D),Qe(mt,Eh,P),mt;case $g:return bt={},Qe(bt,hs,I),Qe(bt,vh,x),Qe(bt,Eh,M),bt;default:return{}}},at=S.useMemo(function(){return gt(re)},[re]),rt=hre(re,!e,function(qe){if(qe===hs){var Ge=at[hs];return Ge?Ge(de()):b8}if(yt in at){var nt;fe(((nt=at[yt])===null||nt===void 0?void 0:nt.call(at,de(),null))||null)}return yt===Eh&&(ft(de()),_>0&&(clearTimeout(ae.current),ae.current=setTimeout(function(){Ie({deadline:!0})},_))),yt===g8&&we(),dre}),pt=De(rt,2),Ye=pt[0],yt=pt[1],kt=T8(yt);ce.current=kt,C8(function(){z(t);var qe=se.current;se.current=!0;var Ge;!qe&&t&&f&&(Ge=jg),qe&&t&&u&&(Ge=Bg),(qe&&!t&&g||!qe&&y&&!t&&g)&&(Ge=$g);var nt=gt(Ge);Ge&&(e||nt[hs])?(oe(Ge),Ye()):oe(Su)},[t]),S.useEffect(function(){(re===jg&&!f||re===Bg&&!u||re===$g&&!g)&&oe(Su)},[f,u,g]),S.useEffect(function(){return function(){se.current=!1,clearTimeout(ae.current)}},[]);var Lt=S.useRef(!1);S.useEffect(function(){Z&&(Lt.current=!0),Z!==void 0&&re===Su&&((Lt.current||Z)&&(H==null||H(Z)),Lt.current=!0)},[Z,re]);var Xe=me;return at[hs]&&yt===vh&&(Xe=ve({transition:"none"},Xe)),[re,yt,Xe,Z??t]}function fre(e){var t=e;Rn(e)==="object"&&(t=e.transitionSupport);function o(c,u){return!!(c.motionName&&t&&u!==!1)}var a=S.forwardRef(function(c,u){var h=c.visible,f=h===void 0?!0:h,m=c.removeOnLeave,g=m===void 0?!0:m,_=c.forceRender,y=c.children,b=c.motionName,A=c.leavedClassName,I=c.eventProps,w=S.useContext(m8),D=w.motion,x=o(c,D),O=S.useRef(),P=S.useRef();function M(){try{return O.current instanceof HTMLElement?O.current:VR(P.current)}catch{return null}}var V=pre(x,f,M,c),F=De(V,4),B=F[0],H=F[1],K=F[2],$=F[3],Z=S.useRef($);$&&(Z.current=!0);var z=S.useCallback(function(fe){O.current=fe,V1(u,fe)},[u]),G,ee=ve(ve({},I),{},{visible:f});if(!y)G=null;else if(B===Su)$?G=y(ve({},ee),z):!g&&Z.current&&A?G=y(ve(ve({},ee),{},{className:A}),z):_||!g&&!A?G=y(ve(ve({},ee),{},{style:{display:"none"}}),z):G=null;else{var re,oe;H===hs?oe="prepare":T8(H)?oe="active":H===vh&&(oe="start");var pe=v4(b,"".concat(B,"-").concat(oe));G=y(ve(ve({},ee),{},{className:Be(v4(b,B),(re={},Qe(re,pe,pe&&oe),Qe(re,b,typeof b=="string"),re)),style:K}),z)}if(S.isValidElement(G)&&Kh(G)){var ue=G,me=ue.ref;me||(G=S.cloneElement(G,{ref:z}))}return S.createElement(rre,{ref:P},G)});return a.displayName="CSSMotion",a}const Gu=fre(y8);var tI="add",nI="keep",rI="remove",wb="removed";function mre(e){var t;return e&&Rn(e)==="object"&&"key"in e?t=e:t={key:e},ve(ve({},t),{},{key:String(t.key)})}function iI(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(mre)}function gre(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=[],a=0,c=t.length,u=iI(e),h=iI(t);u.forEach(function(g){for(var _=!1,y=a;y<c;y+=1){var b=h[y];if(b.key===g.key){a<y&&(o=o.concat(h.slice(a,y).map(function(A){return ve(ve({},A),{},{status:tI})})),a=y),o.push(ve(ve({},b),{},{status:nI})),a+=1,_=!0;break}}_||o.push(ve(ve({},g),{},{status:rI}))}),a<c&&(o=o.concat(h.slice(a).map(function(g){return ve(ve({},g),{},{status:tI})})));var f={};o.forEach(function(g){var _=g.key;f[_]=(f[_]||0)+1});var m=Object.keys(f).filter(function(g){return f[g]>1});return m.forEach(function(g){o=o.filter(function(_){var y=_.key,b=_.status;return y!==g||b!==rI}),o.forEach(function(_){_.key===g&&(_.status=nI)})}),o}var vre=["component","children","onVisibleChanged","onAllRemoved"],Ere=["status"],_re=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function Sre(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gu,o=function(a){Gh(u,a);var c=zh(u);function u(){var h;za(this,u);for(var f=arguments.length,m=new Array(f),g=0;g<f;g++)m[g]=arguments[g];return h=c.call.apply(c,[this].concat(m)),Qe(tE(h),"state",{keyEntities:[]}),Qe(tE(h),"removeKey",function(_){var y=h.state.keyEntities,b=y.map(function(A){return A.key!==_?A:ve(ve({},A),{},{status:wb})});return h.setState({keyEntities:b}),b.filter(function(A){var I=A.status;return I!==wb}).length}),h}return Ka(u,[{key:"render",value:function(){var f=this,m=this.state.keyEntities,g=this.props,_=g.component,y=g.children,b=g.onVisibleChanged,A=g.onAllRemoved,I=dn(g,vre),w=_||S.Fragment,D={};return _re.forEach(function(x){D[x]=I[x],delete I[x]}),delete I.keys,S.createElement(w,I,m.map(function(x){var O=x.status,P=dn(x,Ere),M=O===tI||O===nI;return S.createElement(t,xe({},D,{key:P.key,visible:M,eventProps:P,onVisibleChanged:function(F){if(b==null||b(F,{key:P.key}),!F){var B=f.removeKey(P.key);B===0&&A&&A()}}}),y)}))}}],[{key:"getDerivedStateFromProps",value:function(f,m){var g=f.keys,_=m.keyEntities,y=iI(g),b=gre(_,y);return{keyEntities:b.filter(function(A){var I=_.find(function(w){var D=w.key;return A.key===D});return!(I&&I.status===wb&&A.status===rI)})}}}]),u}(S.Component);return Qe(o,"defaultProps",{component:"div"}),o}const R8=Sre(y8);function yre(e){const{children:t}=e,[,o]=qh(),{motion:a}=o,c=S.useRef(!1);return c.current=c.current||a===!1,c.current?S.createElement(nre,{motion:a},t):t}const Cre=(e,t)=>{const[o,a]=qh();return YR({theme:o,token:a,hashId:"",path:["ant-design-icons",e],nonce:()=>t==null?void 0:t.nonce},()=>[{[`.${e}`]:Object.assign(Object.assign({},c8()),{[`.${e} .${e}-icon`]:{display:"block"}})}])},bre=Cre;var Tre=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const Rre=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select","button"],Ire="ant";let uE,I8,w8;function yv(){return uE||Ire}function wre(){return I8||Q1}function Ore(e){return Object.keys(e).some(t=>t.endsWith("Color"))}const Are=e=>{let{prefixCls:t,iconPrefixCls:o,theme:a}=e;t!==void 0&&(uE=t),o!==void 0&&(I8=o),a&&(Ore(a)?Jne(yv(),a):w8=a)},O8=()=>({getPrefixCls:(e,t)=>t||(e?`${yv()}-${e}`:yv()),getIconPrefixCls:wre,getRootPrefixCls:()=>uE||yv(),getTheme:()=>w8}),Nre=e=>{const{children:t,csp:o,autoInsertSpaceInButton:a,form:c,locale:u,componentSize:h,direction:f,space:m,virtual:g,dropdownMatchSelectWidth:_,popupMatchSelectWidth:y,popupOverflow:b,legacyLocale:A,parentContext:I,iconPrefixCls:w,theme:D,componentDisabled:x}=e,O=S.useCallback((re,oe)=>{const{prefixCls:pe}=e;if(oe)return oe;const ue=pe||I.getPrefixCls("");return re?`${ue}-${re}`:ue},[I.getPrefixCls,e.prefixCls]),P=w||I.iconPrefixCls||Q1,M=P!==I.iconPrefixCls,V=o||I.csp,F=bre(P,V),B=ere(D,I.theme),H={csp:V,autoInsertSpaceInButton:a,locale:u||A,direction:f,space:m,virtual:g,popupMatchSelectWidth:y??_,popupOverflow:b,getPrefixCls:O,iconPrefixCls:P,theme:B},K=Object.assign({},I);Object.keys(H).forEach(re=>{H[re]!==void 0&&(K[re]=H[re])}),Rre.forEach(re=>{const oe=e[re];oe&&(K[re]=oe)});const $=r_(()=>K,K,(re,oe)=>{const pe=Object.keys(re),ue=Object.keys(oe);return pe.length!==ue.length||pe.some(me=>re[me]!==oe[me])}),Z=S.useMemo(()=>({prefixCls:P,csp:V}),[P,V]);let z=M?F(t):t;const G=S.useMemo(()=>{var re,oe,pe;return gh(((re=Fh.Form)===null||re===void 0?void 0:re.defaultValidateMessages)||{},((pe=(oe=$.locale)===null||oe===void 0?void 0:oe.Form)===null||pe===void 0?void 0:pe.defaultValidateMessages)||{},(c==null?void 0:c.validateMessages)||{})},[$,c==null?void 0:c.validateMessages]);Object.keys(G).length>0&&(z=S.createElement(JB.Provider,{value:G},t)),u&&(z=S.createElement(cne,{locale:u,_ANT_MARK__:ane},z)),(P||V)&&(z=S.createElement(q1.Provider,{value:Z},z)),h&&(z=S.createElement(f8,{size:h},z)),z=S.createElement(yre,null,z);const ee=S.useMemo(()=>{const re=B||{},{algorithm:oe,token:pe}=re,ue=Tre(re,["algorithm","token"]),me=oe&&(!Array.isArray(oe)||oe.length>0)?sE(oe):void 0;return Object.assign(Object.assign({},ue),{theme:me,token:Object.assign(Object.assign({},Sm),pe)})},[B]);return D&&(z=S.createElement(d8.Provider,{value:ee},z)),x!==void 0&&(z=S.createElement(h8,{disabled:x},z)),S.createElement(Hn.Provider,{value:$},z)},Jh=e=>{const t=S.useContext(Hn),o=S.useContext(X1);return S.createElement(Nre,Object.assign({parentContext:t,legacyLocale:o},e))};Jh.ConfigContext=Hn;Jh.SizeContext=c_;Jh.config=Are;Jh.useConfig=Zne;Object.defineProperty(Jh,"SizeContext",{get:()=>c_});var xre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const Pre=xre;function A8(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}function Dre(e){return A8(e)!==(e==null?void 0:e.ownerDocument)}function dE(e){return Dre(e)?A8(e):null}function kre(e,t){yo(e,"[@ant-design/icons] ".concat(t))}function E4(e){return Rn(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(Rn(e.icon)==="object"||typeof e.icon=="function")}function _4(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,o){var a=e[o];switch(o){case"class":t.className=a,delete t.class;break;default:t[o]=a}return t},{})}function oI(e,t,o){return o?lt.createElement(e.tag,ve(ve({key:t},_4(e.attrs)),o),(e.children||[]).map(function(a,c){return oI(a,"".concat(t,"-").concat(e.tag,"-").concat(c))})):lt.createElement(e.tag,ve({key:t},_4(e.attrs)),(e.children||[]).map(function(a,c){return oI(a,"".concat(t,"-").concat(e.tag,"-").concat(c))}))}function N8(e){return Ac(e)[0]}function x8(e){return e?Array.isArray(e)?e:[e]:[]}var Lre=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Mre=function(t){var o=S.useContext(q1),a=o.csp,c=o.prefixCls,u=Lre;c&&(u=u.replace(/anticon/g,c)),S.useEffect(function(){var h=t.current,f=dE(h);Mh(u,"@ant-design-icons",{prepend:!0,csp:a,attachTo:f})},[])},Ure=["icon","className","onClick","style","primaryColor","secondaryColor"],xf={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function Fre(e){var t=e.primaryColor,o=e.secondaryColor;xf.primaryColor=t,xf.secondaryColor=o||N8(t),xf.calculated=!!o}function Vre(){return ve({},xf)}var l_=function(t){var o=t.icon,a=t.className,c=t.onClick,u=t.style,h=t.primaryColor,f=t.secondaryColor,m=dn(t,Ure),g=S.useRef(),_=xf;if(h&&(_={primaryColor:h,secondaryColor:f||N8(h)}),Mre(g),kre(E4(o),"icon should be icon definiton, but got ".concat(o)),!E4(o))return null;var y=o;return y&&typeof y.icon=="function"&&(y=ve(ve({},y),{},{icon:y.icon(_.primaryColor,_.secondaryColor)})),oI(y.icon,"svg-".concat(y.name),ve(ve({className:a,onClick:c,style:u,"data-icon":y.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},m),{},{ref:g}))};l_.displayName="IconReact";l_.getTwoToneColors=Vre;l_.setTwoToneColors=Fre;const ew=l_;function P8(e){var t=x8(e),o=De(t,2),a=o[0],c=o[1];return ew.setTwoToneColors({primaryColor:a,secondaryColor:c})}function jre(){var e=ew.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var Bre=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];P8(wne.primary);var u_=S.forwardRef(function(e,t){var o,a=e.className,c=e.icon,u=e.spin,h=e.rotate,f=e.tabIndex,m=e.onClick,g=e.twoToneColor,_=dn(e,Bre),y=S.useContext(q1),b=y.prefixCls,A=b===void 0?"anticon":b,I=y.rootClassName,w=Be(I,A,(o={},Qe(o,"".concat(A,"-").concat(c.name),!!c.name),Qe(o,"".concat(A,"-spin"),!!u||c.name==="loading"),o),a),D=f;D===void 0&&m&&(D=-1);var x=h?{msTransform:"rotate(".concat(h,"deg)"),transform:"rotate(".concat(h,"deg)")}:void 0,O=x8(g),P=De(O,2),M=P[0],V=P[1];return S.createElement("span",xe({role:"img","aria-label":c.name},_,{ref:t,tabIndex:D,onClick:m,className:w}),S.createElement(ew,{icon:c,primaryColor:M,secondaryColor:V,style:x}))});u_.displayName="AntdIcon";u_.getTwoToneColor=jre;u_.setTwoToneColor=P8;const Ni=u_;var $re=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:Pre}))};const D8=S.forwardRef($re);var Hre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"};const Wre=Hre;var Gre=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:Wre}))};const d_=S.forwardRef(Gre);var zre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"};const Kre=zre;var Yre=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:Kre}))};const qre=S.forwardRef(Yre);var Xre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const Jre=Xre;var Qre=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:Jre}))};const k8=S.forwardRef(Qre);var Zre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const eie=Zre;var tie=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:eie}))};const nie=S.forwardRef(tie),{isValidElement:Ll}=wh;function L8(e){return e&&Ll(e)&&e.type===S.Fragment}function rie(e,t,o){return Ll(e)?S.cloneElement(e,typeof o=="function"?o(e.props||{}):o):t}function Cs(e,t){return rie(e,e,t)}const S4=e=>typeof e=="object"&&e!=null&&e.nodeType===1,y4=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",Ob=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const o=getComputedStyle(e,null);return y4(o.overflowY,t)||y4(o.overflowX,t)||(a=>{const c=(u=>{if(!u.ownerDocument||!u.ownerDocument.defaultView)return null;try{return u.ownerDocument.defaultView.frameElement}catch{return null}})(a);return!!c&&(c.clientHeight<a.scrollHeight||c.clientWidth<a.scrollWidth)})(e)}return!1},Wg=(e,t,o,a,c,u,h,f)=>u<e&&h>t||u>e&&h<t?0:u<=e&&f<=o||h>=t&&f>=o?u-e-a:h>t&&f<o||u<e&&f>o?h-t+c:0,iie=e=>{const t=e.parentElement;return t??(e.getRootNode().host||null)},C4=(e,t)=>{var o,a,c,u;if(typeof document>"u")return[];const{scrollMode:h,block:f,inline:m,boundary:g,skipOverflowHiddenElements:_}=t,y=typeof g=="function"?g:z=>z!==g;if(!S4(e))throw new TypeError("Invalid target");const b=document.scrollingElement||document.documentElement,A=[];let I=e;for(;S4(I)&&y(I);){if(I=iie(I),I===b){A.push(I);break}I!=null&&I===document.body&&Ob(I)&&!Ob(document.documentElement)||I!=null&&Ob(I,_)&&A.push(I)}const w=(a=(o=window.visualViewport)==null?void 0:o.width)!=null?a:innerWidth,D=(u=(c=window.visualViewport)==null?void 0:c.height)!=null?u:innerHeight,{scrollX:x,scrollY:O}=window,{height:P,width:M,top:V,right:F,bottom:B,left:H}=e.getBoundingClientRect();let K=f==="start"||f==="nearest"?V:f==="end"?B:V+P/2,$=m==="center"?H+M/2:m==="end"?F:H;const Z=[];for(let z=0;z<A.length;z++){const G=A[z],{height:ee,width:re,top:oe,right:pe,bottom:ue,left:me}=G.getBoundingClientRect();if(h==="if-needed"&&V>=0&&H>=0&&B<=D&&F<=w&&V>=oe&&B<=ue&&H>=me&&F<=pe)return Z;const fe=getComputedStyle(G),se=parseInt(fe.borderLeftWidth,10),ae=parseInt(fe.borderTopWidth,10),de=parseInt(fe.borderRightWidth,10),ce=parseInt(fe.borderBottomWidth,10);let we=0,Ie=0;const He="offsetWidth"in G?G.offsetWidth-G.clientWidth-se-de:0,Le="offsetHeight"in G?G.offsetHeight-G.clientHeight-ae-ce:0,ft="offsetWidth"in G?G.offsetWidth===0?0:re/G.offsetWidth:0,gt="offsetHeight"in G?G.offsetHeight===0?0:ee/G.offsetHeight:0;if(b===G)we=f==="start"?K:f==="end"?K-D:f==="nearest"?Wg(O,O+D,D,ae,ce,O+K,O+K+P,P):K-D/2,Ie=m==="start"?$:m==="center"?$-w/2:m==="end"?$-w:Wg(x,x+w,w,se,de,x+$,x+$+M,M),we=Math.max(0,we+O),Ie=Math.max(0,Ie+x);else{we=f==="start"?K-oe-ae:f==="end"?K-ue+ce+Le:f==="nearest"?Wg(oe,ue,ee,ae,ce+Le,K,K+P,P):K-(oe+ee/2)+Le/2,Ie=m==="start"?$-me-se:m==="center"?$-(me+re/2)+He/2:m==="end"?$-pe+de+He:Wg(me,pe,re,se,de+He,$,$+M,M);const{scrollLeft:at,scrollTop:rt}=G;we=Math.max(0,Math.min(rt+we/gt,G.scrollHeight-ee/gt+Le)),Ie=Math.max(0,Math.min(at+Ie/ft,G.scrollWidth-re/ft+He)),K+=rt-we,$+=at-Ie}Z.push({el:G,top:we,left:Ie})}return Z},oie=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function aie(e,t){if(!e.isConnected||!(a=>{let c=a;for(;c&&c.parentNode;){if(c.parentNode===document)return!0;c=c.parentNode instanceof ShadowRoot?c.parentNode.host:c.parentNode}return!1})(e))return;if((a=>typeof a=="object"&&typeof a.behavior=="function")(t))return t.behavior(C4(e,t));const o=typeof t=="boolean"||t==null?void 0:t.behavior;for(const{el:a,top:c,left:u}of C4(e,oie(t)))a.scroll({top:c,left:u,behavior:o})}var ht={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var o=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||o>=ht.F1&&o<=ht.F12)return!1;switch(o){case ht.ALT:case ht.CAPS_LOCK:case ht.CONTEXT_MENU:case ht.CTRL:case ht.DOWN:case ht.END:case ht.ESC:case ht.HOME:case ht.INSERT:case ht.LEFT:case ht.MAC_FF_META:case ht.META:case ht.NUMLOCK:case ht.NUM_CENTER:case ht.PAGE_DOWN:case ht.PAGE_UP:case ht.PAUSE:case ht.PRINT_SCREEN:case ht.RIGHT:case ht.SHIFT:case ht.UP:case ht.WIN_KEY:case ht.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=ht.ZERO&&t<=ht.NINE||t>=ht.NUM_ZERO&&t<=ht.NUM_MULTIPLY||t>=ht.A&&t<=ht.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case ht.SPACE:case ht.QUESTION_MARK:case ht.NUM_PLUS:case ht.NUM_MINUS:case ht.NUM_PERIOD:case ht.NUM_DIVISION:case ht.SEMICOLON:case ht.DASH:case ht.EQUALS:case ht.COMMA:case ht.PERIOD:case ht.SLASH:case ht.APOSTROPHE:case ht.SINGLE_QUOTE:case ht.OPEN_SQUARE_BRACKET:case ht.BACKSLASH:case ht.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},sie=S.forwardRef(function(e,t){var o=e.prefixCls,a=e.style,c=e.className,u=e.duration,h=u===void 0?4.5:u,f=e.eventKey,m=e.content,g=e.closable,_=e.closeIcon,y=_===void 0?"x":_,b=e.props,A=e.onClick,I=e.onNoticeClose,w=e.times,D=S.useState(!1),x=De(D,2),O=x[0],P=x[1],M=function(){I(f)},V=function(H){(H.key==="Enter"||H.code==="Enter"||H.keyCode===ht.ENTER)&&M()};S.useEffect(function(){if(!O&&h>0){var B=setTimeout(function(){M()},h*1e3);return function(){clearTimeout(B)}}},[h,O,w]);var F="".concat(o,"-notice");return S.createElement("div",xe({},b,{ref:t,className:Be(F,c,Qe({},"".concat(F,"-closable"),g)),style:a,onMouseEnter:function(){P(!0)},onMouseLeave:function(){P(!1)},onClick:A}),S.createElement("div",{className:"".concat(F,"-content")},m),g&&S.createElement("a",{tabIndex:0,className:"".concat(F,"-close"),onKeyDown:V,onClick:function(H){H.preventDefault(),H.stopPropagation(),M()}},y))});const M8=sie;var cie=S.forwardRef(function(e,t){var o=e.prefixCls,a=o===void 0?"rc-notification":o,c=e.container,u=e.motion,h=e.maxCount,f=e.className,m=e.style,g=e.onAllRemoved,_=S.useState([]),y=De(_,2),b=y[0],A=y[1],I=function(B){var H,K=b.find(function($){return $.key===B});K==null||(H=K.onClose)===null||H===void 0||H.call(K),A(function($){return $.filter(function(Z){return Z.key!==B})})};S.useImperativeHandle(t,function(){return{open:function(B){A(function(H){var K=Ze(H),$=K.findIndex(function(G){return G.key===B.key}),Z=ve({},B);if($>=0){var z;Z.times=(((z=H[$])===null||z===void 0?void 0:z.times)||0)+1,K[$]=Z}else Z.times=0,K.push(Z);return h>0&&K.length>h&&(K=K.slice(-h)),K})},close:function(B){I(B)},destroy:function(){A([])}}});var w=S.useState({}),D=De(w,2),x=D[0],O=D[1];S.useEffect(function(){var F={};b.forEach(function(B){var H=B.placement,K=H===void 0?"topRight":H;K&&(F[K]=F[K]||[],F[K].push(B))}),Object.keys(x).forEach(function(B){F[B]=F[B]||[]}),O(F)},[b]);var P=function(B){O(function(H){var K=ve({},H),$=K[B]||[];return $.length||delete K[B],K})},M=S.useRef(!1);if(S.useEffect(function(){Object.keys(x).length>0?M.current=!0:M.current&&(g==null||g(),M.current=!1)},[x]),!c)return null;var V=Object.keys(x);return Bl.createPortal(S.createElement(S.Fragment,null,V.map(function(F){var B=x[F],H=B.map(function($){return{config:$,key:$.key}}),K=typeof u=="function"?u(F):u;return S.createElement(R8,xe({key:F,className:Be(a,"".concat(a,"-").concat(F),f==null?void 0:f(F)),style:m==null?void 0:m(F),keys:H,motionAppear:!0},K,{onAllRemoved:function(){P(F)}}),function($,Z){var z=$.config,G=$.className,ee=$.style,re=z.key,oe=z.times,pe=z.className,ue=z.style;return S.createElement(M8,xe({},z,{ref:Z,prefixCls:a,className:Be(G,pe),style:ve(ve({},ee),ue),times:oe,key:re,eventKey:re,onNoticeClose:I}))})})),c)}),lie=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],uie=function(){return document.body},b4=0;function die(){for(var e={},t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return o.forEach(function(c){c&&Object.keys(c).forEach(function(u){var h=c[u];h!==void 0&&(e[u]=h)})}),e}function hie(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.getContainer,o=t===void 0?uie:t,a=e.motion,c=e.prefixCls,u=e.maxCount,h=e.className,f=e.style,m=e.onAllRemoved,g=dn(e,lie),_=S.useState(),y=De(_,2),b=y[0],A=y[1],I=S.useRef(),w=S.createElement(cie,{container:b,ref:I,prefixCls:c,motion:a,maxCount:u,className:h,style:f,onAllRemoved:m}),D=S.useState([]),x=De(D,2),O=x[0],P=x[1],M=S.useMemo(function(){return{open:function(F){var B=die(g,F);(B.key===null||B.key===void 0)&&(B.key="rc-notification-".concat(b4),b4+=1),P(function(H){return[].concat(Ze(H),[{type:"open",config:B}])})},close:function(F){P(function(B){return[].concat(Ze(B),[{type:"close",key:F}])})},destroy:function(){P(function(F){return[].concat(Ze(F),[{type:"destroy"}])})}}},[]);return S.useEffect(function(){A(o())}),S.useEffect(function(){I.current&&O.length&&(O.forEach(function(V){switch(V.type){case"open":I.current.open(V.config);break;case"close":I.current.close(V.key);break;case"destroy":I.current.destroy();break}}),P([]))},[O]),[M,w]}var pie={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const fie=pie;var mie=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:fie}))};const U8=S.forwardRef(mie);function _a(){_a=function(){return e};var e={},t=Object.prototype,o=t.hasOwnProperty,a=Object.defineProperty||function(z,G,ee){z[G]=ee.value},c=typeof Symbol=="function"?Symbol:{},u=c.iterator||"@@iterator",h=c.asyncIterator||"@@asyncIterator",f=c.toStringTag||"@@toStringTag";function m(z,G,ee){return Object.defineProperty(z,G,{value:ee,enumerable:!0,configurable:!0,writable:!0}),z[G]}try{m({},"")}catch{m=function(ee,re,oe){return ee[re]=oe}}function g(z,G,ee,re){var oe=G&&G.prototype instanceof b?G:b,pe=Object.create(oe.prototype),ue=new K(re||[]);return a(pe,"_invoke",{value:V(z,ee,ue)}),pe}function _(z,G,ee){try{return{type:"normal",arg:z.call(G,ee)}}catch(re){return{type:"throw",arg:re}}}e.wrap=g;var y={};function b(){}function A(){}function I(){}var w={};m(w,u,function(){return this});var D=Object.getPrototypeOf,x=D&&D(D($([])));x&&x!==t&&o.call(x,u)&&(w=x);var O=I.prototype=b.prototype=Object.create(w);function P(z){["next","throw","return"].forEach(function(G){m(z,G,function(ee){return this._invoke(G,ee)})})}function M(z,G){function ee(oe,pe,ue,me){var fe=_(z[oe],z,pe);if(fe.type!=="throw"){var se=fe.arg,ae=se.value;return ae&&Rn(ae)=="object"&&o.call(ae,"__await")?G.resolve(ae.__await).then(function(de){ee("next",de,ue,me)},function(de){ee("throw",de,ue,me)}):G.resolve(ae).then(function(de){se.value=de,ue(se)},function(de){return ee("throw",de,ue,me)})}me(fe.arg)}var re;a(this,"_invoke",{value:function(pe,ue){function me(){return new G(function(fe,se){ee(pe,ue,fe,se)})}return re=re?re.then(me,me):me()}})}function V(z,G,ee){var re="suspendedStart";return function(oe,pe){if(re==="executing")throw new Error("Generator is already running");if(re==="completed"){if(oe==="throw")throw pe;return Z()}for(ee.method=oe,ee.arg=pe;;){var ue=ee.delegate;if(ue){var me=F(ue,ee);if(me){if(me===y)continue;return me}}if(ee.method==="next")ee.sent=ee._sent=ee.arg;else if(ee.method==="throw"){if(re==="suspendedStart")throw re="completed",ee.arg;ee.dispatchException(ee.arg)}else ee.method==="return"&&ee.abrupt("return",ee.arg);re="executing";var fe=_(z,G,ee);if(fe.type==="normal"){if(re=ee.done?"completed":"suspendedYield",fe.arg===y)continue;return{value:fe.arg,done:ee.done}}fe.type==="throw"&&(re="completed",ee.method="throw",ee.arg=fe.arg)}}}function F(z,G){var ee=G.method,re=z.iterator[ee];if(re===void 0)return G.delegate=null,ee==="throw"&&z.iterator.return&&(G.method="return",G.arg=void 0,F(z,G),G.method==="throw")||ee!=="return"&&(G.method="throw",G.arg=new TypeError("The iterator does not provide a '"+ee+"' method")),y;var oe=_(re,z.iterator,G.arg);if(oe.type==="throw")return G.method="throw",G.arg=oe.arg,G.delegate=null,y;var pe=oe.arg;return pe?pe.done?(G[z.resultName]=pe.value,G.next=z.nextLoc,G.method!=="return"&&(G.method="next",G.arg=void 0),G.delegate=null,y):pe:(G.method="throw",G.arg=new TypeError("iterator result is not an object"),G.delegate=null,y)}function B(z){var G={tryLoc:z[0]};1 in z&&(G.catchLoc=z[1]),2 in z&&(G.finallyLoc=z[2],G.afterLoc=z[3]),this.tryEntries.push(G)}function H(z){var G=z.completion||{};G.type="normal",delete G.arg,z.completion=G}function K(z){this.tryEntries=[{tryLoc:"root"}],z.forEach(B,this),this.reset(!0)}function $(z){if(z){var G=z[u];if(G)return G.call(z);if(typeof z.next=="function")return z;if(!isNaN(z.length)){var ee=-1,re=function oe(){for(;++ee<z.length;)if(o.call(z,ee))return oe.value=z[ee],oe.done=!1,oe;return oe.value=void 0,oe.done=!0,oe};return re.next=re}}return{next:Z}}function Z(){return{value:void 0,done:!0}}return A.prototype=I,a(O,"constructor",{value:I,configurable:!0}),a(I,"constructor",{value:A,configurable:!0}),A.displayName=m(I,f,"GeneratorFunction"),e.isGeneratorFunction=function(z){var G=typeof z=="function"&&z.constructor;return!!G&&(G===A||(G.displayName||G.name)==="GeneratorFunction")},e.mark=function(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,I):(z.__proto__=I,m(z,f,"GeneratorFunction")),z.prototype=Object.create(O),z},e.awrap=function(z){return{__await:z}},P(M.prototype),m(M.prototype,h,function(){return this}),e.AsyncIterator=M,e.async=function(z,G,ee,re,oe){oe===void 0&&(oe=Promise);var pe=new M(g(z,G,ee,re),oe);return e.isGeneratorFunction(G)?pe:pe.next().then(function(ue){return ue.done?ue.value:pe.next()})},P(O),m(O,f,"Generator"),m(O,u,function(){return this}),m(O,"toString",function(){return"[object Generator]"}),e.keys=function(z){var G=Object(z),ee=[];for(var re in G)ee.push(re);return ee.reverse(),function oe(){for(;ee.length;){var pe=ee.pop();if(pe in G)return oe.value=pe,oe.done=!1,oe}return oe.done=!0,oe}},e.values=$,K.prototype={constructor:K,reset:function(G){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(H),!G)for(var ee in this)ee.charAt(0)==="t"&&o.call(this,ee)&&!isNaN(+ee.slice(1))&&(this[ee]=void 0)},stop:function(){this.done=!0;var G=this.tryEntries[0].completion;if(G.type==="throw")throw G.arg;return this.rval},dispatchException:function(G){if(this.done)throw G;var ee=this;function re(se,ae){return ue.type="throw",ue.arg=G,ee.next=se,ae&&(ee.method="next",ee.arg=void 0),!!ae}for(var oe=this.tryEntries.length-1;oe>=0;--oe){var pe=this.tryEntries[oe],ue=pe.completion;if(pe.tryLoc==="root")return re("end");if(pe.tryLoc<=this.prev){var me=o.call(pe,"catchLoc"),fe=o.call(pe,"finallyLoc");if(me&&fe){if(this.prev<pe.catchLoc)return re(pe.catchLoc,!0);if(this.prev<pe.finallyLoc)return re(pe.finallyLoc)}else if(me){if(this.prev<pe.catchLoc)return re(pe.catchLoc,!0)}else{if(!fe)throw new Error("try statement without catch or finally");if(this.prev<pe.finallyLoc)return re(pe.finallyLoc)}}}},abrupt:function(G,ee){for(var re=this.tryEntries.length-1;re>=0;--re){var oe=this.tryEntries[re];if(oe.tryLoc<=this.prev&&o.call(oe,"finallyLoc")&&this.prev<oe.finallyLoc){var pe=oe;break}}pe&&(G==="break"||G==="continue")&&pe.tryLoc<=ee&&ee<=pe.finallyLoc&&(pe=null);var ue=pe?pe.completion:{};return ue.type=G,ue.arg=ee,pe?(this.method="next",this.next=pe.finallyLoc,y):this.complete(ue)},complete:function(G,ee){if(G.type==="throw")throw G.arg;return G.type==="break"||G.type==="continue"?this.next=G.arg:G.type==="return"?(this.rval=this.arg=G.arg,this.method="return",this.next="end"):G.type==="normal"&&ee&&(this.next=ee),y},finish:function(G){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var re=this.tryEntries[ee];if(re.finallyLoc===G)return this.complete(re.completion,re.afterLoc),H(re),y}},catch:function(G){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var re=this.tryEntries[ee];if(re.tryLoc===G){var oe=re.completion;if(oe.type==="throw"){var pe=oe.arg;H(re)}return pe}}throw new Error("illegal catch attempt")},delegateYield:function(G,ee,re){return this.delegate={iterator:$(G),resultName:ee,nextLoc:re},this.method==="next"&&(this.arg=void 0),y}},e}function T4(e,t,o,a,c,u,h){try{var f=e[u](h),m=f.value}catch(g){o(g);return}f.done?t(m):Promise.resolve(m).then(a,c)}function Qh(e){return function(){var t=this,o=arguments;return new Promise(function(a,c){var u=e.apply(t,o);function h(m){T4(u,a,c,h,f,"next",m)}function f(m){T4(u,a,c,h,f,"throw",m)}h(void 0)})}}var bm=ve({},_Z),gie=bm.version,vie=bm.render,Eie=bm.unmountComponentAtNode,h_;try{var _ie=Number((gie||"").split(".")[0]);_ie>=18&&(h_=bm.createRoot)}catch{}function R4(e){var t=bm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&Rn(t)==="object"&&(t.usingClientEntryPoint=e)}var hE="__rc_react_root__";function Sie(e,t){R4(!0);var o=t[hE]||h_(t);R4(!1),o.render(e),t[hE]=o}function yie(e,t){vie(e,t)}function F8(e,t){if(h_){Sie(e,t);return}yie(e,t)}function Cie(e){return aI.apply(this,arguments)}function aI(){return aI=Qh(_a().mark(function e(t){return _a().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.resolve().then(function(){var c;(c=t[hE])===null||c===void 0||c.unmount(),delete t[hE]}));case 1:case"end":return a.stop()}},e)})),aI.apply(this,arguments)}function bie(e){Eie(e)}function Tie(e){return sI.apply(this,arguments)}function sI(){return sI=Qh(_a().mark(function e(t){return _a().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(h_===void 0){a.next=2;break}return a.abrupt("return",Cie(t));case 2:bie(t);case 3:case"end":return a.stop()}},e)})),sI.apply(this,arguments)}const p_=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),o=t.width,a=t.height;if(o||a)return!0}if(e.getBoundingClientRect){var c=e.getBoundingClientRect(),u=c.width,h=c.height;if(u||h)return!0}}return!1},Rie=e=>{const{componentCls:t,colorPrimary:o}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${o})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}},Iie=Is("Wave",e=>[Rie(e)]);function wie(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function Ab(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&wie(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function Oie(e){const{borderTopColor:t,borderColor:o,backgroundColor:a}=getComputedStyle(e);return Ab(t)?t:Ab(o)?o:Ab(a)?a:null}function Nb(e){return Number.isNaN(e)?0:e}const Aie=e=>{const{className:t,target:o}=e,a=S.useRef(null),[c,u]=S.useState(null),[h,f]=S.useState([]),[m,g]=S.useState(0),[_,y]=S.useState(0),[b,A]=S.useState(0),[I,w]=S.useState(0),[D,x]=S.useState(!1),O={left:m,top:_,width:b,height:I,borderRadius:h.map(M=>`${M}px`).join(" ")};c&&(O["--wave-color"]=c);function P(){const M=getComputedStyle(o);u(Oie(o));const V=M.position==="static",{borderLeftWidth:F,borderTopWidth:B}=M;g(V?o.offsetLeft:Nb(-parseFloat(F))),y(V?o.offsetTop:Nb(-parseFloat(B))),A(o.offsetWidth),w(o.offsetHeight);const{borderTopLeftRadius:H,borderTopRightRadius:K,borderBottomLeftRadius:$,borderBottomRightRadius:Z}=M;f([H,K,Z,$].map(z=>Nb(parseFloat(z))))}return S.useEffect(()=>{if(o){const M=Hi(()=>{P(),x(!0)});let V;return typeof ResizeObserver<"u"&&(V=new ResizeObserver(P),V.observe(o)),()=>{Hi.cancel(M),V==null||V.disconnect()}}},[]),D?S.createElement(Gu,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(M,V)=>{var F;if(V.deadline||V.propertyName==="opacity"){const B=(F=a.current)===null||F===void 0?void 0:F.parentElement;Tie(B).then(()=>{B==null||B.remove()})}return!1}},M=>{let{className:V}=M;return S.createElement("div",{ref:a,className:Be(t,V),style:O})}):null};function Nie(e,t){const o=document.createElement("div");o.style.position="absolute",o.style.left="0px",o.style.top="0px",e==null||e.insertBefore(o,e==null?void 0:e.firstChild),F8(S.createElement(Aie,{target:e,className:t}),o)}function xie(e,t){function o(){const a=e.current;Nie(a,t)}return o}const Pie=e=>{const{children:t,disabled:o}=e,{getPrefixCls:a}=S.useContext(Hn),c=S.useRef(null),u=a("wave"),[,h]=Iie(u),f=xie(c,Be(u,h));if(lt.useEffect(()=>{const g=c.current;if(!g||g.nodeType!==1||o)return;const _=y=>{y.target.tagName==="INPUT"||!p_(y.target)||!g.getAttribute||g.getAttribute("disabled")||g.disabled||g.className.includes("disabled")||g.className.includes("-leave")||f()};return g.addEventListener("click",_,!0),()=>{g.removeEventListener("click",_,!0)}},[o]),!lt.isValidElement(t))return t??null;const m=Kh(t)?Rs(t.ref,c):c;return Cs(t,{ref:m})},Die=Pie;globalThis&&globalThis.__rest;const V8=S.createContext(null),tw=(e,t)=>{const o=S.useContext(V8),a=S.useMemo(()=>{if(!o)return"";const{compactDirection:c,isFirstItem:u,isLastItem:h}=o,f=c==="vertical"?"-vertical-":"-";return Be({[`${e}-compact${f}item`]:!0,[`${e}-compact${f}first-item`]:u,[`${e}-compact${f}last-item`]:h,[`${e}-compact${f}item-rtl`]:t==="rtl"})},[e,t,o]);return{compactSize:o==null?void 0:o.compactSize,compactDirection:o==null?void 0:o.compactDirection,compactItemClassnames:a}},cI=e=>{let{children:t}=e;return S.createElement(V8.Provider,{value:null},t)},kie=S.forwardRef((e,t)=>{const{className:o,style:a,children:c,prefixCls:u}=e,h=Be(`${u}-icon`,o);return lt.createElement("span",{ref:t,className:h,style:a},c)}),j8=kie,I4=S.forwardRef((e,t)=>{let{prefixCls:o,className:a,style:c,iconClassName:u}=e;const h=Be(`${o}-loading-icon`,a);return lt.createElement(j8,{prefixCls:o,className:h,style:c,ref:t},lt.createElement(U8,{className:u}))}),xb=()=>({width:0,opacity:0,transform:"scale(0)"}),Pb=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),Lie=e=>{let{prefixCls:t,loading:o,existIcon:a,className:c,style:u}=e;const h=!!o;return a?lt.createElement(I4,{prefixCls:t,className:c,style:u}):lt.createElement(Gu,{visible:h,motionName:`${t}-loading-icon-motion`,removeOnLeave:!0,onAppearStart:xb,onAppearActive:Pb,onEnterStart:xb,onEnterActive:Pb,onLeaveStart:Pb,onLeaveActive:xb},(f,m)=>{let{className:g,style:_}=f;return lt.createElement(I4,{prefixCls:t,className:c,style:Object.assign(Object.assign({},u),_),ref:m,iconClassName:g})})},Mie=Lie;var Uie=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const B8=S.createContext(void 0),Fie=e=>{const{getPrefixCls:t,direction:o}=S.useContext(Hn),{prefixCls:a,size:c,className:u}=e,h=Uie(e,["prefixCls","size","className"]),f=t("btn-group",a),[,,m]=qh();let g="";switch(c){case"large":g="lg";break;case"small":g="sm";break}const _=Be(f,{[`${f}-${g}`]:g,[`${f}-rtl`]:o==="rtl"},u,m);return S.createElement(B8.Provider,{value:c},S.createElement("div",Object.assign({},h,{className:_})))},Vie=Fie,w4=/^[\u4e00-\u9fa5]{2}$/,lI=w4.test.bind(w4);function jie(e){return typeof e=="string"}function Db(e){return e==="text"||e==="link"}function Bie(e,t){if(e==null)return;const o=t?" ":"";return typeof e!="string"&&typeof e!="number"&&jie(e.type)&&lI(e.props.children)?Cs(e,{children:e.props.children.split("").join(o)}):typeof e=="string"?lI(e)?lt.createElement("span",null,e.split("").join(o)):lt.createElement("span",null,e):L8(e)?lt.createElement("span",null,e):e}function $ie(e,t){let o=!1;const a=[];return lt.Children.forEach(e,c=>{const u=typeof c,h=u==="string"||u==="number";if(o&&h){const f=a.length-1,m=a[f];a[f]=`${m}${c}`}else a.push(c);o=h}),lt.Children.map(a,c=>Bie(c,t))}function Hie(e,t,o){const{focusElCls:a,focus:c,borderElCls:u}=o,h=u?"> *":"",f=["hover",c?"focus":null,"active"].filter(Boolean).map(m=>`&:${m} ${h}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:-e.lineWidth},"&-item":Object.assign(Object.assign({[f]:{zIndex:2}},a?{[`&${a}`]:{zIndex:2}}:{}),{[`&[disabled] ${h}`]:{zIndex:0}})}}function Wie(e,t,o){const{borderElCls:a}=o,c=a?`> ${a}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${c}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function $8(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:o}=e,a=`${o}-compact`;return{[a]:Object.assign(Object.assign({},Hie(e,a,t)),Wie(o,a,t))}}function Gie(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:-e.lineWidth},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function zie(e,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function Kie(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:Object.assign(Object.assign({},Gie(e,t)),zie(e.componentCls,t))}}const O4=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),Yie=e=>{const{componentCls:t,fontSize:o,lineWidth:a,colorPrimaryHover:c,colorErrorHover:u}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:-a,[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:o}},O4(`${t}-primary`,c),O4(`${t}-danger`,u)]}},qie=Yie,Xie=e=>{const{componentCls:t,iconCls:o,buttonFontWeight:a}=e;return{[t]:{outline:"none",position:"relative",display:"inline-block",fontWeight:a,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:`${e.lineWidth}px ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:e.lineHeight,color:e.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${t}-icon`]:{lineHeight:0},[`> ${o} + span, > span + ${o}`]:{marginInlineStart:e.marginXS},[`&:not(${t}-icon-only) > ${t}-icon`]:{[`&${t}-loading-icon, &:not(:last-child)`]:{marginInlineEnd:e.marginXS}},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},Wne(e)),[`&-icon-only${t}-compact-item`]:{flex:"none"},[`&-compact-item${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:e.lineWidth,height:`calc(100% + ${e.lineWidth*2}px)`,backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-vertical-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:`calc(100% + ${e.lineWidth*2}px)`,height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},Nc=(e,t,o)=>({[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":t,"&:active":o}}),Jie=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),Qie=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.controlHeight/2,paddingInlineEnd:e.controlHeight/2}),Zie=e=>({cursor:"not-allowed",borderColor:e.colorBorder,color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,boxShadow:"none"}),pE=(e,t,o,a,c,u,h)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:t||void 0,backgroundColor:"transparent",borderColor:o||void 0,boxShadow:"none"},Nc(e,Object.assign({backgroundColor:"transparent"},u),Object.assign({backgroundColor:"transparent"},h))),{"&:disabled":{cursor:"not-allowed",color:a||void 0,borderColor:c||void 0}})}),nw=e=>({[`&:disabled, &${e.componentCls}-disabled`]:Object.assign({},Zie(e))}),H8=e=>Object.assign({},nw(e)),fE=e=>({[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",color:e.colorTextDisabled}}),W8=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},H8(e)),{backgroundColor:e.colorBgContainer,borderColor:e.colorBorder,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`}),Nc(e.componentCls,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),pE(e.componentCls,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:e.colorError,borderColor:e.colorError},Nc(e.componentCls,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),pE(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),nw(e))}),eoe=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},H8(e)),{color:e.colorTextLightSolid,backgroundColor:e.colorPrimary,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`}),Nc(e.componentCls,{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryHover},{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryActive})),pE(e.componentCls,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({backgroundColor:e.colorError,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`},Nc(e.componentCls,{backgroundColor:e.colorErrorHover},{backgroundColor:e.colorErrorActive})),pE(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),nw(e))}),toe=e=>Object.assign(Object.assign({},W8(e)),{borderStyle:"dashed"}),noe=e=>Object.assign(Object.assign(Object.assign({color:e.colorLink},Nc(e.componentCls,{color:e.colorLinkHover},{color:e.colorLinkActive})),fE(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},Nc(e.componentCls,{color:e.colorErrorHover},{color:e.colorErrorActive})),fE(e))}),roe=e=>Object.assign(Object.assign(Object.assign({},Nc(e.componentCls,{color:e.colorText,backgroundColor:e.colorBgTextHover},{color:e.colorText,backgroundColor:e.colorBgTextActive})),fE(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},fE(e)),Nc(e.componentCls,{color:e.colorErrorHover,backgroundColor:e.colorErrorBg},{color:e.colorErrorHover,backgroundColor:e.colorErrorBg}))}),ioe=e=>{const{componentCls:t}=e;return{[`${t}-default`]:W8(e),[`${t}-primary`]:eoe(e),[`${t}-dashed`]:toe(e),[`${t}-link`]:noe(e),[`${t}-text`]:roe(e)}},rw=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:o,controlHeight:a,fontSize:c,lineHeight:u,lineWidth:h,borderRadius:f,buttonPaddingHorizontal:m,iconCls:g}=e,_=Math.max(0,(a-c*u)/2-h),y=m-h,b=`${o}-icon-only`;return[{[`${o}${t}`]:{fontSize:c,height:a,padding:`${_}px ${y}px`,borderRadius:f,[`&${b}`]:{width:a,paddingInlineStart:0,paddingInlineEnd:0,[`&${o}-round`]:{width:"auto"},[g]:{fontSize:e.buttonIconOnlyFontSize}},[`&${o}-loading`]:{opacity:e.opacityLoading,cursor:"default"},[`${o}-loading-icon`]:{transition:`width ${e.motionDurationSlow} ${e.motionEaseInOut}, opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`}}},{[`${o}${o}-circle${t}`]:Jie(e)},{[`${o}${o}-round${t}`]:Qie(e)}]},ooe=e=>rw(e),aoe=e=>{const t=zi(e,{controlHeight:e.controlHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:8,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.fontSizeLG-2});return rw(t,`${e.componentCls}-sm`)},soe=e=>{const t=zi(e,{controlHeight:e.controlHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.fontSizeLG+2});return rw(t,`${e.componentCls}-lg`)},coe=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},loe=Is("Button",e=>{const{controlTmpOutline:t,paddingContentHorizontal:o}=e,a=zi(e,{colorOutlineDefault:t,buttonPaddingHorizontal:o,buttonIconOnlyFontSize:e.fontSizeLG,buttonFontWeight:400});return[Xie(a),aoe(a),ooe(a),soe(a),coe(a),ioe(a),qie(a),$8(e),Kie(e)]});var uoe=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};function doe(e){if(typeof e=="object"&&e){const t=e==null?void 0:e.delay;return{loading:!1,delay:!Number.isNaN(t)&&typeof t=="number"?t:0}}return{loading:!!e,delay:0}}const hoe=(e,t)=>{var o,a;const{loading:c=!1,prefixCls:u,type:h="default",danger:f,shape:m="default",size:g,styles:_,disabled:y,className:b,rootClassName:A,children:I,icon:w,ghost:D=!1,block:x=!1,htmlType:O="button",classNames:P,style:M={}}=e,V=uoe(e,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","ghost","block","htmlType","classNames","style"]),{getPrefixCls:F,autoInsertSpaceInButton:B,direction:H,button:K}=S.useContext(Hn),$=F("btn",u),[Z,z]=loe($),G=S.useContext(Cm),ee=y??G,re=S.useContext(B8),oe=S.useMemo(()=>doe(c),[c]),[pe,ue]=S.useState(oe.loading),[me,fe]=S.useState(!1),ae=Rs(t,S.createRef()),de=S.Children.count(I)===1&&!w&&!Db(h);S.useEffect(()=>{let Ge=null;oe.delay>0?Ge=setTimeout(()=>{Ge=null,ue(!0)},oe.delay):ue(oe.loading);function nt(){Ge&&(clearTimeout(Ge),Ge=null)}return nt},[oe]),S.useEffect(()=>{if(!ae||!ae.current||B===!1)return;const Ge=ae.current.textContent;de&&lI(Ge)?me||fe(!0):me&&fe(!1)},[ae]);const ce=Ge=>{const{onClick:nt}=e;if(pe||ee){Ge.preventDefault();return}nt==null||nt(Ge)},we=B!==!1,{compactSize:Ie,compactItemClassnames:He}=tw($,H),Le={large:"lg",small:"sm",middle:void 0},ft=Xh(Ge=>{var nt,mt;return(mt=(nt=g??Ie)!==null&&nt!==void 0?nt:re)!==null&&mt!==void 0?mt:Ge}),gt=ft&&Le[ft]||"",at=pe?"loading":w,rt=Ko(V,["navigate"]),pt=Be($,z,{[`${$}-${m}`]:m!=="default"&&m,[`${$}-${h}`]:h,[`${$}-${gt}`]:gt,[`${$}-icon-only`]:!I&&I!==0&&!!at,[`${$}-background-ghost`]:D&&!Db(h),[`${$}-loading`]:pe,[`${$}-two-chinese-chars`]:me&&we&&!pe,[`${$}-block`]:x,[`${$}-dangerous`]:!!f,[`${$}-rtl`]:H==="rtl"},He,b,A,K==null?void 0:K.className),Ye=Object.assign(Object.assign({},K==null?void 0:K.style),M),yt=Be(P==null?void 0:P.icon,(o=K==null?void 0:K.classNames)===null||o===void 0?void 0:o.icon),kt=Object.assign(Object.assign({},(_==null?void 0:_.icon)||{}),((a=K==null?void 0:K.styles)===null||a===void 0?void 0:a.icon)||{}),Lt=w&&!pe?lt.createElement(j8,{prefixCls:$,className:yt,style:kt},w):lt.createElement(Mie,{existIcon:!!w,prefixCls:$,loading:!!pe}),Xe=I||I===0?$ie(I,de&&we):null;if(rt.href!==void 0)return Z(lt.createElement("a",Object.assign({},rt,{className:Be(pt,{[`${$}-disabled`]:ee}),style:Ye,onClick:ce,ref:ae}),Lt,Xe));let qe=lt.createElement("button",Object.assign({},V,{type:O,className:pt,style:Ye,onClick:ce,disabled:ee,ref:ae}),Lt,Xe);return Db(h)||(qe=lt.createElement(Die,{disabled:!!pe},qe)),Z(qe)},iw=S.forwardRef(hoe);iw.Group=Vie;iw.__ANT_BUTTON=!0;const wi=iw,kb=()=>({height:0,opacity:0}),A4=e=>{const{scrollHeight:t}=e;return{height:t,opacity:1}},poe=e=>({height:e?e.offsetHeight:0}),Lb=(e,t)=>(t==null?void 0:t.deadline)===!0||t.propertyName==="height",foe=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:kb,onEnterStart:kb,onAppearActive:A4,onEnterActive:A4,onLeaveStart:poe,onLeaveActive:kb,onAppearEnd:Lb,onEnterEnd:Lb,onLeaveEnd:Lb,motionDeadline:500}},moe=(e,t,o)=>o!==void 0?o:`${e}-${t}`,uI=foe;var G8=S.createContext(null),N4=[];function goe(e,t){var o=S.useState(function(){if(!Go())return null;var I=document.createElement("div");return I}),a=De(o,1),c=a[0],u=S.useRef(!1),h=S.useContext(G8),f=S.useState(N4),m=De(f,2),g=m[0],_=m[1],y=h||(u.current?void 0:function(I){_(function(w){var D=[I].concat(Ze(w));return D})});function b(){c.parentElement||document.body.appendChild(c),u.current=!0}function A(){var I;(I=c.parentElement)===null||I===void 0||I.removeChild(c),u.current=!1}return Or(function(){return e?h?h(b):b():A(),A},[e]),Or(function(){g.length&&(g.forEach(function(I){return I()}),_(N4))},[g]),[c,y]}var Mb;function voe(e){if(typeof document>"u")return 0;if(e||Mb===void 0){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var o=document.createElement("div"),a=o.style;a.position="absolute",a.top="0",a.left="0",a.pointerEvents="none",a.visibility="hidden",a.width="200px",a.height="150px",a.overflow="hidden",o.appendChild(t),document.body.appendChild(o);var c=t.offsetWidth;o.style.overflow="scroll";var u=t.offsetWidth;c===u&&(u=o.clientWidth),document.body.removeChild(o),Mb=c-u}return Mb}function Eoe(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var _oe="rc-util-locker-".concat(Date.now()),x4=0;function Soe(e){var t=!!e,o=S.useState(function(){return x4+=1,"".concat(_oe,"_").concat(x4)}),a=De(o,1),c=a[0];Or(function(){if(t){var u=voe(),h=Eoe();Mh(`
html body {
  overflow-y: hidden;
  `.concat(h?"width: calc(100% - ".concat(u,"px);"):"",`
}`),c)}else oE(c);return function(){oE(c)}},[t,c])}var P4=!1;function yoe(e){return typeof e=="boolean"&&(P4=e),P4}var D4=function(t){return t===!1?!1:!Go()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},z8=S.forwardRef(function(e,t){var o=e.open,a=e.autoLock,c=e.getContainer;e.debug;var u=e.autoDestroy,h=u===void 0?!0:u,f=e.children,m=S.useState(o),g=De(m,2),_=g[0],y=g[1],b=_||o;S.useEffect(function(){(h||o)&&y(o)},[o,h]);var A=S.useState(function(){return D4(c)}),I=De(A,2),w=I[0],D=I[1];S.useEffect(function(){var Z=D4(c);D(Z??null)});var x=goe(b&&!w),O=De(x,2),P=O[0],M=O[1],V=w??P;Soe(a&&o&&Go()&&(V===P||V===document.body));var F=null;if(f&&Kh(f)&&t){var B=f;F=B.ref}var H=j1(F,t);if(!b||!Go()||w===void 0)return null;var K=V===!1||yoe(),$=f;return t&&($=S.cloneElement(f,{ref:H})),S.createElement(G8.Provider,{value:M},K?$:Bl.createPortal($,V))});function Coe(){var e=ve({},wh);return e.useId}var k4=0;function boe(e){var t=S.useState("ssr-id"),o=De(t,2),a=o[0],c=o[1],u=Coe(),h=u==null?void 0:u();return S.useEffect(function(){if(!u){var f=k4;k4+=1,c("rc_unique_".concat(f))}},[]),e||h||a}var K8=function(t){if(Go()&&window.document.documentElement){var o=Array.isArray(t)?t:[t],a=window.document.documentElement;return o.some(function(c){return c in a.style})}return!1},Toe=function(t,o){if(!K8(t))return!1;var a=document.createElement("div"),c=a.style[t];return a.style[t]=o,a.style[t]!==c};function L4(e,t){return!Array.isArray(e)&&t!==void 0?Toe(e,t):K8(e)}const Roe=()=>Go()&&window.document.documentElement;let Gg;const Ioe=()=>{if(!Roe())return!1;if(Gg!==void 0)return Gg;const e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),Gg=e.scrollHeight===1,document.body.removeChild(e),Gg};var Iu="RC_FORM_INTERNAL_HOOKS",qn=function(){yo(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Vu=S.createContext({getFieldValue:qn,getFieldsValue:qn,getFieldError:qn,getFieldWarning:qn,getFieldsError:qn,isFieldsTouched:qn,isFieldTouched:qn,isFieldValidating:qn,isFieldsValidating:qn,resetFields:qn,setFields:qn,setFieldValue:qn,setFieldsValue:qn,validateFields:qn,submit:qn,getInternalHooks:function(){return qn(),{dispatch:qn,initEntityValue:qn,registerField:qn,useSubscribe:qn,setInitialValues:qn,destroyForm:qn,setCallbacks:qn,registerWatch:qn,getFields:qn,setValidateMessages:qn,setPreserve:qn,getInitialValue:qn}}}),am=S.createContext(null);function dI(e){return e==null?[]:Array.isArray(e)?e:[e]}function woe(e){return e&&!!e._init}function wu(){return wu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},wu.apply(this,arguments)}function Ooe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,sm(e,t)}function hI(e){return hI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},hI(e)}function sm(e,t){return sm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},sm(e,t)}function Aoe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Cv(e,t,o){return Aoe()?Cv=Reflect.construct.bind():Cv=function(c,u,h){var f=[null];f.push.apply(f,u);var m=Function.bind.apply(c,f),g=new m;return h&&sm(g,h.prototype),g},Cv.apply(null,arguments)}function Noe(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function pI(e){var t=typeof Map=="function"?new Map:void 0;return pI=function(a){if(a===null||!Noe(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(a))return t.get(a);t.set(a,c)}function c(){return Cv(a,arguments,hI(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),sm(c,a)},pI(e)}var xoe=/%[sdj%]/g,Poe=function(){};typeof process<"u"&&process.env;function fI(e){if(!e||!e.length)return null;var t={};return e.forEach(function(o){var a=o.field;t[a]=t[a]||[],t[a].push(o)}),t}function fa(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];var c=0,u=o.length;if(typeof e=="function")return e.apply(null,o);if(typeof e=="string"){var h=e.replace(xoe,function(f){if(f==="%%")return"%";if(c>=u)return f;switch(f){case"%s":return String(o[c++]);case"%d":return Number(o[c++]);case"%j":try{return JSON.stringify(o[c++])}catch{return"[Circular]"}break;default:return f}});return h}return e}function Doe(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function vi(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||Doe(t)&&typeof e=="string"&&!e)}function koe(e,t,o){var a=[],c=0,u=e.length;function h(f){a.push.apply(a,f||[]),c++,c===u&&o(a)}e.forEach(function(f){t(f,h)})}function M4(e,t,o){var a=0,c=e.length;function u(h){if(h&&h.length){o(h);return}var f=a;a=a+1,f<c?t(e[f],u):o([])}u([])}function Loe(e){var t=[];return Object.keys(e).forEach(function(o){t.push.apply(t,e[o]||[])}),t}var U4=function(e){Ooe(t,e);function t(o,a){var c;return c=e.call(this,"Async Validation Error")||this,c.errors=o,c.fields=a,c}return t}(pI(Error));function Moe(e,t,o,a,c){if(t.first){var u=new Promise(function(b,A){var I=function(x){return a(x),x.length?A(new U4(x,fI(x))):b(c)},w=Loe(e);M4(w,o,I)});return u.catch(function(b){return b}),u}var h=t.firstFields===!0?Object.keys(e):t.firstFields||[],f=Object.keys(e),m=f.length,g=0,_=[],y=new Promise(function(b,A){var I=function(D){if(_.push.apply(_,D),g++,g===m)return a(_),_.length?A(new U4(_,fI(_))):b(c)};f.length||(a(_),b(c)),f.forEach(function(w){var D=e[w];h.indexOf(w)!==-1?M4(D,o,I):koe(D,o,I)})});return y.catch(function(b){return b}),y}function Uoe(e){return!!(e&&e.message!==void 0)}function Foe(e,t){for(var o=e,a=0;a<t.length;a++){if(o==null)return o;o=o[t[a]]}return o}function F4(e,t){return function(o){var a;return e.fullFields?a=Foe(t,e.fullFields):a=t[o.field||e.fullField],Uoe(o)?(o.field=o.field||e.fullField,o.fieldValue=a,o):{message:typeof o=="function"?o():o,fieldValue:a,field:o.field||e.fullField}}}function V4(e,t){if(t){for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];typeof a=="object"&&typeof e[o]=="object"?e[o]=wu({},e[o],a):e[o]=a}}return e}var Y8=function(t,o,a,c,u,h){t.required&&(!a.hasOwnProperty(t.field)||vi(o,h||t.type))&&c.push(fa(u.messages.required,t.fullField))},Voe=function(t,o,a,c,u){(/^\s+$/.test(o)||o==="")&&c.push(fa(u.messages.whitespace,t.fullField))},zg,joe=function(){if(zg)return zg;var e="[a-fA-F\\d:]",t=function(M){return M&&M.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},o="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",c=(`
(?:
(?:`+a+":){7}(?:"+a+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+a+":){6}(?:"+o+"|:"+a+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+a+":){5}(?::"+o+"|(?::"+a+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+a+":){4}(?:(?::"+a+"){0,1}:"+o+"|(?::"+a+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+a+":){3}(?:(?::"+a+"){0,2}:"+o+"|(?::"+a+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+a+":){2}(?:(?::"+a+"){0,3}:"+o+"|(?::"+a+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+a+":){1}(?:(?::"+a+"){0,4}:"+o+"|(?::"+a+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+a+"){0,5}:"+o+"|(?::"+a+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),u=new RegExp("(?:^"+o+"$)|(?:^"+c+"$)"),h=new RegExp("^"+o+"$"),f=new RegExp("^"+c+"$"),m=function(M){return M&&M.exact?u:new RegExp("(?:"+t(M)+o+t(M)+")|(?:"+t(M)+c+t(M)+")","g")};m.v4=function(P){return P&&P.exact?h:new RegExp(""+t(P)+o+t(P),"g")},m.v6=function(P){return P&&P.exact?f:new RegExp(""+t(P)+c+t(P),"g")};var g="(?:(?:[a-z]+:)?//)",_="(?:\\S+(?::\\S*)?@)?",y=m.v4().source,b=m.v6().source,A="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",I="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",w="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",D="(?::\\d{2,5})?",x='(?:[/?#][^\\s"]*)?',O="(?:"+g+"|www\\.)"+_+"(?:localhost|"+y+"|"+b+"|"+A+I+w+")"+D+x;return zg=new RegExp("(?:^"+O+"$)","i"),zg},j4={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Ef={integer:function(t){return Ef.number(t)&&parseInt(t,10)===t},float:function(t){return Ef.number(t)&&!Ef.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!Ef.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(j4.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(joe())},hex:function(t){return typeof t=="string"&&!!t.match(j4.hex)}},Boe=function(t,o,a,c,u){if(t.required&&o===void 0){Y8(t,o,a,c,u);return}var h=["integer","float","array","regexp","object","method","email","number","date","url","hex"],f=t.type;h.indexOf(f)>-1?Ef[f](o)||c.push(fa(u.messages.types[f],t.fullField,t.type)):f&&typeof o!==t.type&&c.push(fa(u.messages.types[f],t.fullField,t.type))},$oe=function(t,o,a,c,u){var h=typeof t.len=="number",f=typeof t.min=="number",m=typeof t.max=="number",g=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_=o,y=null,b=typeof o=="number",A=typeof o=="string",I=Array.isArray(o);if(b?y="number":A?y="string":I&&(y="array"),!y)return!1;I&&(_=o.length),A&&(_=o.replace(g,"_").length),h?_!==t.len&&c.push(fa(u.messages[y].len,t.fullField,t.len)):f&&!m&&_<t.min?c.push(fa(u.messages[y].min,t.fullField,t.min)):m&&!f&&_>t.max?c.push(fa(u.messages[y].max,t.fullField,t.max)):f&&m&&(_<t.min||_>t.max)&&c.push(fa(u.messages[y].range,t.fullField,t.min,t.max))},Gd="enum",Hoe=function(t,o,a,c,u){t[Gd]=Array.isArray(t[Gd])?t[Gd]:[],t[Gd].indexOf(o)===-1&&c.push(fa(u.messages[Gd],t.fullField,t[Gd].join(", ")))},Woe=function(t,o,a,c,u){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(o)||c.push(fa(u.messages.pattern.mismatch,t.fullField,o,t.pattern));else if(typeof t.pattern=="string"){var h=new RegExp(t.pattern);h.test(o)||c.push(fa(u.messages.pattern.mismatch,t.fullField,o,t.pattern))}}},hn={required:Y8,whitespace:Voe,type:Boe,range:$oe,enum:Hoe,pattern:Woe},Goe=function(t,o,a,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(vi(o,"string")&&!t.required)return a();hn.required(t,o,c,h,u,"string"),vi(o,"string")||(hn.type(t,o,c,h,u),hn.range(t,o,c,h,u),hn.pattern(t,o,c,h,u),t.whitespace===!0&&hn.whitespace(t,o,c,h,u))}a(h)},zoe=function(t,o,a,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(vi(o)&&!t.required)return a();hn.required(t,o,c,h,u),o!==void 0&&hn.type(t,o,c,h,u)}a(h)},Koe=function(t,o,a,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(o===""&&(o=void 0),vi(o)&&!t.required)return a();hn.required(t,o,c,h,u),o!==void 0&&(hn.type(t,o,c,h,u),hn.range(t,o,c,h,u))}a(h)},Yoe=function(t,o,a,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(vi(o)&&!t.required)return a();hn.required(t,o,c,h,u),o!==void 0&&hn.type(t,o,c,h,u)}a(h)},qoe=function(t,o,a,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(vi(o)&&!t.required)return a();hn.required(t,o,c,h,u),vi(o)||hn.type(t,o,c,h,u)}a(h)},Xoe=function(t,o,a,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(vi(o)&&!t.required)return a();hn.required(t,o,c,h,u),o!==void 0&&(hn.type(t,o,c,h,u),hn.range(t,o,c,h,u))}a(h)},Joe=function(t,o,a,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(vi(o)&&!t.required)return a();hn.required(t,o,c,h,u),o!==void 0&&(hn.type(t,o,c,h,u),hn.range(t,o,c,h,u))}a(h)},Qoe=function(t,o,a,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(o==null&&!t.required)return a();hn.required(t,o,c,h,u,"array"),o!=null&&(hn.type(t,o,c,h,u),hn.range(t,o,c,h,u))}a(h)},Zoe=function(t,o,a,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(vi(o)&&!t.required)return a();hn.required(t,o,c,h,u),o!==void 0&&hn.type(t,o,c,h,u)}a(h)},eae="enum",tae=function(t,o,a,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(vi(o)&&!t.required)return a();hn.required(t,o,c,h,u),o!==void 0&&hn[eae](t,o,c,h,u)}a(h)},nae=function(t,o,a,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(vi(o,"string")&&!t.required)return a();hn.required(t,o,c,h,u),vi(o,"string")||hn.pattern(t,o,c,h,u)}a(h)},rae=function(t,o,a,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(vi(o,"date")&&!t.required)return a();if(hn.required(t,o,c,h,u),!vi(o,"date")){var m;o instanceof Date?m=o:m=new Date(o),hn.type(t,m,c,h,u),m&&hn.range(t,m.getTime(),c,h,u)}}a(h)},iae=function(t,o,a,c,u){var h=[],f=Array.isArray(o)?"array":typeof o;hn.required(t,o,c,h,u,f),a(h)},Ub=function(t,o,a,c,u){var h=t.type,f=[],m=t.required||!t.required&&c.hasOwnProperty(t.field);if(m){if(vi(o,h)&&!t.required)return a();hn.required(t,o,c,f,u,h),vi(o,h)||hn.type(t,o,c,f,u)}a(f)},oae=function(t,o,a,c,u){var h=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(vi(o)&&!t.required)return a();hn.required(t,o,c,h,u)}a(h)},Pf={string:Goe,method:zoe,number:Koe,boolean:Yoe,regexp:qoe,integer:Xoe,float:Joe,array:Qoe,object:Zoe,enum:tae,pattern:nae,date:rae,url:Ub,hex:Ub,email:Ub,required:iae,any:oae};function mI(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var gI=mI(),Tm=function(){function e(o){this.rules=null,this._messages=gI,this.define(o)}var t=e.prototype;return t.define=function(a){var c=this;if(!a)throw new Error("Cannot configure a schema with no rules");if(typeof a!="object"||Array.isArray(a))throw new Error("Rules must be an object");this.rules={},Object.keys(a).forEach(function(u){var h=a[u];c.rules[u]=Array.isArray(h)?h:[h]})},t.messages=function(a){return a&&(this._messages=V4(mI(),a)),this._messages},t.validate=function(a,c,u){var h=this;c===void 0&&(c={}),u===void 0&&(u=function(){});var f=a,m=c,g=u;if(typeof m=="function"&&(g=m,m={}),!this.rules||Object.keys(this.rules).length===0)return g&&g(null,f),Promise.resolve(f);function _(w){var D=[],x={};function O(M){if(Array.isArray(M)){var V;D=(V=D).concat.apply(V,M)}else D.push(M)}for(var P=0;P<w.length;P++)O(w[P]);D.length?(x=fI(D),g(D,x)):g(null,f)}if(m.messages){var y=this.messages();y===gI&&(y=mI()),V4(y,m.messages),m.messages=y}else m.messages=this.messages();var b={},A=m.keys||Object.keys(this.rules);A.forEach(function(w){var D=h.rules[w],x=f[w];D.forEach(function(O){var P=O;typeof P.transform=="function"&&(f===a&&(f=wu({},f)),x=f[w]=P.transform(x)),typeof P=="function"?P={validator:P}:P=wu({},P),P.validator=h.getValidationMethod(P),P.validator&&(P.field=w,P.fullField=P.fullField||w,P.type=h.getType(P),b[w]=b[w]||[],b[w].push({rule:P,value:x,source:f,field:w}))})});var I={};return Moe(b,m,function(w,D){var x=w.rule,O=(x.type==="object"||x.type==="array")&&(typeof x.fields=="object"||typeof x.defaultField=="object");O=O&&(x.required||!x.required&&w.value),x.field=w.field;function P(F,B){return wu({},B,{fullField:x.fullField+"."+F,fullFields:x.fullFields?[].concat(x.fullFields,[F]):[F]})}function M(F){F===void 0&&(F=[]);var B=Array.isArray(F)?F:[F];!m.suppressWarning&&B.length&&e.warning("async-validator:",B),B.length&&x.message!==void 0&&(B=[].concat(x.message));var H=B.map(F4(x,f));if(m.first&&H.length)return I[x.field]=1,D(H);if(!O)D(H);else{if(x.required&&!w.value)return x.message!==void 0?H=[].concat(x.message).map(F4(x,f)):m.error&&(H=[m.error(x,fa(m.messages.required,x.field))]),D(H);var K={};x.defaultField&&Object.keys(w.value).map(function(z){K[z]=x.defaultField}),K=wu({},K,w.rule.fields);var $={};Object.keys(K).forEach(function(z){var G=K[z],ee=Array.isArray(G)?G:[G];$[z]=ee.map(P.bind(null,z))});var Z=new e($);Z.messages(m.messages),w.rule.options&&(w.rule.options.messages=m.messages,w.rule.options.error=m.error),Z.validate(w.value,w.rule.options||m,function(z){var G=[];H&&H.length&&G.push.apply(G,H),z&&z.length&&G.push.apply(G,z),D(G.length?G:null)})}}var V;if(x.asyncValidator)V=x.asyncValidator(x,w.value,M,w.source,m);else if(x.validator){try{V=x.validator(x,w.value,M,w.source,m)}catch(F){console.error==null||console.error(F),m.suppressValidatorError||setTimeout(function(){throw F},0),M(F.message)}V===!0?M():V===!1?M(typeof x.message=="function"?x.message(x.fullField||x.field):x.message||(x.fullField||x.field)+" fails"):V instanceof Array?M(V):V instanceof Error&&M(V.message)}V&&V.then&&V.then(function(){return M()},function(F){return M(F)})},function(w){_(w)},f)},t.getType=function(a){if(a.type===void 0&&a.pattern instanceof RegExp&&(a.type="pattern"),typeof a.validator!="function"&&a.type&&!Pf.hasOwnProperty(a.type))throw new Error(fa("Unknown rule type %s",a.type));return a.type||"string"},t.getValidationMethod=function(a){if(typeof a.validator=="function")return a.validator;var c=Object.keys(a),u=c.indexOf("message");return u!==-1&&c.splice(u,1),c.length===1&&c[0]==="required"?Pf.required:Pf[this.getType(a)]||void 0},e}();Tm.register=function(t,o){if(typeof o!="function")throw new Error("Cannot register a validator by type, validator is not a function");Pf[t]=o};Tm.warning=Poe;Tm.messages=gI;Tm.validators=Pf;var ua="'${name}' is not a valid ${type}",q8={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:ua,method:ua,array:ua,object:ua,number:ua,date:ua,boolean:ua,integer:ua,float:ua,regexp:ua,email:ua,url:ua,hex:ua},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},B4=Tm;function aae(e,t){return e.replace(/\$\{\w+\}/g,function(o){var a=o.slice(2,-1);return t[a]})}var $4="CODE_LOGIC_ERROR";function vI(e,t,o,a,c){return EI.apply(this,arguments)}function EI(){return EI=Qh(_a().mark(function e(t,o,a,c,u){var h,f,m,g,_,y,b,A,I;return _a().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return h=ve({},a),delete h.ruleIndex,B4.warning=function(){},h.validator&&(f=h.validator,h.validator=function(){try{return f.apply(void 0,arguments)}catch(x){return console.error(x),Promise.reject($4)}}),m=null,h&&h.type==="array"&&h.defaultField&&(m=h.defaultField,delete h.defaultField),g=new B4(Qe({},t,[h])),_=gh(q8,c.validateMessages),g.messages(_),y=[],D.prev=10,D.next=13,Promise.resolve(g.validate(Qe({},t,o),ve({},c)));case 13:D.next=18;break;case 15:D.prev=15,D.t0=D.catch(10),D.t0.errors&&(y=D.t0.errors.map(function(x,O){var P=x.message,M=P===$4?_.default:P;return S.isValidElement(M)?S.cloneElement(M,{key:"error_".concat(O)}):M}));case 18:if(!(!y.length&&m)){D.next=23;break}return D.next=21,Promise.all(o.map(function(x,O){return vI("".concat(t,".").concat(O),x,m,c,u)}));case 21:return b=D.sent,D.abrupt("return",b.reduce(function(x,O){return[].concat(Ze(x),Ze(O))},[]));case 23:return A=ve(ve({},a),{},{name:t,enum:(a.enum||[]).join(", ")},u),I=y.map(function(x){return typeof x=="string"?aae(x,A):x}),D.abrupt("return",I);case 26:case"end":return D.stop()}},e,null,[[10,15]])})),EI.apply(this,arguments)}function sae(e,t,o,a,c,u){var h=e.join("."),f=o.map(function(_,y){var b=_.validator,A=ve(ve({},_),{},{ruleIndex:y});return b&&(A.validator=function(I,w,D){var x=!1,O=function(){for(var V=arguments.length,F=new Array(V),B=0;B<V;B++)F[B]=arguments[B];Promise.resolve().then(function(){yo(!x,"Your validator function has already return a promise. `callback` will be ignored."),x||D.apply(void 0,F)})},P=b(I,w,O);x=P&&typeof P.then=="function"&&typeof P.catch=="function",yo(x,"`callback` is deprecated. Please return a promise instead."),x&&P.then(function(){D()}).catch(function(M){D(M||" ")})}),A}).sort(function(_,y){var b=_.warningOnly,A=_.ruleIndex,I=y.warningOnly,w=y.ruleIndex;return!!b==!!I?A-w:b?1:-1}),m;if(c===!0)m=new Promise(function(){var _=Qh(_a().mark(function y(b,A){var I,w,D;return _a().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:I=0;case 1:if(!(I<f.length)){O.next=12;break}return w=f[I],O.next=5,vI(h,t,w,a,u);case 5:if(D=O.sent,!D.length){O.next=9;break}return A([{errors:D,rule:w}]),O.abrupt("return");case 9:I+=1,O.next=1;break;case 12:b([]);case 13:case"end":return O.stop()}},y)}));return function(y,b){return _.apply(this,arguments)}}());else{var g=f.map(function(_){return vI(h,t,_,a,u).then(function(y){return{errors:y,rule:_}})});m=(c?lae(g):cae(g)).then(function(_){return Promise.reject(_)})}return m.catch(function(_){return _}),m}function cae(e){return _I.apply(this,arguments)}function _I(){return _I=Qh(_a().mark(function e(t){return _a().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.all(t).then(function(c){var u,h=(u=[]).concat.apply(u,Ze(c));return h}));case 1:case"end":return a.stop()}},e)})),_I.apply(this,arguments)}function lae(e){return SI.apply(this,arguments)}function SI(){return SI=Qh(_a().mark(function e(t){var o;return _a().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=0,c.abrupt("return",new Promise(function(u){t.forEach(function(h){h.then(function(f){f.errors.length&&u([f]),o+=1,o===t.length&&u([])})})}));case 2:case"end":return c.stop()}},e)})),SI.apply(this,arguments)}function Hr(e){return dI(e)}function H4(e,t){var o={};return t.forEach(function(a){var c=gs(e,a);o=ds(o,a,c)}),o}function Df(e,t){return e&&e.some(function(o){return X8(o,t)})}function X8(e,t){return!e||!t||e.length!==t.length?!1:e.every(function(o,a){return t[a]===o})}function uae(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||Rn(e)!=="object"||Rn(t)!=="object")return!1;var o=Object.keys(e),a=Object.keys(t),c=new Set([].concat(o,a));return Ze(c).every(function(u){var h=e[u],f=t[u];return typeof h=="function"&&typeof f=="function"?!0:h===f})}function dae(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&Rn(t.target)==="object"&&e in t.target?t.target[e]:t}function W4(e,t,o){var a=e.length;if(t<0||t>=a||o<0||o>=a)return e;var c=e[t],u=t-o;return u>0?[].concat(Ze(e.slice(0,o)),[c],Ze(e.slice(o,t)),Ze(e.slice(t+1,a))):u<0?[].concat(Ze(e.slice(0,t)),Ze(e.slice(t+1,o+1)),[c],Ze(e.slice(o+1,a))):e}var hae=["name"],La=[];function G4(e,t,o,a,c,u){return typeof e=="function"?e(t,o,"source"in u?{source:u.source}:{}):a!==c}var ow=function(e){Gh(o,e);var t=zh(o);function o(a){var c;if(za(this,o),c=t.call(this,a),c.state={resetCount:0},c.cancelRegisterFunc=null,c.mounted=!1,c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.prevValidating=void 0,c.errors=La,c.warnings=La,c.cancelRegister=function(){var m=c.props,g=m.preserve,_=m.isListField,y=m.name;c.cancelRegisterFunc&&c.cancelRegisterFunc(_,g,Hr(y)),c.cancelRegisterFunc=null},c.getNamePath=function(){var m=c.props,g=m.name,_=m.fieldContext,y=_.prefixName,b=y===void 0?[]:y;return g!==void 0?[].concat(Ze(b),Ze(g)):[]},c.getRules=function(){var m=c.props,g=m.rules,_=g===void 0?[]:g,y=m.fieldContext;return _.map(function(b){return typeof b=="function"?b(y):b})},c.refresh=function(){c.mounted&&c.setState(function(m){var g=m.resetCount;return{resetCount:g+1}})},c.triggerMetaEvent=function(m){var g=c.props.onMetaChange;g==null||g(ve(ve({},c.getMeta()),{},{destroy:m}))},c.onStoreChange=function(m,g,_){var y=c.props,b=y.shouldUpdate,A=y.dependencies,I=A===void 0?[]:A,w=y.onReset,D=_.store,x=c.getNamePath(),O=c.getValue(m),P=c.getValue(D),M=g&&Df(g,x);switch(_.type==="valueUpdate"&&_.source==="external"&&O!==P&&(c.touched=!0,c.dirty=!0,c.validatePromise=null,c.errors=La,c.warnings=La,c.triggerMetaEvent()),_.type){case"reset":if(!g||M){c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.errors=La,c.warnings=La,c.triggerMetaEvent(),w==null||w(),c.refresh();return}break;case"remove":{if(b){c.reRender();return}break}case"setField":{if(M){var V=_.data;"touched"in V&&(c.touched=V.touched),"validating"in V&&!("originRCField"in V)&&(c.validatePromise=V.validating?Promise.resolve([]):null),"errors"in V&&(c.errors=V.errors||La),"warnings"in V&&(c.warnings=V.warnings||La),c.dirty=!0,c.triggerMetaEvent(),c.reRender();return}if(b&&!x.length&&G4(b,m,D,O,P,_)){c.reRender();return}break}case"dependenciesUpdate":{var F=I.map(Hr);if(F.some(function(B){return Df(_.relatedFields,B)})){c.reRender();return}break}default:if(M||(!I.length||x.length||b)&&G4(b,m,D,O,P,_)){c.reRender();return}break}b===!0&&c.reRender()},c.validateRules=function(m){var g=c.getNamePath(),_=c.getValue(),y=m||{},b=y.triggerName,A=y.validateOnly,I=A===void 0?!1:A,w=Promise.resolve().then(function(){if(!c.mounted)return[];var D=c.props,x=D.validateFirst,O=x===void 0?!1:x,P=D.messageVariables,M=c.getRules();b&&(M=M.filter(function(F){return F}).filter(function(F){var B=F.validateTrigger;if(!B)return!0;var H=dI(B);return H.includes(b)}));var V=sae(g,_,M,m,O,P);return V.catch(function(F){return F}).then(function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:La;if(c.validatePromise===w){var B;c.validatePromise=null;var H=[],K=[];(B=F.forEach)===null||B===void 0||B.call(F,function($){var Z=$.rule.warningOnly,z=$.errors,G=z===void 0?La:z;Z?K.push.apply(K,Ze(G)):H.push.apply(H,Ze(G))}),c.errors=H,c.warnings=K,c.triggerMetaEvent(),c.reRender()}}),V});return I||(c.validatePromise=w,c.dirty=!0,c.errors=La,c.warnings=La,c.triggerMetaEvent(),c.reRender()),w},c.isFieldValidating=function(){return!!c.validatePromise},c.isFieldTouched=function(){return c.touched},c.isFieldDirty=function(){if(c.dirty||c.props.initialValue!==void 0)return!0;var m=c.props.fieldContext,g=m.getInternalHooks(Iu),_=g.getInitialValue;return _(c.getNamePath())!==void 0},c.getErrors=function(){return c.errors},c.getWarnings=function(){return c.warnings},c.isListField=function(){return c.props.isListField},c.isList=function(){return c.props.isList},c.isPreserve=function(){return c.props.preserve},c.getMeta=function(){c.prevValidating=c.isFieldValidating();var m={touched:c.isFieldTouched(),validating:c.prevValidating,errors:c.errors,warnings:c.warnings,name:c.getNamePath(),validated:c.validatePromise===null};return m},c.getOnlyChild=function(m){if(typeof m=="function"){var g=c.getMeta();return ve(ve({},c.getOnlyChild(m(c.getControlled(),g,c.props.fieldContext))),{},{isFunction:!0})}var _=Oc(m);return _.length!==1||!S.isValidElement(_[0])?{child:_,isFunction:!1}:{child:_[0],isFunction:!1}},c.getValue=function(m){var g=c.props.fieldContext.getFieldsValue,_=c.getNamePath();return gs(m||g(!0),_)},c.getControlled=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=c.props,_=g.trigger,y=g.validateTrigger,b=g.getValueFromEvent,A=g.normalize,I=g.valuePropName,w=g.getValueProps,D=g.fieldContext,x=y!==void 0?y:D.validateTrigger,O=c.getNamePath(),P=D.getInternalHooks,M=D.getFieldsValue,V=P(Iu),F=V.dispatch,B=c.getValue(),H=w||function(z){return Qe({},I,z)},K=m[_],$=ve(ve({},m),H(B));$[_]=function(){c.touched=!0,c.dirty=!0,c.triggerMetaEvent();for(var z,G=arguments.length,ee=new Array(G),re=0;re<G;re++)ee[re]=arguments[re];b?z=b.apply(void 0,ee):z=dae.apply(void 0,[I].concat(ee)),A&&(z=A(z,B,M(!0))),F({type:"updateValue",namePath:O,value:z}),K&&K.apply(void 0,ee)};var Z=dI(x||[]);return Z.forEach(function(z){var G=$[z];$[z]=function(){G&&G.apply(void 0,arguments);var ee=c.props.rules;ee&&ee.length&&F({type:"validateField",namePath:O,triggerName:z})}}),$},a.fieldContext){var u=a.fieldContext.getInternalHooks,h=u(Iu),f=h.initEntityValue;f(tE(c))}return c}return Ka(o,[{key:"componentDidMount",value:function(){var c=this.props,u=c.shouldUpdate,h=c.fieldContext;if(this.mounted=!0,h){var f=h.getInternalHooks,m=f(Iu),g=m.registerField;this.cancelRegisterFunc=g(this)}u===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var c=this.state.resetCount,u=this.props.children,h=this.getOnlyChild(u),f=h.child,m=h.isFunction,g;return m?g=f:S.isValidElement(f)?g=S.cloneElement(f,this.getControlled(f.props)):(yo(!f,"`children` of Field is not validate ReactElement."),g=f),S.createElement(S.Fragment,{key:c},g)}}]),o}(S.Component);ow.contextType=Vu;ow.defaultProps={trigger:"onChange",valuePropName:"value"};function aw(e){var t=e.name,o=dn(e,hae),a=S.useContext(Vu),c=S.useContext(am),u=t!==void 0?Hr(t):void 0,h="keep";return o.isListField||(h="_".concat((u||[]).join("_"))),S.createElement(ow,xe({key:h,name:u,isListField:!!c},o,{fieldContext:a}))}var J8=function(t){var o=t.name,a=t.initialValue,c=t.children,u=t.rules,h=t.validateTrigger,f=t.isListField,m=S.useContext(Vu),g=S.useContext(am),_=S.useRef({keys:[],id:0}),y=_.current,b=S.useMemo(function(){var D=Hr(m.prefixName)||[];return[].concat(Ze(D),Ze(Hr(o)))},[m.prefixName,o]),A=S.useMemo(function(){return ve(ve({},m),{},{prefixName:b})},[m,b]),I=S.useMemo(function(){return{getKey:function(x){var O=b.length,P=x[O];return[y.keys[P],x.slice(O+1)]}}},[b]);if(typeof c!="function")return yo(!1,"Form.List only accepts function as children."),null;var w=function(x,O,P){var M=P.source;return M==="internal"?!1:x!==O};return S.createElement(am.Provider,{value:I},S.createElement(Vu.Provider,{value:A},S.createElement(aw,{name:[],shouldUpdate:w,rules:u,validateTrigger:h,initialValue:a,isList:!0,isListField:f??!!g},function(D,x){var O=D.value,P=O===void 0?[]:O,M=D.onChange,V=m.getFieldValue,F=function(){var $=V(b||[]);return $||[]},B={add:function($,Z){var z=F();Z>=0&&Z<=z.length?(y.keys=[].concat(Ze(y.keys.slice(0,Z)),[y.id],Ze(y.keys.slice(Z))),M([].concat(Ze(z.slice(0,Z)),[$],Ze(z.slice(Z))))):(y.keys=[].concat(Ze(y.keys),[y.id]),M([].concat(Ze(z),[$]))),y.id+=1},remove:function($){var Z=F(),z=new Set(Array.isArray($)?$:[$]);z.size<=0||(y.keys=y.keys.filter(function(G,ee){return!z.has(ee)}),M(Z.filter(function(G,ee){return!z.has(ee)})))},move:function($,Z){if($!==Z){var z=F();$<0||$>=z.length||Z<0||Z>=z.length||(y.keys=W4(y.keys,$,Z),M(W4(z,$,Z)))}}},H=P||[];return Array.isArray(H)||(H=[]),c(H.map(function(K,$){var Z=y.keys[$];return Z===void 0&&(y.keys[$]=y.id,Z=y.keys[$],y.id+=1),{name:$,key:Z,isListField:!0}}),B,x)})))};function pae(e){var t=!1,o=e.length,a=[];return e.length?new Promise(function(c,u){e.forEach(function(h,f){h.catch(function(m){return t=!0,m}).then(function(m){o-=1,a[f]=m,!(o>0)&&(t&&u(a),c(a))})})}):Promise.resolve([])}var Q8="__@field_split__";function Fb(e){return e.map(function(t){return"".concat(Rn(t),":").concat(t)}).join(Q8)}var zd=function(){function e(){za(this,e),this.kvs=new Map}return Ka(e,[{key:"set",value:function(o,a){this.kvs.set(Fb(o),a)}},{key:"get",value:function(o){return this.kvs.get(Fb(o))}},{key:"update",value:function(o,a){var c=this.get(o),u=a(c);u?this.set(o,u):this.delete(o)}},{key:"delete",value:function(o){this.kvs.delete(Fb(o))}},{key:"map",value:function(o){return Ze(this.kvs.entries()).map(function(a){var c=De(a,2),u=c[0],h=c[1],f=u.split(Q8);return o({key:f.map(function(m){var g=m.match(/^([^:]*):(.*)$/),_=De(g,3),y=_[1],b=_[2];return y==="number"?Number(b):b}),value:h})})}},{key:"toJSON",value:function(){var o={};return this.map(function(a){var c=a.key,u=a.value;return o[c.join(".")]=u,null}),o}}]),e}(),fae=["name"],mae=Ka(function e(t){var o=this;za(this,e),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:o.getFieldValue,getFieldsValue:o.getFieldsValue,getFieldError:o.getFieldError,getFieldWarning:o.getFieldWarning,getFieldsError:o.getFieldsError,isFieldsTouched:o.isFieldsTouched,isFieldTouched:o.isFieldTouched,isFieldValidating:o.isFieldValidating,isFieldsValidating:o.isFieldsValidating,resetFields:o.resetFields,setFields:o.setFields,setFieldValue:o.setFieldValue,setFieldsValue:o.setFieldsValue,validateFields:o.validateFields,submit:o.submit,_init:!0,getInternalHooks:o.getInternalHooks}},this.getInternalHooks=function(a){return a===Iu?(o.formHooked=!0,{dispatch:o.dispatch,initEntityValue:o.initEntityValue,registerField:o.registerField,useSubscribe:o.useSubscribe,setInitialValues:o.setInitialValues,destroyForm:o.destroyForm,setCallbacks:o.setCallbacks,setValidateMessages:o.setValidateMessages,getFields:o.getFields,setPreserve:o.setPreserve,getInitialValue:o.getInitialValue,registerWatch:o.registerWatch}):(yo(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(a){o.subscribable=a},this.prevWithoutPreserves=null,this.setInitialValues=function(a,c){if(o.initialValues=a||{},c){var u,h=gh(a,o.store);(u=o.prevWithoutPreserves)===null||u===void 0||u.map(function(f){var m=f.key;h=ds(h,m,gs(a,m))}),o.prevWithoutPreserves=null,o.updateStore(h)}},this.destroyForm=function(){var a=new zd;o.getFieldEntities(!0).forEach(function(c){o.isMergedPreserve(c.isPreserve())||a.set(c.getNamePath(),!0)}),o.prevWithoutPreserves=a},this.getInitialValue=function(a){var c=gs(o.initialValues,a);return a.length?gh(c):c},this.setCallbacks=function(a){o.callbacks=a},this.setValidateMessages=function(a){o.validateMessages=a},this.setPreserve=function(a){o.preserve=a},this.watchList=[],this.registerWatch=function(a){return o.watchList.push(a),function(){o.watchList=o.watchList.filter(function(c){return c!==a})}},this.notifyWatch=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(o.watchList.length){var c=o.getFieldsValue(),u=o.getFieldsValue(!0);o.watchList.forEach(function(h){h(c,u,a)})}},this.timeoutId=null,this.warningUnhooked=function(){},this.updateStore=function(a){o.store=a},this.getFieldEntities=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return a?o.fieldEntities.filter(function(c){return c.getNamePath().length}):o.fieldEntities},this.getFieldsMap=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,c=new zd;return o.getFieldEntities(a).forEach(function(u){var h=u.getNamePath();c.set(h,u)}),c},this.getFieldEntitiesForNamePathList=function(a){if(!a)return o.getFieldEntities(!0);var c=o.getFieldsMap(!0);return a.map(function(u){var h=Hr(u);return c.get(h)||{INVALIDATE_NAME_PATH:Hr(u)}})},this.getFieldsValue=function(a,c){if(o.warningUnhooked(),a===!0&&!c)return o.store;var u=o.getFieldEntitiesForNamePathList(Array.isArray(a)?a:null),h=[];return u.forEach(function(f){var m,g="INVALIDATE_NAME_PATH"in f?f.INVALIDATE_NAME_PATH:f.getNamePath();if(!(!a&&(!((m=f.isListField)===null||m===void 0)&&m.call(f))))if(!c)h.push(g);else{var _="getMeta"in f?f.getMeta():null;c(_)&&h.push(g)}}),H4(o.store,h.map(Hr))},this.getFieldValue=function(a){o.warningUnhooked();var c=Hr(a);return gs(o.store,c)},this.getFieldsError=function(a){o.warningUnhooked();var c=o.getFieldEntitiesForNamePathList(a);return c.map(function(u,h){return u&&!("INVALIDATE_NAME_PATH"in u)?{name:u.getNamePath(),errors:u.getErrors(),warnings:u.getWarnings()}:{name:Hr(a[h]),errors:[],warnings:[]}})},this.getFieldError=function(a){o.warningUnhooked();var c=Hr(a),u=o.getFieldsError([c])[0];return u.errors},this.getFieldWarning=function(a){o.warningUnhooked();var c=Hr(a),u=o.getFieldsError([c])[0];return u.warnings},this.isFieldsTouched=function(){o.warningUnhooked();for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];var h=c[0],f=c[1],m,g=!1;c.length===0?m=null:c.length===1?Array.isArray(h)?(m=h.map(Hr),g=!1):(m=null,g=h):(m=h.map(Hr),g=f);var _=o.getFieldEntities(!0),y=function(D){return D.isFieldTouched()};if(!m)return g?_.every(y):_.some(y);var b=new zd;m.forEach(function(w){b.set(w,[])}),_.forEach(function(w){var D=w.getNamePath();m.forEach(function(x){x.every(function(O,P){return D[P]===O})&&b.update(x,function(O){return[].concat(Ze(O),[w])})})});var A=function(D){return D.some(y)},I=b.map(function(w){var D=w.value;return D});return g?I.every(A):I.some(A)},this.isFieldTouched=function(a){return o.warningUnhooked(),o.isFieldsTouched([a])},this.isFieldsValidating=function(a){o.warningUnhooked();var c=o.getFieldEntities();if(!a)return c.some(function(h){return h.isFieldValidating()});var u=a.map(Hr);return c.some(function(h){var f=h.getNamePath();return Df(u,f)&&h.isFieldValidating()})},this.isFieldValidating=function(a){return o.warningUnhooked(),o.isFieldsValidating([a])},this.resetWithFieldInitialValue=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=new zd,u=o.getFieldEntities(!0);u.forEach(function(m){var g=m.props.initialValue,_=m.getNamePath();if(g!==void 0){var y=c.get(_)||new Set;y.add({entity:m,value:g}),c.set(_,y)}});var h=function(g){g.forEach(function(_){var y=_.props.initialValue;if(y!==void 0){var b=_.getNamePath(),A=o.getInitialValue(b);if(A!==void 0)yo(!1,"Form already set 'initialValues' with path '".concat(b.join("."),"'. Field can not overwrite it."));else{var I=c.get(b);if(I&&I.size>1)yo(!1,"Multiple Field with path '".concat(b.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(I){var w=o.getFieldValue(b);(!a.skipExist||w===void 0)&&o.updateStore(ds(o.store,b,Ze(I)[0].value))}}}})},f;a.entities?f=a.entities:a.namePathList?(f=[],a.namePathList.forEach(function(m){var g=c.get(m);if(g){var _;(_=f).push.apply(_,Ze(Ze(g).map(function(y){return y.entity})))}})):f=u,h(f)},this.resetFields=function(a){o.warningUnhooked();var c=o.store;if(!a){o.updateStore(gh(o.initialValues)),o.resetWithFieldInitialValue(),o.notifyObservers(c,null,{type:"reset"}),o.notifyWatch();return}var u=a.map(Hr);u.forEach(function(h){var f=o.getInitialValue(h);o.updateStore(ds(o.store,h,f))}),o.resetWithFieldInitialValue({namePathList:u}),o.notifyObservers(c,u,{type:"reset"}),o.notifyWatch(u)},this.setFields=function(a){o.warningUnhooked();var c=o.store,u=[];a.forEach(function(h){var f=h.name,m=dn(h,fae),g=Hr(f);u.push(g),"value"in m&&o.updateStore(ds(o.store,g,m.value)),o.notifyObservers(c,[g],{type:"setField",data:h})}),o.notifyWatch(u)},this.getFields=function(){var a=o.getFieldEntities(!0),c=a.map(function(u){var h=u.getNamePath(),f=u.getMeta(),m=ve(ve({},f),{},{name:h,value:o.getFieldValue(h)});return Object.defineProperty(m,"originRCField",{value:!0}),m});return c},this.initEntityValue=function(a){var c=a.props.initialValue;if(c!==void 0){var u=a.getNamePath(),h=gs(o.store,u);h===void 0&&o.updateStore(ds(o.store,u,c))}},this.isMergedPreserve=function(a){var c=a!==void 0?a:o.preserve;return c??!0},this.registerField=function(a){o.fieldEntities.push(a);var c=a.getNamePath();if(o.notifyWatch([c]),a.props.initialValue!==void 0){var u=o.store;o.resetWithFieldInitialValue({entities:[a],skipExist:!0}),o.notifyObservers(u,[a.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(h,f){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(o.fieldEntities=o.fieldEntities.filter(function(y){return y!==a}),!o.isMergedPreserve(f)&&(!h||m.length>1)){var g=h?void 0:o.getInitialValue(c);if(c.length&&o.getFieldValue(c)!==g&&o.fieldEntities.every(function(y){return!X8(y.getNamePath(),c)})){var _=o.store;o.updateStore(ds(_,c,g,!0)),o.notifyObservers(_,[c],{type:"remove"}),o.triggerDependenciesUpdate(_,c)}}o.notifyWatch([c])}},this.dispatch=function(a){switch(a.type){case"updateValue":{var c=a.namePath,u=a.value;o.updateValue(c,u);break}case"validateField":{var h=a.namePath,f=a.triggerName;o.validateFields([h],{triggerName:f});break}}},this.notifyObservers=function(a,c,u){if(o.subscribable){var h=ve(ve({},u),{},{store:o.getFieldsValue(!0)});o.getFieldEntities().forEach(function(f){var m=f.onStoreChange;m(a,c,h)})}else o.forceRootUpdate()},this.triggerDependenciesUpdate=function(a,c){var u=o.getDependencyChildrenFields(c);return u.length&&o.validateFields(u),o.notifyObservers(a,u,{type:"dependenciesUpdate",relatedFields:[c].concat(Ze(u))}),u},this.updateValue=function(a,c){var u=Hr(a),h=o.store;o.updateStore(ds(o.store,u,c)),o.notifyObservers(h,[u],{type:"valueUpdate",source:"internal"}),o.notifyWatch([u]);var f=o.triggerDependenciesUpdate(h,u),m=o.callbacks.onValuesChange;if(m){var g=H4(o.store,[u]);m(g,o.getFieldsValue())}o.triggerOnFieldsChange([u].concat(Ze(f)))},this.setFieldsValue=function(a){o.warningUnhooked();var c=o.store;if(a){var u=gh(o.store,a);o.updateStore(u)}o.notifyObservers(c,null,{type:"valueUpdate",source:"external"}),o.notifyWatch()},this.setFieldValue=function(a,c){o.setFields([{name:a,value:c}])},this.getDependencyChildrenFields=function(a){var c=new Set,u=[],h=new zd;o.getFieldEntities().forEach(function(m){var g=m.props.dependencies;(g||[]).forEach(function(_){var y=Hr(_);h.update(y,function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return b.add(m),b})})});var f=function m(g){var _=h.get(g)||new Set;_.forEach(function(y){if(!c.has(y)){c.add(y);var b=y.getNamePath();y.isFieldDirty()&&b.length&&(u.push(b),m(b))}})};return f(a),u},this.triggerOnFieldsChange=function(a,c){var u=o.callbacks.onFieldsChange;if(u){var h=o.getFields();if(c){var f=new zd;c.forEach(function(g){var _=g.name,y=g.errors;f.set(_,y)}),h.forEach(function(g){g.errors=f.get(g.name)||g.errors})}var m=h.filter(function(g){var _=g.name;return Df(a,_)});m.length&&u(m,h)}},this.validateFields=function(a,c){o.warningUnhooked();var u,h;Array.isArray(a)||typeof a=="string"||typeof c=="string"?(u=a,h=c):h=a;var f=!!u,m=f?u.map(Hr):[],g=[],_=String(Date.now()),y=new Set;o.getFieldEntities(!0).forEach(function(w){var D;if(f||m.push(w.getNamePath()),!((D=h)===null||D===void 0)&&D.recursive&&f){var x=w.getNamePath();x.every(function(M,V){return u[V]===M||u[V]===void 0})&&m.push(x)}if(!(!w.props.rules||!w.props.rules.length)){var O=w.getNamePath();if(y.add(O.join(_)),!f||Df(m,O)){var P=w.validateRules(ve({validateMessages:ve(ve({},q8),o.validateMessages)},h));g.push(P.then(function(){return{name:O,errors:[],warnings:[]}}).catch(function(M){var V,F=[],B=[];return(V=M.forEach)===null||V===void 0||V.call(M,function(H){var K=H.rule.warningOnly,$=H.errors;K?B.push.apply(B,Ze($)):F.push.apply(F,Ze($))}),F.length?Promise.reject({name:O,errors:F,warnings:B}):{name:O,errors:F,warnings:B}}))}}});var b=pae(g);o.lastValidatePromise=b,b.catch(function(w){return w}).then(function(w){var D=w.map(function(x){var O=x.name;return O});o.notifyObservers(o.store,D,{type:"validateFinish"}),o.triggerOnFieldsChange(D,w)});var A=b.then(function(){return o.lastValidatePromise===b?Promise.resolve(o.getFieldsValue(m)):Promise.reject([])}).catch(function(w){var D=w.filter(function(x){return x&&x.errors.length});return Promise.reject({values:o.getFieldsValue(m),errorFields:D,outOfDate:o.lastValidatePromise!==b})});A.catch(function(w){return w});var I=m.filter(function(w){return y.has(w.join(_))});return o.triggerOnFieldsChange(I),A},this.submit=function(){o.warningUnhooked(),o.validateFields().then(function(a){var c=o.callbacks.onFinish;if(c)try{c(a)}catch(u){console.error(u)}}).catch(function(a){var c=o.callbacks.onFinishFailed;c&&c(a)})},this.forceRootUpdate=t});function sw(e){var t=S.useRef(),o=S.useState({}),a=De(o,2),c=a[1];if(!t.current)if(e)t.current=e;else{var u=function(){c({})},h=new mae(u);t.current=h.getForm()}return[t.current]}var yI=S.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Z8=function(t){var o=t.validateMessages,a=t.onFormChange,c=t.onFormFinish,u=t.children,h=S.useContext(yI),f=S.useRef({});return S.createElement(yI.Provider,{value:ve(ve({},h),{},{validateMessages:ve(ve({},h.validateMessages),o),triggerFormChange:function(g,_){a&&a(g,{changedFields:_,forms:f.current}),h.triggerFormChange(g,_)},triggerFormFinish:function(g,_){c&&c(g,{values:_,forms:f.current}),h.triggerFormFinish(g,_)},registerForm:function(g,_){g&&(f.current=ve(ve({},f.current),{},Qe({},g,_))),h.registerForm(g,_)},unregisterForm:function(g){var _=ve({},f.current);delete _[g],f.current=_,h.unregisterForm(g)}})},u)},gae=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],vae=function(t,o){var a=t.name,c=t.initialValues,u=t.fields,h=t.form,f=t.preserve,m=t.children,g=t.component,_=g===void 0?"form":g,y=t.validateMessages,b=t.validateTrigger,A=b===void 0?"onChange":b,I=t.onValuesChange,w=t.onFieldsChange,D=t.onFinish,x=t.onFinishFailed,O=dn(t,gae),P=S.useContext(yI),M=sw(h),V=De(M,1),F=V[0],B=F.getInternalHooks(Iu),H=B.useSubscribe,K=B.setInitialValues,$=B.setCallbacks,Z=B.setValidateMessages,z=B.setPreserve,G=B.destroyForm;S.useImperativeHandle(o,function(){return F}),S.useEffect(function(){return P.registerForm(a,F),function(){P.unregisterForm(a)}},[P,F,a]),Z(ve(ve({},P.validateMessages),y)),$({onValuesChange:I,onFieldsChange:function(ae){if(P.triggerFormChange(a,ae),w){for(var de=arguments.length,ce=new Array(de>1?de-1:0),we=1;we<de;we++)ce[we-1]=arguments[we];w.apply(void 0,[ae].concat(ce))}},onFinish:function(ae){P.triggerFormFinish(a,ae),D&&D(ae)},onFinishFailed:x}),z(f);var ee=S.useRef(null);K(c,!ee.current),ee.current||(ee.current=!0),S.useEffect(function(){return G},[]);var re,oe=typeof m=="function";if(oe){var pe=F.getFieldsValue(!0);re=m(pe,F)}else re=m;H(!oe);var ue=S.useRef();S.useEffect(function(){uae(ue.current||[],u||[])||F.setFields(u||[]),ue.current=u},[u,F]);var me=S.useMemo(function(){return ve(ve({},F),{},{validateTrigger:A})},[F,A]),fe=S.createElement(am.Provider,{value:null},S.createElement(Vu.Provider,{value:me},re));return _===!1?fe:S.createElement(_,xe({},O,{onSubmit:function(ae){ae.preventDefault(),ae.stopPropagation(),F.submit()},onReset:function(ae){var de;ae.preventDefault(),F.resetFields(),(de=O.onReset)===null||de===void 0||de.call(O,ae)}}),fe)};function z4(e){try{return JSON.stringify(e)}catch{return Math.random()}}function e6(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var a=t[0],c=a===void 0?[]:a,u=t[1],h=u===void 0?{}:u,f=woe(h)?{form:h}:h,m=f.form,g=S.useState(),_=De(g,2),y=_[0],b=_[1],A=S.useMemo(function(){return z4(y)},[y]),I=S.useRef(A);I.current=A;var w=S.useContext(Vu),D=m||w,x=D&&D._init,O=Hr(c),P=S.useRef(O);return P.current=O,S.useEffect(function(){if(x){var M=D.getFieldsValue,V=D.getInternalHooks,F=V(Iu),B=F.registerWatch,H=B(function($,Z){var z=gs(f.preserve?Z:$,P.current),G=z4(z);I.current!==G&&(I.current=G,b(z))}),K=gs(f.preserve?M(!0):M(),P.current);return b(K),H}},[x]),y}var Eae=S.forwardRef(vae),Zh=Eae;Zh.FormProvider=Z8;Zh.Field=aw;Zh.List=J8;Zh.useForm=sw;Zh.useWatch=e6;const Ml=S.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),t6=S.createContext(null),n6=e=>{const t=Ko(e,["prefixCls"]);return S.createElement(Z8,Object.assign({},t))},cw=S.createContext({prefixCls:""}),xc=S.createContext({}),K4=e=>{let{children:t,status:o,override:a}=e;const c=S.useContext(xc),u=S.useMemo(()=>{const h=Object.assign({},c);return a&&delete h.isFormItemInput,o&&(delete h.status,delete h.hasFeedback,delete h.feedbackIcon),h},[o,a,c]);return S.createElement(xc.Provider,{value:u},t)},_ae=e=>({animationDuration:e,animationFillMode:"both"}),Sae=e=>({animationDuration:e,animationFillMode:"both"}),r6=function(e,t,o,a){const u=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${u}${e}-enter,
      ${u}${e}-appear
    `]:Object.assign(Object.assign({},_ae(a)),{animationPlayState:"paused"}),[`${u}${e}-leave`]:Object.assign(Object.assign({},Sae(a)),{animationPlayState:"paused"}),[`
      ${u}${e}-enter${e}-enter-active,
      ${u}${e}-appear${e}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${u}${e}-leave${e}-leave-active`]:{animationName:o,animationPlayState:"running",pointerEvents:"none"}}},yae=new Er("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),Cae=new Er("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),bae=new Er("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),Tae=new Er("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),Rae=new Er("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),Iae=new Er("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),wae=new Er("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),Oae=new Er("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),Aae={"slide-up":{inKeyframes:yae,outKeyframes:Cae},"slide-down":{inKeyframes:bae,outKeyframes:Tae},"slide-left":{inKeyframes:Rae,outKeyframes:Iae},"slide-right":{inKeyframes:wae,outKeyframes:Oae}},Y4=(e,t)=>{const{antCls:o}=e,a=`${o}-${t}`,{inKeyframes:c,outKeyframes:u}=Aae[t];return[r6(a,c,u,e.motionDurationMid),{[`
      ${a}-enter,
      ${a}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]},lw=new Er("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Nae=new Er("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),q4=new Er("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),X4=new Er("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),xae=new Er("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),Pae=new Er("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),Dae=new Er("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),kae=new Er("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),Lae=new Er("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),Mae=new Er("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),Uae=new Er("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),Fae=new Er("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),Vae={zoom:{inKeyframes:lw,outKeyframes:Nae},"zoom-big":{inKeyframes:q4,outKeyframes:X4},"zoom-big-fast":{inKeyframes:q4,outKeyframes:X4},"zoom-left":{inKeyframes:Dae,outKeyframes:kae},"zoom-right":{inKeyframes:Lae,outKeyframes:Mae},"zoom-up":{inKeyframes:xae,outKeyframes:Pae},"zoom-down":{inKeyframes:Uae,outKeyframes:Fae}},i6=(e,t)=>{const{antCls:o}=e,a=`${o}-${t}`,{inKeyframes:c,outKeyframes:u}=Vae[t];return[r6(a,c,u,t==="zoom-big-fast"?e.motionDurationFast:e.motionDurationMid),{[`
        ${a}-enter,
        ${a}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},jae=e=>({[e.componentCls]:{[`${e.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}},[`${e.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}}}),o6=jae,Bae=e=>{const{componentCls:t,width:o,notificationMarginEdge:a}=e,c=new Er("antNotificationTopFadeIn",{"0%":{marginTop:"-100%",opacity:0},"100%":{marginTop:0,opacity:1}}),u=new Er("antNotificationBottomFadeIn",{"0%":{marginBottom:"-100%",opacity:0},"100%":{marginBottom:0,opacity:1}}),h=new Er("antNotificationLeftFadeIn",{"0%":{right:{_skip_check_:!0,value:o},opacity:0},"100%":{right:{_skip_check_:!0,value:0},opacity:1}});return{[`&${t}-top, &${t}-bottom`]:{marginInline:0},[`&${t}-top`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:c}},[`&${t}-bottom`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:u}},[`&${t}-topLeft, &${t}-bottomLeft`]:{marginInlineEnd:0,marginInlineStart:a,[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:h}}}},$ae=Bae,Hae=e=>{const{iconCls:t,componentCls:o,boxShadow:a,fontSizeLG:c,notificationMarginBottom:u,borderRadiusLG:h,colorSuccess:f,colorInfo:m,colorWarning:g,colorError:_,colorTextHeading:y,notificationBg:b,notificationPadding:A,notificationMarginEdge:I,motionDurationMid:w,motionEaseInOut:D,fontSize:x,lineHeight:O,width:P,notificationIconSize:M,colorText:V}=e,F=`${o}-notice`,B=new Er("antNotificationFadeIn",{"0%":{left:{_skip_check_:!0,value:P},opacity:0},"100%":{left:{_skip_check_:!0,value:0},opacity:1}}),H=new Er("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:u,opacity:1},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}}),K={position:"relative",width:P,maxWidth:`calc(100vw - ${I*2}px)`,marginBottom:u,marginInlineStart:"auto",padding:A,overflow:"hidden",lineHeight:O,wordWrap:"break-word",background:b,borderRadius:h,boxShadow:a,[`${o}-close-icon`]:{fontSize:x,cursor:"pointer"},[`${F}-message`]:{marginBottom:e.marginXS,color:y,fontSize:c,lineHeight:e.lineHeightLG},[`${F}-description`]:{fontSize:x,color:V},[`&${F}-closable ${F}-message`]:{paddingInlineEnd:e.paddingLG},[`${F}-with-icon ${F}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.marginSM+M,fontSize:c},[`${F}-with-icon ${F}-description`]:{marginInlineStart:e.marginSM+M,fontSize:x},[`${F}-icon`]:{position:"absolute",fontSize:M,lineHeight:0,[`&-success${t}`]:{color:f},[`&-info${t}`]:{color:m},[`&-warning${t}`]:{color:g},[`&-error${t}`]:{color:_}},[`${F}-close`]:{position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.wireframe?"transparent":e.colorFillContent}},[`${F}-btn`]:{float:"right",marginTop:e.marginSM}};return[{[o]:Object.assign(Object.assign(Object.assign(Object.assign({},Wu(e)),{position:"fixed",zIndex:e.zIndexPopup,marginInlineEnd:I,[`${o}-hook-holder`]:{position:"relative"},[`&${o}-top, &${o}-bottom`]:{[F]:{marginInline:"auto auto"}},[`&${o}-topLeft, &${o}-bottomLeft`]:{[F]:{marginInlineEnd:"auto",marginInlineStart:0}},[`${o}-fade-enter, ${o}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:D,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${o}-fade-leave`]:{animationTimingFunction:D,animationFillMode:"both",animationDuration:w,animationPlayState:"paused"},[`${o}-fade-enter${o}-fade-enter-active, ${o}-fade-appear${o}-fade-appear-active`]:{animationName:B,animationPlayState:"running"},[`${o}-fade-leave${o}-fade-leave-active`]:{animationName:H,animationPlayState:"running"}}),$ae(e)),{"&-rtl":{direction:"rtl",[`${F}-btn`]:{float:"left"}}})},{[o]:{[F]:Object.assign({},K)}},{[`${F}-pure-panel`]:Object.assign(Object.assign({},K),{margin:0})}]},a6=Is("Notification",e=>{const t=e.paddingMD,o=e.paddingLG,a=zi(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:t,notificationPaddingHorizontal:o,notificationIconSize:e.fontSizeLG*e.lineHeightLG,notificationCloseButtonSize:e.controlHeightLG*.55,notificationMarginBottom:e.margin,notificationPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`,notificationMarginEdge:e.marginLG,animationMaxHeight:150});return[Hae(a)]},e=>({zIndexPopup:e.zIndexPopupBase+50,width:384}));var Wae=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};function s6(e,t){return t||S.createElement("span",{className:`${e}-close-x`},S.createElement(qre,{className:`${e}-close-icon`}))}const Gae={success:D8,info:nie,error:d_,warning:k8};function c6(e){let{prefixCls:t,icon:o,type:a,message:c,description:u,btn:h,role:f="alert"}=e,m=null;return o?m=S.createElement("span",{className:`${t}-icon`},o):a&&(m=S.createElement(Gae[a]||null,{className:Be(`${t}-icon`,`${t}-icon-${a}`)})),S.createElement("div",{className:Be({[`${t}-with-icon`]:m}),role:f},m,S.createElement("div",{className:`${t}-message`},c),S.createElement("div",{className:`${t}-description`},u),h&&S.createElement("div",{className:`${t}-btn`},h))}function zae(e){const{prefixCls:t,className:o,icon:a,type:c,message:u,description:h,btn:f,closable:m=!0,closeIcon:g}=e,_=Wae(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon"]),{getPrefixCls:y}=S.useContext(Hn),b=t||y("notification"),A=`${b}-notice`,[,I]=a6(b);return S.createElement(M8,Object.assign({},_,{prefixCls:b,className:Be(o,I,`${A}-pure-panel`),eventKey:"pure",duration:null,closable:m,closeIcon:s6(b,g),content:S.createElement(c6,{prefixCls:A,icon:a,type:c,message:u,description:h,btn:f})}))}function Kae(e,t,o){let a;switch(e){case"top":a={left:"50%",transform:"translateX(-50%)",right:"auto",top:t,bottom:"auto"};break;case"topLeft":a={left:0,top:t,bottom:"auto"};break;case"topRight":a={right:0,top:t,bottom:"auto"};break;case"bottom":a={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:o};break;case"bottomLeft":a={left:0,top:"auto",bottom:o};break;default:a={right:0,top:"auto",bottom:o};break}return a}function Yae(e){return{motionName:`${e}-fade`}}var qae=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const J4=24,Xae=4.5,Jae=S.forwardRef((e,t)=>{const{top:o,bottom:a,prefixCls:c,getContainer:u,maxCount:h,rtl:f,onAllRemoved:m}=e,{getPrefixCls:g,getPopupContainer:_}=S.useContext(Hn),y=c||g("notification"),b=O=>Kae(O,o??J4,a??J4),[,A]=a6(y),I=()=>Be(A,{[`${y}-rtl`]:f}),w=()=>Yae(y),[D,x]=hie({prefixCls:y,style:b,className:I,motion:w,closable:!0,closeIcon:s6(y),duration:Xae,getContainer:()=>(u==null?void 0:u())||(_==null?void 0:_())||document.body,maxCount:h,onAllRemoved:m});return S.useImperativeHandle(t,()=>Object.assign(Object.assign({},D),{prefixCls:y,hashId:A})),x});function l6(e){const t=S.useRef(null);return[S.useMemo(()=>{const a=f=>{if(!t.current)return;const{open:m,prefixCls:g,hashId:_}=t.current,y=`${g}-notice`,{message:b,description:A,icon:I,type:w,btn:D,className:x,role:O="alert"}=f,P=qae(f,["message","description","icon","type","btn","className","role"]);return m(Object.assign(Object.assign({placement:"topRight"},P),{content:S.createElement(c6,{prefixCls:y,icon:I,type:w,message:b,description:A,btn:D,role:O}),className:Be(w&&`${y}-${w}`,_,x)}))},u={open:a,destroy:f=>{var m,g;f!==void 0?(m=t.current)===null||m===void 0||m.close(f):(g=t.current)===null||g===void 0||g.destroy()}};return["success","info","warning","error"].forEach(f=>{u[f]=m=>a(Object.assign(Object.assign({},m),{type:f}))}),u},[]),S.createElement(Jae,Object.assign({key:"notification-holder"},e,{ref:t}))]}function Qae(e){return l6(e)}const Zae=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var ese=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Kd=void 0;function tse(e,t){var o=e.prefixCls,a=e.invalidate,c=e.item,u=e.renderItem,h=e.responsive,f=e.responsiveDisabled,m=e.registerSize,g=e.itemKey,_=e.className,y=e.style,b=e.children,A=e.display,I=e.order,w=e.component,D=w===void 0?"div":w,x=dn(e,ese),O=h&&!A;function P(H){m(g,H)}S.useEffect(function(){return function(){P(null)}},[]);var M=u&&c!==Kd?u(c):b,V;a||(V={opacity:O?0:1,height:O?0:Kd,overflowY:O?"hidden":Kd,order:h?I:Kd,pointerEvents:O?"none":Kd,position:O?"absolute":Kd});var F={};O&&(F["aria-hidden"]=!0);var B=S.createElement(D,xe({className:Be(!a&&o,_),style:ve(ve({},V),y)},F,x,{ref:t}),M);return h&&(B=S.createElement(Hu,{onResize:function(K){var $=K.offsetWidth;P($)},disabled:f},B)),B}var kf=S.forwardRef(tse);kf.displayName="Item";function nse(e){if(typeof MessageChannel>"u")Hi(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}function rse(){var e=S.useRef(null),t=function(a){e.current||(e.current=[],nse(function(){Bl.unstable_batchedUpdates(function(){e.current.forEach(function(c){c()}),e.current=null})})),e.current.push(a)};return t}function of(e,t){var o=S.useState(t),a=De(o,2),c=a[0],u=a[1],h=ms(function(f){e(function(){u(f)})});return[c,h]}var mE=lt.createContext(null),ise=["component"],ose=["className"],ase=["className"],sse=function(t,o){var a=S.useContext(mE);if(!a){var c=t.component,u=c===void 0?"div":c,h=dn(t,ise);return S.createElement(u,xe({},h,{ref:o}))}var f=a.className,m=dn(a,ose),g=t.className,_=dn(t,ase);return S.createElement(mE.Provider,{value:null},S.createElement(kf,xe({ref:o,className:Be(f,g)},m,_)))},u6=S.forwardRef(sse);u6.displayName="RawItem";var cse=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],d6="responsive",h6="invalidate";function lse(e){return"+ ".concat(e.length," ...")}function use(e,t){var o=e.prefixCls,a=o===void 0?"rc-overflow":o,c=e.data,u=c===void 0?[]:c,h=e.renderItem,f=e.renderRawItem,m=e.itemKey,g=e.itemWidth,_=g===void 0?10:g,y=e.ssr,b=e.style,A=e.className,I=e.maxCount,w=e.renderRest,D=e.renderRawRest,x=e.suffix,O=e.component,P=O===void 0?"div":O,M=e.itemComponent,V=e.onVisibleChange,F=dn(e,cse),B=y==="full",H=rse(),K=of(H,null),$=De(K,2),Z=$[0],z=$[1],G=Z||0,ee=of(H,new Map),re=De(ee,2),oe=re[0],pe=re[1],ue=of(H,0),me=De(ue,2),fe=me[0],se=me[1],ae=of(H,0),de=De(ae,2),ce=de[0],we=de[1],Ie=of(H,0),He=De(Ie,2),Le=He[0],ft=He[1],gt=S.useState(null),at=De(gt,2),rt=at[0],pt=at[1],Ye=S.useState(null),yt=De(Ye,2),kt=yt[0],Lt=yt[1],Xe=S.useMemo(function(){return kt===null&&B?Number.MAX_SAFE_INTEGER:kt||0},[kt,Z]),qe=S.useState(!1),Ge=De(qe,2),nt=Ge[0],mt=Ge[1],bt="".concat(a,"-item"),wt=Math.max(fe,ce),Mt=I===d6,Yt=u.length&&Mt,Nn=I===h6,Ei=Yt||typeof I=="number"&&u.length>I,dr=S.useMemo(function(){var _t=u;return Yt?Z===null&&B?_t=u:_t=u.slice(0,Math.min(u.length,G/_)):typeof I=="number"&&(_t=u.slice(0,I)),_t},[u,_,Z,I,Yt]),Gn=S.useMemo(function(){return Yt?u.slice(Xe+1):u.slice(dr.length)},[u,dr,Yt,Xe]),mn=S.useCallback(function(_t,Qt){var an;return typeof m=="function"?m(_t):(an=m&&(_t==null?void 0:_t[m]))!==null&&an!==void 0?an:Qt},[m]),xr=S.useCallback(h||function(_t){return _t},[h]);function Cn(_t,Qt,an){kt===_t&&(Qt===void 0||Qt===rt)||(Lt(_t),an||(mt(_t<u.length-1),V==null||V(_t)),Qt!==void 0&&pt(Qt))}function Xt(_t,Qt){z(Qt.clientWidth)}function Jt(_t,Qt){pe(function(an){var _r=new Map(an);return Qt===null?_r.delete(_t):_r.set(_t,Qt),_r})}function Ro(_t,Qt){we(Qt),se(ce)}function qi(_t,Qt){ft(Qt)}function br(_t){return oe.get(mn(dr[_t],_t))}Or(function(){if(G&&typeof wt=="number"&&dr){var _t=Le,Qt=dr.length,an=Qt-1;if(!Qt){Cn(0,null);return}for(var _r=0;_r<Qt;_r+=1){var ci=br(_r);if(B&&(ci=ci||0),ci===void 0){Cn(_r-1,void 0,!0);break}if(_t+=ci,an===0&&_t<=G||_r===an-1&&_t+br(an)<=G){Cn(an,null);break}else if(_t+wt>G){Cn(_r-1,_t-ci-Le+ce);break}}x&&br(0)+Le>G&&pt(null)}},[G,oe,ce,Le,mn,dr]);var gn=nt&&!!Gn.length,Ve={};rt!==null&&Yt&&(Ve={position:"absolute",left:rt,top:0});var st={prefixCls:bt,responsive:Yt,component:M,invalidate:Nn},vn=f?function(_t,Qt){var an=mn(_t,Qt);return S.createElement(mE.Provider,{key:an,value:ve(ve({},st),{},{order:Qt,item:_t,itemKey:an,registerSize:Jt,display:Qt<=Xe})},f(_t,Qt))}:function(_t,Qt){var an=mn(_t,Qt);return S.createElement(kf,xe({},st,{order:Qt,key:an,item:_t,renderItem:xr,itemKey:an,registerSize:Jt,display:Qt<=Xe}))},Ft,_i={order:gn?Xe:Number.MAX_SAFE_INTEGER,className:"".concat(bt,"-rest"),registerSize:Ro,display:gn};if(D)D&&(Ft=S.createElement(mE.Provider,{value:ve(ve({},st),_i)},D(Gn)));else{var Pr=w||lse;Ft=S.createElement(kf,xe({},st,_i),typeof Pr=="function"?Pr(Gn):Pr)}var Xn=S.createElement(P,xe({className:Be(!Nn&&a,A),style:b,ref:t},F),dr.map(vn),Ei?Ft:null,x&&S.createElement(kf,xe({},st,{responsive:Mt,responsiveDisabled:!Yt,order:Xe,className:"".concat(bt,"-suffix"),registerSize:qi,display:!0,style:Ve}),x));return Mt&&(Xn=S.createElement(Hu,{onResize:Xt,disabled:!Yt},Xn)),Xn}var bc=S.forwardRef(use);bc.displayName="Overflow";bc.Item=u6;bc.RESPONSIVE=d6;bc.INVALIDATE=h6;var Q4=S.createContext(null);function Z4(e){return e?Array.isArray(e)?e:[e]:[]}function dse(e,t,o,a){return S.useMemo(function(){var c=Z4(o??t),u=Z4(a??t),h=new Set(c),f=new Set(u);return e&&(h.has("hover")&&(h.delete("hover"),h.add("click")),f.has("hover")&&(f.delete("hover"),f.add("click"))),[h,f]},[e,t,o,a])}function hse(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;return o?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function pse(e,t,o,a){for(var c=o.points,u=Object.keys(e),h=0;h<u.length;h+=1){var f,m=u[h];if(hse((f=e[m])===null||f===void 0?void 0:f.points,c,a))return"".concat(t,"-placement-").concat(m)}return""}function eF(e,t,o,a){return t||(o?{motionName:"".concat(e,"-").concat(o)}:a?{motionName:a}:null)}function Rm(e){return e.ownerDocument.defaultView}function CI(e){for(var t=[],o=e==null?void 0:e.parentElement,a=["hidden","scroll","clip","auto"];o;){var c=Rm(o).getComputedStyle(o),u=c.overflowX,h=c.overflowY,f=c.overflow;[u,h,f].some(function(m){return a.includes(m)})&&t.push(o),o=o.parentElement}return t}function cm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?t:e}function af(e){return cm(parseFloat(e),0)}function tF(e,t){var o=ve({},e);return(t||[]).forEach(function(a){if(!(a instanceof HTMLBodyElement)){var c=Rm(a).getComputedStyle(a),u=c.overflow,h=c.overflowClipMargin,f=c.borderTopWidth,m=c.borderBottomWidth,g=c.borderLeftWidth,_=c.borderRightWidth,y=a.getBoundingClientRect(),b=a.offsetHeight,A=a.clientHeight,I=a.offsetWidth,w=a.clientWidth,D=af(f),x=af(m),O=af(g),P=af(_),M=cm(Math.round(y.width/I*1e3)/1e3),V=cm(Math.round(y.height/b*1e3)/1e3),F=(I-w-O-P)*M,B=(b-A-D-x)*V,H=D*V,K=x*V,$=O*M,Z=P*M,z=0,G=0;if(u==="clip"){var ee=af(h);z=ee*M,G=ee*V}var re=y.x+$-z,oe=y.y+H-G,pe=re+y.width+2*z-$-Z-F,ue=oe+y.height+2*G-H-K-B;o.left=Math.max(o.left,re),o.top=Math.max(o.top,oe),o.right=Math.min(o.right,pe),o.bottom=Math.min(o.bottom,ue)}}),o}function nF(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o="".concat(t),a=o.match(/^(.*)\%$/);return a?e*(parseFloat(a[1])/100):parseFloat(o)}function rF(e,t){var o=t||[],a=De(o,2),c=a[0],u=a[1];return[nF(e.width,c),nF(e.height,u)]}function iF(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function Yd(e,t){var o=t[0],a=t[1],c,u;return o==="t"?u=e.y:o==="b"?u=e.y+e.height:u=e.y+e.height/2,a==="l"?c=e.x:a==="r"?c=e.x+e.width:c=e.x+e.width/2,{x:c,y:u}}function fl(e,t){var o={t:"b",b:"t",l:"r",r:"l"};return e.map(function(a,c){return c===t?o[a]||"c":a}).join("")}function fse(e,t,o,a,c,u,h){var f=S.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:c[a]||{}}),m=De(f,2),g=m[0],_=m[1],y=S.useRef(0),b=S.useMemo(function(){return t?CI(t):[]},[t]),A=S.useRef({}),I=function(){A.current={}};e||I();var w=ms(function(){if(t&&o&&e){let Si=function(qu,As){var nc=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yt,$c=z.x+qu,zl=z.y+As,dp=$c+ce,hp=zl+de,Xu=Math.max($c,nc.left),pp=Math.max(zl,nc.top),vt=Math.min(dp,nc.right),$t=Math.min(hp,nc.bottom);return Math.max(0,(vt-Xu)*($t-pp))},Gl=function(){Dr=z.y+Ve,xi=Dr+de,Xi=z.x+gn,ho=Xi+ce};var tc=Si,up=Gl,O=t,P=O.style.left,M=O.style.top,V=O.style.right,F=O.style.bottom,B=O.ownerDocument,H=Rm(O),K=ve(ve({},c[a]),u);O.style.left="0",O.style.top="0",O.style.right="auto",O.style.bottom="auto";var $;if(Array.isArray(o))$={x:o[0],y:o[1],width:0,height:0};else{var Z=o.getBoundingClientRect();$={x:Z.x,y:Z.y,width:Z.width,height:Z.height}}var z=O.getBoundingClientRect(),G=H.getComputedStyle(O),ee=G.width,re=G.height,oe=B.documentElement,pe=oe.clientWidth,ue=oe.clientHeight,me=oe.scrollWidth,fe=oe.scrollHeight,se=oe.scrollTop,ae=oe.scrollLeft,de=z.height,ce=z.width,we=$.height,Ie=$.width,He={left:0,top:0,right:pe,bottom:ue},Le={left:-ae,top:-se,right:me-ae,bottom:fe-se},ft=K.htmlRegion,gt="visible",at="visibleFirst";ft!=="scroll"&&ft!==at&&(ft=gt);var rt=ft===at,pt=tF(Le,b),Ye=tF(He,b),yt=ft===gt?Ye:pt,kt=rt?Ye:yt;O.style.left="auto",O.style.top="auto",O.style.right="0",O.style.bottom="0";var Lt=O.getBoundingClientRect();O.style.left=P,O.style.top=M,O.style.right=V,O.style.bottom=F;var Xe=cm(Math.round(ce/parseFloat(ee)*1e3)/1e3),qe=cm(Math.round(de/parseFloat(re)*1e3)/1e3);if(Xe===0||qe===0||nE(o)&&!p_(o))return;var Ge=K.offset,nt=K.targetOffset,mt=rF(z,Ge),bt=De(mt,2),wt=bt[0],Mt=bt[1],Yt=rF($,nt),Nn=De(Yt,2),Ei=Nn[0],dr=Nn[1];$.x-=Ei,$.y-=dr;var Gn=K.points||[],mn=De(Gn,2),xr=mn[0],Cn=mn[1],Xt=iF(Cn),Jt=iF(xr),Ro=Yd($,Xt),qi=Yd(z,Jt),br=ve({},K),gn=Ro.x-qi.x+wt,Ve=Ro.y-qi.y+Mt,st=Si(gn,Ve),vn=Si(gn,Ve,Ye),Ft=Yd($,["t","l"]),_i=Yd(z,["t","l"]),Pr=Yd($,["b","r"]),Xn=Yd(z,["b","r"]),_t=K.overflow||{},Qt=_t.adjustX,an=_t.adjustY,_r=_t.shiftX,ci=_t.shiftY,Tr=function(As){return typeof As=="boolean"?As:As>=0},Dr,xi,Xi,ho;Gl();var po=Tr(an),Xs=Jt[0]===Xt[0];if(po&&Jt[0]==="t"&&(xi>kt.bottom||A.current.bt)){var Gr=Ve;Xs?Gr-=de-we:Gr=Ft.y-Xn.y-Mt;var Js=Si(gn,Gr),Lc=Si(gn,Gr,Ye);Js>st||Js===st&&(!rt||Lc>=vn)?(A.current.bt=!0,Ve=Gr,br.points=[fl(Jt,0),fl(Xt,0)]):A.current.bt=!1}if(po&&Jt[0]==="b"&&(Dr<kt.top||A.current.tb)){var Jn=Ve;Xs?Jn+=de-we:Jn=Pr.y-_i.y-Mt;var Mc=Si(gn,Jn),Pi=Si(gn,Jn,Ye);Mc>st||Mc===st&&(!rt||Pi>=vn)?(A.current.tb=!0,Ve=Jn,br.points=[fl(Jt,0),fl(Xt,0)]):A.current.tb=!1}var Uc=Tr(Qt),Fc=Jt[1]===Xt[1];if(Uc&&Jt[1]==="l"&&(ho>kt.right||A.current.rl)){var Yo=gn;Fc?Yo-=ce-Ie:Yo=Ft.x-Xn.x-wt;var Qs=Si(Yo,Ve),qa=Si(Yo,Ve,Ye);Qs>st||Qs===st&&(!rt||qa>=vn)?(A.current.rl=!0,gn=Yo,br.points=[fl(Jt,1),fl(Xt,1)]):A.current.rl=!1}if(Uc&&Jt[1]==="r"&&(Xi<kt.left||A.current.lr)){var Io=gn;Fc?Io+=ce-Ie:Io=Pr.x-_i.x-wt;var Vc=Si(Io,Ve),jc=Si(Io,Ve,Ye);Vc>st||Vc===st&&(!rt||jc>=vn)?(A.current.lr=!0,gn=Io,br.points=[fl(Jt,1),fl(Xt,1)]):A.current.lr=!1}Gl();var Ta=_r===!0?0:_r;typeof Ta=="number"&&(Xi<Ye.left&&(gn-=Xi-Ye.left,$.x+Ie<Ye.left+Ta&&(gn+=$.x-Ye.left+Ie-Ta)),ho>Ye.right&&(gn-=ho-Ye.right,$.x>Ye.right-Ta&&(gn+=$.x-Ye.right+Ta)));var li=ci===!0?0:ci;typeof li=="number"&&(Dr<Ye.top&&(Ve-=Dr-Ye.top,$.y+we<Ye.top+li&&(Ve+=$.y-Ye.top+we-li)),xi>Ye.bottom&&(Ve-=xi-Ye.bottom,$.y>Ye.bottom-li&&(Ve+=$.y-Ye.bottom+li)));var zr=z.x+gn,qo=zr+ce,Zs=z.y+Ve,ar=Zs+de,ec=$.x,Bc=ec+Ie,Os=$.y,$l=Os+we,Hl=Math.max(zr,ec),Wl=Math.min(qo,Bc),Vn=(Hl+Wl)/2,En=Vn-zr,xn=Math.max(Zs,Os),Kr=Math.min(ar,$l),kr=(xn+Kr)/2,fo=kr-Zs;h==null||h(t,br);var Ji=Lt.right-z.x-(gn+z.width),Xa=Lt.bottom-z.y-(Ve+z.height);_({ready:!0,offsetX:gn/Xe,offsetY:Ve/qe,offsetR:Ji/Xe,offsetB:Xa/qe,arrowX:En/Xe,arrowY:fo/qe,scaleX:Xe,scaleY:qe,align:br})}}),D=function(){y.current+=1;var P=y.current;Promise.resolve().then(function(){y.current===P&&w()})},x=function(){_(function(P){return ve(ve({},P),{},{ready:!1})})};return Or(x,[a]),Or(function(){e||x()},[e]),[g.ready,g.offsetX,g.offsetY,g.offsetR,g.offsetB,g.arrowX,g.arrowY,g.scaleX,g.scaleY,g.align,D]}function mse(e,t,o,a){Or(function(){if(e&&t&&o){let y=function(){a()};var _=y,c=t,u=o,h=CI(c),f=CI(u),m=Rm(u),g=new Set([m].concat(Ze(h),Ze(f)));return g.forEach(function(b){b.addEventListener("scroll",y,{passive:!0})}),m.addEventListener("resize",y,{passive:!0}),a(),function(){g.forEach(function(b){b.removeEventListener("scroll",y),m.removeEventListener("resize",y)})}}},[e,t,o])}function gse(e,t,o,a,c,u,h,f){var m=S.useRef(e),g=S.useRef(!1);m.current!==e&&(g.current=!0,m.current=e),S.useEffect(function(){var _=Hi(function(){g.current=!1});return function(){Hi.cancel(_)}},[e]),S.useEffect(function(){if(t&&a&&(!c||u)){var _=function(){var F=!1,B=function($){var Z=$.target;F=h(Z)},H=function($){var Z=$.target;!g.current&&m.current&&!F&&!h(Z)&&f(!1)};return[B,H]},y=_(),b=De(y,2),A=b[0],I=b[1],w=_(),D=De(w,2),x=D[0],O=D[1],P=Rm(a);P.addEventListener("mousedown",A),P.addEventListener("click",I),P.addEventListener("contextmenu",I);var M=dE(o);return M&&(M.addEventListener("mousedown",x),M.addEventListener("click",O),M.addEventListener("contextmenu",O)),function(){P.removeEventListener("mousedown",A),P.removeEventListener("click",I),P.removeEventListener("contextmenu",I),M&&(M.removeEventListener("mousedown",x),M.removeEventListener("click",O),M.removeEventListener("contextmenu",O))}}},[t,o,a,c,u])}function vse(e){var t=e.prefixCls,o=e.align,a=e.arrow,c=e.arrowPos,u=a||{},h=u.className,f=u.content,m=c.x,g=m===void 0?0:m,_=c.y,y=_===void 0?0:_,b=S.useRef();if(!o||!o.points)return null;var A={position:"absolute"};if(o.autoArrow!==!1){var I=o.points[0],w=o.points[1],D=I[0],x=I[1],O=w[0],P=w[1];D===O||!["t","b"].includes(D)?A.top=y:D==="t"?A.top=0:A.bottom=0,x===P||!["l","r"].includes(x)?A.left=g:x==="l"?A.left=0:A.right=0}return S.createElement("div",{ref:b,className:Be("".concat(t,"-arrow"),h),style:A},f)}function Ese(e){var t=e.prefixCls,o=e.open,a=e.zIndex,c=e.mask,u=e.motion;return c?S.createElement(Gu,xe({},u,{motionAppear:!0,visible:o,removeOnLeave:!0}),function(h){var f=h.className;return S.createElement("div",{style:{zIndex:a},className:Be("".concat(t,"-mask"),f)})}):null}var _se=S.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),Sse=S.forwardRef(function(e,t){var o=e.popup,a=e.className,c=e.prefixCls,u=e.style,h=e.target,f=e.onVisibleChanged,m=e.open,g=e.keepDom,_=e.onClick,y=e.mask,b=e.arrow,A=e.arrowPos,I=e.align,w=e.motion,D=e.maskMotion,x=e.forceRender,O=e.getPopupContainer,P=e.autoDestroy,M=e.portal,V=e.zIndex,F=e.onMouseEnter,B=e.onMouseLeave,H=e.ready,K=e.offsetX,$=e.offsetY,Z=e.offsetR,z=e.offsetB,G=e.onAlign,ee=e.onPrepare,re=e.stretch,oe=e.targetWidth,pe=e.targetHeight,ue=typeof o=="function"?o():o,me=m||g,fe=(O==null?void 0:O.length)>0,se=S.useState(!O||!fe),ae=De(se,2),de=ae[0],ce=ae[1];if(Or(function(){!de&&fe&&h&&ce(!0)},[de,fe,h]),!de)return null;var we="auto",Ie={left:"-1000vw",top:"-1000vh",right:we,bottom:we};if(H||!m){var He=I.points,Le=I._experimental,ft=Le==null?void 0:Le.dynamicInset,gt=ft&&He[0][1]==="r",at=ft&&He[0][0]==="b";gt?(Ie.right=Z,Ie.left=we):(Ie.left=K,Ie.right=we),at?(Ie.bottom=z,Ie.top=we):(Ie.top=$,Ie.bottom=we)}var rt={};return re&&(re.includes("height")&&pe?rt.height=pe:re.includes("minHeight")&&pe&&(rt.minHeight=pe),re.includes("width")&&oe?rt.width=oe:re.includes("minWidth")&&oe&&(rt.minWidth=oe)),m||(rt.pointerEvents="none"),S.createElement(M,{open:x||me,getContainer:O&&function(){return O(h)},autoDestroy:P},S.createElement(Ese,{prefixCls:c,open:m,zIndex:V,mask:y,motion:D}),S.createElement(Hu,{onResize:G,disabled:!m},function(pt){return S.createElement(Gu,xe({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:x,leavedClassName:"".concat(c,"-hidden")},w,{onAppearPrepare:ee,onEnterPrepare:ee,visible:m,onVisibleChanged:function(yt){var kt;w==null||(kt=w.onVisibleChanged)===null||kt===void 0||kt.call(w,yt),f(yt)}}),function(Ye,yt){var kt=Ye.className,Lt=Ye.style,Xe=Be(c,kt,a);return S.createElement("div",{ref:Rs(pt,t,yt),className:Xe,style:ve(ve(ve(ve({"--arrow-x":"".concat(A.x||0,"px"),"--arrow-y":"".concat(A.y||0,"px")},Ie),rt),Lt),{},{boxSizing:"border-box",zIndex:V},u),onMouseEnter:F,onMouseLeave:B,onClick:_},b&&S.createElement(vse,{prefixCls:c,arrow:b,arrowPos:A,align:I}),S.createElement(_se,{cache:!m},ue))})}))}),yse=S.forwardRef(function(e,t){var o=e.children,a=e.getTriggerDOMNode,c=Kh(o),u=S.useCallback(function(f){V1(t,a?a(f):f)},[a]),h=j1(u,o.ref);return c?S.cloneElement(o,{ref:h}):o}),Cse=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function bse(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:z8,t=S.forwardRef(function(o,a){var c=o.prefixCls,u=c===void 0?"rc-trigger-popup":c,h=o.children,f=o.action,m=f===void 0?"hover":f,g=o.showAction,_=o.hideAction,y=o.popupVisible,b=o.defaultPopupVisible,A=o.onPopupVisibleChange,I=o.afterPopupVisibleChange,w=o.mouseEnterDelay,D=o.mouseLeaveDelay,x=D===void 0?.1:D,O=o.focusDelay,P=o.blurDelay,M=o.mask,V=o.maskClosable,F=V===void 0?!0:V,B=o.getPopupContainer,H=o.forceRender,K=o.autoDestroy,$=o.destroyPopupOnHide,Z=o.popup,z=o.popupClassName,G=o.popupStyle,ee=o.popupPlacement,re=o.builtinPlacements,oe=re===void 0?{}:re,pe=o.popupAlign,ue=o.zIndex,me=o.stretch,fe=o.getPopupClassNameFromAlign,se=o.alignPoint,ae=o.onPopupClick,de=o.onPopupAlign,ce=o.arrow,we=o.popupMotion,Ie=o.maskMotion,He=o.popupTransitionName,Le=o.popupAnimation,ft=o.maskTransitionName,gt=o.maskAnimation,at=o.className,rt=o.getTriggerDOMNode,pt=dn(o,Cse),Ye=K||$||!1,yt=S.useState(!1),kt=De(yt,2),Lt=kt[0],Xe=kt[1];Or(function(){Xe(Zae())},[]);var qe=S.useRef({}),Ge=S.useContext(Q4),nt=S.useMemo(function(){return{registerSubPopup:function($t,Pn){qe.current[$t]=Pn,Ge==null||Ge.registerSubPopup($t,Pn)}}},[Ge]),mt=boe(),bt=S.useState(null),wt=De(bt,2),Mt=wt[0],Yt=wt[1],Nn=ms(function(vt){nE(vt)&&Mt!==vt&&Yt(vt),Ge==null||Ge.registerSubPopup(mt,vt)}),Ei=S.useState(null),dr=De(Ei,2),Gn=dr[0],mn=dr[1],xr=ms(function(vt){nE(vt)&&Gn!==vt&&mn(vt)}),Cn=S.Children.only(h),Xt=(Cn==null?void 0:Cn.props)||{},Jt={},Ro=ms(function(vt){var $t,Pn,Lr=Gn;return(Lr==null?void 0:Lr.contains(vt))||(($t=dE(Lr))===null||$t===void 0?void 0:$t.host)===vt||vt===Lr||(Mt==null?void 0:Mt.contains(vt))||((Pn=dE(Mt))===null||Pn===void 0?void 0:Pn.host)===vt||vt===Mt||Object.values(qe.current).some(function(hr){return(hr==null?void 0:hr.contains(vt))||vt===hr})}),qi=eF(u,we,Le,He),br=eF(u,Ie,gt,ft),gn=S.useState(b||!1),Ve=De(gn,2),st=Ve[0],vn=Ve[1],Ft=y??st,_i=ms(function(vt){y===void 0&&vn(vt)});Or(function(){vn(y||!1)},[y]);var Pr=S.useRef(Ft);Pr.current=Ft;var Xn=ms(function(vt){Ft!==vt&&(_i(vt),A==null||A(vt))}),_t=S.useRef(),Qt=function(){clearTimeout(_t.current)},an=function($t){var Pn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Qt(),Pn===0?Xn($t):_t.current=setTimeout(function(){Xn($t)},Pn*1e3)};S.useEffect(function(){return Qt},[]);var _r=S.useState(!1),ci=De(_r,2),Tr=ci[0],Dr=ci[1];Or(function(vt){(!vt||Ft)&&Dr(!0)},[Ft]);var xi=S.useState(null),Xi=De(xi,2),ho=Xi[0],po=Xi[1],Xs=S.useState([0,0]),Gr=De(Xs,2),Js=Gr[0],Lc=Gr[1],Jn=function($t){Lc([$t.clientX,$t.clientY])},Mc=fse(Ft,Mt,se?Js:Gn,ee,oe,pe,de),Pi=De(Mc,11),Uc=Pi[0],Fc=Pi[1],Yo=Pi[2],Qs=Pi[3],qa=Pi[4],Io=Pi[5],Vc=Pi[6],jc=Pi[7],Ta=Pi[8],li=Pi[9],zr=Pi[10],qo=ms(function(){Tr||zr()});mse(Ft,Gn,Mt,qo),Or(function(){qo()},[Js,ee]),Or(function(){Ft&&!(oe!=null&&oe[ee])&&qo()},[JSON.stringify(pe)]);var Zs=S.useMemo(function(){var vt=pse(oe,u,li,se);return Be(vt,fe==null?void 0:fe(li))},[li,fe,oe,u,se]);S.useImperativeHandle(a,function(){return{forceAlign:qo}});var ar=function($t){Dr(!1),zr(),I==null||I($t)},ec=function(){return new Promise(function($t){po(function(){return $t})})};Or(function(){ho&&(zr(),ho(),po(null))},[ho]);var Bc=S.useState(0),Os=De(Bc,2),$l=Os[0],Hl=Os[1],Wl=S.useState(0),Vn=De(Wl,2),En=Vn[0],xn=Vn[1],Kr=function($t,Pn){if(qo(),me){var Lr=Pn.getBoundingClientRect();Hl(Lr.width),xn(Lr.height)}},kr=dse(Lt,m,g,_),fo=De(kr,2),Ji=fo[0],Xa=fo[1],tc=function($t,Pn,Lr,hr){Jt[$t]=function(Mm){var Ju;hr==null||hr(Mm),an(Pn,Lr);for(var Qu=arguments.length,Um=new Array(Qu>1?Qu-1:0),Zu=1;Zu<Qu;Zu++)Um[Zu-1]=arguments[Zu];(Ju=Xt[$t])===null||Ju===void 0||Ju.call.apply(Ju,[Xt,Mm].concat(Um))}},up=Ji.has("click"),Si=Xa.has("click")||Xa.has("contextMenu");(up||Si)&&(Jt.onClick=function(vt){var $t;Pr.current&&Si?an(!1):!Pr.current&&up&&(Jn(vt),an(!0));for(var Pn=arguments.length,Lr=new Array(Pn>1?Pn-1:0),hr=1;hr<Pn;hr++)Lr[hr-1]=arguments[hr];($t=Xt.onClick)===null||$t===void 0||$t.call.apply($t,[Xt,vt].concat(Lr))}),gse(Ft,Si,Gn,Mt,M,F,Ro,an);var Gl=Ji.has("hover"),qu=Xa.has("hover"),As,nc;Gl&&(tc("onMouseEnter",!0,w,function(vt){Jn(vt)}),As=function(){an(!0,w)},se&&(Jt.onMouseMove=function(vt){var $t;($t=Xt.onMouseMove)===null||$t===void 0||$t.call(Xt,vt)})),qu&&(tc("onMouseLeave",!1,x),nc=function(){an(!1,x)}),Ji.has("focus")&&tc("onFocus",!0,O),Xa.has("focus")&&tc("onBlur",!1,P),Ji.has("contextMenu")&&(Jt.onContextMenu=function(vt){var $t;Pr.current&&Xa.has("contextMenu")?an(!1):(Jn(vt),an(!0)),vt.preventDefault();for(var Pn=arguments.length,Lr=new Array(Pn>1?Pn-1:0),hr=1;hr<Pn;hr++)Lr[hr-1]=arguments[hr];($t=Xt.onContextMenu)===null||$t===void 0||$t.call.apply($t,[Xt,vt].concat(Lr))}),at&&(Jt.className=Be(Xt.className,at));var $c=ve(ve({},Xt),Jt),zl={},dp=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];dp.forEach(function(vt){pt[vt]&&(zl[vt]=function(){for(var $t,Pn=arguments.length,Lr=new Array(Pn),hr=0;hr<Pn;hr++)Lr[hr]=arguments[hr];($t=$c[vt])===null||$t===void 0||$t.call.apply($t,[$c].concat(Lr)),pt[vt].apply(pt,Lr)})});var hp=S.cloneElement(Cn,ve(ve({},$c),zl)),Xu={x:Io,y:Vc},pp=ce?ve({},ce!==!0?ce:{}):null;return S.createElement(S.Fragment,null,S.createElement(Hu,{disabled:!Ft,ref:xr,onResize:Kr},S.createElement(yse,{getTriggerDOMNode:rt},hp)),S.createElement(Q4.Provider,{value:nt},S.createElement(Sse,{portal:e,ref:Nn,prefixCls:u,popup:Z,className:Be(z,Zs),style:G,target:Gn,onMouseEnter:As,onMouseLeave:nc,zIndex:ue,open:Ft,keepDom:Tr,onClick:ae,mask:M,motion:qi,maskMotion:br,onVisibleChanged:ar,onPrepare:ec,forceRender:H,autoDestroy:Ye,getPopupContainer:B,align:li,arrow:pp,arrowPos:Xu,ready:Uc,offsetX:Fc,offsetY:Yo,offsetR:Qs,offsetB:qa,onAlign:qo,stretch:me,targetWidth:$l/jc,targetHeight:En/Ta})))});return t}const p6=bse(z8);function Lf(e,t,o){return Be({[`${e}-status-success`]:t==="success",[`${e}-status-warning`]:t==="warning",[`${e}-status-error`]:t==="error",[`${e}-status-validating`]:t==="validating",[`${e}-has-feedback`]:o})}const f6=(e,t)=>t||e;var Tse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const Rse=Tse;var Ise=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:Rse}))};const wse=S.forwardRef(Ise);var Ose={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};const Ase=Ose;var Nse=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:Ase}))};const xse=S.forwardRef(Nse),lm=["xxl","xl","lg","md","sm","xs"],Pse=e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}),Dse=e=>{const t=e,o=[].concat(lm).reverse();return o.forEach((a,c)=>{const u=a.toUpperCase(),h=`screen${u}Min`,f=`screen${u}`;if(!(t[h]<=t[f]))throw new Error(`${h}<=${f} fails : !(${t[h]}<=${t[f]})`);if(c<o.length-1){const m=`screen${u}Max`;if(!(t[f]<=t[m]))throw new Error(`${f}<=${m} fails : !(${t[f]}<=${t[m]})`);const _=`screen${o[c+1].toUpperCase()}Min`;if(!(t[m]<=t[_]))throw new Error(`${m}<=${_} fails : !(${t[m]}<=${t[_]})`)}}),e};function kse(){const[,e]=qh(),t=Pse(Dse(e));return lt.useMemo(()=>{const o=new Map;let a=-1,c={};return{matchHandlers:{},dispatch(u){return c=u,o.forEach(h=>h(c)),o.size>=1},subscribe(u){return o.size||this.register(),a+=1,o.set(a,u),u(c),a},unsubscribe(u){o.delete(u),o.size||this.unregister()},unregister(){Object.keys(t).forEach(u=>{const h=t[u],f=this.matchHandlers[h];f==null||f.mql.removeListener(f==null?void 0:f.listener)}),o.clear()},register(){Object.keys(t).forEach(u=>{const h=t[u],f=g=>{let{matches:_}=g;this.dispatch(Object.assign(Object.assign({},c),{[u]:_}))},m=window.matchMedia(h);m.addListener(f),this.matchHandlers[h]={mql:m,listener:f},f(m)})},responsiveMap:t}},[e])}var qd={shiftX:64,adjustY:1},Xd={adjustX:1,shiftY:!0},Ma=[0,0],Lse={left:{points:["cr","cl"],overflow:Xd,offset:[-4,0],targetOffset:Ma},right:{points:["cl","cr"],overflow:Xd,offset:[4,0],targetOffset:Ma},top:{points:["bc","tc"],overflow:qd,offset:[0,-4],targetOffset:Ma},bottom:{points:["tc","bc"],overflow:qd,offset:[0,4],targetOffset:Ma},topLeft:{points:["bl","tl"],overflow:qd,offset:[0,-4],targetOffset:Ma},leftTop:{points:["tr","tl"],overflow:Xd,offset:[-4,0],targetOffset:Ma},topRight:{points:["br","tr"],overflow:qd,offset:[0,-4],targetOffset:Ma},rightTop:{points:["tl","tr"],overflow:Xd,offset:[4,0],targetOffset:Ma},bottomRight:{points:["tr","br"],overflow:qd,offset:[0,4],targetOffset:Ma},rightBottom:{points:["bl","br"],overflow:Xd,offset:[4,0],targetOffset:Ma},bottomLeft:{points:["tl","bl"],overflow:qd,offset:[0,4],targetOffset:Ma},leftBottom:{points:["br","bl"],overflow:Xd,offset:[-4,0],targetOffset:Ma}};function m6(e){var t=e.children,o=e.prefixCls,a=e.id,c=e.overlayInnerStyle,u=e.className,h=e.style;return S.createElement("div",{className:Be("".concat(o,"-content"),u),style:h},S.createElement("div",{className:"".concat(o,"-inner"),id:a,role:"tooltip",style:c},typeof t=="function"?t():t))}var Mse=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],Use=function(t,o){var a=t.overlayClassName,c=t.trigger,u=c===void 0?["hover"]:c,h=t.mouseEnterDelay,f=h===void 0?0:h,m=t.mouseLeaveDelay,g=m===void 0?.1:m,_=t.overlayStyle,y=t.prefixCls,b=y===void 0?"rc-tooltip":y,A=t.children,I=t.onVisibleChange,w=t.afterVisibleChange,D=t.transitionName,x=t.animation,O=t.motion,P=t.placement,M=P===void 0?"right":P,V=t.align,F=V===void 0?{}:V,B=t.destroyTooltipOnHide,H=B===void 0?!1:B,K=t.defaultVisible,$=t.getTooltipContainer,Z=t.overlayInnerStyle;t.arrowContent;var z=t.overlay,G=t.id,ee=t.showArrow,re=ee===void 0?!0:ee,oe=dn(t,Mse),pe=S.useRef(null);S.useImperativeHandle(o,function(){return pe.current});var ue=ve({},oe);"visible"in t&&(ue.popupVisible=t.visible);var me=function(){return S.createElement(m6,{key:"content",prefixCls:b,id:G,overlayInnerStyle:Z},z)};return S.createElement(p6,xe({popupClassName:a,prefixCls:b,popup:me,action:u,builtinPlacements:Lse,popupPlacement:M,ref:pe,popupAlign:F,getPopupContainer:$,onPopupVisibleChange:I,afterPopupVisibleChange:w,popupTransitionName:D,popupAnimation:x,popupMotion:O,defaultPopupVisible:K,autoDestroy:H,mouseLeaveDelay:g,popupStyle:_,mouseEnterDelay:f,arrow:re},ue),A)};const Fse=S.forwardRef(Use),g6=8;function v6(e){const t=g6,{contentRadius:o,limitVerticalRadius:a}=e,c=o>12?o+2:12;return{dropdownArrowOffset:c,dropdownArrowOffsetVertical:a?t:c}}function Kg(e,t){return e?t:{}}function Vse(e,t){const{componentCls:o,sizePopupArrow:a,borderRadiusXS:c,borderRadiusOuter:u,boxShadowPopoverArrow:h}=e,{colorBg:f,contentRadius:m=e.borderRadiusLG,limitVerticalRadius:g,arrowDistance:_=0,arrowPlacement:y={left:!0,right:!0,top:!0,bottom:!0}}=t,{dropdownArrowOffsetVertical:b,dropdownArrowOffset:A}=v6({contentRadius:m,limitVerticalRadius:g});return{[o]:Object.assign(Object.assign(Object.assign(Object.assign({[`${o}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},jne(a,c,u,f,h)),{"&:before":{background:f}})]},Kg(!!y.top,{[[`&-placement-top ${o}-arrow`,`&-placement-topLeft ${o}-arrow`,`&-placement-topRight ${o}-arrow`].join(",")]:{bottom:_,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${o}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${o}-arrow`]:{left:{_skip_check_:!0,value:A}},[`&-placement-topRight ${o}-arrow`]:{right:{_skip_check_:!0,value:A}}})),Kg(!!y.bottom,{[[`&-placement-bottom ${o}-arrow`,`&-placement-bottomLeft ${o}-arrow`,`&-placement-bottomRight ${o}-arrow`].join(",")]:{top:_,transform:"translateY(-100%)"},[`&-placement-bottom ${o}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${o}-arrow`]:{left:{_skip_check_:!0,value:A}},[`&-placement-bottomRight ${o}-arrow`]:{right:{_skip_check_:!0,value:A}}})),Kg(!!y.left,{[[`&-placement-left ${o}-arrow`,`&-placement-leftTop ${o}-arrow`,`&-placement-leftBottom ${o}-arrow`].join(",")]:{right:{_skip_check_:!0,value:_},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${o}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${o}-arrow`]:{top:b},[`&-placement-leftBottom ${o}-arrow`]:{bottom:b}})),Kg(!!y.right,{[[`&-placement-right ${o}-arrow`,`&-placement-rightTop ${o}-arrow`,`&-placement-rightBottom ${o}-arrow`].join(",")]:{left:{_skip_check_:!0,value:_},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${o}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${o}-arrow`]:{top:b},[`&-placement-rightBottom ${o}-arrow`]:{bottom:b}}))}}function jse(e,t,o,a){if(a===!1)return{adjustX:!1,adjustY:!1};const c=a&&typeof a=="object"?a:{},u={};switch(e){case"top":case"bottom":u.shiftX=t.dropdownArrowOffset*2+o;break;case"left":case"right":u.shiftY=t.dropdownArrowOffsetVertical*2+o;break}const h=Object.assign(Object.assign({},u),c);return h.shiftX||(h.adjustX=!0),h.shiftY||(h.adjustY=!0),h}const oF={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},Bse={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},$se=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function Hse(e){const{arrowWidth:t,autoAdjustOverflow:o,arrowPointAtCenter:a,offset:c,borderRadius:u,visibleFirst:h}=e,f=t/2,m={};return Object.keys(oF).forEach(g=>{const _=a&&Bse[g]||oF[g],y=Object.assign(Object.assign({},_),{offset:[0,0]});switch(m[g]=y,$se.has(g)&&(y.autoArrow=!1),g){case"top":case"topLeft":case"topRight":y.offset[1]=-f-c;break;case"bottom":case"bottomLeft":case"bottomRight":y.offset[1]=f+c;break;case"left":case"leftTop":case"leftBottom":y.offset[0]=-f-c;break;case"right":case"rightTop":case"rightBottom":y.offset[0]=f+c;break}const b=v6({contentRadius:u,limitVerticalRadius:!0});if(a)switch(g){case"topLeft":case"bottomLeft":y.offset[0]=-b.dropdownArrowOffset-f;break;case"topRight":case"bottomRight":y.offset[0]=b.dropdownArrowOffset+f;break;case"leftTop":case"rightTop":y.offset[1]=-b.dropdownArrowOffset-f;break;case"leftBottom":case"rightBottom":y.offset[1]=b.dropdownArrowOffset+f;break}y.overflow=jse(g,b,t,o),h&&(y.htmlRegion="visibleFirst")}),m}const Wse=e=>{const t=e!=null&&e.algorithm?sE(e.algorithm):sE(ym),o=Object.assign(Object.assign({},Sm),e==null?void 0:e.token);return HB(o,{override:e==null?void 0:e.token},t,a8)},Gse=Wse;function zse(e){const{sizeUnit:t,sizeStep:o}=e,a=o-2;return{sizeXXL:t*(a+10),sizeXL:t*(a+6),sizeLG:t*(a+2),sizeMD:t*(a+2),sizeMS:t*(a+1),size:t*a,sizeSM:t*a,sizeXS:t*(a-1),sizeXXS:t*(a-1)}}const Kse=(e,t)=>{const o=t??ym(e),a=o.fontSizeSM,c=o.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o),zse(t??e)),o8(a)),{controlHeight:c}),r8(Object.assign(Object.assign({},o),{controlHeight:c})))},Yse=Kse,ml=(e,t)=>new Bi(e).setAlpha(t).toRgbString(),Jd=(e,t)=>new Bi(e).lighten(t).toHexString(),qse=e=>{const t=Ac(e,{theme:"dark"});return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[6],6:t[5],7:t[4],8:t[6],9:t[5],10:t[4]}},Xse=(e,t)=>{const o=e||"#000",a=t||"#fff";return{colorBgBase:o,colorTextBase:a,colorText:ml(a,.85),colorTextSecondary:ml(a,.65),colorTextTertiary:ml(a,.45),colorTextQuaternary:ml(a,.25),colorFill:ml(a,.18),colorFillSecondary:ml(a,.12),colorFillTertiary:ml(a,.08),colorFillQuaternary:ml(a,.04),colorBgElevated:Jd(o,12),colorBgContainer:Jd(o,8),colorBgLayout:Jd(o,0),colorBgSpotlight:Jd(o,26),colorBorder:Jd(o,26),colorBorderSecondary:Jd(o,19)}},Jse=(e,t)=>{const o=Object.keys(J1).map(c=>{const u=Ac(e[c],{theme:"dark"});return new Array(10).fill(1).reduce((h,f,m)=>(h[`${c}-${m+1}`]=u[m],h[`${c}${m+1}`]=u[m],h),{})}).reduce((c,u)=>(c=Object.assign(Object.assign({},c),u),c),{}),a=t??ym(e);return Object.assign(Object.assign(Object.assign({},a),o),i8(e,{generateColorPalettes:qse,generateNeutralColorPalettes:Xse}))},Qse=Jse;function Zse(){const[e,t,o]=qh();return{theme:e,token:t,hashId:o}}const ece={defaultConfig:lE,defaultSeed:lE.token,useToken:Zse,defaultAlgorithm:ym,darkAlgorithm:Qse,compactAlgorithm:Yse,getDesignToken:Gse},tce=e=>{const{componentCls:t,tooltipMaxWidth:o,tooltipColor:a,tooltipBg:c,tooltipBorderRadius:u,zIndexPopup:h,controlHeight:f,boxShadowSecondary:m,paddingSM:g,paddingXS:_,tooltipRadiusOuter:y}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},Wu(e)),{position:"absolute",zIndex:h,display:"block",width:"max-content",maxWidth:o,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":c,[`${t}-inner`]:{minWidth:f,minHeight:f,padding:`${g/2}px ${_}px`,color:a,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:c,borderRadius:u,boxShadow:m,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${t}-inner`]:{borderRadius:Math.min(u,g6)}},[`${t}-content`]:{position:"relative"}}),Kne(e,(b,A)=>{let{darkColor:I}=A;return{[`&${t}-${b}`]:{[`${t}-inner`]:{backgroundColor:I},[`${t}-arrow`]:{"--antd-arrow-background-color":I}}}})),{"&-rtl":{direction:"rtl"}})},Vse(zi(e,{borderRadiusOuter:y}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:u,limitVerticalRadius:!0}),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},E6=(e,t)=>Is("Tooltip",a=>{if(t===!1)return[];const{borderRadius:c,colorTextLightSolid:u,colorBgDefault:h,borderRadiusOuter:f}=a,m=zi(a,{tooltipMaxWidth:250,tooltipColor:u,tooltipBorderRadius:c,tooltipBg:h,tooltipRadiusOuter:f>4?4:f});return[tce(m),i6(a,"zoom-big-fast")]},a=>{let{zIndexPopupBase:c,colorBgSpotlight:u}=a;return{zIndexPopup:c+70,colorBgDefault:u}},{resetStyle:!1})(e),nce=cE.map(e=>`${e}-inverse`);function rce(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(Ze(nce),Ze(cE)).includes(e):cE.includes(e)}function _6(e,t){const o=rce(t),a=Be({[`${e}-${t}`]:t&&o}),c={},u={};return t&&!o&&(c.background=t,u["--antd-arrow-background-color"]=t),{className:a,overlayStyle:c,arrowStyle:u}}function ice(e){const{prefixCls:t,className:o,placement:a="top",title:c,color:u,overlayInnerStyle:h}=e,{getPrefixCls:f}=S.useContext(Hn),m=f("tooltip",t),[g,_]=E6(m,!0),y=_6(m,u),b=Object.assign(Object.assign({},h),y.overlayStyle),A=y.arrowStyle;return g(S.createElement("div",{className:Be(_,m,`${m}-pure`,`${m}-placement-${a}`,o,y.className),style:A},S.createElement("div",{className:`${m}-arrow`}),S.createElement(m6,Object.assign({},e,{className:_,prefixCls:m,overlayInnerStyle:b}),c)))}var oce=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const{useToken:ace}=ece,sce=(e,t)=>{const o={},a=Object.assign({},e);return t.forEach(c=>{e&&c in e&&(o[c]=e[c],delete a[c])}),{picked:o,omitted:a}};function cce(e,t){const o=e.type;if((o.__ANT_BUTTON===!0||e.type==="button")&&e.props.disabled||o.__ANT_SWITCH===!0&&(e.props.disabled||e.props.loading)||o.__ANT_RADIO===!0&&e.props.disabled){const{picked:a,omitted:c}=sce(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),u=Object.assign(Object.assign({display:"inline-block"},a),{cursor:"not-allowed",width:e.props.block?"100%":void 0}),h=Object.assign(Object.assign({},c),{pointerEvents:"none"}),f=Cs(e,{style:h,className:null});return S.createElement("span",{style:u,className:Be(e.props.className,`${t}-disabled-compatible-wrapper`)},f)}return e}const S6=S.forwardRef((e,t)=>{var o,a;const{prefixCls:c,openClassName:u,getTooltipContainer:h,overlayClassName:f,color:m,overlayInnerStyle:g,children:_,afterOpenChange:y,afterVisibleChange:b,destroyTooltipOnHide:A,arrow:I=!0,title:w,overlay:D,builtinPlacements:x,arrowPointAtCenter:O=!1,autoAdjustOverflow:P=!0}=e,M=!!I,{token:V}=ace(),{getPopupContainer:F,getPrefixCls:B,direction:H}=S.useContext(Hn),K=S.useRef(null),$=()=>{var Xe;(Xe=K.current)===null||Xe===void 0||Xe.forceAlign()};S.useImperativeHandle(t,()=>({forceAlign:$,forcePopupAlign:()=>{$()}}));const[Z,z]=Cc(!1,{value:(o=e.open)!==null&&o!==void 0?o:e.visible,defaultValue:(a=e.defaultOpen)!==null&&a!==void 0?a:e.defaultVisible}),G=!w&&!D&&w!==0,ee=Xe=>{var qe,Ge;z(G?!1:Xe),G||((qe=e.onOpenChange)===null||qe===void 0||qe.call(e,Xe),(Ge=e.onVisibleChange)===null||Ge===void 0||Ge.call(e,Xe))},re=S.useMemo(()=>{var Xe,qe;let Ge=O;return typeof I=="object"&&(Ge=(qe=(Xe=I.pointAtCenter)!==null&&Xe!==void 0?Xe:I.arrowPointAtCenter)!==null&&qe!==void 0?qe:O),x||Hse({arrowPointAtCenter:Ge,autoAdjustOverflow:P,arrowWidth:M?V.sizePopupArrow:0,borderRadius:V.borderRadius,offset:V.marginXXS,visibleFirst:!0})},[O,I,x,V]),oe=S.useMemo(()=>w===0?w:D||w||"",[D,w]),pe=S.createElement(cI,null,typeof oe=="function"?oe():oe),{getPopupContainer:ue,placement:me="top",mouseEnterDelay:fe=.1,mouseLeaveDelay:se=.1,overlayStyle:ae,rootClassName:de}=e,ce=oce(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),we=B("tooltip",c),Ie=B(),He=e["data-popover-inject"];let Le=Z;!("open"in e)&&!("visible"in e)&&G&&(Le=!1);const ft=cce(Ll(_)&&!L8(_)?_:S.createElement("span",null,_),we),gt=ft.props,at=!gt.className||typeof gt.className=="string"?Be(gt.className,{[u||`${we}-open`]:!0}):gt.className,[rt,pt]=E6(we,!He),Ye=_6(we,m),yt=Object.assign(Object.assign({},g),Ye.overlayStyle),kt=Ye.arrowStyle,Lt=Be(f,{[`${we}-rtl`]:H==="rtl"},Ye.className,de,pt);return rt(S.createElement(Fse,Object.assign({},ce,{showArrow:M,placement:me,mouseEnterDelay:fe,mouseLeaveDelay:se,prefixCls:we,overlayClassName:Lt,overlayStyle:Object.assign(Object.assign({},kt),ae),getTooltipContainer:ue||h||F,ref:K,builtinPlacements:re,overlay:pe,visible:Le,onVisibleChange:ee,afterVisibleChange:y??b,overlayInnerStyle:yt,arrowContent:S.createElement("span",{className:`${we}-arrow-content`}),motion:{motionName:moe(Ie,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!A}),Le?Cs(ft,{className:at}):ft))});S6._InternalPanelDoNotUseOrYouWillBeFired=ice;const um=S6;var lce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};const uce=lce;var dce=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:uce}))};const aF=S.forwardRef(dce);var y6=S.createContext(null);function uw(e,t){return e===void 0?null:"".concat(e,"-").concat(t)}function C6(e){var t=S.useContext(y6);return uw(t,e)}var hce=["children","locked"],bs=S.createContext(null);function pce(e,t){var o=ve({},e);return Object.keys(t).forEach(function(a){var c=t[a];c!==void 0&&(o[a]=c)}),o}function dm(e){var t=e.children,o=e.locked,a=dn(e,hce),c=S.useContext(bs),u=r_(function(){return pce(c,a)},[c,a],function(h,f){return!o&&(h[0]!==f[0]||!W1(h[1],f[1],!0))});return S.createElement(bs.Provider,{value:u},t)}var fce=[],b6=S.createContext(null);function f_(){return S.useContext(b6)}var T6=S.createContext(fce);function ep(e){var t=S.useContext(T6);return S.useMemo(function(){return e!==void 0?[].concat(Ze(t),[e]):t},[t,e])}var R6=S.createContext(null),dw=S.createContext({});function sF(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(p_(e)){var o=e.nodeName.toLowerCase(),a=["input","select","textarea","button"].includes(o)||e.isContentEditable||o==="a"&&!!e.getAttribute("href"),c=e.getAttribute("tabindex"),u=Number(c),h=null;return c&&!Number.isNaN(u)?h=u:a&&h===null&&(h=0),a&&e.disabled&&(h=null),h!==null&&(h>=0||t&&h<0)}return!1}function mce(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=Ze(e.querySelectorAll("*")).filter(function(a){return sF(a,t)});return sF(e,t)&&o.unshift(e),o}var bI=ht.LEFT,TI=ht.RIGHT,RI=ht.UP,bv=ht.DOWN,Tv=ht.ENTER,I6=ht.ESC,sf=ht.HOME,cf=ht.END,cF=[RI,bv,bI,TI];function gce(e,t,o,a){var c,u,h,f,m="prev",g="next",_="children",y="parent";if(e==="inline"&&a===Tv)return{inlineTrigger:!0};var b=(c={},Qe(c,RI,m),Qe(c,bv,g),c),A=(u={},Qe(u,bI,o?g:m),Qe(u,TI,o?m:g),Qe(u,bv,_),Qe(u,Tv,_),u),I=(h={},Qe(h,RI,m),Qe(h,bv,g),Qe(h,Tv,_),Qe(h,I6,y),Qe(h,bI,o?_:y),Qe(h,TI,o?y:_),h),w={inline:b,horizontal:A,vertical:I,inlineSub:b,horizontalSub:I,verticalSub:I},D=(f=w["".concat(e).concat(t?"":"Sub")])===null||f===void 0?void 0:f[a];switch(D){case m:return{offset:-1,sibling:!0};case g:return{offset:1,sibling:!0};case y:return{offset:-1,sibling:!1};case _:return{offset:1,sibling:!1};default:return null}}function vce(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}function Ece(e,t){for(var o=e||document.activeElement;o;){if(t.has(o))return o;o=o.parentElement}return null}function w6(e,t){var o=mce(e,!0);return o.filter(function(a){return t.has(a)})}function lF(e,t,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!e)return null;var c=w6(e,t),u=c.length,h=c.findIndex(function(f){return o===f});return a<0?h===-1?h=u-1:h-=1:a>0&&(h+=1),h=(h+u)%u,c[h]}function _ce(e,t,o,a,c,u,h,f,m,g){var _=S.useRef(),y=S.useRef();y.current=t;var b=function(){Hi.cancel(_.current)};return S.useEffect(function(){return function(){b()}},[]),function(A){var I=A.which;if([].concat(cF,[Tv,I6,sf,cf]).includes(I)){var w,D,x,O=function(){w=new Set,D=new Map,x=new Map;var re=u();return re.forEach(function(oe){var pe=document.querySelector("[data-menu-id='".concat(uw(a,oe),"']"));pe&&(w.add(pe),x.set(pe,oe),D.set(oe,pe))}),w};O();var P=D.get(t),M=Ece(P,w),V=x.get(M),F=gce(e,h(V,!0).length===1,o,I);if(!F&&I!==sf&&I!==cf)return;(cF.includes(I)||[sf,cf].includes(I))&&A.preventDefault();var B=function(re){if(re){var oe=re,pe=re.querySelector("a");pe!=null&&pe.getAttribute("href")&&(oe=pe);var ue=x.get(re);f(ue),b(),_.current=Hi(function(){y.current===ue&&oe.focus()})}};if([sf,cf].includes(I)||F.sibling||!M){var H;!M||e==="inline"?H=c.current:H=vce(M);var K,$=w6(H,w);I===sf?K=$[0]:I===cf?K=$[$.length-1]:K=lF(H,w,M,F.offset),B(K)}else if(F.inlineTrigger)m(V);else if(F.offset>0)m(V,!0),b(),_.current=Hi(function(){O();var ee=M.getAttribute("aria-controls"),re=document.getElementById(ee),oe=lF(re,w);B(oe)},5);else if(F.offset<0){var Z=h(V,!0),z=Z[Z.length-2],G=D.get(z);m(z,!1),B(G)}}g==null||g(A)}}function Sce(e){Promise.resolve().then(e)}var hw="__RC_UTIL_PATH_SPLIT__",uF=function(t){return t.join(hw)},yce=function(t){return t.split(hw)},II="rc-menu-more";function Cce(){var e=S.useState({}),t=De(e,2),o=t[1],a=S.useRef(new Map),c=S.useRef(new Map),u=S.useState([]),h=De(u,2),f=h[0],m=h[1],g=S.useRef(0),_=S.useRef(!1),y=function(){_.current||o({})},b=S.useCallback(function(P,M){var V=uF(M);c.current.set(V,P),a.current.set(P,V),g.current+=1;var F=g.current;Sce(function(){F===g.current&&y()})},[]),A=S.useCallback(function(P,M){var V=uF(M);c.current.delete(V),a.current.delete(P)},[]),I=S.useCallback(function(P){m(P)},[]),w=S.useCallback(function(P,M){var V=a.current.get(P)||"",F=yce(V);return M&&f.includes(F[0])&&F.unshift(II),F},[f]),D=S.useCallback(function(P,M){return P.some(function(V){var F=w(V,!0);return F.includes(M)})},[w]),x=function(){var M=Ze(a.current.keys());return f.length&&M.push(II),M},O=S.useCallback(function(P){var M="".concat(a.current.get(P)).concat(hw),V=new Set;return Ze(c.current.keys()).forEach(function(F){F.startsWith(M)&&V.add(c.current.get(F))}),V},[]);return S.useEffect(function(){return function(){_.current=!0}},[]),{registerPath:b,unregisterPath:A,refreshOverflowKeys:I,isSubPathKey:D,getKeyPath:w,getKeys:x,getSubPathKeys:O}}function _f(e){var t=S.useRef(e);t.current=e;var o=S.useCallback(function(){for(var a,c=arguments.length,u=new Array(c),h=0;h<c;h++)u[h]=arguments[h];return(a=t.current)===null||a===void 0?void 0:a.call.apply(a,[t].concat(u))},[]);return e?o:void 0}var bce=Math.random().toFixed(5).toString().slice(2),dF=0;function Tce(e){var t=Cc(e,{value:e}),o=De(t,2),a=o[0],c=o[1];return S.useEffect(function(){dF+=1;var u="".concat(bce,"-").concat(dF);c("rc-menu-uuid-".concat(u))},[]),a}function O6(e,t,o,a){var c=S.useContext(bs),u=c.activeKey,h=c.onActive,f=c.onInactive,m={active:u===e};return t||(m.onMouseEnter=function(g){o==null||o({key:e,domEvent:g}),h(e)},m.onMouseLeave=function(g){a==null||a({key:e,domEvent:g}),f(e)}),m}function A6(e){var t=S.useContext(bs),o=t.mode,a=t.rtl,c=t.inlineIndent;if(o!=="inline")return null;var u=e;return a?{paddingRight:u*c}:{paddingLeft:u*c}}function N6(e){var t=e.icon,o=e.props,a=e.children,c;return typeof t=="function"?c=S.createElement(t,ve({},o)):c=t,c||a||null}var Rce=["item"];function gE(e){var t=e.item,o=dn(e,Rce);return Object.defineProperty(o,"item",{get:function(){return yo(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),o}var Ice=["title","attribute","elementRef"],wce=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],Oce=["active"],Ace=function(e){Gh(o,e);var t=zh(o);function o(){return za(this,o),t.apply(this,arguments)}return Ka(o,[{key:"render",value:function(){var c=this.props,u=c.title,h=c.attribute,f=c.elementRef,m=dn(c,Ice),g=Ko(m,["eventKey","popupClassName","popupOffset","onTitleClick"]);return yo(!h,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),S.createElement(bc.Item,xe({},h,{title:typeof u=="string"?u:void 0},g,{ref:f}))}}]),o}(S.Component),Nce=S.forwardRef(function(e,t){var o,a=e.style,c=e.className,u=e.eventKey;e.warnKey;var h=e.disabled,f=e.itemIcon,m=e.children,g=e.role,_=e.onMouseEnter,y=e.onMouseLeave,b=e.onClick,A=e.onKeyDown,I=e.onFocus,w=dn(e,wce),D=C6(u),x=S.useContext(bs),O=x.prefixCls,P=x.onItemClick,M=x.disabled,V=x.overflowDisabled,F=x.itemIcon,B=x.selectedKeys,H=x.onActive,K=S.useContext(dw),$=K._internalRenderMenuItem,Z="".concat(O,"-item"),z=S.useRef(),G=S.useRef(),ee=M||h,re=j1(t,G),oe=ep(u),pe=function(gt){return{key:u,keyPath:Ze(oe).reverse(),item:z.current,domEvent:gt}},ue=f||F,me=O6(u,ee,_,y),fe=me.active,se=dn(me,Oce),ae=B.includes(u),de=A6(oe.length),ce=function(gt){if(!ee){var at=pe(gt);b==null||b(gE(at)),P(at)}},we=function(gt){if(A==null||A(gt),gt.which===ht.ENTER){var at=pe(gt);b==null||b(gE(at)),P(at)}},Ie=function(gt){H(u),I==null||I(gt)},He={};e.role==="option"&&(He["aria-selected"]=ae);var Le=S.createElement(Ace,xe({ref:z,elementRef:re,role:g===null?"none":g||"menuitem",tabIndex:h?null:-1,"data-menu-id":V&&D?null:D},w,se,He,{component:"li","aria-disabled":h,style:ve(ve({},de),a),className:Be(Z,(o={},Qe(o,"".concat(Z,"-active"),fe),Qe(o,"".concat(Z,"-selected"),ae),Qe(o,"".concat(Z,"-disabled"),ee),o),c),onClick:ce,onKeyDown:we,onFocus:Ie}),m,S.createElement(N6,{props:ve(ve({},e),{},{isSelected:ae}),icon:ue}));return $&&(Le=$(Le,e,{selected:ae})),Le});function xce(e,t){var o=e.eventKey,a=f_(),c=ep(o);return S.useEffect(function(){if(a)return a.registerPath(o,c),function(){a.unregisterPath(o,c)}},[c]),a?null:S.createElement(Nce,xe({},e,{ref:t}))}const m_=S.forwardRef(xce);var Pce=["className","children"],Dce=function(t,o){var a=t.className,c=t.children,u=dn(t,Pce),h=S.useContext(bs),f=h.prefixCls,m=h.mode,g=h.rtl;return S.createElement("ul",xe({className:Be(f,g&&"".concat(f,"-rtl"),"".concat(f,"-sub"),"".concat(f,"-").concat(m==="inline"?"inline":"vertical"),a),role:"menu"},u,{"data-menu-list":!0,ref:o}),c)},pw=S.forwardRef(Dce);pw.displayName="SubMenuList";var kce=["label","children","key","type"];function fw(e,t){return Oc(e).map(function(o,a){if(S.isValidElement(o)){var c,u,h=o.key,f=(c=(u=o.props)===null||u===void 0?void 0:u.eventKey)!==null&&c!==void 0?c:h,m=f==null;m&&(f="tmp_key-".concat([].concat(Ze(t),[a]).join("-")));var g={key:f,eventKey:f};return S.cloneElement(o,g)}return o})}function wI(e){return(e||[]).map(function(t,o){if(t&&Rn(t)==="object"){var a=t,c=a.label,u=a.children,h=a.key,f=a.type,m=dn(a,kce),g=h??"tmp-".concat(o);return u||f==="group"?f==="group"?S.createElement(v_,xe({key:g},m,{title:c}),wI(u)):S.createElement(g_,xe({key:g},m,{title:c}),wI(u)):f==="divider"?S.createElement(mw,xe({key:g},m)):S.createElement(m_,xe({key:g},m),c)}return null}).filter(function(t){return t})}function Lce(e,t,o){var a=e;return t&&(a=wI(t)),fw(a,o)}var co={adjustX:1,adjustY:1},Mce={topLeft:{points:["bl","tl"],overflow:co},topRight:{points:["br","tr"],overflow:co},bottomLeft:{points:["tl","bl"],overflow:co},bottomRight:{points:["tr","br"],overflow:co},leftTop:{points:["tr","tl"],overflow:co},leftBottom:{points:["br","bl"],overflow:co},rightTop:{points:["tl","tr"],overflow:co},rightBottom:{points:["bl","br"],overflow:co}},Uce={topLeft:{points:["bl","tl"],overflow:co},topRight:{points:["br","tr"],overflow:co},bottomLeft:{points:["tl","bl"],overflow:co},bottomRight:{points:["tr","br"],overflow:co},rightTop:{points:["tr","tl"],overflow:co},rightBottom:{points:["br","bl"],overflow:co},leftTop:{points:["tl","tr"],overflow:co},leftBottom:{points:["bl","br"],overflow:co}};function x6(e,t,o){if(t)return t;if(o)return o[e]||o.other}var Fce={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Vce(e){var t=e.prefixCls,o=e.visible,a=e.children,c=e.popup,u=e.popupClassName,h=e.popupOffset,f=e.disabled,m=e.mode,g=e.onVisibleChange,_=S.useContext(bs),y=_.getPopupContainer,b=_.rtl,A=_.subMenuOpenDelay,I=_.subMenuCloseDelay,w=_.builtinPlacements,D=_.triggerSubMenuAction,x=_.forceSubMenuRender,O=_.rootClassName,P=_.motion,M=_.defaultMotions,V=S.useState(!1),F=De(V,2),B=F[0],H=F[1],K=ve(b?ve({},Uce):ve({},Mce),w),$=Fce[m],Z=x6(m,P,M),z=S.useRef(Z);m!=="inline"&&(z.current=Z);var G=ve(ve({},z.current),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),ee=S.useRef();return S.useEffect(function(){return ee.current=Hi(function(){H(o)}),function(){Hi.cancel(ee.current)}},[o]),S.createElement(p6,{prefixCls:t,popupClassName:Be("".concat(t,"-popup"),Qe({},"".concat(t,"-rtl"),b),u,O),stretch:m==="horizontal"?"minWidth":null,getPopupContainer:y,builtinPlacements:K,popupPlacement:$,popupVisible:B,popup:c,popupAlign:h&&{offset:h},action:f?[]:[D],mouseEnterDelay:A,mouseLeaveDelay:I,onPopupVisibleChange:g,forceRender:x,popupMotion:G},a)}function jce(e){var t=e.id,o=e.open,a=e.keyPath,c=e.children,u="inline",h=S.useContext(bs),f=h.prefixCls,m=h.forceSubMenuRender,g=h.motion,_=h.defaultMotions,y=h.mode,b=S.useRef(!1);b.current=y===u;var A=S.useState(!b.current),I=De(A,2),w=I[0],D=I[1],x=b.current?o:!1;S.useEffect(function(){b.current&&D(!1)},[y]);var O=ve({},x6(u,g,_));a.length>1&&(O.motionAppear=!1);var P=O.onVisibleChanged;return O.onVisibleChanged=function(M){return!b.current&&!M&&D(!0),P==null?void 0:P(M)},w?null:S.createElement(dm,{mode:u,locked:!b.current},S.createElement(Gu,xe({visible:x},O,{forceRender:m,removeOnLeave:!1,leavedClassName:"".concat(f,"-hidden")}),function(M){var V=M.className,F=M.style;return S.createElement(pw,{id:t,className:V,style:F},c)}))}var Bce=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],$ce=["active"],Hce=function(t){var o,a=t.style,c=t.className,u=t.title,h=t.eventKey;t.warnKey;var f=t.disabled,m=t.internalPopupClose,g=t.children,_=t.itemIcon,y=t.expandIcon,b=t.popupClassName,A=t.popupOffset,I=t.onClick,w=t.onMouseEnter,D=t.onMouseLeave,x=t.onTitleClick,O=t.onTitleMouseEnter,P=t.onTitleMouseLeave,M=dn(t,Bce),V=C6(h),F=S.useContext(bs),B=F.prefixCls,H=F.mode,K=F.openKeys,$=F.disabled,Z=F.overflowDisabled,z=F.activeKey,G=F.selectedKeys,ee=F.itemIcon,re=F.expandIcon,oe=F.onItemClick,pe=F.onOpenChange,ue=F.onActive,me=S.useContext(dw),fe=me._internalRenderSubMenuItem,se=S.useContext(R6),ae=se.isSubPathKey,de=ep(),ce="".concat(B,"-submenu"),we=$||f,Ie=S.useRef(),He=S.useRef(),Le=_||ee,ft=y||re,gt=K.includes(h),at=!Z&&gt,rt=ae(G,h),pt=O6(h,we,O,P),Ye=pt.active,yt=dn(pt,$ce),kt=S.useState(!1),Lt=De(kt,2),Xe=Lt[0],qe=Lt[1],Ge=function(Jt){we||qe(Jt)},nt=function(Jt){Ge(!0),w==null||w({key:h,domEvent:Jt})},mt=function(Jt){Ge(!1),D==null||D({key:h,domEvent:Jt})},bt=S.useMemo(function(){return Ye||(H!=="inline"?Xe||ae([z],h):!1)},[H,Ye,z,Xe,h,ae]),wt=A6(de.length),Mt=function(Jt){we||(x==null||x({key:h,domEvent:Jt}),H==="inline"&&pe(h,!gt))},Yt=_f(function(Xt){I==null||I(gE(Xt)),oe(Xt)}),Nn=function(Jt){H!=="inline"&&pe(h,Jt)},Ei=function(){ue(h)},dr=V&&"".concat(V,"-popup"),Gn=S.createElement("div",xe({role:"menuitem",style:wt,className:"".concat(ce,"-title"),tabIndex:we?null:-1,ref:Ie,title:typeof u=="string"?u:null,"data-menu-id":Z&&V?null:V,"aria-expanded":at,"aria-haspopup":!0,"aria-controls":dr,"aria-disabled":we,onClick:Mt,onFocus:Ei},yt),u,S.createElement(N6,{icon:H!=="horizontal"?ft:null,props:ve(ve({},t),{},{isOpen:at,isSubMenu:!0})},S.createElement("i",{className:"".concat(ce,"-arrow")}))),mn=S.useRef(H);if(H!=="inline"&&de.length>1?mn.current="vertical":mn.current=H,!Z){var xr=mn.current;Gn=S.createElement(Vce,{mode:xr,prefixCls:ce,visible:!m&&at&&H!=="inline",popupClassName:b,popupOffset:A,popup:S.createElement(dm,{mode:xr==="horizontal"?"vertical":xr},S.createElement(pw,{id:dr,ref:He},g)),disabled:we,onVisibleChange:Nn},Gn)}var Cn=S.createElement(bc.Item,xe({role:"none"},M,{component:"li",style:a,className:Be(ce,"".concat(ce,"-").concat(H),c,(o={},Qe(o,"".concat(ce,"-open"),at),Qe(o,"".concat(ce,"-active"),bt),Qe(o,"".concat(ce,"-selected"),rt),Qe(o,"".concat(ce,"-disabled"),we),o)),onMouseEnter:nt,onMouseLeave:mt}),Gn,!Z&&S.createElement(jce,{id:dr,open:at,keyPath:de},g));return fe&&(Cn=fe(Cn,t,{selected:rt,active:bt,open:at,disabled:we})),S.createElement(dm,{onItemClick:Yt,mode:H==="horizontal"?"vertical":H,itemIcon:Le,expandIcon:ft},Cn)};function g_(e){var t=e.eventKey,o=e.children,a=ep(t),c=fw(o,a),u=f_();S.useEffect(function(){if(u)return u.registerPath(t,a),function(){u.unregisterPath(t,a)}},[a]);var h;return u?h=c:h=S.createElement(Hce,e,c),S.createElement(T6.Provider,{value:a},h)}var Wce=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],Qd=[],Gce=S.forwardRef(function(e,t){var o,a,c=e,u=c.prefixCls,h=u===void 0?"rc-menu":u,f=c.rootClassName,m=c.style,g=c.className,_=c.tabIndex,y=_===void 0?0:_,b=c.items,A=c.children,I=c.direction,w=c.id,D=c.mode,x=D===void 0?"vertical":D,O=c.inlineCollapsed,P=c.disabled,M=c.disabledOverflow,V=c.subMenuOpenDelay,F=V===void 0?.1:V,B=c.subMenuCloseDelay,H=B===void 0?.1:B,K=c.forceSubMenuRender,$=c.defaultOpenKeys,Z=c.openKeys,z=c.activeKey,G=c.defaultActiveFirst,ee=c.selectable,re=ee===void 0?!0:ee,oe=c.multiple,pe=oe===void 0?!1:oe,ue=c.defaultSelectedKeys,me=c.selectedKeys,fe=c.onSelect,se=c.onDeselect,ae=c.inlineIndent,de=ae===void 0?24:ae,ce=c.motion,we=c.defaultMotions,Ie=c.triggerSubMenuAction,He=Ie===void 0?"hover":Ie,Le=c.builtinPlacements,ft=c.itemIcon,gt=c.expandIcon,at=c.overflowedIndicator,rt=at===void 0?"...":at,pt=c.overflowedIndicatorPopupClassName,Ye=c.getPopupContainer,yt=c.onClick,kt=c.onOpenChange,Lt=c.onKeyDown;c.openAnimation,c.openTransitionName;var Xe=c._internalRenderMenuItem,qe=c._internalRenderSubMenuItem,Ge=dn(c,Wce),nt=S.useMemo(function(){return Lce(A,b,Qd)},[A,b]),mt=S.useState(!1),bt=De(mt,2),wt=bt[0],Mt=bt[1],Yt=S.useRef(),Nn=Tce(w),Ei=I==="rtl",dr=Cc($,{value:Z,postState:function(En){return En||Qd}}),Gn=De(dr,2),mn=Gn[0],xr=Gn[1],Cn=function(En){var xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function Kr(){xr(En),kt==null||kt(En)}xn?Bl.flushSync(Kr):Kr()},Xt=S.useState(mn),Jt=De(Xt,2),Ro=Jt[0],qi=Jt[1],br=S.useRef(!1),gn=S.useMemo(function(){return(x==="inline"||x==="vertical")&&O?["vertical",O]:[x,!1]},[x,O]),Ve=De(gn,2),st=Ve[0],vn=Ve[1],Ft=st==="inline",_i=S.useState(st),Pr=De(_i,2),Xn=Pr[0],_t=Pr[1],Qt=S.useState(vn),an=De(Qt,2),_r=an[0],ci=an[1];S.useEffect(function(){_t(st),ci(vn),br.current&&(Ft?xr(Ro):Cn(Qd))},[st,vn]);var Tr=S.useState(0),Dr=De(Tr,2),xi=Dr[0],Xi=Dr[1],ho=xi>=nt.length-1||Xn!=="horizontal"||M;S.useEffect(function(){Ft&&qi(mn)},[mn]),S.useEffect(function(){return br.current=!0,function(){br.current=!1}},[]);var po=Cce(),Xs=po.registerPath,Gr=po.unregisterPath,Js=po.refreshOverflowKeys,Lc=po.isSubPathKey,Jn=po.getKeyPath,Mc=po.getKeys,Pi=po.getSubPathKeys,Uc=S.useMemo(function(){return{registerPath:Xs,unregisterPath:Gr}},[Xs,Gr]),Fc=S.useMemo(function(){return{isSubPathKey:Lc}},[Lc]);S.useEffect(function(){Js(ho?Qd:nt.slice(xi+1).map(function(Vn){return Vn.key}))},[xi,ho]);var Yo=Cc(z||G&&((o=nt[0])===null||o===void 0?void 0:o.key),{value:z}),Qs=De(Yo,2),qa=Qs[0],Io=Qs[1],Vc=_f(function(Vn){Io(Vn)}),jc=_f(function(){Io(void 0)});S.useImperativeHandle(t,function(){return{list:Yt.current,focus:function(En){var xn,Kr=qa??((xn=nt.find(function(Xa){return!Xa.props.disabled}))===null||xn===void 0?void 0:xn.key);if(Kr){var kr,fo,Ji;(kr=Yt.current)===null||kr===void 0||(fo=kr.querySelector("li[data-menu-id='".concat(uw(Nn,Kr),"']")))===null||fo===void 0||(Ji=fo.focus)===null||Ji===void 0||Ji.call(fo,En)}}}});var Ta=Cc(ue||[],{value:me,postState:function(En){return Array.isArray(En)?En:En==null?Qd:[En]}}),li=De(Ta,2),zr=li[0],qo=li[1],Zs=function(En){if(re){var xn=En.key,Kr=zr.includes(xn),kr;pe?Kr?kr=zr.filter(function(Ji){return Ji!==xn}):kr=[].concat(Ze(zr),[xn]):kr=[xn],qo(kr);var fo=ve(ve({},En),{},{selectedKeys:kr});Kr?se==null||se(fo):fe==null||fe(fo)}!pe&&mn.length&&Xn!=="inline"&&Cn(Qd)},ar=_f(function(Vn){yt==null||yt(gE(Vn)),Zs(Vn)}),ec=_f(function(Vn,En){var xn=mn.filter(function(kr){return kr!==Vn});if(En)xn.push(Vn);else if(Xn!=="inline"){var Kr=Pi(Vn);xn=xn.filter(function(kr){return!Kr.has(kr)})}W1(mn,xn,!0)||Cn(xn,!0)}),Bc=function(En,xn){var Kr=xn??!mn.includes(En);ec(En,Kr)},Os=_ce(Xn,qa,Ei,Nn,Yt,Mc,Jn,Io,Bc,Lt);S.useEffect(function(){Mt(!0)},[]);var $l=S.useMemo(function(){return{_internalRenderMenuItem:Xe,_internalRenderSubMenuItem:qe}},[Xe,qe]),Hl=Xn!=="horizontal"||M?nt:nt.map(function(Vn,En){return S.createElement(dm,{key:Vn.key,overflowDisabled:En>xi},Vn)}),Wl=S.createElement(bc,xe({id:w,ref:Yt,prefixCls:"".concat(h,"-overflow"),component:"ul",itemComponent:m_,className:Be(h,"".concat(h,"-root"),"".concat(h,"-").concat(Xn),g,(a={},Qe(a,"".concat(h,"-inline-collapsed"),_r),Qe(a,"".concat(h,"-rtl"),Ei),a),f),dir:I,style:m,role:"menu",tabIndex:y,data:Hl,renderRawItem:function(En){return En},renderRawRest:function(En){var xn=En.length,Kr=xn?nt.slice(-xn):null;return S.createElement(g_,{eventKey:II,title:rt,disabled:ho,internalPopupClose:xn===0,popupClassName:pt},Kr)},maxCount:Xn!=="horizontal"||M?bc.INVALIDATE:bc.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(En){Xi(En)},onKeyDown:Os},Ge));return S.createElement(dw.Provider,{value:$l},S.createElement(y6.Provider,{value:Nn},S.createElement(dm,{prefixCls:h,rootClassName:f,mode:Xn,openKeys:mn,rtl:Ei,disabled:P,motion:wt?ce:null,defaultMotions:wt?we:null,activeKey:qa,onActive:Vc,onInactive:jc,selectedKeys:zr,inlineIndent:de,subMenuOpenDelay:F,subMenuCloseDelay:H,forceSubMenuRender:K,builtinPlacements:Le,triggerSubMenuAction:He,getPopupContainer:Ye,itemIcon:ft,expandIcon:gt,onItemClick:ar,onOpenChange:ec},S.createElement(R6.Provider,{value:Fc},Wl),S.createElement("div",{style:{display:"none"},"aria-hidden":!0},S.createElement(b6.Provider,{value:Uc},nt)))))}),zce=["className","title","eventKey","children"],Kce=["children"],Yce=function(t){var o=t.className,a=t.title;t.eventKey;var c=t.children,u=dn(t,zce),h=S.useContext(bs),f=h.prefixCls,m="".concat(f,"-item-group");return S.createElement("li",xe({role:"presentation"},u,{onClick:function(_){return _.stopPropagation()},className:Be(m,o)}),S.createElement("div",{role:"presentation",className:"".concat(m,"-title"),title:typeof a=="string"?a:void 0},a),S.createElement("ul",{role:"group",className:"".concat(m,"-list")},c))};function v_(e){var t=e.children,o=dn(e,Kce),a=ep(o.eventKey),c=fw(t,a),u=f_();return u?c:S.createElement(Yce,Ko(o,["warnKey"]),c)}function mw(e){var t=e.className,o=e.style,a=S.useContext(bs),c=a.prefixCls,u=f_();return u?null:S.createElement("li",{className:Be("".concat(c,"-item-divider"),t),style:o})}var Im=Gce;Im.Item=m_;Im.SubMenu=g_;Im.ItemGroup=v_;Im.Divider=mw;var qce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"};const Xce=qce;var Jce=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:Xce}))};const Qce=S.forwardRef(Jce),Zce=S.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),vE=Zce;globalThis&&globalThis.__rest;const ele=S.createContext(null),hF=ele;var tle=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const nle=e=>{const{prefixCls:t,className:o,dashed:a}=e,c=tle(e,["prefixCls","className","dashed"]),{getPrefixCls:u}=S.useContext(Hn),h=u("menu",t),f=Be({[`${h}-item-divider-dashed`]:!!a},o);return S.createElement(mw,Object.assign({className:f},c))},P6=nle;var rle={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"};const ile=rle;var ole=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:ile}))};const ale=S.forwardRef(ole);var sle={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};const cle=sle;var lle=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:cle}))};const pF=S.forwardRef(lle),ule=e=>!isNaN(parseFloat(e))&&isFinite(e),dle=ule,hle=e=>{const{componentCls:t,colorBgContainer:o,colorBgBody:a,colorText:c}=e;return{[`${t}-sider-light`]:{background:o,[`${t}-sider-trigger`]:{color:c,background:o},[`${t}-sider-zero-width-trigger`]:{color:c,background:o,border:`1px solid ${a}`,borderInlineStart:0}}}},ple=hle,fle=e=>{const{antCls:t,componentCls:o,colorText:a,colorTextLightSolid:c,colorBgHeader:u,colorBgBody:h,colorBgTrigger:f,layoutHeaderHeight:m,layoutHeaderPaddingInline:g,layoutHeaderColor:_,layoutFooterPadding:y,layoutTriggerHeight:b,layoutZeroTriggerSize:A,motionDurationMid:I,motionDurationSlow:w,fontSize:D,borderRadius:x}=e;return{[o]:Object.assign(Object.assign({display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:h,"&, *":{boxSizing:"border-box"},[`&${o}-has-sider`]:{flexDirection:"row",[`> ${o}, > ${o}-content`]:{width:0}},[`${o}-header, &${o}-footer`]:{flex:"0 0 auto"},[`${o}-sider`]:{position:"relative",minWidth:0,background:u,transition:`all ${I}, background 0s`,"&-children":{height:"100%",marginTop:-.1,paddingTop:.1,[`${t}-menu${t}-menu-inline-collapsed`]:{width:"auto"}},"&-has-trigger":{paddingBottom:b},"&-right":{order:1},"&-trigger":{position:"fixed",bottom:0,zIndex:1,height:b,color:c,lineHeight:`${b}px`,textAlign:"center",background:f,cursor:"pointer",transition:`all ${I}`},"&-zero-width":{"> *":{overflow:"hidden"},"&-trigger":{position:"absolute",top:m,insetInlineEnd:-A,zIndex:1,width:A,height:A,color:c,fontSize:e.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:u,borderStartStartRadius:0,borderStartEndRadius:x,borderEndEndRadius:x,borderEndStartRadius:0,cursor:"pointer",transition:`background ${w} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${w}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:-A,borderStartStartRadius:x,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:x}}}}},ple(e)),{"&-rtl":{direction:"rtl"}}),[`${o}-header`]:{height:m,paddingInline:g,color:_,lineHeight:`${m}px`,background:u,[`${t}-menu`]:{lineHeight:"inherit"}},[`${o}-footer`]:{padding:y,color:a,fontSize:D,background:h},[`${o}-content`]:{flex:"auto",minHeight:0}}},D6=Is("Layout",e=>{const{colorText:t,controlHeightSM:o,controlHeight:a,controlHeightLG:c,marginXXS:u}=e,h=c*1.25,f=zi(e,{layoutHeaderHeight:a*2,layoutHeaderPaddingInline:h,layoutHeaderColor:t,layoutFooterPadding:`${o}px ${h}px`,layoutTriggerHeight:c+u*2,layoutZeroTriggerSize:c});return[fle(f)]},e=>{const{colorBgLayout:t}=e;return{colorBgHeader:"#001529",colorBgBody:t,colorBgTrigger:"#002140"}});var k6=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const L6=S.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}});function E_(e){let{suffixCls:t,tagName:o,displayName:a}=e;return c=>S.forwardRef((h,f)=>S.createElement(c,Object.assign({ref:f,suffixCls:t,tagName:o},h)))}const gw=S.forwardRef((e,t)=>{const{prefixCls:o,suffixCls:a,className:c,tagName:u}=e,h=k6(e,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:f}=S.useContext(Hn),m=f("layout",o),[g,_]=D6(m),y=a?`${m}-${a}`:m;return g(S.createElement(u,Object.assign({className:Be(o||y,c,_),ref:t},h)))}),mle=S.forwardRef((e,t)=>{const{direction:o}=S.useContext(Hn),[a,c]=S.useState([]),{prefixCls:u,className:h,rootClassName:f,children:m,hasSider:g,tagName:_}=e,y=k6(e,["prefixCls","className","rootClassName","children","hasSider","tagName"]),b=Ko(y,["suffixCls"]),{getPrefixCls:A}=S.useContext(Hn),I=A("layout",u),[w,D]=D6(I),x=Be(I,{[`${I}-has-sider`]:typeof g=="boolean"?g:a.length>0,[`${I}-rtl`]:o==="rtl"},h,f,D),O=S.useMemo(()=>({siderHook:{addSider:P=>{c(M=>[].concat(Ze(M),[P]))},removeSider:P=>{c(M=>M.filter(V=>V!==P))}}}),[]);return w(S.createElement(L6.Provider,{value:O},S.createElement(_,Object.assign({ref:t,className:x},b),m)))}),gle=E_({tagName:"section",displayName:"Layout"})(mle),vle=E_({suffixCls:"header",tagName:"header",displayName:"Header"})(gw),Ele=E_({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(gw),_le=E_({suffixCls:"content",tagName:"main",displayName:"Content"})(gw),Sle=gle;var yle=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const fF={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},vw=S.createContext({}),Cle=(()=>{let e=0;return function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e+=1,`${t}${e}`}})(),ble=S.forwardRef((e,t)=>{var{prefixCls:o,className:a,trigger:c,children:u,defaultCollapsed:h=!1,theme:f="dark",style:m={},collapsible:g=!1,reverseArrow:_=!1,width:y=200,collapsedWidth:b=80,zeroWidthTriggerStyle:A,breakpoint:I,onCollapse:w,onBreakpoint:D}=e,x=yle(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]);const{siderHook:O}=S.useContext(L6),[P,M]=S.useState("collapsed"in x?x.collapsed:h),[V,F]=S.useState(!1);S.useEffect(()=>{"collapsed"in x&&M(x.collapsed)},[x.collapsed]);const B=(G,ee)=>{"collapsed"in x||M(G),w==null||w(G,ee)},H=S.useRef();H.current=G=>{F(G.matches),D==null||D(G.matches),P!==G.matches&&B(G.matches,"responsive")},S.useEffect(()=>{function G(re){return H.current(re)}let ee;if(typeof window<"u"){const{matchMedia:re}=window;if(re&&I&&I in fF){ee=re(`(max-width: ${fF[I]})`);try{ee.addEventListener("change",G)}catch{ee.addListener(G)}G(ee)}}return()=>{try{ee==null||ee.removeEventListener("change",G)}catch{ee==null||ee.removeListener(G)}}},[I]),S.useEffect(()=>{const G=Cle("ant-sider-");return O.addSider(G),()=>O.removeSider(G)},[]);const K=()=>{B(!P,"clickTrigger")},{getPrefixCls:$}=S.useContext(Hn),Z=()=>{const G=$("layout-sider",o),ee=Ko(x,["collapsed"]),re=P?b:y,oe=dle(re)?`${re}px`:String(re),pe=parseFloat(String(b||0))===0?S.createElement("span",{onClick:K,className:Be(`${G}-zero-width-trigger`,`${G}-zero-width-trigger-${_?"right":"left"}`),style:A},c||S.createElement(ale,null)):null,fe={expanded:_?S.createElement(aF,null):S.createElement(pF,null),collapsed:_?S.createElement(pF,null):S.createElement(aF,null)}[P?"collapsed":"expanded"],se=c!==null?pe||S.createElement("div",{className:`${G}-trigger`,onClick:K,style:{width:oe}},c||fe):null,ae=Object.assign(Object.assign({},m),{flex:`0 0 ${oe}`,maxWidth:oe,minWidth:oe,width:oe}),de=Be(G,`${G}-${f}`,{[`${G}-collapsed`]:!!P,[`${G}-has-trigger`]:g&&c!==null&&!pe,[`${G}-below`]:!!V,[`${G}-zero-width`]:parseFloat(oe)===0},a);return S.createElement("aside",Object.assign({className:de},ee,{style:ae,ref:t}),S.createElement("div",{className:`${G}-children`},u),g||V&&pe?se:null)},z=S.useMemo(()=>({siderCollapsed:P}),[P]);return S.createElement(vw.Provider,{value:z},Z())}),Tle=ble,Rle=e=>{var t;const{className:o,children:a,icon:c,title:u,danger:h}=e,{prefixCls:f,firstLevel:m,direction:g,disableMenuItemTitleTooltip:_,inlineCollapsed:y}=S.useContext(vE),b=O=>{const P=S.createElement("span",{className:`${f}-title-content`},a);return(!c||Ll(a)&&a.type==="span")&&a&&O&&m&&typeof a=="string"?S.createElement("div",{className:`${f}-inline-collapsed-noicon`},a.charAt(0)):P},{siderCollapsed:A}=S.useContext(vw);let I=u;typeof u>"u"?I=m?a:"":u===!1&&(I="");const w={title:I};!A&&!y&&(w.title=null,w.open=!1);const D=Oc(a).length;let x=S.createElement(m_,Object.assign({},Ko(e,["title","icon","danger"]),{className:Be({[`${f}-item-danger`]:h,[`${f}-item-only-child`]:(c?D+1:D)===1},o),title:typeof u=="string"?u:void 0}),Cs(c,{className:Be(Ll(c)?(t=c.props)===null||t===void 0?void 0:t.className:"",`${f}-item-icon`)}),b(y));return _||(x=S.createElement(um,Object.assign({},w,{placement:g==="rtl"?"left":"right",overlayClassName:`${f}-inline-collapsed-tooltip`}),x)),x},M6=Rle,Ile=e=>{var t;const{popupClassName:o,icon:a,title:c,theme:u}=e,h=S.useContext(vE),{prefixCls:f,inlineCollapsed:m,theme:g}=h,_=ep();let y;if(!a)y=m&&!_.length&&c&&typeof c=="string"?S.createElement("div",{className:`${f}-inline-collapsed-noicon`},c.charAt(0)):S.createElement("span",{className:`${f}-title-content`},c);else{const A=Ll(c)&&c.type==="span";y=S.createElement(S.Fragment,null,Cs(a,{className:Be(Ll(a)?(t=a.props)===null||t===void 0?void 0:t.className:"",`${f}-item-icon`)}),A?c:S.createElement("span",{className:`${f}-title-content`},c))}const b=S.useMemo(()=>Object.assign(Object.assign({},h),{firstLevel:!1}),[h]);return S.createElement(vE.Provider,{value:b},S.createElement(g_,Object.assign({},Ko(e,["icon"]),{title:y,popupClassName:Be(f,o,`${f}-${u||g}`)})))},U6=Ile;var wle=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};function OI(e){return(e||[]).map((t,o)=>{if(t&&typeof t=="object"){const a=t,{label:c,children:u,key:h,type:f}=a,m=wle(a,["label","children","key","type"]),g=h??`tmp-${o}`;return u||f==="group"?f==="group"?S.createElement(v_,Object.assign({key:g},m,{title:c}),OI(u)):S.createElement(U6,Object.assign({key:g},m,{title:c}),OI(u)):f==="divider"?S.createElement(P6,Object.assign({key:g},m)):S.createElement(M6,Object.assign({key:g},m),c)}return null}).filter(t=>t)}function Ole(e){return S.useMemo(()=>e&&OI(e),[e])}const Ale=e=>{const{componentCls:t,motionDurationSlow:o,menuHorizontalHeight:a,colorSplit:c,lineWidth:u,lineType:h,menuItemPaddingInline:f}=e;return{[`${t}-horizontal`]:{lineHeight:`${a}px`,border:0,borderBottom:`${u}px ${h} ${c}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${t}-item, ${t}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:f},[`> ${t}-item:hover,
        > ${t}-item-active,
        > ${t}-submenu ${t}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${t}-item, ${t}-submenu-title`]:{transition:[`border-color ${o}`,`background ${o}`].join(",")},[`${t}-submenu-arrow`]:{display:"none"}}}},Nle=Ale,xle=e=>{let{componentCls:t,menuArrowOffset:o}=e;return{[`${t}-rtl`]:{direction:"rtl"},[`${t}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${t}-rtl${t}-vertical,
    ${t}-submenu-rtl ${t}-vertical`]:{[`${t}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(-${o})`},"&::after":{transform:`rotate(45deg) translateY(${o})`}}}}},Ple=xle,mF=e=>Object.assign({},l8(e)),Dle=(e,t)=>{const{componentCls:o,itemColor:a,itemSelectedColor:c,groupTitleColor:u,itemBg:h,subMenuItemBg:f,itemSelectedBg:m,activeBarHeight:g,activeBarWidth:_,activeBarBorderWidth:y,motionDurationSlow:b,motionEaseInOut:A,motionEaseOut:I,menuItemPaddingInline:w,motionDurationMid:D,itemHoverColor:x,lineType:O,colorSplit:P,itemDisabledColor:M,dangerItemColor:V,dangerItemHoverColor:F,dangerItemSelectedColor:B,dangerItemActiveBg:H,dangerItemSelectedBg:K,itemHoverBg:$,menuSubMenuBg:Z,horizontalItemSelectedColor:z,horizontalItemSelectedBg:G,horizontalItemBorderRadius:ee,horizontalItemHoverBg:re}=e;return{[`${o}-${t}, ${o}-${t} > ${o}`]:{color:a,background:h,[`&${o}-root:focus-visible`]:Object.assign({},mF(e)),[`${o}-item-group-title`]:{color:u},[`${o}-submenu-selected`]:{[`> ${o}-submenu-title`]:{color:c}},[`${o}-item-disabled, ${o}-submenu-disabled`]:{color:`${M} !important`},[`${o}-item:hover, ${o}-submenu-title:hover`]:{[`&:not(${o}-item-selected):not(${o}-submenu-selected)`]:{color:x}},[`&:not(${o}-horizontal)`]:{[`${o}-item:not(${o}-item-selected)`]:{"&:hover":{backgroundColor:$},"&:active":{backgroundColor:m}},[`${o}-submenu-title`]:{"&:hover":{backgroundColor:$},"&:active":{backgroundColor:m}}},[`${o}-item-danger`]:{color:V,[`&${o}-item:hover`]:{[`&:not(${o}-item-selected):not(${o}-submenu-selected)`]:{color:F}},[`&${o}-item:active`]:{background:H}},[`${o}-item a`]:{"&, &:hover":{color:"inherit"}},[`${o}-item-selected`]:{color:c,[`&${o}-item-danger`]:{color:B},"a, a:hover":{color:"inherit"}},[`& ${o}-item-selected`]:{backgroundColor:m,[`&${o}-item-danger`]:{backgroundColor:K}},[`${o}-item, ${o}-submenu-title`]:{[`&:not(${o}-item-disabled):focus-visible`]:Object.assign({},mF(e))},[`&${o}-submenu > ${o}`]:{backgroundColor:Z},[`&${o}-popup > ${o}`]:{backgroundColor:h},[`&${o}-horizontal`]:Object.assign(Object.assign({},t==="dark"?{borderBottom:0}:{}),{[`> ${o}-item, > ${o}-submenu`]:{top:y,marginTop:-y,marginBottom:0,borderRadius:ee,"&::after":{position:"absolute",insetInline:w,bottom:0,borderBottom:`${g}px solid transparent`,transition:`border-color ${b} ${A}`,content:'""'},"&:hover, &-active, &-open":{background:re,"&::after":{borderBottomWidth:g,borderBottomColor:z}},"&-selected":{color:z,backgroundColor:G,"&::after":{borderBottomWidth:g,borderBottomColor:z}}}}),[`&${o}-root`]:{[`&${o}-inline, &${o}-vertical`]:{borderInlineEnd:`${y}px ${O} ${P}`}},[`&${o}-inline`]:{[`${o}-sub${o}-inline`]:{background:f},[`${o}-item, ${o}-submenu-title`]:y&&_?{width:`calc(100% + ${y}px)`}:{},[`${o}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${_}px solid ${c}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${D} ${I}`,`opacity ${D} ${I}`].join(","),content:'""'},[`&${o}-item-danger`]:{"&::after":{borderInlineEndColor:B}}},[`${o}-selected, ${o}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${D} ${A}`,`opacity ${D} ${A}`].join(",")}}}}}},gF=Dle,vF=e=>{const{componentCls:t,menuItemHeight:o,itemMarginInline:a,padding:c,menuArrowSize:u,marginXS:h,marginXXS:f}=e,m=c+u+h;return{[`${t}-item`]:{position:"relative",overflow:"hidden"},[`${t}-item, ${t}-submenu-title`]:{height:o,lineHeight:`${o}px`,paddingInline:c,overflow:"hidden",textOverflow:"ellipsis",marginInline:a,marginBlock:f,width:`calc(100% - ${a*2}px)`},[`> ${t}-item,
            > ${t}-submenu > ${t}-submenu-title`]:{height:o,lineHeight:`${o}px`},[`${t}-item-group-list ${t}-submenu-title,
            ${t}-submenu-title`]:{paddingInlineEnd:m}}},kle=e=>{const{componentCls:t,iconCls:o,menuItemHeight:a,colorTextLightSolid:c,dropdownWidth:u,controlHeightLG:h,motionDurationMid:f,motionEaseOut:m,paddingXL:g,itemMarginInline:_,fontSizeLG:y,motionDurationSlow:b,paddingXS:A,boxShadowSecondary:I}=e,w={height:a,lineHeight:`${a}px`,listStylePosition:"inside",listStyleType:"disc"};return[{[t]:{"&-inline, &-vertical":Object.assign({[`&${t}-root`]:{boxShadow:"none"}},vF(e))},[`${t}-submenu-popup`]:{[`${t}-vertical`]:Object.assign(Object.assign({},vF(e)),{boxShadow:I})}},{[`${t}-submenu-popup ${t}-vertical${t}-sub`]:{minWidth:u,maxHeight:`calc(100vh - ${h*2.5}px)`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${t}-inline`]:{width:"100%",[`&${t}-root`]:{[`${t}-item, ${t}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${b}`,`background ${b}`,`padding ${f} ${m}`].join(","),[`> ${t}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${t}-sub${t}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${t}-submenu > ${t}-submenu-title`]:w,[`& ${t}-item-group-title`]:{paddingInlineStart:g}},[`${t}-item`]:w}},{[`${t}-inline-collapsed`]:{width:a*2,[`&${t}-root`]:{[`${t}-item, ${t}-submenu ${t}-submenu-title`]:{[`> ${t}-inline-collapsed-noicon`]:{fontSize:y,textAlign:"center"}}},[`> ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-submenu > ${t}-submenu-title,
          > ${t}-submenu > ${t}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${y/2}px - ${_}px)`,textOverflow:"clip",[`
            ${t}-submenu-arrow,
            ${t}-submenu-expand-icon
          `]:{opacity:0},[`${t}-item-icon, ${o}`]:{margin:0,fontSize:y,lineHeight:`${a}px`,"+ span":{display:"inline-block",opacity:0}}},[`${t}-item-icon, ${o}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${t}-item-icon, ${o}`]:{display:"none"},"a, a:hover":{color:c}},[`${t}-item-group-title`]:Object.assign(Object.assign({},Bne),{paddingInline:A})}}]},Lle=kle,EF=e=>{const{componentCls:t,fontSize:o,motionDurationSlow:a,motionDurationMid:c,motionEaseInOut:u,motionEaseOut:h,iconCls:f,controlHeightSM:m}=e;return{[`${t}-item, ${t}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${a}`,`background ${a}`,`padding ${a} ${u}`].join(","),[`${t}-item-icon, ${f}`]:{minWidth:o,fontSize:o,transition:[`font-size ${c} ${h}`,`margin ${a} ${u}`,`color ${a}`].join(","),"+ span":{marginInlineStart:m-o,opacity:1,transition:[`opacity ${a} ${u}`,`margin ${a}`,`color ${a}`].join(",")}},[`${t}-item-icon`]:Object.assign({},c8()),[`&${t}-item-only-child`]:{[`> ${f}, > ${t}-item-icon`]:{marginInlineEnd:0}}},[`${t}-item-disabled, ${t}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${t}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},_F=e=>{const{componentCls:t,motionDurationSlow:o,motionEaseInOut:a,borderRadius:c,menuArrowSize:u,menuArrowOffset:h}=e;return{[`${t}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:e.margin,width:u,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${o} ${a}, opacity ${o}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:u*.6,height:u*.15,backgroundColor:"currentcolor",borderRadius:c,transition:[`background ${o} ${a}`,`transform ${o} ${a}`,`top ${o} ${a}`,`color ${o} ${a}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(-${h})`},"&::after":{transform:`rotate(-45deg) translateY(${h})`}}}}},Mle=e=>{const{antCls:t,componentCls:o,fontSize:a,motionDurationSlow:c,motionDurationMid:u,motionEaseInOut:h,lineHeight:f,paddingXS:m,padding:g,colorSplit:_,lineWidth:y,zIndexPopup:b,borderRadiusLG:A,subMenuItemBorderRadius:I,menuArrowSize:w,menuArrowOffset:D,lineType:x,menuPanelMaskInset:O}=e;return[{"":{[`${o}`]:Object.assign(Object.assign({},QR()),{"&-hidden":{display:"none"}})},[`${o}-submenu-hidden`]:{display:"none"}},{[o]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Wu(e)),QR()),{marginBottom:0,paddingInlineStart:0,fontSize:a,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${c} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${o}-item`]:{flex:"none"}},[`${o}-item, ${o}-submenu, ${o}-submenu-title`]:{borderRadius:e.itemBorderRadius},[`${o}-item-group-title`]:{padding:`${m}px ${g}px`,fontSize:a,lineHeight:f,transition:`all ${c}`},[`&-horizontal ${o}-submenu`]:{transition:[`border-color ${c} ${h}`,`background ${c} ${h}`].join(",")},[`${o}-submenu, ${o}-submenu-inline`]:{transition:[`border-color ${c} ${h}`,`background ${c} ${h}`,`padding ${u} ${h}`].join(",")},[`${o}-submenu ${o}-sub`]:{cursor:"initial",transition:[`background ${c} ${h}`,`padding ${c} ${h}`].join(",")},[`${o}-title-content`]:{transition:`color ${c}`},[`${o}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${o}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:_,borderStyle:x,borderWidth:0,borderTopWidth:y,marginBlock:y,padding:0,"&-dashed":{borderStyle:"dashed"}}}),EF(e)),{[`${o}-item-group`]:{[`${o}-item-group-list`]:{margin:0,padding:0,[`${o}-item, ${o}-submenu-title`]:{paddingInline:`${a*2}px ${g}px`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:b,borderRadius:A,boxShadow:"none",transformOrigin:"0 0",[`&${o}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:`${O}px 0 0`,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'}},"&-placement-rightTop::before":{top:0,insetInlineStart:O},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:e.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:e.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:e.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:e.paddingXS},[`> ${o}`]:Object.assign(Object.assign(Object.assign({borderRadius:A},EF(e)),_F(e)),{[`${o}-item, ${o}-submenu > ${o}-submenu-title`]:{borderRadius:I},[`${o}-submenu-title::after`]:{transition:`transform ${c} ${h}`}})}}),_F(e)),{[`&-inline-collapsed ${o}-submenu-arrow,
        &-inline ${o}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${D})`},"&::after":{transform:`rotate(45deg) translateX(-${D})`}},[`${o}-submenu-open${o}-submenu-inline > ${o}-submenu-title > ${o}-submenu-arrow`]:{transform:`translateY(-${w*.2}px)`,"&::after":{transform:`rotate(-45deg) translateX(-${D})`},"&::before":{transform:`rotate(45deg) translateX(${D})`}}})},{[`${t}-layout-header`]:{[o]:{lineHeight:"inherit"}}}]},Ule=(e,t)=>Is("Menu",(a,c)=>{let{overrideComponentToken:u}=c;if(t===!1)return[];const{colorBgElevated:h,colorPrimary:f,colorError:m,colorErrorHover:g,colorTextLightSolid:_,controlHeightLG:y,fontSize:b}=a,A=b/7*5,I=zi(a,{menuItemHeight:y,menuItemPaddingInline:a.margin,menuArrowSize:A,menuHorizontalHeight:y*1.15,menuArrowOffset:`${A*.25}px`,menuPanelMaskInset:-7,menuSubMenuBg:h}),w=new Bi(_).setAlpha(.65).toRgbString(),D=zi(I,{itemColor:w,itemHoverColor:_,groupTitleColor:w,itemSelectedColor:_,itemBg:"#001529",subMenuItemBg:"#000c17",itemActiveBg:"transparent",itemSelectedBg:f,activeBarWidth:0,activeBarHeight:0,activeBarBorderWidth:0,itemDisabledColor:new Bi(_).setAlpha(.25).toRgbString(),dangerItemColor:m,dangerItemHoverColor:g,dangerItemSelectedColor:_,dangerItemActiveBg:m,dangerItemSelectedBg:m,menuSubMenuBg:"#001529",horizontalItemSelectedColor:_,horizontalItemSelectedBg:f},Object.assign({},u));return[Mle(I),Nle(I),Lle(I),gF(I,"light"),gF(D,"dark"),Ple(I),o6(I),Y4(I,"slide-up"),Y4(I,"slide-down"),i6(I,"zoom-big")]},a=>{const{colorPrimary:c,colorError:u,colorTextDisabled:h,colorErrorBg:f,colorText:m,colorTextDescription:g,colorBgContainer:_,colorFillAlter:y,colorFillContent:b,lineWidth:A,lineWidthBold:I,controlItemBgActive:w,colorBgTextHover:D}=a;return{dropdownWidth:160,zIndexPopup:a.zIndexPopupBase+50,radiusItem:a.borderRadiusLG,itemBorderRadius:a.borderRadiusLG,radiusSubMenuItem:a.borderRadiusSM,subMenuItemBorderRadius:a.borderRadiusSM,colorItemText:m,itemColor:m,colorItemTextHover:m,itemHoverColor:m,colorItemTextHoverHorizontal:c,horizontalItemHoverColor:c,colorGroupTitle:g,groupTitleColor:g,colorItemTextSelected:c,itemSelectedColor:c,colorItemTextSelectedHorizontal:c,horizontalItemSelectedColor:c,colorItemBg:_,itemBg:_,colorItemBgHover:D,itemHoverBg:D,colorItemBgActive:b,itemActiveBg:b,colorSubItemBg:y,subMenuItemBg:y,colorItemBgSelected:w,itemSelectedBg:w,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:0,colorActiveBarHeight:I,activeBarHeight:I,colorActiveBarBorderSize:A,activeBarBorderWidth:A,colorItemTextDisabled:h,itemDisabledColor:h,colorDangerItemText:u,dangerItemColor:u,colorDangerItemTextHover:u,dangerItemHoverColor:u,colorDangerItemTextSelected:u,dangerItemSelectedColor:u,colorDangerItemBgActive:f,dangerItemActiveBg:f,colorDangerItemBgSelected:f,dangerItemSelectedBg:f,itemMarginInline:a.marginXXS,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent"}},{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"]]})(e);var Fle=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const Vle=S.forwardRef((e,t)=>{var o,a;const c=S.useContext(hF),u=c||{},{getPrefixCls:h,getPopupContainer:f,direction:m}=S.useContext(Hn),g=h(),{prefixCls:_,className:y,theme:b="light",expandIcon:A,_internalDisableMenuItemTitleTooltip:I,inlineCollapsed:w,siderCollapsed:D,items:x,children:O,rootClassName:P,mode:M,selectable:V,onClick:F,overflowedIndicatorPopupClassName:B}=e,H=Fle(e,["prefixCls","className","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","items","children","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),K=Ko(H,["collapsedWidth"]),$=Ole(x)||O;(o=u.validator)===null||o===void 0||o.call(u,{mode:M});const Z=ms(function(){var ae;F==null||F.apply(void 0,arguments),(ae=u.onClick)===null||ae===void 0||ae.call(u)}),z=u.mode||M,G=V??u.selectable,ee=S.useMemo(()=>D!==void 0?D:w,[w,D]),re={horizontal:{motionName:`${g}-slide-up`},inline:uI(g),other:{motionName:`${g}-zoom-big`}},oe=h("menu",_||u.prefixCls),[pe,ue]=Ule(oe,!c),me=Be(`${oe}-${b}`,y);let fe;if(typeof A=="function")fe=A;else{const ae=A||u.expandIcon;fe=Cs(ae,{className:Be(`${oe}-submenu-expand-icon`,(a=ae==null?void 0:ae.props)===null||a===void 0?void 0:a.className)})}const se=S.useMemo(()=>({prefixCls:oe,inlineCollapsed:ee||!1,direction:m,firstLevel:!0,theme:b,mode:z,disableMenuItemTitleTooltip:I}),[oe,ee,m,I,b]);return pe(S.createElement(hF.Provider,{value:null},S.createElement(vE.Provider,{value:se},S.createElement(Im,Object.assign({getPopupContainer:f,overflowedIndicator:S.createElement(Qce,null),overflowedIndicatorPopupClassName:Be(oe,`${oe}-${b}`,B),mode:z,selectable:G,onClick:Z},K,{inlineCollapsed:ee,className:me,prefixCls:oe,direction:m,defaultMotions:re,expandIcon:fe,ref:t,rootClassName:Be(P,ue)}),$))))}),jle=Vle,wm=S.forwardRef((e,t)=>{const o=S.useRef(null),a=S.useContext(vw);return S.useImperativeHandle(t,()=>({menu:o.current,focus:c=>{var u;(u=o.current)===null||u===void 0||u.focus(c)}})),S.createElement(jle,Object.assign({ref:o},e,a))});wm.Item=M6;wm.SubMenu=U6;wm.Divider=P6;wm.ItemGroup=v_;const Ble=wm,$le=e=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),Ew=e=>({borderColor:e.inputBorderHoverColor,borderInlineEndWidth:e.lineWidth}),AI=e=>({borderColor:e.inputBorderHoverColor,boxShadow:`0 0 0 ${e.controlOutlineWidth}px ${e.controlOutline}`,borderInlineEndWidth:e.lineWidth,outline:0}),F6=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover":Object.assign({},Ew(zi(e,{inputBorderHoverColor:e.colorBorder})))}),V6=e=>{const{inputPaddingVerticalLG:t,fontSizeLG:o,lineHeightLG:a,borderRadiusLG:c,inputPaddingHorizontalLG:u}=e;return{padding:`${t}px ${u}px`,fontSize:o,lineHeight:a,borderRadius:c}},j6=e=>({padding:`${e.inputPaddingVerticalSM}px ${e.controlPaddingHorizontalSM-1}px`,borderRadius:e.borderRadiusSM}),B6=(e,t)=>{const{componentCls:o,colorError:a,colorWarning:c,colorErrorOutline:u,colorWarningOutline:h,colorErrorBorderHover:f,colorWarningBorderHover:m}=e;return{[`&-status-error:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:a,"&:hover":{borderColor:f},"&:focus, &-focused":Object.assign({},AI(zi(e,{inputBorderActiveColor:a,inputBorderHoverColor:a,controlOutline:u}))),[`${o}-prefix, ${o}-suffix`]:{color:a}},[`&-status-warning:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:c,"&:hover":{borderColor:m},"&:focus, &-focused":Object.assign({},AI(zi(e,{inputBorderActiveColor:c,inputBorderHoverColor:c,controlOutline:h}))),[`${o}-prefix, ${o}-suffix`]:{color:c}}}},$6=e=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${e.inputPaddingVertical}px ${e.inputPaddingHorizontal}px`,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,backgroundColor:e.colorBgContainer,backgroundImage:"none",borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:e.colorBorder,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`},$le(e.colorTextPlaceholder)),{"&:hover":Object.assign({},Ew(e)),"&:focus, &-focused":Object.assign({},AI(e)),"&-disabled, &[disabled]":Object.assign({},F6(e)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},V6(e)),"&-sm":Object.assign({},j6(e)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}}),Hle=e=>{const{componentCls:t,antCls:o}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${t}, &-lg > ${t}-group-addon`]:Object.assign({},V6(e)),[`&-sm ${t}, &-sm > ${t}-group-addon`]:Object.assign({},j6(e)),[`&-lg ${o}-select-single ${o}-select-selector`]:{height:e.controlHeightLG},[`&-sm ${o}-select-single ${o}-select-selector`]:{height:e.controlHeightSM},[`> ${t}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${t}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${e.inputPaddingHorizontal}px`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,textAlign:"center",backgroundColor:e.colorFillAlter,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${o}-select`]:{margin:`-${e.inputPaddingVertical+1}px -${e.inputPaddingHorizontal}px`,[`&${o}-select-single:not(${o}-select-customize-input)`]:{[`${o}-select-selector`]:{backgroundColor:"inherit",border:`${e.lineWidth}px ${e.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${o}-select-selector`]:{color:e.colorPrimary}}},[`${o}-cascader-picker`]:{margin:`-9px -${e.inputPaddingHorizontal}px`,backgroundColor:"transparent",[`${o}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},[`${t}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${t}-search-with-button &`]:{zIndex:0}}},[`> ${t}:first-child, ${t}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${o}-select ${o}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}-affix-wrapper`]:{[`&:not(:first-child) ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}:last-child, ${t}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${o}-select ${o}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${t}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${t}-search &`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}},[`&:not(:first-child), ${t}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${t}-group-compact`]:Object.assign(Object.assign({display:"block"},QR()),{[`${t}-group-addon, ${t}-group-wrap, > ${t}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${t}-affix-wrapper,
        & > ${t}-number-affix-wrapper,
        & > ${o}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:-e.lineWidth,borderInlineEndWidth:e.lineWidth},[`${t}`]:{float:"none"},[`& > ${o}-select > ${o}-select-selector,
      & > ${o}-select-auto-complete ${t},
      & > ${o}-cascader-picker ${t},
      & > ${t}-group-wrapper ${t}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${o}-select-focused`]:{zIndex:1},[`& > ${o}-select > ${o}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${o}-select:first-child > ${o}-select-selector,
      & > ${o}-select-auto-complete:first-child ${t},
      & > ${o}-cascader-picker:first-child ${t}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,
      & > ${o}-select:last-child > ${o}-select-selector,
      & > ${o}-cascader-picker:last-child ${t},
      & > ${o}-cascader-picker-focused:last-child ${t}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${o}-select-auto-complete ${t}`]:{verticalAlign:"top"},[`${t}-group-wrapper + ${t}-group-wrapper`]:{marginInlineStart:-e.lineWidth,[`${t}-affix-wrapper`]:{borderRadius:0}},[`${t}-group-wrapper:not(:last-child)`]:{[`&${t}-search > ${t}-group`]:{[`& > ${t}-group-addon > ${t}-search-button`]:{borderRadius:0},[`& > ${t}`]:{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}}}})}},Wle=e=>{const{componentCls:t,controlHeightSM:o,lineWidth:a}=e,c=16,u=(o-a*2-c)/2;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},Wu(e)),$6(e)),B6(e,t)),{'&[type="color"]':{height:e.controlHeight,[`&${t}-lg`]:{height:e.controlHeightLG},[`&${t}-sm`]:{height:o,paddingTop:u,paddingBottom:u}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},Gle=e=>{const{componentCls:t}=e;return{[`${t}-clear-icon`]:{margin:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${e.inputAffixPadding}px`}}}},zle=e=>{const{componentCls:t,inputAffixPadding:o,colorTextDescription:a,motionDurationSlow:c,colorIcon:u,colorIconHover:h,iconCls:f}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},$6(e)),{display:"inline-flex",[`&:not(${t}-affix-wrapper-disabled):hover`]:Object.assign(Object.assign({},Ew(e)),{zIndex:1,[`${t}-search-with-button &`]:{zIndex:0}}),"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${t}[disabled]`]:{background:"transparent"}},[`> input${t}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:a},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:o},"&-suffix":{marginInlineStart:o}}}),Gle(e)),{[`${f}${t}-password-icon`]:{color:u,cursor:"pointer",transition:`all ${c}`,"&:hover":{color:h}}}),B6(e,`${t}-affix-wrapper`))}},Kle=e=>{const{componentCls:t,colorError:o,colorWarning:a,borderRadiusLG:c,borderRadiusSM:u}=e;return{[`${t}-group`]:Object.assign(Object.assign(Object.assign({},Wu(e)),Hle(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${t}-group-addon`]:{borderRadius:c}},"&-sm":{[`${t}-group-addon`]:{borderRadius:u}},"&-status-error":{[`${t}-group-addon`]:{color:o,borderColor:o}},"&-status-warning":{[`${t}-group-addon`]:{color:a,borderColor:a}},"&-disabled":{[`${t}-group-addon`]:Object.assign({},F6(e))},[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}})}},Yle=e=>{const{componentCls:t,antCls:o}=e,a=`${t}-search`;return{[a]:{[`${t}`]:{"&:hover, &:focus":{borderColor:e.colorPrimaryHover,[`+ ${t}-group-addon ${a}-button:not(${o}-btn-primary)`]:{borderInlineStartColor:e.colorPrimaryHover}}},[`${t}-affix-wrapper`]:{borderRadius:0},[`${t}-lg`]:{lineHeight:e.lineHeightLG-2e-4},[`> ${t}-group`]:{[`> ${t}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${a}-button`]:{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius,borderEndStartRadius:0},[`${a}-button:not(${o}-btn-primary)`]:{color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive},[`&${o}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${a}-button`]:{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${a}-button`]:{height:e.controlHeightLG},[`&-small ${a}-button`]:{height:e.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${t}-compact-item`]:{[`&:not(${t}-compact-last-item)`]:{[`${t}-group-addon`]:{[`${t}-search-button`]:{marginInlineEnd:-e.lineWidth,borderRadius:0}}},[`&:not(${t}-compact-first-item)`]:{[`${t},${t}-affix-wrapper`]:{borderRadius:0}},[`> ${t}-group-addon ${t}-search-button,
        > ${t},
        ${t}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${t}-affix-wrapper-focused`]:{zIndex:2}}}}};function H6(e){return zi(e,{inputAffixPadding:e.paddingXXS,inputPaddingVertical:Math.max(Math.round((e.controlHeight-e.fontSize*e.lineHeight)/2*10)/10-e.lineWidth,3),inputPaddingVerticalLG:Math.ceil((e.controlHeightLG-e.fontSizeLG*e.lineHeightLG)/2*10)/10-e.lineWidth,inputPaddingVerticalSM:Math.max(Math.round((e.controlHeightSM-e.fontSize*e.lineHeight)/2*10)/10-e.lineWidth,0),inputPaddingHorizontal:e.paddingSM-e.lineWidth,inputPaddingHorizontalSM:e.paddingXS-e.lineWidth,inputPaddingHorizontalLG:e.controlPaddingHorizontal-e.lineWidth,inputBorderHoverColor:e.colorPrimaryHover,inputBorderActiveColor:e.colorPrimaryHover})}const qle=e=>{const{componentCls:t,paddingLG:o}=e,a=`${t}-textarea`;return{[a]:{position:"relative","&-show-count":{[`> ${t}`]:{height:"100%"},[`${t}-data-count`]:{position:"absolute",bottom:-e.fontSize*e.lineHeight,insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${t}`]:{paddingInlineEnd:o}},[`&-affix-wrapper${a}-has-feedback`]:{[`${t}`]:{paddingInlineEnd:o}},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingXS,insetBlockStart:e.paddingXS},[`${a}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.inputPaddingHorizontal,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},_w=Is("Input",e=>{const t=H6(e);return[Wle(t),qle(t),zle(t),Kle(t),Yle(t),$8(t)]}),Xle=S.createContext({}),W6=Xle,Jle=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},Qle=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",maxWidth:"100%",minHeight:1}}},Zle=(e,t)=>{const{componentCls:o,gridColumns:a}=e,c={};for(let u=a;u>=0;u--)u===0?(c[`${o}${t}-${u}`]={display:"none"},c[`${o}-push-${u}`]={insetInlineStart:"auto"},c[`${o}-pull-${u}`]={insetInlineEnd:"auto"},c[`${o}${t}-push-${u}`]={insetInlineStart:"auto"},c[`${o}${t}-pull-${u}`]={insetInlineEnd:"auto"},c[`${o}${t}-offset-${u}`]={marginInlineStart:0},c[`${o}${t}-order-${u}`]={order:0}):(c[`${o}${t}-${u}`]={display:"block",flex:`0 0 ${u/a*100}%`,maxWidth:`${u/a*100}%`},c[`${o}${t}-push-${u}`]={insetInlineStart:`${u/a*100}%`},c[`${o}${t}-pull-${u}`]={insetInlineEnd:`${u/a*100}%`},c[`${o}${t}-offset-${u}`]={marginInlineStart:`${u/a*100}%`},c[`${o}${t}-order-${u}`]={order:u});return c},NI=(e,t)=>Zle(e,t),eue=(e,t,o)=>({[`@media (min-width: ${t}px)`]:Object.assign({},NI(e,o))}),tue=Is("Grid",e=>[Jle(e)]),nue=Is("Grid",e=>{const t=zi(e,{gridColumns:24}),o={"-sm":t.screenSMMin,"-md":t.screenMDMin,"-lg":t.screenLGMin,"-xl":t.screenXLMin,"-xxl":t.screenXXLMin};return[Qle(t),NI(t,""),NI(t,"-xs"),Object.keys(o).map(a=>eue(t,o[a],a)).reduce((a,c)=>Object.assign(Object.assign({},a),c),{})]});var rue=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};function iue(e){return typeof e=="number"?`${e} ${e} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?`0 0 ${e}`:e}const oue=["xs","sm","md","lg","xl","xxl"],aue=S.forwardRef((e,t)=>{const{getPrefixCls:o,direction:a}=S.useContext(Hn),{gutter:c,wrap:u,supportFlexGap:h}=S.useContext(W6),{prefixCls:f,span:m,order:g,offset:_,push:y,pull:b,className:A,children:I,flex:w,style:D}=e,x=rue(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),O=o("col",f),[P,M]=nue(O);let V={};oue.forEach(H=>{let K={};const $=e[H];typeof $=="number"?K.span=$:typeof $=="object"&&(K=$||{}),delete x[H],V=Object.assign(Object.assign({},V),{[`${O}-${H}-${K.span}`]:K.span!==void 0,[`${O}-${H}-order-${K.order}`]:K.order||K.order===0,[`${O}-${H}-offset-${K.offset}`]:K.offset||K.offset===0,[`${O}-${H}-push-${K.push}`]:K.push||K.push===0,[`${O}-${H}-pull-${K.pull}`]:K.pull||K.pull===0,[`${O}-${H}-flex-${K.flex}`]:K.flex||K.flex==="auto",[`${O}-rtl`]:a==="rtl"})});const F=Be(O,{[`${O}-${m}`]:m!==void 0,[`${O}-order-${g}`]:g,[`${O}-offset-${_}`]:_,[`${O}-push-${y}`]:y,[`${O}-pull-${b}`]:b},A,V,M),B={};if(c&&c[0]>0){const H=c[0]/2;B.paddingLeft=H,B.paddingRight=H}if(c&&c[1]>0&&!h){const H=c[1]/2;B.paddingTop=H,B.paddingBottom=H}return w&&(B.flex=iue(w),u===!1&&!B.minWidth&&(B.minWidth=0)),P(S.createElement("div",Object.assign({},x,{style:Object.assign(Object.assign({},B),D),className:F,ref:t}),I))}),G6=aue,sue=()=>{const[e,t]=S.useState(!1);return S.useEffect(()=>{t(Ioe())},[]),e};var cue=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};function SF(e,t){const[o,a]=S.useState(typeof e=="string"?e:""),c=()=>{if(typeof e=="string"&&a(e),typeof e=="object")for(let u=0;u<lm.length;u++){const h=lm[u];if(!t[h])continue;const f=e[h];if(f!==void 0){a(f);return}}};return S.useEffect(()=>{c()},[JSON.stringify(e),t]),o}const lue=S.forwardRef((e,t)=>{const{prefixCls:o,justify:a,align:c,className:u,style:h,children:f,gutter:m=0,wrap:g}=e,_=cue(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:y,direction:b}=S.useContext(Hn),[A,I]=S.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[w,D]=S.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),x=SF(c,w),O=SF(a,w),P=sue(),M=S.useRef(m),V=kse();S.useEffect(()=>{const ue=V.subscribe(me=>{D(me);const fe=M.current||0;(!Array.isArray(fe)&&typeof fe=="object"||Array.isArray(fe)&&(typeof fe[0]=="object"||typeof fe[1]=="object"))&&I(me)});return()=>V.unsubscribe(ue)},[]);const F=()=>{const ue=[void 0,void 0];return(Array.isArray(m)?m:[m,void 0]).forEach((fe,se)=>{if(typeof fe=="object")for(let ae=0;ae<lm.length;ae++){const de=lm[ae];if(A[de]&&fe[de]!==void 0){ue[se]=fe[de];break}}else ue[se]=fe}),ue},B=y("row",o),[H,K]=tue(B),$=F(),Z=Be(B,{[`${B}-no-wrap`]:g===!1,[`${B}-${O}`]:O,[`${B}-${x}`]:x,[`${B}-rtl`]:b==="rtl"},u,K),z={},G=$[0]!=null&&$[0]>0?$[0]/-2:void 0,ee=$[1]!=null&&$[1]>0?$[1]/-2:void 0;G&&(z.marginLeft=G,z.marginRight=G),P?[,z.rowGap]=$:ee&&(z.marginTop=ee,z.marginBottom=ee);const[re,oe]=$,pe=S.useMemo(()=>({gutter:[re,oe],wrap:g,supportFlexGap:P}),[re,oe,g,P]);return H(S.createElement(W6.Provider,{value:pe},S.createElement("div",Object.assign({},_,{className:Z,style:Object.assign(Object.assign({},z),h),ref:t}),f)))}),uue=lue,due=e=>{const{getPrefixCls:t,direction:o}=S.useContext(Hn),{prefixCls:a,className:c=""}=e,u=t("input-group",a),h=t("input"),[f,m]=_w(h),g=Be(u,{[`${u}-lg`]:e.size==="large",[`${u}-sm`]:e.size==="small",[`${u}-compact`]:e.compact,[`${u}-rtl`]:o==="rtl"},m,c),_=S.useContext(xc),y=S.useMemo(()=>Object.assign(Object.assign({},_),{isFormItemInput:!1}),[_]);return f(S.createElement("span",{className:g,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},S.createElement(xc.Provider,{value:y},e.children)))},hue=due;function Zd(e){return!!(e.addonBefore||e.addonAfter)}function Vb(e){return!!(e.prefix||e.suffix||e.allowClear)}function Mf(e,t,o,a){if(o){var c=t;if(t.type==="click"){var u=e.cloneNode(!0);c=Object.create(t,{target:{value:u},currentTarget:{value:u}}),u.value="",o(c);return}if(a!==void 0){c=Object.create(t,{target:{value:e},currentTarget:{value:e}}),e.value=a,o(c);return}o(c)}}function pue(e,t){if(e){e.focus(t);var o=t||{},a=o.cursor;if(a){var c=e.value.length;switch(a){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(c,c);break;default:e.setSelectionRange(0,c)}}}}function xI(e){return typeof e>"u"||e===null?"":String(e)}var z6=function(t){var o,a,c=t.inputElement,u=t.prefixCls,h=t.prefix,f=t.suffix,m=t.addonBefore,g=t.addonAfter,_=t.className,y=t.style,b=t.disabled,A=t.readOnly,I=t.focused,w=t.triggerFocus,D=t.allowClear,x=t.value,O=t.handleReset,P=t.hidden,M=t.classes,V=t.classNames,F=t.dataAttrs,B=t.styles,H=S.useRef(null),K=function(se){var ae;(ae=H.current)!==null&&ae!==void 0&&ae.contains(se.target)&&(w==null||w())},$=function(){var se;if(!D)return null;var ae=!b&&!A&&x,de="".concat(u,"-clear-icon"),ce=Rn(D)==="object"&&D!==null&&D!==void 0&&D.clearIcon?D.clearIcon:"✖";return lt.createElement("span",{onClick:O,onMouseDown:function(Ie){return Ie.preventDefault()},className:Be(de,(se={},Qe(se,"".concat(de,"-hidden"),!ae),Qe(se,"".concat(de,"-has-suffix"),!!f),se)),role:"button",tabIndex:-1},ce)},Z=S.cloneElement(c,{value:x,hidden:P,className:Be((o=c.props)===null||o===void 0?void 0:o.className,!Vb(t)&&!Zd(t)&&_)||null,style:ve(ve({},(a=c.props)===null||a===void 0?void 0:a.style),!Vb(t)&&!Zd(t)?y:{})});if(Vb(t)){var z,G="".concat(u,"-affix-wrapper"),ee=Be(G,(z={},Qe(z,"".concat(G,"-disabled"),b),Qe(z,"".concat(G,"-focused"),I),Qe(z,"".concat(G,"-readonly"),A),Qe(z,"".concat(G,"-input-with-clear-btn"),f&&D&&x),z),!Zd(t)&&_,M==null?void 0:M.affixWrapper),re=(f||D)&&lt.createElement("span",{className:Be("".concat(u,"-suffix"),V==null?void 0:V.suffix),style:B==null?void 0:B.suffix},$(),f);Z=lt.createElement("span",xe({className:ee,style:Zd(t)?void 0:y,hidden:!Zd(t)&&P,onClick:K},F==null?void 0:F.affixWrapper,{ref:H}),h&&lt.createElement("span",{className:Be("".concat(u,"-prefix"),V==null?void 0:V.prefix),style:B==null?void 0:B.prefix},h),S.cloneElement(c,{value:x,hidden:null}),re)}if(Zd(t)){var oe="".concat(u,"-group"),pe="".concat(oe,"-addon"),ue=Be("".concat(u,"-wrapper"),oe,M==null?void 0:M.wrapper),me=Be("".concat(u,"-group-wrapper"),_,M==null?void 0:M.group);return lt.createElement("span",{className:me,style:y,hidden:P},lt.createElement("span",{className:ue},m&&lt.createElement("span",{className:pe},m),S.cloneElement(Z,{hidden:null}),g&&lt.createElement("span",{className:pe},g)))}return Z},fue=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","classes","classNames","styles"],mue=S.forwardRef(function(e,t){var o=e.autoComplete,a=e.onChange,c=e.onFocus,u=e.onBlur,h=e.onPressEnter,f=e.onKeyDown,m=e.prefixCls,g=m===void 0?"rc-input":m,_=e.disabled,y=e.htmlSize,b=e.className,A=e.maxLength,I=e.suffix,w=e.showCount,D=e.type,x=D===void 0?"text":D,O=e.classes,P=e.classNames,M=e.styles,V=dn(e,fue),F=Cc(e.defaultValue,{value:e.value}),B=De(F,2),H=B[0],K=B[1],$=S.useState(!1),Z=De($,2),z=Z[0],G=Z[1],ee=S.useRef(null),re=function(ce){ee.current&&pue(ee.current,ce)};S.useImperativeHandle(t,function(){return{focus:re,blur:function(){var ce;(ce=ee.current)===null||ce===void 0||ce.blur()},setSelectionRange:function(ce,we,Ie){var He;(He=ee.current)===null||He===void 0||He.setSelectionRange(ce,we,Ie)},select:function(){var ce;(ce=ee.current)===null||ce===void 0||ce.select()},input:ee.current}}),S.useEffect(function(){G(function(de){return de&&_?!1:de})},[_]);var oe=function(ce){e.value===void 0&&K(ce.target.value),ee.current&&Mf(ee.current,ce,a)},pe=function(ce){h&&ce.key==="Enter"&&h(ce),f==null||f(ce)},ue=function(ce){G(!0),c==null||c(ce)},me=function(ce){G(!1),u==null||u(ce)},fe=function(ce){K(""),re(),ee.current&&Mf(ee.current,ce,a)},se=function(){var ce=Ko(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","classes","htmlSize","styles","classNames"]);return lt.createElement("input",xe({autoComplete:o},ce,{onChange:oe,onFocus:ue,onBlur:me,onKeyDown:pe,className:Be(g,Qe({},"".concat(g,"-disabled"),_),P==null?void 0:P.input),style:M==null?void 0:M.input,ref:ee,size:y,type:x}))},ae=function(){var ce=Number(A)>0;if(I||w){var we=xI(H),Ie=Ze(we).length,He=Rn(w)==="object"?w.formatter({value:we,count:Ie,maxLength:A}):"".concat(Ie).concat(ce?" / ".concat(A):"");return lt.createElement(lt.Fragment,null,!!w&&lt.createElement("span",{className:Be("".concat(g,"-show-count-suffix"),Qe({},"".concat(g,"-show-count-has-suffix"),!!I),P==null?void 0:P.count),style:ve({},M==null?void 0:M.count)},He),I)}return null};return lt.createElement(z6,xe({},V,{prefixCls:g,className:b,inputElement:se(),handleReset:fe,value:xI(H),focused:z,triggerFocus:re,suffix:ae(),disabled:_,classes:O,classNames:P,styles:M}))});function K6(e,t){const o=S.useRef([]),a=()=>{o.current.push(setTimeout(()=>{var c,u,h,f;!((c=e.current)===null||c===void 0)&&c.input&&((u=e.current)===null||u===void 0?void 0:u.input.getAttribute("type"))==="password"&&(!((h=e.current)===null||h===void 0)&&h.input.hasAttribute("value"))&&((f=e.current)===null||f===void 0||f.input.removeAttribute("value"))}))};return S.useEffect(()=>(t&&a(),()=>o.current.forEach(c=>{c&&clearTimeout(c)})),[]),a}function gue(e){return!!(e.prefix||e.suffix||e.allowClear)}var vue=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};function Eue(e,t){if(!e)return;e.focus(t);const{cursor:o}=t||{};if(o){const a=e.value.length;switch(o){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(a,a);break;default:e.setSelectionRange(0,a);break}}}const _ue=S.forwardRef((e,t)=>{const{prefixCls:o,bordered:a=!0,status:c,size:u,disabled:h,onBlur:f,onFocus:m,suffix:g,allowClear:_,addonAfter:y,addonBefore:b,className:A,rootClassName:I,onChange:w,classNames:D}=e,x=vue(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","rootClassName","onChange","classNames"]),{getPrefixCls:O,direction:P,input:M}=lt.useContext(Hn),V=O("input",o),F=S.useRef(null),[B,H]=_w(V),{compactSize:K,compactItemClassnames:$}=tw(V,P),Z=Xh(Ie=>{var He;return(He=u??K)!==null&&He!==void 0?He:Ie}),z=lt.useContext(Cm),G=h??z,{status:ee,hasFeedback:re,feedbackIcon:oe}=S.useContext(xc),pe=f6(ee,c),ue=gue(e)||!!re,me=S.useRef(ue);S.useEffect(()=>{ue&&me.current,me.current=ue},[ue]);const fe=K6(F,!0),se=Ie=>{fe(),f==null||f(Ie)},ae=Ie=>{fe(),m==null||m(Ie)},de=Ie=>{fe(),w==null||w(Ie)},ce=(re||g)&&lt.createElement(lt.Fragment,null,g,re&&oe);let we;return typeof _=="object"&&(_!=null&&_.clearIcon)?we=_:_&&(we={clearIcon:lt.createElement(d_,null)}),B(lt.createElement(mue,Object.assign({ref:Rs(t,F),prefixCls:V,autoComplete:M==null?void 0:M.autoComplete},x,{disabled:G,onBlur:se,onFocus:ae,suffix:ce,allowClear:we,className:Be(A,I,$),onChange:de,addonAfter:y&&lt.createElement(cI,null,lt.createElement(K4,{override:!0,status:!0},y)),addonBefore:b&&lt.createElement(cI,null,lt.createElement(K4,{override:!0,status:!0},b)),classNames:Object.assign(Object.assign({},D),{input:Be({[`${V}-sm`]:Z==="small",[`${V}-lg`]:Z==="large",[`${V}-rtl`]:P==="rtl",[`${V}-borderless`]:!a},!ue&&Lf(V,pe),D==null?void 0:D.input,H)}),classes:{affixWrapper:Be({[`${V}-affix-wrapper-sm`]:Z==="small",[`${V}-affix-wrapper-lg`]:Z==="large",[`${V}-affix-wrapper-rtl`]:P==="rtl",[`${V}-affix-wrapper-borderless`]:!a},Lf(`${V}-affix-wrapper`,pe,re),H),wrapper:Be({[`${V}-group-rtl`]:P==="rtl"},H),group:Be({[`${V}-group-wrapper-sm`]:Z==="small",[`${V}-group-wrapper-lg`]:Z==="large",[`${V}-group-wrapper-rtl`]:P==="rtl",[`${V}-group-wrapper-disabled`]:G},Lf(`${V}-group-wrapper`,pe,re),H)}})))}),Sw=_ue;var Sue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const yue=Sue;var Cue=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:yue}))};const bue=S.forwardRef(Cue);var Tue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const Rue=Tue;var Iue=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:Rue}))};const wue=S.forwardRef(Iue);var Oue=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const Aue=e=>e?S.createElement(wue,null):S.createElement(bue,null),Nue={click:"onClick",hover:"onMouseOver"},xue=S.forwardRef((e,t)=>{const{visibilityToggle:o=!0}=e,a=typeof o=="object"&&o.visible!==void 0,[c,u]=S.useState(()=>a?o.visible:!1),h=S.useRef(null);S.useEffect(()=>{a&&u(o.visible)},[a,o]);const f=K6(h),m=()=>{const{disabled:V}=e;V||(c&&f(),u(F=>{var B;const H=!F;return typeof o=="object"&&((B=o.onVisibleChange)===null||B===void 0||B.call(o,H)),H}))},g=V=>{const{action:F="click",iconRender:B=Aue}=e,H=Nue[F]||"",K=B(c),$={[H]:m,className:`${V}-icon`,key:"passwordIcon",onMouseDown:Z=>{Z.preventDefault()},onMouseUp:Z=>{Z.preventDefault()}};return S.cloneElement(S.isValidElement(K)?K:S.createElement("span",null,K),$)},{className:_,prefixCls:y,inputPrefixCls:b,size:A}=e,I=Oue(e,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:w}=S.useContext(Hn),D=w("input",b),x=w("input-password",y),O=o&&g(x),P=Be(x,_,{[`${x}-${A}`]:!!A}),M=Object.assign(Object.assign({},Ko(I,["suffix","iconRender","visibilityToggle"])),{type:c?"text":"password",className:P,prefixCls:D,suffix:O});return A&&(M.size=A),S.createElement(Sw,Object.assign({ref:Rs(t,h)},M))}),Pue=xue;var Due=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const kue=S.forwardRef((e,t)=>{const{prefixCls:o,inputPrefixCls:a,className:c,size:u,suffix:h,enterButton:f=!1,addonAfter:m,loading:g,disabled:_,onSearch:y,onChange:b,onCompositionStart:A,onCompositionEnd:I}=e,w=Due(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:D,direction:x}=S.useContext(Hn),O=S.useRef(!1),P=D("input-search",o),M=D("input",a),{compactSize:V}=tw(P,x),F=Xh(fe=>{var se;return(se=u??V)!==null&&se!==void 0?se:fe}),B=S.useRef(null),H=fe=>{fe&&fe.target&&fe.type==="click"&&y&&y(fe.target.value,fe),b&&b(fe)},K=fe=>{var se;document.activeElement===((se=B.current)===null||se===void 0?void 0:se.input)&&fe.preventDefault()},$=fe=>{var se,ae;y&&y((ae=(se=B.current)===null||se===void 0?void 0:se.input)===null||ae===void 0?void 0:ae.value,fe)},Z=fe=>{O.current||g||$(fe)},z=typeof f=="boolean"?S.createElement(xse,null):null,G=`${P}-button`;let ee;const re=f||{},oe=re.type&&re.type.__ANT_BUTTON===!0;oe||re.type==="button"?ee=Cs(re,Object.assign({onMouseDown:K,onClick:fe=>{var se,ae;(ae=(se=re==null?void 0:re.props)===null||se===void 0?void 0:se.onClick)===null||ae===void 0||ae.call(se,fe),$(fe)},key:"enterButton"},oe?{className:G,size:F}:{})):ee=S.createElement(wi,{className:G,type:f?"primary":void 0,size:F,disabled:_,key:"enterButton",onMouseDown:K,onClick:$,loading:g,icon:z},f),m&&(ee=[ee,Cs(m,{key:"addonAfter"})]);const pe=Be(P,{[`${P}-rtl`]:x==="rtl",[`${P}-${F}`]:!!F,[`${P}-with-button`]:!!f},c),ue=fe=>{O.current=!0,A==null||A(fe)},me=fe=>{O.current=!1,I==null||I(fe)};return S.createElement(Sw,Object.assign({ref:Rs(B,t),onPressEnter:Z},w,{size:F,onCompositionStart:ue,onCompositionEnd:me,prefixCls:M,addonAfter:ee,suffix:h,onChange:H,className:pe,disabled:_}))}),Lue=kue;var Mue=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,Uue=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],jb={},Ua;function Fue(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&jb[o])return jb[o];var a=window.getComputedStyle(e),c=a.getPropertyValue("box-sizing")||a.getPropertyValue("-moz-box-sizing")||a.getPropertyValue("-webkit-box-sizing"),u=parseFloat(a.getPropertyValue("padding-bottom"))+parseFloat(a.getPropertyValue("padding-top")),h=parseFloat(a.getPropertyValue("border-bottom-width"))+parseFloat(a.getPropertyValue("border-top-width")),f=Uue.map(function(g){return"".concat(g,":").concat(a.getPropertyValue(g))}).join(";"),m={sizingStyle:f,paddingSize:u,borderSize:h,boxSizing:c};return t&&o&&(jb[o]=m),m}function Vue(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Ua||(Ua=document.createElement("textarea"),Ua.setAttribute("tab-index","-1"),Ua.setAttribute("aria-hidden","true"),document.body.appendChild(Ua)),e.getAttribute("wrap")?Ua.setAttribute("wrap",e.getAttribute("wrap")):Ua.removeAttribute("wrap");var c=Fue(e,t),u=c.paddingSize,h=c.borderSize,f=c.boxSizing,m=c.sizingStyle;Ua.setAttribute("style","".concat(m,";").concat(Mue)),Ua.value=e.value||e.placeholder||"";var g=void 0,_=void 0,y,b=Ua.scrollHeight;if(f==="border-box"?b+=h:f==="content-box"&&(b-=u),o!==null||a!==null){Ua.value=" ";var A=Ua.scrollHeight-u;o!==null&&(g=A*o,f==="border-box"&&(g=g+u+h),b=Math.max(g,b)),a!==null&&(_=A*a,f==="border-box"&&(_=_+u+h),y=b>_?"":"hidden",b=Math.min(_,b))}var I={height:b,overflowY:y,resize:"none"};return g&&(I.minHeight=g),_&&(I.maxHeight=_),I}var jue=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],Bb=0,$b=1,Hb=2,Bue=S.forwardRef(function(e,t){var o=e,a=o.prefixCls;o.onPressEnter;var c=o.defaultValue,u=o.value,h=o.autoSize,f=o.onResize,m=o.className,g=o.style,_=o.disabled,y=o.onChange;o.onInternalAutoSize;var b=dn(o,jue),A=Cc(c,{value:u,postState:function(ce){return ce??""}}),I=De(A,2),w=I[0],D=I[1],x=function(ce){D(ce.target.value),y==null||y(ce)},O=S.useRef();S.useImperativeHandle(t,function(){return{textArea:O.current}});var P=S.useMemo(function(){return h&&Rn(h)==="object"?[h.minRows,h.maxRows]:[]},[h]),M=De(P,2),V=M[0],F=M[1],B=!!h,H=function(){try{if(document.activeElement===O.current){var ce=O.current,we=ce.selectionStart,Ie=ce.selectionEnd,He=ce.scrollTop;O.current.setSelectionRange(we,Ie),O.current.scrollTop=He}}catch{}},K=S.useState(Hb),$=De(K,2),Z=$[0],z=$[1],G=S.useState(),ee=De(G,2),re=ee[0],oe=ee[1],pe=function(){z(Bb)};Or(function(){B&&pe()},[u,V,F,B]),Or(function(){if(Z===Bb)z($b);else if(Z===$b){var de=Vue(O.current,!1,V,F);z(Hb),oe(de)}else H()},[Z]);var ue=S.useRef(),me=function(){Hi.cancel(ue.current)},fe=function(ce){Z===Hb&&(f==null||f(ce),h&&(me(),ue.current=Hi(function(){pe()})))};S.useEffect(function(){return me},[]);var se=B?re:null,ae=ve(ve({},g),se);return(Z===Bb||Z===$b)&&(ae.overflowY="hidden",ae.overflowX="hidden"),S.createElement(Hu,{onResize:fe,disabled:!(h||f)},S.createElement("textarea",xe({},b,{ref:O,style:ae,className:Be(a,m,Qe({},"".concat(a,"-disabled"),_)),disabled:_,value:w,onChange:x})))}),$ue=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","className","style","disabled","hidden","classNames","styles","onResize"];function Y6(e,t){return Ze(e||"").slice(0,t).join("")}function yF(e,t,o,a){var c=o;return e?c=Y6(o,a):Ze(t||"").length<o.length&&Ze(o||"").length>a&&(c=t),c}var Hue=lt.forwardRef(function(e,t){var o,a=e.defaultValue,c=e.value,u=e.onFocus,h=e.onBlur,f=e.onChange,m=e.allowClear,g=e.maxLength,_=e.onCompositionStart,y=e.onCompositionEnd,b=e.suffix,A=e.prefixCls,I=A===void 0?"rc-textarea":A,w=e.classes,D=e.showCount,x=e.className,O=e.style,P=e.disabled,M=e.hidden,V=e.classNames,F=e.styles,B=e.onResize,H=dn(e,$ue),K=Cc(a,{value:c,defaultValue:a}),$=De(K,2),Z=$[0],z=$[1],G=S.useRef(null),ee=lt.useState(!1),re=De(ee,2),oe=re[0],pe=re[1],ue=lt.useState(!1),me=De(ue,2),fe=me[0],se=me[1],ae=lt.useRef(),de=lt.useRef(0),ce=lt.useState(null),we=De(ce,2),Ie=we[0],He=we[1],Le=function(){G.current.textArea.focus()};S.useImperativeHandle(t,function(){return{resizableTextArea:G.current,focus:Le,blur:function(){G.current.textArea.blur()}}}),S.useEffect(function(){pe(function(bt){return!P&&bt})},[P]);var ft=Number(g)>0,gt=function(wt){se(!0),ae.current=Z,de.current=wt.currentTarget.selectionStart,_==null||_(wt)},at=function(wt){se(!1);var Mt=wt.currentTarget.value;if(ft){var Yt,Nn=de.current>=g+1||de.current===((Yt=ae.current)===null||Yt===void 0?void 0:Yt.length);Mt=yF(Nn,ae.current,Mt,g)}Mt!==Z&&(z(Mt),Mf(wt.currentTarget,wt,f,Mt)),y==null||y(wt)},rt=function(wt){var Mt=wt.target.value;if(!fe&&ft){var Yt=wt.target.selectionStart>=g+1||wt.target.selectionStart===Mt.length||!wt.target.selectionStart;Mt=yF(Yt,Z,Mt,g)}z(Mt),Mf(wt.currentTarget,wt,f,Mt)},pt=function(wt){var Mt=H.onPressEnter,Yt=H.onKeyDown;wt.key==="Enter"&&Mt&&Mt(wt),Yt==null||Yt(wt)},Ye=function(wt){pe(!0),u==null||u(wt)},yt=function(wt){pe(!1),h==null||h(wt)},kt=function(wt){z(""),Le(),Mf(G.current.textArea,wt,f)},Lt=xI(Z);!fe&&ft&&c==null&&(Lt=Y6(Lt,g));var Xe=b,qe;if(D){var Ge=Ze(Lt).length;Rn(D)==="object"?qe=D.formatter({value:Lt,count:Ge,maxLength:g}):qe="".concat(Ge).concat(ft?" / ".concat(g):""),Xe=lt.createElement(lt.Fragment,null,Xe,lt.createElement("span",{className:Be("".concat(I,"-data-count"),V==null?void 0:V.count),style:F==null?void 0:F.count},qe))}var nt=function(wt){B==null||B(wt),Ie===null?He("mounted"):Ie==="mounted"&&He("resized")},mt=lt.createElement(z6,{value:Lt,allowClear:m,handleReset:kt,suffix:Xe,prefixCls:I,classes:{affixWrapper:Be(w==null?void 0:w.affixWrapper,(o={},Qe(o,"".concat(I,"-show-count"),D),Qe(o,"".concat(I,"-textarea-allow-clear"),m),o))},disabled:P,focused:oe,className:x,style:ve(ve({},O),Ie==="resized"?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof qe=="string"?qe:void 0}},hidden:M,inputElement:lt.createElement(Bue,xe({},H,{onKeyDown:pt,onChange:rt,onFocus:Ye,onBlur:yt,onCompositionStart:gt,onCompositionEnd:at,className:V==null?void 0:V.textarea,style:ve(ve({},F==null?void 0:F.textarea),{},{resize:O==null?void 0:O.resize}),disabled:P,prefixCls:I,onResize:nt,ref:G}))});return mt}),Wue=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const Gue=S.forwardRef((e,t)=>{var{prefixCls:o,bordered:a=!0,size:c,disabled:u,status:h,allowClear:f,showCount:m,classNames:g}=e,_=Wue(e,["prefixCls","bordered","size","disabled","status","allowClear","showCount","classNames"]);const{getPrefixCls:y,direction:b}=S.useContext(Hn),A=Xh(c),I=S.useContext(Cm),w=u??I,{status:D,hasFeedback:x,feedbackIcon:O}=S.useContext(xc),P=f6(D,h),M=S.useRef(null);S.useImperativeHandle(t,()=>{var K;return{resizableTextArea:(K=M.current)===null||K===void 0?void 0:K.resizableTextArea,focus:$=>{var Z,z;Eue((z=(Z=M.current)===null||Z===void 0?void 0:Z.resizableTextArea)===null||z===void 0?void 0:z.textArea,$)},blur:()=>{var $;return($=M.current)===null||$===void 0?void 0:$.blur()}}});const V=y("input",o);let F;typeof f=="object"&&(f!=null&&f.clearIcon)?F=f:f&&(F={clearIcon:S.createElement(d_,null)});const[B,H]=_w(V);return B(S.createElement(Hue,Object.assign({},_,{disabled:w,allowClear:F,classes:{affixWrapper:Be(`${V}-textarea-affix-wrapper`,{[`${V}-affix-wrapper-rtl`]:b==="rtl",[`${V}-affix-wrapper-borderless`]:!a,[`${V}-affix-wrapper-sm`]:A==="small",[`${V}-affix-wrapper-lg`]:A==="large",[`${V}-textarea-show-count`]:m},Lf(`${V}-affix-wrapper`,P),H)},classNames:Object.assign(Object.assign({},g),{textarea:Be({[`${V}-borderless`]:!a,[`${V}-sm`]:A==="small",[`${V}-lg`]:A==="large"},Lf(V,P),H,g==null?void 0:g.textarea)}),prefixCls:V,suffix:x&&S.createElement("span",{className:`${V}-textarea-suffix`},O),showCount:m,ref:M})))}),q6=Gue,Om=Sw;Om.Group=hue;Om.Search=Lue;Om.TextArea=q6;Om.Password=Pue;const zue=Om;function EE(e){const[t,o]=S.useState(e);return S.useEffect(()=>{const a=setTimeout(()=>{o(e)},e.length?0:10);return()=>{clearTimeout(a)}},[e]),t}const Kue=e=>{const{componentCls:t}=e,o=`${t}-show-help`,a=`${t}-show-help-item`;return{[o]:{transition:`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`,"&-appear, &-enter":{opacity:0,"&-active":{opacity:1}},"&-leave":{opacity:1,"&-active":{opacity:0}},[a]:{overflow:"hidden",transition:`height ${e.motionDurationSlow} ${e.motionEaseInOut},
                     opacity ${e.motionDurationSlow} ${e.motionEaseInOut},
                     transform ${e.motionDurationSlow} ${e.motionEaseInOut} !important`,[`&${a}-appear, &${a}-enter`]:{transform:"translateY(-5px)",opacity:0,"&-active":{transform:"translateY(0)",opacity:1}},[`&${a}-leave-active`]:{transform:"translateY(-5px)"}}}}},Yue=Kue,que=e=>({legend:{display:"block",width:"100%",marginBottom:e.marginLG,padding:0,color:e.colorTextDescription,fontSize:e.fontSizeLG,lineHeight:"inherit",border:0,borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`},label:{fontSize:e.fontSize},'input[type="search"]':{boxSizing:"border-box"},'input[type="radio"], input[type="checkbox"]':{lineHeight:"normal"},'input[type="file"]':{display:"block"},'input[type="range"]':{display:"block",width:"100%"},"select[multiple], select[size]":{height:"auto"},"input[type='file']:focus,\n  input[type='radio']:focus,\n  input[type='checkbox']:focus":{outline:0,boxShadow:`0 0 0 ${e.controlOutlineWidth}px ${e.controlOutline}`},output:{display:"block",paddingTop:15,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight}}),CF=(e,t)=>{const{formItemCls:o}=e;return{[o]:{[`${o}-label > label`]:{height:t},[`${o}-control-input`]:{minHeight:t}}}},Xue=e=>{const{componentCls:t}=e;return{[e.componentCls]:Object.assign(Object.assign(Object.assign({},Wu(e)),que(e)),{[`${t}-text`]:{display:"inline-block",paddingInlineEnd:e.paddingSM},"&-small":Object.assign({},CF(e,e.controlHeightSM)),"&-large":Object.assign({},CF(e,e.controlHeightLG))})}},Jue=e=>{const{formItemCls:t,iconCls:o,componentCls:a,rootPrefixCls:c}=e;return{[t]:Object.assign(Object.assign({},Wu(e)),{marginBottom:e.marginLG,verticalAlign:"top","&-with-help":{transition:"none"},[`&-hidden,
        &-hidden.${c}-row`]:{display:"none"},"&-has-warning":{[`${t}-split`]:{color:e.colorError}},"&-has-error":{[`${t}-split`]:{color:e.colorWarning}},[`${t}-label`]:{display:"inline-block",flexGrow:0,overflow:"hidden",whiteSpace:"nowrap",textAlign:"end",verticalAlign:"middle","&-left":{textAlign:"start"},"&-wrap":{overflow:"unset",lineHeight:`${e.lineHeight} - 0.25em`,whiteSpace:"unset"},"> label":{position:"relative",display:"inline-flex",alignItems:"center",maxWidth:"100%",height:e.controlHeight,color:e.colorTextHeading,fontSize:e.fontSize,[`> ${o}`]:{fontSize:e.fontSize,verticalAlign:"top"},[`&${t}-required:not(${t}-required-mark-optional)::before`]:{display:"inline-block",marginInlineEnd:e.marginXXS,color:e.colorError,fontSize:e.fontSize,fontFamily:"SimSun, sans-serif",lineHeight:1,content:'"*"',[`${a}-hide-required-mark &`]:{display:"none"}},[`${t}-optional`]:{display:"inline-block",marginInlineStart:e.marginXXS,color:e.colorTextDescription,[`${a}-hide-required-mark &`]:{display:"none"}},[`${t}-tooltip`]:{color:e.colorTextDescription,cursor:"help",writingMode:"horizontal-tb",marginInlineStart:e.marginXXS},"&::after":{content:'":"',position:"relative",marginBlock:0,marginInlineStart:e.marginXXS/2,marginInlineEnd:e.marginXS},[`&${t}-no-colon::after`]:{content:'" "'}}},[`${t}-control`]:{display:"flex",flexDirection:"column",flexGrow:1,[`&:first-child:not([class^="'${c}-col-'"]):not([class*="' ${c}-col-'"])`]:{width:"100%"},"&-input":{position:"relative",display:"flex",alignItems:"center",minHeight:e.controlHeight,"&-content":{flex:"auto",maxWidth:"100%"}}},[t]:{"&-explain, &-extra":{clear:"both",color:e.colorTextDescription,fontSize:e.fontSize,lineHeight:e.lineHeight},"&-explain-connected":{width:"100%"},"&-extra":{minHeight:e.controlHeightSM,transition:`color ${e.motionDurationMid} ${e.motionEaseOut}`},"&-explain":{"&-error":{color:e.colorError},"&-warning":{color:e.colorWarning}}},[`&-with-help ${t}-explain`]:{height:"auto",opacity:1},[`${t}-feedback-icon`]:{fontSize:e.fontSize,textAlign:"center",visibility:"visible",animationName:lw,animationDuration:e.motionDurationMid,animationTimingFunction:e.motionEaseOutBack,pointerEvents:"none","&-success":{color:e.colorSuccess},"&-error":{color:e.colorError},"&-warning":{color:e.colorWarning},"&-validating":{color:e.colorPrimary}}})}},Que=e=>{const{componentCls:t,formItemCls:o,rootPrefixCls:a}=e;return{[`${t}-horizontal`]:{[`${o}-label`]:{flexGrow:0},[`${o}-control`]:{flex:"1 1 0",minWidth:0},[`${o}-label.${a}-col-24 + ${o}-control`]:{minWidth:"unset"}}}},Zue=e=>{const{componentCls:t,formItemCls:o}=e;return{[`${t}-inline`]:{display:"flex",flexWrap:"wrap",[o]:{flex:"none",marginInlineEnd:e.margin,marginBottom:0,"&-row":{flexWrap:"nowrap"},"&-with-help":{marginBottom:e.marginLG},[`> ${o}-label,
        > ${o}-control`]:{display:"inline-block",verticalAlign:"top"},[`> ${o}-label`]:{flex:"none"},[`${t}-text`]:{display:"inline-block"},[`${o}-has-feedback`]:{display:"inline-block"}}}}},nh=e=>({padding:`0 0 ${e.paddingXS}px`,whiteSpace:"initial",textAlign:"start","> label":{margin:0,"&::after":{display:"none"}}}),ede=e=>{const{componentCls:t,formItemCls:o}=e;return{[`${o} ${o}-label`]:nh(e),[t]:{[o]:{flexWrap:"wrap",[`${o}-label,
          ${o}-control`]:{flex:"0 0 100%",maxWidth:"100%"}}}}},tde=e=>{const{componentCls:t,formItemCls:o,rootPrefixCls:a}=e;return{[`${t}-vertical`]:{[o]:{"&-row":{flexDirection:"column"},"&-label > label":{height:"auto"},[`${t}-item-control`]:{width:"100%"}}},[`${t}-vertical ${o}-label,
      .${a}-col-24${o}-label,
      .${a}-col-xl-24${o}-label`]:nh(e),[`@media (max-width: ${e.screenXSMax}px)`]:[ede(e),{[t]:{[`.${a}-col-xs-24${o}-label`]:nh(e)}}],[`@media (max-width: ${e.screenSMMax}px)`]:{[t]:{[`.${a}-col-sm-24${o}-label`]:nh(e)}},[`@media (max-width: ${e.screenMDMax}px)`]:{[t]:{[`.${a}-col-md-24${o}-label`]:nh(e)}},[`@media (max-width: ${e.screenLGMax}px)`]:{[t]:{[`.${a}-col-lg-24${o}-label`]:nh(e)}}}},yw=Is("Form",(e,t)=>{let{rootPrefixCls:o}=t;const a=zi(e,{formItemCls:`${e.componentCls}-item`,rootPrefixCls:o});return[Xue(a),Jue(a),Yue(a),Que(a),Zue(a),tde(a),o6(a),lw]}),bF=[];function Wb(e,t,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return{key:typeof e=="string"?e:`${t}-${a}`,error:e,errorStatus:o}}function X6(e){let{help:t,helpStatus:o,errors:a=bF,warnings:c=bF,className:u,fieldId:h,onVisibleChanged:f}=e;const{prefixCls:m}=S.useContext(cw),g=`${m}-item-explain`,[,_]=yw(m),y=S.useMemo(()=>uI(m),[m]),b=EE(a),A=EE(c),I=S.useMemo(()=>t!=null?[Wb(t,"help",o)]:[].concat(Ze(b.map((D,x)=>Wb(D,"error","error",x))),Ze(A.map((D,x)=>Wb(D,"warning","warning",x)))),[t,o,b,A]),w={};return h&&(w.id=`${h}_help`),S.createElement(Gu,{motionDeadline:y.motionDeadline,motionName:`${m}-show-help`,visible:!!I.length,onVisibleChanged:f},D=>{const{className:x,style:O}=D;return S.createElement("div",Object.assign({},w,{className:Be(g,x,u,_),style:O,role:"alert"}),S.createElement(R8,Object.assign({keys:I},uI(m),{motionName:`${m}-show-help-item`,component:!1}),P=>{const{key:M,error:V,errorStatus:F,className:B,style:H}=P;return S.createElement("div",{key:M,className:Be(B,{[`${g}-${F}`]:F}),style:H},V)}))})}const nde=["parentNode"],rde="form_item";function Uf(e){return e===void 0||e===!1?[]:Array.isArray(e)?e:[e]}function J6(e,t){if(!e.length)return;const o=e.join("_");return t?`${t}_${o}`:nde.includes(o)?`${rde}_${o}`:o}function TF(e){return Uf(e).join("_")}function Q6(e){const[t]=sw(),o=S.useRef({}),a=S.useMemo(()=>e??Object.assign(Object.assign({},t),{__INTERNAL__:{itemRef:c=>u=>{const h=TF(c);u?o.current[h]=u:delete o.current[h]}},scrollToField:function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const h=Uf(c),f=J6(h,a.__INTERNAL__.name),m=f?document.getElementById(f):null;m&&aie(m,Object.assign({scrollMode:"if-needed",block:"nearest"},u))},getFieldInstance:c=>{const u=TF(c);return o.current[u]}}),[e,t]);return[a]}var ide=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const ode=(e,t)=>{const o=S.useContext(Cm),{getPrefixCls:a,direction:c,form:u}=S.useContext(Hn),{prefixCls:h,className:f,rootClassName:m,size:g,disabled:_=o,form:y,colon:b,labelAlign:A,labelWrap:I,labelCol:w,wrapperCol:D,hideRequiredMark:x,layout:O="horizontal",scrollToFirstError:P,requiredMark:M,onFinishFailed:V,name:F}=e,B=ide(e,["prefixCls","className","rootClassName","size","disabled","form","colon","labelAlign","labelWrap","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name"]),H=Xh(g),K=S.useContext(JB),$=S.useMemo(()=>M!==void 0?M:u&&u.requiredMark!==void 0?u.requiredMark:!x,[x,M,u]),Z=b??(u==null?void 0:u.colon),z=a("form",h),[G,ee]=yw(z),re=Be(z,{[`${z}-${O}`]:!0,[`${z}-hide-required-mark`]:$===!1,[`${z}-rtl`]:c==="rtl",[`${z}-${H}`]:H},ee,f,m),[oe]=Q6(y),{__INTERNAL__:pe}=oe;pe.name=F;const ue=S.useMemo(()=>({name:F,labelAlign:A,labelCol:w,labelWrap:I,wrapperCol:D,vertical:O==="vertical",colon:Z,requiredMark:$,itemRef:pe.itemRef,form:oe}),[F,A,w,D,O,Z,$,oe]);S.useImperativeHandle(t,()=>oe);const me=(se,ae)=>{if(se){let de={block:"nearest"};typeof se=="object"&&(de=se),oe.scrollToField(ae,de)}},fe=se=>{if(V==null||V(se),se.errorFields.length){const ae=se.errorFields[0].name;if(P!==void 0){me(P,ae);return}u&&u.scrollToFirstError!==void 0&&me(u.scrollToFirstError,ae)}};return G(S.createElement(h8,{disabled:_},S.createElement(f8,{size:H},S.createElement(n6,{validateMessages:K},S.createElement(Ml.Provider,{value:ue},S.createElement(Zh,Object.assign({id:F},B,{name:F,onFinishFailed:fe,form:oe,className:re})))))))},ade=S.forwardRef(ode),sde=ade,Z6=()=>{const{status:e,errors:t=[],warnings:o=[]}=S.useContext(xc);return{status:e,errors:t,warnings:o}};Z6.Context=xc;const cde=Z6;function lde(e){const[t,o]=S.useState(e),a=S.useRef(null),c=S.useRef([]),u=S.useRef(!1);S.useEffect(()=>(u.current=!1,()=>{u.current=!0,Hi.cancel(a.current),a.current=null}),[]);function h(f){u.current||(a.current===null&&(c.current=[],a.current=Hi(()=>{a.current=null,o(m=>{let g=m;return c.current.forEach(_=>{g=_(g)}),g})})),c.current.push(f))}return[t,h]}function ude(){const{itemRef:e}=S.useContext(Ml),t=S.useRef({});function o(a,c){const u=c&&typeof c=="object"&&c.ref,h=a.join("_");return(t.current.name!==h||t.current.originRef!==u)&&(t.current.name=h,t.current.originRef=u,t.current.ref=Rs(e(a),u)),t.current.ref}return o}const dde=e=>{const{prefixCls:t,status:o,wrapperCol:a,children:c,errors:u,warnings:h,_internalItemRender:f,extra:m,help:g,fieldId:_,marginBottom:y,onErrorVisibleChanged:b}=e,A=`${t}-item`,I=S.useContext(Ml),w=a||I.wrapperCol||{},D=Be(`${A}-control`,w.className),x=S.useMemo(()=>Object.assign({},I),[I]);delete x.labelCol,delete x.wrapperCol;const O=S.createElement("div",{className:`${A}-control-input`},S.createElement("div",{className:`${A}-control-input-content`},c)),P=S.useMemo(()=>({prefixCls:t,status:o}),[t,o]),M=y!==null||u.length||h.length?S.createElement("div",{style:{display:"flex",flexWrap:"nowrap"}},S.createElement(cw.Provider,{value:P},S.createElement(X6,{fieldId:_,errors:u,warnings:h,help:g,helpStatus:o,className:`${A}-explain-connected`,onVisibleChanged:b})),!!y&&S.createElement("div",{style:{width:0,height:y}})):null,V={};_&&(V.id=`${_}_extra`);const F=m?S.createElement("div",Object.assign({},V,{className:`${A}-extra`}),m):null,B=f&&f.mark==="pro_table_render"&&f.render?f.render(e,{input:O,errorList:M,extra:F}):S.createElement(S.Fragment,null,O,M,F);return S.createElement(Ml.Provider,{value:x},S.createElement(G6,Object.assign({},w,{className:D}),B))},hde=dde;var pde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"};const fde=pde;var mde=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:fde}))};const gde=S.forwardRef(mde);var vde=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};function Ede(e){return e?typeof e=="object"&&!S.isValidElement(e)?e:{title:e}:null}const _de=e=>{let{prefixCls:t,label:o,htmlFor:a,labelCol:c,labelAlign:u,colon:h,required:f,requiredMark:m,tooltip:g}=e;var _;const[y]=ZB("Form"),{vertical:b,labelAlign:A,labelCol:I,labelWrap:w,colon:D}=S.useContext(Ml);if(!o)return null;const x=c||I||{},O=u||A,P=`${t}-item-label`,M=Be(P,O==="left"&&`${P}-left`,x.className,{[`${P}-wrap`]:!!w});let V=o;const F=h===!0||D!==!1&&h!==!1;F&&!b&&typeof o=="string"&&o.trim()!==""&&(V=o.replace(/[:|：]\s*$/,""));const H=Ede(g);if(H){const{icon:$=S.createElement(gde,null)}=H,Z=vde(H,["icon"]),z=S.createElement(um,Object.assign({},Z),S.cloneElement($,{className:`${t}-item-tooltip`,title:""}));V=S.createElement(S.Fragment,null,V,z)}m==="optional"&&!f&&(V=S.createElement(S.Fragment,null,V,S.createElement("span",{className:`${t}-item-optional`,title:""},(y==null?void 0:y.optional)||((_=Fh.Form)===null||_===void 0?void 0:_.optional))));const K=Be({[`${t}-item-required`]:f,[`${t}-item-required-mark-optional`]:m==="optional",[`${t}-item-no-colon`]:!F});return S.createElement(G6,Object.assign({},x,{className:M}),S.createElement("label",{htmlFor:a,className:K,title:typeof o=="string"?o:""},V))},Sde=_de;var yde=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const Cde={success:D8,warning:k8,error:d_,validating:U8};function bde(e){const{prefixCls:t,className:o,rootClassName:a,style:c,help:u,errors:h,warnings:f,validateStatus:m,meta:g,hasFeedback:_,hidden:y,children:b,fieldId:A,required:I,isRequired:w,onSubItemMetaChange:D}=e,x=yde(e,["prefixCls","className","rootClassName","style","help","errors","warnings","validateStatus","meta","hasFeedback","hidden","children","fieldId","required","isRequired","onSubItemMetaChange"]),O=`${t}-item`,{requiredMark:P}=S.useContext(Ml),M=S.useRef(null),V=EE(h),F=EE(f),B=u!=null,H=!!(B||h.length||f.length),K=!!M.current&&p_(M.current),[$,Z]=S.useState(null);Or(()=>{if(H&&M.current){const pe=getComputedStyle(M.current);Z(parseInt(pe.marginBottom,10))}},[H,K]);const z=pe=>{pe||Z(null)},ee=function(){let pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ue="";const me=pe?V:g.errors,fe=pe?F:g.warnings;return m!==void 0?ue=m:g.validating?ue="validating":me.length?ue="error":fe.length?ue="warning":(g.touched||_&&g.validated)&&(ue="success"),ue}(),re=S.useMemo(()=>{let pe;if(_){const ue=ee&&Cde[ee];pe=ue?S.createElement("span",{className:Be(`${O}-feedback-icon`,`${O}-feedback-icon-${ee}`)},S.createElement(ue,null)):null}return{status:ee,errors:h,warnings:f,hasFeedback:_,feedbackIcon:pe,isFormItemInput:!0}},[ee,_]),oe=Be(O,o,a,{[`${O}-with-help`]:B||V.length||F.length,[`${O}-has-feedback`]:ee&&_,[`${O}-has-success`]:ee==="success",[`${O}-has-warning`]:ee==="warning",[`${O}-has-error`]:ee==="error",[`${O}-is-validating`]:ee==="validating",[`${O}-hidden`]:y});return S.createElement("div",{className:oe,style:c,ref:M},S.createElement(uue,Object.assign({className:`${O}-row`},Ko(x,["_internalItemRender","colon","dependencies","extra","fieldKey","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","label","labelAlign","labelCol","labelWrap","messageVariables","name","normalize","noStyle","preserve","requiredMark","rules","shouldUpdate","trigger","tooltip","validateFirst","validateTrigger","valuePropName","wrapperCol"])),S.createElement(Sde,Object.assign({htmlFor:A},e,{requiredMark:P,required:I??w,prefixCls:t})),S.createElement(hde,Object.assign({},e,g,{errors:V,warnings:F,prefixCls:t,status:ee,help:u,marginBottom:$,onErrorVisibleChanged:z}),S.createElement(t6.Provider,{value:D},S.createElement(xc.Provider,{value:re},b)))),!!$&&S.createElement("div",{className:`${O}-margin-offset`,style:{marginBottom:-$}}))}function Tde(e){if(typeof e=="function")return e;const t=Oc(e);return t.length<=1?t[0]:t}const Rde="__SPLIT__",Ide=S.memo(e=>{let{children:t}=e;return t},(e,t)=>e.value===t.value&&e.update===t.update&&e.childProps.length===t.childProps.length&&e.childProps.every((o,a)=>o===t.childProps[a]));function wde(e){return e!=null}function RF(){return{errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1}}function Ode(e){const{name:t,noStyle:o,className:a,dependencies:c,prefixCls:u,shouldUpdate:h,rules:f,children:m,required:g,label:_,messageVariables:y,trigger:b="onChange",validateTrigger:A,hidden:I,help:w}=e,{getPrefixCls:D}=S.useContext(Hn),{name:x}=S.useContext(Ml),O=Tde(m),P=typeof O=="function",M=S.useContext(t6),{validateTrigger:V}=S.useContext(Vu),F=A!==void 0?A:V,B=wde(t),H=D("form",u),[K,$]=yw(H),Z=S.useContext(am),z=S.useRef(),[G,ee]=lde({}),[re,oe]=Pu(()=>RF()),pe=ce=>{const we=Z==null?void 0:Z.getKey(ce.name);if(oe(ce.destroy?RF():ce,!0),o&&w!==!1&&M){let Ie=ce.name;if(ce.destroy)Ie=z.current||Ie;else if(we!==void 0){const[He,Le]=we;Ie=[He].concat(Ze(Le)),z.current=Ie}M(ce,Ie)}},ue=(ce,we)=>{ee(Ie=>{const He=Object.assign({},Ie),ft=[].concat(Ze(ce.name.slice(0,-1)),Ze(we)).join(Rde);return ce.destroy?delete He[ft]:He[ft]=ce,He})},[me,fe]=S.useMemo(()=>{const ce=Ze(re.errors),we=Ze(re.warnings);return Object.values(G).forEach(Ie=>{ce.push.apply(ce,Ze(Ie.errors||[])),we.push.apply(we,Ze(Ie.warnings||[]))}),[ce,we]},[G,re.errors,re.warnings]),se=ude();function ae(ce,we,Ie){return o&&!I?ce:S.createElement(bde,Object.assign({key:"row"},e,{className:Be(a,$),prefixCls:H,fieldId:we,isRequired:Ie,errors:me,warnings:fe,meta:re,onSubItemMetaChange:ue}),ce)}if(!B&&!P&&!c)return K(ae(O));let de={};return typeof _=="string"?de.label=_:t&&(de.label=String(t)),y&&(de=Object.assign(Object.assign({},de),y)),K(S.createElement(aw,Object.assign({},e,{messageVariables:de,trigger:b,validateTrigger:F,onMetaChange:pe}),(ce,we,Ie)=>{const He=Uf(t).length&&we?we.name:[],Le=J6(He,x),ft=g!==void 0?g:!!(f&&f.some(rt=>{if(rt&&typeof rt=="object"&&rt.required&&!rt.warningOnly)return!0;if(typeof rt=="function"){const pt=rt(Ie);return pt&&pt.required&&!pt.warningOnly}return!1})),gt=Object.assign({},ce);let at=null;if(Array.isArray(O)&&B)at=O;else if(!(P&&(!(h||c)||B))){if(!(c&&!P&&!B))if(Ll(O)){const rt=Object.assign(Object.assign({},O.props),gt);if(rt.id||(rt.id=Le),w||me.length>0||fe.length>0||e.extra){const yt=[];(w||me.length>0)&&yt.push(`${Le}_help`),e.extra&&yt.push(`${Le}_extra`),rt["aria-describedby"]=yt.join(" ")}me.length>0&&(rt["aria-invalid"]="true"),ft&&(rt["aria-required"]="true"),Kh(O)&&(rt.ref=se(He,O)),new Set([].concat(Ze(Uf(b)),Ze(Uf(F)))).forEach(yt=>{rt[yt]=function(){for(var kt,Lt,Xe,qe,Ge,nt=arguments.length,mt=new Array(nt),bt=0;bt<nt;bt++)mt[bt]=arguments[bt];(Xe=gt[yt])===null||Xe===void 0||(kt=Xe).call.apply(kt,[gt].concat(mt)),(Ge=(qe=O.props)[yt])===null||Ge===void 0||(Lt=Ge).call.apply(Lt,[qe].concat(mt))}});const Ye=[rt["aria-required"],rt["aria-invalid"],rt["aria-describedby"]];at=S.createElement(Ide,{value:gt[e.valuePropName||"value"],update:O,childProps:Ye},Cs(O,rt))}else P&&(h||c)&&!B?at=O(Ie):at=O}return ae(at,Le,ft)}))}const e5=Ode;e5.useStatus=cde;const Ade=e5;var Nde=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const xde=e=>{var{prefixCls:t,children:o}=e,a=Nde(e,["prefixCls","children"]);const{getPrefixCls:c}=S.useContext(Hn),u=c("form",t),h=S.useMemo(()=>({prefixCls:u,status:"error"}),[u]);return S.createElement(J8,Object.assign({},a),(f,m,g)=>S.createElement(cw.Provider,{value:h},o(f.map(_=>Object.assign(Object.assign({},_),{fieldKey:_.key})),m,{errors:g.errors,warnings:g.warnings})))},Pde=xde;function Dde(){const{form:e}=S.useContext(Ml);return e}const kc=sde;kc.Item=Ade;kc.List=Pde;kc.ErrorList=X6;kc.useForm=Q6;kc.useFormInstance=Dde;kc.useWatch=e6;kc.Provider=n6;kc.create=()=>{};const IF=kc,Am=Sle;Am.Header=vle;Am.Footer=Ele;Am.Content=_le;Am.Sider=Tle;const PI=Am;let ps=null,Rv=e=>e(),_E=[],SE={};function kde(){const{prefixCls:e,getContainer:t,rtl:o,maxCount:a,top:c,bottom:u}=SE,h=e??O8().getPrefixCls("notification"),f=(t==null?void 0:t())||document.body;return{prefixCls:h,container:f,rtl:o,maxCount:a,top:c,bottom:u}}const Lde=S.forwardRef((e,t)=>{const[o,a]=S.useState(),[c,u]=S.useState(),[h,f]=S.useState(),[m,g]=S.useState(),[_,y]=S.useState(),[b,A]=S.useState(),[I,w]=l6({prefixCls:o,getContainer:()=>c,maxCount:h,rtl:m,top:_,bottom:b}),D=O8(),x=D.getRootPrefixCls(),O=D.getIconPrefixCls(),P=D.getTheme(),M=()=>{const{prefixCls:V,container:F,maxCount:B,rtl:H,top:K,bottom:$}=kde();a(V),u(F),f(B),g(H),y(K),A($)};return S.useEffect(M,[]),S.useImperativeHandle(t,()=>{const V=Object.assign({},I);return Object.keys(V).forEach(F=>{V[F]=function(){return M(),I[F].apply(I,arguments)}}),{instance:V,sync:M}}),S.createElement(Jh,{prefixCls:x,iconPrefixCls:O,theme:P},w)});function Cw(){if(!ps){const e=document.createDocumentFragment(),t={fragment:e};ps=t,Rv(()=>{F8(S.createElement(Lde,{ref:o=>{const{instance:a,sync:c}=o||{};Promise.resolve().then(()=>{!t.instance&&a&&(t.instance=a,t.sync=c,Cw())})}}),e)});return}ps.instance&&(_E.forEach(e=>{switch(e.type){case"open":{Rv(()=>{ps.instance.open(Object.assign(Object.assign({},SE),e.config))});break}case"destroy":Rv(()=>{ps==null||ps.instance.destroy(e.key)});break}}),_E=[])}function Mde(e){SE=Object.assign(Object.assign({},SE),e),Rv(()=>{var t;(t=ps==null?void 0:ps.sync)===null||t===void 0||t.call(ps)})}function t5(e){_E.push({type:"open",config:e}),Cw()}function Ude(e){_E.push({type:"destroy",key:e}),Cw()}const Fde=["success","info","warning","error"],Vde={open:t5,destroy:Ude,config:Mde,useNotification:Qae,_InternalPanelDoNotUseOrYouWillBeFired:zae},n5=Vde;Fde.forEach(e=>{n5[e]=t=>t5(Object.assign(Object.assign({},t),{type:e}))});const jde=n5;var Bde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const $de=Bde;var Hde=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:$de}))};const Wde=S.forwardRef(Hde);var Gde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};const zde=Gde;var Kde=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:zde}))};const Yde=S.forwardRef(Kde);var qde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};const Xde=qde;var Jde=function(t,o){return S.createElement(Ni,xe({},t,{ref:o,icon:Xde}))};const Qde=S.forwardRef(Jde);var Zde=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const ehe={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},the=S.forwardRef((e,t)=>{const o=g=>{const{keyCode:_}=g;_===ht.ENTER&&g.preventDefault()},a=g=>{const{keyCode:_}=g,{onClick:y}=e;_===ht.ENTER&&y&&y()},{style:c,noStyle:u,disabled:h}=e,f=Zde(e,["style","noStyle","disabled"]);let m={};return u||(m=Object.assign({},ehe)),h&&(m.pointerEvents="none"),m=Object.assign(Object.assign({},m),c),S.createElement("div",Object.assign({role:"button",tabIndex:0,ref:t},f,{onKeyDown:o,onKeyUp:a,style:m}))}),wF=the;var nhe=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,o=[],a=0;a<e.rangeCount;a++)o.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||o.forEach(function(c){e.addRange(c)}),t&&t.focus()}},rhe=nhe,OF={"text/plain":"Text","text/html":"Url",default:"Text"},ihe="Copy to clipboard: #{key}, Enter";function ohe(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function ahe(e,t){var o,a,c,u,h,f,m=!1;t||(t={}),o=t.debug||!1;try{c=rhe(),u=document.createRange(),h=document.getSelection(),f=document.createElement("span"),f.textContent=e,f.ariaHidden="true",f.style.all="unset",f.style.position="fixed",f.style.top=0,f.style.clip="rect(0, 0, 0, 0)",f.style.whiteSpace="pre",f.style.webkitUserSelect="text",f.style.MozUserSelect="text",f.style.msUserSelect="text",f.style.userSelect="text",f.addEventListener("copy",function(_){if(_.stopPropagation(),t.format)if(_.preventDefault(),typeof _.clipboardData>"u"){o&&console.warn("unable to use e.clipboardData"),o&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var y=OF[t.format]||OF.default;window.clipboardData.setData(y,e)}else _.clipboardData.clearData(),_.clipboardData.setData(t.format,e);t.onCopy&&(_.preventDefault(),t.onCopy(_.clipboardData))}),document.body.appendChild(f),u.selectNodeContents(f),h.addRange(u);var g=document.execCommand("copy");if(!g)throw new Error("copy command was unsuccessful");m=!0}catch(_){o&&console.error("unable to copy using execCommand: ",_),o&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),m=!0}catch(y){o&&console.error("unable to copy using clipboardData: ",y),o&&console.error("falling back to prompt"),a=ohe("message"in t?t.message:ihe),window.prompt(a,e)}}finally{h&&(typeof h.removeRange=="function"?h.removeRange(u):h.removeAllRanges()),f&&document.body.removeChild(f),c()}return m}var she=ahe;const che=Ul(she),lhe=(e,t,o,a)=>{const{titleMarginBottom:c,fontWeightStrong:u}=a;return{marginBottom:c,color:o,fontWeight:u,fontSize:e,lineHeight:t}},uhe=e=>{const t=[1,2,3,4,5],o={};return t.forEach(a=>{o[`
      h${a}&,
      div&-h${a},
      div&-h${a} > textarea,
      h${a}
    `]=lhe(e[`fontSizeHeading${a}`],e[`lineHeightHeading${a}`],e.colorTextHeading,e)}),o},dhe=e=>{const{componentCls:t}=e;return{"a&, a":Object.assign(Object.assign({},s8(e)),{textDecoration:e.linkDecoration,"&:active, &:hover":{textDecoration:e.linkHoverDecoration},[`&[disabled], &${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:e.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},hhe=e=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:Ine[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:e.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),phe=e=>{const{componentCls:t}=e,a=H6(e).inputPaddingVertical+1;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:-e.paddingSM,marginTop:-a,marginBottom:`calc(1em - ${a}px)`},[`${t}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:e.marginXS+2,insetBlockEnd:e.marginXS,color:e.colorTextDescription,fontWeight:"normal",fontSize:e.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},fhe=e=>({"&-copy-success":{"\n    &,\n    &:hover,\n    &:focus":{color:e.colorSuccess}}}),mhe=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),ghe=e=>{const{componentCls:t,titleMarginTop:o}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorText,wordBreak:"break-word",lineHeight:e.lineHeight,[`&${t}-secondary`]:{color:e.colorTextDescription},[`&${t}-success`]:{color:e.colorSuccess},[`&${t}-warning`]:{color:e.colorWarning},[`&${t}-danger`]:{color:e.colorError,"a&:active, a&:focus":{color:e.colorErrorActive},"a&:hover":{color:e.colorErrorHover}},[`&${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},uhe(e)),{[`
      & + h1${t},
      & + h2${t},
      & + h3${t},
      & + h4${t},
      & + h5${t}
      `]:{marginTop:o},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:o}}}),hhe(e)),dhe(e)),{[`
        ${t}-expand,
        ${t}-edit,
        ${t}-copy
      `]:Object.assign(Object.assign({},s8(e)),{marginInlineStart:e.marginXXS})}),phe(e)),fhe(e)),mhe()),{"&-rtl":{direction:"rtl"}})}},r5=Is("Typography",e=>[ghe(e)],e=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em",fontWeightStrong:e.fontWeightStrong})),vhe=e=>{let{prefixCls:t,"aria-label":o,className:a,style:c,direction:u,maxLength:h,autoSize:f=!0,value:m,onSave:g,onCancel:_,onEnd:y,component:b,enterIcon:A=S.createElement(Qde,null)}=e;const I=S.useRef(null),w=S.useRef(!1),D=S.useRef(),[x,O]=S.useState(m);S.useEffect(()=>{O(m)},[m]),S.useEffect(()=>{if(I.current&&I.current.resizableTextArea){const{textArea:ee}=I.current.resizableTextArea;ee.focus();const{length:re}=ee.value;ee.setSelectionRange(re,re)}},[]);const P=ee=>{let{target:re}=ee;O(re.value.replace(/[\n\r]/g,""))},M=()=>{w.current=!0},V=()=>{w.current=!1},F=ee=>{let{keyCode:re}=ee;w.current||(D.current=re)},B=()=>{g(x.trim())},H=ee=>{let{keyCode:re,ctrlKey:oe,altKey:pe,metaKey:ue,shiftKey:me}=ee;D.current===re&&!w.current&&!oe&&!pe&&!ue&&!me&&(re===ht.ENTER?(B(),y==null||y()):re===ht.ESC&&_())},K=()=>{B()},$=b?`${t}-${b}`:"",[Z,z]=r5(t),G=Be(t,`${t}-edit-content`,{[`${t}-rtl`]:u==="rtl"},a,$,z);return Z(S.createElement("div",{className:G,style:c},S.createElement(q6,{ref:I,maxLength:h,value:x,onChange:P,onKeyDown:F,onKeyUp:H,onCompositionStart:M,onCompositionEnd:V,onBlur:K,"aria-label":o,rows:1,autoSize:f}),A!==null?Cs(A,{className:`${t}-edit-content-confirm`}):null))},Ehe=vhe;var _he=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const She=S.forwardRef((e,t)=>{var{prefixCls:o,component:a="article",className:c,rootClassName:u,setContentRef:h,children:f,direction:m}=e,g=_he(e,["prefixCls","component","className","rootClassName","setContentRef","children","direction"]);const{getPrefixCls:_,direction:y}=S.useContext(Hn),b=m??y;let A=t;h&&(A=Rs(t,h));const I=_("typography",o),[w,D]=r5(I),x=Be(I,{[`${I}-rtl`]:b==="rtl"},c,u,D);return w(S.createElement(a,Object.assign({className:x,ref:A},g),f))}),i5=She;function Gb(e,t){return S.useMemo(()=>{const o=!!e;return[o,Object.assign(Object.assign({},t),o&&typeof e=="object"?e:null)]},[e])}const yhe=(e,t)=>{const o=S.useRef(!1);S.useEffect(()=>{o.current?e():o.current=!0},t)},Che=yhe;function o5(e){const t=typeof e;return t==="string"||t==="number"}function bhe(e){let t=0;return e.forEach(o=>{o5(o)?t+=String(o).length:t+=1}),t}function AF(e,t){let o=0;const a=[];for(let c=0;c<e.length;c+=1){if(o===t)return a;const u=e[c],f=o5(u)?String(u).length:1,m=o+f;if(m>t){const g=t-o;return a.push(String(u).slice(0,g)),a}a.push(u),o=m}return e}const The=0,Yg=1,NF=2,zb=3,xF=4,Rhe=e=>{let{enabledMeasure:t,children:o,text:a,width:c,fontSize:u,rows:h,onEllipsis:f}=e;const[[m,g,_],y]=S.useState([0,0,0]),[b,A]=S.useState(The),[I,w]=S.useState(0),D=S.useRef(null),x=S.useRef(null),O=S.useMemo(()=>Oc(a),[a]),P=S.useMemo(()=>bhe(O),[O]),M=S.useMemo(()=>!t||b!==zb?o(O,!1):o(AF(O,g),g<P),[t,b,o,O,g,P]);Or(()=>{t&&c&&u&&P&&(A(Yg),y([0,Math.ceil(P/2),P]))},[t,c,u,a,P,h]),Or(()=>{var H;b===Yg&&w(((H=D.current)===null||H===void 0?void 0:H.offsetHeight)||0)},[b]),Or(()=>{var H,K;if(I){if(b===Yg){const $=((H=x.current)===null||H===void 0?void 0:H.offsetHeight)||0,Z=h*I;$<=Z?(A(xF),f(!1)):A(NF)}else if(b===NF)if(m!==_){const $=((K=x.current)===null||K===void 0?void 0:K.offsetHeight)||0,Z=h*I;let z=m,G=_;m===_-1?G=m:$<=Z?z=g:G=g;const ee=Math.ceil((z+G)/2);y([z,ee,G])}else A(zb),f(!0)}},[b,m,_,h,I]);const V={width:c,whiteSpace:"normal",margin:0,padding:0},F=(H,K,$)=>S.createElement("span",{"aria-hidden":!0,ref:K,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.floor(u/2)*2},$)},H),B=(H,K)=>{const $=AF(O,H);return F(o($,!0),K,V)};return S.createElement(S.Fragment,null,M,t&&b!==zb&&b!==xF&&S.createElement(S.Fragment,null,F("lg",D,{wordBreak:"keep-all",whiteSpace:"nowrap"}),b===Yg?F(o(O,!1),x,V):B(g,x)))},Ihe=Rhe,whe=e=>{let{enabledEllipsis:t,isEllipsis:o,children:a,tooltipProps:c}=e;return!(c!=null&&c.title)||!t?a:S.createElement(um,Object.assign({open:o?void 0:!1},c),a)},Ohe=whe;var Ahe=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};function Nhe(e,t){let{mark:o,code:a,underline:c,delete:u,strong:h,keyboard:f,italic:m}=e,g=t;function _(y,b){b&&(g=S.createElement(y,{},g))}return _("strong",h),_("u",c),_("del",u),_("code",a),_("mark",o),_("kbd",f),_("i",m),g}function qg(e,t,o){return e===!0||e===void 0?t:e||o&&t}function PF(e){return e===!1?[!1,!1]:Array.isArray(e)?e:[e]}const xhe="...",Phe=S.forwardRef((e,t)=>{var o,a,c;const{prefixCls:u,className:h,style:f,type:m,disabled:g,children:_,ellipsis:y,editable:b,copyable:A,component:I,title:w}=e,D=Ahe(e,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:x,direction:O}=S.useContext(Hn),[P]=ZB("Text"),M=S.useRef(null),V=S.useRef(null),F=x("typography",u),B=Ko(D,["mark","code","delete","underline","strong","keyboard","italic"]),[H,K]=Gb(b),[$,Z]=Cc(!1,{value:K.editing}),{triggerType:z=["icon"]}=K,G=Ve=>{var st;Ve&&((st=K.onStart)===null||st===void 0||st.call(K)),Z(Ve)};Che(()=>{var Ve;$||(Ve=V.current)===null||Ve===void 0||Ve.focus()},[$]);const ee=Ve=>{Ve==null||Ve.preventDefault(),G(!0)},re=Ve=>{var st;(st=K.onChange)===null||st===void 0||st.call(K,Ve),G(!1)},oe=()=>{var Ve;(Ve=K.onCancel)===null||Ve===void 0||Ve.call(K),G(!1)},[pe,ue]=Gb(A),[me,fe]=S.useState(!1),se=S.useRef(null),ae={};ue.format&&(ae.format=ue.format);const de=()=>{se.current&&clearTimeout(se.current)},ce=Ve=>{var st;Ve==null||Ve.preventDefault(),Ve==null||Ve.stopPropagation(),che(ue.text||String(_)||"",ae),fe(!0),de(),se.current=setTimeout(()=>{fe(!1)},3e3),(st=ue.onCopy)===null||st===void 0||st.call(ue,Ve)};S.useEffect(()=>de,[]);const[we,Ie]=S.useState(!1),[He,Le]=S.useState(!1),[ft,gt]=S.useState(!1),[at,rt]=S.useState(!1),[pt,Ye]=S.useState(!1),[yt,kt]=S.useState(!0),[Lt,Xe]=Gb(y,{expandable:!1}),qe=Lt&&!ft,{rows:Ge=1}=Xe,nt=S.useMemo(()=>!qe||Xe.suffix!==void 0||Xe.onEllipsis||Xe.expandable||H||pe,[qe,Xe,H,pe]);Or(()=>{Lt&&!nt&&(Ie(L4("webkitLineClamp")),Le(L4("textOverflow")))},[nt,Lt]);const mt=S.useMemo(()=>nt?!1:Ge===1?He:we,[nt,He,we]),bt=qe&&(mt?pt:at),wt=qe&&Ge===1&&mt,Mt=qe&&Ge>1&&mt,Yt=Ve=>{var st;gt(!0),(st=Xe.onExpand)===null||st===void 0||st.call(Xe,Ve)},[Nn,Ei]=S.useState(0),[dr,Gn]=S.useState(0),mn=(Ve,st)=>{let{offsetWidth:vn}=Ve;var Ft;Ei(vn),Gn(parseInt((Ft=window.getComputedStyle)===null||Ft===void 0?void 0:Ft.call(window,st).fontSize,10)||0)},xr=Ve=>{var st;rt(Ve),at!==Ve&&((st=Xe.onEllipsis)===null||st===void 0||st.call(Xe,Ve))};S.useEffect(()=>{const Ve=M.current;if(Lt&&mt&&Ve){const st=Mt?Ve.offsetHeight<Ve.scrollHeight:Ve.offsetWidth<Ve.scrollWidth;pt!==st&&Ye(st)}},[Lt,mt,_,Mt,yt]),S.useEffect(()=>{const Ve=M.current;if(typeof IntersectionObserver>"u"||!Ve||!mt||!qe)return;const st=new IntersectionObserver(()=>{kt(!!Ve.offsetParent)});return st.observe(Ve),()=>{st.disconnect()}},[mt,qe]);let Cn={};Xe.tooltip===!0?Cn={title:(o=K.text)!==null&&o!==void 0?o:_}:S.isValidElement(Xe.tooltip)?Cn={title:Xe.tooltip}:typeof Xe.tooltip=="object"?Cn=Object.assign({title:(a=K.text)!==null&&a!==void 0?a:_},Xe.tooltip):Cn={title:Xe.tooltip};const Xt=S.useMemo(()=>{const Ve=st=>["string","number"].includes(typeof st);if(!(!Lt||mt)){if(Ve(K.text))return K.text;if(Ve(_))return _;if(Ve(w))return w;if(Ve(Cn.title))return Cn.title}},[Lt,mt,w,Cn.title,bt]);if($)return S.createElement(Ehe,{value:(c=K.text)!==null&&c!==void 0?c:typeof _=="string"?_:"",onSave:re,onCancel:oe,onEnd:K.onEnd,prefixCls:F,className:h,style:f,direction:O,component:I,maxLength:K.maxLength,autoSize:K.autoSize,enterIcon:K.enterIcon});const Jt=()=>{const{expandable:Ve,symbol:st}=Xe;if(!Ve)return null;let vn;return st?vn=st:vn=P==null?void 0:P.expand,S.createElement("a",{key:"expand",className:`${F}-expand`,onClick:Yt,"aria-label":P==null?void 0:P.expand},vn)},Ro=()=>{if(!H)return;const{icon:Ve,tooltip:st}=K,vn=Oc(st)[0]||(P==null?void 0:P.edit),Ft=typeof vn=="string"?vn:"";return z.includes("icon")?S.createElement(um,{key:"edit",title:st===!1?"":vn},S.createElement(wF,{ref:V,className:`${F}-edit`,onClick:ee,"aria-label":Ft},Ve||S.createElement(Yde,{role:"button"}))):null},qi=()=>{if(!pe)return;const{tooltips:Ve,icon:st}=ue,vn=PF(Ve),Ft=PF(st),_i=me?qg(vn[1],P==null?void 0:P.copied):qg(vn[0],P==null?void 0:P.copy),Pr=me?P==null?void 0:P.copied:P==null?void 0:P.copy,Xn=typeof _i=="string"?_i:Pr;return S.createElement(um,{key:"copy",title:_i},S.createElement(wF,{className:Be(`${F}-copy`,me&&`${F}-copy-success`),onClick:ce,"aria-label":Xn},me?qg(Ft[1],S.createElement(wse,null),!0):qg(Ft[0],S.createElement(Wde,null),!0)))},br=Ve=>[Ve&&Jt(),Ro(),qi()],gn=Ve=>[Ve&&S.createElement("span",{"aria-hidden":!0,key:"ellipsis"},xhe),Xe.suffix,br(Ve)];return S.createElement(Hu,{onResize:mn,disabled:!qe||mt},Ve=>S.createElement(Ohe,{tooltipProps:Cn,enabledEllipsis:qe,isEllipsis:bt},S.createElement(i5,Object.assign({className:Be({[`${F}-${m}`]:m,[`${F}-disabled`]:g,[`${F}-ellipsis`]:Lt,[`${F}-single-line`]:qe&&Ge===1,[`${F}-ellipsis-single-line`]:wt,[`${F}-ellipsis-multiple-line`]:Mt},h),prefixCls:u,style:Object.assign(Object.assign({},f),{WebkitLineClamp:Mt?Ge:void 0}),component:I,ref:Rs(Ve,M,t),direction:O,onClick:z.includes("text")?ee:void 0,"aria-label":Xt==null?void 0:Xt.toString(),title:w},B),S.createElement(Ihe,{enabledMeasure:qe&&!mt,text:_,rows:Ge,width:Nn,fontSize:dr,onEllipsis:xr},(st,vn)=>{let Ft=st;return st.length&&vn&&Xt&&(Ft=S.createElement("span",{key:"show-content","aria-hidden":!0},Ft)),Nhe(e,S.createElement(S.Fragment,null,Ft,gn(vn)))}))))}),__=Phe;var Dhe=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const khe=S.forwardRef((e,t)=>{var{ellipsis:o,rel:a}=e,c=Dhe(e,["ellipsis","rel"]);const u=Object.assign(Object.assign({},c),{rel:a===void 0&&c.target==="_blank"?"noopener noreferrer":a});return delete u.navigate,S.createElement(__,Object.assign({},u,{ref:t,ellipsis:!!o,component:"a"}))}),Lhe=khe,Mhe=S.forwardRef((e,t)=>S.createElement(__,Object.assign({ref:t},e,{component:"div"}))),Uhe=Mhe;var Fhe=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const Vhe=(e,t)=>{var{ellipsis:o}=e,a=Fhe(e,["ellipsis"]);const c=S.useMemo(()=>o&&typeof o=="object"?Ko(o,["expandable","rows"]):o,[o]);return S.createElement(__,Object.assign({ref:t},a,{ellipsis:c,component:"span"}))},jhe=S.forwardRef(Vhe);var Bhe=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const $he=[1,2,3,4,5],Hhe=S.forwardRef((e,t)=>{const{level:o=1}=e,a=Bhe(e,["level"]);let c;return $he.includes(o)?c=`h${o}`:c="h1",S.createElement(__,Object.assign({ref:t},a,{component:c}))}),Whe=Hhe,Nm=i5;Nm.Text=jhe;Nm.Link=Lhe;Nm.Title=Whe;Nm.Paragraph=Uhe;const To=Nm;function a5(e){var t,o,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(o=a5(e[t]))&&(a&&(a+=" "),a+=o);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function bw(){for(var e,t,o=0,a="";o<arguments.length;)(e=arguments[o++])&&(t=a5(e))&&(a&&(a+=" "),a+=t);return a}const Ghe=S.forwardRef(({className:e,children:t},o)=>ne.jsx("div",{className:bw(e,"b-1 b-solid b-coolgray-6 rd of-hidden relative"),ref:o,style:{width:288,height:216},children:t})),$a=Object.assign(S.forwardRef(({className:e,children:t},o)=>ne.jsx("div",{className:bw(e,"flex-1 p-10 p-t-4 flex gap-5"),ref:o,children:t})),{Item:Ghe}),si=({children:e})=>ne.jsx("div",{className:"h-screen flex flex-col",children:e}),Pc=({children:e})=>ne.jsx("samp",{className:"z-2 inline-flex items-center gap-1 absolute bottom-0 bg-black c-white px-1 text-sm",children:e}),Xg=14,Jg=8,Kb=8,Yb=4;function zhe({volumeLevel:e=0,noise:t=.075,...o}){const[a,c]=S.useState(0);return S.useEffect(()=>{if(e&&t){const u=Math.max(0,Math.min(1,t)),h=setInterval(()=>{c(e+Math.random()*u*(Math.random()>.5?1:-1))},50);return()=>clearInterval(h)}},[e,t]),ne.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...o,children:[ne.jsx("defs",{children:ne.jsx("clipPath",{id:"icon-mic-v-clip",children:ne.jsx("rect",{height:Xg,rx:Jg/2,width:Jg,x:Kb,y:Yb})})}),ne.jsx("path",{d:"M0 0h24v24H0z",fill:"#999CA3",opacity:".01"}),ne.jsx("rect",{clipPath:"url(#icon-mic-v-clip)",fill:"#fff",height:Xg,width:Jg,x:Kb,y:Yb}),ne.jsx("path",{d:"M4 16.625h2v-1.25H4v1.25Zm6 4h4v-1.25h-4v1.25Zm8-4h2v-1.25h-2v1.25Zm-4 4A4.625 4.625 0 0 0 18.625 16h-1.25A3.375 3.375 0 0 1 14 19.375v1.25ZM5.375 16A4.625 4.625 0 0 0 10 20.625v-1.25A3.375 3.375 0 0 1 6.625 16h-1.25Z",fill:"#fff"}),ne.jsx("g",{clipPath:"url(#icon-mic-v-clip)",children:ne.jsx("rect",{fill:"#44AD00",height:Xg*2,style:{transform:`translateY(${(1-a)*Xg}px)`,transition:"transform .1s"},width:Jg,x:Kb,y:Yb})})]})}const Khe=S.memo(function(t){return ne.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[ne.jsx("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),ne.jsx("path",{clipRule:"evenodd",d:"M19.277 16.625H20v-1.25h-1.973l1.25 1.25Zm-3.239 2.065.89.89a4.602 4.602 0 0 1-2.716 1.04l-.212.005h-4a4.626 4.626 0 0 1-4.55-3.787l-.033-.213H4v-1.25h2c.345 0 .625.28.625.625a3.375 3.375 0 0 0 3.19 3.37l.185.005h4a3.36 3.36 0 0 0 2.038-.685Zm.587-4.717V8a4.625 4.625 0 0 0-8.5-2.526l.911.91a3.374 3.374 0 0 1 6.281.991H14v1.25h1.375v.75H14v1.25h1.375v.75h-1.348l1.25 1.25h.098v.098l1.25 1.25Zm-2.587 2.717.89.89A4.625 4.625 0 0 1 7.375 14v-3.973l1.25 1.25v.098h.098l1.25 1.25H8.625V14a3.375 3.375 0 0 0 5.413 2.69Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})}),Yhe=S.memo(function(t){return ne.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[ne.jsx("circle",{cx:"12",cy:"11",r:"7",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),ne.jsx("circle",{cx:"12",cy:"11",r:"3",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),ne.jsx("circle",{cx:"14.625",cy:"6.625",fill:"#fff",r:".625"}),ne.jsx("path",{d:"M7 18.25a8.004 8.004 0 0 0 10 0",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"})]})}),qhe=S.memo(function(t){return ne.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[ne.jsx("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),ne.jsx("path",{clipRule:"evenodd",d:"m15.72 18.373.91.909a8.63 8.63 0 0 1-9.788-.364l-.232-.18.78-.976a7.38 7.38 0 0 0 8.33.61Zm2.434-2.87A7.625 7.625 0 0 0 7.497 4.846l.897.896a6.375 6.375 0 0 1 8.864 8.864l.896.897Zm-3.857 1.446.952.951A7.625 7.625 0 0 1 5.1 7.751l.951.952a6.375 6.375 0 0 0 8.246 8.246Zm.956-4.348a3.625 3.625 0 0 0-4.854-4.854l.964.964a2.378 2.378 0 0 1 2.926 2.926l.964.964Zm-.628-5.351a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})});function Bo(e,t,o){return e.on(t,o),()=>e.off(t,o)}function Xhe(e){try{return e()}catch(t){console.error(t)}}function tp(e){return()=>e.forEach(Xhe)}function Tw(e,t){const o=setTimeout(e,t);return()=>clearTimeout(o)}function s5(){let e,t,o;function a(){if(t){const g=t;t=void 0,g()}}async function c(){if(o){const g=o;o=void 0;try{await g()}catch(_){console.error(_)}}}async function u(g){e=!0,await c();try{o=await g()}catch(_){console.error(_)}e=!1,a()}async function h(){e=!0,await c(),e=!1,a()}function f(g){e?t=()=>u(g):u(g)}function m(){e?t=h:h()}return{run:f,dispose:m}}const c5=typeof document<"u"?S.useLayoutEffect:S.useEffect;function Jhe(e){return e!=null&&typeof e.then=="function"}function zu(){const e=S.useRef(!1);return S.useEffect(()=>(e.current=!1,()=>{e.current=!0}),[]),e}function Qhe(){const e=zu();function t(o,a){return new Promise(async(c,u)=>{try{const h=await o;e.current||c(h)}catch(h){e.current?a&&a(h):u(h)}})}return S.useCallback(t,[e])}function S_(e){const t=Qhe(),[o,a]=S.useState();return c5(()=>{Jhe(e)?t(e).then(a):a(e)},[e,t]),o}function np(e,t){const o=S.useRef();S.useEffect(()=>{const{run:a,dispose:c}=o.current||(o.current=s5());return a(e),c},t)}function Zhe(e,t){const o=e.split("."),a=t.split("."),c=Math.max(o.length,a.length);for(let u=0;u<c;u++){const h=parseInt(o[u]||"0"),f=parseInt(a[u]||"0");if(h>f)return 1;if(h<f)return-1}return 0}const l5=S.createContext(null);function u5({client:e,children:t}){return ne.jsx(l5.Provider,{value:e,children:t})}function epe(e){const t=S.useContext(l5);return e||t}function Ya(e){const t=epe(e);if(!t)throw new Error("Agora RTC client not found. Should be wrapped in <AgoraRTCProvider value={client} />");return t}function tpe(e){const t=Ya(e),[o,a]=S.useState(t?t.connectionState:"DISCONNECTED");return S.useEffect(()=>{if(t){a(t.connectionState);let c;return tp([Bo(t,"connection-state-change",u=>{c==null||c(),u==="CONNECTED"?c=Tw(()=>a(u),0):a(u)}),()=>c==null?void 0:c()])}else a("DISCONNECTED")},[t]),o}function ws(e){const t=Ya(e),[o,a]=S.useState(t?t.connectionState==="CONNECTED":!1);return S.useEffect(()=>{if(t){a(t.connectionState==="CONNECTED");let c;return tp([Bo(t,"connection-state-change",u=>{c==null||c(),c=Tw(()=>a(u==="CONNECTED"),0)}),()=>c==null?void 0:c()])}else a(!1)},[t]),o}function y_(e){const t=Ya(e),[o,a]=S.useState(t==null?void 0:t.uid);return S.useEffect(()=>{if(t)return Bo(t,"connection-state-change",c=>{if(c==="CONNECTED")return Tw(()=>a(t.uid),0);c==="DISCONNECTED"&&a(void 0)})},[t]),o}class ga extends Error{constructor(o,a){var t=(...args)=>{super(...args);gg(this,"rtcMethod");gg(this,"rtcError");gg(this,"name","AgoraRTCReactException")};t(typeof a=="string"?a:a.message),this.rtcMethod=o,this.rtcError=a}log(o){console[o](this)}}function Ki(e,t=!0,o){const a=Ya(o),c=ws(o),[u,h]=S.useState(!1),[f,m]=S.useState(0),[g,_]=S.useState(null),y=zu();return np(async()=>{if(y.current||(_(null),m(0),h(!1)),t&&a){try{y.current||h(!0);const{appid:b,channel:A,token:I,uid:w}=typeof e=="function"?await e():e,D=await a.join(b,A,I,w);y.current||m(D)}catch(b){console.error(b),y.current||_(new ga("IAgoraRTCClient.join",b))}return y.current||h(!1),()=>{for(const b of a.localTracks)b.isPlaying&&b.stop(),b.close();return a.leave()}}},[t,o]),{data:f,isLoading:u,isConnected:c,error:g}}const DF=()=>({uplink:0,downlink:0,delay:0});function npe(e){const t=Ya(e),[o,a]=S.useState(DF);return S.useEffect(()=>{if(t)return Bo(t,"network-quality",c=>a({uplink:c.uplinkNetworkQuality,downlink:c.downlinkNetworkQuality,delay:t.getRTCStats().RTT??0}));a(DF())},[t]),o}function rp(e,t=!0,o){const a=Ya(o),c=ws(o),u=S.useRef([]),[h,f]=S.useState(!1),[m,g]=S.useState(null),_=zu();return np(async()=>{if(_.current||(f(!1),g(null)),!a||!c||!t)return;const y=e.filter(Boolean),b=w=>{const D=Zhe(Du.VERSION,"4.18.2")>=0;return D||new ga("usePublish","please check your agora-rtc-sdk-ng version in package.json, it's recommend upgrade to >= 4.18.2").log("warn"),D?a.mode!=="live"||a.role!=="audience":!0},A=w=>u.current.some(D=>D&&D.getTrackId()===w.getTrackId()),I=w=>b()&&w.enabled&&t&&!A(w);for(let w=0;w<y.length;w++){const D=y[w];if(D&&I(D)){try{_.current||f(!0),await a.publish(D)}catch(x){console.error(x),_.current||g(new ga("IAgoraRTCClient.publish",x))}_.current||f(!1)}}u.current=y},[c,t,a,e]),{isLoading:h,error:m}}function ip(e=!0,t={ANS:!0,AEC:!0},o){const a=ws(o),[c,u]=S.useState(null),[h,f]=S.useState(!1),[m,g]=S.useState(null),_=zu();return np(async()=>{if(a&&e&&!c){try{_.current||f(!0);const y=await Du.createMicrophoneAudioTrack(t);_.current||u(y)}catch(y){console.error(y),_.current||g(new ga("IAgoraRTC.createMicrophoneAudioTrack",y))}_.current||f(!1)}!a&&!_.current&&u(null)},[a,e]),{localMicrophoneTrack:c,isLoading:h,error:m}}function op(e=!0,t){const o=ws(t),[a,c]=S.useState(null),[u,h]=S.useState(!1),[f,m]=S.useState(null),g=zu();return np(async()=>{if(g.current||(h(!1),m(null)),o&&e&&!a){try{g.current||h(!0);const _=await Du.createCameraVideoTrack();g.current||c(_)}catch(_){console.error(_),g.current||m(new ga("IAgoraRTC.createCameraVideoTrack",_))}g.current||h(!1)}!o&&!g.current&&c(null)},[o,e]),{localCameraTrack:a,isLoading:u,error:f}}function xm(e,t){const o=Ya(t),[a,c]=S.useState([]),u=ws(),h=S.useRef([]),[f,m]=S.useState(!1),[g,_]=S.useState(null),y=zu();return np(async()=>{if(y.current||_(null),!Array.isArray(e)||!u)return;const b=async w=>{if(!w.audioTrack&&e.some(({uid:D})=>w.uid===D)){try{y.current||m(!0),await o.subscribe(w,"audio")}catch(D){console.error(D),y.current||_(new ga("IAgoraRTCClient.subscribe",D))}w.audioTrack&&!h.current.some(D=>D.getUserId()===w.uid)&&h.current.push(w.audioTrack),h.current=h.current.map(D=>w.audioTrack&&D.getUserId()===w.uid&&D.getTrackId()!==w.audioTrack.getTrackId()?w.audioTrack:D),y.current||(c(h.current),m(!1))}},A=async w=>{if(e.some(({uid:D})=>w.uid===D)){y.current||(h.current=h.current.filter(D=>D.getUserId()!==w.uid),c(h.current));try{y.current||m(!0),await o.unsubscribe(w,"audio")}catch(D){console.error(D),y.current||_(new ga("IAgoraRTCClient.unsubscribe",D))}y.current||m(!1)}};e.map(w=>{!w.audioTrack&&w.hasAudio&&b(w)});const I=[];for(let w=0;w<h.current.length;w++){const D=h.current[w];if(!e.some(x=>x.uid===D.getUserId())){const x=o.remoteUsers.find(O=>O.uid===D.getUserId());x&&(I.push({user:x,mediaType:"audio"}),h.current.splice(w,1),w--)}}if(I.length>0){try{y.current||m(!0),await o.massUnsubscribe(I)}catch(w){console.error(w),y.current||_(new ga("IAgoraRTCClient.massUnsubscribe",w))}y.current||(c(h.current.slice()),m(!1))}return tp([Bo(o,"user-published",(w,D)=>{e.find(x=>x.uid===w.uid)&&D==="audio"&&b(w)}),Bo(o,"user-unpublished",(w,D)=>{e.find(x=>x.uid===w.uid)&&D==="audio"&&A(w)})])},[u,o,e]),{audioTracks:a,isLoading:f,error:g}}function Pm(e,t){const o=Ya(t),[a,c]=S.useState([]),u=ws(),h=S.useRef([]),[f,m]=S.useState(!1),[g,_]=S.useState(null),y=zu();return np(async()=>{if(y.current||_(null),!Array.isArray(e)||!u)return;const b=async w=>{if(!w.videoTrack&&e.some(({uid:D})=>w.uid===D)){try{y.current||m(!0),await o.subscribe(w,"video")}catch(D){console.error(D),y.current||_(new ga("IAgoraRTCClient.subscribe",D))}w.videoTrack&&!h.current.some(D=>D.getUserId()===w.uid)&&h.current.push(w.videoTrack),h.current=h.current.map(D=>w.videoTrack&&D.getUserId()===w.uid&&D.getTrackId()!==w.videoTrack.getTrackId()?w.videoTrack:D),y.current||(c(h.current),m(!1))}},A=async w=>{if(e.some(({uid:D})=>w.uid===D)){y.current||(h.current=h.current.filter(D=>D.getUserId()!==w.uid),c(h.current));try{y.current||m(!0),await o.unsubscribe(w,"video")}catch(D){console.error(D),y.current||_(new ga("IAgoraRTCClient.unsubscribe",D))}y.current||m(!1)}};e.map(w=>{!w.videoTrack&&w.hasVideo&&b(w)});const I=[];for(let w=0;w<h.current.length;w++){const D=h.current[w];if(!e.some(x=>x.uid===D.getUserId())){const x=o.remoteUsers.find(O=>O.uid===D.getUserId());x&&(I.push({user:x,mediaType:"video"}),h.current.splice(w,1),w--)}}if(I.length>0){try{y.current||m(!0),await o.massUnsubscribe(I)}catch(w){console.error(w),y.current||_(new ga("IAgoraRTCClient.massUnsubscribe",w))}y.current||(c(h.current.slice()),m(!1))}return tp([Bo(o,"user-published",(w,D)=>{e.find(x=>x.uid===w.uid)&&D==="video"&&b(w)}),Bo(o,"user-unpublished",(w,D)=>{e.find(x=>x.uid===w.uid)&&D==="video"&&A(w)})])},[u,o,e]),{videoTracks:a,isLoading:f,error:g}}function kF(e,t,o){const a=Ya(o),c=t==="audio"?"audioTrack":"videoTrack",[u,h]=S.useState(e&&e[c]),f=ws(),m=S.useRef(),[g,_]=S.useState(!1),[y,b]=S.useState(null);return S.useEffect(()=>{if(!e||!f)return;let A=!1;A||b(null);const I=t==="audio"?"hasAudio":"hasVideo",w=e.uid,D=async(P,M)=>{if(P[c]&&a.remoteUsers.some(({uid:V})=>P.uid===V))try{A||_(!0),await a.unsubscribe(P,M)}catch(V){A||b(new ga("IAgoraRTCClient.unsubscribe",V)),console.error(V)}A||(h(void 0),_(!1))},x=async(P,M)=>{try{!P[c]&&a.remoteUsers.some(({uid:V})=>P.uid===V)&&(A||_(!0),await a.subscribe(P,M)),A||h(P[c])}catch(V){A||b(new ga("IAgoraRTCClient.subscribe",V)),console.error(V)}A||_(!1)},O=m.current||(m.current=s5());return!e[c]&&e[I]?O.run(()=>x(e,t)):h(e[c]),tp([()=>{A=!0,O.dispose()},Bo(a,"user-published",(P,M)=>{P.uid===w&&M===t&&O.run(()=>x(P,t))}),Bo(a,"user-unpublished",(P,M)=>{P.uid===w&&M===t&&O.run(()=>D(P,t))})])},[f,a,e,t,c]),{track:u,isLoading:g,error:y}}function qs(e){const t=Ya(e),[o,a]=S.useState(t?t.remoteUsers:[]);return S.useEffect(()=>{if(t){const c=()=>a(t.remoteUsers.slice());return tp([Bo(t,"user-joined",c),Bo(t,"user-left",c),Bo(t,"user-published",c),Bo(t,"user-unpublished",c)])}},[t]),o}const d5=S.createContext(void 0);function Rw(e,t,o){const a=S.useContext(d5);S.useEffect(()=>{if(e)return o&&t?e.play(o):e.stop(),a?(a.onMount(e),()=>a.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,o,t,a])}function Iw(e,t){const o=S.useContext(d5);c5(()=>{if(e)return t?e.play():e.stop(),o?(o.onMount(e),()=>o.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,t,o])}function ww({track:e,play:t=!1,volume:o,disabled:a,muted:c,children:u}){const h=S_(e);return Iw(h,t),S.useEffect(()=>{h&&o!=null&&h.setVolume(o)},[h,o]),S.useEffect(()=>{h&&a!=null&&h.setEnabled(!a).catch(console.warn)},[a,h]),S.useEffect(()=>{h&&c!=null&&h.setMuted(c).catch(console.warn)},[c,h]),u?ne.jsx(ne.Fragment,{children:u}):null}const C_={position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#000"},h5={width:"100%",height:"100%"},Dm={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:2},ap=(e,t)=>S.useMemo(()=>({...e,...t}),[e,t]);function Ow({track:e,play:t,disabled:o,muted:a,style:c,...u}){const h=ap(h5,c),[f,m]=S.useState(null),g=S_(e);return Rw(g,t,f),S.useEffect(()=>{g&&o!=null&&g.setEnabled(!o).catch(console.warn)},[o,g]),S.useEffect(()=>{g&&a!=null&&g.setMuted(a).catch(console.warn)},[a,g]),ne.jsx("div",{...u,ref:m,style:h})}const rpe={width:"100%",height:"100%",background:"#1a1e21 center/cover no-repeat",filter:"blur(16px) brightness(0.4)"},ipe={position:"absolute",top:"50%",left:"50%",maxWidth:"50%",maxHeight:"50%",aspectRatio:"1",transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",objectFit:"cover"};function b_({cover:e}){return ne.jsx("div",{style:Dm,children:typeof e=="string"?ne.jsxs(ne.Fragment,{children:[ne.jsx("div",{style:{...rpe,backgroundImage:`url(${e})`}}),ne.jsx("img",{src:e,style:ipe})]}):e()})}function p5({micOn:e,cameraOn:t,audioTrack:o,videoTrack:a,playAudio:c,playVideo:u,volume:h,cover:f,children:m,style:g,..._}){const y=ap(C_,g);return u=u??!!t,c=c??!!e,ne.jsxs("div",{..._,style:y,children:[ne.jsx(Ow,{disabled:!t,play:u,track:a}),ne.jsx(ww,{disabled:!e,play:c,track:o,volume:h}),f&&!t&&ne.jsx(b_,{cover:f}),ne.jsx("div",{style:Dm,children:m})]})}function f5({track:e,play:t=!1,playbackDeviceId:o,volume:a,children:c}){return Iw(e,t),S.useEffect(()=>{e&&o!=null&&e.setPlaybackDevice(o).catch(console.warn)},[e,o]),S.useEffect(()=>{e&&a!=null&&e.setVolume(a)},[e,a]),c?ne.jsx(ne.Fragment,{children:c}):null}function Aw({track:e,play:t,style:o,...a}){const c=ap(h5,o),[u,h]=S.useState(null);return Rw(e,t,u),ne.jsx("div",{...a,ref:h,style:c})}function Nw({user:e,playVideo:t,playAudio:o,playbackDeviceId:a,volume:c,cover:u,style:h,children:f,...m}){const g=ap(C_,h),{track:_}=kF(e,"video"),{track:y}=kF(e,"audio");return t=t??(e==null?void 0:e.hasVideo),o=o??(e==null?void 0:e.hasAudio),ne.jsxs("div",{...m,style:g,children:[ne.jsx(Aw,{play:t,track:_}),ne.jsx(f5,{play:o,playbackDeviceId:a,track:y,volume:c}),u&&!t&&ne.jsx(b_,{cover:u}),ne.jsx("div",{style:Dm,children:f})]})}function ope({track:e,deviceId:t,...o}){const a=S_(e);return S.useEffect(()=>{a&&t!=null&&a.setDevice(t).catch(console.warn)},[t,a]),ne.jsx(ww,{track:e,...o})}function ape({track:e,deviceId:t,...o}){const a=S_(e);return S.useEffect(()=>{a&&t!=null&&a.setDevice(t).catch(console.warn)},[t,a]),ne.jsx(Ow,{track:e,...o})}function xw({micOn:e,cameraOn:t,audioTrack:o,videoTrack:a,playAudio:c=!1,playVideo:u,micDeviceId:h,cameraDeviceId:f,volume:m,cover:g,children:_,style:y,...b}){const A=ap(C_,y);return u=u??!!t,c=c??!!e,ne.jsxs("div",{...b,style:A,children:[ne.jsx(ape,{deviceId:f,disabled:!t,play:u,track:a}),ne.jsx(ope,{deviceId:h,disabled:!e,play:c,track:o,volume:m}),g&&!t&&ne.jsx(b_,{cover:g}),ne.jsx("div",{style:Dm,children:_})]})}function km({track:e,playVideo:t,cover:o,client:a,style:c,children:u,...h}){var _,y;const f=ap(C_,c),g=(y=(_=Ya(a).remoteUsers)==null?void 0:_.find(b=>b.uid===(e==null?void 0:e.getUserId())))==null?void 0:y.hasVideo;return t=t??g,ne.jsxs("div",{...h,style:f,children:[ne.jsx(Aw,{play:t,track:e}),o&&!t&&ne.jsx(b_,{cover:o}),ne.jsx("div",{style:Dm,children:u})]})}const Pw=({published:e,total:t})=>ne.jsx("div",{className:"p-4 text-xl",children:ne.jsxs("span",{className:"inline-flex items-center gap-1 py-2 px-3 rd b-1 b-solid",children:[ne.jsx("i",{className:"i-lucide-users"}),ne.jsxs("samp",{className:"text-base",children:[e,"/",t]})]})});var Dw={exports:{}};Dw.exports;(function(e){(function(t,o,a){function c(m){var g=this,_=f();g.next=function(){var y=2091639*g.s0+g.c*23283064365386963e-26;return g.s0=g.s1,g.s1=g.s2,g.s2=y-(g.c=y|0)},g.c=1,g.s0=_(" "),g.s1=_(" "),g.s2=_(" "),g.s0-=_(m),g.s0<0&&(g.s0+=1),g.s1-=_(m),g.s1<0&&(g.s1+=1),g.s2-=_(m),g.s2<0&&(g.s2+=1),_=null}function u(m,g){return g.c=m.c,g.s0=m.s0,g.s1=m.s1,g.s2=m.s2,g}function h(m,g){var _=new c(m),y=g&&g.state,b=_.next;return b.int32=function(){return _.next()*4294967296|0},b.double=function(){return b()+(b()*2097152|0)*11102230246251565e-32},b.quick=b,y&&(typeof y=="object"&&u(y,_),b.state=function(){return u(_,{})}),b}function f(){var m=4022871197,g=function(_){_=String(_);for(var y=0;y<_.length;y++){m+=_.charCodeAt(y);var b=.02519603282416938*m;m=b>>>0,b-=m,b*=m,m=b>>>0,b-=m,m+=b*4294967296}return(m>>>0)*23283064365386963e-26};return g}o&&o.exports?o.exports=h:a&&a.amd?a(function(){return h}):this.alea=h})(Dt,e,!1)})(Dw);var spe=Dw.exports,kw={exports:{}};kw.exports;(function(e){(function(t,o,a){function c(f){var m=this,g="";m.x=0,m.y=0,m.z=0,m.w=0,m.next=function(){var y=m.x^m.x<<11;return m.x=m.y,m.y=m.z,m.z=m.w,m.w^=m.w>>>19^y^y>>>8},f===(f|0)?m.x=f:g+=f;for(var _=0;_<g.length+64;_++)m.x^=g.charCodeAt(_)|0,m.next()}function u(f,m){return m.x=f.x,m.y=f.y,m.z=f.z,m.w=f.w,m}function h(f,m){var g=new c(f),_=m&&m.state,y=function(){return(g.next()>>>0)/4294967296};return y.double=function(){do var b=g.next()>>>11,A=(g.next()>>>0)/4294967296,I=(b+A)/(1<<21);while(I===0);return I},y.int32=g.next,y.quick=y,_&&(typeof _=="object"&&u(_,g),y.state=function(){return u(g,{})}),y}o&&o.exports?o.exports=h:a&&a.amd?a(function(){return h}):this.xor128=h})(Dt,e,!1)})(kw);var cpe=kw.exports,Lw={exports:{}};Lw.exports;(function(e){(function(t,o,a){function c(f){var m=this,g="";m.next=function(){var y=m.x^m.x>>>2;return m.x=m.y,m.y=m.z,m.z=m.w,m.w=m.v,(m.d=m.d+362437|0)+(m.v=m.v^m.v<<4^(y^y<<1))|0},m.x=0,m.y=0,m.z=0,m.w=0,m.v=0,f===(f|0)?m.x=f:g+=f;for(var _=0;_<g.length+64;_++)m.x^=g.charCodeAt(_)|0,_==g.length&&(m.d=m.x<<10^m.x>>>4),m.next()}function u(f,m){return m.x=f.x,m.y=f.y,m.z=f.z,m.w=f.w,m.v=f.v,m.d=f.d,m}function h(f,m){var g=new c(f),_=m&&m.state,y=function(){return(g.next()>>>0)/4294967296};return y.double=function(){do var b=g.next()>>>11,A=(g.next()>>>0)/4294967296,I=(b+A)/(1<<21);while(I===0);return I},y.int32=g.next,y.quick=y,_&&(typeof _=="object"&&u(_,g),y.state=function(){return u(g,{})}),y}o&&o.exports?o.exports=h:a&&a.amd?a(function(){return h}):this.xorwow=h})(Dt,e,!1)})(Lw);var lpe=Lw.exports,Mw={exports:{}};Mw.exports;(function(e){(function(t,o,a){function c(f){var m=this;m.next=function(){var _=m.x,y=m.i,b,A;return b=_[y],b^=b>>>7,A=b^b<<24,b=_[y+1&7],A^=b^b>>>10,b=_[y+3&7],A^=b^b>>>3,b=_[y+4&7],A^=b^b<<7,b=_[y+7&7],b=b^b<<13,A^=b^b<<9,_[y]=A,m.i=y+1&7,A};function g(_,y){var b,A=[];if(y===(y|0))A[0]=y;else for(y=""+y,b=0;b<y.length;++b)A[b&7]=A[b&7]<<15^y.charCodeAt(b)+A[b+1&7]<<13;for(;A.length<8;)A.push(0);for(b=0;b<8&&A[b]===0;++b);for(b==8?A[7]=-1:A[b],_.x=A,_.i=0,b=256;b>0;--b)_.next()}g(m,f)}function u(f,m){return m.x=f.x.slice(),m.i=f.i,m}function h(f,m){f==null&&(f=+new Date);var g=new c(f),_=m&&m.state,y=function(){return(g.next()>>>0)/4294967296};return y.double=function(){do var b=g.next()>>>11,A=(g.next()>>>0)/4294967296,I=(b+A)/(1<<21);while(I===0);return I},y.int32=g.next,y.quick=y,_&&(_.x&&u(_,g),y.state=function(){return u(g,{})}),y}o&&o.exports?o.exports=h:a&&a.amd?a(function(){return h}):this.xorshift7=h})(Dt,e,!1)})(Mw);var upe=Mw.exports,Uw={exports:{}};Uw.exports;(function(e){(function(t,o,a){function c(f){var m=this;m.next=function(){var _=m.w,y=m.X,b=m.i,A,I;return m.w=_=_+1640531527|0,I=y[b+34&127],A=y[b=b+1&127],I^=I<<13,A^=A<<17,I^=I>>>15,A^=A>>>12,I=y[b]=I^A,m.i=b,I+(_^_>>>16)|0};function g(_,y){var b,A,I,w,D,x=[],O=128;for(y===(y|0)?(A=y,y=null):(y=y+"\0",A=0,O=Math.max(O,y.length)),I=0,w=-32;w<O;++w)y&&(A^=y.charCodeAt((w+32)%y.length)),w===0&&(D=A),A^=A<<10,A^=A>>>15,A^=A<<4,A^=A>>>13,w>=0&&(D=D+1640531527|0,b=x[w&127]^=A+D,I=b==0?I+1:0);for(I>=128&&(x[(y&&y.length||0)&127]=-1),I=127,w=4*128;w>0;--w)A=x[I+34&127],b=x[I=I+1&127],A^=A<<13,b^=b<<17,A^=A>>>15,b^=b>>>12,x[I]=A^b;_.w=D,_.X=x,_.i=I}g(m,f)}function u(f,m){return m.i=f.i,m.w=f.w,m.X=f.X.slice(),m}function h(f,m){f==null&&(f=+new Date);var g=new c(f),_=m&&m.state,y=function(){return(g.next()>>>0)/4294967296};return y.double=function(){do var b=g.next()>>>11,A=(g.next()>>>0)/4294967296,I=(b+A)/(1<<21);while(I===0);return I},y.int32=g.next,y.quick=y,_&&(_.X&&u(_,g),y.state=function(){return u(g,{})}),y}o&&o.exports?o.exports=h:a&&a.amd?a(function(){return h}):this.xor4096=h})(Dt,e,!1)})(Uw);var dpe=Uw.exports,Fw={exports:{}};Fw.exports;(function(e){(function(t,o,a){function c(f){var m=this,g="";m.next=function(){var y=m.b,b=m.c,A=m.d,I=m.a;return y=y<<25^y>>>7^b,b=b-A|0,A=A<<24^A>>>8^I,I=I-y|0,m.b=y=y<<20^y>>>12^b,m.c=b=b-A|0,m.d=A<<16^b>>>16^I,m.a=I-y|0},m.a=0,m.b=0,m.c=-1640531527,m.d=1367130551,f===Math.floor(f)?(m.a=f/4294967296|0,m.b=f|0):g+=f;for(var _=0;_<g.length+20;_++)m.b^=g.charCodeAt(_)|0,m.next()}function u(f,m){return m.a=f.a,m.b=f.b,m.c=f.c,m.d=f.d,m}function h(f,m){var g=new c(f),_=m&&m.state,y=function(){return(g.next()>>>0)/4294967296};return y.double=function(){do var b=g.next()>>>11,A=(g.next()>>>0)/4294967296,I=(b+A)/(1<<21);while(I===0);return I},y.int32=g.next,y.quick=y,_&&(typeof _=="object"&&u(_,g),y.state=function(){return u(g,{})}),y}o&&o.exports?o.exports=h:a&&a.amd?a(function(){return h}):this.tychei=h})(Dt,e,!1)})(Fw);var hpe=Fw.exports,m5={exports:{}};(function(e){(function(t,o,a){var c=256,u=6,h=52,f="random",m=a.pow(c,u),g=a.pow(2,h),_=g*2,y=c-1,b;function A(M,V,F){var B=[];V=V==!0?{entropy:!0}:V||{};var H=x(D(V.entropy?[M,P(o)]:M??O(),3),B),K=new I(B),$=function(){for(var Z=K.g(u),z=m,G=0;Z<g;)Z=(Z+G)*c,z*=c,G=K.g(1);for(;Z>=_;)Z/=2,z/=2,G>>>=1;return(Z+G)/z};return $.int32=function(){return K.g(4)|0},$.quick=function(){return K.g(4)/4294967296},$.double=$,x(P(K.S),o),(V.pass||F||function(Z,z,G,ee){return ee&&(ee.S&&w(ee,K),Z.state=function(){return w(K,{})}),G?(a[f]=Z,z):Z})($,H,"global"in V?V.global:this==a,V.state)}function I(M){var V,F=M.length,B=this,H=0,K=B.i=B.j=0,$=B.S=[];for(F||(M=[F++]);H<c;)$[H]=H++;for(H=0;H<c;H++)$[H]=$[K=y&K+M[H%F]+(V=$[H])],$[K]=V;(B.g=function(Z){for(var z,G=0,ee=B.i,re=B.j,oe=B.S;Z--;)z=oe[ee=y&ee+1],G=G*c+oe[y&(oe[ee]=oe[re=y&re+z])+(oe[re]=z)];return B.i=ee,B.j=re,G})(c)}function w(M,V){return V.i=M.i,V.j=M.j,V.S=M.S.slice(),V}function D(M,V){var F=[],B=typeof M,H;if(V&&B=="object")for(H in M)try{F.push(D(M[H],V-1))}catch{}return F.length?F:B=="string"?M:M+"\0"}function x(M,V){for(var F=M+"",B,H=0;H<F.length;)V[y&H]=y&(B^=V[y&H]*19)+F.charCodeAt(H++);return P(V)}function O(){try{var M;return b&&(M=b.randomBytes)||(M=new Uint8Array(c),(t.crypto||t.msCrypto).getRandomValues(M)),P(M)}catch{var V=t.navigator,F=V&&V.plugins;return[+new Date,t,F,t.screen,P(o)]}}function P(M){return String.fromCharCode.apply(0,M)}x(a.random(),o),e.exports?e.exports=A:a["seed"+f]=A})(typeof self<"u"?self:Dt,[],Math)})(m5);var ppe=m5.exports,fpe=spe,mpe=cpe,gpe=lpe,vpe=upe,Epe=dpe,_pe=hpe,Ku=ppe;Ku.alea=fpe;Ku.xor128=mpe;Ku.xorwow=gpe;Ku.xorshift7=vpe;Ku.xor4096=Epe;Ku.tychei=_pe;var Spe=Ku;const g5=Ul(Spe);let v5=g5();function ype(){return v5()}function LF(e){v5=g5(e)}function E5(e,t){const o=Array.isArray(e)?()=>Cpe(e):e;return(t==null?void 0:t.length)===void 0?o(0):Array.from({length:t.length},(a,c)=>o(c))}function Cpe(e){return e[Math.floor(ype()*e.length)]}function bpe(e,t){return E5(e,t)}var MF={withAccents:{male:["Adrián","Ægir","Álvaro","André","Andrés","Árni","Asbjørn","Björn","César","Daníel","Davíð","Emílio","Fañch","François","František","Gísli","Götz","Guðjón","Guðmundur","Günter","Halldór","Hans-Jörg","Hans-Jürgen","Hüseyin","Iñaki","János","Jesús","Jiří","Jóhann","Jóhannes","Jokūbas","Jón","José","Jörn","Julião","Jürgen","Kristján","Maël","Magnús","Mathéo","Mátyás","Michał","Noël","Nuñez","Ólafur","Óscar","Øyvind","Páll","Paweł","Pétur","Ramón","Raúl","René","Ruairí","Rubén","Seán","Sérgio","Sigurður","Sönke","Stefán","Tomáš","Þorsteinn"],female:["Ædel","Agnès","Alícia","Änne","Antónia","Ásta","Auður","Cäcilia","Chloë","Claúdia","Dörte","Elín","Elísabet","Eliška","Františka","Glória","Grażyna","Guðbjörg","Guðný","Guðrún","Henriëtte","Ingibjörg","Íris","Jóhanna","Jóna","Júlia","Käte","Katrín","Kolbrún","Kristín","KŠthe","Letícia","Lídia","Lúcia","Małgorzata","Margrét","María","Mónica","Natália","Ólöf","Patrícia","Ragnheiður","Renée","Ružena","Siân","Sigríður","Sigrún","Sílvia","Sørina","Věra","Virgínia","Zoë","Þóra","Þórunn"]},withoutAccents:{male:["Abdul","Abdullahi","Abubakar","Adam","Adamu","Adiy","Ahmad","Ajay","Akira","Alan","Alberto","Alejandro","Aleksander","Aleksandr","Aleksey","Alex","Alexander","Alexey","Ali","Aliyu","Aminu","Amit","Amiyr","Amiyt","Amnuai","Amphon","Anah","Anan","Andreas","Andrew","Andrey","Andri","Andries","Andrzej","Anil","Anthony","Anton","Antonio","Arnar","Artur","Artyom","Arun","Ashok","Atli","Avraham","Bartosz","Bello","Bernd","Bin","Birgir","Bjarni","Blessing","Bongani","Brian","Bunmi","Carlos","Carol","Chan","Chao","Charles","Charoen","Chen","Cheng","Christian","Christopher","Colin","Daniel","Daniyel","Dariusz","David","Denis","Dennis","Diego","Dieter","Dilip","Dinesh","Dmitriy","Dmitry","Einar","Eliyahu","Emmanuel","Evgeniy","Fernando","Fran","Francis","Francisco","Francisco-Javier","Frank","Franz","Gang","Gareth","Gary","George","Gerhard","Graham","Grzegorz","Gunnar","Guy","Haim","Haiyan","Hans","Hans-Ulrich","Haruna","Hassan","Heike","Heinz","Helgi","Helmut","Hendrik","Herbert","Hideo","Hiromi","Hiroshi","Hong","Horst","Hui","Ian","Ibrahim","Idris","Igor","Ilya","Isa","Isaac","Isah","Ivan","Jabulani","Jacek","Jacobus","Jakub","James","Jan","Janusz","Javier","Jean","Jerzy","Jesus","Jason","Jianguo","Jianhua","Jianjun","Jianping","Jin","Joan","Johan","Johannes","John","Jonathan","Jorge","Jose","Jose-Antonio","Jose-Luis","Jose-Manuel","Jose-Maria","Josef","Joseph","Joyce","Juan","Kabiru","Kai","Kamil","Karen","Karl","Karl-Heinz","Katsumi","Kazuo","Kelvin","Kenji","Kenneth","Kevin","Kiran","Kirill","Kiyoshi","Kjartan","Klaus","Ko","Koichi","Koji","Konstantin","Koshi","Krishna","Kristinn","Krzysztof","Kun","Lakshmi","Lan","Laxmi","Lei","Li","Lihua","Lijun","Lilian","Lin","Ling","Liping","Liyor","Luis","Lukasz","Maciej","Mahmood","Maksim","Manfred","Manoj","Manuel","Marcin","Mardkhay","Marek","Mariusz","Mark","Martin","Masami","Masao","Mateusz","Matt","Matthew","Meiyr","Michael","Michal","Miguel","Miguel-Angel","Mikhail","Min","Ming","Mitsuo","Miykhael","Miykhal","Mo","Mohamed","Mohammad","Mohammed","Mohan","Moses","Moshe","Mpho","Muhammad","Muhammed","Mukesh","Musa","Narong","Nathan","Nicola","Nikita","Nikolay","Ning","Nkosinathi","Noam","Oleg","Omer","Otieno","Pablo","Patrick","Paul","Pavel","Pawel","Pedro","Peng","Peter","Petrus","Philip","Pieter","Ping","Piotr","Prasit","Prasoet","Pricha","Pushpa","Qiang","Qing","Radha","Rafael","Ragnar","Raj","Rajendra","Rajesh","Raju","Rakesh","Ram","Ramesh","Raphael","Rattana","Ravi","Richard","Robert","Roman","Rong","Roy","Ryan","Salisu","Saman","Samran","Samuel","Sani","Sanjay","Santosh","Sam","Sammy","Sawat","Sebastian","Sergey","Sergio","Shankar","Shay","Shigeru","Shimon","Shlomo","Shoji","Sibusiso","Simon","Sipho","Sombat","Sombun","Somchai","Somchit","Somkhit","Somkiat","Sommai","Somnuek","Somphon","Somphong","Somsak","Sri","Stefan","Stephen","Steve","Steven","Suman","Sunday","Sunil","Sunthon","Suresh","Sushila","Suwit","Sveinn","Tadashi","Takashi","Takeshi","Tal","Tebogo","Thabo","Thawi","Themba","Thomas","Thulani","Tomasz","Toshio","Udom","Umar","Uriy","Usman","Uwe","Victor","Vijay","Viktor","Vincent","Vinod","Vladimir","Walter","Wanchai","Waraphon","Wei","Werner","Wichai","Wichian","Willem","William","Winai","Wirat","Wirot","Wojciech","Wolfgang","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Xolani","Yaakv","Yahaya","Yakubu","Yan","Yasuo","Yhudah","Ying","Yisrael","Yong","Yosef","Yoshie","Yoshimi","Yoshio","Yu","Yue","Yukio","Yun","Yuriy","Yusuf","Yuval","Zbigniew","Zhen","Zhiqiang"],female:["Agata","Agnieszka","Aisha","Akira","Aleksandra","Alina","Alyona","Amina","Amnuai","Ana","Ana-Maria","Anah","Anan","Anastasiya","Andrea","Angela","Anita","Ann","Anna","Anong","Antonia","Asha","Barbara","Beata","Berglind","Bin","Birgit","Birna","Blessing","Brigitte","Bunmi","Busisiwe","Carmen","Carol","Caroline","Catherine","Chan","Chanah","Chao","Charoen","Chayah","Chen","Cheng","Christa","Christine","Claire","Claudia","Cristina","Darya","Dolores","Dorota","Edda","Ekaterina","Elena","Elisabeth","Elizabeth","Elke","Emiko","Emma","Erika","Erla","Erna","Ester","Esther","Eunice","Eva","Eugenia","Ewa","Faith","Fatima","Fiona","Fran","Francisca","Fumiko","Galina","Gabra","Gisela","Gita","Grace","Hadiza","Haiyan","Hanna","Haruna","Hauwa","Heike","Helen","Helga","Hildur","Hiroko","Hiromi","Hisako","Hong","Hui","Hulda","Inga","Ingrid","Irina","Isa","Isabel","Isah","Iwona","Jackline","Jan","Jane","Janet","Jean","Jennifer","Jianhua","Jianping","Jin","Joan","Joanna","Johanna","Josefa","Joy","Joyce","Juan","Julie","Justyna","Kai","Kanchana","Karen","Karin","Karolina","Kasia","Katarzyna","Katsumi","Keiko","Kiran","Kiyoko","Kristina","Kseniya","Kun","Lakshmi","Lalita","Lan","Latda","Laura","Laxmi","Leah","Lei","Li","Lihua","Lijun","Lilian","Lilja","Lin","Linda","Lindiwe","Ling","Liping","Lisa","Lucia","Lucy","Lyubov","Lyudmila","Magda","Magdalena","Mali","Manju","Margaret","Maria","Maria-Isabel","Maria-Jose","Maria-Pilar","Marina","Mariya","Marta","Martha","Mary","Maryam","Masako","Masami","Mei","Mercy","Michal","Michiko","Mieko","Min","Mina","Ming","Miriam","Miyoko","Mo","Monika","Mpho","Na","Nadezhda","Nan","Nancy","Natalya","Ngozi","Nicola","Ning","Nittaya","Noam","Nobuko","Nokuthula","Nonhlanhla","Noriko","Nushi","Olga","Omer","Patricia","Paula","Paulina","Peng","Petra","Phonthip","Pilar","Ping","Prani","Purity","Pushpa","Qing","Rachel","Radha","Rattana","Rebecca","Reiko","Rekha","Renate","Rita","Rong","Rosa","Rose","Rut","Ruth","Ryoko","Sabine","Sachiko","Samran","Santosh","Sara","Sarah","Sam","Sammy","Sawat","Shanti","Sharon","Shay","Shizuko","Shoshanah","Sibongile","Sita","Sombat","Sombun","Somchit","Somkhit","Sommai","Somnuek","Somphon","Somphong","Sri","Steinunn","Sukanya","Suman","Sunday","Sunita","Suphaphon","Susan","Susanne","Sushila","Svetlana","Takako","Tamar","Tatyana","Tal","Tebogo","Teruko","Thawi","Tomiko","Toshiko","Unnur","Urai","Urmila","Ursula","Usha","Valentina","Victoria","Wanjiru","Wanphen","Watsana","Wei","Wilai","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Yael","Yan","Yasuko","Yelena","Yhudiyt","Ying","Yoko","Yong","Yoshie","Yoshiko","Yoshimi","Yu","Yue","Yuko","Yuliya","Yun","Yuval","Zainab","Zandile","Zanele","Zhen"]}};function Tpe(e){var t,o;const a=(t=e==null?void 0:e.withAccents)!=null&&t,c=(o=e==null?void 0:e.gender)!=null?o:bpe(["male","female"]),u=e==null?void 0:e.locale;return E5(a?u?u==null?void 0:u.withAccents[c]:MF.withAccents[c]:u?u==null?void 0:u.withoutAccents[c]:MF.withoutAccents[c],e)}var Rpe={china:["Peking roasted duck","Kung pao chicken","Sweet and sour pork","Hot pot","Dim sum","Dumplings","Ma po tofu","Char siu","Chicken chow mein","Beef chow mein","vegetable chow mein","Chicken fried rice","Beef fried rice","Vegetable fried Rice","Special fried Rice","Sichuan pork","Xiaolongbao","Zhajiangmian","Wonton soup","Sweet and sour pork","Duck spring Rolls","Vegetable spring Rolls","Wonton","Peking duck","Lamb hot pot","Spicy crayfish","Guilin rice noodles","Lanzhou hand-pulled noodles","Steamed crab","Shredded pork with garlic sauce","Red braised pork","Sweet and sour Ribs","Xinjiang","Braised pork with vermicelli"],italy:["Butternut squash risotto","Mushroom risotto","Beetroot risotto","Courgette risotto","Pizza","Gnocchi","Spaghetti bolognese","Spaghetti carbonara","Pesto alla Genovese","Beef lasagne","Vegetable lasagne","Gelato","Prosciutto di Parma","Ribollita","Bagna cauda","Polenta","Tortelli and ravioli","Focaccia","Garlic bread","Arancini","Il tartufo","Panzerotto fritto","Fiorentina","Minestrone","Frico","Arrosticini","Olive ascolante","Fritto misto piemontes","Tiramisù"],india:["Biryani","Dosa","Tandoori chicken","Samosas","Chaat","Plain naan","Garlic naan","Pilau rice","Steamed rice","Chicken madras","Vegetable madras","Chicken vindaloo","Chicken jalfrezi","Chicken roghan josh","Lamb roghan josh","Beef roghan josh","Butter chicken","Dosa","Gulab jamun","Chicken korma","Mutter paneer","Papadum","Paratha","Raita","Saag paneer","Tandoori chicken","Chicken tikka masala","Pakora","Dal","Chapati","Pasanda","Aloo gobi","Kofta","Chicken makhani","Paneer naan","Chana Aloo Curry"],mexico:["Chilaquiles","Pozole","Tacos al pastor","Tostadas","Chiles en nogada","Elote","Enchiladas","Mole","Guacamole","Tamales","Huevos rancheros","Machaca","Discada","Beef Burrito","Chicken Burrito","Pozole de pollo o duajolote","Menudo","Cochinita pibil","Tamale","Quesadilla","Frijoles puercos","Chile en nogada","Esquites","Alegria de amaranto","Pipián","Aguachile","Ceviche","Pescado zarandeado","Camarones a la diabla","Birria de chivo","Tlayuda","Guacamole con chapulines","Flautas","Torta Ahogada","Carnitas","Caldo Azteca","Gorditas de Nata"],japan:["Sushi","Udon","Tofu","Tempura","Yakitori","Sashimi","Ramen","Donburi","Natto","Oden","Tamagoyaki","Soba","Tonkatsu","Kashipan","Sukiyaki","Miso soup","Okonomiyaki","Mentaiko","Nikujaga","Unagi no kabayaki","Shabu Shabu","Onigiri","Gyoza","Takoyaki","aiseki ryori","Edamame","Yakisoba","Chawanmushi","Wagashi"],france:["Foie gras","Huîtres","Cassoulet","Poulet basquaise","Escargots au beurre persillé","Mouclade charentaise","Galettes bretonnes","Flemish carbonnade","Quiche lorraine","Raclette","Cheese fondue","Beef fondue","Gratin dauphinois","Tartiflette","Bouillabaisse","Ratatouille","Boeuf bourguignon","Blanquette de veau","Pot-au-feu","Coq-au-vin","Hachis parmentier","Steak tartare","Choucroute","Soufflé au fromage","Cuisses de grenouilles","Soupe à l’oignon","Baguette","Croissant","French cheeses","Fondant au chocolat","Tarte tatin","Macarons","Crème brûlée","Île flottante","Profiteroles","Pain au chocolat"],lebanon:["Kibbeh","Kafta","Kanafeh","Hummus","Rice pilaf","Fattoush","Manakish","Tabbouleh","Sfeeha","Fattoush","Labneh","Muhammara","Lahm bi ajin","Kaak","Chanklich","Mssabaha","Shawarma","Kebbe","Falafel","Halewit el jeben","Namoura","Maamoul","Foul mdammas","Balila","Kawarma","Fattouch"],thailand:["Pad kra pao moo","Tom kha gai","Khao Pad","Chicken pad Thai","Vegetable pad Thai","Moo satay","Tom yum goong","Khao niew mamuang","Kai yad sai","Khao soi","Pad see ew","Laab moo","Gaeng panang","Gai pad med ma muang","Som tam","Poh pia tod","Gaeng massaman","Pla kapung nueng manao","Tod mun pla","Gaeng ped","Gaeng garee","Gaeng keow wan","Moo ping","Durian","Sai ooah","Hoy tod","Kuay teow reua","Mu kratha","Kao ka moo","Yam nua"],greece:["Moussaka","Papoutsakia","Pastitsio","Souvlaki","Soutzoukakia","Stifado","Tomatokeftedes","Tzatziki","Kolokithokeftedes","Giouvetsi","Choriatiki","Kleftiko","Gemista","Fasolada","Bougatsa","Tiropita","Spanakopita","Feta Cheese with Honey","Horta","Tirokroketes","Briam","Saganaki","Gigantes","Dolmades","Fasolatha","Koulouri","Loukoumades","Gyros","Galaktoboureko","Baklava"],turkey:["Şiş kebap","Döner","Köfte","Pide","Kumpir","Meze","Mantı","Lahmacun","Menemen","Şiş kebap","İskender kebab","Corba","Kuzu tandir","Çiğ Köfte","Pilav","Yaprak sarma","Dolma","İmam bayıldı","Borek","Durum","Kumpir","Balik ekmek","Simit","Kunefe","Baklava","Lokum","Halva","Mozzaik pasta","Güllaç","Mercimek Köftesi","Haydari","Tursu suyu","Kahvalti","Kazan dibi","Hunkar begendi","Islak burgers","Salep","Yogurtlu kebab"],spain:["Tortilla de patatas","Fabada asturiana","Calçots","Boquerones al vinagre","Empanada gallega","Paella","Gazpacho","Gachas","Migas","Bocadillo de calamares","Pulpo a feira","Caldo gallego","Lentejas con chorizo","Cocido madrileño","Cachopo","Caracoles"],venezuela:["Pabellón criollo","Arepa","Mondongo","Empanadas","Quesillo","Chicha andina","Tequeños","Cachapa","Hallaca","Perico","Pasticho","Mandocas","Caraotas negras","Patacones","Dulce de leche","Pan de Jamón"],chile:["Humitas","Empanadas","Porotos con riendas","Completos","Manjar","Cordero al palo","Pastel de choclo","Mote con huesillos","Sopaipillas","Curanto"],argentina:["Milanesas","Empanadas","Pizza fugazeta","Asado","Choripan","Bondiola","Bife de chorizo"],colombia:["Bandeja paisa","Chuleta valluna","Sancocho trifásico","Empanada valluna","Salpicon de frutas","Pastel de garbanzo","Ajiaco","Arepas","Arroz de lisa","Sancocho","Pan de bono","Cuchuco","Oblea","Cazuela de mariscos","Pan de yuca","Bollo Limpio","Almojábana","Empanadas","Arroz con Coco","Sopa de mondongo","Cazuela de Mariscos","Arroz con Pollo","Arepa de Huevo","Mote de Queso"],ecuador:["Encebollado","Ceviche","Tigrillo","Bolon de verde","Llapingacho","Mote pillo","Locro de papa","Churrasco"],peru:["Ceviche","Arroz con pollo","Aji de gallina","Llunca de gallina"],"el salvador":["Pupusa","Sopa de patas","Rigua","Flor de izote con huevo","Gallo en chicha"],romania:["Sarmale","Mici","Pomana porcului","Ciorbă de fasole cu ciolan","Ciorbă de burtă","Ciorbă rădăuțeană","Plăcintă cu brânză","Ciorbă de potroace","Mămăligă cu brânză și smântână","Tochitură","Piftie","Iahnie de fasole","Slănină afumată","Cârnați afumați","Varză a la Cluj","Gulaș de cartofi cu afumătură","Cozonac de casă","Ciorbă ardelenească de porc","Mucenici moldovenești","Salată de boeuf","Dovleac copt","Papanași cu brânză de vacă și afine","Drob de miel","Pârjoale moldovenești","Zacuscă de vinete","Zacuscă de fasole","Turtă dulce","Clătitele cu gem","Clătitele cu brânza de vacă","Balmoș","Cozonac","Chiftele"]},UF;(UF=Object.keys(Rpe))==null||UF.length;var FF,Ipe={olympic:["Archery","Artistic Gymnastics","Artistic Swimming","Athletics","Badminton","Baseball Softball","Basketball","Beach Volleyball","BMX Freestyle","BMX Racing","Boxing","Kayak Flatwater","Kayak Slalom","Diving","Equestrian","Fencing","Football","Golf","Handball","Hockey","Judo","Karate","Marathon Swimming","Modern Pentathlon","Mountain Bike","Rhythmic Gymnastics","Road Cycling","Rowing","Rugby","Sailing","Shooting","Skateboarding","Sport Climbing","Surfing","Swimming","Table Tennis","Taekwondo","Tennis","Track Cycling","Trampoline","Triathlon","Volleyball","Water Polo","Weightlifting","Wrestling"],winterOlympic:["Alpine Skiing","Biathlon","Bobsleigh","Cross-Country Skiing","Curling","Figure Skating","Freestyle Skiing","Ice Hockey","Luge","Nordic Combined","Short Track Speed Skating","Skeleton","Ski Jumping","Snowboard","Speed Skating"],outdoor:["Archery","Athletics","Badminton","Baseball","Basketball","Bowling","Boxing","Camping","Canoeing","Climbing","Cricket","Curling","Cycling","Equestrian","Fencing","Football","Golf","Gymnastics","Handball","Hang Gliding","High Jumping","Hockey","Ice Hockey","Judo","Karate","Kite Flying","Monkey Bars","Motorsports","Netball","Rowing","Rugby","Running","Sailing","Skateboarding","Slide","Snow Skiing","Soccer","Street Hockey","Surfing","Swimming","Table Tennis","Tennis","Trekking","Triathlon","Volleyball","Weightlifting","Wrestling"]};(FF=Object.keys(Ipe))==null||FF.length;var _5={exports:{}};function wpe(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qb={exports:{}};const Ope={},Ape=Object.freeze(Object.defineProperty({__proto__:null,default:Ope},Symbol.toStringTag,{value:"Module"})),Npe=KX(Ape);var VF;function _n(){return VF||(VF=1,function(e,t){(function(o,a){e.exports=a()})(Dt,function(){var o=o||function(a,c){var u;if(typeof window<"u"&&window.crypto&&(u=window.crypto),typeof self<"u"&&self.crypto&&(u=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(u=globalThis.crypto),!u&&typeof window<"u"&&window.msCrypto&&(u=window.msCrypto),!u&&typeof Dt<"u"&&Dt.crypto&&(u=Dt.crypto),!u&&typeof wpe=="function")try{u=Npe}catch{}var h=function(){if(u){if(typeof u.getRandomValues=="function")try{return u.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof u.randomBytes=="function")try{return u.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},f=Object.create||function(){function O(){}return function(P){var M;return O.prototype=P,M=new O,O.prototype=null,M}}(),m={},g=m.lib={},_=g.Base=function(){return{extend:function(O){var P=f(this);return O&&P.mixIn(O),(!P.hasOwnProperty("init")||this.init===P.init)&&(P.init=function(){P.$super.init.apply(this,arguments)}),P.init.prototype=P,P.$super=this,P},create:function(){var O=this.extend();return O.init.apply(O,arguments),O},init:function(){},mixIn:function(O){for(var P in O)O.hasOwnProperty(P)&&(this[P]=O[P]);O.hasOwnProperty("toString")&&(this.toString=O.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),y=g.WordArray=_.extend({init:function(O,P){O=this.words=O||[],P!=c?this.sigBytes=P:this.sigBytes=O.length*4},toString:function(O){return(O||A).stringify(this)},concat:function(O){var P=this.words,M=O.words,V=this.sigBytes,F=O.sigBytes;if(this.clamp(),V%4)for(var B=0;B<F;B++){var H=M[B>>>2]>>>24-B%4*8&255;P[V+B>>>2]|=H<<24-(V+B)%4*8}else for(var K=0;K<F;K+=4)P[V+K>>>2]=M[K>>>2];return this.sigBytes+=F,this},clamp:function(){var O=this.words,P=this.sigBytes;O[P>>>2]&=4294967295<<32-P%4*8,O.length=a.ceil(P/4)},clone:function(){var O=_.clone.call(this);return O.words=this.words.slice(0),O},random:function(O){for(var P=[],M=0;M<O;M+=4)P.push(h());return new y.init(P,O)}}),b=m.enc={},A=b.Hex={stringify:function(O){for(var P=O.words,M=O.sigBytes,V=[],F=0;F<M;F++){var B=P[F>>>2]>>>24-F%4*8&255;V.push((B>>>4).toString(16)),V.push((B&15).toString(16))}return V.join("")},parse:function(O){for(var P=O.length,M=[],V=0;V<P;V+=2)M[V>>>3]|=parseInt(O.substr(V,2),16)<<24-V%8*4;return new y.init(M,P/2)}},I=b.Latin1={stringify:function(O){for(var P=O.words,M=O.sigBytes,V=[],F=0;F<M;F++){var B=P[F>>>2]>>>24-F%4*8&255;V.push(String.fromCharCode(B))}return V.join("")},parse:function(O){for(var P=O.length,M=[],V=0;V<P;V++)M[V>>>2]|=(O.charCodeAt(V)&255)<<24-V%4*8;return new y.init(M,P)}},w=b.Utf8={stringify:function(O){try{return decodeURIComponent(escape(I.stringify(O)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(O){return I.parse(unescape(encodeURIComponent(O)))}},D=g.BufferedBlockAlgorithm=_.extend({reset:function(){this._data=new y.init,this._nDataBytes=0},_append:function(O){typeof O=="string"&&(O=w.parse(O)),this._data.concat(O),this._nDataBytes+=O.sigBytes},_process:function(O){var P,M=this._data,V=M.words,F=M.sigBytes,B=this.blockSize,H=B*4,K=F/H;O?K=a.ceil(K):K=a.max((K|0)-this._minBufferSize,0);var $=K*B,Z=a.min($*4,F);if($){for(var z=0;z<$;z+=B)this._doProcessBlock(V,z);P=V.splice(0,$),M.sigBytes-=Z}return new y.init(P,Z)},clone:function(){var O=_.clone.call(this);return O._data=this._data.clone(),O},_minBufferSize:0});g.Hasher=D.extend({cfg:_.extend(),init:function(O){this.cfg=this.cfg.extend(O),this.reset()},reset:function(){D.reset.call(this),this._doReset()},update:function(O){return this._append(O),this._process(),this},finalize:function(O){O&&this._append(O);var P=this._doFinalize();return P},blockSize:16,_createHelper:function(O){return function(P,M){return new O.init(M).finalize(P)}},_createHmacHelper:function(O){return function(P,M){return new x.HMAC.init(O,M).finalize(P)}}});var x=m.algo={};return m}(Math);return o})}(qb)),qb.exports}var Xb={exports:{}},jF;function T_(){return jF||(jF=1,function(e,t){(function(o,a){e.exports=a(_n())})(Dt,function(o){return function(a){var c=o,u=c.lib,h=u.Base,f=u.WordArray,m=c.x64={};m.Word=h.extend({init:function(g,_){this.high=g,this.low=_}}),m.WordArray=h.extend({init:function(g,_){g=this.words=g||[],_!=a?this.sigBytes=_:this.sigBytes=g.length*8},toX32:function(){for(var g=this.words,_=g.length,y=[],b=0;b<_;b++){var A=g[b];y.push(A.high),y.push(A.low)}return f.create(y,this.sigBytes)},clone:function(){for(var g=h.clone.call(this),_=g.words=this.words.slice(0),y=_.length,b=0;b<y;b++)_[b]=_[b].clone();return g}})}(),o})}(Xb)),Xb.exports}var Jb={exports:{}},BF;function xpe(){return BF||(BF=1,function(e,t){(function(o,a){e.exports=a(_n())})(Dt,function(o){return function(){if(typeof ArrayBuffer=="function"){var a=o,c=a.lib,u=c.WordArray,h=u.init,f=u.init=function(m){if(m instanceof ArrayBuffer&&(m=new Uint8Array(m)),(m instanceof Int8Array||typeof Uint8ClampedArray<"u"&&m instanceof Uint8ClampedArray||m instanceof Int16Array||m instanceof Uint16Array||m instanceof Int32Array||m instanceof Uint32Array||m instanceof Float32Array||m instanceof Float64Array)&&(m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength)),m instanceof Uint8Array){for(var g=m.byteLength,_=[],y=0;y<g;y++)_[y>>>2]|=m[y]<<24-y%4*8;h.call(this,_,g)}else h.apply(this,arguments)};f.prototype=u}}(),o.lib.WordArray})}(Jb)),Jb.exports}var Qb={exports:{}},$F;function Ppe(){return $F||($F=1,function(e,t){(function(o,a){e.exports=a(_n())})(Dt,function(o){return function(){var a=o,c=a.lib,u=c.WordArray,h=a.enc;h.Utf16=h.Utf16BE={stringify:function(m){for(var g=m.words,_=m.sigBytes,y=[],b=0;b<_;b+=2){var A=g[b>>>2]>>>16-b%4*8&65535;y.push(String.fromCharCode(A))}return y.join("")},parse:function(m){for(var g=m.length,_=[],y=0;y<g;y++)_[y>>>1]|=m.charCodeAt(y)<<16-y%2*16;return u.create(_,g*2)}},h.Utf16LE={stringify:function(m){for(var g=m.words,_=m.sigBytes,y=[],b=0;b<_;b+=2){var A=f(g[b>>>2]>>>16-b%4*8&65535);y.push(String.fromCharCode(A))}return y.join("")},parse:function(m){for(var g=m.length,_=[],y=0;y<g;y++)_[y>>>1]|=f(m.charCodeAt(y)<<16-y%2*16);return u.create(_,g*2)}};function f(m){return m<<8&4278255360|m>>>8&16711935}}(),o.enc.Utf16})}(Qb)),Qb.exports}var Zb={exports:{}},HF;function sp(){return HF||(HF=1,function(e,t){(function(o,a){e.exports=a(_n())})(Dt,function(o){return function(){var a=o,c=a.lib,u=c.WordArray,h=a.enc;h.Base64={stringify:function(m){var g=m.words,_=m.sigBytes,y=this._map;m.clamp();for(var b=[],A=0;A<_;A+=3)for(var I=g[A>>>2]>>>24-A%4*8&255,w=g[A+1>>>2]>>>24-(A+1)%4*8&255,D=g[A+2>>>2]>>>24-(A+2)%4*8&255,x=I<<16|w<<8|D,O=0;O<4&&A+O*.75<_;O++)b.push(y.charAt(x>>>6*(3-O)&63));var P=y.charAt(64);if(P)for(;b.length%4;)b.push(P);return b.join("")},parse:function(m){var g=m.length,_=this._map,y=this._reverseMap;if(!y){y=this._reverseMap=[];for(var b=0;b<_.length;b++)y[_.charCodeAt(b)]=b}var A=_.charAt(64);if(A){var I=m.indexOf(A);I!==-1&&(g=I)}return f(m,g,y)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function f(m,g,_){for(var y=[],b=0,A=0;A<g;A++)if(A%4){var I=_[m.charCodeAt(A-1)]<<A%4*2,w=_[m.charCodeAt(A)]>>>6-A%4*2,D=I|w;y[b>>>2]|=D<<24-b%4*8,b++}return u.create(y,b)}}(),o.enc.Base64})}(Zb)),Zb.exports}var eT={exports:{}},WF;function Dpe(){return WF||(WF=1,function(e,t){(function(o,a){e.exports=a(_n())})(Dt,function(o){return function(){var a=o,c=a.lib,u=c.WordArray,h=a.enc;h.Base64url={stringify:function(m,g=!0){var _=m.words,y=m.sigBytes,b=g?this._safe_map:this._map;m.clamp();for(var A=[],I=0;I<y;I+=3)for(var w=_[I>>>2]>>>24-I%4*8&255,D=_[I+1>>>2]>>>24-(I+1)%4*8&255,x=_[I+2>>>2]>>>24-(I+2)%4*8&255,O=w<<16|D<<8|x,P=0;P<4&&I+P*.75<y;P++)A.push(b.charAt(O>>>6*(3-P)&63));var M=b.charAt(64);if(M)for(;A.length%4;)A.push(M);return A.join("")},parse:function(m,g=!0){var _=m.length,y=g?this._safe_map:this._map,b=this._reverseMap;if(!b){b=this._reverseMap=[];for(var A=0;A<y.length;A++)b[y.charCodeAt(A)]=A}var I=y.charAt(64);if(I){var w=m.indexOf(I);w!==-1&&(_=w)}return f(m,_,b)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function f(m,g,_){for(var y=[],b=0,A=0;A<g;A++)if(A%4){var I=_[m.charCodeAt(A-1)]<<A%4*2,w=_[m.charCodeAt(A)]>>>6-A%4*2,D=I|w;y[b>>>2]|=D<<24-b%4*8,b++}return u.create(y,b)}}(),o.enc.Base64url})}(eT)),eT.exports}var tT={exports:{}},GF;function cp(){return GF||(GF=1,function(e,t){(function(o,a){e.exports=a(_n())})(Dt,function(o){return function(a){var c=o,u=c.lib,h=u.WordArray,f=u.Hasher,m=c.algo,g=[];(function(){for(var w=0;w<64;w++)g[w]=a.abs(a.sin(w+1))*4294967296|0})();var _=m.MD5=f.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(w,D){for(var x=0;x<16;x++){var O=D+x,P=w[O];w[O]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}var M=this._hash.words,V=w[D+0],F=w[D+1],B=w[D+2],H=w[D+3],K=w[D+4],$=w[D+5],Z=w[D+6],z=w[D+7],G=w[D+8],ee=w[D+9],re=w[D+10],oe=w[D+11],pe=w[D+12],ue=w[D+13],me=w[D+14],fe=w[D+15],se=M[0],ae=M[1],de=M[2],ce=M[3];se=y(se,ae,de,ce,V,7,g[0]),ce=y(ce,se,ae,de,F,12,g[1]),de=y(de,ce,se,ae,B,17,g[2]),ae=y(ae,de,ce,se,H,22,g[3]),se=y(se,ae,de,ce,K,7,g[4]),ce=y(ce,se,ae,de,$,12,g[5]),de=y(de,ce,se,ae,Z,17,g[6]),ae=y(ae,de,ce,se,z,22,g[7]),se=y(se,ae,de,ce,G,7,g[8]),ce=y(ce,se,ae,de,ee,12,g[9]),de=y(de,ce,se,ae,re,17,g[10]),ae=y(ae,de,ce,se,oe,22,g[11]),se=y(se,ae,de,ce,pe,7,g[12]),ce=y(ce,se,ae,de,ue,12,g[13]),de=y(de,ce,se,ae,me,17,g[14]),ae=y(ae,de,ce,se,fe,22,g[15]),se=b(se,ae,de,ce,F,5,g[16]),ce=b(ce,se,ae,de,Z,9,g[17]),de=b(de,ce,se,ae,oe,14,g[18]),ae=b(ae,de,ce,se,V,20,g[19]),se=b(se,ae,de,ce,$,5,g[20]),ce=b(ce,se,ae,de,re,9,g[21]),de=b(de,ce,se,ae,fe,14,g[22]),ae=b(ae,de,ce,se,K,20,g[23]),se=b(se,ae,de,ce,ee,5,g[24]),ce=b(ce,se,ae,de,me,9,g[25]),de=b(de,ce,se,ae,H,14,g[26]),ae=b(ae,de,ce,se,G,20,g[27]),se=b(se,ae,de,ce,ue,5,g[28]),ce=b(ce,se,ae,de,B,9,g[29]),de=b(de,ce,se,ae,z,14,g[30]),ae=b(ae,de,ce,se,pe,20,g[31]),se=A(se,ae,de,ce,$,4,g[32]),ce=A(ce,se,ae,de,G,11,g[33]),de=A(de,ce,se,ae,oe,16,g[34]),ae=A(ae,de,ce,se,me,23,g[35]),se=A(se,ae,de,ce,F,4,g[36]),ce=A(ce,se,ae,de,K,11,g[37]),de=A(de,ce,se,ae,z,16,g[38]),ae=A(ae,de,ce,se,re,23,g[39]),se=A(se,ae,de,ce,ue,4,g[40]),ce=A(ce,se,ae,de,V,11,g[41]),de=A(de,ce,se,ae,H,16,g[42]),ae=A(ae,de,ce,se,Z,23,g[43]),se=A(se,ae,de,ce,ee,4,g[44]),ce=A(ce,se,ae,de,pe,11,g[45]),de=A(de,ce,se,ae,fe,16,g[46]),ae=A(ae,de,ce,se,B,23,g[47]),se=I(se,ae,de,ce,V,6,g[48]),ce=I(ce,se,ae,de,z,10,g[49]),de=I(de,ce,se,ae,me,15,g[50]),ae=I(ae,de,ce,se,$,21,g[51]),se=I(se,ae,de,ce,pe,6,g[52]),ce=I(ce,se,ae,de,H,10,g[53]),de=I(de,ce,se,ae,re,15,g[54]),ae=I(ae,de,ce,se,F,21,g[55]),se=I(se,ae,de,ce,G,6,g[56]),ce=I(ce,se,ae,de,fe,10,g[57]),de=I(de,ce,se,ae,Z,15,g[58]),ae=I(ae,de,ce,se,ue,21,g[59]),se=I(se,ae,de,ce,K,6,g[60]),ce=I(ce,se,ae,de,oe,10,g[61]),de=I(de,ce,se,ae,B,15,g[62]),ae=I(ae,de,ce,se,ee,21,g[63]),M[0]=M[0]+se|0,M[1]=M[1]+ae|0,M[2]=M[2]+de|0,M[3]=M[3]+ce|0},_doFinalize:function(){var w=this._data,D=w.words,x=this._nDataBytes*8,O=w.sigBytes*8;D[O>>>5]|=128<<24-O%32;var P=a.floor(x/4294967296),M=x;D[(O+64>>>9<<4)+15]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,D[(O+64>>>9<<4)+14]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,w.sigBytes=(D.length+1)*4,this._process();for(var V=this._hash,F=V.words,B=0;B<4;B++){var H=F[B];F[B]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360}return V},clone:function(){var w=f.clone.call(this);return w._hash=this._hash.clone(),w}});function y(w,D,x,O,P,M,V){var F=w+(D&x|~D&O)+P+V;return(F<<M|F>>>32-M)+D}function b(w,D,x,O,P,M,V){var F=w+(D&O|x&~O)+P+V;return(F<<M|F>>>32-M)+D}function A(w,D,x,O,P,M,V){var F=w+(D^x^O)+P+V;return(F<<M|F>>>32-M)+D}function I(w,D,x,O,P,M,V){var F=w+(x^(D|~O))+P+V;return(F<<M|F>>>32-M)+D}c.MD5=f._createHelper(_),c.HmacMD5=f._createHmacHelper(_)}(Math),o.MD5})}(tT)),tT.exports}var nT={exports:{}},zF;function Vw(){return zF||(zF=1,function(e,t){(function(o,a){e.exports=a(_n())})(Dt,function(o){return function(){var a=o,c=a.lib,u=c.WordArray,h=c.Hasher,f=a.algo,m=[],g=f.SHA1=h.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(_,y){for(var b=this._hash.words,A=b[0],I=b[1],w=b[2],D=b[3],x=b[4],O=0;O<80;O++){if(O<16)m[O]=_[y+O]|0;else{var P=m[O-3]^m[O-8]^m[O-14]^m[O-16];m[O]=P<<1|P>>>31}var M=(A<<5|A>>>27)+x+m[O];O<20?M+=(I&w|~I&D)+1518500249:O<40?M+=(I^w^D)+1859775393:O<60?M+=(I&w|I&D|w&D)-1894007588:M+=(I^w^D)-899497514,x=D,D=w,w=I<<30|I>>>2,I=A,A=M}b[0]=b[0]+A|0,b[1]=b[1]+I|0,b[2]=b[2]+w|0,b[3]=b[3]+D|0,b[4]=b[4]+x|0},_doFinalize:function(){var _=this._data,y=_.words,b=this._nDataBytes*8,A=_.sigBytes*8;return y[A>>>5]|=128<<24-A%32,y[(A+64>>>9<<4)+14]=Math.floor(b/4294967296),y[(A+64>>>9<<4)+15]=b,_.sigBytes=y.length*4,this._process(),this._hash},clone:function(){var _=h.clone.call(this);return _._hash=this._hash.clone(),_}});a.SHA1=h._createHelper(g),a.HmacSHA1=h._createHmacHelper(g)}(),o.SHA1})}(nT)),nT.exports}var rT={exports:{}},KF;function S5(){return KF||(KF=1,function(e,t){(function(o,a){e.exports=a(_n())})(Dt,function(o){return function(a){var c=o,u=c.lib,h=u.WordArray,f=u.Hasher,m=c.algo,g=[],_=[];(function(){function A(x){for(var O=a.sqrt(x),P=2;P<=O;P++)if(!(x%P))return!1;return!0}function I(x){return(x-(x|0))*4294967296|0}for(var w=2,D=0;D<64;)A(w)&&(D<8&&(g[D]=I(a.pow(w,1/2))),_[D]=I(a.pow(w,1/3)),D++),w++})();var y=[],b=m.SHA256=f.extend({_doReset:function(){this._hash=new h.init(g.slice(0))},_doProcessBlock:function(A,I){for(var w=this._hash.words,D=w[0],x=w[1],O=w[2],P=w[3],M=w[4],V=w[5],F=w[6],B=w[7],H=0;H<64;H++){if(H<16)y[H]=A[I+H]|0;else{var K=y[H-15],$=(K<<25|K>>>7)^(K<<14|K>>>18)^K>>>3,Z=y[H-2],z=(Z<<15|Z>>>17)^(Z<<13|Z>>>19)^Z>>>10;y[H]=$+y[H-7]+z+y[H-16]}var G=M&V^~M&F,ee=D&x^D&O^x&O,re=(D<<30|D>>>2)^(D<<19|D>>>13)^(D<<10|D>>>22),oe=(M<<26|M>>>6)^(M<<21|M>>>11)^(M<<7|M>>>25),pe=B+oe+G+_[H]+y[H],ue=re+ee;B=F,F=V,V=M,M=P+pe|0,P=O,O=x,x=D,D=pe+ue|0}w[0]=w[0]+D|0,w[1]=w[1]+x|0,w[2]=w[2]+O|0,w[3]=w[3]+P|0,w[4]=w[4]+M|0,w[5]=w[5]+V|0,w[6]=w[6]+F|0,w[7]=w[7]+B|0},_doFinalize:function(){var A=this._data,I=A.words,w=this._nDataBytes*8,D=A.sigBytes*8;return I[D>>>5]|=128<<24-D%32,I[(D+64>>>9<<4)+14]=a.floor(w/4294967296),I[(D+64>>>9<<4)+15]=w,A.sigBytes=I.length*4,this._process(),this._hash},clone:function(){var A=f.clone.call(this);return A._hash=this._hash.clone(),A}});c.SHA256=f._createHelper(b),c.HmacSHA256=f._createHmacHelper(b)}(Math),o.SHA256})}(rT)),rT.exports}var iT={exports:{}},YF;function kpe(){return YF||(YF=1,function(e,t){(function(o,a,c){e.exports=a(_n(),S5())})(Dt,function(o){return function(){var a=o,c=a.lib,u=c.WordArray,h=a.algo,f=h.SHA256,m=h.SHA224=f.extend({_doReset:function(){this._hash=new u.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var g=f._doFinalize.call(this);return g.sigBytes-=4,g}});a.SHA224=f._createHelper(m),a.HmacSHA224=f._createHmacHelper(m)}(),o.SHA224})}(iT)),iT.exports}var oT={exports:{}},qF;function y5(){return qF||(qF=1,function(e,t){(function(o,a,c){e.exports=a(_n(),T_())})(Dt,function(o){return function(){var a=o,c=a.lib,u=c.Hasher,h=a.x64,f=h.Word,m=h.WordArray,g=a.algo;function _(){return f.create.apply(f,arguments)}var y=[_(1116352408,3609767458),_(1899447441,602891725),_(3049323471,3964484399),_(3921009573,2173295548),_(961987163,4081628472),_(1508970993,3053834265),_(2453635748,2937671579),_(2870763221,3664609560),_(3624381080,2734883394),_(310598401,1164996542),_(607225278,1323610764),_(1426881987,3590304994),_(1925078388,4068182383),_(2162078206,991336113),_(2614888103,633803317),_(3248222580,3479774868),_(3835390401,2666613458),_(4022224774,944711139),_(264347078,2341262773),_(604807628,2007800933),_(770255983,1495990901),_(1249150122,1856431235),_(1555081692,3175218132),_(1996064986,2198950837),_(2554220882,3999719339),_(2821834349,766784016),_(2952996808,2566594879),_(3210313671,3203337956),_(3336571891,1034457026),_(3584528711,2466948901),_(113926993,3758326383),_(338241895,168717936),_(666307205,1188179964),_(773529912,1546045734),_(1294757372,1522805485),_(1396182291,2643833823),_(1695183700,2343527390),_(1986661051,1014477480),_(2177026350,1206759142),_(2456956037,344077627),_(2730485921,1290863460),_(2820302411,3158454273),_(3259730800,3505952657),_(3345764771,106217008),_(3516065817,3606008344),_(3600352804,1432725776),_(4094571909,1467031594),_(275423344,851169720),_(430227734,3100823752),_(506948616,1363258195),_(659060556,3750685593),_(883997877,3785050280),_(958139571,3318307427),_(1322822218,3812723403),_(1537002063,2003034995),_(1747873779,3602036899),_(1955562222,1575990012),_(2024104815,1125592928),_(2227730452,2716904306),_(2361852424,442776044),_(2428436474,593698344),_(2756734187,3733110249),_(3204031479,2999351573),_(3329325298,3815920427),_(3391569614,3928383900),_(3515267271,566280711),_(3940187606,3454069534),_(4118630271,4000239992),_(116418474,1914138554),_(174292421,2731055270),_(289380356,3203993006),_(460393269,320620315),_(685471733,587496836),_(852142971,1086792851),_(1017036298,365543100),_(1126000580,2618297676),_(1288033470,3409855158),_(1501505948,4234509866),_(1607167915,987167468),_(1816402316,1246189591)],b=[];(function(){for(var I=0;I<80;I++)b[I]=_()})();var A=g.SHA512=u.extend({_doReset:function(){this._hash=new m.init([new f.init(1779033703,4089235720),new f.init(3144134277,2227873595),new f.init(1013904242,4271175723),new f.init(2773480762,1595750129),new f.init(1359893119,2917565137),new f.init(2600822924,725511199),new f.init(528734635,4215389547),new f.init(1541459225,327033209)])},_doProcessBlock:function(I,w){for(var D=this._hash.words,x=D[0],O=D[1],P=D[2],M=D[3],V=D[4],F=D[5],B=D[6],H=D[7],K=x.high,$=x.low,Z=O.high,z=O.low,G=P.high,ee=P.low,re=M.high,oe=M.low,pe=V.high,ue=V.low,me=F.high,fe=F.low,se=B.high,ae=B.low,de=H.high,ce=H.low,we=K,Ie=$,He=Z,Le=z,ft=G,gt=ee,at=re,rt=oe,pt=pe,Ye=ue,yt=me,kt=fe,Lt=se,Xe=ae,qe=de,Ge=ce,nt=0;nt<80;nt++){var mt,bt,wt=b[nt];if(nt<16)bt=wt.high=I[w+nt*2]|0,mt=wt.low=I[w+nt*2+1]|0;else{var Mt=b[nt-15],Yt=Mt.high,Nn=Mt.low,Ei=(Yt>>>1|Nn<<31)^(Yt>>>8|Nn<<24)^Yt>>>7,dr=(Nn>>>1|Yt<<31)^(Nn>>>8|Yt<<24)^(Nn>>>7|Yt<<25),Gn=b[nt-2],mn=Gn.high,xr=Gn.low,Cn=(mn>>>19|xr<<13)^(mn<<3|xr>>>29)^mn>>>6,Xt=(xr>>>19|mn<<13)^(xr<<3|mn>>>29)^(xr>>>6|mn<<26),Jt=b[nt-7],Ro=Jt.high,qi=Jt.low,br=b[nt-16],gn=br.high,Ve=br.low;mt=dr+qi,bt=Ei+Ro+(mt>>>0<dr>>>0?1:0),mt=mt+Xt,bt=bt+Cn+(mt>>>0<Xt>>>0?1:0),mt=mt+Ve,bt=bt+gn+(mt>>>0<Ve>>>0?1:0),wt.high=bt,wt.low=mt}var st=pt&yt^~pt&Lt,vn=Ye&kt^~Ye&Xe,Ft=we&He^we&ft^He&ft,_i=Ie&Le^Ie&gt^Le&gt,Pr=(we>>>28|Ie<<4)^(we<<30|Ie>>>2)^(we<<25|Ie>>>7),Xn=(Ie>>>28|we<<4)^(Ie<<30|we>>>2)^(Ie<<25|we>>>7),_t=(pt>>>14|Ye<<18)^(pt>>>18|Ye<<14)^(pt<<23|Ye>>>9),Qt=(Ye>>>14|pt<<18)^(Ye>>>18|pt<<14)^(Ye<<23|pt>>>9),an=y[nt],_r=an.high,ci=an.low,Tr=Ge+Qt,Dr=qe+_t+(Tr>>>0<Ge>>>0?1:0),Tr=Tr+vn,Dr=Dr+st+(Tr>>>0<vn>>>0?1:0),Tr=Tr+ci,Dr=Dr+_r+(Tr>>>0<ci>>>0?1:0),Tr=Tr+mt,Dr=Dr+bt+(Tr>>>0<mt>>>0?1:0),xi=Xn+_i,Xi=Pr+Ft+(xi>>>0<Xn>>>0?1:0);qe=Lt,Ge=Xe,Lt=yt,Xe=kt,yt=pt,kt=Ye,Ye=rt+Tr|0,pt=at+Dr+(Ye>>>0<rt>>>0?1:0)|0,at=ft,rt=gt,ft=He,gt=Le,He=we,Le=Ie,Ie=Tr+xi|0,we=Dr+Xi+(Ie>>>0<Tr>>>0?1:0)|0}$=x.low=$+Ie,x.high=K+we+($>>>0<Ie>>>0?1:0),z=O.low=z+Le,O.high=Z+He+(z>>>0<Le>>>0?1:0),ee=P.low=ee+gt,P.high=G+ft+(ee>>>0<gt>>>0?1:0),oe=M.low=oe+rt,M.high=re+at+(oe>>>0<rt>>>0?1:0),ue=V.low=ue+Ye,V.high=pe+pt+(ue>>>0<Ye>>>0?1:0),fe=F.low=fe+kt,F.high=me+yt+(fe>>>0<kt>>>0?1:0),ae=B.low=ae+Xe,B.high=se+Lt+(ae>>>0<Xe>>>0?1:0),ce=H.low=ce+Ge,H.high=de+qe+(ce>>>0<Ge>>>0?1:0)},_doFinalize:function(){var I=this._data,w=I.words,D=this._nDataBytes*8,x=I.sigBytes*8;w[x>>>5]|=128<<24-x%32,w[(x+128>>>10<<5)+30]=Math.floor(D/4294967296),w[(x+128>>>10<<5)+31]=D,I.sigBytes=w.length*4,this._process();var O=this._hash.toX32();return O},clone:function(){var I=u.clone.call(this);return I._hash=this._hash.clone(),I},blockSize:1024/32});a.SHA512=u._createHelper(A),a.HmacSHA512=u._createHmacHelper(A)}(),o.SHA512})}(oT)),oT.exports}var aT={exports:{}},XF;function Lpe(){return XF||(XF=1,function(e,t){(function(o,a,c){e.exports=a(_n(),T_(),y5())})(Dt,function(o){return function(){var a=o,c=a.x64,u=c.Word,h=c.WordArray,f=a.algo,m=f.SHA512,g=f.SHA384=m.extend({_doReset:function(){this._hash=new h.init([new u.init(3418070365,3238371032),new u.init(1654270250,914150663),new u.init(2438529370,812702999),new u.init(355462360,4144912697),new u.init(1731405415,4290775857),new u.init(2394180231,1750603025),new u.init(3675008525,1694076839),new u.init(1203062813,3204075428)])},_doFinalize:function(){var _=m._doFinalize.call(this);return _.sigBytes-=16,_}});a.SHA384=m._createHelper(g),a.HmacSHA384=m._createHmacHelper(g)}(),o.SHA384})}(aT)),aT.exports}var sT={exports:{}},JF;function Mpe(){return JF||(JF=1,function(e,t){(function(o,a,c){e.exports=a(_n(),T_())})(Dt,function(o){return function(a){var c=o,u=c.lib,h=u.WordArray,f=u.Hasher,m=c.x64,g=m.Word,_=c.algo,y=[],b=[],A=[];(function(){for(var D=1,x=0,O=0;O<24;O++){y[D+5*x]=(O+1)*(O+2)/2%64;var P=x%5,M=(2*D+3*x)%5;D=P,x=M}for(var D=0;D<5;D++)for(var x=0;x<5;x++)b[D+5*x]=x+(2*D+3*x)%5*5;for(var V=1,F=0;F<24;F++){for(var B=0,H=0,K=0;K<7;K++){if(V&1){var $=(1<<K)-1;$<32?H^=1<<$:B^=1<<$-32}V&128?V=V<<1^113:V<<=1}A[F]=g.create(B,H)}})();var I=[];(function(){for(var D=0;D<25;D++)I[D]=g.create()})();var w=_.SHA3=f.extend({cfg:f.cfg.extend({outputLength:512}),_doReset:function(){for(var D=this._state=[],x=0;x<25;x++)D[x]=new g.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(D,x){for(var O=this._state,P=this.blockSize/2,M=0;M<P;M++){var V=D[x+2*M],F=D[x+2*M+1];V=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360,F=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360;var B=O[M];B.high^=F,B.low^=V}for(var H=0;H<24;H++){for(var K=0;K<5;K++){for(var $=0,Z=0,z=0;z<5;z++){var B=O[K+5*z];$^=B.high,Z^=B.low}var G=I[K];G.high=$,G.low=Z}for(var K=0;K<5;K++)for(var ee=I[(K+4)%5],re=I[(K+1)%5],oe=re.high,pe=re.low,$=ee.high^(oe<<1|pe>>>31),Z=ee.low^(pe<<1|oe>>>31),z=0;z<5;z++){var B=O[K+5*z];B.high^=$,B.low^=Z}for(var ue=1;ue<25;ue++){var $,Z,B=O[ue],me=B.high,fe=B.low,se=y[ue];se<32?($=me<<se|fe>>>32-se,Z=fe<<se|me>>>32-se):($=fe<<se-32|me>>>64-se,Z=me<<se-32|fe>>>64-se);var ae=I[b[ue]];ae.high=$,ae.low=Z}var de=I[0],ce=O[0];de.high=ce.high,de.low=ce.low;for(var K=0;K<5;K++)for(var z=0;z<5;z++){var ue=K+5*z,B=O[ue],we=I[ue],Ie=I[(K+1)%5+5*z],He=I[(K+2)%5+5*z];B.high=we.high^~Ie.high&He.high,B.low=we.low^~Ie.low&He.low}var B=O[0],Le=A[H];B.high^=Le.high,B.low^=Le.low}},_doFinalize:function(){var D=this._data,x=D.words;this._nDataBytes*8;var O=D.sigBytes*8,P=this.blockSize*32;x[O>>>5]|=1<<24-O%32,x[(a.ceil((O+1)/P)*P>>>5)-1]|=128,D.sigBytes=x.length*4,this._process();for(var M=this._state,V=this.cfg.outputLength/8,F=V/8,B=[],H=0;H<F;H++){var K=M[H],$=K.high,Z=K.low;$=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360,Z=(Z<<8|Z>>>24)&16711935|(Z<<24|Z>>>8)&4278255360,B.push(Z),B.push($)}return new h.init(B,V)},clone:function(){for(var D=f.clone.call(this),x=D._state=this._state.slice(0),O=0;O<25;O++)x[O]=x[O].clone();return D}});c.SHA3=f._createHelper(w),c.HmacSHA3=f._createHmacHelper(w)}(Math),o.SHA3})}(sT)),sT.exports}var cT={exports:{}},QF;function Upe(){return QF||(QF=1,function(e,t){(function(o,a){e.exports=a(_n())})(Dt,function(o){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(a){var c=o,u=c.lib,h=u.WordArray,f=u.Hasher,m=c.algo,g=h.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),_=h.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),y=h.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),b=h.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),A=h.create([0,1518500249,1859775393,2400959708,2840853838]),I=h.create([1352829926,1548603684,1836072691,2053994217,0]),w=m.RIPEMD160=f.extend({_doReset:function(){this._hash=h.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(F,B){for(var H=0;H<16;H++){var K=B+H,$=F[K];F[K]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360}var Z=this._hash.words,z=A.words,G=I.words,ee=g.words,re=_.words,oe=y.words,pe=b.words,ue,me,fe,se,ae,de,ce,we,Ie,He;de=ue=Z[0],ce=me=Z[1],we=fe=Z[2],Ie=se=Z[3],He=ae=Z[4];for(var Le,H=0;H<80;H+=1)Le=ue+F[B+ee[H]]|0,H<16?Le+=D(me,fe,se)+z[0]:H<32?Le+=x(me,fe,se)+z[1]:H<48?Le+=O(me,fe,se)+z[2]:H<64?Le+=P(me,fe,se)+z[3]:Le+=M(me,fe,se)+z[4],Le=Le|0,Le=V(Le,oe[H]),Le=Le+ae|0,ue=ae,ae=se,se=V(fe,10),fe=me,me=Le,Le=de+F[B+re[H]]|0,H<16?Le+=M(ce,we,Ie)+G[0]:H<32?Le+=P(ce,we,Ie)+G[1]:H<48?Le+=O(ce,we,Ie)+G[2]:H<64?Le+=x(ce,we,Ie)+G[3]:Le+=D(ce,we,Ie)+G[4],Le=Le|0,Le=V(Le,pe[H]),Le=Le+He|0,de=He,He=Ie,Ie=V(we,10),we=ce,ce=Le;Le=Z[1]+fe+Ie|0,Z[1]=Z[2]+se+He|0,Z[2]=Z[3]+ae+de|0,Z[3]=Z[4]+ue+ce|0,Z[4]=Z[0]+me+we|0,Z[0]=Le},_doFinalize:function(){var F=this._data,B=F.words,H=this._nDataBytes*8,K=F.sigBytes*8;B[K>>>5]|=128<<24-K%32,B[(K+64>>>9<<4)+14]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360,F.sigBytes=(B.length+1)*4,this._process();for(var $=this._hash,Z=$.words,z=0;z<5;z++){var G=Z[z];Z[z]=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360}return $},clone:function(){var F=f.clone.call(this);return F._hash=this._hash.clone(),F}});function D(F,B,H){return F^B^H}function x(F,B,H){return F&B|~F&H}function O(F,B,H){return(F|~B)^H}function P(F,B,H){return F&H|B&~H}function M(F,B,H){return F^(B|~H)}function V(F,B){return F<<B|F>>>32-B}c.RIPEMD160=f._createHelper(w),c.HmacRIPEMD160=f._createHmacHelper(w)}(),o.RIPEMD160})}(cT)),cT.exports}var lT={exports:{}},ZF;function jw(){return ZF||(ZF=1,function(e,t){(function(o,a){e.exports=a(_n())})(Dt,function(o){(function(){var a=o,c=a.lib,u=c.Base,h=a.enc,f=h.Utf8,m=a.algo;m.HMAC=u.extend({init:function(g,_){g=this._hasher=new g.init,typeof _=="string"&&(_=f.parse(_));var y=g.blockSize,b=y*4;_.sigBytes>b&&(_=g.finalize(_)),_.clamp();for(var A=this._oKey=_.clone(),I=this._iKey=_.clone(),w=A.words,D=I.words,x=0;x<y;x++)w[x]^=1549556828,D[x]^=909522486;A.sigBytes=I.sigBytes=b,this.reset()},reset:function(){var g=this._hasher;g.reset(),g.update(this._iKey)},update:function(g){return this._hasher.update(g),this},finalize:function(g){var _=this._hasher,y=_.finalize(g);_.reset();var b=_.finalize(this._oKey.clone().concat(y));return b}})})()})}(lT)),lT.exports}var uT={exports:{}},eV;function Fpe(){return eV||(eV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),Vw(),jw())})(Dt,function(o){return function(){var a=o,c=a.lib,u=c.Base,h=c.WordArray,f=a.algo,m=f.SHA1,g=f.HMAC,_=f.PBKDF2=u.extend({cfg:u.extend({keySize:128/32,hasher:m,iterations:1}),init:function(y){this.cfg=this.cfg.extend(y)},compute:function(y,b){for(var A=this.cfg,I=g.create(A.hasher,y),w=h.create(),D=h.create([1]),x=w.words,O=D.words,P=A.keySize,M=A.iterations;x.length<P;){var V=I.update(b).finalize(D);I.reset();for(var F=V.words,B=F.length,H=V,K=1;K<M;K++){H=I.finalize(H),I.reset();for(var $=H.words,Z=0;Z<B;Z++)F[Z]^=$[Z]}w.concat(V),O[0]++}return w.sigBytes=P*4,w}});a.PBKDF2=function(y,b,A){return _.create(A).compute(y,b)}}(),o.PBKDF2})}(uT)),uT.exports}var dT={exports:{}},tV;function Yu(){return tV||(tV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),Vw(),jw())})(Dt,function(o){return function(){var a=o,c=a.lib,u=c.Base,h=c.WordArray,f=a.algo,m=f.MD5,g=f.EvpKDF=u.extend({cfg:u.extend({keySize:128/32,hasher:m,iterations:1}),init:function(_){this.cfg=this.cfg.extend(_)},compute:function(_,y){for(var b,A=this.cfg,I=A.hasher.create(),w=h.create(),D=w.words,x=A.keySize,O=A.iterations;D.length<x;){b&&I.update(b),b=I.update(_).finalize(y),I.reset();for(var P=1;P<O;P++)b=I.finalize(b),I.reset();w.concat(b)}return w.sigBytes=x*4,w}});a.EvpKDF=function(_,y,b){return g.create(b).compute(_,y)}}(),o.EvpKDF})}(dT)),dT.exports}var hT={exports:{}},nV;function Yi(){return nV||(nV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),Yu())})(Dt,function(o){o.lib.Cipher||function(a){var c=o,u=c.lib,h=u.Base,f=u.WordArray,m=u.BufferedBlockAlgorithm,g=c.enc;g.Utf8;var _=g.Base64,y=c.algo,b=y.EvpKDF,A=u.Cipher=m.extend({cfg:h.extend(),createEncryptor:function($,Z){return this.create(this._ENC_XFORM_MODE,$,Z)},createDecryptor:function($,Z){return this.create(this._DEC_XFORM_MODE,$,Z)},init:function($,Z,z){this.cfg=this.cfg.extend(z),this._xformMode=$,this._key=Z,this.reset()},reset:function(){m.reset.call(this),this._doReset()},process:function($){return this._append($),this._process()},finalize:function($){$&&this._append($);var Z=this._doFinalize();return Z},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function $(Z){return typeof Z=="string"?K:F}return function(Z){return{encrypt:function(z,G,ee){return $(G).encrypt(Z,z,G,ee)},decrypt:function(z,G,ee){return $(G).decrypt(Z,z,G,ee)}}}}()});u.StreamCipher=A.extend({_doFinalize:function(){var $=this._process(!0);return $},blockSize:1});var I=c.mode={},w=u.BlockCipherMode=h.extend({createEncryptor:function($,Z){return this.Encryptor.create($,Z)},createDecryptor:function($,Z){return this.Decryptor.create($,Z)},init:function($,Z){this._cipher=$,this._iv=Z}}),D=I.CBC=function(){var $=w.extend();$.Encryptor=$.extend({processBlock:function(z,G){var ee=this._cipher,re=ee.blockSize;Z.call(this,z,G,re),ee.encryptBlock(z,G),this._prevBlock=z.slice(G,G+re)}}),$.Decryptor=$.extend({processBlock:function(z,G){var ee=this._cipher,re=ee.blockSize,oe=z.slice(G,G+re);ee.decryptBlock(z,G),Z.call(this,z,G,re),this._prevBlock=oe}});function Z(z,G,ee){var re,oe=this._iv;oe?(re=oe,this._iv=a):re=this._prevBlock;for(var pe=0;pe<ee;pe++)z[G+pe]^=re[pe]}return $}(),x=c.pad={},O=x.Pkcs7={pad:function($,Z){for(var z=Z*4,G=z-$.sigBytes%z,ee=G<<24|G<<16|G<<8|G,re=[],oe=0;oe<G;oe+=4)re.push(ee);var pe=f.create(re,G);$.concat(pe)},unpad:function($){var Z=$.words[$.sigBytes-1>>>2]&255;$.sigBytes-=Z}};u.BlockCipher=A.extend({cfg:A.cfg.extend({mode:D,padding:O}),reset:function(){var $;A.reset.call(this);var Z=this.cfg,z=Z.iv,G=Z.mode;this._xformMode==this._ENC_XFORM_MODE?$=G.createEncryptor:($=G.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==$?this._mode.init(this,z&&z.words):(this._mode=$.call(G,this,z&&z.words),this._mode.__creator=$)},_doProcessBlock:function($,Z){this._mode.processBlock($,Z)},_doFinalize:function(){var $,Z=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Z.pad(this._data,this.blockSize),$=this._process(!0)):($=this._process(!0),Z.unpad($)),$},blockSize:128/32});var P=u.CipherParams=h.extend({init:function($){this.mixIn($)},toString:function($){return($||this.formatter).stringify(this)}}),M=c.format={},V=M.OpenSSL={stringify:function($){var Z,z=$.ciphertext,G=$.salt;return G?Z=f.create([1398893684,1701076831]).concat(G).concat(z):Z=z,Z.toString(_)},parse:function($){var Z,z=_.parse($),G=z.words;return G[0]==1398893684&&G[1]==1701076831&&(Z=f.create(G.slice(2,4)),G.splice(0,4),z.sigBytes-=16),P.create({ciphertext:z,salt:Z})}},F=u.SerializableCipher=h.extend({cfg:h.extend({format:V}),encrypt:function($,Z,z,G){G=this.cfg.extend(G);var ee=$.createEncryptor(z,G),re=ee.finalize(Z),oe=ee.cfg;return P.create({ciphertext:re,key:z,iv:oe.iv,algorithm:$,mode:oe.mode,padding:oe.padding,blockSize:$.blockSize,formatter:G.format})},decrypt:function($,Z,z,G){G=this.cfg.extend(G),Z=this._parse(Z,G.format);var ee=$.createDecryptor(z,G).finalize(Z.ciphertext);return ee},_parse:function($,Z){return typeof $=="string"?Z.parse($,this):$}}),B=c.kdf={},H=B.OpenSSL={execute:function($,Z,z,G){G||(G=f.random(64/8));var ee=b.create({keySize:Z+z}).compute($,G),re=f.create(ee.words.slice(Z),z*4);return ee.sigBytes=Z*4,P.create({key:ee,iv:re,salt:G})}},K=u.PasswordBasedCipher=F.extend({cfg:F.cfg.extend({kdf:H}),encrypt:function($,Z,z,G){G=this.cfg.extend(G);var ee=G.kdf.execute(z,$.keySize,$.ivSize);G.iv=ee.iv;var re=F.encrypt.call(this,$,Z,ee.key,G);return re.mixIn(ee),re},decrypt:function($,Z,z,G){G=this.cfg.extend(G),Z=this._parse(Z,G.format);var ee=G.kdf.execute(z,$.keySize,$.ivSize,Z.salt);G.iv=ee.iv;var re=F.decrypt.call(this,$,Z,ee.key,G);return re}})}()})}(hT)),hT.exports}var pT={exports:{}},rV;function Vpe(){return rV||(rV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),Yi())})(Dt,function(o){return o.mode.CFB=function(){var a=o.lib.BlockCipherMode.extend();a.Encryptor=a.extend({processBlock:function(u,h){var f=this._cipher,m=f.blockSize;c.call(this,u,h,m,f),this._prevBlock=u.slice(h,h+m)}}),a.Decryptor=a.extend({processBlock:function(u,h){var f=this._cipher,m=f.blockSize,g=u.slice(h,h+m);c.call(this,u,h,m,f),this._prevBlock=g}});function c(u,h,f,m){var g,_=this._iv;_?(g=_.slice(0),this._iv=void 0):g=this._prevBlock,m.encryptBlock(g,0);for(var y=0;y<f;y++)u[h+y]^=g[y]}return a}(),o.mode.CFB})}(pT)),pT.exports}var fT={exports:{}},iV;function jpe(){return iV||(iV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),Yi())})(Dt,function(o){return o.mode.CTR=function(){var a=o.lib.BlockCipherMode.extend(),c=a.Encryptor=a.extend({processBlock:function(u,h){var f=this._cipher,m=f.blockSize,g=this._iv,_=this._counter;g&&(_=this._counter=g.slice(0),this._iv=void 0);var y=_.slice(0);f.encryptBlock(y,0),_[m-1]=_[m-1]+1|0;for(var b=0;b<m;b++)u[h+b]^=y[b]}});return a.Decryptor=c,a}(),o.mode.CTR})}(fT)),fT.exports}var mT={exports:{}},oV;function Bpe(){return oV||(oV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),Yi())})(Dt,function(o){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return o.mode.CTRGladman=function(){var a=o.lib.BlockCipherMode.extend();function c(f){if((f>>24&255)===255){var m=f>>16&255,g=f>>8&255,_=f&255;m===255?(m=0,g===255?(g=0,_===255?_=0:++_):++g):++m,f=0,f+=m<<16,f+=g<<8,f+=_}else f+=1<<24;return f}function u(f){return(f[0]=c(f[0]))===0&&(f[1]=c(f[1])),f}var h=a.Encryptor=a.extend({processBlock:function(f,m){var g=this._cipher,_=g.blockSize,y=this._iv,b=this._counter;y&&(b=this._counter=y.slice(0),this._iv=void 0),u(b);var A=b.slice(0);g.encryptBlock(A,0);for(var I=0;I<_;I++)f[m+I]^=A[I]}});return a.Decryptor=h,a}(),o.mode.CTRGladman})}(mT)),mT.exports}var gT={exports:{}},aV;function $pe(){return aV||(aV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),Yi())})(Dt,function(o){return o.mode.OFB=function(){var a=o.lib.BlockCipherMode.extend(),c=a.Encryptor=a.extend({processBlock:function(u,h){var f=this._cipher,m=f.blockSize,g=this._iv,_=this._keystream;g&&(_=this._keystream=g.slice(0),this._iv=void 0),f.encryptBlock(_,0);for(var y=0;y<m;y++)u[h+y]^=_[y]}});return a.Decryptor=c,a}(),o.mode.OFB})}(gT)),gT.exports}var vT={exports:{}},sV;function Hpe(){return sV||(sV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),Yi())})(Dt,function(o){return o.mode.ECB=function(){var a=o.lib.BlockCipherMode.extend();return a.Encryptor=a.extend({processBlock:function(c,u){this._cipher.encryptBlock(c,u)}}),a.Decryptor=a.extend({processBlock:function(c,u){this._cipher.decryptBlock(c,u)}}),a}(),o.mode.ECB})}(vT)),vT.exports}var ET={exports:{}},cV;function Wpe(){return cV||(cV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),Yi())})(Dt,function(o){return o.pad.AnsiX923={pad:function(a,c){var u=a.sigBytes,h=c*4,f=h-u%h,m=u+f-1;a.clamp(),a.words[m>>>2]|=f<<24-m%4*8,a.sigBytes+=f},unpad:function(a){var c=a.words[a.sigBytes-1>>>2]&255;a.sigBytes-=c}},o.pad.Ansix923})}(ET)),ET.exports}var _T={exports:{}},lV;function Gpe(){return lV||(lV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),Yi())})(Dt,function(o){return o.pad.Iso10126={pad:function(a,c){var u=c*4,h=u-a.sigBytes%u;a.concat(o.lib.WordArray.random(h-1)).concat(o.lib.WordArray.create([h<<24],1))},unpad:function(a){var c=a.words[a.sigBytes-1>>>2]&255;a.sigBytes-=c}},o.pad.Iso10126})}(_T)),_T.exports}var ST={exports:{}},uV;function zpe(){return uV||(uV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),Yi())})(Dt,function(o){return o.pad.Iso97971={pad:function(a,c){a.concat(o.lib.WordArray.create([2147483648],1)),o.pad.ZeroPadding.pad(a,c)},unpad:function(a){o.pad.ZeroPadding.unpad(a),a.sigBytes--}},o.pad.Iso97971})}(ST)),ST.exports}var yT={exports:{}},dV;function Kpe(){return dV||(dV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),Yi())})(Dt,function(o){return o.pad.ZeroPadding={pad:function(a,c){var u=c*4;a.clamp(),a.sigBytes+=u-(a.sigBytes%u||u)},unpad:function(a){for(var c=a.words,u=a.sigBytes-1,u=a.sigBytes-1;u>=0;u--)if(c[u>>>2]>>>24-u%4*8&255){a.sigBytes=u+1;break}}},o.pad.ZeroPadding})}(yT)),yT.exports}var CT={exports:{}},hV;function Ype(){return hV||(hV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),Yi())})(Dt,function(o){return o.pad.NoPadding={pad:function(){},unpad:function(){}},o.pad.NoPadding})}(CT)),CT.exports}var bT={exports:{}},pV;function qpe(){return pV||(pV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),Yi())})(Dt,function(o){return function(a){var c=o,u=c.lib,h=u.CipherParams,f=c.enc,m=f.Hex,g=c.format;g.Hex={stringify:function(_){return _.ciphertext.toString(m)},parse:function(_){var y=m.parse(_);return h.create({ciphertext:y})}}}(),o.format.Hex})}(bT)),bT.exports}var TT={exports:{}},fV;function Xpe(){return fV||(fV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),sp(),cp(),Yu(),Yi())})(Dt,function(o){return function(){var a=o,c=a.lib,u=c.BlockCipher,h=a.algo,f=[],m=[],g=[],_=[],y=[],b=[],A=[],I=[],w=[],D=[];(function(){for(var P=[],M=0;M<256;M++)M<128?P[M]=M<<1:P[M]=M<<1^283;for(var V=0,F=0,M=0;M<256;M++){var B=F^F<<1^F<<2^F<<3^F<<4;B=B>>>8^B&255^99,f[V]=B,m[B]=V;var H=P[V],K=P[H],$=P[K],Z=P[B]*257^B*16843008;g[V]=Z<<24|Z>>>8,_[V]=Z<<16|Z>>>16,y[V]=Z<<8|Z>>>24,b[V]=Z;var Z=$*16843009^K*65537^H*257^V*16843008;A[B]=Z<<24|Z>>>8,I[B]=Z<<16|Z>>>16,w[B]=Z<<8|Z>>>24,D[B]=Z,V?(V=H^P[P[P[$^H]]],F^=P[P[F]]):V=F=1}})();var x=[0,1,2,4,8,16,32,64,128,27,54],O=h.AES=u.extend({_doReset:function(){var P;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var M=this._keyPriorReset=this._key,V=M.words,F=M.sigBytes/4,B=this._nRounds=F+6,H=(B+1)*4,K=this._keySchedule=[],$=0;$<H;$++)$<F?K[$]=V[$]:(P=K[$-1],$%F?F>6&&$%F==4&&(P=f[P>>>24]<<24|f[P>>>16&255]<<16|f[P>>>8&255]<<8|f[P&255]):(P=P<<8|P>>>24,P=f[P>>>24]<<24|f[P>>>16&255]<<16|f[P>>>8&255]<<8|f[P&255],P^=x[$/F|0]<<24),K[$]=K[$-F]^P);for(var Z=this._invKeySchedule=[],z=0;z<H;z++){var $=H-z;if(z%4)var P=K[$];else var P=K[$-4];z<4||$<=4?Z[z]=P:Z[z]=A[f[P>>>24]]^I[f[P>>>16&255]]^w[f[P>>>8&255]]^D[f[P&255]]}}},encryptBlock:function(P,M){this._doCryptBlock(P,M,this._keySchedule,g,_,y,b,f)},decryptBlock:function(P,M){var V=P[M+1];P[M+1]=P[M+3],P[M+3]=V,this._doCryptBlock(P,M,this._invKeySchedule,A,I,w,D,m);var V=P[M+1];P[M+1]=P[M+3],P[M+3]=V},_doCryptBlock:function(P,M,V,F,B,H,K,$){for(var Z=this._nRounds,z=P[M]^V[0],G=P[M+1]^V[1],ee=P[M+2]^V[2],re=P[M+3]^V[3],oe=4,pe=1;pe<Z;pe++){var ue=F[z>>>24]^B[G>>>16&255]^H[ee>>>8&255]^K[re&255]^V[oe++],me=F[G>>>24]^B[ee>>>16&255]^H[re>>>8&255]^K[z&255]^V[oe++],fe=F[ee>>>24]^B[re>>>16&255]^H[z>>>8&255]^K[G&255]^V[oe++],se=F[re>>>24]^B[z>>>16&255]^H[G>>>8&255]^K[ee&255]^V[oe++];z=ue,G=me,ee=fe,re=se}var ue=($[z>>>24]<<24|$[G>>>16&255]<<16|$[ee>>>8&255]<<8|$[re&255])^V[oe++],me=($[G>>>24]<<24|$[ee>>>16&255]<<16|$[re>>>8&255]<<8|$[z&255])^V[oe++],fe=($[ee>>>24]<<24|$[re>>>16&255]<<16|$[z>>>8&255]<<8|$[G&255])^V[oe++],se=($[re>>>24]<<24|$[z>>>16&255]<<16|$[G>>>8&255]<<8|$[ee&255])^V[oe++];P[M]=ue,P[M+1]=me,P[M+2]=fe,P[M+3]=se},keySize:256/32});a.AES=u._createHelper(O)}(),o.AES})}(TT)),TT.exports}var RT={exports:{}},mV;function Jpe(){return mV||(mV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),sp(),cp(),Yu(),Yi())})(Dt,function(o){return function(){var a=o,c=a.lib,u=c.WordArray,h=c.BlockCipher,f=a.algo,m=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],g=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],_=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],y=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],b=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],A=f.DES=h.extend({_doReset:function(){for(var x=this._key,O=x.words,P=[],M=0;M<56;M++){var V=m[M]-1;P[M]=O[V>>>5]>>>31-V%32&1}for(var F=this._subKeys=[],B=0;B<16;B++){for(var H=F[B]=[],K=_[B],M=0;M<24;M++)H[M/6|0]|=P[(g[M]-1+K)%28]<<31-M%6,H[4+(M/6|0)]|=P[28+(g[M+24]-1+K)%28]<<31-M%6;H[0]=H[0]<<1|H[0]>>>31;for(var M=1;M<7;M++)H[M]=H[M]>>>(M-1)*4+3;H[7]=H[7]<<5|H[7]>>>27}for(var $=this._invSubKeys=[],M=0;M<16;M++)$[M]=F[15-M]},encryptBlock:function(x,O){this._doCryptBlock(x,O,this._subKeys)},decryptBlock:function(x,O){this._doCryptBlock(x,O,this._invSubKeys)},_doCryptBlock:function(x,O,P){this._lBlock=x[O],this._rBlock=x[O+1],I.call(this,4,252645135),I.call(this,16,65535),w.call(this,2,858993459),w.call(this,8,16711935),I.call(this,1,1431655765);for(var M=0;M<16;M++){for(var V=P[M],F=this._lBlock,B=this._rBlock,H=0,K=0;K<8;K++)H|=y[K][((B^V[K])&b[K])>>>0];this._lBlock=B,this._rBlock=F^H}var $=this._lBlock;this._lBlock=this._rBlock,this._rBlock=$,I.call(this,1,1431655765),w.call(this,8,16711935),w.call(this,2,858993459),I.call(this,16,65535),I.call(this,4,252645135),x[O]=this._lBlock,x[O+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function I(x,O){var P=(this._lBlock>>>x^this._rBlock)&O;this._rBlock^=P,this._lBlock^=P<<x}function w(x,O){var P=(this._rBlock>>>x^this._lBlock)&O;this._lBlock^=P,this._rBlock^=P<<x}a.DES=h._createHelper(A);var D=f.TripleDES=h.extend({_doReset:function(){var x=this._key,O=x.words;if(O.length!==2&&O.length!==4&&O.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var P=O.slice(0,2),M=O.length<4?O.slice(0,2):O.slice(2,4),V=O.length<6?O.slice(0,2):O.slice(4,6);this._des1=A.createEncryptor(u.create(P)),this._des2=A.createEncryptor(u.create(M)),this._des3=A.createEncryptor(u.create(V))},encryptBlock:function(x,O){this._des1.encryptBlock(x,O),this._des2.decryptBlock(x,O),this._des3.encryptBlock(x,O)},decryptBlock:function(x,O){this._des3.decryptBlock(x,O),this._des2.encryptBlock(x,O),this._des1.decryptBlock(x,O)},keySize:192/32,ivSize:64/32,blockSize:64/32});a.TripleDES=h._createHelper(D)}(),o.TripleDES})}(RT)),RT.exports}var IT={exports:{}},gV;function Qpe(){return gV||(gV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),sp(),cp(),Yu(),Yi())})(Dt,function(o){return function(){var a=o,c=a.lib,u=c.StreamCipher,h=a.algo,f=h.RC4=u.extend({_doReset:function(){for(var _=this._key,y=_.words,b=_.sigBytes,A=this._S=[],I=0;I<256;I++)A[I]=I;for(var I=0,w=0;I<256;I++){var D=I%b,x=y[D>>>2]>>>24-D%4*8&255;w=(w+A[I]+x)%256;var O=A[I];A[I]=A[w],A[w]=O}this._i=this._j=0},_doProcessBlock:function(_,y){_[y]^=m.call(this)},keySize:256/32,ivSize:0});function m(){for(var _=this._S,y=this._i,b=this._j,A=0,I=0;I<4;I++){y=(y+1)%256,b=(b+_[y])%256;var w=_[y];_[y]=_[b],_[b]=w,A|=_[(_[y]+_[b])%256]<<24-I*8}return this._i=y,this._j=b,A}a.RC4=u._createHelper(f);var g=h.RC4Drop=f.extend({cfg:f.cfg.extend({drop:192}),_doReset:function(){f._doReset.call(this);for(var _=this.cfg.drop;_>0;_--)m.call(this)}});a.RC4Drop=u._createHelper(g)}(),o.RC4})}(IT)),IT.exports}var wT={exports:{}},vV;function Zpe(){return vV||(vV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),sp(),cp(),Yu(),Yi())})(Dt,function(o){return function(){var a=o,c=a.lib,u=c.StreamCipher,h=a.algo,f=[],m=[],g=[],_=h.Rabbit=u.extend({_doReset:function(){for(var b=this._key.words,A=this.cfg.iv,I=0;I<4;I++)b[I]=(b[I]<<8|b[I]>>>24)&16711935|(b[I]<<24|b[I]>>>8)&4278255360;var w=this._X=[b[0],b[3]<<16|b[2]>>>16,b[1],b[0]<<16|b[3]>>>16,b[2],b[1]<<16|b[0]>>>16,b[3],b[2]<<16|b[1]>>>16],D=this._C=[b[2]<<16|b[2]>>>16,b[0]&4294901760|b[1]&65535,b[3]<<16|b[3]>>>16,b[1]&4294901760|b[2]&65535,b[0]<<16|b[0]>>>16,b[2]&4294901760|b[3]&65535,b[1]<<16|b[1]>>>16,b[3]&4294901760|b[0]&65535];this._b=0;for(var I=0;I<4;I++)y.call(this);for(var I=0;I<8;I++)D[I]^=w[I+4&7];if(A){var x=A.words,O=x[0],P=x[1],M=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,V=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,F=M>>>16|V&4294901760,B=V<<16|M&65535;D[0]^=M,D[1]^=F,D[2]^=V,D[3]^=B,D[4]^=M,D[5]^=F,D[6]^=V,D[7]^=B;for(var I=0;I<4;I++)y.call(this)}},_doProcessBlock:function(b,A){var I=this._X;y.call(this),f[0]=I[0]^I[5]>>>16^I[3]<<16,f[1]=I[2]^I[7]>>>16^I[5]<<16,f[2]=I[4]^I[1]>>>16^I[7]<<16,f[3]=I[6]^I[3]>>>16^I[1]<<16;for(var w=0;w<4;w++)f[w]=(f[w]<<8|f[w]>>>24)&16711935|(f[w]<<24|f[w]>>>8)&4278255360,b[A+w]^=f[w]},blockSize:128/32,ivSize:64/32});function y(){for(var b=this._X,A=this._C,I=0;I<8;I++)m[I]=A[I];A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<m[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<m[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<m[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<m[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<m[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<m[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<m[6]>>>0?1:0)|0,this._b=A[7]>>>0<m[7]>>>0?1:0;for(var I=0;I<8;I++){var w=b[I]+A[I],D=w&65535,x=w>>>16,O=((D*D>>>17)+D*x>>>15)+x*x,P=((w&4294901760)*w|0)+((w&65535)*w|0);g[I]=O^P}b[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,b[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,b[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,b[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,b[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,b[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,b[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,b[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}a.Rabbit=u._createHelper(_)}(),o.Rabbit})}(wT)),wT.exports}var OT={exports:{}},EV;function efe(){return EV||(EV=1,function(e,t){(function(o,a,c){e.exports=a(_n(),sp(),cp(),Yu(),Yi())})(Dt,function(o){return function(){var a=o,c=a.lib,u=c.StreamCipher,h=a.algo,f=[],m=[],g=[],_=h.RabbitLegacy=u.extend({_doReset:function(){var b=this._key.words,A=this.cfg.iv,I=this._X=[b[0],b[3]<<16|b[2]>>>16,b[1],b[0]<<16|b[3]>>>16,b[2],b[1]<<16|b[0]>>>16,b[3],b[2]<<16|b[1]>>>16],w=this._C=[b[2]<<16|b[2]>>>16,b[0]&4294901760|b[1]&65535,b[3]<<16|b[3]>>>16,b[1]&4294901760|b[2]&65535,b[0]<<16|b[0]>>>16,b[2]&4294901760|b[3]&65535,b[1]<<16|b[1]>>>16,b[3]&4294901760|b[0]&65535];this._b=0;for(var D=0;D<4;D++)y.call(this);for(var D=0;D<8;D++)w[D]^=I[D+4&7];if(A){var x=A.words,O=x[0],P=x[1],M=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,V=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,F=M>>>16|V&4294901760,B=V<<16|M&65535;w[0]^=M,w[1]^=F,w[2]^=V,w[3]^=B,w[4]^=M,w[5]^=F,w[6]^=V,w[7]^=B;for(var D=0;D<4;D++)y.call(this)}},_doProcessBlock:function(b,A){var I=this._X;y.call(this),f[0]=I[0]^I[5]>>>16^I[3]<<16,f[1]=I[2]^I[7]>>>16^I[5]<<16,f[2]=I[4]^I[1]>>>16^I[7]<<16,f[3]=I[6]^I[3]>>>16^I[1]<<16;for(var w=0;w<4;w++)f[w]=(f[w]<<8|f[w]>>>24)&16711935|(f[w]<<24|f[w]>>>8)&4278255360,b[A+w]^=f[w]},blockSize:128/32,ivSize:64/32});function y(){for(var b=this._X,A=this._C,I=0;I<8;I++)m[I]=A[I];A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<m[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<m[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<m[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<m[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<m[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<m[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<m[6]>>>0?1:0)|0,this._b=A[7]>>>0<m[7]>>>0?1:0;for(var I=0;I<8;I++){var w=b[I]+A[I],D=w&65535,x=w>>>16,O=((D*D>>>17)+D*x>>>15)+x*x,P=((w&4294901760)*w|0)+((w&65535)*w|0);g[I]=O^P}b[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,b[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,b[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,b[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,b[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,b[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,b[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,b[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}a.RabbitLegacy=u._createHelper(_)}(),o.RabbitLegacy})}(OT)),OT.exports}(function(e,t){(function(o,a,c){e.exports=a(_n(),T_(),xpe(),Ppe(),sp(),Dpe(),cp(),Vw(),S5(),kpe(),y5(),Lpe(),Mpe(),Upe(),jw(),Fpe(),Yu(),Yi(),Vpe(),jpe(),Bpe(),$pe(),Hpe(),Wpe(),Gpe(),zpe(),Kpe(),Ype(),qpe(),Xpe(),Jpe(),Qpe(),Zpe(),efe())})(Dt,function(o){return o})})(_5);var tfe=_5.exports;const _V=Ul(tfe);let C5="U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==";{const e=_V.AES.decrypt("U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==","U2FsdGVkX1/fp5K6GAphzVxz");C5=JSON.parse(e.toString(_V.enc.Utf8))}const St={appId:C5,channel:{}.AGORA_CHANNEL||"test",token:{}.AGORA_TOKEN?{}.AGORA_TOKEN:null};function nfe(){return[{channel:{}.AGORA_CHANNEL_0||"test0",token:{}.AGORA_TOKEN_0},{channel:{}.AGORA_CHANNEL_1||"test1",token:{}.AGORA_TOKEN_1},{channel:{}.AGORA_CHANNEL_2||"test2",token:{}.AGORA_TOKEN_2},{channel:{}.AGORA_CHANNEL_3||"test3",token:{}.AGORA_TOKEN_3},{channel:{}.AGORA_CHANNEL_4||"test4",token:{}.AGORA_TOKEN_4},{channel:{}.AGORA_CHANNEL_5||"test5",token:{}.AGORA_TOKEN_5},{channel:{}.AGORA_CHANNEL_6||"test6",token:{}.AGORA_TOKEN_6},{channel:{}.AGORA_CHANNEL_7||"test7",token:{}.AGORA_TOKEN_7},{channel:{}.AGORA_CHANNEL_8||"test8",token:{}.AGORA_TOKEN_8},{channel:{}.AGORA_CHANNEL_9||"test9",token:{}.AGORA_TOKEN_9}]}const Ts=e=>{LF(String(e));const t=Tpe();return LF(),t},Ys=()=>"https://www.agora.io/en/wp-content/uploads/2022/10/3d-spatial-audio-icon.svg";function Bw({micOn:e,cameraOn:t,renderAction:o,renderLocalUser:a,renderRemoteUsers:c}){const u=ws(),h=y_()||0,f=S.useMemo(()=>Ts(h),[h]),m=S.useMemo(()=>Ys(),[]),g=qs(),_=g.filter(I=>I.hasAudio||I.hasVideo),y=e||t,{localMicrophoneTrack:b}=ip(e),{localCameraTrack:A}=op(t);return rp([b,A]),ne.jsxs(ne.Fragment,{children:[o?o():void 0,ne.jsx(Pw,{published:_.length+(y?1:0),total:g.length+1}),ne.jsxs($a,{children:[u&&(a?a():ne.jsx($a.Item,{children:ne.jsx(xw,{audioTrack:b,cameraOn:t,cover:m,micOn:e,videoTrack:A,children:ne.jsx(Pc,{children:`${f}{${h}}`})})})),c?c():void 0]})]})}const Qg=({children:e,clientConfig:t={mode:"rtc",codec:"vp8"}})=>{const[o]=S.useState(()=>Du.createClient(t));return ne.jsx(u5,{client:o,children:e})},ba=({calling:e,micOn:t,cameraOn:o,setMic:a,setCamera:c,setCalling:u})=>ne.jsx(ne.Fragment,{children:ne.jsxs("div",{className:"inset-0 top-a flex justify-center items-center gap-3 px-6 py-3 bg-#21242c c-coolgray-3",children:[ne.jsxs("div",{className:"flex-1 flex top-0 left-0 h-full items-center gap-3 px-6 py-3",children:[a&&ne.jsx("button",{className:"btn",onClick:()=>a(),children:t?ne.jsx(zhe,{}):ne.jsx(Khe,{})}),c&&ne.jsx("button",{className:"btn",onClick:()=>c(),children:o?ne.jsx(Yhe,{}):ne.jsx(qhe,{})})]}),u&&ne.jsx("button",{className:bw("btn btn-phone",{"btn-phone-active":e}),onClick:()=>u(),children:e?ne.jsx("i",{className:"i-mdi-phone-hangup"}):ne.jsx("i",{className:"i-mdi-phone"})})]})}),SV=e=>{let t;const o=new Set,a=(m,g)=>{const _=typeof m=="function"?m(t):m;if(!Object.is(_,t)){const y=t;t=g??typeof _!="object"?_:Object.assign({},t,_),o.forEach(b=>b(t,y))}},c=()=>t,f={setState:a,getState:c,subscribe:m=>(o.add(m),()=>o.delete(m)),destroy:()=>{o.clear()}};return t=e(a,c,f),f},rfe=e=>e?SV(e):SV;var b5={exports:{}},T5={},R5={exports:{}},I5={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vh=S;function ife(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ofe=typeof Object.is=="function"?Object.is:ife,afe=Vh.useState,sfe=Vh.useEffect,cfe=Vh.useLayoutEffect,lfe=Vh.useDebugValue;function ufe(e,t){var o=t(),a=afe({inst:{value:o,getSnapshot:t}}),c=a[0].inst,u=a[1];return cfe(function(){c.value=o,c.getSnapshot=t,AT(c)&&u({inst:c})},[e,o,t]),sfe(function(){return AT(c)&&u({inst:c}),e(function(){AT(c)&&u({inst:c})})},[e]),lfe(o),o}function AT(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!ofe(e,o)}catch{return!0}}function dfe(e,t){return t()}var hfe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?dfe:ufe;I5.useSyncExternalStore=Vh.useSyncExternalStore!==void 0?Vh.useSyncExternalStore:hfe;R5.exports=I5;var pfe=R5.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_=S,ffe=pfe;function mfe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gfe=typeof Object.is=="function"?Object.is:mfe,vfe=ffe.useSyncExternalStore,Efe=R_.useRef,_fe=R_.useEffect,Sfe=R_.useMemo,yfe=R_.useDebugValue;T5.useSyncExternalStoreWithSelector=function(e,t,o,a,c){var u=Efe(null);if(u.current===null){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=Sfe(function(){function m(A){if(!g){if(g=!0,_=A,A=a(A),c!==void 0&&h.hasValue){var I=h.value;if(c(I,A))return y=I}return y=A}if(I=y,gfe(_,A))return I;var w=a(A);return c!==void 0&&c(I,w)?I:(_=A,y=w)}var g=!1,_,y,b=o===void 0?null:o;return[function(){return m(t())},b===null?void 0:function(){return m(b())}]},[t,o,a,c]);var f=vfe(e,u[0],u[1]);return _fe(function(){h.hasValue=!0,h.value=f},[f]),yfe(f),f};b5.exports=T5;var Cfe=b5.exports;const bfe=Ul(Cfe),{useSyncExternalStoreWithSelector:Tfe}=bfe;function Rfe(e,t=e.getState,o){const a=Tfe(e.subscribe,e.getState,e.getServerState||e.getState,t,o);return S.useDebugValue(a),a}const yV=e=>{const t=typeof e=="function"?rfe(e):e,o=(a,c)=>Rfe(t,a,c);return Object.assign(o,t),o},Ife=e=>e?yV(e):yV,wfe=St.appId,Ofe=nfe(),Ff=Ife((e,t)=>({getRooms:()=>{let{rooms:o}=t();o=Ofe.map(({token:a,channel:c})=>{const u=Du.createClient({mode:"live",codec:"vp8"});return u.join(wfe,c,a||null,null),{channel:c,token:a,client:u}}),e({rooms:o})},selectChannel:async o=>{let{hostRoom:a,localTracks:c}=t();const{rooms:u}=t();if(!o){a&&(c&&a.client.localTracks.length>0&&await a.client.unpublish(c),a.client.setClientRole("audience"),a=null,e({hostRoom:a,localTracks:c}));return}if(a){if(a.client.channelName===o)return;c&&await a.client.unpublish(c),await a.client.setClientRole("audience")}a=u==null?void 0:u.find(h=>h.client.channelName===o),a&&(await a.client.setClientRole("host"),c||(c=await Du.createMicrophoneAndCameraTracks()),await a.client.publish(c)),e({localTracks:c,hostRoom:a})},dispose:()=>{const{rooms:o,hostRoom:a}=t();if(a==null||a.client.leave(),o)for(const c of o)c.client.leave()}}));var Afe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Nfe(e){var t=e.defaultInputValue,o=t===void 0?"":t,a=e.defaultMenuIsOpen,c=a===void 0?!1:a,u=e.defaultValue,h=u===void 0?null:u,f=e.inputValue,m=e.menuIsOpen,g=e.onChange,_=e.onInputChange,y=e.onMenuClose,b=e.onMenuOpen,A=e.value,I=dn(e,Afe),w=S.useState(f!==void 0?f:o),D=De(w,2),x=D[0],O=D[1],P=S.useState(m!==void 0?m:c),M=De(P,2),V=M[0],F=M[1],B=S.useState(A!==void 0?A:h),H=De(B,2),K=H[0],$=H[1],Z=S.useCallback(function(ue,me){typeof g=="function"&&g(ue,me),$(ue)},[g]),z=S.useCallback(function(ue,me){var fe;typeof _=="function"&&(fe=_(ue,me)),O(fe!==void 0?fe:ue)},[_]),G=S.useCallback(function(){typeof b=="function"&&b(),F(!0)},[b]),ee=S.useCallback(function(){typeof y=="function"&&y(),F(!1)},[y]),re=f!==void 0?f:x,oe=m!==void 0?m:V,pe=A!==void 0?A:K;return ve(ve({},I),{},{inputValue:re,menuIsOpen:oe,onChange:Z,onInputChange:z,onMenuClose:ee,onMenuOpen:G,value:pe})}function xfe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Pfe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Dfe=function(){function e(o){var a=this;this._insertTag=function(c){var u;a.tags.length===0?a.insertionPoint?u=a.insertionPoint.nextSibling:a.prepend?u=a.container.firstChild:u=a.before:u=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(c,u),a.tags.push(c)},this.isSpeedy=o.speedy===void 0?!0:o.speedy,this.tags=[],this.ctr=0,this.nonce=o.nonce,this.key=o.key,this.container=o.container,this.prepend=o.prepend,this.insertionPoint=o.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Pfe(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var u=xfe(c);try{u.insertRule(a,u.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){return a.parentNode&&a.parentNode.removeChild(a)}),this.tags=[],this.ctr=0},e}(),so="-ms-",yE="-moz-",On="-webkit-",w5="comm",$w="rule",Hw="decl",kfe="@import",O5="@keyframes",Lfe="@layer",Mfe=Math.abs,I_=String.fromCharCode,Ufe=Object.assign;function Ffe(e,t){return ji(e,0)^45?(((t<<2^ji(e,0))<<2^ji(e,1))<<2^ji(e,2))<<2^ji(e,3):0}function A5(e){return e.trim()}function Vfe(e,t){return(e=t.exec(e))?e[0]:e}function An(e,t,o){return e.replace(t,o)}function DI(e,t){return e.indexOf(t)}function ji(e,t){return e.charCodeAt(t)|0}function hm(e,t,o){return e.slice(t,o)}function $s(e){return e.length}function Ww(e){return e.length}function Zg(e,t){return t.push(e),e}function jfe(e,t){return e.map(t).join("")}var w_=1,jh=1,N5=0,zo=0,oi=0,lp="";function O_(e,t,o,a,c,u,h){return{value:e,root:t,parent:o,type:a,props:c,children:u,line:w_,column:jh,length:h,return:""}}function lf(e,t){return Ufe(O_("",null,null,"",null,null,0),e,{length:-e.length},t)}function Bfe(){return oi}function $fe(){return oi=zo>0?ji(lp,--zo):0,jh--,oi===10&&(jh=1,w_--),oi}function va(){return oi=zo<N5?ji(lp,zo++):0,jh++,oi===10&&(jh=1,w_++),oi}function Ks(){return ji(lp,zo)}function Iv(){return zo}function Lm(e,t){return hm(lp,e,t)}function pm(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function x5(e){return w_=jh=1,N5=$s(lp=e),zo=0,[]}function P5(e){return lp="",e}function wv(e){return A5(Lm(zo-1,kI(e===91?e+2:e===40?e+1:e)))}function Hfe(e){for(;(oi=Ks())&&oi<33;)va();return pm(e)>2||pm(oi)>3?"":" "}function Wfe(e,t){for(;--t&&va()&&!(oi<48||oi>102||oi>57&&oi<65||oi>70&&oi<97););return Lm(e,Iv()+(t<6&&Ks()==32&&va()==32))}function kI(e){for(;va();)switch(oi){case e:return zo;case 34:case 39:e!==34&&e!==39&&kI(oi);break;case 40:e===41&&kI(e);break;case 92:va();break}return zo}function Gfe(e,t){for(;va()&&e+oi!==47+10;)if(e+oi===42+42&&Ks()===47)break;return"/*"+Lm(t,zo-1)+"*"+I_(e===47?e:va())}function zfe(e){for(;!pm(Ks());)va();return Lm(e,zo)}function Kfe(e){return P5(Ov("",null,null,null,[""],e=x5(e),0,[0],e))}function Ov(e,t,o,a,c,u,h,f,m){for(var g=0,_=0,y=h,b=0,A=0,I=0,w=1,D=1,x=1,O=0,P="",M=c,V=u,F=a,B=P;D;)switch(I=O,O=va()){case 40:if(I!=108&&ji(B,y-1)==58){DI(B+=An(wv(O),"&","&\f"),"&\f")!=-1&&(x=-1);break}case 34:case 39:case 91:B+=wv(O);break;case 9:case 10:case 13:case 32:B+=Hfe(I);break;case 92:B+=Wfe(Iv()-1,7);continue;case 47:switch(Ks()){case 42:case 47:Zg(Yfe(Gfe(va(),Iv()),t,o),m);break;default:B+="/"}break;case 123*w:f[g++]=$s(B)*x;case 125*w:case 59:case 0:switch(O){case 0:case 125:D=0;case 59+_:x==-1&&(B=An(B,/\f/g,"")),A>0&&$s(B)-y&&Zg(A>32?bV(B+";",a,o,y-1):bV(An(B," ","")+";",a,o,y-2),m);break;case 59:B+=";";default:if(Zg(F=CV(B,t,o,g,_,c,f,P,M=[],V=[],y),u),O===123)if(_===0)Ov(B,t,F,F,M,u,y,f,V);else switch(b===99&&ji(B,3)===110?100:b){case 100:case 108:case 109:case 115:Ov(e,F,F,a&&Zg(CV(e,F,F,0,0,c,f,P,c,M=[],y),V),c,V,y,f,a?M:V);break;default:Ov(B,F,F,F,[""],V,0,f,V)}}g=_=A=0,w=x=1,P=B="",y=h;break;case 58:y=1+$s(B),A=I;default:if(w<1){if(O==123)--w;else if(O==125&&w++==0&&$fe()==125)continue}switch(B+=I_(O),O*w){case 38:x=_>0?1:(B+="\f",-1);break;case 44:f[g++]=($s(B)-1)*x,x=1;break;case 64:Ks()===45&&(B+=wv(va())),b=Ks(),_=y=$s(P=B+=zfe(Iv())),O++;break;case 45:I===45&&$s(B)==2&&(w=0)}}return u}function CV(e,t,o,a,c,u,h,f,m,g,_){for(var y=c-1,b=c===0?u:[""],A=Ww(b),I=0,w=0,D=0;I<a;++I)for(var x=0,O=hm(e,y+1,y=Mfe(w=h[I])),P=e;x<A;++x)(P=A5(w>0?b[x]+" "+O:An(O,/&\f/g,b[x])))&&(m[D++]=P);return O_(e,t,o,c===0?$w:f,m,g,_)}function Yfe(e,t,o){return O_(e,t,o,w5,I_(Bfe()),hm(e,2,-2),0)}function bV(e,t,o,a){return O_(e,t,o,Hw,hm(e,0,a),hm(e,a+1,-1),a)}function Ih(e,t){for(var o="",a=Ww(e),c=0;c<a;c++)o+=t(e[c],c,e,t)||"";return o}function qfe(e,t,o,a){switch(e.type){case Lfe:if(e.children.length)break;case kfe:case Hw:return e.return=e.return||e.value;case w5:return"";case O5:return e.return=e.value+"{"+Ih(e.children,a)+"}";case $w:e.value=e.props.join(",")}return $s(o=Ih(e.children,a))?e.return=e.value+"{"+o+"}":""}function Xfe(e){var t=Ww(e);return function(o,a,c,u){for(var h="",f=0;f<t;f++)h+=e[f](o,a,c,u)||"";return h}}function Jfe(e){return function(t){t.root||(t=t.return)&&e(t)}}function Qfe(e){var t=Object.create(null);return function(o){return t[o]===void 0&&(t[o]=e(o)),t[o]}}var Zfe=function(t,o,a){for(var c=0,u=0;c=u,u=Ks(),c===38&&u===12&&(o[a]=1),!pm(u);)va();return Lm(t,zo)},eme=function(t,o){var a=-1,c=44;do switch(pm(c)){case 0:c===38&&Ks()===12&&(o[a]=1),t[a]+=Zfe(zo-1,o,a);break;case 2:t[a]+=wv(c);break;case 4:if(c===44){t[++a]=Ks()===58?"&\f":"",o[a]=t[a].length;break}default:t[a]+=I_(c)}while(c=va());return t},tme=function(t,o){return P5(eme(x5(t),o))},TV=new WeakMap,nme=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var o=t.value,a=t.parent,c=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&o.charCodeAt(0)!==58&&!TV.get(a))&&!c){TV.set(t,!0);for(var u=[],h=tme(o,u),f=a.props,m=0,g=0;m<h.length;m++)for(var _=0;_<f.length;_++,g++)t.props[g]=u[m]?h[m].replace(/&\f/g,f[_]):f[_]+" "+h[m]}}},rme=function(t){if(t.type==="decl"){var o=t.value;o.charCodeAt(0)===108&&o.charCodeAt(2)===98&&(t.return="",t.value="")}};function D5(e,t){switch(Ffe(e,t)){case 5103:return On+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return On+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return On+e+yE+e+so+e+e;case 6828:case 4268:return On+e+so+e+e;case 6165:return On+e+so+"flex-"+e+e;case 5187:return On+e+An(e,/(\w+).+(:[^]+)/,On+"box-$1$2"+so+"flex-$1$2")+e;case 5443:return On+e+so+"flex-item-"+An(e,/flex-|-self/,"")+e;case 4675:return On+e+so+"flex-line-pack"+An(e,/align-content|flex-|-self/,"")+e;case 5548:return On+e+so+An(e,"shrink","negative")+e;case 5292:return On+e+so+An(e,"basis","preferred-size")+e;case 6060:return On+"box-"+An(e,"-grow","")+On+e+so+An(e,"grow","positive")+e;case 4554:return On+An(e,/([^-])(transform)/g,"$1"+On+"$2")+e;case 6187:return An(An(An(e,/(zoom-|grab)/,On+"$1"),/(image-set)/,On+"$1"),e,"")+e;case 5495:case 3959:return An(e,/(image-set\([^]*)/,On+"$1$`$1");case 4968:return An(An(e,/(.+:)(flex-)?(.*)/,On+"box-pack:$3"+so+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+On+e+e;case 4095:case 3583:case 4068:case 2532:return An(e,/(.+)-inline(.+)/,On+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if($s(e)-1-t>6)switch(ji(e,t+1)){case 109:if(ji(e,t+4)!==45)break;case 102:return An(e,/(.+:)(.+)-([^]+)/,"$1"+On+"$2-$3$1"+yE+(ji(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~DI(e,"stretch")?D5(An(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ji(e,t+1)!==115)break;case 6444:switch(ji(e,$s(e)-3-(~DI(e,"!important")&&10))){case 107:return An(e,":",":"+On)+e;case 101:return An(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+On+(ji(e,14)===45?"inline-":"")+"box$3$1"+On+"$2$3$1"+so+"$2box$3")+e}break;case 5936:switch(ji(e,t+11)){case 114:return On+e+so+An(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return On+e+so+An(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return On+e+so+An(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return On+e+so+e+e}return e}var ime=function(t,o,a,c){if(t.length>-1&&!t.return)switch(t.type){case Hw:t.return=D5(t.value,t.length);break;case O5:return Ih([lf(t,{value:An(t.value,"@","@"+On)})],c);case $w:if(t.length)return jfe(t.props,function(u){switch(Vfe(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ih([lf(t,{props:[An(u,/:(read-\w+)/,":"+yE+"$1")]})],c);case"::placeholder":return Ih([lf(t,{props:[An(u,/:(plac\w+)/,":"+On+"input-$1")]}),lf(t,{props:[An(u,/:(plac\w+)/,":"+yE+"$1")]}),lf(t,{props:[An(u,/:(plac\w+)/,so+"input-$1")]})],c)}return""})}},ome=[ime],ame=function(t){var o=t.key;if(o==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(w){var D=w.getAttribute("data-emotion");D.indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var c=t.stylisPlugins||ome,u={},h,f=[];h=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+o+' "]'),function(w){for(var D=w.getAttribute("data-emotion").split(" "),x=1;x<D.length;x++)u[D[x]]=!0;f.push(w)});var m,g=[nme,rme];{var _,y=[qfe,Jfe(function(w){_.insert(w)})],b=Xfe(g.concat(c,y)),A=function(D){return Ih(Kfe(D),b)};m=function(D,x,O,P){_=O,A(D?D+"{"+x.styles+"}":x.styles),P&&(I.inserted[x.name]=!0)}}var I={key:o,sheet:new Dfe({key:o,container:h,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:u,registered:{},insert:m};return I.sheet.hydrate(f),I},k5=F1,sme={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},cme={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},L5={};L5[k5.ForwardRef]=sme;L5[k5.Memo]=cme;var lme=!0;function ume(e,t,o){var a="";return o.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):a+=c+" "}),a}var M5=function(t,o,a){var c=t.key+"-"+o.name;(a===!1||lme===!1)&&t.registered[c]===void 0&&(t.registered[c]=o.styles)},dme=function(t,o,a){M5(t,o,a);var c=t.key+"-"+o.name;if(t.inserted[o.name]===void 0){var u=o;do t.insert(o===u?"."+c:"",u,t.sheet,!0),u=u.next;while(u!==void 0)}};function hme(e){for(var t=0,o,a=0,c=e.length;c>=4;++a,c-=4)o=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,t=(o&65535)*1540483477+((o>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var pme={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},fme=/[A-Z]|^ms/g,mme=/_EMO_([^_]+?)_([^]*?)_EMO_/g,U5=function(t){return t.charCodeAt(1)===45},RV=function(t){return t!=null&&typeof t!="boolean"},NT=Qfe(function(e){return U5(e)?e:e.replace(fme,"-$&").toLowerCase()}),IV=function(t,o){switch(t){case"animation":case"animationName":if(typeof o=="string")return o.replace(mme,function(a,c,u){return Hs={name:c,styles:u,next:Hs},c})}return pme[t]!==1&&!U5(t)&&typeof o=="number"&&o!==0?o+"px":o};function fm(e,t,o){if(o==null)return"";if(o.__emotion_styles!==void 0)return o;switch(typeof o){case"boolean":return"";case"object":{if(o.anim===1)return Hs={name:o.name,styles:o.styles,next:Hs},o.name;if(o.styles!==void 0){var a=o.next;if(a!==void 0)for(;a!==void 0;)Hs={name:a.name,styles:a.styles,next:Hs},a=a.next;var c=o.styles+";";return c}return gme(e,t,o)}case"function":{if(e!==void 0){var u=Hs,h=o(e);return Hs=u,fm(e,t,h)}break}}if(t==null)return o;var f=t[o];return f!==void 0?f:o}function gme(e,t,o){var a="";if(Array.isArray(o))for(var c=0;c<o.length;c++)a+=fm(e,t,o[c])+";";else for(var u in o){var h=o[u];if(typeof h!="object")t!=null&&t[h]!==void 0?a+=u+"{"+t[h]+"}":RV(h)&&(a+=NT(u)+":"+IV(u,h)+";");else if(Array.isArray(h)&&typeof h[0]=="string"&&(t==null||t[h[0]]===void 0))for(var f=0;f<h.length;f++)RV(h[f])&&(a+=NT(u)+":"+IV(u,h[f])+";");else{var m=fm(e,t,h);switch(u){case"animation":case"animationName":{a+=NT(u)+":"+m+";";break}default:a+=u+"{"+m+"}"}}}return a}var wV=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Hs,F5=function(t,o,a){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var c=!0,u="";Hs=void 0;var h=t[0];h==null||h.raw===void 0?(c=!1,u+=fm(a,o,h)):u+=h[0];for(var f=1;f<t.length;f++)u+=fm(a,o,t[f]),c&&(u+=h[f]);wV.lastIndex=0;for(var m="",g;(g=wV.exec(u))!==null;)m+="-"+g[1];var _=hme(u)+m;return{name:_,styles:u,next:Hs}},vme=function(t){return t()},Eme=wh["useInsertionEffect"]?wh["useInsertionEffect"]:!1,_me=Eme||vme,Gw={}.hasOwnProperty,V5=S.createContext(typeof HTMLElement<"u"?ame({key:"css"}):null);V5.Provider;var Sme=function(t){return S.forwardRef(function(o,a){var c=S.useContext(V5);return t(o,c,a)})},yme=S.createContext({}),LI="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Cme=function(t,o){var a={};for(var c in o)Gw.call(o,c)&&(a[c]=o[c]);return a[LI]=t,a},bme=function(t){var o=t.cache,a=t.serialized,c=t.isStringTag;return M5(o,a,c),_me(function(){return dme(o,a,c)}),null},Tme=Sme(function(e,t,o){var a=e.css;typeof a=="string"&&t.registered[a]!==void 0&&(a=t.registered[a]);var c=e[LI],u=[a],h="";typeof e.className=="string"?h=ume(t.registered,u,e.className):e.className!=null&&(h=e.className+" ");var f=F5(u,void 0,S.useContext(yme));h+=t.key+"-"+f.name;var m={};for(var g in e)Gw.call(e,g)&&g!=="css"&&g!==LI&&(m[g]=e[g]);return m.ref=o,m.className=h,S.createElement(S.Fragment,null,S.createElement(bme,{cache:t,serialized:f,isStringTag:typeof c=="string"}),S.createElement(c,m))}),Rme=Tme,Ot=function(t,o){var a=arguments;if(o==null||!Gw.call(o,"css"))return S.createElement.apply(void 0,a);var c=a.length,u=new Array(c);u[0]=Rme,u[1]=Cme(t,o);for(var h=2;h<c;h++)u[h]=a[h];return S.createElement.apply(null,u)};function zw(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return F5(t)}var Ime=function(){var t=zw.apply(void 0,arguments),o="animation-"+t.name;return{name:o,styles:"@keyframes "+o+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function wme(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Ome(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}const Ame=["top","right","bottom","left"];Ame.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);function vs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function j5(e){return vs(e).getComputedStyle(e)}function B5(e){return e instanceof vs(e).Node}function $5(e){return B5(e)?(e.nodeName||"").toLowerCase():"#document"}function Kw(e){return e instanceof vs(e).HTMLElement}function OV(e){return typeof ShadowRoot<"u"&&(e instanceof vs(e).ShadowRoot||e instanceof ShadowRoot)}function H5(e){const{overflow:t,overflowX:o,overflowY:a,display:c}=j5(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+o)&&!["inline","contents"].includes(c)}function Nme(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function xme(e){return["html","body","#document"].includes($5(e))}const Pme=Math.min,Dme=Math.max,CE=Math.round,ev=Math.floor,bE=e=>({x:e,y:e});function kme(e){const t=j5(e);let o=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const c=Kw(e),u=c?e.offsetWidth:o,h=c?e.offsetHeight:a,f=CE(o)!==u||CE(a)!==h;return f&&(o=u,a=h),{width:o,height:a,$:f}}function MI(e){return e instanceof vs(e).Element}function Yw(e){return MI(e)?e:e.contextElement}function xT(e){const t=Yw(e);if(!Kw(t))return bE(1);const o=t.getBoundingClientRect(),{width:a,height:c,$:u}=kme(t);let h=(u?CE(o.width):o.width)/a,f=(u?CE(o.height):o.height)/c;return h&&Number.isFinite(h)||(h=1),f&&Number.isFinite(f)||(f=1),{x:h,y:f}}const Lme=bE(0);function Mme(e){const t=vs(e);return Nme()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Lme}function AV(e,t,o,a){t===void 0&&(t=!1),o===void 0&&(o=!1);const c=e.getBoundingClientRect(),u=Yw(e);let h=bE(1);t&&(a?MI(a)&&(h=xT(a)):h=xT(e));const f=function(b,A,I){return A===void 0&&(A=!1),!(!I||A&&I!==vs(b))&&A}(u,o,a)?Mme(u):bE(0);let m=(c.left+f.x)/h.x,g=(c.top+f.y)/h.y,_=c.width/h.x,y=c.height/h.y;if(u){const b=vs(u),A=a&&MI(a)?vs(a):a;let I=b.frameElement;for(;I&&a&&A!==b;){const w=xT(I),D=I.getBoundingClientRect(),x=getComputedStyle(I),O=D.left+(I.clientLeft+parseFloat(x.paddingLeft))*w.x,P=D.top+(I.clientTop+parseFloat(x.paddingTop))*w.y;m*=w.x,g*=w.y,_*=w.x,y*=w.y,m+=O,g+=P,I=vs(I).frameElement}}return Ome({width:_,height:y,x:m,y:g})}function W5(e){return((B5(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ume(e){if($5(e)==="html")return e;const t=e.assignedSlot||e.parentNode||OV(e)&&e.host||W5(e);return OV(t)?t.host:t}function G5(e){const t=Ume(e);return xme(t)?e.ownerDocument?e.ownerDocument.body:e.body:Kw(t)&&H5(t)?t:G5(t)}function UI(e,t){var o;t===void 0&&(t=[]);const a=G5(e),c=a===((o=e.ownerDocument)==null?void 0:o.body),u=vs(a);return c?t.concat(u,u.visualViewport||[],H5(a)?a:[]):t.concat(a,UI(a))}function Fme(e,t,o,a){a===void 0&&(a={});const{ancestorScroll:c=!0,ancestorResize:u=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:m=!1}=a,g=Yw(e),_=c||u?[...g?UI(g):[],...UI(t)]:[];_.forEach(D=>{c&&D.addEventListener("scroll",o,{passive:!0}),u&&D.addEventListener("resize",o)});const y=g&&f?function(D,x){let O,P=null;const M=W5(D);function V(){clearTimeout(O),P&&P.disconnect(),P=null}return function F(B,H){B===void 0&&(B=!1),H===void 0&&(H=1),V();const{left:K,top:$,width:Z,height:z}=D.getBoundingClientRect();if(B||x(),!Z||!z)return;const G={rootMargin:-ev($)+"px "+-ev(M.clientWidth-(K+Z))+"px "+-ev(M.clientHeight-($+z))+"px "+-ev(K)+"px",threshold:Dme(0,Pme(1,H))||1};let ee=!0;function re(oe){const pe=oe[0].intersectionRatio;if(pe!==H){if(!ee)return F();pe?F(!1,pe):O=setTimeout(()=>{F(!1,1e-7)},100)}ee=!1}try{P=new IntersectionObserver(re,{...G,root:M.ownerDocument})}catch{P=new IntersectionObserver(re,G)}P.observe(D)}(!0),V}(g,o):null;let b,A=-1,I=null;h&&(I=new ResizeObserver(D=>{let[x]=D;x&&x.target===g&&I&&(I.unobserve(t),cancelAnimationFrame(A),A=requestAnimationFrame(()=>{I&&I.observe(t)})),o()}),g&&!m&&I.observe(g),I.observe(t));let w=m?AV(e):null;return m&&function D(){const x=AV(e);!w||x.x===w.x&&x.y===w.y&&x.width===w.width&&x.height===w.height||o(),w=x,b=requestAnimationFrame(D)}(),o(),()=>{_.forEach(D=>{c&&D.removeEventListener("scroll",o),u&&D.removeEventListener("resize",o)}),y&&y(),I&&I.disconnect(),I=null,m&&cancelAnimationFrame(b)}}var FI=S.useLayoutEffect,Vme=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],TE=function(){};function jme(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function Bme(e,t){for(var o=arguments.length,a=new Array(o>2?o-2:0),c=2;c<o;c++)a[c-2]=arguments[c];var u=[].concat(a);if(t&&e)for(var h in t)t.hasOwnProperty(h)&&t[h]&&u.push("".concat(jme(e,h)));return u.filter(function(f){return f}).map(function(f){return String(f).trim()}).join(" ")}var NV=function(t){return Xme(t)?t.filter(Boolean):Rn(t)==="object"&&t!==null?[t]:[]},z5=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var o=dn(t,Vme);return ve({},o)},Ur=function(t,o,a){var c=t.cx,u=t.getStyles,h=t.getClassNames,f=t.className;return{css:u(o,t),className:c(a??{},h(o,t),f)}};function A_(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function $me(e){return A_(e)?window.innerHeight:e.clientHeight}function K5(e){return A_(e)?window.pageYOffset:e.scrollTop}function RE(e,t){if(A_(e)){window.scrollTo(0,t);return}e.scrollTop=t}function Hme(e){var t=getComputedStyle(e),o=t.position==="absolute",a=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var c=e;c=c.parentElement;)if(t=getComputedStyle(c),!(o&&t.position==="static")&&a.test(t.overflow+t.overflowY+t.overflowX))return c;return document.documentElement}function Wme(e,t,o,a){return o*((e=e/a-1)*e*e+1)+t}function tv(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:TE,c=K5(e),u=t-c,h=10,f=0;function m(){f+=h;var g=Wme(f,c,u,o);RE(e,g),f<o?window.requestAnimationFrame(m):a(e)}m()}function xV(e,t){var o=e.getBoundingClientRect(),a=t.getBoundingClientRect(),c=t.offsetHeight/3;a.bottom+c>o.bottom?RE(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+c,e.scrollHeight)):a.top-c<o.top&&RE(e,Math.max(t.offsetTop-c,0))}function Gme(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function PV(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function zme(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var Y5=!1,Kme={get passive(){return Y5=!0}},nv=typeof window<"u"?window:{};nv.addEventListener&&nv.removeEventListener&&(nv.addEventListener("p",TE,Kme),nv.removeEventListener("p",TE,!1));var Yme=Y5;function qme(e){return e!=null}function Xme(e){return Array.isArray(e)}function rv(e,t,o){return e?t:o}var Jme=function(t){for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];var u=Object.entries(t).filter(function(h){var f=De(h,1),m=f[0];return!a.includes(m)});return u.reduce(function(h,f){var m=De(f,2),g=m[0],_=m[1];return h[g]=_,h},{})};function Qme(e){var t=e.maxHeight,o=e.menuEl,a=e.minHeight,c=e.placement,u=e.shouldScroll,h=e.isFixedPosition,f=e.controlHeight,m=Hme(o),g={placement:"bottom",maxHeight:t};if(!o||!o.offsetParent)return g;var _=m.getBoundingClientRect(),y=_.height,b=o.getBoundingClientRect(),A=b.bottom,I=b.height,w=b.top,D=o.offsetParent.getBoundingClientRect(),x=D.top,O=h?window.innerHeight:$me(m),P=K5(m),M=parseInt(getComputedStyle(o).marginBottom,10),V=parseInt(getComputedStyle(o).marginTop,10),F=x-V,B=O-w,H=F+P,K=y-P-w,$=A-O+P+M,Z=P+w-V,z=160;switch(c){case"auto":case"bottom":if(B>=I)return{placement:"bottom",maxHeight:t};if(K>=I&&!h)return u&&tv(m,$,z),{placement:"bottom",maxHeight:t};if(!h&&K>=a||h&&B>=a){u&&tv(m,$,z);var G=h?B-M:K-M;return{placement:"bottom",maxHeight:G}}if(c==="auto"||h){var ee=t,re=h?F:H;return re>=a&&(ee=Math.min(re-M-f,t)),{placement:"top",maxHeight:ee}}if(c==="bottom")return u&&RE(m,$),{placement:"bottom",maxHeight:t};break;case"top":if(F>=I)return{placement:"top",maxHeight:t};if(H>=I&&!h)return u&&tv(m,Z,z),{placement:"top",maxHeight:t};if(!h&&H>=a||h&&F>=a){var oe=t;return(!h&&H>=a||h&&F>=a)&&(oe=h?F-V:H-V),u&&tv(m,Z,z),{placement:"top",maxHeight:oe}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(c,'".'))}return g}function Zme(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var q5=function(t){return t==="auto"?"bottom":t},e0e=function(t,o){var a,c=t.placement,u=t.theme,h=u.borderRadius,f=u.spacing,m=u.colors;return ve((a={label:"menu"},Qe(a,Zme(c),"100%"),Qe(a,"position","absolute"),Qe(a,"width","100%"),Qe(a,"zIndex",1),a),o?{}:{backgroundColor:m.neutral0,borderRadius:h,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:f.menuGutter,marginTop:f.menuGutter})},X5=S.createContext(null),t0e=function(t){var o=t.children,a=t.minMenuHeight,c=t.maxMenuHeight,u=t.menuPlacement,h=t.menuPosition,f=t.menuShouldScrollIntoView,m=t.theme,g=S.useContext(X5)||{},_=g.setPortalPlacement,y=S.useRef(null),b=S.useState(c),A=De(b,2),I=A[0],w=A[1],D=S.useState(null),x=De(D,2),O=x[0],P=x[1],M=m.spacing.controlHeight;return FI(function(){var V=y.current;if(V){var F=h==="fixed",B=f&&!F,H=Qme({maxHeight:c,menuEl:V,minHeight:a,placement:u,shouldScroll:B,isFixedPosition:F,controlHeight:M});w(H.maxHeight),P(H.placement),_==null||_(H.placement)}},[c,u,h,f,a,_,M]),o({ref:y,placerProps:ve(ve({},t),{},{placement:O||q5(u),maxHeight:I})})},n0e=function(t){var o=t.children,a=t.innerRef,c=t.innerProps;return Ot("div",xe({},Ur(t,"menu",{menu:!0}),{ref:a},c),o)},r0e=n0e,i0e=function(t,o){var a=t.maxHeight,c=t.theme.spacing.baseUnit;return ve({maxHeight:a,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},o?{}:{paddingBottom:c,paddingTop:c})},o0e=function(t){var o=t.children,a=t.innerProps,c=t.innerRef,u=t.isMulti;return Ot("div",xe({},Ur(t,"menuList",{"menu-list":!0,"menu-list--is-multi":u}),{ref:c},a),o)},J5=function(t,o){var a=t.theme,c=a.spacing.baseUnit,u=a.colors;return ve({textAlign:"center"},o?{}:{color:u.neutral40,padding:"".concat(c*2,"px ").concat(c*3,"px")})},a0e=J5,s0e=J5,Q5=function(t){var o=t.children,a=t.innerProps;return Ot("div",xe({},Ur(t,"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),o)};Q5.defaultProps={children:"No options"};var Z5=function(t){var o=t.children,a=t.innerProps;return Ot("div",xe({},Ur(t,"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),o)};Z5.defaultProps={children:"Loading..."};var c0e=function(t){var o=t.rect,a=t.offset,c=t.position;return{left:o.left,position:c,top:a,width:o.width,zIndex:1}},l0e=function(t){var o=t.appendTo,a=t.children,c=t.controlElement,u=t.innerProps,h=t.menuPlacement,f=t.menuPosition,m=S.useRef(null),g=S.useRef(null),_=S.useState(q5(h)),y=De(_,2),b=y[0],A=y[1],I=S.useMemo(function(){return{setPortalPlacement:A}},[]),w=S.useState(null),D=De(w,2),x=D[0],O=D[1],P=S.useCallback(function(){if(c){var B=Gme(c),H=f==="fixed"?0:window.pageYOffset,K=B[b]+H;(K!==(x==null?void 0:x.offset)||B.left!==(x==null?void 0:x.rect.left)||B.width!==(x==null?void 0:x.rect.width))&&O({offset:K,rect:B})}},[c,f,b,x==null?void 0:x.offset,x==null?void 0:x.rect.left,x==null?void 0:x.rect.width]);FI(function(){P()},[P]);var M=S.useCallback(function(){typeof g.current=="function"&&(g.current(),g.current=null),c&&m.current&&(g.current=Fme(c,m.current,P,{elementResize:"ResizeObserver"in window}))},[c,P]);FI(function(){M()},[M]);var V=S.useCallback(function(B){m.current=B,M()},[M]);if(!o&&f!=="fixed"||!x)return null;var F=Ot("div",xe({ref:V},Ur(ve(ve({},t),{},{offset:x.offset,position:f,rect:x.rect}),"menuPortal",{"menu-portal":!0}),u),a);return Ot(X5.Provider,{value:I},o?Bl.createPortal(F,o):F)},u0e=function(t){var o=t.isDisabled,a=t.isRtl;return{label:"container",direction:a?"rtl":void 0,pointerEvents:o?"none":void 0,position:"relative"}},d0e=function(t){var o=t.children,a=t.innerProps,c=t.isDisabled,u=t.isRtl;return Ot("div",xe({},Ur(t,"container",{"--is-disabled":c,"--is-rtl":u}),a),o)},h0e=function(t,o){var a=t.theme.spacing,c=t.isMulti,u=t.hasValue,h=t.selectProps.controlShouldRenderValue;return ve({alignItems:"center",display:c&&u&&h?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},o?{}:{padding:"".concat(a.baseUnit/2,"px ").concat(a.baseUnit*2,"px")})},p0e=function(t){var o=t.children,a=t.innerProps,c=t.isMulti,u=t.hasValue;return Ot("div",xe({},Ur(t,"valueContainer",{"value-container":!0,"value-container--is-multi":c,"value-container--has-value":u}),a),o)},f0e=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},m0e=function(t){var o=t.children,a=t.innerProps;return Ot("div",xe({},Ur(t,"indicatorsContainer",{indicators:!0}),a),o)},DV,g0e=["size"],v0e={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},e$=function(t){var o=t.size,a=dn(t,g0e);return Ot("svg",xe({height:o,width:o,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:v0e},a))},qw=function(t){return Ot(e$,xe({size:20},t),Ot("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},t$=function(t){return Ot(e$,xe({size:20},t),Ot("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},n$=function(t,o){var a=t.isFocused,c=t.theme,u=c.spacing.baseUnit,h=c.colors;return ve({label:"indicatorContainer",display:"flex",transition:"color 150ms"},o?{}:{color:a?h.neutral60:h.neutral20,padding:u*2,":hover":{color:a?h.neutral80:h.neutral40}})},E0e=n$,_0e=function(t){var o=t.children,a=t.innerProps;return Ot("div",xe({},Ur(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),a),o||Ot(t$,null))},S0e=n$,y0e=function(t){var o=t.children,a=t.innerProps;return Ot("div",xe({},Ur(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),a),o||Ot(qw,null))},C0e=function(t,o){var a=t.isDisabled,c=t.theme,u=c.spacing.baseUnit,h=c.colors;return ve({label:"indicatorSeparator",alignSelf:"stretch",width:1},o?{}:{backgroundColor:a?h.neutral10:h.neutral20,marginBottom:u*2,marginTop:u*2})},b0e=function(t){var o=t.innerProps;return Ot("span",xe({},o,Ur(t,"indicatorSeparator",{"indicator-separator":!0})))},T0e=Ime(DV||(DV=wme([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),R0e=function(t,o){var a=t.isFocused,c=t.size,u=t.theme,h=u.colors,f=u.spacing.baseUnit;return ve({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:c,lineHeight:1,marginRight:c,textAlign:"center",verticalAlign:"middle"},o?{}:{color:a?h.neutral60:h.neutral20,padding:f*2})},PT=function(t){var o=t.delay,a=t.offset;return Ot("span",{css:zw({animation:"".concat(T0e," 1s ease-in-out ").concat(o,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:a?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},r$=function(t){var o=t.innerProps,a=t.isRtl;return Ot("div",xe({},Ur(t,"loadingIndicator",{indicator:!0,"loading-indicator":!0}),o),Ot(PT,{delay:0,offset:a}),Ot(PT,{delay:160,offset:!0}),Ot(PT,{delay:320,offset:!a}))};r$.defaultProps={size:4};var I0e=function(t,o){var a=t.isDisabled,c=t.isFocused,u=t.theme,h=u.colors,f=u.borderRadius,m=u.spacing;return ve({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:m.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},o?{}:{backgroundColor:a?h.neutral5:h.neutral0,borderColor:a?h.neutral10:c?h.primary:h.neutral20,borderRadius:f,borderStyle:"solid",borderWidth:1,boxShadow:c?"0 0 0 1px ".concat(h.primary):void 0,"&:hover":{borderColor:c?h.primary:h.neutral30}})},w0e=function(t){var o=t.children,a=t.isDisabled,c=t.isFocused,u=t.innerRef,h=t.innerProps,f=t.menuIsOpen;return Ot("div",xe({ref:u},Ur(t,"control",{control:!0,"control--is-disabled":a,"control--is-focused":c,"control--menu-is-open":f}),h),o)},O0e=w0e,A0e=["data"],N0e=function(t,o){var a=t.theme.spacing;return o?{}:{paddingBottom:a.baseUnit*2,paddingTop:a.baseUnit*2}},x0e=function(t){var o=t.children,a=t.cx,c=t.getStyles,u=t.getClassNames,h=t.Heading,f=t.headingProps,m=t.innerProps,g=t.label,_=t.theme,y=t.selectProps;return Ot("div",xe({},Ur(t,"group",{group:!0}),m),Ot(h,xe({},f,{selectProps:y,theme:_,getStyles:c,getClassNames:u,cx:a}),g),Ot("div",null,o))},P0e=function(t,o){var a=t.theme,c=a.colors,u=a.spacing;return ve({label:"group",cursor:"default",display:"block"},o?{}:{color:c.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:u.baseUnit*3,paddingRight:u.baseUnit*3,textTransform:"uppercase"})},D0e=function(t){var o=z5(t);o.data;var a=dn(o,A0e);return Ot("div",xe({},Ur(t,"groupHeading",{"group-heading":!0}),a))},k0e=x0e,L0e=["innerRef","isDisabled","isHidden","inputClassName"],M0e=function(t,o){var a=t.isDisabled,c=t.value,u=t.theme,h=u.spacing,f=u.colors;return ve(ve({visibility:a?"hidden":"visible",transform:c?"translateZ(0)":""},U0e),o?{}:{margin:h.baseUnit/2,paddingBottom:h.baseUnit/2,paddingTop:h.baseUnit/2,color:f.neutral80})},i$={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},U0e={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":ve({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},i$)},F0e=function(t){return ve({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},i$)},V0e=function(t){var o=t.cx,a=t.value,c=z5(t),u=c.innerRef,h=c.isDisabled,f=c.isHidden,m=c.inputClassName,g=dn(c,L0e);return Ot("div",xe({},Ur(t,"input",{"input-container":!0}),{"data-value":a||""}),Ot("input",xe({className:o({input:!0},m),ref:u,style:F0e(f),disabled:h},g)))},j0e=V0e,B0e=function(t,o){var a=t.theme,c=a.spacing,u=a.borderRadius,h=a.colors;return ve({label:"multiValue",display:"flex",minWidth:0},o?{}:{backgroundColor:h.neutral10,borderRadius:u/2,margin:c.baseUnit/2})},$0e=function(t,o){var a=t.theme,c=a.borderRadius,u=a.colors,h=t.cropWithEllipsis;return ve({overflow:"hidden",textOverflow:h||h===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},o?{}:{borderRadius:c/2,color:u.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},H0e=function(t,o){var a=t.theme,c=a.spacing,u=a.borderRadius,h=a.colors,f=t.isFocused;return ve({alignItems:"center",display:"flex"},o?{}:{borderRadius:u/2,backgroundColor:f?h.dangerLight:void 0,paddingLeft:c.baseUnit,paddingRight:c.baseUnit,":hover":{backgroundColor:h.dangerLight,color:h.danger}})},o$=function(t){var o=t.children,a=t.innerProps;return Ot("div",a,o)},W0e=o$,G0e=o$;function z0e(e){var t=e.children,o=e.innerProps;return Ot("div",xe({role:"button"},o),t||Ot(qw,{size:14}))}var K0e=function(t){var o=t.children,a=t.components,c=t.data,u=t.innerProps,h=t.isDisabled,f=t.removeProps,m=t.selectProps,g=a.Container,_=a.Label,y=a.Remove;return Ot(g,{data:c,innerProps:ve(ve({},Ur(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":h})),u),selectProps:m},Ot(_,{data:c,innerProps:ve({},Ur(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:m},o),Ot(y,{data:c,innerProps:ve(ve({},Ur(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(o||"option")},f),selectProps:m}))},Y0e=K0e,q0e=function(t,o){var a=t.isDisabled,c=t.isFocused,u=t.isSelected,h=t.theme,f=h.spacing,m=h.colors;return ve({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},o?{}:{backgroundColor:u?m.primary:c?m.primary25:"transparent",color:a?m.neutral20:u?m.neutral0:"inherit",padding:"".concat(f.baseUnit*2,"px ").concat(f.baseUnit*3,"px"),":active":{backgroundColor:a?void 0:u?m.primary:m.primary50}})},X0e=function(t){var o=t.children,a=t.isDisabled,c=t.isFocused,u=t.isSelected,h=t.innerRef,f=t.innerProps;return Ot("div",xe({},Ur(t,"option",{option:!0,"option--is-disabled":a,"option--is-focused":c,"option--is-selected":u}),{ref:h,"aria-disabled":a},f),o)},J0e=X0e,Q0e=function(t,o){var a=t.theme,c=a.spacing,u=a.colors;return ve({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},o?{}:{color:u.neutral50,marginLeft:c.baseUnit/2,marginRight:c.baseUnit/2})},Z0e=function(t){var o=t.children,a=t.innerProps;return Ot("div",xe({},Ur(t,"placeholder",{placeholder:!0}),a),o)},ege=Z0e,tge=function(t,o){var a=t.isDisabled,c=t.theme,u=c.spacing,h=c.colors;return ve({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},o?{}:{color:a?h.neutral40:h.neutral80,marginLeft:u.baseUnit/2,marginRight:u.baseUnit/2})},nge=function(t){var o=t.children,a=t.isDisabled,c=t.innerProps;return Ot("div",xe({},Ur(t,"singleValue",{"single-value":!0,"single-value--is-disabled":a}),c),o)},rge=nge,ige={ClearIndicator:y0e,Control:O0e,DropdownIndicator:_0e,DownChevron:t$,CrossIcon:qw,Group:k0e,GroupHeading:D0e,IndicatorsContainer:m0e,IndicatorSeparator:b0e,Input:j0e,LoadingIndicator:r$,Menu:r0e,MenuList:o0e,MenuPortal:l0e,LoadingMessage:Z5,NoOptionsMessage:Q5,MultiValue:Y0e,MultiValueContainer:W0e,MultiValueLabel:G0e,MultiValueRemove:z0e,Option:J0e,Placeholder:ege,SelectContainer:d0e,SingleValue:rge,ValueContainer:p0e},oge=function(t){return ve(ve({},ige),t.components)},kV=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function age(e,t){return!!(e===t||kV(e)&&kV(t))}function sge(e,t){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(!age(e[o],t[o]))return!1;return!0}function cge(e,t){t===void 0&&(t=sge);var o=null;function a(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];if(o&&o.lastThis===this&&t(c,o.lastArgs))return o.lastResult;var h=e.apply(this,c);return o={lastResult:h,lastArgs:c,lastThis:this},h}return a.clear=function(){o=null},a}var lge={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},uge=function(t){return Ot("span",xe({css:lge},t))},LV=uge,dge={guidance:function(t){var o=t.isSearchable,a=t.isMulti,c=t.isDisabled,u=t.tabSelectsValue,h=t.context;switch(h){case"menu":return"Use Up and Down to choose options".concat(c?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(u?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(t["aria-label"]||"Select"," is focused ").concat(o?",type to refine list":"",", press Down to open the menu, ").concat(a?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var o=t.action,a=t.label,c=a===void 0?"":a,u=t.labels,h=t.isDisabled;switch(o){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(c,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(u.length>1?"s":""," ").concat(u.join(","),", selected.");case"select-option":return h?"option ".concat(c," is disabled. Select another option."):"option ".concat(c,", selected.");default:return""}},onFocus:function(t){var o=t.context,a=t.focused,c=t.options,u=t.label,h=u===void 0?"":u,f=t.selectValue,m=t.isDisabled,g=t.isSelected,_=function(I,w){return I&&I.length?"".concat(I.indexOf(w)+1," of ").concat(I.length):""};if(o==="value"&&f)return"value ".concat(h," focused, ").concat(_(f,a),".");if(o==="menu"){var y=m?" disabled":"",b="".concat(g?"selected":"focused").concat(y);return"option ".concat(h," ").concat(b,", ").concat(_(c,a),".")}return""},onFilter:function(t){var o=t.inputValue,a=t.resultsMessage;return"".concat(a).concat(o?" for search term "+o:"",".")}},hge=function(t){var o=t.ariaSelection,a=t.focusedOption,c=t.focusedValue,u=t.focusableOptions,h=t.isFocused,f=t.selectValue,m=t.selectProps,g=t.id,_=m.ariaLiveMessages,y=m.getOptionLabel,b=m.inputValue,A=m.isMulti,I=m.isOptionDisabled,w=m.isSearchable,D=m.menuIsOpen,x=m.options,O=m.screenReaderStatus,P=m.tabSelectsValue,M=m["aria-label"],V=m["aria-live"],F=S.useMemo(function(){return ve(ve({},dge),_||{})},[_]),B=S.useMemo(function(){var ee="";if(o&&F.onChange){var re=o.option,oe=o.options,pe=o.removedValue,ue=o.removedValues,me=o.value,fe=function(He){return Array.isArray(He)?null:He},se=pe||re||fe(me),ae=se?y(se):"",de=oe||ue||void 0,ce=de?de.map(y):[],we=ve({isDisabled:se&&I(se,f),label:ae,labels:ce},o);ee=F.onChange(we)}return ee},[o,F,I,f,y]),H=S.useMemo(function(){var ee="",re=a||c,oe=!!(a&&f&&f.includes(a));if(re&&F.onFocus){var pe={focused:re,label:y(re),isDisabled:I(re,f),isSelected:oe,options:u,context:re===a?"menu":"value",selectValue:f};ee=F.onFocus(pe)}return ee},[a,c,y,I,F,u,f]),K=S.useMemo(function(){var ee="";if(D&&x.length&&F.onFilter){var re=O({count:u.length});ee=F.onFilter({inputValue:b,resultsMessage:re})}return ee},[u,b,D,F,x,O]),$=S.useMemo(function(){var ee="";if(F.guidance){var re=c?"value":D?"menu":"input";ee=F.guidance({"aria-label":M,context:re,isDisabled:a&&I(a,f),isMulti:A,isSearchable:w,tabSelectsValue:P})}return ee},[M,a,c,A,I,w,D,F,f,P]),Z="".concat(H," ").concat(K," ").concat($),z=Ot(S.Fragment,null,Ot("span",{id:"aria-selection"},B),Ot("span",{id:"aria-context"},Z)),G=(o==null?void 0:o.action)==="initial-input-focus";return Ot(S.Fragment,null,Ot(LV,{id:g},G&&z),Ot(LV,{"aria-live":V,"aria-atomic":"false","aria-relevant":"additions text"},h&&!G&&z))},pge=hge,VI=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],fge=new RegExp("["+VI.map(function(e){return e.letters}).join("")+"]","g"),a$={};for(var DT=0;DT<VI.length;DT++)for(var kT=VI[DT],LT=0;LT<kT.letters.length;LT++)a$[kT.letters[LT]]=kT.base;var s$=function(t){return t.replace(fge,function(o){return a$[o]})},mge=cge(s$),MV=function(t){return t.replace(/^\s+|\s+$/g,"")},gge=function(t){return"".concat(t.label," ").concat(t.value)},vge=function(t){return function(o,a){if(o.data.__isNew__)return!0;var c=ve({ignoreCase:!0,ignoreAccents:!0,stringify:gge,trim:!0,matchFrom:"any"},t),u=c.ignoreCase,h=c.ignoreAccents,f=c.stringify,m=c.trim,g=c.matchFrom,_=m?MV(a):a,y=m?MV(f(o)):f(o);return u&&(_=_.toLowerCase(),y=y.toLowerCase()),h&&(_=mge(_),y=s$(y)),g==="start"?y.substr(0,_.length)===_:y.indexOf(_)>-1}},Ege=["innerRef"];function _ge(e){var t=e.innerRef,o=dn(e,Ege),a=Jme(o,"onExited","in","enter","exit","appear");return Ot("input",xe({ref:t},a,{css:zw({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Sge=function(t){t.preventDefault(),t.stopPropagation()};function yge(e){var t=e.isEnabled,o=e.onBottomArrive,a=e.onBottomLeave,c=e.onTopArrive,u=e.onTopLeave,h=S.useRef(!1),f=S.useRef(!1),m=S.useRef(0),g=S.useRef(null),_=S.useCallback(function(D,x){if(g.current!==null){var O=g.current,P=O.scrollTop,M=O.scrollHeight,V=O.clientHeight,F=g.current,B=x>0,H=M-V-P,K=!1;H>x&&h.current&&(a&&a(D),h.current=!1),B&&f.current&&(u&&u(D),f.current=!1),B&&x>H?(o&&!h.current&&o(D),F.scrollTop=M,K=!0,h.current=!0):!B&&-x>P&&(c&&!f.current&&c(D),F.scrollTop=0,K=!0,f.current=!0),K&&Sge(D)}},[o,a,c,u]),y=S.useCallback(function(D){_(D,D.deltaY)},[_]),b=S.useCallback(function(D){m.current=D.changedTouches[0].clientY},[]),A=S.useCallback(function(D){var x=m.current-D.changedTouches[0].clientY;_(D,x)},[_]),I=S.useCallback(function(D){if(D){var x=Yme?{passive:!1}:!1;D.addEventListener("wheel",y,x),D.addEventListener("touchstart",b,x),D.addEventListener("touchmove",A,x)}},[A,b,y]),w=S.useCallback(function(D){D&&(D.removeEventListener("wheel",y,!1),D.removeEventListener("touchstart",b,!1),D.removeEventListener("touchmove",A,!1))},[A,b,y]);return S.useEffect(function(){if(t){var D=g.current;return I(D),function(){w(D)}}},[t,I,w]),function(D){g.current=D}}var UV=["boxSizing","height","overflow","paddingRight","position"],FV={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function VV(e){e.preventDefault()}function jV(e){e.stopPropagation()}function BV(){var e=this.scrollTop,t=this.scrollHeight,o=e+this.offsetHeight;e===0?this.scrollTop=1:o===t&&(this.scrollTop=e-1)}function $V(){return"ontouchstart"in window||navigator.maxTouchPoints}var HV=!!(typeof window<"u"&&window.document&&window.document.createElement),uf=0,eh={capture:!1,passive:!1};function Cge(e){var t=e.isEnabled,o=e.accountForScrollbars,a=o===void 0?!0:o,c=S.useRef({}),u=S.useRef(null),h=S.useCallback(function(m){if(HV){var g=document.body,_=g&&g.style;if(a&&UV.forEach(function(I){var w=_&&_[I];c.current[I]=w}),a&&uf<1){var y=parseInt(c.current.paddingRight,10)||0,b=document.body?document.body.clientWidth:0,A=window.innerWidth-b+y||0;Object.keys(FV).forEach(function(I){var w=FV[I];_&&(_[I]=w)}),_&&(_.paddingRight="".concat(A,"px"))}g&&$V()&&(g.addEventListener("touchmove",VV,eh),m&&(m.addEventListener("touchstart",BV,eh),m.addEventListener("touchmove",jV,eh))),uf+=1}},[a]),f=S.useCallback(function(m){if(HV){var g=document.body,_=g&&g.style;uf=Math.max(uf-1,0),a&&uf<1&&UV.forEach(function(y){var b=c.current[y];_&&(_[y]=b)}),g&&$V()&&(g.removeEventListener("touchmove",VV,eh),m&&(m.removeEventListener("touchstart",BV,eh),m.removeEventListener("touchmove",jV,eh)))}},[a]);return S.useEffect(function(){if(t){var m=u.current;return h(m),function(){f(m)}}},[t,h,f]),function(m){u.current=m}}var bge=function(){return document.activeElement&&document.activeElement.blur()},Tge={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Rge(e){var t=e.children,o=e.lockEnabled,a=e.captureEnabled,c=a===void 0?!0:a,u=e.onBottomArrive,h=e.onBottomLeave,f=e.onTopArrive,m=e.onTopLeave,g=yge({isEnabled:c,onBottomArrive:u,onBottomLeave:h,onTopArrive:f,onTopLeave:m}),_=Cge({isEnabled:o}),y=function(A){g(A),_(A)};return Ot(S.Fragment,null,o&&Ot("div",{onClick:bge,css:Tge}),t(y))}var Ige={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},wge=function(t){var o=t.name,a=t.onFocus;return Ot("input",{required:!0,name:o,tabIndex:-1,"aria-hidden":"true",onFocus:a,css:Ige,value:"",onChange:function(){}})},Oge=wge,Age=function(t){return t.label},Nge=function(t){return t.label},xge=function(t){return t.value},Pge=function(t){return!!t.isDisabled},Dge={clearIndicator:S0e,container:u0e,control:I0e,dropdownIndicator:E0e,group:N0e,groupHeading:P0e,indicatorsContainer:f0e,indicatorSeparator:C0e,input:M0e,loadingIndicator:R0e,loadingMessage:s0e,menu:e0e,menuList:i0e,menuPortal:c0e,multiValue:B0e,multiValueLabel:$0e,multiValueRemove:H0e,noOptionsMessage:a0e,option:q0e,placeholder:Q0e,singleValue:tge,valueContainer:h0e},kge={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},Lge=4,c$=4,Mge=38,Uge=c$*2,Fge={baseUnit:c$,controlHeight:Mge,menuGutter:Uge},MT={borderRadius:Lge,colors:kge,spacing:Fge},Vge={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:PV(),captureMenuScroll:!PV(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:vge(),formatGroupLabel:Age,getOptionLabel:Nge,getOptionValue:xge,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:Pge,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!zme(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var o=t.count;return"".concat(o," result").concat(o!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function WV(e,t,o,a){var c=h$(e,t,o),u=p$(e,t,o),h=d$(e,t),f=IE(e,t);return{type:"option",data:t,isDisabled:c,isSelected:u,label:h,value:f,index:a}}function l$(e,t){return e.options.map(function(o,a){if("options"in o){var c=o.options.map(function(h,f){return WV(e,h,t,f)}).filter(function(h){return GV(e,h)});return c.length>0?{type:"group",data:o,options:c,index:a}:void 0}var u=WV(e,o,t,a);return GV(e,u)?u:void 0}).filter(qme)}function u$(e){return e.reduce(function(t,o){return o.type==="group"?t.push.apply(t,Ze(o.options.map(function(a){return a.data}))):t.push(o.data),t},[])}function jge(e,t){return u$(l$(e,t))}function GV(e,t){var o=e.inputValue,a=o===void 0?"":o,c=t.data,u=t.isSelected,h=t.label,f=t.value;return(!m$(e)||!u)&&f$(e,{label:h,value:f,data:c},a)}function Bge(e,t){var o=e.focusedValue,a=e.selectValue,c=a.indexOf(o);if(c>-1){var u=t.indexOf(o);if(u>-1)return o;if(c<t.length)return t[c]}return null}function $ge(e,t){var o=e.focusedOption;return o&&t.indexOf(o)>-1?o:t[0]}var d$=function(t,o){return t.getOptionLabel(o)},IE=function(t,o){return t.getOptionValue(o)};function h$(e,t,o){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,o):!1}function p$(e,t,o){if(o.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,o);var a=IE(e,t);return o.some(function(c){return IE(e,c)===a})}function f$(e,t,o){return e.filterOption?e.filterOption(t,o):!0}var m$=function(t){var o=t.hideSelectedOptions,a=t.isMulti;return o===void 0?a:o},Hge=1,g$=function(e){Gh(o,e);var t=zh(o);function o(a){var c;if(za(this,o),c=t.call(this,a),c.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},c.blockOptionHover=!1,c.isComposing=!1,c.commonProps=void 0,c.initialTouchX=0,c.initialTouchY=0,c.instancePrefix="",c.openAfterFocus=!1,c.scrollToFocusedOptionOnUpdate=!1,c.userIsDragging=void 0,c.controlRef=null,c.getControlRef=function(f){c.controlRef=f},c.focusedOptionRef=null,c.getFocusedOptionRef=function(f){c.focusedOptionRef=f},c.menuListRef=null,c.getMenuListRef=function(f){c.menuListRef=f},c.inputRef=null,c.getInputRef=function(f){c.inputRef=f},c.focus=c.focusInput,c.blur=c.blurInput,c.onChange=function(f,m){var g=c.props,_=g.onChange,y=g.name;m.name=y,c.ariaOnChange(f,m),_(f,m)},c.setValue=function(f,m,g){var _=c.props,y=_.closeMenuOnSelect,b=_.isMulti,A=_.inputValue;c.onInputChange("",{action:"set-value",prevInputValue:A}),y&&(c.setState({inputIsHiddenAfterUpdate:!b}),c.onMenuClose()),c.setState({clearFocusValueOnUpdate:!0}),c.onChange(f,{action:m,option:g})},c.selectOption=function(f){var m=c.props,g=m.blurInputOnSelect,_=m.isMulti,y=m.name,b=c.state.selectValue,A=_&&c.isOptionSelected(f,b),I=c.isOptionDisabled(f,b);if(A){var w=c.getOptionValue(f);c.setValue(b.filter(function(D){return c.getOptionValue(D)!==w}),"deselect-option",f)}else if(!I)_?c.setValue([].concat(Ze(b),[f]),"select-option",f):c.setValue(f,"select-option");else{c.ariaOnChange(f,{action:"select-option",option:f,name:y});return}g&&c.blurInput()},c.removeValue=function(f){var m=c.props.isMulti,g=c.state.selectValue,_=c.getOptionValue(f),y=g.filter(function(A){return c.getOptionValue(A)!==_}),b=rv(m,y,y[0]||null);c.onChange(b,{action:"remove-value",removedValue:f}),c.focusInput()},c.clearValue=function(){var f=c.state.selectValue;c.onChange(rv(c.props.isMulti,[],null),{action:"clear",removedValues:f})},c.popValue=function(){var f=c.props.isMulti,m=c.state.selectValue,g=m[m.length-1],_=m.slice(0,m.length-1),y=rv(f,_,_[0]||null);c.onChange(y,{action:"pop-value",removedValue:g})},c.getValue=function(){return c.state.selectValue},c.cx=function(){for(var f=arguments.length,m=new Array(f),g=0;g<f;g++)m[g]=arguments[g];return Bme.apply(void 0,[c.props.classNamePrefix].concat(m))},c.getOptionLabel=function(f){return d$(c.props,f)},c.getOptionValue=function(f){return IE(c.props,f)},c.getStyles=function(f,m){var g=c.props.unstyled,_=Dge[f](m,g);_.boxSizing="border-box";var y=c.props.styles[f];return y?y(_,m):_},c.getClassNames=function(f,m){var g,_;return(g=(_=c.props.classNames)[f])===null||g===void 0?void 0:g.call(_,m)},c.getElementId=function(f){return"".concat(c.instancePrefix,"-").concat(f)},c.getComponents=function(){return oge(c.props)},c.buildCategorizedOptions=function(){return l$(c.props,c.state.selectValue)},c.getCategorizedOptions=function(){return c.props.menuIsOpen?c.buildCategorizedOptions():[]},c.buildFocusableOptions=function(){return u$(c.buildCategorizedOptions())},c.getFocusableOptions=function(){return c.props.menuIsOpen?c.buildFocusableOptions():[]},c.ariaOnChange=function(f,m){c.setState({ariaSelection:ve({value:f},m)})},c.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),c.focusInput())},c.onMenuMouseMove=function(f){c.blockOptionHover=!1},c.onControlMouseDown=function(f){if(!f.defaultPrevented){var m=c.props.openMenuOnClick;c.state.isFocused?c.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&c.onMenuClose():m&&c.openMenu("first"):(m&&(c.openAfterFocus=!0),c.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},c.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0)&&!c.props.isDisabled){var m=c.props,g=m.isMulti,_=m.menuIsOpen;c.focusInput(),_?(c.setState({inputIsHiddenAfterUpdate:!g}),c.onMenuClose()):c.openMenu("first"),f.preventDefault()}},c.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(c.clearValue(),f.preventDefault(),c.openAfterFocus=!1,f.type==="touchend"?c.focusInput():setTimeout(function(){return c.focusInput()}))},c.onScroll=function(f){typeof c.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&A_(f.target)&&c.props.onMenuClose():typeof c.props.closeMenuOnScroll=="function"&&c.props.closeMenuOnScroll(f)&&c.props.onMenuClose()},c.onCompositionStart=function(){c.isComposing=!0},c.onCompositionEnd=function(){c.isComposing=!1},c.onTouchStart=function(f){var m=f.touches,g=m&&m.item(0);g&&(c.initialTouchX=g.clientX,c.initialTouchY=g.clientY,c.userIsDragging=!1)},c.onTouchMove=function(f){var m=f.touches,g=m&&m.item(0);if(g){var _=Math.abs(g.clientX-c.initialTouchX),y=Math.abs(g.clientY-c.initialTouchY),b=5;c.userIsDragging=_>b||y>b}},c.onTouchEnd=function(f){c.userIsDragging||(c.controlRef&&!c.controlRef.contains(f.target)&&c.menuListRef&&!c.menuListRef.contains(f.target)&&c.blurInput(),c.initialTouchX=0,c.initialTouchY=0)},c.onControlTouchEnd=function(f){c.userIsDragging||c.onControlMouseDown(f)},c.onClearIndicatorTouchEnd=function(f){c.userIsDragging||c.onClearIndicatorMouseDown(f)},c.onDropdownIndicatorTouchEnd=function(f){c.userIsDragging||c.onDropdownIndicatorMouseDown(f)},c.handleInputChange=function(f){var m=c.props.inputValue,g=f.currentTarget.value;c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange(g,{action:"input-change",prevInputValue:m}),c.props.menuIsOpen||c.onMenuOpen()},c.onInputFocus=function(f){c.props.onFocus&&c.props.onFocus(f),c.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(c.openAfterFocus||c.props.openMenuOnFocus)&&c.openMenu("first"),c.openAfterFocus=!1},c.onInputBlur=function(f){var m=c.props.inputValue;if(c.menuListRef&&c.menuListRef.contains(document.activeElement)){c.inputRef.focus();return}c.props.onBlur&&c.props.onBlur(f),c.onInputChange("",{action:"input-blur",prevInputValue:m}),c.onMenuClose(),c.setState({focusedValue:null,isFocused:!1})},c.onOptionHover=function(f){c.blockOptionHover||c.state.focusedOption===f||c.setState({focusedOption:f})},c.shouldHideSelectedOptions=function(){return m$(c.props)},c.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),c.focus()},c.onKeyDown=function(f){var m=c.props,g=m.isMulti,_=m.backspaceRemovesValue,y=m.escapeClearsValue,b=m.inputValue,A=m.isClearable,I=m.isDisabled,w=m.menuIsOpen,D=m.onKeyDown,x=m.tabSelectsValue,O=m.openMenuOnFocus,P=c.state,M=P.focusedOption,V=P.focusedValue,F=P.selectValue;if(!I&&!(typeof D=="function"&&(D(f),f.defaultPrevented))){switch(c.blockOptionHover=!0,f.key){case"ArrowLeft":if(!g||b)return;c.focusValue("previous");break;case"ArrowRight":if(!g||b)return;c.focusValue("next");break;case"Delete":case"Backspace":if(b)return;if(V)c.removeValue(V);else{if(!_)return;g?c.popValue():A&&c.clearValue()}break;case"Tab":if(c.isComposing||f.shiftKey||!w||!x||!M||O&&c.isOptionSelected(M,F))return;c.selectOption(M);break;case"Enter":if(f.keyCode===229)break;if(w){if(!M||c.isComposing)return;c.selectOption(M);break}return;case"Escape":w?(c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange("",{action:"menu-close",prevInputValue:b}),c.onMenuClose()):A&&y&&c.clearValue();break;case" ":if(b)return;if(!w){c.openMenu("first");break}if(!M)return;c.selectOption(M);break;case"ArrowUp":w?c.focusOption("up"):c.openMenu("last");break;case"ArrowDown":w?c.focusOption("down"):c.openMenu("first");break;case"PageUp":if(!w)return;c.focusOption("pageup");break;case"PageDown":if(!w)return;c.focusOption("pagedown");break;case"Home":if(!w)return;c.focusOption("first");break;case"End":if(!w)return;c.focusOption("last");break;default:return}f.preventDefault()}},c.instancePrefix="react-select-"+(c.props.instanceId||++Hge),c.state.selectValue=NV(a.value),a.menuIsOpen&&c.state.selectValue.length){var u=c.buildFocusableOptions(),h=u.indexOf(c.state.selectValue[0]);c.state.focusedOption=u[h]}return c}return Ka(o,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&xV(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(c){var u=this.props,h=u.isDisabled,f=u.menuIsOpen,m=this.state.isFocused;(m&&!h&&c.isDisabled||m&&f&&!c.menuIsOpen)&&this.focusInput(),m&&h&&!c.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!m&&!h&&c.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(xV(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(c,u){this.props.onInputChange(c,u)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(c){var u=this,h=this.state,f=h.selectValue,m=h.isFocused,g=this.buildFocusableOptions(),_=c==="first"?0:g.length-1;if(!this.props.isMulti){var y=g.indexOf(f[0]);y>-1&&(_=y)}this.scrollToFocusedOptionOnUpdate=!(m&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:g[_]},function(){return u.onMenuOpen()})}},{key:"focusValue",value:function(c){var u=this.state,h=u.selectValue,f=u.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var m=h.indexOf(f);f||(m=-1);var g=h.length-1,_=-1;if(h.length){switch(c){case"previous":m===0?_=0:m===-1?_=g:_=m-1;break;case"next":m>-1&&m<g&&(_=m+1);break}this.setState({inputIsHidden:_!==-1,focusedValue:h[_]})}}}},{key:"focusOption",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",u=this.props.pageSize,h=this.state.focusedOption,f=this.getFocusableOptions();if(f.length){var m=0,g=f.indexOf(h);h||(g=-1),c==="up"?m=g>0?g-1:f.length-1:c==="down"?m=(g+1)%f.length:c==="pageup"?(m=g-u,m<0&&(m=0)):c==="pagedown"?(m=g+u,m>f.length-1&&(m=f.length-1)):c==="last"&&(m=f.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:f[m],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(MT):ve(ve({},MT),this.props.theme):MT}},{key:"getCommonProps",value:function(){var c=this.clearValue,u=this.cx,h=this.getStyles,f=this.getClassNames,m=this.getValue,g=this.selectOption,_=this.setValue,y=this.props,b=y.isMulti,A=y.isRtl,I=y.options,w=this.hasValue();return{clearValue:c,cx:u,getStyles:h,getClassNames:f,getValue:m,hasValue:w,isMulti:b,isRtl:A,options:I,selectOption:g,selectProps:y,setValue:_,theme:this.getTheme()}}},{key:"hasValue",value:function(){var c=this.state.selectValue;return c.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var c=this.props,u=c.isClearable,h=c.isMulti;return u===void 0?h:u}},{key:"isOptionDisabled",value:function(c,u){return h$(this.props,c,u)}},{key:"isOptionSelected",value:function(c,u){return p$(this.props,c,u)}},{key:"filterOption",value:function(c,u){return f$(this.props,c,u)}},{key:"formatOptionLabel",value:function(c,u){if(typeof this.props.formatOptionLabel=="function"){var h=this.props.inputValue,f=this.state.selectValue;return this.props.formatOptionLabel(c,{context:u,inputValue:h,selectValue:f})}else return this.getOptionLabel(c)}},{key:"formatGroupLabel",value:function(c){return this.props.formatGroupLabel(c)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var c=this.props,u=c.isDisabled,h=c.isSearchable,f=c.inputId,m=c.inputValue,g=c.tabIndex,_=c.form,y=c.menuIsOpen,b=c.required,A=this.getComponents(),I=A.Input,w=this.state,D=w.inputIsHidden,x=w.ariaSelection,O=this.commonProps,P=f||this.getElementId("input"),M=ve(ve(ve({"aria-autocomplete":"list","aria-expanded":y,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":b,role:"combobox"},y&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!h&&{"aria-readonly":!0}),this.hasValue()?(x==null?void 0:x.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return h?S.createElement(I,xe({},O,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:P,innerRef:this.getInputRef,isDisabled:u,isHidden:D,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:g,form:_,type:"text",value:m},M)):S.createElement(_ge,xe({id:P,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:TE,onFocus:this.onInputFocus,disabled:u,tabIndex:g,inputMode:"none",form:_,value:""},M))}},{key:"renderPlaceholderOrValue",value:function(){var c=this,u=this.getComponents(),h=u.MultiValue,f=u.MultiValueContainer,m=u.MultiValueLabel,g=u.MultiValueRemove,_=u.SingleValue,y=u.Placeholder,b=this.commonProps,A=this.props,I=A.controlShouldRenderValue,w=A.isDisabled,D=A.isMulti,x=A.inputValue,O=A.placeholder,P=this.state,M=P.selectValue,V=P.focusedValue,F=P.isFocused;if(!this.hasValue()||!I)return x?null:S.createElement(y,xe({},b,{key:"placeholder",isDisabled:w,isFocused:F,innerProps:{id:this.getElementId("placeholder")}}),O);if(D)return M.map(function(H,K){var $=H===V,Z="".concat(c.getOptionLabel(H),"-").concat(c.getOptionValue(H));return S.createElement(h,xe({},b,{components:{Container:f,Label:m,Remove:g},isFocused:$,isDisabled:w,key:Z,index:K,removeProps:{onClick:function(){return c.removeValue(H)},onTouchEnd:function(){return c.removeValue(H)},onMouseDown:function(G){G.preventDefault()}},data:H}),c.formatOptionLabel(H,"value"))});if(x)return null;var B=M[0];return S.createElement(_,xe({},b,{data:B,isDisabled:w}),this.formatOptionLabel(B,"value"))}},{key:"renderClearIndicator",value:function(){var c=this.getComponents(),u=c.ClearIndicator,h=this.commonProps,f=this.props,m=f.isDisabled,g=f.isLoading,_=this.state.isFocused;if(!this.isClearable()||!u||m||!this.hasValue()||g)return null;var y={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return S.createElement(u,xe({},h,{innerProps:y,isFocused:_}))}},{key:"renderLoadingIndicator",value:function(){var c=this.getComponents(),u=c.LoadingIndicator,h=this.commonProps,f=this.props,m=f.isDisabled,g=f.isLoading,_=this.state.isFocused;if(!u||!g)return null;var y={"aria-hidden":"true"};return S.createElement(u,xe({},h,{innerProps:y,isDisabled:m,isFocused:_}))}},{key:"renderIndicatorSeparator",value:function(){var c=this.getComponents(),u=c.DropdownIndicator,h=c.IndicatorSeparator;if(!u||!h)return null;var f=this.commonProps,m=this.props.isDisabled,g=this.state.isFocused;return S.createElement(h,xe({},f,{isDisabled:m,isFocused:g}))}},{key:"renderDropdownIndicator",value:function(){var c=this.getComponents(),u=c.DropdownIndicator;if(!u)return null;var h=this.commonProps,f=this.props.isDisabled,m=this.state.isFocused,g={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return S.createElement(u,xe({},h,{innerProps:g,isDisabled:f,isFocused:m}))}},{key:"renderMenu",value:function(){var c=this,u=this.getComponents(),h=u.Group,f=u.GroupHeading,m=u.Menu,g=u.MenuList,_=u.MenuPortal,y=u.LoadingMessage,b=u.NoOptionsMessage,A=u.Option,I=this.commonProps,w=this.state.focusedOption,D=this.props,x=D.captureMenuScroll,O=D.inputValue,P=D.isLoading,M=D.loadingMessage,V=D.minMenuHeight,F=D.maxMenuHeight,B=D.menuIsOpen,H=D.menuPlacement,K=D.menuPosition,$=D.menuPortalTarget,Z=D.menuShouldBlockScroll,z=D.menuShouldScrollIntoView,G=D.noOptionsMessage,ee=D.onMenuScrollToTop,re=D.onMenuScrollToBottom;if(!B)return null;var oe=function(de,ce){var we=de.type,Ie=de.data,He=de.isDisabled,Le=de.isSelected,ft=de.label,gt=de.value,at=w===Ie,rt=He?void 0:function(){return c.onOptionHover(Ie)},pt=He?void 0:function(){return c.selectOption(Ie)},Ye="".concat(c.getElementId("option"),"-").concat(ce),yt={id:Ye,onClick:pt,onMouseMove:rt,onMouseOver:rt,tabIndex:-1};return S.createElement(A,xe({},I,{innerProps:yt,data:Ie,isDisabled:He,isSelected:Le,key:Ye,label:ft,type:we,value:gt,isFocused:at,innerRef:at?c.getFocusedOptionRef:void 0}),c.formatOptionLabel(de.data,"menu"))},pe;if(this.hasOptions())pe=this.getCategorizedOptions().map(function(ae){if(ae.type==="group"){var de=ae.data,ce=ae.options,we=ae.index,Ie="".concat(c.getElementId("group"),"-").concat(we),He="".concat(Ie,"-heading");return S.createElement(h,xe({},I,{key:Ie,data:de,options:ce,Heading:f,headingProps:{id:He,data:ae.data},label:c.formatGroupLabel(ae.data)}),ae.options.map(function(Le){return oe(Le,"".concat(we,"-").concat(Le.index))}))}else if(ae.type==="option")return oe(ae,"".concat(ae.index))});else if(P){var ue=M({inputValue:O});if(ue===null)return null;pe=S.createElement(y,I,ue)}else{var me=G({inputValue:O});if(me===null)return null;pe=S.createElement(b,I,me)}var fe={minMenuHeight:V,maxMenuHeight:F,menuPlacement:H,menuPosition:K,menuShouldScrollIntoView:z},se=S.createElement(t0e,xe({},I,fe),function(ae){var de=ae.ref,ce=ae.placerProps,we=ce.placement,Ie=ce.maxHeight;return S.createElement(m,xe({},I,fe,{innerRef:de,innerProps:{onMouseDown:c.onMenuMouseDown,onMouseMove:c.onMenuMouseMove,id:c.getElementId("listbox")},isLoading:P,placement:we}),S.createElement(Rge,{captureEnabled:x,onTopArrive:ee,onBottomArrive:re,lockEnabled:Z},function(He){return S.createElement(g,xe({},I,{innerRef:function(ft){c.getMenuListRef(ft),He(ft)},isLoading:P,maxHeight:Ie,focusedOption:w}),pe)}))});return $||K==="fixed"?S.createElement(_,xe({},I,{appendTo:$,controlElement:this.controlRef,menuPlacement:H,menuPosition:K}),se):se}},{key:"renderFormField",value:function(){var c=this,u=this.props,h=u.delimiter,f=u.isDisabled,m=u.isMulti,g=u.name,_=u.required,y=this.state.selectValue;if(_&&!this.hasValue()&&!f)return S.createElement(Oge,{name:g,onFocus:this.onValueInputFocus});if(!(!g||f))if(m)if(h){var b=y.map(function(w){return c.getOptionValue(w)}).join(h);return S.createElement("input",{name:g,type:"hidden",value:b})}else{var A=y.length>0?y.map(function(w,D){return S.createElement("input",{key:"i-".concat(D),name:g,type:"hidden",value:c.getOptionValue(w)})}):S.createElement("input",{name:g,type:"hidden",value:""});return S.createElement("div",null,A)}else{var I=y[0]?this.getOptionValue(y[0]):"";return S.createElement("input",{name:g,type:"hidden",value:I})}}},{key:"renderLiveRegion",value:function(){var c=this.commonProps,u=this.state,h=u.ariaSelection,f=u.focusedOption,m=u.focusedValue,g=u.isFocused,_=u.selectValue,y=this.getFocusableOptions();return S.createElement(pge,xe({},c,{id:this.getElementId("live-region"),ariaSelection:h,focusedOption:f,focusedValue:m,isFocused:g,selectValue:_,focusableOptions:y}))}},{key:"render",value:function(){var c=this.getComponents(),u=c.Control,h=c.IndicatorsContainer,f=c.SelectContainer,m=c.ValueContainer,g=this.props,_=g.className,y=g.id,b=g.isDisabled,A=g.menuIsOpen,I=this.state.isFocused,w=this.commonProps=this.getCommonProps();return S.createElement(f,xe({},w,{className:_,innerProps:{id:y,onKeyDown:this.onKeyDown},isDisabled:b,isFocused:I}),this.renderLiveRegion(),S.createElement(u,xe({},w,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:b,isFocused:I,menuIsOpen:A}),S.createElement(m,xe({},w,{isDisabled:b}),this.renderPlaceholderOrValue(),this.renderInput()),S.createElement(h,xe({},w,{isDisabled:b}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(c,u){var h=u.prevProps,f=u.clearFocusValueOnUpdate,m=u.inputIsHiddenAfterUpdate,g=u.ariaSelection,_=u.isFocused,y=u.prevWasFocused,b=c.options,A=c.value,I=c.menuIsOpen,w=c.inputValue,D=c.isMulti,x=NV(A),O={};if(h&&(A!==h.value||b!==h.options||I!==h.menuIsOpen||w!==h.inputValue)){var P=I?jge(c,x):[],M=f?Bge(u,x):null,V=$ge(u,P);O={selectValue:x,focusedOption:V,focusedValue:M,clearFocusValueOnUpdate:!1}}var F=m!=null&&c!==h?{inputIsHidden:m,inputIsHiddenAfterUpdate:void 0}:{},B=g,H=_&&y;return _&&!H&&(B={value:rv(D,x,x[0]||null),options:x,action:"initial-input-focus"},H=!y),(g==null?void 0:g.action)==="initial-input-focus"&&(B=null),ve(ve(ve({},O),F),{},{prevProps:c,ariaSelection:B,prevWasFocused:H})}}]),o}(S.Component);g$.defaultProps=Vge;var Wge=S.forwardRef(function(e,t){var o=Nfe(e);return S.createElement(g$,xe({ref:t},o))}),Gge=Wge;const{Title:zge,Paragraph:Kge}=To,Yge=S.memo(function({label:t}){const a=qs().filter(m=>m.hasAudio||m.hasVideo),c=Ff(m=>m.localTracks),u=Ff(m=>m.hostRoom),h=ws(),f=Ya();return ne.jsxs("div",{className:"room-selector-item",children:[ne.jsx("i",{className:"i-mdi-chat-processing-outline text-5 color-zinc"}),ne.jsx("code",{className:"bg-rose color-white px-2 rounded",children:t}),h&&c&&f.uid&&(u==null?void 0:u.client.channelName)===f.channelName&&ne.jsxs("div",{className:"user",children:[ne.jsx(p5,{audioTrack:c[0],cameraOn:!0,micOn:!0,videoTrack:c[1]}),ne.jsx("div",{className:"mask"}),ne.jsx("label",{className:"label",children:Ts(f.uid)})]},f.uid),ne.jsx(ne.Fragment,{children:a.map(m=>ne.jsxs("div",{className:"user",children:[ne.jsx(Nw,{user:m}),ne.jsx("div",{className:"mask"}),ne.jsx("label",{className:"label",children:Ts(m.uid)})]},m.uid))})]})}),qge=({innerProps:e,isDisabled:t,label:o,data:a})=>{const{client:c}=a.value;return t?null:ne.jsx("div",{...e,children:ne.jsx(u5,{client:c,children:ne.jsx(Yge,{label:o})})})},Xge=()=>{const e=Ff(h=>h.getRooms),[t,o]=S.useState(!1);S.useEffect(()=>{e()},[]);const a=Ff(h=>h.rooms),c=Ff(h=>h.selectChannel),u=S.useMemo(()=>a==null?void 0:a.map(h=>({label:h.channel.replace(/[^0-9]*/,"Room"),value:h})),[a]);return ne.jsx(si,{children:t?ne.jsx("div",{className:"max-w-lg p-10",children:ne.jsx(Gge,{components:{Option:qge},isMulti:!1,menuIsOpen:!0,onChange:h=>{var f;return c((f=h==null?void 0:h.value)==null?void 0:f.channel)},options:u})}):ne.jsxs("div",{className:"h-screen p-3",children:[ne.jsx(zge,{children:"multi-channel"}),ne.jsx(Kge,{children:"This is multi-channel example. By create multi Agora Client. You can join multi-channel"}),ne.jsx("div",{className:"text-xl",children:ne.jsx(wi,{onClick:()=>o(!0),type:"primary",children:"show demo"})})]})})};const{Title:Jge,Paragraph:Qge,Text:Zge}=To,eve=()=>{const[e,t]=S.useState(!1);Ki({appid:St.appId,channel:St.channel,token:St.token},e);const[o,a]=S.useState(!1),[c,u]=S.useState(!1),h=qs(),[f,m]=S.useState(!0),{videoTracks:g}=Pm(f?h:h.filter((A,I)=>I==0)),{audioTracks:_}=xm(h);_.map(A=>A.play());const y=()=>ne.jsx("div",{className:"p-4 text-xl",children:ne.jsx(wi,{onClick:()=>m(A=>!A),type:"primary",children:`switch to layout ${f?2:1}`})}),b=()=>ne.jsx(ne.Fragment,{children:f?ne.jsx(tve,{videoTracks:g}):ne.jsx(nve,{videoTracks:g})});return ne.jsxs(si,{children:[e?ne.jsx(Bw,{cameraOn:c,micOn:o,renderAction:y,renderRemoteUsers:b}):ne.jsxs("div",{className:"h-screen p-3",children:[ne.jsx(Jge,{children:"SwitchLayout"}),ne.jsxs(Qge,{children:["By using ",ne.jsx(Zge,{keyboard:!0,children:"useRemoteVideoTracks"})," hook to dynamically switch the camera track, this will not generate a new track, but only dynamically subscribe and unsubscribe the track according to your needs."]})]}),ne.jsx(ba,{calling:e,cameraOn:c,micOn:o,setCalling:()=>{t(A=>!A)},setCamera:()=>{u(A=>!A)},setMic:()=>{a(A=>!A)}})]})};function tve({videoTracks:e}){return ne.jsx(ne.Fragment,{children:e.map(t=>ne.jsxs($a.Item,{children:[ne.jsx(km,{cover:Ys(),track:t},t.getUserId()),ne.jsx(Pc,{children:`Layout1 ${Ts(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}function nve({videoTracks:e}){return ne.jsx(ne.Fragment,{children:e.map(t=>ne.jsxs($a.Item,{children:[ne.jsx(km,{cover:Ys(),track:t},t.getUserId()),ne.jsx(Pc,{children:`Layout2 ${Ts(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}const v$=[{label:"switch-layout",component:eve},{label:"multi-channel",component:Xge}];function rve({videoTracks:e}){return ne.jsx(ne.Fragment,{children:e.map(t=>ne.jsxs($a.Item,{children:[ne.jsx(km,{cover:Ys(),track:t},t.getUserId()),ne.jsx(Pc,{children:`${Ts(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}const ive=()=>{const[e,t]=S.useState(!1);Ki({appid:St.appId,channel:St.channel,token:St.token},e);const[o,a]=S.useState(!1),[c,u]=S.useState(!1),h=qs(),{videoTracks:f}=Pm(h),{audioTracks:m}=xm(h);return m.map(g=>g.play()),ne.jsxs(si,{children:[e?ne.jsx(Bw,{cameraOn:c,micOn:o,renderRemoteUsers:()=>ne.jsx(rve,{videoTracks:f})}):ne.jsx(si,{}),ne.jsx(ba,{calling:e,cameraOn:c,micOn:o,setCalling:()=>{t(g=>!g)},setCamera:()=>{u(g=>!g)},setMic:()=>{a(g=>!g)}})]})},E$=[{label:"overview",component:ive}],{Title:ove,Paragraph:UT}=To,ave=()=>{Ki({appid:St.appId,channel:St.channel,token:St.token},!0);const[e,t]=S.useState(!1),[o,a]=S.useState(),{localMicrophoneTrack:c}=ip(e);return rp([c]),S.useEffect(()=>{c&&a({muted:c.muted,isPlaying:c.isPlaying,enabled:c.enabled})},[e,c]),ne.jsxs(si,{children:[ne.jsxs("div",{className:"h-screen p-3",children:[ne.jsx(ove,{children:"local audio track status"}),o&&ne.jsxs(ne.Fragment,{children:[ne.jsx(UT,{children:`muted: ${o==null?void 0:o.muted}`}),ne.jsx(UT,{children:`isPlaying: ${o.isPlaying}`}),ne.jsx(UT,{children:`enabled: ${o==null?void 0:o.enabled}`})]}),ne.jsx(ww,{disabled:!e,track:c})]}),ne.jsx(ba,{micOn:e,setMic:()=>{t(u=>!u)}})]})},{Title:sve}=To,cve=()=>{Ki({appid:St.appId,channel:St.channel,token:St.token},!0);const[e,t]=S.useState(!1),[o,a]=S.useState(!1),[c,u]=S.useState(!1),[h,f]=S.useState(!1),{localMicrophoneTrack:m}=ip(e),{localCameraTrack:g}=op(o);return rp([m,g]),ne.jsxs(si,{children:[ne.jsxs("div",{className:"h-screen p-3 overflow-auto",children:[ne.jsx(sve,{children:"local user status"}),ne.jsxs(wi,{className:"m-2",onClick:()=>{f(_=>!_)},type:h?"primary":"default",children:["playAudio : ",JSON.stringify(h)]}),ne.jsxs(wi,{className:"m-2",onClick:()=>{u(_=>!_)},type:c?"primary":"default",children:["playVideo : ",JSON.stringify(c)]}),ne.jsx(wi,{className:"m-2",onClick:()=>{u(!0),a(!1)},type:"primary",children:"cameraOn=false playVideo=true"}),ne.jsx(wi,{className:"m-2",onClick:()=>{u(!1),a(!0)},type:"primary",children:"cameraOn=true playVideo=false"}),ne.jsx(p5,{audioTrack:m,cameraOn:o,className:"m-2",micOn:e,playAudio:h,playVideo:c,style:{width:"300px",height:"300px"},videoTrack:g})]}),ne.jsx(ba,{cameraOn:o,micOn:e,setCamera:()=>{a(_=>!_)},setMic:()=>{t(_=>!_)}})]})},{Title:lve}=To,uve=()=>{Ki({appid:St.appId,channel:St.channel,token:St.token},!0);const[e,t]=S.useState(!1),{localCameraTrack:o}=op();return rp([o]),ne.jsxs(si,{children:[ne.jsxs("div",{className:"h-screen p-3",children:[ne.jsx(lve,{children:"local video track"}),ne.jsx(Ow,{disabled:!e,play:e,style:{width:"300px",height:"300px"},track:o})]}),ne.jsx(ba,{cameraOn:e,setCamera:()=>{t(a=>!a)}})]})},{Title:dve}=To,hve=()=>{const[e,t]=S.useState(!1);Ki({appid:St.appId,channel:St.channel,token:St.token},e);const[o,a]=S.useState(),c=qs(),{audioTracks:u}=xm(c);return S.useEffect(()=>{if(u&&u.length>0){const h=[];u.map(f=>{h.push({isPlay:f.isPlaying,id:f.getTrackId(),track:f})}),a(h)}else a([])},[u]),S.useEffect(()=>{e||a([])},[e]),ne.jsxs(si,{children:[ne.jsxs("div",{className:"h-screen p-3",children:[ne.jsx(dve,{children:"remote audio track status"}),o&&o.length>0&&o.map(h=>ne.jsxs("div",{children:[ne.jsx("div",{className:"p-4 text-xl",children:ne.jsx(wi,{onClick:()=>{h.isPlay=!h.isPlay,a([...o])},type:"primary",children:"switch this remote audio track play status"})}),h.isPlay,ne.jsx(f5,{play:h.isPlay,track:h.track})]},h.id))]}),ne.jsx(ba,{calling:e,setCalling:()=>{t(h=>!h)}})]})},{Title:pve}=To,fve=()=>{const[e,t]=S.useState(!1),o=S.useMemo(()=>Ys(),[]);Ki({appid:St.appId,channel:St.channel,token:St.token},e);const[a,c]=S.useState(),u=qs();return S.useEffect(()=>{if(u.length>0){const h=[];u.map(f=>{h.push({playVideo:!0,playAudio:!0,id:f.uid,user:f})}),c(h)}else c([])},[u]),S.useEffect(()=>{e||c([])},[e]),ne.jsxs(si,{children:[ne.jsxs("div",{className:"h-screen p-3",children:[ne.jsx(pve,{children:"RemoteUser"}),a&&a.length>0&&a.map(h=>ne.jsxs("div",{children:[ne.jsxs("div",{className:"text-xl",children:[ne.jsx(wi,{className:"m-2",onClick:()=>{h.playVideo=!h.playVideo,c([...a])},type:h.playVideo?"default":"primary",children:`${h.playVideo?"stop":"play"} RemoteUser Video`}),ne.jsx(wi,{className:"m-2",onClick:()=>{h.playAudio=!h.playAudio,c([...a])},type:h.playAudio?"default":"primary",children:`${h.playAudio?"stop":"play"} RemoteUser Audio`})]}),ne.jsx("div",{className:"p-4 text-xl",children:ne.jsx(Nw,{cover:o,playAudio:h.playAudio,playVideo:h.playVideo,style:{width:"150px",height:"100px"},user:h.user})})]},h.id))]}),ne.jsx(ba,{calling:e,setCalling:()=>{t(h=>!h)}})]})},{Title:mve}=To,gve=()=>{const[e,t]=S.useState(!1);Ki({appid:St.appId,channel:St.channel,token:St.token},e);const[o,a]=S.useState(),c=qs(),{videoTracks:u}=Pm(c);return S.useEffect(()=>{if(u&&u.length>0){const h=[];u.map(f=>{h.push({isPlay:!0,id:f.getTrackId(),track:f})}),a(h)}else a([])},[u]),S.useEffect(()=>{e||a([])},[e]),ne.jsxs(si,{children:[ne.jsxs("div",{className:"h-screen p-3",children:[ne.jsx(mve,{children:"remote video track status"}),o&&o.length>0&&o.map(h=>ne.jsxs("div",{children:[ne.jsx("div",{className:"p-4 text-xl",children:ne.jsx(wi,{onClick:()=>{h.isPlay=!h.isPlay,a([...o])},type:"primary",children:"switch this remote video track play status"})}),ne.jsx("div",{className:"p-4 text-xl",children:ne.jsx(Aw,{play:h.isPlay,style:{width:"150px",height:"100px"},track:h.track})})]},h.id))]}),ne.jsx(ba,{calling:e,setCalling:()=>{t(h=>!h)}})]})},_$=[{label:"LocalAudioTrack",component:ave},{label:"RemoteAudioTrack",component:hve},{label:"LocalVideoTrack",component:uve},{label:"RemoteVideoTrack",component:gve},{label:"LocalUser",component:cve},{label:"RemoteUser",component:fve}],{Title:vve}=To,Eve=()=>{Ki({appid:St.appId,channel:St.channel,token:St.token},!0);const[e,t]=S.useState(!1),{localMicrophoneTrack:o}=ip();return Iw(o,e),ne.jsxs(si,{children:[ne.jsx("div",{className:"h-screen p-3",children:ne.jsx(vve,{children:"useAutoPlayAudioTrack"})}),ne.jsx(ba,{micOn:e,setMic:()=>{t(a=>!a)}})]})},{Title:_ve}=To,Sve=()=>{Ki({appid:St.appId,channel:St.channel,token:St.token},!0);const[e,t]=S.useState(!1),o=S.useRef(null),{localCameraTrack:a}=op();return Rw(a,e,o.current),ne.jsxs(si,{children:[ne.jsxs("div",{className:"h-screen p-3",children:[ne.jsx(_ve,{children:"useAutoPlayVideoTrack"}),ne.jsx("div",{className:"p-4 text-xl",children:ne.jsx("div",{ref:c=>o.current=c,style:{width:"150px",height:"100px"}})})]}),ne.jsx(ba,{cameraOn:e,setCamera:()=>{t(c=>!c)}})]})},{Title:yve,Paragraph:FT,Text:Cve}=To,bve=()=>{const[e,t]=S.useState(!1),o=tpe();return Ki({appid:St.appId,channel:St.channel,token:St.token},e),ne.jsx(si,{children:ne.jsxs("div",{className:"h-screen p-3",children:[ne.jsx(yve,{children:"useConnectionState"}),ne.jsxs(FT,{children:["By using ",ne.jsx(Cve,{keyboard:!0,children:"useConnectionState"})," hook to get the current connection state of the client."]}),ne.jsx(FT,{children:`result: ${o}`}),ne.jsxs(FT,{children:[ne.jsx(wi,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),ne.jsx(wi,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:Tve,Paragraph:VT,Text:Rve}=To,Ive=()=>{const[e,t]=S.useState(!1),o=y_();return Ki({appid:St.appId,channel:St.channel,token:St.token},e),ne.jsx(si,{children:ne.jsxs("div",{className:"h-screen p-3",children:[ne.jsx(Tve,{children:"useCurrentUID"}),ne.jsxs(VT,{children:["By using ",ne.jsx(Rve,{keyboard:!0,children:"useCurrentUID"})," hook to get the UID of the current user."]}),ne.jsx(VT,{children:`result: ${o}`}),ne.jsxs(VT,{children:[ne.jsx(wi,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),ne.jsx(wi,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:wve,Paragraph:jT,Text:Ove}=To,Ave=()=>{const[e,t]=S.useState(!1),o=ws();return Ki({appid:St.appId,channel:St.channel,token:St.token},e),ne.jsx(si,{children:ne.jsxs("div",{className:"h-screen p-3",children:[ne.jsx(wve,{children:"useIsConnected"}),ne.jsxs(jT,{children:["By using ",ne.jsx(Ove,{keyboard:!0,children:"useIsConnected"})," hook to determines whether the client is successfully connected to Agora server."]}),ne.jsx(jT,{children:`result: ${o}`}),ne.jsxs(jT,{children:[ne.jsx(wi,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),ne.jsx(wi,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:Nve,Paragraph:zV,Text:df}=To,xve=()=>{const[e,t]=S.useState(!1),{data:o,isLoading:a,isConnected:c,error:u}=Ki({appid:St.appId,channel:St.channel,token:St.token},e),[h,f]=S.useState(!1),[m,g]=S.useState(!1),_=qs(),{videoTracks:y}=Pm(_),{audioTracks:b}=xm(_);b.map(I=>I.play());const A=()=>ne.jsx(ne.Fragment,{children:y.map(I=>ne.jsxs($a.Item,{children:[ne.jsx(km,{cover:Ys(),track:I},I.getUserId()),ne.jsx(Pc,{children:`${Ts(I.getUserId())}{${I.getUserId()}}`})]},I.getUserId()))});return ne.jsxs(si,{children:[ne.jsxs("div",{className:"h-screen p-3",children:[ne.jsx(Nve,{children:"UseJoin"}),ne.jsxs(zV,{children:["By using ",ne.jsx(df,{keyboard:!0,children:"UseJoin"})," hook to join room."]}),ne.jsxs(zV,{children:["You can do some actions like fetching token before calling join.",ne.jsx("br",{}),"Below is the returned data."]}),ne.jsxs(df,{children:["data: ",o]}),ne.jsxs(df,{className:"pl-3",children:["isLoading: ",`${a}`]}),ne.jsxs(df,{className:"pl-3",children:["isConnected: ",`${c}`]}),ne.jsxs(df,{className:"pl-3",children:["error: ",`${JSON.stringify(u)}`]})]}),e&&ne.jsx(Bw,{cameraOn:m,micOn:h,renderRemoteUsers:A}),ne.jsx(ba,{calling:e,cameraOn:m,micOn:h,setCalling:()=>{t(I=>!I)},setCamera:()=>{g(I=>!I)},setMic:()=>{f(I=>!I)}})]})},{Title:Pve,Paragraph:Dve}=To,kve=()=>{const e=npe();return Ki({appid:St.appId,channel:St.channel,token:St.token},!0),ne.jsx(si,{children:ne.jsxs("div",{className:"h-screen p-3",children:[ne.jsx(Pve,{children:"useNetworkQuality"}),ne.jsx(Dve,{children:`result: ${JSON.stringify(e)}`})]})})},Lve=()=>{const[e,t]=S.useState(!1),o=y_()||0,a=S.useMemo(()=>Ts(o),[o]),c=S.useMemo(()=>Ys(),[]),{isConnected:u}=Ki({appid:St.appId,channel:St.channel,token:St.token},e),[h,f]=S.useState(!1),[m,g]=S.useState(!1),{localMicrophoneTrack:_}=ip(h),{localCameraTrack:y}=op(m);rp([_,y]);const b=qs(),A=b.filter(x=>x.hasAudio||x.hasVideo),{videoTracks:I}=Pm(b),{audioTracks:w}=xm(b);w.map(x=>x.play());const D=()=>ne.jsx(ne.Fragment,{children:I.map(x=>ne.jsxs($a.Item,{children:[ne.jsx(km,{cover:Ys(),track:x},x.getUserId()),ne.jsx(Pc,{children:`Layout1 ${Ts(x.getUserId())}{${x.getUserId()}}`})]},x.getUserId()))});return ne.jsxs(si,{children:[ne.jsxs(ne.Fragment,{children:[ne.jsx(Pw,{published:A.length+(h||m?1:0),total:b.length+1}),ne.jsxs($a,{children:[u&&ne.jsx($a.Item,{children:ne.jsx(xw,{audioTrack:_,cameraOn:m,cover:c,micOn:h,videoTrack:y,children:ne.jsx(Pc,{children:`${a}{${o}}`})})}),D?D():void 0]})]}),ne.jsx(ba,{calling:e,cameraOn:m,micOn:h,setCalling:()=>t(x=>!x),setCamera:()=>{g(x=>!x)},setMic:()=>{f(x=>!x)}})]})},Mve=()=>{const[e,t]=S.useState(!1),o=ws(),a=y_()||0,c=S.useMemo(()=>Ts(a),[a]),u=S.useMemo(()=>Ys(),[]);Ki({appid:St.appId,channel:St.channel,token:St.token},e);const[h,f]=S.useState(!1),[m,g]=S.useState(!1),{localMicrophoneTrack:_}=ip(h),{localCameraTrack:y}=op(m);rp([_,y]);const b=qs(),A=b.filter(I=>I.hasAudio||I.hasVideo);return ne.jsxs(si,{children:[ne.jsxs(ne.Fragment,{children:[ne.jsx(Pw,{published:A.length+(h||m?1:0),total:b.length+1}),ne.jsxs($a,{children:[o&&ne.jsx($a.Item,{children:ne.jsx(xw,{audioTrack:_,cameraOn:m,cover:u,micOn:h,videoTrack:y,children:ne.jsx(Pc,{children:`${c}{${a}}`})})}),b.map(I=>ne.jsxs($a.Item,{children:[ne.jsx(Nw,{cover:Ys(),user:I}),ne.jsx(Pc,{children:`${Ts(I.uid)}{${I.uid}}`})]},I.uid))]})]}),ne.jsx(ba,{calling:e,cameraOn:m,micOn:h,setCalling:()=>t(I=>!I),setCamera:()=>{g(I=>!I)},setMic:()=>{f(I=>!I)}})]})},S$=[{label:"useJoin",component:xve},{label:"usePublish",component:Lve},{label:"useRemoteUsers",component:Mve},{label:"useConnectionState",component:bve},{label:"useIsConnected",component:Ave},{label:"useCurrentUID",component:Ive},{label:"useAutoPlayAudioTrack",component:Eve},{label:"useAutoPlayVideoTrack",component:Sve},{label:"useNetworkQuality",component:kve}],KV=()=>{const[e,t]=S.useState(St.channel),o=m=>{t(m.target.value)},[a,c]=jde.useNotification(),u=m=>{a[m]({message:"Configuration Saved",description:"Go to other pages and try it now!"})},h=()=>{St.channel=e,u("success")},f={wrapperCol:{span:14,offset:4}};return ne.jsxs(si,{children:[c,ne.jsx("div",{className:"p-4",children:ne.jsx(IF.Item,{label:"Channel Name",children:ne.jsx(zue,{onChange:o,style:{width:"200px"},value:e})})}),ne.jsx(IF.Item,{...f,children:ne.jsx(wi,{onClick:h,type:"primary",children:"Save configuration"})})]})},{Content:Uve,Sider:Fve}=PI,Vi=["Basic","Hooks","Components","Advanced","Setting"],Vve=[{label:Vi[0],key:Vi[0],children:E$.map(e=>({key:`/${Vi[0]}/${e.label}`,label:e.label}))},{label:Vi[1],key:Vi[1],children:S$.map(e=>({key:`/${Vi[1]}/${e.label}`,label:e.label}))},{label:Vi[2],key:Vi[2],children:_$.map(e=>({key:`/${Vi[2]}/${e.label}`,label:e.label}))},{label:Vi[3],key:Vi[3],children:v$.map(e=>({key:`/${Vi[3]}/${e.label}`,label:e.label}))},{label:"settings",key:"/setting"}];function jve(){const[e,t]=S.useState(!1),[o,a]=S.useState([window.location.hash.slice(1).split("/")[1]]),c=h=>{const f=h.find(m=>o.indexOf(m)===-1);f&&Vi.indexOf(f)===-1?a(h):a(f?[f]:[])},u=YZ();return ne.jsx(ne.Fragment,{children:ne.jsxs(PI,{children:[ne.jsx(Fve,{collapsed:e,collapsible:!0,onCollapse:h=>t(h),style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0},children:ne.jsx(Ble,{items:Vve,mode:"inline",onClick:h=>{u(h.key)},onOpenChange:c,openKeys:o,selectedKeys:[window.location.hash.slice(1)],theme:"dark"})}),ne.jsx(PI,{style:{marginLeft:e?80:200},children:ne.jsxs(Uve,{children:[ne.jsxs(lee,{children:[ne.jsx(_u,{Component:()=>ne.jsx(KV,{}),path:"/*"}),ne.jsx(_u,{Component:()=>ne.jsx(KV,{}),path:"/setting"}),E$.map(({label:h,component:f})=>{const m=f;return ne.jsx(_u,{Component:()=>ne.jsx(Qg,{children:ne.jsx(m,{})}),path:`/${Vi[0]}/${h}`},h)}),S$.map(({label:h,component:f})=>{const m=f;return ne.jsx(_u,{Component:()=>ne.jsx(Qg,{children:ne.jsx(m,{})}),path:`/${Vi[1]}/${h}`},h)}),_$.map(({label:h,component:f})=>{const m=f;return ne.jsx(_u,{Component:()=>ne.jsx(Qg,{children:ne.jsx(m,{})}),path:`/${Vi[2]}/${h}`},h)}),v$.map(({label:h,component:f})=>{const m=f;return ne.jsx(_u,{Component:()=>ne.jsx(Qg,{children:ne.jsx(m,{})}),path:`/${Vi[3]}/${h}`},h)})]}),ne.jsx("a",{"aria-label":"View source on GitHub",className:"github-corner",href:"https://github.com/AgoraIO-Extensions/agora-rtc-react",rel:"noreferrer",target:"_blank",children:ne.jsxs("svg",{"aria-hidden":"true",className:"github-corner-svg",height:"80",viewBox:"0 0 250 250",width:"80",children:[ne.jsx("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),ne.jsx("path",{className:"github-corner-svg-arm",d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}),ne.jsx("path",{className:"github-corner-svg-body",d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"})]})})]})})]})})}Du.setLogLevel(2);BT.createRoot(document.getElementById("root")).render(ne.jsx(S.StrictMode,{children:ne.jsx(dee,{children:ne.jsx(jve,{})})}));
