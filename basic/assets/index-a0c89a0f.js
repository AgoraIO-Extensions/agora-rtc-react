var S0e=Object.defineProperty;var y0e=(e,r,o)=>r in e?S0e(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o;var QS=(e,r,o)=>(y0e(e,typeof r!="symbol"?r+"":r,o),o);function vG(e,r){for(var o=0;o<r.length;o++){const s=r[o];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(s,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function o(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(c){if(c.ep)return;c.ep=!0;const d=o(c);fetch(c.href,d)}})();var In=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function C0e(e){if(e.__esModule)return e;var r=e.default;if(typeof r=="function"){var o=function s(){return this instanceof s?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};o.prototype=r.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var c=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(o,s,c.get?c:{enumerable:!0,get:function(){return e[s]}})}),o}var EG={exports:{}},ub={},_G={exports:{}},cr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv=Symbol.for("react.element"),b0e=Symbol.for("react.portal"),T0e=Symbol.for("react.fragment"),R0e=Symbol.for("react.strict_mode"),w0e=Symbol.for("react.profiler"),I0e=Symbol.for("react.provider"),A0e=Symbol.for("react.context"),O0e=Symbol.for("react.forward_ref"),x0e=Symbol.for("react.suspense"),N0e=Symbol.for("react.memo"),P0e=Symbol.for("react.lazy"),rH=Symbol.iterator;function D0e(e){return e===null||typeof e!="object"?null:(e=rH&&e[rH]||e["@@iterator"],typeof e=="function"?e:null)}var SG={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yG=Object.assign,CG={};function _m(e,r,o){this.props=e,this.context=r,this.refs=CG,this.updater=o||SG}_m.prototype.isReactComponent={};_m.prototype.setState=function(e,r){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,r,"setState")};_m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bG(){}bG.prototype=_m.prototype;function nD(e,r,o){this.props=e,this.context=r,this.refs=CG,this.updater=o||SG}var rD=nD.prototype=new bG;rD.constructor=nD;yG(rD,_m.prototype);rD.isPureReactComponent=!0;var iH=Array.isArray,TG=Object.prototype.hasOwnProperty,iD={current:null},RG={key:!0,ref:!0,__self:!0,__source:!0};function wG(e,r,o){var s,c={},d=null,f=null;if(r!=null)for(s in r.ref!==void 0&&(f=r.ref),r.key!==void 0&&(d=""+r.key),r)TG.call(r,s)&&!RG.hasOwnProperty(s)&&(c[s]=r[s]);var v=arguments.length-2;if(v===1)c.children=o;else if(1<v){for(var g=Array(v),_=0;_<v;_++)g[_]=arguments[_+2];c.children=g}if(e&&e.defaultProps)for(s in v=e.defaultProps,v)c[s]===void 0&&(c[s]=v[s]);return{$$typeof:Fv,type:e,key:d,ref:f,props:c,_owner:iD.current}}function L0e(e,r){return{$$typeof:Fv,type:e.type,key:r,ref:e.ref,props:e.props,_owner:e._owner}}function oD(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fv}function k0e(e){var r={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(o){return r[o]})}var oH=/\/+/g;function UA(e,r){return typeof e=="object"&&e!==null&&e.key!=null?k0e(""+e.key):r.toString(36)}function Fy(e,r,o,s,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(d){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case Fv:case b0e:f=!0}}if(f)return f=e,c=c(f),e=s===""?"."+UA(f,0):s,iH(c)?(o="",e!=null&&(o=e.replace(oH,"$&/")+"/"),Fy(c,r,o,"",function(_){return _})):c!=null&&(oD(c)&&(c=L0e(c,o+(!c.key||f&&f.key===c.key?"":(""+c.key).replace(oH,"$&/")+"/")+e)),r.push(c)),1;if(f=0,s=s===""?".":s+":",iH(e))for(var v=0;v<e.length;v++){d=e[v];var g=s+UA(d,v);f+=Fy(d,r,o,g,c)}else if(g=D0e(e),typeof g=="function")for(e=g.call(e),v=0;!(d=e.next()).done;)d=d.value,g=s+UA(d,v++),f+=Fy(d,r,o,g,c);else if(d==="object")throw r=String(e),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return f}function ZS(e,r,o){if(e==null)return e;var s=[],c=0;return Fy(e,s,"","",function(d){return r.call(o,d,c++)}),s}function M0e(e){if(e._status===-1){var r=e._result;r=r(),r.then(function(o){(e._status===0||e._status===-1)&&(e._status=1,e._result=o)},function(o){(e._status===0||e._status===-1)&&(e._status=2,e._result=o)}),e._status===-1&&(e._status=0,e._result=r)}if(e._status===1)return e._result.default;throw e._result}var Na={current:null},Uy={transition:null},F0e={ReactCurrentDispatcher:Na,ReactCurrentBatchConfig:Uy,ReactCurrentOwner:iD};function IG(){throw Error("act(...) is not supported in production builds of React.")}cr.Children={map:ZS,forEach:function(e,r,o){ZS(e,function(){r.apply(this,arguments)},o)},count:function(e){var r=0;return ZS(e,function(){r++}),r},toArray:function(e){return ZS(e,function(r){return r})||[]},only:function(e){if(!oD(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};cr.Component=_m;cr.Fragment=T0e;cr.Profiler=w0e;cr.PureComponent=nD;cr.StrictMode=R0e;cr.Suspense=x0e;cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F0e;cr.act=IG;cr.cloneElement=function(e,r,o){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=yG({},e.props),c=e.key,d=e.ref,f=e._owner;if(r!=null){if(r.ref!==void 0&&(d=r.ref,f=iD.current),r.key!==void 0&&(c=""+r.key),e.type&&e.type.defaultProps)var v=e.type.defaultProps;for(g in r)TG.call(r,g)&&!RG.hasOwnProperty(g)&&(s[g]=r[g]===void 0&&v!==void 0?v[g]:r[g])}var g=arguments.length-2;if(g===1)s.children=o;else if(1<g){v=Array(g);for(var _=0;_<g;_++)v[_]=arguments[_+2];s.children=v}return{$$typeof:Fv,type:e.type,key:c,ref:d,props:s,_owner:f}};cr.createContext=function(e){return e={$$typeof:A0e,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:I0e,_context:e},e.Consumer=e};cr.createElement=wG;cr.createFactory=function(e){var r=wG.bind(null,e);return r.type=e,r};cr.createRef=function(){return{current:null}};cr.forwardRef=function(e){return{$$typeof:O0e,render:e}};cr.isValidElement=oD;cr.lazy=function(e){return{$$typeof:P0e,_payload:{_status:-1,_result:e},_init:M0e}};cr.memo=function(e,r){return{$$typeof:N0e,type:e,compare:r===void 0?null:r}};cr.startTransition=function(e){var r=Uy.transition;Uy.transition={};try{e()}finally{Uy.transition=r}};cr.unstable_act=IG;cr.useCallback=function(e,r){return Na.current.useCallback(e,r)};cr.useContext=function(e){return Na.current.useContext(e)};cr.useDebugValue=function(){};cr.useDeferredValue=function(e){return Na.current.useDeferredValue(e)};cr.useEffect=function(e,r){return Na.current.useEffect(e,r)};cr.useId=function(){return Na.current.useId()};cr.useImperativeHandle=function(e,r,o){return Na.current.useImperativeHandle(e,r,o)};cr.useInsertionEffect=function(e,r){return Na.current.useInsertionEffect(e,r)};cr.useLayoutEffect=function(e,r){return Na.current.useLayoutEffect(e,r)};cr.useMemo=function(e,r){return Na.current.useMemo(e,r)};cr.useReducer=function(e,r,o){return Na.current.useReducer(e,r,o)};cr.useRef=function(e){return Na.current.useRef(e)};cr.useState=function(e){return Na.current.useState(e)};cr.useSyncExternalStore=function(e,r,o){return Na.current.useSyncExternalStore(e,r,o)};cr.useTransition=function(){return Na.current.useTransition()};cr.version="18.3.1";_G.exports=cr;var S=_G.exports;const Ve=wd(S),Fh=vG({__proto__:null,default:Ve},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0e=S,B0e=Symbol.for("react.element"),V0e=Symbol.for("react.fragment"),j0e=Object.prototype.hasOwnProperty,$0e=U0e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H0e={key:!0,ref:!0,__self:!0,__source:!0};function AG(e,r,o){var s,c={},d=null,f=null;o!==void 0&&(d=""+o),r.key!==void 0&&(d=""+r.key),r.ref!==void 0&&(f=r.ref);for(s in r)j0e.call(r,s)&&!H0e.hasOwnProperty(s)&&(c[s]=r[s]);if(e&&e.defaultProps)for(s in r=e.defaultProps,r)c[s]===void 0&&(c[s]=r[s]);return{$$typeof:B0e,type:e,key:d,ref:f,props:c,_owner:$0e.current}}ub.Fragment=V0e;ub.jsx=AG;ub.jsxs=AG;EG.exports=ub;var ue=EG.exports;var OG={exports:{}};(function(e,r){(function(o,s){e.exports=s()})(In,function(){function o(t,n){return n.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(a){if(a!=="default"&&!(a in t)){var l=Object.getOwnPropertyDescriptor(i,a);Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:function(){return i[a]}})}})}),Object.freeze(t)}var s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof In<"u"?In:typeof self<"u"?self:{};function c(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var d=function(t){try{return!!t()}catch{return!0}},f=!d(function(){var t=(function(){}).bind();return typeof t!="function"||t.hasOwnProperty("prototype")}),v=f,g=Function.prototype,_=g.call,C=v&&g.bind.bind(_,_),b=v?C:function(t){return function(){return _.apply(t,arguments)}},T=b({}.isPrototypeOf),I=function(t){return t&&t.Math==Math&&t},w=I(typeof globalThis=="object"&&globalThis)||I(typeof window=="object"&&window)||I(typeof self=="object"&&self)||I(typeof s=="object"&&s)||function(){return this}()||s||Function("return this")(),x=f,N=Function.prototype,P=N.apply,O=N.call,L=typeof Reflect=="object"&&Reflect.apply||(x?O.bind(P):function(){return O.apply(P,arguments)}),M=b,F=M({}.toString),V=M("".slice),j=function(t){return V(F(t),8,-1)},z=j,q=b,W=function(t){if(z(t)==="Function")return q(t)},J=typeof document=="object"&&document.all,te={all:J,IS_HTMLDDA:J===void 0&&J!==void 0},ee=te.all,oe=te.IS_HTMLDDA?function(t){return typeof t=="function"||t===ee}:function(t){return typeof t=="function"},pe={},ne=!d(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),ae=f,re=Function.prototype.call,he=ae?re.bind(re):function(){return re.apply(re,arguments)},fe={},se={}.propertyIsEnumerable,de=Object.getOwnPropertyDescriptor,ve=de&&!se.call({1:2},1);fe.f=ve?function(t){var n=de(this,t);return!!n&&n.enumerable}:se;var ie,be,Re=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},Pe=d,Ie=j,xe=Object,We=b("".split),De=Pe(function(){return!xe("z").propertyIsEnumerable(0)})?function(t){return Ie(t)=="String"?We(t,""):xe(t)}:xe,Ae=function(t){return t==null},je=Ae,Je=TypeError,Fe=function(t){if(je(t))throw Je("Can't call method on "+t);return t},ke=De,ht=Fe,Ze=function(t){return ke(ht(t))},mt=oe,Rt=te.all,ut=te.IS_HTMLDDA?function(t){return typeof t=="object"?t!==null:mt(t)||t===Rt}:function(t){return typeof t=="object"?t!==null:mt(t)},ot={},ze=ot,tt=w,bt=oe,Nt=function(t){return bt(t)?t:void 0},wt=function(t,n){return arguments.length<2?Nt(ze[t])||Nt(tt[t]):ze[t]&&ze[t][n]||tt[t]&&tt[t][n]},Xt=typeof navigator<"u"&&String(navigator.userAgent)||"",$t=w,Lt=Xt,Wt=$t.process,Jt=$t.Deno,Ft=Wt&&Wt.versions||Jt&&Jt.version,yt=Ft&&Ft.v8;yt&&(be=(ie=yt.split("."))[0]>0&&ie[0]<4?1:+(ie[0]+ie[1])),!be&&Lt&&(!(ie=Lt.match(/Edge\/(\d+)/))||ie[1]>=74)&&(ie=Lt.match(/Chrome\/(\d+)/))&&(be=+ie[1]);var It=be,ft=It,Pt=d,Cn=w.String,bn=!!Object.getOwnPropertySymbols&&!Pt(function(){var t=Symbol();return!Cn(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&ft&&ft<41}),si=bn&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Qr=wt,vi=oe,xr=T,nr=Object,ir=si?function(t){return typeof t=="symbol"}:function(t){var n=Qr("Symbol");return vi(n)&&xr(n.prototype,nr(t))},Tn=String,Ut=function(t){try{return Tn(t)}catch{return"Object"}},kt=oe,Ct=Ut,Pn=TypeError,tn=function(t){if(kt(t))return t;throw Pn(Ct(t)+" is not a function")},pt=tn,gt=Ae,Ht=function(t,n){var i=t[n];return gt(i)?void 0:pt(i)},Gt=he,Bt=oe,rn=ut,or=TypeError,Gn={exports:{}},Fn=w,Zn=Object.defineProperty,$r=function(t,n){try{Zn(Fn,t,{value:n,configurable:!0,writable:!0})}catch{Fn[t]=n}return n},ci="__core-js_shared__",Zr=w[ci]||$r(ci,{}),Xi=Zr;(Gn.exports=function(t,n){return Xi[t]||(Xi[t]=n!==void 0?n:{})})("versions",[]).push({version:"3.31.1",mode:"pure",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"});var dr=Gn.exports,li=Fe,_t=Object,xt=function(t){return _t(li(t))},gn=xt,Dn=b({}.hasOwnProperty),sn=Object.hasOwn||function(t,n){return Dn(gn(t),n)},Ui=b,Bi=0,La=Math.random(),nn=Ui(1 .toString),Rn=function(t){return"Symbol("+(t===void 0?"":t)+")_"+nn(++Bi+La,36)},Kn=dr,fi=sn,ra=Rn,Yc=bn,Ro=si,Vi=w.Symbol,ka=Kn("wks"),Ns=Ro?Vi.for||Vi:Vi&&Vi.withoutSetter||ra,Un=function(t){return fi(ka,t)||(ka[t]=Yc&&fi(Vi,t)?Vi[t]:Ns("Symbol."+t)),ka[t]},Xc=he,vr=ut,Kt=ir,Vt=Ht,Er=function(t,n){var i,a;if(n==="string"&&Bt(i=t.toString)&&!rn(a=Gt(i,t))||Bt(i=t.valueOf)&&!rn(a=Gt(i,t))||n!=="string"&&Bt(i=t.toString)&&!rn(a=Gt(i,t)))return a;throw or("Can't convert object to primitive value")},_r=TypeError,Mr=Un("toPrimitive"),ui=function(t,n){if(!vr(t)||Kt(t))return t;var i,a=Vt(t,Mr);if(a){if(n===void 0&&(n="default"),i=Xc(a,t,n),!vr(i)||Kt(i))return i;throw _r("Can't convert object to primitive value")}return n===void 0&&(n="number"),Er(t,n)},Vo=ir,ji=function(t){var n=ui(t,"string");return Vo(n)?n:n+""},wo=ut,so=w.document,jo=wo(so)&&wo(so.createElement),ia=function(t){return jo?so.createElement(t):{}},$o=ia,sf=!ne&&!d(function(){return Object.defineProperty($o("div"),"a",{get:function(){return 7}}).a!=7}),cE=ne,lE=he,Ho=fe,Cu=Re,bu=Ze,Jc=ji,Tu=sn,cf=sf,Dd=Object.getOwnPropertyDescriptor;pe.f=cE?Dd:function(t,n){if(t=bu(t),n=Jc(n),cf)try{return Dd(t,n)}catch{}if(Tu(t,n))return Cu(!lE(Ho.f,t,n),t[n])};var Um=d,Qt=oe,wn=/#|\.prototype\./,Fr=function(t,n){var i=pi[Oi(t)];return i==Bm||i!=lf&&(Qt(n)?Um(n):!!n)},Oi=Fr.normalize=function(t){return String(t).replace(wn,".").toLowerCase()},pi=Fr.data={},lf=Fr.NATIVE="N",Bm=Fr.POLYFILL="P",Vm=Fr,uf=tn,HZ=f,zZ=W(W.bind),Ru=function(t,n){return uf(t),n===void 0?t:HZ?zZ(t,n):function(){return t.apply(n,arguments)}},Ps={},TL=ne&&d(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),WZ=ut,GZ=String,KZ=TypeError,oa=function(t){if(WZ(t))return t;throw KZ(GZ(t)+" is not an object")},qZ=ne,YZ=sf,XZ=TL,uE=oa,RL=ji,JZ=TypeError,UT=Object.defineProperty,QZ=Object.getOwnPropertyDescriptor,BT="enumerable",VT="configurable",jT="writable";Ps.f=qZ?XZ?function(t,n,i){if(uE(t),n=RL(n),uE(i),typeof t=="function"&&n==="prototype"&&"value"in i&&jT in i&&!i[jT]){var a=QZ(t,n);a&&a[jT]&&(t[n]=i.value,i={configurable:VT in i?i[VT]:a[VT],enumerable:BT in i?i[BT]:a[BT],writable:!1})}return UT(t,n,i)}:UT:function(t,n,i){if(uE(t),n=RL(n),uE(i),YZ)try{return UT(t,n,i)}catch{}if("get"in i||"set"in i)throw JZ("Accessors not supported");return"value"in i&&(t[n]=i.value),t};var ZZ=Ps,eee=Re,wu=ne?function(t,n,i){return ZZ.f(t,n,eee(1,i))}:function(t,n,i){return t[n]=i,t},dE=w,tee=L,nee=W,ree=oe,iee=pe.f,oee=Vm,df=ot,aee=Ru,hf=wu,wL=sn,see=function(t){var n=function(i,a,l){if(this instanceof n){switch(arguments.length){case 0:return new t;case 1:return new t(i);case 2:return new t(i,a)}return new t(i,a,l)}return tee(t,this,arguments)};return n.prototype=t.prototype,n},$n=function(t,n){var i,a,l,u,h,p,m,E,y,R=t.target,A=t.global,D=t.stat,H=t.proto,B=A?dE:D?dE[R]:(dE[R]||{}).prototype,$=A?df:df[R]||hf(df,R,{})[R],K=$.prototype;for(u in n)a=!(i=oee(A?u:R+(D?".":"#")+u,t.forced))&&B&&wL(B,u),p=$[u],a&&(m=t.dontCallGetSet?(y=iee(B,u))&&y.value:B[u]),h=a&&m?m:n[u],a&&typeof p==typeof h||(E=t.bind&&a?aee(h,dE):t.wrap&&a?see(h):H&&ree(h)?nee(h):h,(t.sham||h&&h.sham||p&&p.sham)&&hf(E,"sham",!0),hf($,u,E),H&&(wL(df,l=R+"Prototype")||hf(df,l,{}),hf(df[l],u,h),t.real&&K&&(i||!K[u])&&hf(K,u,h)))},cee=Math.ceil,lee=Math.floor,uee=Math.trunc||function(t){var n=+t;return(n>0?lee:cee)(n)},dee=uee,$T=function(t){var n=+t;return n!=n||n===0?0:dee(n)},hee=$T,fee=Math.max,pee=Math.min,HT=function(t,n){var i=hee(t);return i<0?fee(i+n,0):pee(i,n)},mee=$T,gee=Math.min,IL=function(t){return t>0?gee(mee(t),9007199254740991):0},vee=IL,Ul=function(t){return vee(t.length)},Eee=Ze,_ee=HT,See=Ul,AL=function(t){return function(n,i,a){var l,u=Eee(n),h=See(u),p=_ee(a,h);if(t&&i!=i){for(;h>p;)if((l=u[p++])!=l)return!0}else for(;h>p;p++)if((t||p in u)&&u[p]===i)return t||p||0;return!t&&-1}},zT={includes:AL(!0),indexOf:AL(!1)},yee=zT.includes;$n({target:"Array",proto:!0,forced:d(function(){return!Array(1).includes()})},{includes:function(t){return yee(this,t,arguments.length>1?arguments[1]:void 0)}});var Cee=ot,Ds=function(t){return Cee[t+"Prototype"]},bee=Ds("Array").includes,Tee=ut,Ree=j,wee=Un("match"),OL=function(t){var n;return Tee(t)&&((n=t[wee])!==void 0?!!n:Ree(t)=="RegExp")},Iee=OL,Aee=TypeError,xL={};xL[Un("toStringTag")]="z";var WT=String(xL)==="[object z]",Oee=WT,xee=oe,hE=j,Nee=Un("toStringTag"),Pee=Object,Dee=hE(function(){return arguments}())=="Arguments",Qc=Oee?hE:function(t){var n,i,a;return t===void 0?"Undefined":t===null?"Null":typeof(i=function(l,u){try{return l[u]}catch{}}(n=Pee(t),Nee))=="string"?i:Dee?hE(n):(a=hE(n))=="Object"&&xee(n.callee)?"Arguments":a},Lee=Qc,kee=String,rs=function(t){if(Lee(t)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return kee(t)},Mee=Un("match"),Fee=$n,Uee=function(t){if(Iee(t))throw Aee("The method doesn't accept regular expressions");return t},Bee=Fe,NL=rs,Vee=function(t){var n=/./;try{"/./"[t](n)}catch{try{return n[Mee]=!1,"/./"[t](n)}catch{}}return!1},jee=b("".indexOf);Fee({target:"String",proto:!0,forced:!Vee("includes")},{includes:function(t){return!!~jee(NL(Bee(this)),NL(Uee(t)),arguments.length>1?arguments[1]:void 0)}});var $ee=Ds("String").includes,PL=T,Hee=bee,zee=$ee,GT=Array.prototype,KT=String.prototype,Wee=function(t){var n=t.includes;return t===GT||PL(GT,t)&&n===GT.includes?Hee:typeof t=="string"||t===KT||PL(KT,t)&&n===KT.includes?zee:n},Ke=c(Wee),Gee=tn,Kee=xt,qee=De,Yee=Ul,Xee=TypeError,DL=function(t){return function(n,i,a,l){Gee(i);var u=Kee(n),h=qee(u),p=Yee(u),m=t?p-1:0,E=t?-1:1;if(a<2)for(;;){if(m in h){l=h[m],m+=E;break}if(m+=E,t?m<0:p<=m)throw Xee("Reduce of empty array with no initial value")}for(;t?m>=0:p>m;m+=E)m in h&&(l=i(l,h[m],m,u));return l}},Jee={left:DL(!1),right:DL(!0)},Qee=d,fE=function(t,n){var i=[][t];return!!i&&Qee(function(){i.call(null,n||function(){return 1},1)})},ff=typeof process<"u"&&j(process)=="process",Zee=Jee.left;$n({target:"Array",proto:!0,forced:!ff&&It>79&&It<83||!fE("reduce")},{reduce:function(t){var n=arguments.length;return Zee(this,t,n,n>1?arguments[1]:void 0)}});var ete=Ds("Array").reduce,tte=T,nte=ete,qT=Array.prototype,rte=function(t){var n=t.reduce;return t===qT||tte(qT,t)&&n===qT.reduce?nte:n},LL=rte,pc=c(LL),ite=j,jm=Array.isArray||function(t){return ite(t)=="Array"},ote=$n,ate=jm,ste=b([].reverse),kL=[1,2];ote({target:"Array",proto:!0,forced:String(kL)===String(kL.reverse())},{reverse:function(){return ate(this)&&(this.length=this.length),ste(this)}});var cte=Ds("Array").reverse,lte=T,ute=cte,YT=Array.prototype,dte=function(t){var n=t.reverse;return t===YT||lte(YT,t)&&n===YT.reverse?ute:n},ML=dte,FL=c(ML),hte=Rn,UL=dr("keys"),pE=function(t){return UL[t]||(UL[t]=hte(t))},fte=!d(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),pte=sn,mte=oe,gte=xt,vte=fte,BL=pE("IE_PROTO"),XT=Object,Ete=XT.prototype,JT=vte?XT.getPrototypeOf:function(t){var n=gte(t);if(pte(n,BL))return n[BL];var i=n.constructor;return mte(i)&&n instanceof i?i.prototype:n instanceof XT?Ete:null},_te=b,Ste=tn,yte=oe,Cte=String,bte=TypeError,Tte=function(t,n,i){try{return _te(Ste(Object.getOwnPropertyDescriptor(t,n)[i]))}catch{}},Rte=oa,wte=function(t){if(typeof t=="object"||yte(t))return t;throw bte("Can't set "+Cte(t)+" as a prototype")},Ite=Object.setPrototypeOf||("__proto__"in{}?function(){var t,n=!1,i={};try{(t=Tte(Object.prototype,"__proto__","set"))(i,[]),n=i instanceof Array}catch{}return function(a,l){return Rte(a),wte(l),n?t(a,l):a.__proto__=l,a}}():void 0),mE={},gE={},QT=sn,Ate=Ze,Ote=zT.indexOf,xte=gE,VL=b([].push),jL=function(t,n){var i,a=Ate(t),l=0,u=[];for(i in a)!QT(xte,i)&&QT(a,i)&&VL(u,i);for(;n.length>l;)QT(a,i=n[l++])&&(~Ote(u,i)||VL(u,i));return u},ZT=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Nte=jL,Pte=ZT.concat("length","prototype");mE.f=Object.getOwnPropertyNames||function(t){return Nte(t,Pte)};var $m={};$m.f=Object.getOwnPropertySymbols;var Dte=wt,Lte=mE,kte=$m,Mte=oa,Fte=b([].concat),Ute=Dte("Reflect","ownKeys")||function(t){var n=Lte.f(Mte(t)),i=kte.f;return i?Fte(n,i(t)):n},$L=sn,Bte=Ute,Vte=pe,jte=Ps,eR={},$te=jL,Hte=ZT,vE=Object.keys||function(t){return $te(t,Hte)},zte=ne,Wte=TL,Gte=Ps,Kte=oa,qte=Ze,Yte=vE;eR.f=zte&&!Wte?Object.defineProperties:function(t,n){Kte(t);for(var i,a=qte(n),l=Yte(n),u=l.length,h=0;u>h;)Gte.f(t,i=l[h++],a[i]);return t};var EE,HL=wt("document","documentElement"),Xte=oa,Jte=eR,zL=ZT,Qte=gE,Zte=HL,ene=ia,tR="prototype",nR="script",WL=pE("IE_PROTO"),rR=function(){},GL=function(t){return"<"+nR+">"+t+"</"+nR+">"},KL=function(t){t.write(GL("")),t.close();var n=t.parentWindow.Object;return t=null,n},_E=function(){try{EE=new ActiveXObject("htmlfile")}catch{}var t,n,i;_E=typeof document<"u"?document.domain&&EE?KL(EE):(n=ene("iframe"),i="java"+nR+":",n.style.display="none",Zte.appendChild(n),n.src=String(i),(t=n.contentWindow.document).open(),t.write(GL("document.F=Object")),t.close(),t.F):KL(EE);for(var a=zL.length;a--;)delete _E[tR][zL[a]];return _E()};Qte[WL]=!0;var Hm=Object.create||function(t,n){var i;return t!==null?(rR[tR]=Xte(t),i=new rR,rR[tR]=null,i[WL]=t):i=_E(),n===void 0?i:Jte.f(i,n)},tne=ut,nne=wu,qL=Error,rne=b("".replace),ine=String(qL("zxcasd").stack),YL=/\n\s*at [^:]*:[^\n]*/,one=YL.test(ine),ane=Re,sne=!d(function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",ane(1,7)),t.stack!==7)}),cne=wu,lne=function(t,n){if(one&&typeof t=="string"&&!qL.prepareStackTrace)for(;n--;)t=rne(t,YL,"");return t},une=sne,XL=Error.captureStackTrace,Ld={},dne=Ld,hne=Un("iterator"),fne=Array.prototype,JL=function(t){return t!==void 0&&(dne.Array===t||fne[hne]===t)},pne=Qc,QL=Ht,mne=Ae,gne=Ld,vne=Un("iterator"),SE=function(t){if(!mne(t))return QL(t,vne)||QL(t,"@@iterator")||gne[pne(t)]},Ene=he,_ne=tn,Sne=oa,yne=Ut,Cne=SE,bne=TypeError,iR=function(t,n){var i=arguments.length<2?Cne(t):n;if(_ne(i))return Sne(Ene(i,t));throw bne(yne(t)+" is not iterable")},Tne=he,ZL=oa,Rne=Ht,ek=function(t,n,i){var a,l;ZL(t);try{if(!(a=Rne(t,"return"))){if(n==="throw")throw i;return i}a=Tne(a,t)}catch(u){l=!0,a=u}if(n==="throw")throw i;if(l)throw a;return ZL(a),i},wne=Ru,Ine=he,Ane=oa,One=Ut,xne=JL,Nne=Ul,tk=T,Pne=iR,Dne=SE,nk=ek,Lne=TypeError,yE=function(t,n){this.stopped=t,this.result=n},rk=yE.prototype,zm=function(t,n,i){var a,l,u,h,p,m,E,y=i&&i.that,R=!(!i||!i.AS_ENTRIES),A=!(!i||!i.IS_RECORD),D=!(!i||!i.IS_ITERATOR),H=!(!i||!i.INTERRUPTED),B=wne(n,y),$=function(Y){return a&&nk(a,"normal",Y),new yE(!0,Y)},K=function(Y){return R?(Ane(Y),H?B(Y[0],Y[1],$):B(Y[0],Y[1])):H?B(Y,$):B(Y)};if(A)a=t.iterator;else if(D)a=t;else{if(!(l=Dne(t)))throw Lne(One(t)+" is not iterable");if(xne(l)){for(u=0,h=Nne(t);h>u;u++)if((p=K(t[u]))&&tk(rk,p))return p;return new yE(!1)}a=Pne(t,l)}for(m=A?t.next:a.next;!(E=Ine(m,a)).done;){try{p=K(E.value)}catch(Y){nk(a,"throw",Y)}if(typeof p=="object"&&p&&tk(rk,p))return p}return new yE(!1)},kne=rs,Mne=$n,Fne=T,Une=JT,CE=Ite,Bne=function(t,n,i){for(var a=Bte(n),l=jte.f,u=Vte.f,h=0;h<a.length;h++){var p=a[h];$L(t,p)||i&&$L(i,p)||l(t,p,u(n,p))}},ik=Hm,oR=wu,aR=Re,Vne=function(t,n){tne(n)&&"cause"in n&&nne(t,"cause",n.cause)},jne=function(t,n,i,a){une&&(XL?XL(t,n):cne(t,"stack",lne(i,a)))},$ne=zm,Hne=function(t,n){return t===void 0?arguments.length<2?"":n:kne(t)},zne=Un("toStringTag"),bE=Error,Wne=[].push,pf=function(t,n){var i,a=Fne(sR,this);CE?i=CE(bE(),a?Une(this):sR):(i=a?this:ik(sR),oR(i,zne,"Error")),n!==void 0&&oR(i,"message",Hne(n)),jne(i,pf,i.stack,1),arguments.length>2&&Vne(i,arguments[2]);var l=[];return $ne(t,Wne,{that:l}),oR(i,"errors",l),i};CE?CE(pf,bE):Bne(pf,bE,{name:!0});var sR=pf.prototype=ik(bE.prototype,{constructor:aR(1,pf),message:aR(1,""),name:aR(1,"AggregateError")});Mne({global:!0,constructor:!0,arity:2},{AggregateError:pf});var TE,Wm,RE,Gne=oe,ok=w.WeakMap,Kne=Gne(ok)&&/native code/.test(String(ok)),ak=w,qne=ut,Yne=wu,cR=sn,lR=Zr,Xne=pE,Jne=gE,sk="Object already initialized",uR=ak.TypeError,Qne=ak.WeakMap;if(Kne||lR.state){var Zc=lR.state||(lR.state=new Qne);Zc.get=Zc.get,Zc.has=Zc.has,Zc.set=Zc.set,TE=function(t,n){if(Zc.has(t))throw uR(sk);return n.facade=t,Zc.set(t,n),n},Wm=function(t){return Zc.get(t)||{}},RE=function(t){return Zc.has(t)}}else{var mf=Xne("state");Jne[mf]=!0,TE=function(t,n){if(cR(t,mf))throw uR(sk);return n.facade=t,Yne(t,mf,n),n},Wm=function(t){return cR(t,mf)?t[mf]:{}},RE=function(t){return cR(t,mf)}}var kd,ck,lk,Md={set:TE,get:Wm,has:RE,enforce:function(t){return RE(t)?Wm(t):TE(t,{})},getterFor:function(t){return function(n){var i;if(!qne(n)||(i=Wm(n)).type!==t)throw uR("Incompatible receiver, "+t+" required");return i}}},dR=ne,Zne=sn,uk=Function.prototype,ere=dR&&Object.getOwnPropertyDescriptor,hR=Zne(uk,"name"),dk={EXISTS:hR,PROPER:hR&&(function(){}).name==="something",CONFIGURABLE:hR&&(!dR||dR&&ere(uk,"name").configurable)},tre=wu,Iu=function(t,n,i,a){return a&&a.enumerable?t[n]=i:tre(t,n,i),t},nre=d,rre=oe,ire=ut,ore=Hm,hk=JT,are=Iu,fR=Un("iterator"),fk=!1;[].keys&&("next"in(lk=[].keys())?(ck=hk(hk(lk)))!==Object.prototype&&(kd=ck):fk=!0);var sre=!ire(kd)||nre(function(){var t={};return kd[fR].call(t)!==t});rre((kd=sre?{}:ore(kd))[fR])||are(kd,fR,function(){return this});var pk={IteratorPrototype:kd,BUGGY_SAFARI_ITERATORS:fk},cre=Qc,lre=WT?{}.toString:function(){return"[object "+cre(this)+"]"},ure=WT,dre=Ps.f,hre=wu,fre=sn,pre=lre,mk=Un("toStringTag"),Au=function(t,n,i,a){if(t){var l=i?t:t.prototype;fre(l,mk)||dre(l,mk,{configurable:!0,value:n}),a&&!ure&&hre(l,"toString",pre)}},mre=pk.IteratorPrototype,gre=Hm,vre=Re,Ere=Au,_re=Ld,Sre=function(){return this},pR=function(t,n,i,a){var l=n+" Iterator";return t.prototype=gre(mre,{next:vre(+!a,i)}),Ere(t,l,!1,!0),_re[l]=Sre,t},yre=$n,Cre=he,bre=dk,Tre=pR,Rre=JT,wre=Au,gk=Iu,vk=Ld,Ire=pk,Are=bre.PROPER,wE=Ire.BUGGY_SAFARI_ITERATORS,mR=Un("iterator"),Ek="keys",IE="values",_k="entries",Ore=function(){return this},Sk=function(t,n,i,a,l,u,h){Tre(i,n,a);var p,m,E,y=function(K){if(K===l&&B)return B;if(!wE&&K in D)return D[K];switch(K){case Ek:case IE:case _k:return function(){return new i(this,K)}}return function(){return new i(this)}},R=n+" Iterator",A=!1,D=t.prototype,H=D[mR]||D["@@iterator"]||l&&D[l],B=!wE&&H||y(l),$=n=="Array"&&D.entries||H;if($&&(p=Rre($.call(new t)))!==Object.prototype&&p.next&&(wre(p,R,!0,!0),vk[R]=Ore),Are&&l==IE&&H&&H.name!==IE&&(A=!0,B=function(){return Cre(H,this)}),l)if(m={values:y(IE),keys:u?B:y(Ek),entries:y(_k)},h)for(E in m)(wE||A||!(E in D))&&gk(D,E,m[E]);else yre({target:n,proto:!0,forced:wE||A},m);return h&&D[mR]!==B&&gk(D,mR,B,{name:l}),vk[n]=B,m},gR=function(t,n){return{value:t,done:n}},xre=Ze,yk=Ld,Ck=Md;Ps.f;var Nre=Sk,bk=gR,Tk="Array Iterator",Pre=Ck.set,Dre=Ck.getterFor(Tk);Nre(Array,"Array",function(t,n){Pre(this,{type:Tk,target:xre(t),index:0,kind:n})},function(){var t=Dre(this),n=t.target,i=t.kind,a=t.index++;return!n||a>=n.length?(t.target=void 0,bk(void 0,!0)):bk(i=="keys"?a:i=="values"?n[a]:[a,n[a]],!1)},"values"),yk.Arguments=yk.Array;var Lre=Ps,AE=function(t,n,i){return Lre.f(t,n,i)},kre=wt,Mre=AE,Fre=ne,Rk=Un("species"),Ure=T,Bre=TypeError,vR=function(t,n){if(Ure(n,t))return t;throw Bre("Incorrect invocation")},Vre=oe,ER=Zr,jre=b(Function.toString);Vre(ER.inspectSource)||(ER.inspectSource=function(t){return jre(t)});var wk=ER.inspectSource,$re=b,Hre=d,Ik=oe,zre=Qc,Wre=wk,Ak=function(){},Gre=[],Ok=wt("Reflect","construct"),_R=/^\s*(?:class|function)\b/,Kre=$re(_R.exec),qre=!_R.exec(Ak),Gm=function(t){if(!Ik(t))return!1;try{return Ok(Ak,Gre,t),!0}catch{return!1}},xk=function(t){if(!Ik(t))return!1;switch(zre(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return qre||!!Kre(_R,Wre(t))}catch{return!0}};xk.sham=!0;var Km,gf,Nk,SR,OE=!Ok||Hre(function(){var t;return Gm(Gm.call)||!Gm(Object)||!Gm(function(){t=!0})||t})?xk:Gm,Yre=OE,Xre=Ut,Jre=TypeError,Pk=oa,Qre=function(t){if(Yre(t))return t;throw Jre(Xre(t)+" is not a constructor")},Zre=Ae,eie=Un("species"),yR=function(t,n){var i,a=Pk(t).constructor;return a===void 0||Zre(i=Pk(a)[eie])?n:Qre(i)},xE=b([].slice),tie=TypeError,vf=function(t,n){if(t<n)throw tie("Not enough arguments");return t},Dk=/(?:ipad|iphone|ipod).*applewebkit/i.test(Xt),is=w,nie=L,rie=Ru,Lk=oe,iie=sn,kk=d,Mk=HL,oie=xE,Fk=ia,aie=vf,sie=Dk,cie=ff,CR=is.setImmediate,bR=is.clearImmediate,lie=is.process,TR=is.Dispatch,uie=is.Function,Uk=is.MessageChannel,die=is.String,RR=0,qm={},Bk="onreadystatechange";kk(function(){Km=is.location});var wR=function(t){if(iie(qm,t)){var n=qm[t];delete qm[t],n()}},IR=function(t){return function(){wR(t)}},Vk=function(t){wR(t.data)},jk=function(t){is.postMessage(die(t),Km.protocol+"//"+Km.host)};CR&&bR||(CR=function(t){aie(arguments.length,1);var n=Lk(t)?t:uie(t),i=oie(arguments,1);return qm[++RR]=function(){nie(n,void 0,i)},gf(RR),RR},bR=function(t){delete qm[t]},cie?gf=function(t){lie.nextTick(IR(t))}:TR&&TR.now?gf=function(t){TR.now(IR(t))}:Uk&&!sie?(SR=(Nk=new Uk).port2,Nk.port1.onmessage=Vk,gf=rie(SR.postMessage,SR)):is.addEventListener&&Lk(is.postMessage)&&!is.importScripts&&Km&&Km.protocol!=="file:"&&!kk(jk)?(gf=jk,is.addEventListener("message",Vk,!1)):gf=Bk in Fk("script")?function(t){Mk.appendChild(Fk("script"))[Bk]=function(){Mk.removeChild(this),wR(t)}}:function(t){setTimeout(IR(t),0)});var NE={set:CR,clear:bR},$k=function(){this.head=null,this.tail=null};$k.prototype={add:function(t){var n={item:t,next:null},i=this.tail;i?i.next=n:this.head=n,this.tail=n},get:function(){var t=this.head;if(t)return(this.head=t.next)===null&&(this.tail=null),t.item}};var Ef,AR,OR,xR,Hk,zk=$k,hie=/ipad|iphone|ipod/i.test(Xt)&&typeof Pebble<"u",fie=/web0s(?!.*chrome)/i.test(Xt),Fd=w,Wk=Ru,pie=pe.f,NR=NE.set,mie=zk,gie=Dk,vie=hie,Eie=fie,PR=ff,Gk=Fd.MutationObserver||Fd.WebKitMutationObserver,Kk=Fd.document,qk=Fd.process,PE=Fd.Promise,Yk=pie(Fd,"queueMicrotask"),DR=Yk&&Yk.value;if(!DR){var DE=new mie,LE=function(){var t,n;for(PR&&(t=qk.domain)&&t.exit();n=DE.get();)try{n()}catch(i){throw DE.head&&Ef(),i}t&&t.enter()};gie||PR||Eie||!Gk||!Kk?!vie&&PE&&PE.resolve?((xR=PE.resolve(void 0)).constructor=PE,Hk=Wk(xR.then,xR),Ef=function(){Hk(LE)}):PR?Ef=function(){qk.nextTick(LE)}:(NR=Wk(NR,Fd),Ef=function(){NR(LE)}):(AR=!0,OR=Kk.createTextNode(""),new Gk(LE).observe(OR,{characterData:!0}),Ef=function(){OR.data=AR=!AR}),DR=function(t){DE.head||Ef(),DE.add(t)}}var Xk=DR,_f=function(t){try{return{error:!1,value:t()}}catch(n){return{error:!0,value:n}}},Ud=w.Promise,Jk=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",_ie=!Jk&&!ff&&typeof window=="object"&&typeof document=="object",Sie=w,Ym=Ud,yie=oe,Cie=Vm,bie=wk,Tie=Un,Rie=_ie,wie=Jk,LR=It,Qk=Ym&&Ym.prototype,Iie=Tie("species"),Zk=!1,eM=yie(Sie.PromiseRejectionEvent),Aie=Cie("Promise",function(){var t=bie(Ym),n=t!==String(Ym);if(!n&&LR===66||!Qk.catch||!Qk.finally)return!0;if(!LR||LR<51||!/native code/.test(t)){var i=new Ym(function(l){l(1)}),a=function(l){l(function(){},function(){})};if((i.constructor={})[Iie]=a,!(Zk=i.then(function(){})instanceof a))return!0}return!n&&(Rie||wie)&&!eM}),Xm={CONSTRUCTOR:Aie,REJECTION_EVENT:eM,SUBCLASSING:Zk},el={},tM=tn,Oie=TypeError,xie=function(t){var n,i;this.promise=new t(function(a,l){if(n!==void 0||i!==void 0)throw Oie("Bad Promise constructor");n=a,i=l}),this.resolve=tM(n),this.reject=tM(i)};el.f=function(t){return new xie(t)};var kR,nM,Nie=$n,kE=ff,Ou=w,Jm=he,Pie=Iu,Die=Au,Lie=function(t){var n=kre(t);Fre&&n&&!n[Rk]&&Mre(n,Rk,{configurable:!0,get:function(){return this}})},kie=tn,MR=oe,Mie=ut,Fie=vR,Uie=yR,rM=NE.set,FR=Xk,Bie=function(t,n){try{arguments.length==1?console.error(t):console.error(t,n)}catch{}},Vie=_f,jie=zk,iM=Md,UR=Ud,oM=Xm,aM=el,ME="Promise",sM=oM.CONSTRUCTOR,$ie=oM.REJECTION_EVENT,BR=iM.getterFor(ME),Hie=iM.set,zie=UR&&UR.prototype,Qm=UR,VR=zie,cM=Ou.TypeError,jR=Ou.document,$R=Ou.process,HR=aM.f,Wie=HR,Gie=!!(jR&&jR.createEvent&&Ou.dispatchEvent),lM="unhandledrejection",uM=function(t){var n;return!(!Mie(t)||!MR(n=t.then))&&n},dM=function(t,n){var i,a,l,u=n.value,h=n.state==1,p=h?t.ok:t.fail,m=t.resolve,E=t.reject,y=t.domain;try{p?(h||(n.rejection===2&&qie(n),n.rejection=1),p===!0?i=u:(y&&y.enter(),i=p(u),y&&(y.exit(),l=!0)),i===t.promise?E(cM("Promise-chain cycle")):(a=uM(i))?Jm(a,i,m,E):m(i)):E(u)}catch(R){y&&!l&&y.exit(),E(R)}},hM=function(t,n){t.notified||(t.notified=!0,FR(function(){for(var i,a=t.reactions;i=a.get();)dM(i,t);t.notified=!1,n&&!t.rejection&&Kie(t)}))},fM=function(t,n,i){var a,l;Gie?((a=jR.createEvent("Event")).promise=n,a.reason=i,a.initEvent(t,!1,!0),Ou.dispatchEvent(a)):a={promise:n,reason:i},!$ie&&(l=Ou["on"+t])?l(a):t===lM&&Bie("Unhandled promise rejection",i)},Kie=function(t){Jm(rM,Ou,function(){var n,i=t.facade,a=t.value;if(pM(t)&&(n=Vie(function(){kE?$R.emit("unhandledRejection",a,i):fM(lM,i,a)}),t.rejection=kE||pM(t)?2:1,n.error))throw n.value})},pM=function(t){return t.rejection!==1&&!t.parent},qie=function(t){Jm(rM,Ou,function(){var n=t.facade;kE?$R.emit("rejectionHandled",n):fM("rejectionhandled",n,t.value)})},Sf=function(t,n,i){return function(a){t(n,a,i)}},yf=function(t,n,i){t.done||(t.done=!0,i&&(t=i),t.value=n,t.state=2,hM(t,!0))},zR=function(t,n,i){if(!t.done){t.done=!0,i&&(t=i);try{if(t.facade===n)throw cM("Promise can't be resolved itself");var a=uM(n);a?FR(function(){var l={done:!1};try{Jm(a,n,Sf(zR,l,t),Sf(yf,l,t))}catch(u){yf(l,u,t)}}):(t.value=n,t.state=1,hM(t,!1))}catch(l){yf({done:!1},l,t)}}};sM&&(VR=(Qm=function(t){Fie(this,VR),kie(t),Jm(kR,this);var n=BR(this);try{t(Sf(zR,n),Sf(yf,n))}catch(i){yf(n,i)}}).prototype,(kR=function(t){Hie(this,{type:ME,done:!1,notified:!1,parent:!1,reactions:new jie,rejection:!1,state:0,value:void 0})}).prototype=Pie(VR,"then",function(t,n){var i=BR(this),a=HR(Uie(this,Qm));return i.parent=!0,a.ok=!MR(t)||t,a.fail=MR(n)&&n,a.domain=kE?$R.domain:void 0,i.state==0?i.reactions.add(a):FR(function(){dM(a,i)}),a.promise}),nM=function(){var t=new kR,n=BR(t);this.promise=t,this.resolve=Sf(zR,n),this.reject=Sf(yf,n)},aM.f=HR=function(t){return t===Qm||t===void 0?new nM(t):Wie(t)}),Nie({global:!0,constructor:!0,wrap:!0,forced:sM},{Promise:Qm}),Die(Qm,ME,!1,!0),Lie(ME);var mM=Un("iterator"),gM=!1;try{var Yie=0,vM={next:function(){return{done:!!Yie++}},return:function(){gM=!0}};vM[mM]=function(){return this},Array.from(vM,function(){throw 2})}catch{}var Xie=Ud,Jie=function(t,n){if(!n&&!gM)return!1;var i=!1;try{var a={};a[mM]=function(){return{next:function(){return{done:i=!0}}}},t(a)}catch{}return i},FE=Xm.CONSTRUCTOR||!Jie(function(t){Xie.all(t).then(void 0,function(){})}),Qie=he,Zie=tn,eoe=el,toe=_f,noe=zm;$n({target:"Promise",stat:!0,forced:FE},{all:function(t){var n=this,i=eoe.f(n),a=i.resolve,l=i.reject,u=toe(function(){var h=Zie(n.resolve),p=[],m=0,E=1;noe(t,function(y){var R=m++,A=!1;E++,Qie(h,n,y).then(function(D){A||(A=!0,p[R]=D,--E||a(p))},l)}),--E||a(p)});return u.error&&l(u.value),i.promise}});var roe=$n,ioe=Xm.CONSTRUCTOR;Ud&&Ud.prototype,roe({target:"Promise",proto:!0,forced:ioe,real:!0},{catch:function(t){return this.then(void 0,t)}});var ooe=he,aoe=tn,soe=el,coe=_f,loe=zm;$n({target:"Promise",stat:!0,forced:FE},{race:function(t){var n=this,i=soe.f(n),a=i.reject,l=coe(function(){var u=aoe(n.resolve);loe(t,function(h){ooe(u,n,h).then(i.resolve,a)})});return l.error&&a(l.value),i.promise}});var uoe=he,doe=el;$n({target:"Promise",stat:!0,forced:Xm.CONSTRUCTOR},{reject:function(t){var n=doe.f(this);return uoe(n.reject,void 0,t),n.promise}});var hoe=oa,foe=ut,poe=el,EM=function(t,n){if(hoe(t),foe(n)&&n.constructor===t)return n;var i=poe.f(t);return(0,i.resolve)(n),i.promise},moe=$n,goe=Ud,voe=Xm.CONSTRUCTOR,Eoe=EM,_oe=wt("Promise"),Soe=!voe;moe({target:"Promise",stat:!0,forced:!0},{resolve:function(t){return Eoe(Soe&&this===_oe?goe:this,t)}});var yoe=he,Coe=tn,boe=el,Toe=_f,Roe=zm;$n({target:"Promise",stat:!0,forced:FE},{allSettled:function(t){var n=this,i=boe.f(n),a=i.resolve,l=i.reject,u=Toe(function(){var h=Coe(n.resolve),p=[],m=0,E=1;Roe(t,function(y){var R=m++,A=!1;E++,yoe(h,n,y).then(function(D){A||(A=!0,p[R]={status:"fulfilled",value:D},--E||a(p))},function(D){A||(A=!0,p[R]={status:"rejected",reason:D},--E||a(p))})}),--E||a(p)});return u.error&&l(u.value),i.promise}});var woe=he,Ioe=tn,Aoe=wt,Ooe=el,xoe=_f,Noe=zm,_M="No one promise resolved";$n({target:"Promise",stat:!0,forced:FE},{any:function(t){var n=this,i=Aoe("AggregateError"),a=Ooe.f(n),l=a.resolve,u=a.reject,h=xoe(function(){var p=Ioe(n.resolve),m=[],E=0,y=1,R=!1;Noe(t,function(A){var D=E++,H=!1;y++,woe(p,n,A).then(function(B){H||R||(R=!0,l(B))},function(B){H||R||(H=!0,m[D]=B,--y||u(new i(m,_M)))})}),--y||u(new i(m,_M))});return h.error&&u(h.value),a.promise}});var Poe=$n,WR=Ud,Doe=d,Loe=wt,koe=oe,Moe=yR,SM=EM,Foe=WR&&WR.prototype;Poe({target:"Promise",proto:!0,real:!0,forced:!!WR&&Doe(function(){Foe.finally.call({then:function(){}},function(){})})},{finally:function(t){var n=Moe(this,Loe("Promise")),i=koe(t);return this.then(i?function(a){return SM(n,t()).then(function(){return a})}:t,i?function(a){return SM(n,t()).then(function(){throw a})}:t)}});var GR=b,Uoe=$T,Boe=rs,Voe=Fe,joe=GR("".charAt),yM=GR("".charCodeAt),$oe=GR("".slice),CM=function(t){return function(n,i){var a,l,u=Boe(Voe(n)),h=Uoe(i),p=u.length;return h<0||h>=p?t?"":void 0:(a=yM(u,h))<55296||a>56319||h+1===p||(l=yM(u,h+1))<56320||l>57343?t?joe(u,h):a:t?$oe(u,h,h+2):l-56320+(a-55296<<10)+65536}},KR={codeAt:CM(!1),charAt:CM(!0)},Hoe=KR.charAt,zoe=rs,bM=Md,Woe=Sk,TM=gR,RM="String Iterator",Goe=bM.set,Koe=bM.getterFor(RM);Woe(String,"String",function(t){Goe(this,{type:RM,string:zoe(t),index:0})},function(){var t,n=Koe(this),i=n.string,a=n.index;return a>=i.length?TM(void 0,!0):(t=Hoe(i,a),n.index+=t.length,TM(t,!1))});var qoe=ot.Promise,Yoe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Xoe=w,Joe=Qc,Qoe=wu,wM=Ld,IM=Un("toStringTag");for(var qR in Yoe){var AM=Xoe[qR],YR=AM&&AM.prototype;YR&&Joe(YR)!==IM&&Qoe(YR,IM,qR),wM[qR]=wM.Array}var OM=qoe,Ye=c(OM),Zoe=Ds("Array").values,eae=Qc,tae=sn,nae=T,rae=Zoe,XR=Array.prototype,iae={DOMTokenList:!0,NodeList:!0},oae=function(t){var n=t.values;return t===XR||nae(XR,t)&&n===XR.values||tae(iae,eae(t))?rae:n},Ma=c(oae),aae=d,sae=Un("iterator"),JR=!aae(function(){var t=new URL("b?a=1&b=2&c=3","http://a"),n=t.searchParams,i=new URLSearchParams("a=1&a=2"),a="";return t.pathname="c%20d",n.forEach(function(l,u){n.delete("b"),a+=u+l}),i.delete("a",2),!t.toJSON||!i.has("a",1)||i.has("a",2)||!n.size&&!0||!n.sort||t.href!=="http://a/c%20d?a=1&c=3"||n.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!n[sae]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://тест").host!=="xn--e1aybc"||new URL("http://a#б").hash!=="#%D0%B1"||a!=="a1c3"||new URL("http://x",void 0).host!=="x"}),cae=Iu,lae=ji,uae=Ps,dae=Re,UE=function(t,n,i){var a=lae(n);a in t?uae.f(t,a,dae(0,i)):t[a]=i},xM=HT,hae=Ul,fae=UE,pae=Array,mae=Math.max,QR=function(t,n,i){for(var a=hae(t),l=xM(n,a),u=xM(i===void 0?a:i,a),h=pae(mae(u-l,0)),p=0;l<u;l++,p++)fae(h,p,t[l]);return h.length=p,h},NM=QR,gae=Math.floor,ZR=function(t,n){var i=t.length,a=gae(i/2);return i<8?vae(t,n):Eae(t,ZR(NM(t,0,a),n),ZR(NM(t,a),n),n)},vae=function(t,n){for(var i,a,l=t.length,u=1;u<l;){for(a=u,i=t[u];a&&n(t[a-1],i)>0;)t[a]=t[--a];a!==u++&&(t[a]=i)}return t},Eae=function(t,n,i,a){for(var l=n.length,u=i.length,h=0,p=0;h<l||p<u;)t[h+p]=h<l&&p<u?a(n[h],i[p])<=0?n[h++]:i[p++]:h<l?n[h++]:i[p++];return t},PM=ZR,e1=$n,Cf=w,BE=he,tl=b,bf=ne,DM=JR,LM=Iu,_ae=AE,Sae=function(t,n,i){for(var a in n)i&&i.unsafe&&t[a]?t[a]=n[a]:cae(t,a,n[a],i);return t},yae=Au,Cae=pR,t1=Md,kM=vR,n1=oe,bae=sn,Tae=Ru,Rae=Qc,wae=oa,MM=ut,Ca=rs,Iae=Hm,FM=Re,r1=iR,Aae=SE,Tf=vf,Oae=PM,xae=Un("iterator"),Zm="URLSearchParams",UM=Zm+"Iterator",BM=t1.set,Ls=t1.getterFor(Zm),Nae=t1.getterFor(UM),Pae=Object.getOwnPropertyDescriptor,i1=function(t){if(!bf)return Cf[t];var n=Pae(Cf,t);return n&&n.value},VM=i1("fetch"),VE=i1("Request"),e0=i1("Headers"),o1=VE&&VE.prototype,jM=e0&&e0.prototype,Dae=Cf.RegExp,Lae=Cf.TypeError,$M=Cf.decodeURIComponent,kae=Cf.encodeURIComponent,Mae=tl("".charAt),HM=tl([].join),Bd=tl([].push),a1=tl("".replace),Fae=tl([].shift),zM=tl([].splice),WM=tl("".split),Uae=tl("".slice),Bae=/\+/g,GM=Array(4),Vae=function(t){return GM[t-1]||(GM[t-1]=Dae("((?:%[\\da-f]{2}){"+t+"})","gi"))},jae=function(t){try{return $M(t)}catch{return t}},KM=function(t){var n=a1(t,Bae," "),i=4;try{return $M(n)}catch{for(;i;)n=a1(n,Vae(i--),jae);return n}},$ae=/[!'()~]|%20/g,Hae={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},zae=function(t){return Hae[t]},qM=function(t){return a1(kae(t),$ae,zae)},s1=Cae(function(t,n){BM(this,{type:UM,iterator:r1(Ls(t).entries),kind:n})},"Iterator",function(){var t=Nae(this),n=t.kind,i=t.iterator.next(),a=i.value;return i.done||(i.value=n==="keys"?a.key:n==="values"?a.value:[a.key,a.value]),i},!0),YM=function(t){this.entries=[],this.url=null,t!==void 0&&(MM(t)?this.parseObject(t):this.parseQuery(typeof t=="string"?Mae(t,0)==="?"?Uae(t,1):t:Ca(t)))};YM.prototype={type:Zm,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var n,i,a,l,u,h,p,m=Aae(t);if(m)for(i=(n=r1(t,m)).next;!(a=BE(i,n)).done;){if(u=(l=r1(wae(a.value))).next,(h=BE(u,l)).done||(p=BE(u,l)).done||!BE(u,l).done)throw Lae("Expected sequence with length 2");Bd(this.entries,{key:Ca(h.value),value:Ca(p.value)})}else for(var E in t)bae(t,E)&&Bd(this.entries,{key:E,value:Ca(t[E])})},parseQuery:function(t){if(t)for(var n,i,a=WM(t,"&"),l=0;l<a.length;)(n=a[l++]).length&&(i=WM(n,"="),Bd(this.entries,{key:KM(Fae(i)),value:KM(HM(i,"="))}))},serialize:function(){for(var t,n=this.entries,i=[],a=0;a<n.length;)t=n[a++],Bd(i,qM(t.key)+"="+qM(t.value));return HM(i,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var jE=function(){kM(this,Rf);var t=BM(this,new YM(arguments.length>0?arguments[0]:void 0));bf||(this.size=t.entries.length)},Rf=jE.prototype;if(Sae(Rf,{append:function(t,n){var i=Ls(this);Tf(arguments.length,2),Bd(i.entries,{key:Ca(t),value:Ca(n)}),bf||this.length++,i.updateURL()},delete:function(t){for(var n=Ls(this),i=Tf(arguments.length,1),a=n.entries,l=Ca(t),u=i<2?void 0:arguments[1],h=u===void 0?u:Ca(u),p=0;p<a.length;){var m=a[p];if(m.key!==l||h!==void 0&&m.value!==h)p++;else if(zM(a,p,1),h!==void 0)break}bf||(this.size=a.length),n.updateURL()},get:function(t){var n=Ls(this).entries;Tf(arguments.length,1);for(var i=Ca(t),a=0;a<n.length;a++)if(n[a].key===i)return n[a].value;return null},getAll:function(t){var n=Ls(this).entries;Tf(arguments.length,1);for(var i=Ca(t),a=[],l=0;l<n.length;l++)n[l].key===i&&Bd(a,n[l].value);return a},has:function(t){for(var n=Ls(this).entries,i=Tf(arguments.length,1),a=Ca(t),l=i<2?void 0:arguments[1],u=l===void 0?l:Ca(l),h=0;h<n.length;){var p=n[h++];if(p.key===a&&(u===void 0||p.value===u))return!0}return!1},set:function(t,n){var i=Ls(this);Tf(arguments.length,1);for(var a,l=i.entries,u=!1,h=Ca(t),p=Ca(n),m=0;m<l.length;m++)(a=l[m]).key===h&&(u?zM(l,m--,1):(u=!0,a.value=p));u||Bd(l,{key:h,value:p}),bf||(this.size=l.length),i.updateURL()},sort:function(){var t=Ls(this);Oae(t.entries,function(n,i){return n.key>i.key?1:-1}),t.updateURL()},forEach:function(t){for(var n,i=Ls(this).entries,a=Tae(t,arguments.length>1?arguments[1]:void 0),l=0;l<i.length;)a((n=i[l++]).value,n.key,this)},keys:function(){return new s1(this,"keys")},values:function(){return new s1(this,"values")},entries:function(){return new s1(this,"entries")}},{enumerable:!0}),LM(Rf,xae,Rf.entries,{name:"entries"}),LM(Rf,"toString",function(){return Ls(this).serialize()},{enumerable:!0}),bf&&_ae(Rf,"size",{get:function(){return Ls(this).entries.length},configurable:!0,enumerable:!0}),yae(jE,Zm),e1({global:!0,constructor:!0,forced:!DM},{URLSearchParams:jE}),!DM&&n1(e0)){var Wae=tl(jM.has),Gae=tl(jM.set),XM=function(t){if(MM(t)){var n,i=t.body;if(Rae(i)===Zm)return n=t.headers?new e0(t.headers):new e0,Wae(n,"content-type")||Gae(n,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Iae(t,{body:FM(0,Ca(i)),headers:FM(0,n)})}return t};if(n1(VM)&&e1({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return VM(t,arguments.length>1?XM(arguments[1]):{})}}),n1(VE)){var c1=function(t){return kM(this,o1),new VE(t,arguments.length>1?XM(arguments[1]):{})};o1.constructor=c1,c1.prototype=o1,e1({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:c1})}}var ks,Kae={URLSearchParams:jE,getState:Ls},qae=ot.URLSearchParams,JM=ne,Yae=b,Xae=he,Jae=d,l1=vE,Qae=$m,Zae=fe,ese=xt,tse=De,wf=Object.assign,QM=Object.defineProperty,nse=Yae([].concat),rse=!wf||Jae(function(){if(JM&&wf({b:1},wf(QM({},"a",{enumerable:!0,get:function(){QM(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var t={},n={},i=Symbol(),a="abcdefghijklmnopqrst";return t[i]=7,a.split("").forEach(function(l){n[l]=l}),wf({},t)[i]!=7||l1(wf({},n)).join("")!=a})?function(t,n){for(var i=ese(t),a=arguments.length,l=1,u=Qae.f,h=Zae.f;a>l;)for(var p,m=tse(arguments[l++]),E=u?nse(l1(m),u(m)):l1(m),y=E.length,R=0;y>R;)p=E[R++],JM&&!Xae(h,m,p)||(i[p]=m[p]);return i}:wf,ise=oa,ose=ek,ase=Ru,sse=he,cse=xt,lse=function(t,n,i,a){try{return a?n(ise(i)[0],i[1]):n(i)}catch(l){ose(t,"throw",l)}},use=JL,dse=OE,hse=Ul,ZM=UE,fse=iR,pse=SE,eF=Array,Vd=b,u1=2147483647,mse=/[^\0-\u007E]/,tF=/[.\u3002\uFF0E\uFF61]/g,nF="Overflow: input needs wider integers to process",rF=RangeError,gse=Vd(tF.exec),If=Math.floor,d1=String.fromCharCode,iF=Vd("".charCodeAt),oF=Vd([].join),xu=Vd([].push),vse=Vd("".replace),Ese=Vd("".split),_se=Vd("".toLowerCase),aF=function(t){return t+22+75*(t<26)},Sse=function(t,n,i){var a=0;for(t=i?If(t/700):t>>1,t+=If(t/n);t>455;)t=If(t/35),a+=36;return If(a+36*t/(t+38))},yse=function(t){var n=[];t=function(K){for(var Y=[],ce=0,ge=K.length;ce<ge;){var Ee=iF(K,ce++);if(Ee>=55296&&Ee<=56319&&ce<ge){var me=iF(K,ce++);(64512&me)==56320?xu(Y,((1023&Ee)<<10)+(1023&me)+65536):(xu(Y,Ee),ce--)}else xu(Y,Ee)}return Y}(t);var i,a,l=t.length,u=128,h=0,p=72;for(i=0;i<t.length;i++)(a=t[i])<128&&xu(n,d1(a));var m=n.length,E=m;for(m&&xu(n,"-");E<l;){var y=u1;for(i=0;i<t.length;i++)(a=t[i])>=u&&a<y&&(y=a);var R=E+1;if(y-u>If((u1-h)/R))throw rF(nF);for(h+=(y-u)*R,u=y,i=0;i<t.length;i++){if((a=t[i])<u&&++h>u1)throw rF(nF);if(a==u){for(var A=h,D=36;;){var H=D<=p?1:D>=p+26?26:D-p;if(A<H)break;var B=A-H,$=36-H;xu(n,d1(aF(H+B%$))),A=If(B/$),D+=36}xu(n,d1(aF(A))),p=Sse(h,R,E==m),h=0,E++}}h++,u++}return oF(n,"")},Cse=$n,h1=ne,bse=JR,f1=w,sF=Ru,Ms=b,$E=Iu,Fs=AE,Tse=vR,p1=sn,m1=rse,Af=function(t){var n=cse(t),i=dse(this),a=arguments.length,l=a>1?arguments[1]:void 0,u=l!==void 0;u&&(l=ase(l,a>2?arguments[2]:void 0));var h,p,m,E,y,R,A=pse(n),D=0;if(!A||this===eF&&use(A))for(h=hse(n),p=i?new this(h):eF(h);h>D;D++)R=u?l(n[D],D):n[D],ZM(p,D,R);else for(y=(E=fse(n,A)).next,p=i?new this:[];!(m=sse(y,E)).done;D++)R=u?lse(E,l,[m.value,D],!0):m.value,ZM(p,D,R);return p.length=D,p},mc=QR,Rse=KR.codeAt,wse=function(t){var n,i,a=[],l=Ese(vse(_se(t),tF,"."),".");for(n=0;n<l.length;n++)i=l[n],xu(a,gse(mse,i)?"xn--"+yse(i):i);return oF(a,".")},Bl=rs,Ise=Au,Ase=vf,cF=Kae,lF=Md,Ose=lF.set,HE=lF.getterFor("URL"),xse=cF.URLSearchParams,Nse=cF.getState,t0=f1.URL,g1=f1.TypeError,zE=f1.parseInt,Pse=Math.floor,uF=Math.pow,Us=Ms("".charAt),gc=Ms(/./.exec),n0=Ms([].join),Dse=Ms(1 .toString),Lse=Ms([].pop),Of=Ms([].push),v1=Ms("".replace),kse=Ms([].shift),Mse=Ms("".split),r0=Ms("".slice),WE=Ms("".toLowerCase),Fse=Ms([].unshift),E1="Invalid scheme",jd="Invalid host",dF="Invalid port",hF=/[a-z]/i,Use=/[\d+-.a-z]/i,_1=/\d/,Bse=/^0x/i,Vse=/^[0-7]+$/,jse=/^\d+$/,fF=/^[\da-f]+$/i,$se=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Hse=/[\0\t\n\r #/:<>?@[\\\]^|]/,zse=/^[\u0000-\u0020]+/,Wse=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,Gse=/[\t\n\r]/g,i0=function(t){var n,i,a,l;if(typeof t=="number"){for(n=[],i=0;i<4;i++)Fse(n,t%256),t=Pse(t/256);return n0(n,".")}if(typeof t=="object"){for(n="",a=function(u){for(var h=null,p=1,m=null,E=0,y=0;y<8;y++)u[y]!==0?(E>p&&(h=m,p=E),m=null,E=0):(m===null&&(m=y),++E);return E>p&&(h=m,p=E),h}(t),i=0;i<8;i++)l&&t[i]===0||(l&&(l=!1),a===i?(n+=i?":":"::",l=!0):(n+=Dse(t[i],16),i<7&&(n+=":")));return"["+n+"]"}return t},GE={},pF=m1({},GE,{" ":1,'"':1,"<":1,">":1,"`":1}),mF=m1({},pF,{"#":1,"?":1,"{":1,"}":1}),S1=m1({},mF,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Nu=function(t,n){var i=Rse(t,0);return i>32&&i<127&&!p1(n,t)?t:encodeURIComponent(t)},KE={ftp:21,file:null,http:80,https:443,ws:80,wss:443},o0=function(t,n){var i;return t.length==2&&gc(hF,Us(t,0))&&((i=Us(t,1))==":"||!n&&i=="|")},gF=function(t){var n;return t.length>1&&o0(r0(t,0,2))&&(t.length==2||(n=Us(t,2))==="/"||n==="\\"||n==="?"||n==="#")},Kse=function(t){return t==="."||WE(t)==="%2e"},y1={},vF={},C1={},EF={},_F={},b1={},SF={},yF={},qE={},YE={},T1={},R1={},w1={},I1={},CF={},A1={},xf={},nl={},bF={},$d={},Vl={},O1=function(t,n,i){var a,l,u,h=Bl(t);if(n){if(l=this.parse(h))throw g1(l);this.searchParams=null}else{if(i!==void 0&&(a=new O1(i,!0)),l=this.parse(h,null,a))throw g1(l);(u=Nse(new xse)).bindURL(this),this.searchParams=u}};O1.prototype={type:"URL",parse:function(t,n,i){var a,l,u,h,p,m=this,E=n||y1,y=0,R="",A=!1,D=!1,H=!1;for(t=Bl(t),n||(m.scheme="",m.username="",m.password="",m.host=null,m.port=null,m.path=[],m.query=null,m.fragment=null,m.cannotBeABaseURL=!1,t=v1(t,zse,""),t=v1(t,Wse,"$1")),t=v1(t,Gse,""),a=Af(t);y<=a.length;){switch(l=a[y],E){case y1:if(!l||!gc(hF,l)){if(n)return E1;E=C1;continue}R+=WE(l),E=vF;break;case vF:if(l&&(gc(Use,l)||l=="+"||l=="-"||l=="."))R+=WE(l);else{if(l!=":"){if(n)return E1;R="",E=C1,y=0;continue}if(n&&(m.isSpecial()!=p1(KE,R)||R=="file"&&(m.includesCredentials()||m.port!==null)||m.scheme=="file"&&!m.host))return;if(m.scheme=R,n)return void(m.isSpecial()&&KE[m.scheme]==m.port&&(m.port=null));R="",m.scheme=="file"?E=I1:m.isSpecial()&&i&&i.scheme==m.scheme?E=EF:m.isSpecial()?E=yF:a[y+1]=="/"?(E=_F,y++):(m.cannotBeABaseURL=!0,Of(m.path,""),E=bF)}break;case C1:if(!i||i.cannotBeABaseURL&&l!="#")return E1;if(i.cannotBeABaseURL&&l=="#"){m.scheme=i.scheme,m.path=mc(i.path),m.query=i.query,m.fragment="",m.cannotBeABaseURL=!0,E=Vl;break}E=i.scheme=="file"?I1:b1;continue;case EF:if(l!="/"||a[y+1]!="/"){E=b1;continue}E=qE,y++;break;case _F:if(l=="/"){E=YE;break}E=nl;continue;case b1:if(m.scheme=i.scheme,l==ks)m.username=i.username,m.password=i.password,m.host=i.host,m.port=i.port,m.path=mc(i.path),m.query=i.query;else if(l=="/"||l=="\\"&&m.isSpecial())E=SF;else if(l=="?")m.username=i.username,m.password=i.password,m.host=i.host,m.port=i.port,m.path=mc(i.path),m.query="",E=$d;else{if(l!="#"){m.username=i.username,m.password=i.password,m.host=i.host,m.port=i.port,m.path=mc(i.path),m.path.length--,E=nl;continue}m.username=i.username,m.password=i.password,m.host=i.host,m.port=i.port,m.path=mc(i.path),m.query=i.query,m.fragment="",E=Vl}break;case SF:if(!m.isSpecial()||l!="/"&&l!="\\"){if(l!="/"){m.username=i.username,m.password=i.password,m.host=i.host,m.port=i.port,E=nl;continue}E=YE}else E=qE;break;case yF:if(E=qE,l!="/"||Us(R,y+1)!="/")continue;y++;break;case qE:if(l!="/"&&l!="\\"){E=YE;continue}break;case YE:if(l=="@"){A&&(R="%40"+R),A=!0,u=Af(R);for(var B=0;B<u.length;B++){var $=u[B];if($!=":"||H){var K=Nu($,S1);H?m.password+=K:m.username+=K}else H=!0}R=""}else if(l==ks||l=="/"||l=="?"||l=="#"||l=="\\"&&m.isSpecial()){if(A&&R=="")return"Invalid authority";y-=Af(R).length+1,R="",E=T1}else R+=l;break;case T1:case R1:if(n&&m.scheme=="file"){E=A1;continue}if(l!=":"||D){if(l==ks||l=="/"||l=="?"||l=="#"||l=="\\"&&m.isSpecial()){if(m.isSpecial()&&R=="")return jd;if(n&&R==""&&(m.includesCredentials()||m.port!==null))return;if(h=m.parseHost(R))return h;if(R="",E=xf,n)return;continue}l=="["?D=!0:l=="]"&&(D=!1),R+=l}else{if(R=="")return jd;if(h=m.parseHost(R))return h;if(R="",E=w1,n==R1)return}break;case w1:if(!gc(_1,l)){if(l==ks||l=="/"||l=="?"||l=="#"||l=="\\"&&m.isSpecial()||n){if(R!=""){var Y=zE(R,10);if(Y>65535)return dF;m.port=m.isSpecial()&&Y===KE[m.scheme]?null:Y,R=""}if(n)return;E=xf;continue}return dF}R+=l;break;case I1:if(m.scheme="file",l=="/"||l=="\\")E=CF;else{if(!i||i.scheme!="file"){E=nl;continue}if(l==ks)m.host=i.host,m.path=mc(i.path),m.query=i.query;else if(l=="?")m.host=i.host,m.path=mc(i.path),m.query="",E=$d;else{if(l!="#"){gF(n0(mc(a,y),""))||(m.host=i.host,m.path=mc(i.path),m.shortenPath()),E=nl;continue}m.host=i.host,m.path=mc(i.path),m.query=i.query,m.fragment="",E=Vl}}break;case CF:if(l=="/"||l=="\\"){E=A1;break}i&&i.scheme=="file"&&!gF(n0(mc(a,y),""))&&(o0(i.path[0],!0)?Of(m.path,i.path[0]):m.host=i.host),E=nl;continue;case A1:if(l==ks||l=="/"||l=="\\"||l=="?"||l=="#"){if(!n&&o0(R))E=nl;else if(R==""){if(m.host="",n)return;E=xf}else{if(h=m.parseHost(R))return h;if(m.host=="localhost"&&(m.host=""),n)return;R="",E=xf}continue}R+=l;break;case xf:if(m.isSpecial()){if(E=nl,l!="/"&&l!="\\")continue}else if(n||l!="?")if(n||l!="#"){if(l!=ks&&(E=nl,l!="/"))continue}else m.fragment="",E=Vl;else m.query="",E=$d;break;case nl:if(l==ks||l=="/"||l=="\\"&&m.isSpecial()||!n&&(l=="?"||l=="#")){if((p=WE(p=R))===".."||p==="%2e."||p===".%2e"||p==="%2e%2e"?(m.shortenPath(),l=="/"||l=="\\"&&m.isSpecial()||Of(m.path,"")):Kse(R)?l=="/"||l=="\\"&&m.isSpecial()||Of(m.path,""):(m.scheme=="file"&&!m.path.length&&o0(R)&&(m.host&&(m.host=""),R=Us(R,0)+":"),Of(m.path,R)),R="",m.scheme=="file"&&(l==ks||l=="?"||l=="#"))for(;m.path.length>1&&m.path[0]==="";)kse(m.path);l=="?"?(m.query="",E=$d):l=="#"&&(m.fragment="",E=Vl)}else R+=Nu(l,mF);break;case bF:l=="?"?(m.query="",E=$d):l=="#"?(m.fragment="",E=Vl):l!=ks&&(m.path[0]+=Nu(l,GE));break;case $d:n||l!="#"?l!=ks&&(l=="'"&&m.isSpecial()?m.query+="%27":m.query+=l=="#"?"%23":Nu(l,GE)):(m.fragment="",E=Vl);break;case Vl:l!=ks&&(m.fragment+=Nu(l,pF))}y++}},parseHost:function(t){var n,i,a;if(Us(t,0)=="["){if(Us(t,t.length-1)!="]"||(n=function(l){var u,h,p,m,E,y,R,A=[0,0,0,0,0,0,0,0],D=0,H=null,B=0,$=function(){return Us(l,B)};if($()==":"){if(Us(l,1)!=":")return;B+=2,H=++D}for(;$();){if(D==8)return;if($()!=":"){for(u=h=0;h<4&&gc(fF,$());)u=16*u+zE($(),16),B++,h++;if($()=="."){if(h==0||(B-=h,D>6))return;for(p=0;$();){if(m=null,p>0){if(!($()=="."&&p<4))return;B++}if(!gc(_1,$()))return;for(;gc(_1,$());){if(E=zE($(),10),m===null)m=E;else{if(m==0)return;m=10*m+E}if(m>255)return;B++}A[D]=256*A[D]+m,++p!=2&&p!=4||D++}if(p!=4)return;break}if($()==":"){if(B++,!$())return}else if($())return;A[D++]=u}else{if(H!==null)return;B++,H=++D}}if(H!==null)for(y=D-H,D=7;D!=0&&y>0;)R=A[D],A[D--]=A[H+y-1],A[H+--y]=R;else if(D!=8)return;return A}(r0(t,1,-1)),!n))return jd;this.host=n}else if(this.isSpecial()){if(t=wse(t),gc($se,t)||(n=function(l){var u,h,p,m,E,y,R,A=Mse(l,".");if(A.length&&A[A.length-1]==""&&A.length--,(u=A.length)>4)return l;for(h=[],p=0;p<u;p++){if((m=A[p])=="")return l;if(E=10,m.length>1&&Us(m,0)=="0"&&(E=gc(Bse,m)?16:8,m=r0(m,E==8?1:2)),m==="")y=0;else{if(!gc(E==10?jse:E==8?Vse:fF,m))return l;y=zE(m,E)}Of(h,y)}for(p=0;p<u;p++)if(y=h[p],p==u-1){if(y>=uF(256,5-u))return null}else if(y>255)return null;for(R=Lse(h),p=0;p<h.length;p++)R+=h[p]*uF(256,3-p);return R}(t),n===null))return jd;this.host=n}else{if(gc(Hse,t))return jd;for(n="",i=Af(t),a=0;a<i.length;a++)n+=Nu(i[a],GE);this.host=n}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme=="file"},includesCredentials:function(){return this.username!=""||this.password!=""},isSpecial:function(){return p1(KE,this.scheme)},shortenPath:function(){var t=this.path,n=t.length;!n||this.scheme=="file"&&n==1&&o0(t[0],!0)||t.length--},serialize:function(){var t=this,n=t.scheme,i=t.username,a=t.password,l=t.host,u=t.port,h=t.path,p=t.query,m=t.fragment,E=n+":";return l!==null?(E+="//",t.includesCredentials()&&(E+=i+(a?":"+a:"")+"@"),E+=i0(l),u!==null&&(E+=":"+u)):n=="file"&&(E+="//"),E+=t.cannotBeABaseURL?h[0]:h.length?"/"+n0(h,"/"):"",p!==null&&(E+="?"+p),m!==null&&(E+="#"+m),E},setHref:function(t){var n=this.parse(t);if(n)throw g1(n);this.searchParams.update()},getOrigin:function(){var t=this.scheme,n=this.port;if(t=="blob")try{return new Nf(t.path[0]).origin}catch{return"null"}return t!="file"&&this.isSpecial()?t+"://"+i0(this.host)+(n!==null?":"+n:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(Bl(t)+":",y1)},getUsername:function(){return this.username},setUsername:function(t){var n=Af(Bl(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var i=0;i<n.length;i++)this.username+=Nu(n[i],S1)}},getPassword:function(){return this.password},setPassword:function(t){var n=Af(Bl(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var i=0;i<n.length;i++)this.password+=Nu(n[i],S1)}},getHost:function(){var t=this.host,n=this.port;return t===null?"":n===null?i0(t):i0(t)+":"+n},setHost:function(t){this.cannotBeABaseURL||this.parse(t,T1)},getHostname:function(){var t=this.host;return t===null?"":i0(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,R1)},getPort:function(){var t=this.port;return t===null?"":Bl(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||((t=Bl(t))==""?this.port=null:this.parse(t,w1))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+n0(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,xf))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){(t=Bl(t))==""?this.query=null:(Us(t,0)=="?"&&(t=r0(t,1)),this.query="",this.parse(t,$d)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){(t=Bl(t))!=""?(Us(t,0)=="#"&&(t=r0(t,1)),this.fragment="",this.parse(t,Vl)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Nf=function(t){var n=Tse(this,ba),i=Ase(arguments.length,1)>1?arguments[1]:void 0,a=Ose(n,new O1(t,!1,i));h1||(n.href=a.serialize(),n.origin=a.getOrigin(),n.protocol=a.getProtocol(),n.username=a.getUsername(),n.password=a.getPassword(),n.host=a.getHost(),n.hostname=a.getHostname(),n.port=a.getPort(),n.pathname=a.getPathname(),n.search=a.getSearch(),n.searchParams=a.getSearchParams(),n.hash=a.getHash())},ba=Nf.prototype,Bs=function(t,n){return{get:function(){return HE(this)[t]()},set:n&&function(i){return HE(this)[n](i)},configurable:!0,enumerable:!0}};if(h1&&(Fs(ba,"href",Bs("serialize","setHref")),Fs(ba,"origin",Bs("getOrigin")),Fs(ba,"protocol",Bs("getProtocol","setProtocol")),Fs(ba,"username",Bs("getUsername","setUsername")),Fs(ba,"password",Bs("getPassword","setPassword")),Fs(ba,"host",Bs("getHost","setHost")),Fs(ba,"hostname",Bs("getHostname","setHostname")),Fs(ba,"port",Bs("getPort","setPort")),Fs(ba,"pathname",Bs("getPathname","setPathname")),Fs(ba,"search",Bs("getSearch","setSearch")),Fs(ba,"searchParams",Bs("getSearchParams")),Fs(ba,"hash",Bs("getHash","setHash"))),$E(ba,"toJSON",function(){return HE(this).serialize()},{enumerable:!0}),$E(ba,"toString",function(){return HE(this).serialize()},{enumerable:!0}),t0){var TF=t0.createObjectURL,RF=t0.revokeObjectURL;TF&&$E(Nf,"createObjectURL",sF(TF,t0)),RF&&$E(Nf,"revokeObjectURL",sF(RF,t0))}Ise(Nf,"URL"),Cse({global:!0,constructor:!0,forced:!bse,sham:!h1},{URL:Nf});var qse=$n,Yse=d,Xse=vf,wF=rs,Jse=JR,IF=wt("URL");qse({target:"URL",stat:!0,forced:!(Jse&&Yse(function(){IF.canParse()}))},{canParse:function(t){var n=Xse(arguments.length,1),i=wF(t),a=n<2||arguments[1]===void 0?void 0:wF(arguments[1]);try{return!!new IF(i,a)}catch{return!1}}});var XE=c(ot.URL);let AF=!0,OF=!0;function JE(t,n,i){const a=t.match(n);return a&&a.length>=i&&parseInt(a[i],10)}function Hd(t,n,i){if(!t.RTCPeerConnection)return;const a=t.RTCPeerConnection.prototype,l=a.addEventListener;a.addEventListener=function(h,p){if(h!==n)return l.apply(this,arguments);const m=E=>{const y=i(E);y&&(p.handleEvent?p.handleEvent(y):p(y))};return this._eventMap=this._eventMap||{},this._eventMap[n]||(this._eventMap[n]=new Map),this._eventMap[n].set(p,m),l.apply(this,[h,m])};const u=a.removeEventListener;a.removeEventListener=function(h,p){if(h!==n||!this._eventMap||!this._eventMap[n])return u.apply(this,arguments);if(!this._eventMap[n].has(p))return u.apply(this,arguments);const m=this._eventMap[n].get(p);return this._eventMap[n].delete(p),this._eventMap[n].size===0&&delete this._eventMap[n],Object.keys(this._eventMap).length===0&&delete this._eventMap,u.apply(this,[h,m])},Object.defineProperty(a,"on"+n,{get(){return this["_on"+n]},set(h){this["_on"+n]&&(this.removeEventListener(n,this["_on"+n]),delete this["_on"+n]),h&&this.addEventListener(n,this["_on"+n]=h)},enumerable:!0,configurable:!0})}function Qse(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(AF=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function Zse(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(OF=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function xF(){if(typeof window=="object"){if(AF)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function x1(t,n){OF&&console.warn(t+" is deprecated, please use "+n+" instead.")}function NF(t){return Object.prototype.toString.call(t)==="[object Object]"}function PF(t){var n;return NF(t)?pc(n=Object.keys(t)).call(n,function(i,a){const l=NF(t[a]),u=l?PF(t[a]):t[a],h=l&&!Object.keys(u).length;return u===void 0||h?i:Object.assign(i,{[a]:u})},{}):t}function N1(t,n,i){n&&!i.has(n.id)&&(i.set(n.id,n),Object.keys(n).forEach(a=>{a.endsWith("Id")?N1(t,t.get(n[a]),i):a.endsWith("Ids")&&n[a].forEach(l=>{N1(t,t.get(l),i)})}))}function DF(t,n,i){const a=i?"outbound-rtp":"inbound-rtp",l=new Map;if(n===null)return l;const u=[];return t.forEach(h=>{h.type==="track"&&h.trackIdentifier===n.id&&u.push(h)}),u.forEach(h=>{t.forEach(p=>{p.type===a&&p.trackId===h.id&&N1(t,p,l)})}),l}const LF=xF;function kF(t,n){const i=t&&t.navigator;if(!i.mediaDevices)return;const a=function(h){if(typeof h!="object"||h.mandatory||h.optional)return h;const p={};return Object.keys(h).forEach(m=>{if(m==="require"||m==="advanced"||m==="mediaSource")return;const E=typeof h[m]=="object"?h[m]:{ideal:h[m]};E.exact!==void 0&&typeof E.exact=="number"&&(E.min=E.max=E.exact);const y=function(R,A){return R?R+A.charAt(0).toUpperCase()+A.slice(1):A==="deviceId"?"sourceId":A};if(E.ideal!==void 0){p.optional=p.optional||[];let R={};typeof E.ideal=="number"?(R[y("min",m)]=E.ideal,p.optional.push(R),R={},R[y("max",m)]=E.ideal,p.optional.push(R)):(R[y("",m)]=E.ideal,p.optional.push(R))}E.exact!==void 0&&typeof E.exact!="number"?(p.mandatory=p.mandatory||{},p.mandatory[y("",m)]=E.exact):["min","max"].forEach(R=>{E[R]!==void 0&&(p.mandatory=p.mandatory||{},p.mandatory[y(R,m)]=E[R])})}),h.advanced&&(p.optional=(p.optional||[]).concat(h.advanced)),p},l=function(h,p){if(n.version>=61)return p(h);if((h=JSON.parse(JSON.stringify(h)))&&typeof h.audio=="object"){const m=function(E,y,R){y in E&&!(R in E)&&(E[R]=E[y],delete E[y])};m((h=JSON.parse(JSON.stringify(h))).audio,"autoGainControl","googAutoGainControl"),m(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=a(h.audio)}if(h&&typeof h.video=="object"){let m=h.video.facingMode;m=m&&(typeof m=="object"?m:{ideal:m});const E=n.version<66;if(m&&(m.exact==="user"||m.exact==="environment"||m.ideal==="user"||m.ideal==="environment")&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||E)){let y;if(delete h.video.facingMode,m.exact==="environment"||m.ideal==="environment"?y=["back","rear"]:m.exact!=="user"&&m.ideal!=="user"||(y=["front"]),y)return i.mediaDevices.enumerateDevices().then(R=>{let A=(R=R.filter(D=>D.kind==="videoinput")).find(D=>y.some(H=>{var B;return Ke(B=D.label.toLowerCase()).call(B,H)}));return!A&&R.length&&Ke(y).call(y,"back")&&(A=R[R.length-1]),A&&(h.video.deviceId=m.exact?{exact:A.deviceId}:{ideal:A.deviceId}),h.video=a(h.video),LF("chrome: "+JSON.stringify(h)),p(h)})}h.video=a(h.video)}return LF("chrome: "+JSON.stringify(h)),p(h)},u=function(h){return n.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(i.getUserMedia=(function(h,p,m){l(h,E=>{i.webkitGetUserMedia(E,p,y=>{m&&m(u(y))})})}).bind(i),i.mediaDevices.getUserMedia){const h=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(p){return l(p,m=>h(m).then(E=>{if(m.audio&&!E.getAudioTracks().length||m.video&&!E.getVideoTracks().length)throw E.getTracks().forEach(y=>{y.stop()}),new DOMException("","NotFoundError");return E},E=>Ye.reject(u(E))))}}}function MF(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function FF(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(i){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=i)},enumerable:!0,configurable:!0});const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",a=>{let l;l=t.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(h=>h.track&&h.track.id===a.track.id):{track:a.track};const u=new Event("track");u.track=a.track,u.receiver=l,u.transceiver={receiver:l},u.streams=[i.stream],this.dispatchEvent(u)}),i.stream.getTracks().forEach(a=>{let l;l=t.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(h=>h.track&&h.track.id===a.id):{track:a};const u=new Event("track");u.track=a,u.receiver=l,u.transceiver={receiver:l},u.streams=[i.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),n.apply(this,arguments)}}else Hd(t,"track",n=>(n.transceiver||Object.defineProperty(n,"transceiver",{value:{receiver:n.receiver}}),n))}function UF(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const n=function(l,u){return{track:u,get dtmf(){return this._dtmf===void 0&&(u.kind==="audio"?this._dtmf=l.createDTMFSender(u):this._dtmf=null),this._dtmf},_pc:l}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const l=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(h,p){let m=l.apply(this,arguments);return m||(m=n(this,h),this._senders.push(m)),m};const u=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(h){u.apply(this,arguments);const p=this._senders.indexOf(h);p!==-1&&this._senders.splice(p,1)}}const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],i.apply(this,[l]),l.getTracks().forEach(u=>{this._senders.push(n(this,u))})};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],a.apply(this,[l]),l.getTracks().forEach(u=>{const h=this._senders.find(p=>p.track===u);h&&this._senders.splice(this._senders.indexOf(h),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const i=n.apply(this,[]);return i.forEach(a=>a._pc=this),i},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function BF(t){if(!t.RTCPeerConnection)return;const n=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[i,a,l]=arguments;if(arguments.length>0&&typeof i=="function")return n.apply(this,arguments);if(n.length===0&&(arguments.length===0||typeof i!="function"))return n.apply(this,[]);const u=function(p){const m={};return p.result().forEach(E=>{const y={id:E.id,timestamp:E.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[E.type]||E.type};E.names().forEach(R=>{y[R]=E.stat(R)}),m[y.id]=y}),m},h=function(p){return new Map(Object.keys(p).map(m=>[m,p[m]]))};if(arguments.length>=2){const p=function(m){a(h(u(m)))};return n.apply(this,[p,i])}return new Ye((p,m)=>{n.apply(this,[function(E){p(h(u(E)))},m])}).then(a,l)}}function VF(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const i=t.RTCPeerConnection.prototype.getSenders;i&&(t.RTCPeerConnection.prototype.getSenders=function(){const l=i.apply(this,[]);return l.forEach(u=>u._pc=this),l});const a=t.RTCPeerConnection.prototype.addTrack;a&&(t.RTCPeerConnection.prototype.addTrack=function(){const l=a.apply(this,arguments);return l._pc=this,l}),t.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(u=>DF(u,l.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const i=t.RTCPeerConnection.prototype.getReceivers;i&&(t.RTCPeerConnection.prototype.getReceivers=function(){const a=i.apply(this,[]);return a.forEach(l=>l._pc=this),a}),Hd(t,"track",a=>(a.receiver._pc=a.srcElement,a)),t.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(l=>DF(l,a.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype)||!("getStats"in t.RTCRtpReceiver.prototype))return;const n=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const i=arguments[0];let a,l,u;return this.getSenders().forEach(h=>{h.track===i&&(a?u=!0:a=h)}),this.getReceivers().forEach(h=>(h.track===i&&(l?u=!0:l=h),h.track===i)),u||a&&l?Ye.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():l?l.getStats():Ye.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return n.apply(this,arguments)}}function jF(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const n=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(u,h){if(!h)return n.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const p=n.apply(this,arguments);return this._shimmedLocalStreams[h.id]?this._shimmedLocalStreams[h.id].indexOf(p)===-1&&this._shimmedLocalStreams[h.id].push(p):this._shimmedLocalStreams[h.id]=[h,p],p};const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(m=>{if(this.getSenders().find(y=>y.track===m))throw new DOMException("Track already exists.","InvalidAccessError")});const h=this.getSenders();i.apply(this,arguments);const p=this.getSenders().filter(m=>h.indexOf(m)===-1);this._shimmedLocalStreams[u.id]=[u].concat(p)};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],a.apply(this,arguments)};const l=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(h=>{const p=this._shimmedLocalStreams[h].indexOf(u);p!==-1&&this._shimmedLocalStreams[h].splice(p,1),this._shimmedLocalStreams[h].length===1&&delete this._shimmedLocalStreams[h]}),l.apply(this,arguments)}}function $F(t,n){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&n.version>=65)return jF(t);const i=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const m=i.apply(this);return this._reverseStreams=this._reverseStreams||{},m.map(E=>this._reverseStreams[E.id])};const a=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(m){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},m.getTracks().forEach(E=>{if(this.getSenders().find(R=>R.track===E))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[m.id]){const E=new t.MediaStream(m.getTracks());this._streams[m.id]=E,this._reverseStreams[E.id]=m,m=E}a.apply(this,[m])};const l=t.RTCPeerConnection.prototype.removeStream;function u(m,E){let y=E.sdp;return Object.keys(m._reverseStreams||[]).forEach(R=>{const A=m._reverseStreams[R],D=m._streams[A.id];y=y.replace(new RegExp(D.id,"g"),A.id)}),new RTCSessionDescription({type:E.type,sdp:y})}t.RTCPeerConnection.prototype.removeStream=function(m){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.apply(this,[this._streams[m.id]||m]),delete this._reverseStreams[this._streams[m.id]?this._streams[m.id].id:m.id],delete this._streams[m.id]},t.RTCPeerConnection.prototype.addTrack=function(m,E){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(D=>D===m))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(D=>D.track===m))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const A=this._streams[E.id];if(A)A.addTrack(m),Ye.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const D=new t.MediaStream([m]);this._streams[E.id]=D,this._reverseStreams[D.id]=E,this.addStream(D)}return this.getSenders().find(D=>D.track===m)},["createOffer","createAnswer"].forEach(function(m){const E=t.RTCPeerConnection.prototype[m],y={[m](){const R=arguments;return arguments.length&&typeof arguments[0]=="function"?E.apply(this,[A=>{const D=u(this,A);R[0].apply(null,[D])},A=>{R[1]&&R[1].apply(null,A)},arguments[2]]):E.apply(this,arguments).then(A=>u(this,A))}};t.RTCPeerConnection.prototype[m]=y[m]});const h=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(m,E){let y=E.sdp;return Object.keys(m._reverseStreams||[]).forEach(R=>{const A=m._reverseStreams[R],D=m._streams[A.id];y=y.replace(new RegExp(A.id,"g"),D.id)}),new RTCSessionDescription({type:E.type,sdp:y})}(this,arguments[0]),h.apply(this,arguments)):h.apply(this,arguments)};const p=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const m=p.get.apply(this);return m.type===""?m:u(this,m)}}),t.RTCPeerConnection.prototype.removeTrack=function(m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!m._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(m._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let E;this._streams=this._streams||{},Object.keys(this._streams).forEach(y=>{this._streams[y].getTracks().find(R=>m.track===R)&&(E=this._streams[y])}),E&&(E.getTracks().length===1?this.removeStream(this._reverseStreams[E.id]):E.removeTrack(m.track),this.dispatchEvent(new Event("negotiationneeded")))}}function P1(t,n){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const a=t.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=l[i]})}function HF(t,n){Hd(t,"negotiationneeded",i=>{const a=i.target;if(!(n.version<72||a.getConfiguration&&a.getConfiguration().sdpSemantics==="plan-b")||a.signalingState==="stable")return i})}var zF=Object.freeze({__proto__:null,fixNegotiationNeeded:HF,shimAddTrackRemoveTrack:$F,shimAddTrackRemoveTrackWithNative:jF,shimGetDisplayMedia:function(t,n){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(typeof n=="function"?t.navigator.mediaDevices.getDisplayMedia=function(i){return n(i).then(a=>{const l=i.video&&i.video.width,u=i.video&&i.video.height,h=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:a,maxFrameRate:h||3}},l&&(i.video.mandatory.maxWidth=l),u&&(i.video.mandatory.maxHeight=u),t.navigator.mediaDevices.getUserMedia(i)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:UF,shimGetStats:BF,shimGetUserMedia:kF,shimMediaStream:MF,shimOnTrack:FF,shimPeerConnection:P1,shimSenderReceiverGetStats:VF});function WF(t,n){const i=t&&t.navigator,a=t&&t.MediaStreamTrack;if(i.getUserMedia=function(l,u,h){x1("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(l).then(u,h)},!(n.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const l=function(h,p,m){p in h&&!(m in h)&&(h[m]=h[p],delete h[p])},u=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(h){return typeof h=="object"&&typeof h.audio=="object"&&(h=JSON.parse(JSON.stringify(h)),l(h.audio,"autoGainControl","mozAutoGainControl"),l(h.audio,"noiseSuppression","mozNoiseSuppression")),u(h)},a&&a.prototype.getSettings){const h=a.prototype.getSettings;a.prototype.getSettings=function(){const p=h.apply(this,arguments);return l(p,"mozAutoGainControl","autoGainControl"),l(p,"mozNoiseSuppression","noiseSuppression"),p}}if(a&&a.prototype.applyConstraints){const h=a.prototype.applyConstraints;a.prototype.applyConstraints=function(p){return this.kind==="audio"&&typeof p=="object"&&(p=JSON.parse(JSON.stringify(p)),l(p,"autoGainControl","mozAutoGainControl"),l(p,"noiseSuppression","mozNoiseSuppression")),h.apply(this,[p])}}}}function GF(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function D1(t,n){if(typeof t!="object"||!t.RTCPeerConnection&&!t.mozRTCPeerConnection)return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(l){const u=t.RTCPeerConnection.prototype[l],h={[l](){return arguments[0]=new(l==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),u.apply(this,arguments)}};t.RTCPeerConnection.prototype[l]=h[l]});const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},a=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[l,u,h]=arguments;return a.apply(this,[l||null]).then(p=>{if(n.version<53&&!u)try{p.forEach(m=>{m.type=i[m.type]||m.type})}catch(m){if(m.name!=="TypeError")throw m;p.forEach((E,y)=>{p.set(y,Object.assign({},E,{type:i[E.type]||E.type}))})}return p}).then(u,h)}}function KF(t){if(typeof t!="object"||!t.RTCPeerConnection||!t.RTCRtpSender||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const a=n.apply(this,[]);return a.forEach(l=>l._pc=this),a});const i=t.RTCPeerConnection.prototype.addTrack;i&&(t.RTCPeerConnection.prototype.addTrack=function(){const a=i.apply(this,arguments);return a._pc=this,a}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Ye.resolve(new Map)}}function qF(t){if(typeof t!="object"||!t.RTCPeerConnection||!t.RTCRtpSender||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(a=>a._pc=this),i}),Hd(t,"track",i=>(i.receiver._pc=i.srcElement,i)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function YF(t){t.RTCPeerConnection&&!("removeStream"in t.RTCPeerConnection.prototype)&&(t.RTCPeerConnection.prototype.removeStream=function(n){x1("removeStream","removeTrack"),this.getSenders().forEach(i=>{var a;i.track&&Ke(a=n.getTracks()).call(a,i.track)&&this.removeTrack(i)})})}function XF(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function JF(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const n=t.RTCPeerConnection.prototype.addTransceiver;n&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const a=i.length>0;a&&i.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=n.apply(this,arguments);if(a){const{sender:u}=l,h=u.getParameters();(!("encodings"in h)||h.encodings.length===1&&Object.keys(h.encodings[0]).length===0)&&(h.encodings=i,u.sendEncodings=i,this.setParametersPromises.push(u.setParameters(h).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return l})}function QF(t){if(typeof t!="object"||!t.RTCRtpSender)return;const n=t.RTCRtpSender.prototype.getParameters;n&&(t.RTCRtpSender.prototype.getParameters=function(){const i=n.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function ZF(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const n=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Ye.all(this.setParametersPromises).then(()=>n.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):n.apply(this,arguments)}}function eU(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const n=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Ye.all(this.setParametersPromises).then(()=>n.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):n.apply(this,arguments)}}var tU=Object.freeze({__proto__:null,shimAddTransceiver:JF,shimCreateAnswer:eU,shimCreateOffer:ZF,shimGetDisplayMedia:function(t,n){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Ye.reject(a)}return i.video===!0?i.video={mediaSource:n}:i.video.mediaSource=n,t.navigator.mediaDevices.getUserMedia(i)})},shimGetParameters:QF,shimGetUserMedia:WF,shimOnTrack:GF,shimPeerConnection:D1,shimRTCDataChannel:XF,shimReceiverGetStats:qF,shimRemoveStream:YF,shimSenderGetStats:KF});function nU(t){if(typeof t=="object"&&t.RTCPeerConnection){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const n=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(i){var a;this._localStreams||(this._localStreams=[]),Ke(a=this._localStreams).call(a,i)||this._localStreams.push(i),i.getAudioTracks().forEach(l=>n.call(this,l,i)),i.getVideoTracks().forEach(l=>n.call(this,l,i))},t.RTCPeerConnection.prototype.addTrack=function(i){for(var a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];return l&&l.forEach(h=>{var p;this._localStreams?Ke(p=this._localStreams).call(p,h)||this._localStreams.push(h):this._localStreams=[h]}),n.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(i===-1)return;this._localStreams.splice(i,1);const a=n.getTracks();this.getSenders().forEach(l=>{Ke(a).call(a,l.track)&&this.removeTrack(l)})})}}function rU(t){if(typeof t=="object"&&t.RTCPeerConnection&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(i){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=i),this.addEventListener("track",this._onaddstreampoly=a=>{a.streams.forEach(l=>{var u;if(this._remoteStreams||(this._remoteStreams=[]),Ke(u=this._remoteStreams).call(u,l))return;this._remoteStreams.push(l);const h=new Event("addstream");h.stream=l,this.dispatchEvent(h)})})}});const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(l=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(l)>=0)return;i._remoteStreams.push(l);const u=new Event("addstream");u.stream=l,i.dispatchEvent(u)})}),n.apply(i,arguments)}}}function iU(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const n=t.RTCPeerConnection.prototype,i=n.createOffer,a=n.createAnswer,l=n.setLocalDescription,u=n.setRemoteDescription,h=n.addIceCandidate;n.createOffer=function(m,E){const y=arguments.length>=2?arguments[2]:arguments[0],R=i.apply(this,[y]);return E?(R.then(m,E),Ye.resolve()):R},n.createAnswer=function(m,E){const y=arguments.length>=2?arguments[2]:arguments[0],R=a.apply(this,[y]);return E?(R.then(m,E),Ye.resolve()):R};let p=function(m,E,y){const R=l.apply(this,[m]);return y?(R.then(E,y),Ye.resolve()):R};n.setLocalDescription=p,p=function(m,E,y){const R=u.apply(this,[m]);return y?(R.then(E,y),Ye.resolve()):R},n.setRemoteDescription=p,p=function(m,E,y){const R=h.apply(this,[m]);return y?(R.then(E,y),Ye.resolve()):R},n.addIceCandidate=p}function oU(t){const n=t&&t.navigator;if(n.mediaDevices&&n.mediaDevices.getUserMedia){const i=n.mediaDevices,a=i.getUserMedia.bind(i);n.mediaDevices.getUserMedia=l=>a(aU(l))}!n.getUserMedia&&n.mediaDevices&&n.mediaDevices.getUserMedia&&(n.getUserMedia=(function(i,a,l){n.mediaDevices.getUserMedia(i).then(a,l)}).bind(n))}function aU(t){return t&&t.video!==void 0?Object.assign({},t,{video:PF(t.video)}):t}function sU(t){if(!t.RTCPeerConnection)return;const n=t.RTCPeerConnection;t.RTCPeerConnection=function(i,a){if(i&&i.iceServers){const l=[];for(let u=0;u<i.iceServers.length;u++){let h=i.iceServers[u];!h.hasOwnProperty("urls")&&h.hasOwnProperty("url")?(x1("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,l.push(h)):l.push(i.iceServers[u])}i.iceServers=l}return new n(i,a)},t.RTCPeerConnection.prototype=n.prototype,"generateCertificate"in n&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:()=>n.generateCertificate})}function cU(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function lU(t){const n=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(i){if(i){i.offerToReceiveAudio!==void 0&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const a=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):i.offerToReceiveAudio!==!0||a||this.addTransceiver("audio",{direction:"recvonly"}),i.offerToReceiveVideo!==void 0&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const l=this.getTransceivers().find(u=>u.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):i.offerToReceiveVideo!==!0||l||this.addTransceiver("video",{direction:"recvonly"})}return n.apply(this,arguments)}}function uU(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var dU=Object.freeze({__proto__:null,shimAudioContext:uU,shimCallbacksAPI:iU,shimConstraints:aU,shimCreateOfferLegacy:lU,shimGetUserMedia:oU,shimLocalStreamsAPI:nU,shimRTCIceServerUrls:sU,shimRemoteStreamsAPI:rU,shimTrackEventTransceiver:cU}),hU=`	
\v\f\r                　\u2028\u2029\uFEFF`,ece=Fe,tce=rs,L1=hU,fU=b("".replace),nce=RegExp("^["+L1+"]+"),rce=RegExp("(^|[^"+L1+"])["+L1+"]+$"),k1=function(t){return function(n){var i=tce(ece(n));return 1&t&&(i=fU(i,nce,"")),2&t&&(i=fU(i,rce,"$1")),i}},ice={start:k1(1),end:k1(2),trim:k1(3)},oce=dk.PROPER,ace=d,pU=hU,sce=ice.trim;$n({target:"String",proto:!0,forced:function(t){return ace(function(){return!!pU[t]()||"​᠎"[t]()!=="​᠎"||oce&&pU[t].name!==t})}("trim")},{trim:function(){return sce(this)}});var cce=Ds("String").trim,lce=T,uce=cce,M1=String.prototype,dce=function(t){var n=t.trim;return typeof t=="string"||t===M1||lce(M1,t)&&n===M1.trim?uce:n},mo=c(dce),mU={exports:{}};(function(t){const n={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};n.localCName=n.generateIdentifier(),n.splitLines=function(i){return i.trim().split(`
`).map(a=>a.trim())},n.splitSections=function(i){return i.split(`
m=`).map((a,l)=>(l>0?"m="+a:a).trim()+`\r
`)},n.getDescription=function(i){const a=n.splitSections(i);return a&&a[0]},n.getMediaSections=function(i){const a=n.splitSections(i);return a.shift(),a},n.matchPrefix=function(i,a){return n.splitLines(i).filter(l=>l.indexOf(a)===0)},n.parseCandidate=function(i){let a;a=i.indexOf("a=candidate:")===0?i.substring(12).split(" "):i.substring(10).split(" ");const l={foundation:a[0],component:{1:"rtp",2:"rtcp"}[a[1]]||a[1],protocol:a[2].toLowerCase(),priority:parseInt(a[3],10),ip:a[4],address:a[4],port:parseInt(a[5],10),type:a[7]};for(let u=8;u<a.length;u+=2)switch(a[u]){case"raddr":l.relatedAddress=a[u+1];break;case"rport":l.relatedPort=parseInt(a[u+1],10);break;case"tcptype":l.tcpType=a[u+1];break;case"ufrag":l.ufrag=a[u+1],l.usernameFragment=a[u+1];break;default:l[a[u]]===void 0&&(l[a[u]]=a[u+1])}return l},n.writeCandidate=function(i){const a=[];a.push(i.foundation);const l=i.component;l==="rtp"?a.push(1):l==="rtcp"?a.push(2):a.push(l),a.push(i.protocol.toUpperCase()),a.push(i.priority),a.push(i.address||i.ip),a.push(i.port);const u=i.type;return a.push("typ"),a.push(u),u!=="host"&&i.relatedAddress&&i.relatedPort&&(a.push("raddr"),a.push(i.relatedAddress),a.push("rport"),a.push(i.relatedPort)),i.tcpType&&i.protocol.toLowerCase()==="tcp"&&(a.push("tcptype"),a.push(i.tcpType)),(i.usernameFragment||i.ufrag)&&(a.push("ufrag"),a.push(i.usernameFragment||i.ufrag)),"candidate:"+a.join(" ")},n.parseIceOptions=function(i){return i.substring(14).split(" ")},n.parseRtpMap=function(i){let a=i.substring(9).split(" ");const l={payloadType:parseInt(a.shift(),10)};return a=a[0].split("/"),l.name=a[0],l.clockRate=parseInt(a[1],10),l.channels=a.length===3?parseInt(a[2],10):1,l.numChannels=l.channels,l},n.writeRtpMap=function(i){let a=i.payloadType;i.preferredPayloadType!==void 0&&(a=i.preferredPayloadType);const l=i.channels||i.numChannels||1;return"a=rtpmap:"+a+" "+i.name+"/"+i.clockRate+(l!==1?"/"+l:"")+`\r
`},n.parseExtmap=function(i){const a=i.substring(9).split(" ");return{id:parseInt(a[0],10),direction:a[0].indexOf("/")>0?a[0].split("/")[1]:"sendrecv",uri:a[1],attributes:a.slice(2).join(" ")}},n.writeExtmap=function(i){return"a=extmap:"+(i.id||i.preferredId)+(i.direction&&i.direction!=="sendrecv"?"/"+i.direction:"")+" "+i.uri+(i.attributes?" "+i.attributes:"")+`\r
`},n.parseFmtp=function(i){const a={};let l;const u=i.substring(i.indexOf(" ")+1).split(";");for(let h=0;h<u.length;h++)l=u[h].trim().split("="),a[l[0].trim()]=l[1];return a},n.writeFmtp=function(i){let a="",l=i.payloadType;if(i.preferredPayloadType!==void 0&&(l=i.preferredPayloadType),i.parameters&&Object.keys(i.parameters).length){const u=[];Object.keys(i.parameters).forEach(h=>{i.parameters[h]!==void 0?u.push(h+"="+i.parameters[h]):u.push(h)}),a+="a=fmtp:"+l+" "+u.join(";")+`\r
`}return a},n.parseRtcpFb=function(i){const a=i.substring(i.indexOf(" ")+1).split(" ");return{type:a.shift(),parameter:a.join(" ")}},n.writeRtcpFb=function(i){let a="",l=i.payloadType;return i.preferredPayloadType!==void 0&&(l=i.preferredPayloadType),i.rtcpFeedback&&i.rtcpFeedback.length&&i.rtcpFeedback.forEach(u=>{a+="a=rtcp-fb:"+l+" "+u.type+(u.parameter&&u.parameter.length?" "+u.parameter:"")+`\r
`}),a},n.parseSsrcMedia=function(i){const a=i.indexOf(" "),l={ssrc:parseInt(i.substring(7,a),10)},u=i.indexOf(":",a);return u>-1?(l.attribute=i.substring(a+1,u),l.value=i.substring(u+1)):l.attribute=i.substring(a+1),l},n.parseSsrcGroup=function(i){const a=i.substring(13).split(" ");return{semantics:a.shift(),ssrcs:a.map(l=>parseInt(l,10))}},n.getMid=function(i){const a=n.matchPrefix(i,"a=mid:")[0];if(a)return a.substring(6)},n.parseFingerprint=function(i){const a=i.substring(14).split(" ");return{algorithm:a[0].toLowerCase(),value:a[1].toUpperCase()}},n.getDtlsParameters=function(i,a){return{role:"auto",fingerprints:n.matchPrefix(i+a,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(i,a){let l="a=setup:"+a+`\r
`;return i.fingerprints.forEach(u=>{l+="a=fingerprint:"+u.algorithm+" "+u.value+`\r
`}),l},n.parseCryptoLine=function(i){const a=i.substring(9).split(" ");return{tag:parseInt(a[0],10),cryptoSuite:a[1],keyParams:a[2],sessionParams:a.slice(3)}},n.writeCryptoLine=function(i){return"a=crypto:"+i.tag+" "+i.cryptoSuite+" "+(typeof i.keyParams=="object"?n.writeCryptoKeyParams(i.keyParams):i.keyParams)+(i.sessionParams?" "+i.sessionParams.join(" "):"")+`\r
`},n.parseCryptoKeyParams=function(i){if(i.indexOf("inline:")!==0)return null;const a=i.substring(7).split("|");return{keyMethod:"inline",keySalt:a[0],lifeTime:a[1],mkiValue:a[2]?a[2].split(":")[0]:void 0,mkiLength:a[2]?a[2].split(":")[1]:void 0}},n.writeCryptoKeyParams=function(i){return i.keyMethod+":"+i.keySalt+(i.lifeTime?"|"+i.lifeTime:"")+(i.mkiValue&&i.mkiLength?"|"+i.mkiValue+":"+i.mkiLength:"")},n.getCryptoParameters=function(i,a){return n.matchPrefix(i+a,"a=crypto:").map(n.parseCryptoLine)},n.getIceParameters=function(i,a){const l=n.matchPrefix(i+a,"a=ice-ufrag:")[0],u=n.matchPrefix(i+a,"a=ice-pwd:")[0];return l&&u?{usernameFragment:l.substring(12),password:u.substring(10)}:null},n.writeIceParameters=function(i){let a="a=ice-ufrag:"+i.usernameFragment+`\r
a=ice-pwd:`+i.password+`\r
`;return i.iceLite&&(a+=`a=ice-lite\r
`),a},n.parseRtpParameters=function(i){const a={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=n.splitLines(i)[0].split(" ");a.profile=l[2];for(let h=3;h<l.length;h++){const p=l[h],m=n.matchPrefix(i,"a=rtpmap:"+p+" ")[0];if(m){const E=n.parseRtpMap(m),y=n.matchPrefix(i,"a=fmtp:"+p+" ");switch(E.parameters=y.length?n.parseFmtp(y[0]):{},E.rtcpFeedback=n.matchPrefix(i,"a=rtcp-fb:"+p+" ").map(n.parseRtcpFb),a.codecs.push(E),E.name.toUpperCase()){case"RED":case"ULPFEC":a.fecMechanisms.push(E.name.toUpperCase())}}}n.matchPrefix(i,"a=extmap:").forEach(h=>{a.headerExtensions.push(n.parseExtmap(h))});const u=n.matchPrefix(i,"a=rtcp-fb:* ").map(n.parseRtcpFb);return a.codecs.forEach(h=>{u.forEach(p=>{h.rtcpFeedback.find(m=>m.type===p.type&&m.parameter===p.parameter)||h.rtcpFeedback.push(p)})}),a},n.writeRtpDescription=function(i,a){let l="";l+="m="+i+" ",l+=a.codecs.length>0?"9":"0",l+=" "+(a.profile||"UDP/TLS/RTP/SAVPF")+" ",l+=a.codecs.map(h=>h.preferredPayloadType!==void 0?h.preferredPayloadType:h.payloadType).join(" ")+`\r
`,l+=`c=IN IP4 0.0.0.0\r
`,l+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,a.codecs.forEach(h=>{l+=n.writeRtpMap(h),l+=n.writeFmtp(h),l+=n.writeRtcpFb(h)});let u=0;return a.codecs.forEach(h=>{h.maxptime>u&&(u=h.maxptime)}),u>0&&(l+="a=maxptime:"+u+`\r
`),a.headerExtensions&&a.headerExtensions.forEach(h=>{l+=n.writeExtmap(h)}),l},n.parseRtpEncodingParameters=function(i){const a=[],l=n.parseRtpParameters(i),u=l.fecMechanisms.indexOf("RED")!==-1,h=l.fecMechanisms.indexOf("ULPFEC")!==-1,p=n.matchPrefix(i,"a=ssrc:").map(A=>n.parseSsrcMedia(A)).filter(A=>A.attribute==="cname"),m=p.length>0&&p[0].ssrc;let E;const y=n.matchPrefix(i,"a=ssrc-group:FID").map(A=>A.substring(17).split(" ").map(D=>parseInt(D,10)));y.length>0&&y[0].length>1&&y[0][0]===m&&(E=y[0][1]),l.codecs.forEach(A=>{if(A.name.toUpperCase()==="RTX"&&A.parameters.apt){let D={ssrc:m,codecPayloadType:parseInt(A.parameters.apt,10)};m&&E&&(D.rtx={ssrc:E}),a.push(D),u&&(D=JSON.parse(JSON.stringify(D)),D.fec={ssrc:m,mechanism:h?"red+ulpfec":"red"},a.push(D))}}),a.length===0&&m&&a.push({ssrc:m});let R=n.matchPrefix(i,"b=");return R.length&&(R=R[0].indexOf("b=TIAS:")===0?parseInt(R[0].substring(7),10):R[0].indexOf("b=AS:")===0?1e3*parseInt(R[0].substring(5),10)*.95-16e3:void 0,a.forEach(A=>{A.maxBitrate=R})),a},n.parseRtcpParameters=function(i){const a={},l=n.matchPrefix(i,"a=ssrc:").map(p=>n.parseSsrcMedia(p)).filter(p=>p.attribute==="cname")[0];l&&(a.cname=l.value,a.ssrc=l.ssrc);const u=n.matchPrefix(i,"a=rtcp-rsize");a.reducedSize=u.length>0,a.compound=u.length===0;const h=n.matchPrefix(i,"a=rtcp-mux");return a.mux=h.length>0,a},n.writeRtcpParameters=function(i){let a="";return i.reducedSize&&(a+=`a=rtcp-rsize\r
`),i.mux&&(a+=`a=rtcp-mux\r
`),i.ssrc!==void 0&&i.cname&&(a+="a=ssrc:"+i.ssrc+" cname:"+i.cname+`\r
`),a},n.parseMsid=function(i){let a;const l=n.matchPrefix(i,"a=msid:");if(l.length===1)return a=l[0].substring(7).split(" "),{stream:a[0],track:a[1]};const u=n.matchPrefix(i,"a=ssrc:").map(h=>n.parseSsrcMedia(h)).filter(h=>h.attribute==="msid");return u.length>0?(a=u[0].value.split(" "),{stream:a[0],track:a[1]}):void 0},n.parseSctpDescription=function(i){const a=n.parseMLine(i),l=n.matchPrefix(i,"a=max-message-size:");let u;l.length>0&&(u=parseInt(l[0].substring(19),10)),isNaN(u)&&(u=65536);const h=n.matchPrefix(i,"a=sctp-port:");if(h.length>0)return{port:parseInt(h[0].substring(12),10),protocol:a.fmt,maxMessageSize:u};const p=n.matchPrefix(i,"a=sctpmap:");if(p.length>0){const m=p[0].substring(10).split(" ");return{port:parseInt(m[0],10),protocol:m[1],maxMessageSize:u}}},n.writeSctpDescription=function(i,a){let l=[];return l=i.protocol!=="DTLS/SCTP"?["m="+i.kind+" 9 "+i.protocol+" "+a.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+a.port+`\r
`]:["m="+i.kind+" 9 "+i.protocol+" "+a.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+a.port+" "+a.protocol+` 65535\r
`],a.maxMessageSize!==void 0&&l.push("a=max-message-size:"+a.maxMessageSize+`\r
`),l.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,22)},n.writeSessionBoilerplate=function(i,a,l){let u;const h=a!==void 0?a:2;return u=i||n.generateSessionId(),`v=0\r
o=`+(l||"thisisadapterortc")+" "+u+" "+h+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},n.getDirection=function(i,a){const l=n.splitLines(i);for(let u=0;u<l.length;u++)switch(l[u]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return l[u].substring(2)}return a?n.getDirection(a):"sendrecv"},n.getKind=function(i){return n.splitLines(i)[0].split(" ")[0].substring(2)},n.isRejected=function(i){return i.split(" ",2)[1]==="0"},n.parseMLine=function(i){const a=n.splitLines(i)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},n.parseOLine=function(i){const a=n.matchPrefix(i,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},n.isValidSDP=function(i){if(typeof i!="string"||i.length===0)return!1;const a=n.splitLines(i);for(let l=0;l<a.length;l++)if(a[l].length<2||a[l].charAt(1)!=="=")return!1;return!0},t.exports=n})(mU);var gU=mU.exports,Pf=c(gU),hce=o({__proto__:null,default:Pf},[gU]);function QE(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const n=t.RTCIceCandidate;t.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&((i=JSON.parse(JSON.stringify(i))).candidate=i.candidate.substr(2)),i.candidate&&i.candidate.length){const a=new n(i),l=Pf.parseCandidate(i.candidate),u=Object.assign(a,l);return u.toJSON=function(){return{candidate:u.candidate,sdpMid:u.sdpMid,sdpMLineIndex:u.sdpMLineIndex,usernameFragment:u.usernameFragment}},u}return new n(i)},t.RTCIceCandidate.prototype=n.prototype,Hd(t,"icecandidate",i=>(i.candidate&&Object.defineProperty(i,"candidate",{value:new t.RTCIceCandidate(i.candidate),writable:"false"}),i))}function F1(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Hd(t,"icecandidate",n=>{if(n.candidate){const i=Pf.parseCandidate(n.candidate.candidate);i.type==="relay"&&(n.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[i.priority>>24])}return n})}function ZE(t,n){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const i=function(p){if(!p||!p.sdp)return!1;const m=Pf.splitSections(p.sdp);return m.shift(),m.some(E=>{const y=Pf.parseMLine(E);return y&&y.kind==="application"&&y.protocol.indexOf("SCTP")!==-1})},a=function(p){const m=p.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(m===null||m.length<2)return-1;const E=parseInt(m[1],10);return E!=E?-1:E},l=function(p){let m=65536;return n.browser==="firefox"&&(m=n.version<57?p===-1?16384:2147483637:n.version<60?n.version===57?65535:65536:2147483637),m},u=function(p,m){let E=65536;n.browser==="firefox"&&n.version===57&&(E=65535);const y=Pf.matchPrefix(p.sdp,"a=max-message-size:");return y.length>0?E=parseInt(y[0].substr(19),10):n.browser==="firefox"&&m!==-1&&(E=2147483637),E},h=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,n.browser==="chrome"&&n.version>=76){const{sdpSemantics:p}=this.getConfiguration();p==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const p=a(arguments[0]),m=l(p),E=u(arguments[0],p);let y;y=m===0&&E===0?Number.POSITIVE_INFINITY:m===0||E===0?Math.max(m,E):Math.min(m,E);const R={};Object.defineProperty(R,"maxMessageSize",{get:()=>y}),this._sctp=R}return h.apply(this,arguments)}}function e_(t){if(!t.RTCPeerConnection||!("createDataChannel"in t.RTCPeerConnection.prototype))return;function n(a,l){const u=a.send;a.send=function(){const h=arguments[0],p=h.length||h.size||h.byteLength;if(a.readyState==="open"&&l.sctp&&p>l.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+l.sctp.maxMessageSize+" bytes)");return u.apply(a,arguments)}}const i=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const a=i.apply(this,arguments);return n(a,this),a},Hd(t,"datachannel",a=>(n(a.channel,a.target),a))}function U1(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const n=t.RTCPeerConnection.prototype;Object.defineProperty(n,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(n,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(i){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),i&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=i)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(i=>{const a=n[i];n[i]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=l=>{const u=l.target;if(u._lastConnectionState!==u.connectionState){u._lastConnectionState=u.connectionState;const h=new Event("connectionstatechange",l);u.dispatchEvent(h)}return l},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),a.apply(this,arguments)}})}function B1(t,n){if(!t.RTCPeerConnection||n.browser==="chrome"&&n.version>=71||n.browser==="safari"&&n.version>=605)return;const i=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=a.sdp.split(`
`).filter(u=>mo(u).call(u)!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&a instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:a.type,sdp:l}):a.sdp=l}return i.apply(this,arguments)}}function t_(t,n){if(!t.RTCPeerConnection||!t.RTCPeerConnection.prototype)return;const i=t.RTCPeerConnection.prototype.addIceCandidate;i&&i.length!==0&&(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(n.browser==="chrome"&&n.version<78||n.browser==="firefox"&&n.version<68||n.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Ye.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Ye.resolve())})}function n_(t,n){if(!t.RTCPeerConnection||!t.RTCPeerConnection.prototype)return;const i=t.RTCPeerConnection.prototype.setLocalDescription;i&&i.length!==0&&(t.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return i.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer"}return a.sdp||a.type!=="offer"&&a.type!=="answer"?i.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>i.apply(this,[l]))})}var fce=Object.freeze({__proto__:null,removeExtmapAllowMixed:B1,shimAddIceCandidateNullOrEmpty:t_,shimConnectionState:U1,shimMaxMessageSize:ZE,shimParameterlessSetLocalDescription:n_,shimRTCIceCandidate:QE,shimRTCIceCandidateRelayProtocol:F1,shimSendThrowTypeError:e_});(function(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const i=xF,a=function(u){const h={browser:null,version:null};if(u===void 0||!u.navigator)return h.browser="Not a browser.",h;const{navigator:p}=u;if(p.mozGetUserMedia)h.browser="firefox",h.version=JE(p.userAgent,/Firefox\/(\d+)\./,1);else if(p.webkitGetUserMedia||u.isSecureContext===!1&&u.webkitRTCPeerConnection)h.browser="chrome",h.version=JE(p.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!u.RTCPeerConnection||!p.userAgent.match(/AppleWebKit\/(\d+)\./))return h.browser="Not a supported browser.",h;h.browser="safari",h.version=JE(p.userAgent,/AppleWebKit\/(\d+)\./,1),h.supportsUnifiedPlan=u.RTCRtpTransceiver&&"currentDirection"in u.RTCRtpTransceiver.prototype}return h}(t),l={browserDetails:a,commonShim:fce,extractVersion:JE,disableLog:Qse,disableWarnings:Zse,sdp:hce};switch(a.browser){case"chrome":if(!zF||!P1||!n.shimChrome)return i("Chrome shim is not included in this adapter release."),l;if(a.version===null)return i("Chrome shim can not determine version, not shimming."),l;i("adapter.js shimming chrome."),l.browserShim=zF,t_(t,a),n_(t),kF(t,a),MF(t),P1(t,a),FF(t),$F(t,a),UF(t),BF(t),VF(t),HF(t,a),QE(t),F1(t),U1(t),ZE(t,a),e_(t),B1(t,a);break;case"firefox":if(!tU||!D1||!n.shimFirefox)return i("Firefox shim is not included in this adapter release."),l;i("adapter.js shimming firefox."),l.browserShim=tU,t_(t,a),n_(t),WF(t,a),D1(t,a),GF(t),YF(t),KF(t),qF(t),XF(t),JF(t),QF(t),ZF(t),eU(t),QE(t),U1(t),ZE(t,a),e_(t);break;case"safari":if(!dU||!n.shimSafari)return i("Safari shim is not included in this adapter release."),l;i("adapter.js shimming safari."),l.browserShim=dU,t_(t,a),n_(t),sU(t),lU(t),iU(t),nU(t),rU(t),cU(t),oU(t),uU(t),QE(t),F1(t),ZE(t,a),e_(t),B1(t,a);break;default:i("Unsupported browser!")}})({window:typeof window>"u"?void 0:window});var vU=Ut,pce=TypeError,EU=Xt.match(/firefox\/(\d+)/i),mce=!!EU&&+EU[1],gce=/MSIE|Trident/.test(Xt),_U=Xt.match(/AppleWebKit\/(\d+)\./),vce=!!_U&&+_U[1],Ece=$n,SU=b,_ce=tn,Sce=xt,yU=Ul,yce=function(t,n){if(!delete t[n])throw pce("Cannot delete property "+vU(n)+" of "+vU(t))},CU=rs,V1=d,Cce=PM,bce=fE,bU=mce,Tce=gce,TU=It,RU=vce,Pu=[],wU=SU(Pu.sort),Rce=SU(Pu.push),wce=V1(function(){Pu.sort(void 0)}),Ice=V1(function(){Pu.sort(null)}),Ace=bce("sort"),IU=!V1(function(){if(TU)return TU<70;if(!(bU&&bU>3)){if(Tce)return!0;if(RU)return RU<603;var t,n,i,a,l="";for(t=65;t<76;t++){switch(n=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(a=0;a<47;a++)Pu.push({k:n+a,v:i})}for(Pu.sort(function(u,h){return h.v-u.v}),a=0;a<Pu.length;a++)n=Pu[a].k.charAt(0),l.charAt(l.length-1)!==n&&(l+=n);return l!=="DGBEFHACIJK"}});Ece({target:"Array",proto:!0,forced:wce||!Ice||!Ace||!IU},{sort:function(t){t!==void 0&&_ce(t);var n=Sce(this);if(IU)return t===void 0?wU(n):wU(n,t);var i,a,l=[],u=yU(n);for(a=0;a<u;a++)a in n&&Rce(l,n[a]);for(Cce(l,function(h){return function(p,m){return m===void 0?-1:p===void 0?1:h!==void 0?+h(p,m)||0:CU(p)>CU(m)?1:-1}}(t)),i=yU(l),a=0;a<i;)n[a]=l[a++];for(;a<u;)yce(n,a++);return n}});var Oce=Ds("Array").sort,xce=T,Nce=Oce,j1=Array.prototype,Pce=function(t){var n=t.sort;return t===j1||xce(j1,t)&&n===j1.sort?Nce:n},a0=c(Pce),$1=w;$n({global:!0,forced:$1.globalThis!==$1},{globalThis:$1});var AU=c(w),H1={exports:{}};(function(t,n){(function(i,a){var l="function",u="undefined",h="object",p="string",m="major",E="model",y="name",R="type",A="vendor",D="version",H="architecture",B="console",$="mobile",K="tablet",Y="smarttv",ce="wearable",ge="embedded",Ee="Amazon",me="Apple",Te="ASUS",Me="BlackBerry",Xe="Browser",nt="Chrome",dn="Firefox",hn="Google",Qn="Huawei",Vr="LG",Pr="Microsoft",Xo="Motorola",Oe="Opera",He="Samsung",ct="Sharp",Ne="Sony",U="Xiaomi",Z="Zebra",le="Facebook",Be="Chromium OS",zt="Mac OS",Wn=function(ri){for(var Ci={},lr=0;lr<ri.length;lr++)Ci[ri[lr].toUpperCase()]=ri[lr];return Ci},yi=function(ri,Ci){return typeof ri===p&&da(Ci).indexOf(da(ri))!==-1},da=function(ri){return ri.toLowerCase()},nu=function(ri,Ci){if(typeof ri===p)return ri=ri.replace(/^\s\s*/,""),typeof Ci===u?ri:ri.substring(0,350)},Sh=function(ri,Ci){for(var lr,wa,Cl,jr,Nn,ha,td=0;td<Ci.length&&!Nn;){var xc=Ci[td],nH=Ci[td+1];for(lr=wa=0;lr<xc.length&&!Nn&&xc[lr];)if(Nn=xc[lr++].exec(ri))for(Cl=0;Cl<nH.length;Cl++)ha=Nn[++wa],typeof(jr=nH[Cl])===h&&jr.length>0?jr.length===2?typeof jr[1]==l?this[jr[0]]=jr[1].call(this,ha):this[jr[0]]=jr[1]:jr.length===3?typeof jr[1]!==l||jr[1].exec&&jr[1].test?this[jr[0]]=ha?ha.replace(jr[1],jr[2]):a:this[jr[0]]=ha?jr[1].call(this,ha,jr[2]):a:jr.length===4&&(this[jr[0]]=ha?jr[3].call(this,ha.replace(jr[1],jr[2])):a):this[jr]=ha||a;td+=2}},ug=function(ri,Ci){for(var lr in Ci)if(typeof Ci[lr]===h&&Ci[lr].length>0){for(var wa=0;wa<Ci[lr].length;wa++)if(yi(Ci[lr][wa],ri))return lr==="?"?a:lr}else if(yi(Ci[lr],ri))return lr==="?"?a:lr;return ri},XS={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},JS={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[D,[y,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[D,[y,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[y,D],[/opios[\/ ]+([\w\.]+)/i],[D,[y,Oe+" Mini"]],[/\bopr\/([\w\.]+)/i],[D,[y,Oe]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[y,D],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[D,[y,"UC"+Xe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[D,[y,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[D,[y,"WeChat"]],[/konqueror\/([\w\.]+)/i],[D,[y,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[D,[y,"IE"]],[/yabrowser\/([\w\.]+)/i],[D,[y,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[y,/(.+)/,"$1 Secure "+Xe],D],[/\bfocus\/([\w\.]+)/i],[D,[y,dn+" Focus"]],[/\bopt\/([\w\.]+)/i],[D,[y,Oe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[D,[y,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[D,[y,"Dolphin"]],[/coast\/([\w\.]+)/i],[D,[y,Oe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[D,[y,"MIUI "+Xe]],[/fxios\/([-\w\.]+)/i],[D,[y,dn]],[/\bqihu|(qi?ho?o?|360)browser/i],[[y,"360 "+Xe]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[y,/(.+)/,"$1 "+Xe],D],[/(comodo_dragon)\/([\w\.]+)/i],[[y,/_/g," "],D],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[y,D],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[y],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[y,le],D],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[y,D],[/\bgsa\/([\w\.]+) .*safari\//i],[D,[y,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[D,[y,nt+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[y,nt+" WebView"],D],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[D,[y,"Android "+Xe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[y,D],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[D,[y,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[D,y],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[y,[D,ug,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[y,D],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[y,"Netscape"],D],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[D,[y,dn+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[y,D],[/(cobalt)\/([\w\.]+)/i],[y,[D,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[H,"amd64"]],[/(ia32(?=;))/i],[[H,da]],[/((?:i[346]|x)86)[;\)]/i],[[H,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[H,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[H,"armhf"]],[/windows (ce|mobile); ppc;/i],[[H,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[H,/ower/,"",da]],[/(sun4\w)[;\)]/i],[[H,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[H,da]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[E,[A,He],[R,K]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[E,[A,He],[R,$]],[/\((ip(?:hone|od)[\w ]*);/i],[E,[A,me],[R,$]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[E,[A,me],[R,K]],[/(macintosh);/i],[E,[A,me]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[E,[A,ct],[R,$]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[E,[A,Qn],[R,K]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[E,[A,Qn],[R,$]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[E,/_/g," "],[A,U],[R,$]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[E,/_/g," "],[A,U],[R,K]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[E,[A,"OPPO"],[R,$]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[E,[A,"Vivo"],[R,$]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[E,[A,"Realme"],[R,$]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[E,[A,Xo],[R,$]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[E,[A,Xo],[R,K]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[E,[A,Vr],[R,K]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[E,[A,Vr],[R,$]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[E,[A,"Lenovo"],[R,K]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[E,/_/g," "],[A,"Nokia"],[R,$]],[/(pixel c)\b/i],[E,[A,hn],[R,K]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[E,[A,hn],[R,$]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[E,[A,Ne],[R,$]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[E,"Xperia Tablet"],[A,Ne],[R,K]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[E,[A,"OnePlus"],[R,$]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[E,[A,Ee],[R,K]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[E,/(.+)/g,"Fire Phone $1"],[A,Ee],[R,$]],[/(playbook);[-\w\),; ]+(rim)/i],[E,A,[R,K]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[E,[A,Me],[R,$]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[E,[A,Te],[R,K]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[E,[A,Te],[R,$]],[/(nexus 9)/i],[E,[A,"HTC"],[R,K]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[A,[E,/_/g," "],[R,$]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[E,[A,"Acer"],[R,K]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[E,[A,"Meizu"],[R,$]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[A,E,[R,$]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[A,E,[R,K]],[/(surface duo)/i],[E,[A,Pr],[R,K]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[E,[A,"Fairphone"],[R,$]],[/(u304aa)/i],[E,[A,"AT&T"],[R,$]],[/\bsie-(\w*)/i],[E,[A,"Siemens"],[R,$]],[/\b(rct\w+) b/i],[E,[A,"RCA"],[R,K]],[/\b(venue[\d ]{2,7}) b/i],[E,[A,"Dell"],[R,K]],[/\b(q(?:mv|ta)\w+) b/i],[E,[A,"Verizon"],[R,K]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[E,[A,"Barnes & Noble"],[R,K]],[/\b(tm\d{3}\w+) b/i],[E,[A,"NuVision"],[R,K]],[/\b(k88) b/i],[E,[A,"ZTE"],[R,K]],[/\b(nx\d{3}j) b/i],[E,[A,"ZTE"],[R,$]],[/\b(gen\d{3}) b.+49h/i],[E,[A,"Swiss"],[R,$]],[/\b(zur\d{3}) b/i],[E,[A,"Swiss"],[R,K]],[/\b((zeki)?tb.*\b) b/i],[E,[A,"Zeki"],[R,K]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[A,"Dragon Touch"],E,[R,K]],[/\b(ns-?\w{0,9}) b/i],[E,[A,"Insignia"],[R,K]],[/\b((nxa|next)-?\w{0,9}) b/i],[E,[A,"NextBook"],[R,K]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[A,"Voice"],E,[R,$]],[/\b(lvtel\-)?(v1[12]) b/i],[[A,"LvTel"],E,[R,$]],[/\b(ph-1) /i],[E,[A,"Essential"],[R,$]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[E,[A,"Envizen"],[R,K]],[/\b(trio[-\w\. ]+) b/i],[E,[A,"MachSpeed"],[R,K]],[/\btu_(1491) b/i],[E,[A,"Rotor"],[R,K]],[/(shield[\w ]+) b/i],[E,[A,"Nvidia"],[R,K]],[/(sprint) (\w+)/i],[A,E,[R,$]],[/(kin\.[onetw]{3})/i],[[E,/\./g," "],[A,Pr],[R,$]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[E,[A,Z],[R,K]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[E,[A,Z],[R,$]],[/smart-tv.+(samsung)/i],[A,[R,Y]],[/hbbtv.+maple;(\d+)/i],[[E,/^/,"SmartTV"],[A,He],[R,Y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[A,Vr],[R,Y]],[/(apple) ?tv/i],[A,[E,me+" TV"],[R,Y]],[/crkey/i],[[E,nt+"cast"],[A,hn],[R,Y]],[/droid.+aft(\w)( bui|\))/i],[E,[A,Ee],[R,Y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[E,[A,ct],[R,Y]],[/(bravia[\w ]+)( bui|\))/i],[E,[A,Ne],[R,Y]],[/(mitv-\w{5}) bui/i],[E,[A,U],[R,Y]],[/Hbbtv.*(technisat) (.*);/i],[A,E,[R,Y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[A,nu],[E,nu],[R,Y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[R,Y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[A,E,[R,B]],[/droid.+; (shield) bui/i],[E,[A,"Nvidia"],[R,B]],[/(playstation [345portablevi]+)/i],[E,[A,Ne],[R,B]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[E,[A,Pr],[R,B]],[/((pebble))app/i],[A,E,[R,ce]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[E,[A,me],[R,ce]],[/droid.+; (glass) \d/i],[E,[A,hn],[R,ce]],[/droid.+; (wt63?0{2,3})\)/i],[E,[A,Z],[R,ce]],[/(quest( 2| pro)?)/i],[E,[A,le],[R,ce]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[A,[R,ge]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[E,[R,$]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[E,[R,K]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[R,K]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[R,$]],[/(android[-\w\. ]{0,9});.+buil/i],[E,[A,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[D,[y,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[D,[y,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[y,D],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[D,y]],os:[[/microsoft (windows) (vista|xp)/i],[y,D],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[y,[D,ug,XS]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[y,"Windows"],[D,ug,XS]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[D,/_/g,"."],[y,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[y,zt],[D,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[D,y],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[y,D],[/\(bb(10);/i],[D,[y,Me]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[D,[y,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[D,[y,dn+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[D,[y,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[D,[y,"watchOS"]],[/crkey\/([\d\.]+)/i],[D,[y,nt+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[y,Be],D],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[y,D],[/(sunos) ?([\w\.\d]*)/i],[[y,"Solaris"],D],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[y,D]]},ms=function(ri,Ci){if(typeof ri===h&&(Ci=ri,ri=a),!(this instanceof ms))return new ms(ri,Ci).getResult();var lr=typeof i!==u&&i.navigator?i.navigator:a,wa=ri||(lr&&lr.userAgent?lr.userAgent:""),Cl=lr&&lr.userAgentData?lr.userAgentData:a,jr=Ci?function(Nn,ha){var td={};for(var xc in Nn)ha[xc]&&ha[xc].length%2==0?td[xc]=ha[xc].concat(Nn[xc]):td[xc]=Nn[xc];return td}(JS,Ci):JS;return this.getBrowser=function(){var Nn={};return Nn[y]=a,Nn[D]=a,Sh.call(Nn,wa,jr.browser),Nn[m]=function(ha){return typeof ha===p?ha.replace(/[^\d\.]/g,"").split(".")[0]:a}(Nn[D]),lr&&lr.brave&&typeof lr.brave.isBrave==l&&(Nn[y]="Brave"),Nn},this.getCPU=function(){var Nn={};return Nn[H]=a,Sh.call(Nn,wa,jr.cpu),Nn},this.getDevice=function(){var Nn={};return Nn[A]=a,Nn[E]=a,Nn[R]=a,Sh.call(Nn,wa,jr.device),!Nn[R]&&Cl&&Cl.mobile&&(Nn[R]=$),Nn[E]=="Macintosh"&&lr&&typeof lr.standalone!==u&&lr.maxTouchPoints&&lr.maxTouchPoints>2&&(Nn[E]="iPad",Nn[R]=K),Nn},this.getEngine=function(){var Nn={};return Nn[y]=a,Nn[D]=a,Sh.call(Nn,wa,jr.engine),Nn},this.getOS=function(){var Nn={};return Nn[y]=a,Nn[D]=a,Sh.call(Nn,wa,jr.os),!Nn[y]&&Cl&&Cl.platform!="Unknown"&&(Nn[y]=Cl.platform.replace(/chrome os/i,Be).replace(/macos/i,zt)),Nn},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return wa},this.setUA=function(Nn){return wa=typeof Nn===p&&Nn.length>350?nu(Nn,350):Nn,this},this.setUA(wa),this};ms.VERSION="0.7.34",ms.BROWSER=Wn([y,D,m]),ms.CPU=Wn([H]),ms.DEVICE=Wn([E,A,R,B,$,Y,K,ce,ge]),ms.ENGINE=ms.OS=Wn([y,D]),t.exports&&(n=t.exports=ms),n.UAParser=ms;var ed=typeof i!==u&&(i.jQuery||i.Zepto);if(ed&&!ed.ua){var yh=new ms;ed.ua=yh.getResult(),ed.ua.get=function(){return yh.getUA()},ed.ua.set=function(ri){yh.setUA(ri);var Ci=yh.getResult();for(var lr in Ci)ed.ua[lr]=Ci[lr]}}})(typeof window=="object"?window:s)})(H1,H1.exports);var Dce=c(H1.exports),Lce=Qc,kce=sn,Mce=Ae,Fce=Ld,Uce=Un("iterator"),Bce=Object,Vce=function(t){if(Mce(t))return!1;var n=Bce(t);return n[Uce]!==void 0||"@@iterator"in n||kce(Fce,Lce(n))},jce=c(Vce),OU=NE.clear;$n({global:!0,bind:!0,enumerable:!0,forced:w.clearImmediate!==OU},{clearImmediate:OU});var $ce=typeof Bun=="function"&&Bun&&typeof Bun.version=="string",xU=w,Hce=L,zce=oe,Wce=$ce,Gce=Xt,Kce=xE,qce=vf,Yce=xU.Function,Xce=/MSIE .\./.test(Gce)||Wce&&function(){var t=xU.Bun.version.split(".");return t.length<3||t[0]==0&&(t[1]<3||t[1]==3&&t[2]==0)}(),Jce=$n,NU=w,PU=NE.set,Qce=function(t,n){var i=n?2:1;return Xce?function(a,l){var u=qce(arguments.length,1)>i,h=zce(a)?a:Yce(a),p=u?Kce(arguments,i):[],m=u?function(){Hce(h,this,p)}:h;return n?t(m,l):t(m)}:t},DU=NU.setImmediate?Qce(PU,!1):PU;Jce({global:!0,bind:!0,enumerable:!0,forced:NU.setImmediate!==DU},{setImmediate:DU});var LU=c(ot.setImmediate),Zce=$n,ele=Xk,tle=tn,nle=vf,rle=ff,ile=w.process;Zce({global:!0,enumerable:!0,dontCallGetSet:!0},{queueMicrotask:function(t){nle(arguments.length,1),tle(t);var n=rle&&ile.domain;ele(n?n.bind(t):t)}});var kU=c(ot.queueMicrotask);function MU(t,n){return function(){return t.apply(n,arguments)}}const{toString:ole}=Object.prototype,{getPrototypeOf:z1}=Object,r_=(W1=Object.create(null),t=>{const n=ole.call(t);return W1[n]||(W1[n]=n.slice(8,-1).toLowerCase())});var W1;const vc=t=>(t=t.toLowerCase(),n=>r_(n)===t),i_=t=>n=>typeof n===t,{isArray:Df}=Array,s0=i_("undefined"),FU=vc("ArrayBuffer"),ale=i_("string"),os=i_("function"),UU=i_("number"),o_=t=>t!==null&&typeof t=="object",a_=t=>{if(r_(t)!=="object")return!1;const n=z1(t);return!(n!==null&&n!==Object.prototype&&Object.getPrototypeOf(n)!==null||Symbol.toStringTag in t||jce(t))},sle=vc("Date"),cle=vc("File"),lle=vc("Blob"),ule=vc("FileList"),dle=vc("URLSearchParams"),[hle,fle,ple,mle]=["ReadableStream","Request","Response","Headers"].map(vc);function c0(t,n){let i,a,{allOwnKeys:l=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t!=null)if(typeof t!="object"&&(t=[t]),Df(t))for(i=0,a=t.length;i<a;i++)n.call(null,t[i],i,t);else{const u=l?Object.getOwnPropertyNames(t):Object.keys(t),h=u.length;let p;for(i=0;i<h;i++)p=u[i],n.call(null,t[p],p,t)}}function BU(t,n){n=n.toLowerCase();const i=Object.keys(t);let a,l=i.length;for(;l-- >0;)if(a=i[l],n===a.toLowerCase())return a;return null}const zd=AU!==void 0?AU:typeof self<"u"?self:typeof window<"u"?window:In,VU=t=>!s0(t)&&t!==zd,gle=(G1=typeof Uint8Array<"u"&&z1(Uint8Array),t=>G1&&t instanceof G1);var G1;const vle=vc("HTMLFormElement"),jU=(t=>{let{hasOwnProperty:n}=t;return(i,a)=>n.call(i,a)})(Object.prototype),Ele=vc("RegExp"),$U=(t,n)=>{const i=Object.getOwnPropertyDescriptors(t),a={};c0(i,(l,u)=>{let h;(h=n(l,u,t))!==!1&&(a[u]=h||l)}),Object.defineProperties(t,a)},K1="abcdefghijklmnopqrstuvwxyz",HU="0123456789",zU={DIGIT:HU,ALPHA:K1,ALPHA_DIGIT:K1+K1.toUpperCase()+HU},_le=vc("AsyncFunction"),WU=(GU=typeof LU=="function",KU=os(zd.postMessage),GU?LU:KU?(q1="axios@".concat(Math.random()),s_=[],zd.addEventListener("message",t=>{let{source:n,data:i}=t;n===zd&&i===q1&&s_.length&&s_.shift()()},!1),t=>{s_.push(t),zd.postMessage(q1,"*")}):t=>setTimeout(t));var GU,KU,q1,s_;const Sle=kU!==void 0?kU.bind(zd):typeof process<"u"&&process.nextTick||WU;var qe={isArray:Df,isArrayBuffer:FU,isBuffer:function(t){return t!==null&&!s0(t)&&t.constructor!==null&&!s0(t.constructor)&&os(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||os(t.append)&&((n=r_(t))==="formdata"||n==="object"&&os(t.toString)&&t.toString()==="[object FormData]"))},isArrayBufferView:function(t){let n;return n=typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&FU(t.buffer),n},isString:ale,isNumber:UU,isBoolean:t=>t===!0||t===!1,isObject:o_,isPlainObject:a_,isReadableStream:hle,isRequest:fle,isResponse:ple,isHeaders:mle,isUndefined:s0,isDate:sle,isFile:cle,isBlob:lle,isRegExp:Ele,isFunction:os,isStream:t=>o_(t)&&os(t.pipe),isURLSearchParams:dle,isTypedArray:gle,isFileList:ule,forEach:c0,merge:function t(){const{caseless:n}=VU(this)&&this||{},i={},a=(l,u)=>{const h=n&&BU(i,u)||u;a_(i[h])&&a_(l)?i[h]=t(i[h],l):a_(l)?i[h]=t({},l):Df(l)?i[h]=l.slice():i[h]=l};for(let l=0,u=arguments.length;l<u;l++)arguments[l]&&c0(arguments[l],a);return i},extend:function(t,n,i){let{allOwnKeys:a}=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return c0(n,(l,u)=>{i&&os(l)?t[u]=MU(l,i):t[u]=l},{allOwnKeys:a}),t},trim:t=>mo(t)?mo(t).call(t):t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),inherits:(t,n,i,a)=>{t.prototype=Object.create(n.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),i&&Object.assign(t.prototype,i)},toFlatObject:(t,n,i,a)=>{let l,u,h;const p={};if(n=n||{},t==null)return n;do{for(l=Object.getOwnPropertyNames(t),u=l.length;u-- >0;)h=l[u],a&&!a(h,t,n)||p[h]||(n[h]=t[h],p[h]=!0);t=i!==!1&&z1(t)}while(t&&(!i||i(t,n))&&t!==Object.prototype);return n},kindOf:r_,kindOfTest:vc,endsWith:(t,n,i)=>{t=String(t),(i===void 0||i>t.length)&&(i=t.length),i-=n.length;const a=t.indexOf(n,i);return a!==-1&&a===i},toArray:t=>{if(!t)return null;if(Df(t))return t;let n=t.length;if(!UU(n))return null;const i=new Array(n);for(;n-- >0;)i[n]=t[n];return i},forEachEntry:(t,n)=>{const i=(t&&t[Symbol.iterator]).call(t);let a;for(;(a=i.next())&&!a.done;){const l=a.value;n.call(t,l[0],l[1])}},matchAll:(t,n)=>{let i;const a=[];for(;(i=t.exec(n))!==null;)a.push(i);return a},isHTMLForm:vle,hasOwnProperty:jU,hasOwnProp:jU,reduceDescriptors:$U,freezeMethods:t=>{$U(t,(n,i)=>{if(os(t)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const a=t[i];os(a)&&(n.enumerable=!1,"writable"in n?n.writable=!1:n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")}))})},toObjectSet:(t,n)=>{const i={},a=l=>{l.forEach(u=>{i[u]=!0})};return Df(t)?a(t):a(String(t).split(n)),i},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,a){return i.toUpperCase()+a}),noop:()=>{},toFiniteNumber:(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n,findKey:BU,global:zd,isContextDefined:VU,ALPHABET:zU,generateString:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zU.ALPHA_DIGIT,i="";const{length:a}=n;for(;t--;)i+=n[Math.random()*a|0];return i},isSpecCompliantForm:function(t){return!!(t&&os(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])},toJSONObject:t=>{const n=new Array(10),i=(a,l)=>{if(o_(a)){if(n.indexOf(a)>=0)return;if(!("toJSON"in a)){n[l]=a;const u=Df(a)?[]:{};return c0(a,(h,p)=>{const m=i(h,l+1);!s0(m)&&(u[p]=m)}),n[l]=void 0,u}}return a};return i(t,0)},isAsyncFn:_le,isThenable:t=>t&&(o_(t)||os(t))&&os(t.then)&&os(t.catch),setImmediate:WU,asap:Sle};function Hn(t,n,i,a,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),i&&(this.config=i),a&&(this.request=a),l&&(this.response=l,this.status=l.status?l.status:null)}qe.inherits(Hn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:qe.toJSONObject(this.config),code:this.code,status:this.status}}});const qU=Hn.prototype,YU={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{YU[t]={value:t}}),Object.defineProperties(Hn,YU),Object.defineProperty(qU,"isAxiosError",{value:!0}),Hn.from=(t,n,i,a,l,u)=>{const h=Object.create(qU);return qe.toFlatObject(t,h,function(p){return p!==Error.prototype},p=>p!=="isAxiosError"),Hn.call(h,t.message,n,i,a,l),h.cause=t,h.name=t.name,u&&Object.assign(h,u),h};function Y1(t){return qe.isPlainObject(t)||qe.isArray(t)}function XU(t){return qe.endsWith(t,"[]")?t.slice(0,-2):t}function JU(t,n,i){return t?t.concat(n).map(function(a,l){return a=XU(a),!i&&l?"["+a+"]":a}).join(i?".":""):n}const yle=qe.toFlatObject(qe,{},null,function(t){return/^is[A-Z]/.test(t)});function c_(t,n,i){if(!qe.isObject(t))throw new TypeError("target must be an object");n=n||new FormData;const a=(i=qe.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,D){return!qe.isUndefined(D[A])})).metaTokens,l=i.visitor||E,u=i.dots,h=i.indexes,p=(i.Blob||typeof Blob<"u"&&Blob)&&qe.isSpecCompliantForm(n);if(!qe.isFunction(l))throw new TypeError("visitor must be a function");function m(A){if(A===null)return"";if(qe.isDate(A))return A.toISOString();if(!p&&qe.isBlob(A))throw new Hn("Blob is not supported. Use a Buffer instead.");return qe.isArrayBuffer(A)||qe.isTypedArray(A)?p&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function E(A,D,H){let B=A;if(A&&!H&&typeof A=="object"){if(qe.endsWith(D,"{}"))D=a?D:D.slice(0,-2),A=JSON.stringify(A);else if(qe.isArray(A)&&function($){return qe.isArray($)&&!$.some(Y1)}(A)||(qe.isFileList(A)||qe.endsWith(D,"[]"))&&(B=qe.toArray(A)))return D=XU(D),B.forEach(function($,K){!qe.isUndefined($)&&$!==null&&n.append(h===!0?JU([D],K,u):h===null?D:D+"[]",m($))}),!1}return!!Y1(A)||(n.append(JU(H,D,u),m(A)),!1)}const y=[],R=Object.assign(yle,{defaultVisitor:E,convertValue:m,isVisitable:Y1});if(!qe.isObject(t))throw new TypeError("data must be an object");return function A(D,H){if(!qe.isUndefined(D)){if(y.indexOf(D)!==-1)throw Error("Circular reference detected in "+H.join("."));y.push(D),qe.forEach(D,function(B,$){(!(qe.isUndefined(B)||B===null)&&l.call(n,B,qe.isString($)?mo($).call($):$,H,R))===!0&&A(B,H?H.concat($):[$])}),y.pop()}}(t),n}function QU(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return n[i]})}function X1(t,n){this._pairs=[],t&&c_(t,this,n)}const ZU=X1.prototype;function Cle(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function e4(t,n,i){if(!n)return t;const a=i&&i.encode||Cle;qe.isFunction(i)&&(i={serialize:i});const l=i&&i.serialize;let u;if(u=l?l(n,i):qe.isURLSearchParams(n)?n.toString():new X1(n,i).toString(a),u){const h=t.indexOf("#");h!==-1&&(t=t.slice(0,h)),t+=(t.indexOf("?")===-1?"?":"&")+u}return t}ZU.append=function(t,n){this._pairs.push([t,n])},ZU.toString=function(t){const n=t?function(i){return t.call(this,i,QU)}:QU;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};var t4=class{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){qe.forEach(this.handlers,function(n){n!==null&&t(n)})}},n4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},r4={exports:{}},ble=$n,Tle=ne,i4=Ps.f;ble({target:"Object",stat:!0,forced:Object.defineProperty!==i4,sham:!Tle},{defineProperty:i4});var o4=ot.Object,Rle=r4.exports=function(t,n,i){return o4.defineProperty(t,n,i)};o4.defineProperty.sham&&(Rle.sham=!0);var a4=c(r4.exports),wle=TypeError,s4=jm,Ile=OE,Ale=ut,Ole=Un("species"),c4=Array,xle=function(t){var n;return s4(t)&&(n=t.constructor,(Ile(n)&&(n===c4||s4(n.prototype))||Ale(n)&&(n=n[Ole])===null)&&(n=void 0)),n===void 0?c4:n},l4=function(t,n){return new(xle(t))(n===0?0:n)},Nle=d,Ple=It,Dle=Un("species"),u4=function(t){return Ple>=51||!Nle(function(){var n=[];return(n.constructor={})[Dle]=function(){return{foo:1}},n[t](Boolean).foo!==1})},Lle=$n,kle=d,Mle=jm,Fle=ut,Ule=xt,Ble=Ul,d4=function(t){if(t>9007199254740991)throw wle("Maximum allowed index exceeded");return t},h4=UE,Vle=l4,jle=u4,$le=It,f4=Un("isConcatSpreadable"),Hle=$le>=51||!kle(function(){var t=[];return t[f4]=!1,t.concat()[0]!==t}),zle=function(t){if(!Fle(t))return!1;var n=t[f4];return n!==void 0?!!n:Mle(t)};Lle({target:"Array",proto:!0,arity:1,forced:!Hle||!jle("concat")},{concat:function(t){var n,i,a,l,u,h=Ule(this),p=Vle(h,0),m=0;for(n=-1,a=arguments.length;n<a;n++)if(zle(u=n===-1?h:arguments[n]))for(l=Ble(u),d4(m+l),i=0;i<l;i++,m++)i in u&&h4(p,m,u[i]);else d4(m+1),h4(p,m++,u);return p.length=m,p}});var p4={},Wle=j,Gle=Ze,m4=mE.f,Kle=QR,g4=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];p4.f=function(t){return g4&&Wle(t)=="Window"?function(n){try{return m4(n)}catch{return Kle(g4)}}(t):m4(Gle(t))};var Lf={},qle=Un;Lf.f=qle;var v4=ot,Yle=sn,Xle=Lf,Jle=Ps.f,$i=function(t){var n=v4.Symbol||(v4.Symbol={});Yle(n,t)||Jle(n,t,{value:Xle.f(t)})},Qle=he,Zle=wt,eue=Un,tue=Iu,E4=function(){var t=Zle("Symbol"),n=t&&t.prototype,i=n&&n.valueOf,a=eue("toPrimitive");n&&!n[a]&&tue(n,a,function(l){return Qle(i,this)},{arity:1})},nue=Ru,rue=De,iue=xt,oue=Ul,aue=l4,_4=b([].push),Du=function(t){var n=t==1,i=t==2,a=t==3,l=t==4,u=t==6,h=t==7,p=t==5||u;return function(m,E,y,R){for(var A,D,H=iue(m),B=rue(H),$=nue(E,y),K=oue(B),Y=0,ce=R||aue,ge=n?ce(m,K):i||h?ce(m,0):void 0;K>Y;Y++)if((p||Y in B)&&(D=$(A=B[Y],Y,H),t))if(n)ge[Y]=D;else if(D)switch(t){case 3:return!0;case 5:return A;case 6:return Y;case 2:_4(ge,A)}else switch(t){case 4:return!1;case 7:_4(ge,A)}return u?-1:a||l?l:ge}},S4={forEach:Du(0),map:Du(1),filter:Du(2),some:Du(3),every:Du(4),find:Du(5),findIndex:Du(6),filterReject:Du(7)},l_=$n,J1=w,Q1=he,sue=b,kf=ne,Mf=bn,cue=d,Io=sn,lue=T,Z1=oa,u_=Ze,ew=ji,uue=rs,tw=Re,l0=Hm,y4=vE,due=mE,C4=p4,hue=$m,b4=pe,T4=Ps,fue=eR,R4=fe,w4=Iu,pue=AE,nw=dr,I4=gE,A4=Rn,mue=Un,gue=Lf,vue=$i,Eue=E4,_ue=Au,O4=Md,d_=S4.forEach,Fa=pE("hidden"),h_="Symbol",u0="prototype",Sue=O4.set,x4=O4.getterFor(h_),Ec=Object[u0],Wd=J1.Symbol,f_=Wd&&Wd[u0],yue=J1.TypeError,rw=J1.QObject,N4=b4.f,Gd=T4.f,P4=C4.f,Cue=R4.f,D4=sue([].push),jl=nw("symbols"),d0=nw("op-symbols"),bue=nw("wks"),iw=!rw||!rw[u0]||!rw[u0].findChild,ow=kf&&cue(function(){return l0(Gd({},"a",{get:function(){return Gd(this,"a",{value:7}).a}})).a!=7})?function(t,n,i){var a=N4(Ec,n);a&&delete Ec[n],Gd(t,n,i),a&&t!==Ec&&Gd(Ec,n,a)}:Gd,aw=function(t,n){var i=jl[t]=l0(f_);return Sue(i,{type:h_,tag:t,description:n}),kf||(i.description=n),i},p_=function(t,n,i){t===Ec&&p_(d0,n,i),Z1(t);var a=ew(n);return Z1(i),Io(jl,a)?(i.enumerable?(Io(t,Fa)&&t[Fa][a]&&(t[Fa][a]=!1),i=l0(i,{enumerable:tw(0,!1)})):(Io(t,Fa)||Gd(t,Fa,tw(1,{})),t[Fa][a]=!0),ow(t,a,i)):Gd(t,a,i)},sw=function(t,n){Z1(t);var i=u_(n),a=y4(i).concat(F4(i));return d_(a,function(l){kf&&!Q1(L4,i,l)||p_(t,l,i[l])}),t},L4=function(t){var n=ew(t),i=Q1(Cue,this,n);return!(this===Ec&&Io(jl,n)&&!Io(d0,n))&&(!(i||!Io(this,n)||!Io(jl,n)||Io(this,Fa)&&this[Fa][n])||i)},k4=function(t,n){var i=u_(t),a=ew(n);if(i!==Ec||!Io(jl,a)||Io(d0,a)){var l=N4(i,a);return!l||!Io(jl,a)||Io(i,Fa)&&i[Fa][a]||(l.enumerable=!0),l}},M4=function(t){var n=P4(u_(t)),i=[];return d_(n,function(a){Io(jl,a)||Io(I4,a)||D4(i,a)}),i},F4=function(t){var n=t===Ec,i=P4(n?d0:u_(t)),a=[];return d_(i,function(l){!Io(jl,l)||n&&!Io(Ec,l)||D4(a,jl[l])}),a};Mf||(Wd=function(){if(lue(f_,this))throw yue("Symbol is not a constructor");var t=arguments.length&&arguments[0]!==void 0?uue(arguments[0]):void 0,n=A4(t),i=function(a){this===Ec&&Q1(i,d0,a),Io(this,Fa)&&Io(this[Fa],n)&&(this[Fa][n]=!1),ow(this,n,tw(1,a))};return kf&&iw&&ow(Ec,n,{configurable:!0,set:i}),aw(n,t)},w4(f_=Wd[u0],"toString",function(){return x4(this).tag}),w4(Wd,"withoutSetter",function(t){return aw(A4(t),t)}),R4.f=L4,T4.f=p_,fue.f=sw,b4.f=k4,due.f=C4.f=M4,hue.f=F4,gue.f=function(t){return aw(mue(t),t)},kf&&pue(f_,"description",{configurable:!0,get:function(){return x4(this).description}})),l_({global:!0,constructor:!0,wrap:!0,forced:!Mf,sham:!Mf},{Symbol:Wd}),d_(y4(bue),function(t){vue(t)}),l_({target:h_,stat:!0,forced:!Mf},{useSetter:function(){iw=!0},useSimple:function(){iw=!1}}),l_({target:"Object",stat:!0,forced:!Mf,sham:!kf},{create:function(t,n){return n===void 0?l0(t):sw(l0(t),n)},defineProperty:p_,defineProperties:sw,getOwnPropertyDescriptor:k4}),l_({target:"Object",stat:!0,forced:!Mf},{getOwnPropertyNames:M4}),Eue(),_ue(Wd,h_),I4[Fa]=!0;var U4=bn&&!!Symbol.for&&!!Symbol.keyFor,Tue=$n,Rue=wt,wue=sn,Iue=rs,B4=dr,Aue=U4,cw=B4("string-to-symbol-registry"),Oue=B4("symbol-to-string-registry");Tue({target:"Symbol",stat:!0,forced:!Aue},{for:function(t){var n=Iue(t);if(wue(cw,n))return cw[n];var i=Rue("Symbol")(n);return cw[n]=i,Oue[i]=n,i}});var xue=$n,Nue=sn,Pue=ir,Due=Ut,Lue=U4,V4=dr("symbol-to-string-registry");xue({target:"Symbol",stat:!0,forced:!Lue},{keyFor:function(t){if(!Pue(t))throw TypeError(Due(t)+" is not a symbol");if(Nue(V4,t))return V4[t]}});var j4=jm,kue=oe,$4=j,Mue=rs,H4=b([].push),Fue=$n,z4=wt,W4=L,Uue=he,h0=b,G4=d,K4=oe,q4=ir,Y4=xE,Bue=function(t){if(kue(t))return t;if(j4(t)){for(var n=t.length,i=[],a=0;a<n;a++){var l=t[a];typeof l=="string"?H4(i,l):typeof l!="number"&&$4(l)!="Number"&&$4(l)!="String"||H4(i,Mue(l))}var u=i.length,h=!0;return function(p,m){if(h)return h=!1,m;if(j4(this))return m;for(var E=0;E<u;E++)if(i[E]===p)return m}}},Vue=bn,jue=String,Lu=z4("JSON","stringify"),m_=h0(/./.exec),X4=h0("".charAt),$ue=h0("".charCodeAt),Hue=h0("".replace),zue=h0(1 .toString),Wue=/[\uD800-\uDFFF]/g,J4=/^[\uD800-\uDBFF]$/,Q4=/^[\uDC00-\uDFFF]$/,Z4=!Vue||G4(function(){var t=z4("Symbol")();return Lu([t])!="[null]"||Lu({a:t})!="{}"||Lu(Object(t))!="{}"}),eB=G4(function(){return Lu("\uDF06\uD834")!=='"\\udf06\\ud834"'||Lu("\uDEAD")!=='"\\udead"'}),Gue=function(t,n){var i=Y4(arguments),a=Bue(n);if(K4(a)||t!==void 0&&!q4(t))return i[1]=function(l,u){if(K4(a)&&(u=Uue(a,this,jue(l),u)),!q4(u))return u},W4(Lu,null,i)},Kue=function(t,n,i){var a=X4(i,n-1),l=X4(i,n+1);return m_(J4,t)&&!m_(Q4,l)||m_(Q4,t)&&!m_(J4,a)?"\\u"+zue($ue(t,0),16):t};Lu&&Fue({target:"JSON",stat:!0,arity:3,forced:Z4||eB},{stringify:function(t,n,i){var a=Y4(arguments),l=W4(Z4?Gue:Lu,null,a);return eB&&typeof l=="string"?Hue(l,Wue,Kue):l}});var tB=$m,que=xt;$n({target:"Object",stat:!0,forced:!bn||d(function(){tB.f(1)})},{getOwnPropertySymbols:function(t){var n=tB.f;return n?n(que(t)):[]}}),$i("asyncIterator"),$i("hasInstance"),$i("isConcatSpreadable"),$i("iterator"),$i("match"),$i("matchAll"),$i("replace"),$i("search"),$i("species"),$i("split");var Yue=E4;$i("toPrimitive"),Yue();var Xue=wt,Jue=Au;$i("toStringTag"),Jue(Xue("Symbol"),"Symbol"),$i("unscopables"),Au(w.JSON,"JSON",!0);var Que=ot.Symbol,Zue=Un,ede=Ps.f,nB=Zue("metadata"),rB=Function.prototype;rB[nB]===void 0&&ede(rB,nB,{value:null}),$i("dispose"),$i("metadata");var tde=Que;$i("asyncDispose");var nde=b,lw=wt("Symbol"),rde=lw.keyFor,ide=nde(lw.prototype.valueOf),iB=lw.isRegisteredSymbol||function(t){try{return rde(ide(t))!==void 0}catch{return!1}};$n({target:"Symbol",stat:!0},{isRegisteredSymbol:iB});for(var ode=dr,oB=wt,ade=b,sde=ir,cde=Un,g_=oB("Symbol"),aB=g_.isWellKnownSymbol,sB=oB("Object","getOwnPropertyNames"),lde=ade(g_.prototype.valueOf),cB=ode("wks"),uw=0,lB=sB(g_),ude=lB.length;uw<ude;uw++)try{var uB=lB[uw];sde(g_[uB])&&cde(uB)}catch{}var dB=function(t){if(aB&&aB(t))return!0;try{for(var n=lde(t),i=0,a=sB(cB),l=a.length;i<l;i++)if(cB[a[i]]==n)return!0}catch{}return!1};$n({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:dB}),$i("matcher"),$i("observable"),$n({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:iB}),$n({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:dB}),$i("metadataKey"),$i("patternMatch"),$i("replaceAll");var Ff=c(tde),hB=c(Lf.f("iterator"));function f0(t){return f0=typeof Ff=="function"&&typeof hB=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Ff=="function"&&n.constructor===Ff&&n!==Ff.prototype?"symbol":typeof n},f0(t)}var dde=c(Lf.f("toPrimitive"));function hde(t){var n=function(i,a){if(f0(i)!=="object"||i===null)return i;var l=i[dde];if(l!==void 0){var u=l.call(i,a||"default");if(f0(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(i)}(t,"string");return f0(n)==="symbol"?n:String(n)}function G(t,n,i){return(n=hde(n))in t?a4(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}var fB=c(qae),fde={isBrowser:!0,classes:{URLSearchParams:fB!==void 0?fB:X1,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]};const dw=typeof window<"u"&&typeof document<"u",hw=typeof navigator=="object"&&navigator||void 0,pde=dw&&(!hw||["ReactNative","NativeScript","NS"].indexOf(hw.product)<0),mde=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",gde=dw&&window.location.href||"http://localhost";function pB(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function mB(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?pB(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):pB(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}var aa=mB(mB({},Object.freeze({__proto__:null,hasBrowserEnv:dw,hasStandardBrowserEnv:pde,hasStandardBrowserWebWorkerEnv:mde,navigator:hw,origin:gde})),fde),vde=oa,Ede=he,_de=sn,Sde=T,yde=function(){var t=vde(this),n="";return t.hasIndices&&(n+="d"),t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.dotAll&&(n+="s"),t.unicode&&(n+="u"),t.unicodeSets&&(n+="v"),t.sticky&&(n+="y"),n},gB=RegExp.prototype,vB=function(t){var n=t.flags;return n!==void 0||"flags"in gB||_de(t,"flags")||!Sde(gB,t)?n:Ede(yde,t)},Cde=KR.charAt,EB=he,bde=oa,Tde=oe,Rde=j,wde=/./.exec,Ide=TypeError,Ade=$n,_B=he,SB=W,Ode=pR,v_=gR,yB=Fe,CB=IL,p0=rs,xde=oa,Nde=Ae,Pde=j,Dde=OL,bB=vB,Lde=Ht,kde=d,Mde=yR,Fde=function(t,n,i){return n+(i?Cde(t,n).length:1)},Ude=function(t,n){var i=t.exec;if(Tde(i)){var a=EB(i,t,n);return a!==null&&bde(a),a}if(Rde(t)==="RegExp")return EB(wde,t,n);throw Ide("RegExp#exec called on incompatible receiver")},TB=Md,Bde=Un("matchAll"),RB="RegExp String",wB=RB+" Iterator",Vde=TB.set,jde=TB.getterFor(wB),$de=TypeError,fw=SB("".indexOf),E_=SB("".matchAll),pw=!!E_&&!kde(function(){E_("a",/./)}),Hde=Ode(function(t,n,i,a){Vde(this,{type:wB,regexp:t,string:n,global:i,unicode:a,done:!1})},RB,function(){var t=jde(this);if(t.done)return v_(void 0,!0);var n=t.regexp,i=t.string,a=Ude(n,i);return a===null?(t.done=!0,v_(void 0,!0)):t.global?(p0(a[0])===""&&(n.lastIndex=Fde(i,CB(n.lastIndex),t.unicode)),v_(a,!1)):(t.done=!0,v_(a,!1))}),IB=function(t){var n,i,a,l=xde(this),u=p0(t),h=Mde(l,RegExp),p=p0(bB(l));return n=new h(h===RegExp?l.source:l,p),i=!!~fw(p,"g"),a=!!~fw(p,"u"),n.lastIndex=CB(l.lastIndex),new Hde(n,u,i,a)};Ade({target:"String",proto:!0,forced:pw},{matchAll:function(t){var n,i,a,l,u=yB(this);if(Nde(t)){if(pw)return E_(u,t)}else{if(Dde(t)&&(n=p0(yB(bB(t))),!~fw(n,"g")))throw $de("`.matchAll` does not allow non-global regexes");if(pw)return E_(u,t);if((a=Lde(t,Bde))===void 0&&Pde(t)=="RegExp"&&(a=IB),a)return _B(a,t,u)}return i=p0(u),l=new RegExp(t,"g"),_B(IB,l,i)}});var zde=Ds("String").matchAll,Wde=T,Gde=zde,mw=String.prototype,Kde=function(t){var n=t.matchAll;return typeof t=="string"||t===mw||Wde(mw,t)&&n===mw.matchAll?Gde:n},qde=c(Kde);function AB(t){function n(i,a,l,u){let h=i[u++];if(h==="__proto__")return!0;const p=Number.isFinite(+h),m=u>=i.length;return h=!h&&qe.isArray(l)?l.length:h,m?(qe.hasOwnProp(l,h)?l[h]=[l[h],a]:l[h]=a,!p):(l[h]&&qe.isObject(l[h])||(l[h]=[]),n(i,a,l[h],u)&&qe.isArray(l[h])&&(l[h]=function(E){const y={},R=Object.keys(E);let A;const D=R.length;let H;for(A=0;A<D;A++)H=R[A],y[H]=E[H];return y}(l[h])),!p)}if(qe.isFormData(t)&&qe.isFunction(t.entries)){const i={};return qe.forEachEntry(t,(a,l)=>{n(function(u){return qde(qe).call(qe,/\w+|\[(\w*)]/g,u).map(h=>h[0]==="[]"?"":h[1]||h[0])}(a),l,i,0)}),i}return null}const gw={transitional:n4,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",a=i.indexOf("application/json")>-1,l=qe.isObject(t);if(l&&qe.isHTMLForm(t)&&(t=new FormData(t)),qe.isFormData(t))return a?JSON.stringify(AB(t)):t;if(qe.isArrayBuffer(t)||qe.isBuffer(t)||qe.isStream(t)||qe.isFile(t)||qe.isBlob(t)||qe.isReadableStream(t))return t;if(qe.isArrayBufferView(t))return t.buffer;if(qe.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return function(h,p){return c_(h,new aa.classes.URLSearchParams,Object.assign({visitor:function(m,E,y,R){return aa.isNode&&qe.isBuffer(m)?(this.append(E,m.toString("base64")),!1):R.defaultVisitor.apply(this,arguments)}},p))}(t,this.formSerializer).toString();if((u=qe.isFileList(t))||i.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return c_(u?{"files[]":t}:t,h&&new h,this.formSerializer)}}return l||a?(n.setContentType("application/json",!1),function(h,p,m){if(qe.isString(h))try{return(p||JSON.parse)(h),mo(qe).call(qe,h)}catch(E){if(E.name!=="SyntaxError")throw E}return(m||JSON.stringify)(h)}(t)):t}],transformResponse:[function(t){const n=this.transitional||gw.transitional,i=n&&n.forcedJSONParsing,a=this.responseType==="json";if(qe.isResponse(t)||qe.isReadableStream(t))return t;if(t&&qe.isString(t)&&(i&&!this.responseType||a)){const l=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(u){if(l)throw u.name==="SyntaxError"?Hn.from(u,Hn.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:aa.classes.FormData,Blob:aa.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};qe.forEach(["delete","get","head","post","put","patch"],t=>{gw.headers[t]={}});var vw=gw;const Yde=qe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),OB=Symbol("internals");function m0(t){var n;return t&&mo(n=String(t)).call(n).toLowerCase()}function __(t){return t===!1||t==null?t:qe.isArray(t)?t.map(__):String(t)}function Ew(t,n,i,a,l){return qe.isFunction(a)?a.call(this,n,i):(l&&(n=i),qe.isString(n)?qe.isString(a)?n.indexOf(a)!==-1:qe.isRegExp(a)?a.test(n):void 0:void 0)}class S_{constructor(n){n&&this.set(n)}set(n,i,a){const l=this;function u(m,E,y){const R=m0(E);if(!R)throw new Error("header name must be a non-empty string");const A=qe.findKey(l,R);(!A||l[A]===void 0||y===!0||y===void 0&&l[A]!==!1)&&(l[A||E]=__(m))}const h=(m,E)=>qe.forEach(m,(y,R)=>u(y,R,E));if(qe.isPlainObject(n)||n instanceof this.constructor)h(n,i);else if(qe.isString(n)&&(n=mo(n).call(n))&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(mo(p=n).call(p)))h((m=>{const E={};let y,R,A;return m&&m.split(`
`).forEach(function(D){var H,B;A=D.indexOf(":"),y=mo(H=D.substring(0,A)).call(H).toLowerCase(),R=mo(B=D.substring(A+1)).call(B),!y||E[y]&&Yde[y]||(y==="set-cookie"?E[y]?E[y].push(R):E[y]=[R]:E[y]=E[y]?E[y]+", "+R:R)}),E})(n),i);else if(qe.isHeaders(n))for(const[m,E]of n.entries())u(E,m,a);else n!=null&&u(i,n,a);var p;return this}get(n,i){if(n=m0(n)){const a=qe.findKey(this,n);if(a){const l=this[a];if(!i)return l;if(i===!0)return function(u){const h=Object.create(null),p=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let m;for(;m=p.exec(u);)h[m[1]]=m[2];return h}(l);if(qe.isFunction(i))return i.call(this,l,a);if(qe.isRegExp(i))return i.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,i){if(n=m0(n)){const a=qe.findKey(this,n);return!(!a||this[a]===void 0||i&&!Ew(0,this[a],a,i))}return!1}delete(n,i){const a=this;let l=!1;function u(h){if(h=m0(h)){const p=qe.findKey(a,h);!p||i&&!Ew(0,a[p],p,i)||(delete a[p],l=!0)}}return qe.isArray(n)?n.forEach(u):u(n),l}clear(n){const i=Object.keys(this);let a=i.length,l=!1;for(;a--;){const u=i[a];n&&!Ew(0,this[u],u,n,!0)||(delete this[u],l=!0)}return l}normalize(n){const i=this,a={};return qe.forEach(this,(l,u)=>{var h;const p=qe.findKey(a,u);if(p)return i[p]=__(l),void delete i[u];const m=n?function(E){return mo(E).call(E).toLowerCase().replace(/([a-z\d])(\w*)/g,(y,R,A)=>R.toUpperCase()+A)}(u):mo(h=String(u)).call(h);m!==u&&delete i[u],i[m]=__(l),a[m]=!0}),this}concat(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return this.constructor.concat(this,...i)}toJSON(n){const i=Object.create(null);return qe.forEach(this,(a,l)=>{a!=null&&a!==!1&&(i[l]=n&&qe.isArray(a)?a.join(", "):a)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(n=>{let[i,a]=n;return i+": "+a}).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n){const i=new this(n);for(var a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];return l.forEach(h=>i.set(h)),i}static accessor(n){const i=(this[OB]=this[OB]={accessors:{}}).accessors,a=this.prototype;function l(u){const h=m0(u);i[h]||(function(p,m){const E=qe.toCamelCase(" "+m);["get","set","has"].forEach(y=>{Object.defineProperty(p,y+E,{value:function(R,A,D){return this[y].call(this,m,R,A,D)},configurable:!0})})}(a,u),i[h]=!0)}return qe.isArray(n)?n.forEach(l):l(n),this}}S_.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),qe.reduceDescriptors(S_.prototype,(t,n)=>{let{value:i}=t,a=n[0].toUpperCase()+n.slice(1);return{get:()=>i,set(l){this[a]=l}}}),qe.freezeMethods(S_);var _c=S_;function _w(t,n){const i=this||vw,a=n||i,l=_c.from(a.headers);let u=a.data;return qe.forEach(t,function(h){u=h.call(i,u,l.normalize(),n?n.status:void 0)}),l.normalize(),u}function xB(t){return!(!t||!t.__CANCEL__)}function Uf(t,n,i){Hn.call(this,t??"canceled",Hn.ERR_CANCELED,n,i),this.name="CanceledError"}function NB(t,n,i){const a=i.config.validateStatus;i.status&&a&&!a(i.status)?n(new Hn("Request failed with status code "+i.status,[Hn.ERR_BAD_REQUEST,Hn.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):t(i)}qe.inherits(Uf,Hn,{__CANCEL__:!0});const y_=function(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,a=0;const l=function(u,h){u=u||10;const p=new Array(u),m=new Array(u);let E,y=0,R=0;return h=h!==void 0?h:1e3,function(A){const D=Date.now(),H=m[R];E||(E=D),p[y]=A,m[y]=D;let B=R,$=0;for(;B!==y;)$+=p[B++],B%=u;if(y=(y+1)%u,y===R&&(R=(R+1)%u),D-E<h)return;const K=H&&D-H;return K?Math.round(1e3*$/K):void 0}}(50,250);return function(u,h){let p,m,E=0,y=1e3/h;const R=function(A){E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Date.now(),p=null,m&&(clearTimeout(m),m=null),u.apply(null,A)};return[function(){const A=Date.now(),D=A-E;for(var H=arguments.length,B=new Array(H),$=0;$<H;$++)B[$]=arguments[$];D>=y?R(B,A):(p=B,m||(m=setTimeout(()=>{m=null,R(p)},y-D)))},()=>p&&R(p)]}(u=>{const h=u.loaded,p=u.lengthComputable?u.total:void 0,m=h-a,E=l(m);a=h,t({loaded:h,total:p,progress:p?h/p:void 0,bytes:m,rate:E||void 0,estimated:E&&p&&h<=p?(p-h)/E:void 0,event:u,lengthComputable:p!=null,[n?"download":"upload"]:!0})},i)},PB=(t,n)=>{const i=t!=null;return[a=>n[0]({lengthComputable:i,total:t,loaded:a}),n[1]]},DB=t=>function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return qe.asap(()=>t(...i))};var Xde=aa.hasStandardBrowserEnv?((t,n)=>i=>(i=new XE(i,aa.origin),t.protocol===i.protocol&&t.host===i.host&&(n||t.port===i.port)))(new XE(aa.origin),aa.navigator&&/(msie|trident)/i.test(aa.navigator.userAgent)):()=>!0,Jde=aa.hasStandardBrowserEnv?{write(t,n,i,a,l,u){const h=[t+"="+encodeURIComponent(n)];qe.isNumber(i)&&h.push("expires="+new Date(i).toGMTString()),qe.isString(a)&&h.push("path="+a),qe.isString(l)&&h.push("domain="+l),u===!0&&h.push("secure"),document.cookie=h.join("; ")},read(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function LB(t,n){return t&&!function(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}(n)?function(i,a){return a?i.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):i}(t,n):n}function kB(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}const MB=t=>t instanceof _c?function(n){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?kB(Object(a),!0).forEach(function(l){G(n,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):kB(Object(a)).forEach(function(l){Object.defineProperty(n,l,Object.getOwnPropertyDescriptor(a,l))})}return n}({},t):t;function Kd(t,n){n=n||{};const i={};function a(E,y,R,A){return qe.isPlainObject(E)&&qe.isPlainObject(y)?qe.merge.call({caseless:A},E,y):qe.isPlainObject(y)?qe.merge({},y):qe.isArray(y)?y.slice():y}function l(E,y,R,A){return qe.isUndefined(y)?qe.isUndefined(E)?void 0:a(void 0,E,0,A):a(E,y,0,A)}function u(E,y){if(!qe.isUndefined(y))return a(void 0,y)}function h(E,y){return qe.isUndefined(y)?qe.isUndefined(E)?void 0:a(void 0,E):a(void 0,y)}function p(E,y,R){return R in n?a(E,y):R in t?a(void 0,E):void 0}const m={url:u,method:u,data:u,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:p,headers:(E,y,R)=>l(MB(E),MB(y),0,!0)};return qe.forEach(Object.keys(Object.assign({},t,n)),function(E){const y=m[E]||l,R=y(t[E],n[E],E);qe.isUndefined(R)&&y!==p||(i[E]=R)}),i}var FB=t=>{const n=Kd({},t);let i,{data:a,withXSRFToken:l,xsrfHeaderName:u,xsrfCookieName:h,headers:p,auth:m}=n;if(n.headers=p=_c.from(p),n.url=e4(LB(n.baseURL,n.url),t.params,t.paramsSerializer),m&&p.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):""))),qe.isFormData(a)){if(aa.hasStandardBrowserEnv||aa.hasStandardBrowserWebWorkerEnv)p.setContentType(void 0);else if((i=p.getContentType())!==!1){const[E,...y]=i?i.split(";").map(R=>mo(R).call(R)).filter(Boolean):[];p.setContentType([E||"multipart/form-data",...y].join("; "))}}if(aa.hasStandardBrowserEnv&&(l&&qe.isFunction(l)&&(l=l(n)),l||l!==!1&&Xde(n.url))){const E=u&&h&&Jde.read(h);E&&p.set(u,E)}return n},Qde=typeof XMLHttpRequest<"u"&&function(t){return new Ye(function(n,i){const a=FB(t);let l=a.data;const u=_c.from(a.headers).normalize();let h,p,m,E,y,{responseType:R,onUploadProgress:A,onDownloadProgress:D}=a;function H(){E&&E(),y&&y(),a.cancelToken&&a.cancelToken.unsubscribe(h),a.signal&&a.signal.removeEventListener("abort",h)}let B=new XMLHttpRequest;function $(){if(!B)return;const Y=_c.from("getAllResponseHeaders"in B&&B.getAllResponseHeaders());NB(function(ce){n(ce),H()},function(ce){i(ce),H()},{data:R&&R!=="text"&&R!=="json"?B.response:B.responseText,status:B.status,statusText:B.statusText,headers:Y,config:t,request:B}),B=null}B.open(a.method.toUpperCase(),a.url,!0),B.timeout=a.timeout,"onloadend"in B?B.onloadend=$:B.onreadystatechange=function(){B&&B.readyState===4&&(B.status!==0||B.responseURL&&B.responseURL.indexOf("file:")===0)&&setTimeout($)},B.onabort=function(){B&&(i(new Hn("Request aborted",Hn.ECONNABORTED,t,B)),B=null)},B.onerror=function(){i(new Hn("Network Error",Hn.ERR_NETWORK,t,B)),B=null},B.ontimeout=function(){let Y=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const ce=a.transitional||n4;a.timeoutErrorMessage&&(Y=a.timeoutErrorMessage),i(new Hn(Y,ce.clarifyTimeoutError?Hn.ETIMEDOUT:Hn.ECONNABORTED,t,B)),B=null},l===void 0&&u.setContentType(null),"setRequestHeader"in B&&qe.forEach(u.toJSON(),function(Y,ce){B.setRequestHeader(ce,Y)}),qe.isUndefined(a.withCredentials)||(B.withCredentials=!!a.withCredentials),R&&R!=="json"&&(B.responseType=a.responseType),D&&([m,y]=y_(D,!0),B.addEventListener("progress",m)),A&&B.upload&&([p,E]=y_(A),B.upload.addEventListener("progress",p),B.upload.addEventListener("loadend",E)),(a.cancelToken||a.signal)&&(h=Y=>{B&&(i(!Y||Y.type?new Uf(null,t,B):Y),B.abort(),B=null)},a.cancelToken&&a.cancelToken.subscribe(h),a.signal&&(a.signal.aborted?h():a.signal.addEventListener("abort",h)));const K=function(Y){const ce=/^([-+\w]{1,25})(:?\/\/|:)/.exec(Y);return ce&&ce[1]||""}(a.url);K&&aa.protocols.indexOf(K)===-1?i(new Hn("Unsupported protocol "+K+":",Hn.ERR_BAD_REQUEST,t)):B.send(l||null)})},Zde=(t,n)=>{const{length:i}=t=t?t.filter(Boolean):[];if(n||i){let a,l=new AbortController;const u=function(E){if(!a){a=!0,p();const y=E instanceof Error?E:this.reason;l.abort(y instanceof Hn?y:new Uf(y instanceof Error?y.message:y))}};let h=n&&setTimeout(()=>{h=null,u(new Hn("timeout ".concat(n," of ms exceeded"),Hn.ETIMEDOUT))},n);const p=()=>{t&&(h&&clearTimeout(h),h=null,t.forEach(E=>{E.unsubscribe?E.unsubscribe(u):E.removeEventListener("abort",u)}),t=null)};t.forEach(E=>E.addEventListener("abort",u));const{signal:m}=l;return m.unsubscribe=()=>qe.asap(p),m}},ehe=OM,the=el;$n({target:"Promise",stat:!0,forced:!0},{withResolvers:function(){var t=the.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}});var nhe=el,rhe=_f;$n({target:"Promise",stat:!0,forced:!0},{try:function(t){var n=nhe.f(this),i=rhe(t);return(i.error?n.reject:n.resolve)(i.value),n.promise}});var Sw=c(ehe),UB=Lf.f("asyncIterator"),ihe=c(UB);function yw(t,n){this.v=t,this.k=n}function g0(t){var n,i;function a(u,h){try{var p=t[u](h),m=p.value,E=m instanceof yw;Sw.resolve(E?m.v:m).then(function(y){if(E){var R=u==="return"?"return":"next";if(!m.k||y.done)return a(R,y);y=t[R](y).value}l(p.done?"return":"normal",y)},function(y){a("throw",y)})}catch(y){l("throw",y)}}function l(u,h){switch(u){case"return":n.resolve({value:h,done:!0});break;case"throw":n.reject(h);break;default:n.resolve({value:h,done:!1})}(n=n.next)?a(n.key,n.arg):i=null}this._invoke=function(u,h){return new Sw(function(p,m){var E={key:u,arg:h,resolve:p,reject:m,next:null};i?i=i.next=E:(n=i=E,a(u,h))})},typeof t.return!="function"&&(this.return=void 0)}function as(t){return function(){return new g0(t.apply(this,arguments))}}function vn(t){return new yw(t,0)}function C_(t){var n={},i=!1;function a(l,u){return i=!0,{done:!1,value:new yw(u=new Sw(function(h){h(t[l](u))}),1)}}return n[Ff!==void 0&&hB||"@@iterator"]=function(){return this},n.next=function(l){return i?(i=!1,l):a("next",l)},typeof t.throw=="function"&&(n.throw=function(l){if(i)throw i=!1,l;return a("throw",l)}),typeof t.return=="function"&&(n.return=function(l){return i?(i=!1,l):a("return",l)}),n}g0.prototype[typeof Ff=="function"&&ihe||"@@asyncIterator"]=function(){return this},g0.prototype.next=function(t){return this._invoke("next",t)},g0.prototype.throw=function(t){return this._invoke("throw",t)},g0.prototype.return=function(t){return this._invoke("return",t)};var Cw=c(UB);function bw(t){var n,i,a,l=2;for(typeof Symbol<"u"&&(i=Cw,a=Symbol.iterator);l--;){if(i&&(n=t[i])!=null)return n.call(t);if(a&&(n=t[a])!=null)return new b_(n.call(t));i="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")}function b_(t){function n(i){if(Object(i)!==i)return Ye.reject(new TypeError(i+" is not an object."));var a=i.done;return Ye.resolve(i.value).then(function(l){return{value:l,done:a}})}return b_=function(i){this.s=i,this.n=i.next},b_.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(i){var a=this.s.return;return a===void 0?Ye.resolve({value:i,done:!0}):n(a.apply(this.s,arguments))},throw:function(i){var a=this.s.return;return a===void 0?Ye.reject(i):n(a.apply(this.s,arguments))}},new b_(t)}const ohe=function*(t,n){let i=t.byteLength;if(!n||i<n)return void(yield t);let a,l=0;for(;l<i;)a=l+n,yield t.slice(l,a),l=a},ahe=function(){var t=as(function*(n,i){var a,l=!1,u=!1;try{for(var h,p=bw(she(n));l=!(h=yield vn(p.next())).done;l=!1){const m=h.value;yield*C_(bw(ohe(m,i)))}}catch(m){u=!0,a=m}finally{try{l&&p.return!=null&&(yield vn(p.return()))}finally{if(u)throw a}}});return function(n,i){return t.apply(this,arguments)}}(),she=function(){var t=as(function*(n){if(n[Cw])return void(yield*C_(bw(n)));const i=n.getReader();try{for(;;){const{done:a,value:l}=yield vn(i.read());if(a)break;yield l}}finally{yield vn(i.cancel())}});return function(n){return t.apply(this,arguments)}}(),BB=(t,n,i,a)=>{const l=ahe(t,n);let u,h=0,p=m=>{u||(u=!0,a&&a(m))};return new ReadableStream({async pull(m){try{const{done:E,value:y}=await l.next();if(E)return p(),void m.close();let R=y.byteLength;if(i){let A=h+=R;i(A)}m.enqueue(new Uint8Array(y))}catch(E){throw p(E),E}},cancel:m=>(p(m),l.return())},{highWaterMark:2})};function VB(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function jB(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?VB(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):VB(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}const T_=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",$B=T_&&typeof ReadableStream=="function",che=T_&&(typeof TextEncoder=="function"?(HB=new TextEncoder,t=>HB.encode(t)):async t=>new Uint8Array(await new Response(t).arrayBuffer()));var HB;const zB=function(t){try{for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return!!t(...i)}catch{return!1}},lhe=$B&&zB(()=>{let t=!1;const n=new Request(aa.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!n}),Tw=$B&&zB(()=>qe.isReadableStream(new Response("").body)),R_={stream:Tw&&(t=>t.body)};var WB;T_&&(WB=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!R_[t]&&(R_[t]=qe.isFunction(WB[t])?n=>n[t]():(n,i)=>{throw new Hn("Response type '".concat(t,"' is not supported"),Hn.ERR_NOT_SUPPORT,i)})}));const uhe=async(t,n)=>{const i=qe.toFiniteNumber(t.getContentLength());return i??(async a=>a==null?0:qe.isBlob(a)?a.size:qe.isSpecCompliantForm(a)?(await new Request(aa.origin,{method:"POST",body:a}).arrayBuffer()).byteLength:qe.isArrayBufferView(a)||qe.isArrayBuffer(a)?a.byteLength:(qe.isURLSearchParams(a)&&(a+=""),qe.isString(a)?(await che(a)).byteLength:void 0))(n)};var dhe=T_&&(async t=>{let{url:n,method:i,data:a,signal:l,cancelToken:u,timeout:h,onDownloadProgress:p,onUploadProgress:m,responseType:E,headers:y,withCredentials:R="same-origin",fetchOptions:A}=FB(t);E=E?(E+"").toLowerCase():"text";let D,H=Zde([l,u&&u.toAbortSignal()],h);const B=H&&H.unsubscribe&&(()=>{H.unsubscribe()});let $;try{if(m&&lhe&&i!=="get"&&i!=="head"&&($=await uhe(y,a))!==0){let Ee,me=new Request(n,{method:"POST",body:a,duplex:"half"});if(qe.isFormData(a)&&(Ee=me.headers.get("content-type"))&&y.setContentType(Ee),me.body){const[Te,Me]=PB($,y_(DB(m)));a=BB(me.body,65536,Te,Me)}}qe.isString(R)||(R=R?"include":"omit");const K="credentials"in Request.prototype;D=new Request(n,jB(jB({},A),{},{signal:H,method:i.toUpperCase(),headers:y.normalize().toJSON(),body:a,duplex:"half",credentials:K?R:void 0}));let Y=await fetch(D);const ce=Tw&&(E==="stream"||E==="response");if(Tw&&(p||ce&&B)){const Ee={};["status","statusText","headers"].forEach(Xe=>{Ee[Xe]=Y[Xe]});const me=qe.toFiniteNumber(Y.headers.get("content-length")),[Te,Me]=p&&PB(me,y_(DB(p),!0))||[];Y=new Response(BB(Y.body,65536,Te,()=>{Me&&Me(),B&&B()}),Ee)}E=E||"text";let ge=await R_[qe.findKey(R_,E)||"text"](Y,t);return!ce&&B&&B(),await new Ye((Ee,me)=>{NB(Ee,me,{data:ge,headers:_c.from(Y.headers),status:Y.status,statusText:Y.statusText,config:t,request:D})})}catch(K){throw B&&B(),K&&K.name==="TypeError"&&/fetch/i.test(K.message)?Object.assign(new Hn("Network Error",Hn.ERR_NETWORK,t,D),{cause:K.cause||K}):Hn.from(K,K&&K.code,t,D)}});const Rw={http:null,xhr:Qde,fetch:dhe};qe.forEach(Rw,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const GB=t=>"- ".concat(t),hhe=t=>qe.isFunction(t)||t===null||t===!1;var KB={getAdapter:t=>{t=qe.isArray(t)?t:[t];const{length:n}=t;let i,a;const l={};for(let u=0;u<n;u++){let h;if(i=t[u],a=i,!hhe(i)&&(a=Rw[(h=String(i)).toLowerCase()],a===void 0))throw new Hn("Unknown adapter '".concat(h,"'"));if(a)break;l[h||"#"+u]=a}if(!a){const u=Object.entries(l).map(h=>{let[p,m]=h;return"adapter ".concat(p," ")+(m===!1?"is not supported by the environment":"is not available in the build")});throw new Hn("There is no suitable adapter to dispatch the request "+(n?u.length>1?`since :
`+u.map(GB).join(`
`):" "+GB(u[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return a},adapters:Rw};function ww(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Uf(null,t)}function qB(t){return ww(t),t.headers=_c.from(t.headers),t.data=_w.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),KB.getAdapter(t.adapter||vw.adapter)(t).then(function(n){return ww(t),n.data=_w.call(t,t.transformResponse,n),n.headers=_c.from(n.headers),n},function(n){return xB(n)||(ww(t),n&&n.response&&(n.response.data=_w.call(t,t.transformResponse,n.response),n.response.headers=_c.from(n.response.headers))),Ye.reject(n)})}const YB="1.7.9",w_={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{w_[t]=function(i){return typeof i===t||"a"+(n<1?"n ":" ")+t}});const XB={};w_.transitional=function(t,n,i){function a(l,u){return"[Axios v"+YB+"] Transitional option '"+l+"'"+u+(i?". "+i:"")}return(l,u,h)=>{if(t===!1)throw new Hn(a(u," has been removed"+(n?" in "+n:"")),Hn.ERR_DEPRECATED);return n&&!XB[u]&&(XB[u]=!0,console.warn(a(u," has been deprecated since v"+n+" and will be removed in the near future"))),!t||t(l,u,h)}},w_.spelling=function(t){return(n,i)=>(console.warn("".concat(i," is likely a misspelling of ").concat(t)),!0)};var I_={assertOptions:function(t,n,i){if(typeof t!="object")throw new Hn("options must be an object",Hn.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let l=a.length;for(;l-- >0;){const u=a[l],h=n[u];if(h){const p=t[u],m=p===void 0||h(p,u,t);if(m!==!0)throw new Hn("option "+u+" must be "+m,Hn.ERR_BAD_OPTION_VALUE)}else if(i!==!0)throw new Hn("Unknown option "+u,Hn.ERR_BAD_OPTION)}},validators:w_};const rl=I_.validators;let A_=class{constructor(t){this.defaults=t,this.interceptors={request:new t4,response:new t4}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(t,n){typeof t=="string"?(n=n||{}).url=t:n=t||{},n=Kd(this.defaults,n);const{transitional:i,paramsSerializer:a,headers:l}=n;i!==void 0&&I_.assertOptions(i,{silentJSONParsing:rl.transitional(rl.boolean),forcedJSONParsing:rl.transitional(rl.boolean),clarifyTimeoutError:rl.transitional(rl.boolean)},!1),a!=null&&(qe.isFunction(a)?n.paramsSerializer={serialize:a}:I_.assertOptions(a,{encode:rl.function,serialize:rl.function},!0)),I_.assertOptions(n,{baseUrl:rl.spelling("baseURL"),withXsrfToken:rl.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=l&&qe.merge(l.common,l[n.method]);l&&qe.forEach(["delete","get","head","post","put","patch","common"],D=>{delete l[D]}),n.headers=_c.concat(u,l);const h=[];let p=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(n)===!1||(p=p&&D.synchronous,h.unshift(D.fulfilled,D.rejected))});const m=[];let E;this.interceptors.response.forEach(function(D){m.push(D.fulfilled,D.rejected)});let y,R=0;if(!p){const D=[qB.bind(this),void 0];for(D.unshift.apply(D,h),D.push.apply(D,m),y=D.length,E=Ye.resolve(n);R<y;)E=E.then(D[R++],D[R++]);return E}y=h.length;let A=n;for(R=0;R<y;){const D=h[R++],H=h[R++];try{A=D(A)}catch(B){H.call(this,B);break}}try{E=qB.call(this,A)}catch(D){return Ye.reject(D)}for(R=0,y=m.length;R<y;)E=E.then(m[R++],m[R++]);return E}getUri(t){return e4(LB((t=Kd(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}};qe.forEach(["delete","get","head","options"],function(t){A_.prototype[t]=function(n,i){return this.request(Kd(i||{},{method:t,url:n,data:(i||{}).data}))}}),qe.forEach(["post","put","patch"],function(t){function n(i){return function(a,l,u){return this.request(Kd(u||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}A_.prototype[t]=n(),A_.prototype[t+"Form"]=n(!0)});var O_=A_;class Iw{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Ye(function(l){i=l});const a=this;this.promise.then(l=>{if(!a._listeners)return;let u=a._listeners.length;for(;u-- >0;)a._listeners[u](l);a._listeners=null}),this.promise.then=l=>{let u;const h=new Ye(p=>{a.subscribe(p),u=p}).then(l);return h.cancel=function(){a.unsubscribe(u)},h},n(function(l,u,h){a.reason||(a.reason=new Uf(l,u,h),i(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){this.reason?n(this.reason):this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const n=new AbortController,i=a=>{n.abort(a)};return this.subscribe(i),n.signal.unsubscribe=()=>this.unsubscribe(i),n.signal}static source(){let n;return{token:new Iw(function(a){n=a}),cancel:n}}}var fhe=Iw;const Aw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Aw).forEach(t=>{let[n,i]=t;Aw[i]=n});var phe=Aw;const co=function t(n){const i=new O_(n),a=MU(O_.prototype.request,i);return qe.extend(a,O_.prototype,i,{allOwnKeys:!0}),qe.extend(a,i,null,{allOwnKeys:!0}),a.create=function(l){return t(Kd(n,l))},a}(vw);co.Axios=O_,co.CanceledError=Uf,co.CancelToken=fhe,co.isCancel=xB,co.VERSION=YB,co.toFormData=c_,co.AxiosError=Hn,co.Cancel=co.CanceledError,co.all=function(t){return Ye.all(t)},co.spread=function(t){return function(n){return t.apply(null,n)}},co.isAxiosError=function(t){return qe.isObject(t)&&t.isAxiosError===!0},co.mergeConfig=Kd,co.AxiosHeaders=_c,co.formToJSON=t=>AB(qe.isHTMLForm(t)?new FormData(t):t),co.getAdapter=KB.getAdapter,co.HttpStatusCode=phe,co.default=co;var zo=co;const mhe=()=>{};function v0(){const t={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:mhe};return t.promise=new Ye((n,i)=>{t.resolve=a=>{t.isFinished||(t.isResolved=!0,t.isFinished=!0,n(a),t.value=a)},t.reject=a=>{t.isFinished||(t.isRejected=!0,t.isFinished=!0,i(a))}}),t}const x_=new Map,N_=new Map,il=new Map;let Ei=function(t){return t.WIN_10="Windows 10",t.WIN_81="Windows 8.1",t.WIN_8="Windows 8",t.WIN_7="Windows 7",t.WIN_VISTA="Windows Vista",t.WIN_SERVER_2003="Windows Server 2003",t.WIN_XP="Windows XP",t.WIN_2000="Windows 2000",t.ANDROID="Android",t.HARMONY_OS="HarmonyOS",t.OPEN_BSD="Open BSD",t.SUN_OS="Sun OS",t.LINUX="Linux",t.IOS="iOS",t.MAC_OS="Mac OS",t.CHROMIUM_OS="Chromium OS",t.QNX="QNX",t.UNIX="UNIX",t.BEOS="BeOS",t.OS_2="OS/2",t.SEARCH_BOT="Search Bot",t}({}),On=function(t){return t.CHROME="Chrome",t.SAFARI="Safari",t.EDGE="Edge",t.FIREFOX="Firefox",t.OPERA="OPR",t.QQ="QQBrowser",t.WECHAT="MicroMessenger",t}({});const Ow=new Dce;let Sc=Ow.getResult(),xw=null;function En(t){if(!xw){t&&Ow.setUA(t),Sc=Ow.getResult();const n=function(p){if(p.engine.name==="Blink"&&p.browser.name!=="WeChat")return On.CHROME;switch(p.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return On.CHROME;case"Safari":case"Mobile Safari":return On.SAFARI;case"Edge":return On.EDGE;case"Firefox":return On.FIREFOX;case"QQ":case"QQBrowser":return On.QQ;case"Opera":return On.OPERA;case"WeChat":return On.WECHAT;default:return p.browser.name||""}}(Sc),i=JB(Sc),a=function(p){return p.os.name==="Windows"?p.os.version?p.os.name+" "+p.os.version:p.os.name:p.os.name||""}(Sc),l=Sc.os.version,u=JB(Sc,!1),h=Sc.device.type;if(!(n&&i&&a&&l))return{name:n,version:i,os:a,osVersion:l,browserVersion:u,deviceType:h};xw={name:n,version:i,os:a,osVersion:l,browserVersion:u,deviceType:h}}return xw}function JB(t){let n,i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return n=t.engine.name==="Blink"?t.engine.version||"":t.browser.version||"",i?n.split(".")[0]:n}function P_(){return En().os}function QB(){const t=En();return"".concat(t.os," ").concat(t.osVersion)}function D_(){const t=En();return!!(Sc.engine.name==="WebKit"&&t.os===Ei.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&t.name!==On.SAFARI||Ao()&&t.name!==On.SAFARI)}function $l(){return En().name===On.CHROME}function Hi(){return En().name===On.SAFARI}function ZB(){return En().name===On.EDGE}function Tr(){return En().name===On.FIREFOX}function Ao(){return En().os===Ei.IOS}function E0(t){const n=En();return!(n.name!==On.CHROME||!n.osVersion)&&Number(n.version)>=t}function e3(t){const n=En();return!(n.name!==On.CHROME||!n.osVersion)&&Number(n.version)<t}function Nw(t,n,i){const a=En();return!(a.name!==t||!a.osVersion)&&(i?Number(a.version)>=n&&Number(a.version)<=i:Number(a.version)===n)}function Pw(t){const n=En();return!(n.name!==On.EDGE||!n.osVersion)&&Number(n.version)>=t}function t3(t){const n=En();return!(n.name!==On.SAFARI||!n.osVersion)&&Number(n.version)>=t}function n3(t,n,i){const a=En();if(a.os!==Ei.IOS||!a.osVersion)return!1;const l=a.osVersion.split(".");return i?n&&Number(l[0])===t&&Number(l[1])<n||Number(l[0])<t:n?Number(l[0])===t&&Number(l[1])<=n||Number(l[0])<t:Number(l[0])<=t}function r3(t,n,i){const a=En();if(a.name!==On.SAFARI||!a.osVersion||!a.browserVersion)return!1;const l=a.browserVersion.split(".");return i?n&&Number(l[0])===t&&Number(l[1])<n||Number(l[0])<t:n?Number(l[0])===t&&Number(l[1])<=n||Number(l[0])<t:Number(l[0])<=t}function Dw(t){const n=En();return!(n.name!==On.OPERA||!n.osVersion)&&Number(n.version)>=t}function i3(){const t=En();if(t.os!==Ei.IOS||!t.osVersion)return!1;const n=t.osVersion.split(".");return Number(n[0])<14||Number(n[0])===14&&Number(n[1])<=6}function Bf(){const t=En();if(t.os!==Ei.IOS||!t.osVersion)return!1;const n=t.osVersion.split(".");return Number(n[0])===15}function Lw(){const t=En();if(t.os!==Ei.IOS||!t.osVersion)return!1;const n=t.osVersion.split(".");return Number(n[0])===16}function o3(){const t=En();if(t.os!==Ei.IOS||!t.osVersion)return!1;const n=t.osVersion.split(".");return Number(n[0])===15&&Number(n[1])>=1}function Vs(){return Hi()&&navigator.maxTouchPoints>0}function a3(){return En().name===On.WECHAT}function s3(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function kw(){const t=P_();return function(){const{deviceType:n}=En();return n==="mobile"||n==="tablet"}()||t===Ei.ANDROID||t===Ei.IOS||t===Ei.HARMONY_OS}function Hl(){const t=En();return t.name!==On.EDGE&&t.name!==On.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function L_(){return P_()===Ei.ANDROID}function _0(){const t=En();return L_()&&(t.name===On.CHROME||t.name===On.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}function c3(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function rt(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?c3(Object(i),!0).forEach(function(a){jt(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c3(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function jt(t,n,i){return(n=function(a){var l=function(u,h){if(typeof u!="object"||u===null)return u;var p=u[Symbol.toPrimitive];if(p!==void 0){var m=p.call(u,"string");if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}(a);return typeof l=="symbol"?l:String(l)}(n))in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}let X=function(t){return t.UNEXPECTED_ERROR="UNEXPECTED_ERROR",t.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",t.TIMEOUT="TIMEOUT",t.INVALID_PARAMS="INVALID_PARAMS",t.NOT_READABLE="NOT_READABLE",t.NOT_SUPPORTED="NOT_SUPPORTED",t.INVALID_OPERATION="INVALID_OPERATION",t.OPERATION_ABORTED="OPERATION_ABORTED",t.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",t.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",t.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",t.DATACHANNEL_FAILED="DATACHANNEL_FAILED",t.NETWORK_ERROR="NETWORK_ERROR",t.NETWORK_TIMEOUT="NETWORK_TIMEOUT",t.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",t.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",t.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",t.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",t.ELECTRON_IS_NULL="ELECTRON_IS_NULL",t.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",t.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",t.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",t.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",t.PERMISSION_DENIED="PERMISSION_DENIED",t.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",t.TRACK_IS_DISABLED="TRACK_IS_DISABLED",t.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",t.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",t.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",t.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",t.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",t.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",t.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",t.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",t.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",t.UID_CONFLICT="UID_CONFLICT",t.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",t.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",t.TOKEN_EXPIRE="TOKEN_EXPIRE",t.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",t.INVALID_TRACK="INVALID_TRACK",t.SENDER_NOT_FOUND="SENDER_NOT_FOUND",t.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",t.SET_ANSWER_FAILED="SET_ANSWER_FAILED",t.ICE_FAILED="ICE_FAILED",t.PC_CLOSED="PC_CLOSED",t.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",t.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",t.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",t.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",t.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",t.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",t.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",t.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",t.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",t.INVALID_REMOTE_USER="INVALID_REMOTE_USER",t.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",t.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",t.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",t.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",t.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",t.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",t.WS_ABORT="WS_ABORT",t.WS_DISCONNECT="WS_DISCONNECT",t.WS_ERR="WS_ERR",t.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",t.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",t.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",t.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",t.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",t.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",t.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",t.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",t.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",t.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",t.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",t.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",t.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",t.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",t.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",t.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",t.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",t.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",t.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",t.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",t.INVALID_PLUGIN="INVALID_PLUGIN",t.DISCONNECT_P2P="DISCONNECT_P2P",t.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",t.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",t.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",t.CREATE_DATACHANNEL_ERROR="CREATE_DATACHANNEL_ERROR",t.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",t.PROHIBITED_OPERATION="PROHIBITED_OPERATION",t.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",t.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED",t}({}),we=class extends Error{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0;super(n),jt(this,"code",void 0),jt(this,"message",void 0),jt(this,"data",void 0),jt(this,"name","AgoraRTCException"),this.code=t,this.message="AgoraRTCError ".concat(this.code,": ").concat(n),this.data=i}toString(){return this.data?"".concat(this.message,`
data: `).concat(JSON.stringify(this.data)):this.message}print(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error",n=arguments.length>1?arguments[1]:void 0;return t==="error"&&(n||console).error(this.toString()),t==="warning"&&(n||console).warn(this.toString()),this}throw(t){throw this.print("error",t),this}};function zl(t,n){if(typeof t!="boolean")throw new we(X.INVALID_PARAMS,"Invalid ".concat(n,": The value is of the boolean type."))}function mi(t,n,i){if(!Ke(i).call(i,t))throw new we(X.INVALID_PARAMS,"".concat(n," can only be set as ").concat(JSON.stringify(i)))}function zn(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4;if(t<i||t>a||(!(arguments.length>4&&arguments[4]!==void 0)||arguments[4])&&!function(l){return typeof l=="number"&&l%1==0}(t))throw new we(X.INVALID_PARAMS,"invalid ".concat(n,": the value range is [").concat(i,", ").concat(a,"]. integer only"))}function Mw(t,n){if(typeof t!="number"){if(!(t.min||t.max||t.ideal||t.exact))throw new we(X.INVALID_PARAMS,"".concat(n," is not a valid ConstrainLong"));t.min!==void 0&&zn(t.min,"".concat(n,".min"),0,1/0),t.max!==void 0&&zn(t.max,"".concat(n,".max"),1,1/0),t.exact!==void 0&&zn(t.exact,"".concat(n,".exact"),1,1/0),t.ideal!==void 0&&zn(t.ideal,"".concat(n,".ideal"),1,1/0)}else zn(t,n,1,1/0)}function xi(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(t==null)throw new we(X.INVALID_PARAMS,"".concat(n||"param"," cannot be empty"));if(!l3(t,i,a,l))throw new we(X.INVALID_PARAMS,"Invalid ".concat(n||"string param",": Length of the string: [").concat(i,",").concat(a,"].").concat(l?" ASCII characters only.":""))}function Wl(t,n){if(!Array.isArray(t))throw new we(X.INVALID_PARAMS,"".concat(n," should be an array"))}function Rr(t){return t==null}function l3(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,a=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof t=="string"&&t.length<=i&&t.length>=n&&(!a||function(l){if(typeof l!="string")return!1;for(let u=0;u<l.length;u+=1){const h=l.charCodeAt(u);if(h<0||h>255)return!1}return!0}(t))}var S0=function(t){return t.COVERED="COVERED",t.POSITION="POSITION",t.SIZE="SIZE",t.STYLE="STYLE",t}(S0||{}),Fw=function(t){return t.UNMOUNTED="UNMOUNTED",t.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT",t}(Fw||{});const u3=new class{constructor(){jt(this,"_clientSize",null),jt(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),jt(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),jt(this,"getStyle",t=>window.getComputedStyle(t,null)),jt(this,"checkCssVisibleProperty",t=>{var n;let i=!0;const a=this.getStyle(t),{display:l,visibility:u,opacity:h,filter:p}=a;return(l==="none"||Ke(n=["hidden","collapse"]).call(n,u)||Number(h)<.1)&&(i=!1),!!i&&(p&&p.split(" ").filter(m=>{var E;const y=m.split("(")[0];return Ke(E=["brightness","blur","opacity"]).call(E,y)}).map(m=>{const[E,y]=m.split(/\(|\)/);return[E,Number(y.match(/^[0-9\.]+/))]}).forEach(m=>{const[E,y]=m;switch(E){case"brightness":(y<.1||y>3)&&(i=!1);break;case"blur":y>3&&(i=!1);break;case"opacity":y<.1&&(i=!1)}}),i)}),jt(this,"checkPropertyUpToAllParentNodes",(t,n)=>{let i=!0,a=!0;const l=h=>n(h);let u=t;for(;u&&a;)l(u)||(i=!1,a=!1),u=u.parentElement,u||(a=!1);return i}),jt(this,"checkActualCssVisibleIncludeInherit",t=>this.checkPropertyUpToAllParentNodes(t,this.checkCssVisibleProperty)),jt(this,"getSizeAboutClient",t=>{const{width:n,height:i,left:a,right:l,top:u,bottom:h}=t.getBoundingClientRect(),p=this.getClientWidth(),m=this.getClientHeight();return{width:n,height:i,left:a,right:l,top:u,bottom:h,clientWidth:p,clientHeight:m,clientMin:Math.min(p,m)}}),jt(this,"checkActualSize",()=>{const{width:t,height:n,clientMin:i}=this._clientSize;return this.checkSizeIsVisible(t,n,i)}),jt(this,"elementFromPoint",(t,n)=>document.elementFromPoint?document.elementFromPoint(t,n):null),jt(this,"checkCoverForAPoint",(t,n,i)=>{const a=this.elementFromPoint(t,n);return a!==null&&a!==i}),jt(this,"getPointPositionList",()=>{const{width:t,height:n,left:i,top:a}=this._clientSize,l=t/6,u=n/6,h=[],p=10**6;for(let m=0;m<5;m++)for(let E=0;E<5;E++){const y=(i*p+(m===0?.1:m===4?(l*m*p-1e5)/p:l*m)*p)/p,R=(a*p+(E===0?.1:E===4?(u*E*p-1e5)/p:u*E)*p)/p;h.push({x:y,y:R})}return[...h]}),jt(this,"checkElementCover",t=>this.getPointPositionList().map(n=>this.checkCoverForAPoint(n.x,n.y,t)).filter(n=>!!n).length>6),jt(this,"checkSizeIsVisible",(t,n,i)=>(t>50||i/t<=10)&&(n>50||i/n<=10)),jt(this,"checkSizeOfPartInClient",()=>{const{left:t,right:n,top:i,bottom:a,clientHeight:l,clientWidth:u,clientMin:h}=this._clientSize;let p,m,E,y;if(t<0)p=0;else{if(!(t<u))return!1;p=t}if(n<0)return!1;if(m=n<u?n:u,i<0)E=0;else{if(!(i<l))return!1;E=i}if(a<0)return!1;y=a<l?a:l;const R=m-p,A=y-E;return this.checkSizeIsVisible(R,A,h)}),jt(this,"returnHiddenResult",t=>(this._clientSize=null,{visible:!1,reason:t})),jt(this,"checkOneElementVisible",t=>{if(t instanceof HTMLElement){if(this.checkElementIsMountedOnDom(t)){if(this.checkActualCssVisibleIncludeInherit(t)){if(this._clientSize=this.getSizeAboutClient(t),this.checkElementCover(t))return this.returnHiddenResult(S0.COVERED);{const n=this.checkActualSize(),i=this.checkSizeOfPartInClient();return n&&!i?this.returnHiddenResult(S0.POSITION):n?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(S0.SIZE)}}return this.returnHiddenResult(S0.STYLE)}return this.returnHiddenResult(Fw.UNMOUNTED)}return this.returnHiddenResult(Fw.INVALID_HTML_ELEMENT)}),jt(this,"checkElementIsMountedOnDom",t=>this.checkPropertyUpToAllParentNodes(t,n=>n.nodeName.toUpperCase()!=="HTML"?n.parentElement!==null:!!document.documentElement))}};function Uw(t){return new TextEncoder().encode(t)}const d3=function(t,n){const i=new Uint8Array(t.byteLength+n.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(n),t.byteLength),i},Bw=async t=>function(n,i){let a="";return new Uint8Array(n).forEach(l=>{a+=l.toString(i).padStart(2,"0")}),a}(await crypto.subtle.digest("SHA-256",Uw(t)),16);let Sr=class{constructor(){jt(this,"_events",{}),jt(this,"addListener",this.on)}getListeners(t){return this._events[t]?this._events[t].map(n=>n.listener):[]}on(t,n){this._events[t]||(this._events[t]=[]);const i=this._events[t];this._indexOfListener(i,n)===-1&&i.push({listener:n,once:!1})}once(t,n){this._events[t]||(this._events[t]=[]);const i=this._events[t];this._indexOfListener(i,n)===-1&&i.push({listener:n,once:!0})}off(t,n){if(!this._events[t])return;const i=this._events[t],a=this._indexOfListener(i,n);a!==-1&&i.splice(a,1),this._events[t].length===0&&delete this._events[t]}removeAllListeners(t){t?delete this._events[t]:this._events={}}emit(t){this._events[t]||(this._events[t]=[]);const n=this._events[t].map(u=>u);for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];for(let u=0;u<n.length;u+=1){const h=n[u];h.once&&this.off(t,h.listener),h.listener.apply(this,a||[])}}safeEmit(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];[...this._events[t]||[]].forEach(l=>{l.once&&this.off(t,l.listener);try{l.listener.apply(this,i)}catch(u){console.error("safeEmit event:".concat(t," error ").concat(u==null?void 0:u.toString()))}})}_indexOfListener(t,n){let i=t.length;for(;i--;)if(t[i].listener===n)return i;return-1}},y0=null;function h3(){if(y0)return y0;if(window.electron)return y0=window.electron;if(!window.require)return null;try{return y0=window.require("electron"),y0}catch{return null}}let ei=function(t){return t.CREATE_CLIENT="createClient",t.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",t.SET_AREA="setArea",t.PRELOAD="PRELOAD",t.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",t.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",t.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",t.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",t.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",t.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",t.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",t.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",t.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",t.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",t.START_PROXY_SERVER="Client.startProxyServer",t.STOP_PROXY_SERVER="Client.stopProxyServer",t.SET_PROXY_SERVER="Client.setProxyServer",t.SET_TURN_SERVER="Client.setTurnServer",t.SET_CLIENT_ROLE="Client.setClientRole",t.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",t.ENABLE_DUAL_STREAM="Client.enableDualStream",t.DISABLE_DUAL_STREAM="Client.disableDualStream",t.JOIN="Client.join",t.LEAVE="Client.leave",t.PUBLISH="Client.publish",t.UNPUBLISH="Client.unpublish",t.SUBSCRIBE="Client.subscribe",t.MASS_SUBSCRIBE="Client.massSubscribe",t.MASS_UNSUBSCRIBE="Client.massUnsubscribe",t.UNSUBSCRIBE="Client.unsubscribe",t.RENEW_TOKEN="Client.renewToken",t.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",t.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",t.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",t.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",t.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",t.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",t.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",t.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",t.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",t.START_LIVE_STREAMING="Client.startLiveStreaming",t.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",t.STOP_LIVE_STREAMING="Client.stopLiveStreaming",t.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",t.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",t.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",t.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",t.SET_CONFIG_DISTRIBUTE="_configDistribute",t.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",t.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",t.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",t.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",t.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",t.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",t.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",t.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",t.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",t.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",t.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",t.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",t.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",t.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",t.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",t.LOCAL_VIDEO_SEND_SEI_DATA="LocalVideoTrack.sendSeiData",t.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",t.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",t.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",t.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",t.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",t.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",t.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",t.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",t.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",t.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",t.STREAM_TYPE_CHANGE="streamTypeChange",t.CONNECTION_STATE_CHANGE="connectionStateChange",t.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",t.IMAGE_MODERATION_UPLOAD="imageModerationUpload",t.REPUB_AFTER_PC_CONNECTED="repubAfterPCConnected",t}({}),wr=function(t){return t.TRACER="tracer",t}({});function f3(t){return zn(t.timeout,"config.timeout",0,1e5),zn(t.timeoutFactor,"config.timeoutFactor",0,100,!1),zn(t.maxRetryCount,"config.maxRetryConfig",0,1/0),zn(t.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}let ghe=function(t){return t[t.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",t[t.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",t[t.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY",t}({}),Ln=function(t){return t.LEAVE="LEAVE",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.UID_BANNED="UID_BANNED",t.FALLBACK="FALLBACK",t.IP_BANNED="IP_BANNED",t.CHANNEL_BANNED="CHANNEL_BANNED",t.LICENSE_MISSING="LICENSE_MISSING",t.LICENSE_EXPIRED="LICENSE_EXPIRED",t.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",t.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",t.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",t.LICENSE_ILLEGAL="LICENSE_ILLEGAL",t.TOKEN_EXPIRE="TOKEN_EXPIRE",t}({});function C0(t){if(!Array.isArray(t)||t.length<1)return!1;try{t.forEach(n=>{if(!n.urls)throw Error()})}catch{return!1}return!0}function p3(t){return xi(t.turnServerURL,"turnServerURL"),xi(t.username,"username"),xi(t.password,"password"),t.udpport&&zn(t.udpport,"udpport",1,99999,!0),t.forceturn&&zl(t.forceturn,"forceturn"),t.security&&zl(t.security,"security"),t.tcpport&&zn(t.tcpport,"tcpport",1,99999,!0),!0}function Vw(t){return t.level!==void 0&&mi(t.level,"level",[1,2,3]),t.delay!==void 0&&zn(t.delay,"delay",0,3e3,!0),!0}let cn=function(t){return t.PEERCONNECTION_STATE_CHANGE="peerconnection-state-change",t.AUDIO_METADATA="audio-metadata",t.CONNECTION_STATE_CHANGE="connection-state-change",t.MEDIA_RECONNECT_START="media-reconnect-start",t.MEDIA_RECONNECT_END="media-reconnect-end",t.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",t.USER_JOINED="user-joined",t.USER_LEAVED="user-left",t.USER_PUBLISHED="user-published",t.USER_UNPUBLISHED="user-unpublished",t.USER_INFO_UPDATED="user-info-updated",t.CLIENT_BANNED="client-banned",t.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",t.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",t.VOLUME_INDICATOR="volume-indicator",t.CRYPT_ERROR="crypt-error",t.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",t.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",t.NETWORK_QUALITY="network-quality",t.STREAM_TYPE_CHANGED="stream-type-changed",t.STREAM_FALLBACK="stream-fallback",t.RECEIVE_METADATA="receive-metadata",t.STREAM_MESSAGE="stream-message",t.LIVE_STREAMING_ERROR="live-streaming-error",t.LIVE_STREAMING_WARNING="live-streaming-warning",t.EXCEPTION="exception",t.ERROR="error",t.P2P_LOST="p2p_lost",t.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",t.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",t.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",t.PUBLISHED_USER_LIST="published-user-list",t.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",t.CONTENT_INSPECT_ERROR="content-inspect-error",t.CONTENT_INSPECT_RESULT="content-inspect-result",t.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change",t}({}),zi=function(t){return t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.MULTI_IP="MULTI_IP",t.TIMEOUT="TIMEOUT",t.OFFLINE="OFFLINE",t.LEAVE="LEAVE",t.P2P_FAILED="P2P_FAILED",t.FALLBACK="FALLBACK",t.REGIONAL_DISTRIBUTION="REGIONAL_DISTRIBUTION",t}({}),Ta=function(t){return t.ONLINE="ONLINE",t.OFFLINE="OFFLINE",t}({}),Vf=function(t){return t.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",t.ONLINE="ONLINE",t.OFFLINE="OFFLINE",t}({});function Wi(t,n){for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];return t.getListeners(n).length===0?Ye.reject(new we(X.UNEXPECTED_ERROR,"can not emit promise")):new Ye((u,h)=>{t.emit(n,...a,u,h)})}function Yn(t,n){if(t.getListeners(n).length===0)return Ye.resolve();for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];return Wi(t,n,...a)}function Ua(t,n){if(t.getListeners(n).length===0)return null;for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];return b0(t,n,...a)}function b0(t,n){let i=null,a=null;for(var l=arguments.length,u=new Array(l>2?l-2:0),h=2;h<l;h++)u[h-2]=arguments[h];if(t.emit(n,...u,p=>{i=p},p=>{a=p}),a!==null)throw a;if(i===null)throw new we(X.UNEXPECTED_ERROR,"handler is not sync");return i}const Hr=new class extends Sr{set networkState(t){this.emit(Vf.NETWORK_STATE_CHANGE,t,this._networkState),t===Ta.ONLINE?this.emit(Vf.ONLINE):t===Ta.OFFLINE&&(this.onlineWaiter=new Ye(n=>{this.once(Vf.ONLINE,()=>{this.onlineWaiter=void 0,n(Ta.ONLINE)})}),this.emit(Vf.OFFLINE)),this._networkState=t}get networkState(){return this._networkState}get isOnline(){return this._networkState===Ta.ONLINE}constructor(){super(),jt(this,"_moduleName","network-indicator"),jt(this,"_networkState",Ta.ONLINE),jt(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=Ta.ONLINE}),window.addEventListener("offline",()=>{this.networkState=Ta.OFFLINE})}};function k_(t,n){const i=t.indexOf(n);i!==-1&&t.splice(i,1)}function jf(t){const n=[];return t.forEach(i=>{n.indexOf(i)===-1&&n.push(i)}),n}function M_(t){Ye!==void 0?Ye.resolve().then(t):setTimeout(t,0)}function Ir(t){return JSON.parse(JSON.stringify(t))}function qd(t){try{return Ir(t)}catch{return t}}const m3={};function ku(t,n){m3[n]||(m3[n]=!0,t())}function Yd(t){const n=window.atob(t),i=new Uint8Array(new ArrayBuffer(n.length));for(let a=0;a<n.length;a+=1)i[a]=n.charCodeAt(a);return i}function Mu(t){let n="";for(let i=0;i<t.length;i+=1)n+=String.fromCharCode(t[i]);return window.btoa(n)}function g3(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,i=new TextEncoder().encode(t);if(i.length>n)i=i.slice(0,n);else if(i.length<n){const a=new Uint8Array(n);a.set(i),i=a}return i}function v3(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const a=pc(n).call(n,(h,p)=>h+p.length,0),l=new Uint8Array(new ArrayBuffer(a));let u=0;return n.forEach(h=>{l.set(h,u),u+=h.length}),l}function ol(t){return window.TextEncoder?new TextEncoder().encode(t).length:t.length}function E3(t){let n=0;return(/DingTalk/i.test(navigator.userAgent)||/AliApp/i.test(navigator.userAgent))&&t.realFormData&&(t=t.realFormData),t.forEach(i=>{n+=typeof i=="string"?ol(i):i.size}),n+138}function vhe(t){const n=new we(X.TIMEOUT,"timeout");return new Ye((i,a)=>{window.setTimeout(()=>a(n),t)})}function Ni(t){return new Ye(n=>{window.setTimeout(n,t)})}function Xn(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,n=arguments.length>1?arguments[1]:void 0;const i=Math.random().toString(16).substr(2,t).toLowerCase();return i.length===t?"".concat(n).concat(i):"".concat(n).concat(i)+Xn(t-i.length,"")}function Xd(){return Xn(32,"").toUpperCase()}const F_=()=>{},_3=new class{constructor(){jt(this,"fnMap",new Map)}throttleByKey(t,n,i,a){for(var l=arguments.length,u=new Array(l>4?l-4:0),h=4;h<l;h++)u[h-4]=arguments[h];if(this.fnMap.has(n)){const p=this.fnMap.get(n);if(p.threshold!==i){p.fn(...p.args),clearTimeout(p.timer);const m=window.setTimeout(()=>{const E=this.fnMap.get(n);E&&E.fn(...E.args),this.fnMap.delete(n)},i);this.fnMap.set(n,{fn:t,threshold:i,timer:m,args:u,skipFn:a})}else p.skipFn&&p.skipFn(...p.args),this.fnMap.set(n,rt(rt({},p),{},{fn:t,args:u,skipFn:a}))}else{const p=window.setTimeout(()=>{const m=this.fnMap.get(n);m&&m.fn(...m.args),this.fnMap.delete(n)},i);this.fnMap.set(n,{fn:t,threshold:i,timer:p,args:u,skipFn:a})}}},S3=_3.throttleByKey.bind(_3);function y3(t){return typeof t=="object"&&t!==null&&!(t instanceof RegExp)}function jw(t,n){if(!y3(t)||!y3(n)||Array.isArray(t)&&!Array.isArray(n)||!Array.isArray(t)&&Array.isArray(n))return n;if(Array.isArray(n)&&Array.isArray(t)){const i=[...t];for(let a=0;a<n.length;a++)i[a]=jw(t[a],n[a]);return i}{const i=rt({},t);for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(Object.prototype.hasOwnProperty.call(t,a)?i[a]=jw(t[a],n[a]):i[a]=n[a]);return i}}function C3(t,n){let i=[0];if(n&&(i=new Array(n).fill(0)),t===0)return i;let a=0;for(;t>0&&(i[a]=255&t,t>>=8,a++,!n||a!==n););return i}function $w(t){return typeof t=="number"?t:t.exact||t.ideal||t.max||t.min||0}function b3(t){const n="0123456789abcdef";function i(ce){let ge,Ee="";for(ge=0;ge<=3;ge++)Ee+=n.charAt(ce>>8*ge+4&15)+n.charAt(ce>>8*ge&15);return Ee}function a(ce,ge){const Ee=(65535&ce)+(65535&ge);return(ce>>16)+(ge>>16)+(Ee>>16)<<16|65535&Ee}function l(ce,ge,Ee,me,Te,Me){return a(function(Xe,nt){return Xe<<nt|Xe>>>32-nt}(a(a(ge,ce),a(me,Me)),Te),Ee)}function u(ce,ge,Ee,me,Te,Me,Xe){return l(ge&Ee|~ge&me,ce,ge,Te,Me,Xe)}function h(ce,ge,Ee,me,Te,Me,Xe){return l(ge&me|Ee&~me,ce,ge,Te,Me,Xe)}function p(ce,ge,Ee,me,Te,Me,Xe){return l(ge^Ee^me,ce,ge,Te,Me,Xe)}function m(ce,ge,Ee,me,Te,Me,Xe){return l(Ee^(ge|~me),ce,ge,Te,Me,Xe)}const E=function(ce){let ge;const Ee=1+(ce.length+8>>6),me=new Array(16*Ee);for(ge=0;ge<16*Ee;ge++)me[ge]=0;for(ge=0;ge<ce.length;ge++)me[ge>>2]|=ce.charCodeAt(ge)<<ge%4*8;return me[ge>>2]|=128<<ge%4*8,me[16*Ee-2]=8*ce.length,me}(t);let y,R,A,D,H,B=1732584193,$=-271733879,K=-1732584194,Y=271733878;for(y=0;y<E.length;y+=16)R=B,A=$,D=K,H=Y,B=u(B,$,K,Y,E[y+0],7,-680876936),Y=u(Y,B,$,K,E[y+1],12,-389564586),K=u(K,Y,B,$,E[y+2],17,606105819),$=u($,K,Y,B,E[y+3],22,-1044525330),B=u(B,$,K,Y,E[y+4],7,-176418897),Y=u(Y,B,$,K,E[y+5],12,1200080426),K=u(K,Y,B,$,E[y+6],17,-1473231341),$=u($,K,Y,B,E[y+7],22,-45705983),B=u(B,$,K,Y,E[y+8],7,1770035416),Y=u(Y,B,$,K,E[y+9],12,-1958414417),K=u(K,Y,B,$,E[y+10],17,-42063),$=u($,K,Y,B,E[y+11],22,-1990404162),B=u(B,$,K,Y,E[y+12],7,1804603682),Y=u(Y,B,$,K,E[y+13],12,-40341101),K=u(K,Y,B,$,E[y+14],17,-1502002290),$=u($,K,Y,B,E[y+15],22,1236535329),B=h(B,$,K,Y,E[y+1],5,-165796510),Y=h(Y,B,$,K,E[y+6],9,-1069501632),K=h(K,Y,B,$,E[y+11],14,643717713),$=h($,K,Y,B,E[y+0],20,-373897302),B=h(B,$,K,Y,E[y+5],5,-701558691),Y=h(Y,B,$,K,E[y+10],9,38016083),K=h(K,Y,B,$,E[y+15],14,-660478335),$=h($,K,Y,B,E[y+4],20,-405537848),B=h(B,$,K,Y,E[y+9],5,568446438),Y=h(Y,B,$,K,E[y+14],9,-1019803690),K=h(K,Y,B,$,E[y+3],14,-187363961),$=h($,K,Y,B,E[y+8],20,1163531501),B=h(B,$,K,Y,E[y+13],5,-1444681467),Y=h(Y,B,$,K,E[y+2],9,-51403784),K=h(K,Y,B,$,E[y+7],14,1735328473),$=h($,K,Y,B,E[y+12],20,-1926607734),B=p(B,$,K,Y,E[y+5],4,-378558),Y=p(Y,B,$,K,E[y+8],11,-2022574463),K=p(K,Y,B,$,E[y+11],16,1839030562),$=p($,K,Y,B,E[y+14],23,-35309556),B=p(B,$,K,Y,E[y+1],4,-1530992060),Y=p(Y,B,$,K,E[y+4],11,1272893353),K=p(K,Y,B,$,E[y+7],16,-155497632),$=p($,K,Y,B,E[y+10],23,-1094730640),B=p(B,$,K,Y,E[y+13],4,681279174),Y=p(Y,B,$,K,E[y+0],11,-358537222),K=p(K,Y,B,$,E[y+3],16,-722521979),$=p($,K,Y,B,E[y+6],23,76029189),B=p(B,$,K,Y,E[y+9],4,-640364487),Y=p(Y,B,$,K,E[y+12],11,-421815835),K=p(K,Y,B,$,E[y+15],16,530742520),$=p($,K,Y,B,E[y+2],23,-995338651),B=m(B,$,K,Y,E[y+0],6,-198630844),Y=m(Y,B,$,K,E[y+7],10,1126891415),K=m(K,Y,B,$,E[y+14],15,-1416354905),$=m($,K,Y,B,E[y+5],21,-57434055),B=m(B,$,K,Y,E[y+12],6,1700485571),Y=m(Y,B,$,K,E[y+3],10,-1894986606),K=m(K,Y,B,$,E[y+10],15,-1051523),$=m($,K,Y,B,E[y+1],21,-2054922799),B=m(B,$,K,Y,E[y+8],6,1873313359),Y=m(Y,B,$,K,E[y+15],10,-30611744),K=m(K,Y,B,$,E[y+6],15,-1560198380),$=m($,K,Y,B,E[y+13],21,1309151649),B=m(B,$,K,Y,E[y+4],6,-145523070),Y=m(Y,B,$,K,E[y+11],10,-1120210379),K=m(K,Y,B,$,E[y+2],15,718787259),$=m($,K,Y,B,E[y+9],21,-343485551),B=a(B,R),$=a($,A),K=a(K,D),Y=a(Y,H);return i(B)+i($)+i(K)+i(Y)}let Ehe=1,T3=console,Ji=class{static setLogger(t){T3=t}constructor(t,n){jt(this,"id",void 0),jt(this,"lockingPromise",Ye.resolve()),jt(this,"locks",0),jt(this,"name",""),jt(this,"lockId",void 0),this.lockId=Ehe++,t&&(this.name=t),n&&(this.id=n),this.logger("created")}logger(t,n){const i=(this.id?"[".concat(this.id,"]"):"")+"[lock-".concat(this.name,"-").concat(this.lockId,"]"),a=t==="created"?"is ".concat(t,"."):"is ".concat(t,", current queue ").concat(this.locks,". ").concat(n??"");T3.debug("".concat(i," ").concat(a))}setId(t){this.id=t}get isLocked(){return this.locks>0}lock(t){let n;this.locks+=1,this.logger("locked",t);const i=new Ye(l=>{n=()=>{this.locks-=1,this.logger("unlocked",t),l()}}),a=this.lockingPromise.then(()=>n);return this.lockingPromise=this.lockingPromise.then(()=>i),a}};function $f(t,n){return function(i,a,l){const u=l.value;if(typeof u!="function")throw new Error("Cannot use mutex on object property.");return l.value=async function(){const h=this[n];if(!h)throw new Error("mutex property key ".concat(n," doesn't exist on ").concat(t));const p=await h.lock("From ".concat(t,".").concat(a));try{for(var m=arguments.length,E=new Array(m),y=0;y<m;y++)E[y]=arguments[y];return await u.apply(this,E)}finally{p()}},l}}const ti={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function Hw(t,n){const i=Math.floor(n.timeout*Math.pow(n.timeoutFactor,t));return Math.min(n.maxRetryTimeout,i)}function yc(t,n,i,a){const l=Object.assign({},ti,a);let u=l.timeout;const h=async()=>{await function(E){return new Ye(y=>{window.setTimeout(y,E)})}(u),u*=l.timeoutFactor,u=Math.min(l.maxRetryTimeout,u)};let p=!1;const m=new Ye(async(E,y)=>{n=n||(()=>!1),i=i||(()=>!0);for(let R=0;R<l.maxRetryCount;R+=1){if(p)return y(new we(X.OPERATION_ABORTED));try{const A=await t();if(!n(A,R)||R+1===l.maxRetryCount)return E(A);await h()}catch(A){if(!i(A,R)||R+1===l.maxRetryCount)return y(A);await h()}}});return m.cancel=()=>p=!0,m}let U_,R3=class{constructor(t){jt(this,"input",[]),jt(this,"size",void 0),this.size=t}add(t){this.input.push(t),this.input.length>this.size&&this.input.splice(0,1)}mean(){var t;return this.input.length===0?0:pc(t=this.input).call(t,(n,i)=>n+i)/this.input.length}},B_=0,zw=0;function Ww(t,n,i,a){return new Ye((l,u)=>{n.responseType=n.responseType||"json",n.data&&!i?(n.data=JSON.stringify(n.data),B_+=ol(n.data)):i&&(n.data.size?B_+=n.data.size:n.data instanceof FormData?B_+=E3(n.data):B_+=ol(JSON.stringify(n.data))),n.headers=n.headers||{},n.headers["Content-Type"]=n.headers["Content-Type"]||"application/json",n.method="POST",n.url=t,zo.request(n).then(h=>{typeof h.data=="string"?zw+=ol(h.data):h.data instanceof ArrayBuffer||h.data instanceof Uint8Array?zw+=h.data.byteLength:zw+=ol(JSON.stringify(h.data)),a&&l({data:h.data,headers:h.headers}),l(h.data)}).catch(h=>{zo.isCancel(h)?u(new we(X.OPERATION_ABORTED,"cancel token canceled")):h.code==="ECONNABORTED"?u(new we(X.NETWORK_TIMEOUT,h.message)):h.response?u(new we(X.NETWORK_RESPONSE_ERROR,h.response.status)):u(new we(X.NETWORK_ERROR,h.message))})})}async function _he(t,n){const i=new Blob([n.data],{type:"buffer"});return await Ww(t,rt(rt({},n),{},{data:i,headers:{"Content-Type":"application/octet-stream"}}),!0)}const w3=()=>window.isSecureContext!==void 0;function js(t){if(Array.isArray(t))return t.map(i=>i);if(!I3(t))return t;const n={};for(const i in t){const a=t[i];I3(a)||Array.isArray(a)?n[i]=js(a):n[i]=a}return n}function I3(t){return!(typeof t!="object"||Array.isArray(t)||!t)}let Gw=class{constructor(t){jt(this,"input",[]),jt(this,"size",void 0),this.size=t}add(t){this.input.push(t),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}};const al={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},T0={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:al,remoteCandidate:al},updateInterval:0},A3={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0,framesDroppedCount:0,outputFrameRate:0,packetsDiscarded:0,framesAssembledFromMultiplePackets:0,totalProcessingDelay:0,avgDecodeMs:0,avgFramesAssembledFromMultiplePacketsMs:0,avgProcessingDelayMs:0,avgInterFrameDelayMs:0,totalAssemblyTime:0},O3={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},x3={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},N3={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packetsDiscarded:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0,totalSamplesReceived:0};let Kw=class{constructor(t,n){jt(this,"onFirstVideoReceived",void 0),jt(this,"onFirstVideoDecoded",void 0),jt(this,"onFirstAudioReceived",void 0),jt(this,"onFirstVideoDecodedTimeout",void 0),jt(this,"onFirstAudioDecoded",void 0),jt(this,"onSelectedLocalCandidateChanged",void 0),jt(this,"onSelectedRemoteCandidateChanged",void 0),jt(this,"videoIsReady",!1),jt(this,"videoIsReady2",{}),jt(this,"pc",void 0),jt(this,"options",void 0),jt(this,"intervalTimer",void 0),jt(this,"stats",js(T0)),jt(this,"isFirstVideoReceived",{}),jt(this,"isFirstVideoDecoded",{}),jt(this,"isFirstAudioReceived",{}),jt(this,"isFirstAudioDecoded",{}),jt(this,"isFirstVideoDecodedTimeout",{}),jt(this,"lossRateWindowStats",[]),this.pc=t,this.options=n,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new Ye(t=>{t({local:rt({},al),remote:rt({},al)})})}setVideoIsReady(t){this.videoIsReady=t}setVideoIsReady2(t,n){this.videoIsReady2[t]=n}getVideoIsReady(t){return this.videoIsReady2[t]||!1}setIsFirstAudioDecoded(t){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(t){this.lossRateWindowStats.push(t),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const n=this.lossRateWindowStats.length,i=["videoSend","audioSend","videoRecv","audioRecv"];let a=0,l=0,u=0,h=0;for(const p of i)t[p].forEach((m,E)=>{if(!this.lossRateWindowStats[n-1][p][E]||!this.lossRateWindowStats[0][p][E])return;const y=this.lossRateWindowStats[n-1][p][E].packets-this.lossRateWindowStats[0][p][E].packets,R=this.lossRateWindowStats[n-1][p][E].packetsLost-this.lossRateWindowStats[0][p][E].packetsLost;p==="videoSend"||p==="audioSend"?(a+=y,u+=R):(l+=y,h+=R),Number.isNaN(y)||Number.isNaN(y)?m.packetLostRate=0:m.packetLostRate=y<=0||R<=0?0:R/(y+R)});t.sendPacketLossRate=a<=0||u<=0?0:u/(a+u),t.recvPacketLossRate=l<=0||h<=0?0:h/(l+h)}},She=class extends Kw{constructor(){super(...arguments),jt(this,"_stats",T0),jt(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const t=await this._getStats(),n=this.statsResponsesToObjects(t);this._stats=js(T0);const i=n.filter(l=>l.type==="ssrc");this.processSSRCStats(i);const a=n.find(l=>l.type==="VideoBwe");a&&this.processBandwidthStats(a),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(t){this._stats.bitrate={actualEncoded:Number(t.googActualEncBitrate),targetEncoded:Number(t.googTargetEncBitrate),retransmit:Number(t.googRetransmitBitrate),transmit:Number(t.googTransmitBitrate)},this._stats.sendBandwidth=Number(t.googAvailableSendBandwidth)}processSSRCStats(t){t.forEach(n=>{var i;const a=Ke(i=n.id).call(i,"send");switch("".concat(n.mediaType,"_").concat(a?"send":"recv")){case"video_send":{const l=js(O3);l.codec=n.googCodecName,l.adaptionChangeReason="none",n.googCpuLimitedResolution&&(l.adaptionChangeReason="cpu"),n.googBandwidthLimitedResolution&&(l.adaptionChangeReason="bandwidth"),l.avgEncodeMs=Number(n.googAvgEncodeMs),l.inputFrame={width:Number(n.googFrameWidthInput)||Number(n.googFrameWidthSent),height:Number(n.googFrameHeightInput)||Number(n.googFrameHeightSent),frameRate:Number(n.googFrameRateInput)},l.sentFrame={width:Number(n.googFrameWidthSent),height:Number(n.googFrameHeightSent),frameRate:Number(n.googFrameRateInput)},l.firsCount=Number(n.googFirReceived),l.nacksCount=Number(n.googNacksReceived),l.plisCount=Number(n.googPlisReceived),l.frameCount=Number(n.framesEncoded),l.bytes=Number(n.bytesSent),l.packets=Number(n.packetsSent),l.packetsLost=Number(n.packetsLost),l.ssrc=Number(n.ssrc),l.rttMs=Number(n.googRtt||0),this._stats.videoSend.push(l),this._stats.rtt=l.rttMs;break}case"video_recv":{const l=js(A3),u=this.lastDecodeVideoReceiverStats.get(Number(n.ssrc));if(l.codec=n.googCodecName,l.targetDelayMs=Number(n.googTargetDelayMs),l.renderDelayMs=Number(n.googRenderDelayMs),l.currentDelayMs=Number(n.googCurrentDelayMs),l.minPlayoutDelayMs=Number(n.googMinPlayoutDelayMs),l.decodeMs=Number(n.googDecodeMs),l.maxDecodeMs=Number(n.googMaxDecodeMs),l.receivedFrame={width:Number(n.googFrameWidthReceived),height:Number(n.googFrameHeightReceived),frameRate:Number(n.googFrameRateReceived)},l.decodedFrame={width:Number(n.googFrameWidthReceived),height:Number(n.googFrameHeightReceived),frameRate:Number(n.googFrameRateDecoded)},l.decodeFrameRate=Number(n.googFrameRateDecoded),l.outputFrame={width:Number(n.googFrameWidthReceived),height:Number(n.googFrameHeightReceived),frameRate:Number(n.googFrameRateOutput)},l.jitterBufferMs=Number(n.googJitterBufferMs),l.firsCount=Number(n.googFirsSent),l.nacksCount=Number(n.googNacksSent),l.plisCount=Number(n.googPlisSent),l.framesDecodeCount=Number(n.framesDecoded),l.bytes=Number(n.bytesReceived),l.packets=Number(n.packetsReceived),l.packetsLost=Number(n.packetsLost),l.ssrc=Number(n.ssrc),l.packets>0&&!this.isFirstVideoReceived[l.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(l.ssrc),this.isFirstVideoReceived[l.ssrc]=!0),l.framesDecodeCount>0&&!this.isFirstVideoDecoded[l.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(l.ssrc,l.decodedFrame.width,l.decodedFrame.height),this.isFirstVideoDecoded[l.ssrc]=!0),u){const h=u.stats,p=Date.now()-u.lts;l.framesDecodeFreezeTime=h.framesDecodeFreezeTime,l.framesDecodeInterval=h.framesDecodeInterval,l.framesDecodeCount>h.framesDecodeCount&&this.isFirstVideoDecoded[l.ssrc]?(u.lts=Date.now(),l.framesDecodeInterval=p,l.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(n.ssrc,10))?l.framesDecodeFreezeTime+=l.framesDecodeInterval:this.setVideoIsReady2(parseInt(n.ssrc,10),!0))):l.framesDecodeCount<u.stats.framesDecodeCount&&(l.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(l.ssrc,{stats:rt({},l),lts:Date.now()}),this._stats.videoRecv.push(l);break}case"audio_recv":{const l=js(N3);l.codec=n.googCodecName,l.outputLevel=Math.abs(Number(n.audioOutputLevel))/32767,l.decodingCNG=Number(n.googDecodingCNG),l.decodingCTN=Number(n.googDecodingCTN),l.decodingCTSG=Number(n.googDecodingCTSG),l.decodingNormal=Number(n.googDecodingNormal),l.decodingPLC=Number(n.googDecodingPLC),l.decodingPLCCNG=Number(n.googDecodingPLCCNG),l.expandRate=Number(n.googExpandRate),l.accelerateRate=Number(n.googAccelerateRate),l.preemptiveExpandRate=Number(n.googPreemptiveExpandRate),l.secondaryDecodedRate=Number(n.googSecondaryDecodedRate),l.speechExpandRate=Number(n.googSpeechExpandRate),l.preferredJitterBufferMs=Number(n.googPreferredJitterBufferMs),l.jitterBufferMs=Number(n.googJitterBufferMs),l.jitterMs=Number(n.googJitterReceived),l.bytes=Number(n.bytesReceived),l.packets=Number(n.packetsReceived),l.packetsLost=Number(n.packetsLost),l.ssrc=Number(n.ssrc),l.receivedFrames=Number(n.googDecodingCTN)||Number(n.packetsReceived),l.droppedFrames=Number(n.googDecodingPLC)+Number(n.googDecodingPLCCNG)||Number(n.packetsLost),l.receivedFrames>0&&!this.isFirstAudioReceived[l.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(l.ssrc),this.isFirstAudioReceived[l.ssrc]=!0),l.decodingNormal>0&&!this.isFirstAudioDecoded[l.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(l.ssrc),this.isFirstAudioDecoded[l.ssrc]=!0),this._stats.audioRecv.push(l);break}case"audio_send":{const l=js(x3);l.codec=n.googCodecName,l.inputLevel=Math.abs(Number(n.audioInputLevel))/32767,l.aecReturnLoss=Number(n.googEchoCancellationReturnLoss||0),l.aecReturnLossEnhancement=Number(n.googEchoCancellationReturnLossEnhancement||0),l.residualEchoLikelihood=Number(n.googResidualEchoLikelihood||0),l.residualEchoLikelihoodRecentMax=Number(n.googResidualEchoLikelihoodRecentMax||0),l.bytes=Number(n.bytesSent),l.packets=Number(n.packetsSent),l.packetsLost=Number(n.packetsLost),l.ssrc=Number(n.ssrc),l.rttMs=Number(n.googRtt||0),this._stats.rtt=l.rttMs,this._stats.audioSend.push(l);break}}})}_getStats(){return new Ye((t,n)=>{this.pc.getStats(t,n)})}statsResponsesToObjects(t){const n=[];return t.result().forEach(i=>{const a={id:i.id,timestamp:i.timestamp.valueOf().toString(),type:i.type};i.names().forEach(l=>{a[l]=i.stat(l)}),n.push(a)}),n}},R0=function(t){return t.BANDWIDTH="bandwidth",t.CPU="cpu",t.NONE="none",t.OTHER="other",t}({}),V_=function(t){return t.L1T1="L1T1",t.L1T2="L1T2",t.L1T3="L1T3",t.L1T3_KEY="L1T3_KEY",t.L2T1_KEY="L2T1_KEY",t.L2T2_KEY="L2T2_KEY",t.L2T3_KEY="L2T3_KEY",t.L3T1_KEY="L3T1_KEY",t.L3T2_KEY="L3T2_KEY",t.L3T3_KEY="L3T3_KEY",t}({}),qw=function(t){return t[t.new=0]="new",t[t.connecting=1]="connecting",t[t.connected=2]="connected",t[t.disconnected=3]="disconnected",t[t.failed=4]="failed",t[t.closed=5]="closed",t}({}),Ba=function(t){return t.CERTIFICATE="certificate",t.CODEC="codec",t.CANDIDATE_PAIR="candidate-pair",t.LOCAL_CANDIDATE="local-candidate",t.REMOTE_CANDIDATE="remote-candidate",t.INBOUND="inbound-rtp",t.TRACK="track",t.OUTBOUND="outbound-rtp",t.PC="peer-connection",t.REMOTE_INBOUND="remote-inbound-rtp",t.REMOTE_OUTBOUND="remote-outbound-rtp",t.TRANSPORT="transport",t.CSRC="csrc",t.DATA_CHANNEL="data-channel",t.STREAM="stream",t.SENDER="sender",t.RECEIVER="receiver",t}({});var Hf=function(t){return t[t.kNone=1]="kNone",t[t.kMillisecondsFromSeconds=1e3]="kMillisecondsFromSeconds",t[t.kBytesToBits=8]="kBytesToBits",t}(Hf||{});function w0(t,n,i,a){let l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:Hf.kNone;if(!n)return;const u=Number(n[i]);if(typeof u!="number")return;const h=Number(n[a]);if(typeof h!="number")return;if(!t)return h?u/h*l:void 0;const p=Number(t[i]);if(typeof p!="number")return;const m=Number(t[a]);if(typeof m!="number")return;const E=h-m;return E?(u-p)/E*l:void 0}let P3=class extends Kw{constructor(){super(...arguments),jt(this,"_stats",T0),jt(this,"report",void 0),jt(this,"lastDecodeVideoReceiverStats",new Map),jt(this,"lastVideoFramesRecv",new Map),jt(this,"lastVideoFramesSent",new Map),jt(this,"lastVideoFramesDecode",new Map),jt(this,"lastVideoFramesOutput",new Map),jt(this,"lastVideoJBDelay",new Map),jt(this,"lastAudioJBDelay",new Map),jt(this,"mediaBytesSent",new Map),jt(this,"mediaBytesRetransmit",new Map),jt(this,"mediaBytesTargetEncode",new Map),jt(this,"lastDecodeAudioReceiverStats",new Map),jt(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=js(T0),this.report.forEach(t=>{switch(t.type){case Ba.OUTBOUND:case Ba.INBOUND:{const n=t.mediaType||t.kind,i=!n&&"frameWidth"in t,a=!n&&!("frameWidth"in t);t.type===Ba.OUTBOUND?n==="audio"||a?this.processAudioOutboundStats(t):(n==="video"||i)&&this.processVideoOutboundStats(t):t.type===Ba.INBOUND&&(n==="audio"||a?this.processAudioInboundStats(t):(n==="video"||i)&&this.processVideoInboundStats(t));break}case Ba.TRANSPORT:{const n=this.report.get(t.selectedCandidatePairId);n&&this.processCandidatePairStats(n);break}case Ba.CANDIDATE_PAIR:t.selected&&this.processCandidatePairStats(t)}}),this.updateSendBitrate(),this._stats.updateInterval=Date.now()-this.stats.timestamp,this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const t=await this.pc.getStats(),n={local:rt({},al),remote:rt({},al)};return t.forEach(i=>{let a;if(i.type===Ba.TRANSPORT&&(a=t.get(i.selectedCandidatePairId)),i.type===Ba.CANDIDATE_PAIR&&i.selected&&(a=i),a){const l=(u,h)=>{u.type=h.type,u.id=h.id,h.address&&(u.address=h.address),h.candidateType&&(u.candidateType=h.candidateType),h.port&&(u.port=h.port),h.priority&&(u.priority=h.priority),h.protocol&&(u.protocol=h.protocol),h.relayProtocol&&(u.relayProtocol=h.relayProtocol)};if(a.localCandidateId){const u=t.get(a.localCandidateId);u&&l(n.local,u)}if(a.remoteCandidateId){const u=t.get(a.remoteCandidateId);u&&l(n.remote,u)}}}),n}processCandidatePairStats(t){if(this._stats.sendBandwidth=t.availableOutgoingBitrate||0,t.currentRoundTripTime&&(this._stats.rtt=1e3*t.currentRoundTripTime),this._stats.videoSend.forEach(n=>{t.currentRoundTripTime&&(n.rttMs=1e3*t.currentRoundTripTime)}),this._stats.audioSend.forEach(n=>{t.currentRoundTripTime&&(n.rttMs=1e3*t.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=t.id,t.localCandidateId){const n=this.report.get(t.localCandidateId);n&&this.processCandidateStats(n)}if(t.remoteCandidateId){const n=this.report.get(t.remoteCandidateId);n&&this.processCandidateStats(n)}}processCandidateStats(t){let n;t.type===Ba.LOCAL_CANDIDATE&&(n=this._stats.selectedCandidatePair.localCandidate),t.type===Ba.REMOTE_CANDIDATE&&(n=this._stats.selectedCandidatePair.remoteCandidate),n&&(n.type=t.type,n.id=t.id,t.address&&(n.address=t.address),t.candidateType&&(n.candidateType=t.candidateType),t.port&&(n.port=t.port),t.priority&&(n.priority=t.priority),t.protocol&&(n.protocol=t.protocol),t.relayProtocol&&(n.relayProtocol=t.relayProtocol),t.type===Ba.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==n.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(rt({},n),rt({},this.stats.selectedCandidatePair.localCandidate)),t.type===Ba.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==n.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(rt({},n),rt({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(t){let n=this._stats.audioRecv.find(a=>a.ssrc===t.ssrc);n||(n=js(N3),this._stats.audioRecv.push(n)),n.ssrc=t.ssrc,n.packets=t.packetsReceived,n.packetsLost=t.packetsLost,n.packetsDiscarded=t.packetsDiscarded,n.bytes=t.bytesReceived,n.jitterMs=1e3*t.jitter,n.retransmittedBytesReceived=t.retransmittedBytesReceived,n.retransmittedPacketsReceived=t.retransmittedPacketsReceived,n.totalProcessingDelay=t.totalProcessingDelay,n.jitterBufferEmittedCount=t.jitterBufferEmittedCount;const i=this.lastDecodeAudioReceiverStats.get(n.ssrc);n.avgProcessingDelayMs=w0(i,n,"totalProcessingDelay","jitterBufferEmittedCount",Hf.kMillisecondsFromSeconds),this.processAudioTrackReceiverStats(t,t.trackId,n),t.codecId&&(n.codec=this.getCodecFromCodecStats(t.codecId)),n.receivedFrames||(n.receivedFrames=t.packetsReceived),n.droppedFrames||(n.droppedFrames=t.packetsLost),n.receivedFrames>0&&!this.isFirstAudioReceived[n.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(n.ssrc),this.isFirstAudioReceived[n.ssrc]=!0),n.outputLevel&&n.outputLevel>0&&!this.isFirstAudioDecoded[n.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(n.ssrc),this.isFirstAudioDecoded[n.ssrc]=!0),typeof t.concealedSamples=="number"&&(n.concealedSamples=t.concealedSamples),this.lastDecodeAudioReceiverStats.set(n.ssrc,rt({},n))}processVideoInboundStats(t){let n=this._stats.videoRecv.find(h=>h.ssrc===t.ssrc);n||(n=js(A3),this._stats.videoRecv.push(n)),n.ssrc=t.ssrc,n.packets=t.packetsReceived,n.packetsLost=t.packetsLost,n.bytes=t.bytesReceived,n.firsCount=t.firCount,n.nacksCount=t.nackCount,n.plisCount=t.pliCount,n.framesDecodeCount=t.framesDecoded,n.framesDroppedCount=t.framesDropped,n.totalInterFrameDelay=t.totalInterFrameDelay,n.totalSquaredInterFrameDelay=t.totalSquaredInterFrameDelay,n.totalFreezesDuration=t.totalFreezesDuration,n.totalProcessingDelay=t.totalProcessingDelay,n.packetsDiscarded=t.packetsDiscarded,n.framesAssembledFromMultiplePackets=t.framesAssembledFromMultiplePackets,n.totalAssemblyTime=t.totalAssemblyTime,n.keyFramesDecoded=t.keyFramesDecoded,n.retransmittedBytesReceived=t.retransmittedBytesReceived,n.retransmittedPacketsReceived=t.retransmittedPacketsReceived;const i=this.lastDecodeVideoReceiverStats.get(n.ssrc),a=this.lastVideoFramesDecode.get(n.ssrc),l=this.lastVideoFramesOutput.get(n.ssrc),u=Date.now();if(n.framesDecodeCount>0&&!this.isFirstVideoDecoded[n.ssrc]){const h=n.decodedFrame?n.decodedFrame.width:0,p=n.decodedFrame?n.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(n.ssrc,h,p),this.isFirstVideoDecoded[n.ssrc]=!0}if(i){const h=i.stats,p=u-i.lts;n.framesDecodeFreezeTime=h.framesDecodeFreezeTime,n.framesDecodeInterval=h.framesDecodeInterval,!this.isFirstVideoDecoded[n.ssrc]&&p>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[n.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(n.ssrc),this.isFirstVideoDecodedTimeout[n.ssrc]=!0),n.framesDecodeCount>h.framesDecodeCount&&this.isFirstVideoDecoded[n.ssrc]?(i.lts=Date.now(),n.framesDecodeInterval=p,n.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(t.ssrc))?n.framesDecodeFreezeTime+=n.framesDecodeInterval:this.setVideoIsReady2(parseInt(t.ssrc,10),!0))):n.framesDecodeCount<h.framesDecodeCount&&(n.framesDecodeInterval=0),t.framesDecoded&&t.qpSum&&(i.stats.framesDecodeCount>t.framesDecoded?n.qpSumPerFrame=t.qpSum/t.framesDecoded:n.qpSumPerFrame=(t.qpSum-i.qpSum)/(t.framesDecoded-i.stats.framesDecodeCount))}t.totalDecodeTime&&(n.decodeMs=1e3*t.totalDecodeTime,n.avgDecodeMs=w0(i==null?void 0:i.stats,n,"decodeMs","framesDecodeCount")),n.avgProcessingDelayMs=w0(i==null?void 0:i.stats,n,"totalProcessingDelay","framesDecodeCount",Hf.kMillisecondsFromSeconds),n.avgFramesAssembledFromMultiplePacketsMs=w0(i==null?void 0:i.stats,n,"totalAssemblyTime","framesAssembledFromMultiplePackets",Hf.kMillisecondsFromSeconds),n.avgInterFrameDelayMs=w0(i==null?void 0:i.stats,n,"totalInterFrameDelay","framesDecodeCount",Hf.kMillisecondsFromSeconds),a&&u-a.lts>=800?(n.decodeFrameRate=Math.round((n.framesDecodeCount-a.count)/((u-a.lts)/1e3)),this.lastVideoFramesDecode.set(n.ssrc,{count:n.framesDecodeCount,lts:u,rate:n.decodeFrameRate})):a?n.decodeFrameRate=a.rate:this.lastVideoFramesDecode.set(n.ssrc,{count:n.framesDecodeCount,lts:u,rate:0}),n.framesDroppedCount&&t.framesReceived&&(l&&u-l.lts>=800?(n.outputFrameRate=Math.round((t.framesReceived-n.framesDroppedCount-l.count)/((u-l.lts)/1e3)),this.lastVideoFramesOutput.set(n.ssrc,{count:t.framesReceived-n.framesDroppedCount,lts:u,rate:Math.max(n.outputFrameRate,0)})):l?n.outputFrameRate=l.rate:this.lastVideoFramesOutput.set(n.ssrc,{count:t.framesReceived-n.framesDroppedCount,lts:u,rate:0})),this.processVideoTrackReceiverStats(t,t.trackId,n),t.codecId&&(n.codec=this.getCodecFromCodecStats(t.codecId)),t.framerateMean&&(n.framesRateFirefox=t.framerateMean),n.packets>0&&!this.isFirstVideoReceived[n.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(n.ssrc),this.isFirstVideoReceived[n.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(n.ssrc,{stats:rt({},n),lts:i?i.lts:Date.now(),qpSum:t.qpSum})}processVideoOutboundStats(t){let n=this._stats.videoSend.find(a=>a.ssrc===t.ssrc);n||(n=js(O3),this._stats.videoSend.push(n));const i=this.mediaBytesSent.get(t.ssrc);if(i)i.add(t.bytesSent);else{const a=new Gw(10);a.add(t.bytesSent),this.mediaBytesSent.set(t.ssrc,a)}if(t.retransmittedBytesSent!==void 0){const a=this.mediaBytesRetransmit.get(t.ssrc);if(a)a.add(t.retransmittedBytesSent);else{const l=new Gw(10);l.add(t.retransmittedBytesSent),this.mediaBytesRetransmit.set(t.ssrc,l)}}if(t.totalEncodedBytesTarget){const a=this.mediaBytesTargetEncode.get(t.ssrc);if(a)a.add(t.totalEncodedBytesTarget);else{const l=new Gw(10);l.add(t.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(t.ssrc,l)}}if(n.ssrc=t.ssrc,n.bytes=t.bytesSent,n.packets=t.packetsSent,n.firsCount=t.firCount,n.nacksCount=t.nackCount,n.plisCount=t.pliCount,n.frameCount=t.framesEncoded,n.adaptionChangeReason=t.qualityLimitationReason,n.scalabilityMode=t.scalabilityMode,n.retransmittedBytesSent=t.retransmittedBytesSent,n.retransmittedPacketsSent=t.retransmittedPacketsSent,n.hugeFramesSent=t.hugeFramesSent,n.keyFramesEncoded=t.keyFramesEncoded,t.totalEncodeTime&&t.framesEncoded){const a=this.lastEncoderMs.get(t.ssrc);if(!a||a.lastFrameCount>t.framesEncoded)n.avgEncodeMs=1e3*t.totalEncodeTime/t.framesEncoded;else{const l=t.framesEncoded-a.lastFrameCount,u=t.totalEncodeTime-a.lastEncoderTime;n.avgEncodeMs=1e3*u/l}}if(t.framesEncoded&&t.qpSum){const a=this.lastEncoderMs.get(t.ssrc);!a||a.lastFrameCount>t.framesEncoded?n.qpSumPerFrame=t.qpSum/t.framesEncoded:n.qpSumPerFrame=(t.qpSum-a.lastQpSum)/(t.framesEncoded-a.lastFrameCount)}if(this.lastEncoderMs.set(t.ssrc,{lastFrameCount:t.framesEncoded,lastEncoderTime:t.totalEncodeTime,lastQpSum:t.qpSum,lts:Date.now()}),t.codecId&&(n.codec=this.getCodecFromCodecStats(t.codecId)),t.mediaSourceId&&this.processVideoMediaSource(t.mediaSourceId,n),this.processVideoTrackSenderStats(t,t.trackId,n),t.remoteId)this.processRemoteInboundStats(t.remoteId,n);else{const a=this.findRemoteStatsId(t.ssrc,Ba.REMOTE_INBOUND);a&&this.processRemoteInboundStats(a,n)}}processAudioOutboundStats(t){let n=this._stats.audioSend.find(i=>i.ssrc===t.ssrc);if(n||(n=js(x3),this._stats.audioSend.push(n)),n.ssrc=t.ssrc,n.packets=t.packetsSent,n.bytes=t.bytesSent,n.retransmittedBytesSent=t.retransmittedBytesSent,n.retransmittedPacketsSent=t.retransmittedPacketsSent,t.mediaSourceId&&this.processAudioMediaSource(t.mediaSourceId,n),t.codecId&&(n.codec=this.getCodecFromCodecStats(t.codecId)),this.processAudioTrackSenderStats(t,t.trackId,n),t.remoteId)this.processRemoteInboundStats(t.remoteId,n);else{const i=this.findRemoteStatsId(t.ssrc,Ba.REMOTE_INBOUND);i&&this.processRemoteInboundStats(i,n)}}findRemoteStatsId(t,n){var i;const a=Array.from(Ma(i=this.report).call(i)).find(l=>l.type===n&&l.ssrc===t);return a?a.id:null}processVideoMediaSource(t,n){const i=this.report.get(t);i&&i.width&&i.height&&i.framesPerSecond&&(n.inputFrame={width:i.width,height:i.height,frameRate:i.framesPerSecond})}processAudioMediaSource(t,n){const i=this.report.get(t);i&&(n.inputLevel=i.audioLevel)}processVideoTrackSenderStats(t,n,i){var a,l,u,h;const p=n?this.report.get(n):void 0,m=(a=p==null?void 0:p.framesSent)!==null&&a!==void 0?a:t.framesSent;if(typeof m!="number")return;let E=(l=p==null?void 0:p.frameWidth)!==null&&l!==void 0?l:t.frameWidth,y=(u=p==null?void 0:p.frameHeight)!==null&&u!==void 0?u:t.frameHeight,R=(h=p==null?void 0:p.framesPerSecond)!==null&&h!==void 0?h:t.framesPerSecond;if(typeof E=="number"&&typeof y=="number"||(E=0,y=0),R==null){const A=Date.now(),D=this.lastVideoFramesSent.get(i.ssrc);D&&A-D.lts>=800?(R=Math.round((m-D.count)/((A-D.lts)/1e3)),this.lastVideoFramesSent.set(i.ssrc,{count:m,lts:A,rate:R})):D?R=D.rate:this.lastVideoFramesSent.set(i.ssrc,{count:m,lts:A,rate:0})}i.sentFrame={width:E,height:y,frameRate:Math.max(0,R)}}processVideoTrackReceiverStats(t,n,i){var a,l,u,h,p;const m=n?this.report.get(n):void 0,E=(a=m==null?void 0:m.framesReceived)!==null&&a!==void 0?a:t.framesReceived,y=(l=m==null?void 0:m.frameWidth)!==null&&l!==void 0?l:t.frameWidth,R=(u=m==null?void 0:m.frameHeight)!==null&&u!==void 0?u:t.frameHeight,A=(h=m==null?void 0:m.jitterBufferDelay)!==null&&h!==void 0?h:t.jitterBufferDelay,D=(p=m==null?void 0:m.jitterBufferEmittedCount)!==null&&p!==void 0?p:t.jitterBufferEmittedCount;if(typeof E=="number"){const H=this.lastVideoFramesRecv.get(i.ssrc),B=Date.now();i.framesReceivedCount=E;let $=0;H&&B-H.lts>=800?($=Math.round((E-H.count)/((B-H.lts)/1e3)),this.lastVideoFramesRecv.set(i.ssrc,{count:E,lts:B,rate:$})):H?$=H.rate:this.lastVideoFramesRecv.set(i.ssrc,{count:E,lts:B,rate:0}),i.receivedFrame={width:y||0,height:R||0,frameRate:$||0},i.decodedFrame={width:y||0,height:R||0,frameRate:i.decodeFrameRate||0},i.outputFrame={width:y||0,height:R||0,frameRate:i.outputFrameRate||i.decodeFrameRate||0}}if(A&&D){const H=this.lastVideoJBDelay.get(i.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let B=H.jitterBufferMs;const $=D-H.jitterBufferEmittedCount;$>0&&(B=1e3*(A-H.jitterBufferDelay)/$),i.jitterBufferMs=B,i.currentDelayMs=Math.round(B),this.lastVideoJBDelay.set(i.ssrc,{jitterBufferDelay:A,jitterBufferEmittedCount:D,jitterBufferMs:i.currentDelayMs})}}processAudioTrackSenderStats(t,n,i){var a,l,u,h;const p=n?this.report.get(n):void 0,m=(a=(l=p==null?void 0:p.echoReturnLoss)!==null&&l!==void 0?l:t.echoReturnLoss)!==null&&a!==void 0?a:0,E=(u=(h=p==null?void 0:p.echoReturnLossEnhancement)!==null&&h!==void 0?h:t.echoReturnLossEnhancement)!==null&&u!==void 0?u:0;i.aecReturnLoss=m,i.aecReturnLossEnhancement=E}processAudioTrackReceiverStats(t,n,i){var a,l,u,h,p,m,E;const y=n?this.report.get(n):void 0,R=(a=y==null?void 0:y.removedSamplesForAcceleration)!==null&&a!==void 0?a:t.removedSamplesForAcceleration,A=(l=y==null?void 0:y.totalSamplesReceived)!==null&&l!==void 0?l:t.totalSamplesReceived,D=(u=y==null?void 0:y.jitterBufferDelay)!==null&&u!==void 0?u:t.jitterBufferDelay,H=(h=y==null?void 0:y.jitterBufferEmittedCount)!==null&&h!==void 0?h:t.jitterBufferEmittedCount,B=(p=y==null?void 0:y.audioLevel)!==null&&p!==void 0?p:t==null?void 0:t.audioLevel,$=(m=y==null?void 0:y.totalSamplesDuration)!==null&&m!==void 0?m:t==null?void 0:t.totalSamplesDuration,K=(E=y==null?void 0:y.concealedSamples)!==null&&E!==void 0?E:t.concealedSamples;if(typeof A=="number"&&(i.totalSamplesReceived=A),R&&A&&(i.accelerateRate=R/A),D&&H){const ce=this.lastAudioJBDelay.get(i.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let ge=ce.jitterBufferMs;const Ee=H-ce.jitterBufferEmittedCount;Ee>0&&(ge=1e3*(D-ce.jitterBufferDelay)/Ee),i.jitterBufferMs=Math.round(ge),this.lastAudioJBDelay.set(i.ssrc,{jitterBufferDelay:D,jitterBufferEmittedCount:H,jitterBufferMs:i.jitterBufferMs})}i.outputLevel=B;let Y=1920;$&&A&&(Y=A/$/50,i.receivedFrames=Math.round(A/Y)),K&&(i.droppedFrames=Math.round(K/Y))}processRemoteInboundStats(t,n){const i=this.report.get(t);i&&(n.packetsLost=i.packetsLost,i.roundTripTime&&(n.rttMs=1e3*i.roundTripTime),i.jitter&&(n.jitterMs=1e3*i.jitter),i.timestamp&&(n.timestamp=i.timestamp))}getCodecFromCodecStats(t){const n=this.report.get(t);if(!n)return"";const i=n.mimeType.match(/\/(.*)$/);return i&&i[1]?i[1]:""}updateSendBitrate(){let t=0,n=null,i=null;this.mediaBytesSent.forEach(l=>{t+=l.diffMean()}),this.mediaBytesRetransmit.forEach(l=>{n=n===null?l.diffMean():n+l.diffMean()}),this.mediaBytesTargetEncode.forEach(l=>{i=i===null?l.diffMean():i+l.diffMean()});const a=n!==null?t-n:t;this._stats.bitrate={actualEncoded:8*a/(this.options.updateInterval/1e3),transmit:8*t/(this.options.updateInterval/1e3)},n!==null&&(this._stats.bitrate.retransmit=8*n/(this.options.updateInterval/1e3)),i!==null&&(this._stats.bitrate.targetEncoded=8*i/(this.options.updateInterval/1e3))}},yhe=class extends Kw{updateStats(){return Ye.resolve()}};function Yw(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:500,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e4;const u=function(){const h=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return h&&h[0]?Number(h[0].split("/")[1]):null}();return u?u<76?new She(t,{updateInterval:n,lossRateInterval:i,freezeRateLimit:a,firstVideoDecodedTimeout:l}):new P3(t,{updateInterval:n,lossRateInterval:i,freezeRateLimit:a,firstVideoDecodedTimeout:l}):function(h){if(!window.RTCStatsReport)return!1;const p=h.getStats();return!!(p instanceof Ye||function(m){return!!m&&(typeof m=="object"||typeof m=="function")&&typeof m.then=="function"}(p))}(t)?new P3(t,{updateInterval:n,lossRateInterval:i,freezeRateLimit:a,firstVideoDecodedTimeout:l}):new yhe(t,{updateInterval:n,lossRateInterval:i,freezeRateLimit:a,firstVideoDecodedTimeout:l})}const D3="websdk_ng_install_id";function Xw(){try{if(Q("INSTALL_ID"))return Q("INSTALL_ID");let t=window.localStorage.getItem(D3);return t||(t=Xd(),window.localStorage.setItem(D3,t)),Vn("INSTALL_ID",t),t}catch{return}}const ss=function(t){if(t.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return t;const n=t.match(/([0-9]+\.[0-9]+\.[0-9]+)\-([0-9]+)/);if(n&&n[1]&&n[2]){const i=n[1],a=n[2];return"".concat(i,".").concat(a)}return"4.0.0.999"}("4.23.2"),Jw=function(){try{return JSON.parse("true")===!0}catch{return!0}}();let Jd=function(t){return t.Default="default",t.Auto="auto",t.Relay="relay",t.SdRtn="sd-rtn",t}({});const Gi=function(){const t="us".concat("erna","me"),n="pa".concat("sswo","rd"),i=["t","s","t"];i.splice(1,0,"e");const a=i.join(""),l=[];for(let p=0;p<6;p++)l.push("1");const u=l.join(""),h={};return h[t]=a,h[n]=u,Object.assign(h,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=Gi;const j_={ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,ENABLE_USER_LICENSE_CHECK:!0,DISABLE_FEC:void 0,ENABLE_NTP_REPORT:!1,ENABLE_INSTANT_VIDEO:!1,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,ENABLE_LOSSBASED_BWE:!0,ENABLE_AUT_CC:!1,ENABLE_CC_FALLBACK:void 0,SUBSCRIBE_TWCC:!0,PUBLISH_TWCC:!1,ENABLE_SVC_DEFAULT_CODECS:["H264","VP8","VP9","AV1"],SVC:[],ENABLE_FULL_LINK_AV_SYNC:!1,SVC_MODE:null,PRE_SUB_NUM:2,ENABLE_AUT_FEEDBACK:!1,SVC_EXTENDED:["VP9"]},Qw={MIN_FRAME_RATE:1,MAX_FRAME_RATE:30,MAX_THRESHOLD_FRAMERATE:30,BITRATE_MIN_THRESHOLD:100,BITRATE_MAX_THRESHOLD:100,MAX_SCALE:5,BWE_SCALE_UP_THRESHOLD:.6,BWE_SCALE_DOWN_THRESHOLD:.6,PERF_SCALE_UP_THRESHOLD:.7,PERF_SCALE_DOWN_THRESHOLD:.6,MOTION_RESOLUTION_FACTOR:.8,MOTION_BITRATE_FACTOR:.6,DETAIL_FRAMERATE_FACTOR:.8,DETAIL_BITRATE_FACTOR:.6,BALANCE_RESOLUTION_FACTOR:.9,BALANCE_FRAMERATE_FACTOR:.9,BALANCE_BITRATE_FACTOR:.6,OVERUSE_TIMES_THRESHOLD:10,UNDERUSE_TIMES_THRESHOLD:40},Zw="v4.23.2-0-g1599fdac-dirty(3/4/2025, 5:13:36 PM)",eI={ENABLE_EVENT_REPORT:!0,UPLOAD_LOG:!1,ENABLE_AG_ADAPTATION:!0,FORCE_AG_HIGH_FRAMERATE:!1,FORCE_SUPPORT_AG_ADAPTATION:!1,ENCODER_CONFIG_LIMIT:{},CAMERA_CAPTURE_CONFIG:void 0,ENABLE_PRELOAD:!0,NEW_ICE_RESTART:!1,ICE_RESTART_INTERVAL:1e4,RESTART_SEQUENCE:["udp_tcp_relay","relay"],FIRST_TCP_CANDIDATE:!1,FIRST_TCP_CANDIDATE_INTERVAL:1e3,TURN_DOMAIN:"edge.agora.io",USE_TURN_IP:!1,NEW_TURN_MODE:void 0,NEW_FORCE_TURN:!1},ar=rt(rt(rt({},eI),{},{PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,NOT_REPORT_EVENT:[],PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,SHOW_REPORT_USER_INVOKER_LOG:!0,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:250,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,FIRST_H264_PROFILE_LEVEL_ID:"42001f",FIRST_PACKETIZATION_MODE:"",X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,FINGERPRINT:null,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,ENABLE_AUDIO_TOPN:!1,ENABLE_AUDIO_METADATA:!1,ENABLE_AUDIO_PTS_METADATA:!1,TOPN_SMOOTH_LEVEL:void 0,TOPN_NEW_SPEAKER_DELAY:void 0,TOPN_SWITCH_HOLD_MS:void 0,TOPN_AUDIO_GAIN:void 0,TOPN_SILENCE_THRESHOLD:250,AP_AREA:!0,ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,DATASTREAM_MAX_RETRANSMITS:10,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],USE_NEW_NETWORK_CONFIG:!1,AUTO_RESET_AUDIO_ROUTE:!1,PLUGIN_INFO:[],OVERUSE_DETECTOR_PARAMS:Qw,CUSTOM_ADAPTATION_DEFAULT_MODE:"",HIDE_NO_POSTER:!1,AP_CACHE_NUM:10,AP_UPDATE_INTERVAL:12e4,AP_CACHE_LIFETIME:12e4,MAX_PRELOAD_ASYNC_LENGTH:3,DISABLE_SCREEN_SHARE_REMB:!1},j_),{},{USE_CANDIDATE_FROM_AP_DETAIL:!1,AP_REQUEST_DETAIL:void 0,ENABLE_ROLE_SELECT_EDGE:!1,CLIENT_ROLE_OPTIONS:void 0,COMPATIBLE_SDP_EXTENSION:["gdpr_forbidden"],LIMIT_BITRATE:void 0,EXPERIMENTS:{},USE_PUB_RTX:!0,USE_SUB_RTX:!0,ENABLE_DATASTREAM_2:!1,USE_XR:!0,ENABLE_PREALLOC_PC:!1,ENABLE_PRE_SUB:!1,ENABLE_SVC:!1},{INSTALL_ID:""});function Vn(t,n,i){var a,l,u;Ke(a=Object.keys(ar)).call(a,t)&&(!i&&Ke(l=Object.keys(Cc)).call(l,t)||(ar[t]=n,t!=="ENABLE_VIDEO_SEI"&&t!=="ENABLE_AUDIO_TOPN"&&t!=="ENABLE_AUDIO_METADATA"&&t!=="ENABLE_AUDIO_PTS_METADATA"||n!==!0||(ar.ENABLE_ENCODED_TRANSFORM=!0,t==="ENABLE_AUDIO_PTS_METADATA"&&(ar.ENABLE_AUDIO_METADATA=!0)),t==="USE_NEW_NETWORK_CONFIG"&&n&&(u=!!n,ar.USE_NEW_NETWORK_CONFIG=u,u&&(ar.WEBCS_DOMAIN=["webrtc2-2.ap.sd-rtn.com"],ar.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-4.ap.sd-rtn.com"],ar.CDS_AP=["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ar.ACCOUNT_REGISTER=["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],ar.EVENT_REPORT_DOMAIN="web-2.statscollector.sd-rtn.com",ar.EVENT_REPORT_BACKUP_DOMAIN="statscollector-1.agora.io",ar.GATEWAY_DOMAINS=["edge.sd-rtn.com"])),t==="ENABLE_PRE_SUB"&&n&&(ar.ENABLE_INSTANT_VIDEO=!0,ar.ENABLE_PREALLOC_PC=!0),t==="ENABLE_SVC"&&n&&(ar.ENABLE_AUT_CC=!0),t==="NEW_FORCE_TURN"&&n&&(ar.NEW_TURN_MODE||(ar.NEW_TURN_MODE=4))))}function Q(t){return ar[t]}Jw||(ar.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],ar.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],ar.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],ar.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ar.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],ar.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],ar.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",ar.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",ar.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",ar.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",ar.AREAS=["NORTH_AMERICA","OVERSEA"]);let L3=function(t){return t[t.REALTIME=1]="REALTIME",t}({});const Cc={};var ln=function(t){return t.SET_SESSION_ID="SET_SESSION_ID",t.SET_P2P_ID="SET_P2P_id",t.SET_DC_ID="SET_DC_id",t.SET_UID="SET_UID",t.SET_INT_UID="SET_INT_UID",t.SET_PUB_ID="SET_PUB_ID",t.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",t.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",t.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",t.AVOID_JOIN_START="AVOID_JOIN_START",t.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",t.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",t.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",t.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",t.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",t.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",t.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",t.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",t.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",t.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",t.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",t.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",t.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",t.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",t.RESET_KEY_METRICS="RESET_KEY_METRICS",t.SET_USE_P2P="SET_USE_P2P",t.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE",t}(ln||{});let $_=function(t){return t.h264="h264",t.h265="h265",t.vp8="vp8",t.vp9="vp9",t.av1="av1",t}({});(function(t){t.opus="opus",t.pcma="pcma",t.pcmu="pcmu",t.g722="g722"})({});const k3=128,Che=96,M3=1e3,zf=10;let bhe=0;var F3=(()=>{var t={8:(a,l,u)=>{u.r(l),u.d(l,{Parser:()=>Xe,Printer:()=>Vr,parse:()=>He,print:()=>ct});const h=`
`,p="".concat("\r").concat(h),m=" ";let E;function y(Ne){return Ne>="0"&&Ne<="9"}function R(Ne){return Ne>="!"&&Ne<="~"}function A(Ne){return R(Ne)||Ne>=""&&Ne<="ÿ"}function D(Ne){return Ne==="!"||Ne>="#"&&Ne<="'"||Ne>="*"&&Ne<="+"||Ne>="-"&&Ne<="."||Ne>="0"&&Ne<="9"||Ne>="A"&&Ne<="Z"||Ne>="^"&&Ne<="~"}function H(Ne){return Ne>="1"&&Ne<="9"}function B(Ne){return Ne>="A"&&Ne<="Z"||Ne>="a"&&Ne<="z"}function $(Ne){return Ne==="d"||Ne==="h"||Ne==="m"||Ne==="s"}function K(Ne){return Ne>""&&Ne<"	"||Ne>"\v"&&Ne<"\f"||Ne>""&&Ne<"ÿ"}function Y(Ne){return B(Ne)||y(Ne)||Ne==="+"||Ne==="/"}function ce(Ne){return y(Ne)||B(Ne)||Ne==="+"||Ne==="/"||Ne==="-"||Ne==="_"}function ge(Ne){return B(Ne)||y(Ne)||Ne==="+"||Ne==="/"}function Ee(Ne,U){var Z=Object.keys(Ne);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(Ne);U&&(le=le.filter(function(Be){return Object.getOwnPropertyDescriptor(Ne,Be).enumerable})),Z.push.apply(Z,le)}return Z}function me(Ne){for(var U=1;U<arguments.length;U++){var Z=arguments[U]!=null?arguments[U]:{};U%2?Ee(Object(Z),!0).forEach(function(le){Te(Ne,le,Z[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ne,Object.getOwnPropertyDescriptors(Z)):Ee(Object(Z)).forEach(function(le){Object.defineProperty(Ne,le,Object.getOwnPropertyDescriptor(Z,le))})}return Ne}function Te(Ne,U,Z){return U in Ne?Object.defineProperty(Ne,U,{value:Z,enumerable:!0,configurable:!0,writable:!0}):Ne[U]=Z,Ne}(function(Ne){Ne.VERSION="v",Ne.ORIGIN="o",Ne.SESSION_NAME="s",Ne.INFORMATION="i",Ne.URI="u",Ne.EMAIL="e",Ne.PHONE="p",Ne.CONNECTION="c",Ne.BANDWIDTH="b",Ne.TIME="t",Ne.REPEAT="r",Ne.ZONE_ADJUSTMENTS="z",Ne.KEY="k",Ne.ATTRIBUTE="a",Ne.MEDIA="m"})(E||(E={}));class Me{consumeText(U,Z){let le=Z;for(;le<U.length;){const Be=U[le];if(Be==="\0"||Be==="\r"||Be===h)break;le+=1}if(le-Z==0)throw new Error("Invalid text, at ".concat(U));return le}consumeUnicastAddress(U,Z,le){return this.consumeTill(U,Z,m)}consumeOneOrMore(U,Z,le){let Be=Z;for(;le(U[Be]);)Be++;if(Be-Z==0)throw new Error("Invalid rule at ".concat(Z,"."));return Be}consumeSpace(U,Z){if(U[Z]===m)return Z+1;throw new Error("Invalid space at ".concat(Z,"."))}consumeIP4Address(U,Z){let le=Z;for(let Be=0;Be<4;Be++)if(le=this.consumeDecimalUChar(U,le),Be!==3){if(U[le]!==".")throw new Error("Invalid IP4 address.");le++}return le}consumeDecimalUChar(U,Z){let le=Z;for(let zt=0;zt<3&&y(U[le]);zt++,le++);if(le-Z==0)throw new Error("Invalid decimal uchar.");const Be=parseInt(U.slice(Z,le));if(Be>=0&&Be<=255)return le;throw new Error("Invalid decimal uchar")}consumeIP6Address(U,Z){let le=this.consumeHexpart(U,Z);return U[le]===":"&&(le+=1,le=this.consumeIP4Address(U,le)),le}consumeHexpart(U,Z){let le=Z;if(U[le]===":"&&U[le+1]===":"){le+=2;try{le=this.consumeHexseq(U,le)}catch{}return le}if(le=this.consumeHexseq(U,le),U[le]===":"&&U[le+1]===":"){le+=2;try{le=this.consumeHexseq(U,le)}catch{}return le}return le}consumeHexseq(U,Z){let le=Z;for(;le=this.consumeHex4(U,le),U[le]===":"&&U[le+1]!==":";)le+=1;return le}consumeHex4(U,Z){let le=0;for(;le<4;le++)if(!((Be=U[Z+le])>="0"&&Be<="9"||Be>="a"&&Be<="f"||Be>="A"&&Be<="F")){if(le===0)throw new Error("Invalid hex 4");break}var Be;return Z+le}consumeFQDN(U,Z){let le=Z;for(;y(U[le])||B(U[le])||U[le]==="-"||U[le]===".";)le+=1;if(le-Z<4)throw new Error("Invalid FQDN");return le}consumeExtnAddr(U,Z){return this.consumeOneOrMore(U,Z,A)}consumeMulticastAddress(U,Z,le){switch(le){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(U,Z);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(U,Z);default:try{return this.consumeFQDN(U,Z)}catch{return this.consumeExtnAddr(U,Z)}}}consumeIP6MulticastAddress(U,Z){const le=this.consumeHexpart(U,Z);return U[le]==="/"?this.consumeInteger(U,le+1):le}consumeIP4MulticastAddress(U,Z){let le=Z+3;const Be=U.slice(Z,le),zt=parseInt(Be);if(zt<224||zt>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let Wn=0;Wn<3;Wn++){if(U[le]!==".")throw new Error("Invalid IP4 multicast address.");le+=1,le=this.consumeDecimalUChar(U,le)}return U[le]==="/"&&(le+=1),le=this.consumeTTL(U,le),U[le]==="/"&&(le=this.consumeInteger(U,le)),le}consumeInteger(U,Z){if(!H(U[Z]))throw new Error("Invalid integer.");for(Z+=1;y(U[Z]);)Z+=1;return Z}consumeTTL(U,Z){if(U[Z]==="0")return Z+1;if(!H(U[Z]))throw new Error("Invalid TTL.");Z+=1;for(let le=0;le<2&&y(U[Z]);le++)Z+=1;return Z}consumeToken(U,Z){return this.consumeOneOrMore(U,Z,D)}consumeTime(U,Z){let le=Z;if(U[le]==="0")return le+1;for(H(U[le])&&(le+=1);y(U[le]);)le++;if(le-Z<10)throw new Error("Invalid time");return le}consumeAddress(U,Z){return this.consumeTill(U,Z,m)}consumeTypedTime(U,Z){let le=Z;return le=this.consumeOneOrMore(U,le,y),$(U[le])?le+1:le}consumeRepeatInterval(U,Z){if(!H(U[Z]))throw new Error("Invalid repeat interval");for(Z+=1;y(U[Z]);)Z+=1;return $(U[Z])&&(Z+=1),Z}consumePort(U,Z){return this.consumeOneOrMore(U,Z,y)}consume(U,Z,le){for(let Be=0;Be<le.length;Be++){if(Z+Be>=U.length)throw new Error("consume exceeding value length");if(U[Z+Be]!==le[Be])throw new Error("consume ".concat(le," failed at ").concat(Be))}return Z+le.length}consumeTill(U,Z,le){let Be=Z;for(;Be<U.length&&(typeof le!="string"||U[Be]!==le)&&(typeof le!="function"||!le(U[Be]));)Be++;return Be}}class Xe extends Me{constructor(){super(),Te(this,"records",[]),Te(this,"currentLine",0)}parse(U){const Z=this.probeEOL(U);this.records=U.split(Z).filter(yh=>!!mo(yh).call(yh)).map(this.parseLine),this.currentLine=0;const le=this.parseVersion(),Be=this.parseOrigin(),zt=this.parseSessionName(),Wn=this.parseInformation(),yi=this.parseUri(),da=this.parseEmail(),nu=this.parsePhone(),Sh=this.parseConnection(),ug=this.parseBandWidth(),XS=this.parseTimeFields(),JS=this.parseKey(),ms=this.parseSessionAttribute(),ed=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:le,origin:Be,sessionName:zt,information:Wn,uri:yi,emails:da,phones:nu,connection:Sh,bandwidths:ug,timeFields:XS,key:JS,attributes:ms,mediaDescriptions:ed}}getCurrentRecord(){const U=this.records[this.currentLine];if(!U)throw new Error("Record doesn't exit.");return U}probeEOL(U){for(let Z=0;Z<U.length;Z++)if(U[Z]===h)return U[Z-1]==="\r"?p:h;throw new Error("Invalid newline character.")}parseLine(U,Z){if(U.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const le=U[0];if(U[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:le,value:U.slice(2),line:Z,cur:0}}parseSessionAttribute(){const U=new dn;for(;this.currentLine<this.records.length;){const Z=this.getCurrentRecord();if(Z.type!==E.ATTRIBUTE)break;const le={attField:this.extractOneOrMore(Z,Be=>D(Be)&&Be!==":"),_cur:0};Z.value[Z.cur]===":"&&(Z.cur+=1,le.attValue=this.extractOneOrMore(Z,K)),U.parse(le),this.currentLine++}return U.digest()}parseMediaAttributes(U){const Z=new hn(U);for(;this.currentLine<this.records.length;){const le=this.getCurrentRecord();if(le.type!==E.ATTRIBUTE)break;const Be={attField:this.extractOneOrMore(le,zt=>D(zt)&&zt!==":"),_cur:0};le.value[le.cur]===":"&&(le.cur+=1,Be.attValue=this.extractOneOrMore(le,K)),Z.parse(Be),this.currentLine++}return Z.digest()}parseKey(){const U=this.getCurrentRecord();if(U.type===E.KEY){if(U.value==="prompt"||U.value==="clear:"||U.value==="base64:"||U.value==="uri:")return U.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const U=this.getCurrentRecord();if(U.type===E.ZONE_ADJUSTMENTS){const Z=[];for(;;)try{const le=this.extract(U,this.consumeTime);this.consumeSpaceForRecord(U);let Be=!1;U.value[U.cur]==="-"&&(Be=!0,U.cur+=1);const zt=this.extract(U,this.consumeTypedTime);Z.push({time:le,typedTime:zt,back:Be})}catch{break}if(Z.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,Z}return[]}parseRepeat(){const U=[];for(;;){const Z=this.getCurrentRecord();if(Z.type!==E.REPEAT)break;{const le=this.extract(Z,this.consumeRepeatInterval),Be=this.parseTypedTime(Z);U.push({repeatInterval:le,typedTimes:Be}),this.currentLine++}}return U}parseTypedTime(U){const Z=[];for(;;)try{this.consumeSpaceForRecord(U),Z.push(this.extract(U,this.consumeTypedTime))}catch{break}if(Z.length===0)throw new Error("Invalid typed time.");return Z}parseTime(){const U=this.getCurrentRecord(),Z=this.extract(U,this.consumeTime);this.consumeSpaceForRecord(U);const le=this.extract(U,this.consumeTime);return this.currentLine++,{startTime:Z,stopTime:le}}parseBandWidth(){const U=[];for(;this.currentLine<this.records.length;){const Z=this.getCurrentRecord();if(Z.type!==E.BANDWIDTH)break;{const le=this.extractOneOrMore(Z,D);if(Z.value[Z.cur]!==":")throw new Error("Invalid bandwidth field.");Z.cur++;const Be=this.extractOneOrMore(Z,y);U.push({bwtype:le,bandwidth:Be}),this.currentLine++}}return U}parseVersion(){const U=this.getCurrentRecord();if(U.type!==E.VERSION)throw new Error("first sdp record must be version");const Z=U.value.slice(0,this.consumeOneOrMore(U.value,0,y));if(Z.length!==U.value.length)throw new Error('invalid proto version, "v='.concat(U.value,'"'));return this.currentLine++,Z}parseOrigin(){const U=this.getCurrentRecord();if(U.type!==E.ORIGIN)throw new Error("second line of sdp must be origin");const Z=this.extractOneOrMore(U,A);this.consumeSpaceForRecord(U);const le=this.extractOneOrMore(U,y);this.consumeSpaceForRecord(U);const Be=this.extractOneOrMore(U,y);this.consumeSpaceForRecord(U);const zt=this.extractOneOrMore(U,D);this.consumeSpaceForRecord(U);const Wn=this.extractOneOrMore(U,D);this.consumeSpaceForRecord(U);const yi=this.extract(U,this.consumeUnicastAddress);return this.currentLine++,{username:Z,sessId:le,sessVersion:Be,nettype:zt,addrtype:Wn,unicastAddress:yi}}parseSessionName(){const U=this.getCurrentRecord();if(U.type===E.SESSION_NAME){const Z=this.extract(U,this.consumeText);return this.currentLine++,Z}}parseInformation(){const U=this.getCurrentRecord();if(U.type!==E.INFORMATION)return;const Z=this.extract(U,this.consumeText);return this.currentLine++,Z}parseUri(){const U=this.getCurrentRecord();if(U.type===E.URI)return this.currentLine++,U.value}parseEmail(){const U=[];for(;;){const Z=this.getCurrentRecord();if(Z.type!==E.EMAIL)break;U.push(Z.value),this.currentLine++}return U}parsePhone(){const U=[];for(;;){const Z=this.getCurrentRecord();if(Z.type!==E.PHONE)break;U.push(Z.value),this.currentLine++}return U}parseConnection(){const U=this.getCurrentRecord();if(U.type===E.CONNECTION){const Z=this.extractOneOrMore(U,D);this.consumeSpaceForRecord(U);const le=this.extractOneOrMore(U,D);this.consumeSpaceForRecord(U);const Be=this.extract(U,this.consumeAddress);return this.currentLine++,{nettype:Z,addrtype:le,address:Be}}}parseMedia(){const U=this.getCurrentRecord(),Z=this.extract(U,this.consumeToken);this.consumeSpaceForRecord(U);let le=this.extract(U,this.consumePort);U.value[U.cur]==="/"&&(U.cur+=1,le+=this.extract(U,this.consumeInteger)),this.consumeSpaceForRecord(U);const Be=[];for(Be.push(this.extract(U,this.consumeToken));U.value[U.cur]==="/";)U.cur+=1,Be.push(this.extract(U,this.consumeToken));if(Be.length===0)throw new Error("Invalid proto");const zt=this.parseFmt(U);return this.currentLine++,{mediaType:Z,port:le,protos:Be,fmts:zt}}parseTimeFields(){const U=[];for(;this.getCurrentRecord().type===E.TIME;){const Z=this.parseTime(),le=this.parseRepeat(),Be=this.parseZone();U.push({time:Z,repeats:le,zones:Be})}return U}parseMediaDescription(){const U=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===E.MEDIA;){const Z=this.parseMedia(),le=this.parseInformation(),Be=this.parseConnections(),zt=this.parseBandWidth(),Wn=this.parseKey(),yi=this.parseMediaAttributes(Z);U.push({media:Z,information:le,connections:Be,bandwidths:zt,key:Wn,attributes:yi})}return U}parseConnections(){const U=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===E.CONNECTION;)U.push(this.parseConnection());return U}parseFmt(U){const Z=[];for(;;)try{this.consumeSpaceForRecord(U),Z.push(this.extract(U,this.consumeToken))}catch{break}if(Z.length===0)throw new Error("Invalid fmts");return Z}extract(U,Z){for(var le=arguments.length,Be=new Array(le>2?le-2:0),zt=2;zt<le;zt++)Be[zt-2]=arguments[zt];const Wn=Z.call(this,U.value,U.cur,...Be),yi=U.value.slice(U.cur,Wn);return U.cur=Wn,yi}extractOneOrMore(U,Z){const le=this.consumeOneOrMore(U.value,U.cur,Z),Be=U.value.slice(U.cur,le);return U.cur=le,Be}consumeSpaceForRecord(U){if(U.value[U.cur]!==m)throw new Error("Invalid space at ".concat(U.cur,"."));U.cur+=1}}class nt extends Me{constructor(){super(...arguments),Te(this,"attributes",void 0),Te(this,"digested",!1)}extractOneOrMore(U,Z,le){const Be=this.consumeOneOrMore(U.attValue,U._cur,Z),zt=U.attValue.slice(U._cur,Be),[Wn,yi]=le||[];if(typeof Wn=="number"&&zt.length<Wn)throw new Error("error in length, should be more or equal than ".concat(Wn," characters."));if(typeof yi=="number"&&zt.length>yi)throw new Error("error in length, should be less or equal than ".concat(yi," characters."));return U._cur=Be,zt}consumeAttributeSpace(U){if(U.attValue[U._cur]!==m)throw new Error("Invalid space at ".concat(U._cur,"."));U._cur+=1}extract(U,Z){if(!U.attValue)throw new Error("Nothing to extract from attValue.");for(var le=arguments.length,Be=new Array(le>2?le-2:0),zt=2;zt<le;zt++)Be[zt-2]=arguments[zt];const Wn=Z.call(this,U.attValue,U._cur,...Be),yi=U.attValue.slice(U._cur,Wn);return U._cur=Wn,yi}atEnd(U){if(!U.attValue)throw new Error;return U._cur>=U.attValue.length}peekChar(U){if(!U.attValue)throw new Error;return U.attValue[U._cur]}peek(U,Z){if(!U.attValue)throw new Error;for(let le=0;le<Z.length;le++)if(Z[le]!==U.attValue[U._cur+le])return!1;return!0}parseIceUfrag(U){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(U,Y,[4,256])}parseIcePwd(U){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(U,Y,[22,256])}parseIceOptions(U){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const Z=[];for(;!this.atEnd(U);){Z.push(this.extractOneOrMore(U,Y));try{this.consumeAttributeSpace(U)}catch(le){if(this.atEnd(U))break;throw le}}this.attributes.iceOptions=Z}parseFingerprint(U){const Z=this.extract(U,this.consumeToken);this.consumeAttributeSpace(U);const le=this.extract(U,this.consumeTill);this.attributes.fingerprints.push({hashFunction:Z,fingerprint:le})}parseExtmap(U){const Z=this.extractOneOrMore(U,y);let le;this.peekChar(U)==="/"&&(this.extract(U,this.consume,"/"),le=this.extract(U,this.consumeToken)),this.consumeAttributeSpace(U);const Be=this.extract(U,this.consumeTill,m),zt=me(me({entry:parseInt(Z,10)},le&&{direction:le}),{},{extensionName:Be});this.peekChar(U)===m&&(this.consumeAttributeSpace(U),zt.extensionAttributes=this.extract(U,this.consumeTill)),this.attributes.extmaps.push(zt)}parseSetup(U){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const Z=this.extract(U,this.consumeTill);if(Z!=="active"&&Z!=="passive"&&Z!=="actpass"&&Z!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=Z}}class dn extends nt{constructor(){super(...arguments),Te(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(U){if(this.digested)throw new Error("already digested");try{switch(U.attField){case"group":this.parseGroup(U);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(U);break;case"ice-pwd":this.parseIcePwd(U);break;case"ice-options":this.parseIceOptions(U);break;case"fingerprint":this.parseFingerprint(U);break;case"setup":this.parseSetup(U);break;case"tls-id":this.parseTlsId(U);break;case"identity":this.parseIdentity(U);break;case"extmap":this.parseExtmap(U);break;case"msid-semantic":this.parseMsidSemantic(U);break;default:U.ignored=!0,this.attributes.unrecognized.push(U)}}catch(Z){throw console.error("parsing session attribute ".concat(U.attField,' error, "a=').concat(U.attField,":").concat(U.attValue,'"')),Z}if(!U.ignored&&U.attValue&&!this.atEnd(U))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(U){const Z=this.extract(U,this.consumeToken),le=[];for(;!this.atEnd(U)&&this.peekChar(U)===m;)this.consumeAttributeSpace(U),le.push(this.extract(U,this.consumeToken));this.attributes.groups.push({semantic:Z,identificationTag:le})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(U){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(U,ce)}parseIdentity(U){const Z=this.extractOneOrMore(U,ge),le=[];for(;!this.atEnd(U)&&this.peekChar(U)===m;){this.consumeAttributeSpace(U);const Be=this.extract(U,this.consumeToken);this.extract(U,this.consume,"=");const zt=this.extractOneOrMore(U,Wn=>Wn!==m&&K(Wn));le.push({name:Be,value:zt})}this.attributes.identities.push({assertionValue:Z,extensions:le})}parseMsidSemantic(U){this.peekChar(U)===m&&this.consumeAttributeSpace(U);const Z={semantic:this.extract(U,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(U)}catch{break}if(this.peekChar(U)==="*"){this.extract(U,this.consume,"*"),Z.applyForAll=!0;break}{const le=this.extract(U,this.consumeTill,m);Z.identifierList.push(le)}}this.attributes.msidSemantic=Z}}class hn extends nt{constructor(U){super(),Te(this,"attributes",void 0),U.protos.indexOf("RTP")!==-1||U.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(U){if(this.digested)throw new Error("already digested");try{switch(U.attField){case"extmap":this.parseExtmap(U);break;case"setup":this.parseSetup(U);break;case"ice-ufrag":this.parseIceUfrag(U);break;case"ice-pwd":this.parseIcePwd(U);break;case"ice-options":this.parseIceOptions(U);break;case"candidate":this.parseCandidate(U);break;case"remote-candidate":this.parseRemoteCandidate(U);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(U);break;case"rtpmap":this.parseRtpmap(U);break;case"ptime":this.parsePtime(U);break;case"maxptime":this.parseMaxPtime(U);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(U);break;case"ssrc":this.parseSSRC(U);break;case"fmtp":this.parseFmtp(U);break;case"rtcp-fb":this.parseRtcpFb(U);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(U);break;case"mid":this.parseMid(U);break;case"msid":this.parseMsid(U);break;case"imageattr":this.parseImageAttr(U);break;case"rid":this.parseRid(U);break;case"simulcast":this.parseSimulcast(U);break;case"sctp-port":this.parseSctpPort(U);break;case"max-message-size":this.parseMaxMessageSize(U);break;case"ssrc-group":this.parseSSRCGroup(U);break;default:U.ignored=!0,this.attributes.unrecognized.push(U)}}catch(Z){throw console.error("parsing media attribute ".concat(U.attField,' error, "a=').concat(U.attField,":").concat(U.attValue,'"')),Z}if(!U.ignored&&U.attValue&&!this.atEnd(U))throw new Error("attribute parsing error")}parseCandidate(U){const Z=this.extractOneOrMore(U,Y,[1,32]);this.consumeAttributeSpace(U);const le=this.extractOneOrMore(U,y,[1,5]);this.consumeAttributeSpace(U);const Be=this.extract(U,this.consumeToken);this.consumeAttributeSpace(U);const zt=this.extractOneOrMore(U,y,[1,10]);this.consumeAttributeSpace(U);const Wn=this.extract(U,this.consumeAddress);this.consumeAttributeSpace(U);const yi=this.extract(U,this.consumePort);this.consumeAttributeSpace(U),this.extract(U,this.consume,"typ"),this.consumeAttributeSpace(U);const da={foundation:Z,componentId:le,transport:Be,priority:zt,connectionAddress:Wn,port:yi,type:this.extract(U,this.consumeToken),extension:{}};for(this.peek(U," raddr")&&(this.extract(U,this.consume," raddr"),this.consumeAttributeSpace(U),da.relAddr=this.extract(U,this.consumeAddress)),this.peek(U," rport")&&(this.extract(U,this.consume," rport"),this.consumeAttributeSpace(U),da.relPort=this.extract(U,this.consumePort));this.peekChar(U)===m;){this.consumeAttributeSpace(U);const nu=this.extract(U,this.consumeToken);this.consumeAttributeSpace(U),da.extension[nu]=this.extractOneOrMore(U,R)}this.attributes.candidates.push(da)}parseRemoteCandidate(U){const Z=[];for(;;){const le=this.extractOneOrMore(U,y,[1,5]);this.consumeAttributeSpace(U);const Be=this.extract(U,this.consumeAddress);this.consumeAttributeSpace(U);const zt=this.extract(U,this.consumePort);Z.push({componentId:le,connectionAddress:Be,port:zt});try{this.consumeAttributeSpace(U)}catch{break}}this.attributes.remoteCandidatesList.push(Z)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(U){const Z=this.extract(U,this.consumeToken);this.consumeAttributeSpace(U);const le=this.extract(U,this.consumeTill,"/");this.extract(U,this.consume,"/");const Be={encodingName:le,clockRate:this.extractOneOrMore(U,y)};this.atEnd(U)||this.peekChar(U)!=="/"||(this.extract(U,this.consume,"/"),Be.encodingParameters=parseInt(this.extract(U,this.consumeTill),10));const zt=this.attributes.payloads.find(Wn=>Wn.payloadType===parseInt(Z,10));zt?zt.rtpMap=Be:this.attributes.payloads.push({payloadType:parseInt(Z,10),rtpMap:Be,rtcpFeedbacks:[]})}parsePtime(U){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(U,this.consumeTill)}parseMaxPtime(U){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(U,this.consumeTill)}parseDirection(U){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=U.attField}parseSSRC(U){const Z=this.extractOneOrMore(U,y);this.consumeAttributeSpace(U);const le=this.extract(U,this.consumeTill,":");let Be;this.peekChar(U)===":"&&(this.extract(U,this.consume,":"),Be=this.extract(U,this.consumeTill));const zt=this.attributes.ssrcs.find(Wn=>Wn.ssrcId===parseInt(Z,10));zt?zt.attributes[le]=Be:this.attributes.ssrcs.push({ssrcId:parseInt(Z,10),attributes:{[le]:Be}})}parseFmtp(U){const Z=this.extract(U,this.consumeTill,m);this.consumeAttributeSpace(U);const le=this.extract(U,this.consumeTill),Be={};le.split(";").forEach(Wn=>{let[yi,da]=Wn.split("=");yi=mo(yi).call(yi);const nu=typeof da=="string"?mo(da).call(da):null;typeof yi=="string"&&yi.length>0&&(Be[yi]=nu)});const zt=this.attributes.payloads.find(Wn=>Wn.payloadType===parseInt(Z,10));zt?zt.fmtp={parameters:Be}:this.attributes.payloads.push({payloadType:parseInt(Z,10),rtcpFeedbacks:[],fmtp:{parameters:Be}})}parseFmtParameters(U){const Z={},le=this.extract(U,this.consumeTill,"=");U._cur++;const Be=this.extract(U,this.consumeTill,";");for(Z[le]=Be;U.attValue[U._cur]===";";){const zt=this.extract(U,this.consumeTill,"=");U._cur++;const Wn=this.extract(U,this.consumeTill,";");Z[zt]=Wn}return Z}parseRtcpFb(U){let Z="";Z=this.peekChar(U)==="*"?this.extract(U,this.consume,"*"):this.extract(U,this.consumeTill,m),this.consumeAttributeSpace(U);const le=this.extract(U,this.consumeTill,m);let Be;if(le==="trr-int")Be={type:le,interval:this.extract(U,this.consumeTill)};else{const zt={type:le};this.peekChar(U)===m&&(this.consumeAttributeSpace(U),zt.parameter=this.extract(U,this.consumeToken),this.peekChar(U)===m&&(zt.additional=this.extract(U,this.consumeTill))),Be=zt}if(Z==="*")this.attributes.rtcpFeedbackWildcards.push(Be);else{const zt=this.attributes.payloads.find(Wn=>Wn.payloadType===parseInt(Z,10));zt?zt.rtcpFeedbacks.push(Be):this.attributes.payloads.push({payloadType:parseInt(Z,10),rtcpFeedbacks:[Be]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(U){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const Z={port:this.extract(U,this.consumePort)};this.peekChar(U)===m&&(this.consumeAttributeSpace(U),Z.netType=this.extractOneOrMore(U,D),this.consumeAttributeSpace(U),Z.addressType=this.extractOneOrMore(U,D),this.consumeAttributeSpace(U),Z.address=this.extract(U,this.consumeAddress)),this.attributes.rtcp=Z}parseMsid(U){const Z={id:this.extractOneOrMore(U,D,[1,64])};this.peekChar(U)===m&&(this.consumeAttributeSpace(U),Z.appdata=this.extractOneOrMore(U,D,[1,64])),this.attributes.msids.push(Z)}parseImageAttr(U){this.attributes.imageattr.push(U.attValue)}parseRid(U){const Z=this.extractOneOrMore(U,Be=>B(Be)||y(Be)||Be==="_"||Be==="-");this.consumeAttributeSpace(U);const le={id:Z,direction:this.extract(U,this.consumeToken),params:[]};if(this.peekChar(U)===m){if(this.consumeAttributeSpace(U),this.peek(U,"pt=")){this.extract(U,this.consume,"pt=");const Be=[];for(;;){const zt=this.extract(U,this.consumeToken);Be.push(zt);try{this.extract(U,this.consume,",")}catch{break}}le.payloads=Be,this.peekChar(U)===m&&this.extract(U,this.consume,m)}for(;;){const Be=this.extract(U,this.consumeToken);switch(Be){case"depend":{const zt={type:Be,rids:this.extract(U,this.consume,"=").split(",")};le.params.push(zt);break}default:{const zt={type:Be};this.peekChar(U)==="="&&(this.extract(U,this.consume,"="),zt.val=this.extract(U,this.consumeTill,";")),le.params.push(zt)}}try{this.extract(U,this.consume,";")}catch{break}}}this.attributes.rids.push(le)}parseSimulcast(U){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=U.attValue,this.extract(U,this.consumeTill)}parseSctpPort(U){this.attributes.sctpPort=this.extractOneOrMore(U,y,[1,5])}parseMaxMessageSize(U){this.attributes.maxMessageSize=this.extractOneOrMore(U,y,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(U){this.attributes.mid=this.extract(U,this.consumeToken)}parseSSRCGroup(U){const Z=this.extract(U,this.consumeToken),le=[];for(;;)try{this.consumeAttributeSpace(U);const Be=this.extract(U,this.consumeInteger);le.push(parseInt(Be,10))}catch{break}this.attributes.ssrcGroups.push({semantic:Z,ssrcIds:le})}}function Qn(Ne,U,Z){return U in Ne?Object.defineProperty(Ne,U,{value:Z,enumerable:!0,configurable:!0,writable:!0}):Ne[U]=Z,Ne}class Vr{constructor(){Qn(this,"eol",p)}print(U,Z){let le="";return Z&&(this.eol=Z),le+=this.printVersion(U.version),le+=this.printOrigin(U.origin),le+=this.printSessionName(U.sessionName),le+=this.printInformation(U.information),le+=this.printUri(U.uri),le+=this.printEmail(U.emails),le+=this.printPhone(U.phones),le+=this.printConnection(U.connection),le+=this.printBandwidth(U.bandwidths),le+=this.printTimeFields(U.timeFields),le+=this.printKey(U.key),le+=this.printSessionAttributes(U.attributes),le+=this.printMediaDescription(U.mediaDescriptions),le}printVersion(U){return"v=".concat(U).concat(this.eol)}printOrigin(U){return"o=".concat(U.username," ").concat(U.sessId," ").concat(U.sessVersion," ").concat(U.nettype," ").concat(U.addrtype," ").concat(U.unicastAddress).concat(this.eol)}printSessionName(U){return U?"s=".concat(U).concat(this.eol):""}printInformation(U){return U?"i=".concat(U).concat(this.eol):""}printUri(U){return U?"u=".concat(U).concat(this.eol):""}printEmail(U){let Z="";for(const le of U)Z+="e=".concat(le).concat(this.eol);return Z}printPhone(U){let Z="";for(const le of U)Z+="e=".concat(le).concat(this.eol);return Z}printConnection(U){return U?"c=".concat(U.nettype," ").concat(U.addrtype," ").concat(U.address).concat(this.eol):""}printBandwidth(U){let Z="";for(const le of U)Z+="b=".concat(le.bwtype,":").concat(le.bandwidth).concat(this.eol);return Z}printTimeFields(U){let Z="";for(const le of U){Z+="t=".concat(le.time.startTime," ").concat(le.time.startTime).concat(this.eol);for(const Be of le.repeats)Z+="r=".concat(Be.repeatInterval," ").concat(Be.typedTimes.join(" ")).concat(this.eol);le.zoneAdjustments&&(Z+="z=",Z+="z=".concat(le.zoneAdjustments.map(Be=>"".concat(Be.time," ").concat(Be.back?"-":""," ").concat(Be.typedTime)).join(" ")).concat(this.eol),Z+=this.eol)}return Z}printKey(U){return U?"k=".concat(U).concat(this.eol):""}printAttributes(U){let Z="";for(const le of U)Z+="a=".concat(le.attField).concat(le.attValue?":".concat(le.attValue):"").concat(this.eol);return Z}printMediaDescription(U){let Z="";for(const le of U)Z+=this.printMedia(le.media),Z+=this.printInformation(le.information),Z+=this.printConnections(le.connections),Z+=this.printBandwidth(le.bandwidths),Z+=this.printKey(le.key),Z+=this.printMediaAttributes(le);return Z}printConnections(U){let Z="";for(const le of U)Z+=this.printConnection(le);return Z}printMedia(U){return"m=".concat(U.mediaType," ").concat(U.port," ").concat(U.protos.join("/")," ").concat(U.fmts.join(" ")).concat(this.eol)}printSessionAttributes(U){return new Xo(this.eol).print(U)}printMediaAttributes(U){return new Oe(this.eol).print(U)}}class Pr{constructor(U){Qn(this,"eol",void 0),this.eol=U}printIceUfrag(U){return U===void 0?"":"a=ice-ufrag:".concat(U).concat(this.eol)}printIcePwd(U){return U===void 0?"":"a=ice-pwd:".concat(U).concat(this.eol)}printIceOptions(U){return U===void 0?"":"a=ice-options:".concat(U.join(m)).concat(this.eol)}printFingerprints(U){return U.length>0?U.map(Z=>"a=fingerprint:".concat(Z.hashFunction).concat(m).concat(Z.fingerprint)).join(this.eol)+this.eol:""}printExtmap(U){return U.map(Z=>"a=extmap:".concat(Z.entry).concat(Z.direction?"/".concat(Z.direction):"").concat(m).concat(Z.extensionName).concat(Z.extensionAttributes?"".concat(m).concat(Z.extensionAttributes):"").concat(this.eol)).join("")}printSetup(U){return U===void 0?"":"a=setup:".concat(U).concat(this.eol)}printUnrecognized(U){return U.map(Z=>"a=".concat(Z.attField).concat(Z.attValue?":".concat(Z.attValue):"").concat(this.eol)).join("")}}class Xo extends Pr{print(U){let Z="";return Z+=this.printGroups(U.groups),Z+=this.printMsidSemantic(U.msidSemantic),Z+=this.printIceLite(U.iceLite),Z+=this.printIceUfrag(U.iceUfrag),Z+=this.printIcePwd(U.icePwd),Z+=this.printIceOptions(U.iceOptions),Z+=this.printFingerprints(U.fingerprints),Z+=this.printSetup(U.setup),Z+=this.printTlsId(U.tlsId),Z+=this.printIdentity(U.identities),Z+=this.printExtmap(U.extmaps),Z+=this.printUnrecognized(U.unrecognized),Z}printGroups(U){let Z="";return U.length>0&&(Z+=U.map(le=>"a=group:".concat(le.semantic).concat(le.identificationTag.map(Be=>"".concat(m).concat(Be)).join("")).concat(this.eol)).join("")),Z}printIceLite(U){return U===void 0?"":"a=ice-lite"+this.eol}printTlsId(U){return U?"a=tls-id:".concat(U).concat(this.eol):""}printIdentity(U){return U.length===0?"":U.map(Z=>"a=identity:".concat(Z.assertionValue).concat(Z.extensions.map(le=>"".concat(m).concat(le.name).concat(le.value?"=".concat(le.value):"")))).join(this.eol)+this.eol}printMsidSemantic(U){if(!U)return"";let Z="a=msid-semantic:".concat(U.semantic);return U.applyForAll?Z+="".concat(m,"*"):U.identifierList.length>0&&(Z+=U.identifierList.map(le=>"".concat(m).concat(le))),Z+this.eol}}class Oe extends Pr{print(U){const Z=U.attributes;let le="";return le+=this.printRTCP(Z.rtcp),le+=this.printIceUfrag(Z.iceUfrag),le+=this.printIcePwd(Z.icePwd),le+=this.printIceOptions(Z.iceOptions),le+=this.printCandidates(Z.candidates),le+=this.printRemoteCandidatesList(Z.remoteCandidatesList),le+=this.printEndOfCandidates(Z.endOfCandidates),le+=this.printFingerprints(Z.fingerprints),le+=this.printSetup(Z.setup),le+=this.printMid(Z.mid),le+=this.printExtmap(Z.extmaps),le+=this.printRTPRelated(Z),le+=this.printPtime(Z.ptime),le+=this.printMaxPtime(Z.maxPtime),le+=this.printDirection(Z.direction),le+=this.printSSRCGroups(Z.ssrcGroups),le+=this.printSSRC(Z.ssrcs),le+=this.printRTCPMux(Z.rtcpMux),le+=this.printRTCPMuxOnly(Z.rtcpMuxOnly),le+=this.printRTCPRsize(Z.rtcpRsize),le+=this.printMSId(Z.msids),le+=this.printImageattr(Z.imageattr),le+=this.printRid(Z.rids),le+=this.printSimulcast(Z.simulcast),le+=this.printSCTPPort(Z.sctpPort),le+=this.printMaxMessageSize(Z.maxMessageSize),le+=this.printUnrecognized(Z.unrecognized),le}printCandidates(U){return U.map(Z=>"a=candidate:".concat(Z.foundation).concat(m).concat(Z.componentId).concat(m).concat(Z.transport).concat(m).concat(Z.priority).concat(m).concat(Z.connectionAddress).concat(m).concat(Z.port).concat(m,"typ").concat(m).concat(Z.type).concat(Z.relAddr?"".concat(m,"raddr").concat(m).concat(Z.relAddr):"").concat(Z.relPort?"".concat(m,"rport").concat(m).concat(Z.relPort):"").concat(Object.keys(Z.extension).map(le=>"".concat(m).concat(le).concat(m).concat(Z.extension[le])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(U){return U.map(Z=>"a=remote-candidates:".concat(Z.join(m)).concat(this.eol)).join("")}printEndOfCandidates(U){return U===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(U){if(!U.payloads)return"";const Z=U.payloads;let le="";le+=U.rtcpFeedbackWildcards.map(Be=>this.printRTCPFeedback("*",Be)).join("");for(const Be of Z)le+=this.printRtpMap(Be.payloadType,Be.rtpMap),le+=this.printFmtp(Be.payloadType,Be.fmtp),le+=Be.rtcpFeedbacks.map(zt=>this.printRTCPFeedback(Be.payloadType,zt)).join("");return le}printFmtp(U,Z){if(!Z)return"";const le=Object.keys(Z.parameters);return le.length===1&&Z.parameters[le[0]]===null?"a=fmtp:".concat(U).concat(m).concat(le[0]).concat(this.eol):"a=fmtp:".concat(U).concat(m).concat(Object.keys(Z.parameters).map(Be=>"".concat(Be,"=").concat(Z.parameters[Be])).join(";")).concat(this.eol)}printRtpMap(U,Z){return Z?"a=rtpmap:".concat(U).concat(m).concat(Z.encodingName,"/").concat(Z.clockRate).concat(Z.encodingParameters?"/".concat(Z.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(U,Z){let le="a=rtcp-fb:".concat(U).concat(m),Be=Z;return Be.type==="trr-int"?le+="ttr-int".concat(m).concat(Be.interval):(le+="".concat(Be.type),Be.parameter&&(le+="".concat(m).concat(Be.parameter),Be.additional&&(le+="".concat(m).concat(Be.additional)))),le+this.eol}printPtime(U){return U===void 0?"":"a=ptime:".concat(U).concat(this.eol)}printMaxPtime(U){return U===void 0?"":"a=maxptime:".concat(U).concat(this.eol)}printDirection(U){return U===void 0?"":"a=".concat(U).concat(this.eol)}printSSRC(U){return U.map(Z=>Object.keys(Z.attributes).map(le=>"a=ssrc:".concat(Z.ssrcId.toString(10)).concat(m).concat(le).concat(Z.attributes[le]?":".concat(Z.attributes[le]):"").concat(this.eol)).join("")).join("")}printRTCPMux(U){return U===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(U){return U===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(U){return U===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(U){if(U===void 0)return"";let Z="a=rtcp:".concat(U.port);return U.netType&&(Z+="".concat(m).concat(U.netType)),U.addressType&&(Z+="".concat(m).concat(U.addressType)),U.address&&(Z+="".concat(m).concat(U.address)),Z+this.eol}printMSId(U){return U.map(Z=>"a=msid:".concat(Z.id).concat(Z.appdata?"".concat(m).concat(Z.appdata):"").concat(this.eol)).join("")}printImageattr(U){return U.map(Z=>"a=imageattr:".concat(Z).concat(this.eol)).join("")}printRid(U){return U.map(Z=>{let le="a=rid:".concat(Z.id).concat(m).concat(Z.direction);return Z.payloads&&(le+="".concat(m,"pt=").concat(Z.payloads.join(","))),Z.params.length>0&&(le+="".concat(m).concat(Z.params.map(Be=>Be.type==="depend"?"depend=".concat(Be.rids.join(",")):"".concat(Be.type,"=").concat(Be.val)).join(";"))),le+this.eol}).join("")}printSimulcast(U){return U===void 0?"":"a=simulcast:".concat(U).concat(this.eol)}printSCTPPort(U){return U===void 0?"":"a=sctp-port:".concat(U).concat(this.eol)}printMaxMessageSize(U){return U===void 0?"":"a=max-message-size:".concat(U).concat(this.eol)}printMid(U){return U===void 0?"":"a=mid:".concat(U).concat(this.eol)}printSSRCGroups(U){return U.map(Z=>"a=ssrc-group:".concat(Z.semantic).concat(Z.ssrcIds.map(le=>"".concat(m).concat(le.toString(10))).join("")).concat(this.eol)).join("")}}function He(Ne){return new Xe().parse(Ne)}function ct(Ne,U){return new Vr().print(Ne,U)}}},n={};function i(a){if(n[a])return n[a].exports;var l=n[a]={exports:{}};return t[a](l,l.exports,i),l.exports}return i.d=(a,l)=>{for(var u in l)i.o(l,u)&&!i.o(a,u)&&Object.defineProperty(a,u,{enumerable:!0,get:l[u]})},i.o=(a,l)=>Object.prototype.hasOwnProperty.call(a,l),i.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i(8)})();function sa(t){return F3.parse(t)}function Fu(t,n){return F3.print(t,n)}var The=Ds("Array").keys,Rhe=Qc,whe=sn,Ihe=T,Ahe=The,tI=Array.prototype,Ohe={DOMTokenList:!0,NodeList:!0},xhe=function(t){var n=t.keys;return t===tI||Ihe(tI,t)&&n===tI.keys||whe(Ohe,Rhe(t))?Ahe:n},Va=c(xhe);function U3(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function Zt(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?U3(Object(i),!0).forEach(function(a){Ar(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):U3(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function Ar(t,n,i){return(n=function(a){var l=function(u,h){if(typeof u!="object"||u===null)return u;var p=u[Symbol.toPrimitive];if(p!==void 0){var m=p.call(u,"string");if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}(a);return typeof l=="symbol"?l:String(l)}(n))in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}const B3=new class extends Sr{constructor(){super(...arguments),Ar(this,"currentUploadLogID",0)}reportLogUploadError(t){const{errorRange:n}=t;n[n.length-1]&&n[n.length-1]>this.currentUploadLogID&&(this.currentUploadLogID=n[n.length-1],this.emit("REPORT_LOG_UPLOAD",t))}};class Nhe{constructor(n){Ar(this,"logger",void 0),Ar(this,"prefixLists",[]),this.logger=n}debug(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];this.logger.debug(...this.prefixLists,...i)}info(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];this.logger.info(...this.prefixLists,...i)}warning(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];this.logger.warning(...this.prefixLists,...i)}error(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];this.logger.error(...this.prefixLists,...i)}prefix(n){return this.prefixLists.push(n),this}popPrefix(){return this.prefixLists.pop(),this}}function nI(){const t=new Date;return t.toTimeString().split(" ")[0]+":"+t.getMilliseconds()}function V3(){const t=new Date,n=/((\d+:){2}\d+)/.exec(new Date().toUTCString());return n?(n==null?void 0:n[0])+":"+t.getUTCMilliseconds():t.toTimeString().split(" ")[0]+":"+t.getMilliseconds()}const cs={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},H_=Date.now(),I0=t=>{for(const n in cs)if(Object.prototype.hasOwnProperty.call(cs,n)&&cs[n]===t)return n;return"DEFAULT"},k=new class{constructor(){Ar(this,"proxyServerURL",void 0),Ar(this,"logLevel",cs.DEBUG),Ar(this,"uploadState","collecting"),Ar(this,"uploadLogWaitingList",[]),Ar(this,"uploadLogUploadingList",[]),Ar(this,"uploadErrorCount",0),Ar(this,"currentLogID",0),Ar(this,"url",void 0),Ar(this,"extLog",(t,n)=>{this.appendLogToWaitingList(t,...n)})}debug(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const a=[cs.DEBUG].concat(n);this.log.apply(this,a)}info(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const a=[cs.INFO].concat(n);this.log.apply(this,a)}warning(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const a=[cs.WARNING].concat(n);this.log.apply(this,a)}warn(){this.warning(...arguments)}error(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const a=[cs.ERROR].concat(n);this.log.apply(this,a)}upload(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const a=[cs.DEBUG].concat(n);this.uploadLog.apply(this,a)}setLogLevel(t){t=Math.min(Math.max(0,t),4),this.logLevel=t}enableLogUpload(){Vn("UPLOAD_LOG",!0)}disableLogUpload(){Vn("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(t){this.proxyServerURL=t}prefix(t){return new Nhe(this).prefix(t)}log(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(Date.now()-H_<100)return void setTimeout(()=>{this.log(...n)},Date.now()-H_);const a=Math.max(0,Math.min(4,n[0]));if(n[0]=nI()+" Agora-SDK [".concat(I0(a),"]:"),this.appendLogToWaitingList(a,...n),a<this.logLevel)return;const l=nI()+" %cAgora-SDK [".concat(I0(a),"]:");let u=[];if(!Q("USE_NEW_LOG"))switch(a){case cs.DEBUG:u=[l,"color: #64B5F6;"].concat(n.slice(1)),console.log.apply(console,u);break;case cs.INFO:u=[l,"color: #1E88E5; font-weight: bold;"].concat(n.slice(1)),console.log.apply(console,u);break;case cs.WARNING:u=[l,"color: #FB8C00; font-weight: bold;"].concat(n.slice(1)),console.warn.apply(console,u);break;case cs.ERROR:u=[l,"color: #B00020; font-weight: bold;"].concat(n.slice(1)),console.error.apply(console,u)}}uploadLog(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(Date.now()-H_<100)return void setTimeout(()=>{this.uploadLog(...n)},Date.now()-H_);const a=Math.max(0,Math.min(4,n[0]));n[0]=nI()+" Agora-SDK [".concat(I0(a),"]:"),this.appendLogToWaitingList(a,...n)}appendLogToWaitingList(t){if(!Q("UPLOAD_LOG"))return;for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];Array.isArray(i[0])?i[0][0]=V3()+" Agora-SDK [".concat(I0(t),"]:"):i[0]=V3()+" Agora-SDK [".concat(I0(t),"]:");let l="";i.forEach(u=>{typeof u=="object"&&(u=JSON.stringify(u)),l+="".concat(u," ")}),this.uploadLogWaitingList.push({payload_str:l,log_level:t,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){const t=this.uploadLogUploadingList,n={sdk_version:ss,process_id:Q("PROCESS_ID"),payload:JSON.stringify(t)};return yc(async()=>{const i=await zo.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(Q("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(Q("LOG_UPLOAD_SERVER"),"/upload/v1")),n,{responseType:"text"});if(i.data!=="OK"){const a=new Error("unexpected upload log response");throw a.response=i,a}},()=>(this.uploadLogUploadingList=[],!1),i=>{const a={status:-1,message:i.message,errorRange:t.map(l=>l.log_item_id)};return i.response?(a.status=i.response.status,a.data=i.response.data,a.headers=i.response.headers):i.request&&(a.status=i.request.status),B3.reportLogUploadError(a),!0},{timeout:Q("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:Q("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,Q("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),Q("UPLOAD_LOG_INTERVAL"))}).catch(t=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),Q("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),Q("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}};var j3;function Phe(t){return xi(t.reportId,"params.reportId",0,100,!1),xi(t.category,"params.category",0,100,!1),xi(t.event,"params.event",0,100,!1),xi(t.label,"params.label",0,100,!1),zn(t.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}(j3={}).FREE="free",j3.UPLOADING="uploading",function(t){t[t.MISC=0]="MISC",t[t.INTERNAL_EVENT=1]="INTERNAL_EVENT",t[t.PUBLIC_EVENT=2]="PUBLIC_EVENT",t[t.WEB_EVENT=3]="WEB_EVENT",t[t.INTERNAL_API=4]="INTERNAL_API",t[t.WEB_API=5]="WEB_API",t[t.PUBLIC_API=6]="PUBLIC_API"}({});const Dhe={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let _i=function(t){return t.PUBLISH="publish",t.SUBSCRIBE="subscribe",t.WS_COMPRESSOR_INIT="ws_compressor_init",t.SESSION_INIT="session_init",t.JOIN_CHOOSE_SERVER="join_choose_server",t.REQ_USER_ACCOUNT="req_user_account",t.JOIN_GATEWAY="join_gateway",t.REJOIN_GATEWAY="rejoin_gateway",t.STREAM_SWITCH="stream_switch",t.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",t.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",t.FIRST_VIDEO_RECEIVED="first_video_received",t.FIRST_AUDIO_RECEIVED="first_audio_received",t.FIRST_VIDEO_DECODE="first_video_decode",t.FIRST_AUDIO_DECODE="first_audio_decode",t.ON_ADD_AUDIO_STREAM="on_add_audio_stream",t.ON_ADD_VIDEO_STREAM="on_add_video_stream",t.ON_UPDATE_STREAM="on_update_stream",t.ON_REMOVE_STREAM="on_remove_stream",t.USER_ANALYTICS="req_user_analytics",t.PC_STATS="pc_stats",t.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities",t.AB_TEST="ab_test",t}({}),hr=function(t){return t.SESSION="io.agora.pb.Wrtc.Session",t.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",t.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",t.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",t.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",t.PUBLISH="io.agora.pb.Wrtc.Publish",t.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",t.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",t.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",t.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",t.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",t.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",t.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",t.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",t.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",t.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",t.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",t.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",t.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",t.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",t.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",t.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",t.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",t.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",t.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",t.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",t.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",t.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",t.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",t.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",t.PC_STATS="io.agora.pb.Wrtc.PCStats",t.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities",t.AB_TEST="io.agora.pb.Wrtc.ABTest",t}({});(function(t){t[t.WORKER_EVENT=156]="WORKER_EVENT",t[t.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"})({});let Lhe=function(t){return t[t.SESSION=26]="SESSION",t[t.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",t[t.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",t[t.JOIN_GATEWAY=28]="JOIN_GATEWAY",t[t.PUBLISH=30]="PUBLISH",t[t.SUBSCRIBE=29]="SUBSCRIBE",t[t.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",t[t.STREAM_SWITCH=32]="STREAM_SWITCH",t[t.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",t[t.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",t[t.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",t[t.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",t[t.API_INVOKE=41]="API_INVOKE",t[t.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",t[t.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",t[t.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",t[t.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",t[t.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",t[t.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",t[t.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",t[t.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",t[t.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",t[t.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",t[t.WORKER_EVENT=156]="WORKER_EVENT",t[t.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",t[t.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",t[t.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",t[t.USER_ANALYTICS=1e4]="USER_ANALYTICS",t[t.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED",t}({});function At(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(n,i,a){const l=a.value;if(typeof l=="function"){const u=t.className||n.__className__||(n.constructor.name==="AgoraRTCClient"?"Client":n.constructor.name);a.value=function(){for(var h,p=arguments.length,m=new Array(p),E=0;E<p;E++)m[E]=arguments[E];let y=m;if(t.argsMap)try{y=t.argsMap(this,...m)}catch(A){k.warning(A),y=[]}try{JSON.stringify(y)}catch{k.warning("arguments for method ".concat(u,".").concat(String(i)," not serializable for apiInvoke.")),y=[]}const R=(t.report||dt).reportApiInvoke(this._sessionId||null,{id:this._clientId||((h=this.store)===null||h===void 0?void 0:h.clientId)||this._ID,name:"".concat(u,".").concat(String(i)),options:y,tag:wr.TRACER,reportResult:t.reportResult},t.throttleTime);try{const A=l.apply(this,m);return A instanceof Ye?A.then(D=>(R.onSuccess(t.reportResult&&D),D)).catch(D=>{throw R.onError(D),D}):(R.onSuccess(t.reportResult&&A),A)}catch(A){throw R.onError(A),A}}}return a}}const dt=new class{constructor(){Ar(this,"baseInfoMap",new Map),Ar(this,"proxyServer",void 0),Ar(this,"eventUploadTimer",void 0),Ar(this,"setSessionIdTimer",void 0),Ar(this,"url",void 0),Ar(this,"sids",new Set),Ar(this,"backupUrl",void 0),Ar(this,"_appId",void 0),Ar(this,"_aid",0),Ar(this,"keyEventUploadPendingItems",[]),Ar(this,"normalEventUploadPendingItems",[]),Ar(this,"apiInvokeUploadPendingItems",[]),Ar(this,"apiInvokeCount",0),Ar(this,"apiInvokeLoggedCount",0),Ar(this,"ltsList",[]),Ar(this,"lastSendNormalEventTime",Date.now()),Ar(this,"customReportCounterTimer",void 0),Ar(this,"customReportCount",0),Ar(this,"extApiInvoke",async t=>{for(const n of t){const i=Zt(Zt({},n),{},{sid:null,invokeId:++this.apiInvokeCount,tag:wr.TRACER});this.sendApiInvoke(i)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),Q("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),Q("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(t){return this.baseInfoMap.get(t)}setAppId(t){this._appId=t,this._aid=parseInt(t.replace(/[a-fA-F0-9]{8}/g,n=>{let[i,a]=n;return i+a}),16)||0}reportApiInvoke(t,n,i){n.timeout=n.timeout||6e4,n.reportResult=n.reportResult===void 0||n.reportResult;const a=Date.now();this.apiInvokeCount+=1;const l=this.apiInvokeCount,u=!!Q("SHOW_REPORT_INVOKER_LOG"),h=!!Q("SHOW_REPORT_USER_INVOKER_LOG"),p=u||h&&n.id;p&&(this.apiInvokeLoggedCount+=1);const m=this.apiInvokeLoggedCount;function E(D,H){if(p){let B="[apiInvoke-".concat(m,"]");n.id&&(B+="[".concat(n.id,"]")),n.name&&(B+="[".concat(n.name,"]")),k.info("".concat(B," ").concat(D),D==="start"?n.options:H||"")}}const y=()=>({tag:n.tag,invokeId:l,sid:t,name:n.name,apiInvokeTime:a,options:n.options,states:n.states||null});E("start");let R=!1;Ni(n.timeout).then(()=>{R||(this.sendApiInvoke(Zt(Zt({},y()),{},{error:X.API_INVOKE_TIMEOUT,success:!1})),E("timeout"))});const A=new we(X.UNEXPECTED_ERROR,"".concat(n.name,": this api invoke is end"));return{onSuccess:D=>{const H=()=>{if(R)throw A;return R=!0,this.sendApiInvoke(Zt(Zt({},y()),{},{success:!0},n.reportResult&&{result:D})),E("onSuccess"),D};return i?S3(H,n.name+"Success",i,()=>R=!0):H()},onError:D=>{const H=()=>{if(R)throw D;R=!0,this.sendApiInvoke(Zt(Zt({},y()),{},{success:!1,error:D})),E("onFailure",D.toString())};return i?S3(H,n.name+"Error",i,()=>R=!0):H()}}}sessionInit(t,n){if(this.baseInfoMap.has(t))return;const i=Date.now(),a=this.createBaseInfo(t,i);a.cname=n.cname;const l=Object.assign({},{willUploadConsoleLog:Q("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:Jw?"global":"oversea",areas:Q("AREAS")&&Q("AREAS").join(",")},n.extend),{stringUid:u,channelProfile:h,channelMode:p,isABTestSuccess:m,lsid:E,clientRole:y}=n,R=Date.now(),A=Zt(Zt({},a),{},{eventType:_i.SESSION_INIT,appid:n.appid,browser:navigator.userAgent,buildFormat:n.buildFormat,build:Zw,lts:R,elapse:R-i,extend:JSON.stringify(l),mode:n.mode,process:Q("PROCESS_ID"),appType:Q("APP_TYPE"),success:!0,version:ss,stringUid:u,channelProfile:h,channelMode:p,isABTestSuccess:m,lsid:E,clientType:Ke(D=window.navigator.userAgent).call(D,"AgoraWebView")?42:20,clientRole:y,serviceId:Q("PROCESS_ID"),extensionID:Q("PLUGIN_INFO").join(",")||""});var D;this.send({type:hr.SESSION,data:A},!0)}joinChooseServer(t,n){const i=this.baseInfoMap.get(t);if(!i)return;const a=i.info,l=Date.now(),u=Zt(Zt({},a),{},{role:n.role,eventType:_i.JOIN_CHOOSE_SERVER,lts:l,eventElapse:n.elapse||l-n.lts,chooseServerAddr:n.csAddr,errorCode:n.ec,elapse:l-i.startTime,success:n.succ,chooseServerAddrList:JSON.stringify(n.serverList),uid:n.uid?parseInt(n.uid):null,cid:n.cid?parseInt(n.cid):null,chooseServerIp:n.csIp||"",opid:n.opid,unilbsServerIds:n.unilbsServerIds,extend:n.extend||void 0,isHttp3:n.isHttp3,corssRegionTagReq:n.corssRegionTagReq||void 0,corssRegionTagRes:n.corssRegionTagRes||void 0});this.send({type:hr.JOIN_CHOOSE_SERVER,data:u},!0)}reqUserAccount(t,n){const i=this.baseInfoMap.get(t);if(!i)return;const a=i.info,l=Date.now(),u=Zt(Zt({},a),{},{eventType:_i.REQ_USER_ACCOUNT,lts:l,success:n.success,serverAddress:n.serverAddr,stringUid:n.stringUid,uid:n.uid,errorCode:n.errorCode,elapse:n.elapse||l-i.startTime,eventElapse:l-n.lts,extend:JSON.stringify(n.extend)});this.send({type:hr.REQ_USER_ACCOUNT,data:u},!0)}joinGateway(t,n){const i=this.baseInfoMap.get(t);if(!i)return;const a=i.info;n.vid&&(a.vid=n.vid),a.uid=n.uid,a.cid=n.cid;const l=Date.now(),{firstSuccess:u,avoidJoinStartTime:h,addr:p,isProxy:m}=n,E=l-(u&&h?h:i.startTime),y=Zt(Zt({},a),{},{eventType:_i.JOIN_GATEWAY,lts:l,gatewayAddr:n.addr,success:n.succ,errorCode:n.ec,errorMsg:n.errorMsg||"",elapse:E,eventElapse:l-n.lts,firstSuccess:u,signalChannel:n.signalChannel,preload:n.preload?1:0,installId:Xw(),isABTestSuccess:n.isABTestSuccess?1:0}),R=y.success?1:0;if(n.succ&&(i.lastJoinSuccessTime=l),u)this.send({type:hr.JOIN_GATEWAY,data:y},!0);else{let A;if(p)if(m){const H=p.match(/h=(\d{1,3}-){3}\d{1,3}/g),B=p.match(/p=[0-9]{1,6}/g);A={isSuccess:R,gatewayIp:H&&H.length?H[0].split("=")[1].replace(/-/g,"."):"",port:B&&B.length?B[0].split("=")[1]:"",isProxy:m?1:0}}else{const H=p.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),B=p.match(/(:|p=)[0-9]{1,6}/g);A={isSuccess:R,gatewayIp:H&&H.length?H[0].split("//")[1].replace(/-/g,"."):"",port:B&&B.length?B[0].split(/:|p=/g)[1]:"",isProxy:m?1:0}}else A={isSuccess:R,gatewayIp:"",port:"",isProxy:m?1:0};delete y.success,delete y.eventType,delete y.firstSuccess,y.vid=Number(y.vid);const D=Object.assign({},y,A,{eventType:_i.REJOIN_GATEWAY});this.send({type:hr.RE_JOIN_GATEWAY,data:D},!0)}}joinChannelTimeout(t,n){const i=this.baseInfoMap.get(t);if(!i)return;const a=Date.now(),l=Zt(Zt({},i.info),{},{lts:a,timeout:n,elapse:a-i.startTime});this.send({type:hr.JOIN_CHANNEL_TIMEOUT,data:l},!0)}publish(t,n){const i=this.baseInfoMap.get(t);if(!i)return;const a=i.info,l=Date.now(),u=Zt(Zt({},a),{},{eventType:_i.PUBLISH,lts:l,eventElapse:n.eventElapse,elapse:l-i.startTime,success:n.succ,errorCode:n.ec,videoName:n.videoName,audioName:n.audioName,screenName:n.screenName,screenshare:n.screenshare,audio:n.audio,video:n.video,p2pid:n.p2pid,publishRequestid:n.publishRequestid});this.send({type:hr.PUBLISH,data:u},!0)}subscribe(t,n,i){const a=this.baseInfoMap.get(t);if(!a)return;const l=a.info,u=Date.now(),h=Zt(Zt({},l),{},{eventType:_i.SUBSCRIBE,lts:u,eventElapse:n.eventElapse,elapse:u-a.startTime,success:n.succ,errorCode:n.ec,video:n.video,audio:n.audio,subscribeRequestid:n.subscribeRequestid,p2pid:n.p2pid,preSsrc:n.preSsrc?1:0},i&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof n.peerid=="string"?h.peerSuid=n.peerid:h.peer=n.peerid,this.send({type:hr.SUBSCRIBE,data:h},!0)}wsCompressorInit(t){var n;const i=[...Va(n=this.baseInfoMap).call(n)],a=i.length?i[0]:"UnableToGetSid",l=this.baseInfoMap.get(a);if(!l)return;const u=l.info,h=Date.now(),p=Zt(Zt({},u),{},{eventType:_i.WS_COMPRESSOR_INIT,lts:h,eventElapse:t.eventElapse,elapse:h-l.startTime,status:t.status?1:2});this.send({type:hr.WS_COMPRESSOR_INIT,data:p},!0)}firstRemoteVideoDecode(t,n,i,a){const l=this.baseInfoMap.get(t);if(!l)return;const u=l.info,h=Date.now(),p=Zt(Zt(Zt({},u),a),{},{elapse:h-l.startTime,eventType:n,lts:h,firstDecodeFrame:Math.max((a.firstFrame||h)-l.startTime,0),apEnd:Math.max(a.apEnd-l.startTime,0),apStart:Math.max(a.apStart-l.startTime,0),joinGwEnd:Math.max(a.joinGwEnd-l.startTime,0),joinGwStart:Math.max(a.joinGwStart-l.startTime,0),pcEnd:Math.max(a.pcEnd-l.startTime,0),pcStart:Math.max(a.pcStart-l.startTime,0),subscriberEnd:Math.max(a.subscriberEnd-l.startTime,0),subscriberStart:Math.max(a.subscriberStart-l.startTime,0),videoAddNotify:Math.max(a.videoAddNotify-l.startTime,0)});this.send({type:i,data:p},!0)}firstRemoteFrame(t,n,i,a){const l=this.baseInfoMap.get(t);if(!l)return;const u=l.info,h=Date.now(),p=Zt(Zt(Zt({},u),a),{},{elapse:h-l.startTime,eventType:n,lts:h});this.send({type:i,data:p},!0)}abTest(t,n){const i=this.baseInfoMap.get(t);if(!i)return;const a=i.info,l=Date.now(),u=Zt(Zt(Zt({},a),n),{},{vid:a.vid===void 0?0:Number(a.vid),elapse:l-i.startTime,eventType:_i.AB_TEST,lts:l});this.send({type:hr.AB_TEST,data:u},!0)}pcStats(t,n){const i=this.baseInfoMap.get(t);if(!i)return;const a=i.info,l=Date.now(),u=Zt(Zt(Zt({},a),n),{},{vid:a.vid===void 0?0:Number(a.vid),elapse:l-i.startTime,eventType:_i.PC_STATS,lts:l,preallocation:n.preallocation?1:0});this.send({type:hr.PC_STATS,data:u},!0)}updateRemoteRTPCapabilities(t,n){if(t){const i=this.baseInfoMap.get(t);if(!i)return;const a=i.info,l=Date.now(),u=Zt(Zt(Zt({},a),n),{},{vid:a.vid===void 0?0:Number(a.vid),eventType:_i.UPDATE_REMOTE_RTPCAPABILITIES,lts:l});this.send({type:hr.UPDATE_REMOTE_RTPCAPABILITIES,data:u},!0)}}onGatewayStream(t,n,i,a){const l=this.baseInfoMap.get(t);if(!l)return;const u=l.info,h=Date.now(),p=Zt(Zt(Zt({},u),a),{},{eventType:n,lts:h});this.send({type:i,data:p},!0)}streamSwitch(t,n){const i=this.baseInfoMap.get(t);if(!i)return;const a=i.info,l=Date.now(),u=Zt(Zt({},a),{},{eventType:_i.STREAM_SWITCH,lts:l,isDual:n.isdual,elapse:l-i.startTime,success:n.succ});this.send({type:hr.STREAM_SWITCH,data:u},!0)}requestProxyAppCenter(t,n){const i=this.baseInfoMap.get(t);if(!i)return;const a=i.info,l=Date.now(),u=Zt(Zt({},a),{},{eventType:_i.REQUEST_PROXY_APPCENTER,lts:l,eventElapse:l-n.lts,elapse:l-i.startTime,APAddr:n.APAddr,workerManagerList:n.workerManagerList,response:n.response,errorCode:n.ec,success:n.succ});this.send({type:hr.REQUEST_PROXY_APPCENTER,data:u},!0)}requestProxyWorkerManager(t,n){const i=this.baseInfoMap.get(t);if(!i)return;const a=i.info,l=Date.now(),u=Zt(Zt({},a),{},{eventType:_i.REQUEST_PROXY_WORKER_MANAGER,lts:l,eventElapse:l-n.lts,elapse:l-i.startTime,workerManagerAddr:n.workerManagerAddr,response:n.response,errorCode:n.ec,success:n.succ});this.send({type:hr.REQUEST_PROXY_WORKER_MANAGER,data:u},!0)}setProxyServer(t){this.proxyServer=t,t?k.debug("reportProxyServerurl: ".concat(t)):k.debug("disable reportProxyServerurl: ".concat(t))}peerPublishStatus(t,n){const i=this.baseInfoMap.get(t);if(!i)return;const a=i.info,l=Date.now(),u=Zt(Zt({},a),{},{subscribeElapse:n.subscribeElapse,peer:n.peer,peerPublishDuration:Math.max(n.audioPublishDuration,n.videoPublishDuration),audiotag:n.audioPublishDuration>0?1:-1,videotag:n.videoPublishDuration>0?1:-1,lts:l,elapse:l-i.startTime,joinChannelSuccessElapse:l-(i.lastJoinSuccessTime||l),peerPublishDurationVideo:n.videoPublishDuration,peerPublishDurationAudio:n.audioPublishDuration});this.send({type:hr.PEER_PUBLISH_STATUS,data:u},!0)}workerEvent(t,n){const i=this.baseInfoMap.get(t);if(!i)return;const a=i.info,l=Date.now();(function(u,h,p){const m=u[h];if(!m||typeof m!="string")return[u];u[h]="";const E=ol(JSON.stringify(u));let y=0;const R=[];let A=0;for(let D=0;D<m.length;D++)A+=m.charCodeAt(D)<=127?1:3,A<=p-E||(R[R.length]=rt(rt({},u),{},{[h]:m.substring(y,D)}),y=D,A=m.charCodeAt(D)<=127?1:3);return y!==m.length-1&&(R[R.length]=rt(rt({},u),{},{[h]:m.substring(y)})),R})(Zt(Zt(Zt({},a),n),{},{elapse:l-i.startTime,lts:l,productType:"WebRTC"}),"payload",1300).forEach(u=>this.send({type:hr.WORKER_EVENT,data:u},!0))}apworkerEvent(t,n){const i=this.baseInfoMap.get(t);if(!i)return;const a=i.info,l=Date.now(),u=Zt(Zt(Zt({},a),n),{},{elapse:l-i.startTime,lts:l});this.send({type:hr.AP_WORKER_EVENT,data:u},!0)}joinWebProxyAP(t,n){const i=this.baseInfoMap.get(t);if(!i)return;const a=i.info,l=Date.now(),u=Zt(Zt(Zt({},a),n),{},{elapse:l-i.startTime,lts:l,extend:n.extend||void 0});this.send({type:hr.JOIN_WEB_PROXY_AP,data:u},!0)}WebSocketQuit(t,n){const i=this.baseInfoMap.get(t);if(!i)return;const a=i.info,l=Date.now(),u=Zt(Zt(Zt({},a),n),{},{elapse:l-i.startTime,lts:l});this.send({type:hr.WEBSOCKET_QUIT,data:u},!0)}async sendCustomReportMessage(t,n){if(this.customReportCount+=n.length,this.customReportCount>Q("CUSTOM_REPORT_LIMIT"))throw new we(X.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const i=Date.now(),a=n.map(l=>({type:hr.USER_ANALYTICS,data:Zt(Zt({sid:t},l),{},{lts:i})}));try{Q("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(a):await this.postDataToStatsCollector(a)}catch(l){throw k.error("send custom report message failed",l.toString()),new we(X.CUSTOM_REPORT_SEND_FAILED,l.message)}}sendApiInvoke(t){const n=Q("NOT_REPORT_EVENT");if(t.tag&&Ke(n)&&Ke(n).call(n,t.tag))return!1;if(t.sid===null)return this.apiInvokeUploadPendingItems.push(t),!1;const i=this.baseInfoMap.get(t.sid);if(!i)return this.apiInvokeUploadPendingItems.push(t),!1;const{cname:a,uid:l,cid:u}=i.info;let h;if(t.lts=t.lts||Date.now(),t.error)if(t.error instanceof we){const{code:m,message:E}=t.error;h=m||E||t.error.toString()}else h=t.error.toString();const p={invokeId:t.invokeId,sid:t.sid,cname:a,cid:u,uid:l,lts:t.lts,success:t.success,elapse:t.lts-i.startTime,execElapse:t.lts-t.apiInvokeTime,apiName:t.name,options:t.options?JSON.stringify(t.options):void 0,execStates:t.states?JSON.stringify(t.states):void 0,execResult:t.result?JSON.stringify(t.result):void 0,errorCode:t.error?h:void 0,errorMsg:t.error?JSON.stringify(t.error):void 0};return this.send({type:hr.API_INVOKE,data:p},!1),!0}addSid(t){this.sids.add(t)}removeSid(t){this.sids.delete(t)}appendSessionId(){const t=this.apiInvokeUploadPendingItems;if(t.length===0)return;const n=Array.from(this.sids).find(i=>i!==null);n&&t.forEach(i=>{i&&(i.sid=n,this.sendApiInvoke(Object.assign({},i)))}),t.length=0}send(t,n){if(n)return this.keyEventUploadPendingItems.push(t),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(t),this.normalEventUploadPendingItems.length>Q("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(t,n){const i=[],a=[];for(;t.length;){const u=t.shift();i.length<20?i.push(u):a.push(u)}t.push(...a);for(const u of[...i]){var l;this.ltsList.indexOf(u.data.lts)!==-1?(u.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(u.data.lts)):(this.ltsList.push(u.data.lts),a0(l=this.ltsList).call(l,(h,p)=>h-p))}return n||(this.lastSendNormalEventTime=Date.now()),Q("ENABLE_EVENT_REPORT")&&i.length&&(Q("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(i):this.postDataToStatsCollector(i)).catch((u=>h=>{Q("EVENT_REPORT_RETRY")&&(n?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(u):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(u),this.normalEventUploadPendingItems.length>Q("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-Q("NORMAL_EVENT_QUEUE_CAPACITY")),k.warning("report: drop normal events"))))})(i)),t}async postDataToStatsCollector2(t){Hr.networkState===Ta.OFFLINE&&await Ye.race([Hr.onlineWaiter,Ni(2*ti.maxRetryTimeout)]);const n=l=>{let u=new Uint8Array;return l.forEach(h=>{const p=Uw(JSON.stringify(h.data)),m=new ArrayBuffer(5),E=(R=>{let A=0;return Object.entries(hr).forEach(D=>{let[H,B]=D;B===R.type&&(A=Lhe[H])}),A})(h),y=new DataView(m);y.setUint16(0,p.byteLength,!0),y.setUint8(2,255&E),y.setUint8(3,E>>>8&255),y.setUint8(4,E>>>16&255),u=d3(u,new Uint8Array(m)),u=d3(u,p)}),u},i="event";let a=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(Q("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(i):"https://".concat(Q("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(i);for(let l=0;l<2;l+=1){l===1&&(a=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(Q("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(i):"https://".concat(Q("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(i));try{await Ww(a,{timeout:1e4,data:n(t),headers:Zt(Zt({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(u){if(l===1)throw u;continue}return}}async postDataToStatsCollector(t){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=(p=>{const m=p&&p.data.sid&&this.baseInfoMap.get(p.data.sid);return m&&m.info.vid&&+m.info.vid||0})(t[0]),a=i?void 0:this._aid,l={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:t.map(p=>JSON.stringify(p)),vid:i,aid:a};Hr.networkState===Ta.OFFLINE&&await Ye.race([Hr.onlineWaiter,Ni(2*ti.maxRetryTimeout)]);const u=n?"/events/proto-raws":"/events/messages";let h=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(Q("EVENT_REPORT_DOMAIN"),"&p=").concat(Q("STATS_COLLECTOR_PORT"),"&d=").concat(u):"https://".concat(Q("EVENT_REPORT_DOMAIN"),":").concat(Q("STATS_COLLECTOR_PORT")).concat(u));for(let p=0;p<2;p+=1){p===1&&(h=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(Q("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(Q("STATS_COLLECTOR_PORT"),"&d=").concat(u):"https://".concat(Q("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(Q("STATS_COLLECTOR_PORT")).concat(u)));try{n?await _he(h,{timeout:1e4,data:l}):await Ww(h,{timeout:1e4,data:l})}catch(m){if(p===1)throw m;continue}return}}createBaseInfo(t,n){const i=Object.assign({},Dhe);return i.sid=t,this.baseInfoMap.set(t,{info:i,startTime:n}),i}reportResourceTiming(t,n){const i=performance.getEntriesByName(t),a=i[i.length-1];a&&this.reportApiInvoke(n,{name:"Client.resourceTiming",options:a,tag:wr.TRACER}).onSuccess()}};B3.on("REPORT_LOG_UPLOAD",t=>{t.networkState=Hr.networkState,dt.reportApiInvoke(null,{name:"logUploadError",options:t,tag:wr.TRACER}).onSuccess("logUploadError")});class ye extends we{constructor(n){super(n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",arguments.length>2?arguments[2]:void 0),Ar(this,"name","AgoraRTCException")}print(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return super.print(n,k)}throw(){super.throw(k)}}const Pi={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1,supportRequestVideoFrameCallback:!1,supportWebCrypto:!1};function yn(){return Pi}function $3(){return"setSinkId"in HTMLAudioElement.prototype&&(!Q("RESTRICTION_SET_PLAYBACK_DEVICE")||($l()||ZB())&&!kw())}function H3(){return!Pi.supportUnifiedPlan||Q("CHROME_FORCE_PLAN_B")&&Hl()}let Di=function(t){return t.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",t.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",t.IOS_INTERRUPTION_START="ios-interruption-start",t.IOS_INTERRUPTION_END="ios-interruption-end",t.STATE_CHANGE="state-change",t}({});function Wf(t,n,i){return{sampleRate:t,stereo:n,bitrate:i}}function _n(t,n,i,a,l){return{width:t,height:n,frameRate:i,bitrateMin:a,bitrateMax:l}}function $s(t,n,i,a,l){return{width:{max:t},height:{max:n},frameRate:i,bitrateMin:a,bitrateMax:l}}function rI(t,n){return{numSpatialLayers:t,numTemporalLayers:n}}const khe={"90p":_n(160,90),"90p_1":_n(160,90),"120p":_n(160,120,15,30,65),"120p_1":_n(160,120,15,30,65),"120p_3":_n(120,120,15,30,50),"120p_4":_n(212,120),"180p":_n(320,180,15,30,140),"180p_1":_n(320,180,15,30,140),"180p_3":_n(180,180,15,30,100),"180p_4":_n(240,180,15,30,120),"240p":_n(320,240,15,40,200),"240p_1":_n(320,240,15,40,200),"240p_3":_n(240,240,15,40,140),"240p_4":_n(424,240,15,40,220),"360p":_n(640,360,15,80,400),"360p_1":_n(640,360,15,80,400),"360p_3":_n(360,360,15,80,260),"360p_4":_n(640,360,30,80,600),"360p_6":_n(360,360,30,80,400),"360p_7":_n(480,360,15,80,320),"360p_8":_n(480,360,30,80,490),"360p_9":_n(640,360,15,80,800),"360p_10":_n(640,360,24,80,800),"360p_11":_n(640,360,24,80,1e3),"480p":_n(640,480,15,100,500),"480p_1":_n(640,480,15,100,500),"480p_2":_n(640,480,30,100,1e3),"480p_3":_n(480,480,15,100,400),"480p_4":_n(640,480,30,100,750),"480p_6":_n(480,480,30,100,600),"480p_8":_n(848,480,15,100,610),"480p_9":_n(848,480,30,100,930),"480p_10":_n(640,480,10,100,400),"720p":_n(1280,720,15,120,1130),"720p_auto":_n(1280,720,30,900,3e3),"720p_1":_n(1280,720,15,120,1130),"720p_2":_n(1280,720,30,120,2e3),"720p_3":_n(1280,720,30,120,1710),"720p_5":_n(960,720,15,120,910),"720p_6":_n(960,720,30,120,1380),"1080p":_n(1920,1080,15,120,2080),"1080p_1":_n(1920,1080,15,120,2080),"1080p_2":_n(1920,1080,30,120,3e3),"1080p_3":_n(1920,1080,30,120,3150),"1080p_5":_n(1920,1080,60,120,4780),"1440p":_n(2560,1440,30,120,4850),"1440p_1":_n(2560,1440,30,120,4850),"1440p_2":_n(2560,1440,60,120,7350),"4k":_n(3840,2160,30,120,8910),"4k_1":_n(3840,2160,30,120,8910),"4k_3":_n(3840,2160,60,120,13500)},Mhe={"480p":$s(640,480,5),"480p_1":$s(640,480,5),"480p_2":$s(640,480,30),"480p_3":$s(640,480,15),"720p":$s(1280,720,5),"720p_auto":_n(1280,720,30,900,3e3),"720p_1":$s(1280,720,5),"720p_2":$s(1280,720,30),"720p_3":$s(1280,720,15),"1080p":$s(1920,1080,5),"1080p_1":$s(1920,1080,5),"1080p_2":$s(1920,1080,30),"1080p_3":$s(1920,1080,15)},Fhe={"1SL1TL":rI(1,1),"3SL3TL":rI(3,3),"2SL3TL":rI(2,3)};function sl(t){return t||(t="480p_1"),typeof t=="string"?Object.assign({},khe[t]):t}function iI(t){return typeof t=="string"?Object.assign({},Mhe[t]):t}function z_(t){return typeof t=="string"?Object.assign({},Fhe[t]):t}const Uhe={speech_low_quality:Wf(16e3,!1),speech_standard:Wf(32e3,!1,18),music_standard:Wf(48e3,!1),standard_stereo:Wf(48e3,!0,56),high_quality:Wf(48e3,!1,128),high_quality_stereo:Wf(48e3,!0,192)};function W_(t){return typeof t=="string"?Object.assign({},Uhe[t]):t}const Gf=[];function z3(t){return mi(t,"mediaSource",["screen","window","application"]),!0}let at=function(t){return t.NEED_RENEGOTIATE="@need_renegotiate",t.NEED_REPLACE_TRACK="@need_replace_track",t.NEED_REPLACE_MIXING_TRACK="@need_replace_mixing_track",t.NEED_CLOSE="@need_close",t.NEED_ENABLE_TRACK="@need_enable_track",t.NEED_DISABLE_TRACK="@need_disable_track",t.NEED_SESSION_ID="@need_sid",t.SET_OPTIMIZATION_MODE="@set_optimization_mode",t.GET_STATS="@get_stats",t.GET_RTC_STATS="@get_rtc_stats",t.GET_LOW_VIDEO_TRACK="@get_low_video_track",t.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",t.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",t.NEED_UPDATE_VIDEO_SEND_PARAMETERS="@need_update_video_send_parameters",t.NEED_MUTE_TRACK="@need_mute_track",t.NEED_UNMUTE_TRACK="@need_unmute_track",t}({}),Jn=function(t){return t.SCREEN_TRACK="screen_track",t.CUSTOM_TRACK="custome_track",t.LOW_STREAM="low_stream",t.SCREEN_LOW_TRACK="screen_low_track",t}({}),Kf=function(t){return t[t.HIGH_STREAM=0]="HIGH_STREAM",t[t.LOW_STREAM=1]="LOW_STREAM",t}({}),Bhe=function(t){return t[t.HIGH_STREAM=0]="HIGH_STREAM",t[t.LOW_STREAM=1]="LOW_STREAM",t[t.HIGH_STREAM_LAYER1=4]="HIGH_STREAM_LAYER1",t[t.HIGH_STREAM_LAYER2=5]="HIGH_STREAM_LAYER2",t[t.HIGH_STREAM_LAYER3=6]="HIGH_STREAM_LAYER3",t[t.HIGH_STREAM_LAYER4=7]="HIGH_STREAM_LAYER4",t[t.HIGH_STREAM_LAYER5=8]="HIGH_STREAM_LAYER5",t[t.HIGH_STREAM_LAYER6=9]="HIGH_STREAM_LAYER6",t}({}),Vhe=function(t){return t[t.DISABLE=0]="DISABLE",t[t.LOW_STREAM=1]="LOW_STREAM",t[t.AUDIO_ONLY=2]="AUDIO_ONLY",t[t.HIGH_STREAM_LAYER1=3]="HIGH_STREAM_LAYER1",t[t.HIGH_STREAM_LAYER2=4]="HIGH_STREAM_LAYER2",t[t.HIGH_STREAM_LAYER3=5]="HIGH_STREAM_LAYER3",t[t.HIGH_STREAM_LAYER4=6]="HIGH_STREAM_LAYER4",t[t.HIGH_STREAM_LAYER5=7]="HIGH_STREAM_LAYER5",t[t.HIGH_STREAM_LAYER6=8]="HIGH_STREAM_LAYER6",t}({}),Qd=function(t){return t.TRANSCEIVER_UPDATED="transceiver-updated",t.SEI_TO_SEND="sei-to-send",t.SEI_RECEIVED="sei-received",t.TRACK_UPDATED="track-updated",t}({}),qf=function(t){return t.SOURCE_STATE_CHANGE="source-state-change",t.TRACK_ENDED="track-ended",t.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",t.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",t.CLOSED="closed",t}({}),Yf=function(t){return t.FIRST_FRAME_DECODED="first-frame-decoded",t.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",t.VIDEO_STATE_CHANGED="video-state-changed",t}({}),Xf=function(t){return t.AUDIO="audio",t.VIDEO="video",t.DATA="data",t}({}),ja=function(t){return t.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",t.RECEIVE_TRACK_BUFFER="receive_track_buffer",t.ON_AUDIO_BUFFER="on_audio_buffer",t.UPDATE_SOURCE="update_source",t}({});(function(t){t.UPDATE_TRACK_SOURCE="update-track-source"})({});const oI={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},aI={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},W3={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receivePacketsDiscarded:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},jhe={uplinkNetworkQuality:0,downlinkNetworkQuality:0},G3={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let Oo=function(t){return t.ON_TRACK="on_track",t.ON_NODE="on_node",t}({}),$a=function(t){return t.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",t.REQUEST_CONSTRAINTS="request_constraints",t}({}),A0=function(t){return t.IDLE="IDLE",t.INITING="INITING",t.INITEND="INITEND",t}({}),Zd=function(t){return t.STATE_CHANGE="state_change",t.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",t.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",t.CAMERA_DEVICE_CHANGED="cameraDeviceChanged",t}({}),go=function(t){return t.NONE="none",t.INIT="init",t.CANPLAY="canplay",t.PLAYING="playing",t.PAUSED="paused",t.SUSPEND="suspend",t.STALLED="stalled",t.WAITING="waiting",t.ERROR="error",t.DESTROYED="destroyed",t.ABORT="abort",t.ENDED="ended",t.EMPTIED="emptied",t.LOADEDDATA="loadeddata",t}({}),cl=function(t){return t[t.VideoStateStopped=0]="VideoStateStopped",t[t.VideoStateStarting=1]="VideoStateStarting",t[t.VideoStateDecoding=2]="VideoStateDecoding",t[t.VideoStateFrozen=3]="VideoStateFrozen",t}({});const sI={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};let G_=function(t){return t.OPEN="open",t.MESSAGE="message",t.CLOSE="close",t.CLOSING="closing",t.ERROR="error",t}({});function K3(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function fr(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?K3(Object(i),!0).forEach(function(a){Se(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):K3(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function Se(t,n,i){return(n=function(a){var l=function(u,h){if(typeof u!="object"||u===null)return u;var p=u[Symbol.toPrimitive];if(p!==void 0){var m=p.call(u,"string");if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}(a);return typeof l=="symbol"?l:String(l)}(n))in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function Sn(t,n,i,a,l){var u,h,p={};return Object.keys(a).forEach(function(m){p[m]=a[m]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=pc(u=FL(h=i.slice()).call(h)).call(u,function(m,E){return E(t,n,m)||m},p),l&&p.initializer!==void 0&&(p.value=p.initializer?p.initializer.call(l):void 0,p.initializer=void 0),p.initializer===void 0&&(Object.defineProperty(t,n,p),p=null),p}class q3 extends Sr{set _mediaStreamTrack(n){n!==this.mediaStreamTrack&&(this.safeEmit(Qd.TRACK_UPDATED,n),this.mediaStreamTrack=n)}get _mediaStreamTrack(){return this.mediaStreamTrack}constructor(n,i){super(),Se(this,"trackMediaType",void 0),Se(this,"_ID",void 0),Se(this,"_rtpTransceiver",void 0),Se(this,"_lowRtpTransceiver",void 0),Se(this,"_hints",[]),Se(this,"_isClosed",!1),Se(this,"_originMediaStreamTrack",void 0),Se(this,"mediaStreamTrack",void 0),Se(this,"_external",{}),this._ID=i||Xn(8,"track-"),this._originMediaStreamTrack=n,this.mediaStreamTrack=n,function(a){Ke(Gf).call(Gf,a)||Gf.push(a)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(n){return n||ku(()=>{var i;dt.reportApiInvoke(null,{name:ei.GET_MEDIA_STREAM_TRACK,options:[],tag:wr.TRACER}).onSuccess(((i=this._mediaStreamTrack)===null||i===void 0?void 0:i.label)||"")},this.mediaStreamTrack.id||this.getTrackId()),this._mediaStreamTrack}getRTCRtpTransceiver(n){return n===Kf.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(n){const i=Gf.indexOf(n);i!==-1&&Gf.splice(i,1)}(this),this.emit(qf.CLOSED),this.removeAllListeners(Qd.SEI_RECEIVED)}_updateRtpTransceiver(n,i){if(i===Kf.LOW_STREAM){if(this._lowRtpTransceiver===n)return;this._lowRtpTransceiver=n}else{if(this._rtpTransceiver===n)return;this._rtpTransceiver=n}this.emit(Qd.TRANSCEIVER_UPDATED,n,i)}}class Jf extends q3{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(n,i){super(n,i),Se(this,"_enabled",!0),Se(this,"_muted",!1),Se(this,"_isExternalTrack",!1),Se(this,"_isClosed",!1),Se(this,"_enabledMutex",void 0),Se(this,"processor",void 0),Se(this,"_processorContext",void 0),Se(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new Ji("".concat(this.getTrackId())),n.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var n,i;return(n=(i=this._originMediaStreamTrack)===null||i===void 0?void 0:i.label)!==null&&n!==void 0?n:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,k.debug("[".concat(this.getTrackId(),"] close")),this.emit(at.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(n,i){let a=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this._isExternalTrack=a,n!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),i&&this._originMediaStreamTrack.stop()),n.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=n,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Yn(this,at.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){k.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(qf.TRACK_ENDED)}stateCheck(n,i){if(k.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(n,": ").concat(i,"]")),zl(i,n),this._enabled&&this._muted&&n==="enabled"&&i===!1)throw new we(X.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",k);if(!this._enabled&&!this._muted&&n==="muted"&&i===!0)throw new we(X.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",k)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():Ye.resolve([])}}const Y3=window.AudioContext||window.webkitAudioContext;let Ha=null;const jn=new class extends Sr{constructor(){super(...arguments),Se(this,"prevState",void 0),Se(this,"curState",void 0),Se(this,"currentTime",void 0),Se(this,"currentTimeStuckAt",void 0),Se(this,"interruptDetectorTrack",void 0),Se(this,"onLocalAudioTrackMute",()=>{k.info("ios15-interruption-start"),this.emit(Di.IOS_15_16_INTERRUPTION_START)}),Se(this,"onLocalAudioTrackUnmute",async()=>{k.info("ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?k.info("ios15-interruption-end-canceled"):(Ha&&await Ha.suspend(),this.emit(Di.IOS_15_16_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(t){k.debug("webaudio bindInterruptDetectorTrack ".concat(t.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=t,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(t){k.debug("webaudio unbindInterruptDetectorTrack ".concat(t.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===t&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function Qf(){if(!Ha){if(function(){if(!Y3)return void k.error("your browser is not support web audio");k.info("create audio context");const t=fr({},Q("WEBAUDIO_INIT_OPTIONS"));k.debug("audio context init option:",JSON.stringify(t)),Ha=new Y3(t),jn.curState=Ha.state,Ha.onstatechange=()=>{jn.prevState=jn.curState,jn.curState=Ha?Ha.state:void 0;const{prevState:n,curState:i}=jn,a=i==="running",l=i==="interrupted",u=n==="running",h=n==="suspended",p=n==="interrupted",m=En().osVersion;(Ao()||Vs())&&u&&l&&(k.info("ios".concat(m,"-interruption-start")),jn.emit(Di.IOS_INTERRUPTION_START)),(Ao()||Vs())&&(h||p)&&a&&(k.info("ios".concat(m,"-interruption-end")),jn.emit(Di.IOS_INTERRUPTION_END)),n!==i&&jn.emit(Di.STATE_CHANGE,i,n)},setInterval(()=>{var n;const i=(n=Ha)===null||n===void 0?void 0:n.currentTime;jn.currentTime!==i?(jn.currentTimeStuckAt&&(k.debug("AudioContext current time resume at ".concat(i)),jn.currentTimeStuckAt=void 0),jn.currentTime=i):(i!==jn.currentTimeStuckAt&&(dt.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:i},tag:wr.TRACER}).onSuccess(),k.warning("AudioContext current time stuck at ".concat(i))),jn.currentTimeStuckAt=i)},5e3),async function(n){const i=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let a,l=!1,u=!1,h=!1;function p(B){n.state==="running"?m(!1):Ao()||Vs()?n.state==="suspended"&&(m(!0),B&&n.resume().then(E,E)):n.state!=="closed"&&(m(!0),B&&n.resume().then(E,E))}function m(B){if(l!==B){l=B;for(let $=0,K=i;$<K.length;$+=1){const Y=K[$];B?window.addEventListener(Y,y,{capture:!0,passive:!0}):window.removeEventListener(Y,y,{capture:!0,passive:!0})}}}function E(){p(!1)}function y(){p(!0)}function R(B){if(!h)if(a.paused)if(B){let $;A(!1),h=!0;try{$=a.play(),$?$.then(D,D):(a.addEventListener("playing",D),a.addEventListener("abort",D),a.addEventListener("error",D))}catch{D()}}else A(!0);else A(!1)}function A(B){if(u!==B){u=B;for(let $=0,K=i;$<K.length;$++){const Y=K[$];B?window.addEventListener(Y,H,{capture:!0,passive:!0}):window.removeEventListener(Y,H,{capture:!0,passive:!0})}}}function D(){a.removeEventListener("playing",D),a.removeEventListener("abort",D),a.removeEventListener("error",D),h=!1,R(!1)}function H(){R(!0)}if(Ao()){const B=n.createMediaStreamDestination(),$=document.createElement("div");$.innerHTML="<audio x-webkit-airplay='deny'></audio>",a=$.children.item(0),a.controls=!1,a.disableRemotePlayback=!0,a.preload="auto",a.srcObject=B.stream,R(!0)}jn.on(Di.STATE_CHANGE,function(){p(!0)}),p(!1)}(Ha)}(),!Ha)throw new we(X.NOT_SUPPORTED,"can not create audio context");return Ha}return Ha}function eh(t){if(function(){if(cI!==null)return cI;const a=Qf(),l=a.createBufferSource(),u=a.createGain(),h=a.createGain();l.connect(u),l.connect(h),l.disconnect(u);let p=!1;try{l.disconnect(u)}catch{p=!0}return l.disconnect(),cI=p,p}())return;const n=t.connect,i=t.disconnect;t.connect=(a,l,u)=>{var h;return t._inputNodes||(t._inputNodes=[]),Ke(h=t._inputNodes).call(h,a)||(a instanceof AudioNode?(t._inputNodes.push(a),n.call(t,a,l,u)):n.call(t,a,l)),t},t.disconnect=(a,l,u)=>{i.call(t),a?k_(t._inputNodes,a):t._inputNodes=[];for(const h of t._inputNodes)n.call(t,h)}}let cI=null;function lI(t,n){let i=!1;const a=1/n;if(Q("DISABLE_WEBAUDIO")){const l=window.setInterval(()=>{i?window.clearInterval(l):t(performance.now()/1e3)},1e3*a)}else{const l=Qf();let u=l.createGain();u.gain.value=0,u.connect(l.destination);const h=()=>{if(i)return void(u=null);const p=l.createOscillator();p.onended=h,p.connect(u),p.start(0),p.stop(l.currentTime+a),t(l.currentTime)};h()}return()=>{i=!0}}class X3{constructor(){Se(this,"context",void 0),Se(this,"analyserNode",void 0),Se(this,"sourceNode",void 0),this.context=Qf(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(n){if(n!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch{}this.sourceNode=n,n==null||n.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||Ao()||Vs()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode))return 0;const n=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(n);else{const a=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(a);for(let l=0;l<n.length;++l)n[l]=a[l]/128-1}const i=pc(n).call(n,(a,l)=>a+l*l,0)/n.length;return Math.max(10*Math.log10(i)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var n,i;(n=this.sourceNode)===null||n===void 0||n.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,(i=this.sourceNode)===null||i===void 0||i.connect(this.analyserNode)}catch{k.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class J3 extends Sr{get processSourceNode(){return this.sourceNode}set processedNode(n){var i;if(!this.isDestroyed&&this._processedNode!==n){try{var a;(a=this.sourceNode)===null||a===void 0||a.disconnect(this.outputNode)}catch{}(i=this._processedNode)===null||i===void 0||i.disconnect(),this._processedNode=n,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),Se(this,"outputNode",void 0),Se(this,"outputTrack",void 0),Se(this,"isPlayed",!1),Se(this,"sourceNode",void 0),Se(this,"context",void 0),Se(this,"audioBufferNode",void 0),Se(this,"destNode",void 0),Se(this,"audioOutputLevel",0),Se(this,"volumeLevelAnalyser",void 0),Se(this,"_processedNode",void 0),Se(this,"playNode",void 0),Se(this,"isDestroyed",!1),Se(this,"onNoAudioInput",void 0),Se(this,"isNoAudioInput",!1),Se(this,"_noAudioInputCount",0),this.context=Qf(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),eh(this.outputNode),this.volumeLevelAnalyser=new X3}startGetAudioBuffer(n){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(n),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=i=>{this.emit(ja.ON_AUDIO_BUFFER,function(a){for(let l=0;l<a.outputBuffer.numberOfChannels;l+=1){const u=a.outputBuffer.getChannelData(l);for(let h=0;h<u.length;h+=1)u[h]=0}return a.inputBuffer}(i))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!yn().webAudioMediaStreamDest)throw new we(X.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(n){this.context.state!=="running"&&M_(()=>{jn.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=n||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(n>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;Ao()||Vs()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume();const i=this.volumeLevelAnalyser.getAnalyserNode();let a;i.getFloatTimeDomainData?(a=new Float32Array(i.fftSize),i.getFloatTimeDomainData(a)):(a=new Uint8Array(i.fftSize),i.getByteTimeDomainData(a));let l=!1;for(let u=0;u<a.length;u++)a[u]!==0&&(l=!0);return l?(this.isNoAudioInput=!1,!0):(await Ni(200),await this.checkHasAudioInput(n?n+1:1)&&l)}getAudioVolume(){return this.outputNode.gain.value}setVolume(n){this.outputNode.gain.setValueAtTime(n,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var n,i;(n=this.processedNode)===null||n===void 0||n.disconnect(),(i=this.sourceNode)===null||i===void 0||i.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var n;this.processedNode?(n=this.processedNode)===null||n===void 0||n.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class Q3 extends J3{get isFreeze(){return!1}constructor(n,i,a){var l;if(super(),Se(this,"sourceNode",void 0),Se(this,"track",void 0),Se(this,"clonedTrack",void 0),Se(this,"audioElement",void 0),Se(this,"isCurrentTrackCloned",!1),Se(this,"isRemoteTrack",!1),Se(this,"originVolumeLevelAnalyser",void 0),Se(this,"rebuildWebAudio",async()=>{if(k.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void k.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>k.info("resume success")),k.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const p=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?p.stop():this.isCurrentTrackCloned=!0;const m=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(m),eh(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const E=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(E,this.context.currentTime),eh(this.outputNode),this.emit(ja.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=m,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),n.kind!=="audio")throw new we(X.UNEXPECTED_ERROR);this.track=n;const u=new MediaStream([this.track]);if(this.isRemoteTrack=!!i,this.sourceNode=this.context.createMediaStreamSource(u),eh(this.sourceNode),a){const p=a.clone();p.enabled=!0,this.clonedTrack=p,k.debug("create an unmuted track ".concat(p.id," from the original track ").concat(a.id," to get the volume"));const m=this.context.createMediaStreamSource(new MediaStream([p]));eh(m),this.originVolumeLevelAnalyser=new X3,this.originVolumeLevelAnalyser.updateSource(m)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=u;const h=En();i&&h.os===Ei.IOS&&Number((l=h.osVersion)===null||l===void 0?void 0:l.split(".")[0])<15&&(jn.on(Di.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(p=>{p||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(n){this.sourceNode.disconnect(),this.track=n,this.isCurrentTrackCloned=!1;const i=new MediaStream([n]);this.sourceNode=this.context.createMediaStreamSource(i),eh(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(ja.UPDATE_SOURCE),this.audioElement.srcObject=i}destroy(){var n;this.audioElement.srcObject=null,this.audioElement.remove(),jn.off("state-change",this.rebuildWebAudio),(n=this.originVolumeLevelAnalyser)===null||n===void 0||n.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(n){return this.context.createMediaStreamSource(new MediaStream([n]))}updateOriginTrack(n){const i=n.clone();i.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=i),k.debug("create an unmuted track ".concat(i.id," from the original track ").concat(n.id," to get the volume"));const a=this.context.createMediaStreamSource(new MediaStream([i]));eh(a),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(a)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function Z3(t,n,i){const a=(u,h)=>u?typeof u!="number"?u.max||u.exact||u.ideal||u.min||h:u:h,l={audio:!!i&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxHeight:a(n.height,1080),maxWidth:a(n.width,1920)}}};return n.frameRate&&typeof n.frameRate!="number"?(l.video.mandatory.maxFrameRate=n.frameRate.max,l.video.mandatory.minFrameRate=n.frameRate.min):typeof n.frameRate=="number"&&(l.video.mandatory.maxFrameRate=n.frameRate),await navigator.mediaDevices.getUserMedia(l)}async function $he(t,n){const i=await eV(t.mediaSource),{sourceId:a,audio:l}=await function(u){let h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Ye((p,m)=>{const E=document.createElement("div");E.innerText="share screen",E.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const y=document.createElement("div");y.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const R=document.createElement("div");R.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",R.setAttribute("style","height: 12%;");const A=document.createElement("div");A.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const D=document.createElement("div");D.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");const H=document.createElement("button");H.innerHTML="cancel",H.setAttribute("style","width: 85px;"),H.onclick=()=>{document.body.removeChild(K);const Y=new Error("NotAllowedError");Y.name="NotAllowedError",m(Y)};let B=h;const $=document.createElement("div");if(h){const Y=document.createElement("input");Y.setAttribute("type","checkbox");const ce=document.createElement("span");Y.setAttribute("style","margin-right: 6px;"),ce.innerText="Share audio",Y.checked=B,Y.onchange=()=>{B=Y.checked},$.appendChild(Y),$.appendChild(ce)}D.appendChild($),D.appendChild(H),y.appendChild(R),y.appendChild(A),y.appendChild(D);const K=document.createElement("div");K.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),K.appendChild(E),K.appendChild(y),document.body.appendChild(K),u.map(Y=>{if(Y.id){const ce=document.createElement("div");ce.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let ge=Y.thumbnail;try{const{width:Ee}=ge.getSize();Ee>1920&&(ge=ge.resize({width:1920}))}catch(Ee){throw Ee&&Ee.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),Ee}ce.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+ge.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+Y.name.replace(/[\u00A0-\u9999<>\&]/g,function(Ee){return"&#"+Ee.charCodeAt(0)+";"})+"</span>",ce.onclick=()=>{document.body.removeChild(K),p({sourceId:Y.id,audio:B})},A.appendChild(ce)}})})}(i,n);return await Z3(a,t,l)}async function eV(t){let n=["window","screen"];t!=="application"&&t!=="window"||(n=["window"]),t==="screen"&&(n=["screen"]);const i=h3();if(!i)throw console.error("failed to fetch electron, please mount it to window"),new we(X.ELECTRON_IS_NULL);let a=null;try{var l;a=((l=i.desktopCapturer)===null||l===void 0?void 0:l.getSources({types:n}))||i.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:n})}catch{a=null}a&&a.then||(a=new Ye((u,h)=>{i.desktopCapturer.getSources({types:n},(p,m)=>{p?h(p):u(m)})}));try{return await a}catch(u){throw new we(X.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,u.toString())}}const uI=new Ji("safari");let tV=!1,nV=!1;async function za(t,n){let i=0,a=null;for(;i<2;)try{a=await Hhe(t,n,i>0);break}catch(l){if(l instanceof we)throw k.error("[".concat(n,"] ").concat(l.toString())),l;const u=K_(l.name||l.code||l,l.message);if(u.code===X.MEDIA_OPTION_INVALID){k.debug("[".concat(n,"] detect media option invalid, retry")),i+=1,await Ni(500);continue}throw k.error("[".concat(n,"] ").concat(u.toString())),u}if(!a)throw new we(X.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return a}async function Hhe(t,n,i){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new we(X.NOT_SUPPORTED,"can not find getUserMedia");i&&(t.video&&(delete t.video.width,delete t.video.height),t.screen&&(delete t.screen.width,delete t.screen.height));const a=yn(),l=new MediaStream;if(t.audioSource&&l.addTrack(t.audioSource),t.videoSource&&l.addTrack(t.videoSource),!t.audio&&!t.video&&!t.screen)return k.debug("Using Video Source/ Audio Source"),l;if(t.screen)if(h3())t.screen.sourceId?Zf(l,await Z3(t.screen.sourceId,t.screen,!!t.screenAudio)):Zf(l,await $he(t.screen,!!t.screenAudio));else if($l()&&t.screen.extensionId&&t.screen.mandatory){if(!a.getStreamFromExtension)throw new we(X.NOT_SUPPORTED,"This browser does not support screen sharing");k.debug("[".concat(n,'] Screen access on chrome stable, looking for extension"'));const A=await(h=t.screen.extensionId,p=n,new Ye((D,H)=>{try{chrome.runtime.sendMessage(h,{getStream:!0},B=>{if(!B||!B.streamId)return k.error("[".concat(p,"] No response from Chrome Plugin. Plugin not installed properly"),B),void H(new we(X.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));D(B.streamId)})}catch(B){k.error("[".concat(p,"] AgoraRTC screensharing plugin is not accessible(").concat(h,")"),B.toString()),H(new we(X.CHROME_PLUGIN_NOT_INSTALL))}}));t.screen.mandatory.chromeMediaSourceId=A,Zf(l,await navigator.mediaDevices.getUserMedia({video:{mandatory:t.screen.mandatory}}))}else if(a.getDisplayMedia){var u;t.screen.mediaSource&&z3(t.screen.mediaSource);const A={width:t.screen.width,height:t.screen.height,frameRate:t.screen.frameRate,displaySurface:(u=t.screen.displaySurface)!==null&&u!==void 0?u:t.screen.mediaSource==="screen"?"monitor":t.screen.mediaSource},{selfBrowserSurface:D,surfaceSwitching:H,systemAudio:B,preferCurrentTab:$}=t.screen,K={selfBrowserSurface:D,surfaceSwitching:H,systemAudio:B,preferCurrentTab:$};!D&&delete K.selfBrowserSurface,!H&&delete K.surfaceSwitching,!B&&delete K.systemAudio,!$&&delete K.preferCurrentTab,k.debug("[".concat(n,"] getDisplayMedia:"),JSON.stringify({video:A,audio:t.screenAudio,controls:K})),Zf(l,await navigator.mediaDevices.getDisplayMedia(fr({video:A,audio:t.screenAudio},K)))}else{if(!Tr())throw k.error("[".concat(n,"] This browser does not support screenSharing")),new we(X.NOT_SUPPORTED,"This browser does not support screen sharing");{t.screen.mediaSource&&z3(t.screen.mediaSource);const A={video:{mediaSource:t.screen.mediaSource,width:t.screen.width,height:t.screen.height,frameRate:t.screen.frameRate}};k.debug("[".concat(n,"] getUserMedia: ").concat(JSON.stringify(A))),Zf(l,await navigator.mediaDevices.getUserMedia(A))}}var h,p;if(!t.video&&!t.audio)return l;let m={video:t.video,audio:t.audio},E=Q("MEDIA_DEVICE_CONSTRAINTS");if(E)try{typeof E=="string"&&(E=JSON.parse(E)),m=jw(m,E)}catch{}k.debug("[".concat(n,"] GetUserMedia"),JSON.stringify(m)),En();let y,R=null;(Hi()||Ao()||D_())&&(R=await uI.lock());try{y=await navigator.mediaDevices.getUserMedia(m)}catch(A){throw R&&R(),A}return m.audio&&(tV=!0),m.video&&(nV=!0),Zf(l,y),R&&R(),l}function K_(t,n){switch(t){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new we(X.MEDIA_OPTION_INVALID,"".concat(t,": ").concat(n));case"NotFoundError":case"DevicesNotFoundError":return new we(X.DEVICE_NOT_FOUND,"".concat(t,": ").concat(n));case"NotSupportedError":return new we(X.NOT_SUPPORTED,"".concat(t,": ").concat(n));case"NotReadableError":return new we(X.NOT_READABLE,"".concat(t,": ").concat(n));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new we(X.PERMISSION_DENIED,"".concat(t,": ").concat(n));case"ConstraintNotSatisfiedError":return new we(X.CONSTRAINT_NOT_SATISFIED,"".concat(t,": ").concat(n));default:return k.error("getUserMedia unexpected error",t),new we(X.UNEXPECTED_ERROR,"".concat(t,": ").concat(n))}}function Zf(t,n){const i=t.getVideoTracks()[0],a=t.getAudioTracks()[0],l=n.getVideoTracks()[0],u=n.getAudioTracks()[0];u&&(a&&t.removeTrack(a),t.addTrack(u)),l&&(i&&t.removeTrack(i),t.addTrack(l))}const Wa=new class extends Sr{get state(){return this._state}set state(t){t!==this._state&&(this.emit(Zd.STATE_CHANGE,t),this._state=t)}constructor(){super(),Se(this,"_state",A0.IDLE),Se(this,"isAccessMicrophonePermission",!1),Se(this,"isAccessCameraPermission",!1),Se(this,"lastAccessMicrophonePermission",!1),Se(this,"lastAccessCameraPermission",!1),Se(this,"checkdeviceMatched",!1),Se(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(Q("ENUMERATE_DEVICES_INTERVAL")||(L_()||P_()===Ei.HARMONY_OS)&&Hl())&&this.updateDevicesInfo()},Q("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(t=>k.error(t.toString()))}async enumerateDevices(t,n){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new we(X.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const a=await navigator.mediaDevices.enumerateDevices(),l=this.checkMediaDeviceInfoIsOk(a);let u=!this.isAccessMicrophonePermission&&t,h=!this.isAccessCameraPermission&&n;l.audio&&(u=!1),l.video&&(h=!1);let p=null,m=null,E=null;if(!i&&(u||h)){if(uI.isLocked&&(k.debug("[device manager] wait GUM lock"),(await uI.lock())(),k.debug("[device manager] GUM unlock")),tV&&(u=!1,this.isAccessMicrophonePermission=!0),nV&&(h=!1,this.isAccessCameraPermission=!0),k.debug("[device manager] check media device permissions",t,n,u,h),u&&h){try{E=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(y){const R=K_(y.name||y.code||y,y.message);if(R.code===X.PERMISSION_DENIED)throw R;k.warning("getUserMedia failed in getDevices",R)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(u){try{p=await navigator.mediaDevices.getUserMedia({audio:t})}catch(y){const R=K_(y.name||y.code||y,y.message);if(R.code===X.PERMISSION_DENIED)throw R;k.warning("getUserMedia failed in getDevices",R)}this.isAccessMicrophonePermission=!0}else if(h){try{m=await navigator.mediaDevices.getUserMedia({video:n})}catch(y){const R=K_(y.name||y.code||y,y.message);if(R.code===X.PERMISSION_DENIED)throw R;k.warning("getUserMedia failed in getDevices",R)}this.isAccessCameraPermission=!0}k.debug("[device manager] mic permission",t,"cam permission",n)}try{const y=await navigator.mediaDevices.enumerateDevices();return p&&p.getTracks().forEach(R=>R.stop()),m&&m.getTracks().forEach(R=>R.stop()),E&&E.getTracks().forEach(R=>R.stop()),p=null,m=null,E=null,y}catch(y){return p&&p.getTracks().forEach(R=>R.stop()),m&&m.getTracks().forEach(R=>R.stop()),E&&E.getTracks().forEach(R=>R.stop()),p=null,m=null,E=null,new we(X.ENUMERATE_DEVICES_FAILED,y.toString()).throw()}}async getRecordingDevices(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,t)).filter(n=>n.kind==="audioinput")}async getCamerasDevices(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,t)).filter(n=>n.kind==="videoinput")}async getSpeakers(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,t)).filter(n=>n.kind==="audiooutput")}searchDeviceIdByName(t){let n=null;return this.deviceInfoMap.forEach(i=>{i.device.label===t&&(n=i.device.deviceId)}),n}async getDeviceById(t){const n=(await this.enumerateDevices(!0,!0,!0)).find(i=>i.deviceId===t);if(!n)throw new we(X.DEVICE_NOT_FOUND,"deviceId: ".concat(t));return n}async init(){this.state=A0.INITING;try{await this.updateDevicesInfo(),this.state=A0.INITEND}catch(t){throw k.warning("Device Detection functionality cannot start properly.",t.toString()),this.state=A0.IDLE,(typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1")||new we(X.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),t}}async updateDevicesInfo(){const t=await this.enumerateDevices(!0,!0,!0),n=Date.now(),i=[];if(t[0]&&t[0].label&&this.checkdeviceMatched===!1){this.checkdeviceMatched=!0;const l=t.find(h=>h.kind==="audioinput"&&h.deviceId==="default"),u=t.find(h=>h.kind==="audiooutput"&&h.deviceId==="default");l&&u?u.groupId===l.groupId?k.debug("[device-check] default input ".concat(l.label," and output ").concat(u.label," is the same group")):k.debug("[device-check] default input ".concat(l.label," and output ").concat(u.label," is not the same group")):k.debug("[device-check] default input or output not found")}const a=this.checkMediaDeviceInfoIsOk(t);if(t.forEach(l=>{if(!l.deviceId)return;const u=this.deviceInfoMap.get("".concat(l.kind,"_").concat(l.deviceId));if((u?u.state:"INACTIVE")!=="ACTIVE"){const h={initAt:n,updateAt:n,device:l,state:"ACTIVE"};this.deviceInfoMap.set("".concat(l.kind,"_").concat(l.deviceId),h),i.push(h)}u&&(u.updateAt=n)}),this.deviceInfoMap.forEach((l,u)=>{l.state==="ACTIVE"&&l.updateAt!==n&&(l.state="INACTIVE",i.push(l))}),this.state!==A0.INITEND)return a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));i.forEach(l=>{switch(l.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Zd.RECORDING_DEVICE_CHANGED,l);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(Zd.CAMERA_DEVICE_CHANGED,l);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Zd.PLAYOUT_DEVICE_CHANGED,l)}}),a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(t){const n=t.filter(l=>l.kind==="audioinput"),i=t.filter(l=>l.kind==="videoinput"),a={audio:!1,video:!1};for(const l of n)if(l.label&&l.deviceId){a.audio=!0;break}for(const l of i)if(l.label&&l.deviceId){a.video=!0;break}return a}};let dI=!1;const Ga=new class extends Sr{constructor(){super(...arguments),Se(this,"onAutoplayFailed",void 0),Se(this,"onAudioAutoplayFailed",void 0)}};function rV(){if(En(),!dI){const t=n=>{n.preventDefault(),dI=!1,_0()?document.body.removeEventListener("click",t,!0):(document.body.removeEventListener("touchstart",t,!0),document.body.removeEventListener("mousedown",t,!0))};dI=!0,_0()?document.body.addEventListener("click",t,!0):(document.body.addEventListener("touchstart",t,!0),document.body.addEventListener("mousedown",t,!0)),k.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Ga.onAutoplayFailed?Ga.onAutoplayFailed():Ga.onAudioAutoplayFailed?k.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):k.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),Ga.emit("autoplay-failed")}}function iV(t,n,i,a){if(!t)return;const l=dt.getBaseInfoBySessionId(t);if(!l)return;const u=l.info,h=Date.now(),p=fr(fr({},u),{},{vid:u.vid===void 0?0:Number(u.vid),lts:h,elapse:h-l.startTime,cbRegistered:Ga.onAutoplayFailed||Ga.onAudioAutoplayFailed?1:-1,errorMsg:i,mediaType:n,trackId:a,extend:void 0});dt.send({type:hr.AUTOPLAY_FAILED,data:p},!0)}const zhe=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],Wo=new class{constructor(){Se(this,"onAutoplayFailed",void 0),Se(this,"elementMap",new Map),Se(this,"elementStateMap",new Map),Se(this,"elementsNeedToResume",[]),Se(this,"sinkIdMap",new Map),Se(this,"autoResumeAfterInterruption",t=>{Array.from(this.elementMap.entries()).forEach(n=>{let[i,a]=n;const l=this.elementStateMap.get(i),u=a.srcObject.getAudioTracks()[0],h=u&&u.readyState;if(k.debug("resume after interrupted, ele: ".concat(l," audio: ").concat(h," ").concat(t)),h==="live"){if(t)return a.pause(),void a.play();if(jn.curState==="running")return Bf()?(a.pause(),void a.play()):void(l&&l==="paused"&&a.play())}})}),Se(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{Array.from(this.elementMap.entries()).forEach(t=>{let[n,i]=t;const a=i.srcObject.getAudioTracks()[0];a&&a.readyState==="live"&&(k.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),i.pause(),i.play())})}),this.autoResumeAudioElement(),jn.on(Di.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),jn.on(Di.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),jn.on(Di.STATE_CHANGE,()=>{Ao()&&jn.prevState==="suspended"&&jn.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(t,n){const i=this.elementMap.get(t);if(this.sinkIdMap.set(t,n),i)try{await i.setSinkId(n)}catch(a){throw new we(X.PERMISSION_DENIED,"can not set sink id: "+a.toString())}}play(t,n,i,a){if(this.elementMap.has(n))return;const l=document.createElement("audio");l.autoplay=!0,l.srcObject=new MediaStream([t]),this.bindAudioElementEvents(n,l),this.elementMap.set(n,l),this.elementStateMap.set(n,go.INIT),this.setVolume(n,i);const u=this.sinkIdMap.get(n);if(u)try{l.setSinkId(u).catch(p=>{k.warning("[".concat(n,"] set sink id failed"),p.toString())})}catch(p){k.warning("[".concat(n,"] set sink id failed"),p.toString())}const h=l.play();h&&h.then&&h.catch(p=>{a&&iV(a,"audio",p.message,n),k.warning("audio element play warning",p.toString()),this.elementMap.has(n)&&p.name==="NotAllowedError"&&(k.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(l),M_(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),rV()}))})}updateTrack(t,n){const i=this.elementMap.get(t);i&&(i.srcObject=new MediaStream([n]))}isPlaying(t){return this.elementMap.has(t)&&this.elementStateMap.get(t)==="playing"}setVolume(t,n){const i=this.elementMap.get(t);i&&(n=Math.max(0,Math.min(100,n)),i.volume=n/100)}stop(t){const n=this.elementMap.get(t);if(this.sinkIdMap.delete(t),!n)return;const i=this.elementsNeedToResume.indexOf(n);this.elementsNeedToResume.splice(i,1),n.srcObject=null,n.remove(),this.elementMap.delete(t),this.elementStateMap.delete(t)}bindAudioElementEvents(t,n){zhe.forEach(i=>{n.addEventListener(i,a=>{const l=this.elementStateMap.get(t),u=a.type==="pause"?"paused":a.type;if(k.debug("[".concat(t,"] audio-element-status change ").concat(l," => ").concat(u)),a.type==="error"){const h=n==null?void 0:n.error;h&&k.error("[".concat(t,"] media error, code: ").concat(h.code,", message: ").concat(h.message))}this.elementStateMap.set(t,u)})})}getPlayerState(t){return this.elementStateMap.get(t)||"uninit"}autoResumeAudioElement(){const t=()=>{this.elementsNeedToResume.forEach(n=>{n.play().then(i=>{k.debug("Auto resume audio element success")}).catch(i=>{k.warning("Auto resume audio element failed!",i)})}),this.elementsNeedToResume=[]};new Ye(n=>{document.body?n():window.addEventListener("load",()=>n())}).then(()=>{_0()?document.body.addEventListener("click",t,!0):(document.body.addEventListener("touchstart",t,!0),document.body.addEventListener("mousedown",t,!0))})}};function Ur(){return function(t,n,i){const a=i.value;return typeof a=="function"&&(i.value=function(){this._isClosed&&new we(X.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",k);for(var l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];const p=a.apply(this,u);return p instanceof Ye?new Ye((m,E)=>{p.then(m).catch(E)}):p}),i}}class oV extends Sr{constructor(n){super(),Se(this,"name","VideoProcessorDestination"),Se(this,"ID","0"),Se(this,"_source",void 0),Se(this,"videoContext",void 0),Se(this,"inputTrack",void 0),this.videoContext=n}get kind(){return"video"}get enabled(){return!0}pipe(){throw new we(X.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new we(X.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(n){if(n.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);n.track&&n.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=n.track,this.emit(Oo.ON_TRACK,n.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(Oo.ON_TRACK,void 0)}}class aV extends Sr{set chained(n){this._chained=n}get chained(){return this._chained}constructor(n,i){super(),Se(this,"constraintsMap",new Map),Se(this,"statsRegistry",[]),Se(this,"usageRegistry",[]),Se(this,"trackId",void 0),Se(this,"direction",void 0),Se(this,"_chained",!1),this.trackId=n,this.direction=i}async getConstraints(){return await Wi(this,$a.REQUEST_CONSTRAINTS)}async requestApplyConstraints(n,i){var a;return k.info("processor ".concat(i.name," requestApplyConstraints for ").concat(this.trackId)),n&&this.constraintsMap.set(i,n),Yn(this,$a.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ma(a=this.constraintsMap).call(a)))}async requestRevertConstraints(n){var i;if(this.constraintsMap.has(n))return k.info("processor ".concat(n.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(n),Yn(this,$a.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ma(i=this.constraintsMap).call(i)))}registerStats(n,i,a){this.statsRegistry.find(l=>l.processorID===n.ID&&l.processorName===n.name&&l.type===i)||this.statsRegistry.push({processorName:n.name,processorID:n.ID,type:i,cb:a})}unregisterStats(n,i){const a=this.statsRegistry.findIndex(l=>l.processorID===n.ID&&l.processorName===n.name&&l.type===i);a!==-1&&this.statsRegistry.splice(a,1)}gatherStats(){const n=[];for(const{processorID:i,processorName:a,type:l,cb:u}of this.statsRegistry)try{const h=u();n.push({processorID:i,processorName:a,type:l,stats:h})}catch(h){k.error(new we(X.UNEXPECTED_ERROR,h.message))}return n}registerUsage(n,i){this.usageRegistry.find(a=>a.processorID===n.ID&&a.processorName===n.name)||this.usageRegistry.push({processorID:n.ID,processorName:n.name,cb:i})}unregisterUsage(n){const i=this.usageRegistry.findIndex(a=>a.processorID===n.ID&&a.processorName===n.name);i!==-1&&this.usageRegistry.splice(i,1)}async gatherUsage(){const n=[];if(!this.chained)return[];for(const{cb:i}of this.usageRegistry)try{let a=i();a instanceof Ye&&(a=await a),n.push(fr(fr({},a),{},{direction:this.direction}))}catch(a){k.error("gather extension usage error",a)}return n}getDirection(){return this.direction}}class sV extends Sr{constructor(n){super(),Se(this,"name","AudioProcessorDestination"),Se(this,"ID","0"),Se(this,"inputTrack",void 0),Se(this,"inputNode",void 0),Se(this,"audioProcessorContext",void 0),Se(this,"_source",void 0),this.audioProcessorContext=n}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new we(X.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new we(X.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(Oo.ON_TRACK,void 0),this.emit(Oo.ON_NODE,void 0)}updateInput(n){if(n.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);n.track&&this.inputTrack!==n.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=n.track,this.emit(Oo.ON_TRACK,this.inputTrack)),n.node&&this.inputNode!==n.node&&(this.audioProcessorContext.chained=!0,this.inputNode=n.node,this.emit(Oo.ON_NODE,this.inputNode))}}class cV extends Sr{set chained(n){this._chained=n}get chained(){return this._chained}constructor(n,i,a){super(),Se(this,"constraintsMap",new Map),Se(this,"statsRegistry",[]),Se(this,"audioContext",void 0),Se(this,"trackId",void 0),Se(this,"direction",void 0),Se(this,"usageRegistry",[]),Se(this,"_chained",!1),this.audioContext=n,this.trackId=i,this.direction=a}async getConstraints(){return Wi(this,$a.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(n,i){var a;return k.info("processor ".concat(i.name," requestApplyConstraints for ").concat(this.trackId)),n&&this.constraintsMap.set(i,n),Yn(this,$a.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ma(a=this.constraintsMap).call(a)))}async requestRevertConstraints(n){var i;if(this.constraintsMap.has(n))return this.constraintsMap.delete(n),Yn(this,$a.REQUEST_UPDATE_CONSTRAINTS,Array.from(Ma(i=this.constraintsMap).call(i)))}registerStats(n,i,a){this.statsRegistry.find(l=>l.processorID===n.ID&&l.processorName===n.name&&l.type===i)||this.statsRegistry.push({processorName:n.name,processorID:n.ID,type:i,cb:a})}unregisterStats(n,i){const a=this.statsRegistry.findIndex(l=>l.processorID===n.ID&&l.processorName===n.name&&l.type===i);a!==-1&&this.statsRegistry.splice(a,1)}gatherStats(){const n=[];for(const{processorID:i,processorName:a,type:l,cb:u}of this.statsRegistry)try{const h=u();n.push({processorID:i,processorName:a,type:l,stats:h})}catch(h){k.error(new we(X.UNEXPECTED_ERROR,h.message))}return n}registerUsage(n,i){this.usageRegistry.find(a=>a.processorID===n.ID&&a.processorName===n.name)||this.usageRegistry.push({processorID:n.ID,processorName:n.name,cb:i})}unregisterUsage(n){const i=this.usageRegistry.findIndex(a=>a.processorID===n.ID&&a.processorName===n.name);i!==-1&&this.usageRegistry.splice(i,1)}async gatherUsage(){const n=[];if(!this.chained)return[];for(const{cb:i}of this.usageRegistry)try{let a=i();a instanceof Ye&&(a=await a),n.push(fr(fr({},a),{},{direction:this.direction}))}catch(a){k.error("gather extension usage error",a)}return n}getDirection(){return this.direction}}class hI extends Sr{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),Se(this,"context",void 0),Se(this,"processSourceNode",void 0),Se(this,"outputTrack",void 0),Se(this,"processedNode",void 0),Se(this,"clonedTrack",void 0),Se(this,"outputNode",void 0),this.outputNode=new Whe}setVolume(){}createOutputTrack(){throw new we(X.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class Whe{disconnect(){}connect(){}}function lV(t){return new Ye((n,i)=>{let a=!1;const l=document.createElement("video");l.setAttribute("autoplay",""),l.setAttribute("muted",""),l.muted=!0,l.autoplay=!0,l.setAttribute("playsinline",""),l.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(l);const u=Ao()?"canplay":"playing";l.addEventListener(u,()=>{const h=l.videoWidth,p=l.videoHeight;!h&&Tr()||(a=!0,l.srcObject=null,l.remove(),n([h,p]))}),l.srcObject=new MediaStream([t]),l.play().catch(F_),setTimeout(()=>{a||(l.srcObject=null,l.remove(),n([l.videoWidth,l.videoHeight]))},4e3)})}function q_(t){const n={};t.facingMode&&(n.facingMode=t.facingMode),t.cameraId&&(n.deviceId={exact:t.cameraId});const i=sl(t.encoderConfig);return i.width!=null&&(n.width=i.width),i.height!=null&&(n.height=i.height),!s3()&&i.frameRate&&(n.frameRate=i.frameRate),ZB()&&typeof n.frameRate=="object"&&(n.frameRate.max=60),Tr()&&(n.frameRate={ideal:30,max:30}),n}function uV(t){const n={};return s3()||(t.AGC!==void 0&&(n.autoGainControl=t.AGC),t.AEC!==void 0&&(n.echoCancellation=t.AEC),t.ANS!==void 0&&(n.noiseSuppression=t.ANS,$l()&&t.ANS&&(n.googHighpassFilter=t.ANS))),n}function dV(t){const n=uV(t);if(t.encoderConfig){const i=W_(t.encoderConfig);n.channelCount=i.stereo?2:1,n.sampleRate=i.sampleRate,n.sampleSize=i.sampleSize}return t.microphoneId&&(n.deviceId={exact:t.microphoneId}),L_()&&(n.sampleRate=void 0),n}const Ghe=t=>{const n=t._encoderConfig;if(!n)return;const{frameRate:i,width:a,height:l}=t.getMediaStreamTrackSettings();let{frameRate:u=i,width:h=a,height:p=l}=n;if(!u||!h||!p)return;h=$w(h),p=$w(p),u=$w(u);const{max:m,min:E}=function(D,H,B){const $=200*Math.pow(B/15,.6)*Math.pow(D*H/640/360,.75);return{min:Math.floor($),max:Math.floor(4*$)}}(h,p,u),{bitrateMax:y,bitrateMin:R}=n||{};y||k.debug("calculate bitrate: [w: ".concat(h,", h: ").concat(p,", fps: ").concat(u,"] => [brMax: ").concat(y,", brMin: ").concat(R,"]"));const{maxFramerate:A}=Q("ENCODER_CONFIG_LIMIT");return A&&typeof A=="number"&&(u=Math.min(u,A)),{frameRate:u,bitrateMax:y||m,bitrateMin:R||E,scaleResolutionDownBy:1,scale:0}},hV=async(t,n,i)=>await(async(a,l,u)=>{const h=function(E){const y=[];for(let R=0;R<E.length;R+=2)y.push(parseInt(E.slice(R,R+2),16));return Uint8Array.from(y)}(b3(""+l+u)).slice(0,16),p=h.slice(0,12),m=await window.crypto.subtle.importKey("raw",h,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:p},m,a))})(t.buffer,n,i),fI=t=>{const n=document.createElement("canvas");return n.width=2,n.height=2,new Ye((i,a)=>{n.toBlob(async l=>{if(n.remove(),l){const u=await fV(l);i({buffer:u,width:n.width,height:n.height})}else a(new we(X.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},t,1)})},fV=async t=>{const n=await t.arrayBuffer();return new Uint8Array(n)};var pV,mV,gV,vV,EV,_V,SV,yV,CV,bV,TV,RV,wV,IV,AV,OV,xV,NV,yr,PV,DV,LV,kV,MV,FV,ll,UV,BV,VV,jV,$V,HV,zV,WV,GV,KV,qV,YV,XV,Ki;let Nr=(pV=At({argsMap:(t,n)=>[t.getTrackId(),n],throttleTime:300}),mV=At({argsMap:(t,n)=>[t.getTrackId(),n]}),gV=Ur(),vV=$f("LocalAudioTrack","_enabledMutex"),EV=At({argsMap:(t,n)=>[t.getTrackId(),n]}),_V=Ur(),SV=$f("LocalAudioTrack","_enabledMutex"),yV=At({argsMap:(t,n)=>[t.getTrackId(),n]}),CV=Ur(),bV=Ur(),TV=Ur(),RV=At({argsMap:t=>[t.getTrackId()]}),wV=Ur(),IV=At({argsMap:t=>[t.getTrackId()]}),AV=Ur(),OV=At({argsMap:t=>[t.getTrackId()]}),xV=At({argsMap:(t,n)=>[t.getTrackId(),n.name]}),NV=At({argsMap:t=>[t.getTrackId()]}),Sn((yr=class extends Jf{get _source(){return this.initWebAudio()}set _source(t){this._trackSource=t}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?Wo.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(t,n,i,a){super(t,i),Se(this,"trackMediaType",Xf.AUDIO),Se(this,"_encoderConfig",void 0),Se(this,"_trackSource",void 0),Se(this,"metadata",[]),Se(this,"_enabled",!0),Se(this,"_volume",100),Se(this,"_useAudioElement",!0),Se(this,"_bypassWebAudio",!1),Se(this,"processor",void 0),Se(this,"_processorContext",void 0),Se(this,"_processorDestination",void 0),Se(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=n,this._getOriginVolumeLevel=!!a,this._trackSource=new hI,Q("DISABLE_WEBAUDIO")&&(this._bypassWebAudio=!0),Q("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),Hi()&&!Ha?setTimeout(()=>this.initWebAudio()):this.initWebAudio()}setVolume(t){zn(t,"volume",0,1e3),this._volume=t,this._source.setVolume(t/100),this._useAudioElement&&Wo.setVolume(this.getTrackId(),t);try{if(this._bypassWebAudio)return void k.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const n=this._source.createOutputTrack();this._mediaStreamTrack!==n&&(this._mediaStreamTrack=n,Yn(this,at.NEED_REPLACE_TRACK,this).then(()=>{k.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(i=>{k.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),i)}))}catch{}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(t){if(!this._useAudioElement||!$3())throw new we(X.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Wo.setSinkID(this.getTrackId(),t)}async setEnabled(t,n,i){return this._setEnabled(t,n,i)}async _setEnabled(t,n,i){if(!i){if(t===this._enabled)return;this.stateCheck("enabled",t)}if(k.info("[".concat(this.getTrackId(),"] start setEnabled"),t),t){this._originMediaStreamTrack.enabled=!0;try{i||(this._enabled=!0),await Yn(this,at.NEED_ENABLE_TRACK,this),k.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(t," success"))}catch(a){throw i||(this._enabled=!1),k.error("[".concat(this.getTrackId(),"] setEnabled to true error"),a.toString()),a}}else{this._originMediaStreamTrack.enabled=!1,i||(this._enabled=!1);try{await Yn(this,at.NEED_DISABLE_TRACK,this)}catch(a){throw i||(this._enabled=!0),k.error("[".concat(this.getTrackId(),"] setEnabled to false error"),a.toString()),a}}}async setMuted(t){t!==this._muted&&(this.stateCheck("muted",t),this._muted=t,this._originMediaStreamTrack.enabled=!t,k.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(t)),t?await Yn(this,at.NEED_MUTE_TRACK,this):await Yn(this,at.NEED_UNMUTE_TRACK,this))}getStats(){return ku(()=>{k.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),Ua(this,at.GET_STATS)||fr({},oI)}setAudioFrameCallback(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!t)return this._source.removeAllListeners(ja.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(n),this._source.removeAllListeners(ja.ON_AUDIO_BUFFER),this._source.on(ja.ON_AUDIO_BUFFER,i=>t(i))}play(){k.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(k.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Wo.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){k.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Wo.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];k.debug("[".concat(this.getTrackId(),"] update player source track")),t&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Wo.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(t,n){this._originMediaStreamTrack!==t&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),n&&this._originMediaStreamTrack.stop()),t.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=t,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:t,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Yn(this,at.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(t))}renewMediaStreamTrack(t){return Ye.resolve(void 0)}pipe(t){if(this._bypassWebAudio)throw new we(X.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===t)return t;if(t._source)throw new we(X.INVALID_OPERATION,"Processor ".concat(t.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=t,this.processor._source=this,t.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),t}unpipe(){var t;if(!this.processor)return;const n=this.processor;(t=this._source.processSourceNode)===null||t===void 0||t.disconnect(),this.processor._source=!1,this.processor=void 0,n.reset()}bindProcessorDestinationEvents(t){t.on(Oo.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(n),await Yn(this,at.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Yn(this,at.NEED_REPLACE_TRACK,this))}),t.on(Oo.ON_NODE,n=>{this._source.processedNode=n})}unbindProcessorDestinationEvents(t){t.removeAllListeners(Oo.ON_TRACK),t.removeAllListeners(Oo.ON_NODE)}bindProcessorContextEvents(t){t.on($a.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}unbindProcessorContextEvents(t){t.removeAllListeners($a.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof hI&&(this._trackSource=new Q3(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){const t=new cV(this._source.context,this.getTrackId(),"local"),n=new sV(t);return this._processorContext=t,this._processorDestination=n,this.bindProcessorContextEvents(t),this.bindProcessorDestinationEvents(n),this._source.on(ja.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:t})}),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(Wo.stop(this.getTrackId()),this._source.play()),Yn(this,at.NEED_REPLACE_MIXING_TRACK,this).then(()=>{k.debug("[".concat(this.getTrackId(),"] replace from origin track to web audio track success"))}).catch(i=>{k.warning("[".concat(this.getTrackId(),"] replace from origin track to web audio track failed"),i)})),{processorContext:t,processorDestination:n}}}).prototype,"setVolume",[pV],Object.getOwnPropertyDescriptor(yr.prototype,"setVolume"),yr.prototype),Sn(yr.prototype,"setPlaybackDevice",[mV,gV],Object.getOwnPropertyDescriptor(yr.prototype,"setPlaybackDevice"),yr.prototype),Sn(yr.prototype,"setEnabled",[vV,EV,_V],Object.getOwnPropertyDescriptor(yr.prototype,"setEnabled"),yr.prototype),Sn(yr.prototype,"setMuted",[SV,yV,CV],Object.getOwnPropertyDescriptor(yr.prototype,"setMuted"),yr.prototype),Sn(yr.prototype,"getStats",[bV],Object.getOwnPropertyDescriptor(yr.prototype,"getStats"),yr.prototype),Sn(yr.prototype,"setAudioFrameCallback",[TV],Object.getOwnPropertyDescriptor(yr.prototype,"setAudioFrameCallback"),yr.prototype),Sn(yr.prototype,"play",[RV,wV],Object.getOwnPropertyDescriptor(yr.prototype,"play"),yr.prototype),Sn(yr.prototype,"stop",[IV,AV],Object.getOwnPropertyDescriptor(yr.prototype,"stop"),yr.prototype),Sn(yr.prototype,"close",[OV],Object.getOwnPropertyDescriptor(yr.prototype,"close"),yr.prototype),Sn(yr.prototype,"pipe",[xV],Object.getOwnPropertyDescriptor(yr.prototype,"pipe"),yr.prototype),Sn(yr.prototype,"unpipe",[NV],Object.getOwnPropertyDescriptor(yr.prototype,"unpipe"),yr.prototype),yr),Y_=(PV=At({argsMap:(t,n)=>[t.getTrackId(),n]}),DV=Ur(),LV=$f("MicrophoneAudioTrack","_enabledMutex"),kV=At({argsMap:(t,n,i)=>[t.getTrackId(),n,i]}),MV=Ur(),FV=At({argsMap:t=>[t.getTrackId()]}),Sn((ll=class extends Nr{get __className__(){return"MicrophoneAudioTrack"}constructor(t,n,i,a){super(t,n.encoderConfig?W_(n.encoderConfig):{},a,Q("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),Se(this,"_config",void 0),Se(this,"_deviceName","default"),Se(this,"_constraints",void 0),Se(this,"_originalConstraints",void 0),Se(this,"_enabled",!0),this._config=n,this._constraints=i,this._originalConstraints=i,this._deviceName=t.label,typeof n.bypassWebAudio=="boolean"&&(this._bypassWebAudio=n.bypassWebAudio),(Bf()||Lw())&&jn.bindInterruptDetectorTrack(this)}async setDevice(t){if(k.info("[".concat(this.getTrackId(),"] start set device to ").concat(t)),this._enabled)try{const n=await Wa.getDeviceById(t),i={};i.audio=fr({},this._constraints),i.audio.deviceId={exact:t},this._originMediaStreamTrack.stop();let a=null;try{a=await za(i,this.getTrackId())}catch(l){throw k.error("[".concat(this.getTrackId(),"] setDevice failed"),l.toString()),a=await za({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!1),this._deviceName=n.label,this._config.microphoneId=t,this._constraints.deviceId={exact:t}}catch(n){throw k.error("[".concat(this.getTrackId(),"] setDevice error"),n.toString()),n}else try{const n=await Wa.getDeviceById(t);this._deviceName=n.label,this._config.microphoneId=t,this._constraints.deviceId={exact:t}}catch(n){throw k.error("[".concat(this.getTrackId(),"] setDevice error"),n.toString()),n}k.info("[".concat(this.getTrackId(),"] set device to ").concat(t," success"))}async setEnabled(t,n,i){if(n)return k.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(t);if(!i){if(t===this._enabled)return;this.stateCheck("enabled",t)}if(k.info("[".concat(this.getTrackId(),"] start setEnabled"),t),Q("AUTO_RESET_AUDIO_ROUTE")&&(Ao()||Vs())){const h=navigator.audioSession;h&&(t||(h.type="playback"),h.type="auto")}if(!t){var a;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),(a=this._source.clonedTrack)===null||a===void 0||a.stop(),i||(this._enabled=!1);try{await Yn(this,at.NEED_DISABLE_TRACK,this)}catch(h){throw k.error("[".concat(this.getTrackId(),"] setEnabled false failed"),h.toString()),h}return}const l=fr({},this._constraints),u=Wa.searchDeviceIdByName(this._deviceName);u&&!l.deviceId&&(l.deviceId=u);try{i||(this._enabled=!0);const h=await za({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(h.getAudioTracks()[0],!1),await Yn(this,at.NEED_ENABLE_TRACK,this)}catch(h){throw i||(this._enabled=!1),k.error("[".concat(this.getTrackId(),"] setEnabled true failed"),h.toString()),h}k.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(Bf()||Lw())&&jn.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Ao()||Vs())&&this._enabled&&!this._isClosed&&jn.duringInterruption){const t=async()=>{jn.off(Di.IOS_INTERRUPTION_END,t),this._enabled&&!this._isClosed&&(k.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};jn.on(Di.IOS_INTERRUPTION_END,t)}else k.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(qf.TRACK_ENDED)}async renewMediaStreamTrack(t){const n=t||this._constraints,i=Wa.searchDeviceIdByName(this._deviceName);if(i&&!n.deviceId&&(n.deviceId=i),this._constraints=n,this._enabled){this._originMediaStreamTrack.stop();const a=await za({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!0)}}bindProcessorContextEvents(t){super.bindProcessorContextEvents(t),t.on($a.REQUEST_UPDATE_CONSTRAINTS,async(n,i,a)=>{try{const l=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(l),i()}catch(l){a(l)}})}unbindProcessorContextEvents(t){super.unbindProcessorContextEvents(t),t.removeAllListeners($a.REQUEST_UPDATE_CONSTRAINTS)}}).prototype,"setDevice",[PV,DV],Object.getOwnPropertyDescriptor(ll.prototype,"setDevice"),ll.prototype),Sn(ll.prototype,"setEnabled",[LV,kV,MV],Object.getOwnPropertyDescriptor(ll.prototype,"setEnabled"),ll.prototype),Sn(ll.prototype,"close",[FV],Object.getOwnPropertyDescriptor(ll.prototype,"close"),ll.prototype),ll),Khe=(UV=At({argsMap:(t,n)=>[t.getTrackId(),n,t.duration]}),BV=Ur(),VV=At({argsMap:t=>[t.getTrackId()]}),jV=Ur(),$V=At({argsMap:t=>[t.getTrackId()]}),HV=Ur(),zV=At({argsMap:t=>[t.getTrackId()]}),WV=Ur(),GV=At({argsMap:t=>[t.getTrackId()]}),KV=Ur(),qV=At({argsMap:t=>[t.getTrackId()]}),YV=At({argsMap:t=>[t.getTrackId()]}),XV=Ur(),Sn((Ki=class extends Nr{get __className__(){return"BufferSourceAudioTrack"}constructor(t,n,i,a){super(n.createOutputTrack(),i,a),Se(this,"source",void 0),Se(this,"_bufferSource",void 0),this._useAudioElement=!1,this.source=t,this._bufferSource=n,this._bufferSource.on(ja.AUDIO_SOURCE_STATE_CHANGE,l=>{this.safeEmit(qf.SOURCE_STATE_CHANGE,l)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(t){t&&this._bufferSource.updateOptions(t),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(t){this._bufferSource.seekAudioBuffer(t)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(t){zn(t,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(t)}}).prototype,"startProcessAudioBuffer",[UV,BV],Object.getOwnPropertyDescriptor(Ki.prototype,"startProcessAudioBuffer"),Ki.prototype),Sn(Ki.prototype,"pauseProcessAudioBuffer",[VV,jV],Object.getOwnPropertyDescriptor(Ki.prototype,"pauseProcessAudioBuffer"),Ki.prototype),Sn(Ki.prototype,"seekAudioBuffer",[$V,HV],Object.getOwnPropertyDescriptor(Ki.prototype,"seekAudioBuffer"),Ki.prototype),Sn(Ki.prototype,"resumeProcessAudioBuffer",[zV,WV],Object.getOwnPropertyDescriptor(Ki.prototype,"resumeProcessAudioBuffer"),Ki.prototype),Sn(Ki.prototype,"stopProcessAudioBuffer",[GV,KV],Object.getOwnPropertyDescriptor(Ki.prototype,"stopProcessAudioBuffer"),Ki.prototype),Sn(Ki.prototype,"close",[qV],Object.getOwnPropertyDescriptor(Ki.prototype,"close"),Ki.prototype),Sn(Ki.prototype,"setAudioBufferPlaybackSpeed",[YV,XV],Object.getOwnPropertyDescriptor(Ki.prototype,"setAudioBufferPlaybackSpeed"),Ki.prototype),Ki);class di extends Nr{get __className__(){return"MixingAudioTrack"}get isActive(){for(const n of this.trackList)if(n._enabled&&!n._isClosed&&!n.muted)return!0;return!1}constructor(){const n=Qf().createMediaStreamDestination();super(n.stream.getAudioTracks()[0],void 0,Xn(8,"track-mix-")),Se(this,"trackList",void 0),Se(this,"destNode",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=n,this.trackList=[]}hasAudioTrack(n){return this.trackList.indexOf(n)!==-1}addAudioTrack(n){this.trackList.indexOf(n)===-1?(k.debug("add ".concat(n.getTrackId()," to mixing track")),n._source.outputNode.connect(this.destNode),this.trackList.push(n),this.updateEncoderConfig()):k.debug("track ".concat(n.getTrackId()," is already added"))}removeAudioTrack(n){if(this.trackList.indexOf(n)!==-1){k.debug("remove ".concat(n.getTrackId()," from mixing track"));try{n._source.outputNode.disconnect(this.destNode)}catch{}k_(this.trackList,n),this.updateEncoderConfig()}}updateEncoderConfig(){const n={};this.trackList.forEach(i=>{i._encoderConfig&&((i._encoderConfig.bitrate||0)>(n.bitrate||0)&&(n.bitrate=i._encoderConfig.bitrate),(i._encoderConfig.sampleRate||0)>(n.sampleRate||0)&&(n.sampleRate=i._encoderConfig.sampleRate),(i._encoderConfig.sampleSize||0)>(n.sampleSize||0)&&(n.sampleSize=i._encoderConfig.sampleSize),i._encoderConfig.stereo&&(n.stereo=!0))}),this._encoderConfig=n}_updateRtpTransceiver(n){this._rtpTransceiver!==n&&(this._rtpTransceiver=n,this.trackList.forEach(i=>{i instanceof di?i.emit(Qd.TRANSCEIVER_UPDATED,n):i._updateRtpTransceiver(n)}))}}class qhe extends J3{set currentState(n){n!==this._currentState&&(this._currentState=n,this.safeEmit(ja.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Se(this,"audioBuffer",void 0),Se(this,"sourceNode",void 0),Se(this,"startPlayTime",0),Se(this,"startPlayOffset",0),Se(this,"pausePlayTime",0),Se(this,"options",void 0),Se(this,"currentLoopCount",0),Se(this,"currentPlaybackSpeed",100),Se(this,"_currentState","stopped"),this.audioBuffer=n,this.options=i,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(n){this.currentState==="stopped"?(this.options=n,this.startPlayOffset=this.options.startPlayTime||0):k.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(n){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=n,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=n))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(n){this.sourceNode&&(this.currentState==="playing"&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=n/100),this.currentPlaybackSpeed=n}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const n=this.context.createBufferSource();return n.buffer=this.audioBuffer,n.loop=!!this.options.loop,n.connect(this.outputNode),n.playbackRate.value=this.currentPlaybackSpeed/100,n}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const JV=new Map;class pI{get rendFrameRate(){if(this.renderStats&&this.renderStats.curTs!==this.renderStats.lastTs){const n=this.renderStats.curTs-this.renderStats.lastTs,i=(this.renderStats.renderNum-this.renderStats.lastRenderNum)/n;return this.renderStats.lastRenderNum=this.renderStats.renderNum,this.renderStats.lastTs=this.renderStats.curTs,i}return 0}get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(n){n!==this._videoElementStatus&&(k.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(n)),this._videoElementStatus=n)}get videoState(){return this._videoState}set videoState(n){var i;n!==this._videoState&&(this._videoState=n,(i=this.onVideoStateChanged)===null||i===void 0||i.call(this,this.videoState))}constructor(n){Se(this,"trackId",void 0),Se(this,"config",void 0),Se(this,"onFirstVideoFrameDecoded",void 0),Se(this,"onVideoStateChanged",void 0),Se(this,"freezeTimeCounterList",[]),Se(this,"renderFreezeAccTime",0),Se(this,"isKeepLastFrame",!1),Se(this,"timeUpdatedCount",0),Se(this,"freezeTime",0),Se(this,"playbackTime",0),Se(this,"lastTimeUpdatedTime",0),Se(this,"autoplayFailed",!1),Se(this,"videoTrack",void 0),Se(this,"videoElement",void 0),Se(this,"cacheVideoElement",void 0),Se(this,"renderStats",void 0),Se(this,"_videoState",cl.VideoStateStopped),Se(this,"videoElementCheckInterval",void 0),Se(this,"videoElementFreezeTimeout",void 0),Se(this,"_videoElementStatus",go.NONE),Se(this,"isGettingVideoDimensions",!1),Se(this,"startGetVideoDimensions",()=>{const i=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return k.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(i,500)};!this.isGettingVideoDimensions&&i()}),Se(this,"autoResumeAfterInterruption",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&jn.curState==="running"&&(k.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(QB())),o3()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),Se(this,"handleVideoEvents",i=>{switch(i.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=go.PLAYING;break;case"loadeddata":if(this.videoState=cl.VideoStateStarting,this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch{}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=go.CANPLAY;break;case"stalled":this.videoElementStatus=go.STALLED;break;case"suspend":this.videoElementStatus=go.SUSPEND;break;case"pause":this.videoElementStatus=go.PAUSED,Ao()||Vs()||Hi()&&this.autoplayFailed||!this.videoTrack||this.videoTrack.readyState!=="live"||(k.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=go.WAITING;break;case"abort":this.videoElementStatus=go.ABORT;break;case"ended":this.videoElementStatus=go.ENDED;break;case"emptied":this.videoElementStatus=go.EMPTIED;break;case"error":{const a=this.videoElement.error;a&&(this.videoElementStatus=go.ERROR,k.error("[".concat(this.trackId,"] media error: ").concat(a.message," (").concat(a.code,")")));break}case"timeupdate":{const a=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=a);const l=a-this.lastTimeUpdatedTime,u=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=a,Gl.lastVisibleTime<Gl.lastHiddenTime||u<Gl.lastHiddenTime||u<Gl.lastVisibleTime)return;for(l>Q("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=l),this.playbackTime+=l;this.playbackTime>=6e3;){this.playbackTime-=6e3;const h=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(h),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),Se(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&(k.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(QB())),o3()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),this.trackId=n.trackId,this.config=n,n.element instanceof HTMLVideoElement?this.videoElement=n.element:this.videoElement=document.createElement("video"),jn.on(Di.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),jn.on(Di.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var n;return(n=this.videoElement.parentElement)!==null&&n!==void 0?n:void 0}updateConfig(n){this.config=n,this.trackId=n.trackId,n.element!==this.videoElement&&(this.destroy(),this.videoElement=n.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(n){this.videoTrack!==n&&(this.videoTrack=n,this.initVideoElement())}play(n){const i=this.videoElement.play();i&&i.catch&&i.catch(l=>{n&&iV(n,"video",l.message,this.trackId),l.name==="NotAllowedError"?(k.warning("detected video element autoplay failed",l),this.autoplayFailed=!0,this.handleAutoPlayFailed()):k.warning("[".concat(this.trackId,"] play warning: "),l)});const a=En();if((a.name==="Safari"&&Number(a.version)===15||Bf())&&i&&i.then){const l=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};i.then(l).catch(l)}}getCurrentFrame(){const n=document.createElement("canvas");n.width=this.videoElement.videoWidth,n.height=this.videoElement.videoHeight;const i=n.getContext("2d");if(!i)return k.error("create canvas context failed!"),new ImageData(2,2);i.drawImage(this.videoElement,0,0,n.width,n.height);const a=i.getImageData(0,0,n.width,n.height);return n.remove(),a}async getCurrentFrameToUint8Array(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const a=document.createElement("canvas");a.width=this.videoElement.videoWidth,a.height=this.videoElement.videoHeight;const l=a.getContext("2d");return l?(l.drawImage(this.videoElement,0,0,a.width,a.height),new Ye((u,h)=>{a.toBlob(async p=>{if(a.remove(),p){const m=await fV(p);u({buffer:m,width:a.width,height:a.height})}else h(new we(X.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},n,i<0?.1:i>1?1:i)})):await fI(n)}destroy(){this.renderStats=void 0,jn.off(Di.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),jn.off(Di.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=cl.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=go.INIT,!this.videoElementCheckInterval&&(QV.forEach(u=>{this.videoElement.addEventListener(u,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{(function(u){return u!==document.body&&document.body.contains(u)})(this.videoElement)||(this.videoElementStatus=go.DESTROYED)},1e3),Q("ENABLE_VIDEO_FRAME_CALLBACK"))){var n,i;let u;const h=()=>{document.visibilityState==="visible"&&(document.removeEventListener("visibilitychange",h),this.videoElementFreezeTimeout=window.setTimeout(p,Q("VIDEO_FREEZE_DURATION")))},p=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===cl.VideoStateDecoding&&(document.visibilityState==="visible"?this.videoState=cl.VideoStateFrozen:document.addEventListener("visibilitychange",h))},m=(E,y)=>{if(this.videoElementStatus===go.PLAYING){if(this.renderStats?(this.renderStats.renderNum++,this.renderStats.curTs=y.mediaTime):this.renderStats={lastTs:y.mediaTime,curTs:y.mediaTime,lastRenderNum:0,renderNum:0},u){const D=y.presentationTime-u.presentationTime;this.videoState===cl.VideoStateStarting&&(this.videoState=cl.VideoStateDecoding),this.videoState===cl.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(p,Q("VIDEO_FREEZE_DURATION"))),D<Q("VIDEO_FREEZE_DURATION")&&this.videoState===cl.VideoStateFrozen&&(this.videoState=cl.VideoStateDecoding),D>Q("VIDEO_FREEZE_DURATION")&&Gl.lastVisibleTime>=Gl.lastHiddenTime&&u.timestamp>Gl.lastVisibleTime&&u.timestamp>Gl.lastHiddenTime&&(this.renderFreezeAccTime+=D)}u=fr(fr({},y),{},{timestamp:E})}var R,A;Q("ENABLE_VIDEO_FRAME_CALLBACK")&&((R=(A=this.videoElement).requestVideoFrameCallback)===null||R===void 0||R.call(A,m))};(n=(i=this.videoElement).requestVideoFrameCallback)===null||n===void 0||n.call(i,m)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),L_()&&!Q("HIDE_NO_POSTER")&&(this.videoElement.poster="noposter");const a=En();a.name==="Safari"&&Number(a.version)===15||Bf()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Tr()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Tr()&&this.videoElement.load());const l=this.videoElement.play();l!==void 0&&l.catch(u=>{k.debug("[".concat(this.trackId,"] playback interrupted"),u.toString())})}resetVideoElement(){QV.forEach(n=>{this.videoElement&&this.videoElement.removeEventListener(n,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=go.NONE}handleAutoPlayFailed(){const n=i=>{i.preventDefault(),this.videoElement.play().then(()=>{k.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(a=>{k.error(a)}),this.autoplayFailed=!1,_0()?document.body.removeEventListener("click",n,!0):(document.body.removeEventListener("touchstart",n,!0),document.body.removeEventListener("mousedown",n,!0))};_0()?document.body.addEventListener("click",n,!0):(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0)),rV()}}const QV=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class ZV extends pI{constructor(n){super(n),Se(this,"container",void 0),Se(this,"slot",void 0),this.slot=n.element,this.updateConfig(n)}updateConfig(n){this.config=n,this.trackId=n.trackId;const i=n.element;i!==this.slot&&(this.destroy(),this.slot=i),this.createElements()}updateVideoTrack(n){this.videoTrack!==n&&(this.videoTrack=n,this.createElements())}play(n){var i;(i=this.container)!==null&&i!==void 0&&i.contains(this.videoElement)&&super.play(n)}getCurrentFrame(){var n;return(n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(n){var i;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(i=this.container)!==null&&i!==void 0&&i.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(n,a):await fI(n)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",Q("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var n;!this.container||(n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var n;if((n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=document.createElement("video")}}resetVideoElement(){var n;(n=this.container)!==null&&n!==void 0&&n.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}var e5,t5,n5,r5,i5,o5,a5,s5,c5,l5,u5,d5,h5,f5,p5,m5,g5,v5,E5,_5,S5,y5,C5,b5,pn,T5,R5,w5,I5,A5,O5,x5,N5,Ka;let sr=(e5=At({argsMap:(t,n,i)=>[t.getTrackId(),typeof n=="string"?n:n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",i]}),t5=Ur(),n5=At({argsMap:t=>[t.getTrackId()]}),r5=$f("LocalVideoTrack","_enabledMutex"),i5=At({argsMap:(t,n)=>[t.getTrackId(),n]}),o5=Ur(),a5=$f("LocalVideoTrack","_enabledMutex"),s5=At({argsMap:(t,n)=>[t.getTrackId(),n]}),c5=Ur(),l5=At({argsMap:(t,n)=>[t.getTrackId(),n]}),u5=Ur(),d5=Ur(),h5=At({argsMap:(t,n,i)=>[t.getTrackId(),n,i]}),f5=Ur(),p5=Ur(),m5=Ur(),g5=Ur(),v5=Ur(),E5=Ur(),_5=Ur(),S5=At({argsMap:(t,n)=>[t.getTrackId(),n.name]}),y5=At({argsMap:t=>[t.getTrackId()]}),C5=At({argsMap:t=>[t.getTrackId()]}),b5=At({argsMap:(t,n,i)=>[t.getTrackId(),n.label,i]}),pn=class xG extends Jf{get videoHeight(){if(Hi()){const{height:n}=this._mediaStreamTrack.getSettings();return this._videoHeight=n,this._videoHeight}return this._videoHeight}get videoWidth(){if(Hi()){const{width:n}=this._mediaStreamTrack.getSettings();return this._videoWidth=n,this._videoWidth}return this._videoWidth}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==go.PLAYING)}get processorDestination(){return this._processorDestination}get processorContext(){return this._processorContext}set processorContext(n){this._processorContext=n}get __className__(){return"LocalVideoTrack"}constructor(n,i,a,l,u,h){if(super(n,u),Se(this,"trackMediaType",Xf.VIDEO),Se(this,"_player",void 0),Se(this,"isUseScaleResolutionDownBy",!1),Se(this,"_videoVisibleTimer",null),Se(this,"_previousVideoVisibleStatus",void 0),Se(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),Se(this,"_encoderConfig",void 0),Se(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),Se(this,"_optimizationMode",void 0),Se(this,"_videoHeight",void 0),Se(this,"_videoWidth",void 0),Se(this,"_forceBitrateLimit",void 0),Se(this,"_enabled",!0),Se(this,"_processorDestination",void 0),Se(this,"_processorContext",void 0),Hi()){const{width:p,height:m}=n.getSettings();this._videoWidth=p,this._videoHeight=m}else this.updateMediaStreamTrackResolution();if(this._encoderConfig=i,this._scalabilityMode=a,this._optimizationMode=l,this._hints=h||[],this._hints.indexOf(Jn.SCREEN_TRACK)===-1)this.updateBitrateFromProfile();else if(Nw(On.CHROME,115)&&P_().indexOf("Windows")!==-1){const p=function(m,E){if("VideoFrame"in window&&"TransformStream"in window&&yn().supportWebRTCInsertableStream){const y=new MediaStreamTrackProcessor(m),R=new MediaStreamTrackGenerator({kind:"video"});let A,D,H=Date.now();const B=()=>{$&&(clearInterval($),$=void 0),A&&(A.close(),A=void 0),m.stop(),D=void 0,R.removeEventListener("ended",B)};let $=window.setInterval(()=>{if(D&&A&&Date.now()-H>(E??1e3))try{R.readyState==="live"?D.enqueue(A.clone()):B()}catch{B()}},E??1e3);const K=new TransformStream({transform:(Y,ce)=>{R.readyState==="live"?(D=ce,H=Date.now(),A===void 0?(A=Y,ce.enqueue(Y.clone())):(ce.enqueue(A),A=Y)):Y.close()}});return R.addEventListener("ended",B),y.readable.pipeThrough(K).pipeTo(R.writable),R}}(n);p&&(k.info("local screen video track begin to inject frame"),this._mediaStreamTrack=p)}i&&this._hints.indexOf(Jn.CUSTOM_TRACK)!==-1&&this.setEncoderConfiguration(i),this._processorContext=new aV(this.getTrackId(),"local"),this._processorDestination=new oV(this.processorContext),this.bindProcessorDestinationEvents()}play(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof n=="string"){const l=document.getElementById(n);l?n=l:(k.warning("[".concat(this.getTrackId(),'] can not find "#').concat(n,'" element, use document.body')),n=document.body)}k.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(i));const a=fr(fr(fr({},this._getDefaultPlayerConfig()),i),{},{trackId:this.getTrackId(),element:n});this._player?this._player.updateConfig(a):(n instanceof HTMLVideoElement?this._player=new pI(a):this._player=new ZV(a),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const l=this.getVideoElementVisibleStatus();this.safeEmit(qf.VIDEO_ELEMENT_VISIBLE_STATUS,l)}catch{}},Q("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,k.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(n,i){if(!i){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(k.info("[".concat(this.getTrackId(),"] start setEnabled"),n),!n){this._originMediaStreamTrack.enabled=!1;try{await Yn(this,at.NEED_DISABLE_TRACK,this)}catch(a){throw k.error("[".concat(this.getTrackId(),"] setEnabled to false error"),a.toString()),a}return i||(this._enabled=!1),void k.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await Yn(this,at.NEED_ENABLE_TRACK,this)}catch(a){throw k.error("[".concat(this.getTrackId(),"] setEnabled to true error"),a.toString()),a}k.info("[".concat(this.getTrackId(),"] setEnabled to true success")),i||(this._enabled=!0)}async setMuted(n){n!==this._muted&&(this.stateCheck("muted",n),this._muted=n,this._originMediaStreamTrack.enabled=!n,k.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(n)),n?await Yn(this,at.NEED_MUTE_TRACK,this):await Yn(this,at.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(n,i){if(!this._enabled)throw new we(X.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(n=sl(n),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:n.bitrateMin),n.width||n.height||n.frameRate){const a=q_({encoderConfig:n});(Hi()||Ao()||Vs())&&(a.deviceId=void 0),k.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(a));try{await this._originMediaStreamTrack.applyConstraints(a),this.updateMediaStreamTrackResolution()}catch(l){const u=new we(X.UNEXPECTED_ERROR,l.toString());throw k.error("[".concat(this.getTrackId(),"] applyConstraints error"),u.toString()),u}}this._encoderConfig=n,this._hints.indexOf(Jn.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Yn(this,at.NEED_UPDATE_VIDEO_ENCODER,this)}catch(a){return a.throw(k)}}getStats(){return ku(()=>{k.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),Ua(this,at.GET_STATS)||fr({},aI)}async setBeautyEffect(n){k.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(n,i):await fI(n)}async setBitrateLimit(n){k.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(n))),n&&(this._forceBitrateLimit=n,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<n.max_bitrate?this._encoderConfig.bitrateMax:n.max_bitrate:this._encoderConfig.bitrateMax=n.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=n.min_bitrate))}async setOptimizationMode(n){if(n!=="motion"&&n!=="detail"&&n!=="balanced")return void k.error(X.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const i=this._optimizationMode;try{this._optimizationMode=n,await Yn(this,at.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this)}catch(a){throw this._optimizationMode=i,k.error("[".concat(this.getTrackId(),"] set optimization mode failed"),a.toString()),a}k.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(n,")"))}setScalabiltyMode(n){if(n.numSpatialLayers===1&&n.numTemporalLayers!==1)return k.error(X.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=n,k.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(n,")"))}updateMediaStreamTrackResolution(){lV(this._originMediaStreamTrack).then(n=>{let[i,a]=n;this._videoHeight=a,this._videoWidth=i}).catch(F_)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(n){if(!this._enabled)throw new we(X.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");k.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(n)),n=sl(n),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:n.bitrateMin),this._encoderConfig=n,this._hints.indexOf(Jn.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Yn(this,at.NEED_UPDATE_VIDEO_ENCODER,this)}catch(i){return i.throw(k)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:n,height:i,frameRate:a}=this.getMediaStreamTrackSettings();if(!n||!i||!a)return;const{bitrateMax:l,bitrateMin:u}=this._encoderConfig;if(u==null||l==null){const{max:h,min:p}=function(m,E,y,R,A){const D=Q("BITRATE_ADAPTER_TYPE");if(D==="DEFAULT_BITRATE")return{min:R,max:A};if(A===void 0){var H;const $=Math.floor(200*Math.pow(y/15,.6)*Math.pow(m*E/640/360,.75));A=D==="STANDARD_BITRATE"?4*$:2*$,R=(H=R)!==null&&H!==void 0?H:$}else{var B;R=(B=R)!==null&&B!==void 0?B:Math.floor(A/10)}return{min:R,max:A}}(n,i,a,u,l);this._encoderConfig.bitrateMin=p,this._encoderConfig.bitrateMax=h,k.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(n,", h: ").concat(i,", fps: ").concat(a,"] => [brMax: ").concat(h,", brMin: ").concat(p,"]"))}}getVideoElementVisibleStatus(){try{var n,i;const a=this==null||(n=this._player)===null||n===void 0?void 0:n.getContainerElement(),l={track:this,element:this==null||(i=this._player)===null||i===void 0?void 0:i.getVideoElement(),slot:a==null?void 0:a.parentElement},{element:u,slot:h}=l;if(this.isPlaying&&u instanceof HTMLVideoElement&&h instanceof HTMLElement){const p=u3.checkOneElementVisible(u),m=Object.assign({},p);if(m.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=m.visible;const E=dt.reportApiInvoke(null,{tag:wr.TRACER,name:ei.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});m.visible?E.onSuccess("Video is visible"):E.onSuccess("Invisible because of ".concat(m.reason))}return m}return}catch(a){throw new we(X.GET_VIDEO_ELEMENT_VISIBLE_ERROR,a.message)}}async renewMediaStreamTrack(n){}pipe(n){if(this.processor===n)return n;if(n._source)throw new we(X.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),n}unpipe(){if(!this.processor)return;const n=this.processor;this.processor._source=void 0,this.processor=void 0,n.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(n){let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],a=this._encoderConfig;n&&(a=fr(fr({},a),sl(n))),a=qd(a);const l=Xn(8,"track-video-cloned-"),u=new xG(i?this._mediaStreamTrack.clone():this._mediaStreamTrack,a,qd(this._scalabilityMode),this._optimizationMode,l,qd(this._hints));return n&&a&&u.setEncoderConfiguration(a),k.debug("clone video track from ".concat(this.getTrackId()," to ").concat(l,", clone ").concat(i)),u}async replaceTrack(n,i){if(!(n instanceof MediaStreamTrack))throw new we(X.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if(n.kind!=="video")throw new we(X.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(n,i,!0),this.updateMediaStreamTrackResolution()}sendSeiData(n){if(ku(()=>{dt.reportApiInvoke(null,{name:ei.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:wr.TRACER}).onSuccess("")},this._mediaStreamTrack.id||this.getTrackId()),!Q("ENABLE_VIDEO_SEI")||!Q("ENABLE_ENCODED_TRANSFORM"))return void k.warning('To send/receive SEI, please call AgoraRTC.setParameter("ENABLE_VIDEO_SEI", true) before instantiate IAgoraRtcClient');if(n instanceof Uint8Array==0)return new we(X.INVALID_PARAMS,"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.").throw();const i=this.getRTCRtpTransceiver();if(!i)return void k.warning("Video track is not published, SEI can not be send");const a=i.sender.getParameters();if(a.codecs.length===0)return;const l=a.codecs[0].mimeType.toLocaleLowerCase();l==="video/h264"?this.safeEmit("sei-to-send",n):k.warning("SEI is not supported by ".concat(l))}bindProcessorDestinationEvents(){this.processorDestination.on(Oo.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(),await Yn(this,at.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Yn(this,at.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Oo.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners($a.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners($a.REQUEST_CONSTRAINTS)}},Sn(pn.prototype,"play",[e5,t5],Object.getOwnPropertyDescriptor(pn.prototype,"play"),pn.prototype),Sn(pn.prototype,"stop",[n5],Object.getOwnPropertyDescriptor(pn.prototype,"stop"),pn.prototype),Sn(pn.prototype,"setEnabled",[r5,i5,o5],Object.getOwnPropertyDescriptor(pn.prototype,"setEnabled"),pn.prototype),Sn(pn.prototype,"setMuted",[a5,s5,c5],Object.getOwnPropertyDescriptor(pn.prototype,"setMuted"),pn.prototype),Sn(pn.prototype,"setEncoderConfiguration",[l5,u5],Object.getOwnPropertyDescriptor(pn.prototype,"setEncoderConfiguration"),pn.prototype),Sn(pn.prototype,"getStats",[d5],Object.getOwnPropertyDescriptor(pn.prototype,"getStats"),pn.prototype),Sn(pn.prototype,"setBeautyEffect",[h5,f5],Object.getOwnPropertyDescriptor(pn.prototype,"setBeautyEffect"),pn.prototype),Sn(pn.prototype,"getCurrentFrameData",[p5],Object.getOwnPropertyDescriptor(pn.prototype,"getCurrentFrameData"),pn.prototype),Sn(pn.prototype,"getCurrentFrameImage",[m5],Object.getOwnPropertyDescriptor(pn.prototype,"getCurrentFrameImage"),pn.prototype),Sn(pn.prototype,"setBitrateLimit",[g5],Object.getOwnPropertyDescriptor(pn.prototype,"setBitrateLimit"),pn.prototype),Sn(pn.prototype,"setOptimizationMode",[v5],Object.getOwnPropertyDescriptor(pn.prototype,"setOptimizationMode"),pn.prototype),Sn(pn.prototype,"setScalabiltyMode",[E5],Object.getOwnPropertyDescriptor(pn.prototype,"setScalabiltyMode"),pn.prototype),Sn(pn.prototype,"updateMediaStreamTrackResolution",[_5],Object.getOwnPropertyDescriptor(pn.prototype,"updateMediaStreamTrackResolution"),pn.prototype),Sn(pn.prototype,"pipe",[S5],Object.getOwnPropertyDescriptor(pn.prototype,"pipe"),pn.prototype),Sn(pn.prototype,"unpipe",[y5],Object.getOwnPropertyDescriptor(pn.prototype,"unpipe"),pn.prototype),Sn(pn.prototype,"close",[C5],Object.getOwnPropertyDescriptor(pn.prototype,"close"),pn.prototype),Sn(pn.prototype,"replaceTrack",[b5],Object.getOwnPropertyDescriptor(pn.prototype,"replaceTrack"),pn.prototype),pn),mI=(T5=At({argsMap:(t,n)=>[t.getTrackId(),n]}),R5=Ur(),w5=$f("CameraVideoTrack","_enabledMutex"),I5=At({argsMap:(t,n)=>[t.getTrackId(),n]}),A5=Ur(),O5=At({argsMap:(t,n)=>[t.getTrackId(),n]}),x5=Ur(),N5=At({argsMap:t=>[t.getTrackId()]}),Ka=class NG extends sr{get __className__(){return"CameraVideoTrack"}constructor(n,i,a,l,u,h){super(n,sl(i.encoderConfig),l,u,h),Se(this,"_config",void 0),Se(this,"_originalConstraints",void 0),Se(this,"_constraints",void 0),Se(this,"_enabled",!0),Se(this,"_deviceName","default"),Se(this,"tryResumeVideoForIOS15_16WeChat",async()=>{(Bf()||Lw())&&!function(){const p=En();if(p.os!==Ei.IOS||!p.osVersion)return!1;const m=p.osVersion.split(".");return Number(m[0])===15&&Number(m[1])>=2}()&&a3()&&this._enabled&&!this._isClosed&&(k.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=i,this._originalConstraints=a,this._constraints=a,this._deviceName=n.label,this._encoderConfig=sl(this._config.encoderConfig),jn.on(Di.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),jn.on(Di.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(n){return typeof n=="string"?this._setDeviceById(n):n.deviceId?this._setDeviceById(n.deviceId):n.facingMode?this._setDeviceByFacingModel(n.facingMode):void 0}async _setDeviceById(n){if(k.info("[".concat(this.getTrackId(),"] set device to ").concat(n)),this._enabled)try{const i=await Wa.getDeviceById(n),a={};a.video=fr({},this._constraints),a.video.deviceId={exact:n},a.video.facingMode=void 0,this._originMediaStreamTrack.stop();let l=null;try{l=await za(a,this.getTrackId())}catch(u){throw k.error("[".concat(this.getTrackId(),"] setDevice failed"),u.toString()),l=await za({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(l.getVideoTracks()[0],!1),u}await this._updateOriginMediaStreamTrack(l.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=i.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(i){throw k.error("[".concat(this.getTrackId(),"] setDevice error"),i.toString()),i}else try{const i=await Wa.getDeviceById(n);this._deviceName=i.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(i){throw k.error("[".concat(this.getTrackId(),"] setDevice error"),i.toString()),i}k.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(n){k.info("[".concat(this.getTrackId(),"] set facingMode ").concat(n));const i={video:fr(fr({},this._constraints),{},{deviceId:void 0,facingMode:{exact:n}})};if(this._enabled){this._originMediaStreamTrack.stop();let a=null;try{a=await za(i,this.getTrackId())}catch(l){throw k.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),l.toString()),a=await za({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(a.getVideoTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(a.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=n,this._config.cameraId=void 0,this._constraints=fr({},i.video),k.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(n,i){if(!i){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(k.info("[".concat(this.getTrackId(),"] start setEnabled"),n),n){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const a=await za({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(a.getVideoTracks()[0],!1)}await Yn(this,at.NEED_ENABLE_TRACK,this)}catch(a){throw k.error("[".concat(this.getTrackId(),"] setEnabled true error"),a.toString()),a}this.updateMediaStreamTrackResolution(),k.info("[".concat(this.getTrackId(),"] setEnabled to true success")),i||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),i||(this._enabled=!1);try{await Yn(this,at.NEED_DISABLE_TRACK,this)}catch(a){throw k.error("[".concat(this.getTrackId(),"] setEnabled to false error"),a.toString()),a}k.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(n,i){if(!this._enabled)throw new we(X.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");n=sl(n),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate||n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate||n.bitrateMin);const a=Ir(this._config);a.encoderConfig=n;const l=q_(a);(Hi()||Ao()||Vs())&&(l.deviceId=void 0),k.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(l));try{await this._originMediaStreamTrack.applyConstraints(l),this.updateMediaStreamTrackResolution()}catch(u){const h=new we(X.UNEXPECTED_ERROR,u.toString());throw k.error("[".concat(this.getTrackId(),"] applyConstraints error"),h.toString()),h}this._config=a,this._constraints=l,this._originalConstraints=l,this._encoderConfig=n,this._hints.indexOf(Jn.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Yn(this,at.NEED_UPDATE_VIDEO_ENCODER,this)}catch(u){return u.throw(k)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Ao()||Vs())&&this._enabled&&!this._isClosed&&jn.duringInterruption){const n=async()=>{jn.off(Di.IOS_INTERRUPTION_END,n),this._enabled&&!this._isClosed&&(k.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};jn.on(Di.IOS_INTERRUPTION_END,n)}else k.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(qf.TRACK_ENDED)}async renewMediaStreamTrack(n){const i=n||this._constraints,a=Wa.searchDeviceIdByName(this._deviceName);if(a&&!i.deviceId&&(i.deviceId={exact:a}),this._enabled){const l=await za({video:i},this.getTrackId());this._constraints=i,await this._updateOriginMediaStreamTrack(l.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),jn.off(Di.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),jn.off(Di.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(n){let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],a=this._encoderConfig;n&&(a=fr(fr({},a),sl(n))),a=qd(a);const l=Xn(8,"track-cam-cloned-"),u=new NG(i?this._mediaStreamTrack.clone():this._mediaStreamTrack,qd(fr(fr({},this._config),{},{encoderConfig:a})),qd(this._constraints),qd(this._scalabilityMode),this._optimizationMode,l);return n&&a&&u.setEncoderConfiguration(a),k.debug("clone track from ".concat(this.getTrackId()," to ").concat(l,", clone ").concat(i)),u}bindProcessorContextEvents(){this.processorContext.on($a.REQUEST_UPDATE_CONSTRAINTS,async(n,i,a)=>{try{const l=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(l),i()}catch(l){a(l)}}),this.processorContext.on($a.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}},Sn(Ka.prototype,"setDevice",[T5,R5],Object.getOwnPropertyDescriptor(Ka.prototype,"setDevice"),Ka.prototype),Sn(Ka.prototype,"setEnabled",[w5,I5,A5],Object.getOwnPropertyDescriptor(Ka.prototype,"setEnabled"),Ka.prototype),Sn(Ka.prototype,"setEncoderConfiguration",[O5,x5],Object.getOwnPropertyDescriptor(Ka.prototype,"setEncoderConfiguration"),Ka.prototype),Sn(Ka.prototype,"close",[N5],Object.getOwnPropertyDescriptor(Ka.prototype,"close"),Ka.prototype),Ka);function gI(t,n,i,a){i.optimizationMode&&(a&&a.width&&a.height?(i.encoderConfig=fr(fr({},a),{},{bitrateMin:a.bitrateMin,bitrateMax:a.bitrateMax}),i.optimizationMode!=="motion"&&i.optimizationMode!=="detail"||(n.contentHint=i.optimizationMode,n.contentHint===i.optimizationMode?k.debug("[".concat(t,"] set content hint to"),i.optimizationMode):k.debug("[".concat(t,"] set content hint failed")))):k.warning("[".concat(t,"] can not apply optimization mode bitrate config, no encoderConfig")))}var P5,D5,L5,k5,ls,M5,F5,U5,B5,V5,j5,vo;class $5 extends q3{getUserId(){return this._userId}constructor(n,i,a,l){super(n,"track-".concat(n.kind,"-").concat(i,"-").concat(l.clientId,"_").concat(Xn(5,""))),Se(this,"_userId",void 0),Se(this,"_uintId",void 0),Se(this,"_isDestroyed",!1),Se(this,"store",void 0),Se(this,"processor",void 0),Se(this,"processorContext",void 0),this._userId=i,this._uintId=a,this.store=l}_updateOriginMediaStreamTrack(n){this._originMediaStreamTrack=n,this._mediaStreamTrack=n,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,k.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let ep=(P5=At({argsMap:(t,n,i)=>[t.getTrackId(),typeof n=="string"?n:n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",i]}),D5=At({argsMap:t=>[t.getTrackId()]}),L5=At({argsMap:(t,n)=>[t.getTrackId(),n.name]}),k5=At({argsMap:t=>[t.getTrackId()]}),Sn((ls=class extends $5{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==go.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(t,n,i,a){super(t,n,i,a),Se(this,"_videoVisibleTimer",null),Se(this,"_previousVideoVisibleStatus",void 0),Se(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),Se(this,"trackMediaType",Xf.VIDEO),Se(this,"_videoWidth",void 0),Se(this,"_videoHeight",void 0),Se(this,"_player",void 0),Se(this,"processorDestination",void 0),Se(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new aV(this.getTrackId(),"remote"),this.processorDestination=new oV(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return ku(()=>{k.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),Ua(this,at.GET_STATS)||fr({},G3)}play(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="string"){const a=document.getElementById(t);a?t=a:(k.warning("[".concat(this.getTrackId(),'] can not find "#').concat(t,'" element, use document.body')),t=document.body)}k.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(n));const i=fr(fr({fit:"cover"},n),{},{trackId:this.getTrackId(),element:t});this._player?this._player.updateConfig(i):(t instanceof HTMLVideoElement?this._player=new pI(i):this._player=new ZV(i),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(Yf.FIRST_FRAME_DECODED)},this._player.onVideoStateChanged=a=>{this.safeEmit(Yf.VIDEO_STATE_CHANGED,a)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const a=this.getVideoElementVisibleStatus();this.safeEmit(Yf.VIDEO_ELEMENT_VISIBLE_STATUS,a)}catch{}},Q("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,k.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){lV(this._originMediaStreamTrack).then(t=>{let[n,i]=t;this._videoHeight=i,this._videoWidth=n}).catch(F_)}_updatePlayerSource(){k.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var t,n;const i=this==null||(t=this._player)===null||t===void 0?void 0:t.getContainerElement(),a={track:this,element:this==null||(n=this._player)===null||n===void 0?void 0:n.getVideoElement(),slot:i==null?void 0:i.parentElement},{element:l,slot:u}=a;if(this.isPlaying&&l instanceof HTMLVideoElement&&u instanceof HTMLElement){const h=u3.checkOneElementVisible(l),p=Object.assign({},h);if(p.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=p.visible;const m=dt.reportApiInvoke(null,{tag:wr.TRACER,name:ei.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});p.visible?m.onSuccess("Video is visible"):m.onSuccess("Invisible because of ".concat(p.reason))}return p}return}catch(i){throw new we(X.GET_VIDEO_ELEMENT_VISIBLE_ERROR,i.message)}}pipe(t){if(this.processor===t)return t;if(t._source)throw new we(X.INVALID_OPERATION,"Processor ".concat(t.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=t,this.processor._source=this,t.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),t}unpipe(){if(!this.processor)return;const t=this.processor;this.processor._source=void 0,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Oo.ON_TRACK,async t=>{t?t!==this._mediaStreamTrack&&(this._mediaStreamTrack=t,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Oo.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(t){this.emit(Qd.SEI_RECEIVED,t)}}).prototype,"play",[P5],Object.getOwnPropertyDescriptor(ls.prototype,"play"),ls.prototype),Sn(ls.prototype,"stop",[D5],Object.getOwnPropertyDescriptor(ls.prototype,"stop"),ls.prototype),Sn(ls.prototype,"pipe",[L5],Object.getOwnPropertyDescriptor(ls.prototype,"pipe"),ls.prototype),Sn(ls.prototype,"unpipe",[k5],Object.getOwnPropertyDescriptor(ls.prototype,"unpipe"),ls.prototype),ls),tp=(M5=At({argsMap:(t,n)=>[t.getTrackId(),n],throttleTime:300}),F5=At({argsMap:(t,n)=>[t.getTrackId(),n]}),U5=At({argsMap:t=>[t.getTrackId()]}),B5=At({argsMap:t=>[t.getTrackId()]}),V5=At({argsMap:(t,n)=>[t.getTrackId(),n.name]}),j5=At({argsMap:t=>[t.getTrackId()]}),Sn((vo=class extends $5{get isPlaying(){return this._useAudioElement?Wo.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(t,n,i,a){super(t,n,i,a),Se(this,"trackMediaType",Xf.AUDIO),Se(this,"_source",void 0),Se(this,"_useAudioElement",!0),Se(this,"_volume",100),Se(this,"processorContext",void 0),Se(this,"processorDestination",void 0),Se(this,"_played",!1),Se(this,"_bypassWebAudio",!1),Q("DISABLE_WEBAUDIO")?(this._source=new hI,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new Q3(t,!0),Q("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(ja.RECEIVE_TRACK_BUFFER,()=>{this.safeEmit(Yf.FIRST_FRAME_DECODED)}),this.processorContext=new cV(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new sV(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(ja.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!t)return this._source.removeAllListeners(ja.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(n),this._source.removeAllListeners(ja.ON_AUDIO_BUFFER),this._source.on(ja.ON_AUDIO_BUFFER,i=>t(i))}setVolume(t){this._volume=t,this._useAudioElement?Wo.setVolume(this.getTrackId(),t):this._source.setVolume(t/100)}async setPlaybackDevice(t){if(!this._useAudioElement||!$3())throw new we(X.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Wo.setSinkID(this.getTrackId(),t)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return ku(()=>{k.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),Ua(this,at.GET_STATS)||fr({},W3)}play(){k.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(k.debug("[".concat(this.getTrackId(),"] use audio element to play")),Wo.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){k.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?Wo.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];k.debug("[".concat(this.getTrackId(),"] update player source track")),t&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Wo.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(t){if(this._bypassWebAudio)throw new we(X.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===t)return t;if(t._source)throw new we(X.INVALID_OPERATION,"Processor ".concat(t.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=t,this.processor._source=this,t.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),t}unpipe(){var t;if(this._bypassWebAudio)throw new we(X.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const n=this.processor;(t=this._source.processSourceNode)===null||t===void 0||t.disconnect(),this.processor._source=!1,this.processor=void 0,n.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Oo.ON_TRACK,async t=>{t?t!==this._mediaStreamTrack&&(this._mediaStreamTrack=t,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(t)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(Oo.ON_NODE,t=>{this._source.processedNode=t;const n=!t;this._useAudioElement!==n&&(this._played?(this.stop(),this._useAudioElement=n,this.play()):this._useAudioElement=n)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Oo.ON_TRACK),this.processorDestination.removeAllListeners(Oo.ON_NODE)}}).prototype,"setVolume",[M5],Object.getOwnPropertyDescriptor(vo.prototype,"setVolume"),vo.prototype),Sn(vo.prototype,"setPlaybackDevice",[F5],Object.getOwnPropertyDescriptor(vo.prototype,"setPlaybackDevice"),vo.prototype),Sn(vo.prototype,"play",[U5],Object.getOwnPropertyDescriptor(vo.prototype,"play"),vo.prototype),Sn(vo.prototype,"stop",[B5],Object.getOwnPropertyDescriptor(vo.prototype,"stop"),vo.prototype),Sn(vo.prototype,"pipe",[V5],Object.getOwnPropertyDescriptor(vo.prototype,"pipe"),vo.prototype),Sn(vo.prototype,"unpipe",[j5],Object.getOwnPropertyDescriptor(vo.prototype,"unpipe"),vo.prototype),vo);const Gl=new class extends Sr{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),Se(this,"_lastHiddenTime",0),Se(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),k.debug("current web page is ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}};class H5 extends Sr{constructor(n,i){super(),Se(this,"trackMediaType",Xf.DATA),Se(this,"_version",1),Se(this,"_type",3),Se(this,"_config",void 0),Se(this,"_originDataChannel",void 0),Se(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),Se(this,"_dataStreamPacketHandler",{serialize:a=>a,deserialize:a=>a}),Se(this,"_datachannelEventMap",new Map),this._config=n,i&&(this._originDataChannel=i,this._bandDataChannelEvents(i)),this._initPacketHeader()}useDataStream(n){this._dataStreamPacketHandler=n}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return Q("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var n,i;return(n=(i=this._originDataChannel)===null||i===void 0?void 0:i.readyState)!==null&&n!==void 0?n:"connecting"}get _originDataChannelId(){var n,i;return(n=(i=this._originDataChannel)===null||i===void 0?void 0:i.id)!==null&&n!==void 0?n:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new Ye((n,i)=>{if(this._originDataChannel){this._originDataChannel.readyState==="open"&&n();const a=setTimeout(()=>{var l;i(new we(X.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat((l=this._originDataChannel)===null||l===void 0?void 0:l.id)))},1e4);this._originDataChannel.onopen=()=>{clearTimeout(a),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),n()},this._originDataChannel.onerror=()=>{throw clearTimeout(a),new we(X.DATACHANNEL_CONNECTION_TIMEOUT)}}else i(new we(X.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))})}_updateOriginDataChannel(n){this._originDataChannel=n,this._bandDataChannelEvents(n)}_initPacketHeader(){const n=new DataView(this._dataStreamPacketHeader);n.setUint16(0,this._version),n.setUint8(2,this._type),n.setUint8(3,this._config.id)}_bandDataChannelEvents(n){this._unbindDataChannelEvents(n),[G_.OPEN,G_.CLOSE,G_.ERROR].forEach(i=>{const a=()=>{this.emit(i)};this._datachannelEventMap.set(i,a),n.addEventListener(i,a)})}_unbindDataChannelEvents(n){Array.from(this._datachannelEventMap.entries()).forEach(i=>{let[a,l]=i;n.removeEventListener(a,l)}),this._datachannelEventMap.clear()}}class Yhe extends H5{constructor(n){super(n),Se(this,"_messageListener",void 0),this._messageListener=i=>{if(i.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);const a=i.data.slice(0,this._dataStreamPacketHeader.byteLength),l=new DataView(a).getUint8(3);if(l!==this.id)return void(Q("SHOW_DATASTREAM2_LOG")&&k.debug("invalid datachannel id: ".concat(l," !== ").concat(this.id)));let u=i.data.slice(this._dataStreamPacketHeader.byteLength);u=this._dataStreamPacketHandler.deserialize(u),this.emit(G_.MESSAGE,u)}}_updateOriginDataChannel(n){super._updateOriginDataChannel(n),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}}class Xhe extends H5{send(n){if(this._originDataChannel){let i=n;i=this._dataStreamPacketHandler.serialize(n);const a=new Uint8Array(this._dataStreamPacketHeader.byteLength+i.byteLength);a.set(new Uint8Array(this._dataStreamPacketHeader),0),a.set(new Uint8Array(i),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(a.buffer)}}}function X_(){const t=new Blob([atob("ZnVuY3Rpb24gdCh0LGUsbil7bGV0IGE9bmV3IFVpbnQ4QXJyYXkodCxlLG4pLG89W10scj0wO2Zvcig7by5sZW5ndGg8bjspciszPG4mJjA9PT1hW3JdJiYwPT09YVtyKzFdJiYzPT09YVtyKzJdJiYoMD09PWFbciszXXx8MT09PWFbciszXXx8Mj09PWFbciszXXx8Mz09PWFbciszXSk/KG8ucHVzaChhW3JdLGFbcisxXSxhW3IrM10pLHIrPTQpOihvLnB1c2goYVtyXSkscisrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkobyl9ZnVuY3Rpb24gZSh0LGUpe2NvbnN0IG49ZnVuY3Rpb24odCl7Y29uc3QgZT10Lmxlbmd0aDtsZXQgbj1bXSxhPTA7Zm9yKDthPGU7KWErMjxlJiYwPT09dFthXSYmMD09PXRbYSsxXSYmKDA9PT10W2ErMl18fDE9PT10W2ErMl18fDI9PT10W2ErMl18fDM9PT10W2ErMl0pPyhuLnB1c2godFthXSx0W2ErMV0sMyx0W2ErMl0pLGErPTMpOihuLnB1c2godFthXSksYSsrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkobil9KGUpLGE9bi5sZW5ndGgsbz1NYXRoLmZsb29yKGEvMjU1KSxyPWElMjU1LHM9bmV3IFVpbnQ4QXJyYXkoNitvKzErYSt0LmJ5dGVMZW5ndGgpO3NbMF09MCxzWzFdPTAsc1syXT0wLHNbM109MSxzWzRdPTYsc1s1XT0xMDE7bGV0IGk9MDtmb3IoO2k8bzspc1s2K2ldPTI1NSxpKys7cmV0dXJuIHNbNitpXT1yLGkrKyxzLnNldChuLDYraSkscy5zZXQobmV3IFVpbnQ4QXJyYXkodCksNitpK2EpLHMuYnVmZmVyfWNvbnN0IG49NzEsYT0xLG89MixyPTEscz0yO3ZhciBpOyFmdW5jdGlvbih0KXt0W3QuQVVESU9fTEVWRUw9MV09IkFVRElPX0xFVkVMIix0W3QuTUVUQURBVEE9Ml09Ik1FVEFEQVRBIix0W3QuQVVESU9fNjRfQklUX1BUUz0zXT0iQVVESU9fNjRfQklUX1BUUyJ9KGl8fChpPXt9KSk7bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJTYWZhcmkiKT4tMSYmLTE9PT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkNocm9tZSIpJiYoc2VsZi5vbnJ0Y3RyYW5zZm9ybT1mPT57Y29uc3QgdT1mLnRyYW5zZm9ybWVyO2xldCBkPVtdLGw9W107dS5vcHRpb25zLnBvcnQub25tZXNzYWdlPXQ9Pnt0LmRhdGEuc2VpJiZkLnB1c2godC5kYXRhLnNlaSksdC5kYXRhLm1ldGFkYXRhJiZsLnB1c2godC5kYXRhLm1ldGFkYXRhKX0sc2VsZi5wb3N0TWVzc2FnZSgic3RhcnRlZCIpO2NvbnN0IGc9dS5yZWFkYWJsZS5nZXRSZWFkZXIoKSxjPXUud3JpdGFibGUuZ2V0V3JpdGVyKCk7InNlaS1yeCI9PT11Lm9wdGlvbnMubmFtZT9mdW5jdGlvbiBlKG4pe2cucmVhZCgpLnRoZW4oKGE9PntpZighYS5kb25lKXtpZihhLnZhbHVlIGluc3RhbmNlb2YgUlRDRW5jb2RlZFZpZGVvRnJhbWUpe2NvbnN0IGU9ZnVuY3Rpb24oZSl7Y29uc3Qgbj1uZXcgRGF0YVZpZXcoZS5kYXRhKTtsZXQgYT0wO2Zvcig7YSs0PGUuZGF0YS5ieXRlTGVuZ3RoOyl7aWYoMD09PW4uZ2V0VWludDgoYSswKSYmMD09PW4uZ2V0VWludDgoYSsxKSYmMD09PW4uZ2V0VWludDgoYSsyKSYmMT09PW4uZ2V0VWludDgoYSszKSYmNj09PW4uZ2V0VWludDgoYSs0KSl7bGV0IG89YSs2LHI9MCxzPTA7Zm9yKDsyNTU9PT0ocz1uLmdldFVpbnQ4KG8rKykpOylyKz0yNTU7cis9cztjb25zdCBpPXQoZS5kYXRhLG8scik7cmV0dXJuIG5ldyBVaW50OEFycmF5KGkpfWErK31yZXR1cm4gbnVsbH0oYS52YWx1ZSk7ZSYmbi5vcHRpb25zLnBvcnQucG9zdE1lc3NhZ2Uoe3NlaTplfSl9Yy53cml0ZShhLnZhbHVlKSxuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSxlKG4pfX0pKX0odSk6InNlaS10eCI9PT11Lm9wdGlvbnMubmFtZT9mdW5jdGlvbiB0KG4pe2cucmVhZCgpLnRoZW4oKGE9PntpZighYS5kb25lKXtpZihhLnZhbHVlIGluc3RhbmNlb2YgUlRDRW5jb2RlZFZpZGVvRnJhbWUpe2NvbnN0IHQ9ZC5zaGlmdCgpO3QmJihhLnZhbHVlLmRhdGE9ZShhLnZhbHVlLmRhdGEsdCkpfWMud3JpdGUoYS52YWx1ZSksbi5vcHRpb25zLnBvcnQucG9zdE1lc3NhZ2Uoe3RyYW5zZm9ybWVkOiEwfSksdChuKX19KSl9KHUpOiJhdWRpby1tZXRhZGF0YS1yeCI9PT11Lm9wdGlvbnMubmFtZT9mdW5jdGlvbiB0KGUpe2cucmVhZCgpLnRoZW4oKGY9PntpZighZi5kb25lKXtpZihmLnZhbHVlIGluc3RhbmNlb2YgUlRDRW5jb2RlZEF1ZGlvRnJhbWUpe2NvbnN0IHQ9ZnVuY3Rpb24odCxlPSExKXtjb25zdCBmPXQuZ2V0VWludDgoMCk7aWYoZiE9PW4pcmV0dXJuO2NvbnN0IHU9dC5nZXRVaW50MTYoMSksZD1hK28rdSxsPW5ldyBVaW50OEFycmF5KHQuYnl0ZUxlbmd0aC1kKTtsLnNldChuZXcgVWludDhBcnJheSh0LmJ1ZmZlcixkLHQuYnl0ZUxlbmd0aC1kKSk7Y29uc3QgZz17bTpmLHRsdkxlbjp1LHRsdjpbXSxmcmFtZTpsfTtsZXQgYz1hK287Zm9yKDtjPGQ7KXtjb25zdCBuPXQuZ2V0VWludDgoYyksYT10LmdldFVpbnQxNihjK3IpLG89citzO2lmKG49PT1pLkFVRElPX0xFVkVMKXtsZXQgcj10LmdldFVpbnQ4KGMrbyk7Zm9yKGxldCBlPTE7ZTxhO2UrKylyPXI8PDh8dC5nZXRVaW50OChjK28rZSk7Zy50bHYucHVzaCh7dGFnOm4sbGVuZ3RoOmEsdmFsdWU6ZT8xMjdecj4+MToxMjcmcn0pfWVsc2UgaWYobj09PWkuTUVUQURBVEF8fG49PT1pLkFVRElPXzY0X0JJVF9QVFMpe2NvbnN0IGU9bmV3IFVpbnQ4QXJyYXkoYSk7Zm9yKGxldCBuPTA7bjxhO24rKyllW25dPXQuZ2V0VWludDgoYytvK24pO2cudGx2LnB1c2goe3RhZzpuLGxlbmd0aDphLHZhbHVlOmV9KX1jKz1vK2F9cmV0dXJuIGd9KG5ldyBEYXRhVmlldyhmLnZhbHVlLmRhdGEpKTtpZih0KXtjb25zdCBuPXQudGx2LmZpbmQoKHQ9PnQudGFnPT09aS5NRVRBREFUQXx8dC50YWc9PT1pLkFVRElPXzY0X0JJVF9QVFMpKTtuJiZuLnZhbHVlIGluc3RhbmNlb2YgVWludDhBcnJheSYmZS5vcHRpb25zLnBvcnQucG9zdE1lc3NhZ2Uoe21ldGFkYXRhOm4udmFsdWV9KSxmLnZhbHVlLmRhdGE9dC5mcmFtZS5idWZmZXJ9fWMud3JpdGUoZi52YWx1ZSksZS5vcHRpb25zLnBvcnQucG9zdE1lc3NhZ2Uoe3RyYW5zZm9ybWVkOiEwfSksdChlKX19KSl9KHUpOiJhdWRpby1tZXRhZGF0YS10eCI9PT11Lm9wdGlvbnMubmFtZSYmZnVuY3Rpb24gdChlKXtnLnJlYWQoKS50aGVuKChmPT57aWYoIWYuZG9uZSl7aWYoZS5vcHRpb25zLnBvcnQucG9zdE1lc3NhZ2Uoe2dldE1ldGFkYXRhOiEwfSksZi52YWx1ZSBpbnN0YW5jZW9mIFJUQ0VuY29kZWRBdWRpb0ZyYW1lKXtjb25zdCB0PWwuc2hpZnQoKTt0JiYoZi52YWx1ZS5kYXRhPWZ1bmN0aW9uKHQsZSxpKXtjb25zdCBmPWkuYnl0ZUxlbmd0aCx1PWYrcitzLGQ9YStvK3UsbD1uZXcgQXJyYXlCdWZmZXIodC5ieXRlTGVuZ3RoK2QpLGc9bmV3IERhdGFWaWV3KGwpO2cuc2V0VWludDgoMCxuKSxnLnNldFVpbnQxNigxLHUpLGcuc2V0VWludDgoMyxlKSxnLnNldFVpbnQxNig0LGYpO2ZvcihsZXQgdD0wO3Q8Zjt0KyspZy5zZXRVaW50OCg2K3QsaVt0XSk7Y29uc3QgYz1uZXcgVWludDhBcnJheShnLmJ1ZmZlcik7cmV0dXJuIGMuc2V0KG5ldyBVaW50OEFycmF5KHQpLGQpLGMuYnVmZmVyfShmLnZhbHVlLmRhdGEsaS5BVURJT182NF9CSVRfUFRTLHQpKX1jLndyaXRlKGYudmFsdWUpLGUub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQoZSl9fSkpfSh1KX0sc2VsZi5wb3N0TWVzc2FnZSgicmVnaXN0ZXJlZCIpKTsK")],{type:"text/javascript"});return setTimeout(()=>XE.revokeObjectURL(t),0),new Worker(XE.createObjectURL(t))}const z5=71,vI=1,EI=2,_I=1,W5=2;var Kl=function(t){return t[t.AUDIO_LEVEL=1]="AUDIO_LEVEL",t[t.METADATA=2]="METADATA",t[t.AUDIO_64_BIT_PTS=3]="AUDIO_64_BIT_PTS",t}(Kl||{});function G5(t){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=t.getUint8(0);if(i!==z5)return;const a=t.getUint16(1),l=vI+EI+a,u=new Uint8Array(t.byteLength-l);u.set(new Uint8Array(t.buffer,l,t.byteLength-l));const h={m:i,tlvLen:a,tlv:[],frame:u};let p=vI+EI;for(;p<l;){const m=t.getUint8(p),E=t.getUint16(p+_I),y=_I+W5;if(m===Kl.AUDIO_LEVEL){let R=t.getUint8(p+y);for(let A=1;A<E;A++)R=R<<8|t.getUint8(p+y+A);h.tlv.push({tag:m,length:E,value:n?127^R>>1:127&R})}else if(m===Kl.METADATA||m===Kl.AUDIO_64_BIT_PTS){const R=new Uint8Array(E);for(let A=0;A<E;A++)R[A]=t.getUint8(p+y+A);h.tlv.push({tag:m,length:E,value:R})}p+=y+E}return h}const J_=new Map,Q_=127,th=1e-10,SI=139/13,Z_=new Map;function yI(t,n,i){const a="".concat(t,"-").concat(n,"-").concat(i);let l=0;return Z_.has(a)?l=Z_.get(a):(l=Math.log(function(h,p){const m=h-p;p<m&&(p=m);let E=1;for(let y=h,R=1;y>p;y--,R++)E=E*y/R;return E}(n,t))+t*Math.log(.5)+(n-t)*Math.log(1-.5)-Math.log(i)+i*t,Z_.set(a,l)),l<th&&(l=th),l}function K5(t,n,i){const a=n.length,l=t.length/a;let u=!1;for(let h=0,p=0;h<a;h++){let m=0;for(let E=p+l;p<E;p++)t[p]>i&&m++;n[h]!==m&&(n[h]=m,u=!0)}return u}window.cache=Z_;let Jhe=0;class q5{constructor(n){Se(this,"id",void 0),Se(this,"immediates",[]),Se(this,"lastNonSilence",-1),Se(this,"immediateSpeechActivityScore",th),Se(this,"lastLevelChangedTime",Date.now()),Se(this,"levels",[]),Se(this,"longs",[]),Se(this,"longSpeechActivityScore",th),Se(this,"mediums",[]),Se(this,"mediumSpeechActivityScore",th),Se(this,"minLevel",0),Se(this,"nextMinLevel",0),Se(this,"nextMinLevelWindowLength",0),Se(this,"energyScore",0),this.id=n||"".concat(Jhe++),this.immediates.length=50,this.mediums.length=10,this.longs.length=1,this.levels.length=this.immediates.length}computeImmediates(){const n=this.immediates,i=this.levels,a=this.minLevel+SI;let l=!1;for(let u=0;u<n.length;++u){let h=i[u];h<a&&(h=0);const p=Math.floor(h/SI);n[u]!==p&&(n[u]=p,l=!0)}return l}computeLongs(){return K5(this.mediums,this.longs,4)}computeMediums(){return K5(this.immediates,this.mediums,7)}evaluateImmediateSpeechActivityScore(){this.immediateSpeechActivityScore=yI(this.immediates[0],13,.78)}evaluateLongSpeechActivityScore(n){this.longSpeechActivityScore=yI(this.longs[0],10,47),this.longSpeechActivityScore>th&&(this.lastNonSilence=n)}evaluateMediumSpeechActivityScore(){this.mediumSpeechActivityScore=yI(this.mediums[0],5,24)}evaluateSpeechActivityScores(n){this.computeImmediates()&&(this.evaluateImmediateSpeechActivityScore(),this.computeMediums()&&(this.evaluateMediumSpeechActivityScore(),this.computeLongs()&&this.evaluateLongSpeechActivityScore(n)))}getLastLevelChangedTime(){return this.lastLevelChangedTime}getLevels(){var n;return"[".concat(FL(n=[...this.levels]).call(n).join(),"]")}getSpeechActivityScore(n){switch(n){case 0:return this.immediateSpeechActivityScore;case 1:return this.mediumSpeechActivityScore;case 2:return this.longSpeechActivityScore;default:throw new Error("interval "+n)}}levelChanged(n,i){if(this.lastLevelChangedTime<=i){this.lastLevelChangedTime=i;let a=n;return n<0&&(a=0),n>Q_&&(a=Q_),this.levels.unshift(a),this.levels.length>this.immediates.length&&this.levels.pop(),this.updateMinLevel(a),a>=this.minLevel+SI?a:a/2}return-1}levelTimedOut(){this.levelChanged(0,this.lastLevelChangedTime)}updateMinLevel(n){if(n!==0){if(this.minLevel===0||this.minLevel>n)return this.minLevel=n,this.nextMinLevel=0,void(this.nextMinLevelWindowLength=0);if(this.nextMinLevel===0)return this.nextMinLevel=n,void(this.nextMinLevelWindowLength=1);if(this.nextMinLevel>n&&(this.nextMinLevel=n),this.nextMinLevelWindowLength++,this.nextMinLevelWindowLength>=750){let i=Math.sqrt(this.minLevel*this.nextMinLevel);i<0?i=0:i>Q_&&(i=Q_),this.minLevel=i,this.nextMinLevel=0,this.nextMinLevelWindowLength=0}}}}class Qhe{constructor(n){Se(this,"algorithm",void 0),this.algorithm=n}execute(){let n=!this.algorithm;if(!n)try{const i=this.algorithm.runInDecisionMaker(this);i<=0?n=!0:setTimeout(this.execute.bind(this),i)}catch{n=!0}n&&this.algorithm&&this.algorithm.decisionMakerExited(this)}}class CI{constructor(n,i,a){Se(this,"isDominant",void 0),Se(this,"energyRanking",void 0),Se(this,"energyScore",void 0),this.isDominant=n,this.energyRanking=i,this.energyScore=a}}class Zhe extends Sr{constructor(n){super(),Se(this,"dominantId",null),Se(this,"lastDecisionTime",0),Se(this,"lastLevelChangedTime",0),Se(this,"lastLevelIdleTime",0),Se(this,"relativeSpeechActivities",[]),Se(this,"speakers",new Map),Se(this,"enableSilence",!1),Se(this,"timeoutToSilenceInterval",0),Se(this,"decisionMaker",null),Se(this,"loudest",[]),Se(this,"numLoudestToTrack",3),Se(this,"energyExpireTimeMs",250),Se(this,"energyAlphaPct",50),this.timeoutToSilenceInterval=n,this.enableSilence=n>0,this.relativeSpeechActivities.length=3}setLoudestConfig(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3,i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;this.numLoudestToTrack=n,i!=null&&(this.energyExpireTimeMs=i),a!=null&&(this.energyAlphaPct=a),this.loudest.length>n&&this.loudest.splice(n)}getDominantSpeaker(){return this.dominantId}isAmongLoudest(n){return this.loudest.some(i=>i.id===n)}levelChanged(n,i){const a=Date.now(),l=this.getOrCreateSpeaker(n);this.lastLevelChangedTime<a&&(this.lastLevelChangedTime=a,this.maybeStartDecisionMaker());const u=l.levelChanged(i,a);return this.updateLoudestList(l,u,a)}runInDecisionMaker(n){return this.decisionMaker!==n||this.lastDecisionTime>0&&this.lastDecisionTime-this.lastLevelChangedTime>=15e3?-1:this._runInDecisionMaker()}decisionMakerExited(n){this.decisionMaker===n&&(this.decisionMaker=null)}destroy(){this.decisionMaker=null,this.loudest.length=0,this.speakers.clear(),this.removeAllListeners()}addSpeakers(n){n.forEach(i=>{this.speakers.has(i.id)||this.speakers.set(i.id,i)})}removeSpeakers(n){n.forEach(i=>{this.speakers.delete(i.id)})}getOrCreateSpeaker(n){let i=this.speakers.get(n);return i||(i=new q5(n),this.speakers.set(n,i),this.maybeStartDecisionMaker()),i}updateLoudestList(n,i,a){const l=n.id===this.dominantId;if(i<0){let m=0;for(;m<this.loudest.length&&this.loudest[m]!==n;)++m;return new CI(l,m,n.energyScore)}if(n.energyScore=Math.floor((this.energyAlphaPct*i+(100-this.energyAlphaPct)*n.energyScore+50)/100),this.numLoudestToTrack===0)return new CI(l,0,n.energyScore);const u=a-this.energyExpireTimeMs;let h=0;for(;h<this.loudest.length;){const m=this.loudest[h];if(m.getLastLevelChangedTime()<u&&this.loudest.length>=this.numLoudestToTrack)this.loudest.splice(h,1);else if(m.id!==n.id)++h;else if(this.loudest.splice(h,1),this.loudest.length<this.numLoudestToTrack)break}let p=0;for(;p<this.loudest.length&&!(this.loudest[p].energyScore<n.energyScore);)++p;return p<this.numLoudestToTrack&&(this.loudest.splice(p,0,n),this.loudest.length>this.numLoudestToTrack&&this.loudest.splice(this.numLoudestToTrack,1)),new CI(l,p,n.energyScore)}maybeStartDecisionMaker(){!this.decisionMaker&&this.speakers.size>0&&(this.decisionMaker=new Qhe(this),this.decisionMaker.execute())}makeDecision(n){let i=null,a=null;const l=this.speakers.size;let u=null;if(l===0)u=null;else if(l===1){var h;const p=Ma(h=this.speakers).call(h).next().value;this.enableSilence&&p&&(u=p.id,p.evaluateSpeechActivityScores(n),n-p.lastNonSilence>this.timeoutToSilenceInterval&&(u=null))}else{let p=this.dominantId==null?null:this.speakers.get(this.dominantId);if(p==null){const y=this.speakers.entries().next();y.value&&(u=y.value[0],p=y.value[1])}else u=p.id;p!=null&&p.evaluateSpeechActivityScores(n);const m=this.relativeSpeechActivities;let E=2;for(const y of this.speakers.entries()){const[R,A]=y;if(A===p)continue;A.evaluateSpeechActivityScores(n);for(let $=0;$<m.length;++$){const K=p==null?th:p.getSpeechActivityScore($);m[$]=Math.log(A.getSpeechActivityScore($)/K)}const D=m[0],H=m[1],B=m[2];D>3&&H>2&&B>0&&H>E&&(E=H,u=R)}this.enableSilence&&p!=null&&u===p.id&&n-p.lastNonSilence>this.timeoutToSilenceInterval&&(u=null)}u==null&&!this.enableSilence||u===this.dominantId||(i=this.dominantId,this.dominantId=u,a=this.dominantId),a==null&&!this.enableSilence||a===i||this.emit("ActiveSpeakerChanged",a)}_runInDecisionMaker(){const n=Date.now(),i=300-(n-this.lastLevelIdleTime);let a=0;i<=0?(this.lastLevelIdleTime!==0&&this.timeoutIdleLevels(n),this.lastLevelIdleTime=n):a=i;let l=300-(n-this.lastDecisionTime);return l<=0&&(this.lastDecisionTime=n,this.makeDecision(n),l=300-(Date.now()-n)),l>0&&a>l&&(a=l),a}timeoutIdleLevels(n){const i=[];for(const l of Ma(a=this.speakers).call(a)){var a;const u=n-l.getLastLevelChangedTime();36e5<u&&(this.dominantId==null||l.id!==this.dominantId)?i.push(l.id):300<u&&l.levelTimedOut()}i.forEach(l=>this.speakers.delete(l))}}const np=new Map;let bc=null,eS=null;const Y5=3;let nh=[];const Tc=new Map,tS=new Map;class efe{get samples(){return this.actives+this.inactives}get activeRate(){return this.actives/this.samples}constructor(n,i){Se(this,"id",void 0),Se(this,"track",void 0),Se(this,"score",0),Se(this,"active",!0),Se(this,"muted",!1),Se(this,"timer",0),Se(this,"actives",0),Se(this,"inactives",0),this.id=n,this.track=i,this.setActive(Tc.size<3)}autoCheckActive(){this.autoSetActive(),this.autoAdjustActive(),this.resetTimer(),this.actives=0,this.inactives=0}autoSetActive(){const n=this.active;this.active=this.activeRate>=.8;const{actives:i,inactives:a}=function(){const l=[],u=[];return Array.from(Ma(Tc).call(Tc)).forEach(h=>{h.active?l.push(h):u.push(h)}),{actives:l,inactives:u}}();if(i.length>3){let l;i.forEach(u=>{(!l||l.score>u.score)&&(l=u)}),l&&l.setActive(!1)}if(i.length<3&&a.length>0){let l;a.forEach(u=>{(!l||l.score<u.score)&&u.id!==this.id&&(l=u)}),l&&n&&!this.active&&(l.samples>40&&l.activeRate-this.activeRate>.4?l.setActive(!0):this.active=!0)}this.setMuted(!this.active)}setActive(n){this.active=n,this.resetTimer(),this.setMuted(!n)}autoAdjustActive(){this.active?this.autoSwitchToInactive():this.autoSwitchToActive()}autoSwitchToActive(){const n=function(i){let a;return Array.from(Ma(Tc).call(Tc)).forEach(l=>{!l.active||l.id===i||l.samples<40||(!a||l.score<a.score)&&(a=l)}),a}(this.id);n&&this.activeRate-n.activeRate>.4&&(n.setActive(!1),this.setActive(!0))}autoSwitchToInactive(){const n=function(i){let a;return Array.from(Ma(Tc).call(Tc)).forEach(l=>{l.active||l.id===i||l.samples<40||(!a||l.score>a.score)&&(a=l)}),a}(this.id);n&&n.activeRate-this.activeRate>.4&&(n.setActive(!0),this.setActive(!1))}addSample(n){n?this.actives+=1:this.inactives+=1,this.samples>66.66666666666667&&this.autoCheckActive()}setMuted(n){this.track&&(this.track.enabled=!n,this.muted=n)}resetTimer(){this.clearTimer(),this.timer=window.setTimeout(()=>{if(this.samples!==0)return this.samples<50?this.resetTimer():void this.autoCheckActive()},1e3)}clearTimer(){this.timer&&(clearTimeout(this.timer),this.timer=0)}}let nS;function X5(t){const n=Tc.get(t);n&&(Tc.delete(t),n.clearTimer())}const rS=new Map,tfe=new Map;function nfe(t,n,i){let a=new Uint8Array(t,n,i),l=[],u=0;for(;l.length<i;)u+3<i&&a[u]===0&&a[u+1]===0&&a[u+2]===3&&(a[u+3]===0||a[u+3]===1||a[u+3]===2||a[u+3]===3)?(l.push(a[u],a[u+1],a[u+3]),u+=4):(l.push(a[u]),u++);return new Uint8Array(l)}const iS=new Map,O0=new Map;(function(){const t=En();Pi.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),Pi.getStreamFromExtension=t.name===On.CHROME&&Number(t.version)>34,Pi.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const n=new RTCPeerConnection;let i=!1;try{n.addTransceiver("audio"),i=!0}catch{}return n.close(),i}(),Pi.supportMinBitrate=t.name===On.CHROME||t.name===On.EDGE,Pi.supportSetRtpSenderParameters=function(){const n=En();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!Hl()||!(!Hi()&&!D_())||n.name===On.FIREFOX&&Number(n.version)>=64)}(),t.name===On.SAFARI&&(Number(t.version)>=14?Pi.supportDualStream=!0:Pi.supportDualStream=!1),Pi.webAudioMediaStreamDest=function(){const n=En();return!(n.name===On.SAFARI&&Number(n.version)<12)}(),Pi.supportReplaceTrack=!!window.RTCRtpSender&&typeof RTCRtpSender.prototype.replaceTrack=="function",Pi.supportWebGL=typeof WebGLRenderingContext<"u",Pi.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Hl()||(Pi.webAudioWithAEC=!0),Pi.supportShareAudio=function(){const n=En();return(n.os===Ei.WIN_10||n.os===Ei.WIN_81||n.os===Ei.WIN_7||n.os===Ei.LINUX||n.os===Ei.MAC_OS||n.os===Ei.CHROMIUM_OS)&&n.name===On.CHROME&&Number(n.version)>=74}(),Pi.supportDataChannel=!!(E0(76)||function(n){const i=En();return!(i.name!==On.FIREFOX||!i.osVersion)&&Number(i.version)>=n}(68)||t3(14)),Pi.supportPCSetConfiguration=function(){const n=window.RTCPeerConnection;return!Tr()&&!!n&&n.prototype.setConfiguration instanceof Function}(),Pi.supportWebRTCEncodedTransform=function(){const n=En();return n.name==="Chrome"&&Number(n.version)>=87||n.name==="Safari"&&Number(n.version)>=15}(),Pi.supportWebRTCInsertableStream=function(){const n=En();return(n.name===On.CHROME||n.name===On.EDGE)&&Number(n.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),Pi.supportRequestVideoFrameCallback="requestVideoFrameCallback"in HTMLVideoElement.prototype,Pi.supportWebCrypto=typeof window<"u"&&window.crypto!==void 0&&window.crypto.subtle!==void 0,M_(()=>{Pi.supportDualStreamEncoding=function(){const n=En();return!!Q("DISABLE_WEBAUDIO")||n.name==="Safari"&&Number(n.version)>=14||!!(n.name==="Chrome"&&/Windows/i.test(n.os||"")&&Number(n.version)>=100&&Q("CHROME_DUAL_STREAM_USE_ENCODING"))}(),k.debug("browser ua: ",navigator.userAgent),k.info("browser info: ",t),k.info("browser compatibility: ",Pi)})})();const rfe=["CHINA","GLOBAL"],J5=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],rh=[],rp=[];function ih(t,n){return!!n&&rh.some(i=>i.uid===t&&i.channelName===n)}function bI(){return rp.length>0}var ife=S4.forEach,Q5=fE("forEach")?[].forEach:function(t){return ife(this,t,arguments.length>1?arguments[1]:void 0)};$n({target:"Array",proto:!0,forced:[].forEach!=Q5},{forEach:Q5});var ofe=Ds("Array").forEach,afe=Qc,sfe=sn,cfe=T,lfe=ofe,TI=Array.prototype,ufe={DOMTokenList:!0,NodeList:!0},dfe=function(t){var n=t.forEach;return t===TI||cfe(TI,t)&&n===TI.forEach||sfe(ufe,afe(t))?lfe:n},hfe=c(dfe),ffe=xt,Z5=vE;$n({target:"Object",stat:!0,forced:d(function(){Z5(1)})},{keys:function(t){return Z5(ffe(t))}});var e6=c(ot.Object.keys),pfe=c(LL),mfe=c(ML),gfe=$n,t6=jm,vfe=OE,Efe=ut,n6=HT,_fe=Ul,Sfe=Ze,yfe=UE,Cfe=Un,bfe=xE,Tfe=u4("slice"),Rfe=Cfe("species"),RI=Array,wfe=Math.max;gfe({target:"Array",proto:!0,forced:!Tfe},{slice:function(t,n){var i,a,l,u=Sfe(this),h=_fe(u),p=n6(t,h),m=n6(n===void 0?h:n,h);if(t6(u)&&(i=u.constructor,(vfe(i)&&(i===RI||t6(i.prototype))||Efe(i)&&(i=i[Rfe])===null)&&(i=void 0),i===RI||i===void 0))return bfe(u,p,m);for(a=new(i===void 0?RI:i)(wfe(m-p,0)),l=0;p<m;p++,l++)p in u&&yfe(a,l,u[p]);return a.length=l,a}});var Ife=Ds("Array").slice,Afe=T,Ofe=Ife,wI=Array.prototype,xfe=function(t){var n=t.slice;return t===wI||Afe(wI,t)&&n===wI.slice?Ofe:n},Nfe=c(xfe);function st(t,n,i,a,l){var u,h,p,m={};return hfe(u=e6(a)).call(u,function(E){m[E]=a[E]}),m.enumerable=!!m.enumerable,m.configurable=!!m.configurable,("value"in m||m.initializer)&&(m.writable=!0),m=pfe(h=mfe(p=Nfe(i).call(i)).call(p)).call(h,function(E,y){return y(t,n,E)||E},m),l&&m.initializer!==void 0&&(m.value=m.initializer?m.initializer.call(l):void 0,m.initializer=void 0),m.initializer===void 0&&(a4(t,n,m),m=null),m}let oS=function(t){return t[t.ACCESS_POINT=101]="ACCESS_POINT",t[t.UNILBS=201]="UNILBS",t[t.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR",t}({}),II=function(t){return t[t.IIIEGAL_APPID=1]="IIIEGAL_APPID",t[t.IIIEGAL_UID=2]="IIIEGAL_UID",t[t.INTERNAL_ERROR=3]="INTERNAL_ERROR",t}({}),Hs=function(t){return t[t.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",t[t.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",t[t.INTERNAL_ERROR=8]="INTERNAL_ERROR",t[t.NO_AUTHORIZED=9]="NO_AUTHORIZED",t[t.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",t[t.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",t[t.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",t[t.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",t[t.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",t[t.USER_OVERLOAD=16]="USER_OVERLOAD",t[t.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",t[t.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND",t}({}),xo=function(t){return t[t.NO_FLAG_SET=100]="NO_FLAG_SET",t[t.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",t[t.INVALID_FALG_SET=102]="INVALID_FALG_SET",t[t.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",t[t.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",t[t.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",t[t.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",t[t.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",t[t.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",t[t.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",t[t.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",t[t.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",t[t.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",t[t.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",t[t.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",t[t.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",t[t.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",t[t.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",t[t.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV",t}({}),Tt=function(t){return t[t.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",t[t.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",t[t.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",t[t.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",t[t.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",t[t.K_TICKET_INVALID=7]="K_TICKET_INVALID",t[t.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",t[t.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",t[t.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",t[t.K_UID_BANNED=14]="K_UID_BANNED",t[t.K_IP_BANNED=15]="K_IP_BANNED",t[t.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",t[t.DATASTREAM2_NOT_AVAILABLE=27]="DATASTREAM2_NOT_AVAILABLE",t[t.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",t[t.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",t[t.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",t[t.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",t[t.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",t[t.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",t[t.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",t[t.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",t[t.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",t[t.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",t[t.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",t[t.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",t[t.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",t[t.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",t[t.ERR_INVALID_UID=117]="ERR_INVALID_UID",t[t.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",t[t.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",t[t.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",t[t.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",t[t.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",t[t.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",t[t.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",t[t.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",t[t.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",t[t.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",t[t.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",t[t.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",t[t.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",t[t.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",t[t.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",t[t.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",t[t.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",t[t.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",t[t.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",t[t.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",t[t.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",t[t.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",t[t.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",t[t.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",t[t.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",t[t.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",t[t.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",t[t.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",t[t.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",t[t.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",t[t.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",t[t.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",t[t.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",t[t.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",t[t.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",t[t.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",t[t.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY",t}({}),er=function(t){return t.CONNECTING="connecting",t.CONNECTED="connected",t.RECONNECTING="reconnecting",t.CLOSED="closed",t}({}),Mt=function(t){return t.WS_CONNECTED="ws_connected",t.WS_RECONNECTING="ws_reconnecting",t.WS_CLOSED="ws_closed",t.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",t.ON_BINARY_DATA="on_binary_data",t.REQUEST_RECOVER="request_recover",t.REQUEST_JOIN_INFO="request_join_info",t.REQUEST_REJOIN_INFO="req_rejoin_info",t.IS_P2P_DISCONNECTED="is_p2p_dis",t.DISCONNECT_P2P="dis_p2p",t.ABORT_P2P_EXECUTION="abort_p2p_execution",t.NEED_RENEW_SESSION="need-sid",t.REPORT_JOIN_GATEWAY="report_join_gateway",t.REQUEST_TIMEOUT="request_timeout",t.REQUEST_SUCCESS="request_success",t.JOIN_RESPONSE="join_response",t.PRE_CONNECT_PC="pre_connect_pc",t.P2P_CONNECTION="p2p_connection",t.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",t.P2P_SUBSCRIBE="p2p_subscribe",t.P2P_UNSUBSCRIBE="p2p_unsubscribe",t.P2P_EXCHANGE_SDP="p2p_exchange_sdp",t.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",t.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream",t.RECOVER_NOTIFICATION="recover_notification",t}({}),Dt=function(t){return t.PING="ping",t.PING_BACK="ping_back",t.JOIN="join_v3",t.REJOIN="rejoin_v3",t.LEAVE="leave",t.SET_CLIENT_ROLE="set_client_role",t.PUBLISH="publish",t.PUBLISH_DATASTREAM="publish_datastream",t.UNPUBLISH="unpublish",t.UNPUBLISH_DATASTREAM="unpublish_datastream",t.SUBSCRIBE="subscribe",t.PRE_SUBSCRIBE="pre_subscribe",t.SUBSCRIBE_DATASTREAM="subscribe_datastream",t.SUBSCRIBE_STREAMS="subscribe_streams",t.UNSUBSCRIBE="unsubscribe",t.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",t.UNSUBSCRIBE_STREAMS="unsubscribe_streams",t.SUBSCRIBE_CHANGE="subscribe_change",t.TRAFFIC_STATS="traffic_stats",t.RENEW_TOKEN="renew_token",t.SWITCH_VIDEO_STREAM="switch_video_stream",t.DEFAULT_VIDEO_STREAM="default_video_stream",t.SET_FALLBACK_OPTION="set_fallback_option",t.GATEWAY_INFO="gateway_info",t.CONTROL="control",t.SEND_METADATA="send_metadata",t.DATA_STREAM="data_stream",t.PICK_SVC_LAYER="pick_svc_layer",t.RESTART_ICE="restart_ice",t.CONNECT_PC="connect_pc",t.SET_VIDEO_PROFILE="set_video_profile",t.SET_PARAMETER="set_parameter",t.SET_RTM2_FLAG="set_rtm2_flag",t}({}),x0=function(t){return t.WRTC_STATS="wrtc_stats",t.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",t.DENOISER_STATS="denoiser_stats",t.EXTENSION_USAGE_STATS="extension_usage_stats",t}({}),un=function(t){return t.ON_USER_ONLINE="on_user_online",t.ON_USER_OFFLINE="on_user_offline",t.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",t.ON_PUBLISH_STREAM="on_publish_stream",t.ON_UPLINK_STATS="on_uplink_stats",t.ON_P2P_LOST="on_p2p_lost",t.ON_REMOVE_STREAM="on_remove_stream",t.ON_ADD_AUDIO_STREAM="on_add_audio_stream",t.ON_ADD_VIDEO_STREAM="on_add_video_stream",t.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",t.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",t.ON_USER_BANNED="on_user_banned",t.ON_USER_LICENSE_BANNED="on_user_license_banned",t.ON_NOTIFICATION="on_notification",t.ON_CRYPT_ERROR="on_crypt_error",t.MUTE_AUDIO="mute_audio",t.MUTE_VIDEO="mute_video",t.UNMUTE_AUDIO="unmute_audio",t.UNMUTE_VIDEO="unmute_video",t.ON_P2P_OK="on_p2p_ok",t.RECEIVE_METADATA="receive_metadata",t.ON_DATA_STREAM="on_data_stream",t.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",t.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",t.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",t.ENABLE_LOCAL_VIDEO="enable_local_video",t.DISABLE_LOCAL_VIDEO="disable_local_video",t.ENABLE_LOCAL_AUDIO="enable_local_audio",t.DISABLE_LOCAL_AUDIO="disable_local_audio",t.ON_PUBLISHED_USER_LIST="on_published_user_list",t}({}),No=function(t){return t.SEND_ONLY="SEND_ONLY",t.RECEIVE_ONLY="RECEIVE_ONLY",t}({}),qt=function(t){return t.CONNECTED="websocket:connected",t.RECONNECTING="websocket:reconnecting",t.WILL_RECONNECT="websocket:will_reconnect",t.CLOSED="websocket:closed",t.FAILED="websocket:failed",t.ON_MESSAGE="websocket:on_message",t.REQUEST_NEW_URLS="websocket:request_new_urls",t.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",t.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire",t}({});function aS(t){if(typeof t!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(t))throw k.error("Invalid Channel Name ".concat(t)),new ye(X.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function sS(t){if(n=t,!(typeof n=="number"&&Math.floor(n)===n&&0<=n&&n<=4294967295||l3(t,1,255)))throw new ye(X.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var n;typeof t=="string"&&k.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}let ul=function(t){return t.TRANSCODE="mix_streaming",t.RAW="raw_streaming",t}({});const Pfe={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},AI={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function OI(t,n){xi(t.url,"".concat(n,".url"),1,1e3,!1),Rr(t.x)||zn(t.x,"".concat(n,".x"),0,1e4),Rr(t.y)||zn(t.y,"".concat(n,".y"),0,1e4),Rr(t.width)||zn(t.width,"".concat(n,".width"),0,1e4),Rr(t.height)||zn(t.height,"".concat(n,".height"),0,1e4),Rr(t.zOrder)||zn(t.zOrder,"".concat(n,".zOrder"),0,255),Rr(t.alpha)||zn(t.alpha,"".concat(n,".alpha"),0,1,!1)}const Dfe={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""};let Uu=function(t){return t.WARNING="@live_uap-warning",t.ERROR="@line_uap-error",t.PUBLISH_STREAM_STATUS="@live_uap-publish-status",t.WORKER_STATUS="@live_uap-worker-status",t.REQUEST_NEW_ADDRESS="@live_uap-request-address",t}({}),xI=function(t){return t.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager",t}({}),hi=function(t){return t[t.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",t[t.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",t[t.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",t[t.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",t[t.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",t[t.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",t[t.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",t[t.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",t[t.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",t[t.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",t[t.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",t[t.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",t[t.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",t[t.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",t[t.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",t[t.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",t[t.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",t[t.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",t[t.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",t[t.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",t[t.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN",t}({});function r6(t){if(!t.channelName)throw new ye(X.INVALID_PARAMS,"invalid channelName in info");if(typeof t.uid!="number")throw new ye(X.INVALID_PARAMS,"invalid uid in info, uid must be a number");return t.token&&xi(t.token,"info.token",1,2047),sS(t.uid),aS(t.channelName),!0}let Po=function(t){return t[t.SetSdkProfile=0]="SetSdkProfile",t[t.SetSourceChannel=1]="SetSourceChannel",t[t.SetSourceUserId=2]="SetSourceUserId",t[t.SetDestChannel=3]="SetDestChannel",t[t.StartPacketTransfer=4]="StartPacketTransfer",t[t.StopPacketTransfer=5]="StopPacketTransfer",t[t.UpdateDestChannel=6]="UpdateDestChannel",t[t.Reconnect=7]="Reconnect",t[t.SetVideoProfile=8]="SetVideoProfile",t}({}),ql=function(t){return t.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",t.NETWORK_CONNECTED="NETWORK_CONNECTED",t.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",t.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",t.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",t.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",t.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",t.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",t.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",t.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE",t}({}),ca=function(t){return t.RELAY_STATE_IDLE="RELAY_STATE_IDLE",t.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",t.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",t.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE",t}({}),ip=function(t){return t.RELAY_OK="RELAY_OK",t.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",t.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",t.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED",t}({}),Mn=function(t){return t.High="high",t.Low="low",t.Audio="audio",t.Screen="screen",t.ScreenLow="screen_low",t}({}),Ri=function(t){return t.DISCONNECT="disconnect",t.CONNECTION_STATE_CHANGE="connection-state-change",t.NETWORK_QUALITY="network-quality",t.STREAM_TYPE_CHANGE="stream-type-change",t.IS_P2P_DISCONNECTED="is-p2p-dis",t.DISCONNECT_P2P="dis-p2p",t.REQUEST_NEW_GATEWAY_LIST="req-gate-url",t.NEED_RENEW_SESSION="need-sid",t.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",t.JOIN_RESPONSE="join-response",t.RESET_CONNECTION_EVENTS="reset-connection-events",t.PRE_CONNECT_PC="pre-connect_pc",t.UPDATE_GATEWAY_CONFIG="update-gateway-config",t}({}),cS=function(t){return t.P2P_DISCONNECTED="P2P_DISCONNECTED",t.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",t.TIMEOUT="TIMEOUT",t.UNKNOWN_REASON="UNKNOWN_REASON",t}({}),Si=function(t){return t[t.Nothing=0]="Nothing",t[t.Audio=1]="Audio",t[t.LwoVideo=2]="LwoVideo",t[t.Video=4]="Video",t[t.Data=8]="Data",t[t.DataStream0=256]="DataStream0",t[t.DataStream1=512]="DataStream1",t[t.DataStream2=1024]="DataStream2",t[t.DataStream3=2048]="DataStream3",t[t.DataStream4=4096]="DataStream4",t[t.DataStream5=8192]="DataStream5",t[t.DataStream6=16384]="DataStream6",t[t.DataStream7=32768]="DataStream7",t}({}),xn=function(t){return t.CHINA="CHINA",t.ASIA="ASIA",t.NORTH_AMERICA="NORTH_AMERICA",t.EUROPE="EUROPE",t.JAPAN="JAPAN",t.INDIA="INDIA",t.KOREA="KOREA",t.HKMC="HKMC",t.US="US",t.OCEANIA="OCEANIA",t.SOUTH_AMERICA="SOUTH_AMERICA",t.AFRICA="AFRICA",t.OVERSEA="OVERSEA",t.GLOBAL="GLOBAL",t.EXTENSIONS="EXTENSIONS",t}({});const i6=[xn.AFRICA,xn.ASIA,xn.CHINA,xn.EUROPE,xn.GLOBAL,xn.INDIA,xn.JAPAN,xn.NORTH_AMERICA,xn.OCEANIA,xn.OVERSEA,xn.SOUTH_AMERICA];let Qi=function(t){return t.CHINA="CN",t.ASIA="AS",t.NORTH_AMERICA="NA",t.EUROPE="EU",t.JAPAN="JP",t.INDIA="IN",t.KOREA="KR",t.HKMC="HK",t.US="US",t.OCEANIA="OC",t.SOUTH_AMERICA="SA",t.AFRICA="AF",t.OVERSEA="OVERSEA",t.GLOBAL="GLOBAL",t.EXTENSIONS="GLOBAL",t}({});const lS={CHINA:{},ASIA:{CODE:Qi.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Qi.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Qi.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Qi.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Qi.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Qi.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:Qi.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:Qi.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Qi.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Qi.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Qi.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Qi.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Qi.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};Jw&&(lS.CHINA={CODE:Qi.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]});let N0=function(t){return t.UPDATE_BITRATE_LIMIT="update_bitrate_limit",t.UPDATE_CLIENT_ROLE_OPTIONS="update_client_role_options",t}({});function o6(t){return!!t&&!(!t.uplink||!t.id)&&t.uplink.max_bitrate!==void 0&&t.uplink.min_bitrate!==void 0}class a6 extends Sr{constructor(n,i){super(),G(this,"onICEConnectionStateChange",void 0),G(this,"onConnectionStateChange",void 0),G(this,"onDTLSTransportStateChange",void 0),G(this,"onDTLSTransportError",void 0),G(this,"onICETransportStateChange",void 0),G(this,"onFirstAudioReceived",void 0),G(this,"onFirstVideoReceived",void 0),G(this,"onFirstAudioDecoded",void 0),G(this,"onFirstVideoDecoded",void 0),G(this,"onFirstVideoDecodedTimeout",void 0),G(this,"onSelectedLocalCandidateChanged",void 0),G(this,"onSelectedRemoteCandidateChanged",void 0),G(this,"onICECandidateError",void 0),G(this,"getLocalVideoStats",void 0)}}class s6 extends a6{constructor(n,i){super(n,i),G(this,"establishPromise",void 0)}}let it=function(t){return t.VIDEO="video",t.AUDIO="audio",t}({}),Zi=function(t){return t.UDP_RELAY="udp_relay",t.UDP_TCP_RELAY="udp_tcp_relay",t.TCP_RELAY="tcp_relay",t.RELAY="relay",t}({}),Yl=function(t){return t[t.FIRST_CONNECTION=0]="FIRST_CONNECTION",t[t.UDP_TCP_RESTART=1]="UDP_TCP_RESTART",t[t.RELAY_RESTART=2]="RELAY_RESTART",t[t.TCP_RESTART=3]="TCP_RESTART",t[t.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",t[t.OLD_RESTART=11]="OLD_RESTART",t[t.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED",t}({});const c6=["disconnected","failed"];let Le=function(t){return t.LocalVideoTrack="videoTrack",t.LocalAudioTrack="audioTrack",t.LocalVideoLowTrack="videoLowTrack",t}({}),kn=function(t){return t.New="new",t.Connected="connected",t.Reconnecting="reconnecting",t.Disconnected="disconnected",t}({}),Et=function(t){return t.AudioMetadata="audioMetadata",t.StateChange="stateChange",t.IceConnectionStateChange="iceConnectionStateChange",t.RequestMuteLocal="requestMuteLocal",t.RequestUnmuteLocal="requestUnmuteLocal",t.RequestRePublish="requestRePublish",t.RequestRePublishDataChannel="requestRePublishDataChannel",t.RequestReSubscribe="requestReSubscribe",t.RequestUploadStats="requestUploadStats",t.RequestUpload="requestUpload",t.MediaReconnectStart="MediaReconnectStart",t.MediaReconnectEnd="MediaReconnectEnd",t.NeedSignalRTT="NeedSignalRTT",t.RequestRestartICE="RequestRestartIce",t.PeerConnectionStateChange="PeerConnectionStateChange",t.RequestReconnect="RequestReconnect",t.RequestReconnectPC="RequestReconnectPC",t.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",t.P2PLost="P2PLost",t.UpdateVideoEncoder="UpdateVideoEncoder",t.ConnectionTypeChange="ConnectionTypeChange",t.RequestLowStreamParameter="RequestLowStreamParameter",t.QueryClientConnectionState="QueryClientConnectionState",t.LocalCandidate="LocalCandidate",t.RequestP2PMuteLocal="requestP2PMuteLocal",t.RequestP2PUnPublish="RequestP2PUnPublish",t.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",t.RequestP2PMuteRemote="RequestP2PMuteRemote",t.RequestP2PRestartICE="RequestP2PRestartICE",t}({}),zs=function(t){return t.CONNECTING="CONNECTING",t.RECONNECTING="RECONNECTING",t.CONNECTED="CONNECTED",t.CLOSED="CLOSED",t}({}),Ws=function(t){return t[t.CONNECT_AP=0]="CONNECT_AP",t[t.AP_CONNECTED=1]="AP_CONNECTED",t[t.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",t[t.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",t[t.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",t[t.CONNECT_WORKER=5]="CONNECT_WORKER",t[t.WORKER_CONNECTED=6]="WORKER_CONNECTED",t[t.CLOSED=7]="CLOSED",t}({}),wi=function(t){return t.CONNECTION_STATE_CHANGE="connection-state-change",t.STATE_CHANGE="state-change",t.INSPECT_RESULT="inspect-result",t.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",t.REQUEST_NEW_WORKER_URL="request-new-worker-url",t}({}),l6=function(t){return t.CONNECTED="transmitter:connected",t.RECONNECTING="transmitter:reconnecting",t.WILL_RECONNECT="transmitter:will_reconnect",t.CLOSED="transmitter:closed",t.FAILED="transmitter:failed",t.ON_MESSAGE="transmitter:on_message",t.REQUEST_NEW_URLS="transmitter:request_new_urls",t.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",t.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",t.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",t.FAILBACK="transmitter:failback",t.PRE_CONNECT_PC="transmitter:pre_connect_pc",t}({}),dl=function(t){return t.CAMERA_CHANGED="camera-changed",t.MICROPHONE_CHANGED="microphone-changed",t.PLAYBACK_DEVICE_CHANGED="playback-device-changed",t.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",t.AUTOPLAY_FAILED="autoplay-failed",t.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",t.SECURITY_POLICY_VIOLATION="security-policy-violation",t}({}),us=function(t){return t.CONNECTING="CONNECTING",t.RECONNECTING="RECONNECTING",t.CONNECTED="CONNECTED",t.CLOSED="CLOSED",t}({}),Rc=function(t){return t.CONNECTION_STATE_CHANGE="connection-state-change",t.STATE_CHANGE="state-change",t.INSPECT_RESULT="inspect-result",t.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",t.REQUEST_NEW_WORKER_URL="request-new-worker-url",t}({}),op=function(t){return t[t.CONNECT_AP=0]="CONNECT_AP",t[t.AP_CONNECTED=1]="AP_CONNECTED",t[t.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",t[t.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",t[t.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",t[t.CONNECT_WORKER=5]="CONNECT_WORKER",t[t.WORKER_CONNECTED=6]="WORKER_CONNECTED",t[t.CLOSED=7]="CLOSED",t}({}),Br=function(t){return t.CALL="call",t.CANDIDATE="candidate",t.PUBLISH="publish",t.UNPUBLISH="unpublish",t.CONTROL="control",t.RESTART_ICE="restart_ice",t.ACK="ack",t.RESPONSE="response",t.JOIN="join",t.CHECK="check",t}({}),ap=function(t){return t.ABORT="abort",t}({}),Bu=function(t){return t.MUTE_LOCAL_AUDIO="mute_local_audio",t.MUTE_LOCAL_VIDEO="mute_local_video",t.UNMUTE_LOCAL_AUDIO="unmute_local_audio",t.UNMUTE_LOCAL_VIDEO="unmute_local_video",t}({}),Lfe=function(t){return t.P2P_TOKEN_TIMEOUT="p2p_token_timeout",t.P2P_TOKEN_CHANGED="p2p_token_changed",t}({});const kfe={[oS.ACCESS_POINT]:{[xo.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[xo.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[xo.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[xo.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[xo.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[xo.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[xo.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[xo.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[xo.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[xo.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[xo.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[xo.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[xo.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[xo.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[xo.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[xo.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[xo.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[xo.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[oS.UNILBS]:{[Hs.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Hs.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Hs.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Hs.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Hs.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Hs.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Hs.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Hs.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Hs.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Hs.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Hs.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Hs.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[oS.STRING_UID_ALLOCATOR]:{[II.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[II.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[II.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function sp(t){const n=kfe[Math.floor(t/1e4)];if(!n)return{desc:"unknown error",retry:!1};const i=n[t%1e4];if(!i){if(Math.floor(t/1e4)===oS.ACCESS_POINT){const a=t%1e4;if(a.toString()[0]==="1")return{desc:t.toString(),retry:!1};if(a.toString()[0]==="2")return{desc:t.toString(),retry:!0}}return{desc:"unknown error",retry:!1}}return i}const Mfe={[Tt.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[Tt.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[Tt.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[Tt.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[Tt.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[Tt.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[Tt.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[Tt.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[Tt.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[Tt.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[Tt.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[Tt.DATASTREAM2_NOT_AVAILABLE]:{desc:"DATASTREAM2_NOT_AVAILABLE",action:"quit"},[Tt.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[Tt.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Tt.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Tt.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[Tt.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[Tt.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[Tt.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[Tt.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[Tt.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[Tt.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[Tt.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[Tt.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[Tt.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[Tt.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[Tt.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[Tt.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[Tt.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[Tt.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[Tt.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[Tt.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[Tt.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[Tt.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[Tt.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[Tt.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[Tt.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[Tt.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[Tt.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[Tt.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[Tt.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[Tt.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Tt.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Tt.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[Tt.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[Tt.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[Tt.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[Tt.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[Tt.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[Tt.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[Tt.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[Tt.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[Tt.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[Tt.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[Tt.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[Tt.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[Tt.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[Tt.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[Tt.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[Tt.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[Tt.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[Tt.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[Tt.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[Tt.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function P0(t){return Mfe[t]||{desc:"UNKNOWN_ERROR_".concat(t),action:"failed"}}function u6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function NI(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?u6(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function d6(t,n){if(typeof t=="string")return t;const{proxy:i,host:a,port:l}=t;if(n){const u=Q("JOIN_GATEWAY_FALLBACK_PORT")||443;return u===443?"wss://".concat(a,"/ws/?p=").concat(Number(l)+150):"wss://".concat(a,":").concat(u,"/ws/?p=").concat(Number(l)+150)}return i?"wss://".concat(i,"/ws/?h=").concat(a,"&p=").concat(l):"wss://".concat(a,":").concat(l)}const Ffe=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,Ufe=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,Bfe=/wss:\/\/(.+):([0-9]+)\/?/,Vfe=/wss:\/\/(.[^\/]+)\/?/;let jfe=0;class $fe{constructor(n,i){G(this,"id",0),G(this,"store",void 0),G(this,"recordIndex",void 0),G(this,"websockets",[]),G(this,"try443PortDuration",2e3),G(this,"forceCloseWSDuration",5e3),G(this,"try443PortTimeout",null),G(this,"forceCloseTimeout",null),G(this,"isTry443PortFailed",!1),G(this,"isNormalPortFailed",!1),G(this,"useDoubleDomain",!1),G(this,"useProxy",!1),G(this,"startTime",Date.now()),this.id=++jfe,this.try443PortDuration=Q("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=n||5e3,this.store=i}closeAllWebsockets(){this.websockets.forEach(n=>{n.onopen=null,n.onclose=null,n.onmessage=null,n.close()}),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout),this.forceCloseTimeout=null,this.try443PortTimeout=null}logger(){var n;const i=Date.now()-this.startTime;for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];k.debug("[choose-best-ws ".concat((n=this.store)===null||n===void 0?void 0:n.clientId," ").concat(this.id,"] ").concat(i,"ms:"),...l)}createWebSocket(n,i,a){this.logger("createWebSocket:",n,{isTry443Port:i,hasTimeoutDetection:a});const l=Q("GATEWAY_DOMAINS"),u=Date.now(),h=[],p=l.find(A=>{var D;return Ke(D=n.host).call(D,A)});p||(this.useDoubleDomain=!1);const m=[];if(this.useDoubleDomain)l.forEach(A=>{m.push(d6(NI(NI({},n),{},{host:n.host.replace(p,A)}),i))});else{const A=NI({},n);if(i&&p){const D=l.find(H=>H!==p);D&&(A.host=A.host.replace(p,D))}m.push(d6(A,i))}try{m.forEach(A=>{const D=new WebSocket(A);D.binaryType="arraybuffer",h.push(D),this.logger("ws is connecting:",D.url)})}catch(A){if(this.logger("ws create failed"),h.forEach(D=>D.close()),h.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(n,i,a);if(!i&&Number(n.port)!==443)return this.createWebSocket(n,!0,a);throw new ye(X.WS_ERR,"init websocket failed! Error: ".concat(A.toString()))}const E=v0();this.store&&this.store.recordJoinChannelService({urls:h.map(A=>A.url),service:"gateway"},this.recordIndex),h.forEach(A=>{A.onopen=()=>{this.logger("onopen: ws ".concat(A.url," open cost ").concat(Date.now()-u,"ms")),this.websockets.forEach(D=>{D!==A&&(D.onopen=null,D.onclose=null,D.onmessage=null,D.close(),this.logger("close backup websocket: ".concat(D.url)))}),this.websockets.length=0,E.resolve(A)},A.onclose=D=>{this.logger("onclose: ws ".concat(A.url," closed cost ").concat(Date.now()-u,"ms state: ").concat(A.readyState));const H=h.every(B=>B.readyState===WebSocket.CLOSED||B.readyState===WebSocket.CLOSING);this.logger("".concat(i?"443":"47xx"," websocket closed, all failed: ").concat(H)),H&&(i||this.isTry443PortFailed||this.useProxy)?(this.logger("onclose: all websocket is closed, ".concat(D.reason)),E.reject({code:D.code,reason:cS.A_ROUND_WS_FAILED})):!i&&H&&!this.isNormalPortFailed&&this.try443PortTimeout&&(this.logger("all 47xx websocket is closed, try 443 port"),this.clearTimeout(),R()),i?this.isTry443PortFailed=H:this.isNormalPortFailed=H},A.onmessage=D=>this.logger("".concat(A.url," onmessage: ").concat(D.data))}),this.websockets.push(...h);const y=()=>{this.websockets.forEach(A=>A.readyState!==WebSocket.OPEN&&A.close())},R=()=>{if(E.isResolved)return y();En().os===Ei.MAC_OS&&Tr()&&y(),this.createWebSocket(n,!0,!0).then(A=>{E.resolve(A)}).catch(A=>{this.isNormalPortFailed&&E.reject(A),this.logger("try 443 port to create ws failed")}),this.forceCloseTimeout=window.setTimeout(()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",E.isResolved),this.forceCloseTimeout=null,y()},this.forceCloseWSDuration)};return a||(()=>{if(i||this.useProxy)return this.logger("add 5s timeout at ".concat(i?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout(()=>{this.forceCloseTimeout=null,y()},this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout(()=>{this.logger("2s timeout, isWebsocket created: ",E.isResolved),this.try443PortTimeout=null,R()},this.try443PortDuration)})(),E.promise}chooseBestWebsocket(n,i,a,l){return this.useDoubleDomain=!!i,typeof n=="string"&&(n=function(u){let h,p,m;return[,h,p,m]=u.match(Ffe)||[],h||([,p,m]=u.match(Ufe)||[]),p&&m||([,p,m]=u.match(Bfe)||[]),p&&m||([,p]=u.match(Vfe)||[]),p||k.warning("un-destructible url: ",u),{proxy:h,host:p,port:m||"443"}}(n)),this.recordIndex=l,this.useProxy=!!n.proxy,a&&this.useProxy&&(k.warn("cannot use 443 only when use proxy"),a=!1),this.createWebSocket(n,!!a,!1).finally(()=>this.clearTimeout())}}function h6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}class f6 extends Sr{get url(){return this.websocket&&this.websocket.url||null}get reconnectMode(){return this._reconnectMode}set reconnectMode(n){var i;Ke(i=["tryNext","recover"]).call(i,n)&&this.resetReconnectCount(n),this._reconnectMode=n}get state(){return this._state}set state(n){n!==this._state&&(this._state=n,this._state==="reconnecting"?this.emit(qt.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(qt.CONNECTED):this._state==="closed"?this.emit(qt.CLOSED):this._state==="failed"&&this.emit(qt.FAILED))}resetReconnectCount(n){k.debug("websocket reset reconnect count, reason: "+n),this.reconnectCount=0}constructor(n,i){let a=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=arguments.length>3&&arguments[3]!==void 0&&arguments[3],u=arguments.length>4&&arguments[4]!==void 0&&arguments[4],h=arguments.length>5?arguments[5]:void 0;super(),G(this,"connectionID",0),G(this,"currentURLIndex",0),G(this,"urls",[]),G(this,"_reconnectMode","tryNext"),G(this,"reconnectReason",void 0),G(this,"_initMutex",void 0),G(this,"name",void 0),G(this,"_state","closed"),G(this,"reconnectInterrupter",void 0),G(this,"websocket",void 0),G(this,"retryConfig",void 0),G(this,"reconnectCount",0),G(this,"forceCloseTimeout",5e3),G(this,"onlineReconnectListener",void 0),G(this,"useCompress",void 0),G(this,"tryDoubleDomain",!1),G(this,"use443PortOnly",!1),G(this,"wsInflateLength",0),G(this,"wsDeflateLength",0),G(this,"closeEstablishingWs",()=>{}),G(this,"store",void 0),G(this,"joinGatewayRecordIndex",void 0),this.store=h,this.name=n,this.retryConfig=function(R){for(var A=1;A<arguments.length;A++){var D=arguments[A]!=null?arguments[A]:{};A%2?h6(Object(D),!0).forEach(function(H){G(R,H,D[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(D)):h6(Object(D)).forEach(function(H){Object.defineProperty(R,H,Object.getOwnPropertyDescriptor(D,H))})}return R}({},i),this.useCompress=a,this.tryDoubleDomain=l,this.use443PortOnly=u,this._initMutex=new Ji("websocket",h?h.clientId:void 0);const{timeout:p,timeoutFactor:m}=i,E=Math.max(300,Math.floor(3*p/5)),y=Math.max(1.2,Math.floor(8*m)/10);Ta.ONLINE&&(this.retryConfig.timeout=E,this.retryConfig.timeoutFactor=y),Hr.on(Vf.NETWORK_STATE_CHANGE,(R,A)=>{R!==A&&(this.resetReconnectCount("network state change: ".concat(A," -> ").concat(R)),R===Ta.ONLINE?(this.retryConfig.timeout=E,this.retryConfig.timeoutFactor=y):(this.retryConfig.timeout=p,this.retryConfig.timeoutFactor=m))})}getConnection(){return this.websocket||void 0}async init(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const a=await this._initMutex.lock();this._reconnectMode="tryNext",this.forceCloseTimeout=i,this.urls=n,this.state="connecting";try{const l=v0(),u=this.urls[this.currentURLIndex];Q("ENABLE_PREALLOC_PC")&&this.emit(l6.PRE_CONNECT_PC),this.createWebSocketConnection(u).then(l.resolve).catch(l.reject),this.once(qt.CLOSED,()=>{l.reject(new we(X.WS_DISCONNECT))}),this.once(qt.CONNECTED,l.resolve),await l.promise}catch{}finally{a()}}close(n,i){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const a=this.websocket;i?setTimeout(()=>a.close(),500):a.close(),this.websocket=void 0}this.state=n?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(n,i){if(!this.websocket)return void k.warning("[".concat(this.name,"] can not reconnect, no websocket"));n!==void 0&&(this.reconnectMode=n),k.debug("[".concat(this.name,"] reconnect is triggered initiative")),typeof this.joinGatewayRecordIndex=="number"&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(i)]},this.joinGatewayRecordIndex);const a=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),a&&a.bind(this.websocket)({code:9999,reason:i})}sendMessage(n){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new we(X.WS_ABORT,"websocket is not ready");try{i||(n=JSON.stringify(n)),this.websocket.send(n)}catch(a){throw new we(X.WS_ERR,"send websocket message error"+a.toString())}}setWsInflateData(n){this.wsDeflateLength=this.wsDeflateLength+n.originLength,this.wsInflateLength=this.wsInflateLength+n.compressedLength}getWsInflateData(){const n=this.wsInflateLength,i=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:n,wsDeflateLength:i}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(n){var i;const a=v0();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;const l=y=>{var R;(R=this.store)===null||R===void 0||R.signalChannelOpen(),k.debug("[".concat(this.name,"] websocket opened:"),y),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),a.resolve()},u=async y=>{var R;if(k.debug("[".concat(this.name,"] websocket close ").concat((R=this.websocket)===null||R===void 0?void 0:R.url,", code: ").concat(y.code,", reason: ").concat(y.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)a.reject(new we(X.WS_DISCONNECT,"websocket close: ".concat(y.code))),this.close();else{this.state==="connected"&&(this.reconnectReason=y.reason,this.state="reconnecting");const A=Ua(this,qt.WILL_RECONNECT,this.reconnectMode,y.reason)||this.reconnectMode,D=await this.reconnectWithAction(A);if(this.state==="closed")return void k.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!D)return a.reject(new we(X.WS_DISCONNECT,"websocket reconnect failed: ".concat(y.code))),this.close(!0);a.resolve()}},h=y=>{this.emit(qt.ON_MESSAGE,y)},p=y=>{k.warn("[".concat(this.connectionID,"] ws open error ").concat(y))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),Q("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(n=Q("GATEWAY_WSS_ADDRESS")),k.debug("[".concat(this.name,"] start connect, url:"),n);const m=(i=this.store)===null||i===void 0?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var E;const y=await this.chooseBestWebsocketConnection(n);this.websocket=y,l&&l(this.websocket.url),this.websocket.onclose=u,this.websocket.onmessage=h,this.websocket.onerror=p,(E=this.store)===null||E===void 0||E.recordJoinChannelService({endTs:Date.now(),status:"success"},m),this.joinGatewayRecordIndex=m}catch(y){const R=this.state==="closed",A=y instanceof we,D=A&&y.code===X.WS_ABORT,H=A&&y.code===X.WS_ERR,B=A?y.message:y&&(y.reason||y.toString());k.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(B)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:D?"aborted":"error",errors:[y]},m),R||H?(a.reject(R?new we(X.WS_DISCONNECT,"websocket is closed: ".concat(B)):new we(X.WS_ERR,"init websocket failed: ".concat(B))),H&&k.error("[".concat(this.name,"] init websocket failed: ").concat(B))):u&&u(y)}return a.promise}async reconnectWithAction(n){let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||this.urls.length===0||this.state==="closed")return!1;k.warning("[choose-best-ws] action: =>",n),this.onlineReconnectListener||Hr.isOnline||!Hr.onlineWaiter||(this.onlineReconnectListener=Hr.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let a=!0;if(this.reconnectInterrupter=()=>a=!1,i){const h=Hw(this.reconnectCount,this.retryConfig);k.debug("[".concat(this.name,"] wait ").concat(h,"ms to reconnect websocket, mode: ").concat(n)),await Ye.race([Ni(h),this.onlineReconnectListener||new Ye(()=>{})])}if(this._state==="closed"||!a)return!1;this.reconnectCount+=1;const l=async(h,p)=>{this.emit(qt.RECONNECT_CREATE_CONNECTION,p),await this.createWebSocketConnection(h)};try{if(n==="retry")await l(this.urls[this.currentURLIndex],n);else if(n==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);k.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),await l(this.urls[this.currentURLIndex],n)}else n==="recover"&&(k.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.urls=await Wi(this,qt.REQUEST_NEW_URLS),this.currentURLIndex=0,await l(this.urls[this.currentURLIndex],n))}catch(h){var u;k.error("[".concat(this.name,"] reconnect failed ").concat(h&&h.toString()));const p=h==null||(u=h.data)===null||u===void 0?void 0:u.desc;return Array.isArray(p)&&Ke(p).call(p,"dynamic key expired")?(this.emit(qt.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(n,i)}return!0}}class PI extends f6{constructor(n,i){super(n,i,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(n,i){const a=v0(),l=function(h,p){return new $fe(h,p)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{k.debug("[choose-best-ws] close establishing websockets"),l.closeAllWebsockets(),a.reject(new we(X.WS_ABORT,"choose best websocket aborted"))};const u=Q("GATEWAY_DOMAINS");return k.debug("[choose-best-ws] currentDomain: ",n,", domains: ",u,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),l.chooseBestWebsocket(n,this.tryDoubleDomain,this.use443PortOnly,i).then(a.resolve).catch(a.reject),a.promise.finally(()=>{this.closeEstablishingWs=void 0})}}class D0 extends f6{constructor(n,i){super(n,i,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(n,i){return new Ye((a,l)=>{let u=!1;const h=[];this.closeEstablishingWs=()=>{k.debug("[choose-best-ws] close establishing websockets"),h.forEach(H=>{H.onclose=null,H.onopen=null,H.onmessage=null,H.close()}),l(new we(X.WS_ABORT,"choose best websocket aborted"))};const p=Q("GATEWAY_DOMAINS");let m;const E=n.indexOf("?h="),y=p.find(H=>E!==-1?Ke(n).call(n,H,E):Ke(n).call(n,H));k.debug("[choose-best-ws] currentDomain: ",y,", domains: ",p);let R=!this.tryDoubleDomain||!y;if(!R&&y){var A;const H=Date.now();try{p.forEach(B=>{const $=E===-1?n.replace(y,B):n.substr(0,E)+n.substr(E).replace(y,B),K=new WebSocket($);K.binaryType="arraybuffer",h.push(K),k.debug("[choose-best-ws] ws is connecting:",K.url)})}catch{for(k.debug("[choose-best-ws] ws create failed, fallback to single url"),h.forEach($=>$.close());h.length;)h.pop();R=!0}(A=this.store)===null||A===void 0||A.recordJoinChannelService({urls:h.map(B=>B.url),service:"gateway"},i),h.forEach(B=>{B.onopen=()=>{if(u)return;const $=Date.now()-H;k.debug("[choose-best-ws] ws open cost ".concat($,"ms")),h.filter(K=>K!==B).forEach(K=>{k.debug("[choose-best-ws]close backup websocket: ".concat(K.url)),K.close()}),u=!0,a(B)},B.onclose=$=>{m=$,!u&&(h.find(K=>!(K.readyState===WebSocket.CLOSED||K.readyState===WebSocket.CLOSING))||(k.debug("[choose-best-ws] all websocket is closed"),u=!0,l(m)))},B.onmessage=$=>{k.debug("[choose-best-ws]".concat(B.url," onmessage: ").concat($.data))}}),Ni(this.forceCloseTimeout).then(()=>{h.forEach(B=>{B.readyState!==WebSocket.OPEN&&B.close()})})}if(R){var D;let H;k.debug("[choose-best-ws] use single url: ",n),(D=this.store)===null||D===void 0||D.recordJoinChannelService({urls:[n],service:"gateway"},i);try{H=new WebSocket(n),h.push(H),H.binaryType="arraybuffer"}catch(B){const $=new we(X.WS_ERR,"init websocket failed! Error: ".concat(B.toString()));return k.error("[".concat(this.name,"]").concat($)),void l($)}H.onopen=()=>{a(H)},H.onclose=B=>{l(B)},H.onmessage=B=>{k.debug("[choose-best-ws]".concat(H.url," onmessage: ").concat(B.data))},Ni(this.forceCloseTimeout).then(()=>{H&&H.readyState!==WebSocket.OPEN&&H.close()})}}).then(a=>(this.closeEstablishingWs=void 0,a)).catch(a=>{throw this.closeEstablishingWs=void 0,a})}}class Hfe extends Sr{get connectionState(){return this._connectionState}set connectionState(n){n!==this._connectionState&&(this._connectionState=n,n===er.CONNECTED?this.emit(Mt.WS_CONNECTED):n===er.RECONNECTING?this.emit(Mt.WS_RECONNECTING,this._websocketReconnectReason):n===er.CLOSED&&this.emit(Mt.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(n,i){super(),G(this,"_disconnectedReason",void 0),G(this,"_websocketReconnectReason",void 0),G(this,"_connectionState",er.CLOSED),G(this,"reconnectToken",void 0),G(this,"websocket",void 0),G(this,"openConnectionTime",void 0),G(this,"clientId",void 0),G(this,"lastMsgTime",Date.now()),G(this,"uploadCache",[]),G(this,"uploadCacheInterval",void 0),G(this,"rttRolling",new R3(5)),G(this,"pingpongTimer",void 0),G(this,"wsInflateDataTimer",void 0),G(this,"pingpongTimeoutCount",0),G(this,"joinResponse",void 0),G(this,"multiIpOption",void 0),G(this,"initError",void 0),G(this,"spec",void 0),G(this,"store",void 0),G(this,"onWebsocketMessage",a=>{if(a.data instanceof ArrayBuffer)return void this.emit(Mt.ON_BINARY_DATA,a.data);const l=JSON.parse(a.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const u="res-@".concat(l._id);this.emit(u,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")){if(this.emit(l._type,l._message),l._type===un.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===un.ON_USER_BANNED)switch(l._message.error_code){case 14:this.close(Ln.UID_BANNED);break;case 15:this.close(Ln.IP_BANNED);break;case 16:this.close(Ln.CHANNEL_BANNED)}if(l._type===un.ON_USER_LICENSE_BANNED)switch(l._message.error_code){case Tt.ERR_LICENSE_MISSING:this.close(Ln.LICENSE_MISSING);break;case Tt.ERR_LICENSE_EXPIRED:this.close(Ln.LICENSE_EXPIRED);break;case Tt.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Ln.LICENSE_MINUTES_EXCEEDED);break;case Tt.ERR_LICENSE_PERIOD_INVALID:this.close(Ln.LICENSE_PERIOD_INVALID);break;case Tt.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Ln.LICENSE_MULTIPLE_SDK_SERVICE);break;case Tt.ERR_LICENSE_ILLEGAL:this.close(Ln.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=n.clientId,this.spec=n,this.store=i,this.websocket=new PI("gateway-".concat(this.clientId),this.spec.retryConfig,!0,Q("JOIN_GATEWAY_USE_DUAL_DOMAIN"),Q("JOIN_GATEWAY_USE_443PORT_ONLY"),i),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===er.CONNECTED&&this.reconnect("retry",zi.OFFLINE)})}async request(n,i,a,l){const u=Xn(6,""),h={_id:u,_type:n,_message:i},p=this.websocket.connectionID,m=()=>new Ye((H,B)=>{if(this.connectionState===er.CONNECTED)return H();const $=()=>{this.off(Mt.WS_CLOSED,K),H()},K=()=>{this.off(Mt.WS_CONNECTED,$),B(new ye(X.WS_ABORT))};this.once(Mt.WS_CONNECTED,$),this.once(Mt.WS_CLOSED,K),n!==Dt.PUBLISH&&n!==Dt.PUBLISH_DATASTREAM&&n!==Dt.SUBSCRIBE&&n!==Dt.SUBSCRIBE_DATASTREAM&&n!==Dt.UNSUBSCRIBE&&n!==Dt.UNSUBSCRIBE_DATASTREAM&&n!==Dt.UNPUBLISH&&n!==Dt.UNPUBLISH_DATASTREAM&&n!==Dt.CONTROL&&n!==Dt.RESTART_ICE||this.once(Mt.DISCONNECT_P2P,()=>{B(new ye(X.DISCONNECT_P2P))}),n!==Dt.PUBLISH&&n!==Dt.RESTART_ICE||this.once(Mt.ABORT_P2P_EXECUTION,()=>{B(new ye(X.DISCONNECT_P2P))})});if(this.connectionState!==er.CONNECTING&&this.connectionState!==er.RECONNECTING||n===Dt.JOIN||n===Dt.REJOIN||await m(),this.websocket.sendMessage(h,!0),l)return;const E=new Ye((H,B)=>{let $=!1;const K=(ce,ge)=>{$=!0,H({isSuccess:ce==="success",message:ge||{}}),this.off(Mt.WS_CLOSED,Y),this.off(Mt.WS_RECONNECTING,Y),this.emit(Mt.REQUEST_SUCCESS,n,i)};this.once("res-@".concat(u),K);const Y=()=>{B(new ye(X.WS_ABORT,"type: ".concat(n))),this.off(Mt.WS_CLOSED,Y),this.off(Mt.WS_RECONNECTING,Y),this.off("res-@".concat(u),K)};this.once(Mt.WS_CLOSED,Y),this.once(Mt.WS_RECONNECTING,Y),Ni(Q("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==p||$||(k.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(n)),this.emit(Mt.REQUEST_TIMEOUT,n,i))})});let y=null;try{y=await E}catch(H){if(this.connectionState===er.CLOSED||n===Dt.LEAVE)throw new ye(X.WS_ABORT);return!this.spec.forceWaitGatewayResponse||a?H.throw():n===Dt.JOIN||n===Dt.REJOIN?null:(await m(),await this.request(n,i))}if(y.isSuccess)return y.message;const R=Number(y.message.error_code||y.message.code),A=P0(R),D=new ye(X.UNEXPECTED_RESPONSE,"".concat(A.desc,": ").concat(y.message.error_str),{code:R,data:y.message,desc:A.desc});return A.action==="success"?y.message:(k.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(n,", error_code: ").concat(R,", message: ").concat(A.desc,", action: ").concat(A.action)),R===Tt.ERR_TOO_MANY_BROADCASTERS?((n===Dt.JOIN||n===Dt.REJOIN)&&(this.initError=D,this.close()),D.throw()):A.action==="failed"?D.throw():A.action==="quit"?(this.initError=D,this.close(),D.throw()):(R===Tt.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=y.message.option,k.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",zi.MULTI_IP)):this.reconnect(A.action,zi.SERVER_ERROR),n===Dt.JOIN||n===Dt.REJOIN?null:await this.request(n,i)))}waitMessage(n,i){return new Ye(a=>{const l=u=>{(!i||i(u))&&(this.off(n,l),a(u))};this.on(n,l)})}uploadWRTCStats(n){if(!this.store.sessionId)return void k.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const i={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:n};this.upload(x0.WRTC_STATS,i)}upload(n,i){const a={_type:n,_message:i};try{this.websocket.sendMessage(a)}catch{const u=Q("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(a),this.uploadCache.length>u&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==er.CONNECTED)return;const h=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(h._type,h._message)},Q("UPLOAD_CACHE_INTERVAL")||2e3))}}send(n,i){const a={_type:n,_message:i};this.websocket.sendMessage(a)}init(n){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Ye((i,a)=>{this.once(Mt.WS_CONNECTED,()=>i(this.joinResponse)),this.once(Mt.WS_CLOSED,l=>a(this.initError||new ye(X.WS_ABORT,l))),this.connectionState=er.CONNECTING,this.websocket.init(n).catch(a),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4)})}close(n){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=n||Ln.LEAVE,this.connectionState=er.CLOSED,k.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close()}async join(){if(!this.joinResponse){this.emit(Mt.ABORT_P2P_EXECUTION);const n=await Wi(this,Mt.REQUEST_JOIN_INFO),i=await this.request(Dt.JOIN,n);if(!i)return this.emit(Mt.REPORT_JOIN_GATEWAY,cS.TIMEOUT,this.url||""),!1;this.joinResponse=i,this.emit(Mt.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=er.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new ye(X.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const n=b0(this,Mt.REQUEST_REJOIN_INFO);n.token=this.reconnectToken;const i=await this.request(Dt.REJOIN,n);return!!i&&(this.connectionState=er.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),i.peers&&i.peers.forEach(a=>{this.emit(un.ON_USER_ONLINE,{uid:a.uid}),a.audio&&this.emit(un.ON_ADD_AUDIO_STREAM,{uid:a.uid,uint_id:a.uint_id,audio:!0,ssrcId:a.audio_ssrc}),a.video&&this.emit(un.ON_ADD_VIDEO_STREAM,{uid:a.uid,uint_id:a.uint_id,video:!0,ssrcId:a.video_ssrc}),a.audio_mute?this.emit(un.MUTE_AUDIO,{uid:a.uid}):this.emit(un.UNMUTE_AUDIO,{uid:a.uid}),a.video_mute?this.emit(un.MUTE_VIDEO,{uid:a.uid}):this.emit(un.UNMUTE_VIDEO,{uid:a.uid}),a.audio_enable_local?this.emit(un.ENABLE_LOCAL_AUDIO,{uid:a.uid}):this.emit(un.DISABLE_LOCAL_AUDIO,{uid:a.uid}),a.video_enable_local?this.emit(un.ENABLE_LOCAL_VIDEO,{uid:a.uid}):this.emit(un.DISABLE_LOCAL_VIDEO,{uid:a.uid}),a.audio||a.video||this.emit(un.ON_REMOVE_STREAM,{uid:a.uid,uint_id:a.uint_id})}),!0)}reconnect(n,i){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(n,i)}handleNotification(n){k.debug("[".concat(this.clientId,"] receive notification: "),n);const i=P0(n.code);if(n.code===28&&"detail"in n&&(k.info("[".concat(this.clientId,"] receive recover notification: "),n.detail),this.emit(Mt.RECOVER_NOTIFICATION,n.detail)),i.action!=="success"){if(i.action!=="failed")return i.action==="quit"?(i.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Ln.UID_BANNED),void this.close()):void this.reconnect(i.action,zi.SERVER_ERROR);k.error("[".concat(this.clientId,"] ignore error: "),i.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const n=Q("PING_PONG_TIME_OUT"),i=Date.now();this.pingpongTimeoutCount>=n&&(k.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(i-this.lastMsgTime,"ms")),i-this.lastMsgTime>Q("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",zi.TIMEOUT):this.request(Dt.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const a=Date.now()-i;this.rttRolling.add(a),Q("REPORT_STATS")&&this.send(Dt.PING_BACK,{pingpongElapse:a})}).catch(a=>{})}handleWsInflateData(){const{wsInflateLength:n,wsDeflateLength:i}=this.websocket.getWsInflateData();n!==0&&i!==0&&this.upload(x0.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:i,ws_inflate_length:n})}handleWebsocketEvents(){this.websocket.on(qt.RECONNECT_CREATE_CONNECTION,n=>{this.emit(Mt.WS_RECONNECT_CREATE_CONNECTION,n)}),this.websocket.on(qt.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(qt.CLOSED,()=>{this.connectionState=er.CLOSED}),this.websocket.on(qt.FAILED,()=>{this._disconnectedReason=Ln.NETWORK_ERROR,this.connectionState=er.CLOSED}),this.websocket.on(qt.RECONNECTING,n=>{this._websocketReconnectReason=n,this.joinResponse=void 0,this.connectionState===er.CONNECTED?this.connectionState=er.RECONNECTING:this.connectionState=er.CONNECTING}),this.websocket.on(qt.WILL_RECONNECT,(n,i,a)=>{const l=b0(this,Mt.IS_P2P_DISCONNECTED),u=l||n!=="retry";l&&n==="retry"&&(k.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),n="tryNext",i=cS.P2P_DISCONNECTED),u&&(k.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(n)),this.emit(Mt.REPORT_JOIN_GATEWAY,i||cS.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit(Mt.DISCONNECT_P2P)),a(n)}),this.websocket.on(qt.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(n=>{k.warning("[".concat(this.clientId,"] rejoin failed ").concat(n)),this.reconnect("tryNext",zi.SERVER_ERROR)}):this.join().catch(n=>{if(this.emit(Mt.REPORT_JOIN_GATEWAY,n,this.url||""),n instanceof ye){if(n.code===X.UNEXPECTED_RESPONSE&&n.data.code===Tt.ERR_NO_AUTHORIZED)return this.initError=new ye(X.TOKEN_EXPIRE,"dynamic key expired"),void this.close(Ln.TOKEN_EXPIRE);k.error("[".concat(this.clientId,"] join gateway request failed"),n.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",zi.SERVER_ERROR):(this.initError=n,this.close())}})}),this.websocket.on(qt.REQUEST_NEW_URLS,(n,i)=>{Wi(this,Mt.REQUEST_RECOVER,this.multiIpOption).then(n).catch(i)}),this.websocket.on(qt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(un.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(l6.PRE_CONNECT_PC,()=>{this.emit(Mt.PRE_CONNECT_PC)})}}let zfe=function(t){return t.NATIVE_RTC="native_rtc",t.NATIVE_RTM="native_rtm",t.WEB_RTC="web_rtc",t.WEB_RTM="web_rtm",t}({}),zr=function(t){return t[t.CHOOSE_SERVER=11]="CHOOSE_SERVER",t[t.CLOUD_PROXY=18]="CLOUD_PROXY",t[t.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",t[t.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK",t}({});function p6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function uS(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?p6(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function Vu(t){return t.match(/^[\.\:\d]+$/)?"".concat(t.replace(/[^\d]/g,"-"),".").concat(Q("TURN_DOMAIN")):(k.debug("Cannot recognized as ip address: ".concat(t,", use as host")),t)}function DI(t,n){t.addresses||(t.addresses=[]);const i=function(p,m){if(Q("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return p.map(R=>{let{ip:A,port:D}=R;return{address:"".concat(A,":").concat(D)}});const E=Q("GATEWAY_DOMAINS");let y=E[1]&&Ke(m).call(m,E[1])?1:0;return p.map(R=>{let{domain_prefix:A,port:D,ip:H}=R;if(A)return{address:"".concat(A,".").concat(E[y++%E.length],":").concat(D)};const B=/^[\.\:\d]+$/.test(H),$=B?"".concat(H.replace(/[^\d]/g,"-"),".").concat(E[y++%E.length],":").concat(D):"".concat(H,":").concat(D);return B||k.debug("Cannot recognized as ip address: ".concat(H,", use as host")),{ip:H,port:D,address:$}})}(t.addresses,n),a=Array.isArray(t.detail)&&t.detail[18];if(a&&typeof a=="string"){const p=a.split(";");for(let m=0;m<p.length;m++){var l;const E=mo(l=p[m]).call(l);i[m]&&E&&(i[m].ip6=E)}}const u=t.detail&&t.detail.candidate;let h;if(u){const[p,m]=u.split(":");p&&m&&(h={port:Number(m),ip:p,address:"".concat(p,":").concat(m)})}return{gatewayAddrs:i,apGatewayAddress:h,uid:t.uid,cid:t.cid,cert:t.cert,vid:t.detail&&t.detail[8],uni_lbs_ip:t.detail&&t.detail[1],res:t,csIp:t.detail&&t.detail[502]}}function Ra(t){return typeof t=="number"?t:t.exact||t.ideal||t.max||t.min||0}function m6(t){const n=t._encoderConfig;if(!n)return{};const i={resolution:n.width&&n.height?"".concat(Ra(n.width),"x").concat(Ra(n.height)):void 0,maxVideoBW:n.bitrateMax,minVideoBW:n.bitrateMin};return typeof n.frameRate=="number"?(i.maxFrameRate=n.frameRate,i.minFrameRate=n.frameRate):n.frameRate&&(i.maxFrameRate=n.frameRate.max||n.frameRate.ideal||n.frameRate.exact||n.frameRate.min,i.minFrameRate=n.frameRate.min||n.frameRate.ideal||n.frameRate.exact||n.frameRate.max),i}function g6(t){return t>=0&&t<.17?1:t>=.17&&t<.36?2:t>=.36&&t<.59?3:t>=.59&&t<=1?4:t>1?5:0}function L0(t,n){let i,a,l;switch(n){case zr.CHOOSE_SERVER:a=4096,l="choose server";break;case zr.CLOUD_PROXY:a=1048576,l="proxy";break;case zr.CLOUD_PROXY_5:a=4194304,l="proxy5";break;case zr.CLOUD_PROXY_FALLBACK:a=4194310,l="proxy fallback";break;default:throw new ye(X.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:t.detail&&t.detail[502],retry:!1})}if(t.response_body.forEach(u=>{u.buffer&&u.buffer.flag===a&&(i={code:u.buffer.code,addresses:(u.buffer.edges_services||[]).map(h=>uS(uS({},h),{},{ticket:u.buffer.cert})),server_ts:t.enter_ts,uid:u.buffer.uid,cid:u.buffer.cid,cname:u.buffer.cname,detail:uS(uS({},u.buffer.detail),t.detail),flag:u.buffer.flag,opid:t.opid,cert:u.buffer.cert})}),!i)throw new ye(X.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(l," from multi unilbs response"),{csIp:t.detail&&t.detail[502]});return i}async function v6(t,n){return await Ye.all(t.addresses.map(async i=>({address:Q("USE_TURN_IP")?i.ip:Vu(i.ip),tcpport:i.port,udpport:i.port,username:n&&Q("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?n.toString():Gi.username,password:n&&Q("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await Bw(n.toString()):Gi.password})))}function LI(t,n){const i=n.getMediaStreamTrack(!0).getSettings(),a=n.videoHeight||i.height,l=n.videoWidth||i.width;return a&&l?Math.max(Math.min(a,l)/Math.min(Ra(t.height),Ra(t.width)),1):(k.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function ju(t){let{candidateType:n,relayProtocol:i,type:a,address:l,port:u,protocol:h}=t;const p={candidateType:n,relayProtocol:i,protocol:h};if(a!=="local-candidate"){const m=l.split(".");m.length>=4&&(m[1]="*",m[2]="*"),p.address=m.join("."),p.port=u}return p}function dS(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Q("SVC_MODE");if(Q("ENABLE_SVC"))return function(n){return n in V_}(t)?t:V_.L1T3}const E6={[it.VIDEO]:[{key:"abs-send-time",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"},{key:"video-orientation",extensionName:"urn:3gpp:video-orientation"},{key:"draft-holmer-rmcat-transport-wide-cc-extensions-01",extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"},{key:"playout-delay",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/playout-delay"},{key:"video-content-type",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/video-content-type"},{key:"color-space",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/color-space"},{key:"video-timing",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/video-timing"}],[it.AUDIO]:[{key:"ssrc-audio-level",extensionName:"urn:ietf:params:rtp-hdrext:ssrc-audio-level"},{key:"draft-holmer-rmcat-transport-wide-cc-extensions-01",extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"},{key:"abs-send-time",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}]};function hS(t,n,i){n.forEach(a=>{var l;const u=E6[t].find(p=>{var m;let{key:E}=p;return Ke(m=a.extensionName).call(m,E)});if(!u)return;const h=i.find(p=>{let{extensionName:m}=p;return Ke(m).call(m,u.key)});h&&Ke(l=h.extensionName).call(l,"gdpr_forbidden")&&(a.extensionName=h.extensionName)})}function cp(t,n){n.forEach(i=>{var a;const l=E6[t].find(u=>{var h;let{key:p}=u;return Ke(h=i.extensionName).call(h,p)});Ke(a=i.extensionName).call(a,"gdpr_forbidden")&&l&&(i.extensionName=l.extensionName)})}function _6(t){return t==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"||Ke(t).call(t,"abs-send-time")}function fS(t){return t==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"||Ke(t).call(t,"draft-holmer-rmcat-transport-wide-cc-extensions-01")}function S6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function y6(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?S6(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):S6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function k0(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;const{filterRTX:l,filterVideoFec:u,filterAudioFec:h,filterAudioCodec:p,filterVideoCodec:m}=n,{useXR:E}=i;let y=[],R=[],A=[],D=[],H=!1,B=!1;if(sa(t).mediaDescriptions.forEach(K=>{a&&a!==K.attributes.direction||(K.media.mediaType!=="video"||H||(R=K.attributes.payloads,D=K.attributes.extmaps,H=!0),K.media.mediaType!=="audio"||B||(y=K.attributes.payloads,A=K.attributes.extmaps,B=!0))}),!D||R.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!A||y.length===0)throw new Error("Cannot get audio capabilities from SDP.");if(R.forEach(K=>{var Y;(Y=K.rtpMap)!==null&&Y!==void 0&&Y.clockRate&&(K.rtpMap.clockRate=parseInt(K.rtpMap.clockRate)),E&&K.rtcpFeedbacks.push({type:"rrtr"})}),y.forEach(K=>{var Y;(Y=K.rtpMap)!==null&&Y!==void 0&&Y.clockRate&&(K.rtpMap.clockRate=parseInt(K.rtpMap.clockRate)),E&&K.rtcpFeedbacks.push({type:"rrtr"})}),l&&(y=y.filter(K=>{var Y;return((Y=K.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLowerCase())!=="rtx"}),R=R.filter(K=>{var Y;return((Y=K.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLowerCase())!=="rtx"})),u&&(R=R.filter(K=>{var Y;return!/(red)|(ulpfec)|(flexfec)/i.test(((Y=K.rtpMap)===null||Y===void 0?void 0:Y.encodingName)||"")})),h&&(y=y.filter(K=>{var Y;return!/(red)|(ulpfec)|(flexfec)/i.test(((Y=K.rtpMap)===null||Y===void 0?void 0:Y.encodingName)||"")})),p&&(p==null?void 0:p.length)>0&&(y=y.filter(K=>{var Y;return Ke(p).call(p,((Y=K.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLowerCase())||"")})),m&&(m==null?void 0:m.length)>0){const K=R.filter(Y=>{var ce;return Ke(m).call(m,((ce=Y.rtpMap)===null||ce===void 0?void 0:ce.encodingName.toLowerCase())||"")});R=K.concat(l?[]:FI(K,R))}const $=Q("UNSUPPORTED_VIDEO_CODEC");return $&&$.length>0&&(R=R.filter(K=>!(K.rtpMap&&Ke($).call($,K.rtpMap.encodingName.toLowerCase())))),{audioCodecs:y,videoCodecs:R,audioExtensions:A,videoExtensions:D}}function $u(t){const n=sa(t);let i,a;for(const l of n.mediaDescriptions){if(!i){const u=l.attributes.iceUfrag,h=l.attributes.icePwd;if(!u||!h)throw new Error("Cannot get iceUfrag or icePwd from SDP.");i={iceUfrag:u,icePwd:h}}if(!a){const u=l.attributes.fingerprints;u.length>0&&(a={fingerprints:u})}}if(!a&&n.attributes.fingerprints.length>0&&(a={fingerprints:n.attributes.fingerprints}),!a||!i)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:i,dtlsParameters:a}}function C6(t,n){const i=[],a=t.attributes.ssrcGroups.filter(h=>h.semantic==="FID"),l=t.attributes.ssrcGroups.find(h=>h.semantic==="SIM"),u=t.attributes.ssrcs;if(l)l.ssrcIds.forEach(h=>{var p;const m=(p=a.find(E=>E.ssrcIds[0]===h))===null||p===void 0?void 0:p.ssrcIds[1];i.push({ssrcId:h,rtx:n?m:void 0})});else if(a.length>0){const h=a[0].ssrcIds[0],p=a[0].ssrcIds[1];i.push({ssrcId:h,rtx:n?p:void 0})}else{if(u.length===0)throw new Error("No ssrcs found on local media description.");i.push({ssrcId:u[0].ssrcId})}return i}function b6(t,n,i){const{cname:a}=t;let l=[];n&&(l=T6(n)),l.length===0&&(l=t.iceParameters.candidates.map(y=>({foundation:y.foundation,componentId:"1",transport:y.protocol,priority:y.priority.toString(),connectionAddress:y.ip,port:y.port.toString(),type:y.type,extension:{}})),k.debug("Using candidates from gateway."));const u={fingerprints:t.dtlsParameters.fingerprints.map(y=>({hashFunction:y.algorithm,fingerprint:y.fingerprint}))},h={iceUfrag:t.iceParameters.iceUfrag,icePwd:t.iceParameters.icePwd};let p;switch(t.dtlsParameters.role){case"server":p="passive";break;case"client":p="active";break;case"auto":p="actpass"}const m=mS(t.rtpCapabilities),E=[];return Array.isArray(i)&&i.length>0&&i.forEach(y=>{E.push({kind:it.VIDEO,ssrcId:y.v,rtx:y.v_rtx,mslabel:"".concat(y.v,"_").concat(y.a)},{kind:it.AUDIO,ssrcId:y.a,mslabel:"".concat(y.v,"_").concat(y.a)})}),{dtlsParameters:u,iceParameters:h,candidates:l,rtpCapabilities:m,setup:p,cname:a,preSSRCs:E}}function T6(t){let n=[];return t.ip&&typeof t.port=="number"&&(n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip,port:t.port.toString(),type:"host",extension:{}}],k.debug("Using remote candidate from AP ".concat(t.ip,":").concat(t.port)),t.ip6&&(n.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip6,port:t.port.toString(),type:"host",extension:{}}),k.debug("Using IPV6 remote candidate from AP ".concat(t.ip6,":").concat(t.port)))),n}function oh(t,n,i){const a=[],l=[];return t.forEach(u=>{let{ssrcId:h,rtx:p}=u;const m=Xn(8,"track-"),E={ssrcId:h,attributes:y6({label:m,mslabel:i=i||Xn(10,""),msid:"".concat(i," ").concat(m)},n&&{cname:n})};if(a.push(E),p!==void 0){const y={ssrcId:p,attributes:y6({label:m,mslabel:i,msid:"".concat(i," ").concat(m)},n&&{cname:n})};a.push(y),l.push({semantic:"FID",ssrcIds:[h,p]})}}),t.length>1&&l.push({semantic:"SIM",ssrcIds:t.map(u=>{let{ssrcId:h}=u;return h})}),{ssrcs:a,ssrcGroups:l}}function lp(t,n){n instanceof Nr&&t.attributes.payloads.forEach(i=>{var a;const l=(a=i.rtpMap)===null||a===void 0?void 0:a.encodingName.toLowerCase();if(!l||["opus","pcmu","pcma","g722"].indexOf(l)===-1)return;i.fmtp||(i.fmtp={parameters:{}}),i.fmtp.parameters.minptime="10",i.fmtp.parameters.useinbandfec="1";const u=n._encoderConfig;u&&l!=="pcmu"&&l!=="pcma"&&l!=="g722"&&(u.bitrate&&!Tr()&&(i.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*u.bitrate))),u.sampleRate&&(i.fmtp.parameters.maxplaybackrate="".concat(u.sampleRate),i.fmtp.parameters["sprop-maxcapturerate"]="".concat(u.sampleRate)),u.stereo&&(i.fmtp.parameters.stereo="1",i.fmtp.parameters["sprop-stereo"]="1"))})}function kI(t){const n=t.attributes.unrecognized.findIndex(i=>i.attField==="x-google-flag"&&i.attValue==="conference");n!==-1&&t.attributes.unrecognized.splice(n,1)}function MI(t,n){var i;if(!(n instanceof sr&&n._encoderConfig&&n._hints.indexOf(Jn.SCREEN_TRACK)===-1))return;const a=n._encoderConfig;yn().supportMinBitrate&&a.bitrateMin&&t.attributes.payloads.forEach(l=>{var u,h;Ke(u=["h264","h265","vp8","vp9","av1"]).call(u,((h=l.rtpMap)===null||h===void 0?void 0:h.encodingName.toLowerCase())||"")&&(l.fmtp||(l.fmtp={parameters:{}}),l.fmtp.parameters["x-google-min-bitrate"]="".concat(a.bitrateMin))}),yn().supportMinBitrate&&!Ke(i=n._hints).call(i,Jn.LOW_STREAM)&&a.bitrateMax&&t.attributes.payloads.forEach(l=>{var u,h;Ke(u=["h264","h265","vp8","vp9","av1"]).call(u,((h=l.rtpMap)===null||h===void 0?void 0:h.encodingName.toLowerCase())||"")&&(l.fmtp||(l.fmtp={parameters:{}}),l.fmtp.parameters["x-google-start-bitrate"]="".concat(Q("X_GOOGLE_START_BITRATE")||Math.floor(a.bitrateMax)))})}function R6(t){if(t.media.mediaType!=="video")return;const n=En();if(n.name!==On.SAFARI&&n.os!==Ei.IOS)return;const i=t.attributes.extmaps.findIndex(a=>/video-orientation/g.test(a.extensionName));i!==-1&&t.attributes.extmaps.splice(i,1)}function pS(t,n,i){if(!n)return;let a,l;if(t.media.mediaType==="video"?(a=i.videoExtensions,l=i.videoCodecs):(a=i.audioExtensions,l=i.audioCodecs),n.twcc===!0){const u=a.find(h=>fS(h.extensionName));if(u){const h=u.extensionName;t.attributes.extmaps.find(m=>fS(m.extensionName))||t.attributes.extmaps.push({entry:u.entry,extensionName:h}),function(m,E){return E.filter(y=>!!m.find(R=>R.payloadType===y.payloadType&&!!R.rtcpFeedbacks.find(A=>A.type==="transport-cc")))}(l,t.attributes.payloads).forEach(m=>{m.rtcpFeedbacks.find(E=>E.type==="transport-cc")||m.rtcpFeedbacks.push({type:"transport-cc"})})}}else if(n.twcc===!1){const u=t.attributes.extmaps.findIndex(h=>fS(h.extensionName));u!==-1&&t.attributes.extmaps.splice(u,1),t.attributes.payloads.forEach(h=>{const p=h.rtcpFeedbacks.findIndex(m=>m.type==="transport-cc");p!==-1&&h.rtcpFeedbacks.splice(p,1)})}if(n.remb===!0){const u=a.find(h=>_6(h.extensionName));if(u){const h=u.extensionName;t.attributes.extmaps.find(m=>m.extensionName===h)||t.attributes.extmaps.push({entry:u.entry,extensionName:h}),function(m,E){return E.filter(y=>!!m.find(R=>R.payloadType===y.payloadType&&!!R.rtcpFeedbacks.find(A=>A.type==="goog-remb")))}(l,t.attributes.payloads).forEach(m=>{m.rtcpFeedbacks.find(E=>E.type==="goog-remb")||m.rtcpFeedbacks.push({type:"goog-remb"})})}}else if(n.remb===!1){const u=t.attributes.extmaps.findIndex(h=>_6(h.extensionName));u!==-1&&t.attributes.extmaps.splice(u,1),t.attributes.payloads.forEach(h=>{const p=h.rtcpFeedbacks.findIndex(m=>m.type==="goog-remb");p!==-1&&h.rtcpFeedbacks.splice(p,1)})}}function w6(t,n,i){if(Tr()||t.media.mediaType!=="video"||!(n instanceof sr)||i!=="vp9"&&i!=="vp8"||i==="vp8"&&!Q("SIMULCAST")||i==="vp9"&&Q("ENABLE_SVC")||n._scalabilityMode===void 0||n._scalabilityMode.numSpatialLayers<=1)return;const a=i==="vp8"?2:n._scalabilityMode.numSpatialLayers,l=t.attributes.ssrcs[0],u=t.attributes.ssrcGroups.find(p=>p.semantic==="FID"&&p.ssrcIds[0]===l.ssrcId),h={semantic:"SIM",ssrcIds:[l.ssrcId]};for(let p=1;p<a;p++)t.attributes.ssrcs.push({ssrcId:l.ssrcId+p,attributes:Ir(l.attributes)}),h.ssrcIds.push(l.ssrcId+p),u&&(t.attributes.ssrcs.push({ssrcId:u.ssrcIds[1]+p,attributes:Ir(l.attributes)}),t.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[l.ssrcId+p,u.ssrcIds[1]+p]}));t.attributes.ssrcGroups.unshift(h)}async function I6(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=new RTCPeerConnection;i.addTransceiver("video",{direction:"sendonly"}),i.addTransceiver("audio",{direction:"sendonly"}),i.addTransceiver("video",{direction:"recvonly"}),i.addTransceiver("audio",{direction:"recvonly"});const a=(await i.createOffer()).sdp,{send:l,recv:u,sendrecv:h}=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=arguments.length>2?arguments[2]:void 0;const y=k0(E,p,m,"sendonly"),R=k0(E,p,m,"recvonly"),A={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},D={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},H={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Gs(y,R,"videoExtensions",A,D,H),Gs(y,R,"videoCodecs",A,D,H),Gs(y,R,"audioExtensions",A,D,H),Gs(y,R,"audioCodecs",A,D,H),Q("RAISE_H264_BASELINE_PRIORITY")){const B=[],$=[];H.videoCodecs.forEach((K,Y)=>{var ce;if(((ce=K.rtpMap)===null||ce===void 0?void 0:ce.encodingName.toLocaleLowerCase())==="h264"){var ge,Ee;const me=H.videoCodecs[Y+1],Te=me&&P6(K,me),Me=(ge=K.fmtp)===null||ge===void 0?void 0:ge.parameters["profile-level-id"],Xe=(Ee=K.fmtp)===null||Ee===void 0?void 0:Ee.parameters["packetization-mode"];!Me||Me!==Q("FIRST_H264_PROFILE_LEVEL_ID")||Q("FIRST_PACKETIZATION_MODE")&&Xe!==Q("FIRST_PACKETIZATION_MODE")?Te?$.push([K,me]):$.push([K]):Te?B.push([K,me]):B.push([K])}}),B.length>0&&$.length>0&&(k.debug("raising H264 baseline profile priority"),H.videoCodecs.forEach((K,Y)=>{var ce;if(((ce=K.rtpMap)===null||ce===void 0?void 0:ce.encodingName.toLocaleLowerCase())==="h264"){const ge=P6(K,H.videoCodecs[Y+1]),Ee=B.shift()||$.shift()||[];Ee.length>0&&(ge?H.videoCodecs.splice(Y,2,...Ee):H.videoCodecs.splice(Y,1,...Ee))}}),D.videoCodecs=D.videoCodecs.filter(K=>{var Y,ce;return!(((Y=K.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLocaleLowerCase())==="h264"&&((ce=K.fmtp)===null||ce===void 0?void 0:ce.parameters["profile-level-id"])!==Q("FIRST_H264_PROFILE_LEVEL_ID"))}),Q("FILTER_SEND_H264_BASELINE")&&(A.videoCodecs=A.videoCodecs.filter(K=>{var Y,ce;return!(((Y=K.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLocaleLowerCase())==="h264"&&((ce=K.fmtp)===null||ce===void 0?void 0:ce.parameters["profile-level-id"])!==Q("FIRST_H264_PROFILE_LEVEL_ID"))})))}return{send:A,recv:D,sendrecv:H}}(t,n,a);try{i.close()}catch{}return{send:l,recv:u,sendrecv:h}}function A6(){const t={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},n=k0(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"recvonly"),i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},a={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},l={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Gs(t,n,"videoExtensions",i,a,l),Gs(t,n,"videoCodecs",i,a,l),Gs(t,n,"audioExtensions",i,a,l),Gs(t,n,"audioCodecs",i,a,l),Q("RAISE_H264_BASELINE_PRIORITY")){const u=l.videoCodecs.findIndex(h=>h.rtpMap&&h.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&h.fmtp&&h.fmtp.parameters["profile-level-id"]==="42001f");if(u!==-1){const h=l.videoCodecs.findIndex(p=>p.rtpMap&&p.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(h<u){k.debug("raising H264 baseline profile priority");const p=l.videoCodecs[u];l.videoCodecs.splice(u,1),l.videoCodecs.splice(h,0,p)}h!==-1&&(a.videoCodecs=a.videoCodecs.filter(p=>!(p.rtpMap&&p.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&p.fmtp&&p.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:i,recv:a,sendrecv:l}}function Gs(t,n,i,a,l,u){if(i==="videoExtensions"||i==="audioExtensions"){const h=[];return t[i].forEach(p=>{n[i].some((m,E)=>{if(p.entry===m.entry&&p.extensionName===m.extensionName)return h.push(E),!0})?u[i].push(p):a[i].push(p)}),void n[i].forEach((p,m)=>{h.indexOf(m)===-1&&l[i].push(p)})}if(i==="videoCodecs"||i==="audioCodecs"){const h=[];return t[i].forEach(p=>{n[i].some((m,E)=>{if(p.payloadType===m.payloadType&&JSON.stringify(p)===JSON.stringify(m))return h.push(E),!0})?u[i].push(p):a[i].push(p)}),void n[i].forEach((p,m)=>{h.indexOf(m)===-1&&l[i].push(p)})}}function mS(t){const{send:n,recv:i,sendrecv:a}=t;if(!a){if(!n||!i)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:n,recv:i}}let l,u;return n?(l={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},l.audioCodecs=[...n.audioCodecs,...a.audioCodecs],l.videoCodecs=[...n.videoCodecs,...a.videoCodecs],l.audioExtensions=[...n.audioExtensions,...a.audioExtensions],l.videoExtensions=[...n.videoExtensions,...a.videoExtensions]):l=a,i?(u={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},u.audioCodecs=[...i.audioCodecs,...a.audioCodecs],u.videoCodecs=[...i.videoCodecs,...a.videoCodecs],u.audioExtensions=[...i.audioExtensions,...a.audioExtensions],u.videoExtensions=[...i.videoExtensions,...a.videoExtensions]):u=a,{send:l,recv:u}}function up(t){t.media.mediaType==="audio"&&t.attributes.payloads.filter(n=>{var i;return((i=n.rtpMap)===null||i===void 0?void 0:i.encodingName.toLowerCase())==="opus"}).forEach(n=>{n.fmtp||(n.fmtp={parameters:{}}),n.fmtp.parameters.stereo="1",n.fmtp.parameters["sprop-stereo"]="1"})}function M0(t,n,i,a){let l=[];if(t===it.VIDEO){if(Q("H264_PROFILE_LEVEL_ID")&&a==="h264"&&(l=n.videoCodecs.filter(u=>{var h;return Ke(h=u.rtpMap&&u.rtpMap.encodingName.toLowerCase()||"").call(h,a)&&u&&u.fmtp&&u.fmtp.parameters["profile-level-id"]===Q("H264_PROFILE_LEVEL_ID")})),!Array.isArray(l)||l.length===0){let u=[];const h=[],p=[],m=[];if(i.videoCodecs.forEach(E=>{const y=E.rtpMap&&E.rtpMap.encodingName.toLowerCase()||"";Ke(y).call(y,a)?u.push(E):Ke(y).call(y,"vp9")?h.push(E):Ke(y).call(y,"vp8")?p.push(E):Ke(y).call(y,"h264")&&m.push(E)}),u.length===0){let E="";h.length!==0?(u=h,E="vp9"):p.length!==0?(u=p,E="vp8"):m.length!==0&&(u=m,E="h264"),k.warning("codec ".concat(a," not included in rtpCapabilities, fallback to default payloads: ").concat(E))}u.length!==0&&(l=n.videoCodecs.filter(E=>u.some(y=>y.payloadType===E.payloadType)))}if(l.length===0&&(k.warning("codec ".concat(a," not included in rtpCapabilities, fallback to default payloads: ").concat(n.videoCodecs[0].rtpMap&&n.videoCodecs[0].rtpMap.encodingName)),l=n.videoCodecs),Q("USE_PUB_RTX")||Q("USE_SUB_RTX")){const u=FI(l,n.videoCodecs);l=[...l,...u]}}else l=n.audioCodecs.filter(u=>{var h;return Ke(h=u.rtpMap&&u.rtpMap.encodingName.toLowerCase()||"").call(h,a)}),l.length===0&&(k.warning("codec ".concat(a," not included in rtpCapabilities, fallback to opus")),l=n.audioCodecs.filter(u=>{var h;return Ke(h=u.rtpMap&&u.rtpMap.encodingName.toLowerCase()||"").call(h,"opus")}));return l}function FI(t,n){const i=t.map(a=>a.payloadType.toString());return n.filter(a=>a.rtpMap&&a.rtpMap.encodingName==="rtx"&&a.fmtp&&a.fmtp.parameters.apt&&Ke(i).call(i,a.fmtp&&a.fmtp.parameters.apt))}async function F0(t,n,i){const a=n.toString(),l=x6(a,"offer","remote","exchangeSDP");await t.setRemoteDescription({type:"offer",sdp:a});const u=await t.createAnswer();if(!u.sdp)throw new Error("cannot get answer sdp");let h=u.sdp;h=O6(h,i||{}),l==null||l(h||""),await t.setLocalDescription({type:"answer",sdp:h})}function O6(t,n,i){const a=sa(t),{useXR:l}=n;return a.mediaDescriptions.forEach(u=>{var h;u.attributes.mid&&(Array.isArray(i)&&!Ke(i).call(i,u.attributes.mid)||(u.media.mediaType==="audio"&&up(u),l&&Ke(h=["audio","video"]).call(h,u.media.mediaType)&&u.attributes.payloads.forEach(p=>{p.rtcpFeedbacks.findIndex(m=>m.type==="rrtr")===-1&&p.rtcpFeedbacks.push({type:"rrtr"})})))}),Fu(a)}function x6(t,n,i,a){if(Q("SDP_LOGGING"))return k.upload("exchanging ".concat(i," ").concat(n," SDP during P2PConnection.").concat(a,`
`),t),n==="offer"?l=>{x6(l,"answer",i==="local"?"remote":"local",a)}:void 0}function N6(t){const n=Q("COMPATIBLE_SDP_EXTENSION");return!!(Array.isArray(n)&&n.length>0)&&n.some(i=>Ke(t).call(t,i))}function P6(t,n){try{var i;return((i=t.fmtp)===null||i===void 0?void 0:i.parameters.apt)===n.payloadType.toString()}catch{return!1}}function D6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function ds(t,n){return typeof Q(t)===n?Q(t):void 0}function Wfe(){try{const t=Q("EXPERIMENTS")||{};return typeof t=="string"||Array.isArray(t)?{}:function(n){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?D6(Object(a),!0).forEach(function(l){G(n,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):D6(Object(a)).forEach(function(l){Object.defineProperty(n,l,Object.getOwnPropertyDescriptor(a,l))})}return n}({},t)}catch(t){return k.debug("handle gateway attributes failed: ",t),{}}}const L6={};function Hu(t){(!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])&&k.debug("install service ".concat(t.name)),L6[t.name]=t}function Xl(t){const n=L6[t];if(!n)throw new we(X.INVALID_OPERATION,"".concat(t," not found, please use AgoraRTC.use(").concat(t,"Service) to load it first"));return n}function k6(t,n){return Xl("DataStream").create(t,n)}function gS(){return Xl("InterceptFrame").create()}function M6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function Jl(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?M6(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):M6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}const UI=new Map;class Gfe extends Sr{get state(){return this._state}set state(n){if(n===this._state)return;const i=this._state;this._state=n,n==="DISCONNECTED"&&this._disconnectedReason?this.emit(Ri.CONNECTION_STATE_CHANGE,n,i,this._disconnectedReason):this.emit(Ri.CONNECTION_STATE_CHANGE,n,i)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(n){k.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(n)),this._joinGatewayStartTime=n}constructor(n,i){var a,l,u;super(),G(this,"store",void 0),G(this,"joinInfo",void 0),G(this,"key",void 0),G(this,"ntpOffset",0),G(this,"signal",void 0),G(this,"role",void 0),G(this,"inChannelInfo",{joinAt:null,duration:0}),G(this,"spec",void 0),G(this,"_state","DISCONNECTED"),G(this,"_statsCollector",void 0),G(this,"_disconnectedReason",void 0),G(this,"isSignalRecover",!1),G(this,"hasChangeBGPAddress",!1),G(this,"trafficStatsInterval",void 0),G(this,"networkQualityInterval",void 0),G(this,"_joinGatewayStartTime",0),G(this,"_signalTimeout",!1),G(this,"_clientRoleOptions",void 0),G(this,"_isProactiveJoin",!1),this.store=n,this.spec=i,this.signal=this.store.useP2P?(a={spec:Jl(Jl({},i),{},{retryConfig:i.websocketRetryConfig}),store:n},(l=(u=Xl("P2PChannel")).createSubmodule)===null||l===void 0?void 0:l.call(u,a)):new Hfe(Jl(Jl({},i),{},{retryConfig:i.websocketRetryConfig}),n),this._statsCollector=i.statsCollector,this.role=i.role||"audience",this._clientRoleOptions=i.clientRoleOptions,this.handleSignalEvents()}async join(n,i,a){this.store.joinGatewayStart(),n.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);const l=Date.now();let u=UI.get(n.cname);if(u||(u=new Map,UI.set(n.cname,u)),this._isProactiveJoin=!0,u.has(n.uid)){const E=new ye(X.UID_CONFLICT);throw dt.joinGateway(n.sid,{lts:l,succ:!1,ec:E.code,addr:null,uid:n.uid,cid:n.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!n.proxyServer,signalChannel:"0",preload:n.preload}),E}u.set(n.uid,!0),this.joinInfo=n,this.key=i;let h=0;this.joinGatewayStartTime=l;const p=n.proxyServer;try{k.debug("[".concat(this.store.clientId,"] use websocket join uid ").concat(h));const E=n.gatewayAddrs.map(y=>{let{address:R}=y;const[A,D]=R.split(":"),H={host:A,port:D};return n.proxyServer&&(H.proxy=n.proxyServer),H});h=(await this.signal.init(E)).uid,k.debug("[".concat(this.store.clientId,"] websocket join uid ").concat(h," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(E){var m;throw k.error("[".concat(this.store.clientId,"] User join failed"),E.toString()),dt.joinGateway(n.sid,{lts:l,succ:!1,ec:((m=E.data)===null||m===void 0?void 0:m.desc)||E.code,errorMsg:E.message,addr:this.signal.url,uid:n.uid,cid:n.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!p,signalChannel:"0",preload:n.preload}),u.delete(n.uid),this.signal.close(),E}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),k.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(E=>{k.warning("[".concat(this.store.clientId,"] get traffic stats error"),E.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(Ri.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(Ri.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(Ri.NETWORK_QUALITY,{uplinkNetworkQuality:g6(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:g6(this._statsCollector.trafficStats.B_dnq)}):this.emit(Ri.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),h}async leave(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){i!==Ln.FALLBACK&&(this.state="DISCONNECTING");try{n||this.signal.connectionState!==er.CONNECTED||await function(a,l){return l===1/0?a:Ye.race([a,vhe(l)])}(this.signal.request(Dt.LEAVE,void 0,!0),3e3)}catch(a){k.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),a)}this.signal.close(i),i!==Ln.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(n,i,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new ye(X.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const l={state:"offer",p2p_id:this.store.p2pId,ortc:i,mode:this.spec.mode,extend:Q("PUB_EXTEND"),twcc:!!Q("PUBLISH_TWCC"),rtx:!!Q("USE_PUB_RTX")};try{return(await this.signal.request(Dt.PUBLISH,l,!0))._message}catch(u){if(a&&u.data&&u.data.code===Tt.ERR_PUBLISH_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),u.toString()),await this.tryUnpubBeforeRepub(n,i),this.publish(n,i,!1);throw u}}async publishDataChannel(n,i,a){var l;if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new ye(X.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const u={stream_id:i.streamId,ordered:i.ordered?1:0,max_retrans_times:(l=i.maxRetransmits)!==null&&l!==void 0?l:10,channel_id:i.channelId,metadata:i.metadata};try{await this.signal.request(Dt.PUBLISH_DATASTREAM,u,!0)}catch(h){if(a&&h.data&&h.data.code===Tt.ERR_PUBLISH_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),h.toString()),await this.tryUnpubDataChannelBeforeRepub(n,i),this.publishDataChannel(n,i,!1);throw h}}async unpublish(n,i){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new ye(X.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(Dt.UNPUBLISH,{stream_id:i,ortc:n},!0)}catch(a){k.warning("[".concat(this.store.clientId,"] unpublish warning: "),a)}}async unpublishDataChannel(n){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new ye(X.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await Ye.all(n.map(i=>this.signal.request(Dt.UNPUBLISH_DATASTREAM,{channel_id:i},!0)))}catch(i){k.warning("unpublish datachannels warning: ",i)}}async presubscribe(n,i,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new ye(X.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));const l={stream_id:n,stream_type:i,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!Q("SUBSCRIBE_TWCC"),rtx:!!Q("USE_SUB_RTX")||void 0,extend:Q("SUB_EXTEND"),svc:Array.isArray(Q("SVC"))&&Q("SVC").length!==0?Q("SVC"):void 0};try{return await this.signal.request(Dt.PRE_SUBSCRIBE,l,!0)}catch(u){if(a&&u.data&&u.data.code===Tt.ERR_SUBSCRIBE_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),u.toString()),this.presubscribe(n,i,!1);throw u}}async subscribe(n,i,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new ye(X.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const l={stream_id:n,stream_type:i.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!Q("SUBSCRIBE_TWCC"),rtx:!!Q("USE_SUB_RTX"),extend:Q("SUB_EXTEND"),ssrcId:i.ssrcId,svc:Array.isArray(Q("SVC"))&&Q("SVC").length!==0?Q("SVC"):void 0};try{return(await this.signal.request(Dt.SUBSCRIBE,l,!0))._message}catch(u){if(a&&u.data&&u.data.code===Tt.ERR_SUBSCRIBE_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),u.toString()),await this.tryUnsubBeforeResub(n,i),await this.subscribe(n,i,!1);throw u}}async subscribeDataChannel(n,i,a){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new ye(X.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));const l={uid:n,stream_id:i.id,channel_id:i.datachannelId};try{return void await this.signal.request(Dt.SUBSCRIBE_DATASTREAM,l,!0)}catch(u){if(a&&u.data&&u.data.code===Tt.ERR_SUBSCRIBE_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),u.toString()),await this.tryUnsubDataChannelBeforeResub(n,i),await this.subscribeDataChannel(n,i,!1);throw u}}async subscribeAll(n,i){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new ye(X.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const a={p2p_id:this.store.p2pId,users:n,dtx:!1,rtx:!!Q("USE_SUB_RTX"),twcc:!!Q("SUBSCRIBE_TWCC"),svc:Array.isArray(Q("SVC"))&&Q("SVC").length!==0?Q("SVC"):void 0};try{return await this.signal.request(Dt.SUBSCRIBE_STREAMS,a,!0)}catch(l){if(i&&l.data&&l.data.code===Tt.ERR_SUBSCRIBE_REQUEST_INVALID)return k.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),l.toString()),await this.tryMassUnsubBeforeResub(n),await this.subscribeAll(n,!1);throw l}}async setVideoProfile(n){const i=function(a){if(!(a.bitrateMax&&a.bitrateMin&&a.frameRate&&a.height&&a.width))return;let l=a.frameRate,u=a.width,h=a.height,p=!0;return typeof l!="number"&&(l=l.exact||l.ideal||l.max||l.min||0,l||(p=!1)),typeof u!="number"&&(u=u.exact||u.ideal||u.max||u.min||0,u||(p=!1)),typeof h!="number"&&(h=h.exact||h.ideal||h.max||h.min||0,l||(p=!1)),p?{stream_type:0,width:u,height:h,fps:l,start_bps:1e3*a.bitrateMax,min_bps:1e3*a.bitrateMin,target_bps:1e3*a.bitrateMax}:void 0}(n);if(i)return this.signal.request(Dt.SET_VIDEO_PROFILE,i);k.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(n,i){try{await this.signal.request(Dt.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:n,stream_id:i},!0)}catch(a){k.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),a)}}async unsubscribeDataChannel(n,i){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new ye(X.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await Ye.all(n.map(a=>this.signal.request(Dt.UNSUBSCRIBE_DATASTREAM,{stream_id:a,uid:i},!0)))}catch(a){k.warning("unsubscribeDataChannel warning: ",a)}}async massUnsubscribe(n){try{await this.signal.request(Dt.UNSUBSCRIBE_STREAMS,n,!0)}catch(i){k.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),i)}}async reconnectPC(n){const{iceParameters:i,dtlsParameters:a,rtpCapabilities:l}=n;return{gatewayEstablishParams:await this.signal.request(Dt.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:i,dtlsParameters:a,rtpCapabilities:l}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(Dt.GATEWAY_INFO)}async renewToken(n){await this.signal.request(Dt.RENEW_TOKEN,n),this.key=n.token}updateClientRole(n,i){i&&(this._clientRoleOptions=Object.assign({},i)),Q("CLIENT_ROLE_OPTIONS")&&(k.debug("[".concat(this.store.clientId,"] Set roleOptions for ").concat(JSON.stringify(Q("CLIENT_ROLE_OPTIONS"))," instead of ").concat(JSON.stringify(this._clientRoleOptions)," ")),this._clientRoleOptions=Object.assign({},Q("CLIENT_ROLE_OPTIONS"))),this.role=n}async setClientRole(n,i){if(i&&(this._clientRoleOptions=Object.assign({},i)),Q("CLIENT_ROLE_OPTIONS")&&(this._clientRoleOptions=Object.assign({},Q("CLIENT_ROLE_OPTIONS")),k.debug("[".concat(this.store.clientId,"] Set roleOptions for ").concat(JSON.stringify(Q("CLIENT_ROLE_OPTIONS"))," instead of ").concat(JSON.stringify(this._clientRoleOptions)," "))),this.state!=="CONNECTED")return void(this.role=n);let a,l=0;n==="audience"?this._clientRoleOptions&&this._clientRoleOptions.delay?(a=this._clientRoleOptions.delay,l=1):l=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:l=0,await this.signal.request(Dt.SET_CLIENT_ROLE,{role:n,level:l,delay:a,client_ts:Date.now()}),this.role=n}async setRemoteVideoStreamType(n,i){await this.signal.request(Dt.SWITCH_VIDEO_STREAM,{stream_id:n,stream_type:i})}async setDefaultRemoteVideoStreamType(n){await this.signal.request(Dt.DEFAULT_VIDEO_STREAM,{stream_type:n})}async setStreamFallbackOption(n,i){await this.signal.request(Dt.SET_FALLBACK_OPTION,{stream_id:n,fallback_type:i})}async pickSVCLayer(n,i){await this.signal.request(Dt.PICK_SVC_LAYER,{stream_id:n,spatial_layer:i.spatialLayer,temporal_layer:i.temporalLayer})}async setRTM2Flag(n){await this.signal.request(Dt.SET_RTM2_FLAG,{rtm2_flag:n})}async sendExtensionMessage(n,i,a){if(this.store.useP2P)return this.signal.sendExtensionMessage(n,i,a)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),Jl({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(Dt.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const n=UI.get(this.joinInfo.cname);n&&n.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const n=function(i){let a;return a=i.startsWith("dc")?i.match(/(dc\:\/\/)?([^:]+):(\d+)/):i.match(/(wss\:\/\/)?([^:]+):(\d+)/),a?{username:Gi.username,password:Gi.password,turnServerURL:a[2],tcpport:parseInt(a[3])+30,udpport:parseInt(a[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],n&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push(Jl(Jl({},Gi),{},{turnServerURL:n.turnServerURL,tcpport:n.tcpport,udpport:n.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;const n=await this.signal.request(Dt.TRAFFIC_STATS,void 0,!0);n.timestamp=Date.now(),n.ntp_offset!=null&&(this.ntpOffset=n.ntp_offset),n.peer_delay.forEach(i=>{const a=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(l=>l.peer_uid===i.peer_uid);a&&a.B_st!==i.B_st&&M_(()=>{this.emit(Ri.STREAM_TYPE_CHANGE,i.peer_uid,i.B_st)})}),this._statsCollector.updateTrafficStats(n)}getJoinMessage(n){if(!this.joinInfo||!this.key)throw new ye(X.UNEXPECTED_ERROR,"can not generate join message, no join info");const i=Object.assign({},this.joinInfo.apResponse);let a=Q("REPORT_APP_SCENARIO");if(typeof a!="string")try{a=JSON.stringify(a)}catch{a=void 0}var l;a&&a.length>128&&(a=void 0),this.store.hasStartJoinChannel=!0,this.store.isABTestSuccess||this.emit(Ri.UPDATE_GATEWAY_CONFIG),l=this.store.clientId,Ke(rp).call(rp,l)||rp.push(l);const u=!(Tr()||e3(87)||H3())&&typeof Q("ENABLE_PRE_SUB")=="boolean"&&Q("ENABLE_PRE_SUB"),h=!H3()&&ds("ENABLE_PREALLOC_PC","boolean"),p=Wfe(),m=E0(87)||function(){const y=En();if(y.name!==On.SAFARI||!y.browserVersion)return!1;const R=y.browserVersion.split(".");return Number(R[0])>15||Number(R[0])===15&&Number(R[1])>=4}(),E=Jl({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:ss,browser:navigator.userAgent,process_id:Q("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:i,extend:Q("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:a,attributes:{userAttributes:Jl({enableEncodedTransform:!!Q("ENABLE_AUDIO_METADATA")&&m||!!Q("ENABLE_AUDIO_TOPN")&&Nw(On.CHROME,87,116)||void 0,enableAudioMetadata:!!Q("ENABLE_AUDIO_METADATA")&&m,enableAudioPts:!!Q("ENABLE_AUDIO_PTS_METADATA")&&m,topnSmoothLevel:Q("TOPN_SMOOTH_LEVEL"),topnNewSpeakerDelay:Q("TOPN_NEW_SPEAKER_DELAY"),topnSwitchHoldMs:Q("TOPN_SWITCH_HOLD_MS"),topnAudioGain:Q("TOPN_AUDIO_GAIN"),enablePublishedUserList:Q("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:Q("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:ds("SUBSCRIBE_AUDIO_FILTER_TOPN","number"),enablePublishAudioFilter:ds("ENABLE_PUBLISH_AUDIO_FILTER","boolean"),enableUserLicenseCheck:ds("ENABLE_USER_LICENSE_CHECK","boolean"),enableRTX:Q("USE_PUB_RTX")===!0||Q("USE_SUB_RTX")===!0||void 0,disableFEC:Q("DISABLE_FEC"),enableNTPReport:!!Q("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:!!Q("ENABLE_INSTANT_VIDEO")||void 0,enableFulllinkAvSync:!!Q("ENABLE_FULL_LINK_AV_SYNC")||void 0,enableDataStream2:ds("ENABLE_DATASTREAM_2","boolean"),enableAutFeedback:!!Q("ENABLE_AUT_FEEDBACK")||void 0,rtm2Flag:typeof this.joinInfo.rtmFlag=="number"?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!Q("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:ds("USE_XR","boolean"),enableLossbasedBwe:ds("ENABLE_LOSSBASED_BWE","boolean"),enableAutCC:!!Q("ENABLE_AUT_CC")||void 0,enableCCFallback:ds("ENABLE_CC_FALLBACK","boolean"),enablePreallocPC:h,preSubNum:u?ds("PRE_SUB_NUM","number"):void 0,enablePubTWCC:ds("PUBLISH_TWCC","boolean"),enableSubTWCC:ds("SUBSCRIBE_TWCC","boolean"),enablePubRTX:ds("USE_PUB_RTX","boolean"),enableSubRTX:ds("USE_SUB_RTX","boolean"),enableSubSVC:Q("ENABLE_SVC")?Q("ENABLE_SVC_DEFAULT_CODECS"):Array.isArray(Q("SVC"))&&Q("SVC").length!==0?Q("SVC"):void 0,enableSvcExtended:Q("ENABLE_SVC")&&Array.isArray(Q("SVC_EXTENDED"))&&Q("SVC_EXTENDED").length!==0?Q("SVC_EXTENDED"):void 0},p)},join_ts:this.joinGatewayStartTime},n);return this.joinInfo.stringUid&&(E.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(E.aes_mode=this.joinInfo.aesmode,Q("ENCRYPT_AES")?(E.aes_secret=this.joinInfo.aespassword,E.aes_encrypt=!0):E.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(E.aes_salt=this.joinInfo.aessalt)),i.addresses[this.signal.websocket.currentURLIndex]&&(E.ap_response.ticket=i.addresses[this.signal.websocket.currentURLIndex].ticket,delete i.addresses),this.joinInfo.defaultVideoStream!==void 0&&(E.default_video_stream=this.joinInfo.defaultVideoStream),E}getRejoinMessage(){if(!this.joinInfo)throw new ye(X.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(Mt.WS_RECONNECT_CREATE_CONNECTION,n=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(Mt.WS_RECONNECTING,n=>{this.joinInfo&&dt.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:n||zi.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",dt.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:this.spec.mode==="live"?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:this.role==="audience"?2:1,buildFormat:1}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(Mt.WS_CLOSED,n=>{let i;switch(n){case Ln.LEAVE:i=zi.LEAVE;break;case Ln.UID_BANNED:case Ln.IP_BANNED:case Ln.CHANNEL_BANNED:case Ln.SERVER_ERROR:i=zi.SERVER_ERROR;break;case Ln.FALLBACK:i=zi.FALLBACK;break;case Ln.LICENSE_MISSING:case Ln.LICENSE_EXPIRED:case Ln.LICENSE_MINUTES_EXCEEDED:case Ln.LICENSE_PERIOD_INVALID:case Ln.LICENSE_MULTIPLE_SDK_SERVICE:case Ln.LICENSE_ILLEGAL:case Ln.TOKEN_EXPIRE:i=n;break;default:i=zi.NETWORK_ERROR}k.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(i||"undefined -> "+zi.NETWORK_ERROR)),this.joinInfo&&dt.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:n===Ln.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:i}),this._disconnectedReason=n,n!==Ln.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(Mt.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo){if(this.role==="audience"){const n=Q("CLIENT_ROLE_OPTIONS")||this._clientRoleOptions;n&&(n.level||n.delay)&&(k.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(n.level,", delay: ").concat(n.delay)),this.setClientRole(this.role,n))}if(dt.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload,isABTestSuccess:this.store.isABTestSuccess}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&this.joinInfo.setLocalAPVersion===1){const n=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!n)return void k.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(n));Vn("EVENT_REPORT_DOMAIN",n[1]),Vn("EVENT_REPORT_BACKUP_DOMAIN",n[1]),Vn("LOG_UPLOAD_SERVER","".concat(n[1],":6444"))}}}),this.signal.on(un.ON_UPLINK_STATS,n=>{this._statsCollector.updateUplinkStats(n)}),this.signal.on(Mt.REQUEST_RECOVER,(n,i,a)=>{if(!this.joinInfo)return a(new ye(X.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));n&&(this.joinInfo.multiIP=n,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,Wi(this,Ri.REQUEST_NEW_GATEWAY_LIST).then(i).catch(a)}),this.signal.on(Mt.REQUEST_JOIN_INFO,async(n,i,a)=>{var l;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void n(this.getJoinMessage({ortc:{}}));const u=Ir((l=this.joinInfo)===null||l===void 0?void 0:l.turnServer);if(Q("NEW_TURN_MODE")&&u){let E=u.servers,y=u.serversFromGateway;const R=this.signal.currentURLIndex;E.length>0&&(E=[E[R%E.length]],u.servers=E),Array.isArray(y)&&y.length>0&&(y=[y[0]],u.serversFromGateway=y),k.debug("[".concat(this.store.clientId,"] use single turn, use turn server index: ").concat(R))}const{iceParameters:h,dtlsParameters:p,rtpCapabilities:m}=await Wi(this,Ri.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:u});try{n(this.getJoinMessage({ortc:{iceParameters:h,dtlsParameters:p,rtpCapabilities:m,version:"2"}}))}catch(E){i(E)}}),this.signal.on(Mt.REQUEST_REJOIN_INFO,n=>{n(this.getRejoinMessage())}),this.signal.on(Mt.REPORT_JOIN_GATEWAY,(n,i)=>{if(!this.joinInfo)return;let a,l="";var u;n instanceof ye?(a=((u=n.data)===null||u===void 0?void 0:u.desc)||n.code,l=n.message):a=n,dt.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:a,errorMsg:l,addr:i,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload})}),this.signal.on(Mt.IS_P2P_DISCONNECTED,n=>{n(b0(this,Ri.IS_P2P_DISCONNECTED))}),this.signal.on(Mt.DISCONNECT_P2P,()=>{this.emit(Ri.DISCONNECT_P2P)}),this.signal.on(Mt.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(Mt.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(Mt.JOIN_RESPONSE,n=>{const i=this.getCurrentGatewayAddress();this.emit(Ri.JOIN_RESPONSE,n,i)}),this.signal.on(Mt.PRE_CONNECT_PC,async()=>{if(this.joinInfo){this.updateTurnConfigFromSignal();const n=this.getCurrentGatewayAddress(),i=Q("FINGERPRINT")||this.joinInfo.apResponse.addresses[this.signal.currentURLIndex].fingerprint;if(n&&i){const a=T6(n);this.emit(Ri.PRE_CONNECT_PC,{candidates:a,fingerprint:i})}}}),this.signal.on(Mt.RECOVER_NOTIFICATION,n=>{this.joinInfo&&typeof Q("AP_REQUEST_DETAIL")=="string"&&(this.joinInfo.apRequestDetail="".concat(Q("AP_REQUEST_DETAIL"),";").concat(n))})}async tryUnsubBeforeResub(n,i){try{await this.signal.request(Dt.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:n,ortc:[i]},!0)}catch(a){throw k.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),a),a}}async tryUnsubDataChannelBeforeResub(n,i){try{await this.signal.request(Dt.UNSUBSCRIBE,{stream_id:i.id},!0)}catch(a){throw k.warning("unsubscribe datachannel warning",a),a}}async tryUnpubBeforeRepub(n,i){try{await this.signal.request(Dt.UNPUBLISH,{stream_id:n,ortc:i},!0)}catch(a){throw k.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),a),a}}async tryUnpubDataChannelBeforeRepub(n,i){try{await this.signal.request(Dt.UNPUBLISH_DATASTREAM,{channnel_id:i.channelId},!0)}catch(a){throw k.warning("unpublish datastream warning: ",a),a}}async tryMassUnsubBeforeResub(n){const i={users:n.map(a=>({stream_id:a.stream_id,stream_type:a.stream_type}))};try{await this.signal.request(Dt.UNSUBSCRIBE_STREAMS,i,!0)}catch(a){throw k.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),a),a}}async muteLocal(n,i){const a={action:n.find(l=>l.stream_type===Mn.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:n,stream_id:i};try{await this.signal.request(Dt.CONTROL,a,!0,!0)}catch(l){throw k.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),l),l}}async unmuteLocal(n,i){const a={action:n.find(l=>l.stream_type===Mn.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:n,stream_id:i};try{await this.signal.request(Dt.CONTROL,a,!0,!0)}catch(l){throw k.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),l),l}}async muteRemote(n,i){const a={action:n===it.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:i};try{await this.signal.request(Dt.CONTROL,a,!0,!0)}catch(l){throw k.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),l),l}}async unmuteRemote(n,i){const a={action:n===it.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:i};try{await this.signal.request(Dt.CONTROL,a,!0,!0)}catch(l){throw k.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),l),l}}uploadWRTCStats(n){this.signal.uploadWRTCStats(n)}upload(n,i){this.signal.upload(n,i)}getSignalRTT(){return this.signal.rtt}async restartICE(n){const i={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:n};try{return await this.signal.request(Dt.RESTART_ICE,i,!0)}catch(a){throw k.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),a),a}}reconnect(n,i){this.state==="CONNECTED"&&this.signal.reconnect(n||void 0,i||zi.P2P_FAILED)}getCurrentGatewayAddress(){var n,i;if(!Q("GATEWAY_WSS_ADDRESS"))return Q("USE_CANDIDATE_FROM_AP_DETAIL")&&(n=this.joinInfo)!==null&&n!==void 0&&n.apGatewayAddress?(k.debug("[".concat(this.store.clientId,"] use candidate from ap detail, ").concat(JSON.stringify(this.joinInfo.apGatewayAddress))),this.joinInfo.apGatewayAddress):(i=this.joinInfo)!==null&&i!==void 0&&i.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(n){await this.signal.request(Dt.SET_PARAMETER,{enablePublishAudioFilter:n})}}let vS=0,BI=0;function wc(t,n,i,a){return new Ye((l,u)=>{n.timeout=n.timeout||Q("HTTP_CONNECT_TIMEOUT"),n.responseType=n.responseType||"json",n.data&&!i?(n.data=JSON.stringify(n.data),vS+=ol(n.data)):i&&(n.data.size?vS+=n.data.size:n.data instanceof FormData?vS+=E3(n.data):vS+=ol(JSON.stringify(n.data))),n.headers=n.headers||{},n.headers["Content-Type"]=n.headers["Content-Type"]||"application/json",n.method="POST",n.url=t,zo.request(n).then(h=>{typeof h.data=="string"?BI+=ol(h.data):h.data instanceof ArrayBuffer||h.data instanceof Uint8Array?BI+=h.data.byteLength:BI+=ol(JSON.stringify(h.data)),a&&l({data:h.data,headers:h.headers}),l(h.data)}).catch(h=>{zo.isCancel(h)?u(new ye(X.OPERATION_ABORTED,"cancel token canceled")):h.code==="ECONNABORTED"?u(new ye(X.NETWORK_TIMEOUT,h.message)):h.response?u(new ye(X.NETWORK_RESPONSE_ERROR,h.response.status)):u(new ye(X.NETWORK_ERROR,h.message))})})}/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */(function(){var t;function n(Oe){var He=0;return function(){return He<Oe.length?{done:!1,value:Oe[He++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(Oe,He,ct){return Oe==Array.prototype||Oe==Object.prototype||(Oe[He]=ct.value),Oe},a,l=function(Oe){Oe=[typeof globalThis=="object"&&globalThis,Oe,typeof window=="object"&&window,typeof self=="object"&&self,typeof s=="object"&&s];for(var He=0;He<Oe.length;++He){var ct=Oe[He];if(ct&&ct.Math==Math)return ct}throw Error("Cannot find global object")}(this);function u(Oe,He){if(He)e:{var ct=l;Oe=Oe.split(".");for(var Ne=0;Ne<Oe.length-1;Ne++){var U=Oe[Ne];if(!(U in ct))break e;ct=ct[U]}(He=He(Ne=ct[Oe=Oe[Oe.length-1]]))!=Ne&&He!=null&&i(ct,Oe,{configurable:!0,writable:!0,value:He})}}function h(Oe){return(Oe={next:Oe})[Symbol.iterator]=function(){return this},Oe}function p(Oe){var He=typeof Symbol<"u"&&Symbol.iterator&&Oe[Symbol.iterator];return He?He.call(Oe):{next:n(Oe)}}if(u("Symbol",function(Oe){function He(U,Z){this.A=U,i(this,"description",{configurable:!0,writable:!0,value:Z})}if(Oe)return Oe;He.prototype.toString=function(){return this.A};var ct="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Ne=0;return function U(Z){if(this instanceof U)throw new TypeError("Symbol is not a constructor");return new He(ct+(Z||"")+"_"+Ne++,Z)}}),u("Symbol.iterator",function(Oe){if(Oe)return Oe;Oe=Symbol("Symbol.iterator");for(var He="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),ct=0;ct<He.length;ct++){var Ne=l[He[ct]];typeof Ne=="function"&&typeof Ne.prototype[Oe]!="function"&&i(Ne.prototype,Oe,{configurable:!0,writable:!0,value:function(){return h(n(this))}})}return Oe}),typeof Object.setPrototypeOf=="function")a=Object.setPrototypeOf;else{var m;e:{var E={};try{E.__proto__={a:!0},m=E.a;break e}catch{}m=!1}a=m?function(Oe,He){if(Oe.__proto__=He,Oe.__proto__!==He)throw new TypeError(Oe+" is not extensible");return Oe}:null}var y=a;function R(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function A(Oe){if(Oe.m)throw new TypeError("Generator is already running");Oe.m=!0}function D(Oe,He){return Oe.h=3,{value:He}}function H(Oe){this.g=new R,this.G=Oe}function B(Oe,He,ct,Ne){try{var U=He.call(Oe.g.j,ct);if(!(U instanceof Object))throw new TypeError("Iterator result "+U+" is not an object");if(!U.done)return Oe.g.m=!1,U;var Z=U.value}catch(le){return Oe.g.j=null,Oe.g.s(le),$(Oe)}return Oe.g.j=null,Ne.call(Oe.g,Z),$(Oe)}function $(Oe){for(;Oe.g.h;)try{var He=Oe.G(Oe.g);if(He)return Oe.g.m=!1,{value:He.value,done:!1}}catch(ct){Oe.g.v=void 0,Oe.g.s(ct)}if(Oe.g.m=!1,Oe.g.l){if(He=Oe.g.l,Oe.g.l=null,He.F)throw He.D;return{value:He.return,done:!0}}return{value:void 0,done:!0}}function K(Oe){this.next=function(He){return Oe.o(He)},this.throw=function(He){return Oe.s(He)},this.return=function(He){return function(ct,Ne){A(ct.g);var U=ct.g.j;return U?B(ct,"return"in U?U.return:function(Z){return{value:Z,done:!0}},Ne,ct.g.return):(ct.g.return(Ne),$(ct))}(Oe,He)},this[Symbol.iterator]=function(){return this}}function Y(Oe,He){return He=new K(new H(He)),y&&Oe.prototype&&y(He,Oe.prototype),He}if(R.prototype.o=function(Oe){this.v=Oe},R.prototype.s=function(Oe){this.l={D:Oe,F:!0},this.h=this.C||this.u},R.prototype.return=function(Oe){this.l={return:Oe},this.h=this.u},H.prototype.o=function(Oe){return A(this.g),this.g.j?B(this,this.g.j.next,Oe,this.g.o):(this.g.o(Oe),$(this))},H.prototype.s=function(Oe){return A(this.g),this.g.j?B(this,this.g.j.throw,Oe,this.g.o):(this.g.s(Oe),$(this))},u("Array.prototype.entries",function(Oe){return Oe||function(){return function(He,ct){He instanceof String&&(He+="");var Ne=0,U=!1,Z={next:function(){if(!U&&Ne<He.length){var le=Ne++;return{value:ct(le,He[le]),done:!1}}return U=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}(this,function(He,ct){return[He,ct]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var ce=function(Oe,He){for(var ct=0;ct<Oe.length;ct++)He(Oe[ct])},ge=function(Oe){return Oe.replace(/\r?\n|\r/g,`\r
`)},Ee=function(Oe,He,ct){return He instanceof Blob?(ct=ct!==void 0?ct+"":typeof He.name=="string"?He.name:"blob",He.name===ct&&Object.prototype.toString.call(He)!=="[object Blob]"||(He=new File([He],ct)),[String(Oe),He]):[String(Oe),String(He)]},me=function(Oe,He){if(Oe.length<He)throw new TypeError(He+" argument required, but only "+Oe.length+" present.")},Te=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,Me=Te.FormData,Xe=Te.XMLHttpRequest&&Te.XMLHttpRequest.prototype.send,nt=Te.Request&&Te.fetch,dn=Te.navigator&&Te.navigator.sendBeacon,hn=Te.Element&&Te.Element.prototype,Qn=Te.Symbol&&Symbol.toStringTag;Qn&&(Blob.prototype[Qn]||(Blob.prototype[Qn]="Blob"),"File"in Te&&!File.prototype[Qn]&&(File.prototype[Qn]="File"));try{new File([],"")}catch{Te.File=function(He,ct,Ne){return He=new Blob(He,Ne||{}),Object.defineProperties(He,{name:{value:ct},lastModified:{value:+(Ne&&Ne.lastModified!==void 0?new Date(Ne.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),Qn&&Object.defineProperty(He,Qn,{value:"File"}),He}}var Vr=function(Oe){return Oe.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},Pr=function(Oe){this.i=[];var He=this;Oe&&ce(Oe.elements,function(ct){if(ct.name&&!ct.disabled&&ct.type!=="submit"&&ct.type!=="button"&&!ct.matches("form fieldset[disabled] *"))if(ct.type==="file"){var Ne=ct.files&&ct.files.length?ct.files:[new File([],"",{type:"application/octet-stream"})];ce(Ne,function(U){He.append(ct.name,U)})}else ct.type==="select-multiple"||ct.type==="select-one"?ce(ct.options,function(U){!U.disabled&&U.selected&&He.append(ct.name,U.value)}):ct.type==="checkbox"||ct.type==="radio"?ct.checked&&He.append(ct.name,ct.value):(Ne=ct.type==="textarea"?ge(ct.value):ct.value,He.append(ct.name,Ne))})};if((t=Pr.prototype).append=function(Oe,He,ct){me(arguments,2),this.i.push(Ee(Oe,He,ct))},t.delete=function(Oe){me(arguments,1);var He=[];Oe=String(Oe),ce(this.i,function(ct){ct[0]!==Oe&&He.push(ct)}),this.i=He},t.entries=function Oe(){var He,ct=this;return Y(Oe,function(Ne){if(Ne.h==1&&(He=0),Ne.h!=3)return He<ct.i.length?Ne=D(Ne,ct.i[He]):(Ne.h=0,Ne=void 0),Ne;He++,Ne.h=2})},t.forEach=function(Oe,He){me(arguments,1);for(var ct=p(this),Ne=ct.next();!Ne.done;Ne=ct.next()){var U=p(Ne.value);Ne=U.next().value,U=U.next().value,Oe.call(He,U,Ne,this)}},t.get=function(Oe){me(arguments,1);var He=this.i;Oe=String(Oe);for(var ct=0;ct<He.length;ct++)if(He[ct][0]===Oe)return He[ct][1];return null},t.getAll=function(Oe){me(arguments,1);var He=[];return Oe=String(Oe),ce(this.i,function(ct){ct[0]===Oe&&He.push(ct[1])}),He},t.has=function(Oe){me(arguments,1),Oe=String(Oe);for(var He=0;He<this.i.length;He++)if(this.i[He][0]===Oe)return!0;return!1},t.keys=function Oe(){var He,ct,Ne,U,Z=this;return Y(Oe,function(le){if(le.h==1&&(He=p(Z),ct=He.next()),le.h!=3)return ct.done?void(le.h=0):(Ne=ct.value,U=p(Ne),D(le,U.next().value));ct=He.next(),le.h=2})},t.set=function(Oe,He,ct){me(arguments,2),Oe=String(Oe);var Ne=[],U=Ee(Oe,He,ct),Z=!0;ce(this.i,function(le){le[0]===Oe?Z&&(Z=!Ne.push(U)):Ne.push(le)}),Z&&Ne.push(U),this.i=Ne},t.values=function Oe(){var He,ct,Ne,U,Z=this;return Y(Oe,function(le){if(le.h==1&&(He=p(Z),ct=He.next()),le.h!=3)return ct.done?void(le.h=0):(Ne=ct.value,(U=p(Ne)).next(),D(le,U.next().value));ct=He.next(),le.h=2})},Pr.prototype._asNative=function(){for(var Oe=new Me,He=p(this),ct=He.next();!ct.done;ct=He.next()){var Ne=p(ct.value);ct=Ne.next().value,Ne=Ne.next().value,Oe.append(ct,Ne)}return Oe},Pr.prototype._blob=function(){var Oe="----formdata-polyfill-"+Math.random(),He=[],ct="--"+Oe+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(Ne,U){return typeof Ne=="string"?He.push(ct+Vr(ge(U))+`"\r
\r
`+ge(Ne)+`\r
`):He.push(ct+Vr(ge(U))+'"; filename="'+Vr(Ne.name)+`"\r
Content-Type: `+(Ne.type||"application/octet-stream")+`\r
\r
`,Ne,`\r
`)}),He.push("--"+Oe+"--"),new Blob(He,{type:"multipart/form-data; boundary="+Oe})},Pr.prototype[Symbol.iterator]=function(){return this.entries()},Pr.prototype.toString=function(){return"[object FormData]"},hn&&!hn.matches&&(hn.matches=hn.matchesSelector||hn.mozMatchesSelector||hn.msMatchesSelector||hn.oMatchesSelector||hn.webkitMatchesSelector||function(Oe){for(var He=(Oe=(this.document||this.ownerDocument).querySelectorAll(Oe)).length;0<=--He&&Oe.item(He)!==this;);return-1<He}),Qn&&(Pr.prototype[Qn]="FormData"),Xe){var Xo=Te.XMLHttpRequest.prototype.setRequestHeader;Te.XMLHttpRequest.prototype.setRequestHeader=function(Oe,He){Xo.call(this,Oe,He),Oe.toLowerCase()==="content-type"&&(this.B=!0)},Te.XMLHttpRequest.prototype.send=function(Oe){Oe instanceof Pr?(Oe=Oe._blob(),this.B||this.setRequestHeader("Content-Type",Oe.type),Xe.call(this,Oe)):Xe.call(this,Oe)}}nt&&(Te.fetch=function(Oe,He){return He&&He.body&&He.body instanceof Pr&&(He.body=He.body._blob()),nt.call(this,Oe,He)}),dn&&(Te.navigator.sendBeacon=function(Oe,He){return He instanceof Pr&&(He=He._asNative()),dn.call(this,Oe,He)}),Te.FormData=Pr}})();const U0=()=>{const t=Q("AREAS");return t.length===0&&t.push(xn.GLOBAL),pc(t).call(t,(n,i,a)=>{const l=F6(i);return l?a===0?l:"".concat(n,",").concat(l):n},"")},F6=t=>t===xn.OVERSEA?"".concat(Qi.ASIA,",").concat(Qi.EUROPE,",").concat(Qi.AFRICA,",").concat(Qi.NORTH_AMERICA,",").concat(Qi.SOUTH_AMERICA,",").concat(Qi.OCEANIA):Qi[t],Kfe=t=>{const n={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return t.map(i=>{const a=lS[i],l=Object.keys(a);l&&l.map(u=>{u!=="CODE"&&(n[u]=n[u].concat(a[u]))})}),n},ES={GLOBAL:{ASIA:[xn.CHINA,xn.JAPAN,xn.INDIA,xn.KOREA,xn.HKMC],EUROPE:[],NORTH_AMERICA:[xn.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},_S=Object.keys(ES[xn.GLOBAL]),VI=[xn.CHINA,xn.NORTH_AMERICA,xn.EUROPE,xn.ASIA,xn.JAPAN,xn.INDIA,xn.OCEANIA,xn.SOUTH_AMERICA,xn.AFRICA,xn.KOREA,xn.HKMC,xn.US],qfe=function(t,n){let i=[];if(Ke(t).call(t,xn.GLOBAL)){const u=[xn.GLOBAL,xn.OVERSEA],h=Object.keys(lS);if(n===xn.GLOBAL)throw new ye(X.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(n===xn.CHINA)i=[xn.OVERSEA];else if(l=n,Ke(_S).call(_S,l)){const p=(a=n,ES[xn.GLOBAL][a]||[]),m=[...u,n,...p];i=h.filter(E=>!Ke(m).call(m,E))}else if(function(p){let m=!1;return _S.forEach(E=>{var y;Ke(y=ES[xn.GLOBAL][E]).call(y,p)&&(m=!0)}),m}(n)){const p=function(E){let y;return _S.forEach(R=>{var A;Ke(A=ES[xn.GLOBAL][R]).call(A,E)&&(y=R)}),y}(n),m=[...u,p,n];i=h.filter(E=>!Ke(m).call(m,E))}else i=t;i=function(p){const m=[];return VI.forEach(E=>{Ke(p).call(p,E)&&m.push(E)}),m.concat(p.filter(E=>!Ke(VI).call(VI,E)))}(i)}else i=t;var a,l;return i};function U6(t){var n,i;if(!t&&Ke(n=Q("AREAS")).call(n,xn.EXTENSIONS))return k.debug("update area from ap : reset"),void jI(rfe,!0);if(!Ke(i=Q("AREAS")).call(i,xn.GLOBAL)||!t)return;let a=lS.EXTENSIONS;a&&(a={CODE:F6(xn.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(t,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(t,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(t,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(t,".agora.io"),"cds-ap-web-2-".concat(t,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(t,".agora.io"),"sua-ap-web-2-".concat(t,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(t,".agora.io"),"uap-ap-web-2-".concat(t,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(t,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(t,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(t,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(t,".agora.io")]},k.debug("update area from ap success: ".concat(t,",config is "),a),Vn("AREAS",[xn.EXTENSIONS],!0),Object.keys(a).map(l=>{l==="LOG_UPLOAD_SERVER"||l==="EVENT_REPORT_DOMAIN"||l==="EVENT_REPORT_BACKUP_DOMAIN"||l==="PROXY_SERVER_TYPE3"?Vn(l,a[l][0]):Vn(l,a[l])}))}function jI(t){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=dt.reportApiInvoke(null,{name:ei.SET_AREA,options:t,tag:wr.TRACER});try{let a=[];if(typeof t=="string"&&(a=[t]),Array.isArray(t)&&(t.forEach(u=>{if(!Ke(i6).call(i6,u))throw new ye(X.INVALID_PARAMS,"invalid area code")}),a=t),Object.prototype.toString.call(t)==="[object Object]"){const{areaCode:u,excludedArea:h}=t;if(!u)throw new ye(X.INVALID_PARAMS,"area code is needed");let p=u;typeof u=="string"&&(p=[u]),a=h?qfe(p,h):p}if(!n){if(Cc.AREAS){const u=new ye(X.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return i.onError(u),void k.warning("setArea is prohibited because of config-distribute")}if(Ke(a).call(a,xn.GLOBAL)&&Q("AREAS")===xn.EXTENSIONS){const u=new ye(X.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return i.onError(u),void k.warning("setArea is prohibited because of ap extensions")}}Vn("AREAS",a,n);const l=Kfe(a);Object.keys(l).map(u=>{u==="LOG_UPLOAD_SERVER"||u==="EVENT_REPORT_DOMAIN"||u==="EVENT_REPORT_BACKUP_DOMAIN"||u==="PROXY_SERVER_TYPE3"?Vn(u,l[u][0]):Vn(u,l[u])}),k.debug("set area success:",a.join(","))}catch(a){throw i.onError(a),a}i.onSuccess()}function B6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function hl(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?B6(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):B6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}let $I=1;function Yfe(t,n,i,a,l){$I+=1;const u={sid:i.sid,command:"convergeAllocateEdge",uid:"666",appId:i.appId,ts:Math.floor(Date.now()/1e3),seq:$I,requestId:$I,version:ss,cname:i.cname},h={service_name:n,json_body:JSON.stringify(u)};let p,m,E=t[0];return yc(async()=>{p=Date.now();const y=await wc(E,{data:h,cancelToken:a,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(m=Date.now()-p,y.code!==0){const D=new ye(X.UNEXPECTED_RESPONSE,"live streaming ap error, code"+y.code,{retry:!0,responseTime:m});throw k.error(D.toString()),D}const R=JSON.parse(y.json_body);if(R.code!==200){const D=new ye(X.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(R.code,", reason: ").concat(R.reason),{code:R.code,responseTime:m});throw k.error(D.toString()),D}if(!R.servers||R.servers.length===0){const D=new ye(X.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:R.code,responseTime:m});throw k.error(D.toString()),D}const A=function(D,H){return{addressList:D.servers.map(B=>"wss://".concat(B.address.replace(/\./g,"-"),".").concat(Q("WORKER_DOMAIN"),":").concat(B.wss,"?serviceName=").concat(encodeURIComponent(H))),workerToken:D.workerToken,vid:D.vid}}(R,n);return Q("LIVE_STREAMING_ADDRESS")&&(A.addressList=Q("LIVE_STREAMING_ADDRESS")instanceof Array?Q("LIVE_STREAMING_ADDRESS"):[Q("LIVE_STREAMING_ADDRESS")]),hl(hl({},A),{},{responseTime:m})},(y,R)=>(dt.apworkerEvent(i.sid,{success:!0,sc:200,serviceName:n,responseDetail:JSON.stringify(y.addressList),firstSuccess:R===0,responseTime:m,serverIp:t[R%t.length]}),!1),(y,R)=>(dt.apworkerEvent(i.sid,{success:!1,sc:y.data&&y.data.code||200,serviceName:n,responseTime:m,serverIp:t[R%t.length]}),!!(y.code!==X.OPERATION_ABORTED&&y.code!==X.UNEXPECTED_RESPONSE||y.data&&y.data.retry)&&(E=t[(R+1)%t.length],!0)),l)}let HI=1;function V6(t,n,i,a){let{url:l,areaCode:u}=t;const{clientId:h,sid:p}=n,m=Date.now();let E;const y=n.role,[R,A]=WI(n,u,[zr.CHOOSE_SERVER]);let D=Hr.networkState;return yc(async()=>{D&&Hr.networkState===Ta.OFFLINE&&Hr.onlineWaiter&&await Ye.race([Hr.onlineWaiter,Ni(a&&a.maxRetryTimeout||ti.maxRetryTimeout)]),D=Hr.networkState;const{data:H,headers:B}=await wc(l,{data:R,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);E=B.http3==="1"?1:-1,dt.reportResourceTiming(l,p),$6(H,l,n,m,[zr.CHOOSE_SERVER],E);const $=L0(H,zr.CHOOSE_SERVER);return zI($),DI($,l)},H=>(H&&dt.joinChooseServer(p,{role:y,lts:m,succ:!0,csAddr:l,opid:A,serverList:H.gatewayAddrs.map(B=>B.address),ec:null,cid:H.cid.toString(),uid:H.uid.toString(),csIp:H.csIp,unilbsServerIds:[zr.CHOOSE_SERVER].toString(),isHttp3:E,corssRegionTagReq:n.apRequestDetail,corssRegionTagRes:H.res.detail&&H.res.detail[38]}),!1),H=>H.code!==X.OPERATION_ABORTED&&(H.code===X.CAN_NOT_GET_GATEWAY_SERVER?H.data.retry:(dt.joinChooseServer(p,{role:y,lts:m,succ:!1,csAddr:l,serverList:null,opid:A,ec:H.code,csIp:H.data&&H.data.csIp,unilbsServerIds:[zr.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:D}),isHttp3:E,corssRegionTagReq:n.apRequestDetail}),k.warning("[".concat(h||"sid-".concat(p.slice(0,6)),"] Choose server network error, retry"),H),!0)),a)}function j6(t,n,i,a){let l,{url:u,areaCode:h,serviceIds:p}=t;const m=Date.now(),E=n.role,[y,R]=WI(n,h,p);let A;return yc(async()=>{A&&Hr.networkState===Ta.OFFLINE&&Hr.onlineWaiter&&await Ye.race([Hr.onlineWaiter,Ni(a&&a.maxRetryTimeout||ti.maxRetryTimeout)]),A=Hr.networkState;const{data:D,headers:H}=await wc(u,{data:y,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);l=H.http3==="1"?1:-1,dt.reportResourceTiming(u,n.sid),$6(D,u,n,m,p,l);const B=L0(D,zr.CHOOSE_SERVER),$=L0(D,n.cloudProxyServer==="proxy5"?zr.CLOUD_PROXY_5:n.cloudProxyServer==="proxy3"||n.cloudProxyServer==="proxy4"?zr.CLOUD_PROXY:zr.CLOUD_PROXY_FALLBACK);return zI(B),{gatewayInfo:DI(B,u),proxyInfo:$,url:u}},D=>(D.gatewayInfo&&dt.joinChooseServer(n.sid,{role:E,lts:m,succ:!0,csAddr:u,serverList:D.gatewayInfo.gatewayAddrs.map(H=>H.address),ec:null,opid:R,cid:D.gatewayInfo.cid.toString(),uid:D.gatewayInfo.uid.toString(),csIp:D.gatewayInfo.csIp,unilbsServerIds:p.toString(),isHttp3:l,corssRegionTagReq:n.apRequestDetail,corssRegionTagRes:D.gatewayInfo.res.detail&&D.gatewayInfo.res.detail[38]}),D.proxyInfo&&dt.joinWebProxyAP(n.sid,{lts:m,sucess:1,apServerAddr:u,turnServerAddrList:D.proxyInfo.addresses.map(H=>H.ip).join(","),errorCode:null,eventType:n.cloudProxyServer,unilbsServerIds:p.toString()}),!1),D=>D.code!==X.OPERATION_ABORTED&&(D.code===X.CAN_NOT_GET_GATEWAY_SERVER?D.data.retry:(dt.joinWebProxyAP(n.sid,{lts:m,sucess:0,apServerAddr:u,turnServerAddrList:null,errorCode:D.code,eventType:n.cloudProxyServer,unilbsServerIds:p.toString(),extend:JSON.stringify({networkState:A})}),k.warning("[".concat(n.clientId,"] multi unilbs network error, retry"),D),!0)),a)}const $6=(t,n,i,a,l,u)=>{const{sid:h,clientId:p,cloudProxyServer:m}=i,E=[],y=R=>{R.flag===4096?dt.joinChooseServer(h,{role:i.role,lts:a,succ:!1,csAddr:n,opid:t.opid,serverList:null,ec:R.error.message,csIp:R.error.data&&R.error.data.csIp,unilbsServerIds:l.toString(),isHttp3:u,corssRegionTagReq:i.apRequestDetail}):R.flag!==1048576&&R.flag!==4194304&&R.flag!==4194310||dt.joinWebProxyAP(h,{lts:a,sucess:0,apServerAddr:n,turnServerAddrList:null,errorCode:R.error.code,eventType:m,unilbsServerIds:l.toString()})};if(t.response_body.forEach(R=>{const A=R.buffer.code;if(R.uri===23&&A===0&&!R.buffer.edges_services)if(R.buffer.flag===4194310)k.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),R.buffer.edges_services=[];else{const D={error:new ye(X.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:t.detail[502]}),flag:R.buffer.flag};E.push(D),y(D)}if(A!==0){const D=sp(A),H={error:new ye(X.CAN_NOT_GET_GATEWAY_SERVER,D.desc,{desc:D.desc,retry:D.retry,csIp:t.detail[502]}),flag:R.buffer.flag};R.buffer.flag===4194310?k.warning(H.error.toString()):E.push(H),y(H)}}),E.length)throw k.warning("[".concat(p||"sid-".concat(h.slice(0,6)),"] multi unilbs ").concat(n," failed, ").concat(E.map(R=>"flag: ".concat(R.flag,", message: ").concat(R.error.message,", retry: ").concat(R.error.data.retry)).join(" | "))),new ye(X.CAN_NOT_GET_GATEWAY_SERVER,E.map(R=>"flag: ".concat(R.flag,", message: ").concat(R.error.message)).join(" | "),{retry:!!E.find(R=>R.error.data.retry),csIp:t.detail[502],desc:[...new Set(E.map(R=>{var A;return R==null||(A=R.error)===null||A===void 0||(A=A.data)===null||A===void 0?void 0:A.desc}).filter(R=>!!R))]})},zI=t=>{var n,i,a,l;if(t.addresses&&t.addresses.length===0&&t.code===0)throw new ye(X.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:t.detail&&t.detail[502]});if(Q("AP_AREA")&&((a=t.detail)!==null&&a!==void 0&&a[23]&&typeof((l=t.detail)===null||l===void 0?void 0:l[23])=="string"?U6(t.detail[23].toLowerCase()):U6()),(n=t.detail)!==null&&n!==void 0&&n[19]&&typeof((i=t.detail)===null||i===void 0?void 0:i[19])=="string"){const h=t.detail[19],p=h==null?void 0:h.split(";");for(let m=0;m<p.length;m++){var u;const E=mo(u=p[m]).call(u);t.addresses[m]&&p&&(t.addresses[m].fingerprint=E)}}if(Q("GATEWAY_ADDRESS")&&Q("GATEWAY_ADDRESS").length>0){k.debug("assign gateway address to",Q("GATEWAY_ADDRESS"));const h=Q("GATEWAY_ADDRESS").map(p=>{var m,E;const y=(m=(E=t.addresses.find(R=>R.ip===p.ip&&R.port===p.port))===null||E===void 0?void 0:E.fingerprint)!==null&&m!==void 0?m:"";return{ip:p.ip,port:p.port,ticket:t.addresses[0]&&t.addresses[0].ticket,fingerprint:y}});t.addresses=h}},Xfe=(t,n)=>{if(t.response_body&&t.response_body.length){const i=t.response_body[0];if(i.buffer.code!==0){const a=sp(i.buffer.code);throw new ye(X.UPDATE_TICKET_FAILED,"[".concat(i.buffer.code,"]: ").concat(a.desc),{retry:a.retry})}return i.buffer.ticket}throw k.debug("update ticket request received ap response without response body:",n),new ye(X.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},WI=(t,n,i)=>{const a=Math.floor(Math.random()*1e12),l=t.role==="host"?"1":t.role==="audience"?"2":void 0,u={appid:t.appId,client_ts:Date.now(),opid:a,sid:t.sid,request_bodies:[{uri:22,buffer:{cname:t.cname,detail:hl(hl(hl({6:t.stringUid,11:n,12:Q("USE_NEW_TOKEN")?"1":void 0},l?{17:l}:{}),{},{22:n},t.apRequestDetail?{33:t.apRequestDetail}:{}),t.apRTM?{26:"RTM2"}:{}),key:t.token,service_ids:i,uid:t.uid||0}}]};u.request_bodies.forEach(p=>{t.multiIP&&t.multiIP.gateway_ip&&(p.buffer.detail[5]=JSON.stringify({vocs_ip:[t.multiIP.uni_lbs_ip],vos_ip:[t.multiIP.gateway_ip]}))});const h=new FormData;return h.append("request",JSON.stringify(u)),[h,a]},Jfe=(t,n)=>{const i=Math.floor(Math.random()*1e12),a={appid:t.appId,client_ts:Date.now(),opid:i,sid:t.sid,request_bodies:[{uri:28,buffer:{cname:t.cname,detail:{1:"",6:t.stringUid,12:"1"},token:t.token,service_ids:n,uid:t.uid||0,edges_services:t.apResponse.addresses.map(u=>({ip:u.ip,port:u.port}))}}]},l=new FormData;return l.append("request",JSON.stringify(a)),[l,i]};let dp=0;function hp(t){return Ye.all(t.map(n=>n.then(i=>{throw i},i=>i))).then(n=>{throw n},n=>n)}const B0=async t=>{let{fragementLength:n,referenceList:i,asyncMapHandler:a,allFailedhandler:l,promisesCollector:u}=t,h=0;const p=n;let m,E=0;const y=async()=>{const R=(()=>{const A=h*p,D=A+p;return i.slice(A,D).map(a)})();u&&u.push(...R);try{m=await hp(R)}catch(A){if(E+=p,h++,!(E>=i.length))return void await y();l(A)}R.forEach(A=>A.cancel())};return await y(),m},H6=async t=>{let{referenceList:n,asyncMapHandler:i,closeFn:a}=t;const l=n.length;let u=0;const h=async()=>{const p=i(n.shift());try{return await p}catch(m){if(u++,u>=l||a!=null&&a(m))throw m;return h()}};return h()};async function GI(t,n,i,a){return{gatewayInfo:await async function(u,h,p,m){let E=null;const y=[],R=async()=>{const D=Q("WEBCS_DOMAIN").slice(0,Q("AJAX_REQUEST_CONCURRENT")).map($=>({url:u.proxyServer?"https://".concat(u.proxyServer,"/ap/?url=").concat($+"/api/v2/transpond/webrtc?v=2"):"https://".concat($,"/api/v2/transpond/webrtc?v=2"),areaCode:U0()})),H=m.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:D.map($=>$.url)}),B=await B0({fragementLength:Q("FRAGEMENT_LENGTH"),referenceList:D,asyncMapHandler:$=>(k.debug("[".concat(u.clientId,"] Connect to choose_server:"),$.url),V6($,u,h,p)),allFailedhandler:$=>{throw m.recordJoinChannelService({endTs:Date.now(),status:"error",errors:$},H),$[0]},promisesCollector:y});return m.recordJoinChannelService({endTs:Date.now(),status:"success"},H),B},A=async()=>{if(await Ni(1e3),E!==null)return E;const D=Q("WEBCS_DOMAIN_BACKUP_LIST").map($=>({url:u.proxyServer?"https://".concat(u.proxyServer,"/ap/?url=").concat($+"/api/v2/transpond/webrtc?v=2"):"https://".concat($,"/api/v2/transpond/webrtc?v=2"),areaCode:U0()})),H=m.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:D.map($=>$.url)}),B=await B0({fragementLength:Q("FRAGEMENT_LENGTH"),referenceList:D,asyncMapHandler:$=>(k.debug("[".concat(u.clientId,"] Connect to backup choose_server:"),$.url),V6($,u,h,p)),allFailedhandler:$=>{throw m.recordJoinChannelService({endTs:Date.now(),status:"error",errors:$},H),$[0]},promisesCollector:y});return m.recordJoinChannelService({endTs:Date.now(),status:"success"},H),B};try{return E=await hp([R(),A()]),y.length&&y.forEach(D=>D.cancel&&typeof D.cancel=="function"&&D.cancel()),E}catch(D){throw D[0]}}(t,n,i,a)}}async function z6(t,n,i,a,l){const u=t.cloudProxyServer;if(u==="disabled"){if(!a)return;if(t.useLocalAccessPoint)return await GI(t,n,i,l);if(Q("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:A,proxyInfo:D}=await K6(t,n,i,l);if(t.turnServer&&t.turnServer.mode!=="auto")return{gatewayInfo:A};const H=D.map(B=>({turnServerURL:B.address,tcpport:B.tcpport||Gi.tcpport,udpport:B.udpport||Gi.udpport,username:B.username||Gi.username,password:B.password||Gi.password,forceturn:!1,security:!0}));if(l.useP2P){var h;const B=(h=t.uid)!==null&&h!==void 0?h:A.uid,$="glb:".concat(B.toString()),K=await Bw($),Y=D.map(ce=>({turnServerURL:ce.address,tcpport:ce.tcpport||Gi.tcpport,udpport:ce.udpport||Gi.udpport,username:$,password:K,forceturn:!1,security:!0}));H.push(...Y)}return t.turnServer={mode:"manual",servers:H},{gatewayInfo:A}}return await GI(t,n,i,l)}const{proxyInfo:p,gatewayInfo:m}=await K6(t,n,i,l),E={gatewayInfo:m},y=p.map(A=>({turnServerURL:A.address,tcpport:u==="proxy3"?void 0:A.tcpport?A.tcpport:Gi.tcpport,udpport:u==="proxy4"?void 0:A.udpport?A.udpport:Gi.udpport,username:A.username||Gi.username,password:A.password||Gi.password,forceturn:u!=="proxy4",security:u==="proxy5"}));if(l.useP2P){var R;const A=(R=t.uid)!==null&&R!==void 0?R:m.uid,D="glb:".concat(A.toString()),H=await Bw(D),B=p.map($=>({turnServerURL:$.address,tcpport:u==="proxy3"?void 0:$.tcpport||Gi.tcpport,udpport:u==="proxy4"?void 0:$.udpport||Gi.udpport,username:D,password:H,forceturn:u!=="proxy4",security:u==="proxy5"}));y.push(...B)}return t.turnServer={mode:"manual",servers:y},k.debug("[".concat(t.clientId,"] set proxy server: ").concat(t.proxyServer,", mode: ").concat(u)),E}async function W6(t,n,i,a,l){const u=Q("ACCOUNT_REGISTER").slice(0,Q("AJAX_REQUEST_CONCURRENT"));let h=[];h=n.proxyServer?u.map(m=>"https://".concat(n.proxyServer,"/ap/?url=").concat(m+"/api/v1")):u.map(m=>"https://".concat(m,"/api/v1"));const p=l==null?void 0:l.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:h});try{const m=await async function(E,y,R,A,D){const H=Date.now(),B={sid:R.sid,opid:10,appid:R.appId,string_uid:y};let $=E[0];const K=await yc(()=>wc($+"".concat($.indexOf("?")===-1?"?":"&","action=stringuid"),{data:B,cancelToken:A,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(Y,ce)=>{if(Y.code===0){if(Y.uid<=0||Y.uid>=Math.pow(2,32))throw k.error("Invalid Uint Uid ".concat(y," => ").concat(Y.uid),Y),dt.reqUserAccount(B.sid,{lts:H,success:!1,serverAddr:$,stringUid:B.string_uid,uid:Y.uid,errorCode:X.INVALID_UINT_UID_FROM_STRING_UID,extend:B}),new ye(X.INVALID_UINT_UID_FROM_STRING_UID);return dt.reqUserAccount(B.sid,{lts:H,success:!0,serverAddr:$,stringUid:B.string_uid,uid:Y.uid,errorCode:null,extend:B}),!1}const ge=sp(Y.code);return ge.retry&&($=E[(ce+1)%E.length]),dt.reqUserAccount(B.sid,{lts:H,success:!1,serverAddr:$,stringUid:B.string_uid,uid:Y.uid,errorCode:ge.desc,extend:B}),ge.retry},(Y,ce)=>Y.code!==X.OPERATION_ABORTED&&(dt.reqUserAccount(B.sid,{lts:H,success:!1,serverAddr:$,stringUid:B.string_uid,uid:null,errorCode:Y.code,extend:B}),$=E[(ce+1)%E.length],!0),D);if(K.code!==0){const Y=sp(K.code);throw new ye(X.UNEXPECTED_RESPONSE,Y.desc)}return K}(h,t,n,i,a);return l==null||l.recordJoinChannelService({status:"success",endTs:Date.now()},p),m.uid}catch(m){throw l==null||l.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[m]},p),m}}async function Qfe(t,n,i){const a=Q("ACCOUNT_REGISTER");let l=[];l=n.proxyServer?a.map(u=>"https://".concat(n.proxyServer,"/ap/?url=").concat(u+"/api/v1")):a.map(u=>"https://".concat(u,"/api/v1"));try{return await H6({referenceList:l,asyncMapHandler:h=>async function(p,m,E,y){const R=Date.now(),A={sid:E.sid,opid:10,appid:E.appId,string_uid:m};try{const D=await wc(p+"".concat(p.indexOf("?")===-1?"?":"&","action=stringuid"),{data:A,cancelToken:y,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}});if(D.code!==0){const H=sp(D.code);throw new ye(X.UNEXPECTED_RESPONSE,"preload sua error:".concat(H.desc),H)}if(D.uid<=0||D.uid>=Math.pow(2,32))throw new ye(X.INVALID_UINT_UID_FROM_STRING_UID);return{requestTime:R,url:p,req:A,uid:D.uid,elapse:Date.now()-R}}catch(D){throw D}}(h,t,n,i),closeFn:h=>h.code===X.OPERATION_ABORTED||h.code===X.UNEXPECTED_RESPONSE&&!h.data.retry})}catch(u){throw u}}async function Zfe(t,n,i){const a=Q("CDS_AP").slice(0,Q("AJAX_REQUEST_CONCURRENT")).map(m=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(m+"/api/v1"):"https://".concat(m,"/api/v1?action=config")),l=a.map(m=>function(E,y,R,A){const D=En(),H={flag:64,cipher_method:0,features:hl(hl(hl(hl(hl({install_id:Xw(),device:D.name,system:D.os,system_general:navigator.userAgent,vendor:y.appId,version:ss,cname:y.cname,session_id:y.sid,proxyServer:y.proxyServer,sdk_type:zfe.WEB_RTC,browser_name:D.name,browser_version:D.version,user_agent:navigator.userAgent,channel_name:y.cname},y.stringUid&&{string_uid:y.stringUid}),y.uid&&{uid:y.uid+""}),D.os&&{os_name:D.os}),D.osVersion&&{os_version:D.osVersion}),{},{detail:""})};return yc(()=>wc(E,{data:H,timeout:1e3,cancelToken:R,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,B=>B.code!==X.OPERATION_ABORTED,A)}(m,t,n,i));let u=null,h=null,p={};try{u=await hp(l)}catch(m){if(m.code===X.OPERATION_ABORTED)throw m;h=m}if(l.forEach(m=>m.cancel()),dt.reportApiInvoke(t.sid,{name:ei.REQUEST_CONFIG_DISTRIBUTE,options:{error:h,res:u}}).onSuccess(),u&&u.test_tags)try{p=function(m){if(!m.test_tags)return{};const E=m.test_tags,y=Object.keys(E),R={};return y.forEach(A=>{var D;const H=mo(D=A.slice(4)).call(D),B=JSON.parse(E[A]),$=B[1];R[H]={tag:B[0]||"",value:$}}),R}(u)}catch{}return p}async function G6(t,n){const i=Q("WEBCS_DOMAIN").concat(Q("WEBCS_DOMAIN_BACKUP_LIST")).map(a=>({url:"https://".concat(a,"/api/v2/transpond/webrtc?v=2"),areaCode:U0(),serviceIds:[zr.CHOOSE_SERVER,zr.CLOUD_PROXY_FALLBACK]}));try{return await H6({referenceList:i,asyncMapHandler:l=>async function(u,h,p){let m,{url:E,areaCode:y,serviceIds:R}=u;const A=Date.now(),[D,H]=WI(h,y,R);let B=Hr.networkState;try{B&&Hr.networkState===Ta.OFFLINE&&Hr.onlineWaiter&&await Ye.race([Hr.onlineWaiter,Ni(ti.maxRetryTimeout)]),B=Hr.networkState;const{data:$,headers:K}=await wc(E,{data:D,cancelToken:p,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);m=K.http3==="1"?1:-1,(Ee=>{const me=[];if(Ee.response_body.forEach(Te=>{const Me=Te.buffer.code;if(Te.uri===23&&Me===0&&!Te.buffer.edges_services)if(Te.buffer.flag===4194310)Te.buffer.edges_services=[];else{const Xe={error:new ye(X.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:Ee.detail[502]}),flag:Te.buffer.flag};me.push(Xe)}if(Me!==0){const Xe=sp(Me),nt={error:new ye(X.CAN_NOT_GET_GATEWAY_SERVER,Xe.desc,{desc:Xe.desc,retry:Xe.retry,csIp:Ee.detail[502]}),flag:Te.buffer.flag};Te.buffer.flag===4194310?k.warning(nt.error.toString()):me.push(nt)}}),me.length)throw new ye(X.CAN_NOT_GET_GATEWAY_SERVER,me.map(Te=>"flag: ".concat(Te.flag,", message: ").concat(Te.error.message)).join(" | "),{retry:!!me.find(Te=>Te.error.data.retry),csIp:Ee.detail[502],desc:[...new Set(me.map(Te=>{var Me;return Te==null||(Me=Te.error)===null||Me===void 0||(Me=Me.data)===null||Me===void 0?void 0:Me.desc}).filter(Te=>!!Te))]})})($);const ce=L0($,zr.CHOOSE_SERVER),ge=L0($,zr.CLOUD_PROXY_FALLBACK);return zI(ce),{gatewayInfo:DI(ce,E),proxyInfo:ge,opid:H,requestTime:A,url:E,isHttp3:m,elapse:Date.now()-A}}catch($){throw $}}(l,t,n),closeFn:l=>l.code===X.OPERATION_ABORTED||l.code===X.CAN_NOT_GET_GATEWAY_SERVER&&!l.data.retry})}catch(a){throw a}}async function K6(t,n,i,a){const l=Q("PROXY_SERVER_TYPE3"),u=(D,H,B)=>{let $=B||l;return Array.isArray($)&&($=H%2==0?l[1]:l[0]),"https://".concat($,"/ap/?url=").concat(D)};let h=null;const p=[],m=async()=>{const D=Q("WEBCS_DOMAIN").slice(0,Q("AJAX_REQUEST_CONCURRENT")).map(($,K)=>{let Y;return Y=t.cloudProxyServer==="disabled"&&t.proxyServer?u("".concat($,"/api/v2/transpond/webrtc?v=2"),K,t.proxyServer):t.cloudProxyServer==="disabled"||t.cloudProxyServer==="fallback"?"https://".concat($,"/api/v2/transpond/webrtc?v=2"):u("".concat($,"/api/v2/transpond/webrtc?v=2"),K),{url:Y,areaCode:U0(),serviceIds:[zr.CHOOSE_SERVER,t.cloudProxyServer==="proxy5"?zr.CLOUD_PROXY_5:t.cloudProxyServer==="proxy3"||t.cloudProxyServer==="proxy4"?zr.CLOUD_PROXY:zr.CLOUD_PROXY_FALLBACK]}}),H=a.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:D.map($=>$.url)}),B=await B0({fragementLength:Q("FRAGEMENT_LENGTH"),referenceList:D,asyncMapHandler:$=>(k.debug("[".concat(t.clientId,"] Connect to choose_server:"),$.url),j6($,t,n,i)),allFailedhandler:$=>{throw a.recordJoinChannelService({endTs:Date.now(),status:"error",errors:$},H),$[0]},promisesCollector:p});return a.recordJoinChannelService({endTs:Date.now(),status:"success"},H),B},E=async()=>{if(await Ni(1e3),h!==null)return h;const D=Q("WEBCS_DOMAIN_BACKUP_LIST").map(($,K)=>{let Y;return Y=t.cloudProxyServer==="disabled"&&t.proxyServer?u("".concat($,"/api/v2/transpond/webrtc?v=2"),K,t.proxyServer):t.cloudProxyServer==="disabled"||t.cloudProxyServer==="fallback"?"https://".concat($,"/api/v2/transpond/webrtc?v=2"):u("".concat($,"/api/v2/transpond/webrtc?v=2"),K),{url:Y,areaCode:U0(),serviceIds:[zr.CHOOSE_SERVER,t.cloudProxyServer==="proxy5"?zr.CLOUD_PROXY_5:t.cloudProxyServer==="proxy3"||t.cloudProxyServer==="proxy4"?zr.CLOUD_PROXY:zr.CLOUD_PROXY_FALLBACK]}}),H=a.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:D.map($=>$.url)}),B=await B0({fragementLength:Q("FRAGEMENT_LENGTH"),referenceList:D,asyncMapHandler:$=>(k.debug("[".concat(t.clientId,"] Connect to backup choose_server:"),$.url),j6($,t,n,i)),allFailedhandler:$=>{throw a.recordJoinChannelService({endTs:Date.now(),status:"error",errors:$},H),$[0]},promisesCollector:p});return a.recordJoinChannelService({endTs:Date.now(),status:"success"},H),B};let y,R,A;try{({gatewayInfo:y,proxyInfo:R,url:A}=await hp([m(),E()]))}catch(D){throw D[0]}if(p.length&&p.forEach(D=>D.cancel&&typeof D.cancel=="function"&&D.cancel()),!y||!R)throw new ye(X.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(t.apUrl=A,t.cloudProxyServer!=="disabled"&&Array.isArray(l)&&A){const D=/^https?:\/\/(.+?)(\/.*)?$/.exec(A)[1];Ke(l).call(l,D)&&(t.proxyServer=D,k.setProxyServer(D),dt.setProxyServer(D))}return h={gatewayInfo:y,proxyInfo:await v6(R,y.uid)},h}async function epe(t,n,i){const a=Q("UAP_AP").slice(0,Q("AJAX_REQUEST_CONCURRENT")).map(u=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(u+"/api/v1?action=uap"):"https://".concat(u,"/api/v1?action=uap")),l=a.map(u=>function(h,p,m,E){const y={command:"convergeAllocateEdge",sid:p.sid,appId:p.appId,token:p.token,ts:Date.now(),version:ss,cname:p.cname,uid:p.uid.toString(),requestId:HI,seq:HI};HI+=1;const R={service_name:"tele_channel",json_body:JSON.stringify(y)};return yc(async()=>{const A=await wc(h,{data:R,cancelToken:m,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(A.code!==0){const H=new ye(X.UNEXPECTED_RESPONSE,"cross channel ap error, code"+A.code,{retry:!0});throw k.error(H.toString()),H}const D=JSON.parse(A.json_body);if(D.code!==200){const H=new ye(X.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(D.code,", reason: ").concat(D.reason));throw k.error(H.toString()),H}if(!D.servers||D.servers.length===0){const H=new ye(X.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw k.error(H.toString()),H}return{vid:D.vid,workerToken:D.workerToken,addressList:(Q("CHANNEL_MEDIA_RELAY_SERVERS")||D.servers).map(H=>"wss://".concat(H.address.replace(/\./g,"-"),".").concat(Q("WORKER_DOMAIN"),":").concat(H.wss))}},void 0,A=>!!(A.code!==X.OPERATION_ABORTED&&A.code!==X.UNEXPECTED_RESPONSE||A.data&&A.data.retry),E)}(u,t,n,i));try{const u=await hp(l);return l.forEach(h=>h.cancel()),u}catch(u){throw u[0]}}async function tpe(t,n,i){let a=null;const l=[],u=async h=>{const p=Q(h?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(m=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(m+"/api/v2/transpond/webrtc?v=2"):"https://".concat(m,"/api/v2/transpond/webrtc?v=2"));return h&&(await Ni(1e3),a!==null)?a:await B0({fragementLength:Q("FRAGEMENT_LENGTH"),referenceList:p,asyncMapHandler:m=>(k.debug("[".concat(t.clientId,"] update ticket, Connect to ").concat(h?"backup":""," choose_server:"),m),function(E,y,R,A){const[D]=Jfe(y,[zr.CHOOSE_SERVER]);let H=Hr.networkState;return yc(async()=>{H&&Hr.networkState===Ta.OFFLINE&&Hr.onlineWaiter&&await Ye.race([Hr.onlineWaiter,Ni(A&&A.maxRetryTimeout||ti.maxRetryTimeout)]),H=Hr.networkState;const B=await wc(E,{data:D,cancelToken:R,headers:{"Content-Type":"multipart/form-data;"}},!0);return Xfe(B,E)},()=>!1,B=>B.code!==X.OPERATION_ABORTED&&(B.code===X.UPDATE_TICKET_FAILED?B.data.retry:(k.warning("[".concat(y.clientId,"] update ticket network error, retry"),B),!0)),A)}(m,t,n,i)),allFailedhandler:m=>{throw m[0]},promisesCollector:l})};try{return a=await hp([u(!1),u(!0)]),l.length&&l.forEach(h=>h.cancel&&typeof h.cancel=="function"&&h.cancel()),a}catch(h){throw h[0]}}function q6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function KI(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?q6(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):q6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}class npe extends Sr{get isSuccess(){return!!this.configs}constructor(n,i){super(),G(this,"configs",void 0),G(this,"store",void 0),G(this,"joinInfo",void 0),G(this,"cancelToken",void 0),G(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),G(this,"interval",void 0),G(this,"mutex",void 0),G(this,"mutableParamsRead",!1),G(this,"configCache",{}),G(this,"limit_bitrate",void 0),this.mutex=new Ji("config-distribute",n),this.store=i}startGetConfigDistribute(n,i){this.joinInfo=n,this.cancelToken=i,this.interval&&this.stopGetConfigDistribute(),Q("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},Q("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0,this.configs=void 0,this.limit_bitrate=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,dt.reportApiInvoke(null,{options:void 0,name:ei.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:wr.TRACER}).onSuccess(JSON.stringify(Cc))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void k.debug("[config-distribute] get config distribute interrupted have no joininfo");let n;const i=await this.mutex.lock();try{n=await Zfe(this.joinInfo,this.cancelToken,this.retryConfig),k.debug("[config-distribute] get config distribute",JSON.stringify(n));const a=function(l){var u;const h=a0(u=Object.keys(l).filter(E=>/^webrtc_ng_global_parameter/.test(E))).call(u);for(let E=0;E<h.length;E++)for(let y=h.length-1;y>E;y--){const R=h[y],A=l[R].value;if(typeof A.__priority=="number"){const D=A.__priority,H=h[y-1],B=l[H].value;if(typeof B.__priority=="number"){if(!(D>B.__priority))continue;{const $=R;h[y]=h[y-1],h[y-1]=$}}else{const $=R;h[y]=h[y-1],h[y-1]=$}}}const p=Date.now();let m={};return h.forEach(E=>{const y=l[E].value.__expires;y&&y<=p||(m[E]=l[E])}),m}(n);this.cacheGlobalParameterConfig(a),this.store.hasStartJoinChannel||(this.store.isABTestSuccess=!0),this.configs=a}catch(a){const l=new ye(X.NETWORK_RESPONSE_ERROR,a);k.warning("[config-distribute] ".concat(l.toString()))}finally{i()}}getBitrateLimit(){return this.limit_bitrate||void 0}handleBitrateLimit(n){o6(n)&&(this.limit_bitrate?this.limit_bitrate&&this.limit_bitrate.id!==n.id&&this.emit(N0.UPDATE_BITRATE_LIMIT,n):this.emit(N0.UPDATE_BITRATE_LIMIT,n))}getLowStreamConfigDistribute(){return this.limit_bitrate&&KI({},this.limit_bitrate.low_stream_uplink)}handleABTestConfigDistribute(n){try{const i={},a=Object.keys(n),l=[];a.forEach(u=>{const h=n[u].value;i[u]=h;const p=h.__id;if(p&&this.configCache[u]&&this.configCache[u].__id===p)return;const m=h.__type,E=n[u].value,y=n[u].tag;let R=0;m?m===L3.REALTIME&&(R=1):Object.keys(E).some(A=>Object.prototype.hasOwnProperty.call(eI,A)||!bI()&&Object.prototype.hasOwnProperty.call(j_,A)?(R=1,!0):void 0),l.push({tag:y,isApplied:R,feature:u,params:JSON.stringify(h)})}),l.forEach(u=>{let{tag:h,feature:p,params:m,isApplied:E}=u;this.store.sessionId&&dt.abTest(this.store.sessionId,{intSucc:1,isApplied:E,tag:h,feature:p,params:m,cid:this.store.cid,uid:this.store.intUid})}),this.configCache=i}catch(i){k.debug("handleABTestConfigDistribute error",i)}}cacheGlobalParameterConfig(n){const i=function(l){const u={};return Object.keys(l).forEach(h=>{const p=l[h].value,m=p.__expires,E=p.__type;Object.keys(p).forEach(y=>{y==="__id"||y==="__type"||y==="__priority"||y==="__expires"||Object.prototype.hasOwnProperty.call(u,y)||(u[y]=KI(KI({value:p[y]},m&&{expires:m}),E&&{type:E}))})}),u}(n);try{var a;const l=(a=i.LIMIT_BITRATE)===null||a===void 0?void 0:a.value;delete i.LIMIT_BITRATE,l&&o6(l)&&this.handleBitrateLimit(l),this.limit_bitrate=l,this.handleGlobalParameterConfig(i),this.handleABTestConfigDistribute(n),function(p){try{const m=Date.now();Object.keys(p).forEach(E=>{const{value:y,type:R,expires:A}=p[E];A&&A<=m||((R===L3.REALTIME||Object.prototype.hasOwnProperty.call(eI,E))&&(Cc[E]=y,ar[E]=y,k.debug("Update realtime parameters from config distribute",E,y)),R||bI()||!Object.prototype.hasOwnProperty.call(j_,E)||(Cc[E]=y,ar[E]=y,k.debug("Update gateway parameters from config distribute",E,y)))})}catch(m){k.error("Error update config immediately: ".concat(p),m.message)}}(i);const u=JSON.stringify(i),h=window.btoa(u);window.localStorage.setItem("websdk_ng_global_parameter",h),k.debug("Caching global parameters ".concat(u))}catch(l){k.error("Error caching global parameters:",l.message)}}handleGlobalParameterConfig(n){try{const i=Date.now();Object.keys(n).forEach(a=>{if(a==="CLIENT_ROLE_OPTIONS"&&Object.prototype.hasOwnProperty.call(ar,a)){const{value:l,expires:u}=n[a];if(u&&u<=i)return;(function(h,p){try{return typeof h=="object"&&typeof p=="object"&&JSON.stringify(h)===JSON.stringify(p)}catch{return!1}})(ar[a],l)||(Cc[a]=l,ar[a]=l,this.emit(N0.UPDATE_CLIENT_ROLE_OPTIONS,l),k.debug("Updating client role options: ".concat(JSON.stringify(l))))}})}catch(i){k.error("Error handling global parameter config:",i.message)}}}class rpe extends Sr{constructor(){super(...arguments),G(this,"resultStorage",new Map)}setLocalAudioStats(n,i,a){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",n,this.checkAudioInputLevel(a,i)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",n,this.checkSendAudioBitrate(a,i))}setLocalVideoStats(n,i,a){this.record("SEND_VIDEO_BITRATE_TOO_LOW",n,this.checkSendVideoBitrate(a,i)),this.record("FRAMERATE_INPUT_TOO_LOW",n,this.checkFramerateInput(a,i)),this.record("FRAMERATE_SENT_TOO_LOW",n,this.checkFramerateSent(a))}setRemoteAudioStats(n,i){const a=n.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",a,this.checkAudioOutputLevel(i))}setRemoteVideoStats(n,i){const a=n.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",a,this.checkVideoDecode(i))}record(n,i,a){if(Q("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(n)||this.resultStorage.set(n,{result:[],isPrevNormal:!0});const l=this.resultStorage.get(n);if(l&&(l.result.push(a),l.result.length>=5)){var u;const h=Ke(u=l.result).call(u,!0);l.isPrevNormal&&!h&&this.emit("exception",Y6[n],n,i),!l.isPrevNormal&&h&&this.emit("exception",Y6[n]+2e3,n+"_RECOVER",i),l.isPrevNormal=h,l.result=[]}}checkAudioOutputLevel(n){return!(n.receiveBitrate>0&&n.receiveLevel===0)}checkAudioInputLevel(n,i){return i instanceof di&&!i.isActive||!!i.muted||n.sendVolumeLevel!==0}checkFramerateInput(n,i){let a=null;i._encoderConfig&&i._encoderConfig.frameRate&&(a=Ra(i._encoderConfig.frameRate));const l=n.captureFrameRate;return!a||!l||!(a>10&&l<5||a<10&&a>=5&&l<=1)}checkFramerateSent(n){return!(n.captureFrameRate&&n.sendFrameRate&&n.captureFrameRate>5&&n.sendFrameRate<=1)}checkSendVideoBitrate(n,i){return!!i.muted||n.sendBitrate!==0}checkSendAudioBitrate(n,i){return i instanceof di&&!i.isActive||!!i.muted||n.sendBitrate!==0}checkVideoDecode(n){return n.receiveBitrate===0||n.decodeFrameRate!==0}}const Y6={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},eo=new class{markSubscribeStart(t,n){performance.mark("agora-web-sdk/".concat(t,"/subscribe-").concat(n))}markPublishStart(t,n){performance.mark("agora-web-sdk/".concat(t,"/publish-").concat(n))}measureFromSubscribeStart(t,n){const i=performance.getEntriesByName("agora-web-sdk/".concat(t,"/subscribe-").concat(n));if(i.length>0){const a=i[i.length-1];return Math.round(performance.now()-a.startTime)}return 0}measureFromPublishStart(t,n){const i=performance.getEntriesByName("agora-web-sdk/".concat(t,"/publish-").concat(n));if(i.length>0){const a=i[i.length-1];return Math.round(performance.now()-a.startTime)}return 0}};function X6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function ah(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?X6(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):X6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}class V0{constructor(n){G(this,"store",void 0),G(this,"onStatsException",void 0),G(this,"onUploadPublishDuration",void 0),G(this,"onStatsChanged",void 0),G(this,"localStats",new Map),G(this,"remoteStats",new Map),G(this,"updateStatsInterval",void 0),G(this,"trafficStats",void 0),G(this,"trafficStatsPeerList",[]),G(this,"uplinkStats",void 0),G(this,"exceptionMonitor",void 0),G(this,"p2pChannel",void 0),G(this,"scalabilityMode",V_.L1T1),G(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=n,this.exceptionMonitor=new rpe,this.exceptionMonitor.on("exception",(i,a,l)=>{this.onStatsException&&this.onStatsException(i,a,l)})}startUpdateStats(){this.updateStatsInterval||(this.updateStatsInterval=window.setInterval(this.updateStats,1e3))}stopUpdateStats(){this.updateStatsInterval&&(window.clearInterval(this.updateStatsInterval),this.updateStatsInterval=void 0)}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(Le.LocalAudioTrack)||ah({},oI)}getLocalVideoTrackStats(){return this.localStats.get(Le.LocalVideoTrack)||ah({},aI)}getRemoteAudioTrackStats(n){const i=(u,h)=>{if(!this.trafficStats)return h;const p=this.trafficStats.peer_delay.find(m=>m.peer_uid===u);return p&&(h.publishDuration=p.B_ppad+(Date.now()-this.trafficStats.timestamp)),h},a={};if(n){var l;const u=(l=this.remoteStats.get(n))===null||l===void 0?void 0:l.audioStats;u&&(a[n]=i(n,u))}else Array.from(this.remoteStats.entries()).forEach(u=>{let[h,{audioStats:p}]=u;p&&(a[h]=i(h,p))});return a}getRemoteNetworkQualityStats(n){const i={};if(n){var a;const l=(a=this.remoteStats.get(n))===null||a===void 0?void 0:a.networkStats;l&&(i[n]=l)}else Array.from(this.remoteStats.entries()).forEach(l=>{let[u,{networkStats:h}]=l;h&&(i[u]=h)});return i}getRemoteVideoTrackStats(n){const i=(u,h)=>{if(!this.trafficStats)return h;const p=this.trafficStats.peer_delay.find(m=>m.peer_uid===u);return p&&(h.publishDuration=p.B_ppvd+(Date.now()-this.trafficStats.timestamp)),h},a={};if(n){var l;const u=(l=this.remoteStats.get(n))===null||l===void 0?void 0:l.videoStats;u&&(a[n]=i(n,u))}else Array.from(this.remoteStats.entries()).forEach(u=>{let[h,{videoStats:p}]=u;p&&(a[h]=i(h,p))});return a}getRTCStats(){let n=0,i=0,a=0,l=0;const u=this.localStats.get(Le.LocalAudioTrack);u&&(n+=u.sendBytes,i+=u.sendBitrate);const h=this.localStats.get(Le.LocalVideoTrack);h&&(n+=h.sendBytes,i+=h.sendBitrate);const p=this.localStats.get(Le.LocalVideoLowTrack);p&&(n+=p.sendBytes,i+=p.sendBitrate),this.remoteStats.forEach(E=>{let{audioStats:y,videoStats:R}=E;y&&(a+=y.receiveBytes,l+=y.receiveBitrate),R&&(a+=R.receiveBytes,l+=R.receiveBitrate)});let m=1;return this.trafficStats&&(m+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:m,SendBitrate:i,SendBytes:n,RecvBytes:a,RecvBitrate:l,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(n){this.localStats.set(n,void 0)}removeLocalStats(n){n?this.localStats.delete(n):this.localStats.clear()}addRemoteStats(n){this.remoteStats.set(n,{})}removeRemoteStats(n){n?this.remoteStats.delete(n):this.remoteStats.clear()}addP2PChannel(n){this.p2pChannel=n}updateTrafficStats(n){n.peer_delay=n.peer_delay.filter(i=>i.B_ppad!==void 0||i.B_ppvd!==void 0),n.peer_delay.filter(i=>this.trafficStatsPeerList.indexOf(i.peer_uid)===-1).forEach(i=>{var a;const l=(a=this.p2pChannel)===null||a===void 0?void 0:a.getRemoteMedia(i.peer_uid),u=l!=null&&l.videoSSRC?eo.measureFromSubscribeStart(this.store.clientId,l.videoSSRC):0,h=l!=null&&l.audioSSRC?eo.measureFromSubscribeStart(this.store.clientId,l.audioSSRC):0;i.B_ppad!==void 0&&i.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(i.peer_uid,i.B_ppad,i.B_ppvd,u>h?u:h),this.trafficStatsPeerList.push(i.peer_uid))}),this.trafficStats=n}updateUplinkStats(n){this.uplinkStats&&this.uplinkStats.B_fir!==n.B_fir&&k.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(n.B_fir)),this.uplinkStats=n}static isRemoteVideoFreeze(n,i,a){if(!n)return!1;const l=!!a&&i.framesDecodeFreezeTime>a.framesDecodeFreezeTime,u=!a||i.framesDecodeCount>a.framesDecodeCount;return l||!u}static isRemoteAudioFreeze(n){return!!n&&n._isFreeze()}isLocalVideoFreeze(n){return!(!n.inputFrame||!n.sentFrame)&&n.inputFrame.frameRate>5&&n.sentFrame.frameRate<3}updateLocalStats(n){Array.from(this.localStats.entries()).forEach(i=>{let[a,l]=i;switch(a){case Le.LocalVideoTrack:case Le.LocalVideoLowTrack:{const h=l,p=ah({},aI),m=n.getStats(),E=n.getLocalMedia(a);if(m){const y=m.videoSend.find(R=>R.ssrc===(E==null?void 0:E.ssrcs[0].ssrcId));if(y){const R=n.getLocalVideoSize(),A=n.getEncoderConfig(Le.LocalVideoTrack);y.codec!=="H264"&&y.codec!=="H265"&&y.codec!=="VP8"&&y.codec!=="VP9"&&y.codec!=="AV1X"&&y.codec!=="AV1"||(p.codecType=y.codec),p.sendBytes=y.bytes,p.sendBitrate=h?8*Math.max(0,p.sendBytes-h.sendBytes):0,y.inputFrame?(p.captureFrameRate=y.inputFrame.frameRate,p.captureResolutionHeight=y.inputFrame.height,p.captureResolutionWidth=y.inputFrame.width):R&&(p.captureResolutionWidth=R.width,p.captureResolutionHeight=R.height),y.sentFrame?(p.sendFrameRate=y.sentFrame.frameRate,p.sendResolutionHeight=y.sentFrame.height,p.sendResolutionWidth=y.sentFrame.width):R&&(p.sendResolutionWidth=R.width,p.sendResolutionHeight=R.height),y.avgEncodeMs&&(p.encodeDelay=y.avgEncodeMs),A&&A.bitrateMax&&(p.targetSendBitrate=1e3*A.bitrateMax),p.sendPackets=y.packets,p.sendPacketsLost=y.packetsLost,p.sendJitterMs=y.jitterMs,p.sendRttMs=y.rttMs,p.totalDuration=h?h.totalDuration+1:1,p.totalFreezeTime=h?h.totalFreezeTime:0,this.isLocalVideoFreeze(y)&&(p.totalFreezeTime+=1),y.scalabilityMode&&this.scalabilityMode!==y.scalabilityMode&&(k.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(y.scalabilityMode)),this.scalabilityMode=y.scalabilityMode)}this.trafficStats&&(p.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var u;this.localStats.set(a,p),((h==null?void 0:h.sendResolutionWidth)!==p.sendResolutionWidth||(h==null?void 0:h.sendResolutionHeight)!==p.sendResolutionHeight)&&((u=this.onStatsChanged)===null||u===void 0||u.call(this,"resolution",{width:p.sendResolutionWidth,height:p.sendResolutionHeight})),p&&E&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,E.track,p);break}case Le.LocalAudioTrack:{const h=l,p=ah({},oI),m=n.getStats(),E=n.getLocalMedia(a);if(m){const y=m.audioSend.find(R=>R.ssrc===(E==null?void 0:E.ssrcs[0].ssrcId));if(y){if(y.codec!=="opus"&&y.codec!=="aac"&&y.codec!=="PCMU"&&y.codec!=="PCMA"&&y.codec!=="G722"||(p.codecType=y.codec),y.inputLevel)p.sendVolumeLevel=Math.round(32767*y.inputLevel);else{const R=n.getLocalAudioVolume();R&&(p.sendVolumeLevel=Math.round(32767*R))}p.sendBytes=y.bytes,p.sendPackets=y.packets,p.sendPacketsLost=y.packetsLost,p.sendJitterMs=y.jitterMs,p.sendRttMs=y.rttMs,p.sendBitrate=h?8*Math.max(0,p.sendBytes-h.sendBytes):0}}this.trafficStats&&(p.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(Le.LocalAudioTrack,p),p&&E&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,E.track,p);break}}})}updateRemoteStats(n){Array.from(this.remoteStats.entries()).forEach(i=>{var a,l;let[u,{videoStats:h,audioStats:p,videoPcStats:m}]=i;const E=p,y=h,R=m,A=ah({},W3),D=ah({},G3),H=ah({},jhe),{audioTrack:B,videoTrack:$,audioSSRC:K,videoSSRC:Y}=n.getRemoteMedia(u);let ce;ce=this.store.useP2P?n.getStats(!0):n.getStats();const ge=(a=ce)===null||a===void 0?void 0:a.audioRecv.find(Me=>Me.ssrc===K),Ee=(l=ce)===null||l===void 0?void 0:l.videoRecv.find(Me=>Me.ssrc===Y),me=this.trafficStats&&this.trafficStats.peer_delay.find(Me=>Me.peer_uid===u);if(ge&&(ge.codec!=="opus"&&ge.codec!=="aac"&&ge.codec!=="PCMU"&&ge.codec!=="PCMA"&&ge.codec!=="G722"||(A.codecType=ge.codec),ge.outputLevel?A.receiveLevel=Math.round(32767*ge.outputLevel):B&&(A.receiveLevel=Math.round(32767*B.getVolumeLevel())),A.receiveBytes=ge.bytes,A.receivePackets=ge.packets,A.receivePacketsLost=ge.packetsLost,A.receivePacketsDiscarded=ge.packetsDiscarded,A.packetLossRate=A.receivePacketsLost/(A.receivePackets+A.receivePacketsLost),A.receiveBitrate=E?8*Math.max(0,A.receiveBytes-E.receiveBytes):0,A.totalDuration=E?E.totalDuration+1:1,A.totalFreezeTime=E?E.totalFreezeTime:0,A.freezeRate=A.totalFreezeTime/A.totalDuration,A.receiveDelay=ge.jitterBufferMs,A.totalDuration>10&&V0.isRemoteAudioFreeze(B)&&(A.totalFreezeTime+=1)),Ee){var Te;Ee.codec!=="H264"&&Ee.codec!=="H265"&&Ee.codec!=="VP8"&&Ee.codec!=="VP9"&&Ee.codec!=="AV1X"&&Ee.codec!=="AV1"||(D.codecType=Ee.codec),D.receiveBytes=Ee.bytes,D.receiveBitrate=y?8*Math.max(0,D.receiveBytes-y.receiveBytes):0,D.decodeFrameRate=Ee.decodeFrameRate<0?0:Ee.decodeFrameRate,D.renderFrameRate=Ee.decodeFrameRate<0?0:Ee.decodeFrameRate,Ee.outputFrame&&(D.renderFrameRate=Ee.outputFrame.frameRate),Ee.receivedFrame?(D.receiveFrameRate=Ee.receivedFrame.frameRate,D.receiveResolutionHeight=Ee.receivedFrame.height,D.receiveResolutionWidth=Ee.receivedFrame.width):$&&(D.receiveResolutionHeight=$._videoHeight||0,D.receiveResolutionWidth=$._videoWidth||0),Ee.framesRateFirefox!==void 0&&(D.receiveFrameRate=Math.round(Ee.framesRateFirefox)),D.receivePackets=Ee.packets,D.receivePacketsLost=Ee.packetsLost,D.packetLossRate=D.receivePacketsLost/(D.receivePackets+D.receivePacketsLost);const Me=y?y.totalFreezeTime:0,Xe=y?y.totalDuration:0;D.totalDuration=y?y.totalDuration+1:1,D.totalFreezeTime=(Te=Ee.totalFreezesDuration)!==null&&Te!==void 0?Te:Me||0,D.receiveDelay=Ee.jitterBufferMs||0;const nt=!!Y&&n.getRemoteVideoIsReady(Y);Ee.totalFreezesDuration===void 0&&$&&nt&&V0.isRemoteVideoFreeze($,Ee,R)&&(D.totalFreezeTime+=1),D.freezeRate=Math.max(0,Math.min((D.totalFreezeTime-Me)/(D.totalDuration-Xe),1))}me&&(A.end2EndDelay=me.B_ad,D.end2EndDelay=me.B_vd,A.transportDelay=me.B_ed,D.transportDelay=me.B_ed,A.currentPacketLossRate=me.B_ealr4/100,D.currentPacketLossRate=me.B_evlr4/100,H.uplinkNetworkQuality=me.B_punq?me.B_punq:0,H.downlinkNetworkQuality=me.B_pdnq?me.B_pdnq:0),this.remoteStats.set(u,{audioStats:A,videoStats:D,videoPcStats:Ee,networkStats:H}),B&&this.exceptionMonitor.setRemoteAudioStats(B,A),$&&this.exceptionMonitor.setRemoteVideoStats($,D)})}}class J6{constructor(){G(this,"destChannelMediaInfos",new Map),G(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(n){r6(n),this.srcChannelMediaInfo=n}addDestChannelInfo(n){r6(n),this.destChannelMediaInfos.set(n.channelName,n)}removeDestChannelInfo(n){aS(n),this.destChannelMediaInfos.delete(n)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function Q6(t){if(!(t instanceof J6))return new ye(X.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const n=t.getSrcChannelMediaInfo(),i=t.getDestChannelMediaInfo();if(!n)return new ye(X.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if(i.size===0)return new ye(X.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}class zu{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(n,i){G(this,"uid",void 0),G(this,"_uintid",void 0),G(this,"_trust_in_room_",!0),G(this,"_trust_audio_enabled_state_",!0),G(this,"_trust_video_enabled_state_",!0),G(this,"_trust_audio_mute_state_",!0),G(this,"_trust_video_mute_state_",!0),G(this,"_audio_muted_",!1),G(this,"_video_muted_",!1),G(this,"_audio_enabled_",!0),G(this,"_video_enabled_",!0),G(this,"_audio_added_",!1),G(this,"_video_added_",!1),G(this,"_is_pre_created",!1),G(this,"_video_pre_subscribed",!1),G(this,"_audio_pre_subscribed",!1),G(this,"_trust_video_stream_added_state_",!0),G(this,"_trust_audio_stream_added_state_",!0),G(this,"_audioTrack",void 0),G(this,"_videoTrack",void 0),G(this,"_dataChannels",[]),G(this,"_audioSSRC",void 0),G(this,"_videoSSRC",void 0),G(this,"_audioOrtc",void 0),G(this,"_videoOrtc",void 0),G(this,"_cname",void 0),G(this,"_rtxSsrcId",void 0),G(this,"_videoMid",void 0),G(this,"_audioMid",void 0),this.uid=n,this._uintid=i}}function Z6(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function e8(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?Z6(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Z6(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}const j0="9",t8=4e4;function n8(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function Ql(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?n8(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n8(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}var fp=function(t){return t[t.DOWN=0]="DOWN",t[t.UP=1]="UP",t}(fp||{});const SS=new Map;function r8(t,n,i,a){let{scale:l}=t;if(l===0&&a===fp.UP||l>=n.length-1&&a===fp.DOWN)return t;let u=Ql(Ql({},t),{},{scale:a===fp.DOWN?++l:--l});switch(i){case"maintain-framerate":u=Ql(Ql({},u),n[l].motion);break;case"maintain-resolution":u=Ql(Ql({},u),n[l].detail);break;case"balanced":u=Ql(Ql({},u),n[l].balanced)}return u}function i8(t,n){if(n){const i={overUse:0,underUse:0,adaptationList:o8(n)};SS.set(t,i)}else SS.delete(t)}function o8(t){const n=Ql({},t),{bitrateMax:i,frameRate:a,scaleResolutionDownBy:l,bitrateMin:u}=n,{MIN_FRAME_RATE:h,MAX_THRESHOLD_FRAMERATE:p,MAX_SCALE:m,BITRATE_MIN_THRESHOLD:E,BITRATE_MAX_THRESHOLD:y,BWE_SCALE_UP_THRESHOLD:R,BWE_SCALE_DOWN_THRESHOLD:A,PERF_SCALE_DOWN_THRESHOLD:D,PERF_SCALE_UP_THRESHOLD:H,BALANCE_BITRATE_FACTOR:B,BALANCE_FRAMERATE_FACTOR:$,BALANCE_RESOLUTION_FACTOR:K,MOTION_RESOLUTION_FACTOR:Y,MOTION_BITRATE_FACTOR:ce,DETAIL_FRAMERATE_FACTOR:ge,DETAIL_BITRATE_FACTOR:Ee}=Qw,me=Math.min(n.frameRate,p),Te=[{scale:0,threshold:{bwe_down:Math.round(Math.pow(A,1)*i),bwe_up:i,fps_down:Math.round(Math.pow(D,1)*me),fps_up:a},balanced:{scaleResolutionDownBy:1,frameRate:a,bitrateMax:i,bitrateMin:u},motion:{scaleResolutionDownBy:1,frameRate:a,bitrateMax:i,bitrateMin:u},detail:{scaleResolutionDownBy:1,frameRate:a,bitrateMax:i,bitrateMin:u}}];for(let Me=1;Me<=m;Me++){const Xe={bwe_up:Math.round(Math.pow(R,Me)*i),bwe_down:Math.round(Math.pow(A,Me+1)*i),fps_up:Math.round(Math.pow(H,Me)*me),fps_down:Math.round(Math.pow(D,Me+1)*me)},nt={scaleResolutionDownBy:l/Math.pow(K,Me),frameRate:Math.max(Math.round(Math.pow($,Me)*a),h),bitrateMax:Math.max(Math.round(Math.pow(B,Me)*i),y),bitrateMin:Math.max(Math.round(Math.pow(B,Me)*u),E)},dn={scaleResolutionDownBy:l/Math.pow(Y,Me),frameRate:a,bitrateMax:Math.max(Math.round(Math.pow(ce,Me)*i),y),bitrateMin:Math.max(Math.round(Math.pow(ce,Me)*u),E)},hn={scaleResolutionDownBy:1,frameRate:Math.max(Math.round(Math.pow(ge,Me)*a),h),bitrateMax:Math.max(Math.round(Math.pow(Ee,Me)*i),y),bitrateMin:Math.max(Math.round(Math.pow(Ee,Me)*u),E)};Te.push({scale:Me,threshold:Xe,balanced:nt,motion:dn,detail:hn})}return Te}function ipe(t,n,i,a,l,u){const h=SS.get(t)||{overUse:0,underUse:0,adaptationList:o8(l)},{adaptationList:p}=h;SS.set(t,h);const{OVERUSE_TIMES_THRESHOLD:m,UNDERUSE_TIMES_THRESHOLD:E}=Qw,{scale:y}=a;let R,A;return typeof n=="number"&&n>0&&function(D,H,B,$){if(H>=B.length)return!1;let{threshold:{fps_down:K}}=B[H];return Q("FORCE_AG_HIGH_FRAMERATE")&&$==="maintain-framerate"&&(K=B[0].threshold.fps_down),D<K}(n,y,p,u)&&(h.overUse++,A=R0.CPU,h.overUse>m)||typeof i=="number"&&i>0&&function(D,H,B){if(H>=B.length)return!1;const{threshold:{bwe_down:$}}=B[H];return D<$}(i,y,p)&&(h.overUse++,A=R0.BANDWIDTH,h.overUse>m)?(h.overUse=0,h.underUse=0,R=r8(a,p,u,fp.DOWN),[R,A]):(typeof n=="number"&&n>0&&typeof i=="number"&&i>0&&function(D,H,B,$){if(H===0)return;let{threshold:{fps_up:K}}=B[H];return Q("FORCE_AG_HIGH_FRAMERATE")&&$==="maintain-framerate"&&(K=B[1].threshold.fps_up),D>K}(n,y,p,u)&&function(D,H,B){if(H===0)return;const{threshold:{bwe_up:$}}=B[H];return D>$}(i,y,p)&&(h.underUse++,h.underUse>E&&(h.overUse=0,h.underUse=0,R=r8(a,p,u,fp.UP),R.scale===0&&(A=R0.NONE))),[R,A])}function a8(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function qI(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?a8(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a8(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function ope(t){var n;return!!Q("ENABLE_AG_ADAPTATION")&&!!(t instanceof mI||Ke(n=t._hints).call(n,Jn.CUSTOM_TRACK))&&(!!Q("FORCE_SUPPORT_AG_ADAPTATION")||!!(function(i){const a=En();if(a.os!==Ei.IOS||!a.osVersion)return!1;const l=a.osVersion.split(".");return Number(l[0])>=i}(14)&&n3(17,4,!0)||t3(14)&&r3(17,4,!0)))}const yS=new Map;function CS(t,n){const i=yS.get(t);if(i){const{timer:a}=i;window.clearTimeout(a),yS.delete(t)}n.qualityLimitationReason=R0.NONE,i8(t)}function ape(t,n){var i;let a;switch(n){case Le.LocalAudioTrack:a=Mn.Audio;break;case Le.LocalVideoTrack:a=Ke(i=t._hints).call(i,Jn.SCREEN_TRACK)?Mn.Screen:Mn.High;break;case Le.LocalVideoLowTrack:a=Mn.Low}return a}function YI(t){const n=yn();if(t.some(i=>i._bypassWebAudio))throw new we(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");if(!n.webAudioMediaStreamDest)throw new we(X.NOT_SUPPORTED,"cannot publish multiple tracks because your browser does not support audio mixing")}function XI(t,n){YI(t);const i=n||new di;return t.forEach(a=>i.addAudioTrack(a)),i}const spe=!yn().supportUnifiedPlan||Q("CHROME_FORCE_PLAN_B")&&Hl();function bS(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;return spe?(i={spec:n,store:t},Xl("PlanBConnection").create(i)):new fl(n,t)}function JI(t){return t&&(t.iceConnectionState==="disconnected"||t.iceConnectionState==="checking"||t.iceConnectionState==="failed")}function s8(t){try{if(t.iceServers)return!1;if(t.turnServer&&t.turnServer.mode!=="off"){if(C0(t.turnServer.servers))return!1;if(Q("FORCE_TURN_TCP")||t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).some(n=>n.forceturn))return!0}return!1}catch{return!1}}var mn;function c8(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function Ic(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?c8(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c8(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}let fl=(mn=class Th extends s6{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var n,i;return(n=(i=this.peerConnection.getReceivers()[0])===null||i===void 0||(i=i.transport)===null||i===void 0?void 0:i.state)!==null&&n!==void 0?n:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map(n=>n.rtpMap&&n.rtpMap.encodingName.toLowerCase()||"").filter(n=>{var i;return Ke(i=Object.keys($_)).call(i,n)}))]}constructor(n,i){super(n,i),G(this,"id",Xn(5,"connection-")),G(this,"store",void 0),G(this,"peerConnection",void 0),G(this,"forceTurn",!1),G(this,"remoteSDP",void 0),G(this,"initialOffer",void 0),G(this,"transportEventReceiver",void 0),G(this,"statsFilter",void 0),G(this,"extension",{useXR:Q("USE_XR")}),G(this,"localCapabilities",void 0),G(this,"remoteCodecs",void 0),G(this,"localCandidateCount",0),G(this,"allCandidatesReceived",!1),G(this,"isPreallocation",!1),G(this,"preSSRCMap",new Map),G(this,"dataStreamChannelMap",new Map),G(this,"establishPromise",void 0),G(this,"recoveredDataChannelIds",[]),G(this,"currentDataChannelId",1),G(this,"supportAV1RtpSpec",!1),G(this,"mutex",void 0),G(this,"qualityLimitationReason",R0.NONE),G(this,"isFirstConnected",!1),this.store=i,this.forceTurn=s8(n),this.mutex=new Ji("P2PConnection-mutex",i.clientId),this.peerConnection=new RTCPeerConnection(Th.resolvePCConfiguration(n),{optional:[{googDscp:!0}]}),this.isFirstConnected=!1,this.statsFilter=Yw(this.peerConnection,Q("STATS_UPDATE_INTERVAL"),void 0,Tr()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}getPreMedia(n){const i=this.preSSRCMap.get(n);if(i!==void 0){const a=this.peerConnection.getTransceivers().find(l=>l.mid===i);if(a)return{transceiver:a,track:a.receiver.track,id:i}}}async updateRemoteRTPCapabilities(n,i){if(this.remoteCodecs=i,!this.remoteSDP)return void k.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(i));if(this.remoteSDP.updateRemoteCodec(n,i,this.store.codec)){const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(a);const u=this.remoteSDP.toString();l==null||l(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}else k.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.")}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const a=await this.peerConnection.createOffer();if(!a.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const l=$u(a.sdp),u=await I6({filterRTX:!Q("USE_PUB_RTX")&&!Q("USE_SUB_RTX"),filterVideoFec:Q("FILTER_VIDEO_FEC"),filterAudioFec:Q("FILTER_AUDIO_FEC"),filterVideoCodec:Q("FILTER_VIDEO_CODEC")},this.extension);if(this.localCapabilities=mS(u),this.initialOffer=a,Q("ENABLE_SVC")&&this.store.codec=="av1"){const p=await async function(){try{const m=new RTCPeerConnection;m.addTransceiver("video",{direction:"sendonly",sendEncodings:[{scalabilityMode:V_.L1T3}]});const E=await m.createOffer();if(!E.sdp)return void m.close();const y=sa(E.sdp).mediaDescriptions[0];if(!y)return;const R=y.attributes.extmaps.find(A=>A.extensionName==="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension");return m.close(),R}catch{return}}();var n;p&&(this.supportAV1RtpSpec=!0,(n=u.send)===null||n===void 0||n.videoExtensions.push(p))}let h;return a.sdp&&N6(a.sdp)&&(h=Ir(u),(i=h).send&&(cp(it.VIDEO,i.send.videoExtensions),cp(it.AUDIO,i.send.audioExtensions)),i.recv&&(cp(it.VIDEO,i.recv.videoExtensions),cp(it.AUDIO,i.recv.audioExtensions)),i.sendrecv&&(cp(it.VIDEO,i.sendrecv.videoExtensions),cp(it.AUDIO,i.sendrecv.audioExtensions))),Ic(Ic({},l),{},{rtpCapabilities:h||u,offerSDP:a.sdp})}catch(a){throw new we(X.GET_LOCAL_CONNECTION_PARAMS_FAILED,a.toString())}var i}async connect(n){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.initialOffer.sdp&&N6(this.initialOffer.sdp)&&(i=n.rtpCapabilities,a=this.localCapabilities,i.send&&(hS(it.VIDEO,i.send.videoExtensions,a.send.videoExtensions),hS(it.AUDIO,i.send.audioExtensions,a.send.audioExtensions)),i.recv&&(hS(it.VIDEO,i.recv.videoExtensions,a.recv.videoExtensions),hS(it.AUDIO,i.recv.audioExtensions,a.recv.audioExtensions))),this.remoteSDP=new class{get localCapabilities(){return Ir(this._localCapabilities)}get rtpCapabilities(){return Ir(this._rtpCapabilities)}get candidates(){return Ir(this._candidates)}get iceParameters(){return Ir(this._iceParameters)}get dtlsParameters(){return Ir(this._dtlsParameters)}constructor(E){let y=arguments.length>1&&arguments[1]!==void 0&&arguments[1];G(this,"sessionDesc",void 0),G(this,"_localCapabilities",void 0),G(this,"_rtpCapabilities",void 0),G(this,"_candidates",void 0),G(this,"_originCandidates",void 0),G(this,"_iceParameters",void 0),G(this,"_isUseExtmapAllowMixed",void 0),G(this,"_dtlsParameters",void 0),G(this,"setup",void 0),G(this,"currentMidIndex",void 0),G(this,"cname",void 0),G(this,"firefoxSsrcMidMap",new Map),this._isUseExtmapAllowMixed=y,E=Ir(E);const{iceParameters:R,dtlsParameters:A,candidates:D,rtpCapabilities:H,setup:B,localCapabilities:$,cname:K}=E;this._rtpCapabilities=H,this._candidates=D,this._originCandidates=Ir(D),this._iceParameters=R,this._dtlsParameters=A,this._localCapabilities=$,this.setup=B,this.cname=K,this.sessionDesc=this.updateRemoteRTPCapabilities(H),this.currentMidIndex=this.sessionDesc.mediaDescriptions.length-1}preloadRemoteMedia(E){const y=this.candidates,R=this.dtlsParameters,A=this.iceParameters,D=this.rtpCapabilities.send;let H=this.sessionDesc.mediaDescriptions.length-1;for(let B=1;B<E;B++){const $=2*B+2e4,K=2*B+t8,{ssrcs:Y,ssrcGroups:ce}=oh([{ssrcId:$}],this.cname),{ssrcs:ge,ssrcGroups:Ee}=oh([{ssrcId:K,rtx:Q("USE_SUB_RTX")?K+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:j0,protos:["UDP","TLS","RTP","SAVPF"],fmts:D.videoCodecs.map(me=>me.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:A.iceUfrag,icePwd:A.icePwd,unrecognized:[],candidates:y,extmaps:D.videoExtensions,fingerprints:R.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:ge,ssrcGroups:Ee,rtcpFeedbackWildcards:[],payloads:D.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++H)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:j0,protos:["UDP","TLS","RTP","SAVPF"],fmts:D.audioCodecs.map(me=>me.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:A.iceUfrag,icePwd:A.icePwd,unrecognized:[],candidates:y,extmaps:D.audioExtensions,fingerprints:R.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:Y,ssrcGroups:ce,rtcpFeedbackWildcards:[],payloads:D.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++H)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return Fu(this.sessionDesc)}send(E,y,R,A){const{ssrcs:D,ssrcGroups:H}=oh(y,this.cname,Q("SYNC_GROUP")?R:void 0),B=this.findPreloadMediaDesc(D);if(B){if(Tr()&&this.firefoxSsrcMidMap.set(D[0].ssrcId,B.attributes.mid),A&&(A.twcc||A.remb)){const $=this.sessionDesc.mediaDescriptions.indexOf(B);return this.sessionDesc.mediaDescriptions[$]=this.mungSendMediaDesc(B,A),{mid:B.attributes.mid,needExchangeSDP:!0}}return{mid:B.attributes.mid,needExchangeSDP:!1}}{const $=this.findAvailableMediaIndex(E,D);let K;return $===-1||$===1&&(Hi()||function(){const Y=En();return!(Y.name!==On.CHROME||!Y.osVersion)&&Number(Y.version)<=90}()||Q("ENABLE_ENCODED_TRANSFORM")&&$l())||$===0&&Q("USE_SUB_RTX")||i3()?(K=this.createOrRecycleSendMedia(E,D,H,"sendonly",A),this.updateBundleMids()):(K=Ir(this.sessionDesc.mediaDescriptions[$]),K.attributes.direction="sendonly",K.attributes.ssrcs=D,K.attributes.ssrcGroups=H,this.sessionDesc.mediaDescriptions[$]=this.mungSendMediaDesc(K,A)),Tr()&&this.firefoxSsrcMidMap.set(D[0].ssrcId,K.attributes.mid),{mid:K.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){const{mediaDesc:E,needExchangeSDP:y}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:E.attributes.mid,needExchangeSDP:y}}batchSend(E){const y=E.map(D=>{let{kind:H,ssrcMsg:B,mslabel:$}=D;return this.send(H,B,$)}),R=[];let A=!1;return y.forEach(D=>{let{mid:H,needExchangeSDP:B}=D;B&&(A=!0),R.push(H)}),{mids:R,needExchangeSDP:A}}stopSending(E){const y=this.sessionDesc.mediaDescriptions.filter(R=>R.attributes.mid&&E.indexOf(R.attributes.mid)!==-1);if(y.length!==E.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");y.forEach(R=>{R.attributes.mid==="0"||Tr()||i3()?R.attributes.ssrcs=[]:(R.attributes.ssrcs=[],R.attributes.direction="inactive",R.media.port="0")}),this.updateBundleMids()}mute(E){const y=this.sessionDesc.mediaDescriptions.find(R=>R.attributes.mid===E);if(!y)throw new Error("mediaDescription not found with ".concat(E," in remote SDP when calling RemoteSDP.mute."));y.attributes.direction="inactive"}unmute(E){const y=this.sessionDesc.mediaDescriptions.find(R=>R.attributes.mid===E);if(!y)throw new Error("mediaDescription not found with ".concat(E," in remote SDP when calling RemoteSDP.unmute."));y.attributes.direction="sendonly"}muteRemote(E){const y=this.sessionDesc.mediaDescriptions.filter(R=>Ke(E).call(E,R.attributes.mid||""));if(y.length!==E.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");y.forEach(R=>{R.attributes.direction="inactive"})}unmuteRemote(E){const y=this.sessionDesc.mediaDescriptions.filter(R=>Ke(E).call(E,R.attributes.mid||""));if(y.length!==E.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");y.forEach(R=>{R.attributes.direction="recvonly"})}receive(E,y,R,A){E.forEach((D,H)=>{this.createOrRecycleRecvMedia(D,[],"recvonly",y,R,A[H])}),this.updateBundleMids()}stopReceiving(E){const y=this.sessionDesc.mediaDescriptions.filter(R=>E.indexOf(R.attributes.mid)!==-1);if(y.length!==E.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");y.forEach(R=>{R.media.port="0",R.attributes.direction="inactive"}),this.updateBundleMids()}updateRemoteRTPCapabilities(E){const y=this.sessionDesc||sa((R=this._isUseExtmapAllowMixed,`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite`.concat(R?`
a=extmap-allow-mixed`:"",`
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`)));var R;this._rtpCapabilities=E;const A=this.rtpCapabilities.send,D=this.localCapabilities.send;for(const H of y.mediaDescriptions){if(H.attributes.iceUfrag=this._iceParameters.iceUfrag,H.attributes.icePwd=this._iceParameters.icePwd,H.attributes.fingerprints=this._dtlsParameters.fingerprints,H.attributes.candidates=this._candidates,H.attributes.setup=this.setup,H.media.mediaType==="application"&&(H.attributes.sctpPort="5000"),H.media.mediaType==="video"){if(A.videoCodecs.length===0){const B=D.videoCodecs.filter($=>{var K,Y;return(K=$.rtpMap)===null||K===void 0?void 0:Ke(Y=K.encodingName.toLowerCase()).call(Y,"vp8")})||[D.videoCodecs[0]];H.media.fmts=B.map($=>$.payloadType.toString(10)),H.attributes.payloads=B,H.attributes.extmaps=[]}else if(H.media.fmts=A.videoCodecs.map(B=>B.payloadType.toString(10)),H.attributes.payloads=A.videoCodecs,H.attributes.extmaps=A.videoExtensions,Q("PRELOAD_MEDIA_COUNT")>0){const{ssrcs:B,ssrcGroups:$}=oh([{ssrcId:t8,rtx:Q("USE_SUB_RTX")?40001:void 0}],this.cname);H.attributes.ssrcs=B,H.attributes.ssrcGroups=$}}if(H.media.mediaType==="audio"){if(A.audioCodecs.length===0){const B=D.audioCodecs.filter($=>{var K,Y;return(K=$.rtpMap)===null||K===void 0?void 0:Ke(Y=K.encodingName.toLowerCase()).call(Y,"opus")})||[D.audioCodecs[0]];H.media.fmts=B.map($=>$.payloadType.toString(10)),H.attributes.payloads=B,H.attributes.extmaps=[]}else if(H.media.fmts=A.audioCodecs.map(B=>B.payloadType.toString(10)),H.attributes.payloads=A.audioCodecs,H.attributes.extmaps=A.audioExtensions,up(H),Q("PRELOAD_MEDIA_COUNT")>0){const{ssrcs:B,ssrcGroups:$}=oh([{ssrcId:2e4}],this.cname);H.attributes.ssrcs=B,H.attributes.ssrcGroups=$}}}return this.sessionDesc=y,this.currentMidIndex=y.mediaDescriptions.length-1,this.sessionDesc}updateCandidates(E){const y=this._originCandidates.filter(A=>A.transport==="udp"),R=[];if(y.forEach(A=>{R.push(e8(e8({},A),{},{foundation:"tcpcandidate",priority:Number(A.priority)-1+"",transport:"tcp",port:Number(A.port)+90+""}))}),y.length!==0){switch(E){case Zi.TCP_RELAY:this._candidates=R;break;case Zi.UDP_TCP_RELAY:case Zi.RELAY:this._candidates=[...y,...R];break;default:this._candidates=y}for(const A of this.sessionDesc.mediaDescriptions)A.attributes.candidates=this.candidates}}restartICE(E){E=Ir(E),this._iceParameters=E,this.sessionDesc.mediaDescriptions.forEach(y=>{y.attributes.iceUfrag=E.iceUfrag,y.attributes.icePwd=E.icePwd})}predictReceivingMids(E){const y=[];for(let R=0;R<E;R++)y.push((this.currentMidIndex+R+1).toString(10));return y}findAvailableMediaIndex(E,y){return this.sessionDesc.mediaDescriptions.findIndex(R=>{const A=R.media.mediaType===E&&R.media.port!=="0"&&(R.attributes.direction==="sendonly"||R.attributes.direction==="sendrecv")&&R.attributes.ssrcs.length===0;if(Tr()){if(A){const D=this.firefoxSsrcMidMap.get(y[0].ssrcId);return!(D||R.attributes.mid!=="0"&&R.attributes.mid!=="1")||!(!D||D!==R.attributes.mid)}return!1}return A})}createOrRecycleDataChannel(){for(const R of this.sessionDesc.mediaDescriptions)if(R.media.mediaType==="application")return{mediaDesc:R,needExchangeSDP:!1};this.currentMidIndex+=1;const E="".concat(this.currentMidIndex),y={media:{mediaType:"application",port:j0,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(E),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(y),{mediaDesc:y,needExchangeSDP:!0}}createOrRecycleRecvMedia(E,y,R,A,D,H){const B=E._mediaStreamTrack.kind,$=this.rtpCapabilities.recv,K=M0(B,$,this.localCapabilities.send,B===it.VIDEO?A:D),Y=B===it.VIDEO?$.videoExtensions:$.audioExtensions;this.currentMidIndex+=1;const ce="".concat(this.currentMidIndex);let ge={media:{mediaType:B,port:j0,protos:["UDP","TLS","RTP","SAVPF"],fmts:K.map(me=>me.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:Y,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:y,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:K,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:R,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(ce)}};ge=this.mungRecvMediaDsec(ge,E,H);const Ee=this.findFirstClosedMedia(B);if(Ee){const me=this.sessionDesc.mediaDescriptions.indexOf(Ee);this.sessionDesc.mediaDescriptions[me]=ge}else this.sessionDesc.mediaDescriptions.push(ge);return ge}updateRemoteCodec(E,y,R){const A=[...new Set(this._rtpCapabilities.recv.videoCodecs.map(ge=>ge.rtpMap&&ge.rtpMap.encodingName.toLowerCase()||"").filter(ge=>{var Ee;return Ke(Ee=Object.keys($_)).call(Ee,ge)}))],D=new Set(y);if(A.every(ge=>D.has(ge)))return k.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(y)),!1;const H=this._rtpCapabilities.recv.videoCodecs.filter(ge=>y.some(Ee=>{var me;return Ke(me=ge.rtpMap&&ge.rtpMap.encodingName.toLowerCase()||"").call(me,Ee)}));if(H.length===0)return k.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(A," codecs: ").concat(y)),!1;const B=[...new Set(H.map(ge=>ge.rtpMap&&ge.rtpMap.encodingName.toLowerCase()||""))];let $;if(k.debug("updateRemoteCodec, from ".concat(A," to ").concat(B)),E.length===0)$=this.sessionDesc.mediaDescriptions.filter(ge=>ge.media.mediaType==="video"&&ge.attributes.direction==="recvonly");else if($=this.sessionDesc.mediaDescriptions.filter(ge=>ge.attributes.mid&&Ke(E).call(E,ge.attributes.mid)&&ge.attributes.direction==="recvonly"),$.length!==E.length)return k.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(E,", codecs: ").concat(y)),!1;if(Q("USE_PUB_RTX")||Q("USE_SUB_RTX")){const ge=FI(H,this.rtpCapabilities.recv.videoCodecs);H.push(...ge)}this._rtpCapabilities.recv.videoCodecs=H;const K=this.localCapabilities.send,Y=this.rtpCapabilities.recv,ce=M0(it.VIDEO,Y,K,R);return $.forEach(ge=>{const Ee=ce.map(me=>me.payloadType.toString(10));k.debug("updateRemoteCodec mid: ".concat(ge.attributes.mid,", from"),ge.attributes.payloads,"to",ce),ge.attributes.payloads=ce,ge.media.fmts=Ee}),!0}createOrRecycleSendMedia(E,y,R,A,D){const H=this.rtpCapabilities.send,B=E===it.VIDEO?H.videoCodecs:H.audioCodecs,$=E===it.VIDEO?H.videoExtensions:H.audioExtensions;this.currentMidIndex+=1;const K="".concat(this.currentMidIndex);let Y={media:{mediaType:E,port:j0,protos:["UDP","TLS","RTP","SAVPF"],fmts:B.map(ge=>ge.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:$,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:y,ssrcGroups:R,rtcpFeedbackWildcards:[],payloads:B,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:A,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(K)}};Y=this.mungSendMediaDesc(Y,D);const ce=this.findFirstClosedMedia(E);if(ce){const ge=this.sessionDesc.mediaDescriptions.indexOf(ce);this.sessionDesc.mediaDescriptions[ge]=Y}else this.sessionDesc.mediaDescriptions.push(Y);return Y}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(E=>E.media.port!=="0").map(E=>E.attributes.mid)}mungRecvMediaDsec(E,y,R){const A=Ir(E);return kI(A),lp(A,y),MI(A,y),R6(A),pS(A,R,this.localCapabilities.send),A}mungSendMediaDesc(E,y){const R=Ir(E);return pS(R,y,this.localCapabilities.recv),up(R),R}updateRecvMedia(E,y){const R=this.sessionDesc.mediaDescriptions.findIndex(A=>A.attributes.mid===E);if(R!==-1){const A=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[R],y);this.sessionDesc.mediaDescriptions[R]=A}}bumpMid(E){this.currentMidIndex+=E}findFirstClosedMedia(E){return this.sessionDesc.mediaDescriptions.find(y=>Tr()?y.media.port==="0"&&y.media.mediaType===E:y.media.port==="0")}findPreloadMediaDesc(E){return this.sessionDesc.mediaDescriptions.find(y=>{var R;return((R=y.attributes)===null||R===void 0||(R=R.ssrcs[0])===null||R===void 0?void 0:R.ssrcId)===E[0].ssrcId})}getSSRC(E){var y;return(y=this.sessionDesc.mediaDescriptions.find(R=>R.attributes.mid===E))===null||y===void 0?void 0:y.attributes.ssrcs}}(Ic(Ic({},n),{},{localCapabilities:this.localCapabilities}),this.supportAV1RtpSpec),n.preallocation&&(this.isPreallocation=!0),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const l=this.remoteSDP.toString(),u=O6(this.initialOffer.sdp,this.extension),h=this.logSDPExchange(u||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:u}),h==null||h(l),await this.peerConnection.setRemoteDescription({type:"answer",sdp:l});const p=this.peerConnection.getTransceivers()[0];if(p!=null&&p.receiver&&this.tryBindTransportEvents(p.receiver),Q("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia(Q("PRELOAD_MEDIA_COUNT"));const E=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:E});const y=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(y)}const{preSSRCs:m}=n;if(Array.isArray(m)&&m.length>0){const{mids:E}=this.remoteSDP.batchSend(m.map(y=>({kind:y.kind,ssrcMsg:[{ssrcId:y.ssrcId,rtx:y.rtx}],mslabel:y.mslabel})));E.forEach((y,R)=>{this.preSSRCMap.set(m[R].ssrcId,y)}),await F0(this.peerConnection,this.remoteSDP,this.extension),k.debug("[".concat(this.store.clientId,"] [P2PConnection] pre-batchReceive exchange SDP."))}}catch(l){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(l.toString()))}var i,a}async updateRemoteConnect(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateRemoteConnect before remote SDP created");const{rtpCapabilities:i}=n;this.remoteSDP.updateRemoteRTPCapabilities(i),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const{preSSRCs:a}=n;if(Array.isArray(a)&&a.length>0){const{mids:l}=this.remoteSDP.batchSend(a.map(u=>Object.assign({},{kind:u.kind,ssrcMsg:[{ssrcId:u.ssrcId,rtx:u.rtx}],mslabel:u.mslabel})));l.forEach((u,h)=>{this.preSSRCMap.set(a[h].ssrcId,u)})}await F0(this.peerConnection,this.remoteSDP,this.extension),k.debug("[P2PConnection] updateRemoteRTPCapabilities by exchanging SDP.")}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.updateRemoteConnect failed; ".concat(i.toString()))}}send(n,i,a){var l=this;return as(function*(){const u=yield vn(l.mutex.lock("From P2PConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const h=[],p=dS();n.forEach($=>{const K=l.peerConnection.addTransceiver($._mediaStreamTrack,Ic({direction:"sendonly"},$.trackMediaType==="video"&&l.supportAV1RtpSpec&&p?{sendEncodings:[{scalabilityMode:p}]}:{}));h.push(K),$._updateRtpTransceiver(K)}),Tr()&&Q("SIMULCAST")===!0&&(yield vn(l.applySimulcastForFirefox(h,n)));const m=yield vn(l.peerConnection.createOffer()),E=l.remoteSDP.predictReceivingMids(n.length),y=l.mungSendOfferSDP(m.sdp,n,E),R=sa(y),A=E.map($=>{const K=R.mediaDescriptions.find(Y=>Y.attributes.mid===$);if(!K)throw new Error("Cannot extract ssrc from mediaDescription.");return C6(K,Q("USE_PUB_RTX"))});let D;try{D=yield A}catch($){D=[],l.remoteSDP.receive(n,i,a,D);const K=l.remoteSDP.toString();throw yield vn(l.peerConnection.setLocalDescription({type:"offer",sdp:y})),yield vn(l.peerConnection.setRemoteDescription({type:"answer",sdp:K})),yield vn(l.stopSending(E,!0)),$}l.remoteSDP.receive(n,i,a,D);const H=l.remoteSDP.toString(),B=l.logSDPExchange(y,"offer","local","send");return yield vn(l.peerConnection.setLocalDescription({type:"offer",sdp:y})),yield vn(l.applySimulcastEncodings(h,n)),yield vn(l.applySendEncodings(h,n)),B==null||B(H),yield vn(l.peerConnection.setRemoteDescription({type:"answer",sdp:H})),h.map(($,K)=>{const Y=E[K];return{localSSRC:A[K],id:Y,transceiver:$}})}catch(h){throw h instanceof we?h:new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(h.toString()))}finally{u()}})()}async createDataChannels(n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let a=this.dataStreamChannelMap.get(n);if(a&&a.readyState==="open")k.debug("[P2PConnection] Channels are already available and can be reused directly.");else{const u=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if(typeof u!="number")throw new Error("create DataChannel error, because cannot get dc id");a=this.peerConnection.createDataChannel("datastream-channel",{id:u,negotiated:!0,ordered:!1,maxRetransmits:Q("DATASTREAM_MAX_RETRANSMITS")}),a.binaryType="arraybuffer",this.dataStreamChannelMap.set(n,a)}i.forEach(u=>{u._updateOriginDataChannel(a)});const{needExchangeSDP:l}=this.remoteSDP.sendDataChannel();if(l){const u=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:u});const h=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(h),k.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else k.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(a){throw a instanceof we?a:new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(a.toString()))}}async stopDataChannels(n){try{const i=this.dataStreamChannelMap.get(n);return i&&(i.id&&this.recoveredDataChannelIds.push(i.id),i.close()),void this.dataStreamChannelMap.delete(n)}catch(i){throw i instanceof we?i:new we(X.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(i.toString()))}}async stopSending(n,i){const a=i?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(m=>n.indexOf(m.mid)!==-1);if(l.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");l.map(m=>{var E;CS(this.id+m.mid,this),m.direction="inactive",(E=m.stop)===null||E===void 0||E.call(m)});const u=await this.peerConnection.createOffer(),h=this.logSDPExchange(u.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(u),this.remoteSDP.stopReceiving(n);const p=this.remoteSDP.toString();h==null||h(p),await this.peerConnection.setRemoteDescription({type:"answer",sdp:p})}catch(l){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(l.toString()))}finally{a&&a()}}async receive(n,i,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{mid:u,needExchangeSDP:h}=this.remoteSDP.send(n,i,a,l);h&&(await F0(this.peerConnection,this.remoteSDP,this.extension),k.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," by exchanging SDP.")));const p=this.peerConnection.getTransceivers().find(m=>m.mid===u);if(!p)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:p.receiver.track,id:u,transceiver:p}}catch(u){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(u.toString()))}}async batchReceive(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:i,needExchangeSDP:a}=this.remoteSDP.batchSend(n);return a&&(await F0(this.peerConnection,this.remoteSDP,this.extension),k.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))),i.map(l=>{const u=this.peerConnection.getTransceivers().find(h=>h.mid===l);if(!u)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:u.receiver.track,id:l,transceiver:u}})}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(i.toString()))}}async stopReceiving(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");n.forEach(u=>{Array.from(this.preSSRCMap.entries()).some(h=>{let[p,m]=h;if(m===u)return this.preSSRCMap.delete(p),!0})}),this.remoteSDP.stopSending(n);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}async muteRemote(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(n," before remote SDP created."));this.remoteSDP.mute(n);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(i.toString()))}}async unmuteRemote(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(n," before remote SDP created."));this.remoteSDP.unmute(n);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(i.toString()))}}async muteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(i.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(h=>{h.direction="inactive"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.muteRemote(n);const u=this.remoteSDP.toString();l==null||l(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(i.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(async(h,p)=>{h.direction="sendonly"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.unmuteRemote(n),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec(n,this.remoteCodecs,this.store.codec);const u=this.remoteSDP.toString();l==null||l(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(i.toString()))}}restartICE(n){var i=this;return as(function*(){const a=yield vn(i.mutex.lock("From P2PConnection.restartICE"));try{if(!i.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");const l=yn().supportPCSetConfiguration,u=Q("FORCE_TURN_TCP")||i.forceTurn;if(n===Zi.RELAY&&!l)return;if(l&&!u){const R=n===Zi.RELAY?"relay":"all",A=i.peerConnection.getConfiguration();A.iceTransportPolicy!==R&&(k.debug("[".concat(i.store.clientId,"] restartICE change iceTransportPolicy from [").concat(A.iceTransportPolicy,"] to [").concat(R,"]")),A.iceTransportPolicy=R,i.peerConnection.setConfiguration(A))}i.remoteSDP.updateCandidates(n);const h=yield vn(i.peerConnection.createOffer({iceRestart:!0}));if(!h.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const p=$u(h.sdp),{remoteIceParameters:m}=yield p.iceParameters;i.remoteSDP.restartICE(m);const E=i.remoteSDP.toString(),y=i.logSDPExchange(h.sdp||"","offer","local","restartICE");i.store.descriptionStart(),yield vn(i.peerConnection.setLocalDescription(h)),y==null||y(E),yield vn(i.peerConnection.setRemoteDescription({type:"answer",sdp:E}))}catch(l){k.warning("[".concat(i.store.clientId,"] restart ICE failed, abort operation"),l)}finally{a()}})()}async extendCandidate(){if(!this.remoteSDP||this.isFirstConnected)return;const n=await this.mutex.lock("From P2PConnection.extendCandidate");try{this.remoteSDP.updateCandidates(Zi.TCP_RELAY),await F0(this.peerConnection,this.remoteSDP,this.extension)}catch(i){k.warning("[".concat(this.store.clientId,"] extend candidate failed, abort operation"),i)}finally{n()}}close(){var n;this.peerConnection.getTransceivers().forEach(i=>{CS(this.id+i.mid,this)}),this.preSSRCMap.clear(),this.peerConnection.close(),(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return Ic(Ic({},this.statsFilter.getStats()),{},{qualityLimitationReason:this.qualityLimitationReason})}getRemoteVideoIsReady(n){return this.statsFilter.getVideoIsReady(n)}async updateEncoderConfig(n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const a=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(a.sdp,[i],[n]);this.remoteSDP.updateRecvMedia(n,i);const u=this.remoteSDP.toString(),h=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),h==null||h(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(a){throw new we(X.EXCHANGE_SDP_FAILED,a.toString())}}async updateSendParameters(n,i){const a=this.peerConnection.getTransceivers().filter(l=>l.mid===n);a.length===1&&(this.isVP8Simulcast(i)?Tr()||await this.applySimulcastEncodings(a,[i]):await this.applySendEncodings(a,[i]))}setStatsRemoteVideoIsReady(n,i){this.statsFilter.setVideoIsReady2(n,i)}async replaceTrack(n,i){const a=this.peerConnection.getTransceivers().find(l=>l.mid===i);a&&await a.sender.replaceTrack(n._mediaStreamTrack)}async getSelectedCandidatePair(){const n=this.peerConnection.getReceivers();if(n.length>0&&n[0].transport&&n[0].transport.iceTransport&&n[0].transport.iceTransport.getSelectedCandidatePair&&n[0].transport.iceTransport.getSelectedCandidatePair()){const i=n[0].transport.iceTransport,{local:a,remote:l}=i.getSelectedCandidatePair();return{local:Ic(Ic({},al),{},{candidateType:a.type,protocol:a.protocol,address:a.address,port:a.port}),remote:Ic(Ic({},al),{},{candidateType:l.type,protocol:l.protocol,address:l.address,port:l.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var n;(n=this.onICEConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var n;this.peerConnection.connectionState==="connected"&&(this.isFirstConnected=!0),(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidateerror=n=>{if(n&&(n.errorCode||n.errorText)){var i;const a="code: ".concat(n.errorCode,", message: ").concat(n.errorText),l=n.port?"local: ".concat(n.port):"";k.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICECandidateError(").concat(a,"), url: ").concat(n.url||"",", host_candidate:").concat(l)),(i=this.onICECandidateError)===null||i===void 0||i.call(this,a)}},this.peerConnection.onicegatheringstatechange=n=>{n&&n.target&&"iceGatheringState"in n.target&&k.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] RTCPeerConnection.onicegatheringstatechange(").concat(n.target.iceGatheringState,")"))},this.peerConnection.onicecandidate=n=>{n.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,k.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,k.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},Q("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(n){const i={iceServers:[]};return n.iceServers?i.iceServers=n.iceServers:n.turnServer&&(C0(n.turnServer.servers)?i.iceServers=n.turnServer.servers:Q("NEW_TURN_MODE")&&i.iceServers?(Q("USE_TURN_SERVER_OF_GATEWAY")?n.turnServer.serversFromGateway&&i.iceServers.push(...Th.newTurnServerConfigToIceServers(n.turnServer.serversFromGateway)):i.iceServers.push(...Th.newTurnServerConfigToIceServers(n.turnServer.servers)),Q("NEW_FORCE_TURN")&&(i.iceTransportPolicy="relay")):n.turnServer.mode!=="off"&&(i.iceServers&&i.iceServers.push(...Th.turnServerConfigToIceServers(n.turnServer.servers)),Q("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&n.turnServer.serversFromGateway&&i.iceServers.push(...Th.turnServerConfigToIceServers(n.turnServer.serversFromGateway)),Q("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(a=>{a.forceturn&&(i.iceTransportPolicy="relay")}))),Q("ENABLE_ENCODED_TRANSFORM")&&yn().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),i}static turnServerConfigToIceServers(n){const i=[];return n.forEach(a=>{a.security?a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(Vu(a.turnServerURL),":").concat(a.tcpport,"?transport=tcp")}):(a.udpport&&!Q("FORCE_TURN_TCP")&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.udpport,"?transport=udp")}),a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}))}),i}static newTurnServerConfigToIceServers(n){const i=[];return n.forEach(a=>{const l=Q("NEW_TURN_MODE");l===1?i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":3478?transport=udp")}):l===2?i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":3478?transport=tcp")}):l===3?i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(Vu(a.turnServerURL),":443?transport=tcp")}):l===4&&(i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":3478?transport=udp")}),i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":3478?transport=tcp")}),i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(Vu(a.turnServerURL),":443?transport=tcp")}))}),i}tryBindTransportEvents(n){const i=n.transport;if(i){this.transportEventReceiver=n,i.onstatechange=()=>{var l;i!=null&&i.state&&((l=this.onDTLSTransportStateChange)===null||l===void 0||l.call(this,i.state))},i.onerror=l=>{var u;(u=this.onDTLSTransportError)===null||u===void 0||u.call(this,"error"in l?l.error:l)};const a=i.iceTransport;a&&(a.onstatechange=()=>{const l=i==null?void 0:i.iceTransport.state;var u;l&&((u=this.onICETransportStateChange)===null||u===void 0||u.call(this,l))},a.getSelectedCandidatePair&&(a.onselectedcandidatepairchange=()=>{if(a.getSelectedCandidatePair()){const{local:l,remote:u}=a.getSelectedCandidatePair();k.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:l.type,protocol:l.protocol}),", remote ").concat(JSON.stringify({candidateType:u.type,protocol:u.protocol,address:u.address,port:u.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(n,i){var a,l;if(i||(i=this.peerConnection.getSenders().find($=>$.track===n._mediaStreamTrack)),!i)return k.warn("[".concat(n.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(n))return k.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!yn().supportSetRtpSenderParameters)return k.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const u={},h={};switch(n._optimizationMode){case"motion":u.degradationPreference="maintain-framerate";break;case"detail":u.degradationPreference="maintain-resolution";break;case"balanced":u.degradationPreference="balanced"}const p=function(B,$){return B.getTransceivers().find(K=>K.sender.track===$||K.receiver.track===$)}(this.peerConnection,n._mediaStreamTrack),m=Ghe(n);if(ope(n)&&p&&i&&m&&this.getLocalVideoStats&&Ke(a=["vp8","vp9"]).call(a,this.store.codec)){var E;const B=u.degradationPreference||(Ke(E=n._hints).call(E,Jn.CUSTOM_TRACK)?Q("CUSTOM_ADAPTATION_DEFAULT_MODE"):"maintain-framerate");(function($,K,Y,ce,ge,Ee){if(CS($,Y),ge(K),ce!=="balanced"&&ce!=="maintain-framerate"&&ce!=="maintain-resolution")return;let me=-1;i8($,K);const Te=window.setInterval(()=>{const Xe=yS.get($);if(!Q("ENABLE_AG_ADAPTATION")||!Xe)return CS($,Y),void ge(K);const nt=Ee();if(nt.sendPackets>0&&nt.OutgoingAvailableBandwidth>0){if(me===-1)return void(me=Date.now());if(Date.now()-me<1e3)return;const dn=nt.sendFrameRate,hn=nt.OutgoingAvailableBandwidth,[Qn,Vr]=ipe($,dn,hn,Xe.adaptationConfig,K,ce);Vr&&(Y.qualityLimitationReason=Vr),Qn&&Xe.adaptationConfig.scale!==Qn.scale&&(k.debug("[".concat($,"] applyAdaptation: ").concat(Y.qualityLimitationReason,`
           sendFps `).concat(dn,", bwe ").concat(hn,", switch from ").concat(Xe.adaptationConfig.scale," to ").concat(Qn.scale," ")),Xe.adaptationConfig=qI(qI({},Xe.adaptationConfig),Qn),ge(Qn))}},Q("CHECK_LOCAL_STATS_INTERVAL")),Me=qI({},K);yS.set($,{timer:Te,adaptationConfig:Me,originConfig:K,adaptationFunc:ge}),k.debug("[".concat($,"] start adaptation, originConfig: ").concat(JSON.stringify(K),", degradationPreference: ").concat(ce))})(this.id+p.mid,m,this,B,$=>{i&&this.updateAdaptation(i,$)},this.getLocalVideoStats.bind(this))}if(n._encoderConfig){var y;const{bitrateMax:B,frameRate:$,scaleResolutionDownBy:K}=n._encoderConfig;B&&(h.maxBitrate=1e3*B),(Ke(y=n._hints).call(y,Jn.LOW_STREAM)||n.isUseScaleResolutionDownBy)&&($&&(h.maxFramerate=Ra($)),K&&K>=1&&(h.scaleResolutionDownBy=K))}const{maxFramerate:R}=Q("ENCODER_CONFIG_LIMIT");if(R&&typeof R=="number"&&(h.maxFramerate=h.maxFramerate?Math.min(h.maxFramerate,R):R),Q("DSCP_TYPE")&&Hl()){var A;const B=Q("DSCP_TYPE");Ke(A=["very-low","low","medium","high"]).call(A,B)&&(h.networkPriority=B)}const D=i.getParameters(),H=(l=D.encodings)===null||l===void 0?void 0:l[0];Tr()&&!H&&(u.encodings=[h]),H&&Object.assign(H,h),Object.assign(D,u),k.debug("[".concat(n.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(D.encodings))),await i.setParameters(D),await async function(B,$,K){try{var Y;if(!yn().supportSetRtpSenderParameters||!function(Te){return Te==="vp9"||Te==="av1"}(B)||!Q("ENABLE_SVC"))return;const ce={},ge={},Ee=$.getParameters(),me=(Y=Ee.encodings)===null||Y===void 0?void 0:Y[0];ge.scalabilityMode=dS(K),me&&Object.assign(me,ge),Object.assign(Ee,ce),await $.setParameters(Ee),k.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode success: ".concat(JSON.stringify(Ee.encodings)))}catch(ce){k.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode failed",ce)}}(this.store.codec,i,Q("SVC_MODE"))}async updateAdaptation(n,i){var a,l;if(!n)return k.debug("[updateAdaptation] no rtpSender found");if(!yn().supportSetRtpSenderParameters)return k.debug("[updateAdaptation] Browser not support set rtp-sender parameters");const u={},{bitrateMax:h,frameRate:p,scaleResolutionDownBy:m}=i;h&&(u.maxBitrate=1e3*h),p&&(u.maxFramerate=Ra(p)),m&&m>=1&&Ke(a=["vp8","vp9"]).call(a,this.store.codec)&&(u.scaleResolutionDownBy=m);const E=n.getParameters(),y=(l=E.encodings)===null||l===void 0?void 0:l[0];y&&Object.assign(y,u),Object.assign(E,{});try{await n.setParameters(E),k.debug("[updateAdaptation] updateRtpSenderEncodings: ".concat(JSON.stringify(E.encodings)))}catch(R){!("transport"in n)||n.transport&&n.transport.state==="connected"?this.peerConnectionState!=="connected"?k.debug("[updateAdaptation] peerConnection not connected}"):k.debug("[updateAdaptation] updateRtpSenderEncodings failed",R):k.debug("[updateAdaptation] rtpSender transport not connected}")}}async applySendEncodings(n,i){try{if(!yn().supportSetRtpSenderParameters||n.length!==i.length)return;for(let a=0;a<n.length;a++){const l=n[a],u=i[a];u instanceof sr&&!this.isVP8Simulcast(u)&&await this.updateRtpSenderEncodings(u,l.sender)}}catch{k.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(n,i,a){const l=sa(n);return i.forEach((u,h)=>{const p=a[h],m=l.mediaDescriptions.find(E=>E.attributes.mid===p);m&&(lp(m,u),w6(m,u,this.store.codec))}),Fu(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=n=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoReceived=n=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstAudioDecoded=n=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoDecoded=(n,i,a)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,n,i,a)},this.statsFilter.onSelectedLocalCandidateChanged=(n,i)=>{var a;(a=this.onSelectedLocalCandidateChanged)===null||a===void 0||a.call(this,n,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(n,i)=>{var a;(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0||a.call(this,n,i)},this.statsFilter.onFirstVideoDecodedTimeout=n=>{var i;(i=this.onFirstVideoDecodedTimeout)===null||i===void 0||i.call(this,n)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(n,i){if(n.length===i.length)for(let m=0;m<n.length;m++){var a,l,u,h,p;const E=n[m],y=i[m];if(y instanceof sr&&!Ke(a=y._hints).call(a,Jn.LOW_STREAM)&&(l=y._encoderConfig)!==null&&l!==void 0&&l.bitrateMax&&((u=y._encoderConfig)===null||u===void 0?void 0:u.bitrateMax)>200&&(h=y._scalabilityMode)!==null&&h!==void 0&&h.numSpatialLayers&&((p=y._scalabilityMode)===null||p===void 0?void 0:p.numSpatialLayers)>1&&this.store.codec==="vp8"){const R={},A={high:1e3*(y._encoderConfig.bitrateMax-50),medium:5e4};R.encodings=[{rid:"m",active:!0,maxBitrate:A.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:A.high}];const D=E.sender.getParameters();await E.sender.setParameters(Object.assign(D,R))}}}async applySimulcastEncodings(n,i){if(!Tr()&&n.length===i.length)for(let a=0;a<n.length;a++){const l=i[a];if(l instanceof sr&&this.isVP8Simulcast(l)){const u=n[a],h={},p={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};h.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:p.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:p.medium,scaleResolutionDownBy:4}];const m=u.sender.getParameters();await u.sender.setParameters(Object.assign(m,h))}}}isVP8Simulcast(n){var i,a,l,u,h;return!!(n instanceof sr&&Q("SIMULCAST")&&this.store.codec==="vp8"&&!Ke(i=n._hints).call(i,Jn.LOW_STREAM)&&(a=n._encoderConfig)!==null&&a!==void 0&&a.bitrateMax&&((l=n._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(u=n._scalabilityMode)!==null&&u!==void 0&&u.numSpatialLayers&&((h=n._scalabilityMode)===null||h===void 0?void 0:h.numSpatialLayers)>1)}logSDPExchange(n,i,a,l){if(Q("SDP_LOGGING"))return k.upload("[".concat(this.store.clientId,"] exchanging ").concat(a," ").concat(i," SDP during P2PConnection.").concat(l,`
`),n),i==="offer"?u=>{this.logSDPExchange(u,"answer",a==="local"?"remote":"local",l)}:void 0}async getRemoteSSRC(n){if(!this.remoteSDP)return;const i=this.remoteSDP.getSSRC(n);return i&&i.length!==0?i[0].ssrcId:void 0}setConfiguration(n){if(yn().supportPCSetConfiguration){const i=Th.resolvePCConfiguration(n);this.peerConnection.setConfiguration(i)}}},st(mn.prototype,"updateRemoteRTPCapabilities",[Go],Object.getOwnPropertyDescriptor(mn.prototype,"updateRemoteRTPCapabilities"),mn.prototype),st(mn.prototype,"connect",[Go],Object.getOwnPropertyDescriptor(mn.prototype,"connect"),mn.prototype),st(mn.prototype,"updateRemoteConnect",[Go],Object.getOwnPropertyDescriptor(mn.prototype,"updateRemoteConnect"),mn.prototype),st(mn.prototype,"createDataChannels",[Go],Object.getOwnPropertyDescriptor(mn.prototype,"createDataChannels"),mn.prototype),st(mn.prototype,"receive",[Go],Object.getOwnPropertyDescriptor(mn.prototype,"receive"),mn.prototype),st(mn.prototype,"batchReceive",[Go],Object.getOwnPropertyDescriptor(mn.prototype,"batchReceive"),mn.prototype),st(mn.prototype,"stopReceiving",[Go],Object.getOwnPropertyDescriptor(mn.prototype,"stopReceiving"),mn.prototype),st(mn.prototype,"muteRemote",[Go],Object.getOwnPropertyDescriptor(mn.prototype,"muteRemote"),mn.prototype),st(mn.prototype,"unmuteRemote",[Go],Object.getOwnPropertyDescriptor(mn.prototype,"unmuteRemote"),mn.prototype),st(mn.prototype,"muteLocal",[Go],Object.getOwnPropertyDescriptor(mn.prototype,"muteLocal"),mn.prototype),st(mn.prototype,"unmuteLocal",[Go],Object.getOwnPropertyDescriptor(mn.prototype,"unmuteLocal"),mn.prototype),st(mn.prototype,"close",[Go],Object.getOwnPropertyDescriptor(mn.prototype,"close"),mn.prototype),st(mn.prototype,"updateEncoderConfig",[Go],Object.getOwnPropertyDescriptor(mn.prototype,"updateEncoderConfig"),mn.prototype),st(mn.prototype,"updateSendParameters",[Go],Object.getOwnPropertyDescriptor(mn.prototype,"updateSendParameters"),mn.prototype),st(mn.prototype,"replaceTrack",[Go],Object.getOwnPropertyDescriptor(mn.prototype,"replaceTrack"),mn.prototype),st(mn.prototype,"updateAdaptation",[Go],Object.getOwnPropertyDescriptor(mn.prototype,"updateAdaptation"),mn.prototype),st(mn.prototype,"getRemoteSSRC",[Go],Object.getOwnPropertyDescriptor(mn.prototype,"getRemoteSSRC"),mn.prototype),mn);function Go(t,n,i){const a=t[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,u=await l.lock("From P2PConnection.".concat(n));try{for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return await a.apply(this,p)}finally{u()}},i}function QI(t,n){let i=document.createElement("video"),a=document.createElement("canvas");i.setAttribute("style","display:none"),a.setAttribute("style","display:none"),i.setAttribute("muted",""),i.muted=!0,i.setAttribute("autoplay",""),i.autoplay=!0,i.setAttribute("playsinline",""),a.width=Ra(n.width),a.height=Ra(n.height);const l=Ra(n.framerate||15);document.body.append(i),document.body.append(a);let u=t._mediaStreamTrack;i.srcObject=new MediaStream([u]),i.play();const h=a.getContext("2d");if(!h)throw new ye(X.UNEXPECTED_ERROR,"can not get canvas context");const p=yn(),m=a.captureStream(p.supportRequestFrame?0:l).getVideoTracks()[0];m.canvas||(m.canvas=a),a.startCapture=()=>{if(!i)return a.stopCapture&&a.stopCapture();if(i.paused&&i.play(),i.videoHeight>2&&i.videoWidth>2){const y=i.videoWidth,R=i.videoHeight/y,A=a.width*R;Math.abs(A-a.height)>=2&&(k.debug("adjust low stream resolution","".concat(a.width,"x").concat(a.height," -> ").concat(a.width,"x").concat(A)),a.height=A)}h.drawImage(i,0,0,a.width,a.height),m.requestFrame&&m.requestFrame(),u!==t._mediaStreamTrack&&(u=t._mediaStreamTrack,i.srcObject=new MediaStream([u]))},a.stopCapture=lI(()=>a.startCapture&&a.startCapture(),l);const E=m.stop;return m.stop=()=>{E.call(m),i&&(i.remove(),i.srcObject=null,i=null),a&&(a.width=0,a.remove(),a.stopCapture&&a.stopCapture(),a.startCapture=void 0,a.stopCapture=void 0,a=null),k.debug("clean low stream renderer")},m}var TS=function(t){return t[t.HEIGHT=2033]="HEIGHT",t[t.FRAME_RATE=2034]="FRAME_RATE",t[t.WIDTH=2035]="WIDTH",t}(TS||{}),Wr=function(t){return t[t.FRAME_RATE=2002]="FRAME_RATE",t[t.WIDTH=2003]="WIDTH",t[t.HEIGHT=2004]="HEIGHT",t[t.PACKAGE_LOST=2005]="PACKAGE_LOST",t[t.AVG_ENCODE=2007]="AVG_ENCODE",t[t.NACKS=2009]="NACKS",t[t.PLIS=2010]="PLIS",t[t.FIRS=2011]="FIRS",t[t.BITRATE=2012]="BITRATE",t[t.PACKAGE_RATE=2031]="PACKAGE_RATE",t[t.ADAPTATION=2032]="ADAPTATION",t[t.ACTUAL_ENCODED=2060]="ACTUAL_ENCODED",t[t.BANDWIDTH=2061]="BANDWIDTH",t[t.RETRANSMIT=2062]="RETRANSMIT",t[t.TARGET_ENCODED=2064]="TARGET_ENCODED",t[t.TRANSMIT=2066]="TRANSMIT",t[t.FREEZE=2082]="FREEZE",t[t.DISABLED=2095]="DISABLED",t[t.PLAYER_STATUS=2128]="PLAYER_STATUS",t[t.QP_SUM=2143]="QP_SUM",t[t.BYTES_RETRANSMIT=2173]="BYTES_RETRANSMIT",t[t.PACKAGES_RETRANSMIT=2172]="PACKAGES_RETRANSMIT",t[t.HUGE_FRAME_SENT=2174]="HUGE_FRAME_SENT",t[t.KEY_FRAMES_ENCODED=2207]="KEY_FRAMES_ENCODED",t}(Wr||{}),sh=function(t){return t[t.BITRATE=2069]="BITRATE",t[t.PACKAGE_LOST=2070]="PACKAGE_LOST",t[t.PACKAGE_RATE=2071]="PACKAGE_RATE",t[t.HEIGHT=2073]="HEIGHT",t[t.FRAME_RATE=2075]="FRAME_RATE",t[t.WIDTH=2077]="WIDTH",t}(sh||{}),Gr=function(t){return t[t.JITTER=-1]="JITTER",t[t.PACKAGE_LOST=2014]="PACKAGE_LOST",t[t.WIDTH=2018]="WIDTH",t[t.HEIGHT=2019]="HEIGHT",t[t.FRAME_RATE=2020]="FRAME_RATE",t[t.JITTER_BUFFER=2023]="JITTER_BUFFER",t[t.CURRENT_DELAY=2024]="CURRENT_DELAY",t[t.NACKS=2026]="NACKS",t[t.PLIS=2027]="PLIS",t[t.FIRS=2028]="FIRS",t[t.BITRATE=2029]="BITRATE",t[t.PACKAGE_RATE=2078]="PACKAGE_RATE",t[t.FREEZE=2084]="FREEZE",t[t.DISABLED=2101]="DISABLED",t[t.PLAYER_STATUS=2129]="PLAYER_STATUS",t[t.QP_SUM=2144]="QP_SUM",t[t.I_FRAME_DELAY=2149]="I_FRAME_DELAY",t[t.FRAMES_DROPPED=2181]="FRAMES_DROPPED",t[t.BYTES_RETRANSMIT=2175]="BYTES_RETRANSMIT",t[t.PACKAGES_RETRANSMIT=2176]="PACKAGES_RETRANSMIT",t[t.PACKAGES_DISCARDED=2198]="PACKAGES_DISCARDED",t[t.AVG_DECODE=2200]="AVG_DECODE",t[t.AVG_PROCESSING_DELAY=2202]="AVG_PROCESSING_DELAY",t[t.AVG_ASSEMBLY_TIME=2203]="AVG_ASSEMBLY_TIME",t[t.AVG_INTER_FRAME_DELAY=2204]="AVG_INTER_FRAME_DELAY",t[t.KEY_FRAMES_DECODED=2206]="KEY_FRAMES_DECODED",t}(Gr||{}),ch=function(t){return t[t.FRAME_RATE_DECODE=2021]="FRAME_RATE_DECODE",t[t.FRAME_RATE_RENDER=2022]="FRAME_RATE_RENDER",t[t.FRAME_RATE_OUTPUT=2155]="FRAME_RATE_OUTPUT",t[t.FREEZE_TIME=2109]="FREEZE_TIME",t[t.FREEZE_TIME_RENDER=2147]="FREEZE_TIME_RENDER",t[t.FREEZE_DURATION=2156]="FREEZE_DURATION",t}(ch||{}),l8=function(t){return t[t.PCM_LEVEL=2104]="PCM_LEVEL",t}(l8||{}),pl=function(t){return t[t.PACKAGE_LOST=-1]="PACKAGE_LOST",t[t.LEVEL=2038]="LEVEL",t[t.BITRATE=2039]="BITRATE",t[t.PACKAGE_RATE=2040]="PACKAGE_RATE",t[t.AEC_RETURN_LOSS=2041]="AEC_RETURN_LOSS",t[t.AEC_RETURN_LOSS_ENH=2042]="AEC_RETURN_LOSS_ENH",t[t.FREEZE=2081]="FREEZE",t[t.DISABLED=2096]="DISABLED",t[t.BYTES_RETRANSMIT=2179]="BYTES_RETRANSMIT",t[t.PACKAGES_RETRANSMIT=2180]="PACKAGES_RETRANSMIT",t}(pl||{}),Ko=function(t){return t[t.BITRATE=2044]="BITRATE",t[t.PACKAGE_LOST=2045]="PACKAGE_LOST",t[t.PACKAGE_RATE=2046]="PACKAGE_RATE",t[t.CURRENT_DELAY=2047]="CURRENT_DELAY",t[t.JITTER_BUFFER=2054]="JITTER_BUFFER",t[t.JITTER=2055]="JITTER",t[t.FREEZE=2083]="FREEZE",t[t.DISABLED=2102]="DISABLED",t[t.PCM_LEVEL=2105]="PCM_LEVEL",t[t.PLAYER_STATUS=2130]="PLAYER_STATUS",t[t.CONCEALED_SAMPLES=2148]="CONCEALED_SAMPLES",t[t.BYTES_RETRANSMIT=2178]="BYTES_RETRANSMIT",t[t.PACKAGES_RETRANSMIT=2177]="PACKAGES_RETRANSMIT",t[t.PACKAGES_DISCARDED=2199]="PACKAGES_DISCARDED",t[t.AVG_PROCESSING_DELAY=2201]="AVG_PROCESSING_DELAY",t[t.TOTAL_SAMPLES_RECEIVED=2224]="TOTAL_SAMPLES_RECEIVED",t}(Ko||{}),u8=function(t){return t[t.FREEZE_TIME=-1]="FREEZE_TIME",t[t.LEVEL=2043]="LEVEL",t}(u8||{}),qo=function(t){return t[t.RTT=2006]="RTT",t[t.CONN_TYPE=801]="CONN_TYPE",t[t.STATS_UPDATE_INTERVAL=2205]="STATS_UPDATE_INTERVAL",t}(qo||{}),RS=function(t){return t[t.RTC_PEER_CONNECTION_STATE=2219]="RTC_PEER_CONNECTION_STATE",t}(RS||{});const lh=1e3,uh=6,wS=3,cpe=Math.max(uh,wS);function Ot(t,n,i){i!=null&&Number.isFinite(i)&&(t[n]=Math.round(Math.max(0,i)))}function d8(t){const n={[qo.CONN_TYPE]:0,[qo.RTT]:t.rtt,[qo.STATS_UPDATE_INTERVAL]:t.updateInterval?Math.round(Math.max(0,t.updateInterval)):void 0};switch(t.selectedCandidatePair.localCandidate.candidateType){case"relay":{const i=t.selectedCandidatePair.localCandidate.relayProtocol;i==="udp"&&(n[qo.CONN_TYPE]=1),i==="tcp"&&(n[qo.CONN_TYPE]=3),i==="tls"&&(n[qo.CONN_TYPE]=4);break}case"srflx":n[qo.CONN_TYPE]=2;break;case"unknown":n[qo.CONN_TYPE]=5;break;default:n[qo.CONN_TYPE]=0}return n}function h8(t){let n=0;switch(t){case"none":n=0;break;case"cpu":n=1;break;case"bandwidth":n=2;break;case"other":n=3}return n}class f8 extends Sr{constructor(n){super(),G(this,"store",void 0),G(this,"uploadWRTCStatsTimer",void 0),G(this,"uploadOutboundDenoiserStatsTimer",void 0),G(this,"uploadExtStatsTimer",void 0),G(this,"uploadExtUsageStatsTimer",void 0),G(this,"uploadInboundExtStatsTimer",void 0),G(this,"requestStats",void 0),G(this,"requestTransportStats",void 0),G(this,"requestLocalMedia",void 0),G(this,"requestRemoteMedia",void 0),G(this,"requestAllTracks",void 0),G(this,"requestVideoIsReady",void 0),G(this,"requestUploadStats",void 0),G(this,"requestUpload",void 0),G(this,"uploadOutboundStarted",!1),G(this,"uploadInboundStarted",!1),G(this,"uploadTransportStarted",!1),G(this,"uploadBaseStatsStarted",!1),G(this,"uploadExtensionUsageStarted",!1),G(this,"lastRecvStats",void 0),G(this,"lastSendStats",void 0),G(this,"lastRefRecvStats",void 0),G(this,"lastRefSendStats",void 0),G(this,"lastFullRecvStats",void 0),G(this,"lastFullSendStats",void 0),G(this,"needUploadRenderFreezeTime",!0),this.store=n}uploadWRTCStats(n){if(!this.requestStats||!this.requestUploadStats)return;const i=n%wS==0,a=n%uh==0;let l,u;if(this.uploadTransportStarted&&(l=this.requestStats(),this.store.useP2P&&(u=this.requestStats(!0))),!l&&this.uploadOutboundStarted&&(l=this.requestStats()),!u&&this.uploadInboundStarted&&(u=this.requestStats(!0)),l||u){var h;const p={};if(this.uploadTransportStarted&&l){const E=this.getTransportStats(l,u,i);E&&(p.misc=[E])}if(this.uploadOutboundStarted&&l){const E=this.getOutboundStats(l,a?this.lastFullSendStats:i?this.lastRefSendStats:this.lastSendStats,i,a);E&&(p.outbound=[E])}if(this.uploadInboundStarted&&u){const E=this.getInboundStats(u,a?this.lastFullRecvStats:i?this.lastRefRecvStats:this.lastRecvStats,i,a);E&&(p.inbound=E)}const m=(h=this.requestTransportStats)===null||h===void 0?void 0:h.call(this).connectState;m&&(Array.isArray(p.misc)?p.misc[0]&&p.misc[0].addition&&(p.misc[0].addition[RS.RTC_PEER_CONNECTION_STATE]=qw[m]):p.misc=[{addition:{[RS.RTC_PEER_CONNECTION_STATE]:qw[m]}}]),this.requestUploadStats(p)}this.lastRecvStats=u,this.lastSendStats=l,a&&(this.lastFullRecvStats=u,this.lastFullSendStats=l),i&&(this.lastRefRecvStats=u,this.lastRefSendStats=l)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;this.uploadBaseStatsStarted=!0;let n=1;this.uploadWRTCStatsTimer=window.setInterval(()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted){if(this.uploadBaseStatsStarted){var i,a;const l=(i=this.requestTransportStats)===null||i===void 0?void 0:i.call(this);return void(l&&((a=this.requestUploadStats)===null||a===void 0||a.call(this,{misc:[{addition:{[RS.RTC_PEER_CONNECTION_STATE]:qw[l.connectState]}}]})))}return this.stopUploadWRTCStats()}this.uploadWRTCStats(n),++n===cpe+1&&(n=1)},lh)}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0)}getTransportStats(n,i,a){if(!this.requestStats)return;if(!a)return n.rtt==null?void 0:{addition:{[qo.RTT]:n.rtt,[qo.CONN_TYPE]:void 0,[qo.STATS_UPDATE_INTERVAL]:n.updateInterval||void 0}};const l=d8(n);if(this.store.useP2P){if(i){const u=d8(i);l[qo.CONN_TYPE]+=u[qo.CONN_TYPE]<<3}l[qo.CONN_TYPE]+=110}else l[qo.CONN_TYPE]+=100;return{addition:l}}getOutboundStats(n,i,a,l){if(!this.requestUploadStats||!this.requestLocalMedia)return;const u=this.requestLocalMedia();if(!u||u.length===0)return;let h,p,m;return u.forEach(E=>{let[y,{track:R,ssrcs:A}]=E;switch(y){case Le.LocalVideoLowTrack:case Le.LocalVideoTrack:if(y===Le.LocalVideoTrack){const D=function($,K,Y,ce,ge,Ee){const me=K.videoSend.find(nt=>nt.ssrc===$);if(!me)return;const Te={},{sentFrame:Me,inputFrame:Xe}=me;if(Ee&&(Ot(Te,Wr.QP_SUM,me.qpSumPerFrame),Xe&&Me)){const nt=Xe.frameRate,dn=Me.frameRate;Te[Wr.FREEZE]=function(hn,Qn){let Vr=!0;return Vr=!(hn<=5)&&(hn<=10?Qn<3:hn<=20?Qn<4:Qn<5),Vr}(nt,dn)?1:0}if(ge){switch(Me&&(Ot(Te,Wr.HEIGHT,Me.height),Ot(Te,Wr.WIDTH,Me.width),Ot(Te,Wr.FRAME_RATE,Me.frameRate)),Te[Wr.DISABLED]=ce._originMediaStreamTrack&&!ce._originMediaStreamTrack.enabled||ce._mediaStreamTrack&&!ce._mediaStreamTrack.enabled?1:0,me.adaptionChangeReason){case"none":Te[Wr.ADAPTATION]=0;break;case"cpu":Te[Wr.ADAPTATION]=1;break;case"bandwidth":Te[Wr.ADAPTATION]=2;break;case"other":Te[Wr.ADAPTATION]=3}let nt=0;me.adaptionChangeReason&&(nt+=h8(me.adaptionChangeReason)),K.qualityLimitationReason&&(nt+=h8(K.qualityLimitationReason)<<3),Te[Wr.ADAPTATION]=nt,Te[Wr.PLAYER_STATUS]=sI[ce._player?ce._player.videoElementStatus:"uninit"],Ot(Te,Wr.NACKS,me.nacksCount),Ot(Te,Wr.PLIS,me.plisCount),Ot(Te,Wr.FIRS,me.firsCount),Ot(Te,Wr.AVG_ENCODE,me.avgEncodeMs),Ot(Te,Wr.HUGE_FRAME_SENT,me.hugeFramesSent),Ot(Te,Wr.BYTES_RETRANSMIT,me.retransmittedBytesSent),Ot(Te,Wr.PACKAGES_RETRANSMIT,me.retransmittedPacketsSent),Ot(Te,Wr.KEY_FRAMES_ENCODED,me.keyFramesEncoded);const dn=Y&&Y.videoSend.find(hn=>hn.ssrc===$);if(dn){let hn=ge?lh:lh*uh;dn.timestamp&&me.timestamp&&(hn=me.timestamp-dn.timestamp),dn.packets!=null&&me.packets!=null&&Ot(Te,Wr.PACKAGE_RATE,1e3*(me.packets-dn.packets)/hn),me.packetsLost!=null&&dn.packetsLost!=null&&Ot(Te,Wr.PACKAGE_LOST,me.packetsLost-dn.packetsLost),dn.bytes!=null&&me.bytes!=null&&Ot(Te,Wr.BITRATE,8*(me.bytes-dn.bytes)/hn)}}return Te}(A[0].ssrcId,n,i,R,a,l),H=R&&function($,K,Y,ce){const ge=K.videoSend.find(me=>me.ssrc===$);if(!ge)return null;const Ee={};if(ce){const me=ge.inputFrame,Te=me&&me.height||Y.videoHeight||0,Me=me&&me.width||Y.videoWidth||0,Xe=me&&me.frameRate||0;Ot(Ee,TS.HEIGHT,Te),Ot(Ee,TS.WIDTH,Me),Ot(Ee,TS.FRAME_RATE,Xe)}return Ee}(A[0].ssrcId,n,R,a),B=function($,K){const Y={};return K&&(Ot(Y,Wr.RETRANSMIT,$.bitrate.retransmit),Ot(Y,Wr.TARGET_ENCODED,$.bitrate.targetEncoded),Ot(Y,Wr.ACTUAL_ENCODED,$.bitrate.actualEncoded),Ot(Y,Wr.TRANSMIT,$.bitrate.transmit),Ot(Y,Wr.BANDWIDTH,$.sendBandwidth)),Y}(n,a);p=Object.assign({},D,H,B)}else m=function(D,H,B,$){const K=H.videoSend.find(ce=>ce.ssrc===D);if(!K)return;const Y={};if($){const ce=K.sentFrame;if(ce&&(Ot(Y,sh.HEIGHT,ce.height),Ot(Y,sh.WIDTH,ce.width),Ot(Y,sh.FRAME_RATE,ce.frameRate)),B){const ge=B.videoSend.find(Ee=>Ee.ssrc===D);if(ge){let Ee=lh*uh;ge.timestamp&&K.timestamp&&(Ee=K.timestamp-ge.timestamp),ge.packets!=null&&K.packets!=null&&Ot(Y,sh.PACKAGE_RATE,1e3*(K.packets-ge.packets)/Ee),K.packetsLost!=null&&ge.packetsLost!=null&&Ot(Y,sh.PACKAGE_LOST,K.packetsLost-ge.packetsLost),ge.bytes!=null&&K.bytes!=null&&Ot(Y,sh.BITRATE,8*(K.bytes-ge.bytes)/Ee)}}}return Y}(A[0].ssrcId,n,i,a);break;case Le.LocalAudioTrack:h=R&&function(D,H,B,$,K){const Y=H.audioSend.find(ge=>ge.ssrc===D);if(!Y)return;const ce={};if(K){ce[pl.DISABLED]=$._originMediaStreamTrack&&!$._originMediaStreamTrack.enabled||$._mediaStreamTrack&&!$._mediaStreamTrack.enabled?1:0;const ge=100*$._source.getAccurateVolumeLevel(),Ee=Y.inputLevel;if(Ee!=null){const Te=Math.ceil(50*Math.log10(100*Ee+1));Ot(ce,pl.LEVEL,Te)}Ot(ce,l8.PCM_LEVEL,ge),Ot(ce,pl.AEC_RETURN_LOSS,Y.aecReturnLoss),Ot(ce,pl.AEC_RETURN_LOSS_ENH,Y.aecReturnLossEnhancement),Ot(ce,pl.BYTES_RETRANSMIT,Y.retransmittedBytesSent),Ot(ce,pl.PACKAGES_RETRANSMIT,Y.retransmittedPacketsSent),ce[pl.FREEZE]=0;const me=B&&B.audioSend.find(Te=>Te.ssrc===D);if(me){let Te=lh*uh;me.timestamp&&Y.timestamp&&(Te=Y.timestamp-me.timestamp),me.bytes!=null&&Y.bytes!=null&&Ot(ce,pl.BITRATE,8*(Y.bytes-me.bytes)/Te),me.packets!=null&&Y.packets!=null&&Ot(ce,pl.PACKAGE_RATE,1e3*(Y.packets-me.packets)/Te)}}return ce}(A[0].ssrcId,n,i,R,a)}}),{high:p,low:m,audio:h}}getInboundStats(n,i,a,l){if(!this.requestRemoteMedia)return;const u=this.requestRemoteMedia()||[],h=[];return u.forEach(p=>{let[m,E]=p;const y={peer:m.uid};if(E.has(it.VIDEO)&&m.videoTrack){const R=m._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(m._videoSSRC)||!1,A=m.videoTrack?function(D,H,B,$,K,Y,ce,ge){const Ee=H.videoRecv.find(hn=>hn.ssrc===D);if(!Ee)return;const me={},{receivedFrame:Te,outputFrame:Me,decodeFrameRate:Xe}=Ee,nt=B&&B.videoRecv.find(hn=>hn.ssrc===D);if(Ot(me,ch.FRAME_RATE_DECODE,Xe),Ee.framesRateFirefox&&Ot(me,Gr.FRAME_RATE,Ee.framesRateFirefox),Te&&Ot(me,Gr.FRAME_RATE,Te.frameRate),Ot(me,Gr.FRAMES_DROPPED,Ee.framesDroppedCount),Ot(me,Gr.BYTES_RETRANSMIT,Ee.retransmittedBytesReceived),Ot(me,Gr.PACKAGES_RETRANSMIT,Ee.retransmittedPacketsReceived),Ot(me,Gr.PACKAGES_DISCARDED,Ee.packetsDiscarded),Ot(me,Gr.AVG_DECODE,Ee.avgDecodeMs),Ot(me,Gr.AVG_PROCESSING_DELAY,Ee.avgProcessingDelayMs),Ot(me,Gr.AVG_ASSEMBLY_TIME,Ee.avgFramesAssembledFromMultiplePacketsMs),Ot(me,Gr.AVG_INTER_FRAME_DELAY,Ee.avgInterFrameDelayMs),Ot(me,Gr.KEY_FRAMES_DECODED,Ee.keyFramesDecoded),nt){const hn=H.timestamp-B.timestamp||lh*(ge?uh:ce?wS:1);Ee.packetsLost!=null&&nt.packetsLost!=null&&Ot(me,Gr.PACKAGE_LOST,Ee.packetsLost-nt.packetsLost),nt.bytes!=null&&Ee.bytes!=null&&Ot(me,Gr.BITRATE,8*(Ee.bytes-nt.bytes)/hn),nt.packets!=null&&Ee.packets!=null&&Ot(me,Gr.PACKAGE_RATE,1e3*(Ee.packets-nt.packets)/hn)}if(ge&&(Ot(me,Gr.QP_SUM,Ee.qpSumPerFrame),me[Gr.FREEZE]=K&&V0.isRemoteVideoFreeze($,Ee,nt)?1:0),ce){var dn;Te?(Ot(me,Gr.HEIGHT,Te.height),Ot(me,Gr.WIDTH,Te.width)):$&&(Ot(me,Gr.HEIGHT,$._videoHeight||0),Ot(me,Gr.WIDTH,$._videoWidth||0)),Me&&Ot(me,ch.FRAME_RATE_OUTPUT,Me.frameRate);const hn=(dn=$._player)===null||dn===void 0?void 0:dn.rendFrameRate.toFixed(0);if(hn&&Ot(me,ch.FRAME_RATE_RENDER,+hn),Ot(me,Gr.JITTER_BUFFER,Ee.jitterBufferMs),Ot(me,Gr.CURRENT_DELAY,Ee.currentDelayMs),Ot(me,Gr.FIRS,Ee.firsCount),Ot(me,Gr.NACKS,Ee.nacksCount),Ot(me,Gr.PLIS,Ee.plisCount),$){me[Gr.DISABLED]=$._originMediaStreamTrack.enabled&&$._mediaStreamTrack.enabled?0:1;const Qn=$._player;if(Qn){const{freezeTimeCounterList:Vr,renderFreezeAccTime:Pr,videoElementStatus:Xo}=Qn;if(Vr&&Vr.length>0&&Ot(me,ch.FREEZE_TIME,Vr.splice(0,1)[0]),Y&&Gl.visibility==="visible"&&Xo===go.PLAYING&&yn().supportRequestVideoFrameCallback){const Oe=Math.min(6e3,Pr);Qn.renderFreezeAccTime=Math.max(0,Pr-Oe),Ot(me,ch.FREEZE_TIME_RENDER,Oe)}if(typeof Ee.totalFreezesDuration=="number"){const Oe=nt&&nt.totalFreezesDuration?Ee.totalFreezesDuration-nt.totalFreezesDuration:Ee.totalFreezesDuration;Ot(me,ch.FREEZE_DURATION,1e3*Oe)}}}if(me[Gr.PLAYER_STATUS]=sI[$._player?$._player.videoElementStatus:"uninit"],nt&&Ee.totalInterFrameDelay!==void 0&&Ee.totalSquaredInterFrameDelay!==void 0&&nt.totalInterFrameDelay!==void 0&&nt.totalSquaredInterFrameDelay!==void 0){const Qn=Ee.totalInterFrameDelay-nt.totalInterFrameDelay,Vr=Ee.totalSquaredInterFrameDelay-nt.totalSquaredInterFrameDelay,Pr=Ee.framesDecodeCount-nt.framesDecodeCount,Xo=Qn/Pr*1e3,Oe=Math.round(1e3*Math.sqrt((Vr-Math.pow(Qn,2)/Pr)/Pr));!isNaN(Oe)&&Xo+Oe>Math.max(3*Xo,Xo+150)&&(me[Gr.I_FRAME_DELAY]=Oe)}}return me}(m._videoSSRC,n,i,m.videoTrack,R===!0,this.needUploadRenderFreezeTime,a,l):void 0;A&&(y.video=A)}if(E.has(it.AUDIO)&&m.audioTrack){const R=m.audioTrack?function(A,D,H,B,$,K){const Y=D.audioRecv.find(me=>me.ssrc===A);if(!Y)return;const ce={},ge=H&&H.audioRecv.find(me=>me.ssrc===A);if(Ot(ce,Ko.JITTER,Y.jitterMs),Ot(ce,Ko.BYTES_RETRANSMIT,Y.retransmittedBytesReceived),Ot(ce,Ko.PACKAGES_RETRANSMIT,Y.retransmittedPacketsReceived),Ot(ce,Ko.PACKAGES_DISCARDED,Y.packetsDiscarded),Ot(ce,Ko.AVG_PROCESSING_DELAY,Y.avgProcessingDelayMs),ge){const me=D.timestamp-H.timestamp||lh*(K?uh:$?wS:1);Y.packets!=null&&ge.packets!=null&&Ot(ce,Ko.PACKAGE_RATE,1e3*(Y.packets-ge.packets)/me),$&&ge.bytes!=null&&Y.bytes!=null&&Ot(ce,Ko.BITRATE,8*(Y.bytes-ge.bytes)/me),Y.packetsLost!=null&&ge.packetsLost!=null&&Ot(ce,Ko.PACKAGE_LOST,Y.packetsLost-ge.packetsLost)}if(K){const{receivedFrames:me,droppedFrames:Te}=Y;me!=null&&Te!=null&&(ce[Ko.FREEZE]=(Ee=me)===0||100*Te/Ee>20?1:0)}var Ee;if($){const me=100*B._source.getAccurateVolumeLevel(),Te=Y.outputLevel;if(Te!=null){const Me=Math.ceil(50*Math.log10(100*Te+1));Ot(ce,u8.LEVEL,Me)}if(Ot(ce,Ko.PCM_LEVEL,me),B&&(ce[Ko.DISABLED]=B._originMediaStreamTrack.enabled&&B._mediaStreamTrack.enabled?0:1),Ot(ce,Ko.JITTER_BUFFER,Y.jitterBufferMs),Ot(ce,Ko.CURRENT_DELAY,Y.jitterBufferMs),ce[Ko.PLAYER_STATUS]=sI[Wo.getPlayerState(B.getTrackId())],ge){const Me=Y.concealedSamples-ge.concealedSamples;Me>0&&Ot(ce,Ko.CONCEALED_SAMPLES,Me);const Xe=Y.totalSamplesReceived-ge.totalSamplesReceived;Xe>0&&Ot(ce,Ko.TOTAL_SAMPLES_RECEIVED,Xe)}}return ce}(m._audioSSRC,n,i,m.audioTrack,a,l):void 0;R&&(y.audio=R)}(y.video||y.audio)&&h.push(y)}),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,h}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval(()=>{if(!this.requestAllTracks||!this.requestUpload)return;const n=(this.requestAllTracks()||[]).find(i=>i instanceof Y_);if(n&&n._external.getDenoiserStats){const i=n._external.getDenoiserStats();i&&this.requestUpload(x0.DENOISER_STATS,i)}},2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval(()=>{!this.requestAllTracks||!this.requestUpload||this.requestAllTracks().forEach(n=>{n.getProcessorStats().forEach(i=>{this.requestUpload&&this.requestUpload(i.type,i.stats)})})},2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval(()=>{!this.requestUpload||!this.requestRemoteMedia||(this.requestRemoteMedia()||[]).forEach(n=>{let[i,a]=n;a.has(it.VIDEO)&&i.videoTrack&&i.videoTrack.getProcessorStats().forEach(l=>{this.requestUpload&&this.requestUpload(l.type,l.stats)}),a.has(it.AUDIO)&&i.audioTrack&&i.audioTrack.getProcessorStats().forEach(l=>{this.requestUpload&&this.requestUpload(l.type,l.stats)})})},2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);const n=new Map;this.uploadExtUsageStatsTimer=window.setInterval(async()=>{const i=Date.now(),a={connectionInterval:Q("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:i};let l=[];const u=this.requestAllTracks&&this.requestAllTracks()||[];for(const E of u)!E.muted&&E.enabled&&(l=l.concat(await E.getProcessorUsage()));const h=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(const[E,y]of h)y.has(it.VIDEO)&&E.videoTrack&&(l=l.concat(await E.videoTrack.getProcessorUsage())),y.has(it.AUDIO)&&E.audioTrack&&(l=l.concat(await E.audioTrack.getProcessorUsage()));if(l.length===0)return;a.details=function(E,y){const R={};for(const{id:B,value:$,level:K,direction:Y}of E){var A;const ce=(A=y.get(B))!==null&&A!==void 0?A:0,ge=$===2?ce+Q("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:ce;var D,H;y.set(B,ge),R[B]?($===2&&(R[B].value=$),K>R[B].level&&(R[B].level=K),Y==="remote"&&(R[B].remoteUidCount+=1),R[B].totalTs=(D=y.get(B))!==null&&D!==void 0?D:0):R[B]={value:$,level:K,remoteUidCount:Y==="local"?0:1,totalTs:(H=y.get(B))!==null&&H!==void 0?H:0}}return Object.keys(R).map(B=>{const{level:$,value:K,totalTs:Y}=R[B];return{id:B,level:$,value:K,totalTs:Y}})}(l,n);const p=Date.now(),m=p>i?p:i+1;this.requestUpload&&this.requestUpload(x0.EXTENSION_USAGE_STATS,{usageStats:a,sendTs:m})},Q("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}stopUploadBaseStats(){this.uploadBaseStatsStarted=!1}}const lpe=Q("ICE_RESTART_INTERVAL");let IS=new Map,pp=new Map,Wu=[Zi.UDP_TCP_RELAY,Zi.TCP_RELAY,Zi.RELAY],ZI=Q("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&yn().supportPCSetConfiguration;function p8(t){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=IS.get(t.id);i&&(window.clearTimeout(i),IS.delete(t.id));const a=pp.get(t.id);n&&a&&a.index===Wu.length-1&&(k.debug("[".concat(t.id,"] reset ICE restart policy")),pp.delete(t.id))}function m8(t,n,i){if(IS.size===0&&pp.size===0&&(Array.isArray(Q("RESTART_SEQUENCE"))&&Q("RESTART_SEQUENCE").length>0&&!function(p,m){if(p.length!==m.length)return!1;for(let E=0;E<p.length;E+=1){const y=p[E];if(p.filter(R=>R===y).length!==m.filter(R=>R===y).length)return!1}return!0}(Wu,Q("RESTART_SEQUENCE"))&&(Wu=Q("RESTART_SEQUENCE").filter(p=>{var m;if(Ke(m=Object.values(Zi)).call(m,p))return!0}),k.debug("use reconnection policy from config distribution, queues: ".concat(Wu.join(" => ")))),ZI=Q("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&yn().supportPCSetConfiguration),Wu.length===0)return void i();let a,{index:l=0,type:u}=pp.get(t.id)||{};if(ZI&&u===Zi.RELAY)return void i();let h=u&&l>=Wu.length-1;if(ZI)u=Zi.RELAY;else{if(h)return void i();u?(l++,u=Wu[l]):(u=Wu[0],l=0)}k.debug("[".concat(t.id,"] choose ICE restart policy: ").concat(u,", index: ").concat(l)),n(u),pp.set(t.id,{index:l,type:u}),a=window.setTimeout(()=>m8(t,n,i),lpe),IS.set(t.id,a)}var an;function g8(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function ml(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?g8(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):g8(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function v8(t){var n,i,a,l=2;for(typeof Symbol<"u"&&(i=Cw,a=Symbol.iterator);l--;){if(i&&(n=t[i])!=null)return n.call(t);if(a&&(n=t[a])!=null)return new AS(n.call(t));i="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")}function AS(t){function n(i){if(Object(i)!==i)return Ye.reject(new TypeError(i+" is not an object."));var a=i.done;return Ye.resolve(i.value).then(function(l){return{value:l,done:a}})}return AS=function(i){this.s=i,this.n=i.next},AS.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(i){var a=this.s.return;return a===void 0?Ye.resolve({value:i,done:!0}):n(a.apply(this.s,arguments))},throw:function(i){var a=this.s.return;return a===void 0?Ye.reject(i):n(a.apply(this.s,arguments))}},new AS(t)}let $0=(an=class extends Sr{get state(){return this._state}set state(t){const n=this._state;this._state=t,this.emit(Et.StateChange,n,this._state)}constructor(t,n){super(),G(this,"isPlanB",void 0),G(this,"store",void 0),G(this,"statsUploader",void 0),G(this,"connection",void 0),G(this,"localTrackMap",new Map),G(this,"remoteUserMap",new Map),G(this,"localDataChannels",[]),G(this,"remoteDataChannelMap",new Map),G(this,"pendingLocalTracks",[]),G(this,"pendingRemoteTracks",[]),G(this,"pendingLocalDataChannels",[]),G(this,"pendingRemoteDataChannels",[]),G(this,"statsCollector",void 0),G(this,"shouldForwardP2PCreation",void 0),G(this,"iceFailedCount",0),G(this,"dtlsFailedCount",0),G(this,"mutex",void 0),G(this,"_state",kn.Disconnected),G(this,"_pcStatsUploadType",Q("NEW_ICE_RESTART")?Yl.FIRST_CONNECTION:Yl.OLD_FIRST_CONNECTION),G(this,"_isStartRestartIce",!1),G(this,"_restartTimer",void 0),G(this,"_isTryConnecting",!1),G(this,"_iceError",null),G(this,"_forceTurn",!1),G(this,"_isWaitPcToRePub",!1),G(this,"handleMuteLocalTrack",async(i,a,l)=>{const u=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==kn.Connected)return void l(new we(X.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const h=this.filterTobeMutedTracks(i);if(h.length===0)return void a();const p=h.find(E=>E[0]==="videoLowTrack");p&&p[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(h.map(E=>{let[,{id:y}]=E;return y}));const m=this.createMuteMessage(h);await Yn(this,Et.RequestMuteLocal,m),a()}catch(h){l(h)}finally{u()}}),G(this,"handleUnmuteLocalTrack",async(i,a,l)=>{const u=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==kn.Connected)return void l(new we(X.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const h=this.filterTobeUnmutedTracks(i);if(h.length===0)return void a();const p=h.find(E=>E[0]==="videoLowTrack");if(p){const E=p[1];if(E.track._originMediaStreamTrack.stop(),!Q("DISABLE_DUAL_STREAM_USE_ENCODING")&&yn().supportDualStreamEncoding){const y=i._mediaStreamTrack.clone();E.track._mediaStreamTrack=y,E.track._originMediaStreamTrack=y}else{const y=QI(i,b0(this,Et.RequestLowStreamParameter));E.track._mediaStreamTrack=y,E.track._originMediaStreamTrack=y}await new Ye((y,R)=>{this.handleReplaceTrack(E.track,y,R,!0)})}await this.connection.unmuteLocal(h.map(E=>{let[,{id:y}]=E;return y}));const m=this.createUnmuteMessage(h);await Yn(this,Et.RequestUnmuteLocal,m),a()}catch(h){l(h)}finally{u()}}),G(this,"handleUpdateVideoEncoder",async(i,a,l,u)=>{let h;u||(h=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoEncoder"));try{const m=this.localTrackMap.get(Le.LocalVideoTrack);if(!this.connection||!m||m.track!==i||this.state!==kn.Connected)return void a();const{id:E,track:y}=m;await this.connection.updateSendParameters(E,y),await this.connection.updateEncoderConfig(E,y),this.emit(Et.UpdateVideoEncoder,y),a()}catch(m){l(m)}finally{var p;(p=h)===null||p===void 0||p()}}),G(this,"handleUpdateVideoSendParameters",async(i,a,l)=>{const u=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoSendParameters");try{const h=this.localTrackMap.get(Le.LocalVideoTrack);if(!this.connection||!h||h.track!==i||this.state!==kn.Connected)return void a();const{id:p,track:m}=h;await this.connection.updateSendParameters(p,m),a()}catch(h){l(h)}finally{u()}}),G(this,"handleReplaceMixingTrack",async(i,a,l,u)=>{if(!this.connection||this.state!==kn.Connected)return void a();const h=XI([i]);let p;k.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(h.getTrackId(),"]")),typeof u=="boolean"&&u||(p=await this.mutex.lock("From P2PChannel.handleReplaceMixingTrack"));try{await this.replaceTrack(i,h),a()}catch(E){l(E)}finally{var m;(m=p)===null||m===void 0||m()}}),G(this,"handleReplaceTrack",async(i,a,l,u)=>{let h;k.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(i.getTrackId(),"]")),typeof u=="boolean"&&u||(h=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var p;const E=Array.from(this.localTrackMap.entries()).find(y=>{let[,{track:R}]=y;return i===R});if(!this.connection||!E||this.state!==kn.Connected)return void a();if(await((p=this.connection)===null||p===void 0?void 0:p.replaceTrack(i,E[1].id)),this.isPlanB){const y=E[1];y.id=i._mediaStreamTrack.id,this.localTrackMap.set(E[0],y)}if(E[0]===Le.LocalVideoTrack&&!Q("DISABLE_DUAL_STREAM_USE_ENCODING")&&yn().supportDualStreamEncoding){const y=this.localTrackMap.get(Le.LocalVideoLowTrack);if(y){const R=i._mediaStreamTrack.clone();y.track._originMediaStreamTrack.stop(),y.track._mediaStreamTrack=R,y.track._originMediaStreamTrack=R,await new Ye((A,D)=>{this.handleReplaceTrack(y.track,A,D,!0)})}}a()}catch(E){l(E)}finally{var m;(m=h)===null||m===void 0||m()}}),G(this,"handleGetRTCStats",i=>{i(this.statsCollector.getRTCStats())}),G(this,"handleGetLocalVideoStats",i=>{i(this.statsCollector.getLocalVideoTrackStats())}),G(this,"handleGetLocalAudioStats",i=>{i(this.statsCollector.getLocalAudioTrackStats())}),G(this,"handleGetRemoteVideoStats",i=>this.statsCollector.getRemoteVideoTrackStats(i.uid)[i.uid]),G(this,"handleGetRemoteAudioStats",i=>this.statsCollector.getRemoteAudioTrackStats(i.uid)[i.uid]),this.store=t,this.statsCollector=n,this.statsCollector.addP2PChannel(this),this.statsUploader=new f8(this.store),this.bindStatsUploaderEvents(),this.mutex=new Ji("P2PChannel-mutex",this.store.clientId),this.isPlanB=!yn().supportUnifiedPlan||Q("CHROME_FORCE_PLAN_B")&&Hl(),this.shouldForwardP2PCreation=Q("FORWARD_P2P_CREATION")&&yn().supportPCSetConfiguration&&kw(),this.shouldForwardP2PCreation&&(this.connection=bS(this.store),this.emit(Et.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection))}async startP2PConnection(t){var n;this.state=kn.New,this._forceTurn=s8(t),k.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] forceTurn: ").concat(this._forceTurn));const i=this.shouldForwardP2PCreation&&((n=this.connection)===null||n===void 0?void 0:n.peerConnectionState)==="closed";if(this.shouldForwardP2PCreation&&!i||(i&&this.connection&&(k.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.resetConnection(this.connection)),this.connection=bS(this.store,t),this.emit(Et.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection)),!this.connection)throw new we(X.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=Q("NEW_ICE_RESTART")?Yl.FIRST_CONNECTION:Yl.OLD_FIRST_CONNECTION,this._isTryConnecting=!0,this._isStartRestartIce=!1,this._iceError=null,this.connection.setConfiguration(t),this.connection.establishPromise}async connect(t){if(!this.connection)throw new we(X.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");Q("ENABLE_PREALLOC_PC")&&this.state===kn.Connected?await this.connection.updateRemoteConnect(t):(this.store.peerConnectionStart(),await this.connection.connect(t),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=kn.Connected)}updateRemoteRTPCapabilities(t){const n=Array.from(this.localTrackMap.entries()).filter(l=>{var u;let[h]=l;return Ke(u=[Le.LocalVideoLowTrack,Le.LocalVideoTrack]).call(u,h)}),i=n.map(l=>{let[,{id:u}]=l;return u}),a=n.map(l=>{let[u]=l;return u});if(this.connection instanceof fl){if(dt.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(a),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(t)}),!Ke(t).call(t,this.store.codec)){const l=["vp9","vp8","h264"].find(u=>Ke(t).call(t,u));l&&(this.store.codec=l,k.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(l,".")))}this.connection.updateRemoteRTPCapabilities(i,t)}}async getEstablishParams(){var t;if(this.connection instanceof fl&&this.connection.peerConnectionState!=="closed"&&Ke(t=[kn.New,kn.Connected]).call(t,this.state))return this.connection.establishPromise}async publishDataChannel(t){if(!this.connection||this.state!==kn.Connected){if(this.state===kn.Disconnected)throw new we(X.UNEXPECTED_ERROR,"PeerConnection already disconnected.");return t.forEach(i=>{var a;Ke(a=this.pendingLocalDataChannels).call(a,i)||this.pendingLocalDataChannels.push(i)}),[]}const n=this.filterTobePublishedDataChannels(t);return n.length===0?[]:(n.forEach(i=>{const a=Date.now();this.store.publish(i.id.toString(),"datachannel",a)}),await this.connection.createDataChannels(this.store.uid,n),n.forEach(i=>{this.localDataChannels.push(i);const a=Date.now();this.store.publish(i.id+"","datachannel",void 0,a)}),t.map(i=>({streamId:i.id,ordered:i.ordered,maxRetransmits:i.maxRetransmits,metadata:i.metadata,channelId:i._originDataChannelId})))}publish(t,n,i){var a=this;return as(function*(){const l=yield vn(a.mutex.lock("From P2PChannel.publish"));try{var u;const h=a.connection&&Ke(u=["disconnected","failed"]).call(u,a.connection.peerConnectionState);if(!a.connection||a.state!==kn.Connected||h){if(a.state===kn.Disconnected)throw new we(X.UNEXPECTED_ERROR,"PeerConnection already disconnected.");a.throwIfTrackTypeNotMatch(t);const m=t.filter(E=>a.pendingLocalTracks.indexOf(E)===-1);return a.pendingLocalTracks=a.pendingLocalTracks.concat(m),void(h&&(a._isWaitPcToRePub=!0))}a.store.pubId=a.store.pubId+1,eo.markPublishStart(a.store.clientId,a.store.pubId);const p=a.filterTobePublishedTracks(t,n,i);if(p.length===0)return void(yield vn(a.tryToUnmuteAudio(t)));yield*C_(v8(a.doPublish(a.connection,p)))}finally{l()}})()}doPublish(t,n){var i=this;return as(function*(){n.forEach(A=>{let{track:D,type:H}=A;const B=Date.now();i.store.publish(D.getTrackId(),H===Le.LocalAudioTrack?"audio":"video",B)}),i.bindLocalTrackEvents(n);const a=n.map(A=>{let{track:D}=A;return D}),l=yield vn(t.send(a,i.store.codec,i.store.audioCodec)),u=(yield vn(l.next())).value,h=i.createGatewayPublishMessage(n,u);let p;try{p=yield h}catch(A){throw l.throw(A),(A==null?void 0:A.code)===X.WS_ABORT&&n.forEach(D=>{let{track:H}=D;i.pendingLocalTracks.indexOf(H)===-1&&i.pendingLocalTracks.push(H)}),i.unbindLocalTrackEvents(n),A}const m=i.mapPubResToRemoteConfig(h,p,a),E=(yield vn(l.next(m))).value;if(i.state===kn.Disconnected)throw new we(X.UNEXPECTED_ERROR,"PeerConnection already disconnected.");Q("ENABLE_VIDEO_SEI");const y=Q("ENABLE_ENCODED_TRANSFORM"),R=Q("ENABLE_AUDIO_METADATA");a.forEach(async A=>{const D=A.getRTCRtpTransceiver();if(!D||!y)return;const{interceptLocalVideoFrame:H,interceptLocalAudioFrame:B}=gS();A.trackMediaType===it.VIDEO?await H(D.sender,A):A.trackMediaType===it.AUDIO&&await B(D.sender,{metadata:R?()=>{const $=A.metadata.shift();return $&&$.value}:void 0})}),n.forEach(A=>{let{type:D}=A;i.statsCollector.addLocalStats(D)}),i.assignLocalTracks(n,E),i.statsUploader.startUploadOutboundStats(),n.forEach(A=>{let{track:D,type:H}=A;const B=Date.now();i.store.publish(D.getTrackId(),H===Le.LocalAudioTrack?"audio":"video",void 0,B)})})()}async updateVideoStreamParameter(t,n){const i=this.localTrackMap.get(n);if(!i||!this.connection)return;if(!(i.track instanceof sr))return k.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");const{track:a}=i,l=function(u,h){const p={};return u.height&&u.width&&(p.scaleResolutionDownBy=LI(u,h)),p.maxFramerate=u.framerate?Ra(u.framerate):void 0,p.maxBitrate=u.bitrate?1e3*u.bitrate:void 0,p}(t,a);if(a._encoderConfig||(a._encoderConfig={}),n!==Le.LocalVideoLowTrack||!Q("DISABLE_DUAL_STREAM_USE_ENCODING")&&yn().supportDualStreamEncoding)l.scaleResolutionDownBy!=null&&(a._encoderConfig.scaleResolutionDownBy=l.scaleResolutionDownBy);else{const u=a._originMediaStreamTrack;if(!u.canvas)return k.warn("[".concat(a.getTrackId(),"] no canvas on track"));(function(h,p){const m=h.canvas;p.width&&(m.width=Ra(p.width)),p.height&&(m.height=Ra(p.height)),p.framerate&&(m.stopCapture&&m.stopCapture(),m.stopCapture=lI(()=>{!m.startCapture&&m.stopCapture&&m.stopCapture(),m.startCapture&&m.startCapture()},Ra(p.framerate)))})(u,t)}l.maxBitrate!=null&&(a._encoderConfig.bitrateMax=l.maxBitrate/1e3),l.maxFramerate!=null&&(a._encoderConfig.frameRate&&typeof a._encoderConfig.frameRate=="object"?a._encoderConfig.frameRate.max=l.maxFramerate:a._encoderConfig.frameRate={max:l.maxFramerate}),k.debug("[".concat(a.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(a._encoderConfig))),await this.connection.updateRtpSenderEncodings(a)}publishLowStream(t){var n=this;return as(function*(){if(!n.connection||n.state!==kn.Connected)return;const i=yield vn(n.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const l=n.localTrackMap.get(Le.LocalVideoTrack);if(!l)throw new we(X.UNEXPECTED_ERROR,"Could not find high stream");if(n.localTrackMap.has(Le.LocalVideoLowTrack))throw new we(X.UNEXPECTED_ERROR,"[".concat(n.store.clientId,"] Can't publish low stream when stream already publish"));const u=[{track:n.getLowVideoTrack(l.track,t),type:Le.LocalVideoLowTrack}];if(yield*C_(v8(n.doPublish(n.connection,u))),l.track.muted||!l.track.enabled){var a;const h=(a=n.localTrackMap.get(Le.LocalVideoLowTrack))===null||a===void 0?void 0:a.id;h!==void 0&&(yield vn(n.connection.muteLocal([h])))}}finally{i()}})()}async republish(){this.pendingLocalTracks.length>0&&(k.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await Wi(this,Et.RequestRePublish,this.pendingLocalTracks),this.emit(Et.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(k.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await Wi(this,Et.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[]),this._isWaitPcToRePub=!1}async reSubscribe(t){for(let n=this.pendingRemoteTracks.length-1;n>=0;n--){const{user:i,kind:a}=this.pendingRemoteTracks[n];(a!==it.AUDIO||i._audio_added_&&i._audioSSRC)&&(a!==it.VIDEO||i._video_added_&&i._videoSSRC)||this.pendingRemoteTracks.splice(n,1)}if(t)await Wi(this,Et.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:n,kind:i}of this.pendingRemoteTracks)await this.subscribe(n,i,i===it.VIDEO?n._videoSSRC:n._audioSSRC);this.pendingRemoteTracks.forEach(n=>{let{user:i}=n;this.emit(Et.MediaReconnectEnd,i.uid)}),this.pendingRemoteTracks=[]}async unpublish(t){if(!this.connection||this.state!==kn.Connected)return void t.forEach(a=>{const l=this.pendingLocalTracks.indexOf(a);l!==-1&&this.pendingLocalTracks.splice(l,1)});const n=this.filterTobeUnpublishedTracks(t);if(n.length===0)return;const i=n.find(a=>a[0]==="videoLowTrack");return i&&i[1].track.close(),this.doUnpublish(this.connection,n)}async unpublishDataChannel(t){if(!this.connection||this.state!==kn.Connected)return void t.forEach(i=>{const a=this.pendingLocalDataChannels.indexOf(i);a!==-1&&this.pendingLocalDataChannels.splice(a,1)});const n=this.filterTobeUnpublishedDataChannels(t);return n.length!==0?(n.forEach(i=>{const a=this.localDataChannels.indexOf(i);a!==-1&&this.localDataChannels.splice(a,1)}),this.localDataChannels.length===0&&await this.connection.stopDataChannels(this.store.uid),n.map(i=>i.id)):void 0}async unpublishLowStream(){if(!this.connection||this.state!==kn.Connected)return;const t=this.localTrackMap.get(Le.LocalVideoLowTrack);if(!t)return;t.track.close();const n=[[Le.LocalVideoLowTrack,t]];return this.doUnpublish(this.connection,n)}async doUnpublish(t,n){const i=this.createGatewayUnpublishMessage(n);return await t.stopSending(n.map(a=>{let[,{id:l}]=a;return l})),this.withdrawLocalTracks(n),this.unbindLocalTrackEvents(n.map(a=>{let[l,{track:u}]=a;return{type:l,track:u}})),n.forEach(a=>{let[l]=a;this.statsCollector.removeLocalStats(l)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadOutboundStats(),i}async subscribeDataChannel(t,n){if(!this.connection||this.state!==kn.Connected)throw new we(X.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");const i=n.filter(a=>{var l;return!((l=this.remoteDataChannelMap.get(t))!==null&&l!==void 0&&l.get(a.id))});if(i.length!==0)return await this.connection.createDataChannels(t.uid,i),i.forEach(a=>{var l;this.remoteDataChannelMap.has(t)?(l=this.remoteDataChannelMap.get(t))===null||l===void 0||l.set(a.id,a):this.remoteDataChannelMap.set(t,new Map([[a.id,a]]));const u=this.pendingRemoteDataChannels.findIndex(h=>{let{user:p,id:m}=h;return p.uid===t.uid&&m===a.id});u!==-1&&this.pendingRemoteDataChannels.splice(u,1)}),i.map(a=>a.id)}async subscribe(t,n,i,a,l){var u;if(!this.connection||this.state!==kn.Connected)throw new we(X.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if((u=this.remoteUserMap.get(t))!==null&&u!==void 0&&u.has(n))return;let h,p,m;const E=this.connection.getPreMedia(i);if(E)k.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] preSSRCMap has ssrcId: ").concat(i,", no need to send sub to gateway.")),m=E.transceiver,h=E.track,p=E.id;else if(l){const A=l.find(H=>{let{stream_type:B}=H;return B===n});if(!A)throw new we(X.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(n," for user: ").concat(t.uid," because subscribe answer from gateway does not contain stream_type: ").concat(n,"."));const D=await this.connection.receive(n,A.ssrcs,String(t._uintid),A.attributes);this.connection instanceof fl&&(m=D.transceiver),h=D.track,p=D.id}else{const A=await this.connection.receive(n,[{ssrcId:i,rtx:a}],String(t._uintid),void 0);this.connection instanceof fl&&(m=A.transceiver),h=A.track,p=A.id}if(n===it.AUDIO?(t._audioTrack?t._audioTrack._updateOriginMediaStreamTrack(h):(t._audioTrack=new tp(h,t.uid,t._uintid,this.store),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(t._audioTrack.getTrackId()))),m&&t._audioTrack._updateRtpTransceiver(m),this.bindRemoteTrackEvents(t,t._audioTrack)):(t._videoTrack?t._videoTrack._updateOriginMediaStreamTrack(h):(t._videoTrack=new ep(h,t.uid,t._uintid,this.store),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(t._videoTrack.getTrackId()))),m&&t._videoTrack._updateRtpTransceiver(m),this.bindRemoteTrackEvents(t,t._videoTrack)),m&&Q("ENABLE_ENCODED_TRANSFORM")){const{interceptRemoteVideoFrame:A,interceptRemoteAudioFrame:D}=gS();n==it.VIDEO?await A(m.receiver,{onSei:Q("ENABLE_VIDEO_SEI")&&(H=>{var B;return(B=t._videoTrack)===null||B===void 0?void 0:B._onSei(H)})}):n==it.AUDIO&&await D(m.receiver,{enableTopn:!!Q("ENABLE_AUDIO_TOPN"),enableMetadata:!!Q("ENABLE_AUDIO_METADATA"),onMetadata:H=>{this.safeEmit(Et.AudioMetadata,H)}})}const y=this.remoteUserMap.get(t);y?y.set(n,p):this.remoteUserMap.set(t,new Map([[n,p]])),this.statsCollector.addRemoteStats(t.uid),this.statsUploader.startUploadInboundStats();const R=this.pendingRemoteTracks.findIndex(A=>{let{user:D,kind:H}=A;return D.uid===t.uid&&n===H});R!==-1&&(this.pendingRemoteTracks.splice(R,1),this.emit(Et.MediaReconnectEnd,t.uid))}async massSubscribe(t){return this.massSubscribeNoLock(t)}async massSubscribeNoLock(t){if(!this.connection||this.state!==kn.Connected)throw new we(X.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");t=t.filter(l=>{var u;let{user:h,mediaType:p}=l;return!((u=this.remoteUserMap.get(h))!==null&&u!==void 0&&u.has(p))});const n=[],i=new Map;t.forEach(l=>{if(!this.connection)return;const u=this.connection.getPreMedia(l.ssrcId);u?i.set(l.ssrcId,u):n.push(l)});const a=await this.connection.batchReceive(n.map(l=>{let{user:u,mediaType:h,ssrcId:p,rtxSsrcId:m}=l;return{kind:h,ssrcMsg:[{ssrcId:p,rtx:m}],mslabel:String(u._uintid)}}));n.forEach((l,u)=>{i.set(l.ssrcId,a[u])});for(const{user:l,mediaType:u,ssrcId:h}of t){const p=i.get(h);if(!p)return void k.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] cannot find ").concat(l.uid," subscribe data,").concat(u,", ").concat(h));const{track:m,id:E,transceiver:y}=p;if(y&&Q("ENABLE_ENCODED_TRANSFORM")){const{interceptRemoteVideoFrame:D,interceptRemoteAudioFrame:H}=gS();u==it.VIDEO?await D(y.receiver,{onSei:Q("ENABLE_VIDEO_SEI")&&(B=>{var $;return($=l._videoTrack)===null||$===void 0?void 0:$._onSei(B)})}):u==it.AUDIO&&await H(y.receiver,{enableTopn:!!Q("ENABLE_AUDIO_TOPN"),enableMetadata:!!Q("ENABLE_AUDIO_METADATA"),onMetadata:B=>{this.safeEmit(Et.AudioMetadata,B)}})}if(u===it.AUDIO?(l._audioTrack?l._audioTrack._updateOriginMediaStreamTrack(m):(l._audioTrack=new tp(m,l.uid,l._uintid,this.store),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(l._audioTrack.getTrackId()))),y&&l._audioTrack._updateRtpTransceiver(y),this.bindRemoteTrackEvents(l,l._audioTrack)):(l._videoTrack?l._videoTrack._updateOriginMediaStreamTrack(m):(l._videoTrack=new ep(m,l.uid,l._uintid,this.store),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(l._videoTrack.getTrackId()))),y&&l._videoTrack._updateRtpTransceiver(y),this.bindRemoteTrackEvents(l,l._videoTrack)),Q("ENABLE_VIDEO_SEI")&&y){const{interceptRemoteVideoFrame:D,interceptRemoteAudioFrame:H}=gS();u==it.VIDEO?await D(y.receiver,{onSei:B=>{var $;($=l._videoTrack)===null||$===void 0||$._onSei(B)}}):u==it.AUDIO&&await H(y.receiver)}const R=this.remoteUserMap.get(l);R?R.set(u,E):this.remoteUserMap.set(l,new Map([[u,E]])),this.statsCollector.addRemoteStats(l.uid),this.statsUploader.startUploadInboundStats();const A=this.pendingRemoteTracks.findIndex(D=>{let{user:H,kind:B}=D;return H.uid===l.uid&&u===B});A!==-1&&(this.pendingRemoteTracks.splice(A,1),this.emit(Et.MediaReconnectEnd,l.uid))}}async unsubscribe(t,n,i){const a=this.pendingRemoteTracks.filter(h=>{let{user:p,kind:m}=h;return n!==void 0?p.uid===t.uid&&n===m:p.uid===t.uid});if(a.forEach(h=>{const p=this.pendingRemoteTracks.indexOf(h);this.pendingRemoteTracks.splice(p,1)}),this.connection&&this.state===kn.Connected||i||a.forEach(h=>{let{kind:p}=h;var m;if(p===it.AUDIO)(m=t._audioTrack)===null||m===void 0||m._destroy(),t._audioTrack=void 0;else if(p===it.VIDEO){var E;(E=t._videoTrack)===null||E===void 0||E._destroy(),t._videoTrack=void 0}}),!this.connection||this.state!==kn.Connected)return;const l=this.filterTobeUnSubscribedTracks(t,n);if(l.length===0)return;await this.connection.stopReceiving(l.map(h=>{let[,{id:p}]=h;return p}));const u=this.createUnsubscribeMessage(l);return this.withdrawRemoteTracks(l),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),l.forEach(h=>{let[p,{kind:m}]=h;var E,y;if(m===it.VIDEO&&p._videoSSRC&&((E=this.connection)===null||E===void 0||E.setStatsRemoteVideoIsReady(p._videoSSRC,!1)),m===it.VIDEO)this.unbindRemoteTrackEvents(p._videoTrack),i||((y=p._videoTrack)===null||y===void 0||y._destroy(),p._videoTrack=void 0);else if(m===it.AUDIO){var R;this.unbindRemoteTrackEvents(p._audioTrack),!i&&((R=p._audioTrack)===null||R===void 0||R._destroy(),p._audioTrack=void 0)}}),u}async unsubscribeDataChannel(t,n){if(n.forEach(l=>{const u=this.pendingRemoteDataChannels.findIndex(h=>h.id===l.id);u!==-1&&this.pendingRemoteDataChannels.splice(u,1)}),!this.connection)return;const i=this.filterTobeUnSubscribedDataChannels(t,n);if(i.length===0)return;n.forEach(l=>{l._close()});const a=this.remoteDataChannelMap.get(t);return i.forEach(l=>{a&&a.delete(l.id)}),a&&a.size===0&&(this.remoteDataChannelMap.delete(t),await this.connection.stopDataChannels(t.uid)),i.map(l=>l.id)}async massUnsubscribe(t){return this.massUnsubscribeNoLock(t)}async massUnsubscribeNoLock(t){let n=[];for(const{user:l,mediaType:u}of t){const h=this.pendingRemoteTracks.filter(p=>{let{user:m,kind:E}=p;return u!==void 0?m.uid===l.uid&&u===E:m.uid===l.uid});h.forEach(p=>{const m=this.pendingRemoteTracks.indexOf(p);this.pendingRemoteTracks.splice(m,1)}),n=n.concat(h)}if(!this.connection||this.state!==kn.Connected)return void n.forEach(l=>{let{user:u,kind:h}=l;var p;if(h===it.AUDIO)(p=u._audioTrack)===null||p===void 0||p._destroy(),u._audioTrack=void 0;else if(h===it.VIDEO){var m;(m=u._videoTrack)===null||m===void 0||m._destroy(),u._videoTrack=void 0}});const i=pc(t).call(t,(l,u)=>{let{user:h,mediaType:p}=u;const m=this.filterTobeUnSubscribedTracks(h,p);return l.concat(m)},[]);if(i.length===0)return;await this.connection.stopReceiving(i.map(l=>{let[,{id:u}]=l;return u}));const a=this.createUnsubscribeAllMessage(i);return this.withdrawRemoteTracks(i),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),i.forEach(l=>{let[u,{kind:h}]=l;var p,m;if(h===it.VIDEO&&u._videoSSRC&&((p=this.connection)===null||p===void 0||p.setStatsRemoteVideoIsReady(u._videoSSRC,!1)),h===it.VIDEO)this.unbindRemoteTrackEvents(u._videoTrack),(m=u._videoTrack)===null||m===void 0||m._destroy(),u._videoTrack=void 0;else if(h===it.AUDIO){var E;this.unbindRemoteTrackEvents(u._audioTrack),(E=u._audioTrack)===null||E===void 0||E._destroy(),u._audioTrack=void 0}}),a}isPreSubScribe(t){return!this.connection||this.state!==kn.Connected?!1:!!this.connection.getPreMedia(t)}async muteRemote(t,n){if(!this.connection)return;const i=this.remoteUserMap.get(t);if(!i)return void k.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(t.uid,"."));if(!i.get(n))return void k.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(t.uid," media type ").concat(n,"."));const a=n===it.VIDEO?t._videoSSRC:t._audioSSRC;a!==void 0&&this.connection.setStatsRemoteVideoIsReady(a,!1)}async unmuteRemote(t,n){return this.unmuteRemoteNoLock(t,n)}async unmuteRemoteNoLock(t,n){if(!this.connection)return;const i=this.remoteUserMap.get(t);if(!i)return void k.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(t.uid,"."));i.get(n)||k.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(t.uid," media type ").concat(n,"."))}addAudioMetadata(t){const n=this.localTrackMap.get(Le.LocalAudioTrack),i=n&&n.track;i&&i.metadata.push(t)}getAllTracks(t){const n=this.localTrackMap.get(Le.LocalAudioTrack);if((n==null?void 0:n.track)instanceof di){const i=n.track;return Array.from(this.localTrackMap.entries()).filter(a=>{let[l]=a;return l!==Le.LocalAudioTrack}).filter(a=>{let[l]=a;return!(t&&l===Le.LocalVideoLowTrack)}).map(a=>{let[,{track:l}]=a;return l}).concat(i.trackList)}return Array.from(this.localTrackMap.entries()).filter(i=>{let[a]=i;return!(t&&a===Le.LocalVideoLowTrack)}).map(i=>{let[,{track:a}]=i;return a})}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(t,n,i,a,l){if(t){const h=this.localTrackMap.get(Le.LocalAudioTrack),p=a?this.localTrackMap.get(Le.LocalVideoLowTrack):this.localTrackMap.get(Le.LocalVideoTrack);dt.publish(this.store.sessionId,{eventElapse:eo.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:t,ec:n,audioName:h==null?void 0:h.track.getTrackLabel(),videoName:p==null?void 0:p.track.getTrackLabel(),screenshare:(p==null?void 0:p.track._hints.indexOf(Jn.SCREEN_TRACK))!==-1,audio:!!h,video:!!p,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}else{var u;i||(i=[]);const h=i.find(m=>m instanceof Nr),p=a?(u=this.localTrackMap.get(Le.LocalVideoTrack))===null||u===void 0?void 0:u.track:i.find(m=>m instanceof sr);dt.publish(this.store.sessionId,{eventElapse:eo.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:t,ec:n,audioName:h==null?void 0:h.getTrackLabel(),videoName:p==null?void 0:p.getTrackLabel(),screenshare:(p==null?void 0:p._hints.indexOf(Jn.SCREEN_TRACK))!==-1,audio:!!h,video:!!p,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}}reportSubscribeEvent(t,n,i,a){const l=a===it.VIDEO?i._videoSSRC:i._audioSSRC;l&&dt.subscribe(this.store.sessionId,{succ:t,ec:n,video:a===it.VIDEO,audio:a===it.AUDIO,peerid:i.uid,subscribeRequestid:l,p2pid:this.store.p2pId,eventElapse:eo.measureFromSubscribeStart(this.store.clientId,l),preSsrc:this.isPreSubScribe(l)})}reset(){k.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new Ji("P2PChannel-mutex",this.store.clientId),this.connection&&(this.resetConnection(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=bS(this.store),this.emit(Et.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.statsUploader.stopUploadBaseStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const t=this.localTrackMap.get(Le.LocalAudioTrack);if((t==null?void 0:t.track)instanceof di){if(t.track.trackList.length>0){const n=t.track;t.track.trackList.forEach(i=>{n.removeAudioTrack(i)})}t.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=kn.Disconnected}getStats(){var t;return(t=this.connection)===null||t===void 0?void 0:t.getStats()}getRemoteVideoIsReady(t){var n;return((n=this.connection)===null||n===void 0?void 0:n.getRemoteVideoIsReady(t))||!1}getLocalAudioVolume(){const t=this.localTrackMap.get(Le.LocalAudioTrack);if(t)return t.track.getVolumeLevel()}getLocalVideoSize(){const t=this.localTrackMap.get(Le.LocalVideoTrack);if(t)return{width:t.track.videoWidth||0,height:t.track.videoHeight||0}}getEncoderConfig(t){const n=this.localTrackMap.get(t);return n&&n.track instanceof sr||n&&n.track instanceof Nr?n.track._encoderConfig:void 0}getLocalMedia(t){return this.localTrackMap.get(t)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(t,n){if(!t)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(t);return!!i&&(!n||i.has(n))}async hasRemoteMediaWithLock(t,n){if(!t)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(t);return!!i&&(!n||i.has(n))}getRemoteMedia(t){var n;const i=Array.from(Va(n=this.remoteUserMap).call(n)).find(a=>a.uid===t);return i?{audioTrack:i.audioTrack,audioSSRC:i._audioSSRC,videoTrack:i.videoTrack,videoSSRC:i._videoSSRC}:{}}getAudioLevels(){let t=Array.from(this.remoteUserMap.entries()).map(i=>{let[a]=i;return{uid:a.uid,level:a.audioTrack?100*a.audioTrack._source.getAccurateVolumeLevel():0}});const n=this.localTrackMap.get(Le.LocalAudioTrack);return n&&t.push({level:100*n.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),t=a0(t).call(t,(i,a)=>i.level-a.level),t}async disconnectForReconnect(){this.connection&&(k.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=kn.Reconnecting,Q("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(t=>{let[n]=t;var i;n._videoTrack&&n._videoTrack._player&&((i=n._videoTrack._player.getVideoElement())===null||i===void 0||i.pause(),n._videoTrack._player.isKeepLastFrame=!0,n._videoTrack._originMediaStreamTrack.stop())}),this.resetConnection(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=bS(this.store),this.emit(Et.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection)),this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(t=>{var n;let[i,{track:a}]=t;switch(i){case Le.LocalVideoTrack:Ke(n=a._hints).call(n,Jn.LOW_STREAM)?a.close():this.pendingLocalTracks.push(a);break;case Le.LocalAudioTrack:a instanceof di?this.pendingLocalTracks=this.pendingLocalTracks.concat(a.trackList):this.pendingLocalTracks.push(a);case Le.LocalVideoLowTrack:}}),this.emit(Et.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(t=>{let[n,i]=t;Array.from(Va(i).call(i)).forEach(a=>{this.setPendingRemoteMedia(n,a)}),this.emit(Et.MediaReconnectStart,n.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.localDataChannels.length!==0&&(this.localDataChannels.forEach(t=>{this.pendingLocalDataChannels.push(t)}),this.localDataChannels.length=0),this.remoteDataChannelMap.size!==0&&(Array.from(this.remoteDataChannelMap.entries()).forEach(t=>{let[n,i]=t;Array.from(Va(i).call(i)).forEach(a=>{this.setPendingRemoteDataChannel(n,a)})}),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),k.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(t,n){for(const i of this.pendingRemoteDataChannels){const{user:a,id:l}=i;if((t instanceof zu?t.uid:t)===a.uid&&l===n)return!0}return!1}setPendingRemoteDataChannel(t,n){this.hasPendingRemoteDataChannel(t,n)||this.pendingRemoteDataChannels.push({user:t,id:n})}hasPendingRemoteMedia(t,n){for(const i of this.pendingRemoteTracks){const{user:a,kind:l}=i;if((t instanceof zu?t.uid:t)===a.uid&&n===l)return!0}return!1}setPendingRemoteMedia(t,n){this.hasPendingRemoteMedia(t,n)||this.pendingRemoteTracks.push({user:t,kind:n})}restartICE(t){var n=this;return as(function*(){if(!n.connection||n.state!==kn.Connected)return;const i=yield vn(n.mutex.lock("From P2PChannel.restartICE"));let a;try{a=yield vn(n.connection.restartICE(t));const u=yield vn(a.next());if(u.done)return;const h=u.value,p=yield h;switch(JI(n.connection)&&n.reportPCStats(Date.now(),!1,n._pcStatsUploadType),t){case Zi.UDP_TCP_RELAY:n._pcStatsUploadType=Yl.UDP_TCP_RESTART;break;case Zi.TCP_RELAY:n._pcStatsUploadType=Yl.TCP_RESTART;break;case Zi.RELAY:n._pcStatsUploadType=Yl.RELAY_RESTART;break;default:n._pcStatsUploadType=Yl.OLD_RESTART}n._isTryConnecting=!0,a.next(p)}catch(u){var l;(l=a)===null||l===void 0||l.throw(u)}finally{i()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const t=this.connection.getStats(),n=this.localTrackMap.get(Le.LocalVideoTrack),i=this.localTrackMap.get(Le.LocalAudioTrack),a=t.videoSend.find(D=>D.ssrc===(n==null?void 0:n.ssrcs[0].ssrcId)),l=t.audioSend.find(D=>D.ssrc===(i==null?void 0:i.ssrcs[0].ssrcId));if(!a||!l)return 1;const u=Ua(this,Et.NeedSignalRTT),h=a?a.rttMs:void 0,p=l?l.rttMs:void 0,m=h&&p?(h+p)/2:h||p,E=(m&&u?(m+u)/2:m||u)||0,y=100*t.sendPacketLossRate*.7/50+.3*E/1500,R=y<.17?1:y<.36?2:y<.59?3:y<.1?4:5,A=n==null?void 0:n.track;if(A&&A._encoderConfig&&A._hints.indexOf(Jn.SCREEN_TRACK)===-1){const D=A._encoderConfig.bitrateMax,H=t.bitrate.actualEncoded;if(D&&H){const B=(1e3*D-H)/(1e3*D);return J5[B<.15?0:B<.3?1:B<.45?2:B<.6?3:4][R]}}return R}getDownlinkNetworkQuality(){if(!this.connection)return 0;const t=this.connection.getStats();let n=0;return Array.from(this.remoteUserMap.entries()).forEach(i=>{let[a]=i;const l=a._audioSSRC,u=a._videoSSRC,h=t.audioRecv.find(H=>H.ssrc===l),p=t.videoRecv.find(H=>H.ssrc===u);if(!h&&!p)return void(n+=1);const m=Ua(this,Et.NeedSignalRTT),E=t.rtt,y=(E&&m?(E+m)/2:E||m)||0,R=h?h.jitterMs:void 0,A=t.recvPacketLossRate;let D=.7*A*100/50+.3*y/1500;R&&(D=.6*A*100/50+.2*y/1500+.2*R/400),n+=D<.1?1:D<.17?2:D<.36?3:D<.59?4:5}),this.remoteUserMap.size>0?Math.round(n/this.remoteUserMap.size):n}async muteLocalTrack(t){return new Ye((n,i)=>{this.handleMuteLocalTrack(t,n,i)})}async replaceTrack(t,n){var i;if(k.debug("[".concat(this.store.clientId,"] P2PChannel replaceTrack from [").concat(t.getTrackId(),"] to [").concat(n.getTrackId(),"]")),!this.connection||this.state!==kn.Connected)return;const a=Array.from(this.localTrackMap.entries()).find(u=>{let[,{track:h}]=u;return t===h});if(!a)return;const l=a[0];if(t!==n&&(this.unbindLocalTrackEvents([{track:t,type:l}]),this.bindLocalTrackEvents([{track:n,type:l}]),a[1].track=n),await((i=this.connection)===null||i===void 0?void 0:i.replaceTrack(n,a[1].id)),this.isPlanB){const u=a[1];u.id=n._mediaStreamTrack.id,this.localTrackMap.set(l,u)}if(l===Le.LocalVideoTrack&&!Q("DISABLE_DUAL_STREAM_USE_ENCODING")&&yn().supportDualStreamEncoding){const u=this.localTrackMap.get(Le.LocalVideoLowTrack);if(u){const h=t._mediaStreamTrack.clone();u.track._originMediaStreamTrack.stop(),u.track._mediaStreamTrack=h,u.track._originMediaStreamTrack=h,await new Ye((p,m)=>{this.handleReplaceTrack(u.track,p,m,!0)})}}}filterTobePublishedTracks(t,n,i){const a=[],l=this.getAllTracks();t=jf(t=t.filter(m=>l.indexOf(m)===-1));let u,h=!1;const p=this.localTrackMap.get(Le.LocalAudioTrack);for(const m of t){if(m instanceof sr&&(this.localTrackMap.has(Le.LocalVideoTrack)||h?new we(X.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(a.push({track:m,type:Le.LocalVideoTrack}),h=!0),n)){const E=this.getLowVideoTrack(m,i);a.push({track:E,type:Le.LocalVideoLowTrack})}if(m instanceof Nr)if(p){const E=p.track;if(E instanceof di)YI([m]),E.addAudioTrack(m),this.bindLocalAudioTrackEvents(m,!0);else{const y=XI([E,m]);k.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(y.getTrackId(),"]")),this.replaceTrack(E,y)}}else u instanceof di?(YI([m]),u.addAudioTrack(m)):u||!m._useAudioElement&&yn().webAudioMediaStreamDest&&!m._bypassWebAudio?u=XI(u?[m,u]:[m]):u=m}return u&&(k.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will send audioTrack [").concat(u.getTrackId(),"]")),a.push({track:u,type:Le.LocalAudioTrack})),a}filterTobeUnpublishedTracks(t){const n=[],i=this.getAllTracks();t=jf(t=t.filter(a=>i.indexOf(a)!==-1));for(const a of t){if(a instanceof Nr){const l=this.localTrackMap.get(Le.LocalAudioTrack);if(!l)continue;l.track instanceof di?(l.track.removeAudioTrack(a),this.unbindLocalAudioTrackEvents(a),l.track.trackList.length===0&&(n.push([Le.LocalAudioTrack,l]),l.track.close())):n.push([Le.LocalAudioTrack,l])}if(a instanceof sr){const l=this.localTrackMap.get(Le.LocalVideoTrack);if(!l)continue;n.push([Le.LocalVideoTrack,l]);const u=this.localTrackMap.get(Le.LocalVideoLowTrack);u&&n.push([Le.LocalVideoLowTrack,u])}}return n}filterTobePublishedDataChannels(t){return t=(t=jf(t)).filter(n=>this.localDataChannels.findIndex(i=>i.id===n.id)===-1)}filterTobeUnpublishedDataChannels(t){return t=(t=(t=jf(t)).filter(n=>this.localDataChannels.indexOf(n)!==-1)).filter(n=>n._originDataChannel)}bindLocalTrackEvents(t){t.forEach(n=>{let{track:i,type:a}=n;switch(a){case Le.LocalVideoTrack:i.addListener(at.GET_STATS,this.handleGetLocalVideoStats),i.addListener(at.GET_RTC_STATS,this.handleGetRTCStats),i.addListener(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(at.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.addListener(at.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),i.addListener(at.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.addListener(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Le.LocalAudioTrack:this.bindLocalAudioTrackEvents(i);case Le.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(t,n){t instanceof di?t.trackList.forEach(i=>{i.addListener(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(at.GET_STATS,this.handleGetLocalAudioStats),i.addListener(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(t.addListener(at.GET_STATS,this.handleGetLocalAudioStats),t.addListener(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),n||(t.addListener(at.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(at.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(t){t||(t=Array.from(this.localTrackMap.entries()).map(n=>{let[i,{track:a}]=n;return{track:a,type:i}})),t.forEach(n=>{let{track:i,type:a}=n;switch(a){case Le.LocalVideoTrack:i.off(at.GET_STATS,this.handleGetLocalVideoStats),i.off(at.GET_RTC_STATS,this.handleGetRTCStats),i.off(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.off(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.off(at.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.off(at.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),i.off(at.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.off(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.off(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Le.LocalAudioTrack:this.unbindLocalAudioTrackEvents(i);case Le.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(t){t instanceof di?t.trackList.forEach(n=>{n.off(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(at.GET_STATS,this.handleGetLocalAudioStats),n.off(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(t.off(at.GET_STATS,this.handleGetLocalAudioStats),t.off(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(at.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(at.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),t.off(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(t,n){n instanceof ep&&n.addListener(at.GET_STATS,i=>{i(this.handleGetRemoteVideoStats(t))}),n instanceof tp&&n.addListener(at.GET_STATS,i=>{i(this.handleGetRemoteAudioStats(t))})}unbindRemoteTrackEvents(t){t&&t.removeAllListeners(at.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(t=>{let[n,i]=t;i.has(it.AUDIO)&&this.unbindRemoteTrackEvents(n._audioTrack),i.has(it.VIDEO)&&this.unbindRemoteTrackEvents(n._videoTrack)})}createGatewayPublishMessage(t,n){return t.map((i,a)=>{var l;let u,h,{track:p,type:m}=i;switch(m){case Le.LocalAudioTrack:u=Mn.Audio,h={dtx:p instanceof Y_&&p._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case Le.LocalVideoTrack:u=Ke(l=p._hints).call(l,Jn.SCREEN_TRACK)?Mn.Screen:Mn.High,h=ml(ml({},m6(p)),{},{codec:this.store.codec,svc_mode:dS()});break;case Le.LocalVideoLowTrack:u=Mn.Low,h=ml(ml({},m6(p)),{},{codec:this.store.codec,svc_mode:dS()})}return{stream_type:u,attributes:h,ssrcs:n[a]}})}createGatewayUnpublishMessage(t){return t.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:p}]=n;switch(l){case Le.LocalVideoTrack:a=Ke(i=u._hints).call(i,Jn.SCREEN_TRACK)?Mn.Screen:Mn.High;break;case Le.LocalAudioTrack:a=Mn.Audio;break;case Le.LocalVideoLowTrack:a=Mn.Low}return{stream_type:a,ssrcs:h,mid:p}})}assignLocalTracks(t,n){t.forEach((i,a)=>{let{track:l,type:u}=i;this.localTrackMap.set(u,{track:l,id:n[a].id,ssrcs:n[a].localSSRC})})}withdrawLocalTracks(t){t.forEach(n=>{let[i]=n;this.localTrackMap.delete(i)})}bindConnectionEvents(t){t.onConnectionStateChange=async n=>{if(k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(n,")")),this.emit(Et.PeerConnectionStateChange,n),n==="connecting"&&t instanceof fl&&!Tr()&&Q("FIRST_TCP_CANDIDATE")&&window.setTimeout(()=>{n==="connecting"&&t.extendCandidate()},Q("FIRST_TCP_CANDIDATE_INTERVAL")),n!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),n==="connected"&&(this._restartTimer&&(window.clearTimeout(this._restartTimer),this._restartTimer=void 0),t instanceof fl&&p8(t,!0),this._isTryConnecting&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isTryConnecting=!1,this._isStartRestartIce=!1,this._pcStatsUploadType=Yl.DISCONNECTED_OR_FAILED,Ua(this,Et.QueryClientConnectionState)==="CONNECTED"&&this._isWaitPcToRePub)){const i=this.pendingLocalTracks.map(l=>l.getTrackId()),a=this.pendingLocalDataChannels.map(l=>"dc_".concat(l.id));dt.reportApiInvoke(this.store.sessionId,{name:ei.REPUB_AFTER_PC_CONNECTED,options:i.concat(a),tag:wr.TRACER}).onSuccess(),this.republish()}if(Q("NEW_ICE_RESTART")&&t instanceof fl&&!Tr()&&!this._forceTurn){if(Ke(c6).call(c6,n)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const i=l=>{JI(t)&&(k.debug("[".concat(this.store.clientId,"] [P2PChannel] try to restartICE, type is ").concat(l)),Ua(this,Et.QueryClientConnectionState)==="CONNECTED"&&this.emit(Et.RequestRestartICE,l))},a=()=>{JI(t)&&(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),k.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout(()=>this.emit(Et.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())};return void(this._restartTimer=window.setTimeout(()=>{m8(t,i,a)},800))}}else{if(n==="disconnected"&&t.iceConnectionState==="disconnected")return setTimeout(()=>{t.iceConnectionState==="disconnected"&&Q("ICE_RESTART")&&Ua(this,Et.QueryClientConnectionState)==="CONNECTED"&&this.emit(Et.RequestRestartICE)},800),void setTimeout(()=>{t.peerConnectionState==="disconnected"&&(k.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isTryConnecting=!1,setTimeout(()=>this.emit(Et.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);n==="failed"&&(k.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),setTimeout(()=>this.emit(Et.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())}},t.onICEConnectionStateChange=n=>{n!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(n,")")),dt.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:n,tag:wr.TRACER}).onSuccess(),this.emit(Et.IceConnectionStateChange,n)},t.onICETransportStateChange=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(n,")"))},t.onDTLSTransportStateChange=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(n,")"))},t.onDTLSTransportError=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(n,")"))},t.onFirstAudioDecoded=n=>{var i;const a=Array.from(Va(i=this.remoteUserMap).call(i)).find(u=>u._audioSSRC===n);var l;a&&(this.store.subscribe(a.uid,"audio",void 0,void 0,void 0,Date.now()),(l=a.audioTrack)===null||l===void 0||l.emit(Yf.FIRST_FRAME_DECODED),dt.firstRemoteFrame(this.store.sessionId,_i.FIRST_AUDIO_DECODE,hr.FIRST_AUDIO_DECODE,{peer:a._uintid,subscribeElapse:eo.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId}))},t.onFirstAudioReceived=n=>{var i;const a=Array.from(Va(i=this.remoteUserMap).call(i)).find(l=>l._audioSSRC===n);a&&dt.firstRemoteFrame(this.store.sessionId,_i.FIRST_AUDIO_RECEIVED,hr.FIRST_AUDIO_RECEIVED,{peer:a._uintid,subscribeElapse:eo.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId})},t.onFirstVideoDecoded=(n,i,a)=>{this.reportVideoFirstFrameDecoded(n,i,a)},t.onFirstVideoReceived=n=>{var i;const a=Array.from(Va(i=this.remoteUserMap).call(i)).find(l=>l._videoSSRC===n);a&&dt.firstRemoteFrame(this.store.sessionId,_i.FIRST_VIDEO_RECEIVED,hr.FIRST_VIDEO_RECEIVED,{peer:a._uintid,subscribeElapse:eo.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId})},t.onSelectedLocalCandidateChanged=(n,i)=>{const a=n.candidateType==="relay",l=i.candidateType==="relay";i.candidateType!=="unknown"&&a===l||this.emit(Et.ConnectionTypeChange,a),k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(ju(i))," -> ").concat(JSON.stringify(ju(n)),")"))},t.onSelectedRemoteCandidateChanged=(n,i)=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(ju(i))," -> ").concat(JSON.stringify(ju(n)),")"))},t.onFirstVideoDecodedTimeout=n=>{this.reportVideoFirstFrameDecoded(n,void 0,void 0,!0)},t.getLocalVideoStats=()=>{const n=this.statsCollector.getLocalVideoTrackStats(),i=this.statsCollector.getRTCStats();return ml(ml({},n),i)},t.onICECandidateError=n=>{this._iceError=n}}resetConnection(t){t instanceof fl&&function(n){pp.delete(n.id),p8(n)}(t),t.close(),this.emit(Et.PeerConnectionStateChange,"closed"),function(n){n.onConnectionStateChange=void 0,n.onICEConnectionStateChange=void 0,n.onICETransportStateChange=void 0,n.onDTLSTransportStateChange=void 0,n.onDTLSTransportError=void 0,n.onFirstAudioDecoded=void 0,n.onFirstAudioReceived=void 0,n.onFirstVideoDecoded=void 0,n.onFirstVideoReceived=void 0,n.onSelectedLocalCandidateChanged=void 0,n.onSelectedRemoteCandidateChanged=void 0,n.onFirstVideoDecodedTimeout=void 0,n.getLocalVideoStats=void 0}(t),this._isWaitPcToRePub=!1}filterTobeMutedTracks(t){const n=[];if(this.getAllTracks().indexOf(t)===-1)return n;const i=this.localTrackMap.get(Le.LocalAudioTrack);if(t instanceof Nr&&(i==null?void 0:i.track)instanceof di)return i.track.isActive||n.push([Le.LocalAudioTrack,i]),n;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:u}]=l;return t===u});if(a&&(n.push(a),a[0]===Le.LocalVideoTrack)){const l=this.localTrackMap.get(Le.LocalVideoLowTrack);l&&n.push([Le.LocalVideoLowTrack,l])}return n}filterTobeUnmutedTracks(t){const n=[],i=this.localTrackMap.get(Le.LocalAudioTrack);if(t instanceof Nr&&(i==null?void 0:i.track)instanceof di)return i.track.isActive&&n.push([Le.LocalAudioTrack,i]),n;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:u}]=l;return t===u});if(a)if(a[0]===Le.LocalVideoTrack){n.push(a);const l=this.localTrackMap.get(Le.LocalVideoLowTrack);l&&n.push([Le.LocalVideoLowTrack,l])}else n.push(a);return n}createMuteMessage(t){return t.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:p}]=n;switch(l){case Le.LocalAudioTrack:a=Mn.Audio;break;case Le.LocalVideoTrack:a=Ke(i=u._hints).call(i,Jn.SCREEN_TRACK)?Mn.Screen:Mn.High;break;case Le.LocalVideoLowTrack:a=Mn.Low}return{stream_type:a,ssrcs:h,mid:p}})}createUnmuteMessage(t){return t.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:p}]=n;switch(l){case Le.LocalAudioTrack:a=Mn.Audio;break;case Le.LocalVideoTrack:a=Ke(i=u._hints).call(i,Jn.SCREEN_TRACK)?Mn.Screen:Mn.High;break;case Le.LocalVideoLowTrack:a=Mn.Low}return{stream_type:a,ssrcs:h,mid:p}})}filterTobeUnSubscribedTracks(t,n){const i=[],a=this.remoteUserMap.get(t);if(!a)return i;if(n){const l=a.get(n);if(!l)return i;i.push([t,{kind:n,id:l}])}else Array.from(a.entries()).forEach(l=>{let[u,h]=l;i.push([t,{kind:u,id:h}])});return i}filterTobeUnSubscribedDataChannels(t,n){const i=[];return n.forEach(a=>{var l;(l=this.remoteDataChannelMap.get(t))!==null&&l!==void 0&&l.has(a.id)&&i.push(a)}),i}createUnsubscribeMessage(t){const n=[];return t.forEach(i=>{let[a,{kind:l,id:u}]=i;switch(l){case it.VIDEO:return void(a._videoSSRC&&n.push({stream_type:it.VIDEO,ssrcId:a._videoSSRC}));case it.AUDIO:return void(a._audioSSRC&&n.push({stream_type:it.AUDIO,ssrcId:a._audioSSRC}))}}),n}createUnsubscribeAllMessage(t){const n=new Map;return t.forEach(i=>{let[a,{kind:l}]=i;if(n.has(a)){let u=n.get(a);l===it.VIDEO?u|=Si.Video:u|=Si.Audio,n.set(a,u)}else l===it.VIDEO?n.set(a,Si.Video):n.set(a,Si.Audio)}),{users:Array.from(n.entries()).map(i=>{let[a,l]=i;return{stream_id:a.uid,stream_type:l}})}}withdrawRemoteTracks(t){t.forEach(n=>{let[i,{kind:a}]=n;const l=this.remoteUserMap.get(i);l&&(l.delete(a),Array.from(l.entries()).length===0&&this.remoteUserMap.delete(i))})}async updateBitrateLimit(t){const n=this.localTrackMap.get(Le.LocalVideoTrack),i=this.localTrackMap.get(Le.LocalVideoLowTrack);n&&(await n.track.setBitrateLimit(t.uplink),await new Ye((a,l)=>{this.handleUpdateVideoEncoder(n.track,a,l,!0)})),i&&t.low_stream_uplink&&(await i.track.setBitrateLimit({max_bitrate:t.low_stream_uplink.bitrate,min_bitrate:t.low_stream_uplink.bitrate||0}),await new Ye((a,l)=>{this.handleUpdateVideoEncoder(i.track,a,l,!0)}))}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}mapPubResToRemoteConfig(t,n,i){return t.map((a,l)=>{var u;let{stream_type:h}=a;const p=(u=n.find(m=>{let{stream_type:E}=m;return h===E}))===null||u===void 0?void 0:u.attributes;if(p&&Q("DISABLE_SCREEN_SHARE_REMB")){const m=i[l]._hints;(Ke(m).call(m,Jn.SCREEN_TRACK)||Ke(m).call(m,Jn.SCREEN_LOW_TRACK))&&(p.remb=!1,k.debug("disable remb for screen share, hints:",m))}return p})}async tryToUnmuteAudio(t){for(let i=0;i<t.length;i++)if(t[i]instanceof Nr){var n;const a=this.filterTobeUnmutedTracks(t[i]);if(a.length===0)continue;await((n=this.connection)===null||n===void 0?void 0:n.unmuteLocal(a.map(u=>{let[,{id:h}]=u;return h})));const l=this.createUnmuteMessage(a);return void await Yn(this,Et.RequestUnmuteLocal,l)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=t=>{var n;return!((n=this.connection)===null||n===void 0||!n.getRemoteVideoIsReady(t))},this.statsUploader.requestUpload=(t,n)=>this.emit(Et.RequestUpload,t,n),this.statsUploader.requestUploadStats=t=>this.emit(Et.RequestUploadStats,t),this.statsUploader.requestAllTracks=()=>this.getAllTracks(),this.statsUploader.requestTransportStats=()=>{var t;return{connectState:((t=this.connection)===null||t===void 0?void 0:t.peerConnectionState)||"closed"}}}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Ni(Hw(this.dtlsFailedCount,ti)),this.emit(Et.RequestReconnect)}async reconnectP2P(){const t=Array.from(this.localTrackMap.entries()),n=this.createGatewayUnpublishMessage(t);Array.from(this.remoteUserMap.entries()),n.length>0&&await Wi(this,Et.RequestUnpublishForReconnectPC,n),this.disconnectForReconnect(),this.emit(Et.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(Le.LocalVideoTrack)||this.pendingLocalTracks.some(t=>t instanceof sr)}throwIfTrackTypeNotMatch(t){if(t.filter(n=>n instanceof sr).length>1)throw new we(X.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t.filter(n=>n instanceof Nr).length>1&&(t.some(n=>n instanceof Nr&&n._bypassWebAudio)||!yn().webAudioMediaStreamDest))throw new we(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const n of t){if(n instanceof sr&&this.pendingLocalTracks.some(i=>i instanceof sr))throw new we(X.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n instanceof Nr&&this.pendingLocalTracks.some(i=>i instanceof Nr)&&(!yn().webAudioMediaStreamDest||n._bypassWebAudio||this.pendingLocalTracks.some(i=>i instanceof Nr&&i._bypassWebAudio)))throw new we(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(t,n){var i;const a=!Q("DISABLE_DUAL_STREAM_USE_ENCODING")&&yn().supportDualStreamEncoding,l=ml(ml({},{width:160,height:120,framerate:15,bitrate:50}),n);let u;u=a?t._mediaStreamTrack.clone():QI(t,l);const h=Xn(8,"track-low-"),p=new sr(u,ml(ml({},a&&{scaleResolutionDownBy:LI(l,t)}),{},{frameRate:l.framerate,bitrateMax:l.bitrate,bitrateMin:l.bitrate}),void 0,void 0,h);return p.on(Qd.TRANSCEIVER_UPDATED,m=>{t._updateRtpTransceiver(m,Kf.LOW_STREAM)}),p._hints.push(Jn.LOW_STREAM),Ke(i=t._hints).call(i,Jn.SCREEN_TRACK)&&p._hints.push(Jn.SCREEN_LOW_TRACK),t.on("sei-to-send",m=>{p.emit("sei-to-send",m)}),t.addListener(at.NEED_CLOSE,()=>{p.close()}),p}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(t,n,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(this.connection&&this.connection instanceof fl){var l,u,h,p;const m=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:E,dtlsTransportState:y,peerConnectionState:R}=this.connection,{local:A,remote:D}=await this.connection.getSelectedCandidatePair();dt.pcStats(this.store.sessionId,{startTime:m,eventElapse:t-m||0,iceconnectionsate:E,dtlsstate:y,connectionstate:R,intSucc:n?1:2,error:this._iceError||a||"",selectedLocalCandidateProtocol:(l=A==null?void 0:A.protocol)!==null&&l!==void 0?l:"",selectedLocalCandidateType:(u=A.candidateType)!==null&&u!==void 0?u:"",selectedLocalCandidateAddress:"".concat(A.address,":").concat(A.port),selectedRemoteCandidateProtocol:(h=D.protocol)!==null&&h!==void 0?h:"",selectedRemoteCandidateType:(p=D.candidateType)!==null&&p!==void 0?p:"",selectedRemoteCandidateAddress:"".concat(D.address,":").concat(D.port),restartCnt:i,preallocation:this.connection.isPreallocation}),this._iceError=null}}reportVideoFirstFrameDecoded(t,n,i,a){var l;const u=Array.from(Va(l=this.remoteUserMap).call(l)).find(h=>h._videoSSRC===t);if(u){a||this.store.subscribe(u.uid,"video",void 0,void 0,void 0,void 0,Date.now());const h=this.store.keyMetrics,p=h.subscribe.find(m=>m.userId===u.uid&&m.type==="video");dt.firstRemoteVideoDecode(this.store.sessionId,_i.FIRST_VIDEO_DECODE,hr.FIRST_VIDEO_DECODE,{peer:u._uintid,videowidth:n,videoheight:i,subscribeElapse:eo.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId,apEnd:h.requestAPEnd||0,apStart:h.requestAPStart||0,joinGwEnd:h.joinGatewayEnd||0,joinGwStart:h.joinGatewayStart||0,pcEnd:h.peerConnectionEnd||0,pcStart:h.peerConnectionStart||0,subscriberEnd:(p==null?void 0:p.subscribeEnd)||0,subscriberStart:(p==null?void 0:p.subscribeStart)||0,videoAddNotify:(p==null?void 0:p.streamAdded)||0,state:a?1:0,firstFrame:(p==null?void 0:p.firstFrame)||0})}}async remoteMediaSsrcChanged(t,n,i){if(!this.connection)return!1;const a=this.remoteUserMap.get(t);if(!a)return!1;const l=a.get(n);if(!l)return!1;const u=await this.connection.getRemoteSSRC(l);return u!==void 0&&u!==i}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(t=>{let[n,{track:i}]=t;n===Le.LocalVideoLowTrack?i._updateRtpTransceiver(void 0,Kf.LOW_STREAM):i._updateRtpTransceiver(void 0)})}},st(an.prototype,"startP2PConnection",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"startP2PConnection"),an.prototype),st(an.prototype,"connect",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"connect"),an.prototype),st(an.prototype,"updateRemoteRTPCapabilities",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"updateRemoteRTPCapabilities"),an.prototype),st(an.prototype,"publishDataChannel",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"publishDataChannel"),an.prototype),st(an.prototype,"unpublish",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"unpublish"),an.prototype),st(an.prototype,"unpublishDataChannel",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"unpublishDataChannel"),an.prototype),st(an.prototype,"unpublishLowStream",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"unpublishLowStream"),an.prototype),st(an.prototype,"subscribeDataChannel",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"subscribeDataChannel"),an.prototype),st(an.prototype,"subscribe",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"subscribe"),an.prototype),st(an.prototype,"massSubscribe",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"massSubscribe"),an.prototype),st(an.prototype,"unsubscribe",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"unsubscribe"),an.prototype),st(an.prototype,"unsubscribeDataChannel",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"unsubscribeDataChannel"),an.prototype),st(an.prototype,"massUnsubscribe",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"massUnsubscribe"),an.prototype),st(an.prototype,"muteRemote",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"muteRemote"),an.prototype),st(an.prototype,"unmuteRemote",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"unmuteRemote"),an.prototype),st(an.prototype,"hasRemoteMediaWithLock",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"hasRemoteMediaWithLock"),an.prototype),st(an.prototype,"disconnectForReconnect",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"disconnectForReconnect"),an.prototype),st(an.prototype,"updateBitrateLimit",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"updateBitrateLimit"),an.prototype),st(an.prototype,"remoteMediaSsrcChanged",[Eo],Object.getOwnPropertyDescriptor(an.prototype,"remoteMediaSsrcChanged"),an.prototype),an);function Eo(t,n,i){const a=t[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,u=await l.lock("From P2PChannel.".concat(n));try{for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return await a.apply(this,p)}finally{u()}},i}function E8(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function _8(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?E8(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):E8(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}const upe=Date.now(),dpe=20,eA=new Map,OS=new Map;async function S8(t){const n=eA.get(t),i=Array.isArray(n)&&n[n.length-1],a=OS.get(t);if(!i)return void(a.isSyncing=!1);const l={uid:i.uid,payload:i.payload};a.firstRecvTs===0&&(a.firstRecvTs=i.recvTs,a.firstSendTs=i.sendTs);const u=i.sendTs-a.firstSendTs,h=u-(Date.now()-a.firstRecvTs);h>0&&(a.firstRecvTs=Date.now()-u);let p=i.mediaDelay+h;p<=0?(n.pop(),y8(i.context,l),p=0):p=Math.min(p,dpe),setTimeout(()=>n.length&&S8(t),p)}function y8(t,n){t.safeEmit(cn.STREAM_MESSAGE,n.uid,n.payload),t.onStreamMessage&&t.onStreamMessage(n)}function hpe(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if(!t.syncWithAudio)return y8(i,{uid:t.uid,payload:t.payload});const a="".concat(i.id,"-").concat(t.uid),l=eA.get(a)||[],u=l.findIndex(E=>t.sendTs>=E.sendTs),h=_8(_8({},t),{},{context:i,mediaDelay:n,recvTs:Date.now()});u===-1?l.push(h):l.splice(u,0,h),eA.set(a,l);let p=!1;var m;OS.has(a)?p=!((m=OS.get(a))===null||m===void 0||!m.isSyncing):OS.set(a,{isSyncing:p,firstRecvTs:0,firstSendTs:0}),p||S8(a)}const fpe=En().name;function C8(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function b8(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?C8(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):C8(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}const mp="websdk_ng_cache_parameter",ppe=Q("MAX_PRELOAD_ASYNC_LENGTH"),mpe=1e4,dh=new Map,hh=[];let tA=null,nA=0,rA=0;const xS=new Map,gpe=function(t,n){const i=[];let a=0;const l=async()=>{const u=i.shift();u&&await u(),i.length>0&&a<n?l():a--};return async function(){for(var u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];return new Ye(async(m,E)=>{i.push(async()=>{try{const y=await t(...h);m(y)}catch(y){E(y)}}),a<n&&(a++,l())})}}(T8,ppe),iA=zo.CancelToken.source();async function T8(t,n,i,a,l,u){try{if(!Q("ENABLE_PRELOAD"))return;if(!yn().supportWebCrypto)return void ku(()=>{k.warn("Your browser does not support preloading, this feature  be run in a secure environment")},"preload_webcrypto_not_supported");if(!i&&i!==null)throw new we(X.INVALID_PARAMS,"Invalid token: ".concat(i,". If you don not use token, set it to null"));i&&xi(i,"token",1,2047),xi(t,"appid",1,2047),aS(n),a&&sS(a);const h=Xd();k.debug("preload channel ".concat(n,", uid is ").concat(a));const p={appId:t,cname:n,token:i||t,uid:typeof a!="string"?a:null,sid:h,proxyServer:l};let m,E;typeof a=="string"?(p.stringUid=a,[E,m]=await Ye.all([Qfe(a,{sid:h,appId:t},iA.token),G6(b8(b8({},p),{},{token:i||t,uid:0}),iA.token)]),p.uid=E.uid,m.gatewayInfo.uid=p.uid,m.gatewayInfo.res.uid=p.uid):(u&&(p.stringUid=u),m=await G6(p,iA.token));const y={sid:h,appId:t,cname:n,token:i||t,uid:p.stringUid||a,intUid:p.uid||m.gatewayInfo.uid,stringUid:p.stringUid,ts:Date.now(),sua:E,ap:m};await async function(R){let A;try{R.uid&&w8({appId:R.appId,cname:R.cname,token:R.token,uid:R.uid,stringUid:R.stringUid});const D=x8(R),H=await async function($,K){try{const Y=await window.crypto.subtle.importKey("raw",g3(K),"AES-GCM",!1,["encrypt"]),ce=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(1)},Y,Yd(window.btoa(JSON.stringify($))));return Mu(new Uint8Array(ce))}catch{return}}(R,R.token||R.appId);if(!H)return;A=O8(mp);const B=A?JSON.parse(A):[];B.push({[D]:H}),B.length>Q("AP_CACHE_NUM")&&B.shift(),NS(mp,JSON.stringify(B))}catch(D){k.warn("Error caching server parameters:",D.message),NS(mp,"")}}(y),nA++}catch(h){throw rA++,function(p){tA||(tA=window.setTimeout(()=>{let E="";xS.forEach((y,R)=>{E+="".concat(R,": ").concat(y," ;")}),dt.reportApiInvoke(null,{name:ei.PRELOAD,options:{success:nA,failed:rA,err:E}}).onError(p),nA=0,rA=0,xS.clear(),tA=null},mpe));const m=xS.get(p.code)||0;xS.set(p.code,m+1)}(h),h}}async function R8(t){try{if(Q("AP_REQUEST_DETAIL")||Q("ENABLE_ROLE_SELECT_EDGE"))return;const n=w8(t);if(!n||t.cloudProxyServer!=="disabled")return;const i=await async function(a,l){try{const u=await window.crypto.subtle.importKey("raw",g3(l),"AES-GCM",!1,["decrypt"]),h=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(1)},u,Yd(a));return JSON.parse(window.atob(Mu(new Uint8Array(h))))}catch{return}}(n,t.token||t.appId);if(!i||!function(a,l){return a.cname===l.cname&&a.appId===l.appId&&a.token===l.token?l.stringUid?a.stringUid===l.stringUid:typeof l.uid=="number"?a.uid===l.uid:a.uid==l.uid:!1}(i,t))return;if(i&&Date.now()-i.ts<Q("AP_CACHE_LIFETIME"))return i}catch(n){k.warn("Error get preloadInfo",n.message)}}function w8(t){let n;try{if(n=O8(mp),!n)return;const i=JSON.parse(n),a=x8(t),l=function(h,p){for(let m=h.length-1;m>=0;m--)if(p(h[m]))return m;return-1}(i,h=>a in h);if(l===-1)return;const u=i.splice(l,1)[0];return NS(mp,JSON.stringify(i)),u[a]}catch(i){k.warn("Error delete preload info: ".concat(n),i.message),NS(mp,"")}}function oA(t){if(t){let n=dh.get(t);n&&(window.clearTimeout(n),n=null,dh.delete(t)),Ke(hh).call(hh,t)||t.cloudProxyServer!=="disabled"||hh.push(t)}if(dh.size<Q("AP_CACHE_NUM")&&hh.length>0){const n=hh.shift();dh.set(n,window.setTimeout(async()=>{const{appId:i,cname:a,token:l,stringUid:u,uid:h,proxyServer:p}=n;try{await gpe(i,a,l,h,p,u),dh.has(n)&&oA(n)}catch(m){k.warn("update preload failed",m.message),I8(n)}},Q("AP_UPDATE_INTERVAL")))}}function I8(t){const n=hh.indexOf(t);n!==-1&&hh.splice(n,1);let i=dh.get(t);i&&(window.clearTimeout(i),i=null,dh.delete(t),oA())}function A8(t,n){const i=t.sua,a=t.ap;n&&i&&dt.reqUserAccount(t.sid,{lts:i.requestTime,elapse:i.elapse,success:!0,serverAddr:i.url,stringUid:n,uid:t.intUid,errorCode:null,extend:i.req}),dt.reportResourceTiming(t.ap.url,t.sid),dt.joinWebProxyAP(t.sid,{lts:a.requestTime,elapse:a.elapse,sucess:1,apServerAddr:a.url,turnServerAddrList:a.proxyInfo.addresses.map(l=>l.ip).join(","),eventType:"disabled",unilbsServerIds:[zr.CHOOSE_SERVER,zr.CLOUD_PROXY_FALLBACK].toString()}),dt.joinChooseServer(t.sid,{lts:a.requestTime,elapse:a.elapse,succ:!0,csAddr:a.url,opid:a.opid,serverList:a.gatewayInfo.gatewayAddrs.map(l=>l.address),ec:null,cid:a.gatewayInfo.cid.toString(),uid:a.gatewayInfo.uid.toString(),csIp:a.gatewayInfo.csIp,unilbsServerIds:[zr.CHOOSE_SERVER].toString(),isHttp3:a.isHttp3})}function O8(t){return window.atob(window.localStorage.getItem(t)||"")}function NS(t,n){window.localStorage.setItem(t,window.btoa(n))}function x8(t){let n="".concat(t.appId,"_").concat(t.cname);return typeof t.uid=="string"&&(n+="_s_".concat(t.uid)),typeof t.uid=="number"&&(n+="_".concat(t.uid)),t.token&&(n+="_".concat(t.token)),b3(n)}function vpe(t){let n=function(){const i=Spe.pop();return i?(i.offset=i.limit=0,i):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(i,a){let l=i.appId;l!==void 0&&(Kr(a,10),Gu(a,l));let u=i.cid;u!==void 0&&(Kr(a,16),Kr(a,u));let h=i.cname;h!==void 0&&(Kr(a,26),Gu(a,h));let p=i.deviceId;p!==void 0&&(Kr(a,34),Gu(a,p));let m=i.elapse;m!==void 0&&(Kr(a,40),Ku(a,m));let E=i.fileSize;E!==void 0&&(Kr(a,48),Ku(a,gp(E)));let y=i.height;y!==void 0&&(Kr(a,56),Ku(a,gp(y)));let R=i.jpg;R!==void 0&&(Kr(a,66),Kr(a,R.length),P8(a,R));let A=i.networkType;A!==void 0&&(Kr(a,72),Ku(a,gp(A)));let D=i.osType;D!==void 0&&(Kr(a,80),Ku(a,gp(D)));let H=i.requestId;H!==void 0&&(Kr(a,90),Gu(a,H));let B=i.sdkVersion;B!==void 0&&(Kr(a,98),Gu(a,B));let $=i.sequence;$!==void 0&&(Kr(a,104),Ku(a,gp($)));let K=i.sid;K!==void 0&&(Kr(a,114),Gu(a,K));let Y=i.timestamp;Y!==void 0&&(Kr(a,120),Ku(a,Y));let ce=i.uid;ce!==void 0&&(Kr(a,128),Kr(a,ce));let ge=i.vid;ge!==void 0&&(Kr(a,136),Kr(a,ge));let Ee=i.width;Ee!==void 0&&(Kr(a,144),Ku(a,gp(Ee)));let me=i.service;me!==void 0&&(Kr(a,152),Kr(a,me));let Te=i.callbackData;Te!==void 0&&(Kr(a,162),Kr(a,Te.length),P8(a,Te));let Me=i.ticket;Me!==void 0&&(Kr(a,170),Gu(a,Me));let Xe=i.vendorConfigs;Xe!==void 0&&(Kr(a,178),Gu(a,Xe))}(t,n),function(i){let a=i.bytes,l=i.limit;return a.length===l?a:a.subarray(0,l)}(n)}function Epe(t){return function(i){let a={};e:for(;!ype(i);){let l=H0(i);switch(l>>>3){case 0:break e;case 1:a.code=H0(i);break;case 2:a.msg=D8(i,H0(i));break;case 3:a.requestId=D8(i,H0(i));break;case 4:a.timestamp=Cpe(i,!1);break;default:_pe(i,7&l)}}return a}({bytes:n=t,offset:0,limit:n.length});var n}function _pe(t,n){switch(n){case 0:for(;128&Ks(t););break;case 2:aA(t,H0(t));break;case 5:aA(t,4);break;case 1:aA(t,8);break;default:throw new Error("Unimplemented type: "+n)}}function gp(t){return{low:t|=0,high:t>>31,unsigned:t>=0}}let Spe=[];function aA(t,n){if(t.offset+n>t.limit)throw new Error("Skip past limit");t.offset+=n}function ype(t){return t.offset>=t.limit}function PS(t,n){let i=t.bytes,a=t.offset,l=t.limit,u=a+n;if(u>i.length){let h=new Uint8Array(2*u);h.set(i),t.bytes=h}return t.offset=u,u>l&&(t.limit=u),a}function N8(t,n){let i=t.offset;if(i+n>t.limit)throw new Error("Read past limit");return t.offset+=n,i}function P8(t,n){let i=PS(t,n.length);t.bytes.set(n,i)}function D8(t,n){let i=N8(t,n),a=String.fromCharCode,l=t.bytes,u="�",h="";for(let p=0;p<n;p++){let m,E,y,R,A=l[p+i];128&A?(224&A)==192?p+1>=n?h+=u:(m=l[p+i+1],(192&m)!=128?h+=u:(R=(31&A)<<6|63&m,R<128?h+=u:(h+=a(R),p++))):(240&A)==224?p+2>=n?h+=u:(m=l[p+i+1],E=l[p+i+2],(49344&(m|E<<8))!=32896?h+=u:(R=(15&A)<<12|(63&m)<<6|63&E,R<2048||R>=55296&&R<=57343?h+=u:(h+=a(R),p+=2))):(248&A)==240?p+3>=n?h+=u:(m=l[p+i+1],E=l[p+i+2],y=l[p+i+3],(12632256&(m|E<<8|y<<16))!=8421504?h+=u:(R=(7&A)<<18|(63&m)<<12|(63&E)<<6|63&y,R<65536||R>1114111?h+=u:(R-=65536,h+=a(55296+(R>>10),56320+(1023&R)),p+=3))):h+=u:h+=a(A)}return h}function Gu(t,n){let i=n.length,a=0;for(let h=0;h<i;h++){let p=n.charCodeAt(h);p>=55296&&p<=56319&&h+1<i&&(p=(p<<10)+n.charCodeAt(++h)-56613888),a+=p<128?1:p<2048?2:p<65536?3:4}Kr(t,a);let l=PS(t,a),u=t.bytes;for(let h=0;h<i;h++){let p=n.charCodeAt(h);p>=55296&&p<=56319&&h+1<i&&(p=(p<<10)+n.charCodeAt(++h)-56613888),p<128?u[l++]=p:(p<2048?u[l++]=p>>6&31|192:(p<65536?u[l++]=p>>12&15|224:(u[l++]=p>>18&7|240,u[l++]=p>>12&63|128),u[l++]=p>>6&63|128),u[l++]=63&p|128)}}function Ks(t){return t.bytes[N8(t,1)]}function L8(t,n){let i=PS(t,1);t.bytes[i]=n}function H0(t){let n,i=0,a=0;do n=Ks(t),i<32&&(a|=(127&n)<<i),i+=7;while(128&n);return a}function Kr(t,n){for(n>>>=0;n>=128;)L8(t,127&n|128),n>>>=7;L8(t,n)}function Cpe(t,n){let i,a=0,l=0,u=0;return i=Ks(t),a=127&i,128&i&&(i=Ks(t),a|=(127&i)<<7,128&i&&(i=Ks(t),a|=(127&i)<<14,128&i&&(i=Ks(t),a|=(127&i)<<21,128&i&&(i=Ks(t),l=127&i,128&i&&(i=Ks(t),l|=(127&i)<<7,128&i&&(i=Ks(t),l|=(127&i)<<14,128&i&&(i=Ks(t),l|=(127&i)<<21,128&i&&(i=Ks(t),u=127&i,128&i&&(i=Ks(t),u|=(127&i)<<7))))))))),{low:a|l<<28,high:l>>>4|u<<24,unsigned:n}}function Ku(t,n){let i=n.low>>>0,a=(n.low>>>28|n.high<<4)>>>0,l=n.high>>>24,u=l===0?a===0?i<16384?i<128?1:2:i<1<<21?3:4:a<16384?a<128?5:6:a<1<<21?7:8:l<128?9:10,h=PS(t,u),p=t.bytes;switch(u){case 10:p[h+9]=l>>>7&1;case 9:p[h+8]=u!==9?128|l:127&l;case 8:p[h+7]=u!==8?a>>>21|128:a>>>21&127;case 7:p[h+6]=u!==7?a>>>14|128:a>>>14&127;case 6:p[h+5]=u!==6?a>>>7|128:a>>>7&127;case 5:p[h+4]=u!==5?128|a:127&a;case 4:p[h+3]=u!==4?i>>>21|128:i>>>21&127;case 3:p[h+2]=u!==3?i>>>14|128:i>>>14&127;case 2:p[h+1]=u!==2?i>>>7|128:i>>>7&127;case 1:p[h]=u!==1?128|i:127&i}}const k8={},M8={},DS=4294967296,F8=DS*DS,U8=F8/2,sA=V8(0,!0),B8=V8(0),bpe=vp(0,-2147483648,!1),Tpe=vp(-1,2147483647,!1),Rpe=vp(-1,-1,!0);function V8(t,n){let i,a,l;return n?(l=0<=(t>>>=0)&&t<256)&&(a=M8[t],a)?a:(i=vp(t,0,!0),l&&(M8[t]=i),i):(l=-128<=(t|=0)&&t<128)&&(a=k8[t],a)?a:(i=vp(t,t<0?-1:0,!1),l&&(k8[t]=i),i)}function vp(t,n,i){return{low:0|t,high:0|n,unsigned:!!i}}function j8(t,n){if(isNaN(t))return n?sA:B8;if(n){if(t<0)return sA;if(t>=F8)return Rpe}else{if(t<=-U8)return bpe;if(t+1>=U8)return Tpe}return t<0?n?sA:B8:vp(t%DS|0,t/DS|0,n)}function $8(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}class cA extends Sr{get connectionState(){return this._connectionState}set connectionState(n){if(this._connectionState===n)return;const i=this._connectionState;this._connectionState=n,this.emit(Rc.CONNECTION_STATE_CHANGE,n,i)}get quality(){return this._quality}set quality(n){this._quality=n>1?1:n<.1?.1:n,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this._qualityRatio},6e4))}constructor(n){var i;super(),G(this,"name","AgoraRTCImageModeration"),G(this,"_connectionState",us.CONNECTING),G(this,"_sequence",0),G(this,"_moderationStartTime",void 0),G(this,"_workerConnection",void 0),G(this,"_workerMessageLengthLimit",void 0),G(this,"_qualityRatio",void 0),G(this,"_connectInfo",void 0),G(this,"_cancelTokenSource",zo.CancelToken.source()),G(this,"_retryConfig",void 0),G(this,"_moderationInterval",void 0),G(this,"_moderationTimer",null),G(this,"_moderationMode",1),G(this,"_quality",1),G(this,"_qualityTimer",null),G(this,"_ticket",void 0),G(this,"_moderationIntervalMinimum",void 0),G(this,"_uploadFailedNum",0),G(this,"_uploadNum",0),G(this,"_uploadTimer",null),G(this,"_extraInfo",void 0),G(this,"_vendor",""),G(this,"_encoder",new TextEncoder),G(this,"_moderationId",void 0),G(this,"inspectImage",()=>{if(this.connectionState!==us.CONNECTED)throw new ye(X.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval(()=>{this.connectionState===us.CONNECTED?this.requestToInspectImage():k.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)},this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()}),this._moderationId=Xn(5,"image-moderation-"),this._workerMessageLengthLimit=Q("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=Q("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=(i=n.interval)!==null&&i!==void 0?i:1e3,n.extraInfo&&(this._extraInfo=this._encoder.encode(n.extraInfo)),n.vendor&&(this._vendor=n.vendor),this._qualityRatio=Q("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new D0("worker-"+this._moderationId,ti),this.on(Rc.STATE_CHANGE,(a,l)=>{k.debug("[".concat(this._moderationId,"] Moderation operation :").concat(op[a]," ").concat(l||""))}),this.handleWorkerEvents()}async init(n,i){this.emit(Rc.STATE_CHANGE,op.CONNECT_AP),this._connectInfo=n;const a=this._cancelTokenSource.token;return this._retryConfig=i,new Ye((l,u)=>{this.on(Rc.CONNECTION_STATE_CHANGE,(h,p)=>{h===us.CONNECTED&&l()}),this.requestAP(n,a,i).then(h=>{this.connectWorker(h)}).catch(h=>{u(h)})})}updateConfig(n){var i;this._moderationInterval=(i=n.interval)!==null&&i!==void 0?i:1e3,n.extraInfo&&(this._extraInfo=this._encoder.encode(n.extraInfo)),n.vendor&&(this._vendor=n.vendor),k.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(n))),this.connectionState===us.CONNECTED&&this.inspectImage()}async requestAP(n,i,a){const l=Q("WEBCS_DOMAIN").map(m=>"https://".concat(m,"/api/v1")),u=await function(m,E,y,R){let{appId:A,areaCode:D,cname:H,sid:B,token:$,uid:K}=E;dp++;const Y="moderation_plugin",ce={service_name:Y,json_body:JSON.stringify({appId:A,areaCode:D,cname:H,command:"allocateEdge",requestId:dp,seq:dp,sid:B,appToken:$,ts:Date.now(),uid:K+""})};let ge,Ee,me=m[0];return yc(async()=>{ge=Date.now();const Te=await wc(me,{data:ce,cancelToken:y,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(Ee=Date.now()-ge,Te.code!==0){const nt=new ye(X.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+Te.code,{retry:!0,responseTime:Ee});throw k.error(nt.toString()),nt}const Me=JSON.parse(Te.json_body);if(Me.code!==200){const nt=new ye(X.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(Me.code,", reason: ").concat(Me.reason),{code:Me.code,responseTime:Ee});throw k.error(nt.toString()),nt}if(!Me.servers||!Array.isArray(Me.servers)||Me.servers.length===0){const nt=new ye(X.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:Me.code,responseTime:Ee});throw k.error(nt.toString()),nt}if(!Me.servers.some(nt=>!!nt.wss)){const nt=new ye(X.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:Me.code,responseTime:Ee});throw k.error(nt.toString()),nt}const Xe=Q("IMAGE_MODERATION_WORKER_HOST");return{addressList:Me.servers.map(nt=>{let{address:dn,wss:hn}=nt;if(dn&&hn)return"wss://".concat(dn.replace(/\./g,"-"),".").concat(Xe,":").concat(hn,"/moderation")}).filter(nt=>!!nt),workerToken:Me.workerToken,vid:Me.vid,ticket:Me.appTicket,responseTime:Ee}},(Te,Me)=>(dt.apworkerEvent(B,{success:!0,sc:200,serviceName:Y,responseDetail:JSON.stringify(Te.addressList),firstSuccess:Me===0,responseTime:Ee,serverIp:m[Me%m.length]}),!1),(Te,Me)=>(dt.apworkerEvent(B,{success:!1,sc:Te.data&&Te.data.code||200,serviceName:Y,responseTime:Ee,serverIp:m[Me%m.length]}),!!(Te.code!==X.OPERATION_ABORTED&&Te.code!==X.UNEXPECTED_RESPONSE||Te.data&&Te.data.retry)&&(me=m[(Me+1)%m.length],!0)),R)}(l,n,i,a);this.emit(Rc.STATE_CHANGE,op.AP_CONNECTED);const{addressList:h,ticket:p}=u;return this._ticket=p,h}async connectWorker(n){this.emit(Rc.STATE_CHANGE,op.CONNECT_WORKER),await this._workerConnection.init(n,1e4)}handleWorkerEvents(){this._workerConnection.on(qt.CONNECTED,async()=>{this.emit(Rc.STATE_CHANGE,op.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=us.CONNECTED}),this._workerConnection.on(qt.CLOSED,()=>{this.connectionState=us.CLOSED}),this._workerConnection.on(qt.FAILED,()=>{this.connectionState=us.CLOSED}),this._workerConnection.on(qt.RECONNECTING,()=>{this.connectionState=this.connectionState===us.CONNECTED?us.RECONNECTING:us.CONNECTING}),this._workerConnection.on(qt.ON_MESSAGE,async n=>{if(n.data instanceof ArrayBuffer){const i=Epe(new Uint8Array(n.data));Q("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&k.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(i)),this._uploadNum++,i.code===void 0||i.code===0||(this._uploadFailedNum++,k.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(i.code,", msg is ").concat(i.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout(()=>{dt.reportApiInvoke(this._connectInfo.sid||null,{name:ei.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,i.code],tag:wr.TRACER}).onError(new ye(X.IMAGE_MODERATION_UPLOAD_FAILED,i.msg)),this._uploadTimer=null},Q("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else k.error("[".concat(this._moderationId,"] Unexpected message type from worker"))}),this._workerConnection.on(qt.WILL_RECONNECT,(n,i,a)=>{n==="recover"&&a(n),a("tryNext")}),this._workerConnection.on(qt.REQUEST_NEW_URLS,(n,i)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(n).catch(i)})}static intToLong(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}async requestToInspectImage(){const n=Ua(this,Rc.CLIENT_LOCAL_VIDEO_TRACK),i={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(n){if(!n.isPlaying)return void(Q("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&k.debug("Only the track being played can be inspected"));this._sequence++;const a=await this.generateRequestData(n,i);this._workerConnection.sendMessage(a,!0,!0)}else Q("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&k.debug("Only the track being published can be inspected")}async generateRequestData(n,i){let{appId:a,cname:l,cid:u,vid:h,sid:p,uid:m}=i;const E=Date.now(),y=await n.getCurrentFrameImage("image/jpeg",this.quality),R=await hV(y,a,l),A=this._sequence+"-"+u+"-"+m+"-"+E+"-"+Xn(12,""),D={appId:a,cid:u,cname:l,deviceId:"",elapse:cA.intToLong(Number(E-this._moderationStartTime)),fileSize:y.buffer.byteLength,height:y.height,width:y.width,jpg:R,networkType:6,osType:7,requestId:A,sdkVersion:"4.23.2",sequence:this._sequence,sid:p,timestamp:j8(E),uid:m,vid:h,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};this._extraInfo===void 0&&delete D.callbackData;const H=vpe(D);if(H.byteLength<this._workerMessageLengthLimit){if(Q("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const B=function($){for(var K=1;K<arguments.length;K++){var Y=arguments[K]!=null?arguments[K]:{};K%2?$8(Object(Y),!0).forEach(function(ce){G($,ce,Y[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(Y)):$8(Object(Y)).forEach(function(ce){Object.defineProperty($,ce,Object.getOwnPropertyDescriptor(Y,ce))})}return $}({},D);delete B.jpg,k.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(B))}return H}{const B=this.quality*this._qualityRatio;return this.quality=B,await this.generateRequestData(n,{appId:a,cname:l,cid:u,vid:h,sid:p,uid:m})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=zo.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=us.CLOSED,this.emit(Rc.STATE_CHANGE,op.CLOSED)}}function H8(t){if(zn(t.interval,"interval",1e3,1/0),t&&t.extraInfo&&t.extraInfo.length>1024)throw new ye(X.INVALID_PARAMS,"config.extraInfo length cannot exceed 1024 bytes");if(t&&t.vendor&&t.vendor.length>1024)throw new ye(X.INVALID_PARAMS,"config.vendor length cannot exceed 1024 bytes")}const wpe={name:"ImageModeration",create:function(t){let{config:n}=t;return H8(n),new cA(n)}};var z8,W8,G8,K8,q8,Y8,X8,J8,Q8,Z8,ej,tj,nj,rj,ij,oj,aj,sj,cj,lj,uj,dj,hj,fj,pj,mj,gj,vj,Ej,_j,Sj,yj,Cj,bj,Tj,Rj,wj,Ij,Aj,Oj,xj,et;function Nj(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function qs(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?Nj(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Nj(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}Ji.setLogger(k);let Ipe=(z8=At(),W8=At({argsMap:(t,n)=>{if(!Array.isArray(n)){if(!(n instanceof Jf))return[n];n=[n]}return n.map(i=>i?Object(i).toString():"null")}}),G8=At({argsMap:(t,n)=>(n||(n=[]),Array.isArray(n)||n.trackMediaType!==Xf.DATA?(Array.isArray(n)||(n=[n]),n.map(i=>i.getTrackId())):[n.getChannelId()])}),K8=At({argsMap:(t,n,i,a)=>[typeof n=="object"?n.uid:n,i,a]}),q8=At({argsMap:(t,n,i)=>[n,i]}),Y8=At({argsMap:(t,n)=>n.map(i=>{let{user:a,mediaType:l}=i;return[a==null?void 0:a.uid,l]})}),X8=At({argsMap:(t,n,i,a)=>[typeof n=="object"?n.uid:n,i,a]}),J8=At({argsMap:(t,n)=>n.map(i=>{let{user:a,mediaType:l}=i;return{uid:a==null?void 0:a.uid,mediaType:l}})}),Q8=At(),Z8=At(),ej=At(),tj=At(),nj=At(),rj=At(),ij=At(),oj=At(),aj=At(),sj=At(),cj=At(),lj=At(),uj=At(),dj=At(),hj=At(),fj=At({argsMap:(t,n)=>[n]}),pj=At(),mj=At(),gj=At(),vj=At(),Ej=At(),_j=At(),Sj=At(),yj=At(),Cj=At({argsMap:(t,n)=>(Array.isArray(n)||(n=[n]),[JSON.stringify(n)])}),bj=At(),Tj=At(),Rj=At(),wj=At(),Ij=At(),Aj=At(),Oj=At({reportResult:!0}),xj=At(),et=class extends Sr{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var t;return((t=this._config)===null||t===void 0?void 0:t.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(t,n){let i;if(super(),G(this,"store",void 0),G(this,"_uid",void 0),G(this,"_channelName",void 0),G(this,"_uintUid",void 0),G(this,"_users",[]),G(this,"_config",void 0),G(this,"_clientId",void 0),G(this,"_appId",void 0),G(this,"_sessionId",null),G(this,"_key",void 0),G(this,"_rtmConfig",{}),G(this,"_joinInfo",void 0),G(this,"_gateway",void 0),G(this,"_statsCollector",void 0),G(this,"_configDistribute",void 0),G(this,"_leaveMutex",void 0),G(this,"_publishMutex",void 0),G(this,"_renewTokenMutex",void 0),G(this,"_subscribeMutex",void 0),G(this,"_encryptionMode","none"),G(this,"_encryptionSecret",null),G(this,"_encryptionSalt",null),G(this,"_encryptDataStream",!1),G(this,"_encryptDataStreamKey",null),G(this,"_encryptDataStreamIv",null),G(this,"_proxyServer",void 0),G(this,"_turnServer",{servers:[],mode:"auto"}),G(this,"_cloudProxyServerMode","disabled"),G(this,"_isDualStreamEnabled",!1),G(this,"_defaultStreamFallbackType",void 0),G(this,"_lowStreamParameter",void 0),G(this,"_streamFallbackTypeCacheMap",new Map),G(this,"_remoteStreamTypeCacheMap",new Map),G(this,"_axiosCancelSource",zo.CancelToken.source()),G(this,"_audioVolumeIndicationInterval",void 0),G(this,"_networkQualityInterval",void 0),G(this,"_userOfflineTimeout",void 0),G(this,"_streamRemovedTimeout",void 0),G(this,"_liveTranscodeStreamingClient",void 0),G(this,"_liveRawStreamingClient",void 0),G(this,"_channelMediaRelayClient",void 0),G(this,"_networkQualitySensitivity","normal"),G(this,"_p2pChannel",void 0),G(this,"_useLocalAccessPoint",!1),G(this,"_setLocalAPVersion",void 0),G(this,"_joinAndNotLeaveYet",!1),G(this,"_numberOfJoinCount",0),G(this,"_remoteDefaultVideoStreamType",void 0),G(this,"_inspect",void 0),G(this,"_moderation",void 0),G(this,"_license",void 0),G(this,"_pendingPublishedUsers",[]),G(this,"ntpAlignErrorCount",0),G(this,"remoteInboundOffset",0),G(this,"_peerConnectionState",void 0),G(this,"_handleLocalTrackEnable",(l,u,h)=>{this.publish(l,!1).then(u).catch(h)}),G(this,"_handleLocalTrackDisable",(l,u,h)=>{this.unpublish(l).then(u).catch(h)}),G(this,"_handleUserOnline",l=>{if(Q("BLOCK_LOCAL_CLIENT")&&ih(l.uid,this.channelName))return void k.debug("[".concat(l.uid,"] will be ignored in local"));this.isStringUID&&typeof l.uid!="string"&&k.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const u=this._users.find(h=>h.uid===l.uid);if(u)u._trust_in_room_=!0,u._is_pre_created&&(u._is_pre_created=!1,this.safeEmit(cn.USER_JOINED,u));else{const h=new zu(l.uid,l.uint_id||l.uid);this._users.push(h),k.debug("[".concat(this._clientId,"] user online"),l.uid),this.safeEmit(cn.USER_JOINED,h)}}),G(this,"_handleUserOffline",l=>{if(Q("BLOCK_LOCAL_CLIENT")&&ih(l.uid,this.channelName))return;const u=this._users.find(h=>h.uid===l.uid);u&&(this._handleRemoveStream(l),this._handleRemoveDataChannels(l),u._audio_pre_subscribed||u._video_pre_subscribed?u._is_pre_created=!0:k_(this._users,u),this._remoteStreamTypeCacheMap.delete(u.uid),this._streamFallbackTypeCacheMap.delete(u.uid),k.debug("[".concat(this._clientId,"] user offline"),l.uid,"reason:",l.reason),this.safeEmit(cn.USER_LEAVED,u,l.reason))}),G(this,"_handleAddAudioOrVideoStream",(l,u,h,p,m,E,y)=>{if(Q("BLOCK_LOCAL_CLIENT")&&ih(u,this.channelName))return;const R=this._users.find(D=>D.uid===u);if(!R)return void k.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));k.debug("[".concat(this._clientId,"] stream added with uid ").concat(u,", type ").concat(l)),this.store.subscribe(R.uid,l,void 0,void 0,void 0,Date.now());const A=l==="audio"?R.hasAudio:R.hasVideo;R._uintid||(R._uintid=m||u),l==="audio"?R._trust_audio_stream_added_state_=!0:R._trust_video_stream_added_state_=!0,l==="audio"?(R._audio_added_=!0,h!==void 0&&(R._audioSSRC=h),p!==void 0&&(R._cname=p),E&&(R._audioOrtc=E)):(R._video_added_=!0,h!==void 0&&(R._videoSSRC=h),p!==void 0&&(R._cname=p),y!==void 0&&(R._rtxSsrcId=y),E&&(R._videoOrtc=E)),(l==="audio"?R.hasAudio:R.hasVideo)&&!A&&(k.info("[".concat(this._clientId,"] remote user ").concat(R.uid," published ").concat(l)),this.safeEmit(cn.USER_PUBLISHED,R,l)),l==="video"?dt.onGatewayStream(this._sessionId,_i.ON_ADD_VIDEO_STREAM,hr.ON_ADD_VIDEO_STREAM,{peer:m||u,ssrc:R._videoSSRC}):dt.onGatewayStream(this._sessionId,_i.ON_ADD_AUDIO_STREAM,hr.ON_ADD_AUDIO_STREAM,{peer:m||u,ssrc:R._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(R,l,h).then(D=>{if(D&&(k.debug("[".concat(this._clientId,"] resubscribe ").concat(l," for user ").concat(R.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof $0))return this._p2pChannel.unsubscribe(R,l,!0).then(()=>this._subscribe(R,l,!0).catch(H=>{k.error("[".concat(this._clientId,"] resubscribe error"),H.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(R,l)&&(k.debug("[".concat(this._clientId,"] resubscribe ").concat(l," for user ").concat(R.uid," after reconnect.")),this._subscribe(R,l,!0).catch(D=>{k.error("[".concat(this._clientId,"] resubscribe error"),D.toString())}))}),G(this,"_handleRemoveStream",l=>{if(Q("BLOCK_LOCAL_CLIENT")&&ih(l.uid,this.channelName))return;const u=this._users.find(p=>p.uid===l.uid);if(!u)return void k.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));k.debug("[".concat(this._clientId,"] stream removed with uid ").concat(l.uid));let h=()=>{};u.hasAudio&&u.hasVideo?h=()=>{k.info("[".concat(this._clientId,"] remote user ").concat(u.uid," unpublished audio track")),this.safeEmit(cn.USER_UNPUBLISHED,u,"audio"),k.info("[".concat(this._clientId,"] remote user ").concat(u.uid," unpublished video track")),this.safeEmit(cn.USER_UNPUBLISHED,u,"video")}:u.hasVideo?h=()=>{k.info("[".concat(this._clientId,"] remote user ").concat(u.uid," unpublished video track")),this.safeEmit(cn.USER_UNPUBLISHED,u,"video")}:u.hasAudio&&(h=()=>{k.info("[".concat(this._clientId,"] remote user ").concat(u.uid," unpublished audio track")),this.safeEmit(cn.USER_UNPUBLISHED,u,"audio")}),u._video_pre_subscribed||u._audio_pre_subscribed||(u._trust_audio_stream_added_state_=!0,u._trust_video_stream_added_state_=!0,u._audio_added_=!1,u._video_added_=!1,this._p2pChannel instanceof $0&&this._p2pChannel.unsubscribe(u).then(p=>{if(p)return this._gateway.unsubscribe(p,u.uid)}),u._audioSSRC=void 0,u._videoSSRC=void 0,u._audioOrtc=void 0,u._videoOrtc=void 0,u._rtxSsrcId=void 0),dt.onGatewayStream(this._sessionId,_i.ON_REMOVE_STREAM,hr.ON_REMOVE_STREAM,{peer:l.uint_id||l.uid}),h()}),G(this,"_handleSetStreamLocalEnable",(l,u,h)=>{if(Q("BLOCK_LOCAL_CLIENT")&&ih(u,this.channelName))return;const p=this._users.find(y=>y.uid===u);if(!p)return void k.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));k.debug("[".concat(this._clientId,"] local ").concat(l," ").concat(h?"enabled":"disabled"," with uid ").concat(u));const m=l==="audio"?p.hasAudio:p.hasVideo;if(l==="audio"){p._trust_audio_enabled_state_=!0;const y=p._audio_enabled_;if(p._audio_enabled_=h,p._audio_enabled_===y)return;{const R=p._audio_enabled_?"enable-local-audio":"disable-local-audio";k.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(u,", msg: ").concat(R)),this.safeEmit(cn.USER_INFO_UPDATED,u,R)}}else{p._trust_video_enabled_state_=!0;const y=p._video_enabled_;if(p._video_enabled_=h,p._video_enabled_===y)return;{const R=p._video_enabled_?"enable-local-video":"disable-local-video";k.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(u,", msg: ").concat(R)),this.safeEmit(cn.USER_INFO_UPDATED,u,R)}}const E=l==="audio"?p.hasAudio:p.hasVideo;return m!==E?!m&&E?(k.info("[".concat(this._clientId,"] remote user ").concat(u," published ").concat(l)),void this.safeEmit(cn.USER_PUBLISHED,p,l)):(l==="video"&&p._videoTrack&&p._videoTrack._destroy(),l==="audio"&&p._audioTrack,this._p2pChannel.muteRemote(p,l),k.info("[".concat(this._clientId,"] remote user ").concat(u," unpublished ").concat(l)),void this.safeEmit(cn.USER_UNPUBLISHED,p,l)):void 0}),G(this,"_handleMuteStream",(l,u,h)=>{if(Q("BLOCK_LOCAL_CLIENT")&&ih(l,this.channelName))return;k.debug("[".concat(this._clientId,"] receive mute message"),l,u,h);const p=this._users.find(y=>y.uid===l);if(!p)return void k.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(l));const m=u==="audio"?p.hasAudio:p.hasVideo;if(u==="audio"){p._trust_audio_mute_state_=!0;const y=p._audio_muted_;if(p._audio_muted_=h,p._audio_muted_===y)return;{const R=p._audio_muted_?"mute-audio":"unmute-audio";k.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(l,", msg: ").concat(R)),this.safeEmit(cn.USER_INFO_UPDATED,l,R)}}else{p._trust_video_mute_state_=!0;const y=p._video_muted_;if(p._video_muted_=h,p._video_muted_===y)return;{const R=p._video_muted_?"mute-video":"unmute-video";k.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(l,", msg: ").concat(R)),this.safeEmit(cn.USER_INFO_UPDATED,l,R)}}const E=u==="audio"?p.hasAudio:p.hasVideo;if(m!==E){if(!m&&E)return(u==="audio"?p._audioSSRC:p._videoSSRC)?(k.info("[".concat(this._clientId,"] remote user ").concat(l," published ").concat(u)),void this.safeEmit(cn.USER_PUBLISHED,p,u)):void k.warning("[".concat(this._clientId,"] remote user ").concat(l," receive ").concat(u," unmute message  before add stream message, ").concat(u," SSRC doesn't exist yet."));u==="video"&&p._videoTrack&&!p._video_pre_subscribed&&p._videoTrack._destroy(),u==="audio"&&p._audioTrack,this._p2pChannel.muteRemote(p,u),k.info("[".concat(this._clientId,"] remote user ").concat(l," unpublished ").concat(u)),this.safeEmit(cn.USER_UNPUBLISHED,p,u)}}),G(this,"_handleP2PLost",async l=>{k.debug("[".concat(this._clientId,"] receive p2p lost"),l),parseInt(l.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():k.warning("[".concat(this._clientId,"] P2PLost stream not found"),l)}),G(this,"_handleTokenWillExpire",()=>{k.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(cn.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),G(this,"_handleBeforeUnload",l=>{l.type==="beforeunload"&&l.returnValue!==void 0&&l.returnValue!==""||(this.leave(),k.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),G(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.safeEmit(cn.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const l={downlinkNetworkQuality:0,uplinkNetworkQuality:0};l.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),l.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(cn.NETWORK_QUALITY,l)}),G(this,"_handleP2PAddAudioOrVideoStream",(l,u,h,p)=>{const m=this._users.find(y=>y.uid===u);if(!m)return void k.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));k.debug("[".concat(this._clientId,"] stream added with uid ").concat(u,", type ").concat(l)),this.store.subscribe(m.uid,l,void 0,void 0,void 0,Date.now());const E=l==="audio"?m.hasAudio:m.hasVideo;l==="audio"?m._trust_audio_stream_added_state_=!0:m._trust_video_stream_added_state_=!0,l==="audio"?(m._audio_added_=!0,h!==void 0&&(m._audioSSRC=h),p!==void 0&&(m._audioMid=p)):(m._video_added_=!0,h!==void 0&&(m._videoSSRC=h),p!==void 0&&(m._videoMid=p)),(l==="audio"?m.hasAudio:m.hasVideo)&&!E&&(k.info("[".concat(this._clientId,"] remote user ").concat(m.uid," published ").concat(l)),this.safeEmit(cn.USER_PUBLISHED,m,l)),this._p2pChannel.hasPendingRemoteMedia(m,l)&&(k.debug("[".concat(this._clientId,"] resubscribe ").concat(l," for user ").concat(m.uid," after reconnect.")),this._subscribe(m,l,!0).catch(y=>{k.error("[".concat(this._clientId,"] resubscribe error"),y.toString())}))}),this._config=t,this._clientId=n||Xn(5,"client-"),this.store=new class{constructor(l,u,h,p){jt(this,"state",void 0),this.state={codec:l,audioCodec:u,mode:h,clientId:p,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useP2P:!1,p2pTransport:Jd.Default,hasStartJoinChannel:!1,isABTestSuccess:!1}}dispatch(l){this.state=function(u,h){switch(h.type){case ln.SET_SESSION_ID:return rt(rt({},u),{},{sessionId:h.sessionId});case ln.SET_P2P_ID:return rt(rt({},u),{},{p2pId:h.p2pId});case ln.SET_UID:return rt(rt({},u),{},{uid:h.uid});case ln.SET_INT_UID:return rt(rt({},u),{},{intUid:h.intUid});case ln.SET_PUB_ID:return rt(rt({},u),{},{pubId:h.pubId});case ln.KEY_METRIC_CLIENT_CREATED:return rt(rt({},u),{},{keyMetrics:rt(rt({},u.keyMetrics),{},{clientCreated:h.metric})});case ln.KEY_METRIC_JOIN_START:return rt(rt({},u),{},{keyMetrics:rt(rt({},u.keyMetrics),{},{joinStart:h.metric})});case ln.AVOID_JOIN_START:return rt(rt({},u),{},{avoidJoinStart:h.avoidJoinStart});case ln.KEY_METRIC_JOIN_END:return rt(rt({},u),{},{keyMetrics:rt(rt({},u.keyMetrics),{},{joinEnd:h.metric})});case ln.KEY_METRIC_REQUEST_AP_START:return rt(rt({},u),{},{keyMetrics:rt(rt({},u.keyMetrics),{},{requestAPStart:h.metric})});case ln.KEY_METRIC_REQUEST_AP_END:return rt(rt({},u),{},{keyMetrics:rt(rt({},u.keyMetrics),{},{requestAPEnd:h.metric})});case ln.KEY_METRIC_JOIN_GATEWAY_START:return rt(rt({},u),{},{keyMetrics:rt(rt({},u.keyMetrics),{},{joinGatewayStart:h.metric})});case ln.KEY_METRIC_JOIN_GATEWAY_END:return rt(rt({},u),{},{keyMetrics:rt(rt({},u.keyMetrics),{},{joinGatewayEnd:h.metric})});case ln.KEY_METRIC_PEER_CONNECTION_START:return rt(rt({},u),{},{keyMetrics:rt(rt({},u.keyMetrics),{},{peerConnectionStart:h.metric})});case ln.KEY_METRIC_PEER_CONNECTION_END:return rt(rt({},u),{},{keyMetrics:rt(rt({},u.keyMetrics),{},{peerConnectionEnd:h.metric})});case ln.KEY_METRIC_DESCRIPTION_START:return rt(rt({},u),{},{keyMetrics:rt(rt({},u.keyMetrics),{},{descriptionStart:h.metric})});case ln.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return rt(rt({},u),{},{keyMetrics:rt(rt({},u.keyMetrics),{},{signalChannelOpen:h.metric})});case ln.KEY_METRIC_ICE_CONNECTION_END:return rt(rt({},u),{},{keyMetrics:rt(rt({},u.keyMetrics),{},{iceConnectionEnd:h.metric})});case ln.KEY_METRIC_PUBLISH:{const p=u.keyMetrics.publish,m=p.findIndex(E=>E.trackId===h.metric.trackId);return m!==-1?(p[m]=rt(rt({},p[m]),h.metric),rt(rt({},u),{},{keyMetrics:rt(rt({},u.keyMetrics),{},{publish:[...p]})})):rt(rt({},u),{},{keyMetrics:rt(rt({},u.keyMetrics),{},{publish:[...u.keyMetrics.publish,h.metric]})})}case ln.KEY_METRIC_SUBSCRIBE:{const p=u.keyMetrics.subscribe,m=p.findIndex(E=>E.userId===h.metric.userId&&E.type===h.metric.type);return m!==-1?(p[m]=rt(rt({},p[m]),h.metric),rt(rt({},u),{},{keyMetrics:rt(rt({},u.keyMetrics),{},{subscribe:[...p]})})):rt(rt({},u),{},{keyMetrics:rt(rt({},u.keyMetrics),{},{subscribe:[...u.keyMetrics.subscribe,h.metric]})})}case ln.SET_CLOUD_PROXY_SERVER_MODE:return u.cloudProxyServerMode=h.mode,u;case ln.RECORD_JOIN_CHANNEL_SERVICE:return typeof h.index!="number"?u.joinChannelServiceRecords=[...u.joinChannelServiceRecords,h.record]:(u.joinChannelServiceRecords[h.index]=rt(rt({},u.joinChannelServiceRecords[h.index]),h.record),u.joinChannelServiceRecords=[...u.joinChannelServiceRecords]),u;case ln.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return u.joinChannelServiceRecords=[],u;case ln.RESET_KEY_METRICS:return u.keyMetrics={publish:[],subscribe:[]},u;case ln.SET_USE_P2P:return rt(rt({},u),{},{useP2P:h.val});case ln.SET_TRANSPORT_TYPE:return rt(rt({},u),{},{p2pTransport:h.val});default:return u}}(this.state,l)}set sessionId(l){this.dispatch({type:ln.SET_SESSION_ID,sessionId:l})}get sessionId(){return this.state.sessionId}set cid(l){this.state.cid=l}get cid(){return this.state.cid}set codec(l){this.state.codec=l}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(l){this.dispatch({type:ln.SET_P2P_ID,p2pId:l})}get p2pId(){return this.state.p2pId}set dcId(l){this.dispatch({type:ln.SET_DC_ID,dcId:l})}get dcId(){return this.state.dcId}set uid(l){this.dispatch({type:ln.SET_UID,uid:l})}get uid(){return this.state.uid}set intUid(l){this.dispatch({type:ln.SET_INT_UID,intUid:l})}get intUid(){return this.state.intUid}set pubId(l){this.dispatch({type:ln.SET_PUB_ID,pubId:l})}get pubId(){return this.state.pubId}set cloudProxyServerMode(l){this.dispatch({type:ln.SET_CLOUD_PROXY_SERVER_MODE,mode:l})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useP2P(l){this.dispatch({type:ln.SET_USE_P2P,val:l})}get useP2P(){return this.state.useP2P}set p2pTransport(l){this.dispatch({type:ln.SET_TRANSPORT_TYPE,val:l})}get p2pTransport(){return this.state.p2pTransport}set hasStartJoinChannel(l){this.state.hasStartJoinChannel=l}get hasStartJoinChannel(){return this.state.hasStartJoinChannel}set isABTestSuccess(l){this.state.isABTestSuccess=l}get isABTestSuccess(){return this.state.isABTestSuccess}clientCreated(){this.dispatch({type:ln.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:ln.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:ln.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:ln.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:ln.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:ln.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:ln.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:ln.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:ln.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:ln.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:ln.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:ln.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(l,u,h,p){this.dispatch({type:ln.KEY_METRIC_PUBLISH,metric:rt(rt({trackId:l,type:u},h&&{publishStart:h}),p&&{publishEnd:p})})}subscribe(l,u,h,p,m,E,y){this.dispatch({type:ln.KEY_METRIC_SUBSCRIBE,metric:rt(rt(rt(rt(rt({userId:l,type:u},h&&{subscribeStart:h}),p&&{subscribeEnd:p}),m&&{firstFrame:m}),E&&{streamAdded:E}),y&&{firstDecoded:y})})}massSubscribe(l,u,h,p){l.forEach(m=>{this.dispatch({type:ln.KEY_METRIC_SUBSCRIBE,metric:rt(rt(rt({userId:m.userId,type:m.type},u&&{subscribeStart:u}),h&&{subscribeEnd:h}),p&&{firstFrame:p})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(l,u){l.service==="gateway"&&Array.isArray(l.urls)&&(l.urls=l.urls.map(h=>h.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof u!="number"?(this.dispatch({type:ln.RECORD_JOIN_CHANNEL_SERVICE,record:rt(rt({},l),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(u<0||u>=this.state.joinChannelServiceRecords.length||this.dispatch({type:ln.RECORD_JOIN_CHANNEL_SERVICE,record:l,index:u}),u)}catch{return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:ln.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:ln.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch{return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(l){this.dispatch({type:ln.AVOID_JOIN_START,avoidJoinStart:l})}}(t.codec,t.audioCodec,t.mode,this._clientId),this._leaveMutex=new Ji("client-leave",this._clientId),this._publishMutex=new Ji("client-publish",this._clientId),this._renewTokenMutex=new Ji("client-renewtoken",this._clientId),this._subscribeMutex=new Ji("client-subscribe",this._clientId),this.store.clientCreated(),t.proxyServer&&this.setProxyServer(t.proxyServer,!0),t.turnServer&&this.setTurnServer(t.turnServer,!0),k.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(ss," build: ").concat(Zw,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),t.clientRoleOptions)try{Vw(t.clientRoleOptions),i=Object.assign({},t.clientRoleOptions)}catch(l){k.warning("[".concat(this._clientId,"] ").concat(l.toString()))}var a;this._statsCollector=new V0(this.store),this._statsCollector.onStatsException=(l,u,h)=>{k.warn("[".concat(this._clientId,"] receive exception msg, code: ").concat(l,", msg: ").concat(u,", uid: ").concat(h)),this.safeEmit(cn.EXCEPTION,{code:l,msg:u,uid:h})},this._statsCollector.onUploadPublishDuration=(l,u,h,p)=>{const m=this._users.find(E=>E.uid===l);m&&dt.peerPublishStatus(this._sessionId,{subscribeElapse:p,audioPublishDuration:u,videoPublishDuration:h,peer:m._uintid})},this.store.useP2P=t.mode==="p2p",this._gateway=new Gfe(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:t.websocketRetryConfig||ti,httpRetryConfig:t.httpRetryConfig||ti,forceWaitGatewayResponse:t.forceWaitGatewayResponse===void 0||t.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:t.role,clientRoleOptions:i}),this._configDistribute=new npe(this._clientId,this.store),this.store.useP2P?(this._p2pChannel=(a={store:this.store,statsCollector:this._statsCollector},Xl("P2PChannel").create(a)),this._handleP2PEvents()):this._p2pChannel=new $0(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(t,n,i,a,l){let u=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5],h=arguments.length>6&&arguments[6]!==void 0&&arguments[6];Vn("JOIN_GATEWAY_USE_443PORT_ONLY",u),Vn("JOIN_GATEWAY_USE_DUAL_DOMAIN",h);const p=this._gateway.signal.websocket;return p instanceof PI&&(p.use443PortOnly=u,p.tryDoubleDomain=h),async function(m,E,y){x_.get(m)||x_.set(m,[]),N_.get(m)||N_.set(m,E),il.get(m)||il.set(m,0);const R=x_.get(m),A=N_.get(m);if(!R||!A)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(il.get(m)===A){const K=v0();R.push(K),await K.promise}il.set(m,il.get(m)+1);for(var D=arguments.length,H=new Array(D>3?D-3:0),B=3;B<D;B++)H[B-3]=arguments[B];const $=await y(...H);return il.set(m,il.get(m)-1),il.get(m)===A-1&&R.length>0&&(R[0].resolve(),R.shift()),il.get(m)===0&&(x_.set(m,[]),N_.set(m,0),il.set(m,0)),$}("client.join",Q("JOIN_MAX_CONCURRENCY"),this.join.bind(this),t,n,i,a,l)}async join(t,n,i,a,l){const u=++this._numberOfJoinCount;this.store.joinStart(),a&&(this.store.uid=a);const h=(U_||U_||(U_=(window.location.protocol.split(":")[0]||"").toUpperCase(),U_))==="HTTPS",p=w3()?window.isSecureContext:"Browser Not Support";if(!w3()&&!h||!window.isSecureContext){const B="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";k.warning(B)}this.connectionState==="DISCONNECTED"&&(this.store.avoidJoinStart=Math.round(Date.now()),k.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart))),dt.setAppId(t);try{if(!i&&i!==null)throw new ye(X.INVALID_PARAMS,"Invalid token: ".concat(i,". If you don not use token, set it to null"));i&&xi(i,"token",1,2047),xi(t,"appid",1,2047),aS(n),a&&sS(a),l&&xi(l,"optionalInfo",1,2047)}catch(B){throw dt.reportApiInvoke(Xd(),{name:ei.JOIN,options:[t,n,i,a],states:{isHttps:h,isSecureContext:p},tag:wr.TRACER}).onError(B),B}if(this._leaveMutex.isLocked&&(k.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),k.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){const B=new ye(X.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw dt.reportApiInvoke(Xd(),{name:ei.JOIN,options:[t,n,i,a],states:{isHttps:h,isSecureContext:p},tag:wr.TRACER}).onError(B),B}this._gateway.state="CONNECTING";const m=await R8({appId:t,cname:n,uid:a,stringUid:typeof a=="string"?a:void 0,token:i||t,cloudProxyServer:this._cloudProxyServerMode});if(!this._joinAndNotLeaveYet)throw new ye(X.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));const E=(m==null?void 0:m.sid)||Xd();k.info("[".concat(this._clientId,"] start join channel ").concat(n,", join number: ").concat(u)),this._sessionId||(this._sessionId=E,this.store.sessionId=this._sessionId);const y=dt.reportApiInvoke(E,{id:this._clientId,name:ei.JOIN,options:[t,n,i,a],states:{isHttps:h,isSecureContext:p},tag:wr.TRACER}),R=qs(qs(qs({},this._rtmConfig),{},{role:this.role,clientId:this._clientId,appId:t,sid:this._sessionId,cname:n,uid:typeof a!="string"?a:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:i||t,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:l,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint,preload:!!m},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType}),{},{apRequestDetail:Q("AP_REQUEST_DETAIL")||void 0});if(this._useLocalAccessPoint&&(R.setLocalAPVersion=this._setLocalAPVersion),typeof a=="string"&&(R.stringUid=a,this._uintUid?(R.uid=this._uintUid,this._uintUid=void 0):R.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(R.aesmode=this._encryptionMode,R.aespassword=await(async B=>{const $=function(ge){const Ee=window.atob(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),me=new Uint8Array(new ArrayBuffer(Ee.length));for(let Te=0;Te<Ee.length;Te+=1)me[Te]=Ee.charCodeAt(Te);return me}(),K=await window.crypto.subtle.importKey("spki",$,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),Y=Uw(B),ce=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},K,Y);return function(ge){let Ee="";for(let me=0;me<ge.length;me+=1)Ee+=String.fromCharCode(ge[me]);return window.btoa(Ee)}(new Uint8Array(ce))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new ye(X.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(R.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&(this._encryptionMode==="aes-128-gcm2"||this._encryptionMode==="aes-256-gcm2"))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){const B=new TextEncoder,$=Q("USE_PURE_ENCRYPTION_MASTER_KEY")?B.encode(R.appId+this._encryptionSecret+this._encryptionSecret):B.encode(R.appId+R.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(K,Y,ce){const ge=await window.crypto.subtle.importKey("raw",Y,"PBKDF2",!1,["deriveBits","deriveKey"]),Ee=K==="aes-128-gcm2"?128:256,me=await window.crypto.subtle.deriveBits({name:"PBKDF2",iterations:M3,hash:"SHA-256",salt:ce},ge,Ee+Che);return new Uint8Array(me).subarray(Ee/8)}(this._encryptionMode,$,Yd(this._encryptionSalt)),this._encryptDataStreamKey=await async function(K,Y,ce){const ge=await window.crypto.subtle.importKey("raw",Y,"PBKDF2",!1,["deriveBits","deriveKey"]),Ee=K==="aes-128-gcm2"?128:256;return await window.crypto.subtle.deriveKey({name:"PBKDF2",iterations:M3,hash:"SHA-256",salt:ce},ge,{name:"AES-GCM",length:Ee},!0,["encrypt","decrypt"])}(this._encryptionMode,$,Yd(this._encryptionSalt))}else p?k.warning("[".concat(this._clientId,"] encrypt datastream must be running in a secure context, fallback to plain data stream")):k.warning("[".concat(this._clientId,"] current browser do not support WebCrypto ,fallback to plain data stream")),this._encryptDataStream=!1;else this._encryptDataStream=!1,k.debug("[".concat(this._clientId,"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream"));this._startSession(this._sessionId,{channel:n,appId:t,stringUid:R.stringUid});const A=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&A===this._sessionId&&dt.joinChannelTimeout(this._sessionId,5)},5e3);try{var D;let B;const $=R.cloudProxyServer;if(Ke(D=["proxy3","proxy4","proxy5"]).call(D,$)){const Ee=Q("PROXY_SERVER_TYPE3");Array.isArray(Ee)?R.proxyServer=Ee[0]:R.proxyServer=Ee}if(dt.setProxyServer(R.proxyServer),k.setProxyServer(R.proxyServer),this.store.requestAPStart(),m){if(k.debug("[".concat(this._clientId,"] get serverInfo Success from Preload Cache ").concat(R.stringUid?", ".concat(R.stringUid," => ").concat(m.intUid):""," ")),R.stringUid&&!R.uid&&(R.uid=m.intUid),B={gatewayInfo:m.ap.gatewayInfo},Q("JOIN_WITH_FALLBACK_MEDIA_PROXY")&&R.turnServer.mode==="auto")if(m.ap.proxyInfo.addresses.length===0)k.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers");else{const Ee=(await v6(m.ap.proxyInfo,m.ap.gatewayInfo.uid)).map(me=>({turnServerURL:me.address,tcpport:me.tcpport||Gi.tcpport,udpport:me.udpport||Gi.udpport,username:me.username||Gi.username,password:me.password||Gi.password,forceturn:!1,security:!0}));R.turnServer={mode:"manual",servers:Ee}}A8(m,R.stringUid)}else{if(R.stringUid&&!R.uid){let Ee;[Ee,B]=await Ye.all([W6(R.stringUid,R,this._axiosCancelSource.token,this._config.httpRetryConfig||ti,this.store),z6(R,this._axiosCancelSource.token,this._config.httpRetryConfig||ti,!0,this.store)]),k.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(R.stringUid," => ").concat(Ee)),R.uid=Ee,B.gatewayInfo.uid=Ee,B.gatewayInfo.res.uid=Ee}else B=await z6(R,this._axiosCancelSource.token,this._config.httpRetryConfig||ti,!0,this.store);if(!this._joinAndNotLeaveYet)throw new ye(X.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"))}this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(R,this._axiosCancelSource.token),this._configDistribute.on(N0.UPDATE_BITRATE_LIMIT,Ee=>{this._p2pChannel.updateBitrateLimit(Ee)}),this._configDistribute.on(N0.UPDATE_CLIENT_ROLE_OPTIONS,Ee=>{this._setClientRoleOptions(Ee)})},0),this._key=i||t;const K=B.gatewayInfo,Y=R.uid?R.uid:K.uid;this._joinInfo=qs(qs({},R),{},{cid:K.cid,uid:Y,vid:K.vid,apResponse:K.res,apGatewayAddress:K.apGatewayAddress,uni_lbs_ip:K.uni_lbs_ip,gatewayAddrs:K.gatewayAddrs}),this.store.intUid=Y,this.store.cid=K.cid;const ce=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new ye(X.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));y.onSuccess(ce),this._appId=t,this._channelName=R.cname,this._uid=ce,this.store.uid=ce,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(Hi()?"beforeunload":"pagehide",this._handleBeforeUnload),this._statsCollector.startUpdateStats()},0);const ge=R.stringUid?"string uid: ".concat(R.stringUid,",uid: ").concat(R.uid):"uid: ".concat(this._uid);return k.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(n,",").concat(ge)),setTimeout(()=>{k.startUpload()},5e3),this.store.joinEnd(),H=this,Ke(rh).call(rh,H)||rh.push(H),this._cloudProxyServerMode==="disabled"&&yn().supportWebCrypto&&Q("ENABLE_PRELOAD")&&oA(this._joinInfo),ce}catch(B){const $=Array.isArray(B)?B[0]:B;throw $&&$.code===X.OPERATION_ABORTED?k.warning("[".concat(this._clientId,"] join number: ").concat(u,", Joining channel failed, rollback"),$):k.error("[".concat(this._clientId,"] join number: ").concat(u,", Joining channel failed, rollback"),$),$.code!==X.OPERATION_ABORTED&&this._numberOfJoinCount===u&&(this._gateway.state="DISCONNECTED",this._reset()),y.onError($),$}var H}_joinGateway(){if(!this._joinInfo||!this._key)throw new ye(X.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||this._joinInfo.proxyServer||!Q("JOIN_WITH_FALLBACK_SIGNAL_PROXY")))}async leave(){k.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(Hi()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(n){const i=rh.indexOf(n);i!==-1&&rh.splice(i,1)}(this),this._statsCollector.stopUpdateStats();const t=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return k.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void t();await this._gateway.leave(this.connectionState!=="CONNECTED",Ln.LEAVE),k.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),t()}async publish(t){let n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!Array.isArray(t)){if(!(t instanceof Jf))return this._publishDataChannel(t);t=[t]}if(t.length===0)throw new ye(X.INVALID_PARAMS,"param list is empty");const i=t;if(this._gateway.role==="audience")throw new ye(X.INVALID_OPERATION,"audience can not publish stream");for(const l of i){if(!(l instanceof Jf))throw new ye(X.INVALID_PARAMS,"parameter is not local track");if(!l._enabled&&n)throw new ye(X.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(l.getTrackId()))}k.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(i.map(l=>"".concat(l.getTrackId()," "))));const a=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),n&&i.forEach(l=>{const u=this._configDistribute.getBitrateLimit();l instanceof sr&&u&&l.setBitrateLimit(u.uplink)});try{await this._publishHighStream(i),k.info("[".concat(this._clientId,"] Publish success, id ").concat(i.map(l=>"".concat(l.getTrackId()," "))))}catch(l){throw k.error("[".concat(this._clientId,"] publish error"),l.toString()),l}finally{a()}}async _publishDataChannel(t){zn(t.id,"id",0,65535,!0),zl(t.ordered,"ordered"),xi(t.metadata,"metadata",0,512),k.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(t.id));const n=await this._publishMutex.lock();try{if(this._p2pChannel.getAllDataChannels().findIndex(l=>l.id===t.id)!==-1)throw new ye(X.INVALID_PARAMS,"Invalid id: ".concat(t.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||this._uid===void 0)throw new ye(X.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new ye(X.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&Q("FORCE_TURN")&&!Q("TURN_ENABLE_TCP")&&!Q("TURN_ENABLE_UDP"))throw new ye(X.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");const i=function(l){return k6(l,!1)}(t),a=await this._p2pChannel.publishDataChannel([i]);if(a.length>0){if(typeof i._originDataChannelId!="number")throw k.error("[".concat(this._clientId,"] can not publish with mediaType datachannel, cannot get RTCDatachannel id")),new ye(X.CREATE_DATACHANNEL_ERROR);try{await Ye.all(a.map(l=>this._uid&&this._gateway.publishDataChannel(this._uid,l,!0))),await i._waitTillOpen()}catch(l){if(l.code!==X.DISCONNECT_P2P)throw l}}return k.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(i.id)),i}catch(i){throw k.error("[".concat(this._clientId,"] publish datachannels error"),i.toString()),i}finally{n()}}async unpublish(t){if(!this._joinInfo||this._uid===void 0)throw new ye(X.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let n=[];if(t)if(Array.isArray(t))n=t;else{if(!(t instanceof Jf))return this._unpublishDataChannel([t]);n=[t]}else this.store.useP2P||await this._unpublishDataChannel(),n=this._p2pChannel.getAllTracks(!0);k.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(n.map(a=>"".concat(a.getTrackId()," "))," "));const i=await this._publishMutex.lock();try{if(this.store.useP2P){const a=await this._p2pChannel.unpublish(n);a&&await this._gateway.sendExtensionMessage(Br.UNPUBLISH,{unpubMsg:a},!0)}else{const a=await this._p2pChannel.unpublish(n);a&&await this._gateway.unpublish(a,this._uid),k.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(n.map(l=>"".concat(l.getTrackId()))))}}catch(a){throw k.error("[".concat(this._clientId,"] unpublish error"),a.toString()),a}finally{i&&i()}}async _unpublishDataChannel(t){t!==void 0&&t.length!==0||(t=this._p2pChannel.getAllDataChannels()),k.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(t.map(i=>"".concat(i.id," "))," "));const n=await this._publishMutex.lock();try{const i=await this._p2pChannel.unpublishDataChannel(t);i&&await this._gateway.unpublishDataChannel(i),k.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(t.map(a=>"".concat(a.id))))}catch(i){throw k.error("[".concat(this._clientId,"] unpublish dataChannel error"),i.toString()),i}finally{n&&n()}}async subscribe(t,n,i){if(!(t instanceof zu)){const a=this.remoteUsers.find(l=>l.uid===t);if(!a)throw new ye(X.INVALID_REMOTE_USER,"user is not in the channel");t=a}return n==="datachannel"?this._subscribeDataChannel(t,i):this._subscribe(t,n)}async presubscribe(t,n){if(mi(n,"mediaType",["audio","video"]),this.store.useP2P)throw new ye(X.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new ye(X.INVALID_OPERATION,"can't presub when not join");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new ye(X.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));const i=n===it.AUDIO,a=n===it.VIDEO,l=await this._subscribeMutex.lock();try{const{ssrcId:u,ortc:h,rtxSsrcId:p,cname:m,uint_id:E}=await this._gateway.presubscribe(t,n,!0);if(u==null)throw new ye(X.UNEXPECTED_RESPONSE,"no ssrc id");let y=this._users.find(A=>A.uid===t);y||(y=new zu(t,E||t),y._is_pre_created=!0,this._users.push(y)),m&&(y._cname=m),y._uintid||(y._uintid=E||t),i&&(y._audioSSRC=u,y._audio_pre_subscribed=!0,h&&(y._audioOrtc=h)),a&&(y._videoSSRC=u,y._video_pre_subscribed=!0,h&&(y._videoOrtc=h),p!=null&&(y._rtxSsrcId=p)),k.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(u)),await this._p2pChannel.subscribe(y,n,u,p,h);const R=i?y._audioTrack:y._videoTrack;if(!R)throw new ye(X.UNEXPECTED_ERROR,"can not find remote track in user");return i&&(y._trust_audio_stream_added_state_=!0,y._audio_added_=!0),a&&(y._trust_video_stream_added_state_=!0,y._video_added_=!0),R}catch(u){throw k.error("[".concat(this._clientId,"] presub user ").concat(t," error"),u),u}finally{l()}}async _subscribeDataChannel(t,n){var i;if(zn(n,"channelId",0,65535,!0),!this._joinInfo)throw new ye(X.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new ye(X.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));if(!this._users.find(p=>p===t))throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", this user is not in the channel")),new ye(X.INVALID_REMOTE_USER,"user is not in the channel");if(!t.hasAudio&&!t.hasVideo&&t._dataChannels.length===0)throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", user is not published")),new ye(X.INVALID_REMOTE_USER,"user is not published");const l=(i=t._dataChannels)===null||i===void 0?void 0:i.find(p=>p.id===n);if(!l)throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid," with mediaType datachannel, remote datachannel is not published")),new ye(X.REMOTE_USER_IS_NOT_PUBLISHED);const u=await this._subscribeMutex.lock();k.info("[".concat(this._clientId,"] subscribe user ").concat(t.uid,", mediaType: datachannel"));try{const p=await this._p2pChannel.subscribeDataChannel(t,[l]);if(p&&Ke(p).call(p,l.id))try{var h;if(typeof l._originDataChannelId!="number")throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid," with mediaType datachannel, cannot get RTCDatachannel")),new ye(X.CREATE_DATACHANNEL_ERROR);const m={id:l.id,datachannelId:l._originDataChannelId,ordered:l.ordered,maxRetransmits:l.maxRetransmits,metadata:(h=l.metadata)!==null&&h!==void 0?h:""};await this._gateway.subscribeDataChannel(t.uid,m,!0),await l._waitTillOpen()}catch(m){if((m==null?void 0:m.code)!==X.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(t,[l]),m;await this._p2pChannel.unsubscribeDataChannel(t,[l]),this._p2pChannel.setPendingRemoteDataChannel(t,l.id)}return k.info("[".concat(this._clientId,"] subscribe success user ").concat(t.uid,", mediaType: datachannel")),l}finally{u()}}async _p2pSubscribe(t,n,i){if(mi(n,"mediaType",["audio","video"]),!this._joinInfo)throw new ye(X.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new ye(X.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(u=>u===t)){const u=new ye(X.INVALID_REMOTE_USER,"user is not in the channel");throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", this user is not in the channel")),u}if(!t.hasAudio&&!t.hasVideo){const u=new ye(X.INVALID_REMOTE_USER,"user is not published");throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", user is not published")),u}if(!i&&(n==="audio"&&!t.hasAudio||n==="video"&&!t.hasVideo)){const u=new ye(X.REMOTE_USER_IS_NOT_PUBLISHED);throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid," with mediaType ").concat(n,", remote track is not published")),u}const l=await this._subscribeMutex.lock();k.info("[".concat(this._clientId,"] subscribe user ").concat(t.uid,", mediaType: ").concat(n));try{if(await this._p2pChannel.hasRemoteMediaWithLock(t,n))await this._p2pChannel.unmuteRemote(t,n);else try{const h=n==="audio"?t._audioSSRC:t._videoSSRC,p=n==="audio"?t._audioMid:t._videoMid;this.store.subscribe(t.uid,n,Date.now()),this.store.useP2P&&await this._p2pChannel.subscribe(t,n,h,p)}catch(h){throw h}k.info("[".concat(this._clientId,"] subscribe success user ").concat(t.uid,", mediaType: ").concat(n)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(t.uid,this._defaultStreamFallbackType).catch(h=>{k.warning("[".concat(this._clientId,"] auto set fallback failed"),h)});const u=n==="audio"?t._audioTrack:t._videoTrack;if(!u)throw new ye(X.UNEXPECTED_ERROR,"can not find remote track in user object");return u}catch(u){throw k.error("[".concat(this._clientId,"] subscribe user ").concat(t.uid," error"),u),u}finally{l()}}async _subscribe(t,n,i){if(this.store.useP2P)return this._p2pSubscribe(t,n);if(mi(n,"mediaType",["audio","video"]),!this._joinInfo)throw new ye(X.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new ye(X.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(E=>E===t)){const E=new ye(X.INVALID_REMOTE_USER,"user is not in the channel");throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", this user is not in the channel")),E}if(!t.hasAudio&&!t.hasVideo){const E=new ye(X.INVALID_REMOTE_USER,"user is not published");throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", user is not published")),E}if(!(i||(n!=="audio"||t.hasAudio&&t._audioSSRC!==void 0)&&(n!=="video"||t.hasVideo&&t._videoSSRC!==void 0))){const E=new ye(X.REMOTE_USER_IS_NOT_PUBLISHED);throw k.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid," with mediaType ").concat(n,", remote track is not published")),E}let l=n==="audio"?t._audioSSRC:t._videoSSRC,u=n==="audio"?t._audioOrtc:t._videoOrtc,h=n==="video"?t._rtxSsrcId:void 0,p={stream_type:n==="audio"?it.AUDIO:it.VIDEO,ssrcId:l};const m=await this._subscribeMutex.lock();k.info("[".concat(this._clientId,"] subscribe user ").concat(t.uid,", mediaType: ").concat(n));try{if(await this._p2pChannel.hasRemoteMediaWithLock(t,n))await this._p2pChannel.unmuteRemote(t,n);else try{const y=n==="audio"?t._audioSSRC:t._videoSSRC;y!==void 0&&y!==l&&(l=y,u=n==="audio"?t._audioOrtc:t._videoOrtc,h=n==="video"?t._rtxSsrcId:void 0,p={stream_type:n==="audio"?it.AUDIO:it.VIDEO,ssrcId:l}),eo.markSubscribeStart(this.store.clientId,l),this.store.subscribe(t.uid,n,Date.now()),await this._p2pChannel.subscribe(t,n,l,h,u);try{this._p2pChannel.isPreSubScribe(l)||await this._gateway.subscribe(t.uid,p,!0)}catch(R){if((R==null?void 0:R.code)!==X.WS_ABORT)throw await this._p2pChannel.unsubscribe(t,n),R;await this._p2pChannel.unsubscribe(t,n,!0),this._p2pChannel.setPendingRemoteMedia(t,n)}this.store.subscribe(t.uid,n,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,t,n)}catch(y){throw this._p2pChannel.reportSubscribeEvent(!1,y==null?void 0:y.code,t,n),y}k.info("[".concat(this._clientId,"] subscribe success user ").concat(t.uid,", mediaType: ").concat(n)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(t.uid,this._defaultStreamFallbackType).catch(y=>{k.warning("[".concat(this._clientId,"] auto set fallback failed"),y)});const E=n==="audio"?t._audioTrack:t._videoTrack;if(!E)throw new ye(X.UNEXPECTED_ERROR,"can not find remote track in user object");return E}catch(E){throw k.error("[".concat(this._clientId,"] subscribe user ").concat(t.uid," error"),E),E}finally{m()}}async massSubscribe(t){if(Wl(t,"subscribeList"),!this._joinInfo)throw new ye(X.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new ye(X.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const n=Date.now(),i=new Map,a=await this._subscribeMutex.lock();k.info("[".concat(this._clientId,"]start massSubscribe user ").concat(t.map(p=>{let{user:m,mediaType:E}=p;return"user: ".concat(m==null?void 0:m.uid,", mediaType: ").concat(E)}).join("; ")));const l=(t=[...t]).map(p=>{let{user:m,mediaType:E}=p;return{user:m,mediaType:E}}),u=await this._p2pChannel.globalLock();try{var h;for(let m=t.length-1;m>=0;m--){const E=t[m],{user:y,mediaType:R}=E;if(mi(R,"mediaType",["audio","video"]),!y){const B=new ye(X.INVALID_PARAMS,"user property does not exist in subscribeList item");throw k.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),B}if(!this._users.find(B=>B===y)){const B=new ye(X.INVALID_REMOTE_USER,"user is not in the channel");k.error("[".concat(this._clientId,"] can not massSubscribe ").concat(y.uid,", this user is not in the channel")),l[m].error=B,t.splice(m,1);continue}if(R==="audio"&&(!y.hasAudio||y._audioSSRC===void 0)||R==="video"&&(!y.hasVideo||y._videoSSRC===void 0)){const B=new ye(X.REMOTE_USER_IS_NOT_PUBLISHED);k.error("[".concat(this._clientId,"] can not subscribe ").concat(y.uid," with mediaType ").concat(R,", remote user is not published")),l[m].error=B,t.splice(m,1);continue}const D=Si.Video|Si.LwoVideo,H=i.get(y);if(H){if(R==="video"?H&D:H&Si.Audio){t.splice(m,1),k.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(y.uid,", mediaType:").concat(R," twice"));continue}i.set(y,H|(R==="video"?D:Si.Audio))}else i.set(y,R==="video"?D:Si.Audio)}for(let m=t.length-1;m>=0;m--){const E=t[m],{user:y,mediaType:R}=E,A=Si.Video|Si.LwoVideo;if(this._p2pChannel.hasRemoteMedia(y,R)){await this._p2pChannel.unmuteRemoteNoLock(y,R);const D=i.get(y);i.set(y,R==="video"?D^A:D^Si.Audio),t.splice(m,1)}}this.store.massSubscribe(t.map(m=>({userId:m.user.uid,type:m.mediaType})),n);let p=pc(h=Array.from(i.entries())).call(h,(m,E)=>{let[y,R]=E;if(R===0)return m;const A={stream_id:y.uid,stream_type:R};return R&Si.Audio&&(A.audio_ssrc=y._audioSSRC),R&Si.Video&&(A.video_ssrc=y._videoSSRC),m.push(A),m},[]);try{t.length>0&&await this._p2pChannel.massSubscribeNoLock(t.map(E=>{let{user:y,mediaType:R}=E;return{user:y,mediaType:R,ssrcId:R===it.VIDEO?y._videoSSRC:y._audioSSRC,rtxSsrcId:R===it.VIDEO?y._rtxSsrcId:void 0}}));const m=new Map;if(p=p.filter(E=>E.video_ssrc&&!this._p2pChannel.isPreSubScribe(E.video_ssrc)||E.audio_ssrc&&!this._p2pChannel.isPreSubScribe(E.audio_ssrc)||!E.video_ssrc&&!E.audio_ssrc),p.length>0){const E=await this._gateway.subscribeAll(p,!0);((E==null?void 0:E.users)||[]).forEach(y=>{let{stream_id:R,video_error_code:A,audio_error_code:D,error_code:H}=y;(A||D||H)&&m.set(R,{video_error_code:A,audio_error_code:D,error_code:H})})}if(Array.from(m.entries()).length>0){const E=[];Array.from(m.entries()).forEach(y=>{let[R,A]=y;const D=this.remoteUsers.find(H=>H.uid===R);if(D){let H;A.error_code||A.video_error_code&&A.audio_error_code?H=void 0:A.video_error_code?H=it.VIDEO:A.audio_error_code&&(H=it.AUDIO),E.push({user:D,mediaType:H})}}),E.length>0&&await this._p2pChannel.massUnsubscribeNoLock(E)}for(const E of l){const y=m.get(E.user.uid);if(y){const R=y.error_code||E.mediaType==="audio"&&y.audio_error_code||E.mediaType==="video"&&y.video_error_code;if(R){const A=P0(R);k.error("user:".concat(E.user.uid," mediaType:").concat(E.mediaType," has massSubscribe error ").concat(A.desc)),E.error=new ye(X.SUBSCRIBE_FAILED,"code ".concat(R,": ").concat(A.desc))}}E.error||(E.mediaType==="video"?E.track=E.user.videoTrack:E.track=E.user.audioTrack)}return this.store.massSubscribe(l.filter(E=>!E.error).map(E=>({userId:E.user.uid,type:E.mediaType})),void 0,Date.now()),l.forEach(E=>{var y;dt.subscribe(this.store.sessionId,{succ:!!E.error,ec:((y=E.error)===null||y===void 0?void 0:y.code)||null,video:E.mediaType===it.VIDEO,audio:E.mediaType===it.AUDIO,peerid:E.user.uid,subscribeRequestid:E.mediaType===it.VIDEO?E.user._videoSSRC:E.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-n),preSsrc:this._p2pChannel.isPreSubScribe(E.user._videoSSRC)},!0)}),k.info("[".concat(this._clientId,"] massSubscribe success ").concat(t.map(E=>{let{user:y,mediaType:R}=E;return"user: ".concat(y==null?void 0:y.uid,", mediaType: ").concat(R)}).join("; "))),l}catch(m){throw await this._p2pChannel.massUnsubscribeNoLock(t),m}}finally{u(),a()}}async unsubscribe(t,n,i){if(!(t instanceof zu)){const u=this.remoteUsers.find(h=>h.uid===t);if(!u)throw new ye(X.INVALID_REMOTE_USER,"user is not in the channel");t=u}if(n||this.store.useP2P){if(n==="datachannel")return this._unsubscribeDataChannel(t,i)}else await this._unsubscribeDataChannel(t,i);if(n&&mi(n,"mediaType",["audio","video"]),!this._joinInfo)throw new ye(X.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(u=>u===t)){const u=new ye(X.INVALID_REMOTE_USER,"user is not in the channel");throw k.error("[".concat(this._clientId,"] can not unsubscribe ").concat(t.uid,", user is not in the channel")),u}k.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(t.uid,", mediaType: ").concat(n));const l=await this._subscribeMutex.lock();try{if(this.store.useP2P)await this._p2pChannel.unsubscribe(t,n);else{const u=await this._p2pChannel.unsubscribe(t,n);u&&await this._gateway.unsubscribe(u,t.uid),n&&n!=="audio"||(t._audio_pre_subscribed=!1),n&&n!=="video"||(t._video_pre_subscribed=!1),t._is_pre_created&&k_(this._users,t),k.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(t.uid,", mediaType: ").concat(n))}}catch(u){if(u.code===X.DISCONNECT_P2P)return void k.warning("disconnecting p2p, abort unsubscribe request.");throw k.error("[".concat(this._clientId,"] unsubscribe user ").concat(t.uid," error"),u.toString()),u}finally{l()}}async _unsubscribeDataChannel(t,n){if(n&&zn(n,"id",0,65535,!0),!this._joinInfo)throw new ye(X.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");if(!this._users.find(l=>l===t)){const l=new ye(X.INVALID_REMOTE_USER,"user is not in the channel");throw k.error("[".concat(this._clientId,"] can not unsubscribe ").concat(t.uid,", user is not in the channel")),l}let a;if(typeof n=="number"){const l=t._dataChannels.find(u=>u.id===n);l&&(a=[l])}else a=t._dataChannels;if(a===void 0){const l=new ye(X.REMOTE_USER_IS_NOT_PUBLISHED);throw k.error("[".concat(this._clientId,"] can not unsubscribe ").concat(t.uid," with channelId ").concat(n,", remote datachannel is not published")),l}k.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(t.uid,", mediaType: datachannel, ids: ").concat(a.map(l=>l.id)));try{const l=await this._p2pChannel.unsubscribeDataChannel(t,a);l&&await this._gateway.unsubscribeDataChannel(l,t.uid),k.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(t.uid,", mediaType: datachannel, ids: ").concat(l))}catch(l){if(l.code===X.DISCONNECT_P2P)return void k.warning("disconnecting p2p, abort unsubscribe request.");throw k.error("[".concat(this._clientId,"] unsubscribe user ").concat(t.uid," error"),l.toString()),l}}async massUnsubscribe(t){if(Wl(t,"unsubscribeList"),!this._joinInfo)throw new ye(X.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");k.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(t.map(i=>{let{user:a,mediaType:l}=i;return"user: ".concat(a==null?void 0:a.uid,", mediaType: ").concat(l,";")}).join())),t=[...t];const n=new Map;for(let i=t.length-1;i>=0;i--){const{user:a,mediaType:l}=t[i];if(!a){const p=new ye(X.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw k.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),p}if(mi(l,"mediaType",["video","audio",void 0]),!this._users.find(p=>p===a)){k.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(a.uid,", user is not in the channel")),t.splice(i,1);continue}const h=Si.Video|Si.LwoVideo;if(n.has(a)){const p=n.get(a);let m;switch(l){case"video":m=p&h;break;case"audio":m=p&Si.Audio;break;default:m=p&(Si.Audio|h)}if(m){k.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(a.uid,",mediaType:").concat(l," twice.")),t.splice(i,1);continue}l?l==="audio"?n.set(a,p|Si.Audio):l==="video"&&n.set(a,p|h):n.set(a,p|Si.Audio|h)}else l?l==="audio"?n.set(a,Si.Audio):l==="video"&&n.set(a,h):n.set(a,Si.Audio|h)}try{const i=await this._p2pChannel.massUnsubscribe(t);i&&await this._gateway.massUnsubscribe(i),k.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(t.map(a=>{let{user:l,mediaType:u}=a;return"user: ".concat(l==null?void 0:l.uid,", mediaType: ").concat(u,";")}).join()))}catch(i){if(i.code===X.DISCONNECT_P2P)return void k.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw k.error("[".concat(this._clientId,"] massUnsubscribe error"),i.toString()),i}}async setLowStreamParameter(t){(function(i){if(!i)throw new we(X.INVALID_PARAMS);Rr(i.width)||Mw(i.width,"streamParameter.width"),Rr(i.height)||Mw(i.height,"streamParameter.height"),Rr(i.framerate)||Mw(i.framerate,"streamParameter.framerate"),Rr(i.bitrate)||zn(i.bitrate,"streamParameter.bitrate")})(t),(!t.width&&t.height||t.width&&!t.height)&&k.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),k.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(t));const n=this._configDistribute.getLowStreamConfigDistribute();if(n&&n.bitrate&&t.bitrate&&n.bitrate<t.bitrate&&(t.bitrate=n.bitrate),this._lowStreamParameter=t,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(t,Le.LocalVideoLowTrack)}async enableDualStream(){if(!yn().supportDualStream)throw dt.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new ye(X.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new ye(X.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(t){throw dt.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),t}this._isDualStreamEnabled=!0,dt.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),k.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new ye(X.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(Le.LocalVideoLowTrack))try{const t=await this._p2pChannel.unpublishLowStream();t&&await this._gateway.unpublish(t,this._joinInfo.stringUid||this._joinInfo.uid)}catch(t){throw dt.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),t}this._isDualStreamEnabled=!1,dt.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),k.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(t,n){if(function(a){mi(a,"role",["audience","host"])}(t),n&&Vw(n),this.mode==="rtc"||this.mode==="p2p")throw k.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new ye(X.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if(n&&n.level&&t==="host")throw new ye(X.INVALID_OPERATION,"host mode can not set audience latency level");if(t==="audience"&&this._p2pChannel.hasLocalMedia())throw new ye(X.INVALID_OPERATION,"can not set client role to audience when publishing stream");const i=this._config.role;this._joinInfo&&(this._joinInfo.role=t),t!==i&&Q("ENABLE_ROLE_SELECT_EDGE")?(this._gateway.updateClientRole(t,n),this._config.role=t,this._gateway.reconnect("recover",zi.REGIONAL_DISTRIBUTION)):(await this._gateway.setClientRole(t,n),this._config.role=t),k.info("[".concat(this._clientId,"] set client role to ").concat(t,", level: ").concat(n&&n.level))}async _setClientRoleOptions(t){if(this.mode==="rtc"||this.mode==="p2p"||this._config.role!=="audience"||this._p2pChannel.hasLocalMedia())return;let n=!1;try{t&&Vw(t),await this._gateway.setClientRole(this._config.role,t),n=!0}catch{}finally{k.info("[".concat(this._clientId,"] set client role options ").concat(n?"succeed":"failed",", options is ").concat(t))}}getRemoteInboundOffset(){var t;const n=(t=this._p2pChannel.getStats())===null||t===void 0?void 0:t.audioSend[0];if(!n||!n.timestamp)return 0;const i=n.timestamp-Date.now();return Math.abs(i)>1e3+n.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?i:0}getNtpWallTimeInMs(){return document.visibilityState==="visible"&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(t,n){if(xi(t,"proxyServer"),!n){if(this.connectionState!=="DISCONNECTED")throw new ye(X.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new ye(X.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=t,dt.setProxyServer(this._proxyServer),k.setProxyServer(this._proxyServer),k.info("[".concat(this._clientId,"] Set proxy server ").concat(n?"by initialize call":""," success."))}setTurnServer(t,n){if(Array.isArray(t)||(t=[t]),!n){if(this.connectionState!=="DISCONNECTED")throw new ye(X.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new ye(X.INVALID_OPERATION,"You have already set the proxy")}if(C0(t))return this._turnServer={servers:t,mode:"original-manual"},void k.info("[".concat(this._clientId,"] Set original turnserver ").concat(n?"by initialize call":""," success: ").concat(t.map(i=>i.urls).join(","),"."));t.forEach(i=>p3(i)),this._turnServer={servers:t,mode:"manual"},k.info("[".concat(this._clientId,"] Set turnserver ").concat(n?"by initialize call":""," success."))}setLicense(t){if(this.connectionState!=="DISCONNECTED")throw new ye(X.INVALID_OPERATION,"you should set license before join channel");if(xi(t,"license",32,32),!/^[A-Za-z\d]+$/.test(t))throw new ye(X.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=t,k.info("[".concat(this._clientId,"] set license success"),t)}startProxyServer(t){if(this.connectionState!=="DISCONNECTED")throw new ye(X.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint)throw new ye(X.INVALID_OPERATION,"You have already set the proxy");const n=[3,4,5];let i;switch(t===void 0&&(t=3),t){case 1:case 2:throw new ye(X.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:i="proxy3";break;case 4:i="proxy4";break;case 5:i="proxy5";break;default:throw new ye(X.INVALID_PARAMS,"proxy server mode must be ".concat(n.join("|")))}this._cloudProxyServerMode=i,this.store.cloudProxyServerMode=i,k.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if(this.connectionState!=="DISCONNECTED")throw new ye(X.INVALID_OPERATION,"Stop proxy server after leave channel");dt.setProxyServer(),k.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",k.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(t){if(!t.accessPoints)throw new ye(X.INVALID_PARAMS,"accessPoints is required.");Wl(t.accessPoints.serverList,"accessPoints.serverList"),xi(t.accessPoints.domain,"accessPoints.domain");const n=(A,D)=>{zn(A,D,0,65535,!0)};let i=443;if(t.accessPoints.port&&(n(t.accessPoints.port,"accessPoints.port"),i=t.accessPoints.port),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new ye(X.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");Q("CLOSE_AFB_FOR_LOCAL_AP")&&(Vn("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),Vn("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const a=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,l=t.accessPoints.domain,u=t.accessPoints.serverList.map(A=>a.test(A)?"".concat(A.replace(/\./g,"-"),".").concat(l):A),h=u.map(A=>"".concat(A,":").concat(i));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,Vn("WEBCS_DOMAIN",h),Vn("WEBCS_DOMAIN_BACKUP_LIST",h),Vn("GATEWAY_DOMAINS",[l]),t.report&&t.report.hostname&&Array.isArray(t.report.hostname)&&t.report.hostname.length?(Wl(t.report.hostname,"report.hostname"),Vn("EVENT_REPORT_DOMAIN",t.report.hostname[0]),Vn("EVENT_REPORT_BACKUP_DOMAIN",t.report.hostname[1]||t.report.hostname[0])):(Vn("EVENT_REPORT_DOMAIN",u[0]),Vn("EVENT_REPORT_BACKUP_DOMAIN",u[1]||u[0]));let p=6443;t.report&&t.report.port&&(n(t.report.port,"report.port"),p=t.report.port),Vn("STATS_COLLECTOR_PORT",p),t.report?Vn("ENABLE_EVENT_REPORT",!0):Vn("ENABLE_EVENT_REPORT",!1);let m="";t.log&&t.log.hostname&&Array.isArray(t.log.hostname)&&t.log.hostname.length?(Wl(t.log.hostname,"log.hostname"),m=t.log.hostname[0]):m=u[0];let E=6444;t.log&&t.log.port&&(n(t.log.port,"log.port"),E=t.log.port),Vn("LOG_UPLOAD_SERVER","".concat(m,":").concat(E));let y=[];t.cds&&t.cds.hostname&&Array.isArray(t.cds.hostname)&&t.cds.hostname.length?(Wl(t.cds.hostname,"cds.hostname"),y=t.cds.hostname):y=u;let R=443;t.cds&&t.cds.port&&(n(t.cds.port,"cds.port"),R=t.cds.port),Vn("CDS_AP",y.map(A=>"".concat(A,":").concat(R))),t.cds?Vn("ENABLE_CONFIG_DISTRIBUTE",!0):Vn("ENABLE_CONFIG_DISTRIBUTE",!1),k.info("set local access point v2 success")}setLocalAccessPoints(t,n){if(Wl(t,"serverList"),xi(n,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new ye(X.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const i=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;t=t.map(a=>i.test(a)?"".concat(a.replace(/\./g,"-"),".").concat(n):a),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,Vn("WEBCS_DOMAIN",t),Vn("WEBCS_DOMAIN_BACKUP_LIST",t),Vn("GATEWAY_DOMAINS",[n]),Vn("EVENT_REPORT_DOMAIN",t[0]),Vn("EVENT_REPORT_BACKUP_DOMAIN",t[1]||t[0]),Vn("LOG_UPLOAD_SERVER","".concat(t[0],":6444")),k.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(t){if(mi(t,"streamType",[0,1,4,5,6,7,8,9]),this._remoteDefaultVideoStreamType=t,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(t),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(n){throw k.error("[".concat(this._clientId,"] set default remote video stream type error"),n.toString()),n}else k.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(t))}async setRemoteVideoStreamType(t,n){mi(n,"streamType",[0,1,4,5,6,7,8,9]);try{await this._gateway.setRemoteVideoStreamType(t,n),setTimeout(()=>{const i=this._users.find(a=>a.uid===t);i&&i.videoTrack&&i.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(i){throw k.error("[".concat(this._clientId,"] set remote video stream type error"),i.toString()),i}k.info("[".concat(this._clientId,"] set remote ").concat(t," video stream type to ").concat(n)),this._remoteStreamTypeCacheMap.set(t,n)}async setStreamFallbackOption(t,n){mi(n,"fallbackType",[0,1,2,3,4,5,6,7,8]);try{await this._gateway.setStreamFallbackOption(t,n)}catch(i){throw k.error("[".concat(this._clientId,"] set stream fallback option"),i.toString()),i}k.info("[".concat(this._clientId,"] set remote ").concat(t," stream fallback type to ").concat(n)),this._streamFallbackTypeCacheMap.set(t,n)}setEncryptionConfig(t,n,i,a){(function(u){mi(u,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])})(t),xi(n,"secret");const l=["aes-128-gcm2","aes-256-gcm2"];if(Ke(l).call(l,t)){if(!i||!(i instanceof Uint8Array&&i.length===32))throw new ye(X.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(i)throw new ye(X.INVALID_PARAMS,"current encrypt mode does not need salt");if(a){if(zl(a,"encryptDataStream"),!Ke(l).call(l,t))throw new ye(X.INVALID_PARAMS,"current encrypt mode does not support data stream");this._encryptDataStream=!0}new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test(n)||k.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),this._encryptionMode=t,this._encryptionSecret=n,i&&(this._encryptionSalt=Mu(i))}async renewToken(t){if(xi(t,"token",1,2047),!this._key||!this._joinInfo)throw new ye(X.INVALID_OPERATION,"renewToken should not be called before user join");const n=this._key;this._key=t,this._joinInfo&&(this._joinInfo.token=t);const i=await this._renewTokenMutex.lock();try{if(Q("USE_NEW_TOKEN")){k.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const a=await tpe(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||ti);k.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:t,ticket:a})}else k.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:t});k.debug("[".concat(this._clientId,"] renewToken success"))}catch(a){throw this._key=n,this._joinInfo.token=n,k.error("[".concat(this._clientId,"] renewToken failed"),a.toString()),a}finally{i()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?k.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{const t=this._p2pChannel.getAudioLevels();this.safeEmit(cn.VOLUME_INDICATOR,t)},Q("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const t=this._statsCollector.getRTCStats(),n=this._gateway.getInChannelInfo();return t.Duration=Math.round(n.duration/1e3),t}async startLiveStreaming(t,n){if(!n){if(this.codec!=="h264")throw new ye(X.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new ye(X.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(t)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(t))throw new ye(X.LIVE_STREAMING_TASK_CONFLICT);const i=n?ul.TRANSCODE:ul.RAW;return this._createLiveStreamingClient(i).startLiveStreamingTask(t,i)}setLiveTranscoding(t){return this._createLiveStreamingClient(ul.TRANSCODE).setTranscodingConfig(t)}async stopLiveStreaming(t){const n=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(i=>i&&i.hasUrl(t));if(!n.length)throw new ye(X.INVALID_PARAMS,"can not find live streaming url to stop");await Ye.all(n.map(i=>i&&i.stopLiveStreamingTask(t)))}async startChannelMediaRelay(t){Q6(t),await this._createChannelMediaRelayClient().startChannelMediaRelay(t)}async updateChannelMediaRelay(t){Q6(t),await this._createChannelMediaRelayClient().updateChannelMediaRelay(t)}async stopChannelMediaRelay(){await this._createChannelMediaRelayClient().stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}sendAudioMetadata(t){this._p2pChannel instanceof $0&&this._p2pChannel.addAudioMetadata(t)}async sendStreamMessage(t){var n;let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new ye(X.INVALID_OPERATION,"can not send data stream, not joined");if((typeof t=="string"||t instanceof Uint8Array)&&(t={payload:t}),typeof t.payload=="string"){const l=new TextEncoder;t.payload=l.encode(t.payload)}let a=!1;if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Ke(n=["aes-128-gcm2","aes-256-gcm2"]).call(n,this._encryptionMode)&&(a=!0,t.payload=await async function(l,u,h){var p;const m=pc(p=Array.from(h)).call(p,(B,$)=>B+$,0),E={serverTs:0,seq:bhe++,length:h.length,checkSum:m},y=new Uint8Array(C3(m,2)),R=new ArrayBuffer(zf),A=new DataView(R);A.setUint32(0,E.serverTs),A.setUint16(4,E.seq),A.setUint16(6,E.length),A.setUint16(8,E.checkSum);const D=16-h.length%16;h=v3(h,new Uint8Array(D));const H=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:l,tagLength:k3,additionalData:y},u,h);return v3(new Uint8Array(R),new Uint8Array(H))}(this._encryptDataStreamIv,this._encryptDataStreamKey,t.payload)),new Blob([t.payload]).size>1024)throw new ye(X.INVALID_PARAMS,a?"encrypted stream message out of range.":"stream message out of range.");return this._gateway.signal.request(Dt.DATA_STREAM,{payload:Mu(t.payload),syncWithAudio:t.syncWithAudio,sendTs:Date.now()-upe},!i)}sendMetadata(t){if(!this._joinInfo)throw new ye(X.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([t]).size>1024)throw new ye(X.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Dt.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Mu(t)})}async sendCustomReportMessage(t){if(Array.isArray(t)||(t=[t]),t.forEach(Phe),!this._joinInfo)throw new ye(X.INVALID_OPERATION,"can not send custom report, not joined");await dt.sendCustomReportMessage(this._joinInfo.sid,t)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(t,n){mi(n.spatialLayer,"spatialLayer",[0,1,2,3]),mi(n.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(t,n)}catch(i){throw k.error("[".concat(this._clientId,"] pick SVC layer failed"),i.toString()),i}}async setRTMConfig(t){const{apRTM:n=!1,rtmFlag:i}=t;if(zl(n,"apRTM"),zn(i,"rtmFlag",0),this._rtmConfig.apRTM=n,this._rtmConfig.rtmFlag=i,k.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(t)," in ").concat(this.connectionState," state")),(this.connectionState==="CONNECTED"||this.connectionState==="RECONNECTING")&&this._joinInfo)return this._joinInfo.apRTM=n,this._joinInfo.rtmFlag=i,this._gateway.setRTM2Flag(i)}_reset(){if(k.debug("[".concat(this._clientId,"] reset client")),function(t){const n=rp.indexOf(t);n!==-1&&rp.splice(n,1)}(this._clientId),this.store.hasStartJoinChannel=!1,this.store.isABTestSuccess=!1,this._axiosCancelSource.cancel(),this._axiosCancelSource=zo.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo&&I8(this._joinInfo),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId&&dt.removeSid(this._sessionId),this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach(t=>{t._audioTrack&&t._audioTrack._destroy(),t._videoTrack&&t._videoTrack._destroy(),t._dataChannels&&(t._dataChannels.forEach(n=>n._close()),t._dataChannels.length=0)}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new Ji("client-publish",this._clientId),this._subscribeMutex=new Ji("client-subscribe",this._clientId),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}if(this._moderation)try{this.setImageModeration(!1)}catch{}}_startSession(t,n){var i;const a=t||Xd();t?k.debug("[".concat(this._clientId,"] new Session ").concat(a)):k.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(a));const l=t?"":this._sessionId||"";this._sessionId=a,this.store.sessionId=a,dt.addSid(a);const u={lts:new Date().getTime(),mode:this.mode,buildFormat:1,stringUid:(n==null?void 0:n.stringUid)||((i=this._joinInfo)===null||i===void 0?void 0:i.stringUid),channelProfile:this.mode==="live"?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:l,clientRole:this.role==="audience"?2:1};dt.sessionInit(this._sessionId,qs({cname:n.channel,appid:n.appId},u)),this._joinInfo&&(this._joinInfo.sid=a),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=a)}async _publishHighStream(t){if(!this._joinInfo||this._uid===void 0)throw new ye(X.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new ye(X.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&Q("FORCE_TURN")&&!Q("TURN_ENABLE_TCP")&&!Q("TURN_ENABLE_UDP"))throw new ye(X.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");k.debug("[".concat(this._clientId,"] publish high stream"));try{const i=await this._p2pChannel.publish(t,this._isDualStreamEnabled,this._lowStreamParameter);if(this.store.useP2P){const a=(await i.next()).value;if(a){try{await this._gateway.sendExtensionMessage(Br.PUBLISH,a,!0)}catch(l){throw i.throw(l),l}await i.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{const a=(await i.next()).value;if(a){var n;let l;try{l=await this._gateway.publish(this._uid,a,!0)}catch(u){if(u.code!==X.DISCONNECT_P2P)throw i.throw(u),u}await i.next(((n=l)===null||n===void 0?void 0:n.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const l of t)l instanceof sr&&l._encoderConfig&&this._gateway.setVideoProfile(l._encoderConfig).catch(u=>{k.debug("[".concat(this._clientId,"] stop setVideoProfile, because websocket is closed"))}),!l.muted&&l.enabled||await this._p2pChannel.muteLocalTrack(l)}}catch(i){if(this._p2pChannel.reportPublishEvent(!1,i==null?void 0:i.code,t),(i==null?void 0:i.code)===X.WS_ABORT)return;throw i}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new ye(X.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new ye(X.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));k.debug("[".concat(this._clientId,"] publish low stream"));const t=this._configDistribute.getLowStreamConfigDistribute();t&&t.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&t.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=t.bitrate));try{const i=await this._p2pChannel.publishLowStream(this._lowStreamParameter),a=(await i.next()).value;if(a){var n;let l;try{l=await this._gateway.publish(this._uid,a,!0)}catch(u){if(u.code!==X.DISCONNECT_P2P)throw i.throw(u),u}i.next(((n=l)===null||n===void 0?void 0:n.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(i){if(this._p2pChannel.reportPublishEvent(!1,i==null?void 0:i.code,void 0,!0),(i==null?void 0:i.code)===X.WS_ABORT)return;throw i}}_createLiveStreamingClient(t){const n=()=>{if(!this._joinInfo||!this._appId)return new ye(X.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const i=(a={joinInfo:this._joinInfo,appId:this._appId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig},Xl("LiveStreaming").create(a));var a;return i.onLiveStreamError=(l,u)=>{dt.reportApiInvoke(this._sessionId,{name:ei.ON_LIVE_STREAM_ERROR,options:[l,u],tag:wr.TRACER}).onSuccess(),this.safeEmit(cn.LIVE_STREAMING_ERROR,l,u)},i.onLiveStreamWarning=(l,u)=>{dt.reportApiInvoke(this._sessionId,{name:ei.ON_LIVE_STREAM_WARNING,options:[l,u],tag:wr.TRACER}).onSuccess(),this.safeEmit(cn.LIVE_STREAMING_WARNING,l,u)},i.on(xI.REQUEST_WORKER_MANAGER_LIST,(l,u,h)=>{if(!this._joinInfo)return h(new ye(X.INVALID_OPERATION,"can not find join info to get worker manager"));(async function(p,m,E,y){const R=Q("UAP_AP").slice(0,Q("AJAX_REQUEST_CONCURRENT")).map(A=>m.proxyServer?"https://".concat(m.proxyServer,"/ap/?url=").concat(A+"/api/v1?action=uap"):"https://".concat(A,"/api/v1?action=uap"));return await Yfe(R,p,m,E,y)})(l,this._joinInfo,this._axiosCancelSource.token,ti).then(u).catch(h)}),i};return t===ul.RAW?(this._liveRawStreamingClient=this._liveRawStreamingClient||n(),this._liveRawStreamingClient):(this._liveTranscodeStreamingClient=this._liveTranscodeStreamingClient||n(),this._liveTranscodeStreamingClient)}_createChannelMediaRelayClient(){if(!this._joinInfo)return new ye(X.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:n,sendResolutionHeight:i}=this.getLocalVideoStats(),a=(t={joinInfo:this._joinInfo,clientId:this._clientId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig,resolution:{width:n,height:i}},Xl("ChannelMediaRelay").create(t));a.on("state",l=>{l===ca.RELAY_STATE_FAILURE&&a&&a.dispose(),this.safeEmit(cn.CHANNEL_MEDIA_RELAY_STATE,l)}),a.on("event",l=>{this.safeEmit(cn.CHANNEL_MEDIA_RELAY_EVENT,l)}),this._channelMediaRelayClient=a,this._statsCollector.onStatsChanged=(l,u)=>{var h;l==="resolution"&&((h=this._channelMediaRelayClient)===null||h===void 0||h.setVideoProfile(u))}}var t;return this._channelMediaRelayClient}_handleUpdateDataChannel(t,n){const{added:i,deleted:a}=t,l=[];if(n){const u=[];this._users.forEach(h=>{h._dataChannels.forEach(p=>{i.every(m=>m.uid!==h._uintid||m.stream_id!==p.id)&&u.push({uid:h._uintid,stream_id:p.id,ordered:p.ordered,max_retrans_times:p.maxRetransmits,metadata:p.metadata})})}),u.length>0&&this._handleUpdateDataChannel({added:[],deleted:u})}Array.isArray(i)&&i.length>0&&i.forEach(u=>{const{uid:h,stream_id:p,ordered:m,max_retrans_times:E,metadata:y}=u,R=this._users.find(A=>A._uintid===h);if(!R)return void k.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"));if(k.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(h)),Ke(l).call(l,R)||l.push(R),R._uintid||(R._uintid=h),R._dataChannels.findIndex(A=>A.id===u.stream_id)===-1){const A={id:p,ordered:!!m,maxRetransmits:E,metadata:y},D=function(H){return k6(H,!0)}(A);R._dataChannels.push(D),k.info("[".concat(this._clientId,"] remote user ").concat(R.uid," published datachannel")),n||this.safeEmit(cn.USER_PUBLISHED,R,"datachannel",A)}this._p2pChannel.hasPendingRemoteDataChannel(R,u.stream_id)&&(k.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(R.uid," after reconnect.")),this._subscribeDataChannel(R,u.stream_id).catch(A=>{k.error("[".concat(this._clientId,"] resubscribe datachannel error"),A.toString())}))}),n&&(this.safeEmit(cn.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(a)&&a.length>0&&a.forEach(u=>{const{uid:h,stream_id:p}=u,m=this._users.find(y=>y._uintid===h);if(!m)return void k.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));const E=m._dataChannels.find(y=>y.id===u.stream_id);E&&(k.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(h)),this._p2pChannel.unsubscribeDataChannel(m,[E]).then(y=>{if(m._dataChannels=m._dataChannels.filter(R=>R!==E),y)return this._gateway.unsubscribeDataChannel(y,m.uid)}),k.info("[".concat(this._clientId,"] remote user ").concat(h," unpublished datachannel ,id:").concat(E.id)),this.safeEmit(cn.USER_UNPUBLISHED,m,"datachannel",E._config))})}_handleRemoveDataChannels(t){const n=this._users.find(i=>i.uid===t.uid);if(n){if(n._dataChannels!==void 0&&n._dataChannels.length>0){k.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(t.uid));const i=()=>{k.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished datachannel")),n._dataChannels.forEach(a=>{this.safeEmit(cn.USER_UNPUBLISHED,n,"datachannel",a._config)})};this._p2pChannel.unsubscribeDataChannel(n,n._dataChannels).then(a=>{if(a)return this._gateway.unsubscribeDataChannel(a,n.uid)}),i()}}else k.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(Ri.UPDATE_GATEWAY_CONFIG,()=>{(function(){let t;try{t=window.localStorage.getItem("websdk_ng_global_parameter")}catch(n){return void k.error("Error loading sdk config",n.message)}if(t)try{const n=JSON.parse(window.atob(t)),i=Date.now();Object.keys(n).forEach(a=>{const{value:l,type:u,expires:h}=n[a];h&&h<=i||u||bI()||!Object.prototype.hasOwnProperty.call(j_,a)||(Cc[a]=l,ar[a]=l,k.debug("Update gateway parameters from config distribute",a,l))})}catch(n){k.error("Error update config from local cache",n.message)}})()}),this._gateway.on(Ri.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(Ri.CONNECTION_STATE_CHANGE,(t,n,i)=>{var a;if(i===Ln.FALLBACK)return;const l=()=>{this.safeEmit(cn.CONNECTION_STATE_CHANGE,t,n,i)};if(dt.reportApiInvoke(this._sessionId||((a=this._gateway.joinInfo)===null||a===void 0?void 0:a.sid)||null,{name:ei.CONNECTION_STATE_CHANGE,options:[t,n,i],tag:wr.TRACER}).onSuccess(JSON.stringify({cur:t,prev:n,reason:i})),k.info("[".concat(this._clientId,"] signal connection state change: ").concat(n," -> ").concat(t)),t==="DISCONNECTED")return this._reset(),void l();if(t==="RECONNECTING")this._users.forEach(h=>{h._trust_in_room_=!1,h._trust_audio_enabled_state_=!1,h._trust_video_enabled_state_=!1,h._trust_audio_mute_state_=!1,h._trust_video_mute_state_=!1,h._trust_audio_stream_added_state_=!1,h._trust_video_stream_added_state_=!1,h._is_pre_created||(h._audio_pre_subscribed||(h._audioSSRC=void 0,h._audioOrtc=void 0),h._video_pre_subscribed||(h._videoSSRC=void 0,h._videoOrtc=void 0,h._rtxSsrcId=void 0),h._cname=void 0)}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(t==="CONNECTED"){var u;this._streamFallbackTypeCacheMap.forEach((h,p)=>{this._gateway.setStreamFallbackOption(p,h).catch(m=>{k.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),m)})}),this._remoteStreamTypeCacheMap.forEach((h,p)=>{this._gateway.setRemoteVideoStreamType(p,h).catch(m=>{k.warning("[".concat(this._clientId,"] auto set remote stream type failed"),m)})}),this._remoteDefaultVideoStreamType!==void 0&&((u=this._joinInfo)===null||u===void 0?void 0:u.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{k.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(h=>{k.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(h))}),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(h=>!h._trust_in_room_).forEach(h=>{k.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(h.uid)),this._handleUserOffline({uid:h.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(h=>{h._trust_audio_mute_state_||(k.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(h.uid)),this._handleMuteStream(h.uid,it.AUDIO,!1)),h._trust_video_mute_state_||(k.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(h.uid)),this._handleMuteStream(h.uid,it.VIDEO,!1)),h._trust_audio_enabled_state_||(k.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(h.uid)),this._handleSetStreamLocalEnable("audio",h.uid,!0)),h._trust_video_enabled_state_||(k.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(h.uid)),this._handleSetStreamLocalEnable("video",h.uid,!0)),h._trust_video_stream_added_state_||(k.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(h.uid)),this._handleResetAddStream(h,"video")),h._trust_audio_stream_added_state_||(k.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(h.uid)),this._handleResetAddStream(h,"audio")),h._video_added_||h._audio_added_||(k.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(h.uid)),this._handleRemoveStream({uid:h.uid,uint_id:h._uintid}))}))},1e3))}l()}),this._gateway.on(Ri.REQUEST_NEW_GATEWAY_LIST,async(t,n)=>{if(!this._joinInfo)return n(new ye(X.UNEXPECTED_ERROR,"can not recover, no join info"));try{let i;const a=await R8(qs(qs({},this._joinInfo),{},{uid:this._joinInfo.uid,stringUid:void 0}));a?(i=a.ap,A8(a),this._joinInfo.preload=!0):(i=await GI(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||ti,this.store),this._joinInfo.preload=!1),this._joinInfo&&(this._joinInfo.apResponse=i.gatewayInfo.res,this._joinInfo.gatewayAddrs=i.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=i.gatewayInfo.uni_lbs_ip);const l=[];i.gatewayInfo.gatewayAddrs.forEach(u=>{let{address:h}=u;const[p,m]=h.split(":");this._joinInfo&&this._joinInfo.proxyServer?l.push({proxy:this._joinInfo.proxyServer,host:p,port:m}):l.push({host:p,port:m})}),t(l)}catch(i){n(i)}}),this._gateway.on(Ri.NETWORK_QUALITY,t=>{this._networkQualitySensitivity==="normal"&&this.safeEmit(cn.NETWORK_QUALITY,t)}),this._gateway.on(Ri.STREAM_TYPE_CHANGE,(t,n)=>{this.safeEmit(cn.STREAM_TYPE_CHANGED,t,n),dt.reportApiInvoke(this._sessionId,{name:ei.STREAM_TYPE_CHANGE,options:[t,n],tag:wr.TRACER}).onSuccess(JSON.stringify({uid:t,streamType:n}))}),this._gateway.on(Ri.IS_P2P_DISCONNECTED,t=>{this._p2pChannel.isP2PDisconnected()?t(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?t(!1):t(!0)}),this._gateway.on(Ri.REQUEST_P2P_CONNECTION_PARAMS,async(t,n,i)=>{try{let a=await this._p2pChannel.getEstablishParams();Q("ENABLE_PREALLOC_PC")&&a||(a=await this._p2pChannel.startP2PConnection(t)),n(a)}catch(a){i(a)}}),this._gateway.on(Ri.JOIN_RESPONSE,(t,n)=>{if(this.store.useP2P)return;let i;t.attributes?i=t.attributes.userAttributes.preSubSsrcs:k.debug("no attributes in joinResponse");const a=b6(t.ortc,n,i);this._p2pChannel.connect(a)}),this._gateway.on(Ri.PRE_CONNECT_PC,async t=>{const{candidates:n,fingerprint:i}=t;if(this._joinInfo&&n.length>0&&!this._p2pChannel.isPlanB){var a;await this._p2pChannel.startP2PConnection({turnServer:this._joinInfo.turnServer});const{cert:l,cid:u}=this._joinInfo.apResponse;await this._p2pChannel.connect({iceParameters:{iceUfrag:"".concat(u,"_").concat(l),icePwd:"".concat(u,"_").concat(l)},dtlsParameters:{fingerprints:[{hashFunction:"sha-256",fingerprint:(a=Q("FINGERPRINT"))!==null&&a!==void 0?a:i}]},candidates:n,rtpCapabilities:{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},setup:"active",cname:"o/i14u9pJrxRKAsu",preallocation:!0})}})}_handleGatewaySignalEvents(){this._gateway.signal.on(un.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(un.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(un.ON_ADD_AUDIO_STREAM,t=>this._handleAddAudioOrVideoStream("audio",t.uid,t.ssrcId,t.cname,t.uint_id,t.ortc)),this._gateway.signal.on(un.ON_ADD_VIDEO_STREAM,t=>this._handleAddAudioOrVideoStream("video",t.uid,t.ssrcId,t.cname,t.uint_id,t.ortc,t.rtxSsrcId)),this._gateway.signal.on(un.ON_REMOTE_DATASTREAM_UPDATE,t=>{this._handleUpdateDataChannel(t)}),this._gateway.signal.on(un.ON_REMOTE_FULL_DATASTREAM_INFO,t=>{this._handleUpdateDataChannel({added:t.datastreams||[],deleted:[]},!0)}),this._gateway.signal.on(un.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(un.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(un.MUTE_AUDIO,t=>this._handleMuteStream(t.uid,it.AUDIO,!0)),this._gateway.signal.on(un.UNMUTE_AUDIO,t=>this._handleMuteStream(t.uid,it.AUDIO,!1)),this._gateway.signal.on(un.MUTE_VIDEO,t=>this._handleMuteStream(t.uid,it.VIDEO,!0)),this._gateway.signal.on(un.UNMUTE_VIDEO,t=>this._handleMuteStream(t.uid,it.VIDEO,!1)),this._gateway.signal.on(un.RECEIVE_METADATA,t=>{const n=Yd(t.metadata);this.safeEmit(cn.RECEIVE_METADATA,t.uid,n)}),this._gateway.signal.on(un.ON_DATA_STREAM,async t=>{var n;if(!t)return;let i=Yd(t.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Ke(n=["aes-128-gcm2","aes-256-gcm2"]).call(n,this._encryptionMode)){if(t.payload.length<zf)throw new ye(X.UNEXPECTED_RESPONSE,"payload length ".concat(t.payload.length," is less than header length ").concat(zf));i=await async function(u,h,p){const m=p.subarray(0,zf),E=m.slice(8,zf),y=(E[0]<<8)+E[1],R=(m[6]<<8)+m[7],A=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:u,tagLength:k3,additionalData:new Uint8Array(C3(y,2))},h,p.subarray(zf));return new Uint8Array(A).subarray(0,R)}(this._encryptDataStreamIv,this._encryptDataStreamKey,i)}let a=0;if(t.ordered||t.syncWithAudio){const l=this._p2pChannel.getStats(),u=this.remoteUsers.find(p=>p.uid===t.uid),h=l==null?void 0:l.audioRecv.find(p=>p.ssrc===(u==null?void 0:u._audioSSRC));a=h==null?void 0:h.jitterBufferMs}(a==null||Number.isNaN(a))&&(a=0),hpe(qs(qs({},t),{},{payload:i}),a,{id:this._clientId,onStreamMessage:typeof this.onStreamMessage=="function"?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})}),this._gateway.signal.on(un.ON_CRYPT_ERROR,()=>{ku(()=>{k.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(cn.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(un.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(un.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{k.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,Ln.TOKEN_EXPIRE),this.safeEmit(cn.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(un.ON_STREAM_FALLBACK_UPDATE,t=>{k.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(t.stream_id,", attr: ").concat(t.stream_type)),this.safeEmit(cn.STREAM_FALLBACK,t.stream_id,t.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(un.ON_PUBLISH_STREAM,t=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:t.proxy})),k.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(t))))}),this._gateway.signal.on(un.ENABLE_LOCAL_VIDEO,t=>{this._handleSetStreamLocalEnable("video",t.uid,!0)}),this._gateway.signal.on(un.DISABLE_LOCAL_VIDEO,t=>{this._handleSetStreamLocalEnable("video",t.uid,!1)}),this._gateway.signal.on(Mt.REQUEST_TIMEOUT,(t,n)=>{if(this._joinInfo)switch(t){case Dt.PUBLISH:{if(!n)return;const l=n.ortc;if(l){var i,a;const u=l.some(m=>{let{stream_type:E}=m;return E===Mn.Audio}),h=l.some(m=>{let{stream_type:E}=m;return E!==Mn.Audio}),p=l.some(m=>{let{stream_type:E}=m;return E===Mn.Screen||E===Mn.ScreenLow});n.state==="offer"&&dt.publish(this._joinInfo.sid,{eventElapse:eo.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:X.TIMEOUT,audio:u,video:h,p2pid:n.p2p_id,publishRequestid:this.store.pubId,screenshare:p,audioName:u?(i=l.find(m=>{let{stream_type:E}=m;return E===Mn.Audio}))===null||i===void 0||(i=i.ssrcs[0])===null||i===void 0?void 0:i.ssrcId.toString():void 0,videoName:h?(a=l.find(m=>{let{stream_type:E}=m;return E!==Mn.Audio}))===null||a===void 0||(a=a.ssrcs[0])===null||a===void 0?void 0:a.ssrcId.toString():void 0})}break}case Dt.SUBSCRIBE:n&&dt.subscribe(this._joinInfo.sid,{succ:!1,ec:X.TIMEOUT,audio:n.stream_type===it.AUDIO,video:n.stream_type===it.VIDEO,peerid:n.stream_id,subscribeRequestid:n.ssrcId,p2pid:this.store.p2pId,eventElapse:eo.measureFromSubscribeStart(this.store.clientId,n.ssrcId),preSsrc:this._p2pChannel.isPreSubScribe(n.ssrcId)})}}),this._gateway.signal.on(un.ON_P2P_OK,t=>{this.uid,this._uid}),this._gateway.signal.on(un.ON_PUBLISHED_USER_LIST,t=>{if(t==null||!t.users)return;Q("BLOCK_LOCAL_CLIENT")&&(t.users=t.users.filter(a=>!ih(a.string_id||a.stream_id,this.channelName)));const n=[],i=[];for(const a of t.users){let l=this._users.find(y=>y._uintid===a.stream_id);l?l._trust_in_room_=!0:(l=new zu(a.string_id||a.stream_id,a.stream_id),this._users.push(l),this.getListeners(cn.PUBLISHED_USER_LIST).length===0&&(k.debug("[".concat(this._clientId,"] user online"),a.stream_id),this.safeEmit(cn.USER_JOINED,l)));const u=Si.Audio&a.stream_type,h=(Si.Video|Si.LwoVideo)&a.stream_type,p=(65280&a.stream_type)!=0,m=u&&l.hasAudio,E=h&&l.hasVideo;h&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0,l._videoSSRC=a.video_ssrc,l._rtxSsrcId=a.video_rtx),u&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0,l._audioSSRC=a.audio_ssrc),u&&!m&&this.getListeners(cn.PUBLISHED_USER_LIST).length===0&&(k.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published audio")),this.safeEmit(cn.USER_PUBLISHED,l,"audio")),h&&!E&&this.getListeners(cn.PUBLISHED_USER_LIST).length===0&&(k.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published video")),this.safeEmit(cn.USER_PUBLISHED,l,"video")),(u&&!m||h&&!E||p)&&n.push(l),h&&this._p2pChannel.hasPendingRemoteMedia(l,"video")&&i.push({user:l,mediaType:"video"}),u&&this._p2pChannel.hasPendingRemoteMedia(l,"audio")&&i.push({user:l,mediaType:"audio"})}i.length>0&&(k.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(i.map(a=>"user: ".concat(a.user.uid,", mediaType: ").concat(a.mediaType)).join("; ")," ")),this.massSubscribe(i).catch(a=>{k.error("[".concat(this._clientId,"] mass resubscribe error"),a.toString())})),this.getListeners(cn.PUBLISHED_USER_LIST).length>0?Q("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=n:(k.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(n.map(a=>a.uid).join(", "))),this.safeEmit(cn.PUBLISHED_USER_LIST,n)):k.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(n.map(a=>a.uid).join(", ")))}),this._gateway.signal.on(un.ON_RTP_CAPABILITY_CHANGE,t=>{const{video_codec:n}=t;this._p2pChannel instanceof $0&&this._p2pChannel.updateRemoteRTPCapabilities(n.map(i=>i.toLowerCase()).filter(i=>{var a;return Ke(a=Object.keys($_)).call(a,i)}))})}_handleP2PEvents(){this._gateway.signal.on(un.ON_USER_OFFLINE,()=>{this._p2pChannel.disconnectForReconnect()}),this._gateway.signal.on(Br.PUBLISH,(t,n,i)=>{const{uid:a}=t;t.forEach(l=>{const{kind:u,ssrcs:h,mid:p,isMuted:m}=l;this._handleP2PAddAudioOrVideoStream(u,a,h[0].ssrcId,p);const E=this._users.find(y=>y.uid===a);return E&&this.store.useP2P?this._p2pChannel.mockSubscribe(E,u,h[0].ssrcId,p).then(()=>{n()}).catch(i):n(),this._handleMuteStream(a,u,!!m)})}),this._gateway.signal.on(Br.CALL,async(t,n,i)=>{if(this.store.useP2P)try{var a;n(await this._p2pChannel.startP2P({turnServer:(a=this._joinInfo)===null||a===void 0?void 0:a.turnServer},t))}catch(l){i(l)}}),this._gateway.signal.on(Mt.P2P_CONNECTION,async t=>{this.store.useP2P&&(await this._p2pChannel).p2pConnect(t)}),this._gateway.signal.on(Br.UNPUBLISH,async(t,n,i)=>{if(this.store.useP2P){const{unpubMsg:a,uid:l}=t,u=this._users.find(h=>h.uid===l);if(!u)return k.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(l)),void n();try{a.forEach(async h=>{let{stream_type:p}=h;const m=p===Mn.Audio?it.AUDIO:it.VIDEO;await this._p2pChannel.unsubscribe(u,m),this._handleMuteStream(l,m,!0)}),n()}catch(h){i(h)}}}),this._gateway.signal.on(Br.CONTROL,async(t,n)=>{const{action:i}=t;switch(i){case Bu.MUTE_LOCAL_VIDEO:this._handleMuteStream(n,it.VIDEO,!0);break;case Bu.MUTE_LOCAL_AUDIO:this._handleMuteStream(n,it.AUDIO,!0);break;case Bu.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",n),this._handleMuteStream(n,it.VIDEO,!1);break;case Bu.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",n),this._handleMuteStream(n,it.AUDIO,!1)}}),this._gateway.signal.on(Br.RESTART_ICE,async(t,n,i)=>{if(this.store.useP2P)try{const{direction:a,iceParameter:l}=t;a!==No.SEND_ONLY||l?n(await this._p2pChannel.restartICE(a,l)):(this._p2pChannel.handleDisconnect(a),n())}catch(a){i(a)}}),this._gateway.signal.on(Br.CANDIDATE,t=>{if(this.store.useP2P){const{candidate:n,direction:i}=t;this._p2pChannel.addRemoteCandidate(n,i)}}),this._p2pChannel.on(Et.RequestP2PRestartICE,async(t,n,i)=>{try{const{direction:a}=t;n(await this._gateway.sendExtensionMessage(Br.RESTART_ICE,t,a===No.SEND_ONLY))}catch(a){i(a)}}),this._p2pChannel.on(Et.LocalCandidate,t=>{this._gateway.sendExtensionMessage(Br.CANDIDATE,JSON.stringify(t),!0)}),this._p2pChannel.on(Et.RequestP2PMuteLocal,async(t,n,i)=>{try{await this._gateway.sendExtensionMessage(Br.CONTROL,t,!0),n()}catch(a){i(a)}}),this._p2pChannel.on(Et.RequestP2PUnmuteRemote,async(t,n,i)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(t,this._joinInfo.stringUid||this._joinInfo.uid),n()}catch(a){a.code===X.DISCONNECT_P2P?n():i(a)}else n()}),this._p2pChannel.on(Et.RequestP2PMuteRemote,async(t,n,i)=>{if(this._joinInfo)try{await this._gateway.muteRemote(t,this._joinInfo.stringUid||this._joinInfo.uid),n()}catch(a){a.code===X.DISCONNECT_P2P?n():i(a)}else n()}),this._p2pChannel.on(Et.StateChange,(t,n)=>{n===kn.Connected&&this._p2pChannel.republish()})}_handleP2PChannelEvents(){this._p2pChannel.on(Et.PeerConnectionStateChange,t=>{const n=this._peerConnectionState;t!==n&&(this.safeEmit(cn.PEERCONNECTION_STATE_CHANGE,t,n),this._peerConnectionState=t)}),this._p2pChannel.on(Et.RequestMuteLocal,async(t,n,i)=>{if(this._joinInfo)try{await this._gateway.muteLocal(t,this._joinInfo.stringUid||this._joinInfo.uid),n()}catch(a){a.code===X.DISCONNECT_P2P?n():i(a)}else n()}),this._p2pChannel.on(Et.RequestUnmuteLocal,async(t,n,i)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(t,this._joinInfo.stringUid||this._joinInfo.uid),n()}catch(a){a.code===X.DISCONNECT_P2P?n():i(a)}else n()}),this._p2pChannel.on(Et.RequestRePublish,(t,n,i)=>{this.publish(t,!1).then(n).catch(i)}),this._p2pChannel.on(Et.RequestRePublishDataChannel,(t,n,i)=>{Ye.all(t.map(async a=>{const l=await this._p2pChannel.publishDataChannel([a]);try{l.forEach(u=>{this._uid&&this._gateway.publishDataChannel(this._uid,u,!0)})}catch(u){if(u.code!==X.DISCONNECT_P2P)throw u}})).then(n).catch(i)}),this._p2pChannel.on(Et.RequestReSubscribe,async(t,n,i)=>{try{for(const{user:a,kind:l}of t)l===it.VIDEO?await this.subscribe(a,"video"):await this.subscribe(a,"audio");n()}catch(a){i(a)}}),this._p2pChannel.on(Et.RequestUpload,(t,n)=>{this._gateway.upload(t,n)}),this._p2pChannel.on(Et.RequestUploadStats,t=>{this._gateway.uploadWRTCStats(t)}),this._p2pChannel.on(Et.MediaReconnectStart,t=>{this.safeEmit(cn.MEDIA_RECONNECT_START,t)}),this._p2pChannel.on(Et.MediaReconnectEnd,t=>{this.safeEmit(cn.MEDIA_RECONNECT_END,t)}),this._p2pChannel.on(Et.NeedSignalRTT,t=>{t(this._gateway.getSignalRTT())}),this._p2pChannel.on(Et.RequestRestartICE,async t=>{if(this.store.useP2P)return;const n=await this._p2pChannel.restartICE(t),i=await n.next();if(i.done)return;const a=i.value;let l;try{l=await this._gateway.restartICE({iceParameters:a})}catch(h){return void n.throw(h)}const{iceParameters:u}=function(h){const p=h.iceParameters;return{iceParameters:{iceUfrag:p.iceUfrag,icePwd:p.icePwd}}}(l);await n.next({remoteIceParameters:u})}),this._p2pChannel.on(Et.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(Et.RequestReconnectPC,async()=>{var t;const{iceParameters:n,dtlsParameters:i,rtpCapabilities:a}=await this._p2pChannel.startP2PConnection({turnServer:(t=this._joinInfo)===null||t===void 0?void 0:t.turnServer}),{gatewayEstablishParams:l,gatewayAddress:u}=await this._gateway.reconnectPC({iceParameters:n,dtlsParameters:i,rtpCapabilities:a}),h=b6(l,u);await this._p2pChannel.connect(h),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(Et.RequestUnpublishForReconnectPC,async(t,n,i)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(t,this._uid),n()):i()}),this._p2pChannel.on(Et.P2PLost,()=>{this.safeEmit(cn.P2P_LOST,this.store.uid)}),this._p2pChannel.on(Et.UpdateVideoEncoder,t=>{t._encoderConfig&&this._gateway.setVideoProfile(t._encoderConfig)}),this._p2pChannel.on(Et.ConnectionTypeChange,t=>{this.safeEmit(cn.IS_USING_CLOUD_PROXY,t)}),this._p2pChannel.on(Et.RequestLowStreamParameter,t=>{t(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(Et.QueryClientConnectionState,t=>{t(this.connectionState)}),this._p2pChannel.on(Et.AudioMetadata,t=>{this.safeEmit(cn.AUDIO_METADATA,t)})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(t){if(!this._joinInfo||this.connectionState!=="CONNECTED")throw new ye(X.INVALID_OPERATION,"[".concat(this._clientId,"] can not create content inspect, please join channel first"));if(this._inspect)throw new ye(X.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));try{const i=(n={config:t},Xl("ContentInspect").create(n));this._inspect=i,this.handleVideoInspectEvents(i);const{appId:a,cname:l,sid:u,token:h,uid:p,cid:m,vid:E}=this._joinInfo;await i.init({appId:a,areaCode:"",cname:l,sid:u,token:h,uid:p,cid:m,vid:E?Number(E):0},ti)}catch(i){throw Array.isArray(i)?i[0]:i}var n}handleVideoInspectEvents(t){t.on(wi.CONNECTION_STATE_CHANGE,(n,i)=>{if(this.safeEmit(cn.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,n,i),i===zs.CONNECTED){if(this.connectionState!=="CONNECTED")return void this.safeEmit(cn.CONTENT_INSPECT_ERROR,new ye(X.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));t.inspectImage()}}),t.on(wi.INSPECT_RESULT,(n,i)=>{var a;if((i==null?void 0:i.code)===X.INVALID_OPERATION&&this.connectionState==="DISCONNECTED")return k.debug("Stop inspect content because that has left channel"),this==null||(a=this._inspect)===null||a===void 0||a.close(),void(this._inspect=void 0);this.safeEmit(cn.CONTENT_INSPECT_RESULT,n,i)}),t.on(wi.CLIENT_LOCAL_VIDEO_TRACK,n=>{n(this.localTracks.filter(i=>i.trackMediaType==="video")[0])})}async disableContentInspect(){if(!this._inspect)throw new ye(X.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(t){throw Array.isArray(t)?t[0]:t}}async setImageModeration(t,n){if(zl(t,"enabled"),t){if(!n)throw new ye(X.INVALID_PARAMS,"config is required");if(H8(n),!this._joinInfo)throw new ye(X.INVALID_OPERATION,"can not create image moderation, please join channel first");try{if(this._moderation)this._moderation.updateConfig(n);else{const a=(i={config:n},Xl("ImageModeration").create(i));this._moderation=a,this.handleImageModerationEvents(a);const{appId:l,cname:u,sid:h,token:p,uid:m,cid:E,vid:y}=this._joinInfo;await a.init({appId:l,areaCode:"",cname:u,sid:h,token:p,uid:m,cid:E,vid:y?Number(y):0},ti)}}catch(a){throw Array.isArray(a)?a[0]:a}}else{var i;if(!this._moderation)throw new ye(X.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(a){throw Array.isArray(a)?a[0]:a}}}handleImageModerationEvents(t){t.on(Rc.CONNECTION_STATE_CHANGE,(n,i)=>{if(this.safeEmit(cn.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,n,i),n===us.CONNECTED){if(this.connectionState!=="CONNECTED")throw this.setImageModeration(!1),new ye(X.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");t.inspectImage()}}),t.on(Rc.CLIENT_LOCAL_VIDEO_TRACK,n=>{n(this.localTracks.filter(i=>i.trackMediaType==="video")[0])})}setP2PTransport(t){if(function(n){mi(n,"transport",["default","auto","relay","sd-rtn"])}(t),this.mode!=="p2p")throw new ye(X.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=t,k.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(t))}getJoinChannelServiceRecords(){return k.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(t){zl(t,"enabled"),Vn("ENABLE_PUBLISH_AUDIO_FILTER",t),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(t)}_handleResetAddStream(t,n){switch(n){case"audio":t._audio_added_=!1,t._trust_audio_stream_added_state_=!0;break;case"video":t._video_added_=!1,t._trust_video_stream_added_state_=!0}}},st(et.prototype,"leave",[z8],Object.getOwnPropertyDescriptor(et.prototype,"leave"),et.prototype),st(et.prototype,"publish",[W8],Object.getOwnPropertyDescriptor(et.prototype,"publish"),et.prototype),st(et.prototype,"unpublish",[G8],Object.getOwnPropertyDescriptor(et.prototype,"unpublish"),et.prototype),st(et.prototype,"subscribe",[K8],Object.getOwnPropertyDescriptor(et.prototype,"subscribe"),et.prototype),st(et.prototype,"presubscribe",[q8],Object.getOwnPropertyDescriptor(et.prototype,"presubscribe"),et.prototype),st(et.prototype,"massSubscribe",[Y8],Object.getOwnPropertyDescriptor(et.prototype,"massSubscribe"),et.prototype),st(et.prototype,"unsubscribe",[X8],Object.getOwnPropertyDescriptor(et.prototype,"unsubscribe"),et.prototype),st(et.prototype,"massUnsubscribe",[J8],Object.getOwnPropertyDescriptor(et.prototype,"massUnsubscribe"),et.prototype),st(et.prototype,"setLowStreamParameter",[Q8],Object.getOwnPropertyDescriptor(et.prototype,"setLowStreamParameter"),et.prototype),st(et.prototype,"enableDualStream",[Z8],Object.getOwnPropertyDescriptor(et.prototype,"enableDualStream"),et.prototype),st(et.prototype,"disableDualStream",[ej],Object.getOwnPropertyDescriptor(et.prototype,"disableDualStream"),et.prototype),st(et.prototype,"setClientRole",[tj],Object.getOwnPropertyDescriptor(et.prototype,"setClientRole"),et.prototype),st(et.prototype,"_setClientRoleOptions",[nj],Object.getOwnPropertyDescriptor(et.prototype,"_setClientRoleOptions"),et.prototype),st(et.prototype,"setProxyServer",[rj],Object.getOwnPropertyDescriptor(et.prototype,"setProxyServer"),et.prototype),st(et.prototype,"setTurnServer",[ij],Object.getOwnPropertyDescriptor(et.prototype,"setTurnServer"),et.prototype),st(et.prototype,"setLicense",[oj],Object.getOwnPropertyDescriptor(et.prototype,"setLicense"),et.prototype),st(et.prototype,"startProxyServer",[aj],Object.getOwnPropertyDescriptor(et.prototype,"startProxyServer"),et.prototype),st(et.prototype,"stopProxyServer",[sj],Object.getOwnPropertyDescriptor(et.prototype,"stopProxyServer"),et.prototype),st(et.prototype,"setLocalAccessPointsV2",[cj],Object.getOwnPropertyDescriptor(et.prototype,"setLocalAccessPointsV2"),et.prototype),st(et.prototype,"setLocalAccessPoints",[lj],Object.getOwnPropertyDescriptor(et.prototype,"setLocalAccessPoints"),et.prototype),st(et.prototype,"setRemoteDefaultVideoStreamType",[uj],Object.getOwnPropertyDescriptor(et.prototype,"setRemoteDefaultVideoStreamType"),et.prototype),st(et.prototype,"setRemoteVideoStreamType",[dj],Object.getOwnPropertyDescriptor(et.prototype,"setRemoteVideoStreamType"),et.prototype),st(et.prototype,"setStreamFallbackOption",[hj],Object.getOwnPropertyDescriptor(et.prototype,"setStreamFallbackOption"),et.prototype),st(et.prototype,"setEncryptionConfig",[fj],Object.getOwnPropertyDescriptor(et.prototype,"setEncryptionConfig"),et.prototype),st(et.prototype,"renewToken",[pj],Object.getOwnPropertyDescriptor(et.prototype,"renewToken"),et.prototype),st(et.prototype,"enableAudioVolumeIndicator",[mj],Object.getOwnPropertyDescriptor(et.prototype,"enableAudioVolumeIndicator"),et.prototype),st(et.prototype,"startLiveStreaming",[gj],Object.getOwnPropertyDescriptor(et.prototype,"startLiveStreaming"),et.prototype),st(et.prototype,"setLiveTranscoding",[vj],Object.getOwnPropertyDescriptor(et.prototype,"setLiveTranscoding"),et.prototype),st(et.prototype,"stopLiveStreaming",[Ej],Object.getOwnPropertyDescriptor(et.prototype,"stopLiveStreaming"),et.prototype),st(et.prototype,"startChannelMediaRelay",[_j],Object.getOwnPropertyDescriptor(et.prototype,"startChannelMediaRelay"),et.prototype),st(et.prototype,"updateChannelMediaRelay",[Sj],Object.getOwnPropertyDescriptor(et.prototype,"updateChannelMediaRelay"),et.prototype),st(et.prototype,"stopChannelMediaRelay",[yj],Object.getOwnPropertyDescriptor(et.prototype,"stopChannelMediaRelay"),et.prototype),st(et.prototype,"sendCustomReportMessage",[Cj],Object.getOwnPropertyDescriptor(et.prototype,"sendCustomReportMessage"),et.prototype),st(et.prototype,"pickSVCLayer",[bj],Object.getOwnPropertyDescriptor(et.prototype,"pickSVCLayer"),et.prototype),st(et.prototype,"setRTMConfig",[Tj],Object.getOwnPropertyDescriptor(et.prototype,"setRTMConfig"),et.prototype),st(et.prototype,"enableContentInspect",[Rj],Object.getOwnPropertyDescriptor(et.prototype,"enableContentInspect"),et.prototype),st(et.prototype,"disableContentInspect",[wj],Object.getOwnPropertyDescriptor(et.prototype,"disableContentInspect"),et.prototype),st(et.prototype,"setImageModeration",[Ij],Object.getOwnPropertyDescriptor(et.prototype,"setImageModeration"),et.prototype),st(et.prototype,"setP2PTransport",[Aj],Object.getOwnPropertyDescriptor(et.prototype,"setP2PTransport"),et.prototype),st(et.prototype,"getJoinChannelServiceRecords",[Oj],Object.getOwnPropertyDescriptor(et.prototype,"getJoinChannelServiceRecords"),et.prototype),st(et.prototype,"setPublishAudioFilterEnabled",[xj],Object.getOwnPropertyDescriptor(et.prototype,"setPublishAudioFilterEnabled"),et.prototype),et);class z0{constructor(n,i){G(this,"id",0),G(this,"element",void 0),G(this,"peerPair",void 0),G(this,"context",void 0),G(this,"audioPlayerElement",void 0),G(this,"audioTrack",void 0),z0.count+=1,this.id=z0.count,this.element=n,this.context=i}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=n=>{const i=document.createElement("audio");i.srcObject=new MediaStream([n.track]),i.play(),this.audioPlayerElement=i}}async switchSdp(){if(!this.peerPair)return;const n=async(a,l)=>{const u=l==="offer"?await a.createOffer():await a.createAnswer();return await a.setLocalDescription(u),a.iceGatheringState==="complete"?a.localDescription:new Ye(h=>{a.onicegatheringstatechange=()=>{a.iceGatheringState==="complete"&&h(a.localDescription)}})},i=async(a,l)=>await a.setRemoteDescription(l);try{const a=await n(this.peerPair[0],"offer");await i(this.peerPair[1],a);const l=await n(this.peerPair[1],"answer");await i(this.peerPair[0],l)}catch(a){throw new ye(X.LOCAL_AEC_ERROR,a.toString()).print()}}async getTracksFromMediaElement(n){if(this.audioTrack)return this.audioTrack;let i;try{n instanceof HTMLVideoElement&&(n.captureStream?n.captureStream():n.mozCaptureStream()),i=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(n).connect(i)}catch(l){throw new ye(X.LOCAL_AEC_ERROR,l.toString()).print()}if(!i)throw new ye(X.LOCAL_AEC_ERROR,"no dest node when local aec").print();const a=i.stream.getAudioTracks()[0];return this.audioTrack=a,a}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const n=this.element,i=await this.getTracksFromMediaElement(n);this.peerPair&&this.peerPair[0].addTrack(i),await this.switchSdp()}close(){k.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(n=>{n.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var Pj,LS;G(z0,"count",0);const Ape=window.AudioContext||window.webkitAudioContext,Ope=new(Pj=At({report:dt}),st((LS=class{constructor(){G(this,"units",[]),G(this,"context",void 0)}processExternalMediaAEC(t){if(!this._doesEnvironmentNeedAEC())return k.debug("the system does not need to process local aec"),-1;this.context||(this.context=new Ape);let n=this.units.find(i=>i&&i.getElement()===t);return n||(n=new z0(t,this.context),this.units.push(n)),n.startEchoCancellation(),k.debug("start processing local audio echo cancellation, id is",n.id),n.id}_doesEnvironmentNeedAEC(){return En().name!==On.SAFARI}}).prototype,"processExternalMediaAEC",[Pj],Object.getOwnPropertyDescriptor(LS.prototype,"processExternalMediaAEC"),LS.prototype),LS);function Dj(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function Lj(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?Dj(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Dj(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}const lA=window||document;function kj(t){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!lA)return;const i=ni._cspEventHandlerPointer;if(i&&n)return void console.error(i,n);const a=l=>{if(!(l&&l.blockedURI&&(ni.onSecurityPolicyViolation||ni.getListeners(dl.SECURITY_POLICY_VIOLATION).length>0)))return;const u=l.blockedURI;Q("CSP_DETECTED_HOSTNAME_LIST").some(h=>Ke(u).call(u,h))&&(ni.onSecurityPolicyViolation&&typeof ni.onSecurityPolicyViolation=="function"&&ni.onSecurityPolicyViolation(l),ni.getListeners(dl.SECURITY_POLICY_VIOLATION).length>0&&ni.safeEmit(dl.SECURITY_POLICY_VIOLATION,l))};i&&lA.removeEventListener("securitypolicyviolation",i),(n||t&&typeof t=="function"||ni.getListeners(dl.SECURITY_POLICY_VIOLATION).length>0)&&lA.addEventListener("securitypolicyviolation",a),ni._cspEventHandlerPointer=a}var xpe=T,Npe=vB,Mj=RegExp.prototype,Ppe=function(t){return t===Mj||xpe(Mj,t)?Npe(t):t.flags},_o=c(Ppe);function Ep(t){let n=t.length;for(;--n>=0;)t[n]=0}const uA=256,Fj=286,W0=30,G0=15,dA=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),kS=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Dpe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Uj=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Zl=new Array(576);Ep(Zl);const K0=new Array(60);Ep(K0);const q0=new Array(512);Ep(q0);const Y0=new Array(256);Ep(Y0);const hA=new Array(29);Ep(hA);const MS=new Array(W0);function fA(t,n,i,a,l){this.static_tree=t,this.extra_bits=n,this.extra_base=i,this.elems=a,this.max_length=l,this.has_stree=t&&t.length}let Bj,Vj,jj;function pA(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}Ep(MS);const $j=t=>t<256?q0[t]:q0[256+(t>>>7)],X0=(t,n)=>{t.pending_buf[t.pending++]=255&n,t.pending_buf[t.pending++]=n>>>8&255},qa=(t,n,i)=>{t.bi_valid>16-i?(t.bi_buf|=n<<t.bi_valid&65535,X0(t,t.bi_buf),t.bi_buf=n>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=i)},gl=(t,n,i)=>{qa(t,i[2*n],i[2*n+1])},Hj=(t,n)=>{let i=0;do i|=1&t,t>>>=1,i<<=1;while(--n>0);return i>>>1},zj=(t,n,i)=>{const a=new Array(16);let l,u,h=0;for(l=1;l<=G0;l++)h=h+i[l-1]<<1,a[l]=h;for(u=0;u<=n;u++){let p=t[2*u+1];p!==0&&(t[2*u]=Hj(a[p]++,p))}},Wj=t=>{let n;for(n=0;n<Fj;n++)t.dyn_ltree[2*n]=0;for(n=0;n<W0;n++)t.dyn_dtree[2*n]=0;for(n=0;n<19;n++)t.bl_tree[2*n]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},Gj=t=>{t.bi_valid>8?X0(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Kj=(t,n,i,a)=>{const l=2*n,u=2*i;return t[l]<t[u]||t[l]===t[u]&&a[n]<=a[i]},mA=(t,n,i)=>{const a=t.heap[i];let l=i<<1;for(;l<=t.heap_len&&(l<t.heap_len&&Kj(n,t.heap[l+1],t.heap[l],t.depth)&&l++,!Kj(n,a,t.heap[l],t.depth));)t.heap[i]=t.heap[l],i=l,l<<=1;t.heap[i]=a},qj=(t,n,i)=>{let a,l,u,h,p=0;if(t.sym_next!==0)do a=255&t.pending_buf[t.sym_buf+p++],a+=(255&t.pending_buf[t.sym_buf+p++])<<8,l=t.pending_buf[t.sym_buf+p++],a===0?gl(t,l,n):(u=Y0[l],gl(t,u+uA+1,n),h=dA[u],h!==0&&(l-=hA[u],qa(t,l,h)),a--,u=$j(a),gl(t,u,i),h=kS[u],h!==0&&(a-=MS[u],qa(t,a,h)));while(p<t.sym_next);gl(t,256,n)},gA=(t,n)=>{const i=n.dyn_tree,a=n.stat_desc.static_tree,l=n.stat_desc.has_stree,u=n.stat_desc.elems;let h,p,m,E=-1;for(t.heap_len=0,t.heap_max=573,h=0;h<u;h++)i[2*h]!==0?(t.heap[++t.heap_len]=E=h,t.depth[h]=0):i[2*h+1]=0;for(;t.heap_len<2;)m=t.heap[++t.heap_len]=E<2?++E:0,i[2*m]=1,t.depth[m]=0,t.opt_len--,l&&(t.static_len-=a[2*m+1]);for(n.max_code=E,h=t.heap_len>>1;h>=1;h--)mA(t,i,h);m=u;do h=t.heap[1],t.heap[1]=t.heap[t.heap_len--],mA(t,i,1),p=t.heap[1],t.heap[--t.heap_max]=h,t.heap[--t.heap_max]=p,i[2*m]=i[2*h]+i[2*p],t.depth[m]=(t.depth[h]>=t.depth[p]?t.depth[h]:t.depth[p])+1,i[2*h+1]=i[2*p+1]=m,t.heap[1]=m++,mA(t,i,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((y,R)=>{const A=R.dyn_tree,D=R.max_code,H=R.stat_desc.static_tree,B=R.stat_desc.has_stree,$=R.stat_desc.extra_bits,K=R.stat_desc.extra_base,Y=R.stat_desc.max_length;let ce,ge,Ee,me,Te,Me,Xe=0;for(me=0;me<=G0;me++)y.bl_count[me]=0;for(A[2*y.heap[y.heap_max]+1]=0,ce=y.heap_max+1;ce<573;ce++)ge=y.heap[ce],me=A[2*A[2*ge+1]+1]+1,me>Y&&(me=Y,Xe++),A[2*ge+1]=me,ge>D||(y.bl_count[me]++,Te=0,ge>=K&&(Te=$[ge-K]),Me=A[2*ge],y.opt_len+=Me*(me+Te),B&&(y.static_len+=Me*(H[2*ge+1]+Te)));if(Xe!==0){do{for(me=Y-1;y.bl_count[me]===0;)me--;y.bl_count[me]--,y.bl_count[me+1]+=2,y.bl_count[Y]--,Xe-=2}while(Xe>0);for(me=Y;me!==0;me--)for(ge=y.bl_count[me];ge!==0;)Ee=y.heap[--ce],Ee>D||(A[2*Ee+1]!==me&&(y.opt_len+=(me-A[2*Ee+1])*A[2*Ee],A[2*Ee+1]=me),ge--)}})(t,n),zj(i,E,t.bl_count)},Yj=(t,n,i)=>{let a,l,u=-1,h=n[1],p=0,m=7,E=4;for(h===0&&(m=138,E=3),n[2*(i+1)+1]=65535,a=0;a<=i;a++)l=h,h=n[2*(a+1)+1],++p<m&&l===h||(p<E?t.bl_tree[2*l]+=p:l!==0?(l!==u&&t.bl_tree[2*l]++,t.bl_tree[32]++):p<=10?t.bl_tree[34]++:t.bl_tree[36]++,p=0,u=l,h===0?(m=138,E=3):l===h?(m=6,E=3):(m=7,E=4))},Xj=(t,n,i)=>{let a,l,u=-1,h=n[1],p=0,m=7,E=4;for(h===0&&(m=138,E=3),a=0;a<=i;a++)if(l=h,h=n[2*(a+1)+1],!(++p<m&&l===h)){if(p<E)do gl(t,l,t.bl_tree);while(--p!=0);else l!==0?(l!==u&&(gl(t,l,t.bl_tree),p--),gl(t,16,t.bl_tree),qa(t,p-3,2)):p<=10?(gl(t,17,t.bl_tree),qa(t,p-3,3)):(gl(t,18,t.bl_tree),qa(t,p-11,7));p=0,u=l,h===0?(m=138,E=3):l===h?(m=6,E=3):(m=7,E=4)}};let Jj=!1;const Qj=(t,n,i,a)=>{qa(t,0+(a?1:0),3),Gj(t),X0(t,i),X0(t,~i),i&&t.pending_buf.set(t.window.subarray(n,n+i),t.pending),t.pending+=i};var Lpe=t=>{Jj||((()=>{let n,i,a,l,u;const h=new Array(16);for(a=0,l=0;l<28;l++)for(hA[l]=a,n=0;n<1<<dA[l];n++)Y0[a++]=l;for(Y0[a-1]=l,u=0,l=0;l<16;l++)for(MS[l]=u,n=0;n<1<<kS[l];n++)q0[u++]=l;for(u>>=7;l<W0;l++)for(MS[l]=u<<7,n=0;n<1<<kS[l]-7;n++)q0[256+u++]=l;for(i=0;i<=G0;i++)h[i]=0;for(n=0;n<=143;)Zl[2*n+1]=8,n++,h[8]++;for(;n<=255;)Zl[2*n+1]=9,n++,h[9]++;for(;n<=279;)Zl[2*n+1]=7,n++,h[7]++;for(;n<=287;)Zl[2*n+1]=8,n++,h[8]++;for(zj(Zl,287,h),n=0;n<W0;n++)K0[2*n+1]=5,K0[2*n]=Hj(n,5);Bj=new fA(Zl,dA,257,Fj,G0),Vj=new fA(K0,kS,0,W0,G0),jj=new fA(new Array(0),Dpe,0,19,7)})(),Jj=!0),t.l_desc=new pA(t.dyn_ltree,Bj),t.d_desc=new pA(t.dyn_dtree,Vj),t.bl_desc=new pA(t.bl_tree,jj),t.bi_buf=0,t.bi_valid=0,Wj(t)},kpe=(t,n,i,a)=>{let l,u,h=0;t.level>0?(t.strm.data_type===2&&(t.strm.data_type=(p=>{let m,E=4093624447;for(m=0;m<=31;m++,E>>>=1)if(1&E&&p.dyn_ltree[2*m]!==0)return 0;if(p.dyn_ltree[18]!==0||p.dyn_ltree[20]!==0||p.dyn_ltree[26]!==0)return 1;for(m=32;m<uA;m++)if(p.dyn_ltree[2*m]!==0)return 1;return 0})(t)),gA(t,t.l_desc),gA(t,t.d_desc),h=(p=>{let m;for(Yj(p,p.dyn_ltree,p.l_desc.max_code),Yj(p,p.dyn_dtree,p.d_desc.max_code),gA(p,p.bl_desc),m=18;m>=3&&p.bl_tree[2*Uj[m]+1]===0;m--);return p.opt_len+=3*(m+1)+5+5+4,m})(t),l=t.opt_len+3+7>>>3,u=t.static_len+3+7>>>3,u<=l&&(l=u)):l=u=i+5,i+4<=l&&n!==-1?Qj(t,n,i,a):t.strategy===4||u===l?(qa(t,2+(a?1:0),3),qj(t,Zl,K0)):(qa(t,4+(a?1:0),3),((p,m,E,y)=>{let R;for(qa(p,m-257,5),qa(p,E-1,5),qa(p,y-4,4),R=0;R<y;R++)qa(p,p.bl_tree[2*Uj[R]+1],3);Xj(p,p.dyn_ltree,m-1),Xj(p,p.dyn_dtree,E-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),qj(t,t.dyn_ltree,t.dyn_dtree)),Wj(t),a&&Gj(t)},Mpe=(t,n,i)=>(t.pending_buf[t.sym_buf+t.sym_next++]=n,t.pending_buf[t.sym_buf+t.sym_next++]=n>>8,t.pending_buf[t.sym_buf+t.sym_next++]=i,n===0?t.dyn_ltree[2*i]++:(t.matches++,n--,t.dyn_ltree[2*(Y0[i]+uA+1)]++,t.dyn_dtree[2*$j(n)]++),t.sym_next===t.sym_end),Fpe=t=>{qa(t,2,3),gl(t,256,Zl),(n=>{n.bi_valid===16?(X0(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)})(t)},Upe={_tr_init:Lpe,_tr_stored_block:Qj,_tr_flush_block:kpe,_tr_tally:Mpe,_tr_align:Fpe},J0=(t,n,i,a)=>{let l=65535&t|0,u=t>>>16&65535|0,h=0;for(;i!==0;){h=i>2e3?2e3:i,i-=h;do l=l+n[a++]|0,u=u+l|0;while(--h);l%=65521,u%=65521}return l|u<<16|0};const Bpe=new Uint32Array((()=>{let t,n=[];for(var i=0;i<256;i++){t=i;for(var a=0;a<8;a++)t=1&t?3988292384^t>>>1:t>>>1;n[i]=t}return n})());var Do=(t,n,i,a)=>{const l=Bpe,u=a+i;t^=-1;for(let h=a;h<u;h++)t=t>>>8^l[255&(t^n[h])];return-1^t},fh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},_p={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Vpe,_tr_stored_block:vA,_tr_flush_block:jpe,_tr_tally:qu,_tr_align:$pe}=Upe,{Z_NO_FLUSH:Yu,Z_PARTIAL_FLUSH:Hpe,Z_FULL_FLUSH:zpe,Z_FINISH:Ys,Z_BLOCK:Zj,Z_OK:Yo,Z_STREAM_END:e$,Z_STREAM_ERROR:vl,Z_DATA_ERROR:Wpe,Z_BUF_ERROR:EA,Z_DEFAULT_COMPRESSION:Gpe,Z_FILTERED:Kpe,Z_HUFFMAN_ONLY:FS,Z_RLE:qpe,Z_FIXED:Ype,Z_DEFAULT_STRATEGY:Xpe,Z_UNKNOWN:Jpe,Z_DEFLATED:US}=_p,_A=286,Qpe=30,Zpe=19,eme=2*_A+1,tme=15,ph=258,El=262,Sp=42,mh=113,Q0=666,gh=(t,n)=>(t.msg=fh[n],n),t$=t=>2*t-(t>4?9:0),Xu=t=>{let n=t.length;for(;--n>=0;)t[n]=0},nme=t=>{let n,i,a,l=t.w_size;n=t.hash_size,a=n;do i=t.head[--a],t.head[a]=i>=l?i-l:0;while(--n);n=l,a=n;do i=t.prev[--a],t.prev[a]=i>=l?i-l:0;while(--n)};let Ju=(t,n,i)=>(n<<t.hash_shift^i)&t.hash_mask;const hs=t=>{const n=t.state;let i=n.pending;i>t.avail_out&&(i=t.avail_out),i!==0&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+i),t.next_out),t.next_out+=i,n.pending_out+=i,t.total_out+=i,t.avail_out-=i,n.pending-=i,n.pending===0&&(n.pending_out=0))},fs=(t,n)=>{jpe(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,hs(t.strm)},Dr=(t,n)=>{t.pending_buf[t.pending++]=n},Z0=(t,n)=>{t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=255&n},SA=(t,n,i,a)=>{let l=t.avail_in;return l>a&&(l=a),l===0?0:(t.avail_in-=l,n.set(t.input.subarray(t.next_in,t.next_in+l),i),t.state.wrap===1?t.adler=J0(t.adler,n,l,i):t.state.wrap===2&&(t.adler=Do(t.adler,n,l,i)),t.next_in+=l,t.total_in+=l,l)},n$=(t,n)=>{let i,a,l=t.max_chain_length,u=t.strstart,h=t.prev_length,p=t.nice_match;const m=t.strstart>t.w_size-El?t.strstart-(t.w_size-El):0,E=t.window,y=t.w_mask,R=t.prev,A=t.strstart+ph;let D=E[u+h-1],H=E[u+h];t.prev_length>=t.good_match&&(l>>=2),p>t.lookahead&&(p=t.lookahead);do if(i=n,E[i+h]===H&&E[i+h-1]===D&&E[i]===E[u]&&E[++i]===E[u+1]){u+=2,i++;do;while(E[++u]===E[++i]&&E[++u]===E[++i]&&E[++u]===E[++i]&&E[++u]===E[++i]&&E[++u]===E[++i]&&E[++u]===E[++i]&&E[++u]===E[++i]&&E[++u]===E[++i]&&u<A);if(a=ph-(A-u),u=A-ph,a>h){if(t.match_start=n,h=a,a>=p)break;D=E[u+h-1],H=E[u+h]}}while((n=R[n&y])>m&&--l!=0);return h<=t.lookahead?h:t.lookahead},yp=t=>{const n=t.w_size;let i,a,l;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=n+(n-El)&&(t.window.set(t.window.subarray(n,n+n-a),0),t.match_start-=n,t.strstart-=n,t.block_start-=n,t.insert>t.strstart&&(t.insert=t.strstart),nme(t),a+=n),t.strm.avail_in===0)break;if(i=SA(t.strm,t.window,t.strstart+t.lookahead,a),t.lookahead+=i,t.lookahead+t.insert>=3)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=Ju(t,t.ins_h,t.window[l+1]);t.insert&&(t.ins_h=Ju(t,t.ins_h,t.window[l+3-1]),t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<El&&t.strm.avail_in!==0)},r$=(t,n)=>{let i,a,l,u=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,h=0,p=t.strm.avail_in;do{if(i=65535,l=t.bi_valid+42>>3,t.strm.avail_out<l||(l=t.strm.avail_out-l,a=t.strstart-t.block_start,i>a+t.strm.avail_in&&(i=a+t.strm.avail_in),i>l&&(i=l),i<u&&(i===0&&n!==Ys||n===Yu||i!==a+t.strm.avail_in)))break;h=n===Ys&&i===a+t.strm.avail_in?1:0,vA(t,0,0,h),t.pending_buf[t.pending-4]=i,t.pending_buf[t.pending-3]=i>>8,t.pending_buf[t.pending-2]=~i,t.pending_buf[t.pending-1]=~i>>8,hs(t.strm),a&&(a>i&&(a=i),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+a),t.strm.next_out),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a,t.block_start+=a,i-=a),i&&(SA(t.strm,t.strm.output,t.strm.next_out,i),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i)}while(h===0);return p-=t.strm.avail_in,p&&(p>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=p&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-p,t.strm.next_in),t.strstart),t.strstart+=p,t.insert+=p>t.w_size-t.insert?t.w_size-t.insert:p),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),h?4:n!==Yu&&n!==Ys&&t.strm.avail_in===0&&t.strstart===t.block_start?2:(l=t.window_size-t.strstart,t.strm.avail_in>l&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,l+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),l>t.strm.avail_in&&(l=t.strm.avail_in),l&&(SA(t.strm,t.window,t.strstart,l),t.strstart+=l,t.insert+=l>t.w_size-t.insert?t.w_size-t.insert:l),t.high_water<t.strstart&&(t.high_water=t.strstart),l=t.bi_valid+42>>3,l=t.pending_buf_size-l>65535?65535:t.pending_buf_size-l,u=l>t.w_size?t.w_size:l,a=t.strstart-t.block_start,(a>=u||(a||n===Ys)&&n!==Yu&&t.strm.avail_in===0&&a<=l)&&(i=a>l?l:a,h=n===Ys&&t.strm.avail_in===0&&i===a?1:0,vA(t,t.block_start,i,h),t.block_start+=i,hs(t.strm)),h?3:1)},yA=(t,n)=>{let i,a;for(;;){if(t.lookahead<El){if(yp(t),t.lookahead<El&&n===Yu)return 1;if(t.lookahead===0)break}if(i=0,t.lookahead>=3&&(t.ins_h=Ju(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),i!==0&&t.strstart-i<=t.w_size-El&&(t.match_length=n$(t,i)),t.match_length>=3)if(a=qu(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do t.strstart++,t.ins_h=Ju(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!=0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Ju(t,t.ins_h,t.window[t.strstart+1]);else a=qu(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(a&&(fs(t,!1),t.strm.avail_out===0))return 1}return t.insert=t.strstart<2?t.strstart:2,n===Ys?(fs(t,!0),t.strm.avail_out===0?3:4):t.sym_next&&(fs(t,!1),t.strm.avail_out===0)?1:2},Cp=(t,n)=>{let i,a,l;for(;;){if(t.lookahead<El){if(yp(t),t.lookahead<El&&n===Yu)return 1;if(t.lookahead===0)break}if(i=0,t.lookahead>=3&&(t.ins_h=Ju(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,i!==0&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-El&&(t.match_length=n$(t,i),t.match_length<=5&&(t.strategy===Kpe||t.match_length===3&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){l=t.strstart+t.lookahead-3,a=qu(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=l&&(t.ins_h=Ju(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!=0);if(t.match_available=0,t.match_length=2,t.strstart++,a&&(fs(t,!1),t.strm.avail_out===0))return 1}else if(t.match_available){if(a=qu(t,0,t.window[t.strstart-1]),a&&fs(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(a=qu(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,n===Ys?(fs(t,!0),t.strm.avail_out===0?3:4):t.sym_next&&(fs(t,!1),t.strm.avail_out===0)?1:2};function _l(t,n,i,a,l){this.good_length=t,this.max_lazy=n,this.nice_length=i,this.max_chain=a,this.func=l}const eg=[new _l(0,0,0,0,r$),new _l(4,4,8,4,yA),new _l(4,5,16,8,yA),new _l(4,6,32,32,yA),new _l(4,4,16,16,Cp),new _l(8,16,32,32,Cp),new _l(8,16,128,128,Cp),new _l(8,32,128,256,Cp),new _l(32,128,258,1024,Cp),new _l(32,258,258,4096,Cp)];function rme(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=US,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*eme),this.dyn_dtree=new Uint16Array(2*(2*Qpe+1)),this.bl_tree=new Uint16Array(2*(2*Zpe+1)),Xu(this.dyn_ltree),Xu(this.dyn_dtree),Xu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(tme+1),this.heap=new Uint16Array(2*_A+1),Xu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*_A+1),Xu(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const tg=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.status!==Sp&&n.status!==57&&n.status!==69&&n.status!==73&&n.status!==91&&n.status!==103&&n.status!==mh&&n.status!==Q0?1:0},i$=t=>{if(tg(t))return gh(t,vl);t.total_in=t.total_out=0,t.data_type=Jpe;const n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?57:n.wrap?Sp:mh,t.adler=n.wrap===2?0:1,n.last_flush=-2,Vpe(n),Yo},o$=t=>{const n=i$(t);return n===Yo&&(i=>{i.window_size=2*i.w_size,Xu(i.head),i.max_lazy_match=eg[i.level].max_lazy,i.good_match=eg[i.level].good_length,i.nice_match=eg[i.level].nice_length,i.max_chain_length=eg[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=2,i.match_available=0,i.ins_h=0})(t.state),n},a$=(t,n,i,a,l,u)=>{if(!t)return vl;let h=1;if(n===Gpe&&(n=6),a<0?(h=0,a=-a):a>15&&(h=2,a-=16),l<1||l>9||i!==US||a<8||a>15||n<0||n>9||u<0||u>Ype||a===8&&h!==1)return gh(t,vl);a===8&&(a=9);const p=new rme;return t.state=p,p.strm=t,p.status=Sp,p.wrap=h,p.gzhead=null,p.w_bits=a,p.w_size=1<<p.w_bits,p.w_mask=p.w_size-1,p.hash_bits=l+7,p.hash_size=1<<p.hash_bits,p.hash_mask=p.hash_size-1,p.hash_shift=~~((p.hash_bits+3-1)/3),p.window=new Uint8Array(2*p.w_size),p.head=new Uint16Array(p.hash_size),p.prev=new Uint16Array(p.w_size),p.lit_bufsize=1<<l+6,p.pending_buf_size=4*p.lit_bufsize,p.pending_buf=new Uint8Array(p.pending_buf_size),p.sym_buf=p.lit_bufsize,p.sym_end=3*(p.lit_bufsize-1),p.level=n,p.strategy=u,p.method=i,o$(t)};var ime=(t,n)=>{if(tg(t)||n>Zj||n<0)return t?gh(t,vl):vl;const i=t.state;if(!t.output||t.avail_in!==0&&!t.input||i.status===Q0&&n!==Ys)return gh(t,t.avail_out===0?EA:vl);const a=i.last_flush;if(i.last_flush=n,i.pending!==0){if(hs(t),t.avail_out===0)return i.last_flush=-1,Yo}else if(t.avail_in===0&&t$(n)<=t$(a)&&n!==Ys)return gh(t,EA);if(i.status===Q0&&t.avail_in!==0)return gh(t,EA);if(i.status===Sp&&i.wrap===0&&(i.status=mh),i.status===Sp){let l=US+(i.w_bits-8<<4)<<8,u=-1;if(u=i.strategy>=FS||i.level<2?0:i.level<6?1:i.level===6?2:3,l|=u<<6,i.strstart!==0&&(l|=32),l+=31-l%31,Z0(i,l),i.strstart!==0&&(Z0(i,t.adler>>>16),Z0(i,65535&t.adler)),t.adler=1,i.status=mh,hs(t),i.pending!==0)return i.last_flush=-1,Yo}if(i.status===57){if(t.adler=0,Dr(i,31),Dr(i,139),Dr(i,8),i.gzhead)Dr(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Dr(i,255&i.gzhead.time),Dr(i,i.gzhead.time>>8&255),Dr(i,i.gzhead.time>>16&255),Dr(i,i.gzhead.time>>24&255),Dr(i,i.level===9?2:i.strategy>=FS||i.level<2?4:0),Dr(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Dr(i,255&i.gzhead.extra.length),Dr(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=Do(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69;else if(Dr(i,0),Dr(i,0),Dr(i,0),Dr(i,0),Dr(i,0),Dr(i,i.level===9?2:i.strategy>=FS||i.level<2?4:0),Dr(i,3),i.status=mh,hs(t),i.pending!==0)return i.last_flush=-1,Yo}if(i.status===69){if(i.gzhead.extra){let l=i.pending,u=(65535&i.gzhead.extra.length)-i.gzindex;for(;i.pending+u>i.pending_buf_size;){let p=i.pending_buf_size-i.pending;if(i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+p),i.pending),i.pending=i.pending_buf_size,i.gzhead.hcrc&&i.pending>l&&(t.adler=Do(t.adler,i.pending_buf,i.pending-l,l)),i.gzindex+=p,hs(t),i.pending!==0)return i.last_flush=-1,Yo;l=0,u-=p}let h=new Uint8Array(i.gzhead.extra);i.pending_buf.set(h.subarray(i.gzindex,i.gzindex+u),i.pending),i.pending+=u,i.gzhead.hcrc&&i.pending>l&&(t.adler=Do(t.adler,i.pending_buf,i.pending-l,l)),i.gzindex=0}i.status=73}if(i.status===73){if(i.gzhead.name){let l,u=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>u&&(t.adler=Do(t.adler,i.pending_buf,i.pending-u,u)),hs(t),i.pending!==0)return i.last_flush=-1,Yo;u=0}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Dr(i,l)}while(l!==0);i.gzhead.hcrc&&i.pending>u&&(t.adler=Do(t.adler,i.pending_buf,i.pending-u,u)),i.gzindex=0}i.status=91}if(i.status===91){if(i.gzhead.comment){let l,u=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>u&&(t.adler=Do(t.adler,i.pending_buf,i.pending-u,u)),hs(t),i.pending!==0)return i.last_flush=-1,Yo;u=0}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Dr(i,l)}while(l!==0);i.gzhead.hcrc&&i.pending>u&&(t.adler=Do(t.adler,i.pending_buf,i.pending-u,u))}i.status=103}if(i.status===103){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size&&(hs(t),i.pending!==0))return i.last_flush=-1,Yo;Dr(i,255&t.adler),Dr(i,t.adler>>8&255),t.adler=0}if(i.status=mh,hs(t),i.pending!==0)return i.last_flush=-1,Yo}if(t.avail_in!==0||i.lookahead!==0||n!==Yu&&i.status!==Q0){let l=i.level===0?r$(i,n):i.strategy===FS?((u,h)=>{let p;for(;;){if(u.lookahead===0&&(yp(u),u.lookahead===0)){if(h===Yu)return 1;break}if(u.match_length=0,p=qu(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++,p&&(fs(u,!1),u.strm.avail_out===0))return 1}return u.insert=0,h===Ys?(fs(u,!0),u.strm.avail_out===0?3:4):u.sym_next&&(fs(u,!1),u.strm.avail_out===0)?1:2})(i,n):i.strategy===qpe?((u,h)=>{let p,m,E,y;const R=u.window;for(;;){if(u.lookahead<=ph){if(yp(u),u.lookahead<=ph&&h===Yu)return 1;if(u.lookahead===0)break}if(u.match_length=0,u.lookahead>=3&&u.strstart>0&&(E=u.strstart-1,m=R[E],m===R[++E]&&m===R[++E]&&m===R[++E])){y=u.strstart+ph;do;while(m===R[++E]&&m===R[++E]&&m===R[++E]&&m===R[++E]&&m===R[++E]&&m===R[++E]&&m===R[++E]&&m===R[++E]&&E<y);u.match_length=ph-(y-E),u.match_length>u.lookahead&&(u.match_length=u.lookahead)}if(u.match_length>=3?(p=qu(u,1,u.match_length-3),u.lookahead-=u.match_length,u.strstart+=u.match_length,u.match_length=0):(p=qu(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++),p&&(fs(u,!1),u.strm.avail_out===0))return 1}return u.insert=0,h===Ys?(fs(u,!0),u.strm.avail_out===0?3:4):u.sym_next&&(fs(u,!1),u.strm.avail_out===0)?1:2})(i,n):eg[i.level].func(i,n);if(l!==3&&l!==4||(i.status=Q0),l===1||l===3)return t.avail_out===0&&(i.last_flush=-1),Yo;if(l===2&&(n===Hpe?$pe(i):n!==Zj&&(vA(i,0,0,!1),n===zpe&&(Xu(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),hs(t),t.avail_out===0))return i.last_flush=-1,Yo}return n!==Ys?Yo:i.wrap<=0?e$:(i.wrap===2?(Dr(i,255&t.adler),Dr(i,t.adler>>8&255),Dr(i,t.adler>>16&255),Dr(i,t.adler>>24&255),Dr(i,255&t.total_in),Dr(i,t.total_in>>8&255),Dr(i,t.total_in>>16&255),Dr(i,t.total_in>>24&255)):(Z0(i,t.adler>>>16),Z0(i,65535&t.adler)),hs(t),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?Yo:e$)},ome=(t,n)=>{let i=n.length;if(tg(t))return vl;const a=t.state,l=a.wrap;if(l===2||l===1&&a.status!==Sp||a.lookahead)return vl;if(l===1&&(t.adler=J0(t.adler,n,i,0)),a.wrap=0,i>=a.w_size){l===0&&(Xu(a.head),a.strstart=0,a.block_start=0,a.insert=0);let m=new Uint8Array(a.w_size);m.set(n.subarray(i-a.w_size,i),0),n=m,i=a.w_size}const u=t.avail_in,h=t.next_in,p=t.input;for(t.avail_in=i,t.next_in=0,t.input=n,yp(a);a.lookahead>=3;){let m=a.strstart,E=a.lookahead-2;do a.ins_h=Ju(a,a.ins_h,a.window[m+3-1]),a.prev[m&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=m,m++;while(--E);a.strstart=m,a.lookahead=2,yp(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=2,a.match_available=0,t.next_in=h,t.input=p,t.avail_in=u,a.wrap=l,Yo},ng={deflateInit:(t,n)=>a$(t,n,US,15,8,Xpe),deflateInit2:a$,deflateReset:o$,deflateResetKeep:i$,deflateSetHeader:(t,n)=>tg(t)||t.state.wrap!==2?vl:(t.state.gzhead=n,Yo),deflate:ime,deflateEnd:t=>{if(tg(t))return vl;const n=t.state.status;return t.state=null,n===mh?gh(t,Wpe):Yo},deflateSetDictionary:ome,deflateInfo:"pako deflate (from Nodeca project)"};const ame=(t,n)=>Object.prototype.hasOwnProperty.call(t,n);var BS={assign:function(t){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const i=n.shift();if(i){if(typeof i!="object")throw new TypeError(i+"must be non-object");for(const a in i)ame(i,a)&&(t[a]=i[a])}}return t},flattenChunks:t=>{let n=0;for(let a=0,l=t.length;a<l;a++)n+=t[a].length;const i=new Uint8Array(n);for(let a=0,l=0,u=t.length;a<u;a++){let h=t[a];i.set(h,l),l+=h.length}return i}};let s$=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s$=!1}const rg=new Uint8Array(256);for(let t=0;t<256;t++)rg[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;rg[254]=rg[254]=1;var ig={string2buf:t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let n,i,a,l,u,h=t.length,p=0;for(l=0;l<h;l++)i=t.charCodeAt(l),(64512&i)==55296&&l+1<h&&(a=t.charCodeAt(l+1),(64512&a)==56320&&(i=65536+(i-55296<<10)+(a-56320),l++)),p+=i<128?1:i<2048?2:i<65536?3:4;for(n=new Uint8Array(p),u=0,l=0;u<p;l++)i=t.charCodeAt(l),(64512&i)==55296&&l+1<h&&(a=t.charCodeAt(l+1),(64512&a)==56320&&(i=65536+(i-55296<<10)+(a-56320),l++)),i<128?n[u++]=i:i<2048?(n[u++]=192|i>>>6,n[u++]=128|63&i):i<65536?(n[u++]=224|i>>>12,n[u++]=128|i>>>6&63,n[u++]=128|63&i):(n[u++]=240|i>>>18,n[u++]=128|i>>>12&63,n[u++]=128|i>>>6&63,n[u++]=128|63&i);return n},buf2string:(t,n)=>{const i=n||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,n));let a,l;const u=new Array(2*i);for(l=0,a=0;a<i;){let h=t[a++];if(h<128){u[l++]=h;continue}let p=rg[h];if(p>4)u[l++]=65533,a+=p-1;else{for(h&=p===2?31:p===3?15:7;p>1&&a<i;)h=h<<6|63&t[a++],p--;p>1?u[l++]=65533:h<65536?u[l++]=h:(h-=65536,u[l++]=55296|h>>10&1023,u[l++]=56320|1023&h)}}return((h,p)=>{if(p<65534&&h.subarray&&s$)return String.fromCharCode.apply(null,h.length===p?h:h.subarray(0,p));let m="";for(let E=0;E<p;E++)m+=String.fromCharCode(h[E]);return m})(u,l)},utf8border:(t,n)=>{(n=n||t.length)>t.length&&(n=t.length);let i=n-1;for(;i>=0&&(192&t[i])==128;)i--;return i<0||i===0?n:i+rg[t[i]]>n?i:n}},c$=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const l$=Object.prototype.toString,{Z_NO_FLUSH:sme,Z_SYNC_FLUSH:cme,Z_FULL_FLUSH:lme,Z_FINISH:ume,Z_OK:VS,Z_STREAM_END:dme,Z_DEFAULT_COMPRESSION:hme,Z_DEFAULT_STRATEGY:fme,Z_DEFLATED:pme}=_p;function og(t){this.options=BS.assign({level:hme,method:pme,chunkSize:16384,windowBits:15,memLevel:8,strategy:fme},t||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c$,this.strm.avail_out=0;let i=ng.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(i!==VS)throw new Error(fh[i]);if(n.header&&ng.deflateSetHeader(this.strm,n.header),n.dictionary){let a;if(a=typeof n.dictionary=="string"?ig.string2buf(n.dictionary):l$.call(n.dictionary)==="[object ArrayBuffer]"?new Uint8Array(n.dictionary):n.dictionary,i=ng.deflateSetDictionary(this.strm,a),i!==VS)throw new Error(fh[i]);this._dict_set=!0}}function CA(t,n){const i=new og(n);if(i.push(t,!0),i.err)throw i.msg||fh[i.err];return i.result}og.prototype.push=function(t,n){const i=this.strm,a=this.options.chunkSize;let l,u;if(this.ended)return!1;for(u=n===~~n?n:n===!0?ume:sme,typeof t=="string"?i.input=ig.string2buf(t):l$.call(t)==="[object ArrayBuffer]"?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;)if(i.avail_out===0&&(i.output=new Uint8Array(a),i.next_out=0,i.avail_out=a),(u===cme||u===lme)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(l=ng.deflate(i,u),l===dme)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),l=ng.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===VS;if(i.avail_out!==0){if(u>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(i.avail_in===0)break}else this.onData(i.output)}return!0},og.prototype.onData=function(t){this.chunks.push(t)},og.prototype.onEnd=function(t){t===VS&&(this.result=BS.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var mme={Deflate:og,deflate:CA,deflateRaw:function(t,n){return(n=n||{}).raw=!0,CA(t,n)},gzip:function(t,n){return(n=n||{}).gzip=!0,CA(t,n)},constants:_p};const jS=16209;var gme=function(t,n){let i,a,l,u,h,p,m,E,y,R,A,D,H,B,$,K,Y,ce,ge,Ee,me,Te,Me,Xe;const nt=t.state;i=t.next_in,Me=t.input,a=i+(t.avail_in-5),l=t.next_out,Xe=t.output,u=l-(n-t.avail_out),h=l+(t.avail_out-257),p=nt.dmax,m=nt.wsize,E=nt.whave,y=nt.wnext,R=nt.window,A=nt.hold,D=nt.bits,H=nt.lencode,B=nt.distcode,$=(1<<nt.lenbits)-1,K=(1<<nt.distbits)-1;e:do{D<15&&(A+=Me[i++]<<D,D+=8,A+=Me[i++]<<D,D+=8),Y=H[A&$];t:for(;;){if(ce=Y>>>24,A>>>=ce,D-=ce,ce=Y>>>16&255,ce===0)Xe[l++]=65535&Y;else{if(!(16&ce)){if(!(64&ce)){Y=H[(65535&Y)+(A&(1<<ce)-1)];continue t}if(32&ce){nt.mode=16191;break e}t.msg="invalid literal/length code",nt.mode=jS;break e}ge=65535&Y,ce&=15,ce&&(D<ce&&(A+=Me[i++]<<D,D+=8),ge+=A&(1<<ce)-1,A>>>=ce,D-=ce),D<15&&(A+=Me[i++]<<D,D+=8,A+=Me[i++]<<D,D+=8),Y=B[A&K];n:for(;;){if(ce=Y>>>24,A>>>=ce,D-=ce,ce=Y>>>16&255,!(16&ce)){if(!(64&ce)){Y=B[(65535&Y)+(A&(1<<ce)-1)];continue n}t.msg="invalid distance code",nt.mode=jS;break e}if(Ee=65535&Y,ce&=15,D<ce&&(A+=Me[i++]<<D,D+=8,D<ce&&(A+=Me[i++]<<D,D+=8)),Ee+=A&(1<<ce)-1,Ee>p){t.msg="invalid distance too far back",nt.mode=jS;break e}if(A>>>=ce,D-=ce,ce=l-u,Ee>ce){if(ce=Ee-ce,ce>E&&nt.sane){t.msg="invalid distance too far back",nt.mode=jS;break e}if(me=0,Te=R,y===0){if(me+=m-ce,ce<ge){ge-=ce;do Xe[l++]=R[me++];while(--ce);me=l-Ee,Te=Xe}}else if(y<ce){if(me+=m+y-ce,ce-=y,ce<ge){ge-=ce;do Xe[l++]=R[me++];while(--ce);if(me=0,y<ge){ce=y,ge-=ce;do Xe[l++]=R[me++];while(--ce);me=l-Ee,Te=Xe}}}else if(me+=y-ce,ce<ge){ge-=ce;do Xe[l++]=R[me++];while(--ce);me=l-Ee,Te=Xe}for(;ge>2;)Xe[l++]=Te[me++],Xe[l++]=Te[me++],Xe[l++]=Te[me++],ge-=3;ge&&(Xe[l++]=Te[me++],ge>1&&(Xe[l++]=Te[me++]))}else{me=l-Ee;do Xe[l++]=Xe[me++],Xe[l++]=Xe[me++],Xe[l++]=Xe[me++],ge-=3;while(ge>2);ge&&(Xe[l++]=Xe[me++],ge>1&&(Xe[l++]=Xe[me++]))}break}}break}}while(i<a&&l<h);ge=D>>3,i-=ge,D-=ge<<3,A&=(1<<D)-1,t.next_in=i,t.next_out=l,t.avail_in=i<a?a-i+5:5-(i-a),t.avail_out=l<h?h-l+257:257-(l-h),nt.hold=A,nt.bits=D};const $S=15,vme=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Eme=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),_me=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Sme=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ag=(t,n,i,a,l,u,h,p)=>{const m=p.bits;let E,y,R,A,D,H,B=0,$=0,K=0,Y=0,ce=0,ge=0,Ee=0,me=0,Te=0,Me=0,Xe=null;const nt=new Uint16Array(16),dn=new Uint16Array(16);let hn,Qn,Vr,Pr=null;for(B=0;B<=$S;B++)nt[B]=0;for($=0;$<a;$++)nt[n[i+$]]++;for(ce=m,Y=$S;Y>=1&&nt[Y]===0;Y--);if(ce>Y&&(ce=Y),Y===0)return l[u++]=20971520,l[u++]=20971520,p.bits=1,0;for(K=1;K<Y&&nt[K]===0;K++);for(ce<K&&(ce=K),me=1,B=1;B<=$S;B++)if(me<<=1,me-=nt[B],me<0)return-1;if(me>0&&(t===0||Y!==1))return-1;for(dn[1]=0,B=1;B<$S;B++)dn[B+1]=dn[B]+nt[B];for($=0;$<a;$++)n[i+$]!==0&&(h[dn[n[i+$]]++]=$);if(t===0?(Xe=Pr=h,H=20):t===1?(Xe=vme,Pr=Eme,H=257):(Xe=_me,Pr=Sme,H=0),Me=0,$=0,B=K,D=u,ge=ce,Ee=0,R=-1,Te=1<<ce,A=Te-1,t===1&&Te>852||t===2&&Te>592)return 1;for(;;){hn=B-Ee,h[$]+1<H?(Qn=0,Vr=h[$]):h[$]>=H?(Qn=Pr[h[$]-H],Vr=Xe[h[$]-H]):(Qn=96,Vr=0),E=1<<B-Ee,y=1<<ge,K=y;do y-=E,l[D+(Me>>Ee)+y]=hn<<24|Qn<<16|Vr|0;while(y!==0);for(E=1<<B-1;Me&E;)E>>=1;if(E!==0?(Me&=E-1,Me+=E):Me=0,$++,--nt[B]==0){if(B===Y)break;B=n[i+h[$]]}if(B>ce&&(Me&A)!==R){for(Ee===0&&(Ee=ce),D+=K,ge=B-Ee,me=1<<ge;ge+Ee<Y&&(me-=nt[ge+Ee],!(me<=0));)ge++,me<<=1;if(Te+=1<<ge,t===1&&Te>852||t===2&&Te>592)return 1;R=Me&A,l[R]=ce<<24|ge<<16|D-u|0}}return Me!==0&&(l[D+Me]=B-Ee<<24|64<<16|0),p.bits=ce,0};const{Z_FINISH:u$,Z_BLOCK:yme,Z_TREES:HS,Z_OK:vh,Z_STREAM_END:Cme,Z_NEED_DICT:bme,Z_STREAM_ERROR:Xs,Z_DATA_ERROR:d$,Z_MEM_ERROR:h$,Z_BUF_ERROR:Tme,Z_DEFLATED:f$}=_p,zS=16180,WS=16190,eu=16191,bA=16192,TA=16194,GS=16199,KS=16200,RA=16206,Ii=16209,p$=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Rme(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Eh=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.mode<zS||n.mode>16211?1:0},m$=t=>{if(Eh(t))return Xs;const n=t.state;return t.total_in=t.total_out=n.total=0,t.msg="",n.wrap&&(t.adler=1&n.wrap),n.mode=zS,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(852),n.distcode=n.distdyn=new Int32Array(592),n.sane=1,n.back=-1,vh},g$=t=>{if(Eh(t))return Xs;const n=t.state;return n.wsize=0,n.whave=0,n.wnext=0,m$(t)},v$=(t,n)=>{let i;if(Eh(t))return Xs;const a=t.state;return n<0?(i=0,n=-n):(i=5+(n>>4),n<48&&(n&=15)),n&&(n<8||n>15)?Xs:(a.window!==null&&a.wbits!==n&&(a.window=null),a.wrap=i,a.wbits=n,g$(t))},E$=(t,n)=>{if(!t)return Xs;const i=new Rme;t.state=i,i.strm=t,i.window=null,i.mode=zS;const a=v$(t,n);return a!==vh&&(t.state=null),a};let wA,IA,_$=!0;const wme=t=>{if(_$){wA=new Int32Array(512),IA=new Int32Array(32);let n=0;for(;n<144;)t.lens[n++]=8;for(;n<256;)t.lens[n++]=9;for(;n<280;)t.lens[n++]=7;for(;n<288;)t.lens[n++]=8;for(ag(1,t.lens,0,288,wA,0,t.work,{bits:9}),n=0;n<32;)t.lens[n++]=5;ag(2,t.lens,0,32,IA,0,t.work,{bits:5}),_$=!1}t.lencode=wA,t.lenbits=9,t.distcode=IA,t.distbits=5},S$=(t,n,i,a)=>{let l;const u=t.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new Uint8Array(u.wsize)),a>=u.wsize?(u.window.set(n.subarray(i-u.wsize,i),0),u.wnext=0,u.whave=u.wsize):(l=u.wsize-u.wnext,l>a&&(l=a),u.window.set(n.subarray(i-a,i-a+l),u.wnext),(a-=l)?(u.window.set(n.subarray(i-a,i),0),u.wnext=a,u.whave=u.wsize):(u.wnext+=l,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=l))),0};var Ime=(t,n)=>{let i,a,l,u,h,p,m,E,y,R,A,D,H,B,$,K,Y,ce,ge,Ee,me,Te,Me=0;const Xe=new Uint8Array(4);let nt,dn;const hn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Eh(t)||!t.output||!t.input&&t.avail_in!==0)return Xs;i=t.state,i.mode===eu&&(i.mode=bA),h=t.next_out,l=t.output,m=t.avail_out,u=t.next_in,a=t.input,p=t.avail_in,E=i.hold,y=i.bits,R=p,A=m,Te=vh;e:for(;;)switch(i.mode){case zS:if(i.wrap===0){i.mode=bA;break}for(;y<16;){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}if(2&i.wrap&&E===35615){i.wbits===0&&(i.wbits=15),i.check=0,Xe[0]=255&E,Xe[1]=E>>>8&255,i.check=Do(i.check,Xe,2,0),E=0,y=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&E)<<8)+(E>>8))%31){t.msg="incorrect header check",i.mode=Ii;break}if((15&E)!==f$){t.msg="unknown compression method",i.mode=Ii;break}if(E>>>=4,y-=4,me=8+(15&E),i.wbits===0&&(i.wbits=me),me>15||me>i.wbits){t.msg="invalid window size",i.mode=Ii;break}i.dmax=1<<i.wbits,i.flags=0,t.adler=i.check=1,i.mode=512&E?16189:eu,E=0,y=0;break;case 16181:for(;y<16;){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}if(i.flags=E,(255&_o(i))!==f$){t.msg="unknown compression method",i.mode=Ii;break}if(57344&_o(i)){t.msg="unknown header flags set",i.mode=Ii;break}i.head&&(i.head.text=E>>8&1),512&_o(i)&&4&i.wrap&&(Xe[0]=255&E,Xe[1]=E>>>8&255,i.check=Do(i.check,Xe,2,0)),E=0,y=0,i.mode=16182;case 16182:for(;y<32;){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}i.head&&(i.head.time=E),512&_o(i)&&4&i.wrap&&(Xe[0]=255&E,Xe[1]=E>>>8&255,Xe[2]=E>>>16&255,Xe[3]=E>>>24&255,i.check=Do(i.check,Xe,4,0)),E=0,y=0,i.mode=16183;case 16183:for(;y<16;){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}i.head&&(i.head.xflags=255&E,i.head.os=E>>8),512&_o(i)&&4&i.wrap&&(Xe[0]=255&E,Xe[1]=E>>>8&255,i.check=Do(i.check,Xe,2,0)),E=0,y=0,i.mode=16184;case 16184:if(1024&_o(i)){for(;y<16;){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}i.length=E,i.head&&(i.head.extra_len=E),512&_o(i)&&4&i.wrap&&(Xe[0]=255&E,Xe[1]=E>>>8&255,i.check=Do(i.check,Xe,2,0)),E=0,y=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&_o(i)&&(D=i.length,D>p&&(D=p),D&&(i.head&&(me=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(a.subarray(u,u+D),me)),512&_o(i)&&4&i.wrap&&(i.check=Do(i.check,a,D,u)),p-=D,u+=D,i.length-=D),i.length))break e;i.length=0,i.mode=16186;case 16186:if(2048&_o(i)){if(p===0)break e;D=0;do me=a[u+D++],i.head&&me&&i.length<65536&&(i.head.name+=String.fromCharCode(me));while(me&&D<p);if(512&_o(i)&&4&i.wrap&&(i.check=Do(i.check,a,D,u)),p-=D,u+=D,me)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&_o(i)){if(p===0)break e;D=0;do me=a[u+D++],i.head&&me&&i.length<65536&&(i.head.comment+=String.fromCharCode(me));while(me&&D<p);if(512&_o(i)&&4&i.wrap&&(i.check=Do(i.check,a,D,u)),p-=D,u+=D,me)break e}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&_o(i)){for(;y<16;){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}if(4&i.wrap&&E!==(65535&i.check)){t.msg="header crc mismatch",i.mode=Ii;break}E=0,y=0}i.head&&(i.head.hcrc=_o(i)>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=eu;break;case 16189:for(;y<32;){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}t.adler=i.check=p$(E),E=0,y=0,i.mode=WS;case WS:if(i.havedict===0)return t.next_out=h,t.avail_out=m,t.next_in=u,t.avail_in=p,i.hold=E,i.bits=y,bme;t.adler=i.check=1,i.mode=eu;case eu:if(n===yme||n===HS)break e;case bA:if(i.last){E>>>=7&y,y-=7&y,i.mode=RA;break}for(;y<3;){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}switch(i.last=1&E,E>>>=1,y-=1,3&E){case 0:i.mode=16193;break;case 1:if(wme(i),i.mode=GS,n===HS){E>>>=2,y-=2;break e}break;case 2:i.mode=16196;break;case 3:t.msg="invalid block type",i.mode=Ii}E>>>=2,y-=2;break;case 16193:for(E>>>=7&y,y-=7&y;y<32;){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}if((65535&E)!=(E>>>16^65535)){t.msg="invalid stored block lengths",i.mode=Ii;break}if(i.length=65535&E,E=0,y=0,i.mode=TA,n===HS)break e;case TA:i.mode=16195;case 16195:if(D=i.length,D){if(D>p&&(D=p),D>m&&(D=m),D===0)break e;l.set(a.subarray(u,u+D),h),p-=D,u+=D,m-=D,h+=D,i.length-=D;break}i.mode=eu;break;case 16196:for(;y<14;){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}if(i.nlen=257+(31&E),E>>>=5,y-=5,i.ndist=1+(31&E),E>>>=5,y-=5,i.ncode=4+(15&E),E>>>=4,y-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=Ii;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;y<3;){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}i.lens[hn[i.have++]]=7&E,E>>>=3,y-=3}for(;i.have<19;)i.lens[hn[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,nt={bits:i.lenbits},Te=ag(0,i.lens,0,19,i.lencode,0,i.work,nt),i.lenbits=nt.bits,Te){t.msg="invalid code lengths set",i.mode=Ii;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;Me=i.lencode[E&(1<<i.lenbits)-1],$=Me>>>24,K=Me>>>16&255,Y=65535&Me,!($<=y);){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}if(Y<16)E>>>=$,y-=$,i.lens[i.have++]=Y;else{if(Y===16){for(dn=$+2;y<dn;){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}if(E>>>=$,y-=$,i.have===0){t.msg="invalid bit length repeat",i.mode=Ii;break}me=i.lens[i.have-1],D=3+(3&E),E>>>=2,y-=2}else if(Y===17){for(dn=$+3;y<dn;){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}E>>>=$,y-=$,me=0,D=3+(7&E),E>>>=3,y-=3}else{for(dn=$+7;y<dn;){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}E>>>=$,y-=$,me=0,D=11+(127&E),E>>>=7,y-=7}if(i.have+D>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=Ii;break}for(;D--;)i.lens[i.have++]=me}}if(i.mode===Ii)break;if(i.lens[256]===0){t.msg="invalid code -- missing end-of-block",i.mode=Ii;break}if(i.lenbits=9,nt={bits:i.lenbits},Te=ag(1,i.lens,0,i.nlen,i.lencode,0,i.work,nt),i.lenbits=nt.bits,Te){t.msg="invalid literal/lengths set",i.mode=Ii;break}if(i.distbits=6,i.distcode=i.distdyn,nt={bits:i.distbits},Te=ag(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,nt),i.distbits=nt.bits,Te){t.msg="invalid distances set",i.mode=Ii;break}if(i.mode=GS,n===HS)break e;case GS:i.mode=KS;case KS:if(p>=6&&m>=258){t.next_out=h,t.avail_out=m,t.next_in=u,t.avail_in=p,i.hold=E,i.bits=y,gme(t,A),h=t.next_out,l=t.output,m=t.avail_out,u=t.next_in,a=t.input,p=t.avail_in,E=i.hold,y=i.bits,i.mode===eu&&(i.back=-1);break}for(i.back=0;Me=i.lencode[E&(1<<i.lenbits)-1],$=Me>>>24,K=Me>>>16&255,Y=65535&Me,!($<=y);){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}if(K&&!(240&K)){for(ce=$,ge=K,Ee=Y;Me=i.lencode[Ee+((E&(1<<ce+ge)-1)>>ce)],$=Me>>>24,K=Me>>>16&255,Y=65535&Me,!(ce+$<=y);){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}E>>>=ce,y-=ce,i.back+=ce}if(E>>>=$,y-=$,i.back+=$,i.length=Y,K===0){i.mode=16205;break}if(32&K){i.back=-1,i.mode=eu;break}if(64&K){t.msg="invalid literal/length code",i.mode=Ii;break}i.extra=15&K,i.mode=16201;case 16201:if(i.extra){for(dn=i.extra;y<dn;){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}i.length+=E&(1<<i.extra)-1,E>>>=i.extra,y-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;Me=i.distcode[E&(1<<i.distbits)-1],$=Me>>>24,K=Me>>>16&255,Y=65535&Me,!($<=y);){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}if(!(240&K)){for(ce=$,ge=K,Ee=Y;Me=i.distcode[Ee+((E&(1<<ce+ge)-1)>>ce)],$=Me>>>24,K=Me>>>16&255,Y=65535&Me,!(ce+$<=y);){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}E>>>=ce,y-=ce,i.back+=ce}if(E>>>=$,y-=$,i.back+=$,64&K){t.msg="invalid distance code",i.mode=Ii;break}i.offset=Y,i.extra=15&K,i.mode=16203;case 16203:if(i.extra){for(dn=i.extra;y<dn;){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}i.offset+=E&(1<<i.extra)-1,E>>>=i.extra,y-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=Ii;break}i.mode=16204;case 16204:if(m===0)break e;if(D=A-m,i.offset>D){if(D=i.offset-D,D>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=Ii;break}D>i.wnext?(D-=i.wnext,H=i.wsize-D):H=i.wnext-D,D>i.length&&(D=i.length),B=i.window}else B=l,H=h-i.offset,D=i.length;D>m&&(D=m),m-=D,i.length-=D;do l[h++]=B[H++];while(--D);i.length===0&&(i.mode=KS);break;case 16205:if(m===0)break e;l[h++]=i.length,m--,i.mode=KS;break;case RA:if(i.wrap){for(;y<32;){if(p===0)break e;p--,E|=a[u++]<<y,y+=8}if(A-=m,t.total_out+=A,i.total+=A,4&i.wrap&&A&&(t.adler=i.check=_o(i)?Do(i.check,l,A,h-A):J0(i.check,l,A,h-A)),A=m,4&i.wrap&&(_o(i)?E:p$(E))!==i.check){t.msg="incorrect data check",i.mode=Ii;break}E=0,y=0}i.mode=16207;case 16207:if(i.wrap&&_o(i)){for(;y<32;){if(p===0)break e;p--,E+=a[u++]<<y,y+=8}if(4&i.wrap&&E!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=Ii;break}E=0,y=0}i.mode=16208;case 16208:Te=Cme;break e;case Ii:Te=d$;break e;case 16210:return h$;default:return Xs}return t.next_out=h,t.avail_out=m,t.next_in=u,t.avail_in=p,i.hold=E,i.bits=y,(i.wsize||A!==t.avail_out&&i.mode<Ii&&(i.mode<RA||n!==u$))&&S$(t,t.output,t.next_out,A-t.avail_out),R-=t.avail_in,A-=t.avail_out,t.total_in+=R,t.total_out+=A,i.total+=A,4&i.wrap&&A&&(t.adler=i.check=_o(i)?Do(i.check,l,A,t.next_out-A):J0(i.check,l,A,t.next_out-A)),t.data_type=i.bits+(i.last?64:0)+(i.mode===eu?128:0)+(i.mode===GS||i.mode===TA?256:0),(R===0&&A===0||n===u$)&&Te===vh&&(Te=Tme),Te},tu={inflateReset:g$,inflateReset2:v$,inflateResetKeep:m$,inflateInit:t=>E$(t,15),inflateInit2:E$,inflate:Ime,inflateEnd:t=>{if(Eh(t))return Xs;let n=t.state;return n.window&&(n.window=null),t.state=null,vh},inflateGetHeader:(t,n)=>{if(Eh(t))return Xs;const i=t.state;return 2&i.wrap?(i.head=n,n.done=!1,vh):Xs},inflateSetDictionary:(t,n)=>{const i=n.length;let a,l,u;return Eh(t)?Xs:(a=t.state,a.wrap!==0&&a.mode!==WS?Xs:a.mode===WS&&(l=1,l=J0(l,n,i,0),l!==a.check)?d$:(u=S$(t,n,i,i),u?(a.mode=16210,h$):(a.havedict=1,vh)))},inflateInfo:"pako inflate (from Nodeca project)"},Ame=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const y$=Object.prototype.toString,{Z_NO_FLUSH:Ome,Z_FINISH:xme,Z_OK:sg,Z_STREAM_END:AA,Z_NEED_DICT:OA,Z_STREAM_ERROR:Nme,Z_DATA_ERROR:C$,Z_MEM_ERROR:Pme}=_p;function cg(t){this.options=BS.assign({chunkSize:65536,windowBits:15,to:""},t||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),!(n.windowBits>=0&&n.windowBits<16)||t&&t.windowBits||(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&!(15&n.windowBits)&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c$,this.strm.avail_out=0;let i=tu.inflateInit2(this.strm,n.windowBits);if(i!==sg)throw new Error(fh[i]);if(this.header=new Ame,tu.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=ig.string2buf(n.dictionary):y$.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(i=tu.inflateSetDictionary(this.strm,n.dictionary),i!==sg)))throw new Error(fh[i])}function xA(t,n){const i=new cg(n);if(i.push(t),i.err)throw i.msg||fh[i.err];return i.result}cg.prototype.push=function(t,n){const i=this.strm,a=this.options.chunkSize,l=this.options.dictionary;let u,h,p;if(this.ended)return!1;for(h=n===~~n?n:n===!0?xme:Ome,y$.call(t)==="[object ArrayBuffer]"?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;){for(i.avail_out===0&&(i.output=new Uint8Array(a),i.next_out=0,i.avail_out=a),u=tu.inflate(i,h),u===OA&&l&&(u=tu.inflateSetDictionary(i,l),u===sg?u=tu.inflate(i,h):u===C$&&(u=OA));i.avail_in>0&&u===AA&&i.state.wrap>0&&t[i.next_in]!==0;)tu.inflateReset(i),u=tu.inflate(i,h);switch(u){case Nme:case C$:case OA:case Pme:return this.onEnd(u),this.ended=!0,!1}if(p=i.avail_out,i.next_out&&(i.avail_out===0||u===AA))if(this.options.to==="string"){let m=ig.utf8border(i.output,i.next_out),E=i.next_out-m,y=ig.buf2string(i.output,m);i.next_out=E,i.avail_out=a-E,E&&i.output.set(i.output.subarray(m,m+E),0),this.onData(y)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(u!==sg||p!==0){if(u===AA)return u=tu.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,!0;if(i.avail_in===0)break}}return!0},cg.prototype.onData=function(t){this.chunks.push(t)},cg.prototype.onEnd=function(t){t===sg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=BS.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Dme={Inflate:cg,inflate:xA,inflateRaw:function(t,n){return(n=n||{}).raw=!0,xA(t,n)},ungzip:xA,constants:_p};const{Deflate:YBe,deflate:Lme,deflateRaw:XBe,gzip:JBe}=mme,{Inflate:QBe,inflate:kme,inflateRaw:ZBe,ungzip:e3e}=Dme;var Mme=Lme,Fme=kme,b$=function(t){return t[t.ONE_BYTE=0]="ONE_BYTE",t[t.TWO_BYTE=1]="TWO_BYTE",t}(b$||{});class Ume{constructor(){G(this,"_sequence",0),G(this,"_startTime",Date.now()),G(this,"isUseOneByte",!0)}get startTime(){const n=Date.now()-this._startTime;return n<Math.pow(2,16)?n:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(n){const i={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:n};if(n.byteLength>128){const p=new Uint8Array(4);p.set([1,0,0,0]);const m={id:0,length:4,data:p.buffer},E={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[m]};i.commonPacketHeader.extension=1,i.extension=E,i.payload=this.compress(n),i.commonPacketHeader.length=8+(i.extension.length+2)+i.payload.byteLength}else i.commonPacketHeader.length=8+i.payload.byteLength;Q("SHOW_DATASTREAM2_LOG")&&k.debug("send data header: ".concat(JSON.stringify(i.commonPacketHeader)));const a=new ArrayBuffer(i.commonPacketHeader.length),l=new Uint8Array(a),u=new DataView(a);let h=0;if(u.setUint16(h,i.commonPacketHeader.extension<<15|i.commonPacketHeader.reserved<<14|i.commonPacketHeader.length,!0),h+=2,u.setUint32(h,i.commonPacketHeader.sequence,!0),h+=4,u.setUint16(h,i.commonStreamHeader,!0),h+=2,i.extension){const p=this.serializeExtension(i.extension);l.set(new Uint8Array(p),h),h+=p.byteLength}if(l.set(new Uint8Array(i.payload),h),h+=i.payload.byteLength,h!==i.commonPacketHeader.length)throw Error("serialize error!");return a}deserialize(n){if(n.byteLength<4)return new ArrayBuffer(0);const i=new DataView(n);let a=0;const l=i.getUint16(a,!0);a+=2;const u={length:16383&l,reserved:(16384&l)>>14,extension:(32768&l)>>15,sequence:i.getUint16(a+2,!0)<<16|i.getUint16(a,!0)};let h,p;if(a+=4,Q("SHOW_DATASTREAM2_LOG")&&k.debug("receive data header: ".concat(JSON.stringify(u))),i.getUint16(a,!0),a+=2,u.extension){p=this.deserializeExtension(n.slice(a)),a+=2+p.length,h=n.slice(a);let m=!1;if(p.datas.length>0){const E=p.datas.find(y=>y.id===0);E&&(m=(1&new DataView(E.data).getUint32(0,!0))==1)}h=m?this.decompress(h):h}else h=n.slice(8);return h}serializeExtension(n){const{profile:i,length:a,datas:l}=n,u=new ArrayBuffer(a+2),h=new Uint8Array(u),p=new DataView(u);let m=0;if(p.setUint8(m++,i),p.setUint8(m++,a),l.forEach(E=>{i?(p.setUint8(m++,E.id),p.setUint8(m++,E.length),h.set(new Uint8Array(E.data),m),m+=E.data.byteLength):(p.setUint8(m++,E.id|E.length<<4),h.set(new Uint8Array(E.data),m),m+=E.data.byteLength)}),m!==a+2)throw Error("serialize extension error, is ".concat(m,"!==").concat(a+2));return u}deserializeExtension(n){const i=new DataView(n);let a=0;const l=i.getUint8(a);a++;const u=i.getUint8(a);a++;const h=l===b$.TWO_BYTE,p=[],m=new DataView(n,2);let E=0;for(;E<u;){let y=0,R=0,A=new ArrayBuffer(0);h?(y=m.getUint8(E),E++,R=m.getUint8(E),E++):(y=15&m.getUint8(E),R=m.getUint8(E)>>4,E++),R>0&&(A=m.buffer.slice(E+2,E+2+R),E+=A.byteLength),p.push({id:y,length:R,data:A})}if(E!==u)throw Error("parse error");return{profile:l,length:u,datas:p}}decompress(n){return Fme(new Uint8Array(n))}compress(n){return Mme(new Uint8Array(n))}}const Bme={name:"DataStream",create:(t,n)=>{const i=n?new Yhe(t):new Xhe(t);return i.useDataStream(new Ume),i}};class Vme extends Sr{constructor(n,i,a){super(),G(this,"ws",void 0),G(this,"requestId",1),G(this,"heartBeatTimer",void 0),G(this,"joinInfo",void 0),G(this,"clientId",void 0),G(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),G(this,"onClose",l=>{this.emit("close"),this.dispose()}),G(this,"onMessage",l=>{const u=JSON.parse(l.data);if(!u||u.command!=="serverResponse"||!u.requestId)return u&&u.command==="serverStatus"&&u.serverStatus&&u.serverStatus.command?(this.emit("status",u.serverStatus),void this.emit(u.serverStatus.command,u.serverStatus)):void 0;this.emit("req_".concat(u.requestId),u)}),this.joinInfo=n,this.clientId=i,this.ws=new D0("cross-channel-".concat(this.clientId),a),this.ws.on(qt.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(qt.CONNECTED,this.onOpen),this.ws.on(qt.ON_MESSAGE,this.onMessage),this.ws.on(qt.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(n){const i=this.requestId++;return n.requestId=i,n.seq=i,this.ws.sendMessage(n),i}waitStatus(n){return new Ye((i,a)=>{const l=window.setTimeout(()=>{a(new ye(X.TIMEOUT,"wait status timeout, status: ".concat(n)))},5e3);this.once(n,u=>{window.clearTimeout(l),u.state&&u.state!==0?a(new ye(X.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(n))):i(void 0)}),this.once("dispose",()=>{window.clearTimeout(l),a(new ye(X.WS_ABORT))})})}async request(n){if(this.ws.state==="closed")throw new ye(X.WS_DISCONNECT);const i=()=>new Ye((h,p)=>{this.ws.once(qt.CLOSED,()=>p(new ye(X.WS_ABORT))),this.ws.once(qt.CONNECTED,h)});this.ws.state!=="connected"&&await i();const a=this.sendMessage(n),l=new Ye((h,p)=>{const m=()=>{p(new ye(X.WS_ABORT))};this.ws.once(qt.RECONNECTING,m),this.ws.once(qt.CLOSED,m),this.once("req_".concat(a),h),Ni(3e3).then(()=>{this.removeAllListeners("req_".concat(a)),this.ws.off(qt.RECONNECTING,m),this.ws.off(qt.CLOSED,m),p(new ye(X.TIMEOUT,"cross channel ws request timeout"))})}),u=await l;if(!u||u.code!==200)throw new ye(X.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(u)));return u}async connect(n){this.ws.removeAllListeners(qt.REQUEST_NEW_URLS),this.ws.on(qt.REQUEST_NEW_URLS,i=>{i(n)}),await this.ws.init(n)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(n){const i=this.requestId++;return n.requestId=i,this.ws.sendMessage(n),i}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class jme extends Sr{set state(n){n!==this._state&&(n!==ca.RELAY_STATE_FAILURE&&(this.errorCode=ip.RELAY_OK),this.emit("state",n,this.errorCode),this._state=n)}get state(){return this._state}constructor(n,i,a,l,u){super(),G(this,"joinInfo",void 0),G(this,"sid",void 0),G(this,"clientId",void 0),G(this,"cancelToken",zo.CancelToken.source()),G(this,"workerToken",void 0),G(this,"requestId",0),G(this,"signal",void 0),G(this,"prevChannelMediaConfig",void 0),G(this,"httpRetryConfig",void 0),G(this,"_resolution",void 0),G(this,"_state",ca.RELAY_STATE_IDLE),G(this,"errorCode",ip.RELAY_OK),G(this,"onStatus",h=>{k.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(h))),h&&h.command&&(h.command==="onAudioPacketReceived"&&this.emit("event",ql.PACKET_RECEIVED_AUDIO_FROM_SRC),h.command==="onVideoPacketReceived"&&this.emit("event",ql.PACKET_RECEIVED_VIDEO_FROM_SRC),h.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=ip.SRC_TOKEN_EXPIRED,this.state=ca.RELAY_STATE_FAILURE),h.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=ip.DEST_TOKEN_EXPIRED,this.state=ca.RELAY_STATE_FAILURE))}),G(this,"onReconnect",async()=>{k.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",ql.NETWORK_DISCONNECTED),this.state=ca.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(h=>{this.state!==ca.RELAY_STATE_IDLE&&(k.error("auto restart channel media relay failed",h.toString()),this.errorCode=ip.SERVER_CONNECTION_LOST,this.state=ca.RELAY_STATE_FAILURE)})}),this.joinInfo=n,this.clientId=i,this.sid=Xd(),this.signal=new Vme(this.joinInfo,this.clientId,a),this.httpRetryConfig=l,this._resolution=u}async startChannelMediaRelay(n){if(this.state!==ca.RELAY_STATE_IDLE)throw new ye(X.INVALID_OPERATION);this.state=ca.RELAY_STATE_CONNECTING,await this.connect(),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(n)}catch(i){throw i.data&&i.data.serverResponse&&i.data.serverResponse.command==="SetSourceChannel"?new ye(X.CROSS_CHANNEL_FAILED_JOIN_SRC):i.data&&i.data.serverResponse&&i.serverResponse.command==="SetDestChannelStatus"?new ye(X.CROSS_CHANNEL_FAILED_JOIN_DEST):i.data&&i.data.serverResponse&&i.serverResponse.command==="StartPacketTransfer"?new ye(X.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):i}this.prevChannelMediaConfig=n}async updateChannelMediaRelay(n){if(this.state!==ca.RELAY_STATE_RUNNING)throw new ye(X.INVALID_OPERATION);await this.sendUpdateMessage(n),this.prevChannelMediaConfig=n}async setVideoProfile(n){if(this._resolution=n,this.state!==ca.RELAY_STATE_RUNNING)throw new ye(X.INVALID_OPERATION);const i=this.genMessage(Po.SetVideoProfile);await this.signal.request(i),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),k.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=ca.RELAY_STATE_IDLE,this.dispose()}dispose(){k.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=zo.CancelToken.source(),this.state=ca.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const n=await epe(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=n.workerToken,await this.signal.connect(n.addressList),this.emit("event",ql.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(n){const i=this.genMessage(Po.StopPacketTransfer);await this.signal.request(i),await this.signal.waitStatus("Normal Quit"),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const a=this.genMessage(Po.SetSdkProfile,n);await this.signal.request(a),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const l=this.genMessage(Po.SetSourceChannel,n);await this.signal.request(l),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",ql.PACKET_JOINED_SRC_CHANNEL),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const u=this.genMessage(Po.SetSourceUserId,n);await this.signal.request(u),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const h=this.genMessage(Po.SetDestChannel,n);await this.signal.request(h),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",ql.PACKET_JOINED_DEST_CHANNEL),k.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const p=this.genMessage(Po.StartPacketTransfer,n);await this.signal.request(p),this.emit("event",ql.PACKET_SENT_TO_DEST_CHANNEL),this.state=ca.RELAY_STATE_RUNNING,k.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(n){const i=this.genMessage(Po.UpdateDestChannel,n);await this.signal.request(i),this.emit("event",ql.PACKET_UPDATE_DEST_CHANNEL),k.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const n=this.genMessage(Po.StopPacketTransfer);await this.signal.request(n),k.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(n,i){const a=[],l=[],u=[];this.requestId+=1;const h={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:ss,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};h.sdkVersion==="4.23.2"&&(h.sdkVersion="0.0.1");let p=null,m=null;switch(n){case Po.SetSdkProfile:return h.clientRequest={command:"SetSdkProfile",type:"multi_channel"},h;case Po.SetSourceChannel:if(m=i&&i.getSrcChannelMediaInfo(),!m)throw new ye(X.UNEXPECTED_ERROR,"can not find source config");return h.clientRequest={command:"SetSourceChannel",uid:"0",channelName:m.channelName,token:m.token||this.joinInfo.appId},h;case Po.SetSourceUserId:if(m=i&&i.getSrcChannelMediaInfo(),!m)throw new ye(X.UNEXPECTED_ERROR,"can not find source config");return h.clientRequest={command:"SetSourceUserId",uid:m.uid+""},h;case Po.SetDestChannel:if(p=i&&i.getDestChannelMediaInfo(),!p)throw new ye(X.UNEXPECTED_ERROR,"can not find dest config");return p.forEach(E=>{a.push(E.channelName),l.push(E.uid+""),u.push(E.token||this.joinInfo.appId)}),h.clientRequest={command:"SetDestChannel",channelName:a,uid:l,token:u},h;case Po.StartPacketTransfer:return h.clientRequest={command:"StartPacketTransfer"},h;case Po.Reconnect:return h.clientRequest={command:"Reconnect"},h;case Po.StopPacketTransfer:return h.clientRequest={command:"StopPacketTransfer"},h;case Po.UpdateDestChannel:if(p=i&&i.getDestChannelMediaInfo(),!p)throw new ye(X.UNEXPECTED_ERROR,"can not find dest config");return p.forEach(E=>{a.push(E.channelName),l.push(E.uid+""),u.push(E.token||this.joinInfo.appId)}),h.clientRequest={command:"UpdateDestChannel",channelName:a,uid:l,token:u},h;case Po.SetVideoProfile:h.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return h}}const $me={name:"ChannelMediaRelay",create:function(t){return new jme(t.joinInfo,t.clientId,t.websocketRetryConfig||ti,t.httpRetryConfig||ti,t.resolution)}};function T$(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function lg(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?T$(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):T$(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}class Hme extends Sr{constructor(n,i,a,l){super(),G(this,"spec",void 0),G(this,"token",void 0),G(this,"websocket",void 0),G(this,"pingpongTimer",void 0),G(this,"reconnectMode","retry"),G(this,"serviceMode",void 0),G(this,"reqId",0),G(this,"commandReqId",0),G(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),G(this,"handleWebSocketMessage",u=>{if(!u.data)return;const h=JSON.parse(u.data);h.requestId?this.emit("@".concat(h.requestId,"-").concat(h.sid),h):(dt.workerEvent(this.spec.sid,{actionType:"status",serverCode:h.code,workerType:this.serviceMode===ul.TRANSCODE?1:2}),this.emit(Uu.PUBLISH_STREAM_STATUS,h))}),this.spec=i,this.token=n,this.serviceMode=l,this.websocket=new D0("live-streaming",a),this.websocket.on(qt.CONNECTED,this.handleWebSocketOpen),this.websocket.on(qt.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(qt.REQUEST_NEW_URLS,(u,h)=>{Wi(this,Uu.REQUEST_NEW_ADDRESS).then(u).catch(h)}),this.websocket.on(qt.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(n){return this.websocket.init(n)}async request(n,i,a,l){this.reqId+=1,n==="request"&&(this.commandReqId+=1);const u=this.commandReqId,h=this.reqId;if(!h||!this.websocket)throw new ye(X.UNEXPECTED_ERROR);const p=lg({command:n,sdkVersion:ss==="4.23.2"?"0.0.1":ss,seq:h,requestId:h,allocate:a,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},i);if(this.websocket.state==="closed")throw new ye(X.WS_DISCONNECT);const m=()=>new Ye((A,D)=>{this.websocket.once(qt.CLOSED,()=>D(new ye(X.WS_ABORT))),this.websocket.once(qt.CONNECTED,A)});this.websocket.state!=="connected"&&await m(),p.clientRequest&&(p.clientRequest.workerToken=this.token);const E=new Ye((A,D)=>{const H=()=>{D(new ye(X.WS_ABORT))};this.websocket.once(qt.RECONNECTING,H),this.websocket.once(qt.CLOSED,H),this.once("@".concat(h,"-").concat(this.spec.sid),B=>{A(B)})});l&&dt.workerEvent(this.spec.sid,lg(lg({},l),{},{requestId:u,actionType:"request",payload:JSON.stringify(i.clientRequest),serverCode:0,code:0}));const y=Date.now();this.websocket.sendMessage(p);let R=null;try{R=await E}catch(A){if(this.websocket.state==="closed")throw A;return await m(),await this.request(n,i,a)}return l&&dt.workerEvent(this.spec.sid,lg(lg({},l),{},{requestId:u,actionType:"response",payload:JSON.stringify(R.serverResponse),serverCode:R.code,success:R.code===200,responseTime:Date.now()-y})),R.code!==200&&this.handleResponseError(R),R}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const n=ss==="4.23.2"?"0.0.1":ss;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:n,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(n){switch(n.code){case hi.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void k.warning("live stream response already exists stream");case hi.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case hi.LIVE_STREAM_RESPONSE_BAD_STREAM:case hi.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new ye(X.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:n.code}).throw();case hi.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(n.serverResponse.command==="UnpublishStream")return;throw new ye(X.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case hi.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new ye(X.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:n.code}).throw();case hi.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const i=new ye(X.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(Uu.WARNING,i,n.serverResponse.url)}case hi.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const i=new ye(X.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(Uu.WARNING,i,n.serverResponse.url)}case hi.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new ye(X.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case hi.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new ye(X.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:n.code}).throw();case hi.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const i=new ye(X.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(Uu.WARNING,i,n.serverResponse.url)}case hi.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new ye(X.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:n.code}).throw();case hi.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new ye(X.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case hi.LIVE_STREAM_RESPONSE_WORKER_LOST:case hi.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(n.serverResponse.command==="UnpublishStream")return;throw new ye(X.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case hi.ERROR_FAIL_SEND_MESSAGE:if(n.serverResponse.command==="UnpublishStream")return;if(n.serverResponse.command==="UpdateTranscoding"||n.serverResponse.command==="ControlStream")return new ye(X.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:n.code}).throw();throw new ye(X.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case hi.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case hi.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case hi.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case hi.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new ye(X.LIVE_STREAMING_CDN_ERROR,"",{code:n.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(F_)},6e3)}}function R$(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function la(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?R$(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):R$(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}class zme extends Sr{constructor(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ti,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ti;super(),G(this,"onLiveStreamWarning",void 0),G(this,"onLiveStreamError",void 0),G(this,"spec",void 0),G(this,"retryTimeout",1e4),G(this,"connection",void 0),G(this,"httpRetryConfig",void 0),G(this,"wsRetryConfig",void 0),G(this,"streamingTasks",new Map),G(this,"isStartingStreamingTask",!1),G(this,"taskMutex",new Ji("live-streaming")),G(this,"cancelToken",zo.CancelToken.source()),G(this,"transcodingConfig",void 0),G(this,"uapResponse",void 0),G(this,"lastTaskId",1),G(this,"statusError",new Map),this.spec=n,this.httpRetryConfig=a,this.wsRetryConfig=i}async setTranscodingConfig(n){const i=la(la({},Dfe),n);i.videoCodecProfile!==66&&i.videoCodecProfile!==77&&i.videoCodecProfile!==100&&(k.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(i.videoCodecProfile," -> 100")),i.videoCodecProfile=100),i.transcodingUsers||(i.transcodingUsers=i.userConfigs),i.transcodingUsers&&(i.transcodingUsers=i.transcodingUsers.map(h=>la(la(la({},Pfe),h),{},{zOrder:h.zOrder?h.zOrder+1:1}))),function(h){Rr(h.width)||zn(h.width,"config.width",0,1e4),Rr(h.height)||zn(h.height,"config.height",0,1e4),Rr(h.videoBitrate)||zn(h.videoBitrate,"config.videoBitrate",1,1e6),Rr(h.videoFrameRate)||zn(h.videoFrameRate,"config.videoFrameRate"),Rr(h.lowLatency)||zl(h.lowLatency,"config.lowLatency"),Rr(h.audioSampleRate)||mi(h.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),Rr(h.audioBitrate)||zn(h.audioBitrate,"config.audioBitrate",1,128),Rr(h.audioChannels)||mi(h.audioChannels,"config.audioChannels",[1,2,3,4,5]),Rr(h.videoGop)||zn(h.videoGop,"config.videoGop"),Rr(h.videoCodecProfile)||mi(h.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),Rr(h.userCount)||zn(h.userCount,"config.userCount",0,17),Rr(h.backgroundColor)||zn(h.backgroundColor,"config.backgroundColor",0,16777215),Rr(h.userConfigExtraInfo)||xi(h.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),h.transcodingUsers&&!Rr(h.transcodingUsers)&&(Wl(h.transcodingUsers,"config.transcodingUsers"),h.transcodingUsers.forEach((p,m)=>{sS(p.uid),Rr(p.x)||zn(p.x,"transcodingUser[".concat(m,"].x"),0,1e4),Rr(p.y)||zn(p.y,"transcodingUser[".concat(m,"].y"),0,1e4),Rr(p.width)||zn(p.width,"transcodingUser[".concat(m,"].width"),0,1e4),Rr(p.height)||zn(p.height,"transcodingUser[".concat(m,"].height"),0,1e4),Rr(p.zOrder)||zn(p.zOrder-1,"transcodingUser[".concat(m,"].zOrder"),0,100),Rr(p.alpha)||zn(p.alpha,"transcodingUser[".concat(m,"].alpha"),0,1,!1)})),Rr(h.watermark)||OI(h.watermark,"watermark"),Rr(h.backgroundImage)||OI(h.backgroundImage,"backgroundImage"),h.images&&!Rr(h.images)&&(Wl(h.images,"config.images"),h.images.forEach((p,m)=>{OI(p,"images[".concat(m,"]"))}))}(i);const a=[];i.images&&a.push(...i.images.map(h=>la(la(la({},AI),h),{},{zOrder:255}))),i.backgroundImage&&(a.push(la(la(la({},AI),i.backgroundImage),{},{zOrder:0})),delete i.backgroundImage),i.watermark&&(a.push(la(la(la({},AI),i.watermark),{},{zOrder:255})),delete i.watermark),i.images=a,i.transcodingUsers&&(i.userConfigs=i.transcodingUsers.map(h=>la({},h)),i.userCount=i.transcodingUsers.length,delete i.transcodingUsers);const l=(i.userConfigs||[]).map(h=>typeof h.uid=="number"?Ye.resolve(h.uid):W6(h.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await Ye.all(l)).forEach((h,p)=>{i.userConfigs&&i.userConfigs[p]&&(i.userConfigs[p].uid=h)}),this.transcodingConfig=i,this.connection)try{var u;const h=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(Ma(u=this.streamingTasks).call(u)).map(p=>p.taskId).join("#")});k.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(h.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(h){if(!h.data||!h.data.retry)throw h;h.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(p=>{k.warning("[".concat(this.spec.clientId,"] live streaming receive error"),h.toString(),"try to republish",p.url),this.startLiveStreamingTask(p.url,p.mode,h).then(()=>{k.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(p.url," success"))}).catch(m=>{k.error("[".concat(this.spec.clientId,"] live streaming republish failed"),p.url,m.toString()),this.onLiveStreamError&&this.onLiveStreamError(p.url,m)})})}}async startLiveStreamingTask(n,i,a){if(!this.transcodingConfig&&i===ul.TRANSCODE)throw new ye(X.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");const l={command:"PublishStream",ts:Date.now(),url:n,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};k.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(n,", mode: ").concat(i));const u=await this.taskMutex.lock();if(!this.connection&&a)return void u();if(this.streamingTasks.get(n)&&!a)return u(),new ye(X.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(i))}catch(p){throw u(),p}switch(i){case ul.TRANSCODE:l.transcodingConfig=la({},this.transcodingConfig);case ul.RAW:}this.uapResponse&&this.uapResponse.vid&&(l.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const h=this.lastTaskId++;try{const p=new Ye((E,y)=>{Ni(this.retryTimeout).then(()=>{if(a)return y(a);const R=this.statusError.get(n);return R?(this.statusError.delete(n),y(R)):void 0})}),m=await Ye.race([this.connection.request("request",{clientRequest:l},!0,{url:n,command:"PublishStream",workerType:i===ul.TRANSCODE?1:2,requestByUser:!a,tid:h.toString()}),p]);this.isStartingStreamingTask=!1,k.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(m.code)),this.streamingTasks.set(n,{clientRequest:l,mode:i,url:n,taskId:h}),u()}catch(p){if(u(),this.isStartingStreamingTask=!1,!p.data||!p.data.retry||a)throw p;return p.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(n,i,p)):await this.startLiveStreamingTask(n,i,p)}}stopLiveStreamingTask(n){return new Ye((i,a)=>{const l=this.streamingTasks.get(n);if(!l||!this.connection)return new ye(X.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const u=l.mode;l.abortTask=()=>{k.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(n),i()},this.connection.request("request",{clientRequest:{command:"UnpublishStream",url:l.url}},!1,{url:n,command:"UnPublishStream",workerType:u===ul.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(h=>{k.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(h.code)),this.streamingTasks.delete(n),this.streamingTasks.size===0&&(this.connection&&this.connection.close(),this.connection=void 0),i()}).catch(a)})}resetAllTask(){var n;const i=Array.from(Ma(n=this.streamingTasks).call(n));this.terminate();for(const a of i)this.startLiveStreamingTask(a.url,a.mode).catch(l=>{this.onLiveStreamError&&this.onLiveStreamError(a.url,l)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=zo.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(n){if(this.connection)throw new ye(X.UNEXPECTED_ERROR,"live streaming connection has already connected");const i=await Wi(this,xI.REQUEST_WORKER_MANAGER_LIST,n);return this.uapResponse=i,this.connection=new Hme(i.workerToken,this.spec,this.wsRetryConfig,n),this.connection.on(Uu.WARNING,(a,l)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(l,a)),this.connection.on(Uu.PUBLISH_STREAM_STATUS,a=>this.handlePublishStreamServer(a)),this.connection.on(Uu.REQUEST_NEW_ADDRESS,(a,l)=>{if(!this.connection)return l(new ye(X.UNEXPECTED_ERROR,"can not get new live streaming address list"));Wi(this,xI.REQUEST_WORKER_MANAGER_LIST,n).then(u=>{this.uapResponse=u,a(u.addressList)}).catch(l)}),await this.connection.init(i.addressList),this.connection}handlePublishStreamServer(n){const i=n.serverStatus&&n.serverStatus.url||"empty_url",a=this.streamingTasks.get(i),l=n.reason;switch(n.code){case hi.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case hi.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case hi.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case hi.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const h=new ye(X.LIVE_STREAMING_CDN_ERROR,"",{code:n.code});if(a)return k.error(h.toString()),this.onLiveStreamError&&this.onLiveStreamError(i,h);if(!this.isStartingStreamingTask)return;this.statusError.set(i,h)}case hi.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const h=new ye(X.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,l);return this.onLiveStreamWarning&&this.onLiveStreamWarning(i,h)}case hi.LIVE_STREAM_RESPONSE_WORKER_LOST:case hi.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var u;if(!this.connection)return;this.connection.tryNextAddress();const h=Array.from(Ma(u=this.streamingTasks).call(u));for(const p of h)p.abortTask?p.abortTask():(k.warning("[".concat(this.spec.clientId,"] publish stream status code"),n.code,"try to republish",p.url),this.startLiveStreamingTask(p.url,p.mode,new ye(X.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:n.code})).then(()=>{k.debug("[".concat(this.spec.clientId,"] republish live stream success"),p.url)}).catch(m=>{k.error(m.toString()),this.onLiveStreamError&&this.onLiveStreamError(p.url,m)}));return}}}hasUrl(n){return this.streamingTasks.has(n)}}const Wme={name:"LiveStreaming",create:function(t){return new zme(t.joinInfo,t.websocketRetryConfig||ti,t.httpRetryConfig||ti)}};function Gme(t){let n=A$();return function(i,a){let l=i.appId;l!==void 0&&(Bn(a,10),Sl(a,l));let u=i.cid;u!==void 0&&(Bn(a,16),Bn(a,u));let h=i.cname;h!==void 0&&(Bn(a,26),Sl(a,h));let p=i.deviceId;p!==void 0&&(Bn(a,34),Sl(a,p));let m=i.elapse;m!==void 0&&(Bn(a,40),Qu(a,m));let E=i.fileSize;E!==void 0&&(Bn(a,48),Qu(a,bp(E)));let y=i.height;y!==void 0&&(Bn(a,56),Qu(a,bp(y)));let R=i.jpg;R!==void 0&&(Bn(a,66),Bn(a,R.length),function(Xo,Oe){let He=Tp(Xo,Oe.length);Xo.bytes.set(Oe,He)}(a,R));let A=i.networkType;A!==void 0&&(Bn(a,72),Qu(a,bp(A)));let D=i.osType;D!==void 0&&(Bn(a,80),Qu(a,bp(D)));let H=i.requestId;H!==void 0&&(Bn(a,90),Sl(a,H));let B=i.sdkVersion;B!==void 0&&(Bn(a,98),Sl(a,B));let $=i.sequence;$!==void 0&&(Bn(a,104),Qu(a,bp($)));let K=i.sid;K!==void 0&&(Bn(a,114),Sl(a,K));let Y=i.timestamp;Y!==void 0&&(Bn(a,120),Qu(a,Y));let ce=i.uid;ce!==void 0&&(Bn(a,128),Bn(a,ce));let ge=i.vid;ge!==void 0&&(Bn(a,136),Bn(a,ge));let Ee=i.width;Ee!==void 0&&(Bn(a,144),Qu(a,bp(Ee)));let me=i.service;me!==void 0&&(Bn(a,152),Bn(a,me));let Te=i.callbackData;Te!==void 0&&(Bn(a,162),Sl(a,Te));let Me=i.jpgEncryption;Me!==void 0&&(Bn(a,168),Bn(a,Me));let Xe=i.requestType;Xe!==void 0&&(Bn(a,176),Bn(a,Xe));let nt=i.scorePorn;nt!==void 0&&(Bn(a,185),kA(a,nt));let dn=i.scoreSexy;dn!==void 0&&(Bn(a,193),kA(a,dn));let hn=i.scoreNeutral;hn!==void 0&&(Bn(a,201),kA(a,hn));let Qn=i.scene;Qn!==void 0&&(Bn(a,208),Bn(a,Qn));let Vr=i.ossFilePrefix;Vr!==void 0&&(Bn(a,218),Sl(a,Vr));let Pr=i.serviceVendor;if(Pr!==void 0)for(let Xo of Pr){Bn(a,226);let Oe=A$();Yme(Xo,Oe),Bn(a,Oe.limit),Zme(a,Oe),Qme(Oe)}}(t,n),function(i){let a=i.bytes,l=i.limit;return a.length===l?a:a.subarray(0,l)}(n)}function Kme(t){return function(i){let a={};e:for(;!O$(i);){let l=yl(i);switch(l>>>3){case 0:break e;case 1:a.code=yl(i);break;case 2:a.msg=x$(i,yl(i));break;case 3:{let u=Xme(i);a.data=qme(i),i.limit=u;break}default:w$(i,7&l)}}return a}({bytes:n=t,offset:0,limit:n.length});var n}function qme(t){let n={};e:for(;!O$(t);){let i=yl(t);switch(i>>>3){case 0:break e;case 1:n.requestId=x$(t,yl(t));break;case 2:n.requestType=yl(t)>>>0;break;case 3:n.scorePorn=LA(t);break;case 4:n.scoreSexy=LA(t);break;case 5:n.scoreNeutral=LA(t);break;case 6:n.requestScene=yl(t)>>>0;break;case 7:n.scene=yl(t)>>>0;break;default:w$(t,7&i)}}return n}function Yme(t,n){let i=t.service;i!==void 0&&(Bn(n,8),Bn(n,i));let a=t.vendor;a!==void 0&&(Bn(n,16),Bn(n,a));let l=t.token;l!==void 0&&(Bn(n,26),Sl(n,l));let u=t.callbackUrl;u!==void 0&&(Bn(n,34),Sl(n,u))}function Xme(t){let n=yl(t),i=t.limit;return t.limit=t.offset+n,i}function w$(t,n){switch(n){case 0:for(;128&N$(t););break;case 2:PA(t,yl(t));break;case 5:PA(t,4);break;case 1:PA(t,8);break;default:throw new Error("Unimplemented type: "+n)}}let Jme=new Float32Array(1);new Uint8Array(Jme.buffer);let NA=new Float64Array(1),ua=new Uint8Array(NA.buffer);function bp(t){return{low:t|=0,high:t>>31,unsigned:t>=0}}let I$=[];function A$(){const t=I$.pop();return t?(t.offset=t.limit=0,t):{bytes:new Uint8Array(64),offset:0,limit:0}}function Qme(t){I$.push(t)}function PA(t,n){if(t.offset+n>t.limit)throw new Error("Skip past limit");t.offset+=n}function O$(t){return t.offset>=t.limit}function Tp(t,n){let i=t.bytes,a=t.offset,l=t.limit,u=a+n;if(u>i.length){let h=new Uint8Array(2*u);h.set(i),t.bytes=h}return t.offset=u,u>l&&(t.limit=u),a}function DA(t,n){let i=t.offset;if(i+n>t.limit)throw new Error("Read past limit");return t.offset+=n,i}function x$(t,n){let i=DA(t,n),a=String.fromCharCode,l=t.bytes,u="�",h="";for(let p=0;p<n;p++){let m,E,y,R,A=l[p+i];128&A?(224&A)==192?p+1>=n?h+=u:(m=l[p+i+1],(192&m)!=128?h+=u:(R=(31&A)<<6|63&m,R<128?h+=u:(h+=a(R),p++))):(240&A)==224?p+2>=n?h+=u:(m=l[p+i+1],E=l[p+i+2],(49344&(m|E<<8))!=32896?h+=u:(R=(15&A)<<12|(63&m)<<6|63&E,R<2048||R>=55296&&R<=57343?h+=u:(h+=a(R),p+=2))):(248&A)==240?p+3>=n?h+=u:(m=l[p+i+1],E=l[p+i+2],y=l[p+i+3],(12632256&(m|E<<8|y<<16))!=8421504?h+=u:(R=(7&A)<<18|(63&m)<<12|(63&E)<<6|63&y,R<65536||R>1114111?h+=u:(R-=65536,h+=a(55296+(R>>10),56320+(1023&R)),p+=3))):h+=u:h+=a(A)}return h}function Sl(t,n){let i=n.length,a=0;for(let h=0;h<i;h++){let p=n.charCodeAt(h);p>=55296&&p<=56319&&h+1<i&&(p=(p<<10)+n.charCodeAt(++h)-56613888),a+=p<128?1:p<2048?2:p<65536?3:4}Bn(t,a);let l=Tp(t,a),u=t.bytes;for(let h=0;h<i;h++){let p=n.charCodeAt(h);p>=55296&&p<=56319&&h+1<i&&(p=(p<<10)+n.charCodeAt(++h)-56613888),p<128?u[l++]=p:(p<2048?u[l++]=p>>6&31|192:(p<65536?u[l++]=p>>12&15|224:(u[l++]=p>>18&7|240,u[l++]=p>>12&63|128),u[l++]=p>>6&63|128),u[l++]=63&p|128)}}function Zme(t,n){let i=Tp(t,n.limit),a=t.bytes,l=n.bytes;for(let u=0,h=n.limit;u<h;u++)a[u+i]=l[u]}function N$(t){return t.bytes[DA(t,1)]}function P$(t,n){let i=Tp(t,1);t.bytes[i]=n}function LA(t){let n=DA(t,8),i=t.bytes;return ua[0]=i[n++],ua[1]=i[n++],ua[2]=i[n++],ua[3]=i[n++],ua[4]=i[n++],ua[5]=i[n++],ua[6]=i[n++],ua[7]=i[n++],NA[0]}function kA(t,n){let i=Tp(t,8),a=t.bytes;NA[0]=n,a[i++]=ua[0],a[i++]=ua[1],a[i++]=ua[2],a[i++]=ua[3],a[i++]=ua[4],a[i++]=ua[5],a[i++]=ua[6],a[i++]=ua[7]}function yl(t){let n,i=0,a=0;do n=N$(t),i<32&&(a|=(127&n)<<i),i+=7;while(128&n);return a}function Bn(t,n){for(n>>>=0;n>=128;)P$(t,127&n|128),n>>>=7;P$(t,n)}function Qu(t,n){let i=n.low>>>0,a=(n.low>>>28|n.high<<4)>>>0,l=n.high>>>24,u=l===0?a===0?i<16384?i<128?1:2:i<1<<21?3:4:a<16384?a<128?5:6:a<1<<21?7:8:l<128?9:10,h=Tp(t,u),p=t.bytes;switch(u){case 10:p[h+9]=l>>>7&1;case 9:p[h+8]=u!==9?128|l:127&l;case 8:p[h+7]=u!==8?a>>>21|128:a>>>21&127;case 7:p[h+6]=u!==7?a>>>14|128:a>>>14&127;case 6:p[h+5]=u!==6?a>>>7|128:a>>>7&127;case 5:p[h+4]=u!==5?128|a:127&a;case 4:p[h+3]=u!==4?i>>>21|128:i>>>21&127;case 3:p[h+2]=u!==3?i>>>14|128:i>>>14&127;case 2:p[h+1]=u!==2?i>>>7|128:i>>>7&127;case 1:p[h]=u!==1?128|i:127&i}}function D$(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}const e0e=new Map([["moderation",1],["supervise",2]]);class t0e extends Sr{get connectionState(){return this._connectionState}set connectionState(n){if(this._connectionState===n)return;const i=this._connectionState;this._connectionState=n,this.emit(wi.CONNECTION_STATE_CHANGE,i,n)}get inspectType(){return this._inspectType}set inspectType(n){var i;this._inspectMode=pc(i=n.map(a=>e0e.get(a)||0)).call(i,(a,l)=>a+l),this._inspectType=n}get quality(){return this._quality}set quality(n){this._quality=n>1?1:n<.1?.1:n,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(n){super(),G(this,"name","AgoraRTCVideoContentInspect"),G(this,"_connectionState",zs.CONNECTING),G(this,"_innerConnectionState",void 0),G(this,"sequence",0),G(this,"inspectStartTime",void 0),G(this,"workerManagerConnection",void 0),G(this,"workerConnection",void 0),G(this,"workerMessageLengthLimit",void 0),G(this,"inspectIntervalMinimum",void 0),G(this,"qualityRatio",void 0),G(this,"_connectInfo",void 0),G(this,"_cancelTokenSource",zo.CancelToken.source()),G(this,"_retryConfig",void 0),G(this,"wmSequence",0),G(this,"inspectInterval",void 0),G(this,"inspectTimer",null),G(this,"ossFilePrefix",void 0),G(this,"extraInfo",void 0),G(this,"_inspectType",void 0),G(this,"_inspectMode",void 0),G(this,"_quality",1),G(this,"qualityTimer",null),G(this,"_inspectId",void 0),G(this,"_needWorkUrlOnly",!1),G(this,"inspectImage",()=>{if(this.connectionState!==zs.CONNECTED)throw new ye(X.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===zs.CONNECTED?this.requestToInspectImage():k.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=Xn(5,"inspect-"),this.workerMessageLengthLimit=Q("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=Q("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=Q("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=n.interval,this.ossFilePrefix=n.ossFilePrefix,this.extraInfo=n.extraInfo,this.inspectType=n.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new D0("worker-manager-"+this._inspectId,ti),this.on(wi.STATE_CHANGE,(i,a)=>{this._innerConnectionState=i,k.debug("[".concat(this._inspectId,"] Inspect operation :").concat(Ws[i]," ").concat(a||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new D0("worker-"+this._inspectId,ti),this.handleWorkerEvents()}async init(n,i){this.emit(wi.STATE_CHANGE,Ws.CONNECT_AP),this._connectInfo=n;const a=this._cancelTokenSource.token;return this._retryConfig=i,new Ye((l,u)=>{this.on(wi.CONNECTION_STATE_CHANGE,(h,p)=>{p===zs.CONNECTED&&l()}),this.requestAP(n,a,i).then(h=>{this.connectWorkerManager(h)}).catch(h=>{u(h)})})}async requestAP(n,i,a){const l=Q("WEBCS_DOMAIN").map(p=>"https://".concat(p,"/api/v1")),u=await function(p,m,E,y){let{appId:R,areaCode:A,cname:D,sid:H,token:B,uid:$}=m;dp++;const K="image_moderation_api",Y={service_name:K,json_body:JSON.stringify({appId:R,areaCode:A,cname:D,command:"allocateEdge",requestId:dp,seq:dp,sid:H,token:B,ts:Date.now(),uid:$+""})};let ce,ge,Ee=p[0];return yc(async()=>{ce=Date.now();const me=await wc(Ee,{data:Y,cancelToken:E,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(ge=Date.now()-ce,me.code!==0){const nt=new ye(X.UNEXPECTED_RESPONSE,"image inspect ap error, code"+me.code,{retry:!0,responseTime:ge});throw k.error(nt.toString()),nt}const Te=JSON.parse(me.json_body);if(Te.code!==200){const nt=new ye(X.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(Te.code,", reason: ").concat(Te.reason),{code:Te.code,responseTime:ge});throw k.error(nt.toString()),nt}if(!Te.servers||!Array.isArray(Te.servers)||Te.servers.length===0){const nt=new ye(X.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:Te.code,responseTime:ge});throw k.error(nt.toString()),nt}const Me=Q("VIDEO_INSPECT_WORKER_MANAGER_HOST"),Xe=Q("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:Te.servers.map(nt=>{let{address:dn,wss:hn}=nt;if(dn&&hn)return"wss://".concat(dn.replace(/\./g,"-"),".").concat(Me,":").concat(Xe||hn)}).filter(nt=>!!nt),workerToken:Te.workerToken,vid:Te.vid,responseTime:ge}},(me,Te)=>(dt.apworkerEvent(H,{success:!0,sc:200,serviceName:K,responseDetail:JSON.stringify(me.addressList),firstSuccess:Te===0,responseTime:ge,serverIp:p[Te%p.length]}),!1),(me,Te)=>(dt.apworkerEvent(H,{success:!1,sc:me.data&&me.data.code||200,serviceName:K,responseTime:ge,serverIp:p[Te%p.length]}),!!(me.code!==X.OPERATION_ABORTED&&me.code!==X.UNEXPECTED_RESPONSE||me.data&&me.data.retry)&&(Ee=p[(Te+1)%p.length],!0)),y)}(l,n,i,a);this.emit(wi.STATE_CHANGE,Ws.AP_CONNECTED);const{addressList:h}=u;return this.wmSequence++,h}async connectWorkerManager(n){let i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this._needWorkUrlOnly=i,this.emit(wi.STATE_CHANGE,Ws.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(n,1e4)}async connectWorker(n){await this.workerConnection.init([n])}handleWorkerManagerEvents(){this.workerManagerConnection.on(qt.CONNECTED,async()=>{this.emit(wi.STATE_CHANGE,Ws.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.23.2",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on(qt.CLOSED,()=>{this._innerConnectionState<Ws.GET_WORKER_MANAGER_RESPONSE&&k.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on(qt.FAILED,()=>{this._innerConnectionState<Ws.GET_WORKER_MANAGER_RESPONSE&&k.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on(qt.RECONNECTING,()=>{this._innerConnectionState<Ws.GET_WORKER_MANAGER_RESPONSE&&k.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on(qt.ON_MESSAGE,async n=>{this.emit(wi.STATE_CHANGE,Ws.GET_WORKER_MANAGER_RESPONSE);const i=this.workerManagerConnection.url;this.workerManagerConnection.close();const a=JSON.parse(n.data);if(a.code!==200)throw k.error("[".concat(this._inspectId,"] Unexpected code ").concat(a.code," from worker manager")),new ye(X.UNEXPECTED_RESPONSE,"response code of worker is unexpected",a);if(!(a.serverResponse&&a.serverResponse.portWss&&i))throw k.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(a))),new ye(X.UNEXPECTED_RESPONSE,"response content of worker is unexpected",a);{const l=Q("VIDEO_INSPECT_WORKER_PORT")||a.serverResponse.portWss,u=i.replace(/:\d+\/?$/,":".concat(l));this.emit(wi.STATE_CHANGE,Ws.CONNECT_WORKER,u),this._needWorkUrlOnly?this.emit(wi.REQUEST_NEW_WORKER_URL,u):await this.connectWorker(u)}}),this.workerManagerConnection.on(qt.WILL_RECONNECT,(n,i,a)=>{a(n)}),this.workerManagerConnection.on(qt.REQUEST_NEW_URLS,(n,i)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(n).catch(i)})}handleWorkerEvents(){this.workerConnection.on(qt.CONNECTED,async()=>{this.emit(wi.STATE_CHANGE,Ws.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=zs.CONNECTED}),this.workerConnection.on(qt.ON_MESSAGE,async n=>{if(n.data instanceof ArrayBuffer){const a=Kme(new Uint8Array(n.data));if(Q("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&k.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(a)),a.code===200){if(Array.isArray(this.inspectType)&&this.inspectType.length===1&&this.inspectType[0]==="supervise")return void this.emit(wi.INSPECT_RESULT,void 0,void 0);if(a.data&&a.data.scorePorn&&a.data.scoreSexy&&a.data.scoreNeutral){var i;const l={porn:a.data.scorePorn,sexy:a.data.scoreSexy,neutral:a.data.scoreNeutral},u=pc(i=Object.keys(l)).call(i,(p,m)=>l[p]>l[m]?p:m,"porn"),h=Object.keys(l).find(p=>p===u);this.emit(wi.INSPECT_RESULT,h)}else this.emit(wi.INSPECT_RESULT,void 0,new ye(X.UNEXPECTED_RESPONSE,a.code+"","There is an unexpected data on message"))}else this.emit(wi.INSPECT_RESULT,void 0,new ye(X.UNEXPECTED_RESPONSE,a.code+"",a.msg))}else k.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(wi.INSPECT_RESULT,void 0,new ye(X.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on(qt.CLOSED,()=>{this.connectionState=zs.CLOSED}),this.workerConnection.on(qt.FAILED,()=>{this.connectionState=zs.CLOSED}),this.workerConnection.on(qt.RECONNECTING,()=>{this.connectionState=this.connectionState===zs.CONNECTED?zs.RECONNECTING:zs.CONNECTING}),this.workerConnection.on(qt.WILL_RECONNECT,(n,i,a)=>{n==="recover"&&a(n),a("tryNext")}),this.workerConnection.on(qt.REQUEST_NEW_URLS,(n,i)=>{this.workerManagerConnection.close(),this.once(wi.REQUEST_NEW_WORKER_URL,a=>{n([a])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(a=>{this.connectWorkerManager(a,!0)}).catch(a=>{i(a)})})}async requestToInspectImage(){this.sequence++;const n=Ua(this,wi.CLIENT_LOCAL_VIDEO_TRACK),i={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(n){if(!n.isPlaying)return void this.emit(wi.INSPECT_RESULT,void 0,new ye(X.INVALID_OPERATION,"Only the track being played can be inspected"));const a=await this.generateRequestData(n,i);this.workerConnection.sendMessage(a,!0,!0)}else this.emit(wi.INSPECT_RESULT,void 0,new ye(X.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(n,i){let{appId:a,cname:l,cid:u,vid:h,sid:p,uid:m}=i;const E=Date.now(),y=await n.getCurrentFrameImage("image/jpeg",this.quality),R=await hV(y,a,l),A=this.sequence+"-"+u+"-"+m+"-"+E+"-"+Xn(12,""),D={appId:a,cid:u,cname:l,deviceId:"",elapse:(H=Number(E-this.inspectStartTime),{low:H|=0,high:H>>31,unsigned:H>=0}),fileSize:R.byteLength,jpgEncryption:2,height:y.height,width:y.width,jpg:R,networkType:6,osType:7,requestId:A,sdkVersion:"4.23.2",sequence:this.sequence,sid:p,timestamp:j8(E),uid:m,vid:h,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};var H;this.extraInfo===void 0&&delete D.callbackData,this.ossFilePrefix===void 0&&delete D.ossFilePrefix;const B=Gme(D);if(B.byteLength<this.workerMessageLengthLimit){if(Q("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const $=function(K){for(var Y=1;Y<arguments.length;Y++){var ce=arguments[Y]!=null?arguments[Y]:{};Y%2?D$(Object(ce),!0).forEach(function(ge){G(K,ge,ce[ge])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(ce)):D$(Object(ce)).forEach(function(ge){Object.defineProperty(K,ge,Object.getOwnPropertyDescriptor(ce,ge))})}return K}({},D);delete $.jpg,k.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify($))}return B}{const $=this.quality*this.qualityRatio;return this.quality=$,await this.generateRequestData(n,{appId:a,cname:l,cid:u,vid:h,sid:p,uid:m})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=zo.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=zs.CLOSED,this.emit(wi.STATE_CHANGE,Ws.CLOSED)}}const n0e={name:"ContentInspect",create:function(t){let{config:n}=t;return function(i){if(!i)throw new ye(X.INVALID_PARAMS,"inspectConfig is necessary.");if(!i.inspectType||!Array.isArray(i.inspectType))throw new ye(X.INVALID_PARAMS,"inspectConfig.inspectType is necessary and is an instance of Array.");{const a=[...new Set(i.inspectType)];a.forEach(l=>{var u;if(!Ke(u=["supervise","moderation"]).call(u,l))throw new ye(X.INVALID_PARAMS,"".concat(l," is not a valid inspect type."))}),i.inspectType=a}if(i&&i.extraInfo&&i.extraInfo.length>1024)throw new ye(X.INVALID_PARAMS,"inspectConfig.extraInfo length cannot exceed 1024 bytes")}(n),new t0e(n)}};var L$=c(ot.Object.getOwnPropertySymbols),r0e=$n,i0e=zT.indexOf,o0e=fE,MA=W([].indexOf),k$=!!MA&&1/MA([1],1,-0)<0;r0e({target:"Array",proto:!0,forced:k$||!o0e("indexOf")},{indexOf:function(t){var n=arguments.length>1?arguments[1]:void 0;return k$?MA(this,t,n)||0:i0e(this,t,n)}});var a0e=Ds("Array").indexOf,s0e=T,c0e=a0e,FA=Array.prototype,l0e=function(t){var n=t.indexOf;return t===FA||s0e(FA,t)&&n===FA.indexOf?c0e:n},M$=c(l0e);function u0e(t,n){if(t==null)return{};var i,a,l=function(h,p){if(h==null)return{};var m,E,y={},R=e6(h);for(E=0;E<R.length;E++)m=R[E],M$(p).call(p,m)>=0||(y[m]=h[m]);return y}(t,n);if(L$){var u=L$(t);for(a=0;a<u.length;a++)i=u[a],M$(n).call(n,i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(l[i]=t[i])}return l}let F$=class{get localCapabilities(){return Ir(this._localCapabilities)}get rtpCapabilities(){return Ir(this._rtpCapabilities)}get candidates(){return Ir(this._candidates)}get iceParameters(){return Ir(this._iceParameters)}get dtlsParameters(){return Ir(this._dtlsParameters)}constructor(t){G(this,"sessionDesc",void 0),G(this,"_localCapabilities",void 0),G(this,"_rtpCapabilities",void 0),G(this,"_candidates",void 0),G(this,"_iceParameters",void 0),G(this,"_dtlsParameters",void 0),G(this,"setup",void 0),G(this,"currentMidIndex",void 0),G(this,"cname","o/i14u9pJrxRKAsu"),G(this,"firefoxSsrcMidMap",new Map),t=Ir(t);const{remoteIceParameters:n,remoteDtlsParameters:i,candidates:a,remoteRTPCapabilities:l,localCapabilities:u,direction:h,setup:p,videoCodec:m,audioCodec:E}=t;let y;this.setup=p,y=h===No.RECEIVE_ONLY?sa(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`):sa(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`),this._rtpCapabilities=l,this._candidates=a,this._iceParameters=n,this._dtlsParameters=i,this._localCapabilities=u;const R=h===No.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,A=h===No.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,D=h===No.RECEIVE_ONLY?l.send.videoCodecs:M0(it.VIDEO,R,A,m),H=h===No.RECEIVE_ONLY?l.send.audioCodecs:M0(it.AUDIO,R,A,E);for(const B of y.mediaDescriptions)B.attributes.iceUfrag=n.iceUfrag,B.attributes.icePwd=n.icePwd,B.attributes.fingerprints=i.fingerprints,B.attributes.candidates=a,B.attributes.setup=this.setup,B.media.mediaType==="application"&&(B.attributes.sctpPort="5000"),B.media.mediaType==="video"&&(B.media.fmts=D.map($=>$.payloadType.toString(10)),B.attributes.payloads=D,B.attributes.extmaps=R.videoExtensions),B.media.mediaType==="audio"&&(B.media.fmts=H.map($=>$.payloadType.toString(10)),B.attributes.payloads=H,B.attributes.extmaps=R.audioExtensions,up(B));this.sessionDesc=y,this.currentMidIndex=y.mediaDescriptions.length-1}toString(){return Fu(this.sessionDesc)}hasMid(t){return Array.isArray(t)?t.every(n=>this.hasMid(n)):this.sessionDesc.mediaDescriptions.some(n=>n.attributes.mid===t)}send(t,n,i,a,l){i=i.replace(/ /g,"-");const{ssrcs:u,ssrcGroups:h}=oh(n,this.cname,Q("SYNC_GROUP")?i:void 0),p=this.findPreloadMediaDesc(u);if(p){if(Tr()&&this.firefoxSsrcMidMap.set(u[0].ssrcId,p.attributes.mid),l&&(l.twcc||l.remb)){const m=this.sessionDesc.mediaDescriptions.indexOf(p);return this.sessionDesc.mediaDescriptions[m]=this.mungSendMediaDesc(p,l),{mid:p.attributes.mid,needExchangeSDP:!0}}return{mid:p.attributes.mid,needExchangeSDP:!1}}{const m=this.findAvailableMediaIndex(t,u,a);let E;return m===-1?(E=this.createOrRecycleSendMedia(t,u,h,"sendonly",a,l),this.updateBundleMids()):(E=Ir(this.sessionDesc.mediaDescriptions[m]),E.attributes.direction="sendonly",E.attributes.ssrcs=u,E.attributes.ssrcGroups=h,this.sessionDesc.mediaDescriptions[m]=this.mungSendMediaDesc(E,l)),Tr()&&this.firefoxSsrcMidMap.set(u[0].ssrcId,E.attributes.mid),{needExchangeSDP:!0,mid:E.attributes.mid}}}stopSending(t){const n=this.sessionDesc.mediaDescriptions.filter(i=>i.attributes.mid&&t.indexOf(i.attributes.mid)!==-1);if(n.length!==t.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");n.forEach(i=>{i.attributes.ssrcs=[]}),this.updateBundleMids()}receive(t,n,i){const a=[];return t.forEach(l=>{const u=l._mediaStreamTrack.kind,h=this.findAvailableRecvMediaIndex(u);let p,m=!1;h===-1?(m=!0,p=this.createOrRecycleRecvMedia(l,[],"recvonly",n,i),this.updateBundleMids()):(p=Ir(this.sessionDesc.mediaDescriptions[h]),p.attributes.direction="recvonly"),a.push({mid:p.attributes.mid,needCreateTransceiver:m})}),a}stopReceiving(t){const n=this.sessionDesc.mediaDescriptions.filter(i=>t.indexOf(i.attributes.mid)!==-1);if(n.length!==t.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");n.forEach(i=>{i.media.port="0",i.attributes.direction="inactive"}),this.updateBundleMids()}addRemoteCandidate(t){const{foundation:n,protocol:i,address:a,port:l,type:u,relatedAddress:h,relatedPort:p,priority:m}=new RTCIceCandidate(t),E={foundation:n??"",componentId:"1",transport:i??"",priority:m?m+"":"",connectionAddress:a??"",port:l?l+"":"",type:u?u+"":"",relAddr:h??"",relPort:p?p+"":"",extension:{}};this.candidates.some(y=>y.priority===E.priority&&y.connectionAddress===E.connectionAddress&&y.port===E.port)||(this._candidates.push(E),this.sessionDesc.mediaDescriptions.forEach(y=>{y.attributes.candidates=this.candidates}))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(t,n,i,a,l){const u=t._mediaStreamTrack.kind,h=this.rtpCapabilities.recv,p=M0(u,h,this.localCapabilities.send,u===it.AUDIO?l:a),m=u===it.VIDEO?h.videoExtensions:h.audioExtensions,E="".concat(++this.currentMidIndex);let y={media:{mediaType:u,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:p.map(A=>A.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:m,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:n,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:p,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:i,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(E)}};y=this.mungRecvMediaDsec(y,t);const R=this.findFirstClosedMedia(u);if(R){const A=this.sessionDesc.mediaDescriptions.indexOf(R);this.sessionDesc.mediaDescriptions[A]=y}else this.sessionDesc.mediaDescriptions.push(y);return y}muteRemote(t){const n=this.sessionDesc.mediaDescriptions.filter(i=>Ke(t).call(t,i.attributes.mid||""));if(n.length!==t.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");n.forEach(i=>{i.attributes.direction="inactive"})}unmuteRemote(t){const n=this.sessionDesc.mediaDescriptions.filter(i=>Ke(t).call(t,i.attributes.mid||""));if(n.length!==t.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");n.forEach(i=>{i.attributes.direction="recvonly"})}findAvailableMediaIndex(t,n,i){return this.sessionDesc.mediaDescriptions.findIndex(a=>{const l=a.media.mediaType===t&&a.media.port!=="0"&&(a.attributes.direction==="sendonly"||a.attributes.direction==="sendrecv")&&a.attributes.ssrcs.length===0;if(Tr()){if(l){const u=this.firefoxSsrcMidMap.get(n[0].ssrcId);return!(u||a.attributes.mid!=="0"&&a.attributes.mid!=="1")||!(!u||u!==a.attributes.mid)}return!1}return l&&a.attributes.mid===i})}findAvailableRecvMediaIndex(t){return this.sessionDesc.mediaDescriptions.findIndex(n=>{const i=n.media.mediaType===t&&n.media.port!=="0"&&(n.attributes.direction==="recvonly"||n.attributes.direction==="sendrecv");return n.attributes.mid!=="0"&&n.attributes.mid!=="1"&&i})}predictReceivingMids(t){const n=[];for(let i=0;i<t;i++)n.push((this.currentMidIndex+i+1).toString(10));return n}restartICE(t){t=Ir(t),this._iceParameters=t,this.sessionDesc.mediaDescriptions.forEach(n=>{n.attributes.iceUfrag=t.iceUfrag,n.attributes.icePwd=t.icePwd})}createOrRecycleSendMedia(t,n,i,a,l,u){const h=this.rtpCapabilities.send,p=t===it.VIDEO?h.videoCodecs:h.audioCodecs,m=t===it.VIDEO?h.videoExtensions:h.audioExtensions;Tr()&&(l="".concat(++this.currentMidIndex));let E={media:{mediaType:t,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:p.map(R=>R.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:m,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:n,ssrcGroups:i,rtcpFeedbackWildcards:[],payloads:p,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:a,rtcpMux:!0,rtcpRsize:!0,mid:l}};E=this.mungSendMediaDesc(E,u);const y=this.findFirstClosedMedia(t);if(y){const R=this.sessionDesc.mediaDescriptions.indexOf(y);this.sessionDesc.mediaDescriptions[R]=E}else this.sessionDesc.mediaDescriptions.push(E);return E}mungRecvMediaDsec(t,n,i){const a=Ir(t);return kI(a),lp(a,n),MI(a,n),R6(a),pS(a,i,this.localCapabilities.send),a}mungSendMediaDesc(t,n){const i=Ir(t);return pS(i,n,this.localCapabilities.recv),up(i),i}updateRecvMedia(t,n){const i=this.sessionDesc.mediaDescriptions.findIndex(a=>a.attributes.mid===t);if(i!==-1){const a=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i],n);this.sessionDesc.mediaDescriptions[i]=a}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(t=>t.media.port!=="0").map(t=>t.attributes.mid)}findPreloadMediaDesc(t){return this.sessionDesc.mediaDescriptions.find(n=>{var i;return((i=n.attributes)===null||i===void 0||(i=i.ssrcs[0])===null||i===void 0?void 0:i.ssrcId)===t[0].ssrcId})}findFirstClosedMedia(t){return this.sessionDesc.mediaDescriptions.find(n=>Tr()?n.media.port==="0"&&n.media.mediaType===t:n.media.port==="0")}};const d0e=["sdp"];var rr;function U$(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function Zu(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?U$(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):U$(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}let B$=(rr=class Lp extends a6{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var n,i;return(n=(i=this.peerConnection.getReceivers()[0])===null||i===void 0||(i=i.transport)===null||i===void 0?void 0:i.state)!==null&&n!==void 0?n:null}get localCodecs(){return[]}set isInRestartIce(n){this._isInRestartIce=n}get isInRestartIce(){return this._isInRestartIce}constructor(n,i,a){super(n,i),G(this,"direction",void 0),G(this,"name",void 0),G(this,"store",void 0),G(this,"spec",void 0),G(this,"peerConnection",void 0),G(this,"initialOffer",void 0),G(this,"transport",void 0),G(this,"statsFilter",void 0),G(this,"localCandidateCount",0),G(this,"_isInRestartIce",!1),G(this,"mutex",void 0),G(this,"onLocalCandidate",void 0),G(this,"remoteSDP",void 0),G(this,"pendingCandidates",[]),G(this,"localCapabilities",void 0),G(this,"isReady",!1),G(this,"restartCnt",0),G(this,"curTurnServerIndex",0),this.store=i,this.spec=n,this.mutex=new Ji("P2PConnection-mutex",i.clientId),this.peerConnection=new RTCPeerConnection(Lp.resolvePCConfiguration(n,i.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=a??No.SEND_ONLY,this.name=this.direction===No.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=Yw(this.peerConnection,Q("STATS_UPDATE_INTERVAL"),void 0,Tr()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(n){try{const i=await I6();if(this.localCapabilities=mS(i),n){const{sdp:a}=n,l=u0e(n,d0e),u=function(){const y={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},R=k0(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"sendonly"),A={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},D={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},H={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Gs(R,y,"videoExtensions",A,D,H),Gs(R,y,"videoCodecs",A,D,H),Gs(R,y,"audioExtensions",A,D,H),Gs(R,y,"audioCodecs",A,D,H),Q("RAISE_H264_BASELINE_PRIORITY")){const B=H.videoCodecs.findIndex($=>$.rtpMap&&$.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&$.fmtp&&$.fmtp.parameters["profile-level-id"]==="42001f");if(B!==-1){const $=H.videoCodecs.findIndex(K=>K.rtpMap&&K.rtpMap.encodingName.toLocaleLowerCase()==="h264");if($<B){k.debug("raising H264 baseline profile priority");const K=H.videoCodecs[B];H.videoCodecs.splice(B,1),H.videoCodecs.splice($,0,K)}$!==-1&&Q("FILTER_SEND_H264_BASELINE")&&(A.videoCodecs=A.videoCodecs.filter(K=>!(K.rtpMap&&K.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&K.fmtp&&K.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:A,recv:D,sendrecv:H}}({},{},a);this.remoteSDP=new F$({remoteIceParameters:l.iceParameters,remoteDtlsParameters:l.dtlsParameters,candidates:[],remoteRTPCapabilities:u,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;const h=await this.peerConnection.createAnswer();if(!h.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");const p=$u(h.sdp);await this.peerConnection.setLocalDescription(h);const m=await A6({},{},h.sdp);this.localCapabilities=mS(m);const E=this.peerConnection.getTransceivers()[0];return E!=null&&E.receiver&&E.receiver.transport&&this.tryBindTransportEvents(E.receiver.transport),Zu(Zu({},p),{},{sdp:h.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});const a=await this.peerConnection.createOffer();if(!a.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const l=$u(a.sdp);return this.initialOffer=a,Zu(Zu({},l),{},{sdp:a.sdp})}}catch(i){throw new we(X.GET_LOCAL_CONNECTION_PARAMS_FAILED,i.toString())}}async connect(n){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);const{sdp:i,iceParameters:a,dtlsParameters:l}=n,u=await A6({},{},i);this.remoteSDP=new F$({remoteIceParameters:a,remoteDtlsParameters:l,candidates:[],remoteRTPCapabilities:u,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});const h=this.peerConnection.getTransceivers()[0];h!=null&&h.sender&&h.sender.transport&&this.tryBindTransportEvents(h.sender.transport)}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(i.toString()))}}async addRemoteCandidate(n){try{n&&this.pendingCandidates.push(n),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach(i=>{this.peerConnection.addIceCandidate(i)}),this.pendingCandidates=[])}catch(i){throw new we(X.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(i.toString()))}}send(n,i,a){var l=this;return as(function*(){const u=yield vn(l.mutex.lock("From P2PConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const h=[],p=l.remoteSDP.receive(n,i,a);n.forEach(($,K)=>{if(p[K].needCreateTransceiver){const Y=l.peerConnection.addTransceiver($._mediaStreamTrack,{direction:"sendonly"});h.push(Y),$._updateRtpTransceiver(Y)}else{const Y=l.peerConnection.getTransceivers().find(ce=>ce.mid===p[K].mid);if(!Y)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(p[K].mid));h.push(Y),$._updateRtpTransceiver(Y)}}),Tr()&&Q("SIMULCAST")===!0&&(yield vn(l.applySimulcastForFirefox(h,n)));const m=p.map($=>$.mid),E=yield vn(l.peerConnection.createOffer()),y=l.mungSendOfferSDP(E.sdp,n,m),R=sa(y),A=m.map($=>{const K=R.mediaDescriptions.find(Y=>Y.attributes.mid===$);if(!K)throw new Error("Cannot extract ssrc from mediaDescription.");return C6(K,Q("USE_PUB_RTX"))}),D=h.map(($,K)=>{const Y=m[K];return{localSSRC:A[K],id:Y}});yield vn(l.peerConnection.setLocalDescription({type:"offer",sdp:y}));try{yield D}catch($){const K=l.remoteSDP.toString();throw yield vn(l.peerConnection.setLocalDescription({type:"offer",sdp:y})),yield vn(l.peerConnection.setRemoteDescription({type:"answer",sdp:K})),yield vn(l.stopSending(m,!0)),$}yield vn(l.applySimulcastEncodings(h,n)),yield vn(l.applySendEncodings(h,n));const H=l.remoteSDP.toString(),B=l.logSDPExchange(y,"offer","local","send");return B==null||B(H),yield vn(l.setRemoteDescription({type:"answer",sdp:H})),h.map(($,K)=>{const Y=m[K];return{localSSRC:A[K],id:Y}})}catch(h){throw h instanceof we?h:new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(h.toString()))}finally{u()}})()}async stopSending(n,i){const a=i?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(m=>n.indexOf(m.mid)!==-1);if(l.length!==n.length)throw new Error("Transceivers' length (".concat(l.length,") doesn't match mids' length (").concat(n.length,") when trying to call P2PConnection.stopSending."));l.map(m=>{var E;m.direction="inactive",(E=m.stop)===null||E===void 0||E.call(m)});const u=await this.peerConnection.createOffer(),h=this.logSDPExchange(u.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(u),this.remoteSDP.stopReceiving(n);const p=this.remoteSDP.toString();h==null||h(p),await this.setRemoteDescription({type:"answer",sdp:p})}catch(l){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(l.toString()))}finally{a&&a()}}async receive(n,i,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{mid:u,needExchangeSDP:h}=this.remoteSDP.send(n,i,a,l);if(h){const m=this.remoteSDP.toString(),E=this.logSDPExchange(m,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:m});const y=await this.peerConnection.createAnswer(),R=this.mungReceiveAnswerSDP(y.sdp,u,n);E==null||E(R||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:R}),k.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," by exchanging SDP."))}else k.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," no need to exchange SDP."));const p=this.peerConnection.getTransceivers().find(m=>m.mid===u);if(!p||p.mid===null)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:p.receiver.track,mid:p.mid,transceiver:p}}catch(u){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(u.toString()))}}async mockReceive(n,i,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{mid:u,needExchangeSDP:h}=this.remoteSDP.send(n,i,a,l);if(h){const p=this.remoteSDP.toString(),m=this.logSDPExchange(p,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:p});const E=await this.peerConnection.createAnswer(),y=this.mungReceiveAnswerSDP(E.sdp,u,n);m==null||m(y||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:y}),k.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," by exchanging SDP."))}else k.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(n," no need to exchange SDP."))}catch(u){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(u.toString()))}}async stopReceiving(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(n);const i=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();a==null||a(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}async restartICE(n){try{if(this.store.p2pTransport===Jd.Auto&&(this.store.p2pTransport=Jd.SdRtn,yn().supportPCSetConfiguration&&this.peerConnection.setConfiguration(Lp.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,yn().supportPCSetConfiguration&&this.peerConnection.setConfiguration(Lp.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!n){this.restartCnt++,this.isReady=!1;const i=await this.peerConnection.createOffer({iceRestart:!0});if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const{iceParameters:a}=$u(i.sdp);return this.store.descriptionStart(),this.direction===No.SEND_ONLY&&await this.peerConnection.setLocalDescription(i),a}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(n),this.store.descriptionStart(),this.direction===No.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});const i=await this.peerConnection.createAnswer();if(!i.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");const{iceParameters:a}=$u(i.sdp);return await this.peerConnection.setLocalDescription(i),a}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}close(){var n;this.peerConnection.close(),this.peerConnection.onicecandidate=null,(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(n){return this.statsFilter.getVideoIsReady(n)}async updateEncoderConfig(n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const a=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(a.sdp,[i],[n]);this.remoteSDP.updateRecvMedia(n,i);const u=this.remoteSDP.toString(),h=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),h==null||h(u),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(a){throw new we(X.EXCHANGE_SDP_FAILED,a.toString())}}async updateSendParameters(n,i){const a=this.peerConnection.getTransceivers().filter(l=>l.mid===n);a.length===1&&(this.isVP8Simulcast(i)?Tr()||await this.applySimulcastEncodings(a,[i]):await this.applySendEncodings(a,[i]))}setStatsRemoteVideoIsReady(n,i){this.statsFilter.setVideoIsReady2(n,i)}async replaceTrack(n,i){const a=this.peerConnection.getTransceivers().find(l=>l.mid===i);a&&await a.sender.replaceTrack(n._mediaStreamTrack)}async getSelectedCandidatePair(){const n=this.peerConnection.getReceivers();if(n.length>0&&n[0].transport&&n[0].transport.iceTransport&&n[0].transport.iceTransport.getSelectedCandidatePair&&n[0].transport.iceTransport.getSelectedCandidatePair()){const i=n[0].transport.iceTransport,{local:a,remote:l}=i.getSelectedCandidatePair();return{local:Zu(Zu({},al),{},{candidateType:a.type,protocol:a.protocol,address:a.address,port:a.port}),remote:Zu(Zu({},al),{},{candidateType:l.type,protocol:l.protocol,address:l.address,port:l.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var n,i;Ke(n=["connected","completed"]).call(n,this.peerConnection.iceConnectionState)&&(this.isReady=!1),(i=this.onICEConnectionStateChange)===null||i===void 0||i.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var n;this.peerConnection.connectionState==="connected"&&(this.restartCnt=0),(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=n=>{if(n.candidate){var i;n.candidate.candidate&&((i=this.onLocalCandidate)===null||i===void 0||i.call(this,n.candidate.toJSON())),this.localCandidateCount+=1}else k.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount)})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(n,i){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const l={iceServers:[]};var u;return n.iceServers?l.iceServers=n.iceServers:n.turnServer&&n.turnServer.mode!=="off"&&(C0(n.turnServer.servers)?l.iceServers=n.turnServer.servers:(l.iceServers&&l.iceServers.push(...Lp.turnServerConfigToIceServers(n.turnServer.servers,i,a)),Q("USE_TURN_SERVER_OF_GATEWAY")&&l.iceServers&&n.turnServer.serversFromGateway&&l.iceServers.push(...Lp.turnServerConfigToIceServers(n.turnServer.serversFromGateway,i,a)),Ke(u=[Jd.Relay,Jd.SdRtn]).call(u,i)&&(l.iceTransportPolicy="relay"),Q("FORCE_TURN_TCP")?l.iceTransportPolicy="relay":n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(h=>{h.forceturn&&(l.iceTransportPolicy="relay")}))),Q("ENABLE_ENCODED_TRANSFORM")&&yn().supportWebRTCEncodedTransform&&(l.encodedInsertableStreams=!0),k.debug("P2PConnection p2pTransport is ".concat(i)),l}static turnServerConfigToIceServers(n,i){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const l=[],u=n.filter(p=>p.tcpport);k.debug("P2PConnection turnServers is ".concat(u,", current index is ").concat(a));const h=u.length>a?u[a]:u[0];switch(i){case Jd.SdRtn:const p=n.filter(E=>{var y;return Ke(y=E.username).call(y,"glb:")&&E.turnServerURL==E.turnServerURL}),m=p.length>a?p[a]:p[0];m&&(l.push({username:m.username,credential:m.password,credentialType:"password",urls:"turn:".concat(Vu(m.turnServerURL),":").concat(m.tcpport,"?transport=udp")}),l.push({username:m.username,credential:m.password,credentialType:"password",urls:"turns:".concat(Vu(m.turnServerURL),":").concat(m.tcpport,"?transport=tcp")}));break;case Jd.Relay:h&&(l.push({username:h.username,credential:h.password,credentialType:"password",urls:"turn:".concat(h.turnServerURL,":").concat(h.tcpport,"?transport=udp")}),l.push({username:h.username,credential:h.password,credentialType:"password",urls:"turns:".concat(Vu(h.turnServerURL),":").concat(h.tcpport,"?transport=tcp")}));break;default:h&&(l.push({username:h.username,credential:h.password,credentialType:"password",urls:"turn:".concat(h.turnServerURL,":").concat(h.tcpport,"?transport=udp")}),l.push({username:h.username,credential:h.password,credentialType:"password",urls:"turns:".concat(Vu(h.turnServerURL),":").concat(h.tcpport,"?transport=tcp")}),l.push({username:h.username,credential:h.password,credentialType:"password",urls:"stun:".concat(h.turnServerURL,":").concat(h.tcpport)}))}return l}tryBindTransportEvents(n){if(n){this.transport=n,n.onstatechange=()=>{var a;n!=null&&n.state&&((a=this.onDTLSTransportStateChange)===null||a===void 0||a.call(this,n.state))},n.onerror=a=>{var l;(l=this.onDTLSTransportError)===null||l===void 0||l.call(this,"error"in a?a.error:a)};const i=n.iceTransport;i&&(i.onstatechange=()=>{const a=n==null?void 0:n.iceTransport.state;var l;a&&((l=this.onICETransportStateChange)===null||l===void 0||l.call(this,a))},i.getSelectedCandidatePair&&(i.onselectedcandidatepairchange=()=>{if(i.getSelectedCandidatePair()){const{local:a,remote:l}=i.getSelectedCandidatePair();k.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:a.type,protocol:a.protocol}),", remote ").concat(JSON.stringify({candidateType:l.type,protocol:l.protocol,address:l.address,port:l.port})," )"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(n,i){var a;if(i||(i=this.peerConnection.getSenders().find(y=>y.track===n._mediaStreamTrack)),!i)return k.warn("[".concat(n.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(n))return k.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!yn().supportSetRtpSenderParameters)return k.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const l={},u={};switch(n._optimizationMode){case"motion":l.degradationPreference="maintain-framerate";break;case"detail":l.degradationPreference="maintain-resolution";break;default:l.degradationPreference="balanced"}if(n._encoderConfig){var h;const{bitrateMax:y,frameRate:R,scaleResolutionDownBy:A}=n._encoderConfig;y&&(u.maxBitrate=1e3*y),Ke(h=n._hints).call(h,Jn.LOW_STREAM)&&(R&&(u.maxFramerate=Ra(R)),A&&A>=1&&(u.scaleResolutionDownBy=A))}if(Q("DSCP_TYPE")&&Hl()){var p;const y=Q("DSCP_TYPE");Ke(p=["very-low","low","medium","high"]).call(p,y)&&(u.networkPriority=y)}const m=i.getParameters(),E=(a=m.encodings)===null||a===void 0?void 0:a[0];Tr()&&!E&&(l.encodings=[u]),E&&Object.assign(E,u),Object.assign(m,l),k.debug("[".concat(n.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(m.encodings))),await i.setParameters(m)}async applySendEncodings(n,i){try{if(!yn().supportSetRtpSenderParameters||n.length!==i.length)return;for(let a=0;a<n.length;a++){const l=n[a],u=i[a];u instanceof sr&&!this.isVP8Simulcast(u)&&await this.updateRtpSenderEncodings(u,l.sender)}}catch{k.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(n,i,a){const l=sa(n);return i.forEach((u,h)=>{const p=a[h],m=l.mediaDescriptions.find(E=>E.attributes.mid===p);m&&(lp(m,u),w6(m,u,this.store.codec))}),Fu(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=n=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoReceived=n=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstAudioDecoded=n=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoDecoded=(n,i,a)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,n,i,a)},this.statsFilter.onSelectedLocalCandidateChanged=(n,i)=>{var a;(a=this.onSelectedLocalCandidateChanged)===null||a===void 0||a.call(this,n,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(n,i)=>{var a;(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0||a.call(this,n,i)},this.statsFilter.onFirstVideoDecodedTimeout=n=>{var i;(i=this.onFirstVideoDecodedTimeout)===null||i===void 0||i.call(this,n)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(n,i){if(n.length===i.length)for(let m=0;m<n.length;m++){var a,l,u,h,p;const E=n[m],y=i[m];if(y instanceof sr&&!Ke(a=y._hints).call(a,Jn.LOW_STREAM)&&(l=y._encoderConfig)!==null&&l!==void 0&&l.bitrateMax&&((u=y._encoderConfig)===null||u===void 0?void 0:u.bitrateMax)>200&&(h=y._scalabilityMode)!==null&&h!==void 0&&h.numSpatialLayers&&((p=y._scalabilityMode)===null||p===void 0?void 0:p.numSpatialLayers)>1&&this.store.codec==="vp8"){const R={},A={high:1e3*(y._encoderConfig.bitrateMax-50),medium:5e4};R.encodings=[{rid:"m",active:!0,maxBitrate:A.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:A.high}];const D=E.sender.getParameters();await E.sender.setParameters(Object.assign(D,R))}}}async applySimulcastEncodings(n,i){if(!Tr()&&n.length===i.length)for(let a=0;a<n.length;a++){const l=i[a];if(l instanceof sr&&this.isVP8Simulcast(l)){const u=n[a],h={},p={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};h.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:p.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:p.medium,scaleResolutionDownBy:4}];const m=u.sender.getParameters();await u.sender.setParameters(Object.assign(m,h))}}}isVP8Simulcast(n){var i,a,l,u,h;return!!(n instanceof sr&&Q("SIMULCAST")&&this.store.codec==="vp8"&&!Ke(i=n._hints).call(i,Jn.LOW_STREAM)&&(a=n._encoderConfig)!==null&&a!==void 0&&a.bitrateMax&&((l=n._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(u=n._scalabilityMode)!==null&&u!==void 0&&u.numSpatialLayers&&((h=n._scalabilityMode)===null||h===void 0?void 0:h.numSpatialLayers)>1)}logSDPExchange(n,i,a,l){if(Q("SDP_LOGGING"))return k.upload("[".concat(this.store.clientId,"] exchanging ").concat(a," ").concat(i," SDP during P2PConnection.").concat(l,`
`),n),i==="offer"?u=>{this.logSDPExchange(u,"answer",a==="local"?"remote":"local",l)}:void 0}async muteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(i.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(h=>{h.direction="inactive"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.muteRemote(n);const u=this.remoteSDP.toString();l==null||l(u),await this.setRemoteDescription({type:"answer",sdp:u})}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(h=>h.mid&&n.indexOf(h.mid)!==-1);if(i.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(async h=>{h.direction="sendonly"});const a=await this.peerConnection.createOffer(),l=this.logSDPExchange(a.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(a),this.remoteSDP.unmuteRemote(n);const u=this.remoteSDP.toString();l==null||l(u),await this.setRemoteDescription({type:"answer",sdp:u})}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(i.toString()))}}async getRemoteSSRC(n,i){var a,l;if(i=(a=i)!==null&&a!==void 0?a:(l=this.currentRemoteDescription)===null||l===void 0?void 0:l.sdp){var u;const h=(u=sa(i).mediaDescriptions.find(p=>p.attributes.mid===n))===null||u===void 0?void 0:u.attributes.ssrcs;return h==null?void 0:h[0].ssrcId}}async setRemoteDescription(n){var i;await this.peerConnection.setRemoteDescription(n),Ke(i=["connected","completed"]).call(i,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(n,i,a){const l=sa(n),u=l.mediaDescriptions.find(h=>h.attributes.mid===i);return u&&a===it.AUDIO&&u.media.mediaType==="audio"&&up(u),Fu(l)}},st(rr.prototype,"establish",[Js],Object.getOwnPropertyDescriptor(rr.prototype,"establish"),rr.prototype),st(rr.prototype,"connect",[Js],Object.getOwnPropertyDescriptor(rr.prototype,"connect"),rr.prototype),st(rr.prototype,"receive",[Js],Object.getOwnPropertyDescriptor(rr.prototype,"receive"),rr.prototype),st(rr.prototype,"mockReceive",[Js],Object.getOwnPropertyDescriptor(rr.prototype,"mockReceive"),rr.prototype),st(rr.prototype,"stopReceiving",[Js],Object.getOwnPropertyDescriptor(rr.prototype,"stopReceiving"),rr.prototype),st(rr.prototype,"restartICE",[Js],Object.getOwnPropertyDescriptor(rr.prototype,"restartICE"),rr.prototype),st(rr.prototype,"close",[Js],Object.getOwnPropertyDescriptor(rr.prototype,"close"),rr.prototype),st(rr.prototype,"updateEncoderConfig",[Js],Object.getOwnPropertyDescriptor(rr.prototype,"updateEncoderConfig"),rr.prototype),st(rr.prototype,"updateSendParameters",[Js],Object.getOwnPropertyDescriptor(rr.prototype,"updateSendParameters"),rr.prototype),st(rr.prototype,"replaceTrack",[Js],Object.getOwnPropertyDescriptor(rr.prototype,"replaceTrack"),rr.prototype),st(rr.prototype,"muteLocal",[Js],Object.getOwnPropertyDescriptor(rr.prototype,"muteLocal"),rr.prototype),st(rr.prototype,"unmuteLocal",[Js],Object.getOwnPropertyDescriptor(rr.prototype,"unmuteLocal"),rr.prototype),rr);function Js(t,n,i){const a=t[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,u=await l.lock("From P2PConnection.".concat(n));try{for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return await a.apply(this,p)}finally{u()}},i}let Ac=function(t){return t.SEND_ONLY="SEND_ONLY",t.RECEIVE_ONLY="RECEIVE_ONLY",t}({});var V$,j$,$$,H$,z$,W$,G$,K$,q$,Y$,X$,pr;function J$(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function qS(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?J$(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):J$(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}let h0e=(V$=Oc(Ac.SEND_ONLY),j$=Oc(Ac.SEND_ONLY),$$=Oc(),H$=Oc(Ac.RECEIVE_ONLY),z$=Oc(Ac.RECEIVE_ONLY),W$=Oc(Ac.RECEIVE_ONLY),G$=Oc(Ac.RECEIVE_ONLY),K$=Oc(Ac.RECEIVE_ONLY),q$=Oc(Ac.RECEIVE_ONLY),Y$=Oc(),X$=Oc(Ac.RECEIVE_ONLY),pr=class extends Sr{get state(){return this._state}set state(t){const n=this._state;this._state=t,this.emit(Et.StateChange,n,this._state)}constructor(t,n){super(),G(this,"isPlanB",!1),G(this,"store",void 0),G(this,"statsUploader",void 0),G(this,"sendConnection",void 0),G(this,"recvConnection",void 0),G(this,"localTrackMap",new Map),G(this,"remoteUserMap",new Map),G(this,"localDataChannels",[]),G(this,"pendingLocalTracks",[]),G(this,"pendingRemoteTracks",[]),G(this,"statsCollector",void 0),G(this,"dtlsFailedCount",0),G(this,"sendMutex",void 0),G(this,"recvMutex",void 0),G(this,"_state",kn.Disconnected),G(this,"_restartStates",["disconnected","failed"]),G(this,"reconnectInterval",void 0),G(this,"uploadUnplinkStarted",!1),G(this,"uploadDownlinkStarted",!1),G(this,"uplinkStateUploadInterval",void 0),G(this,"downlinkStatsUploadInterval",void 0),G(this,"handleMuteLocalTrack",async(i,a,l)=>{const u=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==kn.Connected)return void l(new we(X.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));const m=this.filterTobeMutedTracks(i);if(m.length===0)return void a();const E=m.find(D=>D[0]==="videoLowTrack");E&&E[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(m.map(D=>{let[,{id:H}]=D;return H}));let y=!1;var h,p;i.trackMediaType==="video"?y=!((h=this.localTrackMap.get(Le.LocalAudioTrack))===null||h===void 0||!h.track._muted):y=((p=this.localTrackMap.get(Le.LocalVideoTrack))===null||p===void 0?void 0:p.id)===void 0;const R=this.createMuteMessage(m);await Yn(this,Et.RequestMuteLocal,R);const A=i.trackMediaType==="video"?Bu.MUTE_LOCAL_VIDEO:Bu.MUTE_LOCAL_AUDIO;await Yn(this,Et.RequestP2PMuteLocal,{action:A,message:R,isMuteAll:y}),a()}catch(m){l(m)}finally{u()}}),G(this,"handleUnmuteLocalTrack",async(i,a,l)=>{const u=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==kn.Connected)return void l(new we(X.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));const h=this.filterTobeUnmutedTracks(i);if(h.length===0)return void a();await this.sendConnection.unmuteLocal(h.map(E=>{let[,{id:y}]=E;return y}));const p=this.createUnmuteMessage(h),m=i.trackMediaType==="video"?Bu.UNMUTE_LOCAL_VIDEO:Bu.UNMUTE_LOCAL_AUDIO;await Yn(this,Et.RequestP2PMuteLocal,{action:m,message:p}),a()}catch(h){l(h)}finally{u()}}),G(this,"handleUpdateVideoEncoder",async(i,a,l,u)=>{let h;typeof u=="boolean"&&u||(h=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoEncoder"));try{const m=this.localTrackMap.get(Le.LocalVideoTrack);if(!this.sendConnection||!m||m.track!==i||this.state!==kn.Connected)return void a();const{id:E,track:y}=m;E&&(await this.sendConnection.updateSendParameters(E,y),await this.sendConnection.updateEncoderConfig(E,y),this.emit(Et.UpdateVideoEncoder,y)),a()}catch(m){l(m)}finally{var p;(p=h)===null||p===void 0||p()}}),G(this,"handleUpdateVideoSendParameters",async(i,a,l)=>{const u=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoSendParameters");try{const h=this.localTrackMap.get(Le.LocalVideoTrack);if(!this.sendConnection||!h||h.track!==i||this.state!==kn.Connected)return void a();const{id:p,track:m}=h;p&&await this.sendConnection.updateSendParameters(p,m),a()}catch(h){l(h)}finally{u()}}),G(this,"handleReplaceTrack",async(i,a,l,u)=>{let h;k.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(i.getTrackId(),"]")),typeof u=="boolean"&&u||(h=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var p;const E=Array.from(this.localTrackMap.entries()).find(y=>{let[,{track:R}]=y;return i===R});if(!this.sendConnection||!E||E[1].id===void 0||this.state!==kn.Connected)return void a();if(await((p=this.sendConnection)===null||p===void 0?void 0:p.replaceTrack(i,E[1].id)),E[0]===Le.LocalVideoTrack&&yn().supportDualStreamEncoding){const y=this.localTrackMap.get(Le.LocalVideoLowTrack);if(y){const R=i._mediaStreamTrack.clone();y.track._originMediaStreamTrack.stop(),y.track._mediaStreamTrack=R,y.track._originMediaStreamTrack=R,await new Ye((A,D)=>{this.handleReplaceTrack(y.track,A,D,!0)})}}a()}catch(E){l(E)}finally{var m;(m=h)===null||m===void 0||m()}}),G(this,"handleGetLocalVideoStats",i=>{i(this.statsCollector.getLocalVideoTrackStats())}),G(this,"handleGetLocalAudioStats",i=>{i(this.statsCollector.getLocalAudioTrackStats())}),G(this,"handleGetRemoteVideoStats",i=>this.statsCollector.getRemoteVideoTrackStats(i.uid)[i.uid]),G(this,"handleGetRemoteAudioStats",i=>this.statsCollector.getRemoteAudioTrackStats(i.uid)[i.uid]),this.store=t,this.statsCollector=n,this.statsCollector.addP2PChannel(this),this.statsUploader=new f8(t),this.bindStatsUploaderEvents(),this.sendMutex=new Ji("P2PChannel2-send-mutex",t.clientId),this.recvMutex=new Ji("P2PChannel2-recv-mutex",t.clientId),this.reconnectInterval=window.setInterval(()=>{[this.sendConnection,this.recvConnection].forEach(i=>{i&&(i.iceConnectionState!=="disconnected"&&i.iceConnectionState!=="failed"||this.handleDisconnect(i.direction))})},Q("ICE_RESTART_INTERVAL"))}async startP2PConnection(t,n){throw new we(X.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(t){throw new we(X.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(t,n){let i;try{if(n){this.recvConnection&&(k.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),i=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new B$(t,this.store,No.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);const a=await this.recvConnection.establish(n);return{iceParameters:a.iceParameters,dtlsParameters:a.dtlsParameters,sdp:a.sdp}}{this.state=kn.New,this.sendConnection&&(k.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),i=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new B$(t,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);const a=await this.sendConnection.establish();return{iceParameters:a.iceParameters,dtlsParameters:a.dtlsParameters,sdp:a.sdp}}}finally{i&&i()}}async p2pConnect(t){if(!this.sendConnection)throw new we(X.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(t),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=kn.Connected}async addRemoteCandidate(t,n){if(n===No.RECEIVE_ONLY){if(!this.sendConnection)throw new we(X.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(t)}else{if(!this.recvConnection)throw new we(X.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(t)}}publish(t,n,i){var a=this;return as(function*(){const l=yield vn(a.sendMutex.lock("From P2PChannel.publish"));try{if(!a.sendConnection||a.state!==kn.Connected){a.throwIfTrackTypeNotMatch(t);const E=t.filter(y=>a.pendingLocalTracks.indexOf(y)===-1);return void(a.pendingLocalTracks=a.pendingLocalTracks.concat(E))}a.store.pubId=a.store.pubId+1,eo.markPublishStart(a.store.clientId,a.store.pubId);const u=a.filterTobePublishedTracks(t,n,i);if(u.length===0)return void(yield vn(a.tryToUnmuteAudio(t)));u.forEach(E=>{let{track:y,type:R}=E;const A=Date.now();a.store.publish(y.getTrackId(),R===Le.LocalAudioTrack?"audio":"video",A)}),a.bindLocalTrackEvents(u);const h=yield vn(a.sendConnection.send(u.map(E=>{let{track:y}=E;return y}),a.store.codec,a.store.audioCodec)),p=(yield vn(h.next())).value,m=a.createGatewayPublishMessage(u,p);try{yield m}catch(E){throw h.throw(E),(E==null?void 0:E.code)===X.WS_ABORT&&u.forEach(y=>{let{track:R}=y;a.pendingLocalTracks.indexOf(R)===-1&&a.pendingLocalTracks.push(R)}),a.unbindLocalTrackEvents(u),E}yield vn(h.next()),u.forEach(E=>{let{type:y}=E;a.statsCollector.addLocalStats(y)}),a.statsUploader.startUploadOutboundStats(),a.assignLocalTracks(u,p),u.forEach(E=>{let{track:y,type:R}=E;const A=Date.now();a.store.publish(y.getTrackId(),R===Le.LocalAudioTrack?"audio":"video",void 0,A)}),a.startUploadUplinkState()}finally{l()}})()}async unpublish(t){if(!this.sendConnection||this.state!==kn.Connected)return void(t.length===0?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter(l=>!Ke(t).call(t,l)));const n=this.filterTobeUnpublishedTracks(t);if(n.length===0)return;const i=n.find(l=>l[0]==="videoLowTrack");i&&i[1].track.close();const a=this.createGatewayUnpublishMessage(n);if(await this.sendConnection.stopSending(n.map(l=>{let[,{id:u}]=l;return u})),this.withdrawLocalTracks(n),this.unbindLocalTrackEvents(n.map(l=>{let[u,{track:h}]=l;return{type:u,track:h}})),n.forEach(l=>{let[u]=l;this.statsCollector.removeLocalStats(u)}),this.localTrackMap.size===0&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===kn.Connected)return i&&i[1].track.close(),a;t.forEach(l=>{const u=this.pendingLocalTracks.indexOf(l);u!==-1&&this.pendingLocalTracks.splice(u,1)})}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);const t=()=>{const n=[],i=[];Array.from(this.localTrackMap.entries()).forEach(a=>{let[l,{track:u,ssrcs:h}]=a;const p={stream_type:ape(u,l),ssrcs:h};u._muted||!u._enabled?n.push(p):i.push(p)}),n.length>0&&n.forEach(a=>{Yn(this,Et.RequestMuteLocal,[a])}),i.length>0&&i.forEach(a=>{Yn(this,Et.RequestUnmuteLocal,[a])})};t(),this.uplinkStateUploadInterval=window.setInterval(()=>{t()},3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(t){return as(function*(){throw new we(X.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")})()}async republish(){this.pendingLocalTracks.length>0&&(k.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await Wi(this,Et.RequestRePublish,this.pendingLocalTracks),this.emit(Et.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new we(X.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(t,n,i,a){var l;if(!this.recvConnection)throw new we(X.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if((l=this.remoteUserMap.get(t))!==null&&l!==void 0&&l.has(n))return;const{track:u,mid:h,transceiver:p}=await this.recvConnection.receive(n,[{ssrcId:i}],String(t.uid),a);n===it.AUDIO?(t._audioTrack?t._audioTrack._updateOriginMediaStreamTrack(u):(t._audioTrack=new tp(u,t.uid,t._uintid,this.store),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(t._audioTrack.getTrackId()))),p&&t._audioTrack._updateRtpTransceiver(p),this.bindRemoteTrackEvents(t,t._audioTrack)):(t._videoSSRC=i,t._videoTrack?t._videoTrack._updateOriginMediaStreamTrack(u):(t._videoTrack=new ep(u,t.uid,t._uintid,this.store),k.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(t._videoTrack.getTrackId()))),p&&t._videoTrack._updateRtpTransceiver(p),this.bindRemoteTrackEvents(t,t._videoTrack));const m=this.remoteUserMap.get(t);m?m.set(n,h):this.remoteUserMap.set(t,new Map([[n,h]])),this.statsCollector.addRemoteStats(t.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();const E=this.pendingRemoteTracks.findIndex(y=>{let{user:R,kind:A}=y;return R.uid===t.uid&&n===A});E!==-1&&(this.pendingRemoteTracks.splice(E,1),this.emit(Et.MediaReconnectEnd,t.uid))}async mockSubscribe(t,n,i,a){if(!this.recvConnection)throw new we(X.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive(n,[{ssrcId:i}],String(t.uid),a)}async unsubscribe(t,n,i){const a=this.pendingRemoteTracks.filter(u=>{let{user:h,kind:p}=u;return n!==void 0?h.uid===t.uid&&n===p:h.uid===t.uid});if(a.forEach(u=>{const h=this.pendingRemoteTracks.indexOf(u);this.pendingRemoteTracks.splice(h,1)}),this.recvConnection||i||a.forEach(u=>{let{kind:h}=u;var p;if(h===it.AUDIO)(p=t._audioTrack)===null||p===void 0||p._destroy(),t._audioTrack=void 0;else if(h===it.VIDEO){var m;(m=t._videoTrack)===null||m===void 0||m._destroy(),t._videoTrack=void 0}}),!this.recvConnection)return;const l=this.filterTobeUnSubscribedTracks(t,n);l.length!==0&&(await this.recvConnection.stopReceiving(l.map(u=>{let[,{id:h}]=u;return h})),this.withdrawRemoteTracks(l),this.remoteUserMap.size===0&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),l.forEach(u=>{let[h,{kind:p}]=u;var m,E;if(p===it.VIDEO&&h._videoSSRC&&((m=this.recvConnection)===null||m===void 0||m.setStatsRemoteVideoIsReady(h._videoSSRC,!1)),p===it.VIDEO)this.unbindRemoteTrackEvents(h._videoTrack),i||((E=h._videoTrack)===null||E===void 0||E._destroy(),h._videoTrack=void 0);else if(p===it.AUDIO){var y;this.unbindRemoteTrackEvents(h._audioTrack),!i&&((y=h._audioTrack)===null||y===void 0||y._destroy(),h._audioTrack=void 0)}}),l.forEach(u=>{let[,{kind:h}]=u;Yn(this,Et.RequestP2PMuteRemote,h)}))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);const t=()=>Array.from(this.remoteUserMap.entries()).forEach(n=>{let[,i]=n;[it.VIDEO,it.AUDIO].forEach(a=>{i.has(a)?Yn(this,Et.RequestP2PUnmuteRemote,a):Yn(this,Et.RequestP2PMuteRemote,a)})});t(),this.downlinkStatsUploadInterval=window.setInterval(()=>{t()},3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(t){throw new we(X.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(t){throw new we(X.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(t){throw new we(X.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(t){throw new we(X.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(t,n){if(!this.recvConnection)return;const i=this.remoteUserMap.get(t);if(!i)return void k.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(t.uid,"."));if(!i.get(n))return void k.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(t.uid," media type ").concat(n,"."));const a=n===it.VIDEO?t._videoSSRC:t._audioSSRC;a!==void 0&&this.recvConnection.setStatsRemoteVideoIsReady(a,!1)}async unmuteRemote(t,n){return this.unmuteRemoteNoLock(t,n)}async unmuteRemoteNoLock(t,n){if(!this.recvConnection)return;const i=this.remoteUserMap.get(t);if(!i)return void k.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(t.uid,"."));i.get(n)||k.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(t.uid," media type ").concat(n,"."))}getAllTracks(t){const n=this.localTrackMap.get(Le.LocalAudioTrack);if((n==null?void 0:n.track)instanceof di){const i=n.track;return Array.from(this.localTrackMap.entries()).filter(a=>{let[l]=a;return l!==Le.LocalAudioTrack}).filter(a=>{let[l]=a;return!(t&&l===Le.LocalVideoLowTrack)}).map(a=>{let[,{track:l}]=a;return l}).concat(i.trackList)}return Array.from(this.localTrackMap.entries()).filter(i=>{let[a]=i;return!(t&&a===Le.LocalVideoLowTrack)}).map(i=>{let[,{track:a}]=i;return a})}reportPublishEvent(t,n,i,a,l){if(t){const h=this.localTrackMap.get(Le.LocalAudioTrack),p=a?this.localTrackMap.get(Le.LocalVideoLowTrack):this.localTrackMap.get(Le.LocalVideoTrack);dt.publish(this.store.sessionId,{eventElapse:eo.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:t,ec:n,audioName:h==null?void 0:h.track.getTrackLabel(),videoName:p==null?void 0:p.track.getTrackLabel(),screenshare:(p==null?void 0:p.track._hints.indexOf(Jn.SCREEN_TRACK))!==-1,audio:!!h,video:!!p,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}else{var u;i||(i=[]);const h=i.find(m=>m instanceof Nr),p=a?(u=this.localTrackMap.get(Le.LocalVideoTrack))===null||u===void 0?void 0:u.track:i.find(m=>m instanceof sr);dt.publish(this.store.sessionId,{eventElapse:eo.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:t,ec:n,audioName:h==null?void 0:h.getTrackLabel(),videoName:p==null?void 0:p.getTrackLabel(),screenshare:(p==null?void 0:p._hints.indexOf(Jn.SCREEN_TRACK))!==-1,audio:!!h,video:!!p,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}}reportSubscribeEvent(t,n,i,a){const l=a===it.VIDEO?i._videoSSRC:i._audioSSRC;l&&dt.subscribe(this.store.sessionId,{succ:t,ec:n,video:a===it.VIDEO,audio:a===it.AUDIO,peerid:i.uid,subscribeRequestid:a===it.VIDEO?i._videoSSRC:i._audioSSRC,p2pid:this.store.p2pId,eventElapse:eo.measureFromSubscribeStart(this.store.clientId,l)})}reset(){k.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new Ji("P2PChannel2-send-mutex",this.store.clientId),this.sendMutex=new Ji("P2PChannel2-recv-mutex",this.store.clientId),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const t=this.localTrackMap.get(Le.LocalAudioTrack);if((t==null?void 0:t.track)instanceof di){if(t.track.trackList.length>0){const n=t.track;t.track.trackList.forEach(i=>{n.removeAudioTrack(i)})}t.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=kn.Disconnected}getStats(t){var n,i;return t?(i=this.recvConnection)===null||i===void 0?void 0:i.getStats():(n=this.sendConnection)===null||n===void 0?void 0:n.getStats()}getRemoteVideoIsReady(t){var n;return((n=this.recvConnection)===null||n===void 0?void 0:n.getRemoteVideoIsReady(t))||!1}getLocalAudioVolume(){const t=this.localTrackMap.get(Le.LocalAudioTrack);if(t)return t.track.getVolumeLevel()}getLocalVideoSize(){const t=this.localTrackMap.get(Le.LocalVideoTrack);if(t)return{width:t.track.videoWidth||0,height:t.track.videoHeight||0}}getEncoderConfig(t){const n=this.localTrackMap.get(t);return n&&n.track instanceof sr||n&&n.track instanceof Nr?n.track._encoderConfig:void 0}getLocalMedia(t){return this.localTrackMap.get(t)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(t,n){if(!t)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(t);return!!i&&(!n||i.has(n))}async hasRemoteMediaWithLock(t,n){if(!t)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(t);return!!i&&(!n||i.has(n))}getRemoteMedia(t){var n;const i=Array.from(Va(n=this.remoteUserMap).call(n)).find(a=>a.uid===t);return i?{audioTrack:i.audioTrack,audioSSRC:i._audioSSRC,videoTrack:i.videoTrack,videoSSRC:i._videoSSRC}:{}}getAudioLevels(){let t=Array.from(this.remoteUserMap.entries()).map(i=>{let[a]=i;return{uid:a.uid,level:a.audioTrack?100*a.audioTrack._source.getAccurateVolumeLevel():0}});const n=this.localTrackMap.get(Le.LocalAudioTrack);return n&&t.push({level:100*n.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),t=a0(t).call(t,(i,a)=>i.level-a.level),t}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(k.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=kn.Reconnecting,Q("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(t=>{let[n]=t;var i;n._videoTrack&&n._videoTrack._player&&((i=n._videoTrack._player.getVideoElement())===null||i===void 0||i.pause(),n._videoTrack._player.isKeepLastFrame=!0,n._videoTrack._originMediaStreamTrack.stop())}),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(t=>{var n;let[i,{track:a}]=t;switch(i){case Le.LocalVideoTrack:Ke(n=a._hints).call(n,Jn.LOW_STREAM)?a.close():this.pendingLocalTracks.push(a);break;case Le.LocalAudioTrack:a instanceof di?this.pendingLocalTracks=this.pendingLocalTracks.concat(a.trackList):this.pendingLocalTracks.push(a);case Le.LocalVideoLowTrack:}}),this.emit(Et.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(t=>{let[n,i]=t;Array.from(Va(i).call(i)).forEach(a=>{this.setPendingRemoteMedia(n,a)}),this.emit(Et.MediaReconnectStart,n.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),k.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(t,n){for(const i of this.pendingRemoteTracks){const{user:a,kind:l}=i;if((t instanceof zu?t.uid:t)===a.uid&&n===l)return!0}return!1}setPendingRemoteMedia(t,n){this.hasPendingRemoteMedia(t,n)||this.pendingRemoteTracks.push({user:t,kind:n})}async restartICE(t,n){let i,a;if(t===No.SEND_ONLY){if(!this.sendConnection)throw new we(X.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");i=await this.sendMutex.lock("From P2PChannel.restartICE"),a=this.sendConnection}else{if(!this.recvConnection)throw new we(X.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");i=await this.recvMutex.lock("From P2PChannel.restartICE"),a=this.recvConnection}try{if(n){const l=await a.restartICE(n);return a.isInRestartIce=!1,l}{const l=await a.restartICE();if(l){const u=await Wi(this,Et.RequestP2PRestartICE,{direction:No.RECEIVE_ONLY,iceParameter:l});await a.restartICE(u),a.isInRestartIce=!1}}}finally{i()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;const t=this.sendConnection.getStats(),n=this.localTrackMap.get(Le.LocalVideoTrack),i=this.localTrackMap.get(Le.LocalAudioTrack),a=t.videoSend.find(D=>{var H;return D.ssrc===(n==null||(H=n.ssrcs)===null||H===void 0?void 0:H[0].ssrcId)}),l=t.audioSend.find(D=>{var H;return D.ssrc===(i==null||(H=i.ssrcs)===null||H===void 0?void 0:H[0].ssrcId)});if(!a||!l)return 1;const u=Ua(this,Et.NeedSignalRTT),h=a?a.rttMs:void 0,p=l?l.rttMs:void 0,m=h&&p?(h+p)/2:h||p,E=(m&&u?(m+u)/2:m||u)||0,y=100*t.sendPacketLossRate*.7/50+.3*E/1500,R=y<.17?1:y<.36?2:y<.59?3:y<.1?4:5,A=n==null?void 0:n.track;if(A&&A._encoderConfig&&A._hints.indexOf(Jn.SCREEN_TRACK)===-1){const D=A._encoderConfig.bitrateMax,H=t.bitrate.actualEncoded;if(D&&H){const B=(1e3*D-H)/(1e3*D);return J5[B<.15?0:B<.3?1:B<.45?2:B<.6?3:4][R]}}return R}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;const t=this.recvConnection.getStats();let n=0;return Array.from(this.remoteUserMap.entries()).forEach(i=>{let[a]=i;const l=a._audioSSRC,u=a._videoSSRC,h=t.audioRecv.find(H=>H.ssrc===l),p=t.videoRecv.find(H=>H.ssrc===u);if(!h&&!p)return void(n+=1);const m=Ua(this,Et.NeedSignalRTT),E=t.rtt,y=(E&&m?(E+m)/2:E||m)||0,R=h?h.jitterMs:void 0,A=t.recvPacketLossRate;let D=.7*A*100/50+.3*y/1500;R&&(D=.6*A*100/50+.2*y/1500+.2*R/400),n+=D<.1?1:D<.17?2:D<.36?3:D<.59?4:5}),this.remoteUserMap.size>0?Math.round(n/this.remoteUserMap.size):n}async muteLocalTrack(t){return new Ye((n,i)=>{this.handleMuteLocalTrack(t,n,i)})}filterTobePublishedTracks(t,n,i){const a=[],l=yn(),u=this.getAllTracks();t=jf(t=t.filter(m=>u.indexOf(m)===-1));let h=!1,p=!1;for(const m of t){if(m instanceof sr&&(this.localTrackMap.has(Le.LocalVideoTrack)||h?new we(X.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(a.push({track:m,type:Le.LocalVideoTrack}),h=!0),n)){const E=this.getLowVideoTrack(m,i);a.push({track:E,type:Le.LocalVideoLowTrack})}if(m instanceof Nr){const E=this.localTrackMap.get(Le.LocalAudioTrack);if(E){if(!(E.track instanceof di))throw new we(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(m._bypassWebAudio)throw new we(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");E.track.addAudioTrack(m),this.bindLocalAudioTrackEvents(m,!0)}else if(p){const y=a.find(R=>{let{type:A}=R;return A===Le.LocalAudioTrack});if(!(y.track instanceof di))throw new we(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(m._bypassWebAudio)throw new we(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");y.track.addAudioTrack(m)}else{if(!l.webAudioMediaStreamDest||m instanceof di||m._bypassWebAudio)a.push({track:m,type:Le.LocalAudioTrack});else{const y=new di;y.addAudioTrack(m),a.push({track:y,type:Le.LocalAudioTrack})}p=!0}}}return a}filterTobeUnpublishedTracks(t){const n=[],i=this.getAllTracks();t=jf(t=t.filter(a=>i.indexOf(a)!==-1));for(const a of t){if(a instanceof Nr){const l=this.localTrackMap.get(Le.LocalAudioTrack);if(!l)continue;l.track instanceof di?(l.track.removeAudioTrack(a),this.unbindLocalAudioTrackEvents(a),l.track.trackList.length===0&&(n.push([Le.LocalAudioTrack,l]),l.track.close())):n.push([Le.LocalAudioTrack,l])}if(a instanceof sr){const l=this.localTrackMap.get(Le.LocalVideoTrack);if(!l)continue;n.push([Le.LocalVideoTrack,l]);const u=this.localTrackMap.get(Le.LocalVideoLowTrack);u&&n.push([Le.LocalVideoLowTrack,u])}}return n}bindLocalTrackEvents(t){t.forEach(n=>{let{track:i,type:a}=n;switch(a){case Le.LocalVideoTrack:i.addListener(at.GET_STATS,this.handleGetLocalVideoStats),i.addListener(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(at.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.addListener(at.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),i.addListener(at.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.addListener(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Le.LocalAudioTrack:this.bindLocalAudioTrackEvents(i);case Le.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(t,n){t instanceof di?t.trackList.forEach(i=>{i.addListener(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(at.GET_STATS,this.handleGetLocalAudioStats),i.addListener(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(t.addListener(at.GET_STATS,this.handleGetLocalAudioStats),t.addListener(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),n||t.addListener(at.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(t){t||(t=Array.from(this.localTrackMap.entries()).map(n=>{let[i,{track:a}]=n;return{track:a,type:i}})),t.forEach(n=>{let{track:i,type:a}=n;switch(a){case Le.LocalVideoTrack:i.off(at.GET_STATS,this.handleGetLocalVideoStats),i.off(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.off(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.off(at.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.off(at.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),i.off(at.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.off(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.off(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Le.LocalAudioTrack:this.unbindLocalAudioTrackEvents(i);case Le.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(t){t instanceof di?t.trackList.forEach(n=>{n.off(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(at.GET_STATS,this.handleGetLocalAudioStats),n.off(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(t.off(at.GET_STATS,this.handleGetLocalAudioStats),t.off(at.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(at.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(at.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(at.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(at.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(t,n){n instanceof ep&&n.addListener(at.GET_STATS,i=>{i(this.handleGetRemoteVideoStats(t))}),n instanceof tp&&n.addListener(at.GET_STATS,i=>{i(this.handleGetRemoteAudioStats(t))})}unbindRemoteTrackEvents(t){t&&t.removeAllListeners(at.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(t=>{let[n,i]=t;i.has(it.AUDIO)&&this.unbindRemoteTrackEvents(n._audioTrack),i.has(it.VIDEO)&&this.unbindRemoteTrackEvents(n._videoTrack)})}createGatewayPublishMessage(t,n){return t.map((i,a)=>{var l;let u,{track:h,type:p}=i;switch(p){case Le.LocalAudioTrack:u=Mn.Audio;break;case Le.LocalVideoTrack:u=Ke(l=h._hints).call(l,Jn.SCREEN_TRACK)?Mn.Screen:Mn.High;break;case Le.LocalVideoLowTrack:u=Mn.Low}return{kind:p===Le.LocalAudioTrack?it.AUDIO:it.VIDEO,stream_type:u,mid:n[a].id,ssrcs:n[a].localSSRC,isMuted:h.muted||!h.enabled}})}createGatewayUnpublishMessage(t){return t.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:p}]=n;switch(l){case Le.LocalVideoTrack:a=Ke(i=u._hints).call(i,Jn.SCREEN_TRACK)?Mn.Screen:Mn.High;break;case Le.LocalAudioTrack:a=Mn.Audio;break;case Le.LocalVideoLowTrack:a=Mn.Low}return{stream_type:a,ssrcs:h,mid:p}})}assignLocalTracks(t,n){t.forEach((i,a)=>{let{track:l,type:u}=i;this.localTrackMap.set(u,{track:l,id:n[a].id,ssrcs:n[a].localSSRC})})}withdrawLocalTracks(t){t.forEach(n=>{let[i]=n;this.localTrackMap.delete(i)})}bindConnectionEvents(t){t.onConnectionStateChange=async n=>{var i;k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(t.name,".onConnectionStateChange(").concat(n,")")),this.emit(Et.PeerConnectionStateChange,n),n!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),n==="connected"&&(t.isInRestartIce=!1),Ke(i=this._restartStates).call(i,n)&&!t.isInRestartIce&&(n==="disconnected"&&await Ni(800),t.iceConnectionState!=="disconnected"&&t.iceConnectionState!=="failed"||this.handleDisconnect(t.direction))},t.onICEConnectionStateChange=n=>{n!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(n,")")),dt.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:n,tag:wr.TRACER}).onSuccess(),this.emit(Et.IceConnectionStateChange,n)},t.onICETransportStateChange=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(n,")"))},t.onDTLSTransportStateChange=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(n,")"))},t.onDTLSTransportError=n=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(n,")"))},t.onFirstAudioDecoded=n=>{var i;const a=Array.from(Va(i=this.remoteUserMap).call(i)).find(u=>u._audioSSRC===n);var l;a&&(this.store.subscribe(a.uid,"audio",void 0,void 0,void 0,Date.now()),(l=a.audioTrack)===null||l===void 0||l.emit(Yf.FIRST_FRAME_DECODED),dt.firstRemoteFrame(this.store.sessionId,_i.FIRST_AUDIO_DECODE,hr.FIRST_AUDIO_DECODE,{peer:a._uintid,subscribeElapse:eo.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId}))},t.onFirstAudioReceived=n=>{var i;const a=Array.from(Va(i=this.remoteUserMap).call(i)).find(l=>l._audioSSRC===n);a&&dt.firstRemoteFrame(this.store.sessionId,_i.FIRST_AUDIO_RECEIVED,hr.FIRST_AUDIO_RECEIVED,{peer:a._uintid,subscribeElapse:eo.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId})},t.onFirstVideoDecoded=(n,i,a)=>{this.reportVideoFirstFrameDecoded(n,i,a)},t.onFirstVideoReceived=n=>{var i;const a=Array.from(Va(i=this.remoteUserMap).call(i)).find(l=>l._videoSSRC===n);a&&dt.firstRemoteFrame(this.store.sessionId,_i.FIRST_VIDEO_RECEIVED,hr.FIRST_VIDEO_RECEIVED,{peer:a._uintid,subscribeElapse:eo.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId})},t.onSelectedLocalCandidateChanged=(n,i)=>{const a=n.candidateType==="relay",l=i.candidateType==="relay";i.candidateType!=="unknown"&&a===l||this.emit(Et.ConnectionTypeChange,a),k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(ju(i))," -> ").concat(JSON.stringify(ju(n)),")"))},t.onSelectedRemoteCandidateChanged=(n,i)=>{k.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(ju(i))," -> ").concat(JSON.stringify(ju(n)),")"))},t.onFirstVideoDecodedTimeout=n=>{this.reportVideoFirstFrameDecoded(n,void 0,void 0,!0)},t.onLocalCandidate=n=>{this.emit(Et.LocalCandidate,{candidate:n,direction:t.direction})}}unbindConnectionEvents(t){t.onConnectionStateChange=void 0,t.onICEConnectionStateChange=void 0,t.onICETransportStateChange=void 0,t.onDTLSTransportStateChange=void 0,t.onDTLSTransportError=void 0,t.onFirstAudioDecoded=void 0,t.onFirstAudioReceived=void 0,t.onFirstVideoDecoded=void 0,t.onFirstVideoReceived=void 0,t.onSelectedLocalCandidateChanged=void 0,t.onSelectedRemoteCandidateChanged=void 0,t.onFirstVideoDecodedTimeout=void 0,t.onLocalCandidate=void 0}async handleDisconnect(t){const n=t===No.SEND_ONLY?this.sendConnection:this.recvConnection;n&&!n.isInRestartIce&&(n.isInRestartIce=!0,k.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat(n.name,"] start use restartICE")),t===No.SEND_ONLY?this.restartICE(t):Wi(this,Et.RequestP2PRestartICE,{direction:No.SEND_ONLY}))}filterTobeMutedTracks(t){const n=[];if(this.getAllTracks().indexOf(t)===-1)return n;const i=this.localTrackMap.get(Le.LocalAudioTrack);if(t instanceof Nr&&(i==null?void 0:i.track)instanceof di)return i.track.isActive||n.push([Le.LocalAudioTrack,i]),n;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:u}]=l;return t===u});if(a&&(n.push(a),a[0]===Le.LocalVideoTrack)){const l=this.localTrackMap.get(Le.LocalVideoLowTrack);l&&n.push([Le.LocalVideoLowTrack,l])}return n}filterTobeUnmutedTracks(t){const n=[],i=this.localTrackMap.get(Le.LocalAudioTrack);if(t instanceof Nr&&(i==null?void 0:i.track)instanceof di)return i.track.isActive&&n.push([Le.LocalAudioTrack,i]),n;const a=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:u}]=l;return t===u});if(a)if(a[0]===Le.LocalVideoTrack){n.push(a);const l=this.localTrackMap.get(Le.LocalVideoLowTrack);l&&n.push([Le.LocalVideoLowTrack,l])}else n.push(a);return n}createMuteMessage(t){return t.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:p}]=n;switch(l){case Le.LocalAudioTrack:a=Mn.Audio;break;case Le.LocalVideoTrack:a=Ke(i=u._hints).call(i,Jn.SCREEN_TRACK)?Mn.Screen:Mn.High;break;case Le.LocalVideoLowTrack:a=Mn.Low}return{stream_type:a,ssrcs:h,mid:p}})}createUnmuteMessage(t){return t.map(n=>{var i;let a,[l,{track:u,ssrcs:h,id:p}]=n;switch(l){case Le.LocalAudioTrack:a=Mn.Audio;break;case Le.LocalVideoTrack:a=Ke(i=u._hints).call(i,Jn.SCREEN_TRACK)?Mn.Screen:Mn.High;break;case Le.LocalVideoLowTrack:a=Mn.Low}return{stream_type:a,ssrcs:h,mid:p}})}filterTobeUnSubscribedTracks(t,n){const i=[],a=this.remoteUserMap.get(t);if(!a)return i;if(n){const l=a.get(n);if(!l)return i;i.push([t,{kind:n,id:l}])}else Array.from(a.entries()).forEach(l=>{let[u,h]=l;i.push([t,{kind:u,id:h}])});return i}createUnsubscribeMessage(t){const n=[];return t.forEach(i=>{let[a,{kind:l,id:u}]=i;switch(l){case it.VIDEO:return void(a._videoSSRC&&n.push({stream_type:it.VIDEO,ssrcId:a._videoSSRC}));case it.AUDIO:return void(a._audioSSRC&&n.push({stream_type:it.AUDIO,ssrcId:a._audioSSRC}))}}),n}withdrawRemoteTracks(t){t.forEach(n=>{let[i,{kind:a}]=n;const l=this.remoteUserMap.get(i);l&&(l.delete(a),Array.from(l.entries()).length===0&&this.remoteUserMap.delete(i))})}async updateBitrateLimit(t){const n=this.localTrackMap.get(Le.LocalVideoTrack),i=this.localTrackMap.get(Le.LocalVideoLowTrack);n&&(await n.track.setBitrateLimit(t.uplink),await new Ye((a,l)=>{this.handleUpdateVideoEncoder(n.track,a,l,!0)})),i&&t.low_stream_uplink&&(await i.track.setBitrateLimit({max_bitrate:t.low_stream_uplink.bitrate,min_bitrate:t.low_stream_uplink.bitrate||0}),await new Ye((a,l)=>{this.handleUpdateVideoEncoder(i.track,a,l,!0)}))}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){const t=this.sendConnection.peerConnectionState,n=this.recvConnection.peerConnectionState;return t!=="connected"&&n!=="connected"}return!0}async tryToUnmuteAudio(t){for(let n=0;n<t.length;n++)if(t[n]instanceof Nr){const i=this.filterTobeUnmutedTracks(t[n]);if(i.length===0)continue;const a=this.createUnmuteMessage(i);return void await Yn(this,Et.RequestUnmuteLocal,a)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=t=>this.getStats(t),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter(t=>{let[,{ssrcs:n}]=t;return!!n}),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=t=>{var n;return!((n=this.recvConnection)===null||n===void 0||!n.getRemoteVideoIsReady(t))},this.statsUploader.requestUpload=(t,n)=>this.emit(Et.RequestUpload,t,n),this.statsUploader.requestUploadStats=t=>this.emit(Et.RequestUploadStats,t),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Ni(Hw(this.dtlsFailedCount,ti)),this.emit(Et.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(Le.LocalVideoTrack)||this.pendingLocalTracks.some(t=>t instanceof sr)}throwIfTrackTypeNotMatch(t){if(t.filter(n=>n instanceof sr).length>1)throw new we(X.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t.filter(n=>n instanceof Nr).length>1&&(t.some(n=>n instanceof Nr&&n._bypassWebAudio)||!yn().webAudioMediaStreamDest))throw new we(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const n of t){if(n instanceof sr&&this.pendingLocalTracks.some(i=>i instanceof sr))throw new we(X.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n instanceof Nr&&this.pendingLocalTracks.some(i=>i instanceof Nr)&&(!yn().webAudioMediaStreamDest||n._bypassWebAudio||this.pendingLocalTracks.some(i=>i instanceof Nr&&i._bypassWebAudio)))throw new we(X.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(t,n){const i=!Q("DISABLE_DUAL_STREAM_USE_ENCODING")&&yn().supportDualStreamEncoding,a=qS(qS({},{width:160,height:120,framerate:15,bitrate:50}),n);let l;l=i?t._mediaStreamTrack.clone():QI(t,a);const u=Xn(8,"track-low-"),h=new sr(l,qS(qS({},i&&{scaleResolutionDownBy:LI(a,t)}),{},{frameRate:a.framerate,bitrateMax:a.bitrate,bitrateMin:a.bitrate}),void 0,void 0,u);return h.on(Qd.TRANSCEIVER_UPDATED,p=>{t._updateRtpTransceiver(p,Kf.LOW_STREAM)}),h._hints.push(Jn.LOW_STREAM),t.addListener(at.NEED_CLOSE,()=>{h.close()}),h}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(t,n,i,a){var l;const u=Array.from(Va(l=this.remoteUserMap).call(l)).find(h=>h._videoSSRC===t);if(u){a||this.store.subscribe(u.uid,"video",void 0,void 0,void 0,void 0,Date.now());const h=this.store.keyMetrics,p=h.subscribe.find(m=>m.userId===u.uid&&m.type==="video");dt.firstRemoteVideoDecode(this.store.sessionId,_i.FIRST_VIDEO_DECODE,hr.FIRST_VIDEO_DECODE,{peer:u._uintid,videowidth:n,videoheight:i,subscribeElapse:eo.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId,apEnd:h.requestAPEnd||0,apStart:h.requestAPStart||0,joinGwEnd:h.joinGatewayEnd||0,joinGwStart:h.joinGatewayStart||0,pcEnd:h.peerConnectionEnd||0,pcStart:h.peerConnectionStart||0,subscriberEnd:(p==null?void 0:p.subscribeEnd)||0,subscriberStart:(p==null?void 0:p.subscribeStart)||0,videoAddNotify:(p==null?void 0:p.streamAdded)||0,state:a?1:0})}}async remoteMediaSsrcChanged(t,n,i){if(!this.recvConnection)return!1;const a=this.remoteUserMap.get(t);if(!a)return!1;const l=a.get(n);if(!l)return!1;const u=await this.recvConnection.getRemoteSSRC(l);return u!==void 0&&u!==i}isPreSubScribe(t){return!1}async publishDataChannel(t){throw new we(X.NOT_SUPPORTED)}async unpublishDataChannel(t){throw new we(X.NOT_SUPPORTED)}async subscribeDataChannel(t,n){throw new we(X.NOT_SUPPORTED)}async unsubscribeDataChannel(t,n){throw new we(X.NOT_SUPPORTED)}hasPendingRemoteDataChannel(t,n){throw new we(X.NOT_SUPPORTED)}setPendingRemoteDataChannel(t,n){throw new we(X.NOT_SUPPORTED)}async preConnect(t){throw new we(X.NOT_SUPPORTED)}getEstablishParams(){throw new we(X.NOT_SUPPORTED)}async reSubscribe(t){throw new we(X.NOT_SUPPORTED)}async updateVideoStreamParameter(t,n){throw new we(X.NOT_SUPPORTED)}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(t=>{let[n,{track:i}]=t;n===Le.LocalVideoLowTrack?i._updateRtpTransceiver(void 0,Kf.LOW_STREAM):i._updateRtpTransceiver(void 0)})}},st(pr.prototype,"p2pConnect",[V$],Object.getOwnPropertyDescriptor(pr.prototype,"p2pConnect"),pr.prototype),st(pr.prototype,"unpublish",[j$],Object.getOwnPropertyDescriptor(pr.prototype,"unpublish"),pr.prototype),st(pr.prototype,"unpublishLowStream",[$$],Object.getOwnPropertyDescriptor(pr.prototype,"unpublishLowStream"),pr.prototype),st(pr.prototype,"subscribe",[H$],Object.getOwnPropertyDescriptor(pr.prototype,"subscribe"),pr.prototype),st(pr.prototype,"mockSubscribe",[z$],Object.getOwnPropertyDescriptor(pr.prototype,"mockSubscribe"),pr.prototype),st(pr.prototype,"unsubscribe",[W$],Object.getOwnPropertyDescriptor(pr.prototype,"unsubscribe"),pr.prototype),st(pr.prototype,"muteRemote",[G$],Object.getOwnPropertyDescriptor(pr.prototype,"muteRemote"),pr.prototype),st(pr.prototype,"unmuteRemote",[K$],Object.getOwnPropertyDescriptor(pr.prototype,"unmuteRemote"),pr.prototype),st(pr.prototype,"hasRemoteMediaWithLock",[q$],Object.getOwnPropertyDescriptor(pr.prototype,"hasRemoteMediaWithLock"),pr.prototype),st(pr.prototype,"disconnectForReconnect",[Y$],Object.getOwnPropertyDescriptor(pr.prototype,"disconnectForReconnect"),pr.prototype),st(pr.prototype,"remoteMediaSsrcChanged",[X$],Object.getOwnPropertyDescriptor(pr.prototype,"remoteMediaSsrcChanged"),pr.prototype),pr);function Oc(t){return function(n,i,a){const l=n[i];if(typeof l!="function")throw new Error("Cannot use mutex on object property.");return a.value=async function(){for(var u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];switch(t){case Ac.SEND_ONLY:{const m=await this.sendMutex.lock("From P2PChannel2.".concat(i));try{return await l.apply(this,h)}finally{m()}}case Ac.RECEIVE_ONLY:{const m=await this.recvMutex.lock("From P2PChannel2.".concat(i));try{return await l.apply(this,h)}finally{m()}}default:{const m=await this.sendMutex.lock("From P2PChannel2.".concat(i)),E=await this.recvMutex.lock("From P2PChannel2.".concat(i));try{return await l.apply(this,h)}finally{m(),E()}}}},a}}class _h extends Sr{constructor(n,i){super(),G(this,"signal",void 0),G(this,"token",void 0),G(this,"tokenTimeout",void 0),G(this,"tokenInterval",void 0),G(this,"_sequence",0),G(this,"userMap",new Map),G(this,"encoder",new TextEncoder),this.signal=n,this.token=i;const a=()=>{this.signal.connectionState===er.CONNECTED&&this.check(),this.userMap.size===0?this.tokenInterval=window.setTimeout(a,1e3):this.tokenInterval=window.setTimeout(a,3*Q("P2P_TOKEN_INTERVAL"))};a()}async send(n,i,a,l,u){var h,p,m;if(this.userMap.size===0)return;const E=Array.from(Ma(h=this.userMap).call(h))[0].token;typeof i!="string"&&(i=JSON.stringify(i)),l=(p=l)!==null&&p!==void 0?p:Xn(6,""),u=(m=u)!==null&&m!==void 0?m:this._sequence++;const y={_id:l,_type:n,_seq:u,_message:i,token:"".concat(this.token,"_").concat(E)};Q("SHOW_P2P_LOG")&&k.debug("send message",y,"noNeedResponse : ".concat(a)),this.splitMessage(JSON.stringify(y)).forEach(A=>{this.signal.request(Dt.DATA_STREAM,{payload:Mu(this.encoder.encode(A))})});const R=new Ye((A,D)=>{const H=window.setTimeout(()=>{this.off("res-@".concat(l,"_ack"),B),this.off("res-@".concat(l),K),this.off(ap.ABORT,$),k.debug("[external-signal] request timeout, type: ".concat(n,", requestId: ").concat(l)),this.userMap.size===0?D(new we(X.INVALID_REMOTE_USER)):D(new we(X.TIMEOUT))},Q("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),B=()=>{H&&window.clearTimeout(H),this.off(ap.ABORT,$),a&&A()},$=()=>{H&&window.clearTimeout(H),this.off("res-@".concat(l,"_ack"),B),this.off("res-@".concat(l),K),D(new we(X.EXTERNAL_SIGNAL_ABORT,"type: ".concat(n,", requestId: ").concat(l)))};this.once(ap.ABORT,$),this.once("res-@".concat(l,"_ack"),B);const K=(ce,ge)=>{Y=!0,H&&window.clearTimeout(H),this.off("res-@".concat(l,"_ack"),B),this.off(ap.ABORT,$),ce==="success"?A(ge):D(new we(X.P2P_MESSAGE_FAILED,"request ".concat(n," failed, requestId: ").concat(l)))};let Y=!1;a||(this.once("res-@".concat(l),K),Ni(Q("SIGNAL_REQUEST_TIMEOUT")).then(()=>{Y||k.warning("external_signal request timeout, type: ".concat(n,", requestId: ").concat(l,", ").concat(y))}))});try{return await R}catch(A){if(A.code===X.TIMEOUT)return await this.send(n,i,a,l,u);throw A}}onMessage(n){var i;const{_uid:a}=n;let l,u=this.userMap.get(a);if(u)l=u.splitMessageMap;else{if(this.userMap.size>0||!("_type"in n)||n._type!==Br.CHECK)return;const{token:E}=n;l=new Map,u={uid:a,isStart:!0,token:E,splitMessageMap:l,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(a,u),this.signal.emit(un.ON_USER_ONLINE,{uid:a}),this.handleUserOnline()}if("id"in n&&"total"in n){var h;const{id:E,total:y}=n,R=(h=l.get(E))!==null&&h!==void 0?h:[];if(R.push(n),l.has(E)||l.set(E,R),R.length!==y)return;{const A=a0(R).call(R,(D,H)=>D.index-H.index).map(D=>D.payload).join("");l.delete(E),(n=JSON.parse(A))._uid=a}}const{_type:p,token:m}=n;if(Ke(i=[Br.ACK,Br.CHECK]).call(i,p))return p===Br.CHECK&&this.handleCheckToken(u,m),void this.receiveMessage(n);m==="".concat(u.token,"_").concat(this.token)?this.handleReceivedMessage(n):k.debug('Receive unexpected message", '.concat(m,", cur_token: ").concat(u.token,"_").concat(this.token),n)}check(){const n={_id:Xn(6,""),token:this.token,_type:Br.CHECK};Q("SHOW_P2P_LOG")&&k.debug("send message",n),this.signal.request(Dt.DATA_STREAM,{payload:Mu(this.encoder.encode(JSON.stringify(n)))})}ack(n){const i={_id:n,_type:Br.ACK,token:this.token};Q("SHOW_P2P_LOG")&&k.debug("send message",i),this.signal.request(Dt.DATA_STREAM,{payload:Mu(this.encoder.encode(JSON.stringify(i)))})}response(n,i,a){this.send(Br.RESPONSE,JSON.stringify({success:!a,message:i}),!0,n)}handleReceivedMessage(n){const i=()=>{this.userMap.forEach(E=>{const{receivedMessagesMap:y,nextExpectedSequenceNumber:R}=E;for(;y.has(R);){const A=y.get(R);y.delete(R),this.receiveMessage(A),E.nextExpectedSequenceNumber++}})};if(!n)return void i();const{_uid:a,_seq:l}=n,u=this.userMap.get(a),{receivedMessagesMap:h,isStart:p,nextExpectedSequenceNumber:m}=u;if(l<m)return this.ack(n._id),void k.debug("[external-signal] receive old message, seq: ".concat(l,", ").concat(n._message));h.set(l,n),p&&l===m&&(this.receiveMessage(n),h.delete(m),u.nextExpectedSequenceNumber++,i())}receiveMessage(n){const{_id:i,_type:a,_message:l,_uid:u}=n;if(Q("SHOW_P2P_LOG")&&k.debug("receive message",n),i){let h;switch(n._type!==Br.ACK&&(l&&(h=JSON.parse(l)),this.ack(n._id)),n._type){case Br.CANDIDATE:case Br.CONTROL:this.signal.emit(a,h,u);break;case Br.PUBLISH:case Br.UNPUBLISH:case Br.RESTART_ICE:case Br.CALL:h.uid=u,Wi(this.signal,a,h).then(p=>{this.response(n._id,p)}).catch(()=>{this.response(n._id,void 0,!0)});break;case Br.ACK:this.getListeners("res-@".concat(i,"_ack")).length>0&&this.emit("res-@".concat(i,"_ack"));break;case Br.RESPONSE:{const{success:p,message:m}=h;this.emit("res-@".concat(i),p?"success":"failed",m);break}}}}splitMessage(n){if(n.length<_h.MAX_MESSAGE_SIZE)return[n];const i=[],{remoteToken:a}=JSON.parse(n),l=Xn(6,"");let u=0,h=800;const p=Math.ceil(n.length/h);for(;n.length>0;){u++;const m={id:l,index:u,total:p,payload:n.slice(0,h),token:"".concat(this.token,"_").concat(a)};JSON.stringify(m).length>_h.MAX_MESSAGE_SIZE?h-=50:(i.push(m),n=n.slice(h))}return i.map(m=>JSON.stringify(m))}handleCheckToken(n,i){return n.token!==i?(k.debug("token changed, from ".concat(n.token," to ").concat(i)),this.reset(n.uid,i),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout(()=>{k.debug("token timeout, ".concat(i)),this.reset(n.uid)},Q("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){const n=await Wi(this.signal,Br.CALL,void 0),i=await this.send(Br.CALL,n);this.signal.emit(Mt.P2P_CONNECTION,i,!0)}async reset(n,i){const a=this.userMap.get(n);a&&(this.emit(ap.ABORT),this.signal.emit(un.ON_USER_OFFLINE,{uid:a.uid,reason:Lfe.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),i||(k.debug("change local token from ".concat(i," to ").concat(i)),this.token=Xn(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(ap.ABORT)}}G(_h,"MAX_SIZE",1),G(_h,"MAX_MESSAGE_SIZE",1024);class f0e extends Sr{get connectionState(){return this._connectionState}set connectionState(n){n!==this._connectionState&&(this._connectionState=n,n===er.CONNECTED?this.emit(Mt.WS_CONNECTED):n===er.RECONNECTING?this.emit(Mt.WS_RECONNECTING,this._websocketReconnectReason):n===er.CLOSED&&this.emit(Mt.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(n,i){super(),G(this,"_disconnectedReason",void 0),G(this,"_websocketReconnectReason",void 0),G(this,"_connectionState",er.CLOSED),G(this,"reconnectToken",void 0),G(this,"p2pToken",void 0),G(this,"websocket",void 0),G(this,"openConnectionTime",void 0),G(this,"clientId",void 0),G(this,"lastMsgTime",Date.now()),G(this,"uploadCache",[]),G(this,"uploadCacheInterval",void 0),G(this,"rttRolling",new R3(5)),G(this,"pingpongTimer",void 0),G(this,"pingpongTimeoutCount",0),G(this,"joinResponse",void 0),G(this,"multiIpOption",void 0),G(this,"initError",void 0),G(this,"spec",void 0),G(this,"store",void 0),G(this,"_external_signal",void 0),G(this,"onWebsocketMessage",a=>{if(a.data instanceof ArrayBuffer)return void this.emit(Mt.ON_BINARY_DATA,a.data);const l=JSON.parse(a.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const u="res-@".concat(l._id);this.emit(u,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")){switch(l._type){case un.ON_DATA_STREAM:return void this.handleDataStream(l._message);case un.MUTE_AUDIO:case un.MUTE_VIDEO:case un.ON_P2P_LOST:case un.ON_USER_ONLINE:return;case un.ON_USER_OFFLINE:const{uid:u}=l._message;return k.debug("[".concat(this.clientId,"] user-offline uid: ").concat(u)),void this._external_signal.reset(u)}if(this.emit(l._type,l._message),l._type===un.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===un.ON_USER_BANNED)switch(l._message.error_code){case 14:this.close(Ln.UID_BANNED);break;case 15:this.close(Ln.IP_BANNED);break;case 16:this.close(Ln.CHANNEL_BANNED)}if(l._type===un.ON_USER_LICENSE_BANNED)switch(l._message.error_code){case Tt.ERR_LICENSE_MISSING:this.close(Ln.LICENSE_MISSING);break;case Tt.ERR_LICENSE_EXPIRED:this.close(Ln.LICENSE_EXPIRED);break;case Tt.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Ln.LICENSE_MINUTES_EXCEEDED);break;case Tt.ERR_LICENSE_PERIOD_INVALID:this.close(Ln.LICENSE_PERIOD_INVALID);break;case Tt.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Ln.LICENSE_MULTIPLE_SDK_SERVICE);break;case Tt.ERR_LICENSE_ILLEGAL:this.close(Ln.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=n.clientId,this.spec=n,this.store=i,this.websocket=new PI("gateway-".concat(this.clientId),this.spec.retryConfig,!0,Q("JOIN_GATEWAY_USE_DUAL_DOMAIN"),Q("JOIN_GATEWAY_USE_443PORT_ONLY"),i),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===er.CONNECTED&&this.reconnect("retry",zi.OFFLINE)}),this.p2pToken=Xn(6,""),this._external_signal=new _h(this,this.p2pToken)}async request(n,i,a,l){const u=Xn(6,""),h={_id:u,_type:n,_message:i},p=this.websocket.connectionID,m=()=>new Ye((H,B)=>{if(this.connectionState===er.CONNECTED)return H();const $=()=>{this.off(Mt.WS_CLOSED,K),H()},K=()=>{this.off(Mt.WS_CONNECTED,$),B(new we(X.WS_ABORT))};this.once(Mt.WS_CONNECTED,$),this.once(Mt.WS_CLOSED,K)});if(this.connectionState!==er.CONNECTING&&this.connectionState!==er.RECONNECTING||n===Dt.JOIN||n===Dt.REJOIN||await m(),this.websocket.sendMessage(h,!0),l)return;const E=new Ye((H,B)=>{let $=!1;const K=(ce,ge)=>{$=!0,H({isSuccess:ce==="success",message:ge||{}}),this.off(Mt.WS_CLOSED,Y),this.off(Mt.WS_RECONNECTING,Y),this.emit(Mt.REQUEST_SUCCESS,n,i)};this.once("res-@".concat(u),K);const Y=()=>{B(new we(X.WS_ABORT,"type: ".concat(n))),this.off(Mt.WS_CLOSED,Y),this.off(Mt.WS_RECONNECTING,Y),this.off("res-@".concat(u),K)};this.once(Mt.WS_CLOSED,Y),this.once(Mt.WS_RECONNECTING,Y),Ni(Q("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==p||$||(k.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(n)),this.emit(Mt.REQUEST_TIMEOUT,n,i))})});let y=null;try{y=await E}catch(H){if(this.connectionState===er.CLOSED||n===Dt.LEAVE)throw new we(X.WS_ABORT);return!this.spec.forceWaitGatewayResponse||a?H.throw():n===Dt.JOIN||n===Dt.REJOIN?null:(await m(),await this.request(n,i))}if(y.isSuccess)return y.message;const R=Number(y.message.error_code||y.message.code),A=P0(R),D=new we(X.UNEXPECTED_RESPONSE,"".concat(A.desc,": ").concat(y.message.error_str),{code:R,data:y.message,desc:A.desc});return A.action==="success"?y.message:(k.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(n,", error_code: ").concat(R,", message: ").concat(A.desc,", action: ").concat(A.action)),R===Tt.ERR_TOO_MANY_BROADCASTERS?((n===Dt.JOIN||n===Dt.REJOIN)&&(this.initError=D,this.close()),D.throw()):A.action==="failed"?D.throw():A.action==="quit"?(this.initError=D,this.close(),D.throw()):(R===Tt.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=y.message.option,k.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",zi.MULTI_IP)):this.reconnect(A.action,zi.SERVER_ERROR),n===Dt.JOIN||n===Dt.REJOIN?null:await this.request(n,i)))}waitMessage(n,i){return new Ye(a=>{const l=u=>{(!i||i(u))&&(this.off(n,l),a(u))};this.on(n,l)})}uploadWRTCStats(n){if(!this.store.sessionId)return void k.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const i={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:n};this.upload(x0.WRTC_STATS,i)}upload(n,i){const a={_type:n,_message:i};try{this.websocket.sendMessage(a)}catch{const u=Q("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(a),this.uploadCache.length>u&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==er.CONNECTED)return;const h=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(h._type,h._message)},Q("UPLOAD_CACHE_INTERVAL")||2e3))}}send(n,i){const a={_type:n,_message:i};this.websocket.sendMessage(a)}async sendExtensionMessage(n,i,a){return await this._external_signal.send(n,i,a)}init(n){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Ye((i,a)=>{this.once(Mt.WS_CONNECTED,()=>i(this.joinResponse)),this.once(Mt.WS_CLOSED,()=>a(this.initError||new we(X.WS_ABORT))),this.connectionState=er.CONNECTING,this.websocket.init(n).catch(a)})}close(n){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=n||Ln.LEAVE,this.connectionState=er.CLOSED,k.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),this.p2pToken=Xn(6,""),this._external_signal.clear(),this._external_signal=new _h(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(Mt.ABORT_P2P_EXECUTION);const n=await Wi(this,Mt.REQUEST_JOIN_INFO),i=await this.request(Dt.JOIN,n);if(!i)return this.emit(Mt.REPORT_JOIN_GATEWAY,X.TIMEOUT,this.url||""),!1;this.joinResponse=i,this.emit(Mt.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=er.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(n,i){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(n,i)}handleDataStream(n){try{var i;const a=Yd(n.payload),l=new TextDecoder().decode(a),u=JSON.parse(l);"total"in u&&"id"in u||Ke(i=Object.values(Br)).call(i,u._type)?(u._uid=n.uid,this._external_signal.onMessage(u)):this.emit(un.ON_DATA_STREAM,n)}catch{this.emit(un.ON_DATA_STREAM,n)}}handleNotification(n){k.debug("[".concat(this.clientId,"] receive notification: "),n);const i=P0(n.code);if(i.action!=="success"){if(i.action!=="failed")return i.action==="quit"?(i.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Ln.UID_BANNED),void this.close()):void this.reconnect(i.action,zi.SERVER_ERROR);k.error("[".concat(this.clientId,"] ignore error: "),i.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const n=Q("PING_PONG_TIME_OUT"),i=Date.now();this.pingpongTimeoutCount>=n&&(k.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(i-this.lastMsgTime,"ms")),i-this.lastMsgTime>Q("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",zi.TIMEOUT):this.request(Dt.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const a=Date.now()-i;this.rttRolling.add(a),Q("REPORT_STATS")&&this.send(Dt.PING_BACK,{pingpongElapse:a})}).catch(a=>{})}handleWebsocketEvents(){this.websocket.on(qt.RECONNECT_CREATE_CONNECTION,n=>{this.emit(Mt.WS_RECONNECT_CREATE_CONNECTION,n)}),this.websocket.on(qt.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(qt.CLOSED,()=>{this.connectionState=er.CLOSED}),this.websocket.on(qt.FAILED,()=>{this._disconnectedReason=Ln.NETWORK_ERROR,this.connectionState=er.CLOSED}),this.websocket.on(qt.RECONNECTING,n=>{this._websocketReconnectReason=n,this.joinResponse=void 0,this.connectionState===er.CONNECTED?this.connectionState=er.RECONNECTING:this.connectionState=er.CONNECTING}),this.websocket.on(qt.WILL_RECONNECT,(n,i,a)=>{n!=="retry"?(k.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(n)),this.reconnectToken=void 0):k.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),a(n)}),this.websocket.on(qt.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.join().catch(n=>{if(this.emit(Mt.REPORT_JOIN_GATEWAY,n,this.url||""),n instanceof we&&n.code===X.UNEXPECTED_RESPONSE&&n.data.code===Tt.ERR_NO_AUTHORIZED)return k.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",zi.SERVER_ERROR);k.error("[".concat(this.clientId,"] join gateway request failed"),n.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",zi.SERVER_ERROR):(this.initError=n,this.close())})}),this.websocket.on(qt.REQUEST_NEW_URLS,(n,i)=>{Wi(this,Mt.REQUEST_RECOVER,this.multiIpOption).then(n).catch(i)}),this.websocket.on(qt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(un.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}}const p0e={name:"P2PChannel",create:function(t){let{store:n,statsCollector:i}=t;return new h0e(n,i)},createSubmodule:function(t){let{store:n,spec:i}=t;return new f0e(i,n)}};function Q$(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function Z$(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?Q$(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Q$(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}class m0e{constructor(n){G(this,"sessionDesc",void 0),G(this,"localCapabilities",void 0),G(this,"rtpCapabilities",void 0),G(this,"candidates",void 0),G(this,"_originCandidates",void 0),G(this,"iceParameters",void 0),G(this,"dtlsParameters",void 0),G(this,"setup",void 0),G(this,"currentMidIndex",void 0),G(this,"cname",void 0),n=Ir(n);const{iceParameters:i,dtlsParameters:a,candidates:l,rtpCapabilities:u,setup:h,localCapabilities:p,sdkCodec:m,cname:E}=n,y=sa(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=u,this.candidates=l,this._originCandidates=Ir(l),this.iceParameters=i,this.dtlsParameters=a,this.setup=h,this.localCapabilities=p,this.cname=E;for(let R=0;R<y.mediaDescriptions.length;R++){const A=y.mediaDescriptions[R];if(A.attributes.iceUfrag=i.iceUfrag,A.attributes.icePwd=i.icePwd,A.attributes.fingerprints=a.fingerprints,A.attributes.candidates=l,A.attributes.setup=h,A.media.mediaType==="video"){A.media.fmts=u.videoCodecs.map(H=>H.payloadType.toString(10));let D=u.videoCodecs.filter(H=>{var B,$;return(B=H.rtpMap)===null||B===void 0?void 0:Ke($=B.encodingName.toLowerCase()).call($,m)});D.length===0&&(D=u.videoCodecs),A.attributes.payloads=D,A.attributes.extmaps=u.videoExtensions}A.media.mediaType==="audio"&&(A.media.fmts=u.audioCodecs.map(D=>D.payloadType.toString(10)),A.attributes.payloads=u.audioCodecs,A.attributes.extmaps=u.audioExtensions),y.mediaDescriptions[R]=this.mungMediaDesc(A)}this.sessionDesc=y,this.currentMidIndex=y.mediaDescriptions.length-1}toString(){return Fu(this.sessionDesc)}send(n,i,a){const{ssrcs:l,ssrcGroups:u}=oh(i,this.cname),h=this.sessionDesc.mediaDescriptions.find(E=>n===it.VIDEO?E.media.mediaType==="video":E.media.mediaType==="audio"),p=l[0].attributes.label,m=l[0].attributes.mslabel;return h.attributes.ssrcs=h.attributes.ssrcs.concat(l),h.attributes.ssrcGroups=h.attributes.ssrcGroups.concat(u),{id:p,mslabel:m}}batchSend(n){return n.map(i=>{let{kind:a,ssrcMsg:l}=i;return this.send(a,l,void 0)})}stopSending(n){this.sessionDesc.mediaDescriptions.forEach(i=>{const a=[],l=[],u=[];i.attributes.ssrcs.forEach(h=>{Ke(n).call(n,h.attributes.label||"")?u.push(h):a.push(h)}),i.attributes.ssrcGroups.forEach(h=>{var p;Ke(p=u.map(m=>m.ssrcId)).call(p,h.ssrcIds[0])||l.push(h)}),i.attributes.ssrcs=a,i.attributes.ssrcGroups=l})}mute(n){const i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(n){const i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}receive(n,i,a){n.forEach((l,u)=>{const h=l._mediaStreamTrack,p=this.sessionDesc.mediaDescriptions.findIndex(E=>E.attributes.mid===h.kind),m=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[p],l);this.sessionDesc.mediaDescriptions[p]=m})}stopReceiving(n){}updateCandidates(n){const i=this._originCandidates.filter(l=>l.transport==="udp"),a=[];if(i.forEach(l=>{a.push(Z$(Z$({},l),{},{foundation:"tcpcandidate",priority:Number(l.priority)-1+"",transport:"tcp",port:Number(l.port)+90+""}))}),i.length!==0){switch(n){case Zi.TCP_RELAY:this.candidates=a;break;case Zi.UDP_TCP_RELAY:case Zi.RELAY:this.candidates=[...i,...a];break;default:this.candidates=i}for(const l of this.sessionDesc.mediaDescriptions)l.attributes.candidates=this.candidates}}restartICE(n){n=Ir(n),this.iceParameters=n,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=n.iceUfrag,i.attributes.icePwd=n.icePwd})}predictReceivingMids(n){const i=[];for(let a=0;a<n;a++)i.push((this.currentMidIndex+a+1).toString(10));return i}mungRecvMediaDsec(n,i){const a=Ir(n);return lp(a,i),MI(a,i),a}updateRecvMedia(n,i){const a=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===n);if(a!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[a],i);this.sessionDesc.mediaDescriptions[a]=l}}bumpMid(n){this.currentMidIndex+=n}updateTrackLabel(n,i,a){const l=this.sessionDesc.mediaDescriptions.find(h=>n===it.VIDEO?h.attributes.mid==="video":h.attributes.mid==="audio");if(l){const h=l.attributes.ssrcs.find(p=>p.attributes.label===i);var u;h&&(h.attributes.label=a,(u=h.attributes.msid)===null||u===void 0||u.replace(i,a))}}mungMediaDesc(n){const i=Ir(n);return kI(i),function(a){const l=a.attributes.extmaps.find(u=>fS(u.extensionName));l&&a.attributes.extmaps.splice(a.attributes.extmaps.indexOf(l),1),a.attributes.payloads.forEach(u=>{const h=u.rtcpFeedbacks.findIndex(p=>p.type==="transport-cc");h!==-1&&u.rtcpFeedbacks.splice(h,1)})}(i),i}getSSRC(n){for(const i of this.sessionDesc.mediaDescriptions)for(const a of i.attributes.ssrcs)if(a.attributes.label===n)return[a]}}var qn;function eH(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function YS(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?eH(Object(i),!0).forEach(function(a){G(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):eH(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}let g0e=(qn=class Ng extends s6{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map(n=>n.rtpMap&&n.rtpMap.encodingName.toLowerCase()||"").filter(n=>{var i;return Ke(i=Object.keys($_)).call(i,n)}))]}constructor(n,i){super(n,i),G(this,"store",void 0),G(this,"peerConnection",void 0),G(this,"remoteSDP",void 0),G(this,"initialOffer",void 0),G(this,"statsFilter",void 0),G(this,"useRTX",!1),G(this,"localCapabilities",void 0),G(this,"localCandidateCount",0),G(this,"allCandidatesReceived",!1),G(this,"establishPromise",void 0),G(this,"mutex",void 0),this.store=i,this.mutex=new Ji("P2PConnection-mutex",i.clientId),this.peerConnection=new RTCPeerConnection(Ng.resolvePCConfiguration(n),{optional:[{googDscp:!0}]}),this.statsFilter=Yw(this.peerConnection,Q("STATS_UPDATE_INTERVAL"),void 0,Tr()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const n=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!n.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const i=$u(n.sdp),a=k0(n.sdp,{filterRTX:!this.useRTX,filterVideoFec:Q("FILTER_VIDEO_FEC"),filterAudioFec:Q("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=a,this.initialOffer=n,YS(YS({},i),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:a},offerSDP:n.sdp})}catch(n){throw new we(X.GET_LOCAL_CONNECTION_PARAMS_FAILED,n.toString())}}async updateRemoteConnect(){}async connect(n){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new m0e(YS(YS({},n),{},{rtpCapabilities:n.rtpCapabilities.send,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec}));const i=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(i.toString()))}}async updateRemoteRTPCapabilities(n,i){throw new we(X.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}getPreMedia(n){}send(n,i){var a=this;return as(function*(){const l=yield vn(a.mutex.lock());try{if(!a.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const u=n.map(A=>a.peerConnection.addTrack(A._mediaStreamTrack)),h=yield vn(a.peerConnection.createOffer()),p=sa(h.sdp),m=n.map(A=>{const D=A._mediaStreamTrack,H=p.mediaDescriptions.find(B=>B.attributes.mid===D.kind);if(!H)throw new Error("Cannot extract ssrc from mediaDescription.");return function(B,$,K){const Y=B.attributes.ssrcs.filter(ge=>ge.attributes.label===$),ce=B.attributes.ssrcGroups;if(Y.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(ce&&Y.length>1){const ge=ce.find(Ee=>Ee.ssrcIds.indexOf(Y[0].ssrcId)!==-1);return ge?[{ssrcId:ge.ssrcIds[0],rtx:K?ge.ssrcIds[1]:void 0}]:[{ssrcId:Y[0].ssrcId}]}return[{ssrcId:Y[0].ssrcId}]}(H,D.id,a.useRTX)});let E;try{E=yield m}catch(A){throw u.forEach(D=>{Hi()&&D.replaceTrack(null),a.peerConnection.removeTrack(D)}),A}const y=a.mungSendOfferSDP(h.sdp,n);a.remoteSDP.receive(n,i,E);const R=a.remoteSDP.toString();return yield vn(a.peerConnection.setLocalDescription({type:"offer",sdp:y})),yield vn(a.applySendEncodings(u,n)),yield vn(a.peerConnection.setRemoteDescription({type:"answer",sdp:R})),n.map((A,D)=>{const H=A._mediaStreamTrack.id;return{localSSRC:m[D],id:H}})}catch(u){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(u.toString()))}finally{l()}})()}async stopSending(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const i=this.peerConnection.getSenders().filter(u=>{var h;return n.indexOf(((h=u.track)===null||h===void 0?void 0:h.id)||"")!==-1});if(i.length!==n.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");i.map(u=>{Hi()&&u.replaceTrack(null),this.peerConnection.removeTrack(u)});const a=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(a),this.remoteSDP.stopReceiving(n);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(i.toString()))}}async receive(n,i,a,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(n," before remoteSDP created."));const{id:u,mslabel:h}=this.remoteSDP.send(n,i,l),p=new Ye((y,R)=>{const A=setTimeout(()=>{R(new Error("Cannot receive track, id: ".concat(u)))},1e4),D=H=>{const B=En();if((B.name==="Safari"&&Number(B.version)===11||Ao())&&H.track.id!==u&&H.streams[0].id===h){var $;const K=H.streams[0].getTracks()[0];return($=this.remoteSDP)===null||$===void 0||$.updateTrackLabel(n,u,H.track.id),this.peerConnection.removeEventListener("track",D),clearTimeout(A),void y(K)}if(H.track.id===u)return this.peerConnection.removeEventListener("track",D),clearTimeout(A),void y(H.track)};this.peerConnection.addEventListener("track",D)}),m=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:m});const E=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(E),{track:await p,id:u}}catch(u){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(u.toString()))}}async stopReceiving(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(n);const i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const a=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(a)}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}async muteRemote(n){}async unmuteRemote(n){}async muteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getSenders().filter(a=>{var l;return n.indexOf(((l=a.track)===null||l===void 0?void 0:l.id)||"")!==-1});if(i.length!==n.length)throw new Error("sender' length doesn't match mids' length.");i.map(a=>{if(Hi()&&a.track)a.track.enabled=!1;else{const l=a.getParameters();l.encodings.forEach(u=>u.active=!1),a.setParameters(l)}})}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getSenders().filter(u=>{var h;return n.indexOf(((h=u.track)===null||h===void 0?void 0:h.id)||"")!==-1});if(i.length!==n.length)throw new Error("Senders' length doesn't match mids' length.");i.map(async u=>{if(Hi()&&u.track)u.track.enabled=!0;else{const h=u.getParameters();h.encodings.forEach(p=>p.active=!0),await u.setParameters(h)}});const a=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(a);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(i.toString()))}}restartICE(n){var i=this;return as(function*(){const a=yield vn(i.mutex.lock("From P2PConnection.restartICE"));try{if(!i.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");const l=yn().supportPCSetConfiguration;if(n===Zi.RELAY&&!l)return;if(l){const E=i.peerConnection.getConfiguration(),y=n===Zi.RELAY?"relay":"all";E.iceTransportPolicy!==y&&(k.debug("[".concat(i.store.clientId,"] restartICE change iceTransportPolicy from [").concat(E.iceTransportPolicy,"] to [").concat(y,"]")),E.iceTransportPolicy=y,i.peerConnection.setConfiguration(E))}n!==Zi.RELAY&&i.remoteSDP.updateCandidates(n);const u=yield vn(i.peerConnection.createOffer({iceRestart:!0}));if(!u.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const h=$u(u.sdp),{remoteIceParameters:p}=yield h.iceParameters;i.remoteSDP.restartICE(p);const m=i.remoteSDP.toString();yield vn(i.peerConnection.setLocalDescription(u)),yield vn(i.peerConnection.setRemoteDescription({type:"answer",sdp:m}))}catch(l){k.warning("[".concat(i.store.clientId,"] restart ICE failed, abort operation"),l)}finally{a()}})()}close(){var n;this.peerConnection.close(),(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(n){return this.statsFilter.getVideoIsReady(n)}async updateEncoderConfig(n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const a=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(a.sdp,[i]);this.remoteSDP.updateRecvMedia(i._mediaStreamTrack.kind,i);const u=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:u})}catch(a){throw new we(X.EXCHANGE_SDP_FAILED,a.toString())}}async updateSendParameters(n,i){const a=this.peerConnection.getSenders().filter(l=>{var u;return((u=l.track)===null||u===void 0?void 0:u.id)===n});a.length===1&&await this.applySendEncodings(a,[i])}setStatsRemoteVideoIsReady(n,i){this.statsFilter.setVideoIsReady2(n,i)}async replaceTrack(n,i){const a=this.peerConnection.getSenders().find(l=>{var u;return((u=l.track)===null||u===void 0?void 0:u.id)===i});a&&await a.replaceTrack(n._mediaStreamTrack)}createDataChannels(n,i){throw new we(X.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(n){throw new we(X.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var n;(n=this.onICEConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=n=>{n.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,k.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,k.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},Q("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(n){const i={iceServers:[],sdpSemantics:"plan-b"};return n.iceServers?i.iceServers=n.iceServers:n.turnServer&&n.turnServer.mode!=="off"&&(C0(n.turnServer.servers)?i.iceServers=n.turnServer.servers:(i.iceServers&&i.iceServers.push(...Ng.turnServerConfigToIceServers(n.turnServer.servers)),Q("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&n.turnServer.serversFromGateway&&i.iceServers.push(...Ng.turnServerConfigToIceServers(n.turnServer.serversFromGateway)),n.turnServer.servers.concat(n.turnServer.serversFromGateway||[]).forEach(a=>{a.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(n){const i=[];return n.forEach(a=>{a.security?a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}):(a.udpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.udpport,"?transport=udp")}),a.tcpport&&i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=tcp")}))}),i}async updateRtpSenderEncodings(n,i){var a;if(i||(i=this.peerConnection.getSenders().find(E=>{var y;return((y=E.track)===null||y===void 0?void 0:y.id)===n._mediaStreamTrack.id})),!i)return k.warn("[".concat(n.getTrackId(),"] no rtpSender found}"));if(!yn().supportSetRtpSenderParameters)return k.warn("Browser not support set rtp-sender parameters");const l={},u={};if(n instanceof sr)switch(n._optimizationMode){case"motion":l.degradationPreference="maintain-framerate";break;case"detail":l.degradationPreference="maintain-resolution";break;default:l.degradationPreference="balanced"}if(Q("DSCP_TYPE")&&Hl()){var h;const E=Q("DSCP_TYPE");Ke(h=["very-low","low","medium","high"]).call(h,E)&&(u.networkPriority=E)}const p=i.getParameters(),m=(a=p.encodings)===null||a===void 0?void 0:a[0];m&&Object.assign(m,u),Object.assign(p,l),k.debug("[".concat(n.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(p.encodings))),await i.setParameters(p)}async applySendEncodings(n,i){try{if(!yn().supportSetRtpSenderParameters||n.length!==i.length)return;for(let a=0;a<n.length;a++){const l=n[a],u=i[a];l&&u&&await this.updateRtpSenderEncodings(u,l)}}catch{k.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(n,i){const a=sa(n);return i.forEach((l,u)=>{const h=l._mediaStreamTrack,p=a.mediaDescriptions.find(m=>m.attributes.mid===h.kind);p&&lp(p,l)}),Fu(a)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=n=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoReceived=n=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstAudioDecoded=n=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,n)},this.statsFilter.onFirstVideoDecoded=(n,i,a)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,n,i,a)},this.statsFilter.onSelectedLocalCandidateChanged=(n,i)=>{var a;(a=this.onSelectedLocalCandidateChanged)===null||a===void 0||a.call(this,n,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(n,i)=>{var a;(a=this.onSelectedRemoteCandidateChanged)===null||a===void 0||a.call(this,n,i)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const i=this.remoteSDP.batchSend(n).map((u,h)=>{let{id:p,mslabel:m}=u;const{kind:E}=n[h];return new Ye((y,R)=>{const A=setTimeout(()=>{R(new Error("Cannot receive track, id: ".concat(p)))},1e4),D=H=>{const B=En();if(B.name==="Safari"&&Number(B.version)===11&&H.track.id!==p&&H.streams[0].id===m){var $;const K=H.streams[0].getTracks()[0];return($=this.remoteSDP)===null||$===void 0||$.updateTrackLabel(E,p,H.track.id),this.peerConnection.removeEventListener("track",D),clearTimeout(A),void y({track:K,id:p})}if(H.track.id===p)return this.peerConnection.removeEventListener("track",D),clearTimeout(A),void y({track:H.track,id:p})};this.peerConnection.addEventListener("track",D)})}),a=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:a});const l=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(l),await Ye.all(i)}catch(i){throw new we(X.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(i.toString()))}}async getRemoteSSRC(n){if(!this.remoteSDP)return;const i=this.remoteSDP.getSSRC(n);return i==null?void 0:i[0].ssrcId}setConfiguration(n){if(yn().supportPCSetConfiguration){const i=Ng.resolvePCConfiguration(n);this.peerConnection.setConfiguration(i)}}},st(qn.prototype,"connect",[ps],Object.getOwnPropertyDescriptor(qn.prototype,"connect"),qn.prototype),st(qn.prototype,"stopSending",[ps],Object.getOwnPropertyDescriptor(qn.prototype,"stopSending"),qn.prototype),st(qn.prototype,"receive",[ps],Object.getOwnPropertyDescriptor(qn.prototype,"receive"),qn.prototype),st(qn.prototype,"stopReceiving",[ps],Object.getOwnPropertyDescriptor(qn.prototype,"stopReceiving"),qn.prototype),st(qn.prototype,"muteRemote",[ps],Object.getOwnPropertyDescriptor(qn.prototype,"muteRemote"),qn.prototype),st(qn.prototype,"unmuteRemote",[ps],Object.getOwnPropertyDescriptor(qn.prototype,"unmuteRemote"),qn.prototype),st(qn.prototype,"muteLocal",[ps],Object.getOwnPropertyDescriptor(qn.prototype,"muteLocal"),qn.prototype),st(qn.prototype,"unmuteLocal",[ps],Object.getOwnPropertyDescriptor(qn.prototype,"unmuteLocal"),qn.prototype),st(qn.prototype,"close",[ps],Object.getOwnPropertyDescriptor(qn.prototype,"close"),qn.prototype),st(qn.prototype,"updateEncoderConfig",[ps],Object.getOwnPropertyDescriptor(qn.prototype,"updateEncoderConfig"),qn.prototype),st(qn.prototype,"updateSendParameters",[ps],Object.getOwnPropertyDescriptor(qn.prototype,"updateSendParameters"),qn.prototype),st(qn.prototype,"replaceTrack",[ps],Object.getOwnPropertyDescriptor(qn.prototype,"replaceTrack"),qn.prototype),st(qn.prototype,"getRemoteSSRC",[ps],Object.getOwnPropertyDescriptor(qn.prototype,"getRemoteSSRC"),qn.prototype),qn);function ps(t,n,i){const a=t[n];if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,u=await l.lock("Locking from P2PConnection.".concat(n));try{for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return await a.apply(this,p)}finally{u()}},i}const v0e={name:"PlanBConnection",create:function(t){let{store:n,spec:i}=t;return new g0e(i,n)}},E0e={interceptLocalAudioFrame:async function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!yn().supportWebRTCEncodedTransform)return void k.warning("browser not support audio encoded transform");if(J_.has(t)||!t.track)return;const i={track:t.track};if($l()){if(!t.createEncodedStreams)return void k.warning("browser not support createEncodedStreams() API");let l=null;try{l=t.createEncodedStreams()}catch(h){return void k.error("create audio-encoded-streams error",h&&h.message)}const u=new TransformStream({transform(h,p){i.controller||(i.controller=p),t.track&&t.track.id!==i.track.id&&(k.debug("audio track changed: ".concat(i.track.id," => ").concat(t.track.id)),i.track.removeEventListener("ended",a),i.track=t.track,i.track.addEventListener("ended",a));const m=n.metadata&&n.metadata();m?function(E,y){const{chunk:R,controller:A}=y,D=Q("ENABLE_AUDIO_PTS_METADATA")?Kl.AUDIO_64_BIT_PTS:Kl.METADATA;R.data=function(H,B,$){const K=$.byteLength,Y=K+_I+W5,ce=vI+EI+Y,ge=new ArrayBuffer(H.byteLength+ce),Ee=new DataView(ge);Ee.setUint8(0,z5),Ee.setUint16(1,Y),Ee.setUint8(3,B),Ee.setUint16(4,K);for(let Te=0;Te<K;Te++)Ee.setUint8(6+Te,$[Te]);const me=new Uint8Array(Ee.buffer);return me.set(new Uint8Array(H),ce),me.buffer}(R.data,D,E),A.enqueue(R)}(m,{sender:t,chunk:h,controller:p}):p.enqueue(h)}});l.readable.pipeThrough(u).pipeTo(l.writable)}else if(Hi()){if(typeof RTCRtpScriptTransform>"u")return void k.warning("browser not support RTCRtpScriptTransform");const l=X_(),u=new MessageChannel;await new Ye(p=>l.onmessage=m=>{m.data==="registered"&&p(void 0)});const h=new RTCRtpScriptTransform(l,{name:"audio-metadata-tx",port:u.port2},[u.port2]);t.transform=h,await new Ye(p=>l.onmessage=m=>{m.data==="started"&&p(void 0)}),u.port1.onmessage=p=>{var m;if(p.data.transformed&&t.track&&((m=t.track)===null||m===void 0?void 0:m.id)!==i.track.id)k.debug("audio track changed: ".concat(i.track.id," => ").concat(t.track.id)),i.track.removeEventListener("ended",a),i.track=t.track,i.track.addEventListener("ended",a);else if(p.data.getMetadata){const E=n.metadata&&n.metadata();E&&u.port1.postMessage({metadata:E})}},i.worker=l}function a(){if(t.track){if(this.id!==t.track.id)return;t.track.removeEventListener("ended",a)}const l=J_.get(t);if(l){J_.delete(t);try{var u,h;(u=l.controller)===null||u===void 0||u.terminate(),(h=l.worker)===null||h===void 0||h.terminate()}catch(p){k.warning(p&&p.message)}}}J_.set(t,i),t.track.addEventListener("ended",a)},interceptRemoteAudioFrame:async function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!yn().supportWebRTCEncodedTransform)return void k.warning("browser not support audio encoded transform");if(rS.has(t))return;const i={track:t.track,onMetadata:n.onMetadata};if($l()){if(!t.createEncodedStreams)return void k.warning("browser not support createEncodedStreams() API");Nw(On.CHROME,87,116)||(n.enableTopn=!1);let l=null;try{l=t.createEncodedStreams()}catch(h){return void k.error("create audio-encoded-streams error",h&&h.message)}const u=new TransformStream({transform(h,p){i.controller||(i.controller=p),t.track&&t.track.id!==i.track.id&&(k.debug("audio track changed: ".concat(i.track.id," => ").concat(t.track.id)),i.track.removeEventListener("ended",a),i.track=t.track,i.track.addEventListener("ended",a)),n.enableTopn?function(m,E,y){var R;const A=G5(new DataView(E.data));if(!A)return y.enqueue(E);const D=m.track.id;tfe.set(D,m.track);const H=(R=A.tlv.find(ge=>ge.tag===Kl.AUDIO_LEVEL))===null||R===void 0?void 0:R.value;let B=0;typeof H=="number"&&(B=127-H);const $=Math.round(Math.pow(10,B/60)-1),{selected:K,speaker:Y}=function(ge,Ee){let me=np.get(ge);if(me||(me=function(Te){const Me=new q5;return np.set(Te,Me),bc||(bc=new Zhe(Q("TOPN_SILENCE_THRESHOLD")||500),bc.on("ActiveSpeakerChanged",Xe=>{Xe!=null&&(eS=Xe)})),bc.addSpeakers([Me]),Me}(ge)),np.size<=Y5)return{selected:!0,speaker:me};if(!bc)throw new Error("no active speaker detector");return bc.levelChanged(me.id,Ee),nh=bc.loudest.map(Te=>Te.id),eS&&!Ke(nh).call(nh,eS)&&nh.length>=Y5&&nh.pop(),{selected:Ke(nh).call(nh,me.id)||me.id===eS,speaker:me}}(m,$),ce=function(ge,Ee,me){const Te=Tc.get(ge)||new efe(ge,Ee);return Te.score=me,Tc.set(ge,Te),function(Me){if(tS.set(Me,!0),!nS)return void(nS=Date.now());const Xe=Date.now();Xe-nS>1e3&&(tS.get(Me)?tS.set(Me,!1):(X5(Me),tS.delete(Me)),nS=Xe)}(ge),Te}(D,m.track,Y.energyScore);ce.addSample(K),ce.active&&(E.data=A.frame.buffer,y.enqueue(E))}(t,h,p):n.enableMetadata?function(m,E,y){const R=G5(new DataView(m.data));if(!R)return E.enqueue(m);const A=R.tlv.find(D=>D.tag===Kl.METADATA||D.tag===Kl.AUDIO_64_BIT_PTS);A&&y&&A.value instanceof Uint8Array&&y(A.value),m.data=R.frame.buffer,E.enqueue(m)}(h,p,n.onMetadata):p.enqueue(h)}});l.readable.pipeThrough(u).pipeTo(l.writable)}else if(Hi()){if(typeof RTCRtpScriptTransform>"u")return void k.warning("browser not support RTCRtpScriptTransform");const l=X_(),u=new MessageChannel;await new Ye(p=>l.onmessage=m=>{m.data==="registered"&&p(void 0)});const h=new RTCRtpScriptTransform(l,{name:"audio-metadata-rx",port:u.port2},[u.port2]);t.transform=h,await new Ye(p=>l.onmessage=m=>{m.data==="started"&&p(void 0)}),u.port1.onmessage=p=>{var m;p.data.transformed&&t.track&&((m=t.track)===null||m===void 0?void 0:m.id)!==i.track.id?(k.debug("audio track changed: ".concat(i.track.id," => ").concat(t.track.id)),i.track.removeEventListener("ended",a),i.track=t.track,i.track.addEventListener("ended",a)):p.data.metadata&&i.onMetadata&&i.onMetadata(p.data.metadata)},i.worker=l}function a(){t.track.removeEventListener("ended",a),function(l){const u=rS.get(l);if(u){(function(m){const E=np.get(m);E&&(np.delete(m),bc&&(bc.removeSpeakers([E]),np.size===0&&(bc.destroy(),bc=null)))})(l),X5(l.track.id),rS.delete(l);try{var h,p;(h=u.controller)===null||h===void 0||h.terminate(),(p=u.worker)===null||p===void 0||p.terminate()}catch(m){k.warning(m&&m.message)}}}(t)}rS.set(t,i),t.track.addEventListener("ended",a)},interceptLocalVideoFrame:async function(t,n){if(!yn().supportWebRTCEncodedTransform)return void k.warning("browser not support video encoded transform");if(iS.has(t)||!t.track)return;const i={track:t.track};if($l()){if(!t.createEncodedStreams)return void k.warning("browser not support createEncodedStreams() API");let l=null;try{l=t.createEncodedStreams()}catch(p){return void k.error("create video-encoded-streams error",p&&p.message)}const u=[];n.on("sei-to-send",p=>{u.push(p)});const h=new TransformStream({transform(p,m){i.controller||(i.controller=m),t.track&&t.track.id!==i.track.id&&(k.debug("video track changed: ".concat(i.track.id," => ").concat(t.track.id)),i.track.removeEventListener("ended",a),i.track=t.track,i.track.addEventListener("ended",a));const E=u.shift();E&&(p.data=function(y,R){const A=function(Y){const ce=Y.length;let ge=[],Ee=0;for(;Ee<ce;)Ee+2<ce&&Y[Ee]===0&&Y[Ee+1]===0&&(Y[Ee+2]===0||Y[Ee+2]===1||Y[Ee+2]===2||Y[Ee+2]===3)?(ge.push(Y[Ee],Y[Ee+1],3,Y[Ee+2]),Ee+=3):(ge.push(Y[Ee]),Ee++);return new Uint8Array(ge)}(R),D=A.length,H=Math.floor(D/255),B=D%255,$=new Uint8Array(6+H+1+D+y.byteLength);$[0]=0,$[1]=0,$[2]=0,$[3]=1,$[4]=6,$[5]=101;let K=0;for(;K<H;)$[6+K]=255,K++;return $[6+K]=B,K++,$.set(A,6+K),$.set(new Uint8Array(y),6+K+D),$.buffer}(p.data,E)),m.enqueue(p)}});l.readable.pipeThrough(h).pipeTo(l.writable)}else{if(!Hi())return;{if(typeof RTCRtpScriptTransform>"u")return void k.warning("browser not support RTCRtpScriptTransform");const l=X_(),u=new MessageChannel;await new Ye(p=>l.onmessage=m=>{m.data==="registered"&&p(void 0)});const h=new RTCRtpScriptTransform(l,{name:"sei-tx",port:u.port2},[u.port2]);t.transform=h,await new Ye(p=>l.onmessage=m=>{m.data==="started"&&p(void 0)}),n.on("sei-to-send",p=>{u.port1.postMessage({sei:p})}),u.port1.onmessage=p=>{var m;p.data.transformed&&t.track&&((m=t.track)===null||m===void 0?void 0:m.id)!==i.track.id&&(k.debug("video track changed: ".concat(i.track.id," => ").concat(t.track.id)),i.track.removeEventListener("ended",a),i.track=t.track,i.track.addEventListener("ended",a))},i.worker=l}}function a(){if(t.track){if(this.id!==t.track.id)return;t.track.removeEventListener("ended",a)}const l=iS.get(t);if(l){iS.delete(t);try{var u,h;(u=l.controller)===null||u===void 0||u.terminate(),(h=l.worker)===null||h===void 0||h.terminate()}catch(p){k.warning(p&&p.message)}}}iS.set(t,i),t.track.addEventListener("ended",a)},interceptRemoteVideoFrame:async function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!yn().supportWebRTCEncodedTransform)return void k.warning("browser not support video encoded transform");if(!t.track)return;if(O0.has(t)){const l=O0.get(t);return void(l&&(l.onSei=n.onSei))}const i={track:t.track,onSei:n.onSei};if($l()){if(!t.createEncodedStreams)return void k.warning("browser not support createEncodedStreams() API");let l=null;try{l=t.createEncodedStreams()}catch(h){return void k.error("create video-encoded-streams error",h&&h.message)}const u=new TransformStream({transform(h,p){i.controller||(i.controller=p),t.track&&t.track.id!==i.track.id&&(k.debug("video track changed: ".concat(i.track.id," => ").concat(t.track.id)),i.track.removeEventListener("ended",a),i.track=t.track,i.track.addEventListener("ended",a));const m=function(E){const y=new DataView(E.data);let R=0;for(;R+4<E.data.byteLength;){if(y.getUint8(R+0)===0&&y.getUint8(R+1)===0&&y.getUint8(R+2)===0&&y.getUint8(R+3)===1&&y.getUint8(R+4)===6){let A=R+6,D=0,H=0;for(;(H=y.getUint8(A++))===255;)D+=255;D+=H;const B=nfe(E.data,A,D);return new Uint8Array(B)}R++}return null}(h);m&&i.onSei&&i.onSei(m),p.enqueue(h)}});l.readable.pipeThrough(u).pipeTo(l.writable)}else if(Hi()){if(typeof RTCRtpScriptTransform>"u")return void k.warning("browser not support RTCRtpScriptTransform");const l=X_(),u=new MessageChannel;await new Ye(p=>l.onmessage=m=>{m.data==="registered"&&p(void 0)});const h=new RTCRtpScriptTransform(l,{name:"sei-rx",port:u.port2},[u.port2]);t.transform=h,await new Ye(p=>l.onmessage=m=>{m.data==="started"&&p(void 0)}),u.port1.onmessage=p=>{var m;p.data.transformed&&t.track&&((m=t.track)===null||m===void 0?void 0:m.id)!==i.track.id?(k.debug("video track changed: ".concat(i.track.id," => ").concat(t.track.id)),i.track.removeEventListener("ended",a),i.track=t.track,i.track.addEventListener("ended",a)):p.data.sei&&i.onSei&&i.onSei(p.data.sei)},i.worker=l}function a(){if(t.track){if(this.id!==t.track.id)return;t.track.removeEventListener("ended",a)}(function(l){const u=O0.get(l);if(u){O0.delete(l);try{var h,p;(h=u.controller)===null||h===void 0||h.terminate(),(p=u.worker)===null||p===void 0||p.terminate()}catch(m){k.warning(m&&m.message)}}})(t)}O0.set(t,i),t.track.addEventListener("ended",a)}},_0e={name:"InterceptFrame",create:()=>E0e};Xw(),Vn("PROCESS_ID","process-".concat(Xn(8,""),"-").concat(Xn(4,""),"-").concat(Xn(4,""),"-").concat(Xn(4,""),"-").concat(Xn(12,""))),function(){let t;try{t=window.localStorage.getItem("websdk_ng_global_parameter")}catch(n){return void k.error("Error loading sdk config",n.message)}if(t)try{const n=JSON.parse(window.atob(t)),i=Date.now();k.debug("Loading global parameters from cache",n),Object.keys(n).forEach(a=>{if(Object.prototype.hasOwnProperty.call(ar,a)){const{value:l,expires:u}=n[a];if(u&&u<=i)return;Cc[a]=l,ar[a]=l}})}catch(n){k.error("Error loading mutableParamsCache: ".concat(t),n.message)}}(),Array.isArray(Cc.AREAS)&&Cc.AREAS.length>0&&jI(Cc.AREAS,!0);const tH=(t,n,i)=>{k.debug("setParameter key:".concat(t,", value:").concat(JSON.stringify(n))),Vn(t,n,i)};Hu($me,!1),Hu(Wme,!1),Hu(wpe,!1),Hu(n0e,!1),Hu(Bme,!1),Hu(p0e,!1),Hu(v0e,!1),Hu(_0e,!1);const ni=function(t){const n=new Sr,i=t,a={getListeners:n.getListeners.bind(n),on:(l,u)=>(function(h,p){h===dl.SECURITY_POLICY_VIOLATION&&kj(p,!0)}(l,u),n.on.bind(n)(l,u)),addListener:n.addListener.bind(n),once:n.once.bind(n),off:n.off.bind(n),removeAllListeners:n.removeAllListeners.bind(n),emit:n.emit.bind(n),safeEmit:n.safeEmit.bind(n)};return Lj(Lj({},i),a)}({__TRACK_LIST__:Gf,VERSION:ss,BUILD:Zw,ESM_BUNDLER:!1,ESM:!1,UMD:!0,DEV:!1,setParameter:tH,getParameter:Q,getSupportedCodec:async function(){let t={audio:[],video:[]};try{let n=new RTCPeerConnection;const i=await async function(a){let l;return yn().supportUnifiedPlan?(a.addTransceiver("video",{direction:"recvonly"}),a.addTransceiver("audio",{direction:"recvonly"}),l=(await a.createOffer()).sdp):l=(await a.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})).sdp,l}(n);if(!i)return t;n.close(),n=null,t=function(a){const l={video:[],audio:[]};return a.match(/ VP8/i)&&l.video.push("VP8"),a.match(/ VP9/i)&&l.video.push("VP9"),a.match(/ AV1/i)&&l.video.push("AV1"),a.match(/ H264/i)&&l.video.push("H264"),a.match(/ H265/i)&&l.video.push("H265"),a.match(/ opus/i)&&l.audio.push("OPUS"),a.match(/ PCMU/i)&&l.audio.push("PCMU"),a.match(/ PCMA/i)&&l.audio.push("PCMA"),a.match(/ G722/i)&&l.audio.push("G722"),l}(i)}catch(n){throw new ye(X.CREATE_OFFER_FAILED,n.toString&&n.toString()).print()}return t},checkSystemRequirements:function(){const t=dt.reportApiInvoke(null,{name:ei.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:wr.TRACER});let n=!1;try{const u=window.RTCPeerConnection,h=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,p=window.WebSocket;n=!!(u&&h&&p),n&&kw()&&e3(75)&&new u().close()}catch(u){return k.error("check system requirement failed: ",u),!1}let i=!1;const a=En();a.name===On.CHROME&&Number(a.version)>=58&&(Sc.engine.name!=="WebKit"||function(){const u=En();if(D_()){if(u.os===Ei.MAC_OS)return!0;if(u.os===Ei.IOS){const h=Sc.os.version&&Sc.os.version.split(".");if(h&&Number(h[0])===14&&h[1]&&Number(h[1])>=3||h&&Number(h[0])>14)return!0}}return!1}())&&(i=!0),(a.name===On.FIREFOX&&Number(a.version)>=56||a.name===On.OPERA&&Number(a.version)>=45||a.name===On.SAFARI&&Number(a.version)>=11||a.name==="WebKit"&&(Ao()||Vs())&&a.osVersion&&Number(a.osVersion.split(".")[0])>=11||a3()||En().name===On.QQ)&&(i=!0),k.debug("checkSystemRequirements, api:",n,"browser",i);const l=n&&i;return t.onSuccess(l),l},getDevices:function(t){return Wa.enumerateDevices(!0,!0,t)},getMicrophones:function(t){return Wa.getRecordingDevices(t)},getCameras:function(t){return Wa.getCamerasDevices(t)},getElectronScreenSources:eV,getPlaybackDevices:function(t){return Wa.getSpeakers(t)},createClient:function(){var t;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const i=Xn(5,"client-"),a=dt.reportApiInvoke(null,{id:i,name:ei.CREATE_CLIENT,options:[n],tag:wr.TRACER});try{(function(l){mi(l.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),mi(l.mode,"config.mode",["rtc","live","p2p"]),l.audioCodec!==void 0&&mi(l.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),l.proxyServer!==void 0&&xi(l.proxyServer,"config.proxyServer",1,1e4),l.turnServer!==void 0&&p3(l.turnServer),l.httpRetryConfig!==void 0&&f3(l.httpRetryConfig),l.websocketRetryConfig!==void 0&&f3(l.websocketRetryConfig)})(n)}catch(l){throw a.onError(l),l}return(n3(16,0,!0)||r3(16,0,!0))&&(n.codec==="vp9"&&(n.codec="vp8",k.debug("browser not support vp9, force use vp8")),Vn("UNSUPPORTED_VIDEO_CODEC",["vp9"])),n.audioCodec===void 0&&(n.audioCodec="opus"),a.onSuccess(),new Ipe(qs(qs({forceWaitGatewayResponse:!0},n),{},{role:Ke(t=["rtc","p2p"]).call(t,n.mode)?"host":n.role||"audience"}),i)},createCameraVideoTrack:async function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=Q("CAMERA_CAPTURE_CONFIG"),i=Xn(8,"track-cam-"),a=dt.reportApiInvoke(null,{id:i,tag:wr.TRACER,name:ei.CREATE_CAM_VIDEO_TRACK,options:[fr({},t),n]});n&&(t.encoderConfig=n);const l=q_(t);let u=null;k.info("start create camera video track with config",JSON.stringify(t),"trackId",i);try{u=(await za({video:l},i)).getVideoTracks()[0]||null}catch(p){throw a.onError(p),p}if(!u){const p=new we(X.UNEXPECTED_ERROR,"can not find track in media stream");return a.onError(p),p.throw(k)}t.optimizationMode&&gI(i,u,t,sl(t.encoderConfig));const h=new mI(u,t,l,t.scalabiltyMode?z_(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,i);return a.onSuccess(h.getTrackId()),k.info("create camera video success, trackId:",i),h},createCustomVideoTrack:function(t){const n=Xn(8,"track-cus-"),i=dt.reportApiInvoke(null,{id:n,tag:wr.TRACER,name:ei.CREATE_CUSTOM_VIDEO_TRACK,options:[t]}),a=new sr(t.mediaStreamTrack,{width:t.width,height:t.height,frameRate:t.frameRate,bitrateMax:t.bitrateMax,bitrateMin:t.bitrateMin},t.scalabiltyMode?z_(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,n,[Jn.CUSTOM_TRACK]);return i.onSuccess(a.getTrackId()),k.info("create custom video track success with config",t,"trackId",a.getTrackId()),a},createScreenVideoTrack:async function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable";const i=typeof n=="object"?function(A){return uV(A)}(n):void 0;i&&(n="auto");const a=Xn(8,"track-scr-v-"),l=dt.reportApiInvoke(null,{id:a,tag:wr.TRACER,name:ei.CREATE_SCREEN_VIDEO_TRACK,options:[fr({},t),n]});t.encoderConfig?typeof t.encoderConfig=="string"||t.encoderConfig.width&&t.encoderConfig.height||(t.encoderConfig.width={max:1920},t.encoderConfig.height={max:1080}):t.encoderConfig="1080p_2";const u=function(A){const D={};A.screenSourceType&&(D.mediaSource=A.screenSourceType),A.extensionId&&$l()&&(D.extensionId=A.extensionId);const{displaySurface:H,selfBrowserSurface:B,surfaceSwitching:$,systemAudio:K,preferCurrentTab:Y}=A;(E0(107)||Pw(107)||Dw(93))&&(H&&(mi(H,"displaySurface",["browser","window","monitor"]),D.displaySurface=H),B?(mi(B,"selfBrowserSurface",["exclude","include"]),D.selfBrowserSurface=B):D.selfBrowserSurface="include",$&&(mi($,"surfaceSwitching",["exclude","include"]),D.surfaceSwitching=$)),(E0(105)||Pw(105)||Dw(91))&&K&&(mi(K,"systemAudio",["exclude","include"]),D.systemAudio=K),(E0(94)||Pw(94)||Dw(80))&&Y&&(D.preferCurrentTab=!0),A.electronScreenSourceId&&(D.sourceId=A.electronScreenSourceId);const ce=A.encoderConfig?iI(A.encoderConfig):null;return D.mandatory={chromeMediaSource:"desktop",maxWidth:ce?ce.width:void 0,maxHeight:ce?ce.height:void 0},ce&&(ce.frameRate&&(typeof ce.frameRate=="number"?(D.mandatory.maxFrameRate=ce.frameRate,D.mandatory.minFrameRate=ce.frameRate):(D.mandatory.maxFrameRate=ce.frameRate.max||ce.frameRate.ideal||ce.frameRate.exact||void 0,D.mandatory.minFrameRate=ce.frameRate.min||ce.frameRate.ideal||ce.frameRate.exact||void 0),D.frameRate=ce.frameRate),ce.width&&(D.width=ce.width),ce.height&&(D.height=ce.height)),D}(t);let h=null,p=null;const m=yn();if(!m.supportShareAudio&&n==="enable"){const A=new we(X.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return l.onError(A),A.throw(k)}k.info("start create screen video track with config",t,"withAudio",n,"trackId",a);const E=m.supportShareAudio&&n!=="disable";try{const A=await za({screen:u,screenAudio:E?i||!0:void 0},a);h=A.getVideoTracks()[0]||null,p=A.getAudioTracks()[0]||null}catch(A){throw l.onError(A),A}if(!h){const A=new we(X.UNEXPECTED_ERROR,"can not find track in media stream");return l.onError(A),A.throw(k)}if(!p&&n==="enable"){h&&h.stop();const A=new we(X.SHARE_AUDIO_NOT_ALLOWED);return l.onError(A),A.throw(k)}t.optimizationMode||(t.optimizationMode="detail"),t.optimizationMode&&(gI(a,h,t,t.encoderConfig&&iI(t.encoderConfig)||void 0),t.encoderConfig&&typeof t.encoderConfig!="string"&&(t.encoderConfig.bitrateMin=t.encoderConfig.bitrateMax));const y=new sr(h,t.encoderConfig?iI(t.encoderConfig):{},t.scalabiltyMode?z_(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,a,[Jn.SCREEN_TRACK]);if(!p)return l.onSuccess(y.getTrackId()),k.info("create screen video track success","video:",y.getTrackId()),y;const R=new Nr(p,void 0,Xn(8,"track-scr-a-"),!1);return l.onSuccess([y.getTrackId(),R.getTrackId()]),k.info("create screen video track success","video:",y.getTrackId(),"audio:",R.getTrackId()),[y,R]},createMicrophoneAndCameraTracks:async function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=Q("CAMERA_CAPTURE_CONFIG"),a=Xn(8,"track-mic-"),l=Xn(8,"track-cam-"),u=dt.reportApiInvoke(null,{id:"".concat(a,"-").concat(l),tag:wr.TRACER,name:ei.CREATE_MIC_AND_CAM_TRACKS,options:[t,n,i]});i&&(n.encoderConfig=i);const h=q_(n),p=dV(t);let m=null,E=null;k.info("start create camera video track(".concat(l,") and microphone audio track(").concat(a,") with config, audio: ").concat(JSON.stringify(t),", video: ").concat(JSON.stringify(n)));try{const A=await za({audio:p,video:h},"".concat(a,"-").concat(l));m=A.getAudioTracks()[0],E=A.getVideoTracks()[0]}catch(A){throw u.onError(A),A}if(!m||!E){const A=new we(X.UNEXPECTED_ERROR,"can not find tracks in media stream");return u.onError(A),A.throw(k)}n.optimizationMode&&gI(l,E,n,sl(n.encoderConfig));const y=new Y_(m,t,p,a),R=new mI(E,n,h,n.scalabiltyMode?z_(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,l);return u.onSuccess([y.getTrackId(),R.getTrackId()]),k.info("create camera video track(".concat(l,") and microphone audio track(").concat(a,") success")),[y,R]},createMicrophoneAudioTrack:async function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=Xn(8,"track-mic-"),i=dt.reportApiInvoke(null,{id:n,tag:wr.TRACER,name:ei.CREATE_MIC_AUDIO_TRACK,options:[t]}),a=dV(t);let l=null;k.info("start create microphone audio track with config",JSON.stringify(t),"trackId",n);try{l=(await za({audio:a},n)).getAudioTracks()[0]||null}catch(h){throw i.onError(h),h}if(!l){const h=new we(X.UNEXPECTED_ERROR,"can not find track in media stream");return i.onError(h),h.throw(k)}const u=new Y_(l,t,a,n);return i.onSuccess(u.getTrackId()),k.info("create microphone audio track success, trackId:",n),u},createCustomAudioTrack:function(t){const n=Xn(8,"track-cus-"),i=dt.reportApiInvoke(null,{id:n,tag:wr.TRACER,name:ei.CREATE_CUSTOM_AUDIO_TRACK,options:[t]}),a=new Nr(t.mediaStreamTrack,t.encoderConfig?W_(t.encoderConfig):{},n,!1);return k.info("create custom audio track success with config",t,"trackId",a.getTrackId()),i.onSuccess(a.getTrackId()),a},createBufferSourceAudioTrack:async function(t){var n;const{cacheOnlineFile:i,encoderConfig:a}=t;let{source:l}=t;const u={source:l instanceof AudioBuffer?"AudioBuffer":l instanceof File?(n=File.name)!==null&&n!==void 0?n:"File":l,cacheOnlineFile:i,encoderConfig:a},h=Xn(8,"track-buf-"),p=dt.reportApiInvoke(null,{id:h,tag:wr.TRACER,name:ei.CREATE_BUFFER_AUDIO_TRACK,options:[u]});if(Q("DISABLE_WEBAUDIO"))throw new we(X.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");k.info("start create buffer source audio track with config",JSON.stringify(u),"trackId",h);const m=l;if(!(l instanceof AudioBuffer))try{l=await async function(R,A){let D=null;if(typeof R=="string"){const B=JV.get(R);if(B)return k.debug("use cached audio resource: ",R),B;try{D=(await yc(()=>zo.get(R,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch($){throw new we(X.FETCH_AUDIO_FILE_FAILED,$.toString())}}else D=await new Ye(($,K)=>{const Y=new FileReader;Y.onload=ce=>{ce.target?$(ce.target.result):K(new we(X.READ_LOCAL_AUDIO_FILE_ERROR))},Y.onerror=()=>{K(new we(X.READ_LOCAL_AUDIO_FILE_ERROR))},Y.readAsArrayBuffer(R)});const H=await function(B){const $=Qf();return new Ye((K,Y)=>{$.decodeAudioData(B,ce=>{K(ce)},ce=>{Y(new we(X.DECODE_AUDIO_FILE_FAILED,ce.toString()))})})}(D);return typeof R=="string"&&A&&JV.set(R,H),H}(l,i)}catch(R){return p.onError(R),R.throw(k)}const E=new qhe(l),y=new Khe(m,E,a?W_(a):{},h);return k.info("create buffer source audio track success, trackId:",h),p.onSuccess(y.getTrackId()),y},setAppType:function(t){if(k.debug("setAppType: ".concat(t)),!(Number.isInteger(t)&&t>=0))throw k.debug("Invalid appType"),new ye(X.INVALID_PARAMS,"invalid app type",t);Vn("APP_TYPE",Math.floor(t))},setLogLevel:function(t){k.setLogLevel(t)},enableLogUpload:function(){Q("USE_NEW_LOG")?Vn("UPLOAD_LOG",!0):k.enableLogUpload()},disableLogUpload:function(){Q("USE_NEW_LOG")?Vn("UPLOAD_LOG",!1):k.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new J6},checkAudioTrackIsActive:async function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const i=dt.reportApiInvoke(null,{tag:wr.TRACER,name:ei.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[n]});if(!(t instanceof Nr||t instanceof tp)){const m=new ye(X.INVALID_TRACK,"the parameter is not a audio track");return i.onError(m),m.throw()}n&&n<1e3&&(n=1e3);const a=t instanceof Nr?t.getTrackLabel():"remote_track",l=t.getVolumeLevel();let u=l,h=l;const p=Date.now();return new Ye(m=>{const E=setInterval(()=>{const y=t.getVolumeLevel();u=y>u?y:u,h=y<h?y:h;const R=u-h>1e-4,A=Date.now()-p;if(R||A>n){clearInterval(E);const D=R,H={duration:A,deviceLabel:a,maxVolumeLevel:u,result:D};k.info("[track-".concat(t.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(H))),i.onSuccess(H),m(D)}},200)})},checkVideoTrackIsActive:async function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const i=dt.reportApiInvoke(null,{tag:wr.TRACER,name:ei.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[n]});if(!(t instanceof sr||t instanceof ep)){const R=new ye(X.INVALID_TRACK,"the parameter is not a video track");return i.onError(R),R.throw()}n&&n<1e3&&(n=1e3);const a=t instanceof sr?t.getTrackLabel():"remote_track",l=t.getMediaStreamTrack(!0),u=document.createElement("video");u.style.width="1px",u.style.height="1px",u.setAttribute("muted",""),u.muted=!0,u.setAttribute("playsinline",""),u.controls=!1,(Hi()||D_())&&(u.style.opacity="0.01",u.style.position="fixed",u.style.left="0",u.style.top="0",document.body.appendChild(u)),u.srcObject=new MediaStream([l]),u.play();const h=document.createElement("canvas");h.width=160,h.height=120;let p=0,m=0;try{const R=Date.now();p=await function(A,D,H,B){let $,K=0,Y=null;return new Ye((ce,ge)=>{function Ee(){K>B&&$&&($(),ce(K));const me=H.getContext("2d");if(!me){const Xe=new ye(X.UNEXPECTED_ERROR,"can not get canvas 2d context.");return k.error(Xe.toString()),void ge(Xe)}me.drawImage(A,0,0,160,120);const Te=me.getImageData(0,0,H.width,H.height),Me=Math.floor(Te.data.length/3);if(Y){for(let Xe=0;Xe<Me;Xe+=3)if(Te.data[Xe]!==Y[Xe])return K+=1,void(Y=Te.data);Y=Te.data}else Y=Te.data}setTimeout(()=>{$&&($(),ce(K))},D),$=lI(()=>{Ee()},30)})}(u,n,h,4),m=Date.now()-R}catch(R){throw i.onError(R),R}fpe===On.SAFARI&&(u.pause(),u.remove()),u.srcObject=null;const E=p>4,y={duration:m,changedPicNum:p,deviceLabel:a,result:E};return k.info("[track-".concat(t.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(y))),i.onSuccess(y),E},setArea:jI,audioElementPlayCenter:Wo,resumeAudioContext:function(){Wo.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(t){Ope.processExternalMediaAEC(t)},registerExtensions:function(t){const n=Q("PLUGIN_INFO")||[];t.forEach(i=>{"name"in i&&!Ke(n).call(n,i.name)&&n.push(i.name);const a=i;a.__registered__=!0,a.logger.hookLog=k.extLog,a.reporter.hookApiInvoke=dt.extApiInvoke,a.parameters&&Object.keys(a.parameters).forEach(l=>{a.parameters[l]=Q(l)})}),tH("PLUGIN_INFO",n)},ChannelMediaRelayError:ip,ChannelMediaRelayEvent:ql,ChannelMediaRelayState:ca,RemoteStreamFallbackType:Vhe,RemoteStreamType:Bhe,ConnectionDisconnectedReason:Ln,AudienceLatencyLevelType:ghe,AREAS:xn,preload:async function(t,n,i,a){return T8(t,n,i,a)}});return Object.defineProperties(ni,{onAudioAutoplayFailed:{get:()=>Ga.onAudioAutoplayFailed,set:t=>{Ga.onAudioAutoplayFailed=t}},onAutoplayFailed:{get:()=>Ga.onAutoplayFailed,set:t=>{Ga.onAutoplayFailed=t}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>ni._onSecurityPolicyViolation,set(t){ni._onSecurityPolicyViolation=t,kj(t)}},__CLIENT_LIST__:{get:()=>Q("SHOW_GLOBAL_CLIENT_LIST")?rh:[]}}),Wa.on(Zd.CAMERA_DEVICE_CHANGED,t=>{k.info("camera device changed",JSON.stringify(t)),ni.onCameraChanged&&ni.onCameraChanged(t),ni.safeEmit(dl.CAMERA_CHANGED,t)}),Wa.on(Zd.RECORDING_DEVICE_CHANGED,t=>{k.info("microphone device changed",JSON.stringify(t)),ni.onMicrophoneChanged&&ni.onMicrophoneChanged(t),ni.safeEmit(dl.MICROPHONE_CHANGED,t)}),Wa.on(Zd.PLAYOUT_DEVICE_CHANGED,t=>{k.debug("playout device changed",JSON.stringify(t)),ni.onPlaybackDeviceChanged&&ni.onPlaybackDeviceChanged(t),ni.safeEmit(dl.PLAYBACK_DEVICE_CHANGED,t)}),Wo.onAutoplayFailed=()=>{k.info("detect audio element autoplay failed"),Ga.onAudioAutoplayFailed&&Ga.onAudioAutoplayFailed()},jn.on("autoplay-failed",()=>{k.info("detect webaudio autoplay failed"),Ga.onAudioAutoplayFailed&&Ga.onAudioAutoplayFailed(),ni.safeEmit(dl.AUTOPLAY_FAILED)}),jn.on(Di.STATE_CHANGE,(t,n)=>{k.info("audio context state changed: ".concat(n," => ").concat(t)),ni.onAudioContextStateChanged&&ni.onAudioContextStateChanged(t,n),ni.safeEmit(dl.AUDIO_CONTEXT_STATE_CHANGED,t,n)}),Hr.on(Vf.NETWORK_STATE_CHANGE,(t,n)=>{k.info("[network-indicator] network state changed, ".concat(n," => ").concat(t))}),window&&(window.__ARTC__=ni),ni})})(OG);var z0e=OG.exports;const lu=wd(z0e);function Ea(e,r,o){return e.on(r,o),()=>e.off(r,o)}function W0e(e){try{return e()}catch(r){console.error(r)}}function qh(e){return()=>e.forEach(W0e)}function aD(e,r){const o=setTimeout(e,r);return()=>clearTimeout(o)}function sD(){let e,r,o;function s(){if(r){const _=r;r=void 0,_()}}async function c(){if(o){const _=o;o=void 0;try{await _()}catch(C){console.error(C)}}}async function d(_){e=!0,await c();try{o=await _()}catch(C){console.error(C)}e=!1,s()}async function f(){e=!0,await c(),e=!1,s()}function v(_){e?r=()=>d(_):d(_)}function g(){e?r=f:f()}return{run:v,dispose:g}}const db=typeof document<"u"?S.useLayoutEffect:S.useEffect;function G0e(e){return e!=null&&typeof e.then=="function"}function Id(){const e=S.useRef(!1);return S.useEffect(()=>(e.current=!1,()=>{e.current=!0}),[]),e}function K0e(){const e=Id();function r(o,s){return new Promise(async(c,d)=>{try{const f=await o;e.current||c(f)}catch(f){e.current?s&&s(f):d(f)}})}return S.useCallback(r,[e])}function hb(e){const r=K0e(),[o,s]=S.useState();return db(()=>{G0e(e)?r(e).then(s):s(e)},[e,r]),o}function Yh(e,r){const o=S.useRef();S.useEffect(()=>{const{run:s,dispose:c}=o.current||(o.current=sD());return s(e),c},r)}function q0e(e,r){const o=e.split("."),s=r.split("."),c=Math.max(o.length,s.length);for(let d=0;d<c;d++){const f=parseInt(o[d]||"0"),v=parseInt(s[d]||"0");if(f>v)return 1;if(f<v)return-1}return 0}function Y0e(e,r,o){const s=S.useRef(o);db(()=>{s.current=o},[o]),S.useEffect(()=>{if(e)return Ea(e,r,(...c)=>{s.current&&s.current(...c)})},[r,e])}function PG(e,r,o){const s=S.useRef(o);db(()=>{s.current=o},[o]),S.useEffect(()=>{if(e)return Ea(e,r,(...c)=>{s.current&&s.current(...c)})},[r,e])}const DG=S.createContext(null);function LG({client:e,children:r}){return ue.jsx(DG.Provider,{value:e,children:r})}function X0e(e){const r=S.useContext(DG);return e||r}function ws(e){const r=X0e(e);if(!r)throw new Error("Agora RTC client not found. Should be wrapped in <AgoraRTCProvider value={client} />");return r}const J0e=S.createContext(null);function Q0e({client:e,children:r}){return ue.jsx(J0e.Provider,{value:e,children:r})}function Z0e(e){const r=ws(e),[o,s]=S.useState(r?r.connectionState:"DISCONNECTED");return S.useEffect(()=>{if(r){s(r.connectionState);let c;return qh([Ea(r,"connection-state-change",d=>{c==null||c(),d==="CONNECTED"?c=aD(()=>s(d),0):s(d)}),()=>c==null?void 0:c()])}else s("DISCONNECTED")},[r]),o}function gu(e){const r=ws(e),[o,s]=S.useState(r?r.connectionState==="CONNECTED":!1);return S.useEffect(()=>{if(r){s(r.connectionState==="CONNECTED");let c;return qh([Ea(r,"connection-state-change",d=>{c==null||c(),c=aD(()=>s(d==="CONNECTED"),0)}),()=>c==null?void 0:c()])}else s(!1)},[r]),o}function fb(e){const r=ws(e),[o,s]=S.useState(r==null?void 0:r.uid);return S.useEffect(()=>{if(r)return Ea(r,"connection-state-change",c=>{if(c==="CONNECTED")return aD(()=>s(r.uid),0);c==="DISCONNECTED"&&s(void 0)})},[r]),o}class Ja extends Error{constructor(o,s){var r=(...args)=>{super(...args);QS(this,"rtcMethod");QS(this,"rtcError");QS(this,"name","AgoraRTCReactException")};r(typeof s=="string"?s:s.message),this.rtcMethod=o,this.rtcError=s}log(o){console[o](this)}}function ro(e,r=!0,o){const s=ws(o),c=gu(o),d=S.useRef(),[f,v]=S.useState(!1),[g,_]=S.useState(0),[C,b]=S.useState(null),T=Id();return Yh(async()=>{if(T.current||(b(null),_(0),v(!1)),r&&s){try{T.current||v(!0);const{appid:w,channel:x,token:N,uid:P}=typeof e=="function"?await e():e,O=await s.join(w,x,N,P);T.current||_(O)}catch(w){console.error(w),T.current||b(new Ja("IAgoraRTCClient.join",w))}T.current||v(!1);const I=d.current||(d.current=sD());return qh([()=>{I.dispose()},()=>{I.run(()=>s.unpublish(s.localTracks))},()=>{for(const w of s.localTracks)w.isPlaying&&w.stop(),w.close();I.run(()=>s.leave())}])}},[r,o]),{data:g,isLoading:f,isConnected:c,error:C}}const aH=()=>({uplinkNetworkQuality:0,downlinkNetworkQuality:0,delay:0});function ege(e){const r=ws(e),[o,s]=S.useState(aH);return S.useEffect(()=>{if(r)return Ea(r,"network-quality",c=>s({uplinkNetworkQuality:c.uplinkNetworkQuality,downlinkNetworkQuality:c.downlinkNetworkQuality,delay:r.getRTCStats().RTT??0}));s(aH())},[r]),o}function Ad(e,r=!0,o){const s=ws(o),c=gu(o),d=S.useRef([]),[f,v]=S.useState(!1),[g,_]=S.useState(null),C=Id();return Yh(async()=>{if(C.current||(v(!1),_(null)),!s||!c||!r)return;const b=e.filter(Boolean),T=x=>{const N=q0e(lu.VERSION,"4.18.2")>=0;return N||new Ja("usePublish","please check your agora-rtc-sdk-ng version in package.json, it's recommend upgrade to >= 4.18.2").log("warn"),N?s.mode!=="live"||s.role!=="audience":!0},I=x=>d.current.some(N=>N&&N.getTrackId()===x.getTrackId()),w=x=>T()&&x.enabled&&r&&!I(x);for(let x=0;x<b.length;x++){const N=b[x];if(N&&w(N)){await s.unpublish(d.current.filter(P=>(P==null?void 0:P.trackMediaType)===N.trackMediaType));try{C.current||v(!0),await s.publish(N)}catch(P){console.error(P),C.current||_(new Ja("IAgoraRTCClient.publish",P))}C.current||v(!1)}}d.current=b},[c,r,s,e]),{isLoading:f,error:g}}function Sm(e=!0,r={ANS:!0,AEC:!0}){const[o,s]=S.useState(null),[c,d]=S.useState(!1),[f,v]=S.useState(null),g=Id();return Yh(async()=>{if(g.current||(d(!1),v(null)),e&&!o){try{g.current||d(!0);const _=await lu.createMicrophoneAudioTrack(r);g.current||s(_)}catch(_){console.error(_),g.current||v(new Ja("IAgoraRTC.createMicrophoneAudioTrack",_))}g.current||d(!1)}},[e]),{localMicrophoneTrack:o,isLoading:c,error:f}}function ym(e=!0,r){const[o,s]=S.useState(null),[c,d]=S.useState(!1),[f,v]=S.useState(null),g=Id();return Yh(async()=>{if(g.current||(d(!1),v(null)),e&&!o){try{g.current||d(!0);const _=await lu.createCameraVideoTrack(r);g.current||s(_)}catch(_){console.error(_),g.current||v(new Ja("IAgoraRTC.createCameraVideoTrack",_))}g.current||d(!1)}},[e]),{localCameraTrack:o,isLoading:c,error:f}}function Cm(e,r){const o=ws(r),[s,c]=S.useState([]),d=gu(),f=S.useRef([]),[v,g]=S.useState(!1),[_,C]=S.useState(null),b=Id();return Yh(async()=>{if(b.current||C(null),!Array.isArray(e)||!d)return;const T=async x=>{if(!x.audioTrack&&e.some(({uid:N})=>x.uid===N)){try{b.current||g(!0),await o.subscribe(x,"audio")}catch(N){console.error(N),b.current||C(new Ja("IAgoraRTCClient.subscribe",N))}x.audioTrack&&!f.current.some(N=>N.getUserId()===x.uid)&&f.current.push(x.audioTrack),f.current=f.current.map(N=>x.audioTrack&&N.getUserId()===x.uid&&N.getTrackId()!==x.audioTrack.getTrackId()?x.audioTrack:N),b.current||(c([...f.current]),g(!1))}},I=async x=>{if(e.some(({uid:N})=>x.uid===N)){b.current||(f.current=f.current.filter(N=>N.getUserId()!==x.uid),c([...f.current]));try{b.current||g(!0),await o.unsubscribe(x,"audio")}catch(N){console.error(N),b.current||C(new Ja("IAgoraRTCClient.unsubscribe",N))}b.current||g(!1)}};e.map(x=>{!x.audioTrack&&x.hasAudio&&T(x)});const w=[];for(let x=0;x<f.current.length;x++){const N=f.current[x];if(!e.some(P=>P.uid===N.getUserId())){const P=o.remoteUsers.find(O=>O.uid===N.getUserId());P&&w.push({user:P,mediaType:"audio"}),f.current.splice(x,1),x--}}if(w.length>0){try{b.current||g(!0),await o.massUnsubscribe(w)}catch(x){console.error(x),b.current||C(new Ja("IAgoraRTCClient.massUnsubscribe",x))}b.current||(c(f.current.slice()),g(!1))}return qh([Ea(o,"user-published",(x,N)=>{e.find(P=>P.uid===x.uid)&&N==="audio"&&T(x)}),Ea(o,"user-unpublished",(x,N)=>{e.find(P=>P.uid===x.uid)&&N==="audio"&&I(x)})])},[d,o,e]),{audioTracks:s,isLoading:v,error:_}}function bm(e,r){const o=ws(r),[s,c]=S.useState([]),d=gu(),f=S.useRef([]),[v,g]=S.useState(!1),[_,C]=S.useState(null),b=Id();return Yh(async()=>{if(b.current||C(null),!Array.isArray(e)||!d)return;const T=async x=>{if(!x.videoTrack&&e.some(({uid:N})=>x.uid===N)){try{b.current||g(!0),await o.subscribe(x,"video")}catch(N){console.error(N),b.current||C(new Ja("IAgoraRTCClient.subscribe",N))}x.videoTrack&&!f.current.some(N=>N.getUserId()===x.uid)&&f.current.push(x.videoTrack),f.current=f.current.map(N=>x.videoTrack&&N.getUserId()===x.uid&&N.getTrackId()!==x.videoTrack.getTrackId()?x.videoTrack:N),b.current||(c([...f.current]),g(!1))}},I=async x=>{if(e.some(({uid:N})=>x.uid===N)){b.current||(f.current=f.current.filter(N=>N.getUserId()!==x.uid),c([...f.current]));try{b.current||g(!0),await o.unsubscribe(x,"video")}catch(N){console.error(N),b.current||C(new Ja("IAgoraRTCClient.unsubscribe",N))}b.current||g(!1)}};e.map(x=>{!x.videoTrack&&x.hasVideo&&T(x)});const w=[];for(let x=0;x<f.current.length;x++){const N=f.current[x];if(!e.some(P=>P.uid===N.getUserId())){const P=o.remoteUsers.find(O=>O.uid===N.getUserId());P&&w.push({user:P,mediaType:"video"}),f.current.splice(x,1),x--}}if(w.length>0){try{b.current||g(!0),await o.massUnsubscribe(w)}catch(x){console.error(x),b.current||C(new Ja("IAgoraRTCClient.massUnsubscribe",x))}b.current||(c(f.current.slice()),g(!1))}return qh([Ea(o,"user-published",(x,N)=>{e.find(P=>P.uid===x.uid)&&N==="video"&&T(x)}),Ea(o,"user-unpublished",(x,N)=>{e.find(P=>P.uid===x.uid)&&N==="video"&&I(x)})])},[d,o,e]),{videoTracks:s,isLoading:v,error:_}}function sH(e,r,o){const s=ws(o),c=r==="audio"?"audioTrack":"videoTrack",[d,f]=S.useState(e&&e[c]),v=gu(),g=S.useRef(),[_,C]=S.useState(!1),[b,T]=S.useState(null);return S.useEffect(()=>{if(!e||!v)return;let I=!1;I||T(null);const w=r==="audio"?"hasAudio":"hasVideo",x=e.uid,N=async(L,M)=>{if(L[c]&&s.remoteUsers.some(({uid:F})=>L.uid===F))try{I||C(!0),await s.unsubscribe(L,M)}catch(F){I||T(new Ja("IAgoraRTCClient.unsubscribe",F)),console.error(F)}I||(f(void 0),C(!1))},P=async(L,M)=>{try{!L[c]&&s.remoteUsers.some(({uid:F})=>L.uid===F)&&(I||C(!0),await s.subscribe(L,M)),I||f(L[c])}catch(F){I||T(new Ja("IAgoraRTCClient.subscribe",F)),console.error(F)}I||C(!1)},O=g.current||(g.current=sD());return!e[c]&&e[w]?O.run(()=>P(e,r)):f(e[c]),qh([()=>{I=!0,O.dispose()},Ea(s,"user-published",(L,M)=>{L.uid===x&&M===r&&O.run(()=>P(L,r))}),Ea(s,"user-unpublished",(L,M)=>{L.uid===x&&M===r&&O.run(()=>N(L,r))})])},[v,s,e,r,c]),{track:d,isLoading:_,error:b}}function Kc(e){const r=ws(e),[o,s]=S.useState(r?r.remoteUsers:[]);return S.useEffect(()=>{if(r){const c=()=>s(r.remoteUsers.slice());return qh([Ea(r,"user-joined",c),Ea(r,"user-left",c),Ea(r,"user-published",c),Ea(r,"user-unpublished",c)])}},[r]),o}function kG(e=!0,r,o){const[s,c]=S.useState(null),[d,f]=S.useState(!1),[v,g]=S.useState(null),_=Id();return Yh(async()=>{if(_.current||(f(!1),g(null)),e&&!s){try{_.current||f(!0);const C=await lu.createScreenVideoTrack(r,o);_.current||c(C)}catch(C){console.error(C),_.current||g(new Ja("IAgoraRTC.createScreenVideoTrack",C))}_.current||f(!1)}},[e]),{screenTrack:s,isLoading:d,error:v}}const MG=S.createContext(void 0);function cD(e,r,o,s){const c=S.useContext(MG);S.useEffect(()=>{if(e)return s&&r?e.play(s,o||void 0):e.stop(),c?(c.onMount(e),()=>c.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,s,r,c,o])}function lD(e,r){const o=S.useContext(MG);db(()=>{if(e)return r?e.play():e.stop(),o?(o.onMount(e),()=>o.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,r,o])}function pb({track:e,play:r=!1,volume:o,disabled:s,muted:c,children:d}){const f=hb(e);return lD(f,r),S.useEffect(()=>{f&&o!=null&&f.setVolume(o)},[f,o]),S.useEffect(()=>{f&&s!=null&&f.setEnabled(!s).catch(console.warn)},[s,f]),S.useEffect(()=>{f&&c!=null&&f.setMuted(c).catch(console.warn)},[c,f]),d?ue.jsx(ue.Fragment,{children:d}):null}const mb={position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#000"},FG={width:"100%",height:"100%"},Uv={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:2},Tm=(e,r)=>S.useMemo(()=>({...e,...r}),[e,r]);function Bv({track:e,play:r,disabled:o,muted:s,style:c,videoPlayerConfig:d,...f}){const v=Tm(FG,c),[g,_]=S.useState(null),C=hb(e);return cD(C,r,d,g),S.useEffect(()=>{C&&o!=null&&C.setEnabled(!o).catch(console.warn)},[o,C]),S.useEffect(()=>{C&&s!=null&&C.setMuted(s).catch(console.warn)},[s,C]),ue.jsx("div",{...f,ref:_,style:v})}const tge={width:"100%",height:"100%",background:"#1a1e21 center/cover no-repeat",filter:"blur(16px) brightness(0.4)"},nge={position:"absolute",top:"50%",left:"50%",maxWidth:"50%",maxHeight:"50%",aspectRatio:"1",transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",objectFit:"cover"};function gb({cover:e}){return ue.jsx("div",{style:Uv,children:typeof e=="string"?ue.jsxs(ue.Fragment,{children:[ue.jsx("div",{style:{...tge,backgroundImage:`url(${e})`}}),ue.jsx("img",{src:e,style:nge})]}):e()})}function UG({micOn:e,cameraOn:r,audioTrack:o,videoTrack:s,playAudio:c,playVideo:d,volume:f,cover:v,children:g,style:_,...C}){const b=Tm(mb,_);return d=d??!!r,c=c??!!e,ue.jsxs("div",{...C,style:b,children:[ue.jsx(Bv,{disabled:!r,play:d,track:s}),ue.jsx(pb,{disabled:!e,play:c,track:o,volume:f}),v&&!r&&ue.jsx(gb,{cover:v}),ue.jsx("div",{style:Uv,children:g})]})}function BG({track:e,play:r=!1,playbackDeviceId:o,volume:s,children:c}){return lD(e,r),S.useEffect(()=>{e&&o!=null&&e.setPlaybackDevice(o).catch(console.warn)},[e,o]),S.useEffect(()=>{e&&s!=null&&e.setVolume(s)},[e,s]),c?ue.jsx(ue.Fragment,{children:c}):null}function uD({track:e,play:r,style:o,videoPlayerConfig:s,...c}){const d=Tm(FG,o),[f,v]=S.useState(null);return cD(e,r,s,f),ue.jsx("div",{...c,ref:v,style:d})}function dD({user:e,playVideo:r,playAudio:o,playbackDeviceId:s,volume:c,cover:d,style:f,children:v,videoPlayerConfig:g,..._}){const C=Tm(mb,f),{track:b}=sH(e,"video"),{track:T}=sH(e,"audio");return r=r??(e==null?void 0:e.hasVideo),o=o??(e==null?void 0:e.hasAudio),ue.jsxs("div",{..._,style:C,children:[ue.jsx(uD,{play:r,track:b,videoPlayerConfig:g}),ue.jsx(BG,{play:o,playbackDeviceId:s,track:T,volume:c}),d&&!r&&ue.jsx(gb,{cover:d}),ue.jsx("div",{style:Uv,children:v})]})}var Gx={},VG={exports:{}},Is={},jG={exports:{}},$G={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function r(re,he){var fe=re.length;re.push(he);e:for(;0<fe;){var se=fe-1>>>1,de=re[se];if(0<c(de,he))re[se]=he,re[fe]=de,fe=se;else break e}}function o(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var he=re[0],fe=re.pop();if(fe!==he){re[0]=fe;e:for(var se=0,de=re.length,ve=de>>>1;se<ve;){var ie=2*(se+1)-1,be=re[ie],Re=ie+1,Pe=re[Re];if(0>c(be,fe))Re<de&&0>c(Pe,be)?(re[se]=Pe,re[Re]=fe,se=Re):(re[se]=be,re[ie]=fe,se=ie);else if(Re<de&&0>c(Pe,fe))re[se]=Pe,re[Re]=fe,se=Re;else break e}}return he}function c(re,he){var fe=re.sortIndex-he.sortIndex;return fe!==0?fe:re.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var f=Date,v=f.now();e.unstable_now=function(){return f.now()-v}}var g=[],_=[],C=1,b=null,T=3,I=!1,w=!1,x=!1,N=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(re){for(var he=o(_);he!==null;){if(he.callback===null)s(_);else if(he.startTime<=re)s(_),he.sortIndex=he.expirationTime,r(g,he);else break;he=o(_)}}function M(re){if(x=!1,L(re),!w)if(o(g)!==null)w=!0,ne(F);else{var he=o(_);he!==null&&ae(M,he.startTime-re)}}function F(re,he){w=!1,x&&(x=!1,P(z),z=-1),I=!0;var fe=T;try{for(L(he),b=o(g);b!==null&&(!(b.expirationTime>he)||re&&!J());){var se=b.callback;if(typeof se=="function"){b.callback=null,T=b.priorityLevel;var de=se(b.expirationTime<=he);he=e.unstable_now(),typeof de=="function"?b.callback=de:b===o(g)&&s(g),L(he)}else s(g);b=o(g)}if(b!==null)var ve=!0;else{var ie=o(_);ie!==null&&ae(M,ie.startTime-he),ve=!1}return ve}finally{b=null,T=fe,I=!1}}var V=!1,j=null,z=-1,q=5,W=-1;function J(){return!(e.unstable_now()-W<q)}function te(){if(j!==null){var re=e.unstable_now();W=re;var he=!0;try{he=j(!0,re)}finally{he?ee():(V=!1,j=null)}}else V=!1}var ee;if(typeof O=="function")ee=function(){O(te)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,pe=oe.port2;oe.port1.onmessage=te,ee=function(){pe.postMessage(null)}}else ee=function(){N(te,0)};function ne(re){j=re,V||(V=!0,ee())}function ae(re,he){z=N(function(){re(e.unstable_now())},he)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){w||I||(w=!0,ne(F))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return o(g)},e.unstable_next=function(re){switch(T){case 1:case 2:case 3:var he=3;break;default:he=T}var fe=T;T=he;try{return re()}finally{T=fe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,he){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var fe=T;T=re;try{return he()}finally{T=fe}},e.unstable_scheduleCallback=function(re,he,fe){var se=e.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?se+fe:se):fe=se,re){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=fe+de,re={id:C++,callback:he,priorityLevel:re,startTime:fe,expirationTime:de,sortIndex:-1},fe>se?(re.sortIndex=fe,r(_,re),o(g)===null&&re===o(_)&&(x?(P(z),z=-1):x=!0,ae(M,fe-se))):(re.sortIndex=de,r(g,re),w||I||(w=!0,ne(F))),re},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(re){var he=T;return function(){var fe=T;T=he;try{return re.apply(this,arguments)}finally{T=fe}}}})($G);jG.exports=$G;var rge=jG.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ige=S,Ts=rge;function St(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HG=new Set,ev={};function Xh(e,r){om(e,r),om(e+"Capture",r)}function om(e,r){for(ev[e]=r,e=0;e<r.length;e++)HG.add(r[e])}var uu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kx=Object.prototype.hasOwnProperty,oge=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cH={},lH={};function age(e){return Kx.call(lH,e)?!0:Kx.call(cH,e)?!1:oge.test(e)?lH[e]=!0:(cH[e]=!0,!1)}function sge(e,r,o,s){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return s?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function cge(e,r,o,s){if(r===null||typeof r>"u"||sge(e,r,o,s))return!0;if(s)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Pa(e,r,o,s,c,d,f){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=s,this.attributeNamespace=c,this.mustUseProperty=o,this.propertyName=e,this.type=r,this.sanitizeURL=d,this.removeEmptyString=f}var ta={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ta[e]=new Pa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];ta[r]=new Pa(r,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ta[e]=new Pa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ta[e]=new Pa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ta[e]=new Pa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ta[e]=new Pa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ta[e]=new Pa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ta[e]=new Pa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ta[e]=new Pa(e,5,!1,e.toLowerCase(),null,!1,!1)});var hD=/[\-:]([a-z])/g;function fD(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(hD,fD);ta[r]=new Pa(r,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(hD,fD);ta[r]=new Pa(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(hD,fD);ta[r]=new Pa(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ta[e]=new Pa(e,1,!1,e.toLowerCase(),null,!1,!1)});ta.xlinkHref=new Pa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ta[e]=new Pa(e,1,!1,e.toLowerCase(),null,!0,!0)});function pD(e,r,o,s){var c=ta.hasOwnProperty(r)?ta[r]:null;(c!==null?c.type!==0:s||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(cge(r,o,c,s)&&(o=null),s||c===null?age(r)&&(o===null?e.removeAttribute(r):e.setAttribute(r,""+o)):c.mustUseProperty?e[c.propertyName]=o===null?c.type===3?!1:"":o:(r=c.attributeName,s=c.attributeNamespace,o===null?e.removeAttribute(r):(c=c.type,o=c===3||c===4&&o===!0?"":""+o,s?e.setAttributeNS(s,r,o):e.setAttribute(r,o))))}var vu=ige.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ey=Symbol.for("react.element"),kp=Symbol.for("react.portal"),Mp=Symbol.for("react.fragment"),mD=Symbol.for("react.strict_mode"),qx=Symbol.for("react.profiler"),zG=Symbol.for("react.provider"),WG=Symbol.for("react.context"),gD=Symbol.for("react.forward_ref"),Yx=Symbol.for("react.suspense"),Xx=Symbol.for("react.suspense_list"),vD=Symbol.for("react.memo"),ad=Symbol.for("react.lazy"),GG=Symbol.for("react.offscreen"),uH=Symbol.iterator;function dg(e){return e===null||typeof e!="object"?null:(e=uH&&e[uH]||e["@@iterator"],typeof e=="function"?e:null)}var Mi=Object.assign,BA;function Pg(e){if(BA===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);BA=r&&r[1]||""}return`
`+BA+e}var VA=!1;function jA(e,r){if(!e||VA)return"";VA=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(_){var s=_}Reflect.construct(e,[],r)}else{try{r.call()}catch(_){s=_}e.call(r.prototype)}else{try{throw Error()}catch(_){s=_}e()}}catch(_){if(_&&s&&typeof _.stack=="string"){for(var c=_.stack.split(`
`),d=s.stack.split(`
`),f=c.length-1,v=d.length-1;1<=f&&0<=v&&c[f]!==d[v];)v--;for(;1<=f&&0<=v;f--,v--)if(c[f]!==d[v]){if(f!==1||v!==1)do if(f--,v--,0>v||c[f]!==d[v]){var g=`
`+c[f].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=f&&0<=v);break}}}finally{VA=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?Pg(e):""}function lge(e){switch(e.tag){case 5:return Pg(e.type);case 16:return Pg("Lazy");case 13:return Pg("Suspense");case 19:return Pg("SuspenseList");case 0:case 2:case 15:return e=jA(e.type,!1),e;case 11:return e=jA(e.type.render,!1),e;case 1:return e=jA(e.type,!0),e;default:return""}}function Jx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Mp:return"Fragment";case kp:return"Portal";case qx:return"Profiler";case mD:return"StrictMode";case Yx:return"Suspense";case Xx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case WG:return(e.displayName||"Context")+".Consumer";case zG:return(e._context.displayName||"Context")+".Provider";case gD:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vD:return r=e.displayName||null,r!==null?r:Jx(e.type)||"Memo";case ad:r=e._payload,e=e._init;try{return Jx(e(r))}catch{}}return null}function uge(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jx(r);case 8:return r===mD?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Td(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function KG(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function dge(e){var r=KG(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),s=""+e[r];if(!e.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,d=o.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return c.call(this)},set:function(f){s=""+f,d.call(this,f)}}),Object.defineProperty(e,r,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(f){s=""+f},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function ty(e){e._valueTracker||(e._valueTracker=dge(e))}function qG(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var o=r.getValue(),s="";return e&&(s=KG(e)?e.checked?"true":"false":e.value),e=s,e!==o?(r.setValue(e),!0):!1}function dC(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qx(e,r){var o=r.checked;return Mi({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function dH(e,r){var o=r.defaultValue==null?"":r.defaultValue,s=r.checked!=null?r.checked:r.defaultChecked;o=Td(r.value!=null?r.value:o),e._wrapperState={initialChecked:s,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function YG(e,r){r=r.checked,r!=null&&pD(e,"checked",r,!1)}function Zx(e,r){YG(e,r);var o=Td(r.value),s=r.type;if(o!=null)s==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?eN(e,r.type,o):r.hasOwnProperty("defaultValue")&&eN(e,r.type,Td(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function hH(e,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var s=r.type;if(!(s!=="submit"&&s!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,o||r===e.value||(e.value=r),e.defaultValue=r}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function eN(e,r,o){(r!=="number"||dC(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var Dg=Array.isArray;function Xp(e,r,o,s){if(e=e.options,r){r={};for(var c=0;c<o.length;c++)r["$"+o[c]]=!0;for(o=0;o<e.length;o++)c=r.hasOwnProperty("$"+e[o].value),e[o].selected!==c&&(e[o].selected=c),c&&s&&(e[o].defaultSelected=!0)}else{for(o=""+Td(o),r=null,c=0;c<e.length;c++){if(e[c].value===o){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}r!==null||e[c].disabled||(r=e[c])}r!==null&&(r.selected=!0)}}function tN(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(St(91));return Mi({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fH(e,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(St(92));if(Dg(o)){if(1<o.length)throw Error(St(93));o=o[0]}r=o}r==null&&(r=""),o=r}e._wrapperState={initialValue:Td(o)}}function XG(e,r){var o=Td(r.value),s=Td(r.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),r.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),s!=null&&(e.defaultValue=""+s)}function pH(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function JG(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nN(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?JG(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ny,QG=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,s,c){MSApp.execUnsafeLocalFunction(function(){return e(r,o,s,c)})}:e}(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(ny=ny||document.createElement("div"),ny.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ny.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function tv(e,r){if(r){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=r;return}}e.textContent=r}var Bg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hge=["Webkit","ms","Moz","O"];Object.keys(Bg).forEach(function(e){hge.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),Bg[r]=Bg[e]})});function ZG(e,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||Bg.hasOwnProperty(e)&&Bg[e]?(""+r).trim():r+"px"}function eK(e,r){e=e.style;for(var o in r)if(r.hasOwnProperty(o)){var s=o.indexOf("--")===0,c=ZG(o,r[o],s);o==="float"&&(o="cssFloat"),s?e.setProperty(o,c):e[o]=c}}var fge=Mi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rN(e,r){if(r){if(fge[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(St(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(St(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(St(61))}if(r.style!=null&&typeof r.style!="object")throw Error(St(62))}}function iN(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oN=null;function ED(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var aN=null,Jp=null,Qp=null;function mH(e){if(e=$v(e)){if(typeof aN!="function")throw Error(St(280));var r=e.stateNode;r&&(r=yb(r),aN(e.stateNode,e.type,r))}}function tK(e){Jp?Qp?Qp.push(e):Qp=[e]:Jp=e}function nK(){if(Jp){var e=Jp,r=Qp;if(Qp=Jp=null,mH(e),r)for(e=0;e<r.length;e++)mH(r[e])}}function rK(e,r){return e(r)}function iK(){}var $A=!1;function oK(e,r,o){if($A)return e(r,o);$A=!0;try{return rK(e,r,o)}finally{$A=!1,(Jp!==null||Qp!==null)&&(iK(),nK())}}function nv(e,r){var o=e.stateNode;if(o===null)return null;var s=yb(o);if(s===null)return null;o=s[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(St(231,r,typeof o));return o}var sN=!1;if(uu)try{var hg={};Object.defineProperty(hg,"passive",{get:function(){sN=!0}}),window.addEventListener("test",hg,hg),window.removeEventListener("test",hg,hg)}catch{sN=!1}function pge(e,r,o,s,c,d,f,v,g){var _=Array.prototype.slice.call(arguments,3);try{r.apply(o,_)}catch(C){this.onError(C)}}var Vg=!1,hC=null,fC=!1,cN=null,mge={onError:function(e){Vg=!0,hC=e}};function gge(e,r,o,s,c,d,f,v,g){Vg=!1,hC=null,pge.apply(mge,arguments)}function vge(e,r,o,s,c,d,f,v,g){if(gge.apply(this,arguments),Vg){if(Vg){var _=hC;Vg=!1,hC=null}else throw Error(St(198));fC||(fC=!0,cN=_)}}function Jh(e){var r=e,o=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,r.flags&4098&&(o=r.return),e=r.return;while(e)}return r.tag===3?o:null}function aK(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function gH(e){if(Jh(e)!==e)throw Error(St(188))}function Ege(e){var r=e.alternate;if(!r){if(r=Jh(e),r===null)throw Error(St(188));return r!==e?null:e}for(var o=e,s=r;;){var c=o.return;if(c===null)break;var d=c.alternate;if(d===null){if(s=c.return,s!==null){o=s;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===o)return gH(c),e;if(d===s)return gH(c),r;d=d.sibling}throw Error(St(188))}if(o.return!==s.return)o=c,s=d;else{for(var f=!1,v=c.child;v;){if(v===o){f=!0,o=c,s=d;break}if(v===s){f=!0,s=c,o=d;break}v=v.sibling}if(!f){for(v=d.child;v;){if(v===o){f=!0,o=d,s=c;break}if(v===s){f=!0,s=d,o=c;break}v=v.sibling}if(!f)throw Error(St(189))}}if(o.alternate!==s)throw Error(St(190))}if(o.tag!==3)throw Error(St(188));return o.stateNode.current===o?e:r}function sK(e){return e=Ege(e),e!==null?cK(e):null}function cK(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=cK(e);if(r!==null)return r;e=e.sibling}return null}var lK=Ts.unstable_scheduleCallback,vH=Ts.unstable_cancelCallback,_ge=Ts.unstable_shouldYield,Sge=Ts.unstable_requestPaint,no=Ts.unstable_now,yge=Ts.unstable_getCurrentPriorityLevel,_D=Ts.unstable_ImmediatePriority,uK=Ts.unstable_UserBlockingPriority,pC=Ts.unstable_NormalPriority,Cge=Ts.unstable_LowPriority,dK=Ts.unstable_IdlePriority,vb=null,Ol=null;function bge(e){if(Ol&&typeof Ol.onCommitFiberRoot=="function")try{Ol.onCommitFiberRoot(vb,e,void 0,(e.current.flags&128)===128)}catch{}}var Uc=Math.clz32?Math.clz32:wge,Tge=Math.log,Rge=Math.LN2;function wge(e){return e>>>=0,e===0?32:31-(Tge(e)/Rge|0)|0}var ry=64,iy=4194304;function Lg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mC(e,r){var o=e.pendingLanes;if(o===0)return 0;var s=0,c=e.suspendedLanes,d=e.pingedLanes,f=o&268435455;if(f!==0){var v=f&~c;v!==0?s=Lg(v):(d&=f,d!==0&&(s=Lg(d)))}else f=o&~c,f!==0?s=Lg(f):d!==0&&(s=Lg(d));if(s===0)return 0;if(r!==0&&r!==s&&!(r&c)&&(c=s&-s,d=r&-r,c>=d||c===16&&(d&4194240)!==0))return r;if(s&4&&(s|=o&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=s;0<r;)o=31-Uc(r),c=1<<o,s|=e[o],r&=~c;return s}function Ige(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Age(e,r){for(var o=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var f=31-Uc(d),v=1<<f,g=c[f];g===-1?(!(v&o)||v&s)&&(c[f]=Ige(v,r)):g<=r&&(e.expiredLanes|=v),d&=~v}}function lN(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hK(){var e=ry;return ry<<=1,!(ry&4194240)&&(ry=64),e}function HA(e){for(var r=[],o=0;31>o;o++)r.push(e);return r}function Vv(e,r,o){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-Uc(r),e[r]=o}function Oge(e,r){var o=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<o;){var c=31-Uc(o),d=1<<c;r[c]=0,s[c]=-1,e[c]=-1,o&=~d}}function SD(e,r){var o=e.entangledLanes|=r;for(e=e.entanglements;o;){var s=31-Uc(o),c=1<<s;c&r|e[s]&r&&(e[s]|=r),o&=~c}}var Yr=0;function fK(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var pK,yD,mK,gK,vK,uN=!1,oy=[],gd=null,vd=null,Ed=null,rv=new Map,iv=new Map,cd=[],xge="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function EH(e,r){switch(e){case"focusin":case"focusout":gd=null;break;case"dragenter":case"dragleave":vd=null;break;case"mouseover":case"mouseout":Ed=null;break;case"pointerover":case"pointerout":rv.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":iv.delete(r.pointerId)}}function fg(e,r,o,s,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:r,domEventName:o,eventSystemFlags:s,nativeEvent:d,targetContainers:[c]},r!==null&&(r=$v(r),r!==null&&yD(r)),e):(e.eventSystemFlags|=s,r=e.targetContainers,c!==null&&r.indexOf(c)===-1&&r.push(c),e)}function Nge(e,r,o,s,c){switch(r){case"focusin":return gd=fg(gd,e,r,o,s,c),!0;case"dragenter":return vd=fg(vd,e,r,o,s,c),!0;case"mouseover":return Ed=fg(Ed,e,r,o,s,c),!0;case"pointerover":var d=c.pointerId;return rv.set(d,fg(rv.get(d)||null,e,r,o,s,c)),!0;case"gotpointercapture":return d=c.pointerId,iv.set(d,fg(iv.get(d)||null,e,r,o,s,c)),!0}return!1}function EK(e){var r=Oh(e.target);if(r!==null){var o=Jh(r);if(o!==null){if(r=o.tag,r===13){if(r=aK(o),r!==null){e.blockedOn=r,vK(e.priority,function(){mK(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function By(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var o=dN(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var s=new o.constructor(o.type,o);oN=s,o.target.dispatchEvent(s),oN=null}else return r=$v(o),r!==null&&yD(r),e.blockedOn=o,!1;r.shift()}return!0}function _H(e,r,o){By(e)&&o.delete(r)}function Pge(){uN=!1,gd!==null&&By(gd)&&(gd=null),vd!==null&&By(vd)&&(vd=null),Ed!==null&&By(Ed)&&(Ed=null),rv.forEach(_H),iv.forEach(_H)}function pg(e,r){e.blockedOn===r&&(e.blockedOn=null,uN||(uN=!0,Ts.unstable_scheduleCallback(Ts.unstable_NormalPriority,Pge)))}function ov(e){function r(c){return pg(c,e)}if(0<oy.length){pg(oy[0],e);for(var o=1;o<oy.length;o++){var s=oy[o];s.blockedOn===e&&(s.blockedOn=null)}}for(gd!==null&&pg(gd,e),vd!==null&&pg(vd,e),Ed!==null&&pg(Ed,e),rv.forEach(r),iv.forEach(r),o=0;o<cd.length;o++)s=cd[o],s.blockedOn===e&&(s.blockedOn=null);for(;0<cd.length&&(o=cd[0],o.blockedOn===null);)EK(o),o.blockedOn===null&&cd.shift()}var Zp=vu.ReactCurrentBatchConfig,gC=!0;function Dge(e,r,o,s){var c=Yr,d=Zp.transition;Zp.transition=null;try{Yr=1,CD(e,r,o,s)}finally{Yr=c,Zp.transition=d}}function Lge(e,r,o,s){var c=Yr,d=Zp.transition;Zp.transition=null;try{Yr=4,CD(e,r,o,s)}finally{Yr=c,Zp.transition=d}}function CD(e,r,o,s){if(gC){var c=dN(e,r,o,s);if(c===null)ZA(e,r,s,vC,o),EH(e,s);else if(Nge(c,e,r,o,s))s.stopPropagation();else if(EH(e,s),r&4&&-1<xge.indexOf(e)){for(;c!==null;){var d=$v(c);if(d!==null&&pK(d),d=dN(e,r,o,s),d===null&&ZA(e,r,s,vC,o),d===c)break;c=d}c!==null&&s.stopPropagation()}else ZA(e,r,s,null,o)}}var vC=null;function dN(e,r,o,s){if(vC=null,e=ED(s),e=Oh(e),e!==null)if(r=Jh(e),r===null)e=null;else if(o=r.tag,o===13){if(e=aK(r),e!==null)return e;e=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return vC=e,null}function _K(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yge()){case _D:return 1;case uK:return 4;case pC:case Cge:return 16;case dK:return 536870912;default:return 16}default:return 16}}var ud=null,bD=null,Vy=null;function SK(){if(Vy)return Vy;var e,r=bD,o=r.length,s,c="value"in ud?ud.value:ud.textContent,d=c.length;for(e=0;e<o&&r[e]===c[e];e++);var f=o-e;for(s=1;s<=f&&r[o-s]===c[d-s];s++);return Vy=c.slice(e,1<s?1-s:void 0)}function jy(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function ay(){return!0}function SH(){return!1}function As(e){function r(o,s,c,d,f){this._reactName=o,this._targetInst=c,this.type=s,this.nativeEvent=d,this.target=f,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(o=e[v],this[v]=o?o(d):d[v]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ay:SH,this.isPropagationStopped=SH,this}return Mi(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ay)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ay)},persist:function(){},isPersistent:ay}),r}var Rm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},TD=As(Rm),jv=Mi({},Rm,{view:0,detail:0}),kge=As(jv),zA,WA,mg,Eb=Mi({},jv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:RD,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==mg&&(mg&&e.type==="mousemove"?(zA=e.screenX-mg.screenX,WA=e.screenY-mg.screenY):WA=zA=0,mg=e),zA)},movementY:function(e){return"movementY"in e?e.movementY:WA}}),yH=As(Eb),Mge=Mi({},Eb,{dataTransfer:0}),Fge=As(Mge),Uge=Mi({},jv,{relatedTarget:0}),GA=As(Uge),Bge=Mi({},Rm,{animationName:0,elapsedTime:0,pseudoElement:0}),Vge=As(Bge),jge=Mi({},Rm,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$ge=As(jge),Hge=Mi({},Rm,{data:0}),CH=As(Hge),zge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gge={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kge(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=Gge[e])?!!r[e]:!1}function RD(){return Kge}var qge=Mi({},jv,{key:function(e){if(e.key){var r=zge[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=jy(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wge[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:RD,charCode:function(e){return e.type==="keypress"?jy(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?jy(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yge=As(qge),Xge=Mi({},Eb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bH=As(Xge),Jge=Mi({},jv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:RD}),Qge=As(Jge),Zge=Mi({},Rm,{propertyName:0,elapsedTime:0,pseudoElement:0}),eve=As(Zge),tve=Mi({},Eb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),nve=As(tve),rve=[9,13,27,32],wD=uu&&"CompositionEvent"in window,jg=null;uu&&"documentMode"in document&&(jg=document.documentMode);var ive=uu&&"TextEvent"in window&&!jg,yK=uu&&(!wD||jg&&8<jg&&11>=jg),TH=String.fromCharCode(32),RH=!1;function CK(e,r){switch(e){case"keyup":return rve.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bK(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fp=!1;function ove(e,r){switch(e){case"compositionend":return bK(r);case"keypress":return r.which!==32?null:(RH=!0,TH);case"textInput":return e=r.data,e===TH&&RH?null:e;default:return null}}function ave(e,r){if(Fp)return e==="compositionend"||!wD&&CK(e,r)?(e=SK(),Vy=bD=ud=null,Fp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return yK&&r.locale!=="ko"?null:r.data;default:return null}}var sve={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wH(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!sve[e.type]:r==="textarea"}function TK(e,r,o,s){tK(s),r=EC(r,"onChange"),0<r.length&&(o=new TD("onChange","change",null,o,s),e.push({event:o,listeners:r}))}var $g=null,av=null;function cve(e){kK(e,0)}function _b(e){var r=Vp(e);if(qG(r))return e}function lve(e,r){if(e==="change")return r}var RK=!1;if(uu){var KA;if(uu){var qA="oninput"in document;if(!qA){var IH=document.createElement("div");IH.setAttribute("oninput","return;"),qA=typeof IH.oninput=="function"}KA=qA}else KA=!1;RK=KA&&(!document.documentMode||9<document.documentMode)}function AH(){$g&&($g.detachEvent("onpropertychange",wK),av=$g=null)}function wK(e){if(e.propertyName==="value"&&_b(av)){var r=[];TK(r,av,e,ED(e)),oK(cve,r)}}function uve(e,r,o){e==="focusin"?(AH(),$g=r,av=o,$g.attachEvent("onpropertychange",wK)):e==="focusout"&&AH()}function dve(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _b(av)}function hve(e,r){if(e==="click")return _b(r)}function fve(e,r){if(e==="input"||e==="change")return _b(r)}function pve(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Hc=typeof Object.is=="function"?Object.is:pve;function sv(e,r){if(Hc(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var o=Object.keys(e),s=Object.keys(r);if(o.length!==s.length)return!1;for(s=0;s<o.length;s++){var c=o[s];if(!Kx.call(r,c)||!Hc(e[c],r[c]))return!1}return!0}function OH(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xH(e,r){var o=OH(e);e=0;for(var s;o;){if(o.nodeType===3){if(s=e+o.textContent.length,e<=r&&s>=r)return{node:o,offset:r-e};e=s}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=OH(o)}}function IK(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?IK(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function AK(){for(var e=window,r=dC();r instanceof e.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)e=r.contentWindow;else break;r=dC(e.document)}return r}function ID(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function mve(e){var r=AK(),o=e.focusedElem,s=e.selectionRange;if(r!==o&&o&&o.ownerDocument&&IK(o.ownerDocument.documentElement,o)){if(s!==null&&ID(o)){if(r=s.start,e=s.end,e===void 0&&(e=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(e,o.value.length);else if(e=(r=o.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var c=o.textContent.length,d=Math.min(s.start,c);s=s.end===void 0?d:Math.min(s.end,c),!e.extend&&d>s&&(c=s,s=d,d=c),c=xH(o,d);var f=xH(o,s);c&&f&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(r=r.createRange(),r.setStart(c.node,c.offset),e.removeAllRanges(),d>s?(e.addRange(r),e.extend(f.node,f.offset)):(r.setEnd(f.node,f.offset),e.addRange(r)))}}for(r=[],e=o;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)e=r[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gve=uu&&"documentMode"in document&&11>=document.documentMode,Up=null,hN=null,Hg=null,fN=!1;function NH(e,r,o){var s=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;fN||Up==null||Up!==dC(s)||(s=Up,"selectionStart"in s&&ID(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Hg&&sv(Hg,s)||(Hg=s,s=EC(hN,"onSelect"),0<s.length&&(r=new TD("onSelect","select",null,r,o),e.push({event:r,listeners:s}),r.target=Up)))}function sy(e,r){var o={};return o[e.toLowerCase()]=r.toLowerCase(),o["Webkit"+e]="webkit"+r,o["Moz"+e]="moz"+r,o}var Bp={animationend:sy("Animation","AnimationEnd"),animationiteration:sy("Animation","AnimationIteration"),animationstart:sy("Animation","AnimationStart"),transitionend:sy("Transition","TransitionEnd")},YA={},OK={};uu&&(OK=document.createElement("div").style,"AnimationEvent"in window||(delete Bp.animationend.animation,delete Bp.animationiteration.animation,delete Bp.animationstart.animation),"TransitionEvent"in window||delete Bp.transitionend.transition);function Sb(e){if(YA[e])return YA[e];if(!Bp[e])return e;var r=Bp[e],o;for(o in r)if(r.hasOwnProperty(o)&&o in OK)return YA[e]=r[o];return e}var xK=Sb("animationend"),NK=Sb("animationiteration"),PK=Sb("animationstart"),DK=Sb("transitionend"),LK=new Map,PH="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Od(e,r){LK.set(e,r),Xh(r,[e])}for(var XA=0;XA<PH.length;XA++){var JA=PH[XA],vve=JA.toLowerCase(),Eve=JA[0].toUpperCase()+JA.slice(1);Od(vve,"on"+Eve)}Od(xK,"onAnimationEnd");Od(NK,"onAnimationIteration");Od(PK,"onAnimationStart");Od("dblclick","onDoubleClick");Od("focusin","onFocus");Od("focusout","onBlur");Od(DK,"onTransitionEnd");om("onMouseEnter",["mouseout","mouseover"]);om("onMouseLeave",["mouseout","mouseover"]);om("onPointerEnter",["pointerout","pointerover"]);om("onPointerLeave",["pointerout","pointerover"]);Xh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_ve=new Set("cancel close invalid load scroll toggle".split(" ").concat(kg));function DH(e,r,o){var s=e.type||"unknown-event";e.currentTarget=o,vge(s,r,void 0,e),e.currentTarget=null}function kK(e,r){r=(r&4)!==0;for(var o=0;o<e.length;o++){var s=e[o],c=s.event;s=s.listeners;e:{var d=void 0;if(r)for(var f=s.length-1;0<=f;f--){var v=s[f],g=v.instance,_=v.currentTarget;if(v=v.listener,g!==d&&c.isPropagationStopped())break e;DH(c,v,_),d=g}else for(f=0;f<s.length;f++){if(v=s[f],g=v.instance,_=v.currentTarget,v=v.listener,g!==d&&c.isPropagationStopped())break e;DH(c,v,_),d=g}}}if(fC)throw e=cN,fC=!1,cN=null,e}function bi(e,r){var o=r[EN];o===void 0&&(o=r[EN]=new Set);var s=e+"__bubble";o.has(s)||(MK(r,e,2,!1),o.add(s))}function QA(e,r,o){var s=0;r&&(s|=4),MK(o,e,s,r)}var cy="_reactListening"+Math.random().toString(36).slice(2);function cv(e){if(!e[cy]){e[cy]=!0,HG.forEach(function(o){o!=="selectionchange"&&(_ve.has(o)||QA(o,!1,e),QA(o,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[cy]||(r[cy]=!0,QA("selectionchange",!1,r))}}function MK(e,r,o,s){switch(_K(r)){case 1:var c=Dge;break;case 4:c=Lge;break;default:c=CD}o=c.bind(null,r,o,e),c=void 0,!sN||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(r,o,{capture:!0,passive:c}):e.addEventListener(r,o,!0):c!==void 0?e.addEventListener(r,o,{passive:c}):e.addEventListener(r,o,!1)}function ZA(e,r,o,s,c){var d=s;if(!(r&1)&&!(r&2)&&s!==null)e:for(;;){if(s===null)return;var f=s.tag;if(f===3||f===4){var v=s.stateNode.containerInfo;if(v===c||v.nodeType===8&&v.parentNode===c)break;if(f===4)for(f=s.return;f!==null;){var g=f.tag;if((g===3||g===4)&&(g=f.stateNode.containerInfo,g===c||g.nodeType===8&&g.parentNode===c))return;f=f.return}for(;v!==null;){if(f=Oh(v),f===null)return;if(g=f.tag,g===5||g===6){s=d=f;continue e}v=v.parentNode}}s=s.return}oK(function(){var _=d,C=ED(o),b=[];e:{var T=LK.get(e);if(T!==void 0){var I=TD,w=e;switch(e){case"keypress":if(jy(o)===0)break e;case"keydown":case"keyup":I=Yge;break;case"focusin":w="focus",I=GA;break;case"focusout":w="blur",I=GA;break;case"beforeblur":case"afterblur":I=GA;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=yH;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=Fge;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=Qge;break;case xK:case NK:case PK:I=Vge;break;case DK:I=eve;break;case"scroll":I=kge;break;case"wheel":I=nve;break;case"copy":case"cut":case"paste":I=$ge;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=bH}var x=(r&4)!==0,N=!x&&e==="scroll",P=x?T!==null?T+"Capture":null:T;x=[];for(var O=_,L;O!==null;){L=O;var M=L.stateNode;if(L.tag===5&&M!==null&&(L=M,P!==null&&(M=nv(O,P),M!=null&&x.push(lv(O,M,L)))),N)break;O=O.return}0<x.length&&(T=new I(T,w,null,o,C),b.push({event:T,listeners:x}))}}if(!(r&7)){e:{if(T=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",T&&o!==oN&&(w=o.relatedTarget||o.fromElement)&&(Oh(w)||w[du]))break e;if((I||T)&&(T=C.window===C?C:(T=C.ownerDocument)?T.defaultView||T.parentWindow:window,I?(w=o.relatedTarget||o.toElement,I=_,w=w?Oh(w):null,w!==null&&(N=Jh(w),w!==N||w.tag!==5&&w.tag!==6)&&(w=null)):(I=null,w=_),I!==w)){if(x=yH,M="onMouseLeave",P="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(x=bH,M="onPointerLeave",P="onPointerEnter",O="pointer"),N=I==null?T:Vp(I),L=w==null?T:Vp(w),T=new x(M,O+"leave",I,o,C),T.target=N,T.relatedTarget=L,M=null,Oh(C)===_&&(x=new x(P,O+"enter",w,o,C),x.target=L,x.relatedTarget=N,M=x),N=M,I&&w)t:{for(x=I,P=w,O=0,L=x;L;L=Rp(L))O++;for(L=0,M=P;M;M=Rp(M))L++;for(;0<O-L;)x=Rp(x),O--;for(;0<L-O;)P=Rp(P),L--;for(;O--;){if(x===P||P!==null&&x===P.alternate)break t;x=Rp(x),P=Rp(P)}x=null}else x=null;I!==null&&LH(b,T,I,x,!1),w!==null&&N!==null&&LH(b,N,w,x,!0)}}e:{if(T=_?Vp(_):window,I=T.nodeName&&T.nodeName.toLowerCase(),I==="select"||I==="input"&&T.type==="file")var F=lve;else if(wH(T))if(RK)F=fve;else{F=dve;var V=uve}else(I=T.nodeName)&&I.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(F=hve);if(F&&(F=F(e,_))){TK(b,F,o,C);break e}V&&V(e,T,_),e==="focusout"&&(V=T._wrapperState)&&V.controlled&&T.type==="number"&&eN(T,"number",T.value)}switch(V=_?Vp(_):window,e){case"focusin":(wH(V)||V.contentEditable==="true")&&(Up=V,hN=_,Hg=null);break;case"focusout":Hg=hN=Up=null;break;case"mousedown":fN=!0;break;case"contextmenu":case"mouseup":case"dragend":fN=!1,NH(b,o,C);break;case"selectionchange":if(gve)break;case"keydown":case"keyup":NH(b,o,C)}var j;if(wD)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Fp?CK(e,o)&&(z="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(z="onCompositionStart");z&&(yK&&o.locale!=="ko"&&(Fp||z!=="onCompositionStart"?z==="onCompositionEnd"&&Fp&&(j=SK()):(ud=C,bD="value"in ud?ud.value:ud.textContent,Fp=!0)),V=EC(_,z),0<V.length&&(z=new CH(z,e,null,o,C),b.push({event:z,listeners:V}),j?z.data=j:(j=bK(o),j!==null&&(z.data=j)))),(j=ive?ove(e,o):ave(e,o))&&(_=EC(_,"onBeforeInput"),0<_.length&&(C=new CH("onBeforeInput","beforeinput",null,o,C),b.push({event:C,listeners:_}),C.data=j))}kK(b,r)})}function lv(e,r,o){return{instance:e,listener:r,currentTarget:o}}function EC(e,r){for(var o=r+"Capture",s=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=nv(e,o),d!=null&&s.unshift(lv(e,d,c)),d=nv(e,r),d!=null&&s.push(lv(e,d,c))),e=e.return}return s}function Rp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function LH(e,r,o,s,c){for(var d=r._reactName,f=[];o!==null&&o!==s;){var v=o,g=v.alternate,_=v.stateNode;if(g!==null&&g===s)break;v.tag===5&&_!==null&&(v=_,c?(g=nv(o,d),g!=null&&f.unshift(lv(o,g,v))):c||(g=nv(o,d),g!=null&&f.push(lv(o,g,v)))),o=o.return}f.length!==0&&e.push({event:r,listeners:f})}var Sve=/\r\n?/g,yve=/\u0000|\uFFFD/g;function kH(e){return(typeof e=="string"?e:""+e).replace(Sve,`
`).replace(yve,"")}function ly(e,r,o){if(r=kH(r),kH(e)!==r&&o)throw Error(St(425))}function _C(){}var pN=null,mN=null;function gN(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var vN=typeof setTimeout=="function"?setTimeout:void 0,Cve=typeof clearTimeout=="function"?clearTimeout:void 0,MH=typeof Promise=="function"?Promise:void 0,bve=typeof queueMicrotask=="function"?queueMicrotask:typeof MH<"u"?function(e){return MH.resolve(null).then(e).catch(Tve)}:vN;function Tve(e){setTimeout(function(){throw e})}function eO(e,r){var o=r,s=0;do{var c=o.nextSibling;if(e.removeChild(o),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(s===0){e.removeChild(c),ov(r);return}s--}else o!=="$"&&o!=="$?"&&o!=="$!"||s++;o=c}while(o);ov(r)}function _d(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function FH(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return e;r--}else o==="/$"&&r++}e=e.previousSibling}return null}var wm=Math.random().toString(36).slice(2),Al="__reactFiber$"+wm,uv="__reactProps$"+wm,du="__reactContainer$"+wm,EN="__reactEvents$"+wm,Rve="__reactListeners$"+wm,wve="__reactHandles$"+wm;function Oh(e){var r=e[Al];if(r)return r;for(var o=e.parentNode;o;){if(r=o[du]||o[Al]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(e=FH(e);e!==null;){if(o=e[Al])return o;e=FH(e)}return r}e=o,o=e.parentNode}return null}function $v(e){return e=e[Al]||e[du],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vp(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(St(33))}function yb(e){return e[uv]||null}var _N=[],jp=-1;function xd(e){return{current:e}}function Ti(e){0>jp||(e.current=_N[jp],_N[jp]=null,jp--)}function gi(e,r){jp++,_N[jp]=e.current,e.current=r}var Rd={},ya=xd(Rd),Qa=xd(!1),Uh=Rd;function am(e,r){var o=e.type.contextTypes;if(!o)return Rd;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===r)return s.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in o)c[d]=r[d];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=c),c}function Za(e){return e=e.childContextTypes,e!=null}function SC(){Ti(Qa),Ti(ya)}function UH(e,r,o){if(ya.current!==Rd)throw Error(St(168));gi(ya,r),gi(Qa,o)}function FK(e,r,o){var s=e.stateNode;if(r=r.childContextTypes,typeof s.getChildContext!="function")return o;s=s.getChildContext();for(var c in s)if(!(c in r))throw Error(St(108,uge(e)||"Unknown",c));return Mi({},o,s)}function yC(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rd,Uh=ya.current,gi(ya,e),gi(Qa,Qa.current),!0}function BH(e,r,o){var s=e.stateNode;if(!s)throw Error(St(169));o?(e=FK(e,r,Uh),s.__reactInternalMemoizedMergedChildContext=e,Ti(Qa),Ti(ya),gi(ya,e)):Ti(Qa),gi(Qa,o)}var iu=null,Cb=!1,tO=!1;function UK(e){iu===null?iu=[e]:iu.push(e)}function Ive(e){Cb=!0,UK(e)}function Nd(){if(!tO&&iu!==null){tO=!0;var e=0,r=Yr;try{var o=iu;for(Yr=1;e<o.length;e++){var s=o[e];do s=s(!0);while(s!==null)}iu=null,Cb=!1}catch(c){throw iu!==null&&(iu=iu.slice(e+1)),lK(_D,Nd),c}finally{Yr=r,tO=!1}}return null}var $p=[],Hp=0,CC=null,bC=0,nc=[],rc=0,Bh=null,ou=1,au="";function Rh(e,r){$p[Hp++]=bC,$p[Hp++]=CC,CC=e,bC=r}function BK(e,r,o){nc[rc++]=ou,nc[rc++]=au,nc[rc++]=Bh,Bh=e;var s=ou;e=au;var c=32-Uc(s)-1;s&=~(1<<c),o+=1;var d=32-Uc(r)+c;if(30<d){var f=c-c%5;d=(s&(1<<f)-1).toString(32),s>>=f,c-=f,ou=1<<32-Uc(r)+c|o<<c|s,au=d+e}else ou=1<<d|o<<c|s,au=e}function AD(e){e.return!==null&&(Rh(e,1),BK(e,1,0))}function OD(e){for(;e===CC;)CC=$p[--Hp],$p[Hp]=null,bC=$p[--Hp],$p[Hp]=null;for(;e===Bh;)Bh=nc[--rc],nc[rc]=null,au=nc[--rc],nc[rc]=null,ou=nc[--rc],nc[rc]=null}var Cs=null,Ss=null,Ai=!1,Mc=null;function VK(e,r){var o=ic(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=e,r=e.deletions,r===null?(e.deletions=[o],e.flags|=16):r.push(o)}function VH(e,r){switch(e.tag){case 5:var o=e.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,Cs=e,Ss=_d(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,Cs=e,Ss=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Bh!==null?{id:ou,overflow:au}:null,e.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=ic(18,null,null,0),o.stateNode=r,o.return=e,e.child=o,Cs=e,Ss=null,!0):!1;default:return!1}}function SN(e){return(e.mode&1)!==0&&(e.flags&128)===0}function yN(e){if(Ai){var r=Ss;if(r){var o=r;if(!VH(e,r)){if(SN(e))throw Error(St(418));r=_d(o.nextSibling);var s=Cs;r&&VH(e,r)?VK(s,o):(e.flags=e.flags&-4097|2,Ai=!1,Cs=e)}}else{if(SN(e))throw Error(St(418));e.flags=e.flags&-4097|2,Ai=!1,Cs=e}}}function jH(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Cs=e}function uy(e){if(e!==Cs)return!1;if(!Ai)return jH(e),Ai=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!gN(e.type,e.memoizedProps)),r&&(r=Ss)){if(SN(e))throw jK(),Error(St(418));for(;r;)VK(e,r),r=_d(r.nextSibling)}if(jH(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(St(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(r===0){Ss=_d(e.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}e=e.nextSibling}Ss=null}}else Ss=Cs?_d(e.stateNode.nextSibling):null;return!0}function jK(){for(var e=Ss;e;)e=_d(e.nextSibling)}function sm(){Ss=Cs=null,Ai=!1}function xD(e){Mc===null?Mc=[e]:Mc.push(e)}var Ave=vu.ReactCurrentBatchConfig;function gg(e,r,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(St(309));var s=o.stateNode}if(!s)throw Error(St(147,e));var c=s,d=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===d?r.ref:(r=function(f){var v=c.refs;f===null?delete v[d]:v[d]=f},r._stringRef=d,r)}if(typeof e!="string")throw Error(St(284));if(!o._owner)throw Error(St(290,e))}return e}function dy(e,r){throw e=Object.prototype.toString.call(r),Error(St(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function $H(e){var r=e._init;return r(e._payload)}function $K(e){function r(P,O){if(e){var L=P.deletions;L===null?(P.deletions=[O],P.flags|=16):L.push(O)}}function o(P,O){if(!e)return null;for(;O!==null;)r(P,O),O=O.sibling;return null}function s(P,O){for(P=new Map;O!==null;)O.key!==null?P.set(O.key,O):P.set(O.index,O),O=O.sibling;return P}function c(P,O){return P=bd(P,O),P.index=0,P.sibling=null,P}function d(P,O,L){return P.index=L,e?(L=P.alternate,L!==null?(L=L.index,L<O?(P.flags|=2,O):L):(P.flags|=2,O)):(P.flags|=1048576,O)}function f(P){return e&&P.alternate===null&&(P.flags|=2),P}function v(P,O,L,M){return O===null||O.tag!==6?(O=cO(L,P.mode,M),O.return=P,O):(O=c(O,L),O.return=P,O)}function g(P,O,L,M){var F=L.type;return F===Mp?C(P,O,L.props.children,M,L.key):O!==null&&(O.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ad&&$H(F)===O.type)?(M=c(O,L.props),M.ref=gg(P,O,L),M.return=P,M):(M=qy(L.type,L.key,L.props,null,P.mode,M),M.ref=gg(P,O,L),M.return=P,M)}function _(P,O,L,M){return O===null||O.tag!==4||O.stateNode.containerInfo!==L.containerInfo||O.stateNode.implementation!==L.implementation?(O=lO(L,P.mode,M),O.return=P,O):(O=c(O,L.children||[]),O.return=P,O)}function C(P,O,L,M,F){return O===null||O.tag!==7?(O=Lh(L,P.mode,M,F),O.return=P,O):(O=c(O,L),O.return=P,O)}function b(P,O,L){if(typeof O=="string"&&O!==""||typeof O=="number")return O=cO(""+O,P.mode,L),O.return=P,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ey:return L=qy(O.type,O.key,O.props,null,P.mode,L),L.ref=gg(P,null,O),L.return=P,L;case kp:return O=lO(O,P.mode,L),O.return=P,O;case ad:var M=O._init;return b(P,M(O._payload),L)}if(Dg(O)||dg(O))return O=Lh(O,P.mode,L,null),O.return=P,O;dy(P,O)}return null}function T(P,O,L,M){var F=O!==null?O.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return F!==null?null:v(P,O,""+L,M);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case ey:return L.key===F?g(P,O,L,M):null;case kp:return L.key===F?_(P,O,L,M):null;case ad:return F=L._init,T(P,O,F(L._payload),M)}if(Dg(L)||dg(L))return F!==null?null:C(P,O,L,M,null);dy(P,L)}return null}function I(P,O,L,M,F){if(typeof M=="string"&&M!==""||typeof M=="number")return P=P.get(L)||null,v(O,P,""+M,F);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ey:return P=P.get(M.key===null?L:M.key)||null,g(O,P,M,F);case kp:return P=P.get(M.key===null?L:M.key)||null,_(O,P,M,F);case ad:var V=M._init;return I(P,O,L,V(M._payload),F)}if(Dg(M)||dg(M))return P=P.get(L)||null,C(O,P,M,F,null);dy(O,M)}return null}function w(P,O,L,M){for(var F=null,V=null,j=O,z=O=0,q=null;j!==null&&z<L.length;z++){j.index>z?(q=j,j=null):q=j.sibling;var W=T(P,j,L[z],M);if(W===null){j===null&&(j=q);break}e&&j&&W.alternate===null&&r(P,j),O=d(W,O,z),V===null?F=W:V.sibling=W,V=W,j=q}if(z===L.length)return o(P,j),Ai&&Rh(P,z),F;if(j===null){for(;z<L.length;z++)j=b(P,L[z],M),j!==null&&(O=d(j,O,z),V===null?F=j:V.sibling=j,V=j);return Ai&&Rh(P,z),F}for(j=s(P,j);z<L.length;z++)q=I(j,P,z,L[z],M),q!==null&&(e&&q.alternate!==null&&j.delete(q.key===null?z:q.key),O=d(q,O,z),V===null?F=q:V.sibling=q,V=q);return e&&j.forEach(function(J){return r(P,J)}),Ai&&Rh(P,z),F}function x(P,O,L,M){var F=dg(L);if(typeof F!="function")throw Error(St(150));if(L=F.call(L),L==null)throw Error(St(151));for(var V=F=null,j=O,z=O=0,q=null,W=L.next();j!==null&&!W.done;z++,W=L.next()){j.index>z?(q=j,j=null):q=j.sibling;var J=T(P,j,W.value,M);if(J===null){j===null&&(j=q);break}e&&j&&J.alternate===null&&r(P,j),O=d(J,O,z),V===null?F=J:V.sibling=J,V=J,j=q}if(W.done)return o(P,j),Ai&&Rh(P,z),F;if(j===null){for(;!W.done;z++,W=L.next())W=b(P,W.value,M),W!==null&&(O=d(W,O,z),V===null?F=W:V.sibling=W,V=W);return Ai&&Rh(P,z),F}for(j=s(P,j);!W.done;z++,W=L.next())W=I(j,P,z,W.value,M),W!==null&&(e&&W.alternate!==null&&j.delete(W.key===null?z:W.key),O=d(W,O,z),V===null?F=W:V.sibling=W,V=W);return e&&j.forEach(function(te){return r(P,te)}),Ai&&Rh(P,z),F}function N(P,O,L,M){if(typeof L=="object"&&L!==null&&L.type===Mp&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case ey:e:{for(var F=L.key,V=O;V!==null;){if(V.key===F){if(F=L.type,F===Mp){if(V.tag===7){o(P,V.sibling),O=c(V,L.props.children),O.return=P,P=O;break e}}else if(V.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ad&&$H(F)===V.type){o(P,V.sibling),O=c(V,L.props),O.ref=gg(P,V,L),O.return=P,P=O;break e}o(P,V);break}else r(P,V);V=V.sibling}L.type===Mp?(O=Lh(L.props.children,P.mode,M,L.key),O.return=P,P=O):(M=qy(L.type,L.key,L.props,null,P.mode,M),M.ref=gg(P,O,L),M.return=P,P=M)}return f(P);case kp:e:{for(V=L.key;O!==null;){if(O.key===V)if(O.tag===4&&O.stateNode.containerInfo===L.containerInfo&&O.stateNode.implementation===L.implementation){o(P,O.sibling),O=c(O,L.children||[]),O.return=P,P=O;break e}else{o(P,O);break}else r(P,O);O=O.sibling}O=lO(L,P.mode,M),O.return=P,P=O}return f(P);case ad:return V=L._init,N(P,O,V(L._payload),M)}if(Dg(L))return w(P,O,L,M);if(dg(L))return x(P,O,L,M);dy(P,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,O!==null&&O.tag===6?(o(P,O.sibling),O=c(O,L),O.return=P,P=O):(o(P,O),O=cO(L,P.mode,M),O.return=P,P=O),f(P)):o(P,O)}return N}var cm=$K(!0),HK=$K(!1),TC=xd(null),RC=null,zp=null,ND=null;function PD(){ND=zp=RC=null}function DD(e){var r=TC.current;Ti(TC),e._currentValue=r}function CN(e,r,o){for(;e!==null;){var s=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,s!==null&&(s.childLanes|=r)):s!==null&&(s.childLanes&r)!==r&&(s.childLanes|=r),e===o)break;e=e.return}}function em(e,r){RC=e,ND=zp=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&r&&(Xa=!0),e.firstContext=null)}function cc(e){var r=e._currentValue;if(ND!==e)if(e={context:e,memoizedValue:r,next:null},zp===null){if(RC===null)throw Error(St(308));zp=e,RC.dependencies={lanes:0,firstContext:e}}else zp=zp.next=e;return r}var xh=null;function LD(e){xh===null?xh=[e]:xh.push(e)}function zK(e,r,o,s){var c=r.interleaved;return c===null?(o.next=o,LD(r)):(o.next=c.next,c.next=o),r.interleaved=o,hu(e,s)}function hu(e,r){e.lanes|=r;var o=e.alternate;for(o!==null&&(o.lanes|=r),o=e,e=e.return;e!==null;)e.childLanes|=r,o=e.alternate,o!==null&&(o.childLanes|=r),o=e,e=e.return;return o.tag===3?o.stateNode:null}var sd=!1;function kD(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WK(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function su(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function Sd(e,r,o){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Or&2){var c=s.pending;return c===null?r.next=r:(r.next=c.next,c.next=r),s.pending=r,hu(e,o)}return c=s.interleaved,c===null?(r.next=r,LD(s)):(r.next=c.next,c.next=r),s.interleaved=r,hu(e,o)}function $y(e,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var s=r.lanes;s&=e.pendingLanes,o|=s,r.lanes=o,SD(e,o)}}function HH(e,r){var o=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,o===s)){var c=null,d=null;if(o=o.firstBaseUpdate,o!==null){do{var f={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};d===null?c=d=f:d=d.next=f,o=o.next}while(o!==null);d===null?c=d=r:d=d.next=r}else c=d=r;o={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:s.shared,effects:s.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=r:e.next=r,o.lastBaseUpdate=r}function wC(e,r,o,s){var c=e.updateQueue;sd=!1;var d=c.firstBaseUpdate,f=c.lastBaseUpdate,v=c.shared.pending;if(v!==null){c.shared.pending=null;var g=v,_=g.next;g.next=null,f===null?d=_:f.next=_,f=g;var C=e.alternate;C!==null&&(C=C.updateQueue,v=C.lastBaseUpdate,v!==f&&(v===null?C.firstBaseUpdate=_:v.next=_,C.lastBaseUpdate=g))}if(d!==null){var b=c.baseState;f=0,C=_=g=null,v=d;do{var T=v.lane,I=v.eventTime;if((s&T)===T){C!==null&&(C=C.next={eventTime:I,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var w=e,x=v;switch(T=r,I=o,x.tag){case 1:if(w=x.payload,typeof w=="function"){b=w.call(I,b,T);break e}b=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,T=typeof w=="function"?w.call(I,b,T):w,T==null)break e;b=Mi({},b,T);break e;case 2:sd=!0}}v.callback!==null&&v.lane!==0&&(e.flags|=64,T=c.effects,T===null?c.effects=[v]:T.push(v))}else I={eventTime:I,lane:T,tag:v.tag,payload:v.payload,callback:v.callback,next:null},C===null?(_=C=I,g=b):C=C.next=I,f|=T;if(v=v.next,v===null){if(v=c.shared.pending,v===null)break;T=v,v=T.next,T.next=null,c.lastBaseUpdate=T,c.shared.pending=null}}while(1);if(C===null&&(g=b),c.baseState=g,c.firstBaseUpdate=_,c.lastBaseUpdate=C,r=c.shared.interleaved,r!==null){c=r;do f|=c.lane,c=c.next;while(c!==r)}else d===null&&(c.shared.lanes=0);jh|=f,e.lanes=f,e.memoizedState=b}}function zH(e,r,o){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var s=e[r],c=s.callback;if(c!==null){if(s.callback=null,s=o,typeof c!="function")throw Error(St(191,c));c.call(s)}}}var Hv={},xl=xd(Hv),dv=xd(Hv),hv=xd(Hv);function Nh(e){if(e===Hv)throw Error(St(174));return e}function MD(e,r){switch(gi(hv,r),gi(dv,e),gi(xl,Hv),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:nN(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=nN(r,e)}Ti(xl),gi(xl,r)}function lm(){Ti(xl),Ti(dv),Ti(hv)}function GK(e){Nh(hv.current);var r=Nh(xl.current),o=nN(r,e.type);r!==o&&(gi(dv,e),gi(xl,o))}function FD(e){dv.current===e&&(Ti(xl),Ti(dv))}var Li=xd(0);function IC(e){for(var r=e;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var nO=[];function UD(){for(var e=0;e<nO.length;e++)nO[e]._workInProgressVersionPrimary=null;nO.length=0}var Hy=vu.ReactCurrentDispatcher,rO=vu.ReactCurrentBatchConfig,Vh=0,ki=null,So=null,ko=null,AC=!1,zg=!1,fv=0,Ove=0;function fa(){throw Error(St(321))}function BD(e,r){if(r===null)return!1;for(var o=0;o<r.length&&o<e.length;o++)if(!Hc(e[o],r[o]))return!1;return!0}function VD(e,r,o,s,c,d){if(Vh=d,ki=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Hy.current=e===null||e.memoizedState===null?Dve:Lve,e=o(s,c),zg){d=0;do{if(zg=!1,fv=0,25<=d)throw Error(St(301));d+=1,ko=So=null,r.updateQueue=null,Hy.current=kve,e=o(s,c)}while(zg)}if(Hy.current=OC,r=So!==null&&So.next!==null,Vh=0,ko=So=ki=null,AC=!1,r)throw Error(St(300));return e}function jD(){var e=fv!==0;return fv=0,e}function Tl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ko===null?ki.memoizedState=ko=e:ko=ko.next=e,ko}function lc(){if(So===null){var e=ki.alternate;e=e!==null?e.memoizedState:null}else e=So.next;var r=ko===null?ki.memoizedState:ko.next;if(r!==null)ko=r,So=e;else{if(e===null)throw Error(St(310));So=e,e={memoizedState:So.memoizedState,baseState:So.baseState,baseQueue:So.baseQueue,queue:So.queue,next:null},ko===null?ki.memoizedState=ko=e:ko=ko.next=e}return ko}function pv(e,r){return typeof r=="function"?r(e):r}function iO(e){var r=lc(),o=r.queue;if(o===null)throw Error(St(311));o.lastRenderedReducer=e;var s=So,c=s.baseQueue,d=o.pending;if(d!==null){if(c!==null){var f=c.next;c.next=d.next,d.next=f}s.baseQueue=c=d,o.pending=null}if(c!==null){d=c.next,s=s.baseState;var v=f=null,g=null,_=d;do{var C=_.lane;if((Vh&C)===C)g!==null&&(g=g.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),s=_.hasEagerState?_.eagerState:e(s,_.action);else{var b={lane:C,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};g===null?(v=g=b,f=s):g=g.next=b,ki.lanes|=C,jh|=C}_=_.next}while(_!==null&&_!==d);g===null?f=s:g.next=v,Hc(s,r.memoizedState)||(Xa=!0),r.memoizedState=s,r.baseState=f,r.baseQueue=g,o.lastRenderedState=s}if(e=o.interleaved,e!==null){c=e;do d=c.lane,ki.lanes|=d,jh|=d,c=c.next;while(c!==e)}else c===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function oO(e){var r=lc(),o=r.queue;if(o===null)throw Error(St(311));o.lastRenderedReducer=e;var s=o.dispatch,c=o.pending,d=r.memoizedState;if(c!==null){o.pending=null;var f=c=c.next;do d=e(d,f.action),f=f.next;while(f!==c);Hc(d,r.memoizedState)||(Xa=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),o.lastRenderedState=d}return[d,s]}function KK(){}function qK(e,r){var o=ki,s=lc(),c=r(),d=!Hc(s.memoizedState,c);if(d&&(s.memoizedState=c,Xa=!0),s=s.queue,$D(JK.bind(null,o,s,e),[e]),s.getSnapshot!==r||d||ko!==null&&ko.memoizedState.tag&1){if(o.flags|=2048,mv(9,XK.bind(null,o,s,c,r),void 0,null),Mo===null)throw Error(St(349));Vh&30||YK(o,r,c)}return c}function YK(e,r,o){e.flags|=16384,e={getSnapshot:r,value:o},r=ki.updateQueue,r===null?(r={lastEffect:null,stores:null},ki.updateQueue=r,r.stores=[e]):(o=r.stores,o===null?r.stores=[e]:o.push(e))}function XK(e,r,o,s){r.value=o,r.getSnapshot=s,QK(r)&&ZK(e)}function JK(e,r,o){return o(function(){QK(r)&&ZK(e)})}function QK(e){var r=e.getSnapshot;e=e.value;try{var o=r();return!Hc(e,o)}catch{return!0}}function ZK(e){var r=hu(e,1);r!==null&&Bc(r,e,1,-1)}function WH(e){var r=Tl();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pv,lastRenderedState:e},r.queue=e,e=e.dispatch=Pve.bind(null,ki,e),[r.memoizedState,e]}function mv(e,r,o,s){return e={tag:e,create:r,destroy:o,deps:s,next:null},r=ki.updateQueue,r===null?(r={lastEffect:null,stores:null},ki.updateQueue=r,r.lastEffect=e.next=e):(o=r.lastEffect,o===null?r.lastEffect=e.next=e:(s=o.next,o.next=e,e.next=s,r.lastEffect=e)),e}function eq(){return lc().memoizedState}function zy(e,r,o,s){var c=Tl();ki.flags|=e,c.memoizedState=mv(1|r,o,void 0,s===void 0?null:s)}function bb(e,r,o,s){var c=lc();s=s===void 0?null:s;var d=void 0;if(So!==null){var f=So.memoizedState;if(d=f.destroy,s!==null&&BD(s,f.deps)){c.memoizedState=mv(r,o,d,s);return}}ki.flags|=e,c.memoizedState=mv(1|r,o,d,s)}function GH(e,r){return zy(8390656,8,e,r)}function $D(e,r){return bb(2048,8,e,r)}function tq(e,r){return bb(4,2,e,r)}function nq(e,r){return bb(4,4,e,r)}function rq(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function iq(e,r,o){return o=o!=null?o.concat([e]):null,bb(4,4,rq.bind(null,r,e),o)}function HD(){}function oq(e,r){var o=lc();r=r===void 0?null:r;var s=o.memoizedState;return s!==null&&r!==null&&BD(r,s[1])?s[0]:(o.memoizedState=[e,r],e)}function aq(e,r){var o=lc();r=r===void 0?null:r;var s=o.memoizedState;return s!==null&&r!==null&&BD(r,s[1])?s[0]:(e=e(),o.memoizedState=[e,r],e)}function sq(e,r,o){return Vh&21?(Hc(o,r)||(o=hK(),ki.lanes|=o,jh|=o,e.baseState=!0),r):(e.baseState&&(e.baseState=!1,Xa=!0),e.memoizedState=o)}function xve(e,r){var o=Yr;Yr=o!==0&&4>o?o:4,e(!0);var s=rO.transition;rO.transition={};try{e(!1),r()}finally{Yr=o,rO.transition=s}}function cq(){return lc().memoizedState}function Nve(e,r,o){var s=Cd(e);if(o={lane:s,action:o,hasEagerState:!1,eagerState:null,next:null},lq(e))uq(r,o);else if(o=zK(e,r,o,s),o!==null){var c=Aa();Bc(o,e,s,c),dq(o,r,s)}}function Pve(e,r,o){var s=Cd(e),c={lane:s,action:o,hasEagerState:!1,eagerState:null,next:null};if(lq(e))uq(r,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var f=r.lastRenderedState,v=d(f,o);if(c.hasEagerState=!0,c.eagerState=v,Hc(v,f)){var g=r.interleaved;g===null?(c.next=c,LD(r)):(c.next=g.next,g.next=c),r.interleaved=c;return}}catch{}finally{}o=zK(e,r,c,s),o!==null&&(c=Aa(),Bc(o,e,s,c),dq(o,r,s))}}function lq(e){var r=e.alternate;return e===ki||r!==null&&r===ki}function uq(e,r){zg=AC=!0;var o=e.pending;o===null?r.next=r:(r.next=o.next,o.next=r),e.pending=r}function dq(e,r,o){if(o&4194240){var s=r.lanes;s&=e.pendingLanes,o|=s,r.lanes=o,SD(e,o)}}var OC={readContext:cc,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Dve={readContext:cc,useCallback:function(e,r){return Tl().memoizedState=[e,r===void 0?null:r],e},useContext:cc,useEffect:GH,useImperativeHandle:function(e,r,o){return o=o!=null?o.concat([e]):null,zy(4194308,4,rq.bind(null,r,e),o)},useLayoutEffect:function(e,r){return zy(4194308,4,e,r)},useInsertionEffect:function(e,r){return zy(4,2,e,r)},useMemo:function(e,r){var o=Tl();return r=r===void 0?null:r,e=e(),o.memoizedState=[e,r],e},useReducer:function(e,r,o){var s=Tl();return r=o!==void 0?o(r):r,s.memoizedState=s.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},s.queue=e,e=e.dispatch=Nve.bind(null,ki,e),[s.memoizedState,e]},useRef:function(e){var r=Tl();return e={current:e},r.memoizedState=e},useState:WH,useDebugValue:HD,useDeferredValue:function(e){return Tl().memoizedState=e},useTransition:function(){var e=WH(!1),r=e[0];return e=xve.bind(null,e[1]),Tl().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,o){var s=ki,c=Tl();if(Ai){if(o===void 0)throw Error(St(407));o=o()}else{if(o=r(),Mo===null)throw Error(St(349));Vh&30||YK(s,r,o)}c.memoizedState=o;var d={value:o,getSnapshot:r};return c.queue=d,GH(JK.bind(null,s,d,e),[e]),s.flags|=2048,mv(9,XK.bind(null,s,d,o,r),void 0,null),o},useId:function(){var e=Tl(),r=Mo.identifierPrefix;if(Ai){var o=au,s=ou;o=(s&~(1<<32-Uc(s)-1)).toString(32)+o,r=":"+r+"R"+o,o=fv++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=Ove++,r=":"+r+"r"+o.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},Lve={readContext:cc,useCallback:oq,useContext:cc,useEffect:$D,useImperativeHandle:iq,useInsertionEffect:tq,useLayoutEffect:nq,useMemo:aq,useReducer:iO,useRef:eq,useState:function(){return iO(pv)},useDebugValue:HD,useDeferredValue:function(e){var r=lc();return sq(r,So.memoizedState,e)},useTransition:function(){var e=iO(pv)[0],r=lc().memoizedState;return[e,r]},useMutableSource:KK,useSyncExternalStore:qK,useId:cq,unstable_isNewReconciler:!1},kve={readContext:cc,useCallback:oq,useContext:cc,useEffect:$D,useImperativeHandle:iq,useInsertionEffect:tq,useLayoutEffect:nq,useMemo:aq,useReducer:oO,useRef:eq,useState:function(){return oO(pv)},useDebugValue:HD,useDeferredValue:function(e){var r=lc();return So===null?r.memoizedState=e:sq(r,So.memoizedState,e)},useTransition:function(){var e=oO(pv)[0],r=lc().memoizedState;return[e,r]},useMutableSource:KK,useSyncExternalStore:qK,useId:cq,unstable_isNewReconciler:!1};function Pc(e,r){if(e&&e.defaultProps){r=Mi({},r),e=e.defaultProps;for(var o in e)r[o]===void 0&&(r[o]=e[o]);return r}return r}function bN(e,r,o,s){r=e.memoizedState,o=o(s,r),o=o==null?r:Mi({},r,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Tb={isMounted:function(e){return(e=e._reactInternals)?Jh(e)===e:!1},enqueueSetState:function(e,r,o){e=e._reactInternals;var s=Aa(),c=Cd(e),d=su(s,c);d.payload=r,o!=null&&(d.callback=o),r=Sd(e,d,c),r!==null&&(Bc(r,e,c,s),$y(r,e,c))},enqueueReplaceState:function(e,r,o){e=e._reactInternals;var s=Aa(),c=Cd(e),d=su(s,c);d.tag=1,d.payload=r,o!=null&&(d.callback=o),r=Sd(e,d,c),r!==null&&(Bc(r,e,c,s),$y(r,e,c))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var o=Aa(),s=Cd(e),c=su(o,s);c.tag=2,r!=null&&(c.callback=r),r=Sd(e,c,s),r!==null&&(Bc(r,e,s,o),$y(r,e,s))}};function KH(e,r,o,s,c,d,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,d,f):r.prototype&&r.prototype.isPureReactComponent?!sv(o,s)||!sv(c,d):!0}function hq(e,r,o){var s=!1,c=Rd,d=r.contextType;return typeof d=="object"&&d!==null?d=cc(d):(c=Za(r)?Uh:ya.current,s=r.contextTypes,d=(s=s!=null)?am(e,c):Rd),r=new r(o,d),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Tb,e.stateNode=r,r._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),r}function qH(e,r,o,s){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,s),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,s),r.state!==e&&Tb.enqueueReplaceState(r,r.state,null)}function TN(e,r,o,s){var c=e.stateNode;c.props=o,c.state=e.memoizedState,c.refs={},kD(e);var d=r.contextType;typeof d=="object"&&d!==null?c.context=cc(d):(d=Za(r)?Uh:ya.current,c.context=am(e,d)),c.state=e.memoizedState,d=r.getDerivedStateFromProps,typeof d=="function"&&(bN(e,r,d,o),c.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(r=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),r!==c.state&&Tb.enqueueReplaceState(c,c.state,null),wC(e,o,c,s),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function um(e,r){try{var o="",s=r;do o+=lge(s),s=s.return;while(s);var c=o}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:r,stack:c,digest:null}}function aO(e,r,o){return{value:e,source:null,stack:o??null,digest:r??null}}function RN(e,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var Mve=typeof WeakMap=="function"?WeakMap:Map;function fq(e,r,o){o=su(-1,o),o.tag=3,o.payload={element:null};var s=r.value;return o.callback=function(){NC||(NC=!0,kN=s),RN(e,r)},o}function pq(e,r,o){o=su(-1,o),o.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var c=r.value;o.payload=function(){return s(c)},o.callback=function(){RN(e,r)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(o.callback=function(){RN(e,r),typeof s!="function"&&(yd===null?yd=new Set([this]):yd.add(this));var f=r.stack;this.componentDidCatch(r.value,{componentStack:f!==null?f:""})}),o}function YH(e,r,o){var s=e.pingCache;if(s===null){s=e.pingCache=new Mve;var c=new Set;s.set(r,c)}else c=s.get(r),c===void 0&&(c=new Set,s.set(r,c));c.has(o)||(c.add(o),e=Xve.bind(null,e,r,o),r.then(e,e))}function XH(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function JH(e,r,o,s,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===r?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=su(-1,1),r.tag=2,Sd(o,r,1))),o.lanes|=1),e)}var Fve=vu.ReactCurrentOwner,Xa=!1;function Ia(e,r,o,s){r.child=e===null?HK(r,null,o,s):cm(r,e.child,o,s)}function QH(e,r,o,s,c){o=o.render;var d=r.ref;return em(r,c),s=VD(e,r,o,s,d,c),o=jD(),e!==null&&!Xa?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~c,fu(e,r,c)):(Ai&&o&&AD(r),r.flags|=1,Ia(e,r,s,c),r.child)}function ZH(e,r,o,s,c){if(e===null){var d=o.type;return typeof d=="function"&&!JD(d)&&d.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=d,mq(e,r,d,s,c)):(e=qy(o.type,null,s,r,r.mode,c),e.ref=r.ref,e.return=r,r.child=e)}if(d=e.child,!(e.lanes&c)){var f=d.memoizedProps;if(o=o.compare,o=o!==null?o:sv,o(f,s)&&e.ref===r.ref)return fu(e,r,c)}return r.flags|=1,e=bd(d,s),e.ref=r.ref,e.return=r,r.child=e}function mq(e,r,o,s,c){if(e!==null){var d=e.memoizedProps;if(sv(d,s)&&e.ref===r.ref)if(Xa=!1,r.pendingProps=s=d,(e.lanes&c)!==0)e.flags&131072&&(Xa=!0);else return r.lanes=e.lanes,fu(e,r,c)}return wN(e,r,o,s,c)}function gq(e,r,o){var s=r.pendingProps,c=s.children,d=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},gi(Gp,_s),_s|=o;else{if(!(o&1073741824))return e=d!==null?d.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,gi(Gp,_s),_s|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=d!==null?d.baseLanes:o,gi(Gp,_s),_s|=s}else d!==null?(s=d.baseLanes|o,r.memoizedState=null):s=o,gi(Gp,_s),_s|=s;return Ia(e,r,c,o),r.child}function vq(e,r){var o=r.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function wN(e,r,o,s,c){var d=Za(o)?Uh:ya.current;return d=am(r,d),em(r,c),o=VD(e,r,o,s,d,c),s=jD(),e!==null&&!Xa?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~c,fu(e,r,c)):(Ai&&s&&AD(r),r.flags|=1,Ia(e,r,o,c),r.child)}function e7(e,r,o,s,c){if(Za(o)){var d=!0;yC(r)}else d=!1;if(em(r,c),r.stateNode===null)Wy(e,r),hq(r,o,s),TN(r,o,s,c),s=!0;else if(e===null){var f=r.stateNode,v=r.memoizedProps;f.props=v;var g=f.context,_=o.contextType;typeof _=="object"&&_!==null?_=cc(_):(_=Za(o)?Uh:ya.current,_=am(r,_));var C=o.getDerivedStateFromProps,b=typeof C=="function"||typeof f.getSnapshotBeforeUpdate=="function";b||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==s||g!==_)&&qH(r,f,s,_),sd=!1;var T=r.memoizedState;f.state=T,wC(r,s,f,c),g=r.memoizedState,v!==s||T!==g||Qa.current||sd?(typeof C=="function"&&(bN(r,o,C,s),g=r.memoizedState),(v=sd||KH(r,o,v,s,T,g,_))?(b||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=s,r.memoizedState=g),f.props=s,f.state=g,f.context=_,s=v):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),s=!1)}else{f=r.stateNode,WK(e,r),v=r.memoizedProps,_=r.type===r.elementType?v:Pc(r.type,v),f.props=_,b=r.pendingProps,T=f.context,g=o.contextType,typeof g=="object"&&g!==null?g=cc(g):(g=Za(o)?Uh:ya.current,g=am(r,g));var I=o.getDerivedStateFromProps;(C=typeof I=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==b||T!==g)&&qH(r,f,s,g),sd=!1,T=r.memoizedState,f.state=T,wC(r,s,f,c);var w=r.memoizedState;v!==b||T!==w||Qa.current||sd?(typeof I=="function"&&(bN(r,o,I,s),w=r.memoizedState),(_=sd||KH(r,o,_,s,T,w,g)||!1)?(C||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(s,w,g),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(s,w,g)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&T===e.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&T===e.memoizedState||(r.flags|=1024),r.memoizedProps=s,r.memoizedState=w),f.props=s,f.state=w,f.context=g,s=_):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&T===e.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&T===e.memoizedState||(r.flags|=1024),s=!1)}return IN(e,r,o,s,d,c)}function IN(e,r,o,s,c,d){vq(e,r);var f=(r.flags&128)!==0;if(!s&&!f)return c&&BH(r,o,!1),fu(e,r,d);s=r.stateNode,Fve.current=r;var v=f&&typeof o.getDerivedStateFromError!="function"?null:s.render();return r.flags|=1,e!==null&&f?(r.child=cm(r,e.child,null,d),r.child=cm(r,null,v,d)):Ia(e,r,v,d),r.memoizedState=s.state,c&&BH(r,o,!0),r.child}function Eq(e){var r=e.stateNode;r.pendingContext?UH(e,r.pendingContext,r.pendingContext!==r.context):r.context&&UH(e,r.context,!1),MD(e,r.containerInfo)}function t7(e,r,o,s,c){return sm(),xD(c),r.flags|=256,Ia(e,r,o,s),r.child}var AN={dehydrated:null,treeContext:null,retryLane:0};function ON(e){return{baseLanes:e,cachePool:null,transitions:null}}function _q(e,r,o){var s=r.pendingProps,c=Li.current,d=!1,f=(r.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(c&2)!==0),v?(d=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),gi(Li,c&1),e===null)return yN(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(r.mode&1?e.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(f=s.children,e=s.fallback,d?(s=r.mode,d=r.child,f={mode:"hidden",children:f},!(s&1)&&d!==null?(d.childLanes=0,d.pendingProps=f):d=Ib(f,s,0,null),e=Lh(e,s,o,null),d.return=r,e.return=r,d.sibling=e,r.child=d,r.child.memoizedState=ON(o),r.memoizedState=AN,e):zD(r,f));if(c=e.memoizedState,c!==null&&(v=c.dehydrated,v!==null))return Uve(e,r,f,s,v,c,o);if(d){d=s.fallback,f=r.mode,c=e.child,v=c.sibling;var g={mode:"hidden",children:s.children};return!(f&1)&&r.child!==c?(s=r.child,s.childLanes=0,s.pendingProps=g,r.deletions=null):(s=bd(c,g),s.subtreeFlags=c.subtreeFlags&14680064),v!==null?d=bd(v,d):(d=Lh(d,f,o,null),d.flags|=2),d.return=r,s.return=r,s.sibling=d,r.child=s,s=d,d=r.child,f=e.child.memoizedState,f=f===null?ON(o):{baseLanes:f.baseLanes|o,cachePool:null,transitions:f.transitions},d.memoizedState=f,d.childLanes=e.childLanes&~o,r.memoizedState=AN,s}return d=e.child,e=d.sibling,s=bd(d,{mode:"visible",children:s.children}),!(r.mode&1)&&(s.lanes=o),s.return=r,s.sibling=null,e!==null&&(o=r.deletions,o===null?(r.deletions=[e],r.flags|=16):o.push(e)),r.child=s,r.memoizedState=null,s}function zD(e,r){return r=Ib({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function hy(e,r,o,s){return s!==null&&xD(s),cm(r,e.child,null,o),e=zD(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function Uve(e,r,o,s,c,d,f){if(o)return r.flags&256?(r.flags&=-257,s=aO(Error(St(422))),hy(e,r,f,s)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(d=s.fallback,c=r.mode,s=Ib({mode:"visible",children:s.children},c,0,null),d=Lh(d,c,f,null),d.flags|=2,s.return=r,d.return=r,s.sibling=d,r.child=s,r.mode&1&&cm(r,e.child,null,f),r.child.memoizedState=ON(f),r.memoizedState=AN,d);if(!(r.mode&1))return hy(e,r,f,null);if(c.data==="$!"){if(s=c.nextSibling&&c.nextSibling.dataset,s)var v=s.dgst;return s=v,d=Error(St(419)),s=aO(d,s,void 0),hy(e,r,f,s)}if(v=(f&e.childLanes)!==0,Xa||v){if(s=Mo,s!==null){switch(f&-f){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(s.suspendedLanes|f)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,hu(e,c),Bc(s,e,c,-1))}return XD(),s=aO(Error(St(421))),hy(e,r,f,s)}return c.data==="$?"?(r.flags|=128,r.child=e.child,r=Jve.bind(null,e),c._reactRetry=r,null):(e=d.treeContext,Ss=_d(c.nextSibling),Cs=r,Ai=!0,Mc=null,e!==null&&(nc[rc++]=ou,nc[rc++]=au,nc[rc++]=Bh,ou=e.id,au=e.overflow,Bh=r),r=zD(r,s.children),r.flags|=4096,r)}function n7(e,r,o){e.lanes|=r;var s=e.alternate;s!==null&&(s.lanes|=r),CN(e.return,r,o)}function sO(e,r,o,s,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:s,tail:o,tailMode:c}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=s,d.tail=o,d.tailMode=c)}function Sq(e,r,o){var s=r.pendingProps,c=s.revealOrder,d=s.tail;if(Ia(e,r,s.children,o),s=Li.current,s&2)s=s&1|2,r.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&n7(e,o,r);else if(e.tag===19)n7(e,o,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(gi(Li,s),!(r.mode&1))r.memoizedState=null;else switch(c){case"forwards":for(o=r.child,c=null;o!==null;)e=o.alternate,e!==null&&IC(e)===null&&(c=o),o=o.sibling;o=c,o===null?(c=r.child,r.child=null):(c=o.sibling,o.sibling=null),sO(r,!1,c,o,d);break;case"backwards":for(o=null,c=r.child,r.child=null;c!==null;){if(e=c.alternate,e!==null&&IC(e)===null){r.child=c;break}e=c.sibling,c.sibling=o,o=c,c=e}sO(r,!0,o,null,d);break;case"together":sO(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Wy(e,r){!(r.mode&1)&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function fu(e,r,o){if(e!==null&&(r.dependencies=e.dependencies),jh|=r.lanes,!(o&r.childLanes))return null;if(e!==null&&r.child!==e.child)throw Error(St(153));if(r.child!==null){for(e=r.child,o=bd(e,e.pendingProps),r.child=o,o.return=r;e.sibling!==null;)e=e.sibling,o=o.sibling=bd(e,e.pendingProps),o.return=r;o.sibling=null}return r.child}function Bve(e,r,o){switch(r.tag){case 3:Eq(r),sm();break;case 5:GK(r);break;case 1:Za(r.type)&&yC(r);break;case 4:MD(r,r.stateNode.containerInfo);break;case 10:var s=r.type._context,c=r.memoizedProps.value;gi(TC,s._currentValue),s._currentValue=c;break;case 13:if(s=r.memoizedState,s!==null)return s.dehydrated!==null?(gi(Li,Li.current&1),r.flags|=128,null):o&r.child.childLanes?_q(e,r,o):(gi(Li,Li.current&1),e=fu(e,r,o),e!==null?e.sibling:null);gi(Li,Li.current&1);break;case 19:if(s=(o&r.childLanes)!==0,e.flags&128){if(s)return Sq(e,r,o);r.flags|=128}if(c=r.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),gi(Li,Li.current),s)break;return null;case 22:case 23:return r.lanes=0,gq(e,r,o)}return fu(e,r,o)}var yq,xN,Cq,bq;yq=function(e,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};xN=function(){};Cq=function(e,r,o,s){var c=e.memoizedProps;if(c!==s){e=r.stateNode,Nh(xl.current);var d=null;switch(o){case"input":c=Qx(e,c),s=Qx(e,s),d=[];break;case"select":c=Mi({},c,{value:void 0}),s=Mi({},s,{value:void 0}),d=[];break;case"textarea":c=tN(e,c),s=tN(e,s),d=[];break;default:typeof c.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=_C)}rN(o,s);var f;o=null;for(_ in c)if(!s.hasOwnProperty(_)&&c.hasOwnProperty(_)&&c[_]!=null)if(_==="style"){var v=c[_];for(f in v)v.hasOwnProperty(f)&&(o||(o={}),o[f]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(ev.hasOwnProperty(_)?d||(d=[]):(d=d||[]).push(_,null));for(_ in s){var g=s[_];if(v=c!=null?c[_]:void 0,s.hasOwnProperty(_)&&g!==v&&(g!=null||v!=null))if(_==="style")if(v){for(f in v)!v.hasOwnProperty(f)||g&&g.hasOwnProperty(f)||(o||(o={}),o[f]="");for(f in g)g.hasOwnProperty(f)&&v[f]!==g[f]&&(o||(o={}),o[f]=g[f])}else o||(d||(d=[]),d.push(_,o)),o=g;else _==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,v=v?v.__html:void 0,g!=null&&v!==g&&(d=d||[]).push(_,g)):_==="children"?typeof g!="string"&&typeof g!="number"||(d=d||[]).push(_,""+g):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(ev.hasOwnProperty(_)?(g!=null&&_==="onScroll"&&bi("scroll",e),d||v===g||(d=[])):(d=d||[]).push(_,g))}o&&(d=d||[]).push("style",o);var _=d;(r.updateQueue=_)&&(r.flags|=4)}};bq=function(e,r,o,s){o!==s&&(r.flags|=4)};function vg(e,r){if(!Ai)switch(e.tailMode){case"hidden":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function pa(e){var r=e.alternate!==null&&e.alternate.child===e.child,o=0,s=0;if(r)for(var c=e.child;c!==null;)o|=c.lanes|c.childLanes,s|=c.subtreeFlags&14680064,s|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)o|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=o,r}function Vve(e,r,o){var s=r.pendingProps;switch(OD(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pa(r),null;case 1:return Za(r.type)&&SC(),pa(r),null;case 3:return s=r.stateNode,lm(),Ti(Qa),Ti(ya),UD(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(uy(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Mc!==null&&(UN(Mc),Mc=null))),xN(e,r),pa(r),null;case 5:FD(r);var c=Nh(hv.current);if(o=r.type,e!==null&&r.stateNode!=null)Cq(e,r,o,s,c),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!s){if(r.stateNode===null)throw Error(St(166));return pa(r),null}if(e=Nh(xl.current),uy(r)){s=r.stateNode,o=r.type;var d=r.memoizedProps;switch(s[Al]=r,s[uv]=d,e=(r.mode&1)!==0,o){case"dialog":bi("cancel",s),bi("close",s);break;case"iframe":case"object":case"embed":bi("load",s);break;case"video":case"audio":for(c=0;c<kg.length;c++)bi(kg[c],s);break;case"source":bi("error",s);break;case"img":case"image":case"link":bi("error",s),bi("load",s);break;case"details":bi("toggle",s);break;case"input":dH(s,d),bi("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!d.multiple},bi("invalid",s);break;case"textarea":fH(s,d),bi("invalid",s)}rN(o,d),c=null;for(var f in d)if(d.hasOwnProperty(f)){var v=d[f];f==="children"?typeof v=="string"?s.textContent!==v&&(d.suppressHydrationWarning!==!0&&ly(s.textContent,v,e),c=["children",v]):typeof v=="number"&&s.textContent!==""+v&&(d.suppressHydrationWarning!==!0&&ly(s.textContent,v,e),c=["children",""+v]):ev.hasOwnProperty(f)&&v!=null&&f==="onScroll"&&bi("scroll",s)}switch(o){case"input":ty(s),hH(s,d,!0);break;case"textarea":ty(s),pH(s);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(s.onclick=_C)}s=c,r.updateQueue=s,s!==null&&(r.flags|=4)}else{f=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=JG(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=f.createElement(o,{is:s.is}):(e=f.createElement(o),o==="select"&&(f=e,s.multiple?f.multiple=!0:s.size&&(f.size=s.size))):e=f.createElementNS(e,o),e[Al]=r,e[uv]=s,yq(e,r,!1,!1),r.stateNode=e;e:{switch(f=iN(o,s),o){case"dialog":bi("cancel",e),bi("close",e),c=s;break;case"iframe":case"object":case"embed":bi("load",e),c=s;break;case"video":case"audio":for(c=0;c<kg.length;c++)bi(kg[c],e);c=s;break;case"source":bi("error",e),c=s;break;case"img":case"image":case"link":bi("error",e),bi("load",e),c=s;break;case"details":bi("toggle",e),c=s;break;case"input":dH(e,s),c=Qx(e,s),bi("invalid",e);break;case"option":c=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},c=Mi({},s,{value:void 0}),bi("invalid",e);break;case"textarea":fH(e,s),c=tN(e,s),bi("invalid",e);break;default:c=s}rN(o,c),v=c;for(d in v)if(v.hasOwnProperty(d)){var g=v[d];d==="style"?eK(e,g):d==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&QG(e,g)):d==="children"?typeof g=="string"?(o!=="textarea"||g!=="")&&tv(e,g):typeof g=="number"&&tv(e,""+g):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ev.hasOwnProperty(d)?g!=null&&d==="onScroll"&&bi("scroll",e):g!=null&&pD(e,d,g,f))}switch(o){case"input":ty(e),hH(e,s,!1);break;case"textarea":ty(e),pH(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Td(s.value));break;case"select":e.multiple=!!s.multiple,d=s.value,d!=null?Xp(e,!!s.multiple,d,!1):s.defaultValue!=null&&Xp(e,!!s.multiple,s.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=_C)}switch(o){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return pa(r),null;case 6:if(e&&r.stateNode!=null)bq(e,r,e.memoizedProps,s);else{if(typeof s!="string"&&r.stateNode===null)throw Error(St(166));if(o=Nh(hv.current),Nh(xl.current),uy(r)){if(s=r.stateNode,o=r.memoizedProps,s[Al]=r,(d=s.nodeValue!==o)&&(e=Cs,e!==null))switch(e.tag){case 3:ly(s.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ly(s.nodeValue,o,(e.mode&1)!==0)}d&&(r.flags|=4)}else s=(o.nodeType===9?o:o.ownerDocument).createTextNode(s),s[Al]=r,r.stateNode=s}return pa(r),null;case 13:if(Ti(Li),s=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ai&&Ss!==null&&r.mode&1&&!(r.flags&128))jK(),sm(),r.flags|=98560,d=!1;else if(d=uy(r),s!==null&&s.dehydrated!==null){if(e===null){if(!d)throw Error(St(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(St(317));d[Al]=r}else sm(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;pa(r),d=!1}else Mc!==null&&(UN(Mc),Mc=null),d=!0;if(!d)return r.flags&65536?r:null}return r.flags&128?(r.lanes=o,r):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(r.child.flags|=8192,r.mode&1&&(e===null||Li.current&1?yo===0&&(yo=3):XD())),r.updateQueue!==null&&(r.flags|=4),pa(r),null);case 4:return lm(),xN(e,r),e===null&&cv(r.stateNode.containerInfo),pa(r),null;case 10:return DD(r.type._context),pa(r),null;case 17:return Za(r.type)&&SC(),pa(r),null;case 19:if(Ti(Li),d=r.memoizedState,d===null)return pa(r),null;if(s=(r.flags&128)!==0,f=d.rendering,f===null)if(s)vg(d,!1);else{if(yo!==0||e!==null&&e.flags&128)for(e=r.child;e!==null;){if(f=IC(e),f!==null){for(r.flags|=128,vg(d,!1),s=f.updateQueue,s!==null&&(r.updateQueue=s,r.flags|=4),r.subtreeFlags=0,s=o,o=r.child;o!==null;)d=o,e=s,d.flags&=14680066,f=d.alternate,f===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=f.childLanes,d.lanes=f.lanes,d.child=f.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=f.memoizedProps,d.memoizedState=f.memoizedState,d.updateQueue=f.updateQueue,d.type=f.type,e=f.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return gi(Li,Li.current&1|2),r.child}e=e.sibling}d.tail!==null&&no()>dm&&(r.flags|=128,s=!0,vg(d,!1),r.lanes=4194304)}else{if(!s)if(e=IC(f),e!==null){if(r.flags|=128,s=!0,o=e.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),vg(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!Ai)return pa(r),null}else 2*no()-d.renderingStartTime>dm&&o!==1073741824&&(r.flags|=128,s=!0,vg(d,!1),r.lanes=4194304);d.isBackwards?(f.sibling=r.child,r.child=f):(o=d.last,o!==null?o.sibling=f:r.child=f,d.last=f)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=no(),r.sibling=null,o=Li.current,gi(Li,s?o&1|2:o&1),r):(pa(r),null);case 22:case 23:return YD(),s=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(r.flags|=8192),s&&r.mode&1?_s&1073741824&&(pa(r),r.subtreeFlags&6&&(r.flags|=8192)):pa(r),null;case 24:return null;case 25:return null}throw Error(St(156,r.tag))}function jve(e,r){switch(OD(r),r.tag){case 1:return Za(r.type)&&SC(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return lm(),Ti(Qa),Ti(ya),UD(),e=r.flags,e&65536&&!(e&128)?(r.flags=e&-65537|128,r):null;case 5:return FD(r),null;case 13:if(Ti(Li),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(St(340));sm()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return Ti(Li),null;case 4:return lm(),null;case 10:return DD(r.type._context),null;case 22:case 23:return YD(),null;case 24:return null;default:return null}}var fy=!1,va=!1,$ve=typeof WeakSet=="function"?WeakSet:Set,en=null;function Wp(e,r){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(s){qi(e,r,s)}else o.current=null}function NN(e,r,o){try{o()}catch(s){qi(e,r,s)}}var r7=!1;function Hve(e,r){if(pN=gC,e=AK(),ID(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var s=o.getSelection&&o.getSelection();if(s&&s.rangeCount!==0){o=s.anchorNode;var c=s.anchorOffset,d=s.focusNode;s=s.focusOffset;try{o.nodeType,d.nodeType}catch{o=null;break e}var f=0,v=-1,g=-1,_=0,C=0,b=e,T=null;t:for(;;){for(var I;b!==o||c!==0&&b.nodeType!==3||(v=f+c),b!==d||s!==0&&b.nodeType!==3||(g=f+s),b.nodeType===3&&(f+=b.nodeValue.length),(I=b.firstChild)!==null;)T=b,b=I;for(;;){if(b===e)break t;if(T===o&&++_===c&&(v=f),T===d&&++C===s&&(g=f),(I=b.nextSibling)!==null)break;b=T,T=b.parentNode}b=I}o=v===-1||g===-1?null:{start:v,end:g}}else o=null}o=o||{start:0,end:0}}else o=null;for(mN={focusedElem:e,selectionRange:o},gC=!1,en=r;en!==null;)if(r=en,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,en=e;else for(;en!==null;){r=en;try{var w=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,N=w.memoizedState,P=r.stateNode,O=P.getSnapshotBeforeUpdate(r.elementType===r.type?x:Pc(r.type,x),N);P.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var L=r.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(St(163))}}catch(M){qi(r,r.return,M)}if(e=r.sibling,e!==null){e.return=r.return,en=e;break}en=r.return}return w=r7,r7=!1,w}function Wg(e,r,o){var s=r.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&NN(r,o,d)}c=c.next}while(c!==s)}}function Rb(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.create;o.destroy=s()}o=o.next}while(o!==r)}}function PN(e){var r=e.ref;if(r!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof r=="function"?r(e):r.current=e}}function Tq(e){var r=e.alternate;r!==null&&(e.alternate=null,Tq(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[Al],delete r[uv],delete r[EN],delete r[Rve],delete r[wve])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Rq(e){return e.tag===5||e.tag===3||e.tag===4}function i7(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rq(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function DN(e,r,o){var s=e.tag;if(s===5||s===6)e=e.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(e,r):o.insertBefore(e,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(e,o)):(r=o,r.appendChild(e)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=_C));else if(s!==4&&(e=e.child,e!==null))for(DN(e,r,o),e=e.sibling;e!==null;)DN(e,r,o),e=e.sibling}function LN(e,r,o){var s=e.tag;if(s===5||s===6)e=e.stateNode,r?o.insertBefore(e,r):o.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(LN(e,r,o),e=e.sibling;e!==null;)LN(e,r,o),e=e.sibling}var Jo=null,Dc=!1;function nd(e,r,o){for(o=o.child;o!==null;)wq(e,r,o),o=o.sibling}function wq(e,r,o){if(Ol&&typeof Ol.onCommitFiberUnmount=="function")try{Ol.onCommitFiberUnmount(vb,o)}catch{}switch(o.tag){case 5:va||Wp(o,r);case 6:var s=Jo,c=Dc;Jo=null,nd(e,r,o),Jo=s,Dc=c,Jo!==null&&(Dc?(e=Jo,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):Jo.removeChild(o.stateNode));break;case 18:Jo!==null&&(Dc?(e=Jo,o=o.stateNode,e.nodeType===8?eO(e.parentNode,o):e.nodeType===1&&eO(e,o),ov(e)):eO(Jo,o.stateNode));break;case 4:s=Jo,c=Dc,Jo=o.stateNode.containerInfo,Dc=!0,nd(e,r,o),Jo=s,Dc=c;break;case 0:case 11:case 14:case 15:if(!va&&(s=o.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){c=s=s.next;do{var d=c,f=d.destroy;d=d.tag,f!==void 0&&(d&2||d&4)&&NN(o,r,f),c=c.next}while(c!==s)}nd(e,r,o);break;case 1:if(!va&&(Wp(o,r),s=o.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=o.memoizedProps,s.state=o.memoizedState,s.componentWillUnmount()}catch(v){qi(o,r,v)}nd(e,r,o);break;case 21:nd(e,r,o);break;case 22:o.mode&1?(va=(s=va)||o.memoizedState!==null,nd(e,r,o),va=s):nd(e,r,o);break;default:nd(e,r,o)}}function o7(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new $ve),r.forEach(function(s){var c=Qve.bind(null,e,s);o.has(s)||(o.add(s),s.then(c,c))})}}function Nc(e,r){var o=r.deletions;if(o!==null)for(var s=0;s<o.length;s++){var c=o[s];try{var d=e,f=r,v=f;e:for(;v!==null;){switch(v.tag){case 5:Jo=v.stateNode,Dc=!1;break e;case 3:Jo=v.stateNode.containerInfo,Dc=!0;break e;case 4:Jo=v.stateNode.containerInfo,Dc=!0;break e}v=v.return}if(Jo===null)throw Error(St(160));wq(d,f,c),Jo=null,Dc=!1;var g=c.alternate;g!==null&&(g.return=null),c.return=null}catch(_){qi(c,r,_)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Iq(r,e),r=r.sibling}function Iq(e,r){var o=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Nc(r,e),bl(e),s&4){try{Wg(3,e,e.return),Rb(3,e)}catch(x){qi(e,e.return,x)}try{Wg(5,e,e.return)}catch(x){qi(e,e.return,x)}}break;case 1:Nc(r,e),bl(e),s&512&&o!==null&&Wp(o,o.return);break;case 5:if(Nc(r,e),bl(e),s&512&&o!==null&&Wp(o,o.return),e.flags&32){var c=e.stateNode;try{tv(c,"")}catch(x){qi(e,e.return,x)}}if(s&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,f=o!==null?o.memoizedProps:d,v=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{v==="input"&&d.type==="radio"&&d.name!=null&&YG(c,d),iN(v,f);var _=iN(v,d);for(f=0;f<g.length;f+=2){var C=g[f],b=g[f+1];C==="style"?eK(c,b):C==="dangerouslySetInnerHTML"?QG(c,b):C==="children"?tv(c,b):pD(c,C,b,_)}switch(v){case"input":Zx(c,d);break;case"textarea":XG(c,d);break;case"select":var T=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var I=d.value;I!=null?Xp(c,!!d.multiple,I,!1):T!==!!d.multiple&&(d.defaultValue!=null?Xp(c,!!d.multiple,d.defaultValue,!0):Xp(c,!!d.multiple,d.multiple?[]:"",!1))}c[uv]=d}catch(x){qi(e,e.return,x)}}break;case 6:if(Nc(r,e),bl(e),s&4){if(e.stateNode===null)throw Error(St(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(x){qi(e,e.return,x)}}break;case 3:if(Nc(r,e),bl(e),s&4&&o!==null&&o.memoizedState.isDehydrated)try{ov(r.containerInfo)}catch(x){qi(e,e.return,x)}break;case 4:Nc(r,e),bl(e);break;case 13:Nc(r,e),bl(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(KD=no())),s&4&&o7(e);break;case 22:if(C=o!==null&&o.memoizedState!==null,e.mode&1?(va=(_=va)||C,Nc(r,e),va=_):Nc(r,e),bl(e),s&8192){if(_=e.memoizedState!==null,(e.stateNode.isHidden=_)&&!C&&e.mode&1)for(en=e,C=e.child;C!==null;){for(b=en=C;en!==null;){switch(T=en,I=T.child,T.tag){case 0:case 11:case 14:case 15:Wg(4,T,T.return);break;case 1:Wp(T,T.return);var w=T.stateNode;if(typeof w.componentWillUnmount=="function"){s=T,o=T.return;try{r=s,w.props=r.memoizedProps,w.state=r.memoizedState,w.componentWillUnmount()}catch(x){qi(s,o,x)}}break;case 5:Wp(T,T.return);break;case 22:if(T.memoizedState!==null){s7(b);continue}}I!==null?(I.return=T,en=I):s7(b)}C=C.sibling}e:for(C=null,b=e;;){if(b.tag===5){if(C===null){C=b;try{c=b.stateNode,_?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(v=b.stateNode,g=b.memoizedProps.style,f=g!=null&&g.hasOwnProperty("display")?g.display:null,v.style.display=ZG("display",f))}catch(x){qi(e,e.return,x)}}}else if(b.tag===6){if(C===null)try{b.stateNode.nodeValue=_?"":b.memoizedProps}catch(x){qi(e,e.return,x)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;C===b&&(C=null),b=b.return}C===b&&(C=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Nc(r,e),bl(e),s&4&&o7(e);break;case 21:break;default:Nc(r,e),bl(e)}}function bl(e){var r=e.flags;if(r&2){try{e:{for(var o=e.return;o!==null;){if(Rq(o)){var s=o;break e}o=o.return}throw Error(St(160))}switch(s.tag){case 5:var c=s.stateNode;s.flags&32&&(tv(c,""),s.flags&=-33);var d=i7(e);LN(e,d,c);break;case 3:case 4:var f=s.stateNode.containerInfo,v=i7(e);DN(e,v,f);break;default:throw Error(St(161))}}catch(g){qi(e,e.return,g)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function zve(e,r,o){en=e,Aq(e)}function Aq(e,r,o){for(var s=(e.mode&1)!==0;en!==null;){var c=en,d=c.child;if(c.tag===22&&s){var f=c.memoizedState!==null||fy;if(!f){var v=c.alternate,g=v!==null&&v.memoizedState!==null||va;v=fy;var _=va;if(fy=f,(va=g)&&!_)for(en=c;en!==null;)f=en,g=f.child,f.tag===22&&f.memoizedState!==null?c7(c):g!==null?(g.return=f,en=g):c7(c);for(;d!==null;)en=d,Aq(d),d=d.sibling;en=c,fy=v,va=_}a7(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,en=d):a7(e)}}function a7(e){for(;en!==null;){var r=en;if(r.flags&8772){var o=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:va||Rb(5,r);break;case 1:var s=r.stateNode;if(r.flags&4&&!va)if(o===null)s.componentDidMount();else{var c=r.elementType===r.type?o.memoizedProps:Pc(r.type,o.memoizedProps);s.componentDidUpdate(c,o.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var d=r.updateQueue;d!==null&&zH(r,d,s);break;case 3:var f=r.updateQueue;if(f!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}zH(r,f,o)}break;case 5:var v=r.stateNode;if(o===null&&r.flags&4){o=v;var g=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&o.focus();break;case"img":g.src&&(o.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var _=r.alternate;if(_!==null){var C=_.memoizedState;if(C!==null){var b=C.dehydrated;b!==null&&ov(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(St(163))}va||r.flags&512&&PN(r)}catch(T){qi(r,r.return,T)}}if(r===e){en=null;break}if(o=r.sibling,o!==null){o.return=r.return,en=o;break}en=r.return}}function s7(e){for(;en!==null;){var r=en;if(r===e){en=null;break}var o=r.sibling;if(o!==null){o.return=r.return,en=o;break}en=r.return}}function c7(e){for(;en!==null;){var r=en;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{Rb(4,r)}catch(g){qi(r,o,g)}break;case 1:var s=r.stateNode;if(typeof s.componentDidMount=="function"){var c=r.return;try{s.componentDidMount()}catch(g){qi(r,c,g)}}var d=r.return;try{PN(r)}catch(g){qi(r,d,g)}break;case 5:var f=r.return;try{PN(r)}catch(g){qi(r,f,g)}}}catch(g){qi(r,r.return,g)}if(r===e){en=null;break}var v=r.sibling;if(v!==null){v.return=r.return,en=v;break}en=r.return}}var Wve=Math.ceil,xC=vu.ReactCurrentDispatcher,WD=vu.ReactCurrentOwner,ac=vu.ReactCurrentBatchConfig,Or=0,Mo=null,fo=null,ea=0,_s=0,Gp=xd(0),yo=0,gv=null,jh=0,wb=0,GD=0,Gg=null,Ya=null,KD=0,dm=1/0,ru=null,NC=!1,kN=null,yd=null,py=!1,dd=null,PC=0,Kg=0,MN=null,Gy=-1,Ky=0;function Aa(){return Or&6?no():Gy!==-1?Gy:Gy=no()}function Cd(e){return e.mode&1?Or&2&&ea!==0?ea&-ea:Ave.transition!==null?(Ky===0&&(Ky=hK()),Ky):(e=Yr,e!==0||(e=window.event,e=e===void 0?16:_K(e.type)),e):1}function Bc(e,r,o,s){if(50<Kg)throw Kg=0,MN=null,Error(St(185));Vv(e,o,s),(!(Or&2)||e!==Mo)&&(e===Mo&&(!(Or&2)&&(wb|=o),yo===4&&ld(e,ea)),es(e,s),o===1&&Or===0&&!(r.mode&1)&&(dm=no()+500,Cb&&Nd()))}function es(e,r){var o=e.callbackNode;Age(e,r);var s=mC(e,e===Mo?ea:0);if(s===0)o!==null&&vH(o),e.callbackNode=null,e.callbackPriority=0;else if(r=s&-s,e.callbackPriority!==r){if(o!=null&&vH(o),r===1)e.tag===0?Ive(l7.bind(null,e)):UK(l7.bind(null,e)),bve(function(){!(Or&6)&&Nd()}),o=null;else{switch(fK(s)){case 1:o=_D;break;case 4:o=uK;break;case 16:o=pC;break;case 536870912:o=dK;break;default:o=pC}o=Mq(o,Oq.bind(null,e))}e.callbackPriority=r,e.callbackNode=o}}function Oq(e,r){if(Gy=-1,Ky=0,Or&6)throw Error(St(327));var o=e.callbackNode;if(tm()&&e.callbackNode!==o)return null;var s=mC(e,e===Mo?ea:0);if(s===0)return null;if(s&30||s&e.expiredLanes||r)r=DC(e,s);else{r=s;var c=Or;Or|=2;var d=Nq();(Mo!==e||ea!==r)&&(ru=null,dm=no()+500,Dh(e,r));do try{qve();break}catch(v){xq(e,v)}while(1);PD(),xC.current=d,Or=c,fo!==null?r=0:(Mo=null,ea=0,r=yo)}if(r!==0){if(r===2&&(c=lN(e),c!==0&&(s=c,r=FN(e,c))),r===1)throw o=gv,Dh(e,0),ld(e,s),es(e,no()),o;if(r===6)ld(e,s);else{if(c=e.current.alternate,!(s&30)&&!Gve(c)&&(r=DC(e,s),r===2&&(d=lN(e),d!==0&&(s=d,r=FN(e,d))),r===1))throw o=gv,Dh(e,0),ld(e,s),es(e,no()),o;switch(e.finishedWork=c,e.finishedLanes=s,r){case 0:case 1:throw Error(St(345));case 2:wh(e,Ya,ru);break;case 3:if(ld(e,s),(s&130023424)===s&&(r=KD+500-no(),10<r)){if(mC(e,0)!==0)break;if(c=e.suspendedLanes,(c&s)!==s){Aa(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=vN(wh.bind(null,e,Ya,ru),r);break}wh(e,Ya,ru);break;case 4:if(ld(e,s),(s&4194240)===s)break;for(r=e.eventTimes,c=-1;0<s;){var f=31-Uc(s);d=1<<f,f=r[f],f>c&&(c=f),s&=~d}if(s=c,s=no()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Wve(s/1960))-s,10<s){e.timeoutHandle=vN(wh.bind(null,e,Ya,ru),s);break}wh(e,Ya,ru);break;case 5:wh(e,Ya,ru);break;default:throw Error(St(329))}}}return es(e,no()),e.callbackNode===o?Oq.bind(null,e):null}function FN(e,r){var o=Gg;return e.current.memoizedState.isDehydrated&&(Dh(e,r).flags|=256),e=DC(e,r),e!==2&&(r=Ya,Ya=o,r!==null&&UN(r)),e}function UN(e){Ya===null?Ya=e:Ya.push.apply(Ya,e)}function Gve(e){for(var r=e;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var s=0;s<o.length;s++){var c=o[s],d=c.getSnapshot;c=c.value;try{if(!Hc(d(),c))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ld(e,r){for(r&=~GD,r&=~wb,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var o=31-Uc(r),s=1<<o;e[o]=-1,r&=~s}}function l7(e){if(Or&6)throw Error(St(327));tm();var r=mC(e,0);if(!(r&1))return es(e,no()),null;var o=DC(e,r);if(e.tag!==0&&o===2){var s=lN(e);s!==0&&(r=s,o=FN(e,s))}if(o===1)throw o=gv,Dh(e,0),ld(e,r),es(e,no()),o;if(o===6)throw Error(St(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,wh(e,Ya,ru),es(e,no()),null}function qD(e,r){var o=Or;Or|=1;try{return e(r)}finally{Or=o,Or===0&&(dm=no()+500,Cb&&Nd())}}function $h(e){dd!==null&&dd.tag===0&&!(Or&6)&&tm();var r=Or;Or|=1;var o=ac.transition,s=Yr;try{if(ac.transition=null,Yr=1,e)return e()}finally{Yr=s,ac.transition=o,Or=r,!(Or&6)&&Nd()}}function YD(){_s=Gp.current,Ti(Gp)}function Dh(e,r){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,Cve(o)),fo!==null)for(o=fo.return;o!==null;){var s=o;switch(OD(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&SC();break;case 3:lm(),Ti(Qa),Ti(ya),UD();break;case 5:FD(s);break;case 4:lm();break;case 13:Ti(Li);break;case 19:Ti(Li);break;case 10:DD(s.type._context);break;case 22:case 23:YD()}o=o.return}if(Mo=e,fo=e=bd(e.current,null),ea=_s=r,yo=0,gv=null,GD=wb=jh=0,Ya=Gg=null,xh!==null){for(r=0;r<xh.length;r++)if(o=xh[r],s=o.interleaved,s!==null){o.interleaved=null;var c=s.next,d=o.pending;if(d!==null){var f=d.next;d.next=c,s.next=f}o.pending=s}xh=null}return e}function xq(e,r){do{var o=fo;try{if(PD(),Hy.current=OC,AC){for(var s=ki.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}AC=!1}if(Vh=0,ko=So=ki=null,zg=!1,fv=0,WD.current=null,o===null||o.return===null){yo=1,gv=r,fo=null;break}e:{var d=e,f=o.return,v=o,g=r;if(r=ea,v.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var _=g,C=v,b=C.tag;if(!(C.mode&1)&&(b===0||b===11||b===15)){var T=C.alternate;T?(C.updateQueue=T.updateQueue,C.memoizedState=T.memoizedState,C.lanes=T.lanes):(C.updateQueue=null,C.memoizedState=null)}var I=XH(f);if(I!==null){I.flags&=-257,JH(I,f,v,d,r),I.mode&1&&YH(d,_,r),r=I,g=_;var w=r.updateQueue;if(w===null){var x=new Set;x.add(g),r.updateQueue=x}else w.add(g);break e}else{if(!(r&1)){YH(d,_,r),XD();break e}g=Error(St(426))}}else if(Ai&&v.mode&1){var N=XH(f);if(N!==null){!(N.flags&65536)&&(N.flags|=256),JH(N,f,v,d,r),xD(um(g,v));break e}}d=g=um(g,v),yo!==4&&(yo=2),Gg===null?Gg=[d]:Gg.push(d),d=f;do{switch(d.tag){case 3:d.flags|=65536,r&=-r,d.lanes|=r;var P=fq(d,g,r);HH(d,P);break e;case 1:v=g;var O=d.type,L=d.stateNode;if(!(d.flags&128)&&(typeof O.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(yd===null||!yd.has(L)))){d.flags|=65536,r&=-r,d.lanes|=r;var M=pq(d,v,r);HH(d,M);break e}}d=d.return}while(d!==null)}Dq(o)}catch(F){r=F,fo===o&&o!==null&&(fo=o=o.return);continue}break}while(1)}function Nq(){var e=xC.current;return xC.current=OC,e===null?OC:e}function XD(){(yo===0||yo===3||yo===2)&&(yo=4),Mo===null||!(jh&268435455)&&!(wb&268435455)||ld(Mo,ea)}function DC(e,r){var o=Or;Or|=2;var s=Nq();(Mo!==e||ea!==r)&&(ru=null,Dh(e,r));do try{Kve();break}catch(c){xq(e,c)}while(1);if(PD(),Or=o,xC.current=s,fo!==null)throw Error(St(261));return Mo=null,ea=0,yo}function Kve(){for(;fo!==null;)Pq(fo)}function qve(){for(;fo!==null&&!_ge();)Pq(fo)}function Pq(e){var r=kq(e.alternate,e,_s);e.memoizedProps=e.pendingProps,r===null?Dq(e):fo=r,WD.current=null}function Dq(e){var r=e;do{var o=r.alternate;if(e=r.return,r.flags&32768){if(o=jve(o,r),o!==null){o.flags&=32767,fo=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{yo=6,fo=null;return}}else if(o=Vve(o,r,_s),o!==null){fo=o;return}if(r=r.sibling,r!==null){fo=r;return}fo=r=e}while(r!==null);yo===0&&(yo=5)}function wh(e,r,o){var s=Yr,c=ac.transition;try{ac.transition=null,Yr=1,Yve(e,r,o,s)}finally{ac.transition=c,Yr=s}return null}function Yve(e,r,o,s){do tm();while(dd!==null);if(Or&6)throw Error(St(327));o=e.finishedWork;var c=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(St(177));e.callbackNode=null,e.callbackPriority=0;var d=o.lanes|o.childLanes;if(Oge(e,d),e===Mo&&(fo=Mo=null,ea=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||py||(py=!0,Mq(pC,function(){return tm(),null})),d=(o.flags&15990)!==0,o.subtreeFlags&15990||d){d=ac.transition,ac.transition=null;var f=Yr;Yr=1;var v=Or;Or|=4,WD.current=null,Hve(e,o),Iq(o,e),mve(mN),gC=!!pN,mN=pN=null,e.current=o,zve(o),Sge(),Or=v,Yr=f,ac.transition=d}else e.current=o;if(py&&(py=!1,dd=e,PC=c),d=e.pendingLanes,d===0&&(yd=null),bge(o.stateNode),es(e,no()),r!==null)for(s=e.onRecoverableError,o=0;o<r.length;o++)c=r[o],s(c.value,{componentStack:c.stack,digest:c.digest});if(NC)throw NC=!1,e=kN,kN=null,e;return PC&1&&e.tag!==0&&tm(),d=e.pendingLanes,d&1?e===MN?Kg++:(Kg=0,MN=e):Kg=0,Nd(),null}function tm(){if(dd!==null){var e=fK(PC),r=ac.transition,o=Yr;try{if(ac.transition=null,Yr=16>e?16:e,dd===null)var s=!1;else{if(e=dd,dd=null,PC=0,Or&6)throw Error(St(331));var c=Or;for(Or|=4,en=e.current;en!==null;){var d=en,f=d.child;if(en.flags&16){var v=d.deletions;if(v!==null){for(var g=0;g<v.length;g++){var _=v[g];for(en=_;en!==null;){var C=en;switch(C.tag){case 0:case 11:case 15:Wg(8,C,d)}var b=C.child;if(b!==null)b.return=C,en=b;else for(;en!==null;){C=en;var T=C.sibling,I=C.return;if(Tq(C),C===_){en=null;break}if(T!==null){T.return=I,en=T;break}en=I}}}var w=d.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var N=x.sibling;x.sibling=null,x=N}while(x!==null)}}en=d}}if(d.subtreeFlags&2064&&f!==null)f.return=d,en=f;else e:for(;en!==null;){if(d=en,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Wg(9,d,d.return)}var P=d.sibling;if(P!==null){P.return=d.return,en=P;break e}en=d.return}}var O=e.current;for(en=O;en!==null;){f=en;var L=f.child;if(f.subtreeFlags&2064&&L!==null)L.return=f,en=L;else e:for(f=O;en!==null;){if(v=en,v.flags&2048)try{switch(v.tag){case 0:case 11:case 15:Rb(9,v)}}catch(F){qi(v,v.return,F)}if(v===f){en=null;break e}var M=v.sibling;if(M!==null){M.return=v.return,en=M;break e}en=v.return}}if(Or=c,Nd(),Ol&&typeof Ol.onPostCommitFiberRoot=="function")try{Ol.onPostCommitFiberRoot(vb,e)}catch{}s=!0}return s}finally{Yr=o,ac.transition=r}}return!1}function u7(e,r,o){r=um(o,r),r=fq(e,r,1),e=Sd(e,r,1),r=Aa(),e!==null&&(Vv(e,1,r),es(e,r))}function qi(e,r,o){if(e.tag===3)u7(e,e,o);else for(;r!==null;){if(r.tag===3){u7(r,e,o);break}else if(r.tag===1){var s=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(yd===null||!yd.has(s))){e=um(o,e),e=pq(r,e,1),r=Sd(r,e,1),e=Aa(),r!==null&&(Vv(r,1,e),es(r,e));break}}r=r.return}}function Xve(e,r,o){var s=e.pingCache;s!==null&&s.delete(r),r=Aa(),e.pingedLanes|=e.suspendedLanes&o,Mo===e&&(ea&o)===o&&(yo===4||yo===3&&(ea&130023424)===ea&&500>no()-KD?Dh(e,0):GD|=o),es(e,r)}function Lq(e,r){r===0&&(e.mode&1?(r=iy,iy<<=1,!(iy&130023424)&&(iy=4194304)):r=1);var o=Aa();e=hu(e,r),e!==null&&(Vv(e,r,o),es(e,o))}function Jve(e){var r=e.memoizedState,o=0;r!==null&&(o=r.retryLane),Lq(e,o)}function Qve(e,r){var o=0;switch(e.tag){case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(o=c.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(St(314))}s!==null&&s.delete(r),Lq(e,o)}var kq;kq=function(e,r,o){if(e!==null)if(e.memoizedProps!==r.pendingProps||Qa.current)Xa=!0;else{if(!(e.lanes&o)&&!(r.flags&128))return Xa=!1,Bve(e,r,o);Xa=!!(e.flags&131072)}else Xa=!1,Ai&&r.flags&1048576&&BK(r,bC,r.index);switch(r.lanes=0,r.tag){case 2:var s=r.type;Wy(e,r),e=r.pendingProps;var c=am(r,ya.current);em(r,o),c=VD(null,r,s,e,c,o);var d=jD();return r.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Za(s)?(d=!0,yC(r)):d=!1,r.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,kD(r),c.updater=Tb,r.stateNode=c,c._reactInternals=r,TN(r,s,e,o),r=IN(null,r,s,!0,d,o)):(r.tag=0,Ai&&d&&AD(r),Ia(null,r,c,o),r=r.child),r;case 16:s=r.elementType;e:{switch(Wy(e,r),e=r.pendingProps,c=s._init,s=c(s._payload),r.type=s,c=r.tag=eEe(s),e=Pc(s,e),c){case 0:r=wN(null,r,s,e,o);break e;case 1:r=e7(null,r,s,e,o);break e;case 11:r=QH(null,r,s,e,o);break e;case 14:r=ZH(null,r,s,Pc(s.type,e),o);break e}throw Error(St(306,s,""))}return r;case 0:return s=r.type,c=r.pendingProps,c=r.elementType===s?c:Pc(s,c),wN(e,r,s,c,o);case 1:return s=r.type,c=r.pendingProps,c=r.elementType===s?c:Pc(s,c),e7(e,r,s,c,o);case 3:e:{if(Eq(r),e===null)throw Error(St(387));s=r.pendingProps,d=r.memoizedState,c=d.element,WK(e,r),wC(r,s,null,o);var f=r.memoizedState;if(s=f.element,d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){c=um(Error(St(423)),r),r=t7(e,r,s,o,c);break e}else if(s!==c){c=um(Error(St(424)),r),r=t7(e,r,s,o,c);break e}else for(Ss=_d(r.stateNode.containerInfo.firstChild),Cs=r,Ai=!0,Mc=null,o=HK(r,null,s,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(sm(),s===c){r=fu(e,r,o);break e}Ia(e,r,s,o)}r=r.child}return r;case 5:return GK(r),e===null&&yN(r),s=r.type,c=r.pendingProps,d=e!==null?e.memoizedProps:null,f=c.children,gN(s,c)?f=null:d!==null&&gN(s,d)&&(r.flags|=32),vq(e,r),Ia(e,r,f,o),r.child;case 6:return e===null&&yN(r),null;case 13:return _q(e,r,o);case 4:return MD(r,r.stateNode.containerInfo),s=r.pendingProps,e===null?r.child=cm(r,null,s,o):Ia(e,r,s,o),r.child;case 11:return s=r.type,c=r.pendingProps,c=r.elementType===s?c:Pc(s,c),QH(e,r,s,c,o);case 7:return Ia(e,r,r.pendingProps,o),r.child;case 8:return Ia(e,r,r.pendingProps.children,o),r.child;case 12:return Ia(e,r,r.pendingProps.children,o),r.child;case 10:e:{if(s=r.type._context,c=r.pendingProps,d=r.memoizedProps,f=c.value,gi(TC,s._currentValue),s._currentValue=f,d!==null)if(Hc(d.value,f)){if(d.children===c.children&&!Qa.current){r=fu(e,r,o);break e}}else for(d=r.child,d!==null&&(d.return=r);d!==null;){var v=d.dependencies;if(v!==null){f=d.child;for(var g=v.firstContext;g!==null;){if(g.context===s){if(d.tag===1){g=su(-1,o&-o),g.tag=2;var _=d.updateQueue;if(_!==null){_=_.shared;var C=_.pending;C===null?g.next=g:(g.next=C.next,C.next=g),_.pending=g}}d.lanes|=o,g=d.alternate,g!==null&&(g.lanes|=o),CN(d.return,o,r),v.lanes|=o;break}g=g.next}}else if(d.tag===10)f=d.type===r.type?null:d.child;else if(d.tag===18){if(f=d.return,f===null)throw Error(St(341));f.lanes|=o,v=f.alternate,v!==null&&(v.lanes|=o),CN(f,o,r),f=d.sibling}else f=d.child;if(f!==null)f.return=d;else for(f=d;f!==null;){if(f===r){f=null;break}if(d=f.sibling,d!==null){d.return=f.return,f=d;break}f=f.return}d=f}Ia(e,r,c.children,o),r=r.child}return r;case 9:return c=r.type,s=r.pendingProps.children,em(r,o),c=cc(c),s=s(c),r.flags|=1,Ia(e,r,s,o),r.child;case 14:return s=r.type,c=Pc(s,r.pendingProps),c=Pc(s.type,c),ZH(e,r,s,c,o);case 15:return mq(e,r,r.type,r.pendingProps,o);case 17:return s=r.type,c=r.pendingProps,c=r.elementType===s?c:Pc(s,c),Wy(e,r),r.tag=1,Za(s)?(e=!0,yC(r)):e=!1,em(r,o),hq(r,s,c),TN(r,s,c,o),IN(null,r,s,!0,e,o);case 19:return Sq(e,r,o);case 22:return gq(e,r,o)}throw Error(St(156,r.tag))};function Mq(e,r){return lK(e,r)}function Zve(e,r,o,s){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ic(e,r,o,s){return new Zve(e,r,o,s)}function JD(e){return e=e.prototype,!(!e||!e.isReactComponent)}function eEe(e){if(typeof e=="function")return JD(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gD)return 11;if(e===vD)return 14}return 2}function bd(e,r){var o=e.alternate;return o===null?(o=ic(e.tag,r,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=r,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,r=e.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function qy(e,r,o,s,c,d){var f=2;if(s=e,typeof e=="function")JD(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case Mp:return Lh(o.children,c,d,r);case mD:f=8,c|=8;break;case qx:return e=ic(12,o,r,c|2),e.elementType=qx,e.lanes=d,e;case Yx:return e=ic(13,o,r,c),e.elementType=Yx,e.lanes=d,e;case Xx:return e=ic(19,o,r,c),e.elementType=Xx,e.lanes=d,e;case GG:return Ib(o,c,d,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zG:f=10;break e;case WG:f=9;break e;case gD:f=11;break e;case vD:f=14;break e;case ad:f=16,s=null;break e}throw Error(St(130,e==null?e:typeof e,""))}return r=ic(f,o,r,c),r.elementType=e,r.type=s,r.lanes=d,r}function Lh(e,r,o,s){return e=ic(7,e,s,r),e.lanes=o,e}function Ib(e,r,o,s){return e=ic(22,e,s,r),e.elementType=GG,e.lanes=o,e.stateNode={isHidden:!1},e}function cO(e,r,o){return e=ic(6,e,null,r),e.lanes=o,e}function lO(e,r,o){return r=ic(4,e.children!==null?e.children:[],e.key,r),r.lanes=o,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function tEe(e,r,o,s,c){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=HA(0),this.expirationTimes=HA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=HA(0),this.identifierPrefix=s,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function QD(e,r,o,s,c,d,f,v,g){return e=new tEe(e,r,o,v,g),r===1?(r=1,d===!0&&(r|=8)):r=0,d=ic(3,null,null,r),e.current=d,d.stateNode=e,d.memoizedState={element:s,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},kD(d),e}function nEe(e,r,o){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kp,key:s==null?null:""+s,children:e,containerInfo:r,implementation:o}}function Fq(e){if(!e)return Rd;e=e._reactInternals;e:{if(Jh(e)!==e||e.tag!==1)throw Error(St(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Za(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(St(171))}if(e.tag===1){var o=e.type;if(Za(o))return FK(e,o,r)}return r}function Uq(e,r,o,s,c,d,f,v,g){return e=QD(o,s,!0,e,c,d,f,v,g),e.context=Fq(null),o=e.current,s=Aa(),c=Cd(o),d=su(s,c),d.callback=r??null,Sd(o,d,c),e.current.lanes=c,Vv(e,c,s),es(e,s),e}function Ab(e,r,o,s){var c=r.current,d=Aa(),f=Cd(c);return o=Fq(o),r.context===null?r.context=o:r.pendingContext=o,r=su(d,f),r.payload={element:e},s=s===void 0?null:s,s!==null&&(r.callback=s),e=Sd(c,r,f),e!==null&&(Bc(e,c,f,d),$y(e,c,f)),f}function LC(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function d7(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<r?o:r}}function ZD(e,r){d7(e,r),(e=e.alternate)&&d7(e,r)}function rEe(){return null}var Bq=typeof reportError=="function"?reportError:function(e){console.error(e)};function e2(e){this._internalRoot=e}Ob.prototype.render=e2.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(St(409));Ab(e,r,null,null)};Ob.prototype.unmount=e2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;$h(function(){Ab(null,e,null,null)}),r[du]=null}};function Ob(e){this._internalRoot=e}Ob.prototype.unstable_scheduleHydration=function(e){if(e){var r=gK();e={blockedOn:null,target:e,priority:r};for(var o=0;o<cd.length&&r!==0&&r<cd[o].priority;o++);cd.splice(o,0,e),o===0&&EK(e)}};function t2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function h7(){}function iEe(e,r,o,s,c){if(c){if(typeof s=="function"){var d=s;s=function(){var _=LC(f);d.call(_)}}var f=Uq(r,s,e,0,null,!1,!1,"",h7);return e._reactRootContainer=f,e[du]=f.current,cv(e.nodeType===8?e.parentNode:e),$h(),f}for(;c=e.lastChild;)e.removeChild(c);if(typeof s=="function"){var v=s;s=function(){var _=LC(g);v.call(_)}}var g=QD(e,0,!1,null,null,!1,!1,"",h7);return e._reactRootContainer=g,e[du]=g.current,cv(e.nodeType===8?e.parentNode:e),$h(function(){Ab(r,g,o,s)}),g}function Nb(e,r,o,s,c){var d=o._reactRootContainer;if(d){var f=d;if(typeof c=="function"){var v=c;c=function(){var g=LC(f);v.call(g)}}Ab(r,f,e,c)}else f=iEe(o,r,e,c,s);return LC(f)}pK=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var o=Lg(r.pendingLanes);o!==0&&(SD(r,o|1),es(r,no()),!(Or&6)&&(dm=no()+500,Nd()))}break;case 13:$h(function(){var s=hu(e,1);if(s!==null){var c=Aa();Bc(s,e,1,c)}}),ZD(e,1)}};yD=function(e){if(e.tag===13){var r=hu(e,134217728);if(r!==null){var o=Aa();Bc(r,e,134217728,o)}ZD(e,134217728)}};mK=function(e){if(e.tag===13){var r=Cd(e),o=hu(e,r);if(o!==null){var s=Aa();Bc(o,e,r,s)}ZD(e,r)}};gK=function(){return Yr};vK=function(e,r){var o=Yr;try{return Yr=e,r()}finally{Yr=o}};aN=function(e,r,o){switch(r){case"input":if(Zx(e,o),r=o.name,o.type==="radio"&&r!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var s=o[r];if(s!==e&&s.form===e.form){var c=yb(s);if(!c)throw Error(St(90));qG(s),Zx(s,c)}}}break;case"textarea":XG(e,o);break;case"select":r=o.value,r!=null&&Xp(e,!!o.multiple,r,!1)}};rK=qD;iK=$h;var oEe={usingClientEntryPoint:!1,Events:[$v,Vp,yb,tK,nK,qD]},Eg={findFiberByHostInstance:Oh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aEe={bundleType:Eg.bundleType,version:Eg.version,rendererPackageName:Eg.rendererPackageName,rendererConfig:Eg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sK(e),e===null?null:e.stateNode},findFiberByHostInstance:Eg.findFiberByHostInstance||rEe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var my=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!my.isDisabled&&my.supportsFiber)try{vb=my.inject(aEe),Ol=my}catch{}}Is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oEe;Is.createPortal=function(e,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t2(r))throw Error(St(200));return nEe(e,r,null,o)};Is.createRoot=function(e,r){if(!t2(e))throw Error(St(299));var o=!1,s="",c=Bq;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(c=r.onRecoverableError)),r=QD(e,1,!1,null,null,o,!1,s,c),e[du]=r.current,cv(e.nodeType===8?e.parentNode:e),new e2(r)};Is.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(St(188)):(e=Object.keys(e).join(","),Error(St(268,e)));return e=sK(r),e=e===null?null:e.stateNode,e};Is.flushSync=function(e){return $h(e)};Is.hydrate=function(e,r,o){if(!xb(r))throw Error(St(200));return Nb(null,e,r,!0,o)};Is.hydrateRoot=function(e,r,o){if(!t2(e))throw Error(St(405));var s=o!=null&&o.hydratedSources||null,c=!1,d="",f=Bq;if(o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(f=o.onRecoverableError)),r=Uq(r,null,e,1,o??null,c,!1,d,f),e[du]=r.current,cv(e),s)for(e=0;e<s.length;e++)o=s[e],c=o._getVersion,c=c(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,c]:r.mutableSourceEagerHydrationData.push(o,c);return new Ob(r)};Is.render=function(e,r,o){if(!xb(r))throw Error(St(200));return Nb(null,e,r,!1,o)};Is.unmountComponentAtNode=function(e){if(!xb(e))throw Error(St(40));return e._reactRootContainer?($h(function(){Nb(null,null,e,!1,function(){e._reactRootContainer=null,e[du]=null})}),!0):!1};Is.unstable_batchedUpdates=qD;Is.unstable_renderSubtreeIntoContainer=function(e,r,o,s){if(!xb(o))throw Error(St(200));if(e==null||e._reactInternals===void 0)throw Error(St(38));return Nb(e,r,o,!1,s)};Is.version="18.3.1-next-f1338f8080-20240426";function Vq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vq)}catch(e){console.error(e)}}Vq(),VG.exports=Is;var Dl=VG.exports;const BN=wd(Dl),sEe=vG({__proto__:null,default:BN},[Dl]);var f7=Dl;Gx.createRoot=f7.createRoot,Gx.hydrateRoot=f7.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vv(){return vv=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},vv.apply(this,arguments)}var hd;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(hd||(hd={}));const p7="popstate";function cEe(e){e===void 0&&(e={});function r(c,d){let{pathname:f="/",search:v="",hash:g=""}=Qh(c.location.hash.substr(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),VN("",{pathname:f,search:v,hash:g},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function o(c,d){let f=c.document.querySelector("base"),v="";if(f&&f.getAttribute("href")){let g=c.location.href,_=g.indexOf("#");v=_===-1?g:g.slice(0,_)}return v+"#"+(typeof d=="string"?d:jq(d))}function s(c,d){n2(c.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(d)+")")}return uEe(r,o,s,e)}function Co(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function n2(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function lEe(){return Math.random().toString(36).substr(2,8)}function m7(e,r){return{usr:e.state,key:e.key,idx:r}}function VN(e,r,o,s){return o===void 0&&(o=null),vv({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof r=="string"?Qh(r):r,{state:o,key:r&&r.key||s||lEe()})}function jq(e){let{pathname:r="/",search:o="",hash:s=""}=e;return o&&o!=="?"&&(r+=o.charAt(0)==="?"?o:"?"+o),s&&s!=="#"&&(r+=s.charAt(0)==="#"?s:"#"+s),r}function Qh(e){let r={};if(e){let o=e.indexOf("#");o>=0&&(r.hash=e.substr(o),e=e.substr(0,o));let s=e.indexOf("?");s>=0&&(r.search=e.substr(s),e=e.substr(0,s)),e&&(r.pathname=e)}return r}function uEe(e,r,o,s){s===void 0&&(s={});let{window:c=document.defaultView,v5Compat:d=!1}=s,f=c.history,v=hd.Pop,g=null,_=C();_==null&&(_=0,f.replaceState(vv({},f.state,{idx:_}),""));function C(){return(f.state||{idx:null}).idx}function b(){v=hd.Pop;let N=C(),P=N==null?null:N-_;_=N,g&&g({action:v,location:x.location,delta:P})}function T(N,P){v=hd.Push;let O=VN(x.location,N,P);o&&o(O,N),_=C()+1;let L=m7(O,_),M=x.createHref(O);try{f.pushState(L,"",M)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;c.location.assign(M)}d&&g&&g({action:v,location:x.location,delta:1})}function I(N,P){v=hd.Replace;let O=VN(x.location,N,P);o&&o(O,N),_=C();let L=m7(O,_),M=x.createHref(O);f.replaceState(L,"",M),d&&g&&g({action:v,location:x.location,delta:0})}function w(N){let P=c.location.origin!=="null"?c.location.origin:c.location.href,O=typeof N=="string"?N:jq(N);return O=O.replace(/ $/,"%20"),Co(P,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,P)}let x={get action(){return v},get location(){return e(c,f)},listen(N){if(g)throw new Error("A history only accepts one active listener");return c.addEventListener(p7,b),g=N,()=>{c.removeEventListener(p7,b),g=null}},createHref(N){return r(c,N)},createURL:w,encodeLocation(N){let P=w(N);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:T,replace:I,go(N){return f.go(N)}};return x}var g7;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(g7||(g7={}));function dEe(e,r,o){return o===void 0&&(o="/"),hEe(e,r,o,!1)}function hEe(e,r,o,s){let c=typeof r=="string"?Qh(r):r,d=zq(c.pathname||"/",o);if(d==null)return null;let f=$q(e);fEe(f);let v=null;for(let g=0;v==null&&g<f.length;++g){let _=TEe(d);v=CEe(f[g],_,s)}return v}function $q(e,r,o,s){r===void 0&&(r=[]),o===void 0&&(o=[]),s===void 0&&(s="");let c=(d,f,v)=>{let g={relativePath:v===void 0?d.path||"":v,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};g.relativePath.startsWith("/")&&(Co(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let _=kh([s,g.relativePath]),C=o.concat(g);d.children&&d.children.length>0&&(Co(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+_+'".')),$q(d.children,r,C,_)),!(d.path==null&&!d.index)&&r.push({path:_,score:SEe(_,d.index),routesMeta:C})};return e.forEach((d,f)=>{var v;if(d.path===""||!((v=d.path)!=null&&v.includes("?")))c(d,f);else for(let g of Hq(d.path))c(d,f,g)}),r}function Hq(e){let r=e.split("/");if(r.length===0)return[];let[o,...s]=r,c=o.endsWith("?"),d=o.replace(/\?$/,"");if(s.length===0)return c?[d,""]:[d];let f=Hq(s.join("/")),v=[];return v.push(...f.map(g=>g===""?d:[d,g].join("/"))),c&&v.push(...f),v.map(g=>e.startsWith("/")&&g===""?"/":g)}function fEe(e){e.sort((r,o)=>r.score!==o.score?o.score-r.score:yEe(r.routesMeta.map(s=>s.childrenIndex),o.routesMeta.map(s=>s.childrenIndex)))}const pEe=/^:[\w-]+$/,mEe=3,gEe=2,vEe=1,EEe=10,_Ee=-2,v7=e=>e==="*";function SEe(e,r){let o=e.split("/"),s=o.length;return o.some(v7)&&(s+=_Ee),r&&(s+=gEe),o.filter(c=>!v7(c)).reduce((c,d)=>c+(pEe.test(d)?mEe:d===""?vEe:EEe),s)}function yEe(e,r){return e.length===r.length&&e.slice(0,-1).every((s,c)=>s===r[c])?e[e.length-1]-r[r.length-1]:0}function CEe(e,r,o){o===void 0&&(o=!1);let{routesMeta:s}=e,c={},d="/",f=[];for(let v=0;v<s.length;++v){let g=s[v],_=v===s.length-1,C=d==="/"?r:r.slice(d.length)||"/",b=E7({path:g.relativePath,caseSensitive:g.caseSensitive,end:_},C),T=g.route;if(!b&&_&&o&&!s[s.length-1].route.index&&(b=E7({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},C)),!b)return null;Object.assign(c,b.params),f.push({params:c,pathname:kh([d,b.pathname]),pathnameBase:xEe(kh([d,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(d=kh([d,b.pathnameBase]))}return f}function E7(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[o,s]=bEe(e.path,e.caseSensitive,e.end),c=r.match(o);if(!c)return null;let d=c[0],f=d.replace(/(.)\/+$/,"$1"),v=c.slice(1);return{params:s.reduce((_,C,b)=>{let{paramName:T,isOptional:I}=C;if(T==="*"){let x=v[b]||"";f=d.slice(0,d.length-x.length).replace(/(.)\/+$/,"$1")}const w=v[b];return I&&!w?_[T]=void 0:_[T]=(w||"").replace(/%2F/g,"/"),_},{}),pathname:d,pathnameBase:f,pattern:e}}function bEe(e,r,o){r===void 0&&(r=!1),o===void 0&&(o=!0),n2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,v,g)=>(s.push({paramName:v,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,r?void 0:"i"),s]}function TEe(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return n2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),e}}function zq(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let o=r.endsWith("/")?r.length-1:r.length,s=e.charAt(o);return s&&s!=="/"?null:e.slice(o)||"/"}function REe(e,r){r===void 0&&(r="/");let{pathname:o,search:s="",hash:c=""}=typeof e=="string"?Qh(e):e;return{pathname:o?o.startsWith("/")?o:wEe(o,r):r,search:NEe(s),hash:PEe(c)}}function wEe(e,r){let o=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?o.length>1&&o.pop():c!=="."&&o.push(c)}),o.length>1?o.join("/"):"/"}function uO(e,r,o,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function IEe(e){return e.filter((r,o)=>o===0||r.route.path&&r.route.path.length>0)}function AEe(e,r){let o=IEe(e);return r?o.map((s,c)=>c===o.length-1?s.pathname:s.pathnameBase):o.map(s=>s.pathnameBase)}function OEe(e,r,o,s){s===void 0&&(s=!1);let c;typeof e=="string"?c=Qh(e):(c=vv({},e),Co(!c.pathname||!c.pathname.includes("?"),uO("?","pathname","search",c)),Co(!c.pathname||!c.pathname.includes("#"),uO("#","pathname","hash",c)),Co(!c.search||!c.search.includes("#"),uO("#","search","hash",c)));let d=e===""||c.pathname==="",f=d?"/":c.pathname,v;if(f==null)v=o;else{let b=r.length-1;if(!s&&f.startsWith("..")){let T=f.split("/");for(;T[0]==="..";)T.shift(),b-=1;c.pathname=T.join("/")}v=b>=0?r[b]:"/"}let g=REe(c,v),_=f&&f!=="/"&&f.endsWith("/"),C=(d||f===".")&&o.endsWith("/");return!g.pathname.endsWith("/")&&(_||C)&&(g.pathname+="/"),g}const kh=e=>e.join("/").replace(/\/\/+/g,"/"),xEe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),NEe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,PEe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function DEe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Wq=["post","put","patch","delete"];new Set(Wq);const LEe=["get",...Wq];new Set(LEe);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ev(){return Ev=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},Ev.apply(this,arguments)}const r2=S.createContext(null),kEe=S.createContext(null),Pb=S.createContext(null),Db=S.createContext(null),Im=S.createContext({outlet:null,matches:[],isDataRoute:!1}),Gq=S.createContext(null);function Lb(){return S.useContext(Db)!=null}function Kq(){return Lb()||Co(!1),S.useContext(Db).location}function qq(e){S.useContext(Pb).static||S.useLayoutEffect(e)}function MEe(){let{isDataRoute:e}=S.useContext(Im);return e?YEe():FEe()}function FEe(){Lb()||Co(!1);let e=S.useContext(r2),{basename:r,future:o,navigator:s}=S.useContext(Pb),{matches:c}=S.useContext(Im),{pathname:d}=Kq(),f=JSON.stringify(AEe(c,o.v7_relativeSplatPath)),v=S.useRef(!1);return qq(()=>{v.current=!0}),S.useCallback(function(_,C){if(C===void 0&&(C={}),!v.current)return;if(typeof _=="number"){s.go(_);return}let b=OEe(_,JSON.parse(f),d,C.relative==="path");e==null&&r!=="/"&&(b.pathname=b.pathname==="/"?r:kh([r,b.pathname])),(C.replace?s.replace:s.push)(b,C.state,C)},[r,s,f,d,e])}function UEe(e,r){return BEe(e,r)}function BEe(e,r,o,s){Lb()||Co(!1);let{navigator:c,static:d}=S.useContext(Pb),{matches:f}=S.useContext(Im),v=f[f.length-1],g=v?v.params:{};v&&v.pathname;let _=v?v.pathnameBase:"/";v&&v.route;let C=Kq(),b;if(r){var T;let P=typeof r=="string"?Qh(r):r;_==="/"||(T=P.pathname)!=null&&T.startsWith(_)||Co(!1),b=P}else b=C;let I=b.pathname||"/",w=I;if(_!=="/"){let P=_.replace(/^\//,"").split("/");w="/"+I.replace(/^\//,"").split("/").slice(P.length).join("/")}let x=!d&&o&&o.matches&&o.matches.length>0?o.matches:dEe(e,{pathname:w}),N=zEe(x&&x.map(P=>Object.assign({},P,{params:Object.assign({},g,P.params),pathname:kh([_,c.encodeLocation?c.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?_:kh([_,c.encodeLocation?c.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),f,o,s);return r&&N?S.createElement(Db.Provider,{value:{location:Ev({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:hd.Pop}},N):N}function VEe(){let e=qEe(),r=DEe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),o=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},d=null;return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},r),o?S.createElement("pre",{style:c},o):null,d)}const jEe=S.createElement(VEe,null);class $Ee extends S.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,o){return o.location!==r.location||o.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:o.error,location:o.location,revalidation:r.revalidation||o.revalidation}}componentDidCatch(r,o){console.error("React Router caught the following error during render",r,o)}render(){return this.state.error!==void 0?S.createElement(Im.Provider,{value:this.props.routeContext},S.createElement(Gq.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HEe(e){let{routeContext:r,match:o,children:s}=e,c=S.useContext(r2);return c&&c.static&&c.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=o.route.id),S.createElement(Im.Provider,{value:r},s)}function zEe(e,r,o,s){var c;if(r===void 0&&(r=[]),o===void 0&&(o=null),s===void 0&&(s=null),e==null){var d;if(!o)return null;if(o.errors)e=o.matches;else if((d=s)!=null&&d.v7_partialHydration&&r.length===0&&!o.initialized&&o.matches.length>0)e=o.matches;else return null}let f=e,v=(c=o)==null?void 0:c.errors;if(v!=null){let C=f.findIndex(b=>b.route.id&&(v==null?void 0:v[b.route.id])!==void 0);C>=0||Co(!1),f=f.slice(0,Math.min(f.length,C+1))}let g=!1,_=-1;if(o&&s&&s.v7_partialHydration)for(let C=0;C<f.length;C++){let b=f[C];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(_=C),b.route.id){let{loaderData:T,errors:I}=o,w=b.route.loader&&T[b.route.id]===void 0&&(!I||I[b.route.id]===void 0);if(b.route.lazy||w){g=!0,_>=0?f=f.slice(0,_+1):f=[f[0]];break}}}return f.reduceRight((C,b,T)=>{let I,w=!1,x=null,N=null;o&&(I=v&&b.route.id?v[b.route.id]:void 0,x=b.route.errorElement||jEe,g&&(_<0&&T===0?(XEe("route-fallback",!1),w=!0,N=null):_===T&&(w=!0,N=b.route.hydrateFallbackElement||null)));let P=r.concat(f.slice(0,T+1)),O=()=>{let L;return I?L=x:w?L=N:b.route.Component?L=S.createElement(b.route.Component,null):b.route.element?L=b.route.element:L=C,S.createElement(HEe,{match:b,routeContext:{outlet:C,matches:P,isDataRoute:o!=null},children:L})};return o&&(b.route.ErrorBoundary||b.route.errorElement||T===0)?S.createElement($Ee,{location:o.location,revalidation:o.revalidation,component:x,error:I,children:O(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):O()},null)}var Yq=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Yq||{}),kC=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(kC||{});function WEe(e){let r=S.useContext(r2);return r||Co(!1),r}function GEe(e){let r=S.useContext(kEe);return r||Co(!1),r}function KEe(e){let r=S.useContext(Im);return r||Co(!1),r}function Xq(e){let r=KEe(),o=r.matches[r.matches.length-1];return o.route.id||Co(!1),o.route.id}function qEe(){var e;let r=S.useContext(Gq),o=GEe(kC.UseRouteError),s=Xq(kC.UseRouteError);return r!==void 0?r:(e=o.errors)==null?void 0:e[s]}function YEe(){let{router:e}=WEe(Yq.UseNavigateStable),r=Xq(kC.UseNavigateStable),o=S.useRef(!1);return qq(()=>{o.current=!0}),S.useCallback(function(c,d){d===void 0&&(d={}),o.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,Ev({fromRouteId:r},d)))},[e,r])}const _7={};function XEe(e,r,o){!r&&!_7[e]&&(_7[e]=!0)}function JEe(e,r){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!r||r.v7_relativeSplatPath),r&&(r.v7_fetcherPersist,r.v7_normalizeFormMethod,r.v7_partialHydration,r.v7_skipActionErrorRevalidation)}function Ih(e){Co(!1)}function QEe(e){let{basename:r="/",children:o=null,location:s,navigationType:c=hd.Pop,navigator:d,static:f=!1,future:v}=e;Lb()&&Co(!1);let g=r.replace(/^\/*/,"/"),_=S.useMemo(()=>({basename:g,navigator:d,static:f,future:Ev({v7_relativeSplatPath:!1},v)}),[g,v,d,f]);typeof s=="string"&&(s=Qh(s));let{pathname:C="/",search:b="",hash:T="",state:I=null,key:w="default"}=s,x=S.useMemo(()=>{let N=zq(C,g);return N==null?null:{location:{pathname:N,search:b,hash:T,state:I,key:w},navigationType:c}},[g,C,b,T,I,w,c]);return x==null?null:S.createElement(Pb.Provider,{value:_},S.createElement(Db.Provider,{children:o,value:x}))}function ZEe(e){let{children:r,location:o}=e;return UEe(jN(r),o)}new Promise(()=>{});function jN(e,r){r===void 0&&(r=[]);let o=[];return S.Children.forEach(e,(s,c)=>{if(!S.isValidElement(s))return;let d=[...r,c];if(s.type===S.Fragment){o.push.apply(o,jN(s.props.children,d));return}s.type!==Ih&&Co(!1),!s.props.index||!s.props.children||Co(!1);let f={id:s.props.id||d.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=jN(s.props.children,d)),o.push(f)}),o}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const e_e="6";try{window.__reactRouterVersion=e_e}catch{}const t_e="startTransition",S7=Fh[t_e];function n_e(e){let{basename:r,children:o,future:s,window:c}=e,d=S.useRef();d.current==null&&(d.current=cEe({window:c,v5Compat:!0}));let f=d.current,[v,g]=S.useState({action:f.action,location:f.location}),{v7_startTransition:_}=s||{},C=S.useCallback(b=>{_&&S7?S7(()=>g(b)):g(b)},[g,_]);return S.useLayoutEffect(()=>f.listen(C),[f,C]),S.useEffect(()=>JEe(s),[s]),S.createElement(QEe,{basename:r,children:o,location:v.location,navigationType:v.action,navigator:f,future:s})}var y7;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(y7||(y7={}));var C7;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(C7||(C7={}));var Jq={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var r={}.hasOwnProperty;function o(){for(var d="",f=0;f<arguments.length;f++){var v=arguments[f];v&&(d=c(d,s(v)))}return d}function s(d){if(typeof d=="string"||typeof d=="number")return d;if(typeof d!="object")return"";if(Array.isArray(d))return o.apply(null,d);if(d.toString!==Object.prototype.toString&&!d.toString.toString().includes("[native code]"))return d.toString();var f="";for(var v in d)r.call(d,v)&&d[v]&&(f=c(f,v));return f}function c(d,f){return f?d?d+" "+f:d+f:d}e.exports?(o.default=o,e.exports=o):window.classNames=o})()})(Jq);var r_e=Jq.exports;const $e=wd(r_e);function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var s in o)({}).hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},Qe.apply(null,arguments)}function on(e){"@babel/helpers - typeof";return on=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},on(e)}var i_e=Symbol.for("react.element"),o_e=Symbol.for("react.transitional.element"),a_e=Symbol.for("react.fragment");function Qq(e){return e&&on(e)==="object"&&(e.$$typeof===i_e||e.$$typeof===o_e)&&e.type===a_e}function zc(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[];return Ve.Children.forEach(e,function(s){s==null&&!r.keepEmpty||(Array.isArray(s)?o=o.concat(zc(s)):Qq(s)&&s.props?o=o.concat(zc(s.props.children,r)):o.push(s))}),o}var $N={},s_e=function(r){};function c_e(e,r){}function l_e(e,r){}function u_e(){$N={}}function Zq(e,r,o){!r&&!$N[o]&&(e(!1,o),$N[o]=!0)}function _a(e,r){Zq(c_e,e,r)}function d_e(e,r){Zq(l_e,e,r)}_a.preMessage=s_e;_a.resetWarned=u_e;_a.noteOnce=d_e;function h_e(e,r){if(on(e)!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var s=o.call(e,r||"default");if(on(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function eY(e){var r=h_e(e,"string");return on(r)=="symbol"?r:r+""}function Ce(e,r,o){return(r=eY(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,e}function b7(e,r){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),o.push.apply(o,s)}return o}function _e(e){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?b7(Object(o),!0).forEach(function(s){Ce(e,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):b7(Object(o)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(o,s))})}return e}function _v(e){return e instanceof HTMLElement||e instanceof SVGElement}function tY(e){return e&&on(e)==="object"&&_v(e.nativeElement)?e.nativeElement:_v(e)?e:null}function Yy(e){var r=tY(e);if(r)return r;if(e instanceof Ve.Component){var o;return(o=BN.findDOMNode)===null||o===void 0?void 0:o.call(BN,e)}return null}var nY={exports:{}},Xr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i2=Symbol.for("react.element"),o2=Symbol.for("react.portal"),kb=Symbol.for("react.fragment"),Mb=Symbol.for("react.strict_mode"),Fb=Symbol.for("react.profiler"),Ub=Symbol.for("react.provider"),Bb=Symbol.for("react.context"),f_e=Symbol.for("react.server_context"),Vb=Symbol.for("react.forward_ref"),jb=Symbol.for("react.suspense"),$b=Symbol.for("react.suspense_list"),Hb=Symbol.for("react.memo"),zb=Symbol.for("react.lazy"),p_e=Symbol.for("react.offscreen"),rY;rY=Symbol.for("react.module.reference");function hc(e){if(typeof e=="object"&&e!==null){var r=e.$$typeof;switch(r){case i2:switch(e=e.type,e){case kb:case Fb:case Mb:case jb:case $b:return e;default:switch(e=e&&e.$$typeof,e){case f_e:case Bb:case Vb:case zb:case Hb:case Ub:return e;default:return r}}case o2:return r}}}Xr.ContextConsumer=Bb;Xr.ContextProvider=Ub;Xr.Element=i2;Xr.ForwardRef=Vb;Xr.Fragment=kb;Xr.Lazy=zb;Xr.Memo=Hb;Xr.Portal=o2;Xr.Profiler=Fb;Xr.StrictMode=Mb;Xr.Suspense=jb;Xr.SuspenseList=$b;Xr.isAsyncMode=function(){return!1};Xr.isConcurrentMode=function(){return!1};Xr.isContextConsumer=function(e){return hc(e)===Bb};Xr.isContextProvider=function(e){return hc(e)===Ub};Xr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===i2};Xr.isForwardRef=function(e){return hc(e)===Vb};Xr.isFragment=function(e){return hc(e)===kb};Xr.isLazy=function(e){return hc(e)===zb};Xr.isMemo=function(e){return hc(e)===Hb};Xr.isPortal=function(e){return hc(e)===o2};Xr.isProfiler=function(e){return hc(e)===Fb};Xr.isStrictMode=function(e){return hc(e)===Mb};Xr.isSuspense=function(e){return hc(e)===jb};Xr.isSuspenseList=function(e){return hc(e)===$b};Xr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===kb||e===Fb||e===Mb||e===jb||e===$b||e===p_e||typeof e=="object"&&e!==null&&(e.$$typeof===zb||e.$$typeof===Hb||e.$$typeof===Ub||e.$$typeof===Bb||e.$$typeof===Vb||e.$$typeof===rY||e.getModuleId!==void 0)};Xr.typeOf=hc;nY.exports=Xr;var dO=nY.exports;function zv(e,r,o){var s=S.useRef({});return(!("value"in s.current)||o(s.current.condition,r))&&(s.current.value=e(),s.current.condition=r),s.current.value}var m_e=Number(S.version.split(".")[0]),a2=function(r,o){typeof r=="function"?r(o):on(r)==="object"&&r&&"current"in r&&(r.current=o)},qc=function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var c=o.filter(Boolean);return c.length<=1?c[0]:function(d){o.forEach(function(f){a2(f,d)})}},Am=function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return zv(function(){return qc.apply(void 0,o)},o,function(c,d){return c.length!==d.length||c.every(function(f,v){return f!==d[v]})})},Om=function(r){var o,s;if(!r)return!1;if(iY(r)&&m_e>=19)return!0;var c=dO.isMemo(r)?r.type.type:r.type;return!(typeof c=="function"&&!((o=c.prototype)!==null&&o!==void 0&&o.render)&&c.$$typeof!==dO.ForwardRef||typeof r=="function"&&!((s=r.prototype)!==null&&s!==void 0&&s.render)&&r.$$typeof!==dO.ForwardRef)};function iY(e){return S.isValidElement(e)&&!Qq(e)}var Wv=function(r){if(r&&iY(r)){var o=r;return o.props.propertyIsEnumerable("ref")?o.props.ref:o.ref}return null},HN=S.createContext(null);function g_e(e){var r=e.children,o=e.onBatchResize,s=S.useRef(0),c=S.useRef([]),d=S.useContext(HN),f=S.useCallback(function(v,g,_){s.current+=1;var C=s.current;c.current.push({size:v,element:g,data:_}),Promise.resolve().then(function(){C===s.current&&(o==null||o(c.current),c.current=[])}),d==null||d(v,g,_)},[o,d]);return S.createElement(HN.Provider,{value:f},r)}var oY=function(){if(typeof Map<"u")return Map;function e(r,o){var s=-1;return r.some(function(c,d){return c[0]===o?(s=d,!0):!1}),s}return function(){function r(){this.__entries__=[]}return Object.defineProperty(r.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),r.prototype.get=function(o){var s=e(this.__entries__,o),c=this.__entries__[s];return c&&c[1]},r.prototype.set=function(o,s){var c=e(this.__entries__,o);~c?this.__entries__[c][1]=s:this.__entries__.push([o,s])},r.prototype.delete=function(o){var s=this.__entries__,c=e(s,o);~c&&s.splice(c,1)},r.prototype.has=function(o){return!!~e(this.__entries__,o)},r.prototype.clear=function(){this.__entries__.splice(0)},r.prototype.forEach=function(o,s){s===void 0&&(s=null);for(var c=0,d=this.__entries__;c<d.length;c++){var f=d[c];o.call(s,f[1],f[0])}},r}()}(),zN=typeof window<"u"&&typeof document<"u"&&window.document===document,MC=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),v_e=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(MC):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),E_e=2;function __e(e,r){var o=!1,s=!1,c=0;function d(){o&&(o=!1,e()),s&&v()}function f(){v_e(d)}function v(){var g=Date.now();if(o){if(g-c<E_e)return;s=!0}else o=!0,s=!1,setTimeout(f,r);c=g}return v}var S_e=20,y_e=["top","right","bottom","left","width","height","size","weight"],C_e=typeof MutationObserver<"u",b_e=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=__e(this.refresh.bind(this),S_e)}return e.prototype.addObserver=function(r){~this.observers_.indexOf(r)||this.observers_.push(r),this.connected_||this.connect_()},e.prototype.removeObserver=function(r){var o=this.observers_,s=o.indexOf(r);~s&&o.splice(s,1),!o.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var r=this.updateObservers_();r&&this.refresh()},e.prototype.updateObservers_=function(){var r=this.observers_.filter(function(o){return o.gatherActive(),o.hasActive()});return r.forEach(function(o){return o.broadcastActive()}),r.length>0},e.prototype.connect_=function(){!zN||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),C_e?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!zN||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(r){var o=r.propertyName,s=o===void 0?"":o,c=y_e.some(function(d){return!!~s.indexOf(d)});c&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),aY=function(e,r){for(var o=0,s=Object.keys(r);o<s.length;o++){var c=s[o];Object.defineProperty(e,c,{value:r[c],enumerable:!1,writable:!1,configurable:!0})}return e},hm=function(e){var r=e&&e.ownerDocument&&e.ownerDocument.defaultView;return r||MC},sY=Wb(0,0,0,0);function FC(e){return parseFloat(e)||0}function T7(e){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return r.reduce(function(s,c){var d=e["border-"+c+"-width"];return s+FC(d)},0)}function T_e(e){for(var r=["top","right","bottom","left"],o={},s=0,c=r;s<c.length;s++){var d=c[s],f=e["padding-"+d];o[d]=FC(f)}return o}function R_e(e){var r=e.getBBox();return Wb(0,0,r.width,r.height)}function w_e(e){var r=e.clientWidth,o=e.clientHeight;if(!r&&!o)return sY;var s=hm(e).getComputedStyle(e),c=T_e(s),d=c.left+c.right,f=c.top+c.bottom,v=FC(s.width),g=FC(s.height);if(s.boxSizing==="border-box"&&(Math.round(v+d)!==r&&(v-=T7(s,"left","right")+d),Math.round(g+f)!==o&&(g-=T7(s,"top","bottom")+f)),!A_e(e)){var _=Math.round(v+d)-r,C=Math.round(g+f)-o;Math.abs(_)!==1&&(v-=_),Math.abs(C)!==1&&(g-=C)}return Wb(c.left,c.top,v,g)}var I_e=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof hm(e).SVGGraphicsElement}:function(e){return e instanceof hm(e).SVGElement&&typeof e.getBBox=="function"}}();function A_e(e){return e===hm(e).document.documentElement}function O_e(e){return zN?I_e(e)?R_e(e):w_e(e):sY}function x_e(e){var r=e.x,o=e.y,s=e.width,c=e.height,d=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,f=Object.create(d.prototype);return aY(f,{x:r,y:o,width:s,height:c,top:o,right:r+s,bottom:c+o,left:r}),f}function Wb(e,r,o,s){return{x:e,y:r,width:o,height:s}}var N_e=function(){function e(r){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Wb(0,0,0,0),this.target=r}return e.prototype.isActive=function(){var r=O_e(this.target);return this.contentRect_=r,r.width!==this.broadcastWidth||r.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var r=this.contentRect_;return this.broadcastWidth=r.width,this.broadcastHeight=r.height,r},e}(),P_e=function(){function e(r,o){var s=x_e(o);aY(this,{target:r,contentRect:s})}return e}(),D_e=function(){function e(r,o,s){if(this.activeObservations_=[],this.observations_=new oY,typeof r!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=r,this.controller_=o,this.callbackCtx_=s}return e.prototype.observe=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof hm(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(r)||(o.set(r,new N_e(r)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof hm(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(r)&&(o.delete(r),o.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var r=this;this.clearActive(),this.observations_.forEach(function(o){o.isActive()&&r.activeObservations_.push(o)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var r=this.callbackCtx_,o=this.activeObservations_.map(function(s){return new P_e(s.target,s.broadcastRect())});this.callback_.call(r,o,r),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),cY=typeof WeakMap<"u"?new WeakMap:new oY,lY=function(){function e(r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var o=b_e.getInstance(),s=new D_e(r,o,this);cY.set(this,s)}return e}();["observe","unobserve","disconnect"].forEach(function(e){lY.prototype[e]=function(){var r;return(r=cY.get(this))[e].apply(r,arguments)}});var L_e=function(){return typeof MC.ResizeObserver<"u"?MC.ResizeObserver:lY}(),fd=new Map;function k_e(e){e.forEach(function(r){var o,s=r.target;(o=fd.get(s))===null||o===void 0||o.forEach(function(c){return c(s)})})}var uY=new L_e(k_e);function M_e(e,r){fd.has(e)||(fd.set(e,new Set),uY.observe(e)),fd.get(e).add(r)}function F_e(e,r){fd.has(e)&&(fd.get(e).delete(r),fd.get(e).size||(uY.unobserve(e),fd.delete(e)))}function io(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function R7(e,r){for(var o=0;o<r.length;o++){var s=r[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,eY(s.key),s)}}function oo(e,r,o){return r&&R7(e.prototype,r),o&&R7(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sv(e,r){return Sv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,s){return o.__proto__=s,o},Sv(e,r)}function Ml(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Sv(e,r)}function yv(e){return yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yv(e)}function s2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s2=function(){return!!e})()}function tr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U_e(e,r){if(r&&(on(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tr(e)}function Fl(e){var r=s2();return function(){var o,s=yv(e);if(r){var c=yv(this).constructor;o=Reflect.construct(s,arguments,c)}else o=s.apply(this,arguments);return U_e(this,o)}}var B_e=function(e){Ml(o,e);var r=Fl(o);function o(){return io(this,o),r.apply(this,arguments)}return oo(o,[{key:"render",value:function(){return this.props.children}}]),o}(S.Component);function V_e(e,r){var o=e.children,s=e.disabled,c=S.useRef(null),d=S.useRef(null),f=S.useContext(HN),v=typeof o=="function",g=v?o(c):o,_=S.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),C=!v&&S.isValidElement(g)&&Om(g),b=C?Wv(g):null,T=Am(b,c),I=function(){var P;return Yy(c.current)||(c.current&&on(c.current)==="object"?Yy((P=c.current)===null||P===void 0?void 0:P.nativeElement):null)||Yy(d.current)};S.useImperativeHandle(r,function(){return I()});var w=S.useRef(e);w.current=e;var x=S.useCallback(function(N){var P=w.current,O=P.onResize,L=P.data,M=N.getBoundingClientRect(),F=M.width,V=M.height,j=N.offsetWidth,z=N.offsetHeight,q=Math.floor(F),W=Math.floor(V);if(_.current.width!==q||_.current.height!==W||_.current.offsetWidth!==j||_.current.offsetHeight!==z){var J={width:q,height:W,offsetWidth:j,offsetHeight:z};_.current=J;var te=j===Math.round(F)?F:j,ee=z===Math.round(V)?V:z,oe=_e(_e({},J),{},{offsetWidth:te,offsetHeight:ee});f==null||f(oe,N,L),O&&Promise.resolve().then(function(){O(oe,N)})}},[]);return S.useEffect(function(){var N=I();return N&&!s&&M_e(N,x),function(){return F_e(N,x)}},[c.current,s]),S.createElement(B_e,{ref:d},C?S.cloneElement(g,{ref:T}):g)}var j_e=S.forwardRef(V_e),$_e="rc-observer-key";function H_e(e,r){var o=e.children,s=typeof o=="function"?[o]:zc(o);return s.map(function(c,d){var f=(c==null?void 0:c.key)||"".concat($_e,"-").concat(d);return S.createElement(j_e,Qe({},e,{key:f,ref:d===0?r:void 0}),c)})}var Eu=S.forwardRef(H_e);Eu.Collection=g_e;function WN(e,r){(r==null||r>e.length)&&(r=e.length);for(var o=0,s=Array(r);o<r;o++)s[o]=e[o];return s}function z_e(e){if(Array.isArray(e))return WN(e)}function dY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function c2(e,r){if(e){if(typeof e=="string")return WN(e,r);var o={}.toString.call(e).slice(8,-1);return o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set"?Array.from(e):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?WN(e,r):void 0}}function W_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vt(e){return z_e(e)||dY(e)||c2(e)||W_e()}var hY=function(r){return+setTimeout(r,16)},fY=function(r){return clearTimeout(r)};typeof window<"u"&&"requestAnimationFrame"in window&&(hY=function(r){return window.requestAnimationFrame(r)},fY=function(r){return window.cancelAnimationFrame(r)});var w7=0,l2=new Map;function pY(e){l2.delete(e)}var oi=function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;w7+=1;var s=w7;function c(d){if(d===0)pY(s),r();else{var f=hY(function(){c(d-1)});l2.set(s,f)}}return c(o),s};oi.cancel=function(e){var r=l2.get(e);return pY(e),fY(r)};function mY(e){if(Array.isArray(e))return e}function G_e(e,r){var o=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(o!=null){var s,c,d,f,v=[],g=!0,_=!1;try{if(d=(o=o.call(e)).next,r===0){if(Object(o)!==o)return;g=!1}else for(;!(g=(s=d.call(o)).done)&&(v.push(s.value),v.length!==r);g=!0);}catch(C){_=!0,c=C}finally{try{if(!g&&o.return!=null&&(f=o.return(),Object(f)!==f))return}finally{if(_)throw c}}return v}}function gY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ue(e,r){return mY(e)||G_e(e,r)||c2(e,r)||gY()}function Cv(e){for(var r=0,o,s=0,c=e.length;c>=4;++s,c-=4)o=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,r=(o&65535)*1540483477+((o>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(c){case 3:r^=(e.charCodeAt(s+2)&255)<<16;case 2:r^=(e.charCodeAt(s+1)&255)<<8;case 1:r^=e.charCodeAt(s)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}function Oa(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function K_e(e,r){if(!e)return!1;if(e.contains)return e.contains(r);for(var o=r;o;){if(o===e)return!0;o=o.parentNode}return!1}var I7="data-rc-order",A7="data-rc-priority",q_e="rc-util-key",GN=new Map;function vY(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.mark;return r?r.startsWith("data-")?r:"data-".concat(r):q_e}function Gb(e){if(e.attachTo)return e.attachTo;var r=document.querySelector("head");return r||document.body}function Y_e(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function u2(e){return Array.from((GN.get(e)||e).children).filter(function(r){return r.tagName==="STYLE"})}function EY(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Oa())return null;var o=r.csp,s=r.prepend,c=r.priority,d=c===void 0?0:c,f=Y_e(s),v=f==="prependQueue",g=document.createElement("style");g.setAttribute(I7,f),v&&d&&g.setAttribute(A7,"".concat(d)),o!=null&&o.nonce&&(g.nonce=o==null?void 0:o.nonce),g.innerHTML=e;var _=Gb(r),C=_.firstChild;if(s){if(v){var b=(r.styles||u2(_)).filter(function(T){if(!["prepend","prependQueue"].includes(T.getAttribute(I7)))return!1;var I=Number(T.getAttribute(A7)||0);return d>=I});if(b.length)return _.insertBefore(g,b[b.length-1].nextSibling),g}_.insertBefore(g,C)}else _.appendChild(g);return g}function _Y(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=Gb(r);return(r.styles||u2(o)).find(function(s){return s.getAttribute(vY(r))===e})}function bv(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=_Y(e,r);if(o){var s=Gb(r);s.removeChild(o)}}function X_e(e,r){var o=GN.get(e);if(!o||!K_e(document,o)){var s=EY("",r),c=s.parentNode;GN.set(e,c),e.removeChild(s)}}function cu(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=Gb(o),c=u2(s),d=_e(_e({},o),{},{styles:c});X_e(s,d);var f=_Y(r,d);if(f){var v,g;if((v=d.csp)!==null&&v!==void 0&&v.nonce&&f.nonce!==((g=d.csp)===null||g===void 0?void 0:g.nonce)){var _;f.nonce=(_=d.csp)===null||_===void 0?void 0:_.nonce}return f.innerHTML!==e&&(f.innerHTML=e),f}var C=EY(e,d);return C.setAttribute(vY(d),r),C}function J_e(e,r){if(e==null)return{};var o={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;o[s]=e[s]}return o}function An(e,r){if(e==null)return{};var o,s,c=J_e(e,r);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)o=d[s],r.indexOf(o)===-1&&{}.propertyIsEnumerable.call(e,o)&&(c[o]=e[o])}return c}function Tv(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=new Set;function c(d,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,g=s.has(d);if(_a(!g,"Warning: There may be circular references"),g)return!1;if(d===f)return!0;if(o&&v>1)return!1;s.add(d);var _=v+1;if(Array.isArray(d)){if(!Array.isArray(f)||d.length!==f.length)return!1;for(var C=0;C<d.length;C++)if(!c(d[C],f[C],_))return!1;return!0}if(d&&f&&on(d)==="object"&&on(f)==="object"){var b=Object.keys(d);return b.length!==Object.keys(f).length?!1:b.every(function(T){return c(d[T],f[T],_)})}return!1}return c(e,r)}var Q_e="%";function KN(e){return e.join(Q_e)}var Z_e=function(){function e(r){io(this,e),Ce(this,"instanceId",void 0),Ce(this,"cache",new Map),this.instanceId=r}return oo(e,[{key:"get",value:function(o){return this.opGet(KN(o))}},{key:"opGet",value:function(o){return this.cache.get(o)||null}},{key:"update",value:function(o,s){return this.opUpdate(KN(o),s)}},{key:"opUpdate",value:function(o,s){var c=this.cache.get(o),d=s(c);d===null?this.cache.delete(o):this.cache.set(o,d)}}]),e}(),fm="data-token-hash",Vc="data-css-hash",pd="__cssinjs_instance__";function eSe(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var r=document.body.querySelectorAll("style[".concat(Vc,"]"))||[],o=document.head.firstChild;Array.from(r).forEach(function(c){c[pd]=c[pd]||e,c[pd]===e&&document.head.insertBefore(c,o)});var s={};Array.from(document.querySelectorAll("style[".concat(Vc,"]"))).forEach(function(c){var d=c.getAttribute(Vc);if(s[d]){if(c[pd]===e){var f;(f=c.parentNode)===null||f===void 0||f.removeChild(c)}}else s[d]=!0})}return new Z_e(e)}var Gv=S.createContext({hashPriority:"low",cache:eSe(),defaultCache:!0});function tSe(e,r){if(e.length!==r.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!==r[o])return!1;return!0}var d2=function(){function e(){io(this,e),Ce(this,"cache",void 0),Ce(this,"keys",void 0),Ce(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return oo(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(o){var s,c,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f={map:this.cache};return o.forEach(function(v){if(!f)f=void 0;else{var g;f=(g=f)===null||g===void 0||(g=g.map)===null||g===void 0?void 0:g.get(v)}}),(s=f)!==null&&s!==void 0&&s.value&&d&&(f.value[1]=this.cacheCallTimes++),(c=f)===null||c===void 0?void 0:c.value}},{key:"get",value:function(o){var s;return(s=this.internalGet(o,!0))===null||s===void 0?void 0:s[0]}},{key:"has",value:function(o){return!!this.internalGet(o)}},{key:"set",value:function(o,s){var c=this;if(!this.has(o)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var d=this.keys.reduce(function(_,C){var b=Ue(_,2),T=b[1];return c.internalGet(C)[1]<T?[C,c.internalGet(C)[1]]:_},[this.keys[0],this.cacheCallTimes]),f=Ue(d,1),v=f[0];this.delete(v)}this.keys.push(o)}var g=this.cache;o.forEach(function(_,C){if(C===o.length-1)g.set(_,{value:[s,c.cacheCallTimes++]});else{var b=g.get(_);b?b.map||(b.map=new Map):g.set(_,{map:new Map}),g=g.get(_).map}})}},{key:"deleteByPath",value:function(o,s){var c=o.get(s[0]);if(s.length===1){var d;return c.map?o.set(s[0],{map:c.map}):o.delete(s[0]),(d=c.value)===null||d===void 0?void 0:d[0]}var f=this.deleteByPath(c.map,s.slice(1));return(!c.map||c.map.size===0)&&!c.value&&o.delete(s[0]),f}},{key:"delete",value:function(o){if(this.has(o))return this.keys=this.keys.filter(function(s){return!tSe(s,o)}),this.deleteByPath(this.cache,o)}}]),e}();Ce(d2,"MAX_CACHE_SIZE",20);Ce(d2,"MAX_CACHE_OFFSET",5);var O7=0,SY=function(){function e(r){io(this,e),Ce(this,"derivatives",void 0),Ce(this,"id",void 0),this.derivatives=Array.isArray(r)?r:[r],this.id=O7,r.length===0&&(r.length>0,void 0),O7+=1}return oo(e,[{key:"getDerivativeToken",value:function(o){return this.derivatives.reduce(function(s,c){return c(o,s)},void 0)}}]),e}(),hO=new d2;function qN(e){var r=Array.isArray(e)?e:[e];return hO.has(r)||hO.set(r,new SY(r)),hO.get(r)}var nSe=new WeakMap,fO={};function rSe(e,r){for(var o=nSe,s=0;s<r.length;s+=1){var c=r[s];o.has(c)||o.set(c,new WeakMap),o=o.get(c)}return o.has(fO)||o.set(fO,e()),o.get(fO)}var x7=new WeakMap;function qg(e){var r=x7.get(e)||"";return r||(Object.keys(e).forEach(function(o){var s=e[o];r+=o,s instanceof SY?r+=s.id:s&&on(s)==="object"?r+=qg(s):r+=s}),r=Cv(r),x7.set(e,r)),r}function N7(e,r){return Cv("".concat(r,"_").concat(qg(e)))}var YN=Oa();function Ge(e){return typeof e=="number"?"".concat(e,"px"):e}function UC(e,r,o){var s,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(d)return e;var f=_e(_e({},c),{},(s={},Ce(s,fm,r),Ce(s,Vc,o),s)),v=Object.keys(f).map(function(g){var _=f[g];return _?"".concat(g,'="').concat(_,'"'):null}).filter(function(g){return g}).join(" ");return"<style ".concat(v,">").concat(e,"</style>")}var Xy=function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(o?"".concat(o,"-"):"").concat(r).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},iSe=function(r,o,s){return Object.keys(r).length?".".concat(o).concat(s!=null&&s.scope?".".concat(s.scope):"","{").concat(Object.entries(r).map(function(c){var d=Ue(c,2),f=d[0],v=d[1];return"".concat(f,":").concat(v,";")}).join(""),"}"):""},yY=function(r,o,s){var c={},d={};return Object.entries(r).forEach(function(f){var v,g,_=Ue(f,2),C=_[0],b=_[1];if(s!=null&&(v=s.preserve)!==null&&v!==void 0&&v[C])d[C]=b;else if((typeof b=="string"||typeof b=="number")&&!(s!=null&&(g=s.ignore)!==null&&g!==void 0&&g[C])){var T,I=Xy(C,s==null?void 0:s.prefix);c[I]=typeof b=="number"&&!(s!=null&&(T=s.unitless)!==null&&T!==void 0&&T[C])?"".concat(b,"px"):String(b),d[C]="var(".concat(I,")")}}),[d,iSe(c,o,{scope:s==null?void 0:s.scope})]},P7=Oa()?S.useLayoutEffect:S.useEffect,Cr=function(r,o){var s=S.useRef(!0);P7(function(){return r(s.current)},o),P7(function(){return s.current=!1,function(){s.current=!0}},[])},D7=function(r,o){Cr(function(s){if(!s)return r()},o)},oSe=_e({},Fh),L7=oSe.useInsertionEffect,aSe=function(r,o,s){S.useMemo(r,s),Cr(function(){return o(!0)},s)},sSe=L7?function(e,r,o){return L7(function(){return e(),r()},o)}:aSe,cSe=_e({},Fh),lSe=cSe.useInsertionEffect,uSe=function(r){var o=[],s=!1;function c(d){s||o.push(d)}return S.useEffect(function(){return s=!1,function(){s=!0,o.length&&o.forEach(function(d){return d()})}},r),c},dSe=function(){return function(r){r()}},hSe=typeof lSe<"u"?uSe:dSe;function h2(e,r,o,s,c){var d=S.useContext(Gv),f=d.cache,v=[e].concat(vt(r)),g=KN(v),_=hSe([g]),C=function(w){f.opUpdate(g,function(x){var N=x||[void 0,void 0],P=Ue(N,2),O=P[0],L=O===void 0?0:O,M=P[1],F=M,V=F||o(),j=[L,V];return w?w(j):j})};S.useMemo(function(){C()},[g]);var b=f.opGet(g),T=b[1];return sSe(function(){c==null||c(T)},function(I){return C(function(w){var x=Ue(w,2),N=x[0],P=x[1];return I&&N===0&&(c==null||c(T)),[N+1,P]}),function(){f.opUpdate(g,function(w){var x=w||[],N=Ue(x,2),P=N[0],O=P===void 0?0:P,L=N[1],M=O-1;return M===0?(_(function(){(I||!f.opGet(g))&&(s==null||s(L,!1))}),null):[O-1,L]})}},[g]),T}var fSe={},pSe="css",Ah=new Map;function mSe(e){Ah.set(e,(Ah.get(e)||0)+1)}function gSe(e,r){if(typeof document<"u"){var o=document.querySelectorAll("style[".concat(fm,'="').concat(e,'"]'));o.forEach(function(s){if(s[pd]===r){var c;(c=s.parentNode)===null||c===void 0||c.removeChild(s)}})}}var vSe=0;function ESe(e,r){Ah.set(e,(Ah.get(e)||0)-1);var o=Array.from(Ah.keys()),s=o.filter(function(c){var d=Ah.get(c)||0;return d<=0});o.length-s.length>vSe&&s.forEach(function(c){gSe(c,r),Ah.delete(c)})}var _Se=function(r,o,s,c){var d=s.getDerivativeToken(r),f=_e(_e({},d),o);return c&&(f=c(f)),f},CY="token";function SSe(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=S.useContext(Gv),c=s.cache.instanceId,d=s.container,f=o.salt,v=f===void 0?"":f,g=o.override,_=g===void 0?fSe:g,C=o.formatToken,b=o.getComputedToken,T=o.cssVar,I=rSe(function(){return Object.assign.apply(Object,[{}].concat(vt(r)))},r),w=qg(I),x=qg(_),N=T?qg(T):"",P=h2(CY,[v,e.id,w,x,N],function(){var O,L=b?b(I,_,e):_Se(I,_,e,C),M=_e({},L),F="";if(T){var V=yY(L,T.key,{prefix:T.prefix,ignore:T.ignore,unitless:T.unitless,preserve:T.preserve}),j=Ue(V,2);L=j[0],F=j[1]}var z=N7(L,v);L._tokenKey=z,M._tokenKey=N7(M,v);var q=(O=T==null?void 0:T.key)!==null&&O!==void 0?O:z;L._themeKey=q,mSe(q);var W="".concat(pSe,"-").concat(Cv(z));return L._hashId=W,[L,W,M,F,(T==null?void 0:T.key)||""]},function(O){ESe(O[0]._themeKey,c)},function(O){var L=Ue(O,4),M=L[0],F=L[3];if(T&&F){var V=cu(F,Cv("css-variables-".concat(M._themeKey)),{mark:Vc,prepend:"queue",attachTo:d,priority:-999});V[pd]=c,V.setAttribute(fm,M._themeKey)}});return P}var ySe=function(r,o,s){var c=Ue(r,5),d=c[2],f=c[3],v=c[4],g=s||{},_=g.plain;if(!f)return null;var C=d._tokenKey,b=-999,T={"data-rc-order":"prependQueue","data-rc-priority":"".concat(b)},I=UC(f,v,C,T,_);return[b,C,I]},CSe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},bY="comm",TY="rule",RY="decl",bSe="@import",TSe="@namespace",RSe="@keyframes",wSe="@layer",wY=Math.abs,f2=String.fromCharCode;function IY(e){return e.trim()}function Jy(e,r,o){return e.replace(r,o)}function ISe(e,r,o){return e.indexOf(r,o)}function nm(e,r){return e.charCodeAt(r)|0}function pm(e,r,o){return e.slice(r,o)}function Rl(e){return e.length}function ASe(e){return e.length}function gy(e,r){return r.push(e),e}var Kb=1,mm=1,AY=0,uc=0,lo=0,xm="";function p2(e,r,o,s,c,d,f,v){return{value:e,root:r,parent:o,type:s,props:c,children:d,line:Kb,column:mm,length:f,return:"",siblings:v}}function OSe(){return lo}function xSe(){return lo=uc>0?nm(xm,--uc):0,mm--,lo===10&&(mm=1,Kb--),lo}function jc(){return lo=uc<AY?nm(xm,uc++):0,mm++,lo===10&&(mm=1,Kb++),lo}function md(){return nm(xm,uc)}function Qy(){return uc}function qb(e,r){return pm(xm,e,r)}function Rv(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function NSe(e){return Kb=mm=1,AY=Rl(xm=e),uc=0,[]}function PSe(e){return xm="",e}function pO(e){return IY(qb(uc-1,XN(e===91?e+2:e===40?e+1:e)))}function DSe(e){for(;(lo=md())&&lo<33;)jc();return Rv(e)>2||Rv(lo)>3?"":" "}function LSe(e,r){for(;--r&&jc()&&!(lo<48||lo>102||lo>57&&lo<65||lo>70&&lo<97););return qb(e,Qy()+(r<6&&md()==32&&jc()==32))}function XN(e){for(;jc();)switch(lo){case e:return uc;case 34:case 39:e!==34&&e!==39&&XN(lo);break;case 40:e===41&&XN(e);break;case 92:jc();break}return uc}function kSe(e,r){for(;jc()&&e+lo!==47+10;)if(e+lo===42+42&&md()===47)break;return"/*"+qb(r,uc-1)+"*"+f2(e===47?e:jc())}function MSe(e){for(;!Rv(md());)jc();return qb(e,uc)}function FSe(e){return PSe(Zy("",null,null,null,[""],e=NSe(e),0,[0],e))}function Zy(e,r,o,s,c,d,f,v,g){for(var _=0,C=0,b=f,T=0,I=0,w=0,x=1,N=1,P=1,O=0,L="",M=c,F=d,V=s,j=L;N;)switch(w=O,O=jc()){case 40:if(w!=108&&nm(j,b-1)==58){ISe(j+=Jy(pO(O),"&","&\f"),"&\f",wY(_?v[_-1]:0))!=-1&&(P=-1);break}case 34:case 39:case 91:j+=pO(O);break;case 9:case 10:case 13:case 32:j+=DSe(w);break;case 92:j+=LSe(Qy()-1,7);continue;case 47:switch(md()){case 42:case 47:gy(USe(kSe(jc(),Qy()),r,o,g),g),(Rv(w||1)==5||Rv(md()||1)==5)&&Rl(j)&&pm(j,-1,void 0)!==" "&&(j+=" ");break;default:j+="/"}break;case 123*x:v[_++]=Rl(j)*P;case 125*x:case 59:case 0:switch(O){case 0:case 125:N=0;case 59+C:P==-1&&(j=Jy(j,/\f/g,"")),I>0&&(Rl(j)-b||x===0&&w===47)&&gy(I>32?M7(j+";",s,o,b-1,g):M7(Jy(j," ","")+";",s,o,b-2,g),g);break;case 59:j+=";";default:if(gy(V=k7(j,r,o,_,C,c,v,L,M=[],F=[],b,d),d),O===123)if(C===0)Zy(j,r,V,V,M,d,b,v,F);else{switch(T){case 99:if(nm(j,3)===110)break;case 108:if(nm(j,2)===97)break;default:C=0;case 100:case 109:case 115:}C?Zy(e,V,V,s&&gy(k7(e,V,V,0,0,c,v,L,c,M=[],b,F),F),c,F,b,v,s?M:F):Zy(j,V,V,V,[""],F,0,v,F)}}_=C=I=0,x=P=1,L=j="",b=f;break;case 58:b=1+Rl(j),I=w;default:if(x<1){if(O==123)--x;else if(O==125&&x++==0&&xSe()==125)continue}switch(j+=f2(O),O*x){case 38:P=C>0?1:(j+="\f",-1);break;case 44:v[_++]=(Rl(j)-1)*P,P=1;break;case 64:md()===45&&(j+=pO(jc())),T=md(),C=b=Rl(L=j+=MSe(Qy())),O++;break;case 45:w===45&&Rl(j)==2&&(x=0)}}return d}function k7(e,r,o,s,c,d,f,v,g,_,C,b){for(var T=c-1,I=c===0?d:[""],w=ASe(I),x=0,N=0,P=0;x<s;++x)for(var O=0,L=pm(e,T+1,T=wY(N=f[x])),M=e;O<w;++O)(M=IY(N>0?I[O]+" "+L:Jy(L,/&\f/g,I[O])))&&(g[P++]=M);return p2(e,r,o,c===0?TY:v,g,_,C,b)}function USe(e,r,o,s){return p2(e,r,o,bY,f2(OSe()),pm(e,2,-2),0,s)}function M7(e,r,o,s,c){return p2(e,r,o,RY,pm(e,0,s),pm(e,s+1,-1),s,c)}function JN(e,r){for(var o="",s=0;s<e.length;s++)o+=r(e[s],s,e,r)||"";return o}function BSe(e,r,o,s){switch(e.type){case wSe:if(e.children.length)break;case bSe:case TSe:case RY:return e.return=e.return||e.value;case bY:return"";case RSe:return e.return=e.value+"{"+JN(e.children,s)+"}";case TY:if(!Rl(e.value=e.props.join(",")))return""}return Rl(o=JN(e.children,s))?e.return=e.value+"{"+o+"}":""}var F7="data-ant-cssinjs-cache-path",OY="_FILE_STYLE__",Mh,xY=!0;function VSe(){if(!Mh&&(Mh={},Oa())){var e=document.createElement("div");e.className=F7,e.style.position="fixed",e.style.visibility="hidden",e.style.top="-9999px",document.body.appendChild(e);var r=getComputedStyle(e).content||"";r=r.replace(/^"/,"").replace(/"$/,""),r.split(";").forEach(function(c){var d=c.split(":"),f=Ue(d,2),v=f[0],g=f[1];Mh[v]=g});var o=document.querySelector("style[".concat(F7,"]"));if(o){var s;xY=!1,(s=o.parentNode)===null||s===void 0||s.removeChild(o)}document.body.removeChild(e)}}function jSe(e){return VSe(),!!Mh[e]}function $Se(e){var r=Mh[e],o=null;if(r&&Oa())if(xY)o=OY;else{var s=document.querySelector("style[".concat(Vc,'="').concat(Mh[e],'"]'));s?o=s.innerHTML:delete Mh[e]}return[o,r]}var HSe="_skip_check_",NY="_multi_value_";function eC(e){var r=JN(FSe(e),BSe);return r.replace(/\{%%%\:[^;];}/g,";")}function zSe(e){return on(e)==="object"&&e&&(HSe in e||NY in e)}function U7(e,r,o){if(!r)return e;var s=".".concat(r),c=o==="low"?":where(".concat(s,")"):s,d=e.split(",").map(function(f){var v,g=f.trim().split(/\s+/),_=g[0]||"",C=((v=_.match(/^\w+/))===null||v===void 0?void 0:v[0])||"";return _="".concat(C).concat(c).concat(_.slice(C.length)),[_].concat(vt(g.slice(1))).join(" ")});return d.join(",")}var WSe=function e(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},c=s.root,d=s.injectHash,f=s.parentSelectors,v=o.hashId,g=o.layer;o.path;var _=o.hashPriority,C=o.transformers,b=C===void 0?[]:C;o.linters;var T="",I={};function w(P){var O=P.getName(v);if(!I[O]){var L=e(P.style,o,{root:!1,parentSelectors:f}),M=Ue(L,1),F=M[0];I[O]="@keyframes ".concat(P.getName(v)).concat(F)}}function x(P){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return P.forEach(function(L){Array.isArray(L)?x(L,O):L&&O.push(L)}),O}var N=x(Array.isArray(r)?r:[r]);return N.forEach(function(P){var O=typeof P=="string"&&!c?{}:P;if(typeof O=="string")T+="".concat(O,`
`);else if(O._keyframe)w(O);else{var L=b.reduce(function(M,F){var V;return(F==null||(V=F.visit)===null||V===void 0?void 0:V.call(F,M))||M},O);Object.keys(L).forEach(function(M){var F=L[M];if(on(F)==="object"&&F&&(M!=="animationName"||!F._keyframe)&&!zSe(F)){var V=!1,j=M.trim(),z=!1;(c||d)&&v?j.startsWith("@")?V=!0:j==="&"?j=U7("",v,_):j=U7(M,v,_):c&&!v&&(j==="&"||j==="")&&(j="",z=!0);var q=e(F,o,{root:z,injectHash:V,parentSelectors:[].concat(vt(f),[j])}),W=Ue(q,2),J=W[0],te=W[1];I=_e(_e({},I),te),T+="".concat(j).concat(J)}else{let ne=function(ae,re){var he=ae.replace(/[A-Z]/g,function(se){return"-".concat(se.toLowerCase())}),fe=re;!CSe[ae]&&typeof fe=="number"&&fe!==0&&(fe="".concat(fe,"px")),ae==="animationName"&&re!==null&&re!==void 0&&re._keyframe&&(w(re),fe=re.getName(v)),T+="".concat(he,":").concat(fe,";")};var pe=ne,ee,oe=(ee=F==null?void 0:F.value)!==null&&ee!==void 0?ee:F;on(F)==="object"&&F!==null&&F!==void 0&&F[NY]&&Array.isArray(oe)?oe.forEach(function(ae){ne(M,ae)}):ne(M,oe)}})}}),c?g&&(T&&(T="@layer ".concat(g.name," {").concat(T,"}")),g.dependencies&&(I["@layer ".concat(g.name)]=g.dependencies.map(function(P){return"@layer ".concat(P,", ").concat(g.name,";")}).join(`
`))):T="{".concat(T,"}"),[T,I]};function PY(e,r){return Cv("".concat(e.join("%")).concat(r))}function GSe(){return null}var DY="style";function QN(e,r){var o=e.token,s=e.path,c=e.hashId,d=e.layer,f=e.nonce,v=e.clientOnly,g=e.order,_=g===void 0?0:g,C=S.useContext(Gv),b=C.autoClear;C.mock;var T=C.defaultCache,I=C.hashPriority,w=C.container,x=C.ssrInline,N=C.transformers,P=C.linters,O=C.cache,L=C.layer,M=o._tokenKey,F=[M];L&&F.push("layer"),F.push.apply(F,vt(s));var V=YN,j=h2(DY,F,function(){var te=F.join("|");if(jSe(te)){var ee=$Se(te),oe=Ue(ee,2),pe=oe[0],ne=oe[1];if(pe)return[pe,M,ne,{},v,_]}var ae=r(),re=WSe(ae,{hashId:c,hashPriority:I,layer:L?d:void 0,path:s.join("-"),transformers:N,linters:P}),he=Ue(re,2),fe=he[0],se=he[1],de=eC(fe),ve=PY(F,de);return[de,M,ve,se,v,_]},function(te,ee){var oe=Ue(te,3),pe=oe[2];(ee||b)&&YN&&bv(pe,{mark:Vc})},function(te){var ee=Ue(te,4),oe=ee[0];ee[1];var pe=ee[2],ne=ee[3];if(V&&oe!==OY){var ae={mark:Vc,prepend:L?!1:"queue",attachTo:w,priority:_},re=typeof f=="function"?f():f;re&&(ae.csp={nonce:re});var he=[],fe=[];Object.keys(ne).forEach(function(de){de.startsWith("@layer")?he.push(de):fe.push(de)}),he.forEach(function(de){cu(eC(ne[de]),"_layer-".concat(de),_e(_e({},ae),{},{prepend:!0}))});var se=cu(oe,pe,ae);se[pd]=O.instanceId,se.setAttribute(fm,M),fe.forEach(function(de){cu(eC(ne[de]),"_effect-".concat(de),ae)})}}),z=Ue(j,3),q=z[0],W=z[1],J=z[2];return function(te){var ee;if(!x||V||!T)ee=S.createElement(GSe,null);else{var oe;ee=S.createElement("style",Qe({},(oe={},Ce(oe,fm,W),Ce(oe,Vc,J),oe),{dangerouslySetInnerHTML:{__html:q}}))}return S.createElement(S.Fragment,null,ee,te)}}var KSe=function(r,o,s){var c=Ue(r,6),d=c[0],f=c[1],v=c[2],g=c[3],_=c[4],C=c[5],b=s||{},T=b.plain;if(_)return null;var I=d,w={"data-rc-order":"prependQueue","data-rc-priority":"".concat(C)};return I=UC(d,f,v,w,T),g&&Object.keys(g).forEach(function(x){if(!o[x]){o[x]=!0;var N=eC(g[x]),P=UC(N,f,"_effect-".concat(x),w,T);x.startsWith("@layer")?I=P+I:I+=P}}),[C,v,I]},LY="cssVar",qSe=function(r,o){var s=r.key,c=r.prefix,d=r.unitless,f=r.ignore,v=r.token,g=r.scope,_=g===void 0?"":g,C=S.useContext(Gv),b=C.cache.instanceId,T=C.container,I=v._tokenKey,w=[].concat(vt(r.path),[s,_,I]),x=h2(LY,w,function(){var N=o(),P=yY(N,s,{prefix:c,unitless:d,ignore:f,scope:_}),O=Ue(P,2),L=O[0],M=O[1],F=PY(w,M);return[L,M,F,s]},function(N){var P=Ue(N,3),O=P[2];YN&&bv(O,{mark:Vc})},function(N){var P=Ue(N,3),O=P[1],L=P[2];if(O){var M=cu(O,L,{mark:Vc,prepend:"queue",attachTo:T,priority:-999});M[pd]=b,M.setAttribute(fm,s)}});return x},YSe=function(r,o,s){var c=Ue(r,4),d=c[1],f=c[2],v=c[3],g=s||{},_=g.plain;if(!d)return null;var C=-999,b={"data-rc-order":"prependQueue","data-rc-priority":"".concat(C)},T=UC(d,v,f,b,_);return[C,f,T]},_g;_g={},Ce(_g,DY,KSe),Ce(_g,CY,ySe),Ce(_g,LY,YSe);var mr=function(){function e(r,o){io(this,e),Ce(this,"name",void 0),Ce(this,"style",void 0),Ce(this,"_keyframe",!0),this.name=r,this.style=o}return oo(e,[{key:"getName",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return o?"".concat(o,"-").concat(this.name):this.name}}]),e}();function wp(e){return e.notSplit=!0,e}wp(["borderTop","borderBottom"]),wp(["borderTop"]),wp(["borderBottom"]),wp(["borderLeft","borderRight"]),wp(["borderLeft"]),wp(["borderRight"]);var XSe=S.createContext({});const m2=XSe;function kY(e){return mY(e)||dY(e)||c2(e)||gY()}function oc(e,r){for(var o=e,s=0;s<r.length;s+=1){if(o==null)return;o=o[r[s]]}return o}function MY(e,r,o,s){if(!r.length)return o;var c=kY(r),d=c[0],f=c.slice(1),v;return!e&&typeof d=="number"?v=[]:Array.isArray(e)?v=vt(e):v=_e({},e),s&&o===void 0&&f.length===1?delete v[d][f[0]]:v[d]=MY(v[d],f,o,s),v}function tc(e,r,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return r.length&&s&&o===void 0&&!oc(e,r.slice(0,-1))?e:MY(e,r,o,s)}function JSe(e){return on(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function B7(e){return Array.isArray(e)?[]:{}}var QSe=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function Kp(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var s=B7(r[0]);return r.forEach(function(c){function d(f,v){var g=new Set(v),_=oc(c,f),C=Array.isArray(_);if(C||JSe(_)){if(!g.has(_)){g.add(_);var b=oc(s,f);C?s=tc(s,f,[]):(!b||on(b)!=="object")&&(s=tc(s,f,B7(_))),QSe(_).forEach(function(T){d([].concat(vt(f),[T]),g)})}}else s=tc(s,f,_)}d([])}),s}function ZSe(){}const eye=S.createContext({}),Yb=()=>{const e=()=>{};return e.deprecated=ZSe,e},FY=S.createContext(void 0);var UY={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},tye={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},nye=_e(_e({},tye),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",week:"Week",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const rye={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},BY=rye,iye={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},nye),timePickerLocale:Object.assign({},BY)},V7=iye,gs="${label} is not a valid ${type}",oye={locale:"en",Pagination:UY,DatePicker:V7,TimePicker:BY,Calendar:V7,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckAll:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:gs,method:gs,array:gs,object:gs,number:gs,date:gs,boolean:gs,integer:gs,float:gs,regexp:gs,email:gs,url:gs,hex:gs},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}},Hh=oye;Object.assign({},Hh.Modal);let tC=[];const j7=()=>tC.reduce((e,r)=>Object.assign(Object.assign({},e),r),Hh.Modal);function aye(e){if(e){const r=Object.assign({},e);return tC.push(r),j7(),()=>{tC=tC.filter(o=>o!==r),j7()}}Object.assign({},Hh.Modal)}const sye=S.createContext(void 0),g2=sye,cye=(e,r)=>{const o=S.useContext(g2),s=S.useMemo(()=>{var d;const f=r||Hh[e],v=(d=o==null?void 0:o[e])!==null&&d!==void 0?d:{};return Object.assign(Object.assign({},typeof f=="function"?f():f),v||{})},[e,r,o]),c=S.useMemo(()=>{const d=o==null?void 0:o.locale;return o!=null&&o.exist&&!d?Hh.locale:d},[o]);return[s,c]},Nm=cye,lye="internalMark",uye=e=>{const{locale:r={},children:o,_ANT_MARK__:s}=e;S.useEffect(()=>aye(r==null?void 0:r.Modal),[r]);const c=S.useMemo(()=>Object.assign(Object.assign({},r),{exist:!0}),[r]);return S.createElement(g2.Provider,{value:c},o)},dye=uye,VY={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},hye=Object.assign(Object.assign({},VY),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),wv=hye,Lo=Math.round;function mO(e,r){const o=e.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],s=o.map(c=>parseFloat(c));for(let c=0;c<3;c+=1)s[c]=r(s[c]||0,o[c]||"",c);return o[3]?s[3]=o[3].includes("%")?s[3]/100:s[3]:s[3]=1,s}const $7=(e,r,o)=>o===0?e:e/100;function Sg(e,r){const o=r||255;return e>o?o:e<0?0:e}class qr{constructor(r){Ce(this,"isValid",!0),Ce(this,"r",0),Ce(this,"g",0),Ce(this,"b",0),Ce(this,"a",1),Ce(this,"_h",void 0),Ce(this,"_s",void 0),Ce(this,"_l",void 0),Ce(this,"_v",void 0),Ce(this,"_max",void 0),Ce(this,"_min",void 0),Ce(this,"_brightness",void 0);function o(c){return c[0]in r&&c[1]in r&&c[2]in r}if(r)if(typeof r=="string"){let d=function(f){return c.startsWith(f)};var s=d;const c=r.trim();/^#?[A-F\d]{3,8}$/i.test(c)?this.fromHexString(c):d("rgb")?this.fromRgbString(c):d("hsl")?this.fromHslString(c):(d("hsv")||d("hsb"))&&this.fromHsvString(c)}else if(r instanceof qr)this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this._h=r._h,this._s=r._s,this._l=r._l,this._v=r._v;else if(o("rgb"))this.r=Sg(r.r),this.g=Sg(r.g),this.b=Sg(r.b),this.a=typeof r.a=="number"?Sg(r.a,1):1;else if(o("hsl"))this.fromHsl(r);else if(o("hsv"))this.fromHsv(r);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(r))}setR(r){return this._sc("r",r)}setG(r){return this._sc("g",r)}setB(r){return this._sc("b",r)}setA(r){return this._sc("a",r,1)}setHue(r){const o=this.toHsv();return o.h=r,this._c(o)}getLuminance(){function r(d){const f=d/255;return f<=.03928?f/12.92:Math.pow((f+.055)/1.055,2.4)}const o=r(this.r),s=r(this.g),c=r(this.b);return .2126*o+.7152*s+.0722*c}getHue(){if(typeof this._h>"u"){const r=this.getMax()-this.getMin();r===0?this._h=0:this._h=Lo(60*(this.r===this.getMax()?(this.g-this.b)/r+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/r+2:(this.r-this.g)/r+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const r=this.getMax()-this.getMin();r===0?this._s=0:this._s=r/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(r=10){const o=this.getHue(),s=this.getSaturation();let c=this.getLightness()-r/100;return c<0&&(c=0),this._c({h:o,s,l:c,a:this.a})}lighten(r=10){const o=this.getHue(),s=this.getSaturation();let c=this.getLightness()+r/100;return c>1&&(c=1),this._c({h:o,s,l:c,a:this.a})}mix(r,o=50){const s=this._c(r),c=o/100,d=v=>(s[v]-this[v])*c+this[v],f={r:Lo(d("r")),g:Lo(d("g")),b:Lo(d("b")),a:Lo(d("a")*100)/100};return this._c(f)}tint(r=10){return this.mix({r:255,g:255,b:255,a:1},r)}shade(r=10){return this.mix({r:0,g:0,b:0,a:1},r)}onBackground(r){const o=this._c(r),s=this.a+o.a*(1-this.a),c=d=>Lo((this[d]*this.a+o[d]*o.a*(1-this.a))/s);return this._c({r:c("r"),g:c("g"),b:c("b"),a:s})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(r){return this.r===r.r&&this.g===r.g&&this.b===r.b&&this.a===r.a}clone(){return this._c(this)}toHexString(){let r="#";const o=(this.r||0).toString(16);r+=o.length===2?o:"0"+o;const s=(this.g||0).toString(16);r+=s.length===2?s:"0"+s;const c=(this.b||0).toString(16);if(r+=c.length===2?c:"0"+c,typeof this.a=="number"&&this.a>=0&&this.a<1){const d=Lo(this.a*255).toString(16);r+=d.length===2?d:"0"+d}return r}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const r=this.getHue(),o=Lo(this.getSaturation()*100),s=Lo(this.getLightness()*100);return this.a!==1?`hsla(${r},${o}%,${s}%,${this.a})`:`hsl(${r},${o}%,${s}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(r,o,s){const c=this.clone();return c[r]=Sg(o,s),c}_c(r){return new this.constructor(r)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(r){const o=r.replace("#","");function s(c,d){return parseInt(o[c]+o[d||c],16)}o.length<6?(this.r=s(0),this.g=s(1),this.b=s(2),this.a=o[3]?s(3)/255:1):(this.r=s(0,1),this.g=s(2,3),this.b=s(4,5),this.a=o[6]?s(6,7)/255:1)}fromHsl({h:r,s:o,l:s,a:c}){if(this._h=r%360,this._s=o,this._l=s,this.a=typeof c=="number"?c:1,o<=0){const T=Lo(s*255);this.r=T,this.g=T,this.b=T}let d=0,f=0,v=0;const g=r/60,_=(1-Math.abs(2*s-1))*o,C=_*(1-Math.abs(g%2-1));g>=0&&g<1?(d=_,f=C):g>=1&&g<2?(d=C,f=_):g>=2&&g<3?(f=_,v=C):g>=3&&g<4?(f=C,v=_):g>=4&&g<5?(d=C,v=_):g>=5&&g<6&&(d=_,v=C);const b=s-_/2;this.r=Lo((d+b)*255),this.g=Lo((f+b)*255),this.b=Lo((v+b)*255)}fromHsv({h:r,s:o,v:s,a:c}){this._h=r%360,this._s=o,this._v=s,this.a=typeof c=="number"?c:1;const d=Lo(s*255);if(this.r=d,this.g=d,this.b=d,o<=0)return;const f=r/60,v=Math.floor(f),g=f-v,_=Lo(s*(1-o)*255),C=Lo(s*(1-o*g)*255),b=Lo(s*(1-o*(1-g))*255);switch(v){case 0:this.g=b,this.b=_;break;case 1:this.r=C,this.b=_;break;case 2:this.r=_,this.b=b;break;case 3:this.r=_,this.g=C;break;case 4:this.r=b,this.g=_;break;case 5:default:this.g=_,this.b=C;break}}fromHsvString(r){const o=mO(r,$7);this.fromHsv({h:o[0],s:o[1],v:o[2],a:o[3]})}fromHslString(r){const o=mO(r,$7);this.fromHsl({h:o[0],s:o[1],l:o[2],a:o[3]})}fromRgbString(r){const o=mO(r,(s,c)=>c.includes("%")?Lo(s/100*255):s);this.r=o[0],this.g=o[1],this.b=o[2],this.a=o[3]}}var vy=2,H7=.16,fye=.05,pye=.05,mye=.15,jY=5,$Y=4,gye=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function z7(e,r,o){var s;return Math.round(e.h)>=60&&Math.round(e.h)<=240?s=o?Math.round(e.h)-vy*r:Math.round(e.h)+vy*r:s=o?Math.round(e.h)+vy*r:Math.round(e.h)-vy*r,s<0?s+=360:s>=360&&(s-=360),s}function W7(e,r,o){if(e.h===0&&e.s===0)return e.s;var s;return o?s=e.s-H7*r:r===$Y?s=e.s+H7:s=e.s+fye*r,s>1&&(s=1),o&&r===jY&&s>.1&&(s=.1),s<.06&&(s=.06),Math.round(s*100)/100}function G7(e,r,o){var s;return o?s=e.v+pye*r:s=e.v-mye*r,s=Math.max(0,Math.min(1,s)),Math.round(s*100)/100}function Iv(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[],s=new qr(e),c=s.toHsv(),d=jY;d>0;d-=1){var f=new qr({h:z7(c,d,!0),s:W7(c,d,!0),v:G7(c,d,!0)});o.push(f)}o.push(s);for(var v=1;v<=$Y;v+=1){var g=new qr({h:z7(c,v),s:W7(c,v),v:G7(c,v)});o.push(g)}return r.theme==="dark"?gye.map(function(_){var C=_.index,b=_.amount;return new qr(r.backgroundColor||"#141414").mix(o[C],b).toHexString()}):o.map(function(_){return _.toHexString()})}var gO={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},ZN=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];ZN.primary=ZN[5];var eP=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];eP.primary=eP[5];var tP=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];tP.primary=tP[5];var BC=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];BC.primary=BC[5];var nP=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];nP.primary=nP[5];var rP=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];rP.primary=rP[5];var iP=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];iP.primary=iP[5];var oP=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];oP.primary=oP[5];var VC=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];VC.primary=VC[5];var aP=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];aP.primary=aP[5];var sP=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];sP.primary=sP[5];var cP=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];cP.primary=cP[5];var lP=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];lP.primary=lP[5];var vO={red:ZN,volcano:eP,orange:tP,gold:BC,yellow:nP,lime:rP,green:iP,cyan:oP,blue:VC,geekblue:aP,purple:sP,magenta:cP,grey:lP};function vye(e,r){let{generateColorPalettes:o,generateNeutralColorPalettes:s}=r;const{colorSuccess:c,colorWarning:d,colorError:f,colorInfo:v,colorPrimary:g,colorBgBase:_,colorTextBase:C}=e,b=o(g),T=o(c),I=o(d),w=o(f),x=o(v),N=s(_,C),P=e.colorLink||e.colorInfo,O=o(P),L=new qr(w[1]).mix(new qr(w[3]),50).toHexString();return Object.assign(Object.assign({},N),{colorPrimaryBg:b[1],colorPrimaryBgHover:b[2],colorPrimaryBorder:b[3],colorPrimaryBorderHover:b[4],colorPrimaryHover:b[5],colorPrimary:b[6],colorPrimaryActive:b[7],colorPrimaryTextHover:b[8],colorPrimaryText:b[9],colorPrimaryTextActive:b[10],colorSuccessBg:T[1],colorSuccessBgHover:T[2],colorSuccessBorder:T[3],colorSuccessBorderHover:T[4],colorSuccessHover:T[4],colorSuccess:T[6],colorSuccessActive:T[7],colorSuccessTextHover:T[8],colorSuccessText:T[9],colorSuccessTextActive:T[10],colorErrorBg:w[1],colorErrorBgHover:w[2],colorErrorBgFilledHover:L,colorErrorBgActive:w[3],colorErrorBorder:w[3],colorErrorBorderHover:w[4],colorErrorHover:w[5],colorError:w[6],colorErrorActive:w[7],colorErrorTextHover:w[8],colorErrorText:w[9],colorErrorTextActive:w[10],colorWarningBg:I[1],colorWarningBgHover:I[2],colorWarningBorder:I[3],colorWarningBorderHover:I[4],colorWarningHover:I[4],colorWarning:I[6],colorWarningActive:I[7],colorWarningTextHover:I[8],colorWarningText:I[9],colorWarningTextActive:I[10],colorInfoBg:x[1],colorInfoBgHover:x[2],colorInfoBorder:x[3],colorInfoBorderHover:x[4],colorInfoHover:x[4],colorInfo:x[6],colorInfoActive:x[7],colorInfoTextHover:x[8],colorInfoText:x[9],colorInfoTextActive:x[10],colorLinkHover:O[4],colorLink:O[6],colorLinkActive:O[7],colorBgMask:new qr("#000").setA(.45).toRgbString(),colorWhite:"#fff"})}const Eye=e=>{let r=e,o=e,s=e,c=e;return e<6&&e>=5?r=e+1:e<16&&e>=6?r=e+2:e>=16&&(r=16),e<7&&e>=5?o=4:e<8&&e>=7?o=5:e<14&&e>=8?o=6:e<16&&e>=14?o=7:e>=16&&(o=8),e<6&&e>=2?s=1:e>=6&&(s=2),e>4&&e<8?c=4:e>=8&&(c=6),{borderRadius:e,borderRadiusXS:s,borderRadiusSM:o,borderRadiusLG:r,borderRadiusOuter:c}},_ye=Eye;function Sye(e){const{motionUnit:r,motionBase:o,borderRadius:s,lineWidth:c}=e;return Object.assign({motionDurationFast:`${(o+r).toFixed(1)}s`,motionDurationMid:`${(o+r*2).toFixed(1)}s`,motionDurationSlow:`${(o+r*3).toFixed(1)}s`,lineWidthBold:c+1},_ye(s))}const yye=e=>{const{controlHeight:r}=e;return{controlHeightSM:r*.75,controlHeightXS:r*.5,controlHeightLG:r*1.25}},Cye=yye;function nC(e){return(e+8)/e}function bye(e){const r=Array.from({length:10}).map((o,s)=>{const c=s-1,d=e*Math.pow(Math.E,c/5),f=s>1?Math.floor(d):Math.ceil(d);return Math.floor(f/2)*2});return r[1]=e,r.map(o=>({size:o,lineHeight:nC(o)}))}const Tye=e=>{const r=bye(e),o=r.map(C=>C.size),s=r.map(C=>C.lineHeight),c=o[1],d=o[0],f=o[2],v=s[1],g=s[0],_=s[2];return{fontSizeSM:d,fontSize:c,fontSizeLG:f,fontSizeXL:o[3],fontSizeHeading1:o[6],fontSizeHeading2:o[5],fontSizeHeading3:o[4],fontSizeHeading4:o[3],fontSizeHeading5:o[2],lineHeight:v,lineHeightLG:_,lineHeightSM:g,fontHeight:Math.round(v*c),fontHeightLG:Math.round(_*f),fontHeightSM:Math.round(g*d),lineHeightHeading1:s[6],lineHeightHeading2:s[5],lineHeightHeading3:s[4],lineHeightHeading4:s[3],lineHeightHeading5:s[2]}},Rye=Tye;function wye(e){const{sizeUnit:r,sizeStep:o}=e;return{sizeXXL:r*(o+8),sizeXL:r*(o+4),sizeLG:r*(o+2),sizeMD:r*(o+1),sizeMS:r*o,size:r*o,sizeSM:r*(o-1),sizeXS:r*(o-2),sizeXXS:r*(o-3)}}const Qs=(e,r)=>new qr(e).setA(r).toRgbString(),yg=(e,r)=>new qr(e).darken(r).toHexString(),Iye=e=>{const r=Iv(e);return{1:r[0],2:r[1],3:r[2],4:r[3],5:r[4],6:r[5],7:r[6],8:r[4],9:r[5],10:r[6]}},Aye=(e,r)=>{const o=e||"#fff",s=r||"#000";return{colorBgBase:o,colorTextBase:s,colorText:Qs(s,.88),colorTextSecondary:Qs(s,.65),colorTextTertiary:Qs(s,.45),colorTextQuaternary:Qs(s,.25),colorFill:Qs(s,.15),colorFillSecondary:Qs(s,.06),colorFillTertiary:Qs(s,.04),colorFillQuaternary:Qs(s,.02),colorBgSolid:Qs(s,1),colorBgSolidHover:Qs(s,.75),colorBgSolidActive:Qs(s,.95),colorBgLayout:yg(o,4),colorBgContainer:yg(o,0),colorBgElevated:yg(o,0),colorBgSpotlight:Qs(s,.85),colorBgBlur:"transparent",colorBorder:yg(o,15),colorBorderSecondary:yg(o,6)}};function Oye(e){gO.pink=gO.magenta,vO.pink=vO.magenta;const r=Object.keys(VY).map(o=>{const s=e[o]===gO[o]?vO[o]:Iv(e[o]);return Array.from({length:10},()=>1).reduce((c,d,f)=>(c[`${o}-${f+1}`]=s[f],c[`${o}${f+1}`]=s[f],c),{})}).reduce((o,s)=>(o=Object.assign(Object.assign({},o),s),o),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),r),vye(e,{generateColorPalettes:Iye,generateNeutralColorPalettes:Aye})),Rye(e.fontSize)),wye(e)),Cye(e)),Sye(e))}const xye=qN(Oye),HY=xye,uP={token:wv,override:{override:wv},hashed:!0},zY=Ve.createContext(uP),Av="ant",Xb="anticon",Nye=["outlined","borderless","filled","underlined"],Pye=(e,r)=>r||(e?`${Av}-${e}`:Av),br=S.createContext({getPrefixCls:Pye,iconPrefixCls:Xb}),K7={};function fc(e){const r=S.useContext(br),{getPrefixCls:o,direction:s,getPopupContainer:c}=r,d=r[e];return Object.assign(Object.assign({classNames:K7,styles:K7},d),{getPrefixCls:o,direction:s,getPopupContainer:c})}const Dye=`-ant-${Date.now()}-${Math.random()}`;function Lye(e,r){const o={},s=(f,v)=>{let g=f.clone();return g=(v==null?void 0:v(g))||g,g.toRgbString()},c=(f,v)=>{const g=new qr(f),_=Iv(g.toRgbString());o[`${v}-color`]=s(g),o[`${v}-color-disabled`]=_[1],o[`${v}-color-hover`]=_[4],o[`${v}-color-active`]=_[6],o[`${v}-color-outline`]=g.clone().setA(.2).toRgbString(),o[`${v}-color-deprecated-bg`]=_[0],o[`${v}-color-deprecated-border`]=_[2]};if(r.primaryColor){c(r.primaryColor,"primary");const f=new qr(r.primaryColor),v=Iv(f.toRgbString());v.forEach((_,C)=>{o[`primary-${C+1}`]=_}),o["primary-color-deprecated-l-35"]=s(f,_=>_.lighten(35)),o["primary-color-deprecated-l-20"]=s(f,_=>_.lighten(20)),o["primary-color-deprecated-t-20"]=s(f,_=>_.tint(20)),o["primary-color-deprecated-t-50"]=s(f,_=>_.tint(50)),o["primary-color-deprecated-f-12"]=s(f,_=>_.setA(_.a*.12));const g=new qr(v[0]);o["primary-color-active-deprecated-f-30"]=s(g,_=>_.setA(_.a*.3)),o["primary-color-active-deprecated-d-02"]=s(g,_=>_.darken(2))}return r.successColor&&c(r.successColor,"success"),r.warningColor&&c(r.warningColor,"warning"),r.errorColor&&c(r.errorColor,"error"),r.infoColor&&c(r.infoColor,"info"),`
  :root {
    ${Object.keys(o).map(f=>`--${e}-${f}: ${o[f]};`).join(`
`)}
  }
  `.trim()}function kye(e,r){const o=Lye(e,r);Oa()&&cu(o,`${Dye}-dynamic-theme`)}const dP=S.createContext(!1),WY=e=>{let{children:r,disabled:o}=e;const s=S.useContext(dP);return S.createElement(dP.Provider,{value:o??s},r)},Zh=dP,hP=S.createContext(void 0),Mye=e=>{let{children:r,size:o}=e;const s=S.useContext(hP);return S.createElement(hP.Provider,{value:o||s},r)},Kv=hP;function Fye(){const e=S.useContext(Zh),r=S.useContext(Kv);return{componentDisabled:e,componentSize:r}}var GY=oo(function e(){io(this,e)}),KY="CALC_UNIT",Uye=new RegExp(KY,"g");function EO(e){return typeof e=="number"?"".concat(e).concat(KY):e}var Bye=function(e){Ml(o,e);var r=Fl(o);function o(s,c){var d;io(this,o),d=r.call(this),Ce(tr(d),"result",""),Ce(tr(d),"unitlessCssVar",void 0),Ce(tr(d),"lowPriority",void 0);var f=on(s);return d.unitlessCssVar=c,s instanceof o?d.result="(".concat(s.result,")"):f==="number"?d.result=EO(s):f==="string"&&(d.result=s),d}return oo(o,[{key:"add",value:function(c){return c instanceof o?this.result="".concat(this.result," + ").concat(c.getResult()):(typeof c=="number"||typeof c=="string")&&(this.result="".concat(this.result," + ").concat(EO(c))),this.lowPriority=!0,this}},{key:"sub",value:function(c){return c instanceof o?this.result="".concat(this.result," - ").concat(c.getResult()):(typeof c=="number"||typeof c=="string")&&(this.result="".concat(this.result," - ").concat(EO(c))),this.lowPriority=!0,this}},{key:"mul",value:function(c){return this.lowPriority&&(this.result="(".concat(this.result,")")),c instanceof o?this.result="".concat(this.result," * ").concat(c.getResult(!0)):(typeof c=="number"||typeof c=="string")&&(this.result="".concat(this.result," * ").concat(c)),this.lowPriority=!1,this}},{key:"div",value:function(c){return this.lowPriority&&(this.result="(".concat(this.result,")")),c instanceof o?this.result="".concat(this.result," / ").concat(c.getResult(!0)):(typeof c=="number"||typeof c=="string")&&(this.result="".concat(this.result," / ").concat(c)),this.lowPriority=!1,this}},{key:"getResult",value:function(c){return this.lowPriority||c?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(c){var d=this,f=c||{},v=f.unit,g=!0;return typeof v=="boolean"?g=v:Array.from(this.unitlessCssVar).some(function(_){return d.result.includes(_)})&&(g=!1),this.result=this.result.replace(Uye,g?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),o}(GY),Vye=function(e){Ml(o,e);var r=Fl(o);function o(s){var c;return io(this,o),c=r.call(this),Ce(tr(c),"result",0),s instanceof o?c.result=s.result:typeof s=="number"&&(c.result=s),c}return oo(o,[{key:"add",value:function(c){return c instanceof o?this.result+=c.result:typeof c=="number"&&(this.result+=c),this}},{key:"sub",value:function(c){return c instanceof o?this.result-=c.result:typeof c=="number"&&(this.result-=c),this}},{key:"mul",value:function(c){return c instanceof o?this.result*=c.result:typeof c=="number"&&(this.result*=c),this}},{key:"div",value:function(c){return c instanceof o?this.result/=c.result:typeof c=="number"&&(this.result/=c),this}},{key:"equal",value:function(){return this.result}}]),o}(GY),jye=function(r,o){var s=r==="css"?Bye:Vye;return function(c){return new s(c,o)}},q7=function(r,o){return"".concat([o,r.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function uo(e){var r=S.useRef();r.current=e;var o=S.useCallback(function(){for(var s,c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return(s=r.current)===null||s===void 0?void 0:s.call.apply(s,[r].concat(d))},[]);return o}function gm(e){var r=S.useRef(!1),o=S.useState(e),s=Ue(o,2),c=s[0],d=s[1];S.useEffect(function(){return r.current=!1,function(){r.current=!0}},[]);function f(v,g){g&&r.current||d(v)}return[c,f]}function _O(e){return e!==void 0}function Sa(e,r){var o=r||{},s=o.defaultValue,c=o.value,d=o.onChange,f=o.postState,v=gm(function(){return _O(c)?c:_O(s)?typeof s=="function"?s():s:typeof e=="function"?e():e}),g=Ue(v,2),_=g[0],C=g[1],b=c!==void 0?c:_,T=f?f(b):b,I=uo(d),w=gm([b]),x=Ue(w,2),N=x[0],P=x[1];D7(function(){var L=N[0];_!==L&&I(_,L)},[N]),D7(function(){_O(c)||C(c)},[c]);var O=uo(function(L,M){C(L,M),P([b],M)});return[T,O]}function Y7(e,r,o,s){var c=_e({},r[e]);if(s!=null&&s.deprecatedTokens){var d=s.deprecatedTokens;d.forEach(function(v){var g=Ue(v,2),_=g[0],C=g[1];if(c!=null&&c[_]||c!=null&&c[C]){var b;(b=c[C])!==null&&b!==void 0||(c[C]=c==null?void 0:c[_])}})}var f=_e(_e({},o),c);return Object.keys(f).forEach(function(v){f[v]===r[v]&&delete f[v]}),f}var qY=typeof CSSINJS_STATISTIC<"u",fP=!0;function ai(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];if(!qY)return Object.assign.apply(Object,[{}].concat(r));fP=!1;var s={};return r.forEach(function(c){if(on(c)==="object"){var d=Object.keys(c);d.forEach(function(f){Object.defineProperty(s,f,{configurable:!0,enumerable:!0,get:function(){return c[f]}})})}}),fP=!0,s}var X7={};function $ye(){}var Hye=function(r){var o,s=r,c=$ye;return qY&&typeof Proxy<"u"&&(o=new Set,s=new Proxy(r,{get:function(f,v){if(fP){var g;(g=o)===null||g===void 0||g.add(v)}return f[v]}}),c=function(f,v){var g;X7[f]={global:Array.from(o),component:_e(_e({},(g=X7[f])===null||g===void 0?void 0:g.component),v)}}),{token:s,keys:o,flush:c}};function J7(e,r,o){if(typeof o=="function"){var s;return o(ai(r,(s=r[e])!==null&&s!==void 0?s:{}))}return o??{}}function zye(e){return e==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return"max(".concat(s.map(function(d){return Ge(d)}).join(","),")")},min:function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return"min(".concat(s.map(function(d){return Ge(d)}).join(","),")")}}}var Wye=1e3*60*10,Gye=function(){function e(){io(this,e),Ce(this,"map",new Map),Ce(this,"objectIDMap",new WeakMap),Ce(this,"nextID",0),Ce(this,"lastAccessBeat",new Map),Ce(this,"accessBeat",0)}return oo(e,[{key:"set",value:function(o,s){this.clear();var c=this.getCompositeKey(o);this.map.set(c,s),this.lastAccessBeat.set(c,Date.now())}},{key:"get",value:function(o){var s=this.getCompositeKey(o),c=this.map.get(s);return this.lastAccessBeat.set(s,Date.now()),this.accessBeat+=1,c}},{key:"getCompositeKey",value:function(o){var s=this,c=o.map(function(d){return d&&on(d)==="object"?"obj_".concat(s.getObjectID(d)):"".concat(on(d),"_").concat(d)});return c.join("|")}},{key:"getObjectID",value:function(o){if(this.objectIDMap.has(o))return this.objectIDMap.get(o);var s=this.nextID;return this.objectIDMap.set(o,s),this.nextID+=1,s}},{key:"clear",value:function(){var o=this;if(this.accessBeat>1e4){var s=Date.now();this.lastAccessBeat.forEach(function(c,d){s-c>Wye&&(o.map.delete(d),o.lastAccessBeat.delete(d))}),this.accessBeat=0}}}]),e}(),Q7=new Gye;function Kye(e,r){return Ve.useMemo(function(){var o=Q7.get(r);if(o)return o;var s=e();return Q7.set(r,s),s},r)}var qye=function(){return{}};function Yye(e){var r=e.useCSP,o=r===void 0?qye:r,s=e.useToken,c=e.usePrefix,d=e.getResetStyles,f=e.getCommonStyle,v=e.getCompUnitless;function g(T,I,w,x){var N=Array.isArray(T)?T[0]:T;function P(z){return"".concat(String(N)).concat(z.slice(0,1).toUpperCase()).concat(z.slice(1))}var O=(x==null?void 0:x.unitless)||{},L=typeof v=="function"?v(T):{},M=_e(_e({},L),{},Ce({},P("zIndexPopup"),!0));Object.keys(O).forEach(function(z){M[P(z)]=O[z]});var F=_e(_e({},x),{},{unitless:M,prefixToken:P}),V=C(T,I,w,F),j=_(N,w,F);return function(z){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:z,W=V(z,q),J=Ue(W,2),te=J[1],ee=j(q),oe=Ue(ee,2),pe=oe[0],ne=oe[1];return[pe,te,ne]}}function _(T,I,w){var x=w.unitless,N=w.injectStyle,P=N===void 0?!0:N,O=w.prefixToken,L=w.ignore,M=function(j){var z=j.rootCls,q=j.cssVar,W=q===void 0?{}:q,J=s(),te=J.realToken;return qSe({path:[T],prefix:W.prefix,key:W.key,unitless:x,ignore:L,token:te,scope:z},function(){var ee=J7(T,te,I),oe=Y7(T,te,ee,{deprecatedTokens:w==null?void 0:w.deprecatedTokens});return Object.keys(ee).forEach(function(pe){oe[O(pe)]=oe[pe],delete oe[pe]}),oe}),null},F=function(j){var z=s(),q=z.cssVar;return[function(W){return P&&q?Ve.createElement(Ve.Fragment,null,Ve.createElement(M,{rootCls:j,cssVar:q,component:T}),W):W},q==null?void 0:q.key]};return F}function C(T,I,w){var x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},N=Array.isArray(T)?T:[T,T],P=Ue(N,1),O=P[0],L=N.join("-"),M=e.layer||{name:"antd"};return function(F){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:F,j=s(),z=j.theme,q=j.realToken,W=j.hashId,J=j.token,te=j.cssVar,ee=c(),oe=ee.rootPrefixCls,pe=ee.iconPrefixCls,ne=o(),ae=te?"css":"js",re=Kye(function(){var ie=new Set;return te&&Object.keys(x.unitless||{}).forEach(function(be){ie.add(Xy(be,te.prefix)),ie.add(Xy(be,q7(O,te.prefix)))}),jye(ae,ie)},[ae,O,te==null?void 0:te.prefix]),he=zye(ae),fe=he.max,se=he.min,de={theme:z,token:J,hashId:W,nonce:function(){return ne.nonce},clientOnly:x.clientOnly,layer:M,order:x.order||-999};typeof d=="function"&&QN(_e(_e({},de),{},{clientOnly:!1,path:["Shared",oe]}),function(){return d(J,{prefix:{rootPrefixCls:oe,iconPrefixCls:pe},csp:ne})});var ve=QN(_e(_e({},de),{},{path:[L,F,pe]}),function(){if(x.injectStyle===!1)return[];var ie=Hye(J),be=ie.token,Re=ie.flush,Pe=J7(O,q,w),Ie=".".concat(F),xe=Y7(O,q,Pe,{deprecatedTokens:x.deprecatedTokens});te&&Pe&&on(Pe)==="object"&&Object.keys(Pe).forEach(function(je){Pe[je]="var(".concat(Xy(je,q7(O,te.prefix)),")")});var We=ai(be,{componentCls:Ie,prefixCls:F,iconCls:".".concat(pe),antCls:".".concat(oe),calc:re,max:fe,min:se},te?Pe:xe),De=I(We,{hashId:W,prefixCls:F,rootPrefixCls:oe,iconPrefixCls:pe});Re(O,xe);var Ae=typeof f=="function"?f(We,F,V,x.resetFont):null;return[x.resetStyle===!1?null:Ae,De]});return[ve,W]}}function b(T,I,w){var x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},N=C(T,I,w,_e({resetStyle:!1,order:-998},x)),P=function(L){var M=L.prefixCls,F=L.rootCls,V=F===void 0?M:F;return N(M,V),null};return P}return{genStyleHooks:g,genSubStyleComponent:b,genComponentStyleHook:C}}const zh=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],Xye="5.24.3";function SO(e){return e>=0&&e<=255}function Mg(e,r){const{r:o,g:s,b:c,a:d}=new qr(e).toRgb();if(d<1)return e;const{r:f,g:v,b:g}=new qr(r).toRgb();for(let _=.01;_<=1;_+=.01){const C=Math.round((o-f*(1-_))/_),b=Math.round((s-v*(1-_))/_),T=Math.round((c-g*(1-_))/_);if(SO(C)&&SO(b)&&SO(T))return new qr({r:C,g:b,b:T,a:Math.round(_*100)/100}).toRgbString()}return new qr({r:o,g:s,b:c,a:1}).toRgbString()}var Jye=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function YY(e){const{override:r}=e,o=Jye(e,["override"]),s=Object.assign({},r);Object.keys(wv).forEach(T=>{delete s[T]});const c=Object.assign(Object.assign({},o),s),d=480,f=576,v=768,g=992,_=1200,C=1600;if(c.motion===!1){const T="0s";c.motionDurationFast=T,c.motionDurationMid=T,c.motionDurationSlow=T}return Object.assign(Object.assign(Object.assign({},c),{colorFillContent:c.colorFillSecondary,colorFillContentHover:c.colorFill,colorFillAlter:c.colorFillQuaternary,colorBgContainerDisabled:c.colorFillTertiary,colorBorderBg:c.colorBgContainer,colorSplit:Mg(c.colorBorderSecondary,c.colorBgContainer),colorTextPlaceholder:c.colorTextQuaternary,colorTextDisabled:c.colorTextQuaternary,colorTextHeading:c.colorText,colorTextLabel:c.colorTextSecondary,colorTextDescription:c.colorTextTertiary,colorTextLightSolid:c.colorWhite,colorHighlight:c.colorError,colorBgTextHover:c.colorFillSecondary,colorBgTextActive:c.colorFill,colorIcon:c.colorTextTertiary,colorIconHover:c.colorText,colorErrorOutline:Mg(c.colorErrorBg,c.colorBgContainer),colorWarningOutline:Mg(c.colorWarningBg,c.colorBgContainer),fontSizeIcon:c.fontSizeSM,lineWidthFocus:c.lineWidth*3,lineWidth:c.lineWidth,controlOutlineWidth:c.lineWidth*2,controlInteractiveSize:c.controlHeight/2,controlItemBgHover:c.colorFillTertiary,controlItemBgActive:c.colorPrimaryBg,controlItemBgActiveHover:c.colorPrimaryBgHover,controlItemBgActiveDisabled:c.colorFill,controlTmpOutline:c.colorFillQuaternary,controlOutline:Mg(c.colorPrimaryBg,c.colorBgContainer),lineType:c.lineType,borderRadius:c.borderRadius,borderRadiusXS:c.borderRadiusXS,borderRadiusSM:c.borderRadiusSM,borderRadiusLG:c.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:c.sizeXXS,paddingXS:c.sizeXS,paddingSM:c.sizeSM,padding:c.size,paddingMD:c.sizeMD,paddingLG:c.sizeLG,paddingXL:c.sizeXL,paddingContentHorizontalLG:c.sizeLG,paddingContentVerticalLG:c.sizeMS,paddingContentHorizontal:c.sizeMS,paddingContentVertical:c.sizeSM,paddingContentHorizontalSM:c.size,paddingContentVerticalSM:c.sizeXS,marginXXS:c.sizeXXS,marginXS:c.sizeXS,marginSM:c.sizeSM,margin:c.size,marginMD:c.sizeMD,marginLG:c.sizeLG,marginXL:c.sizeXL,marginXXL:c.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:d,screenXSMin:d,screenXSMax:f-1,screenSM:f,screenSMMin:f,screenSMMax:v-1,screenMD:v,screenMDMin:v,screenMDMax:g-1,screenLG:g,screenLGMin:g,screenLGMax:_-1,screenXL:_,screenXLMin:_,screenXLMax:C-1,screenXXL:C,screenXXLMin:C,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new qr("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new qr("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new qr("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),s)}var Z7=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const XY={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},Qye={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},Zye={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},JY=(e,r,o)=>{const s=o.getDerivativeToken(e),{override:c}=r,d=Z7(r,["override"]);let f=Object.assign(Object.assign({},s),{override:c});return f=YY(f),d&&Object.entries(d).forEach(v=>{let[g,_]=v;const{theme:C}=_,b=Z7(_,["theme"]);let T=b;C&&(T=JY(Object.assign(Object.assign({},f),b),{override:b},C)),f[g]=T}),f};function ns(){const{token:e,hashed:r,theme:o,override:s,cssVar:c}=Ve.useContext(zY),d=`${Xye}-${r||""}`,f=o||HY,[v,g,_]=SSe(f,[wv,e],{salt:d,override:s,getComputedToken:JY,formatToken:YY,cssVar:c&&{prefix:c.prefix,key:c.key,unitless:XY,ignore:Qye,preserve:Zye}});return[f,_,r?g:"",v,c]}const jC={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},Os=function(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:r?"inherit":e.fontFamily}},qv=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),pP=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),eCe=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active, &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),tCe=(e,r,o,s)=>{const c=`[class^="${r}"], [class*=" ${r}"]`,d=o?`.${o}`:c,f={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let v={};return s!==!1&&(v={fontFamily:e.fontFamily,fontSize:e.fontSize}),{[d]:Object.assign(Object.assign(Object.assign({},v),f),{[c]:f})}},$C=(e,r)=>({outline:`${Ge(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`,outlineOffset:r??1,transition:"outline-offset 0s, outline 0s"}),Jb=(e,r)=>({"&:focus-visible":Object.assign({},$C(e,r))}),QY=e=>({[`.${e}`]:Object.assign(Object.assign({},qv()),{[`.${e} .${e}-icon`]:{display:"block"}})}),ZY=e=>Object.assign(Object.assign({color:e.colorLink,textDecoration:e.linkDecoration,outline:"none",cursor:"pointer",transition:`all ${e.motionDurationSlow}`,border:0,padding:0,background:"none",userSelect:"none"},Jb(e)),{"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}}),{genStyleHooks:To,genComponentStyleHook:nCe,genSubStyleComponent:Qb}=Yye({usePrefix:()=>{const{getPrefixCls:e,iconPrefixCls:r}=S.useContext(br);return{rootPrefixCls:e(),iconPrefixCls:r}},useToken:()=>{const[e,r,o,s,c]=ns();return{theme:e,realToken:r,hashId:o,token:s,cssVar:c}},useCSP:()=>{const{csp:e}=S.useContext(br);return e??{}},getResetStyles:(e,r)=>{var o;const s=eCe(e);return[s,{"&":s},QY((o=r==null?void 0:r.prefix.iconPrefixCls)!==null&&o!==void 0?o:Xb)]},getCommonStyle:tCe,getCompUnitless:()=>XY});function rCe(e,r){return zh.reduce((o,s)=>{const c=e[`${s}1`],d=e[`${s}3`],f=e[`${s}6`],v=e[`${s}7`];return Object.assign(Object.assign({},o),r(s,{lightColor:c,lightBorderColor:d,darkColor:f,textColor:v}))},{})}const iCe=(e,r)=>{const[o,s]=ns();return QN({theme:o,token:s,hashId:"",path:["ant-design-icons",e],nonce:()=>r==null?void 0:r.nonce,layer:{name:"antd"}},()=>[QY(e)])},oCe=iCe,aCe=Object.assign({},Fh),{useId:e9}=aCe,sCe=()=>"",cCe=typeof e9>"u"?sCe:e9,lCe=cCe;function uCe(e,r,o){var s;Yb();const c=e||{},d=c.inherit===!1||!r?Object.assign(Object.assign({},uP),{hashed:(s=r==null?void 0:r.hashed)!==null&&s!==void 0?s:uP.hashed,cssVar:r==null?void 0:r.cssVar}):r,f=lCe();return zv(()=>{var v,g;if(!e)return r;const _=Object.assign({},d.components);Object.keys(e.components||{}).forEach(T=>{_[T]=Object.assign(Object.assign({},_[T]),e.components[T])});const C=`css-var-${f.replace(/:/g,"")}`,b=((v=c.cssVar)!==null&&v!==void 0?v:d.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:o==null?void 0:o.prefixCls},typeof d.cssVar=="object"?d.cssVar:{}),typeof c.cssVar=="object"?c.cssVar:{}),{key:typeof c.cssVar=="object"&&((g=c.cssVar)===null||g===void 0?void 0:g.key)||C});return Object.assign(Object.assign(Object.assign({},d),c),{token:Object.assign(Object.assign({},d.token),c.token),components:_,cssVar:b})},[c,d],(v,g)=>v.some((_,C)=>{const b=g[C];return!Tv(_,b,!0)}))}var dCe=["children"],eX=S.createContext({});function hCe(e){var r=e.children,o=An(e,dCe);return S.createElement(eX.Provider,{value:o},r)}var fCe=function(e){Ml(o,e);var r=Fl(o);function o(){return io(this,o),r.apply(this,arguments)}return oo(o,[{key:"render",value:function(){return this.props.children}}]),o}(S.Component);function pCe(e){var r=S.useReducer(function(v){return v+1},0),o=Ue(r,2),s=o[1],c=S.useRef(e),d=uo(function(){return c.current}),f=uo(function(v){c.current=typeof v=="function"?v(c.current):v,s()});return[d,f]}var id="none",Ey="appear",_y="enter",Sy="leave",t9="none",Lc="prepare",qp="start",Yp="active",v2="end",tX="prepared";function n9(e,r){var o={};return o[e.toLowerCase()]=r.toLowerCase(),o["Webkit".concat(e)]="webkit".concat(r),o["Moz".concat(e)]="moz".concat(r),o["ms".concat(e)]="MS".concat(r),o["O".concat(e)]="o".concat(r.toLowerCase()),o}function mCe(e,r){var o={animationend:n9("Animation","AnimationEnd"),transitionend:n9("Transition","TransitionEnd")};return e&&("AnimationEvent"in r||delete o.animationend.animation,"TransitionEvent"in r||delete o.transitionend.transition),o}var gCe=mCe(Oa(),typeof window<"u"?window:{}),nX={};if(Oa()){var vCe=document.createElement("div");nX=vCe.style}var yy={};function rX(e){if(yy[e])return yy[e];var r=gCe[e];if(r)for(var o=Object.keys(r),s=o.length,c=0;c<s;c+=1){var d=o[c];if(Object.prototype.hasOwnProperty.call(r,d)&&d in nX)return yy[e]=r[d],yy[e]}return""}var iX=rX("animationend"),oX=rX("transitionend"),aX=!!(iX&&oX),r9=iX||"animationend",i9=oX||"transitionend";function o9(e,r){if(!e)return null;if(on(e)==="object"){var o=r.replace(/-\w/g,function(s){return s[1].toUpperCase()});return e[o]}return"".concat(e,"-").concat(r)}const ECe=function(e){var r=S.useRef();function o(c){c&&(c.removeEventListener(i9,e),c.removeEventListener(r9,e))}function s(c){r.current&&r.current!==c&&o(r.current),c&&c!==r.current&&(c.addEventListener(i9,e),c.addEventListener(r9,e),r.current=c)}return S.useEffect(function(){return function(){o(r.current)}},[]),[s,o]};var sX=Oa()?S.useLayoutEffect:S.useEffect;const _Ce=function(){var e=S.useRef(null);function r(){oi.cancel(e.current)}function o(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;r();var d=oi(function(){c<=1?s({isCanceled:function(){return d!==e.current}}):o(s,c-1)});e.current=d}return S.useEffect(function(){return function(){r()}},[]),[o,r]};var SCe=[Lc,qp,Yp,v2],yCe=[Lc,tX],cX=!1,CCe=!0;function lX(e){return e===Yp||e===v2}const bCe=function(e,r,o){var s=gm(t9),c=Ue(s,2),d=c[0],f=c[1],v=_Ce(),g=Ue(v,2),_=g[0],C=g[1];function b(){f(Lc,!0)}var T=r?yCe:SCe;return sX(function(){if(d!==t9&&d!==v2){var I=T.indexOf(d),w=T[I+1],x=o(d);x===cX?f(w,!0):w&&_(function(N){function P(){N.isCanceled()||f(w,!0)}x===!0?P():Promise.resolve(x).then(P)})}},[e,d]),S.useEffect(function(){return function(){C()}},[]),[b,d]};function TCe(e,r,o,s){var c=s.motionEnter,d=c===void 0?!0:c,f=s.motionAppear,v=f===void 0?!0:f,g=s.motionLeave,_=g===void 0?!0:g,C=s.motionDeadline,b=s.motionLeaveImmediately,T=s.onAppearPrepare,I=s.onEnterPrepare,w=s.onLeavePrepare,x=s.onAppearStart,N=s.onEnterStart,P=s.onLeaveStart,O=s.onAppearActive,L=s.onEnterActive,M=s.onLeaveActive,F=s.onAppearEnd,V=s.onEnterEnd,j=s.onLeaveEnd,z=s.onVisibleChanged,q=gm(),W=Ue(q,2),J=W[0],te=W[1],ee=pCe(id),oe=Ue(ee,2),pe=oe[0],ne=oe[1],ae=gm(null),re=Ue(ae,2),he=re[0],fe=re[1],se=pe(),de=S.useRef(!1),ve=S.useRef(null);function ie(){return o()}var be=S.useRef(!1);function Re(){ne(id),fe(null,!0)}var Pe=uo(function(ut){var ot=pe();if(ot!==id){var ze=ie();if(!(ut&&!ut.deadline&&ut.target!==ze)){var tt=be.current,bt;ot===Ey&&tt?bt=F==null?void 0:F(ze,ut):ot===_y&&tt?bt=V==null?void 0:V(ze,ut):ot===Sy&&tt&&(bt=j==null?void 0:j(ze,ut)),tt&&bt!==!1&&Re()}}}),Ie=ECe(Pe),xe=Ue(Ie,1),We=xe[0],De=function(ot){switch(ot){case Ey:return Ce(Ce(Ce({},Lc,T),qp,x),Yp,O);case _y:return Ce(Ce(Ce({},Lc,I),qp,N),Yp,L);case Sy:return Ce(Ce(Ce({},Lc,w),qp,P),Yp,M);default:return{}}},Ae=S.useMemo(function(){return De(se)},[se]),je=bCe(se,!e,function(ut){if(ut===Lc){var ot=Ae[Lc];return ot?ot(ie()):cX}if(ke in Ae){var ze;fe(((ze=Ae[ke])===null||ze===void 0?void 0:ze.call(Ae,ie(),null))||null)}return ke===Yp&&se!==id&&(We(ie()),C>0&&(clearTimeout(ve.current),ve.current=setTimeout(function(){Pe({deadline:!0})},C))),ke===tX&&Re(),CCe}),Je=Ue(je,2),Fe=Je[0],ke=Je[1],ht=lX(ke);be.current=ht;var Ze=S.useRef(null);sX(function(){if(!(de.current&&Ze.current===r)){te(r);var ut=de.current;de.current=!0;var ot;!ut&&r&&v&&(ot=Ey),ut&&r&&d&&(ot=_y),(ut&&!r&&_||!ut&&b&&!r&&_)&&(ot=Sy);var ze=De(ot);ot&&(e||ze[Lc])?(ne(ot),Fe()):ne(id),Ze.current=r}},[r]),S.useEffect(function(){(se===Ey&&!v||se===_y&&!d||se===Sy&&!_)&&ne(id)},[v,d,_]),S.useEffect(function(){return function(){de.current=!1,clearTimeout(ve.current)}},[]);var mt=S.useRef(!1);S.useEffect(function(){J&&(mt.current=!0),J!==void 0&&se===id&&((mt.current||J)&&(z==null||z(J)),mt.current=!0)},[J,se]);var Rt=he;return Ae[Lc]&&ke===qp&&(Rt=_e({transition:"none"},Rt)),[se,ke,Rt,J??r]}function RCe(e){var r=e;on(e)==="object"&&(r=e.transitionSupport);function o(c,d){return!!(c.motionName&&r&&d!==!1)}var s=S.forwardRef(function(c,d){var f=c.visible,v=f===void 0?!0:f,g=c.removeOnLeave,_=g===void 0?!0:g,C=c.forceRender,b=c.children,T=c.motionName,I=c.leavedClassName,w=c.eventProps,x=S.useContext(eX),N=x.motion,P=o(c,N),O=S.useRef(),L=S.useRef();function M(){try{return O.current instanceof HTMLElement?O.current:Yy(L.current)}catch{return null}}var F=TCe(P,v,M,c),V=Ue(F,4),j=V[0],z=V[1],q=V[2],W=V[3],J=S.useRef(W);W&&(J.current=!0);var te=S.useCallback(function(re){O.current=re,a2(d,re)},[d]),ee,oe=_e(_e({},w),{},{visible:v});if(!b)ee=null;else if(j===id)W?ee=b(_e({},oe),te):!_&&J.current&&I?ee=b(_e(_e({},oe),{},{className:I}),te):C||!_&&!I?ee=b(_e(_e({},oe),{},{style:{display:"none"}}),te):ee=null;else{var pe;z===Lc?pe="prepare":lX(z)?pe="active":z===qp&&(pe="start");var ne=o9(T,"".concat(j,"-").concat(pe));ee=b(_e(_e({},oe),{},{className:$e(o9(T,j),Ce(Ce({},ne,ne&&pe),T,typeof T=="string")),style:q}),te)}if(S.isValidElement(ee)&&Om(ee)){var ae=Wv(ee);ae||(ee=S.cloneElement(ee,{ref:te}))}return S.createElement(fCe,{ref:L},ee)});return s.displayName="CSSMotion",s}const ef=RCe(aX);var mP="add",gP="keep",vP="remove",yO="removed";function wCe(e){var r;return e&&on(e)==="object"&&"key"in e?r=e:r={key:e},_e(_e({},r),{},{key:String(r.key)})}function EP(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(wCe)}function ICe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=[],s=0,c=r.length,d=EP(e),f=EP(r);d.forEach(function(_){for(var C=!1,b=s;b<c;b+=1){var T=f[b];if(T.key===_.key){s<b&&(o=o.concat(f.slice(s,b).map(function(I){return _e(_e({},I),{},{status:mP})})),s=b),o.push(_e(_e({},T),{},{status:gP})),s+=1,C=!0;break}}C||o.push(_e(_e({},_),{},{status:vP}))}),s<c&&(o=o.concat(f.slice(s).map(function(_){return _e(_e({},_),{},{status:mP})})));var v={};o.forEach(function(_){var C=_.key;v[C]=(v[C]||0)+1});var g=Object.keys(v).filter(function(_){return v[_]>1});return g.forEach(function(_){o=o.filter(function(C){var b=C.key,T=C.status;return b!==_||T!==vP}),o.forEach(function(C){C.key===_&&(C.status=gP)})}),o}var ACe=["component","children","onVisibleChanged","onAllRemoved"],OCe=["status"],xCe=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function NCe(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ef,o=function(s){Ml(d,s);var c=Fl(d);function d(){var f;io(this,d);for(var v=arguments.length,g=new Array(v),_=0;_<v;_++)g[_]=arguments[_];return f=c.call.apply(c,[this].concat(g)),Ce(tr(f),"state",{keyEntities:[]}),Ce(tr(f),"removeKey",function(C){f.setState(function(b){var T=b.keyEntities.map(function(I){return I.key!==C?I:_e(_e({},I),{},{status:yO})});return{keyEntities:T}},function(){var b=f.state.keyEntities,T=b.filter(function(I){var w=I.status;return w!==yO}).length;T===0&&f.props.onAllRemoved&&f.props.onAllRemoved()})}),f}return oo(d,[{key:"render",value:function(){var v=this,g=this.state.keyEntities,_=this.props,C=_.component,b=_.children,T=_.onVisibleChanged;_.onAllRemoved;var I=An(_,ACe),w=C||S.Fragment,x={};return xCe.forEach(function(N){x[N]=I[N],delete I[N]}),delete I.keys,S.createElement(w,I,g.map(function(N,P){var O=N.status,L=An(N,OCe),M=O===mP||O===gP;return S.createElement(r,Qe({},x,{key:L.key,visible:M,eventProps:L,onVisibleChanged:function(V){T==null||T(V,{key:L.key}),V||v.removeKey(L.key)}}),function(F,V){return b(_e(_e({},F),{},{index:P}),V)})}))}}],[{key:"getDerivedStateFromProps",value:function(v,g){var _=v.keys,C=g.keyEntities,b=EP(_),T=ICe(C,b);return{keyEntities:T.filter(function(I){var w=C.find(function(x){var N=x.key;return I.key===N});return!(w&&w.status===yO&&I.status===vP)})}}}]),d}(S.Component);return Ce(o,"defaultProps",{component:"div"}),o}const uX=NCe(aX);function PCe(e){const{children:r}=e,[,o]=ns(),{motion:s}=o,c=S.useRef(!1);return c.current=c.current||s===!1,c.current?S.createElement(hCe,{motion:s},r):r}const DCe=()=>null;var LCe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const kCe=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let HC,dX,hX,fX;function rC(){return HC||Av}function MCe(){return dX||Xb}function FCe(e){return Object.keys(e).some(r=>r.endsWith("Color"))}const UCe=e=>{const{prefixCls:r,iconPrefixCls:o,theme:s,holderRender:c}=e;r!==void 0&&(HC=r),o!==void 0&&(dX=o),"holderRender"in e&&(fX=c),s&&(FCe(s)?kye(rC(),s):hX=s)},BCe=()=>({getPrefixCls:(e,r)=>r||(e?`${rC()}-${e}`:rC()),getIconPrefixCls:MCe,getRootPrefixCls:()=>HC||rC(),getTheme:()=>hX,holderRender:fX}),VCe=e=>{const{children:r,csp:o,autoInsertSpaceInButton:s,alert:c,anchor:d,form:f,locale:v,componentSize:g,direction:_,space:C,splitter:b,virtual:T,dropdownMatchSelectWidth:I,popupMatchSelectWidth:w,popupOverflow:x,legacyLocale:N,parentContext:P,iconPrefixCls:O,theme:L,componentDisabled:M,segmented:F,statistic:V,spin:j,calendar:z,carousel:q,cascader:W,collapse:J,typography:te,checkbox:ee,descriptions:oe,divider:pe,drawer:ne,skeleton:ae,steps:re,image:he,layout:fe,list:se,mentions:de,modal:ve,progress:ie,result:be,slider:Re,breadcrumb:Pe,menu:Ie,pagination:xe,input:We,textArea:De,empty:Ae,badge:je,radio:Je,rate:Fe,switch:ke,transfer:ht,avatar:Ze,message:mt,tag:Rt,table:ut,card:ot,tabs:ze,timeline:tt,timePicker:bt,upload:Nt,notification:wt,tree:Xt,colorPicker:$t,datePicker:Lt,rangePicker:Wt,flex:Jt,wave:Ft,dropdown:yt,warning:It,tour:ft,tooltip:Pt,popover:Cn,popconfirm:bn,floatButtonGroup:si,variant:Qr,inputNumber:vi,treeSelect:xr}=e,nr=S.useCallback((Bt,rn)=>{const{prefixCls:or}=e;if(rn)return rn;const Gn=or||P.getPrefixCls("");return Bt?`${Gn}-${Bt}`:Gn},[P.getPrefixCls,e.prefixCls]),ir=O||P.iconPrefixCls||Xb,Tn=o||P.csp;oCe(ir,Tn);const Ut=uCe(L,P.theme,{prefixCls:nr("")}),kt={csp:Tn,autoInsertSpaceInButton:s,alert:c,anchor:d,locale:v||N,direction:_,space:C,splitter:b,virtual:T,popupMatchSelectWidth:w??I,popupOverflow:x,getPrefixCls:nr,iconPrefixCls:ir,theme:Ut,segmented:F,statistic:V,spin:j,calendar:z,carousel:q,cascader:W,collapse:J,typography:te,checkbox:ee,descriptions:oe,divider:pe,drawer:ne,skeleton:ae,steps:re,image:he,input:We,textArea:De,layout:fe,list:se,mentions:de,modal:ve,progress:ie,result:be,slider:Re,breadcrumb:Pe,menu:Ie,pagination:xe,empty:Ae,badge:je,radio:Je,rate:Fe,switch:ke,transfer:ht,avatar:Ze,message:mt,tag:Rt,table:ut,card:ot,tabs:ze,timeline:tt,timePicker:bt,upload:Nt,notification:wt,tree:Xt,colorPicker:$t,datePicker:Lt,rangePicker:Wt,flex:Jt,wave:Ft,dropdown:yt,warning:It,tour:ft,tooltip:Pt,popover:Cn,popconfirm:bn,floatButtonGroup:si,variant:Qr,inputNumber:vi,treeSelect:xr},Ct=Object.assign({},P);Object.keys(kt).forEach(Bt=>{kt[Bt]!==void 0&&(Ct[Bt]=kt[Bt])}),kCe.forEach(Bt=>{const rn=e[Bt];rn&&(Ct[Bt]=rn)}),typeof s<"u"&&(Ct.button=Object.assign({autoInsertSpace:s},Ct.button));const Pn=zv(()=>Ct,Ct,(Bt,rn)=>{const or=Object.keys(Bt),Gn=Object.keys(rn);return or.length!==Gn.length||or.some(Fn=>Bt[Fn]!==rn[Fn])}),{layer:tn}=S.useContext(Gv),pt=S.useMemo(()=>({prefixCls:ir,csp:Tn,layer:tn?"antd":void 0}),[ir,Tn,tn]);let gt=S.createElement(S.Fragment,null,S.createElement(DCe,{dropdownMatchSelectWidth:I}),r);const Ht=S.useMemo(()=>{var Bt,rn,or,Gn;return Kp(((Bt=Hh.Form)===null||Bt===void 0?void 0:Bt.defaultValidateMessages)||{},((or=(rn=Pn.locale)===null||rn===void 0?void 0:rn.Form)===null||or===void 0?void 0:or.defaultValidateMessages)||{},((Gn=Pn.form)===null||Gn===void 0?void 0:Gn.validateMessages)||{},(f==null?void 0:f.validateMessages)||{})},[Pn,f==null?void 0:f.validateMessages]);Object.keys(Ht).length>0&&(gt=S.createElement(FY.Provider,{value:Ht},gt)),v&&(gt=S.createElement(dye,{locale:v,_ANT_MARK__:lye},gt)),(ir||Tn)&&(gt=S.createElement(m2.Provider,{value:pt},gt)),g&&(gt=S.createElement(Mye,{size:g},gt)),gt=S.createElement(PCe,null,gt);const Gt=S.useMemo(()=>{const Bt=Ut||{},{algorithm:rn,token:or,components:Gn,cssVar:Fn}=Bt,Zn=LCe(Bt,["algorithm","token","components","cssVar"]),$r=rn&&(!Array.isArray(rn)||rn.length>0)?qN(rn):HY,ci={};Object.entries(Gn||{}).forEach(Xi=>{let[dr,li]=Xi;const _t=Object.assign({},li);"algorithm"in _t&&(_t.algorithm===!0?_t.theme=$r:(Array.isArray(_t.algorithm)||typeof _t.algorithm=="function")&&(_t.theme=qN(_t.algorithm)),delete _t.algorithm),ci[dr]=_t});const Zr=Object.assign(Object.assign({},wv),or);return Object.assign(Object.assign({},Zn),{theme:$r,token:Zr,components:ci,override:Object.assign({override:Zr},ci),cssVar:Fn})},[Ut]);return L&&(gt=S.createElement(zY.Provider,{value:Gt},gt)),Pn.warning&&(gt=S.createElement(eye.Provider,{value:Pn.warning},gt)),M!==void 0&&(gt=S.createElement(WY,{disabled:M},gt)),S.createElement(br.Provider,{value:Pn},gt)},tf=e=>{const r=S.useContext(br),o=S.useContext(g2);return S.createElement(VCe,Object.assign({parentContext:r,legacyLocale:o},e))};tf.ConfigContext=br;tf.SizeContext=Kv;tf.config=UCe;tf.useConfig=Fye;Object.defineProperty(tf,"SizeContext",{get:()=>Kv});var jCe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const $Ce=jCe;function pX(e){var r;return e==null||(r=e.getRootNode)===null||r===void 0?void 0:r.call(e)}function HCe(e){return pX(e)instanceof ShadowRoot}function zC(e){return HCe(e)?pX(e):null}function zCe(e){return e.replace(/-(.)/g,function(r,o){return o.toUpperCase()})}function WCe(e,r){_a(e,"[@ant-design/icons] ".concat(r))}function a9(e){return on(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(on(e.icon)==="object"||typeof e.icon=="function")}function s9(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(r,o){var s=e[o];switch(o){case"class":r.className=s,delete r.class;break;default:delete r[o],r[zCe(o)]=s}return r},{})}function _P(e,r,o){return o?Ve.createElement(e.tag,_e(_e({key:r},s9(e.attrs)),o),(e.children||[]).map(function(s,c){return _P(s,"".concat(r,"-").concat(e.tag,"-").concat(c))})):Ve.createElement(e.tag,_e({key:r},s9(e.attrs)),(e.children||[]).map(function(s,c){return _P(s,"".concat(r,"-").concat(e.tag,"-").concat(c))}))}function mX(e){return Iv(e)[0]}function gX(e){return e?Array.isArray(e)?e:[e]:[]}var GCe=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,KCe=function(r){var o=S.useContext(m2),s=o.csp,c=o.prefixCls,d=o.layer,f=GCe;c&&(f=f.replace(/anticon/g,c)),d&&(f="@layer ".concat(d,` {
`).concat(f,`
}`)),S.useEffect(function(){var v=r.current,g=zC(v);cu(f,"@ant-design-icons",{prepend:!d,csp:s,attachTo:g})},[])},qCe=["icon","className","onClick","style","primaryColor","secondaryColor"],Yg={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function YCe(e){var r=e.primaryColor,o=e.secondaryColor;Yg.primaryColor=r,Yg.secondaryColor=o||mX(r),Yg.calculated=!!o}function XCe(){return _e({},Yg)}var Zb=function(r){var o=r.icon,s=r.className,c=r.onClick,d=r.style,f=r.primaryColor,v=r.secondaryColor,g=An(r,qCe),_=S.useRef(),C=Yg;if(f&&(C={primaryColor:f,secondaryColor:v||mX(f)}),KCe(_),WCe(a9(o),"icon should be icon definiton, but got ".concat(o)),!a9(o))return null;var b=o;return b&&typeof b.icon=="function"&&(b=_e(_e({},b),{},{icon:b.icon(C.primaryColor,C.secondaryColor)})),_P(b.icon,"svg-".concat(b.name),_e(_e({className:s,onClick:c,style:d,"data-icon":b.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},g),{},{ref:_}))};Zb.displayName="IconReact";Zb.getTwoToneColors=XCe;Zb.setTwoToneColors=YCe;const E2=Zb;function vX(e){var r=gX(e),o=Ue(r,2),s=o[0],c=o[1];return E2.setTwoToneColors({primaryColor:s,secondaryColor:c})}function JCe(){var e=E2.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var QCe=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];vX(VC.primary);var eT=S.forwardRef(function(e,r){var o=e.className,s=e.icon,c=e.spin,d=e.rotate,f=e.tabIndex,v=e.onClick,g=e.twoToneColor,_=An(e,QCe),C=S.useContext(m2),b=C.prefixCls,T=b===void 0?"anticon":b,I=C.rootClassName,w=$e(I,T,Ce(Ce({},"".concat(T,"-").concat(s.name),!!s.name),"".concat(T,"-spin"),!!c||s.name==="loading"),o),x=f;x===void 0&&v&&(x=-1);var N=d?{msTransform:"rotate(".concat(d,"deg)"),transform:"rotate(".concat(d,"deg)")}:void 0,P=gX(g),O=Ue(P,2),L=O[0],M=O[1];return S.createElement("span",Qe({role:"img","aria-label":s.name},_,{ref:r,tabIndex:x,onClick:v,className:w}),S.createElement(E2,{icon:s,primaryColor:L,secondaryColor:M,style:N}))});eT.displayName="AntdIcon";eT.getTwoToneColor=JCe;eT.setTwoToneColor=vX;const ao=eT;var ZCe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:$Ce}))},ebe=S.forwardRef(ZCe);const EX=ebe;var tbe={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};const nbe=tbe;var rbe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:nbe}))},ibe=S.forwardRef(rbe);const tT=ibe;var obe={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};const abe=obe;var sbe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:abe}))},cbe=S.forwardRef(sbe);const _X=cbe;var lbe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const ube=lbe;var dbe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:ube}))},hbe=S.forwardRef(dbe);const SX=hbe;var fbe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const pbe=fbe;var mbe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:pbe}))},gbe=S.forwardRef(mbe);const vbe=gbe;var Ebe=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,_be=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,Sbe="".concat(Ebe," ").concat(_be).split(/[\s\n]+/),ybe="aria-",Cbe="data-";function c9(e,r){return e.indexOf(r)===0}function Wh(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o;r===!1?o={aria:!0,data:!0,attr:!0}:r===!0?o={aria:!0}:o=_e({},r);var s={};return Object.keys(e).forEach(function(c){(o.aria&&(c==="role"||c9(c,ybe))||o.data&&c9(c,Cbe)||o.attr&&Sbe.includes(c))&&(s[c]=e[c])}),s}function yX(e){return e&&Ve.isValidElement(e)&&e.type===Ve.Fragment}const bbe=(e,r,o)=>Ve.isValidElement(e)?Ve.cloneElement(e,typeof o=="function"?o(e.props||{}):o):r;function dc(e,r){return bbe(e,e,r)}const l9=e=>typeof e=="object"&&e!=null&&e.nodeType===1,u9=(e,r)=>(!r||e!=="hidden")&&e!=="visible"&&e!=="clip",Cy=(e,r)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const o=getComputedStyle(e,null);return u9(o.overflowY,r)||u9(o.overflowX,r)||(s=>{const c=(d=>{if(!d.ownerDocument||!d.ownerDocument.defaultView)return null;try{return d.ownerDocument.defaultView.frameElement}catch{return null}})(s);return!!c&&(c.clientHeight<s.scrollHeight||c.clientWidth<s.scrollWidth)})(e)}return!1},by=(e,r,o,s,c,d,f,v)=>d<e&&f>r||d>e&&f<r?0:d<=e&&v<=o||f>=r&&v>=o?d-e-s:f>r&&v<o||d<e&&v>o?f-r+c:0,Tbe=e=>{const r=e.parentElement;return r??(e.getRootNode().host||null)},d9=(e,r)=>{var o,s,c,d;if(typeof document>"u")return[];const{scrollMode:f,block:v,inline:g,boundary:_,skipOverflowHiddenElements:C}=r,b=typeof _=="function"?_:ne=>ne!==_;if(!l9(e))throw new TypeError("Invalid target");const T=document.scrollingElement||document.documentElement,I=[];let w=e;for(;l9(w)&&b(w);){if(w=Tbe(w),w===T){I.push(w);break}w!=null&&w===document.body&&Cy(w)&&!Cy(document.documentElement)||w!=null&&Cy(w,C)&&I.push(w)}const x=(s=(o=window.visualViewport)==null?void 0:o.width)!=null?s:innerWidth,N=(d=(c=window.visualViewport)==null?void 0:c.height)!=null?d:innerHeight,{scrollX:P,scrollY:O}=window,{height:L,width:M,top:F,right:V,bottom:j,left:z}=e.getBoundingClientRect(),{top:q,right:W,bottom:J,left:te}=(ne=>{const ae=window.getComputedStyle(ne);return{top:parseFloat(ae.scrollMarginTop)||0,right:parseFloat(ae.scrollMarginRight)||0,bottom:parseFloat(ae.scrollMarginBottom)||0,left:parseFloat(ae.scrollMarginLeft)||0}})(e);let ee=v==="start"||v==="nearest"?F-q:v==="end"?j+J:F+L/2-q+J,oe=g==="center"?z+M/2-te+W:g==="end"?V+W:z-te;const pe=[];for(let ne=0;ne<I.length;ne++){const ae=I[ne],{height:re,width:he,top:fe,right:se,bottom:de,left:ve}=ae.getBoundingClientRect();if(f==="if-needed"&&F>=0&&z>=0&&j<=N&&V<=x&&(ae===T&&!Cy(ae)||F>=fe&&j<=de&&z>=ve&&V<=se))return pe;const ie=getComputedStyle(ae),be=parseInt(ie.borderLeftWidth,10),Re=parseInt(ie.borderTopWidth,10),Pe=parseInt(ie.borderRightWidth,10),Ie=parseInt(ie.borderBottomWidth,10);let xe=0,We=0;const De="offsetWidth"in ae?ae.offsetWidth-ae.clientWidth-be-Pe:0,Ae="offsetHeight"in ae?ae.offsetHeight-ae.clientHeight-Re-Ie:0,je="offsetWidth"in ae?ae.offsetWidth===0?0:he/ae.offsetWidth:0,Je="offsetHeight"in ae?ae.offsetHeight===0?0:re/ae.offsetHeight:0;if(T===ae)xe=v==="start"?ee:v==="end"?ee-N:v==="nearest"?by(O,O+N,N,Re,Ie,O+ee,O+ee+L,L):ee-N/2,We=g==="start"?oe:g==="center"?oe-x/2:g==="end"?oe-x:by(P,P+x,x,be,Pe,P+oe,P+oe+M,M),xe=Math.max(0,xe+O),We=Math.max(0,We+P);else{xe=v==="start"?ee-fe-Re:v==="end"?ee-de+Ie+Ae:v==="nearest"?by(fe,de,re,Re,Ie+Ae,ee,ee+L,L):ee-(fe+re/2)+Ae/2,We=g==="start"?oe-ve-be:g==="center"?oe-(ve+he/2)+De/2:g==="end"?oe-se+Pe+De:by(ve,se,he,be,Pe+De,oe,oe+M,M);const{scrollLeft:Fe,scrollTop:ke}=ae;xe=Je===0?0:Math.max(0,Math.min(ke+xe/Je,ae.scrollHeight-re/Je+Ae)),We=je===0?0:Math.max(0,Math.min(Fe+We/je,ae.scrollWidth-he/je+De)),ee+=ke-xe,oe+=Fe-We}pe.push({el:ae,top:xe,left:We})}return pe},Rbe=e=>e===!1?{block:"end",inline:"nearest"}:(r=>r===Object(r)&&Object.keys(r).length!==0)(e)?e:{block:"start",inline:"nearest"};function wbe(e,r){if(!e.isConnected||!(c=>{let d=c;for(;d&&d.parentNode;){if(d.parentNode===document)return!0;d=d.parentNode instanceof ShadowRoot?d.parentNode.host:d.parentNode}return!1})(e))return;const o=(c=>{const d=window.getComputedStyle(c);return{top:parseFloat(d.scrollMarginTop)||0,right:parseFloat(d.scrollMarginRight)||0,bottom:parseFloat(d.scrollMarginBottom)||0,left:parseFloat(d.scrollMarginLeft)||0}})(e);if((c=>typeof c=="object"&&typeof c.behavior=="function")(r))return r.behavior(d9(e,r));const s=typeof r=="boolean"||r==null?void 0:r.behavior;for(const{el:c,top:d,left:f}of d9(e,Rbe(r))){const v=d-o.top+o.bottom,g=f-o.left+o.right;c.scroll({top:v,left:g,behavior:s})}}const Ibe=e=>{const[,,,,r]=ns();return r?`${e}-css-var`:""},_u=Ibe;var lt={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(r){var o=r.keyCode;if(r.altKey&&!r.ctrlKey||r.metaKey||o>=lt.F1&&o<=lt.F12)return!1;switch(o){case lt.ALT:case lt.CAPS_LOCK:case lt.CONTEXT_MENU:case lt.CTRL:case lt.DOWN:case lt.END:case lt.ESC:case lt.HOME:case lt.INSERT:case lt.LEFT:case lt.MAC_FF_META:case lt.META:case lt.NUMLOCK:case lt.NUM_CENTER:case lt.PAGE_DOWN:case lt.PAGE_UP:case lt.PAUSE:case lt.PRINT_SCREEN:case lt.RIGHT:case lt.SHIFT:case lt.UP:case lt.WIN_KEY:case lt.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(r){if(r>=lt.ZERO&&r<=lt.NINE||r>=lt.NUM_ZERO&&r<=lt.NUM_MULTIPLY||r>=lt.A&&r<=lt.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&r===0)return!0;switch(r){case lt.SPACE:case lt.QUESTION_MARK:case lt.NUM_PLUS:case lt.NUM_MINUS:case lt.NUM_PERIOD:case lt.NUM_DIVISION:case lt.SEMICOLON:case lt.DASH:case lt.EQUALS:case lt.COMMA:case lt.PERIOD:case lt.SLASH:case lt.APOSTROPHE:case lt.SINGLE_QUOTE:case lt.OPEN_SQUARE_BRACKET:case lt.BACKSLASH:case lt.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},CX=S.forwardRef(function(e,r){var o=e.prefixCls,s=e.style,c=e.className,d=e.duration,f=d===void 0?4.5:d,v=e.showProgress,g=e.pauseOnHover,_=g===void 0?!0:g,C=e.eventKey,b=e.content,T=e.closable,I=e.closeIcon,w=I===void 0?"x":I,x=e.props,N=e.onClick,P=e.onNoticeClose,O=e.times,L=e.hovering,M=S.useState(!1),F=Ue(M,2),V=F[0],j=F[1],z=S.useState(0),q=Ue(z,2),W=q[0],J=q[1],te=S.useState(0),ee=Ue(te,2),oe=ee[0],pe=ee[1],ne=L||V,ae=f>0&&v,re=function(){P(C)},he=function(be){(be.key==="Enter"||be.code==="Enter"||be.keyCode===lt.ENTER)&&re()};S.useEffect(function(){if(!ne&&f>0){var ie=Date.now()-oe,be=setTimeout(function(){re()},f*1e3-oe);return function(){_&&clearTimeout(be),pe(Date.now()-ie)}}},[f,ne,O]),S.useEffect(function(){if(!ne&&ae&&(_||oe===0)){var ie=performance.now(),be,Re=function Pe(){cancelAnimationFrame(be),be=requestAnimationFrame(function(Ie){var xe=Ie+oe-ie,We=Math.min(xe/(f*1e3),1);J(We*100),We<1&&Pe()})};return Re(),function(){_&&cancelAnimationFrame(be)}}},[f,oe,ne,ae,O]);var fe=S.useMemo(function(){return on(T)==="object"&&T!==null?T:T?{closeIcon:w}:{}},[T,w]),se=Wh(fe,!0),de=100-(!W||W<0?0:W>100?100:W),ve="".concat(o,"-notice");return S.createElement("div",Qe({},x,{ref:r,className:$e(ve,c,Ce({},"".concat(ve,"-closable"),T)),style:s,onMouseEnter:function(be){var Re;j(!0),x==null||(Re=x.onMouseEnter)===null||Re===void 0||Re.call(x,be)},onMouseLeave:function(be){var Re;j(!1),x==null||(Re=x.onMouseLeave)===null||Re===void 0||Re.call(x,be)},onClick:N}),S.createElement("div",{className:"".concat(ve,"-content")},b),T&&S.createElement("a",Qe({tabIndex:0,className:"".concat(ve,"-close"),onKeyDown:he,"aria-label":"Close"},se,{onClick:function(be){be.preventDefault(),be.stopPropagation(),re()}}),fe.closeIcon),ae&&S.createElement("progress",{className:"".concat(ve,"-progress"),max:"100",value:de},de+"%"))}),bX=Ve.createContext({}),Abe=function(r){var o=r.children,s=r.classNames;return Ve.createElement(bX.Provider,{value:{classNames:s}},o)},h9=8,f9=3,p9=16,Obe=function(r){var o={offset:h9,threshold:f9,gap:p9};if(r&&on(r)==="object"){var s,c,d;o.offset=(s=r.offset)!==null&&s!==void 0?s:h9,o.threshold=(c=r.threshold)!==null&&c!==void 0?c:f9,o.gap=(d=r.gap)!==null&&d!==void 0?d:p9}return[!!r,o]},xbe=["className","style","classNames","styles"],Nbe=function(r){var o=r.configList,s=r.placement,c=r.prefixCls,d=r.className,f=r.style,v=r.motion,g=r.onAllNoticeRemoved,_=r.onNoticeClose,C=r.stack,b=S.useContext(bX),T=b.classNames,I=S.useRef({}),w=S.useState(null),x=Ue(w,2),N=x[0],P=x[1],O=S.useState([]),L=Ue(O,2),M=L[0],F=L[1],V=o.map(function(ne){return{config:ne,key:String(ne.key)}}),j=Obe(C),z=Ue(j,2),q=z[0],W=z[1],J=W.offset,te=W.threshold,ee=W.gap,oe=q&&(M.length>0||V.length<=te),pe=typeof v=="function"?v(s):v;return S.useEffect(function(){q&&M.length>1&&F(function(ne){return ne.filter(function(ae){return V.some(function(re){var he=re.key;return ae===he})})})},[M,V,q]),S.useEffect(function(){var ne;if(q&&I.current[(ne=V[V.length-1])===null||ne===void 0?void 0:ne.key]){var ae;P(I.current[(ae=V[V.length-1])===null||ae===void 0?void 0:ae.key])}},[V,q]),Ve.createElement(uX,Qe({key:s,className:$e(c,"".concat(c,"-").concat(s),T==null?void 0:T.list,d,Ce(Ce({},"".concat(c,"-stack"),!!q),"".concat(c,"-stack-expanded"),oe)),style:f,keys:V,motionAppear:!0},pe,{onAllRemoved:function(){g(s)}}),function(ne,ae){var re=ne.config,he=ne.className,fe=ne.style,se=ne.index,de=re,ve=de.key,ie=de.times,be=String(ve),Re=re,Pe=Re.className,Ie=Re.style,xe=Re.classNames,We=Re.styles,De=An(Re,xbe),Ae=V.findIndex(function(tt){return tt.key===be}),je={};if(q){var Je=V.length-1-(Ae>-1?Ae:se-1),Fe=s==="top"||s==="bottom"?"-50%":"0";if(Je>0){var ke,ht,Ze;je.height=oe?(ke=I.current[be])===null||ke===void 0?void 0:ke.offsetHeight:N==null?void 0:N.offsetHeight;for(var mt=0,Rt=0;Rt<Je;Rt++){var ut;mt+=((ut=I.current[V[V.length-1-Rt].key])===null||ut===void 0?void 0:ut.offsetHeight)+ee}var ot=(oe?mt:Je*J)*(s.startsWith("top")?1:-1),ze=!oe&&N!==null&&N!==void 0&&N.offsetWidth&&(ht=I.current[be])!==null&&ht!==void 0&&ht.offsetWidth?((N==null?void 0:N.offsetWidth)-J*2*(Je<3?Je:3))/((Ze=I.current[be])===null||Ze===void 0?void 0:Ze.offsetWidth):1;je.transform="translate3d(".concat(Fe,", ").concat(ot,"px, 0) scaleX(").concat(ze,")")}else je.transform="translate3d(".concat(Fe,", 0, 0)")}return Ve.createElement("div",{ref:ae,className:$e("".concat(c,"-notice-wrapper"),he,xe==null?void 0:xe.wrapper),style:_e(_e(_e({},fe),je),We==null?void 0:We.wrapper),onMouseEnter:function(){return F(function(bt){return bt.includes(be)?bt:[].concat(vt(bt),[be])})},onMouseLeave:function(){return F(function(bt){return bt.filter(function(Nt){return Nt!==be})})}},Ve.createElement(CX,Qe({},De,{ref:function(bt){Ae>-1?I.current[be]=bt:delete I.current[be]},prefixCls:c,classNames:xe,styles:We,className:$e(Pe,T==null?void 0:T.notice),style:Ie,times:ie,key:ve,eventKey:ve,onNoticeClose:_,hovering:q&&M.length>0})))})},Pbe=S.forwardRef(function(e,r){var o=e.prefixCls,s=o===void 0?"rc-notification":o,c=e.container,d=e.motion,f=e.maxCount,v=e.className,g=e.style,_=e.onAllRemoved,C=e.stack,b=e.renderNotifications,T=S.useState([]),I=Ue(T,2),w=I[0],x=I[1],N=function(q){var W,J=w.find(function(te){return te.key===q});J==null||(W=J.onClose)===null||W===void 0||W.call(J),x(function(te){return te.filter(function(ee){return ee.key!==q})})};S.useImperativeHandle(r,function(){return{open:function(q){x(function(W){var J=vt(W),te=J.findIndex(function(pe){return pe.key===q.key}),ee=_e({},q);if(te>=0){var oe;ee.times=(((oe=W[te])===null||oe===void 0?void 0:oe.times)||0)+1,J[te]=ee}else ee.times=0,J.push(ee);return f>0&&J.length>f&&(J=J.slice(-f)),J})},close:function(q){N(q)},destroy:function(){x([])}}});var P=S.useState({}),O=Ue(P,2),L=O[0],M=O[1];S.useEffect(function(){var z={};w.forEach(function(q){var W=q.placement,J=W===void 0?"topRight":W;J&&(z[J]=z[J]||[],z[J].push(q))}),Object.keys(L).forEach(function(q){z[q]=z[q]||[]}),M(z)},[w]);var F=function(q){M(function(W){var J=_e({},W),te=J[q]||[];return te.length||delete J[q],J})},V=S.useRef(!1);if(S.useEffect(function(){Object.keys(L).length>0?V.current=!0:V.current&&(_==null||_(),V.current=!1)},[L]),!c)return null;var j=Object.keys(L);return Dl.createPortal(S.createElement(S.Fragment,null,j.map(function(z){var q=L[z],W=S.createElement(Nbe,{key:z,configList:q,placement:z,prefixCls:s,className:v==null?void 0:v(z),style:g==null?void 0:g(z),motion:d,onNoticeClose:N,onAllNoticeRemoved:F,stack:C});return b?b(W,{prefixCls:s,key:z}):W})),c)}),Dbe=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],Lbe=function(){return document.body},m9=0;function kbe(){for(var e={},r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return o.forEach(function(c){c&&Object.keys(c).forEach(function(d){var f=c[d];f!==void 0&&(e[d]=f)})}),e}function Mbe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.getContainer,o=r===void 0?Lbe:r,s=e.motion,c=e.prefixCls,d=e.maxCount,f=e.className,v=e.style,g=e.onAllRemoved,_=e.stack,C=e.renderNotifications,b=An(e,Dbe),T=S.useState(),I=Ue(T,2),w=I[0],x=I[1],N=S.useRef(),P=S.createElement(Pbe,{container:w,ref:N,prefixCls:c,motion:s,maxCount:d,className:f,style:v,onAllRemoved:g,stack:_,renderNotifications:C}),O=S.useState([]),L=Ue(O,2),M=L[0],F=L[1],V=S.useMemo(function(){return{open:function(z){var q=kbe(b,z);(q.key===null||q.key===void 0)&&(q.key="rc-notification-".concat(m9),m9+=1),F(function(W){return[].concat(vt(W),[{type:"open",config:q}])})},close:function(z){F(function(q){return[].concat(vt(q),[{type:"close",key:z}])})},destroy:function(){F(function(z){return[].concat(vt(z),[{type:"destroy"}])})}}},[]);return S.useEffect(function(){x(o())}),S.useEffect(function(){if(N.current&&M.length){M.forEach(function(q){switch(q.type){case"open":N.current.open(q.config);break;case"close":N.current.close(q.key);break;case"destroy":N.current.destroy();break}});var j,z;F(function(q){return(j!==q||!z)&&(j=q,z=q.filter(function(W){return!M.includes(W)})),z})}},[M]),[V,P]}var Fbe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const Ube=Fbe;var Bbe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:Ube}))},Vbe=S.forwardRef(Bbe);const nT=Vbe,jbe=Ve.createContext(void 0),TX=jbe,od=100,$be=10,Hbe=od*$be,RX={Modal:od,Drawer:od,Popover:od,Popconfirm:od,Tooltip:od,Tour:od,FloatButton:od},zbe={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function Wbe(e){return e in RX}const _2=(e,r)=>{const[,o]=ns(),s=Ve.useContext(TX),c=Wbe(e);let d;if(r!==void 0)d=[r,r];else{let f=s??0;c?f+=(s?0:o.zIndexPopupBase)+RX[e]:f+=zbe[e],d=[s===void 0?r:f,f]}return d};function xa(){xa=function(){return r};var e,r={},o=Object.prototype,s=o.hasOwnProperty,c=Object.defineProperty||function(ne,ae,re){ne[ae]=re.value},d=typeof Symbol=="function"?Symbol:{},f=d.iterator||"@@iterator",v=d.asyncIterator||"@@asyncIterator",g=d.toStringTag||"@@toStringTag";function _(ne,ae,re){return Object.defineProperty(ne,ae,{value:re,enumerable:!0,configurable:!0,writable:!0}),ne[ae]}try{_({},"")}catch{_=function(re,he,fe){return re[he]=fe}}function C(ne,ae,re,he){var fe=ae&&ae.prototype instanceof P?ae:P,se=Object.create(fe.prototype),de=new oe(he||[]);return c(se,"_invoke",{value:W(ne,re,de)}),se}function b(ne,ae,re){try{return{type:"normal",arg:ne.call(ae,re)}}catch(he){return{type:"throw",arg:he}}}r.wrap=C;var T="suspendedStart",I="suspendedYield",w="executing",x="completed",N={};function P(){}function O(){}function L(){}var M={};_(M,f,function(){return this});var F=Object.getPrototypeOf,V=F&&F(F(pe([])));V&&V!==o&&s.call(V,f)&&(M=V);var j=L.prototype=P.prototype=Object.create(M);function z(ne){["next","throw","return"].forEach(function(ae){_(ne,ae,function(re){return this._invoke(ae,re)})})}function q(ne,ae){function re(fe,se,de,ve){var ie=b(ne[fe],ne,se);if(ie.type!=="throw"){var be=ie.arg,Re=be.value;return Re&&on(Re)=="object"&&s.call(Re,"__await")?ae.resolve(Re.__await).then(function(Pe){re("next",Pe,de,ve)},function(Pe){re("throw",Pe,de,ve)}):ae.resolve(Re).then(function(Pe){be.value=Pe,de(be)},function(Pe){return re("throw",Pe,de,ve)})}ve(ie.arg)}var he;c(this,"_invoke",{value:function(se,de){function ve(){return new ae(function(ie,be){re(se,de,ie,be)})}return he=he?he.then(ve,ve):ve()}})}function W(ne,ae,re){var he=T;return function(fe,se){if(he===w)throw Error("Generator is already running");if(he===x){if(fe==="throw")throw se;return{value:e,done:!0}}for(re.method=fe,re.arg=se;;){var de=re.delegate;if(de){var ve=J(de,re);if(ve){if(ve===N)continue;return ve}}if(re.method==="next")re.sent=re._sent=re.arg;else if(re.method==="throw"){if(he===T)throw he=x,re.arg;re.dispatchException(re.arg)}else re.method==="return"&&re.abrupt("return",re.arg);he=w;var ie=b(ne,ae,re);if(ie.type==="normal"){if(he=re.done?x:I,ie.arg===N)continue;return{value:ie.arg,done:re.done}}ie.type==="throw"&&(he=x,re.method="throw",re.arg=ie.arg)}}}function J(ne,ae){var re=ae.method,he=ne.iterator[re];if(he===e)return ae.delegate=null,re==="throw"&&ne.iterator.return&&(ae.method="return",ae.arg=e,J(ne,ae),ae.method==="throw")||re!=="return"&&(ae.method="throw",ae.arg=new TypeError("The iterator does not provide a '"+re+"' method")),N;var fe=b(he,ne.iterator,ae.arg);if(fe.type==="throw")return ae.method="throw",ae.arg=fe.arg,ae.delegate=null,N;var se=fe.arg;return se?se.done?(ae[ne.resultName]=se.value,ae.next=ne.nextLoc,ae.method!=="return"&&(ae.method="next",ae.arg=e),ae.delegate=null,N):se:(ae.method="throw",ae.arg=new TypeError("iterator result is not an object"),ae.delegate=null,N)}function te(ne){var ae={tryLoc:ne[0]};1 in ne&&(ae.catchLoc=ne[1]),2 in ne&&(ae.finallyLoc=ne[2],ae.afterLoc=ne[3]),this.tryEntries.push(ae)}function ee(ne){var ae=ne.completion||{};ae.type="normal",delete ae.arg,ne.completion=ae}function oe(ne){this.tryEntries=[{tryLoc:"root"}],ne.forEach(te,this),this.reset(!0)}function pe(ne){if(ne||ne===""){var ae=ne[f];if(ae)return ae.call(ne);if(typeof ne.next=="function")return ne;if(!isNaN(ne.length)){var re=-1,he=function fe(){for(;++re<ne.length;)if(s.call(ne,re))return fe.value=ne[re],fe.done=!1,fe;return fe.value=e,fe.done=!0,fe};return he.next=he}}throw new TypeError(on(ne)+" is not iterable")}return O.prototype=L,c(j,"constructor",{value:L,configurable:!0}),c(L,"constructor",{value:O,configurable:!0}),O.displayName=_(L,g,"GeneratorFunction"),r.isGeneratorFunction=function(ne){var ae=typeof ne=="function"&&ne.constructor;return!!ae&&(ae===O||(ae.displayName||ae.name)==="GeneratorFunction")},r.mark=function(ne){return Object.setPrototypeOf?Object.setPrototypeOf(ne,L):(ne.__proto__=L,_(ne,g,"GeneratorFunction")),ne.prototype=Object.create(j),ne},r.awrap=function(ne){return{__await:ne}},z(q.prototype),_(q.prototype,v,function(){return this}),r.AsyncIterator=q,r.async=function(ne,ae,re,he,fe){fe===void 0&&(fe=Promise);var se=new q(C(ne,ae,re,he),fe);return r.isGeneratorFunction(ae)?se:se.next().then(function(de){return de.done?de.value:se.next()})},z(j),_(j,g,"Generator"),_(j,f,function(){return this}),_(j,"toString",function(){return"[object Generator]"}),r.keys=function(ne){var ae=Object(ne),re=[];for(var he in ae)re.push(he);return re.reverse(),function fe(){for(;re.length;){var se=re.pop();if(se in ae)return fe.value=se,fe.done=!1,fe}return fe.done=!0,fe}},r.values=pe,oe.prototype={constructor:oe,reset:function(ae){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(ee),!ae)for(var re in this)re.charAt(0)==="t"&&s.call(this,re)&&!isNaN(+re.slice(1))&&(this[re]=e)},stop:function(){this.done=!0;var ae=this.tryEntries[0].completion;if(ae.type==="throw")throw ae.arg;return this.rval},dispatchException:function(ae){if(this.done)throw ae;var re=this;function he(be,Re){return de.type="throw",de.arg=ae,re.next=be,Re&&(re.method="next",re.arg=e),!!Re}for(var fe=this.tryEntries.length-1;fe>=0;--fe){var se=this.tryEntries[fe],de=se.completion;if(se.tryLoc==="root")return he("end");if(se.tryLoc<=this.prev){var ve=s.call(se,"catchLoc"),ie=s.call(se,"finallyLoc");if(ve&&ie){if(this.prev<se.catchLoc)return he(se.catchLoc,!0);if(this.prev<se.finallyLoc)return he(se.finallyLoc)}else if(ve){if(this.prev<se.catchLoc)return he(se.catchLoc,!0)}else{if(!ie)throw Error("try statement without catch or finally");if(this.prev<se.finallyLoc)return he(se.finallyLoc)}}}},abrupt:function(ae,re){for(var he=this.tryEntries.length-1;he>=0;--he){var fe=this.tryEntries[he];if(fe.tryLoc<=this.prev&&s.call(fe,"finallyLoc")&&this.prev<fe.finallyLoc){var se=fe;break}}se&&(ae==="break"||ae==="continue")&&se.tryLoc<=re&&re<=se.finallyLoc&&(se=null);var de=se?se.completion:{};return de.type=ae,de.arg=re,se?(this.method="next",this.next=se.finallyLoc,N):this.complete(de)},complete:function(ae,re){if(ae.type==="throw")throw ae.arg;return ae.type==="break"||ae.type==="continue"?this.next=ae.arg:ae.type==="return"?(this.rval=this.arg=ae.arg,this.method="return",this.next="end"):ae.type==="normal"&&re&&(this.next=re),N},finish:function(ae){for(var re=this.tryEntries.length-1;re>=0;--re){var he=this.tryEntries[re];if(he.finallyLoc===ae)return this.complete(he.completion,he.afterLoc),ee(he),N}},catch:function(ae){for(var re=this.tryEntries.length-1;re>=0;--re){var he=this.tryEntries[re];if(he.tryLoc===ae){var fe=he.completion;if(fe.type==="throw"){var se=fe.arg;ee(he)}return se}}throw Error("illegal catch attempt")},delegateYield:function(ae,re,he){return this.delegate={iterator:pe(ae),resultName:re,nextLoc:he},this.method==="next"&&(this.arg=e),N}},r}function g9(e,r,o,s,c,d,f){try{var v=e[d](f),g=v.value}catch(_){return void o(_)}v.done?r(g):Promise.resolve(g).then(s,c)}function nf(e){return function(){var r=this,o=arguments;return new Promise(function(s,c){var d=e.apply(r,o);function f(g){g9(d,s,c,f,v,"next",g)}function v(g){g9(d,s,c,f,v,"throw",g)}f(void 0)})}}var Yv=_e({},sEe),Gbe=Yv.version,CO=Yv.render,Kbe=Yv.unmountComponentAtNode,rT;try{var qbe=Number((Gbe||"").split(".")[0]);qbe>=18&&(rT=Yv.createRoot)}catch{}function v9(e){var r=Yv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;r&&on(r)==="object"&&(r.usingClientEntryPoint=e)}var WC="__rc_react_root__";function Ybe(e,r){v9(!0);var o=r[WC]||rT(r);v9(!1),o.render(e),r[WC]=o}function Xbe(e,r){CO==null||CO(e,r)}function Jbe(e,r){if(rT){Ybe(e,r);return}Xbe(e,r)}function Qbe(e){return SP.apply(this,arguments)}function SP(){return SP=nf(xa().mark(function e(r){return xa().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Promise.resolve().then(function(){var c;(c=r[WC])===null||c===void 0||c.unmount(),delete r[WC]}));case 1:case"end":return s.stop()}},e)})),SP.apply(this,arguments)}function Zbe(e){Kbe(e)}function eTe(e){return yP.apply(this,arguments)}function yP(){return yP=nf(xa().mark(function e(r){return xa().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(rT===void 0){s.next=2;break}return s.abrupt("return",Qbe(r));case 2:Zbe(r);case 3:case"end":return s.stop()}},e)})),yP.apply(this,arguments)}const tTe=(e,r)=>(Jbe(e,r),()=>eTe(r));let nTe=tTe;function wX(){return nTe}const bO=()=>({height:0,opacity:0}),E9=e=>{const{scrollHeight:r}=e;return{height:r,opacity:1}},rTe=e=>({height:e?e.offsetHeight:0}),TO=(e,r)=>(r==null?void 0:r.deadline)===!0||r.propertyName==="height",iTe=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:Av}-motion-collapse`,onAppearStart:bO,onEnterStart:bO,onAppearActive:E9,onEnterActive:E9,onLeaveStart:rTe,onLeaveActive:bO,onAppearEnd:TO,onEnterEnd:TO,onLeaveEnd:TO,motionDeadline:500}},IX=(e,r,o)=>o!==void 0?o:`${e}-${r}`,CP=iTe;function na(e,r){var o=Object.assign({},e);return Array.isArray(r)&&r.forEach(function(s){delete o[s]}),o}const iT=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var r=e.getBBox(),o=r.width,s=r.height;if(o||s)return!0}if(e.getBoundingClientRect){var c=e.getBoundingClientRect(),d=c.width,f=c.height;if(d||f)return!0}}return!1},oTe=e=>{const{componentCls:r,colorPrimary:o}=e;return{[r]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${o})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut}`,`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`].join(",")}}}}},aTe=nCe("Wave",e=>[oTe(e)]),AX=`${Av}-wave-target`;function RO(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function sTe(e){const{borderTopColor:r,borderColor:o,backgroundColor:s}=getComputedStyle(e);return RO(r)?r:RO(o)?o:RO(s)?s:null}function wO(e){return Number.isNaN(e)?0:e}const cTe=e=>{const{className:r,target:o,component:s,registerUnmount:c}=e,d=S.useRef(null),f=S.useRef(null);S.useEffect(()=>{f.current=c()},[]);const[v,g]=S.useState(null),[_,C]=S.useState([]),[b,T]=S.useState(0),[I,w]=S.useState(0),[x,N]=S.useState(0),[P,O]=S.useState(0),[L,M]=S.useState(!1),F={left:b,top:I,width:x,height:P,borderRadius:_.map(z=>`${z}px`).join(" ")};v&&(F["--wave-color"]=v);function V(){const z=getComputedStyle(o);g(sTe(o));const q=z.position==="static",{borderLeftWidth:W,borderTopWidth:J}=z;T(q?o.offsetLeft:wO(-parseFloat(W))),w(q?o.offsetTop:wO(-parseFloat(J))),N(o.offsetWidth),O(o.offsetHeight);const{borderTopLeftRadius:te,borderTopRightRadius:ee,borderBottomLeftRadius:oe,borderBottomRightRadius:pe}=z;C([te,ee,pe,oe].map(ne=>wO(parseFloat(ne))))}if(S.useEffect(()=>{if(o){const z=oi(()=>{V(),M(!0)});let q;return typeof ResizeObserver<"u"&&(q=new ResizeObserver(V),q.observe(o)),()=>{oi.cancel(z),q==null||q.disconnect()}}},[]),!L)return null;const j=(s==="Checkbox"||s==="Radio")&&(o==null?void 0:o.classList.contains(AX));return S.createElement(ef,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(z,q)=>{var W,J;if(q.deadline||q.propertyName==="opacity"){const te=(W=d.current)===null||W===void 0?void 0:W.parentElement;(J=f.current)===null||J===void 0||J.call(f).then(()=>{te==null||te.remove()})}return!1}},(z,q)=>{let{className:W}=z;return S.createElement("div",{ref:qc(d,q),className:$e(r,W,{"wave-quick":j}),style:F})})},lTe=(e,r)=>{var o;const{component:s}=r;if(s==="Checkbox"&&!(!((o=e.querySelector("input"))===null||o===void 0)&&o.checked))return;const c=document.createElement("div");c.style.position="absolute",c.style.left="0px",c.style.top="0px",e==null||e.insertBefore(c,e==null?void 0:e.firstChild);const d=wX();let f=null;function v(){return f}f=d(S.createElement(cTe,Object.assign({},r,{target:e,registerUnmount:v})),c)},uTe=lTe,dTe=(e,r,o)=>{const{wave:s}=S.useContext(br),[,c,d]=ns(),f=uo(_=>{const C=e.current;if(s!=null&&s.disabled||!C)return;const b=C.querySelector(`.${AX}`)||C,{showEffect:T}=s||{};(T||uTe)(b,{className:r,token:c,component:o,event:_,hashId:d})}),v=S.useRef(null);return _=>{oi.cancel(v.current),v.current=oi(()=>{f(_)})}},hTe=dTe,fTe=e=>{const{children:r,disabled:o,component:s}=e,{getPrefixCls:c}=S.useContext(br),d=S.useRef(null),f=c("wave"),[,v]=aTe(f),g=hTe(d,$e(f,v),s);if(Ve.useEffect(()=>{const C=d.current;if(!C||C.nodeType!==1||o)return;const b=T=>{!iT(T.target)||!C.getAttribute||C.getAttribute("disabled")||C.disabled||C.className.includes("disabled")||C.className.includes("-leave")||g(T)};return C.addEventListener("click",b,!0),()=>{C.removeEventListener("click",b,!0)}},[o]),!Ve.isValidElement(r))return r??null;const _=Om(r)?qc(Wv(r),d):d;return dc(r,{ref:_})},pTe=fTe,mTe=e=>{const r=Ve.useContext(Kv);return Ve.useMemo(()=>e?typeof e=="string"?e??r:e instanceof Function?e(r):r:r,[e,r])},Su=mTe;globalThis&&globalThis.__rest;const OX=S.createContext(null),Xv=(e,r)=>{const o=S.useContext(OX),s=S.useMemo(()=>{if(!o)return"";const{compactDirection:c,isFirstItem:d,isLastItem:f}=o,v=c==="vertical"?"-vertical-":"-";return $e(`${e}-compact${v}item`,{[`${e}-compact${v}first-item`]:d,[`${e}-compact${v}last-item`]:f,[`${e}-compact${v}item-rtl`]:r==="rtl"})},[e,r,o]);return{compactSize:o==null?void 0:o.compactSize,compactDirection:o==null?void 0:o.compactDirection,compactItemClassnames:s}},gTe=e=>{const{children:r}=e;return S.createElement(OX.Provider,{value:null},r)};var vTe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const xX=S.createContext(void 0),ETe=e=>{const{getPrefixCls:r,direction:o}=S.useContext(br),{prefixCls:s,size:c,className:d}=e,f=vTe(e,["prefixCls","size","className"]),v=r("btn-group",s),[,,g]=ns(),_=S.useMemo(()=>{switch(c){case"large":return"lg";case"small":return"sm";default:return""}},[c]),C=$e(v,{[`${v}-${_}`]:_,[`${v}-rtl`]:o==="rtl"},d,g);return S.createElement(xX.Provider,{value:c},S.createElement("div",Object.assign({},f,{className:C})))},_Te=ETe,_9=/^[\u4E00-\u9FA5]{2}$/,bP=_9.test.bind(_9);function S9(e){return typeof e=="string"}function IO(e){return e==="text"||e==="link"}function STe(e,r){if(e==null)return;const o=r?" ":"";return typeof e!="string"&&typeof e!="number"&&S9(e.type)&&bP(e.props.children)?dc(e,{children:e.props.children.split("").join(o)}):S9(e)?bP(e)?Ve.createElement("span",null,e.split("").join(o)):Ve.createElement("span",null,e):yX(e)?Ve.createElement("span",null,e):e}function yTe(e,r){let o=!1;const s=[];return Ve.Children.forEach(e,c=>{const d=typeof c,f=d==="string"||d==="number";if(o&&f){const v=s.length-1,g=s[v];s[v]=`${g}${c}`}else s.push(c);o=f}),Ve.Children.map(s,c=>STe(c,r))}["default","primary","danger"].concat(vt(zh));const CTe=S.forwardRef((e,r)=>{const{className:o,style:s,children:c,prefixCls:d}=e,f=$e(`${d}-icon`,o);return Ve.createElement("span",{ref:r,className:f,style:s},c)}),TP=CTe,y9=S.forwardRef((e,r)=>{const{prefixCls:o,className:s,style:c,iconClassName:d}=e,f=$e(`${o}-loading-icon`,s);return Ve.createElement(TP,{prefixCls:o,className:f,style:c,ref:r},Ve.createElement(nT,{className:d}))}),AO=()=>({width:0,opacity:0,transform:"scale(0)"}),OO=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),bTe=e=>{const{prefixCls:r,loading:o,existIcon:s,className:c,style:d,mount:f}=e,v=!!o;return s?Ve.createElement(y9,{prefixCls:r,className:c,style:d}):Ve.createElement(ef,{visible:v,motionName:`${r}-loading-icon-motion`,motionAppear:!f,motionEnter:!f,motionLeave:!f,removeOnLeave:!0,onAppearStart:AO,onAppearActive:OO,onEnterStart:AO,onEnterActive:OO,onLeaveStart:OO,onLeaveActive:AO},(g,_)=>{let{className:C,style:b}=g;const T=Object.assign(Object.assign({},d),b);return Ve.createElement(y9,{prefixCls:r,className:$e(c,C),style:T,ref:_})})},TTe=bTe,C9=(e,r)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:r}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:r}}}}}),RTe=e=>{const{componentCls:r,fontSize:o,lineWidth:s,groupBorderColor:c,colorErrorHover:d}=e;return{[`${r}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${r}`]:{"&:not(:last-child)":{[`&, & > ${r}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:e.calc(s).mul(-1).equal(),[`&, & > ${r}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[r]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${r}-icon-only`]:{fontSize:o}},C9(`${r}-primary`,c),C9(`${r}-danger`,d)]}},wTe=RTe;var ITe=["b"],ATe=["v"],xO=function(r){return Math.round(Number(r||0))},OTe=function(r){if(r instanceof qr)return r;if(r&&on(r)==="object"&&"h"in r&&"b"in r){var o=r,s=o.b,c=An(o,ITe);return _e(_e({},c),{},{v:s})}return typeof r=="string"&&/hsb/.test(r)?r.replace(/hsb/,"hsv"):r},Ov=function(e){Ml(o,e);var r=Fl(o);function o(s){return io(this,o),r.call(this,OTe(s))}return oo(o,[{key:"toHsbString",value:function(){var c=this.toHsb(),d=xO(c.s*100),f=xO(c.b*100),v=xO(c.h),g=c.a,_="hsb(".concat(v,", ").concat(d,"%, ").concat(f,"%)"),C="hsba(".concat(v,", ").concat(d,"%, ").concat(f,"%, ").concat(g.toFixed(g===0?0:2),")");return g===1?_:C}},{key:"toHsb",value:function(){var c=this.toHsv(),d=c.v,f=An(c,ATe);return _e(_e({},f),{},{b:d,a:this.a})}}]),o}(qr),xTe=function(r){return r instanceof Ov?r:new Ov(r)};xTe("#1677ff");const NTe=(e,r)=>(e==null?void 0:e.replace(/[^\w/]/g,"").slice(0,r?8:6))||"",PTe=(e,r)=>e?NTe(e,r):"";let DTe=function(){function e(r){io(this,e);var o;if(this.cleared=!1,r instanceof e){this.metaColor=r.metaColor.clone(),this.colors=(o=r.colors)===null||o===void 0?void 0:o.map(c=>({color:new e(c.color),percent:c.percent})),this.cleared=r.cleared;return}const s=Array.isArray(r);s&&r.length?(this.colors=r.map(c=>{let{color:d,percent:f}=c;return{color:new e(d),percent:f}}),this.metaColor=new Ov(this.colors[0].color.metaColor)):this.metaColor=new Ov(s?"":r),(!r||s&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return oo(e,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return PTe(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:o}=this;return o?`linear-gradient(90deg, ${o.map(c=>`${c.color.toRgbString()} ${c.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(o){return!o||this.isGradient()!==o.isGradient()?!1:this.isGradient()?this.colors.length===o.colors.length&&this.colors.every((s,c)=>{const d=o.colors[c];return s.percent===d.percent&&s.color.equals(d.color)}):this.toHexString()===o.toHexString()}}])}();var LTe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};const kTe=LTe;var MTe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:kTe}))},FTe=S.forwardRef(MTe);const GC=FTe,UTe=e=>({[e.componentCls]:{[`${e.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}},[`${e.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}}}),NX=UTe,BTe=e=>({animationDuration:e,animationFillMode:"both"}),VTe=e=>({animationDuration:e,animationFillMode:"both"}),S2=function(e,r,o,s){const d=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${d}${e}-enter,
      ${d}${e}-appear
    `]:Object.assign(Object.assign({},BTe(s)),{animationPlayState:"paused"}),[`${d}${e}-leave`]:Object.assign(Object.assign({},VTe(s)),{animationPlayState:"paused"}),[`
      ${d}${e}-enter${e}-enter-active,
      ${d}${e}-appear${e}-appear-active
    `]:{animationName:r,animationPlayState:"running"},[`${d}${e}-leave${e}-leave-active`]:{animationName:o,animationPlayState:"running",pointerEvents:"none"}}},jTe=new mr("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),$Te=new mr("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),HTe=new mr("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),zTe=new mr("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),WTe=new mr("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),GTe=new mr("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),KTe=new mr("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),qTe=new mr("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),YTe={"move-up":{inKeyframes:KTe,outKeyframes:qTe},"move-down":{inKeyframes:jTe,outKeyframes:$Te},"move-left":{inKeyframes:HTe,outKeyframes:zTe},"move-right":{inKeyframes:WTe,outKeyframes:GTe}},b9=(e,r)=>{const{antCls:o}=e,s=`${o}-${r}`,{inKeyframes:c,outKeyframes:d}=YTe[r];return[S2(s,c,d,e.motionDurationMid),{[`
        ${s}-enter,
        ${s}-appear
      `]:{opacity:0,animationTimingFunction:e.motionEaseOutCirc},[`${s}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},PX=new mr("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),DX=new mr("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),LX=new mr("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),kX=new mr("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),XTe=new mr("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),JTe=new mr("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),QTe=new mr("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),ZTe=new mr("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),eRe={"slide-up":{inKeyframes:PX,outKeyframes:DX},"slide-down":{inKeyframes:LX,outKeyframes:kX},"slide-left":{inKeyframes:XTe,outKeyframes:JTe},"slide-right":{inKeyframes:QTe,outKeyframes:ZTe}},KC=(e,r)=>{const{antCls:o}=e,s=`${o}-${r}`,{inKeyframes:c,outKeyframes:d}=eRe[r];return[S2(s,c,d,e.motionDurationMid),{[`
      ${s}-enter,
      ${s}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${s}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]},y2=new mr("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),tRe=new mr("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),T9=new mr("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),R9=new mr("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),nRe=new mr("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),rRe=new mr("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),iRe=new mr("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),oRe=new mr("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),aRe=new mr("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),sRe=new mr("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),cRe=new mr("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),lRe=new mr("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),uRe={zoom:{inKeyframes:y2,outKeyframes:tRe},"zoom-big":{inKeyframes:T9,outKeyframes:R9},"zoom-big-fast":{inKeyframes:T9,outKeyframes:R9},"zoom-left":{inKeyframes:iRe,outKeyframes:oRe},"zoom-right":{inKeyframes:aRe,outKeyframes:sRe},"zoom-up":{inKeyframes:nRe,outKeyframes:rRe},"zoom-down":{inKeyframes:cRe,outKeyframes:lRe}},MX=(e,r)=>{const{antCls:o}=e,s=`${o}-${r}`,{inKeyframes:c,outKeyframes:d}=uRe[r];return[S2(s,c,d,r==="zoom-big-fast"?e.motionDurationFast:e.motionDurationMid),{[`
        ${s}-enter,
        ${s}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${s}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},dRe=(e,r)=>{const{r:o,g:s,b:c,a:d}=e.toRgb(),f=new Ov(e.toRgbString()).onBackground(r).toHsv();return d<=.5?f.v>.5:o*.299+s*.587+c*.114>192},FX=e=>{const{paddingInline:r,onlyIconSize:o}=e;return ai(e,{buttonPaddingHorizontal:r,buttonPaddingVertical:0,buttonIconOnlyFontSize:o})},UX=e=>{var r,o,s,c,d,f;const v=(r=e.contentFontSize)!==null&&r!==void 0?r:e.fontSize,g=(o=e.contentFontSizeSM)!==null&&o!==void 0?o:e.fontSize,_=(s=e.contentFontSizeLG)!==null&&s!==void 0?s:e.fontSizeLG,C=(c=e.contentLineHeight)!==null&&c!==void 0?c:nC(v),b=(d=e.contentLineHeightSM)!==null&&d!==void 0?d:nC(g),T=(f=e.contentLineHeightLG)!==null&&f!==void 0?f:nC(_),I=dRe(new DTe(e.colorBgSolid),"#fff")?"#000":"#fff",w=zh.reduce((x,N)=>Object.assign(Object.assign({},x),{[`${N}ShadowColor`]:`0 ${Ge(e.controlOutlineWidth)} 0 ${Mg(e[`${N}1`],e.colorBgContainer)}`}),{});return Object.assign(Object.assign({},w),{fontWeight:400,defaultShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`,primaryShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`,dangerShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`,primaryColor:e.colorTextLightSolid,dangerColor:e.colorTextLightSolid,borderColorDisabled:e.colorBorder,defaultGhostColor:e.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:e.colorBgContainer,paddingInline:e.paddingContentHorizontal-e.lineWidth,paddingInlineLG:e.paddingContentHorizontal-e.lineWidth,paddingInlineSM:8-e.lineWidth,onlyIconSize:"inherit",onlyIconSizeSM:"inherit",onlyIconSizeLG:"inherit",groupBorderColor:e.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:e.colorText,textTextHoverColor:e.colorText,textTextActiveColor:e.colorText,textHoverBg:e.colorFillTertiary,defaultColor:e.colorText,defaultBg:e.colorBgContainer,defaultBorderColor:e.colorBorder,defaultBorderColorDisabled:e.colorBorder,defaultHoverBg:e.colorBgContainer,defaultHoverColor:e.colorPrimaryHover,defaultHoverBorderColor:e.colorPrimaryHover,defaultActiveBg:e.colorBgContainer,defaultActiveColor:e.colorPrimaryActive,defaultActiveBorderColor:e.colorPrimaryActive,solidTextColor:I,contentFontSize:v,contentFontSizeSM:g,contentFontSizeLG:_,contentLineHeight:C,contentLineHeightSM:b,contentLineHeightLG:T,paddingBlock:Math.max((e.controlHeight-v*C)/2-e.lineWidth,0),paddingBlockSM:Math.max((e.controlHeightSM-g*b)/2-e.lineWidth,0),paddingBlockLG:Math.max((e.controlHeightLG-_*T)/2-e.lineWidth,0)})},hRe=e=>{const{componentCls:r,iconCls:o,fontWeight:s,opacityLoading:c,motionDurationSlow:d,motionEaseInOut:f,marginXS:v,calc:g}=e;return{[r]:{outline:"none",position:"relative",display:"inline-flex",gap:e.marginXS,alignItems:"center",justifyContent:"center",fontWeight:s,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${Ge(e.lineWidth)} ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:e.colorText,"&:disabled > *":{pointerEvents:"none"},[`${r}-icon > svg`]:qv(),"> a":{color:"currentColor"},"&:not(:disabled)":Jb(e),[`&${r}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${r}-two-chinese-chars > *:not(${o})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&${r}-icon-only`]:{paddingInline:0,[`&${r}-compact-item`]:{flex:"none"},[`&${r}-round`]:{width:"auto"}},[`&${r}-loading`]:{opacity:c,cursor:"default"},[`${r}-loading-icon`]:{transition:["width","opacity","margin"].map(_=>`${_} ${d} ${f}`).join(",")},[`&:not(${r}-icon-end)`]:{[`${r}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineEnd:g(v).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineEnd:0},"&-leave-start":{marginInlineEnd:0},"&-leave-active":{marginInlineEnd:g(v).mul(-1).equal()}}},"&-icon-end":{flexDirection:"row-reverse",[`${r}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineStart:g(v).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineStart:0},"&-leave-start":{marginInlineStart:0},"&-leave-active":{marginInlineStart:g(v).mul(-1).equal()}}}}}},BX=(e,r,o)=>({[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":r,"&:active":o}}),fRe=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),pRe=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.calc(e.controlHeight).div(2).equal(),paddingInlineEnd:e.calc(e.controlHeight).div(2).equal()}),mRe=e=>({cursor:"not-allowed",borderColor:e.borderColorDisabled,color:e.colorTextDisabled,background:e.colorBgContainerDisabled,boxShadow:"none"}),oT=(e,r,o,s,c,d,f,v)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:o||void 0,background:r,borderColor:s||void 0,boxShadow:"none"},BX(e,Object.assign({background:r},f),Object.assign({background:r},v))),{"&:disabled":{cursor:"not-allowed",color:c||void 0,borderColor:d||void 0}})}),gRe=e=>({[`&:disabled, &${e.componentCls}-disabled`]:Object.assign({},mRe(e))}),vRe=e=>({[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",color:e.colorTextDisabled}}),aT=(e,r,o,s)=>{const d=s&&["link","text"].includes(s)?vRe:gRe;return Object.assign(Object.assign({},d(e)),BX(e.componentCls,r,o))},sT=(e,r,o,s,c)=>({[`&${e.componentCls}-variant-solid`]:Object.assign({color:r,background:o},aT(e,s,c))}),cT=(e,r,o,s,c)=>({[`&${e.componentCls}-variant-outlined, &${e.componentCls}-variant-dashed`]:Object.assign({borderColor:r,background:o},aT(e,s,c))}),lT=e=>({[`&${e.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),uT=(e,r,o,s)=>({[`&${e.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:r},aT(e,o,s))}),Ll=(e,r,o,s,c)=>({[`&${e.componentCls}-variant-${o}`]:Object.assign({color:r,boxShadow:"none"},aT(e,s,c,o))}),ERe=e=>{const{componentCls:r}=e;return zh.reduce((o,s)=>{const c=e[`${s}6`],d=e[`${s}1`],f=e[`${s}5`],v=e[`${s}2`],g=e[`${s}3`],_=e[`${s}7`];return Object.assign(Object.assign({},o),{[`&${r}-color-${s}`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:c,boxShadow:e[`${s}ShadowColor`]},sT(e,e.colorTextLightSolid,c,{background:f},{background:_})),cT(e,c,e.colorBgContainer,{color:f,borderColor:f,background:e.colorBgContainer},{color:_,borderColor:_,background:e.colorBgContainer})),lT(e)),uT(e,d,{background:v},{background:g})),Ll(e,c,"link",{color:f},{color:_})),Ll(e,c,"text",{color:f,background:d},{color:_,background:g}))})},{})},_Re=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.defaultColor,boxShadow:e.defaultShadow},sT(e,e.solidTextColor,e.colorBgSolid,{color:e.solidTextColor,background:e.colorBgSolidHover},{color:e.solidTextColor,background:e.colorBgSolidActive})),lT(e)),uT(e,e.colorFillTertiary,{background:e.colorFillSecondary},{background:e.colorFill})),oT(e.componentCls,e.ghostBg,e.defaultGhostColor,e.defaultGhostBorderColor,e.colorTextDisabled,e.colorBorder)),Ll(e,e.textTextColor,"link",{color:e.colorLinkHover,background:e.linkHoverBg},{color:e.colorLinkActive})),SRe=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorPrimary,boxShadow:e.primaryShadow},cT(e,e.colorPrimary,e.colorBgContainer,{color:e.colorPrimaryTextHover,borderColor:e.colorPrimaryHover,background:e.colorBgContainer},{color:e.colorPrimaryTextActive,borderColor:e.colorPrimaryActive,background:e.colorBgContainer})),lT(e)),uT(e,e.colorPrimaryBg,{background:e.colorPrimaryBgHover},{background:e.colorPrimaryBorder})),Ll(e,e.colorPrimaryText,"text",{color:e.colorPrimaryTextHover,background:e.colorPrimaryBg},{color:e.colorPrimaryTextActive,background:e.colorPrimaryBorder})),Ll(e,e.colorPrimaryText,"link",{color:e.colorPrimaryTextHover,background:e.linkHoverBg},{color:e.colorPrimaryTextActive})),oT(e.componentCls,e.ghostBg,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),yRe=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorError,boxShadow:e.dangerShadow},sT(e,e.dangerColor,e.colorError,{background:e.colorErrorHover},{background:e.colorErrorActive})),cT(e,e.colorError,e.colorBgContainer,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),lT(e)),uT(e,e.colorErrorBg,{background:e.colorErrorBgFilledHover},{background:e.colorErrorBgActive})),Ll(e,e.colorError,"text",{color:e.colorErrorHover,background:e.colorErrorBg},{color:e.colorErrorHover,background:e.colorErrorBgActive})),Ll(e,e.colorError,"link",{color:e.colorErrorHover},{color:e.colorErrorActive})),oT(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),CRe=e=>Object.assign(Object.assign({},Ll(e,e.colorLink,"link",{color:e.colorLinkHover},{color:e.colorLinkActive})),oT(e.componentCls,e.ghostBg,e.colorInfo,e.colorInfo,e.colorTextDisabled,e.colorBorder,{color:e.colorInfoHover,borderColor:e.colorInfoHover},{color:e.colorInfoActive,borderColor:e.colorInfoActive})),bRe=e=>{const{componentCls:r}=e;return Object.assign({[`${r}-color-default`]:_Re(e),[`${r}-color-primary`]:SRe(e),[`${r}-color-dangerous`]:yRe(e),[`${r}-color-link`]:CRe(e)},ERe(e))},TRe=e=>Object.assign(Object.assign(Object.assign(Object.assign({},cT(e,e.defaultBorderColor,e.defaultBg,{color:e.defaultHoverColor,borderColor:e.defaultHoverBorderColor,background:e.defaultHoverBg},{color:e.defaultActiveColor,borderColor:e.defaultActiveBorderColor,background:e.defaultActiveBg})),Ll(e,e.textTextColor,"text",{color:e.textTextHoverColor,background:e.textHoverBg},{color:e.textTextActiveColor,background:e.colorBgTextActive})),sT(e,e.primaryColor,e.colorPrimary,{background:e.colorPrimaryHover,color:e.primaryColor},{background:e.colorPrimaryActive,color:e.primaryColor})),Ll(e,e.colorLink,"link",{color:e.colorLinkHover,background:e.linkHoverBg},{color:e.colorLinkActive})),C2=function(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:o,controlHeight:s,fontSize:c,borderRadius:d,buttonPaddingHorizontal:f,iconCls:v,buttonPaddingVertical:g,buttonIconOnlyFontSize:_}=e;return[{[r]:{fontSize:c,height:s,padding:`${Ge(g)} ${Ge(f)}`,borderRadius:d,[`&${o}-icon-only`]:{width:s,[v]:{fontSize:_}}}},{[`${o}${o}-circle${r}`]:fRe(e)},{[`${o}${o}-round${r}`]:pRe(e)}]},RRe=e=>{const r=ai(e,{fontSize:e.contentFontSize});return C2(r,e.componentCls)},wRe=e=>{const r=ai(e,{controlHeight:e.controlHeightSM,fontSize:e.contentFontSizeSM,padding:e.paddingXS,buttonPaddingHorizontal:e.paddingInlineSM,buttonPaddingVertical:0,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.onlyIconSizeSM});return C2(r,`${e.componentCls}-sm`)},IRe=e=>{const r=ai(e,{controlHeight:e.controlHeightLG,fontSize:e.contentFontSizeLG,buttonPaddingHorizontal:e.paddingInlineLG,buttonPaddingVertical:0,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.onlyIconSizeLG});return C2(r,`${e.componentCls}-lg`)},ARe=e=>{const{componentCls:r}=e;return{[r]:{[`&${r}-block`]:{width:"100%"}}}},ORe=To("Button",e=>{const r=FX(e);return[hRe(r),RRe(r),wRe(r),IRe(r),ARe(r),bRe(r),TRe(r),wTe(r)]},UX,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function xRe(e,r,o){const{focusElCls:s,focus:c,borderElCls:d}=o,f=d?"> *":"",v=["hover",c?"focus":null,"active"].filter(Boolean).map(g=>`&:${g} ${f}`).join(",");return{[`&-item:not(${r}-last-item)`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[v]:{zIndex:2}},s?{[`&${s}`]:{zIndex:2}}:{}),{[`&[disabled] ${f}`]:{zIndex:0}})}}function NRe(e,r,o){const{borderElCls:s}=o,c=s?`> ${s}`:"";return{[`&-item:not(${r}-first-item):not(${r}-last-item) ${c}`]:{borderRadius:0},[`&-item:not(${r}-last-item)${r}-first-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${r}-first-item)${r}-last-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function b2(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:o}=e,s=`${o}-compact`;return{[s]:Object.assign(Object.assign({},xRe(e,s,r)),NRe(o,s,r))}}function PRe(e,r){return{[`&-item:not(${r}-last-item)`]:{marginBottom:e.calc(e.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function DRe(e,r){return{[`&-item:not(${r}-first-item):not(${r}-last-item)`]:{borderRadius:0},[`&-item${r}-first-item:not(${r}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${r}-last-item:not(${r}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function LRe(e){const r=`${e.componentCls}-compact-vertical`;return{[r]:Object.assign(Object.assign({},PRe(e,r)),DRe(e.componentCls,r))}}const kRe=e=>{const{componentCls:r,colorPrimaryHover:o,lineWidth:s,calc:c}=e,d=c(s).mul(-1).equal(),f=v=>{const g=`${r}-compact${v?"-vertical":""}-item${r}-primary:not([disabled])`;return{[`${g} + ${g}::before`]:{position:"absolute",top:v?d:0,insetInlineStart:v?0:d,backgroundColor:o,content:'""',width:v?"100%":s,height:v?s:"100%"}}};return Object.assign(Object.assign({},f()),f(!0))},MRe=Qb(["Button","compact"],e=>{const r=FX(e);return[b2(r),LRe(r),kRe(r)]},UX);var FRe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function URe(e){if(typeof e=="object"&&e){let r=e==null?void 0:e.delay;return r=!Number.isNaN(r)&&typeof r=="number"?r:0,{loading:r<=0,delay:r}}return{loading:!!e,delay:0}}const BRe={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["link","link"],text:["default","text"]},VRe=Ve.forwardRef((e,r)=>{var o,s;const{loading:c=!1,prefixCls:d,color:f,variant:v,type:g,danger:_=!1,shape:C="default",size:b,styles:T,disabled:I,className:w,rootClassName:x,children:N,icon:P,iconPosition:O="start",ghost:L=!1,block:M=!1,htmlType:F="button",classNames:V,style:j={},autoInsertSpace:z,autoFocus:q}=e,W=FRe(e,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace","autoFocus"]),J=g||"default",[te,ee]=S.useMemo(()=>{if(f&&v)return[f,v];const It=BRe[J]||[];return _?["danger",It[1]]:It},[g,f,v,_]),pe=te==="danger"?"dangerous":te,{getPrefixCls:ne,direction:ae,autoInsertSpace:re,className:he,style:fe,classNames:se,styles:de}=fc("button"),ve=(o=z??re)!==null&&o!==void 0?o:!0,ie=ne("btn",d),[be,Re,Pe]=ORe(ie),Ie=S.useContext(Zh),xe=I??Ie,We=S.useContext(xX),De=S.useMemo(()=>URe(c),[c]),[Ae,je]=S.useState(De.loading),[Je,Fe]=S.useState(!1),ke=S.useRef(null),ht=Am(r,ke),Ze=S.Children.count(N)===1&&!P&&!IO(ee),mt=S.useRef(!0);Ve.useEffect(()=>(mt.current=!1,()=>{mt.current=!0}),[]),S.useEffect(()=>{let It=null;De.delay>0?It=setTimeout(()=>{It=null,je(!0)},De.delay):je(De.loading);function ft(){It&&(clearTimeout(It),It=null)}return ft},[De]),S.useEffect(()=>{if(!ke.current||!ve)return;const It=ke.current.textContent||"";Ze&&bP(It)?Je||Fe(!0):Je&&Fe(!1)}),S.useEffect(()=>{q&&ke.current&&ke.current.focus()},[]);const Rt=Ve.useCallback(It=>{var ft;if(Ae||xe){It.preventDefault();return}(ft=e.onClick)===null||ft===void 0||ft.call(e,("href"in e,It))},[e.onClick,Ae,xe]),{compactSize:ut,compactItemClassnames:ot}=Xv(ie,ae),ze={large:"lg",small:"sm",middle:void 0},tt=Su(It=>{var ft,Pt;return(Pt=(ft=b??ut)!==null&&ft!==void 0?ft:We)!==null&&Pt!==void 0?Pt:It}),bt=tt&&(s=ze[tt])!==null&&s!==void 0?s:"",Nt=Ae?"loading":P,wt=na(W,["navigate"]),Xt=$e(ie,Re,Pe,{[`${ie}-${C}`]:C!=="default"&&C,[`${ie}-${J}`]:J,[`${ie}-dangerous`]:_,[`${ie}-color-${pe}`]:pe,[`${ie}-variant-${ee}`]:ee,[`${ie}-${bt}`]:bt,[`${ie}-icon-only`]:!N&&N!==0&&!!Nt,[`${ie}-background-ghost`]:L&&!IO(ee),[`${ie}-loading`]:Ae,[`${ie}-two-chinese-chars`]:Je&&ve&&!Ae,[`${ie}-block`]:M,[`${ie}-rtl`]:ae==="rtl",[`${ie}-icon-end`]:O==="end"},ot,w,x,he),$t=Object.assign(Object.assign({},fe),j),Lt=$e(V==null?void 0:V.icon,se.icon),Wt=Object.assign(Object.assign({},(T==null?void 0:T.icon)||{}),de.icon||{}),Jt=P&&!Ae?Ve.createElement(TP,{prefixCls:ie,className:Lt,style:Wt},P):c&&typeof c=="object"&&c.icon?Ve.createElement(TP,{prefixCls:ie,className:Lt,style:Wt},c.icon):Ve.createElement(TTe,{existIcon:!!P,prefixCls:ie,loading:Ae,mount:mt.current}),Ft=N||N===0?yTe(N,Ze&&ve):null;if(wt.href!==void 0)return be(Ve.createElement("a",Object.assign({},wt,{className:$e(Xt,{[`${ie}-disabled`]:xe}),href:xe?void 0:wt.href,style:$t,onClick:Rt,ref:ht,tabIndex:xe?-1:0}),Jt,Ft));let yt=Ve.createElement("button",Object.assign({},W,{type:F,className:Xt,style:$t,onClick:Rt,disabled:xe,ref:ht}),Jt,Ft,ot&&Ve.createElement(MRe,{prefixCls:ie}));return IO(ee)||(yt=Ve.createElement(pTe,{component:"Button",disabled:Ae},yt)),be(yt)}),T2=VRe;T2.Group=_Te;T2.__ANT_BUTTON=!0;const po=T2;var VX=S.createContext(null),w9=[];function jRe(e,r){var o=S.useState(function(){if(!Oa())return null;var w=document.createElement("div");return w}),s=Ue(o,1),c=s[0],d=S.useRef(!1),f=S.useContext(VX),v=S.useState(w9),g=Ue(v,2),_=g[0],C=g[1],b=f||(d.current?void 0:function(w){C(function(x){var N=[w].concat(vt(x));return N})});function T(){c.parentElement||document.body.appendChild(c),d.current=!0}function I(){var w;(w=c.parentElement)===null||w===void 0||w.removeChild(c),d.current=!1}return Cr(function(){return e?f?f(T):T():I(),I},[e]),Cr(function(){_.length&&(_.forEach(function(w){return w()}),C(w9))},[_]),[c,b]}function $Re(e){var r="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),o=document.createElement("div");o.id=r;var s=o.style;s.position="absolute",s.left="0",s.top="0",s.width="100px",s.height="100px",s.overflow="scroll";var c,d;if(e){var f=getComputedStyle(e);s.scrollbarColor=f.scrollbarColor,s.scrollbarWidth=f.scrollbarWidth;var v=getComputedStyle(e,"::-webkit-scrollbar"),g=parseInt(v.width,10),_=parseInt(v.height,10);try{var C=g?"width: ".concat(v.width,";"):"",b=_?"height: ".concat(v.height,";"):"";cu(`
#`.concat(r,`::-webkit-scrollbar {
`).concat(C,`
`).concat(b,`
}`),r)}catch(w){console.error(w),c=g,d=_}}document.body.appendChild(o);var T=e&&c&&!isNaN(c)?c:o.offsetWidth-o.clientWidth,I=e&&d&&!isNaN(d)?d:o.offsetHeight-o.clientHeight;return document.body.removeChild(o),bv(r),{width:T,height:I}}function HRe(e){return typeof document>"u"||!e||!(e instanceof Element)?{width:0,height:0}:$Re(e)}function zRe(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var WRe="rc-util-locker-".concat(Date.now()),I9=0;function GRe(e){var r=!!e,o=S.useState(function(){return I9+=1,"".concat(WRe,"_").concat(I9)}),s=Ue(o,1),c=s[0];Cr(function(){if(r){var d=HRe(document.body).width,f=zRe();cu(`
html body {
  overflow-y: hidden;
  `.concat(f?"width: calc(100% - ".concat(d,"px);"):"",`
}`),c)}else bv(c);return function(){bv(c)}},[r,c])}var A9=!1;function KRe(e){return typeof e=="boolean"&&(A9=e),A9}var O9=function(r){return r===!1?!1:!Oa()||!r?null:typeof r=="string"?document.querySelector(r):typeof r=="function"?r():r},jX=S.forwardRef(function(e,r){var o=e.open,s=e.autoLock,c=e.getContainer;e.debug;var d=e.autoDestroy,f=d===void 0?!0:d,v=e.children,g=S.useState(o),_=Ue(g,2),C=_[0],b=_[1],T=C||o;S.useEffect(function(){(f||o)&&b(o)},[o,f]);var I=S.useState(function(){return O9(c)}),w=Ue(I,2),x=w[0],N=w[1];S.useEffect(function(){var J=O9(c);N(J??null)});var P=jRe(T&&!x),O=Ue(P,2),L=O[0],M=O[1],F=x??L;GRe(s&&o&&Oa()&&(F===L||F===document.body));var V=null;if(v&&Om(v)&&r){var j=v;V=j.ref}var z=Am(V,r);if(!T||!Oa()||x===void 0)return null;var q=F===!1||KRe(),W=v;return r&&(W=S.cloneElement(v,{ref:z})),S.createElement(VX.Provider,{value:M},q?W:Dl.createPortal(W,F))});function qRe(){var e=_e({},Fh);return e.useId}var x9=0,N9=qRe();const $X=N9?function(r){var o=N9();return r||o}:function(r){var o=S.useState("ssr-id"),s=Ue(o,2),c=s[0],d=s[1];return S.useEffect(function(){var f=x9;x9+=1,d("rc_unique_".concat(f))},[]),r||c};var Ph="RC_FORM_INTERNAL_HOOKS",ii=function(){_a(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Gh=S.createContext({getFieldValue:ii,getFieldsValue:ii,getFieldError:ii,getFieldWarning:ii,getFieldsError:ii,isFieldsTouched:ii,isFieldTouched:ii,isFieldValidating:ii,isFieldsValidating:ii,resetFields:ii,setFields:ii,setFieldValue:ii,setFieldsValue:ii,validateFields:ii,submit:ii,getInternalHooks:function(){return ii(),{dispatch:ii,initEntityValue:ii,registerField:ii,useSubscribe:ii,setInitialValues:ii,destroyForm:ii,setCallbacks:ii,registerWatch:ii,getFields:ii,setValidateMessages:ii,setPreserve:ii,getInitialValue:ii}}}),xv=S.createContext(null);function RP(e){return e==null?[]:Array.isArray(e)?e:[e]}function YRe(e){return e&&!!e._init}function wP(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var r=JSON.parse(JSON.stringify(this));return r.clone=this.clone,r}}}var IP=wP();function XRe(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function JRe(e,r,o){if(s2())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,r);var c=new(e.bind.apply(e,s));return o&&Sv(c,o.prototype),c}function AP(e){var r=typeof Map=="function"?new Map:void 0;return AP=function(s){if(s===null||!XRe(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(s))return r.get(s);r.set(s,c)}function c(){return JRe(s,arguments,yv(this).constructor)}return c.prototype=Object.create(s.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),Sv(c,s)},AP(e)}var QRe=/%[sdj%]/g,ZRe=function(){};typeof process<"u"&&process.env;function OP(e){if(!e||!e.length)return null;var r={};return e.forEach(function(o){var s=o.field;r[s]=r[s]||[],r[s].push(o)}),r}function ys(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];var c=0,d=o.length;if(typeof e=="function")return e.apply(null,o);if(typeof e=="string"){var f=e.replace(QRe,function(v){if(v==="%%")return"%";if(c>=d)return v;switch(v){case"%s":return String(o[c++]);case"%d":return Number(o[c++]);case"%j":try{return JSON.stringify(o[c++])}catch{return"[Circular]"}break;default:return v}});return f}return e}function e1e(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function bo(e,r){return!!(e==null||r==="array"&&Array.isArray(e)&&!e.length||e1e(r)&&typeof e=="string"&&!e)}function t1e(e,r,o){var s=[],c=0,d=e.length;function f(v){s.push.apply(s,vt(v||[])),c++,c===d&&o(s)}e.forEach(function(v){r(v,f)})}function P9(e,r,o){var s=0,c=e.length;function d(f){if(f&&f.length){o(f);return}var v=s;s=s+1,v<c?r(e[v],d):o([])}d([])}function n1e(e){var r=[];return Object.keys(e).forEach(function(o){r.push.apply(r,vt(e[o]||[]))}),r}var D9=function(e){Ml(o,e);var r=Fl(o);function o(s,c){var d;return io(this,o),d=r.call(this,"Async Validation Error"),Ce(tr(d),"errors",void 0),Ce(tr(d),"fields",void 0),d.errors=s,d.fields=c,d}return oo(o)}(AP(Error));function r1e(e,r,o,s,c){if(r.first){var d=new Promise(function(T,I){var w=function(P){return s(P),P.length?I(new D9(P,OP(P))):T(c)},x=n1e(e);P9(x,o,w)});return d.catch(function(T){return T}),d}var f=r.firstFields===!0?Object.keys(e):r.firstFields||[],v=Object.keys(e),g=v.length,_=0,C=[],b=new Promise(function(T,I){var w=function(N){if(C.push.apply(C,N),_++,_===g)return s(C),C.length?I(new D9(C,OP(C))):T(c)};v.length||(s(C),T(c)),v.forEach(function(x){var N=e[x];f.indexOf(x)!==-1?P9(N,o,w):t1e(N,o,w)})});return b.catch(function(T){return T}),b}function i1e(e){return!!(e&&e.message!==void 0)}function o1e(e,r){for(var o=e,s=0;s<r.length;s++){if(o==null)return o;o=o[r[s]]}return o}function L9(e,r){return function(o){var s;return e.fullFields?s=o1e(r,e.fullFields):s=r[o.field||e.fullField],i1e(o)?(o.field=o.field||e.fullField,o.fieldValue=s,o):{message:typeof o=="function"?o():o,fieldValue:s,field:o.field||e.fullField}}}function k9(e,r){if(r){for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];on(s)==="object"&&on(e[o])==="object"?e[o]=_e(_e({},e[o]),s):e[o]=s}}return e}var Ip="enum",a1e=function(r,o,s,c,d){r[Ip]=Array.isArray(r[Ip])?r[Ip]:[],r[Ip].indexOf(o)===-1&&c.push(ys(d.messages[Ip],r.fullField,r[Ip].join(", ")))},s1e=function(r,o,s,c,d){if(r.pattern){if(r.pattern instanceof RegExp)r.pattern.lastIndex=0,r.pattern.test(o)||c.push(ys(d.messages.pattern.mismatch,r.fullField,o,r.pattern));else if(typeof r.pattern=="string"){var f=new RegExp(r.pattern);f.test(o)||c.push(ys(d.messages.pattern.mismatch,r.fullField,o,r.pattern))}}},c1e=function(r,o,s,c,d){var f=typeof r.len=="number",v=typeof r.min=="number",g=typeof r.max=="number",_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,C=o,b=null,T=typeof o=="number",I=typeof o=="string",w=Array.isArray(o);if(T?b="number":I?b="string":w&&(b="array"),!b)return!1;w&&(C=o.length),I&&(C=o.replace(_,"_").length),f?C!==r.len&&c.push(ys(d.messages[b].len,r.fullField,r.len)):v&&!g&&C<r.min?c.push(ys(d.messages[b].min,r.fullField,r.min)):g&&!v&&C>r.max?c.push(ys(d.messages[b].max,r.fullField,r.max)):v&&g&&(C<r.min||C>r.max)&&c.push(ys(d.messages[b].range,r.fullField,r.min,r.max))},HX=function(r,o,s,c,d,f){r.required&&(!s.hasOwnProperty(r.field)||bo(o,f||r.type))&&c.push(ys(d.messages.required,r.fullField))},Ty;const l1e=function(){if(Ty)return Ty;var e="[a-fA-F\\d:]",r=function(V){return V&&V.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(e,")|(?<=").concat(e,")(?=\\s|$))"):""},o="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",s="[a-fA-F\\d]{1,4}",c=["(?:".concat(s,":){7}(?:").concat(s,"|:)"),"(?:".concat(s,":){6}(?:").concat(o,"|:").concat(s,"|:)"),"(?:".concat(s,":){5}(?::").concat(o,"|(?::").concat(s,"){1,2}|:)"),"(?:".concat(s,":){4}(?:(?::").concat(s,"){0,1}:").concat(o,"|(?::").concat(s,"){1,3}|:)"),"(?:".concat(s,":){3}(?:(?::").concat(s,"){0,2}:").concat(o,"|(?::").concat(s,"){1,4}|:)"),"(?:".concat(s,":){2}(?:(?::").concat(s,"){0,3}:").concat(o,"|(?::").concat(s,"){1,5}|:)"),"(?:".concat(s,":){1}(?:(?::").concat(s,"){0,4}:").concat(o,"|(?::").concat(s,"){1,6}|:)"),"(?::(?:(?::".concat(s,"){0,5}:").concat(o,"|(?::").concat(s,"){1,7}|:))")],d="(?:%[0-9a-zA-Z]{1,})?",f="(?:".concat(c.join("|"),")").concat(d),v=new RegExp("(?:^".concat(o,"$)|(?:^").concat(f,"$)")),g=new RegExp("^".concat(o,"$")),_=new RegExp("^".concat(f,"$")),C=function(V){return V&&V.exact?v:new RegExp("(?:".concat(r(V)).concat(o).concat(r(V),")|(?:").concat(r(V)).concat(f).concat(r(V),")"),"g")};C.v4=function(F){return F&&F.exact?g:new RegExp("".concat(r(F)).concat(o).concat(r(F)),"g")},C.v6=function(F){return F&&F.exact?_:new RegExp("".concat(r(F)).concat(f).concat(r(F)),"g")};var b="(?:(?:[a-z]+:)?//)",T="(?:\\S+(?::\\S*)?@)?",I=C.v4().source,w=C.v6().source,x="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",N="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",P="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",O="(?::\\d{2,5})?",L='(?:[/?#][^\\s"]*)?',M="(?:".concat(b,"|www\\.)").concat(T,"(?:localhost|").concat(I,"|").concat(w,"|").concat(x).concat(N).concat(P,")").concat(O).concat(L);return Ty=new RegExp("(?:^".concat(M,"$)"),"i"),Ty};var M9={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Fg={integer:function(r){return Fg.number(r)&&parseInt(r,10)===r},float:function(r){return Fg.number(r)&&!Fg.integer(r)},array:function(r){return Array.isArray(r)},regexp:function(r){if(r instanceof RegExp)return!0;try{return!!new RegExp(r)}catch{return!1}},date:function(r){return typeof r.getTime=="function"&&typeof r.getMonth=="function"&&typeof r.getYear=="function"&&!isNaN(r.getTime())},number:function(r){return isNaN(r)?!1:typeof r=="number"},object:function(r){return on(r)==="object"&&!Fg.array(r)},method:function(r){return typeof r=="function"},email:function(r){return typeof r=="string"&&r.length<=320&&!!r.match(M9.email)},url:function(r){return typeof r=="string"&&r.length<=2048&&!!r.match(l1e())},hex:function(r){return typeof r=="string"&&!!r.match(M9.hex)}},u1e=function(r,o,s,c,d){if(r.required&&o===void 0){HX(r,o,s,c,d);return}var f=["integer","float","array","regexp","object","method","email","number","date","url","hex"],v=r.type;f.indexOf(v)>-1?Fg[v](o)||c.push(ys(d.messages.types[v],r.fullField,r.type)):v&&on(o)!==r.type&&c.push(ys(d.messages.types[v],r.fullField,r.type))},d1e=function(r,o,s,c,d){(/^\s+$/.test(o)||o==="")&&c.push(ys(d.messages.whitespace,r.fullField))};const ur={required:HX,whitespace:d1e,type:u1e,range:c1e,enum:a1e,pattern:s1e};var h1e=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(bo(o)&&!r.required)return s();ur.required(r,o,c,f,d)}s(f)},f1e=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(o==null&&!r.required)return s();ur.required(r,o,c,f,d,"array"),o!=null&&(ur.type(r,o,c,f,d),ur.range(r,o,c,f,d))}s(f)},p1e=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(bo(o)&&!r.required)return s();ur.required(r,o,c,f,d),o!==void 0&&ur.type(r,o,c,f,d)}s(f)},m1e=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(bo(o,"date")&&!r.required)return s();if(ur.required(r,o,c,f,d),!bo(o,"date")){var g;o instanceof Date?g=o:g=new Date(o),ur.type(r,g,c,f,d),g&&ur.range(r,g.getTime(),c,f,d)}}s(f)},g1e="enum",v1e=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(bo(o)&&!r.required)return s();ur.required(r,o,c,f,d),o!==void 0&&ur[g1e](r,o,c,f,d)}s(f)},E1e=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(bo(o)&&!r.required)return s();ur.required(r,o,c,f,d),o!==void 0&&(ur.type(r,o,c,f,d),ur.range(r,o,c,f,d))}s(f)},_1e=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(bo(o)&&!r.required)return s();ur.required(r,o,c,f,d),o!==void 0&&(ur.type(r,o,c,f,d),ur.range(r,o,c,f,d))}s(f)},S1e=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(bo(o)&&!r.required)return s();ur.required(r,o,c,f,d),o!==void 0&&ur.type(r,o,c,f,d)}s(f)},y1e=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(o===""&&(o=void 0),bo(o)&&!r.required)return s();ur.required(r,o,c,f,d),o!==void 0&&(ur.type(r,o,c,f,d),ur.range(r,o,c,f,d))}s(f)},C1e=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(bo(o)&&!r.required)return s();ur.required(r,o,c,f,d),o!==void 0&&ur.type(r,o,c,f,d)}s(f)},b1e=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(bo(o,"string")&&!r.required)return s();ur.required(r,o,c,f,d),bo(o,"string")||ur.pattern(r,o,c,f,d)}s(f)},T1e=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(bo(o)&&!r.required)return s();ur.required(r,o,c,f,d),bo(o)||ur.type(r,o,c,f,d)}s(f)},R1e=function(r,o,s,c,d){var f=[],v=Array.isArray(o)?"array":on(o);ur.required(r,o,c,f,d,v),s(f)},w1e=function(r,o,s,c,d){var f=[],v=r.required||!r.required&&c.hasOwnProperty(r.field);if(v){if(bo(o,"string")&&!r.required)return s();ur.required(r,o,c,f,d,"string"),bo(o,"string")||(ur.type(r,o,c,f,d),ur.range(r,o,c,f,d),ur.pattern(r,o,c,f,d),r.whitespace===!0&&ur.whitespace(r,o,c,f,d))}s(f)},NO=function(r,o,s,c,d){var f=r.type,v=[],g=r.required||!r.required&&c.hasOwnProperty(r.field);if(g){if(bo(o,f)&&!r.required)return s();ur.required(r,o,c,v,d,f),bo(o,f)||ur.type(r,o,c,v,d)}s(v)};const Xg={string:w1e,method:S1e,number:y1e,boolean:p1e,regexp:T1e,integer:_1e,float:E1e,array:f1e,object:C1e,enum:v1e,pattern:b1e,date:m1e,url:NO,hex:NO,email:NO,required:R1e,any:h1e};var Jv=function(){function e(r){io(this,e),Ce(this,"rules",null),Ce(this,"_messages",IP),this.define(r)}return oo(e,[{key:"define",value:function(o){var s=this;if(!o)throw new Error("Cannot configure a schema with no rules");if(on(o)!=="object"||Array.isArray(o))throw new Error("Rules must be an object");this.rules={},Object.keys(o).forEach(function(c){var d=o[c];s.rules[c]=Array.isArray(d)?d:[d]})}},{key:"messages",value:function(o){return o&&(this._messages=k9(wP(),o)),this._messages}},{key:"validate",value:function(o){var s=this,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},f=o,v=c,g=d;if(typeof v=="function"&&(g=v,v={}),!this.rules||Object.keys(this.rules).length===0)return g&&g(null,f),Promise.resolve(f);function _(w){var x=[],N={};function P(L){if(Array.isArray(L)){var M;x=(M=x).concat.apply(M,vt(L))}else x.push(L)}for(var O=0;O<w.length;O++)P(w[O]);x.length?(N=OP(x),g(x,N)):g(null,f)}if(v.messages){var C=this.messages();C===IP&&(C=wP()),k9(C,v.messages),v.messages=C}else v.messages=this.messages();var b={},T=v.keys||Object.keys(this.rules);T.forEach(function(w){var x=s.rules[w],N=f[w];x.forEach(function(P){var O=P;typeof O.transform=="function"&&(f===o&&(f=_e({},f)),N=f[w]=O.transform(N),N!=null&&(O.type=O.type||(Array.isArray(N)?"array":on(N)))),typeof O=="function"?O={validator:O}:O=_e({},O),O.validator=s.getValidationMethod(O),O.validator&&(O.field=w,O.fullField=O.fullField||w,O.type=s.getType(O),b[w]=b[w]||[],b[w].push({rule:O,value:N,source:f,field:w}))})});var I={};return r1e(b,v,function(w,x){var N=w.rule,P=(N.type==="object"||N.type==="array")&&(on(N.fields)==="object"||on(N.defaultField)==="object");P=P&&(N.required||!N.required&&w.value),N.field=w.field;function O(j,z){return _e(_e({},z),{},{fullField:"".concat(N.fullField,".").concat(j),fullFields:N.fullFields?[].concat(vt(N.fullFields),[j]):[j]})}function L(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],z=Array.isArray(j)?j:[j];!v.suppressWarning&&z.length&&e.warning("async-validator:",z),z.length&&N.message!==void 0&&(z=[].concat(N.message));var q=z.map(L9(N,f));if(v.first&&q.length)return I[N.field]=1,x(q);if(!P)x(q);else{if(N.required&&!w.value)return N.message!==void 0?q=[].concat(N.message).map(L9(N,f)):v.error&&(q=[v.error(N,ys(v.messages.required,N.field))]),x(q);var W={};N.defaultField&&Object.keys(w.value).map(function(ee){W[ee]=N.defaultField}),W=_e(_e({},W),w.rule.fields);var J={};Object.keys(W).forEach(function(ee){var oe=W[ee],pe=Array.isArray(oe)?oe:[oe];J[ee]=pe.map(O.bind(null,ee))});var te=new e(J);te.messages(v.messages),w.rule.options&&(w.rule.options.messages=v.messages,w.rule.options.error=v.error),te.validate(w.value,w.rule.options||v,function(ee){var oe=[];q&&q.length&&oe.push.apply(oe,vt(q)),ee&&ee.length&&oe.push.apply(oe,vt(ee)),x(oe.length?oe:null)})}}var M;if(N.asyncValidator)M=N.asyncValidator(N,w.value,L,w.source,v);else if(N.validator){try{M=N.validator(N,w.value,L,w.source,v)}catch(j){var F,V;(F=(V=console).error)===null||F===void 0||F.call(V,j),v.suppressValidatorError||setTimeout(function(){throw j},0),L(j.message)}M===!0?L():M===!1?L(typeof N.message=="function"?N.message(N.fullField||N.field):N.message||"".concat(N.fullField||N.field," fails")):M instanceof Array?L(M):M instanceof Error&&L(M.message)}M&&M.then&&M.then(function(){return L()},function(j){return L(j)})},function(w){_(w)},f)}},{key:"getType",value:function(o){if(o.type===void 0&&o.pattern instanceof RegExp&&(o.type="pattern"),typeof o.validator!="function"&&o.type&&!Xg.hasOwnProperty(o.type))throw new Error(ys("Unknown rule type %s",o.type));return o.type||"string"}},{key:"getValidationMethod",value:function(o){if(typeof o.validator=="function")return o.validator;var s=Object.keys(o),c=s.indexOf("message");return c!==-1&&s.splice(c,1),s.length===1&&s[0]==="required"?Xg.required:Xg[this.getType(o)]||void 0}}]),e}();Ce(Jv,"register",function(r,o){if(typeof o!="function")throw new Error("Cannot register a validator by type, validator is not a function");Xg[r]=o});Ce(Jv,"warning",ZRe);Ce(Jv,"messages",IP);Ce(Jv,"validators",Xg);var vs="'${name}' is not a valid ${type}",zX={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:vs,method:vs,array:vs,object:vs,number:vs,date:vs,boolean:vs,integer:vs,float:vs,regexp:vs,email:vs,url:vs,hex:vs},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},F9=Jv;function I1e(e,r){return e.replace(/\\?\$\{\w+\}/g,function(o){if(o.startsWith("\\"))return o.slice(1);var s=o.slice(2,-1);return r[s]})}var U9="CODE_LOGIC_ERROR";function xP(e,r,o,s,c){return NP.apply(this,arguments)}function NP(){return NP=nf(xa().mark(function e(r,o,s,c,d){var f,v,g,_,C,b,T,I,w;return xa().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return f=_e({},s),delete f.ruleIndex,F9.warning=function(){},f.validator&&(v=f.validator,f.validator=function(){try{return v.apply(void 0,arguments)}catch(P){return console.error(P),Promise.reject(U9)}}),g=null,f&&f.type==="array"&&f.defaultField&&(g=f.defaultField,delete f.defaultField),_=new F9(Ce({},r,[f])),C=Kp(zX,c.validateMessages),_.messages(C),b=[],N.prev=10,N.next=13,Promise.resolve(_.validate(Ce({},r,o),_e({},c)));case 13:N.next=18;break;case 15:N.prev=15,N.t0=N.catch(10),N.t0.errors&&(b=N.t0.errors.map(function(P,O){var L=P.message,M=L===U9?C.default:L;return S.isValidElement(M)?S.cloneElement(M,{key:"error_".concat(O)}):M}));case 18:if(!(!b.length&&g)){N.next=23;break}return N.next=21,Promise.all(o.map(function(P,O){return xP("".concat(r,".").concat(O),P,g,c,d)}));case 21:return T=N.sent,N.abrupt("return",T.reduce(function(P,O){return[].concat(vt(P),vt(O))},[]));case 23:return I=_e(_e({},s),{},{name:r,enum:(s.enum||[]).join(", ")},d),w=b.map(function(P){return typeof P=="string"?I1e(P,I):P}),N.abrupt("return",w);case 26:case"end":return N.stop()}},e,null,[[10,15]])})),NP.apply(this,arguments)}function A1e(e,r,o,s,c,d){var f=e.join("."),v=o.map(function(C,b){var T=C.validator,I=_e(_e({},C),{},{ruleIndex:b});return T&&(I.validator=function(w,x,N){var P=!1,O=function(){for(var F=arguments.length,V=new Array(F),j=0;j<F;j++)V[j]=arguments[j];Promise.resolve().then(function(){_a(!P,"Your validator function has already return a promise. `callback` will be ignored."),P||N.apply(void 0,V)})},L=T(w,x,O);P=L&&typeof L.then=="function"&&typeof L.catch=="function",_a(P,"`callback` is deprecated. Please return a promise instead."),P&&L.then(function(){N()}).catch(function(M){N(M||" ")})}),I}).sort(function(C,b){var T=C.warningOnly,I=C.ruleIndex,w=b.warningOnly,x=b.ruleIndex;return!!T==!!w?I-x:T?1:-1}),g;if(c===!0)g=new Promise(function(){var C=nf(xa().mark(function b(T,I){var w,x,N;return xa().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:w=0;case 1:if(!(w<v.length)){O.next=12;break}return x=v[w],O.next=5,xP(f,r,x,s,d);case 5:if(N=O.sent,!N.length){O.next=9;break}return I([{errors:N,rule:x}]),O.abrupt("return");case 9:w+=1,O.next=1;break;case 12:T([]);case 13:case"end":return O.stop()}},b)}));return function(b,T){return C.apply(this,arguments)}}());else{var _=v.map(function(C){return xP(f,r,C,s,d).then(function(b){return{errors:b,rule:C}})});g=(c?x1e(_):O1e(_)).then(function(C){return Promise.reject(C)})}return g.catch(function(C){return C}),g}function O1e(e){return PP.apply(this,arguments)}function PP(){return PP=nf(xa().mark(function e(r){return xa().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Promise.all(r).then(function(c){var d,f=(d=[]).concat.apply(d,vt(c));return f}));case 1:case"end":return s.stop()}},e)})),PP.apply(this,arguments)}function x1e(e){return DP.apply(this,arguments)}function DP(){return DP=nf(xa().mark(function e(r){var o;return xa().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=0,c.abrupt("return",new Promise(function(d){r.forEach(function(f){f.then(function(v){v.errors.length&&d([v]),o+=1,o===r.length&&d([])})})}));case 2:case"end":return c.stop()}},e)})),DP.apply(this,arguments)}function to(e){return RP(e)}function B9(e,r){var o={};return r.forEach(function(s){var c=oc(e,s);o=tc(o,s,c)}),o}function rm(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e&&e.some(function(s){return WX(r,s,o)})}function WX(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!e||!r||!o&&e.length!==r.length?!1:r.every(function(s,c){return e[c]===s})}function N1e(e,r){if(e===r)return!0;if(!e&&r||e&&!r||!e||!r||on(e)!=="object"||on(r)!=="object")return!1;var o=Object.keys(e),s=Object.keys(r),c=new Set([].concat(o,s));return vt(c).every(function(d){var f=e[d],v=r[d];return typeof f=="function"&&typeof v=="function"?!0:f===v})}function P1e(e){var r=arguments.length<=1?void 0:arguments[1];return r&&r.target&&on(r.target)==="object"&&e in r.target?r.target[e]:r}function V9(e,r,o){var s=e.length;if(r<0||r>=s||o<0||o>=s)return e;var c=e[r],d=r-o;return d>0?[].concat(vt(e.slice(0,o)),[c],vt(e.slice(o,r)),vt(e.slice(r+1,s))):d<0?[].concat(vt(e.slice(0,r)),vt(e.slice(r+1,o+1)),[c],vt(e.slice(o+1,s))):e}var D1e=["name"],Zs=[];function PO(e,r,o,s,c,d){return typeof e=="function"?e(r,o,"source"in d?{source:d.source}:{}):s!==c}var R2=function(e){Ml(o,e);var r=Fl(o);function o(s){var c;if(io(this,o),c=r.call(this,s),Ce(tr(c),"state",{resetCount:0}),Ce(tr(c),"cancelRegisterFunc",null),Ce(tr(c),"mounted",!1),Ce(tr(c),"touched",!1),Ce(tr(c),"dirty",!1),Ce(tr(c),"validatePromise",void 0),Ce(tr(c),"prevValidating",void 0),Ce(tr(c),"errors",Zs),Ce(tr(c),"warnings",Zs),Ce(tr(c),"cancelRegister",function(){var g=c.props,_=g.preserve,C=g.isListField,b=g.name;c.cancelRegisterFunc&&c.cancelRegisterFunc(C,_,to(b)),c.cancelRegisterFunc=null}),Ce(tr(c),"getNamePath",function(){var g=c.props,_=g.name,C=g.fieldContext,b=C.prefixName,T=b===void 0?[]:b;return _!==void 0?[].concat(vt(T),vt(_)):[]}),Ce(tr(c),"getRules",function(){var g=c.props,_=g.rules,C=_===void 0?[]:_,b=g.fieldContext;return C.map(function(T){return typeof T=="function"?T(b):T})}),Ce(tr(c),"refresh",function(){c.mounted&&c.setState(function(g){var _=g.resetCount;return{resetCount:_+1}})}),Ce(tr(c),"metaCache",null),Ce(tr(c),"triggerMetaEvent",function(g){var _=c.props.onMetaChange;if(_){var C=_e(_e({},c.getMeta()),{},{destroy:g});Tv(c.metaCache,C)||_(C),c.metaCache=C}else c.metaCache=null}),Ce(tr(c),"onStoreChange",function(g,_,C){var b=c.props,T=b.shouldUpdate,I=b.dependencies,w=I===void 0?[]:I,x=b.onReset,N=C.store,P=c.getNamePath(),O=c.getValue(g),L=c.getValue(N),M=_&&rm(_,P);switch(C.type==="valueUpdate"&&C.source==="external"&&!Tv(O,L)&&(c.touched=!0,c.dirty=!0,c.validatePromise=null,c.errors=Zs,c.warnings=Zs,c.triggerMetaEvent()),C.type){case"reset":if(!_||M){c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.errors=Zs,c.warnings=Zs,c.triggerMetaEvent(),x==null||x(),c.refresh();return}break;case"remove":{if(T&&PO(T,g,N,O,L,C)){c.reRender();return}break}case"setField":{var F=C.data;if(M){"touched"in F&&(c.touched=F.touched),"validating"in F&&!("originRCField"in F)&&(c.validatePromise=F.validating?Promise.resolve([]):null),"errors"in F&&(c.errors=F.errors||Zs),"warnings"in F&&(c.warnings=F.warnings||Zs),c.dirty=!0,c.triggerMetaEvent(),c.reRender();return}else if("value"in F&&rm(_,P,!0)){c.reRender();return}if(T&&!P.length&&PO(T,g,N,O,L,C)){c.reRender();return}break}case"dependenciesUpdate":{var V=w.map(to);if(V.some(function(j){return rm(C.relatedFields,j)})){c.reRender();return}break}default:if(M||(!w.length||P.length||T)&&PO(T,g,N,O,L,C)){c.reRender();return}break}T===!0&&c.reRender()}),Ce(tr(c),"validateRules",function(g){var _=c.getNamePath(),C=c.getValue(),b=g||{},T=b.triggerName,I=b.validateOnly,w=I===void 0?!1:I,x=Promise.resolve().then(nf(xa().mark(function N(){var P,O,L,M,F,V,j;return xa().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(c.mounted){q.next=2;break}return q.abrupt("return",[]);case 2:if(P=c.props,O=P.validateFirst,L=O===void 0?!1:O,M=P.messageVariables,F=P.validateDebounce,V=c.getRules(),T&&(V=V.filter(function(W){return W}).filter(function(W){var J=W.validateTrigger;if(!J)return!0;var te=RP(J);return te.includes(T)})),!(F&&T)){q.next=10;break}return q.next=8,new Promise(function(W){setTimeout(W,F)});case 8:if(c.validatePromise===x){q.next=10;break}return q.abrupt("return",[]);case 10:return j=A1e(_,C,V,g,L,M),j.catch(function(W){return W}).then(function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Zs;if(c.validatePromise===x){var J;c.validatePromise=null;var te=[],ee=[];(J=W.forEach)===null||J===void 0||J.call(W,function(oe){var pe=oe.rule.warningOnly,ne=oe.errors,ae=ne===void 0?Zs:ne;pe?ee.push.apply(ee,vt(ae)):te.push.apply(te,vt(ae))}),c.errors=te,c.warnings=ee,c.triggerMetaEvent(),c.reRender()}}),q.abrupt("return",j);case 13:case"end":return q.stop()}},N)})));return w||(c.validatePromise=x,c.dirty=!0,c.errors=Zs,c.warnings=Zs,c.triggerMetaEvent(),c.reRender()),x}),Ce(tr(c),"isFieldValidating",function(){return!!c.validatePromise}),Ce(tr(c),"isFieldTouched",function(){return c.touched}),Ce(tr(c),"isFieldDirty",function(){if(c.dirty||c.props.initialValue!==void 0)return!0;var g=c.props.fieldContext,_=g.getInternalHooks(Ph),C=_.getInitialValue;return C(c.getNamePath())!==void 0}),Ce(tr(c),"getErrors",function(){return c.errors}),Ce(tr(c),"getWarnings",function(){return c.warnings}),Ce(tr(c),"isListField",function(){return c.props.isListField}),Ce(tr(c),"isList",function(){return c.props.isList}),Ce(tr(c),"isPreserve",function(){return c.props.preserve}),Ce(tr(c),"getMeta",function(){c.prevValidating=c.isFieldValidating();var g={touched:c.isFieldTouched(),validating:c.prevValidating,errors:c.errors,warnings:c.warnings,name:c.getNamePath(),validated:c.validatePromise===null};return g}),Ce(tr(c),"getOnlyChild",function(g){if(typeof g=="function"){var _=c.getMeta();return _e(_e({},c.getOnlyChild(g(c.getControlled(),_,c.props.fieldContext))),{},{isFunction:!0})}var C=zc(g);return C.length!==1||!S.isValidElement(C[0])?{child:C,isFunction:!1}:{child:C[0],isFunction:!1}}),Ce(tr(c),"getValue",function(g){var _=c.props.fieldContext.getFieldsValue,C=c.getNamePath();return oc(g||_(!0),C)}),Ce(tr(c),"getControlled",function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=c.props,C=_.name,b=_.trigger,T=_.validateTrigger,I=_.getValueFromEvent,w=_.normalize,x=_.valuePropName,N=_.getValueProps,P=_.fieldContext,O=T!==void 0?T:P.validateTrigger,L=c.getNamePath(),M=P.getInternalHooks,F=P.getFieldsValue,V=M(Ph),j=V.dispatch,z=c.getValue(),q=N||function(oe){return Ce({},x,oe)},W=g[b],J=C!==void 0?q(z):{},te=_e(_e({},g),J);te[b]=function(){c.touched=!0,c.dirty=!0,c.triggerMetaEvent();for(var oe,pe=arguments.length,ne=new Array(pe),ae=0;ae<pe;ae++)ne[ae]=arguments[ae];I?oe=I.apply(void 0,ne):oe=P1e.apply(void 0,[x].concat(ne)),w&&(oe=w(oe,z,F(!0))),oe!==z&&j({type:"updateValue",namePath:L,value:oe}),W&&W.apply(void 0,ne)};var ee=RP(O||[]);return ee.forEach(function(oe){var pe=te[oe];te[oe]=function(){pe&&pe.apply(void 0,arguments);var ne=c.props.rules;ne&&ne.length&&j({type:"validateField",namePath:L,triggerName:oe})}}),te}),s.fieldContext){var d=s.fieldContext.getInternalHooks,f=d(Ph),v=f.initEntityValue;v(tr(c))}return c}return oo(o,[{key:"componentDidMount",value:function(){var c=this.props,d=c.shouldUpdate,f=c.fieldContext;if(this.mounted=!0,f){var v=f.getInternalHooks,g=v(Ph),_=g.registerField;this.cancelRegisterFunc=_(this)}d===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var c=this.state.resetCount,d=this.props.children,f=this.getOnlyChild(d),v=f.child,g=f.isFunction,_;return g?_=v:S.isValidElement(v)?_=S.cloneElement(v,this.getControlled(v.props)):(_a(!v,"`children` of Field is not validate ReactElement."),_=v),S.createElement(S.Fragment,{key:c},_)}}]),o}(S.Component);Ce(R2,"contextType",Gh);Ce(R2,"defaultProps",{trigger:"onChange",valuePropName:"value"});function w2(e){var r,o=e.name,s=An(e,D1e),c=S.useContext(Gh),d=S.useContext(xv),f=o!==void 0?to(o):void 0,v=(r=s.isListField)!==null&&r!==void 0?r:!!d,g="keep";return v||(g="_".concat((f||[]).join("_"))),S.createElement(R2,Qe({key:g,name:f,isListField:v},s,{fieldContext:c}))}function GX(e){var r=e.name,o=e.initialValue,s=e.children,c=e.rules,d=e.validateTrigger,f=e.isListField,v=S.useContext(Gh),g=S.useContext(xv),_=S.useRef({keys:[],id:0}),C=_.current,b=S.useMemo(function(){var x=to(v.prefixName)||[];return[].concat(vt(x),vt(to(r)))},[v.prefixName,r]),T=S.useMemo(function(){return _e(_e({},v),{},{prefixName:b})},[v,b]),I=S.useMemo(function(){return{getKey:function(N){var P=b.length,O=N[P];return[C.keys[O],N.slice(P+1)]}}},[b]);if(typeof s!="function")return _a(!1,"Form.List only accepts function as children."),null;var w=function(N,P,O){var L=O.source;return L==="internal"?!1:N!==P};return S.createElement(xv.Provider,{value:I},S.createElement(Gh.Provider,{value:T},S.createElement(w2,{name:[],shouldUpdate:w,rules:c,validateTrigger:d,initialValue:o,isList:!0,isListField:f??!!g},function(x,N){var P=x.value,O=P===void 0?[]:P,L=x.onChange,M=v.getFieldValue,F=function(){var q=M(b||[]);return q||[]},V={add:function(q,W){var J=F();W>=0&&W<=J.length?(C.keys=[].concat(vt(C.keys.slice(0,W)),[C.id],vt(C.keys.slice(W))),L([].concat(vt(J.slice(0,W)),[q],vt(J.slice(W))))):(C.keys=[].concat(vt(C.keys),[C.id]),L([].concat(vt(J),[q]))),C.id+=1},remove:function(q){var W=F(),J=new Set(Array.isArray(q)?q:[q]);J.size<=0||(C.keys=C.keys.filter(function(te,ee){return!J.has(ee)}),L(W.filter(function(te,ee){return!J.has(ee)})))},move:function(q,W){if(q!==W){var J=F();q<0||q>=J.length||W<0||W>=J.length||(C.keys=V9(C.keys,q,W),L(V9(J,q,W)))}}},j=O||[];return Array.isArray(j)||(j=[]),s(j.map(function(z,q){var W=C.keys[q];return W===void 0&&(C.keys[q]=C.id,W=C.keys[q],C.id+=1),{name:q,key:W,isListField:!0}}),V,N)})))}function L1e(e){var r=!1,o=e.length,s=[];return e.length?new Promise(function(c,d){e.forEach(function(f,v){f.catch(function(g){return r=!0,g}).then(function(g){o-=1,s[v]=g,!(o>0)&&(r&&d(s),c(s))})})}):Promise.resolve([])}var KX="__@field_split__";function DO(e){return e.map(function(r){return"".concat(on(r),":").concat(r)}).join(KX)}var Ap=function(){function e(){io(this,e),Ce(this,"kvs",new Map)}return oo(e,[{key:"set",value:function(o,s){this.kvs.set(DO(o),s)}},{key:"get",value:function(o){return this.kvs.get(DO(o))}},{key:"update",value:function(o,s){var c=this.get(o),d=s(c);d?this.set(o,d):this.delete(o)}},{key:"delete",value:function(o){this.kvs.delete(DO(o))}},{key:"map",value:function(o){return vt(this.kvs.entries()).map(function(s){var c=Ue(s,2),d=c[0],f=c[1],v=d.split(KX);return o({key:v.map(function(g){var _=g.match(/^([^:]*):(.*)$/),C=Ue(_,3),b=C[1],T=C[2];return b==="number"?Number(T):T}),value:f})})}},{key:"toJSON",value:function(){var o={};return this.map(function(s){var c=s.key,d=s.value;return o[c.join(".")]=d,null}),o}}]),e}(),k1e=["name"],M1e=oo(function e(r){var o=this;io(this,e),Ce(this,"formHooked",!1),Ce(this,"forceRootUpdate",void 0),Ce(this,"subscribable",!0),Ce(this,"store",{}),Ce(this,"fieldEntities",[]),Ce(this,"initialValues",{}),Ce(this,"callbacks",{}),Ce(this,"validateMessages",null),Ce(this,"preserve",null),Ce(this,"lastValidatePromise",null),Ce(this,"getForm",function(){return{getFieldValue:o.getFieldValue,getFieldsValue:o.getFieldsValue,getFieldError:o.getFieldError,getFieldWarning:o.getFieldWarning,getFieldsError:o.getFieldsError,isFieldsTouched:o.isFieldsTouched,isFieldTouched:o.isFieldTouched,isFieldValidating:o.isFieldValidating,isFieldsValidating:o.isFieldsValidating,resetFields:o.resetFields,setFields:o.setFields,setFieldValue:o.setFieldValue,setFieldsValue:o.setFieldsValue,validateFields:o.validateFields,submit:o.submit,_init:!0,getInternalHooks:o.getInternalHooks}}),Ce(this,"getInternalHooks",function(s){return s===Ph?(o.formHooked=!0,{dispatch:o.dispatch,initEntityValue:o.initEntityValue,registerField:o.registerField,useSubscribe:o.useSubscribe,setInitialValues:o.setInitialValues,destroyForm:o.destroyForm,setCallbacks:o.setCallbacks,setValidateMessages:o.setValidateMessages,getFields:o.getFields,setPreserve:o.setPreserve,getInitialValue:o.getInitialValue,registerWatch:o.registerWatch}):(_a(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),Ce(this,"useSubscribe",function(s){o.subscribable=s}),Ce(this,"prevWithoutPreserves",null),Ce(this,"setInitialValues",function(s,c){if(o.initialValues=s||{},c){var d,f=Kp(s,o.store);(d=o.prevWithoutPreserves)===null||d===void 0||d.map(function(v){var g=v.key;f=tc(f,g,oc(s,g))}),o.prevWithoutPreserves=null,o.updateStore(f)}}),Ce(this,"destroyForm",function(s){if(s)o.updateStore({});else{var c=new Ap;o.getFieldEntities(!0).forEach(function(d){o.isMergedPreserve(d.isPreserve())||c.set(d.getNamePath(),!0)}),o.prevWithoutPreserves=c}}),Ce(this,"getInitialValue",function(s){var c=oc(o.initialValues,s);return s.length?Kp(c):c}),Ce(this,"setCallbacks",function(s){o.callbacks=s}),Ce(this,"setValidateMessages",function(s){o.validateMessages=s}),Ce(this,"setPreserve",function(s){o.preserve=s}),Ce(this,"watchList",[]),Ce(this,"registerWatch",function(s){return o.watchList.push(s),function(){o.watchList=o.watchList.filter(function(c){return c!==s})}}),Ce(this,"notifyWatch",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(o.watchList.length){var c=o.getFieldsValue(),d=o.getFieldsValue(!0);o.watchList.forEach(function(f){f(c,d,s)})}}),Ce(this,"timeoutId",null),Ce(this,"warningUnhooked",function(){}),Ce(this,"updateStore",function(s){o.store=s}),Ce(this,"getFieldEntities",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return s?o.fieldEntities.filter(function(c){return c.getNamePath().length}):o.fieldEntities}),Ce(this,"getFieldsMap",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,c=new Ap;return o.getFieldEntities(s).forEach(function(d){var f=d.getNamePath();c.set(f,d)}),c}),Ce(this,"getFieldEntitiesForNamePathList",function(s){if(!s)return o.getFieldEntities(!0);var c=o.getFieldsMap(!0);return s.map(function(d){var f=to(d);return c.get(f)||{INVALIDATE_NAME_PATH:to(d)}})}),Ce(this,"getFieldsValue",function(s,c){o.warningUnhooked();var d,f,v;if(s===!0||Array.isArray(s)?(d=s,f=c):s&&on(s)==="object"&&(v=s.strict,f=s.filter),d===!0&&!f)return o.store;var g=o.getFieldEntitiesForNamePathList(Array.isArray(d)?d:null),_=[];return g.forEach(function(C){var b,T,I="INVALIDATE_NAME_PATH"in C?C.INVALIDATE_NAME_PATH:C.getNamePath();if(v){var w,x;if((w=(x=C).isList)!==null&&w!==void 0&&w.call(x))return}else if(!d&&(b=(T=C).isListField)!==null&&b!==void 0&&b.call(T))return;if(!f)_.push(I);else{var N="getMeta"in C?C.getMeta():null;f(N)&&_.push(I)}}),B9(o.store,_.map(to))}),Ce(this,"getFieldValue",function(s){o.warningUnhooked();var c=to(s);return oc(o.store,c)}),Ce(this,"getFieldsError",function(s){o.warningUnhooked();var c=o.getFieldEntitiesForNamePathList(s);return c.map(function(d,f){return d&&!("INVALIDATE_NAME_PATH"in d)?{name:d.getNamePath(),errors:d.getErrors(),warnings:d.getWarnings()}:{name:to(s[f]),errors:[],warnings:[]}})}),Ce(this,"getFieldError",function(s){o.warningUnhooked();var c=to(s),d=o.getFieldsError([c])[0];return d.errors}),Ce(this,"getFieldWarning",function(s){o.warningUnhooked();var c=to(s),d=o.getFieldsError([c])[0];return d.warnings}),Ce(this,"isFieldsTouched",function(){o.warningUnhooked();for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];var f=c[0],v=c[1],g,_=!1;c.length===0?g=null:c.length===1?Array.isArray(f)?(g=f.map(to),_=!1):(g=null,_=f):(g=f.map(to),_=v);var C=o.getFieldEntities(!0),b=function(N){return N.isFieldTouched()};if(!g)return _?C.every(function(x){return b(x)||x.isList()}):C.some(b);var T=new Ap;g.forEach(function(x){T.set(x,[])}),C.forEach(function(x){var N=x.getNamePath();g.forEach(function(P){P.every(function(O,L){return N[L]===O})&&T.update(P,function(O){return[].concat(vt(O),[x])})})});var I=function(N){return N.some(b)},w=T.map(function(x){var N=x.value;return N});return _?w.every(I):w.some(I)}),Ce(this,"isFieldTouched",function(s){return o.warningUnhooked(),o.isFieldsTouched([s])}),Ce(this,"isFieldsValidating",function(s){o.warningUnhooked();var c=o.getFieldEntities();if(!s)return c.some(function(f){return f.isFieldValidating()});var d=s.map(to);return c.some(function(f){var v=f.getNamePath();return rm(d,v)&&f.isFieldValidating()})}),Ce(this,"isFieldValidating",function(s){return o.warningUnhooked(),o.isFieldsValidating([s])}),Ce(this,"resetWithFieldInitialValue",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=new Ap,d=o.getFieldEntities(!0);d.forEach(function(g){var _=g.props.initialValue,C=g.getNamePath();if(_!==void 0){var b=c.get(C)||new Set;b.add({entity:g,value:_}),c.set(C,b)}});var f=function(_){_.forEach(function(C){var b=C.props.initialValue;if(b!==void 0){var T=C.getNamePath(),I=o.getInitialValue(T);if(I!==void 0)_a(!1,"Form already set 'initialValues' with path '".concat(T.join("."),"'. Field can not overwrite it."));else{var w=c.get(T);if(w&&w.size>1)_a(!1,"Multiple Field with path '".concat(T.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(w){var x=o.getFieldValue(T),N=C.isListField();!N&&(!s.skipExist||x===void 0)&&o.updateStore(tc(o.store,T,vt(w)[0].value))}}}})},v;s.entities?v=s.entities:s.namePathList?(v=[],s.namePathList.forEach(function(g){var _=c.get(g);if(_){var C;(C=v).push.apply(C,vt(vt(_).map(function(b){return b.entity})))}})):v=d,f(v)}),Ce(this,"resetFields",function(s){o.warningUnhooked();var c=o.store;if(!s){o.updateStore(Kp(o.initialValues)),o.resetWithFieldInitialValue(),o.notifyObservers(c,null,{type:"reset"}),o.notifyWatch();return}var d=s.map(to);d.forEach(function(f){var v=o.getInitialValue(f);o.updateStore(tc(o.store,f,v))}),o.resetWithFieldInitialValue({namePathList:d}),o.notifyObservers(c,d,{type:"reset"}),o.notifyWatch(d)}),Ce(this,"setFields",function(s){o.warningUnhooked();var c=o.store,d=[];s.forEach(function(f){var v=f.name,g=An(f,k1e),_=to(v);d.push(_),"value"in g&&o.updateStore(tc(o.store,_,g.value)),o.notifyObservers(c,[_],{type:"setField",data:f})}),o.notifyWatch(d)}),Ce(this,"getFields",function(){var s=o.getFieldEntities(!0),c=s.map(function(d){var f=d.getNamePath(),v=d.getMeta(),g=_e(_e({},v),{},{name:f,value:o.getFieldValue(f)});return Object.defineProperty(g,"originRCField",{value:!0}),g});return c}),Ce(this,"initEntityValue",function(s){var c=s.props.initialValue;if(c!==void 0){var d=s.getNamePath(),f=oc(o.store,d);f===void 0&&o.updateStore(tc(o.store,d,c))}}),Ce(this,"isMergedPreserve",function(s){var c=s!==void 0?s:o.preserve;return c??!0}),Ce(this,"registerField",function(s){o.fieldEntities.push(s);var c=s.getNamePath();if(o.notifyWatch([c]),s.props.initialValue!==void 0){var d=o.store;o.resetWithFieldInitialValue({entities:[s],skipExist:!0}),o.notifyObservers(d,[s.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(f,v){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(o.fieldEntities=o.fieldEntities.filter(function(b){return b!==s}),!o.isMergedPreserve(v)&&(!f||g.length>1)){var _=f?void 0:o.getInitialValue(c);if(c.length&&o.getFieldValue(c)!==_&&o.fieldEntities.every(function(b){return!WX(b.getNamePath(),c)})){var C=o.store;o.updateStore(tc(C,c,_,!0)),o.notifyObservers(C,[c],{type:"remove"}),o.triggerDependenciesUpdate(C,c)}}o.notifyWatch([c])}}),Ce(this,"dispatch",function(s){switch(s.type){case"updateValue":{var c=s.namePath,d=s.value;o.updateValue(c,d);break}case"validateField":{var f=s.namePath,v=s.triggerName;o.validateFields([f],{triggerName:v});break}}}),Ce(this,"notifyObservers",function(s,c,d){if(o.subscribable){var f=_e(_e({},d),{},{store:o.getFieldsValue(!0)});o.getFieldEntities().forEach(function(v){var g=v.onStoreChange;g(s,c,f)})}else o.forceRootUpdate()}),Ce(this,"triggerDependenciesUpdate",function(s,c){var d=o.getDependencyChildrenFields(c);return d.length&&o.validateFields(d),o.notifyObservers(s,d,{type:"dependenciesUpdate",relatedFields:[c].concat(vt(d))}),d}),Ce(this,"updateValue",function(s,c){var d=to(s),f=o.store;o.updateStore(tc(o.store,d,c)),o.notifyObservers(f,[d],{type:"valueUpdate",source:"internal"}),o.notifyWatch([d]);var v=o.triggerDependenciesUpdate(f,d),g=o.callbacks.onValuesChange;if(g){var _=B9(o.store,[d]);g(_,o.getFieldsValue())}o.triggerOnFieldsChange([d].concat(vt(v)))}),Ce(this,"setFieldsValue",function(s){o.warningUnhooked();var c=o.store;if(s){var d=Kp(o.store,s);o.updateStore(d)}o.notifyObservers(c,null,{type:"valueUpdate",source:"external"}),o.notifyWatch()}),Ce(this,"setFieldValue",function(s,c){o.setFields([{name:s,value:c,errors:[],warnings:[]}])}),Ce(this,"getDependencyChildrenFields",function(s){var c=new Set,d=[],f=new Ap;o.getFieldEntities().forEach(function(g){var _=g.props.dependencies;(_||[]).forEach(function(C){var b=to(C);f.update(b,function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return T.add(g),T})})});var v=function g(_){var C=f.get(_)||new Set;C.forEach(function(b){if(!c.has(b)){c.add(b);var T=b.getNamePath();b.isFieldDirty()&&T.length&&(d.push(T),g(T))}})};return v(s),d}),Ce(this,"triggerOnFieldsChange",function(s,c){var d=o.callbacks.onFieldsChange;if(d){var f=o.getFields();if(c){var v=new Ap;c.forEach(function(_){var C=_.name,b=_.errors;v.set(C,b)}),f.forEach(function(_){_.errors=v.get(_.name)||_.errors})}var g=f.filter(function(_){var C=_.name;return rm(s,C)});g.length&&d(g,f)}}),Ce(this,"validateFields",function(s,c){o.warningUnhooked();var d,f;Array.isArray(s)||typeof s=="string"||typeof c=="string"?(d=s,f=c):f=s;var v=!!d,g=v?d.map(to):[],_=[],C=String(Date.now()),b=new Set,T=f||{},I=T.recursive,w=T.dirty;o.getFieldEntities(!0).forEach(function(O){if(v||g.push(O.getNamePath()),!(!O.props.rules||!O.props.rules.length)&&!(w&&!O.isFieldDirty())){var L=O.getNamePath();if(b.add(L.join(C)),!v||rm(g,L,I)){var M=O.validateRules(_e({validateMessages:_e(_e({},zX),o.validateMessages)},f));_.push(M.then(function(){return{name:L,errors:[],warnings:[]}}).catch(function(F){var V,j=[],z=[];return(V=F.forEach)===null||V===void 0||V.call(F,function(q){var W=q.rule.warningOnly,J=q.errors;W?z.push.apply(z,vt(J)):j.push.apply(j,vt(J))}),j.length?Promise.reject({name:L,errors:j,warnings:z}):{name:L,errors:j,warnings:z}}))}}});var x=L1e(_);o.lastValidatePromise=x,x.catch(function(O){return O}).then(function(O){var L=O.map(function(M){var F=M.name;return F});o.notifyObservers(o.store,L,{type:"validateFinish"}),o.triggerOnFieldsChange(L,O)});var N=x.then(function(){return o.lastValidatePromise===x?Promise.resolve(o.getFieldsValue(g)):Promise.reject([])}).catch(function(O){var L=O.filter(function(M){return M&&M.errors.length});return Promise.reject({values:o.getFieldsValue(g),errorFields:L,outOfDate:o.lastValidatePromise!==x})});N.catch(function(O){return O});var P=g.filter(function(O){return b.has(O.join(C))});return o.triggerOnFieldsChange(P),N}),Ce(this,"submit",function(){o.warningUnhooked(),o.validateFields().then(function(s){var c=o.callbacks.onFinish;if(c)try{c(s)}catch(d){console.error(d)}}).catch(function(s){var c=o.callbacks.onFinishFailed;c&&c(s)})}),this.forceRootUpdate=r});function I2(e){var r=S.useRef(),o=S.useState({}),s=Ue(o,2),c=s[1];if(!r.current)if(e)r.current=e;else{var d=function(){c({})},f=new M1e(d);r.current=f.getForm()}return[r.current]}var LP=S.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),qX=function(r){var o=r.validateMessages,s=r.onFormChange,c=r.onFormFinish,d=r.children,f=S.useContext(LP),v=S.useRef({});return S.createElement(LP.Provider,{value:_e(_e({},f),{},{validateMessages:_e(_e({},f.validateMessages),o),triggerFormChange:function(_,C){s&&s(_,{changedFields:C,forms:v.current}),f.triggerFormChange(_,C)},triggerFormFinish:function(_,C){c&&c(_,{values:C,forms:v.current}),f.triggerFormFinish(_,C)},registerForm:function(_,C){_&&(v.current=_e(_e({},v.current),{},Ce({},_,C))),f.registerForm(_,C)},unregisterForm:function(_){var C=_e({},v.current);delete C[_],v.current=C,f.unregisterForm(_)}})},d)},F1e=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],U1e=function(r,o){var s=r.name,c=r.initialValues,d=r.fields,f=r.form,v=r.preserve,g=r.children,_=r.component,C=_===void 0?"form":_,b=r.validateMessages,T=r.validateTrigger,I=T===void 0?"onChange":T,w=r.onValuesChange,x=r.onFieldsChange,N=r.onFinish,P=r.onFinishFailed,O=r.clearOnDestroy,L=An(r,F1e),M=S.useRef(null),F=S.useContext(LP),V=I2(f),j=Ue(V,1),z=j[0],q=z.getInternalHooks(Ph),W=q.useSubscribe,J=q.setInitialValues,te=q.setCallbacks,ee=q.setValidateMessages,oe=q.setPreserve,pe=q.destroyForm;S.useImperativeHandle(o,function(){return _e(_e({},z),{},{nativeElement:M.current})}),S.useEffect(function(){return F.registerForm(s,z),function(){F.unregisterForm(s)}},[F,z,s]),ee(_e(_e({},F.validateMessages),b)),te({onValuesChange:w,onFieldsChange:function(ie){if(F.triggerFormChange(s,ie),x){for(var be=arguments.length,Re=new Array(be>1?be-1:0),Pe=1;Pe<be;Pe++)Re[Pe-1]=arguments[Pe];x.apply(void 0,[ie].concat(Re))}},onFinish:function(ie){F.triggerFormFinish(s,ie),N&&N(ie)},onFinishFailed:P}),oe(v);var ne=S.useRef(null);J(c,!ne.current),ne.current||(ne.current=!0),S.useEffect(function(){return function(){return pe(O)}},[]);var ae,re=typeof g=="function";if(re){var he=z.getFieldsValue(!0);ae=g(he,z)}else ae=g;W(!re);var fe=S.useRef();S.useEffect(function(){N1e(fe.current||[],d||[])||z.setFields(d||[]),fe.current=d},[d,z]);var se=S.useMemo(function(){return _e(_e({},z),{},{validateTrigger:I})},[z,I]),de=S.createElement(xv.Provider,{value:null},S.createElement(Gh.Provider,{value:se},ae));return C===!1?de:S.createElement(C,Qe({},L,{ref:M,onSubmit:function(ie){ie.preventDefault(),ie.stopPropagation(),z.submit()},onReset:function(ie){var be;ie.preventDefault(),z.resetFields(),(be=L.onReset)===null||be===void 0||be.call(L,ie)}}),de)};function j9(e){try{return JSON.stringify(e)}catch{return Math.random()}}function YX(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var s=r[0],c=r[1],d=c===void 0?{}:c,f=YRe(d)?{form:d}:d,v=f.form,g=S.useState(),_=Ue(g,2),C=_[0],b=_[1],T=S.useMemo(function(){return j9(C)},[C]),I=S.useRef(T);I.current=T;var w=S.useContext(Gh),x=v||w,N=x&&x._init,P=to(s),O=S.useRef(P);return O.current=P,S.useEffect(function(){if(N){var L=x.getFieldsValue,M=x.getInternalHooks,F=M(Ph),V=F.registerWatch,j=function(J,te){var ee=f.preserve?te:J;return typeof s=="function"?s(ee):oc(ee,O.current)},z=V(function(W,J){var te=j(W,J),ee=j9(te);I.current!==ee&&(I.current=ee,b(te))}),q=j(L(),L(!0));return C!==q&&b(q),z}},[N]),C}var B1e=S.forwardRef(U1e),Pm=B1e;Pm.FormProvider=qX;Pm.Field=w2;Pm.List=GX;Pm.useForm=I2;Pm.useWatch=YX;const pu=S.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),XX=S.createContext(null),JX=e=>{const r=na(e,["prefixCls"]);return S.createElement(qX,Object.assign({},r))},A2=S.createContext({prefixCls:""}),Rs=S.createContext({}),V1e=e=>{let{children:r,status:o,override:s}=e;const c=S.useContext(Rs),d=S.useMemo(()=>{const f=Object.assign({},c);return s&&delete f.isFormItemInput,o&&(delete f.status,delete f.hasFeedback,delete f.feedbackIcon),f},[o,s,c]);return S.createElement(Rs.Provider,{value:d},r)},QX=S.createContext(void 0),j1e=e=>{const{space:r,form:o,children:s}=e;if(s==null)return null;let c=s;return o&&(c=Ve.createElement(V1e,{override:!0,status:!0},c)),r&&(c=Ve.createElement(gTe,null,c)),c},kP=j1e;var ZX=function(r){if(Oa()&&window.document.documentElement){var o=Array.isArray(r)?r:[r],s=window.document.documentElement;return o.some(function(c){return c in s.style})}return!1},$1e=function(r,o){if(!ZX(r))return!1;var s=document.createElement("div"),c=s.style[r];return s.style[r]=o,s.style[r]!==c};function $9(e,r){return!Array.isArray(e)&&r!==void 0?$1e(e,r):ZX(e)}const H1e=e=>{const{componentCls:r}=e;return{[r]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},z1e=e=>{const{componentCls:r}=e;return{[r]:{position:"relative",maxWidth:"100%",minHeight:1}}},W1e=(e,r)=>{const{prefixCls:o,componentCls:s,gridColumns:c}=e,d={};for(let f=c;f>=0;f--)f===0?(d[`${s}${r}-${f}`]={display:"none"},d[`${s}-push-${f}`]={insetInlineStart:"auto"},d[`${s}-pull-${f}`]={insetInlineEnd:"auto"},d[`${s}${r}-push-${f}`]={insetInlineStart:"auto"},d[`${s}${r}-pull-${f}`]={insetInlineEnd:"auto"},d[`${s}${r}-offset-${f}`]={marginInlineStart:0},d[`${s}${r}-order-${f}`]={order:0}):(d[`${s}${r}-${f}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${f/c*100}%`,maxWidth:`${f/c*100}%`}],d[`${s}${r}-push-${f}`]={insetInlineStart:`${f/c*100}%`},d[`${s}${r}-pull-${f}`]={insetInlineEnd:`${f/c*100}%`},d[`${s}${r}-offset-${f}`]={marginInlineStart:`${f/c*100}%`},d[`${s}${r}-order-${f}`]={order:f});return d[`${s}${r}-flex`]={flex:`var(--${o}${r}-flex)`},d},MP=(e,r)=>W1e(e,r),G1e=(e,r,o)=>({[`@media (min-width: ${Ge(r)})`]:Object.assign({},MP(e,o))}),K1e=()=>({}),q1e=()=>({}),Y1e=To("Grid",H1e,K1e),X1e=e=>({xs:e.screenXSMin,sm:e.screenSMMin,md:e.screenMDMin,lg:e.screenLGMin,xl:e.screenXLMin,xxl:e.screenXXLMin}),J1e=To("Grid",e=>{const r=ai(e,{gridColumns:24}),o=X1e(r);return delete o.xs,[z1e(r),MP(r,""),MP(r,"-xs"),Object.keys(o).map(s=>G1e(r,o[s],`-${s}`)).reduce((s,c)=>Object.assign(Object.assign({},s),c),{})]},q1e),Q1e=e=>{const{componentCls:r,notificationMarginEdge:o,animationMaxHeight:s}=e,c=`${r}-notice`,d=new mr("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),f=new mr("antNotificationTopFadeIn",{"0%":{top:-s,opacity:0},"100%":{top:0,opacity:1}}),v=new mr("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(s).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),g=new mr("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[r]:{[`&${r}-top, &${r}-bottom`]:{marginInline:0,[c]:{marginInline:"auto auto"}},[`&${r}-top`]:{[`${r}-fade-enter${r}-fade-enter-active, ${r}-fade-appear${r}-fade-appear-active`]:{animationName:f}},[`&${r}-bottom`]:{[`${r}-fade-enter${r}-fade-enter-active, ${r}-fade-appear${r}-fade-appear-active`]:{animationName:v}},[`&${r}-topRight, &${r}-bottomRight`]:{[`${r}-fade-enter${r}-fade-enter-active, ${r}-fade-appear${r}-fade-appear-active`]:{animationName:d}},[`&${r}-topLeft, &${r}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:o,_skip_check_:!0},[c]:{marginInlineEnd:"auto",marginInlineStart:0},[`${r}-fade-enter${r}-fade-enter-active, ${r}-fade-appear${r}-fade-appear-active`]:{animationName:g}}}}},Z1e=Q1e,ewe=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],twe={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},nwe=(e,r)=>{const{componentCls:o}=e;return{[`${o}-${r}`]:{[`&${o}-stack > ${o}-notice-wrapper`]:{[r.startsWith("top")?"top":"bottom"]:0,[twe[r]]:{value:0,_skip_check_:!0}}}}},rwe=e=>{const r={};for(let o=1;o<e.notificationStackLayer;o++)r[`&:nth-last-child(${o+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},r)},iwe=e=>{const r={};for(let o=1;o<e.notificationStackLayer;o++)r[`&:nth-last-child(${o+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},r)},owe=e=>{const{componentCls:r}=e;return Object.assign({[`${r}-stack`]:{[`& > ${r}-notice-wrapper`]:Object.assign({transition:`transform ${e.motionDurationSlow}, backdrop-filter 0s`,willChange:"transform, opacity",position:"absolute"},rwe(e))},[`${r}-stack:not(${r}-stack-expanded)`]:{[`& > ${r}-notice-wrapper`]:Object.assign({},iwe(e))},[`${r}-stack${r}-stack-expanded`]:{[`& > ${r}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},ewe.map(o=>nwe(e,o)).reduce((o,s)=>Object.assign(Object.assign({},o),s),{}))},awe=owe,eJ=e=>{const{iconCls:r,componentCls:o,boxShadow:s,fontSizeLG:c,notificationMarginBottom:d,borderRadiusLG:f,colorSuccess:v,colorInfo:g,colorWarning:_,colorError:C,colorTextHeading:b,notificationBg:T,notificationPadding:I,notificationMarginEdge:w,notificationProgressBg:x,notificationProgressHeight:N,fontSize:P,lineHeight:O,width:L,notificationIconSize:M,colorText:F}=e,V=`${o}-notice`;return{position:"relative",marginBottom:d,marginInlineStart:"auto",background:T,borderRadius:f,boxShadow:s,[V]:{padding:I,width:L,maxWidth:`calc(100vw - ${Ge(e.calc(w).mul(2).equal())})`,overflow:"hidden",lineHeight:O,wordWrap:"break-word"},[`${V}-message`]:{marginBottom:e.marginXS,color:b,fontSize:c,lineHeight:e.lineHeightLG},[`${V}-description`]:{fontSize:P,color:F},[`${V}-closable ${V}-message`]:{paddingInlineEnd:e.paddingLG},[`${V}-with-icon ${V}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(M).equal(),fontSize:c},[`${V}-with-icon ${V}-description`]:{marginInlineStart:e.calc(e.marginSM).add(M).equal(),fontSize:P},[`${V}-icon`]:{position:"absolute",fontSize:M,lineHeight:1,[`&-success${r}`]:{color:v},[`&-info${r}`]:{color:g},[`&-warning${r}`]:{color:_},[`&-error${r}`]:{color:C}},[`${V}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},Jb(e)),[`${V}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${Ge(f)} * 2)`,left:{_skip_check_:!0,value:f},right:{_skip_check_:!0,value:f},bottom:0,blockSize:N,border:0,"&, &::-webkit-progress-bar":{borderRadius:f,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:x},"&::-webkit-progress-value":{borderRadius:f,background:x}},[`${V}-actions`]:{float:"right",marginTop:e.marginSM}}},swe=e=>{const{componentCls:r,notificationMarginBottom:o,notificationMarginEdge:s,motionDurationMid:c,motionEaseInOut:d}=e,f=`${r}-notice`,v=new mr("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:o},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[r]:Object.assign(Object.assign({},Os(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:s,_skip_check_:!0},[`${r}-hook-holder`]:{position:"relative"},[`${r}-fade-appear-prepare`]:{opacity:"0 !important"},[`${r}-fade-enter, ${r}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:d,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${r}-fade-leave`]:{animationTimingFunction:d,animationFillMode:"both",animationDuration:c,animationPlayState:"paused"},[`${r}-fade-enter${r}-fade-enter-active, ${r}-fade-appear${r}-fade-appear-active`]:{animationPlayState:"running"},[`${r}-fade-leave${r}-fade-leave-active`]:{animationName:v,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${f}-actions`]:{float:"left"}}})},{[r]:{[`${f}-wrapper`]:Object.assign({},eJ(e))}}]},tJ=e=>({zIndexPopup:e.zIndexPopupBase+Hbe+50,width:384}),nJ=e=>{const r=e.paddingMD,o=e.paddingLG;return ai(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:r,notificationPaddingHorizontal:o,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${Ge(e.paddingMD)} ${Ge(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},rJ=To("Notification",e=>{const r=nJ(e);return[swe(r),Z1e(r),awe(r)]},tJ),cwe=Qb(["Notification","PurePanel"],e=>{const r=`${e.componentCls}-notice`,o=nJ(e);return{[`${r}-pure-panel`]:Object.assign(Object.assign({},eJ(o)),{width:o.width,maxWidth:`calc(100vw - ${Ge(e.calc(o.notificationMarginEdge).mul(2).equal())})`,margin:0})}},tJ);var lwe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function O2(e,r){return r===null||r===!1?null:r||S.createElement(_X,{className:`${e}-close-icon`})}const uwe={success:EX,info:vbe,error:tT,warning:SX},iJ=e=>{const{prefixCls:r,icon:o,type:s,message:c,description:d,actions:f,role:v="alert"}=e;let g=null;return o?g=S.createElement("span",{className:`${r}-icon`},o):s&&(g=S.createElement(uwe[s]||null,{className:$e(`${r}-icon`,`${r}-icon-${s}`)})),S.createElement("div",{className:$e({[`${r}-with-icon`]:g}),role:v},g,S.createElement("div",{className:`${r}-message`},c),S.createElement("div",{className:`${r}-description`},d),f&&S.createElement("div",{className:`${r}-actions`},f))},dwe=e=>{const{prefixCls:r,className:o,icon:s,type:c,message:d,description:f,btn:v,actions:g,closable:_=!0,closeIcon:C,className:b}=e,T=lwe(e,["prefixCls","className","icon","type","message","description","btn","actions","closable","closeIcon","className"]),{getPrefixCls:I}=S.useContext(br),w=g??v,x=r||I("notification"),N=`${x}-notice`,P=_u(x),[O,L,M]=rJ(x,P);return O(S.createElement("div",{className:$e(`${N}-pure-panel`,L,o,M,P)},S.createElement(cwe,{prefixCls:x}),S.createElement(CX,Object.assign({},T,{prefixCls:x,eventKey:"pure",duration:null,closable:_,className:$e({notificationClassName:b}),closeIcon:O2(x,C),content:S.createElement(iJ,{prefixCls:N,icon:s,type:c,message:d,description:f,actions:w})}))))},hwe=dwe;function fwe(e,r,o){let s;switch(e){case"top":s={left:"50%",transform:"translateX(-50%)",right:"auto",top:r,bottom:"auto"};break;case"topLeft":s={left:0,top:r,bottom:"auto"};break;case"topRight":s={right:0,top:r,bottom:"auto"};break;case"bottom":s={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:o};break;case"bottomLeft":s={left:0,top:"auto",bottom:o};break;default:s={right:0,top:"auto",bottom:o};break}return s}function pwe(e){return{motionName:`${e}-fade`}}function mwe(e,r,o){return typeof e<"u"?e:typeof(r==null?void 0:r.closeIcon)<"u"?r.closeIcon:o==null?void 0:o.closeIcon}var gwe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const H9=24,vwe=4.5,Ewe="topRight",_we=e=>{let{children:r,prefixCls:o}=e;const s=_u(o),[c,d,f]=rJ(o,s);return c(Ve.createElement(Abe,{classNames:{list:$e(d,f,s)}},r))},Swe=(e,r)=>{let{prefixCls:o,key:s}=r;return Ve.createElement(_we,{prefixCls:o,key:s},e)},ywe=Ve.forwardRef((e,r)=>{const{top:o,bottom:s,prefixCls:c,getContainer:d,maxCount:f,rtl:v,onAllRemoved:g,stack:_,duration:C,pauseOnHover:b=!0,showProgress:T}=e,{getPrefixCls:I,getPopupContainer:w,notification:x,direction:N}=S.useContext(br),[,P]=ns(),O=c||I("notification"),L=z=>fwe(z,o??H9,s??H9),M=()=>$e({[`${O}-rtl`]:v??N==="rtl"}),F=()=>pwe(O),[V,j]=Mbe({prefixCls:O,style:L,className:M,motion:F,closable:!0,closeIcon:O2(O),duration:C??vwe,getContainer:()=>(d==null?void 0:d())||(w==null?void 0:w())||document.body,maxCount:f,pauseOnHover:b,showProgress:T,onAllRemoved:g,renderNotifications:Swe,stack:_===!1?!1:{threshold:typeof _=="object"?_==null?void 0:_.threshold:void 0,offset:8,gap:P.margin}});return Ve.useImperativeHandle(r,()=>Object.assign(Object.assign({},V),{prefixCls:O,notification:x})),j});function oJ(e){const r=Ve.useRef(null);return Yb(),[Ve.useMemo(()=>{const s=v=>{var g;if(!r.current)return;const{open:_,prefixCls:C,notification:b}=r.current,T=`${C}-notice`,{message:I,description:w,icon:x,type:N,btn:P,actions:O,className:L,style:M,role:F="alert",closeIcon:V,closable:j}=v,z=gwe(v,["message","description","icon","type","btn","actions","className","style","role","closeIcon","closable"]),q=O??P,W=O2(T,mwe(V,e,b));return _(Object.assign(Object.assign({placement:(g=e==null?void 0:e.placement)!==null&&g!==void 0?g:Ewe},z),{content:Ve.createElement(iJ,{prefixCls:T,icon:x,type:N,message:I,description:w,actions:q,role:F}),className:$e(N&&`${T}-${N}`,L,b==null?void 0:b.className),style:Object.assign(Object.assign({},b==null?void 0:b.style),M),closeIcon:W,closable:j??!!W}))},d={open:s,destroy:v=>{var g,_;v!==void 0?(g=r.current)===null||g===void 0||g.close(v):(_=r.current)===null||_===void 0||_.destroy()}};return["success","info","warning","error"].forEach(v=>{d[v]=g=>s(Object.assign(Object.assign({},g),{type:v}))}),d},[]),Ve.createElement(ywe,Object.assign({key:"notification-holder"},e,{ref:r}))]}function Cwe(e){return oJ(e)}const bwe=Ve.createContext({});function Twe(e){return r=>S.createElement(tf,{theme:{token:{motion:!1,zIndexPopupBase:0}}},S.createElement(e,Object.assign({},r)))}const Rwe=(e,r,o,s,c)=>Twe(f=>{const{prefixCls:v,style:g}=f,_=S.useRef(null),[C,b]=S.useState(0),[T,I]=S.useState(0),[w,x]=Sa(!1,{value:f.open}),{getPrefixCls:N}=S.useContext(br),P=N(s||"select",v);S.useEffect(()=>{if(x(!0),typeof ResizeObserver<"u"){const M=new ResizeObserver(V=>{const j=V[0].target;b(j.offsetHeight+8),I(j.offsetWidth)}),F=setInterval(()=>{var V;const j=c?`.${c(P)}`:`.${P}-dropdown`,z=(V=_.current)===null||V===void 0?void 0:V.querySelector(j);z&&(clearInterval(F),M.observe(z))},10);return()=>{clearInterval(F),M.disconnect()}}},[]);let O=Object.assign(Object.assign({},f),{style:Object.assign(Object.assign({},g),{margin:0}),open:w,visible:w,getPopupContainer:()=>_.current});o&&(O=o(O)),r&&Object.assign(O,{[r]:{overflow:{adjustX:!1,adjustY:!1}}});const L={paddingBottom:C,position:"relative",minWidth:T};return S.createElement("div",{ref:_,style:L},S.createElement(e,Object.assign({},O)))}),wwe=Rwe,aJ=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var dT=function(r){var o=r.className,s=r.customizeIcon,c=r.customizeIconProps,d=r.children,f=r.onMouseDown,v=r.onClick,g=typeof s=="function"?s(c):s;return S.createElement("span",{className:o,onMouseDown:function(C){C.preventDefault(),f==null||f(C)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:v,"aria-hidden":!0},g!==void 0?g:S.createElement("span",{className:$e(o.split(/\s+/).map(function(_){return"".concat(_,"-icon")}))},d))},Iwe=function(r,o,s,c,d){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,v=arguments.length>6?arguments[6]:void 0,g=arguments.length>7?arguments[7]:void 0,_=Ve.useMemo(function(){if(on(c)==="object")return c.clearIcon;if(d)return d},[c,d]),C=Ve.useMemo(function(){return!!(!f&&c&&(s.length||v)&&!(g==="combobox"&&v===""))},[c,f,s.length,v,g]);return{allowClear:C,clearIcon:Ve.createElement(dT,{className:"".concat(r,"-clear"),onMouseDown:o,customizeIcon:_},"×")}},sJ=S.createContext(null);function Awe(){return S.useContext(sJ)}function Owe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,r=S.useState(!1),o=Ue(r,2),s=o[0],c=o[1],d=S.useRef(null),f=function(){window.clearTimeout(d.current)};S.useEffect(function(){return f},[]);var v=function(_,C){f(),d.current=window.setTimeout(function(){c(_),C&&C()},e)};return[s,v,f]}function cJ(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,r=S.useRef(null),o=S.useRef(null);S.useEffect(function(){return function(){window.clearTimeout(o.current)}},[]);function s(c){(c||r.current===null)&&(r.current=c),window.clearTimeout(o.current),o.current=window.setTimeout(function(){r.current=null},e)}return[function(){return r.current},s]}function xwe(e,r,o,s){var c=S.useRef(null);c.current={open:r,triggerOpen:o,customizedTrigger:s},S.useEffect(function(){function d(f){var v;if(!((v=c.current)!==null&&v!==void 0&&v.customizedTrigger)){var g=f.target;g.shadowRoot&&f.composed&&(g=f.composedPath()[0]||g),c.current.open&&e().filter(function(_){return _}).every(function(_){return!_.contains(g)&&_!==g})&&c.current.triggerOpen(!1)}}return window.addEventListener("mousedown",d),function(){return window.removeEventListener("mousedown",d)}},[])}function Nwe(e){return e&&![lt.ESC,lt.SHIFT,lt.BACKSPACE,lt.TAB,lt.WIN_KEY,lt.ALT,lt.META,lt.WIN_KEY_RIGHT,lt.CTRL,lt.SEMICOLON,lt.EQUALS,lt.CAPS_LOCK,lt.CONTEXT_MENU,lt.F1,lt.F2,lt.F3,lt.F4,lt.F5,lt.F6,lt.F7,lt.F8,lt.F9,lt.F10,lt.F11,lt.F12].includes(e)}var Pwe=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Op=void 0;function Dwe(e,r){var o=e.prefixCls,s=e.invalidate,c=e.item,d=e.renderItem,f=e.responsive,v=e.responsiveDisabled,g=e.registerSize,_=e.itemKey,C=e.className,b=e.style,T=e.children,I=e.display,w=e.order,x=e.component,N=x===void 0?"div":x,P=An(e,Pwe),O=f&&!I;function L(z){g(_,z)}S.useEffect(function(){return function(){L(null)}},[]);var M=d&&c!==Op?d(c,{index:w}):T,F;s||(F={opacity:O?0:1,height:O?0:Op,overflowY:O?"hidden":Op,order:f?w:Op,pointerEvents:O?"none":Op,position:O?"absolute":Op});var V={};O&&(V["aria-hidden"]=!0);var j=S.createElement(N,Qe({className:$e(!s&&o,C),style:_e(_e({},F),b)},V,P,{ref:r}),M);return f&&(j=S.createElement(Eu,{onResize:function(q){var W=q.offsetWidth;L(W)},disabled:v},j)),j}var Jg=S.forwardRef(Dwe);Jg.displayName="Item";function Lwe(e){if(typeof MessageChannel>"u")oi(e);else{var r=new MessageChannel;r.port1.onmessage=function(){return e()},r.port2.postMessage(void 0)}}function kwe(){var e=S.useRef(null),r=function(s){e.current||(e.current=[],Lwe(function(){Dl.unstable_batchedUpdates(function(){e.current.forEach(function(c){c()}),e.current=null})})),e.current.push(s)};return r}function Cg(e,r){var o=S.useState(r),s=Ue(o,2),c=s[0],d=s[1],f=uo(function(v){e(function(){d(v)})});return[c,f]}var qC=Ve.createContext(null),Mwe=["component"],Fwe=["className"],Uwe=["className"],Bwe=function(r,o){var s=S.useContext(qC);if(!s){var c=r.component,d=c===void 0?"div":c,f=An(r,Mwe);return S.createElement(d,Qe({},f,{ref:o}))}var v=s.className,g=An(s,Fwe),_=r.className,C=An(r,Uwe);return S.createElement(qC.Provider,{value:null},S.createElement(Jg,Qe({ref:o,className:$e(v,_)},g,C)))},lJ=S.forwardRef(Bwe);lJ.displayName="RawItem";var Vwe=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],uJ="responsive",dJ="invalidate";function jwe(e){return"+ ".concat(e.length," ...")}function $we(e,r){var o=e.prefixCls,s=o===void 0?"rc-overflow":o,c=e.data,d=c===void 0?[]:c,f=e.renderItem,v=e.renderRawItem,g=e.itemKey,_=e.itemWidth,C=_===void 0?10:_,b=e.ssr,T=e.style,I=e.className,w=e.maxCount,x=e.renderRest,N=e.renderRawRest,P=e.suffix,O=e.component,L=O===void 0?"div":O,M=e.itemComponent,F=e.onVisibleChange,V=An(e,Vwe),j=b==="full",z=kwe(),q=Cg(z,null),W=Ue(q,2),J=W[0],te=W[1],ee=J||0,oe=Cg(z,new Map),pe=Ue(oe,2),ne=pe[0],ae=pe[1],re=Cg(z,0),he=Ue(re,2),fe=he[0],se=he[1],de=Cg(z,0),ve=Ue(de,2),ie=ve[0],be=ve[1],Re=Cg(z,0),Pe=Ue(Re,2),Ie=Pe[0],xe=Pe[1],We=S.useState(null),De=Ue(We,2),Ae=De[0],je=De[1],Je=S.useState(null),Fe=Ue(Je,2),ke=Fe[0],ht=Fe[1],Ze=S.useMemo(function(){return ke===null&&j?Number.MAX_SAFE_INTEGER:ke||0},[ke,J]),mt=S.useState(!1),Rt=Ue(mt,2),ut=Rt[0],ot=Rt[1],ze="".concat(s,"-item"),tt=Math.max(fe,ie),bt=w===uJ,Nt=d.length&&bt,wt=w===dJ,Xt=Nt||typeof w=="number"&&d.length>w,$t=S.useMemo(function(){var Ut=d;return Nt?J===null&&j?Ut=d:Ut=d.slice(0,Math.min(d.length,ee/C)):typeof w=="number"&&(Ut=d.slice(0,w)),Ut},[d,C,J,w,Nt]),Lt=S.useMemo(function(){return Nt?d.slice(Ze+1):d.slice($t.length)},[d,$t,Nt,Ze]),Wt=S.useCallback(function(Ut,kt){var Ct;return typeof g=="function"?g(Ut):(Ct=g&&(Ut==null?void 0:Ut[g]))!==null&&Ct!==void 0?Ct:kt},[g]),Jt=S.useCallback(f||function(Ut){return Ut},[f]);function Ft(Ut,kt,Ct){ke===Ut&&(kt===void 0||kt===Ae)||(ht(Ut),Ct||(ot(Ut<d.length-1),F==null||F(Ut)),kt!==void 0&&je(kt))}function yt(Ut,kt){te(kt.clientWidth)}function It(Ut,kt){ae(function(Ct){var Pn=new Map(Ct);return kt===null?Pn.delete(Ut):Pn.set(Ut,kt),Pn})}function ft(Ut,kt){be(kt),se(ie)}function Pt(Ut,kt){xe(kt)}function Cn(Ut){return ne.get(Wt($t[Ut],Ut))}Cr(function(){if(ee&&typeof tt=="number"&&$t){var Ut=Ie,kt=$t.length,Ct=kt-1;if(!kt){Ft(0,null);return}for(var Pn=0;Pn<kt;Pn+=1){var tn=Cn(Pn);if(j&&(tn=tn||0),tn===void 0){Ft(Pn-1,void 0,!0);break}if(Ut+=tn,Ct===0&&Ut<=ee||Pn===Ct-1&&Ut+Cn(Ct)<=ee){Ft(Ct,null);break}else if(Ut+tt>ee){Ft(Pn-1,Ut-tn-Ie+ie);break}}P&&Cn(0)+Ie>ee&&je(null)}},[ee,ne,ie,Ie,Wt,$t]);var bn=ut&&!!Lt.length,si={};Ae!==null&&Nt&&(si={position:"absolute",left:Ae,top:0});var Qr={prefixCls:ze,responsive:Nt,component:M,invalidate:wt},vi=v?function(Ut,kt){var Ct=Wt(Ut,kt);return S.createElement(qC.Provider,{key:Ct,value:_e(_e({},Qr),{},{order:kt,item:Ut,itemKey:Ct,registerSize:It,display:kt<=Ze})},v(Ut,kt))}:function(Ut,kt){var Ct=Wt(Ut,kt);return S.createElement(Jg,Qe({},Qr,{order:kt,key:Ct,item:Ut,renderItem:Jt,itemKey:Ct,registerSize:It,display:kt<=Ze}))},xr={order:bn?Ze:Number.MAX_SAFE_INTEGER,className:"".concat(ze,"-rest"),registerSize:ft,display:bn},nr=x||jwe,ir=N?S.createElement(qC.Provider,{value:_e(_e({},Qr),xr)},N(Lt)):S.createElement(Jg,Qe({},Qr,xr),typeof nr=="function"?nr(Lt):nr),Tn=S.createElement(L,Qe({className:$e(!wt&&s,I),style:T,ref:r},V),$t.map(vi),Xt?ir:null,P&&S.createElement(Jg,Qe({},Qr,{responsive:bt,responsiveDisabled:!Nt,order:Ze,className:"".concat(ze,"-suffix"),registerSize:Pt,display:!0,style:si}),P));return bt?S.createElement(Eu,{onResize:yt,disabled:!Nt},Tn):Tn}var Nl=S.forwardRef($we);Nl.displayName="Overflow";Nl.Item=lJ;Nl.RESPONSIVE=uJ;Nl.INVALIDATE=dJ;var Hwe=function(r,o){var s,c=r.prefixCls,d=r.id,f=r.inputElement,v=r.disabled,g=r.tabIndex,_=r.autoFocus,C=r.autoComplete,b=r.editable,T=r.activeDescendantId,I=r.value,w=r.maxLength,x=r.onKeyDown,N=r.onMouseDown,P=r.onChange,O=r.onPaste,L=r.onCompositionStart,M=r.onCompositionEnd,F=r.onBlur,V=r.open,j=r.attrs,z=f||S.createElement("input",null),q=z,W=q.ref,J=q.props,te=J.onKeyDown,ee=J.onChange,oe=J.onMouseDown,pe=J.onCompositionStart,ne=J.onCompositionEnd,ae=J.onBlur,re=J.style;return"maxLength"in z.props,z=S.cloneElement(z,_e(_e(_e({type:"search"},J),{},{id:d,ref:qc(o,W),disabled:v,tabIndex:g,autoComplete:C||"off",autoFocus:_,className:$e("".concat(c,"-selection-search-input"),(s=z)===null||s===void 0||(s=s.props)===null||s===void 0?void 0:s.className),role:"combobox","aria-expanded":V||!1,"aria-haspopup":"listbox","aria-owns":"".concat(d,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(d,"_list"),"aria-activedescendant":V?T:void 0},j),{},{value:b?I:"",maxLength:w,readOnly:!b,unselectable:b?null:"on",style:_e(_e({},re),{},{opacity:b?null:0}),onKeyDown:function(fe){x(fe),te&&te(fe)},onMouseDown:function(fe){N(fe),oe&&oe(fe)},onChange:function(fe){P(fe),ee&&ee(fe)},onCompositionStart:function(fe){L(fe),pe&&pe(fe)},onCompositionEnd:function(fe){M(fe),ne&&ne(fe)},onPaste:O,onBlur:function(fe){F(fe),ae&&ae(fe)}})),z},hJ=S.forwardRef(Hwe);function fJ(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}var zwe=typeof window<"u"&&window.document&&window.document.documentElement,Wwe=zwe;function Gwe(e){return e!=null}function Kwe(e){return!e&&e!==0}function z9(e){return["string","number"].includes(on(e))}function pJ(e){var r=void 0;return e&&(z9(e.title)?r=e.title.toString():z9(e.label)&&(r=e.label.toString())),r}function qwe(e,r){Wwe?S.useLayoutEffect(e,r):S.useEffect(e,r)}function Ywe(e){var r;return(r=e.key)!==null&&r!==void 0?r:e.value}var W9=function(r){r.preventDefault(),r.stopPropagation()},Xwe=function(r){var o=r.id,s=r.prefixCls,c=r.values,d=r.open,f=r.searchValue,v=r.autoClearSearchValue,g=r.inputRef,_=r.placeholder,C=r.disabled,b=r.mode,T=r.showSearch,I=r.autoFocus,w=r.autoComplete,x=r.activeDescendantId,N=r.tabIndex,P=r.removeIcon,O=r.maxTagCount,L=r.maxTagTextLength,M=r.maxTagPlaceholder,F=M===void 0?function(Je){return"+ ".concat(Je.length," ...")}:M,V=r.tagRender,j=r.onToggleOpen,z=r.onRemove,q=r.onInputChange,W=r.onInputPaste,J=r.onInputKeyDown,te=r.onInputMouseDown,ee=r.onInputCompositionStart,oe=r.onInputCompositionEnd,pe=r.onInputBlur,ne=S.useRef(null),ae=S.useState(0),re=Ue(ae,2),he=re[0],fe=re[1],se=S.useState(!1),de=Ue(se,2),ve=de[0],ie=de[1],be="".concat(s,"-selection"),Re=d||b==="multiple"&&v===!1||b==="tags"?f:"",Pe=b==="tags"||b==="multiple"&&v===!1||T&&(d||ve);qwe(function(){fe(ne.current.scrollWidth)},[Re]);var Ie=function(Fe,ke,ht,Ze,mt){return S.createElement("span",{title:pJ(Fe),className:$e("".concat(be,"-item"),Ce({},"".concat(be,"-item-disabled"),ht))},S.createElement("span",{className:"".concat(be,"-item-content")},ke),Ze&&S.createElement(dT,{className:"".concat(be,"-item-remove"),onMouseDown:W9,onClick:mt,customizeIcon:P},"×"))},xe=function(Fe,ke,ht,Ze,mt,Rt){var ut=function(ze){W9(ze),j(!d)};return S.createElement("span",{onMouseDown:ut},V({label:ke,value:Fe,disabled:ht,closable:Ze,onClose:mt,isMaxTag:!!Rt}))},We=function(Fe){var ke=Fe.disabled,ht=Fe.label,Ze=Fe.value,mt=!C&&!ke,Rt=ht;if(typeof L=="number"&&(typeof ht=="string"||typeof ht=="number")){var ut=String(Rt);ut.length>L&&(Rt="".concat(ut.slice(0,L),"..."))}var ot=function(tt){tt&&tt.stopPropagation(),z(Fe)};return typeof V=="function"?xe(Ze,Rt,ke,mt,ot):Ie(Fe,Rt,ke,mt,ot)},De=function(Fe){if(!c.length)return null;var ke=typeof F=="function"?F(Fe):F;return typeof V=="function"?xe(void 0,ke,!1,!1,void 0,!0):Ie({title:ke},ke,!1)},Ae=S.createElement("div",{className:"".concat(be,"-search"),style:{width:he},onFocus:function(){ie(!0)},onBlur:function(){ie(!1)}},S.createElement(hJ,{ref:g,open:d,prefixCls:s,id:o,inputElement:null,disabled:C,autoFocus:I,autoComplete:w,editable:Pe,activeDescendantId:x,value:Re,onKeyDown:J,onMouseDown:te,onChange:q,onPaste:W,onCompositionStart:ee,onCompositionEnd:oe,onBlur:pe,tabIndex:N,attrs:Wh(r,!0)}),S.createElement("span",{ref:ne,className:"".concat(be,"-search-mirror"),"aria-hidden":!0},Re," ")),je=S.createElement(Nl,{prefixCls:"".concat(be,"-overflow"),data:c,renderItem:We,renderRest:De,suffix:Ae,itemKey:Ywe,maxCount:O});return S.createElement("span",{className:"".concat(be,"-wrap")},je,!c.length&&!Re&&S.createElement("span",{className:"".concat(be,"-placeholder")},_))},Jwe=function(r){var o=r.inputElement,s=r.prefixCls,c=r.id,d=r.inputRef,f=r.disabled,v=r.autoFocus,g=r.autoComplete,_=r.activeDescendantId,C=r.mode,b=r.open,T=r.values,I=r.placeholder,w=r.tabIndex,x=r.showSearch,N=r.searchValue,P=r.activeValue,O=r.maxLength,L=r.onInputKeyDown,M=r.onInputMouseDown,F=r.onInputChange,V=r.onInputPaste,j=r.onInputCompositionStart,z=r.onInputCompositionEnd,q=r.onInputBlur,W=r.title,J=S.useState(!1),te=Ue(J,2),ee=te[0],oe=te[1],pe=C==="combobox",ne=pe||x,ae=T[0],re=N||"";pe&&P&&!ee&&(re=P),S.useEffect(function(){pe&&oe(!1)},[pe,P]);var he=C!=="combobox"&&!b&&!x?!1:!!re,fe=W===void 0?pJ(ae):W,se=S.useMemo(function(){return ae?null:S.createElement("span",{className:"".concat(s,"-selection-placeholder"),style:he?{visibility:"hidden"}:void 0},I)},[ae,he,I,s]);return S.createElement("span",{className:"".concat(s,"-selection-wrap")},S.createElement("span",{className:"".concat(s,"-selection-search")},S.createElement(hJ,{ref:d,prefixCls:s,id:c,open:b,inputElement:o,disabled:f,autoFocus:v,autoComplete:g,editable:ne,activeDescendantId:_,value:re,onKeyDown:L,onMouseDown:M,onChange:function(ve){oe(!0),F(ve)},onPaste:V,onCompositionStart:j,onCompositionEnd:z,onBlur:q,tabIndex:w,attrs:Wh(r,!0),maxLength:pe?O:void 0})),!pe&&ae?S.createElement("span",{className:"".concat(s,"-selection-item"),title:fe,style:he?{visibility:"hidden"}:void 0},ae.label):null,se)},Qwe=function(r,o){var s=S.useRef(null),c=S.useRef(!1),d=r.prefixCls,f=r.open,v=r.mode,g=r.showSearch,_=r.tokenWithEnter,C=r.disabled,b=r.prefix,T=r.autoClearSearchValue,I=r.onSearch,w=r.onSearchSubmit,x=r.onToggleOpen,N=r.onInputKeyDown,P=r.onInputBlur,O=r.domRef;S.useImperativeHandle(o,function(){return{focus:function(fe){s.current.focus(fe)},blur:function(){s.current.blur()}}});var L=cJ(0),M=Ue(L,2),F=M[0],V=M[1],j=function(fe){var se=fe.which,de=s.current instanceof HTMLTextAreaElement;!de&&f&&(se===lt.UP||se===lt.DOWN)&&fe.preventDefault(),N&&N(fe),se===lt.ENTER&&v==="tags"&&!c.current&&!f&&(w==null||w(fe.target.value)),!(de&&!f&&~[lt.UP,lt.DOWN,lt.LEFT,lt.RIGHT].indexOf(se))&&Nwe(se)&&x(!0)},z=function(){V(!0)},q=S.useRef(null),W=function(fe){I(fe,!0,c.current)!==!1&&x(!0)},J=function(){c.current=!0},te=function(fe){c.current=!1,v!=="combobox"&&W(fe.target.value)},ee=function(fe){var se=fe.target.value;if(_&&q.current&&/[\r\n]/.test(q.current)){var de=q.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");se=se.replace(de,q.current)}q.current=null,W(se)},oe=function(fe){var se=fe.clipboardData,de=se==null?void 0:se.getData("text");q.current=de||""},pe=function(fe){var se=fe.target;if(se!==s.current){var de=document.body.style.msTouchAction!==void 0;de?setTimeout(function(){s.current.focus()}):s.current.focus()}},ne=function(fe){var se=F();fe.target!==s.current&&!se&&!(v==="combobox"&&C)&&fe.preventDefault(),(v!=="combobox"&&(!g||!se)||!f)&&(f&&T!==!1&&I("",!0,!1),x())},ae={inputRef:s,onInputKeyDown:j,onInputMouseDown:z,onInputChange:ee,onInputPaste:oe,onInputCompositionStart:J,onInputCompositionEnd:te,onInputBlur:P},re=v==="multiple"||v==="tags"?S.createElement(Xwe,Qe({},r,ae)):S.createElement(Jwe,Qe({},r,ae));return S.createElement("div",{ref:O,className:"".concat(d,"-selector"),onClick:pe,onMouseDown:ne},b&&S.createElement("div",{className:"".concat(d,"-prefix")},b),re)},Zwe=S.forwardRef(Qwe);function eIe(e){var r=e.prefixCls,o=e.align,s=e.arrow,c=e.arrowPos,d=s||{},f=d.className,v=d.content,g=c.x,_=g===void 0?0:g,C=c.y,b=C===void 0?0:C,T=S.useRef();if(!o||!o.points)return null;var I={position:"absolute"};if(o.autoArrow!==!1){var w=o.points[0],x=o.points[1],N=w[0],P=w[1],O=x[0],L=x[1];N===O||!["t","b"].includes(N)?I.top=b:N==="t"?I.top=0:I.bottom=0,P===L||!["l","r"].includes(P)?I.left=_:P==="l"?I.left=0:I.right=0}return S.createElement("div",{ref:T,className:$e("".concat(r,"-arrow"),f),style:I},v)}function tIe(e){var r=e.prefixCls,o=e.open,s=e.zIndex,c=e.mask,d=e.motion;return c?S.createElement(ef,Qe({},d,{motionAppear:!0,visible:o,removeOnLeave:!0}),function(f){var v=f.className;return S.createElement("div",{style:{zIndex:s},className:$e("".concat(r,"-mask"),v)})}):null}var nIe=S.memo(function(e){var r=e.children;return r},function(e,r){return r.cache}),rIe=S.forwardRef(function(e,r){var o=e.popup,s=e.className,c=e.prefixCls,d=e.style,f=e.target,v=e.onVisibleChanged,g=e.open,_=e.keepDom,C=e.fresh,b=e.onClick,T=e.mask,I=e.arrow,w=e.arrowPos,x=e.align,N=e.motion,P=e.maskMotion,O=e.forceRender,L=e.getPopupContainer,M=e.autoDestroy,F=e.portal,V=e.zIndex,j=e.onMouseEnter,z=e.onMouseLeave,q=e.onPointerEnter,W=e.onPointerDownCapture,J=e.ready,te=e.offsetX,ee=e.offsetY,oe=e.offsetR,pe=e.offsetB,ne=e.onAlign,ae=e.onPrepare,re=e.stretch,he=e.targetWidth,fe=e.targetHeight,se=typeof o=="function"?o():o,de=g||_,ve=(L==null?void 0:L.length)>0,ie=S.useState(!L||!ve),be=Ue(ie,2),Re=be[0],Pe=be[1];if(Cr(function(){!Re&&ve&&f&&Pe(!0)},[Re,ve,f]),!Re)return null;var Ie="auto",xe={left:"-1000vw",top:"-1000vh",right:Ie,bottom:Ie};if(J||!g){var We,De=x.points,Ae=x.dynamicInset||((We=x._experimental)===null||We===void 0?void 0:We.dynamicInset),je=Ae&&De[0][1]==="r",Je=Ae&&De[0][0]==="b";je?(xe.right=oe,xe.left=Ie):(xe.left=te,xe.right=Ie),Je?(xe.bottom=pe,xe.top=Ie):(xe.top=ee,xe.bottom=Ie)}var Fe={};return re&&(re.includes("height")&&fe?Fe.height=fe:re.includes("minHeight")&&fe&&(Fe.minHeight=fe),re.includes("width")&&he?Fe.width=he:re.includes("minWidth")&&he&&(Fe.minWidth=he)),g||(Fe.pointerEvents="none"),S.createElement(F,{open:O||de,getContainer:L&&function(){return L(f)},autoDestroy:M},S.createElement(tIe,{prefixCls:c,open:g,zIndex:V,mask:T,motion:P}),S.createElement(Eu,{onResize:ne,disabled:!g},function(ke){return S.createElement(ef,Qe({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:O,leavedClassName:"".concat(c,"-hidden")},N,{onAppearPrepare:ae,onEnterPrepare:ae,visible:g,onVisibleChanged:function(Ze){var mt;N==null||(mt=N.onVisibleChanged)===null||mt===void 0||mt.call(N,Ze),v(Ze)}}),function(ht,Ze){var mt=ht.className,Rt=ht.style,ut=$e(c,mt,s);return S.createElement("div",{ref:qc(ke,r,Ze),className:ut,style:_e(_e(_e(_e({"--arrow-x":"".concat(w.x||0,"px"),"--arrow-y":"".concat(w.y||0,"px")},xe),Fe),Rt),{},{boxSizing:"border-box",zIndex:V},d),onMouseEnter:j,onMouseLeave:z,onPointerEnter:q,onClick:b,onPointerDownCapture:W},I&&S.createElement(eIe,{prefixCls:c,arrow:I,arrowPos:w,align:x}),S.createElement(nIe,{cache:!g&&!C},se))})}))}),iIe=S.forwardRef(function(e,r){var o=e.children,s=e.getTriggerDOMNode,c=Om(o),d=S.useCallback(function(v){a2(r,s?s(v):v)},[s]),f=Am(d,Wv(o));return c?S.cloneElement(o,{ref:f}):o}),G9=S.createContext(null);function K9(e){return e?Array.isArray(e)?e:[e]:[]}function oIe(e,r,o,s){return S.useMemo(function(){var c=K9(o??r),d=K9(s??r),f=new Set(c),v=new Set(d);return e&&(f.has("hover")&&(f.delete("hover"),f.add("click")),v.has("hover")&&(v.delete("hover"),v.add("click"))),[f,v]},[e,r,o,s])}function aIe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;return o?e[0]===r[0]:e[0]===r[0]&&e[1]===r[1]}function sIe(e,r,o,s){for(var c=o.points,d=Object.keys(e),f=0;f<d.length;f+=1){var v,g=d[f];if(aIe((v=e[g])===null||v===void 0?void 0:v.points,c,s))return"".concat(r,"-placement-").concat(g)}return""}function q9(e,r,o,s){return r||(o?{motionName:"".concat(e,"-").concat(o)}:s?{motionName:s}:null)}function Qv(e){return e.ownerDocument.defaultView}function FP(e){for(var r=[],o=e==null?void 0:e.parentElement,s=["hidden","scroll","clip","auto"];o;){var c=Qv(o).getComputedStyle(o),d=c.overflowX,f=c.overflowY,v=c.overflow;[d,f,v].some(function(g){return s.includes(g)})&&r.push(o),o=o.parentElement}return r}function Nv(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?r:e}function bg(e){return Nv(parseFloat(e),0)}function Y9(e,r){var o=_e({},e);return(r||[]).forEach(function(s){if(!(s instanceof HTMLBodyElement||s instanceof HTMLHtmlElement)){var c=Qv(s).getComputedStyle(s),d=c.overflow,f=c.overflowClipMargin,v=c.borderTopWidth,g=c.borderBottomWidth,_=c.borderLeftWidth,C=c.borderRightWidth,b=s.getBoundingClientRect(),T=s.offsetHeight,I=s.clientHeight,w=s.offsetWidth,x=s.clientWidth,N=bg(v),P=bg(g),O=bg(_),L=bg(C),M=Nv(Math.round(b.width/w*1e3)/1e3),F=Nv(Math.round(b.height/T*1e3)/1e3),V=(w-x-O-L)*M,j=(T-I-N-P)*F,z=N*F,q=P*F,W=O*M,J=L*M,te=0,ee=0;if(d==="clip"){var oe=bg(f);te=oe*M,ee=oe*F}var pe=b.x+W-te,ne=b.y+z-ee,ae=pe+b.width+2*te-W-J-V,re=ne+b.height+2*ee-z-q-j;o.left=Math.max(o.left,pe),o.top=Math.max(o.top,ne),o.right=Math.min(o.right,ae),o.bottom=Math.min(o.bottom,re)}}),o}function X9(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o="".concat(r),s=o.match(/^(.*)\%$/);return s?e*(parseFloat(s[1])/100):parseFloat(o)}function J9(e,r){var o=r||[],s=Ue(o,2),c=s[0],d=s[1];return[X9(e.width,c),X9(e.height,d)]}function Q9(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function xp(e,r){var o=r[0],s=r[1],c,d;return o==="t"?d=e.y:o==="b"?d=e.y+e.height:d=e.y+e.height/2,s==="l"?c=e.x:s==="r"?c=e.x+e.width:c=e.x+e.width/2,{x:c,y:d}}function rd(e,r){var o={t:"b",b:"t",l:"r",r:"l"};return e.map(function(s,c){return c===r?o[s]||"c":s}).join("")}function cIe(e,r,o,s,c,d,f){var v=S.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:c[s]||{}}),g=Ue(v,2),_=g[0],C=g[1],b=S.useRef(0),T=S.useMemo(function(){return r?FP(r):[]},[r]),I=S.useRef({}),w=function(){I.current={}};e||w();var x=uo(function(){if(r&&o&&e){let Ho=function(bu,Jc){var Tu=arguments.length>2&&arguments[2]!==void 0?arguments[2]:tt,cf=ie.x+bu,Dd=ie.y+Jc,Um=cf+je,Qt=Dd+Ae,wn=Math.max(cf,Tu.left),Fr=Math.max(Dd,Tu.top),Oi=Math.min(Um,Tu.right),pi=Math.min(Qt,Tu.bottom);return Math.max(0,(Oi-wn)*(pi-Fr))},Cu=function(){$r=ie.y+Ct,ci=$r+Ae,Zr=ie.x+kt,Xi=Zr+je};var cE=Ho,lE=Cu,O,L,M,F,V=r,j=V.ownerDocument,z=Qv(V),q=z.getComputedStyle(V),W=q.width,J=q.height,te=q.position,ee=V.style.left,oe=V.style.top,pe=V.style.right,ne=V.style.bottom,ae=V.style.overflow,re=_e(_e({},c[s]),d),he=j.createElement("div");(O=V.parentElement)===null||O===void 0||O.appendChild(he),he.style.left="".concat(V.offsetLeft,"px"),he.style.top="".concat(V.offsetTop,"px"),he.style.position=te,he.style.height="".concat(V.offsetHeight,"px"),he.style.width="".concat(V.offsetWidth,"px"),V.style.left="0",V.style.top="0",V.style.right="auto",V.style.bottom="auto",V.style.overflow="hidden";var fe;if(Array.isArray(o))fe={x:o[0],y:o[1],width:0,height:0};else{var se,de,ve=o.getBoundingClientRect();ve.x=(se=ve.x)!==null&&se!==void 0?se:ve.left,ve.y=(de=ve.y)!==null&&de!==void 0?de:ve.top,fe={x:ve.x,y:ve.y,width:ve.width,height:ve.height}}var ie=V.getBoundingClientRect();ie.x=(L=ie.x)!==null&&L!==void 0?L:ie.left,ie.y=(M=ie.y)!==null&&M!==void 0?M:ie.top;var be=j.documentElement,Re=be.clientWidth,Pe=be.clientHeight,Ie=be.scrollWidth,xe=be.scrollHeight,We=be.scrollTop,De=be.scrollLeft,Ae=ie.height,je=ie.width,Je=fe.height,Fe=fe.width,ke={left:0,top:0,right:Re,bottom:Pe},ht={left:-De,top:-We,right:Ie-De,bottom:xe-We},Ze=re.htmlRegion,mt="visible",Rt="visibleFirst";Ze!=="scroll"&&Ze!==Rt&&(Ze=mt);var ut=Ze===Rt,ot=Y9(ht,T),ze=Y9(ke,T),tt=Ze===mt?ze:ot,bt=ut?ze:tt;V.style.left="auto",V.style.top="auto",V.style.right="0",V.style.bottom="0";var Nt=V.getBoundingClientRect();V.style.left=ee,V.style.top=oe,V.style.right=pe,V.style.bottom=ne,V.style.overflow=ae,(F=V.parentElement)===null||F===void 0||F.removeChild(he);var wt=Nv(Math.round(je/parseFloat(W)*1e3)/1e3),Xt=Nv(Math.round(Ae/parseFloat(J)*1e3)/1e3);if(wt===0||Xt===0||_v(o)&&!iT(o))return;var $t=re.offset,Lt=re.targetOffset,Wt=J9(ie,$t),Jt=Ue(Wt,2),Ft=Jt[0],yt=Jt[1],It=J9(fe,Lt),ft=Ue(It,2),Pt=ft[0],Cn=ft[1];fe.x-=Pt,fe.y-=Cn;var bn=re.points||[],si=Ue(bn,2),Qr=si[0],vi=si[1],xr=Q9(vi),nr=Q9(Qr),ir=xp(fe,xr),Tn=xp(ie,nr),Ut=_e({},re),kt=ir.x-Tn.x+Ft,Ct=ir.y-Tn.y+yt,Pn=Ho(kt,Ct),tn=Ho(kt,Ct,ze),pt=xp(fe,["t","l"]),gt=xp(ie,["t","l"]),Ht=xp(fe,["b","r"]),Gt=xp(ie,["b","r"]),Bt=re.overflow||{},rn=Bt.adjustX,or=Bt.adjustY,Gn=Bt.shiftX,Fn=Bt.shiftY,Zn=function(Jc){return typeof Jc=="boolean"?Jc:Jc>=0},$r,ci,Zr,Xi;Cu();var dr=Zn(or),li=nr[0]===xr[0];if(dr&&nr[0]==="t"&&(ci>bt.bottom||I.current.bt)){var _t=Ct;li?_t-=Ae-Je:_t=pt.y-Gt.y-yt;var xt=Ho(kt,_t),gn=Ho(kt,_t,ze);xt>Pn||xt===Pn&&(!ut||gn>=tn)?(I.current.bt=!0,Ct=_t,yt=-yt,Ut.points=[rd(nr,0),rd(xr,0)]):I.current.bt=!1}if(dr&&nr[0]==="b"&&($r<bt.top||I.current.tb)){var Dn=Ct;li?Dn+=Ae-Je:Dn=Ht.y-gt.y-yt;var sn=Ho(kt,Dn),Ui=Ho(kt,Dn,ze);sn>Pn||sn===Pn&&(!ut||Ui>=tn)?(I.current.tb=!0,Ct=Dn,yt=-yt,Ut.points=[rd(nr,0),rd(xr,0)]):I.current.tb=!1}var Bi=Zn(rn),La=nr[1]===xr[1];if(Bi&&nr[1]==="l"&&(Xi>bt.right||I.current.rl)){var nn=kt;La?nn-=je-Fe:nn=pt.x-Gt.x-Ft;var Rn=Ho(nn,Ct),Kn=Ho(nn,Ct,ze);Rn>Pn||Rn===Pn&&(!ut||Kn>=tn)?(I.current.rl=!0,kt=nn,Ft=-Ft,Ut.points=[rd(nr,1),rd(xr,1)]):I.current.rl=!1}if(Bi&&nr[1]==="r"&&(Zr<bt.left||I.current.lr)){var fi=kt;La?fi+=je-Fe:fi=Ht.x-gt.x-Ft;var ra=Ho(fi,Ct),Yc=Ho(fi,Ct,ze);ra>Pn||ra===Pn&&(!ut||Yc>=tn)?(I.current.lr=!0,kt=fi,Ft=-Ft,Ut.points=[rd(nr,1),rd(xr,1)]):I.current.lr=!1}Cu();var Ro=Gn===!0?0:Gn;typeof Ro=="number"&&(Zr<ze.left&&(kt-=Zr-ze.left-Ft,fe.x+Fe<ze.left+Ro&&(kt+=fe.x-ze.left+Fe-Ro)),Xi>ze.right&&(kt-=Xi-ze.right-Ft,fe.x>ze.right-Ro&&(kt+=fe.x-ze.right+Ro)));var Vi=Fn===!0?0:Fn;typeof Vi=="number"&&($r<ze.top&&(Ct-=$r-ze.top-yt,fe.y+Je<ze.top+Vi&&(Ct+=fe.y-ze.top+Je-Vi)),ci>ze.bottom&&(Ct-=ci-ze.bottom-yt,fe.y>ze.bottom-Vi&&(Ct+=fe.y-ze.bottom+Vi)));var ka=ie.x+kt,Ns=ka+je,Un=ie.y+Ct,Xc=Un+Ae,vr=fe.x,Kt=vr+Fe,Vt=fe.y,Er=Vt+Je,_r=Math.max(ka,vr),Mr=Math.min(Ns,Kt),ui=(_r+Mr)/2,Vo=ui-ka,ji=Math.max(Un,Vt),wo=Math.min(Xc,Er),so=(ji+wo)/2,jo=so-Un;f==null||f(r,Ut);var ia=Nt.right-ie.x-(kt+ie.width),$o=Nt.bottom-ie.y-(Ct+ie.height);wt===1&&(kt=Math.round(kt),ia=Math.round(ia)),Xt===1&&(Ct=Math.round(Ct),$o=Math.round($o));var sf={ready:!0,offsetX:kt/wt,offsetY:Ct/Xt,offsetR:ia/wt,offsetB:$o/Xt,arrowX:Vo/wt,arrowY:jo/Xt,scaleX:wt,scaleY:Xt,align:Ut};C(sf)}}),N=function(){b.current+=1;var L=b.current;Promise.resolve().then(function(){b.current===L&&x()})},P=function(){C(function(L){return _e(_e({},L),{},{ready:!1})})};return Cr(P,[s]),Cr(function(){e||P()},[e]),[_.ready,_.offsetX,_.offsetY,_.offsetR,_.offsetB,_.arrowX,_.arrowY,_.scaleX,_.scaleY,_.align,N]}function lIe(e,r,o,s,c){Cr(function(){if(e&&r&&o){let T=function(){s(),c()};var b=T,d=r,f=o,v=FP(d),g=FP(f),_=Qv(f),C=new Set([_].concat(vt(v),vt(g)));return C.forEach(function(I){I.addEventListener("scroll",T,{passive:!0})}),_.addEventListener("resize",T,{passive:!0}),s(),function(){C.forEach(function(I){I.removeEventListener("scroll",T),_.removeEventListener("resize",T)})}}},[e,r,o])}function uIe(e,r,o,s,c,d,f,v){var g=S.useRef(e);g.current=e;var _=S.useRef(!1);S.useEffect(function(){if(r&&s&&(!c||d)){var b=function(){_.current=!1},T=function(N){var P;g.current&&!f(((P=N.composedPath)===null||P===void 0||(P=P.call(N))===null||P===void 0?void 0:P[0])||N.target)&&!_.current&&v(!1)},I=Qv(s);I.addEventListener("pointerdown",b,!0),I.addEventListener("mousedown",T,!0),I.addEventListener("contextmenu",T,!0);var w=zC(o);return w&&(w.addEventListener("mousedown",T,!0),w.addEventListener("contextmenu",T,!0)),function(){I.removeEventListener("pointerdown",b,!0),I.removeEventListener("mousedown",T,!0),I.removeEventListener("contextmenu",T,!0),w&&(w.removeEventListener("mousedown",T,!0),w.removeEventListener("contextmenu",T,!0))}}},[r,o,s,c,d]);function C(){_.current=!0}return C}var dIe=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function hIe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:jX,r=S.forwardRef(function(o,s){var c=o.prefixCls,d=c===void 0?"rc-trigger-popup":c,f=o.children,v=o.action,g=v===void 0?"hover":v,_=o.showAction,C=o.hideAction,b=o.popupVisible,T=o.defaultPopupVisible,I=o.onPopupVisibleChange,w=o.afterPopupVisibleChange,x=o.mouseEnterDelay,N=o.mouseLeaveDelay,P=N===void 0?.1:N,O=o.focusDelay,L=o.blurDelay,M=o.mask,F=o.maskClosable,V=F===void 0?!0:F,j=o.getPopupContainer,z=o.forceRender,q=o.autoDestroy,W=o.destroyPopupOnHide,J=o.popup,te=o.popupClassName,ee=o.popupStyle,oe=o.popupPlacement,pe=o.builtinPlacements,ne=pe===void 0?{}:pe,ae=o.popupAlign,re=o.zIndex,he=o.stretch,fe=o.getPopupClassNameFromAlign,se=o.fresh,de=o.alignPoint,ve=o.onPopupClick,ie=o.onPopupAlign,be=o.arrow,Re=o.popupMotion,Pe=o.maskMotion,Ie=o.popupTransitionName,xe=o.popupAnimation,We=o.maskTransitionName,De=o.maskAnimation,Ae=o.className,je=o.getTriggerDOMNode,Je=An(o,dIe),Fe=q||W||!1,ke=S.useState(!1),ht=Ue(ke,2),Ze=ht[0],mt=ht[1];Cr(function(){mt(aJ())},[]);var Rt=S.useRef({}),ut=S.useContext(G9),ot=S.useMemo(function(){return{registerSubPopup:function(wn,Fr){Rt.current[wn]=Fr,ut==null||ut.registerSubPopup(wn,Fr)}}},[ut]),ze=$X(),tt=S.useState(null),bt=Ue(tt,2),Nt=bt[0],wt=bt[1],Xt=S.useRef(null),$t=uo(function(Qt){Xt.current=Qt,_v(Qt)&&Nt!==Qt&&wt(Qt),ut==null||ut.registerSubPopup(ze,Qt)}),Lt=S.useState(null),Wt=Ue(Lt,2),Jt=Wt[0],Ft=Wt[1],yt=S.useRef(null),It=uo(function(Qt){_v(Qt)&&Jt!==Qt&&(Ft(Qt),yt.current=Qt)}),ft=S.Children.only(f),Pt=(ft==null?void 0:ft.props)||{},Cn={},bn=uo(function(Qt){var wn,Fr,Oi=Jt;return(Oi==null?void 0:Oi.contains(Qt))||((wn=zC(Oi))===null||wn===void 0?void 0:wn.host)===Qt||Qt===Oi||(Nt==null?void 0:Nt.contains(Qt))||((Fr=zC(Nt))===null||Fr===void 0?void 0:Fr.host)===Qt||Qt===Nt||Object.values(Rt.current).some(function(pi){return(pi==null?void 0:pi.contains(Qt))||Qt===pi})}),si=q9(d,Re,xe,Ie),Qr=q9(d,Pe,De,We),vi=S.useState(T||!1),xr=Ue(vi,2),nr=xr[0],ir=xr[1],Tn=b??nr,Ut=uo(function(Qt){b===void 0&&ir(Qt)});Cr(function(){ir(b||!1)},[b]);var kt=S.useRef(Tn);kt.current=Tn;var Ct=S.useRef([]);Ct.current=[];var Pn=uo(function(Qt){var wn;Ut(Qt),((wn=Ct.current[Ct.current.length-1])!==null&&wn!==void 0?wn:Tn)!==Qt&&(Ct.current.push(Qt),I==null||I(Qt))}),tn=S.useRef(),pt=function(){clearTimeout(tn.current)},gt=function(wn){var Fr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;pt(),Fr===0?Pn(wn):tn.current=setTimeout(function(){Pn(wn)},Fr*1e3)};S.useEffect(function(){return pt},[]);var Ht=S.useState(!1),Gt=Ue(Ht,2),Bt=Gt[0],rn=Gt[1];Cr(function(Qt){(!Qt||Tn)&&rn(!0)},[Tn]);var or=S.useState(null),Gn=Ue(or,2),Fn=Gn[0],Zn=Gn[1],$r=S.useState(null),ci=Ue($r,2),Zr=ci[0],Xi=ci[1],dr=function(wn){Xi([wn.clientX,wn.clientY])},li=cIe(Tn,Nt,de&&Zr!==null?Zr:Jt,oe,ne,ae,ie),_t=Ue(li,11),xt=_t[0],gn=_t[1],Dn=_t[2],sn=_t[3],Ui=_t[4],Bi=_t[5],La=_t[6],nn=_t[7],Rn=_t[8],Kn=_t[9],fi=_t[10],ra=oIe(Ze,g,_,C),Yc=Ue(ra,2),Ro=Yc[0],Vi=Yc[1],ka=Ro.has("click"),Ns=Vi.has("click")||Vi.has("contextMenu"),Un=uo(function(){Bt||fi()}),Xc=function(){kt.current&&de&&Ns&&gt(!1)};lIe(Tn,Jt,Nt,Un,Xc),Cr(function(){Un()},[Zr,oe]),Cr(function(){Tn&&!(ne!=null&&ne[oe])&&Un()},[JSON.stringify(ae)]);var vr=S.useMemo(function(){var Qt=sIe(ne,d,Kn,de);return $e(Qt,fe==null?void 0:fe(Kn))},[Kn,fe,ne,d,de]);S.useImperativeHandle(s,function(){return{nativeElement:yt.current,popupElement:Xt.current,forceAlign:Un}});var Kt=S.useState(0),Vt=Ue(Kt,2),Er=Vt[0],_r=Vt[1],Mr=S.useState(0),ui=Ue(Mr,2),Vo=ui[0],ji=ui[1],wo=function(){if(he&&Jt){var wn=Jt.getBoundingClientRect();_r(wn.width),ji(wn.height)}},so=function(){wo(),Un()},jo=function(wn){rn(!1),fi(),w==null||w(wn)},ia=function(){return new Promise(function(wn){wo(),Zn(function(){return wn})})};Cr(function(){Fn&&(fi(),Fn(),Zn(null))},[Fn]);function $o(Qt,wn,Fr,Oi){Cn[Qt]=function(pi){var lf;Oi==null||Oi(pi),gt(wn,Fr);for(var Bm=arguments.length,Vm=new Array(Bm>1?Bm-1:0),uf=1;uf<Bm;uf++)Vm[uf-1]=arguments[uf];(lf=Pt[Qt])===null||lf===void 0||lf.call.apply(lf,[Pt,pi].concat(Vm))}}(ka||Ns)&&(Cn.onClick=function(Qt){var wn;kt.current&&Ns?gt(!1):!kt.current&&ka&&(dr(Qt),gt(!0));for(var Fr=arguments.length,Oi=new Array(Fr>1?Fr-1:0),pi=1;pi<Fr;pi++)Oi[pi-1]=arguments[pi];(wn=Pt.onClick)===null||wn===void 0||wn.call.apply(wn,[Pt,Qt].concat(Oi))});var sf=uIe(Tn,Ns,Jt,Nt,M,V,bn,gt),cE=Ro.has("hover"),lE=Vi.has("hover"),Ho,Cu;cE&&($o("onMouseEnter",!0,x,function(Qt){dr(Qt)}),$o("onPointerEnter",!0,x,function(Qt){dr(Qt)}),Ho=function(wn){(Tn||Bt)&&Nt!==null&&Nt!==void 0&&Nt.contains(wn.target)&&gt(!0,x)},de&&(Cn.onMouseMove=function(Qt){var wn;(wn=Pt.onMouseMove)===null||wn===void 0||wn.call(Pt,Qt)})),lE&&($o("onMouseLeave",!1,P),$o("onPointerLeave",!1,P),Cu=function(){gt(!1,P)}),Ro.has("focus")&&$o("onFocus",!0,O),Vi.has("focus")&&$o("onBlur",!1,L),Ro.has("contextMenu")&&(Cn.onContextMenu=function(Qt){var wn;kt.current&&Vi.has("contextMenu")?gt(!1):(dr(Qt),gt(!0)),Qt.preventDefault();for(var Fr=arguments.length,Oi=new Array(Fr>1?Fr-1:0),pi=1;pi<Fr;pi++)Oi[pi-1]=arguments[pi];(wn=Pt.onContextMenu)===null||wn===void 0||wn.call.apply(wn,[Pt,Qt].concat(Oi))}),Ae&&(Cn.className=$e(Pt.className,Ae));var bu=_e(_e({},Pt),Cn),Jc={},Tu=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Tu.forEach(function(Qt){Je[Qt]&&(Jc[Qt]=function(){for(var wn,Fr=arguments.length,Oi=new Array(Fr),pi=0;pi<Fr;pi++)Oi[pi]=arguments[pi];(wn=bu[Qt])===null||wn===void 0||wn.call.apply(wn,[bu].concat(Oi)),Je[Qt].apply(Je,Oi)})});var cf=S.cloneElement(ft,_e(_e({},bu),Jc)),Dd={x:Bi,y:La},Um=be?_e({},be!==!0?be:{}):null;return S.createElement(S.Fragment,null,S.createElement(Eu,{disabled:!Tn,ref:It,onResize:so},S.createElement(iIe,{getTriggerDOMNode:je},cf)),S.createElement(G9.Provider,{value:ot},S.createElement(rIe,{portal:e,ref:$t,prefixCls:d,popup:J,className:$e(te,vr),style:ee,target:Jt,onMouseEnter:Ho,onMouseLeave:Cu,onPointerEnter:Ho,zIndex:re,open:Tn,keepDom:Bt,fresh:se,onClick:ve,onPointerDownCapture:sf,mask:M,motion:si,maskMotion:Qr,onVisibleChanged:jo,onPrepare:ia,forceRender:z,autoDestroy:Fe,getPopupContainer:j,align:Kn,arrow:Um,arrowPos:Dd,ready:xt,offsetX:gn,offsetY:Dn,offsetR:sn,offsetB:Ui,onAlign:Un,stretch:he,targetWidth:Er/nn,targetHeight:Vo/Rn})))});return r}const x2=hIe(jX);var fIe=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],pIe=function(r){var o=r===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"}}},mIe=function(r,o){var s=r.prefixCls;r.disabled;var c=r.visible,d=r.children,f=r.popupElement,v=r.animation,g=r.transitionName,_=r.dropdownStyle,C=r.dropdownClassName,b=r.direction,T=b===void 0?"ltr":b,I=r.placement,w=r.builtinPlacements,x=r.dropdownMatchSelectWidth,N=r.dropdownRender,P=r.dropdownAlign,O=r.getPopupContainer,L=r.empty,M=r.getTriggerDOMNode,F=r.onPopupVisibleChange,V=r.onPopupMouseEnter,j=An(r,fIe),z="".concat(s,"-dropdown"),q=f;N&&(q=N(f));var W=S.useMemo(function(){return w||pIe(x)},[w,x]),J=v?"".concat(z,"-").concat(v):g,te=typeof x=="number",ee=S.useMemo(function(){return te?null:x===!1?"minWidth":"width"},[x,te]),oe=_;te&&(oe=_e(_e({},oe),{},{width:x}));var pe=S.useRef(null);return S.useImperativeHandle(o,function(){return{getPopupElement:function(){var ae;return(ae=pe.current)===null||ae===void 0?void 0:ae.popupElement}}}),S.createElement(x2,Qe({},j,{showAction:F?["click"]:[],hideAction:F?["click"]:[],popupPlacement:I||(T==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:W,prefixCls:z,popupTransitionName:J,popup:S.createElement("div",{onMouseEnter:V},q),ref:pe,stretch:ee,popupAlign:P,popupVisible:c,getPopupContainer:O,popupClassName:$e(C,Ce({},"".concat(z,"-empty"),L)),popupStyle:oe,getTriggerDOMNode:M,onPopupVisibleChange:F}),d)},gIe=S.forwardRef(mIe);function Z9(e,r){var o=e.key,s;return"value"in e&&(s=e.value),o??(s!==void 0?s:"rc-index-key-".concat(r))}function UP(e){return typeof e<"u"&&!Number.isNaN(e)}function mJ(e,r){var o=e||{},s=o.label,c=o.value,d=o.options,f=o.groupLabel,v=s||(r?"children":"label");return{label:v,value:c||"value",options:d||"options",groupLabel:f||v}}function vIe(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.fieldNames,s=r.childrenAsData,c=[],d=mJ(o,!1),f=d.label,v=d.value,g=d.options,_=d.groupLabel;function C(b,T){Array.isArray(b)&&b.forEach(function(I){if(T||!(g in I)){var w=I[v];c.push({key:Z9(I,c.length),groupOption:T,data:I,label:I[f],value:w})}else{var x=I[_];x===void 0&&s&&(x=I.label),c.push({key:Z9(I,c.length),group:!0,data:I,label:x}),C(I[g],!0)}})}return C(e,!1),c}function BP(e){var r=_e({},e);return"props"in r||Object.defineProperty(r,"props",{get:function(){return _a(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),r}}),r}var EIe=function(r,o,s){if(!o||!o.length)return null;var c=!1,d=function v(g,_){var C=kY(_),b=C[0],T=C.slice(1);if(!b)return[g];var I=g.split(b);return c=c||I.length>1,I.reduce(function(w,x){return[].concat(vt(w),vt(v(x,T)))},[]).filter(Boolean)},f=d(r,o);return c?typeof s<"u"?f.slice(0,s):f:null},N2=S.createContext(null);function _Ie(e){var r=e.visible,o=e.values;if(!r)return null;var s=50;return S.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(o.slice(0,s).map(function(c){var d=c.label,f=c.value;return["number","string"].includes(on(d))?d:f}).join(", ")),o.length>s?", ...":null)}var SIe=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],yIe=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],VP=function(r){return r==="tags"||r==="multiple"},CIe=S.forwardRef(function(e,r){var o,s=e.id,c=e.prefixCls,d=e.className,f=e.showSearch,v=e.tagRender,g=e.direction,_=e.omitDomProps,C=e.displayValues,b=e.onDisplayValuesChange,T=e.emptyOptions,I=e.notFoundContent,w=I===void 0?"Not Found":I,x=e.onClear,N=e.mode,P=e.disabled,O=e.loading,L=e.getInputElement,M=e.getRawInputElement,F=e.open,V=e.defaultOpen,j=e.onDropdownVisibleChange,z=e.activeValue,q=e.onActiveValueChange,W=e.activeDescendantId,J=e.searchValue,te=e.autoClearSearchValue,ee=e.onSearch,oe=e.onSearchSplit,pe=e.tokenSeparators,ne=e.allowClear,ae=e.prefix,re=e.suffixIcon,he=e.clearIcon,fe=e.OptionList,se=e.animation,de=e.transitionName,ve=e.dropdownStyle,ie=e.dropdownClassName,be=e.dropdownMatchSelectWidth,Re=e.dropdownRender,Pe=e.dropdownAlign,Ie=e.placement,xe=e.builtinPlacements,We=e.getPopupContainer,De=e.showAction,Ae=De===void 0?[]:De,je=e.onFocus,Je=e.onBlur,Fe=e.onKeyUp,ke=e.onKeyDown,ht=e.onMouseDown,Ze=An(e,SIe),mt=VP(N),Rt=(f!==void 0?f:mt)||N==="combobox",ut=_e({},Ze);yIe.forEach(function(Kt){delete ut[Kt]}),_==null||_.forEach(function(Kt){delete ut[Kt]});var ot=S.useState(!1),ze=Ue(ot,2),tt=ze[0],bt=ze[1];S.useEffect(function(){bt(aJ())},[]);var Nt=S.useRef(null),wt=S.useRef(null),Xt=S.useRef(null),$t=S.useRef(null),Lt=S.useRef(null),Wt=S.useRef(!1),Jt=Owe(),Ft=Ue(Jt,3),yt=Ft[0],It=Ft[1],ft=Ft[2];S.useImperativeHandle(r,function(){var Kt,Vt;return{focus:(Kt=$t.current)===null||Kt===void 0?void 0:Kt.focus,blur:(Vt=$t.current)===null||Vt===void 0?void 0:Vt.blur,scrollTo:function(_r){var Mr;return(Mr=Lt.current)===null||Mr===void 0?void 0:Mr.scrollTo(_r)},nativeElement:Nt.current||wt.current}});var Pt=S.useMemo(function(){var Kt;if(N!=="combobox")return J;var Vt=(Kt=C[0])===null||Kt===void 0?void 0:Kt.value;return typeof Vt=="string"||typeof Vt=="number"?String(Vt):""},[J,N,C]),Cn=N==="combobox"&&typeof L=="function"&&L()||null,bn=typeof M=="function"&&M(),si=Am(wt,bn==null||(o=bn.props)===null||o===void 0?void 0:o.ref),Qr=S.useState(!1),vi=Ue(Qr,2),xr=vi[0],nr=vi[1];Cr(function(){nr(!0)},[]);var ir=Sa(!1,{defaultValue:V,value:F}),Tn=Ue(ir,2),Ut=Tn[0],kt=Tn[1],Ct=xr?Ut:!1,Pn=!w&&T;(P||Pn&&Ct&&N==="combobox")&&(Ct=!1);var tn=Pn?!1:Ct,pt=S.useCallback(function(Kt){var Vt=Kt!==void 0?Kt:!Ct;P||(kt(Vt),Ct!==Vt&&(j==null||j(Vt)))},[P,Ct,kt,j]),gt=S.useMemo(function(){return(pe||[]).some(function(Kt){return[`
`,`\r
`].includes(Kt)})},[pe]),Ht=S.useContext(N2)||{},Gt=Ht.maxCount,Bt=Ht.rawValues,rn=function(Vt,Er,_r){if(!(mt&&UP(Gt)&&(Bt==null?void 0:Bt.size)>=Gt)){var Mr=!0,ui=Vt;q==null||q(null);var Vo=EIe(Vt,pe,UP(Gt)?Gt-Bt.size:void 0),ji=_r?null:Vo;return N!=="combobox"&&ji&&(ui="",oe==null||oe(ji),pt(!1),Mr=!1),ee&&Pt!==ui&&ee(ui,{source:Er?"typing":"effect"}),Mr}},or=function(Vt){!Vt||!Vt.trim()||ee(Vt,{source:"submit"})};S.useEffect(function(){!Ct&&!mt&&N!=="combobox"&&rn("",!1,!1)},[Ct]),S.useEffect(function(){Ut&&P&&kt(!1),P&&!Wt.current&&It(!1)},[P]);var Gn=cJ(),Fn=Ue(Gn,2),Zn=Fn[0],$r=Fn[1],ci=S.useRef(!1),Zr=function(Vt){var Er=Zn(),_r=Vt.key,Mr=_r==="Enter";if(Mr&&(N!=="combobox"&&Vt.preventDefault(),Ct||pt(!0)),$r(!!Pt),_r==="Backspace"&&!Er&&mt&&!Pt&&C.length){for(var ui=vt(C),Vo=null,ji=ui.length-1;ji>=0;ji-=1){var wo=ui[ji];if(!wo.disabled){ui.splice(ji,1),Vo=wo;break}}Vo&&b(ui,{type:"remove",values:[Vo]})}for(var so=arguments.length,jo=new Array(so>1?so-1:0),ia=1;ia<so;ia++)jo[ia-1]=arguments[ia];if(Ct&&(!Mr||!ci.current)){var $o;Mr&&(ci.current=!0),($o=Lt.current)===null||$o===void 0||$o.onKeyDown.apply($o,[Vt].concat(jo))}ke==null||ke.apply(void 0,[Vt].concat(jo))},Xi=function(Vt){for(var Er=arguments.length,_r=new Array(Er>1?Er-1:0),Mr=1;Mr<Er;Mr++)_r[Mr-1]=arguments[Mr];if(Ct){var ui;(ui=Lt.current)===null||ui===void 0||ui.onKeyUp.apply(ui,[Vt].concat(_r))}Vt.key==="Enter"&&(ci.current=!1),Fe==null||Fe.apply(void 0,[Vt].concat(_r))},dr=function(Vt){var Er=C.filter(function(_r){return _r!==Vt});b(Er,{type:"remove",values:[Vt]})},li=function(){ci.current=!1},_t=S.useRef(!1),xt=function(){It(!0),P||(je&&!_t.current&&je.apply(void 0,arguments),Ae.includes("focus")&&pt(!0)),_t.current=!0},gn=function(){Wt.current=!0,It(!1,function(){_t.current=!1,Wt.current=!1,pt(!1)}),!P&&(Pt&&(N==="tags"?ee(Pt,{source:"submit"}):N==="multiple"&&ee("",{source:"blur"})),Je&&Je.apply(void 0,arguments))},Dn=[];S.useEffect(function(){return function(){Dn.forEach(function(Kt){return clearTimeout(Kt)}),Dn.splice(0,Dn.length)}},[]);var sn=function(Vt){var Er,_r=Vt.target,Mr=(Er=Xt.current)===null||Er===void 0?void 0:Er.getPopupElement();if(Mr&&Mr.contains(_r)){var ui=setTimeout(function(){var so=Dn.indexOf(ui);if(so!==-1&&Dn.splice(so,1),ft(),!tt&&!Mr.contains(document.activeElement)){var jo;(jo=$t.current)===null||jo===void 0||jo.focus()}});Dn.push(ui)}for(var Vo=arguments.length,ji=new Array(Vo>1?Vo-1:0),wo=1;wo<Vo;wo++)ji[wo-1]=arguments[wo];ht==null||ht.apply(void 0,[Vt].concat(ji))},Ui=S.useState({}),Bi=Ue(Ui,2),La=Bi[1];function nn(){La({})}var Rn;bn&&(Rn=function(Vt){pt(Vt)}),xwe(function(){var Kt;return[Nt.current,(Kt=Xt.current)===null||Kt===void 0?void 0:Kt.getPopupElement()]},tn,pt,!!bn);var Kn=S.useMemo(function(){return _e(_e({},e),{},{notFoundContent:w,open:Ct,triggerOpen:tn,id:s,showSearch:Rt,multiple:mt,toggleOpen:pt})},[e,w,tn,Ct,s,Rt,mt,pt]),fi=!!re||O,ra;fi&&(ra=S.createElement(dT,{className:$e("".concat(c,"-arrow"),Ce({},"".concat(c,"-arrow-loading"),O)),customizeIcon:re,customizeIconProps:{loading:O,searchValue:Pt,open:Ct,focused:yt,showSearch:Rt}}));var Yc=function(){var Vt;x==null||x(),(Vt=$t.current)===null||Vt===void 0||Vt.focus(),b([],{type:"clear",values:C}),rn("",!1,!1)},Ro=Iwe(c,Yc,C,ne,he,P,Pt,N),Vi=Ro.allowClear,ka=Ro.clearIcon,Ns=S.createElement(fe,{ref:Lt}),Un=$e(c,d,Ce(Ce(Ce(Ce(Ce(Ce(Ce(Ce(Ce(Ce({},"".concat(c,"-focused"),yt),"".concat(c,"-multiple"),mt),"".concat(c,"-single"),!mt),"".concat(c,"-allow-clear"),ne),"".concat(c,"-show-arrow"),fi),"".concat(c,"-disabled"),P),"".concat(c,"-loading"),O),"".concat(c,"-open"),Ct),"".concat(c,"-customize-input"),Cn),"".concat(c,"-show-search"),Rt)),Xc=S.createElement(gIe,{ref:Xt,disabled:P,prefixCls:c,visible:tn,popupElement:Ns,animation:se,transitionName:de,dropdownStyle:ve,dropdownClassName:ie,direction:g,dropdownMatchSelectWidth:be,dropdownRender:Re,dropdownAlign:Pe,placement:Ie,builtinPlacements:xe,getPopupContainer:We,empty:T,getTriggerDOMNode:function(Vt){return wt.current||Vt},onPopupVisibleChange:Rn,onPopupMouseEnter:nn},bn?S.cloneElement(bn,{ref:si}):S.createElement(Zwe,Qe({},e,{domRef:wt,prefixCls:c,inputElement:Cn,ref:$t,id:s,prefix:ae,showSearch:Rt,autoClearSearchValue:te,mode:N,activeDescendantId:W,tagRender:v,values:C,open:Ct,onToggleOpen:pt,activeValue:z,searchValue:Pt,onSearch:rn,onSearchSubmit:or,onRemove:dr,tokenWithEnter:gt,onInputBlur:li}))),vr;return bn?vr=Xc:vr=S.createElement("div",Qe({className:Un},ut,{ref:Nt,onMouseDown:sn,onKeyDown:Zr,onKeyUp:Xi,onFocus:xt,onBlur:gn}),S.createElement(_Ie,{visible:yt&&!Ct,values:C}),Xc,ra,Vi&&ka),S.createElement(sJ.Provider,{value:Kn},vr)}),P2=function(){return null};P2.isSelectOptGroup=!0;var D2=function(){return null};D2.isSelectOption=!0;var gJ=S.forwardRef(function(e,r){var o=e.height,s=e.offsetY,c=e.offsetX,d=e.children,f=e.prefixCls,v=e.onInnerResize,g=e.innerProps,_=e.rtl,C=e.extra,b={},T={display:"flex",flexDirection:"column"};return s!==void 0&&(b={height:o,position:"relative",overflow:"hidden"},T=_e(_e({},T),{},Ce(Ce(Ce(Ce(Ce({transform:"translateY(".concat(s,"px)")},_?"marginRight":"marginLeft",-c),"position","absolute"),"left",0),"right",0),"top",0))),S.createElement("div",{style:b},S.createElement(Eu,{onResize:function(w){var x=w.offsetHeight;x&&v&&v()}},S.createElement("div",Qe({style:T,className:$e(Ce({},"".concat(f,"-holder-inner"),f)),ref:r},g),d,C)))});gJ.displayName="Filler";function bIe(e){var r=e.children,o=e.setRef,s=S.useCallback(function(c){o(c)},[]);return S.cloneElement(r,{ref:s})}function TIe(e,r,o,s,c,d,f,v){var g=v.getKey;return e.slice(r,o+1).map(function(_,C){var b=r+C,T=f(_,b,{style:{width:s},offsetX:c}),I=g(_);return S.createElement(bIe,{key:I,setRef:function(x){return d(_,x)}},T)})}function RIe(e,r,o){var s=e.length,c=r.length,d,f;if(s===0&&c===0)return null;s<c?(d=e,f=r):(d=r,f=e);var v={__EMPTY_ITEM__:!0};function g(w){return w!==void 0?o(w):v}for(var _=null,C=Math.abs(s-c)!==1,b=0;b<f.length;b+=1){var T=g(d[b]),I=g(f[b]);if(T!==I){_=b,C=C||T!==g(f[b+1]);break}}return _===null?null:{index:_,multiple:C}}function wIe(e,r,o){var s=S.useState(e),c=Ue(s,2),d=c[0],f=c[1],v=S.useState(null),g=Ue(v,2),_=g[0],C=g[1];return S.useEffect(function(){var b=RIe(d||[],e||[],r);(b==null?void 0:b.index)!==void 0&&(o==null||o(b.index),C(e[b.index])),f(e)},[e]),[_]}var ez=(typeof navigator>"u"?"undefined":on(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const vJ=function(e,r,o,s){var c=S.useRef(!1),d=S.useRef(null);function f(){clearTimeout(d.current),c.current=!0,d.current=setTimeout(function(){c.current=!1},50)}var v=S.useRef({top:e,bottom:r,left:o,right:s});return v.current.top=e,v.current.bottom=r,v.current.left=o,v.current.right=s,function(g,_){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,b=g?_<0&&v.current.left||_>0&&v.current.right:_<0&&v.current.top||_>0&&v.current.bottom;return C&&b?(clearTimeout(d.current),c.current=!1):(!b||c.current)&&f(),!c.current&&b}};function IIe(e,r,o,s,c,d,f){var v=S.useRef(0),g=S.useRef(null),_=S.useRef(null),C=S.useRef(!1),b=vJ(r,o,s,c);function T(O,L){if(oi.cancel(g.current),!b(!1,L)){var M=O;if(!M._virtualHandled)M._virtualHandled=!0;else return;v.current+=L,_.current=L,ez||M.preventDefault(),g.current=oi(function(){var F=C.current?10:1;f(v.current*F,!1),v.current=0})}}function I(O,L){f(L,!0),ez||O.preventDefault()}var w=S.useRef(null),x=S.useRef(null);function N(O){if(e){oi.cancel(x.current),x.current=oi(function(){w.current=null},2);var L=O.deltaX,M=O.deltaY,F=O.shiftKey,V=L,j=M;(w.current==="sx"||!w.current&&F&&M&&!L)&&(V=M,j=0,w.current="sx");var z=Math.abs(V),q=Math.abs(j);w.current===null&&(w.current=d&&z>q?"x":"y"),w.current==="y"?T(O,j):I(O,V)}}function P(O){e&&(C.current=O.detail===_.current)}return[N,P]}function AIe(e,r,o,s){var c=S.useMemo(function(){return[new Map,[]]},[e,o.id,s]),d=Ue(c,2),f=d[0],v=d[1],g=function(C){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C,T=f.get(C),I=f.get(b);if(T===void 0||I===void 0)for(var w=e.length,x=v.length;x<w;x+=1){var N,P=e[x],O=r(P);f.set(O,x);var L=(N=o.get(O))!==null&&N!==void 0?N:s;if(v[x]=(v[x-1]||0)+L,O===C&&(T=x),O===b&&(I=x),T!==void 0&&I!==void 0)break}return{top:v[T-1]||0,bottom:v[I]}};return g}var OIe=function(){function e(){io(this,e),Ce(this,"maps",void 0),Ce(this,"id",0),Ce(this,"diffKeys",new Set),this.maps=Object.create(null)}return oo(e,[{key:"set",value:function(o,s){this.maps[o]=s,this.id+=1,this.diffKeys.add(o)}},{key:"get",value:function(o){return this.maps[o]}},{key:"resetRecord",value:function(){this.diffKeys.clear()}},{key:"getRecord",value:function(){return this.diffKeys}}]),e}();function tz(e){var r=parseFloat(e);return isNaN(r)?0:r}function xIe(e,r,o){var s=S.useState(0),c=Ue(s,2),d=c[0],f=c[1],v=S.useRef(new Map),g=S.useRef(new OIe),_=S.useRef(0);function C(){_.current+=1}function b(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;C();var w=function(){var P=!1;v.current.forEach(function(O,L){if(O&&O.offsetParent){var M=O.offsetHeight,F=getComputedStyle(O),V=F.marginTop,j=F.marginBottom,z=tz(V),q=tz(j),W=M+z+q;g.current.get(L)!==W&&(g.current.set(L,W),P=!0)}}),P&&f(function(O){return O+1})};if(I)w();else{_.current+=1;var x=_.current;Promise.resolve().then(function(){x===_.current&&w()})}}function T(I,w){var x=e(I),N=v.current.get(x);w?(v.current.set(x,w),b()):v.current.delete(x),!N!=!w&&(w?r==null||r(I):o==null||o(I))}return S.useEffect(function(){return C},[]),[T,b,g.current,d]}var nz=14/15;function NIe(e,r,o){var s=S.useRef(!1),c=S.useRef(0),d=S.useRef(0),f=S.useRef(null),v=S.useRef(null),g,_=function(I){if(s.current){var w=Math.ceil(I.touches[0].pageX),x=Math.ceil(I.touches[0].pageY),N=c.current-w,P=d.current-x,O=Math.abs(N)>Math.abs(P);O?c.current=w:d.current=x;var L=o(O,O?N:P,!1,I);L&&I.preventDefault(),clearInterval(v.current),L&&(v.current=setInterval(function(){O?N*=nz:P*=nz;var M=Math.floor(O?N:P);(!o(O,M,!0)||Math.abs(M)<=.1)&&clearInterval(v.current)},16))}},C=function(){s.current=!1,g()},b=function(I){g(),I.touches.length===1&&!s.current&&(s.current=!0,c.current=Math.ceil(I.touches[0].pageX),d.current=Math.ceil(I.touches[0].pageY),f.current=I.target,f.current.addEventListener("touchmove",_,{passive:!1}),f.current.addEventListener("touchend",C,{passive:!0}))};g=function(){f.current&&(f.current.removeEventListener("touchmove",_),f.current.removeEventListener("touchend",C))},Cr(function(){return e&&r.current.addEventListener("touchstart",b,{passive:!0}),function(){var T;(T=r.current)===null||T===void 0||T.removeEventListener("touchstart",b),g(),clearInterval(v.current)}},[e])}function rz(e){return Math.floor(Math.pow(e,.5))}function jP(e,r){var o="touches"in e?e.touches[0]:e;return o[r?"pageX":"pageY"]-window[r?"scrollX":"scrollY"]}function PIe(e,r,o){S.useEffect(function(){var s=r.current;if(e&&s){var c=!1,d,f,v=function(){oi.cancel(d)},g=function T(){v(),d=oi(function(){o(f),T()})},_=function(I){if(!I.target.draggable){var w=I;w._virtualHandled||(w._virtualHandled=!0,c=!0)}},C=function(){c=!1,v()},b=function(I){if(c){var w=jP(I,!1),x=s.getBoundingClientRect(),N=x.top,P=x.bottom;if(w<=N){var O=N-w;f=-rz(O),g()}else if(w>=P){var L=w-P;f=rz(L),g()}else v()}};return s.addEventListener("mousedown",_),s.ownerDocument.addEventListener("mouseup",C),s.ownerDocument.addEventListener("mousemove",b),function(){s.removeEventListener("mousedown",_),s.ownerDocument.removeEventListener("mouseup",C),s.ownerDocument.removeEventListener("mousemove",b),v()}}},[e])}var DIe=10;function LIe(e,r,o,s,c,d,f,v){var g=S.useRef(),_=S.useState(null),C=Ue(_,2),b=C[0],T=C[1];return Cr(function(){if(b&&b.times<DIe){if(!e.current){T(function(he){return _e({},he)});return}d();var I=b.targetAlign,w=b.originAlign,x=b.index,N=b.offset,P=e.current.clientHeight,O=!1,L=I,M=null;if(P){for(var F=I||w,V=0,j=0,z=0,q=Math.min(r.length-1,x),W=0;W<=q;W+=1){var J=c(r[W]);j=V;var te=o.get(J);z=j+(te===void 0?s:te),V=z}for(var ee=F==="top"?N:P-N,oe=q;oe>=0;oe-=1){var pe=c(r[oe]),ne=o.get(pe);if(ne===void 0){O=!0;break}if(ee-=ne,ee<=0)break}switch(F){case"top":M=j-N;break;case"bottom":M=z-P+N;break;default:{var ae=e.current.scrollTop,re=ae+P;j<ae?L="top":z>re&&(L="bottom")}}M!==null&&f(M),M!==b.lastTop&&(O=!0)}O&&T(_e(_e({},b),{},{times:b.times+1,targetAlign:L,lastTop:M}))}},[b,e.current]),function(I){if(I==null){v();return}if(oi.cancel(g.current),typeof I=="number")f(I);else if(I&&on(I)==="object"){var w,x=I.align;"index"in I?w=I.index:w=r.findIndex(function(O){return c(O)===I.key});var N=I.offset,P=N===void 0?0:N;T({times:0,index:w,offset:P,originAlign:x})}}}var iz=S.forwardRef(function(e,r){var o=e.prefixCls,s=e.rtl,c=e.scrollOffset,d=e.scrollRange,f=e.onStartMove,v=e.onStopMove,g=e.onScroll,_=e.horizontal,C=e.spinSize,b=e.containerSize,T=e.style,I=e.thumbStyle,w=e.showScrollBar,x=S.useState(!1),N=Ue(x,2),P=N[0],O=N[1],L=S.useState(null),M=Ue(L,2),F=M[0],V=M[1],j=S.useState(null),z=Ue(j,2),q=z[0],W=z[1],J=!s,te=S.useRef(),ee=S.useRef(),oe=S.useState(w),pe=Ue(oe,2),ne=pe[0],ae=pe[1],re=S.useRef(),he=function(){w===!0||w===!1||(clearTimeout(re.current),ae(!0),re.current=setTimeout(function(){ae(!1)},3e3))},fe=d-b||0,se=b-C||0,de=S.useMemo(function(){if(c===0||fe===0)return 0;var De=c/fe;return De*se},[c,fe,se]),ve=function(Ae){Ae.stopPropagation(),Ae.preventDefault()},ie=S.useRef({top:de,dragging:P,pageY:F,startTop:q});ie.current={top:de,dragging:P,pageY:F,startTop:q};var be=function(Ae){O(!0),V(jP(Ae,_)),W(ie.current.top),f(),Ae.stopPropagation(),Ae.preventDefault()};S.useEffect(function(){var De=function(Fe){Fe.preventDefault()},Ae=te.current,je=ee.current;return Ae.addEventListener("touchstart",De,{passive:!1}),je.addEventListener("touchstart",be,{passive:!1}),function(){Ae.removeEventListener("touchstart",De),je.removeEventListener("touchstart",be)}},[]);var Re=S.useRef();Re.current=fe;var Pe=S.useRef();Pe.current=se,S.useEffect(function(){if(P){var De,Ae=function(Fe){var ke=ie.current,ht=ke.dragging,Ze=ke.pageY,mt=ke.startTop;oi.cancel(De);var Rt=te.current.getBoundingClientRect(),ut=b/(_?Rt.width:Rt.height);if(ht){var ot=(jP(Fe,_)-Ze)*ut,ze=mt;!J&&_?ze-=ot:ze+=ot;var tt=Re.current,bt=Pe.current,Nt=bt?ze/bt:0,wt=Math.ceil(Nt*tt);wt=Math.max(wt,0),wt=Math.min(wt,tt),De=oi(function(){g(wt,_)})}},je=function(){O(!1),v()};return window.addEventListener("mousemove",Ae,{passive:!0}),window.addEventListener("touchmove",Ae,{passive:!0}),window.addEventListener("mouseup",je,{passive:!0}),window.addEventListener("touchend",je,{passive:!0}),function(){window.removeEventListener("mousemove",Ae),window.removeEventListener("touchmove",Ae),window.removeEventListener("mouseup",je),window.removeEventListener("touchend",je),oi.cancel(De)}}},[P]),S.useEffect(function(){return he(),function(){clearTimeout(re.current)}},[c]),S.useImperativeHandle(r,function(){return{delayHidden:he}});var Ie="".concat(o,"-scrollbar"),xe={position:"absolute",visibility:ne?null:"hidden"},We={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return _?(xe.height=8,xe.left=0,xe.right=0,xe.bottom=0,We.height="100%",We.width=C,J?We.left=de:We.right=de):(xe.width=8,xe.top=0,xe.bottom=0,J?xe.right=0:xe.left=0,We.width="100%",We.height=C,We.top=de),S.createElement("div",{ref:te,className:$e(Ie,Ce(Ce(Ce({},"".concat(Ie,"-horizontal"),_),"".concat(Ie,"-vertical"),!_),"".concat(Ie,"-visible"),ne)),style:_e(_e({},xe),T),onMouseDown:ve,onMouseMove:he},S.createElement("div",{ref:ee,className:$e("".concat(Ie,"-thumb"),Ce({},"".concat(Ie,"-thumb-moving"),P)),style:_e(_e({},We),I),onMouseDown:be}))}),kIe=20;function oz(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=e/r*e;return isNaN(o)&&(o=0),o=Math.max(o,kIe),Math.floor(o)}var MIe=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles","showScrollBar"],FIe=[],UIe={overflowY:"auto",overflowAnchor:"none"};function BIe(e,r){var o=e.prefixCls,s=o===void 0?"rc-virtual-list":o,c=e.className,d=e.height,f=e.itemHeight,v=e.fullHeight,g=v===void 0?!0:v,_=e.style,C=e.data,b=e.children,T=e.itemKey,I=e.virtual,w=e.direction,x=e.scrollWidth,N=e.component,P=N===void 0?"div":N,O=e.onScroll,L=e.onVirtualScroll,M=e.onVisibleChange,F=e.innerProps,V=e.extraRender,j=e.styles,z=e.showScrollBar,q=z===void 0?"optional":z,W=An(e,MIe),J=S.useCallback(function(_t){return typeof T=="function"?T(_t):_t==null?void 0:_t[T]},[T]),te=xIe(J,null,null),ee=Ue(te,4),oe=ee[0],pe=ee[1],ne=ee[2],ae=ee[3],re=!!(I!==!1&&d&&f),he=S.useMemo(function(){return Object.values(ne.maps).reduce(function(_t,xt){return _t+xt},0)},[ne.id,ne.maps]),fe=re&&C&&(Math.max(f*C.length,he)>d||!!x),se=w==="rtl",de=$e(s,Ce({},"".concat(s,"-rtl"),se),c),ve=C||FIe,ie=S.useRef(),be=S.useRef(),Re=S.useRef(),Pe=S.useState(0),Ie=Ue(Pe,2),xe=Ie[0],We=Ie[1],De=S.useState(0),Ae=Ue(De,2),je=Ae[0],Je=Ae[1],Fe=S.useState(!1),ke=Ue(Fe,2),ht=ke[0],Ze=ke[1],mt=function(){Ze(!0)},Rt=function(){Ze(!1)},ut={getKey:J};function ot(_t){We(function(xt){var gn;typeof _t=="function"?gn=_t(xt):gn=_t;var Dn=nr(gn);return ie.current.scrollTop=Dn,Dn})}var ze=S.useRef({start:0,end:ve.length}),tt=S.useRef(),bt=wIe(ve,J),Nt=Ue(bt,1),wt=Nt[0];tt.current=wt;var Xt=S.useMemo(function(){if(!re)return{scrollHeight:void 0,start:0,end:ve.length-1,offset:void 0};if(!fe){var _t;return{scrollHeight:((_t=be.current)===null||_t===void 0?void 0:_t.offsetHeight)||0,start:0,end:ve.length-1,offset:void 0}}for(var xt=0,gn,Dn,sn,Ui=ve.length,Bi=0;Bi<Ui;Bi+=1){var La=ve[Bi],nn=J(La),Rn=ne.get(nn),Kn=xt+(Rn===void 0?f:Rn);Kn>=xe&&gn===void 0&&(gn=Bi,Dn=xt),Kn>xe+d&&sn===void 0&&(sn=Bi),xt=Kn}return gn===void 0&&(gn=0,Dn=0,sn=Math.ceil(d/f)),sn===void 0&&(sn=ve.length-1),sn=Math.min(sn+1,ve.length-1),{scrollHeight:xt,start:gn,end:sn,offset:Dn}},[fe,re,xe,ve,ae,d]),$t=Xt.scrollHeight,Lt=Xt.start,Wt=Xt.end,Jt=Xt.offset;ze.current.start=Lt,ze.current.end=Wt,S.useLayoutEffect(function(){var _t=ne.getRecord();if(_t.size===1){var xt=Array.from(_t)[0],gn=ve[Lt];if(gn){var Dn=J(gn);if(Dn===xt){var sn=ne.get(xt),Ui=sn-f;ot(function(Bi){return Bi+Ui})}}}ne.resetRecord()},[$t]);var Ft=S.useState({width:0,height:d}),yt=Ue(Ft,2),It=yt[0],ft=yt[1],Pt=function(xt){ft({width:xt.offsetWidth,height:xt.offsetHeight})},Cn=S.useRef(),bn=S.useRef(),si=S.useMemo(function(){return oz(It.width,x)},[It.width,x]),Qr=S.useMemo(function(){return oz(It.height,$t)},[It.height,$t]),vi=$t-d,xr=S.useRef(vi);xr.current=vi;function nr(_t){var xt=_t;return Number.isNaN(xr.current)||(xt=Math.min(xt,xr.current)),xt=Math.max(xt,0),xt}var ir=xe<=0,Tn=xe>=vi,Ut=je<=0,kt=je>=x,Ct=vJ(ir,Tn,Ut,kt),Pn=function(){return{x:se?-je:je,y:xe}},tn=S.useRef(Pn()),pt=uo(function(_t){if(L){var xt=_e(_e({},Pn()),_t);(tn.current.x!==xt.x||tn.current.y!==xt.y)&&(L(xt),tn.current=xt)}});function gt(_t,xt){var gn=_t;xt?(Dl.flushSync(function(){Je(gn)}),pt()):ot(gn)}function Ht(_t){var xt=_t.currentTarget.scrollTop;xt!==xe&&ot(xt),O==null||O(_t),pt()}var Gt=function(xt){var gn=xt,Dn=x?x-It.width:0;return gn=Math.max(gn,0),gn=Math.min(gn,Dn),gn},Bt=uo(function(_t,xt){xt?(Dl.flushSync(function(){Je(function(gn){var Dn=gn+(se?-_t:_t);return Gt(Dn)})}),pt()):ot(function(gn){var Dn=gn+_t;return Dn})}),rn=IIe(re,ir,Tn,Ut,kt,!!x,Bt),or=Ue(rn,2),Gn=or[0],Fn=or[1];NIe(re,ie,function(_t,xt,gn,Dn){var sn=Dn;return Ct(_t,xt,gn)?!1:!sn||!sn._virtualHandled?(sn&&(sn._virtualHandled=!0),Gn({preventDefault:function(){},deltaX:_t?xt:0,deltaY:_t?0:xt}),!0):!1}),PIe(fe,ie,function(_t){ot(function(xt){return xt+_t})}),Cr(function(){function _t(gn){var Dn=ir&&gn.detail<0,sn=Tn&&gn.detail>0;re&&!Dn&&!sn&&gn.preventDefault()}var xt=ie.current;return xt.addEventListener("wheel",Gn,{passive:!1}),xt.addEventListener("DOMMouseScroll",Fn,{passive:!0}),xt.addEventListener("MozMousePixelScroll",_t,{passive:!1}),function(){xt.removeEventListener("wheel",Gn),xt.removeEventListener("DOMMouseScroll",Fn),xt.removeEventListener("MozMousePixelScroll",_t)}},[re,ir,Tn]),Cr(function(){if(x){var _t=Gt(je);Je(_t),pt({x:_t})}},[It.width,x]);var Zn=function(){var xt,gn;(xt=Cn.current)===null||xt===void 0||xt.delayHidden(),(gn=bn.current)===null||gn===void 0||gn.delayHidden()},$r=LIe(ie,ve,ne,f,J,function(){return pe(!0)},ot,Zn);S.useImperativeHandle(r,function(){return{nativeElement:Re.current,getScrollInfo:Pn,scrollTo:function(xt){function gn(Dn){return Dn&&on(Dn)==="object"&&("left"in Dn||"top"in Dn)}gn(xt)?(xt.left!==void 0&&Je(Gt(xt.left)),$r(xt.top)):$r(xt)}}}),Cr(function(){if(M){var _t=ve.slice(Lt,Wt+1);M(_t,ve)}},[Lt,Wt,ve]);var ci=AIe(ve,J,ne,f),Zr=V==null?void 0:V({start:Lt,end:Wt,virtual:fe,offsetX:je,offsetY:Jt,rtl:se,getSize:ci}),Xi=TIe(ve,Lt,Wt,x,je,oe,b,ut),dr=null;d&&(dr=_e(Ce({},g?"height":"maxHeight",d),UIe),re&&(dr.overflowY="hidden",x&&(dr.overflowX="hidden"),ht&&(dr.pointerEvents="none")));var li={};return se&&(li.dir="rtl"),S.createElement("div",Qe({ref:Re,style:_e(_e({},_),{},{position:"relative"}),className:de},li,W),S.createElement(Eu,{onResize:Pt},S.createElement(P,{className:"".concat(s,"-holder"),style:dr,ref:ie,onScroll:Ht,onMouseEnter:Zn},S.createElement(gJ,{prefixCls:s,height:$t,offsetX:je,offsetY:Jt,scrollWidth:x,onInnerResize:pe,ref:be,innerProps:F,rtl:se,extra:Zr},Xi))),fe&&$t>d&&S.createElement(iz,{ref:Cn,prefixCls:s,scrollOffset:xe,scrollRange:$t,rtl:se,onScroll:gt,onStartMove:mt,onStopMove:Rt,spinSize:Qr,containerSize:It.height,style:j==null?void 0:j.verticalScrollBar,thumbStyle:j==null?void 0:j.verticalScrollBarThumb,showScrollBar:q}),fe&&x>It.width&&S.createElement(iz,{ref:bn,prefixCls:s,scrollOffset:je,scrollRange:x,rtl:se,onScroll:gt,onStartMove:mt,onStopMove:Rt,spinSize:si,containerSize:It.width,horizontal:!0,style:j==null?void 0:j.horizontalScrollBar,thumbStyle:j==null?void 0:j.horizontalScrollBarThumb,showScrollBar:q}))}var EJ=S.forwardRef(BIe);EJ.displayName="List";function VIe(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var jIe=["disabled","title","children","style","className"];function az(e){return typeof e=="string"||typeof e=="number"}var $Ie=function(r,o){var s=Awe(),c=s.prefixCls,d=s.id,f=s.open,v=s.multiple,g=s.mode,_=s.searchValue,C=s.toggleOpen,b=s.notFoundContent,T=s.onPopupScroll,I=S.useContext(N2),w=I.maxCount,x=I.flattenOptions,N=I.onActiveValue,P=I.defaultActiveFirstOption,O=I.onSelect,L=I.menuItemSelectedIcon,M=I.rawValues,F=I.fieldNames,V=I.virtual,j=I.direction,z=I.listHeight,q=I.listItemHeight,W=I.optionRender,J="".concat(c,"-item"),te=zv(function(){return x},[f,x],function(De,Ae){return Ae[0]&&De[1]!==Ae[1]}),ee=S.useRef(null),oe=S.useMemo(function(){return v&&UP(w)&&(M==null?void 0:M.size)>=w},[v,w,M==null?void 0:M.size]),pe=function(Ae){Ae.preventDefault()},ne=function(Ae){var je;(je=ee.current)===null||je===void 0||je.scrollTo(typeof Ae=="number"?{index:Ae}:Ae)},ae=S.useCallback(function(De){return g==="combobox"?!1:M.has(De)},[g,vt(M).toString(),M.size]),re=function(Ae){for(var je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,Je=te.length,Fe=0;Fe<Je;Fe+=1){var ke=(Ae+Fe*je+Je)%Je,ht=te[ke]||{},Ze=ht.group,mt=ht.data;if(!Ze&&!(mt!=null&&mt.disabled)&&(ae(mt.value)||!oe))return ke}return-1},he=S.useState(function(){return re(0)}),fe=Ue(he,2),se=fe[0],de=fe[1],ve=function(Ae){var je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;de(Ae);var Je={source:je?"keyboard":"mouse"},Fe=te[Ae];if(!Fe){N(null,-1,Je);return}N(Fe.value,Ae,Je)};S.useEffect(function(){ve(P!==!1?re(0):-1)},[te.length,_]);var ie=S.useCallback(function(De){return g==="combobox"?String(De).toLowerCase()===_.toLowerCase():M.has(De)},[g,_,vt(M).toString(),M.size]);S.useEffect(function(){var De=setTimeout(function(){if(!v&&f&&M.size===1){var je=Array.from(M)[0],Je=te.findIndex(function(Fe){var ke=Fe.data;return ke.value===je});Je!==-1&&(ve(Je),ne(Je))}});if(f){var Ae;(Ae=ee.current)===null||Ae===void 0||Ae.scrollTo(void 0)}return function(){return clearTimeout(De)}},[f,_]);var be=function(Ae){Ae!==void 0&&O(Ae,{selected:!M.has(Ae)}),v||C(!1)};if(S.useImperativeHandle(o,function(){return{onKeyDown:function(Ae){var je=Ae.which,Je=Ae.ctrlKey;switch(je){case lt.N:case lt.P:case lt.UP:case lt.DOWN:{var Fe=0;if(je===lt.UP?Fe=-1:je===lt.DOWN?Fe=1:VIe()&&Je&&(je===lt.N?Fe=1:je===lt.P&&(Fe=-1)),Fe!==0){var ke=re(se+Fe,Fe);ne(ke),ve(ke,!0)}break}case lt.TAB:case lt.ENTER:{var ht,Ze=te[se];Ze&&!(Ze!=null&&(ht=Ze.data)!==null&&ht!==void 0&&ht.disabled)&&!oe?be(Ze.value):be(void 0),f&&Ae.preventDefault();break}case lt.ESC:C(!1),f&&Ae.stopPropagation()}},onKeyUp:function(){},scrollTo:function(Ae){ne(Ae)}}}),te.length===0)return S.createElement("div",{role:"listbox",id:"".concat(d,"_list"),className:"".concat(J,"-empty"),onMouseDown:pe},b);var Re=Object.keys(F).map(function(De){return F[De]}),Pe=function(Ae){return Ae.label};function Ie(De,Ae){var je=De.group;return{role:je?"presentation":"option",id:"".concat(d,"_list_").concat(Ae)}}var xe=function(Ae){var je=te[Ae];if(!je)return null;var Je=je.data||{},Fe=Je.value,ke=je.group,ht=Wh(Je,!0),Ze=Pe(je);return je?S.createElement("div",Qe({"aria-label":typeof Ze=="string"&&!ke?Ze:null},ht,{key:Ae},Ie(je,Ae),{"aria-selected":ie(Fe)}),Fe):null},We={role:"listbox",id:"".concat(d,"_list")};return S.createElement(S.Fragment,null,V&&S.createElement("div",Qe({},We,{style:{height:0,width:0,overflow:"hidden"}}),xe(se-1),xe(se),xe(se+1)),S.createElement(EJ,{itemKey:"key",ref:ee,data:te,height:z,itemHeight:q,fullHeight:!1,onMouseDown:pe,onScroll:T,virtual:V,direction:j,innerProps:V?null:We},function(De,Ae){var je=De.group,Je=De.groupOption,Fe=De.data,ke=De.label,ht=De.value,Ze=Fe.key;if(je){var mt,Rt=(mt=Fe.title)!==null&&mt!==void 0?mt:az(ke)?ke.toString():void 0;return S.createElement("div",{className:$e(J,"".concat(J,"-group"),Fe.className),title:Rt},ke!==void 0?ke:Ze)}var ut=Fe.disabled,ot=Fe.title;Fe.children;var ze=Fe.style,tt=Fe.className,bt=An(Fe,jIe),Nt=na(bt,Re),wt=ae(ht),Xt=ut||!wt&&oe,$t="".concat(J,"-option"),Lt=$e(J,$t,tt,Ce(Ce(Ce(Ce({},"".concat($t,"-grouped"),Je),"".concat($t,"-active"),se===Ae&&!Xt),"".concat($t,"-disabled"),Xt),"".concat($t,"-selected"),wt)),Wt=Pe(De),Jt=!L||typeof L=="function"||wt,Ft=typeof Wt=="number"?Wt:Wt||ht,yt=az(Ft)?Ft.toString():void 0;return ot!==void 0&&(yt=ot),S.createElement("div",Qe({},Wh(Nt),V?{}:Ie(De,Ae),{"aria-selected":ie(ht),className:Lt,title:yt,onMouseMove:function(){se===Ae||Xt||ve(Ae)},onClick:function(){Xt||be(ht)},style:ze}),S.createElement("div",{className:"".concat($t,"-content")},typeof W=="function"?W(De,{index:Ae}):Ft),S.isValidElement(L)||wt,Jt&&S.createElement(dT,{className:"".concat(J,"-option-state"),customizeIcon:L,customizeIconProps:{value:ht,disabled:Xt,isSelected:wt}},wt?"✓":null))}))},HIe=S.forwardRef($Ie);const zIe=function(e,r){var o=S.useRef({values:new Map,options:new Map}),s=S.useMemo(function(){var d=o.current,f=d.values,v=d.options,g=e.map(function(b){if(b.label===void 0){var T;return _e(_e({},b),{},{label:(T=f.get(b.value))===null||T===void 0?void 0:T.label})}return b}),_=new Map,C=new Map;return g.forEach(function(b){_.set(b.value,b),C.set(b.value,r.get(b.value)||v.get(b.value))}),o.current.values=_,o.current.options=C,g},[e,r]),c=S.useCallback(function(d){return r.get(d)||o.current.options.get(d)},[r]);return[s,c]};function LO(e,r){return fJ(e).join("").toUpperCase().includes(r)}const WIe=function(e,r,o,s,c){return S.useMemo(function(){if(!o||s===!1)return e;var d=r.options,f=r.label,v=r.value,g=[],_=typeof s=="function",C=o.toUpperCase(),b=_?s:function(I,w){return c?LO(w[c],C):w[d]?LO(w[f!=="children"?f:"label"],C):LO(w[v],C)},T=_?function(I){return BP(I)}:function(I){return I};return e.forEach(function(I){if(I[d]){var w=b(o,T(I));if(w)g.push(I);else{var x=I[d].filter(function(N){return b(o,T(N))});x.length&&g.push(_e(_e({},I),{},Ce({},d,x)))}return}b(o,T(I))&&g.push(I)}),g},[e,s,c,o,r])};var sz=0,GIe=Oa();function KIe(){var e;return GIe?(e=sz,sz+=1):e="TEST_OR_SSR",e}function qIe(e){var r=S.useState(),o=Ue(r,2),s=o[0],c=o[1];return S.useEffect(function(){c("rc_select_".concat(KIe()))},[]),e||s}var YIe=["children","value"],XIe=["children"];function JIe(e){var r=e,o=r.key,s=r.props,c=s.children,d=s.value,f=An(s,YIe);return _e({key:o,value:d!==void 0?d:o,children:c},f)}function _J(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return zc(e).map(function(o,s){if(!S.isValidElement(o)||!o.type)return null;var c=o,d=c.type.isSelectOptGroup,f=c.key,v=c.props,g=v.children,_=An(v,XIe);return r||!d?JIe(o):_e(_e({key:"__RC_SELECT_GRP__".concat(f===null?s:f,"__"),label:f},_),{},{options:_J(g)})}).filter(function(o){return o})}var QIe=function(r,o,s,c,d){return S.useMemo(function(){var f=r,v=!r;v&&(f=_J(o));var g=new Map,_=new Map,C=function(I,w,x){x&&typeof x=="string"&&I.set(w[x],w)},b=function T(I){for(var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=0;x<I.length;x+=1){var N=I[x];!N[s.options]||w?(g.set(N[s.value],N),C(_,N,s.label),C(_,N,c),C(_,N,d)):T(N[s.options],!0)}};return b(f),{options:f,valueOptions:g,labelOptions:_}},[r,o,s,c,d])};function cz(e){var r=S.useRef();r.current=e;var o=S.useCallback(function(){return r.current.apply(r,arguments)},[]);return o}var ZIe=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],eAe=["inputValue"];function tAe(e){return!e||on(e)!=="object"}var nAe=S.forwardRef(function(e,r){var o=e.id,s=e.mode,c=e.prefixCls,d=c===void 0?"rc-select":c,f=e.backfill,v=e.fieldNames,g=e.inputValue,_=e.searchValue,C=e.onSearch,b=e.autoClearSearchValue,T=b===void 0?!0:b,I=e.onSelect,w=e.onDeselect,x=e.dropdownMatchSelectWidth,N=x===void 0?!0:x,P=e.filterOption,O=e.filterSort,L=e.optionFilterProp,M=e.optionLabelProp,F=e.options,V=e.optionRender,j=e.children,z=e.defaultActiveFirstOption,q=e.menuItemSelectedIcon,W=e.virtual,J=e.direction,te=e.listHeight,ee=te===void 0?200:te,oe=e.listItemHeight,pe=oe===void 0?20:oe,ne=e.labelRender,ae=e.value,re=e.defaultValue,he=e.labelInValue,fe=e.onChange,se=e.maxCount,de=An(e,ZIe),ve=qIe(o),ie=VP(s),be=!!(!F&&j),Re=S.useMemo(function(){return P===void 0&&s==="combobox"?!1:P},[P,s]),Pe=S.useMemo(function(){return mJ(v,be)},[JSON.stringify(v),be]),Ie=Sa("",{value:_!==void 0?_:g,postState:function(gt){return gt||""}}),xe=Ue(Ie,2),We=xe[0],De=xe[1],Ae=QIe(F,j,Pe,L,M),je=Ae.valueOptions,Je=Ae.labelOptions,Fe=Ae.options,ke=S.useCallback(function(pt){var gt=fJ(pt);return gt.map(function(Ht){var Gt,Bt,rn,or,Gn;if(tAe(Ht))Gt=Ht;else{var Fn;rn=Ht.key,Bt=Ht.label,Gt=(Fn=Ht.value)!==null&&Fn!==void 0?Fn:rn}var Zn=je.get(Gt);if(Zn){var $r;Bt===void 0&&(Bt=Zn==null?void 0:Zn[M||Pe.label]),rn===void 0&&(rn=($r=Zn==null?void 0:Zn.key)!==null&&$r!==void 0?$r:Gt),or=Zn==null?void 0:Zn.disabled,Gn=Zn==null?void 0:Zn.title}return{label:Bt,value:Gt,key:rn,disabled:or,title:Gn}})},[Pe,M,je]),ht=Sa(re,{value:ae}),Ze=Ue(ht,2),mt=Ze[0],Rt=Ze[1],ut=S.useMemo(function(){var pt,gt=ie&&mt===null?[]:mt,Ht=ke(gt);return s==="combobox"&&Kwe((pt=Ht[0])===null||pt===void 0?void 0:pt.value)?[]:Ht},[mt,ke,s,ie]),ot=zIe(ut,je),ze=Ue(ot,2),tt=ze[0],bt=ze[1],Nt=S.useMemo(function(){if(!s&&tt.length===1){var pt=tt[0];if(pt.value===null&&(pt.label===null||pt.label===void 0))return[]}return tt.map(function(gt){var Ht;return _e(_e({},gt),{},{label:(Ht=typeof ne=="function"?ne(gt):gt.label)!==null&&Ht!==void 0?Ht:gt.value})})},[s,tt,ne]),wt=S.useMemo(function(){return new Set(tt.map(function(pt){return pt.value}))},[tt]);S.useEffect(function(){if(s==="combobox"){var pt,gt=(pt=tt[0])===null||pt===void 0?void 0:pt.value;De(Gwe(gt)?String(gt):"")}},[tt]);var Xt=cz(function(pt,gt){var Ht=gt??pt;return Ce(Ce({},Pe.value,pt),Pe.label,Ht)}),$t=S.useMemo(function(){if(s!=="tags")return Fe;var pt=vt(Fe),gt=function(Gt){return je.has(Gt)};return vt(tt).sort(function(Ht,Gt){return Ht.value<Gt.value?-1:1}).forEach(function(Ht){var Gt=Ht.value;gt(Gt)||pt.push(Xt(Gt,Ht.label))}),pt},[Xt,Fe,je,tt,s]),Lt=WIe($t,Pe,We,Re,L),Wt=S.useMemo(function(){return s!=="tags"||!We||Lt.some(function(pt){return pt[L||"value"]===We})||Lt.some(function(pt){return pt[Pe.value]===We})?Lt:[Xt(We)].concat(vt(Lt))},[Xt,L,s,Lt,We,Pe]),Jt=function pt(gt){var Ht=vt(gt).sort(function(Gt,Bt){return O(Gt,Bt,{searchValue:We})});return Ht.map(function(Gt){return Array.isArray(Gt.options)?_e(_e({},Gt),{},{options:Gt.options.length>0?pt(Gt.options):Gt.options}):Gt})},Ft=S.useMemo(function(){return O?Jt(Wt):Wt},[Wt,O,We]),yt=S.useMemo(function(){return vIe(Ft,{fieldNames:Pe,childrenAsData:be})},[Ft,Pe,be]),It=function(gt){var Ht=ke(gt);if(Rt(Ht),fe&&(Ht.length!==tt.length||Ht.some(function(rn,or){var Gn;return((Gn=tt[or])===null||Gn===void 0?void 0:Gn.value)!==(rn==null?void 0:rn.value)}))){var Gt=he?Ht:Ht.map(function(rn){return rn.value}),Bt=Ht.map(function(rn){return BP(bt(rn.value))});fe(ie?Gt:Gt[0],ie?Bt:Bt[0])}},ft=S.useState(null),Pt=Ue(ft,2),Cn=Pt[0],bn=Pt[1],si=S.useState(0),Qr=Ue(si,2),vi=Qr[0],xr=Qr[1],nr=z!==void 0?z:s!=="combobox",ir=S.useCallback(function(pt,gt){var Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Gt=Ht.source,Bt=Gt===void 0?"keyboard":Gt;xr(gt),f&&s==="combobox"&&pt!==null&&Bt==="keyboard"&&bn(String(pt))},[f,s]),Tn=function(gt,Ht,Gt){var Bt=function(){var dr,li=bt(gt);return[he?{label:li==null?void 0:li[Pe.label],value:gt,key:(dr=li==null?void 0:li.key)!==null&&dr!==void 0?dr:gt}:gt,BP(li)]};if(Ht&&I){var rn=Bt(),or=Ue(rn,2),Gn=or[0],Fn=or[1];I(Gn,Fn)}else if(!Ht&&w&&Gt!=="clear"){var Zn=Bt(),$r=Ue(Zn,2),ci=$r[0],Zr=$r[1];w(ci,Zr)}},Ut=cz(function(pt,gt){var Ht,Gt=ie?gt.selected:!0;Gt?Ht=ie?[].concat(vt(tt),[pt]):[pt]:Ht=tt.filter(function(Bt){return Bt.value!==pt}),It(Ht),Tn(pt,Gt),s==="combobox"?bn(""):(!VP||T)&&(De(""),bn(""))}),kt=function(gt,Ht){It(gt);var Gt=Ht.type,Bt=Ht.values;(Gt==="remove"||Gt==="clear")&&Bt.forEach(function(rn){Tn(rn.value,!1,Gt)})},Ct=function(gt,Ht){if(De(gt),bn(null),Ht.source==="submit"){var Gt=(gt||"").trim();if(Gt){var Bt=Array.from(new Set([].concat(vt(wt),[Gt])));It(Bt),Tn(Gt,!0),De("")}return}Ht.source!=="blur"&&(s==="combobox"&&It(gt),C==null||C(gt))},Pn=function(gt){var Ht=gt;s!=="tags"&&(Ht=gt.map(function(Bt){var rn=Je.get(Bt);return rn==null?void 0:rn.value}).filter(function(Bt){return Bt!==void 0}));var Gt=Array.from(new Set([].concat(vt(wt),vt(Ht))));It(Gt),Gt.forEach(function(Bt){Tn(Bt,!0)})},tn=S.useMemo(function(){var pt=W!==!1&&N!==!1;return _e(_e({},Ae),{},{flattenOptions:yt,onActiveValue:ir,defaultActiveFirstOption:nr,onSelect:Ut,menuItemSelectedIcon:q,rawValues:wt,fieldNames:Pe,virtual:pt,direction:J,listHeight:ee,listItemHeight:pe,childrenAsData:be,maxCount:se,optionRender:V})},[se,Ae,yt,ir,nr,Ut,q,wt,Pe,W,N,J,ee,pe,be,V]);return S.createElement(N2.Provider,{value:tn},S.createElement(CIe,Qe({},de,{id:ve,prefixCls:d,ref:r,omitDomProps:eAe,mode:s,displayValues:Nt,onDisplayValuesChange:kt,direction:J,searchValue:We,onSearch:Ct,autoClearSearchValue:T,onSearchSplit:Pn,dropdownMatchSelectWidth:N,OptionList:HIe,emptyOptions:!yt.length,activeValue:Cn,activeDescendantId:"".concat(ve,"_list_").concat(vi)})))}),L2=nAe;L2.Option=D2;L2.OptGroup=P2;function YC(e,r,o){return $e({[`${e}-status-success`]:r==="success",[`${e}-status-warning`]:r==="warning",[`${e}-status-error`]:r==="error",[`${e}-status-validating`]:r==="validating",[`${e}-has-feedback`]:o})}const hT=(e,r)=>r||e,rAe=()=>{const[,e]=ns(),[r]=Nm("Empty"),s=new qr(e.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return S.createElement("svg",{style:s,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},S.createElement("title",null,(r==null?void 0:r.description)||"Empty"),S.createElement("g",{fill:"none",fillRule:"evenodd"},S.createElement("g",{transform:"translate(24 31.67)"},S.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),S.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),S.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),S.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),S.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),S.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),S.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},S.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),S.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},iAe=rAe,oAe=()=>{const[,e]=ns(),[r]=Nm("Empty"),{colorFill:o,colorFillTertiary:s,colorFillQuaternary:c,colorBgContainer:d}=e,{borderColor:f,shadowColor:v,contentColor:g}=S.useMemo(()=>({borderColor:new qr(o).onBackground(d).toHexString(),shadowColor:new qr(s).onBackground(d).toHexString(),contentColor:new qr(c).onBackground(d).toHexString()}),[o,s,c,d]);return S.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},S.createElement("title",null,(r==null?void 0:r.description)||"Empty"),S.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},S.createElement("ellipse",{fill:v,cx:"32",cy:"33",rx:"32",ry:"7"}),S.createElement("g",{fillRule:"nonzero",stroke:f},S.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),S.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:g}))))},aAe=oAe,sAe=e=>{const{componentCls:r,margin:o,marginXS:s,marginXL:c,fontSize:d,lineHeight:f}=e;return{[r]:{marginInline:s,fontSize:d,lineHeight:f,textAlign:"center",[`${r}-image`]:{height:e.emptyImgHeight,marginBottom:s,opacity:e.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${r}-description`]:{color:e.colorTextDescription},[`${r}-footer`]:{marginTop:o},"&-normal":{marginBlock:c,color:e.colorTextDescription,[`${r}-description`]:{color:e.colorTextDescription},[`${r}-image`]:{height:e.emptyImgHeightMD}},"&-small":{marginBlock:s,color:e.colorTextDescription,[`${r}-image`]:{height:e.emptyImgHeightSM}}}}},cAe=To("Empty",e=>{const{componentCls:r,controlHeightLG:o,calc:s}=e,c=ai(e,{emptyImgCls:`${r}-img`,emptyImgHeight:s(o).mul(2.5).equal(),emptyImgHeightMD:o,emptyImgHeightSM:s(o).mul(.875).equal()});return[sAe(c)]});var lAe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const SJ=S.createElement(iAe,null),yJ=S.createElement(aAe,null),k2=e=>{const{className:r,rootClassName:o,prefixCls:s,image:c=SJ,description:d,children:f,imageStyle:v,style:g,classNames:_,styles:C}=e,b=lAe(e,["className","rootClassName","prefixCls","image","description","children","imageStyle","style","classNames","styles"]),{getPrefixCls:T,direction:I,className:w,style:x,classNames:N,styles:P}=fc("empty"),O=T("empty",s),[L,M,F]=cAe(O),[V]=Nm("Empty"),j=typeof d<"u"?d:V==null?void 0:V.description,z=typeof j=="string"?j:"empty";let q=null;return typeof c=="string"?q=S.createElement("img",{alt:z,src:c}):q=c,L(S.createElement("div",Object.assign({className:$e(M,F,O,w,{[`${O}-normal`]:c===yJ,[`${O}-rtl`]:I==="rtl"},r,o,N.root,_==null?void 0:_.root),style:Object.assign(Object.assign(Object.assign(Object.assign({},P.root),x),C==null?void 0:C.root),g)},b),S.createElement("div",{className:$e(`${O}-image`,N.image,_==null?void 0:_.image),style:Object.assign(Object.assign(Object.assign({},v),P.image),C==null?void 0:C.image)},q),j&&S.createElement("div",{className:$e(`${O}-description`,N.description,_==null?void 0:_.description),style:Object.assign(Object.assign({},P.description),C==null?void 0:C.description)},j),f&&S.createElement("div",{className:$e(`${O}-footer`,N.footer,_==null?void 0:_.footer),style:Object.assign(Object.assign({},P.footer),C==null?void 0:C.footer)},f)))};k2.PRESENTED_IMAGE_DEFAULT=SJ;k2.PRESENTED_IMAGE_SIMPLE=yJ;const Tg=k2,uAe=e=>{const{componentName:r}=e,{getPrefixCls:o}=S.useContext(br),s=o("empty");switch(r){case"Table":case"List":return Ve.createElement(Tg,{image:Tg.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return Ve.createElement(Tg,{image:Tg.PRESENTED_IMAGE_SIMPLE,className:`${s}-small`});case"Table.filter":return null;default:return Ve.createElement(Tg,null)}},CJ=uAe,dAe=function(e,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;var s,c;const{variant:d,[e]:f}=S.useContext(br),v=S.useContext(QX),g=f==null?void 0:f.variant;let _;typeof r<"u"?_=r:o===!1?_="borderless":_=(c=(s=v??g)!==null&&s!==void 0?s:d)!==null&&c!==void 0?c:"outlined";const C=Nye.includes(_);return[_,C]},M2=dAe,hAe=e=>{const o={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:e==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},o),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},o),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},o),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},o),{points:["br","tr"],offset:[0,-4]})}};function fAe(e,r){return e||hAe(r)}const lz=e=>{const{optionHeight:r,optionFontSize:o,optionLineHeight:s,optionPadding:c}=e;return{position:"relative",display:"block",minHeight:r,padding:c,color:e.colorText,fontWeight:"normal",fontSize:o,lineHeight:s,boxSizing:"border-box"}},pAe=e=>{const{antCls:r,componentCls:o}=e,s=`${o}-item`,c=`&${r}-slide-up-enter${r}-slide-up-enter-active`,d=`&${r}-slide-up-appear${r}-slide-up-appear-active`,f=`&${r}-slide-up-leave${r}-slide-up-leave-active`,v=`${o}-dropdown-placement-`,g=`${s}-option-selected`;return[{[`${o}-dropdown`]:Object.assign(Object.assign({},Os(e)),{position:"absolute",top:-9999,zIndex:e.zIndexPopup,boxSizing:"border-box",padding:e.paddingXXS,overflow:"hidden",fontSize:e.fontSize,fontVariant:"initial",backgroundColor:e.colorBgElevated,borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,[`
          ${c}${v}bottomLeft,
          ${d}${v}bottomLeft
        `]:{animationName:PX},[`
          ${c}${v}topLeft,
          ${d}${v}topLeft,
          ${c}${v}topRight,
          ${d}${v}topRight
        `]:{animationName:LX},[`${f}${v}bottomLeft`]:{animationName:DX},[`
          ${f}${v}topLeft,
          ${f}${v}topRight
        `]:{animationName:kX},"&-hidden":{display:"none"},[s]:Object.assign(Object.assign({},lz(e)),{cursor:"pointer",transition:`background ${e.motionDurationSlow} ease`,borderRadius:e.borderRadiusSM,"&-group":{color:e.colorTextDescription,fontSize:e.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},jC),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${s}-option-disabled)`]:{backgroundColor:e.optionActiveBg},[`&-selected:not(${s}-option-disabled)`]:{color:e.optionSelectedColor,fontWeight:e.optionSelectedFontWeight,backgroundColor:e.optionSelectedBg,[`${s}-option-state`]:{color:e.colorPrimary}},"&-disabled":{[`&${s}-option-selected`]:{backgroundColor:e.colorBgContainerDisabled},color:e.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:e.calc(e.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},lz(e)),{color:e.colorTextDisabled})}),[`${g}:has(+ ${g})`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${g}`]:{borderStartStartRadius:0,borderStartEndRadius:0}},"&-rtl":{direction:"rtl"}})},KC(e,"slide-up"),KC(e,"slide-down"),b9(e,"move-up"),b9(e,"move-down")]},mAe=pAe,gAe=e=>{const{multipleSelectItemHeight:r,paddingXXS:o,lineWidth:s,INTERNAL_FIXED_ITEM_MARGIN:c}=e,d=e.max(e.calc(o).sub(s).equal(),0),f=e.max(e.calc(d).sub(c).equal(),0);return{basePadding:d,containerPadding:f,itemHeight:Ge(r),itemLineHeight:Ge(e.calc(r).sub(e.calc(e.lineWidth).mul(2)).equal())}},vAe=e=>{const{multipleSelectItemHeight:r,selectHeight:o,lineWidth:s}=e;return e.calc(o).sub(r).div(2).sub(s).equal()},EAe=e=>{const{componentCls:r,iconCls:o,borderRadiusSM:s,motionDurationSlow:c,paddingXS:d,multipleItemColorDisabled:f,multipleItemBorderColorDisabled:v,colorIcon:g,colorIconHover:_,INTERNAL_FIXED_ITEM_MARGIN:C}=e;return{[`${r}-selection-overflow`]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${r}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:C,borderRadius:s,cursor:"default",transition:`font-size ${c}, line-height ${c}, height ${c}`,marginInlineEnd:e.calc(C).mul(2).equal(),paddingInlineStart:d,paddingInlineEnd:e.calc(d).div(2).equal(),[`${r}-disabled&`]:{color:f,borderColor:v,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:e.calc(d).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},qv()),{display:"inline-flex",alignItems:"center",color:g,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${o}`]:{verticalAlign:"-0.2em"},"&:hover":{color:_}})}}}},_Ae=(e,r)=>{const{componentCls:o,INTERNAL_FIXED_ITEM_MARGIN:s}=e,c=`${o}-selection-overflow`,d=e.multipleSelectItemHeight,f=vAe(e),v=r?`${o}-${r}`:"",g=gAe(e);return{[`${o}-multiple${v}`]:Object.assign(Object.assign({},EAe(e)),{[`${o}-selector`]:{display:"flex",alignItems:"center",width:"100%",height:"100%",paddingInline:g.basePadding,paddingBlock:g.containerPadding,borderRadius:e.borderRadius,[`${o}-disabled&`]:{background:e.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${Ge(s)} 0`,lineHeight:Ge(d),visibility:"hidden",content:'"\\a0"'}},[`${o}-selection-item`]:{height:g.itemHeight,lineHeight:Ge(g.itemLineHeight)},[`${o}-selection-wrap`]:{alignSelf:"flex-start","&:after":{lineHeight:Ge(d),marginBlock:s}},[`${o}-prefix`]:{marginInlineStart:e.calc(e.inputPaddingHorizontalBase).sub(g.basePadding).equal()},[`${c}-item + ${c}-item,
        ${o}-prefix + ${o}-selection-wrap
      `]:{[`${o}-selection-search`]:{marginInlineStart:0},[`${o}-selection-placeholder`]:{insetInlineStart:0}},[`${c}-item-suffix`]:{minHeight:g.itemHeight,marginBlock:s},[`${o}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:e.calc(e.inputPaddingHorizontalBase).sub(f).equal(),"\n          &-input,\n          &-mirror\n        ":{height:d,fontFamily:e.fontFamily,lineHeight:Ge(d),transition:`all ${e.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${o}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:e.calc(e.inputPaddingHorizontalBase).sub(g.basePadding).equal(),insetInlineEnd:e.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${e.motionDurationSlow}`}})}};function kO(e,r){const{componentCls:o}=e,s=r?`${o}-${r}`:"",c={[`${o}-multiple${s}`]:{fontSize:e.fontSize,[`${o}-selector`]:{[`${o}-show-search&`]:{cursor:"text"}},[`
        &${o}-show-arrow ${o}-selector,
        &${o}-allow-clear ${o}-selector
      `]:{paddingInlineEnd:e.calc(e.fontSizeIcon).add(e.controlPaddingHorizontal).equal()}}};return[_Ae(e,r),c]}const SAe=e=>{const{componentCls:r}=e,o=ai(e,{selectHeight:e.controlHeightSM,multipleSelectItemHeight:e.multipleItemHeightSM,borderRadius:e.borderRadiusSM,borderRadiusSM:e.borderRadiusXS}),s=ai(e,{fontSize:e.fontSizeLG,selectHeight:e.controlHeightLG,multipleSelectItemHeight:e.multipleItemHeightLG,borderRadius:e.borderRadiusLG,borderRadiusSM:e.borderRadius});return[kO(e),kO(o,"sm"),{[`${r}-multiple${r}-sm`]:{[`${r}-selection-placeholder`]:{insetInline:e.calc(e.controlPaddingHorizontalSM).sub(e.lineWidth).equal()},[`${r}-selection-search`]:{marginInlineStart:2}}},kO(s,"lg")]},yAe=SAe;function MO(e,r){const{componentCls:o,inputPaddingHorizontalBase:s,borderRadius:c}=e,d=e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),f=r?`${o}-${r}`:"";return{[`${o}-single${f}`]:{fontSize:e.fontSize,height:e.controlHeight,[`${o}-selector`]:Object.assign(Object.assign({},Os(e,!0)),{display:"flex",borderRadius:c,flex:"1 1 auto",[`${o}-selection-wrap:after`]:{lineHeight:Ge(d)},[`${o}-selection-search`]:{position:"absolute",inset:0,width:"100%","&-input":{width:"100%",WebkitAppearance:"textfield"}},[`
          ${o}-selection-item,
          ${o}-selection-placeholder
        `]:{display:"block",padding:0,lineHeight:Ge(d),transition:`all ${e.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${o}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${o}-selection-item:empty:after`,`${o}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${o}-show-arrow ${o}-selection-item,
        &${o}-show-arrow ${o}-selection-search,
        &${o}-show-arrow ${o}-selection-placeholder
      `]:{paddingInlineEnd:e.showArrowPaddingInlineEnd},[`&${o}-open ${o}-selection-item`]:{color:e.colorTextPlaceholder},[`&:not(${o}-customize-input)`]:{[`${o}-selector`]:{width:"100%",height:"100%",alignItems:"center",padding:`0 ${Ge(s)}`,[`${o}-selection-search-input`]:{height:d,fontSize:e.fontSize},"&:after":{lineHeight:Ge(d)}}},[`&${o}-customize-input`]:{[`${o}-selector`]:{"&:after":{display:"none"},[`${o}-selection-search`]:{position:"static",width:"100%"},[`${o}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${Ge(s)}`,"&:after":{display:"none"}}}}}}}function CAe(e){const{componentCls:r}=e,o=e.calc(e.controlPaddingHorizontalSM).sub(e.lineWidth).equal();return[MO(e),MO(ai(e,{controlHeight:e.controlHeightSM,borderRadius:e.borderRadiusSM}),"sm"),{[`${r}-single${r}-sm`]:{[`&:not(${r}-customize-input)`]:{[`${r}-selector`]:{padding:`0 ${Ge(o)}`},[`&${r}-show-arrow ${r}-selection-search`]:{insetInlineEnd:e.calc(o).add(e.calc(e.fontSize).mul(1.5)).equal()},[`
            &${r}-show-arrow ${r}-selection-item,
            &${r}-show-arrow ${r}-selection-placeholder
          `]:{paddingInlineEnd:e.calc(e.fontSize).mul(1.5).equal()}}}},MO(ai(e,{controlHeight:e.singleItemHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG}),"lg")]}const bAe=e=>{const{fontSize:r,lineHeight:o,lineWidth:s,controlHeight:c,controlHeightSM:d,controlHeightLG:f,paddingXXS:v,controlPaddingHorizontal:g,zIndexPopupBase:_,colorText:C,fontWeightStrong:b,controlItemBgActive:T,controlItemBgHover:I,colorBgContainer:w,colorFillSecondary:x,colorBgContainerDisabled:N,colorTextDisabled:P,colorPrimaryHover:O,colorPrimary:L,controlOutline:M}=e,F=v*2,V=s*2,j=Math.min(c-F,c-V),z=Math.min(d-F,d-V),q=Math.min(f-F,f-V);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(v/2),zIndexPopup:_+50,optionSelectedColor:C,optionSelectedFontWeight:b,optionSelectedBg:T,optionActiveBg:I,optionPadding:`${(c-r*o)/2}px ${g}px`,optionFontSize:r,optionLineHeight:o,optionHeight:c,selectorBg:w,clearBg:w,singleItemHeightLG:f,multipleItemBg:x,multipleItemBorderColor:"transparent",multipleItemHeight:j,multipleItemHeightSM:z,multipleItemHeightLG:q,multipleSelectorBgDisabled:N,multipleItemColorDisabled:P,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(e.fontSize*1.25),hoverBorderColor:O,activeBorderColor:L,activeOutlineColor:M,selectAffixPadding:v}},bJ=(e,r)=>{const{componentCls:o,antCls:s,controlOutlineWidth:c}=e;return{[`&:not(${o}-customize-input) ${o}-selector`]:{border:`${Ge(e.lineWidth)} ${e.lineType} ${r.borderColor}`,background:e.selectorBg},[`&:not(${o}-disabled):not(${o}-customize-input):not(${s}-pagination-size-changer)`]:{[`&:hover ${o}-selector`]:{borderColor:r.hoverBorderHover},[`${o}-focused& ${o}-selector`]:{borderColor:r.activeBorderColor,boxShadow:`0 0 0 ${Ge(c)} ${r.activeOutlineColor}`,outline:0},[`${o}-prefix`]:{color:r.color}}}},uz=(e,r)=>({[`&${e.componentCls}-status-${r.status}`]:Object.assign({},bJ(e,r))}),TAe=e=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},bJ(e,{borderColor:e.colorBorder,hoverBorderHover:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeOutlineColor:e.activeOutlineColor,color:e.colorText})),uz(e,{status:"error",borderColor:e.colorError,hoverBorderHover:e.colorErrorHover,activeBorderColor:e.colorError,activeOutlineColor:e.colorErrorOutline,color:e.colorError})),uz(e,{status:"warning",borderColor:e.colorWarning,hoverBorderHover:e.colorWarningHover,activeBorderColor:e.colorWarning,activeOutlineColor:e.colorWarningOutline,color:e.colorWarning})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{background:e.colorBgContainerDisabled,color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${Ge(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`}})}),TJ=(e,r)=>{const{componentCls:o,antCls:s}=e;return{[`&:not(${o}-customize-input) ${o}-selector`]:{background:r.bg,border:`${Ge(e.lineWidth)} ${e.lineType} transparent`,color:r.color},[`&:not(${o}-disabled):not(${o}-customize-input):not(${s}-pagination-size-changer)`]:{[`&:hover ${o}-selector`]:{background:r.hoverBg},[`${o}-focused& ${o}-selector`]:{background:e.selectorBg,borderColor:r.activeBorderColor,outline:0}}}},dz=(e,r)=>({[`&${e.componentCls}-status-${r.status}`]:Object.assign({},TJ(e,r))}),RAe=e=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},TJ(e,{bg:e.colorFillTertiary,hoverBg:e.colorFillSecondary,activeBorderColor:e.activeBorderColor,color:e.colorText})),dz(e,{status:"error",bg:e.colorErrorBg,hoverBg:e.colorErrorBgHover,activeBorderColor:e.colorError,color:e.colorError})),dz(e,{status:"warning",bg:e.colorWarningBg,hoverBg:e.colorWarningBgHover,activeBorderColor:e.colorWarning,color:e.colorWarning})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{borderColor:e.colorBorder,background:e.colorBgContainerDisabled,color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.colorBgContainer,border:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}})}),wAe=e=>({"&-borderless":{[`${e.componentCls}-selector`]:{background:"transparent",border:`${Ge(e.lineWidth)} ${e.lineType} transparent`},[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${Ge(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`},[`&${e.componentCls}-status-error`]:{[`${e.componentCls}-prefix, ${e.componentCls}-selection-item`]:{color:e.colorError}},[`&${e.componentCls}-status-warning`]:{[`${e.componentCls}-prefix, ${e.componentCls}-selection-item`]:{color:e.colorWarning}}}}),RJ=(e,r)=>{const{componentCls:o,antCls:s}=e;return{[`&:not(${o}-customize-input) ${o}-selector`]:{borderWidth:`0 0 ${Ge(e.lineWidth)} 0`,borderStyle:`none none ${e.lineType} none`,borderColor:r.borderColor,background:e.selectorBg,borderRadius:0},[`&:not(${o}-disabled):not(${o}-customize-input):not(${s}-pagination-size-changer)`]:{[`&:hover ${o}-selector`]:{borderColor:r.hoverBorderHover},[`${o}-focused& ${o}-selector`]:{borderColor:r.activeBorderColor,outline:0},[`${o}-prefix`]:{color:r.color}}}},hz=(e,r)=>({[`&${e.componentCls}-status-${r.status}`]:Object.assign({},RJ(e,r))}),IAe=e=>({"&-underlined":Object.assign(Object.assign(Object.assign(Object.assign({},RJ(e,{borderColor:e.colorBorder,hoverBorderHover:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeOutlineColor:e.activeOutlineColor,color:e.colorText})),hz(e,{status:"error",borderColor:e.colorError,hoverBorderHover:e.colorErrorHover,activeBorderColor:e.colorError,activeOutlineColor:e.colorErrorOutline,color:e.colorError})),hz(e,{status:"warning",borderColor:e.colorWarning,hoverBorderHover:e.colorWarningHover,activeBorderColor:e.colorWarning,activeOutlineColor:e.colorWarningOutline,color:e.colorWarning})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${Ge(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`}})}),AAe=e=>({[e.componentCls]:Object.assign(Object.assign(Object.assign(Object.assign({},TAe(e)),RAe(e)),wAe(e)),IAe(e))}),OAe=AAe,xAe=e=>{const{componentCls:r}=e;return{position:"relative",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,input:{cursor:"pointer"},[`${r}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${r}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},NAe=e=>{const{componentCls:r}=e;return{[`${r}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},PAe=e=>{const{antCls:r,componentCls:o,inputPaddingHorizontalBase:s,iconCls:c}=e;return{[o]:Object.assign(Object.assign({},Os(e)),{position:"relative",display:"inline-flex",cursor:"pointer",[`&:not(${o}-customize-input) ${o}-selector`]:Object.assign(Object.assign({},xAe(e)),NAe(e)),[`${o}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},jC),{[`> ${r}-typography`]:{display:"inline"}}),[`${o}-selection-placeholder`]:Object.assign(Object.assign({},jC),{flex:1,color:e.colorTextPlaceholder,pointerEvents:"none"}),[`${o}-arrow`]:Object.assign(Object.assign({},qv()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:s,height:e.fontSizeIcon,marginTop:e.calc(e.fontSizeIcon).mul(-1).div(2).equal(),color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${e.motionDurationSlow} ease`,[c]:{verticalAlign:"top",transition:`transform ${e.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${o}-suffix)`]:{pointerEvents:"auto"}},[`${o}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${o}-selection-wrap`]:{display:"flex",width:"100%",position:"relative",minWidth:0,"&:after":{content:'"\\a0"',width:0,overflow:"hidden"}},[`${o}-prefix`]:{flex:"none",marginInlineEnd:e.selectAffixPadding},[`${o}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:s,zIndex:1,display:"inline-block",width:e.fontSizeIcon,height:e.fontSizeIcon,marginTop:e.calc(e.fontSizeIcon).mul(-1).div(2).equal(),color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${e.motionDurationMid} ease, opacity ${e.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:e.colorTextTertiary}},[`&:hover ${o}-clear`]:{opacity:1,background:e.colorBgBase,borderRadius:"50%"}}),[`${o}-status`]:{"&-error, &-warning, &-success, &-validating":{[`&${o}-has-feedback`]:{[`${o}-clear`]:{insetInlineEnd:e.calc(s).add(e.fontSize).add(e.paddingXS).equal()}}}}}},DAe=e=>{const{componentCls:r}=e;return[{[r]:{[`&${r}-in-form-item`]:{width:"100%"}}},PAe(e),CAe(e),yAe(e),mAe(e),{[`${r}-rtl`]:{direction:"rtl"}},b2(e,{borderElCls:`${r}-selector`,focusElCls:`${r}-focused`})]},LAe=To("Select",(e,r)=>{let{rootPrefixCls:o}=r;const s=ai(e,{rootPrefixCls:o,inputPaddingHorizontalBase:e.calc(e.paddingSM).sub(1).equal(),multipleSelectItemHeight:e.multipleItemHeight,selectHeight:e.controlHeight});return[DAe(s),OAe(s)]},bAe,{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});var kAe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const MAe=kAe;var FAe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:MAe}))},UAe=S.forwardRef(FAe);const wJ=UAe;var BAe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};const VAe=BAe;var jAe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:VAe}))},$Ae=S.forwardRef(jAe);const HAe=$Ae;var zAe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};const WAe=zAe;var GAe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:WAe}))},KAe=S.forwardRef(GAe);const IJ=KAe;function qAe(e){let{suffixIcon:r,clearIcon:o,menuItemSelectedIcon:s,removeIcon:c,loading:d,multiple:f,hasFeedback:v,prefixCls:g,showSuffixIcon:_,feedbackIcon:C,showArrow:b,componentName:T}=e;const I=o??S.createElement(tT,null),w=O=>r===null&&!v&&!b?null:S.createElement(S.Fragment,null,_!==!1&&O,v&&C);let x=null;if(r!==void 0)x=w(r);else if(d)x=w(S.createElement(nT,{spin:!0}));else{const O=`${g}-suffix`;x=L=>{let{open:M,showSearch:F}=L;return w(M&&F?S.createElement(IJ,{className:O}):S.createElement(HAe,{className:O}))}}let N=null;s!==void 0?N=s:f?N=S.createElement(wJ,null):N=null;let P=null;return c!==void 0?P=c:P=S.createElement(_X,null),{clearIcon:I,suffixIcon:x,itemIcon:N,removeIcon:P}}function YAe(e,r){return r!==void 0?r:e!==null}var XAe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const AJ="SECRET_COMBOBOX_MODE_DO_NOT_USE",JAe=(e,r)=>{var o;const{prefixCls:s,bordered:c,className:d,rootClassName:f,getPopupContainer:v,popupClassName:g,dropdownClassName:_,listHeight:C=256,placement:b,listItemHeight:T,size:I,disabled:w,notFoundContent:x,status:N,builtinPlacements:P,dropdownMatchSelectWidth:O,popupMatchSelectWidth:L,direction:M,style:F,allowClear:V,variant:j,dropdownStyle:z,transitionName:q,tagRender:W,maxCount:J,prefix:te}=e,ee=XAe(e,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount","prefix"]),{getPopupContainer:oe,getPrefixCls:pe,renderEmpty:ne,direction:ae,virtual:re,popupMatchSelectWidth:he,popupOverflow:fe}=S.useContext(br),se=fc("select"),[,de]=ns(),ve=T??(de==null?void 0:de.controlHeight),ie=pe("select",s),be=pe(),Re=M??ae,{compactSize:Pe,compactItemClassnames:Ie}=Xv(ie,Re),[xe,We]=M2("select",j,c),De=_u(ie),[Ae,je,Je]=LAe(ie,De),Fe=S.useMemo(()=>{const{mode:Cn}=e;if(Cn!=="combobox")return Cn===AJ?"combobox":Cn},[e.mode]),ke=Fe==="multiple"||Fe==="tags",ht=YAe(e.suffixIcon,e.showArrow),Ze=(o=L??O)!==null&&o!==void 0?o:he,{status:mt,hasFeedback:Rt,isFormItemInput:ut,feedbackIcon:ot}=S.useContext(Rs),ze=hT(mt,N);let tt;x!==void 0?tt=x:Fe==="combobox"?tt=null:tt=(ne==null?void 0:ne("Select"))||S.createElement(CJ,{componentName:"Select"});const{suffixIcon:bt,itemIcon:Nt,removeIcon:wt,clearIcon:Xt}=qAe(Object.assign(Object.assign({},ee),{multiple:ke,hasFeedback:Rt,feedbackIcon:ot,showSuffixIcon:ht,prefixCls:ie,componentName:"Select"})),$t=V===!0?{clearIcon:Xt}:V,Lt=na(ee,["suffixIcon","itemIcon"]),Wt=$e(g||_,{[`${ie}-dropdown-${Re}`]:Re==="rtl"},f,Je,De,je),Jt=Su(Cn=>{var bn;return(bn=I??Pe)!==null&&bn!==void 0?bn:Cn}),Ft=S.useContext(Zh),yt=w??Ft,It=$e({[`${ie}-lg`]:Jt==="large",[`${ie}-sm`]:Jt==="small",[`${ie}-rtl`]:Re==="rtl",[`${ie}-${xe}`]:We,[`${ie}-in-form-item`]:ut},YC(ie,ze,Rt),Ie,se.className,d,f,Je,De,je),ft=S.useMemo(()=>b!==void 0?b:Re==="rtl"?"bottomRight":"bottomLeft",[b,Re]),[Pt]=_2("SelectLike",z==null?void 0:z.zIndex);return Ae(S.createElement(L2,Object.assign({ref:r,virtual:re,showSearch:se.showSearch},Lt,{style:Object.assign(Object.assign({},se.style),F),dropdownMatchSelectWidth:Ze,transitionName:IX(be,"slide-up",q),builtinPlacements:fAe(P,fe),listHeight:C,listItemHeight:ve,mode:Fe,prefixCls:ie,placement:ft,direction:Re,prefix:te,suffixIcon:bt,menuItemSelectedIcon:Nt,removeIcon:wt,allowClear:$t,notFoundContent:tt,className:It,getPopupContainer:v||oe,dropdownClassName:Wt,disabled:yt,dropdownStyle:Object.assign(Object.assign({},z),{zIndex:Pt}),maxCount:ke?J:void 0,tagRender:ke?W:void 0})))},Dm=S.forwardRef(JAe),QAe=wwe(Dm,"dropdownAlign");Dm.SECRET_COMBOBOX_MODE_DO_NOT_USE=AJ;Dm.Option=D2;Dm.OptGroup=P2;Dm._InternalPanelDoNotUseOrYouWillBeFired=QAe;const ZAe=Dm,Kh=["xxl","xl","lg","md","sm","xs"],eOe=e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}),tOe=e=>{const r=e,o=[].concat(Kh).reverse();return o.forEach((s,c)=>{const d=s.toUpperCase(),f=`screen${d}Min`,v=`screen${d}`;if(!(r[f]<=r[v]))throw new Error(`${f}<=${v} fails : !(${r[f]}<=${r[v]})`);if(c<o.length-1){const g=`screen${d}Max`;if(!(r[v]<=r[g]))throw new Error(`${v}<=${g} fails : !(${r[v]}<=${r[g]})`);const C=`screen${o[c+1].toUpperCase()}Min`;if(!(r[g]<=r[C]))throw new Error(`${g}<=${C} fails : !(${r[g]}<=${r[C]})`)}}),e};function nOe(){const[,e]=ns(),r=eOe(tOe(e));return Ve.useMemo(()=>{const o=new Map;let s=-1,c={};return{matchHandlers:{},dispatch(d){return c=d,o.forEach(f=>f(c)),o.size>=1},subscribe(d){return o.size||this.register(),s+=1,o.set(s,d),d(c),s},unsubscribe(d){o.delete(d),o.size||this.unregister()},unregister(){Object.keys(r).forEach(d=>{const f=r[d],v=this.matchHandlers[f];v==null||v.mql.removeListener(v==null?void 0:v.listener)}),o.clear()},register(){Object.keys(r).forEach(d=>{const f=r[d],v=_=>{let{matches:C}=_;this.dispatch(Object.assign(Object.assign({},c),{[d]:C}))},g=window.matchMedia(f);g.addListener(v),this.matchHandlers[f]={mql:g,listener:v},v(g)})},responsiveMap:r}},[e])}function rOe(){const[,e]=S.useReducer(r=>r+1,0);return e}function F2(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=S.useRef(r),s=rOe(),c=nOe();return Cr(()=>{const d=c.subscribe(f=>{o.current=f,e&&s()});return()=>c.unsubscribe(d)},[]),o.current}function OJ(e){var r=e.children,o=e.prefixCls,s=e.id,c=e.overlayInnerStyle,d=e.bodyClassName,f=e.className,v=e.style;return S.createElement("div",{className:$e("".concat(o,"-content"),f),style:v},S.createElement("div",{className:$e("".concat(o,"-inner"),d),id:s,role:"tooltip",style:c},typeof r=="function"?r():r))}var Np={shiftX:64,adjustY:1},Pp={adjustX:1,shiftY:!0},ec=[0,0],iOe={left:{points:["cr","cl"],overflow:Pp,offset:[-4,0],targetOffset:ec},right:{points:["cl","cr"],overflow:Pp,offset:[4,0],targetOffset:ec},top:{points:["bc","tc"],overflow:Np,offset:[0,-4],targetOffset:ec},bottom:{points:["tc","bc"],overflow:Np,offset:[0,4],targetOffset:ec},topLeft:{points:["bl","tl"],overflow:Np,offset:[0,-4],targetOffset:ec},leftTop:{points:["tr","tl"],overflow:Pp,offset:[-4,0],targetOffset:ec},topRight:{points:["br","tr"],overflow:Np,offset:[0,-4],targetOffset:ec},rightTop:{points:["tl","tr"],overflow:Pp,offset:[4,0],targetOffset:ec},bottomRight:{points:["tr","br"],overflow:Np,offset:[0,4],targetOffset:ec},rightBottom:{points:["bl","br"],overflow:Pp,offset:[4,0],targetOffset:ec},bottomLeft:{points:["tl","bl"],overflow:Np,offset:[0,4],targetOffset:ec},leftBottom:{points:["br","bl"],overflow:Pp,offset:[-4,0],targetOffset:ec}},oOe=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow","classNames","styles"],aOe=function(r,o){var s=r.overlayClassName,c=r.trigger,d=c===void 0?["hover"]:c,f=r.mouseEnterDelay,v=f===void 0?0:f,g=r.mouseLeaveDelay,_=g===void 0?.1:g,C=r.overlayStyle,b=r.prefixCls,T=b===void 0?"rc-tooltip":b,I=r.children,w=r.onVisibleChange,x=r.afterVisibleChange,N=r.transitionName,P=r.animation,O=r.motion,L=r.placement,M=L===void 0?"right":L,F=r.align,V=F===void 0?{}:F,j=r.destroyTooltipOnHide,z=j===void 0?!1:j,q=r.defaultVisible,W=r.getTooltipContainer,J=r.overlayInnerStyle;r.arrowContent;var te=r.overlay,ee=r.id,oe=r.showArrow,pe=oe===void 0?!0:oe,ne=r.classNames,ae=r.styles,re=An(r,oOe),he=$X(ee),fe=S.useRef(null);S.useImperativeHandle(o,function(){return fe.current});var se=_e({},re);"visible"in r&&(se.popupVisible=r.visible);var de=function(){return S.createElement(OJ,{key:"content",prefixCls:T,id:he,bodyClassName:ne==null?void 0:ne.body,overlayInnerStyle:_e(_e({},J),ae==null?void 0:ae.body)},te)},ve=function(){var be=S.Children.only(I),Re=(be==null?void 0:be.props)||{},Pe=_e(_e({},Re),{},{"aria-describedby":te?he:null});return S.cloneElement(I,Pe)};return S.createElement(x2,Qe({popupClassName:$e(s,ne==null?void 0:ne.root),prefixCls:T,popup:de,action:d,builtinPlacements:iOe,popupPlacement:M,ref:fe,popupAlign:V,getPopupContainer:W,onPopupVisibleChange:w,afterPopupVisibleChange:x,popupTransitionName:N,popupAnimation:P,popupMotion:O,defaultPopupVisible:q,autoDestroy:z,mouseLeaveDelay:_,popupStyle:_e(_e({},C),ae==null?void 0:ae.root),mouseEnterDelay:v,arrow:pe},se),ve())};const sOe=S.forwardRef(aOe);function cOe(e){const{sizePopupArrow:r,borderRadiusXS:o,borderRadiusOuter:s}=e,c=r/2,d=0,f=c,v=s*1/Math.sqrt(2),g=c-s*(1-1/Math.sqrt(2)),_=c-o*(1/Math.sqrt(2)),C=s*(Math.sqrt(2)-1)+o*(1/Math.sqrt(2)),b=2*c-_,T=C,I=2*c-v,w=g,x=2*c-d,N=f,P=c*Math.sqrt(2)+s*(Math.sqrt(2)-2),O=s*(Math.sqrt(2)-1),L=`polygon(${O}px 100%, 50% ${O}px, ${2*c-O}px 100%, ${O}px 100%)`,M=`path('M ${d} ${f} A ${s} ${s} 0 0 0 ${v} ${g} L ${_} ${C} A ${o} ${o} 0 0 1 ${b} ${T} L ${I} ${w} A ${s} ${s} 0 0 0 ${x} ${N} Z')`;return{arrowShadowWidth:P,arrowPath:M,arrowPolygon:L}}const lOe=(e,r,o)=>{const{sizePopupArrow:s,arrowPolygon:c,arrowPath:d,arrowShadowWidth:f,borderRadiusXS:v,calc:g}=e;return{pointerEvents:"none",width:s,height:s,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:s,height:g(s).div(2).equal(),background:r,clipPath:{_multi_value_:!0,value:[c,d]},content:'""'},"&::after":{content:'""',position:"absolute",width:f,height:f,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${Ge(v)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:o,zIndex:0,background:"transparent"}}},xJ=8;function NJ(e){const{contentRadius:r,limitVerticalRadius:o}=e,s=r>12?r+2:12;return{arrowOffsetHorizontal:s,arrowOffsetVertical:o?xJ:s}}function Ry(e,r){return e?r:{}}function uOe(e,r,o){const{componentCls:s,boxShadowPopoverArrow:c,arrowOffsetVertical:d,arrowOffsetHorizontal:f}=e,{arrowDistance:v=0,arrowPlacement:g={left:!0,right:!0,top:!0,bottom:!0}}=o||{};return{[s]:Object.assign(Object.assign(Object.assign(Object.assign({[`${s}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},lOe(e,r,c)),{"&:before":{background:r}})]},Ry(!!g.top,{[[`&-placement-top > ${s}-arrow`,`&-placement-topLeft > ${s}-arrow`,`&-placement-topRight > ${s}-arrow`].join(",")]:{bottom:v,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${s}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":f,[`> ${s}-arrow`]:{left:{_skip_check_:!0,value:f}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${Ge(f)})`,[`> ${s}-arrow`]:{right:{_skip_check_:!0,value:f}}}})),Ry(!!g.bottom,{[[`&-placement-bottom > ${s}-arrow`,`&-placement-bottomLeft > ${s}-arrow`,`&-placement-bottomRight > ${s}-arrow`].join(",")]:{top:v,transform:"translateY(-100%)"},[`&-placement-bottom > ${s}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":f,[`> ${s}-arrow`]:{left:{_skip_check_:!0,value:f}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${Ge(f)})`,[`> ${s}-arrow`]:{right:{_skip_check_:!0,value:f}}}})),Ry(!!g.left,{[[`&-placement-left > ${s}-arrow`,`&-placement-leftTop > ${s}-arrow`,`&-placement-leftBottom > ${s}-arrow`].join(",")]:{right:{_skip_check_:!0,value:v},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${s}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${s}-arrow`]:{top:d},[`&-placement-leftBottom > ${s}-arrow`]:{bottom:d}})),Ry(!!g.right,{[[`&-placement-right > ${s}-arrow`,`&-placement-rightTop > ${s}-arrow`,`&-placement-rightBottom > ${s}-arrow`].join(",")]:{left:{_skip_check_:!0,value:v},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${s}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${s}-arrow`]:{top:d},[`&-placement-rightBottom > ${s}-arrow`]:{bottom:d}}))}}function dOe(e,r,o,s){if(s===!1)return{adjustX:!1,adjustY:!1};const c=s&&typeof s=="object"?s:{},d={};switch(e){case"top":case"bottom":d.shiftX=r.arrowOffsetHorizontal*2+o,d.shiftY=!0,d.adjustY=!0;break;case"left":case"right":d.shiftY=r.arrowOffsetVertical*2+o,d.shiftX=!0,d.adjustX=!0;break}const f=Object.assign(Object.assign({},d),c);return f.shiftX||(f.adjustX=!0),f.shiftY||(f.adjustY=!0),f}const fz={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},hOe={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},fOe=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function pOe(e){const{arrowWidth:r,autoAdjustOverflow:o,arrowPointAtCenter:s,offset:c,borderRadius:d,visibleFirst:f}=e,v=r/2,g={};return Object.keys(fz).forEach(_=>{const C=s&&hOe[_]||fz[_],b=Object.assign(Object.assign({},C),{offset:[0,0],dynamicInset:!0});switch(g[_]=b,fOe.has(_)&&(b.autoArrow=!1),_){case"top":case"topLeft":case"topRight":b.offset[1]=-v-c;break;case"bottom":case"bottomLeft":case"bottomRight":b.offset[1]=v+c;break;case"left":case"leftTop":case"leftBottom":b.offset[0]=-v-c;break;case"right":case"rightTop":case"rightBottom":b.offset[0]=v+c;break}const T=NJ({contentRadius:d,limitVerticalRadius:!0});if(s)switch(_){case"topLeft":case"bottomLeft":b.offset[0]=-T.arrowOffsetHorizontal-v;break;case"topRight":case"bottomRight":b.offset[0]=T.arrowOffsetHorizontal+v;break;case"leftTop":case"rightTop":b.offset[1]=-T.arrowOffsetHorizontal*2+v;break;case"leftBottom":case"rightBottom":b.offset[1]=T.arrowOffsetHorizontal*2-v;break}b.overflow=dOe(_,T,r,o),f&&(b.htmlRegion="visibleFirst")}),g}const mOe=e=>{const{calc:r,componentCls:o,tooltipMaxWidth:s,tooltipColor:c,tooltipBg:d,tooltipBorderRadius:f,zIndexPopup:v,controlHeight:g,boxShadowSecondary:_,paddingSM:C,paddingXS:b,arrowOffsetHorizontal:T,sizePopupArrow:I}=e,w=r(f).add(I).add(T).equal(),x=r(f).mul(2).add(I).equal();return[{[o]:Object.assign(Object.assign(Object.assign(Object.assign({},Os(e)),{position:"absolute",zIndex:v,display:"block",width:"max-content",maxWidth:s,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":d,[`${o}-inner`]:{minWidth:x,minHeight:g,padding:`${Ge(e.calc(C).div(2).equal())} ${Ge(b)}`,color:c,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:d,borderRadius:f,boxShadow:_,boxSizing:"border-box"},[["&-placement-topLeft","&-placement-topRight","&-placement-bottomLeft","&-placement-bottomRight"].join(",")]:{minWidth:w},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${o}-inner`]:{borderRadius:e.min(f,xJ)}},[`${o}-content`]:{position:"relative"}}),rCe(e,(N,P)=>{let{darkColor:O}=P;return{[`&${o}-${N}`]:{[`${o}-inner`]:{backgroundColor:O},[`${o}-arrow`]:{"--antd-arrow-background-color":O}}}})),{"&-rtl":{direction:"rtl"}})},uOe(e,"var(--antd-arrow-background-color)"),{[`${o}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},gOe=e=>Object.assign(Object.assign({zIndexPopup:e.zIndexPopupBase+70},NJ({contentRadius:e.borderRadius,limitVerticalRadius:!0})),cOe(ai(e,{borderRadiusOuter:Math.min(e.borderRadiusOuter,4)}))),PJ=function(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return To("Tooltip",s=>{const{borderRadius:c,colorTextLightSolid:d,colorBgSpotlight:f}=s,v=ai(s,{tooltipMaxWidth:250,tooltipColor:d,tooltipBorderRadius:c,tooltipBg:f});return[mOe(v),MX(s,"zoom-big-fast")]},gOe,{resetStyle:!1,injectStyle:r})(e)},vOe=zh.map(e=>`${e}-inverse`);function EOe(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(vt(vOe),vt(zh)).includes(e):zh.includes(e)}function DJ(e,r){const o=EOe(r),s=$e({[`${e}-${r}`]:r&&o}),c={},d={};return r&&!o&&(c.background=r,d["--antd-arrow-background-color"]=r),{className:s,overlayStyle:c,arrowStyle:d}}const _Oe=e=>{const{prefixCls:r,className:o,placement:s="top",title:c,color:d,overlayInnerStyle:f}=e,{getPrefixCls:v}=S.useContext(br),g=v("tooltip",r),[_,C,b]=PJ(g),T=DJ(g,d),I=T.arrowStyle,w=Object.assign(Object.assign({},f),T.overlayStyle),x=$e(C,b,g,`${g}-pure`,`${g}-placement-${s}`,o,T.className);return _(S.createElement("div",{className:x,style:I},S.createElement("div",{className:`${g}-arrow`}),S.createElement(OJ,Object.assign({},e,{className:C,prefixCls:g,overlayInnerStyle:w}),c)))},SOe=_Oe;var yOe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const COe=S.forwardRef((e,r)=>{var o,s;const{prefixCls:c,openClassName:d,getTooltipContainer:f,color:v,overlayInnerStyle:g,children:_,afterOpenChange:C,afterVisibleChange:b,destroyTooltipOnHide:T,arrow:I=!0,title:w,overlay:x,builtinPlacements:N,arrowPointAtCenter:P=!1,autoAdjustOverflow:O=!0,motion:L,getPopupContainer:M,placement:F="top",mouseEnterDelay:V=.1,mouseLeaveDelay:j=.1,overlayStyle:z,rootClassName:q,overlayClassName:W,styles:J,classNames:te}=e,ee=yOe(e,["prefixCls","openClassName","getTooltipContainer","color","overlayInnerStyle","children","afterOpenChange","afterVisibleChange","destroyTooltipOnHide","arrow","title","overlay","builtinPlacements","arrowPointAtCenter","autoAdjustOverflow","motion","getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName","overlayClassName","styles","classNames"]),oe=!!I,[,pe]=ns(),{getPopupContainer:ne,getPrefixCls:ae,direction:re,className:he,style:fe,classNames:se,styles:de}=fc("tooltip"),ve=Yb(),ie=S.useRef(null),be=()=>{var Lt;(Lt=ie.current)===null||Lt===void 0||Lt.forceAlign()};S.useImperativeHandle(r,()=>{var Lt,Wt;return{forceAlign:be,forcePopupAlign:()=>{ve.deprecated(!1,"forcePopupAlign","forceAlign"),be()},nativeElement:(Lt=ie.current)===null||Lt===void 0?void 0:Lt.nativeElement,popupElement:(Wt=ie.current)===null||Wt===void 0?void 0:Wt.popupElement}});const[Re,Pe]=Sa(!1,{value:(o=e.open)!==null&&o!==void 0?o:e.visible,defaultValue:(s=e.defaultOpen)!==null&&s!==void 0?s:e.defaultVisible}),Ie=!w&&!x&&w!==0,xe=Lt=>{var Wt,Jt;Pe(Ie?!1:Lt),Ie||((Wt=e.onOpenChange)===null||Wt===void 0||Wt.call(e,Lt),(Jt=e.onVisibleChange)===null||Jt===void 0||Jt.call(e,Lt))},We=S.useMemo(()=>{var Lt,Wt;let Jt=P;return typeof I=="object"&&(Jt=(Wt=(Lt=I.pointAtCenter)!==null&&Lt!==void 0?Lt:I.arrowPointAtCenter)!==null&&Wt!==void 0?Wt:P),N||pOe({arrowPointAtCenter:Jt,autoAdjustOverflow:O,arrowWidth:oe?pe.sizePopupArrow:0,borderRadius:pe.borderRadius,offset:pe.marginXXS,visibleFirst:!0})},[P,I,N,pe]),De=S.useMemo(()=>w===0?w:x||w||"",[x,w]),Ae=S.createElement(kP,{space:!0},typeof De=="function"?De():De),je=ae("tooltip",c),Je=ae(),Fe=e["data-popover-inject"];let ke=Re;!("open"in e)&&!("visible"in e)&&Ie&&(ke=!1);const ht=S.isValidElement(_)&&!yX(_)?_:S.createElement("span",null,_),Ze=ht.props,mt=!Ze.className||typeof Ze.className=="string"?$e(Ze.className,d||`${je}-open`):Ze.className,[Rt,ut,ot]=PJ(je,!Fe),ze=DJ(je,v),tt=ze.arrowStyle,bt=$e(W,{[`${je}-rtl`]:re==="rtl"},ze.className,q,ut,ot,he,se.root,te==null?void 0:te.root),Nt=$e(se.body,te==null?void 0:te.body),[wt,Xt]=_2("Tooltip",ee.zIndex),$t=S.createElement(sOe,Object.assign({},ee,{zIndex:wt,showArrow:oe,placement:F,mouseEnterDelay:V,mouseLeaveDelay:j,prefixCls:je,classNames:{root:bt,body:Nt},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},tt),de.root),fe),z),J==null?void 0:J.root),body:Object.assign(Object.assign(Object.assign(Object.assign({},de.body),g),J==null?void 0:J.body),ze.overlayStyle)},getTooltipContainer:M||f||ne,ref:ie,builtinPlacements:We,overlay:Ae,visible:ke,onVisibleChange:xe,afterVisibleChange:C??b,arrowContent:S.createElement("span",{className:`${je}-arrow-content`}),motion:{motionName:IX(Je,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!T}),ke?dc(ht,{className:mt}):ht);return Rt(S.createElement(TX.Provider,{value:Xt},$t))}),LJ=COe;LJ._InternalPanelDoNotUseOrYouWillBeFired=SOe;const Zv=LJ;var bOe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};const TOe=bOe;var ROe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:TOe}))},wOe=S.forwardRef(ROe);const XC=wOe;var kJ=S.createContext(null);function MJ(e,r){return e===void 0?null:"".concat(e,"-").concat(r)}function FJ(e){var r=S.useContext(kJ);return MJ(r,e)}var IOe=["children","locked"],Wc=S.createContext(null);function AOe(e,r){var o=_e({},e);return Object.keys(r).forEach(function(s){var c=r[s];c!==void 0&&(o[s]=c)}),o}function Pv(e){var r=e.children,o=e.locked,s=An(e,IOe),c=S.useContext(Wc),d=zv(function(){return AOe(c,s)},[c,s],function(f,v){return!o&&(f[0]!==v[0]||!Tv(f[1],v[1],!0))});return S.createElement(Wc.Provider,{value:d},r)}var OOe=[],UJ=S.createContext(null);function fT(){return S.useContext(UJ)}var BJ=S.createContext(OOe);function Lm(e){var r=S.useContext(BJ);return S.useMemo(function(){return e!==void 0?[].concat(vt(r),[e]):r},[r,e])}var VJ=S.createContext(null),U2=S.createContext({});function pz(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(iT(e)){var o=e.nodeName.toLowerCase(),s=["input","select","textarea","button"].includes(o)||e.isContentEditable||o==="a"&&!!e.getAttribute("href"),c=e.getAttribute("tabindex"),d=Number(c),f=null;return c&&!Number.isNaN(d)?f=d:s&&f===null&&(f=0),s&&e.disabled&&(f=null),f!==null&&(f>=0||r&&f<0)}return!1}function xOe(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=vt(e.querySelectorAll("*")).filter(function(s){return pz(s,r)});return pz(e,r)&&o.unshift(e),o}var $P=lt.LEFT,HP=lt.RIGHT,zP=lt.UP,iC=lt.DOWN,oC=lt.ENTER,jJ=lt.ESC,Rg=lt.HOME,wg=lt.END,mz=[zP,iC,$P,HP];function NOe(e,r,o,s){var c,d="prev",f="next",v="children",g="parent";if(e==="inline"&&s===oC)return{inlineTrigger:!0};var _=Ce(Ce({},zP,d),iC,f),C=Ce(Ce(Ce(Ce({},$P,o?f:d),HP,o?d:f),iC,v),oC,v),b=Ce(Ce(Ce(Ce(Ce(Ce({},zP,d),iC,f),oC,v),jJ,g),$P,o?v:g),HP,o?g:v),T={inline:_,horizontal:C,vertical:b,inlineSub:_,horizontalSub:b,verticalSub:b},I=(c=T["".concat(e).concat(r?"":"Sub")])===null||c===void 0?void 0:c[s];switch(I){case d:return{offset:-1,sibling:!0};case f:return{offset:1,sibling:!0};case g:return{offset:-1,sibling:!1};case v:return{offset:1,sibling:!1};default:return null}}function POe(e){for(var r=e;r;){if(r.getAttribute("data-menu-list"))return r;r=r.parentElement}return null}function DOe(e,r){for(var o=e||document.activeElement;o;){if(r.has(o))return o;o=o.parentElement}return null}function B2(e,r){var o=xOe(e,!0);return o.filter(function(s){return r.has(s)})}function gz(e,r,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!e)return null;var c=B2(e,r),d=c.length,f=c.findIndex(function(v){return o===v});return s<0?f===-1?f=d-1:f-=1:s>0&&(f+=1),f=(f+d)%d,c[f]}var WP=function(r,o){var s=new Set,c=new Map,d=new Map;return r.forEach(function(f){var v=document.querySelector("[data-menu-id='".concat(MJ(o,f),"']"));v&&(s.add(v),d.set(v,f),c.set(f,v))}),{elements:s,key2element:c,element2key:d}};function LOe(e,r,o,s,c,d,f,v,g,_){var C=S.useRef(),b=S.useRef();b.current=r;var T=function(){oi.cancel(C.current)};return S.useEffect(function(){return function(){T()}},[]),function(I){var w=I.which;if([].concat(mz,[oC,jJ,Rg,wg]).includes(w)){var x=d(),N=WP(x,s),P=N,O=P.elements,L=P.key2element,M=P.element2key,F=L.get(r),V=DOe(F,O),j=M.get(V),z=NOe(e,f(j,!0).length===1,o,w);if(!z&&w!==Rg&&w!==wg)return;(mz.includes(w)||[Rg,wg].includes(w))&&I.preventDefault();var q=function(ae){if(ae){var re=ae,he=ae.querySelector("a");he!=null&&he.getAttribute("href")&&(re=he);var fe=M.get(ae);v(fe),T(),C.current=oi(function(){b.current===fe&&re.focus()})}};if([Rg,wg].includes(w)||z.sibling||!V){var W;!V||e==="inline"?W=c.current:W=POe(V);var J,te=B2(W,O);w===Rg?J=te[0]:w===wg?J=te[te.length-1]:J=gz(W,O,V,z.offset),q(J)}else if(z.inlineTrigger)g(j);else if(z.offset>0)g(j,!0),T(),C.current=oi(function(){N=WP(x,s);var ne=V.getAttribute("aria-controls"),ae=document.getElementById(ne),re=gz(ae,N.elements);q(re)},5);else if(z.offset<0){var ee=f(j,!0),oe=ee[ee.length-2],pe=L.get(oe);g(oe,!1),q(pe)}}_==null||_(I)}}function kOe(e){Promise.resolve().then(e)}var V2="__RC_UTIL_PATH_SPLIT__",vz=function(r){return r.join(V2)},MOe=function(r){return r.split(V2)},GP="rc-menu-more";function FOe(){var e=S.useState({}),r=Ue(e,2),o=r[1],s=S.useRef(new Map),c=S.useRef(new Map),d=S.useState([]),f=Ue(d,2),v=f[0],g=f[1],_=S.useRef(0),C=S.useRef(!1),b=function(){C.current||o({})},T=S.useCallback(function(L,M){var F=vz(M);c.current.set(F,L),s.current.set(L,F),_.current+=1;var V=_.current;kOe(function(){V===_.current&&b()})},[]),I=S.useCallback(function(L,M){var F=vz(M);c.current.delete(F),s.current.delete(L)},[]),w=S.useCallback(function(L){g(L)},[]),x=S.useCallback(function(L,M){var F=s.current.get(L)||"",V=MOe(F);return M&&v.includes(V[0])&&V.unshift(GP),V},[v]),N=S.useCallback(function(L,M){return L.filter(function(F){return F!==void 0}).some(function(F){var V=x(F,!0);return V.includes(M)})},[x]),P=function(){var M=vt(s.current.keys());return v.length&&M.push(GP),M},O=S.useCallback(function(L){var M="".concat(s.current.get(L)).concat(V2),F=new Set;return vt(c.current.keys()).forEach(function(V){V.startsWith(M)&&F.add(c.current.get(V))}),F},[]);return S.useEffect(function(){return function(){C.current=!0}},[]),{registerPath:T,unregisterPath:I,refreshOverflowKeys:w,isSubPathKey:N,getKeyPath:x,getKeys:P,getSubPathKeys:O}}function Ug(e){var r=S.useRef(e);r.current=e;var o=S.useCallback(function(){for(var s,c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return(s=r.current)===null||s===void 0?void 0:s.call.apply(s,[r].concat(d))},[]);return e?o:void 0}var UOe=Math.random().toFixed(5).toString().slice(2),Ez=0;function BOe(e){var r=Sa(e,{value:e}),o=Ue(r,2),s=o[0],c=o[1];return S.useEffect(function(){Ez+=1;var d="".concat(UOe,"-").concat(Ez);c("rc-menu-uuid-".concat(d))},[]),s}function $J(e,r,o,s){var c=S.useContext(Wc),d=c.activeKey,f=c.onActive,v=c.onInactive,g={active:d===e};return r||(g.onMouseEnter=function(_){o==null||o({key:e,domEvent:_}),f(e)},g.onMouseLeave=function(_){s==null||s({key:e,domEvent:_}),v(e)}),g}function HJ(e){var r=S.useContext(Wc),o=r.mode,s=r.rtl,c=r.inlineIndent;if(o!=="inline")return null;var d=e;return s?{paddingRight:d*c}:{paddingLeft:d*c}}function zJ(e){var r=e.icon,o=e.props,s=e.children,c;return r===null||r===!1?null:(typeof r=="function"?c=S.createElement(r,_e({},o)):typeof r!="boolean"&&(c=r),c||s||null)}var VOe=["item"];function JC(e){var r=e.item,o=An(e,VOe);return Object.defineProperty(o,"item",{get:function(){return _a(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),r}}),o}var jOe=["title","attribute","elementRef"],$Oe=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],HOe=["active"],zOe=function(e){Ml(o,e);var r=Fl(o);function o(){return io(this,o),r.apply(this,arguments)}return oo(o,[{key:"render",value:function(){var c=this.props,d=c.title,f=c.attribute,v=c.elementRef,g=An(c,jOe),_=na(g,["eventKey","popupClassName","popupOffset","onTitleClick"]);return _a(!f,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),S.createElement(Nl.Item,Qe({},f,{title:typeof d=="string"?d:void 0},_,{ref:v}))}}]),o}(S.Component),WOe=S.forwardRef(function(e,r){var o=e.style,s=e.className,c=e.eventKey;e.warnKey;var d=e.disabled,f=e.itemIcon,v=e.children,g=e.role,_=e.onMouseEnter,C=e.onMouseLeave,b=e.onClick,T=e.onKeyDown,I=e.onFocus,w=An(e,$Oe),x=FJ(c),N=S.useContext(Wc),P=N.prefixCls,O=N.onItemClick,L=N.disabled,M=N.overflowDisabled,F=N.itemIcon,V=N.selectedKeys,j=N.onActive,z=S.useContext(U2),q=z._internalRenderMenuItem,W="".concat(P,"-item"),J=S.useRef(),te=S.useRef(),ee=L||d,oe=Am(r,te),pe=Lm(c),ne=function(xe){return{key:c,keyPath:vt(pe).reverse(),item:J.current,domEvent:xe}},ae=f||F,re=$J(c,ee,_,C),he=re.active,fe=An(re,HOe),se=V.includes(c),de=HJ(pe.length),ve=function(xe){if(!ee){var We=ne(xe);b==null||b(JC(We)),O(We)}},ie=function(xe){if(T==null||T(xe),xe.which===lt.ENTER){var We=ne(xe);b==null||b(JC(We)),O(We)}},be=function(xe){j(c),I==null||I(xe)},Re={};e.role==="option"&&(Re["aria-selected"]=se);var Pe=S.createElement(zOe,Qe({ref:J,elementRef:oe,role:g===null?"none":g||"menuitem",tabIndex:d?null:-1,"data-menu-id":M&&x?null:x},na(w,["extra"]),fe,Re,{component:"li","aria-disabled":d,style:_e(_e({},de),o),className:$e(W,Ce(Ce(Ce({},"".concat(W,"-active"),he),"".concat(W,"-selected"),se),"".concat(W,"-disabled"),ee),s),onClick:ve,onKeyDown:ie,onFocus:be}),v,S.createElement(zJ,{props:_e(_e({},e),{},{isSelected:se}),icon:ae}));return q&&(Pe=q(Pe,e,{selected:se})),Pe});function GOe(e,r){var o=e.eventKey,s=fT(),c=Lm(o);return S.useEffect(function(){if(s)return s.registerPath(o,c),function(){s.unregisterPath(o,c)}},[c]),s?null:S.createElement(WOe,Qe({},e,{ref:r}))}const pT=S.forwardRef(GOe);var KOe=["className","children"],qOe=function(r,o){var s=r.className,c=r.children,d=An(r,KOe),f=S.useContext(Wc),v=f.prefixCls,g=f.mode,_=f.rtl;return S.createElement("ul",Qe({className:$e(v,_&&"".concat(v,"-rtl"),"".concat(v,"-sub"),"".concat(v,"-").concat(g==="inline"?"inline":"vertical"),s),role:"menu"},d,{"data-menu-list":!0,ref:o}),c)},j2=S.forwardRef(qOe);j2.displayName="SubMenuList";function $2(e,r){return zc(e).map(function(o,s){if(S.isValidElement(o)){var c,d,f=o.key,v=(c=(d=o.props)===null||d===void 0?void 0:d.eventKey)!==null&&c!==void 0?c:f,g=v==null;g&&(v="tmp_key-".concat([].concat(vt(r),[s]).join("-")));var _={key:v,eventKey:v};return S.cloneElement(o,_)}return o})}var ga={adjustX:1,adjustY:1},YOe={topLeft:{points:["bl","tl"],overflow:ga},topRight:{points:["br","tr"],overflow:ga},bottomLeft:{points:["tl","bl"],overflow:ga},bottomRight:{points:["tr","br"],overflow:ga},leftTop:{points:["tr","tl"],overflow:ga},leftBottom:{points:["br","bl"],overflow:ga},rightTop:{points:["tl","tr"],overflow:ga},rightBottom:{points:["bl","br"],overflow:ga}},XOe={topLeft:{points:["bl","tl"],overflow:ga},topRight:{points:["br","tr"],overflow:ga},bottomLeft:{points:["tl","bl"],overflow:ga},bottomRight:{points:["tr","br"],overflow:ga},rightTop:{points:["tr","tl"],overflow:ga},rightBottom:{points:["br","bl"],overflow:ga},leftTop:{points:["tl","tr"],overflow:ga},leftBottom:{points:["bl","br"],overflow:ga}};function WJ(e,r,o){if(r)return r;if(o)return o[e]||o.other}var JOe={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function QOe(e){var r=e.prefixCls,o=e.visible,s=e.children,c=e.popup,d=e.popupStyle,f=e.popupClassName,v=e.popupOffset,g=e.disabled,_=e.mode,C=e.onVisibleChange,b=S.useContext(Wc),T=b.getPopupContainer,I=b.rtl,w=b.subMenuOpenDelay,x=b.subMenuCloseDelay,N=b.builtinPlacements,P=b.triggerSubMenuAction,O=b.forceSubMenuRender,L=b.rootClassName,M=b.motion,F=b.defaultMotions,V=S.useState(!1),j=Ue(V,2),z=j[0],q=j[1],W=_e(I?_e({},XOe):_e({},YOe),N),J=JOe[_],te=WJ(_,M,F),ee=S.useRef(te);_!=="inline"&&(ee.current=te);var oe=_e(_e({},ee.current),{},{leavedClassName:"".concat(r,"-hidden"),removeOnLeave:!1,motionAppear:!0}),pe=S.useRef();return S.useEffect(function(){return pe.current=oi(function(){q(o)}),function(){oi.cancel(pe.current)}},[o]),S.createElement(x2,{prefixCls:r,popupClassName:$e("".concat(r,"-popup"),Ce({},"".concat(r,"-rtl"),I),f,L),stretch:_==="horizontal"?"minWidth":null,getPopupContainer:T,builtinPlacements:W,popupPlacement:J,popupVisible:z,popup:c,popupStyle:d,popupAlign:v&&{offset:v},action:g?[]:[P],mouseEnterDelay:w,mouseLeaveDelay:x,onPopupVisibleChange:C,forceRender:O,popupMotion:oe,fresh:!0},s)}function ZOe(e){var r=e.id,o=e.open,s=e.keyPath,c=e.children,d="inline",f=S.useContext(Wc),v=f.prefixCls,g=f.forceSubMenuRender,_=f.motion,C=f.defaultMotions,b=f.mode,T=S.useRef(!1);T.current=b===d;var I=S.useState(!T.current),w=Ue(I,2),x=w[0],N=w[1],P=T.current?o:!1;S.useEffect(function(){T.current&&N(!1)},[b]);var O=_e({},WJ(d,_,C));s.length>1&&(O.motionAppear=!1);var L=O.onVisibleChanged;return O.onVisibleChanged=function(M){return!T.current&&!M&&N(!0),L==null?void 0:L(M)},x?null:S.createElement(Pv,{mode:d,locked:!T.current},S.createElement(ef,Qe({visible:P},O,{forceRender:g,removeOnLeave:!1,leavedClassName:"".concat(v,"-hidden")}),function(M){var F=M.className,V=M.style;return S.createElement(j2,{id:r,className:F,style:V},c)}))}var exe=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],txe=["active"],nxe=S.forwardRef(function(e,r){var o=e.style,s=e.className,c=e.title,d=e.eventKey;e.warnKey;var f=e.disabled,v=e.internalPopupClose,g=e.children,_=e.itemIcon,C=e.expandIcon,b=e.popupClassName,T=e.popupOffset,I=e.popupStyle,w=e.onClick,x=e.onMouseEnter,N=e.onMouseLeave,P=e.onTitleClick,O=e.onTitleMouseEnter,L=e.onTitleMouseLeave,M=An(e,exe),F=FJ(d),V=S.useContext(Wc),j=V.prefixCls,z=V.mode,q=V.openKeys,W=V.disabled,J=V.overflowDisabled,te=V.activeKey,ee=V.selectedKeys,oe=V.itemIcon,pe=V.expandIcon,ne=V.onItemClick,ae=V.onOpenChange,re=V.onActive,he=S.useContext(U2),fe=he._internalRenderSubMenuItem,se=S.useContext(VJ),de=se.isSubPathKey,ve=Lm(),ie="".concat(j,"-submenu"),be=W||f,Re=S.useRef(),Pe=S.useRef(),Ie=_??oe,xe=C??pe,We=q.includes(d),De=!J&&We,Ae=de(ee,d),je=$J(d,be,O,L),Je=je.active,Fe=An(je,txe),ke=S.useState(!1),ht=Ue(ke,2),Ze=ht[0],mt=ht[1],Rt=function(ft){be||mt(ft)},ut=function(ft){Rt(!0),x==null||x({key:d,domEvent:ft})},ot=function(ft){Rt(!1),N==null||N({key:d,domEvent:ft})},ze=S.useMemo(function(){return Je||(z!=="inline"?Ze||de([te],d):!1)},[z,Je,te,Ze,d,de]),tt=HJ(ve.length),bt=function(ft){be||(P==null||P({key:d,domEvent:ft}),z==="inline"&&ae(d,!We))},Nt=Ug(function(It){w==null||w(JC(It)),ne(It)}),wt=function(ft){z!=="inline"&&ae(d,ft)},Xt=function(){re(d)},$t=F&&"".concat(F,"-popup"),Lt=S.useMemo(function(){return S.createElement(zJ,{icon:z!=="horizontal"?xe:void 0,props:_e(_e({},e),{},{isOpen:De,isSubMenu:!0})},S.createElement("i",{className:"".concat(ie,"-arrow")}))},[z,xe,e,De,ie]),Wt=S.createElement("div",Qe({role:"menuitem",style:tt,className:"".concat(ie,"-title"),tabIndex:be?null:-1,ref:Re,title:typeof c=="string"?c:null,"data-menu-id":J&&F?null:F,"aria-expanded":De,"aria-haspopup":!0,"aria-controls":$t,"aria-disabled":be,onClick:bt,onFocus:Xt},Fe),c,Lt),Jt=S.useRef(z);if(z!=="inline"&&ve.length>1?Jt.current="vertical":Jt.current=z,!J){var Ft=Jt.current;Wt=S.createElement(QOe,{mode:Ft,prefixCls:ie,visible:!v&&De&&z!=="inline",popupClassName:b,popupOffset:T,popupStyle:I,popup:S.createElement(Pv,{mode:Ft==="horizontal"?"vertical":Ft},S.createElement(j2,{id:$t,ref:Pe},g)),disabled:be,onVisibleChange:wt},Wt)}var yt=S.createElement(Nl.Item,Qe({ref:r,role:"none"},M,{component:"li",style:o,className:$e(ie,"".concat(ie,"-").concat(z),s,Ce(Ce(Ce(Ce({},"".concat(ie,"-open"),De),"".concat(ie,"-active"),ze),"".concat(ie,"-selected"),Ae),"".concat(ie,"-disabled"),be)),onMouseEnter:ut,onMouseLeave:ot}),Wt,!J&&S.createElement(ZOe,{id:$t,open:De,keyPath:ve},g));return fe&&(yt=fe(yt,e,{selected:Ae,active:ze,open:De,disabled:be})),S.createElement(Pv,{onItemClick:Nt,mode:z==="horizontal"?"vertical":z,itemIcon:Ie,expandIcon:xe},yt)}),mT=S.forwardRef(function(e,r){var o=e.eventKey,s=e.children,c=Lm(o),d=$2(s,c),f=fT();S.useEffect(function(){if(f)return f.registerPath(o,c),function(){f.unregisterPath(o,c)}},[c]);var v;return f?v=d:v=S.createElement(nxe,Qe({ref:r},e),d),S.createElement(BJ.Provider,{value:c},v)});function H2(e){var r=e.className,o=e.style,s=S.useContext(Wc),c=s.prefixCls,d=fT();return d?null:S.createElement("li",{role:"separator",className:$e("".concat(c,"-item-divider"),r),style:o})}var rxe=["className","title","eventKey","children"],ixe=S.forwardRef(function(e,r){var o=e.className,s=e.title;e.eventKey;var c=e.children,d=An(e,rxe),f=S.useContext(Wc),v=f.prefixCls,g="".concat(v,"-item-group");return S.createElement("li",Qe({ref:r,role:"presentation"},d,{onClick:function(C){return C.stopPropagation()},className:$e(g,o)}),S.createElement("div",{role:"presentation",className:"".concat(g,"-title"),title:typeof s=="string"?s:void 0},s),S.createElement("ul",{role:"group",className:"".concat(g,"-list")},c))}),z2=S.forwardRef(function(e,r){var o=e.eventKey,s=e.children,c=Lm(o),d=$2(s,c),f=fT();return f?d:S.createElement(ixe,Qe({ref:r},na(e,["warnKey"])),d)}),oxe=["label","children","key","type","extra"];function KP(e,r,o){var s=r.item,c=r.group,d=r.submenu,f=r.divider;return(e||[]).map(function(v,g){if(v&&on(v)==="object"){var _=v,C=_.label,b=_.children,T=_.key,I=_.type,w=_.extra,x=An(_,oxe),N=T??"tmp-".concat(g);return b||I==="group"?I==="group"?S.createElement(c,Qe({key:N},x,{title:C}),KP(b,r,o)):S.createElement(d,Qe({key:N},x,{title:C}),KP(b,r,o)):I==="divider"?S.createElement(f,Qe({key:N},x)):S.createElement(s,Qe({key:N},x,{extra:w}),C,(!!w||w===0)&&S.createElement("span",{className:"".concat(o,"-item-extra")},w))}return null}).filter(function(v){return v})}function _z(e,r,o,s,c){var d=e,f=_e({divider:H2,item:pT,group:z2,submenu:mT},s);return r&&(d=KP(r,f,c)),$2(d,o)}var axe=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem","_internalComponents"],Ch=[],sxe=S.forwardRef(function(e,r){var o,s=e,c=s.prefixCls,d=c===void 0?"rc-menu":c,f=s.rootClassName,v=s.style,g=s.className,_=s.tabIndex,C=_===void 0?0:_,b=s.items,T=s.children,I=s.direction,w=s.id,x=s.mode,N=x===void 0?"vertical":x,P=s.inlineCollapsed,O=s.disabled,L=s.disabledOverflow,M=s.subMenuOpenDelay,F=M===void 0?.1:M,V=s.subMenuCloseDelay,j=V===void 0?.1:V,z=s.forceSubMenuRender,q=s.defaultOpenKeys,W=s.openKeys,J=s.activeKey,te=s.defaultActiveFirst,ee=s.selectable,oe=ee===void 0?!0:ee,pe=s.multiple,ne=pe===void 0?!1:pe,ae=s.defaultSelectedKeys,re=s.selectedKeys,he=s.onSelect,fe=s.onDeselect,se=s.inlineIndent,de=se===void 0?24:se,ve=s.motion,ie=s.defaultMotions,be=s.triggerSubMenuAction,Re=be===void 0?"hover":be,Pe=s.builtinPlacements,Ie=s.itemIcon,xe=s.expandIcon,We=s.overflowedIndicator,De=We===void 0?"...":We,Ae=s.overflowedIndicatorPopupClassName,je=s.getPopupContainer,Je=s.onClick,Fe=s.onOpenChange,ke=s.onKeyDown;s.openAnimation,s.openTransitionName;var ht=s._internalRenderMenuItem,Ze=s._internalRenderSubMenuItem,mt=s._internalComponents,Rt=An(s,axe),ut=S.useMemo(function(){return[_z(T,b,Ch,mt,d),_z(T,b,Ch,{},d)]},[T,b,mt]),ot=Ue(ut,2),ze=ot[0],tt=ot[1],bt=S.useState(!1),Nt=Ue(bt,2),wt=Nt[0],Xt=Nt[1],$t=S.useRef(),Lt=BOe(w),Wt=I==="rtl",Jt=Sa(q,{value:W,postState:function(Kt){return Kt||Ch}}),Ft=Ue(Jt,2),yt=Ft[0],It=Ft[1],ft=function(Kt){var Vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function Er(){It(Kt),Fe==null||Fe(Kt)}Vt?Dl.flushSync(Er):Er()},Pt=S.useState(yt),Cn=Ue(Pt,2),bn=Cn[0],si=Cn[1],Qr=S.useRef(!1),vi=S.useMemo(function(){return(N==="inline"||N==="vertical")&&P?["vertical",P]:[N,!1]},[N,P]),xr=Ue(vi,2),nr=xr[0],ir=xr[1],Tn=nr==="inline",Ut=S.useState(nr),kt=Ue(Ut,2),Ct=kt[0],Pn=kt[1],tn=S.useState(ir),pt=Ue(tn,2),gt=pt[0],Ht=pt[1];S.useEffect(function(){Pn(nr),Ht(ir),Qr.current&&(Tn?It(bn):ft(Ch))},[nr,ir]);var Gt=S.useState(0),Bt=Ue(Gt,2),rn=Bt[0],or=Bt[1],Gn=rn>=ze.length-1||Ct!=="horizontal"||L;S.useEffect(function(){Tn&&si(yt)},[yt]),S.useEffect(function(){return Qr.current=!0,function(){Qr.current=!1}},[]);var Fn=FOe(),Zn=Fn.registerPath,$r=Fn.unregisterPath,ci=Fn.refreshOverflowKeys,Zr=Fn.isSubPathKey,Xi=Fn.getKeyPath,dr=Fn.getKeys,li=Fn.getSubPathKeys,_t=S.useMemo(function(){return{registerPath:Zn,unregisterPath:$r}},[Zn,$r]),xt=S.useMemo(function(){return{isSubPathKey:Zr}},[Zr]);S.useEffect(function(){ci(Gn?Ch:ze.slice(rn+1).map(function(vr){return vr.key}))},[rn,Gn]);var gn=Sa(J||te&&((o=ze[0])===null||o===void 0?void 0:o.key),{value:J}),Dn=Ue(gn,2),sn=Dn[0],Ui=Dn[1],Bi=Ug(function(vr){Ui(vr)}),La=Ug(function(){Ui(void 0)});S.useImperativeHandle(r,function(){return{list:$t.current,focus:function(Kt){var Vt,Er=dr(),_r=WP(Er,Lt),Mr=_r.elements,ui=_r.key2element,Vo=_r.element2key,ji=B2($t.current,Mr),wo=sn??(ji[0]?Vo.get(ji[0]):(Vt=ze.find(function(ia){return!ia.props.disabled}))===null||Vt===void 0?void 0:Vt.key),so=ui.get(wo);if(wo&&so){var jo;so==null||(jo=so.focus)===null||jo===void 0||jo.call(so,Kt)}}}});var nn=Sa(ae||[],{value:re,postState:function(Kt){return Array.isArray(Kt)?Kt:Kt==null?Ch:[Kt]}}),Rn=Ue(nn,2),Kn=Rn[0],fi=Rn[1],ra=function(Kt){if(oe){var Vt=Kt.key,Er=Kn.includes(Vt),_r;ne?Er?_r=Kn.filter(function(ui){return ui!==Vt}):_r=[].concat(vt(Kn),[Vt]):_r=[Vt],fi(_r);var Mr=_e(_e({},Kt),{},{selectedKeys:_r});Er?fe==null||fe(Mr):he==null||he(Mr)}!ne&&yt.length&&Ct!=="inline"&&ft(Ch)},Yc=Ug(function(vr){Je==null||Je(JC(vr)),ra(vr)}),Ro=Ug(function(vr,Kt){var Vt=yt.filter(function(_r){return _r!==vr});if(Kt)Vt.push(vr);else if(Ct!=="inline"){var Er=li(vr);Vt=Vt.filter(function(_r){return!Er.has(_r)})}Tv(yt,Vt,!0)||ft(Vt,!0)}),Vi=function(Kt,Vt){var Er=Vt??!yt.includes(Kt);Ro(Kt,Er)},ka=LOe(Ct,sn,Wt,Lt,$t,dr,Xi,Ui,Vi,ke);S.useEffect(function(){Xt(!0)},[]);var Ns=S.useMemo(function(){return{_internalRenderMenuItem:ht,_internalRenderSubMenuItem:Ze}},[ht,Ze]),Un=Ct!=="horizontal"||L?ze:ze.map(function(vr,Kt){return S.createElement(Pv,{key:vr.key,overflowDisabled:Kt>rn},vr)}),Xc=S.createElement(Nl,Qe({id:w,ref:$t,prefixCls:"".concat(d,"-overflow"),component:"ul",itemComponent:pT,className:$e(d,"".concat(d,"-root"),"".concat(d,"-").concat(Ct),g,Ce(Ce({},"".concat(d,"-inline-collapsed"),gt),"".concat(d,"-rtl"),Wt),f),dir:I,style:v,role:"menu",tabIndex:C,data:Un,renderRawItem:function(Kt){return Kt},renderRawRest:function(Kt){var Vt=Kt.length,Er=Vt?ze.slice(-Vt):null;return S.createElement(mT,{eventKey:GP,title:De,disabled:Gn,internalPopupClose:Vt===0,popupClassName:Ae},Er)},maxCount:Ct!=="horizontal"||L?Nl.INVALIDATE:Nl.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(Kt){or(Kt)},onKeyDown:ka},Rt));return S.createElement(U2.Provider,{value:Ns},S.createElement(kJ.Provider,{value:Lt},S.createElement(Pv,{prefixCls:d,rootClassName:f,mode:Ct,openKeys:yt,rtl:Wt,disabled:O,motion:wt?ve:null,defaultMotions:wt?ie:null,activeKey:sn,onActive:Bi,onInactive:La,selectedKeys:Kn,inlineIndent:de,subMenuOpenDelay:F,subMenuCloseDelay:j,forceSubMenuRender:z,builtinPlacements:Pe,triggerSubMenuAction:Re,getPopupContainer:je,itemIcon:Ie,expandIcon:xe,onItemClick:Yc,onOpenChange:Ro},S.createElement(VJ.Provider,{value:xt},Xc),S.createElement("div",{style:{display:"none"},"aria-hidden":!0},S.createElement(UJ.Provider,{value:_t},tt)))))}),eE=sxe;eE.Item=pT;eE.SubMenu=mT;eE.ItemGroup=z2;eE.Divider=H2;var cxe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"};const lxe=cxe;var uxe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:lxe}))},dxe=S.forwardRef(uxe);const hxe=dxe,GJ=S.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}}),fxe=e=>{const{antCls:r,componentCls:o,colorText:s,footerBg:c,headerHeight:d,headerPadding:f,headerColor:v,footerPadding:g,fontSize:_,bodyBg:C,headerBg:b}=e;return{[o]:{display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:C,"&, *":{boxSizing:"border-box"},[`&${o}-has-sider`]:{flexDirection:"row",[`> ${o}, > ${o}-content`]:{width:0}},[`${o}-header, &${o}-footer`]:{flex:"0 0 auto"},"&-rtl":{direction:"rtl"}},[`${o}-header`]:{height:d,padding:f,color:v,lineHeight:Ge(d),background:b,[`${r}-menu`]:{lineHeight:"inherit"}},[`${o}-footer`]:{padding:g,color:s,fontSize:_,background:c},[`${o}-content`]:{flex:"auto",color:s,minHeight:0}}},KJ=e=>{const{colorBgLayout:r,controlHeight:o,controlHeightLG:s,colorText:c,controlHeightSM:d,marginXXS:f,colorTextLightSolid:v,colorBgContainer:g}=e,_=s*1.25;return{colorBgHeader:"#001529",colorBgBody:r,colorBgTrigger:"#002140",bodyBg:r,headerBg:"#001529",headerHeight:o*2,headerPadding:`0 ${_}px`,headerColor:c,footerPadding:`${d}px ${_}px`,footerBg:r,siderBg:"#001529",triggerHeight:s+f*2,triggerBg:"#002140",triggerColor:v,zeroTriggerWidth:s,zeroTriggerHeight:s,lightSiderBg:g,lightTriggerBg:g,lightTriggerColor:c}},qJ=[["colorBgBody","bodyBg"],["colorBgHeader","headerBg"],["colorBgTrigger","triggerBg"]],YJ=To("Layout",e=>[fxe(e)],KJ,{deprecatedTokens:qJ}),pxe=e=>{const{componentCls:r,siderBg:o,motionDurationMid:s,motionDurationSlow:c,antCls:d,triggerHeight:f,triggerColor:v,triggerBg:g,headerHeight:_,zeroTriggerWidth:C,zeroTriggerHeight:b,borderRadiusLG:T,lightSiderBg:I,lightTriggerColor:w,lightTriggerBg:x,bodyBg:N}=e;return{[r]:{position:"relative",minWidth:0,background:o,transition:`all ${s}, background 0s`,"&-has-trigger":{paddingBottom:f},"&-right":{order:1},[`${r}-children`]:{height:"100%",marginTop:-.1,paddingTop:.1,[`${d}-menu${d}-menu-inline-collapsed`]:{width:"auto"}},[`&-zero-width ${r}-children`]:{overflow:"hidden"},[`${r}-trigger`]:{position:"fixed",bottom:0,zIndex:1,height:f,color:v,lineHeight:Ge(f),textAlign:"center",background:g,cursor:"pointer",transition:`all ${s}`},[`${r}-zero-width-trigger`]:{position:"absolute",top:_,insetInlineEnd:e.calc(C).mul(-1).equal(),zIndex:1,width:C,height:b,color:v,fontSize:e.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:o,borderRadius:`0 ${Ge(T)} ${Ge(T)} 0`,cursor:"pointer",transition:`background ${c} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${c}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:e.calc(C).mul(-1).equal(),borderRadius:`${Ge(T)} 0 0 ${Ge(T)}`}},"&-light":{background:I,[`${r}-trigger`]:{color:w,background:x},[`${r}-zero-width-trigger`]:{color:w,background:x,border:`1px solid ${N}`,borderInlineStart:0}}}}},mxe=To(["Layout","Sider"],e=>[pxe(e)],KJ,{deprecatedTokens:qJ});var gxe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const Sz={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},vxe=e=>!Number.isNaN(Number.parseFloat(e))&&isFinite(e),gT=S.createContext({}),Exe=(()=>{let e=0;return function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e+=1,`${r}${e}`}})(),_xe=S.forwardRef((e,r)=>{const{prefixCls:o,className:s,trigger:c,children:d,defaultCollapsed:f=!1,theme:v="dark",style:g={},collapsible:_=!1,reverseArrow:C=!1,width:b=200,collapsedWidth:T=80,zeroWidthTriggerStyle:I,breakpoint:w,onCollapse:x,onBreakpoint:N}=e,P=gxe(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]),{siderHook:O}=S.useContext(GJ),[L,M]=S.useState("collapsed"in e?e.collapsed:f),[F,V]=S.useState(!1);S.useEffect(()=>{"collapsed"in e&&M(e.collapsed)},[e.collapsed]);const j=(Ie,xe)=>{"collapsed"in e||M(Ie),x==null||x(Ie,xe)},{getPrefixCls:z,direction:q}=S.useContext(br),W=z("layout-sider",o),[J,te,ee]=mxe(W),oe=S.useRef(null);oe.current=Ie=>{V(Ie.matches),N==null||N(Ie.matches),L!==Ie.matches&&j(Ie.matches,"responsive")},S.useEffect(()=>{function Ie(We){return oe.current(We)}let xe;if(typeof window<"u"){const{matchMedia:We}=window;if(We&&w&&w in Sz){xe=We(`screen and (max-width: ${Sz[w]})`);try{xe.addEventListener("change",Ie)}catch{xe.addListener(Ie)}Ie(xe)}}return()=>{try{xe==null||xe.removeEventListener("change",Ie)}catch{xe==null||xe.removeListener(Ie)}}},[w]),S.useEffect(()=>{const Ie=Exe("ant-sider-");return O.addSider(Ie),()=>O.removeSider(Ie)},[]);const pe=()=>{j(!L,"clickTrigger")},ne=na(P,["collapsed"]),ae=L?T:b,re=vxe(ae)?`${ae}px`:String(ae),he=parseFloat(String(T||0))===0?S.createElement("span",{onClick:pe,className:$e(`${W}-zero-width-trigger`,`${W}-zero-width-trigger-${C?"right":"left"}`),style:I},c||S.createElement(hxe,null)):null,fe=q==="rtl"==!C,ve={expanded:fe?S.createElement(GC,null):S.createElement(XC,null),collapsed:fe?S.createElement(XC,null):S.createElement(GC,null)}[L?"collapsed":"expanded"],ie=c!==null?he||S.createElement("div",{className:`${W}-trigger`,onClick:pe,style:{width:re}},c||ve):null,be=Object.assign(Object.assign({},g),{flex:`0 0 ${re}`,maxWidth:re,minWidth:re,width:re}),Re=$e(W,`${W}-${v}`,{[`${W}-collapsed`]:!!L,[`${W}-has-trigger`]:_&&c!==null&&!he,[`${W}-below`]:!!F,[`${W}-zero-width`]:parseFloat(re)===0},s,te,ee),Pe=S.useMemo(()=>({siderCollapsed:L}),[L]);return J(S.createElement(gT.Provider,{value:Pe},S.createElement("aside",Object.assign({className:Re},ne,{style:be,ref:r}),S.createElement("div",{className:`${W}-children`},d),_||F&&he?ie:null)))}),XJ=_xe;var Sxe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"};const yxe=Sxe;var Cxe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:yxe}))},bxe=S.forwardRef(Cxe);const Txe=bxe,Rxe=S.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),QC=Rxe;var wxe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const Ixe=e=>{const{prefixCls:r,className:o,dashed:s}=e,c=wxe(e,["prefixCls","className","dashed"]),{getPrefixCls:d}=S.useContext(br),f=d("menu",r),v=$e({[`${f}-item-divider-dashed`]:!!s},o);return S.createElement(H2,Object.assign({className:v},c))},JJ=Ixe,Axe=e=>{var r;const{className:o,children:s,icon:c,title:d,danger:f,extra:v}=e,{prefixCls:g,firstLevel:_,direction:C,disableMenuItemTitleTooltip:b,inlineCollapsed:T}=S.useContext(QC),I=L=>{const M=s==null?void 0:s[0],F=S.createElement("span",{className:$e(`${g}-title-content`,{[`${g}-title-content-with-extra`]:!!v||v===0})},s);return(!c||S.isValidElement(s)&&s.type==="span")&&s&&L&&_&&typeof M=="string"?S.createElement("div",{className:`${g}-inline-collapsed-noicon`},M.charAt(0)):F},{siderCollapsed:w}=S.useContext(gT);let x=d;typeof d>"u"?x=_?s:"":d===!1&&(x="");const N={title:x};!w&&!T&&(N.title=null,N.open=!1);const P=zc(s).length;let O=S.createElement(pT,Object.assign({},na(e,["title","icon","danger"]),{className:$e({[`${g}-item-danger`]:f,[`${g}-item-only-child`]:(c?P+1:P)===1},o),title:typeof d=="string"?d:void 0}),dc(c,{className:$e(S.isValidElement(c)?(r=c.props)===null||r===void 0?void 0:r.className:"",`${g}-item-icon`)}),I(T));return b||(O=S.createElement(Zv,Object.assign({},N,{placement:C==="rtl"?"left":"right",classNames:{root:`${g}-inline-collapsed-tooltip`}}),O)),O},QJ=Axe;globalThis&&globalThis.__rest;const Oxe=S.createContext(null),yz=Oxe,xxe=e=>{const{componentCls:r,motionDurationSlow:o,horizontalLineHeight:s,colorSplit:c,lineWidth:d,lineType:f,itemPaddingInline:v}=e;return{[`${r}-horizontal`]:{lineHeight:s,border:0,borderBottom:`${Ge(d)} ${f} ${c}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${r}-item, ${r}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:v},[`> ${r}-item:hover,
        > ${r}-item-active,
        > ${r}-submenu ${r}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${r}-item, ${r}-submenu-title`]:{transition:[`border-color ${o}`,`background ${o}`].join(",")},[`${r}-submenu-arrow`]:{display:"none"}}}},Nxe=xxe,Pxe=e=>{let{componentCls:r,menuArrowOffset:o,calc:s}=e;return{[`${r}-rtl`]:{direction:"rtl"},[`${r}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${r}-rtl${r}-vertical,
    ${r}-submenu-rtl ${r}-vertical`]:{[`${r}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(${Ge(s(o).mul(-1).equal())})`},"&::after":{transform:`rotate(45deg) translateY(${Ge(o)})`}}}}},Dxe=Pxe,Cz=e=>Object.assign({},$C(e)),Lxe=(e,r)=>{const{componentCls:o,itemColor:s,itemSelectedColor:c,subMenuItemSelectedColor:d,groupTitleColor:f,itemBg:v,subMenuItemBg:g,itemSelectedBg:_,activeBarHeight:C,activeBarWidth:b,activeBarBorderWidth:T,motionDurationSlow:I,motionEaseInOut:w,motionEaseOut:x,itemPaddingInline:N,motionDurationMid:P,itemHoverColor:O,lineType:L,colorSplit:M,itemDisabledColor:F,dangerItemColor:V,dangerItemHoverColor:j,dangerItemSelectedColor:z,dangerItemActiveBg:q,dangerItemSelectedBg:W,popupBg:J,itemHoverBg:te,itemActiveBg:ee,menuSubMenuBg:oe,horizontalItemSelectedColor:pe,horizontalItemSelectedBg:ne,horizontalItemBorderRadius:ae,horizontalItemHoverBg:re}=e;return{[`${o}-${r}, ${o}-${r} > ${o}`]:{color:s,background:v,[`&${o}-root:focus-visible`]:Object.assign({},Cz(e)),[`${o}-item`]:{"&-group-title, &-extra":{color:f}},[`${o}-submenu-selected > ${o}-submenu-title`]:{color:d},[`${o}-item, ${o}-submenu-title`]:{color:s,[`&:not(${o}-item-disabled):focus-visible`]:Object.assign({},Cz(e))},[`${o}-item-disabled, ${o}-submenu-disabled`]:{color:`${F} !important`},[`${o}-item:not(${o}-item-selected):not(${o}-submenu-selected)`]:{[`&:hover, > ${o}-submenu-title:hover`]:{color:O}},[`&:not(${o}-horizontal)`]:{[`${o}-item:not(${o}-item-selected)`]:{"&:hover":{backgroundColor:te},"&:active":{backgroundColor:ee}},[`${o}-submenu-title`]:{"&:hover":{backgroundColor:te},"&:active":{backgroundColor:ee}}},[`${o}-item-danger`]:{color:V,[`&${o}-item:hover`]:{[`&:not(${o}-item-selected):not(${o}-submenu-selected)`]:{color:j}},[`&${o}-item:active`]:{background:q}},[`${o}-item a`]:{"&, &:hover":{color:"inherit"}},[`${o}-item-selected`]:{color:c,[`&${o}-item-danger`]:{color:z},"a, a:hover":{color:"inherit"}},[`& ${o}-item-selected`]:{backgroundColor:_,[`&${o}-item-danger`]:{backgroundColor:W}},[`&${o}-submenu > ${o}`]:{backgroundColor:oe},[`&${o}-popup > ${o}`]:{backgroundColor:J},[`&${o}-submenu-popup > ${o}`]:{backgroundColor:J},[`&${o}-horizontal`]:Object.assign(Object.assign({},r==="dark"?{borderBottom:0}:{}),{[`> ${o}-item, > ${o}-submenu`]:{top:T,marginTop:e.calc(T).mul(-1).equal(),marginBottom:0,borderRadius:ae,"&::after":{position:"absolute",insetInline:N,bottom:0,borderBottom:`${Ge(C)} solid transparent`,transition:`border-color ${I} ${w}`,content:'""'},"&:hover, &-active, &-open":{background:re,"&::after":{borderBottomWidth:C,borderBottomColor:pe}},"&-selected":{color:pe,backgroundColor:ne,"&:hover":{backgroundColor:ne},"&::after":{borderBottomWidth:C,borderBottomColor:pe}}}}),[`&${o}-root`]:{[`&${o}-inline, &${o}-vertical`]:{borderInlineEnd:`${Ge(T)} ${L} ${M}`}},[`&${o}-inline`]:{[`${o}-sub${o}-inline`]:{background:g},[`${o}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${Ge(b)} solid ${c}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${P} ${x}`,`opacity ${P} ${x}`].join(","),content:'""'},[`&${o}-item-danger`]:{"&::after":{borderInlineEndColor:z}}},[`${o}-selected, ${o}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${P} ${w}`,`opacity ${P} ${w}`].join(",")}}}}}},bz=Lxe,Tz=e=>{const{componentCls:r,itemHeight:o,itemMarginInline:s,padding:c,menuArrowSize:d,marginXS:f,itemMarginBlock:v,itemWidth:g,itemPaddingInline:_}=e,C=e.calc(d).add(c).add(f).equal();return{[`${r}-item`]:{position:"relative",overflow:"hidden"},[`${r}-item, ${r}-submenu-title`]:{height:o,lineHeight:Ge(o),paddingInline:_,overflow:"hidden",textOverflow:"ellipsis",marginInline:s,marginBlock:v,width:g},[`> ${r}-item,
            > ${r}-submenu > ${r}-submenu-title`]:{height:o,lineHeight:Ge(o)},[`${r}-item-group-list ${r}-submenu-title,
            ${r}-submenu-title`]:{paddingInlineEnd:C}}},kxe=e=>{const{componentCls:r,iconCls:o,itemHeight:s,colorTextLightSolid:c,dropdownWidth:d,controlHeightLG:f,motionEaseOut:v,paddingXL:g,itemMarginInline:_,fontSizeLG:C,motionDurationFast:b,motionDurationSlow:T,paddingXS:I,boxShadowSecondary:w,collapsedWidth:x,collapsedIconSize:N}=e,P={height:s,lineHeight:Ge(s),listStylePosition:"inside",listStyleType:"disc"};return[{[r]:{"&-inline, &-vertical":Object.assign({[`&${r}-root`]:{boxShadow:"none"}},Tz(e))},[`${r}-submenu-popup`]:{[`${r}-vertical`]:Object.assign(Object.assign({},Tz(e)),{boxShadow:w})}},{[`${r}-submenu-popup ${r}-vertical${r}-sub`]:{minWidth:d,maxHeight:`calc(100vh - ${Ge(e.calc(f).mul(2.5).equal())})`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${r}-inline`]:{width:"100%",[`&${r}-root`]:{[`${r}-item, ${r}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${T}`,`background ${T}`,`padding ${b} ${v}`].join(","),[`> ${r}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${r}-sub${r}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${r}-submenu > ${r}-submenu-title`]:P,[`& ${r}-item-group-title`]:{paddingInlineStart:g}},[`${r}-item`]:P}},{[`${r}-inline-collapsed`]:{width:x,[`&${r}-root`]:{[`${r}-item, ${r}-submenu ${r}-submenu-title`]:{[`> ${r}-inline-collapsed-noicon`]:{fontSize:C,textAlign:"center"}}},[`> ${r}-item,
          > ${r}-item-group > ${r}-item-group-list > ${r}-item,
          > ${r}-item-group > ${r}-item-group-list > ${r}-submenu > ${r}-submenu-title,
          > ${r}-submenu > ${r}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${Ge(e.calc(N).div(2).equal())} - ${Ge(_)})`,textOverflow:"clip",[`
            ${r}-submenu-arrow,
            ${r}-submenu-expand-icon
          `]:{opacity:0},[`${r}-item-icon, ${o}`]:{margin:0,fontSize:N,lineHeight:Ge(s),"+ span":{display:"inline-block",opacity:0}}},[`${r}-item-icon, ${o}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${r}-item-icon, ${o}`]:{display:"none"},"a, a:hover":{color:c}},[`${r}-item-group-title`]:Object.assign(Object.assign({},jC),{paddingInline:I})}}]},Mxe=kxe,Rz=e=>{const{componentCls:r,motionDurationSlow:o,motionDurationMid:s,motionEaseInOut:c,motionEaseOut:d,iconCls:f,iconSize:v,iconMarginInlineEnd:g}=e;return{[`${r}-item, ${r}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${o}`,`background ${o}`,`padding calc(${o} + 0.1s) ${c}`].join(","),[`${r}-item-icon, ${f}`]:{minWidth:v,fontSize:v,transition:[`font-size ${s} ${d}`,`margin ${o} ${c}`,`color ${o}`].join(","),"+ span":{marginInlineStart:g,opacity:1,transition:[`opacity ${o} ${c}`,`margin ${o}`,`color ${o}`].join(",")}},[`${r}-item-icon`]:Object.assign({},qv()),[`&${r}-item-only-child`]:{[`> ${f}, > ${r}-item-icon`]:{marginInlineEnd:0}}},[`${r}-item-disabled, ${r}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important",cursor:"not-allowed",pointerEvents:"none"},[`> ${r}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},wz=e=>{const{componentCls:r,motionDurationSlow:o,motionEaseInOut:s,borderRadius:c,menuArrowSize:d,menuArrowOffset:f}=e;return{[`${r}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:e.margin,width:d,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${o} ${s}, opacity ${o}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:e.calc(d).mul(.6).equal(),height:e.calc(d).mul(.15).equal(),backgroundColor:"currentcolor",borderRadius:c,transition:[`background ${o} ${s}`,`transform ${o} ${s}`,`top ${o} ${s}`,`color ${o} ${s}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(${Ge(e.calc(f).mul(-1).equal())})`},"&::after":{transform:`rotate(-45deg) translateY(${Ge(f)})`}}}}},Fxe=e=>{const{antCls:r,componentCls:o,fontSize:s,motionDurationSlow:c,motionDurationMid:d,motionEaseInOut:f,paddingXS:v,padding:g,colorSplit:_,lineWidth:C,zIndexPopup:b,borderRadiusLG:T,subMenuItemBorderRadius:I,menuArrowSize:w,menuArrowOffset:x,lineType:N,groupTitleLineHeight:P,groupTitleFontSize:O}=e;return[{"":{[o]:Object.assign(Object.assign({},pP()),{"&-hidden":{display:"none"}})},[`${o}-submenu-hidden`]:{display:"none"}},{[o]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Os(e)),pP()),{marginBottom:0,paddingInlineStart:0,fontSize:s,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${c} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${o}-item`]:{flex:"none"}},[`${o}-item, ${o}-submenu, ${o}-submenu-title`]:{borderRadius:e.itemBorderRadius},[`${o}-item-group-title`]:{padding:`${Ge(v)} ${Ge(g)}`,fontSize:O,lineHeight:P,transition:`all ${c}`},[`&-horizontal ${o}-submenu`]:{transition:[`border-color ${c} ${f}`,`background ${c} ${f}`].join(",")},[`${o}-submenu, ${o}-submenu-inline`]:{transition:[`border-color ${c} ${f}`,`background ${c} ${f}`,`padding ${d} ${f}`].join(",")},[`${o}-submenu ${o}-sub`]:{cursor:"initial",transition:[`background ${c} ${f}`,`padding ${c} ${f}`].join(",")},[`${o}-title-content`]:{transition:`color ${c}`,"&-with-extra":{display:"inline-flex",alignItems:"center",width:"100%"},[`> ${r}-typography-ellipsis-single-line`]:{display:"inline",verticalAlign:"unset"},[`${o}-item-extra`]:{marginInlineStart:"auto",paddingInlineStart:e.padding}},[`${o}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${o}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:_,borderStyle:N,borderWidth:0,borderTopWidth:C,marginBlock:C,padding:0,"&-dashed":{borderStyle:"dashed"}}}),Rz(e)),{[`${o}-item-group`]:{[`${o}-item-group-list`]:{margin:0,padding:0,[`${o}-item, ${o}-submenu-title`]:{paddingInline:`${Ge(e.calc(s).mul(2).equal())} ${Ge(g)}`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:b,borderRadius:T,boxShadow:"none",transformOrigin:"0 0",[`&${o}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:0,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'},[`> ${o}`]:Object.assign(Object.assign(Object.assign({borderRadius:T},Rz(e)),wz(e)),{[`${o}-item, ${o}-submenu > ${o}-submenu-title`]:{borderRadius:I},[`${o}-submenu-title::after`]:{transition:`transform ${c} ${f}`}})},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:e.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:e.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:e.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:e.paddingXS}}}),wz(e)),{[`&-inline-collapsed ${o}-submenu-arrow,
        &-inline ${o}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${Ge(x)})`},"&::after":{transform:`rotate(45deg) translateX(${Ge(e.calc(x).mul(-1).equal())})`}},[`${o}-submenu-open${o}-submenu-inline > ${o}-submenu-title > ${o}-submenu-arrow`]:{transform:`translateY(${Ge(e.calc(w).mul(.2).mul(-1).equal())})`,"&::after":{transform:`rotate(-45deg) translateX(${Ge(e.calc(x).mul(-1).equal())})`},"&::before":{transform:`rotate(45deg) translateX(${Ge(x)})`}}})},{[`${r}-layout-header`]:{[o]:{lineHeight:"inherit"}}}]},Uxe=e=>{var r,o,s;const{colorPrimary:c,colorError:d,colorTextDisabled:f,colorErrorBg:v,colorText:g,colorTextDescription:_,colorBgContainer:C,colorFillAlter:b,colorFillContent:T,lineWidth:I,lineWidthBold:w,controlItemBgActive:x,colorBgTextHover:N,controlHeightLG:P,lineHeight:O,colorBgElevated:L,marginXXS:M,padding:F,fontSize:V,controlHeightSM:j,fontSizeLG:z,colorTextLightSolid:q,colorErrorHover:W}=e,J=(r=e.activeBarWidth)!==null&&r!==void 0?r:0,te=(o=e.activeBarBorderWidth)!==null&&o!==void 0?o:I,ee=(s=e.itemMarginInline)!==null&&s!==void 0?s:e.marginXXS,oe=new qr(q).setA(.65).toRgbString();return{dropdownWidth:160,zIndexPopup:e.zIndexPopupBase+50,radiusItem:e.borderRadiusLG,itemBorderRadius:e.borderRadiusLG,radiusSubMenuItem:e.borderRadiusSM,subMenuItemBorderRadius:e.borderRadiusSM,colorItemText:g,itemColor:g,colorItemTextHover:g,itemHoverColor:g,colorItemTextHoverHorizontal:c,horizontalItemHoverColor:c,colorGroupTitle:_,groupTitleColor:_,colorItemTextSelected:c,itemSelectedColor:c,subMenuItemSelectedColor:c,colorItemTextSelectedHorizontal:c,horizontalItemSelectedColor:c,colorItemBg:C,itemBg:C,colorItemBgHover:N,itemHoverBg:N,colorItemBgActive:T,itemActiveBg:x,colorSubItemBg:b,subMenuItemBg:b,colorItemBgSelected:x,itemSelectedBg:x,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:J,colorActiveBarHeight:w,activeBarHeight:w,colorActiveBarBorderSize:I,activeBarBorderWidth:te,colorItemTextDisabled:f,itemDisabledColor:f,colorDangerItemText:d,dangerItemColor:d,colorDangerItemTextHover:d,dangerItemHoverColor:d,colorDangerItemTextSelected:d,dangerItemSelectedColor:d,colorDangerItemBgActive:v,dangerItemActiveBg:v,colorDangerItemBgSelected:v,dangerItemSelectedBg:v,itemMarginInline:ee,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent",itemHeight:P,groupTitleLineHeight:O,collapsedWidth:P*2,popupBg:L,itemMarginBlock:M,itemPaddingInline:F,horizontalLineHeight:`${P*1.15}px`,iconSize:V,iconMarginInlineEnd:j-V,collapsedIconSize:z,groupTitleFontSize:V,darkItemDisabledColor:new qr(q).setA(.25).toRgbString(),darkItemColor:oe,darkDangerItemColor:d,darkItemBg:"#001529",darkPopupBg:"#001529",darkSubMenuItemBg:"#000c17",darkItemSelectedColor:q,darkItemSelectedBg:c,darkDangerItemSelectedBg:d,darkItemHoverBg:"transparent",darkGroupTitleColor:oe,darkItemHoverColor:q,darkDangerItemHoverColor:W,darkDangerItemSelectedColor:q,darkDangerItemActiveBg:d,itemWidth:J?`calc(100% + ${te}px)`:`calc(100% - ${ee*2}px)`}},Bxe=function(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return To("Menu",c=>{const{colorBgElevated:d,controlHeightLG:f,fontSize:v,darkItemColor:g,darkDangerItemColor:_,darkItemBg:C,darkSubMenuItemBg:b,darkItemSelectedColor:T,darkItemSelectedBg:I,darkDangerItemSelectedBg:w,darkItemHoverBg:x,darkGroupTitleColor:N,darkItemHoverColor:P,darkItemDisabledColor:O,darkDangerItemHoverColor:L,darkDangerItemSelectedColor:M,darkDangerItemActiveBg:F,popupBg:V,darkPopupBg:j}=c,z=c.calc(v).div(7).mul(5).equal(),q=ai(c,{menuArrowSize:z,menuHorizontalHeight:c.calc(f).mul(1.15).equal(),menuArrowOffset:c.calc(z).mul(.25).equal(),menuSubMenuBg:d,calc:c.calc,popupBg:V}),W=ai(q,{itemColor:g,itemHoverColor:P,groupTitleColor:N,itemSelectedColor:T,subMenuItemSelectedColor:T,itemBg:C,popupBg:j,subMenuItemBg:b,itemActiveBg:"transparent",itemSelectedBg:I,activeBarHeight:0,activeBarBorderWidth:0,itemHoverBg:x,itemDisabledColor:O,dangerItemColor:_,dangerItemHoverColor:L,dangerItemSelectedColor:M,dangerItemActiveBg:F,dangerItemSelectedBg:w,menuSubMenuBg:b,horizontalItemSelectedColor:T,horizontalItemSelectedBg:I});return[Fxe(q),Nxe(q),Mxe(q),bz(q,"light"),bz(W,"dark"),Dxe(q),NX(q),KC(q,"slide-up"),KC(q,"slide-down"),MX(q,"zoom-big")]},Uxe,{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"],["colorItemBgSelected","itemSelectedBg"]],injectStyle:o,unitless:{groupTitleLineHeight:!0}})(e,r)},Vxe=e=>{var r;const{popupClassName:o,icon:s,title:c,theme:d}=e,f=S.useContext(QC),{prefixCls:v,inlineCollapsed:g,theme:_}=f,C=Lm();let b;if(!s)b=g&&!C.length&&c&&typeof c=="string"?S.createElement("div",{className:`${v}-inline-collapsed-noicon`},c.charAt(0)):S.createElement("span",{className:`${v}-title-content`},c);else{const w=S.isValidElement(c)&&c.type==="span";b=S.createElement(S.Fragment,null,dc(s,{className:$e(S.isValidElement(s)?(r=s.props)===null||r===void 0?void 0:r.className:"",`${v}-item-icon`)}),w?c:S.createElement("span",{className:`${v}-title-content`},c))}const T=S.useMemo(()=>Object.assign(Object.assign({},f),{firstLevel:!1}),[f]),[I]=_2("Menu");return S.createElement(QC.Provider,{value:T},S.createElement(mT,Object.assign({},na(e,["icon"]),{title:b,popupClassName:$e(v,o,`${v}-${d||_}`),popupStyle:Object.assign({zIndex:I},e.popupStyle)})))},ZJ=Vxe;var jxe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function FO(e){return e===null||e===!1}const $xe={item:QJ,submenu:ZJ,divider:JJ},Hxe=S.forwardRef((e,r)=>{var o;const s=S.useContext(yz),c=s||{},{getPrefixCls:d,getPopupContainer:f,direction:v,menu:g}=S.useContext(br),_=d(),{prefixCls:C,className:b,style:T,theme:I="light",expandIcon:w,_internalDisableMenuItemTitleTooltip:x,inlineCollapsed:N,siderCollapsed:P,rootClassName:O,mode:L,selectable:M,onClick:F,overflowedIndicatorPopupClassName:V}=e,j=jxe(e,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),z=na(j,["collapsedWidth"]);(o=c.validator)===null||o===void 0||o.call(c,{mode:L});const q=uo(function(){var de;F==null||F.apply(void 0,arguments),(de=c.onClick)===null||de===void 0||de.call(c)}),W=c.mode||L,J=M??c.selectable,te=N??P,ee={horizontal:{motionName:`${_}-slide-up`},inline:CP(_),other:{motionName:`${_}-zoom-big`}},oe=d("menu",C||c.prefixCls),pe=_u(oe),[ne,ae,re]=Bxe(oe,pe,!s),he=$e(`${oe}-${I}`,g==null?void 0:g.className,b),fe=S.useMemo(()=>{var de,ve;if(typeof w=="function"||FO(w))return w||null;if(typeof c.expandIcon=="function"||FO(c.expandIcon))return c.expandIcon||null;if(typeof(g==null?void 0:g.expandIcon)=="function"||FO(g==null?void 0:g.expandIcon))return(g==null?void 0:g.expandIcon)||null;const ie=(de=w??(c==null?void 0:c.expandIcon))!==null&&de!==void 0?de:g==null?void 0:g.expandIcon;return dc(ie,{className:$e(`${oe}-submenu-expand-icon`,S.isValidElement(ie)?(ve=ie.props)===null||ve===void 0?void 0:ve.className:void 0)})},[w,c==null?void 0:c.expandIcon,g==null?void 0:g.expandIcon,oe]),se=S.useMemo(()=>({prefixCls:oe,inlineCollapsed:te||!1,direction:v,firstLevel:!0,theme:I,mode:W,disableMenuItemTitleTooltip:x}),[oe,te,v,x,I]);return ne(S.createElement(yz.Provider,{value:null},S.createElement(QC.Provider,{value:se},S.createElement(eE,Object.assign({getPopupContainer:f,overflowedIndicator:S.createElement(Txe,null),overflowedIndicatorPopupClassName:$e(oe,`${oe}-${I}`,V),mode:W,selectable:J,onClick:q},z,{inlineCollapsed:te,style:Object.assign(Object.assign({},g==null?void 0:g.style),T),className:he,prefixCls:oe,direction:v,defaultMotions:ee,expandIcon:fe,ref:r,rootClassName:$e(O,ae,c.rootClassName,re,pe),_internalComponents:$xe})))))}),zxe=Hxe,tE=S.forwardRef((e,r)=>{const o=S.useRef(null),s=S.useContext(gT);return S.useImperativeHandle(r,()=>({menu:o.current,focus:c=>{var d;(d=o.current)===null||d===void 0||d.focus(c)}})),S.createElement(zxe,Object.assign({ref:o},e,s))});tE.Item=QJ;tE.SubMenu=ZJ;tE.Divider=JJ;tE.ItemGroup=z2;const Wxe=tE;function nE(e){return ai(e,{inputAffixPadding:e.paddingXXS})}const rE=e=>{const{controlHeight:r,fontSize:o,lineHeight:s,lineWidth:c,controlHeightSM:d,controlHeightLG:f,fontSizeLG:v,lineHeightLG:g,paddingSM:_,controlPaddingHorizontalSM:C,controlPaddingHorizontal:b,colorFillAlter:T,colorPrimaryHover:I,colorPrimary:w,controlOutlineWidth:x,controlOutline:N,colorErrorOutline:P,colorWarningOutline:O,colorBgContainer:L,inputFontSize:M,inputFontSizeLG:F,inputFontSizeSM:V}=e,j=M||o,z=V||j,q=F||v,W=Math.round((r-j*s)/2*10)/10-c,J=Math.round((d-z*s)/2*10)/10-c,te=Math.ceil((f-q*g)/2*10)/10-c;return{paddingBlock:Math.max(W,0),paddingBlockSM:Math.max(J,0),paddingBlockLG:Math.max(te,0),paddingInline:_-c,paddingInlineSM:C-c,paddingInlineLG:b-c,addonBg:T,activeBorderColor:w,hoverBorderColor:I,activeShadow:`0 0 0 ${x}px ${N}`,errorActiveShadow:`0 0 0 ${x}px ${P}`,warningActiveShadow:`0 0 0 ${x}px ${O}`,hoverBg:L,activeBg:L,inputFontSize:j,inputFontSizeLG:q,inputFontSizeSM:z}},Gxe=e=>({borderColor:e.hoverBorderColor,backgroundColor:e.hoverBg}),vT=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},Gxe(ai(e,{hoverBorderColor:e.colorBorder,hoverBg:e.colorBgContainerDisabled})))}),W2=(e,r)=>({background:e.colorBgContainer,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:r.borderColor,"&:hover":{borderColor:r.hoverBorderColor,backgroundColor:e.hoverBg},"&:focus, &:focus-within":{borderColor:r.activeBorderColor,boxShadow:r.activeShadow,outline:0,backgroundColor:e.activeBg}}),Iz=(e,r)=>({[`&${e.componentCls}-status-${r.status}:not(${e.componentCls}-disabled)`]:Object.assign(Object.assign({},W2(e,r)),{[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:r.affixColor}}),[`&${e.componentCls}-status-${r.status}${e.componentCls}-disabled`]:{borderColor:r.borderColor}}),Kxe=(e,r)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},W2(e,{borderColor:e.colorBorder,hoverBorderColor:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeShadow:e.activeShadow})),{[`&${e.componentCls}-disabled, &[disabled]`]:Object.assign({},vT(e))}),Iz(e,{status:"error",borderColor:e.colorError,hoverBorderColor:e.colorErrorBorderHover,activeBorderColor:e.colorError,activeShadow:e.errorActiveShadow,affixColor:e.colorError})),Iz(e,{status:"warning",borderColor:e.colorWarning,hoverBorderColor:e.colorWarningBorderHover,activeBorderColor:e.colorWarning,activeShadow:e.warningActiveShadow,affixColor:e.colorWarning})),r)}),Az=(e,r)=>({[`&${e.componentCls}-group-wrapper-status-${r.status}`]:{[`${e.componentCls}-group-addon`]:{borderColor:r.addonBorderColor,color:r.addonColor}}}),qxe=e=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${e.componentCls}-group`]:{"&-addon":{background:e.addonBg,border:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},Az(e,{status:"error",addonBorderColor:e.colorError,addonColor:e.colorErrorText})),Az(e,{status:"warning",addonBorderColor:e.colorWarning,addonColor:e.colorWarningText})),{[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group-addon`]:Object.assign({},vT(e))}})}),Yxe=(e,r)=>{const{componentCls:o}=e;return{"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${o}-disabled, &[disabled]`]:{color:e.colorTextDisabled,cursor:"not-allowed"},[`&${o}-status-error`]:{"&, & input, & textarea":{color:e.colorError}},[`&${o}-status-warning`]:{"&, & input, & textarea":{color:e.colorWarning}}},r)}},eQ=(e,r)=>({background:r.bg,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:r==null?void 0:r.inputColor},"&:hover":{background:r.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:r.activeBorderColor,backgroundColor:e.activeBg}}),Oz=(e,r)=>({[`&${e.componentCls}-status-${r.status}:not(${e.componentCls}-disabled)`]:Object.assign(Object.assign({},eQ(e,r)),{[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:r.affixColor}})}),Xxe=(e,r)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},eQ(e,{bg:e.colorFillTertiary,hoverBg:e.colorFillSecondary,activeBorderColor:e.activeBorderColor})),{[`&${e.componentCls}-disabled, &[disabled]`]:Object.assign({},vT(e))}),Oz(e,{status:"error",bg:e.colorErrorBg,hoverBg:e.colorErrorBgHover,activeBorderColor:e.colorError,inputColor:e.colorErrorText,affixColor:e.colorError})),Oz(e,{status:"warning",bg:e.colorWarningBg,hoverBg:e.colorWarningBgHover,activeBorderColor:e.colorWarning,inputColor:e.colorWarningText,affixColor:e.colorWarning})),r)}),xz=(e,r)=>({[`&${e.componentCls}-group-wrapper-status-${r.status}`]:{[`${e.componentCls}-group-addon`]:{background:r.addonBg,color:r.addonColor}}}),Jxe=e=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${e.componentCls}-group`]:{"&-addon":{background:e.colorFillTertiary},[`${e.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}}}},xz(e,{status:"error",addonBg:e.colorErrorBg,addonColor:e.colorErrorText})),xz(e,{status:"warning",addonBg:e.colorWarningBg,addonColor:e.colorWarningText})),{[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group`]:{"&-addon":{background:e.colorFillTertiary,color:e.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorBorder}`}}}})}),tQ=(e,r)=>({background:e.colorBgContainer,borderWidth:`${Ge(e.lineWidth)} 0`,borderStyle:`${e.lineType} none`,borderColor:`transparent transparent ${r.borderColor} transparent`,borderRadius:0,"&:hover":{borderColor:`transparent transparent ${r.borderColor} transparent`,backgroundColor:e.hoverBg},"&:focus, &:focus-within":{borderColor:`transparent transparent ${r.borderColor} transparent`,outline:0,backgroundColor:e.activeBg}}),Nz=(e,r)=>({[`&${e.componentCls}-status-${r.status}:not(${e.componentCls}-disabled)`]:Object.assign(Object.assign({},tQ(e,r)),{[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:r.affixColor}}),[`&${e.componentCls}-status-${r.status}${e.componentCls}-disabled`]:{borderColor:`transparent transparent ${r.borderColor} transparent`}}),Qxe=(e,r)=>({"&-underlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},tQ(e,{borderColor:e.colorBorder,hoverBorderColor:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeShadow:e.activeShadow})),{[`&${e.componentCls}-disabled, &[disabled]`]:{color:e.colorTextDisabled,boxShadow:"none",cursor:"not-allowed","&:hover":{borderColor:`transparent transparent ${e.colorBorder} transparent`}},"input[disabled], textarea[disabled]":{cursor:"not-allowed"}}),Nz(e,{status:"error",borderColor:e.colorError,hoverBorderColor:e.colorErrorBorderHover,activeBorderColor:e.colorError,activeShadow:e.errorActiveShadow,affixColor:e.colorError})),Nz(e,{status:"warning",borderColor:e.colorWarning,hoverBorderColor:e.colorWarningBorderHover,activeBorderColor:e.colorWarning,activeShadow:e.warningActiveShadow,affixColor:e.colorWarning})),r)}),Zxe=e=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),nQ=e=>{const{paddingBlockLG:r,lineHeightLG:o,borderRadiusLG:s,paddingInlineLG:c}=e;return{padding:`${Ge(r)} ${Ge(c)}`,fontSize:e.inputFontSizeLG,lineHeight:o,borderRadius:s}},G2=e=>({padding:`${Ge(e.paddingBlockSM)} ${Ge(e.paddingInlineSM)}`,fontSize:e.inputFontSizeSM,borderRadius:e.borderRadiusSM}),K2=e=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${Ge(e.paddingBlock)} ${Ge(e.paddingInline)}`,color:e.colorText,fontSize:e.inputFontSize,lineHeight:e.lineHeight,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`},Zxe(e.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},nQ(e)),"&-sm":Object.assign({},G2(e)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),eNe=e=>{const{componentCls:r,antCls:o}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${r}, &-lg > ${r}-group-addon`]:Object.assign({},nQ(e)),[`&-sm ${r}, &-sm > ${r}-group-addon`]:Object.assign({},G2(e)),[`&-lg ${o}-select-single ${o}-select-selector`]:{height:e.controlHeightLG},[`&-sm ${o}-select-single ${o}-select-selector`]:{height:e.controlHeightSM},[`> ${r}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${r}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${Ge(e.paddingInline)}`,color:e.colorText,fontWeight:"normal",fontSize:e.inputFontSize,textAlign:"center",borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${o}-select`]:{margin:`${Ge(e.calc(e.paddingBlock).add(1).mul(-1).equal())} ${Ge(e.calc(e.paddingInline).mul(-1).equal())}`,[`&${o}-select-single:not(${o}-select-customize-input):not(${o}-pagination-size-changer)`]:{[`${o}-select-selector`]:{backgroundColor:"inherit",border:`${Ge(e.lineWidth)} ${e.lineType} transparent`,boxShadow:"none"}}},[`${o}-cascader-picker`]:{margin:`-9px ${Ge(e.calc(e.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${o}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[r]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${r}-search-with-button &`]:{zIndex:0}}},[`> ${r}:first-child, ${r}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${o}-select ${o}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${r}-affix-wrapper`]:{[`&:not(:first-child) ${r}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${r}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${r}:last-child, ${r}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${o}-select ${o}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${r}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${r}-search &`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}},[`&:not(:first-child), ${r}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${r}-group-compact`]:Object.assign(Object.assign({display:"block"},pP()),{[`${r}-group-addon, ${r}-group-wrap, > ${r}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${r}-affix-wrapper,
        & > ${r}-number-affix-wrapper,
        & > ${o}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal(),borderInlineEndWidth:e.lineWidth},[r]:{float:"none"},[`& > ${o}-select > ${o}-select-selector,
      & > ${o}-select-auto-complete ${r},
      & > ${o}-cascader-picker ${r},
      & > ${r}-group-wrapper ${r}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${o}-select-focused`]:{zIndex:1},[`& > ${o}-select > ${o}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${o}-select:first-child > ${o}-select-selector,
      & > ${o}-select-auto-complete:first-child ${r},
      & > ${o}-cascader-picker:first-child ${r}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,
      & > ${o}-select:last-child > ${o}-select-selector,
      & > ${o}-cascader-picker:last-child ${r},
      & > ${o}-cascader-picker-focused:last-child ${r}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${o}-select-auto-complete ${r}`]:{verticalAlign:"top"},[`${r}-group-wrapper + ${r}-group-wrapper`]:{marginInlineStart:e.calc(e.lineWidth).mul(-1).equal(),[`${r}-affix-wrapper`]:{borderRadius:0}},[`${r}-group-wrapper:not(:last-child)`]:{[`&${r}-search > ${r}-group`]:{[`& > ${r}-group-addon > ${r}-search-button`]:{borderRadius:0},[`& > ${r}`]:{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}}}})}},tNe=e=>{const{componentCls:r,controlHeightSM:o,lineWidth:s,calc:c}=e,d=16,f=c(o).sub(c(s).mul(2)).sub(d).div(2).equal();return{[r]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Os(e)),K2(e)),Kxe(e)),Xxe(e)),Yxe(e)),Qxe(e)),{'&[type="color"]':{height:e.controlHeight,[`&${r}-lg`]:{height:e.controlHeightLG},[`&${r}-sm`]:{height:o,paddingTop:f,paddingBottom:f}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},nNe=e=>{const{componentCls:r}=e;return{[`${r}-clear-icon`]:{margin:0,padding:0,lineHeight:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,border:"none",outline:"none",backgroundColor:"transparent","&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${Ge(e.inputAffixPadding)}`}}}},rNe=e=>{const{componentCls:r,inputAffixPadding:o,colorTextDescription:s,motionDurationSlow:c,colorIcon:d,colorIconHover:f,iconCls:v}=e,g=`${r}-affix-wrapper`,_=`${r}-affix-wrapper-disabled`;return{[g]:Object.assign(Object.assign(Object.assign(Object.assign({},K2(e)),{display:"inline-flex",[`&:not(${r}-disabled):hover`]:{zIndex:1,[`${r}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${r}`]:{padding:0},[`> input${r}, > textarea${r}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[r]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:s},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:o},"&-suffix":{marginInlineStart:o}}}),nNe(e)),{[`${v}${r}-password-icon`]:{color:d,cursor:"pointer",transition:`all ${c}`,"&:hover":{color:f}}}),[`${r}-underlined`]:{borderRadius:0},[_]:{[`${v}${r}-password-icon`]:{color:d,cursor:"not-allowed","&:hover":{color:d}}}}},iNe=e=>{const{componentCls:r,borderRadiusLG:o,borderRadiusSM:s}=e;return{[`${r}-group`]:Object.assign(Object.assign(Object.assign({},Os(e)),eNe(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${r}-group-addon`]:{borderRadius:o,fontSize:e.inputFontSizeLG}},"&-sm":{[`${r}-group-addon`]:{borderRadius:s}}},qxe(e)),Jxe(e)),{[`&:not(${r}-compact-first-item):not(${r}-compact-last-item)${r}-compact-item`]:{[`${r}, ${r}-group-addon`]:{borderRadius:0}},[`&:not(${r}-compact-last-item)${r}-compact-first-item`]:{[`${r}, ${r}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${r}-compact-first-item)${r}-compact-last-item`]:{[`${r}, ${r}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${r}-compact-last-item)${r}-compact-item`]:{[`${r}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${r}-compact-first-item)${r}-compact-item`]:{[`${r}-affix-wrapper`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})})}},oNe=e=>{const{componentCls:r,antCls:o}=e,s=`${r}-search`;return{[s]:{[r]:{"&:hover, &:focus":{[`+ ${r}-group-addon ${s}-button:not(${o}-btn-primary)`]:{borderInlineStartColor:e.colorPrimaryHover}}},[`${r}-affix-wrapper`]:{height:e.controlHeight,borderRadius:0},[`${r}-lg`]:{lineHeight:e.calc(e.lineHeightLG).sub(2e-4).equal()},[`> ${r}-group`]:{[`> ${r}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${s}-button`]:{marginInlineEnd:-1,borderStartStartRadius:0,borderEndStartRadius:0,boxShadow:"none"},[`${s}-button:not(${o}-btn-primary)`]:{color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive},[`&${o}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${s}-button`]:{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}},"&-large":{[`${r}-affix-wrapper, ${s}-button`]:{height:e.controlHeightLG}},"&-small":{[`${r}-affix-wrapper, ${s}-button`]:{height:e.controlHeightSM}},"&-rtl":{direction:"rtl"},[`&${r}-compact-item`]:{[`&:not(${r}-compact-last-item)`]:{[`${r}-group-addon`]:{[`${r}-search-button`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${r}-compact-first-item)`]:{[`${r},${r}-affix-wrapper`]:{borderRadius:0}},[`> ${r}-group-addon ${r}-search-button,
        > ${r},
        ${r}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${r}-affix-wrapper-focused`]:{zIndex:2}}}}},aNe=e=>{const{componentCls:r}=e;return{[`${r}-out-of-range`]:{[`&, & input, & textarea, ${r}-show-count-suffix, ${r}-data-count`]:{color:e.colorError}}}},rQ=To(["Input","Shared"],e=>{const r=ai(e,nE(e));return[tNe(r),rNe(r)]},rE,{resetFont:!1}),iQ=To(["Input","Component"],e=>{const r=ai(e,nE(e));return[iNe(r),oNe(r),aNe(r),b2(r)]},rE,{resetFont:!1});function sNe(e,r,o){var s=o||{},c=s.noTrailing,d=c===void 0?!1:c,f=s.noLeading,v=f===void 0?!1:f,g=s.debounceMode,_=g===void 0?void 0:g,C,b=!1,T=0;function I(){C&&clearTimeout(C)}function w(N){var P=N||{},O=P.upcomingOnly,L=O===void 0?!1:O;I(),b=!L}function x(){for(var N=arguments.length,P=new Array(N),O=0;O<N;O++)P[O]=arguments[O];var L=this,M=Date.now()-T;if(b)return;function F(){T=Date.now(),r.apply(L,P)}function V(){C=void 0}!v&&_&&!C&&F(),I(),_===void 0&&M>e?v?(T=Date.now(),d||(C=setTimeout(_?V:F,e))):F():d!==!0&&(C=setTimeout(_?V:F,_===void 0?e-M:e))}return x.cancel=w,x}function cNe(e,r,o){var s=o||{},c=s.atBegin,d=c===void 0?!1:c;return sNe(e,r,{debounceMode:d!==!1})}const lNe=S.createContext({}),oQ=lNe;var uNe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function Pz(e){return typeof e=="number"?`${e} ${e} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?`0 0 ${e}`:e}const dNe=["xs","sm","md","lg","xl","xxl"],hNe=S.forwardRef((e,r)=>{const{getPrefixCls:o,direction:s}=S.useContext(br),{gutter:c,wrap:d}=S.useContext(oQ),{prefixCls:f,span:v,order:g,offset:_,push:C,pull:b,className:T,children:I,flex:w,style:x}=e,N=uNe(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),P=o("col",f),[O,L,M]=J1e(P),F={};let V={};dNe.forEach(q=>{let W={};const J=e[q];typeof J=="number"?W.span=J:typeof J=="object"&&(W=J||{}),delete N[q],V=Object.assign(Object.assign({},V),{[`${P}-${q}-${W.span}`]:W.span!==void 0,[`${P}-${q}-order-${W.order}`]:W.order||W.order===0,[`${P}-${q}-offset-${W.offset}`]:W.offset||W.offset===0,[`${P}-${q}-push-${W.push}`]:W.push||W.push===0,[`${P}-${q}-pull-${W.pull}`]:W.pull||W.pull===0,[`${P}-rtl`]:s==="rtl"}),W.flex&&(V[`${P}-${q}-flex`]=!0,F[`--${P}-${q}-flex`]=Pz(W.flex))});const j=$e(P,{[`${P}-${v}`]:v!==void 0,[`${P}-order-${g}`]:g,[`${P}-offset-${_}`]:_,[`${P}-push-${C}`]:C,[`${P}-pull-${b}`]:b},T,V,L,M),z={};if(c&&c[0]>0){const q=c[0]/2;z.paddingLeft=q,z.paddingRight=q}return w&&(z.flex=Pz(w),d===!1&&!z.minWidth&&(z.minWidth=0)),O(S.createElement("div",Object.assign({},N,{style:Object.assign(Object.assign(Object.assign({},z),x),F),className:j,ref:r}),I))}),q2=hNe;function fNe(e,r){const o=[void 0,void 0],s=Array.isArray(e)?e:[e,void 0],c=r||{xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0};return s.forEach((d,f)=>{if(typeof d=="object"&&d!==null)for(let v=0;v<Kh.length;v++){const g=Kh[v];if(c[g]&&d[g]!==void 0){o[f]=d[g];break}}else o[f]=d}),o}var pNe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function Dz(e,r){const[o,s]=S.useState(typeof e=="string"?e:""),c=()=>{if(typeof e=="string"&&s(e),typeof e=="object")for(let d=0;d<Kh.length;d++){const f=Kh[d];if(!r||!r[f])continue;const v=e[f];if(v!==void 0){s(v);return}}};return S.useEffect(()=>{c()},[JSON.stringify(e),r]),o}const mNe=S.forwardRef((e,r)=>{const{prefixCls:o,justify:s,align:c,className:d,style:f,children:v,gutter:g=0,wrap:_}=e,C=pNe(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:b,direction:T}=S.useContext(br),I=F2(!0,null),w=Dz(c,I),x=Dz(s,I),N=b("row",o),[P,O,L]=Y1e(N),M=fNe(g,I),F=$e(N,{[`${N}-no-wrap`]:_===!1,[`${N}-${x}`]:x,[`${N}-${w}`]:w,[`${N}-rtl`]:T==="rtl"},d,O,L),V={},j=M[0]!=null&&M[0]>0?M[0]/-2:void 0;j&&(V.marginLeft=j,V.marginRight=j);const[z,q]=M;V.rowGap=q;const W=S.useMemo(()=>({gutter:[z,q],wrap:_}),[z,q,_]);return P(S.createElement(oQ.Provider,{value:W},S.createElement("div",Object.assign({},C,{className:F,style:Object.assign(Object.assign({},V),f),ref:r}),v)))}),aQ=mNe;function gNe(e){return!!(e.addonBefore||e.addonAfter)}function vNe(e){return!!(e.prefix||e.suffix||e.allowClear)}function Lz(e,r,o){var s=r.cloneNode(!0),c=Object.create(e,{target:{value:s},currentTarget:{value:s}});return s.value=o,typeof r.selectionStart=="number"&&typeof r.selectionEnd=="number"&&(s.selectionStart=r.selectionStart,s.selectionEnd=r.selectionEnd),s.setSelectionRange=function(){r.setSelectionRange.apply(r,arguments)},c}function ZC(e,r,o,s){if(o){var c=r;if(r.type==="click"){c=Lz(r,e,""),o(c);return}if(e.type!=="file"&&s!==void 0){c=Lz(r,e,s),o(c);return}o(c)}}function sQ(e,r){if(e){e.focus(r);var o=r||{},s=o.cursor;if(s){var c=e.value.length;switch(s){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(c,c);break;default:e.setSelectionRange(0,c)}}}}var cQ=Ve.forwardRef(function(e,r){var o,s,c,d=e.inputElement,f=e.children,v=e.prefixCls,g=e.prefix,_=e.suffix,C=e.addonBefore,b=e.addonAfter,T=e.className,I=e.style,w=e.disabled,x=e.readOnly,N=e.focused,P=e.triggerFocus,O=e.allowClear,L=e.value,M=e.handleReset,F=e.hidden,V=e.classes,j=e.classNames,z=e.dataAttrs,q=e.styles,W=e.components,J=e.onClear,te=f??d,ee=(W==null?void 0:W.affixWrapper)||"span",oe=(W==null?void 0:W.groupWrapper)||"span",pe=(W==null?void 0:W.wrapper)||"span",ne=(W==null?void 0:W.groupAddon)||"span",ae=S.useRef(null),re=function(Fe){var ke;(ke=ae.current)!==null&&ke!==void 0&&ke.contains(Fe.target)&&(P==null||P())},he=vNe(e),fe=S.cloneElement(te,{value:L,className:$e((o=te.props)===null||o===void 0?void 0:o.className,!he&&(j==null?void 0:j.variant))||null}),se=S.useRef(null);if(Ve.useImperativeHandle(r,function(){return{nativeElement:se.current||ae.current}}),he){var de=null;if(O){var ve=!w&&!x&&L,ie="".concat(v,"-clear-icon"),be=on(O)==="object"&&O!==null&&O!==void 0&&O.clearIcon?O.clearIcon:"✖";de=Ve.createElement("button",{type:"button",tabIndex:-1,onClick:function(Fe){M==null||M(Fe),J==null||J()},onMouseDown:function(Fe){return Fe.preventDefault()},className:$e(ie,Ce(Ce({},"".concat(ie,"-hidden"),!ve),"".concat(ie,"-has-suffix"),!!_))},be)}var Re="".concat(v,"-affix-wrapper"),Pe=$e(Re,Ce(Ce(Ce(Ce(Ce({},"".concat(v,"-disabled"),w),"".concat(Re,"-disabled"),w),"".concat(Re,"-focused"),N),"".concat(Re,"-readonly"),x),"".concat(Re,"-input-with-clear-btn"),_&&O&&L),V==null?void 0:V.affixWrapper,j==null?void 0:j.affixWrapper,j==null?void 0:j.variant),Ie=(_||O)&&Ve.createElement("span",{className:$e("".concat(v,"-suffix"),j==null?void 0:j.suffix),style:q==null?void 0:q.suffix},de,_);fe=Ve.createElement(ee,Qe({className:Pe,style:q==null?void 0:q.affixWrapper,onClick:re},z==null?void 0:z.affixWrapper,{ref:ae}),g&&Ve.createElement("span",{className:$e("".concat(v,"-prefix"),j==null?void 0:j.prefix),style:q==null?void 0:q.prefix},g),fe,Ie)}if(gNe(e)){var xe="".concat(v,"-group"),We="".concat(xe,"-addon"),De="".concat(xe,"-wrapper"),Ae=$e("".concat(v,"-wrapper"),xe,V==null?void 0:V.wrapper,j==null?void 0:j.wrapper),je=$e(De,Ce({},"".concat(De,"-disabled"),w),V==null?void 0:V.group,j==null?void 0:j.groupWrapper);fe=Ve.createElement(oe,{className:je,ref:se},Ve.createElement(pe,{className:Ae},C&&Ve.createElement(ne,{className:We},C),fe,b&&Ve.createElement(ne,{className:We},b)))}return Ve.cloneElement(fe,{className:$e((s=fe.props)===null||s===void 0?void 0:s.className,T)||null,style:_e(_e({},(c=fe.props)===null||c===void 0?void 0:c.style),I),hidden:F})}),ENe=["show"];function lQ(e,r){return S.useMemo(function(){var o={};r&&(o.show=on(r)==="object"&&r.formatter?r.formatter:!!r),o=_e(_e({},o),e);var s=o,c=s.show,d=An(s,ENe);return _e(_e({},d),{},{show:!!c,showFormatter:typeof c=="function"?c:void 0,strategy:d.strategy||function(f){return f.length}})},[e,r])}var _Ne=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],SNe=S.forwardRef(function(e,r){var o=e.autoComplete,s=e.onChange,c=e.onFocus,d=e.onBlur,f=e.onPressEnter,v=e.onKeyDown,g=e.onKeyUp,_=e.prefixCls,C=_===void 0?"rc-input":_,b=e.disabled,T=e.htmlSize,I=e.className,w=e.maxLength,x=e.suffix,N=e.showCount,P=e.count,O=e.type,L=O===void 0?"text":O,M=e.classes,F=e.classNames,V=e.styles,j=e.onCompositionStart,z=e.onCompositionEnd,q=An(e,_Ne),W=S.useState(!1),J=Ue(W,2),te=J[0],ee=J[1],oe=S.useRef(!1),pe=S.useRef(!1),ne=S.useRef(null),ae=S.useRef(null),re=function(tt){ne.current&&sQ(ne.current,tt)},he=Sa(e.defaultValue,{value:e.value}),fe=Ue(he,2),se=fe[0],de=fe[1],ve=se==null?"":String(se),ie=S.useState(null),be=Ue(ie,2),Re=be[0],Pe=be[1],Ie=lQ(P,N),xe=Ie.max||w,We=Ie.strategy(ve),De=!!xe&&We>xe;S.useImperativeHandle(r,function(){var ze;return{focus:re,blur:function(){var bt;(bt=ne.current)===null||bt===void 0||bt.blur()},setSelectionRange:function(bt,Nt,wt){var Xt;(Xt=ne.current)===null||Xt===void 0||Xt.setSelectionRange(bt,Nt,wt)},select:function(){var bt;(bt=ne.current)===null||bt===void 0||bt.select()},input:ne.current,nativeElement:((ze=ae.current)===null||ze===void 0?void 0:ze.nativeElement)||ne.current}}),S.useEffect(function(){pe.current&&(pe.current=!1),ee(function(ze){return ze&&b?!1:ze})},[b]);var Ae=function(tt,bt,Nt){var wt=bt;if(!oe.current&&Ie.exceedFormatter&&Ie.max&&Ie.strategy(bt)>Ie.max){if(wt=Ie.exceedFormatter(bt,{max:Ie.max}),bt!==wt){var Xt,$t;Pe([((Xt=ne.current)===null||Xt===void 0?void 0:Xt.selectionStart)||0,(($t=ne.current)===null||$t===void 0?void 0:$t.selectionEnd)||0])}}else if(Nt.source==="compositionEnd")return;de(wt),ne.current&&ZC(ne.current,tt,s,wt)};S.useEffect(function(){if(Re){var ze;(ze=ne.current)===null||ze===void 0||ze.setSelectionRange.apply(ze,vt(Re))}},[Re]);var je=function(tt){Ae(tt,tt.target.value,{source:"change"})},Je=function(tt){oe.current=!1,Ae(tt,tt.currentTarget.value,{source:"compositionEnd"}),z==null||z(tt)},Fe=function(tt){f&&tt.key==="Enter"&&!pe.current&&(pe.current=!0,f(tt)),v==null||v(tt)},ke=function(tt){tt.key==="Enter"&&(pe.current=!1),g==null||g(tt)},ht=function(tt){ee(!0),c==null||c(tt)},Ze=function(tt){pe.current&&(pe.current=!1),ee(!1),d==null||d(tt)},mt=function(tt){de(""),re(),ne.current&&ZC(ne.current,tt,s)},Rt=De&&"".concat(C,"-out-of-range"),ut=function(){var tt=na(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return Ve.createElement("input",Qe({autoComplete:o},tt,{onChange:je,onFocus:ht,onBlur:Ze,onKeyDown:Fe,onKeyUp:ke,className:$e(C,Ce({},"".concat(C,"-disabled"),b),F==null?void 0:F.input),style:V==null?void 0:V.input,ref:ne,size:T,type:L,onCompositionStart:function(Nt){oe.current=!0,j==null||j(Nt)},onCompositionEnd:Je}))},ot=function(){var tt=Number(xe)>0;if(x||Ie.show){var bt=Ie.showFormatter?Ie.showFormatter({value:ve,count:We,maxLength:xe}):"".concat(We).concat(tt?" / ".concat(xe):"");return Ve.createElement(Ve.Fragment,null,Ie.show&&Ve.createElement("span",{className:$e("".concat(C,"-show-count-suffix"),Ce({},"".concat(C,"-show-count-has-suffix"),!!x),F==null?void 0:F.count),style:_e({},V==null?void 0:V.count)},bt),x)}return null};return Ve.createElement(cQ,Qe({},q,{prefixCls:C,className:$e(I,Rt),handleReset:mt,value:ve,focused:te,triggerFocus:re,suffix:ot(),disabled:b,classes:M,classNames:F,styles:V}),ut())});const yNe=e=>{let r;return typeof e=="object"&&(e!=null&&e.clearIcon)?r=e:e&&(r={clearIcon:Ve.createElement(tT,null)}),r},uQ=yNe;function dQ(e,r){const o=S.useRef([]),s=()=>{o.current.push(setTimeout(()=>{var c,d,f,v;!((c=e.current)===null||c===void 0)&&c.input&&((d=e.current)===null||d===void 0?void 0:d.input.getAttribute("type"))==="password"&&(!((f=e.current)===null||f===void 0)&&f.input.hasAttribute("value"))&&((v=e.current)===null||v===void 0||v.input.removeAttribute("value"))}))};return S.useEffect(()=>(r&&s(),()=>o.current.forEach(c=>{c&&clearTimeout(c)})),[]),s}function CNe(e){return!!(e.prefix||e.suffix||e.allowClear||e.showCount)}var bNe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const TNe=S.forwardRef((e,r)=>{const{prefixCls:o,bordered:s=!0,status:c,size:d,disabled:f,onBlur:v,onFocus:g,suffix:_,allowClear:C,addonAfter:b,addonBefore:T,className:I,style:w,styles:x,rootClassName:N,onChange:P,classNames:O,variant:L}=e,M=bNe(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:F,direction:V,allowClear:j,autoComplete:z,className:q,style:W,classNames:J,styles:te}=fc("input"),ee=F("input",o),oe=S.useRef(null),pe=_u(ee),[ne,ae,re]=rQ(ee,N),[he]=iQ(ee,pe),{compactSize:fe,compactItemClassnames:se}=Xv(ee,V),de=Su(Ze=>{var mt;return(mt=d??fe)!==null&&mt!==void 0?mt:Ze}),ve=Ve.useContext(Zh),ie=f??ve,{status:be,hasFeedback:Re,feedbackIcon:Pe}=S.useContext(Rs),Ie=hT(be,c),xe=CNe(e)||!!Re;S.useRef(xe);const We=dQ(oe,!0),De=Ze=>{We(),v==null||v(Ze)},Ae=Ze=>{We(),g==null||g(Ze)},je=Ze=>{We(),P==null||P(Ze)},Je=(Re||_)&&Ve.createElement(Ve.Fragment,null,_,Re&&Pe),Fe=uQ(C??j),[ke,ht]=M2("input",L,s);return ne(he(Ve.createElement(SNe,Object.assign({ref:qc(r,oe),prefixCls:ee,autoComplete:z},M,{disabled:ie,onBlur:De,onFocus:Ae,style:Object.assign(Object.assign({},W),w),styles:Object.assign(Object.assign({},te),x),suffix:Je,allowClear:Fe,className:$e(I,N,re,pe,se,q),onChange:je,addonBefore:T&&Ve.createElement(kP,{form:!0,space:!0},T),addonAfter:b&&Ve.createElement(kP,{form:!0,space:!0},b),classNames:Object.assign(Object.assign(Object.assign({},O),J),{input:$e({[`${ee}-sm`]:de==="small",[`${ee}-lg`]:de==="large",[`${ee}-rtl`]:V==="rtl"},O==null?void 0:O.input,J.input,ae),variant:$e({[`${ee}-${ke}`]:ht},YC(ee,Ie)),affixWrapper:$e({[`${ee}-affix-wrapper-sm`]:de==="small",[`${ee}-affix-wrapper-lg`]:de==="large",[`${ee}-affix-wrapper-rtl`]:V==="rtl"},ae),wrapper:$e({[`${ee}-group-rtl`]:V==="rtl"},ae),groupWrapper:$e({[`${ee}-group-wrapper-sm`]:de==="small",[`${ee}-group-wrapper-lg`]:de==="large",[`${ee}-group-wrapper-rtl`]:V==="rtl",[`${ee}-group-wrapper-${ke}`]:ht},YC(`${ee}-group-wrapper`,Ie,Re),ae)})}))))}),ET=TNe;function eb(e){const[r,o]=S.useState(e);return S.useEffect(()=>{const s=setTimeout(()=>{o(e)},e.length?0:10);return()=>{clearTimeout(s)}},[e]),r}const RNe=e=>{const{componentCls:r}=e,o=`${r}-show-help`,s=`${r}-show-help-item`;return{[o]:{transition:`opacity ${e.motionDurationFast} ${e.motionEaseInOut}`,"&-appear, &-enter":{opacity:0,"&-active":{opacity:1}},"&-leave":{opacity:1,"&-active":{opacity:0}},[s]:{overflow:"hidden",transition:`height ${e.motionDurationFast} ${e.motionEaseInOut},
                     opacity ${e.motionDurationFast} ${e.motionEaseInOut},
                     transform ${e.motionDurationFast} ${e.motionEaseInOut} !important`,[`&${s}-appear, &${s}-enter`]:{transform:"translateY(-5px)",opacity:0,"&-active":{transform:"translateY(0)",opacity:1}},[`&${s}-leave-active`]:{transform:"translateY(-5px)"}}}}},wNe=RNe,INe=e=>({legend:{display:"block",width:"100%",marginBottom:e.marginLG,padding:0,color:e.colorTextDescription,fontSize:e.fontSizeLG,lineHeight:"inherit",border:0,borderBottom:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},'input[type="search"]':{boxSizing:"border-box"},'input[type="radio"], input[type="checkbox"]':{lineHeight:"normal"},'input[type="file"]':{display:"block"},'input[type="range"]':{display:"block",width:"100%"},"select[multiple], select[size]":{height:"auto"},"input[type='file']:focus,\n  input[type='radio']:focus,\n  input[type='checkbox']:focus":{outline:0,boxShadow:`0 0 0 ${Ge(e.controlOutlineWidth)} ${e.controlOutline}`},output:{display:"block",paddingTop:15,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight}}),kz=(e,r)=>{const{formItemCls:o}=e;return{[o]:{[`${o}-label > label`]:{height:r},[`${o}-control-input`]:{minHeight:r}}}},ANe=e=>{const{componentCls:r}=e;return{[e.componentCls]:Object.assign(Object.assign(Object.assign({},Os(e)),INe(e)),{[`${r}-text`]:{display:"inline-block",paddingInlineEnd:e.paddingSM},"&-small":Object.assign({},kz(e,e.controlHeightSM)),"&-large":Object.assign({},kz(e,e.controlHeightLG))})}},ONe=e=>{const{formItemCls:r,iconCls:o,componentCls:s,rootPrefixCls:c,antCls:d,labelRequiredMarkColor:f,labelColor:v,labelFontSize:g,labelHeight:_,labelColonMarginInlineStart:C,labelColonMarginInlineEnd:b,itemMarginBottom:T}=e;return{[r]:Object.assign(Object.assign({},Os(e)),{marginBottom:T,verticalAlign:"top","&-with-help":{transition:"none"},[`&-hidden,
        &-hidden${d}-row`]:{display:"none"},"&-has-warning":{[`${r}-split`]:{color:e.colorError}},"&-has-error":{[`${r}-split`]:{color:e.colorWarning}},[`${r}-label`]:{flexGrow:0,overflow:"hidden",whiteSpace:"nowrap",textAlign:"end",verticalAlign:"middle","&-left":{textAlign:"start"},"&-wrap":{overflow:"unset",lineHeight:e.lineHeight,whiteSpace:"unset"},"> label":{position:"relative",display:"inline-flex",alignItems:"center",maxWidth:"100%",height:_,color:v,fontSize:g,[`> ${o}`]:{fontSize:e.fontSize,verticalAlign:"top"},[`&${r}-required:not(${r}-required-mark-optional)::before`]:{display:"inline-block",marginInlineEnd:e.marginXXS,color:f,fontSize:e.fontSize,fontFamily:"SimSun, sans-serif",lineHeight:1,content:'"*"',[`${s}-hide-required-mark &`]:{display:"none"}},[`${r}-optional`]:{display:"inline-block",marginInlineStart:e.marginXXS,color:e.colorTextDescription,[`${s}-hide-required-mark &`]:{display:"none"}},[`${r}-tooltip`]:{color:e.colorTextDescription,cursor:"help",writingMode:"horizontal-tb",marginInlineStart:e.marginXXS},"&::after":{content:'":"',position:"relative",marginBlock:0,marginInlineStart:C,marginInlineEnd:b},[`&${r}-no-colon::after`]:{content:'"\\a0"'}}},[`${r}-control`]:{"--ant-display":"flex",flexDirection:"column",flexGrow:1,[`&:first-child:not([class^="'${c}-col-'"]):not([class*="' ${c}-col-'"])`]:{width:"100%"},"&-input":{position:"relative",display:"flex",alignItems:"center",minHeight:e.controlHeight,"&-content":{flex:"auto",maxWidth:"100%"}}},[r]:{"&-additional":{display:"flex",flexDirection:"column"},"&-explain, &-extra":{clear:"both",color:e.colorTextDescription,fontSize:e.fontSize,lineHeight:e.lineHeight},"&-explain-connected":{width:"100%"},"&-extra":{minHeight:e.controlHeightSM,transition:`color ${e.motionDurationMid} ${e.motionEaseOut}`},"&-explain":{"&-error":{color:e.colorError},"&-warning":{color:e.colorWarning}}},[`&-with-help ${r}-explain`]:{height:"auto",opacity:1},[`${r}-feedback-icon`]:{fontSize:e.fontSize,textAlign:"center",visibility:"visible",animationName:y2,animationDuration:e.motionDurationMid,animationTimingFunction:e.motionEaseOutBack,pointerEvents:"none","&-success":{color:e.colorSuccess},"&-error":{color:e.colorError},"&-warning":{color:e.colorWarning},"&-validating":{color:e.colorPrimary}}})}},Mz=(e,r)=>{const{formItemCls:o}=e;return{[`${r}-horizontal`]:{[`${o}-label`]:{flexGrow:0},[`${o}-control`]:{flex:"1 1 0",minWidth:0},[`${o}-label[class$='-24'], ${o}-label[class*='-24 ']`]:{[`& + ${o}-control`]:{minWidth:"unset"}}}}},xNe=e=>{const{componentCls:r,formItemCls:o,inlineItemMarginBottom:s}=e;return{[`${r}-inline`]:{display:"flex",flexWrap:"wrap",[o]:{flex:"none",marginInlineEnd:e.margin,marginBottom:s,"&-row":{flexWrap:"nowrap"},[`> ${o}-label,
        > ${o}-control`]:{display:"inline-block",verticalAlign:"top"},[`> ${o}-label`]:{flex:"none"},[`${r}-text`]:{display:"inline-block"},[`${o}-has-feedback`]:{display:"inline-block"}}}}},Fc=e=>({padding:e.verticalLabelPadding,margin:e.verticalLabelMargin,whiteSpace:"initial",textAlign:"start","> label":{margin:0,"&::after":{visibility:"hidden"}}}),hQ=e=>{const{componentCls:r,formItemCls:o,rootPrefixCls:s}=e;return{[`${o} ${o}-label`]:Fc(e),[`${r}:not(${r}-inline)`]:{[o]:{flexWrap:"wrap",[`${o}-label, ${o}-control`]:{[`&:not([class*=" ${s}-col-xs"])`]:{flex:"0 0 100%",maxWidth:"100%"}}}}}},NNe=e=>{const{componentCls:r,formItemCls:o,antCls:s}=e;return{[`${r}-vertical`]:{[`${o}:not(${o}-horizontal)`]:{[`${o}-row`]:{flexDirection:"column"},[`${o}-label > label`]:{height:"auto"},[`${o}-control`]:{width:"100%"},[`${o}-label,
        ${s}-col-24${o}-label,
        ${s}-col-xl-24${o}-label`]:Fc(e)}},[`@media (max-width: ${Ge(e.screenXSMax)})`]:[hQ(e),{[r]:{[`${o}:not(${o}-horizontal)`]:{[`${s}-col-xs-24${o}-label`]:Fc(e)}}}],[`@media (max-width: ${Ge(e.screenSMMax)})`]:{[r]:{[`${o}:not(${o}-horizontal)`]:{[`${s}-col-sm-24${o}-label`]:Fc(e)}}},[`@media (max-width: ${Ge(e.screenMDMax)})`]:{[r]:{[`${o}:not(${o}-horizontal)`]:{[`${s}-col-md-24${o}-label`]:Fc(e)}}},[`@media (max-width: ${Ge(e.screenLGMax)})`]:{[r]:{[`${o}:not(${o}-horizontal)`]:{[`${s}-col-lg-24${o}-label`]:Fc(e)}}}}},PNe=e=>{const{formItemCls:r,antCls:o}=e;return{[`${r}-vertical`]:{[`${r}-row`]:{flexDirection:"column"},[`${r}-label > label`]:{height:"auto"},[`${r}-control`]:{width:"100%"}},[`${r}-vertical ${r}-label,
      ${o}-col-24${r}-label,
      ${o}-col-xl-24${r}-label`]:Fc(e),[`@media (max-width: ${Ge(e.screenXSMax)})`]:[hQ(e),{[r]:{[`${o}-col-xs-24${r}-label`]:Fc(e)}}],[`@media (max-width: ${Ge(e.screenSMMax)})`]:{[r]:{[`${o}-col-sm-24${r}-label`]:Fc(e)}},[`@media (max-width: ${Ge(e.screenMDMax)})`]:{[r]:{[`${o}-col-md-24${r}-label`]:Fc(e)}},[`@media (max-width: ${Ge(e.screenLGMax)})`]:{[r]:{[`${o}-col-lg-24${r}-label`]:Fc(e)}}}},DNe=e=>({labelRequiredMarkColor:e.colorError,labelColor:e.colorTextHeading,labelFontSize:e.fontSize,labelHeight:e.controlHeight,labelColonMarginInlineStart:e.marginXXS/2,labelColonMarginInlineEnd:e.marginXS,itemMarginBottom:e.marginLG,verticalLabelPadding:`0 0 ${e.paddingXS}px`,verticalLabelMargin:0,inlineItemMarginBottom:0}),fQ=(e,r)=>ai(e,{formItemCls:`${e.componentCls}-item`,rootPrefixCls:r}),Y2=To("Form",(e,r)=>{let{rootPrefixCls:o}=r;const s=fQ(e,o);return[ANe(s),ONe(s),wNe(s),Mz(s,s.componentCls),Mz(s,s.formItemCls),xNe(s),NNe(s),PNe(s),NX(s),y2]},DNe,{order:-1e3}),Fz=[];function UO(e,r,o){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return{key:typeof e=="string"?e:`${r}-${s}`,error:e,errorStatus:o}}const LNe=e=>{let{help:r,helpStatus:o,errors:s=Fz,warnings:c=Fz,className:d,fieldId:f,onVisibleChanged:v}=e;const{prefixCls:g}=S.useContext(A2),_=`${g}-item-explain`,C=_u(g),[b,T,I]=Y2(g,C),w=S.useMemo(()=>CP(g),[g]),x=eb(s),N=eb(c),P=S.useMemo(()=>r!=null?[UO(r,"help",o)]:[].concat(vt(x.map((M,F)=>UO(M,"error","error",F))),vt(N.map((M,F)=>UO(M,"warning","warning",F)))),[r,o,x,N]),O=S.useMemo(()=>{const M={};return P.forEach(F=>{let{key:V}=F;M[V]=(M[V]||0)+1}),P.map((F,V)=>Object.assign(Object.assign({},F),{key:M[F.key]>1?`${F.key}-fallback-${V}`:F.key}))},[P]),L={};return f&&(L.id=`${f}_help`),b(S.createElement(ef,{motionDeadline:w.motionDeadline,motionName:`${g}-show-help`,visible:!!O.length,onVisibleChanged:v},M=>{const{className:F,style:V}=M;return S.createElement("div",Object.assign({},L,{className:$e(_,F,I,C,d,T),style:V}),S.createElement(uX,Object.assign({keys:O},CP(g),{motionName:`${g}-show-help-item`,component:!1}),j=>{const{key:z,error:q,errorStatus:W,className:J,style:te}=j;return S.createElement("div",{key:z,className:$e(J,{[`${_}-${W}`]:W}),style:te},q)}))}))},pQ=LNe,kNe=["parentNode"],MNe="form_item";function Qg(e){return e===void 0||e===!1?[]:Array.isArray(e)?e:[e]}function mQ(e,r){if(!e.length)return;const o=e.join("_");return r?`${r}_${o}`:kNe.includes(o)?`${MNe}_${o}`:o}function gQ(e,r,o,s,c,d){let f=s;return d!==void 0?f=d:o.validating?f="validating":e.length?f="error":r.length?f="warning":(o.touched||c&&o.validated)&&(f="success"),f}var FNe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function Uz(e){return Qg(e).join("_")}function Bz(e,r){const o=r.getFieldInstance(e),s=tY(o);if(s)return s;const c=mQ(Qg(e),r.__INTERNAL__.name);if(c)return document.getElementById(c)}function vQ(e){const[r]=I2(),o=S.useRef({}),s=S.useMemo(()=>e??Object.assign(Object.assign({},r),{__INTERNAL__:{itemRef:c=>d=>{const f=Uz(c);d?o.current[f]=d:delete o.current[f]}},scrollToField:function(c){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{focus:f}=d,v=FNe(d,["focus"]),g=Bz(c,s);g&&(wbe(g,Object.assign({scrollMode:"if-needed",block:"nearest"},v)),f&&s.focusField(c))},focusField:c=>{var d,f;const v=s.getFieldInstance(c);typeof(v==null?void 0:v.focus)=="function"?v.focus():(f=(d=Bz(c,s))===null||d===void 0?void 0:d.focus)===null||f===void 0||f.call(d)},getFieldInstance:c=>{const d=Uz(c);return o.current[d]}}),[e,r]);return[s]}var UNe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const BNe=(e,r)=>{const o=S.useContext(Zh),{getPrefixCls:s,direction:c,requiredMark:d,colon:f,scrollToFirstError:v,className:g,style:_}=fc("form"),{prefixCls:C,className:b,rootClassName:T,size:I,disabled:w=o,form:x,colon:N,labelAlign:P,labelWrap:O,labelCol:L,wrapperCol:M,hideRequiredMark:F,layout:V="horizontal",scrollToFirstError:j,requiredMark:z,onFinishFailed:q,name:W,style:J,feedbackIcons:te,variant:ee}=e,oe=UNe(e,["prefixCls","className","rootClassName","size","disabled","form","colon","labelAlign","labelWrap","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name","style","feedbackIcons","variant"]),pe=Su(I),ne=S.useContext(FY),ae=S.useMemo(()=>z!==void 0?z:F?!1:d!==void 0?d:!0,[F,z,d]),re=N??f,he=s("form",C),fe=_u(he),[se,de,ve]=Y2(he,fe),ie=$e(he,`${he}-${V}`,{[`${he}-hide-required-mark`]:ae===!1,[`${he}-rtl`]:c==="rtl",[`${he}-${pe}`]:pe},ve,fe,de,g,b,T),[be]=vQ(x),{__INTERNAL__:Re}=be;Re.name=W;const Pe=S.useMemo(()=>({name:W,labelAlign:P,labelCol:L,labelWrap:O,wrapperCol:M,vertical:V==="vertical",colon:re,requiredMark:ae,itemRef:Re.itemRef,form:be,feedbackIcons:te}),[W,P,L,M,V,re,ae,be,te]),Ie=S.useRef(null);S.useImperativeHandle(r,()=>{var De;return Object.assign(Object.assign({},be),{nativeElement:(De=Ie.current)===null||De===void 0?void 0:De.nativeElement})});const xe=(De,Ae)=>{if(De){let je={block:"nearest"};typeof De=="object"&&(je=Object.assign(Object.assign({},je),De)),be.scrollToField(Ae,je)}},We=De=>{if(q==null||q(De),De.errorFields.length){const Ae=De.errorFields[0].name;if(j!==void 0){xe(j,Ae);return}v!==void 0&&xe(v,Ae)}};return se(S.createElement(QX.Provider,{value:ee},S.createElement(WY,{disabled:w},S.createElement(Kv.Provider,{value:pe},S.createElement(JX,{validateMessages:ne},S.createElement(pu.Provider,{value:Pe},S.createElement(Pm,Object.assign({id:W},oe,{name:W,onFinishFailed:We,form:be,ref:Ie,style:Object.assign(Object.assign({},_),J),className:ie}))))))))},VNe=S.forwardRef(BNe),jNe=VNe;function $Ne(e){if(typeof e=="function")return e;const r=zc(e);return r.length<=1?r[0]:r}const EQ=()=>{const{status:e,errors:r=[],warnings:o=[]}=S.useContext(Rs);return{status:e,errors:r,warnings:o}};EQ.Context=Rs;const HNe=EQ;function zNe(e){const[r,o]=S.useState(e),s=S.useRef(null),c=S.useRef([]),d=S.useRef(!1);S.useEffect(()=>(d.current=!1,()=>{d.current=!0,oi.cancel(s.current),s.current=null}),[]);function f(v){d.current||(s.current===null&&(c.current=[],s.current=oi(()=>{s.current=null,o(g=>{let _=g;return c.current.forEach(C=>{_=C(_)}),_})})),c.current.push(v))}return[r,f]}function WNe(){const{itemRef:e}=S.useContext(pu),r=S.useRef({});function o(s,c){const d=c&&typeof c=="object"&&Wv(c),f=s.join("_");return(r.current.name!==f||r.current.originRef!==d)&&(r.current.name=f,r.current.originRef=d,r.current.ref=qc(e(s),d)),r.current.ref}return o}const GNe=e=>{const{formItemCls:r}=e;return{"@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none)":{[`${r}-control`]:{display:"flex"}}}},KNe=Qb(["Form","item-item"],(e,r)=>{let{rootPrefixCls:o}=r;const s=fQ(e,o);return[GNe(s)]});var qNe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const YNe=24,XNe=e=>{const{prefixCls:r,status:o,labelCol:s,wrapperCol:c,children:d,errors:f,warnings:v,_internalItemRender:g,extra:_,help:C,fieldId:b,marginBottom:T,onErrorVisibleChanged:I,label:w}=e,x=`${r}-item`,N=S.useContext(pu),P=S.useMemo(()=>{let oe=Object.assign({},c||N.wrapperCol||{});return w===null&&!s&&!c&&N.labelCol&&[void 0,"xs","sm","md","lg","xl","xxl"].forEach(ne=>{const ae=ne?[ne]:[],re=oc(N.labelCol,ae),he=typeof re=="object"?re:{},fe=oc(oe,ae),se=typeof fe=="object"?fe:{};"span"in he&&!("offset"in se)&&he.span<YNe&&(oe=tc(oe,[].concat(ae,["offset"]),he.span))}),oe},[c,N]),O=$e(`${x}-control`,P.className),L=S.useMemo(()=>qNe(N,["labelCol","wrapperCol"]),[N]),M=S.useRef(null),[F,V]=S.useState(0);Cr(()=>{_&&M.current?V(M.current.clientHeight):V(0)},[_]);const j=S.createElement("div",{className:`${x}-control-input`},S.createElement("div",{className:`${x}-control-input-content`},d)),z=S.useMemo(()=>({prefixCls:r,status:o}),[r,o]),q=T!==null||f.length||v.length?S.createElement(A2.Provider,{value:z},S.createElement(pQ,{fieldId:b,errors:f,warnings:v,help:C,helpStatus:o,className:`${x}-explain-connected`,onVisibleChanged:I})):null,W={};b&&(W.id=`${b}_extra`);const J=_?S.createElement("div",Object.assign({},W,{className:`${x}-extra`,ref:M}),_):null,te=q||J?S.createElement("div",{className:`${x}-additional`,style:T?{minHeight:T+F}:{}},q,J):null,ee=g&&g.mark==="pro_table_render"&&g.render?g.render(e,{input:j,errorList:q,extra:J}):S.createElement(S.Fragment,null,j,te);return S.createElement(pu.Provider,{value:L},S.createElement(q2,Object.assign({},P,{className:O}),ee),S.createElement(KNe,{prefixCls:r}))},JNe=XNe;var QNe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"};const ZNe=QNe;var ePe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:ZNe}))},tPe=S.forwardRef(ePe);const nPe=tPe;var rPe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function iPe(e){return e?typeof e=="object"&&!S.isValidElement(e)?e:{title:e}:null}const oPe=e=>{let{prefixCls:r,label:o,htmlFor:s,labelCol:c,labelAlign:d,colon:f,required:v,requiredMark:g,tooltip:_,vertical:C}=e;var b;const[T]=Nm("Form"),{labelAlign:I,labelCol:w,labelWrap:x,colon:N}=S.useContext(pu);if(!o)return null;const P=c||w||{},O=d||I,L=`${r}-item-label`,M=$e(L,O==="left"&&`${L}-left`,P.className,{[`${L}-wrap`]:!!x});let F=o;const V=f===!0||N!==!1&&f!==!1;V&&!C&&typeof o=="string"&&o.trim()&&(F=o.replace(/[:|：]\s*$/,""));const z=iPe(_);if(z){const{icon:te=S.createElement(nPe,null)}=z,ee=rPe(z,["icon"]),oe=S.createElement(Zv,Object.assign({},ee),S.cloneElement(te,{className:`${r}-item-tooltip`,title:"",onClick:pe=>{pe.preventDefault()},tabIndex:null}));F=S.createElement(S.Fragment,null,F,oe)}const q=g==="optional",W=typeof g=="function";W?F=g(F,{required:!!v}):q&&!v&&(F=S.createElement(S.Fragment,null,F,S.createElement("span",{className:`${r}-item-optional`,title:""},(T==null?void 0:T.optional)||((b=Hh.Form)===null||b===void 0?void 0:b.optional))));const J=$e({[`${r}-item-required`]:v,[`${r}-item-required-mark-optional`]:q||W,[`${r}-item-no-colon`]:!V});return S.createElement(q2,Object.assign({},P,{className:M}),S.createElement("label",{htmlFor:s,className:J,title:typeof o=="string"?o:""},F))},aPe=oPe,sPe={success:EX,warning:SX,error:tT,validating:nT};function _Q(e){let{children:r,errors:o,warnings:s,hasFeedback:c,validateStatus:d,prefixCls:f,meta:v,noStyle:g}=e;const _=`${f}-item`,{feedbackIcons:C}=S.useContext(pu),b=gQ(o,s,v,null,!!c,d),{isFormItemInput:T,status:I,hasFeedback:w,feedbackIcon:x}=S.useContext(Rs),N=S.useMemo(()=>{var P;let O;if(c){const M=c!==!0&&c.icons||C,F=b&&((P=M==null?void 0:M({status:b,errors:o,warnings:s}))===null||P===void 0?void 0:P[b]),V=b&&sPe[b];O=F!==!1&&V?S.createElement("span",{className:$e(`${_}-feedback-icon`,`${_}-feedback-icon-${b}`)},F||S.createElement(V,null)):null}const L={status:b||"",errors:o,warnings:s,hasFeedback:!!c,feedbackIcon:O,isFormItemInput:!0};return g&&(L.status=(b??I)||"",L.isFormItemInput=T,L.hasFeedback=!!(c??w),L.feedbackIcon=c!==void 0?L.feedbackIcon:x),L},[b,c,g,T,I]);return S.createElement(Rs.Provider,{value:N},r)}var cPe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function lPe(e){const{prefixCls:r,className:o,rootClassName:s,style:c,help:d,errors:f,warnings:v,validateStatus:g,meta:_,hasFeedback:C,hidden:b,children:T,fieldId:I,required:w,isRequired:x,onSubItemMetaChange:N,layout:P}=e,O=cPe(e,["prefixCls","className","rootClassName","style","help","errors","warnings","validateStatus","meta","hasFeedback","hidden","children","fieldId","required","isRequired","onSubItemMetaChange","layout"]),L=`${r}-item`,{requiredMark:M,vertical:F}=S.useContext(pu),V=F||P==="vertical",j=S.useRef(null),z=eb(f),q=eb(v),W=d!=null,J=!!(W||f.length||v.length),te=!!j.current&&iT(j.current),[ee,oe]=S.useState(null);Cr(()=>{if(J&&j.current){const he=getComputedStyle(j.current);oe(parseInt(he.marginBottom,10))}},[J,te]);const pe=he=>{he||oe(null)},ae=function(){let he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const fe=he?z:_.errors,se=he?q:_.warnings;return gQ(fe,se,_,"",!!C,g)}(),re=$e(L,o,s,{[`${L}-with-help`]:W||z.length||q.length,[`${L}-has-feedback`]:ae&&C,[`${L}-has-success`]:ae==="success",[`${L}-has-warning`]:ae==="warning",[`${L}-has-error`]:ae==="error",[`${L}-is-validating`]:ae==="validating",[`${L}-hidden`]:b,[`${L}-${P}`]:P});return S.createElement("div",{className:re,style:c,ref:j},S.createElement(aQ,Object.assign({className:`${L}-row`},na(O,["_internalItemRender","colon","dependencies","extra","fieldKey","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","label","labelAlign","labelCol","labelWrap","messageVariables","name","normalize","noStyle","preserve","requiredMark","rules","shouldUpdate","trigger","tooltip","validateFirst","validateTrigger","valuePropName","wrapperCol","validateDebounce"])),S.createElement(aPe,Object.assign({htmlFor:I},e,{requiredMark:M,required:w??x,prefixCls:r,vertical:V})),S.createElement(JNe,Object.assign({},e,_,{errors:z,warnings:q,prefixCls:r,status:ae,help:d,marginBottom:ee,onErrorVisibleChanged:pe}),S.createElement(XX.Provider,{value:N},S.createElement(_Q,{prefixCls:r,meta:_,errors:_.errors,warnings:_.warnings,hasFeedback:C,validateStatus:ae},T)))),!!ee&&S.createElement("div",{className:`${L}-margin-offset`,style:{marginBottom:-ee}}))}const uPe="__SPLIT__";function dPe(e,r){const o=Object.keys(e),s=Object.keys(r);return o.length===s.length&&o.every(c=>{const d=e[c],f=r[c];return d===f||typeof d=="function"||typeof f=="function"})}const hPe=S.memo(e=>{let{children:r}=e;return r},(e,r)=>dPe(e.control,r.control)&&e.update===r.update&&e.childProps.length===r.childProps.length&&e.childProps.every((o,s)=>o===r.childProps[s]));function Vz(){return{errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1}}function fPe(e){const{name:r,noStyle:o,className:s,dependencies:c,prefixCls:d,shouldUpdate:f,rules:v,children:g,required:_,label:C,messageVariables:b,trigger:T="onChange",validateTrigger:I,hidden:w,help:x,layout:N}=e,{getPrefixCls:P}=S.useContext(br),{name:O}=S.useContext(pu),L=$Ne(g),M=typeof L=="function",F=S.useContext(XX),{validateTrigger:V}=S.useContext(Gh),j=I!==void 0?I:V,z=r!=null,q=P("form",d),W=_u(q),[J,te,ee]=Y2(q,W);Yb();const oe=S.useContext(xv),pe=S.useRef(null),[ne,ae]=zNe({}),[re,he]=gm(()=>Vz()),fe=Pe=>{const Ie=oe==null?void 0:oe.getKey(Pe.name);if(he(Pe.destroy?Vz():Pe,!0),o&&x!==!1&&F){let xe=Pe.name;if(Pe.destroy)xe=pe.current||xe;else if(Ie!==void 0){const[We,De]=Ie;xe=[We].concat(vt(De)),pe.current=xe}F(Pe,xe)}},se=(Pe,Ie)=>{ae(xe=>{const We=Object.assign({},xe),Ae=[].concat(vt(Pe.name.slice(0,-1)),vt(Ie)).join(uPe);return Pe.destroy?delete We[Ae]:We[Ae]=Pe,We})},[de,ve]=S.useMemo(()=>{const Pe=vt(re.errors),Ie=vt(re.warnings);return Object.values(ne).forEach(xe=>{Pe.push.apply(Pe,vt(xe.errors||[])),Ie.push.apply(Ie,vt(xe.warnings||[]))}),[Pe,Ie]},[ne,re.errors,re.warnings]),ie=WNe();function be(Pe,Ie,xe){return o&&!w?S.createElement(_Q,{prefixCls:q,hasFeedback:e.hasFeedback,validateStatus:e.validateStatus,meta:re,errors:de,warnings:ve,noStyle:!0},Pe):S.createElement(lPe,Object.assign({key:"row"},e,{className:$e(s,ee,W,te),prefixCls:q,fieldId:Ie,isRequired:xe,errors:de,warnings:ve,meta:re,onSubItemMetaChange:se,layout:N}),Pe)}if(!z&&!M&&!c)return J(be(L));let Re={};return typeof C=="string"?Re.label=C:r&&(Re.label=String(r)),b&&(Re=Object.assign(Object.assign({},Re),b)),J(S.createElement(w2,Object.assign({},e,{messageVariables:Re,trigger:T,validateTrigger:j,onMetaChange:fe}),(Pe,Ie,xe)=>{const We=Qg(r).length&&Ie?Ie.name:[],De=mQ(We,O),Ae=_!==void 0?_:!!(v!=null&&v.some(Fe=>{if(Fe&&typeof Fe=="object"&&Fe.required&&!Fe.warningOnly)return!0;if(typeof Fe=="function"){const ke=Fe(xe);return(ke==null?void 0:ke.required)&&!(ke!=null&&ke.warningOnly)}return!1})),je=Object.assign({},Pe);let Je=null;if(Array.isArray(L)&&z)Je=L;else if(!(M&&(!(f||c)||z))){if(!(c&&!M&&!z))if(S.isValidElement(L)){const Fe=Object.assign(Object.assign({},L.props),je);if(Fe.id||(Fe.id=De),x||de.length>0||ve.length>0||e.extra){const Ze=[];(x||de.length>0)&&Ze.push(`${De}_help`),e.extra&&Ze.push(`${De}_extra`),Fe["aria-describedby"]=Ze.join(" ")}de.length>0&&(Fe["aria-invalid"]="true"),Ae&&(Fe["aria-required"]="true"),Om(L)&&(Fe.ref=ie(We,L)),new Set([].concat(vt(Qg(T)),vt(Qg(j)))).forEach(Ze=>{Fe[Ze]=function(){for(var mt,Rt,ut,ot,ze,tt=arguments.length,bt=new Array(tt),Nt=0;Nt<tt;Nt++)bt[Nt]=arguments[Nt];(ut=je[Ze])===null||ut===void 0||(mt=ut).call.apply(mt,[je].concat(bt)),(ze=(ot=L.props)[Ze])===null||ze===void 0||(Rt=ze).call.apply(Rt,[ot].concat(bt))}});const ht=[Fe["aria-required"],Fe["aria-invalid"],Fe["aria-describedby"]];Je=S.createElement(hPe,{control:je,update:L,childProps:ht},dc(L,Fe))}else M&&(f||c)&&!z?Je=L(xe):Je=L}return be(Je,De,Ae)}))}const SQ=fPe;SQ.useStatus=HNe;const pPe=SQ;var mPe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const gPe=e=>{var{prefixCls:r,children:o}=e,s=mPe(e,["prefixCls","children"]);const{getPrefixCls:c}=S.useContext(br),d=c("form",r),f=S.useMemo(()=>({prefixCls:d,status:"error"}),[d]);return S.createElement(GX,Object.assign({},s),(v,g,_)=>S.createElement(A2.Provider,{value:f},o(v.map(C=>Object.assign(Object.assign({},C),{fieldKey:C.key})),g,{errors:_.errors,warnings:_.warnings})))},vPe=gPe;function EPe(){const{form:e}=S.useContext(pu);return e}const yu=jNe;yu.Item=pPe;yu.List=vPe;yu.ErrorList=pQ;yu.useForm=vQ;yu.useFormInstance=EPe;yu.useWatch=YX;yu.Provider=JX;yu.create=()=>{};const jz=yu;var _Pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const SPe=_Pe;var yPe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:SPe}))},CPe=S.forwardRef(yPe);const bPe=CPe,TPe=e=>{const{getPrefixCls:r,direction:o}=S.useContext(br),{prefixCls:s,className:c}=e,d=r("input-group",s),f=r("input"),[v,g,_]=iQ(f),C=$e(d,_,{[`${d}-lg`]:e.size==="large",[`${d}-sm`]:e.size==="small",[`${d}-compact`]:e.compact,[`${d}-rtl`]:o==="rtl"},g,c),b=S.useContext(Rs),T=S.useMemo(()=>Object.assign(Object.assign({},b),{isFormItemInput:!1}),[b]);return v(S.createElement("span",{className:C,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},S.createElement(Rs.Provider,{value:T},e.children)))},RPe=TPe,wPe=e=>{const{componentCls:r,paddingXS:o}=e;return{[r]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:o,"&-rtl":{direction:"rtl"},[`${r}-input`]:{textAlign:"center",paddingInline:e.paddingXXS},[`&${r}-sm ${r}-input`]:{paddingInline:e.calc(e.paddingXXS).div(2).equal()},[`&${r}-lg ${r}-input`]:{paddingInline:e.paddingXS}}}},IPe=To(["Input","OTP"],e=>{const r=ai(e,nE(e));return[wPe(r)]},rE);var APe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const OPe=S.forwardRef((e,r)=>{const{value:o,onChange:s,onActiveChange:c,index:d,mask:f}=e,v=APe(e,["value","onChange","onActiveChange","index","mask"]),g=o&&typeof f=="string"?f:o,_=w=>{s(d,w.target.value)},C=S.useRef(null);S.useImperativeHandle(r,()=>C.current);const b=()=>{oi(()=>{var w;const x=(w=C.current)===null||w===void 0?void 0:w.input;document.activeElement===x&&x&&x.select()})},T=w=>{const{key:x,ctrlKey:N,metaKey:P}=w;x==="ArrowLeft"?c(d-1):x==="ArrowRight"?c(d+1):x==="z"&&(N||P)&&w.preventDefault(),b()},I=w=>{w.key==="Backspace"&&!o&&c(d-1),b()};return S.createElement(ET,Object.assign({type:f===!0?"password":"text"},v,{ref:C,value:g,onInput:_,onFocus:b,onKeyDown:T,onKeyUp:I,onMouseDown:b,onMouseUp:b}))}),xPe=OPe;var NPe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function wy(e){return(e||"").split("")}const PPe=e=>{const{index:r,prefixCls:o,separator:s}=e,c=typeof s=="function"?s(r):s;return c?S.createElement("span",{className:`${o}-separator`},c):null},DPe=S.forwardRef((e,r)=>{const{prefixCls:o,length:s=6,size:c,defaultValue:d,value:f,onChange:v,formatter:g,separator:_,variant:C,disabled:b,status:T,autoFocus:I,mask:w,type:x,onInput:N,inputMode:P}=e,O=NPe(e,["prefixCls","length","size","defaultValue","value","onChange","formatter","separator","variant","disabled","status","autoFocus","mask","type","onInput","inputMode"]),{getPrefixCls:L,direction:M}=S.useContext(br),F=L("otp",o),V=Wh(O,{aria:!0,data:!0,attr:!0}),[j,z,q]=IPe(F),W=Su(ie=>c??ie),J=S.useContext(Rs),te=hT(J.status,T),ee=S.useMemo(()=>Object.assign(Object.assign({},J),{status:te,hasFeedback:!1,feedbackIcon:null}),[J,te]),oe=S.useRef(null),pe=S.useRef({});S.useImperativeHandle(r,()=>({focus:()=>{var ie;(ie=pe.current[0])===null||ie===void 0||ie.focus()},blur:()=>{var ie;for(let be=0;be<s;be+=1)(ie=pe.current[be])===null||ie===void 0||ie.blur()},nativeElement:oe.current}));const ne=ie=>g?g(ie):ie,[ae,re]=S.useState(()=>wy(ne(d||"")));S.useEffect(()=>{f!==void 0&&re(wy(f))},[f]);const he=uo(ie=>{re(ie),N&&N(ie),v&&ie.length===s&&ie.every(be=>be)&&ie.some((be,Re)=>ae[Re]!==be)&&v(ie.join(""))}),fe=uo((ie,be)=>{let Re=vt(ae);for(let Ie=0;Ie<ie;Ie+=1)Re[Ie]||(Re[Ie]="");be.length<=1?Re[ie]=be:Re=Re.slice(0,ie).concat(wy(be)),Re=Re.slice(0,s);for(let Ie=Re.length-1;Ie>=0&&!Re[Ie];Ie-=1)Re.pop();const Pe=ne(Re.map(Ie=>Ie||" ").join(""));return Re=wy(Pe).map((Ie,xe)=>Ie===" "&&!Re[xe]?Re[xe]:Ie),Re}),se=(ie,be)=>{var Re;const Pe=fe(ie,be),Ie=Math.min(ie+be.length,s-1);Ie!==ie&&Pe[ie]!==void 0&&((Re=pe.current[Ie])===null||Re===void 0||Re.focus()),he(Pe)},de=ie=>{var be;(be=pe.current[ie])===null||be===void 0||be.focus()},ve={variant:C,disabled:b,status:te,mask:w,type:x,inputMode:P};return j(S.createElement("div",Object.assign({},V,{ref:oe,className:$e(F,{[`${F}-sm`]:W==="small",[`${F}-lg`]:W==="large",[`${F}-rtl`]:M==="rtl"},q,z)}),S.createElement(Rs.Provider,{value:ee},Array.from({length:s}).map((ie,be)=>{const Re=`otp-${be}`,Pe=ae[be]||"";return S.createElement(S.Fragment,{key:Re},S.createElement(xPe,Object.assign({ref:Ie=>{pe.current[be]=Ie},index:be,size:W,htmlSize:1,className:`${F}-input`,onChange:se,value:Pe,onActiveChange:de,autoFocus:be===0&&I},ve)),be<s-1&&S.createElement(PPe,{separator:_,index:be,prefixCls:F}))}))))}),LPe=DPe;var kPe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const MPe=kPe;var FPe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:MPe}))},UPe=S.forwardRef(FPe);const BPe=UPe;var VPe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const jPe=e=>e?S.createElement(bPe,null):S.createElement(BPe,null),$Pe={click:"onClick",hover:"onMouseOver"},HPe=S.forwardRef((e,r)=>{const{disabled:o,action:s="click",visibilityToggle:c=!0,iconRender:d=jPe}=e,f=S.useContext(Zh),v=o??f,g=typeof c=="object"&&c.visible!==void 0,[_,C]=S.useState(()=>g?c.visible:!1),b=S.useRef(null);S.useEffect(()=>{g&&C(c.visible)},[g,c]);const T=dQ(b),I=()=>{var W;if(v)return;_&&T();const J=!_;C(J),typeof c=="object"&&((W=c.onVisibleChange)===null||W===void 0||W.call(c,J))},w=W=>{const J=$Pe[s]||"",te=d(_),ee={[J]:I,className:`${W}-icon`,key:"passwordIcon",onMouseDown:oe=>{oe.preventDefault()},onMouseUp:oe=>{oe.preventDefault()}};return S.cloneElement(S.isValidElement(te)?te:S.createElement("span",null,te),ee)},{className:x,prefixCls:N,inputPrefixCls:P,size:O}=e,L=VPe(e,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:M}=S.useContext(br),F=M("input",P),V=M("input-password",N),j=c&&w(V),z=$e(V,x,{[`${V}-${O}`]:!!O}),q=Object.assign(Object.assign({},na(L,["suffix","iconRender","visibilityToggle"])),{type:_?"text":"password",className:z,prefixCls:F,suffix:j});return O&&(q.size=O),S.createElement(ET,Object.assign({ref:qc(r,b)},q))}),zPe=HPe;var WPe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const GPe=S.forwardRef((e,r)=>{const{prefixCls:o,inputPrefixCls:s,className:c,size:d,suffix:f,enterButton:v=!1,addonAfter:g,loading:_,disabled:C,onSearch:b,onChange:T,onCompositionStart:I,onCompositionEnd:w}=e,x=WPe(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:N,direction:P}=S.useContext(br),O=S.useRef(!1),L=N("input-search",o),M=N("input",s),{compactSize:F}=Xv(L,P),V=Su(se=>{var de;return(de=d??F)!==null&&de!==void 0?de:se}),j=S.useRef(null),z=se=>{se!=null&&se.target&&se.type==="click"&&b&&b(se.target.value,se,{source:"clear"}),T==null||T(se)},q=se=>{var de;document.activeElement===((de=j.current)===null||de===void 0?void 0:de.input)&&se.preventDefault()},W=se=>{var de,ve;b&&b((ve=(de=j.current)===null||de===void 0?void 0:de.input)===null||ve===void 0?void 0:ve.value,se,{source:"input"})},J=se=>{O.current||_||W(se)},te=typeof v=="boolean"?S.createElement(IJ,null):null,ee=`${L}-button`;let oe;const pe=v||{},ne=pe.type&&pe.type.__ANT_BUTTON===!0;ne||pe.type==="button"?oe=dc(pe,Object.assign({onMouseDown:q,onClick:se=>{var de,ve;(ve=(de=pe==null?void 0:pe.props)===null||de===void 0?void 0:de.onClick)===null||ve===void 0||ve.call(de,se),W(se)},key:"enterButton"},ne?{className:ee,size:V}:{})):oe=S.createElement(po,{className:ee,type:v?"primary":void 0,size:V,disabled:C,key:"enterButton",onMouseDown:q,onClick:W,loading:_,icon:te},v),g&&(oe=[oe,dc(g,{key:"addonAfter"})]);const ae=$e(L,{[`${L}-rtl`]:P==="rtl",[`${L}-${V}`]:!!V,[`${L}-with-button`]:!!v},c),re=Object.assign(Object.assign({},x),{className:ae,prefixCls:M,type:"search"}),he=se=>{O.current=!0,I==null||I(se)},fe=se=>{O.current=!1,w==null||w(se)};return S.createElement(ET,Object.assign({ref:qc(j,r),onPressEnter:J},re,{size:V,onCompositionStart:he,onCompositionEnd:fe,addonAfter:oe,suffix:f,onChange:z,disabled:C}))}),KPe=GPe;var qPe=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,YPe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],BO={},Es;function XPe(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(r&&BO[o])return BO[o];var s=window.getComputedStyle(e),c=s.getPropertyValue("box-sizing")||s.getPropertyValue("-moz-box-sizing")||s.getPropertyValue("-webkit-box-sizing"),d=parseFloat(s.getPropertyValue("padding-bottom"))+parseFloat(s.getPropertyValue("padding-top")),f=parseFloat(s.getPropertyValue("border-bottom-width"))+parseFloat(s.getPropertyValue("border-top-width")),v=YPe.map(function(_){return"".concat(_,":").concat(s.getPropertyValue(_))}).join(";"),g={sizingStyle:v,paddingSize:d,borderSize:f,boxSizing:c};return r&&o&&(BO[o]=g),g}function JPe(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Es||(Es=document.createElement("textarea"),Es.setAttribute("tab-index","-1"),Es.setAttribute("aria-hidden","true"),Es.setAttribute("name","hiddenTextarea"),document.body.appendChild(Es)),e.getAttribute("wrap")?Es.setAttribute("wrap",e.getAttribute("wrap")):Es.removeAttribute("wrap");var c=XPe(e,r),d=c.paddingSize,f=c.borderSize,v=c.boxSizing,g=c.sizingStyle;Es.setAttribute("style","".concat(g,";").concat(qPe)),Es.value=e.value||e.placeholder||"";var _=void 0,C=void 0,b,T=Es.scrollHeight;if(v==="border-box"?T+=f:v==="content-box"&&(T-=d),o!==null||s!==null){Es.value=" ";var I=Es.scrollHeight-d;o!==null&&(_=I*o,v==="border-box"&&(_=_+d+f),T=Math.max(_,T)),s!==null&&(C=I*s,v==="border-box"&&(C=C+d+f),b=T>C?"":"hidden",T=Math.min(C,T))}var w={height:T,overflowY:b,resize:"none"};return _&&(w.minHeight=_),C&&(w.maxHeight=C),w}var QPe=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],VO=0,jO=1,$O=2,ZPe=S.forwardRef(function(e,r){var o=e,s=o.prefixCls,c=o.defaultValue,d=o.value,f=o.autoSize,v=o.onResize,g=o.className,_=o.style,C=o.disabled,b=o.onChange;o.onInternalAutoSize;var T=An(o,QPe),I=Sa(c,{value:d,postState:function(ie){return ie??""}}),w=Ue(I,2),x=w[0],N=w[1],P=function(ie){N(ie.target.value),b==null||b(ie)},O=S.useRef();S.useImperativeHandle(r,function(){return{textArea:O.current}});var L=S.useMemo(function(){return f&&on(f)==="object"?[f.minRows,f.maxRows]:[]},[f]),M=Ue(L,2),F=M[0],V=M[1],j=!!f,z=function(){try{if(document.activeElement===O.current){var ie=O.current,be=ie.selectionStart,Re=ie.selectionEnd,Pe=ie.scrollTop;O.current.setSelectionRange(be,Re),O.current.scrollTop=Pe}}catch{}},q=S.useState($O),W=Ue(q,2),J=W[0],te=W[1],ee=S.useState(),oe=Ue(ee,2),pe=oe[0],ne=oe[1],ae=function(){te(VO)};Cr(function(){j&&ae()},[d,F,V,j]),Cr(function(){if(J===VO)te(jO);else if(J===jO){var ve=JPe(O.current,!1,F,V);te($O),ne(ve)}else z()},[J]);var re=S.useRef(),he=function(){oi.cancel(re.current)},fe=function(ie){J===$O&&(v==null||v(ie),f&&(he(),re.current=oi(function(){ae()})))};S.useEffect(function(){return he},[]);var se=j?pe:null,de=_e(_e({},_),se);return(J===VO||J===jO)&&(de.overflowY="hidden",de.overflowX="hidden"),S.createElement(Eu,{onResize:fe,disabled:!(f||v)},S.createElement("textarea",Qe({},T,{ref:O,style:de,className:$e(s,g,Ce({},"".concat(s,"-disabled"),C)),disabled:C,value:x,onChange:P})))}),eDe=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],tDe=Ve.forwardRef(function(e,r){var o,s=e.defaultValue,c=e.value,d=e.onFocus,f=e.onBlur,v=e.onChange,g=e.allowClear,_=e.maxLength,C=e.onCompositionStart,b=e.onCompositionEnd,T=e.suffix,I=e.prefixCls,w=I===void 0?"rc-textarea":I,x=e.showCount,N=e.count,P=e.className,O=e.style,L=e.disabled,M=e.hidden,F=e.classNames,V=e.styles,j=e.onResize,z=e.onClear,q=e.onPressEnter,W=e.readOnly,J=e.autoSize,te=e.onKeyDown,ee=An(e,eDe),oe=Sa(s,{value:c,defaultValue:s}),pe=Ue(oe,2),ne=pe[0],ae=pe[1],re=ne==null?"":String(ne),he=Ve.useState(!1),fe=Ue(he,2),se=fe[0],de=fe[1],ve=Ve.useRef(!1),ie=Ve.useState(null),be=Ue(ie,2),Re=be[0],Pe=be[1],Ie=S.useRef(null),xe=S.useRef(null),We=function(){var yt;return(yt=xe.current)===null||yt===void 0?void 0:yt.textArea},De=function(){We().focus()};S.useImperativeHandle(r,function(){var Ft;return{resizableTextArea:xe.current,focus:De,blur:function(){We().blur()},nativeElement:((Ft=Ie.current)===null||Ft===void 0?void 0:Ft.nativeElement)||We()}}),S.useEffect(function(){de(function(Ft){return!L&&Ft})},[L]);var Ae=Ve.useState(null),je=Ue(Ae,2),Je=je[0],Fe=je[1];Ve.useEffect(function(){if(Je){var Ft;(Ft=We()).setSelectionRange.apply(Ft,vt(Je))}},[Je]);var ke=lQ(N,x),ht=(o=ke.max)!==null&&o!==void 0?o:_,Ze=Number(ht)>0,mt=ke.strategy(re),Rt=!!ht&&mt>ht,ut=function(yt,It){var ft=It;!ve.current&&ke.exceedFormatter&&ke.max&&ke.strategy(It)>ke.max&&(ft=ke.exceedFormatter(It,{max:ke.max}),It!==ft&&Fe([We().selectionStart||0,We().selectionEnd||0])),ae(ft),ZC(yt.currentTarget,yt,v,ft)},ot=function(yt){ve.current=!0,C==null||C(yt)},ze=function(yt){ve.current=!1,ut(yt,yt.currentTarget.value),b==null||b(yt)},tt=function(yt){ut(yt,yt.target.value)},bt=function(yt){yt.key==="Enter"&&q&&q(yt),te==null||te(yt)},Nt=function(yt){de(!0),d==null||d(yt)},wt=function(yt){de(!1),f==null||f(yt)},Xt=function(yt){ae(""),De(),ZC(We(),yt,v)},$t=T,Lt;ke.show&&(ke.showFormatter?Lt=ke.showFormatter({value:re,count:mt,maxLength:ht}):Lt="".concat(mt).concat(Ze?" / ".concat(ht):""),$t=Ve.createElement(Ve.Fragment,null,$t,Ve.createElement("span",{className:$e("".concat(w,"-data-count"),F==null?void 0:F.count),style:V==null?void 0:V.count},Lt)));var Wt=function(yt){var It;j==null||j(yt),(It=We())!==null&&It!==void 0&&It.style.height&&Pe(!0)},Jt=!J&&!x&&!g;return Ve.createElement(cQ,{ref:Ie,value:re,allowClear:g,handleReset:Xt,suffix:$t,prefixCls:w,classNames:_e(_e({},F),{},{affixWrapper:$e(F==null?void 0:F.affixWrapper,Ce(Ce({},"".concat(w,"-show-count"),x),"".concat(w,"-textarea-allow-clear"),g))}),disabled:L,focused:se,className:$e(P,Rt&&"".concat(w,"-out-of-range")),style:_e(_e({},O),Re&&!Jt?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof Lt=="string"?Lt:void 0}},hidden:M,readOnly:W,onClear:z},Ve.createElement(ZPe,Qe({},ee,{autoSize:J,maxLength:_,onKeyDown:bt,onChange:tt,onFocus:Nt,onBlur:wt,onCompositionStart:ot,onCompositionEnd:ze,className:$e(F==null?void 0:F.textarea),style:_e(_e({},V==null?void 0:V.textarea),{},{resize:O==null?void 0:O.resize}),disabled:L,prefixCls:w,onResize:Wt,ref:xe,readOnly:W})))});const nDe=e=>{const{componentCls:r,paddingLG:o}=e,s=`${r}-textarea`;return{[s]:{position:"relative","&-show-count":{[`> ${r}`]:{height:"100%"},[`${r}-data-count`]:{position:"absolute",bottom:e.calc(e.fontSize).mul(e.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${r},
        &-affix-wrapper${s}-has-feedback ${r}
      `]:{paddingInlineEnd:o},[`&-affix-wrapper${r}-affix-wrapper`]:{padding:0,[`> textarea${r}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent",minHeight:e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:"none !important"}},[`${r}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${r}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingInline,insetBlockStart:e.paddingXS},[`${s}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${r}-affix-wrapper-sm`]:{[`${r}-suffix`]:{[`${r}-clear-icon`]:{insetInlineEnd:e.paddingInlineSM}}}}}},rDe=To(["Input","TextArea"],e=>{const r=ai(e,nE(e));return[nDe(r)]},rE,{resetFont:!1});var iDe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const oDe=S.forwardRef((e,r)=>{var o;const{prefixCls:s,bordered:c=!0,size:d,disabled:f,status:v,allowClear:g,classNames:_,rootClassName:C,className:b,style:T,styles:I,variant:w}=e,x=iDe(e,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:N,direction:P,allowClear:O,autoComplete:L,className:M,style:F,classNames:V,styles:j}=fc("textArea"),z=S.useContext(Zh),q=f??z,{status:W,hasFeedback:J,feedbackIcon:te}=S.useContext(Rs),ee=hT(W,v),oe=S.useRef(null);S.useImperativeHandle(r,()=>{var Pe;return{resizableTextArea:(Pe=oe.current)===null||Pe===void 0?void 0:Pe.resizableTextArea,focus:Ie=>{var xe,We;sQ((We=(xe=oe.current)===null||xe===void 0?void 0:xe.resizableTextArea)===null||We===void 0?void 0:We.textArea,Ie)},blur:()=>{var Ie;return(Ie=oe.current)===null||Ie===void 0?void 0:Ie.blur()}}});const pe=N("input",s),ne=_u(pe),[ae,re,he]=rQ(pe,C),[fe]=rDe(pe,ne),{compactSize:se,compactItemClassnames:de}=Xv(pe,P),ve=Su(Pe=>{var Ie;return(Ie=d??se)!==null&&Ie!==void 0?Ie:Pe}),[ie,be]=M2("textArea",w,c),Re=uQ(g??O);return ae(fe(S.createElement(tDe,Object.assign({autoComplete:L},x,{style:Object.assign(Object.assign({},F),T),styles:Object.assign(Object.assign({},j),I),disabled:q,allowClear:Re,className:$e(he,ne,b,C,de,M),classNames:Object.assign(Object.assign(Object.assign({},_),V),{textarea:$e({[`${pe}-sm`]:ve==="small",[`${pe}-lg`]:ve==="large"},re,_==null?void 0:_.textarea,V.textarea),variant:$e({[`${pe}-${ie}`]:be},YC(pe,ee)),affixWrapper:$e(`${pe}-textarea-affix-wrapper`,{[`${pe}-affix-wrapper-rtl`]:P==="rtl",[`${pe}-affix-wrapper-sm`]:ve==="small",[`${pe}-affix-wrapper-lg`]:ve==="large",[`${pe}-textarea-show-count`]:e.showCount||((o=e.count)===null||o===void 0?void 0:o.show)},re)}),prefixCls:pe,suffix:J&&S.createElement("span",{className:`${pe}-textarea-suffix`},te),ref:oe}))))}),yQ=oDe,km=ET;km.Group=RPe;km.Search=KPe;km.TextArea=yQ;km.Password=zPe;km.OTP=LPe;const aDe=km;function sDe(e,r,o){return typeof o=="boolean"?o:e.length?!0:zc(r).some(c=>c.type===XJ)}var CQ=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function _T(e){let{suffixCls:r,tagName:o,displayName:s}=e;return c=>S.forwardRef((f,v)=>S.createElement(c,Object.assign({ref:v,suffixCls:r,tagName:o},f)))}const X2=S.forwardRef((e,r)=>{const{prefixCls:o,suffixCls:s,className:c,tagName:d}=e,f=CQ(e,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:v}=S.useContext(br),g=v("layout",o),[_,C,b]=YJ(g),T=s?`${g}-${s}`:g;return _(S.createElement(d,Object.assign({className:$e(o||T,c,C,b),ref:r},f)))}),cDe=S.forwardRef((e,r)=>{const{direction:o}=S.useContext(br),[s,c]=S.useState([]),{prefixCls:d,className:f,rootClassName:v,children:g,hasSider:_,tagName:C,style:b}=e,T=CQ(e,["prefixCls","className","rootClassName","children","hasSider","tagName","style"]),I=na(T,["suffixCls"]),{getPrefixCls:w,className:x,style:N}=fc("layout"),P=w("layout",d),O=sDe(s,g,_),[L,M,F]=YJ(P),V=$e(P,{[`${P}-has-sider`]:O,[`${P}-rtl`]:o==="rtl"},x,f,v,M,F),j=S.useMemo(()=>({siderHook:{addSider:z=>{c(q=>[].concat(vt(q),[z]))},removeSider:z=>{c(q=>q.filter(W=>W!==z))}}}),[]);return L(S.createElement(GJ.Provider,{value:j},S.createElement(C,Object.assign({ref:r,className:V,style:Object.assign(Object.assign({},N),b)},I),g)))}),lDe=_T({tagName:"div",displayName:"Layout"})(cDe),uDe=_T({suffixCls:"header",tagName:"header",displayName:"Header"})(X2),dDe=_T({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(X2),hDe=_T({suffixCls:"content",tagName:"main",displayName:"Content"})(X2),fDe=lDe,Mm=fDe;Mm.Header=uDe;Mm.Footer=dDe;Mm.Content=hDe;Mm.Sider=XJ;Mm._InternalSiderContext=gT;const qP=Mm,pDe=function(){const e=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let r=1;r<arguments.length;r++){const o=r<0||arguments.length<=r?void 0:arguments[r];o&&Object.keys(o).forEach(s=>{const c=o[s];c!==void 0&&(e[s]=c)})}return e},mDe=pDe;var gDe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"};const vDe=gDe;var EDe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:vDe}))},_De=S.forwardRef(EDe);const $z=_De;var SDe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"};const yDe=SDe;var CDe=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:yDe}))},bDe=S.forwardRef(CDe);const Hz=bDe;var TDe={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"},RDe=[10,20,50,100],wDe=function(r){var o=r.pageSizeOptions,s=o===void 0?RDe:o,c=r.locale,d=r.changeSize,f=r.pageSize,v=r.goButton,g=r.quickGo,_=r.rootPrefixCls,C=r.disabled,b=r.buildOptionText,T=r.showSizeChanger,I=r.sizeChangerRender,w=Ve.useState(""),x=Ue(w,2),N=x[0],P=x[1],O=function(){return!N||Number.isNaN(N)?void 0:Number(N)},L=typeof b=="function"?b:function(te){return"".concat(te," ").concat(c.items_per_page)},M=function(ee){P(ee.target.value)},F=function(ee){v||N===""||(P(""),!(ee.relatedTarget&&(ee.relatedTarget.className.indexOf("".concat(_,"-item-link"))>=0||ee.relatedTarget.className.indexOf("".concat(_,"-item"))>=0))&&(g==null||g(O())))},V=function(ee){N!==""&&(ee.keyCode===lt.ENTER||ee.type==="click")&&(P(""),g==null||g(O()))},j=function(){return s.some(function(ee){return ee.toString()===f.toString()})?s:s.concat([f]).sort(function(ee,oe){var pe=Number.isNaN(Number(ee))?0:Number(ee),ne=Number.isNaN(Number(oe))?0:Number(oe);return pe-ne})},z="".concat(_,"-options");if(!T&&!g)return null;var q=null,W=null,J=null;return T&&I&&(q=I({disabled:C,size:f,onSizeChange:function(ee){d==null||d(Number(ee))},"aria-label":c.page_size,className:"".concat(z,"-size-changer"),options:j().map(function(te){return{label:L(te),value:te}})})),g&&(v&&(J=typeof v=="boolean"?Ve.createElement("button",{type:"button",onClick:V,onKeyUp:V,disabled:C,className:"".concat(z,"-quick-jumper-button")},c.jump_to_confirm):Ve.createElement("span",{onClick:V,onKeyUp:V},v)),W=Ve.createElement("div",{className:"".concat(z,"-quick-jumper")},c.jump_to,Ve.createElement("input",{disabled:C,type:"text",value:N,onChange:M,onKeyUp:V,onBlur:F,"aria-label":c.page}),c.page,J)),Ve.createElement("li",{className:z},q,W)},Ig=function(r){var o=r.rootPrefixCls,s=r.page,c=r.active,d=r.className,f=r.showTitle,v=r.onClick,g=r.onKeyPress,_=r.itemRender,C="".concat(o,"-item"),b=$e(C,"".concat(C,"-").concat(s),Ce(Ce({},"".concat(C,"-active"),c),"".concat(C,"-disabled"),!s),d),T=function(){v(s)},I=function(N){g(N,v,s)},w=_(s,"page",Ve.createElement("a",{rel:"nofollow"},s));return w?Ve.createElement("li",{title:f?String(s):null,className:b,onClick:T,onKeyDown:I,tabIndex:0},w):null},IDe=function(r,o,s){return s};function zz(){}function Wz(e){var r=Number(e);return typeof r=="number"&&!Number.isNaN(r)&&isFinite(r)&&Math.floor(r)===r}function bh(e,r,o){var s=typeof e>"u"?r:e;return Math.floor((o-1)/s)+1}var ADe=function(r){var o=r.prefixCls,s=o===void 0?"rc-pagination":o,c=r.selectPrefixCls,d=c===void 0?"rc-select":c,f=r.className,v=r.current,g=r.defaultCurrent,_=g===void 0?1:g,C=r.total,b=C===void 0?0:C,T=r.pageSize,I=r.defaultPageSize,w=I===void 0?10:I,x=r.onChange,N=x===void 0?zz:x,P=r.hideOnSinglePage,O=r.align,L=r.showPrevNextJumpers,M=L===void 0?!0:L,F=r.showQuickJumper,V=r.showLessItems,j=r.showTitle,z=j===void 0?!0:j,q=r.onShowSizeChange,W=q===void 0?zz:q,J=r.locale,te=J===void 0?TDe:J,ee=r.style,oe=r.totalBoundaryShowSizeChanger,pe=oe===void 0?50:oe,ne=r.disabled,ae=r.simple,re=r.showTotal,he=r.showSizeChanger,fe=he===void 0?b>pe:he,se=r.sizeChangerRender,de=r.pageSizeOptions,ve=r.itemRender,ie=ve===void 0?IDe:ve,be=r.jumpPrevIcon,Re=r.jumpNextIcon,Pe=r.prevIcon,Ie=r.nextIcon,xe=Ve.useRef(null),We=Sa(10,{value:T,defaultValue:w}),De=Ue(We,2),Ae=De[0],je=De[1],Je=Sa(1,{value:v,defaultValue:_,postState:function(Rn){return Math.max(1,Math.min(Rn,bh(void 0,Ae,b)))}}),Fe=Ue(Je,2),ke=Fe[0],ht=Fe[1],Ze=Ve.useState(ke),mt=Ue(Ze,2),Rt=mt[0],ut=mt[1];S.useEffect(function(){ut(ke)},[ke]);var ot=Math.max(1,ke-(V?3:5)),ze=Math.min(bh(void 0,Ae,b),ke+(V?3:5));function tt(nn,Rn){var Kn=nn||Ve.createElement("button",{type:"button","aria-label":Rn,className:"".concat(s,"-item-link")});return typeof nn=="function"&&(Kn=Ve.createElement(nn,_e({},r))),Kn}function bt(nn){var Rn=nn.target.value,Kn=bh(void 0,Ae,b),fi;return Rn===""?fi=Rn:Number.isNaN(Number(Rn))?fi=Rt:Rn>=Kn?fi=Kn:fi=Number(Rn),fi}function Nt(nn){return Wz(nn)&&nn!==ke&&Wz(b)&&b>0}var wt=b>Ae?F:!1;function Xt(nn){(nn.keyCode===lt.UP||nn.keyCode===lt.DOWN)&&nn.preventDefault()}function $t(nn){var Rn=bt(nn);switch(Rn!==Rt&&ut(Rn),nn.keyCode){case lt.ENTER:Jt(Rn);break;case lt.UP:Jt(Rn-1);break;case lt.DOWN:Jt(Rn+1);break}}function Lt(nn){Jt(bt(nn))}function Wt(nn){var Rn=bh(nn,Ae,b),Kn=ke>Rn&&Rn!==0?Rn:ke;je(nn),ut(Kn),W==null||W(ke,nn),ht(Kn),N==null||N(Kn,nn)}function Jt(nn){if(Nt(nn)&&!ne){var Rn=bh(void 0,Ae,b),Kn=nn;return nn>Rn?Kn=Rn:nn<1&&(Kn=1),Kn!==Rt&&ut(Kn),ht(Kn),N==null||N(Kn,Ae),Kn}return ke}var Ft=ke>1,yt=ke<bh(void 0,Ae,b);function It(){Ft&&Jt(ke-1)}function ft(){yt&&Jt(ke+1)}function Pt(){Jt(ot)}function Cn(){Jt(ze)}function bn(nn,Rn){if(nn.key==="Enter"||nn.charCode===lt.ENTER||nn.keyCode===lt.ENTER){for(var Kn=arguments.length,fi=new Array(Kn>2?Kn-2:0),ra=2;ra<Kn;ra++)fi[ra-2]=arguments[ra];Rn.apply(void 0,fi)}}function si(nn){bn(nn,It)}function Qr(nn){bn(nn,ft)}function vi(nn){bn(nn,Pt)}function xr(nn){bn(nn,Cn)}function nr(nn){var Rn=ie(nn,"prev",tt(Pe,"prev page"));return Ve.isValidElement(Rn)?Ve.cloneElement(Rn,{disabled:!Ft}):Rn}function ir(nn){var Rn=ie(nn,"next",tt(Ie,"next page"));return Ve.isValidElement(Rn)?Ve.cloneElement(Rn,{disabled:!yt}):Rn}function Tn(nn){(nn.type==="click"||nn.keyCode===lt.ENTER)&&Jt(Rt)}var Ut=null,kt=Wh(r,{aria:!0,data:!0}),Ct=re&&Ve.createElement("li",{className:"".concat(s,"-total-text")},re(b,[b===0?0:(ke-1)*Ae+1,ke*Ae>b?b:ke*Ae])),Pn=null,tn=bh(void 0,Ae,b);if(P&&b<=Ae)return null;var pt=[],gt={rootPrefixCls:s,onClick:Jt,onKeyPress:bn,showTitle:z,itemRender:ie,page:-1},Ht=ke-1>0?ke-1:0,Gt=ke+1<tn?ke+1:tn,Bt=F&&F.goButton,rn=on(ae)==="object"?ae.readOnly:!ae,or=Bt,Gn=null;ae&&(Bt&&(typeof Bt=="boolean"?or=Ve.createElement("button",{type:"button",onClick:Tn,onKeyUp:Tn},te.jump_to_confirm):or=Ve.createElement("span",{onClick:Tn,onKeyUp:Tn},Bt),or=Ve.createElement("li",{title:z?"".concat(te.jump_to).concat(ke,"/").concat(tn):null,className:"".concat(s,"-simple-pager")},or)),Gn=Ve.createElement("li",{title:z?"".concat(ke,"/").concat(tn):null,className:"".concat(s,"-simple-pager")},rn?Rt:Ve.createElement("input",{type:"text","aria-label":te.jump_to,value:Rt,disabled:ne,onKeyDown:Xt,onKeyUp:$t,onChange:$t,onBlur:Lt,size:3}),Ve.createElement("span",{className:"".concat(s,"-slash")},"/"),tn));var Fn=V?1:2;if(tn<=3+Fn*2){tn||pt.push(Ve.createElement(Ig,Qe({},gt,{key:"noPager",page:1,className:"".concat(s,"-item-disabled")})));for(var Zn=1;Zn<=tn;Zn+=1)pt.push(Ve.createElement(Ig,Qe({},gt,{key:Zn,page:Zn,active:ke===Zn})))}else{var $r=V?te.prev_3:te.prev_5,ci=V?te.next_3:te.next_5,Zr=ie(ot,"jump-prev",tt(be,"prev page")),Xi=ie(ze,"jump-next",tt(Re,"next page"));M&&(Ut=Zr?Ve.createElement("li",{title:z?$r:null,key:"prev",onClick:Pt,tabIndex:0,onKeyDown:vi,className:$e("".concat(s,"-jump-prev"),Ce({},"".concat(s,"-jump-prev-custom-icon"),!!be))},Zr):null,Pn=Xi?Ve.createElement("li",{title:z?ci:null,key:"next",onClick:Cn,tabIndex:0,onKeyDown:xr,className:$e("".concat(s,"-jump-next"),Ce({},"".concat(s,"-jump-next-custom-icon"),!!Re))},Xi):null);var dr=Math.max(1,ke-Fn),li=Math.min(ke+Fn,tn);ke-1<=Fn&&(li=1+Fn*2),tn-ke<=Fn&&(dr=tn-Fn*2);for(var _t=dr;_t<=li;_t+=1)pt.push(Ve.createElement(Ig,Qe({},gt,{key:_t,page:_t,active:ke===_t})));if(ke-1>=Fn*2&&ke!==1+2&&(pt[0]=Ve.cloneElement(pt[0],{className:$e("".concat(s,"-item-after-jump-prev"),pt[0].props.className)}),pt.unshift(Ut)),tn-ke>=Fn*2&&ke!==tn-2){var xt=pt[pt.length-1];pt[pt.length-1]=Ve.cloneElement(xt,{className:$e("".concat(s,"-item-before-jump-next"),xt.props.className)}),pt.push(Pn)}dr!==1&&pt.unshift(Ve.createElement(Ig,Qe({},gt,{key:1,page:1}))),li!==tn&&pt.push(Ve.createElement(Ig,Qe({},gt,{key:tn,page:tn})))}var gn=nr(Ht);if(gn){var Dn=!Ft||!tn;gn=Ve.createElement("li",{title:z?te.prev_page:null,onClick:It,tabIndex:Dn?null:0,onKeyDown:si,className:$e("".concat(s,"-prev"),Ce({},"".concat(s,"-disabled"),Dn)),"aria-disabled":Dn},gn)}var sn=ir(Gt);if(sn){var Ui,Bi;ae?(Ui=!yt,Bi=Ft?0:null):(Ui=!yt||!tn,Bi=Ui?null:0),sn=Ve.createElement("li",{title:z?te.next_page:null,onClick:ft,tabIndex:Bi,onKeyDown:Qr,className:$e("".concat(s,"-next"),Ce({},"".concat(s,"-disabled"),Ui)),"aria-disabled":Ui},sn)}var La=$e(s,f,Ce(Ce(Ce(Ce(Ce({},"".concat(s,"-start"),O==="start"),"".concat(s,"-center"),O==="center"),"".concat(s,"-end"),O==="end"),"".concat(s,"-simple"),ae),"".concat(s,"-disabled"),ne));return Ve.createElement("ul",Qe({className:La,style:ee,ref:xe},kt),Ct,gn,ae?Gn:pt,sn,Ve.createElement(wDe,{locale:te,rootPrefixCls:s,disabled:ne,selectPrefixCls:d,changeSize:Wt,pageSize:Ae,pageSizeOptions:de,quickGo:wt?Jt:null,goButton:or,showSizeChanger:fe,sizeChangerRender:se}))};const ODe=e=>{const{componentCls:r}=e;return{[`${r}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${r}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${r}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}}},[`&${r}-disabled`]:{cursor:"not-allowed",[`${r}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:e.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:e.colorBorder,backgroundColor:e.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:e.itemActiveBgDisabled},a:{color:e.itemActiveColorDisabled}}},[`${r}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${r}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${r}-simple-pager`]:{color:e.colorTextDisabled},[`${r}-jump-prev, ${r}-jump-next`]:{[`${r}-item-link-icon`]:{opacity:0},[`${r}-item-ellipsis`]:{opacity:1}}},[`&${r}-simple`]:{[`${r}-prev, ${r}-next`]:{[`&${r}-disabled ${r}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},xDe=e=>{const{componentCls:r}=e;return{[`&${r}-mini ${r}-total-text, &${r}-mini ${r}-simple-pager`]:{height:e.itemSizeSM,lineHeight:Ge(e.itemSizeSM)},[`&${r}-mini ${r}-item`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:Ge(e.calc(e.itemSizeSM).sub(2).equal())},[`&${r}-mini:not(${r}-disabled) ${r}-item:not(${r}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent","&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},[`&${r}-mini ${r}-prev, &${r}-mini ${r}-next`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:Ge(e.itemSizeSM)},[`&${r}-mini:not(${r}-disabled)`]:{[`${r}-prev, ${r}-next`]:{[`&:hover ${r}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${r}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${r}-disabled:hover ${r}-item-link`]:{backgroundColor:"transparent"}}},[`
    &${r}-mini ${r}-prev ${r}-item-link,
    &${r}-mini ${r}-next ${r}-item-link
    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:e.itemSizeSM,lineHeight:Ge(e.itemSizeSM)}},[`&${r}-mini ${r}-jump-prev, &${r}-mini ${r}-jump-next`]:{height:e.itemSizeSM,marginInlineEnd:0,lineHeight:Ge(e.itemSizeSM)},[`&${r}-mini ${r}-options`]:{marginInlineStart:e.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:e.miniOptionsSizeChangerTop},"&-quick-jumper":{height:e.itemSizeSM,lineHeight:Ge(e.itemSizeSM),input:Object.assign(Object.assign({},G2(e)),{width:e.paginationMiniQuickJumperInputWidth,height:e.controlHeightSM})}}}},NDe=e=>{const{componentCls:r}=e;return{[`
    &${r}-simple ${r}-prev,
    &${r}-simple ${r}-next
    `]:{height:e.itemSizeSM,lineHeight:Ge(e.itemSizeSM),verticalAlign:"top",[`${r}-item-link`]:{height:e.itemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive},"&::after":{height:e.itemSizeSM,lineHeight:Ge(e.itemSizeSM)}}},[`&${r}-simple ${r}-simple-pager`]:{display:"inline-block",height:e.itemSizeSM,marginInlineEnd:e.marginXS,input:{boxSizing:"border-box",height:"100%",padding:`0 ${Ge(e.paginationItemPaddingInline)}`,textAlign:"center",backgroundColor:e.itemInputBg,border:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,outline:"none",transition:`border-color ${e.motionDurationMid}`,color:"inherit","&:hover":{borderColor:e.colorPrimary},"&:focus":{borderColor:e.colorPrimaryHover,boxShadow:`${Ge(e.inputOutlineOffset)} 0 ${Ge(e.controlOutlineWidth)} ${e.controlOutline}`},"&[disabled]":{color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,cursor:"not-allowed"}}}}},PDe=e=>{const{componentCls:r}=e;return{[`${r}-jump-prev, ${r}-jump-next`]:{outline:0,[`${r}-item-container`]:{position:"relative",[`${r}-item-link-icon`]:{color:e.colorPrimary,fontSize:e.fontSizeSM,opacity:0,transition:`all ${e.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${r}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:e.colorTextDisabled,letterSpacing:e.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:e.paginationEllipsisTextIndent,opacity:1,transition:`all ${e.motionDurationMid}`}},"&:hover":{[`${r}-item-link-icon`]:{opacity:1},[`${r}-item-ellipsis`]:{opacity:0}}},[`
    ${r}-prev,
    ${r}-jump-prev,
    ${r}-jump-next
    `]:{marginInlineEnd:e.marginXS},[`
    ${r}-prev,
    ${r}-next,
    ${r}-jump-prev,
    ${r}-jump-next
    `]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,color:e.colorText,fontFamily:e.fontFamily,lineHeight:Ge(e.itemSize),textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:e.borderRadius,cursor:"pointer",transition:`all ${e.motionDurationMid}`},[`${r}-prev, ${r}-next`]:{outline:0,button:{color:e.colorText,cursor:"pointer",userSelect:"none"},[`${r}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:e.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${Ge(e.lineWidth)} ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:"none",transition:`all ${e.motionDurationMid}`},[`&:hover ${r}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${r}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${r}-disabled:hover`]:{[`${r}-item-link`]:{backgroundColor:"transparent"}}},[`${r}-slash`]:{marginInlineEnd:e.paginationSlashMarginInlineEnd,marginInlineStart:e.paginationSlashMarginInlineStart},[`${r}-options`]:{display:"inline-block",marginInlineStart:e.margin,verticalAlign:"middle","&-size-changer":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:e.controlHeight,marginInlineStart:e.marginXS,lineHeight:Ge(e.controlHeight),verticalAlign:"top",input:Object.assign(Object.assign(Object.assign({},K2(e)),W2(e,{borderColor:e.colorBorder,hoverBorderColor:e.colorPrimaryHover,activeBorderColor:e.colorPrimary,activeShadow:e.activeShadow})),{"&[disabled]":Object.assign({},vT(e)),width:e.calc(e.controlHeightLG).mul(1.25).equal(),height:e.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:e.marginXS,marginInlineEnd:e.marginXS})}}}},DDe=e=>{const{componentCls:r}=e;return{[`${r}-item`]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,marginInlineEnd:e.marginXS,fontFamily:e.fontFamily,lineHeight:Ge(e.calc(e.itemSize).sub(2).equal()),textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:e.itemBg,border:`${Ge(e.lineWidth)} ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${Ge(e.paginationItemPaddingInline)}`,color:e.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${r}-item-active)`]:{"&:hover":{transition:`all ${e.motionDurationMid}`,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},"&-active":{fontWeight:e.fontWeightStrong,backgroundColor:e.itemActiveBg,borderColor:e.colorPrimary,a:{color:e.colorPrimary},"&:hover":{borderColor:e.colorPrimaryHover},"&:hover a":{color:e.colorPrimaryHover}}}}},LDe=e=>{const{componentCls:r}=e;return{[r]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Os(e)),{display:"flex","&-start":{justifyContent:"start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"end"},"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${r}-total-text`]:{display:"inline-block",height:e.itemSize,marginInlineEnd:e.marginXS,lineHeight:Ge(e.calc(e.itemSize).sub(2).equal()),verticalAlign:"middle"}}),DDe(e)),PDe(e)),NDe(e)),xDe(e)),ODe(e)),{[`@media only screen and (max-width: ${e.screenLG}px)`]:{[`${r}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${e.screenSM}px)`]:{[`${r}-options`]:{display:"none"}}}),[`&${e.componentCls}-rtl`]:{direction:"rtl"}}},kDe=e=>{const{componentCls:r}=e;return{[`${r}:not(${r}-disabled)`]:{[`${r}-item`]:Object.assign({},Jb(e)),[`${r}-jump-prev, ${r}-jump-next`]:{"&:focus-visible":Object.assign({[`${r}-item-link-icon`]:{opacity:1},[`${r}-item-ellipsis`]:{opacity:0}},$C(e))},[`${r}-prev, ${r}-next`]:{[`&:focus-visible ${r}-item-link`]:Object.assign({},$C(e))}}}},bQ=e=>Object.assign({itemBg:e.colorBgContainer,itemSize:e.controlHeight,itemSizeSM:e.controlHeightSM,itemActiveBg:e.colorBgContainer,itemLinkBg:e.colorBgContainer,itemActiveColorDisabled:e.colorTextDisabled,itemActiveBgDisabled:e.controlItemBgActiveDisabled,itemInputBg:e.colorBgContainer,miniOptionsSizeChangerTop:0},rE(e)),TQ=e=>ai(e,{inputOutlineOffset:0,paginationMiniOptionsMarginInlineStart:e.calc(e.marginXXS).div(2).equal(),paginationMiniQuickJumperInputWidth:e.calc(e.controlHeightLG).mul(1.1).equal(),paginationItemPaddingInline:e.calc(e.marginXXS).mul(1.5).equal(),paginationEllipsisLetterSpacing:e.calc(e.marginXXS).div(2).equal(),paginationSlashMarginInlineStart:e.marginSM,paginationSlashMarginInlineEnd:e.marginSM,paginationEllipsisTextIndent:"0.13em"},nE(e)),MDe=To("Pagination",e=>{const r=TQ(e);return[LDe(r),kDe(r)]},bQ),FDe=e=>{const{componentCls:r}=e;return{[`${r}${r}-bordered${r}-disabled:not(${r}-mini)`]:{"&, &:hover":{[`${r}-item-link`]:{borderColor:e.colorBorder}},"&:focus-visible":{[`${r}-item-link`]:{borderColor:e.colorBorder}},[`${r}-item, ${r}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,[`&:hover:not(${r}-item-active)`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,a:{color:e.colorTextDisabled}},[`&${r}-item-active`]:{backgroundColor:e.itemActiveBgDisabled}},[`${r}-prev, ${r}-next`]:{"&:hover button":{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,color:e.colorTextDisabled},[`${r}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder}}},[`${r}${r}-bordered:not(${r}-mini)`]:{[`${r}-prev, ${r}-next`]:{"&:hover button":{borderColor:e.colorPrimaryHover,backgroundColor:e.itemBg},[`${r}-item-link`]:{backgroundColor:e.itemLinkBg,borderColor:e.colorBorder},[`&:hover ${r}-item-link`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,color:e.colorPrimary},[`&${r}-disabled`]:{[`${r}-item-link`]:{borderColor:e.colorBorder,color:e.colorTextDisabled}}},[`${r}-item`]:{backgroundColor:e.itemBg,border:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,[`&:hover:not(${r}-item-active)`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,a:{color:e.colorPrimary}},"&-active":{borderColor:e.colorPrimary}}}}},UDe=Qb(["Pagination","bordered"],e=>{const r=TQ(e);return[FDe(r)]},bQ);function Gz(e){return S.useMemo(()=>typeof e=="boolean"?[e,{}]:e&&typeof e=="object"?[!0,e]:[void 0,void 0],[e])}var BDe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const VDe=e=>{const{align:r,prefixCls:o,selectPrefixCls:s,className:c,rootClassName:d,style:f,size:v,locale:g,responsive:_,showSizeChanger:C,selectComponentClass:b,pageSizeOptions:T}=e,I=BDe(e,["align","prefixCls","selectPrefixCls","className","rootClassName","style","size","locale","responsive","showSizeChanger","selectComponentClass","pageSizeOptions"]),{xs:w}=F2(_),[,x]=ns(),{getPrefixCls:N,direction:P,showSizeChanger:O,className:L,style:M}=fc("pagination"),F=N("pagination",o),[V,j,z]=MDe(F),q=Su(v),W=q==="small"||!!(w&&!q&&_),[J]=Nm("Pagination",UY),te=Object.assign(Object.assign({},J),g),[ee,oe]=Gz(C),[pe,ne]=Gz(O),ae=ee??pe,re=oe??ne,he=b||ZAe,fe=S.useMemo(()=>T?T.map(Re=>Number(Re)):void 0,[T]),se=Re=>{var Pe;const{disabled:Ie,size:xe,onSizeChange:We,"aria-label":De,className:Ae,options:je}=Re,{className:Je,onChange:Fe}=re||{},ke=(Pe=je.find(ht=>String(ht.value)===String(xe)))===null||Pe===void 0?void 0:Pe.value;return S.createElement(he,Object.assign({disabled:Ie,showSearch:!0,popupMatchSelectWidth:!1,getPopupContainer:ht=>ht.parentNode,"aria-label":De,options:je},re,{value:ke,onChange:(ht,Ze)=>{We==null||We(ht),Fe==null||Fe(ht,Ze)},size:W?"small":"middle",className:$e(Ae,Je)}))},de=S.useMemo(()=>{const Re=S.createElement("span",{className:`${F}-item-ellipsis`},"•••"),Pe=S.createElement("button",{className:`${F}-item-link`,type:"button",tabIndex:-1},P==="rtl"?S.createElement(GC,null):S.createElement(XC,null)),Ie=S.createElement("button",{className:`${F}-item-link`,type:"button",tabIndex:-1},P==="rtl"?S.createElement(XC,null):S.createElement(GC,null)),xe=S.createElement("a",{className:`${F}-item-link`},S.createElement("div",{className:`${F}-item-container`},P==="rtl"?S.createElement(Hz,{className:`${F}-item-link-icon`}):S.createElement($z,{className:`${F}-item-link-icon`}),Re)),We=S.createElement("a",{className:`${F}-item-link`},S.createElement("div",{className:`${F}-item-container`},P==="rtl"?S.createElement($z,{className:`${F}-item-link-icon`}):S.createElement(Hz,{className:`${F}-item-link-icon`}),Re));return{prevIcon:Pe,nextIcon:Ie,jumpPrevIcon:xe,jumpNextIcon:We}},[P,F]),ve=N("select",s),ie=$e({[`${F}-${r}`]:!!r,[`${F}-mini`]:W,[`${F}-rtl`]:P==="rtl",[`${F}-bordered`]:x.wireframe},L,c,d,j,z),be=Object.assign(Object.assign({},M),f);return V(S.createElement(S.Fragment,null,x.wireframe&&S.createElement(UDe,{prefixCls:F}),S.createElement(ADe,Object.assign({},de,I,{style:be,prefixCls:F,selectPrefixCls:ve,className:ie,locale:te,pageSizeOptions:fe,showSizeChanger:ae,sizeChangerRender:se}))))},jDe=VDe,tb=100,RQ=tb/5,wQ=tb/2-RQ/2,HO=wQ*2*Math.PI,Kz=50,qz=e=>{const{dotClassName:r,style:o,hasCircleCls:s}=e;return S.createElement("circle",{className:$e(`${r}-circle`,{[`${r}-circle-bg`]:s}),r:wQ,cx:Kz,cy:Kz,strokeWidth:RQ,style:o})},$De=e=>{let{percent:r,prefixCls:o}=e;const s=`${o}-dot`,c=`${s}-holder`,d=`${c}-hidden`,[f,v]=S.useState(!1);Cr(()=>{r!==0&&v(!0)},[r!==0]);const g=Math.max(Math.min(r,100),0);if(!f)return null;const _={strokeDashoffset:`${HO/4}`,strokeDasharray:`${HO*g/100} ${HO*(100-g)/100}`};return S.createElement("span",{className:$e(c,`${s}-progress`,g<=0&&d)},S.createElement("svg",{viewBox:`0 0 ${tb} ${tb}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":g},S.createElement(qz,{dotClassName:s,hasCircleCls:!0}),S.createElement(qz,{dotClassName:s,style:_})))},HDe=$De;function zDe(e){const{prefixCls:r,percent:o=0}=e,s=`${r}-dot`,c=`${s}-holder`,d=`${c}-hidden`;return S.createElement(S.Fragment,null,S.createElement("span",{className:$e(c,o>0&&d)},S.createElement("span",{className:$e(s,`${r}-dot-spin`)},[1,2,3,4].map(f=>S.createElement("i",{className:`${r}-dot-item`,key:f})))),S.createElement(HDe,{prefixCls:r,percent:o}))}function WDe(e){const{prefixCls:r,indicator:o,percent:s}=e,c=`${r}-dot`;return o&&S.isValidElement(o)?dc(o,{className:$e(o.props.className,c),percent:s}):S.createElement(zDe,{prefixCls:r,percent:s})}const GDe=new mr("antSpinMove",{to:{opacity:1}}),KDe=new mr("antRotate",{to:{transform:"rotate(405deg)"}}),qDe=e=>{const{componentCls:r,calc:o}=e;return{[r]:Object.assign(Object.assign({},Os(e)),{position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`,"&-spinning":{position:"relative",display:"inline-block",opacity:1},[`${r}-text`]:{fontSize:e.fontSize,paddingTop:o(o(e.dotSize).sub(e.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:e.colorBgMask,zIndex:e.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${e.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[r]:{[`${r}-dot-holder`]:{color:e.colorWhite},[`${r}-text`]:{color:e.colorTextLightSolid}}},"&-nested-loading":{position:"relative",[`> div > ${r}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,[`${r}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:o(e.dotSize).mul(-1).div(2).equal()},[`${r}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${e.colorBgContainer}`},[`&${r}-show-text ${r}-dot`]:{marginTop:o(e.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${r}-dot`]:{margin:o(e.dotSizeSM).mul(-1).div(2).equal()},[`${r}-text`]:{paddingTop:o(o(e.dotSizeSM).sub(e.fontSize)).div(2).add(2).equal()},[`&${r}-show-text ${r}-dot`]:{marginTop:o(e.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${r}-dot`]:{margin:o(e.dotSizeLG).mul(-1).div(2).equal()},[`${r}-text`]:{paddingTop:o(o(e.dotSizeLG).sub(e.fontSize)).div(2).add(2).equal()},[`&${r}-show-text ${r}-dot`]:{marginTop:o(e.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${r}-container`]:{position:"relative",transition:`opacity ${e.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${r}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:e.spinDotDefault},[`${r}-dot-holder`]:{width:"1em",height:"1em",fontSize:e.dotSize,display:"inline-block",transition:`transform ${e.motionDurationSlow} ease, opacity ${e.motionDurationSlow} ease`,transformOrigin:"50% 50%",lineHeight:1,color:e.colorPrimary,"&-hidden":{transform:"scale(0.3)",opacity:0}},[`${r}-dot-progress`]:{position:"absolute",inset:0},[`${r}-dot`]:{position:"relative",display:"inline-block",fontSize:e.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:o(e.dotSize).sub(o(e.marginXXS).div(2)).div(2).equal(),height:o(e.dotSize).sub(o(e.marginXXS).div(2)).div(2).equal(),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:GDe,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:KDe,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map(s=>`${s} ${e.motionDurationSlow} ease`).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:e.colorFillSecondary}},[`&-sm ${r}-dot`]:{"&, &-holder":{fontSize:e.dotSizeSM}},[`&-sm ${r}-dot-holder`]:{i:{width:o(o(e.dotSizeSM).sub(o(e.marginXXS).div(2))).div(2).equal(),height:o(o(e.dotSizeSM).sub(o(e.marginXXS).div(2))).div(2).equal()}},[`&-lg ${r}-dot`]:{"&, &-holder":{fontSize:e.dotSizeLG}},[`&-lg ${r}-dot-holder`]:{i:{width:o(o(e.dotSizeLG).sub(e.marginXXS)).div(2).equal(),height:o(o(e.dotSizeLG).sub(e.marginXXS)).div(2).equal()}},[`&${r}-show-text ${r}-text`]:{display:"block"}})}},YDe=e=>{const{controlHeightLG:r,controlHeight:o}=e;return{contentHeight:400,dotSize:r/2,dotSizeSM:r*.35,dotSizeLG:o}},XDe=To("Spin",e=>{const r=ai(e,{spinDotDefault:e.colorTextDescription});return[qDe(r)]},YDe),JDe=200,Yz=[[30,.05],[70,.03],[96,.01]];function QDe(e,r){const[o,s]=S.useState(0),c=S.useRef(null),d=r==="auto";return S.useEffect(()=>(d&&e&&(s(0),c.current=setInterval(()=>{s(f=>{const v=100-f;for(let g=0;g<Yz.length;g+=1){const[_,C]=Yz[g];if(f<=_)return f+v*C}return f})},JDe)),()=>{clearInterval(c.current)}),[d,e]),d?o:r}var ZDe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};let IQ;function e2e(e,r){return!!e&&!!r&&!Number.isNaN(Number(r))}const AQ=e=>{var r;const{prefixCls:o,spinning:s=!0,delay:c=0,className:d,rootClassName:f,size:v="default",tip:g,wrapperClassName:_,style:C,children:b,fullscreen:T=!1,indicator:I,percent:w}=e,x=ZDe(e,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen","indicator","percent"]),{getPrefixCls:N,direction:P,className:O,style:L,indicator:M}=fc("spin"),F=N("spin",o),[V,j,z]=XDe(F),[q,W]=S.useState(()=>s&&!e2e(s,c)),J=QDe(q,w);S.useEffect(()=>{if(s){const re=cNe(c,()=>{W(!0)});return re(),()=>{var he;(he=re==null?void 0:re.cancel)===null||he===void 0||he.call(re)}}W(!1)},[c,s]);const te=S.useMemo(()=>typeof b<"u"&&!T,[b,T]),ee=$e(F,O,{[`${F}-sm`]:v==="small",[`${F}-lg`]:v==="large",[`${F}-spinning`]:q,[`${F}-show-text`]:!!g,[`${F}-rtl`]:P==="rtl"},d,!T&&f,j,z),oe=$e(`${F}-container`,{[`${F}-blur`]:q}),pe=(r=I??M)!==null&&r!==void 0?r:IQ,ne=Object.assign(Object.assign({},L),C),ae=S.createElement("div",Object.assign({},x,{style:ne,className:ee,"aria-live":"polite","aria-busy":q}),S.createElement(WDe,{prefixCls:F,indicator:pe,percent:J}),g&&(te||T)?S.createElement("div",{className:`${F}-text`},g):null);return V(te?S.createElement("div",Object.assign({},x,{className:$e(`${F}-nested-loading`,_,j,z)}),q&&S.createElement("div",{key:"loading"},ae),S.createElement("div",{className:oe,key:"container"},b)):T?S.createElement("div",{className:$e(`${F}-fullscreen`,{[`${F}-fullscreen-show`]:q},f,j,z)},ae):ae)};AQ.setDefaultIndicator=e=>{IQ=e};const t2e=AQ,J2=Ve.createContext({});J2.Consumer;var OQ=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const n2e=e=>{var{prefixCls:r,className:o,avatar:s,title:c,description:d}=e,f=OQ(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:v}=S.useContext(br),g=v("list",r),_=$e(`${g}-item-meta`,o),C=Ve.createElement("div",{className:`${g}-item-meta-content`},c&&Ve.createElement("h4",{className:`${g}-item-meta-title`},c),d&&Ve.createElement("div",{className:`${g}-item-meta-description`},d));return Ve.createElement("div",Object.assign({},f,{className:_}),s&&Ve.createElement("div",{className:`${g}-item-meta-avatar`},s),(c||d)&&C)},r2e=Ve.forwardRef((e,r)=>{const{prefixCls:o,children:s,actions:c,extra:d,styles:f,className:v,classNames:g,colStyle:_}=e,C=OQ(e,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:b,itemLayout:T}=S.useContext(J2),{getPrefixCls:I,list:w}=S.useContext(br),x=j=>{var z,q;return $e((q=(z=w==null?void 0:w.item)===null||z===void 0?void 0:z.classNames)===null||q===void 0?void 0:q[j],g==null?void 0:g[j])},N=j=>{var z,q;return Object.assign(Object.assign({},(q=(z=w==null?void 0:w.item)===null||z===void 0?void 0:z.styles)===null||q===void 0?void 0:q[j]),f==null?void 0:f[j])},P=()=>{let j=!1;return S.Children.forEach(s,z=>{typeof z=="string"&&(j=!0)}),j&&S.Children.count(s)>1},O=()=>T==="vertical"?!!d:!P(),L=I("list",o),M=c&&c.length>0&&Ve.createElement("ul",{className:$e(`${L}-item-action`,x("actions")),key:"actions",style:N("actions")},c.map((j,z)=>Ve.createElement("li",{key:`${L}-item-action-${z}`},j,z!==c.length-1&&Ve.createElement("em",{className:`${L}-item-action-split`})))),F=b?"div":"li",V=Ve.createElement(F,Object.assign({},C,b?{}:{ref:r},{className:$e(`${L}-item`,{[`${L}-item-no-flex`]:!O()},v)}),T==="vertical"&&d?[Ve.createElement("div",{className:`${L}-item-main`,key:"content"},s,M),Ve.createElement("div",{className:$e(`${L}-item-extra`,x("extra")),key:"extra",style:N("extra")},d)]:[s,M,dc(d,{key:"extra"})]);return b?Ve.createElement(q2,{ref:r,flex:1,style:_},V):V}),xQ=r2e;xQ.Meta=n2e;const i2e=xQ,o2e=e=>{const{listBorderedCls:r,componentCls:o,paddingLG:s,margin:c,itemPaddingSM:d,itemPaddingLG:f,marginLG:v,borderRadiusLG:g}=e;return{[r]:{border:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:g,[`${o}-header,${o}-footer,${o}-item`]:{paddingInline:s},[`${o}-pagination`]:{margin:`${Ge(c)} ${Ge(v)}`}},[`${r}${o}-sm`]:{[`${o}-item,${o}-header,${o}-footer`]:{padding:d}},[`${r}${o}-lg`]:{[`${o}-item,${o}-header,${o}-footer`]:{padding:f}}}},a2e=e=>{const{componentCls:r,screenSM:o,screenMD:s,marginLG:c,marginSM:d,margin:f}=e;return{[`@media screen and (max-width:${s}px)`]:{[r]:{[`${r}-item`]:{[`${r}-item-action`]:{marginInlineStart:c}}},[`${r}-vertical`]:{[`${r}-item`]:{[`${r}-item-extra`]:{marginInlineStart:c}}}},[`@media screen and (max-width: ${o}px)`]:{[r]:{[`${r}-item`]:{flexWrap:"wrap",[`${r}-action`]:{marginInlineStart:d}}},[`${r}-vertical`]:{[`${r}-item`]:{flexWrap:"wrap-reverse",[`${r}-item-main`]:{minWidth:e.contentWidth},[`${r}-item-extra`]:{margin:`auto auto ${Ge(f)}`}}}}}},s2e=e=>{const{componentCls:r,antCls:o,controlHeight:s,minHeight:c,paddingSM:d,marginLG:f,padding:v,itemPadding:g,colorPrimary:_,itemPaddingSM:C,itemPaddingLG:b,paddingXS:T,margin:I,colorText:w,colorTextDescription:x,motionDurationSlow:N,lineWidth:P,headerBg:O,footerBg:L,emptyTextPadding:M,metaMarginBottom:F,avatarMarginRight:V,titleMarginBottom:j,descriptionFontSize:z}=e;return{[r]:Object.assign(Object.assign({},Os(e)),{position:"relative","*":{outline:"none"},[`${r}-header`]:{background:O},[`${r}-footer`]:{background:L},[`${r}-header, ${r}-footer`]:{paddingBlock:d},[`${r}-pagination`]:{marginBlockStart:f,[`${o}-pagination-options`]:{textAlign:"start"}},[`${r}-spin`]:{minHeight:c,textAlign:"center"},[`${r}-items`]:{margin:0,padding:0,listStyle:"none"},[`${r}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:g,color:w,[`${r}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${r}-item-meta-avatar`]:{marginInlineEnd:V},[`${r}-item-meta-content`]:{flex:"1 0",width:0,color:w},[`${r}-item-meta-title`]:{margin:`0 0 ${Ge(e.marginXXS)} 0`,color:w,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:w,transition:`all ${N}`,"&:hover":{color:_}}},[`${r}-item-meta-description`]:{color:x,fontSize:z,lineHeight:e.lineHeight}},[`${r}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${Ge(T)}`,color:x,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${r}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:P,height:e.calc(e.fontHeight).sub(e.calc(e.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${r}-empty`]:{padding:`${Ge(v)} 0`,color:x,fontSize:e.fontSizeSM,textAlign:"center"},[`${r}-empty-text`]:{padding:M,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${r}-item-no-flex`]:{display:"block"}}),[`${r}-grid ${o}-col > ${r}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:I,paddingBlock:0,borderBlockEnd:"none"},[`${r}-vertical ${r}-item`]:{alignItems:"initial",[`${r}-item-main`]:{display:"block",flex:1},[`${r}-item-extra`]:{marginInlineStart:f},[`${r}-item-meta`]:{marginBlockEnd:F,[`${r}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:j,color:w,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${r}-item-action`]:{marginBlockStart:v,marginInlineStart:"auto","> li":{padding:`0 ${Ge(v)}`,"&:first-child":{paddingInlineStart:0}}}},[`${r}-split ${r}-item`]:{borderBlockEnd:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${r}-split ${r}-header`]:{borderBlockEnd:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${r}-split${r}-empty ${r}-footer`]:{borderTop:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${r}-loading ${r}-spin-nested-loading`]:{minHeight:s},[`${r}-split${r}-something-after-last-item ${o}-spin-container > ${r}-items > ${r}-item:last-child`]:{borderBlockEnd:`${Ge(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${r}-lg ${r}-item`]:{padding:b},[`${r}-sm ${r}-item`]:{padding:C},[`${r}:not(${r}-vertical)`]:{[`${r}-item-no-flex`]:{[`${r}-item-action`]:{float:"right"}}}}},c2e=e=>({contentWidth:220,itemPadding:`${Ge(e.paddingContentVertical)} 0`,itemPaddingSM:`${Ge(e.paddingContentVerticalSM)} ${Ge(e.paddingContentHorizontal)}`,itemPaddingLG:`${Ge(e.paddingContentVerticalLG)} ${Ge(e.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize}),l2e=To("List",e=>{const r=ai(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[s2e(r),o2e(r),a2e(r)]},c2e);var u2e=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function d2e(e,r){var{pagination:o=!1,prefixCls:s,bordered:c=!1,split:d=!0,className:f,rootClassName:v,style:g,children:_,itemLayout:C,loadMore:b,grid:T,dataSource:I=[],size:w,header:x,footer:N,loading:P=!1,rowKey:O,renderItem:L,locale:M}=e,F=u2e(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const V=o&&typeof o=="object"?o:{},[j,z]=S.useState(V.defaultCurrent||1),[q,W]=S.useState(V.defaultPageSize||10),{getPrefixCls:J,direction:te,className:ee,style:oe}=fc("list"),{renderEmpty:pe}=S.useContext(br),ne={current:1,total:0},ae=ot=>(ze,tt)=>{var bt;z(ze),W(tt),o&&((bt=o==null?void 0:o[ot])===null||bt===void 0||bt.call(o,ze,tt))},re=ae("onChange"),he=ae("onShowSizeChange"),fe=(ot,ze)=>{if(!L)return null;let tt;return typeof O=="function"?tt=O(ot):O?tt=ot[O]:tt=ot.key,tt||(tt=`list-item-${ze}`),S.createElement(S.Fragment,{key:tt},L(ot,ze))},se=()=>!!(b||o||N),de=J("list",s),[ve,ie,be]=l2e(de);let Re=P;typeof Re=="boolean"&&(Re={spinning:Re});const Pe=!!(Re!=null&&Re.spinning),Ie=Su(w);let xe="";switch(Ie){case"large":xe="lg";break;case"small":xe="sm";break}const We=$e(de,{[`${de}-vertical`]:C==="vertical",[`${de}-${xe}`]:xe,[`${de}-split`]:d,[`${de}-bordered`]:c,[`${de}-loading`]:Pe,[`${de}-grid`]:!!T,[`${de}-something-after-last-item`]:se(),[`${de}-rtl`]:te==="rtl"},ee,f,v,ie,be),De=mDe(ne,{total:I.length,current:j,pageSize:q},o||{}),Ae=Math.ceil(De.total/De.pageSize);De.current>Ae&&(De.current=Ae);const je=o&&S.createElement("div",{className:$e(`${de}-pagination`)},S.createElement(jDe,Object.assign({align:"end"},De,{onChange:re,onShowSizeChange:he})));let Je=vt(I);o&&I.length>(De.current-1)*De.pageSize&&(Je=vt(I).splice((De.current-1)*De.pageSize,De.pageSize));const Fe=Object.keys(T||{}).some(ot=>["xs","sm","md","lg","xl","xxl"].includes(ot)),ke=F2(Fe),ht=S.useMemo(()=>{for(let ot=0;ot<Kh.length;ot+=1){const ze=Kh[ot];if(ke[ze])return ze}},[ke]),Ze=S.useMemo(()=>{if(!T)return;const ot=ht&&T[ht]?T[ht]:T.column;if(ot)return{width:`${100/ot}%`,maxWidth:`${100/ot}%`}},[JSON.stringify(T),ht]);let mt=Pe&&S.createElement("div",{style:{minHeight:53}});if(Je.length>0){const ot=Je.map((ze,tt)=>fe(ze,tt));mt=T?S.createElement(aQ,{gutter:T.gutter},S.Children.map(ot,ze=>S.createElement("div",{key:ze==null?void 0:ze.key,style:Ze},ze))):S.createElement("ul",{className:`${de}-items`},ot)}else!_&&!Pe&&(mt=S.createElement("div",{className:`${de}-empty-text`},(M==null?void 0:M.emptyText)||(pe==null?void 0:pe("List"))||S.createElement(CJ,{componentName:"List"})));const Rt=De.position||"bottom",ut=S.useMemo(()=>({grid:T,itemLayout:C}),[JSON.stringify(T),C]);return ve(S.createElement(J2.Provider,{value:ut},S.createElement("div",Object.assign({ref:r,style:Object.assign(Object.assign({},oe),g),className:We},F),(Rt==="top"||Rt==="both")&&je,x&&S.createElement("div",{className:`${de}-header`},x),S.createElement(t2e,Object.assign({},Re),mt,_),N&&S.createElement("div",{className:`${de}-footer`},N),b||(Rt==="bottom"||Rt==="both")&&je)))}const h2e=S.forwardRef(d2e),NQ=h2e;NQ.Item=i2e;const Xz=NQ;function f2e(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&e==null?[]:Array.isArray(e)?e:[e]}let kc=null,aC=e=>e(),nb=[],Dv={};function Jz(){const{getContainer:e,rtl:r,maxCount:o,top:s,bottom:c,showProgress:d,pauseOnHover:f}=Dv,v=(e==null?void 0:e())||document.body;return{getContainer:()=>v,rtl:r,maxCount:o,top:s,bottom:c,showProgress:d,pauseOnHover:f}}const p2e=Ve.forwardRef((e,r)=>{const{notificationConfig:o,sync:s}=e,{getPrefixCls:c}=S.useContext(br),d=Dv.prefixCls||c("notification"),f=S.useContext(bwe),[v,g]=oJ(Object.assign(Object.assign(Object.assign({},o),{prefixCls:d}),f.notification));return Ve.useEffect(s,[]),Ve.useImperativeHandle(r,()=>{const _=Object.assign({},v);return Object.keys(_).forEach(C=>{_[C]=function(){return s(),v[C].apply(v,arguments)}}),{instance:_,sync:s}}),g}),m2e=Ve.forwardRef((e,r)=>{const[o,s]=Ve.useState(Jz),c=()=>{s(Jz)};Ve.useEffect(c,[]);const d=BCe(),f=d.getRootPrefixCls(),v=d.getIconPrefixCls(),g=d.getTheme(),_=Ve.createElement(p2e,{ref:r,sync:c,notificationConfig:o});return Ve.createElement(tf,{prefixCls:f,iconPrefixCls:v,theme:g},d.holderRender?d.holderRender(_):_)});function Q2(){if(!kc){const e=document.createDocumentFragment(),r={fragment:e};kc=r,aC(()=>{wX()(Ve.createElement(m2e,{ref:s=>{const{instance:c,sync:d}=s||{};Promise.resolve().then(()=>{!r.instance&&c&&(r.instance=c,r.sync=d,Q2())})}}),e)});return}kc.instance&&(nb.forEach(e=>{switch(e.type){case"open":{aC(()=>{kc.instance.open(Object.assign(Object.assign({},Dv),e.config))});break}case"destroy":aC(()=>{kc==null||kc.instance.destroy(e.key)});break}}),nb=[])}function g2e(e){Dv=Object.assign(Object.assign({},Dv),e),aC(()=>{var r;(r=kc==null?void 0:kc.sync)===null||r===void 0||r.call(kc)})}function PQ(e){nb.push({type:"open",config:e}),Q2()}const v2e=e=>{nb.push({type:"destroy",key:e}),Q2()},E2e=["success","info","warning","error"],_2e={open:PQ,destroy:v2e,config:g2e,useNotification:Cwe,_InternalPanelDoNotUseOrYouWillBeFired:hwe},DQ=_2e;E2e.forEach(e=>{DQ[e]=r=>PQ(Object.assign(Object.assign({},r),{type:e}))});const S2e=DQ;var y2e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const C2e=y2e;var b2e=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:C2e}))},T2e=S.forwardRef(b2e);const R2e=T2e;var w2e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};const I2e=w2e;var A2e=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:I2e}))},O2e=S.forwardRef(A2e);const x2e=O2e;var N2e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};const P2e=N2e;var D2e=function(r,o){return S.createElement(ao,Qe({},r,{ref:o,icon:P2e}))},L2e=S.forwardRef(D2e);const k2e=L2e,M2e=(e,r,o,s)=>{const{titleMarginBottom:c,fontWeightStrong:d}=s;return{marginBottom:c,color:o,fontWeight:d,fontSize:e,lineHeight:r}},F2e=e=>{const r=[1,2,3,4,5],o={};return r.forEach(s=>{o[`
      h${s}&,
      div&-h${s},
      div&-h${s} > textarea,
      h${s}
    `]=M2e(e[`fontSizeHeading${s}`],e[`lineHeightHeading${s}`],e.colorTextHeading,e)}),o},U2e=e=>{const{componentCls:r}=e;return{"a&, a":Object.assign(Object.assign({},ZY(e)),{userSelect:"text",[`&[disabled], &${r}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:e.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},B2e=e=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:BC[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:e.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),V2e=e=>{const{componentCls:r,paddingSM:o}=e,s=o;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:e.calc(e.paddingSM).mul(-1).equal(),marginTop:e.calc(s).mul(-1).equal(),marginBottom:`calc(1em - ${Ge(s)})`},[`${r}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:e.calc(e.marginXS).add(2).equal(),insetBlockEnd:e.marginXS,color:e.colorTextDescription,fontWeight:"normal",fontSize:e.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},j2e=e=>({[`${e.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:e.colorSuccess}},[`${e.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),$2e=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),H2e=e=>{const{componentCls:r,titleMarginTop:o}=e;return{[r]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorText,wordBreak:"break-word",lineHeight:e.lineHeight,[`&${r}-secondary`]:{color:e.colorTextDescription},[`&${r}-success`]:{color:e.colorSuccess},[`&${r}-warning`]:{color:e.colorWarning},[`&${r}-danger`]:{color:e.colorError,"a&:active, a&:focus":{color:e.colorErrorActive},"a&:hover":{color:e.colorErrorHover}},[`&${r}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},F2e(e)),{[`
      & + h1${r},
      & + h2${r},
      & + h3${r},
      & + h4${r},
      & + h5${r}
      `]:{marginTop:o},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:o}}}),B2e(e)),U2e(e)),{[`
        ${r}-expand,
        ${r}-collapse,
        ${r}-edit,
        ${r}-copy
      `]:Object.assign(Object.assign({},ZY(e)),{marginInlineStart:e.marginXXS})}),V2e(e)),j2e(e)),$2e()),{"&-rtl":{direction:"rtl"}})}},z2e=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),LQ=To("Typography",e=>[H2e(e)],z2e),W2e=e=>{const{prefixCls:r,"aria-label":o,className:s,style:c,direction:d,maxLength:f,autoSize:v=!0,value:g,onSave:_,onCancel:C,onEnd:b,component:T,enterIcon:I=S.createElement(k2e,null)}=e,w=S.useRef(null),x=S.useRef(!1),N=S.useRef(null),[P,O]=S.useState(g);S.useEffect(()=>{O(g)},[g]),S.useEffect(()=>{var oe;if(!((oe=w.current)===null||oe===void 0)&&oe.resizableTextArea){const{textArea:pe}=w.current.resizableTextArea;pe.focus();const{length:ne}=pe.value;pe.setSelectionRange(ne,ne)}},[]);const L=oe=>{let{target:pe}=oe;O(pe.value.replace(/[\n\r]/g,""))},M=()=>{x.current=!0},F=()=>{x.current=!1},V=oe=>{let{keyCode:pe}=oe;x.current||(N.current=pe)},j=()=>{_(P.trim())},z=oe=>{let{keyCode:pe,ctrlKey:ne,altKey:ae,metaKey:re,shiftKey:he}=oe;N.current!==pe||x.current||ne||ae||re||he||(pe===lt.ENTER?(j(),b==null||b()):pe===lt.ESC&&C())},q=()=>{j()},[W,J,te]=LQ(r),ee=$e(r,`${r}-edit-content`,{[`${r}-rtl`]:d==="rtl",[`${r}-${T}`]:!!T},s,J,te);return W(S.createElement("div",{className:ee,style:c},S.createElement(yQ,{ref:w,maxLength:f,value:P,onChange:L,onKeyDown:V,onKeyUp:z,onCompositionStart:M,onCompositionEnd:F,onBlur:q,"aria-label":o,rows:1,autoSize:v}),I!==null?dc(I,{className:`${r}-edit-content-confirm`}):null))},G2e=W2e;var K2e=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var r=document.activeElement,o=[],s=0;s<e.rangeCount;s++)o.push(e.getRangeAt(s));switch(r.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":r.blur();break;default:r=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||o.forEach(function(c){e.addRange(c)}),r&&r.focus()}},q2e=K2e,Qz={"text/plain":"Text","text/html":"Url",default:"Text"},Y2e="Copy to clipboard: #{key}, Enter";function X2e(e){var r=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,r)}function J2e(e,r){var o,s,c,d,f,v,g=!1;r||(r={}),o=r.debug||!1;try{c=q2e(),d=document.createRange(),f=document.getSelection(),v=document.createElement("span"),v.textContent=e,v.ariaHidden="true",v.style.all="unset",v.style.position="fixed",v.style.top=0,v.style.clip="rect(0, 0, 0, 0)",v.style.whiteSpace="pre",v.style.webkitUserSelect="text",v.style.MozUserSelect="text",v.style.msUserSelect="text",v.style.userSelect="text",v.addEventListener("copy",function(C){if(C.stopPropagation(),r.format)if(C.preventDefault(),typeof C.clipboardData>"u"){o&&console.warn("unable to use e.clipboardData"),o&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var b=Qz[r.format]||Qz.default;window.clipboardData.setData(b,e)}else C.clipboardData.clearData(),C.clipboardData.setData(r.format,e);r.onCopy&&(C.preventDefault(),r.onCopy(C.clipboardData))}),document.body.appendChild(v),d.selectNodeContents(v),f.addRange(d);var _=document.execCommand("copy");if(!_)throw new Error("copy command was unsuccessful");g=!0}catch(C){o&&console.error("unable to copy using execCommand: ",C),o&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(r.format||"text",e),r.onCopy&&r.onCopy(window.clipboardData),g=!0}catch(b){o&&console.error("unable to copy using clipboardData: ",b),o&&console.error("falling back to prompt"),s=X2e("message"in r?r.message:Y2e),window.prompt(s,e)}}finally{f&&(typeof f.removeRange=="function"?f.removeRange(d):f.removeAllRanges()),v&&document.body.removeChild(v),c()}return g}var Q2e=J2e;const Z2e=wd(Q2e);var eLe=globalThis&&globalThis.__awaiter||function(e,r,o,s){function c(d){return d instanceof o?d:new o(function(f){f(d)})}return new(o||(o=Promise))(function(d,f){function v(C){try{_(s.next(C))}catch(b){f(b)}}function g(C){try{_(s.throw(C))}catch(b){f(b)}}function _(C){C.done?d(C.value):c(C.value).then(v,g)}_((s=s.apply(e,r||[])).next())})};const tLe=e=>{let{copyConfig:r,children:o}=e;const[s,c]=S.useState(!1),[d,f]=S.useState(!1),v=S.useRef(null),g=()=>{v.current&&clearTimeout(v.current)},_={};r.format&&(_.format=r.format),S.useEffect(()=>g,[]);const C=uo(b=>eLe(void 0,void 0,void 0,function*(){var T;b==null||b.preventDefault(),b==null||b.stopPropagation(),f(!0);try{const I=typeof r.text=="function"?yield r.text():r.text;Z2e(I||f2e(o,!0).join("")||"",_),f(!1),c(!0),g(),v.current=setTimeout(()=>{c(!1)},3e3),(T=r.onCopy)===null||T===void 0||T.call(r,b)}catch(I){throw f(!1),I}}));return{copied:s,copyLoading:d,onClick:C}},nLe=tLe;function zO(e,r){return S.useMemo(()=>{const o=!!e;return[o,Object.assign(Object.assign({},r),o&&typeof e=="object"?e:null)]},[e])}const rLe=e=>{const r=S.useRef(void 0);return S.useEffect(()=>{r.current=e}),r.current},iLe=rLe,oLe=(e,r,o)=>S.useMemo(()=>e===!0?{title:r??o}:S.isValidElement(e)?{title:e}:typeof e=="object"?Object.assign({title:r??o},e):{title:e},[e,r,o]),aLe=oLe;var sLe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const cLe=S.forwardRef((e,r)=>{const{prefixCls:o,component:s="article",className:c,rootClassName:d,setContentRef:f,children:v,direction:g,style:_}=e,C=sLe(e,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:b,direction:T,className:I,style:w}=fc("typography"),x=g??T,N=f?qc(r,f):r,P=b("typography",o),[O,L,M]=LQ(P),F=$e(P,I,{[`${P}-rtl`]:x==="rtl"},c,d,L,M),V=Object.assign(Object.assign({},w),_);return O(S.createElement(s,Object.assign({className:F,style:V,ref:N},C),v))}),kQ=cLe;function Zz(e){return e===!1?[!1,!1]:Array.isArray(e)?e:[e]}function WO(e,r,o){return e===!0||e===void 0?r:e||o&&r}function lLe(e){const r=document.createElement("em");e.appendChild(r);const o=e.getBoundingClientRect(),s=r.getBoundingClientRect();return e.removeChild(r),o.left>s.left||s.right>o.right||o.top>s.top||s.bottom>o.bottom}const Z2=e=>["string","number"].includes(typeof e),uLe=e=>{let{prefixCls:r,copied:o,locale:s,iconOnly:c,tooltips:d,icon:f,tabIndex:v,onCopy:g,loading:_}=e;const C=Zz(d),b=Zz(f),{copied:T,copy:I}=s??{},w=o?T:I,x=WO(C[o?1:0],w),N=typeof x=="string"?x:w;return S.createElement(Zv,{title:x},S.createElement("button",{type:"button",className:$e(`${r}-copy`,{[`${r}-copy-success`]:o,[`${r}-copy-icon-only`]:c}),onClick:g,"aria-label":N,tabIndex:v},o?WO(b[1],S.createElement(wJ,null),!0):WO(b[0],_?S.createElement(nT,null):S.createElement(R2e,null),!0)))},dLe=uLe,Iy=S.forwardRef((e,r)=>{let{style:o,children:s}=e;const c=S.useRef(null);return S.useImperativeHandle(r,()=>({isExceed:()=>{const d=c.current;return d.scrollHeight>d.clientHeight},getHeight:()=>c.current.clientHeight})),S.createElement("span",{"aria-hidden":!0,ref:c,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},o)},s)}),hLe=e=>e.reduce((r,o)=>r+(Z2(o)?String(o).length:1),0);function eW(e,r){let o=0;const s=[];for(let c=0;c<e.length;c+=1){if(o===r)return s;const d=e[c],v=Z2(d)?String(d).length:1,g=o+v;if(g>r){const _=r-o;return s.push(String(d).slice(0,_)),s}s.push(d),o=g}return e}const GO=0,KO=1,qO=2,YO=3,tW=4,Ay={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function fLe(e){const{enableMeasure:r,width:o,text:s,children:c,rows:d,expanded:f,miscDeps:v,onEllipsis:g}=e,_=S.useMemo(()=>zc(s),[s]),C=S.useMemo(()=>hLe(_),[s]),b=S.useMemo(()=>c(_,!1),[s]),[T,I]=S.useState(null),w=S.useRef(null),x=S.useRef(null),N=S.useRef(null),P=S.useRef(null),O=S.useRef(null),[L,M]=S.useState(!1),[F,V]=S.useState(GO),[j,z]=S.useState(0),[q,W]=S.useState(null);Cr(()=>{V(r&&o&&C?KO:GO)},[o,s,d,r,_]),Cr(()=>{var oe,pe,ne,ae;if(F===KO){V(qO);const re=x.current&&getComputedStyle(x.current).whiteSpace;W(re)}else if(F===qO){const re=!!(!((oe=N.current)===null||oe===void 0)&&oe.isExceed());V(re?YO:tW),I(re?[0,C]:null),M(re);const he=((pe=N.current)===null||pe===void 0?void 0:pe.getHeight())||0,fe=d===1?0:((ne=P.current)===null||ne===void 0?void 0:ne.getHeight())||0,se=((ae=O.current)===null||ae===void 0?void 0:ae.getHeight())||0,de=Math.max(he,fe+se);z(de+1),g(re)}},[F]);const J=T?Math.ceil((T[0]+T[1])/2):0;Cr(()=>{var oe;const[pe,ne]=T||[0,0];if(pe!==ne){const re=(((oe=w.current)===null||oe===void 0?void 0:oe.getHeight())||0)>j;let he=J;ne-pe===1&&(he=re?pe:ne),I(re?[pe,he]:[he,ne])}},[T,J]);const te=S.useMemo(()=>{if(!r)return c(_,!1);if(F!==YO||!T||T[0]!==T[1]){const oe=c(_,!1);return[tW,GO].includes(F)?oe:S.createElement("span",{style:Object.assign(Object.assign({},Ay),{WebkitLineClamp:d})},oe)}return c(f?_:eW(_,T[0]),L)},[f,F,T,_].concat(vt(v))),ee={width:o,margin:0,padding:0,whiteSpace:q==="nowrap"?"normal":"inherit"};return S.createElement(S.Fragment,null,te,F===qO&&S.createElement(S.Fragment,null,S.createElement(Iy,{style:Object.assign(Object.assign(Object.assign({},ee),Ay),{WebkitLineClamp:d}),ref:N},b),S.createElement(Iy,{style:Object.assign(Object.assign(Object.assign({},ee),Ay),{WebkitLineClamp:d-1}),ref:P},b),S.createElement(Iy,{style:Object.assign(Object.assign(Object.assign({},ee),Ay),{WebkitLineClamp:1}),ref:O},c([],!0))),F===YO&&T&&T[0]!==T[1]&&S.createElement(Iy,{style:Object.assign(Object.assign({},ee),{top:400}),ref:w},c(eW(_,J),!0)),F===KO&&S.createElement("span",{style:{whiteSpace:"inherit"},ref:x}))}const pLe=e=>{let{enableEllipsis:r,isEllipsis:o,children:s,tooltipProps:c}=e;return!(c!=null&&c.title)||!r?s:S.createElement(Zv,Object.assign({open:o?void 0:!1},c),s)},mLe=pLe;var gLe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};function vLe(e,r){let{mark:o,code:s,underline:c,delete:d,strong:f,keyboard:v,italic:g}=e,_=r;function C(b,T){T&&(_=S.createElement(b,{},_))}return C("strong",f),C("u",c),C("del",d),C("code",s),C("mark",o),C("kbd",v),C("i",g),_}const ELe="...",_Le=S.forwardRef((e,r)=>{var o;const{prefixCls:s,className:c,style:d,type:f,disabled:v,children:g,ellipsis:_,editable:C,copyable:b,component:T,title:I}=e,w=gLe(e,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:x,direction:N}=S.useContext(br),[P]=Nm("Text"),O=S.useRef(null),L=S.useRef(null),M=x("typography",s),F=na(w,["mark","code","delete","underline","strong","keyboard","italic"]),[V,j]=zO(C),[z,q]=Sa(!1,{value:j.editing}),{triggerType:W=["icon"]}=j,J=ft=>{var Pt;ft&&((Pt=j.onStart)===null||Pt===void 0||Pt.call(j)),q(ft)},te=iLe(z);Cr(()=>{var ft;!z&&te&&((ft=L.current)===null||ft===void 0||ft.focus())},[z]);const ee=ft=>{ft==null||ft.preventDefault(),J(!0)},oe=ft=>{var Pt;(Pt=j.onChange)===null||Pt===void 0||Pt.call(j,ft),J(!1)},pe=()=>{var ft;(ft=j.onCancel)===null||ft===void 0||ft.call(j),J(!1)},[ne,ae]=zO(b),{copied:re,copyLoading:he,onClick:fe}=nLe({copyConfig:ae,children:g}),[se,de]=S.useState(!1),[ve,ie]=S.useState(!1),[be,Re]=S.useState(!1),[Pe,Ie]=S.useState(!1),[xe,We]=S.useState(!0),[De,Ae]=zO(_,{expandable:!1,symbol:ft=>ft?P==null?void 0:P.collapse:P==null?void 0:P.expand}),[je,Je]=Sa(Ae.defaultExpanded||!1,{value:Ae.expanded}),Fe=De&&(!je||Ae.expandable==="collapsible"),{rows:ke=1}=Ae,ht=S.useMemo(()=>Fe&&(Ae.suffix!==void 0||Ae.onEllipsis||Ae.expandable||V||ne),[Fe,Ae,V,ne]);Cr(()=>{De&&!ht&&(de($9("webkitLineClamp")),ie($9("textOverflow")))},[ht,De]);const[Ze,mt]=S.useState(Fe),Rt=S.useMemo(()=>ht?!1:ke===1?ve:se,[ht,ve,se]);Cr(()=>{mt(Rt&&Fe)},[Rt,Fe]);const ut=Fe&&(Ze?Pe:be),ot=Fe&&ke===1&&Ze,ze=Fe&&ke>1&&Ze,tt=(ft,Pt)=>{var Cn;Je(Pt.expanded),(Cn=Ae.onExpand)===null||Cn===void 0||Cn.call(Ae,ft,Pt)},[bt,Nt]=S.useState(0),wt=ft=>{let{offsetWidth:Pt}=ft;Nt(Pt)},Xt=ft=>{var Pt;Re(ft),be!==ft&&((Pt=Ae.onEllipsis)===null||Pt===void 0||Pt.call(Ae,ft))};S.useEffect(()=>{const ft=O.current;if(De&&Ze&&ft){const Pt=lLe(ft);Pe!==Pt&&Ie(Pt)}},[De,Ze,g,ze,xe,bt]),S.useEffect(()=>{const ft=O.current;if(typeof IntersectionObserver>"u"||!ft||!Ze||!Fe)return;const Pt=new IntersectionObserver(()=>{We(!!ft.offsetParent)});return Pt.observe(ft),()=>{Pt.disconnect()}},[Ze,Fe]);const $t=aLe(Ae.tooltip,j.text,g),Lt=S.useMemo(()=>{if(!(!De||Ze))return[j.text,g,I,$t.title].find(Z2)},[De,Ze,I,$t.title,ut]);if(z)return S.createElement(G2e,{value:(o=j.text)!==null&&o!==void 0?o:typeof g=="string"?g:"",onSave:oe,onCancel:pe,onEnd:j.onEnd,prefixCls:M,className:c,style:d,direction:N,component:T,maxLength:j.maxLength,autoSize:j.autoSize,enterIcon:j.enterIcon});const Wt=()=>{const{expandable:ft,symbol:Pt}=Ae;return ft?S.createElement("button",{type:"button",key:"expand",className:`${M}-${je?"collapse":"expand"}`,onClick:Cn=>tt(Cn,{expanded:!je}),"aria-label":je?P.collapse:P==null?void 0:P.expand},typeof Pt=="function"?Pt(je):Pt):null},Jt=()=>{if(!V)return;const{icon:ft,tooltip:Pt,tabIndex:Cn}=j,bn=zc(Pt)[0]||(P==null?void 0:P.edit),si=typeof bn=="string"?bn:"";return W.includes("icon")?S.createElement(Zv,{key:"edit",title:Pt===!1?"":bn},S.createElement("button",{type:"button",ref:L,className:`${M}-edit`,onClick:ee,"aria-label":si,tabIndex:Cn},ft||S.createElement(x2e,{role:"button"}))):null},Ft=()=>ne?S.createElement(dLe,Object.assign({key:"copy"},ae,{prefixCls:M,copied:re,locale:P,onCopy:fe,loading:he,iconOnly:g==null})):null,yt=ft=>[ft&&Wt(),Jt(),Ft()],It=ft=>[ft&&!je&&S.createElement("span",{"aria-hidden":!0,key:"ellipsis"},ELe),Ae.suffix,yt(ft)];return S.createElement(Eu,{onResize:wt,disabled:!Fe},ft=>S.createElement(mLe,{tooltipProps:$t,enableEllipsis:Fe,isEllipsis:ut},S.createElement(kQ,Object.assign({className:$e({[`${M}-${f}`]:f,[`${M}-disabled`]:v,[`${M}-ellipsis`]:De,[`${M}-ellipsis-single-line`]:ot,[`${M}-ellipsis-multiple-line`]:ze},c),prefixCls:s,style:Object.assign(Object.assign({},d),{WebkitLineClamp:ze?ke:void 0}),component:T,ref:qc(ft,O,r),direction:N,onClick:W.includes("text")?ee:void 0,"aria-label":Lt==null?void 0:Lt.toString(),title:I},F),S.createElement(fLe,{enableMeasure:Fe&&!Ze,text:g,rows:ke,width:bt,onEllipsis:Xt,expanded:je,miscDeps:[re,je,he,V,ne,P]},(Pt,Cn)=>vLe(e,S.createElement(S.Fragment,null,Pt.length>0&&Cn&&!je&&Lt?S.createElement("span",{key:"show-content","aria-hidden":!0},Pt):Pt,It(Cn)))))))}),ST=_Le;var SLe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const yLe=S.forwardRef((e,r)=>{var{ellipsis:o,rel:s}=e,c=SLe(e,["ellipsis","rel"]);const d=Object.assign(Object.assign({},c),{rel:s===void 0&&c.target==="_blank"?"noopener noreferrer":s});return delete d.navigate,S.createElement(ST,Object.assign({},d,{ref:r,ellipsis:!!o,component:"a"}))}),CLe=yLe,bLe=S.forwardRef((e,r)=>S.createElement(ST,Object.assign({ref:r},e,{component:"div"}))),TLe=bLe;var RLe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const wLe=(e,r)=>{var{ellipsis:o}=e,s=RLe(e,["ellipsis"]);const c=S.useMemo(()=>o&&typeof o=="object"?na(o,["expandable","rows"]):o,[o]);return S.createElement(ST,Object.assign({ref:r},s,{ellipsis:c,component:"span"}))},ILe=S.forwardRef(wLe);var ALe=globalThis&&globalThis.__rest||function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)r.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(o[s[c]]=e[s[c]]);return o};const OLe=[1,2,3,4,5],xLe=S.forwardRef((e,r)=>{const{level:o=1}=e,s=ALe(e,["level"]),c=OLe.includes(o)?`h${o}`:"h1";return S.createElement(ST,Object.assign({ref:r},s,{component:c}))}),NLe=xLe,iE=kQ;iE.Text=ILe;iE.Link=CLe;iE.Title=NLe;iE.Paragraph=TLe;const Fo=iE;function MQ(e){var r,o,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(r=0;r<e.length;r++)e[r]&&(o=MQ(e[r]))&&(s&&(s+=" "),s+=o);else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function eL(){for(var e,r,o=0,s="";o<arguments.length;)(e=arguments[o++])&&(r=MQ(e))&&(s&&(s+=" "),s+=r);return s}const PLe=S.forwardRef(({className:e,children:r},o)=>ue.jsx("div",{className:eL(e,"b-1 b-solid b-coolgray-6 rd of-hidden relative"),ref:o,style:{width:288,height:216},children:r})),sc=Object.assign(S.forwardRef(({className:e,children:r},o)=>ue.jsx("div",{className:eL(e,"flex-1 p-10 p-t-4 flex gap-5"),ref:o,children:r})),{Item:PLe}),Fi=({children:e})=>ue.jsx("div",{className:"h-screen flex flex-col",children:e}),mu=({children:e})=>ue.jsx("samp",{className:"z-2 inline-flex items-center gap-1 absolute bottom-0 bg-black c-white px-1 text-sm",children:e}),Oy=14,xy=8,XO=8,JO=4;function DLe({volumeLevel:e=0,noise:r=.075,...o}){const[s,c]=S.useState(0);return S.useEffect(()=>{if(e&&r){const d=Math.max(0,Math.min(1,r)),f=setInterval(()=>{c(e+Math.random()*d*(Math.random()>.5?1:-1))},50);return()=>clearInterval(f)}},[e,r]),ue.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...o,children:[ue.jsx("defs",{children:ue.jsx("clipPath",{id:"icon-mic-v-clip",children:ue.jsx("rect",{height:Oy,rx:xy/2,width:xy,x:XO,y:JO})})}),ue.jsx("path",{d:"M0 0h24v24H0z",fill:"#999CA3",opacity:".01"}),ue.jsx("rect",{clipPath:"url(#icon-mic-v-clip)",fill:"#fff",height:Oy,width:xy,x:XO,y:JO}),ue.jsx("path",{d:"M4 16.625h2v-1.25H4v1.25Zm6 4h4v-1.25h-4v1.25Zm8-4h2v-1.25h-2v1.25Zm-4 4A4.625 4.625 0 0 0 18.625 16h-1.25A3.375 3.375 0 0 1 14 19.375v1.25ZM5.375 16A4.625 4.625 0 0 0 10 20.625v-1.25A3.375 3.375 0 0 1 6.625 16h-1.25Z",fill:"#fff"}),ue.jsx("g",{clipPath:"url(#icon-mic-v-clip)",children:ue.jsx("rect",{fill:"#44AD00",height:Oy*2,style:{transform:`translateY(${(1-s)*Oy}px)`,transition:"transform .1s"},width:xy,x:XO,y:JO})})]})}const LLe=S.memo(function(r){return ue.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...r,children:[ue.jsx("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),ue.jsx("path",{clipRule:"evenodd",d:"M19.277 16.625H20v-1.25h-1.973l1.25 1.25Zm-3.239 2.065.89.89a4.602 4.602 0 0 1-2.716 1.04l-.212.005h-4a4.626 4.626 0 0 1-4.55-3.787l-.033-.213H4v-1.25h2c.345 0 .625.28.625.625a3.375 3.375 0 0 0 3.19 3.37l.185.005h4a3.36 3.36 0 0 0 2.038-.685Zm.587-4.717V8a4.625 4.625 0 0 0-8.5-2.526l.911.91a3.374 3.374 0 0 1 6.281.991H14v1.25h1.375v.75H14v1.25h1.375v.75h-1.348l1.25 1.25h.098v.098l1.25 1.25Zm-2.587 2.717.89.89A4.625 4.625 0 0 1 7.375 14v-3.973l1.25 1.25v.098h.098l1.25 1.25H8.625V14a3.375 3.375 0 0 0 5.413 2.69Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})}),kLe=S.memo(function(r){return ue.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...r,children:[ue.jsx("circle",{cx:"12",cy:"11",r:"7",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),ue.jsx("circle",{cx:"12",cy:"11",r:"3",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),ue.jsx("circle",{cx:"14.625",cy:"6.625",fill:"#fff",r:".625"}),ue.jsx("path",{d:"M7 18.25a8.004 8.004 0 0 0 10 0",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"})]})}),MLe=S.memo(function(r){return ue.jsxs("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...r,children:[ue.jsx("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),ue.jsx("path",{clipRule:"evenodd",d:"m15.72 18.373.91.909a8.63 8.63 0 0 1-9.788-.364l-.232-.18.78-.976a7.38 7.38 0 0 0 8.33.61Zm2.434-2.87A7.625 7.625 0 0 0 7.497 4.846l.897.896a6.375 6.375 0 0 1 8.864 8.864l.896.897Zm-3.857 1.446.952.951A7.625 7.625 0 0 1 5.1 7.751l.951.952a6.375 6.375 0 0 0 8.246 8.246Zm.956-4.348a3.625 3.625 0 0 0-4.854-4.854l.964.964a2.378 2.378 0 0 1 2.926 2.926l.964.964Zm-.628-5.351a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})});function FLe({track:e,deviceId:r,...o}){const s=hb(e);return S.useEffect(()=>{s&&r!=null&&s.setDevice(r).catch(console.warn)},[r,s]),ue.jsx(pb,{track:e,...o})}function ULe({track:e,deviceId:r,videoPlayerConfig:o,...s}){const c=hb(e);return S.useEffect(()=>{c&&r!=null&&c.setDevice(r).catch(console.warn)},[r,c]),ue.jsx(Bv,{track:e,videoPlayerConfig:o,...s})}function tL({micOn:e,cameraOn:r,audioTrack:o,videoTrack:s,playAudio:c=!1,playVideo:d,micDeviceId:f,cameraDeviceId:v,volume:g,cover:_,children:C,videoPlayerConfig:b,style:T,...I}){const w=Tm(mb,T);return d=d??!!r,c=c??!!e,ue.jsxs("div",{...I,style:w,children:[ue.jsx(ULe,{deviceId:v,disabled:!r,play:d,track:s,videoPlayerConfig:b}),ue.jsx(FLe,{deviceId:f,disabled:!e,play:c,track:o,volume:g}),_&&!r&&ue.jsx(gb,{cover:_}),ue.jsx("div",{style:Uv,children:C})]})}function oE({track:e,playVideo:r,cover:o,client:s,style:c,children:d,videoPlayerConfig:f,...v}){var b,T;const g=Tm(mb,c),C=(T=(b=ws(s).remoteUsers)==null?void 0:b.find(I=>I.uid===(e==null?void 0:e.getUserId())))==null?void 0:T.hasVideo;return r=r??C,ue.jsxs("div",{...v,style:g,children:[ue.jsx(uD,{play:r,track:e,videoPlayerConfig:f}),o&&!r&&ue.jsx(gb,{cover:o}),ue.jsx("div",{style:Uv,children:d})]})}const nL=({published:e,total:r})=>ue.jsx("div",{className:"p-4 text-xl",children:ue.jsxs("span",{className:"inline-flex items-center gap-1 py-2 px-3 rd b-1 b-solid",children:[ue.jsx("i",{className:"i-lucide-users"}),ue.jsxs("samp",{className:"text-base",children:[e,"/",r]})]})});var rL={exports:{}};rL.exports;(function(e){(function(r,o,s){function c(g){var _=this,C=v();_.next=function(){var b=2091639*_.s0+_.c*23283064365386963e-26;return _.s0=_.s1,_.s1=_.s2,_.s2=b-(_.c=b|0)},_.c=1,_.s0=C(" "),_.s1=C(" "),_.s2=C(" "),_.s0-=C(g),_.s0<0&&(_.s0+=1),_.s1-=C(g),_.s1<0&&(_.s1+=1),_.s2-=C(g),_.s2<0&&(_.s2+=1),C=null}function d(g,_){return _.c=g.c,_.s0=g.s0,_.s1=g.s1,_.s2=g.s2,_}function f(g,_){var C=new c(g),b=_&&_.state,T=C.next;return T.int32=function(){return C.next()*4294967296|0},T.double=function(){return T()+(T()*2097152|0)*11102230246251565e-32},T.quick=T,b&&(typeof b=="object"&&d(b,C),T.state=function(){return d(C,{})}),T}function v(){var g=4022871197,_=function(C){C=String(C);for(var b=0;b<C.length;b++){g+=C.charCodeAt(b);var T=.02519603282416938*g;g=T>>>0,T-=g,T*=g,g=T>>>0,T-=g,g+=T*4294967296}return(g>>>0)*23283064365386963e-26};return _}o&&o.exports?o.exports=f:s&&s.amd?s(function(){return f}):this.alea=f})(In,e,!1)})(rL);var BLe=rL.exports,iL={exports:{}};iL.exports;(function(e){(function(r,o,s){function c(v){var g=this,_="";g.x=0,g.y=0,g.z=0,g.w=0,g.next=function(){var b=g.x^g.x<<11;return g.x=g.y,g.y=g.z,g.z=g.w,g.w^=g.w>>>19^b^b>>>8},v===(v|0)?g.x=v:_+=v;for(var C=0;C<_.length+64;C++)g.x^=_.charCodeAt(C)|0,g.next()}function d(v,g){return g.x=v.x,g.y=v.y,g.z=v.z,g.w=v.w,g}function f(v,g){var _=new c(v),C=g&&g.state,b=function(){return(_.next()>>>0)/4294967296};return b.double=function(){do var T=_.next()>>>11,I=(_.next()>>>0)/4294967296,w=(T+I)/(1<<21);while(w===0);return w},b.int32=_.next,b.quick=b,C&&(typeof C=="object"&&d(C,_),b.state=function(){return d(_,{})}),b}o&&o.exports?o.exports=f:s&&s.amd?s(function(){return f}):this.xor128=f})(In,e,!1)})(iL);var VLe=iL.exports,oL={exports:{}};oL.exports;(function(e){(function(r,o,s){function c(v){var g=this,_="";g.next=function(){var b=g.x^g.x>>>2;return g.x=g.y,g.y=g.z,g.z=g.w,g.w=g.v,(g.d=g.d+362437|0)+(g.v=g.v^g.v<<4^(b^b<<1))|0},g.x=0,g.y=0,g.z=0,g.w=0,g.v=0,v===(v|0)?g.x=v:_+=v;for(var C=0;C<_.length+64;C++)g.x^=_.charCodeAt(C)|0,C==_.length&&(g.d=g.x<<10^g.x>>>4),g.next()}function d(v,g){return g.x=v.x,g.y=v.y,g.z=v.z,g.w=v.w,g.v=v.v,g.d=v.d,g}function f(v,g){var _=new c(v),C=g&&g.state,b=function(){return(_.next()>>>0)/4294967296};return b.double=function(){do var T=_.next()>>>11,I=(_.next()>>>0)/4294967296,w=(T+I)/(1<<21);while(w===0);return w},b.int32=_.next,b.quick=b,C&&(typeof C=="object"&&d(C,_),b.state=function(){return d(_,{})}),b}o&&o.exports?o.exports=f:s&&s.amd?s(function(){return f}):this.xorwow=f})(In,e,!1)})(oL);var jLe=oL.exports,aL={exports:{}};aL.exports;(function(e){(function(r,o,s){function c(v){var g=this;g.next=function(){var C=g.x,b=g.i,T,I;return T=C[b],T^=T>>>7,I=T^T<<24,T=C[b+1&7],I^=T^T>>>10,T=C[b+3&7],I^=T^T>>>3,T=C[b+4&7],I^=T^T<<7,T=C[b+7&7],T=T^T<<13,I^=T^T<<9,C[b]=I,g.i=b+1&7,I};function _(C,b){var T,I=[];if(b===(b|0))I[0]=b;else for(b=""+b,T=0;T<b.length;++T)I[T&7]=I[T&7]<<15^b.charCodeAt(T)+I[T+1&7]<<13;for(;I.length<8;)I.push(0);for(T=0;T<8&&I[T]===0;++T);for(T==8?I[7]=-1:I[T],C.x=I,C.i=0,T=256;T>0;--T)C.next()}_(g,v)}function d(v,g){return g.x=v.x.slice(),g.i=v.i,g}function f(v,g){v==null&&(v=+new Date);var _=new c(v),C=g&&g.state,b=function(){return(_.next()>>>0)/4294967296};return b.double=function(){do var T=_.next()>>>11,I=(_.next()>>>0)/4294967296,w=(T+I)/(1<<21);while(w===0);return w},b.int32=_.next,b.quick=b,C&&(C.x&&d(C,_),b.state=function(){return d(_,{})}),b}o&&o.exports?o.exports=f:s&&s.amd?s(function(){return f}):this.xorshift7=f})(In,e,!1)})(aL);var $Le=aL.exports,sL={exports:{}};sL.exports;(function(e){(function(r,o,s){function c(v){var g=this;g.next=function(){var C=g.w,b=g.X,T=g.i,I,w;return g.w=C=C+1640531527|0,w=b[T+34&127],I=b[T=T+1&127],w^=w<<13,I^=I<<17,w^=w>>>15,I^=I>>>12,w=b[T]=w^I,g.i=T,w+(C^C>>>16)|0};function _(C,b){var T,I,w,x,N,P=[],O=128;for(b===(b|0)?(I=b,b=null):(b=b+"\0",I=0,O=Math.max(O,b.length)),w=0,x=-32;x<O;++x)b&&(I^=b.charCodeAt((x+32)%b.length)),x===0&&(N=I),I^=I<<10,I^=I>>>15,I^=I<<4,I^=I>>>13,x>=0&&(N=N+1640531527|0,T=P[x&127]^=I+N,w=T==0?w+1:0);for(w>=128&&(P[(b&&b.length||0)&127]=-1),w=127,x=4*128;x>0;--x)I=P[w+34&127],T=P[w=w+1&127],I^=I<<13,T^=T<<17,I^=I>>>15,T^=T>>>12,P[w]=I^T;C.w=N,C.X=P,C.i=w}_(g,v)}function d(v,g){return g.i=v.i,g.w=v.w,g.X=v.X.slice(),g}function f(v,g){v==null&&(v=+new Date);var _=new c(v),C=g&&g.state,b=function(){return(_.next()>>>0)/4294967296};return b.double=function(){do var T=_.next()>>>11,I=(_.next()>>>0)/4294967296,w=(T+I)/(1<<21);while(w===0);return w},b.int32=_.next,b.quick=b,C&&(C.X&&d(C,_),b.state=function(){return d(_,{})}),b}o&&o.exports?o.exports=f:s&&s.amd?s(function(){return f}):this.xor4096=f})(In,e,!1)})(sL);var HLe=sL.exports,cL={exports:{}};cL.exports;(function(e){(function(r,o,s){function c(v){var g=this,_="";g.next=function(){var b=g.b,T=g.c,I=g.d,w=g.a;return b=b<<25^b>>>7^T,T=T-I|0,I=I<<24^I>>>8^w,w=w-b|0,g.b=b=b<<20^b>>>12^T,g.c=T=T-I|0,g.d=I<<16^T>>>16^w,g.a=w-b|0},g.a=0,g.b=0,g.c=-1640531527,g.d=1367130551,v===Math.floor(v)?(g.a=v/4294967296|0,g.b=v|0):_+=v;for(var C=0;C<_.length+20;C++)g.b^=_.charCodeAt(C)|0,g.next()}function d(v,g){return g.a=v.a,g.b=v.b,g.c=v.c,g.d=v.d,g}function f(v,g){var _=new c(v),C=g&&g.state,b=function(){return(_.next()>>>0)/4294967296};return b.double=function(){do var T=_.next()>>>11,I=(_.next()>>>0)/4294967296,w=(T+I)/(1<<21);while(w===0);return w},b.int32=_.next,b.quick=b,C&&(typeof C=="object"&&d(C,_),b.state=function(){return d(_,{})}),b}o&&o.exports?o.exports=f:s&&s.amd?s(function(){return f}):this.tychei=f})(In,e,!1)})(cL);var zLe=cL.exports,FQ={exports:{}};(function(e){(function(r,o,s){var c=256,d=6,f=52,v="random",g=s.pow(c,d),_=s.pow(2,f),C=_*2,b=c-1,T;function I(M,F,V){var j=[];F=F==!0?{entropy:!0}:F||{};var z=P(N(F.entropy?[M,L(o)]:M??O(),3),j),q=new w(j),W=function(){for(var J=q.g(d),te=g,ee=0;J<_;)J=(J+ee)*c,te*=c,ee=q.g(1);for(;J>=C;)J/=2,te/=2,ee>>>=1;return(J+ee)/te};return W.int32=function(){return q.g(4)|0},W.quick=function(){return q.g(4)/4294967296},W.double=W,P(L(q.S),o),(F.pass||V||function(J,te,ee,oe){return oe&&(oe.S&&x(oe,q),J.state=function(){return x(q,{})}),ee?(s[v]=J,te):J})(W,z,"global"in F?F.global:this==s,F.state)}function w(M){var F,V=M.length,j=this,z=0,q=j.i=j.j=0,W=j.S=[];for(V||(M=[V++]);z<c;)W[z]=z++;for(z=0;z<c;z++)W[z]=W[q=b&q+M[z%V]+(F=W[z])],W[q]=F;(j.g=function(J){for(var te,ee=0,oe=j.i,pe=j.j,ne=j.S;J--;)te=ne[oe=b&oe+1],ee=ee*c+ne[b&(ne[oe]=ne[pe=b&pe+te])+(ne[pe]=te)];return j.i=oe,j.j=pe,ee})(c)}function x(M,F){return F.i=M.i,F.j=M.j,F.S=M.S.slice(),F}function N(M,F){var V=[],j=typeof M,z;if(F&&j=="object")for(z in M)try{V.push(N(M[z],F-1))}catch{}return V.length?V:j=="string"?M:M+"\0"}function P(M,F){for(var V=M+"",j,z=0;z<V.length;)F[b&z]=b&(j^=F[b&z]*19)+V.charCodeAt(z++);return L(F)}function O(){try{var M;return T&&(M=T.randomBytes)||(M=new Uint8Array(c),(r.crypto||r.msCrypto).getRandomValues(M)),L(M)}catch{var F=r.navigator,V=F&&F.plugins;return[+new Date,r,V,r.screen,L(o)]}}function L(M){return String.fromCharCode.apply(0,M)}P(s.random(),o),e.exports?e.exports=I:s["seed"+v]=I})(typeof self<"u"?self:In,[],Math)})(FQ);var WLe=FQ.exports,GLe=BLe,KLe=VLe,qLe=jLe,YLe=$Le,XLe=HLe,JLe=zLe,rf=WLe;rf.alea=GLe;rf.xor128=KLe;rf.xorwow=qLe;rf.xorshift7=YLe;rf.xor4096=XLe;rf.tychei=JLe;var QLe=rf;const UQ=wd(QLe);let BQ=UQ();function ZLe(){return BQ()}function nW(e){BQ=UQ(e)}function VQ(e,r){const o=Array.isArray(e)?()=>eke(e):e;return(r==null?void 0:r.length)===void 0?o(0):Array.from({length:r.length},(s,c)=>o(c))}function eke(e){return e[Math.floor(ZLe()*e.length)]}function tke(e,r){return VQ(e,r)}var rW={withAccents:{male:["Adrián","Ægir","Álvaro","André","Andrés","Árni","Asbjørn","Björn","César","Daníel","Davíð","Emílio","Fañch","François","František","Gísli","Götz","Guðjón","Guðmundur","Günter","Halldór","Hans-Jörg","Hans-Jürgen","Hüseyin","Iñaki","János","Jesús","Jiří","Jóhann","Jóhannes","Jokūbas","Jón","José","Jörn","Julião","Jürgen","Kristján","Maël","Magnús","Mathéo","Mátyás","Michał","Noël","Nuñez","Ólafur","Óscar","Øyvind","Páll","Paweł","Pétur","Ramón","Raúl","René","Ruairí","Rubén","Seán","Sérgio","Sigurður","Sönke","Stefán","Tomáš","Þorsteinn"],female:["Ædel","Agnès","Alícia","Änne","Antónia","Ásta","Auður","Cäcilia","Chloë","Claúdia","Dörte","Elín","Elísabet","Eliška","Františka","Glória","Grażyna","Guðbjörg","Guðný","Guðrún","Henriëtte","Ingibjörg","Íris","Jóhanna","Jóna","Júlia","Käte","Katrín","Kolbrún","Kristín","KŠthe","Letícia","Lídia","Lúcia","Małgorzata","Margrét","María","Mónica","Natália","Ólöf","Patrícia","Ragnheiður","Renée","Ružena","Siân","Sigríður","Sigrún","Sílvia","Sørina","Věra","Virgínia","Zoë","Þóra","Þórunn"]},withoutAccents:{male:["Abdul","Abdullahi","Abubakar","Adam","Adamu","Adiy","Ahmad","Ajay","Akira","Alan","Alberto","Alejandro","Aleksander","Aleksandr","Aleksey","Alex","Alexander","Alexey","Ali","Aliyu","Aminu","Amit","Amiyr","Amiyt","Amnuai","Amphon","Anah","Anan","Andreas","Andrew","Andrey","Andri","Andries","Andrzej","Anil","Anthony","Anton","Antonio","Arnar","Artur","Artyom","Arun","Ashok","Atli","Avraham","Bartosz","Bello","Bernd","Bin","Birgir","Bjarni","Blessing","Bongani","Brian","Bunmi","Carlos","Carol","Chan","Chao","Charles","Charoen","Chen","Cheng","Christian","Christopher","Colin","Daniel","Daniyel","Dariusz","David","Denis","Dennis","Diego","Dieter","Dilip","Dinesh","Dmitriy","Dmitry","Einar","Eliyahu","Emmanuel","Evgeniy","Fernando","Fran","Francis","Francisco","Francisco-Javier","Frank","Franz","Gang","Gareth","Gary","George","Gerhard","Graham","Grzegorz","Gunnar","Guy","Haim","Haiyan","Hans","Hans-Ulrich","Haruna","Hassan","Heike","Heinz","Helgi","Helmut","Hendrik","Herbert","Hideo","Hiromi","Hiroshi","Hong","Horst","Hui","Ian","Ibrahim","Idris","Igor","Ilya","Isa","Isaac","Isah","Ivan","Jabulani","Jacek","Jacobus","Jakub","James","Jan","Janusz","Javier","Jean","Jerzy","Jesus","Jason","Jianguo","Jianhua","Jianjun","Jianping","Jin","Joan","Johan","Johannes","John","Jonathan","Jorge","Jose","Jose-Antonio","Jose-Luis","Jose-Manuel","Jose-Maria","Josef","Joseph","Joyce","Juan","Kabiru","Kai","Kamil","Karen","Karl","Karl-Heinz","Katsumi","Kazuo","Kelvin","Kenji","Kenneth","Kevin","Kiran","Kirill","Kiyoshi","Kjartan","Klaus","Ko","Koichi","Koji","Konstantin","Koshi","Krishna","Kristinn","Krzysztof","Kun","Lakshmi","Lan","Laxmi","Lei","Li","Lihua","Lijun","Lilian","Lin","Ling","Liping","Liyor","Luis","Lukasz","Maciej","Mahmood","Maksim","Manfred","Manoj","Manuel","Marcin","Mardkhay","Marek","Mariusz","Mark","Martin","Masami","Masao","Mateusz","Matt","Matthew","Meiyr","Michael","Michal","Miguel","Miguel-Angel","Mikhail","Min","Ming","Mitsuo","Miykhael","Miykhal","Mo","Mohamed","Mohammad","Mohammed","Mohan","Moses","Moshe","Mpho","Muhammad","Muhammed","Mukesh","Musa","Narong","Nathan","Nicola","Nikita","Nikolay","Ning","Nkosinathi","Noam","Oleg","Omer","Otieno","Pablo","Patrick","Paul","Pavel","Pawel","Pedro","Peng","Peter","Petrus","Philip","Pieter","Ping","Piotr","Prasit","Prasoet","Pricha","Pushpa","Qiang","Qing","Radha","Rafael","Ragnar","Raj","Rajendra","Rajesh","Raju","Rakesh","Ram","Ramesh","Raphael","Rattana","Ravi","Richard","Robert","Roman","Rong","Roy","Ryan","Salisu","Saman","Samran","Samuel","Sani","Sanjay","Santosh","Sam","Sammy","Sawat","Sebastian","Sergey","Sergio","Shankar","Shay","Shigeru","Shimon","Shlomo","Shoji","Sibusiso","Simon","Sipho","Sombat","Sombun","Somchai","Somchit","Somkhit","Somkiat","Sommai","Somnuek","Somphon","Somphong","Somsak","Sri","Stefan","Stephen","Steve","Steven","Suman","Sunday","Sunil","Sunthon","Suresh","Sushila","Suwit","Sveinn","Tadashi","Takashi","Takeshi","Tal","Tebogo","Thabo","Thawi","Themba","Thomas","Thulani","Tomasz","Toshio","Udom","Umar","Uriy","Usman","Uwe","Victor","Vijay","Viktor","Vincent","Vinod","Vladimir","Walter","Wanchai","Waraphon","Wei","Werner","Wichai","Wichian","Willem","William","Winai","Wirat","Wirot","Wojciech","Wolfgang","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Xolani","Yaakv","Yahaya","Yakubu","Yan","Yasuo","Yhudah","Ying","Yisrael","Yong","Yosef","Yoshie","Yoshimi","Yoshio","Yu","Yue","Yukio","Yun","Yuriy","Yusuf","Yuval","Zbigniew","Zhen","Zhiqiang"],female:["Agata","Agnieszka","Aisha","Akira","Aleksandra","Alina","Alyona","Amina","Amnuai","Ana","Ana-Maria","Anah","Anan","Anastasiya","Andrea","Angela","Anita","Ann","Anna","Anong","Antonia","Asha","Barbara","Beata","Berglind","Bin","Birgit","Birna","Blessing","Brigitte","Bunmi","Busisiwe","Carmen","Carol","Caroline","Catherine","Chan","Chanah","Chao","Charoen","Chayah","Chen","Cheng","Christa","Christine","Claire","Claudia","Cristina","Darya","Dolores","Dorota","Edda","Ekaterina","Elena","Elisabeth","Elizabeth","Elke","Emiko","Emma","Erika","Erla","Erna","Ester","Esther","Eunice","Eva","Eugenia","Ewa","Faith","Fatima","Fiona","Fran","Francisca","Fumiko","Galina","Gabra","Gisela","Gita","Grace","Hadiza","Haiyan","Hanna","Haruna","Hauwa","Heike","Helen","Helga","Hildur","Hiroko","Hiromi","Hisako","Hong","Hui","Hulda","Inga","Ingrid","Irina","Isa","Isabel","Isah","Iwona","Jackline","Jan","Jane","Janet","Jean","Jennifer","Jianhua","Jianping","Jin","Joan","Joanna","Johanna","Josefa","Joy","Joyce","Juan","Julie","Justyna","Kai","Kanchana","Karen","Karin","Karolina","Kasia","Katarzyna","Katsumi","Keiko","Kiran","Kiyoko","Kristina","Kseniya","Kun","Lakshmi","Lalita","Lan","Latda","Laura","Laxmi","Leah","Lei","Li","Lihua","Lijun","Lilian","Lilja","Lin","Linda","Lindiwe","Ling","Liping","Lisa","Lucia","Lucy","Lyubov","Lyudmila","Magda","Magdalena","Mali","Manju","Margaret","Maria","Maria-Isabel","Maria-Jose","Maria-Pilar","Marina","Mariya","Marta","Martha","Mary","Maryam","Masako","Masami","Mei","Mercy","Michal","Michiko","Mieko","Min","Mina","Ming","Miriam","Miyoko","Mo","Monika","Mpho","Na","Nadezhda","Nan","Nancy","Natalya","Ngozi","Nicola","Ning","Nittaya","Noam","Nobuko","Nokuthula","Nonhlanhla","Noriko","Nushi","Olga","Omer","Patricia","Paula","Paulina","Peng","Petra","Phonthip","Pilar","Ping","Prani","Purity","Pushpa","Qing","Rachel","Radha","Rattana","Rebecca","Reiko","Rekha","Renate","Rita","Rong","Rosa","Rose","Rut","Ruth","Ryoko","Sabine","Sachiko","Samran","Santosh","Sara","Sarah","Sam","Sammy","Sawat","Shanti","Sharon","Shay","Shizuko","Shoshanah","Sibongile","Sita","Sombat","Sombun","Somchit","Somkhit","Sommai","Somnuek","Somphon","Somphong","Sri","Steinunn","Sukanya","Suman","Sunday","Sunita","Suphaphon","Susan","Susanne","Sushila","Svetlana","Takako","Tamar","Tatyana","Tal","Tebogo","Teruko","Thawi","Tomiko","Toshiko","Unnur","Urai","Urmila","Ursula","Usha","Valentina","Victoria","Wanjiru","Wanphen","Watsana","Wei","Wilai","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Yael","Yan","Yasuko","Yelena","Yhudiyt","Ying","Yoko","Yong","Yoshie","Yoshiko","Yoshimi","Yu","Yue","Yuko","Yuliya","Yun","Yuval","Zainab","Zandile","Zanele","Zhen"]}};function nke(e){var r,o;const s=(r=e==null?void 0:e.withAccents)!=null&&r,c=(o=e==null?void 0:e.gender)!=null?o:tke(["male","female"]),d=e==null?void 0:e.locale;return VQ(s?d?d==null?void 0:d.withAccents[c]:rW.withAccents[c]:d?d==null?void 0:d.withoutAccents[c]:rW.withoutAccents[c],e)}var rke={china:["Peking roasted duck","Kung pao chicken","Sweet and sour pork","Hot pot","Dim sum","Dumplings","Ma po tofu","Char siu","Chicken chow mein","Beef chow mein","vegetable chow mein","Chicken fried rice","Beef fried rice","Vegetable fried Rice","Special fried Rice","Sichuan pork","Xiaolongbao","Zhajiangmian","Wonton soup","Sweet and sour pork","Duck spring Rolls","Vegetable spring Rolls","Wonton","Peking duck","Lamb hot pot","Spicy crayfish","Guilin rice noodles","Lanzhou hand-pulled noodles","Steamed crab","Shredded pork with garlic sauce","Red braised pork","Sweet and sour Ribs","Xinjiang","Braised pork with vermicelli"],italy:["Butternut squash risotto","Mushroom risotto","Beetroot risotto","Courgette risotto","Pizza","Gnocchi","Spaghetti bolognese","Spaghetti carbonara","Pesto alla Genovese","Beef lasagne","Vegetable lasagne","Gelato","Prosciutto di Parma","Ribollita","Bagna cauda","Polenta","Tortelli and ravioli","Focaccia","Garlic bread","Arancini","Il tartufo","Panzerotto fritto","Fiorentina","Minestrone","Frico","Arrosticini","Olive ascolante","Fritto misto piemontes","Tiramisù"],india:["Biryani","Dosa","Tandoori chicken","Samosas","Chaat","Plain naan","Garlic naan","Pilau rice","Steamed rice","Chicken madras","Vegetable madras","Chicken vindaloo","Chicken jalfrezi","Chicken roghan josh","Lamb roghan josh","Beef roghan josh","Butter chicken","Dosa","Gulab jamun","Chicken korma","Mutter paneer","Papadum","Paratha","Raita","Saag paneer","Tandoori chicken","Chicken tikka masala","Pakora","Dal","Chapati","Pasanda","Aloo gobi","Kofta","Chicken makhani","Paneer naan","Chana Aloo Curry"],mexico:["Chilaquiles","Pozole","Tacos al pastor","Tostadas","Chiles en nogada","Elote","Enchiladas","Mole","Guacamole","Tamales","Huevos rancheros","Machaca","Discada","Beef Burrito","Chicken Burrito","Pozole de pollo o duajolote","Menudo","Cochinita pibil","Tamale","Quesadilla","Frijoles puercos","Chile en nogada","Esquites","Alegria de amaranto","Pipián","Aguachile","Ceviche","Pescado zarandeado","Camarones a la diabla","Birria de chivo","Tlayuda","Guacamole con chapulines","Flautas","Torta Ahogada","Carnitas","Caldo Azteca","Gorditas de Nata"],japan:["Sushi","Udon","Tofu","Tempura","Yakitori","Sashimi","Ramen","Donburi","Natto","Oden","Tamagoyaki","Soba","Tonkatsu","Kashipan","Sukiyaki","Miso soup","Okonomiyaki","Mentaiko","Nikujaga","Unagi no kabayaki","Shabu Shabu","Onigiri","Gyoza","Takoyaki","aiseki ryori","Edamame","Yakisoba","Chawanmushi","Wagashi"],france:["Foie gras","Huîtres","Cassoulet","Poulet basquaise","Escargots au beurre persillé","Mouclade charentaise","Galettes bretonnes","Flemish carbonnade","Quiche lorraine","Raclette","Cheese fondue","Beef fondue","Gratin dauphinois","Tartiflette","Bouillabaisse","Ratatouille","Boeuf bourguignon","Blanquette de veau","Pot-au-feu","Coq-au-vin","Hachis parmentier","Steak tartare","Choucroute","Soufflé au fromage","Cuisses de grenouilles","Soupe à l’oignon","Baguette","Croissant","French cheeses","Fondant au chocolat","Tarte tatin","Macarons","Crème brûlée","Île flottante","Profiteroles","Pain au chocolat"],lebanon:["Kibbeh","Kafta","Kanafeh","Hummus","Rice pilaf","Fattoush","Manakish","Tabbouleh","Sfeeha","Fattoush","Labneh","Muhammara","Lahm bi ajin","Kaak","Chanklich","Mssabaha","Shawarma","Kebbe","Falafel","Halewit el jeben","Namoura","Maamoul","Foul mdammas","Balila","Kawarma","Fattouch"],thailand:["Pad kra pao moo","Tom kha gai","Khao Pad","Chicken pad Thai","Vegetable pad Thai","Moo satay","Tom yum goong","Khao niew mamuang","Kai yad sai","Khao soi","Pad see ew","Laab moo","Gaeng panang","Gai pad med ma muang","Som tam","Poh pia tod","Gaeng massaman","Pla kapung nueng manao","Tod mun pla","Gaeng ped","Gaeng garee","Gaeng keow wan","Moo ping","Durian","Sai ooah","Hoy tod","Kuay teow reua","Mu kratha","Kao ka moo","Yam nua"],greece:["Moussaka","Papoutsakia","Pastitsio","Souvlaki","Soutzoukakia","Stifado","Tomatokeftedes","Tzatziki","Kolokithokeftedes","Giouvetsi","Choriatiki","Kleftiko","Gemista","Fasolada","Bougatsa","Tiropita","Spanakopita","Feta Cheese with Honey","Horta","Tirokroketes","Briam","Saganaki","Gigantes","Dolmades","Fasolatha","Koulouri","Loukoumades","Gyros","Galaktoboureko","Baklava"],turkey:["Şiş kebap","Döner","Köfte","Pide","Kumpir","Meze","Mantı","Lahmacun","Menemen","Şiş kebap","İskender kebab","Corba","Kuzu tandir","Çiğ Köfte","Pilav","Yaprak sarma","Dolma","İmam bayıldı","Borek","Durum","Kumpir","Balik ekmek","Simit","Kunefe","Baklava","Lokum","Halva","Mozzaik pasta","Güllaç","Mercimek Köftesi","Haydari","Tursu suyu","Kahvalti","Kazan dibi","Hunkar begendi","Islak burgers","Salep","Yogurtlu kebab"],spain:["Tortilla de patatas","Fabada asturiana","Calçots","Boquerones al vinagre","Empanada gallega","Paella","Gazpacho","Gachas","Migas","Bocadillo de calamares","Pulpo a feira","Caldo gallego","Lentejas con chorizo","Cocido madrileño","Cachopo","Caracoles"],venezuela:["Pabellón criollo","Arepa","Mondongo","Empanadas","Quesillo","Chicha andina","Tequeños","Cachapa","Hallaca","Perico","Pasticho","Mandocas","Caraotas negras","Patacones","Dulce de leche","Pan de Jamón"],chile:["Humitas","Empanadas","Porotos con riendas","Completos","Manjar","Cordero al palo","Pastel de choclo","Mote con huesillos","Sopaipillas","Curanto"],argentina:["Milanesas","Empanadas","Pizza fugazeta","Asado","Choripan","Bondiola","Bife de chorizo"],colombia:["Bandeja paisa","Chuleta valluna","Sancocho trifásico","Empanada valluna","Salpicon de frutas","Pastel de garbanzo","Ajiaco","Arepas","Arroz de lisa","Sancocho","Pan de bono","Cuchuco","Oblea","Cazuela de mariscos","Pan de yuca","Bollo Limpio","Almojábana","Empanadas","Arroz con Coco","Sopa de mondongo","Cazuela de Mariscos","Arroz con Pollo","Arepa de Huevo","Mote de Queso"],ecuador:["Encebollado","Ceviche","Tigrillo","Bolon de verde","Llapingacho","Mote pillo","Locro de papa","Churrasco"],peru:["Ceviche","Arroz con pollo","Aji de gallina","Llunca de gallina"],"el salvador":["Pupusa","Sopa de patas","Rigua","Flor de izote con huevo","Gallo en chicha"],romania:["Sarmale","Mici","Pomana porcului","Ciorbă de fasole cu ciolan","Ciorbă de burtă","Ciorbă rădăuțeană","Plăcintă cu brânză","Ciorbă de potroace","Mămăligă cu brânză și smântână","Tochitură","Piftie","Iahnie de fasole","Slănină afumată","Cârnați afumați","Varză a la Cluj","Gulaș de cartofi cu afumătură","Cozonac de casă","Ciorbă ardelenească de porc","Mucenici moldovenești","Salată de boeuf","Dovleac copt","Papanași cu brânză de vacă și afine","Drob de miel","Pârjoale moldovenești","Zacuscă de vinete","Zacuscă de fasole","Turtă dulce","Clătitele cu gem","Clătitele cu brânza de vacă","Balmoș","Cozonac","Chiftele"]},iW;(iW=Object.keys(rke))==null||iW.length;var oW,ike={olympic:["Archery","Artistic Gymnastics","Artistic Swimming","Athletics","Badminton","Baseball Softball","Basketball","Beach Volleyball","BMX Freestyle","BMX Racing","Boxing","Kayak Flatwater","Kayak Slalom","Diving","Equestrian","Fencing","Football","Golf","Handball","Hockey","Judo","Karate","Marathon Swimming","Modern Pentathlon","Mountain Bike","Rhythmic Gymnastics","Road Cycling","Rowing","Rugby","Sailing","Shooting","Skateboarding","Sport Climbing","Surfing","Swimming","Table Tennis","Taekwondo","Tennis","Track Cycling","Trampoline","Triathlon","Volleyball","Water Polo","Weightlifting","Wrestling"],winterOlympic:["Alpine Skiing","Biathlon","Bobsleigh","Cross-Country Skiing","Curling","Figure Skating","Freestyle Skiing","Ice Hockey","Luge","Nordic Combined","Short Track Speed Skating","Skeleton","Ski Jumping","Snowboard","Speed Skating"],outdoor:["Archery","Athletics","Badminton","Baseball","Basketball","Bowling","Boxing","Camping","Canoeing","Climbing","Cricket","Curling","Cycling","Equestrian","Fencing","Football","Golf","Gymnastics","Handball","Hang Gliding","High Jumping","Hockey","Ice Hockey","Judo","Karate","Kite Flying","Monkey Bars","Motorsports","Netball","Rowing","Rugby","Running","Sailing","Skateboarding","Slide","Snow Skiing","Soccer","Street Hockey","Surfing","Swimming","Table Tennis","Tennis","Trekking","Triathlon","Volleyball","Weightlifting","Wrestling"]};(oW=Object.keys(ike))==null||oW.length;var jQ={exports:{}};function oke(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var QO={exports:{}};const ake={},ske=Object.freeze(Object.defineProperty({__proto__:null,default:ake},Symbol.toStringTag,{value:"Module"})),cke=C0e(ske);var aW;function gr(){return aW||(aW=1,function(e,r){(function(o,s){e.exports=s()})(In,function(){var o=o||function(s,c){var d;if(typeof window<"u"&&window.crypto&&(d=window.crypto),typeof self<"u"&&self.crypto&&(d=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(d=globalThis.crypto),!d&&typeof window<"u"&&window.msCrypto&&(d=window.msCrypto),!d&&typeof In<"u"&&In.crypto&&(d=In.crypto),!d&&typeof oke=="function")try{d=cke}catch{}var f=function(){if(d){if(typeof d.getRandomValues=="function")try{return d.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof d.randomBytes=="function")try{return d.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},v=Object.create||function(){function O(){}return function(L){var M;return O.prototype=L,M=new O,O.prototype=null,M}}(),g={},_=g.lib={},C=_.Base=function(){return{extend:function(O){var L=v(this);return O&&L.mixIn(O),(!L.hasOwnProperty("init")||this.init===L.init)&&(L.init=function(){L.$super.init.apply(this,arguments)}),L.init.prototype=L,L.$super=this,L},create:function(){var O=this.extend();return O.init.apply(O,arguments),O},init:function(){},mixIn:function(O){for(var L in O)O.hasOwnProperty(L)&&(this[L]=O[L]);O.hasOwnProperty("toString")&&(this.toString=O.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),b=_.WordArray=C.extend({init:function(O,L){O=this.words=O||[],L!=c?this.sigBytes=L:this.sigBytes=O.length*4},toString:function(O){return(O||I).stringify(this)},concat:function(O){var L=this.words,M=O.words,F=this.sigBytes,V=O.sigBytes;if(this.clamp(),F%4)for(var j=0;j<V;j++){var z=M[j>>>2]>>>24-j%4*8&255;L[F+j>>>2]|=z<<24-(F+j)%4*8}else for(var q=0;q<V;q+=4)L[F+q>>>2]=M[q>>>2];return this.sigBytes+=V,this},clamp:function(){var O=this.words,L=this.sigBytes;O[L>>>2]&=4294967295<<32-L%4*8,O.length=s.ceil(L/4)},clone:function(){var O=C.clone.call(this);return O.words=this.words.slice(0),O},random:function(O){for(var L=[],M=0;M<O;M+=4)L.push(f());return new b.init(L,O)}}),T=g.enc={},I=T.Hex={stringify:function(O){for(var L=O.words,M=O.sigBytes,F=[],V=0;V<M;V++){var j=L[V>>>2]>>>24-V%4*8&255;F.push((j>>>4).toString(16)),F.push((j&15).toString(16))}return F.join("")},parse:function(O){for(var L=O.length,M=[],F=0;F<L;F+=2)M[F>>>3]|=parseInt(O.substr(F,2),16)<<24-F%8*4;return new b.init(M,L/2)}},w=T.Latin1={stringify:function(O){for(var L=O.words,M=O.sigBytes,F=[],V=0;V<M;V++){var j=L[V>>>2]>>>24-V%4*8&255;F.push(String.fromCharCode(j))}return F.join("")},parse:function(O){for(var L=O.length,M=[],F=0;F<L;F++)M[F>>>2]|=(O.charCodeAt(F)&255)<<24-F%4*8;return new b.init(M,L)}},x=T.Utf8={stringify:function(O){try{return decodeURIComponent(escape(w.stringify(O)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(O){return w.parse(unescape(encodeURIComponent(O)))}},N=_.BufferedBlockAlgorithm=C.extend({reset:function(){this._data=new b.init,this._nDataBytes=0},_append:function(O){typeof O=="string"&&(O=x.parse(O)),this._data.concat(O),this._nDataBytes+=O.sigBytes},_process:function(O){var L,M=this._data,F=M.words,V=M.sigBytes,j=this.blockSize,z=j*4,q=V/z;O?q=s.ceil(q):q=s.max((q|0)-this._minBufferSize,0);var W=q*j,J=s.min(W*4,V);if(W){for(var te=0;te<W;te+=j)this._doProcessBlock(F,te);L=F.splice(0,W),M.sigBytes-=J}return new b.init(L,J)},clone:function(){var O=C.clone.call(this);return O._data=this._data.clone(),O},_minBufferSize:0});_.Hasher=N.extend({cfg:C.extend(),init:function(O){this.cfg=this.cfg.extend(O),this.reset()},reset:function(){N.reset.call(this),this._doReset()},update:function(O){return this._append(O),this._process(),this},finalize:function(O){O&&this._append(O);var L=this._doFinalize();return L},blockSize:16,_createHelper:function(O){return function(L,M){return new O.init(M).finalize(L)}},_createHmacHelper:function(O){return function(L,M){return new P.HMAC.init(O,M).finalize(L)}}});var P=g.algo={};return g}(Math);return o})}(QO)),QO.exports}var ZO={exports:{}},sW;function yT(){return sW||(sW=1,function(e,r){(function(o,s){e.exports=s(gr())})(In,function(o){return function(s){var c=o,d=c.lib,f=d.Base,v=d.WordArray,g=c.x64={};g.Word=f.extend({init:function(_,C){this.high=_,this.low=C}}),g.WordArray=f.extend({init:function(_,C){_=this.words=_||[],C!=s?this.sigBytes=C:this.sigBytes=_.length*8},toX32:function(){for(var _=this.words,C=_.length,b=[],T=0;T<C;T++){var I=_[T];b.push(I.high),b.push(I.low)}return v.create(b,this.sigBytes)},clone:function(){for(var _=f.clone.call(this),C=_.words=this.words.slice(0),b=C.length,T=0;T<b;T++)C[T]=C[T].clone();return _}})}(),o})}(ZO)),ZO.exports}var ex={exports:{}},cW;function lke(){return cW||(cW=1,function(e,r){(function(o,s){e.exports=s(gr())})(In,function(o){return function(){if(typeof ArrayBuffer=="function"){var s=o,c=s.lib,d=c.WordArray,f=d.init,v=d.init=function(g){if(g instanceof ArrayBuffer&&(g=new Uint8Array(g)),(g instanceof Int8Array||typeof Uint8ClampedArray<"u"&&g instanceof Uint8ClampedArray||g instanceof Int16Array||g instanceof Uint16Array||g instanceof Int32Array||g instanceof Uint32Array||g instanceof Float32Array||g instanceof Float64Array)&&(g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength)),g instanceof Uint8Array){for(var _=g.byteLength,C=[],b=0;b<_;b++)C[b>>>2]|=g[b]<<24-b%4*8;f.call(this,C,_)}else f.apply(this,arguments)};v.prototype=d}}(),o.lib.WordArray})}(ex)),ex.exports}var tx={exports:{}},lW;function uke(){return lW||(lW=1,function(e,r){(function(o,s){e.exports=s(gr())})(In,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,f=s.enc;f.Utf16=f.Utf16BE={stringify:function(g){for(var _=g.words,C=g.sigBytes,b=[],T=0;T<C;T+=2){var I=_[T>>>2]>>>16-T%4*8&65535;b.push(String.fromCharCode(I))}return b.join("")},parse:function(g){for(var _=g.length,C=[],b=0;b<_;b++)C[b>>>1]|=g.charCodeAt(b)<<16-b%2*16;return d.create(C,_*2)}},f.Utf16LE={stringify:function(g){for(var _=g.words,C=g.sigBytes,b=[],T=0;T<C;T+=2){var I=v(_[T>>>2]>>>16-T%4*8&65535);b.push(String.fromCharCode(I))}return b.join("")},parse:function(g){for(var _=g.length,C=[],b=0;b<_;b++)C[b>>>1]|=v(g.charCodeAt(b)<<16-b%2*16);return d.create(C,_*2)}};function v(g){return g<<8&4278255360|g>>>8&16711935}}(),o.enc.Utf16})}(tx)),tx.exports}var nx={exports:{}},uW;function of(){return uW||(uW=1,function(e,r){(function(o,s){e.exports=s(gr())})(In,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,f=s.enc;f.Base64={stringify:function(g){var _=g.words,C=g.sigBytes,b=this._map;g.clamp();for(var T=[],I=0;I<C;I+=3)for(var w=_[I>>>2]>>>24-I%4*8&255,x=_[I+1>>>2]>>>24-(I+1)%4*8&255,N=_[I+2>>>2]>>>24-(I+2)%4*8&255,P=w<<16|x<<8|N,O=0;O<4&&I+O*.75<C;O++)T.push(b.charAt(P>>>6*(3-O)&63));var L=b.charAt(64);if(L)for(;T.length%4;)T.push(L);return T.join("")},parse:function(g){var _=g.length,C=this._map,b=this._reverseMap;if(!b){b=this._reverseMap=[];for(var T=0;T<C.length;T++)b[C.charCodeAt(T)]=T}var I=C.charAt(64);if(I){var w=g.indexOf(I);w!==-1&&(_=w)}return v(g,_,b)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function v(g,_,C){for(var b=[],T=0,I=0;I<_;I++)if(I%4){var w=C[g.charCodeAt(I-1)]<<I%4*2,x=C[g.charCodeAt(I)]>>>6-I%4*2,N=w|x;b[T>>>2]|=N<<24-T%4*8,T++}return d.create(b,T)}}(),o.enc.Base64})}(nx)),nx.exports}var rx={exports:{}},dW;function dke(){return dW||(dW=1,function(e,r){(function(o,s){e.exports=s(gr())})(In,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,f=s.enc;f.Base64url={stringify:function(g,_){_===void 0&&(_=!0);var C=g.words,b=g.sigBytes,T=_?this._safe_map:this._map;g.clamp();for(var I=[],w=0;w<b;w+=3)for(var x=C[w>>>2]>>>24-w%4*8&255,N=C[w+1>>>2]>>>24-(w+1)%4*8&255,P=C[w+2>>>2]>>>24-(w+2)%4*8&255,O=x<<16|N<<8|P,L=0;L<4&&w+L*.75<b;L++)I.push(T.charAt(O>>>6*(3-L)&63));var M=T.charAt(64);if(M)for(;I.length%4;)I.push(M);return I.join("")},parse:function(g,_){_===void 0&&(_=!0);var C=g.length,b=_?this._safe_map:this._map,T=this._reverseMap;if(!T){T=this._reverseMap=[];for(var I=0;I<b.length;I++)T[b.charCodeAt(I)]=I}var w=b.charAt(64);if(w){var x=g.indexOf(w);x!==-1&&(C=x)}return v(g,C,T)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function v(g,_,C){for(var b=[],T=0,I=0;I<_;I++)if(I%4){var w=C[g.charCodeAt(I-1)]<<I%4*2,x=C[g.charCodeAt(I)]>>>6-I%4*2,N=w|x;b[T>>>2]|=N<<24-T%4*8,T++}return d.create(b,T)}}(),o.enc.Base64url})}(rx)),rx.exports}var ix={exports:{}},hW;function af(){return hW||(hW=1,function(e,r){(function(o,s){e.exports=s(gr())})(In,function(o){return function(s){var c=o,d=c.lib,f=d.WordArray,v=d.Hasher,g=c.algo,_=[];(function(){for(var x=0;x<64;x++)_[x]=s.abs(s.sin(x+1))*4294967296|0})();var C=g.MD5=v.extend({_doReset:function(){this._hash=new f.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(x,N){for(var P=0;P<16;P++){var O=N+P,L=x[O];x[O]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360}var M=this._hash.words,F=x[N+0],V=x[N+1],j=x[N+2],z=x[N+3],q=x[N+4],W=x[N+5],J=x[N+6],te=x[N+7],ee=x[N+8],oe=x[N+9],pe=x[N+10],ne=x[N+11],ae=x[N+12],re=x[N+13],he=x[N+14],fe=x[N+15],se=M[0],de=M[1],ve=M[2],ie=M[3];se=b(se,de,ve,ie,F,7,_[0]),ie=b(ie,se,de,ve,V,12,_[1]),ve=b(ve,ie,se,de,j,17,_[2]),de=b(de,ve,ie,se,z,22,_[3]),se=b(se,de,ve,ie,q,7,_[4]),ie=b(ie,se,de,ve,W,12,_[5]),ve=b(ve,ie,se,de,J,17,_[6]),de=b(de,ve,ie,se,te,22,_[7]),se=b(se,de,ve,ie,ee,7,_[8]),ie=b(ie,se,de,ve,oe,12,_[9]),ve=b(ve,ie,se,de,pe,17,_[10]),de=b(de,ve,ie,se,ne,22,_[11]),se=b(se,de,ve,ie,ae,7,_[12]),ie=b(ie,se,de,ve,re,12,_[13]),ve=b(ve,ie,se,de,he,17,_[14]),de=b(de,ve,ie,se,fe,22,_[15]),se=T(se,de,ve,ie,V,5,_[16]),ie=T(ie,se,de,ve,J,9,_[17]),ve=T(ve,ie,se,de,ne,14,_[18]),de=T(de,ve,ie,se,F,20,_[19]),se=T(se,de,ve,ie,W,5,_[20]),ie=T(ie,se,de,ve,pe,9,_[21]),ve=T(ve,ie,se,de,fe,14,_[22]),de=T(de,ve,ie,se,q,20,_[23]),se=T(se,de,ve,ie,oe,5,_[24]),ie=T(ie,se,de,ve,he,9,_[25]),ve=T(ve,ie,se,de,z,14,_[26]),de=T(de,ve,ie,se,ee,20,_[27]),se=T(se,de,ve,ie,re,5,_[28]),ie=T(ie,se,de,ve,j,9,_[29]),ve=T(ve,ie,se,de,te,14,_[30]),de=T(de,ve,ie,se,ae,20,_[31]),se=I(se,de,ve,ie,W,4,_[32]),ie=I(ie,se,de,ve,ee,11,_[33]),ve=I(ve,ie,se,de,ne,16,_[34]),de=I(de,ve,ie,se,he,23,_[35]),se=I(se,de,ve,ie,V,4,_[36]),ie=I(ie,se,de,ve,q,11,_[37]),ve=I(ve,ie,se,de,te,16,_[38]),de=I(de,ve,ie,se,pe,23,_[39]),se=I(se,de,ve,ie,re,4,_[40]),ie=I(ie,se,de,ve,F,11,_[41]),ve=I(ve,ie,se,de,z,16,_[42]),de=I(de,ve,ie,se,J,23,_[43]),se=I(se,de,ve,ie,oe,4,_[44]),ie=I(ie,se,de,ve,ae,11,_[45]),ve=I(ve,ie,se,de,fe,16,_[46]),de=I(de,ve,ie,se,j,23,_[47]),se=w(se,de,ve,ie,F,6,_[48]),ie=w(ie,se,de,ve,te,10,_[49]),ve=w(ve,ie,se,de,he,15,_[50]),de=w(de,ve,ie,se,W,21,_[51]),se=w(se,de,ve,ie,ae,6,_[52]),ie=w(ie,se,de,ve,z,10,_[53]),ve=w(ve,ie,se,de,pe,15,_[54]),de=w(de,ve,ie,se,V,21,_[55]),se=w(se,de,ve,ie,ee,6,_[56]),ie=w(ie,se,de,ve,fe,10,_[57]),ve=w(ve,ie,se,de,J,15,_[58]),de=w(de,ve,ie,se,re,21,_[59]),se=w(se,de,ve,ie,q,6,_[60]),ie=w(ie,se,de,ve,ne,10,_[61]),ve=w(ve,ie,se,de,j,15,_[62]),de=w(de,ve,ie,se,oe,21,_[63]),M[0]=M[0]+se|0,M[1]=M[1]+de|0,M[2]=M[2]+ve|0,M[3]=M[3]+ie|0},_doFinalize:function(){var x=this._data,N=x.words,P=this._nDataBytes*8,O=x.sigBytes*8;N[O>>>5]|=128<<24-O%32;var L=s.floor(P/4294967296),M=P;N[(O+64>>>9<<4)+15]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,N[(O+64>>>9<<4)+14]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,x.sigBytes=(N.length+1)*4,this._process();for(var F=this._hash,V=F.words,j=0;j<4;j++){var z=V[j];V[j]=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360}return F},clone:function(){var x=v.clone.call(this);return x._hash=this._hash.clone(),x}});function b(x,N,P,O,L,M,F){var V=x+(N&P|~N&O)+L+F;return(V<<M|V>>>32-M)+N}function T(x,N,P,O,L,M,F){var V=x+(N&O|P&~O)+L+F;return(V<<M|V>>>32-M)+N}function I(x,N,P,O,L,M,F){var V=x+(N^P^O)+L+F;return(V<<M|V>>>32-M)+N}function w(x,N,P,O,L,M,F){var V=x+(P^(N|~O))+L+F;return(V<<M|V>>>32-M)+N}c.MD5=v._createHelper(C),c.HmacMD5=v._createHmacHelper(C)}(Math),o.MD5})}(ix)),ix.exports}var ox={exports:{}},fW;function $Q(){return fW||(fW=1,function(e,r){(function(o,s){e.exports=s(gr())})(In,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,f=c.Hasher,v=s.algo,g=[],_=v.SHA1=f.extend({_doReset:function(){this._hash=new d.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(C,b){for(var T=this._hash.words,I=T[0],w=T[1],x=T[2],N=T[3],P=T[4],O=0;O<80;O++){if(O<16)g[O]=C[b+O]|0;else{var L=g[O-3]^g[O-8]^g[O-14]^g[O-16];g[O]=L<<1|L>>>31}var M=(I<<5|I>>>27)+P+g[O];O<20?M+=(w&x|~w&N)+1518500249:O<40?M+=(w^x^N)+1859775393:O<60?M+=(w&x|w&N|x&N)-1894007588:M+=(w^x^N)-899497514,P=N,N=x,x=w<<30|w>>>2,w=I,I=M}T[0]=T[0]+I|0,T[1]=T[1]+w|0,T[2]=T[2]+x|0,T[3]=T[3]+N|0,T[4]=T[4]+P|0},_doFinalize:function(){var C=this._data,b=C.words,T=this._nDataBytes*8,I=C.sigBytes*8;return b[I>>>5]|=128<<24-I%32,b[(I+64>>>9<<4)+14]=Math.floor(T/4294967296),b[(I+64>>>9<<4)+15]=T,C.sigBytes=b.length*4,this._process(),this._hash},clone:function(){var C=f.clone.call(this);return C._hash=this._hash.clone(),C}});s.SHA1=f._createHelper(_),s.HmacSHA1=f._createHmacHelper(_)}(),o.SHA1})}(ox)),ox.exports}var ax={exports:{}},pW;function lL(){return pW||(pW=1,function(e,r){(function(o,s){e.exports=s(gr())})(In,function(o){return function(s){var c=o,d=c.lib,f=d.WordArray,v=d.Hasher,g=c.algo,_=[],C=[];(function(){function I(P){for(var O=s.sqrt(P),L=2;L<=O;L++)if(!(P%L))return!1;return!0}function w(P){return(P-(P|0))*4294967296|0}for(var x=2,N=0;N<64;)I(x)&&(N<8&&(_[N]=w(s.pow(x,1/2))),C[N]=w(s.pow(x,1/3)),N++),x++})();var b=[],T=g.SHA256=v.extend({_doReset:function(){this._hash=new f.init(_.slice(0))},_doProcessBlock:function(I,w){for(var x=this._hash.words,N=x[0],P=x[1],O=x[2],L=x[3],M=x[4],F=x[5],V=x[6],j=x[7],z=0;z<64;z++){if(z<16)b[z]=I[w+z]|0;else{var q=b[z-15],W=(q<<25|q>>>7)^(q<<14|q>>>18)^q>>>3,J=b[z-2],te=(J<<15|J>>>17)^(J<<13|J>>>19)^J>>>10;b[z]=W+b[z-7]+te+b[z-16]}var ee=M&F^~M&V,oe=N&P^N&O^P&O,pe=(N<<30|N>>>2)^(N<<19|N>>>13)^(N<<10|N>>>22),ne=(M<<26|M>>>6)^(M<<21|M>>>11)^(M<<7|M>>>25),ae=j+ne+ee+C[z]+b[z],re=pe+oe;j=V,V=F,F=M,M=L+ae|0,L=O,O=P,P=N,N=ae+re|0}x[0]=x[0]+N|0,x[1]=x[1]+P|0,x[2]=x[2]+O|0,x[3]=x[3]+L|0,x[4]=x[4]+M|0,x[5]=x[5]+F|0,x[6]=x[6]+V|0,x[7]=x[7]+j|0},_doFinalize:function(){var I=this._data,w=I.words,x=this._nDataBytes*8,N=I.sigBytes*8;return w[N>>>5]|=128<<24-N%32,w[(N+64>>>9<<4)+14]=s.floor(x/4294967296),w[(N+64>>>9<<4)+15]=x,I.sigBytes=w.length*4,this._process(),this._hash},clone:function(){var I=v.clone.call(this);return I._hash=this._hash.clone(),I}});c.SHA256=v._createHelper(T),c.HmacSHA256=v._createHmacHelper(T)}(Math),o.SHA256})}(ax)),ax.exports}var sx={exports:{}},mW;function hke(){return mW||(mW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),lL())})(In,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,f=s.algo,v=f.SHA256,g=f.SHA224=v.extend({_doReset:function(){this._hash=new d.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var _=v._doFinalize.call(this);return _.sigBytes-=4,_}});s.SHA224=v._createHelper(g),s.HmacSHA224=v._createHmacHelper(g)}(),o.SHA224})}(sx)),sx.exports}var cx={exports:{}},gW;function HQ(){return gW||(gW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),yT())})(In,function(o){return function(){var s=o,c=s.lib,d=c.Hasher,f=s.x64,v=f.Word,g=f.WordArray,_=s.algo;function C(){return v.create.apply(v,arguments)}var b=[C(1116352408,3609767458),C(1899447441,602891725),C(3049323471,3964484399),C(3921009573,2173295548),C(961987163,4081628472),C(1508970993,3053834265),C(2453635748,2937671579),C(2870763221,3664609560),C(3624381080,2734883394),C(310598401,1164996542),C(607225278,1323610764),C(1426881987,3590304994),C(1925078388,4068182383),C(2162078206,991336113),C(2614888103,633803317),C(3248222580,3479774868),C(3835390401,2666613458),C(4022224774,944711139),C(264347078,2341262773),C(604807628,2007800933),C(770255983,1495990901),C(1249150122,1856431235),C(1555081692,3175218132),C(1996064986,2198950837),C(2554220882,3999719339),C(2821834349,766784016),C(2952996808,2566594879),C(3210313671,3203337956),C(3336571891,1034457026),C(3584528711,2466948901),C(113926993,3758326383),C(338241895,168717936),C(666307205,1188179964),C(773529912,1546045734),C(1294757372,1522805485),C(1396182291,2643833823),C(1695183700,2343527390),C(1986661051,1014477480),C(2177026350,1206759142),C(2456956037,344077627),C(2730485921,1290863460),C(2820302411,3158454273),C(3259730800,3505952657),C(3345764771,106217008),C(3516065817,3606008344),C(3600352804,1432725776),C(4094571909,1467031594),C(275423344,851169720),C(430227734,3100823752),C(506948616,1363258195),C(659060556,3750685593),C(883997877,3785050280),C(958139571,3318307427),C(1322822218,3812723403),C(1537002063,2003034995),C(1747873779,3602036899),C(1955562222,1575990012),C(2024104815,1125592928),C(2227730452,2716904306),C(2361852424,442776044),C(2428436474,593698344),C(2756734187,3733110249),C(3204031479,2999351573),C(3329325298,3815920427),C(3391569614,3928383900),C(3515267271,566280711),C(3940187606,3454069534),C(4118630271,4000239992),C(116418474,1914138554),C(174292421,2731055270),C(289380356,3203993006),C(460393269,320620315),C(685471733,587496836),C(852142971,1086792851),C(1017036298,365543100),C(1126000580,2618297676),C(1288033470,3409855158),C(1501505948,4234509866),C(1607167915,987167468),C(1816402316,1246189591)],T=[];(function(){for(var w=0;w<80;w++)T[w]=C()})();var I=_.SHA512=d.extend({_doReset:function(){this._hash=new g.init([new v.init(1779033703,4089235720),new v.init(3144134277,2227873595),new v.init(1013904242,4271175723),new v.init(2773480762,1595750129),new v.init(1359893119,2917565137),new v.init(2600822924,725511199),new v.init(528734635,4215389547),new v.init(1541459225,327033209)])},_doProcessBlock:function(w,x){for(var N=this._hash.words,P=N[0],O=N[1],L=N[2],M=N[3],F=N[4],V=N[5],j=N[6],z=N[7],q=P.high,W=P.low,J=O.high,te=O.low,ee=L.high,oe=L.low,pe=M.high,ne=M.low,ae=F.high,re=F.low,he=V.high,fe=V.low,se=j.high,de=j.low,ve=z.high,ie=z.low,be=q,Re=W,Pe=J,Ie=te,xe=ee,We=oe,De=pe,Ae=ne,je=ae,Je=re,Fe=he,ke=fe,ht=se,Ze=de,mt=ve,Rt=ie,ut=0;ut<80;ut++){var ot,ze,tt=T[ut];if(ut<16)ze=tt.high=w[x+ut*2]|0,ot=tt.low=w[x+ut*2+1]|0;else{var bt=T[ut-15],Nt=bt.high,wt=bt.low,Xt=(Nt>>>1|wt<<31)^(Nt>>>8|wt<<24)^Nt>>>7,$t=(wt>>>1|Nt<<31)^(wt>>>8|Nt<<24)^(wt>>>7|Nt<<25),Lt=T[ut-2],Wt=Lt.high,Jt=Lt.low,Ft=(Wt>>>19|Jt<<13)^(Wt<<3|Jt>>>29)^Wt>>>6,yt=(Jt>>>19|Wt<<13)^(Jt<<3|Wt>>>29)^(Jt>>>6|Wt<<26),It=T[ut-7],ft=It.high,Pt=It.low,Cn=T[ut-16],bn=Cn.high,si=Cn.low;ot=$t+Pt,ze=Xt+ft+(ot>>>0<$t>>>0?1:0),ot=ot+yt,ze=ze+Ft+(ot>>>0<yt>>>0?1:0),ot=ot+si,ze=ze+bn+(ot>>>0<si>>>0?1:0),tt.high=ze,tt.low=ot}var Qr=je&Fe^~je&ht,vi=Je&ke^~Je&Ze,xr=be&Pe^be&xe^Pe&xe,nr=Re&Ie^Re&We^Ie&We,ir=(be>>>28|Re<<4)^(be<<30|Re>>>2)^(be<<25|Re>>>7),Tn=(Re>>>28|be<<4)^(Re<<30|be>>>2)^(Re<<25|be>>>7),Ut=(je>>>14|Je<<18)^(je>>>18|Je<<14)^(je<<23|Je>>>9),kt=(Je>>>14|je<<18)^(Je>>>18|je<<14)^(Je<<23|je>>>9),Ct=b[ut],Pn=Ct.high,tn=Ct.low,pt=Rt+kt,gt=mt+Ut+(pt>>>0<Rt>>>0?1:0),pt=pt+vi,gt=gt+Qr+(pt>>>0<vi>>>0?1:0),pt=pt+tn,gt=gt+Pn+(pt>>>0<tn>>>0?1:0),pt=pt+ot,gt=gt+ze+(pt>>>0<ot>>>0?1:0),Ht=Tn+nr,Gt=ir+xr+(Ht>>>0<Tn>>>0?1:0);mt=ht,Rt=Ze,ht=Fe,Ze=ke,Fe=je,ke=Je,Je=Ae+pt|0,je=De+gt+(Je>>>0<Ae>>>0?1:0)|0,De=xe,Ae=We,xe=Pe,We=Ie,Pe=be,Ie=Re,Re=pt+Ht|0,be=gt+Gt+(Re>>>0<pt>>>0?1:0)|0}W=P.low=W+Re,P.high=q+be+(W>>>0<Re>>>0?1:0),te=O.low=te+Ie,O.high=J+Pe+(te>>>0<Ie>>>0?1:0),oe=L.low=oe+We,L.high=ee+xe+(oe>>>0<We>>>0?1:0),ne=M.low=ne+Ae,M.high=pe+De+(ne>>>0<Ae>>>0?1:0),re=F.low=re+Je,F.high=ae+je+(re>>>0<Je>>>0?1:0),fe=V.low=fe+ke,V.high=he+Fe+(fe>>>0<ke>>>0?1:0),de=j.low=de+Ze,j.high=se+ht+(de>>>0<Ze>>>0?1:0),ie=z.low=ie+Rt,z.high=ve+mt+(ie>>>0<Rt>>>0?1:0)},_doFinalize:function(){var w=this._data,x=w.words,N=this._nDataBytes*8,P=w.sigBytes*8;x[P>>>5]|=128<<24-P%32,x[(P+128>>>10<<5)+30]=Math.floor(N/4294967296),x[(P+128>>>10<<5)+31]=N,w.sigBytes=x.length*4,this._process();var O=this._hash.toX32();return O},clone:function(){var w=d.clone.call(this);return w._hash=this._hash.clone(),w},blockSize:1024/32});s.SHA512=d._createHelper(I),s.HmacSHA512=d._createHmacHelper(I)}(),o.SHA512})}(cx)),cx.exports}var lx={exports:{}},vW;function fke(){return vW||(vW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),yT(),HQ())})(In,function(o){return function(){var s=o,c=s.x64,d=c.Word,f=c.WordArray,v=s.algo,g=v.SHA512,_=v.SHA384=g.extend({_doReset:function(){this._hash=new f.init([new d.init(3418070365,3238371032),new d.init(1654270250,914150663),new d.init(2438529370,812702999),new d.init(355462360,4144912697),new d.init(1731405415,4290775857),new d.init(2394180231,1750603025),new d.init(3675008525,1694076839),new d.init(1203062813,3204075428)])},_doFinalize:function(){var C=g._doFinalize.call(this);return C.sigBytes-=16,C}});s.SHA384=g._createHelper(_),s.HmacSHA384=g._createHmacHelper(_)}(),o.SHA384})}(lx)),lx.exports}var ux={exports:{}},EW;function pke(){return EW||(EW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),yT())})(In,function(o){return function(s){var c=o,d=c.lib,f=d.WordArray,v=d.Hasher,g=c.x64,_=g.Word,C=c.algo,b=[],T=[],I=[];(function(){for(var N=1,P=0,O=0;O<24;O++){b[N+5*P]=(O+1)*(O+2)/2%64;var L=P%5,M=(2*N+3*P)%5;N=L,P=M}for(var N=0;N<5;N++)for(var P=0;P<5;P++)T[N+5*P]=P+(2*N+3*P)%5*5;for(var F=1,V=0;V<24;V++){for(var j=0,z=0,q=0;q<7;q++){if(F&1){var W=(1<<q)-1;W<32?z^=1<<W:j^=1<<W-32}F&128?F=F<<1^113:F<<=1}I[V]=_.create(j,z)}})();var w=[];(function(){for(var N=0;N<25;N++)w[N]=_.create()})();var x=C.SHA3=v.extend({cfg:v.cfg.extend({outputLength:512}),_doReset:function(){for(var N=this._state=[],P=0;P<25;P++)N[P]=new _.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(N,P){for(var O=this._state,L=this.blockSize/2,M=0;M<L;M++){var F=N[P+2*M],V=N[P+2*M+1];F=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,V=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360;var j=O[M];j.high^=V,j.low^=F}for(var z=0;z<24;z++){for(var q=0;q<5;q++){for(var W=0,J=0,te=0;te<5;te++){var j=O[q+5*te];W^=j.high,J^=j.low}var ee=w[q];ee.high=W,ee.low=J}for(var q=0;q<5;q++)for(var oe=w[(q+4)%5],pe=w[(q+1)%5],ne=pe.high,ae=pe.low,W=oe.high^(ne<<1|ae>>>31),J=oe.low^(ae<<1|ne>>>31),te=0;te<5;te++){var j=O[q+5*te];j.high^=W,j.low^=J}for(var re=1;re<25;re++){var W,J,j=O[re],he=j.high,fe=j.low,se=b[re];se<32?(W=he<<se|fe>>>32-se,J=fe<<se|he>>>32-se):(W=fe<<se-32|he>>>64-se,J=he<<se-32|fe>>>64-se);var de=w[T[re]];de.high=W,de.low=J}var ve=w[0],ie=O[0];ve.high=ie.high,ve.low=ie.low;for(var q=0;q<5;q++)for(var te=0;te<5;te++){var re=q+5*te,j=O[re],be=w[re],Re=w[(q+1)%5+5*te],Pe=w[(q+2)%5+5*te];j.high=be.high^~Re.high&Pe.high,j.low=be.low^~Re.low&Pe.low}var j=O[0],Ie=I[z];j.high^=Ie.high,j.low^=Ie.low}},_doFinalize:function(){var N=this._data,P=N.words;this._nDataBytes*8;var O=N.sigBytes*8,L=this.blockSize*32;P[O>>>5]|=1<<24-O%32,P[(s.ceil((O+1)/L)*L>>>5)-1]|=128,N.sigBytes=P.length*4,this._process();for(var M=this._state,F=this.cfg.outputLength/8,V=F/8,j=[],z=0;z<V;z++){var q=M[z],W=q.high,J=q.low;W=(W<<8|W>>>24)&16711935|(W<<24|W>>>8)&4278255360,J=(J<<8|J>>>24)&16711935|(J<<24|J>>>8)&4278255360,j.push(J),j.push(W)}return new f.init(j,F)},clone:function(){for(var N=v.clone.call(this),P=N._state=this._state.slice(0),O=0;O<25;O++)P[O]=P[O].clone();return N}});c.SHA3=v._createHelper(x),c.HmacSHA3=v._createHmacHelper(x)}(Math),o.SHA3})}(ux)),ux.exports}var dx={exports:{}},_W;function mke(){return _W||(_W=1,function(e,r){(function(o,s){e.exports=s(gr())})(In,function(o){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(s){var c=o,d=c.lib,f=d.WordArray,v=d.Hasher,g=c.algo,_=f.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),C=f.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),b=f.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),T=f.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),I=f.create([0,1518500249,1859775393,2400959708,2840853838]),w=f.create([1352829926,1548603684,1836072691,2053994217,0]),x=g.RIPEMD160=v.extend({_doReset:function(){this._hash=f.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(V,j){for(var z=0;z<16;z++){var q=j+z,W=V[q];V[q]=(W<<8|W>>>24)&16711935|(W<<24|W>>>8)&4278255360}var J=this._hash.words,te=I.words,ee=w.words,oe=_.words,pe=C.words,ne=b.words,ae=T.words,re,he,fe,se,de,ve,ie,be,Re,Pe;ve=re=J[0],ie=he=J[1],be=fe=J[2],Re=se=J[3],Pe=de=J[4];for(var Ie,z=0;z<80;z+=1)Ie=re+V[j+oe[z]]|0,z<16?Ie+=N(he,fe,se)+te[0]:z<32?Ie+=P(he,fe,se)+te[1]:z<48?Ie+=O(he,fe,se)+te[2]:z<64?Ie+=L(he,fe,se)+te[3]:Ie+=M(he,fe,se)+te[4],Ie=Ie|0,Ie=F(Ie,ne[z]),Ie=Ie+de|0,re=de,de=se,se=F(fe,10),fe=he,he=Ie,Ie=ve+V[j+pe[z]]|0,z<16?Ie+=M(ie,be,Re)+ee[0]:z<32?Ie+=L(ie,be,Re)+ee[1]:z<48?Ie+=O(ie,be,Re)+ee[2]:z<64?Ie+=P(ie,be,Re)+ee[3]:Ie+=N(ie,be,Re)+ee[4],Ie=Ie|0,Ie=F(Ie,ae[z]),Ie=Ie+Pe|0,ve=Pe,Pe=Re,Re=F(be,10),be=ie,ie=Ie;Ie=J[1]+fe+Re|0,J[1]=J[2]+se+Pe|0,J[2]=J[3]+de+ve|0,J[3]=J[4]+re+ie|0,J[4]=J[0]+he+be|0,J[0]=Ie},_doFinalize:function(){var V=this._data,j=V.words,z=this._nDataBytes*8,q=V.sigBytes*8;j[q>>>5]|=128<<24-q%32,j[(q+64>>>9<<4)+14]=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360,V.sigBytes=(j.length+1)*4,this._process();for(var W=this._hash,J=W.words,te=0;te<5;te++){var ee=J[te];J[te]=(ee<<8|ee>>>24)&16711935|(ee<<24|ee>>>8)&4278255360}return W},clone:function(){var V=v.clone.call(this);return V._hash=this._hash.clone(),V}});function N(V,j,z){return V^j^z}function P(V,j,z){return V&j|~V&z}function O(V,j,z){return(V|~j)^z}function L(V,j,z){return V&z|j&~z}function M(V,j,z){return V^(j|~z)}function F(V,j){return V<<j|V>>>32-j}c.RIPEMD160=v._createHelper(x),c.HmacRIPEMD160=v._createHmacHelper(x)}(),o.RIPEMD160})}(dx)),dx.exports}var hx={exports:{}},SW;function uL(){return SW||(SW=1,function(e,r){(function(o,s){e.exports=s(gr())})(In,function(o){(function(){var s=o,c=s.lib,d=c.Base,f=s.enc,v=f.Utf8,g=s.algo;g.HMAC=d.extend({init:function(_,C){_=this._hasher=new _.init,typeof C=="string"&&(C=v.parse(C));var b=_.blockSize,T=b*4;C.sigBytes>T&&(C=_.finalize(C)),C.clamp();for(var I=this._oKey=C.clone(),w=this._iKey=C.clone(),x=I.words,N=w.words,P=0;P<b;P++)x[P]^=1549556828,N[P]^=909522486;I.sigBytes=w.sigBytes=T,this.reset()},reset:function(){var _=this._hasher;_.reset(),_.update(this._iKey)},update:function(_){return this._hasher.update(_),this},finalize:function(_){var C=this._hasher,b=C.finalize(_);C.reset();var T=C.finalize(this._oKey.clone().concat(b));return T}})})()})}(hx)),hx.exports}var fx={exports:{}},yW;function gke(){return yW||(yW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),lL(),uL())})(In,function(o){return function(){var s=o,c=s.lib,d=c.Base,f=c.WordArray,v=s.algo,g=v.SHA256,_=v.HMAC,C=v.PBKDF2=d.extend({cfg:d.extend({keySize:128/32,hasher:g,iterations:25e4}),init:function(b){this.cfg=this.cfg.extend(b)},compute:function(b,T){for(var I=this.cfg,w=_.create(I.hasher,b),x=f.create(),N=f.create([1]),P=x.words,O=N.words,L=I.keySize,M=I.iterations;P.length<L;){var F=w.update(T).finalize(N);w.reset();for(var V=F.words,j=V.length,z=F,q=1;q<M;q++){z=w.finalize(z),w.reset();for(var W=z.words,J=0;J<j;J++)V[J]^=W[J]}x.concat(F),O[0]++}return x.sigBytes=L*4,x}});s.PBKDF2=function(b,T,I){return C.create(I).compute(b,T)}}(),o.PBKDF2})}(fx)),fx.exports}var px={exports:{}},CW;function Pd(){return CW||(CW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),$Q(),uL())})(In,function(o){return function(){var s=o,c=s.lib,d=c.Base,f=c.WordArray,v=s.algo,g=v.MD5,_=v.EvpKDF=d.extend({cfg:d.extend({keySize:128/32,hasher:g,iterations:1}),init:function(C){this.cfg=this.cfg.extend(C)},compute:function(C,b){for(var T,I=this.cfg,w=I.hasher.create(),x=f.create(),N=x.words,P=I.keySize,O=I.iterations;N.length<P;){T&&w.update(T),T=w.update(C).finalize(b),w.reset();for(var L=1;L<O;L++)T=w.finalize(T),w.reset();x.concat(T)}return x.sigBytes=P*4,x}});s.EvpKDF=function(C,b,T){return _.create(T).compute(C,b)}}(),o.EvpKDF})}(px)),px.exports}var mx={exports:{}},bW;function Uo(){return bW||(bW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),Pd())})(In,function(o){o.lib.Cipher||function(s){var c=o,d=c.lib,f=d.Base,v=d.WordArray,g=d.BufferedBlockAlgorithm,_=c.enc;_.Utf8;var C=_.Base64,b=c.algo,T=b.EvpKDF,I=d.Cipher=g.extend({cfg:f.extend(),createEncryptor:function(W,J){return this.create(this._ENC_XFORM_MODE,W,J)},createDecryptor:function(W,J){return this.create(this._DEC_XFORM_MODE,W,J)},init:function(W,J,te){this.cfg=this.cfg.extend(te),this._xformMode=W,this._key=J,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(W){return this._append(W),this._process()},finalize:function(W){W&&this._append(W);var J=this._doFinalize();return J},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function W(J){return typeof J=="string"?q:V}return function(J){return{encrypt:function(te,ee,oe){return W(ee).encrypt(J,te,ee,oe)},decrypt:function(te,ee,oe){return W(ee).decrypt(J,te,ee,oe)}}}}()});d.StreamCipher=I.extend({_doFinalize:function(){var W=this._process(!0);return W},blockSize:1});var w=c.mode={},x=d.BlockCipherMode=f.extend({createEncryptor:function(W,J){return this.Encryptor.create(W,J)},createDecryptor:function(W,J){return this.Decryptor.create(W,J)},init:function(W,J){this._cipher=W,this._iv=J}}),N=w.CBC=function(){var W=x.extend();W.Encryptor=W.extend({processBlock:function(te,ee){var oe=this._cipher,pe=oe.blockSize;J.call(this,te,ee,pe),oe.encryptBlock(te,ee),this._prevBlock=te.slice(ee,ee+pe)}}),W.Decryptor=W.extend({processBlock:function(te,ee){var oe=this._cipher,pe=oe.blockSize,ne=te.slice(ee,ee+pe);oe.decryptBlock(te,ee),J.call(this,te,ee,pe),this._prevBlock=ne}});function J(te,ee,oe){var pe,ne=this._iv;ne?(pe=ne,this._iv=s):pe=this._prevBlock;for(var ae=0;ae<oe;ae++)te[ee+ae]^=pe[ae]}return W}(),P=c.pad={},O=P.Pkcs7={pad:function(W,J){for(var te=J*4,ee=te-W.sigBytes%te,oe=ee<<24|ee<<16|ee<<8|ee,pe=[],ne=0;ne<ee;ne+=4)pe.push(oe);var ae=v.create(pe,ee);W.concat(ae)},unpad:function(W){var J=W.words[W.sigBytes-1>>>2]&255;W.sigBytes-=J}};d.BlockCipher=I.extend({cfg:I.cfg.extend({mode:N,padding:O}),reset:function(){var W;I.reset.call(this);var J=this.cfg,te=J.iv,ee=J.mode;this._xformMode==this._ENC_XFORM_MODE?W=ee.createEncryptor:(W=ee.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==W?this._mode.init(this,te&&te.words):(this._mode=W.call(ee,this,te&&te.words),this._mode.__creator=W)},_doProcessBlock:function(W,J){this._mode.processBlock(W,J)},_doFinalize:function(){var W,J=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(J.pad(this._data,this.blockSize),W=this._process(!0)):(W=this._process(!0),J.unpad(W)),W},blockSize:128/32});var L=d.CipherParams=f.extend({init:function(W){this.mixIn(W)},toString:function(W){return(W||this.formatter).stringify(this)}}),M=c.format={},F=M.OpenSSL={stringify:function(W){var J,te=W.ciphertext,ee=W.salt;return ee?J=v.create([1398893684,1701076831]).concat(ee).concat(te):J=te,J.toString(C)},parse:function(W){var J,te=C.parse(W),ee=te.words;return ee[0]==1398893684&&ee[1]==1701076831&&(J=v.create(ee.slice(2,4)),ee.splice(0,4),te.sigBytes-=16),L.create({ciphertext:te,salt:J})}},V=d.SerializableCipher=f.extend({cfg:f.extend({format:F}),encrypt:function(W,J,te,ee){ee=this.cfg.extend(ee);var oe=W.createEncryptor(te,ee),pe=oe.finalize(J),ne=oe.cfg;return L.create({ciphertext:pe,key:te,iv:ne.iv,algorithm:W,mode:ne.mode,padding:ne.padding,blockSize:W.blockSize,formatter:ee.format})},decrypt:function(W,J,te,ee){ee=this.cfg.extend(ee),J=this._parse(J,ee.format);var oe=W.createDecryptor(te,ee).finalize(J.ciphertext);return oe},_parse:function(W,J){return typeof W=="string"?J.parse(W,this):W}}),j=c.kdf={},z=j.OpenSSL={execute:function(W,J,te,ee,oe){if(ee||(ee=v.random(64/8)),oe)var pe=T.create({keySize:J+te,hasher:oe}).compute(W,ee);else var pe=T.create({keySize:J+te}).compute(W,ee);var ne=v.create(pe.words.slice(J),te*4);return pe.sigBytes=J*4,L.create({key:pe,iv:ne,salt:ee})}},q=d.PasswordBasedCipher=V.extend({cfg:V.cfg.extend({kdf:z}),encrypt:function(W,J,te,ee){ee=this.cfg.extend(ee);var oe=ee.kdf.execute(te,W.keySize,W.ivSize,ee.salt,ee.hasher);ee.iv=oe.iv;var pe=V.encrypt.call(this,W,J,oe.key,ee);return pe.mixIn(oe),pe},decrypt:function(W,J,te,ee){ee=this.cfg.extend(ee),J=this._parse(J,ee.format);var oe=ee.kdf.execute(te,W.keySize,W.ivSize,J.salt,ee.hasher);ee.iv=oe.iv;var pe=V.decrypt.call(this,W,J,oe.key,ee);return pe}})}()})}(mx)),mx.exports}var gx={exports:{}},TW;function vke(){return TW||(TW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),Uo())})(In,function(o){return o.mode.CFB=function(){var s=o.lib.BlockCipherMode.extend();s.Encryptor=s.extend({processBlock:function(d,f){var v=this._cipher,g=v.blockSize;c.call(this,d,f,g,v),this._prevBlock=d.slice(f,f+g)}}),s.Decryptor=s.extend({processBlock:function(d,f){var v=this._cipher,g=v.blockSize,_=d.slice(f,f+g);c.call(this,d,f,g,v),this._prevBlock=_}});function c(d,f,v,g){var _,C=this._iv;C?(_=C.slice(0),this._iv=void 0):_=this._prevBlock,g.encryptBlock(_,0);for(var b=0;b<v;b++)d[f+b]^=_[b]}return s}(),o.mode.CFB})}(gx)),gx.exports}var vx={exports:{}},RW;function Eke(){return RW||(RW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),Uo())})(In,function(o){return o.mode.CTR=function(){var s=o.lib.BlockCipherMode.extend(),c=s.Encryptor=s.extend({processBlock:function(d,f){var v=this._cipher,g=v.blockSize,_=this._iv,C=this._counter;_&&(C=this._counter=_.slice(0),this._iv=void 0);var b=C.slice(0);v.encryptBlock(b,0),C[g-1]=C[g-1]+1|0;for(var T=0;T<g;T++)d[f+T]^=b[T]}});return s.Decryptor=c,s}(),o.mode.CTR})}(vx)),vx.exports}var Ex={exports:{}},wW;function _ke(){return wW||(wW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),Uo())})(In,function(o){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return o.mode.CTRGladman=function(){var s=o.lib.BlockCipherMode.extend();function c(v){if((v>>24&255)===255){var g=v>>16&255,_=v>>8&255,C=v&255;g===255?(g=0,_===255?(_=0,C===255?C=0:++C):++_):++g,v=0,v+=g<<16,v+=_<<8,v+=C}else v+=1<<24;return v}function d(v){return(v[0]=c(v[0]))===0&&(v[1]=c(v[1])),v}var f=s.Encryptor=s.extend({processBlock:function(v,g){var _=this._cipher,C=_.blockSize,b=this._iv,T=this._counter;b&&(T=this._counter=b.slice(0),this._iv=void 0),d(T);var I=T.slice(0);_.encryptBlock(I,0);for(var w=0;w<C;w++)v[g+w]^=I[w]}});return s.Decryptor=f,s}(),o.mode.CTRGladman})}(Ex)),Ex.exports}var _x={exports:{}},IW;function Ske(){return IW||(IW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),Uo())})(In,function(o){return o.mode.OFB=function(){var s=o.lib.BlockCipherMode.extend(),c=s.Encryptor=s.extend({processBlock:function(d,f){var v=this._cipher,g=v.blockSize,_=this._iv,C=this._keystream;_&&(C=this._keystream=_.slice(0),this._iv=void 0),v.encryptBlock(C,0);for(var b=0;b<g;b++)d[f+b]^=C[b]}});return s.Decryptor=c,s}(),o.mode.OFB})}(_x)),_x.exports}var Sx={exports:{}},AW;function yke(){return AW||(AW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),Uo())})(In,function(o){return o.mode.ECB=function(){var s=o.lib.BlockCipherMode.extend();return s.Encryptor=s.extend({processBlock:function(c,d){this._cipher.encryptBlock(c,d)}}),s.Decryptor=s.extend({processBlock:function(c,d){this._cipher.decryptBlock(c,d)}}),s}(),o.mode.ECB})}(Sx)),Sx.exports}var yx={exports:{}},OW;function Cke(){return OW||(OW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),Uo())})(In,function(o){return o.pad.AnsiX923={pad:function(s,c){var d=s.sigBytes,f=c*4,v=f-d%f,g=d+v-1;s.clamp(),s.words[g>>>2]|=v<<24-g%4*8,s.sigBytes+=v},unpad:function(s){var c=s.words[s.sigBytes-1>>>2]&255;s.sigBytes-=c}},o.pad.Ansix923})}(yx)),yx.exports}var Cx={exports:{}},xW;function bke(){return xW||(xW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),Uo())})(In,function(o){return o.pad.Iso10126={pad:function(s,c){var d=c*4,f=d-s.sigBytes%d;s.concat(o.lib.WordArray.random(f-1)).concat(o.lib.WordArray.create([f<<24],1))},unpad:function(s){var c=s.words[s.sigBytes-1>>>2]&255;s.sigBytes-=c}},o.pad.Iso10126})}(Cx)),Cx.exports}var bx={exports:{}},NW;function Tke(){return NW||(NW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),Uo())})(In,function(o){return o.pad.Iso97971={pad:function(s,c){s.concat(o.lib.WordArray.create([2147483648],1)),o.pad.ZeroPadding.pad(s,c)},unpad:function(s){o.pad.ZeroPadding.unpad(s),s.sigBytes--}},o.pad.Iso97971})}(bx)),bx.exports}var Tx={exports:{}},PW;function Rke(){return PW||(PW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),Uo())})(In,function(o){return o.pad.ZeroPadding={pad:function(s,c){var d=c*4;s.clamp(),s.sigBytes+=d-(s.sigBytes%d||d)},unpad:function(s){for(var c=s.words,d=s.sigBytes-1,d=s.sigBytes-1;d>=0;d--)if(c[d>>>2]>>>24-d%4*8&255){s.sigBytes=d+1;break}}},o.pad.ZeroPadding})}(Tx)),Tx.exports}var Rx={exports:{}},DW;function wke(){return DW||(DW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),Uo())})(In,function(o){return o.pad.NoPadding={pad:function(){},unpad:function(){}},o.pad.NoPadding})}(Rx)),Rx.exports}var wx={exports:{}},LW;function Ike(){return LW||(LW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),Uo())})(In,function(o){return function(s){var c=o,d=c.lib,f=d.CipherParams,v=c.enc,g=v.Hex,_=c.format;_.Hex={stringify:function(C){return C.ciphertext.toString(g)},parse:function(C){var b=g.parse(C);return f.create({ciphertext:b})}}}(),o.format.Hex})}(wx)),wx.exports}var Ix={exports:{}},kW;function Ake(){return kW||(kW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),of(),af(),Pd(),Uo())})(In,function(o){return function(){var s=o,c=s.lib,d=c.BlockCipher,f=s.algo,v=[],g=[],_=[],C=[],b=[],T=[],I=[],w=[],x=[],N=[];(function(){for(var L=[],M=0;M<256;M++)M<128?L[M]=M<<1:L[M]=M<<1^283;for(var F=0,V=0,M=0;M<256;M++){var j=V^V<<1^V<<2^V<<3^V<<4;j=j>>>8^j&255^99,v[F]=j,g[j]=F;var z=L[F],q=L[z],W=L[q],J=L[j]*257^j*16843008;_[F]=J<<24|J>>>8,C[F]=J<<16|J>>>16,b[F]=J<<8|J>>>24,T[F]=J;var J=W*16843009^q*65537^z*257^F*16843008;I[j]=J<<24|J>>>8,w[j]=J<<16|J>>>16,x[j]=J<<8|J>>>24,N[j]=J,F?(F=z^L[L[L[W^z]]],V^=L[L[V]]):F=V=1}})();var P=[0,1,2,4,8,16,32,64,128,27,54],O=f.AES=d.extend({_doReset:function(){var L;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var M=this._keyPriorReset=this._key,F=M.words,V=M.sigBytes/4,j=this._nRounds=V+6,z=(j+1)*4,q=this._keySchedule=[],W=0;W<z;W++)W<V?q[W]=F[W]:(L=q[W-1],W%V?V>6&&W%V==4&&(L=v[L>>>24]<<24|v[L>>>16&255]<<16|v[L>>>8&255]<<8|v[L&255]):(L=L<<8|L>>>24,L=v[L>>>24]<<24|v[L>>>16&255]<<16|v[L>>>8&255]<<8|v[L&255],L^=P[W/V|0]<<24),q[W]=q[W-V]^L);for(var J=this._invKeySchedule=[],te=0;te<z;te++){var W=z-te;if(te%4)var L=q[W];else var L=q[W-4];te<4||W<=4?J[te]=L:J[te]=I[v[L>>>24]]^w[v[L>>>16&255]]^x[v[L>>>8&255]]^N[v[L&255]]}}},encryptBlock:function(L,M){this._doCryptBlock(L,M,this._keySchedule,_,C,b,T,v)},decryptBlock:function(L,M){var F=L[M+1];L[M+1]=L[M+3],L[M+3]=F,this._doCryptBlock(L,M,this._invKeySchedule,I,w,x,N,g);var F=L[M+1];L[M+1]=L[M+3],L[M+3]=F},_doCryptBlock:function(L,M,F,V,j,z,q,W){for(var J=this._nRounds,te=L[M]^F[0],ee=L[M+1]^F[1],oe=L[M+2]^F[2],pe=L[M+3]^F[3],ne=4,ae=1;ae<J;ae++){var re=V[te>>>24]^j[ee>>>16&255]^z[oe>>>8&255]^q[pe&255]^F[ne++],he=V[ee>>>24]^j[oe>>>16&255]^z[pe>>>8&255]^q[te&255]^F[ne++],fe=V[oe>>>24]^j[pe>>>16&255]^z[te>>>8&255]^q[ee&255]^F[ne++],se=V[pe>>>24]^j[te>>>16&255]^z[ee>>>8&255]^q[oe&255]^F[ne++];te=re,ee=he,oe=fe,pe=se}var re=(W[te>>>24]<<24|W[ee>>>16&255]<<16|W[oe>>>8&255]<<8|W[pe&255])^F[ne++],he=(W[ee>>>24]<<24|W[oe>>>16&255]<<16|W[pe>>>8&255]<<8|W[te&255])^F[ne++],fe=(W[oe>>>24]<<24|W[pe>>>16&255]<<16|W[te>>>8&255]<<8|W[ee&255])^F[ne++],se=(W[pe>>>24]<<24|W[te>>>16&255]<<16|W[ee>>>8&255]<<8|W[oe&255])^F[ne++];L[M]=re,L[M+1]=he,L[M+2]=fe,L[M+3]=se},keySize:256/32});s.AES=d._createHelper(O)}(),o.AES})}(Ix)),Ix.exports}var Ax={exports:{}},MW;function Oke(){return MW||(MW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),of(),af(),Pd(),Uo())})(In,function(o){return function(){var s=o,c=s.lib,d=c.WordArray,f=c.BlockCipher,v=s.algo,g=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],_=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],C=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],b=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],T=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],I=v.DES=f.extend({_doReset:function(){for(var P=this._key,O=P.words,L=[],M=0;M<56;M++){var F=g[M]-1;L[M]=O[F>>>5]>>>31-F%32&1}for(var V=this._subKeys=[],j=0;j<16;j++){for(var z=V[j]=[],q=C[j],M=0;M<24;M++)z[M/6|0]|=L[(_[M]-1+q)%28]<<31-M%6,z[4+(M/6|0)]|=L[28+(_[M+24]-1+q)%28]<<31-M%6;z[0]=z[0]<<1|z[0]>>>31;for(var M=1;M<7;M++)z[M]=z[M]>>>(M-1)*4+3;z[7]=z[7]<<5|z[7]>>>27}for(var W=this._invSubKeys=[],M=0;M<16;M++)W[M]=V[15-M]},encryptBlock:function(P,O){this._doCryptBlock(P,O,this._subKeys)},decryptBlock:function(P,O){this._doCryptBlock(P,O,this._invSubKeys)},_doCryptBlock:function(P,O,L){this._lBlock=P[O],this._rBlock=P[O+1],w.call(this,4,252645135),w.call(this,16,65535),x.call(this,2,858993459),x.call(this,8,16711935),w.call(this,1,1431655765);for(var M=0;M<16;M++){for(var F=L[M],V=this._lBlock,j=this._rBlock,z=0,q=0;q<8;q++)z|=b[q][((j^F[q])&T[q])>>>0];this._lBlock=j,this._rBlock=V^z}var W=this._lBlock;this._lBlock=this._rBlock,this._rBlock=W,w.call(this,1,1431655765),x.call(this,8,16711935),x.call(this,2,858993459),w.call(this,16,65535),w.call(this,4,252645135),P[O]=this._lBlock,P[O+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function w(P,O){var L=(this._lBlock>>>P^this._rBlock)&O;this._rBlock^=L,this._lBlock^=L<<P}function x(P,O){var L=(this._rBlock>>>P^this._lBlock)&O;this._lBlock^=L,this._rBlock^=L<<P}s.DES=f._createHelper(I);var N=v.TripleDES=f.extend({_doReset:function(){var P=this._key,O=P.words;if(O.length!==2&&O.length!==4&&O.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var L=O.slice(0,2),M=O.length<4?O.slice(0,2):O.slice(2,4),F=O.length<6?O.slice(0,2):O.slice(4,6);this._des1=I.createEncryptor(d.create(L)),this._des2=I.createEncryptor(d.create(M)),this._des3=I.createEncryptor(d.create(F))},encryptBlock:function(P,O){this._des1.encryptBlock(P,O),this._des2.decryptBlock(P,O),this._des3.encryptBlock(P,O)},decryptBlock:function(P,O){this._des3.decryptBlock(P,O),this._des2.encryptBlock(P,O),this._des1.decryptBlock(P,O)},keySize:192/32,ivSize:64/32,blockSize:64/32});s.TripleDES=f._createHelper(N)}(),o.TripleDES})}(Ax)),Ax.exports}var Ox={exports:{}},FW;function xke(){return FW||(FW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),of(),af(),Pd(),Uo())})(In,function(o){return function(){var s=o,c=s.lib,d=c.StreamCipher,f=s.algo,v=f.RC4=d.extend({_doReset:function(){for(var C=this._key,b=C.words,T=C.sigBytes,I=this._S=[],w=0;w<256;w++)I[w]=w;for(var w=0,x=0;w<256;w++){var N=w%T,P=b[N>>>2]>>>24-N%4*8&255;x=(x+I[w]+P)%256;var O=I[w];I[w]=I[x],I[x]=O}this._i=this._j=0},_doProcessBlock:function(C,b){C[b]^=g.call(this)},keySize:256/32,ivSize:0});function g(){for(var C=this._S,b=this._i,T=this._j,I=0,w=0;w<4;w++){b=(b+1)%256,T=(T+C[b])%256;var x=C[b];C[b]=C[T],C[T]=x,I|=C[(C[b]+C[T])%256]<<24-w*8}return this._i=b,this._j=T,I}s.RC4=d._createHelper(v);var _=f.RC4Drop=v.extend({cfg:v.cfg.extend({drop:192}),_doReset:function(){v._doReset.call(this);for(var C=this.cfg.drop;C>0;C--)g.call(this)}});s.RC4Drop=d._createHelper(_)}(),o.RC4})}(Ox)),Ox.exports}var xx={exports:{}},UW;function Nke(){return UW||(UW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),of(),af(),Pd(),Uo())})(In,function(o){return function(){var s=o,c=s.lib,d=c.StreamCipher,f=s.algo,v=[],g=[],_=[],C=f.Rabbit=d.extend({_doReset:function(){for(var T=this._key.words,I=this.cfg.iv,w=0;w<4;w++)T[w]=(T[w]<<8|T[w]>>>24)&16711935|(T[w]<<24|T[w]>>>8)&4278255360;var x=this._X=[T[0],T[3]<<16|T[2]>>>16,T[1],T[0]<<16|T[3]>>>16,T[2],T[1]<<16|T[0]>>>16,T[3],T[2]<<16|T[1]>>>16],N=this._C=[T[2]<<16|T[2]>>>16,T[0]&4294901760|T[1]&65535,T[3]<<16|T[3]>>>16,T[1]&4294901760|T[2]&65535,T[0]<<16|T[0]>>>16,T[2]&4294901760|T[3]&65535,T[1]<<16|T[1]>>>16,T[3]&4294901760|T[0]&65535];this._b=0;for(var w=0;w<4;w++)b.call(this);for(var w=0;w<8;w++)N[w]^=x[w+4&7];if(I){var P=I.words,O=P[0],L=P[1],M=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,F=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,V=M>>>16|F&4294901760,j=F<<16|M&65535;N[0]^=M,N[1]^=V,N[2]^=F,N[3]^=j,N[4]^=M,N[5]^=V,N[6]^=F,N[7]^=j;for(var w=0;w<4;w++)b.call(this)}},_doProcessBlock:function(T,I){var w=this._X;b.call(this),v[0]=w[0]^w[5]>>>16^w[3]<<16,v[1]=w[2]^w[7]>>>16^w[5]<<16,v[2]=w[4]^w[1]>>>16^w[7]<<16,v[3]=w[6]^w[3]>>>16^w[1]<<16;for(var x=0;x<4;x++)v[x]=(v[x]<<8|v[x]>>>24)&16711935|(v[x]<<24|v[x]>>>8)&4278255360,T[I+x]^=v[x]},blockSize:128/32,ivSize:64/32});function b(){for(var T=this._X,I=this._C,w=0;w<8;w++)g[w]=I[w];I[0]=I[0]+1295307597+this._b|0,I[1]=I[1]+3545052371+(I[0]>>>0<g[0]>>>0?1:0)|0,I[2]=I[2]+886263092+(I[1]>>>0<g[1]>>>0?1:0)|0,I[3]=I[3]+1295307597+(I[2]>>>0<g[2]>>>0?1:0)|0,I[4]=I[4]+3545052371+(I[3]>>>0<g[3]>>>0?1:0)|0,I[5]=I[5]+886263092+(I[4]>>>0<g[4]>>>0?1:0)|0,I[6]=I[6]+1295307597+(I[5]>>>0<g[5]>>>0?1:0)|0,I[7]=I[7]+3545052371+(I[6]>>>0<g[6]>>>0?1:0)|0,this._b=I[7]>>>0<g[7]>>>0?1:0;for(var w=0;w<8;w++){var x=T[w]+I[w],N=x&65535,P=x>>>16,O=((N*N>>>17)+N*P>>>15)+P*P,L=((x&4294901760)*x|0)+((x&65535)*x|0);_[w]=O^L}T[0]=_[0]+(_[7]<<16|_[7]>>>16)+(_[6]<<16|_[6]>>>16)|0,T[1]=_[1]+(_[0]<<8|_[0]>>>24)+_[7]|0,T[2]=_[2]+(_[1]<<16|_[1]>>>16)+(_[0]<<16|_[0]>>>16)|0,T[3]=_[3]+(_[2]<<8|_[2]>>>24)+_[1]|0,T[4]=_[4]+(_[3]<<16|_[3]>>>16)+(_[2]<<16|_[2]>>>16)|0,T[5]=_[5]+(_[4]<<8|_[4]>>>24)+_[3]|0,T[6]=_[6]+(_[5]<<16|_[5]>>>16)+(_[4]<<16|_[4]>>>16)|0,T[7]=_[7]+(_[6]<<8|_[6]>>>24)+_[5]|0}s.Rabbit=d._createHelper(C)}(),o.Rabbit})}(xx)),xx.exports}var Nx={exports:{}},BW;function Pke(){return BW||(BW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),of(),af(),Pd(),Uo())})(In,function(o){return function(){var s=o,c=s.lib,d=c.StreamCipher,f=s.algo,v=[],g=[],_=[],C=f.RabbitLegacy=d.extend({_doReset:function(){var T=this._key.words,I=this.cfg.iv,w=this._X=[T[0],T[3]<<16|T[2]>>>16,T[1],T[0]<<16|T[3]>>>16,T[2],T[1]<<16|T[0]>>>16,T[3],T[2]<<16|T[1]>>>16],x=this._C=[T[2]<<16|T[2]>>>16,T[0]&4294901760|T[1]&65535,T[3]<<16|T[3]>>>16,T[1]&4294901760|T[2]&65535,T[0]<<16|T[0]>>>16,T[2]&4294901760|T[3]&65535,T[1]<<16|T[1]>>>16,T[3]&4294901760|T[0]&65535];this._b=0;for(var N=0;N<4;N++)b.call(this);for(var N=0;N<8;N++)x[N]^=w[N+4&7];if(I){var P=I.words,O=P[0],L=P[1],M=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,F=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,V=M>>>16|F&4294901760,j=F<<16|M&65535;x[0]^=M,x[1]^=V,x[2]^=F,x[3]^=j,x[4]^=M,x[5]^=V,x[6]^=F,x[7]^=j;for(var N=0;N<4;N++)b.call(this)}},_doProcessBlock:function(T,I){var w=this._X;b.call(this),v[0]=w[0]^w[5]>>>16^w[3]<<16,v[1]=w[2]^w[7]>>>16^w[5]<<16,v[2]=w[4]^w[1]>>>16^w[7]<<16,v[3]=w[6]^w[3]>>>16^w[1]<<16;for(var x=0;x<4;x++)v[x]=(v[x]<<8|v[x]>>>24)&16711935|(v[x]<<24|v[x]>>>8)&4278255360,T[I+x]^=v[x]},blockSize:128/32,ivSize:64/32});function b(){for(var T=this._X,I=this._C,w=0;w<8;w++)g[w]=I[w];I[0]=I[0]+1295307597+this._b|0,I[1]=I[1]+3545052371+(I[0]>>>0<g[0]>>>0?1:0)|0,I[2]=I[2]+886263092+(I[1]>>>0<g[1]>>>0?1:0)|0,I[3]=I[3]+1295307597+(I[2]>>>0<g[2]>>>0?1:0)|0,I[4]=I[4]+3545052371+(I[3]>>>0<g[3]>>>0?1:0)|0,I[5]=I[5]+886263092+(I[4]>>>0<g[4]>>>0?1:0)|0,I[6]=I[6]+1295307597+(I[5]>>>0<g[5]>>>0?1:0)|0,I[7]=I[7]+3545052371+(I[6]>>>0<g[6]>>>0?1:0)|0,this._b=I[7]>>>0<g[7]>>>0?1:0;for(var w=0;w<8;w++){var x=T[w]+I[w],N=x&65535,P=x>>>16,O=((N*N>>>17)+N*P>>>15)+P*P,L=((x&4294901760)*x|0)+((x&65535)*x|0);_[w]=O^L}T[0]=_[0]+(_[7]<<16|_[7]>>>16)+(_[6]<<16|_[6]>>>16)|0,T[1]=_[1]+(_[0]<<8|_[0]>>>24)+_[7]|0,T[2]=_[2]+(_[1]<<16|_[1]>>>16)+(_[0]<<16|_[0]>>>16)|0,T[3]=_[3]+(_[2]<<8|_[2]>>>24)+_[1]|0,T[4]=_[4]+(_[3]<<16|_[3]>>>16)+(_[2]<<16|_[2]>>>16)|0,T[5]=_[5]+(_[4]<<8|_[4]>>>24)+_[3]|0,T[6]=_[6]+(_[5]<<16|_[5]>>>16)+(_[4]<<16|_[4]>>>16)|0,T[7]=_[7]+(_[6]<<8|_[6]>>>24)+_[5]|0}s.RabbitLegacy=d._createHelper(C)}(),o.RabbitLegacy})}(Nx)),Nx.exports}var Px={exports:{}},VW;function Dke(){return VW||(VW=1,function(e,r){(function(o,s,c){e.exports=s(gr(),of(),af(),Pd(),Uo())})(In,function(o){return function(){var s=o,c=s.lib,d=c.BlockCipher,f=s.algo;const v=16,g=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],_=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var C={pbox:[],sbox:[]};function b(N,P){let O=P>>24&255,L=P>>16&255,M=P>>8&255,F=P&255,V=N.sbox[0][O]+N.sbox[1][L];return V=V^N.sbox[2][M],V=V+N.sbox[3][F],V}function T(N,P,O){let L=P,M=O,F;for(let V=0;V<v;++V)L=L^N.pbox[V],M=b(N,L)^M,F=L,L=M,M=F;return F=L,L=M,M=F,M=M^N.pbox[v],L=L^N.pbox[v+1],{left:L,right:M}}function I(N,P,O){let L=P,M=O,F;for(let V=v+1;V>1;--V)L=L^N.pbox[V],M=b(N,L)^M,F=L,L=M,M=F;return F=L,L=M,M=F,M=M^N.pbox[1],L=L^N.pbox[0],{left:L,right:M}}function w(N,P,O){for(let j=0;j<4;j++){N.sbox[j]=[];for(let z=0;z<256;z++)N.sbox[j][z]=_[j][z]}let L=0;for(let j=0;j<v+2;j++)N.pbox[j]=g[j]^P[L],L++,L>=O&&(L=0);let M=0,F=0,V=0;for(let j=0;j<v+2;j+=2)V=T(N,M,F),M=V.left,F=V.right,N.pbox[j]=M,N.pbox[j+1]=F;for(let j=0;j<4;j++)for(let z=0;z<256;z+=2)V=T(N,M,F),M=V.left,F=V.right,N.sbox[j][z]=M,N.sbox[j][z+1]=F;return!0}var x=f.Blowfish=d.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var N=this._keyPriorReset=this._key,P=N.words,O=N.sigBytes/4;w(C,P,O)}},encryptBlock:function(N,P){var O=T(C,N[P],N[P+1]);N[P]=O.left,N[P+1]=O.right},decryptBlock:function(N,P){var O=I(C,N[P],N[P+1]);N[P]=O.left,N[P+1]=O.right},blockSize:64/32,keySize:128/32,ivSize:64/32});s.Blowfish=d._createHelper(x)}(),o.Blowfish})}(Px)),Px.exports}(function(e,r){(function(o,s,c){e.exports=s(gr(),yT(),lke(),uke(),of(),dke(),af(),$Q(),lL(),hke(),HQ(),fke(),pke(),mke(),uL(),gke(),Pd(),Uo(),vke(),Eke(),_ke(),Ske(),yke(),Cke(),bke(),Tke(),Rke(),wke(),Ike(),Ake(),Oke(),xke(),Nke(),Pke(),Dke())})(In,function(o){return o})})(jQ);var Lke=jQ.exports;const jW=wd(Lke);let zQ="U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==";const kke=10;{const e=jW.AES.decrypt("U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==","U2FsdGVkX1/fp5K6GAphzVxz");zQ=JSON.parse(e.toString(jW.enc.Utf8))}const Yt={appId:zQ,channel:{}.AGORA_CHANNEL||"test",token:{}.AGORA_TOKEN?{}.AGORA_TOKEN:null,ShareScreenUID:kke};function Mke(){return[{channel:{}.AGORA_CHANNEL_0||"test0",token:{}.AGORA_TOKEN_0},{channel:{}.AGORA_CHANNEL_1||"test1",token:{}.AGORA_TOKEN_1},{channel:{}.AGORA_CHANNEL_2||"test2",token:{}.AGORA_TOKEN_2},{channel:{}.AGORA_CHANNEL_3||"test3",token:{}.AGORA_TOKEN_3},{channel:{}.AGORA_CHANNEL_4||"test4",token:{}.AGORA_TOKEN_4},{channel:{}.AGORA_CHANNEL_5||"test5",token:{}.AGORA_TOKEN_5},{channel:{}.AGORA_CHANNEL_6||"test6",token:{}.AGORA_TOKEN_6},{channel:{}.AGORA_CHANNEL_7||"test7",token:{}.AGORA_TOKEN_7},{channel:{}.AGORA_CHANNEL_8||"test8",token:{}.AGORA_TOKEN_8},{channel:{}.AGORA_CHANNEL_9||"test9",token:{}.AGORA_TOKEN_9}]}const Gc=e=>{nW(String(e));const r=nke();return nW(),r},kl=()=>"https://www.agora.io/en/wp-content/uploads/2022/10/3d-spatial-audio-icon.svg";function aE({micOn:e,cameraOn:r,renderAction:o,renderLocalUser:s,renderRemoteUsers:c,showUserInfo:d=!0}){const f=gu(),v=fb()||0,g=S.useMemo(()=>Gc(v),[v]),_=S.useMemo(()=>kl(),[]),C=Kc(),b=C.filter(x=>x.hasAudio||x.hasVideo),T=e||r,{localMicrophoneTrack:I}=Sm(e),{localCameraTrack:w}=ym(r);return Ad([I,w]),ue.jsxs(ue.Fragment,{children:[o?o():void 0,d&&ue.jsx(nL,{published:b.length+(T?1:0),total:C.length+1}),ue.jsxs(sc,{children:[f&&(s?s():ue.jsx(sc.Item,{children:ue.jsx(tL,{audioTrack:I,cameraOn:r,cover:_,micOn:e,videoTrack:w,children:ue.jsx(mu,{children:`${g}{${v}}`})})})),c?c():void 0]})]})}const Ny=({children:e,clientConfig:r={mode:"rtc",codec:"vp8"}})=>{const[o]=S.useState(()=>lu.createClient(r));return ue.jsx(LG,{client:o,children:e})},Da=({calling:e,micOn:r,cameraOn:o,setMic:s,setCamera:c,setCalling:d})=>ue.jsx(ue.Fragment,{children:ue.jsxs("div",{className:"inset-0 top-a flex justify-center items-center gap-3 px-6 py-3 bg-#21242c c-coolgray-3",children:[ue.jsxs("div",{className:"flex-1 flex top-0 left-0 h-full items-center gap-3 px-6 py-3",children:[s&&ue.jsx("button",{className:"btn",onClick:()=>s(),children:r?ue.jsx(DLe,{}):ue.jsx(LLe,{})}),c&&ue.jsx("button",{className:"btn",onClick:()=>c(),children:o?ue.jsx(kLe,{}):ue.jsx(MLe,{})})]}),d&&ue.jsx("button",{className:eL("btn btn-phone",{"btn-phone-active":e}),onClick:()=>d(),children:e?ue.jsx("i",{className:"i-mdi-phone-hangup"}):ue.jsx("i",{className:"i-mdi-phone"})})]})}),Fke=({screenShareOn:e,screenTrack:r,onCloseScreenShare:o})=>{const[s]=S.useState(()=>lu.createClient({mode:"rtc",codec:"vp8"})),[c,d]=S.useState(null),[f,v]=S.useState(null);return ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token,uid:Yt.ShareScreenUID},e,s),S.useEffect(()=>{r?Array.isArray(r)?(d(r.filter(g=>g.trackMediaType==="video")[0]),v(r.filter(g=>g.trackMediaType==="audio")[0])):d(r):(v(null),d(null))},[r]),Ad([c,f],e,s),PG(c,"track-ended",()=>{console.log("screen sharing ended"),o&&o()}),ue.jsxs(Q0e,{client:s,children:[e&&c&&ue.jsx(Bv,{disabled:!e,play:e,style:{width:"300px",height:"300px"},track:c}),f&&ue.jsx(pb,{disabled:!e,track:f})]})},$W=e=>{let r;const o=new Set,s=(C,b)=>{const T=typeof C=="function"?C(r):C;if(!Object.is(T,r)){const I=r;r=b??(typeof T!="object"||T===null)?T:Object.assign({},r,T),o.forEach(w=>w(r,I))}},c=()=>r,g={setState:s,getState:c,getInitialState:()=>_,subscribe:C=>(o.add(C),()=>o.delete(C)),destroy:()=>{o.clear()}},_=r=e(s,c,g);return g},Uke=e=>e?$W(e):$W;var WQ={exports:{}},GQ={},KQ={exports:{}},qQ={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm=S;function Bke(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Vke=typeof Object.is=="function"?Object.is:Bke,jke=vm.useState,$ke=vm.useEffect,Hke=vm.useLayoutEffect,zke=vm.useDebugValue;function Wke(e,r){var o=r(),s=jke({inst:{value:o,getSnapshot:r}}),c=s[0].inst,d=s[1];return Hke(function(){c.value=o,c.getSnapshot=r,Dx(c)&&d({inst:c})},[e,o,r]),$ke(function(){return Dx(c)&&d({inst:c}),e(function(){Dx(c)&&d({inst:c})})},[e]),zke(o),o}function Dx(e){var r=e.getSnapshot;e=e.value;try{var o=r();return!Vke(e,o)}catch{return!0}}function Gke(e,r){return r()}var Kke=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Gke:Wke;qQ.useSyncExternalStore=vm.useSyncExternalStore!==void 0?vm.useSyncExternalStore:Kke;KQ.exports=qQ;var qke=KQ.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CT=S,Yke=qke;function Xke(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Jke=typeof Object.is=="function"?Object.is:Xke,Qke=Yke.useSyncExternalStore,Zke=CT.useRef,eMe=CT.useEffect,tMe=CT.useMemo,nMe=CT.useDebugValue;GQ.useSyncExternalStoreWithSelector=function(e,r,o,s,c){var d=Zke(null);if(d.current===null){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=tMe(function(){function g(I){if(!_){if(_=!0,C=I,I=s(I),c!==void 0&&f.hasValue){var w=f.value;if(c(w,I))return b=w}return b=I}if(w=b,Jke(C,I))return w;var x=s(I);return c!==void 0&&c(w,x)?(C=I,w):(C=I,b=x)}var _=!1,C,b,T=o===void 0?null:o;return[function(){return g(r())},T===null?void 0:function(){return g(T())}]},[r,o,s,c]);var v=Qke(e,d[0],d[1]);return eMe(function(){f.hasValue=!0,f.value=v},[v]),nMe(v),v};WQ.exports=GQ;var rMe=WQ.exports;const iMe=wd(rMe),{useDebugValue:oMe}=Ve,{useSyncExternalStoreWithSelector:aMe}=iMe;const sMe=e=>e;function cMe(e,r=sMe,o){const s=aMe(e.subscribe,e.getState,e.getServerState||e.getInitialState,r,o);return oMe(s),s}const HW=e=>{const r=typeof e=="function"?Uke(e):e,o=(s,c)=>cMe(r,s,c);return Object.assign(o,r),o},lMe=e=>e?HW(e):HW,uMe=Yt.appId,dMe=Mke(),Zg=lMe((e,r)=>({getRooms:()=>{let{rooms:o}=r();o=dMe.map(({token:s,channel:c})=>{const d=lu.createClient({mode:"live",codec:"vp8"});return d.join(uMe,c,s||null,null),{channel:c,token:s,client:d}}),e({rooms:o})},selectChannel:async o=>{let{hostRoom:s,localTracks:c}=r();const{rooms:d}=r();if(!o){s&&(c&&s.client.localTracks.length>0&&await s.client.unpublish(c),s.client.setClientRole("audience"),s=null,e({hostRoom:s,localTracks:c}));return}if(s){if(s.client.channelName===o)return;c&&await s.client.unpublish(c),await s.client.setClientRole("audience")}s=d==null?void 0:d.find(f=>f.client.channelName===o),s&&(await s.client.setClientRole("host"),c||(c=await lu.createMicrophoneAndCameraTracks()),await s.client.publish(c)),e({localTracks:c,hostRoom:s})},dispose:()=>{const{rooms:o,hostRoom:s}=r();if(s==null||s.client.leave(),o)for(const c of o)c.client.leave()}}));var hMe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function fMe(e){var r=e.defaultInputValue,o=r===void 0?"":r,s=e.defaultMenuIsOpen,c=s===void 0?!1:s,d=e.defaultValue,f=d===void 0?null:d,v=e.inputValue,g=e.menuIsOpen,_=e.onChange,C=e.onInputChange,b=e.onMenuClose,T=e.onMenuOpen,I=e.value,w=An(e,hMe),x=S.useState(v!==void 0?v:o),N=Ue(x,2),P=N[0],O=N[1],L=S.useState(g!==void 0?g:c),M=Ue(L,2),F=M[0],V=M[1],j=S.useState(I!==void 0?I:f),z=Ue(j,2),q=z[0],W=z[1],J=S.useCallback(function(re,he){typeof _=="function"&&_(re,he),W(re)},[_]),te=S.useCallback(function(re,he){var fe;typeof C=="function"&&(fe=C(re,he)),O(fe!==void 0?fe:re)},[C]),ee=S.useCallback(function(){typeof T=="function"&&T(),V(!0)},[T]),oe=S.useCallback(function(){typeof b=="function"&&b(),V(!1)},[b]),pe=v!==void 0?v:P,ne=g!==void 0?g:F,ae=I!==void 0?I:q;return _e(_e({},w),{},{inputValue:pe,menuIsOpen:ne,onChange:J,onInputChange:te,onMenuClose:oe,onMenuOpen:ee,value:ae})}var pMe=!1;function mMe(e){if(e.sheet)return e.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===e)return document.styleSheets[r]}function gMe(e){var r=document.createElement("style");return r.setAttribute("data-emotion",e.key),e.nonce!==void 0&&r.setAttribute("nonce",e.nonce),r.appendChild(document.createTextNode("")),r.setAttribute("data-s",""),r}var vMe=function(){function e(o){var s=this;this._insertTag=function(c){var d;s.tags.length===0?s.insertionPoint?d=s.insertionPoint.nextSibling:s.prepend?d=s.container.firstChild:d=s.before:d=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(c,d),s.tags.push(c)},this.isSpeedy=o.speedy===void 0?!pMe:o.speedy,this.tags=[],this.ctr=0,this.nonce=o.nonce,this.key=o.key,this.container=o.container,this.prepend=o.prepend,this.insertionPoint=o.insertionPoint,this.before=null}var r=e.prototype;return r.hydrate=function(s){s.forEach(this._insertTag)},r.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(gMe(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var d=mMe(c);try{d.insertRule(s,d.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(s));this.ctr++},r.flush=function(){this.tags.forEach(function(s){var c;return(c=s.parentNode)==null?void 0:c.removeChild(s)}),this.tags=[],this.ctr=0},e}(),ma="-ms-",rb="-moz-",Lr="-webkit-",YQ="comm",dL="rule",hL="decl",EMe="@import",XQ="@keyframes",_Me="@layer",SMe=Math.abs,bT=String.fromCharCode,yMe=Object.assign;function CMe(e,r){return Zo(e,0)^45?(((r<<2^Zo(e,0))<<2^Zo(e,1))<<2^Zo(e,2))<<2^Zo(e,3):0}function JQ(e){return e.trim()}function bMe(e,r){return(e=r.exec(e))?e[0]:e}function kr(e,r,o){return e.replace(r,o)}function YP(e,r){return e.indexOf(r)}function Zo(e,r){return e.charCodeAt(r)|0}function Lv(e,r,o){return e.slice(r,o)}function wl(e){return e.length}function fL(e){return e.length}function Py(e,r){return r.push(e),e}function TMe(e,r){return e.map(r).join("")}var TT=1,Em=1,QQ=0,ts=0,ho=0,Fm="";function RT(e,r,o,s,c,d,f){return{value:e,root:r,parent:o,type:s,props:c,children:d,line:TT,column:Em,length:f,return:""}}function Ag(e,r){return yMe(RT("",null,null,"",null,null,0),e,{length:-e.length},r)}function RMe(){return ho}function wMe(){return ho=ts>0?Zo(Fm,--ts):0,Em--,ho===10&&(Em=1,TT--),ho}function bs(){return ho=ts<QQ?Zo(Fm,ts++):0,Em++,ho===10&&(Em=1,TT++),ho}function Pl(){return Zo(Fm,ts)}function sC(){return ts}function sE(e,r){return Lv(Fm,e,r)}function kv(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ZQ(e){return TT=Em=1,QQ=wl(Fm=e),ts=0,[]}function eZ(e){return Fm="",e}function cC(e){return JQ(sE(ts-1,XP(e===91?e+2:e===40?e+1:e)))}function IMe(e){for(;(ho=Pl())&&ho<33;)bs();return kv(e)>2||kv(ho)>3?"":" "}function AMe(e,r){for(;--r&&bs()&&!(ho<48||ho>102||ho>57&&ho<65||ho>70&&ho<97););return sE(e,sC()+(r<6&&Pl()==32&&bs()==32))}function XP(e){for(;bs();)switch(ho){case e:return ts;case 34:case 39:e!==34&&e!==39&&XP(ho);break;case 40:e===41&&XP(e);break;case 92:bs();break}return ts}function OMe(e,r){for(;bs()&&e+ho!==47+10;)if(e+ho===42+42&&Pl()===47)break;return"/*"+sE(r,ts-1)+"*"+bT(e===47?e:bs())}function xMe(e){for(;!kv(Pl());)bs();return sE(e,ts)}function NMe(e){return eZ(lC("",null,null,null,[""],e=ZQ(e),0,[0],e))}function lC(e,r,o,s,c,d,f,v,g){for(var _=0,C=0,b=f,T=0,I=0,w=0,x=1,N=1,P=1,O=0,L="",M=c,F=d,V=s,j=L;N;)switch(w=O,O=bs()){case 40:if(w!=108&&Zo(j,b-1)==58){YP(j+=kr(cC(O),"&","&\f"),"&\f")!=-1&&(P=-1);break}case 34:case 39:case 91:j+=cC(O);break;case 9:case 10:case 13:case 32:j+=IMe(w);break;case 92:j+=AMe(sC()-1,7);continue;case 47:switch(Pl()){case 42:case 47:Py(PMe(OMe(bs(),sC()),r,o),g);break;default:j+="/"}break;case 123*x:v[_++]=wl(j)*P;case 125*x:case 59:case 0:switch(O){case 0:case 125:N=0;case 59+C:P==-1&&(j=kr(j,/\f/g,"")),I>0&&wl(j)-b&&Py(I>32?WW(j+";",s,o,b-1):WW(kr(j," ","")+";",s,o,b-2),g);break;case 59:j+=";";default:if(Py(V=zW(j,r,o,_,C,c,v,L,M=[],F=[],b),d),O===123)if(C===0)lC(j,r,V,V,M,d,b,v,F);else switch(T===99&&Zo(j,3)===110?100:T){case 100:case 108:case 109:case 115:lC(e,V,V,s&&Py(zW(e,V,V,0,0,c,v,L,c,M=[],b),F),c,F,b,v,s?M:F);break;default:lC(j,V,V,V,[""],F,0,v,F)}}_=C=I=0,x=P=1,L=j="",b=f;break;case 58:b=1+wl(j),I=w;default:if(x<1){if(O==123)--x;else if(O==125&&x++==0&&wMe()==125)continue}switch(j+=bT(O),O*x){case 38:P=C>0?1:(j+="\f",-1);break;case 44:v[_++]=(wl(j)-1)*P,P=1;break;case 64:Pl()===45&&(j+=cC(bs())),T=Pl(),C=b=wl(L=j+=xMe(sC())),O++;break;case 45:w===45&&wl(j)==2&&(x=0)}}return d}function zW(e,r,o,s,c,d,f,v,g,_,C){for(var b=c-1,T=c===0?d:[""],I=fL(T),w=0,x=0,N=0;w<s;++w)for(var P=0,O=Lv(e,b+1,b=SMe(x=f[w])),L=e;P<I;++P)(L=JQ(x>0?T[P]+" "+O:kr(O,/&\f/g,T[P])))&&(g[N++]=L);return RT(e,r,o,c===0?dL:v,g,_,C)}function PMe(e,r,o){return RT(e,r,o,YQ,bT(RMe()),Lv(e,2,-2),0)}function WW(e,r,o,s){return RT(e,r,o,hL,Lv(e,0,s),Lv(e,s+1,-1),s)}function im(e,r){for(var o="",s=fL(e),c=0;c<s;c++)o+=r(e[c],c,e,r)||"";return o}function DMe(e,r,o,s){switch(e.type){case _Me:if(e.children.length)break;case EMe:case hL:return e.return=e.return||e.value;case YQ:return"";case XQ:return e.return=e.value+"{"+im(e.children,s)+"}";case dL:e.value=e.props.join(",")}return wl(o=im(e.children,s))?e.return=e.value+"{"+o+"}":""}function LMe(e){var r=fL(e);return function(o,s,c,d){for(var f="",v=0;v<r;v++)f+=e[v](o,s,c,d)||"";return f}}function kMe(e){return function(r){r.root||(r=r.return)&&e(r)}}function MMe(e){var r=Object.create(null);return function(o){return r[o]===void 0&&(r[o]=e(o)),r[o]}}var FMe=function(r,o,s){for(var c=0,d=0;c=d,d=Pl(),c===38&&d===12&&(o[s]=1),!kv(d);)bs();return sE(r,ts)},UMe=function(r,o){var s=-1,c=44;do switch(kv(c)){case 0:c===38&&Pl()===12&&(o[s]=1),r[s]+=FMe(ts-1,o,s);break;case 2:r[s]+=cC(c);break;case 4:if(c===44){r[++s]=Pl()===58?"&\f":"",o[s]=r[s].length;break}default:r[s]+=bT(c)}while(c=bs());return r},BMe=function(r,o){return eZ(UMe(ZQ(r),o))},GW=new WeakMap,VMe=function(r){if(!(r.type!=="rule"||!r.parent||r.length<1)){for(var o=r.value,s=r.parent,c=r.column===s.column&&r.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(r.props.length===1&&o.charCodeAt(0)!==58&&!GW.get(s))&&!c){GW.set(r,!0);for(var d=[],f=BMe(o,d),v=s.props,g=0,_=0;g<f.length;g++)for(var C=0;C<v.length;C++,_++)r.props[_]=d[g]?f[g].replace(/&\f/g,v[C]):v[C]+" "+f[g]}}},jMe=function(r){if(r.type==="decl"){var o=r.value;o.charCodeAt(0)===108&&o.charCodeAt(2)===98&&(r.return="",r.value="")}};function tZ(e,r){switch(CMe(e,r)){case 5103:return Lr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Lr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Lr+e+rb+e+ma+e+e;case 6828:case 4268:return Lr+e+ma+e+e;case 6165:return Lr+e+ma+"flex-"+e+e;case 5187:return Lr+e+kr(e,/(\w+).+(:[^]+)/,Lr+"box-$1$2"+ma+"flex-$1$2")+e;case 5443:return Lr+e+ma+"flex-item-"+kr(e,/flex-|-self/,"")+e;case 4675:return Lr+e+ma+"flex-line-pack"+kr(e,/align-content|flex-|-self/,"")+e;case 5548:return Lr+e+ma+kr(e,"shrink","negative")+e;case 5292:return Lr+e+ma+kr(e,"basis","preferred-size")+e;case 6060:return Lr+"box-"+kr(e,"-grow","")+Lr+e+ma+kr(e,"grow","positive")+e;case 4554:return Lr+kr(e,/([^-])(transform)/g,"$1"+Lr+"$2")+e;case 6187:return kr(kr(kr(e,/(zoom-|grab)/,Lr+"$1"),/(image-set)/,Lr+"$1"),e,"")+e;case 5495:case 3959:return kr(e,/(image-set\([^]*)/,Lr+"$1$`$1");case 4968:return kr(kr(e,/(.+:)(flex-)?(.*)/,Lr+"box-pack:$3"+ma+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Lr+e+e;case 4095:case 3583:case 4068:case 2532:return kr(e,/(.+)-inline(.+)/,Lr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(wl(e)-1-r>6)switch(Zo(e,r+1)){case 109:if(Zo(e,r+4)!==45)break;case 102:return kr(e,/(.+:)(.+)-([^]+)/,"$1"+Lr+"$2-$3$1"+rb+(Zo(e,r+3)==108?"$3":"$2-$3"))+e;case 115:return~YP(e,"stretch")?tZ(kr(e,"stretch","fill-available"),r)+e:e}break;case 4949:if(Zo(e,r+1)!==115)break;case 6444:switch(Zo(e,wl(e)-3-(~YP(e,"!important")&&10))){case 107:return kr(e,":",":"+Lr)+e;case 101:return kr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Lr+(Zo(e,14)===45?"inline-":"")+"box$3$1"+Lr+"$2$3$1"+ma+"$2box$3")+e}break;case 5936:switch(Zo(e,r+11)){case 114:return Lr+e+ma+kr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Lr+e+ma+kr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Lr+e+ma+kr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Lr+e+ma+e+e}return e}var $Me=function(r,o,s,c){if(r.length>-1&&!r.return)switch(r.type){case hL:r.return=tZ(r.value,r.length);break;case XQ:return im([Ag(r,{value:kr(r.value,"@","@"+Lr)})],c);case dL:if(r.length)return TMe(r.props,function(d){switch(bMe(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return im([Ag(r,{props:[kr(d,/:(read-\w+)/,":"+rb+"$1")]})],c);case"::placeholder":return im([Ag(r,{props:[kr(d,/:(plac\w+)/,":"+Lr+"input-$1")]}),Ag(r,{props:[kr(d,/:(plac\w+)/,":"+rb+"$1")]}),Ag(r,{props:[kr(d,/:(plac\w+)/,ma+"input-$1")]})],c)}return""})}},HMe=[$Me],zMe=function(r){var o=r.key;if(o==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(x){var N=x.getAttribute("data-emotion");N.indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var c=r.stylisPlugins||HMe,d={},f,v=[];f=r.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+o+' "]'),function(x){for(var N=x.getAttribute("data-emotion").split(" "),P=1;P<N.length;P++)d[N[P]]=!0;v.push(x)});var g,_=[VMe,jMe];{var C,b=[DMe,kMe(function(x){C.insert(x)})],T=LMe(_.concat(c,b)),I=function(N){return im(NMe(N),T)};g=function(N,P,O,L){C=O,I(N?N+"{"+P.styles+"}":P.styles),L&&(w.inserted[P.name]=!0)}}var w={key:o,sheet:new vMe({key:o,container:f,nonce:r.nonce,speedy:r.speedy,prepend:r.prepend,insertionPoint:r.insertionPoint}),nonce:r.nonce,inserted:d,registered:{},insert:g};return w.sheet.hydrate(v),w},nZ={exports:{}},Jr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bo=typeof Symbol=="function"&&Symbol.for,pL=Bo?Symbol.for("react.element"):60103,mL=Bo?Symbol.for("react.portal"):60106,wT=Bo?Symbol.for("react.fragment"):60107,IT=Bo?Symbol.for("react.strict_mode"):60108,AT=Bo?Symbol.for("react.profiler"):60114,OT=Bo?Symbol.for("react.provider"):60109,xT=Bo?Symbol.for("react.context"):60110,gL=Bo?Symbol.for("react.async_mode"):60111,NT=Bo?Symbol.for("react.concurrent_mode"):60111,PT=Bo?Symbol.for("react.forward_ref"):60112,DT=Bo?Symbol.for("react.suspense"):60113,WMe=Bo?Symbol.for("react.suspense_list"):60120,LT=Bo?Symbol.for("react.memo"):60115,kT=Bo?Symbol.for("react.lazy"):60116,GMe=Bo?Symbol.for("react.block"):60121,KMe=Bo?Symbol.for("react.fundamental"):60117,qMe=Bo?Symbol.for("react.responder"):60118,YMe=Bo?Symbol.for("react.scope"):60119;function xs(e){if(typeof e=="object"&&e!==null){var r=e.$$typeof;switch(r){case pL:switch(e=e.type,e){case gL:case NT:case wT:case AT:case IT:case DT:return e;default:switch(e=e&&e.$$typeof,e){case xT:case PT:case kT:case LT:case OT:return e;default:return r}}case mL:return r}}}function rZ(e){return xs(e)===NT}Jr.AsyncMode=gL;Jr.ConcurrentMode=NT;Jr.ContextConsumer=xT;Jr.ContextProvider=OT;Jr.Element=pL;Jr.ForwardRef=PT;Jr.Fragment=wT;Jr.Lazy=kT;Jr.Memo=LT;Jr.Portal=mL;Jr.Profiler=AT;Jr.StrictMode=IT;Jr.Suspense=DT;Jr.isAsyncMode=function(e){return rZ(e)||xs(e)===gL};Jr.isConcurrentMode=rZ;Jr.isContextConsumer=function(e){return xs(e)===xT};Jr.isContextProvider=function(e){return xs(e)===OT};Jr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===pL};Jr.isForwardRef=function(e){return xs(e)===PT};Jr.isFragment=function(e){return xs(e)===wT};Jr.isLazy=function(e){return xs(e)===kT};Jr.isMemo=function(e){return xs(e)===LT};Jr.isPortal=function(e){return xs(e)===mL};Jr.isProfiler=function(e){return xs(e)===AT};Jr.isStrictMode=function(e){return xs(e)===IT};Jr.isSuspense=function(e){return xs(e)===DT};Jr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===wT||e===NT||e===AT||e===IT||e===DT||e===WMe||typeof e=="object"&&e!==null&&(e.$$typeof===kT||e.$$typeof===LT||e.$$typeof===OT||e.$$typeof===xT||e.$$typeof===PT||e.$$typeof===KMe||e.$$typeof===qMe||e.$$typeof===YMe||e.$$typeof===GMe)};Jr.typeOf=xs;nZ.exports=Jr;var XMe=nZ.exports,iZ=XMe,JMe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},QMe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},oZ={};oZ[iZ.ForwardRef]=JMe;oZ[iZ.Memo]=QMe;var ZMe=!0;function eFe(e,r,o){var s="";return o.split(" ").forEach(function(c){e[c]!==void 0?r.push(e[c]+";"):c&&(s+=c+" ")}),s}var aZ=function(r,o,s){var c=r.key+"-"+o.name;(s===!1||ZMe===!1)&&r.registered[c]===void 0&&(r.registered[c]=o.styles)},tFe=function(r,o,s){aZ(r,o,s);var c=r.key+"-"+o.name;if(r.inserted[o.name]===void 0){var d=o;do r.insert(o===d?"."+c:"",d,r.sheet,!0),d=d.next;while(d!==void 0)}};function nFe(e){for(var r=0,o,s=0,c=e.length;c>=4;++s,c-=4)o=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,r=(o&65535)*1540483477+((o>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(c){case 3:r^=(e.charCodeAt(s+2)&255)<<16;case 2:r^=(e.charCodeAt(s+1)&255)<<8;case 1:r^=e.charCodeAt(s)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}var rFe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},iFe=!1,oFe=/[A-Z]|^ms/g,aFe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,sZ=function(r){return r.charCodeAt(1)===45},KW=function(r){return r!=null&&typeof r!="boolean"},Lx=MMe(function(e){return sZ(e)?e:e.replace(oFe,"-$&").toLowerCase()}),qW=function(r,o){switch(r){case"animation":case"animationName":if(typeof o=="string")return o.replace(aFe,function(s,c,d){return Il={name:c,styles:d,next:Il},c})}return rFe[r]!==1&&!sZ(r)&&typeof o=="number"&&o!==0?o+"px":o},sFe="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Mv(e,r,o){if(o==null)return"";var s=o;if(s.__emotion_styles!==void 0)return s;switch(typeof o){case"boolean":return"";case"object":{var c=o;if(c.anim===1)return Il={name:c.name,styles:c.styles,next:Il},c.name;var d=o;if(d.styles!==void 0){var f=d.next;if(f!==void 0)for(;f!==void 0;)Il={name:f.name,styles:f.styles,next:Il},f=f.next;var v=d.styles+";";return v}return cFe(e,r,o)}case"function":{if(e!==void 0){var g=Il,_=o(e);return Il=g,Mv(e,r,_)}break}}var C=o;if(r==null)return C;var b=r[C];return b!==void 0?b:C}function cFe(e,r,o){var s="";if(Array.isArray(o))for(var c=0;c<o.length;c++)s+=Mv(e,r,o[c])+";";else for(var d in o){var f=o[d];if(typeof f!="object"){var v=f;r!=null&&r[v]!==void 0?s+=d+"{"+r[v]+"}":KW(v)&&(s+=Lx(d)+":"+qW(d,v)+";")}else{if(d==="NO_COMPONENT_SELECTOR"&&iFe)throw new Error(sFe);if(Array.isArray(f)&&typeof f[0]=="string"&&(r==null||r[f[0]]===void 0))for(var g=0;g<f.length;g++)KW(f[g])&&(s+=Lx(d)+":"+qW(d,f[g])+";");else{var _=Mv(e,r,f);switch(d){case"animation":case"animationName":{s+=Lx(d)+":"+_+";";break}default:s+=d+"{"+_+"}"}}}}return s}var YW=/label:\s*([^\s;{]+)\s*(;|$)/g,Il;function cZ(e,r,o){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,c="";Il=void 0;var d=e[0];if(d==null||d.raw===void 0)s=!1,c+=Mv(o,r,d);else{var f=d;c+=f[0]}for(var v=1;v<e.length;v++)if(c+=Mv(o,r,e[v]),s){var g=d;c+=g[v]}YW.lastIndex=0;for(var _="",C;(C=YW.exec(c))!==null;)_+="-"+C[1];var b=nFe(c)+_;return{name:b,styles:c,next:Il}}var lFe=function(r){return r()},uFe=Fh["useInsertionEffect"]?Fh["useInsertionEffect"]:!1,dFe=uFe||lFe,hFe=!1,lZ=S.createContext(typeof HTMLElement<"u"?zMe({key:"css"}):null);lZ.Provider;var fFe=function(r){return S.forwardRef(function(o,s){var c=S.useContext(lZ);return r(o,c,s)})},pFe=S.createContext({}),vL={}.hasOwnProperty,JP="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",mFe=function(r,o){var s={};for(var c in o)vL.call(o,c)&&(s[c]=o[c]);return s[JP]=r,s},gFe=function(r){var o=r.cache,s=r.serialized,c=r.isStringTag;return aZ(o,s,c),dFe(function(){return tFe(o,s,c)}),null},vFe=fFe(function(e,r,o){var s=e.css;typeof s=="string"&&r.registered[s]!==void 0&&(s=r.registered[s]);var c=e[JP],d=[s],f="";typeof e.className=="string"?f=eFe(r.registered,d,e.className):e.className!=null&&(f=e.className+" ");var v=cZ(d,void 0,S.useContext(pFe));f+=r.key+"-"+v.name;var g={};for(var _ in e)vL.call(e,_)&&_!=="css"&&_!==JP&&!hFe&&(g[_]=e[_]);return g.className=f,o&&(g.ref=o),S.createElement(S.Fragment,null,S.createElement(gFe,{cache:r,serialized:v,isStringTag:typeof c=="string"}),S.createElement(c,g))}),EFe=vFe,fn=function(r,o){var s=arguments;if(o==null||!vL.call(o,"css"))return S.createElement.apply(void 0,s);var c=s.length,d=new Array(c);d[0]=EFe,d[1]=mFe(r,o);for(var f=2;f<c;f++)d[f]=s[f];return S.createElement.apply(null,d)};(function(e){var r;r||(r=e.JSX||(e.JSX={}))})(fn||(fn={}));function EL(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return cZ(r)}function _Fe(){var e=EL.apply(void 0,arguments),r="animation-"+e.name;return{name:r,styles:"@keyframes "+r+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function SFe(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}const yFe=Math.min,CFe=Math.max,ib=Math.round,Dy=Math.floor,ob=e=>({x:e,y:e});function bFe(e){const{x:r,y:o,width:s,height:c}=e;return{width:s,height:c,top:o,left:r,right:r+s,bottom:o+c,x:r,y:o}}function MT(){return typeof window<"u"}function uZ(e){return hZ(e)?(e.nodeName||"").toLowerCase():"#document"}function $c(e){var r;return(e==null||(r=e.ownerDocument)==null?void 0:r.defaultView)||window}function dZ(e){var r;return(r=(hZ(e)?e.ownerDocument:e.document)||window.document)==null?void 0:r.documentElement}function hZ(e){return MT()?e instanceof Node||e instanceof $c(e).Node:!1}function QP(e){return MT()?e instanceof Element||e instanceof $c(e).Element:!1}function _L(e){return MT()?e instanceof HTMLElement||e instanceof $c(e).HTMLElement:!1}function XW(e){return!MT()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof $c(e).ShadowRoot}function fZ(e){const{overflow:r,overflowX:o,overflowY:s,display:c}=SL(e);return/auto|scroll|overlay|hidden|clip/.test(r+s+o)&&!["inline","contents"].includes(c)}function TFe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function RFe(e){return["html","body","#document"].includes(uZ(e))}function SL(e){return $c(e).getComputedStyle(e)}function wFe(e){if(uZ(e)==="html")return e;const r=e.assignedSlot||e.parentNode||XW(e)&&e.host||dZ(e);return XW(r)?r.host:r}function pZ(e){const r=wFe(e);return RFe(r)?e.ownerDocument?e.ownerDocument.body:e.body:_L(r)&&fZ(r)?r:pZ(r)}function ab(e,r,o){var s;r===void 0&&(r=[]),o===void 0&&(o=!0);const c=pZ(e),d=c===((s=e.ownerDocument)==null?void 0:s.body),f=$c(c);if(d){const v=ZP(f);return r.concat(f,f.visualViewport||[],fZ(c)?c:[],v&&o?ab(v):[])}return r.concat(c,ab(c,[],o))}function ZP(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function IFe(e){const r=SL(e);let o=parseFloat(r.width)||0,s=parseFloat(r.height)||0;const c=_L(e),d=c?e.offsetWidth:o,f=c?e.offsetHeight:s,v=ib(o)!==d||ib(s)!==f;return v&&(o=d,s=f),{width:o,height:s,$:v}}function yL(e){return QP(e)?e:e.contextElement}function kx(e){const r=yL(e);if(!_L(r))return ob(1);const o=r.getBoundingClientRect(),{width:s,height:c,$:d}=IFe(r);let f=(d?ib(o.width):o.width)/s,v=(d?ib(o.height):o.height)/c;return(!f||!Number.isFinite(f))&&(f=1),(!v||!Number.isFinite(v))&&(v=1),{x:f,y:v}}const AFe=ob(0);function OFe(e){const r=$c(e);return!TFe()||!r.visualViewport?AFe:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function xFe(e,r,o){return r===void 0&&(r=!1),!o||r&&o!==$c(e)?!1:r}function JW(e,r,o,s){r===void 0&&(r=!1),o===void 0&&(o=!1);const c=e.getBoundingClientRect(),d=yL(e);let f=ob(1);r&&(s?QP(s)&&(f=kx(s)):f=kx(e));const v=xFe(d,o,s)?OFe(d):ob(0);let g=(c.left+v.x)/f.x,_=(c.top+v.y)/f.y,C=c.width/f.x,b=c.height/f.y;if(d){const T=$c(d),I=s&&QP(s)?$c(s):s;let w=T,x=ZP(w);for(;x&&s&&I!==w;){const N=kx(x),P=x.getBoundingClientRect(),O=SL(x),L=P.left+(x.clientLeft+parseFloat(O.paddingLeft))*N.x,M=P.top+(x.clientTop+parseFloat(O.paddingTop))*N.y;g*=N.x,_*=N.y,C*=N.x,b*=N.y,g+=L,_+=M,w=$c(x),x=ZP(w)}}return bFe({width:C,height:b,x:g,y:_})}function mZ(e,r){return e.x===r.x&&e.y===r.y&&e.width===r.width&&e.height===r.height}function NFe(e,r){let o=null,s;const c=dZ(e);function d(){var v;clearTimeout(s),(v=o)==null||v.disconnect(),o=null}function f(v,g){v===void 0&&(v=!1),g===void 0&&(g=1),d();const _=e.getBoundingClientRect(),{left:C,top:b,width:T,height:I}=_;if(v||r(),!T||!I)return;const w=Dy(b),x=Dy(c.clientWidth-(C+T)),N=Dy(c.clientHeight-(b+I)),P=Dy(C),L={rootMargin:-w+"px "+-x+"px "+-N+"px "+-P+"px",threshold:CFe(0,yFe(1,g))||1};let M=!0;function F(V){const j=V[0].intersectionRatio;if(j!==g){if(!M)return f();j?f(!1,j):s=setTimeout(()=>{f(!1,1e-7)},1e3)}j===1&&!mZ(_,e.getBoundingClientRect())&&f(),M=!1}try{o=new IntersectionObserver(F,{...L,root:c.ownerDocument})}catch{o=new IntersectionObserver(F,L)}o.observe(e)}return f(!0),d}function PFe(e,r,o,s){s===void 0&&(s={});const{ancestorScroll:c=!0,ancestorResize:d=!0,elementResize:f=typeof ResizeObserver=="function",layoutShift:v=typeof IntersectionObserver=="function",animationFrame:g=!1}=s,_=yL(e),C=c||d?[..._?ab(_):[],...ab(r)]:[];C.forEach(P=>{c&&P.addEventListener("scroll",o,{passive:!0}),d&&P.addEventListener("resize",o)});const b=_&&v?NFe(_,o):null;let T=-1,I=null;f&&(I=new ResizeObserver(P=>{let[O]=P;O&&O.target===_&&I&&(I.unobserve(r),cancelAnimationFrame(T),T=requestAnimationFrame(()=>{var L;(L=I)==null||L.observe(r)})),o()}),_&&!g&&I.observe(_),I.observe(r));let w,x=g?JW(e):null;g&&N();function N(){const P=JW(e);x&&!mZ(x,P)&&o(),x=P,w=requestAnimationFrame(N)}return o(),()=>{var P;C.forEach(O=>{c&&O.removeEventListener("scroll",o),d&&O.removeEventListener("resize",o)}),b==null||b(),(P=I)==null||P.disconnect(),I=null,g&&cancelAnimationFrame(w)}}var eD=S.useLayoutEffect,DFe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],sb=function(){};function LFe(e,r){return r?r[0]==="-"?e+r:e+"__"+r:e}function kFe(e,r){for(var o=arguments.length,s=new Array(o>2?o-2:0),c=2;c<o;c++)s[c-2]=arguments[c];var d=[].concat(s);if(r&&e)for(var f in r)r.hasOwnProperty(f)&&r[f]&&d.push("".concat(LFe(e,f)));return d.filter(function(v){return v}).map(function(v){return String(v).trim()}).join(" ")}var QW=function(r){return zFe(r)?r.filter(Boolean):on(r)==="object"&&r!==null?[r]:[]},gZ=function(r){r.className,r.clearValue,r.cx,r.getStyles,r.getClassNames,r.getValue,r.hasValue,r.isMulti,r.isRtl,r.options,r.selectOption,r.selectProps,r.setValue,r.theme;var o=An(r,DFe);return _e({},o)},Yi=function(r,o,s){var c=r.cx,d=r.getStyles,f=r.getClassNames,v=r.className;return{css:d(o,r),className:c(s??{},f(o,r),v)}};function FT(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function MFe(e){return FT(e)?window.innerHeight:e.clientHeight}function vZ(e){return FT(e)?window.pageYOffset:e.scrollTop}function cb(e,r){if(FT(e)){window.scrollTo(0,r);return}e.scrollTop=r}function FFe(e){var r=getComputedStyle(e),o=r.position==="absolute",s=/(auto|scroll)/;if(r.position==="fixed")return document.documentElement;for(var c=e;c=c.parentElement;)if(r=getComputedStyle(c),!(o&&r.position==="static")&&s.test(r.overflow+r.overflowY+r.overflowX))return c;return document.documentElement}function UFe(e,r,o,s){return o*((e=e/s-1)*e*e+1)+r}function Ly(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:sb,c=vZ(e),d=r-c,f=10,v=0;function g(){v+=f;var _=UFe(v,c,d,o);cb(e,_),v<o?window.requestAnimationFrame(g):s(e)}g()}function ZW(e,r){var o=e.getBoundingClientRect(),s=r.getBoundingClientRect(),c=r.offsetHeight/3;s.bottom+c>o.bottom?cb(e,Math.min(r.offsetTop+r.clientHeight-e.offsetHeight+c,e.scrollHeight)):s.top-c<o.top&&cb(e,Math.max(r.offsetTop-c,0))}function BFe(e){var r=e.getBoundingClientRect();return{bottom:r.bottom,height:r.height,left:r.left,right:r.right,top:r.top,width:r.width}}function eG(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function VFe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var EZ=!1,jFe={get passive(){return EZ=!0}},ky=typeof window<"u"?window:{};ky.addEventListener&&ky.removeEventListener&&(ky.addEventListener("p",sb,jFe),ky.removeEventListener("p",sb,!1));var $Fe=EZ;function HFe(e){return e!=null}function zFe(e){return Array.isArray(e)}function My(e,r,o){return e?r:o}var WFe=function(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),c=1;c<o;c++)s[c-1]=arguments[c];var d=Object.entries(r).filter(function(f){var v=Ue(f,1),g=v[0];return!s.includes(g)});return d.reduce(function(f,v){var g=Ue(v,2),_=g[0],C=g[1];return f[_]=C,f},{})},GFe=["children","innerProps"],KFe=["children","innerProps"];function qFe(e){var r=e.maxHeight,o=e.menuEl,s=e.minHeight,c=e.placement,d=e.shouldScroll,f=e.isFixedPosition,v=e.controlHeight,g=FFe(o),_={placement:"bottom",maxHeight:r};if(!o||!o.offsetParent)return _;var C=g.getBoundingClientRect(),b=C.height,T=o.getBoundingClientRect(),I=T.bottom,w=T.height,x=T.top,N=o.offsetParent.getBoundingClientRect(),P=N.top,O=f?window.innerHeight:MFe(g),L=vZ(g),M=parseInt(getComputedStyle(o).marginBottom,10),F=parseInt(getComputedStyle(o).marginTop,10),V=P-F,j=O-x,z=V+L,q=b-L-x,W=I-O+L+M,J=L+x-F,te=160;switch(c){case"auto":case"bottom":if(j>=w)return{placement:"bottom",maxHeight:r};if(q>=w&&!f)return d&&Ly(g,W,te),{placement:"bottom",maxHeight:r};if(!f&&q>=s||f&&j>=s){d&&Ly(g,W,te);var ee=f?j-M:q-M;return{placement:"bottom",maxHeight:ee}}if(c==="auto"||f){var oe=r,pe=f?V:z;return pe>=s&&(oe=Math.min(pe-M-v,r)),{placement:"top",maxHeight:oe}}if(c==="bottom")return d&&cb(g,W),{placement:"bottom",maxHeight:r};break;case"top":if(V>=w)return{placement:"top",maxHeight:r};if(z>=w&&!f)return d&&Ly(g,J,te),{placement:"top",maxHeight:r};if(!f&&z>=s||f&&V>=s){var ne=r;return(!f&&z>=s||f&&V>=s)&&(ne=f?V-F:z-F),d&&Ly(g,J,te),{placement:"top",maxHeight:ne}}return{placement:"bottom",maxHeight:r};default:throw new Error('Invalid placement provided "'.concat(c,'".'))}return _}function YFe(e){var r={bottom:"top",top:"bottom"};return e?r[e]:"bottom"}var _Z=function(r){return r==="auto"?"bottom":r},XFe=function(r,o){var s,c=r.placement,d=r.theme,f=d.borderRadius,v=d.spacing,g=d.colors;return _e((s={label:"menu"},Ce(s,YFe(c),"100%"),Ce(s,"position","absolute"),Ce(s,"width","100%"),Ce(s,"zIndex",1),s),o?{}:{backgroundColor:g.neutral0,borderRadius:f,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:v.menuGutter,marginTop:v.menuGutter})},SZ=S.createContext(null),JFe=function(r){var o=r.children,s=r.minMenuHeight,c=r.maxMenuHeight,d=r.menuPlacement,f=r.menuPosition,v=r.menuShouldScrollIntoView,g=r.theme,_=S.useContext(SZ)||{},C=_.setPortalPlacement,b=S.useRef(null),T=S.useState(c),I=Ue(T,2),w=I[0],x=I[1],N=S.useState(null),P=Ue(N,2),O=P[0],L=P[1],M=g.spacing.controlHeight;return eD(function(){var F=b.current;if(F){var V=f==="fixed",j=v&&!V,z=qFe({maxHeight:c,menuEl:F,minHeight:s,placement:d,shouldScroll:j,isFixedPosition:V,controlHeight:M});x(z.maxHeight),L(z.placement),C==null||C(z.placement)}},[c,d,f,v,s,C,M]),o({ref:b,placerProps:_e(_e({},r),{},{placement:O||_Z(d),maxHeight:w})})},QFe=function(r){var o=r.children,s=r.innerRef,c=r.innerProps;return fn("div",Qe({},Yi(r,"menu",{menu:!0}),{ref:s},c),o)},ZFe=QFe,eUe=function(r,o){var s=r.maxHeight,c=r.theme.spacing.baseUnit;return _e({maxHeight:s,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},o?{}:{paddingBottom:c,paddingTop:c})},tUe=function(r){var o=r.children,s=r.innerProps,c=r.innerRef,d=r.isMulti;return fn("div",Qe({},Yi(r,"menuList",{"menu-list":!0,"menu-list--is-multi":d}),{ref:c},s),o)},yZ=function(r,o){var s=r.theme,c=s.spacing.baseUnit,d=s.colors;return _e({textAlign:"center"},o?{}:{color:d.neutral40,padding:"".concat(c*2,"px ").concat(c*3,"px")})},nUe=yZ,rUe=yZ,iUe=function(r){var o=r.children,s=o===void 0?"No options":o,c=r.innerProps,d=An(r,GFe);return fn("div",Qe({},Yi(_e(_e({},d),{},{children:s,innerProps:c}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),c),s)},oUe=function(r){var o=r.children,s=o===void 0?"Loading...":o,c=r.innerProps,d=An(r,KFe);return fn("div",Qe({},Yi(_e(_e({},d),{},{children:s,innerProps:c}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),c),s)},aUe=function(r){var o=r.rect,s=r.offset,c=r.position;return{left:o.left,position:c,top:s,width:o.width,zIndex:1}},sUe=function(r){var o=r.appendTo,s=r.children,c=r.controlElement,d=r.innerProps,f=r.menuPlacement,v=r.menuPosition,g=S.useRef(null),_=S.useRef(null),C=S.useState(_Z(f)),b=Ue(C,2),T=b[0],I=b[1],w=S.useMemo(function(){return{setPortalPlacement:I}},[]),x=S.useState(null),N=Ue(x,2),P=N[0],O=N[1],L=S.useCallback(function(){if(c){var j=BFe(c),z=v==="fixed"?0:window.pageYOffset,q=j[T]+z;(q!==(P==null?void 0:P.offset)||j.left!==(P==null?void 0:P.rect.left)||j.width!==(P==null?void 0:P.rect.width))&&O({offset:q,rect:j})}},[c,v,T,P==null?void 0:P.offset,P==null?void 0:P.rect.left,P==null?void 0:P.rect.width]);eD(function(){L()},[L]);var M=S.useCallback(function(){typeof _.current=="function"&&(_.current(),_.current=null),c&&g.current&&(_.current=PFe(c,g.current,L,{elementResize:"ResizeObserver"in window}))},[c,L]);eD(function(){M()},[M]);var F=S.useCallback(function(j){g.current=j,M()},[M]);if(!o&&v!=="fixed"||!P)return null;var V=fn("div",Qe({ref:F},Yi(_e(_e({},r),{},{offset:P.offset,position:v,rect:P.rect}),"menuPortal",{"menu-portal":!0}),d),s);return fn(SZ.Provider,{value:w},o?Dl.createPortal(V,o):V)},cUe=function(r){var o=r.isDisabled,s=r.isRtl;return{label:"container",direction:s?"rtl":void 0,pointerEvents:o?"none":void 0,position:"relative"}},lUe=function(r){var o=r.children,s=r.innerProps,c=r.isDisabled,d=r.isRtl;return fn("div",Qe({},Yi(r,"container",{"--is-disabled":c,"--is-rtl":d}),s),o)},uUe=function(r,o){var s=r.theme.spacing,c=r.isMulti,d=r.hasValue,f=r.selectProps.controlShouldRenderValue;return _e({alignItems:"center",display:c&&d&&f?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},o?{}:{padding:"".concat(s.baseUnit/2,"px ").concat(s.baseUnit*2,"px")})},dUe=function(r){var o=r.children,s=r.innerProps,c=r.isMulti,d=r.hasValue;return fn("div",Qe({},Yi(r,"valueContainer",{"value-container":!0,"value-container--is-multi":c,"value-container--has-value":d}),s),o)},hUe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},fUe=function(r){var o=r.children,s=r.innerProps;return fn("div",Qe({},Yi(r,"indicatorsContainer",{indicators:!0}),s),o)},tG,pUe=["size"],mUe=["innerProps","isRtl","size"],gUe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},CZ=function(r){var o=r.size,s=An(r,pUe);return fn("svg",Qe({height:o,width:o,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:gUe},s))},CL=function(r){return fn(CZ,Qe({size:20},r),fn("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},bZ=function(r){return fn(CZ,Qe({size:20},r),fn("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},TZ=function(r,o){var s=r.isFocused,c=r.theme,d=c.spacing.baseUnit,f=c.colors;return _e({label:"indicatorContainer",display:"flex",transition:"color 150ms"},o?{}:{color:s?f.neutral60:f.neutral20,padding:d*2,":hover":{color:s?f.neutral80:f.neutral40}})},vUe=TZ,EUe=function(r){var o=r.children,s=r.innerProps;return fn("div",Qe({},Yi(r,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),s),o||fn(bZ,null))},_Ue=TZ,SUe=function(r){var o=r.children,s=r.innerProps;return fn("div",Qe({},Yi(r,"clearIndicator",{indicator:!0,"clear-indicator":!0}),s),o||fn(CL,null))},yUe=function(r,o){var s=r.isDisabled,c=r.theme,d=c.spacing.baseUnit,f=c.colors;return _e({label:"indicatorSeparator",alignSelf:"stretch",width:1},o?{}:{backgroundColor:s?f.neutral10:f.neutral20,marginBottom:d*2,marginTop:d*2})},CUe=function(r){var o=r.innerProps;return fn("span",Qe({},o,Yi(r,"indicatorSeparator",{"indicator-separator":!0})))},bUe=_Fe(tG||(tG=SFe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),TUe=function(r,o){var s=r.isFocused,c=r.size,d=r.theme,f=d.colors,v=d.spacing.baseUnit;return _e({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:c,lineHeight:1,marginRight:c,textAlign:"center",verticalAlign:"middle"},o?{}:{color:s?f.neutral60:f.neutral20,padding:v*2})},Mx=function(r){var o=r.delay,s=r.offset;return fn("span",{css:EL({animation:"".concat(bUe," 1s ease-in-out ").concat(o,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:s?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},RUe=function(r){var o=r.innerProps,s=r.isRtl,c=r.size,d=c===void 0?4:c,f=An(r,mUe);return fn("div",Qe({},Yi(_e(_e({},f),{},{innerProps:o,isRtl:s,size:d}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),o),fn(Mx,{delay:0,offset:s}),fn(Mx,{delay:160,offset:!0}),fn(Mx,{delay:320,offset:!s}))},wUe=function(r,o){var s=r.isDisabled,c=r.isFocused,d=r.theme,f=d.colors,v=d.borderRadius,g=d.spacing;return _e({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:g.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},o?{}:{backgroundColor:s?f.neutral5:f.neutral0,borderColor:s?f.neutral10:c?f.primary:f.neutral20,borderRadius:v,borderStyle:"solid",borderWidth:1,boxShadow:c?"0 0 0 1px ".concat(f.primary):void 0,"&:hover":{borderColor:c?f.primary:f.neutral30}})},IUe=function(r){var o=r.children,s=r.isDisabled,c=r.isFocused,d=r.innerRef,f=r.innerProps,v=r.menuIsOpen;return fn("div",Qe({ref:d},Yi(r,"control",{control:!0,"control--is-disabled":s,"control--is-focused":c,"control--menu-is-open":v}),f,{"aria-disabled":s||void 0}),o)},AUe=IUe,OUe=["data"],xUe=function(r,o){var s=r.theme.spacing;return o?{}:{paddingBottom:s.baseUnit*2,paddingTop:s.baseUnit*2}},NUe=function(r){var o=r.children,s=r.cx,c=r.getStyles,d=r.getClassNames,f=r.Heading,v=r.headingProps,g=r.innerProps,_=r.label,C=r.theme,b=r.selectProps;return fn("div",Qe({},Yi(r,"group",{group:!0}),g),fn(f,Qe({},v,{selectProps:b,theme:C,getStyles:c,getClassNames:d,cx:s}),_),fn("div",null,o))},PUe=function(r,o){var s=r.theme,c=s.colors,d=s.spacing;return _e({label:"group",cursor:"default",display:"block"},o?{}:{color:c.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:d.baseUnit*3,paddingRight:d.baseUnit*3,textTransform:"uppercase"})},DUe=function(r){var o=gZ(r);o.data;var s=An(o,OUe);return fn("div",Qe({},Yi(r,"groupHeading",{"group-heading":!0}),s))},LUe=NUe,kUe=["innerRef","isDisabled","isHidden","inputClassName"],MUe=function(r,o){var s=r.isDisabled,c=r.value,d=r.theme,f=d.spacing,v=d.colors;return _e(_e({visibility:s?"hidden":"visible",transform:c?"translateZ(0)":""},FUe),o?{}:{margin:f.baseUnit/2,paddingBottom:f.baseUnit/2,paddingTop:f.baseUnit/2,color:v.neutral80})},RZ={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},FUe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":_e({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},RZ)},UUe=function(r){return _e({label:"input",color:"inherit",background:0,opacity:r?0:1,width:"100%"},RZ)},BUe=function(r){var o=r.cx,s=r.value,c=gZ(r),d=c.innerRef,f=c.isDisabled,v=c.isHidden,g=c.inputClassName,_=An(c,kUe);return fn("div",Qe({},Yi(r,"input",{"input-container":!0}),{"data-value":s||""}),fn("input",Qe({className:o({input:!0},g),ref:d,style:UUe(v),disabled:f},_)))},VUe=BUe,jUe=function(r,o){var s=r.theme,c=s.spacing,d=s.borderRadius,f=s.colors;return _e({label:"multiValue",display:"flex",minWidth:0},o?{}:{backgroundColor:f.neutral10,borderRadius:d/2,margin:c.baseUnit/2})},$Ue=function(r,o){var s=r.theme,c=s.borderRadius,d=s.colors,f=r.cropWithEllipsis;return _e({overflow:"hidden",textOverflow:f||f===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},o?{}:{borderRadius:c/2,color:d.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},HUe=function(r,o){var s=r.theme,c=s.spacing,d=s.borderRadius,f=s.colors,v=r.isFocused;return _e({alignItems:"center",display:"flex"},o?{}:{borderRadius:d/2,backgroundColor:v?f.dangerLight:void 0,paddingLeft:c.baseUnit,paddingRight:c.baseUnit,":hover":{backgroundColor:f.dangerLight,color:f.danger}})},wZ=function(r){var o=r.children,s=r.innerProps;return fn("div",s,o)},zUe=wZ,WUe=wZ;function GUe(e){var r=e.children,o=e.innerProps;return fn("div",Qe({role:"button"},o),r||fn(CL,{size:14}))}var KUe=function(r){var o=r.children,s=r.components,c=r.data,d=r.innerProps,f=r.isDisabled,v=r.removeProps,g=r.selectProps,_=s.Container,C=s.Label,b=s.Remove;return fn(_,{data:c,innerProps:_e(_e({},Yi(r,"multiValue",{"multi-value":!0,"multi-value--is-disabled":f})),d),selectProps:g},fn(C,{data:c,innerProps:_e({},Yi(r,"multiValueLabel",{"multi-value__label":!0})),selectProps:g},o),fn(b,{data:c,innerProps:_e(_e({},Yi(r,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(o||"option")},v),selectProps:g}))},qUe=KUe,YUe=function(r,o){var s=r.isDisabled,c=r.isFocused,d=r.isSelected,f=r.theme,v=f.spacing,g=f.colors;return _e({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},o?{}:{backgroundColor:d?g.primary:c?g.primary25:"transparent",color:s?g.neutral20:d?g.neutral0:"inherit",padding:"".concat(v.baseUnit*2,"px ").concat(v.baseUnit*3,"px"),":active":{backgroundColor:s?void 0:d?g.primary:g.primary50}})},XUe=function(r){var o=r.children,s=r.isDisabled,c=r.isFocused,d=r.isSelected,f=r.innerRef,v=r.innerProps;return fn("div",Qe({},Yi(r,"option",{option:!0,"option--is-disabled":s,"option--is-focused":c,"option--is-selected":d}),{ref:f,"aria-disabled":s},v),o)},JUe=XUe,QUe=function(r,o){var s=r.theme,c=s.spacing,d=s.colors;return _e({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},o?{}:{color:d.neutral50,marginLeft:c.baseUnit/2,marginRight:c.baseUnit/2})},ZUe=function(r){var o=r.children,s=r.innerProps;return fn("div",Qe({},Yi(r,"placeholder",{placeholder:!0}),s),o)},e4e=ZUe,t4e=function(r,o){var s=r.isDisabled,c=r.theme,d=c.spacing,f=c.colors;return _e({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},o?{}:{color:s?f.neutral40:f.neutral80,marginLeft:d.baseUnit/2,marginRight:d.baseUnit/2})},n4e=function(r){var o=r.children,s=r.isDisabled,c=r.innerProps;return fn("div",Qe({},Yi(r,"singleValue",{"single-value":!0,"single-value--is-disabled":s}),c),o)},r4e=n4e,i4e={ClearIndicator:SUe,Control:AUe,DropdownIndicator:EUe,DownChevron:bZ,CrossIcon:CL,Group:LUe,GroupHeading:DUe,IndicatorsContainer:fUe,IndicatorSeparator:CUe,Input:VUe,LoadingIndicator:RUe,Menu:ZFe,MenuList:tUe,MenuPortal:sUe,LoadingMessage:oUe,NoOptionsMessage:iUe,MultiValue:qUe,MultiValueContainer:zUe,MultiValueLabel:WUe,MultiValueRemove:GUe,Option:JUe,Placeholder:e4e,SelectContainer:lUe,SingleValue:r4e,ValueContainer:dUe},o4e=function(r){return _e(_e({},i4e),r.components)},nG=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function a4e(e,r){return!!(e===r||nG(e)&&nG(r))}function s4e(e,r){if(e.length!==r.length)return!1;for(var o=0;o<e.length;o++)if(!a4e(e[o],r[o]))return!1;return!0}function c4e(e,r){r===void 0&&(r=s4e);var o=null;function s(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];if(o&&o.lastThis===this&&r(c,o.lastArgs))return o.lastResult;var f=e.apply(this,c);return o={lastResult:f,lastArgs:c,lastThis:this},f}return s.clear=function(){o=null},s}var l4e={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},u4e=function(r){return fn("span",Qe({css:l4e},r))},rG=u4e,d4e={guidance:function(r){var o=r.isSearchable,s=r.isMulti,c=r.tabSelectsValue,d=r.context,f=r.isInitialFocus;switch(d){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(c?", press Tab to select the option and exit the menu":"",".");case"input":return f?"".concat(r["aria-label"]||"Select"," is focused ").concat(o?",type to refine list":"",", press Down to open the menu, ").concat(s?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(r){var o=r.action,s=r.label,c=s===void 0?"":s,d=r.labels,f=r.isDisabled;switch(o){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(c,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(d.length>1?"s":""," ").concat(d.join(","),", selected.");case"select-option":return f?"option ".concat(c," is disabled. Select another option."):"option ".concat(c,", selected.");default:return""}},onFocus:function(r){var o=r.context,s=r.focused,c=r.options,d=r.label,f=d===void 0?"":d,v=r.selectValue,g=r.isDisabled,_=r.isSelected,C=r.isAppleDevice,b=function(x,N){return x&&x.length?"".concat(x.indexOf(N)+1," of ").concat(x.length):""};if(o==="value"&&v)return"value ".concat(f," focused, ").concat(b(v,s),".");if(o==="menu"&&C){var T=g?" disabled":"",I="".concat(_?" selected":"").concat(T);return"".concat(f).concat(I,", ").concat(b(c,s),".")}return""},onFilter:function(r){var o=r.inputValue,s=r.resultsMessage;return"".concat(s).concat(o?" for search term "+o:"",".")}},h4e=function(r){var o=r.ariaSelection,s=r.focusedOption,c=r.focusedValue,d=r.focusableOptions,f=r.isFocused,v=r.selectValue,g=r.selectProps,_=r.id,C=r.isAppleDevice,b=g.ariaLiveMessages,T=g.getOptionLabel,I=g.inputValue,w=g.isMulti,x=g.isOptionDisabled,N=g.isSearchable,P=g.menuIsOpen,O=g.options,L=g.screenReaderStatus,M=g.tabSelectsValue,F=g.isLoading,V=g["aria-label"],j=g["aria-live"],z=S.useMemo(function(){return _e(_e({},d4e),b||{})},[b]),q=S.useMemo(function(){var pe="";if(o&&z.onChange){var ne=o.option,ae=o.options,re=o.removedValue,he=o.removedValues,fe=o.value,se=function(Ie){return Array.isArray(Ie)?null:Ie},de=re||ne||se(fe),ve=de?T(de):"",ie=ae||he||void 0,be=ie?ie.map(T):[],Re=_e({isDisabled:de&&x(de,v),label:ve,labels:be},o);pe=z.onChange(Re)}return pe},[o,z,x,v,T]),W=S.useMemo(function(){var pe="",ne=s||c,ae=!!(s&&v&&v.includes(s));if(ne&&z.onFocus){var re={focused:ne,label:T(ne),isDisabled:x(ne,v),isSelected:ae,options:d,context:ne===s?"menu":"value",selectValue:v,isAppleDevice:C};pe=z.onFocus(re)}return pe},[s,c,T,x,z,d,v,C]),J=S.useMemo(function(){var pe="";if(P&&O.length&&!F&&z.onFilter){var ne=L({count:d.length});pe=z.onFilter({inputValue:I,resultsMessage:ne})}return pe},[d,I,P,z,O,L,F]),te=(o==null?void 0:o.action)==="initial-input-focus",ee=S.useMemo(function(){var pe="";if(z.guidance){var ne=c?"value":P?"menu":"input";pe=z.guidance({"aria-label":V,context:ne,isDisabled:s&&x(s,v),isMulti:w,isSearchable:N,tabSelectsValue:M,isInitialFocus:te})}return pe},[V,s,c,w,x,N,P,z,v,M,te]),oe=fn(S.Fragment,null,fn("span",{id:"aria-selection"},q),fn("span",{id:"aria-focused"},W),fn("span",{id:"aria-results"},J),fn("span",{id:"aria-guidance"},ee));return fn(S.Fragment,null,fn(rG,{id:_},te&&oe),fn(rG,{"aria-live":j,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},f&&!te&&oe))},f4e=h4e,tD=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],p4e=new RegExp("["+tD.map(function(e){return e.letters}).join("")+"]","g"),IZ={};for(var Fx=0;Fx<tD.length;Fx++)for(var Ux=tD[Fx],Bx=0;Bx<Ux.letters.length;Bx++)IZ[Ux.letters[Bx]]=Ux.base;var AZ=function(r){return r.replace(p4e,function(o){return IZ[o]})},m4e=c4e(AZ),iG=function(r){return r.replace(/^\s+|\s+$/g,"")},g4e=function(r){return"".concat(r.label," ").concat(r.value)},v4e=function(r){return function(o,s){if(o.data.__isNew__)return!0;var c=_e({ignoreCase:!0,ignoreAccents:!0,stringify:g4e,trim:!0,matchFrom:"any"},r),d=c.ignoreCase,f=c.ignoreAccents,v=c.stringify,g=c.trim,_=c.matchFrom,C=g?iG(s):s,b=g?iG(v(o)):v(o);return d&&(C=C.toLowerCase(),b=b.toLowerCase()),f&&(C=m4e(C),b=AZ(b)),_==="start"?b.substr(0,C.length)===C:b.indexOf(C)>-1}},E4e=["innerRef"];function _4e(e){var r=e.innerRef,o=An(e,E4e),s=WFe(o,"onExited","in","enter","exit","appear");return fn("input",Qe({ref:r},s,{css:EL({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var S4e=function(r){r.cancelable&&r.preventDefault(),r.stopPropagation()};function y4e(e){var r=e.isEnabled,o=e.onBottomArrive,s=e.onBottomLeave,c=e.onTopArrive,d=e.onTopLeave,f=S.useRef(!1),v=S.useRef(!1),g=S.useRef(0),_=S.useRef(null),C=S.useCallback(function(N,P){if(_.current!==null){var O=_.current,L=O.scrollTop,M=O.scrollHeight,F=O.clientHeight,V=_.current,j=P>0,z=M-F-L,q=!1;z>P&&f.current&&(s&&s(N),f.current=!1),j&&v.current&&(d&&d(N),v.current=!1),j&&P>z?(o&&!f.current&&o(N),V.scrollTop=M,q=!0,f.current=!0):!j&&-P>L&&(c&&!v.current&&c(N),V.scrollTop=0,q=!0,v.current=!0),q&&S4e(N)}},[o,s,c,d]),b=S.useCallback(function(N){C(N,N.deltaY)},[C]),T=S.useCallback(function(N){g.current=N.changedTouches[0].clientY},[]),I=S.useCallback(function(N){var P=g.current-N.changedTouches[0].clientY;C(N,P)},[C]),w=S.useCallback(function(N){if(N){var P=$Fe?{passive:!1}:!1;N.addEventListener("wheel",b,P),N.addEventListener("touchstart",T,P),N.addEventListener("touchmove",I,P)}},[I,T,b]),x=S.useCallback(function(N){N&&(N.removeEventListener("wheel",b,!1),N.removeEventListener("touchstart",T,!1),N.removeEventListener("touchmove",I,!1))},[I,T,b]);return S.useEffect(function(){if(r){var N=_.current;return w(N),function(){x(N)}}},[r,w,x]),function(N){_.current=N}}var oG=["boxSizing","height","overflow","paddingRight","position"],aG={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function sG(e){e.cancelable&&e.preventDefault()}function cG(e){e.stopPropagation()}function lG(){var e=this.scrollTop,r=this.scrollHeight,o=e+this.offsetHeight;e===0?this.scrollTop=1:o===r&&(this.scrollTop=e-1)}function uG(){return"ontouchstart"in window||navigator.maxTouchPoints}var dG=!!(typeof window<"u"&&window.document&&window.document.createElement),Og=0,Dp={capture:!1,passive:!1};function C4e(e){var r=e.isEnabled,o=e.accountForScrollbars,s=o===void 0?!0:o,c=S.useRef({}),d=S.useRef(null),f=S.useCallback(function(g){if(dG){var _=document.body,C=_&&_.style;if(s&&oG.forEach(function(w){var x=C&&C[w];c.current[w]=x}),s&&Og<1){var b=parseInt(c.current.paddingRight,10)||0,T=document.body?document.body.clientWidth:0,I=window.innerWidth-T+b||0;Object.keys(aG).forEach(function(w){var x=aG[w];C&&(C[w]=x)}),C&&(C.paddingRight="".concat(I,"px"))}_&&uG()&&(_.addEventListener("touchmove",sG,Dp),g&&(g.addEventListener("touchstart",lG,Dp),g.addEventListener("touchmove",cG,Dp))),Og+=1}},[s]),v=S.useCallback(function(g){if(dG){var _=document.body,C=_&&_.style;Og=Math.max(Og-1,0),s&&Og<1&&oG.forEach(function(b){var T=c.current[b];C&&(C[b]=T)}),_&&uG()&&(_.removeEventListener("touchmove",sG,Dp),g&&(g.removeEventListener("touchstart",lG,Dp),g.removeEventListener("touchmove",cG,Dp)))}},[s]);return S.useEffect(function(){if(r){var g=d.current;return f(g),function(){v(g)}}},[r,f,v]),function(g){d.current=g}}var b4e=function(r){var o=r.target;return o.ownerDocument.activeElement&&o.ownerDocument.activeElement.blur()},T4e={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function R4e(e){var r=e.children,o=e.lockEnabled,s=e.captureEnabled,c=s===void 0?!0:s,d=e.onBottomArrive,f=e.onBottomLeave,v=e.onTopArrive,g=e.onTopLeave,_=y4e({isEnabled:c,onBottomArrive:d,onBottomLeave:f,onTopArrive:v,onTopLeave:g}),C=C4e({isEnabled:o}),b=function(I){_(I),C(I)};return fn(S.Fragment,null,o&&fn("div",{onClick:b4e,css:T4e}),r(b))}var w4e={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},I4e=function(r){var o=r.name,s=r.onFocus;return fn("input",{required:!0,name:o,tabIndex:-1,"aria-hidden":"true",onFocus:s,css:w4e,value:"",onChange:function(){}})},A4e=I4e;function bL(e){var r;return typeof window<"u"&&window.navigator!=null?e.test(((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.platform)||window.navigator.platform):!1}function O4e(){return bL(/^iPhone/i)}function OZ(){return bL(/^Mac/i)}function x4e(){return bL(/^iPad/i)||OZ()&&navigator.maxTouchPoints>1}function N4e(){return O4e()||x4e()}function P4e(){return OZ()||N4e()}var D4e=function(r){return r.label},L4e=function(r){return r.label},k4e=function(r){return r.value},M4e=function(r){return!!r.isDisabled},F4e={clearIndicator:_Ue,container:cUe,control:wUe,dropdownIndicator:vUe,group:xUe,groupHeading:PUe,indicatorsContainer:hUe,indicatorSeparator:yUe,input:MUe,loadingIndicator:TUe,loadingMessage:rUe,menu:XFe,menuList:eUe,menuPortal:aUe,multiValue:jUe,multiValueLabel:$Ue,multiValueRemove:HUe,noOptionsMessage:nUe,option:YUe,placeholder:QUe,singleValue:t4e,valueContainer:uUe},U4e={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},B4e=4,xZ=4,V4e=38,j4e=xZ*2,$4e={baseUnit:xZ,controlHeight:V4e,menuGutter:j4e},Vx={borderRadius:B4e,colors:U4e,spacing:$4e},H4e={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:eG(),captureMenuScroll:!eG(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:v4e(),formatGroupLabel:D4e,getOptionLabel:L4e,getOptionValue:k4e,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:M4e,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!VFe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(r){var o=r.count;return"".concat(o," result").concat(o!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function hG(e,r,o,s){var c=DZ(e,r,o),d=LZ(e,r,o),f=PZ(e,r),v=lb(e,r);return{type:"option",data:r,isDisabled:c,isSelected:d,label:f,value:v,index:s}}function uC(e,r){return e.options.map(function(o,s){if("options"in o){var c=o.options.map(function(f,v){return hG(e,f,r,v)}).filter(function(f){return pG(e,f)});return c.length>0?{type:"group",data:o,options:c,index:s}:void 0}var d=hG(e,o,r,s);return pG(e,d)?d:void 0}).filter(HFe)}function NZ(e){return e.reduce(function(r,o){return o.type==="group"?r.push.apply(r,vt(o.options.map(function(s){return s.data}))):r.push(o.data),r},[])}function fG(e,r){return e.reduce(function(o,s){return s.type==="group"?o.push.apply(o,vt(s.options.map(function(c){return{data:c.data,id:"".concat(r,"-").concat(s.index,"-").concat(c.index)}}))):o.push({data:s.data,id:"".concat(r,"-").concat(s.index)}),o},[])}function z4e(e,r){return NZ(uC(e,r))}function pG(e,r){var o=e.inputValue,s=o===void 0?"":o,c=r.data,d=r.isSelected,f=r.label,v=r.value;return(!MZ(e)||!d)&&kZ(e,{label:f,value:v,data:c},s)}function W4e(e,r){var o=e.focusedValue,s=e.selectValue,c=s.indexOf(o);if(c>-1){var d=r.indexOf(o);if(d>-1)return o;if(c<r.length)return r[c]}return null}function G4e(e,r){var o=e.focusedOption;return o&&r.indexOf(o)>-1?o:r[0]}var jx=function(r,o){var s,c=(s=r.find(function(d){return d.data===o}))===null||s===void 0?void 0:s.id;return c||null},PZ=function(r,o){return r.getOptionLabel(o)},lb=function(r,o){return r.getOptionValue(o)};function DZ(e,r,o){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(r,o):!1}function LZ(e,r,o){if(o.indexOf(r)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(r,o);var s=lb(e,r);return o.some(function(c){return lb(e,c)===s})}function kZ(e,r,o){return e.filterOption?e.filterOption(r,o):!0}var MZ=function(r){var o=r.hideSelectedOptions,s=r.isMulti;return o===void 0?s:o},K4e=1,FZ=function(e){Ml(o,e);var r=Fl(o);function o(s){var c;if(io(this,o),c=r.call(this,s),c.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},c.blockOptionHover=!1,c.isComposing=!1,c.commonProps=void 0,c.initialTouchX=0,c.initialTouchY=0,c.openAfterFocus=!1,c.scrollToFocusedOptionOnUpdate=!1,c.userIsDragging=void 0,c.isAppleDevice=P4e(),c.controlRef=null,c.getControlRef=function(g){c.controlRef=g},c.focusedOptionRef=null,c.getFocusedOptionRef=function(g){c.focusedOptionRef=g},c.menuListRef=null,c.getMenuListRef=function(g){c.menuListRef=g},c.inputRef=null,c.getInputRef=function(g){c.inputRef=g},c.focus=c.focusInput,c.blur=c.blurInput,c.onChange=function(g,_){var C=c.props,b=C.onChange,T=C.name;_.name=T,c.ariaOnChange(g,_),b(g,_)},c.setValue=function(g,_,C){var b=c.props,T=b.closeMenuOnSelect,I=b.isMulti,w=b.inputValue;c.onInputChange("",{action:"set-value",prevInputValue:w}),T&&(c.setState({inputIsHiddenAfterUpdate:!I}),c.onMenuClose()),c.setState({clearFocusValueOnUpdate:!0}),c.onChange(g,{action:_,option:C})},c.selectOption=function(g){var _=c.props,C=_.blurInputOnSelect,b=_.isMulti,T=_.name,I=c.state.selectValue,w=b&&c.isOptionSelected(g,I),x=c.isOptionDisabled(g,I);if(w){var N=c.getOptionValue(g);c.setValue(I.filter(function(P){return c.getOptionValue(P)!==N}),"deselect-option",g)}else if(!x)b?c.setValue([].concat(vt(I),[g]),"select-option",g):c.setValue(g,"select-option");else{c.ariaOnChange(g,{action:"select-option",option:g,name:T});return}C&&c.blurInput()},c.removeValue=function(g){var _=c.props.isMulti,C=c.state.selectValue,b=c.getOptionValue(g),T=C.filter(function(w){return c.getOptionValue(w)!==b}),I=My(_,T,T[0]||null);c.onChange(I,{action:"remove-value",removedValue:g}),c.focusInput()},c.clearValue=function(){var g=c.state.selectValue;c.onChange(My(c.props.isMulti,[],null),{action:"clear",removedValues:g})},c.popValue=function(){var g=c.props.isMulti,_=c.state.selectValue,C=_[_.length-1],b=_.slice(0,_.length-1),T=My(g,b,b[0]||null);C&&c.onChange(T,{action:"pop-value",removedValue:C})},c.getFocusedOptionId=function(g){return jx(c.state.focusableOptionsWithIds,g)},c.getFocusableOptionsWithIds=function(){return fG(uC(c.props,c.state.selectValue),c.getElementId("option"))},c.getValue=function(){return c.state.selectValue},c.cx=function(){for(var g=arguments.length,_=new Array(g),C=0;C<g;C++)_[C]=arguments[C];return kFe.apply(void 0,[c.props.classNamePrefix].concat(_))},c.getOptionLabel=function(g){return PZ(c.props,g)},c.getOptionValue=function(g){return lb(c.props,g)},c.getStyles=function(g,_){var C=c.props.unstyled,b=F4e[g](_,C);b.boxSizing="border-box";var T=c.props.styles[g];return T?T(b,_):b},c.getClassNames=function(g,_){var C,b;return(C=(b=c.props.classNames)[g])===null||C===void 0?void 0:C.call(b,_)},c.getElementId=function(g){return"".concat(c.state.instancePrefix,"-").concat(g)},c.getComponents=function(){return o4e(c.props)},c.buildCategorizedOptions=function(){return uC(c.props,c.state.selectValue)},c.getCategorizedOptions=function(){return c.props.menuIsOpen?c.buildCategorizedOptions():[]},c.buildFocusableOptions=function(){return NZ(c.buildCategorizedOptions())},c.getFocusableOptions=function(){return c.props.menuIsOpen?c.buildFocusableOptions():[]},c.ariaOnChange=function(g,_){c.setState({ariaSelection:_e({value:g},_)})},c.onMenuMouseDown=function(g){g.button===0&&(g.stopPropagation(),g.preventDefault(),c.focusInput())},c.onMenuMouseMove=function(g){c.blockOptionHover=!1},c.onControlMouseDown=function(g){if(!g.defaultPrevented){var _=c.props.openMenuOnClick;c.state.isFocused?c.props.menuIsOpen?g.target.tagName!=="INPUT"&&g.target.tagName!=="TEXTAREA"&&c.onMenuClose():_&&c.openMenu("first"):(_&&(c.openAfterFocus=!0),c.focusInput()),g.target.tagName!=="INPUT"&&g.target.tagName!=="TEXTAREA"&&g.preventDefault()}},c.onDropdownIndicatorMouseDown=function(g){if(!(g&&g.type==="mousedown"&&g.button!==0)&&!c.props.isDisabled){var _=c.props,C=_.isMulti,b=_.menuIsOpen;c.focusInput(),b?(c.setState({inputIsHiddenAfterUpdate:!C}),c.onMenuClose()):c.openMenu("first"),g.preventDefault()}},c.onClearIndicatorMouseDown=function(g){g&&g.type==="mousedown"&&g.button!==0||(c.clearValue(),g.preventDefault(),c.openAfterFocus=!1,g.type==="touchend"?c.focusInput():setTimeout(function(){return c.focusInput()}))},c.onScroll=function(g){typeof c.props.closeMenuOnScroll=="boolean"?g.target instanceof HTMLElement&&FT(g.target)&&c.props.onMenuClose():typeof c.props.closeMenuOnScroll=="function"&&c.props.closeMenuOnScroll(g)&&c.props.onMenuClose()},c.onCompositionStart=function(){c.isComposing=!0},c.onCompositionEnd=function(){c.isComposing=!1},c.onTouchStart=function(g){var _=g.touches,C=_&&_.item(0);C&&(c.initialTouchX=C.clientX,c.initialTouchY=C.clientY,c.userIsDragging=!1)},c.onTouchMove=function(g){var _=g.touches,C=_&&_.item(0);if(C){var b=Math.abs(C.clientX-c.initialTouchX),T=Math.abs(C.clientY-c.initialTouchY),I=5;c.userIsDragging=b>I||T>I}},c.onTouchEnd=function(g){c.userIsDragging||(c.controlRef&&!c.controlRef.contains(g.target)&&c.menuListRef&&!c.menuListRef.contains(g.target)&&c.blurInput(),c.initialTouchX=0,c.initialTouchY=0)},c.onControlTouchEnd=function(g){c.userIsDragging||c.onControlMouseDown(g)},c.onClearIndicatorTouchEnd=function(g){c.userIsDragging||c.onClearIndicatorMouseDown(g)},c.onDropdownIndicatorTouchEnd=function(g){c.userIsDragging||c.onDropdownIndicatorMouseDown(g)},c.handleInputChange=function(g){var _=c.props.inputValue,C=g.currentTarget.value;c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange(C,{action:"input-change",prevInputValue:_}),c.props.menuIsOpen||c.onMenuOpen()},c.onInputFocus=function(g){c.props.onFocus&&c.props.onFocus(g),c.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(c.openAfterFocus||c.props.openMenuOnFocus)&&c.openMenu("first"),c.openAfterFocus=!1},c.onInputBlur=function(g){var _=c.props.inputValue;if(c.menuListRef&&c.menuListRef.contains(document.activeElement)){c.inputRef.focus();return}c.props.onBlur&&c.props.onBlur(g),c.onInputChange("",{action:"input-blur",prevInputValue:_}),c.onMenuClose(),c.setState({focusedValue:null,isFocused:!1})},c.onOptionHover=function(g){if(!(c.blockOptionHover||c.state.focusedOption===g)){var _=c.getFocusableOptions(),C=_.indexOf(g);c.setState({focusedOption:g,focusedOptionId:C>-1?c.getFocusedOptionId(g):null})}},c.shouldHideSelectedOptions=function(){return MZ(c.props)},c.onValueInputFocus=function(g){g.preventDefault(),g.stopPropagation(),c.focus()},c.onKeyDown=function(g){var _=c.props,C=_.isMulti,b=_.backspaceRemovesValue,T=_.escapeClearsValue,I=_.inputValue,w=_.isClearable,x=_.isDisabled,N=_.menuIsOpen,P=_.onKeyDown,O=_.tabSelectsValue,L=_.openMenuOnFocus,M=c.state,F=M.focusedOption,V=M.focusedValue,j=M.selectValue;if(!x&&!(typeof P=="function"&&(P(g),g.defaultPrevented))){switch(c.blockOptionHover=!0,g.key){case"ArrowLeft":if(!C||I)return;c.focusValue("previous");break;case"ArrowRight":if(!C||I)return;c.focusValue("next");break;case"Delete":case"Backspace":if(I)return;if(V)c.removeValue(V);else{if(!b)return;C?c.popValue():w&&c.clearValue()}break;case"Tab":if(c.isComposing||g.shiftKey||!N||!O||!F||L&&c.isOptionSelected(F,j))return;c.selectOption(F);break;case"Enter":if(g.keyCode===229)break;if(N){if(!F||c.isComposing)return;c.selectOption(F);break}return;case"Escape":N?(c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange("",{action:"menu-close",prevInputValue:I}),c.onMenuClose()):w&&T&&c.clearValue();break;case" ":if(I)return;if(!N){c.openMenu("first");break}if(!F)return;c.selectOption(F);break;case"ArrowUp":N?c.focusOption("up"):c.openMenu("last");break;case"ArrowDown":N?c.focusOption("down"):c.openMenu("first");break;case"PageUp":if(!N)return;c.focusOption("pageup");break;case"PageDown":if(!N)return;c.focusOption("pagedown");break;case"Home":if(!N)return;c.focusOption("first");break;case"End":if(!N)return;c.focusOption("last");break;default:return}g.preventDefault()}},c.state.instancePrefix="react-select-"+(c.props.instanceId||++K4e),c.state.selectValue=QW(s.value),s.menuIsOpen&&c.state.selectValue.length){var d=c.getFocusableOptionsWithIds(),f=c.buildFocusableOptions(),v=f.indexOf(c.state.selectValue[0]);c.state.focusableOptionsWithIds=d,c.state.focusedOption=f[v],c.state.focusedOptionId=jx(d,f[v])}return c}return oo(o,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&ZW(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(c){var d=this.props,f=d.isDisabled,v=d.menuIsOpen,g=this.state.isFocused;(g&&!f&&c.isDisabled||g&&v&&!c.menuIsOpen)&&this.focusInput(),g&&f&&!c.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!g&&!f&&c.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(ZW(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(c,d){this.props.onInputChange(c,d)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(c){var d=this,f=this.state,v=f.selectValue,g=f.isFocused,_=this.buildFocusableOptions(),C=c==="first"?0:_.length-1;if(!this.props.isMulti){var b=_.indexOf(v[0]);b>-1&&(C=b)}this.scrollToFocusedOptionOnUpdate=!(g&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:_[C],focusedOptionId:this.getFocusedOptionId(_[C])},function(){return d.onMenuOpen()})}},{key:"focusValue",value:function(c){var d=this.state,f=d.selectValue,v=d.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var g=f.indexOf(v);v||(g=-1);var _=f.length-1,C=-1;if(f.length){switch(c){case"previous":g===0?C=0:g===-1?C=_:C=g-1;break;case"next":g>-1&&g<_&&(C=g+1);break}this.setState({inputIsHidden:C!==-1,focusedValue:f[C]})}}}},{key:"focusOption",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",d=this.props.pageSize,f=this.state.focusedOption,v=this.getFocusableOptions();if(v.length){var g=0,_=v.indexOf(f);f||(_=-1),c==="up"?g=_>0?_-1:v.length-1:c==="down"?g=(_+1)%v.length:c==="pageup"?(g=_-d,g<0&&(g=0)):c==="pagedown"?(g=_+d,g>v.length-1&&(g=v.length-1)):c==="last"&&(g=v.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:v[g],focusedValue:null,focusedOptionId:this.getFocusedOptionId(v[g])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Vx):_e(_e({},Vx),this.props.theme):Vx}},{key:"getCommonProps",value:function(){var c=this.clearValue,d=this.cx,f=this.getStyles,v=this.getClassNames,g=this.getValue,_=this.selectOption,C=this.setValue,b=this.props,T=b.isMulti,I=b.isRtl,w=b.options,x=this.hasValue();return{clearValue:c,cx:d,getStyles:f,getClassNames:v,getValue:g,hasValue:x,isMulti:T,isRtl:I,options:w,selectOption:_,selectProps:b,setValue:C,theme:this.getTheme()}}},{key:"hasValue",value:function(){var c=this.state.selectValue;return c.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var c=this.props,d=c.isClearable,f=c.isMulti;return d===void 0?f:d}},{key:"isOptionDisabled",value:function(c,d){return DZ(this.props,c,d)}},{key:"isOptionSelected",value:function(c,d){return LZ(this.props,c,d)}},{key:"filterOption",value:function(c,d){return kZ(this.props,c,d)}},{key:"formatOptionLabel",value:function(c,d){if(typeof this.props.formatOptionLabel=="function"){var f=this.props.inputValue,v=this.state.selectValue;return this.props.formatOptionLabel(c,{context:d,inputValue:f,selectValue:v})}else return this.getOptionLabel(c)}},{key:"formatGroupLabel",value:function(c){return this.props.formatGroupLabel(c)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var c=this.props,d=c.isDisabled,f=c.isSearchable,v=c.inputId,g=c.inputValue,_=c.tabIndex,C=c.form,b=c.menuIsOpen,T=c.required,I=this.getComponents(),w=I.Input,x=this.state,N=x.inputIsHidden,P=x.ariaSelection,O=this.commonProps,L=v||this.getElementId("input"),M=_e(_e(_e({"aria-autocomplete":"list","aria-expanded":b,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":T,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},b&&{"aria-controls":this.getElementId("listbox")}),!f&&{"aria-readonly":!0}),this.hasValue()?(P==null?void 0:P.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return f?S.createElement(w,Qe({},O,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:L,innerRef:this.getInputRef,isDisabled:d,isHidden:N,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:_,form:C,type:"text",value:g},M)):S.createElement(_4e,Qe({id:L,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:sb,onFocus:this.onInputFocus,disabled:d,tabIndex:_,inputMode:"none",form:C,value:""},M))}},{key:"renderPlaceholderOrValue",value:function(){var c=this,d=this.getComponents(),f=d.MultiValue,v=d.MultiValueContainer,g=d.MultiValueLabel,_=d.MultiValueRemove,C=d.SingleValue,b=d.Placeholder,T=this.commonProps,I=this.props,w=I.controlShouldRenderValue,x=I.isDisabled,N=I.isMulti,P=I.inputValue,O=I.placeholder,L=this.state,M=L.selectValue,F=L.focusedValue,V=L.isFocused;if(!this.hasValue()||!w)return P?null:S.createElement(b,Qe({},T,{key:"placeholder",isDisabled:x,isFocused:V,innerProps:{id:this.getElementId("placeholder")}}),O);if(N)return M.map(function(z,q){var W=z===F,J="".concat(c.getOptionLabel(z),"-").concat(c.getOptionValue(z));return S.createElement(f,Qe({},T,{components:{Container:v,Label:g,Remove:_},isFocused:W,isDisabled:x,key:J,index:q,removeProps:{onClick:function(){return c.removeValue(z)},onTouchEnd:function(){return c.removeValue(z)},onMouseDown:function(ee){ee.preventDefault()}},data:z}),c.formatOptionLabel(z,"value"))});if(P)return null;var j=M[0];return S.createElement(C,Qe({},T,{data:j,isDisabled:x}),this.formatOptionLabel(j,"value"))}},{key:"renderClearIndicator",value:function(){var c=this.getComponents(),d=c.ClearIndicator,f=this.commonProps,v=this.props,g=v.isDisabled,_=v.isLoading,C=this.state.isFocused;if(!this.isClearable()||!d||g||!this.hasValue()||_)return null;var b={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return S.createElement(d,Qe({},f,{innerProps:b,isFocused:C}))}},{key:"renderLoadingIndicator",value:function(){var c=this.getComponents(),d=c.LoadingIndicator,f=this.commonProps,v=this.props,g=v.isDisabled,_=v.isLoading,C=this.state.isFocused;if(!d||!_)return null;var b={"aria-hidden":"true"};return S.createElement(d,Qe({},f,{innerProps:b,isDisabled:g,isFocused:C}))}},{key:"renderIndicatorSeparator",value:function(){var c=this.getComponents(),d=c.DropdownIndicator,f=c.IndicatorSeparator;if(!d||!f)return null;var v=this.commonProps,g=this.props.isDisabled,_=this.state.isFocused;return S.createElement(f,Qe({},v,{isDisabled:g,isFocused:_}))}},{key:"renderDropdownIndicator",value:function(){var c=this.getComponents(),d=c.DropdownIndicator;if(!d)return null;var f=this.commonProps,v=this.props.isDisabled,g=this.state.isFocused,_={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return S.createElement(d,Qe({},f,{innerProps:_,isDisabled:v,isFocused:g}))}},{key:"renderMenu",value:function(){var c=this,d=this.getComponents(),f=d.Group,v=d.GroupHeading,g=d.Menu,_=d.MenuList,C=d.MenuPortal,b=d.LoadingMessage,T=d.NoOptionsMessage,I=d.Option,w=this.commonProps,x=this.state.focusedOption,N=this.props,P=N.captureMenuScroll,O=N.inputValue,L=N.isLoading,M=N.loadingMessage,F=N.minMenuHeight,V=N.maxMenuHeight,j=N.menuIsOpen,z=N.menuPlacement,q=N.menuPosition,W=N.menuPortalTarget,J=N.menuShouldBlockScroll,te=N.menuShouldScrollIntoView,ee=N.noOptionsMessage,oe=N.onMenuScrollToTop,pe=N.onMenuScrollToBottom;if(!j)return null;var ne=function(ve,ie){var be=ve.type,Re=ve.data,Pe=ve.isDisabled,Ie=ve.isSelected,xe=ve.label,We=ve.value,De=x===Re,Ae=Pe?void 0:function(){return c.onOptionHover(Re)},je=Pe?void 0:function(){return c.selectOption(Re)},Je="".concat(c.getElementId("option"),"-").concat(ie),Fe={id:Je,onClick:je,onMouseMove:Ae,onMouseOver:Ae,tabIndex:-1,role:"option","aria-selected":c.isAppleDevice?void 0:Ie};return S.createElement(I,Qe({},w,{innerProps:Fe,data:Re,isDisabled:Pe,isSelected:Ie,key:Je,label:xe,type:be,value:We,isFocused:De,innerRef:De?c.getFocusedOptionRef:void 0}),c.formatOptionLabel(ve.data,"menu"))},ae;if(this.hasOptions())ae=this.getCategorizedOptions().map(function(de){if(de.type==="group"){var ve=de.data,ie=de.options,be=de.index,Re="".concat(c.getElementId("group"),"-").concat(be),Pe="".concat(Re,"-heading");return S.createElement(f,Qe({},w,{key:Re,data:ve,options:ie,Heading:v,headingProps:{id:Pe,data:de.data},label:c.formatGroupLabel(de.data)}),de.options.map(function(Ie){return ne(Ie,"".concat(be,"-").concat(Ie.index))}))}else if(de.type==="option")return ne(de,"".concat(de.index))});else if(L){var re=M({inputValue:O});if(re===null)return null;ae=S.createElement(b,w,re)}else{var he=ee({inputValue:O});if(he===null)return null;ae=S.createElement(T,w,he)}var fe={minMenuHeight:F,maxMenuHeight:V,menuPlacement:z,menuPosition:q,menuShouldScrollIntoView:te},se=S.createElement(JFe,Qe({},w,fe),function(de){var ve=de.ref,ie=de.placerProps,be=ie.placement,Re=ie.maxHeight;return S.createElement(g,Qe({},w,fe,{innerRef:ve,innerProps:{onMouseDown:c.onMenuMouseDown,onMouseMove:c.onMenuMouseMove},isLoading:L,placement:be}),S.createElement(R4e,{captureEnabled:P,onTopArrive:oe,onBottomArrive:pe,lockEnabled:J},function(Pe){return S.createElement(_,Qe({},w,{innerRef:function(xe){c.getMenuListRef(xe),Pe(xe)},innerProps:{role:"listbox","aria-multiselectable":w.isMulti,id:c.getElementId("listbox")},isLoading:L,maxHeight:Re,focusedOption:x}),ae)}))});return W||q==="fixed"?S.createElement(C,Qe({},w,{appendTo:W,controlElement:this.controlRef,menuPlacement:z,menuPosition:q}),se):se}},{key:"renderFormField",value:function(){var c=this,d=this.props,f=d.delimiter,v=d.isDisabled,g=d.isMulti,_=d.name,C=d.required,b=this.state.selectValue;if(C&&!this.hasValue()&&!v)return S.createElement(A4e,{name:_,onFocus:this.onValueInputFocus});if(!(!_||v))if(g)if(f){var T=b.map(function(x){return c.getOptionValue(x)}).join(f);return S.createElement("input",{name:_,type:"hidden",value:T})}else{var I=b.length>0?b.map(function(x,N){return S.createElement("input",{key:"i-".concat(N),name:_,type:"hidden",value:c.getOptionValue(x)})}):S.createElement("input",{name:_,type:"hidden",value:""});return S.createElement("div",null,I)}else{var w=b[0]?this.getOptionValue(b[0]):"";return S.createElement("input",{name:_,type:"hidden",value:w})}}},{key:"renderLiveRegion",value:function(){var c=this.commonProps,d=this.state,f=d.ariaSelection,v=d.focusedOption,g=d.focusedValue,_=d.isFocused,C=d.selectValue,b=this.getFocusableOptions();return S.createElement(f4e,Qe({},c,{id:this.getElementId("live-region"),ariaSelection:f,focusedOption:v,focusedValue:g,isFocused:_,selectValue:C,focusableOptions:b,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var c=this.getComponents(),d=c.Control,f=c.IndicatorsContainer,v=c.SelectContainer,g=c.ValueContainer,_=this.props,C=_.className,b=_.id,T=_.isDisabled,I=_.menuIsOpen,w=this.state.isFocused,x=this.commonProps=this.getCommonProps();return S.createElement(v,Qe({},x,{className:C,innerProps:{id:b,onKeyDown:this.onKeyDown},isDisabled:T,isFocused:w}),this.renderLiveRegion(),S.createElement(d,Qe({},x,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:T,isFocused:w,menuIsOpen:I}),S.createElement(g,Qe({},x,{isDisabled:T}),this.renderPlaceholderOrValue(),this.renderInput()),S.createElement(f,Qe({},x,{isDisabled:T}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(c,d){var f=d.prevProps,v=d.clearFocusValueOnUpdate,g=d.inputIsHiddenAfterUpdate,_=d.ariaSelection,C=d.isFocused,b=d.prevWasFocused,T=d.instancePrefix,I=c.options,w=c.value,x=c.menuIsOpen,N=c.inputValue,P=c.isMulti,O=QW(w),L={};if(f&&(w!==f.value||I!==f.options||x!==f.menuIsOpen||N!==f.inputValue)){var M=x?z4e(c,O):[],F=x?fG(uC(c,O),"".concat(T,"-option")):[],V=v?W4e(d,O):null,j=G4e(d,M),z=jx(F,j);L={selectValue:O,focusedOption:j,focusedOptionId:z,focusableOptionsWithIds:F,focusedValue:V,clearFocusValueOnUpdate:!1}}var q=g!=null&&c!==f?{inputIsHidden:g,inputIsHiddenAfterUpdate:void 0}:{},W=_,J=C&&b;return C&&!J&&(W={value:My(P,O,O[0]||null),options:O,action:"initial-input-focus"},J=!b),(_==null?void 0:_.action)==="initial-input-focus"&&(W=null),_e(_e(_e({},L),q),{},{prevProps:c,ariaSelection:W,prevWasFocused:J})}}]),o}(S.Component);FZ.defaultProps=H4e;var q4e=S.forwardRef(function(e,r){var o=fMe(e);return S.createElement(FZ,Qe({ref:r},o))}),Y4e=q4e;const{Title:X4e,Paragraph:J4e}=Fo,Q4e=S.memo(function({label:r}){const s=Kc().filter(g=>g.hasAudio||g.hasVideo),c=Zg(g=>g.localTracks),d=Zg(g=>g.hostRoom),f=gu(),v=ws();return ue.jsxs("div",{className:"room-selector-item",children:[ue.jsx("i",{className:"i-mdi-chat-processing-outline text-5 color-zinc"}),ue.jsx("code",{className:"bg-rose color-white px-2 rounded",children:r}),f&&c&&v.uid&&(d==null?void 0:d.client.channelName)===v.channelName&&ue.jsxs("div",{className:"user",children:[ue.jsx(UG,{audioTrack:c[0],cameraOn:!0,micOn:!0,videoTrack:c[1]}),ue.jsx("div",{className:"mask"}),ue.jsx("label",{className:"label",children:Gc(v.uid)})]},v.uid),ue.jsx(ue.Fragment,{children:s.map(g=>ue.jsxs("div",{className:"user",children:[ue.jsx(dD,{user:g}),ue.jsx("div",{className:"mask"}),ue.jsx("label",{className:"label",children:Gc(g.uid)})]},g.uid))})]})}),Z4e=({innerProps:e,isDisabled:r,label:o,data:s})=>{const{client:c}=s.value;return r?null:ue.jsx("div",{...e,children:ue.jsx(LG,{client:c,children:ue.jsx(Q4e,{label:o})})})},eBe=()=>{const e=Zg(f=>f.getRooms),[r,o]=S.useState(!1);S.useEffect(()=>{e()},[]);const s=Zg(f=>f.rooms),c=Zg(f=>f.selectChannel),d=S.useMemo(()=>s==null?void 0:s.map(f=>({label:f.channel.replace(/[^0-9]*/,"Room"),value:f})),[s]);return ue.jsx(Fi,{children:r?ue.jsx("div",{className:"max-w-lg p-10",children:ue.jsx(Y4e,{components:{Option:Z4e},isMulti:!1,menuIsOpen:!0,onChange:f=>{var v;return c((v=f==null?void 0:f.value)==null?void 0:v.channel)},options:d})}):ue.jsxs("div",{className:"h-screen p-3",children:[ue.jsx(X4e,{children:"multi-channel"}),ue.jsx(J4e,{children:"This is multi-channel example. By create multi Agora Client. You can join multi-channel"}),ue.jsx("div",{className:"text-xl",children:ue.jsx(po,{onClick:()=>o(!0),type:"primary",children:"show demo"})})]})})};function UZ({videoTracks:e}){return ue.jsx(ue.Fragment,{children:e.map(r=>ue.jsxs(sc.Item,{children:[ue.jsx(oE,{cover:kl(),track:r},r.getUserId()),ue.jsx(mu,{children:`${Gc(r.getUserId())}{${r.getUserId()}}`})]},r.getUserId()))})}const tBe=()=>{const[e,r]=S.useState(!1);ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},e);const[o,s]=S.useState(!1),[c,d]=S.useState(!1),[f,v]=S.useState(!1),{screenTrack:g,error:_}=kG(f,{},"auto");S.useEffect(()=>{v(!1)},[_]);const C=Kc(),{videoTracks:b}=bm(C.filter(I=>I.uid!==Yt.ShareScreenUID)),{audioTracks:T}=Cm(C.filter(I=>I.uid!==Yt.ShareScreenUID));return T.map(I=>I.play()),ue.jsxs(Fi,{children:[ue.jsx("div",{className:"h-screen p-3",children:e&&ue.jsxs(ue.Fragment,{children:[ue.jsx(po,{onClick:()=>v(I=>!I),type:"primary",children:f?"stop share screen":"start share screen"}),f&&ue.jsx(Fke,{onCloseScreenShare:()=>{v(!1)},screenShareOn:f,screenTrack:g}),ue.jsx(aE,{cameraOn:c,micOn:o,renderRemoteUsers:()=>ue.jsx(UZ,{videoTracks:b})})]})}),ue.jsx(Da,{calling:e,cameraOn:c,micOn:o,setCalling:()=>{r(I=>!I),v(!1)},setCamera:()=>{d(I=>!I)},setMic:()=>{s(I=>!I)}})]})};const{Title:nBe,Paragraph:rBe,Text:iBe}=Fo,oBe=()=>{const[e,r]=S.useState(!1);ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},e);const[o,s]=S.useState(!1),[c,d]=S.useState(!1),f=Kc(),[v,g]=S.useState(!0),{videoTracks:_}=bm(v?f:f.filter((I,w)=>w==0)),{audioTracks:C}=Cm(f);C.map(I=>I.play());const b=()=>ue.jsx("div",{className:"p-4 text-xl",children:ue.jsx(po,{onClick:()=>g(I=>!I),type:"primary",children:`switch to layout ${v?2:1}`})}),T=()=>ue.jsx(ue.Fragment,{children:v?ue.jsx(aBe,{videoTracks:_}):ue.jsx(sBe,{videoTracks:_})});return ue.jsxs(Fi,{children:[e?ue.jsx(aE,{cameraOn:c,micOn:o,renderAction:b,renderRemoteUsers:T}):ue.jsxs("div",{className:"h-screen p-3",children:[ue.jsx(nBe,{children:"SwitchLayout"}),ue.jsxs(rBe,{children:["By using ",ue.jsx(iBe,{keyboard:!0,children:"useRemoteVideoTracks"})," hook to dynamically switch the camera track, this will not generate a new track, but only dynamically subscribe and unsubscribe the track according to your needs."]})]}),ue.jsx(Da,{calling:e,cameraOn:c,micOn:o,setCalling:()=>{r(I=>!I)},setCamera:()=>{d(I=>!I)},setMic:()=>{s(I=>!I)}})]})};function aBe({videoTracks:e}){return ue.jsx(ue.Fragment,{children:e.map(r=>ue.jsxs(sc.Item,{children:[ue.jsx(oE,{cover:kl(),track:r},r.getUserId()),ue.jsx(mu,{children:`Layout1 ${Gc(r.getUserId())}{${r.getUserId()}}`})]},r.getUserId()))})}function sBe({videoTracks:e}){return ue.jsx(ue.Fragment,{children:e.map(r=>ue.jsxs(sc.Item,{children:[ue.jsx(oE,{cover:kl(),track:r},r.getUserId()),ue.jsx(mu,{children:`Layout2 ${Gc(r.getUserId())}{${r.getUserId()}}`})]},r.getUserId()))})}const BZ=[{label:"switch-layout",component:oBe},{label:"multi-channel",component:eBe},{label:"share-screen",component:tBe}],cBe=()=>{const[e,r]=S.useState(!1);ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},e);const[o,s]=S.useState(!1),[c,d]=S.useState(!1),f=Kc(),{videoTracks:v}=bm(f),{audioTracks:g}=Cm(f);return g.map(_=>_.play()),ue.jsxs(Fi,{children:[e?ue.jsx(aE,{cameraOn:c,micOn:o,renderRemoteUsers:()=>ue.jsx(UZ,{videoTracks:v})}):ue.jsx(Fi,{}),ue.jsx(Da,{calling:e,cameraOn:c,micOn:o,setCalling:()=>{r(_=>!_)},setCamera:()=>{d(_=>!_)},setMic:()=>{s(_=>!_)}})]})},VZ=[{label:"overview",component:cBe}],{Title:lBe,Paragraph:$x}=Fo,uBe=()=>{ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},!0);const[e,r]=S.useState(!1),[o,s]=S.useState(),{localMicrophoneTrack:c}=Sm(e);return Ad([c]),S.useEffect(()=>{c&&s({muted:c.muted,isPlaying:c.isPlaying,enabled:c.enabled})},[e,c]),ue.jsxs(Fi,{children:[ue.jsxs("div",{className:"h-screen p-3",children:[ue.jsx(lBe,{children:"local audio track status"}),o&&ue.jsxs(ue.Fragment,{children:[ue.jsx($x,{children:`muted: ${o==null?void 0:o.muted}`}),ue.jsx($x,{children:`isPlaying: ${o.isPlaying}`}),ue.jsx($x,{children:`enabled: ${o==null?void 0:o.enabled}`})]}),ue.jsx(pb,{disabled:!e,track:c})]}),ue.jsx(Da,{micOn:e,setMic:()=>{r(d=>!d)}})]})},{Title:dBe}=Fo,hBe=()=>{ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},!0);const[e,r]=S.useState(!1),[o,s]=S.useState(!1),[c,d]=S.useState(!1),[f,v]=S.useState(!1),{localMicrophoneTrack:g}=Sm(e),{localCameraTrack:_}=ym(o);return Ad([g,_]),ue.jsxs(Fi,{children:[ue.jsxs("div",{className:"h-screen p-3 overflow-auto",children:[ue.jsx(dBe,{children:"local user status"}),ue.jsxs(po,{className:"m-2",onClick:()=>{v(C=>!C)},type:f?"primary":"default",children:["playAudio : ",JSON.stringify(f)]}),ue.jsxs(po,{className:"m-2",onClick:()=>{d(C=>!C)},type:c?"primary":"default",children:["playVideo : ",JSON.stringify(c)]}),ue.jsx(po,{className:"m-2",onClick:()=>{d(!0),s(!1)},type:"primary",children:"cameraOn=false playVideo=true"}),ue.jsx(po,{className:"m-2",onClick:()=>{d(!1),s(!0)},type:"primary",children:"cameraOn=true playVideo=false"}),ue.jsx(UG,{audioTrack:g,cameraOn:o,className:"m-2",micOn:e,playAudio:f,playVideo:c,style:{width:"300px",height:"300px"},videoTrack:_})]}),ue.jsx(Da,{cameraOn:o,micOn:e,setCamera:()=>{s(C=>!C)},setMic:()=>{r(C=>!C)}})]})},{Title:fBe}=Fo,pBe=()=>{ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},!0);const[e,r]=S.useState(!1),{localCameraTrack:o}=ym();return Ad([o]),ue.jsxs(Fi,{children:[ue.jsxs("div",{className:"h-screen p-3",children:[ue.jsx(fBe,{children:"local video track"}),ue.jsx(Bv,{disabled:!e,play:e,style:{width:"300px",height:"300px"},track:o,videoPlayerConfig:{mirror:!0,fit:"contain"}})]}),ue.jsx(Da,{cameraOn:e,setCamera:()=>{r(s=>!s)}})]})},{Title:mBe}=Fo,gBe=()=>{const[e,r]=S.useState(!1);ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},e);const[o,s]=S.useState(),c=Kc(),{audioTracks:d}=Cm(c);return S.useEffect(()=>{if(d&&d.length>0){const f=[];d.map(v=>{f.push({isPlay:v.isPlaying,id:v.getTrackId(),track:v})}),s(f)}else s([])},[d]),S.useEffect(()=>{e||s([])},[e]),ue.jsxs(Fi,{children:[ue.jsxs("div",{className:"h-screen p-3",children:[ue.jsx(mBe,{children:"remote audio track status"}),o&&o.length>0&&o.map(f=>ue.jsxs("div",{children:[ue.jsx("div",{className:"p-4 text-xl",children:ue.jsx(po,{onClick:()=>{f.isPlay=!f.isPlay,s([...o])},type:"primary",children:"switch this remote audio track play status"})}),f.isPlay,ue.jsx(BG,{play:f.isPlay,track:f.track})]},f.id))]}),ue.jsx(Da,{calling:e,setCalling:()=>{r(f=>!f)}})]})},{Title:vBe}=Fo,EBe=()=>{const[e,r]=S.useState(!1),o=S.useMemo(()=>kl(),[]);ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},e);const[s,c]=S.useState(),d=Kc();return S.useEffect(()=>{if(d.length>0){const f=[];d.map(v=>{f.push({playVideo:!0,playAudio:!0,id:v.uid,user:v})}),c(f)}else c([])},[d]),S.useEffect(()=>{e||c([])},[e]),ue.jsxs(Fi,{children:[ue.jsxs("div",{className:"h-screen p-3",children:[ue.jsx(vBe,{children:"RemoteUser"}),s&&s.length>0&&s.map(f=>ue.jsxs("div",{children:[ue.jsxs("div",{className:"text-xl",children:[ue.jsx(po,{className:"m-2",onClick:()=>{f.playVideo=!f.playVideo,c([...s])},type:f.playVideo?"default":"primary",children:`${f.playVideo?"stop":"play"} RemoteUser Video`}),ue.jsx(po,{className:"m-2",onClick:()=>{f.playAudio=!f.playAudio,c([...s])},type:f.playAudio?"default":"primary",children:`${f.playAudio?"stop":"play"} RemoteUser Audio`})]}),ue.jsx("div",{className:"p-4 text-xl",children:ue.jsx(dD,{cover:o,playAudio:f.playAudio,playVideo:f.playVideo,style:{width:"150px",height:"100px"},user:f.user})})]},f.id))]}),ue.jsx(Da,{calling:e,setCalling:()=>{r(f=>!f)}})]})},{Title:_Be}=Fo,SBe=()=>{const[e,r]=S.useState(!1);ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},e);const[o,s]=S.useState(),c=Kc(),{videoTracks:d}=bm(c);return S.useEffect(()=>{if(d&&d.length>0){const f=[];d.map(v=>{f.push({isPlay:!0,id:v.getTrackId(),track:v})}),s(f)}else s([])},[d]),S.useEffect(()=>{e||s([])},[e]),ue.jsxs(Fi,{children:[ue.jsxs("div",{className:"h-screen p-3",children:[ue.jsx(_Be,{children:"remote video track status"}),o&&o.length>0&&o.map(f=>ue.jsxs("div",{children:[ue.jsx("div",{className:"p-4 text-xl",children:ue.jsx(po,{onClick:()=>{f.isPlay=!f.isPlay,s([...o])},type:"primary",children:"switch this remote video track play status"})}),ue.jsx("div",{className:"p-4 text-xl",children:ue.jsx(uD,{play:f.isPlay,style:{width:"150px",height:"100px"},track:f.track})})]},f.id))]}),ue.jsx(Da,{calling:e,setCalling:()=>{r(f=>!f)}})]})},jZ=[{label:"LocalAudioTrack",component:uBe},{label:"RemoteAudioTrack",component:gBe},{label:"LocalVideoTrack",component:pBe},{label:"RemoteVideoTrack",component:SBe},{label:"LocalUser",component:hBe},{label:"RemoteUser",component:EBe}],{Title:yBe}=Fo,CBe=()=>{ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},!0);const[e,r]=S.useState(!1),{localMicrophoneTrack:o}=Sm();return lD(o,e),ue.jsxs(Fi,{children:[ue.jsx("div",{className:"h-screen p-3",children:ue.jsx(yBe,{children:"useAutoPlayAudioTrack"})}),ue.jsx(Da,{micOn:e,setMic:()=>{r(s=>!s)}})]})},{Title:bBe}=Fo,TBe=()=>{ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},!0);const[e,r]=S.useState(!1),o=S.useRef(null),{localCameraTrack:s}=ym();return cD(s,e,o.current),ue.jsxs(Fi,{children:[ue.jsxs("div",{className:"h-screen p-3",children:[ue.jsx(bBe,{children:"useAutoPlayVideoTrack"}),ue.jsx("div",{className:"p-4 text-xl",children:ue.jsx("div",{ref:c=>o.current=c,style:{width:"150px",height:"100px"}})})]}),ue.jsx(Da,{cameraOn:e,setCamera:()=>{r(c=>!c)}})]})},{Title:RBe}=Fo,wBe=()=>{const[e,r]=S.useState(!1),[o,s]=S.useState([]),c=ws();Y0e(c,"connection-state-change",(f,v,g)=>{console.log(`connection-state-change,curState: ${f},revState: ${v},reason: ${g}`),s(_=>_.concat({eventName:"connection-state-change",value:`curState: ${f},revState: ${v},reason: ${g}`}))}),ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},e);const d=()=>ue.jsx(ue.Fragment,{});return ue.jsxs(Fi,{children:[ue.jsxs("div",{className:"h-screen p-3",children:[ue.jsx(RBe,{children:"UseClientEvent"}),ue.jsx(Xz,{bordered:!0,dataSource:o,renderItem:f=>ue.jsxs(Xz.Item,{children:[ue.jsxs(Fo.Text,{mark:!0,children:["[",f.eventName,"]"]})," ",f.value]}),style:{height:"300px",overflow:"auto"}})]}),e&&ue.jsx(aE,{cameraOn:!1,micOn:!1,renderLocalUser:d,showUserInfo:!1}),ue.jsx(Da,{calling:e,setCalling:()=>{r(f=>!f)}})]})},{Title:IBe,Paragraph:Hx,Text:ABe}=Fo,OBe=()=>{const[e,r]=S.useState(!1),o=Z0e();return ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},e),ue.jsx(Fi,{children:ue.jsxs("div",{className:"h-screen p-3",children:[ue.jsx(IBe,{children:"useConnectionState"}),ue.jsxs(Hx,{children:["By using ",ue.jsx(ABe,{keyboard:!0,children:"useConnectionState"})," hook to get the current connection state of the client."]}),ue.jsx(Hx,{children:`result: ${o}`}),ue.jsxs(Hx,{children:[ue.jsx(po,{className:"m-1",onClick:()=>r(!0),type:"primary",children:"Join"}),ue.jsx(po,{className:"m-1",onClick:()=>r(!1),type:"default",children:"Leave"})]})]})})},{Title:xBe,Paragraph:zx,Text:NBe}=Fo,PBe=()=>{const[e,r]=S.useState(!1),o=fb();return ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},e),ue.jsx(Fi,{children:ue.jsxs("div",{className:"h-screen p-3",children:[ue.jsx(xBe,{children:"useCurrentUID"}),ue.jsxs(zx,{children:["By using ",ue.jsx(NBe,{keyboard:!0,children:"useCurrentUID"})," hook to get the UID of the current user."]}),ue.jsx(zx,{children:`result: ${o}`}),ue.jsxs(zx,{children:[ue.jsx(po,{className:"m-1",onClick:()=>r(!0),type:"primary",children:"Join"}),ue.jsx(po,{className:"m-1",onClick:()=>r(!1),type:"default",children:"Leave"})]})]})})},{Title:DBe,Paragraph:Wx,Text:LBe}=Fo,kBe=()=>{const[e,r]=S.useState(!1),o=gu();return ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},e),ue.jsx(Fi,{children:ue.jsxs("div",{className:"h-screen p-3",children:[ue.jsx(DBe,{children:"useIsConnected"}),ue.jsxs(Wx,{children:["By using ",ue.jsx(LBe,{keyboard:!0,children:"useIsConnected"})," hook to determines whether the client is successfully connected to Agora server."]}),ue.jsx(Wx,{children:`result: ${o}`}),ue.jsxs(Wx,{children:[ue.jsx(po,{className:"m-1",onClick:()=>r(!0),type:"primary",children:"Join"}),ue.jsx(po,{className:"m-1",onClick:()=>r(!1),type:"default",children:"Leave"})]})]})})},{Title:MBe,Paragraph:mG,Text:xg}=Fo,FBe=()=>{const[e,r]=S.useState(!1),{data:o,isLoading:s,isConnected:c,error:d}=ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},e),[f,v]=S.useState(!1),[g,_]=S.useState(!1),C=Kc(),{videoTracks:b}=bm(C),{audioTracks:T}=Cm(C);T.map(w=>w.play());const I=()=>ue.jsx(ue.Fragment,{children:b.map(w=>ue.jsxs(sc.Item,{children:[ue.jsx(oE,{cover:kl(),track:w},w.getUserId()),ue.jsx(mu,{children:`${Gc(w.getUserId())}{${w.getUserId()}}`})]},w.getUserId()))});return ue.jsxs(Fi,{children:[ue.jsxs("div",{className:"h-screen p-3",children:[ue.jsx(MBe,{children:"UseJoin"}),ue.jsxs(mG,{children:["By using ",ue.jsx(xg,{keyboard:!0,children:"UseJoin"})," hook to join room."]}),ue.jsxs(mG,{children:["You can do some actions like fetching token before calling join.",ue.jsx("br",{}),"Below is the returned data."]}),ue.jsxs(xg,{children:["data: ",o]}),ue.jsxs(xg,{className:"pl-3",children:["isLoading: ",`${s}`]}),ue.jsxs(xg,{className:"pl-3",children:["isConnected: ",`${c}`]}),ue.jsxs(xg,{className:"pl-3",children:["error: ",`${JSON.stringify(d)}`]})]}),e&&ue.jsx(aE,{cameraOn:g,micOn:f,renderRemoteUsers:I}),ue.jsx(Da,{calling:e,cameraOn:g,micOn:f,setCalling:()=>{r(w=>!w)},setCamera:()=>{_(w=>!w)},setMic:()=>{v(w=>!w)}})]})},{Title:UBe}=Fo,BBe=()=>{const[e,r]=S.useState(!1),[o,s]=S.useState(null),[c,d]=S.useState(null);ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token,uid:Yt.ShareScreenUID},e);const{screenTrack:f,error:v}=kG(e,{},"auto");return S.useEffect(()=>{f?Array.isArray(f)?(s(f.filter(g=>g.trackMediaType==="video")[0]),d(f.filter(g=>g.trackMediaType==="audio")[0])):s(f):(d(null),s(null))},[f]),Ad([o,c],e),S.useEffect(()=>{r(!1)},[v]),PG(o,"track-ended",()=>{console.log("screen sharing ended"),r(!1)}),ue.jsx(Fi,{children:ue.jsxs("div",{className:"h-screen p-3",children:[ue.jsx(UBe,{children:"useLocalScreenTrack"}),ue.jsx(po,{onClick:()=>r(g=>!g),type:"primary",children:e?"stop share screen":"start share screen"}),e&&o&&ue.jsx(Bv,{disabled:!e,play:e,style:{width:"600px",height:"400px"},track:o})]})})},{Title:VBe,Paragraph:jBe}=Fo,$Be=()=>{const e=ege();return ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},!0),ue.jsx(Fi,{children:ue.jsxs("div",{className:"h-screen p-3",children:[ue.jsx(VBe,{children:"useNetworkQuality"}),ue.jsx(jBe,{children:`result: ${JSON.stringify(e)}`})]})})},HBe=()=>{const[e,r]=S.useState(!1),o=fb()||0,s=S.useMemo(()=>Gc(o),[o]),c=S.useMemo(()=>kl(),[]),{isConnected:d}=ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},e),[f,v]=S.useState(!1),[g,_]=S.useState(!1),{localMicrophoneTrack:C}=Sm(f),{localCameraTrack:b}=ym(g);Ad([C,b]);const T=Kc(),I=T.filter(P=>P.hasAudio||P.hasVideo),{videoTracks:w}=bm(T),{audioTracks:x}=Cm(T);x.map(P=>P.play());const N=()=>ue.jsx(ue.Fragment,{children:w.map(P=>ue.jsxs(sc.Item,{children:[ue.jsx(oE,{cover:kl(),track:P},P.getUserId()),ue.jsx(mu,{children:`Layout1 ${Gc(P.getUserId())}{${P.getUserId()}}`})]},P.getUserId()))});return ue.jsxs(Fi,{children:[ue.jsxs(ue.Fragment,{children:[ue.jsx(nL,{published:I.length+(f||g?1:0),total:T.length+1}),ue.jsxs(sc,{children:[d&&ue.jsx(sc.Item,{children:ue.jsx(tL,{audioTrack:C,cameraOn:g,cover:c,micOn:f,videoTrack:b,children:ue.jsx(mu,{children:`${s}{${o}}`})})}),N?N():void 0]})]}),ue.jsx(Da,{calling:e,cameraOn:g,micOn:f,setCalling:()=>r(P=>!P),setCamera:()=>{_(P=>!P)},setMic:()=>{v(P=>!P)}})]})},zBe=()=>{const[e,r]=S.useState(!1),o=gu(),s=fb()||0,c=S.useMemo(()=>Gc(s),[s]),d=S.useMemo(()=>kl(),[]);ro({appid:Yt.appId,channel:Yt.channel,token:Yt.token},e);const[f,v]=S.useState(!1),[g,_]=S.useState(!1),{localMicrophoneTrack:C}=Sm(f),{localCameraTrack:b}=ym(g);Ad([C,b]);const T=Kc(),I=T.filter(w=>w.hasAudio||w.hasVideo);return ue.jsxs(Fi,{children:[ue.jsxs(ue.Fragment,{children:[ue.jsx(nL,{published:I.length+(f||g?1:0),total:T.length+1}),ue.jsxs(sc,{children:[o&&ue.jsx(sc.Item,{children:ue.jsx(tL,{audioTrack:C,cameraOn:g,cover:d,micOn:f,videoTrack:b,children:ue.jsx(mu,{children:`${c}{${s}}`})})}),T.map(w=>ue.jsxs(sc.Item,{children:[ue.jsx(dD,{cover:kl(),user:w}),ue.jsx(mu,{children:`${Gc(w.uid)}{${w.uid}}`})]},w.uid))]})]}),ue.jsx(Da,{calling:e,cameraOn:g,micOn:f,setCalling:()=>r(w=>!w),setCamera:()=>{_(w=>!w)},setMic:()=>{v(w=>!w)}})]})},$Z=[{label:"useJoin",component:FBe},{label:"usePublish",component:HBe},{label:"useRemoteUsers",component:zBe},{label:"useConnectionState",component:OBe},{label:"useIsConnected",component:kBe},{label:"useCurrentUID",component:PBe},{label:"useAutoPlayAudioTrack",component:CBe},{label:"useAutoPlayVideoTrack",component:TBe},{label:"useNetworkQuality",component:$Be},{label:"useLocalScreenTrack",component:BBe},{label:"UseClientEvent",component:wBe}],gG=()=>{const[e,r]=S.useState(Yt.channel),o=g=>{r(g.target.value)},[s,c]=S2e.useNotification(),d=g=>{s[g]({message:"Configuration Saved",description:"Go to other pages and try it now!"})},f=()=>{Yt.channel=e,d("success")},v={wrapperCol:{span:14,offset:4}};return ue.jsxs(Fi,{children:[c,ue.jsx("div",{className:"p-4",children:ue.jsx(jz.Item,{label:"Channel Name",children:ue.jsx(aDe,{onChange:o,style:{width:"200px"},value:e})})}),ue.jsx(jz.Item,{...v,children:ue.jsx(po,{onClick:f,type:"primary",children:"Save configuration"})})]})},{Content:WBe,Sider:GBe}=qP,Qo=["Basic","Hooks","Components","Advanced","Setting"],KBe=[{label:Qo[0],key:Qo[0],children:VZ.map(e=>({key:`/${Qo[0]}/${e.label}`,label:e.label}))},{label:Qo[1],key:Qo[1],children:$Z.map(e=>({key:`/${Qo[1]}/${e.label}`,label:e.label}))},{label:Qo[2],key:Qo[2],children:jZ.map(e=>({key:`/${Qo[2]}/${e.label}`,label:e.label}))},{label:Qo[3],key:Qo[3],children:BZ.map(e=>({key:`/${Qo[3]}/${e.label}`,label:e.label}))},{label:"settings",key:"/setting"}];function qBe(){const[e,r]=S.useState(!1),[o,s]=S.useState([window.location.hash.slice(1).split("/")[1]]),c=f=>{const v=f.find(g=>o.indexOf(g)===-1);v&&Qo.indexOf(v)===-1?s(f):s(v?[v]:[])},d=MEe();return ue.jsx(ue.Fragment,{children:ue.jsxs(qP,{children:[ue.jsx(GBe,{collapsed:e,collapsible:!0,onCollapse:f=>r(f),style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0},children:ue.jsx(Wxe,{items:KBe,mode:"inline",onClick:f=>{d(f.key)},onOpenChange:c,openKeys:o,selectedKeys:[window.location.hash.slice(1)],theme:"dark"})}),ue.jsx(qP,{style:{marginLeft:e?80:200},children:ue.jsxs(WBe,{children:[ue.jsxs(ZEe,{children:[ue.jsx(Ih,{Component:()=>ue.jsx(gG,{}),path:"/*"}),ue.jsx(Ih,{Component:()=>ue.jsx(gG,{}),path:"/setting"}),VZ.map(({label:f,component:v})=>{const g=v;return ue.jsx(Ih,{Component:()=>ue.jsx(Ny,{children:ue.jsx(g,{})}),path:`/${Qo[0]}/${f}`},f)}),$Z.map(({label:f,component:v})=>{const g=v;return ue.jsx(Ih,{Component:()=>ue.jsx(Ny,{children:ue.jsx(g,{})}),path:`/${Qo[1]}/${f}`},f)}),jZ.map(({label:f,component:v})=>{const g=v;return ue.jsx(Ih,{Component:()=>ue.jsx(Ny,{children:ue.jsx(g,{})}),path:`/${Qo[2]}/${f}`},f)}),BZ.map(({label:f,component:v})=>{const g=v;return ue.jsx(Ih,{Component:()=>ue.jsx(Ny,{children:ue.jsx(g,{})}),path:`/${Qo[3]}/${f}`},f)})]}),ue.jsx("a",{"aria-label":"View source on GitHub",className:"github-corner",href:"https://github.com/AgoraIO-Extensions/agora-rtc-react",rel:"noreferrer",target:"_blank",children:ue.jsxs("svg",{"aria-hidden":"true",className:"github-corner-svg",height:"80",viewBox:"0 0 250 250",width:"80",children:[ue.jsx("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),ue.jsx("path",{className:"github-corner-svg-arm",d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}),ue.jsx("path",{className:"github-corner-svg-body",d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"})]})})]})})]})})}lu.setLogLevel(0);Gx.createRoot(document.getElementById("root")).render(ue.jsx(S.StrictMode,{children:ue.jsx(n_e,{children:ue.jsx(qBe,{})})}));
