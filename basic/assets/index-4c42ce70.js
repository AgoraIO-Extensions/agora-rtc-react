var IX=Object.defineProperty;var wX=(e,t,i)=>t in e?IX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var K0=(e,t,i)=>(wX(e,typeof t!="symbol"?t+"":t,i),i);function xF(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const u=Object.getOwnPropertyDescriptor(a,c);u&&Object.defineProperty(e,c,u.get?u:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(c){if(c.ep)return;c.ep=!0;const u=i(c);fetch(c.href,u)}})();var Xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ME(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function OX(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){if(this instanceof a){var c=[null];c.push.apply(c,arguments);var u=Function.bind.apply(t,c);return new u}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),i}var yf={},AX={get exports(){return yf},set exports(e){yf=e}},UE={},_={},NX={get exports(){return _},set exports(e){_=e}},Dn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xf=Symbol.for("react.element"),xX=Symbol.for("react.portal"),PX=Symbol.for("react.fragment"),DX=Symbol.for("react.strict_mode"),kX=Symbol.for("react.profiler"),LX=Symbol.for("react.provider"),MX=Symbol.for("react.context"),UX=Symbol.for("react.forward_ref"),VX=Symbol.for("react.suspense"),FX=Symbol.for("react.memo"),BX=Symbol.for("react.lazy"),i2=Symbol.iterator;function jX(e){return e===null||typeof e!="object"?null:(e=i2&&e[i2]||e["@@iterator"],typeof e=="function"?e:null)}var PF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},DF=Object.assign,kF={};function xh(e,t,i){this.props=e,this.context=t,this.refs=kF,this.updater=i||PF}xh.prototype.isReactComponent={};xh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function LF(){}LF.prototype=xh.prototype;function HI(e,t,i){this.props=e,this.context=t,this.refs=kF,this.updater=i||PF}var WI=HI.prototype=new LF;WI.constructor=HI;DF(WI,xh.prototype);WI.isPureReactComponent=!0;var o2=Array.isArray,MF=Object.prototype.hasOwnProperty,zI={current:null},UF={key:!0,ref:!0,__self:!0,__source:!0};function VF(e,t,i){var a,c={},u=null,d=null;if(t!=null)for(a in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(u=""+t.key),t)MF.call(t,a)&&!UF.hasOwnProperty(a)&&(c[a]=t[a]);var p=arguments.length-2;if(p===1)c.children=i;else if(1<p){for(var f=Array(p),g=0;g<p;g++)f[g]=arguments[g+2];c.children=f}if(e&&e.defaultProps)for(a in p=e.defaultProps,p)c[a]===void 0&&(c[a]=p[a]);return{$$typeof:Xf,type:e,key:u,ref:d,props:c,_owner:zI.current}}function $X(e,t){return{$$typeof:Xf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function GI(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xf}function HX(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var a2=/\/+/g;function ib(e,t){return typeof e=="object"&&e!==null&&e.key!=null?HX(""+e.key):t.toString(36)}function Ug(e,t,i,a,c){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(u){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case Xf:case xX:d=!0}}if(d)return d=e,c=c(d),e=a===""?"."+ib(d,0):a,o2(c)?(i="",e!=null&&(i=e.replace(a2,"$&/")+"/"),Ug(c,t,i,"",function(g){return g})):c!=null&&(GI(c)&&(c=$X(c,i+(!c.key||d&&d.key===c.key?"":(""+c.key).replace(a2,"$&/")+"/")+e)),t.push(c)),1;if(d=0,a=a===""?".":a+":",o2(e))for(var p=0;p<e.length;p++){u=e[p];var f=a+ib(u,p);d+=Ug(u,t,i,f,c)}else if(f=jX(e),typeof f=="function")for(e=f.call(e),p=0;!(u=e.next()).done;)u=u.value,f=a+ib(u,p++),d+=Ug(u,t,i,f,c);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function Y0(e,t,i){if(e==null)return e;var a=[],c=0;return Ug(e,a,"","",function(u){return t.call(i,u,c++)}),a}function WX(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ao={current:null},Vg={transition:null},zX={ReactCurrentDispatcher:Ao,ReactCurrentBatchConfig:Vg,ReactCurrentOwner:zI};Dn.Children={map:Y0,forEach:function(e,t,i){Y0(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Y0(e,function(){t++}),t},toArray:function(e){return Y0(e,function(t){return t})||[]},only:function(e){if(!GI(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Dn.Component=xh;Dn.Fragment=PX;Dn.Profiler=kX;Dn.PureComponent=HI;Dn.StrictMode=DX;Dn.Suspense=VX;Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zX;Dn.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=DF({},e.props),c=e.key,u=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,d=zI.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var p=e.type.defaultProps;for(f in t)MF.call(t,f)&&!UF.hasOwnProperty(f)&&(a[f]=t[f]===void 0&&p!==void 0?p[f]:t[f])}var f=arguments.length-2;if(f===1)a.children=i;else if(1<f){p=Array(f);for(var g=0;g<f;g++)p[g]=arguments[g+2];a.children=p}return{$$typeof:Xf,type:e.type,key:c,ref:u,props:a,_owner:d}};Dn.createContext=function(e){return e={$$typeof:MX,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:LX,_context:e},e.Consumer=e};Dn.createElement=VF;Dn.createFactory=function(e){var t=VF.bind(null,e);return t.type=e,t};Dn.createRef=function(){return{current:null}};Dn.forwardRef=function(e){return{$$typeof:UX,render:e}};Dn.isValidElement=GI;Dn.lazy=function(e){return{$$typeof:BX,_payload:{_status:-1,_result:e},_init:WX}};Dn.memo=function(e,t){return{$$typeof:FX,type:e,compare:t===void 0?null:t}};Dn.startTransition=function(e){var t=Vg.transition;Vg.transition={};try{e()}finally{Vg.transition=t}};Dn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Dn.useCallback=function(e,t){return Ao.current.useCallback(e,t)};Dn.useContext=function(e){return Ao.current.useContext(e)};Dn.useDebugValue=function(){};Dn.useDeferredValue=function(e){return Ao.current.useDeferredValue(e)};Dn.useEffect=function(e,t){return Ao.current.useEffect(e,t)};Dn.useId=function(){return Ao.current.useId()};Dn.useImperativeHandle=function(e,t,i){return Ao.current.useImperativeHandle(e,t,i)};Dn.useInsertionEffect=function(e,t){return Ao.current.useInsertionEffect(e,t)};Dn.useLayoutEffect=function(e,t){return Ao.current.useLayoutEffect(e,t)};Dn.useMemo=function(e,t){return Ao.current.useMemo(e,t)};Dn.useReducer=function(e,t,i){return Ao.current.useReducer(e,t,i)};Dn.useRef=function(e){return Ao.current.useRef(e)};Dn.useState=function(e){return Ao.current.useState(e)};Dn.useSyncExternalStore=function(e,t,i){return Ao.current.useSyncExternalStore(e,t,i)};Dn.useTransition=function(){return Ao.current.useTransition()};Dn.version="18.2.0";(function(e){e.exports=Dn})(NX);const Ot=ME(_),ov=xF({__proto__:null,default:Ot},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GX=_,KX=Symbol.for("react.element"),YX=Symbol.for("react.fragment"),qX=Object.prototype.hasOwnProperty,XX=GX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JX={key:!0,ref:!0,__self:!0,__source:!0};function FF(e,t,i){var a,c={},u=null,d=null;i!==void 0&&(u=""+i),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(d=t.ref);for(a in t)qX.call(t,a)&&!JX.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:KX,type:e,key:u,ref:d,props:c,_owner:XX.current}}UE.Fragment=YX;UE.jsx=FF;UE.jsxs=FF;(function(e){e.exports=UE})(AX);const Zi=yf.Fragment,le=yf.jsx,Ze=yf.jsxs;var NT={},QX={get exports(){return NT},set exports(e){NT=e}};(function(e,t){(function(i,a){e.exports=a()})(Xt,function(){function i(n,r){return r.forEach(function(o){o&&typeof o!="string"&&!Array.isArray(o)&&Object.keys(o).forEach(function(s){if(s!=="default"&&!(s in n)){var l=Object.getOwnPropertyDescriptor(o,s);Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:function(){return o[s]}})}})}),Object.freeze(n)}var a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Xt<"u"?Xt:typeof self<"u"?self:{},c=function(n){try{return!!n()}catch{return!0}},u=!c(function(){var n=function(){}.bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),d=u,p=Function.prototype,f=p.bind,g=p.call,E=d&&f.bind(g,g),y=d?function(n){return n&&E(n)}:function(n){return n&&function(){return g.apply(n,arguments)}},C=y({}.isPrototypeOf),w=function(n){return n&&n.Math==Math&&n},R=w(typeof globalThis=="object"&&globalThis)||w(typeof window=="object"&&window)||w(typeof self=="object"&&self)||w(typeof a=="object"&&a)||function(){return this}()||Function("return this")(),O=u,k=Function.prototype,A=k.apply,x=k.call,P=typeof Reflect=="object"&&Reflect.apply||(O?x.bind(A):function(){return x.apply(A,arguments)}),M=function(n){return typeof n=="function"},B={},F=!c(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),j=u,$=Function.prototype.call,ee=j?$.bind($):function(){return $.apply($,arguments)},H={},J={}.propertyIsEnumerable,X=Object.getOwnPropertyDescriptor,W=X&&!J.call({1:2},1);H.f=W?function(n){var r=X(this,n);return!!r&&r.enumerable}:J;var Z,ne,ie=function(n,r){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:r}},de=y,oe=de({}.toString),fe=de("".slice),ge=function(n){return fe(oe(n),8,-1)},ae=y,se=c,he=ge,pe=R.Object,Oe=ae("".split),be=se(function(){return!pe("z").propertyIsEnumerable(0)})?function(n){return he(n)=="String"?Oe(n,""):pe(n)}:pe,Ne=R.TypeError,Ae=function(n){if(n==null)throw Ne("Can't call method on "+n);return n},at=be,it=Ae,ze=function(n){return at(it(n))},ht=M,Pe=function(n){return typeof n=="object"?n!==null:ht(n)},Ye={},lt=Ye,At=R,_t=M,Be=function(n){return _t(n)?n:void 0},$e=function(n,r){return arguments.length<2?Be(lt[n])||Be(At[n]):lt[n]&&lt[n][r]||At[n]&&At[n][r]},ke=$e("navigator","userAgent")||"",et=R,ft=ke,Rt=et.process,on=et.Deno,dn=Rt&&Rt.versions||on&&on.version,jt=dn&&dn.v8;jt&&(ne=(Z=jt.split("."))[0]>0&&Z[0]<4?1:+(Z[0]+Z[1])),!ne&&ft&&(!(Z=ft.match(/Edge\/(\d+)/))||Z[1]>=74)&&(Z=ft.match(/Chrome\/(\d+)/))&&(ne=+Z[1]);var zt=ne,Mn=zt,_n=c,Lt=!!Object.getOwnPropertySymbols&&!_n(function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&Mn&&Mn<41}),xt=Lt&&!Symbol.sham&&typeof Symbol.iterator=="symbol",en=$e,st=M,mt=C,$t=xt,yr=R.Object,Rn=$t?function(n){return typeof n=="symbol"}:function(n){var r=en("Symbol");return st(r)&&mt(r.prototype,yr(n))},fr=R.String,kn=function(n){try{return fr(n)}catch{return"Object"}},tt=M,gt=kn,gn=R.TypeError,Mt=function(n){if(tt(n))return n;throw gn(gt(n)+" is not a function")},Dr=Mt,mr=function(n,r){var o=n[r];return o==null?void 0:Dr(o)},Ln=ee,je=M,Qe=Pe,Ue=R.TypeError,yt={exports:{}},Ut=R,Dt=Object.defineProperty,sr=function(n,r){try{Dt(Ut,n,{value:r,configurable:!0,writable:!0})}catch{Ut[n]=r}return r},zn="__core-js_shared__",Xr=R[zn]||sr(zn,{}),Fn=Xr;(yt.exports=function(n,r){return Fn[n]||(Fn[n]=r!==void 0?r:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var cr=Ae,Eo=R.Object,bi=function(n){return Eo(cr(n))},ta=bi,_o=y({}.hasOwnProperty),Hn=Object.hasOwn||function(n,r){return _o(ta(n),r)},na=y,Ps=0,ji=Math.random(),Do=na(1 .toString),ts=function(n){return"Symbol("+(n===void 0?"":n)+")_"+Do(++Ps+ji,36)},Ds=R,ko=yt.exports,ra=Hn,ic=ts,ks=Lt,ia=xt,Lo=ko("wks"),ti=Ds.Symbol,ro=ti&&ti.for,ns=ia?ti:ti&&ti.withoutSetter||ic,Xn=function(n){if(!ra(Lo,n)||!ks&&typeof Lo[n]!="string"){var r="Symbol."+n;ks&&ra(ti,n)?Lo[n]=ti[n]:Lo[n]=ia&&ro?ro(r):ns(r)}return Lo[n]},So=ee,oa=Pe,rs=Rn,oc=mr,ac=function(n,r){var o,s;if(r==="string"&&je(o=n.toString)&&!Qe(s=Ln(o,n))||je(o=n.valueOf)&&!Qe(s=Ln(o,n))||r!=="string"&&je(o=n.toString)&&!Qe(s=Ln(o,n)))return s;throw Ue("Can't convert object to primitive value")},is=Xn,os=R.TypeError,vt=is("toPrimitive"),ot=function(n,r){if(!oa(n)||rs(n))return n;var o,s=oc(n,vt);if(s){if(r===void 0&&(r="default"),o=So(s,n,r),!oa(o)||rs(o))return o;throw os("Can't convert object to primitive value")}return r===void 0&&(r="number"),ac(n,r)},tn=Rn,In=function(n){var r=ot(n,"string");return tn(r)?r:r+""},hn=Pe,Jn=R.document,Br=hn(Jn)&&hn(Jn.createElement),Mo=function(n){return Br?Jn.createElement(n):{}},yo=Mo,as=!F&&!c(function(){return Object.defineProperty(yo("div"),"a",{get:function(){return 7}}).a!=7}),xa=F,Wl=ee,fm=H,qh=ie,mm=ze,W_=In,z_=Hn,G_=as,Pt=Object.getOwnPropertyDescriptor;B.f=xa?Pt:function(n,r){if(n=mm(n),r=W_(r),G_)try{return Pt(n,r)}catch{}if(z_(n,r))return qh(!Wl(fm.f,n,r),n[r])};var Qt=c,Gn=M,lr=/#|\.prototype\./,Nn=function(n,r){var o=Bc[zl(n)];return o==jc||o!=sc&&(Gn(r)?Qt(r):!!r)},zl=Nn.normalize=function(n){return String(n).replace(lr,".").toLowerCase()},Bc=Nn.data={},sc=Nn.NATIVE="N",jc=Nn.POLYFILL="P",Gl=Nn,u$=Mt,d$=u,h$=y(y.bind),Xh=function(n,r){return u$(n),r===void 0?n:d$?h$(n,r):function(){return n.apply(r,arguments)}},ss={},$1=F&&c(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),H1=R,p$=Pe,f$=H1.String,m$=H1.TypeError,cs=function(n){if(p$(n))return n;throw m$(f$(n)+" is not an object")},g$=F,v$=as,E$=$1,gm=cs,W1=In,_$=R.TypeError,K_=Object.defineProperty,S$=Object.getOwnPropertyDescriptor,y$="enumerable",C$="configurable",b$="writable";ss.f=g$?E$?function(n,r,o){if(gm(n),r=W1(r),gm(o),typeof n=="function"&&r==="prototype"&&"value"in o&&b$ in o&&!o.writable){var s=S$(n,r);s&&s.writable&&(n[r]=o.value,o={configurable:C$ in o?o.configurable:s.configurable,enumerable:y$ in o?o.enumerable:s.enumerable,writable:!1})}return K_(n,r,o)}:K_:function(n,r,o){if(gm(n),r=W1(r),gm(o),v$)try{return K_(n,r,o)}catch{}if("get"in o||"set"in o)throw _$("Accessors not supported");return"value"in o&&(n[r]=o.value),n};var T$=ss,R$=ie,Kl=F?function(n,r,o){return T$.f(n,r,R$(1,o))}:function(n,r,o){return n[r]=o,n},vm=R,I$=P,w$=y,O$=M,A$=B.f,N$=Gl,Gu=Ye,x$=Xh,Ku=Kl,z1=Hn,P$=function(n){var r=function(o,s,l){if(this instanceof r){switch(arguments.length){case 0:return new n;case 1:return new n(o);case 2:return new n(o,s)}return new n(o,s,l)}return I$(n,this,arguments)};return r.prototype=n.prototype,r},$i=function(n,r){var o,s,l,h,m,v,S,T,b=n.target,I=n.global,L=n.stat,V=n.proto,K=I?vm:L?vm[b]:(vm[b]||{}).prototype,Y=I?Gu:Gu[b]||Ku(Gu,b,{})[b],q=Y.prototype;for(l in r)o=!N$(I?l:b+(L?".":"#")+l,n.forced)&&K&&z1(K,l),m=Y[l],o&&(v=n.noTargetGet?(T=A$(K,l))&&T.value:K[l]),h=o&&v?v:r[l],o&&typeof m==typeof h||(S=n.bind&&o?x$(h,vm):n.wrap&&o?P$(h):V&&O$(h)?w$(h):h,(n.sham||h&&h.sham||m&&m.sham)&&Ku(S,"sham",!0),Ku(Y,l,S),V&&(z1(Gu,s=b+"Prototype")||Ku(Gu,s,{}),Ku(Gu[s],l,h),n.real&&q&&!q[l]&&Ku(q,l,h)))},D$=Math.ceil,k$=Math.floor,Y_=function(n){var r=+n;return r!=r||r===0?0:(r>0?k$:D$)(r)},L$=Y_,M$=Math.min,U$=function(n){return n>0?M$(L$(n),9007199254740991):0},$c=function(n){return U$(n.length)},V$=Mt,F$=bi,B$=be,j$=$c,$$=R.TypeError,G1=function(n){return function(r,o,s,l){V$(o);var h=F$(r),m=B$(h),v=j$(h),S=n?v-1:0,T=n?-1:1;if(s<2)for(;;){if(S in m){l=m[S],S+=T;break}if(S+=T,n?S<0:v<=S)throw $$("Reduce of empty array with no initial value")}for(;n?S>=0:v>S;S+=T)S in m&&(l=o(l,m[S],S,h));return l}},H$={left:G1(!1),right:G1(!0)},W$=c,q_=function(n,r){var o=[][n];return!!o&&W$(function(){o.call(null,r||function(){throw 1},1)})},Em=ge(R.process)=="process",z$=H$.left,K1=zt,G$=Em;$i({target:"Array",proto:!0,forced:!q_("reduce")||!G$&&K1>79&&K1<83},{reduce:function(n){var r=arguments.length;return z$(this,n,r,r>1?arguments[1]:void 0)}});var K$=Ye,Hc=function(n){return K$[n+"Prototype"]},Y$=Hc("Array").reduce,q$=C,X$=Y$,X_=Array.prototype,Y1=function(n){var r=n.reduce;return n===X_||q$(X_,n)&&r===X_.reduce?X$:r},Wc=Y1;let q1=!0,X1=!0;function _m(n,r,o){const s=n.match(r);return s&&s.length>=o&&parseInt(s[o],10)}function Yl(n,r,o){if(!n.RTCPeerConnection)return;const s=n.RTCPeerConnection.prototype,l=s.addEventListener;s.addEventListener=function(m,v){if(m!==r)return l.apply(this,arguments);const S=T=>{const b=o(T);b&&(v.handleEvent?v.handleEvent(b):v(b))};return this._eventMap=this._eventMap||{},this._eventMap[r]||(this._eventMap[r]=new Map),this._eventMap[r].set(v,S),l.apply(this,[m,S])};const h=s.removeEventListener;s.removeEventListener=function(m,v){if(m!==r||!this._eventMap||!this._eventMap[r])return h.apply(this,arguments);if(!this._eventMap[r].has(v))return h.apply(this,arguments);const S=this._eventMap[r].get(v);return this._eventMap[r].delete(v),this._eventMap[r].size===0&&delete this._eventMap[r],Object.keys(this._eventMap).length===0&&delete this._eventMap,h.apply(this,[m,S])},Object.defineProperty(s,"on"+r,{get(){return this["_on"+r]},set(m){this["_on"+r]&&(this.removeEventListener(r,this["_on"+r]),delete this["_on"+r]),m&&this.addEventListener(r,this["_on"+r]=m)},enumerable:!0,configurable:!0})}function J$(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(q1=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function Q$(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(X1=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function J1(){if(typeof window=="object"){if(q1)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function J_(n,r){X1&&console.warn(n+" is deprecated, please use "+r+" instead.")}function Z$(n){const r={browser:null,version:null};if(n===void 0||!n.navigator)return r.browser="Not a browser.",r;const{navigator:o}=n;if(o.mozGetUserMedia)r.browser="firefox",r.version=_m(o.userAgent,/Firefox\/(\d+)\./,1);else if(o.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)r.browser="chrome",r.version=_m(o.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!n.RTCPeerConnection||!o.userAgent.match(/AppleWebKit\/(\d+)\./))return r.browser="Not a supported browser.",r;r.browser="safari",r.version=_m(o.userAgent,/AppleWebKit\/(\d+)\./,1),r.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype}return r}function Q1(n){return Object.prototype.toString.call(n)==="[object Object]"}function Z1(n){var r;return Q1(n)?Wc(r=Object.keys(n)).call(r,function(o,s){const l=Q1(n[s]),h=l?Z1(n[s]):n[s],m=l&&!Object.keys(h).length;return h===void 0||m?o:Object.assign(o,{[s]:h})},{}):n}function eO(n,r,o){const s=o?"outbound-rtp":"inbound-rtp",l=new Map;if(r===null)return l;const h=[];return n.forEach(m=>{m.type==="track"&&m.trackIdentifier===r.id&&h.push(m)}),h.forEach(m=>{n.forEach(v=>{v.type===s&&v.trackId===m.id&&function S(T,b,I){b&&!I.has(b.id)&&(I.set(b.id,b),Object.keys(b).forEach(L=>{L.endsWith("Id")?S(T,T.get(b[L]),I):L.endsWith("Ids")&&b[L].forEach(V=>{S(T,T.get(V),I)})}))}(n,v,l)})}),l}var eH=yt.exports,tH=ts,tO=eH("keys"),Sm=function(n){return tO[n]||(tO[n]=tH(n))},nH=!c(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),rH=R,iH=Hn,oH=M,aH=bi,sH=nH,nO=Sm("IE_PROTO"),Q_=rH.Object,cH=Q_.prototype,Z_=sH?Q_.getPrototypeOf:function(n){var r=aH(n);if(iH(r,nO))return r[nO];var o=r.constructor;return oH(o)&&r instanceof o?o.prototype:r instanceof Q_?cH:null},rO=R,lH=M,uH=rO.String,dH=rO.TypeError,hH=y,pH=cs,fH=function(n){if(typeof n=="object"||lH(n))return n;throw dH("Can't set "+uH(n)+" as a prototype")},mH=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,o={};try{(n=hH(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(o,[]),r=o instanceof Array}catch{}return function(s,l){return pH(s),fH(l),r?n(s,l):s.__proto__=l,s}}():void 0),ym={},gH=Y_,vH=Math.max,EH=Math.min,eS=function(n,r){var o=gH(n);return o<0?vH(o+r,0):EH(o,r)},_H=ze,SH=eS,yH=$c,iO=function(n){return function(r,o,s){var l,h=_H(r),m=yH(h),v=SH(s,m);if(n&&o!=o){for(;m>v;)if((l=h[v++])!=l)return!0}else for(;m>v;v++)if((n||v in h)&&h[v]===o)return n||v||0;return!n&&-1}},CH={includes:iO(!0),indexOf:iO(!1)},Cm={},tS=Hn,bH=ze,TH=CH.indexOf,RH=Cm,oO=y([].push),aO=function(n,r){var o,s=bH(n),l=0,h=[];for(o in s)!tS(RH,o)&&tS(s,o)&&oO(h,o);for(;r.length>l;)tS(s,o=r[l++])&&(~TH(h,o)||oO(h,o));return h},nS=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],IH=aO,wH=nS.concat("length","prototype");ym.f=Object.getOwnPropertyNames||function(n){return IH(n,wH)};var rS={};rS.f=Object.getOwnPropertySymbols;var OH=$e,AH=ym,NH=rS,xH=cs,PH=y([].concat),DH=OH("Reflect","ownKeys")||function(n){var r=AH.f(xH(n)),o=NH.f;return o?PH(r,o(n)):r},sO=Hn,kH=DH,LH=B,MH=ss,iS={},UH=aO,VH=nS,oS=Object.keys||function(n){return UH(n,VH)},FH=F,BH=$1,jH=ss,$H=cs,HH=ze,WH=oS;iS.f=FH&&!BH?Object.defineProperties:function(n,r){$H(n);for(var o,s=HH(r),l=WH(r),h=l.length,m=0;h>m;)jH.f(n,o=l[m++],s[o]);return n};var bm,cO=$e("document","documentElement"),zH=cs,GH=iS,lO=nS,KH=Cm,YH=cO,qH=Mo,uO=Sm("IE_PROTO"),aS=function(){},dO=function(n){return"<script>"+n+"<\/script>"},hO=function(n){n.write(dO("")),n.close();var r=n.parentWindow.Object;return n=null,r},Tm=function(){try{bm=new ActiveXObject("htmlfile")}catch{}var n,r;Tm=typeof document<"u"?document.domain&&bm?hO(bm):((r=qH("iframe")).style.display="none",YH.appendChild(r),r.src=String("javascript:"),(n=r.contentWindow.document).open(),n.write(dO("document.F=Object")),n.close(),n.F):hO(bm);for(var o=lO.length;o--;)delete Tm.prototype[lO[o]];return Tm()};KH[uO]=!0;var Rm=Object.create||function(n,r){var o;return n!==null?(aS.prototype=zH(n),o=new aS,aS.prototype=null,o[uO]=n):o=Tm(),r===void 0?o:GH.f(o,r)},XH=y("".replace),JH=String(Error("zxcasd").stack),pO=/\n\s*at [^:]*:[^\n]*/,QH=pO.test(JH),ZH=Pe,eW=Kl,Yu={},tW=Yu,nW=Xn("iterator"),rW=Array.prototype,fO={};fO[Xn("toStringTag")]="z";var sS=String(fO)==="[object z]",iW=R,oW=sS,aW=M,Im=ge,sW=Xn("toStringTag"),cW=iW.Object,lW=Im(function(){return arguments}())=="Arguments",zc=oW?Im:function(n){var r,o,s;return n===void 0?"Undefined":n===null?"Null":typeof(o=function(l,h){try{return l[h]}catch{}}(r=cW(n),sW))=="string"?o:lW?Im(r):(s=Im(r))=="Object"&&aW(r.callee)?"Arguments":s},uW=zc,mO=mr,dW=Yu,hW=Xn("iterator"),gO=function(n){if(n!=null)return mO(n,hW)||mO(n,"@@iterator")||dW[uW(n)]},pW=ee,fW=Mt,mW=cs,gW=kn,vW=gO,EW=R.TypeError,_W=ee,vO=cs,SW=mr,yW=Xh,CW=ee,bW=cs,TW=kn,RW=function(n){return n!==void 0&&(tW.Array===n||rW[nW]===n)},IW=$c,EO=C,wW=function(n,r){var o=arguments.length<2?vW(n):r;if(fW(o))return mW(pW(o,n));throw EW(gW(n)+" is not iterable")},OW=gO,_O=function(n,r,o){var s,l;vO(n);try{if(!(s=SW(n,"return"))){if(r==="throw")throw o;return o}s=_W(s,n)}catch(h){l=!0,s=h}if(r==="throw")throw o;if(l)throw s;return vO(s),o},AW=R.TypeError,wm=function(n,r){this.stopped=n,this.result=r},SO=wm.prototype,Om=function(n,r,o){var s,l,h,m,v,S,T,b=o&&o.that,I=!(!o||!o.AS_ENTRIES),L=!(!o||!o.IS_ITERATOR),V=!(!o||!o.INTERRUPTED),K=yW(r,b),Y=function(ue){return s&&_O(s,"normal",ue),new wm(!0,ue)},q=function(ue){return I?(bW(ue),V?K(ue[0],ue[1],Y):K(ue[0],ue[1])):V?K(ue,Y):K(ue)};if(L)s=n;else{if(!(l=OW(n)))throw AW(TW(n)+" is not iterable");if(RW(l)){for(h=0,m=IW(n);m>h;h++)if((v=q(n[h]))&&EO(SO,v))return v;return new wm(!1)}s=wW(n,l)}for(S=s.next;!(T=CW(S,s)).done;){try{v=q(T.value)}catch(ue){_O(s,"throw",ue)}if(typeof v=="object"&&v&&EO(SO,v))return v}return new wm(!1)},NW=zc,xW=R.String,qu=function(n){if(NW(n)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return xW(n)},PW=qu,DW=ie,kW=!c(function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",DW(1,7)),n.stack!==7)}),LW=$i,MW=R,UW=C,VW=Z_,Am=mH,FW=function(n,r,o){for(var s=kH(r),l=MH.f,h=LH.f,m=0;m<s.length;m++){var v=s[m];sO(n,v)||o&&sO(o,v)||l(n,v,h(r,v))}},yO=Rm,Nm=Kl,cS=ie,BW=function(n,r){if(QH&&typeof n=="string")for(;r--;)n=XH(n,pO,"");return n},jW=function(n,r){ZH(r)&&"cause"in r&&eW(n,"cause",r.cause)},$W=Om,HW=function(n,r){return n===void 0?arguments.length<2?"":r:PW(n)},WW=kW,zW=Xn("toStringTag"),xm=MW.Error,GW=[].push,Jh=function(n,r){var o,s=arguments.length>2?arguments[2]:void 0,l=UW(lS,this);Am?o=Am(new xm,l?VW(this):lS):(o=l?this:yO(lS),Nm(o,zW,"Error")),r!==void 0&&Nm(o,"message",HW(r)),WW&&Nm(o,"stack",BW(o.stack,1)),jW(o,s);var h=[];return $W(n,GW,{that:h}),Nm(o,"errors",h),o};Am?Am(Jh,xm):FW(Jh,xm,{name:!0});var lS=Jh.prototype=yO(xm.prototype,{constructor:cS(1,Jh),message:cS(1,""),name:cS(1,"AggregateError")});LW({global:!0},{AggregateError:Jh});var KW=M,uS=Xr,YW=y(Function.toString);KW(uS.inspectSource)||(uS.inspectSource=function(n){return YW(n)});var Pm,Qh,Dm,dS=uS.inspectSource,qW=M,XW=dS,CO=R.WeakMap,JW=qW(CO)&&/native code/.test(XW(CO)),bO=R,hS=y,QW=Pe,ZW=Kl,pS=Hn,fS=Xr,ez=Sm,tz=Cm,TO="Object already initialized",mS=bO.TypeError,nz=bO.WeakMap;if(JW||fS.state){var ql=fS.state||(fS.state=new nz),rz=hS(ql.get),RO=hS(ql.has),iz=hS(ql.set);Pm=function(n,r){if(RO(ql,n))throw new mS(TO);return r.facade=n,iz(ql,n,r),r},Qh=function(n){return rz(ql,n)||{}},Dm=function(n){return RO(ql,n)}}else{var Xu=ez("state");tz[Xu]=!0,Pm=function(n,r){if(pS(n,Xu))throw new mS(TO);return r.facade=n,ZW(n,Xu,r),r},Qh=function(n){return pS(n,Xu)?n[Xu]:{}},Dm=function(n){return pS(n,Xu)}}var Xl,IO,wO,km={set:Pm,get:Qh,has:Dm,enforce:function(n){return Dm(n)?Qh(n):Pm(n,{})},getterFor:function(n){return function(r){var o;if(!QW(r)||(o=Qh(r)).type!==n)throw mS("Incompatible receiver, "+n+" required");return o}}},gS=F,oz=Hn,OO=Function.prototype,az=gS&&Object.getOwnPropertyDescriptor,vS=oz(OO,"name"),AO={EXISTS:vS,PROPER:vS&&function(){}.name==="something",CONFIGURABLE:vS&&(!gS||gS&&az(OO,"name").configurable)},sz=Kl,Lm=function(n,r,o,s){s&&s.enumerable?n[r]=o:sz(n,r,o)},cz=c,lz=M,uz=Rm,NO=Z_,dz=Lm,ES=Xn("iterator"),xO=!1;[].keys&&("next"in(wO=[].keys())?(IO=NO(NO(wO)))!==Object.prototype&&(Xl=IO):xO=!0);var hz=Xl==null||cz(function(){var n={};return Xl[ES].call(n)!==n});lz((Xl=hz?{}:uz(Xl))[ES])||dz(Xl,ES,function(){return this});var PO={IteratorPrototype:Xl,BUGGY_SAFARI_ITERATORS:xO},pz=zc,fz=sS?{}.toString:function(){return"[object "+pz(this)+"]"},mz=sS,gz=ss.f,vz=Kl,Ez=Hn,_z=fz,DO=Xn("toStringTag"),Zh=function(n,r,o,s){if(n){var l=o?n:n.prototype;Ez(l,DO)||gz(l,DO,{configurable:!0,value:r}),s&&!mz&&vz(l,"toString",_z)}},Sz=PO.IteratorPrototype,yz=Rm,Cz=ie,bz=Zh,Tz=Yu,Rz=function(){return this},Iz=$i,wz=ee,Oz=function(n,r,o,s){var l=r+" Iterator";return n.prototype=yz(Sz,{next:Cz(+!s,o)}),bz(n,l,!1,!0),Tz[l]=Rz,n},Az=Z_,Nz=Zh,kO=Lm,LO=Yu,xz=AO.PROPER,Mm=PO.BUGGY_SAFARI_ITERATORS,_S=Xn("iterator"),MO="keys",Um="values",UO="entries",Pz=function(){return this},VO=function(n,r,o,s,l,h,m){Oz(o,r,s);var v,S,T,b=function(ue){if(ue===l&&Y)return Y;if(!Mm&&ue in V)return V[ue];switch(ue){case MO:case Um:case UO:return function(){return new o(this,ue)}}return function(){return new o(this)}},I=r+" Iterator",L=!1,V=n.prototype,K=V[_S]||V["@@iterator"]||l&&V[l],Y=!Mm&&K||b(l),q=r=="Array"&&V.entries||K;if(q&&(v=Az(q.call(new n)))!==Object.prototype&&v.next&&(Nz(v,I,!0,!0),LO[I]=Pz),xz&&l==Um&&K&&K.name!==Um&&(L=!0,Y=function(){return wz(K,this)}),l)if(S={values:b(Um),keys:h?Y:b(MO),entries:b(UO)},m)for(T in S)(Mm||L||!(T in V))&&kO(V,T,S[T]);else Iz({target:r,proto:!0,forced:Mm||L},S);return m&&V[_S]!==Y&&kO(V,_S,Y,{name:l}),LO[r]=Y,S},Dz=ze,FO=Yu,BO=km;ss.f;var kz=VO,jO="Array Iterator",Lz=BO.set,Mz=BO.getterFor(jO);kz(Array,"Array",function(n,r){Lz(this,{type:jO,target:Dz(n),index:0,kind:r})},function(){var n=Mz(this),r=n.target,o=n.kind,s=n.index++;return!r||s>=r.length?(n.target=void 0,{value:void 0,done:!0}):o=="keys"?{value:s,done:!1}:o=="values"?{value:r[s],done:!1}:{value:[s,r[s]],done:!1}},"values"),FO.Arguments=FO.Array;var $O=R.Promise,Uz=Lm,Vz=$e,Fz=ss,Bz=F,HO=Xn("species"),jz=C,$z=R.TypeError,WO=Xn("iterator"),zO=!1;try{var Hz=0,GO={next:function(){return{done:!!Hz++}},return:function(){zO=!0}};GO[WO]=function(){return this},Array.from(GO,function(){throw 2})}catch{}var Wz=y,zz=c,KO=M,Gz=zc,Kz=dS,YO=function(){},Yz=[],qO=$e("Reflect","construct"),SS=/^\s*(?:class|function)\b/,qz=Wz(SS.exec),Xz=!SS.exec(YO),ep=function(n){if(!KO(n))return!1;try{return qO(YO,Yz,n),!0}catch{return!1}},XO=function(n){if(!KO(n))return!1;switch(Gz(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Xz||!!qz(SS,Kz(n))}catch{return!0}};XO.sham=!0;var tp,Ju,JO,yS,CS=!qO||zz(function(){var n;return ep(ep.call)||!ep(Object)||!ep(function(){n=!0})||n})?XO:ep,Jz=CS,Qz=kn,Zz=R.TypeError,QO=cs,e7=function(n){if(Jz(n))return n;throw Zz(Qz(n)+" is not a constructor")},t7=Xn("species"),ZO=function(n,r){var o,s=QO(n).constructor;return s===void 0||(o=QO(s)[t7])==null?r:e7(o)},bS=y([].slice),eA=/(?:ipad|iphone|ipod).*applewebkit/i.test(ke),aa=R,n7=P,r7=Xh,tA=M,i7=Hn,o7=c,nA=cO,a7=bS,rA=Mo,s7=eA,c7=Em,TS=aa.setImmediate,RS=aa.clearImmediate,l7=aa.process,IS=aa.Dispatch,u7=aa.Function,iA=aa.MessageChannel,d7=aa.String,wS=0,np={},h7="onreadystatechange";try{tp=aa.location}catch{}var OS=function(n){if(i7(np,n)){var r=np[n];delete np[n],r()}},AS=function(n){return function(){OS(n)}},oA=function(n){OS(n.data)},aA=function(n){aa.postMessage(d7(n),tp.protocol+"//"+tp.host)};TS&&RS||(TS=function(n){var r=a7(arguments,1);return np[++wS]=function(){n7(tA(n)?n:u7(n),void 0,r)},Ju(wS),wS},RS=function(n){delete np[n]},c7?Ju=function(n){l7.nextTick(AS(n))}:IS&&IS.now?Ju=function(n){IS.now(AS(n))}:iA&&!s7?(yS=(JO=new iA).port2,JO.port1.onmessage=oA,Ju=r7(yS.postMessage,yS)):aa.addEventListener&&tA(aa.postMessage)&&!aa.importScripts&&tp&&tp.protocol!=="file:"&&!o7(aA)?(Ju=aA,aa.addEventListener("message",oA,!1)):Ju=h7 in rA("script")?function(n){nA.appendChild(rA("script")).onreadystatechange=function(){nA.removeChild(this),OS(n)}}:function(n){setTimeout(AS(n),0)});var rp,Jl,ip,Qu,NS,xS,PS,sA,cA={set:TS,clear:RS},p7=R,f7=/ipad|iphone|ipod/i.test(ke)&&p7.Pebble!==void 0,m7=/web0s(?!.*chrome)/i.test(ke),Ql=R,lA=Xh,g7=B.f,DS=cA.set,v7=eA,E7=f7,_7=m7,kS=Em,uA=Ql.MutationObserver||Ql.WebKitMutationObserver,dA=Ql.document,hA=Ql.process,Vm=Ql.Promise,pA=g7(Ql,"queueMicrotask"),fA=pA&&pA.value;fA||(rp=function(){var n,r;for(kS&&(n=hA.domain)&&n.exit();Jl;){r=Jl.fn,Jl=Jl.next;try{r()}catch(o){throw Jl?Qu():ip=void 0,o}}ip=void 0,n&&n.enter()},v7||kS||_7||!uA||!dA?!E7&&Vm&&Vm.resolve?((PS=Vm.resolve(void 0)).constructor=Vm,sA=lA(PS.then,PS),Qu=function(){sA(rp)}):kS?Qu=function(){hA.nextTick(rp)}:(DS=lA(DS,Ql),Qu=function(){DS(rp)}):(NS=!0,xS=dA.createTextNode(""),new uA(rp).observe(xS,{characterData:!0}),Qu=function(){xS.data=NS=!NS}));var S7=fA||function(n){var r={fn:n,next:void 0};ip&&(ip.next=r),Jl||(Jl=r,Qu()),ip=r},Zu={},mA=Mt,y7=function(n){var r,o;this.promise=new n(function(s,l){if(r!==void 0||o!==void 0)throw TypeError("Bad Promise constructor");r=s,o=l}),this.resolve=mA(r),this.reject=mA(o)};Zu.f=function(n){return new y7(n)};var C7=cs,b7=Pe,T7=Zu,gA=function(n,r){if(C7(n),b7(r)&&r.constructor===n)return r;var o=T7.f(n);return(0,o.resolve)(r),o.promise},R7=R,Fm=function(n){try{return{error:!1,value:n()}}catch(r){return{error:!0,value:r}}},vA=function(){this.head=null,this.tail=null};vA.prototype={add:function(n){var r={item:n,next:null};this.head?this.tail.next=r:this.head=r,this.tail=r},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}};var LS,EA,MS,I7=typeof window=="object",Bm=$i,cc=R,w7=$e,Gc=ee,US=$O,O7=function(n,r,o){for(var s in r)o&&o.unsafe&&n[s]?n[s]=r[s]:Uz(n,s,r[s],o);return n},A7=Zh,N7=function(n){var r=Vz(n),o=Fz.f;Bz&&r&&!r[HO]&&o(r,HO,{configurable:!0,get:function(){return this}})},VS=Mt,jm=M,x7=Pe,P7=function(n,r){if(jz(r,n))return n;throw $z("Incorrect invocation")},D7=dS,_A=Om,k7=function(n,r){if(!r&&!zO)return!1;var o=!1;try{var s={};s[WO]=function(){return{next:function(){return{done:o=!0}}}},n(s)}catch{}return o},L7=ZO,SA=cA.set,FS=S7,M7=gA,U7=function(n,r){var o=R7.console;o&&o.error&&(arguments.length==1?o.error(n):o.error(n,r))},yA=Zu,BS=Fm,V7=vA,jS=km,F7=Gl,B7=I7,$m=Em,CA=zt,j7=Xn("species"),Ls="Promise",bA=jS.getterFor(Ls),$7=jS.set,H7=jS.getterFor(Ls),W7=US&&US.prototype,Ms=US,Hm=W7,TA=cc.TypeError,$S=cc.document,HS=cc.process,ed=yA.f,z7=ed,G7=!!($S&&$S.createEvent&&cc.dispatchEvent),RA=jm(cc.PromiseRejectionEvent),IA="unhandledrejection",Wm=F7(Ls,function(){var n=D7(Ms),r=n!==String(Ms);if(!r&&CA===66||!Hm.finally)return!0;if(CA>=51&&/native code/.test(n))return!1;var o=new Ms(function(l){l(1)}),s=function(l){l(function(){},function(){})};return(o.constructor={})[j7]=s,!(o.then(function(){})instanceof s)||!r&&B7&&!RA}),K7=Wm||!k7(function(n){Ms.all(n).catch(function(){})}),wA=function(n){var r;return!(!x7(n)||!jm(r=n.then))&&r},OA=function(n,r){var o,s,l,h=r.value,m=r.state==1,v=m?n.ok:n.fail,S=n.resolve,T=n.reject,b=n.domain;try{v?(m||(r.rejection===2&&q7(r),r.rejection=1),v===!0?o=h:(b&&b.enter(),o=v(h),b&&(b.exit(),l=!0)),o===n.promise?T(TA("Promise-chain cycle")):(s=wA(o))?Gc(s,o,S,T):S(o)):T(h)}catch(I){b&&!l&&b.exit(),T(I)}},AA=function(n,r){n.notified||(n.notified=!0,FS(function(){for(var o,s=n.reactions;o=s.get();)OA(o,n);n.notified=!1,r&&!n.rejection&&Y7(n)}))},NA=function(n,r,o){var s,l;G7?((s=$S.createEvent("Event")).promise=r,s.reason=o,s.initEvent(n,!1,!0),cc.dispatchEvent(s)):s={promise:r,reason:o},!RA&&(l=cc["on"+n])?l(s):n===IA&&U7("Unhandled promise rejection",o)},Y7=function(n){Gc(SA,cc,function(){var r,o=n.facade,s=n.value;if(xA(n)&&(r=BS(function(){$m?HS.emit("unhandledRejection",s,o):NA(IA,o,s)}),n.rejection=$m||xA(n)?2:1,r.error))throw r.value})},xA=function(n){return n.rejection!==1&&!n.parent},q7=function(n){Gc(SA,cc,function(){var r=n.facade;$m?HS.emit("rejectionHandled",r):NA("rejectionhandled",r,n.value)})},td=function(n,r,o){return function(s){n(r,s,o)}},nd=function(n,r,o){n.done||(n.done=!0,o&&(n=o),n.value=r,n.state=2,AA(n,!0))},WS=function(n,r,o){if(!n.done){n.done=!0,o&&(n=o);try{if(n.facade===r)throw TA("Promise can't be resolved itself");var s=wA(r);s?FS(function(){var l={done:!1};try{Gc(s,r,td(WS,l,n),td(nd,l,n))}catch(h){nd(l,h,n)}}):(n.value=r,n.state=1,AA(n,!1))}catch(l){nd({done:!1},l,n)}}};Wm&&(Hm=(Ms=function(n){P7(this,Hm),VS(n),Gc(LS,this);var r=bA(this);try{n(td(WS,r),td(nd,r))}catch(o){nd(r,o)}}).prototype,(LS=function(n){$7(this,{type:Ls,done:!1,notified:!1,parent:!1,reactions:new V7,rejection:!1,state:0,value:void 0})}).prototype=O7(Hm,{then:function(n,r){var o=H7(this),s=ed(L7(this,Ms));return o.parent=!0,s.ok=!jm(n)||n,s.fail=jm(r)&&r,s.domain=$m?HS.domain:void 0,o.state==0?o.reactions.add(s):FS(function(){OA(s,o)}),s.promise},catch:function(n){return this.then(void 0,n)}}),EA=function(){var n=new LS,r=bA(n);this.promise=n,this.resolve=td(WS,r),this.reject=td(nd,r)},yA.f=ed=function(n){return n===Ms||n===MS?new EA(n):z7(n)}),Bm({global:!0,wrap:!0,forced:Wm},{Promise:Ms}),A7(Ms,Ls,!1,!0),N7(Ls),MS=w7(Ls),Bm({target:Ls,stat:!0,forced:Wm},{reject:function(n){var r=ed(this);return Gc(r.reject,void 0,n),r.promise}}),Bm({target:Ls,stat:!0,forced:!0},{resolve:function(n){return M7(this===MS?Ms:this,n)}}),Bm({target:Ls,stat:!0,forced:K7},{all:function(n){var r=this,o=ed(r),s=o.resolve,l=o.reject,h=BS(function(){var m=VS(r.resolve),v=[],S=0,T=1;_A(n,function(b){var I=S++,L=!1;T++,Gc(m,r,b).then(function(V){L||(L=!0,v[I]=V,--T||s(v))},l)}),--T||s(v)});return h.error&&l(h.value),o.promise},race:function(n){var r=this,o=ed(r),s=o.reject,l=BS(function(){var h=VS(r.resolve);_A(n,function(m){Gc(h,r,m).then(o.resolve,s)})});return l.error&&s(l.value),o.promise}});var X7=ee,J7=Mt,Q7=Zu,Z7=Fm,eG=Om;$i({target:"Promise",stat:!0},{allSettled:function(n){var r=this,o=Q7.f(r),s=o.resolve,l=o.reject,h=Z7(function(){var m=J7(r.resolve),v=[],S=0,T=1;eG(n,function(b){var I=S++,L=!1;T++,X7(m,r,b).then(function(V){L||(L=!0,v[I]={status:"fulfilled",value:V},--T||s(v))},function(V){L||(L=!0,v[I]={status:"rejected",reason:V},--T||s(v))})}),--T||s(v)});return h.error&&l(h.value),o.promise}});var tG=Mt,nG=$e,rG=ee,iG=Zu,oG=Fm,aG=Om,PA="No one promise resolved";$i({target:"Promise",stat:!0},{any:function(n){var r=this,o=nG("AggregateError"),s=iG.f(r),l=s.resolve,h=s.reject,m=oG(function(){var v=tG(r.resolve),S=[],T=0,b=1,I=!1;aG(n,function(L){var V=T++,K=!1;b++,rG(v,r,L).then(function(Y){K||I||(I=!0,l(Y))},function(Y){K||I||(K=!0,S[V]=Y,--b||h(new o(S,PA)))})}),--b||h(new o(S,PA))});return m.error&&h(m.value),s.promise}});var DA=$O,sG=$e,cG=M,lG=ZO,kA=gA;$i({target:"Promise",proto:!0,real:!0,forced:!!DA&&c(function(){DA.prototype.finally.call({then:function(){}},function(){})})},{finally:function(n){var r=lG(this,sG("Promise")),o=cG(n);return this.then(o?function(s){return kA(r,n()).then(function(){return s})}:n,o?function(s){return kA(r,n()).then(function(){throw s})}:n)}});var zS=y,uG=Y_,dG=qu,hG=Ae,pG=zS("".charAt),LA=zS("".charCodeAt),fG=zS("".slice),MA=function(n){return function(r,o){var s,l,h=dG(hG(r)),m=uG(o),v=h.length;return m<0||m>=v?n?"":void 0:(s=LA(h,m))<55296||s>56319||m+1===v||(l=LA(h,m+1))<56320||l>57343?n?pG(h,m):s:n?fG(h,m,m+2):l-56320+(s-55296<<10)+65536}},mG={codeAt:MA(!1),charAt:MA(!0)}.charAt,gG=qu,UA=km,vG=VO,VA="String Iterator",EG=UA.set,_G=UA.getterFor(VA);vG(String,"String",function(n){EG(this,{type:VA,string:gG(n),index:0})},function(){var n,r=_G(this),o=r.string,s=r.index;return s>=o.length?{value:void 0,done:!0}:(n=mG(o,s),r.index+=n.length,{value:n,done:!1})});var SG=Ye.Promise,yG={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},CG=R,bG=zc,TG=Kl,FA=Yu,BA=Xn("toStringTag");for(var GS in yG){var jA=CG[GS],KS=jA&&jA.prototype;KS&&bG(KS)!==BA&&TG(KS,BA,GS),FA[GS]=FA.Array}var $A=SG,Me=$A;const HA=J1;function WA(n,r){const o=n&&n.navigator;if(!o.mediaDevices)return;const s=function(m){if(typeof m!="object"||m.mandatory||m.optional)return m;const v={};return Object.keys(m).forEach(S=>{if(S==="require"||S==="advanced"||S==="mediaSource")return;const T=typeof m[S]=="object"?m[S]:{ideal:m[S]};T.exact!==void 0&&typeof T.exact=="number"&&(T.min=T.max=T.exact);const b=function(I,L){return I?I+L.charAt(0).toUpperCase()+L.slice(1):L==="deviceId"?"sourceId":L};if(T.ideal!==void 0){v.optional=v.optional||[];let I={};typeof T.ideal=="number"?(I[b("min",S)]=T.ideal,v.optional.push(I),I={},I[b("max",S)]=T.ideal,v.optional.push(I)):(I[b("",S)]=T.ideal,v.optional.push(I))}T.exact!==void 0&&typeof T.exact!="number"?(v.mandatory=v.mandatory||{},v.mandatory[b("",S)]=T.exact):["min","max"].forEach(I=>{T[I]!==void 0&&(v.mandatory=v.mandatory||{},v.mandatory[b(I,S)]=T[I])})}),m.advanced&&(v.optional=(v.optional||[]).concat(m.advanced)),v},l=function(m,v){if(r.version>=61)return v(m);if((m=JSON.parse(JSON.stringify(m)))&&typeof m.audio=="object"){const S=function(T,b,I){b in T&&!(I in T)&&(T[I]=T[b],delete T[b])};S((m=JSON.parse(JSON.stringify(m))).audio,"autoGainControl","googAutoGainControl"),S(m.audio,"noiseSuppression","googNoiseSuppression"),m.audio=s(m.audio)}if(m&&typeof m.video=="object"){let S=m.video.facingMode;S=S&&(typeof S=="object"?S:{ideal:S});const T=r.version<66;if(S&&(S.exact==="user"||S.exact==="environment"||S.ideal==="user"||S.ideal==="environment")&&(!o.mediaDevices.getSupportedConstraints||!o.mediaDevices.getSupportedConstraints().facingMode||T)){let b;if(delete m.video.facingMode,S.exact==="environment"||S.ideal==="environment"?b=["back","rear"]:S.exact!=="user"&&S.ideal!=="user"||(b=["front"]),b)return o.mediaDevices.enumerateDevices().then(I=>{let L=(I=I.filter(V=>V.kind==="videoinput")).find(V=>b.some(K=>V.label.toLowerCase().includes(K)));return!L&&I.length&&b.includes("back")&&(L=I[I.length-1]),L&&(m.video.deviceId=S.exact?{exact:L.deviceId}:{ideal:L.deviceId}),m.video=s(m.video),HA("chrome: "+JSON.stringify(m)),v(m)})}m.video=s(m.video)}return HA("chrome: "+JSON.stringify(m)),v(m)},h=function(m){return r.version>=64?m:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[m.name]||m.name,message:m.message,constraint:m.constraint||m.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(o.getUserMedia=function(m,v,S){l(m,T=>{o.webkitGetUserMedia(T,v,b=>{S&&S(h(b))})})}.bind(o),o.mediaDevices.getUserMedia){const m=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(v){return l(v,S=>m(S).then(T=>{if(S.audio&&!T.getAudioTracks().length||S.video&&!T.getVideoTracks().length)throw T.getTracks().forEach(b=>{b.stop()}),new DOMException("","NotFoundError");return T},T=>Me.reject(h(T))))}}}function zA(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function GA(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(o){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=o)},enumerable:!0,configurable:!0});const r=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=o=>{o.stream.addEventListener("addtrack",s=>{let l;l=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(m=>m.track&&m.track.id===s.track.id):{track:s.track};const h=new Event("track");h.track=s.track,h.receiver=l,h.transceiver={receiver:l},h.streams=[o.stream],this.dispatchEvent(h)}),o.stream.getTracks().forEach(s=>{let l;l=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(m=>m.track&&m.track.id===s.id):{track:s};const h=new Event("track");h.track=s,h.receiver=l,h.transceiver={receiver:l},h.streams=[o.stream],this.dispatchEvent(h)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}else Yl(n,"track",r=>(r.transceiver||Object.defineProperty(r,"transceiver",{value:{receiver:r.receiver}}),r))}function KA(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const r=function(l,h){return{track:h,get dtmf(){return this._dtmf===void 0&&(h.kind==="audio"?this._dtmf=l.createDTMFSender(h):this._dtmf=null),this._dtmf},_pc:l}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const l=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(m,v){let S=l.apply(this,arguments);return S||(S=r(this,m),this._senders.push(S)),S};const h=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(m){h.apply(this,arguments);const v=this._senders.indexOf(m);v!==-1&&this._senders.splice(v,1)}}const o=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],o.apply(this,[l]),l.getTracks().forEach(h=>{this._senders.push(r(this,h))})};const s=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],s.apply(this,[l]),l.getTracks().forEach(h=>{const m=this._senders.find(v=>v.track===h);m&&this._senders.splice(this._senders.indexOf(m),1)})}}else if(typeof n=="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const r=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const o=r.apply(this,[]);return o.forEach(s=>s._pc=this),o},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function YA(n){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[o,s,l]=arguments;if(arguments.length>0&&typeof o=="function")return r.apply(this,arguments);if(r.length===0&&(arguments.length===0||typeof o!="function"))return r.apply(this,[]);const h=function(v){const S={};return v.result().forEach(T=>{const b={id:T.id,timestamp:T.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[T.type]||T.type};T.names().forEach(I=>{b[I]=T.stat(I)}),S[b.id]=b}),S},m=function(v){return new Map(Object.keys(v).map(S=>[S,v[S]]))};if(arguments.length>=2){const v=function(S){s(m(h(S)))};return r.apply(this,[v,o])}return new Me((v,S)=>{r.apply(this,[function(T){v(m(h(T)))},S])}).then(s,l)}}function qA(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const o=n.RTCPeerConnection.prototype.getSenders;o&&(n.RTCPeerConnection.prototype.getSenders=function(){const l=o.apply(this,[]);return l.forEach(h=>h._pc=this),l});const s=n.RTCPeerConnection.prototype.addTrack;s&&(n.RTCPeerConnection.prototype.addTrack=function(){const l=s.apply(this,arguments);return l._pc=this,l}),n.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(h=>eO(h,l.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const o=n.RTCPeerConnection.prototype.getReceivers;o&&(n.RTCPeerConnection.prototype.getReceivers=function(){const s=o.apply(this,[]);return s.forEach(l=>l._pc=this),s}),Yl(n,"track",s=>(s.receiver._pc=s.srcElement,s)),n.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>eO(l,s.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype)||!("getStats"in n.RTCRtpReceiver.prototype))return;const r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const o=arguments[0];let s,l,h;return this.getSenders().forEach(m=>{m.track===o&&(s?h=!0:s=m)}),this.getReceivers().forEach(m=>(m.track===o&&(l?h=!0:l=m),m.track===o)),h||s&&l?Me.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():l?l.getStats():Me.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return r.apply(this,arguments)}}function XA(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(h=>this._shimmedLocalStreams[h][0])};const r=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(h,m){if(!m)return r.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const v=r.apply(this,arguments);return this._shimmedLocalStreams[m.id]?this._shimmedLocalStreams[m.id].indexOf(v)===-1&&this._shimmedLocalStreams[m.id].push(v):this._shimmedLocalStreams[m.id]=[m,v],v};const o=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(h){this._shimmedLocalStreams=this._shimmedLocalStreams||{},h.getTracks().forEach(S=>{if(this.getSenders().find(T=>T.track===S))throw new DOMException("Track already exists.","InvalidAccessError")});const m=this.getSenders();o.apply(this,arguments);const v=this.getSenders().filter(S=>m.indexOf(S)===-1);this._shimmedLocalStreams[h.id]=[h].concat(v)};const s=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(h){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[h.id],s.apply(this,arguments)};const l=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(h){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},h&&Object.keys(this._shimmedLocalStreams).forEach(m=>{const v=this._shimmedLocalStreams[m].indexOf(h);v!==-1&&this._shimmedLocalStreams[m].splice(v,1),this._shimmedLocalStreams[m].length===1&&delete this._shimmedLocalStreams[m]}),l.apply(this,arguments)}}function JA(n,r){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&r.version>=65)return XA(n);const o=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const T=o.apply(this);return this._reverseStreams=this._reverseStreams||{},T.map(b=>this._reverseStreams[b.id])};const s=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(T){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},T.getTracks().forEach(b=>{if(this.getSenders().find(I=>I.track===b))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[T.id]){const b=new n.MediaStream(T.getTracks());this._streams[T.id]=b,this._reverseStreams[b.id]=T,T=b}s.apply(this,[T])};const l=n.RTCPeerConnection.prototype.removeStream;function h(T,b){let I=b.sdp;return Object.keys(T._reverseStreams||[]).forEach(L=>{const V=T._reverseStreams[L],K=T._streams[V.id];I=I.replace(new RegExp(K.id,"g"),V.id)}),new RTCSessionDescription({type:b.type,sdp:I})}function m(T,b){let I=b.sdp;return Object.keys(T._reverseStreams||[]).forEach(L=>{const V=T._reverseStreams[L],K=T._streams[V.id];I=I.replace(new RegExp(V.id,"g"),K.id)}),new RTCSessionDescription({type:b.type,sdp:I})}n.RTCPeerConnection.prototype.removeStream=function(T){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.apply(this,[this._streams[T.id]||T]),delete this._reverseStreams[this._streams[T.id]?this._streams[T.id].id:T.id],delete this._streams[T.id]},n.RTCPeerConnection.prototype.addTrack=function(T,b){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const I=[].slice.call(arguments,1);if(I.length!==1||!I[0].getTracks().find(K=>K===T))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(K=>K.track===T))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const V=this._streams[b.id];if(V)V.addTrack(T),Me.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const K=new n.MediaStream([T]);this._streams[b.id]=K,this._reverseStreams[K.id]=b,this.addStream(K)}return this.getSenders().find(K=>K.track===T)},["createOffer","createAnswer"].forEach(function(T){const b=n.RTCPeerConnection.prototype[T],I={[T](){const L=arguments;return arguments.length&&typeof arguments[0]=="function"?b.apply(this,[V=>{const K=h(this,V);L[0].apply(null,[K])},V=>{L[1]&&L[1].apply(null,V)},arguments[2]]):b.apply(this,arguments).then(V=>h(this,V))}};n.RTCPeerConnection.prototype[T]=I[T]});const v=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=m(this,arguments[0]),v.apply(this,arguments)):v.apply(this,arguments)};const S=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const T=S.get.apply(this);return T.type===""?T:h(this,T)}}),n.RTCPeerConnection.prototype.removeTrack=function(T){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!T._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(T._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let b;this._streams=this._streams||{},Object.keys(this._streams).forEach(I=>{this._streams[I].getTracks().find(L=>T.track===L)&&(b=this._streams[I])}),b&&(b.getTracks().length===1?this.removeStream(this._reverseStreams[b.id]):b.removeTrack(T.track),this.dispatchEvent(new Event("negotiationneeded")))}}function YS(n,r){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const s=n.RTCPeerConnection.prototype[o],l={[o](){return arguments[0]=new(o==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};n.RTCPeerConnection.prototype[o]=l[o]})}function QA(n,r){Yl(n,"negotiationneeded",o=>{const s=o.target;if(!(r.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")||s.signalingState==="stable")return o})}var ZA=Object.freeze({__proto__:null,shimMediaStream:zA,shimOnTrack:GA,shimGetSendersWithDtmf:KA,shimGetStats:YA,shimSenderReceiverGetStats:qA,shimAddTrackRemoveTrackWithNative:XA,shimAddTrackRemoveTrack:JA,shimPeerConnection:YS,fixNegotiationNeeded:QA,shimGetUserMedia:WA,shimGetDisplayMedia:function(n,r){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(typeof r=="function"?n.navigator.mediaDevices.getDisplayMedia=function(o){return r(o).then(s=>{const l=o.video&&o.video.width,h=o.video&&o.video.height,m=o.video&&o.video.frameRate;return o.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:s,maxFrameRate:m||3}},l&&(o.video.mandatory.maxWidth=l),h&&(o.video.mandatory.maxHeight=h),n.navigator.mediaDevices.getUserMedia(o)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});function eN(n,r){const o=n&&n.navigator,s=n&&n.MediaStreamTrack;if(o.getUserMedia=function(l,h,m){J_("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),o.mediaDevices.getUserMedia(l).then(h,m)},!(r.version>55&&"autoGainControl"in o.mediaDevices.getSupportedConstraints())){const l=function(m,v,S){v in m&&!(S in m)&&(m[S]=m[v],delete m[v])},h=o.mediaDevices.getUserMedia.bind(o.mediaDevices);if(o.mediaDevices.getUserMedia=function(m){return typeof m=="object"&&typeof m.audio=="object"&&(m=JSON.parse(JSON.stringify(m)),l(m.audio,"autoGainControl","mozAutoGainControl"),l(m.audio,"noiseSuppression","mozNoiseSuppression")),h(m)},s&&s.prototype.getSettings){const m=s.prototype.getSettings;s.prototype.getSettings=function(){const v=m.apply(this,arguments);return l(v,"mozAutoGainControl","autoGainControl"),l(v,"mozNoiseSuppression","noiseSuppression"),v}}if(s&&s.prototype.applyConstraints){const m=s.prototype.applyConstraints;s.prototype.applyConstraints=function(v){return this.kind==="audio"&&typeof v=="object"&&(v=JSON.parse(JSON.stringify(v)),l(v,"autoGainControl","mozAutoGainControl"),l(v,"noiseSuppression","mozNoiseSuppression")),m.apply(this,[v])}}}}function tN(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function qS(n,r){if(typeof n!="object"||!n.RTCPeerConnection&&!n.mozRTCPeerConnection)return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(l){const h=n.RTCPeerConnection.prototype[l],m={[l](){return arguments[0]=new(l==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),h.apply(this,arguments)}};n.RTCPeerConnection.prototype[l]=m[l]});const o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[l,h,m]=arguments;return s.apply(this,[l||null]).then(v=>{if(r.version<53&&!h)try{v.forEach(S=>{S.type=o[S.type]||S.type})}catch(S){if(S.name!=="TypeError")throw S;v.forEach((T,b)=>{v.set(b,Object.assign({},T,{type:o[T.type]||T.type}))})}return v}).then(h,m)}}function nN(n){if(typeof n!="object"||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const r=n.RTCPeerConnection.prototype.getSenders;r&&(n.RTCPeerConnection.prototype.getSenders=function(){const s=r.apply(this,[]);return s.forEach(l=>l._pc=this),s});const o=n.RTCPeerConnection.prototype.addTrack;o&&(n.RTCPeerConnection.prototype.addTrack=function(){const s=o.apply(this,arguments);return s._pc=this,s}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Me.resolve(new Map)}}function rN(n){if(typeof n!="object"||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const r=n.RTCPeerConnection.prototype.getReceivers;r&&(n.RTCPeerConnection.prototype.getReceivers=function(){const o=r.apply(this,[]);return o.forEach(s=>s._pc=this),o}),Yl(n,"track",o=>(o.receiver._pc=o.srcElement,o)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function iN(n){n.RTCPeerConnection&&!("removeStream"in n.RTCPeerConnection.prototype)&&(n.RTCPeerConnection.prototype.removeStream=function(r){J_("removeStream","removeTrack"),this.getSenders().forEach(o=>{o.track&&r.getTracks().includes(o.track)&&this.removeTrack(o)})})}function oN(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function aN(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.addTransceiver;r&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let o=arguments[1]&&arguments[1].sendEncodings;o===void 0&&(o=[]),o=[...o];const s=o.length>0;s&&o.forEach(h=>{if("rid"in h&&!/^[a-z0-9]{0,16}$/i.test(h.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in h&&!(parseFloat(h.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in h&&!(parseFloat(h.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=r.apply(this,arguments);if(s){const{sender:h}=l,m=h.getParameters();(!("encodings"in m)||m.encodings.length===1&&Object.keys(m.encodings[0]).length===0)&&(m.encodings=o,h.sendEncodings=o,this.setParametersPromises.push(h.setParameters(m).then(()=>{delete h.sendEncodings}).catch(()=>{delete h.sendEncodings})))}return l})}function sN(n){if(typeof n!="object"||!n.RTCRtpSender)return;const r=n.RTCRtpSender.prototype.getParameters;r&&(n.RTCRtpSender.prototype.getParameters=function(){const o=r.apply(this,arguments);return"encodings"in o||(o.encodings=[].concat(this.sendEncodings||[{}])),o})}function cN(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Me.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}function lN(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Me.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}var uN=Object.freeze({__proto__:null,shimOnTrack:tN,shimPeerConnection:qS,shimSenderGetStats:nN,shimReceiverGetStats:rN,shimRemoveStream:iN,shimRTCDataChannel:oN,shimAddTransceiver:aN,shimGetParameters:sN,shimCreateOffer:cN,shimCreateAnswer:lN,shimGetUserMedia:eN,shimGetDisplayMedia:function(n,r){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(o){if(!o||!o.video){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Me.reject(s)}return o.video===!0?o.video={mediaSource:r}:o.video.mediaSource=r,n.navigator.mediaDevices.getUserMedia(o)})}});function dN(n){if(typeof n=="object"&&n.RTCPeerConnection){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const r=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(o){this._localStreams||(this._localStreams=[]),this._localStreams.includes(o)||this._localStreams.push(o),o.getAudioTracks().forEach(s=>r.call(this,s,o)),o.getVideoTracks().forEach(s=>r.call(this,s,o))},n.RTCPeerConnection.prototype.addTrack=function(o){for(var s=arguments.length,l=new Array(s>1?s-1:0),h=1;h<s;h++)l[h-1]=arguments[h];return l&&l.forEach(m=>{this._localStreams?this._localStreams.includes(m)||this._localStreams.push(m):this._localStreams=[m]}),r.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const o=this._localStreams.indexOf(r);if(o===-1)return;this._localStreams.splice(o,1);const s=r.getTracks();this.getSenders().forEach(l=>{s.includes(l.track)&&this.removeTrack(l)})})}}function hN(n){if(typeof n=="object"&&n.RTCPeerConnection&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(o){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=o),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(l=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(l))return;this._remoteStreams.push(l);const h=new Event("addstream");h.stream=l,this.dispatchEvent(h)})})}});const r=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const o=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(l=>{if(o._remoteStreams||(o._remoteStreams=[]),o._remoteStreams.indexOf(l)>=0)return;o._remoteStreams.push(l);const h=new Event("addstream");h.stream=l,o.dispatchEvent(h)})}),r.apply(o,arguments)}}}function pN(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype,o=r.createOffer,s=r.createAnswer,l=r.setLocalDescription,h=r.setRemoteDescription,m=r.addIceCandidate;r.createOffer=function(S,T){const b=arguments.length>=2?arguments[2]:arguments[0],I=o.apply(this,[b]);return T?(I.then(S,T),Me.resolve()):I},r.createAnswer=function(S,T){const b=arguments.length>=2?arguments[2]:arguments[0],I=s.apply(this,[b]);return T?(I.then(S,T),Me.resolve()):I};let v=function(S,T,b){const I=l.apply(this,[S]);return b?(I.then(T,b),Me.resolve()):I};r.setLocalDescription=v,v=function(S,T,b){const I=h.apply(this,[S]);return b?(I.then(T,b),Me.resolve()):I},r.setRemoteDescription=v,v=function(S,T,b){const I=m.apply(this,[S]);return b?(I.then(T,b),Me.resolve()):I},r.addIceCandidate=v}function fN(n){const r=n&&n.navigator;if(r.mediaDevices&&r.mediaDevices.getUserMedia){const o=r.mediaDevices,s=o.getUserMedia.bind(o);r.mediaDevices.getUserMedia=l=>s(mN(l))}!r.getUserMedia&&r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=function(o,s,l){r.mediaDevices.getUserMedia(o).then(s,l)}.bind(r))}function mN(n){return n&&n.video!==void 0?Object.assign({},n,{video:Z1(n.video)}):n}function gN(n){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection;n.RTCPeerConnection=function(o,s){if(o&&o.iceServers){const l=[];for(let h=0;h<o.iceServers.length;h++){let m=o.iceServers[h];!m.hasOwnProperty("urls")&&m.hasOwnProperty("url")?(J_("RTCIceServer.url","RTCIceServer.urls"),m=JSON.parse(JSON.stringify(m)),m.urls=m.url,delete m.url,l.push(m)):l.push(o.iceServers[h])}o.iceServers=l}return new r(o,s)},n.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:()=>r.generateCertificate})}function vN(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function EN(n){const r=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(o){if(o){o.offerToReceiveAudio!==void 0&&(o.offerToReceiveAudio=!!o.offerToReceiveAudio);const s=this.getTransceivers().find(h=>h.receiver.track.kind==="audio");o.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):o.offerToReceiveAudio!==!0||s||this.addTransceiver("audio",{direction:"recvonly"}),o.offerToReceiveVideo!==void 0&&(o.offerToReceiveVideo=!!o.offerToReceiveVideo);const l=this.getTransceivers().find(h=>h.receiver.track.kind==="video");o.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):o.offerToReceiveVideo!==!0||l||this.addTransceiver("video",{direction:"recvonly"})}return r.apply(this,arguments)}}function _N(n){typeof n!="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}var SN=Object.freeze({__proto__:null,shimLocalStreamsAPI:dN,shimRemoteStreamsAPI:hN,shimCallbacksAPI:pN,shimGetUserMedia:fN,shimConstraints:mN,shimRTCIceServerUrls:gN,shimTrackEventTransceiver:vN,shimCreateOfferLegacy:EN,shimAudioContext:_N}),RG=`	
\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF`,IG=Ae,wG=qu,yN=y("".replace),zm=`[	
\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF]`,OG=RegExp("^"+zm+zm+"*"),AG=RegExp(zm+zm+"*$"),XS=function(n){return function(r){var o=wG(IG(r));return 1&n&&(o=yN(o,OG,"")),2&n&&(o=yN(o,AG,"")),o}},NG={start:XS(1),end:XS(2),trim:XS(3)},xG=AO.PROPER,PG=c,CN=RG,DG=NG.trim;$i({target:"String",proto:!0,forced:function(n){return PG(function(){return!!CN[n]()||"âÂá "[n]()!=="âÂá "||xG&&CN[n].name!==n})}("trim")},{trim:function(){return DG(this)}});var kG=Hc("String").trim,LG=C,MG=kG,JS=String.prototype,lc=function(n){var r=n.trim;return typeof n=="string"||n===JS||LG(JS,n)&&r===JS.trim?MG:r},QS={exports:{}};(function(n){const r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(o){return lc(o).call(o).split(`
`).map(s=>lc(s).call(s))},r.splitSections=function(o){return o.split(`
m=`).map((s,l)=>{var h;return lc(h=l>0?"m="+s:s).call(h)+`\r
`})},r.getDescription=function(o){const s=r.splitSections(o);return s&&s[0]},r.getMediaSections=function(o){const s=r.splitSections(o);return s.shift(),s},r.matchPrefix=function(o,s){return r.splitLines(o).filter(l=>l.indexOf(s)===0)},r.parseCandidate=function(o){let s;s=o.indexOf("a=candidate:")===0?o.substring(12).split(" "):o.substring(10).split(" ");const l={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let h=8;h<s.length;h+=2)switch(s[h]){case"raddr":l.relatedAddress=s[h+1];break;case"rport":l.relatedPort=parseInt(s[h+1],10);break;case"tcptype":l.tcpType=s[h+1];break;case"ufrag":l.ufrag=s[h+1],l.usernameFragment=s[h+1];break;default:l[s[h]]===void 0&&(l[s[h]]=s[h+1])}return l},r.writeCandidate=function(o){const s=[];s.push(o.foundation);const l=o.component;l==="rtp"?s.push(1):l==="rtcp"?s.push(2):s.push(l),s.push(o.protocol.toUpperCase()),s.push(o.priority),s.push(o.address||o.ip),s.push(o.port);const h=o.type;return s.push("typ"),s.push(h),h!=="host"&&o.relatedAddress&&o.relatedPort&&(s.push("raddr"),s.push(o.relatedAddress),s.push("rport"),s.push(o.relatedPort)),o.tcpType&&o.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(o.tcpType)),(o.usernameFragment||o.ufrag)&&(s.push("ufrag"),s.push(o.usernameFragment||o.ufrag)),"candidate:"+s.join(" ")},r.parseIceOptions=function(o){return o.substr(14).split(" ")},r.parseRtpMap=function(o){let s=o.substr(9).split(" ");const l={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),l.name=s[0],l.clockRate=parseInt(s[1],10),l.channels=s.length===3?parseInt(s[2],10):1,l.numChannels=l.channels,l},r.writeRtpMap=function(o){let s=o.payloadType;o.preferredPayloadType!==void 0&&(s=o.preferredPayloadType);const l=o.channels||o.numChannels||1;return"a=rtpmap:"+s+" "+o.name+"/"+o.clockRate+(l!==1?"/"+l:"")+`\r
`},r.parseExtmap=function(o){const s=o.substr(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1]}},r.writeExtmap=function(o){return"a=extmap:"+(o.id||o.preferredId)+(o.direction&&o.direction!=="sendrecv"?"/"+o.direction:"")+" "+o.uri+`\r
`},r.parseFmtp=function(o){const s={};let l;const h=o.substr(o.indexOf(" ")+1).split(";");for(let S=0;S<h.length;S++){var m,v;l=lc(m=h[S]).call(m).split("="),s[lc(v=l[0]).call(v)]=l[1]}return s},r.writeFmtp=function(o){let s="",l=o.payloadType;if(o.preferredPayloadType!==void 0&&(l=o.preferredPayloadType),o.parameters&&Object.keys(o.parameters).length){const h=[];Object.keys(o.parameters).forEach(m=>{o.parameters[m]!==void 0?h.push(m+"="+o.parameters[m]):h.push(m)}),s+="a=fmtp:"+l+" "+h.join(";")+`\r
`}return s},r.parseRtcpFb=function(o){const s=o.substr(o.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},r.writeRtcpFb=function(o){let s="",l=o.payloadType;return o.preferredPayloadType!==void 0&&(l=o.preferredPayloadType),o.rtcpFeedback&&o.rtcpFeedback.length&&o.rtcpFeedback.forEach(h=>{s+="a=rtcp-fb:"+l+" "+h.type+(h.parameter&&h.parameter.length?" "+h.parameter:"")+`\r
`}),s},r.parseSsrcMedia=function(o){const s=o.indexOf(" "),l={ssrc:parseInt(o.substr(7,s-7),10)},h=o.indexOf(":",s);return h>-1?(l.attribute=o.substr(s+1,h-s-1),l.value=o.substr(h+1)):l.attribute=o.substr(s+1),l},r.parseSsrcGroup=function(o){const s=o.substr(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(l=>parseInt(l,10))}},r.getMid=function(o){const s=r.matchPrefix(o,"a=mid:")[0];if(s)return s.substr(6)},r.parseFingerprint=function(o){const s=o.substr(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},r.getDtlsParameters=function(o,s){return{role:"auto",fingerprints:r.matchPrefix(o+s,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(o,s){let l="a=setup:"+s+`\r
`;return o.fingerprints.forEach(h=>{l+="a=fingerprint:"+h.algorithm+" "+h.value+`\r
`}),l},r.parseCryptoLine=function(o){const s=o.substr(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},r.writeCryptoLine=function(o){return"a=crypto:"+o.tag+" "+o.cryptoSuite+" "+(typeof o.keyParams=="object"?r.writeCryptoKeyParams(o.keyParams):o.keyParams)+(o.sessionParams?" "+o.sessionParams.join(" "):"")+`\r
`},r.parseCryptoKeyParams=function(o){if(o.indexOf("inline:")!==0)return null;const s=o.substr(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(o){return o.keyMethod+":"+o.keySalt+(o.lifeTime?"|"+o.lifeTime:"")+(o.mkiValue&&o.mkiLength?"|"+o.mkiValue+":"+o.mkiLength:"")},r.getCryptoParameters=function(o,s){return r.matchPrefix(o+s,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(o,s){const l=r.matchPrefix(o+s,"a=ice-ufrag:")[0],h=r.matchPrefix(o+s,"a=ice-pwd:")[0];return l&&h?{usernameFragment:l.substr(12),password:h.substr(10)}:null},r.writeIceParameters=function(o){let s="a=ice-ufrag:"+o.usernameFragment+`\r
a=ice-pwd:`+o.password+`\r
`;return o.iceLite&&(s+=`a=ice-lite\r
`),s},r.parseRtpParameters=function(o){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=r.splitLines(o)[0].split(" ");for(let h=3;h<l.length;h++){const m=l[h],v=r.matchPrefix(o,"a=rtpmap:"+m+" ")[0];if(v){const S=r.parseRtpMap(v),T=r.matchPrefix(o,"a=fmtp:"+m+" ");switch(S.parameters=T.length?r.parseFmtp(T[0]):{},S.rtcpFeedback=r.matchPrefix(o,"a=rtcp-fb:"+m+" ").map(r.parseRtcpFb),s.codecs.push(S),S.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(S.name.toUpperCase())}}}return r.matchPrefix(o,"a=extmap:").forEach(h=>{s.headerExtensions.push(r.parseExtmap(h))}),s},r.writeRtpDescription=function(o,s){let l="";l+="m="+o+" ",l+=s.codecs.length>0?"9":"0",l+=" UDP/TLS/RTP/SAVPF ",l+=s.codecs.map(m=>m.preferredPayloadType!==void 0?m.preferredPayloadType:m.payloadType).join(" ")+`\r
`,l+=`c=IN IP4 0.0.0.0\r
`,l+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(m=>{l+=r.writeRtpMap(m),l+=r.writeFmtp(m),l+=r.writeRtcpFb(m)});let h=0;return s.codecs.forEach(m=>{m.maxptime>h&&(h=m.maxptime)}),h>0&&(l+="a=maxptime:"+h+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(m=>{l+=r.writeExtmap(m)}),l},r.parseRtpEncodingParameters=function(o){const s=[],l=r.parseRtpParameters(o),h=l.fecMechanisms.indexOf("RED")!==-1,m=l.fecMechanisms.indexOf("ULPFEC")!==-1,v=r.matchPrefix(o,"a=ssrc:").map(L=>r.parseSsrcMedia(L)).filter(L=>L.attribute==="cname"),S=v.length>0&&v[0].ssrc;let T;const b=r.matchPrefix(o,"a=ssrc-group:FID").map(L=>L.substr(17).split(" ").map(V=>parseInt(V,10)));b.length>0&&b[0].length>1&&b[0][0]===S&&(T=b[0][1]),l.codecs.forEach(L=>{if(L.name.toUpperCase()==="RTX"&&L.parameters.apt){let V={ssrc:S,codecPayloadType:parseInt(L.parameters.apt,10)};S&&T&&(V.rtx={ssrc:T}),s.push(V),h&&(V=JSON.parse(JSON.stringify(V)),V.fec={ssrc:S,mechanism:m?"red+ulpfec":"red"},s.push(V))}}),s.length===0&&S&&s.push({ssrc:S});let I=r.matchPrefix(o,"b=");return I.length&&(I=I[0].indexOf("b=TIAS:")===0?parseInt(I[0].substr(7),10):I[0].indexOf("b=AS:")===0?1e3*parseInt(I[0].substr(5),10)*.95-16e3:void 0,s.forEach(L=>{L.maxBitrate=I})),s},r.parseRtcpParameters=function(o){const s={},l=r.matchPrefix(o,"a=ssrc:").map(v=>r.parseSsrcMedia(v)).filter(v=>v.attribute==="cname")[0];l&&(s.cname=l.value,s.ssrc=l.ssrc);const h=r.matchPrefix(o,"a=rtcp-rsize");s.reducedSize=h.length>0,s.compound=h.length===0;const m=r.matchPrefix(o,"a=rtcp-mux");return s.mux=m.length>0,s},r.writeRtcpParameters=function(o){let s="";return o.reducedSize&&(s+=`a=rtcp-rsize\r
`),o.mux&&(s+=`a=rtcp-mux\r
`),o.ssrc!==void 0&&o.cname&&(s+="a=ssrc:"+o.ssrc+" cname:"+o.cname+`\r
`),s},r.parseMsid=function(o){let s;const l=r.matchPrefix(o,"a=msid:");if(l.length===1)return s=l[0].substr(7).split(" "),{stream:s[0],track:s[1]};const h=r.matchPrefix(o,"a=ssrc:").map(m=>r.parseSsrcMedia(m)).filter(m=>m.attribute==="msid");return h.length>0?(s=h[0].value.split(" "),{stream:s[0],track:s[1]}):void 0},r.parseSctpDescription=function(o){const s=r.parseMLine(o),l=r.matchPrefix(o,"a=max-message-size:");let h;l.length>0&&(h=parseInt(l[0].substr(19),10)),isNaN(h)&&(h=65536);const m=r.matchPrefix(o,"a=sctp-port:");if(m.length>0)return{port:parseInt(m[0].substr(12),10),protocol:s.fmt,maxMessageSize:h};const v=r.matchPrefix(o,"a=sctpmap:");if(v.length>0){const S=v[0].substr(10).split(" ");return{port:parseInt(S[0],10),protocol:S[1],maxMessageSize:h}}},r.writeSctpDescription=function(o,s){let l=[];return l=o.protocol!=="DTLS/SCTP"?["m="+o.kind+" 9 "+o.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:["m="+o.kind+" 9 "+o.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&l.push("a=max-message-size:"+s.maxMessageSize+`\r
`),l.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(o,s,l){let h;const m=s!==void 0?s:2;return h=o||r.generateSessionId(),`v=0\r
o=`+(l||"thisisadapterortc")+" "+h+" "+m+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},r.getDirection=function(o,s){const l=r.splitLines(o);for(let h=0;h<l.length;h++)switch(l[h]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return l[h].substr(2)}return s?r.getDirection(s):"sendrecv"},r.getKind=function(o){return r.splitLines(o)[0].split(" ")[0].substr(2)},r.isRejected=function(o){return o.split(" ",2)[1]==="0"},r.parseMLine=function(o){const s=r.splitLines(o)[0].substr(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},r.parseOLine=function(o){const s=r.matchPrefix(o,"o=")[0].substr(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},r.isValidSDP=function(o){if(typeof o!="string"||o.length===0)return!1;const s=r.splitLines(o);for(let l=0;l<s.length;l++)if(s[l].length<2||s[l].charAt(1)!=="=")return!1;return!0},n.exports=r})(QS);var rd=QS.exports,UG=Object.freeze(i({__proto__:null,default:rd},[QS.exports]));function Gm(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const r=n.RTCIceCandidate;n.RTCIceCandidate=function(o){if(typeof o=="object"&&o.candidate&&o.candidate.indexOf("a=")===0&&((o=JSON.parse(JSON.stringify(o))).candidate=o.candidate.substr(2)),o.candidate&&o.candidate.length){const s=new r(o),l=rd.parseCandidate(o.candidate),h=Object.assign(s,l);return h.toJSON=function(){return{candidate:h.candidate,sdpMid:h.sdpMid,sdpMLineIndex:h.sdpMLineIndex,usernameFragment:h.usernameFragment}},h}return new r(o)},n.RTCIceCandidate.prototype=r.prototype,Yl(n,"icecandidate",o=>(o.candidate&&Object.defineProperty(o,"candidate",{value:new n.RTCIceCandidate(o.candidate),writable:"false"}),o))}function ZS(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||Yl(n,"icecandidate",r=>{if(r.candidate){const o=rd.parseCandidate(r.candidate.candidate);o.type==="relay"&&(r.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[o.priority>>24])}return r})}function Km(n,r){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const o=function(v){if(!v||!v.sdp)return!1;const S=rd.splitSections(v.sdp);return S.shift(),S.some(T=>{const b=rd.parseMLine(T);return b&&b.kind==="application"&&b.protocol.indexOf("SCTP")!==-1})},s=function(v){const S=v.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(S===null||S.length<2)return-1;const T=parseInt(S[1],10);return T!=T?-1:T},l=function(v){let S=65536;return r.browser==="firefox"&&(S=r.version<57?v===-1?16384:2147483637:r.version<60?r.version===57?65535:65536:2147483637),S},h=function(v,S){let T=65536;r.browser==="firefox"&&r.version===57&&(T=65535);const b=rd.matchPrefix(v.sdp,"a=max-message-size:");return b.length>0?T=parseInt(b[0].substr(19),10):r.browser==="firefox"&&S!==-1&&(T=2147483637),T},m=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,r.browser==="chrome"&&r.version>=76){const{sdpSemantics:v}=this.getConfiguration();v==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(o(arguments[0])){const v=s(arguments[0]),S=l(v),T=h(arguments[0],v);let b;b=S===0&&T===0?Number.POSITIVE_INFINITY:S===0||T===0?Math.max(S,T):Math.min(S,T);const I={};Object.defineProperty(I,"maxMessageSize",{get:()=>b}),this._sctp=I}return m.apply(this,arguments)}}function Ym(n){if(!n.RTCPeerConnection||!("createDataChannel"in n.RTCPeerConnection.prototype))return;function r(s,l){const h=s.send;s.send=function(){const m=arguments[0],v=m.length||m.size||m.byteLength;if(s.readyState==="open"&&l.sctp&&v>l.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+l.sctp.maxMessageSize+" bytes)");return h.apply(s,arguments)}}const o=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const s=o.apply(this,arguments);return r(s,this),s},Yl(n,"datachannel",s=>(r(s.channel,s.target),s))}function ey(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const r=n.RTCPeerConnection.prototype;Object.defineProperty(r,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(r,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(o){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),o&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=o)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(o=>{const s=r[o];r[o]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=l=>{const h=l.target;if(h._lastConnectionState!==h.connectionState){h._lastConnectionState=h.connectionState;const m=new Event("connectionstatechange",l);h.dispatchEvent(m)}return l},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function ty(n,r){if(!n.RTCPeerConnection||r.browser==="chrome"&&r.version>=71||r.browser==="safari"&&r.version>=605)return;const o=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=s.sdp.split(`
`).filter(h=>lc(h).call(h)!=="a=extmap-allow-mixed").join(`
`);n.RTCSessionDescription&&s instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:s.type,sdp:l}):s.sdp=l}return o.apply(this,arguments)}}function qm(n,r){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const o=n.RTCPeerConnection.prototype.addIceCandidate;o&&o.length!==0&&(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(r.browser==="chrome"&&r.version<78||r.browser==="firefox"&&r.version<68||r.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Me.resolve():o.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Me.resolve())})}function Xm(n,r){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const o=n.RTCPeerConnection.prototype.setLocalDescription;o&&o.length!==0&&(n.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return o.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer"}return s.sdp||s.type!=="offer"&&s.type!=="answer"?o.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(h=>o.apply(this,[h]))})}var VG=Object.freeze({__proto__:null,shimRTCIceCandidate:Gm,shimRTCIceCandidateRelayProtocol:ZS,shimMaxMessageSize:Km,shimSendThrowTypeError:Ym,shimConnectionState:ey,removeExtmapAllowMixed:ty,shimAddIceCandidateNullOrEmpty:qm,shimParameterlessSetLocalDescription:Xm});let di,pn;(function(){let{window:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const o=J1,s=Z$(n),l={browserDetails:s,commonShim:VG,extractVersion:_m,disableLog:J$,disableWarnings:Q$,sdp:UG};switch(s.browser){case"chrome":if(!ZA||!YS||!r.shimChrome)return o("Chrome shim is not included in this adapter release."),l;if(s.version===null)return o("Chrome shim can not determine version, not shimming."),l;o("adapter.js shimming chrome."),l.browserShim=ZA,qm(n,s),Xm(n),WA(n,s),zA(n),YS(n,s),GA(n),JA(n,s),KA(n),YA(n),qA(n),QA(n,s),Gm(n),ZS(n),ey(n),Km(n,s),Ym(n),ty(n,s);break;case"firefox":if(!uN||!qS||!r.shimFirefox)return o("Firefox shim is not included in this adapter release."),l;o("adapter.js shimming firefox."),l.browserShim=uN,qm(n,s),Xm(n),eN(n,s),qS(n,s),tN(n),iN(n),nN(n),rN(n),oN(n),aN(n),sN(n),cN(n),lN(n),Gm(n),ey(n),Km(n,s),Ym(n);break;case"safari":if(!SN||!r.shimSafari)return o("Safari shim is not included in this adapter release."),l;o("adapter.js shimming safari."),l.browserShim=SN,qm(n,s),Xm(n),gN(n),EN(n),pN(n),dN(n),hN(n),vN(n),fN(n),_N(n),Gm(n),ZS(n),Km(n,s),Ym(n),ty(n,s);break;default:o("Unsupported browser!")}})({window:typeof window>"u"?void 0:window}),function(n){n.WIN_10="Windows 10",n.WIN_81="Windows 8.1",n.WIN_8="Windows 8",n.WIN_7="Windows 7",n.WIN_VISTA="Windows Vista",n.WIN_SERVER_2003="Windows Server 2003",n.WIN_XP="Windows XP",n.WIN_2000="Windows 2000",n.ANDROID="Android",n.HARMONY_OS="HarmonyOS",n.OPEN_BSD="Open BSD",n.SUN_OS="Sun OS",n.LINUX="Linux",n.IOS="iOS",n.MAC_OS="Mac OS",n.QNX="QNX",n.UNIX="UNIX",n.BEOS="BeOS",n.OS_2="OS/2",n.SEARCH_BOT="Search Bot"}(di||(di={})),function(n){n.CHROME="Chrome",n.SAFARI="Safari",n.EDGE="Edge",n.FIREFOX="Firefox",n.OPERA="OPR",n.QQ="QQBrowser",n.WECHAT="MicroMessenger"}(pn||(pn={}));var ny={exports:{}};(function(n,r){(function(o,s){var l="function",h="undefined",m="object",v="string",S="major",T="model",b="name",I="type",L="vendor",V="version",K="architecture",Y="console",q="mobile",ue="tablet",me="smarttv",ye="wearable",qe="embedded",Te="Amazon",xe="Apple",Ce="ASUS",Fe="BlackBerry",fn="Firefox",bt="Google",Un="Huawei",bn="LG",vr="Microsoft",oi="Motorola",dr="Opera",lo="Samsung",ve="Sharp",Se="Sony",Le="Xiaomi",pt="Zebra",Jt="Facebook",Re="Chromium OS",D="Mac OS",G=function(rr){for(var wr={},Tn=0;Tn<rr.length;Tn++)wr[rr[Tn].toUpperCase()]=rr[Tn];return wr},te=function(rr,wr){return typeof rr===v&&Ee(wr).indexOf(Ee(rr))!==-1},Ee=function(rr){return rr.toLowerCase()},St=function(rr,wr){if(typeof rr===v)return rr=rr.replace(/^\s\s*/,""),typeof wr===h?rr:rr.substring(0,350)},On=function(rr,wr){for(var Tn,Gi,zs,ir,qt,uo,ll=0;ll<wr.length&&!qt;){var vs=wr[ll],r2=wr[ll+1];for(Tn=Gi=0;Tn<vs.length&&!qt&&vs[Tn];)if(qt=vs[Tn++].exec(rr))for(zs=0;zs<r2.length;zs++)uo=qt[++Gi],typeof(ir=r2[zs])===m&&ir.length>0?ir.length===2?typeof ir[1]==l?this[ir[0]]=ir[1].call(this,uo):this[ir[0]]=ir[1]:ir.length===3?typeof ir[1]!==l||ir[1].exec&&ir[1].test?this[ir[0]]=uo?uo.replace(ir[1],ir[2]):s:this[ir[0]]=uo?ir[1].call(this,uo,ir[2]):s:ir.length===4&&(this[ir[0]]=uo?ir[3].call(this,uo.replace(ir[1],ir[2])):s):this[ir]=uo||s;ll+=2}},ai=function(rr,wr){for(var Tn in wr)if(typeof wr[Tn]===m&&wr[Tn].length>0){for(var Gi=0;Gi<wr[Tn].length;Gi++)if(te(wr[Tn][Gi],rr))return Tn==="?"?s:Tn}else if(te(wr[Tn],rr))return Tn==="?"?s:Tn;return rr},Fa={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},sl={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[V,[b,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[V,[b,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[b,V],[/opios[\/ ]+([\w\.]+)/i],[V,[b,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[V,[b,dr]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[b,V],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[V,[b,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[V,[b,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[V,[b,"WeChat"]],[/konqueror\/([\w\.]+)/i],[V,[b,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[V,[b,"IE"]],[/yabrowser\/([\w\.]+)/i],[V,[b,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[b,/(.+)/,"$1 Secure Browser"],V],[/\bfocus\/([\w\.]+)/i],[V,[b,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[V,[b,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[V,[b,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[V,[b,"Dolphin"]],[/coast\/([\w\.]+)/i],[V,[b,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[V,[b,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[V,[b,fn]],[/\bqihu|(qi?ho?o?|360)browser/i],[[b,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[b,/(.+)/,"$1 Browser"],V],[/(comodo_dragon)\/([\w\.]+)/i],[[b,/_/g," "],V],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[b,V],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[b],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[b,Jt],V],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[b,V],[/\bgsa\/([\w\.]+) .*safari\//i],[V,[b,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[V,[b,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[b,"Chrome WebView"],V],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[V,[b,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[b,V],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[V,[b,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[V,b],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[b,[V,ai,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[b,V],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[b,"Netscape"],V],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[V,[b,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[b,V],[/(cobalt)\/([\w\.]+)/i],[b,[V,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[K,"amd64"]],[/(ia32(?=;))/i],[[K,Ee]],[/((?:i[346]|x)86)[;\)]/i],[[K,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[K,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[K,"armhf"]],[/windows (ce|mobile); ppc;/i],[[K,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[K,/ower/,"",Ee]],[/(sun4\w)[;\)]/i],[[K,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[K,Ee]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[T,[L,lo],[I,ue]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[T,[L,lo],[I,q]],[/\((ip(?:hone|od)[\w ]*);/i],[T,[L,xe],[I,q]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[T,[L,xe],[I,ue]],[/(macintosh);/i],[T,[L,xe]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[T,[L,ve],[I,q]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[T,[L,Un],[I,ue]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[T,[L,Un],[I,q]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[T,/_/g," "],[L,Le],[I,q]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[T,/_/g," "],[L,Le],[I,ue]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[T,[L,"OPPO"],[I,q]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[T,[L,"Vivo"],[I,q]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[T,[L,"Realme"],[I,q]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[T,[L,oi],[I,q]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[T,[L,oi],[I,ue]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[T,[L,bn],[I,ue]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[T,[L,bn],[I,q]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[T,[L,"Lenovo"],[I,ue]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[T,/_/g," "],[L,"Nokia"],[I,q]],[/(pixel c)\b/i],[T,[L,bt],[I,ue]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[T,[L,bt],[I,q]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[T,[L,Se],[I,q]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[T,"Xperia Tablet"],[L,Se],[I,ue]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[T,[L,"OnePlus"],[I,q]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[T,[L,Te],[I,ue]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[T,/(.+)/g,"Fire Phone $1"],[L,Te],[I,q]],[/(playbook);[-\w\),; ]+(rim)/i],[T,L,[I,ue]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[T,[L,Fe],[I,q]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[T,[L,Ce],[I,ue]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[T,[L,Ce],[I,q]],[/(nexus 9)/i],[T,[L,"HTC"],[I,ue]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[L,[T,/_/g," "],[I,q]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[T,[L,"Acer"],[I,ue]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[T,[L,"Meizu"],[I,q]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[L,T,[I,q]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[L,T,[I,ue]],[/(surface duo)/i],[T,[L,vr],[I,ue]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[T,[L,"Fairphone"],[I,q]],[/(u304aa)/i],[T,[L,"AT&T"],[I,q]],[/\bsie-(\w*)/i],[T,[L,"Siemens"],[I,q]],[/\b(rct\w+) b/i],[T,[L,"RCA"],[I,ue]],[/\b(venue[\d ]{2,7}) b/i],[T,[L,"Dell"],[I,ue]],[/\b(q(?:mv|ta)\w+) b/i],[T,[L,"Verizon"],[I,ue]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[T,[L,"Barnes & Noble"],[I,ue]],[/\b(tm\d{3}\w+) b/i],[T,[L,"NuVision"],[I,ue]],[/\b(k88) b/i],[T,[L,"ZTE"],[I,ue]],[/\b(nx\d{3}j) b/i],[T,[L,"ZTE"],[I,q]],[/\b(gen\d{3}) b.+49h/i],[T,[L,"Swiss"],[I,q]],[/\b(zur\d{3}) b/i],[T,[L,"Swiss"],[I,ue]],[/\b((zeki)?tb.*\b) b/i],[T,[L,"Zeki"],[I,ue]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[L,"Dragon Touch"],T,[I,ue]],[/\b(ns-?\w{0,9}) b/i],[T,[L,"Insignia"],[I,ue]],[/\b((nxa|next)-?\w{0,9}) b/i],[T,[L,"NextBook"],[I,ue]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[L,"Voice"],T,[I,q]],[/\b(lvtel\-)?(v1[12]) b/i],[[L,"LvTel"],T,[I,q]],[/\b(ph-1) /i],[T,[L,"Essential"],[I,q]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[T,[L,"Envizen"],[I,ue]],[/\b(trio[-\w\. ]+) b/i],[T,[L,"MachSpeed"],[I,ue]],[/\btu_(1491) b/i],[T,[L,"Rotor"],[I,ue]],[/(shield[\w ]+) b/i],[T,[L,"Nvidia"],[I,ue]],[/(sprint) (\w+)/i],[L,T,[I,q]],[/(kin\.[onetw]{3})/i],[[T,/\./g," "],[L,vr],[I,q]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[T,[L,pt],[I,ue]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[T,[L,pt],[I,q]],[/smart-tv.+(samsung)/i],[L,[I,me]],[/hbbtv.+maple;(\d+)/i],[[T,/^/,"SmartTV"],[L,lo],[I,me]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[L,bn],[I,me]],[/(apple) ?tv/i],[L,[T,"Apple TV"],[I,me]],[/crkey/i],[[T,"Chromecast"],[L,bt],[I,me]],[/droid.+aft(\w)( bui|\))/i],[T,[L,Te],[I,me]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[T,[L,ve],[I,me]],[/(bravia[\w ]+)( bui|\))/i],[T,[L,Se],[I,me]],[/(mitv-\w{5}) bui/i],[T,[L,Le],[I,me]],[/Hbbtv.*(technisat) (.*);/i],[L,T,[I,me]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[L,St],[T,St],[I,me]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[I,me]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[L,T,[I,Y]],[/droid.+; (shield) bui/i],[T,[L,"Nvidia"],[I,Y]],[/(playstation [345portablevi]+)/i],[T,[L,Se],[I,Y]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[T,[L,vr],[I,Y]],[/((pebble))app/i],[L,T,[I,ye]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[T,[L,xe],[I,ye]],[/droid.+; (glass) \d/i],[T,[L,bt],[I,ye]],[/droid.+; (wt63?0{2,3})\)/i],[T,[L,pt],[I,ye]],[/(quest( 2| pro)?)/i],[T,[L,Jt],[I,ye]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[L,[I,qe]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[T,[I,q]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[T,[I,ue]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[I,ue]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[I,q]],[/(android[-\w\. ]{0,9});.+buil/i],[T,[L,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[V,[b,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[V,[b,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[b,V],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[V,b]],os:[[/microsoft (windows) (vista|xp)/i],[b,V],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[b,[V,ai,Fa]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[b,"Windows"],[V,ai,Fa]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[V,/_/g,"."],[b,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[b,D],[V,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[V,b],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[b,V],[/\(bb(10);/i],[V,[b,Fe]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[V,[b,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[V,[b,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[V,[b,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[V,[b,"watchOS"]],[/crkey\/([\d\.]+)/i],[V,[b,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[b,Re],V],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[b,V],[/(sunos) ?([\w\.\d]*)/i],[[b,"Solaris"],V],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[b,V]]},va=function(rr,wr){if(typeof rr===m&&(wr=rr,rr=s),!(this instanceof va))return new va(rr,wr).getResult();var Tn=typeof o!==h&&o.navigator?o.navigator:s,Gi=rr||(Tn&&Tn.userAgent?Tn.userAgent:""),zs=Tn&&Tn.userAgentData?Tn.userAgentData:s,ir=wr?function(qt,uo){var ll={};for(var vs in qt)uo[vs]&&uo[vs].length%2==0?ll[vs]=uo[vs].concat(qt[vs]):ll[vs]=qt[vs];return ll}(sl,wr):sl;return this.getBrowser=function(){var qt={};return qt.name=s,qt.version=s,On.call(qt,Gi,ir.browser),qt.major=function(uo){return typeof uo===v?uo.replace(/[^\d\.]/g,"").split(".")[0]:s}(qt.version),Tn&&Tn.brave&&typeof Tn.brave.isBrave==l&&(qt.name="Brave"),qt},this.getCPU=function(){var qt={};return qt.architecture=s,On.call(qt,Gi,ir.cpu),qt},this.getDevice=function(){var qt={};return qt.vendor=s,qt.model=s,qt.type=s,On.call(qt,Gi,ir.device),!qt.type&&zs&&zs.mobile&&(qt.type=q),qt.model=="Macintosh"&&Tn&&typeof Tn.standalone!==h&&Tn.maxTouchPoints&&Tn.maxTouchPoints>2&&(qt.model="iPad",qt.type=ue),qt},this.getEngine=function(){var qt={};return qt.name=s,qt.version=s,On.call(qt,Gi,ir.engine),qt},this.getOS=function(){var qt={};return qt.name=s,qt.version=s,On.call(qt,Gi,ir.os),!qt.name&&zs&&zs.platform!="Unknown"&&(qt.name=zs.platform.replace(/chrome os/i,Re).replace(/macos/i,D)),qt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Gi},this.setUA=function(qt){return Gi=typeof qt===v&&qt.length>350?St(qt,350):qt,this},this.setUA(Gi),this};va.VERSION="0.7.34",va.BROWSER=G([b,V,S]),va.CPU=G([K]),va.DEVICE=G([T,L,I,Y,q,me,ue,ye,qe]),va.ENGINE=va.OS=G([b,V]),n.exports&&(r=n.exports=va),r.UAParser=va;var cl=typeof o!==h&&(o.jQuery||o.Zepto);if(cl&&!cl.ua){var xd=new va;cl.ua=xd.getResult(),cl.ua.get=function(){return xd.getUA()},cl.ua.set=function(rr){xd.setUA(rr);var wr=xd.getResult();for(var Tn in wr)cl.ua[Tn]=wr[Tn]}}})(typeof window=="object"?window:a)})(ny,ny.exports);const ry=new ny.exports;let iy,Uo,uc=ry.getResult(),oy=null;function an(n){if(!oy){n&&ry.setUA(n),uc=ry.getResult();const r=function(h){if(h.engine.name==="Blink"&&h.browser.name!=="WeChat")return pn.CHROME;switch(h.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return pn.CHROME;case"Safari":case"Mobile Safari":return pn.SAFARI;case"Edge":return pn.EDGE;case"Firefox":return pn.FIREFOX;case"QQBrowser":return pn.QQ;case"Opera":return pn.OPERA;case"WeChat":return pn.WECHAT;default:return h.browser.name||""}}(uc),o=function(h){let m;return m=h.engine.name==="Blink"?h.engine.version||"":h.browser.version||"",m.split(".")[0]}(uc),s=function(h){switch(h.os.name){case"Windows":return h.os.version?h.os.name+" "+h.os.version:h.os.name;default:return h.os.name||""}}(uc),l=uc.os.version;if(!(r&&o&&s&&l))return{name:r,version:o,os:s,osVersion:l};oy={name:r,version:o,os:s,osVersion:l}}return oy}function bN(){return an().os}function TN(){const n=an();return"".concat(n.os," ").concat(n.osVersion)}function Jm(){const n=an();return!!(uc.engine.name==="WebKit"&&n.os===di.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&n.name!==pn.SAFARI||ki()&&n.name!==pn.SAFARI)}function FG(){const n=an();if(Jm()){if(n.os===di.MAC_OS)return!0;if(n.os===di.IOS){const r=uc.os.version&&uc.os.version.split(".");if(r&&Number(r[0])===14&&r[1]&&Number(r[1])>=3||r&&Number(r[0])>14)return!0}}return!1}function BG(){return uc.engine.name==="WebKit"}function ay(){return an().name===pn.CHROME}function Di(){return an().name===pn.SAFARI}function Qn(){return an().name===pn.FIREFOX}function ki(){return an().os===di.IOS}function sy(n){const r=an();return!(r.name!==pn.CHROME||!r.osVersion)&&Number(r.version)>=n}function RN(n){const r=an();return!(r.name!==pn.EDGE||!r.osVersion)&&Number(r.version)>=n}function IN(n){const r=an();return!(r.name!==pn.OPERA||!r.osVersion)&&Number(r.version)>=n}function wN(){const n=an();return!(n.name!==pn.CHROME||!n.osVersion)&&Number(n.version)<=90}function ON(){const n=an();if(n.os!==di.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])<14||Number(r[0])===14&&Number(r[1])<=6}function id(){const n=an();if(n.os!==di.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===15}function cy(){const n=an();if(n.os!==di.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===16}function AN(){const n=an();if(n.os!==di.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===15&&Number(r[1])>=1}function Us(){return Di()&&navigator.maxTouchPoints>0}function NN(){return an().name===pn.WECHAT}function xN(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function Zl(){const n=an();return n.name===pn.EDGE||n.name===pn.SAFARI?!1:!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function Qm(){return bN()===di.ANDROID}function op(){const n=an();return Qm()&&(n.name===pn.CHROME||n.name===pn.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}(function(n){n.L1T1="L1T1",n.L1T2="L1T2",n.L1T3="L1T3",n.L2T1_KEY="L2T1_KEY",n.L2T2_KEY="L2T2_KEY",n.L2T3_KEY="L2T3_KEY",n.L3T1_KEY="L3T1_KEY",n.L3T2_KEY="L3T2_KEY",n.L3T3_KEY="L3T3_KEY"})(iy||(iy={})),function(n){n.CERTIFICATE="certificate",n.CODEC="codec",n.CANDIDATE_PAIR="candidate-pair",n.LOCAL_CANDIDATE="local-candidate",n.REMOTE_CANDIDATE="remote-candidate",n.INBOUND="inbound-rtp",n.TRACK="track",n.OUTBOUND="outbound-rtp",n.PC="peer-connection",n.REMOTE_INBOUND="remote-inbound-rtp",n.REMOTE_OUTBOUND="remote-outbound-rtp",n.TRANSPORT="transport",n.CSRC="csrc",n.DATA_CHANNEL="data-channel",n.STREAM="stream",n.SENDER="sender",n.RECEIVER="receiver"}(Uo||(Uo={}));var PN={exports:{}},jG=$i,$G=F,DN=ss.f;jG({target:"Object",stat:!0,forced:Object.defineProperty!==DN,sham:!$G},{defineProperty:DN});var kN=Ye.Object,HG=PN.exports=function(n,r,o){return kN.defineProperty(n,r,o)};kN.defineProperty.sham&&(HG.sham=!0);var LN=PN.exports;function N(n,r,o){return r in n?LN(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n}var ly,uy={exports:{}},MN=function(n,r){return function(){for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];return n.apply(r,o)}},WG=MN,dy=Object.prototype.toString,hy=(ly=Object.create(null),function(n){var r=dy.call(n);return ly[r]||(ly[r]=r.slice(8,-1).toLowerCase())});function eu(n){return n=n.toLowerCase(),function(r){return hy(r)===n}}function py(n){return Array.isArray(n)}function Zm(n){return n===void 0}var UN=eu("ArrayBuffer");function VN(n){return n!==null&&typeof n=="object"}function e0(n){if(hy(n)!=="object")return!1;var r=Object.getPrototypeOf(n);return r===null||r===Object.prototype}var zG=eu("Date"),GG=eu("File"),KG=eu("Blob"),YG=eu("FileList");function fy(n){return dy.call(n)==="[object Function]"}var qG=eu("URLSearchParams");function my(n,r){if(n!=null)if(typeof n!="object"&&(n=[n]),py(n))for(var o=0,s=n.length;o<s;o++)r.call(null,n[o],o,n);else for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&r.call(null,n[l],l,n)}var gy,XG=(gy=typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array),function(n){return gy&&n instanceof gy}),Hi={isArray:py,isArrayBuffer:UN,isBuffer:function(n){return n!==null&&!Zm(n)&&n.constructor!==null&&!Zm(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)},isFormData:function(n){var r="[object FormData]";return n&&(typeof FormData=="function"&&n instanceof FormData||dy.call(n)===r||fy(n.toString)&&n.toString()===r)},isArrayBufferView:function(n){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer&&UN(n.buffer)},isString:function(n){return typeof n=="string"},isNumber:function(n){return typeof n=="number"},isObject:VN,isPlainObject:e0,isUndefined:Zm,isDate:zG,isFile:GG,isBlob:KG,isFunction:fy,isStream:function(n){return VN(n)&&fy(n.pipe)},isURLSearchParams:qG,isStandardBrowserEnv:function(){return(typeof navigator>"u"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window<"u"&&typeof document<"u"},forEach:my,merge:function n(){var r={};function o(h,m){e0(r[m])&&e0(h)?r[m]=n(r[m],h):e0(h)?r[m]=n({},h):py(h)?r[m]=h.slice():r[m]=h}for(var s=0,l=arguments.length;s<l;s++)my(arguments[s],o);return r},extend:function(n,r,o){return my(r,function(s,l){n[l]=o&&typeof s=="function"?WG(s,o):s}),n},trim:function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},stripBOM:function(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n},inherits:function(n,r,o,s){n.prototype=Object.create(r.prototype,s),n.prototype.constructor=n,o&&Object.assign(n.prototype,o)},toFlatObject:function(n,r,o){var s,l,h,m={};r=r||{};do{for(l=(s=Object.getOwnPropertyNames(n)).length;l-- >0;)m[h=s[l]]||(r[h]=n[h],m[h]=!0);n=Object.getPrototypeOf(n)}while(n&&(!o||o(n,r))&&n!==Object.prototype);return r},kindOf:hy,kindOfTest:eu,endsWith:function(n,r,o){n=String(n),(o===void 0||o>n.length)&&(o=n.length),o-=r.length;var s=n.indexOf(r,o);return s!==-1&&s===o},toArray:function(n){if(!n)return null;var r=n.length;if(Zm(r))return null;for(var o=new Array(r);r-- >0;)o[r]=n[r];return o},isTypedArray:XG,isFileList:YG},od=Hi;function FN(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var BN=function(n,r,o){if(!r)return n;var s;if(o)s=o(r);else if(od.isURLSearchParams(r))s=r.toString();else{var l=[];od.forEach(r,function(m,v){m!=null&&(od.isArray(m)?v+="[]":m=[m],od.forEach(m,function(S){od.isDate(S)?S=S.toISOString():od.isObject(S)&&(S=JSON.stringify(S)),l.push(FN(v)+"="+FN(S))}))}),s=l.join("&")}if(s){var h=n.indexOf("#");h!==-1&&(n=n.slice(0,h)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n},JG=Hi;function t0(){this.handlers=[]}t0.prototype.use=function(n,r,o){return this.handlers.push({fulfilled:n,rejected:r,synchronous:!!o&&o.synchronous,runWhen:o?o.runWhen:null}),this.handlers.length-1},t0.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)},t0.prototype.forEach=function(n){JG.forEach(this.handlers,function(r){r!==null&&n(r)})};var QG=t0,ZG=Hi,jN=Hi;function ad(n,r,o,s,l){Error.call(this),this.message=n,this.name="AxiosError",r&&(this.code=r),o&&(this.config=o),s&&(this.request=s),l&&(this.response=l)}jN.inherits(ad,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var $N=ad.prototype,HN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(n){HN[n]={value:n}}),Object.defineProperties(ad,HN),Object.defineProperty($N,"isAxiosError",{value:!0}),ad.from=function(n,r,o,s,l,h){var m=Object.create($N);return jN.toFlatObject(n,m,function(v){return v!==Error.prototype}),ad.call(m,n.message,r,o,s,l),m.name=n.name,h&&Object.assign(m,h),m};var sd=ad,WN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ls=Hi,zN=function(n,r){r=r||new FormData;var o=[];function s(l){return l===null?"":ls.isDate(l)?l.toISOString():ls.isArrayBuffer(l)||ls.isTypedArray(l)?typeof Blob=="function"?new Blob([l]):Buffer.from(l):l}return function l(h,m){if(ls.isPlainObject(h)||ls.isArray(h)){if(o.indexOf(h)!==-1)throw Error("Circular reference detected in "+m);o.push(h),ls.forEach(h,function(v,S){if(!ls.isUndefined(v)){var T,b=m?m+"."+S:S;if(v&&!m&&typeof v=="object"){if(ls.endsWith(S,"{}"))v=JSON.stringify(v);else if(ls.endsWith(S,"[]")&&(T=ls.toArray(v)))return void T.forEach(function(I){!ls.isUndefined(I)&&r.append(b,s(I))})}l(v,b)}}),o.pop()}else r.append(m,s(h))}(n),r},vy=sd,n0=Hi,e9=n0.isStandardBrowserEnv()?{write:function(n,r,o,s,l,h){var m=[];m.push(n+"="+encodeURIComponent(r)),n0.isNumber(o)&&m.push("expires="+new Date(o).toGMTString()),n0.isString(s)&&m.push("path="+s),n0.isString(l)&&m.push("domain="+l),h===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(n){var r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},t9=function(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)},n9=function(n,r){return r?n.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):n},GN=function(n,r){return n&&!t9(r)?n9(n,r):r},Ey=Hi,r9=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],KN=Hi,i9=KN.isStandardBrowserEnv()?function(){var n,r=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function s(l){var h=l;return r&&(o.setAttribute("href",h),h=o.href),o.setAttribute("href",h),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:o.pathname.charAt(0)==="/"?o.pathname:"/"+o.pathname}}return n=s(window.location.href),function(l){var h=KN.isString(l)?s(l):l;return h.protocol===n.protocol&&h.host===n.host}}():function(){return!0},_y=sd;function YN(n){_y.call(this,n??"canceled",_y.ERR_CANCELED),this.name="CanceledError"}Hi.inherits(YN,_y,{__CANCEL__:!0});var r0=YN,ap=Hi,o9=function(n,r,o){var s=o.config.validateStatus;o.status&&s&&!s(o.status)?r(new vy("Request failed with status code "+o.status,[vy.ERR_BAD_REQUEST,vy.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o)):n(o)},a9=e9,s9=BN,c9=GN,l9=function(n){var r,o,s,l={};return n&&Ey.forEach(n.split(`
`),function(h){if(s=h.indexOf(":"),r=Ey.trim(h.substr(0,s)).toLowerCase(),o=Ey.trim(h.substr(s+1)),r){if(l[r]&&r9.indexOf(r)>=0)return;l[r]=r==="set-cookie"?(l[r]?l[r]:[]).concat([o]):l[r]?l[r]+", "+o:o}}),l},u9=i9,d9=WN,dc=sd,h9=r0,p9=function(n){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""},f9=function(n){return new Promise(function(r,o){var s,l=n.data,h=n.headers,m=n.responseType;function v(){n.cancelToken&&n.cancelToken.unsubscribe(s),n.signal&&n.signal.removeEventListener("abort",s)}ap.isFormData(l)&&ap.isStandardBrowserEnv()&&delete h["Content-Type"];var S=new XMLHttpRequest;if(n.auth){var T=n.auth.username||"",b=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";h.Authorization="Basic "+btoa(T+":"+b)}var I=c9(n.baseURL,n.url);function L(){if(S){var Y="getAllResponseHeaders"in S?l9(S.getAllResponseHeaders()):null,q={data:m&&m!=="text"&&m!=="json"?S.response:S.responseText,status:S.status,statusText:S.statusText,headers:Y,config:n,request:S};o9(function(ue){r(ue),v()},function(ue){o(ue),v()},q),S=null}}if(S.open(n.method.toUpperCase(),s9(I,n.params,n.paramsSerializer),!0),S.timeout=n.timeout,"onloadend"in S?S.onloadend=L:S.onreadystatechange=function(){S&&S.readyState===4&&(S.status!==0||S.responseURL&&S.responseURL.indexOf("file:")===0)&&setTimeout(L)},S.onabort=function(){S&&(o(new dc("Request aborted",dc.ECONNABORTED,n,S)),S=null)},S.onerror=function(){o(new dc("Network Error",dc.ERR_NETWORK,n,S,S)),S=null},S.ontimeout=function(){var Y=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded",q=n.transitional||d9;n.timeoutErrorMessage&&(Y=n.timeoutErrorMessage),o(new dc(Y,q.clarifyTimeoutError?dc.ETIMEDOUT:dc.ECONNABORTED,n,S)),S=null},ap.isStandardBrowserEnv()){var V=(n.withCredentials||u9(I))&&n.xsrfCookieName?a9.read(n.xsrfCookieName):void 0;V&&(h[n.xsrfHeaderName]=V)}"setRequestHeader"in S&&ap.forEach(h,function(Y,q){l===void 0&&q.toLowerCase()==="content-type"?delete h[q]:S.setRequestHeader(q,Y)}),ap.isUndefined(n.withCredentials)||(S.withCredentials=!!n.withCredentials),m&&m!=="json"&&(S.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&S.addEventListener("progress",n.onDownloadProgress),typeof n.onUploadProgress=="function"&&S.upload&&S.upload.addEventListener("progress",n.onUploadProgress),(n.cancelToken||n.signal)&&(s=function(Y){S&&(o(!Y||Y&&Y.type?new h9:Y),S.abort(),S=null)},n.cancelToken&&n.cancelToken.subscribe(s),n.signal&&(n.signal.aborted?s():n.signal.addEventListener("abort",s))),l||(l=null);var K=p9(I);K&&["http","https","file"].indexOf(K)===-1?o(new dc("Unsupported protocol "+K+":",dc.ERR_BAD_REQUEST,n)):S.send(l)})},Li=Hi,qN=function(n,r){ZG.forEach(n,function(o,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(n[r]=o,delete n[s])})},XN=sd,m9=zN,g9={"Content-Type":"application/x-www-form-urlencoded"};function JN(n,r){!Li.isUndefined(n)&&Li.isUndefined(n["Content-Type"])&&(n["Content-Type"]=r)}var QN,i0={transitional:WN,adapter:((typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(QN=f9),QN),transformRequest:[function(n,r){if(qN(r,"Accept"),qN(r,"Content-Type"),Li.isFormData(n)||Li.isArrayBuffer(n)||Li.isBuffer(n)||Li.isStream(n)||Li.isFile(n)||Li.isBlob(n))return n;if(Li.isArrayBufferView(n))return n.buffer;if(Li.isURLSearchParams(n))return JN(r,"application/x-www-form-urlencoded;charset=utf-8"),n.toString();var o,s=Li.isObject(n),l=r&&r["Content-Type"];if((o=Li.isFileList(n))||s&&l==="multipart/form-data"){var h=this.env&&this.env.FormData;return m9(o?{"files[]":n}:n,h&&new h)}return s||l==="application/json"?(JN(r,"application/json"),function(m,v,S){if(Li.isString(m))try{return(v||JSON.parse)(m),Li.trim(m)}catch(T){if(T.name!=="SyntaxError")throw T}return(S||JSON.stringify)(m)}(n)):n}],transformResponse:[function(n){var r=this.transitional||i0.transitional,o=r&&r.silentJSONParsing,s=r&&r.forcedJSONParsing,l=!o&&this.responseType==="json";if(l||s&&Li.isString(n)&&n.length)try{return JSON.parse(n)}catch(h){if(l)throw h.name==="SyntaxError"?XN.from(h,XN.ERR_BAD_RESPONSE,this,null,this.response):h}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:null},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Li.forEach(["delete","get","head"],function(n){i0.headers[n]={}}),Li.forEach(["post","put","patch"],function(n){i0.headers[n]=Li.merge(g9)});var Sy=i0,v9=Hi,E9=Sy,ZN=function(n){return!(!n||!n.__CANCEL__)},ex=Hi,yy=function(n,r,o){var s=this||E9;return v9.forEach(o,function(l){n=l.call(s,n,r)}),n},_9=ZN,S9=Sy,y9=r0;function Cy(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new y9}var sa=Hi,tx=function(n,r){r=r||{};var o={};function s(T,b){return sa.isPlainObject(T)&&sa.isPlainObject(b)?sa.merge(T,b):sa.isPlainObject(b)?sa.merge({},b):sa.isArray(b)?b.slice():b}function l(T){return sa.isUndefined(r[T])?sa.isUndefined(n[T])?void 0:s(void 0,n[T]):s(n[T],r[T])}function h(T){if(!sa.isUndefined(r[T]))return s(void 0,r[T])}function m(T){return sa.isUndefined(r[T])?sa.isUndefined(n[T])?void 0:s(void 0,n[T]):s(void 0,r[T])}function v(T){return T in r?s(n[T],r[T]):T in n?s(void 0,n[T]):void 0}var S={url:h,method:h,data:h,baseURL:m,transformRequest:m,transformResponse:m,paramsSerializer:m,timeout:m,timeoutMessage:m,withCredentials:m,adapter:m,responseType:m,xsrfCookieName:m,xsrfHeaderName:m,onUploadProgress:m,onDownloadProgress:m,decompress:m,maxContentLength:m,maxBodyLength:m,beforeRedirect:m,transport:m,httpAgent:m,httpsAgent:m,cancelToken:m,socketPath:m,responseEncoding:m,validateStatus:v};return sa.forEach(Object.keys(n).concat(Object.keys(r)),function(T){var b=S[T]||l,I=b(T);sa.isUndefined(I)&&b!==v||(o[T]=I)}),o},nx="0.27.2",C9=nx,Kc=sd,by={};["object","boolean","number","function","string","symbol"].forEach(function(n,r){by[n]=function(o){return typeof o===n||"a"+(r<1?"n ":" ")+n}});var rx={};by.transitional=function(n,r,o){function s(l,h){return"[Axios v"+C9+"] Transitional option '"+l+"'"+h+(o?". "+o:"")}return function(l,h,m){if(n===!1)throw new Kc(s(h," has been removed"+(r?" in "+r:"")),Kc.ERR_DEPRECATED);return r&&!rx[h]&&(rx[h]=!0,console.warn(s(h," has been deprecated since v"+r+" and will be removed in the near future"))),!n||n(l,h,m)}};var ix=Hi,b9=BN,ox=QG,ax=function(n){return Cy(n),n.headers=n.headers||{},n.data=yy.call(n,n.data,n.headers,n.transformRequest),n.headers=ex.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),ex.forEach(["delete","get","head","post","put","patch","common"],function(r){delete n.headers[r]}),(n.adapter||S9.adapter)(n).then(function(r){return Cy(n),r.data=yy.call(n,r.data,r.headers,n.transformResponse),r},function(r){return _9(r)||(Cy(n),r&&r.response&&(r.response.data=yy.call(n,r.response.data,r.response.headers,n.transformResponse))),Promise.reject(r)})},o0=tx,T9=GN,sx={assertOptions:function(n,r,o){if(typeof n!="object")throw new Kc("options must be an object",Kc.ERR_BAD_OPTION_VALUE);for(var s=Object.keys(n),l=s.length;l-- >0;){var h=s[l],m=r[h];if(m){var v=n[h],S=v===void 0||m(v,h,n);if(S!==!0)throw new Kc("option "+h+" must be "+S,Kc.ERR_BAD_OPTION_VALUE)}else if(o!==!0)throw new Kc("Unknown option "+h,Kc.ERR_BAD_OPTION)}},validators:by},cd=sx.validators;function ld(n){this.defaults=n,this.interceptors={request:new ox,response:new ox}}ld.prototype.request=function(n,r){typeof n=="string"?(r=r||{}).url=n:r=n||{},(r=o0(this.defaults,r)).method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var o=r.transitional;o!==void 0&&sx.assertOptions(o,{silentJSONParsing:cd.transitional(cd.boolean),forcedJSONParsing:cd.transitional(cd.boolean),clarifyTimeoutError:cd.transitional(cd.boolean)},!1);var s=[],l=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(r)===!1||(l=l&&I.synchronous,s.unshift(I.fulfilled,I.rejected))});var h,m=[];if(this.interceptors.response.forEach(function(I){m.push(I.fulfilled,I.rejected)}),!l){var v=[ax,void 0];for(Array.prototype.unshift.apply(v,s),v=v.concat(m),h=Promise.resolve(r);v.length;)h=h.then(v.shift(),v.shift());return h}for(var S=r;s.length;){var T=s.shift(),b=s.shift();try{S=T(S)}catch(I){b(I);break}}try{h=ax(S)}catch(I){return Promise.reject(I)}for(;m.length;)h=h.then(m.shift(),m.shift());return h},ld.prototype.getUri=function(n){n=o0(this.defaults,n);var r=T9(n.baseURL,n.url);return b9(r,n.params,n.paramsSerializer)},ix.forEach(["delete","get","head","options"],function(n){ld.prototype[n]=function(r,o){return this.request(o0(o||{},{method:n,url:r,data:(o||{}).data}))}}),ix.forEach(["post","put","patch"],function(n){function r(o){return function(s,l,h){return this.request(o0(h||{},{method:n,headers:o?{"Content-Type":"multipart/form-data"}:{},url:s,data:l}))}}ld.prototype[n]=r(),ld.prototype[n+"Form"]=r(!0)});var R9=ld,I9=r0;function ud(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(s){r=s});var o=this;this.promise.then(function(s){if(o._listeners){var l,h=o._listeners.length;for(l=0;l<h;l++)o._listeners[l](s);o._listeners=null}}),this.promise.then=function(s){var l,h=new Promise(function(m){o.subscribe(m),l=m}).then(s);return h.cancel=function(){o.unsubscribe(l)},h},n(function(s){o.reason||(o.reason=new I9(s),r(o.reason))})}ud.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},ud.prototype.subscribe=function(n){this.reason?n(this.reason):this._listeners?this._listeners.push(n):this._listeners=[n]},ud.prototype.unsubscribe=function(n){if(this._listeners){var r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}},ud.source=function(){var n;return{token:new ud(function(r){n=r}),cancel:n}};var w9=ud,O9=Hi,cx=Hi,A9=MN,a0=R9,N9=tx,Vo=function n(r){var o=new a0(r),s=A9(a0.prototype.request,o);return cx.extend(s,a0.prototype,o),cx.extend(s,o),s.create=function(l){return n(N9(r,l))},s}(Sy);Vo.Axios=a0,Vo.CanceledError=r0,Vo.CancelToken=w9,Vo.isCancel=ZN,Vo.VERSION=nx,Vo.toFormData=zN,Vo.AxiosError=sd,Vo.Cancel=Vo.CanceledError,Vo.all=function(n){return Promise.all(n)},Vo.spread=function(n){return function(r){return n.apply(null,r)}},Vo.isAxiosError=function(n){return O9.isObject(n)&&n.isAxiosError===!0},uy.exports=Vo,uy.exports.default=Vo;var Pa=uy.exports;class x9{constructor(r){N(this,"logger",void 0),N(this,"prefixLists",[]),this.logger=r}debug(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];this.logger.debug(...this.prefixLists,...o)}info(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];this.logger.info(...this.prefixLists,...o)}warning(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];this.logger.warning(...this.prefixLists,...o)}error(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];this.logger.error(...this.prefixLists,...o)}prefix(r){return this.prefixLists.push(r),this}popPrefix(){return this.prefixLists.pop(),this}}class Zn{constructor(){N(this,"_events",{}),N(this,"addListener",this.on)}getListeners(r){return this._events[r]?this._events[r].map(o=>o.listener):[]}on(r,o){this._events[r]||(this._events[r]=[]);const s=this._events[r];this._indexOfListener(s,o)===-1&&s.push({listener:o,once:!1})}once(r,o){this._events[r]||(this._events[r]=[]);const s=this._events[r];this._indexOfListener(s,o)===-1&&s.push({listener:o,once:!0})}off(r,o){if(!this._events[r])return;const s=this._events[r],l=this._indexOfListener(s,o);l!==-1&&s.splice(l,1),this._events[r].length===0&&delete this._events[r]}removeAllListeners(r){r?delete this._events[r]:this._events={}}emit(r){this._events[r]||(this._events[r]=[]);const o=this._events[r].map(m=>m);for(var s=arguments.length,l=new Array(s>1?s-1:0),h=1;h<s;h++)l[h-1]=arguments[h];for(let m=0;m<o.length;m+=1){const v=o[m];v.once&&this.off(r,v.listener),v.listener.apply(this,l||[])}}_indexOfListener(r,o){let s=r.length;for(;s--;)if(r[s].listener===o)return s;return-1}}const s0=new class extends Zn{reportLogUploadError(n){this.emit("REPORT_LOG_UPLOAD",n)}};let z;(function(n){n.UNEXPECTED_ERROR="UNEXPECTED_ERROR",n.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",n.TIMEOUT="TIMEOUT",n.INVALID_PARAMS="INVALID_PARAMS",n.NOT_READABLE="NOT_READABLE",n.NOT_SUPPORTED="NOT_SUPPORTED",n.INVALID_OPERATION="INVALID_OPERATION",n.OPERATION_ABORTED="OPERATION_ABORTED",n.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",n.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",n.NETWORK_ERROR="NETWORK_ERROR",n.NETWORK_TIMEOUT="NETWORK_TIMEOUT",n.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",n.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",n.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",n.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",n.ELECTRON_IS_NULL="ELECTRON_IS_NULL",n.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",n.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",n.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",n.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",n.PERMISSION_DENIED="PERMISSION_DENIED",n.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",n.TRACK_IS_DISABLED="TRACK_IS_DISABLED",n.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",n.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",n.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",n.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",n.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",n.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",n.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",n.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",n.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",n.UID_CONFLICT="UID_CONFLICT",n.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",n.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",n.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",n.INVALID_TRACK="INVALID_TRACK",n.SENDER_NOT_FOUND="SENDER_NOT_FOUND",n.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",n.SET_ANSWER_FAILED="SET_ANSWER_FAILED",n.ICE_FAILED="ICE_FAILED",n.PC_CLOSED="PC_CLOSED",n.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",n.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",n.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",n.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",n.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",n.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",n.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",n.INVALID_REMOTE_USER="INVALID_REMOTE_USER",n.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",n.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",n.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",n.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",n.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",n.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",n.WS_ABORT="WS_ABORT",n.WS_DISCONNECT="WS_DISCONNECT",n.WS_ERR="WS_ERR",n.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",n.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",n.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",n.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",n.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",n.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",n.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",n.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",n.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",n.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",n.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",n.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",n.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",n.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",n.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",n.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",n.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",n.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",n.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",n.INVALID_PLUGIN="INVALID_PLUGIN",n.DISCONNECT_P2P="DISCONNECT_P2P",n.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",n.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",n.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",n.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",n.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",n.PROHIBITED_OPERATION="PROHIBITED_OPERATION"})(z||(z={}));class Q extends Error{constructor(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=arguments.length>2?arguments[2]:void 0;super(o),N(this,"code",void 0),N(this,"message",void 0),N(this,"data",void 0),N(this,"name","AgoraRTCException"),this.code=r,this.message="AgoraRTCError ".concat(this.code,": ").concat(o),this.data=s}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),`
`).concat(this.stack):"".concat(this.stack)}print(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return r==="error"&&U.error(this.toString()),r==="warning"&&U.warning(this.toString()),this}throw(){throw this.print(),this}}const kr={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function Ty(n,r){const o=Math.floor(r.timeout*Math.pow(r.timeoutFactor,n));return Math.min(r.maxRetryTimeout,o)}function Vs(n,r,o,s){const l=Object.assign({},kr,s);let h=l.timeout;const m=async()=>{await function(T){return new Me(b=>{window.setTimeout(b,T)})}(h),h*=l.timeoutFactor,h=Math.min(l.maxRetryTimeout,h)};let v=!1;const S=new Me(async(T,b)=>{r=r||(()=>!1),o=o||(()=>!0);for(let I=0;I<l.maxRetryCount;I+=1){if(v)return b(new Q(z.OPERATION_ABORTED));try{const L=await n();if(!r(L,I)||I+1===l.maxRetryCount)return T(L);await m()}catch(L){if(!o(L,I)||I+1===l.maxRetryCount)return b(L);await m()}}});return S.cancel=()=>v=!0,S}function Ry(){const n=new Date;return n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()}function lx(){const n=new Date,r=/((\d+:){2}\d+)/.exec(new Date().toUTCString());return r?(r==null?void 0:r[0])+":"+n.getUTCMilliseconds():n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()}const ca={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},c0=Date.now(),sp=n=>{for(const r in ca)if(Object.prototype.hasOwnProperty.call(ca,r)&&ca[r]===n)return r;return"DEFAULT"},U=new class{constructor(){N(this,"proxyServerURL",void 0),N(this,"logLevel",ca.DEBUG),N(this,"uploadState","collecting"),N(this,"uploadLogWaitingList",[]),N(this,"uploadLogUploadingList",[]),N(this,"uploadErrorCount",0),N(this,"currentLogID",0),N(this,"url",void 0),N(this,"extLog",(n,r)=>{this.appendLogToWaitingList(n,...r)})}debug(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const s=[ca.DEBUG].concat(r);this.log.apply(this,s)}info(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const s=[ca.INFO].concat(r);this.log.apply(this,s)}warning(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const s=[ca.WARNING].concat(r);this.log.apply(this,s)}error(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const s=[ca.ERROR].concat(r);this.log.apply(this,s)}upload(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const s=[ca.DEBUG].concat(r);this.uploadLog.apply(this,s)}setLogLevel(n){n=Math.min(Math.max(0,n),4),this.logLevel=n}enableLogUpload(){Cn("UPLOAD_LOG",!0)}disableLogUpload(){Cn("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(n){this.proxyServerURL=n}prefix(n){return new x9(this).prefix(n)}log(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if(Date.now()-c0<100)return void setTimeout(()=>{this.log(...r)},Date.now()-c0);const s=Math.max(0,Math.min(4,r[0]));if(r[0]=Ry()+" Agora-SDK [".concat(sp(s),"]:"),this.appendLogToWaitingList(s,...r),s<this.logLevel)return;const l=Ry()+" %cAgora-SDK [".concat(sp(s),"]:");let h=[];if(!re("USE_NEW_LOG"))switch(s){case ca.DEBUG:h=[l,"color: #64B5F6;"].concat(r.slice(1)),console.log.apply(console,h);break;case ca.INFO:h=[l,"color: #1E88E5; font-weight: bold;"].concat(r.slice(1)),console.log.apply(console,h);break;case ca.WARNING:h=[l,"color: #FB8C00; font-weight: bold;"].concat(r.slice(1)),console.warn.apply(console,h);break;case ca.ERROR:h=[l,"color: #B00020; font-weight: bold;"].concat(r.slice(1)),console.error.apply(console,h)}}uploadLog(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if(Date.now()-c0<100)return void setTimeout(()=>{this.uploadLog(...r)},Date.now()-c0);const s=Math.max(0,Math.min(4,r[0]));r[0]=Ry()+" Agora-SDK [".concat(sp(s),"]:"),this.appendLogToWaitingList(s,...r)}appendLogToWaitingList(n){if(!re("UPLOAD_LOG"))return;for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];Array.isArray(o[0])?o[0][0]=lx()+" Agora-SDK [".concat(sp(n),"]:"):o[0]=lx()+" Agora-SDK [".concat(sp(n),"]:");let l="";o.forEach(h=>{typeof h=="object"&&(h=JSON.stringify(h)),l+="".concat(h," ")}),this.uploadLogWaitingList.push({payload_str:l,log_level:n,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){const n=this.uploadLogUploadingList,r={sdk_version:la,process_id:re("PROCESS_ID"),payload:JSON.stringify(n)};return Vs(async()=>{const o=await Pa.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(re("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(re("LOG_UPLOAD_SERVER"),"/upload/v1")),r,{responseType:"text"});if(o.data!=="OK"){const s=new Error("unexpected upload log response");throw s.response=o,s}},()=>(this.uploadLogUploadingList=[],!1),o=>(o.response?s0.reportLogUploadError({status:o.response.status,data:o.response.data,headers:o.response.headers,message:o.message}):o.request?s0.reportLogUploadError({status:o.request.status,message:o.message}):s0.reportLogUploadError({status:-1,message:o.message}),!0),{timeout:re("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:re("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,re("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),re("UPLOAD_LOG_INTERVAL"))}).catch(n=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),re("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),re("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},Iy="v4.18.0-0-gcacc234f-dirty(6/21/2023, 3:22:58 PM)",la=function(n){if(n.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return n;const r=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(r&&r[1]&&r[2]){const s=r[1],l=r[2];return"".concat(s,".").concat(l)}const o=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(o&&o[1]&&o[2]){const s=o[1],l=o[2];return"".concat(s,".").concat(100*(Number(l)+1))}return"4.0.0.999"}("4.18.0"),wy=function(){try{return JSON.parse("true")===!0}catch{return!0}}(),ux=["CHINA","GLOBAL"],Fo=function(){const n="us".concat("erna","me"),r="pa".concat("sswo","rd"),o=["t","s","t"];o.splice(1,0,"e");const s=o.join(""),l=[];for(let v=0;v<6;v++)l.push("1");const h=l.join(""),m={};return m[n]=s,m[r]=h,Object.assign(m,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=Fo;const P9={"90p":Gt(160,90),"90p_1":Gt(160,90),"120p":Gt(160,120,15,30,65),"120p_1":Gt(160,120,15,30,65),"120p_3":Gt(120,120,15,30,50),"120p_4":Gt(212,120),"180p":Gt(320,180,15,30,140),"180p_1":Gt(320,180,15,30,140),"180p_3":Gt(180,180,15,30,100),"180p_4":Gt(240,180,15,30,120),"240p":Gt(320,240,15,40,200),"240p_1":Gt(320,240,15,40,200),"240p_3":Gt(240,240,15,40,140),"240p_4":Gt(424,240,15,40,220),"360p":Gt(640,360,15,80,400),"360p_1":Gt(640,360,15,80,400),"360p_3":Gt(360,360,15,80,260),"360p_4":Gt(640,360,30,80,600),"360p_6":Gt(360,360,30,80,400),"360p_7":Gt(480,360,15,80,320),"360p_8":Gt(480,360,30,80,490),"360p_9":Gt(640,360,15,80,800),"360p_10":Gt(640,360,24,80,800),"360p_11":Gt(640,360,24,80,1e3),"480p":Gt(640,480,15,100,500),"480p_1":Gt(640,480,15,100,500),"480p_2":Gt(640,480,30,100,1e3),"480p_3":Gt(480,480,15,100,400),"480p_4":Gt(640,480,30,100,750),"480p_6":Gt(480,480,30,100,600),"480p_8":Gt(848,480,15,100,610),"480p_9":Gt(848,480,30,100,930),"480p_10":Gt(640,480,10,100,400),"720p":Gt(1280,720,15,120,1130),"720p_1":Gt(1280,720,15,120,1130),"720p_2":Gt(1280,720,30,120,2e3),"720p_3":Gt(1280,720,30,120,1710),"720p_5":Gt(960,720,15,120,910),"720p_6":Gt(960,720,30,120,1380),"1080p":Gt(1920,1080,15,120,2080),"1080p_1":Gt(1920,1080,15,120,2080),"1080p_2":Gt(1920,1080,30,120,3e3),"1080p_3":Gt(1920,1080,30,120,3150),"1080p_5":Gt(1920,1080,60,120,4780),"1440p":Gt(2560,1440,30,120,4850),"1440p_1":Gt(2560,1440,30,120,4850),"1440p_2":Gt(2560,1440,60,120,7350),"4k":Gt(3840,2160,30,120,8910),"4k_1":Gt(3840,2160,30,120,8910),"4k_3":Gt(3840,2160,60,120,13500)},D9={"480p":Da(640,480,5),"480p_1":Da(640,480,5),"480p_2":Da(640,480,30),"480p_3":Da(640,480,15),"720p":Da(1280,720,5),"720p_1":Da(1280,720,5),"720p_2":Da(1280,720,30),"720p_3":Da(1280,720,15),"1080p":Da(1920,1080,5),"1080p_1":Da(1920,1080,5),"1080p_2":Da(1920,1080,30),"1080p_3":Da(1920,1080,15)},k9={"1SL1TL":Ay(1,1),"3SL3TL":Ay(3,3),"2SL3TL":Ay(2,3)};function tu(n){return n||(n="480p_1"),typeof n=="string"?Object.assign({},P9[n]):n}function Oy(n){return typeof n=="string"?Object.assign({},D9[n]):n}function l0(n){return typeof n=="string"?Object.assign({},k9[n]):n}const L9={speech_low_quality:dd(16e3,!1),speech_standard:dd(32e3,!1,18),music_standard:dd(48e3,!1),standard_stereo:dd(48e3,!0,56),high_quality:dd(48e3,!1,128),high_quality_stereo:dd(48e3,!0,192)};function u0(n){return typeof n=="string"?Object.assign({},L9[n]):n}function Cn(n,r,o){Object.keys(io).includes(n)&&(!o&&Object.keys(nu).includes(n)||(io[n]=r))}function re(n){return io[n]}const io={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:ux,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TWCC:!1,PUBLISH_TWCC:!1,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_PUB_RTX:!1,USE_SUB_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,SVC:[],ENABLE_ENCODED_TRANSFORM:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0}},nu={};function dd(n,r,o){return{sampleRate:n,stereo:r,bitrate:o}}function Gt(n,r,o,s,l){return{width:n,height:r,frameRate:o,bitrateMin:s,bitrateMax:l}}function Da(n,r,o,s,l){return{width:{max:n},height:{max:r},frameRate:o,bitrateMin:s,bitrateMax:l}}function Ay(n,r){return{numSpatialLayers:n,numTemporalLayers:r}}wy||(io.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],io.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],io.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],io.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],io.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],io.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],io.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",io.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",io.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",io.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",io.AREAS=["NORTH_AMERICA","OVERSEA"]);const M9=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],ru=[],cp=[];function iu(n,r){return!!r&&ru.some(o=>o.uid===n&&o.channelName===r)}var U9=In,V9=ss,F9=ie,Ny=function(n,r,o){var s=U9(r);s in n?V9.f(n,s,F9(0,o)):n[s]=o},dx=eS,B9=$c,j9=Ny,$9=R.Array,H9=Math.max,hx=function(n,r,o){for(var s=B9(n),l=dx(r,s),h=dx(o===void 0?s:o,s),m=$9(H9(h-l,0)),v=0;l<h;l++,v++)j9(m,v,n[l]);return m.length=v,m},px=hx,W9=Math.floor,xy=function(n,r){var o=n.length,s=W9(o/2);return o<8?z9(n,r):G9(n,xy(px(n,0,s),r),xy(px(n,s),r),r)},z9=function(n,r){for(var o,s,l=n.length,h=1;h<l;){for(s=h,o=n[h];s&&r(n[s-1],o)>0;)n[s]=n[--s];s!==h++&&(n[s]=o)}return n},G9=function(n,r,o,s){for(var l=r.length,h=o.length,m=0,v=0;m<l||v<h;)n[m+v]=m<l&&v<h?s(r[m],o[v])<=0?r[m++]:o[v++]:m<l?r[m++]:o[v++];return n},K9=xy,fx=ke.match(/firefox\/(\d+)/i),Y9=!!fx&&+fx[1],q9=/MSIE|Trident/.test(ke),mx=ke.match(/AppleWebKit\/(\d+)\./),X9=!!mx&&+mx[1],J9=$i,gx=y,Q9=Mt,Z9=bi,eK=$c,vx=qu,Py=c,tK=K9,nK=q_,Ex=Y9,rK=q9,_x=zt,Sx=X9,Yc=[],yx=gx(Yc.sort),iK=gx(Yc.push),oK=Py(function(){Yc.sort(void 0)}),aK=Py(function(){Yc.sort(null)}),sK=nK("sort"),Cx=!Py(function(){if(_x)return _x<70;if(!(Ex&&Ex>3)){if(rK)return!0;if(Sx)return Sx<603;var n,r,o,s,l="";for(n=65;n<76;n++){switch(r=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:o=3;break;case 68:case 71:o=4;break;default:o=2}for(s=0;s<47;s++)Yc.push({k:r+s,v:o})}for(Yc.sort(function(h,m){return m.v-h.v}),s=0;s<Yc.length;s++)r=Yc[s].k.charAt(0),l.charAt(l.length-1)!==r&&(l+=r);return l!=="DGBEFHACIJK"}});J9({target:"Array",proto:!0,forced:oK||!aK||!sK||!Cx},{sort:function(n){n!==void 0&&Q9(n);var r=Z9(this);if(Cx)return n===void 0?yx(r):yx(r,n);var o,s,l=[],h=eK(r);for(s=0;s<h;s++)s in r&&iK(l,r[s]);for(tK(l,function(m){return function(v,S){return S===void 0?-1:v===void 0?1:m!==void 0?+m(v,S)||0:vx(v)>vx(S)?1:-1}}(n)),o=l.length,s=0;s<o;)r[s]=l[s++];for(;s<h;)delete r[s++];return r}});var cK=Hc("Array").sort,lK=C,uK=cK,Dy=Array.prototype,ky=function(n){var r=n.sort;return n===Dy||lK(Dy,n)&&r===Dy.sort?uK:r};function lp(n,r){if(typeof n!="boolean")throw new Q(z.INVALID_PARAMS,"Invalid ".concat(r,": The value is of the boolean type."))}function zr(n,r,o){if(!o.includes(n))throw new Q(z.INVALID_PARAMS,"".concat(r," can only be set as ").concat(JSON.stringify(o)))}function xn(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4,l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(n<o||n>s||l&&!dK(n))throw new Q(z.INVALID_PARAMS,"invalid ".concat(r,": the value range is [").concat(o,", ").concat(s,"]. integer only"))}function Ly(n,r){if(typeof n!="number"){if(!(n.min||n.max||n.ideal||n.exact))throw new Q(z.INVALID_PARAMS,"".concat(r," is not a valid ConstrainLong"));n.min!==void 0&&xn(n.min,"".concat(r,".min"),0,1/0),n.max!==void 0&&xn(n.max,"".concat(r,".max"),1,1/0),n.exact!==void 0&&xn(n.exact,"".concat(r,".exact"),1,1/0),n.ideal!==void 0&&xn(n.ideal,"".concat(r,".ideal"),1,1/0)}else xn(n,r,1,1/0)}function hi(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(n==null)throw new Q(z.INVALID_PARAMS,"".concat(r||"param"," cannot be empty"));if(!bx(n,o,s,l))throw new Q(z.INVALID_PARAMS,"Invalid ".concat(r||"string param",": Length of the string: [").concat(o,",").concat(s,"].").concat(l?" ASCII characters only.":""))}function hc(n,r){if(!Array.isArray(n))throw new Q(z.INVALID_PARAMS,"".concat(r," should be an array"))}function My(n){if(typeof n!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(n))throw U.error("Invalid Channel Name ".concat(n)),new Q(z.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function Uy(n){if(r=n,!(typeof r=="number"&&Math.floor(r)===r&&0<=r&&r<=4294967295||bx(n,1,255)))throw U.error("Invalid UID ".concat(n," ").concat(typeof n)),new Q(z.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var r;typeof n=="string"&&U.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function Bn(n){return n==null}function bx(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof n=="string"&&n.length<=o&&n.length>=r&&(!s||hK(n))}function dK(n){return typeof n=="number"&&n%1==0}function hK(n){if(typeof n!="string")return!1;for(let r=0;r<n.length;r+=1){const o=n.charCodeAt(r);if(o<0||o>255)return!1}return!0}let Tx,Rx,pi;(function(n){n.FREE="free",n.UPLOADING="uploading"})(Tx||(Tx={})),function(n){n[n.MISC=0]="MISC",n[n.INTERNAL_EVENT=1]="INTERNAL_EVENT",n[n.PUBLIC_EVENT=2]="PUBLIC_EVENT",n[n.WEB_EVENT=3]="WEB_EVENT",n[n.INTERNAL_API=4]="INTERNAL_API",n[n.WEB_API=5]="WEB_API",n[n.PUBLIC_API=6]="PUBLIC_API"}(Rx||(Rx={})),function(n){n.NONE="none",n.INIT="init",n.CANPLAY="canplay",n.PLAYING="playing",n.PAUSED="paused",n.SUSPEND="suspend",n.STALLED="stalled",n.WAITING="waiting",n.ERROR="error",n.DESTROYED="destroyed",n.ABORT="abort",n.ENDED="ended",n.EMPTIED="emptied",n.LOADEDDATA="loadeddata"}(pi||(pi={}));const Vy={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function pK(n){return hi(n.reportId,"params.reportId",0,100,!1),hi(n.category,"params.category",0,100,!1),hi(n.event,"params.event",0,100,!1),hi(n.label,"params.label",0,100,!1),xn(n.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}const fK={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let ni,Kn,Ix,Fy,Or,Yn,ou,pc,hd,up,Bo,fi,nt,By,sn,Ht,Wi,vn,Xe,ut,Co,kt,wx,oo;function Ox(n){return xn(n.timeout,"config.timeout",0,1e5),xn(n.timeoutFactor,"config.timeoutFactor",0,100,!1),xn(n.maxRetryCount,"config.maxRetryConfig",0,1/0),xn(n.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function mK(n){return zr(n.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),zr(n.mode,"config.mode",["rtc","live"]),n.audioCodec!==void 0&&zr(n.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),n.proxyServer!==void 0&&hi(n.proxyServer,"config.proxyServer",1,1e4),n.turnServer!==void 0&&Ax(n.turnServer),n.httpRetryConfig!==void 0&&Ox(n.httpRetryConfig),n.websocketRetryConfig!==void 0&&Ox(n.websocketRetryConfig),!0}function dp(n){if(!Array.isArray(n)||n.length<1)return!1;try{n.forEach(r=>{if(!r.urls)throw Error()})}catch{return!1}return!0}function Ax(n){return hi(n.turnServerURL,"turnServerURL"),hi(n.username,"username"),hi(n.password,"password"),n.udpport&&xn(n.udpport,"udpport",1,99999,!0),n.forceturn&&lp(n.forceturn,"forceturn"),n.security&&lp(n.security,"security"),n.tcpport&&xn(n.tcpport,"tcpport",1,99999,!0),!0}function Nx(n){return n.level!==void 0&&zr(n.level,"level",[1,2,3]),!0}(function(n){n.PUBLISH="publish",n.SUBSCRIBE="subscribe",n.WS_COMPRESSOR_INIT="ws_compressor_init",n.SESSION_INIT="session_init",n.JOIN_CHOOSE_SERVER="join_choose_server",n.REQ_USER_ACCOUNT="req_user_account",n.JOIN_GATEWAY="join_gateway",n.REJOIN_GATEWAY="rejoin_gateway",n.STREAM_SWITCH="stream_switch",n.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",n.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",n.FIRST_VIDEO_RECEIVED="first_video_received",n.FIRST_AUDIO_RECEIVED="first_audio_received",n.FIRST_VIDEO_DECODE="first_video_decode",n.FIRST_AUDIO_DECODE="first_audio_decode",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_UPDATE_STREAM="on_update_stream",n.ON_REMOVE_STREAM="on_remove_stream",n.USER_ANALYTICS="req_user_analytics",n.PC_STATS="pc_stats"})(ni||(ni={})),function(n){n.SESSION="io.agora.pb.Wrtc.Session",n.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",n.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",n.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",n.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",n.PUBLISH="io.agora.pb.Wrtc.Publish",n.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",n.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",n.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",n.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",n.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",n.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",n.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",n.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",n.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",n.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",n.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",n.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",n.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",n.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",n.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",n.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",n.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",n.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",n.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",n.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",n.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",n.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",n.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",n.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",n.PC_STATS="io.agora.pb.Wrtc.PCStats"}(Kn||(Kn={})),function(n){n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(Ix||(Ix={})),function(n){n[n.SESSION=26]="SESSION",n[n.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",n[n.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",n[n.JOIN_GATEWAY=28]="JOIN_GATEWAY",n[n.PUBLISH=30]="PUBLISH",n[n.SUBSCRIBE=29]="SUBSCRIBE",n[n.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",n[n.STREAM_SWITCH=32]="STREAM_SWITCH",n[n.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",n[n.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",n[n.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",n[n.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",n[n.API_INVOKE=41]="API_INVOKE",n[n.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",n[n.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",n[n.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",n[n.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",n[n.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",n[n.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",n[n.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",n[n.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",n[n.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",n[n.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",n[n.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",n[n.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",n[n.USER_ANALYTICS=1e4]="USER_ANALYTICS",n[n.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(Fy||(Fy={})),function(n){n.CREATE_CLIENT="createClient",n.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",n.SET_AREA="setArea",n.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",n.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",n.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",n.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",n.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",n.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",n.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",n.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",n.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",n.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",n.START_PROXY_SERVER="Client.startProxyServer",n.STOP_PROXY_SERVER="Client.stopProxyServer",n.SET_PROXY_SERVER="Client.setProxyServer",n.SET_TURN_SERVER="Client.setTurnServer",n.SET_CLIENT_ROLE="Client.setClientRole",n.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",n.ENABLE_DUAL_STREAM="Client.enableDualStream",n.DISABLE_DUAL_STREAM="Client.disableDualStream",n.JOIN="Client.join",n.LEAVE="Client.leave",n.PUBLISH="Client.publish",n.UNPUBLISH="Client.unpublish",n.SUBSCRIBE="Client.subscribe",n.MASS_SUBSCRIBE="Client.massSubscribe",n.MASS_UNSUBSCRIBE="Client.massUnsubscribe",n.UNSUBSCRIBE="Client.unsubscribe",n.RENEW_TOKEN="Client.renewToken",n.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",n.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",n.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",n.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",n.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",n.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",n.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",n.DATACHANNEL_FAILBACK="Client._datachannelFailback",n.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",n.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",n.START_LIVE_STREAMING="Client.startLiveStreaming",n.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",n.STOP_LIVE_STREAMING="Client.stopLiveStreaming",n.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",n.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",n.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",n.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",n.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",n.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",n.SET_CONFIG_DISTRIBUTE="_configDistribute",n.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",n.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",n.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",n.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",n.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",n.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",n.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",n.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",n.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",n.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",n.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",n.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",n.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",n.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",n.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",n.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",n.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",n.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",n.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",n.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",n.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",n.STREAM_TYPE_CHANGE="streamTypeChange",n.CONNECTION_STATE_CHANGE="connectionStateChange",n.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage"}(Or||(Or={})),function(n){n.TRACER="tracer"}(Yn||(Yn={})),function(n){n.IDLE="IDLE",n.INITING="INITING",n.INITEND="INITEND"}(ou||(ou={})),function(n){n.STATE_CHANGE="state_change",n.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",n.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",n.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(pc||(pc={})),function(n){n[n.ACCESS_POINT=101]="ACCESS_POINT",n[n.UNILBS=201]="UNILBS",n[n.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(hd||(hd={})),function(n){n[n.IIIEGAL_APPID=1]="IIIEGAL_APPID",n[n.IIIEGAL_UID=2]="IIIEGAL_UID",n[n.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(up||(up={})),function(n){n[n.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",n[n.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",n[n.INTERNAL_ERROR=8]="INTERNAL_ERROR",n[n.NO_AUTHORIZED=9]="NO_AUTHORIZED",n[n.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",n[n.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",n[n.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",n[n.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",n[n.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",n[n.USER_OVERLOAD=16]="USER_OVERLOAD",n[n.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",n[n.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(Bo||(Bo={})),function(n){n[n.NO_FLAG_SET=100]="NO_FLAG_SET",n[n.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",n[n.INVALID_FALG_SET=102]="INVALID_FALG_SET",n[n.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",n[n.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",n[n.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",n[n.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",n[n.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",n[n.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",n[n.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",n[n.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",n[n.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",n[n.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",n[n.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",n[n.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",n[n.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",n[n.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",n[n.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",n[n.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(fi||(fi={})),function(n){n[n.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",n[n.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",n[n.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",n[n.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",n[n.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",n[n.K_TICKET_INVALID=7]="K_TICKET_INVALID",n[n.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",n[n.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",n[n.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",n[n.K_UID_BANNED=14]="K_UID_BANNED",n[n.K_IP_BANNED=15]="K_IP_BANNED",n[n.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",n[n.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",n[n.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",n[n.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",n[n.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",n[n.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",n[n.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",n[n.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",n[n.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",n[n.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",n[n.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",n[n.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",n[n.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",n[n.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",n[n.ERR_INVALID_UID=117]="ERR_INVALID_UID",n[n.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",n[n.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",n[n.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",n[n.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",n[n.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",n[n.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",n[n.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",n[n.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",n[n.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",n[n.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",n[n.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",n[n.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",n[n.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",n[n.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",n[n.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",n[n.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",n[n.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",n[n.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",n[n.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",n[n.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",n[n.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",n[n.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",n[n.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",n[n.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",n[n.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",n[n.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",n[n.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",n[n.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",n[n.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",n[n.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",n[n.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",n[n.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",n[n.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",n[n.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",n[n.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",n[n.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",n[n.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(nt||(nt={})),function(n){n[n.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",n[n.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",n[n.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(By||(By={})),function(n){n.LEAVE="LEAVE",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.UID_BANNED="UID_BANNED",n.IP_BANNED="IP_BANNED",n.CHANNEL_BANNED="CHANNEL_BANNED",n.FALLBACK="FALLBACK",n.LICENSE_MISSING="LICENSE_MISSING",n.LICENSE_EXPIRED="LICENSE_EXPIRED",n.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",n.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",n.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",n.LICENSE_ILLEGAL="LICENSE_ILLEGAL"}(sn||(sn={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.MEDIA_RECONNECT_START="media-reconnect-start",n.MEDIA_RECONNECT_END="media-reconnect-end",n.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",n.USER_JOINED="user-joined",n.USER_LEAVED="user-left",n.USER_PUBLISHED="user-published",n.USER_UNPUBLISHED="user-unpublished",n.USER_INFO_UPDATED="user-info-updated",n.CLIENT_BANNED="client-banned",n.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",n.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",n.VOLUME_INDICATOR="volume-indicator",n.CRYPT_ERROR="crypt-error",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGED="stream-type-changed",n.STREAM_FALLBACK="stream-fallback",n.RECEIVE_METADATA="receive-metadata",n.STREAM_MESSAGE="stream-message",n.LIVE_STREAMING_ERROR="live-streaming-error",n.LIVE_STREAMING_WARNING="live-streaming-warning",n.INJECT_STREAM_STATUS="stream-inject-status",n.EXCEPTION="exception",n.ERROR="error",n.P2P_LOST="p2p_lost",n.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",n.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",n.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",n.PUBLISHED_USER_LIST="published-user-list",n.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",n.CONTENT_INSPECT_ERROR="content-inspect-error",n.CONTENT_INSPECT_RESULT="content-inspect-result"}(Ht||(Ht={})),function(n){n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.MULTI_IP="MULTI_IP",n.TIMEOUT="TIMEOUT",n.OFFLINE="OFFLINE",n.LEAVE="LEAVE",n.P2P_FAILED="P2P_FAILED",n.FALLBACK="FALLBACK"}(Wi||(Wi={})),function(n){n.CONNECTING="connecting",n.CONNECTED="connected",n.RECONNECTING="reconnecting",n.CLOSED="closed"}(vn||(vn={})),function(n){n.WS_CONNECTED="ws_connected",n.WS_RECONNECTING="ws_reconnecting",n.WS_CLOSED="ws_closed",n.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",n.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",n.ON_BINARY_DATA="on_binary_data",n.REQUEST_RECOVER="request_recover",n.REQUEST_JOIN_INFO="request_join_info",n.REQUEST_REJOIN_INFO="req_rejoin_info",n.IS_P2P_DISCONNECTED="is_p2p_dis",n.DISCONNECT_P2P="dis_p2p",n.ABORT_P2P_EXECUTION="abort_p2p_execution",n.NEED_RENEW_SESSION="need-sid",n.REPORT_JOIN_GATEWAY="report_join_gateway",n.REQUEST_TIMEOUT="request_timeout",n.REQUEST_SUCCESS="request_success",n.JOIN_RESPONSE="join_response",n.DATACHANNEL_PRECONNECT="datachannel_preconnect",n.DATACHANNEL_CONNECTING="datachannel_connecting",n.DATACHANNEL_FAILBACK="datachannel_failback"}(Xe||(Xe={})),function(n){n.PING="ping",n.PING_BACK="ping_back",n.JOIN="join_v3",n.REJOIN="rejoin_v3",n.LEAVE="leave",n.SET_CLIENT_ROLE="set_client_role",n.PUBLISH="publish",n.UNPUBLISH="unpublish",n.SUBSCRIBE="subscribe",n.SUBSCRIBE_STREAMS="subscribe_streams",n.UNSUBSCRIBE="unsubscribe",n.UNSUBSCRIBE_STREAMS="unsubscribe_streams",n.SUBSCRIBE_CHANGE="subscribe_change",n.TRAFFIC_STATS="traffic_stats",n.RENEW_TOKEN="renew_token",n.SWITCH_VIDEO_STREAM="switch_video_stream",n.DEFAULT_VIDEO_STREAM="default_video_stream",n.SET_FALLBACK_OPTION="set_fallback_option",n.GATEWAY_INFO="gateway_info",n.CONTROL="control",n.SEND_METADATA="send_metadata",n.DATA_STREAM="data_stream",n.PICK_SVC_LAYER="pick_svc_layer",n.RESTART_ICE="restart_ice",n.CONNECT_PC="connect_pc",n.SET_VIDEO_PROFILE="set_video_profile",n.SET_PARAMETER="set_parameter"}(ut||(ut={})),function(n){n.PUBLISH_STATS="publish_stats",n.PUBLISH_RELATED_STATS="publish_related_stats",n.SUBSCRIBE_STATS="subscribe_stats",n.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",n.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",n.DENOISER_STATS="denoiser_stats",n.TRANSPORT_STATS="transport_stats",n.EXTENSION_USAGE_STATS="extension_usage_stats"}(Co||(Co={})),function(n){n.ON_USER_ONLINE="on_user_online",n.ON_USER_OFFLINE="on_user_offline",n.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",n.ON_PUBLISH_STREAM="on_publish_stream",n.ON_UPLINK_STATS="on_uplink_stats",n.ON_P2P_LOST="on_p2p_lost",n.ON_REMOVE_STREAM="on_remove_stream",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",n.ON_USER_BANNED="on_user_banned",n.ON_USER_LICENSE_BANNED="on_user_license_banned",n.ON_NOTIFICATION="on_notification",n.ON_CRYPT_ERROR="on_crypt_error",n.MUTE_AUDIO="mute_audio",n.MUTE_VIDEO="mute_video",n.UNMUTE_AUDIO="unmute_audio",n.UNMUTE_VIDEO="unmute_video",n.ON_P2P_OK="on_p2p_ok",n.RECEIVE_METADATA="receive_metadata",n.ON_DATA_STREAM="on_data_stream",n.ENABLE_LOCAL_VIDEO="enable_local_video",n.DISABLE_LOCAL_VIDEO="disable_local_video",n.ENABLE_LOCAL_AUDIO="enable_local_audio",n.DISABLE_LOCAL_AUDIO="disable_local_audio",n.ON_PUBLISHED_USER_LIST="on_published_user_list"}(kt||(kt={})),function(n){n.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",n.NEED_ANSWER="NEED_ANSWER",n.NEED_RENEGOTIATE="NEED_RENEGOTIATE",n.P2P_LOST="P2P_LOST",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NEED_UNPUB="NEED_UNPUB",n.NEED_UNSUB="NEED_UNSUB",n.NEED_UPLOAD="NEED_UPLOAD",n.NEED_CONTROL="NEED_CONTROL",n.START_RECONNECT="START_RECONNECT",n.END_RECONNECT="END_RECONNECT",n.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(wx||(wx={})),function(n){n.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",n.RECEIVE_TRACK_BUFFER="receive_track_buffer",n.ON_AUDIO_BUFFER="on_audio_buffer",n.UPDATE_SOURCE="update_source"}(oo||(oo={}));const jy={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},$y={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},xx={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},gK={uplinkNetworkQuality:0,downlinkNetworkQuality:0},Px={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let Nt,Ar,qc;(function(n){n.CONNECTED="websocket:connected",n.RECONNECTING="websocket:reconnecting",n.WILL_RECONNECT="websocket:will_reconnect",n.CLOSED="websocket:closed",n.FAILED="websocket:failed",n.ON_MESSAGE="websocket:on_message",n.REQUEST_NEW_URLS="websocket:request_new_urls",n.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",n.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire"})(Nt||(Nt={})),function(n){n.TRANSCODE="mix_streaming",n.RAW="raw_streaming",n.INJECT="inject_streaming"}(Ar||(Ar={})),function(n){n[n.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",n[n.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",n[n.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",n[n.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",n[n.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",n[n.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",n[n.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",n[n.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",n[n.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(qc||(qc={}));const vK={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},Hy={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function Wy(n,r){hi(n.url,"".concat(r,".url"),1,1e3,!1),Bn(n.x)||xn(n.x,"".concat(r,".x"),0,1e4),Bn(n.y)||xn(n.y,"".concat(r,".y"),0,1e4),Bn(n.width)||xn(n.width,"".concat(r,".width"),0,1e4),Bn(n.height)||xn(n.height,"".concat(r,".height"),0,1e4),Bn(n.zOrder)||xn(n.zOrder,"".concat(r,".zOrder"),0,255),Bn(n.alpha)||xn(n.alpha,"".concat(r,".alpha"),0,1,!1)}const EK={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},_K={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let ka,pd,ur,Dx,mi,us,Mi,Xc,Nr,Wn,Cr,d0,dt,Lr,fd,zy,Gy,hp,Jc,md,Kt;function kx(n){if(!n.channelName)throw new Q(z.INVALID_PARAMS,"invalid channelName in info");if(typeof n.uid!="number")throw new Q(z.INVALID_PARAMS,"invalid uid in info, uid must be a number");return n.token&&hi(n.token,"info.token",1,2047),Uy(n.uid),My(n.channelName),!0}function Lx(n){return zr(n,"mediaSource",["screen","window","application"]),!0}(function(n){n.WARNING="@live_uap-warning",n.ERROR="@line_uap-error",n.PUBLISH_STREAM_STATUS="@live_uap-publish-status",n.INJECT_STREAM_STATUS="@live_uap-inject-status",n.WORKER_STATUS="@live_uap-worker-status",n.REQUEST_NEW_ADDRESS="@live_uap-request-address"})(ka||(ka={})),function(n){n.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(pd||(pd={})),function(n){n[n.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",n[n.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",n[n.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",n[n.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",n[n.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",n[n.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",n[n.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",n[n.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",n[n.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",n[n.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",n[n.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",n[n.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",n[n.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",n[n.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",n[n.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",n[n.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(ur||(ur={})),function(n){n.CONNECT_FAILED="connect failed",n.CONNECT_TIMEOUT="connect timeout",n.WS_DISCONNECTED="websocket disconnected",n.REQUEST_TIMEOUT="request timeout",n.REQUEST_FAILED="request failed",n.WAIT_STATUS_TIMEOUT="wait status timeout",n.WAIT_STATUS_ERROR="wait status error",n.BAD_STATE="bad state",n.WS_ABORT="ws abort",n.AP_REQUEST_TIMEOUT="AP request timeout",n.AP_JSON_PARSE_ERROR="AP json parse error",n.AP_REQUEST_ERROR="AP request error",n.AP_REQUEST_ABORT="AP request abort"}(Dx||(Dx={})),function(n){n[n.SetSdkProfile=0]="SetSdkProfile",n[n.SetSourceChannel=1]="SetSourceChannel",n[n.SetSourceUserId=2]="SetSourceUserId",n[n.SetDestChannel=3]="SetDestChannel",n[n.StartPacketTransfer=4]="StartPacketTransfer",n[n.StopPacketTransfer=5]="StopPacketTransfer",n[n.UpdateDestChannel=6]="UpdateDestChannel",n[n.Reconnect=7]="Reconnect",n[n.SetVideoProfile=8]="SetVideoProfile"}(mi||(mi={})),function(n){n.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",n.NETWORK_CONNECTED="NETWORK_CONNECTED",n.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",n.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",n.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",n.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",n.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",n.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",n.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",n.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(us||(us={})),function(n){n.RELAY_STATE_IDLE="RELAY_STATE_IDLE",n.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",n.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",n.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(Mi||(Mi={})),function(n){n.RELAY_OK="RELAY_OK",n.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",n.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",n.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(Xc||(Xc={})),function(n){n.High="high",n.Low="low",n.Audio="audio",n.Screen="screen",n.ScreenLow="screen_low"}(Nr||(Nr={})),function(n){n.DISCONNECT="disconnect",n.CONNECTION_STATE_CHANGE="connection-state-change",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGE="stream-type-change",n.IS_P2P_DISCONNECTED="is-p2p-dis",n.DISCONNECT_P2P="dis-p2p",n.REQUEST_NEW_GATEWAY_LIST="req-gate-url",n.NEED_RENEW_SESSION="need-sid",n.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",n.JOIN_RESPONSE="join-response",n.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",n.RESET_CONNECTION_EVENTS="reset-connection-events",n.DATACHANNEL_PRECONNECT="datachannel_preconnect",n.DATACHANNEL_FAILBACK="datachannel_failback",n.RESET_SIGNAL="reset-signal"}(Wn||(Wn={})),function(n){n[n.Nothing=0]="Nothing",n[n.Audio=1]="Audio",n[n.LwoVideo=2]="LwoVideo",n[n.Video=4]="Video",n[n.Data=8]="Data"}(Cr||(Cr={})),function(n){n[n.websocket=0]="websocket",n[n.datachannel=1]="datachannel"}(d0||(d0={})),function(n){n.NEED_RENEGOTIATE="@need_renegotiate",n.NEED_REPLACE_TRACK="@need_replace_track",n.NEED_CLOSE="@need_close",n.NEED_ENABLE_TRACK="@need_enable_track",n.NEED_DISABLE_TRACK="@need_disable_track",n.NEED_SESSION_ID="@need_sid",n.SET_OPTIMIZATION_MODE="@set_optimization_mode",n.GET_STATS="@get_stats",n.GET_LOW_VIDEO_TRACK="@get_low_video_track",n.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",n.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",n.NEED_MUTE_TRACK="@need_mute_track",n.NEED_UNMUTE_TRACK="@need_unmute_track"}(dt||(dt={})),function(n){n.SCREEN_TRACK="screen_track",n.CUSTOM_TRACK="custome_track",n.LOW_STREAM="low_stream"}(Lr||(Lr={})),function(n){n[n.HIGH_STREAM=0]="HIGH_STREAM",n[n.LOW_STREAM=1]="LOW_STREAM"}(fd||(fd={})),function(n){n[n.HIGH_STREAM=0]="HIGH_STREAM",n[n.LOW_STREAM=1]="LOW_STREAM"}(zy||(zy={})),function(n){n[n.DISABLE=0]="DISABLE",n[n.LOW_STREAM=1]="LOW_STREAM",n[n.AUDIO_ONLY=2]="AUDIO_ONLY"}(Gy||(Gy={})),function(n){n.TRANSCEIVER_UPDATED="transceiver-updated"}(hp||(hp={})),function(n){n.SOURCE_STATE_CHANGE="source-state-change",n.TRACK_ENDED="track-ended",n.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",n.CLOSED="closed"}(Jc||(Jc={})),function(n){n.FIRST_FRAME_DECODED="first-frame-decoded",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(md||(md={})),function(n){n.CHINA="CHINA",n.ASIA="ASIA",n.NORTH_AMERICA="NORTH_AMERICA",n.EUROPE="EUROPE",n.JAPAN="JAPAN",n.INDIA="INDIA",n.KOREA="KOREA",n.HKMC="HKMC",n.US="US",n.OCEANIA="OCEANIA",n.SOUTH_AMERICA="SOUTH_AMERICA",n.AFRICA="AFRICA",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL",n.EXTENSIONS="EXTENSIONS"}(Kt||(Kt={}));const SK=[Kt.AFRICA,Kt.ASIA,Kt.CHINA,Kt.EUROPE,Kt.GLOBAL,Kt.INDIA,Kt.JAPAN,Kt.NORTH_AMERICA,Kt.OCEANIA,Kt.OVERSEA,Kt.SOUTH_AMERICA];let Gr;(function(n){n.CHINA="CN",n.ASIA="AS",n.NORTH_AMERICA="NA",n.EUROPE="EU",n.JAPAN="JP",n.INDIA="IN",n.KOREA="KR",n.HKMC="HK",n.US="US",n.OCEANIA="OC",n.SOUTH_AMERICA="SA",n.AFRICA="AF",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL",n.EXTENSIONS="GLOBAL"})(Gr||(Gr={}));const h0={CHINA:{},ASIA:{CODE:Gr.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Gr.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Gr.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Gr.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","	uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Gr.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Gr.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:Gr.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:Gr.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Gr.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Gr.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Gr.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Gr.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Gr.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};let pp,Mx,It,ri,ds,We,Mr,Yt,Ti,Qc,gi,ao,jo,$o,xr,Fs,er,hs;wy&&(h0.CHINA={CODE:Gr.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(n){n.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(pp||(pp={}));class p0 extends Zn{constructor(r,o){super(),N(this,"onICEConnectionStateChange",void 0),N(this,"onConnectionStateChange",void 0),N(this,"onDTLSTransportStateChange",void 0),N(this,"onDTLSTransportError",void 0),N(this,"onICETransportStateChange",void 0),N(this,"onFirstAudioReceived",void 0),N(this,"onFirstVideoReceived",void 0),N(this,"onFirstAudioDecoded",void 0),N(this,"onFirstVideoDecoded",void 0),N(this,"onFirstVideoDecodedTimeout",void 0),N(this,"onSelectedLocalCandidateChanged",void 0),N(this,"onSelectedRemoteCandidateChanged",void 0),N(this,"establishPromise",void 0)}}(function(n){n.SEND="sendonly",n.RECV="recvonly",n.SENDRECV="sendrecv",n.INACTIVE="inactive"})(Mx||(Mx={})),function(n){n.VIDEO="video",n.AUDIO="audio"}(It||(It={})),function(n){n[n.UDP=0]="UDP",n[n.TCP=1]="TCP",n[n.RELAY=2]="RELAY"}(ri||(ri={})),function(n){n[n.FIRST_CONNECTION=0]="FIRST_CONNECTION",n[n.TCP_RESTART=1]="TCP_RESTART",n[n.RELAY_RESTART=2]="RELAY_RESTART",n[n.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",n[n.OLD_RESTART=11]="OLD_RESTART",n[n.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED"}(ds||(ds={})),function(n){n.LocalVideoTrack="videoTrack",n.LocalAudioTrack="audioTrack",n.LocalVideoLowTrack="videoLowTrack"}(We||(We={})),function(n){n.New="new",n.Connected="connected",n.Reconnecting="reconnecting",n.Disconnected="disconnected"}(Mr||(Mr={})),function(n){n.StateChange="stateChange",n.IceConnectionStateChange="iceConnectionStateChange",n.RequestMuteLocal="requestMuteLocal",n.RequestUnmuteLocal="requestUnmuteLocal",n.RequestRePublish="requestRePublish",n.RequestReSubscribe="requestReSubscribe",n.RequestUploadStats="requestUploadStats",n.MediaReconnectStart="MediaReconnectStart",n.MediaReconnectEnd="MediaReconnectEnd",n.NeedSignalRTT="NeedSignalRTT",n.RequestRestartICE="RequestRestartIce",n.PeerConnectionStateChange="PeerConnectionStateChange",n.RequestReconnect="RequestReconnect",n.RequestReconnectPC="RequestReconnectPC",n.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",n.P2PLost="P2PLost",n.UpdateVideoEncoder="UpdateVideoEncoder",n.ConnectionTypeChange="ConnectionTypeChange",n.RequestLowStreamParameter="RequestLowStreamParameter",n.QueryClientConnectionState="QueryClientConnectionState"}(Yt||(Yt={})),function(n){n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(Ti||(Ti={})),function(n){n.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(Qc||(Qc={})),function(n){n.ON_TRACK="on_track",n.ON_NODE="on_node"}(gi||(gi={})),function(n){n.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",n.REQUEST_CONSTRAINTS="request_constraints"}(ao||(ao={})),function(n){n.CONNECTING="CONNECTING",n.RECONNECTING="RECONNECTING",n.CONNECTED="CONNECTED",n.CLOSED="CLOSED"}(jo||(jo={})),function(n){n[n.CONNECT_AP=0]="CONNECT_AP",n[n.AP_CONNECTED=1]="AP_CONNECTED",n[n.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",n[n.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",n[n.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",n[n.CONNECT_WORKER=5]="CONNECT_WORKER",n[n.WORKER_CONNECTED=6]="WORKER_CONNECTED",n[n.CLOSED=7]="CLOSED"}($o||($o={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.STATE_CHANGE="state-change",n.INSPECT_RESULT="inspect-result",n.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",n.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(xr||(xr={})),function(n){n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.MULTI_IP="MULTI_IP",n.TIMEOUT="TIMEOUT",n.OFFLINE="OFFLINE",n.LEAVE="LEAVE",n.P2P_FAILED="P2P_FAILED",n.FALLBACK="FALLBACK"}(Fs||(Fs={})),function(n){n.CONNECTED="transmitter:connected",n.RECONNECTING="transmitter:reconnecting",n.WILL_RECONNECT="transmitter:will_reconnect",n.CLOSED="transmitter:closed",n.FAILED="transmitter:failed",n.ON_MESSAGE="transmitter:on_message",n.REQUEST_NEW_URLS="transmitter:request_new_urls",n.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",n.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",n.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",n.FAILBACK="transmitter:failback"}(er||(er={})),function(n){n.CAMERA_CHANGED="camera-changed",n.MICROPHONE_CHANGED="microphone-changed",n.PLAYBACK_DEVICE_CHANGED="playback-device-changed",n.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",n.AUTOPLAY_FAILED="autoplay-failed",n.SECURITY_POLICY_VIOLATION="security-policy-violation"}(hs||(hs={}));const Ri={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1};function gr(){return Ri}let jr;(function(n){n[n.CHOOSE_SERVER=11]="CHOOSE_SERVER",n[n.CLOUD_PROXY=18]="CLOUD_PROXY",n[n.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",n[n.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"})(jr||(jr={}));var yK=ge,fp=Array.isArray||function(n){return yK(n)=="Array"},CK=R,Ux=fp,bK=CS,TK=Pe,RK=Xn("species"),Vx=CK.Array,IK=function(n){var r;return Ux(n)&&(r=n.constructor,(bK(r)&&(r===Vx||Ux(r.prototype))||TK(r)&&(r=r[RK])===null)&&(r=void 0)),r===void 0?Vx:r},Fx=function(n,r){return new(IK(n))(r===0?0:r)},wK=Xh,OK=be,AK=bi,NK=$c,xK=Fx,Bx=y([].push),Zc=function(n){var r=n==1,o=n==2,s=n==3,l=n==4,h=n==6,m=n==7,v=n==5||h;return function(S,T,b,I){for(var L,V,K=AK(S),Y=OK(K),q=wK(T,b),ue=NK(Y),me=0,ye=I||xK,qe=r?ye(S,ue):o||m?ye(S,0):void 0;ue>me;me++)if((v||me in Y)&&(V=q(L=Y[me],me,K),n))if(r)qe[me]=V;else if(V)switch(n){case 3:return!0;case 5:return L;case 6:return me;case 2:Bx(qe,L)}else switch(n){case 4:return!1;case 7:Bx(qe,L)}return h?-1:s||l?l:qe}},jx={forEach:Zc(0),map:Zc(1),filter:Zc(2),some:Zc(3),every:Zc(4),find:Zc(5),findIndex:Zc(6),filterReject:Zc(7)},PK=jx.forEach,$x=q_("forEach")?[].forEach:function(n){return PK(this,n,arguments.length>1?arguments[1]:void 0)};$i({target:"Array",proto:!0,forced:[].forEach!=$x},{forEach:$x});var DK=Hc("Array").forEach,kK=zc,LK=Hn,MK=C,UK=DK,Ky=Array.prototype,VK={DOMTokenList:!0,NodeList:!0},FK=function(n){var r=n.forEach;return n===Ky||MK(Ky,n)&&r===Ky.forEach||LK(VK,kK(n))?UK:r},BK=bi,Hx=oS;$i({target:"Object",stat:!0,forced:c(function(){Hx(1)})},{keys:function(n){return Hx(BK(n))}});var jK=Ye.Object.keys,$K=Y1,HK=$i,WK=fp,zK=y([].reverse),Wx=[1,2];HK({target:"Array",proto:!0,forced:String(Wx)===String(Wx.reverse())},{reverse:function(){return WK(this)&&(this.length=this.length),zK(this)}});var GK=Hc("Array").reverse,KK=C,YK=GK,Yy=Array.prototype,qK=function(n){var r=n.reverse;return n===Yy||KK(Yy,n)&&r===Yy.reverse?YK:r},XK=c,JK=zt,QK=Xn("species"),zx=function(n){return JK>=51||!XK(function(){var r=[];return(r.constructor={})[QK]=function(){return{foo:1}},r[n](Boolean).foo!==1})},ZK=$i,eY=R,Gx=fp,tY=CS,nY=Pe,Kx=eS,rY=$c,iY=ze,oY=Ny,aY=Xn,sY=bS,cY=zx("slice"),lY=aY("species"),qy=eY.Array,uY=Math.max;ZK({target:"Array",proto:!0,forced:!cY},{slice:function(n,r){var o,s,l,h=iY(this),m=rY(h),v=Kx(n,m),S=Kx(r===void 0?m:r,m);if(Gx(h)&&(o=h.constructor,(tY(o)&&(o===qy||Gx(o.prototype))||nY(o)&&(o=o[lY])===null)&&(o=void 0),o===qy||o===void 0))return sY(h,v,S);for(s=new(o===void 0?qy:o)(uY(S-v,0)),l=0;v<S;v++,l++)v in h&&oY(s,l,h[v]);return s.length=l,s}});var dY=Hc("Array").slice,hY=C,pY=dY,Xy=Array.prototype,fY=function(n){var r=n.slice;return n===Xy||hY(Xy,n)&&r===Xy.slice?pY:r};function _e(n,r,o,s,l){var h,m,v,S={};return FK(h=jK(s)).call(h,function(T){S[T]=s[T]}),S.enumerable=!!S.enumerable,S.configurable=!!S.configurable,("value"in S||S.initializer)&&(S.writable=!0),S=$K(m=qK(v=fY(o).call(o)).call(v)).call(m,function(T,b){return b(n,r,T)||T},S),l&&S.initializer!==void 0&&(S.value=S.initializer?S.initializer.call(l):void 0,S.initializer=void 0),S.initializer===void 0&&(LN(n,r,S),S=null),S}var mY=Hc("Array").keys,gY=zc,vY=Hn,EY=C,_Y=mY,Jy=Array.prototype,SY={DOMTokenList:!0,NodeList:!0},au=function(n){var r=n.keys;return n===Jy||EY(Jy,n)&&r===Jy.keys||vY(SY,gY(n))?_Y:r};function Yx(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function qx(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?Yx(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Yx(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let f0=0,Qy=0;function ps(n,r,o,s){return new Me((l,h)=>{r.timeout=r.timeout||re("HTTP_CONNECT_TIMEOUT"),r.responseType=r.responseType||"json",r.data&&!o?(r.data=JSON.stringify(r.data),f0+=yd(r.data)):o&&(r.data.size?f0+=r.data.size:r.data instanceof FormData?f0+=function(m){let v=0;return/DingTalk/i.test(navigator.userAgent)&&m.realFormData&&(m=m.realFormData),m.forEach(S=>{v+=typeof S=="string"?yd(S):S.size}),v+138}(r.data):f0+=yd(JSON.stringify(r.data))),r.headers=r.headers||{},r.headers["Content-Type"]=r.headers["Content-Type"]||"application/json",r.method="POST",r.url=n,Pa.request(r).then(m=>{typeof m.data=="string"?Qy+=yd(m.data):m.data instanceof ArrayBuffer||m.data instanceof Uint8Array?Qy+=m.data.byteLength:Qy+=yd(JSON.stringify(m.data)),s&&l({data:m.data,headers:m.headers}),l(m.data)}).catch(m=>{Pa.isCancel(m)?h(new Q(z.OPERATION_ABORTED,"cancel token canceled")):m.code==="ECONNABORTED"?h(new Q(z.NETWORK_TIMEOUT,m.message)):m.response?h(new Q(z.NETWORK_RESPONSE_ERROR,m.response.status)):h(new Q(z.NETWORK_ERROR,m.message))})})}async function yY(n,r){const o=new Blob([r.data],{type:"buffer"});return await ps(n,qx(qx({},r),{},{data:o,headers:{"Content-Type":"application/octet-stream"}}),!0)}const br=new class extends Zn{set networkState(n){U.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+n),this.emit(Qc.NETWORK_STATE_CHANGE,n,this._networkState),n===Ti.ONLINE?this.emit(Qc.ONLINE):n===Ti.OFFLINE&&(this.onlineWaiter=new Me(r=>{this.once(Qc.ONLINE,()=>{this.onlineWaiter=void 0,r(Ti.ONLINE)})}),this.emit(Qc.OFFLINE)),this._networkState=n}get networkState(){return this._networkState}constructor(){super(),N(this,"_moduleName","network-indicator"),N(this,"_networkState",Ti.ONLINE),N(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=Ti.ONLINE}),window.addEventListener("offline",()=>{this.networkState=Ti.OFFLINE})}};let Zy=!1;const Ho=new class extends Zn{constructor(){super(...arguments),N(this,"onAutoplayFailed",void 0),N(this,"onAudioAutoplayFailed",void 0)}};function Xx(){if(an(),!Zy){const n=r=>{r.preventDefault(),Zy=!1,op()?document.body.removeEventListener("click",n,!0):(document.body.removeEventListener("touchstart",n,!0),document.body.removeEventListener("mousedown",n,!0))};Zy=!0,op()?document.body.addEventListener("click",n,!0):(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0)),U.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Ho.onAutoplayFailed?Ho.onAutoplayFailed():Ho.onAudioAutoplayFailed?U.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):U.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),Ho.emit("autoplay-failed")}}function eC(n){return new TextEncoder().encode(n)}const Jx=function(n,r){const o=new Uint8Array(n.byteLength+r.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(r),n.byteLength),o},CY=async n=>function(r,o){let s="";return new Uint8Array(r).forEach(l=>{s+=l.toString(o).padStart(2,"0")}),s}(await crypto.subtle.digest("SHA-256",eC(n)),16);function Qx(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function wt(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?Qx(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Qx(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function rt(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(r,o,s){const l=s.value;if(typeof l=="function"){const h=n.className||r.__className__||(r.constructor.name==="AgoraRTCClient"?"Client":r.constructor.name);s.value=function(){for(var m=arguments.length,v=new Array(m),S=0;S<m;S++)v[S]=arguments[S];let T=v;if(n.argsMap)try{T=n.argsMap(this,...v)}catch(I){U.warning(I),T=[]}try{JSON.stringify(T)}catch{U.warning("arguments for method ".concat(h,".").concat(String(o)," not serializable for apiInvoke.")),T=[]}const b=(n.report||Je).reportApiInvoke(this._sessionId||null,{name:"".concat(h,".").concat(String(o)),options:T,tag:Yn.TRACER,reportResult:n.reportResult},n.throttleTime);try{const I=l.apply(this,v);return I instanceof Me?I.then(L=>(b.onSuccess(n.reportResult&&L),L)).catch(L=>{throw b.onError(L),L}):(b.onSuccess(n.reportResult&&I),I)}catch(I){throw b.onError(I),I}}}return s}}const Je=new class{constructor(){N(this,"baseInfoMap",new Map),N(this,"proxyServer",void 0),N(this,"clientList",ru),N(this,"eventUploadTimer",void 0),N(this,"setSessionIdTimer",void 0),N(this,"url",void 0),N(this,"backupUrl",void 0),N(this,"_appId",void 0),N(this,"keyEventUploadPendingItems",[]),N(this,"normalEventUploadPendingItems",[]),N(this,"apiInvokeUploadPendingItems",[]),N(this,"apiInvokeCount",0),N(this,"ltsList",[]),N(this,"lastSendNormalEventTime",Date.now()),N(this,"customReportCounterTimer",void 0),N(this,"customReportCount",0),N(this,"extApiInvoke",async n=>{for(const r of n){const o=wt(wt({},r),{},{sid:null,invokeId:++this.apiInvokeCount,tag:Yn.TRACER});this.sendApiInvoke(o)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),re("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),re("EVENT_REPORT_SEND_INTERVAL"))}adjustSessionStartTime(n){if(!this.baseInfoMap.has(n)&&!this.baseInfoMap.get(n))return void U.error("adjust session ".concat(n," start time, sid is not exist or info is undefined"));const r=this.baseInfoMap.get(n),o=Date.now(),s=r.startTime;r.startTime=o,U.debug("rewrite session ".concat(n," startTime: ").concat(o," , ").concat(o-s,"ms")),this.baseInfoMap.set(n,r)}setAppId(n){this._appId=n}reportApiInvoke(n,r,o){r.timeout=r.timeout||6e4,r.reportResult=r.reportResult===void 0||r.reportResult;const s=Date.now();this.apiInvokeCount+=1;const l=this.apiInvokeCount,h=()=>({tag:r.tag,invokeId:l,sid:n,name:r.name,apiInvokeTime:s,options:r.options,states:r.states||null}),m=!!re("SHOW_REPORT_INVOKER_LOG");m&&U.info("".concat(r.name," start"),r.options);let v=!1;Ei(r.timeout).then(()=>{v||(this.sendApiInvoke(wt(wt({},h()),{},{error:z.API_INVOKE_TIMEOUT,success:!1})),U.debug("".concat(r.name," timeout")))});const S=new Q(z.UNEXPECTED_ERROR,"".concat(r.name,": this api invoke is end"));return{onSuccess:T=>{const b=()=>{if(v)throw S;return v=!0,this.sendApiInvoke(wt(wt({},h()),{},{success:!0},r.reportResult&&{result:T})),m&&U.info("".concat(r.name," onSuccess")),T};return o?fD(b,r.name+"Success",o,()=>v=!0):b()},onError:T=>{const b=()=>{if(v)throw T;v=!0,this.sendApiInvoke(wt(wt({},h()),{},{success:!1,error:T})),m&&U.info("".concat(r.name," onFailure"),T.toString())};return o?fD(b,r.name+"Error",o,()=>v=!0):b()}}}sessionInit(n,r){if(this.baseInfoMap.has(n))return;const o=Date.now(),s=this.createBaseInfo(n,o);s.cname=r.cname;const l=Object.assign({},{willUploadConsoleLog:re("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:wy?"global":"oversea",areas:re("AREAS")&&re("AREAS").join(",")},r.extend),h=Date.now(),m=wt(wt({},s),{},{eventType:ni.SESSION_INIT,appid:r.appid,browser:navigator.userAgent,build:Iy,lts:h,elapse:h-o,extend:JSON.stringify(l),mode:r.mode,process:re("PROCESS_ID"),appType:re("APP_TYPE"),success:!0,version:la});this.send({type:Kn.SESSION,data:m},!0)}joinChooseServer(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=wt(wt({},s),{},{eventType:ni.JOIN_CHOOSE_SERVER,lts:l,eventElapse:l-r.lts,chooseServerAddr:r.csAddr,errorCode:r.ec,elapse:l-o.startTime,success:r.succ,chooseServerAddrList:JSON.stringify(r.serverList),uid:r.uid?parseInt(r.uid):null,cid:r.cid?parseInt(r.cid):null,chooseServerIp:r.csIp||"",opid:r.opid,unilbsServerIds:r.unilbsServerIds,extend:r.extend||void 0,isHttp3:r.isHttp3});this.send({type:Kn.JOIN_CHOOSE_SERVER,data:h},!0)}reqUserAccount(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=wt(wt({},s),{},{eventType:ni.REQ_USER_ACCOUNT,lts:l,success:r.success,serverAddress:r.serverAddr,stringUid:r.stringUid,uid:r.uid,errorCode:r.errorCode,elapse:l-o.startTime,eventElapse:l-r.lts,extend:JSON.stringify(r.extend)});this.send({type:Kn.REQ_USER_ACCOUNT,data:h},!0)}joinGateway(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info;r.vid&&(s.vid=r.vid),s.uid=r.uid,s.cid=r.cid;const l=Date.now(),{firstSuccess:h,avoidJoinStartTime:m,isProxy:v,addr:S}=r,T=l-(h&&m?m:o.startTime),b=wt(wt({},s),{},{eventType:ni.JOIN_GATEWAY,lts:l,gatewayAddr:r.addr,success:r.succ,errorCode:r.ec,elapse:T,eventElapse:l-r.lts,firstSuccess:h,signalChannel:r.signalChannel}),I=b.success?1:0;if(r.succ&&(o.lastJoinSuccessTime=l),h)this.send({type:Kn.JOIN_GATEWAY,data:b},!0);else{let L;if(S)if(v){const K=S.match(/h=(\d{1,3}-){3}\d{1,3}/g),Y=S.match(/p=[0-9]{1,6}/g);L={isSuccess:I,gatewayIp:K&&K.length?K[0].split("=")[1].replace(/-/g,"."):"",port:Y&&Y.length?Y[0].split("=")[1]:"",isProxy:v?1:0}}else{const K=S.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),Y=S.match(/:[0-9]{1,6}/g);L={isSuccess:I,gatewayIp:K&&K.length?K[0].split("//")[1].replace(/-/g,"."):"",port:Y&&Y.length?Y[0].split(":")[1]:"",isProxy:v?1:0}}else L={isSuccess:I,gatewayIp:"",port:"",isProxy:v?1:0};delete b.success,delete b.eventType,delete b.firstSuccess,b.vid=Number(b.vid);const V=Object.assign({},b,L,{eventType:ni.REJOIN_GATEWAY});this.send({type:Kn.RE_JOIN_GATEWAY,data:V},!0)}}joinChannelTimeout(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=Date.now(),l=wt(wt({},o.info),{},{lts:s,timeout:r,elapse:s-o.startTime});this.send({type:Kn.JOIN_CHANNEL_TIMEOUT,data:l},!0)}publish(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=wt(wt({},s),{},{eventType:ni.PUBLISH,lts:l,eventElapse:r.eventElapse,elapse:l-o.startTime,success:r.succ,errorCode:r.ec,videoName:r.videoName,audioName:r.audioName,screenName:r.screenName,screenshare:r.screenshare,audio:r.audio,video:r.video,p2pid:r.p2pid,publishRequestid:r.publishRequestid});this.send({type:Kn.PUBLISH,data:h},!0)}subscribe(n,r,o){const s=this.baseInfoMap.get(n);if(!s)return;const l=s.info,h=Date.now(),m=wt(wt({},l),{},{eventType:ni.SUBSCRIBE,lts:h,eventElapse:r.eventElapse,elapse:h-s.startTime,success:r.succ,errorCode:r.ec,video:r.video,audio:r.audio,subscribeRequestid:r.subscribeRequestid,p2pid:r.p2pid},o&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof r.peerid=="string"?m.peerSuid=r.peerid:m.peer=r.peerid,this.send({type:Kn.SUBSCRIBE,data:m},!0)}wsCompressorInit(n){var r;const o=[...au(r=this.baseInfoMap).call(r)],s=o.length?o[0]:"UnableToGetSid",l=this.baseInfoMap.get(s);if(!l)return;const h=l.info,m=Date.now(),v=wt(wt({},h),{},{eventType:ni.WS_COMPRESSOR_INIT,lts:m,eventElapse:n.eventElapse,elapse:m-l.startTime,status:n.status?1:2});this.send({type:Kn.WS_COMPRESSOR_INIT,data:v},!0)}firstRemoteVideoDecode(n,r,o,s){const l=this.baseInfoMap.get(n);if(!l)return;const h=l.info,m=Date.now(),v=wt(wt(wt({},h),s),{},{elapse:m-l.startTime,eventType:r,lts:m,firstDecodeFrame:Math.max(m-l.startTime,0),apEnd:Math.max(s.apEnd-l.startTime,0),apStart:Math.max(s.apStart-l.startTime,0),joinGwEnd:Math.max(s.joinGwEnd-l.startTime,0),joinGwStart:Math.max(s.joinGwStart-l.startTime,0),pcEnd:Math.max(s.pcEnd-l.startTime,0),pcStart:Math.max(s.pcStart-l.startTime,0),subscriberEnd:Math.max(s.subscriberEnd-l.startTime,0),subscriberStart:Math.max(s.subscriberStart-l.startTime,0),videoAddNotify:Math.max(s.videoAddNotify-l.startTime,0)});this.send({type:o,data:v},!0)}firstRemoteFrame(n,r,o,s){const l=this.baseInfoMap.get(n);if(!l)return;const h=l.info,m=Date.now(),v=wt(wt(wt({},h),s),{},{elapse:m-l.startTime,eventType:r,lts:m});this.send({type:o,data:v},!0)}pcStats(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=wt(wt(wt({},s),r),{},{vid:s.vid===void 0?0:Number(s.vid),elapse:l-o.startTime,eventType:ni.PC_STATS,lts:l});this.send({type:Kn.PC_STATS,data:h},!0)}onGatewayStream(n,r,o,s){const l=this.baseInfoMap.get(n);if(!l)return;const h=l.info,m=Date.now(),v=wt(wt(wt({},h),s),{},{eventType:r,lts:m});this.send({type:o,data:v},!0)}streamSwitch(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=wt(wt({},s),{},{eventType:ni.STREAM_SWITCH,lts:l,isDual:r.isdual,elapse:l-o.startTime,success:r.succ});this.send({type:Kn.STREAM_SWITCH,data:h},!0)}requestProxyAppCenter(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=wt(wt({},s),{},{eventType:ni.REQUEST_PROXY_APPCENTER,lts:l,eventElapse:l-r.lts,elapse:l-o.startTime,APAddr:r.APAddr,workerManagerList:r.workerManagerList,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:Kn.REQUEST_PROXY_APPCENTER,data:h},!0)}requestProxyWorkerManager(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=wt(wt({},s),{},{eventType:ni.REQUEST_PROXY_WORKER_MANAGER,lts:l,eventElapse:l-r.lts,elapse:l-o.startTime,workerManagerAddr:r.workerManagerAddr,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:Kn.REQUEST_PROXY_WORKER_MANAGER,data:h},!0)}setProxyServer(n){this.proxyServer=n,n?U.debug("reportProxyServerurl: ".concat(n)):U.debug("disable reportProxyServerurl: ".concat(n))}peerPublishStatus(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=wt(wt({},s),{},{subscribeElapse:r.subscribeElapse,peer:r.peer,peerPublishDuration:Math.max(r.audioPublishDuration,r.videoPublishDuration),audiotag:r.audioPublishDuration>0?1:-1,videotag:r.videoPublishDuration>0?1:-1,lts:l,elapse:l-o.startTime,joinChannelSuccessElapse:l-(o.lastJoinSuccessTime||l),peerPublishDurationVideo:r.videoPublishDuration,peerPublishDurationAudio:r.audioPublishDuration});this.send({type:Kn.PEER_PUBLISH_STATUS,data:h},!0)}workerEvent(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now();(function(h,m,v){const S=h[m];if(!S||typeof S!="string")return[h];h[m]="";const T=yd(JSON.stringify(h));let b=0;const I=[];let L=0;for(let V=0;V<S.length;V++)L+=S.charCodeAt(V)<=127?1:3,L<=v-T||(I[I.length]=lu(lu({},h),{},{[m]:S.substring(b,V)}),b=V,L=S.charCodeAt(V)<=127?1:3);return b!==S.length-1&&(I[I.length]=lu(lu({},h),{},{[m]:S.substring(b)})),I})(wt(wt(wt({},s),r),{},{elapse:l-o.startTime,lts:l,productType:"WebRTC"}),"payload",1300).forEach(h=>this.send({type:Kn.WORKER_EVENT,data:h},!0))}apworkerEvent(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=wt(wt(wt({},s),r),{},{elapse:l-o.startTime,lts:l});this.send({type:Kn.AP_WORKER_EVENT,data:h},!0)}joinWebProxyAP(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=wt(wt(wt({},s),r),{},{elapse:l-o.startTime,lts:l,extend:r.extend||void 0});this.send({type:Kn.JOIN_WEB_PROXY_AP,data:h},!0)}WebSocketQuit(n,r){const o=this.baseInfoMap.get(n);if(!o)return;const s=o.info,l=Date.now(),h=wt(wt(wt({},s),r),{},{elapse:l-o.startTime,lts:l});this.send({type:Kn.WEBSOCKET_QUIT,data:h},!0)}async sendCustomReportMessage(n,r){if(this.customReportCount+=r.length,this.customReportCount>re("CUSTOM_REPORT_LIMIT"))throw new Q(z.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const o=Date.now(),s=r.map(l=>({type:Kn.USER_ANALYTICS,data:wt(wt({sid:n},l),{},{lts:o})}));try{re("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(s):await this.postDataToStatsCollector(s)}catch(l){throw U.error("send custom report message failed",l.toString()),new Q(z.CUSTOM_REPORT_SEND_FAILED,l.message)}}autoplayFailed(n,r,o,s){if(!n)return;const l=this.baseInfoMap.get(n);if(!l)return;const h=l.info,m=Date.now(),v=wt(wt({},h),{},{vid:h.vid===void 0?0:Number(h.vid),lts:m,elapse:m-l.startTime,cbRegistered:Ho.onAutoplayFailed||Ho.onAudioAutoplayFailed?1:-1,errorMsg:o,mediaType:r,trackId:s,extend:void 0});this.send({type:Kn.AUTOPLAY_FAILED,data:v},!0)}sendApiInvoke(n){const r=re("NOT_REPORT_EVENT");if(n.tag&&r.includes&&r.includes(n.tag))return!1;if(n.sid===null)return this.apiInvokeUploadPendingItems.push(n),!1;const o=this.baseInfoMap.get(n.sid);if(!o)return this.apiInvokeUploadPendingItems.push(n),!1;const{cname:s,uid:l,cid:h}=o.info;n.lts=n.lts||Date.now();let m;if(n.error)if(n.error instanceof Q){const{code:S,message:T}=n.error;m=S||T||n.error.toString()}else m=n.error.toString();const v={invokeId:n.invokeId,sid:n.sid,cname:s,cid:h,uid:l,lts:n.lts,success:n.success,elapse:n.lts-o.startTime,execElapse:n.lts-n.apiInvokeTime,apiName:n.name,options:n.options?JSON.stringify(n.options):void 0,execStates:n.states?JSON.stringify(n.states):void 0,execResult:n.result?JSON.stringify(n.result):void 0,errorCode:n.error?m:void 0,errorMsg:n.error?JSON.stringify(n.error):void 0};return this.send({type:Kn.API_INVOKE,data:v},!1),!0}appendSessionId(){this.clientList.forEach(n=>{if(n._sessionId){const r=this.apiInvokeUploadPendingItems.length;for(let o=0;o<r;o++){const s=this.apiInvokeUploadPendingItems.shift();s&&(s.sid=n._sessionId,this.sendApiInvoke(Object.assign({},s)))}}})}send(n,r){if(r)return this.keyEventUploadPendingItems.push(n),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(n),this.normalEventUploadPendingItems.length>re("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(n,r){const o=[],s=[];for(;n.length;){const h=n.shift();o.length<20?o.push(h):s.push(h)}n.push(...s);for(const h of[...o]){var l;this.ltsList.indexOf(h.data.lts)!==-1?(h.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(h.data.lts)):(this.ltsList.push(h.data.lts),ky(l=this.ltsList).call(l,(m,v)=>m-v))}return r||(this.lastSendNormalEventTime=Date.now()),re("ENABLE_EVENT_REPORT")&&o.length&&(re("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(o):this.postDataToStatsCollector(o)).catch((h=>m=>{re("EVENT_REPORT_RETRY")&&(r?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(h):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(h),this.normalEventUploadPendingItems.length>re("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-re("NORMAL_EVENT_QUEUE_CAPACITY")),U.warning("report: drop normal events"))))})(o)),n}async postDataToStatsCollector2(n){br.networkState===Ti.OFFLINE&&await Me.race([br.onlineWaiter,Ei(2*kr.maxRetryTimeout)]);const r=l=>{let h=new Uint8Array;return l.forEach(m=>{const v=eC(JSON.stringify(m.data)),S=new ArrayBuffer(5),T=(I=>{let L=0;return Object.entries(Kn).forEach(V=>{let[K,Y]=V;Y===I.type&&(L=Fy[K])}),L})(m),b=new DataView(S);b.setUint16(0,v.byteLength,!0),b.setUint8(2,255&T),b.setUint8(3,T>>>8&255),b.setUint8(4,T>>>16&255),h=Jx(h,new Uint8Array(S)),h=Jx(h,v)}),h},o="event";let s=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(re("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(o):"https://".concat(re("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(o);for(let l=0;l<2;l+=1){l===1&&(s=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(re("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(o):"https://".concat(re("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(o));try{await ps(s,{timeout:1e4,data:r(n),headers:wt(wt({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(h){if(l===1)throw h;continue}return}}async postDataToStatsCollector(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const o={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:n.map(h=>JSON.stringify(h)),vid:(h=>{const m=h&&h.data.sid&&this.baseInfoMap.get(h.data.sid);return m&&m.info.vid&&+m.info.vid||0})(n[0])};br.networkState===Ti.OFFLINE&&await Me.race([br.onlineWaiter,Ei(2*kr.maxRetryTimeout)]);const s=r?"/events/proto-raws":"/events/messages";let l=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(re("EVENT_REPORT_DOMAIN"),"&p=").concat(re("STATS_COLLECTOR_PORT"),"&d=").concat(s):"https://".concat(re("EVENT_REPORT_DOMAIN"),":").concat(re("STATS_COLLECTOR_PORT")).concat(s));for(let h=0;h<2;h+=1){h===1&&(l=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(re("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(re("STATS_COLLECTOR_PORT"),"&d=").concat(s):"https://".concat(re("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(re("STATS_COLLECTOR_PORT")).concat(s)));try{r?await yY(l,{timeout:1e4,data:o}):await ps(l,{timeout:1e4,data:o})}catch(m){if(h===1)throw m;continue}return}}createBaseInfo(n,r){const o=Object.assign({},fK);return o.sid=n,this.baseInfoMap.set(n,{info:o,startTime:r}),o}reportResourceTiming(n,r){const o=performance.getEntriesByName(n),s=o[o.length-1];s&&this.reportApiInvoke(r,{name:"Client.resourceTiming",options:s,tag:Yn.TRACER}).onSuccess()}};s0.on("REPORT_LOG_UPLOAD",n=>{n.networkState=br.networkState,Je.reportApiInvoke(null,{name:"logUploadError",options:n,tag:Yn.TRACER})});class Zx extends Zn{constructor(r,o){super(),N(this,"trackMediaType",void 0),N(this,"_ID",void 0),N(this,"_rtpTransceiver",void 0),N(this,"_lowRtpTransceiver",void 0),N(this,"_hints",[]),N(this,"_isClosed",!1),N(this,"_originMediaStreamTrack",void 0),N(this,"_mediaStreamTrack",void 0),N(this,"_external",{}),this._ID=o||jn(8,"track-"),this._originMediaStreamTrack=r,this._mediaStreamTrack=r,function(s){cp.includes(s)||cp.push(s)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(r){if(!r){const o=Je.reportApiInvoke(null,{name:Or.GET_MEDIA_STREAM_TRACK,options:[],tag:Yn.TRACER});this._mediaStreamTrack&&typeof this._mediaStreamTrack.label=="string"?o.onSuccess(this._mediaStreamTrack.label):o.onSuccess("")}return this._mediaStreamTrack}getRTCRtpTransceiver(r){return r===fd.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(r){const o=cp.indexOf(r);o!==-1&&cp.splice(o,1)}(this),this.emit(Jc.CLOSED)}_updateRtpTransceiver(r,o){if(o===fd.LOW_STREAM){if(this._lowRtpTransceiver===r)return;this._lowRtpTransceiver=r}else{if(this._rtpTransceiver===r)return;this._rtpTransceiver=r}this.emit(hp.TRANSCEIVER_UPDATED,r,o)}}let $r,bY=1;class Ui{constructor(r){N(this,"lockingPromise",Me.resolve()),N(this,"locks",0),N(this,"name",""),N(this,"lockId",void 0),this.lockId=bY++,r&&(this.name=r),U.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(r){let o;this.locks+=1,U.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat(typeof r=="string"?r:""));const s=new Me(h=>{o=()=>{this.locks-=1,U.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat(typeof r=="string"?r:"")),h()}}),l=this.lockingPromise.then(()=>o);return this.lockingPromise=this.lockingPromise.then(()=>s),l}}function gd(n,r){return function(o,s,l){const h=l.value;if(typeof h!="function")throw new Error("Cannot use mutex on object property.");return l.value=async function(){const m=this[r];if(!m)throw new Error("mutex property key ".concat(r," doesn't exist on ").concat(n));const v=await m.lock("From ".concat(n,".").concat(s));try{for(var S=arguments.length,T=new Array(S),b=0;b<S;b++)T[b]=arguments[b];return await h.apply(this,T)}finally{v()}},l}}class tC extends Zx{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}set processorContext(r){this._processorContext=r}constructor(r,o){super(r,o),N(this,"_enabled",!0),N(this,"_muted",!1),N(this,"_isExternalTrack",!1),N(this,"_isClosed",!1),N(this,"_enabledMutex",void 0),N(this,"processor",void 0),N(this,"_processorContext",void 0),N(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new Ui("".concat(this.getTrackId())),r.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var r,o;return(r=(o=this._originMediaStreamTrack)===null||o===void 0?void 0:o.label)!==null&&r!==void 0?r:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,U.debug("[".concat(this.getTrackId(),"] close")),this.emit(dt.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(r,o){let s=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this._isExternalTrack=s,r!==this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),o&&this._originMediaStreamTrack.stop(),r.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=r,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await nr(this,dt.NEED_REPLACE_TRACK,this),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){U.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(Jc.TRACK_ENDED)}stateCheck(r,o){if(U.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(r,": ").concat(o,"]")),lp(o,r),this._enabled&&this._muted&&r==="enabled"&&o===!1)throw new Q(z.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&r==="muted"&&o===!0)throw new Q(z.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}function eP(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}(function(n){n.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",n.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",n.IOS_INTERRUPTION_START="ios-interruption-start",n.IOS_INTERRUPTION_END="ios-interruption-end",n.STATE_CHANGE="state-change"})($r||($r={}));const tP=window.AudioContext||window.webkitAudioContext;let Wo=null;const cn=new class extends Zn{constructor(){super(...arguments),N(this,"prevState",void 0),N(this,"curState",void 0),N(this,"currentTime",void 0),N(this,"currentTimeStuckAt",void 0),N(this,"interruptDetectorTrack",void 0),N(this,"onLocalAudioTrackMute",()=>{U.info("ios15-interruption-start"),this.emit($r.IOS_15_16_INTERRUPTION_START)}),N(this,"onLocalAudioTrackUnmute",async()=>{U.info("ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?U.info("ios15-interruption-end-canceled"):(Wo&&await Wo.suspend(),this.emit($r.IOS_15_16_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(n){U.debug("webaudio bindInterruptDetectorTrack ".concat(n.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=n,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(n){U.debug("webaudio unbindInterruptDetectorTrack ".concat(n.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===n&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function TY(){if(!tP)return void U.error("your browser is not support web audio");U.info("create audio context");const n=function(r){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?arguments[o]:{};o%2?eP(Object(s),!0).forEach(function(l){N(r,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):eP(Object(s)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(s,l))})}return r}({},re("WEBAUDIO_INIT_OPTIONS"));U.debug("audio context init option:",JSON.stringify(n)),Wo=new tP(n),cn.curState=Wo.state,Wo.onstatechange=()=>{cn.prevState=cn.curState,cn.curState=Wo?Wo.state:void 0;const{prevState:r,curState:o}=cn,s=o==="running",l=o==="interrupted",h=r==="running",m=r==="suspended",v=r==="interrupted",S=an().osVersion;(ki()||Us())&&h&&l&&(U.info("ios".concat(S,"-interruption-start")),cn.emit($r.IOS_INTERRUPTION_START)),(ki()||Us())&&(m||v)&&s&&(U.info("ios".concat(S,"-interruption-end")),cn.emit($r.IOS_INTERRUPTION_END)),r!==o&&(U.debug("AudioContext State Change","".concat(r,"=>").concat(o)),cn.emit($r.STATE_CHANGE))},setInterval(()=>{var r;const o=(r=Wo)===null||r===void 0?void 0:r.currentTime;cn.currentTime!==o?(cn.currentTimeStuckAt&&(U.debug("AudioContext current time resume at ".concat(o)),cn.currentTimeStuckAt=void 0),cn.currentTime=o):(o!==cn.currentTimeStuckAt&&(Je.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:o},tag:Yn.TRACER}).onSuccess(),U.warning("AudioContext current time stuck at ".concat(o))),cn.currentTimeStuckAt=o)},5e3),async function(r){const o=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let s,l=!1,h=!1,m=!1;function v(q){r.state==="running"?S(!1):ki()||Us()?r.state==="suspended"&&(S(!0),q&&r.resume().then(b,b)):r.state!=="closed"&&(S(!0),q&&r.resume().then(b,b))}function S(q){if(l!==q){l=q;for(let ue=0,me=o;ue<me.length;ue+=1){const ye=me[ue];q?window.addEventListener(ye,I,{capture:!0,passive:!0}):window.removeEventListener(ye,I,{capture:!0,passive:!0})}}}function T(){v(!0)}function b(){v(!1)}function I(){v(!0)}function L(q){if(!m)if(s.paused)if(q){V(!1),m=!0;let ue;try{ue=s.play(),ue?ue.then(K,K):(s.addEventListener("playing",K),s.addEventListener("abort",K),s.addEventListener("error",K))}catch{K()}}else V(!0);else V(!1)}function V(q){if(h!==q){h=q;for(let ue=0,me=o;ue<me.length;ue++){const ye=me[ue];q?window.addEventListener(ye,Y,{capture:!0,passive:!0}):window.removeEventListener(ye,Y,{capture:!0,passive:!0})}}}function K(){s.removeEventListener("playing",K),s.removeEventListener("abort",K),s.removeEventListener("error",K),m=!1,L(!1)}function Y(){L(!0)}if(ki()){const q=r.createMediaStreamDestination(),ue=document.createElement("div");ue.innerHTML="<audio x-webkit-airplay='deny'></audio>",s=ue.children.item(0),s.controls=!1,s.disableRemotePlayback=!0,s.preload="auto",s.srcObject=q.stream,L(!0)}cn.on($r.STATE_CHANGE,T),v(!1)}(Wo)}function vd(){if(!Wo){if(TY(),!Wo)throw new Q(z.NOT_SUPPORTED,"can not create audio context");return Wo}return Wo}function nP(){return!!Wo}function su(n){if(function(){if(nC!==null)return nC;const s=vd(),l=s.createBufferSource(),h=s.createGain(),m=s.createGain();l.connect(h),l.connect(m),l.disconnect(h);let v=!1;try{l.disconnect(h)}catch{v=!0}return l.disconnect(),nC=v,v}())return;const r=n.connect,o=n.disconnect;n.connect=(s,l,h)=>(n._inputNodes||(n._inputNodes=[]),n._inputNodes.includes(s)||(s instanceof AudioNode?(n._inputNodes.push(s),r.call(n,s,l,h)):r.call(n,s,l)),n),n.disconnect=(s,l,h)=>{o.call(n),s?dC(n._inputNodes,s):n._inputNodes=[];for(const m of n._inputNodes)r.call(n,m)}}let nC=null;function rP(n,r){let o=!1;const s=1/r;if(re("DISABLE_WEBAUDIO")){const l=window.setInterval(()=>{o?window.clearInterval(l):n(performance.now()/1e3)},1e3*s)}else{const l=vd();let h=l.createGain();h.gain.value=0,h.connect(l.destination);const m=()=>{if(o)return void(h=null);const v=l.createOscillator();v.onended=m,v.connect(h),v.start(0),v.stop(l.currentTime+s),n(l.currentTime)};m()}return()=>{o=!0}}class iP{constructor(){N(this,"context",void 0),N(this,"analyserNode",void 0),N(this,"sourceNode",void 0),this.context=vd(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(r){if(r!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch{}this.sourceNode=r,r==null||r.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||ki()||Us()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode))return 0;const r=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(r);else{const s=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(s);for(let l=0;l<r.length;++l)r[l]=s[l]/128-1}const o=Wc(r).call(r,(s,l)=>s+l*l,0)/r.length;return Math.max(10*Math.log10(o)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var r,o;(r=this.sourceNode)===null||r===void 0||r.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,(o=this.sourceNode)===null||o===void 0||o.connect(this.analyserNode)}catch{U.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class oP extends Zn{get processSourceNode(){return this.sourceNode}set processedNode(r){var o;if(!this.isDestroyed&&this._processedNode!==r){try{var s;(s=this.sourceNode)===null||s===void 0||s.disconnect(this.outputNode)}catch{}(o=this._processedNode)===null||o===void 0||o.disconnect(),this._processedNode=r,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),N(this,"outputNode",void 0),N(this,"outputTrack",void 0),N(this,"isPlayed",!1),N(this,"sourceNode",void 0),N(this,"context",void 0),N(this,"audioBufferNode",void 0),N(this,"destNode",void 0),N(this,"audioOutputLevel",0),N(this,"volumeLevelAnalyser",void 0),N(this,"_processedNode",void 0),N(this,"playNode",void 0),N(this,"isDestroyed",!1),N(this,"onNoAudioInput",void 0),N(this,"isNoAudioInput",!1),N(this,"_noAudioInputCount",0),this.context=vd(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),su(this.outputNode),this.volumeLevelAnalyser=new iP}startGetAudioBuffer(r){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(r),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=o=>{this.emit(oo.ON_AUDIO_BUFFER,function(s){for(let l=0;l<s.outputBuffer.numberOfChannels;l+=1){const h=s.outputBuffer.getChannelData(l);for(let m=0;m<h.length;m+=1)h[m]=0}return s.inputBuffer}(o))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!gr().webAudioMediaStreamDest)throw new Q(z.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(r){this.context.state!=="running"&&ms(()=>{cn.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=r||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(r>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;ki()||Us()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume();const o=this.volumeLevelAnalyser.getAnalyserNode();let s;o.getFloatTimeDomainData?(s=new Float32Array(o.fftSize),o.getFloatTimeDomainData(s)):(s=new Uint8Array(o.fftSize),o.getByteTimeDomainData(s));let l=!1;for(let h=0;h<s.length;h++)s[h]!==0&&(l=!0);return l?(this.isNoAudioInput=!1,!0):(await Ei(200),await this.checkHasAudioInput(r?r+1:1)&&l)}getAudioVolume(){return this.outputNode.gain.value}setVolume(r){this.outputNode.gain.setValueAtTime(r,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var r,o;(r=this.processedNode)===null||r===void 0||r.disconnect(),(o=this.sourceNode)===null||o===void 0||o.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var r;this.processedNode?(r=this.processedNode)===null||r===void 0||r.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class rC extends oP{get isFreeze(){return!1}constructor(r,o,s){var l;if(super(),N(this,"sourceNode",void 0),N(this,"track",void 0),N(this,"clonedTrack",void 0),N(this,"audioElement",void 0),N(this,"isCurrentTrackCloned",!1),N(this,"isRemoteTrack",!1),N(this,"originVolumeLevelAnalyser",void 0),N(this,"rebuildWebAudio",async()=>{if(U.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void U.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>U.info("resume success")),U.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const v=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?v.stop():this.isCurrentTrackCloned=!0;const S=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(S),su(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const T=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(T,this.context.currentTime),su(this.outputNode),this.emit(oo.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=S,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),r.kind!=="audio")throw new Q(z.UNEXPECTED_ERROR);this.track=r;const h=new MediaStream([this.track]);if(this.isRemoteTrack=!!o,this.sourceNode=this.context.createMediaStreamSource(h),su(this.sourceNode),s){const v=s.clone();v.enabled=!0,this.clonedTrack=v,U.debug("create an unmuted track ".concat(v.id," from the original track ").concat(s.id," to get the volume"));const S=this.context.createMediaStreamSource(new MediaStream([v]));su(S),this.originVolumeLevelAnalyser=new iP,this.originVolumeLevelAnalyser.updateSource(S)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=h;const m=an();o&&m.os===di.IOS&&Number((l=m.osVersion)===null||l===void 0?void 0:l.split(".")[0])<15&&(cn.on($r.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(v=>{v||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(r){this.sourceNode.disconnect(),this.track=r,this.isCurrentTrackCloned=!1;const o=new MediaStream([r]);this.sourceNode=this.context.createMediaStreamSource(o),su(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(oo.UPDATE_SOURCE),this.audioElement.srcObject=o}destroy(){var r;this.audioElement.srcObject=null,this.audioElement.remove(),cn.off("state-change",this.rebuildWebAudio),(r=this.originVolumeLevelAnalyser)===null||r===void 0||r.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(r){return this.context.createMediaStreamSource(new MediaStream([r]))}updateOriginTrack(r){const o=r.clone();o.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=o),U.debug("create an unmuted track ".concat(o.id," from the original track ").concat(r.id," to get the volume"));const s=this.context.createMediaStreamSource(new MediaStream([o]));su(s),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(s)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function aP(n,r){const o=(l,h)=>l?typeof l!="number"?l.max||l.exact||l.ideal||l.min||h:l:h,s={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxHeight:o(r.height,1080),maxWidth:o(r.width,1920)}}};return r.frameRate&&typeof r.frameRate!="number"?(s.video.mandatory.maxFrameRate=r.frameRate.max,s.video.mandatory.minFrameRate=r.frameRate.min):typeof r.frameRate=="number"&&(s.video.mandatory.maxFrameRate=r.frameRate),await navigator.mediaDevices.getUserMedia(s)}async function RY(n){const r=await sP(n.mediaSource),o=await function(s){return new Me((l,h)=>{const m=document.createElement("div");m.innerText="share screen",m.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const v=document.createElement("div");v.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const S=document.createElement("div");S.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",S.setAttribute("style","height: 12%;");const T=document.createElement("div");T.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const b=document.createElement("div");b.setAttribute("style","text-align: right; padding: 16px 0;");const I=document.createElement("button");I.innerHTML="cancel",I.setAttribute("style","width: 85px;"),I.onclick=()=>{document.body.removeChild(L);const V=new Error("NotAllowedError");V.name="NotAllowedError",h(V)},b.appendChild(I),v.appendChild(S),v.appendChild(T),v.appendChild(b);const L=document.createElement("div");L.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),L.appendChild(m),L.appendChild(v),document.body.appendChild(L),s.map(V=>{if(V.id){const K=document.createElement("div");K.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let Y=V.thumbnail;const{width:q}=Y.getSize();q>1920&&(Y=Y.resize({width:1920})),K.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+Y.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+(V.name.replace(/[\u00A0-\u9999<>\&]/g,function(ue){return"&#"+ue.charCodeAt(0)+";"})+"</span>"),K.onclick=()=>{document.body.removeChild(L),l(V.id)},T.appendChild(K)}})})}(r);return await aP(o,n)}async function sP(n){let r=["window","screen"];n!=="application"&&n!=="window"||(r=["window"]),n==="screen"&&(r=["screen"]);const o=cP();if(!o)throw new Q(z.ELECTRON_IS_NULL);let s=null;try{var l;s=((l=o.desktopCapturer)===null||l===void 0?void 0:l.getSources({types:r}))||o.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:r})}catch{s=null}s&&s.then||(s=new Me((h,m)=>{o.desktopCapturer.getSources({types:r},(v,S)=>{v?m(v):h(S)})}));try{return await s}catch(h){throw new Q(z.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,h.toString())}}let m0=null;function cP(){if(m0)return m0;try{return m0=window.require("electron"),m0}catch{return null}}function lP(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}const iC=new Ui("safari");let uP=!1,dP=!1;async function La(n,r){let o=0,s=null;for(;o<2;)try{s=await IY(n,r,o>0);break}catch(l){if(l instanceof Q)throw U.error("[".concat(r,"] ").concat(l.toString())),l;const h=g0(l.name||l.code||l,l.message);if(h.code===z.MEDIA_OPTION_INVALID){U.debug("[".concat(r,"] detect media option invalid, retry")),o+=1,await Ei(500);continue}throw U.error("[".concat(r,"] ").concat(h.toString())),h}if(!s)throw new Q(z.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return s}async function IY(n,r,o){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Q(z.NOT_SUPPORTED,"can not find getUserMedia");o&&(n.video&&(delete n.video.width,delete n.video.height),n.screen&&(delete n.screen.width,delete n.screen.height));const s=gr(),l=new MediaStream;if(n.audioSource&&l.addTrack(n.audioSource),n.videoSource&&l.addTrack(n.videoSource),!n.audio&&!n.video&&!n.screen)return U.debug("Using Video Source/ Audio Source"),l;if(n.screen)if(cP())n.screen.sourceId?Ed(l,await aP(n.screen.sourceId,n.screen)):Ed(l,await RY(n.screen));else if(ay()&&n.screen.extensionId&&n.screen.mandatory){if(!s.getStreamFromExtension)throw new Q(z.NOT_SUPPORTED,"This browser does not support screen sharing");U.debug("[".concat(r,'] Screen access on chrome stable, looking for extension"'));const L=await(m=n.screen.extensionId,v=r,new Me((V,K)=>{try{chrome.runtime.sendMessage(m,{getStream:!0},Y=>{if(!Y||!Y.streamId)return U.error("[".concat(v,"] No response from Chrome Plugin. Plugin not installed properly"),Y),void K(new Q(z.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));V(Y.streamId)})}catch(Y){U.error("[".concat(v,"] AgoraRTC screensharing plugin is not accessible(").concat(m,")"),Y.toString()),K(new Q(z.CHROME_PLUGIN_NOT_INSTALL))}}));n.screen.mandatory.chromeMediaSourceId=L,Ed(l,await navigator.mediaDevices.getUserMedia({video:{mandatory:n.screen.mandatory}}))}else if(s.getDisplayMedia){var h;n.screen.mediaSource&&Lx(n.screen.mediaSource);const L={width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate,displaySurface:(h=n.screen.displaySurface)!==null&&h!==void 0?h:n.screen.mediaSource==="screen"?"monitor":n.screen.mediaSource},{selfBrowserSurface:V,surfaceSwitching:K,systemAudio:Y}=n.screen,q={selfBrowserSurface:V,surfaceSwitching:K,systemAudio:Y};!V&&delete q.selfBrowserSurface,!K&&delete q.surfaceSwitching,!Y&&delete q.systemAudio,U.debug("[".concat(r,"] getDisplayMedia:"),JSON.stringify({video:L,audio:!!n.screenAudio,controls:q})),Ed(l,await navigator.mediaDevices.getDisplayMedia(function(ue){for(var me=1;me<arguments.length;me++){var ye=arguments[me]!=null?arguments[me]:{};me%2?lP(Object(ye),!0).forEach(function(qe){N(ue,qe,ye[qe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ue,Object.getOwnPropertyDescriptors(ye)):lP(Object(ye)).forEach(function(qe){Object.defineProperty(ue,qe,Object.getOwnPropertyDescriptor(ye,qe))})}return ue}({video:L,audio:!!n.screenAudio},q)))}else{if(!Qn())throw U.error("[".concat(r,"] This browser does not support screenSharing")),new Q(z.NOT_SUPPORTED,"This browser does not support screen sharing");{n.screen.mediaSource&&Lx(n.screen.mediaSource);const L={video:{mediaSource:n.screen.mediaSource,width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate}};U.debug("[".concat(r,"] getUserMedia: ").concat(JSON.stringify(L))),Ed(l,await navigator.mediaDevices.getUserMedia(L))}}var m,v;if(!n.video&&!n.audio)return l;let S={video:n.video,audio:n.audio},T=re("MEDIA_DEVICE_CONSTRAINTS");if(T)try{typeof T=="string"&&(T=JSON.parse(T)),S=function L(V,K){if(!mD(V)||!mD(K)||Array.isArray(V)&&!Array.isArray(K)||!Array.isArray(V)&&Array.isArray(K))return K;if(Array.isArray(K)&&Array.isArray(V)){const Y=[...V];for(let q=0;q<K.length;q++)Y[q]=L(V[q],K[q]);return Y}{const Y=lu({},V);for(const q in K)Object.prototype.hasOwnProperty.call(K,q)&&(Object.prototype.hasOwnProperty.call(V,q)?Y[q]=L(V[q],K[q]):Y[q]=K[q]);return Y}}(S,T)}catch{}U.debug("[".concat(r,"] GetUserMedia"),JSON.stringify(S)),an();let b,I=null;(Di()||ki()||Jm())&&(I=await iC.lock());try{b=await navigator.mediaDevices.getUserMedia(S)}catch(L){throw I&&I(),L}return S.audio&&(uP=!0),S.video&&(dP=!0),Ed(l,b),I&&I(),l}function g0(n,r){switch(n){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new Q(z.MEDIA_OPTION_INVALID,"".concat(n,": ").concat(r));case"NotFoundError":case"DevicesNotFoundError":return new Q(z.DEVICE_NOT_FOUND,"".concat(n,": ").concat(r));case"NotSupportedError":return new Q(z.NOT_SUPPORTED,"".concat(n,": ").concat(r));case"NotReadableError":return new Q(z.NOT_READABLE,"".concat(n,": ").concat(r));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new Q(z.PERMISSION_DENIED,"".concat(n,": ").concat(r));case"ConstraintNotSatisfiedError":return new Q(z.CONSTRAINT_NOT_SATISFIED,"".concat(n,": ").concat(r));default:return U.error("getUserMedia unexpected error",n),new Q(z.UNEXPECTED_ERROR,"".concat(n,": ").concat(r))}}function Ed(n,r){const o=n.getVideoTracks()[0],s=n.getAudioTracks()[0],l=r.getVideoTracks()[0],h=r.getAudioTracks()[0];h&&(s&&n.removeTrack(s),n.addTrack(h)),l&&(o&&n.removeTrack(o),n.addTrack(l))}const zo=new class extends Zn{get state(){return this._state}set state(n){n!==this._state&&(this.emit(pc.STATE_CHANGE,n),this._state=n)}constructor(){super(),N(this,"_state",ou.IDLE),N(this,"isAccessMicrophonePermission",!1),N(this,"isAccessCameraPermission",!1),N(this,"lastAccessMicrophonePermission",!1),N(this,"lastAccessCameraPermission",!1),N(this,"checkdeviceMatched",!1),N(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(re("ENUMERATE_DEVICES_INTERVAL")||(Qm()||bN()===di.HARMONY_OS)&&Zl())&&this.updateDevicesInfo()},re("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(n=>U.error(n.toString()))}async enumerateDevices(n,r){let o=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new Q(z.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const s=await navigator.mediaDevices.enumerateDevices(),l=this.checkMediaDeviceInfoIsOk(s);let h=!this.isAccessMicrophonePermission&&n,m=!this.isAccessCameraPermission&&r;l.audio&&(h=!1),l.video&&(m=!1);let v=null,S=null,T=null;if(!o&&(h||m)){if(iC.isLocked&&(U.debug("[device manager] wait GUM lock"),(await iC.lock())(),U.debug("[device manager] GUM unlock")),uP&&(h=!1,this.isAccessMicrophonePermission=!0),dP&&(m=!1,this.isAccessCameraPermission=!0),U.debug("[device manager] check media device permissions",n,r,h,m),h&&m){try{T=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(b){const I=g0(b.name||b.code||b,b.message);if(I.code===z.PERMISSION_DENIED)throw I;U.warning("getUserMedia failed in getDevices",I)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(h){try{v=await navigator.mediaDevices.getUserMedia({audio:n})}catch(b){const I=g0(b.name||b.code||b,b.message);if(I.code===z.PERMISSION_DENIED)throw I;U.warning("getUserMedia failed in getDevices",I)}this.isAccessMicrophonePermission=!0}else if(m){try{S=await navigator.mediaDevices.getUserMedia({video:r})}catch(b){const I=g0(b.name||b.code||b,b.message);if(I.code===z.PERMISSION_DENIED)throw I;U.warning("getUserMedia failed in getDevices",I)}this.isAccessCameraPermission=!0}U.debug("[device manager] mic permission",n,"cam permission",r)}try{const b=await navigator.mediaDevices.enumerateDevices();return v&&v.getTracks().forEach(I=>I.stop()),S&&S.getTracks().forEach(I=>I.stop()),T&&T.getTracks().forEach(I=>I.stop()),v=null,S=null,T=null,b}catch(b){return v&&v.getTracks().forEach(I=>I.stop()),S&&S.getTracks().forEach(I=>I.stop()),T&&T.getTracks().forEach(I=>I.stop()),v=null,S=null,T=null,new Q(z.ENUMERATE_DEVICES_FAILED,b.toString()).throw()}}async getRecordingDevices(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,n)).filter(r=>r.kind==="audioinput")}async getCamerasDevices(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,n)).filter(r=>r.kind==="videoinput")}async getSpeakers(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,n)).filter(r=>r.kind==="audiooutput")}searchDeviceIdByName(n){let r=null;return this.deviceInfoMap.forEach(o=>{o.device.label===n&&(r=o.device.deviceId)}),r}async getDeviceById(n){const r=(await this.enumerateDevices(!0,!0,!0)).find(o=>o.deviceId===n);if(!r)throw new Q(z.DEVICE_NOT_FOUND,"deviceId: ".concat(n));return r}async init(){this.state=ou.INITING;try{await this.updateDevicesInfo(),this.state=ou.INITEND}catch(n){throw U.warning("Device Detection functionality cannot start properly.",n.toString()),this.state=ou.IDLE,!function(){return typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1"}()&&new Q(z.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),n}}async updateDevicesInfo(){const n=await this.enumerateDevices(!0,!0,!0),r=Date.now(),o=[];if(n[0]&&n[0].label&&this.checkdeviceMatched===!1){this.checkdeviceMatched=!0;const l=n.find(m=>m.kind==="audioinput"&&m.deviceId==="default"),h=n.find(m=>m.kind==="audiooutput"&&m.deviceId==="default");l&&h?h.groupId===l.groupId?U.debug("[device-check] default input ".concat(l.label," and output ").concat(h.label," is the same group")):U.warning("[device-check] default input ".concat(l.label," and output ").concat(h.label," is not the same group")):U.debug("[device-check] default input or output not found")}const s=this.checkMediaDeviceInfoIsOk(n);if(n.forEach(l=>{if(!l.deviceId)return;const h=this.deviceInfoMap.get("".concat(l.kind,"_").concat(l.deviceId));if((h?h.state:"INACTIVE")!=="ACTIVE"){const m={initAt:r,updateAt:r,device:l,state:"ACTIVE"};this.deviceInfoMap.set("".concat(l.kind,"_").concat(l.deviceId),m),o.push(m)}h&&(h.updateAt=r)}),this.deviceInfoMap.forEach((l,h)=>{l.state==="ACTIVE"&&l.updateAt!==r&&(l.state="INACTIVE",o.push(l))}),this.state!==ou.INITEND)return s.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(s.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));o.forEach(l=>{switch(l.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(pc.RECORDING_DEVICE_CHANGED,l);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(pc.CAMERA_DEVICE_CHANGED,l);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(pc.PLAYOUT_DEVICE_CHANGED,l)}}),s.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),s.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(n){const r=n.filter(l=>l.kind==="audioinput"),o=n.filter(l=>l.kind==="videoinput"),s={audio:!1,video:!1};for(const l of r)if(l.label&&l.deviceId){s.audio=!0;break}for(const l of o)if(l.label&&l.deviceId){s.video=!0;break}return s}},wY=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],bo=new class{constructor(){N(this,"onAutoplayFailed",void 0),N(this,"elementMap",new Map),N(this,"elementStateMap",new Map),N(this,"elementsNeedToResume",[]),N(this,"sinkIdMap",new Map),N(this,"autoResumeAfterInterruption",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[r,o]=n;const s=this.elementStateMap.get(r),l=o.srcObject.getAudioTracks()[0];id()?l&&l.readyState==="live"&&cn.curState==="running"&&(U.debug("auto resume after interruption for iOS 15"),o.pause(),o.play()):s&&s==="paused"&&l&&l.readyState==="live"&&cn.curState==="running"&&(U.debug("auto resume after interruption for iOS"),o.play())})}),N(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[r,o]=n;const s=o.srcObject.getAudioTracks()[0];s&&s.readyState==="live"&&(U.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),o.pause(),o.play())})}),this.autoResumeAudioElement(),cn.on($r.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),cn.on($r.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),cn.on($r.STATE_CHANGE,()=>{ki()&&cn.prevState==="suspended"&&cn.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(n,r){const o=this.elementMap.get(n);if(this.sinkIdMap.set(n,r),o)try{await o.setSinkId(r)}catch(s){throw new Q(z.PERMISSION_DENIED,"can not set sink id: "+s.toString())}}play(n,r,o,s){if(this.elementMap.has(r))return;const l=document.createElement("audio");l.autoplay=!0,l.srcObject=new MediaStream([n]),this.bindAudioElementEvents(r,l),this.elementMap.set(r,l),this.elementStateMap.set(r,pi.INIT),this.setVolume(r,o);const h=this.sinkIdMap.get(r);if(h)try{l.setSinkId(h).catch(v=>{U.warning("[".concat(r,"] set sink id failed"),v.toString())})}catch(v){U.warning("[".concat(r,"] set sink id failed"),v.toString())}const m=l.play();m&&m.then&&m.catch(v=>{s&&Je.autoplayFailed(s,"audio",v.message,r),U.warning("audio element play warning",v.toString()),this.elementMap.has(r)&&v.name==="NotAllowedError"&&(U.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(l),ms(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),Xx()}))})}updateTrack(n,r){const o=this.elementMap.get(n);o&&(o.srcObject=new MediaStream([r]))}isPlaying(n){return this.elementMap.has(n)&&this.elementStateMap.get(n)==="playing"}setVolume(n,r){const o=this.elementMap.get(n);o&&(r=Math.max(0,Math.min(100,r)),o.volume=r/100)}stop(n){const r=this.elementMap.get(n);if(this.sinkIdMap.delete(n),!r)return;const o=this.elementsNeedToResume.indexOf(r);this.elementsNeedToResume.splice(o,1),r.srcObject=null,r.remove(),this.elementMap.delete(n),this.elementStateMap.delete(n)}bindAudioElementEvents(n,r){wY.forEach(o=>{r.addEventListener(o,s=>{const l=this.elementStateMap.get(n),h=s.type==="pause"?"paused":s.type;if(U.debug("[".concat(n,"] audio-element-status change ").concat(l," => ").concat(h)),s.type==="error"){const m=r==null?void 0:r.error;m&&U.error("[".concat(n,"] media error, code: ").concat(m.code,", message: ").concat(m.message))}this.elementStateMap.set(n,h)})})}getPlayerState(n){return this.elementStateMap.get(n)||"uninit"}autoResumeAudioElement(){const n=()=>{this.elementsNeedToResume.forEach(r=>{r.play().then(o=>{U.debug("Auto resume audio element success")}).catch(o=>{U.warning("Auto resume audio element failed!",o)})}),this.elementsNeedToResume=[]};new Me(r=>{document.body?r():window.addEventListener("load",()=>r())}).then(()=>{op()?document.body.addEventListener("click",n,!0):(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0))})}};function tr(){return function(n,r,o){const s=o.value;return typeof s=="function"&&(o.value=function(){this._isClosed&&new Q(z.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var l=arguments.length,h=new Array(l),m=0;m<l;m++)h[m]=arguments[m];const v=s.apply(this,h);return v instanceof Me?new Me((S,T)=>{v.then(S).catch(T)}):v}),o}}var OY=Hc("Array").values,AY=zc,NY=Hn,xY=C,PY=OY,oC=Array.prototype,DY={DOMTokenList:!0,NodeList:!0},Bs=function(n){var r=n.values;return n===oC||xY(oC,n)&&r===oC.values||NY(DY,AY(n))?PY:r};function hP(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function v0(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?hP(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):hP(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class pP extends Zn{constructor(r){super(),N(this,"name","VideoProcessorDestination"),N(this,"ID","0"),N(this,"_source",void 0),N(this,"videoContext",void 0),N(this,"inputTrack",void 0),this.videoContext=r}get kind(){return"video"}get enabled(){return!0}pipe(){throw new Q(z.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new Q(z.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(r){if(r.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);r.track&&r.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=r.track,this.emit(gi.ON_TRACK,r.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(gi.ON_TRACK,void 0)}}class fP extends Zn{set chained(r){this._chained=r}get chained(){return this._chained}constructor(r,o){super(),N(this,"constraintsMap",new Map),N(this,"statsRegistry",[]),N(this,"usageRegistry",[]),N(this,"trackId",void 0),N(this,"direction",void 0),N(this,"_chained",!1),this.trackId=r,this.direction=o}async getConstraints(){return await _i(this,ao.REQUEST_CONSTRAINTS)}async requestApplyConstraints(r,o){var s;return U.info("processor ".concat(o.name," requestApplyConstraints for ").concat(this.trackId)),r&&this.constraintsMap.set(o,r),nr(this,ao.REQUEST_UPDATE_CONSTRAINTS,Array.from(Bs(s=this.constraintsMap).call(s)))}async requestRevertConstraints(r){var o;if(this.constraintsMap.has(r))return U.info("processor ".concat(r.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(r),nr(this,ao.REQUEST_UPDATE_CONSTRAINTS,Array.from(Bs(o=this.constraintsMap).call(o)))}registerStats(r,o,s){this.statsRegistry.find(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===o)||this.statsRegistry.push({processorName:r.name,processorID:r.ID,type:o,cb:s})}unregisterStats(r,o){const s=this.statsRegistry.findIndex(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===o);s!==-1&&this.statsRegistry.splice(s,1)}gatherStats(){const r=[];for(const{processorID:o,processorName:s,type:l,cb:h}of this.statsRegistry)try{const m=h();r.push({processorID:o,processorName:s,type:l,stats:m})}catch(m){U.error(new Q(z.UNEXPECTED_ERROR,m.message))}return r}registerUsage(r,o){this.usageRegistry.find(s=>s.processorID===r.ID&&s.processorName===r.name)||this.usageRegistry.push({processorID:r.ID,processorName:r.name,cb:o})}unregisterUsage(r){const o=this.usageRegistry.findIndex(s=>s.processorID===r.ID&&s.processorName===r.name);o!==-1&&this.usageRegistry.splice(o,1)}async gatherUsage(){const r=[];if(!this.chained)return[];for(const{cb:o}of this.usageRegistry)try{let s=o();s instanceof Me&&(s=await s),r.push(v0(v0({},s),{},{direction:this.direction}))}catch(s){U.error("gather extension usage error",s)}return r}getDirection(){return this.direction}}class mP extends Zn{constructor(r){super(),N(this,"name","AudioProcessorDestination"),N(this,"ID","0"),N(this,"inputTrack",void 0),N(this,"inputNode",void 0),N(this,"audioProcessorContext",void 0),N(this,"_source",void 0),this.audioProcessorContext=r}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new Q(z.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new Q(z.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(gi.ON_TRACK,void 0),this.emit(gi.ON_NODE,void 0)}updateInput(r){if(r.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);r.track&&this.inputTrack!==r.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=r.track,this.emit(gi.ON_TRACK,this.inputTrack)),r.node&&this.inputNode!==r.node&&(this.audioProcessorContext.chained=!0,this.inputNode=r.node,this.emit(gi.ON_NODE,this.inputNode))}}class gP extends Zn{set chained(r){this._chained=r}get chained(){return this._chained}constructor(r,o,s){super(),N(this,"constraintsMap",new Map),N(this,"statsRegistry",[]),N(this,"audioContext",void 0),N(this,"trackId",void 0),N(this,"direction",void 0),N(this,"usageRegistry",[]),N(this,"_chained",!1),this.audioContext=r,this.trackId=o,this.direction=s}async getConstraints(){return _i(this,ao.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(r,o){var s;return U.info("processor ".concat(o.name," requestApplyConstraints for ").concat(this.trackId)),r&&this.constraintsMap.set(o,r),nr(this,ao.REQUEST_UPDATE_CONSTRAINTS,Array.from(Bs(s=this.constraintsMap).call(s)))}async requestRevertConstraints(r){var o;if(this.constraintsMap.has(r))return this.constraintsMap.delete(r),nr(this,ao.REQUEST_UPDATE_CONSTRAINTS,Array.from(Bs(o=this.constraintsMap).call(o)))}registerStats(r,o,s){this.statsRegistry.find(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===o)||this.statsRegistry.push({processorName:r.name,processorID:r.ID,type:o,cb:s})}unregisterStats(r,o){const s=this.statsRegistry.findIndex(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===o);s!==-1&&this.statsRegistry.splice(s,1)}gatherStats(){const r=[];for(const{processorID:o,processorName:s,type:l,cb:h}of this.statsRegistry)try{const m=h();r.push({processorID:o,processorName:s,type:l,stats:m})}catch(m){U.error(new Q(z.UNEXPECTED_ERROR,m.message))}return r}registerUsage(r,o){this.usageRegistry.find(s=>s.processorID===r.ID&&s.processorName===r.name)||this.usageRegistry.push({processorID:r.ID,processorName:r.name,cb:o})}unregisterUsage(r){const o=this.usageRegistry.findIndex(s=>s.processorID===r.ID&&s.processorName===r.name);o!==-1&&this.usageRegistry.splice(o,1)}async gatherUsage(){const r=[];if(!this.chained)return[];for(const{cb:o}of this.usageRegistry)try{let s=o();s instanceof Me&&(s=await s),r.push(v0(v0({},s),{},{direction:this.direction}))}catch(s){U.error("gather extension usage error",s)}return r}getDirection(){return this.direction}}class aC extends Zn{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),N(this,"context",void 0),N(this,"processSourceNode",void 0),N(this,"outputTrack",void 0),N(this,"processedNode",void 0),N(this,"clonedTrack",void 0),N(this,"outputNode",void 0),this.outputNode=new kY}setVolume(){}createOutputTrack(){throw new Q(z.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class kY{disconnect(){}connect(){}}let E0,_d=null;class LY{constructor(){N(this,"state","open"),N(this,"trigger",void 0),N(this,"tasks",[]),U.debug("[macro-task-queue] is created."),this.trigger=setTimeout(()=>{this.state="closed",U.debug("[macro-task-queue] will be closed, all remaining tasks will execute. [".concat(this.tasks.map(r=>r.key),"]")),this.trigger=void 0,this.tasks.forEach(r=>{let{func:o}=r;return o()}),this.tasks.length=0,U.debug("[macro-task-queue] is closed.")})}enqueue(r,o){this.state!=="closed"&&(this.tasks.push({key:r,func:o}),U.debug("[macro-task-queue] is queued, current queue ".concat(this.tasks.length,". ").concat(typeof r=="string"?r:"")))}runTask(r){if(this.state==="closed")return;const o=this.tasks.findIndex(s=>s.key===r);if(o!==-1){const s=this.tasks.splice(o,1);U.debug("[macro-task-queue] is unqueued, current queue ".concat(this.tasks.length,". ").concat(typeof r=="string"?r:"")),s[0].func()}}release(){this.trigger&&(this.state="closed",clearTimeout(this.trigger),this.trigger=void 0,this.tasks.length=0,U.debug("[macro-task-queue] is closed."))}}function sC(n){return function(r,o,s){var l;const h=(l=s.value)!==null&&l!==void 0?l:s.get,m=function(){_d&&_d.state==="open"&&_d.runTask(n);for(var v=arguments.length,S=new Array(v),T=0;T<v;T++)S[T]=arguments[T];return h==null?void 0:h.apply(this,...S)};return s.value?s.value=m:s.get=m,s}}var vP,EP,_P,SP,yP,CP,bP,TP,RP,IP,wP,OP,AP,NP,xP,PP,DP,kP,LP,MP,UP,ln,VP,FP,BP,jP,$P,HP,js,WP,zP,GP,KP,YP,qP,XP,JP,QP,ZP,eD,tD,Ii;function nD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function cC(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?nD(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):nD(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}(function(n){n.UPDATE_TRACK_SOURCE="update-track-source"})(E0||(E0={}));let vi=(vP=sC("INIT_WEBAUDIO"),EP=sC("INIT_WEBAUDIO"),_P=sC("INIT_WEBAUDIO"),SP=rt({argsMap:(n,r)=>[n.getTrackId(),r],throttleTime:300}),yP=rt({argsMap:(n,r)=>[n.getTrackId(),r]}),CP=tr(),bP=gd("LocalAudioTrack","_enabledMutex"),TP=rt({argsMap:(n,r)=>[n.getTrackId(),r]}),RP=tr(),IP=gd("LocalAudioTrack","_enabledMutex"),wP=rt({argsMap:(n,r)=>[n.getTrackId(),r]}),OP=tr(),AP=tr(),NP=tr(),xP=rt({argsMap:n=>[n.getTrackId()]}),PP=tr(),DP=rt({argsMap:n=>[n.getTrackId()]}),kP=tr(),LP=rt({argsMap:n=>[n.getTrackId()]}),MP=rt({argsMap:(n,r)=>[n.getTrackId(),r.name]}),UP=rt({argsMap:n=>[n.getTrackId()]}),_e((ln=class extends tC{get _source(){return this._trackSource}set _source(n){this._trackSource=n}get processorContext(){return this._processorContext}set processorContext(n){this._processorContext=n}get processorDestination(){return this._processorDestination}set processorDestination(n){this._processorDestination=n}get isPlaying(){return this._useAudioElement?bo.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(n,r,o,s,l){super(n,o),N(this,"trackMediaType","audio"),N(this,"_encoderConfig",void 0),N(this,"_trackSource",void 0),N(this,"_enabled",!0),N(this,"_volume",100),N(this,"_useAudioElement",!1),N(this,"_bypassWebAudio",!1),N(this,"processor",void 0),N(this,"_processorContext",void 0),N(this,"_processorDestination",void 0),N(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=r,this._getOriginVolumeLevel=!!s;const h=()=>{this.processorContext=new gP(this._source.context,this.getTrackId(),"local"),this.processorDestination=new mP(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(oo.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})},m=l&&Di()&&!nP();re("DISABLE_WEBAUDIO")?(this._source=new aC,this._useAudioElement=!0,this._bypassWebAudio=!0):m?this._source=new aC:(this._source=new rC(n,!1,this._getOriginVolumeLevel?n:void 0),re("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0)),h(),!re("DISABLE_WEBAUDIO")&&m&&(_d||(_d=new LY),_d).enqueue("INIT_WEBAUDIO",()=>{this._source=new rC(n,!1,this._getOriginVolumeLevel?n:void 0),re("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0),h(),this.emit(E0.UPDATE_TRACK_SOURCE)})}setVolume(n){xn(n,"volume",0,1e3),this._volume=n,this._source.setVolume(n/100),this._useAudioElement&&bo.setVolume(this.getTrackId(),n);try{if(this._bypassWebAudio)return void U.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const r=this._source.createOutputTrack();this._mediaStreamTrack!==r&&(this._mediaStreamTrack=r,nr(this,dt.NEED_REPLACE_TRACK,this).then(()=>{U.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(o=>{U.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),o)}))}catch{}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(n){if(!this._useAudioElement)throw new Q(z.NOT_SUPPORTED,"your browser does not support setting the audio output device");await bo.setSinkID(this.getTrackId(),n)}async setEnabled(n,r,o){return this._setEnabled(n,r,o)}async _setEnabled(n,r,o){if(!o){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(U.info("[".concat(this.getTrackId(),"] start setEnabled"),n),n){this._originMediaStreamTrack.enabled=!0;try{o||(this._enabled=!0),await nr(this,dt.NEED_ENABLE_TRACK,this),U.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(n," success"))}catch(s){throw o||(this._enabled=!1),U.error("[".concat(this.getTrackId(),"] setEnabled to true error"),s.toString()),s}}else{this._originMediaStreamTrack.enabled=!1,o||(this._enabled=!1);try{await nr(this,dt.NEED_DISABLE_TRACK,this)}catch(s){throw o||(this._enabled=!0),U.error("[".concat(this.getTrackId(),"] setEnabled to false error"),s.toString()),s}}}async setMuted(n){n!==this._muted&&(this.stateCheck("muted",n),this._muted=n,this._originMediaStreamTrack.enabled=!n,U.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(n)),n?await nr(this,dt.NEED_MUTE_TRACK,this):await nr(this,dt.NEED_UNMUTE_TRACK,this))}getStats(){return mp(()=>{U.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),fs(this,dt.GET_STATS)||cC({},jy)}setAudioFrameCallback(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!n)return this._source.removeAllListeners(oo.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(r),this._source.removeAllListeners(oo.ON_AUDIO_BUFFER),this._source.on(oo.ON_AUDIO_BUFFER,o=>n(o))}play(){U.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(U.debug("[".concat(this.getTrackId(),"] start audio playback in element")),bo.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){U.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?bo.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];U.debug("[".concat(this.getTrackId(),"] update player source track")),n&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&bo.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(n,r){this._originMediaStreamTrack!==n&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),n.addEventListener("ended",this._handleTrackEnded),r&&this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=n,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this.processor.updateInput({track:n,context:this.processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await nr(this,dt.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(n))}renewMediaStreamTrack(n){return Me.resolve(void 0)}pipe(n){if(this._bypassWebAudio)throw new Q(z.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===n)return n;if(n._source)throw new Q(z.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),n}unpipe(){var n;if(!this.processor)return;const r=this.processor;(n=this._source.processSourceNode)===null||n===void 0||n.disconnect(),this.processor._source=!1,this.processor=void 0,r.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(gi.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(n),await nr(this,dt.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await nr(this,dt.NEED_REPLACE_TRACK,this))}),this.processorDestination.on(gi.ON_NODE,n=>{this._source.processedNode=n})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(gi.ON_TRACK),this.processorDestination.removeAllListeners(gi.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(ao.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(ao.REQUEST_CONSTRAINTS)}}).prototype,"_source",[vP],Object.getOwnPropertyDescriptor(ln.prototype,"_source"),ln.prototype),_e(ln.prototype,"processorContext",[EP],Object.getOwnPropertyDescriptor(ln.prototype,"processorContext"),ln.prototype),_e(ln.prototype,"processorDestination",[_P],Object.getOwnPropertyDescriptor(ln.prototype,"processorDestination"),ln.prototype),_e(ln.prototype,"setVolume",[SP],Object.getOwnPropertyDescriptor(ln.prototype,"setVolume"),ln.prototype),_e(ln.prototype,"setPlaybackDevice",[yP,CP],Object.getOwnPropertyDescriptor(ln.prototype,"setPlaybackDevice"),ln.prototype),_e(ln.prototype,"setEnabled",[bP,TP,RP],Object.getOwnPropertyDescriptor(ln.prototype,"setEnabled"),ln.prototype),_e(ln.prototype,"setMuted",[IP,wP,OP],Object.getOwnPropertyDescriptor(ln.prototype,"setMuted"),ln.prototype),_e(ln.prototype,"getStats",[AP],Object.getOwnPropertyDescriptor(ln.prototype,"getStats"),ln.prototype),_e(ln.prototype,"setAudioFrameCallback",[NP],Object.getOwnPropertyDescriptor(ln.prototype,"setAudioFrameCallback"),ln.prototype),_e(ln.prototype,"play",[xP,PP],Object.getOwnPropertyDescriptor(ln.prototype,"play"),ln.prototype),_e(ln.prototype,"stop",[DP,kP],Object.getOwnPropertyDescriptor(ln.prototype,"stop"),ln.prototype),_e(ln.prototype,"close",[LP],Object.getOwnPropertyDescriptor(ln.prototype,"close"),ln.prototype),_e(ln.prototype,"pipe",[MP],Object.getOwnPropertyDescriptor(ln.prototype,"pipe"),ln.prototype),_e(ln.prototype,"unpipe",[UP],Object.getOwnPropertyDescriptor(ln.prototype,"unpipe"),ln.prototype),ln),_0=(VP=rt({argsMap:(n,r)=>[n.getTrackId(),r]}),FP=tr(),BP=gd("MicrophoneAudioTrack","_enabledMutex"),jP=rt({argsMap:(n,r,o)=>[n.getTrackId(),r,o]}),$P=tr(),HP=rt({argsMap:n=>[n.getTrackId()]}),_e((js=class extends vi{get __className__(){return"MicrophoneAudioTrack"}constructor(n,r,o,s){super(n,r.encoderConfig?u0(r.encoderConfig):{},s,re("GET_VOLUME_OF_MUTED_AUDIO_TRACK"),!0),N(this,"_config",void 0),N(this,"_deviceName","default"),N(this,"_constraints",void 0),N(this,"_originalConstraints",void 0),N(this,"_enabled",!0),this._config=r,this._constraints=o,this._originalConstraints=o,this._deviceName=n.label,typeof r.bypassWebAudio=="boolean"&&(this._bypassWebAudio=r.bypassWebAudio),(id()||cy())&&cn.bindInterruptDetectorTrack(this),this.on(E0.UPDATE_TRACK_SOURCE,()=>{this.bindProcessorContextEvents()}),nP()&&this.bindProcessorContextEvents()}async setDevice(n){if(U.info("[".concat(this.getTrackId(),"] start set device to ").concat(n)),this._enabled)try{const r=await zo.getDeviceById(n),o={};o.audio=cC({},this._constraints),o.audio.deviceId={exact:n},this._originMediaStreamTrack.stop();let s=null;try{s=await La(o,this.getTrackId())}catch(l){throw U.error("[".concat(this.getTrackId(),"] setDevice failed"),l.toString()),s=await La({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(s.getAudioTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(s.getAudioTracks()[0],!1),this._deviceName=r.label,this._config.microphoneId=n,this._constraints.deviceId={exact:n}}catch(r){throw U.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}else try{const r=await zo.getDeviceById(n);this._deviceName=r.label,this._config.microphoneId=n,this._constraints.deviceId={exact:n}}catch(r){throw U.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}U.info("[".concat(this.getTrackId(),"] set device to ").concat(n," success"))}async setEnabled(n,r,o){if(r)return U.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(n);if(!o){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(U.info("[".concat(this.getTrackId(),"] start setEnabled"),n),!n){var s;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),(s=this._source.clonedTrack)===null||s===void 0||s.stop(),o||(this._enabled=!1);try{await nr(this,dt.NEED_DISABLE_TRACK,this)}catch(m){throw U.error("[".concat(this.getTrackId(),"] setEnabled false failed"),m.toString()),m}return}const l=cC({},this._constraints),h=zo.searchDeviceIdByName(this._deviceName);h&&!l.deviceId&&(l.deviceId=h);try{o||(this._enabled=!0);const m=await La({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(m.getAudioTracks()[0],!1),await nr(this,dt.NEED_ENABLE_TRACK,this)}catch(m){throw o||(this._enabled=!1),U.error("[".concat(this.getTrackId(),"] setEnabled true failed"),m.toString()),m}U.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(id()||cy())&&cn.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((ki()||Us())&&this._enabled&&!this._isClosed&&cn.duringInterruption){const n=async()=>{cn.off($r.IOS_INTERRUPTION_END,n),this._enabled&&!this._isClosed&&(U.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};cn.on($r.IOS_INTERRUPTION_END,n)}else U.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(Jc.TRACK_ENDED)}async renewMediaStreamTrack(n){const r=n||this._constraints,o=zo.searchDeviceIdByName(this._deviceName);if(o&&!r.deviceId&&(r.deviceId=o),this._constraints=r,this._enabled){this._originMediaStreamTrack.stop();const s=await La({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(s.getAudioTracks()[0],!0)}}bindProcessorContextEvents(){this.processorContext.on(ao.REQUEST_UPDATE_CONSTRAINTS,async(n,r,o)=>{try{const s=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(s),r()}catch(s){o(s)}}),this.processorContext.on(ao.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[VP,FP],Object.getOwnPropertyDescriptor(js.prototype,"setDevice"),js.prototype),_e(js.prototype,"setEnabled",[BP,jP,$P],Object.getOwnPropertyDescriptor(js.prototype,"setEnabled"),js.prototype),_e(js.prototype,"close",[HP],Object.getOwnPropertyDescriptor(js.prototype,"close"),js.prototype),js),MY=(WP=rt({argsMap:(n,r)=>[n.getTrackId(),r,n.duration]}),zP=tr(),GP=rt({argsMap:n=>[n.getTrackId()]}),KP=tr(),YP=rt({argsMap:n=>[n.getTrackId()]}),qP=tr(),XP=rt({argsMap:n=>[n.getTrackId()]}),JP=tr(),QP=rt({argsMap:n=>[n.getTrackId()]}),ZP=tr(),eD=rt({argsMap:n=>[n.getTrackId()]}),tD=tr(),_e((Ii=class extends vi{get __className__(){return"BufferSourceAudioTrack"}constructor(n,r,o,s){super(r.createOutputTrack(),o,s),N(this,"source",void 0),N(this,"_bufferSource",void 0),this.source=n,this._bufferSource=r,this._bufferSource.on(oo.AUDIO_SOURCE_STATE_CHANGE,l=>{this.emit(Jc.SOURCE_STATE_CHANGE,l)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(n){n&&this._bufferSource.updateOptions(n),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(n){this._bufferSource.seekAudioBuffer(n)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}setAudioBufferPlaybackSpeed(n){xn(n,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(n)}}).prototype,"startProcessAudioBuffer",[WP,zP],Object.getOwnPropertyDescriptor(Ii.prototype,"startProcessAudioBuffer"),Ii.prototype),_e(Ii.prototype,"pauseProcessAudioBuffer",[GP,KP],Object.getOwnPropertyDescriptor(Ii.prototype,"pauseProcessAudioBuffer"),Ii.prototype),_e(Ii.prototype,"seekAudioBuffer",[YP,qP],Object.getOwnPropertyDescriptor(Ii.prototype,"seekAudioBuffer"),Ii.prototype),_e(Ii.prototype,"resumeProcessAudioBuffer",[XP,JP],Object.getOwnPropertyDescriptor(Ii.prototype,"resumeProcessAudioBuffer"),Ii.prototype),_e(Ii.prototype,"stopProcessAudioBuffer",[QP,ZP],Object.getOwnPropertyDescriptor(Ii.prototype,"stopProcessAudioBuffer"),Ii.prototype),_e(Ii.prototype,"setAudioBufferPlaybackSpeed",[eD,tD],Object.getOwnPropertyDescriptor(Ii.prototype,"setAudioBufferPlaybackSpeed"),Ii.prototype),Ii);class so extends vi{get __className__(){return"MixingAudioTrack"}get isActive(){for(const r of this.trackList)if(r._enabled&&!r._isClosed&&!r.muted)return!0;return!1}constructor(){const r=vd().createMediaStreamDestination();super(r.stream.getAudioTracks()[0],void 0,jn(8,"track-mix-")),N(this,"trackList",void 0),N(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=r,this.trackList=[]}hasAudioTrack(r){return this.trackList.indexOf(r)!==-1}addAudioTrack(r){this.trackList.indexOf(r)===-1?(U.debug("add ".concat(r.getTrackId()," to mixing track")),r._source.outputNode.connect(this.destNode),this.trackList.push(r),this.updateEncoderConfig()):U.debug("track ".concat(r.getTrackId()," is already added"))}removeAudioTrack(r){if(this.trackList.indexOf(r)!==-1){U.debug("remove ".concat(r.getTrackId()," from mixing track"));try{r._source.outputNode.disconnect(this.destNode)}catch{}dC(this.trackList,r),this.updateEncoderConfig()}}updateEncoderConfig(){const r={};this.trackList.forEach(o=>{o._encoderConfig&&((o._encoderConfig.bitrate||0)>(r.bitrate||0)&&(r.bitrate=o._encoderConfig.bitrate),(o._encoderConfig.sampleRate||0)>(r.sampleRate||0)&&(r.sampleRate=o._encoderConfig.sampleRate),(o._encoderConfig.sampleSize||0)>(r.sampleSize||0)&&(r.sampleSize=o._encoderConfig.sampleSize),o._encoderConfig.stereo&&(r.stereo=!0))}),this._encoderConfig=r}_updateRtpTransceiver(r){this._rtpTransceiver!==r&&(this._rtpTransceiver=r,this.trackList.forEach(o=>{o instanceof so?o.emit(hp.TRANSCEIVER_UPDATED,r):o._updateRtpTransceiver(r)}))}}class UY extends Zn{constructor(){super(...arguments),N(this,"resultStorage",new Map)}setLocalAudioStats(r,o,s){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",r,this.checkAudioInputLevel(s,o)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",r,this.checkSendAudioBitrate(s,o))}setLocalVideoStats(r,o,s){this.record("SEND_VIDEO_BITRATE_TOO_LOW",r,this.checkSendVideoBitrate(s,o)),this.record("FRAMERATE_INPUT_TOO_LOW",r,this.checkFramerateInput(s,o)),this.record("FRAMERATE_SENT_TOO_LOW",r,this.checkFramerateSent(s))}setRemoteAudioStats(r,o){const s=r.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",s,this.checkAudioOutputLevel(o))}setRemoteVideoStats(r,o){const s=r.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",s,this.checkVideoDecode(o))}record(r,o,s){this.resultStorage.has(r)||this.resultStorage.set(r,{result:[],isPrevNormal:!0});const l=this.resultStorage.get(r);if(l&&(l.result.push(s),l.result.length>=5)){const h=l.result.includes(!0);l.isPrevNormal&&!h&&this.emit("exception",rD[r],r,o),!l.isPrevNormal&&h&&this.emit("exception",rD[r]+2e3,r+"_RECOVER",o),l.isPrevNormal=h,l.result=[]}}checkAudioOutputLevel(r){return!(r.receiveBitrate>0&&r.receiveLevel===0)}checkAudioInputLevel(r,o){return o instanceof so&&!o.isActive||!!o.muted||r.sendVolumeLevel!==0}checkFramerateInput(r,o){let s=null;o._encoderConfig&&o._encoderConfig.frameRate&&(s=mc(o._encoderConfig.frameRate));const l=r.captureFrameRate;return!s||!l||!(s>10&&l<5||s<10&&s>=5&&l<=1)}checkFramerateSent(r){return!(r.captureFrameRate&&r.sendFrameRate&&r.captureFrameRate>5&&r.sendFrameRate<=1)}checkSendVideoBitrate(r,o){return!!o.muted||r.sendBitrate!==0}checkSendAudioBitrate(r,o){return o instanceof so&&!o.isActive||!!o.muted||r.sendBitrate!==0}checkVideoDecode(r){return r.receiveBitrate===0||r.decodeFrameRate!==0}}const rD={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},ua=new class{markSubscribeStart(n,r){performance.mark("agora-web-sdk/".concat(n,"/subscribe-").concat(r))}markPublishStart(n,r){performance.mark("agora-web-sdk/".concat(n,"/publish-").concat(r))}measureFromSubscribeStart(n,r){const o=performance.getEntriesByName("agora-web-sdk/".concat(n,"/subscribe-").concat(r));if(o.length>0){const s=o[o.length-1];return Math.round(performance.now()-s.startTime)}return 0}measureFromPublishStart(n,r){const o=performance.getEntriesByName("agora-web-sdk/".concat(n,"/publish-").concat(r));if(o.length>0){const s=o[o.length-1];return Math.round(performance.now()-s.startTime)}return 0}};function iD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function cu(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?iD(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):iD(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class Sd{constructor(r){N(this,"store",void 0),N(this,"onStatsException",void 0),N(this,"onUploadPublishDuration",void 0),N(this,"onStatsChanged",void 0),N(this,"localStats",new Map),N(this,"remoteStats",new Map),N(this,"updateStatsInterval",void 0),N(this,"trafficStats",void 0),N(this,"trafficStatsPeerList",[]),N(this,"uplinkStats",void 0),N(this,"exceptionMonitor",void 0),N(this,"p2pChannel",void 0),N(this,"scalabilityMode",iy.L1T1),N(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=r,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new UY,this.exceptionMonitor.on("exception",(o,s,l)=>{this.onStatsException&&this.onStatsException(o,s,l)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(We.LocalAudioTrack)||cu({},jy)}getLocalVideoTrackStats(){return this.localStats.get(We.LocalVideoTrack)||cu({},$y)}getRemoteAudioTrackStats(r){const o=(h,m)=>{if(!this.trafficStats)return m;const v=this.trafficStats.peer_delay.find(S=>S.peer_uid===h);return v&&(m.publishDuration=v.B_ppad+(Date.now()-this.trafficStats.timestamp)),m},s={};if(r){var l;const h=(l=this.remoteStats.get(r))===null||l===void 0?void 0:l.audioStats;h&&(s[r]=o(r,h))}else Array.from(this.remoteStats.entries()).forEach(h=>{let[m,{audioStats:v}]=h;v&&(s[m]=o(m,v))});return s}getRemoteNetworkQualityStats(r){const o={};if(r){var s;const l=(s=this.remoteStats.get(r))===null||s===void 0?void 0:s.networkStats;l&&(o[r]=l)}else Array.from(this.remoteStats.entries()).forEach(l=>{let[h,{networkStats:m}]=l;m&&(o[h]=m)});return o}getRemoteVideoTrackStats(r){const o=(h,m)=>{if(!this.trafficStats)return m;const v=this.trafficStats.peer_delay.find(S=>S.peer_uid===h);return v&&(m.publishDuration=v.B_ppvd+(Date.now()-this.trafficStats.timestamp)),m},s={};if(r){var l;const h=(l=this.remoteStats.get(r))===null||l===void 0?void 0:l.videoStats;h&&(s[r]=o(r,h))}else Array.from(this.remoteStats.entries()).forEach(h=>{let[m,{videoStats:v}]=h;v&&(s[m]=o(m,v))});return s}getRTCStats(){let r=0,o=0,s=0,l=0;const h=this.localStats.get(We.LocalAudioTrack);h&&(r+=h.sendBytes,o+=h.sendBitrate);const m=this.localStats.get(We.LocalVideoTrack);m&&(r+=m.sendBytes,o+=m.sendBitrate);const v=this.localStats.get(We.LocalVideoLowTrack);v&&(r+=v.sendBytes,o+=v.sendBitrate),this.remoteStats.forEach(T=>{let{audioStats:b,videoStats:I}=T;b&&(s+=b.receiveBytes,l+=b.receiveBitrate),I&&(s+=I.receiveBytes,l+=I.receiveBitrate)});let S=1;return this.trafficStats&&(S+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:S,SendBitrate:o,SendBytes:r,RecvBytes:s,RecvBitrate:l,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(r){this.localStats.set(r,void 0)}removeLocalStats(r){r?this.localStats.delete(r):this.localStats.clear()}addRemoteStats(r){this.remoteStats.set(r,{})}removeRemoteStats(r){r?this.remoteStats.delete(r):this.remoteStats.clear()}addP2PChannel(r){this.p2pChannel=r}updateTrafficStats(r){r.peer_delay=r.peer_delay.filter(o=>o.B_ppad!==void 0||o.B_ppvd!==void 0),r.peer_delay.filter(o=>this.trafficStatsPeerList.indexOf(o.peer_uid)===-1).forEach(o=>{var s;const l=(s=this.p2pChannel)===null||s===void 0?void 0:s.getRemoteMedia(o.peer_uid),h=l!=null&&l.videoSSRC?ua.measureFromSubscribeStart(this.store.clientId,l.videoSSRC):0,m=l!=null&&l.audioSSRC?ua.measureFromSubscribeStart(this.store.clientId,l.audioSSRC):0;o.B_ppad!==void 0&&o.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(o.peer_uid,o.B_ppad,o.B_ppvd,h>m?h:m),this.trafficStatsPeerList.push(o.peer_uid))}),this.trafficStats=r}updateUplinkStats(r){this.uplinkStats&&this.uplinkStats.B_fir!==r.B_fir&&U.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(r.B_fir)),this.uplinkStats=r}static isRemoteVideoFreeze(r,o,s){if(!r)return!1;const l=!!s&&o.framesDecodeFreezeTime>s.framesDecodeFreezeTime,h=!s||o.framesDecodeCount>s.framesDecodeCount;return l||!h}static isRemoteAudioFreeze(r){return!!r&&r._isFreeze()}isLocalVideoFreeze(r){return!(!r.inputFrame||!r.sentFrame)&&r.inputFrame.frameRate>5&&r.sentFrame.frameRate<3}updateLocalStats(r){Array.from(this.localStats.entries()).forEach(o=>{let[s,l]=o;switch(s){case We.LocalVideoTrack:case We.LocalVideoLowTrack:{const m=l,v=cu({},$y),S=r.getStats(),T=r.getLocalMedia(s);if(S){const b=S.videoSend.find(I=>I.ssrc===(T==null?void 0:T.ssrcs[0].ssrcId));if(b){const I=r.getLocalVideoSize(),L=r.getEncoderConfig(We.LocalVideoTrack);b.codec!=="H264"&&b.codec!=="H265"&&b.codec!=="VP8"&&b.codec!=="VP9"&&b.codec!=="AV1X"&&b.codec!=="AV1"||(v.codecType=b.codec),v.sendBytes=b.bytes,v.sendBitrate=m?8*Math.max(0,v.sendBytes-m.sendBytes):0,b.inputFrame?(v.captureFrameRate=b.inputFrame.frameRate,v.captureResolutionHeight=b.inputFrame.height,v.captureResolutionWidth=b.inputFrame.width):I&&(v.captureResolutionWidth=I.width,v.captureResolutionHeight=I.height),b.sentFrame?(v.sendFrameRate=b.sentFrame.frameRate,v.sendResolutionHeight=b.sentFrame.height,v.sendResolutionWidth=b.sentFrame.width):I&&(v.sendResolutionWidth=I.width,v.sendResolutionHeight=I.height),b.avgEncodeMs&&(v.encodeDelay=b.avgEncodeMs),L&&L.bitrateMax&&(v.targetSendBitrate=1e3*L.bitrateMax),v.sendPackets=b.packets,v.sendPacketsLost=b.packetsLost,v.totalDuration=m?m.totalDuration+1:1,v.totalFreezeTime=m?m.totalFreezeTime:0,this.isLocalVideoFreeze(b)&&(v.totalFreezeTime+=1),b.scalabilityMode&&this.scalabilityMode!==b.scalabilityMode&&(U.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(b.scalabilityMode)),this.scalabilityMode=b.scalabilityMode)}this.trafficStats&&(v.sendPacketsLost=this.trafficStats.B_pvlr4/100)}var h;this.localStats.set(s,v),((m==null?void 0:m.sendResolutionWidth)!==v.sendResolutionWidth||(m==null?void 0:m.sendResolutionHeight)!==v.sendResolutionHeight)&&((h=this.onStatsChanged)===null||h===void 0||h.call(this,"resolution",{width:v.sendResolutionWidth,height:v.sendResolutionHeight})),v&&T&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,T.track,v);break}case We.LocalAudioTrack:{const m=l,v=cu({},jy),S=r.getStats(),T=r.getLocalMedia(s);if(S){const b=S.audioSend.find(I=>I.ssrc===(T==null?void 0:T.ssrcs[0].ssrcId));if(b){if(b.codec!=="opus"&&b.codec!=="aac"&&b.codec!=="PCMU"&&b.codec!=="PCMA"&&b.codec!=="G722"||(v.codecType=b.codec),b.inputLevel)v.sendVolumeLevel=Math.round(32767*b.inputLevel);else{const I=r.getLocalAudioVolume();I&&(v.sendVolumeLevel=Math.round(32767*I))}v.sendBytes=b.bytes,v.sendPackets=b.packets,v.sendPacketsLost=b.packetsLost,v.sendBitrate=m?8*Math.max(0,v.sendBytes-m.sendBytes):0}}this.trafficStats&&(v.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(We.LocalAudioTrack,v),v&&T&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,T.track,v);break}}})}updateRemoteStats(r){Array.from(this.remoteStats.entries()).forEach(o=>{let[s,{videoStats:l,audioStats:h,videoPcStats:m}]=o;const v=h,S=l,T=m,b=cu({},xx),I=cu({},Px),L=cu({},gK),{audioTrack:V,videoTrack:K,audioSSRC:Y,videoSSRC:q}=r.getRemoteMedia(s),ue=r.getStats(),me=ue==null?void 0:ue.audioRecv.find(Te=>Te.ssrc===Y),ye=ue==null?void 0:ue.videoRecv.find(Te=>Te.ssrc===q),qe=this.trafficStats&&this.trafficStats.peer_delay.find(Te=>Te.peer_uid===s);if(me&&(me.codec!=="opus"&&me.codec!=="aac"&&me.codec!=="PCMU"&&me.codec!=="PCMA"&&me.codec!=="G722"||(b.codecType=me.codec),me.outputLevel?b.receiveLevel=Math.round(32767*me.outputLevel):V&&(b.receiveLevel=Math.round(32767*V.getVolumeLevel())),b.receiveBytes=me.bytes,b.receivePackets=me.packets,b.receivePacketsLost=me.packetsLost,b.packetLossRate=b.receivePacketsLost/(b.receivePackets+b.receivePacketsLost),b.receiveBitrate=v?8*Math.max(0,b.receiveBytes-v.receiveBytes):0,b.totalDuration=v?v.totalDuration+1:1,b.totalFreezeTime=v?v.totalFreezeTime:0,b.freezeRate=b.totalFreezeTime/b.totalDuration,b.receiveDelay=me.jitterBufferMs,b.totalDuration>10&&Sd.isRemoteAudioFreeze(V)&&(b.totalFreezeTime+=1)),ye){ye.codec!=="H264"&&ye.codec!=="H265"&&ye.codec!=="VP8"&&ye.codec!=="VP9"&&ye.codec!=="AV1X"&&ye.codec!=="AV1"||(I.codecType=ye.codec),I.receiveBytes=ye.bytes,I.receiveBitrate=S?8*Math.max(0,I.receiveBytes-S.receiveBytes):0,I.decodeFrameRate=ye.decodeFrameRate<0?0:ye.decodeFrameRate,I.renderFrameRate=ye.decodeFrameRate<0?0:ye.decodeFrameRate,ye.outputFrame&&(I.renderFrameRate=ye.outputFrame.frameRate),ye.receivedFrame?(I.receiveFrameRate=ye.receivedFrame.frameRate,I.receiveResolutionHeight=ye.receivedFrame.height,I.receiveResolutionWidth=ye.receivedFrame.width):K&&(I.receiveResolutionHeight=K._videoHeight||0,I.receiveResolutionWidth=K._videoWidth||0),ye.framesRateFirefox!==void 0&&(I.receiveFrameRate=Math.round(ye.framesRateFirefox)),I.receivePackets=ye.packets,I.receivePacketsLost=ye.packetsLost,I.packetLossRate=I.receivePacketsLost/(I.receivePackets+I.receivePacketsLost),I.totalDuration=S?S.totalDuration+1:1,I.totalFreezeTime=S?S.totalFreezeTime:0,I.receiveDelay=ye.jitterBufferMs||0;const Te=!!q&&r.getRemoteVideoIsReady(q);K&&Te&&Sd.isRemoteVideoFreeze(K,ye,T)&&(I.totalFreezeTime+=1),I.freezeRate=I.totalFreezeTime/I.totalDuration}qe&&(b.end2EndDelay=qe.B_ad,I.end2EndDelay=qe.B_vd,b.transportDelay=qe.B_ed,I.transportDelay=qe.B_ed,b.currentPacketLossRate=qe.B_ealr4/100,I.currentPacketLossRate=qe.B_evlr4/100,L.uplinkNetworkQuality=qe.B_punq?qe.B_punq:0,L.downlinkNetworkQuality=qe.B_pdnq?qe.B_pdnq:0),this.remoteStats.set(s,{audioStats:b,videoStats:I,videoPcStats:ye,networkStats:L}),V&&this.exceptionMonitor.setRemoteAudioStats(V,b),K&&this.exceptionMonitor.setRemoteVideoStats(K,I)})}}const fc=new class extends Zn{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),N(this,"_lastHiddenTime",0),N(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),U.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}};function oD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function S0(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?oD(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):oD(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function y0(n){return n.match(/^[\.\:\d]+$/)?"".concat(n.replace(/[^\d]/g,"-"),".").concat(re("TURN_DOMAIN")):(U.info("Cannot recognized as IP address ".concat(n,". Used As Host instead")),n)}function aD(n,r){var o,s;const l=re("GATEWAY_DOMAINS");let h=l[1]&&r.indexOf(l[1])!==-1?1:0;n.addresses=n.addresses||[];const m=n.addresses.map(S=>S.domain_prefix?{address:"".concat(S.domain_prefix,".").concat(l[h++%l.length],":").concat(S.port)}:S.ip.match(/^[\.\:\d]+$/)?{ip:S.ip,port:S.port,address:"".concat(S.ip.replace(/[^\d]/g,"-"),".").concat(l[h++%l.length],":").concat(S.port)}:(U.info("Cannot recognized as IP address ".concat(S.ip,". Used As Host instead")),{ip:S.ip,port:S.port,address:"".concat(S.ip,":").concat(S.port)}));if((o=n.detail)!==null&&o!==void 0&&o[18]&&typeof((s=n.detail)===null||s===void 0?void 0:s[18])=="string"){const S=n.detail[18],T=S==null?void 0:S.split(";");for(let b=0;b<T.length;b++){var v;const I=lc(v=T[b]).call(v);m[b]&&I&&(m[b].ip6=I)}}return{gatewayAddrs:m,uid:n.uid,cid:n.cid,cert:n.cert,vid:n.detail&&n.detail[8],uni_lbs_ip:n.detail&&n.detail[1],res:n,csIp:n.detail&&n.detail[502]}}function mc(n){return typeof n=="number"?n:n.exact||n.ideal||n.max||n.min||0}function sD(n){const r=n._encoderConfig;if(!r)return{};const o={resolution:r.width&&r.height?"".concat(mc(r.width),"x").concat(mc(r.height)):void 0,maxVideoBW:r.bitrateMax,minVideoBW:r.bitrateMin};return typeof r.frameRate=="number"?(o.maxFrameRate=r.frameRate,o.minFrameRate=r.frameRate):r.frameRate&&(o.maxFrameRate=r.frameRate.max||r.frameRate.ideal||r.frameRate.exact||r.frameRate.min,o.minFrameRate=r.frameRate.min||r.frameRate.ideal||r.frameRate.exact||r.frameRate.max),o}function cD(n){return n>=0&&n<.17?1:n>=.17&&n<.36?2:n>=.36&&n<.59?3:n>=.59&&n<=1?4:n>1?5:0}function lC(n,r){let o,s,l;switch(r){case jr.CHOOSE_SERVER:o=4096,s="choose server";break;case jr.CLOUD_PROXY:o=1048576,s="proxy";break;case jr.CLOUD_PROXY_5:o=4194304,s="proxy5";break;case jr.CLOUD_PROXY_FALLBACK:o=4194310,s="proxy fallback";break;default:throw new Q(z.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:n.detail&&n.detail[502],retry:!1})}if(n.response_body.forEach(h=>{h.buffer&&h.buffer.flag===o&&(l={code:h.buffer.code,addresses:(h.buffer.edges_services||[]).map(m=>S0(S0({},m),{},{ticket:h.buffer.cert})),server_ts:n.enter_ts,uid:h.buffer.uid,cid:h.buffer.cid,cname:h.buffer.cname,detail:S0(S0({},h.buffer.detail),n.detail),flag:h.buffer.flag,opid:n.opid,cert:h.buffer.cert})}),!l)throw new Q(z.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(s," from multi unilbs response"),{csIp:n.detail&&n.detail[502]});return l}async function VY(n,r){return await Me.all(n.addresses.map(async o=>({address:y0(o.ip),tcpport:o.port,udpport:o.port,username:r&&re("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?r.toString():Fo.username,password:r&&re("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await CY(r.toString()):Fo.password})))}function FY(n,r){const o=r._videoWidth||r.getMediaStreamTrack(!0).getSettings().width;return o||U.warning("cannot get original video track's width, default scale down 4 times for low stream"),o?o/mc(n.width):4}function C0(n){let{candidateType:r,relayProtocol:o,type:s,address:l,port:h,protocol:m}=n;return s==="local-candidate"?{candidateType:r,relayProtocol:o,protocol:m}:{candidateType:r,relayProtocol:o,address:l,port:h,protocol:m}}function lD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function lu(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?lD(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):lD(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function yd(n){return window.TextEncoder?new TextEncoder().encode(n).length:n.length}function Ei(n){return new Me(r=>{window.setTimeout(r,n)})}function BY(n){const r=new Q(z.TIMEOUT,"timeout");return new Me((o,s)=>{window.setTimeout(()=>s(r),n)})}function jn(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,r=arguments.length>1?arguments[1]:void 0;const o=Math.random().toString(16).substr(2,n).toLowerCase();return o.length===n?"".concat(r).concat(o):"".concat(r).concat(o)+jn(n-o.length,"")}function uC(){return jn(32,"").toUpperCase()}const b0=()=>{};function uD(n){return new Me((r,o)=>{let s=!1;const l=document.createElement("video");l.setAttribute("autoplay",""),l.setAttribute("muted",""),l.muted=!0,l.autoplay=!0,l.setAttribute("playsinline",""),l.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(l);const h=ki()?"canplay":"playing";l.addEventListener(h,()=>{const m=l.videoWidth,v=l.videoHeight;!m&&Qn()||(s=!0,l.srcObject=null,l.remove(),r([m,v]))}),l.srcObject=new MediaStream([n]),l.play().catch(b0),setTimeout(()=>{s||(l.srcObject=null,l.remove(),r([l.videoWidth,l.videoHeight]))},4e3)})}function Cd(n){return Me.all(n.map(r=>r.then(o=>{throw o},o=>o))).then(r=>{throw r},r=>r)}function _i(n,r){for(var o=arguments.length,s=new Array(o>2?o-2:0),l=2;l<o;l++)s[l-2]=arguments[l];return n.getListeners(r).length===0?Me.reject(new Q(z.UNEXPECTED_ERROR,"can not emit promise")):new Me((h,m)=>{n.emit(r,...s,h,m)})}function nr(n,r){if(n.getListeners(r).length===0)return Me.resolve();for(var o=arguments.length,s=new Array(o>2?o-2:0),l=2;l<o;l++)s[l-2]=arguments[l];return _i(n,r,...s)}function fs(n,r){if(n.getListeners(r).length===0)return null;for(var o=arguments.length,s=new Array(o>2?o-2:0),l=2;l<o;l++)s[l-2]=arguments[l];return uu(n,r,...s)}function uu(n,r){let o=null,s=null;for(var l=arguments.length,h=new Array(l>2?l-2:0),m=2;m<l;m++)h[m-2]=arguments[m];if(n.emit(r,...h,v=>{o=v},v=>{s=v}),s!==null)throw s;if(o===null)throw new Q(z.UNEXPECTED_ERROR,"handler is not sync");return o}function dC(n,r){const o=n.indexOf(r);o!==-1&&n.splice(o,1)}function dD(n){const r=[];return n.forEach(o=>{r.indexOf(o)===-1&&r.push(o)}),r}function ms(n){Me.resolve().then(n)}function Tr(n){return JSON.parse(JSON.stringify(n))}const hD={};function mp(n,r){hD[r]||(hD[r]=!0,n())}function hC(n){const r=window.atob(n),o=new Uint8Array(new ArrayBuffer(r.length));for(let s=0;s<r.length;s+=1)o[s]=r.charCodeAt(s);return o}function T0(n){let r="";for(let o=0;o<n.length;o+=1)r+=String.fromCharCode(n[o]);return window.btoa(r)}const pD=new class{constructor(){N(this,"fnMap",new Map)}throttleByKey(n,r,o,s){for(var l=arguments.length,h=new Array(l>4?l-4:0),m=4;m<l;m++)h[m-4]=arguments[m];if(this.fnMap.has(r)){const v=this.fnMap.get(r);if(v.threshold!==o){v.fn(...v.args),clearTimeout(v.timer);const S=window.setTimeout(()=>{const T=this.fnMap.get(r);T&&T.fn(...T.args),this.fnMap.delete(r)},o);this.fnMap.set(r,{fn:n,threshold:o,timer:S,args:h,skipFn:s})}else v.skipFn&&v.skipFn(...v.args),this.fnMap.set(r,lu(lu({},v),{},{fn:n,args:h,skipFn:s}))}else{const v=window.setTimeout(()=>{const S=this.fnMap.get(r);S&&S.fn(...S.args),this.fnMap.delete(r)},o);this.fnMap.set(r,{fn:n,threshold:o,timer:v,args:h,skipFn:s})}}},fD=pD.throttleByKey.bind(pD),gp=async n=>{let{fragementLength:r,referenceList:o,asyncMapHandler:s,allFailedhandler:l,promisesCollector:h}=n,m=0;const v=r;let S,T=0;const b=async()=>{const I=(()=>{const L=m*v,V=L+v;return o.slice(L,V).map(s)})();h&&h.push(...I);try{S=await Cd(I)}catch(L){if(T+=v,m++,!(T>=o.length))return void await b();l(L)}I.forEach(L=>L.cancel())};return await b(),S};function mD(n){return typeof n=="object"&&n!==null&&!(n instanceof RegExp)}const jY={[hd.ACCESS_POINT]:{[fi.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[fi.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[fi.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[fi.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[fi.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[fi.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[fi.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[fi.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[fi.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[fi.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[fi.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[fi.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[fi.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[fi.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[fi.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[fi.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[fi.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[fi.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[hd.UNILBS]:{[Bo.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Bo.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Bo.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Bo.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Bo.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Bo.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Bo.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Bo.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Bo.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Bo.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Bo.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Bo.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[hd.STRING_UID_ALLOCATOR]:{[up.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[up.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[up.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function R0(n){const r=jY[Math.floor(n/1e4)];if(!r)return{desc:"unkonw error",retry:!1};const o=r[n%1e4];if(!o){if(Math.floor(n/1e4)===hd.ACCESS_POINT){const s=n%1e4;if(s.toString()[0]==="1")return{desc:n.toString(),retry:!1};if(s.toString()[0]==="2")return{desc:n.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return o}const $Y={[nt.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[nt.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[nt.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[nt.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[nt.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[nt.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[nt.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[nt.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[nt.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[nt.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[nt.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[nt.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[nt.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[nt.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[nt.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[nt.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[nt.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[nt.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[nt.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[nt.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[nt.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[nt.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[nt.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[nt.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[nt.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[nt.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[nt.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[nt.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[nt.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[nt.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[nt.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[nt.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[nt.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[nt.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[nt.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[nt.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[nt.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[nt.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[nt.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[nt.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[nt.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[nt.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[nt.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[nt.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[nt.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[nt.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[nt.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[nt.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[nt.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[nt.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[nt.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[nt.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[nt.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[nt.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[nt.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[nt.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[nt.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[nt.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[nt.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[nt.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[nt.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[nt.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[nt.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[nt.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function vp(n){return $Y[n]||{desc:"UNKNOW_ERROR_".concat(n),action:"failed"}}function gD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}class bd extends Zn{get url(){return this.websocket?this.websocket.url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(r){["tryNext","recover"].includes(r)&&this.resetReconnectCount(r),this._reconnectMode=r}get state(){return this._state}set state(r){r!==this._state&&(this._state=r,this._state==="reconnecting"?this.emit(Nt.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(Nt.CONNECTED):this._state==="closed"?this.emit(Nt.CLOSED):this._state==="failed"&&this.emit(Nt.FAILED))}resetReconnectCount(r){U.debug("websocket reset reconnect count, reason: "+r),this.reconnectCount=0}constructor(r,o){let s=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=arguments.length>3&&arguments[3]!==void 0&&arguments[3],h=arguments.length>4?arguments[4]:void 0;super(),N(this,"connectionID",0),N(this,"currentURLIndex",0),N(this,"urls",void 0),N(this,"_reconnectMode","tryNext"),N(this,"reconnectReason",void 0),N(this,"_initMutex",new Ui("websocket")),N(this,"name",void 0),N(this,"_state","closed"),N(this,"reconnectInterrupter",void 0),N(this,"websocket",void 0),N(this,"retryConfig",void 0),N(this,"reconnectCount",0),N(this,"forceCloseTimeout",5e3),N(this,"onlineReconnectListener",void 0),N(this,"useCompress",void 0),N(this,"tryDoubleDomain",!1),N(this,"wsInflateLength",0),N(this,"wsDeflateLength",0),N(this,"closeEstablishingWs",()=>{}),N(this,"store",void 0),N(this,"joinChannelServiceRecordIndex",void 0),this.store=h,this.name=r,this.retryConfig=function(b){for(var I=1;I<arguments.length;I++){var L=arguments[I]!=null?arguments[I]:{};I%2?gD(Object(L),!0).forEach(function(V){N(b,V,L[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(L)):gD(Object(L)).forEach(function(V){Object.defineProperty(b,V,Object.getOwnPropertyDescriptor(L,V))})}return b}({},o),this.useCompress=s,this.tryDoubleDomain=l;const{timeout:m,timeoutFactor:v}=o,S=Math.max(300,Math.floor(3*m/5)),T=Math.max(1.2,Math.floor(8*v)/10);Ti.ONLINE&&(this.retryConfig.timeout=S,this.retryConfig.timeoutFactor=T),br.on(Qc.NETWORK_STATE_CHANGE,(b,I)=>{b!==I&&(this.resetReconnectCount("network state change: ".concat(I," -> ").concat(b)),b===Ti.ONLINE?(this.retryConfig.timeout=S,this.retryConfig.timeoutFactor=T):(this.retryConfig.timeout=m,this.retryConfig.timeoutFactor=v))})}getConnection(){return this.websocket||void 0}init(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;this.forceCloseTimeout=o;const s=(l,h)=>{this.urls=r;const m=this.urls[this.currentURLIndex];this.state="connecting",this.createWebSocketConnection(m).then(l).catch(h),this.once(Nt.CLOSED,()=>h(new Q(z.WS_DISCONNECT))),this.once(Nt.CONNECTED,()=>l())};return this._initMutex.lock().then(l=>new Me((h,m)=>{s(h,m)}).then(()=>{l()}).catch(()=>{l()}))}close(r,o){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const s=this.websocket;o?setTimeout(()=>s.close(),500):s.close(),this.websocket=void 0}this.state=r?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(r,o){if(!this.websocket)return void U.warning("[".concat(this.name,"] can not reconnect, no websocket"));var s;r!==void 0&&(this.reconnectMode=r),U.debug("[".concat(this.name,"] reconnect is triggered initiative")),typeof this.joinChannelServiceRecordIndex=="number"&&((s=this.store)===null||s===void 0||s.recordJoinChannelService({status:"error",errors:[new Error(o)]},this.joinChannelServiceRecordIndex));const l=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),l&&l.bind(this.websocket)({code:9999,reason:o})}sendMessage(r){let o=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new Q(z.WS_ABORT,"websocket is not ready");try{o||(r=JSON.stringify(r)),this.websocket.send(r)}catch(s){throw new Q(z.WS_ERR,"send websocket message error"+s.toString())}}setWsInflateData(r){this.wsDeflateLength=this.wsDeflateLength+r.originLength,this.wsInflateLength=this.wsInflateLength+r.compressedLength}getWsInflateData(){const r=this.wsInflateLength,o=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:r,wsDeflateLength:o}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(r,o){return this.connectionID+=1,this.connectionID,this.joinChannelServiceRecordIndex=void 0,new Me((s,l)=>{var h;const m=b=>{var I;(I=this.store)===null||I===void 0||I.signalChannelOpen(),U.debug("[".concat(this.name,"] websocket opened:"),b),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),s()},v=async b=>{if(U.debug("[".concat(this.name,"] websocket close ").concat(this.websocket&&this.websocket.url,", code: ").concat(b.code,", reason: ").concat(b.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount<this.retryConfig.maxRetryCount){this.state==="connected"&&(this.reconnectReason=b.reason,this.state="reconnecting");const I=fs(this,Nt.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,L=await this.reconnectWithAction(I);if(this.state==="closed")return void U.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!L)return l(new Q(z.WS_DISCONNECT,"websocket reconnect failed: ".concat(b.code))),void this.close(!0);s()}else l(new Q(z.WS_DISCONNECT,"websocket close: ".concat(b.code))),this.close()},S=b=>{this.emit(Nt.ON_MESSAGE,b)};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),re("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(r=re("GATEWAY_WSS_ADDRESS")),U.debug("[".concat(this.name,"] start connect, url: ").concat(r));const T=(h=this.store)===null||h===void 0?void 0:h.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});this.chooseBestWebsocketConnection(r,!!o,T).then(b=>{var I;this.websocket=b,m&&m(b.url),b.onclose=v,b.onmessage=S,(I=this.store)===null||I===void 0||I.recordJoinChannelService({endTs:Date.now(),status:"success"},T),this.joinChannelServiceRecordIndex=T}).catch(b=>{var I;if((I=this.store)===null||I===void 0||I.recordJoinChannelService({endTs:Date.now(),status:b instanceof Q&&b.code===z.WS_ABORT?"aborted":"error",errors:[b]},T),this.state!=="closed"){if(b instanceof Q&&b.code===z.WS_ERR){const L=new Q(z.WS_ERR,"init websocket failed! Error: ".concat(b.toString()));return U.error("[".concat(this.name,"]").concat(L)),void l(L)}v&&v(b)}else l(new Q(z.WS_DISCONNECT,"websocket is closed: ".concat(b.toString())))})})}async reconnectWithAction(r){let o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||!this.urls||this.state==="closed")return!1;this.onlineReconnectListener||br.networkState!==Ti.OFFLINE||(this.onlineReconnectListener=br.onlineWaiter&&br.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let s=!0;if(this.reconnectInterrupter=()=>{s=!1},o){const m=Ty(this.reconnectCount,this.retryConfig);U.debug("[".concat(this.name,"] wait ").concat(m,"ms to reconnect websocket, mode: ").concat(r)),await Me.race([Ei(m),this.onlineReconnectListener||new Me(()=>{})])}if(this.state==="closed"||!s)return!1;this.reconnectCount+=1;const l=async(m,v)=>{this.emit(Nt.RECONNECT_CREATE_CONNECTION,v),await this.createWebSocketConnection(m)};try{if(r==="retry"){const m=this.urls[this.currentURLIndex];this.emit(Nt.RECONNECT_WAITTING_FINISH,r),await l(m,r)}else if(r==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return await this.reconnectWithAction("recover",!1);U.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex));const m=this.urls[this.currentURLIndex];this.emit(Nt.RECONNECT_WAITTING_FINISH,r),await l(m,r)}else if(r==="recover"){U.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(Nt.RECONNECT_WAITTING_FINISH,r),this.urls=await _i(this,Nt.REQUEST_NEW_URLS),this.currentURLIndex=0;const m=this.urls[this.currentURLIndex];await l(m,r)}return!0}catch(m){var h;return U.error("[".concat(this.name,"] reconnect failed"),m.toString()),m!=null&&(h=m.data)!==null&&h!==void 0&&h.desc&&Array.isArray(m.data.desc)&&m.data.desc.length&&m.data.desc.includes("dynamic key expired")?(this.emit(Nt.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(r,o)}}async chooseBestWebsocketConnection(r,o,s){return new Me((l,h)=>{let m=!1;const v=[];this.closeEstablishingWs=()=>{U.debug("[choose-best-ws] close establishing websockets"),v.forEach(Y=>{Y.onclose=null,Y.onopen=null,Y.onmessage=null,Y.close()}),h(new Q(z.WS_ABORT,"choose best websocket aborted"))};const S=re("GATEWAY_DOMAINS");let T;const b=r.indexOf("?h="),I=S.find(Y=>b!==-1?r.includes(Y,b):r.includes(Y));U.debug("[choose-best-ws] currentDomain: ",I,", domains: ",S);let L=!this.tryDoubleDomain||o||!I;if(!L&&I){var V;const Y=Date.now();try{S.forEach(q=>{const ue=b===-1?r.replace(I,q):r.substr(0,b)+r.substr(b).replace(I,q),me=new WebSocket(ue);me.binaryType="arraybuffer",v.push(me),U.debug("[choose-best-ws] ws is connecting:",me.url)})}catch{for(U.debug("[choose-best-ws] ws create failed, fallback to single url"),v.forEach(ue=>ue.close());v.length;)v.pop();L=!0}(V=this.store)===null||V===void 0||V.recordJoinChannelService({urls:v.map(q=>q.url),service:"gateway"},s),v.forEach(q=>{q.onopen=()=>{if(m)return;const ue=Date.now()-Y;U.debug("[choose-best-ws] ws open cost ".concat(ue,"ms")),v.filter(me=>me!==q).forEach(me=>{U.debug("[choose-best-ws]close backup websocket: ".concat(me.url)),me.close()}),m=!0,l(q)},q.onclose=ue=>{T=ue,!m&&(v.find(me=>!(me.readyState===WebSocket.CLOSED||me.readyState===WebSocket.CLOSING))||(U.debug("[choose-best-ws] all websocket is closed"),m=!0,h(T)))},q.onmessage=ue=>{U.debug("[choose-best-ws]".concat(q.url," onmessage: ").concat(ue.data))}}),Ei(this.forceCloseTimeout).then(()=>{v.forEach(q=>{q.readyState!==WebSocket.OPEN&&q.close()})})}if(L){var K;let Y;U.debug("[choose-best-ws] use single url: ",r),(K=this.store)===null||K===void 0||K.recordJoinChannelService({urls:[r],service:"gateway"},s);try{Y=new WebSocket(r),v.push(Y),Y.binaryType="arraybuffer"}catch(q){const ue=new Q(z.WS_ERR,"init websocket failed! Error: ".concat(q.toString()));return U.error("[".concat(this.name,"]").concat(ue)),void h(ue)}Y.onopen=()=>{l(Y)},Y.onclose=q=>{h(q)},Y.onmessage=q=>{U.debug("[choose-best-ws]".concat(Y.url," onmessage: ").concat(q.data))},Ei(this.forceCloseTimeout).then(()=>{Y&&Y.readyState!==WebSocket.OPEN&&Y.close()})}}).then(l=>(this.closeEstablishingWs=void 0,l)).catch(l=>{throw this.closeEstablishingWs=void 0,l})}}class vD{constructor(r){N(this,"input",[]),N(this,"size",void 0),this.size=r}add(r){this.input.push(r),this.input.length>this.size&&this.input.splice(0,1)}mean(){var r;return this.input.length===0?0:Wc(r=this.input).call(r,(o,s)=>o+s)/this.input.length}}class ED extends Zn{get connectionState(){return this._connectionState}set connectionState(r){r!==this._connectionState&&(this._connectionState=r,r===vn.CONNECTED?this.emit(Xe.WS_CONNECTED):r===vn.RECONNECTING?this.emit(Xe.WS_RECONNECTING,this._websocketReconnectReason):r===vn.CLOSED&&this.emit(Xe.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(r,o){super(),N(this,"_disconnectedReason",void 0),N(this,"_websocketReconnectReason",void 0),N(this,"_connectionState",vn.CLOSED),N(this,"reconnectToken",void 0),N(this,"websocket",void 0),N(this,"openConnectionTime",void 0),N(this,"clientId",void 0),N(this,"lastMsgTime",Date.now()),N(this,"uploadCache",[]),N(this,"uploadCacheInterval",void 0),N(this,"rttRolling",new vD(5)),N(this,"pingpongTimer",void 0),N(this,"wsInflateDataTimer",void 0),N(this,"pingpongTimeoutCount",0),N(this,"joinResponse",void 0),N(this,"multiIpOption",void 0),N(this,"initError",void 0),N(this,"spec",void 0),N(this,"store",void 0),N(this,"onWebsocketMessage",s=>{if(s.data instanceof ArrayBuffer)return void this.emit(Xe.ON_BINARY_DATA,s.data);const l=JSON.parse(s.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const h="res-@".concat(l._id);this.emit(h,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")){if(this.emit(l._type,l._message),l._type===kt.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===kt.ON_USER_BANNED)switch(l._message.error_code){case 14:this.close(sn.UID_BANNED);break;case 15:this.close(sn.IP_BANNED);break;case 16:this.close(sn.CHANNEL_BANNED)}if(l._type===kt.ON_USER_LICENSE_BANNED)switch(l._message.error_code){case nt.ERR_LICENSE_MISSING:this.close(sn.LICENSE_MISSING);break;case nt.ERR_LICENSE_EXPIRED:this.close(sn.LICENSE_EXPIRED);break;case nt.ERR_LICENSE_MINUTES_EXCEEDED:this.close(sn.LICENSE_MINUTES_EXCEEDED);break;case nt.ERR_LICENSE_PERIOD_INVALID:this.close(sn.LICENSE_PERIOD_INVALID);break;case nt.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(sn.LICENSE_MULTIPLE_SDK_SERVICE);break;case nt.ERR_LICENSE_ILLEGAL:this.close(sn.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=r.clientId,this.spec=r,this.store=o,this.websocket=new bd("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,o),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===vn.CONNECTED&&this.reconnect("retry",Wi.OFFLINE)})}async request(r,o,s,l){const h=jn(6,""),m={_id:h,_type:r,_message:o},v=this.websocket.connectionID,S=()=>new Me((K,Y)=>{if(this.connectionState===vn.CONNECTED)return K();const q=()=>{this.off(Xe.WS_CLOSED,ue),K()},ue=()=>{this.off(Xe.WS_CONNECTED,q),Y(new Q(z.WS_ABORT))};this.once(Xe.WS_CONNECTED,q),this.once(Xe.WS_CLOSED,ue),r!==ut.PUBLISH&&r!==ut.SUBSCRIBE&&r!==ut.UNSUBSCRIBE&&r!==ut.UNPUBLISH&&r!==ut.CONTROL&&r!==ut.RESTART_ICE||this.once(Xe.DISCONNECT_P2P,()=>{Y(new Q(z.DISCONNECT_P2P))}),r!==ut.PUBLISH&&r!==ut.RESTART_ICE||this.once(Xe.ABORT_P2P_EXECUTION,()=>{Y(new Q(z.DISCONNECT_P2P))})});if(this.connectionState!==vn.CONNECTING&&this.connectionState!==vn.RECONNECTING||r===ut.JOIN||r===ut.REJOIN||await S(),this.websocket.sendMessage(m,!0),l)return;const T=new Me((K,Y)=>{let q=!1;const ue=(ye,qe)=>{q=!0,K({isSuccess:ye==="success",message:qe||{}}),this.off(Xe.WS_CLOSED,me),this.off(Xe.WS_RECONNECTING,me),this.emit(Xe.REQUEST_SUCCESS,r,o)};this.once("res-@".concat(h),ue);const me=()=>{Y(new Q(z.WS_ABORT,"type: ".concat(r))),this.off(Xe.WS_CLOSED,me),this.off(Xe.WS_RECONNECTING,me),this.off("res-@".concat(h),ue)};this.once(Xe.WS_CLOSED,me),this.once(Xe.WS_RECONNECTING,me),Ei(re("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==v||q||(U.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(r)),this.emit(Xe.REQUEST_TIMEOUT,r,o))})});let b=null;try{b=await T}catch(K){if(this.connectionState===vn.CLOSED||r===ut.LEAVE)throw new Q(z.WS_ABORT);return!this.spec.forceWaitGatewayResponse||s?K.throw():r===ut.JOIN||r===ut.REJOIN?null:(await S(),await this.request(r,o))}if(b.isSuccess)return b.message;const I=Number(b.message.error_code||b.message.code),L=vp(I),V=new Q(z.UNEXPECTED_RESPONSE,"".concat(L.desc,": ").concat(b.message.error_str),{code:I,data:b.message});return L.action==="success"?b.message:(U.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(r,", error_code: ").concat(I,", message: ").concat(L.desc,", action: ").concat(L.action)),I===nt.ERR_TOO_MANY_BROADCASTERS?((r===ut.JOIN||r===ut.REJOIN)&&(this.initError=V,this.close()),V.throw()):L.action==="failed"?V.throw():L.action==="quit"?(this.initError=V,this.close(),V.throw()):(I===nt.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=b.message.option,U.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Wi.MULTI_IP)):this.reconnect(L.action,Wi.SERVER_ERROR),r===ut.JOIN||r===ut.REJOIN?null:await this.request(r,o)))}waitMessage(r,o){return new Me(s=>{const l=h=>{(!o||o(h))&&(this.off(r,l),s(h))};this.on(r,l)})}upload(r,o){const s={_type:r,_message:o};try{this.websocket.sendMessage(s)}catch{const h=re("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(s),this.uploadCache.length>h&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==vn.CONNECTED)return;const m=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(m._type,m._message)},re("UPLOAD_CACHE_INTERVAL")||2e3))}}send(r,o){const s={_type:r,_message:o};this.websocket.sendMessage(s)}init(r,o){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Me((s,l)=>{this.once(Xe.WS_CONNECTED,()=>s(this.joinResponse)),this.once(Xe.WS_CLOSED,()=>l(this.initError||new Q(z.WS_ABORT))),this.connectionState=vn.CONNECTING,this.websocket.init(r).catch(l),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4),setTimeout(()=>{o&&this.openConnectionTime===void 0&&(U.debug("[".concat(this.clientId,"] init websocket timeout while join with fallback to proxy")),l(new Q(z.INIT_WEBSOCKET_TIMEOUT)))},re("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))})}close(r){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=r||sn.LEAVE,this.connectionState=vn.CLOSED,U.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),r===sn.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new bd("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(Xe.ABORT_P2P_EXECUTION);const r=await _i(this,Xe.REQUEST_JOIN_INFO),o=await this.request(ut.JOIN,r);if(!o)return this.emit(Xe.REPORT_JOIN_GATEWAY,z.TIMEOUT,this.url||""),!1;this.joinResponse=o,this.emit(Xe.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=vn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new Q(z.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const r=uu(this,Xe.REQUEST_REJOIN_INFO);r.token=this.reconnectToken;const o=await this.request(ut.REJOIN,r);return!!o&&(this.connectionState=vn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),o.peers&&o.peers.forEach(s=>{this.emit(kt.ON_USER_ONLINE,{uid:s.uid}),s.audio&&this.emit(kt.ON_ADD_AUDIO_STREAM,{uid:s.uid,uint_id:s.uint_id,audio:!0,ssrcId:s.audio_ssrc}),s.video&&this.emit(kt.ON_ADD_VIDEO_STREAM,{uid:s.uid,uint_id:s.uint_id,video:!0,ssrcId:s.video_ssrc}),s.audio_mute?this.emit(kt.MUTE_AUDIO,{uid:s.uid}):this.emit(kt.UNMUTE_AUDIO,{uid:s.uid}),s.video_mute?this.emit(kt.MUTE_VIDEO,{uid:s.uid}):this.emit(kt.UNMUTE_VIDEO,{uid:s.uid}),s.audio_enable_local?this.emit(kt.ENABLE_LOCAL_AUDIO,{uid:s.uid}):this.emit(kt.DISABLE_LOCAL_AUDIO,{uid:s.uid}),s.video_enable_local?this.emit(kt.ENABLE_LOCAL_VIDEO,{uid:s.uid}):this.emit(kt.DISABLE_LOCAL_VIDEO,{uid:s.uid}),s.audio||s.video||this.emit(kt.ON_REMOVE_STREAM,{uid:s.uid,uint_id:s.uint_id})}),!0)}reconnect(r,o){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(r,o)}handleNotification(r){U.debug("[".concat(this.clientId,"] receive notification: "),r);const o=vp(r.code);if(o.action!=="success"){if(o.action!=="failed")return o.action==="quit"?(o.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(sn.UID_BANNED),void this.close()):void this.reconnect(o.action,Wi.SERVER_ERROR);U.error("[".concat(this.clientId,"] ignore error: "),o.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const r=re("PING_PONG_TIME_OUT"),o=Date.now();this.pingpongTimeoutCount>=r&&(U.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(o-this.lastMsgTime,"ms")),o-this.lastMsgTime>re("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Wi.TIMEOUT):this.request(ut.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const s=Date.now()-o;this.rttRolling.add(s),re("REPORT_STATS")&&this.send(ut.PING_BACK,{pingpongElapse:s})}).catch(s=>{})}handleWsInflateData(){const{wsInflateLength:r,wsDeflateLength:o}=this.websocket.getWsInflateData();r!==0&&o!==0&&this.upload(Co.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:o,ws_inflate_length:r})}handleWebsocketEvents(){this.websocket.on(Nt.RECONNECT_WAITTING_FINISH,r=>{this.emit(Xe.WS_RECONNECT_WAITTING_FINISH,r)}),this.websocket.on(Nt.RECONNECT_CREATE_CONNECTION,r=>{this.emit(Xe.WS_RECONNECT_CREATE_CONNECTION,r)}),this.websocket.on(Nt.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Nt.CLOSED,()=>{this.connectionState=vn.CLOSED}),this.websocket.on(Nt.FAILED,()=>{this._disconnectedReason=sn.NETWORK_ERROR,this.connectionState=vn.CLOSED}),this.websocket.on(Nt.RECONNECTING,r=>{this._websocketReconnectReason=r,this.joinResponse=void 0,this.connectionState===vn.CONNECTED?this.connectionState=vn.RECONNECTING:this.connectionState=vn.CONNECTING}),this.websocket.on(Nt.WILL_RECONNECT,(r,o)=>{if(uu(this,Xe.IS_P2P_DISCONNECTED)&&r==="retry")return U.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(Xe.NEED_RENEW_SESSION),this.emit(Xe.DISCONNECT_P2P),o("tryNext");r!=="retry"&&(U.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(r)),this.reconnectToken=void 0,this.emit(Xe.NEED_RENEW_SESSION),this.emit(Xe.DISCONNECT_P2P)),o(r)}),this.websocket.on(Nt.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(r=>{U.warning("[".concat(this.clientId,"] rejoin failed ").concat(r)),this.reconnect("tryNext",Wi.SERVER_ERROR)}):this.join().catch(r=>{if(this.emit(Xe.REPORT_JOIN_GATEWAY,r.message||r.code,this.url||""),r instanceof Q&&r.code===z.UNEXPECTED_RESPONSE&&r.data.code===nt.ERR_NO_AUTHORIZED)return U.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Wi.SERVER_ERROR);U.error("[".concat(this.clientId,"] join gateway request failed"),r.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Wi.SERVER_ERROR):(this.initError=r,this.close())})}),this.websocket.on(Nt.REQUEST_NEW_URLS,(r,o)=>{_i(this,Xe.REQUEST_RECOVER,this.multiIpOption).then(r).catch(o)}),this.websocket.on(Nt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(kt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}}function _D(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}class HY extends Zn{get url(){return this._url?this._url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(r){["tryNext","recover"].includes(r)&&this.resetReconnectCount(r),this._reconnectMode=r}get state(){return this._state}set state(r){r!==this._state&&(this._state=r,this._state==="reconnecting"?this.emit(er.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(er.CONNECTED):this._state==="closed"?this.emit(er.CLOSED):this._state==="failed"&&this.emit(er.FAILED))}constructor(r,o,s,l){super(),N(this,"connectionID",0),N(this,"currentURLIndex",0),N(this,"reconnectReason",void 0),N(this,"_reconnectMode","tryNext"),N(this,"_initMutex",void 0),N(this,"_name",void 0),N(this,"_state","closed"),N(this,"_reconnectInterrupter",void 0),N(this,"_url",void 0),N(this,"_retryConfig",void 0),N(this,"_reconnectCount",0),N(this,"_forceCloseTimeout",5e3),N(this,"_onlineReconnectListener",void 0),N(this,"_closeEstablishingTransmitter",()=>{}),N(this,"_store",void 0),N(this,"_joinChannelServiceRecordIndex",void 0),N(this,"_transmitter",void 0),N(this,"_useCompress",void 0),N(this,"_inflateLength",0),N(this,"_deflateLength",0),this._store=l,this._name=r,this._retryConfig=function(h){for(var m=1;m<arguments.length;m++){var v=arguments[m]!=null?arguments[m]:{};m%2?_D(Object(v),!0).forEach(function(S){N(h,S,v[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(v)):_D(Object(v)).forEach(function(S){Object.defineProperty(h,S,Object.getOwnPropertyDescriptor(v,S))})}return h}({},o),this._useCompress=s}resetReconnectCount(r){U.debug("".concat(this._name," reset reconnect count, reason: ").concat(r)),this._reconnectCount=0}close(r,o){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;const s=this._transmitter;o?setTimeout(()=>s.close(),500):s.close(),this._transmitter=void 0}this.state=r?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()}reconnect(r,o){if(!this._transmitter)return void U.warning("[".concat(this._name,"] can not reconnect, no websocket"));var s;r!==void 0&&(this.reconnectMode=r),U.debug("[".concat(this._name,"] reconnect is triggered initiative")),typeof this._joinChannelServiceRecordIndex=="number"&&((s=this._store)===null||s===void 0||s.recordJoinChannelService({status:"error",errors:[new Error(o)]},this._joinChannelServiceRecordIndex));const l=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),l&&l.bind(this._transmitter)({code:9999,reason:o})}getInflateData(){const r=this._inflateLength,o=this._deflateLength;return this.clearInflateData(),{inflateLength:r,deflateLength:o}}setInflateData(r){this._deflateLength=this._deflateLength+r.originLength,this._inflateLength=this._inflateLength+r.compressedLength}clearInflateData(){this._inflateLength=0,this._deflateLength=0}}function SD(n,r,o){if("getBigUint64"in DataView.prototype)return n.getBigUint64(r,o);const s=n.getUint32(r,o),l=n.getUint32(r+4,o),h=Number(!!o),m=Number(!o);return BigInt(s*m+l*h)<<BigInt(32)|BigInt(s*h+l*m)}function yD(n,r,o,s){if("setBigUint64"in DataView.prototype)return n.setBigUint64(r,o,s);const l=Number(o>>BigInt(32)),h=Number(o&BigInt(4294967295));s?(n.setUint32(r+4,l,s),n.setUint32(r,h,s)):(n.setUint32(r,l,s),n.setUint32(r+4,h,s))}let da;(function(n){n[n.Default=0]="Default",n[n.Ack=1]="Ack"})(da||(da={}));class WY{constructor(r,o,s){N(this,"version",1),N(this,"initialRTO",void 0),N(this,"maxBatchAckCount",void 0),N(this,"maxRTO",void 0),N(this,"initialRTT",void 0),N(this,"ID",void 0),N(this,"rtt",void 0),N(this,"packetNumber",1),N(this,"rtoRatioMap",new Map),N(this,"timeoutMap",new Map),N(this,"unorderedPacketQueue",[]),N(this,"batchAckPacketQueue",[]),N(this,"lastOrderedPacketNumber",0),N(this,"batchAckTimer",void 0),N(this,"sendImpl",void 0),N(this,"receiveImpl",void 0),this.sendImpl=r,this.receiveImpl=o,this.ID=jn(7,"transmitter-"),this.initialRTO=(s==null?void 0:s.initialRTO)!==void 0?s.initialRTO:re("TRANSMITTER_INITIAL_RTO"),this.initialRTT=(s==null?void 0:s.initialRTT)!==void 0?s.initialRTT:re("TRANSMITTER_INITIAL_RTT"),this.rtt=(s==null?void 0:s.initialRTT)!==void 0?s.initialRTT:re("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=(s==null?void 0:s.maxBatchAckCount)!==void 0?s.maxBatchAckCount:re("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=(s==null?void 0:s.maxRTO)!==void 0?s.maxRTO:re("TRANSMITTER_MAX_RTO")}packetize(r,o){return{type:da.Default,version:this.version,packetNumber:o,payload:r}}serialize(r){switch(r.type){case da.Default:{let o;typeof r.payload=="string"?o=new TextEncoder().encode(r.payload):o=r.payload;const s=new ArrayBuffer(o.length+15),l=new DataView(s);return l.setUint16(0,r.version),l.setUint8(2,r.type),l.setUint32(3,r.packetNumber),yD(l,7,BigInt(r.sendTs)),new Uint8Array(l.buffer).set(o,15),s}case da.Ack:{const o=new ArrayBuffer(16),s=new DataView(o);return s.setUint16(0,r.version),s.setUint8(2,r.type),s.setUint32(3,r.maxAckPacketNumber),s.setUint8(7,r.shift),yD(s,8,BigInt(r.ackSendTs)),o}}}deserialize(r){const o=new DataView(r),s=o.getUint16(0),l=o.getUint8(2);switch(l){case da.Default:{const h=o.getUint32(3),m=SD(o,7),v=r.slice(15),S=new TextDecoder().decode(v);return{version:s,type:l,packetNumber:h,sendTs:Number(m),payload:S}}case da.Ack:{const h=o.getUint32(3),m=o.getUint8(7),v=SD(o,8);return{version:s,type:l,maxAckPacketNumber:h,shift:m,ackSendTs:Number(v)}}default:throw U.error("[".concat(this.ID,"] Unrecognized packet type ").concat(l)),new Error("Unrecognized packet type ".concat(l))}}sendMessage(r){const o=this.packetize(r,this.packetNumber);this.packetNumber=this.packetNumber===4294967295?1:this.packetNumber+1;const s=this.calculateRTO(o),l=window.setTimeout(()=>{this.resendMessage(o)},s);this.timeoutMap.set(o.packetNumber,l),this.sendPacket(o)}onData(r){const o=this.deserialize(r);o.type===da.Default?this.ack(o):o.type===da.Ack&&(this.updateRTT(o,Math.round(performance.now())),this.clearRTO(o))}close(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach(r=>{let[o,s]=r;window.clearTimeout(s)}),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,this.batchAckTimer!==void 0&&window.clearTimeout(this.batchAckTimer)}resendMessage(r){const o=this.calculateRTO(r),s=window.setTimeout(()=>{this.resendMessage(r)},o);this.timeoutMap.set(r.packetNumber,s),this.sendPacket(r)}calculateRTO(r){const o=this.rtoRatioMap.get(r.packetNumber);if(o===void 0)return this.rtoRatioMap.set(r.packetNumber,1),this.initialRTO;{const s=9*this.rtt/8*o;return this.rtoRatioMap.set(r.packetNumber,o+1),s>this.maxRTO?this.maxRTO:s}}updateRTT(r,o){const s=r.ackSendTs;this.rtt=this.rtt*(7/8)+(o-s-this.rtt)/8}ack(r){if(r.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(r):(this.batchAckPacketQueue.push(r),this.batchAckTimer=window.setTimeout(()=>{this.batchAck()},this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(r.payload);;){const o=this.unorderedPacketQueue[0];if(!o){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl(o.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else if(r.packetNumber<=this.lastOrderedPacketNumber){const o={ackSendTs:r.sendTs,maxAckPacketNumber:r.packetNumber,shift:0,type:da.Ack,version:this.version};this.sendPacket(o)}else if(r.packetNumber>this.lastOrderedPacketNumber){this.unorderedPacketQueue[r.packetNumber-this.lastOrderedPacketNumber-2]=r;const o={ackSendTs:r.sendTs,maxAckPacketNumber:r.packetNumber,shift:0,type:da.Ack,version:this.version};this.sendPacket(o)}}batchAck(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0;const r={ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:da.Ack,version:this.version};this.sendPacket(r),this.batchAckPacketQueue=[]}sendPacket(r){r.type===da.Default&&(r.sendTs=Math.round(performance.now()));const o=this.serialize(r);this.sendImpl(o)}clearRTO(r){for(let o=r.maxAckPacketNumber-r.shift;o<=r.maxAckPacketNumber;o++){const s=this.timeoutMap.get(o);s!==void 0&&window.clearTimeout(s),this.timeoutMap.delete(o),this.rtoRatioMap.delete(o)}}}class CD extends HY{constructor(r,o){super(r,o,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3?arguments[3]:void 0),N(this,"_initMutex",void 0),N(this,"_reconnectInterrupter",void 0),N(this,"_url",void 0),N(this,"_transmitter",void 0),N(this,"_addresses",void 0),N(this,"_reliableTransmission",void 0),this._initMutex=new Ui("datachannel");const{timeout:s,timeoutFactor:l}=o,h=Math.max(300,Math.floor(3*s/5)),m=Math.max(1.2,Math.floor(8*l)/10);Ti.ONLINE&&(this._retryConfig.timeout=h,this._retryConfig.timeoutFactor=m),br.on(Qc.NETWORK_STATE_CHANGE,(v,S)=>{v!==S&&(this.resetReconnectCount("network state change: ".concat(S," -> ").concat(v)),v===Ti.ONLINE?(this._retryConfig.timeout=h,this._retryConfig.timeoutFactor=m):(this._retryConfig.timeout=s,this._retryConfig.timeoutFactor=l))})}getConnection(){if(this._reliableTransmission)return this._reliableTransmission}async init(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;this._forceCloseTimeout=o;const s=(l,h)=>{this._addresses=r,this.currentURLIndex=this._addresses.findIndex(v=>v.fingerprint||re("FINGERPRINT"));const m=this._addresses[this.currentURLIndex];this.state="connecting",this.createTransmitterConnection(m).then(l).catch(h),this.once(er.CLOSED,()=>h(new Q(z.WS_DISCONNECT))),this.once(er.CONNECTED,()=>l())};return this._initMutex.lock().then(l=>new Me((h,m)=>{s(h,m)}).then(()=>{l()}).catch(()=>{l()}))}sendMessage(r){let o=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new Q(z.WS_ABORT,"datachannel is not ready");try{o||(r=JSON.stringify(r)),this._reliableTransmission.sendMessage(r)}catch(s){throw new Q(z.WS_ERR,"send datachannel signal message error"+s.toString())}}unbindDcCloseEventListener(){this._transmitter&&(this._transmitter.onclose=null)}sendMessageWithJSON(r){const o=JSON.stringify(r);return{compressed:o,compressedLength:o.length,origin:r}}sendMessageWithUint8Array(r){return{compressed:r,compressedLength:r.byteLength,origin:r}}createTransmitterConnection(r){return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(r.ip,":").concat(r.port),new Me((o,s)=>{var l;const h=()=>{U.debug("[".concat(this._name,"] datachannel opened:"),this._url),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),o()},m=async b=>{var I;if((I=this._closeEstablishingTransmitter)===null||I===void 0||I.call(this),U.debug("[".concat(this._name,"] datachannel close ").concat(this._url,", code: ").concat(b.code,", reason: ").concat(b.reason,", current mode: ").concat(this.reconnectMode)),this._reconnectCount<this._retryConfig.maxRetryCount){this.state==="connected"&&(this.reconnectReason=b.reason,this.state="reconnecting");const L=fs(this,er.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,V=await this.reconnectWithAction(L);if(this.state==="closed")return void U.debug("[".concat(this.connectionID,"] dc is closed, no need to reconnect"));if(!V)return s(new Q(z.WS_DISCONNECT,"datachannel reconnect failed: ".concat(b.code))),void this.close(!0);o()}else s(new Q(z.WS_DISCONNECT,"datachannel close: ".concat(b.code))),this.close()},v=b=>{var I;(I=this._reliableTransmission)===null||I===void 0||I.onData(b.data)};this._transmitter&&(this._transmitter.onclose=null,this._transmitter.close()),this._reliableTransmission&&(this._reliableTransmission.close(),this._reliableTransmission=void 0),U.debug("[".concat(this._name,"] start connect, address: ").concat(JSON.stringify(r)));const S=(l=this._store)===null||l===void 0?void 0:l.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),T=Date.now();_i(this,er.TO_CONNECT_DATACHANNEL,r).then(b=>{var I,L;if(!b)throw new Error("transmissonInfo not exist yet");const{transmitter:V,close:K}=b;this._transmitter=V,(I=this._store)===null||I===void 0||I.signalChannelOpen();const Y=Date.now()-T;U.debug("[choose dc] dc open cost ".concat(Y,"ms")),this._reliableTransmission=new WY(q=>{var ue;this._transmitter&&this._transmitter.readyState==="open"&&((ue=this._transmitter)===null||ue===void 0||ue.send(q))},q=>{typeof q=="string"&&this.emit(er.ON_MESSAGE,q)}),this._closeEstablishingTransmitter=()=>{var q;(q=this._reliableTransmission)===null||q===void 0||q.close(),this._reliableTransmission=void 0,K()},h&&h(),V.onclose=m,V.onmessage=v,(L=this._store)===null||L===void 0||L.recordJoinChannelService({endTs:Date.now(),status:"success"},S),this._joinChannelServiceRecordIndex=S}).catch(b=>{var I;if((I=this._store)===null||I===void 0||I.recordJoinChannelService({endTs:Date.now(),status:b instanceof Q&&b.code===z.WS_ABORT?"aborted":"error",errors:[b]},S),this.state!=="closed"){if(b instanceof Q&&b.code===z.WS_ERR){const L=new Q(z.WS_ERR,"init datachannel failed! Error: ".concat(b.toString()));return U.error("[".concat(this._name,"]").concat(L)),void s(L)}m&&m(b)}else s(new Q(z.WS_DISCONNECT,"datachannel is closed: ".concat(b.toString())))})})}async reconnectWithAction(r){let o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this._reconnectCount>=this._retryConfig.maxRetryCount||!this._addresses||this.state==="closed")return!1;this._onlineReconnectListener||br.networkState!==Ti.OFFLINE||(this._onlineReconnectListener=br.onlineWaiter&&br.onlineWaiter.then(()=>{this._onlineReconnectListener=void 0}));let s=!0;if(this._reconnectInterrupter=()=>{s=!1},o){const m=Ty(this._reconnectCount,this._retryConfig);U.debug("[".concat(this._name,"] wait ").concat(m,"ms to reconnect datachannel, mode: ").concat(r)),await Me.race([Ei(m),this._onlineReconnectListener||new Me(()=>{})])}if(this.state==="closed"||!s)return!1;this._reconnectCount+=1;const l=async(m,v)=>{this.emit(er.RECONNECT_CREATE_CONNECTION,v),await this.createTransmitterConnection(m)};try{if(r==="retry"){const m=this._addresses[this.currentURLIndex];this.emit(er.RECONNECT_WAITTING_FINISH,r),await l(m,r)}else if(r==="tryNext"){this.currentURLIndex+=1;for(let v=this.currentURLIndex;v<this._addresses.length;v++){if(this._addresses[v].fingerprint||re("FINGERPRINT")){this.currentURLIndex=v;break}this.currentURLIndex+=1}if(this.currentURLIndex>=this._addresses.length)return U.debug("[".concat(this._name,"] the available addresses are exhausted, change to recover")),await this.reconnectWithAction("recover",!1);U.debug("[".concat(this._name,"] datachannel url length: ").concat(this._addresses.length," current index: ").concat(this.currentURLIndex));const m=this._addresses[this.currentURLIndex];this.emit(er.RECONNECT_WAITTING_FINISH,r),await l(m,r)}else r==="recover"&&(U.debug("[".concat(this._name,"] start to failback to websocket")),this.resetReconnectCount("recover mode"),this.emit(er.RECONNECT_WAITTING_FINISH,r),this.emit(er.FAILBACK));return!0}catch(m){var h;return U.error("[".concat(this._name,"] reconnect failed"),m.toString()),m!=null&&(h=m.data)!==null&&h!==void 0&&h.desc&&Array.isArray(m.data.desc)&&m.data.desc.length&&m.data.desc.includes("dynamic key expired")?(this.emit(er.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(r,o)}}}class gc extends Zn{get connectionState(){return this._connectionState}set connectionState(r){r!==this._connectionState&&(this._connectionState=r,r===vn.CONNECTED?this.emit(Xe.WS_CONNECTED):r===vn.RECONNECTING?this.emit(Xe.WS_RECONNECTING,this._websocketReconnectReason):r===vn.CLOSED&&this.emit(Xe.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(r,o){super(),N(this,"_disconnectedReason",void 0),N(this,"_websocketReconnectReason",void 0),N(this,"_connectionState",vn.CLOSED),N(this,"reconnectToken",void 0),N(this,"websocket",void 0),N(this,"openConnectionTime",void 0),N(this,"clientId",void 0),N(this,"lastMsgTime",Date.now()),N(this,"uploadCache",[]),N(this,"uploadCacheInterval",void 0),N(this,"rttRolling",new vD(5)),N(this,"pingpongTimer",void 0),N(this,"inflateDataTimer",void 0),N(this,"pingpongTimeoutCount",0),N(this,"joinResponse",void 0),N(this,"multiIpOption",void 0),N(this,"initError",void 0),N(this,"spec",void 0),N(this,"store",void 0),N(this,"onWebsocketMessage",s=>{if(s instanceof ArrayBuffer)return void this.emit(Xe.ON_BINARY_DATA,s);const l=JSON.parse(s);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const h="res-@".concat(l._id);this.emit(h,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")&&(this.emit(l._type,l._message),l._type===kt.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===kt.ON_USER_BANNED))switch(l._message.error_code){case 14:this.close(sn.UID_BANNED);break;case 15:this.close(sn.IP_BANNED);break;case 16:this.close(sn.CHANNEL_BANNED)}}),this.clientId=r.clientId,this.spec=r,this.store=o,this.websocket=new CD("gateway-".concat(this.clientId),this.spec.retryConfig,!0,o),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===vn.CONNECTED&&this.reconnect("retry",Fs.OFFLINE)})}async request(r,o,s,l){const h=jn(6,""),m={_id:h,_type:r,_message:o},v=this.websocket.connectionID,S=()=>new Me((K,Y)=>{if(this.connectionState===vn.CONNECTED)return K();const q=()=>{this.off(Xe.WS_CLOSED,ue),K()},ue=()=>{this.off(Xe.WS_CONNECTED,q),Y(new Q(z.WS_ABORT))};this.once(Xe.WS_CONNECTED,q),this.once(Xe.WS_CLOSED,ue),r!==ut.PUBLISH&&r!==ut.SUBSCRIBE&&r!==ut.UNSUBSCRIBE&&r!==ut.UNPUBLISH&&r!==ut.CONTROL&&r!==ut.RESTART_ICE||this.once(Xe.DISCONNECT_P2P,()=>{Y(new Q(z.DISCONNECT_P2P))}),r!==ut.PUBLISH&&r!==ut.RESTART_ICE||this.once(Xe.ABORT_P2P_EXECUTION,()=>{Y(new Q(z.DISCONNECT_P2P))})});if(this.connectionState!==vn.CONNECTING&&this.connectionState!==vn.RECONNECTING||r===ut.JOIN||r===ut.REJOIN||await S(),r===ut.LEAVE&&(this.websocket.unbindDcCloseEventListener(),l=!0),this.websocket.sendMessage(m,!0,!1),l)return;const T=new Me((K,Y)=>{let q=!1;const ue=(ye,qe)=>{q=!0,K({isSuccess:ye==="success",message:qe||{}}),this.off(Xe.WS_CLOSED,me),this.off(Xe.WS_RECONNECTING,me),this.emit(Xe.REQUEST_SUCCESS,r,o)};this.once("res-@".concat(h),ue);const me=()=>{Y(new Q(z.WS_ABORT,"type: ".concat(r))),this.off(Xe.WS_CLOSED,me),this.off(Xe.WS_RECONNECTING,me),this.off("res-@".concat(h),ue)};this.once(Xe.WS_CLOSED,me),this.once(Xe.WS_RECONNECTING,me),Ei(re("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==v||q||(U.warning("dc request timeout, type: ".concat(r)),this.emit(Xe.REQUEST_TIMEOUT,r,o))})});let b=null;try{b=await T}catch(K){if(this.connectionState===vn.CLOSED||r===ut.LEAVE)throw new Q(z.WS_ABORT);return!this.spec.forceWaitGatewayResponse||s?K.throw():r===ut.JOIN||r===ut.REJOIN?null:(await S(),await this.request(r,o))}if(b.isSuccess)return b.message;const I=Number(b.message.error_code||b.message.code),L=vp(I),V=new Q(z.UNEXPECTED_RESPONSE,"".concat(L.desc,": ").concat(b.message.error_str),{code:I,data:b.message});return L.action==="success"?b.message:(U.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(r,", error_code: ").concat(I,", message: ").concat(L.desc,", action: ").concat(L.action)),I===nt.ERR_TOO_MANY_BROADCASTERS?((r===ut.JOIN||r===ut.REJOIN)&&(this.initError=V,this.close()),V.throw()):L.action==="failed"?V.throw():L.action==="quit"?(this.initError=V,this.close(),V.throw()):(I===nt.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=b.message.option,U.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Fs.MULTI_IP)):this.reconnect(L.action,Fs.SERVER_ERROR),r===ut.JOIN||r===ut.REJOIN?null:await this.request(r,o)))}waitMessage(r,o){return new Me(s=>{const l=h=>{(!o||o(h))&&(this.off(r,l),s(h))};this.on(r,l)})}upload(r,o){const s={_type:r,_message:o};try{this.websocket.sendMessage(s)}catch{const h=re("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(s),this.uploadCache.length>h&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==vn.CONNECTED)return;const m=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(m._type,m._message)},re("UPLOAD_CACHE_INTERVAL")||2e3))}}send(r,o){const s={_type:r,_message:o};this.websocket.sendMessage(s)}init(r,o){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Me((s,l)=>{this.once(Xe.WS_CONNECTED,()=>s(this.joinResponse)),this.once(Xe.WS_CLOSED,()=>l(this.initError||new Q(z.WS_ABORT))),this.connectionState=vn.CONNECTING,this.websocket.init(r).catch(l),this.websocket.once(er.FAILBACK,()=>{this.openConnectionTime===void 0&&l(new Q(z.INIT_DATACHANNEL_TIMEOUT))}),this.inflateDataTimer&&window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=window.setInterval(()=>{this.handleInflateData()},2e4),setTimeout(()=>{o&&this.openConnectionTime===void 0&&(U.debug("[".concat(this.clientId,"] init datachannel timeout while join with failback to websocket")),l(new Q(z.INIT_DATACHANNEL_TIMEOUT)))},re("DC_JOIN_WITH_FAILBACK"))})}close(r){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=r||sn.LEAVE,this.connectionState=vn.CLOSED,U.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),r===sn.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new CD("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(Xe.ABORT_P2P_EXECUTION);const r=await _i(this,Xe.DATACHANNEL_CONNECTING),o=await this.request(ut.JOIN,r);if(!o)return this.emit(Xe.REPORT_JOIN_GATEWAY,z.TIMEOUT,this.url||""),!1;this.joinResponse=o,this.emit(Xe.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=vn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new Q(z.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const r=uu(this,Xe.REQUEST_REJOIN_INFO);r.token=this.reconnectToken;const o=await this.request(ut.REJOIN,r);return!!o&&(this.connectionState=vn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),o.peers&&o.peers.forEach(s=>{this.emit(kt.ON_USER_ONLINE,{uid:s.uid}),s.audio&&this.emit(kt.ON_ADD_AUDIO_STREAM,{uid:s.uid,uint_id:s.uint_id,audio:!0,ssrcId:s.audio_ssrc}),s.video&&this.emit(kt.ON_ADD_VIDEO_STREAM,{uid:s.uid,uint_id:s.uint_id,video:!0,ssrcId:s.video_ssrc}),s.audio_mute?this.emit(kt.MUTE_AUDIO,{uid:s.uid}):this.emit(kt.UNMUTE_AUDIO,{uid:s.uid}),s.video_mute?this.emit(kt.MUTE_VIDEO,{uid:s.uid}):this.emit(kt.UNMUTE_VIDEO,{uid:s.uid}),s.audio_enable_local?this.emit(kt.ENABLE_LOCAL_AUDIO,{uid:s.uid}):this.emit(kt.DISABLE_LOCAL_AUDIO,{uid:s.uid}),s.video_enable_local?this.emit(kt.ENABLE_LOCAL_VIDEO,{uid:s.uid}):this.emit(kt.DISABLE_LOCAL_VIDEO,{uid:s.uid}),s.audio||s.video||this.emit(kt.ON_REMOVE_STREAM,{uid:s.uid,uint_id:s.uint_id})}),!0)}reconnect(r,o){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(r,o)}handleNotification(r){U.debug("[".concat(this.clientId,"] receive notification: "),r);const o=vp(r.code);if(o.action!=="success"){if(o.action!=="failed")return o.action==="quit"?(o.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(sn.UID_BANNED),void this.close()):void this.reconnect(o.action,Fs.SERVER_ERROR);U.error("[".concat(this.clientId,"] ignore error: "),o.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const r=re("PING_PONG_TIME_OUT"),o=Date.now();this.pingpongTimeoutCount>=r&&(U.warning("PINGPONG Timeout. Last Socket Message: ".concat(o-this.lastMsgTime,"ms")),o-this.lastMsgTime>re("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Fs.TIMEOUT):this.request(ut.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const s=Date.now()-o;this.rttRolling.add(s),re("REPORT_STATS")&&this.send(ut.PING_BACK,{pingpongElapse:s})}).catch(s=>{})}handleInflateData(){const{inflateLength:r,deflateLength:o}=this.websocket.getInflateData();r!==0&&o!==0&&this.upload(Co.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:o,ws_inflate_length:r})}handleWebsocketEvents(){this.websocket.on(er.RECONNECT_WAITTING_FINISH,r=>{this.emit(Xe.WS_RECONNECT_WAITTING_FINISH,r)}),this.websocket.on(er.RECONNECT_CREATE_CONNECTION,r=>{this.emit(Xe.WS_RECONNECT_CREATE_CONNECTION,r)}),this.websocket.on(er.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(er.CLOSED,()=>{this.connectionState=vn.CLOSED}),this.websocket.on(er.FAILED,()=>{this._disconnectedReason=sn.NETWORK_ERROR,this.connectionState=vn.CLOSED}),this.websocket.on(er.RECONNECTING,r=>{this._websocketReconnectReason=r,this.joinResponse=void 0,this.connectionState===vn.CONNECTED?this.connectionState=vn.RECONNECTING:this.connectionState=vn.CONNECTING}),this.websocket.on(er.WILL_RECONNECT,(r,o)=>{if(uu(this,Xe.IS_P2P_DISCONNECTED)&&r==="retry")return U.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(Xe.NEED_RENEW_SESSION),this.emit(Xe.DISCONNECT_P2P),o("tryNext");r!=="retry"&&(U.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(r)),this.reconnectToken=void 0,this.emit(Xe.NEED_RENEW_SESSION),this.emit(Xe.DISCONNECT_P2P)),o(r)}),this.websocket.on(er.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(r=>{U.warning("[".concat(this.clientId,"] rejoin failed ").concat(r)),this.reconnect("tryNext",Fs.SERVER_ERROR)}):this.join().catch(r=>{if(this.emit(Xe.REPORT_JOIN_GATEWAY,r.message||r.code,this.url||""),r instanceof Q&&r.code===z.UNEXPECTED_RESPONSE&&r.data.code===nt.ERR_NO_AUTHORIZED)return U.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Fs.SERVER_ERROR);U.error("[".concat(this.clientId,"] join gateway request failed"),r.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Fs.SERVER_ERROR):(this.initError=r,this.close())})}),this.websocket.on(er.REQUEST_NEW_URLS,(r,o)=>{_i(this,Xe.REQUEST_RECOVER,this.multiIpOption).then(r).catch(o)}),this.websocket.on(er.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(kt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(er.TO_CONNECT_DATACHANNEL,async(r,o,s)=>_i(this,Xe.DATACHANNEL_PRECONNECT,r).then(o).catch(s)),this.websocket.on(er.FAILBACK,()=>{this.openConnectionTime!==void 0&&this.emit(Xe.DATACHANNEL_FAILBACK)})}}function bD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function $s(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?bD(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):bD(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}const pC=new Map;class zY extends Zn{get state(){return this._state}set state(r){if(r===this._state)return;const o=this._state;this._state=r,r==="DISCONNECTED"&&this._disconnectedReason?this.emit(Wn.CONNECTION_STATE_CHANGE,r,o,this._disconnectedReason):this.emit(Wn.CONNECTION_STATE_CHANGE,r,o)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(r){U.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(r)),this._joinGatewayStartTime=r}constructor(r,o){super(),N(this,"store",void 0),N(this,"joinInfo",void 0),N(this,"key",void 0),N(this,"signal",void 0),N(this,"role",void 0),N(this,"inChannelInfo",{joinAt:null,duration:0}),N(this,"spec",void 0),N(this,"_state","DISCONNECTED"),N(this,"_statsCollector",void 0),N(this,"_disconnectedReason",void 0),N(this,"isSignalRecover",!1),N(this,"hasChangeBGPAddress",!1),N(this,"trafficStatsInterval",void 0),N(this,"networkQualityInterval",void 0),N(this,"_joinGatewayStartTime",0),N(this,"_signalTimeout",!1),N(this,"_clientRoleOptions",void 0),N(this,"_isProactiveJoin",!1),this.store=r,this.spec=o,this.signal=this.store.useDataChannel?new gc($s($s({},o),{},{retryConfig:o.websocketRetryConfig}),r):new ED($s($s({},o),{},{retryConfig:o.websocketRetryConfig}),r),this._statsCollector=o.statsCollector,this.role=o.role||"audience",this._clientRoleOptions=o.clientRoleOptions,this.handleSignalEvents()}async join(r,o,s){if(this.signal instanceof gc){let S=!1;r.cloudProxyServer!=="disabled"?(U.debug("[".concat(this.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(r.cloudProxyServer,")")),S=!0):"".concat(r.apResponse.cid,"_").concat(r.apResponse.cert).length>255||"".concat(r.apResponse.cid,"_").concat(r.apResponse.cert).length<22?(U.debug("[".concat(this.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),S=!0):r.apResponse.addresses.some(T=>T.fingerprint)||re("FINGERPRINT")||(U.debug("[".concat(this.store.clientId,"] Dc is not supported, because fingerprint does not exist")),S=!0),S&&this.resetSignal()}this.store.joinGatewayStart(),r.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);const l=Date.now();let h=pC.get(r.cname);if(h||(h=new Map,pC.set(r.cname,h)),this._isProactiveJoin=!0,h.has(r.uid)){const S=new Q(z.UID_CONFLICT);throw Je.joinGateway(r.sid,{lts:l,succ:!1,ec:S.message,addr:null,uid:r.uid,cid:r.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!r.proxyServer,signalChannel:this.signal instanceof gc?"1":"0"}),this._isProactiveJoin=!1,S}h.set(r.uid,!0),this.joinInfo=r,this.key=o;let m=0;this.joinGatewayStartTime=l;const v=r.proxyServer;try{let S;if(U.debug("[".concat(this.store.clientId,"] use ").concat(this.signal instanceof gc?"datachannel":"websocket"," join uid ").concat(m)),this.signal instanceof gc)S=await this.signal.init(r.apResponse.addresses,s);else{const T=r.proxyServer,b=T?r.gatewayAddrs.map(I=>{const L=I.address.split(":");return"wss://".concat(T,"/ws/?h=").concat(L[0],"&p=").concat(L[1])}):r.gatewayAddrs.map(I=>"wss://".concat(I.address));S=await this.signal.init(b,s)}m=S.uid,U.debug("[".concat(this.store.clientId,"] ").concat(this.signal instanceof gc?"datachannel":"websocket"," join uid ").concat(m," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(S){throw S&&S.code===z.INIT_WEBSOCKET_TIMEOUT?(U.warning("[".concat(this.store.clientId,"] User join failed"),S.toString()),S):S&&S.code===z.INIT_DATACHANNEL_TIMEOUT?(U.warning("[".concat(this.store.clientId,"] User join datachannel failed"),S.toString()),this.resetSignal(),S):(U.error("[".concat(this.store.clientId,"] User join failed"),S.toString()),Je.joinGateway(r.sid,{lts:l,succ:!1,ec:S.message,addr:this.signal.url,uid:r.uid,cid:r.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!v,signalChannel:this.signal instanceof gc?"1":"0"}),this._isProactiveJoin=!1,h.delete(r.uid),this.signal.close(),S)}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),U.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(S=>{U.warning("[".concat(this.store.clientId,"] get traffic stats error"),S.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(Wn.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(Wn.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(Wn.NETWORK_QUALITY,{uplinkNetworkQuality:cD(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:cD(this._statsCollector.trafficStats.B_dnq)}):this.emit(Wn.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),m}async leave(){let r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],o=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){o!==sn.FALLBACK&&(this.state="DISCONNECTING");try{r||this.signal.connectionState!==vn.CONNECTED||await function(s,l){return l===1/0?s:Me.race([s,BY(l)])}(this.signal.request(ut.LEAVE,void 0,!0),3e3)}catch(s){U.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),s)}this.signal.close(o),o!==sn.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(r,o,s){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Q(z.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const l={state:"offer",p2p_id:this.store.p2pId,ortc:o,mode:this.spec.mode,extend:re("PUB_EXTEND"),twcc:!!re("PUBLISH_TWCC"),rtx:!!re("USE_PUB_RTX")};try{return(await this.signal.request(ut.PUBLISH,l,!0))._message}catch(h){if(s&&h.data&&h.data.code===nt.ERR_PUBLISH_REQUEST_INVALID)return U.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),h.toString()),await this.tryUnpubBeforeRepub(r,o),this.publish(r,o,!1);throw h}}async unpublish(r,o){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Q(z.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(ut.UNPUBLISH,{stream_id:o,ortc:r},!0)}catch(s){U.warning("[".concat(this.store.clientId,"] unpublish warning: "),s)}}async subscribe(r,o,s){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Q(z.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const l={stream_id:r,stream_type:o.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!re("SUBSCRIBE_TWCC"),rtx:!!re("USE_SUB_RTX"),extend:re("SUB_EXTEND"),ssrcId:o.ssrcId,svc:Array.isArray(re("SVC"))&&re("SVC").length!==0?re("SVC"):void 0};try{return(await this.signal.request(ut.SUBSCRIBE,l,!0))._message}catch(h){if(s&&h.data&&h.data.code===nt.ERR_SUBSCRIBE_REQUEST_INVALID)return U.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),h.toString()),await this.tryUnsubBeforeResub(r,o),await this.subscribe(r,o,!1);throw h}}async subscribeAll(r,o){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Q(z.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const s={p2p_id:this.store.p2pId,users:r,dtx:!1,rtx:!!re("USE_SUB_RTX")};try{return await this.signal.request(ut.SUBSCRIBE_STREAMS,s,!0)}catch(l){if(o&&l.data&&l.data.code===nt.ERR_SUBSCRIBE_REQUEST_INVALID)return U.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),l.toString()),await this.tryMassUnsubBeforeResub(r),await this.subscribeAll(r,!1);throw l}}async setVideoProfile(r){const o=function(s){if(!(s.bitrateMax&&s.bitrateMin&&s.frameRate&&s.height&&s.width))return;let l=s.frameRate,h=s.width,m=s.height,v=!0;return typeof l!="number"&&(l=l.exact||l.ideal||l.max||l.min||0,l||(v=!1)),typeof h!="number"&&(h=h.exact||h.ideal||h.max||h.min||0,h||(v=!1)),typeof m!="number"&&(m=m.exact||m.ideal||m.max||m.min||0,l||(v=!1)),v?{stream_type:0,width:h,height:m,fps:l,start_bps:1e3*s.bitrateMax,min_bps:1e3*s.bitrateMin,target_bps:1e3*s.bitrateMax}:void 0}(r);if(o)return this.signal.request(ut.SET_VIDEO_PROFILE,o);U.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(r,o){try{await this.signal.request(ut.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:r,stream_id:o},!0)}catch(s){U.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),s)}}async massUnsubscribe(r){try{await this.signal.request(ut.UNSUBSCRIBE_STREAMS,r,!0)}catch(o){U.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),o)}}async reconnectPC(r){const{iceParameters:o,dtlsParameters:s,rtpCapabilities:l}=r;return{gatewayEstablishParams:await this.signal.request(ut.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:o,dtlsParameters:s,rtpCapabilities:l}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(ut.GATEWAY_INFO)}async renewToken(r){await this.signal.request(ut.RENEW_TOKEN,r),this.key=r.token}async setClientRole(r,o){if(o&&(this._clientRoleOptions=Object.assign({},o)),this.state!=="CONNECTED")return void(this.role=r);let s;s=r==="audience"?this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:0,await this.signal.request(ut.SET_CLIENT_ROLE,{role:r,level:s,client_ts:Date.now()}),this.role=r}async setRemoteVideoStreamType(r,o){await this.signal.request(ut.SWITCH_VIDEO_STREAM,{stream_id:r,stream_type:o})}async setDefaultRemoteVideoStreamType(r){await this.signal.request(ut.DEFAULT_VIDEO_STREAM,{stream_type:r})}async setStreamFallbackOption(r,o){await this.signal.request(ut.SET_FALLBACK_OPTION,{stream_id:r,fallback_type:o})}async pickSVCLayer(r,o){await this.signal.request(ut.PICK_SVC_LAYER,{stream_id:r,spatial_layer:o.spatialLayer,temporal_layer:o.temporalLayer})}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),$s({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(ut.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const r=pC.get(this.joinInfo.cname);r&&r.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const r=function(o){let s;return s=o.startsWith("dc")?o.match(/(dc\:\/\/)?([^:]+):(\d+)/):o.match(/(wss\:\/\/)?([^:]+):(\d+)/),s?{username:Fo.username,password:Fo.password,turnServerURL:s[2],tcpport:parseInt(s[3])+30,udpport:parseInt(s[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],r&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push($s($s({},Fo),{},{turnServerURL:r.turnServerURL,tcpport:r.tcpport,udpport:r.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;const r=await this.signal.request(ut.TRAFFIC_STATS,void 0,!0);r.timestamp=Date.now(),r.peer_delay.forEach(o=>{const s=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(l=>l.peer_uid===o.peer_uid);s&&s.B_st!==o.B_st&&ms(()=>{this.emit(Wn.STREAM_TYPE_CHANGE,o.peer_uid,o.B_st)})}),this._statsCollector.updateTrafficStats(r)}getJoinMessage(r){if(!this.joinInfo||!this.key)throw new Q(z.UNEXPECTED_ERROR,"can not generate join message, no join info");const o=Object.assign({},this.joinInfo.apResponse);let s=re("REPORT_APP_SCENARIO");if(typeof s!="string")try{s=JSON.stringify(s)}catch{s=void 0}s&&s.length>128&&(s=void 0);const l=$s({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:la,browser:navigator.userAgent,process_id:re("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:o,extend:re("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:s,attributes:{userAttributes:{enablePublishedUserList:re("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:re("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:typeof re("SUBSCRIBE_AUDIO_FILTER_TOPN")=="number"?re("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:typeof re("ENABLE_PUBLISH_AUDIO_FILTER")=="boolean"?re("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:typeof re("ENABLE_USER_LICENSE_CHECK")=="boolean"?re("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:re("USE_PUB_RTX")===!0||re("USE_SUB_RTX")===!0||void 0}},join_ts:this.joinGatewayStartTime},r);return this.joinInfo.stringUid&&(l.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(l.aes_mode=this.joinInfo.aesmode,re("ENCRYPT_AES")?(l.aes_secret=this.joinInfo.aespassword,l.aes_encrypt=!0):l.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(l.aes_salt=this.joinInfo.aessalt)),o.addresses[this.signal.websocket.currentURLIndex]&&(l.ap_response.ticket=o.addresses[this.signal.websocket.currentURLIndex].ticket,delete o.addresses),this.joinInfo.defaultVideoStream!==void 0&&(l.default_video_stream=this.joinInfo.defaultVideoStream),l}getRejoinMessage(){if(!this.joinInfo)throw new Q(z.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(Xe.WS_RECONNECT_WAITTING_FINISH,r=>{["tryNext","recover"].includes(r)&&this.joinInfo&&Je.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(Xe.WS_RECONNECT_CREATE_CONNECTION,r=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(Xe.WS_RECONNECTING,r=>{this.joinInfo&&Je.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:r||Wi.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",Je.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(Xe.WS_CLOSED,r=>{let o;switch(r){case sn.LEAVE:o=Wi.LEAVE;break;case sn.UID_BANNED:case sn.IP_BANNED:case sn.CHANNEL_BANNED:case sn.SERVER_ERROR:o=Wi.SERVER_ERROR;break;case sn.FALLBACK:o=Wi.FALLBACK;break;case sn.LICENSE_MISSING:case sn.LICENSE_EXPIRED:case sn.LICENSE_MINUTES_EXCEEDED:case sn.LICENSE_PERIOD_INVALID:case sn.LICENSE_MULTIPLE_SDK_SERVICE:case sn.LICENSE_ILLEGAL:o=r;break;default:o=Wi.NETWORK_ERROR}U.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(o||"undefined -> "+Wi.NETWORK_ERROR)),this.joinInfo&&Je.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:r===sn.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:o}),this._disconnectedReason=r,r!==sn.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(Xe.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&(this.role==="audience"&&this._clientRoleOptions&&this._clientRoleOptions.level&&(U.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),Je.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof gc?"1":"0"}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&this.joinInfo.setLocalAPVersion===1)){const r=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!r)return void U.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(r));Cn("EVENT_REPORT_DOMAIN",r[1]),Cn("EVENT_REPORT_BACKUP_DOMAIN",r[1]),Cn("LOG_UPLOAD_SERVER","".concat(r[1],":6444"))}}),this.signal.on(kt.ON_UPLINK_STATS,r=>{this._statsCollector.updateUplinkStats(r)}),this.signal.on(Xe.REQUEST_RECOVER,(r,o,s)=>{if(!this.joinInfo)return s(new Q(z.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));r&&(this.joinInfo.multiIP=r,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,_i(this,Wn.REQUEST_NEW_GATEWAY_LIST).then(o).catch(s)}),this.signal.on(Xe.REQUEST_JOIN_INFO,async r=>{var o;this.updateTurnConfigFromSignal();const{iceParameters:s,dtlsParameters:l,rtpCapabilities:h}=await _i(this,Wn.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:(o=this.joinInfo)===null||o===void 0?void 0:o.turnServer});r(this.getJoinMessage({ortc:{iceParameters:s,dtlsParameters:l,rtpCapabilities:h,version:"2"}}))}),this.signal.on(Xe.REQUEST_REJOIN_INFO,r=>{r(this.getRejoinMessage())}),this.signal.on(Xe.REPORT_JOIN_GATEWAY,(r,o)=>{this.joinInfo&&(Je.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:r,addr:o,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof gc?"1":"0"}),this._isProactiveJoin=!1)}),this.signal.on(Xe.IS_P2P_DISCONNECTED,r=>{r(uu(this,Wn.IS_P2P_DISCONNECTED))}),this.signal.on(Xe.DISCONNECT_P2P,()=>{this.emit(Wn.DISCONNECT_P2P)}),this.signal.on(Xe.NEED_RENEW_SESSION,()=>{this.emit(Wn.NEED_RENEW_SESSION)}),this.signal.on(Xe.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(Xe.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(Xe.JOIN_RESPONSE,r=>{const o=this.getCurrentGatewayAddress();this.emit(Wn.JOIN_RESPONSE,r,o)}),this.signal.on(Xe.DATACHANNEL_PRECONNECT,async(r,o,s)=>{this.updateTurnConfigFromSignal();const l=this.getCurrentGatewayAddress();return _i(this,Wn.DATACHANNEL_PRECONNECT,r,l).then(o).catch(s)}),this.signal.on(Xe.DATACHANNEL_CONNECTING,async r=>{const{iceParameters:o,dtlsParameters:s,rtpCapabilities:l}=await _i(this,Wn.REQUEST_DC_CONNECTION_PARAMS);r(this.getJoinMessage({ortc:{iceParameters:o,dtlsParameters:s,rtpCapabilities:l,version:"2"}}))}),this.signal.on(Xe.DATACHANNEL_FAILBACK,()=>{U.warning("[".concat(this.store.clientId,"] User join datachannel failed")),this.reset(),this.resetSignal(),this.emit(Wn.DATACHANNEL_FAILBACK)})}async tryUnsubBeforeResub(r,o){try{await this.signal.request(ut.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:r,ortc:[o]},!0)}catch(s){throw U.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),s),s}}async tryUnpubBeforeRepub(r,o){try{await this.signal.request(ut.UNPUBLISH,{stream_id:r,ortc:o},!0)}catch(s){throw U.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),s),s}}async tryMassUnsubBeforeResub(r){const o={users:r.map(s=>({stream_id:s.stream_id,stream_type:s.stream_type}))};try{await this.signal.request(ut.UNSUBSCRIBE_STREAMS,o,!0)}catch(s){throw U.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),s),s}}async muteLocal(r,o){const s={action:r.find(l=>l.stream_type===Nr.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:r,stream_id:o};try{await this.signal.request(ut.CONTROL,s,!0,!0)}catch(l){throw U.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),l),l}}async unmuteLocal(r,o){const s={action:r.find(l=>l.stream_type===Nr.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:r,stream_id:o};try{await this.signal.request(ut.CONTROL,s,!0,!0)}catch(l){throw U.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),l),l}}uploadStats(r,o){this.signal.upload(r,o)}getSignalRTT(){return this.signal.rtt}async restartICE(r){const o={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:r};try{return await this.signal.request(ut.RESTART_ICE,o,!0)}catch(s){throw U.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),s),s}}reconnect(){this.state==="CONNECTED"&&this.signal.reconnect(void 0,Wi.P2P_FAILED)}getCurrentGatewayAddress(){var r;if(!re("GATEWAY_WSS_ADDRESS"))return(r=this.joinInfo)!==null&&r!==void 0&&r.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(r){await this.signal.request(ut.SET_PARAMETER,{enablePublishAudioFilter:r})}resetSignal(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(sn.FALLBACK)),this.store.useDataChannel=!1,this.signal=new ED($s($s({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(Wn.RESET_SIGNAL,d0.websocket)}}/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */(function(){var n;function r(ve){var Se=0;return function(){return Se<ve.length?{done:!1,value:ve[Se++]}:{done:!0}}}var o=typeof Object.defineProperties=="function"?Object.defineProperty:function(ve,Se,Le){return ve==Array.prototype||ve==Object.prototype||(ve[Se]=Le.value),ve},s,l=function(ve){ve=[typeof globalThis=="object"&&globalThis,ve,typeof window=="object"&&window,typeof self=="object"&&self,typeof a=="object"&&a];for(var Se=0;Se<ve.length;++Se){var Le=ve[Se];if(Le&&Le.Math==Math)return Le}throw Error("Cannot find global object")}(this);function h(ve,Se){if(Se)e:{var Le=l;ve=ve.split(".");for(var pt=0;pt<ve.length-1;pt++){var Jt=ve[pt];if(!(Jt in Le))break e;Le=Le[Jt]}(Se=Se(pt=Le[ve=ve[ve.length-1]]))!=pt&&Se!=null&&o(Le,ve,{configurable:!0,writable:!0,value:Se})}}function m(ve){return(ve={next:ve})[Symbol.iterator]=function(){return this},ve}function v(ve){var Se=typeof Symbol<"u"&&Symbol.iterator&&ve[Symbol.iterator];return Se?Se.call(ve):{next:r(ve)}}if(h("Symbol",function(ve){function Se(Jt,Re){this.A=Jt,o(this,"description",{configurable:!0,writable:!0,value:Re})}if(ve)return ve;Se.prototype.toString=function(){return this.A};var Le="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",pt=0;return function Jt(Re){if(this instanceof Jt)throw new TypeError("Symbol is not a constructor");return new Se(Le+(Re||"")+"_"+pt++,Re)}}),h("Symbol.iterator",function(ve){if(ve)return ve;ve=Symbol("Symbol.iterator");for(var Se="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Le=0;Le<Se.length;Le++){var pt=l[Se[Le]];typeof pt=="function"&&typeof pt.prototype[ve]!="function"&&o(pt.prototype,ve,{configurable:!0,writable:!0,value:function(){return m(r(this))}})}return ve}),typeof Object.setPrototypeOf=="function")s=Object.setPrototypeOf;else{var S;e:{var T={};try{T.__proto__={a:!0},S=T.a;break e}catch{}S=!1}s=S?function(ve,Se){if(ve.__proto__=Se,ve.__proto__!==Se)throw new TypeError(ve+" is not extensible");return ve}:null}var b=s;function I(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function L(ve){if(ve.m)throw new TypeError("Generator is already running");ve.m=!0}function V(ve,Se){return ve.h=3,{value:Se}}function K(ve){this.g=new I,this.G=ve}function Y(ve,Se,Le,pt){try{var Jt=Se.call(ve.g.j,Le);if(!(Jt instanceof Object))throw new TypeError("Iterator result "+Jt+" is not an object");if(!Jt.done)return ve.g.m=!1,Jt;var Re=Jt.value}catch(D){return ve.g.j=null,ve.g.s(D),q(ve)}return ve.g.j=null,pt.call(ve.g,Re),q(ve)}function q(ve){for(;ve.g.h;)try{var Se=ve.G(ve.g);if(Se)return ve.g.m=!1,{value:Se.value,done:!1}}catch(Le){ve.g.v=void 0,ve.g.s(Le)}if(ve.g.m=!1,ve.g.l){if(Se=ve.g.l,ve.g.l=null,Se.F)throw Se.D;return{value:Se.return,done:!0}}return{value:void 0,done:!0}}function ue(ve){this.next=function(Se){return ve.o(Se)},this.throw=function(Se){return ve.s(Se)},this.return=function(Se){return function(Le,pt){L(Le.g);var Jt=Le.g.j;return Jt?Y(Le,"return"in Jt?Jt.return:function(Re){return{value:Re,done:!0}},pt,Le.g.return):(Le.g.return(pt),q(Le))}(ve,Se)},this[Symbol.iterator]=function(){return this}}function me(ve,Se){return Se=new ue(new K(Se)),b&&ve.prototype&&b(Se,ve.prototype),Se}if(I.prototype.o=function(ve){this.v=ve},I.prototype.s=function(ve){this.l={D:ve,F:!0},this.h=this.C||this.u},I.prototype.return=function(ve){this.l={return:ve},this.h=this.u},K.prototype.o=function(ve){return L(this.g),this.g.j?Y(this,this.g.j.next,ve,this.g.o):(this.g.o(ve),q(this))},K.prototype.s=function(ve){return L(this.g),this.g.j?Y(this,this.g.j.throw,ve,this.g.o):(this.g.s(ve),q(this))},h("Array.prototype.entries",function(ve){return ve||function(){return function(Se,Le){Se instanceof String&&(Se+="");var pt=0,Jt=!1,Re={next:function(){if(!Jt&&pt<Se.length){var D=pt++;return{value:Le(D,Se[D]),done:!1}}return Jt=!0,{done:!0,value:void 0}}};return Re[Symbol.iterator]=function(){return Re},Re}(this,function(Se,Le){return[Se,Le]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var ye=function(ve,Se){for(var Le=0;Le<ve.length;Le++)Se(ve[Le])},qe=function(ve){return ve.replace(/\r?\n|\r/g,`\r
`)},Te=function(ve,Se,Le){return Se instanceof Blob?(Le=Le!==void 0?String(Le+""):typeof Se.name=="string"?Se.name:"blob",Se.name===Le&&Object.prototype.toString.call(Se)!=="[object Blob]"||(Se=new File([Se],Le)),[String(ve),Se]):[String(ve),String(Se)]},xe=function(ve,Se){if(ve.length<Se)throw new TypeError(Se+" argument required, but only "+ve.length+" present.")},Ce=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,Fe=Ce.FormData,fn=Ce.XMLHttpRequest&&Ce.XMLHttpRequest.prototype.send,bt=Ce.Request&&Ce.fetch,Un=Ce.navigator&&Ce.navigator.sendBeacon,bn=Ce.Element&&Ce.Element.prototype,vr=Ce.Symbol&&Symbol.toStringTag;vr&&(Blob.prototype[vr]||(Blob.prototype[vr]="Blob"),"File"in Ce&&!File.prototype[vr]&&(File.prototype[vr]="File"));try{new File([],"")}catch{Ce.File=function(Se,Le,pt){return Se=new Blob(Se,pt||{}),Object.defineProperties(Se,{name:{value:Le},lastModified:{value:+(pt&&pt.lastModified!==void 0?new Date(pt.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),vr&&Object.defineProperty(Se,vr,{value:"File"}),Se}}var oi=function(ve){return ve.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},dr=function(ve){this.i=[];var Se=this;ve&&ye(ve.elements,function(Le){if(Le.name&&!Le.disabled&&Le.type!=="submit"&&Le.type!=="button"&&!Le.matches("form fieldset[disabled] *"))if(Le.type==="file"){var pt=Le.files&&Le.files.length?Le.files:[new File([],"",{type:"application/octet-stream"})];ye(pt,function(Jt){Se.append(Le.name,Jt)})}else Le.type==="select-multiple"||Le.type==="select-one"?ye(Le.options,function(Jt){!Jt.disabled&&Jt.selected&&Se.append(Le.name,Jt.value)}):Le.type==="checkbox"||Le.type==="radio"?Le.checked&&Se.append(Le.name,Le.value):(pt=Le.type==="textarea"?qe(Le.value):Le.value,Se.append(Le.name,pt))})};if((n=dr.prototype).append=function(ve,Se,Le){xe(arguments,2),this.i.push(Te(ve,Se,Le))},n.delete=function(ve){xe(arguments,1);var Se=[];ve=String(ve),ye(this.i,function(Le){Le[0]!==ve&&Se.push(Le)}),this.i=Se},n.entries=function ve(){var Se,Le=this;return me(ve,function(pt){if(pt.h==1&&(Se=0),pt.h!=3)return Se<Le.i.length?pt=V(pt,Le.i[Se]):(pt.h=0,pt=void 0),pt;Se++,pt.h=2})},n.forEach=function(ve,Se){xe(arguments,1);for(var Le=v(this),pt=Le.next();!pt.done;pt=Le.next()){var Jt=v(pt.value);pt=Jt.next().value,Jt=Jt.next().value,ve.call(Se,Jt,pt,this)}},n.get=function(ve){xe(arguments,1);var Se=this.i;ve=String(ve);for(var Le=0;Le<Se.length;Le++)if(Se[Le][0]===ve)return Se[Le][1];return null},n.getAll=function(ve){xe(arguments,1);var Se=[];return ve=String(ve),ye(this.i,function(Le){Le[0]===ve&&Se.push(Le[1])}),Se},n.has=function(ve){xe(arguments,1),ve=String(ve);for(var Se=0;Se<this.i.length;Se++)if(this.i[Se][0]===ve)return!0;return!1},n.keys=function ve(){var Se,Le,pt,Jt,Re=this;return me(ve,function(D){if(D.h==1&&(Se=v(Re),Le=Se.next()),D.h!=3)return Le.done?void(D.h=0):(pt=Le.value,Jt=v(pt),V(D,Jt.next().value));Le=Se.next(),D.h=2})},n.set=function(ve,Se,Le){xe(arguments,2),ve=String(ve);var pt=[],Jt=Te(ve,Se,Le),Re=!0;ye(this.i,function(D){D[0]===ve?Re&&(Re=!pt.push(Jt)):pt.push(D)}),Re&&pt.push(Jt),this.i=pt},n.values=function ve(){var Se,Le,pt,Jt,Re=this;return me(ve,function(D){if(D.h==1&&(Se=v(Re),Le=Se.next()),D.h!=3)return Le.done?void(D.h=0):(pt=Le.value,(Jt=v(pt)).next(),V(D,Jt.next().value));Le=Se.next(),D.h=2})},dr.prototype._asNative=function(){for(var ve=new Fe,Se=v(this),Le=Se.next();!Le.done;Le=Se.next()){var pt=v(Le.value);Le=pt.next().value,pt=pt.next().value,ve.append(Le,pt)}return ve},dr.prototype._blob=function(){var ve="----formdata-polyfill-"+Math.random(),Se=[],Le="--"+ve+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(pt,Jt){return typeof pt=="string"?Se.push(Le+oi(qe(Jt))+`"\r
\r
`+qe(pt)+`\r
`):Se.push(Le+oi(qe(Jt))+'"; filename="'+oi(pt.name)+`"\r
Content-Type: `+(pt.type||"application/octet-stream")+`\r
\r
`,pt,`\r
`)}),Se.push("--"+ve+"--"),new Blob(Se,{type:"multipart/form-data; boundary="+ve})},dr.prototype[Symbol.iterator]=function(){return this.entries()},dr.prototype.toString=function(){return"[object FormData]"},bn&&!bn.matches&&(bn.matches=bn.matchesSelector||bn.mozMatchesSelector||bn.msMatchesSelector||bn.oMatchesSelector||bn.webkitMatchesSelector||function(ve){for(var Se=(ve=(this.document||this.ownerDocument).querySelectorAll(ve)).length;0<=--Se&&ve.item(Se)!==this;);return-1<Se}),vr&&(dr.prototype[vr]="FormData"),fn){var lo=Ce.XMLHttpRequest.prototype.setRequestHeader;Ce.XMLHttpRequest.prototype.setRequestHeader=function(ve,Se){lo.call(this,ve,Se),ve.toLowerCase()==="content-type"&&(this.B=!0)},Ce.XMLHttpRequest.prototype.send=function(ve){ve instanceof dr?(ve=ve._blob(),this.B||this.setRequestHeader("Content-Type",ve.type),fn.call(this,ve)):fn.call(this,ve)}}bt&&(Ce.fetch=function(ve,Se){return Se&&Se.body&&Se.body instanceof dr&&(Se.body=Se.body._blob()),bt.call(this,ve,Se)}),Un&&(Ce.navigator.sendBeacon=function(ve,Se){return Se instanceof dr&&(Se=Se._asNative()),Un.call(this,ve,Se)}),Ce.FormData=dr}})();const I0=()=>{const n=re("AREAS");return n.length===0&&n.push(Kt.GLOBAL),Wc(n).call(n,(r,o,s)=>{const l=TD(o);return l?s===0?l:"".concat(r,",").concat(l):r},"")},TD=n=>n===Kt.OVERSEA?"".concat(Gr.ASIA,",").concat(Gr.EUROPE,",").concat(Gr.AFRICA,",").concat(Gr.NORTH_AMERICA,",").concat(Gr.SOUTH_AMERICA,",").concat(Gr.OCEANIA):Gr[n],GY=n=>{const r={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return n.map(o=>{const s=h0[o],l=Object.keys(s);l&&l.map(h=>{h!=="CODE"&&(r[h]=r[h].concat(s[h]))})}),r},w0={GLOBAL:{ASIA:[Kt.CHINA,Kt.JAPAN,Kt.INDIA,Kt.KOREA,Kt.HKMC],EUROPE:[],NORTH_AMERICA:[Kt.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},fC=Object.keys(w0[Kt.GLOBAL]),RD=[Kt.CHINA,Kt.NORTH_AMERICA,Kt.EUROPE,Kt.ASIA,Kt.JAPAN,Kt.INDIA,Kt.OCEANIA,Kt.SOUTH_AMERICA,Kt.AFRICA,Kt.KOREA,Kt.HKMC,Kt.US],KY=function(n,r){let o=[];if(n.includes(Kt.GLOBAL)){const h=[Kt.GLOBAL,Kt.OVERSEA],m=Object.keys(h0);if(r===Kt.GLOBAL)throw new Q(z.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(r===Kt.CHINA)o=[Kt.OVERSEA];else if(l=r,fC.includes(l)){const v=(s=r,w0[Kt.GLOBAL][s]||[]),S=[...h,r,...v];o=m.filter(T=>!S.includes(T))}else if(function(v){let S=!1;return fC.forEach(T=>{w0[Kt.GLOBAL][T].includes(v)&&(S=!0)}),S}(r)){const v=function(T){let b;return fC.forEach(I=>{w0[Kt.GLOBAL][I].includes(T)&&(b=I)}),b}(r),S=[...h,v,r];o=m.filter(T=>!S.includes(T))}else o=n;o=function(v){const S=[];return RD.forEach(T=>{v.includes(T)&&S.push(T)}),S.concat(v.filter(T=>!RD.includes(T)))}(o)}else o=n;var s,l;return o};function ID(n){if(!n&&re("AREAS").includes(Kt.EXTENSIONS))return U.debug("update area from ap : reset"),void mC(ux,!0);if(!re("AREAS").includes(Kt.GLOBAL)||!n)return;let r=h0.EXTENSIONS;r&&(r={CODE:TD(Kt.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(n,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(n,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(n,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(n,".agora.io"),"cds-ap-web-2-".concat(n,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(n,".agora.io"),"sua-ap-web-2-".concat(n,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(n,".agora.io"),"uap-ap-web-2-".concat(n,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(n,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(n,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(n,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(n,".agora.io")]},U.debug("update area from ap success: ".concat(n,",config is "),r),Cn("AREAS",[Kt.EXTENSIONS],!0),Object.keys(r).map(o=>{o==="LOG_UPLOAD_SERVER"||o==="EVENT_REPORT_DOMAIN"||o==="EVENT_REPORT_BACKUP_DOMAIN"||o==="PROXY_SERVER_TYPE3"?Cn(o,r[o][0]):Cn(o,r[o])}))}function mC(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const o=Je.reportApiInvoke(null,{name:Or.SET_AREA,options:n,tag:Yn.TRACER});try{let s=[];if(typeof n=="string"&&(s=[n]),Array.isArray(n)&&(n.forEach(h=>{if(!SK.includes(h))throw new Q(z.INVALID_PARAMS,"invalid area code")}),s=n),Object.prototype.toString.call(n)==="[object Object]"){const{areaCode:h,excludedArea:m}=n;if(!h)throw new Q(z.INVALID_PARAMS,"area code is needed");let v=h;typeof h=="string"&&(v=[h]),s=m?KY(v,m):v}if(!r){if(nu.AREAS){const h=new Q(z.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return o.onError(h),void U.warning("setArea is prohibited because of config-distribute")}if(s.includes(Kt.GLOBAL)&&re("AREAS")===Kt.EXTENSIONS){const h=new Q(z.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return o.onError(h),void U.warning("setArea is prohibited because of ap extensions")}}Cn("AREAS",s,r);const l=GY(s);Object.keys(l).map(h=>{h==="LOG_UPLOAD_SERVER"||h==="EVENT_REPORT_DOMAIN"||h==="EVENT_REPORT_BACKUP_DOMAIN"||h==="PROXY_SERVER_TYPE3"?Cn(h,l[h][0]):Cn(h,l[h])}),U.debug("set area success:",s.join(","))}catch(s){throw o.onError(s),s}o.onSuccess()}function wD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function OD(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?wD(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):wD(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let gC=1;function YY(n,r,o,s,l){gC+=1;const h={sid:o.sid,command:"convergeAllocateEdge",uid:"666",appId:o.appId,ts:Math.floor(Date.now()/1e3),seq:gC,requestId:gC,version:la,cname:o.cname},m={service_name:r,json_body:JSON.stringify(h)};let v,S,T=n[0];return Vs(async()=>{v=Date.now();const b=await ps(T,{data:m,cancelToken:s,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(S=Date.now()-v,b.code!==0){const V=new Q(z.UNEXPECTED_RESPONSE,"live streaming ap error, code"+b.code,{retry:!0,responseTime:S});throw U.error(V.toString()),V}const I=JSON.parse(b.json_body);if(I.code!==200){const V=new Q(z.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(I.code,", reason: ").concat(I.reason),{code:I.code,responseTime:S});throw U.error(V.toString()),V}if(!I.servers||I.servers.length===0){const V=new Q(z.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:I.code,responseTime:S});throw U.error(V.toString()),V}const L=function(V,K){return{addressList:V.servers.map(Y=>"wss://".concat(Y.address.replace(/\./g,"-"),".").concat(re("WORKER_DOMAIN"),":").concat(Y.wss,"?serviceName=").concat(encodeURIComponent(K))),workerToken:V.workerToken,vid:V.vid}}(I,r);return re("LIVE_STREAMING_ADDRESS")&&(L.addressList=re("LIVE_STREAMING_ADDRESS")instanceof Array?re("LIVE_STREAMING_ADDRESS"):[re("LIVE_STREAMING_ADDRESS")]),OD(OD({},L),{},{responseTime:S})},(b,I)=>(Je.apworkerEvent(o.sid,{success:!0,sc:200,serviceName:r,responseDetail:JSON.stringify(b.addressList),firstSuccess:I===0,responseTime:S,serverIp:n[I%n.length]}),!1),(b,I)=>(Je.apworkerEvent(o.sid,{success:!1,sc:b.data&&b.data.code||200,serviceName:r,responseTime:S,serverIp:n[I%n.length]}),!!(b.code!==z.OPERATION_ABORTED&&b.code!==z.UNEXPECTED_RESPONSE||b.data&&b.data.retry)&&(T=n[(I+1)%n.length],!0)),l)}let vC=1;function AD(n,r,o,s){let{url:l,areaCode:h}=n;const m=Date.now();let v;const[S,T]=DD(r,h,[jr.CHOOSE_SERVER]);let b=br.networkState;return Vs(async()=>{b&&br.networkState===Ti.OFFLINE&&br.onlineWaiter&&await Me.race([br.onlineWaiter,Ei(s&&s.maxRetryTimeout||kr.maxRetryTimeout)]),b=br.networkState;const{data:I,headers:L}=await ps(l,{data:S,cancelToken:o,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);v=L.http3==="1"?1:-1,Je.reportResourceTiming(l,r.sid),xD(I,l,r,m,[jr.CHOOSE_SERVER],v);const V=lC(I,jr.CHOOSE_SERVER);return PD(V),aD(V,l)},I=>(I&&Je.joinChooseServer(r.sid,{lts:m,succ:!0,csAddr:l,opid:T,serverList:I.gatewayAddrs.map(L=>L.address),ec:null,cid:I.cid.toString(),uid:I.uid.toString(),csIp:I.csIp,unilbsServerIds:[jr.CHOOSE_SERVER].toString(),isHttp3:v}),!1),I=>I.code!==z.OPERATION_ABORTED&&(I.code===z.CAN_NOT_GET_GATEWAY_SERVER?I.data.retry:(Je.joinChooseServer(r.sid,{lts:m,succ:!1,csAddr:l,serverList:null,opid:T,ec:I.code,csIp:I.data&&I.data.csIp,unilbsServerIds:[jr.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:b}),isHttp3:v}),U.warning("[".concat(r.clientId,"] Choose server network error, retry"),I),!0)),s)}function ND(n,r,o,s){let l,{url:h,areaCode:m,serviceIds:v}=n;const S=Date.now(),[T,b]=DD(r,m,v);let I;return Vs(async()=>{I&&br.networkState===Ti.OFFLINE&&br.onlineWaiter&&await Me.race([br.onlineWaiter,Ei(s&&s.maxRetryTimeout||kr.maxRetryTimeout)]),I=br.networkState;const{data:L,headers:V}=await ps(h,{data:T,cancelToken:o,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);l=V.http3==="1"?1:-1,Je.reportResourceTiming(h,r.sid),xD(L,h,r,S,v,l);const K=lC(L,jr.CHOOSE_SERVER),Y=lC(L,r.cloudProxyServer==="proxy5"?jr.CLOUD_PROXY_5:r.cloudProxyServer==="proxy3"||r.cloudProxyServer==="proxy4"?jr.CLOUD_PROXY:jr.CLOUD_PROXY_FALLBACK);return PD(K),{gatewayInfo:aD(K,h),proxyInfo:Y,url:h}},L=>(L.gatewayInfo&&Je.joinChooseServer(r.sid,{lts:S,succ:!0,csAddr:h,serverList:L.gatewayInfo.gatewayAddrs.map(V=>V.address),ec:null,opid:b,cid:L.gatewayInfo.cid.toString(),uid:L.gatewayInfo.uid.toString(),csIp:L.gatewayInfo.csIp,unilbsServerIds:v.toString(),isHttp3:l}),L.proxyInfo&&Je.joinWebProxyAP(r.sid,{lts:S,sucess:1,apServerAddr:h,turnServerAddrList:L.proxyInfo.addresses.map(V=>V.ip).join(","),errorCode:null,eventType:r.cloudProxyServer,unilbsServerIds:v.toString()}),!1),L=>L.code!==z.OPERATION_ABORTED&&(L.code===z.CAN_NOT_GET_GATEWAY_SERVER?L.data.retry:(Je.joinWebProxyAP(r.sid,{lts:S,sucess:0,apServerAddr:h,turnServerAddrList:null,errorCode:L.code,eventType:r.cloudProxyServer,unilbsServerIds:v.toString(),extend:JSON.stringify({networkState:I})}),U.warning("[".concat(r.clientId,"] multi unilbs network error, retry"),L),!0)),s)}const xD=(n,r,o,s,l,h)=>{const m=[],v=S=>{S.flag===4096?Je.joinChooseServer(o.sid,{lts:s,succ:!1,csAddr:r,opid:n.opid,serverList:null,ec:S.error.message,csIp:S.error.data&&S.error.data.csIp,unilbsServerIds:l.toString(),isHttp3:h}):S.flag!==1048576&&S.flag!==4194304&&S.flag!==4194310||Je.joinWebProxyAP(o.sid,{lts:s,sucess:0,apServerAddr:r,turnServerAddrList:null,errorCode:S.error.code,eventType:o.cloudProxyServer,unilbsServerIds:l.toString()})};if(n.response_body.forEach(S=>{const T=S.buffer.code;if(S.uri===23&&T===0&&!S.buffer.edges_services)if(S.buffer.flag===4194310)U.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),S.buffer.edges_services=[];else{const b={error:new Q(z.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:n.detail[502]}),flag:S.buffer.flag};m.push(b),v(b)}if(T!==0){const b=R0(T),I={error:new Q(z.CAN_NOT_GET_GATEWAY_SERVER,b.desc,{desc:b.desc,retry:b.retry,csIp:n.detail[502]}),flag:S.buffer.flag};S.buffer.flag===4194310?U.warning(I.error.toString()):m.push(I),v(I)}}),m.length)throw U.warning("[".concat(o.clientId,"] multi unilbs ").concat(r," failed, ").concat(m.map(S=>"flag: ".concat(S.flag,", message: ").concat(S.error.message,", retry: ").concat(S.error.data.retry)).join(" | "))),new Q(z.CAN_NOT_GET_GATEWAY_SERVER,m.map(S=>"flag: ".concat(S.flag,", message: ").concat(S.error.message)).join(" | "),{retry:!!m.find(S=>S.error.data.retry),csIp:n.detail[502],desc:[...new Set(m.map(S=>{var T,b;return S==null||(T=S.error)===null||T===void 0||(b=T.data)===null||b===void 0?void 0:b.desc}).filter(S=>!!S))]})},PD=n=>{var r,o,s,l;if(n.addresses&&n.addresses.length===0&&n.code===0)throw new Q(z.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:n.detail&&n.detail[502]});if(re("AP_AREA")&&((s=n.detail)!==null&&s!==void 0&&s[23]&&typeof((l=n.detail)===null||l===void 0?void 0:l[23])=="string"?ID(n.detail[23].toLowerCase()):ID()),(r=n.detail)!==null&&r!==void 0&&r[19]&&typeof((o=n.detail)===null||o===void 0?void 0:o[19])=="string"){const m=n.detail[19],v=m==null?void 0:m.split(";");for(let S=0;S<v.length;S++){var h;const T=lc(h=v[S]).call(h);n.addresses[S]&&v&&(n.addresses[S].fingerprint=T)}}if(re("GATEWAY_ADDRESS")&&re("GATEWAY_ADDRESS").length>0){U.debug("assign gateway address to",re("GATEWAY_ADDRESS"));const m=re("GATEWAY_ADDRESS").map(v=>{var S,T;const b=(S=(T=n.addresses.find(I=>I.ip===v.ip&&I.port===v.port))===null||T===void 0?void 0:T.fingerprint)!==null&&S!==void 0?S:"";return{ip:v.ip,port:v.port,ticket:n.addresses[0]&&n.addresses[0].ticket,fingerprint:b}});n.addresses=m}},qY=(n,r)=>{if(n.response_body&&n.response_body.length){const o=n.response_body[0];if(o.buffer.code!==0){const s=R0(o.buffer.code);throw new Q(z.UPDATE_TICKET_FAILED,"[".concat(o.buffer.code,"]: ").concat(s.desc),{retry:s.retry})}return o.buffer.ticket}throw U.debug("update ticket request received ap response without response body:",r),new Q(z.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},DD=(n,r,o)=>{const s=Math.floor(Math.random()*1e12),l={appid:n.appId,client_ts:Date.now(),opid:s,sid:n.sid,request_bodies:[{uri:22,buffer:{cname:n.cname,detail:{6:n.stringUid,11:r,12:re("USE_NEW_TOKEN")?"1":void 0,22:r},key:n.token,service_ids:o,uid:n.uid||0}}]};l.request_bodies.forEach(m=>{n.multiIP&&n.multiIP.gateway_ip&&(m.buffer.detail[5]=JSON.stringify({vocs_ip:[n.multiIP.uni_lbs_ip],vos_ip:[n.multiIP.gateway_ip]}))});const h=new FormData;return h.append("request",JSON.stringify(l)),[h,s]},XY=(n,r)=>{const o=Math.floor(Math.random()*1e12),s={appid:n.appId,client_ts:Date.now(),opid:o,sid:n.sid,request_bodies:[{uri:28,buffer:{cname:n.cname,detail:{1:"",6:n.stringUid,12:"1"},token:n.token,service_ids:r,uid:n.uid||0,edges_services:n.apResponse.addresses.map(h=>({ip:h.ip,port:h.port}))}}]},l=new FormData;return l.append("request",JSON.stringify(s)),[l,o]};let EC=0;async function _C(n,r,o,s){return{gatewayInfo:await async function(h,m,v,S){let T=null;const b=[],I=async()=>{const V=re("WEBCS_DOMAIN").slice(0,re("AJAX_REQUEST_CONCURRENT")).map(q=>({url:h.proxyServer?"https://".concat(h.proxyServer,"/ap/?url=").concat(q+"/api/v2/transpond/webrtc?v=2"):"https://".concat(q,"/api/v2/transpond/webrtc?v=2"),areaCode:I0()})),K=S.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:V.map(q=>q.url)}),Y=await gp({fragementLength:re("FRAGEMENT_LENGTH"),referenceList:V,asyncMapHandler:q=>(U.debug("[".concat(h.clientId,"] Connect to choose_server:"),q.url),AD(q,h,m,v)),allFailedhandler:q=>{throw S.recordJoinChannelService({endTs:Date.now(),status:"error",errors:q},K),q[0]},promisesCollector:b});return S.recordJoinChannelService({endTs:Date.now(),status:"success"},K),Y},L=async()=>{if(await Ei(1e3),T!==null)return T;const V=re("WEBCS_DOMAIN_BACKUP_LIST").map(q=>({url:h.proxyServer?"https://".concat(h.proxyServer,"/ap/?url=").concat(q+"/api/v2/transpond/webrtc?v=2"):"https://".concat(q,"/api/v2/transpond/webrtc?v=2"),areaCode:I0()})),K=S.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:V.map(q=>q.url)}),Y=await gp({fragementLength:re("FRAGEMENT_LENGTH"),referenceList:V,asyncMapHandler:q=>(U.debug("[".concat(h.clientId,"] Connect to backup choose_server:"),q.url),AD(q,h,m,v)),allFailedhandler:q=>{throw S.recordJoinChannelService({endTs:Date.now(),status:"error",errors:q},K),q[0]},promisesCollector:b});return S.recordJoinChannelService({endTs:Date.now(),status:"success"},K),Y};try{return T=await Cd([I(),L()]),b.length&&b.forEach(V=>V.cancel&&typeof V.cancel=="function"&&V.cancel()),T}catch(V){throw V[0]}}(n,r,o,s)}}async function kD(n,r,o,s,l){const h=n.cloudProxyServer;if(h==="disabled"){if(!s)return;if(n.useLocalAccessPoint)return await _C(n,r,o,l);if(re("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:T,proxyInfo:b}=await MD(n,r,o,l);return n.turnServer&&n.turnServer.mode!=="auto"||(n.turnServer={mode:"manual",servers:b.map(I=>({turnServerURL:I.address,tcpport:I.tcpport||Fo.tcpport,udpport:I.udpport||Fo.udpport,username:I.username||Fo.username,password:I.password||Fo.password,forceturn:!1,security:!0}))}),{gatewayInfo:T}}return await _C(n,r,o,l)}const{proxyInfo:m,gatewayInfo:v}=await MD(n,r,o,l),S={gatewayInfo:v};return n.turnServer={mode:"manual",servers:m.map(T=>({turnServerURL:T.address,tcpport:h==="proxy3"?void 0:T.tcpport?T.tcpport:Fo.tcpport,udpport:h==="proxy4"?void 0:T.udpport?T.udpport:Fo.udpport,username:T.username||Fo.username,password:T.password||Fo.password,forceturn:h!=="proxy4",security:h==="proxy5"}))},U.debug("[".concat(n.clientId,"] set proxy server: ").concat(n.proxyServer,", mode: ").concat(h)),S}async function LD(n,r,o,s,l){const h=re("ACCOUNT_REGISTER").slice(0,re("AJAX_REQUEST_CONCURRENT"));let m=[];m=r.proxyServer?h.map(S=>"https://".concat(r.proxyServer,"/ap/?url=").concat(S+"/api/v1")):h.map(S=>"https://".concat(S,"/api/v1"));const v=l==null?void 0:l.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:m});try{const S=await async function(T,b,I,L,V){const K=Date.now(),Y={sid:I.sid,opid:10,appid:I.appId,string_uid:b};let q=T[0];const ue=await Vs(()=>ps(q+"".concat(q.indexOf("?")===-1?"?":"&","action=stringuid"),{data:Y,cancelToken:L,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(me,ye)=>{if(me.code===0){if(me.uid<=0||me.uid>=Math.pow(2,32))throw U.error("Invalid Uint Uid ".concat(b," => ").concat(me.uid),me),Je.reqUserAccount(Y.sid,{lts:K,success:!1,serverAddr:q,stringUid:Y.string_uid,uid:me.uid,errorCode:z.INVALID_UINT_UID_FROM_STRING_UID,extend:Y}),new Q(z.INVALID_UINT_UID_FROM_STRING_UID);return Je.reqUserAccount(Y.sid,{lts:K,success:!0,serverAddr:q,stringUid:Y.string_uid,uid:me.uid,errorCode:null,extend:Y}),!1}const qe=R0(me.code);return qe.retry&&(q=T[(ye+1)%T.length]),Je.reqUserAccount(Y.sid,{lts:K,success:!1,serverAddr:q,stringUid:Y.string_uid,uid:me.uid,errorCode:qe.desc,extend:Y}),qe.retry},(me,ye)=>me.code!==z.OPERATION_ABORTED&&(Je.reqUserAccount(Y.sid,{lts:K,success:!1,serverAddr:q,stringUid:Y.string_uid,uid:null,errorCode:me.code,extend:Y}),q=T[(ye+1)%T.length],!0),V);if(ue.code!==0){const me=R0(ue.code);throw new Q(z.UNEXPECTED_RESPONSE,me.desc)}return ue}(m,n,r,o,s);return l==null||l.recordJoinChannelService({status:"success",endTs:Date.now()},v),S.uid}catch(S){throw l==null||l.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[S]},v),S}}async function JY(n,r,o){const s=re("CDS_AP").slice(0,re("AJAX_REQUEST_CONCURRENT")).map(v=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(v+"/api/v1"):"https://".concat(v,"/api/v1?action=config")).map(v=>function(S,T,b,I){const L=an(),V={flag:64,cipher_method:0,features:{device:L.name,system:L.os,system_general:navigator.userAgent,vendor:T.appId,version:la,cname:T.cname,sid:T.sid,session_id:T.sid,detail:"",proxyServer:T.proxyServer}};return Vs(()=>ps(S,{data:V,timeout:1e3,cancelToken:b,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,K=>K.code!==z.OPERATION_ABORTED,I)}(v,n,r,o));let l=null,h=null,m={};try{l=await Cd(s)}catch(v){if(v.code===z.OPERATION_ABORTED)throw v;h=v}if(s.forEach(v=>v.cancel()),Je.reportApiInvoke(n.sid,{name:Or.REQUEST_CONFIG_DISTRIBUTE,options:{error:h,res:l}}).onSuccess(),l&&l.test_tags)try{m=function(v){if(!v.test_tags)return{};const S=v.test_tags,T=Object.keys(S),b={};return T.forEach(I=>{var L;const V=lc(L=I.slice(4)).call(L),K=JSON.parse(S[I])[1];b[V]=K}),b}(l)}catch{}return m}async function MD(n,r,o,s){const l=re("PROXY_SERVER_TYPE3"),h=(V,K,Y)=>{let q=Y||l;return Array.isArray(q)&&(q=K%2==0?l[1]:l[0]),"https://".concat(q,"/ap/?url=").concat(V)};let m=null;const v=[],S=async()=>{const V=re("WEBCS_DOMAIN").slice(0,re("AJAX_REQUEST_CONCURRENT")).map((q,ue)=>{let me;return me=n.cloudProxyServer==="disabled"&&n.proxyServer?h("".concat(q,"/api/v2/transpond/webrtc?v=2"),ue,n.proxyServer):n.cloudProxyServer==="disabled"||n.cloudProxyServer==="fallback"?"https://".concat(q,"/api/v2/transpond/webrtc?v=2"):h("".concat(q,"/api/v2/transpond/webrtc?v=2"),ue),{url:me,areaCode:I0(),serviceIds:[jr.CHOOSE_SERVER,n.cloudProxyServer==="proxy5"?jr.CLOUD_PROXY_5:n.cloudProxyServer==="proxy3"||n.cloudProxyServer==="proxy4"?jr.CLOUD_PROXY:jr.CLOUD_PROXY_FALLBACK]}}),K=s.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:V.map(q=>q.url)}),Y=await gp({fragementLength:re("FRAGEMENT_LENGTH"),referenceList:V,asyncMapHandler:q=>(U.debug("[".concat(n.clientId,"] Connect to choose_server:"),q.url),ND(q,n,r,o)),allFailedhandler:q=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:q},K),q[0]},promisesCollector:v});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},K),Y},T=async()=>{if(await Ei(1e3),m!==null)return m;const V=re("WEBCS_DOMAIN_BACKUP_LIST").map((q,ue)=>{let me;return me=n.cloudProxyServer==="disabled"&&n.proxyServer?h("".concat(q,"/api/v2/transpond/webrtc?v=2"),ue,n.proxyServer):n.cloudProxyServer==="disabled"||n.cloudProxyServer==="fallback"?"https://".concat(q,"/api/v2/transpond/webrtc?v=2"):h("".concat(q,"/api/v2/transpond/webrtc?v=2"),ue),{url:me,areaCode:I0(),serviceIds:[jr.CHOOSE_SERVER,n.cloudProxyServer==="proxy5"?jr.CLOUD_PROXY_5:n.cloudProxyServer==="proxy3"||n.cloudProxyServer==="proxy4"?jr.CLOUD_PROXY:jr.CLOUD_PROXY_FALLBACK]}}),K=s.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:V.map(q=>q.url)}),Y=await gp({fragementLength:re("FRAGEMENT_LENGTH"),referenceList:V,asyncMapHandler:q=>(U.debug("[".concat(n.clientId,"] Connect to backup choose_server:"),q.url),ND(q,n,r,o)),allFailedhandler:q=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:q},K),q[0]},promisesCollector:v});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},K),Y};let b,I,L;try{({gatewayInfo:b,proxyInfo:I,url:L}=await Cd([S(),T()]))}catch(V){throw V[0]}if(v.length&&v.forEach(V=>V.cancel&&typeof V.cancel=="function"&&V.cancel()),!b||!I)throw new Q(z.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(n.apUrl=L,n.cloudProxyServer!=="disabled"&&Array.isArray(l)&&L){const V=/^https?:\/\/(.+?)(\/.*)?$/.exec(L)[1];l.includes(V)&&(n.proxyServer=V,U.setProxyServer(V),Je.setProxyServer(V))}return m={gatewayInfo:b,proxyInfo:await VY(I,b.uid)},m}async function UD(n,r,o,s){const l=re("UAP_AP").slice(0,re("AJAX_REQUEST_CONCURRENT")).map(h=>r.proxyServer?"https://".concat(r.proxyServer,"/ap/?url=").concat(h+"/api/v1?action=uap"):"https://".concat(h,"/api/v1?action=uap"));return await YY(l,n,r,o,s)}async function QY(n,r,o){const s=re("UAP_AP").slice(0,re("AJAX_REQUEST_CONCURRENT")).map(l=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(l+"/api/v1?action=uap"):"https://".concat(l,"/api/v1?action=uap")).map(l=>function(h,m,v,S){const T={command:"convergeAllocateEdge",sid:m.sid,appId:m.appId,token:m.token,ts:Date.now(),version:la,cname:m.cname,uid:m.uid.toString(),requestId:vC,seq:vC};vC+=1;const b={service_name:"tele_channel",json_body:JSON.stringify(T)};return Vs(async()=>{const I=await ps(h,{data:b,cancelToken:v,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(I.code!==0){const V=new Q(z.UNEXPECTED_RESPONSE,"cross channel ap error, code"+I.code,{retry:!0});throw U.error(V.toString()),V}const L=JSON.parse(I.json_body);if(L.code!==200){const V=new Q(z.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(L.code,", reason: ").concat(L.reason));throw U.error(V.toString()),V}if(!L.servers||L.servers.length===0){const V=new Q(z.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw U.error(V.toString()),V}return{vid:L.vid,workerToken:L.workerToken,addressList:(re("CHANNEL_MEDIA_RELAY_SERVERS")||L.servers).map(V=>"wss://".concat(V.address.replace(/\./g,"-"),".").concat(re("WORKER_DOMAIN"),":").concat(V.wss))}},void 0,I=>!!(I.code!==z.OPERATION_ABORTED&&I.code!==z.UNEXPECTED_RESPONSE||I.data&&I.data.retry),S)}(l,n,r,o));try{const l=await Cd(s);return s.forEach(h=>h.cancel()),l}catch(l){throw l[0]}}async function ZY(n,r,o){let s=null;const l=[],h=async m=>{const v=re(m?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(S=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(S+"/api/v2/transpond/webrtc?v=2"):"https://".concat(S,"/api/v2/transpond/webrtc?v=2"));return m&&(await Ei(1e3),s!==null)?s:await gp({fragementLength:re("FRAGEMENT_LENGTH"),referenceList:v,asyncMapHandler:S=>(U.debug("[".concat(n.clientId,"] update ticket, Connect to ").concat(m?"backup":""," choose_server:"),S),function(T,b,I,L){const[V]=XY(b,[jr.CHOOSE_SERVER]);let K=br.networkState;return Vs(async()=>{K&&br.networkState===Ti.OFFLINE&&br.onlineWaiter&&await Me.race([br.onlineWaiter,Ei(L&&L.maxRetryTimeout||kr.maxRetryTimeout)]),K=br.networkState;const Y=await ps(T,{data:V,cancelToken:I,headers:{"Content-Type":"multipart/form-data;"}},!0);return qY(Y,T)},()=>!1,Y=>Y.code!==z.OPERATION_ABORTED&&(Y.code===z.UPDATE_TICKET_FAILED?Y.data.retry:(U.warning("[".concat(b.clientId,"] update ticket network error, retry"),Y),!0)),L)}(S,n,r,o)),allFailedhandler:S=>{throw S[0]},promisesCollector:l})};try{return s=await Cd([h(!1),h(!0)]),l.length&&l.forEach(m=>m.cancel&&typeof m.cancel=="function"&&m.cancel()),s}catch(m){throw m[0]}}function VD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function FD(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?VD(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):VD(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class eq extends Zn{constructor(){super(),N(this,"configs",void 0),N(this,"joinInfo",void 0),N(this,"cancelToken",void 0),N(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),N(this,"interval",void 0),N(this,"mutex",new Ui("config-distribute")),N(this,"mutableParamsRead",!1)}startGetConfigDistribute(r,o){this.joinInfo=r,this.cancelToken=o,this.interval&&this.stopGetConfigDistribute(),re("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},re("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,Je.reportApiInvoke(null,{options:void 0,name:Or.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Yn.TRACER}).onSuccess(JSON.stringify(nu))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void U.debug("[config-distribute] get config distribute interrupted have no joininfo");let r;const o=await this.mutex.lock();try{r=await JY(this.joinInfo,this.cancelToken,this.retryConfig),U.debug("[config-distribute] get config distribute",JSON.stringify(r)),r.limit_bitrate&&this.handleBitrateLimit(r.limit_bitrate),this.cacheGlobalParameterConfig(r),this.configs=r}catch(s){const l=new Q(z.NETWORK_RESPONSE_ERROR,s);U.warning("[config-distribute] ".concat(l.toString()))}finally{o()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(r){var o;(o=r)&&o.uplink&&o.id&&o.uplink.max_bitrate!==void 0&&o.uplink.min_bitrate!==void 0&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==r.id&&this.emit(pp.UPDATE_BITRATE_LIMIT,r):this.emit(pp.UPDATE_BITRATE_LIMIT,r))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&FD({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(r){var o;const s=ky(o=Object.keys(r).filter(h=>/^webrtc_ng_global_parameter/.test(h))).call(o);for(let h=0;h<s.length;h++)for(let m=s.length-1;m>h;m--){const v=s[m];if(typeof r[v].__priority=="number"){const S=r[v].__priority,T=s[m-1];if(typeof r[T].__priority=="number"){if(!(S>r[T].__priority))continue;{const b=v;s[m]=s[m-1],s[m-1]=b}}else{const b=v;s[m]=s[m-1],s[m-1]=b}}}const l={};s.forEach(h=>{const m=r[h],v=m.__expires;Object.keys(m).forEach(S=>{S==="__priority"||S==="__expires"||Object.prototype.hasOwnProperty.call(l,S)||(l[S]=FD({value:m[S]},v&&{expires:v}))})});try{const h=JSON.stringify(l),m=window.btoa(h);window.localStorage.setItem("websdk_ng_global_parameter",m),U.debug("Caching global parameters ".concat(h))}catch(h){U.error("Error caching global parameters:",h.message)}}}function BD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function Ep(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?BD(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):BD(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class tq extends Zn{constructor(r,o,s,l){super(),N(this,"spec",void 0),N(this,"token",void 0),N(this,"websocket",void 0),N(this,"pingpongTimer",void 0),N(this,"reconnectMode","retry"),N(this,"serviceMode",void 0),N(this,"reqId",0),N(this,"commandReqId",0),N(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),N(this,"handleWebSocketMessage",h=>{if(!h.data)return;const m=JSON.parse(h.data);m.requestId?this.emit("@".concat(m.requestId,"-").concat(m.sid),m):this.serviceMode===Ar.INJECT?this.emit(ka.INJECT_STREAM_STATUS,m):(Je.workerEvent(this.spec.sid,{actionType:"status",serverCode:m.code,workerType:this.serviceMode===Ar.TRANSCODE?1:2}),this.emit(ka.PUBLISH_STREAM_STATUS,m))}),this.spec=o,this.token=r,this.serviceMode=l,this.websocket=new bd("live-streaming",s),this.websocket.on(Nt.CONNECTED,this.handleWebSocketOpen),this.websocket.on(Nt.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(Nt.REQUEST_NEW_URLS,(h,m)=>{_i(this,ka.REQUEST_NEW_ADDRESS).then(h).catch(m)}),this.websocket.on(Nt.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(r){return this.websocket.init(r)}async request(r,o,s,l){this.reqId+=1,r==="request"&&(this.commandReqId+=1);const h=this.commandReqId,m=this.reqId;if(!m||!this.websocket)throw new Q(z.UNEXPECTED_ERROR);const v=Ep({command:r,sdkVersion:la==="4.18.0"?"0.0.1":la,seq:m,requestId:m,allocate:s,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},o);if(this.websocket.state==="closed")throw new Q(z.WS_DISCONNECT);const S=()=>new Me((L,V)=>{this.websocket.once(Nt.CLOSED,()=>V(new Q(z.WS_ABORT))),this.websocket.once(Nt.CONNECTED,L)});this.websocket.state!=="connected"&&await S(),v.clientRequest&&(v.clientRequest.workerToken=this.token);const T=new Me((L,V)=>{const K=()=>{V(new Q(z.WS_ABORT))};this.websocket.once(Nt.RECONNECTING,K),this.websocket.once(Nt.CLOSED,K),this.once("@".concat(m,"-").concat(this.spec.sid),Y=>{L(Y)})});l&&Je.workerEvent(this.spec.sid,Ep(Ep({},l),{},{requestId:h,actionType:"request",payload:JSON.stringify(o.clientRequest),serverCode:0,code:0}));const b=Date.now();this.websocket.sendMessage(v);let I=null;try{I=await T}catch(L){if(this.websocket.state==="closed")throw L;return await S(),await this.request(r,o,s)}return l&&Je.workerEvent(this.spec.sid,Ep(Ep({},l),{},{requestId:h,actionType:"response",payload:JSON.stringify(I.serverResponse),serverCode:I.code,success:I.code===200,responseTime:Date.now()-b})),I.code!==200&&this.handleResponseError(I),I}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const r=la==="4.18.0"?"0.0.1":la;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:r,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(r){switch(r.code){case ur.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void U.warning("live stream response already exists stream");case ur.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case ur.LIVE_STREAM_RESPONSE_BAD_STREAM:case ur.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new Q(z.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:r.code}).throw();case ur.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;throw new Q(z.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case ur.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new Q(z.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:r.code}).throw();case ur.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const o=new Q(z.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(ka.WARNING,o,r.serverResponse.url)}case ur.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const o=new Q(z.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(ka.WARNING,o,r.serverResponse.url)}case ur.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new Q(z.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case ur.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new Q(z.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:r.code}).throw();case ur.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const o=new Q(z.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(ka.WARNING,o,r.serverResponse.url)}case ur.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new Q(z.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:r.code}).throw();case ur.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new Q(z.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case ur.LIVE_STREAM_RESPONSE_WORKER_LOST:case ur.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;throw new Q(z.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case ur.ERROR_FAIL_SEND_MESSAGE:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;if(r.serverResponse.command==="UpdateTranscoding"||r.serverResponse.command==="ControlStream")return new Q(z.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:r.code}).throw();throw new Q(z.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case ur.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case ur.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case ur.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case ur.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new Q(z.LIVE_STREAMING_CDN_ERROR,"",{code:r.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(b0)},6e3)}}function jD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function zi(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?jD(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):jD(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class nq extends Zn{constructor(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kr,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kr;super(),N(this,"onLiveStreamWarning",void 0),N(this,"onLiveStreamError",void 0),N(this,"onInjectStatusChange",void 0),N(this,"spec",void 0),N(this,"retryTimeout",1e4),N(this,"connection",void 0),N(this,"httpRetryConfig",void 0),N(this,"wsRetryConfig",void 0),N(this,"streamingTasks",new Map),N(this,"isStartingStreamingTask",!1),N(this,"taskMutex",new Ui("live-streaming")),N(this,"cancelToken",Pa.CancelToken.source()),N(this,"transcodingConfig",void 0),N(this,"injectConfig",zi({},_K)),N(this,"injectLoopTimes",0),N(this,"uapResponse",void 0),N(this,"lastTaskId",1),N(this,"statusError",new Map),this.spec=r,this.httpRetryConfig=s,this.wsRetryConfig=o}async setTranscodingConfig(r){const o=zi(zi({},EK),r);o.videoCodecProfile!==66&&o.videoCodecProfile!==77&&o.videoCodecProfile!==100&&(U.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(o.videoCodecProfile," -> 100")),o.videoCodecProfile=100),o.transcodingUsers||(o.transcodingUsers=o.userConfigs),o.transcodingUsers&&(o.transcodingUsers=o.transcodingUsers.map(m=>zi(zi(zi({},vK),m),{},{zOrder:m.zOrder?m.zOrder+1:1}))),function(m){Bn(m.width)||xn(m.width,"config.width",0,1e4),Bn(m.height)||xn(m.height,"config.height",0,1e4),Bn(m.videoBitrate)||xn(m.videoBitrate,"config.videoBitrate",1,1e6),Bn(m.videoFrameRate)||xn(m.videoFrameRate,"config.videoFrameRate"),Bn(m.lowLatency)||lp(m.lowLatency,"config.lowLatency"),Bn(m.audioSampleRate)||zr(m.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),Bn(m.audioBitrate)||xn(m.audioBitrate,"config.audioBitrate",1,128),Bn(m.audioChannels)||zr(m.audioChannels,"config.audioChannels",[1,2,3,4,5]),Bn(m.videoGop)||xn(m.videoGop,"config.videoGop"),Bn(m.videoCodecProfile)||zr(m.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),Bn(m.userCount)||xn(m.userCount,"config.userCount",0,17),Bn(m.backgroundColor)||xn(m.backgroundColor,"config.backgroundColor",0,16777215),Bn(m.userConfigExtraInfo)||hi(m.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),m.transcodingUsers&&!Bn(m.transcodingUsers)&&(hc(m.transcodingUsers,"config.transcodingUsers"),m.transcodingUsers.forEach((v,S)=>{Uy(v.uid),Bn(v.x)||xn(v.x,"transcodingUser[".concat(S,"].x"),0,1e4),Bn(v.y)||xn(v.y,"transcodingUser[".concat(S,"].y"),0,1e4),Bn(v.width)||xn(v.width,"transcodingUser[".concat(S,"].width"),0,1e4),Bn(v.height)||xn(v.height,"transcodingUser[".concat(S,"].height"),0,1e4),Bn(v.zOrder)||xn(v.zOrder-1,"transcodingUser[".concat(S,"].zOrder"),0,100),Bn(v.alpha)||xn(v.alpha,"transcodingUser[".concat(S,"].alpha"),0,1,!1)})),Bn(m.watermark)||Wy(m.watermark,"watermark"),Bn(m.backgroundImage)||Wy(m.backgroundImage,"backgroundImage"),m.images&&!Bn(m.images)&&(hc(m.images,"config.images"),m.images.forEach((v,S)=>{Wy(v,"images[".concat(S,"]"))}))}(o);const s=[];o.images&&s.push(...o.images.map(m=>zi(zi(zi({},Hy),m),{},{zOrder:255}))),o.backgroundImage&&(s.push(zi(zi(zi({},Hy),o.backgroundImage),{},{zOrder:0})),delete o.backgroundImage),o.watermark&&(s.push(zi(zi(zi({},Hy),o.watermark),{},{zOrder:255})),delete o.watermark),o.images=s,o.transcodingUsers&&(o.userConfigs=o.transcodingUsers.map(m=>zi({},m)),o.userCount=o.transcodingUsers.length,delete o.transcodingUsers);const l=(o.userConfigs||[]).map(m=>typeof m.uid=="number"?Me.resolve(m.uid):LD(m.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await Me.all(l)).forEach((m,v)=>{o.userConfigs&&o.userConfigs[v]&&(o.userConfigs[v].uid=m)}),this.transcodingConfig=o,this.connection)try{var h;const m=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(Bs(h=this.streamingTasks).call(h)).map(v=>v.taskId).join("#")});U.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(m.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(m){if(!m.data||!m.data.retry)throw m;m.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(v=>{U.warning("[".concat(this.spec.clientId,"] live streaming receive error"),m.toString(),"try to republish",v.url),this.startLiveStreamingTask(v.url,v.mode,m).then(()=>{U.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(v.url," success"))}).catch(S=>{U.error("[".concat(this.spec.clientId,"] live streaming republish failed"),v.url,S.toString()),this.onLiveStreamError&&this.onLiveStreamError(v.url,S)})})}}setInjectStreamConfig(r,o){this.injectConfig=Object.assign({},this.injectConfig,r),this.injectLoopTimes=o}async startLiveStreamingTask(r,o,s){var l;if(Array.from(Bs(l=this.streamingTasks).call(l)).find(S=>S.mode===Ar.INJECT)&&o===Ar.INJECT)return new Q(z.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&o===Ar.TRANSCODE)throw new Q(z.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let h={command:"PublishStream",ts:Date.now(),url:r,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};U.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(r,", mode: ").concat(o));const m=await this.taskMutex.lock();if(!this.connection&&s)return void m();if(this.streamingTasks.get(r)&&!s)return m(),new Q(z.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(o))}catch(S){throw m(),S}switch(o){case Ar.TRANSCODE:h.transcodingConfig=zi({},this.transcodingConfig);break;case Ar.RAW:break;case Ar.INJECT:h={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:r,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(h.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const v=this.lastTaskId++;try{const S=new Me((b,I)=>{Ei(this.retryTimeout).then(()=>{if(s)return I(s);const L=this.statusError.get(r);return L?(this.statusError.delete(r),I(L)):void 0})}),T=await Me.race([this.connection.request("request",{clientRequest:h},!0,{url:r,command:"PublishStream",workerType:o===Ar.TRANSCODE?1:2,requestByUser:!s,tid:v.toString()}),S]);this.isStartingStreamingTask=!1,U.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(T.code)),this.streamingTasks.set(r,{clientRequest:h,mode:o,url:r,taskId:v}),m()}catch(S){if(m(),this.isStartingStreamingTask=!1,!S.data||!S.data.retry||s)throw S;return S.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(r,o,S)):await this.startLiveStreamingTask(r,o,S)}}stopLiveStreamingTask(r){return new Me((o,s)=>{const l=this.streamingTasks.get(r);if(!l||!this.connection)return new Q(z.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const h=l.mode;l.abortTask=()=>{U.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(r),o()},this.connection.request("request",{clientRequest:{command:h===Ar.INJECT?"UninjectStream":"UnpublishStream",url:l.url}},!1,{url:r,command:"UnPublishStream",workerType:h===Ar.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(m=>{U.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(m.code)),this.streamingTasks.delete(r),this.streamingTasks.size===0&&h!==Ar.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),o(),h===Ar.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(qc.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,r)}).catch(s)})}async controlInjectStream(r,o,s,l){const h=this.streamingTasks.get(r);if(!h||!this.connection||h.mode!==Ar.INJECT)throw new Q(z.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:r,control:o,audioVolume:s,position:l}})).serverResponse}resetAllTask(){var r;const o=Array.from(Bs(r=this.streamingTasks).call(r));this.terminate();for(const s of o)this.startLiveStreamingTask(s.url,s.mode).catch(l=>{this.onLiveStreamError&&this.onLiveStreamError(s.url,l)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=Pa.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(r){if(this.connection)throw new Q(z.UNEXPECTED_ERROR,"live streaming connection has already connected");const o=await _i(this,pd.REQUEST_WORKER_MANAGER_LIST,r);return this.uapResponse=o,this.connection=new tq(o.workerToken,this.spec,this.wsRetryConfig,r),this.connection.on(ka.WARNING,(s,l)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(l,s)),this.connection.on(ka.PUBLISH_STREAM_STATUS,s=>this.handlePublishStreamServer(s)),this.connection.on(ka.INJECT_STREAM_STATUS,s=>this.handleInjectStreamServerStatus(s)),this.connection.on(ka.REQUEST_NEW_ADDRESS,(s,l)=>{if(!this.connection)return l(new Q(z.UNEXPECTED_ERROR,"can not get new live streaming address list"));_i(this,pd.REQUEST_WORKER_MANAGER_LIST,r).then(h=>{this.uapResponse=h,s(h.addressList)}).catch(l)}),await this.connection.init(o.addressList),this.connection}handlePublishStreamServer(r){const o=r.serverStatus&&r.serverStatus.url||"empty_url",s=this.streamingTasks.get(o),l=r.reason;switch(r.code){case ur.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case ur.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case ur.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case ur.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const m=new Q(z.LIVE_STREAMING_CDN_ERROR,"",{code:r.code});if(s)return U.error(m.toString()),this.onLiveStreamError&&this.onLiveStreamError(o,m);if(!this.isStartingStreamingTask)return;this.statusError.set(o,m)}case ur.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const m=new Q(z.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,l);return this.onLiveStreamWarning&&this.onLiveStreamWarning(o,m)}case ur.LIVE_STREAM_RESPONSE_WORKER_LOST:case ur.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var h;if(!this.connection)return;this.connection.tryNextAddress();const m=Array.from(Bs(h=this.streamingTasks).call(h));for(const v of m)v.abortTask?v.abortTask():(U.warning("[".concat(this.spec.clientId,"] publish stream status code"),r.code,"try to republish",v.url),this.startLiveStreamingTask(v.url,v.mode,new Q(z.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:r.code})).then(()=>{U.debug("[".concat(this.spec.clientId,"] republish live stream success"),v.url)}).catch(S=>{U.error(S.toString()),this.onLiveStreamError&&this.onLiveStreamError(v.url,S)}));return}}}handleInjectStreamServerStatus(r){const o=Number(r.uid),s=r.serverStatus&&r.serverStatus.url;switch(r.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(qc.INJECT_STREAM_STATUS_START_SUCCESS,o,s));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(qc.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,o,s),void this.streamingTasks.delete(s);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(qc.INJECT_STREAM_STATUS_START_UNAUTHORIZED,o,s),void this.streamingTasks.delete(s);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(qc.INJECT_STREAM_STATUS_BROKEN,o,s),void this.streamingTasks.delete(s);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(qc.INJECT_STREAM_STATUS_START_TIMEOUT,o,s),void this.streamingTasks.delete(s);default:return void U.debug("inject stream server status",r)}}hasUrl(r){return this.streamingTasks.has(r)}}class $D{constructor(){N(this,"destChannelMediaInfos",new Map),N(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(r){kx(r),this.srcChannelMediaInfo=r}addDestChannelInfo(r){kx(r),this.destChannelMediaInfos.set(r.channelName,r)}removeDestChannelInfo(r){My(r),this.destChannelMediaInfos.delete(r)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function HD(n){if(!(n instanceof $D))return new Q(z.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const r=n.getSrcChannelMediaInfo(),o=n.getDestChannelMediaInfo();if(!r)return new Q(z.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if(o.size===0)return new Q(z.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}class rq extends Zn{constructor(r,o,s){super(),N(this,"ws",void 0),N(this,"requestId",1),N(this,"heartBeatTimer",void 0),N(this,"joinInfo",void 0),N(this,"clientId",void 0),N(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),N(this,"onClose",l=>{this.emit("close"),this.dispose()}),N(this,"onMessage",l=>{const h=JSON.parse(l.data);if(!h||h.command!=="serverResponse"||!h.requestId)return h&&h.command==="serverStatus"&&h.serverStatus&&h.serverStatus.command?(this.emit("status",h.serverStatus),void this.emit(h.serverStatus.command,h.serverStatus)):void 0;this.emit("req_".concat(h.requestId),h)}),this.joinInfo=r,this.clientId=o,this.ws=new bd("cross-channel-".concat(this.clientId),s),this.ws.on(Nt.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(Nt.CONNECTED,this.onOpen),this.ws.on(Nt.ON_MESSAGE,this.onMessage),this.ws.on(Nt.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(r){const o=this.requestId++;return r.requestId=o,r.seq=o,this.ws.sendMessage(r),o}waitStatus(r){return new Me((o,s)=>{const l=window.setTimeout(()=>{s(new Q(z.TIMEOUT,"wait status timeout, status: ".concat(r)))},5e3);this.once(r,h=>{window.clearTimeout(l),h.state&&h.state!==0?s(new Q(z.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(r))):o(void 0)}),this.once("dispose",()=>{window.clearTimeout(l),s(new Q(z.WS_ABORT))})})}async request(r){if(this.ws.state==="closed")throw new Q(z.WS_DISCONNECT);const o=()=>new Me((m,v)=>{this.ws.once(Nt.CLOSED,()=>v(new Q(z.WS_ABORT))),this.ws.once(Nt.CONNECTED,m)});this.ws.state!=="connected"&&await o();const s=this.sendMessage(r),l=new Me((m,v)=>{const S=()=>{v(new Q(z.WS_ABORT))};this.ws.once(Nt.RECONNECTING,S),this.ws.once(Nt.CLOSED,S),this.once("req_".concat(s),m),Ei(3e3).then(()=>{this.removeAllListeners("req_".concat(s)),this.ws.off(Nt.RECONNECTING,S),this.ws.off(Nt.CLOSED,S),v(new Q(z.TIMEOUT,"cross channel ws request timeout"))})}),h=await l;if(!h||h.code!==200)throw new Q(z.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(h)));return h}async connect(r){this.ws.removeAllListeners(Nt.REQUEST_NEW_URLS),this.ws.on(Nt.REQUEST_NEW_URLS,o=>{o(r)}),await this.ws.init(r)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(r){const o=this.requestId++;return r.requestId=o,this.ws.sendMessage(r),o}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class iq extends Zn{set state(r){r!==this._state&&(r!==Mi.RELAY_STATE_FAILURE&&(this.errorCode=Xc.RELAY_OK),this.emit("state",r,this.errorCode),this._state=r)}get state(){return this._state}constructor(r,o,s,l,h){super(),N(this,"joinInfo",void 0),N(this,"sid",void 0),N(this,"clientId",void 0),N(this,"cancelToken",Pa.CancelToken.source()),N(this,"workerToken",void 0),N(this,"requestId",0),N(this,"signal",void 0),N(this,"prevChannelMediaConfig",void 0),N(this,"httpRetryConfig",void 0),N(this,"_resolution",void 0),N(this,"_state",Mi.RELAY_STATE_IDLE),N(this,"errorCode",Xc.RELAY_OK),N(this,"onStatus",m=>{U.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(m))),m&&m.command&&(m.command==="onAudioPacketReceived"&&this.emit("event",us.PACKET_RECEIVED_AUDIO_FROM_SRC),m.command==="onVideoPacketReceived"&&this.emit("event",us.PACKET_RECEIVED_VIDEO_FROM_SRC),m.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=Xc.SRC_TOKEN_EXPIRED,this.state=Mi.RELAY_STATE_FAILURE),m.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=Xc.DEST_TOKEN_EXPIRED,this.state=Mi.RELAY_STATE_FAILURE))}),N(this,"onReconnect",async()=>{U.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",us.NETWORK_DISCONNECTED),this.state=Mi.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(m=>{this.state!==Mi.RELAY_STATE_IDLE&&(U.error("auto restart channel media relay failed",m.toString()),this.errorCode=Xc.SERVER_CONNECTION_LOST,this.state=Mi.RELAY_STATE_FAILURE)})}),this.joinInfo=r,this.clientId=o,this.sid=uC(),this.signal=new rq(this.joinInfo,this.clientId,s),this.httpRetryConfig=l,this._resolution=h}async startChannelMediaRelay(r){if(this.state!==Mi.RELAY_STATE_IDLE)throw new Q(z.INVALID_OPERATION);this.state=Mi.RELAY_STATE_CONNECTING,await this.connect(),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(r)}catch(o){throw o.data&&o.data.serverResponse&&o.data.serverResponse.command==="SetSourceChannel"?new Q(z.CROSS_CHANNEL_FAILED_JOIN_SRC):o.data&&o.data.serverResponse&&o.serverResponse.command==="SetDestChannelStatus"?new Q(z.CROSS_CHANNEL_FAILED_JOIN_DEST):o.data&&o.data.serverResponse&&o.serverResponse.command==="StartPacketTransfer"?new Q(z.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):o}this.prevChannelMediaConfig=r}async updateChannelMediaRelay(r){if(this.state!==Mi.RELAY_STATE_RUNNING)throw new Q(z.INVALID_OPERATION);await this.sendUpdateMessage(r),this.prevChannelMediaConfig=r}async setVideoProfile(r){if(this._resolution=r,this.state!==Mi.RELAY_STATE_RUNNING)throw new Q(z.INVALID_OPERATION);const o=this.genMessage(mi.SetVideoProfile);await this.signal.request(o),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),U.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=Mi.RELAY_STATE_IDLE,this.dispose()}dispose(){U.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=Pa.CancelToken.source(),this.state=Mi.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const r=await QY(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=r.workerToken,await this.signal.connect(r.addressList),this.emit("event",us.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(r){const o=this.genMessage(mi.StopPacketTransfer);await this.signal.request(o),await this.signal.waitStatus("Normal Quit"),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const s=this.genMessage(mi.SetSdkProfile,r);await this.signal.request(s),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const l=this.genMessage(mi.SetSourceChannel,r);await this.signal.request(l),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",us.PACKET_JOINED_SRC_CHANNEL),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const h=this.genMessage(mi.SetSourceUserId,r);await this.signal.request(h),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const m=this.genMessage(mi.SetDestChannel,r);await this.signal.request(m),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",us.PACKET_JOINED_DEST_CHANNEL),U.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const v=this.genMessage(mi.StartPacketTransfer,r);await this.signal.request(v),this.emit("event",us.PACKET_SENT_TO_DEST_CHANNEL),this.state=Mi.RELAY_STATE_RUNNING,U.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(r){const o=this.genMessage(mi.UpdateDestChannel,r);await this.signal.request(o),this.emit("event",us.PACKET_UPDATE_DEST_CHANNEL),U.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const r=this.genMessage(mi.StopPacketTransfer);await this.signal.request(r),U.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(r,o){const s=[],l=[],h=[];this.requestId+=1;const m={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:la,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};m.sdkVersion==="4.18.0"&&(m.sdkVersion="0.0.1");let v=null,S=null;switch(r){case mi.SetSdkProfile:return m.clientRequest={command:"SetSdkProfile",type:"multi_channel"},m;case mi.SetSourceChannel:if(S=o&&o.getSrcChannelMediaInfo(),!S)throw new Q(z.UNEXPECTED_ERROR,"can not find source config");return m.clientRequest={command:"SetSourceChannel",uid:"0",channelName:S.channelName,token:S.token||this.joinInfo.appId},m;case mi.SetSourceUserId:if(S=o&&o.getSrcChannelMediaInfo(),!S)throw new Q(z.UNEXPECTED_ERROR,"can not find source config");return m.clientRequest={command:"SetSourceUserId",uid:S.uid+""},m;case mi.SetDestChannel:if(v=o&&o.getDestChannelMediaInfo(),!v)throw new Q(z.UNEXPECTED_ERROR,"can not find dest config");return v.forEach(T=>{s.push(T.channelName),l.push(T.uid+""),h.push(T.token||this.joinInfo.appId)}),m.clientRequest={command:"SetDestChannel",channelName:s,uid:l,token:h},m;case mi.StartPacketTransfer:return m.clientRequest={command:"StartPacketTransfer"},m;case mi.Reconnect:return m.clientRequest={command:"Reconnect"},m;case mi.StopPacketTransfer:return m.clientRequest={command:"StopPacketTransfer"},m;case mi.UpdateDestChannel:if(v=o&&o.getDestChannelMediaInfo(),!v)throw new Q(z.UNEXPECTED_ERROR,"can not find dest config");return v.forEach(T=>{s.push(T.channelName),l.push(T.uid+""),h.push(T.token||this.joinInfo.appId)}),m.clientRequest={command:"UpdateDestChannel",channelName:s,uid:l,token:h},m;case mi.SetVideoProfile:m.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return m}}const SC=n=>{const r=document.createElement("canvas");return r.width=2,r.height=2,new Me((o,s)=>{r.toBlob(async l=>{if(r.remove(),l){const h=await WD(l);o({buffer:h,width:r.width,height:r.height})}else s(new Q(z.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},n,1)})},WD=async n=>{const r=await n.arrayBuffer();return new Uint8Array(r)};function zD(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function GD(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?zD(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):zD(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class yC{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(r){r!==this._videoElementStatus&&(U.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(r)),this._videoElementStatus=r)}constructor(r){N(this,"trackId",void 0),N(this,"config",void 0),N(this,"onFirstVideoFrameDecoded",void 0),N(this,"freezeTimeCounterList",[]),N(this,"renderFreezeAccTime",0),N(this,"isKeepLastFrame",!1),N(this,"timeUpdatedCount",0),N(this,"freezeTime",0),N(this,"playbackTime",0),N(this,"lastTimeUpdatedTime",0),N(this,"autoplayFailed",!1),N(this,"videoTrack",void 0),N(this,"videoElement",void 0),N(this,"cacheVideoElement",void 0),N(this,"videoElementCheckInterval",void 0),N(this,"_videoElementStatus",pi.NONE),N(this,"isGettingVideoDimensions",!1),N(this,"startGetVideoDimensions",()=>{const o=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return U.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(o,500)};!this.isGettingVideoDimensions&&o()}),N(this,"autoResumeAfterInterruption",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&cn.curState==="running"&&(U.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(TN())),AN()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),N(this,"handleVideoEvents",o=>{switch(o.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=pi.PLAYING;break;case"loadeddata":if(this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch{}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=pi.CANPLAY;break;case"stalled":this.videoElementStatus=pi.STALLED;break;case"suspend":this.videoElementStatus=pi.SUSPEND;break;case"pause":this.videoElementStatus=pi.PAUSED,ki()||Us()||Di()&&this.autoplayFailed||!this.videoTrack||this.videoTrack.readyState!=="live"||(U.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=pi.WAITING;break;case"abort":this.videoElementStatus=pi.ABORT;break;case"ended":this.videoElementStatus=pi.ENDED;break;case"emptied":this.videoElementStatus=pi.EMPTIED;break;case"error":{this.videoElementStatus=pi.ERROR;const s=this.videoElement.error;s&&U.error("[".concat(this.trackId,"] media error, code: ").concat(s.code,", message: ").concat(s.message));break}case"timeupdate":{const s=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=s);const l=s-this.lastTimeUpdatedTime,h=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=s,fc.lastVisibleTime<fc.lastHiddenTime||h<fc.lastHiddenTime||h<fc.lastVisibleTime)return;for(l>re("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=l),this.playbackTime+=l;this.playbackTime>=6e3;){this.playbackTime-=6e3;const m=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(m),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),N(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&(U.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(TN())),AN()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),this.trackId=r.trackId,this.config=r,r.element instanceof HTMLVideoElement?this.videoElement=r.element:this.videoElement=document.createElement("video"),cn.on($r.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),cn.on($r.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var r;return(r=this.videoElement.parentElement)!==null&&r!==void 0?r:void 0}updateConfig(r){this.config=r,this.trackId=r.trackId,r.element!==this.videoElement&&(this.destroy(),this.videoElement=r.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(r){this.videoTrack!==r&&(this.videoTrack=r,this.initVideoElement())}play(r){const o=this.videoElement.play();o&&o.catch&&o.catch(l=>{r&&Je.autoplayFailed(r,"video",l.message,this.trackId),l.name==="NotAllowedError"?(U.warning("detected video element autoplay failed",l),this.autoplayFailed=!0,this.handleAutoPlayFailed()):U.warning("[".concat(this.trackId,"] play warning: "),l)});const s=an();if((s.name==="Safari"&&Number(s.version)===15||id())&&o&&o.then&&o.catch){const l=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};o.then(l).catch(l)}}getCurrentFrame(){const r=document.createElement("canvas");r.width=this.videoElement.videoWidth,r.height=this.videoElement.videoHeight;const o=r.getContext("2d");if(!o)return U.error("create canvas context failed!"),new ImageData(2,2);o.drawImage(this.videoElement,0,0,r.width,r.height);const s=o.getImageData(0,0,r.width,r.height);return r.remove(),s}async getCurrentFrameToUint8Array(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const s=document.createElement("canvas");s.width=this.videoElement.videoWidth,s.height=this.videoElement.videoHeight;const l=s.getContext("2d");return l?(l.drawImage(this.videoElement,0,0,s.width,s.height),new Me((h,m)=>{s.toBlob(async v=>{if(s.remove(),v){const S=await WD(v);h({buffer:S,width:s.width,height:s.height})}else m(new Q(z.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},r,o<0?.1:o>1?1:o)})):await SC(r)}destroy(){cn.off($r.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),cn.off($r.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[]}initVideoElement(){if(this.videoElementStatus=pi.INIT,!this.videoElementCheckInterval&&(KD.forEach(h=>{this.videoElement.addEventListener(h,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{(function(h){return h!==document.body&&document.body.contains(h)})(this.videoElement)||(this.videoElementStatus=pi.DESTROYED)},1e3),re("ENABLE_VIDEO_FRAME_CALLBACK"))){var r,o;let h;const m=(v,S)=>{if(this.videoElementStatus===pi.PLAYING){if(h){const I=S.presentationTime-h.presentationTime;I>re("VIDEO_FREEZE_DURATION")&&fc.lastVisibleTime>=fc.lastHiddenTime&&h.timestamp>fc.lastVisibleTime&&h.timestamp>fc.lastHiddenTime&&(this.renderFreezeAccTime+=I)}h=GD(GD({},S),{},{timestamp:v})}var T,b;re("ENABLE_VIDEO_FRAME_CALLBACK")&&((T=(b=this.videoElement).requestVideoFrameCallback)===null||T===void 0||T.call(b,m))};(r=(o=this.videoElement).requestVideoFrameCallback)===null||r===void 0||r.call(o,m)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),Qm()&&(this.videoElement.poster="noposter");const s=an();s.name==="Safari"&&Number(s.version)===15||id()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Qn()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Qn()&&this.videoElement.load());const l=this.videoElement.play();l!==void 0&&l.catch(h=>{U.debug("[".concat(this.trackId,"] playback interrupted"),h.toString())})}resetVideoElement(){KD.forEach(r=>{this.videoElement&&this.videoElement.removeEventListener(r,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=pi.NONE}handleAutoPlayFailed(){const r=o=>{o.preventDefault(),this.videoElement.play().then(()=>{U.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(s=>{U.error(s)}),this.autoplayFailed=!1,op()?document.body.removeEventListener("click",r,!0):(document.body.removeEventListener("touchstart",r,!0),document.body.removeEventListener("mousedown",r,!0))};op()?document.body.addEventListener("click",r,!0):(document.body.addEventListener("touchstart",r,!0),document.body.addEventListener("mousedown",r,!0)),Xx()}}const KD=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class YD extends yC{constructor(r){super(r),N(this,"container",void 0),N(this,"slot",void 0),this.slot=r.element,this.updateConfig(r)}updateConfig(r){this.config=r,this.trackId=r.trackId;const o=r.element;o!==this.slot&&(this.destroy(),this.slot=o),this.createElements()}updateVideoTrack(r){this.videoTrack!==r&&(this.videoTrack=r,this.createElements())}play(r){var o;(o=this.container)!==null&&o!==void 0&&o.contains(this.videoElement)&&super.play(r)}getCurrentFrame(){var r;return(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(r){var o;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(o=this.container)!==null&&o!==void 0&&o.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(r,s):await SC(r)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",re("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var r;!this.container||(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var r;if((r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=document.createElement("video")}}resetVideoElement(){var r;(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}function O0(n){const r={};n.facingMode&&(r.facingMode=n.facingMode),n.cameraId&&(r.deviceId={exact:n.cameraId});const o=tu(n.encoderConfig);return r.width=o.width,r.height=o.height,!xN()&&o.frameRate&&(r.frameRate=o.frameRate),an().name===pn.EDGE&&typeof r.frameRate=="object"&&(r.frameRate.max=60),Qn()&&(r.frameRate={ideal:30,max:30}),r}function oq(n){const r={};n.screenSourceType&&(r.mediaSource=n.screenSourceType),n.extensionId&&ay()&&(r.extensionId=n.extensionId);const{displaySurface:o,selfBrowserSurface:s,surfaceSwitching:l,systemAudio:h}=n;(sy(107)||RN(107)||IN(93))&&(o&&(zr(o,"displaySurface",["browser","window","monitor"]),r.displaySurface=o),s?(zr(s,"selfBrowserSurface",["exclude","include"]),r.selfBrowserSurface=s):r.selfBrowserSurface="include",l&&(zr(l,"surfaceSwitching",["exclude","include"]),r.surfaceSwitching=l)),(sy(105)||RN(105)||IN(91))&&h&&(zr(h,"systemAudio",["exclude","include"]),r.systemAudio=h),n.electronScreenSourceId&&(r.sourceId=n.electronScreenSourceId);const m=n.encoderConfig?Oy(n.encoderConfig):null;return r.mandatory={chromeMediaSource:"desktop",maxWidth:m?m.width:void 0,maxHeight:m?m.height:void 0},m&&(m.frameRate&&(typeof m.frameRate=="number"?(r.mandatory.maxFrameRate=m.frameRate,r.mandatory.minFrameRate=m.frameRate):(r.mandatory.maxFrameRate=m.frameRate.max||m.frameRate.ideal||m.frameRate.exact||void 0,r.mandatory.minFrameRate=m.frameRate.min||m.frameRate.ideal||m.frameRate.exact||void 0),r.frameRate=m.frameRate),m.width&&(r.width=m.width),m.height&&(r.height=m.height)),r}function qD(n){const r={};if(xN()||(n.AGC!==void 0&&(r.autoGainControl=n.AGC),n.AEC!==void 0&&(r.echoCancellation=n.AEC),n.ANS!==void 0&&(r.noiseSuppression=n.ANS,ay()&&n.ANS&&(r.googHighpassFilter=n.ANS))),n.encoderConfig){const o=u0(n.encoderConfig);r.channelCount=o.stereo?2:1,r.sampleRate=o.sampleRate,r.sampleSize=o.sampleSize}return n.microphoneId&&(r.deviceId={exact:n.microphoneId}),Qm()&&(r.sampleRate=void 0),r}var Td,A0;(function(n){n.COVERED="COVERED",n.POSITION="POSITION",n.SIZE="SIZE",n.STYLE="STYLE"})(Td||(Td={})),function(n){n.UNMOUNTED="UNMOUNTED",n.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(A0||(A0={}));var XD,JD,QD,ZD,ek,tk,nk,rk,ik,ok,ak,sk,ck,lk,uk,dk,hk,pk,fk,mk,gk,vk,Ek,_k,Ft,Sk,yk,Ck,bk,Tk,Rk,Ik,wk,ha,Ok=new class{constructor(){N(this,"_clientSize",null),N(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),N(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),N(this,"getStyle",n=>window.getComputedStyle(n,null)),N(this,"checkCssVisibleProperty",n=>{let r=!0;const o=this.getStyle(n),{display:s,visibility:l,opacity:h,filter:m}=o;return(s==="none"||["hidden","collapse"].includes(l)||Number(h)<.1)&&(r=!1),r?(m&&m.split(" ").filter(v=>{const S=v.split("(")[0];return["brightness","blur","opacity"].includes(S)}).map(v=>{const[S,T]=v.split(/\(|\)/);return[S,Number(T.match(/^[0-9\.]+/))]}).forEach(v=>{const[S,T]=v;switch(S){case"brightness":(T<.1||T>3)&&(r=!1);break;case"blur":T>3&&(r=!1);break;case"opacity":T<.1&&(r=!1)}}),r):!1}),N(this,"checkPropertyUpToAllParentNodes",(n,r)=>{let o=!0,s=!0;const l=m=>r(m);let h=n;for(;h&&s;)l(h)||(o=!1,s=!1),h=h.parentElement,h||(s=!1);return o}),N(this,"checkActualCssVisibleIncludeInherit",n=>this.checkPropertyUpToAllParentNodes(n,this.checkCssVisibleProperty)),N(this,"getSizeAboutClient",n=>{const{width:r,height:o,left:s,right:l,top:h,bottom:m}=n.getBoundingClientRect(),v=this.getClientWidth(),S=this.getClientHeight();return{width:r,height:o,left:s,right:l,top:h,bottom:m,clientWidth:v,clientHeight:S,clientMin:Math.min(v,S)}}),N(this,"checkActualSize",()=>{const{width:n,height:r,clientMin:o}=this._clientSize;return this.checkSizeIsVisible(n,r,o)}),N(this,"elementFromPoint",(n,r)=>document.elementFromPoint?document.elementFromPoint(n,r):null),N(this,"checkCoverForAPoint",(n,r,o)=>{const s=this.elementFromPoint(n,r);return s!==null&&s!==o}),N(this,"getPointPositionList",()=>{const{width:n,height:r,left:o,top:s}=this._clientSize,l=n/6,h=r/6,m=[],v=10**6;for(let S=0;S<5;S++)for(let T=0;T<5;T++){const b=(o*v+(S===0?.1:S===4?(l*S*v-1e5)/v:l*S)*v)/v,I=(s*v+(T===0?.1:T===4?(h*T*v-1e5)/v:h*T)*v)/v;m.push({x:b,y:I})}return[...m]}),N(this,"checkElementCover",n=>this.getPointPositionList().map(r=>this.checkCoverForAPoint(r.x,r.y,n)).filter(r=>!!r).length>6),N(this,"checkSizeIsVisible",(n,r,o)=>(n>50||o/n<=10)&&(r>50||o/r<=10)),N(this,"checkSizeOfPartInClient",()=>{const{left:n,right:r,top:o,bottom:s,clientHeight:l,clientWidth:h,clientMin:m}=this._clientSize;let v,S,T,b;if(n<0)v=0;else{if(!(n<h))return!1;v=n}if(r<0)return!1;if(S=r<h?r:h,o<0)T=0;else{if(!(o<l))return!1;T=o}if(s<0)return!1;b=s<l?s:l;const I=S-v,L=b-T;return this.checkSizeIsVisible(I,L,m)}),N(this,"returnHiddenResult",n=>(this._clientSize=null,{visible:!1,reason:n})),N(this,"checkOneElementVisible",n=>{if(n instanceof HTMLElement){if(this.checkElementIsMountedOnDom(n)){if(this.checkActualCssVisibleIncludeInherit(n)){if(this._clientSize=this.getSizeAboutClient(n),this.checkElementCover(n))return this.returnHiddenResult(Td.COVERED);{const r=this.checkActualSize(),o=this.checkSizeOfPartInClient();return r&&!o?this.returnHiddenResult(Td.POSITION):r?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(Td.SIZE)}}return this.returnHiddenResult(Td.STYLE)}return this.returnHiddenResult(A0.UNMOUNTED)}return this.returnHiddenResult(A0.INVALID_HTML_ELEMENT)}),N(this,"checkElementIsMountedOnDom",n=>this.checkPropertyUpToAllParentNodes(n,r=>r.nodeName.toUpperCase()!=="HTML"?r.parentElement!==null:!!document.documentElement))}};function Ak(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function _p(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?Ak(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Ak(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let Rr=(XD=rt({argsMap:(n,r,o)=>[n.getTrackId(),typeof r=="string"?r:r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",o]}),JD=tr(),QD=rt({argsMap:n=>[n.getTrackId()]}),ZD=gd("LocalVideoTrack","_enabledMutex"),ek=rt({argsMap:(n,r)=>[n.getTrackId(),r]}),tk=tr(),nk=gd("LocalVideoTrack","_enabledMutex"),rk=rt({argsMap:(n,r)=>[n.getTrackId(),r]}),ik=tr(),ok=rt({argsMap:(n,r)=>[n.getTrackId(),r]}),ak=tr(),sk=tr(),ck=rt({argsMap:(n,r,o)=>[n.getTrackId(),r,o]}),lk=tr(),uk=tr(),dk=tr(),hk=tr(),pk=tr(),fk=tr(),mk=tr(),gk=rt({argsMap:(n,r)=>[n.getTrackId(),r.name]}),vk=rt({argsMap:n=>[n.getTrackId()]}),Ek=rt({argsMap:n=>[n.getTrackId()]}),_k=rt({argsMap:(n,r,o)=>[n.getTrackId(),r.label,o]}),_e((Ft=class BF extends tC{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==pi.PLAYING)}get processorContext(){return this._processorContext}set processorContext(r){this._processorContext=r}get __className__(){return"LocalVideoTrack"}constructor(r,o,s,l,h,m){if(super(r,h),N(this,"trackMediaType","video"),N(this,"_player",void 0),N(this,"_videoVisibleTimer",null),N(this,"_previousVideoVisibleStatus",void 0),N(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),N(this,"_encoderConfig",void 0),N(this,"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),N(this,"_optimizationMode",void 0),N(this,"_videoHeight",void 0),N(this,"_videoWidth",void 0),N(this,"_forceBitrateLimit",void 0),N(this,"_enabled",!0),N(this,"processorDestination",void 0),N(this,"_processorContext",void 0),Di()){const{width:v,height:S}=r.getSettings();this._videoWidth=v,this._videoHeight=S}else this.updateMediaStreamTrackResolution();this._encoderConfig=o,this._scalabiltyMode=s,this._optimizationMode=l,this._hints=m||[],this._hints.indexOf(Lr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile(),o&&this._hints.indexOf(Lr.CUSTOM_TRACK)!==-1&&this.setEncoderConfiguration(o),this.processorContext=new fP(this.getTrackId(),"local"),this.processorDestination=new pP(this.processorContext),this.bindProcessorDestinationEvents()}play(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof r=="string"){const l=document.getElementById(r);l?r=l:(U.warning("[".concat(this.getTrackId(),'] can not find "#').concat(r,'" element, use document.body')),r=document.body)}U.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(o));const s=_p(_p(_p({},this._getDefaultPlayerConfig()),o),{},{trackId:this.getTrackId(),element:r});this._player?this._player.updateConfig(s):(r instanceof HTMLVideoElement?this._player=new yC(s):this._player=new YD(s),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const l=this.getVideoElementVisibleStatus();this.emit(Jc.VIDEO_ELEMENT_VISIBLE_STATUS,l)}catch{}},re("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,U.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(r,o){if(!o){if(r===this._enabled)return;this.stateCheck("enabled",r)}if(U.info("[".concat(this.getTrackId(),"] start setEnabled"),r),!r){this._originMediaStreamTrack.enabled=!1;try{await nr(this,dt.NEED_DISABLE_TRACK,this)}catch(s){throw U.error("[".concat(this.getTrackId(),"] setEnabled to false error"),s.toString()),s}return o||(this._enabled=!1),void U.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await nr(this,dt.NEED_ENABLE_TRACK,this)}catch(s){throw U.error("[".concat(this.getTrackId(),"] setEnabled to true error"),s.toString()),s}U.info("[".concat(this.getTrackId(),"] setEnabled to true success")),o||(this._enabled=!0)}async setMuted(r){r!==this._muted&&(this.stateCheck("muted",r),this._muted=r,this._originMediaStreamTrack.enabled=!r,U.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(r)),r?await nr(this,dt.NEED_MUTE_TRACK,this):await nr(this,dt.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(r,o){if(!this._enabled)throw new Q(z.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(r=tu(r),this._forceBitrateLimit&&(r.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:r.bitrateMax,r.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:r.bitrateMin),r.width||r.height||r.frameRate){const s=O0({encoderConfig:r});(Di()||ki()||Us())&&(s.deviceId=void 0),U.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(r),JSON.stringify(s));try{await this._originMediaStreamTrack.applyConstraints(s),this.updateMediaStreamTrackResolution()}catch(l){const h=new Q(z.UNEXPECTED_ERROR,l.toString());throw U.error("[".concat(this.getTrackId(),"] applyConstraints error"),h.toString()),h}}this._encoderConfig=r,this._hints.indexOf(Lr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await nr(this,dt.NEED_UPDATE_VIDEO_ENCODER,this)}catch(s){return s.throw()}}getStats(){return mp(()=>{U.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),fs(this,dt.GET_STATS)||_p({},$y)}async setBeautyEffect(r){U.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(r,o):await SC(r)}clone(r,o,s,l){const h=this._mediaStreamTrack.clone();return new BF(h,r,o,s,l)}async setBitrateLimit(r){if(U.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(r))),r){this._forceBitrateLimit=r,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<r.max_bitrate?this._encoderConfig.bitrateMax:r.max_bitrate:this._encoderConfig.bitrateMax=r.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=r.min_bitrate);try{await nr(this,dt.NEED_UPDATE_VIDEO_ENCODER,this)}catch(o){return o.throw()}}}async setOptimizationMode(r){if(r!=="motion"&&r!=="detail"&&r!=="balanced")return void U.error(z.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const o=this._optimizationMode;try{this._optimizationMode=r,await nr(this,dt.SET_OPTIMIZATION_MODE,this)}catch(s){throw this._optimizationMode=o,U.error("[".concat(this.getTrackId(),"] set optimization mode failed"),s.toString()),s}U.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(r,")"))}setScalabiltyMode(r){if(r.numSpatialLayers===1&&r.numTemporalLayers!==1)return U.error(z.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=r,U.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(r,")"))}updateMediaStreamTrackResolution(){uD(this._originMediaStreamTrack).then(r=>{let[o,s]=r;this._videoHeight=s,this._videoWidth=o}).catch(b0)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:r,height:o,frameRate:s}=this.getMediaStreamTrackSettings();if(!r||!o||!s)return;const[l,h]=function(m,v,S){const T=re("BITRATE_ADAPTER_TYPE");let b;const I=200*Math.pow(S/15,.6)*Math.pow(m*v/640/360,.75),L=I;if(T==="STANDARD_BITRATE")b=4*I;else{if(T!=="COMPATIABLE_BITRATE")return;b=2*I}return[Math.floor(b),Math.floor(L)]}(r,o,s)||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=h,this._encoderConfig.bitrateMax=l,U.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(r,", h: ").concat(o,", fps: ").concat(s,"] => [brMax: ").concat(l,", brMin: ").concat(h,"]")))}getVideoElementVisibleStatus(){try{var r,o;const s=this==null||(r=this._player)===null||r===void 0?void 0:r.getContainerElement(),l={track:this,element:this==null||(o=this._player)===null||o===void 0?void 0:o.getVideoElement(),slot:s==null?void 0:s.parentElement},{element:h,slot:m}=l;if(this.isPlaying&&h instanceof HTMLVideoElement&&m instanceof HTMLElement){const v=Ok.checkOneElementVisible(h),S=Object.assign({},v);if(S.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=S.visible;const T=Je.reportApiInvoke(null,{tag:Yn.TRACER,name:Or.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});S.visible?T.onSuccess("Video is visible"):T.onSuccess("Invisible because of ".concat(S.reason))}return S}return}catch(s){throw new Q(z.GET_VIDEO_ELEMENT_VISIBLE_ERROR,s.message)}}async renewMediaStreamTrack(r){}pipe(r){if(this.processor===r)return r;if(r._source)throw new Q(z.INVALID_OPERATION,"Processor ".concat(r.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=r,this.processor._source=this,r.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),r}unpipe(){if(!this.processor)return;const r=this.processor;this.processor._source=void 0,this.processor=void 0,r.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}async replaceTrack(r,o){if(!(r instanceof MediaStreamTrack))throw new Q(z.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if(r.kind!=="video")throw new Q(z.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(r,o,!0),this.updateMediaStreamTrackResolution()}bindProcessorDestinationEvents(){this.processorDestination.on(gi.ON_TRACK,async r=>{r?r!==this._mediaStreamTrack&&(this._mediaStreamTrack=r,this._updatePlayerSource(),await nr(this,dt.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await nr(this,dt.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(gi.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(ao.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(ao.REQUEST_CONSTRAINTS)}}).prototype,"play",[XD,JD],Object.getOwnPropertyDescriptor(Ft.prototype,"play"),Ft.prototype),_e(Ft.prototype,"stop",[QD],Object.getOwnPropertyDescriptor(Ft.prototype,"stop"),Ft.prototype),_e(Ft.prototype,"setEnabled",[ZD,ek,tk],Object.getOwnPropertyDescriptor(Ft.prototype,"setEnabled"),Ft.prototype),_e(Ft.prototype,"setMuted",[nk,rk,ik],Object.getOwnPropertyDescriptor(Ft.prototype,"setMuted"),Ft.prototype),_e(Ft.prototype,"setEncoderConfiguration",[ok,ak],Object.getOwnPropertyDescriptor(Ft.prototype,"setEncoderConfiguration"),Ft.prototype),_e(Ft.prototype,"getStats",[sk],Object.getOwnPropertyDescriptor(Ft.prototype,"getStats"),Ft.prototype),_e(Ft.prototype,"setBeautyEffect",[ck,lk],Object.getOwnPropertyDescriptor(Ft.prototype,"setBeautyEffect"),Ft.prototype),_e(Ft.prototype,"getCurrentFrameData",[uk],Object.getOwnPropertyDescriptor(Ft.prototype,"getCurrentFrameData"),Ft.prototype),_e(Ft.prototype,"getCurrentFrameImage",[dk],Object.getOwnPropertyDescriptor(Ft.prototype,"getCurrentFrameImage"),Ft.prototype),_e(Ft.prototype,"setBitrateLimit",[hk],Object.getOwnPropertyDescriptor(Ft.prototype,"setBitrateLimit"),Ft.prototype),_e(Ft.prototype,"setOptimizationMode",[pk],Object.getOwnPropertyDescriptor(Ft.prototype,"setOptimizationMode"),Ft.prototype),_e(Ft.prototype,"setScalabiltyMode",[fk],Object.getOwnPropertyDescriptor(Ft.prototype,"setScalabiltyMode"),Ft.prototype),_e(Ft.prototype,"updateMediaStreamTrackResolution",[mk],Object.getOwnPropertyDescriptor(Ft.prototype,"updateMediaStreamTrackResolution"),Ft.prototype),_e(Ft.prototype,"pipe",[gk],Object.getOwnPropertyDescriptor(Ft.prototype,"pipe"),Ft.prototype),_e(Ft.prototype,"unpipe",[vk],Object.getOwnPropertyDescriptor(Ft.prototype,"unpipe"),Ft.prototype),_e(Ft.prototype,"close",[Ek],Object.getOwnPropertyDescriptor(Ft.prototype,"close"),Ft.prototype),_e(Ft.prototype,"replaceTrack",[_k],Object.getOwnPropertyDescriptor(Ft.prototype,"replaceTrack"),Ft.prototype),Ft),Nk=(Sk=rt({argsMap:(n,r)=>[n.getTrackId(),r]}),yk=tr(),Ck=gd("CameraVideoTrack","_enabledMutex"),bk=rt({argsMap:(n,r)=>[n.getTrackId(),r]}),Tk=tr(),Rk=rt({argsMap:(n,r)=>[n.getTrackId(),r]}),Ik=tr(),wk=rt({argsMap:n=>[n.getTrackId()]}),_e((ha=class extends Rr{get __className__(){return"CameraVideoTrack"}constructor(n,r,o,s,l,h){super(n,tu(r.encoderConfig),s,l,h),N(this,"_config",void 0),N(this,"_originalConstraints",void 0),N(this,"_constraints",void 0),N(this,"_enabled",!0),N(this,"_deviceName","default"),N(this,"tryResumeVideoForIOS15_16WeChat",async()=>{(id()||cy())&&!function(){const m=an();if(m.os!==di.IOS||!m.osVersion)return!1;const v=m.osVersion.split(".");return Number(v[0])===15&&Number(v[1])>=2}()&&NN()&&this._enabled&&!this._isClosed&&(U.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=r,this._originalConstraints=o,this._constraints=o,this._deviceName=n.label,this._encoderConfig=tu(this._config.encoderConfig),cn.on($r.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),cn.on($r.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(n){if(U.info("[".concat(this.getTrackId(),"] set device to ").concat(n)),this._enabled)try{const r=await zo.getDeviceById(n),o={};o.video=_p({},this._constraints),o.video.deviceId={exact:n},o.video.facingMode=void 0,this._originMediaStreamTrack.stop();let s=null;try{s=await La(o,this.getTrackId())}catch(l){throw U.error("[".concat(this.getTrackId(),"] setDevice failed"),l.toString()),s=await La({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(s.getVideoTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(s.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=r.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(r){throw U.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}else try{const r=await zo.getDeviceById(n);this._deviceName=r.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(r){throw U.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}U.info("[".concat(this.getTrackId(),"] setDevice success"))}async setEnabled(n,r){if(!r){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(U.info("[".concat(this.getTrackId(),"] start setEnabled"),n),n){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const o=await La({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(o.getVideoTracks()[0],!1)}await nr(this,dt.NEED_ENABLE_TRACK,this)}catch(o){throw U.error("[".concat(this.getTrackId(),"] setEnabled true error"),o.toString()),o}this.updateMediaStreamTrackResolution(),U.info("[".concat(this.getTrackId(),"] setEnabled to true success")),r||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),r||(this._enabled=!1);try{await nr(this,dt.NEED_DISABLE_TRACK,this)}catch(o){throw U.error("[".concat(this.getTrackId(),"] setEnabled to false error"),o.toString()),o}U.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(n,r){if(!this._enabled)throw new Q(z.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");n=tu(n),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:n.bitrateMin);const o=Tr(this._config);o.encoderConfig=n;const s=O0(o);(Di()||ki()||Us())&&(s.deviceId=void 0),U.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(s));try{await this._originMediaStreamTrack.applyConstraints(s),this.updateMediaStreamTrackResolution()}catch(l){const h=new Q(z.UNEXPECTED_ERROR,l.toString());throw U.error("[".concat(this.getTrackId(),"] applyConstraints error"),h.toString()),h}this._config=o,this._constraints=s,this._originalConstraints=s,this._encoderConfig=n,this._hints.indexOf(Lr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await nr(this,dt.NEED_UPDATE_VIDEO_ENCODER,this)}catch(l){return l.throw()}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((ki()||Us())&&this._enabled&&!this._isClosed&&cn.duringInterruption){const n=async()=>{cn.off($r.IOS_INTERRUPTION_END,n),this._enabled&&!this._isClosed&&(U.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};cn.on($r.IOS_INTERRUPTION_END,n)}else U.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(Jc.TRACK_ENDED)}async renewMediaStreamTrack(n){const r=n||this._constraints,o=zo.searchDeviceIdByName(this._deviceName);if(o&&!r.deviceId&&(r.deviceId={exact:o}),this._enabled){const s=await La({video:r},this.getTrackId());this._constraints=r,await this._updateOriginMediaStreamTrack(s.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),cn.off($r.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),cn.off($r.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}bindProcessorContextEvents(){this.processorContext.on(ao.REQUEST_UPDATE_CONSTRAINTS,async(n,r,o)=>{try{const s=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(s),r()}catch(s){o(s)}}),this.processorContext.on(ao.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[Sk,yk],Object.getOwnPropertyDescriptor(ha.prototype,"setDevice"),ha.prototype),_e(ha.prototype,"setEnabled",[Ck,bk,Tk],Object.getOwnPropertyDescriptor(ha.prototype,"setEnabled"),ha.prototype),_e(ha.prototype,"setEncoderConfiguration",[Rk,Ik],Object.getOwnPropertyDescriptor(ha.prototype,"setEncoderConfiguration"),ha.prototype),_e(ha.prototype,"close",[wk],Object.getOwnPropertyDescriptor(ha.prototype,"close"),ha.prototype),ha);class CC{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}constructor(r,o){N(this,"uid",void 0),N(this,"_uintid",void 0),N(this,"_trust_in_room_",!0),N(this,"_trust_audio_enabled_state_",!0),N(this,"_trust_video_enabled_state_",!0),N(this,"_trust_audio_mute_state_",!0),N(this,"_trust_video_mute_state_",!0),N(this,"_audio_muted_",!1),N(this,"_video_muted_",!1),N(this,"_audio_enabled_",!0),N(this,"_video_enabled_",!0),N(this,"_audio_added_",!1),N(this,"_video_added_",!1),N(this,"_trust_video_stream_added_state_",!0),N(this,"_trust_audio_stream_added_state_",!0),N(this,"_audioTrack",void 0),N(this,"_videoTrack",void 0),N(this,"_audioSSRC",void 0),N(this,"_videoSSRC",void 0),N(this,"_audioOrtc",void 0),N(this,"_videoOrtc",void 0),N(this,"_cname",void 0),N(this,"_rtxSsrcId",void 0),this.uid=r,this._uintid=o}}var aq=$A,sq=Zu,cq=Fm;$i({target:"Promise",stat:!0},{try:function(n){var r=sq.f(this),o=cq(n);return(o.error?r.reject:r.resolve)(o.value),r.promise}});var bC=aq,lq=$i,uq=R,dq=c,hq=fp,pq=Pe,fq=bi,mq=$c,xk=Ny,gq=Fx,vq=zx,Eq=zt,Pk=Xn("isConcatSpreadable"),Dk=9007199254740991,kk="Maximum allowed index exceeded",Lk=uq.TypeError,_q=Eq>=51||!dq(function(){var n=[];return n[Pk]=!1,n.concat()[0]!==n}),Sq=vq("concat"),yq=function(n){if(!pq(n))return!1;var r=n[Pk];return r!==void 0?!!r:hq(n)};lq({target:"Array",proto:!0,forced:!_q||!Sq},{concat:function(n){var r,o,s,l,h,m=fq(this),v=gq(m,0),S=0;for(r=-1,s=arguments.length;r<s;r++)if(yq(h=r===-1?m:arguments[r])){if(S+(l=mq(h))>Dk)throw Lk(kk);for(o=0;o<l;o++,S++)o in h&&xk(v,S,h[o])}else{if(S>=Dk)throw Lk(kk);xk(v,S++,h)}return v.length=S,v}});var Mk={},Cq=ge,bq=ze,Uk=ym.f,Tq=hx,Vk=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Mk.f=function(n){return Vk&&Cq(n)=="Window"?function(r){try{return Uk(r)}catch{return Tq(Vk)}}(n):Uk(bq(n))};var Sp={},Rq=Xn;Sp.f=Rq;var Fk=Ye,Iq=Hn,wq=Sp,Oq=ss.f,ii=function(n){var r=Fk.Symbol||(Fk.Symbol={});Iq(r,n)||Oq(r,n,{value:wq.f(n)})},Rd=$i,TC=R,Aq=$e,Nq=P,yp=ee,xq=y,Id=F,du=Lt,RC=c,Si=Hn,Pq=fp,Dq=M,kq=Pe,Lq=C,IC=Rn,wC=cs,Mq=bi,N0=ze,OC=In,Bk=qu,AC=ie,Cp=Rm,jk=oS,Uq=ym,$k=Mk,NC=rS,Hk=B,Wk=ss,Vq=iS,zk=H,Fq=bS,xC=Lm,bp=yt.exports,Gk=Cm,Kk=ts,Yk=Xn,Bq=Sp,jq=ii,$q=Zh,qk=km,x0=jx.forEach,Go=Sm("hidden"),P0="Symbol",Xk=Yk("toPrimitive"),Hq=qk.set,Jk=qk.getterFor(P0),gs=Object.prototype,el=TC.Symbol,hu=el&&el.prototype,Qk=TC.TypeError,PC=TC.QObject,Tp=Aq("JSON","stringify"),Zk=Hk.f,tl=Wk.f,eL=$k.f,Wq=zk.f,tL=xq([].push),vc=bp("symbols"),Rp=bp("op-symbols"),DC=bp("string-to-symbol-registry"),kC=bp("symbol-to-string-registry"),zq=bp("wks"),LC=!PC||!PC.prototype||!PC.prototype.findChild,MC=Id&&RC(function(){return Cp(tl({},"a",{get:function(){return tl(this,"a",{value:7}).a}})).a!=7})?function(n,r,o){var s=Zk(gs,r);s&&delete gs[r],tl(n,r,o),s&&n!==gs&&tl(gs,r,s)}:tl,UC=function(n,r){var o=vc[n]=Cp(hu);return Hq(o,{type:P0,tag:n,description:r}),Id||(o.description=r),o},D0=function(n,r,o){n===gs&&D0(Rp,r,o),wC(n);var s=OC(r);return wC(o),Si(vc,s)?(o.enumerable?(Si(n,Go)&&n[Go][s]&&(n[Go][s]=!1),o=Cp(o,{enumerable:AC(0,!1)})):(Si(n,Go)||tl(n,Go,AC(1,{})),n[Go][s]=!0),MC(n,s,o)):tl(n,s,o)},VC=function(n,r){wC(n);var o=N0(r),s=jk(o).concat(FC(o));return x0(s,function(l){Id&&!yp(nL,o,l)||D0(n,l,o[l])}),n},nL=function(n){var r=OC(n),o=yp(Wq,this,r);return!(this===gs&&Si(vc,r)&&!Si(Rp,r))&&(!(o||!Si(this,r)||!Si(vc,r)||Si(this,Go)&&this[Go][r])||o)},rL=function(n,r){var o=N0(n),s=OC(r);if(o!==gs||!Si(vc,s)||Si(Rp,s)){var l=Zk(o,s);return!l||!Si(vc,s)||Si(o,Go)&&o[Go][s]||(l.enumerable=!0),l}},iL=function(n){var r=eL(N0(n)),o=[];return x0(r,function(s){Si(vc,s)||Si(Gk,s)||tL(o,s)}),o},FC=function(n){var r=n===gs,o=eL(r?Rp:N0(n)),s=[];return x0(o,function(l){!Si(vc,l)||r&&!Si(gs,l)||tL(s,vc[l])}),s};if(du||(xC(hu=(el=function(){if(Lq(hu,this))throw Qk("Symbol is not a constructor");var n=arguments.length&&arguments[0]!==void 0?Bk(arguments[0]):void 0,r=Kk(n),o=function(s){this===gs&&yp(o,Rp,s),Si(this,Go)&&Si(this[Go],r)&&(this[Go][r]=!1),MC(this,r,AC(1,s))};return Id&&LC&&MC(gs,r,{configurable:!0,set:o}),UC(r,n)}).prototype,"toString",function(){return Jk(this).tag}),xC(el,"withoutSetter",function(n){return UC(Kk(n),n)}),zk.f=nL,Wk.f=D0,Vq.f=VC,Hk.f=rL,Uq.f=$k.f=iL,NC.f=FC,Bq.f=function(n){return UC(Yk(n),n)},Id&&tl(hu,"description",{configurable:!0,get:function(){return Jk(this).description}})),Rd({global:!0,wrap:!0,forced:!du,sham:!du},{Symbol:el}),x0(jk(zq),function(n){jq(n)}),Rd({target:P0,stat:!0,forced:!du},{for:function(n){var r=Bk(n);if(Si(DC,r))return DC[r];var o=el(r);return DC[r]=o,kC[o]=r,o},keyFor:function(n){if(!IC(n))throw Qk(n+" is not a symbol");if(Si(kC,n))return kC[n]},useSetter:function(){LC=!0},useSimple:function(){LC=!1}}),Rd({target:"Object",stat:!0,forced:!du,sham:!Id},{create:function(n,r){return r===void 0?Cp(n):VC(Cp(n),r)},defineProperty:D0,defineProperties:VC,getOwnPropertyDescriptor:rL}),Rd({target:"Object",stat:!0,forced:!du},{getOwnPropertyNames:iL,getOwnPropertySymbols:FC}),Rd({target:"Object",stat:!0,forced:RC(function(){NC.f(1)})},{getOwnPropertySymbols:function(n){return NC.f(Mq(n))}}),Tp&&Rd({target:"JSON",stat:!0,forced:!du||RC(function(){var n=el();return Tp([n])!="[null]"||Tp({a:n})!="{}"||Tp(Object(n))!="{}"})},{stringify:function(n,r,o){var s=Fq(arguments),l=r;if((kq(r)||n!==void 0)&&!IC(n))return Pq(r)||(r=function(h,m){if(Dq(l)&&(m=yp(l,this,h,m)),!IC(m))return m}),s[1]=r,Nq(Tp,null,s)}}),!hu[Xk]){var Gq=hu.valueOf;xC(hu,Xk,function(n){return yp(Gq,this)})}$q(el,P0),Gk[Go]=!0,ii("asyncIterator"),ii("hasInstance"),ii("isConcatSpreadable"),ii("iterator"),ii("match"),ii("matchAll"),ii("replace"),ii("search"),ii("species"),ii("split"),ii("toPrimitive"),ii("toStringTag"),ii("unscopables"),Zh(R.JSON,"JSON",!0);var Kq=Ye.Symbol;ii("asyncDispose"),ii("dispose"),ii("matcher"),ii("metadata"),ii("observable"),ii("patternMatch"),ii("replaceAll");var oL=Kq,aL=Sp.f("asyncIterator"),Yq=aL;function sL(n){this.wrapped=n}function Ip(n){var r,o;function s(h,m){try{var v=n[h](m),S=v.value,T=S instanceof sL;bC.resolve(T?S.wrapped:S).then(function(b){T?s(h==="return"?"return":"next",b):l(v.done?"return":"normal",b)},function(b){s("throw",b)})}catch(b){l("throw",b)}}function l(h,m){switch(h){case"return":r.resolve({value:m,done:!0});break;case"throw":r.reject(m);break;default:r.resolve({value:m,done:!1})}(r=r.next)?s(r.key,r.arg):o=null}this._invoke=function(h,m){return new bC(function(v,S){var T={key:h,arg:m,resolve:v,reject:S,next:null};o?o=o.next=T:(r=o=T,s(h,m))})},typeof n.return!="function"&&(this.return=void 0)}function Ma(n){return function(){return new Ip(n.apply(this,arguments))}}function Bt(n){return new sL(n)}Ip.prototype[typeof oL=="function"&&Yq||"@@asyncIterator"]=function(){return this},Ip.prototype.next=function(n){return this._invoke("next",n)},Ip.prototype.throw=function(n){return this._invoke("throw",n)},Ip.prototype.return=function(n){return this._invoke("return",n)};var qq=Sp.f("iterator");function k0(n,r){var o={},s=!1;function l(h,m){return s=!0,m=new bC(function(v){v(n[h](m))}),{done:!1,value:r(m)}}return o[oL!==void 0&&qq||"@@iterator"]=function(){return this},o.next=function(h){return s?(s=!1,h):l("next",h)},typeof n.throw=="function"&&(o.throw=function(h){if(s)throw s=!1,h;return l("throw",h)}),typeof n.return=="function"&&(o.return=function(h){return s?(s=!1,h):l("return",h)}),o}var cL=aL,Ir={exports:{}};function lL(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function uL(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?lL(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):lL(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function BC(n,r,o,s,l,h,m){let v=[],S=[],T=[],b=[],I=!1,L=!1;if(Ir.exports.parse(n).mediaDescriptions.forEach(V=>{m&&m!==V.attributes.direction||(V.media.mediaType!=="video"||I||(S=V.attributes.payloads,b=V.attributes.extmaps,I=!0),V.media.mediaType!=="audio"||L||(v=V.attributes.payloads,T=V.attributes.extmaps,L=!0))}),!b||S.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!T||v.length===0)throw new Error("Cannot get audio capabilities from SDP.");return S.forEach(V=>{var K;(K=V.rtpMap)!==null&&K!==void 0&&K.clockRate&&(V.rtpMap.clockRate=parseInt(V.rtpMap.clockRate))}),v.forEach(V=>{var K;(K=V.rtpMap)!==null&&K!==void 0&&K.clockRate&&(V.rtpMap.clockRate=parseInt(V.rtpMap.clockRate))}),r&&(v=v.filter(V=>{var K;return((K=V.rtpMap)===null||K===void 0?void 0:K.encodingName.toLowerCase())!=="rtx"}),S=S.filter(V=>{var K;return((K=V.rtpMap)===null||K===void 0?void 0:K.encodingName.toLowerCase())!=="rtx"})),o&&(S=S.filter(V=>{var K;return!/(red)|(ulpfec)|(flexfec)/i.test(((K=V.rtpMap)===null||K===void 0?void 0:K.encodingName)||"")})),s&&(v=v.filter(V=>{var K;return!/(red)|(ulpfec)|(flexfec)/i.test(((K=V.rtpMap)===null||K===void 0?void 0:K.encodingName)||"")})),l&&(l==null?void 0:l.length)>0&&(v=v.filter(V=>{var K;return l.includes(((K=V.rtpMap)===null||K===void 0?void 0:K.encodingName.toLowerCase())||"")})),h&&(h==null?void 0:h.length)>0&&(S=S.filter(V=>{var K;return h.includes(((K=V.rtpMap)===null||K===void 0?void 0:K.encodingName.toLowerCase())||"")})),{audioCodecs:v,videoCodecs:S,audioExtensions:T,videoExtensions:b}}function pu(n){const r=Ir.exports.parse(n);let o,s;for(const l of r.mediaDescriptions){if(!o){const h=l.attributes.iceUfrag,m=l.attributes.icePwd;if(!h||!m)throw new Error("Cannot get iceUfrag or icePwd from SDP.");o={iceUfrag:h,icePwd:m}}if(!s){const h=l.attributes.fingerprints;h.length>0&&(s={fingerprints:h})}}if(!s&&r.attributes.fingerprints.length>0&&(s={fingerprints:r.attributes.fingerprints}),!s||!o)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:o,dtlsParameters:s}}function dL(n,r){const o=[],s=n.attributes.ssrcGroups.filter(m=>m.semantic==="FID"),l=n.attributes.ssrcGroups.find(m=>m.semantic==="SIM"),h=n.attributes.ssrcs;if(l)l.ssrcIds.forEach(m=>{var v;const S=(v=s.find(T=>T.ssrcIds[0]===m))===null||v===void 0?void 0:v.ssrcIds[1];o.push({ssrcId:m,rtx:r?S:void 0})});else if(s.length>0){const m=s[0].ssrcIds[0],v=s[0].ssrcIds[1];o.push({ssrcId:m,rtx:r?v:void 0})}else{if(h.length===0)throw new Error("No ssrcs found on local media description.");o.push({ssrcId:h[0].ssrcId})}return o}function hL(n,r){const{cname:o}=n;let s;r&&r.ip&&typeof r.port=="number"?(s=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:r.ip,port:r.port.toString(),type:"host",extension:{}}],U.debug("Using remote candidate from AP ".concat(r.ip,":").concat(r.port)),r.ip6&&(s.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:r.ip6,port:r.port.toString(),type:"host",extension:{}}),U.debug("Using IPV6 remote candidate from AP ".concat(r.ip6,":").concat(r.port)))):s=n.iceParameters.candidates.map(v=>({foundation:v.foundation,componentId:"1",transport:v.protocol,priority:v.priority.toString(),connectionAddress:v.ip,port:v.port.toString(),type:v.type,extension:{}}));const l={fingerprints:n.dtlsParameters.fingerprints.map(v=>({hashFunction:v.algorithm,fingerprint:v.fingerprint}))},h={iceUfrag:n.iceParameters.iceUfrag,icePwd:n.iceParameters.icePwd};let m;switch(n.dtlsParameters.role){case"server":m="passive";break;case"client":m="active";break;case"auto":m="actpass"}return{dtlsParameters:l,iceParameters:h,candidates:s,rtpCapabilities:HC(n.rtpCapabilities),setup:m,cname:o}}function pa(n,r,o){const s=[],l=[];return n.forEach(h=>{let{ssrcId:m,rtx:v}=h;const S=jn(8,"track-"),T={ssrcId:m,attributes:uL({label:S,mslabel:o=o||jn(10,""),msid:"".concat(o," ").concat(S)},r&&{cname:r})};if(s.push(T),v!==void 0){const b={ssrcId:v,attributes:uL({label:S,mslabel:o,msid:"".concat(o," ").concat(S)},r&&{cname:r})};s.push(b),l.push({semantic:"FID",ssrcIds:[m,v]})}}),n.length>1&&l.push({semantic:"SIM",ssrcIds:n.map(h=>{let{ssrcId:m}=h;return m})}),{ssrcs:s,ssrcGroups:l}}function wd(n,r){r instanceof vi&&n.attributes.payloads.forEach(o=>{var s;const l=(s=o.rtpMap)===null||s===void 0?void 0:s.encodingName.toLowerCase();if(!l||["opus","pcmu","pcma","g722"].indexOf(l)===-1)return;o.fmtp||(o.fmtp={parameters:{}}),o.fmtp.parameters.minptime="10",o.fmtp.parameters.useinbandfec="1";const h=r._encoderConfig;h&&l!=="pcmu"&&l!=="pcma"&&l!=="g722"&&(h.bitrate&&!Qn()&&(o.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*h.bitrate))),h.sampleRate&&(o.fmtp.parameters.maxplaybackrate="".concat(h.sampleRate),o.fmtp.parameters["sprop-maxcapturerate"]="".concat(h.sampleRate)),h.stereo&&(o.fmtp.parameters.stereo="1",o.fmtp.parameters["sprop-stereo"]="1"))})}function jC(n){const r=n.attributes.unrecognized.findIndex(o=>o.attField==="x-google-flag"&&o.attValue==="conference");r!==-1&&n.attributes.unrecognized.splice(r,1)}function $C(n,r){if(!(r instanceof Rr&&r._encoderConfig&&r._hints.indexOf(Lr.SCREEN_TRACK)===-1))return;const o=r._encoderConfig;gr().supportMinBitrate&&o.bitrateMin&&n.attributes.payloads.forEach(s=>{var l;["h264","h265","vp8","vp9","av1"].includes(((l=s.rtpMap)===null||l===void 0?void 0:l.encodingName.toLowerCase())||"")&&(s.fmtp||(s.fmtp={parameters:{}}),s.fmtp.parameters["x-google-min-bitrate"]="".concat(o.bitrateMin))}),gr().supportMinBitrate&&!r._hints.includes(Lr.LOW_STREAM)&&o.bitrateMax&&n.attributes.payloads.forEach(s=>{var l;["h264","h265","vp8","vp9","av1"].includes(((l=s.rtpMap)===null||l===void 0?void 0:l.encodingName.toLowerCase())||"")&&(s.fmtp||(s.fmtp={parameters:{}}),s.fmtp.parameters["x-google-start-bitrate"]="".concat(re("X_GOOGLE_START_BITRATE")||Math.floor(o.bitrateMax)))})}function pL(n){if(n.media.mediaType!=="video")return;const r=an();if(r.name!==pn.SAFARI&&r.os!==di.IOS)return;const o=n.attributes.extmaps.findIndex(s=>/video-orientation/g.test(s.extensionName));o!==-1&&n.attributes.extmaps.splice(o,1)}function L0(n,r,o){if(!r)return;let s,l;if(n.media.mediaType==="video"?(s=o.videoExtensions,l=o.videoCodecs):(s=o.audioExtensions,l=o.audioCodecs),r.twcc===!0){const h=s.find(m=>m.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");h&&(n.attributes.extmaps.find(m=>m.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")||n.attributes.extmaps.push({entry:h.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(m,v){return v.filter(S=>!!m.find(T=>T.payloadType===S.payloadType&&!!T.rtcpFeedbacks.find(b=>b.type==="transport-cc")))}(l,n.attributes.payloads).forEach(m=>{m.rtcpFeedbacks.find(v=>v.type==="transport-cc")||m.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(r.twcc===!1){const h=n.attributes.extmaps.findIndex(m=>m.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");h!==-1&&n.attributes.extmaps.splice(h,1),n.attributes.payloads.forEach(m=>{const v=m.rtcpFeedbacks.findIndex(S=>S.type==="transport-cc");v!==-1&&m.rtcpFeedbacks.splice(v,1)})}if(r.remb===!0){const h=s.find(m=>m.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");h&&(n.attributes.extmaps.find(m=>m.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time")||n.attributes.extmaps.push({entry:h.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(m,v){return v.filter(S=>!!m.find(T=>T.payloadType===S.payloadType&&!!T.rtcpFeedbacks.find(b=>b.type==="goog-remb")))}(l,n.attributes.payloads).forEach(m=>{m.rtcpFeedbacks.find(v=>v.type==="goog-remb")||m.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(r.remb===!1){const h=n.attributes.extmaps.findIndex(m=>m.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");h!==-1&&n.attributes.extmaps.splice(h,1),n.attributes.payloads.forEach(m=>{const v=m.rtcpFeedbacks.findIndex(S=>S.type==="goog-remb");v!==-1&&m.rtcpFeedbacks.splice(v,1)})}}function fL(n,r,o){if(Qn()||n.media.mediaType!=="video"||!(r instanceof Rr)||o!=="vp9"&&o!=="vp8"||o==="vp8"&&!re("SIMULCAST")||r._scalabiltyMode===void 0||r._scalabiltyMode.numSpatialLayers<=1)return;const s=o==="vp8"?2:r._scalabiltyMode.numSpatialLayers,l=n.attributes.ssrcs[0],h=n.attributes.ssrcGroups.find(v=>v.semantic==="FID"&&v.ssrcIds[0]===l.ssrcId),m={semantic:"SIM",ssrcIds:[l.ssrcId]};for(let v=1;v<s;v++)n.attributes.ssrcs.push({ssrcId:l.ssrcId+v,attributes:Tr(l.attributes)}),m.ssrcIds.push(l.ssrcId+v),h&&(n.attributes.ssrcs.push({ssrcId:h.ssrcIds[1]+v,attributes:Tr(l.attributes)}),n.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[l.ssrcId+v,h.ssrcIds[1]+v]}));n.attributes.ssrcGroups.unshift(m)}async function mL(n,r,o,s,l){const h=new RTCPeerConnection;h.addTransceiver("video",{direction:"sendonly"}),h.addTransceiver("audio",{direction:"sendonly"}),h.addTransceiver("video",{direction:"recvonly"}),h.addTransceiver("audio",{direction:"recvonly"});const m=(await h.createOffer()).sdp,v=BC(m,n,r,o,s,l,"sendonly"),S=BC(m,n,r,o,s,l,"recvonly"),T={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},b={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},I={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(M0(v,S,"videoExtensions",T,b,I),M0(v,S,"videoCodecs",T,b,I),M0(v,S,"audioExtensions",T,b,I),M0(v,S,"audioCodecs",T,b,I),re("RAISE_H264_BASELINE_PRIORITY")){const L=I.videoCodecs.findIndex(V=>{var K,Y;return((K=V.rtpMap)===null||K===void 0?void 0:K.encodingName.toLocaleLowerCase())==="h264"&&((Y=V.fmtp)===null||Y===void 0?void 0:Y.parameters["profile-level-id"])==="42001f"});if(L!==-1){const V=I.videoCodecs.findIndex(K=>{var Y;return((Y=K.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLocaleLowerCase())==="h264"});if(V<L){U.debug("raising H264 baseline profile priority");const K=I.videoCodecs[L];I.videoCodecs.splice(L,1),I.videoCodecs.splice(V,0,K)}V!==-1&&(b.videoCodecs=b.videoCodecs.filter(K=>{var Y,q;return!(((Y=K.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLocaleLowerCase())==="h264"&&((q=K.fmtp)===null||q===void 0?void 0:q.parameters["profile-level-id"])!=="42001f")})),V!==-1&&re("FILTER_SEND_H264_BASELINE")&&(T.videoCodecs=T.videoCodecs.filter(K=>{var Y,q;return!(((Y=K.rtpMap)===null||Y===void 0?void 0:Y.encodingName.toLocaleLowerCase())==="h264"&&((q=K.fmtp)===null||q===void 0?void 0:q.parameters["profile-level-id"])!=="42001f")}))}}try{h.close()}catch{}return{send:T,recv:b,sendrecv:I}}function M0(n,r,o,s,l,h){if(o==="videoExtensions"||o==="audioExtensions"){const m=[];return n[o].forEach(v=>{r[o].some((S,T)=>{if(v.entry===S.entry&&v.extensionName===S.extensionName)return m.push(T),!0})?h[o].push(v):s[o].push(v)}),void r[o].forEach((v,S)=>{m.indexOf(S)===-1&&l[o].push(v)})}if(o==="videoCodecs"||o==="audioCodecs"){const m=[];return n[o].forEach(v=>{r[o].some((S,T)=>{if(v.payloadType===S.payloadType&&JSON.stringify(v)===JSON.stringify(S))return m.push(T),!0})?h[o].push(v):s[o].push(v)}),void r[o].forEach((v,S)=>{m.indexOf(S)===-1&&l[o].push(v)})}}function HC(n){const{send:r,recv:o,sendrecv:s}=n;if(!s){if(!r||!o)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:r,recv:o}}let l,h;return r?(l={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},l.audioCodecs=[...r.audioCodecs,...s.audioCodecs],l.videoCodecs=[...r.videoCodecs,...s.videoCodecs],l.audioExtensions=[...r.audioExtensions,...s.audioExtensions],l.videoExtensions=[...r.videoExtensions,...s.videoExtensions]):l=s,o?(h={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},h.audioCodecs=[...o.audioCodecs,...s.audioCodecs],h.videoCodecs=[...o.videoCodecs,...s.videoCodecs],h.audioExtensions=[...o.audioExtensions,...s.audioExtensions],h.videoExtensions=[...o.videoExtensions,...s.videoExtensions]):h=s,{send:l,recv:h}}function nl(n){n.media.mediaType==="audio"&&n.attributes.payloads.filter(r=>{var o;return((o=r.rtpMap)===null||o===void 0?void 0:o.encodingName.toLowerCase())==="opus"}).forEach(r=>{r.fmtp||(r.fmtp={parameters:{}}),r.fmtp.parameters.stereo="1",r.fmtp.parameters["sprop-stereo"]="1"})}function gL(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function vL(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?gL(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):gL(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}(function(n,r){n.exports=(()=>{var o={8:(h,m,v)=>{v.r(m),v.d(m,{Parser:()=>Un,Printer:()=>lo,parse:()=>pt,print:()=>Jt});const S=`
`,T="".concat("\r").concat(S),b=" ";let I;function L(Re){return Re>="0"&&Re<="9"}function V(Re){return Re>="!"&&Re<="~"}function K(Re){return V(Re)||Re>="Â"&&Re<="Ã¿"}function Y(Re){return Re==="!"||Re>="#"&&Re<="'"||Re>="*"&&Re<="+"||Re>="-"&&Re<="."||Re>="0"&&Re<="9"||Re>="A"&&Re<="Z"||Re>="^"&&Re<="~"}function q(Re){return Re>="1"&&Re<="9"}function ue(Re){return Re>="A"&&Re<="Z"||Re>="a"&&Re<="z"}function me(Re){return Re==="d"||Re==="h"||Re==="m"||Re==="s"}function ye(Re){return Re>""&&Re<"	"||Re>"\v"&&Re<"\f"||Re>""&&Re<"Ã¿"}function qe(Re){return ue(Re)||L(Re)||Re==="+"||Re==="/"}function Te(Re){return L(Re)||ue(Re)||Re==="+"||Re==="/"||Re==="-"||Re==="_"}function xe(Re){return ue(Re)||L(Re)||Re==="+"||Re==="/"}function Ce(Re,D){var G=Object.keys(Re);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(Re);D&&(te=te.filter(function(Ee){return Object.getOwnPropertyDescriptor(Re,Ee).enumerable})),G.push.apply(G,te)}return G}function Fe(Re){for(var D=1;D<arguments.length;D++){var G=arguments[D]!=null?arguments[D]:{};D%2?Ce(Object(G),!0).forEach(function(te){fn(Re,te,G[te])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Re,Object.getOwnPropertyDescriptors(G)):Ce(Object(G)).forEach(function(te){Object.defineProperty(Re,te,Object.getOwnPropertyDescriptor(G,te))})}return Re}function fn(Re,D,G){return D in Re?Object.defineProperty(Re,D,{value:G,enumerable:!0,configurable:!0,writable:!0}):Re[D]=G,Re}(function(Re){Re.VERSION="v",Re.ORIGIN="o",Re.SESSION_NAME="s",Re.INFORMATION="i",Re.URI="u",Re.EMAIL="e",Re.PHONE="p",Re.CONNECTION="c",Re.BANDWIDTH="b",Re.TIME="t",Re.REPEAT="r",Re.ZONE_ADJUSTMENTS="z",Re.KEY="k",Re.ATTRIBUTE="a",Re.MEDIA="m"})(I||(I={}));class bt{consumeText(D,G){let te=G;for(;te<D.length;){const Ee=D[te];if(Ee==="\0"||Ee==="\r"||Ee===S)break;te+=1}if(te-G==0)throw new Error("Invalid text, at ".concat(D));return te}consumeUnicastAddress(D,G,te){return this.consumeTill(D,G,b)}consumeOneOrMore(D,G,te){let Ee=G;for(;te(D[Ee]);)Ee++;if(Ee-G==0)throw new Error("Invalid rule at ".concat(G,"."));return Ee}consumeSpace(D,G){if(D[G]===b)return G+1;throw new Error("Invalid space at ".concat(G,"."))}consumeIP4Address(D,G){let te=G;for(let Ee=0;Ee<4;Ee++)if(te=this.consumeDecimalUChar(D,te),Ee!==3){if(D[te]!==".")throw new Error("Invalid IP4 address.");te++}return te}consumeDecimalUChar(D,G){let te=G;for(let St=0;St<3&&L(D[te]);St++,te++);if(te-G==0)throw new Error("Invalid decimal uchar.");const Ee=parseInt(D.slice(G,te));if(Ee>=0&&Ee<=255)return te;throw new Error("Invalid decimal uchar")}consumeIP6Address(D,G){let te=this.consumeHexpart(D,G);return D[te]===":"&&(te+=1,te=this.consumeIP4Address(D,te)),te}consumeHexpart(D,G){let te=G;if(D[te]===":"&&D[te+1]===":"){te+=2;try{te=this.consumeHexseq(D,te)}catch{}return te}if(te=this.consumeHexseq(D,te),D[te]===":"&&D[te+1]===":"){te+=2;try{te=this.consumeHexseq(D,te)}catch{}return te}return te}consumeHexseq(D,G){let te=G;for(;te=this.consumeHex4(D,te),D[te]===":"&&D[te+1]!==":";)te+=1;return te}consumeHex4(D,G){let te=0;for(;te<4;te++)if(!((Ee=D[G+te])>="0"&&Ee<="9"||Ee>="a"&&Ee<="f"||Ee>="A"&&Ee<="F")){if(te===0)throw new Error("Invalid hex 4");break}var Ee;return G+te}consumeFQDN(D,G){let te=G;for(;L(D[te])||ue(D[te])||D[te]==="-"||D[te]===".";)te+=1;if(te-G<4)throw new Error("Invalid FQDN");return te}consumeExtnAddr(D,G){return this.consumeOneOrMore(D,G,K)}consumeMulticastAddress(D,G,te){switch(te){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(D,G);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(D,G);default:try{return this.consumeFQDN(D,G)}catch{return this.consumeExtnAddr(D,G)}}}consumeIP6MulticastAddress(D,G){const te=this.consumeHexpart(D,G);return D[te]==="/"?this.consumeInteger(D,te+1):te}consumeIP4MulticastAddress(D,G){let te=G+3;const Ee=D.slice(G,te),St=parseInt(Ee);if(St<224||St>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let On=0;On<3;On++){if(D[te]!==".")throw new Error("Invalid IP4 multicast address.");te+=1,te=this.consumeDecimalUChar(D,te)}return D[te]==="/"&&(te+=1),te=this.consumeTTL(D,te),D[te]==="/"&&(te=this.consumeInteger(D,te)),te}consumeInteger(D,G){if(!q(D[G]))throw new Error("Invalid integer.");for(G+=1;L(D[G]);)G+=1;return G}consumeTTL(D,G){if(D[G]==="0")return G+1;if(!q(D[G]))throw new Error("Invalid TTL.");G+=1;for(let te=0;te<2&&L(D[G]);te++)G+=1;return G}consumeToken(D,G){return this.consumeOneOrMore(D,G,Y)}consumeTime(D,G){let te=G;if(D[te]==="0")return te+1;for(q(D[te])&&(te+=1);L(D[te]);)te++;if(te-G<10)throw new Error("Invalid time");return te}consumeAddress(D,G){return this.consumeTill(D,G,b)}consumeTypedTime(D,G){let te=G;return te=this.consumeOneOrMore(D,te,L),me(D[te])?te+1:te}consumeRepeatInterval(D,G){if(!q(D[G]))throw new Error("Invalid repeat interval");for(G+=1;L(D[G]);)G+=1;return me(D[G])&&(G+=1),G}consumePort(D,G){return this.consumeOneOrMore(D,G,L)}consume(D,G,te){for(let Ee=0;Ee<te.length;Ee++){if(G+Ee>=D.length)throw new Error("consume exceeding value length");if(D[G+Ee]!==te[Ee])throw new Error("consume ".concat(te," failed at ").concat(Ee))}return G+te.length}consumeTill(D,G,te){let Ee=G;for(;Ee<D.length&&(typeof te!="string"||D[Ee]!==te)&&(typeof te!="function"||!te(D[Ee]));)Ee++;return Ee}}class Un extends bt{constructor(){super(),fn(this,"records",[]),fn(this,"currentLine",0)}parse(D){const G=this.probeEOL(D);this.records=D.split(G).filter(Gi=>!!Gi.trim()).map(this.parseLine),this.currentLine=0;const te=this.parseVersion(),Ee=this.parseOrigin(),St=this.parseSessionName(),On=this.parseInformation(),ai=this.parseUri(),Fa=this.parseEmail(),sl=this.parsePhone(),va=this.parseConnection(),cl=this.parseBandWidth(),xd=this.parseTimeFields(),rr=this.parseKey(),wr=this.parseSessionAttribute(),Tn=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:te,origin:Ee,sessionName:St,information:On,uri:ai,emails:Fa,phones:sl,connection:va,bandwidths:cl,timeFields:xd,key:rr,attributes:wr,mediaDescriptions:Tn}}getCurrentRecord(){const D=this.records[this.currentLine];if(!D)throw new Error("Record doesn't exit.");return D}probeEOL(D){for(let G=0;G<D.length;G++)if(D[G]===S)return D[G-1]==="\r"?T:S;throw new Error("Invalid newline character.")}parseLine(D,G){if(D.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const te=D[0];if(D[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:te,value:D.slice(2),line:G,cur:0}}parseSessionAttribute(){const D=new vr;for(;this.currentLine<this.records.length;){const G=this.getCurrentRecord();if(G.type!==I.ATTRIBUTE)break;const te={attField:this.extractOneOrMore(G,Ee=>Y(Ee)&&Ee!==":"),_cur:0};G.value[G.cur]===":"&&(G.cur+=1,te.attValue=this.extractOneOrMore(G,ye)),D.parse(te),this.currentLine++}return D.digest()}parseMediaAttributes(D){const G=new oi(D);for(;this.currentLine<this.records.length;){const te=this.getCurrentRecord();if(te.type!==I.ATTRIBUTE)break;const Ee={attField:this.extractOneOrMore(te,St=>Y(St)&&St!==":"),_cur:0};te.value[te.cur]===":"&&(te.cur+=1,Ee.attValue=this.extractOneOrMore(te,ye)),G.parse(Ee),this.currentLine++}return G.digest()}parseKey(){const D=this.getCurrentRecord();if(D.type===I.KEY){if(D.value==="prompt"||D.value==="clear:"||D.value==="base64:"||D.value==="uri:")return D.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const D=this.getCurrentRecord();if(D.type===I.ZONE_ADJUSTMENTS){const G=[];for(;;)try{const te=this.extract(D,this.consumeTime);this.consumeSpaceForRecord(D);let Ee=!1;D.value[D.cur]==="-"&&(Ee=!0,D.cur+=1);const St=this.extract(D,this.consumeTypedTime);G.push({time:te,typedTime:St,back:Ee})}catch{break}if(G.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,G}return[]}parseRepeat(){const D=[];for(;;){const G=this.getCurrentRecord();if(G.type!==I.REPEAT)break;{const te=this.extract(G,this.consumeRepeatInterval),Ee=this.parseTypedTime(G);D.push({repeatInterval:te,typedTimes:Ee}),this.currentLine++}}return D}parseTypedTime(D){const G=[];for(;;)try{this.consumeSpaceForRecord(D),G.push(this.extract(D,this.consumeTypedTime))}catch{break}if(G.length===0)throw new Error("Invalid typed time.");return G}parseTime(){const D=this.getCurrentRecord(),G=this.extract(D,this.consumeTime);this.consumeSpaceForRecord(D);const te=this.extract(D,this.consumeTime);return this.currentLine++,{startTime:G,stopTime:te}}parseBandWidth(){const D=[];for(;this.currentLine<this.records.length;){const G=this.getCurrentRecord();if(G.type!==I.BANDWIDTH)break;{const te=this.extractOneOrMore(G,Y);if(G.value[G.cur]!==":")throw new Error("Invalid bandwidth field.");G.cur++;const Ee=this.extractOneOrMore(G,L);D.push({bwtype:te,bandwidth:Ee}),this.currentLine++}}return D}parseVersion(){const D=this.getCurrentRecord();if(D.type!==I.VERSION)throw new Error("first sdp record must be version");const G=D.value.slice(0,this.consumeOneOrMore(D.value,0,L));if(G.length!==D.value.length)throw new Error('invalid proto version, "v='.concat(D.value,'"'));return this.currentLine++,G}parseOrigin(){const D=this.getCurrentRecord();if(D.type!==I.ORIGIN)throw new Error("second line of sdp must be origin");const G=this.extractOneOrMore(D,K);this.consumeSpaceForRecord(D);const te=this.extractOneOrMore(D,L);this.consumeSpaceForRecord(D);const Ee=this.extractOneOrMore(D,L);this.consumeSpaceForRecord(D);const St=this.extractOneOrMore(D,Y);this.consumeSpaceForRecord(D);const On=this.extractOneOrMore(D,Y);this.consumeSpaceForRecord(D);const ai=this.extract(D,this.consumeUnicastAddress);return this.currentLine++,{username:G,sessId:te,sessVersion:Ee,nettype:St,addrtype:On,unicastAddress:ai}}parseSessionName(){const D=this.getCurrentRecord();if(D.type===I.SESSION_NAME){const G=this.extract(D,this.consumeText);return this.currentLine++,G}}parseInformation(){const D=this.getCurrentRecord();if(D.type!==I.INFORMATION)return;const G=this.extract(D,this.consumeText);return this.currentLine++,G}parseUri(){const D=this.getCurrentRecord();if(D.type===I.URI)return this.currentLine++,D.value}parseEmail(){const D=[];for(;;){const G=this.getCurrentRecord();if(G.type!==I.EMAIL)break;D.push(G.value),this.currentLine++}return D}parsePhone(){const D=[];for(;;){const G=this.getCurrentRecord();if(G.type!==I.PHONE)break;D.push(G.value),this.currentLine++}return D}parseConnection(){const D=this.getCurrentRecord();if(D.type===I.CONNECTION){const G=this.extractOneOrMore(D,Y);this.consumeSpaceForRecord(D);const te=this.extractOneOrMore(D,Y);this.consumeSpaceForRecord(D);const Ee=this.extract(D,this.consumeAddress);return this.currentLine++,{nettype:G,addrtype:te,address:Ee}}}parseMedia(){const D=this.getCurrentRecord(),G=this.extract(D,this.consumeToken);this.consumeSpaceForRecord(D);let te=this.extract(D,this.consumePort);D.value[D.cur]==="/"&&(D.cur+=1,te+=this.extract(D,this.consumeInteger)),this.consumeSpaceForRecord(D);const Ee=[];for(Ee.push(this.extract(D,this.consumeToken));D.value[D.cur]==="/";)D.cur+=1,Ee.push(this.extract(D,this.consumeToken));if(Ee.length===0)throw new Error("Invalid proto");const St=this.parseFmt(D);return this.currentLine++,{mediaType:G,port:te,protos:Ee,fmts:St}}parseTimeFields(){const D=[];for(;this.getCurrentRecord().type===I.TIME;){const G=this.parseTime(),te=this.parseRepeat(),Ee=this.parseZone();D.push({time:G,repeats:te,zones:Ee})}return D}parseMediaDescription(){const D=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===I.MEDIA;){const G=this.parseMedia(),te=this.parseInformation(),Ee=this.parseConnections(),St=this.parseBandWidth(),On=this.parseKey(),ai=this.parseMediaAttributes(G);D.push({media:G,information:te,connections:Ee,bandwidths:St,key:On,attributes:ai})}return D}parseConnections(){const D=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===I.CONNECTION;)D.push(this.parseConnection());return D}parseFmt(D){const G=[];for(;;)try{this.consumeSpaceForRecord(D),G.push(this.extract(D,this.consumeToken))}catch{break}if(G.length===0)throw new Error("Invalid fmts");return G}extract(D,G,...te){const Ee=G.call(this,D.value,D.cur,...te),St=D.value.slice(D.cur,Ee);return D.cur=Ee,St}extractOneOrMore(D,G){const te=this.consumeOneOrMore(D.value,D.cur,G),Ee=D.value.slice(D.cur,te);return D.cur=te,Ee}consumeSpaceForRecord(D){if(D.value[D.cur]!==b)throw new Error("Invalid space at ".concat(D.cur,"."));D.cur+=1}}class bn extends bt{constructor(...D){super(...D),fn(this,"attributes",void 0),fn(this,"digested",!1)}extractOneOrMore(D,G,te){const Ee=this.consumeOneOrMore(D.attValue,D._cur,G),St=D.attValue.slice(D._cur,Ee),[On,ai]=te||[];if(typeof On=="number"&&St.length<On)throw new Error("error in length, should be more or equal than ".concat(On," characters."));if(typeof ai=="number"&&St.length>ai)throw new Error("error in length, should be less or equal than ".concat(ai," characters."));return D._cur=Ee,St}consumeAttributeSpace(D){if(D.attValue[D._cur]!==b)throw new Error("Invalid space at ".concat(D._cur,"."));D._cur+=1}extract(D,G,...te){if(!D.attValue)throw new Error("Nothing to extract from attValue.");const Ee=G.call(this,D.attValue,D._cur,...te),St=D.attValue.slice(D._cur,Ee);return D._cur=Ee,St}atEnd(D){if(!D.attValue)throw new Error;return D._cur>=D.attValue.length}peekChar(D){if(!D.attValue)throw new Error;return D.attValue[D._cur]}peek(D,G){if(!D.attValue)throw new Error;for(let te=0;te<G.length;te++)if(G[te]!==D.attValue[D._cur+te])return!1;return!0}parseIceUfrag(D){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(D,qe,[4,256])}parseIcePwd(D){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(D,qe,[22,256])}parseIceOptions(D){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const G=[];for(;!this.atEnd(D);){G.push(this.extractOneOrMore(D,qe));try{this.consumeAttributeSpace(D)}catch(te){if(this.atEnd(D))break;throw te}}this.attributes.iceOptions=G}parseFingerprint(D){const G=this.extract(D,this.consumeToken);this.consumeAttributeSpace(D);const te=this.extract(D,this.consumeTill);this.attributes.fingerprints.push({hashFunction:G,fingerprint:te})}parseExtmap(D){const G=this.extractOneOrMore(D,L);let te;this.peekChar(D)==="/"&&(this.extract(D,this.consume,"/"),te=this.extract(D,this.consumeToken)),this.consumeAttributeSpace(D);const Ee=this.extract(D,this.consumeTill,b),St=Fe(Fe({entry:parseInt(G,10)},te&&{direction:te}),{},{extensionName:Ee});this.peekChar(D)===b&&(this.consumeAttributeSpace(D),St.extensionAttributes=this.extract(D,this.consumeTill)),this.attributes.extmaps.push(St)}parseSetup(D){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const G=this.extract(D,this.consumeTill);if(G!=="active"&&G!=="passive"&&G!=="actpass"&&G!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=G}}class vr extends bn{constructor(...D){super(...D),fn(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(D){if(this.digested)throw new Error("already digested");try{switch(D.attField){case"group":this.parseGroup(D);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(D);break;case"ice-pwd":this.parseIcePwd(D);break;case"ice-options":this.parseIceOptions(D);break;case"fingerprint":this.parseFingerprint(D);break;case"setup":this.parseSetup(D);break;case"tls-id":this.parseTlsId(D);break;case"identity":this.parseIdentity(D);break;case"extmap":this.parseExtmap(D);break;case"msid-semantic":this.parseMsidSemantic(D);break;default:D.ignored=!0,this.attributes.unrecognized.push(D)}}catch(G){throw console.error("parsing session attribute ".concat(D.attField,' error, "a=').concat(D.attField,":").concat(D.attValue,'"')),G}if(!D.ignored&&D.attValue&&!this.atEnd(D))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(D){const G=this.extract(D,this.consumeToken),te=[];for(;!this.atEnd(D)&&this.peekChar(D)===b;)this.consumeAttributeSpace(D),te.push(this.extract(D,this.consumeToken));this.attributes.groups.push({semantic:G,identificationTag:te})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(D){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(D,Te)}parseIdentity(D){const G=this.extractOneOrMore(D,xe),te=[];for(;!this.atEnd(D)&&this.peekChar(D)===b;){this.consumeAttributeSpace(D);const Ee=this.extract(D,this.consumeToken);this.extract(D,this.consume,"=");const St=this.extractOneOrMore(D,On=>On!==b&&ye(On));te.push({name:Ee,value:St})}this.attributes.identities.push({assertionValue:G,extensions:te})}parseMsidSemantic(D){this.peekChar(D)===b&&this.consumeAttributeSpace(D);const G={semantic:this.extract(D,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(D)}catch{break}if(this.peekChar(D)==="*"){this.extract(D,this.consume,"*"),G.applyForAll=!0;break}{const te=this.extract(D,this.consumeTill,b);G.identifierList.push(te)}}this.attributes.msidSemantic=G}}class oi extends bn{constructor(D){super(),fn(this,"attributes",void 0),D.protos.indexOf("RTP")!==-1||D.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(D){if(this.digested)throw new Error("already digested");try{switch(D.attField){case"extmap":this.parseExtmap(D);break;case"setup":this.parseSetup(D);break;case"ice-ufrag":this.parseIceUfrag(D);break;case"ice-pwd":this.parseIcePwd(D);break;case"ice-options":this.parseIceOptions(D);break;case"candidate":this.parseCandidate(D);break;case"remote-candidate":this.parseRemoteCandidate(D);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(D);break;case"rtpmap":this.parseRtpmap(D);break;case"ptime":this.parsePtime(D);break;case"maxptime":this.parseMaxPtime(D);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(D);break;case"ssrc":this.parseSSRC(D);break;case"fmtp":this.parseFmtp(D);break;case"rtcp-fb":this.parseRtcpFb(D);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(D);break;case"mid":this.parseMid(D);break;case"msid":this.parseMsid(D);break;case"imageattr":this.parseImageAttr(D);break;case"rid":this.parseRid(D);break;case"simulcast":this.parseSimulcast(D);break;case"sctp-port":this.parseSctpPort(D);break;case"max-message-size":this.parseMaxMessageSize(D);break;case"ssrc-group":this.parseSSRCGroup(D);break;default:D.ignored=!0,this.attributes.unrecognized.push(D)}}catch(G){throw console.error("parsing media attribute ".concat(D.attField,' error, "a=').concat(D.attField,":").concat(D.attValue,'"')),G}if(!D.ignored&&D.attValue&&!this.atEnd(D))throw new Error("attribute parsing error")}parseCandidate(D){const G=this.extractOneOrMore(D,qe,[1,32]);this.consumeAttributeSpace(D);const te=this.extractOneOrMore(D,L,[1,5]);this.consumeAttributeSpace(D);const Ee=this.extract(D,this.consumeToken);this.consumeAttributeSpace(D);const St=this.extractOneOrMore(D,L,[1,10]);this.consumeAttributeSpace(D);const On=this.extract(D,this.consumeAddress);this.consumeAttributeSpace(D);const ai=this.extract(D,this.consumePort);this.consumeAttributeSpace(D),this.extract(D,this.consume,"typ"),this.consumeAttributeSpace(D);const Fa={foundation:G,componentId:te,transport:Ee,priority:St,connectionAddress:On,port:ai,type:this.extract(D,this.consumeToken),extension:{}};for(this.peek(D," raddr")&&(this.extract(D,this.consume," raddr"),this.consumeAttributeSpace(D),Fa.relAddr=this.extract(D,this.consumeAddress)),this.peek(D," rport")&&(this.extract(D,this.consume," rport"),this.consumeAttributeSpace(D),Fa.relPort=this.extract(D,this.consumePort));this.peekChar(D)===b;){this.consumeAttributeSpace(D);const sl=this.extract(D,this.consumeToken);this.consumeAttributeSpace(D),Fa.extension[sl]=this.extractOneOrMore(D,V)}this.attributes.candidates.push(Fa)}parseRemoteCandidate(D){const G=[];for(;;){const te=this.extractOneOrMore(D,L,[1,5]);this.consumeAttributeSpace(D);const Ee=this.extract(D,this.consumeAddress);this.consumeAttributeSpace(D);const St=this.extract(D,this.consumePort);G.push({componentId:te,connectionAddress:Ee,port:St});try{this.consumeAttributeSpace(D)}catch{break}}this.attributes.remoteCandidatesList.push(G)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(D){const G=this.extract(D,this.consumeToken);this.consumeAttributeSpace(D);const te=this.extract(D,this.consumeTill,"/");this.extract(D,this.consume,"/");const Ee={encodingName:te,clockRate:this.extractOneOrMore(D,L)};this.atEnd(D)||this.peekChar(D)!=="/"||(this.extract(D,this.consume,"/"),Ee.encodingParameters=parseInt(this.extract(D,this.consumeTill),10));const St=this.attributes.payloads.find(On=>On.payloadType===parseInt(G,10));St?St.rtpMap=Ee:this.attributes.payloads.push({payloadType:parseInt(G,10),rtpMap:Ee,rtcpFeedbacks:[]})}parsePtime(D){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(D,this.consumeTill)}parseMaxPtime(D){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(D,this.consumeTill)}parseDirection(D){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=D.attField}parseSSRC(D){const G=this.extractOneOrMore(D,L);this.consumeAttributeSpace(D);const te=this.extract(D,this.consumeTill,":");let Ee;this.peekChar(D)===":"&&(this.extract(D,this.consume,":"),Ee=this.extract(D,this.consumeTill));const St=this.attributes.ssrcs.find(On=>On.ssrcId===parseInt(G,10));St?St.attributes[te]=Ee:this.attributes.ssrcs.push({ssrcId:parseInt(G,10),attributes:{[te]:Ee}})}parseFmtp(D){const G=this.extract(D,this.consumeTill,b);this.consumeAttributeSpace(D);const te=this.extract(D,this.consumeTill),Ee={};te.split(";").forEach(On=>{let[ai,Fa]=On.split("=");ai=ai.trim();const sl=typeof Fa=="string"?Fa.trim():null;typeof ai=="string"&&ai.length>0&&(Ee[ai]=sl)});const St=this.attributes.payloads.find(On=>On.payloadType===parseInt(G,10));St?St.fmtp={parameters:Ee}:this.attributes.payloads.push({payloadType:parseInt(G,10),rtcpFeedbacks:[],fmtp:{parameters:Ee}})}parseFmtParameters(D){const G={},te=this.extract(D,this.consumeTill,"=");D._cur++;const Ee=this.extract(D,this.consumeTill,";");for(G[te]=Ee;D.attValue[D._cur]===";";){const St=this.extract(D,this.consumeTill,"=");D._cur++;const On=this.extract(D,this.consumeTill,";");G[St]=On}return G}parseRtcpFb(D){let G="";G=this.peekChar(D)==="*"?this.extract(D,this.consume,"*"):this.extract(D,this.consumeTill,b),this.consumeAttributeSpace(D);const te=this.extract(D,this.consumeTill,b);let Ee;switch(te){case"trr-int":Ee={type:te,interval:this.extract(D,this.consumeTill)};break;case"ack":case"nack":default:{const St={type:te};this.peekChar(D)===b&&(this.consumeAttributeSpace(D),St.parameter=this.extract(D,this.consumeToken),this.peekChar(D)===b&&(St.additional=this.extract(D,this.consumeTill))),Ee=St}}if(G==="*")this.attributes.rtcpFeedbackWildcards.push(Ee);else{const St=this.attributes.payloads.find(On=>On.payloadType===parseInt(G,10));St?St.rtcpFeedbacks.push(Ee):this.attributes.payloads.push({payloadType:parseInt(G,10),rtcpFeedbacks:[Ee]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(D){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const G={port:this.extract(D,this.consumePort)};this.peekChar(D)===b&&(this.consumeAttributeSpace(D),G.netType=this.extractOneOrMore(D,Y),this.consumeAttributeSpace(D),G.addressType=this.extractOneOrMore(D,Y),this.consumeAttributeSpace(D),G.address=this.extract(D,this.consumeAddress)),this.attributes.rtcp=G}parseMsid(D){const G={id:this.extractOneOrMore(D,Y,[1,64])};this.peekChar(D)===b&&(this.consumeAttributeSpace(D),G.appdata=this.extractOneOrMore(D,Y,[1,64])),this.attributes.msids.push(G)}parseImageAttr(D){this.attributes.imageattr.push(D.attValue)}parseRid(D){const G=this.extractOneOrMore(D,Ee=>ue(Ee)||L(Ee)||Ee==="_"||Ee==="-");this.consumeAttributeSpace(D);const te={id:G,direction:this.extract(D,this.consumeToken),params:[]};if(this.peekChar(D)===b){if(this.consumeAttributeSpace(D),this.peek(D,"pt=")){this.extract(D,this.consume,"pt=");const Ee=[];for(;;){const St=this.extract(D,this.consumeToken);Ee.push(St);try{this.extract(D,this.consume,",")}catch{break}}te.payloads=Ee,this.peekChar(D)===b&&this.extract(D,this.consume,b)}for(;;){const Ee=this.extract(D,this.consumeToken);switch(Ee){case"depend":{const St={type:Ee,rids:this.extract(D,this.consume,"=").split(",")};te.params.push(St);break}case"max-width":case"height-width":case"max-fps":case"max-fs":case"max-br":case"max-pps":case"max-bpp":default:{const St={type:Ee};this.peekChar(D)==="="&&(this.extract(D,this.consume,"="),St.val=this.extract(D,this.consumeTill,";")),te.params.push(St)}}try{this.extract(D,this.consume,";")}catch{break}}}this.attributes.rids.push(te)}parseSimulcast(D){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=D.attValue,this.extract(D,this.consumeTill)}parseSctpPort(D){this.attributes.sctpPort=this.extractOneOrMore(D,L,[1,5])}parseMaxMessageSize(D){this.attributes.maxMessageSize=this.extractOneOrMore(D,L,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(D){this.attributes.mid=this.extract(D,this.consumeToken)}parseSSRCGroup(D){const G=this.extract(D,this.consumeToken),te=[];for(;;)try{this.consumeAttributeSpace(D);const Ee=this.extract(D,this.consumeInteger);te.push(parseInt(Ee,10))}catch{break}this.attributes.ssrcGroups.push({semantic:G,ssrcIds:te})}}function dr(Re,D,G){return D in Re?Object.defineProperty(Re,D,{value:G,enumerable:!0,configurable:!0,writable:!0}):Re[D]=G,Re}class lo{constructor(){dr(this,"eol",T)}print(D,G){let te="";return G&&(this.eol=G),te+=this.printVersion(D.version),te+=this.printOrigin(D.origin),te+=this.printSessionName(D.sessionName),te+=this.printInformation(D.information),te+=this.printUri(D.uri),te+=this.printEmail(D.emails),te+=this.printPhone(D.phones),te+=this.printConnection(D.connection),te+=this.printBandwidth(D.bandwidths),te+=this.printTimeFields(D.timeFields),te+=this.printKey(D.key),te+=this.printSessionAttributes(D.attributes),te+=this.printMediaDescription(D.mediaDescriptions),te}printVersion(D){return"v=".concat(D).concat(this.eol)}printOrigin(D){return"o=".concat(D.username," ").concat(D.sessId," ").concat(D.sessVersion," ").concat(D.nettype," ").concat(D.addrtype," ").concat(D.unicastAddress).concat(this.eol)}printSessionName(D){return D?"s=".concat(D).concat(this.eol):""}printInformation(D){return D?"i=".concat(D).concat(this.eol):""}printUri(D){return D?"u=".concat(D).concat(this.eol):""}printEmail(D){let G="";for(const te of D)G+="e=".concat(te).concat(this.eol);return G}printPhone(D){let G="";for(const te of D)G+="e=".concat(te).concat(this.eol);return G}printConnection(D){return D?"c=".concat(D.nettype," ").concat(D.addrtype," ").concat(D.address).concat(this.eol):""}printBandwidth(D){let G="";for(const te of D)G+="b=".concat(te.bwtype,":").concat(te.bandwidth).concat(this.eol);return G}printTimeFields(D){let G="";for(const te of D){G+="t=".concat(te.time.startTime," ").concat(te.time.startTime).concat(this.eol);for(const Ee of te.repeats)G+="r=".concat(Ee.repeatInterval," ").concat(Ee.typedTimes.join(" ")).concat(this.eol);te.zoneAdjustments&&(G+="z=",G+="z=".concat(te.zoneAdjustments.map(Ee=>"".concat(Ee.time," ").concat(Ee.back?"-":""," ").concat(Ee.typedTime)).join(" ")).concat(this.eol),G+=this.eol)}return G}printKey(D){return D?"k=".concat(D).concat(this.eol):""}printAttributes(D){let G="";for(const te of D)G+="a=".concat(te.attField).concat(te.attValue?":".concat(te.attValue):"").concat(this.eol);return G}printMediaDescription(D){let G="";for(const te of D)G+=this.printMedia(te.media),G+=this.printInformation(te.information),G+=this.printConnections(te.connections),G+=this.printBandwidth(te.bandwidths),G+=this.printKey(te.key),G+=this.printMediaAttributes(te);return G}printConnections(D){let G="";for(const te of D)G+=this.printConnection(te);return G}printMedia(D){return"m=".concat(D.mediaType," ").concat(D.port," ").concat(D.protos.join("/")," ").concat(D.fmts.join(" ")).concat(this.eol)}printSessionAttributes(D){return new Se(this.eol).print(D)}printMediaAttributes(D){return new Le(this.eol).print(D)}}class ve{constructor(D){dr(this,"eol",void 0),this.eol=D}printIceUfrag(D){return D===void 0?"":"a=ice-ufrag:".concat(D).concat(this.eol)}printIcePwd(D){return D===void 0?"":"a=ice-pwd:".concat(D).concat(this.eol)}printIceOptions(D){return D===void 0?"":"a=ice-options:".concat(D.join(b)).concat(this.eol)}printFingerprints(D){return D.length>0?D.map(G=>"a=fingerprint:".concat(G.hashFunction).concat(b).concat(G.fingerprint)).join(this.eol)+this.eol:""}printExtmap(D){return D.map(G=>"a=extmap:".concat(G.entry).concat(G.direction?"/".concat(G.direction):"").concat(b).concat(G.extensionName).concat(G.extensionAttributes?"".concat(b).concat(G.extensionAttributes):"").concat(this.eol)).join("")}printSetup(D){return D===void 0?"":"a=setup:".concat(D).concat(this.eol)}printUnrecognized(D){return D.map(G=>"a=".concat(G.attField).concat(G.attValue?":".concat(G.attValue):"").concat(this.eol)).join("")}}class Se extends ve{print(D){let G="";return G+=this.printGroups(D.groups),G+=this.printMsidSemantic(D.msidSemantic),G+=this.printIceLite(D.iceLite),G+=this.printIceUfrag(D.iceUfrag),G+=this.printIcePwd(D.icePwd),G+=this.printIceOptions(D.iceOptions),G+=this.printFingerprints(D.fingerprints),G+=this.printSetup(D.setup),G+=this.printTlsId(D.tlsId),G+=this.printIdentity(D.identities),G+=this.printExtmap(D.extmaps),G+=this.printUnrecognized(D.unrecognized),G}printGroups(D){let G="";return D.length>0&&(G+=D.map(te=>"a=group:".concat(te.semantic).concat(te.identificationTag.map(Ee=>"".concat(b).concat(Ee)).join("")).concat(this.eol)).join("")),G}printIceLite(D){return D===void 0?"":"a=ice-lite"+this.eol}printTlsId(D){return D?"a=tls-id:".concat(D).concat(this.eol):""}printIdentity(D){return D.length===0?"":D.map(G=>"a=identity:".concat(G.assertionValue).concat(G.extensions.map(te=>"".concat(b).concat(te.name).concat(te.value?"=".concat(te.value):"")))).join(this.eol)+this.eol}printMsidSemantic(D){if(!D)return"";let G="a=msid-semantic:".concat(D.semantic);return D.applyForAll?G+="".concat(b,"*"):D.identifierList.length>0&&(G+=D.identifierList.map(te=>"".concat(b).concat(te))),G+this.eol}}class Le extends ve{print(D){const G=D.attributes;let te="";return te+=this.printRTCP(G.rtcp),te+=this.printIceUfrag(G.iceUfrag),te+=this.printIcePwd(G.icePwd),te+=this.printIceOptions(G.iceOptions),te+=this.printCandidates(G.candidates),te+=this.printRemoteCandidatesList(G.remoteCandidatesList),te+=this.printEndOfCandidates(G.endOfCandidates),te+=this.printFingerprints(G.fingerprints),te+=this.printSetup(G.setup),te+=this.printMid(G.mid),te+=this.printExtmap(G.extmaps),te+=this.printRTPRelated(G),te+=this.printPtime(G.ptime),te+=this.printMaxPtime(G.maxPtime),te+=this.printDirection(G.direction),te+=this.printSSRCGroups(G.ssrcGroups),te+=this.printSSRC(G.ssrcs),te+=this.printRTCPMux(G.rtcpMux),te+=this.printRTCPMuxOnly(G.rtcpMuxOnly),te+=this.printRTCPRsize(G.rtcpRsize),te+=this.printMSId(G.msids),te+=this.printImageattr(G.imageattr),te+=this.printRid(G.rids),te+=this.printSimulcast(G.simulcast),te+=this.printSCTPPort(G.sctpPort),te+=this.printMaxMessageSize(G.maxMessageSize),te+=this.printUnrecognized(G.unrecognized),te}printCandidates(D){return D.map(G=>"a=candidate:".concat(G.foundation).concat(b).concat(G.componentId).concat(b).concat(G.transport).concat(b).concat(G.priority).concat(b).concat(G.connectionAddress).concat(b).concat(G.port).concat(b,"typ").concat(b).concat(G.type).concat(G.relAddr?"".concat(b,"raddr").concat(b).concat(G.relAddr):"").concat(G.relPort?"".concat(b,"rport").concat(b).concat(G.relPort):"").concat(Object.keys(G.extension).map(te=>"".concat(b).concat(te).concat(b).concat(G.extension[te])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(D){return D.map(G=>"a=remote-candidates:".concat(G.join(b)).concat(this.eol)).join("")}printEndOfCandidates(D){return D===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(D){if(!D.payloads)return"";const G=D.payloads;let te="";te+=D.rtcpFeedbackWildcards.map(Ee=>this.printRTCPFeedback("*",Ee)).join("");for(const Ee of G)te+=this.printRtpMap(Ee.payloadType,Ee.rtpMap),te+=this.printFmtp(Ee.payloadType,Ee.fmtp),te+=Ee.rtcpFeedbacks.map(St=>this.printRTCPFeedback(Ee.payloadType,St)).join("");return te}printFmtp(D,G){if(!G)return"";const te=Object.keys(G.parameters);return te.length===1&&G.parameters[te[0]]===null?"a=fmtp:".concat(D).concat(b).concat(te[0]).concat(this.eol):"a=fmtp:".concat(D).concat(b).concat(Object.keys(G.parameters).map(Ee=>"".concat(Ee,"=").concat(G.parameters[Ee])).join(";")).concat(this.eol)}printRtpMap(D,G){return G?"a=rtpmap:".concat(D).concat(b).concat(G.encodingName,"/").concat(G.clockRate).concat(G.encodingParameters?"/".concat(G.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(D,G){let te="a=rtcp-fb:".concat(D).concat(b),Ee=G;switch(Ee.type){case"trr-int":te+="ttr-int".concat(b).concat(Ee.interval);break;case"ack":case"nack":default:Ee=Ee,te+="".concat(Ee.type),Ee.parameter&&(te+="".concat(b).concat(Ee.parameter),Ee.additional&&(te+="".concat(b).concat(Ee.additional)))}return te+this.eol}printPtime(D){return D===void 0?"":"a=ptime:".concat(D).concat(this.eol)}printMaxPtime(D){return D===void 0?"":"a=maxptime:".concat(D).concat(this.eol)}printDirection(D){return D===void 0?"":"a=".concat(D).concat(this.eol)}printSSRC(D){return D.map(G=>Object.keys(G.attributes).map(te=>"a=ssrc:".concat(G.ssrcId.toString(10)).concat(b).concat(te).concat(G.attributes[te]?":".concat(G.attributes[te]):"").concat(this.eol)).join("")).join("")}printRTCPMux(D){return D===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(D){return D===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(D){return D===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(D){if(D===void 0)return"";let G="a=rtcp:".concat(D.port);return D.netType&&(G+="".concat(b).concat(D.netType)),D.addressType&&(G+="".concat(b).concat(D.addressType)),D.address&&(G+="".concat(b).concat(D.address)),G+this.eol}printMSId(D){return D.map(G=>"a=msid:".concat(G.id).concat(G.appdata?"".concat(b).concat(G.appdata):"").concat(this.eol)).join("")}printImageattr(D){return D.map(G=>"a=imageattr:".concat(G).concat(this.eol)).join("")}printRid(D){return D.map(G=>{let te="a=rid:".concat(G.id).concat(b).concat(G.direction);return G.payloads&&(te+="".concat(b,"pt=").concat(G.payloads.join(","))),G.params.length>0&&(te+="".concat(b).concat(G.params.map(Ee=>Ee.type==="depend"?"depend=".concat(Ee.rids.join(",")):"".concat(Ee.type,"=").concat(Ee.val)).join(";"))),te+this.eol}).join("")}printSimulcast(D){return D===void 0?"":"a=simulcast:".concat(D).concat(this.eol)}printSCTPPort(D){return D===void 0?"":"a=sctp-port:".concat(D).concat(this.eol)}printMaxMessageSize(D){return D===void 0?"":"a=max-message-size:".concat(D).concat(this.eol)}printMid(D){return D===void 0?"":"a=mid:".concat(D).concat(this.eol)}printSSRCGroups(D){return D.map(G=>"a=ssrc-group:".concat(G.semantic).concat(G.ssrcIds.map(te=>"".concat(b).concat(te.toString(10))).join("")).concat(this.eol)).join("")}}function pt(Re){return new Un().parse(Re)}function Jt(Re,D){return new lo().print(Re,D)}}},s={};function l(h){if(s[h])return s[h].exports;var m=s[h]={exports:{}};return o[h](m,m.exports,l),m.exports}return l.d=(h,m)=>{for(var v in m)l.o(m,v)&&!l.o(h,v)&&Object.defineProperty(h,v,{enumerable:!0,get:m[v]})},l.o=(h,m)=>Object.prototype.hasOwnProperty.call(h,m),l.r=h=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},l(8)})()})(Ir);class Xq{constructor(r){N(this,"sessionDesc",void 0),N(this,"localCapabilities",void 0),N(this,"rtpCapabilities",void 0),N(this,"candidates",void 0),N(this,"iceParameters",void 0),N(this,"dtlsParameters",void 0),N(this,"setup",void 0),N(this,"currentMidIndex",void 0),N(this,"cname",void 0),r=Tr(r);const{remoteIceParameters:o,remoteDtlsParameters:s,candidates:l,remoteRTPCapabilities:h,remoteSetup:m,localCapabilities:v,sdkCodec:S,cname:T}=r,b=Ir.exports.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=h,this.candidates=l,this.iceParameters=o,this.dtlsParameters=s,this.setup=m,this.localCapabilities=v,this.cname=T;for(let I=0;I<b.mediaDescriptions.length;I++){const L=b.mediaDescriptions[I];L.attributes.iceUfrag=o.iceUfrag,L.attributes.icePwd=o.icePwd,L.attributes.fingerprints=s.fingerprints,L.attributes.candidates=l,L.attributes.setup=m,L.media.mediaType==="video"&&(L.media.fmts=h.videoCodecs.map(V=>V.payloadType.toString(10)),L.attributes.payloads=h.videoCodecs,L.attributes.extmaps=h.videoExtensions),L.media.mediaType==="audio"&&(L.media.fmts=h.audioCodecs.map(V=>V.payloadType.toString(10)),L.attributes.payloads=h.audioCodecs,L.attributes.extmaps=h.audioExtensions),b.mediaDescriptions[I]=this.mungMediaDesc(L)}this.sessionDesc=b,this.currentMidIndex=b.mediaDescriptions.length-1}toString(){return Ir.exports.print(this.sessionDesc)}send(r,o,s){const{ssrcs:l,ssrcGroups:h}=pa(o,this.cname),m=this.sessionDesc.mediaDescriptions.find(T=>r===It.VIDEO?T.media.mediaType==="video":T.media.mediaType==="audio"),v=l[0].attributes.label,S=l[0].attributes.mslabel;return m.attributes.ssrcs=m.attributes.ssrcs.concat(l),m.attributes.ssrcGroups=m.attributes.ssrcGroups.concat(h),{id:v,mslabel:S}}batchSend(r){return r.map(o=>{let{kind:s,ssrcMsg:l}=o;return this.send(s,l,void 0)})}stopSending(r){this.sessionDesc.mediaDescriptions.forEach(o=>{const s=[],l=[],h=[];o.attributes.ssrcs.forEach(m=>{r.includes(m.attributes.label||"")?h.push(m):s.push(m)}),o.attributes.ssrcGroups.forEach(m=>{h.map(v=>v.ssrcId).includes(m.ssrcIds[0])||l.push(m)}),o.attributes.ssrcs=s,o.attributes.ssrcGroups=l})}mute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));o.attributes.direction="inactive"}unmute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));o.attributes.direction="sendonly"}receive(r,o,s){r.forEach((l,h)=>{const m=l._mediaStreamTrack,v=this.sessionDesc.mediaDescriptions.findIndex(T=>T.attributes.mid===m.kind),S=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[v],l);this.sessionDesc.mediaDescriptions[v]=S})}stopReceiving(r){}updateCandidates(r){r===ri.TCP?this.candidates.forEach(o=>{this.candidates.findIndex(s=>s.transport==="tcp"&&s.connectionAddress===o.connectionAddress&&s.port===o.port)===-1&&this.candidates.push(vL(vL({},o),{},{foundation:"tcpcandidate",priority:Number(o.priority)-1+"",transport:"tcp",port:Number(o.port)+90+""}))}):this.candidates=this.candidates.filter(o=>o.transport!=="tcp");for(const o of this.sessionDesc.mediaDescriptions)o.attributes.candidates=this.candidates}restartICE(r){r=Tr(r),this.iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(o=>{o.attributes.iceUfrag=r.iceUfrag,o.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const o=[];for(let s=0;s<r;s++)o.push((this.currentMidIndex+s+1).toString(10));return o}mungRecvMediaDsec(r,o){const s=Tr(r);return wd(s,o),$C(s,o),s}updateRecvMedia(r,o){const s=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(s!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[s],o);this.sessionDesc.mediaDescriptions[s]=l}}bumpMid(r){this.currentMidIndex+=r}updateTrackLabel(r,o,s){const l=this.sessionDesc.mediaDescriptions.find(m=>r===It.VIDEO?m.attributes.mid==="video":m.attributes.mid==="audio");if(l){const m=l.attributes.ssrcs.find(v=>v.attributes.label===o);var h;m&&(m.attributes.label=s,(h=m.attributes.msid)===null||h===void 0||h.replace(o,s))}}mungMediaDesc(r){const o=Tr(r);return jC(o),function(s){const l=s.attributes.extmaps.find(h=>h.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");l&&s.attributes.extmaps.splice(s.attributes.extmaps.indexOf(l),1),s.attributes.payloads.forEach(h=>{const m=h.rtcpFeedbacks.findIndex(v=>v.type==="transport-cc");m!==-1&&h.rtcpFeedbacks.splice(m,1)})}(o),o}getSSRC(r){for(const o of this.sessionDesc.mediaDescriptions)for(const s of o.attributes.ssrcs)if(s.attributes.label===r)return[s]}}function Ua(n){if(Array.isArray(n))return n.map(o=>o);if(!EL(n))return n;const r={};for(const o in n)EL(n[o])||Array.isArray(n[o])?r[o]=Ua(n[o]):r[o]=n[o];return r}function EL(n){return!(typeof n!="object"||Array.isArray(n)||!n)}function Jq(){const n=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return n&&n[0]?Number(n[0].split("/")[1]):null}function Qq(n){return window.RTCStatsReport?n.getStats()instanceof Me:!1}class WC{constructor(r){N(this,"input",[]),N(this,"size",void 0),this.size=r}add(r){this.input.push(r),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const rl={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},wp={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:rl,remoteCandidate:rl}},_L={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},SL={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},yL={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},CL={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function bL(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function TL(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?bL(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):bL(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class zC{constructor(r,o){N(this,"onFirstVideoReceived",void 0),N(this,"onFirstVideoDecoded",void 0),N(this,"onFirstAudioReceived",void 0),N(this,"onFirstVideoDecodedTimeout",void 0),N(this,"onFirstAudioDecoded",void 0),N(this,"onSelectedLocalCandidateChanged",void 0),N(this,"onSelectedRemoteCandidateChanged",void 0),N(this,"videoIsReady",!1),N(this,"videoIsReady2",{}),N(this,"pc",void 0),N(this,"options",void 0),N(this,"intervalTimer",void 0),N(this,"stats",Ua(wp)),N(this,"isFirstVideoReceived",{}),N(this,"isFirstVideoDecoded",{}),N(this,"isFirstAudioReceived",{}),N(this,"isFirstAudioDecoded",{}),N(this,"isFirstVideoDecodedTimeout",{}),N(this,"lossRateWindowStats",[]),this.pc=r,this.options=o,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new Me(r=>{r({local:TL({},rl),remote:TL({},rl)})})}setVideoIsReady(r){this.videoIsReady=r}setVideoIsReady2(r,o){this.videoIsReady2[r]=o}getVideoIsReady(r){return this.videoIsReady2[r]||!1}setIsFirstAudioDecoded(r){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(r){this.lossRateWindowStats.push(r),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const o=this.lossRateWindowStats.length,s=["videoSend","audioSend","videoRecv","audioRecv"];let l=0,h=0,m=0,v=0;for(const S of s)r[S].forEach((T,b)=>{if(!this.lossRateWindowStats[o-1][S][b]||!this.lossRateWindowStats[0][S][b])return;const I=this.lossRateWindowStats[o-1][S][b].packets-this.lossRateWindowStats[0][S][b].packets,L=this.lossRateWindowStats[o-1][S][b].packetsLost-this.lossRateWindowStats[0][S][b].packetsLost;S==="videoSend"||S==="audioSend"?(l+=I,m+=L):(h+=I,v+=L),Number.isNaN(I)||Number.isNaN(I)?T.packetLostRate=0:T.packetLostRate=I<=0||L<=0?0:L/(I+L)});r.sendPacketLossRate=l<=0||m<=0?0:m/(l+m),r.recvPacketLossRate=h<=0||v<=0?0:v/(h+v)}}function RL(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function Zq(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?RL(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):RL(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class eX extends zC{constructor(){super(...arguments),N(this,"_stats",wp),N(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const r=await this._getStats(),o=this.statsResponsesToObjects(r);this._stats=Ua(wp);const s=o.filter(h=>h.type==="ssrc");this.processSSRCStats(s);const l=o.find(h=>h.type==="VideoBwe");l&&this.processBandwidthStats(l),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(r){this._stats.bitrate={actualEncoded:Number(r.googActualEncBitrate),targetEncoded:Number(r.googTargetEncBitrate),retransmit:Number(r.googRetransmitBitrate),transmit:Number(r.googTransmitBitrate)},this._stats.sendBandwidth=Number(r.googAvailableSendBandwidth)}processSSRCStats(r){r.forEach(o=>{const s=o.id.includes("send");switch("".concat(o.mediaType,"_").concat(s?"send":"recv")){case"video_send":{const l=Ua(SL);l.codec=o.googCodecName,l.adaptionChangeReason="none",o.googCpuLimitedResolution&&(l.adaptionChangeReason="cpu"),o.googBandwidthLimitedResolution&&(l.adaptionChangeReason="bandwidth"),l.avgEncodeMs=Number(o.googAvgEncodeMs),l.inputFrame={width:Number(o.googFrameWidthInput)||Number(o.googFrameWidthSent),height:Number(o.googFrameHeightInput)||Number(o.googFrameHeightSent),frameRate:Number(o.googFrameRateInput)},l.sentFrame={width:Number(o.googFrameWidthSent),height:Number(o.googFrameHeightSent),frameRate:Number(o.googFrameRateInput)},l.firsCount=Number(o.googFirReceived),l.nacksCount=Number(o.googNacksReceived),l.plisCount=Number(o.googPlisReceived),l.frameCount=Number(o.framesEncoded),l.bytes=Number(o.bytesSent),l.packets=Number(o.packetsSent),l.packetsLost=Number(o.packetsLost),l.ssrc=Number(o.ssrc),l.rttMs=Number(o.googRtt||0),this._stats.videoSend.push(l),this._stats.rtt=l.rttMs;break}case"video_recv":{const l=Ua(_L),h=this.lastDecodeVideoReceiverStats.get(Number(o.ssrc));if(l.codec=o.googCodecName,l.targetDelayMs=Number(o.googTargetDelayMs),l.renderDelayMs=Number(o.googRenderDelayMs),l.currentDelayMs=Number(o.googCurrentDelayMs),l.minPlayoutDelayMs=Number(o.googMinPlayoutDelayMs),l.decodeMs=Number(o.googDecodeMs),l.maxDecodeMs=Number(o.googMaxDecodeMs),l.receivedFrame={width:Number(o.googFrameWidthReceived),height:Number(o.googFrameHeightReceived),frameRate:Number(o.googFrameRateReceived)},l.decodedFrame={width:Number(o.googFrameWidthReceived),height:Number(o.googFrameHeightReceived),frameRate:Number(o.googFrameRateDecoded)},l.decodeFrameRate=Number(o.googFrameRateDecoded),l.outputFrame={width:Number(o.googFrameWidthReceived),height:Number(o.googFrameHeightReceived),frameRate:Number(o.googFrameRateOutput)},l.jitterBufferMs=Number(o.googJitterBufferMs),l.firsCount=Number(o.googFirsSent),l.nacksCount=Number(o.googNacksSent),l.plisCount=Number(o.googPlisSent),l.framesDecodeCount=Number(o.framesDecoded),l.bytes=Number(o.bytesReceived),l.packets=Number(o.packetsReceived),l.packetsLost=Number(o.packetsLost),l.ssrc=Number(o.ssrc),l.packets>0&&!this.isFirstVideoReceived[l.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(l.ssrc),this.isFirstVideoReceived[l.ssrc]=!0),l.framesDecodeCount>0&&!this.isFirstVideoDecoded[l.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(l.ssrc,l.decodedFrame.width,l.decodedFrame.height),this.isFirstVideoDecoded[l.ssrc]=!0),h){const m=h.stats,v=Date.now()-h.lts;l.framesDecodeFreezeTime=m.framesDecodeFreezeTime,l.framesDecodeInterval=m.framesDecodeInterval,l.framesDecodeCount>m.framesDecodeCount&&this.isFirstVideoDecoded[l.ssrc]?(h.lts=Date.now(),l.framesDecodeInterval=v,l.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(o.ssrc,10))?l.framesDecodeFreezeTime+=l.framesDecodeInterval:this.setVideoIsReady2(parseInt(o.ssrc,10),!0))):l.framesDecodeCount<h.stats.framesDecodeCount&&(l.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(l.ssrc,{stats:Zq({},l),lts:Date.now()}),this._stats.videoRecv.push(l);break}case"audio_recv":{const l=Ua(CL);l.codec=o.googCodecName,l.outputLevel=Math.abs(Number(o.audioOutputLevel))/32767,l.decodingCNG=Number(o.googDecodingCNG),l.decodingCTN=Number(o.googDecodingCTN),l.decodingCTSG=Number(o.googDecodingCTSG),l.decodingNormal=Number(o.googDecodingNormal),l.decodingPLC=Number(o.googDecodingPLC),l.decodingPLCCNG=Number(o.googDecodingPLCCNG),l.expandRate=Number(o.googExpandRate),l.accelerateRate=Number(o.googAccelerateRate),l.preemptiveExpandRate=Number(o.googPreemptiveExpandRate),l.secondaryDecodedRate=Number(o.googSecondaryDecodedRate),l.speechExpandRate=Number(o.googSpeechExpandRate),l.preferredJitterBufferMs=Number(o.googPreferredJitterBufferMs),l.jitterBufferMs=Number(o.googJitterBufferMs),l.jitterMs=Number(o.googJitterReceived),l.bytes=Number(o.bytesReceived),l.packets=Number(o.packetsReceived),l.packetsLost=Number(o.packetsLost),l.ssrc=Number(o.ssrc),l.receivedFrames=Number(o.googDecodingCTN)||Number(o.packetsReceived),l.droppedFrames=Number(o.googDecodingPLC)+Number(o.googDecodingPLCCNG)||Number(o.packetsLost),l.receivedFrames>0&&!this.isFirstAudioReceived[l.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(l.ssrc),this.isFirstAudioReceived[l.ssrc]=!0),l.decodingNormal>0&&!this.isFirstAudioDecoded[l.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(l.ssrc),this.isFirstAudioDecoded[l.ssrc]=!0),this._stats.audioRecv.push(l);break}case"audio_send":{const l=Ua(yL);l.codec=o.googCodecName,l.inputLevel=Math.abs(Number(o.audioInputLevel))/32767,l.aecReturnLoss=Number(o.googEchoCancellationReturnLoss||0),l.aecReturnLossEnhancement=Number(o.googEchoCancellationReturnLossEnhancement||0),l.residualEchoLikelihood=Number(o.googResidualEchoLikelihood||0),l.residualEchoLikelihoodRecentMax=Number(o.googResidualEchoLikelihoodRecentMax||0),l.bytes=Number(o.bytesSent),l.packets=Number(o.packetsSent),l.packetsLost=Number(o.packetsLost),l.ssrc=Number(o.ssrc),l.rttMs=Number(o.googRtt||0),this._stats.rtt=l.rttMs,this._stats.audioSend.push(l);break}}})}_getStats(){return new Me((r,o)=>{this.pc.getStats(r,o)})}statsResponsesToObjects(r){const o=[];return r.result().forEach(s=>{const l={id:s.id,timestamp:s.timestamp.valueOf().toString(),type:s.type};s.names().forEach(h=>{l[h]=s.stat(h)}),o.push(l)}),o}}function IL(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function fu(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?IL(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):IL(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class wL extends zC{constructor(){super(...arguments),N(this,"_stats",wp),N(this,"report",void 0),N(this,"lastDecodeVideoReceiverStats",new Map),N(this,"lastVideoFramesRecv",new Map),N(this,"lastVideoFramesSent",new Map),N(this,"lastVideoFramesDecode",new Map),N(this,"lastVideoJBDelay",new Map),N(this,"lastAudioJBDelay",new Map),N(this,"mediaBytesSent",new Map),N(this,"mediaBytesRetransmit",new Map),N(this,"mediaBytesTargetEncode",new Map),N(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=Ua(wp),this.report.forEach(r=>{switch(r.type){case Uo.OUTBOUND:r.mediaType==="audio"?this.processAudioOutboundStats(r):r.mediaType==="video"&&this.processVideoOutboundStats(r);break;case Uo.INBOUND:r.mediaType==="audio"?this.processAudioInboundStats(r):r.mediaType==="video"&&this.processVideoInboundStats(r);break;case Uo.TRANSPORT:{const o=this.report.get(r.selectedCandidatePairId);o&&this.processCandidatePairStats(o);break}case Uo.CANDIDATE_PAIR:r.selected&&this.processCandidatePairStats(r)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const r=await this.pc.getStats(),o={local:fu({},rl),remote:fu({},rl)};return r.forEach(s=>{let l;if(s.type===Uo.TRANSPORT&&(l=r.get(s.selectedCandidatePairId)),s.type===Uo.CANDIDATE_PAIR&&s.selected&&(l=s),l){const h=(m,v)=>{m.type=v.type,m.id=v.id,v.address&&(m.address=v.address),v.candidateType&&(m.candidateType=v.candidateType),v.port&&(m.port=v.port),v.priority&&(m.priority=v.priority),v.protocol&&(m.protocol=v.protocol),v.relayProtocol&&(m.relayProtocol=v.relayProtocol)};if(l.localCandidateId){const m=r.get(l.localCandidateId);m&&h(o.local,m)}if(l.remoteCandidateId){const m=r.get(l.remoteCandidateId);m&&h(o.remote,m)}}}),o}processCandidatePairStats(r){if(this._stats.sendBandwidth=r.availableOutgoingBitrate||0,r.currentRoundTripTime&&(this._stats.rtt=1e3*r.currentRoundTripTime),this._stats.videoSend.forEach(o=>{r.currentRoundTripTime&&(o.rttMs=1e3*r.currentRoundTripTime)}),this._stats.audioSend.forEach(o=>{r.currentRoundTripTime&&(o.rttMs=1e3*r.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=r.id,r.localCandidateId){const o=this.report.get(r.localCandidateId);o&&this.processCandidateStats(o)}if(r.remoteCandidateId){const o=this.report.get(r.remoteCandidateId);o&&this.processCandidateStats(o)}}processCandidateStats(r){let o;r.type===Uo.LOCAL_CANDIDATE&&(o=this._stats.selectedCandidatePair.localCandidate),r.type===Uo.REMOTE_CANDIDATE&&(o=this._stats.selectedCandidatePair.remoteCandidate),o&&(o.type=r.type,o.id=r.id,r.address&&(o.address=r.address),r.candidateType&&(o.candidateType=r.candidateType),r.port&&(o.port=r.port),r.priority&&(o.priority=r.priority),r.protocol&&(o.protocol=r.protocol),r.relayProtocol&&(o.relayProtocol=r.relayProtocol),r.type===Uo.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==o.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(fu({},o),fu({},this.stats.selectedCandidatePair.localCandidate)),r.type===Uo.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==o.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(fu({},o),fu({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(r){let o=this._stats.audioRecv.find(s=>s.ssrc===r.ssrc);o||(o=Ua(CL),this._stats.audioRecv.push(o)),o.ssrc=r.ssrc,o.packets=r.packetsReceived,o.packetsLost=r.packetsLost,o.bytes=r.bytesReceived,o.jitterMs=1e3*r.jitter,this.processAudioTrackReceiverStats(r,r.trackId,o),r.codecId&&(o.codec=this.getCodecFromCodecStats(r.codecId)),o.receivedFrames||(o.receivedFrames=r.packetsReceived),o.droppedFrames||(o.droppedFrames=r.packetsLost),o.receivedFrames>0&&!this.isFirstAudioReceived[o.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(o.ssrc),this.isFirstAudioReceived[o.ssrc]=!0),o.outputLevel&&o.outputLevel>0&&!this.isFirstAudioDecoded[o.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(o.ssrc),this.isFirstAudioDecoded[o.ssrc]=!0),typeof r.concealedSamples=="number"&&(o.concealedSamples=r.concealedSamples)}processVideoInboundStats(r){let o=this._stats.videoRecv.find(m=>m.ssrc===r.ssrc);o||(o=Ua(_L),this._stats.videoRecv.push(o)),o.ssrc=r.ssrc,o.packets=r.packetsReceived,o.packetsLost=r.packetsLost,o.bytes=r.bytesReceived,o.firsCount=r.firCount,o.nacksCount=r.nackCount,o.plisCount=r.pliCount,o.framesDecodeCount=r.framesDecoded,o.totalInterFrameDelay=r.totalInterFrameDelay,o.totalSquaredInterFrameDelay=r.totalSquaredInterFrameDelay;const s=this.lastDecodeVideoReceiverStats.get(o.ssrc),l=this.lastVideoFramesDecode.get(o.ssrc),h=Date.now();if(o.framesDecodeCount>0&&!this.isFirstVideoDecoded[o.ssrc]){const m=o.decodedFrame?o.decodedFrame.width:0,v=o.decodedFrame?o.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(o.ssrc,m,v),this.isFirstVideoDecoded[o.ssrc]=!0}if(s){const m=s.stats,v=h-s.lts;o.framesDecodeFreezeTime=m.framesDecodeFreezeTime,o.framesDecodeInterval=m.framesDecodeInterval,!this.isFirstVideoDecoded[o.ssrc]&&v>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[o.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(o.ssrc),this.isFirstVideoDecodedTimeout[o.ssrc]=!0),o.framesDecodeCount>m.framesDecodeCount&&this.isFirstVideoDecoded[o.ssrc]?(s.lts=Date.now(),o.framesDecodeInterval=v,o.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(r.ssrc))?o.framesDecodeFreezeTime+=o.framesDecodeInterval:this.setVideoIsReady2(parseInt(r.ssrc,10),!0))):o.framesDecodeCount<m.framesDecodeCount&&(o.framesDecodeInterval=0),r.framesDecoded&&r.qpSum&&(s.stats.framesDecodeCount>r.framesDecoded?o.qpSumPerFrame=r.qpSum/r.framesDecoded:o.qpSumPerFrame=(r.qpSum-s.qpSum)/(r.framesDecoded-s.stats.framesDecodeCount))}l&&h-l.lts>=800?(o.decodeFrameRate=Math.round((o.framesDecodeCount-l.count)/((h-l.lts)/1e3)),this.lastVideoFramesDecode.set(o.ssrc,{count:o.framesDecodeCount,lts:h,rate:o.decodeFrameRate})):l?o.decodeFrameRate=l.rate:this.lastVideoFramesDecode.set(o.ssrc,{count:o.framesDecodeCount,lts:h,rate:0}),r.totalDecodeTime&&(o.decodeMs=1e3*r.totalDecodeTime),this.processVideoTrackReceiverStats(r,r.trackId,o),r.codecId&&(o.codec=this.getCodecFromCodecStats(r.codecId)),r.framerateMean&&(o.framesRateFirefox=r.framerateMean),o.packets>0&&!this.isFirstVideoReceived[o.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(o.ssrc),this.isFirstVideoReceived[o.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(o.ssrc,{stats:fu({},o),lts:s?s.lts:Date.now(),qpSum:r.qpSum})}processVideoOutboundStats(r){let o=this._stats.videoSend.find(l=>l.ssrc===r.ssrc);o||(o=Ua(SL),this._stats.videoSend.push(o));const s=this.mediaBytesSent.get(r.ssrc);if(s)s.add(r.bytesSent);else{const l=new WC(10);l.add(r.bytesSent),this.mediaBytesSent.set(r.ssrc,l)}if(r.retransmittedBytesSent!==void 0){const l=this.mediaBytesRetransmit.get(r.ssrc);if(l)l.add(r.retransmittedBytesSent);else{const h=new WC(10);h.add(r.retransmittedBytesSent),this.mediaBytesRetransmit.set(r.ssrc,h)}}if(r.totalEncodedBytesTarget){const l=this.mediaBytesTargetEncode.get(r.ssrc);if(l)l.add(r.totalEncodedBytesTarget);else{const h=new WC(10);h.add(r.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(r.ssrc,h)}}if(o.ssrc=r.ssrc,o.bytes=r.bytesSent,o.packets=r.packetsSent,o.firsCount=r.firCount,o.nacksCount=r.nackCount,o.plisCount=r.pliCount,o.frameCount=r.framesEncoded,o.adaptionChangeReason=r.qualityLimitationReason,o.scalabilityMode=r.scalabilityMode,r.totalEncodeTime&&r.framesEncoded){const l=this.lastEncoderMs.get(r.ssrc);if(!l||l.lastFrameCount>r.framesEncoded)o.avgEncodeMs=1e3*r.totalEncodeTime/r.framesEncoded;else{const h=r.framesEncoded-l.lastFrameCount,m=r.totalEncodeTime-l.lastEncoderTime;o.avgEncodeMs=1e3*m/h}}if(r.framesEncoded&&r.qpSum){const l=this.lastEncoderMs.get(r.ssrc);!l||l.lastFrameCount>r.framesEncoded?o.qpSumPerFrame=r.qpSum/r.framesEncoded:o.qpSumPerFrame=(r.qpSum-l.lastQpSum)/(r.framesEncoded-l.lastFrameCount)}if(this.lastEncoderMs.set(r.ssrc,{lastFrameCount:r.framesEncoded,lastEncoderTime:r.totalEncodeTime,lastQpSum:r.qpSum,lts:Date.now()}),r.codecId&&(o.codec=this.getCodecFromCodecStats(r.codecId)),r.mediaSourceId&&this.processVideoMediaSource(r.mediaSourceId,o),this.processVideoTrackSenderStats(r,r.trackId,o),r.remoteId)this.processRemoteInboundStats(r.remoteId,o);else{const l=this.findRemoteStatsId(r.ssrc,Uo.REMOTE_INBOUND);l&&this.processRemoteInboundStats(l,o)}}processAudioOutboundStats(r){let o=this._stats.audioSend.find(s=>s.ssrc===r.ssrc);if(o||(o=Ua(yL),this._stats.audioSend.push(o)),o.ssrc=r.ssrc,o.packets=r.packetsSent,o.bytes=r.bytesSent,r.mediaSourceId&&this.processAudioMediaSource(r.mediaSourceId,o),r.codecId&&(o.codec=this.getCodecFromCodecStats(r.codecId)),this.processAudioTrackSenderStats(r,r.trackId,o),r.remoteId)this.processRemoteInboundStats(r.remoteId,o);else{const s=this.findRemoteStatsId(r.ssrc,Uo.REMOTE_INBOUND);s&&this.processRemoteInboundStats(s,o)}}findRemoteStatsId(r,o){var s;const l=Array.from(Bs(s=this.report).call(s)).find(h=>h.type===o&&h.ssrc===r);return l?l.id:null}processVideoMediaSource(r,o){const s=this.report.get(r);s&&s.width&&s.height&&s.framesPerSecond&&(o.inputFrame={width:s.width,height:s.height,frameRate:s.framesPerSecond})}processAudioMediaSource(r,o){const s=this.report.get(r);s&&(o.inputLevel=s.audioLevel)}processVideoTrackSenderStats(r,o,s){var l,h,m;const v=o?this.report.get(o):void 0,S=(l=v==null?void 0:v.framesSent)!==null&&l!==void 0?l:r.framesSent;let T=(h=v==null?void 0:v.frameWidth)!==null&&h!==void 0?h:r.frameWidth,b=(m=v==null?void 0:v.frameHeight)!==null&&m!==void 0?m:r.frameHeight;if(typeof S!="number")return;typeof T=="number"&&typeof b=="number"||(T=0,b=0);let I=0;const L=Date.now(),V=this.lastVideoFramesSent.get(s.ssrc);V&&L-V.lts>=800?(I=Math.round((S-V.count)/((L-V.lts)/1e3)),this.lastVideoFramesSent.set(s.ssrc,{count:S,lts:L,rate:I})):V?I=V.rate:this.lastVideoFramesSent.set(s.ssrc,{count:S,lts:L,rate:0}),s.sentFrame={width:T,height:b,frameRate:Math.max(0,I)}}processVideoTrackReceiverStats(r,o,s){var l,h,m,v,S;const T=o?this.report.get(o):void 0,b=(l=T==null?void 0:T.framesReceived)!==null&&l!==void 0?l:r.framesReceived,I=(h=T==null?void 0:T.frameWidth)!==null&&h!==void 0?h:r.frameWidth,L=(m=T==null?void 0:T.frameHeight)!==null&&m!==void 0?m:r.frameHeight,V=(v=T==null?void 0:T.jitterBufferDelay)!==null&&v!==void 0?v:r.jitterBufferDelay,K=(S=T==null?void 0:T.jitterBufferEmittedCount)!==null&&S!==void 0?S:r.jitterBufferEmittedCount;if(typeof b=="number"){const Y=this.lastVideoFramesRecv.get(s.ssrc),q=Date.now();s.framesReceivedCount=b;let ue=0;Y&&q-Y.lts>=800?(ue=Math.round((b-Y.count)/((q-Y.lts)/1e3)),this.lastVideoFramesRecv.set(s.ssrc,{count:b,lts:q,rate:ue})):Y?ue=Y.rate:this.lastVideoFramesRecv.set(s.ssrc,{count:b,lts:q,rate:0}),s.receivedFrame={width:I||0,height:L||0,frameRate:ue||0},s.decodedFrame={width:I||0,height:L||0,frameRate:s.decodeFrameRate||0},s.outputFrame={width:I||0,height:L||0,frameRate:s.decodeFrameRate||0}}if(V&&K){let Y=this.lastVideoJBDelay.get(s.ssrc);this.lastVideoJBDelay.set(s.ssrc,{jitterBufferDelay:V,jitterBufferEmittedCount:K}),Y||(Y={jitterBufferDelay:0,jitterBufferEmittedCount:0});const q=1e3*(V-Y.jitterBufferDelay)/(K-Y.jitterBufferEmittedCount);s.jitterBufferMs=q,s.currentDelayMs=Math.round(q)}}processAudioTrackSenderStats(r,o,s){var l,h,m,v;const S=o?this.report.get(o):void 0,T=(l=(h=S==null?void 0:S.echoReturnLoss)!==null&&h!==void 0?h:r.echoReturnLoss)!==null&&l!==void 0?l:0,b=(m=(v=S==null?void 0:S.echoReturnLossEnhancement)!==null&&v!==void 0?v:r.echoReturnLossEnhancement)!==null&&m!==void 0?m:0;s.aecReturnLoss=T,s.aecReturnLossEnhancement=b}processAudioTrackReceiverStats(r,o,s){var l,h,m,v,S,T,b;const I=o?this.report.get(o):void 0,L=(l=I==null?void 0:I.removedSamplesForAcceleration)!==null&&l!==void 0?l:r.removedSamplesForAcceleration,V=(h=I==null?void 0:I.totalSamplesReceived)!==null&&h!==void 0?h:r.totalSamplesReceived,K=(m=I==null?void 0:I.jitterBufferDelay)!==null&&m!==void 0?m:r.jitterBufferDelay,Y=(v=I==null?void 0:I.jitterBufferEmittedCount)!==null&&v!==void 0?v:r.jitterBufferEmittedCount,q=(S=I==null?void 0:I.audioLevel)!==null&&S!==void 0?S:r==null?void 0:r.audioLevel,ue=(T=I==null?void 0:I.totalSamplesDuration)!==null&&T!==void 0?T:r==null?void 0:r.totalSamplesDuration,me=(b=I==null?void 0:I.concealedSamples)!==null&&b!==void 0?b:r.concealedSamples;if(L&&V&&(s.accelerateRate=L/V),K&&Y){let qe=this.lastAudioJBDelay.get(s.ssrc);this.lastAudioJBDelay.set(s.ssrc,{jitterBufferDelay:K,jitterBufferEmittedCount:Y}),qe||(qe={jitterBufferDelay:0,jitterBufferEmittedCount:0});const Te=1e3*(K-qe.jitterBufferDelay)/(Y-qe.jitterBufferEmittedCount);s.jitterBufferMs=Math.round(Te)}s.outputLevel=q;let ye=1920;ue&&V&&(ye=V/ue/50,s.receivedFrames=Math.round(V/ye)),me&&(s.droppedFrames=Math.round(me/ye))}processRemoteInboundStats(r,o){const s=this.report.get(r);s&&(o.packetsLost=s.packetsLost,s.roundTripTime&&(o.rttMs=1e3*s.roundTripTime))}getCodecFromCodecStats(r){const o=this.report.get(r);if(!o)return"";const s=o.mimeType.match(/\/(.*)$/);return s&&s[1]?s[1]:""}updateSendBitrate(){let r=0,o=null,s=null;this.mediaBytesSent.forEach(h=>{r+=h.diffMean()}),this.mediaBytesRetransmit.forEach(h=>{o=o===null?h.diffMean():o+h.diffMean()}),this.mediaBytesTargetEncode.forEach(h=>{s=s===null?h.diffMean():s+h.diffMean()});const l=o!==null?r-o:r;this._stats.bitrate={actualEncoded:8*l/(this.options.updateInterval/1e3),transmit:8*r/(this.options.updateInterval/1e3)},o!==null&&(this._stats.bitrate.retransmit=8*o/(this.options.updateInterval/1e3)),s!==null&&(this._stats.bitrate.targetEncoded=8*s/(this.options.updateInterval/1e3))}}class tX extends zC{updateStats(){return Me.resolve()}}function GC(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:500,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e4;const h=Jq();return h?h<76?new eX(n,{updateInterval:r,lossRateInterval:o,freezeRateLimit:s,firstVideoDecodedTimeout:l}):new wL(n,{updateInterval:r,lossRateInterval:o,freezeRateLimit:s,firstVideoDecodedTimeout:l}):Qq(n)?new wL(n,{updateInterval:r,lossRateInterval:o,freezeRateLimit:s,firstVideoDecodedTimeout:l}):new tX(n,{updateInterval:r,lossRateInterval:o,freezeRateLimit:s,firstVideoDecodedTimeout:l})}var Sn;function OL(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function AL(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?OL(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):OL(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let Op=(_e((Sn=class Yp extends p0{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}constructor(r,o){super(r,o),N(this,"store",void 0),N(this,"peerConnection",void 0),N(this,"remoteSDP",void 0),N(this,"initialOffer",void 0),N(this,"statsFilter",void 0),N(this,"useRTX",!1),N(this,"localCapabilities",void 0),N(this,"localCandidateCount",0),N(this,"allCandidatesReceived",!1),N(this,"establishPromise",void 0),N(this,"mutex",new Ui("P2PConnection-mutex")),this.store=o,this.peerConnection=new RTCPeerConnection(Yp.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.statsFilter=GC(this.peerConnection,void 0,void 0,Qn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const r=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!r.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const o=pu(r.sdp),s=BC(r.sdp,!this.useRTX,re("FILTER_VIDEO_FEC"),re("FILTER_AUDIO_FEC"),["opus"]);return this.localCapabilities=s,this.initialOffer=r,AL(AL({},o),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:s},offerSDP:r.sdp})}catch(r){throw new Q(z.GET_LOCAL_CONNECTION_PARAMS_FAILED,r.toString())}}async connect(r,o,s,l,h,m){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new Xq({remoteIceParameters:r,remoteDtlsParameters:o,candidates:s,remoteRTPCapabilities:l.send,remoteSetup:h,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:m});const v=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(v){throw new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(v.toString()))}}send(r,o){var s=this;return Ma(function*(){const l=yield Bt(s.mutex.lock());try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const h=r.map(L=>s.peerConnection.addTrack(L._mediaStreamTrack)),m=yield Bt(s.peerConnection.createOffer()),v=Ir.exports.parse(m.sdp),S=r.map(L=>{const V=L._mediaStreamTrack,K=v.mediaDescriptions.find(Y=>Y.attributes.mid===V.kind);if(!K)throw new Error("Cannot extract ssrc from mediaDescription.");return function(Y,q,ue){const me=Y.attributes.ssrcs.filter(qe=>qe.attributes.label===q),ye=Y.attributes.ssrcGroups;if(me.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(ye&&me.length>1){const qe=ye.find(Te=>Te.ssrcIds.indexOf(me[0].ssrcId)!==-1);return qe?[{ssrcId:qe.ssrcIds[0],rtx:ue?qe.ssrcIds[1]:void 0}]:[{ssrcId:me[0].ssrcId}]}return[{ssrcId:me[0].ssrcId}]}(K,V.id,s.useRTX)});let T;try{T=yield S}catch(L){throw h.forEach(V=>{Di()&&V.replaceTrack(null),s.peerConnection.removeTrack(V)}),L}const b=s.mungSendOfferSDP(m.sdp,r);s.remoteSDP.receive(r,o,T);const I=s.remoteSDP.toString();return yield Bt(s.peerConnection.setLocalDescription({type:"offer",sdp:b})),yield Bt(s.applySendEncodings(h,r)),yield Bt(s.peerConnection.setRemoteDescription({type:"answer",sdp:I})),r.map((L,V)=>{const K=L._mediaStreamTrack.id;return{localSSRC:S[V],id:K}})}catch(h){throw new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(h.toString()))}finally{l()}})()}async stopSending(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const o=this.peerConnection.getSenders().filter(h=>{var m;return r.indexOf(((m=h.track)===null||m===void 0?void 0:m.id)||"")!==-1});if(o.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");o.map(h=>{Di()&&h.replaceTrack(null),this.peerConnection.removeTrack(h)});const s=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(s),this.remoteSDP.stopReceiving(r);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(o){throw new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(o.toString()))}}async receive(r,o,s,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(r," before remoteSDP created."));const{id:h,mslabel:m}=this.remoteSDP.send(r,o,l),v=new Me((b,I)=>{const L=setTimeout(()=>{I(new Error("Cannot receive track, id: ".concat(h)))},1e4),V=K=>{const Y=an();if((Y.name==="Safari"&&Number(Y.version)===11||ki())&&K.track.id!==h&&K.streams[0].id===m){var q;const ue=K.streams[0].getTracks()[0];return(q=this.remoteSDP)===null||q===void 0||q.updateTrackLabel(r,h,K.track.id),this.peerConnection.removeEventListener("track",V),clearTimeout(L),void b(ue)}if(K.track.id===h)return this.peerConnection.removeEventListener("track",V),clearTimeout(L),void b(K.track)};this.peerConnection.addEventListener("track",V)}),S=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:S});const T=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(T),{track:await v,id:h}}catch(h){throw new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(h.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const o=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const s=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(s)}catch(o){throw new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(o.toString()))}}async muteRemote(r){}async unmuteRemote(r){}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const o=this.peerConnection.getSenders().filter(s=>{var l;return r.indexOf(((l=s.track)===null||l===void 0?void 0:l.id)||"")!==-1});if(o.length!==r.length)throw new Error("sender' length doesn't match mids' length.");o.map(s=>{if(Di()&&s.track)s.track.enabled=!1;else{const l=s.getParameters();l.encodings.forEach(h=>h.active=!1),s.setParameters(l)}})}catch(o){throw new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(o.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const o=this.peerConnection.getSenders().filter(h=>{var m;return r.indexOf(((m=h.track)===null||m===void 0?void 0:m.id)||"")!==-1});if(o.length!==r.length)throw new Error("Senders' length doesn't match mids' length.");o.map(async h=>{if(Di()&&h.track)h.track.enabled=!0;else{const m=h.getParameters();m.encodings.forEach(v=>v.active=!0),await h.setParameters(m)}});const s=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(s);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(o){throw new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(o.toString()))}}restartICE(r){var o=this;return Ma(function*(){const s=yield Bt(o.mutex.lock("From P2PConnection.restartICE"));try{if(!o.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(gr().supportPCSetConfiguration){const S=o.peerConnection.getConfiguration(),T=r===ri.RELAY?"relay":"all";S.iceTransportPolicy!==T&&(U.debug("[".concat(o.store.clientId,"] restartICE change iceTransportPolicy from [").concat(S.iceTransportPolicy,"] to [").concat(T,"]")),S.iceTransportPolicy=T,o.peerConnection.setConfiguration(S))}else if(r===ri.RELAY)return;r!==ri.RELAY&&o.remoteSDP.updateCandidates(r);const l=yield Bt(o.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const h=pu(l.sdp),{remoteIceParameters:m}=yield h.iceParameters;o.remoteSDP.restartICE(m);const v=o.remoteSDP.toString();yield Bt(o.peerConnection.setLocalDescription(l)),yield Bt(o.peerConnection.setRemoteDescription({type:"answer",sdp:v}))}catch(l){U.warning("[".concat(o.store.clientId,"] restart ICE failed, abort operation"),l)}finally{s()}})()}close(){var r;this.peerConnection.close(),(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,o){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const s=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(s.sdp,[o]);this.remoteSDP.updateRecvMedia(o._mediaStreamTrack.kind,o);const h=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(s){throw new Q(z.EXCHANGE_SDP_FAILED,s.toString())}}async updateSendParameters(r,o){const s=this.peerConnection.getSenders().filter(l=>{var h;return((h=l.track)===null||h===void 0?void 0:h.id)===r});s.length===1&&await this.applySendEncodings(s,[o])}setStatsRemoteVideoIsReady(r,o){this.statsFilter.setVideoIsReady2(r,o)}async replaceTrack(r,o){const s=this.peerConnection.getSenders().find(l=>{var h;return((h=l.track)===null||h===void 0?void 0:h.id)===o});s&&await s.replaceTrack(r._mediaStreamTrack)}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,U.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,U.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},re("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const o={iceServers:[],sdpSemantics:"plan-b"};return r.iceServers?o.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(dp(r.turnServer.servers)?o.iceServers=r.turnServer.servers:(o.iceServers&&o.iceServers.push(...Yp.turnServerConfigToIceServers(r.turnServer.servers)),re("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&r.turnServer.serversFromGateway&&o.iceServers.push(...Yp.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(o.iceTransportPolicy="relay")}))),o}static turnServerConfigToIceServers(r){const o=[];return r.forEach(s=>{s.security?s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),o}async applySendEncodings(r,o){try{if(!gr().supportSetRtpSenderParameters||r.length!==o.length)return;for(let l=0;l<r.length;l++){var s;const h=r[l],m=o[l];if(!m)continue;const v={},S={};if(m instanceof Rr)switch(m._optimizationMode){case"motion":v.degradationPreference="maintain-framerate";break;case"detail":v.degradationPreference="maintain-resolution";break;default:v.degradationPreference="balanced"}if(re("DSCP_TYPE")&&Zl()){const I=re("DSCP_TYPE");["very-low","low","medium","high"].includes(I)&&(S.networkPriority=I)}const T=h.getParameters(),b=(s=T.encodings)===null||s===void 0?void 0:s[0];b&&Object.assign(b,S),Object.assign(T,v),await h.setParameters(T)}}catch{U.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(r,o){const s=Ir.exports.parse(r);return o.forEach((l,h)=>{const m=l._mediaStreamTrack,v=s.mediaDescriptions.find(S=>S.attributes.mid===m.kind);v&&wd(v,l)}),Ir.exports.print(s)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var o;(o=this.onFirstAudioReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var o;(o=this.onFirstVideoReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var o;(o=this.onFirstAudioDecoded)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,o,s)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,o,s)},this.statsFilter.onSelectedLocalCandidateChanged=(r,o)=>{var s;(s=this.onSelectedLocalCandidateChanged)===null||s===void 0||s.call(this,r,o)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,o)=>{var s;(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0||s.call(this,r,o)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const o=this.remoteSDP.batchSend(r).map((h,m)=>{let{id:v,mslabel:S}=h;const{kind:T}=r[m];return new Me((b,I)=>{const L=setTimeout(()=>{I(new Error("Cannot receive track, id: ".concat(v)))},1e4),V=K=>{const Y=an();if(Y.name==="Safari"&&Number(Y.version)===11&&K.track.id!==v&&K.streams[0].id===S){var q;const ue=K.streams[0].getTracks()[0];return(q=this.remoteSDP)===null||q===void 0||q.updateTrackLabel(T,v,K.track.id),this.peerConnection.removeEventListener("track",V),clearTimeout(L),void b({track:ue,id:v})}if(K.track.id===v)return this.peerConnection.removeEventListener("track",V),clearTimeout(L),void b({track:K.track,id:v})};this.peerConnection.addEventListener("track",V)})}),s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});const l=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(l),await Me.all(o)}catch(o){throw new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async getRemoteSSRC(r){if(!this.remoteSDP)return;const o=this.remoteSDP.getSSRC(r);return o==null?void 0:o[0].ssrcId}setConfiguration(r){if(gr().supportPCSetConfiguration){const o=Yp.resolvePCConfiguration(r);this.peerConnection.setConfiguration(o)}}}).prototype,"connect",[fa],Object.getOwnPropertyDescriptor(Sn.prototype,"connect"),Sn.prototype),_e(Sn.prototype,"stopSending",[fa],Object.getOwnPropertyDescriptor(Sn.prototype,"stopSending"),Sn.prototype),_e(Sn.prototype,"receive",[fa],Object.getOwnPropertyDescriptor(Sn.prototype,"receive"),Sn.prototype),_e(Sn.prototype,"stopReceiving",[fa],Object.getOwnPropertyDescriptor(Sn.prototype,"stopReceiving"),Sn.prototype),_e(Sn.prototype,"muteRemote",[fa],Object.getOwnPropertyDescriptor(Sn.prototype,"muteRemote"),Sn.prototype),_e(Sn.prototype,"unmuteRemote",[fa],Object.getOwnPropertyDescriptor(Sn.prototype,"unmuteRemote"),Sn.prototype),_e(Sn.prototype,"muteLocal",[fa],Object.getOwnPropertyDescriptor(Sn.prototype,"muteLocal"),Sn.prototype),_e(Sn.prototype,"unmuteLocal",[fa],Object.getOwnPropertyDescriptor(Sn.prototype,"unmuteLocal"),Sn.prototype),_e(Sn.prototype,"close",[fa],Object.getOwnPropertyDescriptor(Sn.prototype,"close"),Sn.prototype),_e(Sn.prototype,"updateEncoderConfig",[fa],Object.getOwnPropertyDescriptor(Sn.prototype,"updateEncoderConfig"),Sn.prototype),_e(Sn.prototype,"updateSendParameters",[fa],Object.getOwnPropertyDescriptor(Sn.prototype,"updateSendParameters"),Sn.prototype),_e(Sn.prototype,"replaceTrack",[fa],Object.getOwnPropertyDescriptor(Sn.prototype,"replaceTrack"),Sn.prototype),_e(Sn.prototype,"getRemoteSSRC",[fa],Object.getOwnPropertyDescriptor(Sn.prototype,"getRemoteSSRC"),Sn.prototype),Sn);function fa(n,r,o){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,h=await l.lock("Locking from P2PConnection.".concat(r));try{for(var m=arguments.length,v=new Array(m),S=0;S<m;S++)v[S]=arguments[S];return await s.apply(this,v)}finally{h()}},o}function NL(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function xL(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?NL(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):NL(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}const U0="9",PL=4e4;class nX{get localCapabilities(){return Tr(this._localCapabilities)}get rtpCapabilities(){return Tr(this._rtpCapabilities)}get candidates(){return Tr(this._candidates)}get iceParameters(){return Tr(this._iceParameters)}get dtlsParameters(){return Tr(this._dtlsParameters)}constructor(r){N(this,"sessionDesc",void 0),N(this,"_localCapabilities",void 0),N(this,"_rtpCapabilities",void 0),N(this,"_candidates",void 0),N(this,"_iceParameters",void 0),N(this,"_dtlsParameters",void 0),N(this,"setup",void 0),N(this,"currentMidIndex",void 0),N(this,"cname",void 0),N(this,"firefoxSsrcMidMap",new Map),r=Tr(r);const{remoteIceParameters:o,remoteDtlsParameters:s,candidates:l,remoteRTPCapabilities:h,remoteSetup:m,localCapabilities:v,cname:S}=r,T=Ir.exports.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`);this._rtpCapabilities=h,this._candidates=l,this._iceParameters=o,this._dtlsParameters=s,this._localCapabilities=v,this.setup=m,this.cname=S;const b=this.rtpCapabilities.send;for(const I of T.mediaDescriptions){if(I.attributes.iceUfrag=o.iceUfrag,I.attributes.icePwd=o.icePwd,I.attributes.fingerprints=s.fingerprints,I.attributes.candidates=l,I.attributes.setup=m,I.media.mediaType==="video"&&(I.media.fmts=b.videoCodecs.map(L=>L.payloadType.toString(10)),I.attributes.payloads=b.videoCodecs,I.attributes.extmaps=b.videoExtensions,re("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:L,ssrcGroups:V}=pa([{ssrcId:PL,rtx:re("USE_SUB_RTX")?40001:void 0}],this.cname);I.attributes.ssrcs=L,I.attributes.ssrcGroups=V}if(I.media.mediaType==="audio"&&(I.media.fmts=b.audioCodecs.map(L=>L.payloadType.toString(10)),I.attributes.payloads=b.audioCodecs,I.attributes.extmaps=b.audioExtensions,nl(I),re("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:L,ssrcGroups:V}=pa([{ssrcId:2e4}],this.cname);I.attributes.ssrcs=L,I.attributes.ssrcGroups=V}}this.sessionDesc=T,this.currentMidIndex=T.mediaDescriptions.length-1}preloadRemoteMedia(){const r=re("PRELOAD_MEDIA_COUNT");this.rtpCapabilities;const o=this.candidates,s=this.dtlsParameters,l=this.iceParameters,h=this.rtpCapabilities.send;for(let m=1;m<r;m++){const v=2*m+2e4,S=2*m+PL,{ssrcs:T,ssrcGroups:b}=pa([{ssrcId:v}],this.cname),{ssrcs:I,ssrcGroups:L}=pa([{ssrcId:S,rtx:re("USE_SUB_RTX")?S+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:U0,protos:["UDP","TLS","RTP","SAVPF"],fmts:h.videoCodecs.map(V=>V.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:o,extmaps:h.videoExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:I,ssrcGroups:L,rtcpFeedbackWildcards:[],payloads:h.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*m)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:U0,protos:["UDP","TLS","RTP","SAVPF"],fmts:h.audioCodecs.map(V=>V.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:o,extmaps:h.audioExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:T,ssrcGroups:b,rtcpFeedbackWildcards:[],payloads:h.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*m+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return Ir.exports.print(this.sessionDesc)}send(r,o,s,l){const{ssrcs:h,ssrcGroups:m}=pa(o,this.cname,re("SYNC_GROUP")?s:void 0),v=this.findPreloadMediaDesc(h);if(v){if(Qn()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,v.attributes.mid),l&&(l.twcc||l.remb)){const S=this.sessionDesc.mediaDescriptions.indexOf(v);return this.sessionDesc.mediaDescriptions[S]=this.mungSendMediaDesc(v,l),{mid:v.attributes.mid,needExchangeSDP:!0}}return{mid:v.attributes.mid,needExchangeSDP:!1}}{const S=this.findAvailableMediaIndex(r,h);let T;return S===-1||S===1&&(Di()||wN())||S===0&&re("USE_SUB_RTX")||ON()?(T=this.createOrRecycleSendMedia(r,h,m,"sendonly",l),this.updateBundleMids()):(T=Tr(this.sessionDesc.mediaDescriptions[S]),T.attributes.direction="sendonly",T.attributes.ssrcs=h,T.attributes.ssrcGroups=m,this.sessionDesc.mediaDescriptions[S]=this.mungSendMediaDesc(T,l)),Qn()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,T.attributes.mid),{mid:T.attributes.mid,needExchangeSDP:!0}}}batchSend(r){const o=r.map(h=>{let{kind:m,ssrcMsg:v,mslabel:S}=h;return this.send(m,v,S)}),s=[];let l=!1;return o.forEach(h=>{let{mid:m,needExchangeSDP:v}=h;v&&(l=!0),s.push(m)}),{mids:s,needExchangeSDP:l}}stopSending(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>s.attributes.mid&&r.indexOf(s.attributes.mid)!==-1);if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");o.forEach(s=>{s.attributes.mid==="0"||Qn()||ON()?s.attributes.ssrcs=[]:(s.attributes.ssrcs=[],s.attributes.direction="inactive",s.media.port="0")}),this.updateBundleMids()}mute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));o.attributes.direction="inactive"}unmute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));o.attributes.direction="sendonly"}muteRemote(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(s=>{s.attributes.direction="inactive"})}unmuteRemote(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(s=>{s.attributes.direction="recvonly"})}receive(r,o,s,l){r.forEach((h,m)=>{this.createOrRecycleRecvMedia(h,[],"recvonly",o,s,l[m])}),this.updateBundleMids()}stopReceiving(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.indexOf(s.attributes.mid)!==-1);if(o.length!==r.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");o.forEach(s=>{s.media.port="0",s.attributes.direction="inactive"}),this.updateBundleMids()}updateCandidates(r){r===ri.TCP?this._candidates.forEach(o=>{this._candidates.findIndex(s=>s.transport==="tcp"&&s.connectionAddress===o.connectionAddress&&s.port===o.port)===-1&&this._candidates.push(xL(xL({},o),{},{foundation:"tcpcandidate",priority:Number(o.priority)-1+"",transport:"tcp",port:Number(o.port)+90+""}))}):this._candidates=this._candidates.filter(o=>o.transport!=="tcp");for(const o of this.sessionDesc.mediaDescriptions)o.attributes.candidates=this.candidates}restartICE(r){r=Tr(r),this._iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(o=>{o.attributes.iceUfrag=r.iceUfrag,o.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const o=[];for(let s=0;s<r;s++)o.push((this.currentMidIndex+s+1).toString(10));return o}findAvailableMediaIndex(r,o){return this.sessionDesc.mediaDescriptions.findIndex(s=>{const l=s.media.mediaType===r&&s.media.port!=="0"&&(s.attributes.direction==="sendonly"||s.attributes.direction==="sendrecv")&&s.attributes.ssrcs.length===0;if(Qn()){if(l){const h=this.firefoxSsrcMidMap.get(o[0].ssrcId);return!(h||s.attributes.mid!=="0"&&s.attributes.mid!=="1")||!(!h||h!==s.attributes.mid)}return!1}return l})}createOrRecycleRecvMedia(r,o,s,l,h,m){const v=r._mediaStreamTrack.kind,S=this.rtpCapabilities.recv,T=this.localCapabilities.send;let b=[];if(v===It.VIDEO){var I,L;if(re("H264_PROFILE_LEVEL_ID")&&l==="h264"&&(b=S.videoCodecs.filter(ue=>{var me,ye;return(((me=ue.rtpMap)===null||me===void 0?void 0:me.encodingName.toLowerCase())||"").includes(l)&&(ue==null||(ye=ue.fmtp)===null||ye===void 0?void 0:ye.parameters["profile-level-id"])===re("H264_PROFILE_LEVEL_ID")})),!b||((I=b)===null||I===void 0?void 0:I.length)===0){const ue=T.videoCodecs.filter(me=>{var ye;return(((ye=me.rtpMap)===null||ye===void 0?void 0:ye.encodingName.toLowerCase())||"").includes(l)});ue.length!==0&&(b=S.videoCodecs.filter(me=>ue.some(ye=>ye.payloadType===me.payloadType)))}if(re("USE_PUB_RTX")){const ue=b.map(ye=>ye.payloadType.toString()),me=S.videoCodecs.filter(ye=>{var qe,Te;return((qe=ye.rtpMap)===null||qe===void 0?void 0:qe.encodingName)==="rtx"&&ue.includes(((Te=ye.fmtp)===null||Te===void 0?void 0:Te.parameters.apt)||"")});b=[...b,...me]}b.length===0&&(U.warning("codec ".concat(l," not included in rtpCapabilities, fallback to default payloads: ").concat((L=S.videoCodecs[0].rtpMap)===null||L===void 0?void 0:L.encodingName)),b=S.videoCodecs)}else b=S.audioCodecs.filter(ue=>{var me;return(((me=ue.rtpMap)===null||me===void 0?void 0:me.encodingName.toLowerCase())||"").includes(h)}),b.length===0&&(U.warning("codec ".concat(h," not included in rtpCapabilities, fallback to opus")),b=S.audioCodecs.filter(ue=>{var me;return(((me=ue.rtpMap)===null||me===void 0?void 0:me.encodingName.toLowerCase())||"").includes("opus")}));const V=v===It.VIDEO?S.videoExtensions:S.audioExtensions;this.currentMidIndex+=1;const K="".concat(this.currentMidIndex);let Y={media:{mediaType:v,port:U0,protos:["UDP","TLS","RTP","SAVPF"],fmts:b.map(ue=>ue.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:V,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:b,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:s,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(K)}};Y=this.mungRecvMediaDsec(Y,r,m);const q=this.findFirstClosedMedia(v);if(q){const ue=this.sessionDesc.mediaDescriptions.indexOf(q);this.sessionDesc.mediaDescriptions[ue]=Y}else this.sessionDesc.mediaDescriptions.push(Y);return Y}createOrRecycleSendMedia(r,o,s,l,h){const m=this.rtpCapabilities.send,v=r===It.VIDEO?m.videoCodecs:m.audioCodecs,S=r===It.VIDEO?m.videoExtensions:m.audioExtensions;this.currentMidIndex+=1;const T="".concat(this.currentMidIndex);let b={media:{mediaType:r,port:U0,protos:["UDP","TLS","RTP","SAVPF"],fmts:v.map(L=>L.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:S,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:s,rtcpFeedbackWildcards:[],payloads:v,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:l,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(T)}};b=this.mungSendMediaDesc(b,h);const I=this.findFirstClosedMedia(r);if(I){const L=this.sessionDesc.mediaDescriptions.indexOf(I);this.sessionDesc.mediaDescriptions[L]=b}else this.sessionDesc.mediaDescriptions.push(b);return b}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(r=>r.media.port!=="0").map(r=>r.attributes.mid)}mungRecvMediaDsec(r,o,s){const l=Tr(r);return jC(l),wd(l,o),$C(l,o),pL(l),L0(l,s,this.localCapabilities.send),l}mungSendMediaDesc(r,o){const s=Tr(r);return L0(s,o,this.localCapabilities.recv),nl(s),s}updateRecvMedia(r,o){const s=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(s!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[s],o);this.sessionDesc.mediaDescriptions[s]=l}}bumpMid(r){this.currentMidIndex+=r}findFirstClosedMedia(r){return this.sessionDesc.mediaDescriptions.find(o=>Qn()?o.media.port==="0"&&o.media.mediaType===r:o.media.port==="0")}findPreloadMediaDesc(r){return this.sessionDesc.mediaDescriptions.find(o=>{var s,l;return((s=o.attributes)===null||s===void 0||(l=s.ssrcs[0])===null||l===void 0?void 0:l.ssrcId)===r[0].ssrcId})}getSSRC(r){var o;return(o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r))===null||o===void 0?void 0:o.attributes.ssrcs}}var yn;function DL(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function Od(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?DL(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):DL(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let Ec=(_e((yn=class qp extends p0{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var r,o,s;return(r=(o=this.peerConnection.getReceivers()[0])===null||o===void 0||(s=o.transport)===null||s===void 0?void 0:s.state)!==null&&r!==void 0?r:null}constructor(r,o){super(r,o),N(this,"store",void 0),N(this,"peerConnection",void 0),N(this,"remoteSDP",void 0),N(this,"initialOffer",void 0),N(this,"transportEventReceiver",void 0),N(this,"statsFilter",void 0),N(this,"localCapabilities",void 0),N(this,"localCandidateCount",0),N(this,"allCandidatesReceived",!1),N(this,"selectedCandidatePairTimer",void 0),N(this,"establishPromise",void 0),N(this,"mutex",new Ui("P2PConnection-mutex")),this.store=o,this.peerConnection=new RTCPeerConnection(qp.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.statsFilter=GC(this.peerConnection,void 0,void 0,Qn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const r=await this.peerConnection.createOffer();if(!r.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const o=pu(r.sdp),s=await mL(!re("USE_PUB_RTX")&&!re("USE_SUB_RTX"),re("FILTER_VIDEO_FEC"),re("FILTER_AUDIO_FEC"));return this.localCapabilities=HC(s),this.initialOffer=r,Od(Od({},o),{},{rtpCapabilities:s,offerSDP:r.sdp})}catch(r){throw new Q(z.GET_LOCAL_CONNECTION_PARAMS_FAILED,r.toString())}}async connect(r,o,s,l,h,m){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new nX({remoteIceParameters:r,remoteDtlsParameters:o,candidates:s,remoteRTPCapabilities:l,remoteSetup:h,localCapabilities:this.localCapabilities,cname:m});const v=this.remoteSDP.toString(),S=Ir.exports.parse(this.initialOffer.sdp),T=S.mediaDescriptions.find(V=>V.media.mediaType==="audio");T&&nl(T);const b=Ir.exports.print(S),I=this.logSDPExchange(b||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:b}),I==null||I(v),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v});const L=this.peerConnection.getTransceivers()[0];if(L!=null&&L.receiver&&this.tryBindTransportEvents(L.receiver),re("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia();const V=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:V});const K=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(K)}}catch(v){throw new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(v.toString()))}}send(r,o,s){var l=this;return Ma(function*(){const h=yield Bt(l.mutex.lock("From P2PConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const m=[];r.forEach(Y=>{const q=l.peerConnection.addTransceiver(Y._mediaStreamTrack,{direction:"sendonly"});m.push(q),Y._updateRtpTransceiver(q)}),Qn()&&re("SIMULCAST")===!0&&(yield Bt(l.applySimulcastForFirefox(m,r)));const v=yield Bt(l.peerConnection.createOffer()),S=l.remoteSDP.predictReceivingMids(r.length),T=l.mungSendOfferSDP(v.sdp,r,S),b=Ir.exports.parse(T),I=S.map(Y=>{const q=b.mediaDescriptions.find(ue=>ue.attributes.mid===Y);if(!q)throw new Error("Cannot extract ssrc from mediaDescription.");return dL(q,re("USE_PUB_RTX"))});let L;try{L=yield I}catch(Y){L=[],l.remoteSDP.receive(r,o,s,L);const q=l.remoteSDP.toString();throw yield Bt(l.peerConnection.setLocalDescription({type:"offer",sdp:T})),yield Bt(l.peerConnection.setRemoteDescription({type:"answer",sdp:q})),yield Bt(l.stopSending(S,!0)),Y}l.remoteSDP.receive(r,o,s,L);const V=l.remoteSDP.toString(),K=l.logSDPExchange(T,"offer","local","send");return yield Bt(l.peerConnection.setLocalDescription({type:"offer",sdp:T})),yield Bt(l.applySimulcastEncodings(m,r)),yield Bt(l.applySendEncodings(m,r)),K==null||K(V),yield Bt(l.peerConnection.setRemoteDescription({type:"answer",sdp:V})),m.map((Y,q)=>{const ue=S[q];return{localSSRC:I[q],id:ue,transceiver:Y}})}catch(m){throw m instanceof Q?m:new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(m.toString()))}finally{h()}})()}async stopSending(r,o){const s=o?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(S=>r.indexOf(S.mid)!==-1);if(l.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");l.map(S=>{var T;S.direction="inactive",(T=S.stop)===null||T===void 0||T.call(S)});const h=await this.peerConnection.createOffer(),m=this.logSDPExchange(h.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(h),this.remoteSDP.stopReceiving(r);const v=this.remoteSDP.toString();m==null||m(v),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(l){throw new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(l.toString()))}finally{s&&s()}}async receive(r,o,s,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(r," before remoteSDP created."));const{mid:h,needExchangeSDP:m}=this.remoteSDP.send(r,o,s,l);if(m){const S=this.remoteSDP.toString(),T=this.logSDPExchange(S,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:S});const b=await this.peerConnection.createAnswer(),I=this.mungReceiveAnswerSDP(b.sdp,h,r);T==null||T(I||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:I}),U.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(r," by exchanging SDP."))}else U.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(r," no need to exchange SDP."));const v=this.peerConnection.getTransceivers().find(S=>S.mid===h);if(!v)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:v.receiver.track,id:h,transceiver:v}}catch(h){throw new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(h.toString()))}}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:o,needExchangeSDP:s}=this.remoteSDP.batchSend(r);if(s){const l=this.remoteSDP.toString(),h=this.logSDPExchange(l,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:l});const m=await this.peerConnection.createAnswer();h==null||h(m.sdp||""),await this.peerConnection.setLocalDescription(m),U.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))}else U.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive no need to exchange SDP."));return o.map(l=>{const h=this.peerConnection.getTransceivers().find(m=>m.mid===l);if(!h)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:h.receiver.track,id:l,transceiver:h}})}catch(o){throw new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(o.toString()))}}async muteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.mute(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(o.toString()))}}async unmuteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.unmute(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(o.toString()))}}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const o=this.peerConnection.getTransceivers().filter(m=>m.mid&&r.indexOf(m.mid)!==-1);if(o.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");o.map(m=>{m.direction="inactive"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.muteRemote(r);const h=this.remoteSDP.toString();l==null||l(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(o){throw new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(o.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const o=this.peerConnection.getTransceivers().filter(m=>m.mid&&r.indexOf(m.mid)!==-1);if(o.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");o.map(async(m,v)=>{m.direction="sendonly"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.unmuteRemote(r);const h=this.remoteSDP.toString();l==null||l(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(o){throw new Q(z.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(o.toString()))}}restartICE(r){var o=this;return Ma(function*(){const s=yield Bt(o.mutex.lock("From P2PConnection.restartICE"));try{if(!o.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(gr().supportPCSetConfiguration){const T=o.peerConnection.getConfiguration(),b=r===ri.RELAY?"relay":"all";T.iceTransportPolicy!==b&&(U.debug("[".concat(o.store.clientId,"] restartICE change iceTransportPolicy from [").concat(T.iceTransportPolicy,"] to [").concat(b,"]")),T.iceTransportPolicy=b,o.peerConnection.setConfiguration(T))}else if(r===ri.RELAY)return;r!==ri.RELAY&&o.remoteSDP.updateCandidates(r);const l=yield Bt(o.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const h=pu(l.sdp),{remoteIceParameters:m}=yield h.iceParameters;o.remoteSDP.restartICE(m);const v=o.remoteSDP.toString(),S=o.logSDPExchange(l.sdp||"","offer","local","restartICE");o.store.descriptionStart(),yield Bt(o.peerConnection.setLocalDescription(l)),S==null||S(v),yield Bt(o.peerConnection.setRemoteDescription({type:"answer",sdp:v}))}catch(l){U.warning("[".concat(o.store.clientId,"] restart ICE failed, abort operation"),l)}finally{s()}})()}close(){var r;this.peerConnection.close(),(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,o){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const s=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(s.sdp,[o],[r]);this.remoteSDP.updateRecvMedia(r,o);const h=this.remoteSDP.toString(),m=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),m==null||m(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(s){throw new Q(z.EXCHANGE_SDP_FAILED,s.toString())}}async updateSendParameters(r,o){const s=this.peerConnection.getTransceivers().filter(l=>l.mid===r);s.length===1&&(this.isVP8Simulcast(o)?Qn()||await this.applySimulcastEncodings(s,[o]):await this.applySendEncodings(s,[o]))}setStatsRemoteVideoIsReady(r,o){this.statsFilter.setVideoIsReady2(r,o)}async replaceTrack(r,o){const s=this.peerConnection.getTransceivers().find(l=>l.mid===o);s&&await s.sender.replaceTrack(r._mediaStreamTrack)}async getSelectedCandidatePair(){const r=this.peerConnection.getReceivers();if(r.length>0&&r[0].transport&&r[0].transport.iceTransport&&r[0].transport.iceTransport.getSelectedCandidatePair&&r[0].transport.iceTransport.getSelectedCandidatePair()){const o=r[0].transport.iceTransport,{local:s,remote:l}=o.getSelectedCandidatePair();return{local:Od(Od({},rl),{},{candidateType:s.type,protocol:s.protocol,address:s.address,port:s.port}),remote:Od(Od({},rl),{},{candidateType:l.type,protocol:l.protocol,address:l.address,port:l.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,U.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,U.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},re("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const o={iceServers:[]};return r.iceServers?o.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(dp(r.turnServer.servers)?o.iceServers=r.turnServer.servers:(o.iceServers&&o.iceServers.push(...qp.turnServerConfigToIceServers(r.turnServer.servers)),re("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&r.turnServer.serversFromGateway&&o.iceServers.push(...qp.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),re("FORCE_TURN_TCP")?o.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(o.iceTransportPolicy="relay")}))),re("ENABLE_ENCODED_TRANSFORM")&&gr().supportWebRTCEncodedTransform&&(o.encodedInsertableStreams=!0),o}static turnServerConfigToIceServers(r){const o=[];return r.forEach(s=>{s.security?s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(y0(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&!re("FORCE_TURN_TCP")&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),o}tryBindTransportEvents(r){const o=r.transport;if(o){this.transportEventReceiver=r,o.onstatechange=()=>{var l;o!=null&&o.state&&((l=this.onDTLSTransportStateChange)===null||l===void 0||l.call(this,o.state))},o.onerror=l=>{var h;(h=this.onDTLSTransportError)===null||h===void 0||h.call(this,"error"in l?l.error:l)};const s=o.iceTransport;s&&(s.onstatechange=()=>{const l=o==null?void 0:o.iceTransport.state;var h;l&&((h=this.onICETransportStateChange)===null||h===void 0||h.call(this,l))},s.getSelectedCandidatePair&&(s.onselectedcandidatepairchange=()=>{if(s.getSelectedCandidatePair()){const{local:l,remote:h}=s.getSelectedCandidatePair();U.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:l.type,protocol:l.protocol}),", remote ").concat(JSON.stringify({candidateType:h.type,protocol:h.protocol,address:h.address,port:h.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async applySendEncodings(r,o){try{if(!gr().supportSetRtpSenderParameters||r.length!==o.length)return;for(let T=0;T<r.length;T++){const b=r[T],I=o[T];if(I&&I instanceof Rr){var s,l;if(this.isVP8Simulcast(I))continue;const L={},V={};switch(I._optimizationMode){case"motion":L.degradationPreference="maintain-framerate";break;case"detail":L.degradationPreference="maintain-resolution";break;default:L.degradationPreference="balanced"}var h,m,v,S;if((s=I._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&(V.maxBitrate=1e3*((h=I._encoderConfig)===null||h===void 0?void 0:h.bitrateMax)),I._hints.includes(Lr.LOW_STREAM)&&((m=I._encoderConfig)!==null&&m!==void 0&&m.frameRate&&(V.maxFramerate=mc(I._encoderConfig.frameRate)),(v=I._encoderConfig)!==null&&v!==void 0&&v.scaleResolutionDownBy&&((S=I._encoderConfig)===null||S===void 0?void 0:S.scaleResolutionDownBy)>1&&(V.scaleResolutionDownBy=I._encoderConfig.scaleResolutionDownBy)),re("DSCP_TYPE")&&Zl()){const q=re("DSCP_TYPE");["very-low","low","medium","high"].includes(q)&&(V.networkPriority=q)}const K=b.sender.getParameters(),Y=(l=K.encodings)===null||l===void 0?void 0:l[0];Qn()&&!Y&&(L.encodings=[V]),Y&&Object.assign(Y,V),Object.assign(K,L),await b.sender.setParameters(K)}}}catch{U.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(r,o,s){const l=Ir.exports.parse(r);return o.forEach((h,m)=>{const v=s[m],S=l.mediaDescriptions.find(T=>T.attributes.mid===v);S&&(wd(S,h),fL(S,h,this.store.codec))}),Ir.exports.print(l)}mungReceiveAnswerSDP(r,o,s){const l=Ir.exports.parse(r),h=l.mediaDescriptions.find(m=>m.attributes.mid===o);return h&&s===It.AUDIO&&h.media.mediaType==="audio"&&nl(h),Ir.exports.print(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var o;(o=this.onFirstAudioReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var o;(o=this.onFirstVideoReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var o;(o=this.onFirstAudioDecoded)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,o,s)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,o,s)},this.statsFilter.onSelectedLocalCandidateChanged=(r,o)=>{var s;(s=this.onSelectedLocalCandidateChanged)===null||s===void 0||s.call(this,r,o)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,o)=>{var s;(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0||s.call(this,r,o)},this.statsFilter.onFirstVideoDecodedTimeout=r=>{var o;(o=this.onFirstVideoDecodedTimeout)===null||o===void 0||o.call(this,r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(r,o){if(r.length===o.length)for(let v=0;v<r.length;v++){var s,l,h,m;const S=r[v],T=o[v];if(T instanceof Rr&&!T._hints.includes(Lr.LOW_STREAM)&&(s=T._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&((l=T._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(h=T._scalabiltyMode)!==null&&h!==void 0&&h.numSpatialLayers&&((m=T._scalabiltyMode)===null||m===void 0?void 0:m.numSpatialLayers)>1&&this.store.codec==="vp8"){const b={},I={high:1e3*(T._encoderConfig.bitrateMax-50),medium:5e4};b.encodings=[{rid:"m",active:!0,maxBitrate:I.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:I.high}];const L=S.sender.getParameters();await S.sender.setParameters(Object.assign(L,b))}}}async applySimulcastEncodings(r,o){if(!Qn()&&r.length===o.length)for(let s=0;s<r.length;s++){const l=o[s];if(l instanceof Rr&&this.isVP8Simulcast(l)){const h=r[s],m={},v={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};m.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:v.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:v.medium,scaleResolutionDownBy:4}];const S=h.sender.getParameters();await h.sender.setParameters(Object.assign(S,m))}}}isVP8Simulcast(r){var o,s,l,h;return!!(r instanceof Rr&&re("SIMULCAST")&&this.store.codec==="vp8"&&!r._hints.includes(Lr.LOW_STREAM)&&(o=r._encoderConfig)!==null&&o!==void 0&&o.bitrateMax&&((s=r._encoderConfig)===null||s===void 0?void 0:s.bitrateMax)>200&&(l=r._scalabiltyMode)!==null&&l!==void 0&&l.numSpatialLayers&&((h=r._scalabiltyMode)===null||h===void 0?void 0:h.numSpatialLayers)>1)}logSDPExchange(r,o,s,l){if(re("SDP_LOGGING"))return U.upload("[".concat(this.store.clientId,"] exchanging ").concat(s," ").concat(o," SDP during P2PConnection.").concat(l,`
`),r),o==="offer"?h=>{this.logSDPExchange(h,"answer",s==="local"?"remote":"local",l)}:void 0}async getRemoteSSRC(r){if(!this.remoteSDP)return;const o=this.remoteSDP.getSSRC(r);return o==null?void 0:o[0].ssrcId}setConfiguration(r){if(gr().supportPCSetConfiguration){const o=qp.resolvePCConfiguration(r);this.peerConnection.setConfiguration(o)}}}).prototype,"connect",[ma],Object.getOwnPropertyDescriptor(yn.prototype,"connect"),yn.prototype),_e(yn.prototype,"receive",[ma],Object.getOwnPropertyDescriptor(yn.prototype,"receive"),yn.prototype),_e(yn.prototype,"batchReceive",[ma],Object.getOwnPropertyDescriptor(yn.prototype,"batchReceive"),yn.prototype),_e(yn.prototype,"stopReceiving",[ma],Object.getOwnPropertyDescriptor(yn.prototype,"stopReceiving"),yn.prototype),_e(yn.prototype,"muteRemote",[ma],Object.getOwnPropertyDescriptor(yn.prototype,"muteRemote"),yn.prototype),_e(yn.prototype,"unmuteRemote",[ma],Object.getOwnPropertyDescriptor(yn.prototype,"unmuteRemote"),yn.prototype),_e(yn.prototype,"muteLocal",[ma],Object.getOwnPropertyDescriptor(yn.prototype,"muteLocal"),yn.prototype),_e(yn.prototype,"unmuteLocal",[ma],Object.getOwnPropertyDescriptor(yn.prototype,"unmuteLocal"),yn.prototype),_e(yn.prototype,"close",[ma],Object.getOwnPropertyDescriptor(yn.prototype,"close"),yn.prototype),_e(yn.prototype,"updateEncoderConfig",[ma],Object.getOwnPropertyDescriptor(yn.prototype,"updateEncoderConfig"),yn.prototype),_e(yn.prototype,"updateSendParameters",[ma],Object.getOwnPropertyDescriptor(yn.prototype,"updateSendParameters"),yn.prototype),_e(yn.prototype,"replaceTrack",[ma],Object.getOwnPropertyDescriptor(yn.prototype,"replaceTrack"),yn.prototype),_e(yn.prototype,"getRemoteSSRC",[ma],Object.getOwnPropertyDescriptor(yn.prototype,"getRemoteSSRC"),yn.prototype),yn);function ma(n,r,o){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,h=await l.lock("From P2PConnection.".concat(r));try{for(var m=arguments.length,v=new Array(m),S=0;S<m;S++)v[S]=arguments[S];return await s.apply(this,v)}finally{h()}},o}function kL(n,r){let o=document.createElement("video"),s=document.createElement("canvas");o.setAttribute("style","display:none"),s.setAttribute("style","display:none"),o.setAttribute("muted",""),o.muted=!0,o.setAttribute("autoplay",""),o.autoplay=!0,o.setAttribute("playsinline",""),s.width=mc(r.width),s.height=mc(r.height);const l=mc(r.framerate||15);document.body.append(o),document.body.append(s);let h=n._mediaStreamTrack;o.srcObject=new MediaStream([h]),o.play();const m=s.getContext("2d");if(!m)throw new Q(z.UNEXPECTED_ERROR,"can not get canvas context");const v=gr(),S=s.captureStream(v.supportRequestFrame?0:l).getVideoTracks()[0],T=rP(()=>(()=>{if(o.paused&&o.play(),o.videoHeight>2&&o.videoWidth>2){const I=o.videoWidth,L=o.videoHeight/I,V=s.width*L;Math.abs(V-s.height)>=2&&(U.debug("adjust low stream resolution","".concat(s.width,"x").concat(s.height," -> ").concat(s.width,"x").concat(V)),s.height=V)}m.drawImage(o,0,0,s.width,s.height),S.requestFrame&&S.requestFrame(),h!==n._mediaStreamTrack&&(h=n._mediaStreamTrack,o.srcObject=new MediaStream([h]))})(),l),b=S.stop;return S.stop=()=>{b.call(S),T(),o&&(o.remove(),o=null),s&&(s.width=0,s.remove(),s=null),U.debug("clean low stream renderer")},S}var LL,ML,UL,VL,ga,FL,BL,jL,$L,HL,WL,wi;function zL(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function V0(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?zL(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):zL(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class GL extends Zx{getUserId(){return this._userId}constructor(r,o,s,l){super(r,"track-".concat(r.kind,"-").concat(o,"-").concat(l.clientId,"_").concat(jn(5,""))),N(this,"_userId",void 0),N(this,"_uintId",void 0),N(this,"_isDestroyed",!1),N(this,"store",void 0),N(this,"processor",void 0),N(this,"processorContext",void 0),this._userId=o,this._uintId=s,this.store=l}_updateOriginMediaStreamTrack(r){this._originMediaStreamTrack=r,this._mediaStreamTrack=r,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,U.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let F0=(LL=rt({argsMap:(n,r,o)=>[n.getTrackId(),typeof r=="string"?r:r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",o]}),ML=rt({argsMap:n=>[n.getTrackId()]}),UL=rt({argsMap:(n,r)=>[n.getTrackId(),r.name]}),VL=rt({argsMap:n=>[n.getTrackId()]}),_e((ga=class extends GL{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==pi.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(n,r,o,s){super(n,r,o,s),N(this,"_videoVisibleTimer",null),N(this,"_previousVideoVisibleStatus",void 0),N(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),N(this,"trackMediaType","video"),N(this,"_videoWidth",void 0),N(this,"_videoHeight",void 0),N(this,"_player",void 0),N(this,"processorDestination",void 0),N(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new fP(this.getTrackId(),"remote"),this.processorDestination=new pP(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return mp(()=>{U.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),fs(this,dt.GET_STATS)||V0({},Px)}play(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof n=="string"){const s=document.getElementById(n);s?n=s:(U.warning("[".concat(this.getTrackId(),'] can not find "#').concat(n,'" element, use document.body')),n=document.body)}U.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(r));const o=V0(V0({fit:"cover"},r),{},{trackId:this.getTrackId(),element:n});this._player?this._player.updateConfig(o):(n instanceof HTMLVideoElement?this._player=new yC(o):this._player=new YD(o),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.emit(md.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const s=this.getVideoElementVisibleStatus();this.emit(md.VIDEO_ELEMENT_VISIBLE_STATUS,s)}catch{}},re("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,U.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){uD(this._originMediaStreamTrack).then(n=>{let[r,o]=n;this._videoHeight=o,this._videoWidth=r}).catch(b0)}_updatePlayerSource(){U.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var n,r;const o=this==null||(n=this._player)===null||n===void 0?void 0:n.getContainerElement(),s={track:this,element:this==null||(r=this._player)===null||r===void 0?void 0:r.getVideoElement(),slot:o==null?void 0:o.parentElement},{element:l,slot:h}=s;if(this.isPlaying&&l instanceof HTMLVideoElement&&h instanceof HTMLElement){const m=Ok.checkOneElementVisible(l),v=Object.assign({},m);if(v.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=v.visible;const S=Je.reportApiInvoke(null,{tag:Yn.TRACER,name:Or.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});v.visible?S.onSuccess("Video is visible"):S.onSuccess("Invisible because of ".concat(v.reason))}return v}return}catch(o){throw new Q(z.GET_VIDEO_ELEMENT_VISIBLE_ERROR,o.message)}}pipe(n){if(this.processor===n)return n;if(n._source)throw new Q(z.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),n}unpipe(){if(!this.processor)return;const n=this.processor;this.processor._source=void 0,this.processor=void 0,n.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(gi.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(gi.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}}).prototype,"play",[LL],Object.getOwnPropertyDescriptor(ga.prototype,"play"),ga.prototype),_e(ga.prototype,"stop",[ML],Object.getOwnPropertyDescriptor(ga.prototype,"stop"),ga.prototype),_e(ga.prototype,"pipe",[UL],Object.getOwnPropertyDescriptor(ga.prototype,"pipe"),ga.prototype),_e(ga.prototype,"unpipe",[VL],Object.getOwnPropertyDescriptor(ga.prototype,"unpipe"),ga.prototype),ga),B0=(FL=rt({argsMap:(n,r)=>[n.getTrackId(),r],throttleTime:300}),BL=rt({argsMap:(n,r)=>[n.getTrackId(),r]}),jL=rt({argsMap:n=>[n.getTrackId()]}),$L=rt({argsMap:n=>[n.getTrackId()]}),HL=rt({argsMap:(n,r)=>[n.getTrackId(),r.name]}),WL=rt({argsMap:n=>[n.getTrackId()]}),_e((wi=class extends GL{get isPlaying(){return this._useAudioElement?bo.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(n,r,o,s){super(n,r,o,s),N(this,"trackMediaType","audio"),N(this,"_source",void 0),N(this,"_useAudioElement",!0),N(this,"_volume",100),N(this,"processorContext",void 0),N(this,"processorDestination",void 0),N(this,"_played",!1),N(this,"_bypassWebAudio",!1),re("DISABLE_WEBAUDIO")?(this._source=new aC,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new rC(n,!0),re("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(oo.RECEIVE_TRACK_BUFFER,()=>{this.emit(md.FIRST_FRAME_DECODED)}),this.processorContext=new gP(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new mP(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(oo.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!n)return this._source.removeAllListeners(oo.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(r),this._source.removeAllListeners(oo.ON_AUDIO_BUFFER),this._source.on(oo.ON_AUDIO_BUFFER,o=>n(o))}setVolume(n){this._volume=n,this._useAudioElement?bo.setVolume(this.getTrackId(),n):this._source.setVolume(n/100)}async setPlaybackDevice(n){if(!this._useAudioElement)throw new Q(z.NOT_SUPPORTED,"your browser does not support setting the audio output device");await bo.setSinkID(this.getTrackId(),n)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return mp(()=>{U.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),fs(this,dt.GET_STATS)||V0({},xx)}play(){U.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(U.debug("[".concat(this.getTrackId(),"] use audio element to play")),bo.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){U.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?bo.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];U.debug("[".concat(this.getTrackId(),"] update player source track")),n&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&bo.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(n){if(this._bypassWebAudio)throw new Q(z.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===n)return n;if(n._source)throw new Q(z.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),n}unpipe(){var n;if(this._bypassWebAudio)throw new Q(z.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const r=this.processor;(n=this._source.processSourceNode)===null||n===void 0||n.disconnect(),this.processor._source=!1,this.processor=void 0,r.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(gi.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(n)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(gi.ON_NODE,n=>{this._source.processedNode=n;const r=!n;this._useAudioElement!==r&&(this._played?(this.stop(),this._useAudioElement=r,this.play()):this._useAudioElement=r)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(gi.ON_TRACK),this.processorDestination.removeAllListeners(gi.ON_NODE)}}).prototype,"setVolume",[FL],Object.getOwnPropertyDescriptor(wi.prototype,"setVolume"),wi.prototype),_e(wi.prototype,"setPlaybackDevice",[BL],Object.getOwnPropertyDescriptor(wi.prototype,"setPlaybackDevice"),wi.prototype),_e(wi.prototype,"play",[jL],Object.getOwnPropertyDescriptor(wi.prototype,"play"),wi.prototype),_e(wi.prototype,"stop",[$L],Object.getOwnPropertyDescriptor(wi.prototype,"stop"),wi.prototype),_e(wi.prototype,"pipe",[HL],Object.getOwnPropertyDescriptor(wi.prototype,"pipe"),wi.prototype),_e(wi.prototype,"unpipe",[WL],Object.getOwnPropertyDescriptor(wi.prototype,"unpipe"),wi.prototype),wi);function KL(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function YL(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?KL(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):KL(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}class rX extends Zn{constructor(){super(),N(this,"uplinkStatsUploadInterval",void 0),N(this,"uplinkRelatedStatsUploadInterval",void 0),N(this,"uplinkDenoiserStatsUploadInterval",void 0),N(this,"transportStatsUploadInterval",void 0),N(this,"uplinkExtensionStatsUploadInterval",void 0),N(this,"downlinkExtensionStatsUploadInterval",void 0),N(this,"extensionUsageStatsUploadInterval",void 0),N(this,"downlinkStatsUploadInterval",void 0),N(this,"downlinkRelatedStatsUploadInterval",void 0),N(this,"lastStats",void 0),N(this,"uploadUnplinkStarted",!1),N(this,"uploadDownlinkStarted",!1),N(this,"uploadTransportStarted",!1),N(this,"uploadExtensionUsageStarted",!1),N(this,"requestStats",void 0),N(this,"requestLocalMedia",void 0),N(this,"requestRemoteMedia",void 0),N(this,"requestAllTracks",void 0),N(this,"requestVideoIsReady",void 0),N(this,"requestUpload",void 0)}startUploadTransportStats(){this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval(()=>{var r;const o=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);o&&this.uploadTransportStats(o)},1e3))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval);const r=new Map;this.extensionUsageStatsUploadInterval=window.setInterval(async()=>{var o,s,l;const h=Date.now(),m={connectionInterval:re("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:h};let v=[];const S=((o=this.requestAllTracks)===null||o===void 0?void 0:o.call(this))||[];for(const L of S)!L.muted&&L.enabled&&(v=v.concat(await L.getProcessorUsage()));const T=((s=this.requestRemoteMedia)===null||s===void 0?void 0:s.call(this))||[];for(const[L,V]of T)V.has(It.VIDEO)&&L.videoTrack&&(v=v.concat(await L.videoTrack.getProcessorUsage())),V.has(It.AUDIO)&&L.audioTrack&&(v=v.concat(await L.audioTrack.getProcessorUsage()));if(v.length===0)return;m.details=function(L,V){const K={};for(const{id:me,value:ye,level:qe,direction:Te}of L){var Y;const xe=(Y=V.get(me))!==null&&Y!==void 0?Y:0,Ce=ye===2?xe+re("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:xe;var q,ue;V.set(me,Ce),K[me]?(ye===2&&(K[me].value=ye),qe>K[me].level&&(K[me].level=qe),Te==="remote"&&(K[me].remoteUidCount+=1),K[me].totalTs=(q=V.get(me))!==null&&q!==void 0?q:0):K[me]={value:ye,level:qe,remoteUidCount:Te==="local"?0:1,totalTs:(ue=V.get(me))!==null&&ue!==void 0?ue:0}}return Object.keys(K).map(me=>{const{level:ye,value:qe,totalTs:Te}=K[me];return{id:me,level:ye,value:qe,totalTs:Te}})}(v,r);const b=Date.now(),I=b>h?b:h+1;(l=this.requestUpload)===null||l===void 0||l.call(this,Co.EXTENSION_USAGE_STATS,{usageStats:m,sendTs:I})},re("EXTENSION_USAGE_UPLOAD_INTERVAL"))}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var r;const o=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);o&&(this.uploadUplinkStats(o),this.lastStats=o)},3e3),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var r;const o=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);o&&this.uploadRelatedUplinkStats(o,this.lastStats),this.lastStats=o},1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval(()=>{var r;const o=(r=this.requestAllTracks)===null||r===void 0?void 0:r.call(this);o&&this.uploadDenoiserStats(o)},2e3),this.uplinkExtensionStatsUploadInterval&&window.clearInterval(this.uplinkExtensionStatsUploadInterval),this.uplinkExtensionStatsUploadInterval=window.setInterval(()=>{var r;const o=(r=this.requestAllTracks)===null||r===void 0?void 0:r.call(this);o&&this.uploadExtensionStats(o)},2e3))}uploadTransportStats(r){ms(()=>{var o;(o=this.requestUpload)===null||o===void 0||o.call(this,Co.TRANSPORT_STATS,function(s){const l={connectionType:100,googRtt:s.rtt};if(s.selectedCandidatePair.localCandidate.candidateType==="relay"){const h=s.selectedCandidatePair.localCandidate.relayProtocol;h==="udp"&&(l.connectionType=101),h==="tcp"&&(l.connectionType=103),h==="tls"&&(l.connectionType=104)}return l}(r))})}uploadUplinkStats(r){var o;(((o=this.requestLocalMedia)===null||o===void 0?void 0:o.call(this))||[]).forEach(s=>{let[l,{track:h,ssrcs:m}]=s;switch(l){case We.LocalVideoLowTrack:case We.LocalVideoTrack:{const v=function(b,I,L){var V;const K=I.videoSend.find(q=>q.ssrc===b);if(!K)return null;const Y={id:jn(10,""),timestamp:new Date(I.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:K.ssrc.toString()};switch(Y.A_vstd=L._originMediaStreamTrack&&!L._originMediaStreamTrack.enabled||L._mediaStreamTrack&&!L._mediaStreamTrack.enabled?"1":"0",K.sentFrame&&(Y.A_fhs=K.sentFrame.height.toString(),Y.A_frs=K.sentFrame.frameRate.toString(),Y.A_fws=K.sentFrame.width.toString()),K.adaptionChangeReason){case"none":Y.A_ac="0";break;case"cpu":Y.A_ac="1";break;case"bandwidth":Y.A_ac="2";break;case"other":Y.A_ac="3"}return Y.A_lvps=Vy[L._player?L._player.videoElementStatus:"uninit"].toString(),Y.A_nr=(V=K.nacksCount)===null||V===void 0?void 0:V.toString(),K.avgEncodeMs&&(Y.A_aem=K.avgEncodeMs.toFixed(0).toString()),Y}(m[0].ssrcId,r,h),S=l===We.LocalVideoTrack?function(b,I,L){var V,K,Y,q,ue,me,ye,qe;const Te=I.videoSend.find(bt=>bt.ssrc===b);if(!Te)return null;const xe={id:jn(10,""),timestamp:new Date(I.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:Te.ssrc.toString()},Ce=(V=(K=(Y=Te.inputFrame)===null||Y===void 0?void 0:Y.height)!==null&&K!==void 0?K:L==null?void 0:L._videoHeight)!==null&&V!==void 0?V:0,Fe=(q=(ue=(me=Te.inputFrame)===null||me===void 0?void 0:me.width)!==null&&ue!==void 0?ue:L==null?void 0:L._videoWidth)!==null&&q!==void 0?q:0,fn=(ye=(qe=Te.inputFrame)===null||qe===void 0?void 0:qe.frameRate)!==null&&ye!==void 0?ye:0;return Ce&&(xe.A_fhi=Ce+""),Fe&&(xe.A_fwi=Fe+""),fn&&(xe.A_fri=fn+""),xe}(m[0].ssrcId,r,h):null;v&&ms(()=>{var b;return(b=this.requestUpload)===null||b===void 0?void 0:b.call(this,Co.PUBLISH_STATS,{stream_type:l===We.LocalVideoLowTrack?"low":"high",stats:YL(YL({},v),S)})});const T=function(b){const I={id:"bweforvideo",timestamp:new Date(b.timestamp).toISOString(),type:"VideoBwe"};return b.bitrate.retransmit&&(I.A_rb=b.bitrate.retransmit.toString()),b.bitrate.targetEncoded&&(I.A_teb=b.bitrate.targetEncoded.toString()),I.A_aeb=b.bitrate.actualEncoded.toString(),I.A_tb=b.bitrate.transmit.toString(),b.sendBandwidth!==void 0&&(I.A_asb=b.sendBandwidth.toString()),I}(r);T&&setTimeout(()=>{var b;return(b=this.requestUpload)===null||b===void 0?void 0:b.call(this,Co.PUBLISH_STATS,{stream_type:l===We.LocalVideoLowTrack?"low":"high",stats:T})},1e3);break}case We.LocalAudioTrack:{const v=function(S,T,b){const I=T.audioSend.find(V=>V.ssrc===S);if(!I)return null;const L={id:jn(10,""),timestamp:new Date(T.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:I.ssrc.toString()};return L.A_astd=b._originMediaStreamTrack&&!b._originMediaStreamTrack.enabled||b._mediaStreamTrack&&!b._mediaStreamTrack.enabled?"1":"0",I.inputLevel?L.A_ail=Math.round(100*I.inputLevel).toString():L.A_ail=Math.round(100*b._source.getAccurateVolumeLevel()).toString(),L.A_apil=Math.round(100*b._source.getAccurateVolumeLevel()).toString(),I.aecReturnLoss&&(L.A_ecrl=Math.round(I.aecReturnLoss).toString()),I.aecReturnLossEnhancement&&(L.A_ecrle=Math.round(I.aecReturnLossEnhancement).toString()),L}(m[0].ssrcId,r,h);v&&ms(()=>{var S;return(S=this.requestUpload)===null||S===void 0?void 0:S.call(this,Co.PUBLISH_STATS,{stream_type:"high",stats:v})});break}}})}uploadRelatedUplinkStats(r,o){var s;(((s=this.requestLocalMedia)===null||s===void 0?void 0:s.call(this))||[]).filter(l=>{let[h]=l;return h===We.LocalVideoLowTrack||h===We.LocalVideoTrack}).forEach(l=>{let[h,{ssrcs:m}]=l;const v=function(S,T){const b=T.videoSend.find(I=>I.ssrc===S);return b?{mediaType:"video",isVideoMute:!1,frameRateInput:b.inputFrame&&b.inputFrame.frameRate.toString(),frameRateSent:b.sentFrame&&b.sentFrame.frameRate.toString(),googRtt:b.rttMs.toString(),qpSumPerFrame:Math.floor(b.qpSumPerFrame).toString()}:null}(m[0].ssrcId,r);v&&ms(()=>{var S;(S=this.requestUpload)===null||S===void 0||S.call(this,Co.PUBLISH_RELATED_STATS,{stream_type:h===We.LocalVideoLowTrack?"low":"high",stats:v})})})}uploadDenoiserStats(r){for(let h=0;h<r.length;h++){const m=r[h];if(m instanceof _0){var o,s,l;const v=(o=(s=m._external).getDenoiserStats)===null||o===void 0?void 0:o.call(s);return void(v&&((l=this.requestUpload)===null||l===void 0||l.call(this,Co.DENOISER_STATS,v)))}}}uploadExtensionStats(r){for(let o=0;o<r.length;o++)r[o].getProcessorStats().forEach(s=>{var l;(l=this.requestUpload)===null||l===void 0||l.call(this,s.type,s.stats)})}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}startUploadDownlinkStats(){if(this.uploadDownlinkStarted)return;let r;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);let o=!1;this.downlinkStatsUploadInterval=window.setInterval(()=>{var s;const l=(s=this.requestStats)===null||s===void 0?void 0:s.call(this);l&&(this.uploadDownlinkStats(l,o,r),r=l),o=!o},3e3),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var s;const l=(s=this.requestStats)===null||s===void 0?void 0:s.call(this);l&&(this.uploadRelatedDownlinkStats(l,this.lastStats),this.lastStats=l)},1e3),this.downlinkExtensionStatsUploadInterval&&window.clearInterval(this.downlinkExtensionStatsUploadInterval),this.downlinkExtensionStatsUploadInterval=window.setInterval(()=>{var s;const l=(s=this.requestRemoteMedia)===null||s===void 0?void 0:s.call(this);l&&this.uploadDownlinkExtensionStats(l)},2e3)}uploadDownlinkStats(r,o,s){var l;(((l=this.requestRemoteMedia)===null||l===void 0?void 0:l.call(this))||[]).forEach(h=>{let[m,v]=h;if(v.has(It.VIDEO)&&m.videoTrack){const S=m.videoTrack?function(T,b,I,L,V){const K=b.videoRecv.find(me=>me.ssrc===T);if(!K)return null;const Y={id:jn(10,""),timestamp:new Date(b.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:K.ssrc.toString()};var q,ue;if(Y.bytesReceived=K.bytes.toString(),Y.packetsLost=K.packetsLost.toString(),Y.packetsReceived=K.packets.toString(),K.framesRateFirefox&&(Y.A_frr=K.framesRateFirefox.toString()),K.receivedFrame?(Y.A_frr=K.receivedFrame.frameRate.toString(),Y.A_fhr=K.receivedFrame.height.toString(),Y.A_fwr=K.receivedFrame.width.toString()):(Y.A_fhr=(q=L._videoHeight)===null||q===void 0?void 0:q.toString(),Y.A_fwr=(ue=L._videoWidth)===null||ue===void 0?void 0:ue.toString()),Y.A_frd=K.decodeFrameRate.toString(),K.outputFrame&&(Y.A_fro=K.outputFrame.frameRate.toString()),K.jitterBufferMs!==void 0&&(Y.A_jbm=Math.floor(K.jitterBufferMs).toString()),K.currentDelayMs!==void 0&&(Y.A_cdm=Math.floor(K.currentDelayMs).toString()),Y.A_fs=K.firsCount.toString(),Y.A_ns=K.nacksCount.toString(),Y.A_ps=K.plisCount.toString(),L&&(Y.A_vrtd=L._originMediaStreamTrack.enabled&&L._mediaStreamTrack.enabled?"0":"1"),L._player&&L._player.freezeTimeCounterList.length>0&&(Y.A_vrft=Math.round(L._player.freezeTimeCounterList.splice(0,1)[0]).toString()),V&&L._player&&fc.visibility==="visible"){const me=Math.min(6e3,L._player.renderFreezeAccTime);Y.A_vrrft=Math.round(me).toString(),L._player.renderFreezeAccTime=Math.max(0,L._player.renderFreezeAccTime-me)}if(Y.A_rvps=Vy[L._player?L._player.videoElementStatus:"uninit"].toString(),I){const me=I.videoRecv.find(ye=>ye.ssrc===T);if(me&&K.totalInterFrameDelay!==void 0&&K.totalSquaredInterFrameDelay!==void 0&&me.totalInterFrameDelay!==void 0&&me.totalSquaredInterFrameDelay!==void 0){const ye=K.totalInterFrameDelay-me.totalInterFrameDelay,qe=K.totalSquaredInterFrameDelay-me.totalSquaredInterFrameDelay,Te=K.framesDecodeCount-me.framesDecodeCount,xe=ye/Te*1e3,Ce=Math.round(1e3*Math.sqrt((qe-Math.pow(ye,2)/Te)/Te));!isNaN(Ce)&&xe+Ce>Math.max(3*xe,xe+150)&&(Y.A_ifdsd=Ce.toString())}}return Y}(m._videoSSRC,r,s,m.videoTrack,o):void 0;S&&ms(()=>{var T;return(T=this.requestUpload)===null||T===void 0?void 0:T.call(this,Co.SUBSCRIBE_STATS,{stream_id:m.uid,stats:S})})}if(v.has(It.AUDIO)&&m.audioTrack){const S=m.audioTrack?function(T,b,I,L){const V=b.audioRecv.find(Y=>Y.ssrc===T);if(!V)return null;const K={id:jn(10,""),timestamp:new Date(b.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:V.ssrc.toString()};if(K.bytesReceived=V.bytes.toString(),K.packetsLost=V.packetsLost.toString(),K.packetsReceived=V.packets.toString(),V.outputLevel?K.A_aol=Math.round(100*V.outputLevel).toString():K.A_aol=Math.round(100*L._source.getAccurateVolumeLevel()).toString(),K.A_apol=Math.round(100*L._source.getAccurateVolumeLevel()).toString(),L&&(K.A_artd=L._originMediaStreamTrack.enabled&&L._mediaStreamTrack.enabled?"0":"1"),K.A_jr=V.jitterMs.toString(),K.A_jbm=Math.floor(V.jitterBufferMs).toString(),K.A_cdm=Math.floor(V.jitterBufferMs).toString(),K.A_raps=Vy[bo.getPlayerState(L.getTrackId())].toString(),I){const Y=I.audioRecv.find(q=>q.ssrc===T);if(Y){const q=V.concealedSamples-Y.concealedSamples;q>0&&(K.A_cs=Math.round(q).toString())}}return K}(m._audioSSRC,r,s,m.audioTrack):void 0;S&&ms(()=>{var T;return(T=this.requestUpload)===null||T===void 0?void 0:T.call(this,Co.SUBSCRIBE_STATS,{stream_id:m.uid,stats:S})})}})}uploadRelatedDownlinkStats(r,o){var s;(((s=this.requestRemoteMedia)===null||s===void 0?void 0:s.call(this))||[]).forEach(l=>{let[h,m]=l;if(m.has(It.VIDEO)&&h.videoTrack){var v;const S=(h._videoSSRC&&((v=this.requestVideoIsReady)===null||v===void 0?void 0:v.call(this,h._videoSSRC))||!1)===!0,T=function(b,I,L,V,K,Y){const q=L.videoRecv.find(qe=>qe.ssrc===b),ue=K?K.videoRecv.find(qe=>qe.ssrc===b):void 0;if(!q)return null;const me=Sd.isRemoteVideoFreeze(Y,q,ue)&&I,ye={mediaType:"video",isVideoMute:!1,peerId:V,frameRateReceived:q.receivedFrame&&q.receivedFrame.frameRate.toString(),frameRateDecoded:q.decodedFrame&&q.decodedFrame.frameRate.toString(),isFreeze:me,bytesReceived:q.bytes.toString(),packetsReceived:q.packets.toString(),packetsLost:q.packetsLost.toString(),qpSumPerFrame:Math.floor(q.qpSumPerFrame).toString()};return q.framesRateFirefox&&(ye.frameRateDecoded=q.framesRateFirefox.toString(),ye.frameRateReceived=q.framesRateFirefox.toString()),ye}(h._videoSSRC,S,r,h.uid,o,h.videoTrack);T&&ms(()=>{var b;(b=this.requestUpload)===null||b===void 0||b.call(this,Co.SUBSCRIBE_RELATED_STATS,{stream_id:h.uid,stats:T})})}if(m.has(It.AUDIO)&&h.audioTrack){const S=function(T,b,I,L){const V=b.audioRecv.find(Y=>Y.ssrc===T);if(!V)return null;const K=Sd.isRemoteAudioFreeze(L);return{mediaType:"audio",isAudioMute:!1,peerId:I,googJitterReceived:V.jitterMs.toString(),isFreeze:K,bytesReceived:V.bytes.toString(),packetsReceived:V.packets.toString(),packetsLost:V.packetsLost.toString(),frameReceived:V.receivedFrames.toString(),frameDropped:V.droppedFrames.toString()}}(h._audioSSRC,r,h.uid,h.audioTrack);S&&ms(()=>{var T;(T=this.requestUpload)===null||T===void 0||T.call(this,Co.SUBSCRIBE_RELATED_STATS,{stream_id:h.uid,stats:S})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}stopUploadTransportStats(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval),this.extensionUsageStatsUploadInterval=void 0)}uploadDownlinkExtensionStats(r){r.forEach(o=>{let[s,l]=o;l.has(It.VIDEO)&&s.videoTrack&&s.videoTrack.getProcessorStats().forEach(h=>{var m;(m=this.requestUpload)===null||m===void 0||m.call(this,h.type,h.stats)}),l.has(It.AUDIO)&&s.audioTrack&&s.audioTrack.getProcessorStats().forEach(h=>{var m;(m=this.requestUpload)===null||m===void 0||m.call(this,h.type,h.stats)})})}}function qL(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function XL(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?qL(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):qL(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}const JL=`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0
a=msid-semantic: WMS
a=ice-lite
m=application 9 UDP/DTLS/SCTP webrtc-datachannel
c=IN IP4 127.0.0.1
a=mid:0
`,j0="9",KC=2e4,YC=4e4;class iX{get localCapabilities(){return Tr(this._localCapabilities)}get rtpCapabilities(){return Tr(this._rtpCapabilities)}get candidates(){return Tr(this._candidates)}get iceParameters(){return Tr(this._iceParameters)}get dtlsParameters(){return Tr(this._dtlsParameters)}constructor(r){N(this,"sessionDesc",void 0),N(this,"_localCapabilities",void 0),N(this,"_rtpCapabilities",void 0),N(this,"_candidates",void 0),N(this,"_iceParameters",void 0),N(this,"_dtlsParameters",void 0),N(this,"setup",void 0),N(this,"currentMidIndex",void 0),N(this,"cname",void 0),N(this,"firefoxSsrcMidMap",new Map),r=Tr(r);const{remoteIceParameters:o,remoteDtlsParameters:s,candidates:l,remoteRTPCapabilities:h,remoteSetup:m,localCapabilities:v,cname:S}=r,T=Ir.exports.parse(JL);this._rtpCapabilities=h,this._candidates=l,this._iceParameters=o,this._dtlsParameters=s,this._localCapabilities=v,this.setup=m,this.cname=S;const b=this.rtpCapabilities.send;for(const I of T.mediaDescriptions){if(I.attributes.iceUfrag=o.iceUfrag,I.attributes.icePwd=o.icePwd,I.attributes.fingerprints=s.fingerprints,I.attributes.candidates=l,I.attributes.setup=m,I.media.mediaType==="application"&&(I.attributes.sctpPort="5000"),I.media.mediaType==="video"&&(I.media.fmts=b.videoCodecs.map(L=>L.payloadType.toString(10)),I.attributes.payloads=b.videoCodecs,I.attributes.extmaps=b.videoExtensions,re("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:L,ssrcGroups:V}=pa([{ssrcId:YC,rtx:re("USE_SUB_RTX")?40001:void 0}],this.cname);I.attributes.ssrcs=L,I.attributes.ssrcGroups=V}if(I.media.mediaType==="audio"&&(I.media.fmts=b.audioCodecs.map(L=>L.payloadType.toString(10)),I.attributes.payloads=b.audioCodecs,I.attributes.extmaps=b.audioExtensions,nl(I),re("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:L,ssrcGroups:V}=pa([{ssrcId:KC}],this.cname);I.attributes.ssrcs=L,I.attributes.ssrcGroups=V}}this.sessionDesc=T,this.currentMidIndex=T.mediaDescriptions.length-1}updateRemoteRTPCapabilities(r){const o=Ir.exports.parse(JL);this._rtpCapabilities=r;const s=this.rtpCapabilities.send;for(const l of o.mediaDescriptions){if(l.attributes.iceUfrag=this._iceParameters.iceUfrag,l.attributes.icePwd=this._iceParameters.icePwd,l.attributes.fingerprints=this._dtlsParameters.fingerprints,l.attributes.candidates=this._candidates,l.attributes.setup=this.setup,l.media.mediaType==="application"&&(l.attributes.sctpPort="5000"),l.media.mediaType==="video"&&(l.media.fmts=s.videoCodecs.map(h=>h.payloadType.toString(10)),l.attributes.payloads=s.videoCodecs,l.attributes.extmaps=s.videoExtensions,re("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:h,ssrcGroups:m}=pa([{ssrcId:YC,rtx:re("USE_SUB_RTX")?40001:void 0}],this.cname);l.attributes.ssrcs=h,l.attributes.ssrcGroups=m}if(l.media.mediaType==="audio"&&(l.media.fmts=s.audioCodecs.map(h=>h.payloadType.toString(10)),l.attributes.payloads=s.audioCodecs,l.attributes.extmaps=s.audioExtensions,re("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:h,ssrcGroups:m}=pa([{ssrcId:KC}],this.cname);l.attributes.ssrcs=h,l.attributes.ssrcGroups=m}}this.sessionDesc=o,this.currentMidIndex=o.mediaDescriptions.length-1}preloadRemoteMedia(r){this.rtpCapabilities;const o=this.candidates,s=this.dtlsParameters,l=this.iceParameters,h=this.rtpCapabilities.send;for(let m=1;m<r;m++){const v=2*m+KC,S=2*m+YC,{ssrcs:T,ssrcGroups:b}=pa([{ssrcId:v}],this.cname),{ssrcs:I,ssrcGroups:L}=pa([{ssrcId:S,rtx:re("USE_SUB_RTX")?S+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:j0,protos:["UDP","TLS","RTP","SAVPF"],fmts:h.videoCodecs.map(V=>V.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:o,extmaps:h.videoExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:I,ssrcGroups:L,rtcpFeedbackWildcards:[],payloads:h.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*m-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:j0,protos:["UDP","TLS","RTP","SAVPF"],fmts:h.audioCodecs.map(V=>V.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:o,extmaps:h.audioExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:T,ssrcGroups:b,rtcpFeedbackWildcards:[],payloads:h.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*m)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return Ir.exports.print(this.sessionDesc)}send(r,o,s,l){const{ssrcs:h,ssrcGroups:m}=pa(o,this.cname,re("SYNC_GROUP")?s:void 0),v=this.findPreloadMediaDesc(h);if(v){if(Qn()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,v.attributes.mid),l&&(l.twcc||l.remb)){const S=this.sessionDesc.mediaDescriptions.indexOf(v);return this.sessionDesc.mediaDescriptions[S]=this.mungSendMediaDesc(v,l),{mid:v.attributes.mid,needExchangeSDP:!0}}return{mid:v.attributes.mid,needExchangeSDP:!1}}{const S=this.findAvailableMediaIndex(r,h);let T;return S===-1||Di()||ki()||wN()||S===0&&re("USE_SUB_RTX")?(T=this.createOrRecycleSendMedia(r,h,m,"sendonly",l),this.updateBundleMids()):(T=Tr(this.sessionDesc.mediaDescriptions[S]),T.attributes.direction="sendonly",T.attributes.ssrcs=h,T.attributes.ssrcGroups=m,this.sessionDesc.mediaDescriptions[S]=this.mungSendMediaDesc(T,l)),Qn()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,T.attributes.mid),{mid:T.attributes.mid,needExchangeSDP:!0}}}batchSend(r){const o=r.map(h=>{let{kind:m,ssrcMsg:v,mslabel:S}=h;return this.send(m,v,S)}),s=[];let l=!1;return o.forEach(h=>{let{mid:m,needExchangeSDP:v}=h;v&&(l=!0),s.push(m)}),{mids:s,needExchangeSDP:l}}stopSending(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>s.attributes.mid&&r.indexOf(s.attributes.mid)!==-1);if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");o.forEach(s=>{s.attributes.mid==="0"||Qn()||Di()||ki()?s.attributes.ssrcs=[]:(s.attributes.ssrcs=[],s.attributes.direction="inactive",s.media.port="0")}),this.updateBundleMids()}mute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));o.attributes.direction="inactive"}unmute(r){const o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!o)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));o.attributes.direction="sendonly"}muteRemote(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(s=>{s.attributes.direction="inactive"})}unmuteRemote(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(o.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");o.forEach(s=>{s.attributes.direction="recvonly"})}receive(r,o,s,l){r.forEach((h,m)=>{this.createOrRecycleRecvMedia(h,[],"recvonly",o,s,l[m])}),this.updateBundleMids()}stopReceiving(r){const o=this.sessionDesc.mediaDescriptions.filter(s=>r.indexOf(s.attributes.mid)!==-1);if(o.length!==r.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");o.forEach(s=>{s.media.port="0",s.attributes.direction="inactive"}),this.updateBundleMids()}updateCandidates(r){r===ri.TCP?this._candidates.forEach(o=>{this._candidates.findIndex(s=>s.transport==="tcp"&&s.connectionAddress===o.connectionAddress&&s.port===o.port)===-1&&this._candidates.push(XL(XL({},o),{},{foundation:"tcpcandidate",priority:Number(o.priority)-1+"",transport:"tcp",port:Number(o.port)+90+""}))}):this._candidates=this._candidates.filter(o=>o.transport!=="tcp");for(const o of this.sessionDesc.mediaDescriptions)o.attributes.candidates=this.candidates}restartICE(r){r=Tr(r),this._iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(o=>{o.attributes.iceUfrag=r.iceUfrag,o.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const o=[];for(let s=0;s<r;s++)o.push((this.currentMidIndex+s+1).toString(10));return o}findAvailableMediaIndex(r,o){return this.sessionDesc.mediaDescriptions.findIndex(s=>{const l=s.media.mediaType===r&&s.media.port!=="0"&&(s.attributes.direction==="sendonly"||s.attributes.direction==="sendrecv")&&s.attributes.ssrcs.length===0;if(Qn()){if(l){const h=this.firefoxSsrcMidMap.get(o[0].ssrcId);return!(h||s.attributes.mid!=="0"&&s.attributes.mid!=="1")||!(!h||h!==s.attributes.mid)}return!1}return l})}createOrRecycleRecvMedia(r,o,s,l,h,m){const v=r._mediaStreamTrack.kind,S=this.rtpCapabilities.recv,T=this.localCapabilities.send;let b=[];if(v===It.VIDEO){var I,L;if(re("H264_PROFILE_LEVEL_ID")&&l==="h264"&&(b=S.videoCodecs.filter(ue=>{var me,ye;return(((me=ue.rtpMap)===null||me===void 0?void 0:me.encodingName.toLowerCase())||"").includes(l)&&(ue==null||(ye=ue.fmtp)===null||ye===void 0?void 0:ye.parameters["profile-level-id"])===re("H264_PROFILE_LEVEL_ID")})),!b||((I=b)===null||I===void 0?void 0:I.length)===0){const ue=T.videoCodecs.filter(me=>{var ye;return(((ye=me.rtpMap)===null||ye===void 0?void 0:ye.encodingName.toLowerCase())||"").includes(l)});ue.length!==0&&(b=S.videoCodecs.filter(me=>ue.some(ye=>ye.payloadType===me.payloadType)))}if(re("USE_PUB_RTX")){const ue=b.map(ye=>ye.payloadType.toString()),me=S.videoCodecs.filter(ye=>{var qe,Te;return((qe=ye.rtpMap)===null||qe===void 0?void 0:qe.encodingName)==="rtx"&&ue.includes(((Te=ye.fmtp)===null||Te===void 0?void 0:Te.parameters.apt)||"")});b=[...b,...me]}b.length===0&&(U.warning("codec ".concat(l," not included in rtpCapabilities, fallback to default payloads: ").concat((L=S.videoCodecs[0].rtpMap)===null||L===void 0?void 0:L.encodingName)),b=S.videoCodecs)}else b=S.audioCodecs.filter(ue=>{var me;return(((me=ue.rtpMap)===null||me===void 0?void 0:me.encodingName.toLowerCase())||"").includes(h)}),b.length===0&&(U.warning("codec ".concat(h," not included in rtpCapabilities, fallback to opus")),b=S.audioCodecs.filter(ue=>{var me;return(((me=ue.rtpMap)===null||me===void 0?void 0:me.encodingName.toLowerCase())||"").includes("opus")}));const V=v===It.VIDEO?S.videoExtensions:S.audioExtensions;this.currentMidIndex+=1;const K="".concat(this.currentMidIndex);let Y={media:{mediaType:v,port:j0,protos:["UDP","TLS","RTP","SAVPF"],fmts:b.map(ue=>ue.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:V,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:b,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:s,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(K)}};Y=this.mungRecvMediaDsec(Y,r,m);const q=this.findFirstClosedMedia(v);if(q){const ue=this.sessionDesc.mediaDescriptions.indexOf(q);this.sessionDesc.mediaDescriptions[ue]=Y}else this.sessionDesc.mediaDescriptions.push(Y);return Y}createOrRecycleSendMedia(r,o,s,l,h){const m=this.rtpCapabilities.send,v=r===It.VIDEO?m.videoCodecs:m.audioCodecs,S=r===It.VIDEO?m.videoExtensions:m.audioExtensions;this.currentMidIndex+=1;const T="".concat(this.currentMidIndex);let b={media:{mediaType:r,port:j0,protos:["UDP","TLS","RTP","SAVPF"],fmts:v.map(L=>L.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:S,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:o,ssrcGroups:s,rtcpFeedbackWildcards:[],payloads:v,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:l,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(T)}};b=this.mungSendMediaDesc(b,h);const I=this.findFirstClosedMedia(r);if(I){const L=this.sessionDesc.mediaDescriptions.indexOf(I);this.sessionDesc.mediaDescriptions[L]=b}else this.sessionDesc.mediaDescriptions.push(b);return b}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(r=>r.media.port!=="0").map(r=>r.attributes.mid)}mungRecvMediaDsec(r,o,s){const l=Tr(r);return jC(l),wd(l,o),$C(l,o),pL(l),L0(l,s,this.localCapabilities.send),l}mungSendMediaDesc(r,o){const s=Tr(r);return L0(s,o,this.localCapabilities.recv),nl(s),s}updateRecvMedia(r,o){const s=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(s!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[s],o);this.sessionDesc.mediaDescriptions[s]=l}}bumpMid(r){this.currentMidIndex+=r}findFirstClosedMedia(r){return this.sessionDesc.mediaDescriptions.find(o=>Qn()?o.media.port==="0"&&o.media.mediaType===r:o.media.port==="0")}findPreloadMediaDesc(r){return this.sessionDesc.mediaDescriptions.find(o=>{var s,l;return((s=o.attributes)===null||s===void 0||(l=s.ssrcs[0])===null||l===void 0?void 0:l.ssrcId)===r[0].ssrcId})}getSSRC(r){var o;return(o=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r))===null||o===void 0?void 0:o.attributes.ssrcs}}var un;function QL(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function $0(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?QL(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):QL(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let oX=(_e((un=class Fg extends p0{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(r,o,s){super(r,o),N(this,"store",void 0),N(this,"peerConnection",void 0),N(this,"remoteSDP",void 0),N(this,"initialOffer",void 0),N(this,"transportEventReceiver",void 0),N(this,"statsFilter",void 0),N(this,"localCapabilities",void 0),N(this,"localCandidateCount",0),N(this,"allCandidatesReceived",!1),N(this,"establishPromise",void 0),N(this,"mutex",new Ui("NVExtentionsConnection-mutex")),N(this,"rtcMedia",void 0),this.store=o,this.peerConnection=s,this.statsFilter=GC(this.peerConnection,void 0,void 0,Qn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(r){try{const o=await this.peerConnection.createOffer();if(!o.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const s=pu(o.sdp),l=await mL(!re("USE_PUB_RTX")&&!re("USE_SUB_RTX"),re("FILTER_VIDEO_FEC"),re("FILTER_AUDIO_FEC"));return this.localCapabilities=l,this.initialOffer=o,$0($0({},s),{},{rtpCapabilities:l,offerSDP:o.sdp})}catch(o){throw new Q(z.GET_LOCAL_CONNECTION_PARAMS_FAILED,o.toString())}}async connect(r,o,s,l,h,m){try{if(!this.initialOffer)throw new Error("Cannot establish NVConnection without initial offer.");this.remoteSDP=new iX({remoteIceParameters:r,remoteDtlsParameters:o,candidates:s,remoteRTPCapabilities:l,remoteSetup:h,localCapabilities:HC(this.localCapabilities),cname:m});const v=this.remoteSDP.toString(),S=Ir.exports.parse(this.initialOffer.sdp),T=S.mediaDescriptions.find(L=>L.media.mediaType==="audio");T&&nl(T);const b=Ir.exports.print(S),I=this.logSDPExchange(b||"","offer","local","connect");await this.peerConnection.setLocalDescription({type:"offer",sdp:b}),I==null||I(v),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(v){throw new Q(z.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(v.toString()))}}async updateRemoteConnect(r){var o,s,l;(o=this.remoteSDP)===null||o===void 0||o.updateRemoteRTPCapabilities(r),(s=this.remoteSDP)===null||s===void 0||s.preloadRemoteMedia(2);const h=(l=this.remoteSDP)===null||l===void 0?void 0:l.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:h});const m=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(m),U.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.")}send(r,o,s){var l=this;return Ma(function*(){const h=yield Bt(l.mutex.lock("From NVExtentionsConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");const m=[];r.forEach(Y=>{const q=l.peerConnection.addTransceiver(Y._mediaStreamTrack,{direction:"sendonly"});m.push(q)}),Qn()&&re("SIMULCAST")===!0&&(yield Bt(l.applySimulcastForFirefox(m,r)));const v=yield Bt(l.peerConnection.createOffer()),S=l.remoteSDP.predictReceivingMids(r.length),T=l.mungSendOfferSDP(v.sdp,r,S),b=Ir.exports.parse(T),I=S.map(Y=>{const q=b.mediaDescriptions.find(ue=>ue.attributes.mid===Y);if(!q)throw new Error("Cannot extract ssrc from mediaDescription.");return dL(q,re("USE_PUB_RTX"))});let L;try{L=yield I}catch(Y){L=[],l.remoteSDP.receive(r,o,s,L);const q=l.remoteSDP.toString();throw yield Bt(l.peerConnection.setLocalDescription({type:"offer",sdp:T})),yield Bt(l.peerConnection.setRemoteDescription({type:"answer",sdp:q})),yield Bt(l.stopSending(S,!0)),Y}l.remoteSDP.receive(r,o,s,L);const V=l.remoteSDP.toString(),K=l.logSDPExchange(T,"offer","local","send");return yield Bt(l.peerConnection.setLocalDescription({type:"offer",sdp:T})),yield Bt(l.applySimulcastEncodings(m,r)),yield Bt(l.applySendEncodings(m,r)),K==null||K(V),yield Bt(l.peerConnection.setRemoteDescription({type:"answer",sdp:V})),m.map((Y,q)=>{const ue=S[q];return{localSSRC:I[q],id:ue,transceiver:Y}})}catch(m){throw m instanceof Q?m:new Q(z.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(m.toString()))}finally{h()}})()}async stopSending(r,o){const s=o?void 0:await this.mutex.lock("From NVExtentionsConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(S=>r.indexOf(S.mid)!==-1);if(l.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");l.map(S=>{var T;S.direction="inactive",(T=S.stop)===null||T===void 0||T.call(S)});const h=await this.peerConnection.createOffer(),m=this.logSDPExchange(h.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(h),this.remoteSDP.stopReceiving(r);const v=this.remoteSDP.toString();m==null||m(v),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(l){throw new Q(z.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(l.toString()))}finally{s&&s()}}async receive(r,o,s,l){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.receive ".concat(r," before remoteSDP created."));const{mid:h,needExchangeSDP:m}=this.remoteSDP.send(r,o,s,l);if(m){const S=this.remoteSDP.toString(),T=this.logSDPExchange(S,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:S});const b=await this.peerConnection.createAnswer(),I=this.mungReceiveAnswerSDP(b.sdp,h,r);T==null||T(I||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:I}),U.debug("[NVExtentionsConnection] receive ".concat(r," by exchanging SDP."))}else U.debug("[NVExtentionsConnection] receive ".concat(r," no need to exchange SDP."));const v=this.peerConnection.getTransceivers().find(S=>S.mid===h);if(!v)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:v.receiver.track,id:h}}catch(h){throw new Q(z.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(h.toString()))}}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");const{mids:o,needExchangeSDP:s}=this.remoteSDP.batchSend(r);if(s){const l=this.remoteSDP.toString(),h=this.logSDPExchange(l,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:l});const m=await this.peerConnection.createAnswer();h==null||h(m.sdp||""),await this.peerConnection.setLocalDescription(m),U.debug("[NVExtentionsConnection] batchReceive by exchanging SDP.")}else U.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");return o.map(l=>{const h=this.peerConnection.getTransceivers().find(m=>m.mid===l);if(!h)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:h.receiver.track,id:l}})}catch(o){throw new Q(z.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(o.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new Q(z.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat(o.toString()))}}async muteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.mute(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new Q(z.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat(o.toString()))}}async unmuteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.unmute(r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(o,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(o){throw new Q(z.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat(o.toString()))}}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");const o=this.peerConnection.getTransceivers().filter(m=>m.mid&&r.indexOf(m.mid)!==-1);if(o.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");o.map(m=>{m.direction="inactive"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.muteRemote(r);const h=this.remoteSDP.toString();l==null||l(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(o){throw new Q(z.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat(o.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");const o=this.peerConnection.getTransceivers().filter(m=>m.mid&&r.indexOf(m.mid)!==-1);if(o.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");o.map(async(m,v)=>{m.direction="sendonly"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.unmuteRemote(r);const h=this.remoteSDP.toString();l==null||l(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(o){throw new Q(z.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat(o.toString()))}}restartICE(r){var o=this;return Ma(function*(){const s=yield Bt(o.mutex.lock("From NVExtentionsConnection.restartICE"));try{if(!o.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(gr().supportPCSetConfiguration){const T=o.peerConnection.getConfiguration(),b=r===ri.RELAY?"relay":"all";T.iceTransportPolicy!==b&&(U.debug("restartICE change iceTransportPolicy from [".concat(T.iceTransportPolicy,"] to [").concat(b,"]")),T.iceTransportPolicy=b,o.peerConnection.setConfiguration(T))}else if(r===ri.RELAY)return;r!==ri.RELAY&&o.remoteSDP.updateCandidates(r);const l=yield Bt(o.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const h=pu(l.sdp),{remoteIceParameters:m}=yield h.iceParameters;o.remoteSDP.restartICE(m);const v=o.remoteSDP.toString(),S=o.logSDPExchange(l.sdp||"","offer","local","restartICE");yield Bt(o.peerConnection.setLocalDescription(l)),S==null||S(v),yield Bt(o.peerConnection.setRemoteDescription({type:"answer",sdp:v}))}catch(l){U.warning("restart ICE failed, abort operation",l)}finally{s()}})()}close(){var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,o){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");const s=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(s.sdp,[o],[r]);this.remoteSDP.updateRecvMedia(r,o);const h=this.remoteSDP.toString(),m=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),m==null||m(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(s){throw new Q(z.EXCHANGE_SDP_FAILED,s.toString())}}async updateSendParameters(r,o){const s=this.peerConnection.getTransceivers().filter(l=>l.mid===r);s.length===1&&(this.isVP8Simulcast(o)?Qn()||await this.applySimulcastEncodings(s,[o]):await this.applySendEncodings(s,[o]))}setStatsRemoteVideoIsReady(r,o){this.statsFilter.setVideoIsReady2(r,o)}async replaceTrack(r,o){const s=this.peerConnection.getTransceivers().find(l=>l.mid===o);s&&await s.sender.replaceTrack(r._mediaStreamTrack)}getP2PConnectionParams(){var r;if((r=this.peerConnection.currentLocalDescription)===null||r===void 0||!r.sdp||!this.localCapabilities)throw new Error;return $0($0({},pu(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,U.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,U.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},re("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const o={iceServers:[]};return r.iceServers?o.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(dp(r.turnServer.servers)?o.iceServers=r.turnServer.servers:(o.iceServers&&o.iceServers.push(...Fg.turnServerConfigToIceServers(r.turnServer.servers)),re("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&r.turnServer.serversFromGateway&&o.iceServers.push(...Fg.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),re("FORCE_TURN_TCP")?o.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(o.iceTransportPolicy="relay")}))),o}static turnServerConfigToIceServers(r){const o=[];return r.forEach(s=>{s.security?s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(y0(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&!re("FORCE_TURN_TCP")&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),o}async applySendEncodings(r,o){try{if(!gr().supportSetRtpSenderParameters||r.length!==o.length)return;for(let T=0;T<r.length;T++){const b=r[T],I=o[T];if(I&&I instanceof Rr){var s,l;if(this.isVP8Simulcast(I))continue;const L={},V={};switch(I._optimizationMode){case"motion":L.degradationPreference="maintain-framerate";break;case"detail":L.degradationPreference="maintain-resolution";break;default:L.degradationPreference="balanced"}var h,m,v,S;if((s=I._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&(V.maxBitrate=1e3*((h=I._encoderConfig)===null||h===void 0?void 0:h.bitrateMax)),I._hints.includes(Lr.LOW_STREAM)&&((m=I._encoderConfig)!==null&&m!==void 0&&m.frameRate&&(V.maxFramerate=mc(I._encoderConfig.frameRate)),(v=I._encoderConfig)!==null&&v!==void 0&&v.scaleResolutionDownBy&&((S=I._encoderConfig)===null||S===void 0?void 0:S.scaleResolutionDownBy)>1&&(V.scaleResolutionDownBy=I._encoderConfig.scaleResolutionDownBy)),re("DSCP_TYPE")&&Zl()){const q=re("DSCP_TYPE");["very-low","low","medium","high"].includes(q)&&(V.networkPriority=q)}const K=b.sender.getParameters(),Y=(l=K.encodings)===null||l===void 0?void 0:l[0];Qn()&&!Y&&(L.encodings=[V]),Y&&Object.assign(Y,V),Object.assign(K,L),await b.sender.setParameters(K)}}}catch{U.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(r,o,s){const l=Ir.exports.parse(r);return o.forEach((h,m)=>{const v=s[m],S=l.mediaDescriptions.find(T=>T.attributes.mid===v);S&&(wd(S,h),fL(S,h,this.store.codec))}),Ir.exports.print(l)}mungReceiveAnswerSDP(r,o,s){const l=Ir.exports.parse(r),h=l.mediaDescriptions.find(m=>m.attributes.mid===o);return h&&s===It.AUDIO&&h.media.mediaType==="audio"&&nl(h),Ir.exports.print(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var o;(o=this.onFirstAudioReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var o;(o=this.onFirstVideoReceived)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var o;(o=this.onFirstAudioDecoded)===null||o===void 0||o.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,o,s)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,o,s)},this.statsFilter.onSelectedLocalCandidateChanged=(r,o)=>{var s;(s=this.onSelectedLocalCandidateChanged)===null||s===void 0||s.call(this,r,o)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,o)=>{var s;(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0||s.call(this,r,o)},this.statsFilter.onFirstVideoDecodedTimeout=r=>{var o;(o=this.onFirstVideoDecodedTimeout)===null||o===void 0||o.call(this,r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(r,o){if(r.length===o.length)for(let v=0;v<r.length;v++){var s,l,h,m;const S=r[v],T=o[v];if(T instanceof Rr&&!T._hints.includes(Lr.LOW_STREAM)&&(s=T._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&((l=T._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(h=T._scalabiltyMode)!==null&&h!==void 0&&h.numSpatialLayers&&((m=T._scalabiltyMode)===null||m===void 0?void 0:m.numSpatialLayers)>1&&this.store.codec==="vp8"){const b={},I={high:1e3*(T._encoderConfig.bitrateMax-50),medium:5e4};b.encodings=[{rid:"m",active:!0,maxBitrate:I.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:I.high}];const L=S.sender.getParameters();await S.sender.setParameters(Object.assign(L,b))}}}async applySimulcastEncodings(r,o){if(!Qn()&&r.length===o.length)for(let s=0;s<r.length;s++){const l=o[s];if(l instanceof Rr&&this.isVP8Simulcast(l)){const h=r[s],m={},v={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};m.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:v.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:v.medium,scaleResolutionDownBy:4}];const S=h.sender.getParameters();await h.sender.setParameters(Object.assign(S,m))}}}isVP8Simulcast(r){var o,s,l,h;return!!(r instanceof Rr&&re("SIMULCAST")&&this.store.codec==="vp8"&&!r._hints.includes(Lr.LOW_STREAM)&&(o=r._encoderConfig)!==null&&o!==void 0&&o.bitrateMax&&((s=r._encoderConfig)===null||s===void 0?void 0:s.bitrateMax)>200&&(l=r._scalabiltyMode)!==null&&l!==void 0&&l.numSpatialLayers&&((h=r._scalabiltyMode)===null||h===void 0?void 0:h.numSpatialLayers)>1)}logSDPExchange(r,o,s,l){if(re("SDP_LOGGING"))return U.upload("exchanging ".concat(s," ").concat(o," SDP during NVExtentionsConnection.").concat(l,`
`),r),o==="offer"?h=>{this.logSDPExchange(h,"answer",s==="local"?"remote":"local",l)}:void 0}async getRemoteSSRC(r){if(!this.remoteSDP)return;const o=this.remoteSDP.getSSRC(r);return o==null?void 0:o[0].ssrcId}setConfiguration(r){if(gr().supportPCSetConfiguration){const o=Fg.resolvePCConfiguration(r);this.peerConnection.setConfiguration(o)}}}).prototype,"connect",[Ko],Object.getOwnPropertyDescriptor(un.prototype,"connect"),un.prototype),_e(un.prototype,"updateRemoteConnect",[Ko],Object.getOwnPropertyDescriptor(un.prototype,"updateRemoteConnect"),un.prototype),_e(un.prototype,"receive",[Ko],Object.getOwnPropertyDescriptor(un.prototype,"receive"),un.prototype),_e(un.prototype,"batchReceive",[Ko],Object.getOwnPropertyDescriptor(un.prototype,"batchReceive"),un.prototype),_e(un.prototype,"stopReceiving",[Ko],Object.getOwnPropertyDescriptor(un.prototype,"stopReceiving"),un.prototype),_e(un.prototype,"muteRemote",[Ko],Object.getOwnPropertyDescriptor(un.prototype,"muteRemote"),un.prototype),_e(un.prototype,"unmuteRemote",[Ko],Object.getOwnPropertyDescriptor(un.prototype,"unmuteRemote"),un.prototype),_e(un.prototype,"muteLocal",[Ko],Object.getOwnPropertyDescriptor(un.prototype,"muteLocal"),un.prototype),_e(un.prototype,"unmuteLocal",[Ko],Object.getOwnPropertyDescriptor(un.prototype,"unmuteLocal"),un.prototype),_e(un.prototype,"close",[Ko],Object.getOwnPropertyDescriptor(un.prototype,"close"),un.prototype),_e(un.prototype,"updateEncoderConfig",[Ko],Object.getOwnPropertyDescriptor(un.prototype,"updateEncoderConfig"),un.prototype),_e(un.prototype,"updateSendParameters",[Ko],Object.getOwnPropertyDescriptor(un.prototype,"updateSendParameters"),un.prototype),_e(un.prototype,"replaceTrack",[Ko],Object.getOwnPropertyDescriptor(un.prototype,"replaceTrack"),un.prototype),_e(un.prototype,"getRemoteSSRC",[Ko],Object.getOwnPropertyDescriptor(un.prototype,"getRemoteSSRC"),un.prototype),un);function Ko(n,r,o){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,h=await l.lock("From NVExtentionsConnection.".concat(r));try{for(var m=arguments.length,v=new Array(m),S=0;S<m;S++)v[S]=arguments[S];return await s.apply(this,v)}finally{h()}},o}var wn;function ZL(n){var r,o,s,l=2;for(typeof Symbol<"u"&&(o=cL,s=Symbol.iterator);l--;){if(o&&(r=n[o])!=null)return r.call(n);if(s&&(r=n[s])!=null)return new qC(r.call(n));o="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}function qC(n){function r(o){if(Object(o)!==o)return Me.reject(new TypeError(o+" is not an object."));var s=o.done;return Me.resolve(o.value).then(function(l){return{value:l,done:s}})}return(qC=function(o){this.s=o,this.n=o.next}).prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(o){var s=this.s.return;return s===void 0?Me.resolve({value:o,done:!0}):r(s.apply(this.s,arguments))},throw:function(o){var s=this.s.return;return s===void 0?Me.reject(o):r(s.apply(this.s,arguments))}},new qC(n)}let il=(_e((wn=class Bg extends p0{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(r,o){super(r,o),N(this,"store",void 0),N(this,"peerConnection",void 0),N(this,"cname",void 0),N(this,"mutex",new Ui("DataChannelConnection-mutex")),N(this,"dataChannel",void 0),N(this,"_p2pConnection",void 0),N(this,"establishPromise",void 0),N(this,"_nvMedia",void 0),this.store=o,this.store.dcId=this.store.dcId+1,this.peerConnection=new RTCPeerConnection(Bg.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.dataChannel=this.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),this.dataChannel.binaryType="arraybuffer",this._p2pConnection=new oX(r,o,this.peerConnection),this.bindPCEvents(),this.establishPromise=this._p2pConnection.establishPromise}async establish(){var r;const o=(r=this._nvMedia)===null||r===void 0?void 0:r.getLocalRtpCapabilities();return await this._p2pConnection.establish(o)}getP2PConnectionParams(){return this._p2pConnection.getP2PConnectionParams()}async connect(r,o,s,l,h,m){return this.cname=m,await this._p2pConnection.connect(r,o,s,l,h,m),await new Me((v,S)=>{const T=setTimeout(()=>{this.closeSignal(),S(new Q(z.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(s))))},2e3);this.dataChannel.onopen=()=>{if(this.dataChannel.readyState==="open")return clearTimeout(T),void v()},this.dataChannel.onerror=b=>{this.closeSignal(),S(b)}}),{transmitter:this.dataChannel,close:this.closeSignal.bind(this)}}send(r,o,s){var l=this;return Ma(function*(){const h=yield Bt(l.mutex.lock("From DataChannelConnection.send"));try{return yield*k0(ZL(l._p2pConnection.send(r,o,s)),Bt)}finally{h()}})()}async stopSending(r,o){return this._p2pConnection.stopSending(r,o)}async receive(r,o,s,l){return this._nvMedia?(U.debug("[DataChannelConnection] receive ".concat(r," by DataChannel.")),await this._nvMedia.reveiveByRTCMedia(r,o,this.cname)):(U.debug("[DataChannelConnection] receive ".concat(r," by WebRTC.")),await this._p2pConnection.receive(r,o,s,l))}async batchReceive(r){return[...await this._p2pConnection.batchReceive(r)]}async stopReceiving(r){return await this._p2pConnection.stopReceiving(r)}async muteRemote(r){return await this._p2pConnection.muteRemote(r)}async unmuteRemote(r){return await this._p2pConnection.unmuteRemote(r)}async muteLocal(r){return await this._p2pConnection.muteLocal(r)}async unmuteLocal(r){return await this._p2pConnection.unmuteLocal(r)}restartICE(r){var o=this;return Ma(function*(){return yield*k0(ZL(o._p2pConnection.restartICE(r)),Bt)})()}close(){var r;(r=this._nvMedia)===null||r===void 0||r.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)}getStats(){return this._p2pConnection.getStats()}getRemoteVideoIsReady(r){return this._p2pConnection.getRemoteVideoIsReady(r)}updateRemoteConnect(r){var o;(o=this._nvMedia)===null||o===void 0||o.setRemoteRtpCapabilities(r),this._p2pConnection.updateRemoteConnect(r)}async updateEncoderConfig(r,o){return await this._p2pConnection.updateEncoderConfig(r,o)}async updateSendParameters(r,o){return await this._p2pConnection.updateSendParameters(r,o)}setStatsRemoteVideoIsReady(r,o){this._p2pConnection.setStatsRemoteVideoIsReady(r,o)}async replaceTrack(r,o){return await this._p2pConnection.replaceTrack(r,o)}async getRemoteSSRC(r){return this._p2pConnection.getRemoteSSRC(r)}logSDPExchange(r,o,s,l){if(re("SDP_LOGGING"))return U.upload("exchanging ".concat(s," ").concat(o," SDP during DataChannelConnection.").concat(l,`
`),r),o==="offer"?h=>{this.logSDPExchange(h,"answer",s==="local"?"remote":"local",l)}:void 0}static resolvePCConfiguration(r){const o={iceServers:[]};return r.iceServers?o.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(dp(r.turnServer.servers)?o.iceServers=r.turnServer.servers:(o.iceServers&&o.iceServers.push(...Bg.turnServerConfigToIceServers(r.turnServer.servers)),re("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&r.turnServer.serversFromGateway&&o.iceServers.push(...Bg.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),re("FORCE_TURN_TCP")?o.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(o.iceTransportPolicy="relay")}))),o}static turnServerConfigToIceServers(r){const o=[];return r.forEach(s=>{s.security?s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(y0(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&!re("FORCE_TURN_TCP")&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&o.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),o}bindPCEvents(){this._p2pConnection.onICEConnectionStateChange=r=>{var o;return(o=this.onICEConnectionStateChange)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onConnectionStateChange=r=>{var o;return(o=this.onConnectionStateChange)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onDTLSTransportStateChange=r=>{var o;return(o=this.onDTLSTransportStateChange)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onDTLSTransportError=r=>{var o;return(o=this.onDTLSTransportError)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onICETransportStateChange=r=>{var o;return(o=this.onICETransportStateChange)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onFirstAudioReceived=r=>{var o;return(o=this.onFirstAudioReceived)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onFirstVideoReceived=r=>{var o;return(o=this.onFirstVideoReceived)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onFirstAudioDecoded=r=>{var o;return(o=this.onFirstAudioDecoded)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onFirstVideoDecoded=(r,o,s)=>{var l;return(l=this.onFirstVideoDecoded)===null||l===void 0?void 0:l.call(this,r,o,s)},this._p2pConnection.onFirstVideoDecodedTimeout=r=>{var o;return(o=this.onFirstVideoDecodedTimeout)===null||o===void 0?void 0:o.call(this,r)},this._p2pConnection.onSelectedLocalCandidateChanged=(r,o)=>{var s;return(s=this.onSelectedLocalCandidateChanged)===null||s===void 0?void 0:s.call(this,r,o)},this._p2pConnection.onSelectedRemoteCandidateChanged=(r,o)=>{var s;return(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0?void 0:s.call(this,r,o)}}closeSignal(){this.dataChannel.close(),this.peerConnection.close()}unbindConnectionEvents(r){r.onConnectionStateChange=void 0,r.onICEConnectionStateChange=void 0,r.onICETransportStateChange=void 0,r.onDTLSTransportStateChange=void 0,r.onDTLSTransportError=void 0,r.onFirstAudioDecoded=void 0,r.onFirstAudioReceived=void 0,r.onFirstVideoDecoded=void 0,r.onFirstVideoReceived=void 0,r.onSelectedLocalCandidateChanged=void 0,r.onSelectedRemoteCandidateChanged=void 0,r.onFirstVideoDecodedTimeout=void 0}setConfiguration(r){this._p2pConnection.setConfiguration(r)}}).prototype,"connect",[Va],Object.getOwnPropertyDescriptor(wn.prototype,"connect"),wn.prototype),_e(wn.prototype,"receive",[Va],Object.getOwnPropertyDescriptor(wn.prototype,"receive"),wn.prototype),_e(wn.prototype,"stopReceiving",[Va],Object.getOwnPropertyDescriptor(wn.prototype,"stopReceiving"),wn.prototype),_e(wn.prototype,"muteRemote",[Va],Object.getOwnPropertyDescriptor(wn.prototype,"muteRemote"),wn.prototype),_e(wn.prototype,"unmuteRemote",[Va],Object.getOwnPropertyDescriptor(wn.prototype,"unmuteRemote"),wn.prototype),_e(wn.prototype,"muteLocal",[Va],Object.getOwnPropertyDescriptor(wn.prototype,"muteLocal"),wn.prototype),_e(wn.prototype,"unmuteLocal",[Va],Object.getOwnPropertyDescriptor(wn.prototype,"unmuteLocal"),wn.prototype),_e(wn.prototype,"close",[Va],Object.getOwnPropertyDescriptor(wn.prototype,"close"),wn.prototype),_e(wn.prototype,"updateEncoderConfig",[Va],Object.getOwnPropertyDescriptor(wn.prototype,"updateEncoderConfig"),wn.prototype),_e(wn.prototype,"updateSendParameters",[Va],Object.getOwnPropertyDescriptor(wn.prototype,"updateSendParameters"),wn.prototype),_e(wn.prototype,"replaceTrack",[Va],Object.getOwnPropertyDescriptor(wn.prototype,"replaceTrack"),wn.prototype),_e(wn.prototype,"getRemoteSSRC",[Va],Object.getOwnPropertyDescriptor(wn.prototype,"getRemoteSSRC"),wn.prototype),wn);function Va(n,r,o){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,h=await l.lock("From DataChannelConnection.".concat(r));try{for(var m=arguments.length,v=new Array(m),S=0;S<m;S++)v[S]=arguments[S];return await s.apply(this,v)}finally{h()}},o}var Zt;function eM(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function ol(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?eM(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):eM(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function tM(n){var r,o,s,l=2;for(typeof Symbol<"u"&&(o=cL,s=Symbol.iterator);l--;){if(o&&(r=n[o])!=null)return r.call(n);if(s&&(r=n[s])!=null)return new XC(r.call(n));o="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}function XC(n){function r(o){if(Object(o)!==o)return Me.reject(new TypeError(o+" is not an object."));var s=o.done;return Me.resolve(o.value).then(function(l){return{value:l,done:s}})}return(XC=function(o){this.s=o,this.n=o.next}).prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(o){var s=this.s.return;return s===void 0?Me.resolve({value:o,done:!0}):r(s.apply(this.s,arguments))},throw:function(o){var s=this.s.return;return s===void 0?Me.reject(o):r(s.apply(this.s,arguments))}},new XC(n)}let aX=(_e((Zt=class extends Zn{get state(){return this._state}set state(n){const r=this._state;this._state=n,this.emit(Yt.StateChange,r,this._state)}constructor(n,r){super(),N(this,"store",void 0),N(this,"statsUploader",void 0),N(this,"connection",void 0),N(this,"localTrackMap",new Map),N(this,"remoteUserMap",new Map),N(this,"pendingLocalTracks",[]),N(this,"pendingRemoteTracks",[]),N(this,"statsCollector",void 0),N(this,"isPlanB",!1),N(this,"shouldForwardP2PCreation",void 0),N(this,"iceFailedCount",0),N(this,"dtlsFailedCount",0),N(this,"mutex",new Ui("P2PChannel-mutex")),N(this,"_state",Mr.Disconnected),N(this,"_pcStatsUploadType",re("NEW_ICE_RESTART")?ds.FIRST_CONNECTION:ds.OLD_FIRST_CONNECTION),N(this,"_isInRestartIce",!1),N(this,"_isStartRestartIce",!1),N(this,"_restartStates",["disconnected","failed"]),N(this,"_restartTimer",void 0),N(this,"_isFirstConnected",!0),N(this,"handleMuteLocalTrack",async(o,s,l)=>{const h=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==Mr.Connected)return void l(new Q(z.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const m=this.filterTobeMutedTracks(o);if(m.length===0)return void s();const v=m.find(T=>T[0]==="videoLowTrack");v&&v[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(m.map(T=>{let[,{id:b}]=T;return b}));const S=this.createMuteMessage(m);await nr(this,Yt.RequestMuteLocal,S),s()}catch(m){l(m)}finally{h()}}),N(this,"handleUnmuteLocalTrack",async(o,s,l)=>{const h=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==Mr.Connected)return void l(new Q(z.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const m=this.filterTobeUnmutedTracks(o);if(m.length===0)return void s();const v=m.find(T=>T[0]==="videoLowTrack");if(v){const T=v[1];if(T.track._originMediaStreamTrack.stop(),gr().supportDualStreamEncoding){const b=o._mediaStreamTrack.clone();T.track._mediaStreamTrack=b,T.track._originMediaStreamTrack=b}else{const b=kL(o,uu(this,Yt.RequestLowStreamParameter));T.track._mediaStreamTrack=b,T.track._originMediaStreamTrack=b}await new Me((b,I)=>{this.handleReplaceTrack(T.track,b,I,!0)})}await this.connection.unmuteLocal(m.map(T=>{let[,{id:b}]=T;return b}));const S=this.createUnmuteMessage(m);await nr(this,Yt.RequestUnmuteLocal,S),s()}catch(m){l(m)}finally{h()}}),N(this,"handleUpdateVideoEncoder",async(o,s,l)=>{const h=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const m=this.localTrackMap.get(We.LocalVideoTrack);if(!this.connection||!m||m.track!==o||this.state!==Mr.Connected)return void s();const{id:v,track:S}=m;await this.connection.updateSendParameters(v,S),await this.connection.updateEncoderConfig(v,S),this.emit(Yt.UpdateVideoEncoder,S),s()}catch(m){l(m)}finally{h()}}),N(this,"handleSetOptimizationMode",async(o,s,l)=>{const h=await this.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const m=this.localTrackMap.get(We.LocalVideoTrack);if(!this.connection||!m||m.track!==o||this.state!==Mr.Connected)return;const{id:v,track:S}=m;await this.connection.updateSendParameters(v,S),s()}catch(m){l(m)}finally{h()}}),N(this,"handleReplaceTrack",async(o,s,l,h)=>{let m;U.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(o.getTrackId(),"]")),typeof h=="boolean"&&h||(m=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var v;const T=Array.from(this.localTrackMap.entries()).find(b=>{let[,{track:I}]=b;return o===I});if(!this.connection||!T||this.state!==Mr.Connected)return void s();if(await((v=this.connection)===null||v===void 0?void 0:v.replaceTrack(o,T[1].id)),this.isPlanB){const b=T[1];b.id=o._mediaStreamTrack.id,this.localTrackMap.set(T[0],b)}if(T[0]===We.LocalVideoTrack&&gr().supportDualStreamEncoding){const b=this.localTrackMap.get(We.LocalVideoLowTrack);if(b){const I=o._mediaStreamTrack.clone();b.track._originMediaStreamTrack.stop(),b.track._mediaStreamTrack=I,b.track._originMediaStreamTrack=I,await new Me((L,V)=>{this.handleReplaceTrack(b.track,L,V,!0)})}}s()}catch(T){l(T)}finally{var S;(S=m)===null||S===void 0||S()}}),N(this,"handleGetLocalVideoStats",o=>{o(this.statsCollector.getLocalVideoTrackStats())}),N(this,"handleGetLocalAudioStats",o=>{o(this.statsCollector.getLocalAudioTrackStats())}),N(this,"handleGetRemoteVideoStats",o=>this.statsCollector.getRemoteVideoTrackStats(o.uid)[o.uid]),N(this,"handleGetRemoteAudioStats",o=>this.statsCollector.getRemoteAudioTrackStats(o.uid)[o.uid]),this.store=n,this.statsCollector=r,this.statsCollector.addP2PChannel(this),this.statsUploader=new rX,this.bindStatsUploaderEvents(),this.isPlanB=!gr().supportUnifiedPlan||re("CHROME_FORCE_PLAN_B")&&Zl(),this.shouldForwardP2PCreation=re("FORWARD_P2P_CREATION")&&gr().supportPCSetConfiguration,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new il({},this.store):this.isPlanB?new Op({},this.store):new Ec({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(n,r){var o;this.state=Mr.New;const s=this.shouldForwardP2PCreation&&((o=this.connection)===null||o===void 0?void 0:o.peerConnectionState)==="closed";if(this.shouldForwardP2PCreation&&!s||(s&&this.connection&&(U.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.store.useDataChannel?new il(n,this.store):this.isPlanB?new Op(n,this.store):new Ec(n,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new Q(z.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=re("NEW_ICE_RESTART")?ds.FIRST_CONNECTION:ds.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(n),this.connection.establishPromise}async connect(n,r,o,s,l,h){if(!this.connection)throw new Q(z.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.connection instanceof il?this.connection.updateRemoteConnect(s):(this.store.peerConnectionStart(),await this.connection.connect(n,r,o,s,l,h),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Mr.Connected)}async preConnect(n,r,o,s,l,h){if(!this.connection)throw new Q(z.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.store.peerConnectionStart();const m=await this.connection.connect(n,r,o,s,l,h);return this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Mr.Connected,m}getEstablishParams(){if(this.connection instanceof il)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")}publish(n,r,o){var s=this;return Ma(function*(){const l=yield Bt(s.mutex.lock("From P2PChannel.publish"));try{if(!s.connection||s.state!==Mr.Connected){if(s.state===Mr.Disconnected)throw new Q(z.UNEXPECTED_ERROR,"PeerConnection already disconnected.");s.throwIfTrackTypeNotMatch(n);const m=n.filter(v=>s.pendingLocalTracks.indexOf(v)===-1);return void(s.pendingLocalTracks=s.pendingLocalTracks.concat(m))}s.store.pubId=s.store.pubId+1,ua.markPublishStart(s.store.clientId,s.store.pubId);const h=s.filterTobePublishedTracks(n,r,o);if(h.length===0)return void(yield Bt(s.tryToUnmuteAudio(n)));yield*k0(tM(s.doPublish(s.connection,h)),Bt)}finally{l()}})()}doPublish(n,r){var o=this;return Ma(function*(){r.forEach(T=>{let{track:b,type:I}=T;const L=Date.now();o.store.publish(b.getTrackId(),I===We.LocalAudioTrack?"audio":"video",L)}),o.bindLocalTrackEvents(r);const s=yield Bt(n.send(r.map(T=>{let{track:b}=T;return b}),o.store.codec,o.store.audioCodec)),l=(yield Bt(s.next())).value,h=o.createGatewayPublishMessage(r,l);let m;try{m=yield h}catch(T){throw s.throw(T),(T==null?void 0:T.code)===z.WS_ABORT&&r.forEach(b=>{let{track:I}=b;o.pendingLocalTracks.indexOf(I)===-1&&o.pendingLocalTracks.push(I)}),o.unbindLocalTrackEvents(r),T}const v=o.mapPubResToRemoteConfig(h,m),S=(yield Bt(s.next(v))).value;r.forEach(T=>{let{type:b}=T;o.statsCollector.addLocalStats(b)}),o.assignLocalTracks(r,S),o.statsUploader.startUploadUplinkStats(),r.forEach(T=>{let{track:b,type:I}=T;const L=Date.now();o.store.publish(b.getTrackId(),I===We.LocalAudioTrack?"audio":"video",void 0,L)})})()}publishLowStream(n){var r=this;return Ma(function*(){if(!r.connection||r.state!==Mr.Connected)return;const o=yield Bt(r.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const l=r.localTrackMap.get(We.LocalVideoTrack);if(!l)throw new Q(z.UNEXPECTED_ERROR,"Could not find high stream");if(r.localTrackMap.has(We.LocalVideoLowTrack))throw new Q(z.UNEXPECTED_ERROR,"[".concat(r.store.clientId,"] Can't publish low stream when stream already publish"));const h=[{track:r.getLowVideoTrack(l.track,n),type:We.LocalVideoLowTrack}];if(yield*k0(tM(r.doPublish(r.connection,h)),Bt),l.track.muted||!l.track.enabled){var s;const m=(s=r.localTrackMap.get(We.LocalVideoLowTrack))===null||s===void 0?void 0:s.id;m!==void 0&&(yield Bt(r.connection.muteLocal([m])))}}finally{o()}})()}async republish(){this.pendingLocalTracks.length>0&&(U.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await _i(this,Yt.RequestRePublish,this.pendingLocalTracks),this.emit(Yt.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async reSubscribe(n){for(let r=this.pendingRemoteTracks.length-1;r>=0;r--){const{user:o,kind:s}=this.pendingRemoteTracks[r];(s!==It.AUDIO||o._audio_added_&&o._audioSSRC)&&(s!==It.VIDEO||o._video_added_&&o._videoSSRC)||this.pendingRemoteTracks.splice(r,1)}if(n)await _i(this,Yt.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:r,kind:o}of this.pendingRemoteTracks)await this.subscribe(r,o,o===It.VIDEO?r._videoSSRC:r._audioSSRC);this.pendingRemoteTracks.forEach(r=>{let{user:o}=r;this.emit(Yt.MediaReconnectEnd,o.uid)}),this.pendingRemoteTracks=[]}async unpublish(n){if(!this.connection||this.state!==Mr.Connected)return void n.forEach(s=>{const l=this.pendingLocalTracks.indexOf(s);l!==-1&&this.pendingLocalTracks.splice(l,1)});const r=this.filterTobeUnpublishedTracks(n);if(r.length===0)return;const o=r.find(s=>s[0]==="videoLowTrack");return o&&o[1].track.close(),this.doUnpublish(this.connection,r)}async unpublishLowStream(){if(!this.connection||this.state!==Mr.Connected)return;const n=this.localTrackMap.get(We.LocalVideoLowTrack);if(!n)return;n.track.close();const r=[[We.LocalVideoLowTrack,n]];return this.doUnpublish(this.connection,r)}async doUnpublish(n,r){const o=this.createGatewayUnpublishMessage(r);return await n.stopSending(r.map(s=>{let[,{id:l}]=s;return l})),this.withdrawLocalTracks(r),this.unbindLocalTrackEvents(r.map(s=>{let[l,{track:h}]=s;return{type:l,track:h}})),r.forEach(s=>{let[l]=s;this.statsCollector.removeLocalStats(l)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadUplinkStats(),o}async subscribe(n,r,o,s,l){var h;if(!this.connection||this.state!==Mr.Connected)throw new Q(z.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if((h=this.remoteUserMap.get(n))!==null&&h!==void 0&&h.has(r))return;let m,v,S;if(l){const I=l.find(V=>{let{stream_type:K}=V;return K===r});if(!I)throw new Q(z.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(r," for user: ").concat(n.uid," because subscribe answer from gateway does not contain stream_type: ").concat(r,"."));const L=await this.connection.receive(r,I.ssrcs,String(n._uintid),I.attributes);this.connection instanceof Ec&&(S=L.transceiver),m=L.track,v=L.id}else{const I=await this.connection.receive(r,[{ssrcId:o,rtx:s}],String(n._uintid),void 0);this.connection instanceof Ec&&(S=I.transceiver),m=I.track,v=I.id}r===It.AUDIO?(n._audioTrack?n._audioTrack._updateOriginMediaStreamTrack(m):(n._audioTrack=new B0(m,n.uid,n._uintid,this.store),U.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(n._audioTrack.getTrackId()))),S&&n._audioTrack._updateRtpTransceiver(S),this.bindRemoteTrackEvents(n,n._audioTrack)):(n._videoTrack?n._videoTrack._updateOriginMediaStreamTrack(m):(n._videoTrack=new F0(m,n.uid,n._uintid,this.store),U.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(n._videoTrack.getTrackId()))),S&&n._videoTrack._updateRtpTransceiver(S),this.bindRemoteTrackEvents(n,n._videoTrack));const T=this.remoteUserMap.get(n);T?T.set(r,v):this.remoteUserMap.set(n,new Map([[r,v]])),this.statsCollector.addRemoteStats(n.uid),this.statsUploader.startUploadDownlinkStats();const b=this.pendingRemoteTracks.findIndex(I=>{let{user:L,kind:V}=I;return L.uid===n.uid&&r===V});b!==-1&&(this.pendingRemoteTracks.splice(b,1),this.emit(Yt.MediaReconnectEnd,n.uid))}async massSubscribe(n){return this.massSubscribeNoLock(n)}async massSubscribeNoLock(n){if(!this.connection||this.state!==Mr.Connected)throw new Q(z.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");n=n.filter(o=>{var s;let{user:l,mediaType:h}=o;return!((s=this.remoteUserMap.get(l))!==null&&s!==void 0&&s.has(h))});const r=await this.connection.batchReceive(n.map(o=>{let{user:s,mediaType:l,ssrcId:h,rtxSsrcId:m}=o;return{kind:l,ssrcMsg:[{ssrcId:h,rtx:m}],mslabel:String(s._uintid)}}));n.forEach((o,s)=>{let{user:l,mediaType:h}=o;const{track:m,id:v,transceiver:S}=r[s];h===It.AUDIO?(l._audioTrack?l._audioTrack._updateOriginMediaStreamTrack(m):(l._audioTrack=new B0(m,l.uid,l._uintid,this.store),U.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(l._audioTrack.getTrackId()))),S&&l._audioTrack._updateRtpTransceiver(S),this.bindRemoteTrackEvents(l,l._audioTrack)):(l._videoTrack?l._videoTrack._updateOriginMediaStreamTrack(m):(l._videoTrack=new F0(m,l.uid,l._uintid,this.store),U.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(l._videoTrack.getTrackId()))),S&&l._videoTrack._updateRtpTransceiver(S),this.bindRemoteTrackEvents(l,l._videoTrack));const T=this.remoteUserMap.get(l);T?T.set(h,v):this.remoteUserMap.set(l,new Map([[h,v]])),this.statsCollector.addRemoteStats(l.uid),this.statsUploader.startUploadDownlinkStats();const b=this.pendingRemoteTracks.findIndex(I=>{let{user:L,kind:V}=I;return L.uid===l.uid&&h===V});b!==-1&&(this.pendingRemoteTracks.splice(b,1),this.emit(Yt.MediaReconnectEnd,l.uid))})}async unsubscribe(n,r,o){const s=this.pendingRemoteTracks.filter(m=>{let{user:v,kind:S}=m;return r!==void 0?v.uid===n.uid&&r===S:v.uid===n.uid});if(s.forEach(m=>{const v=this.pendingRemoteTracks.indexOf(m);this.pendingRemoteTracks.splice(v,1)}),this.connection&&this.state===Mr.Connected||o||s.forEach(m=>{let{kind:v}=m;var S;if(v===It.AUDIO)(S=n._audioTrack)===null||S===void 0||S._destroy(),n._audioTrack=void 0;else if(v===It.VIDEO){var T;(T=n._videoTrack)===null||T===void 0||T._destroy(),n._videoTrack=void 0}}),!this.connection||this.state!==Mr.Connected)return;const l=this.filterTobeUnSubscribedTracks(n,r);if(l.length===0)return;await this.connection.stopReceiving(l.map(m=>{let[,{id:v}]=m;return v}));const h=this.createUnsubscribeMessage(l);return this.withdrawRemoteTracks(l),this.remoteUserMap.size===0&&this.statsUploader.stopUploadDownlinkStats(),l.forEach(m=>{let[v,{kind:S}]=m;var T,b;if(S===It.VIDEO&&v._videoSSRC&&((T=this.connection)===null||T===void 0||T.setStatsRemoteVideoIsReady(v._videoSSRC,!1)),S===It.VIDEO)this.unbindRemoteTrackEvents(v._videoTrack),o||((b=v._videoTrack)===null||b===void 0||b._destroy(),v._videoTrack=void 0);else if(S===It.AUDIO){var I;this.unbindRemoteTrackEvents(v._audioTrack),!o&&((I=v._audioTrack)===null||I===void 0||I._destroy(),v._audioTrack=void 0)}}),h}async massUnsubscribe(n){return this.massUnsubscribeNoLock(n)}async massUnsubscribeNoLock(n){let r=[];for(const{user:l,mediaType:h}of n){const m=this.pendingRemoteTracks.filter(v=>{let{user:S,kind:T}=v;return h!==void 0?S.uid===l.uid&&h===T:S.uid===l.uid});m.forEach(v=>{const S=this.pendingRemoteTracks.indexOf(v);this.pendingRemoteTracks.splice(S,1)}),r=r.concat(m)}if(!this.connection||this.state!==Mr.Connected)return void r.forEach(l=>{let{user:h,kind:m}=l;var v;if(m===It.AUDIO)(v=h._audioTrack)===null||v===void 0||v._destroy(),h._audioTrack=void 0;else if(m===It.VIDEO){var S;(S=h._videoTrack)===null||S===void 0||S._destroy(),h._videoTrack=void 0}});const o=Wc(n).call(n,(l,h)=>{let{user:m,mediaType:v}=h;const S=this.filterTobeUnSubscribedTracks(m,v);return l.concat(S)},[]);if(o.length===0)return;await this.connection.stopReceiving(o.map(l=>{let[,{id:h}]=l;return h}));const s=this.createUnsubscribeAllMessage(o);return this.withdrawRemoteTracks(o),this.remoteUserMap.size===0&&this.statsUploader.stopUploadDownlinkStats(),o.forEach(l=>{let[h,{kind:m}]=l;var v,S;if(m===It.VIDEO&&h._videoSSRC&&((v=this.connection)===null||v===void 0||v.setStatsRemoteVideoIsReady(h._videoSSRC,!1)),m===It.VIDEO)this.unbindRemoteTrackEvents(h._videoTrack),(S=h._videoTrack)===null||S===void 0||S._destroy(),h._videoTrack=void 0;else if(m===It.AUDIO){var T;this.unbindRemoteTrackEvents(h._audioTrack),(T=h._audioTrack)===null||T===void 0||T._destroy(),h._audioTrack=void 0}}),s}async muteRemote(n,r){if(!this.connection)return;const o=this.remoteUserMap.get(n);if(!o)return void U.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(n.uid,"."));if(!o.get(r))return void U.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(n.uid," media type ").concat(r,"."));const s=r===It.VIDEO?n._videoSSRC:n._audioSSRC;s!==void 0&&this.connection.setStatsRemoteVideoIsReady(s,!1)}async unmuteRemote(n,r){return this.unmuteRemoteNoLock(n,r)}async unmuteRemoteNoLock(n,r){if(!this.connection)return;const o=this.remoteUserMap.get(n);if(!o)return void U.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(n.uid,"."));o.get(r)||U.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(n.uid," media type ").concat(r,"."))}getAllTracks(n){const r=this.localTrackMap.get(We.LocalAudioTrack);if((r==null?void 0:r.track)instanceof so){const o=r.track;return Array.from(this.localTrackMap.entries()).filter(s=>{let[l]=s;return l!==We.LocalAudioTrack}).filter(s=>{let[l]=s;return!(n&&l===We.LocalVideoLowTrack)}).map(s=>{let[,{track:l}]=s;return l}).concat(o.trackList)}return Array.from(this.localTrackMap.entries()).filter(o=>{let[s]=o;return!(n&&s===We.LocalVideoLowTrack)}).map(o=>{let[,{track:s}]=o;return s})}reportPublishEvent(n,r,o,s,l){if(n){const m=this.localTrackMap.get(We.LocalAudioTrack),v=s?this.localTrackMap.get(We.LocalVideoLowTrack):this.localTrackMap.get(We.LocalVideoTrack);Je.publish(this.store.sessionId,{eventElapse:ua.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:r,audioName:m==null?void 0:m.track.getTrackLabel(),videoName:v==null?void 0:v.track.getTrackLabel(),screenshare:(v==null?void 0:v.track._hints.indexOf(Lr.SCREEN_TRACK))!==-1,audio:!!m,video:!!v,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}else{var h;o||(o=[]);const m=o.find(S=>S instanceof vi),v=s?(h=this.localTrackMap.get(We.LocalVideoTrack))===null||h===void 0?void 0:h.track:o.find(S=>S instanceof Rr);Je.publish(this.store.sessionId,{eventElapse:ua.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:r,audioName:m==null?void 0:m.getTrackLabel(),videoName:v==null?void 0:v.getTrackLabel(),screenshare:(v==null?void 0:v._hints.indexOf(Lr.SCREEN_TRACK))!==-1,audio:!!m,video:!!v,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}}reportSubscribeEvent(n,r,o,s){const l=s===It.VIDEO?o._videoSSRC:o._audioSSRC;l&&Je.subscribe(this.store.sessionId,{succ:n,ec:r,video:s===It.VIDEO,audio:s===It.AUDIO,peerid:o.uid,subscribeRequestid:s===It.VIDEO?o._videoSSRC:o._audioSSRC,p2pid:this.store.p2pId,eventElapse:ua.measureFromSubscribeStart(this.store.clientId,l)})}reset(){U.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new Ui("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new il({},this.store):this.isPlanB?new Op({},this.store):new Ec({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const n=this.localTrackMap.get(We.LocalAudioTrack);if((n==null?void 0:n.track)instanceof so){if(n.track.trackList.length>0){const r=n.track;n.track.trackList.forEach(o=>{r.removeAudioTrack(o)})}n.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=Mr.Disconnected}getStats(){var n;return(n=this.connection)===null||n===void 0?void 0:n.getStats()}getRemoteVideoIsReady(n){var r;return((r=this.connection)===null||r===void 0?void 0:r.getRemoteVideoIsReady(n))||!1}getLocalAudioVolume(){const n=this.localTrackMap.get(We.LocalAudioTrack);if(n)return n.track.getVolumeLevel()}getLocalVideoSize(){const n=this.localTrackMap.get(We.LocalVideoTrack);if(n)return{width:n.track._videoWidth||0,height:n.track._videoHeight||0}}getEncoderConfig(n){const r=this.localTrackMap.get(n);return r&&r.track instanceof Rr||r&&r.track instanceof vi?r.track._encoderConfig:void 0}getLocalMedia(n){return this.localTrackMap.get(n)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(n,r){if(!n)return this.remoteUserMap.size>0;const o=this.remoteUserMap.get(n);return!!o&&(!r||o.has(r))}async hasRemoteMediaWithLock(n,r){if(!n)return this.remoteUserMap.size>0;const o=this.remoteUserMap.get(n);return!!o&&(!r||o.has(r))}getRemoteMedia(n){var r;const o=Array.from(au(r=this.remoteUserMap).call(r)).find(s=>s.uid===n);return o?{audioTrack:o.audioTrack,audioSSRC:o._audioSSRC,videoTrack:o.videoTrack,videoSSRC:o._videoSSRC}:{}}getAudioLevels(){let n=Array.from(this.remoteUserMap.entries()).map(o=>{let[s]=o;return{uid:s.uid,level:s.audioTrack?100*s.audioTrack._source.getAccurateVolumeLevel():0}});const r=this.localTrackMap.get(We.LocalAudioTrack);return r&&n.push({level:100*r.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),n=ky(n).call(n,(o,s)=>o.level-s.level),n}async disconnectForReconnect(){this.connection&&(U.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=Mr.Reconnecting,re("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r]=n;var o;r._videoTrack&&r._videoTrack._player&&((o=r._videoTrack._player.getVideoElement())===null||o===void 0||o.pause(),r._videoTrack._player.isKeepLastFrame=!0,r._videoTrack._originMediaStreamTrack.stop())}),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new il({},this.store):this.isPlanB?new Op({},this.store):new Ec({},this.store),this.bindConnectionEvents(this.connection)),this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(n=>{let[r,{track:o}]=n;switch(r){case We.LocalVideoTrack:o._hints.includes(Lr.LOW_STREAM)?o.close():this.pendingLocalTracks.push(o);break;case We.LocalAudioTrack:o instanceof so?this.pendingLocalTracks=this.pendingLocalTracks.concat(o.trackList):this.pendingLocalTracks.push(o);break;case We.LocalVideoLowTrack:}}),this.emit(Yt.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r,o]=n;Array.from(au(o).call(o)).forEach(s=>{this.setPendingRemoteMedia(r,s)}),this.emit(Yt.MediaReconnectStart,r.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),U.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(n,r){for(const o of this.pendingRemoteTracks){const{user:s,kind:l}=o;if((n instanceof CC?n.uid:n)===s.uid&&r===l)return!0}return!1}setPendingRemoteMedia(n,r){this.hasPendingRemoteMedia(n,r)||this.pendingRemoteTracks.push({user:n,kind:r})}restartICE(n){var r=this;return Ma(function*(){if(!r.connection||r.state!==Mr.Connected||r.connection instanceof il)return;const o=yield Bt(r.mutex.lock("From P2PChannel.restartICE"));let s;try{s=yield Bt(r.connection.restartICE(n));const h=yield Bt(s.next());if(h.done)return;const m=h.value,v=yield m;switch(r.reportPCDisconnectedOrFailed(n),n){case ri.TCP:r._pcStatsUploadType=ds.TCP_RESTART;break;case ri.RELAY:r._pcStatsUploadType=ds.RELAY_RESTART;break;default:r._pcStatsUploadType=ds.OLD_RESTART}r._isInRestartIce=!0,s.next(v)}catch(h){var l;(l=s)===null||l===void 0||l.throw(h)}finally{o()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats(),r=this.localTrackMap.get(We.LocalVideoTrack),o=this.localTrackMap.get(We.LocalAudioTrack),s=n.videoSend.find(V=>V.ssrc===(r==null?void 0:r.ssrcs[0].ssrcId)),l=n.audioSend.find(V=>V.ssrc===(o==null?void 0:o.ssrcs[0].ssrcId));if(!s||!l)return 1;const h=fs(this,Yt.NeedSignalRTT),m=s?s.rttMs:void 0,v=l?l.rttMs:void 0,S=m&&v?(m+v)/2:m||v,T=(S&&h?(S+h)/2:S||h)||0,b=100*n.sendPacketLossRate*.7/50+.3*T/1500,I=b<.17?1:b<.36?2:b<.59?3:b<.1?4:5,L=r==null?void 0:r.track;if(L&&L._encoderConfig&&L._hints.indexOf(Lr.SCREEN_TRACK)===-1){const V=L._encoderConfig.bitrateMax,K=n.bitrate.actualEncoded;if(V&&K){const Y=(1e3*V-K)/(1e3*V);return M9[Y<.15?0:Y<.3?1:Y<.45?2:Y<.6?3:4][I]}}return I}getDownlinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats();let r=0;return Array.from(this.remoteUserMap.entries()).forEach(o=>{let[s]=o;const l=s._audioSSRC,h=s._videoSSRC,m=n.audioRecv.find(K=>K.ssrc===l),v=n.videoRecv.find(K=>K.ssrc===h);if(!m&&!v)return void(r+=1);const S=fs(this,Yt.NeedSignalRTT),T=n.rtt,b=(T&&S?(T+S)/2:T||S)||0,I=m?m.jitterMs:void 0,L=n.recvPacketLossRate;let V=.7*L*100/50+.3*b/1500;I&&(V=.6*L*100/50+.2*b/1500+.2*I/400),r+=V<.1?1:V<.17?2:V<.36?3:V<.59?4:5}),this.remoteUserMap.size>0?Math.round(r/this.remoteUserMap.size):r}async muteLocalTrack(n){return new Me((r,o)=>{this.handleMuteLocalTrack(n,r,o)})}filterTobePublishedTracks(n,r,o){const s=[],l=gr(),h=this.getAllTracks();n=dD(n=n.filter(S=>h.indexOf(S)===-1));let m=!1,v=!1;for(const S of n){if(S instanceof Rr&&(this.localTrackMap.has(We.LocalVideoTrack)||m?new Q(z.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(s.push({track:S,type:We.LocalVideoTrack}),m=!0),r)){const T=this.getLowVideoTrack(S,o);s.push({track:T,type:We.LocalVideoLowTrack})}if(S instanceof vi){const T=this.localTrackMap.get(We.LocalAudioTrack);if(T){if(!(T.track instanceof so))throw new Q(z.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(S._bypassWebAudio)throw new Q(z.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");T.track.addAudioTrack(S),this.bindLocalAudioTrackEvents(S,!0)}else if(v){const b=s.find(I=>{let{type:L}=I;return L===We.LocalAudioTrack});if(!(b.track instanceof so))throw new Q(z.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(S._bypassWebAudio)throw new Q(z.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");b.track.addAudioTrack(S)}else{if(!l.webAudioMediaStreamDest||S instanceof so||S._bypassWebAudio)s.push({track:S,type:We.LocalAudioTrack});else{const b=new so;b.addAudioTrack(S),s.push({track:b,type:We.LocalAudioTrack})}v=!0}}}return s}filterTobeUnpublishedTracks(n){const r=[],o=this.getAllTracks();n=dD(n=n.filter(s=>o.indexOf(s)!==-1));for(const s of n){if(s instanceof vi){const l=this.localTrackMap.get(We.LocalAudioTrack);if(!l)continue;l.track instanceof so?(l.track.removeAudioTrack(s),this.unbindLocalAudioTrackEvents(s),l.track.trackList.length===0&&(r.push([We.LocalAudioTrack,l]),l.track.close())):r.push([We.LocalAudioTrack,l])}if(s instanceof Rr){const l=this.localTrackMap.get(We.LocalVideoTrack);if(!l)continue;r.push([We.LocalVideoTrack,l]);const h=this.localTrackMap.get(We.LocalVideoLowTrack);h&&r.push([We.LocalVideoLowTrack,h])}}return r}bindLocalTrackEvents(n){n.forEach(r=>{let{track:o,type:s}=r;switch(s){case We.LocalVideoTrack:o.addListener(dt.GET_STATS,this.handleGetLocalVideoStats),o.addListener(dt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.addListener(dt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.addListener(dt.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),o.addListener(dt.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),o.addListener(dt.NEED_REPLACE_TRACK,this.handleReplaceTrack),o.addListener(dt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.addListener(dt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case We.LocalAudioTrack:this.bindLocalAudioTrackEvents(o);break;case We.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(n,r){n instanceof so?n.trackList.forEach(o=>{o.addListener(dt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.addListener(dt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.addListener(dt.GET_STATS,this.handleGetLocalAudioStats),o.addListener(dt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.addListener(dt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.addListener(dt.GET_STATS,this.handleGetLocalAudioStats),n.addListener(dt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.addListener(dt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.addListener(dt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.addListener(dt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),r||n.addListener(dt.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(n){n||(n=Array.from(this.localTrackMap.entries()).map(r=>{let[o,{track:s}]=r;return{track:s,type:o}})),n.forEach(r=>{let{track:o,type:s}=r;switch(s){case We.LocalVideoTrack:o.off(dt.GET_STATS,this.handleGetLocalVideoStats),o.off(dt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),o.off(dt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),o.off(dt.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),o.off(dt.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),o.off(dt.NEED_REPLACE_TRACK,this.handleReplaceTrack),o.off(dt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),o.off(dt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case We.LocalAudioTrack:this.unbindLocalAudioTrackEvents(o);break;case We.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(n){n instanceof so?n.trackList.forEach(r=>{r.off(dt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(dt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(dt.GET_STATS,this.handleGetLocalAudioStats),r.off(dt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(dt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.off(dt.GET_STATS,this.handleGetLocalAudioStats),n.off(dt.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(dt.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(dt.NEED_REPLACE_TRACK,this.handleReplaceTrack),n.off(dt.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(dt.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(n,r){r instanceof F0&&r.addListener(dt.GET_STATS,o=>{o(this.handleGetRemoteVideoStats(n))}),r instanceof B0&&r.addListener(dt.GET_STATS,o=>{o(this.handleGetRemoteAudioStats(n))})}unbindRemoteTrackEvents(n){n&&n.removeAllListeners(dt.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r,o]=n;o.has(It.AUDIO)&&this.unbindRemoteTrackEvents(r._audioTrack),o.has(It.VIDEO)&&this.unbindRemoteTrackEvents(r._videoTrack)})}createGatewayPublishMessage(n,r){return n.map((o,s)=>{let l,h,{track:m,type:v}=o;switch(v){case We.LocalAudioTrack:l=Nr.Audio,h={dtx:m instanceof _0&&m._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case We.LocalVideoTrack:l=m._hints.includes(Lr.SCREEN_TRACK)?Nr.Screen:Nr.High,h=ol(ol({},sD(m)),{},{codec:this.store.codec});break;case We.LocalVideoLowTrack:l=Nr.Low,h=ol(ol({},sD(m)),{},{codec:this.store.codec})}return{stream_type:l,attributes:h,ssrcs:r[s]}})}createGatewayUnpublishMessage(n){return n.map(r=>{let o,[s,{track:l,ssrcs:h,id:m}]=r;switch(s){case We.LocalVideoTrack:o=l._hints.includes(Lr.SCREEN_TRACK)?Nr.Screen:Nr.High;break;case We.LocalAudioTrack:o=Nr.Audio;break;case We.LocalVideoLowTrack:o=Nr.Low}return{stream_type:o,ssrcs:h,mid:m}})}assignLocalTracks(n,r){n.forEach((o,s)=>{let{track:l,type:h}=o;this.localTrackMap.set(h,{track:l,id:r[s].id,ssrcs:r[s].localSSRC})})}withdrawLocalTracks(n){n.forEach(r=>{let[o]=r;this.localTrackMap.delete(o)})}bindConnectionEvents(n){n.onConnectionStateChange=async r=>{if(U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(r,")")),this.emit(Yt.PeerConnectionStateChange,r),r!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),r==="connected"&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),re("NEW_ICE_RESTART")){if(this._restartStates.includes(r)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const o=h=>{(n.iceConnectionState==="disconnected"||n.iceConnectionState==="checking"||n.iceConnectionState==="failed")&&(U.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(h)),fs(this,Yt.QueryClientConnectionState)==="CONNECTED"&&this.emit(Yt.RequestRestartICE,h))},s=()=>{n.iceConnectionState!=="disconnected"&&n.iceConnectionState!=="checking"&&n.iceConnectionState!=="failed"||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),U.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout(()=>this.emit(Yt.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},l=re("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout(()=>{if(re("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&gr().supportPCSetConfiguration)o(ri.RELAY),this._restartTimer=window.setTimeout(s,l);else if(Qn())o(ri.UDP),this._restartTimer=window.setTimeout(s,4e3);else{if(o(ri.TCP),gr().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout(()=>{o(ri.RELAY),this._restartTimer=window.setTimeout(s,l)},l));this._restartTimer=window.setTimeout(s,l)}},800))}}else{if(r==="disconnected"&&n.iceConnectionState==="disconnected")return setTimeout(()=>{n.iceConnectionState==="disconnected"&&re("ICE_RESTART")&&fs(this,Yt.QueryClientConnectionState)==="CONNECTED"&&this.emit(Yt.RequestRestartICE)},800),void setTimeout(()=>{n.peerConnectionState==="disconnected"&&(U.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout(()=>this.emit(Yt.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);r==="failed"&&(U.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout(()=>this.emit(Yt.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())}},n.onICEConnectionStateChange=r=>{r!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(r,")")),Je.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:r,tag:Yn.TRACER}).onSuccess(),this.emit(Yt.IceConnectionStateChange,r)},n.onICETransportStateChange=r=>{U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(r,")"))},n.onDTLSTransportStateChange=r=>{U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(r,")"))},n.onDTLSTransportError=r=>{U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(r,")"))},n.onFirstAudioDecoded=r=>{var o;const s=Array.from(au(o=this.remoteUserMap).call(o)).find(h=>h._audioSSRC===r);var l;s&&(this.store.subscribe(s.uid,"audio",void 0,void 0,void 0,Date.now()),(l=s.audioTrack)===null||l===void 0||l.emit(md.FIRST_FRAME_DECODED),Je.firstRemoteFrame(this.store.sessionId,ni.FIRST_AUDIO_DECODE,Kn.FIRST_AUDIO_DECODE,{peer:s._uintid,subscribeElapse:ua.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId}))},n.onFirstAudioReceived=r=>{var o;const s=Array.from(au(o=this.remoteUserMap).call(o)).find(l=>l._audioSSRC===r);s&&Je.firstRemoteFrame(this.store.sessionId,ni.FIRST_AUDIO_RECEIVED,Kn.FIRST_AUDIO_RECEIVED,{peer:s._uintid,subscribeElapse:ua.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId})},n.onFirstVideoDecoded=(r,o,s)=>{this.reportVideoFirstFrameDecoded(r,o,s)},n.onFirstVideoReceived=r=>{var o;const s=Array.from(au(o=this.remoteUserMap).call(o)).find(l=>l._videoSSRC===r);s&&Je.firstRemoteFrame(this.store.sessionId,ni.FIRST_VIDEO_RECEIVED,Kn.FIRST_VIDEO_RECEIVED,{peer:s._uintid,subscribeElapse:ua.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId})},n.onSelectedLocalCandidateChanged=(r,o)=>{const s=r.candidateType==="relay",l=o.candidateType==="relay";o.candidateType!=="unknown"&&s===l||this.emit(Yt.ConnectionTypeChange,s),U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(C0(o))," -> ").concat(JSON.stringify(C0(r)),")"))},n.onSelectedRemoteCandidateChanged=(r,o)=>{U.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(C0(o))," -> ").concat(JSON.stringify(C0(r)),")"))},n.onFirstVideoDecodedTimeout=r=>{this.reportVideoFirstFrameDecoded(r,void 0,void 0,!0)}}unbindConnectionEvents(n){n.onConnectionStateChange=void 0,n.onICEConnectionStateChange=void 0,n.onICETransportStateChange=void 0,n.onDTLSTransportStateChange=void 0,n.onDTLSTransportError=void 0,n.onFirstAudioDecoded=void 0,n.onFirstAudioReceived=void 0,n.onFirstVideoDecoded=void 0,n.onFirstVideoReceived=void 0,n.onSelectedLocalCandidateChanged=void 0,n.onSelectedRemoteCandidateChanged=void 0,n.onFirstVideoDecodedTimeout=void 0}filterTobeMutedTracks(n){const r=[];if(this.getAllTracks().indexOf(n)===-1)return r;const o=this.localTrackMap.get(We.LocalAudioTrack);if(n instanceof vi&&(o==null?void 0:o.track)instanceof so)return o.track.isActive||r.push([We.LocalAudioTrack,o]),r;const s=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:h}]=l;return n===h});if(s&&(r.push(s),s[0]===We.LocalVideoTrack)){const l=this.localTrackMap.get(We.LocalVideoLowTrack);l&&r.push([We.LocalVideoLowTrack,l])}return r}filterTobeUnmutedTracks(n){const r=[],o=this.localTrackMap.get(We.LocalAudioTrack);if(n instanceof vi&&(o==null?void 0:o.track)instanceof so)return o.track.isActive&&r.push([We.LocalAudioTrack,o]),r;const s=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:h}]=l;return n===h});if(s)if(s[0]===We.LocalVideoTrack){r.push(s);const l=this.localTrackMap.get(We.LocalVideoLowTrack);l&&r.push([We.LocalVideoLowTrack,l])}else r.push(s);return r}createMuteMessage(n){return n.map(r=>{let o,[s,{track:l,ssrcs:h,id:m}]=r;switch(s){case We.LocalAudioTrack:o=Nr.Audio;break;case We.LocalVideoTrack:o=l._hints.includes(Lr.SCREEN_TRACK)?Nr.Screen:Nr.High;break;case We.LocalVideoLowTrack:o=Nr.Low}return{stream_type:o,ssrcs:h,mid:m}})}createUnmuteMessage(n){return n.map(r=>{let o,[s,{track:l,ssrcs:h,id:m}]=r;switch(s){case We.LocalAudioTrack:o=Nr.Audio;break;case We.LocalVideoTrack:o=l._hints.includes(Lr.SCREEN_TRACK)?Nr.Screen:Nr.High;break;case We.LocalVideoLowTrack:o=Nr.Low}return{stream_type:o,ssrcs:h,mid:m}})}filterTobeUnSubscribedTracks(n,r){const o=[],s=this.remoteUserMap.get(n);if(!s)return o;if(r){const l=s.get(r);if(!l)return o;o.push([n,{kind:r,id:l}])}else Array.from(s.entries()).forEach(l=>{let[h,m]=l;o.push([n,{kind:h,id:m}])});return o}createUnsubscribeMessage(n){const r=[];return n.forEach(o=>{let[s,{kind:l,id:h}]=o;switch(l){case It.VIDEO:return void(s._videoSSRC&&r.push({stream_type:It.VIDEO,ssrcId:s._videoSSRC}));case It.AUDIO:return void(s._audioSSRC&&r.push({stream_type:It.AUDIO,ssrcId:s._audioSSRC}))}}),r}createUnsubscribeAllMessage(n){const r=new Map;return n.forEach(o=>{let[s,{kind:l}]=o;if(r.has(s)){let h=r.get(s);l===It.VIDEO?h|=Cr.Video:h|=Cr.Audio,r.set(s,h)}else l===It.VIDEO?r.set(s,Cr.Video):r.set(s,Cr.Audio)}),{users:Array.from(r.entries()).map(o=>{let[s,l]=o;return{stream_id:s.uid,stream_type:l}})}}withdrawRemoteTracks(n){n.forEach(r=>{let[o,{kind:s}]=r;const l=this.remoteUserMap.get(o);l&&(l.delete(s),Array.from(l.entries()).length===0&&this.remoteUserMap.delete(o))})}async updateBitrateLimit(n){const r=this.localTrackMap.get(We.LocalVideoTrack),o=this.localTrackMap.get(We.LocalVideoLowTrack);r&&await r.track.setBitrateLimit(n.uplink),o&&n.low_stream_uplink&&await o.track.setBitrateLimit({max_bitrate:n.low_stream_uplink.bitrate,min_bitrate:n.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}mapPubResToRemoteConfig(n,r){return n.map((o,s)=>{var l;let{stream_type:h}=o;return(l=r.find(m=>{let{stream_type:v}=m;return h===v}))===null||l===void 0?void 0:l.attributes})}async tryToUnmuteAudio(n){for(let o=0;o<n.length;o++)if(n[o]instanceof vi){var r;const s=this.filterTobeUnmutedTracks(n[o]);if(s.length===0)continue;await((r=this.connection)===null||r===void 0?void 0:r.unmuteLocal(s.map(h=>{let[,{id:m}]=h;return m})));const l=this.createUnmuteMessage(s);return void await nr(this,Yt.RequestUnmuteLocal,l)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=n=>{var r;return!((r=this.connection)===null||r===void 0||!r.getRemoteVideoIsReady(n))},this.statsUploader.requestUpload=(n,r)=>this.emit(Yt.RequestUploadStats,n,r),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Ei(Ty(this.dtlsFailedCount,kr)),this.emit(Yt.RequestReconnect)}async reconnectP2P(){const n=Array.from(this.localTrackMap.entries()),r=this.createGatewayUnpublishMessage(n);Array.from(this.remoteUserMap.entries()),r.length>0&&await _i(this,Yt.RequestUnpublishForReconnectPC,r),this.disconnectForReconnect(),this.emit(Yt.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(We.LocalVideoTrack)||this.pendingLocalTracks.some(n=>n instanceof Rr)}throwIfTrackTypeNotMatch(n){if(n.filter(r=>r instanceof Rr).length>1)throw new Q(z.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n.filter(r=>r instanceof vi).length>1&&(n.some(r=>r instanceof vi&&r._bypassWebAudio)||!gr().webAudioMediaStreamDest))throw new Q(z.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const r of n){if(r instanceof Rr&&this.pendingLocalTracks.some(o=>o instanceof Rr))throw new Q(z.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(r instanceof vi&&this.pendingLocalTracks.some(o=>o instanceof vi)&&(!gr().webAudioMediaStreamDest||r._bypassWebAudio||this.pendingLocalTracks.some(o=>o instanceof vi&&o._bypassWebAudio)))throw new Q(z.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(n,r){const o=gr().supportDualStreamEncoding,s=ol(ol({},{width:160,height:120,framerate:15,bitrate:50}),r);let l;l=o?n._mediaStreamTrack.clone():kL(n,s);const h=jn(8,"track-low-"),m=new Rr(l,ol(ol({},o&&{scaleResolutionDownBy:FY(s,n)}),{},{frameRate:s.framerate,bitrateMax:s.bitrate,bitrateMin:s.bitrate}),void 0,void 0,h);return m.on(hp.TRANSCEIVER_UPDATED,v=>{n._updateRtpTransceiver(v,fd.LOW_STREAM)}),m._hints.push(Lr.LOW_STREAM),n.addListener(dt.NEED_CLOSE,()=>{m.close()}),m}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(n,r,o){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(this.connection&&this.connection instanceof Ec){var l,h,m,v;const S=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:T,dtlsTransportState:b,peerConnectionState:I}=this.connection,{local:L,remote:V}=await this.connection.getSelectedCandidatePair();Je.pcStats(this.store.sessionId,{startTime:S,eventElapse:n-S||0,iceconnectionsate:T,dtlsstate:b,connectionstate:I,intSucc:r?1:2,error:s,selectedLocalCandidateProtocol:(l=L==null?void 0:L.protocol)!==null&&l!==void 0?l:"",selectedLocalCandidateType:(h=L.candidateType)!==null&&h!==void 0?h:"",selectedLocalCandidateAddress:"".concat(L.address,":").concat(L.port),selectedRemoteCandidateProtocol:(m=V.protocol)!==null&&m!==void 0?m:"",selectedRemoteCandidateType:(v=V.candidateType)!==null&&v!==void 0?v:"",selectedRemoteCandidateAddress:"".concat(V.address,":").concat(V.port),restartCnt:o})}}reportVideoFirstFrameDecoded(n,r,o,s){var l;const h=Array.from(au(l=this.remoteUserMap).call(l)).find(m=>m._videoSSRC===n);if(h){s||this.store.subscribe(h.uid,"video",void 0,void 0,void 0,void 0,Date.now());const m=this.store.keyMetrics,v=m.subscribe.find(S=>S.userId===h.uid&&S.type==="video");Je.firstRemoteVideoDecode(this.store.sessionId,ni.FIRST_VIDEO_DECODE,Kn.FIRST_VIDEO_DECODE,{peer:h._uintid,videowidth:r,videoheight:o,subscribeElapse:ua.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId,apEnd:m.requestAPEnd||0,apStart:m.requestAPStart||0,joinGwEnd:m.joinGatewayEnd||0,joinGwStart:m.joinGatewayStart||0,pcEnd:m.peerConnectionEnd||0,pcStart:m.peerConnectionStart||0,subscriberEnd:(v==null?void 0:v.subscribeEnd)||0,subscriberStart:(v==null?void 0:v.subscribeStart)||0,videoAddNotify:(v==null?void 0:v.streamAdded)||0,state:s?1:0})}}async remoteMediaSsrcChanged(n,r,o){if(!this.connection)return!1;const s=this.remoteUserMap.get(n);if(!s)return!1;const l=s.get(r);if(!l)return!1;const h=await this.connection.getRemoteSSRC(l);return h!==void 0&&h!==o}resetConnection(n){U.debug("[".concat(this.store.clientId,"] [P2PChannel] reset connection to ").concat(n)),this.state===Mr.Connected?(U.debug("[".concat(this.store.clientId,"] [P2PChannel] fallback to websocket but P2PChannel state still connected, disconnect first")),this.disconnectForReconnect()):(this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=n===d0.datachannel?new il({},this.store):this.isPlanB?new Op({},this.store):new Ec({},this.store),this.bindConnectionEvents(this.connection)))}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(n=>{let[r,{track:o}]=n;r===We.LocalVideoLowTrack?o._updateRtpTransceiver(void 0,fd.LOW_STREAM):o._updateRtpTransceiver(void 0)})}reportPCDisconnectedOrFailed(n){this.connection&&this.connection instanceof Ec&&(this.connection.iceConnectionState!=="disconnected"&&this.connection.iceConnectionState!=="checking"&&this.connection.iceConnectionState!=="failed"||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===ds.TCP_RESTART&&n===ri.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,ds.DISCONNECTED_OR_FAILED)))}}).prototype,"startP2PConnection",[To],Object.getOwnPropertyDescriptor(Zt.prototype,"startP2PConnection"),Zt.prototype),_e(Zt.prototype,"connect",[To],Object.getOwnPropertyDescriptor(Zt.prototype,"connect"),Zt.prototype),_e(Zt.prototype,"preConnect",[To],Object.getOwnPropertyDescriptor(Zt.prototype,"preConnect"),Zt.prototype),_e(Zt.prototype,"unpublish",[To],Object.getOwnPropertyDescriptor(Zt.prototype,"unpublish"),Zt.prototype),_e(Zt.prototype,"unpublishLowStream",[To],Object.getOwnPropertyDescriptor(Zt.prototype,"unpublishLowStream"),Zt.prototype),_e(Zt.prototype,"subscribe",[To],Object.getOwnPropertyDescriptor(Zt.prototype,"subscribe"),Zt.prototype),_e(Zt.prototype,"massSubscribe",[To],Object.getOwnPropertyDescriptor(Zt.prototype,"massSubscribe"),Zt.prototype),_e(Zt.prototype,"unsubscribe",[To],Object.getOwnPropertyDescriptor(Zt.prototype,"unsubscribe"),Zt.prototype),_e(Zt.prototype,"massUnsubscribe",[To],Object.getOwnPropertyDescriptor(Zt.prototype,"massUnsubscribe"),Zt.prototype),_e(Zt.prototype,"muteRemote",[To],Object.getOwnPropertyDescriptor(Zt.prototype,"muteRemote"),Zt.prototype),_e(Zt.prototype,"unmuteRemote",[To],Object.getOwnPropertyDescriptor(Zt.prototype,"unmuteRemote"),Zt.prototype),_e(Zt.prototype,"hasRemoteMediaWithLock",[To],Object.getOwnPropertyDescriptor(Zt.prototype,"hasRemoteMediaWithLock"),Zt.prototype),_e(Zt.prototype,"disconnectForReconnect",[To],Object.getOwnPropertyDescriptor(Zt.prototype,"disconnectForReconnect"),Zt.prototype),_e(Zt.prototype,"updateBitrateLimit",[To],Object.getOwnPropertyDescriptor(Zt.prototype,"updateBitrateLimit"),Zt.prototype),_e(Zt.prototype,"remoteMediaSsrcChanged",[To],Object.getOwnPropertyDescriptor(Zt.prototype,"remoteMediaSsrcChanged"),Zt.prototype),Zt);function To(n,r,o){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return o.value=async function(){const l=this.mutex,h=await l.lock("From P2PChannel.".concat(r));try{for(var m=arguments.length,v=new Array(m),S=0;S<m;S++)v[S]=arguments[S];return await s.apply(this,v)}finally{h()}},o}function nM(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function Ge(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?nM(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):nM(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}var Vt;(function(n){n.SET_SESSION_ID="SET_SESSION_ID",n.SET_P2P_ID="SET_P2P_id",n.SET_DC_ID="SET_DC_id",n.SET_UID="SET_UID",n.SET_PUB_ID="SET_PUB_ID",n.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",n.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",n.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",n.AVOID_JOIN_START="AVOID_JOIN_START",n.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",n.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",n.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",n.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",n.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",n.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",n.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",n.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",n.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",n.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",n.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",n.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",n.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",n.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",n.RESET_KEY_METRICS="RESET_KEY_METRICS",n.SET_USE_DATACHANNEL="SET_USE_DATACHANNEL"})(Vt||(Vt={}));class sX{constructor(r,o,s,l){N(this,"state",void 0),this.state={codec:r,audioCodec:o,mode:s,clientId:l,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useDataChannel:!1}}dispatch(r){this.state=function(o,s){switch(s.type){case Vt.SET_SESSION_ID:return Ge(Ge({},o),{},{sessionId:s.sessionId});case Vt.SET_P2P_ID:return Ge(Ge({},o),{},{p2pId:s.p2pId});case Vt.SET_UID:return Ge(Ge({},o),{},{uid:s.uid});case Vt.SET_PUB_ID:return Ge(Ge({},o),{},{pubId:s.pubId});case Vt.KEY_METRIC_CLIENT_CREATED:return Ge(Ge({},o),{},{keyMetrics:Ge(Ge({},o.keyMetrics),{},{clientCreated:s.metric})});case Vt.KEY_METRIC_JOIN_START:return Ge(Ge({},o),{},{keyMetrics:Ge(Ge({},o.keyMetrics),{},{joinStart:s.metric})});case Vt.AVOID_JOIN_START:return Ge(Ge({},o),{},{avoidJoinStart:s.avoidJoinStart});case Vt.KEY_METRIC_JOIN_END:return Ge(Ge({},o),{},{keyMetrics:Ge(Ge({},o.keyMetrics),{},{joinEnd:s.metric})});case Vt.KEY_METRIC_REQUEST_AP_START:return Ge(Ge({},o),{},{keyMetrics:Ge(Ge({},o.keyMetrics),{},{requestAPStart:s.metric})});case Vt.KEY_METRIC_REQUEST_AP_END:return Ge(Ge({},o),{},{keyMetrics:Ge(Ge({},o.keyMetrics),{},{requestAPEnd:s.metric})});case Vt.KEY_METRIC_JOIN_GATEWAY_START:return Ge(Ge({},o),{},{keyMetrics:Ge(Ge({},o.keyMetrics),{},{joinGatewayStart:s.metric})});case Vt.KEY_METRIC_JOIN_GATEWAY_END:return Ge(Ge({},o),{},{keyMetrics:Ge(Ge({},o.keyMetrics),{},{joinGatewayEnd:s.metric})});case Vt.KEY_METRIC_PEER_CONNECTION_START:return Ge(Ge({},o),{},{keyMetrics:Ge(Ge({},o.keyMetrics),{},{peerConnectionStart:s.metric})});case Vt.KEY_METRIC_PEER_CONNECTION_END:return Ge(Ge({},o),{},{keyMetrics:Ge(Ge({},o.keyMetrics),{},{peerConnectionEnd:s.metric})});case Vt.KEY_METRIC_DESCRIPTION_START:return Ge(Ge({},o),{},{keyMetrics:Ge(Ge({},o.keyMetrics),{},{descriptionStart:s.metric})});case Vt.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return Ge(Ge({},o),{},{keyMetrics:Ge(Ge({},o.keyMetrics),{},{signalChannelOpen:s.metric})});case Vt.KEY_METRIC_ICE_CONNECTION_END:return Ge(Ge({},o),{},{keyMetrics:Ge(Ge({},o.keyMetrics),{},{iceConnectionEnd:s.metric})});case Vt.KEY_METRIC_PUBLISH:{const l=o.keyMetrics.publish,h=l.findIndex(m=>m.trackId===s.metric.trackId);return h!==-1?(l[h]=Ge(Ge({},l[h]),s.metric),Ge(Ge({},o),{},{keyMetrics:Ge(Ge({},o.keyMetrics),{},{publish:[...l]})})):Ge(Ge({},o),{},{keyMetrics:Ge(Ge({},o.keyMetrics),{},{publish:[...o.keyMetrics.publish,s.metric]})})}case Vt.KEY_METRIC_SUBSCRIBE:{const l=o.keyMetrics.subscribe,h=l.findIndex(m=>m.userId===s.metric.userId&&m.type===s.metric.type);return h!==-1?(l[h]=Ge(Ge({},l[h]),s.metric),Ge(Ge({},o),{},{keyMetrics:Ge(Ge({},o.keyMetrics),{},{subscribe:[...l]})})):Ge(Ge({},o),{},{keyMetrics:Ge(Ge({},o.keyMetrics),{},{subscribe:[...o.keyMetrics.subscribe,s.metric]})})}case Vt.SET_CLOUD_PROXY_SERVER_MODE:return o.cloudProxyServerMode=s.mode,o;case Vt.RECORD_JOIN_CHANNEL_SERVICE:return typeof s.index!="number"?o.joinChannelServiceRecords=[...o.joinChannelServiceRecords,s.record]:(o.joinChannelServiceRecords[s.index]=Ge(Ge({},o.joinChannelServiceRecords[s.index]),s.record),o.joinChannelServiceRecords=[...o.joinChannelServiceRecords]),o;case Vt.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return o.joinChannelServiceRecords=[],o;case Vt.RESET_KEY_METRICS:return o.keyMetrics={publish:[],subscribe:[]},o;case Vt.SET_USE_DATACHANNEL:return Ge(Ge({},o),{},{useDataChannel:s.val});default:return o}}(this.state,r)}set sessionId(r){this.dispatch({type:Vt.SET_SESSION_ID,sessionId:r})}get sessionId(){return this.state.sessionId}get codec(){return this.state.codec}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(r){this.dispatch({type:Vt.SET_P2P_ID,p2pId:r})}get p2pId(){return this.state.p2pId}set dcId(r){this.dispatch({type:Vt.SET_DC_ID,dcId:r})}get dcId(){return this.state.dcId}set uid(r){this.dispatch({type:Vt.SET_UID,uid:r})}get uid(){return this.state.uid}set pubId(r){this.dispatch({type:Vt.SET_PUB_ID,pubId:r})}get pubId(){return this.state.pubId}set cloudProxyServerMode(r){this.dispatch({type:Vt.SET_CLOUD_PROXY_SERVER_MODE,mode:r})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useDataChannel(r){this.dispatch({type:Vt.SET_USE_DATACHANNEL,val:r})}get useDataChannel(){return this.state.useDataChannel}clientCreated(){this.dispatch({type:Vt.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:Vt.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:Vt.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:Vt.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:Vt.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:Vt.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:Vt.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:Vt.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:Vt.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:Vt.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:Vt.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:Vt.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(r,o,s,l){this.dispatch({type:Vt.KEY_METRIC_PUBLISH,metric:Ge(Ge({trackId:r,type:o},s&&{publishStart:s}),l&&{publishEnd:l})})}subscribe(r,o,s,l,h,m,v){this.dispatch({type:Vt.KEY_METRIC_SUBSCRIBE,metric:Ge(Ge(Ge(Ge(Ge({userId:r,type:o},s&&{subscribeStart:s}),l&&{subscribeEnd:l}),h&&{firstFrame:h}),m&&{streamAdded:m}),v&&{firstDecoded:v})})}massSubscribe(r,o,s,l){r.forEach(h=>{this.dispatch({type:Vt.KEY_METRIC_SUBSCRIBE,metric:Ge(Ge(Ge({userId:h.userId,type:h.type},o&&{subscribeStart:o}),s&&{subscribeEnd:s}),l&&{firstFrame:l})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(r,o){r.service==="gateway"&&Array.isArray(r.urls)&&(r.urls=r.urls.map(s=>s.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof o!="number"?(this.dispatch({type:Vt.RECORD_JOIN_CHANNEL_SERVICE,record:Ge(Ge({},r),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(o<0||o>=this.state.joinChannelServiceRecords.length||this.dispatch({type:Vt.RECORD_JOIN_CHANNEL_SERVICE,record:r,index:o}),o)}catch{return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:Vt.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:Vt.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch{return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(r){this.dispatch({type:Vt.AVOID_JOIN_START,avoidJoinStart:r})}}let H0;const cX=()=>(H0||H0||(H0=(window.location.protocol.split(":")[0]||"").toUpperCase(),H0))==="HTTPS",rM=()=>window.isSecureContext!==void 0;function lX(n){let r=aM();return function(o,s){let l=o.appId;l!==void 0&&(nn(s,10),Hs(s,l));let h=o.cid;h!==void 0&&(nn(s,16),nn(s,h));let m=o.cname;m!==void 0&&(nn(s,26),Hs(s,m));let v=o.deviceId;v!==void 0&&(nn(s,34),Hs(s,v));let S=o.elapse;S!==void 0&&(nn(s,40),al(s,S));let T=o.fileSize;T!==void 0&&(nn(s,48),al(s,Ad(T)));let b=o.height;b!==void 0&&(nn(s,56),al(s,Ad(b)));let I=o.jpg;I!==void 0&&(nn(s,66),nn(s,I.length),function(lo,ve){let Se=Nd(lo,ve.length);lo.bytes.set(ve,Se)}(s,I));let L=o.networkType;L!==void 0&&(nn(s,72),al(s,Ad(L)));let V=o.osType;V!==void 0&&(nn(s,80),al(s,Ad(V)));let K=o.requestId;K!==void 0&&(nn(s,90),Hs(s,K));let Y=o.sdkVersion;Y!==void 0&&(nn(s,98),Hs(s,Y));let q=o.sequence;q!==void 0&&(nn(s,104),al(s,Ad(q)));let ue=o.sid;ue!==void 0&&(nn(s,114),Hs(s,ue));let me=o.timestamp;me!==void 0&&(nn(s,120),al(s,me));let ye=o.uid;ye!==void 0&&(nn(s,128),nn(s,ye));let qe=o.vid;qe!==void 0&&(nn(s,136),nn(s,qe));let Te=o.width;Te!==void 0&&(nn(s,144),al(s,Ad(Te)));let xe=o.service;xe!==void 0&&(nn(s,152),nn(s,xe));let Ce=o.callbackData;Ce!==void 0&&(nn(s,162),Hs(s,Ce));let Fe=o.jpgEncryption;Fe!==void 0&&(nn(s,168),nn(s,Fe));let fn=o.requestType;fn!==void 0&&(nn(s,176),nn(s,fn));let bt=o.scorePorn;bt!==void 0&&(nn(s,185),tb(s,bt));let Un=o.scoreSexy;Un!==void 0&&(nn(s,193),tb(s,Un));let bn=o.scoreNeutral;bn!==void 0&&(nn(s,201),tb(s,bn));let vr=o.scene;vr!==void 0&&(nn(s,208),nn(s,vr));let oi=o.ossFilePrefix;oi!==void 0&&(nn(s,218),Hs(s,oi));let dr=o.serviceVendor;if(dr!==void 0)for(let lo of dr){nn(s,226);let ve=aM();hX(lo,ve),nn(s,ve.limit),gX(s,ve),mX(ve)}}(n,r),function(o){let s=o.bytes,l=o.limit;return s.length===l?s:s.subarray(0,l)}(r)}function uX(n){return function(o){let s={};e:for(;!sM(o);){let l=Ws(o);switch(l>>>3){case 0:break e;case 1:s.code=Ws(o);break;case 2:s.msg=cM(o,Ws(o));break;case 3:{let h=pX(o);s.data=dX(o),o.limit=h;break}default:iM(o,7&l)}}return s}({bytes:r=n,offset:0,limit:r.length});var r}function dX(n){let r={};e:for(;!sM(n);){let o=Ws(n);switch(o>>>3){case 0:break e;case 1:r.requestId=cM(n,Ws(n));break;case 2:r.requestType=Ws(n)>>>0;break;case 3:r.scorePorn=eb(n);break;case 4:r.scoreSexy=eb(n);break;case 5:r.scoreNeutral=eb(n);break;case 6:r.requestScene=Ws(n)>>>0;break;case 7:r.scene=Ws(n)>>>0;break;default:iM(n,7&o)}}return r}function hX(n,r){let o=n.service;o!==void 0&&(nn(r,8),nn(r,o));let s=n.vendor;s!==void 0&&(nn(r,16),nn(r,s));let l=n.token;l!==void 0&&(nn(r,26),Hs(r,l));let h=n.callbackUrl;h!==void 0&&(nn(r,34),Hs(r,h))}function pX(n){let r=Ws(n),o=n.limit;return n.limit=n.offset+r,o}function iM(n,r){switch(r){case 0:for(;128&lM(n););break;case 2:QC(n,Ws(n));break;case 5:QC(n,4);break;case 1:QC(n,8);break;default:throw new Error("Unimplemented type: "+r)}}let fX=new Float32Array(1);new Uint8Array(fX.buffer);let JC=new Float64Array(1),co=new Uint8Array(JC.buffer);function Ad(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}let oM=[];function aM(){const n=oM.pop();return n?(n.offset=n.limit=0,n):{bytes:new Uint8Array(64),offset:0,limit:0}}function mX(n){oM.push(n)}function QC(n,r){if(n.offset+r>n.limit)throw new Error("Skip past limit");n.offset+=r}function sM(n){return n.offset>=n.limit}function Nd(n,r){let o=n.bytes,s=n.offset,l=n.limit,h=s+r;if(h>o.length){let m=new Uint8Array(2*h);m.set(o),n.bytes=m}return n.offset=h,h>l&&(n.limit=h),s}function ZC(n,r){let o=n.offset;if(o+r>n.limit)throw new Error("Read past limit");return n.offset+=r,o}function cM(n,r){let o=ZC(n,r),s=String.fromCharCode,l=n.bytes,h="ï¿½",m="";for(let v=0;v<r;v++){let S,T,b,I,L=l[v+o];128&L?(224&L)==192?v+1>=r?m+=h:(S=l[v+o+1],(192&S)!=128?m+=h:(I=(31&L)<<6|63&S,I<128?m+=h:(m+=s(I),v++))):(240&L)==224?v+2>=r?m+=h:(S=l[v+o+1],T=l[v+o+2],(49344&(S|T<<8))!=32896?m+=h:(I=(15&L)<<12|(63&S)<<6|63&T,I<2048||I>=55296&&I<=57343?m+=h:(m+=s(I),v+=2))):(248&L)==240?v+3>=r?m+=h:(S=l[v+o+1],T=l[v+o+2],b=l[v+o+3],(12632256&(S|T<<8|b<<16))!=8421504?m+=h:(I=(7&L)<<18|(63&S)<<12|(63&T)<<6|63&b,I<65536||I>1114111?m+=h:(I-=65536,m+=s(55296+(I>>10),56320+(1023&I)),v+=3))):m+=h:m+=s(L)}return m}function Hs(n,r){let o=r.length,s=0;for(let m=0;m<o;m++){let v=r.charCodeAt(m);v>=55296&&v<=56319&&m+1<o&&(v=(v<<10)+r.charCodeAt(++m)-56613888),s+=v<128?1:v<2048?2:v<65536?3:4}nn(n,s);let l=Nd(n,s),h=n.bytes;for(let m=0;m<o;m++){let v=r.charCodeAt(m);v>=55296&&v<=56319&&m+1<o&&(v=(v<<10)+r.charCodeAt(++m)-56613888),v<128?h[l++]=v:(v<2048?h[l++]=v>>6&31|192:(v<65536?h[l++]=v>>12&15|224:(h[l++]=v>>18&7|240,h[l++]=v>>12&63|128),h[l++]=v>>6&63|128),h[l++]=63&v|128)}}function gX(n,r){let o=Nd(n,r.limit),s=n.bytes,l=r.bytes;for(let h=0,m=r.limit;h<m;h++)s[h+o]=l[h]}function lM(n){return n.bytes[ZC(n,1)]}function uM(n,r){let o=Nd(n,1);n.bytes[o]=r}function eb(n){let r=ZC(n,8),o=n.bytes;return co[0]=o[r++],co[1]=o[r++],co[2]=o[r++],co[3]=o[r++],co[4]=o[r++],co[5]=o[r++],co[6]=o[r++],co[7]=o[r++],JC[0]}function tb(n,r){let o=Nd(n,8),s=n.bytes;JC[0]=r,s[o++]=co[0],s[o++]=co[1],s[o++]=co[2],s[o++]=co[3],s[o++]=co[4],s[o++]=co[5],s[o++]=co[6],s[o++]=co[7]}function Ws(n){let r,o=0,s=0;do r=lM(n),o<32&&(s|=(127&r)<<o),o+=7;while(128&r);return s}function nn(n,r){for(r>>>=0;r>=128;)uM(n,127&r|128),r>>>=7;uM(n,r)}function al(n,r){let o=r.low>>>0,s=(r.low>>>28|r.high<<4)>>>0,l=r.high>>>24,h=l===0?s===0?o<16384?o<128?1:2:o<1<<21?3:4:s<16384?s<128?5:6:s<1<<21?7:8:l<128?9:10,m=Nd(n,h),v=n.bytes;switch(h){case 10:v[m+9]=l>>>7&1;case 9:v[m+8]=h!==9?128|l:127&l;case 8:v[m+7]=h!==8?s>>>21|128:s>>>21&127;case 7:v[m+6]=h!==7?s>>>14|128:s>>>14&127;case 6:v[m+5]=h!==6?s>>>7|128:s>>>7&127;case 5:v[m+4]=h!==5?128|s:127&s;case 4:v[m+3]=h!==4?o>>>21|128:o>>>21&127;case 3:v[m+2]=h!==3?o>>>14|128:o>>>14&127;case 2:v[m+1]=h!==2?o>>>7|128:o>>>7&127;case 1:v[m]=h!==1?128|o:127&o}}const vX=async(n,r,o)=>{const s=function(m){const v=[];for(let S=0;S<m.length;S+=2)v.push(parseInt(m.slice(S,S+2),16));return Uint8Array.from(v)}(function(m){const v="0123456789abcdef";function S(fn){let bt,Un="";for(bt=0;bt<=3;bt++)Un+=v.charAt(fn>>8*bt+4&15)+v.charAt(fn>>8*bt&15);return Un}function T(fn,bt){const Un=(65535&fn)+(65535&bt);return(fn>>16)+(bt>>16)+(Un>>16)<<16|65535&Un}function b(fn,bt,Un,bn,vr,oi){return T(function(dr,lo){return dr<<lo|dr>>>32-lo}(T(T(bt,fn),T(bn,oi)),vr),Un)}function I(fn,bt,Un,bn,vr,oi,dr){return b(bt&Un|~bt&bn,fn,bt,vr,oi,dr)}function L(fn,bt,Un,bn,vr,oi,dr){return b(bt&bn|Un&~bn,fn,bt,vr,oi,dr)}function V(fn,bt,Un,bn,vr,oi,dr){return b(bt^Un^bn,fn,bt,vr,oi,dr)}function K(fn,bt,Un,bn,vr,oi,dr){return b(Un^(bt|~bn),fn,bt,vr,oi,dr)}const Y=function(fn){let bt;const Un=1+(fn.length+8>>6),bn=new Array(16*Un);for(bt=0;bt<16*Un;bt++)bn[bt]=0;for(bt=0;bt<fn.length;bt++)bn[bt>>2]|=fn.charCodeAt(bt)<<bt%4*8;return bn[bt>>2]|=128<<bt%4*8,bn[16*Un-2]=8*fn.length,bn}(m);let q,ue,me,ye,qe,Te=1732584193,xe=-271733879,Ce=-1732584194,Fe=271733878;for(q=0;q<Y.length;q+=16)ue=Te,me=xe,ye=Ce,qe=Fe,Te=I(Te,xe,Ce,Fe,Y[q+0],7,-680876936),Fe=I(Fe,Te,xe,Ce,Y[q+1],12,-389564586),Ce=I(Ce,Fe,Te,xe,Y[q+2],17,606105819),xe=I(xe,Ce,Fe,Te,Y[q+3],22,-1044525330),Te=I(Te,xe,Ce,Fe,Y[q+4],7,-176418897),Fe=I(Fe,Te,xe,Ce,Y[q+5],12,1200080426),Ce=I(Ce,Fe,Te,xe,Y[q+6],17,-1473231341),xe=I(xe,Ce,Fe,Te,Y[q+7],22,-45705983),Te=I(Te,xe,Ce,Fe,Y[q+8],7,1770035416),Fe=I(Fe,Te,xe,Ce,Y[q+9],12,-1958414417),Ce=I(Ce,Fe,Te,xe,Y[q+10],17,-42063),xe=I(xe,Ce,Fe,Te,Y[q+11],22,-1990404162),Te=I(Te,xe,Ce,Fe,Y[q+12],7,1804603682),Fe=I(Fe,Te,xe,Ce,Y[q+13],12,-40341101),Ce=I(Ce,Fe,Te,xe,Y[q+14],17,-1502002290),xe=I(xe,Ce,Fe,Te,Y[q+15],22,1236535329),Te=L(Te,xe,Ce,Fe,Y[q+1],5,-165796510),Fe=L(Fe,Te,xe,Ce,Y[q+6],9,-1069501632),Ce=L(Ce,Fe,Te,xe,Y[q+11],14,643717713),xe=L(xe,Ce,Fe,Te,Y[q+0],20,-373897302),Te=L(Te,xe,Ce,Fe,Y[q+5],5,-701558691),Fe=L(Fe,Te,xe,Ce,Y[q+10],9,38016083),Ce=L(Ce,Fe,Te,xe,Y[q+15],14,-660478335),xe=L(xe,Ce,Fe,Te,Y[q+4],20,-405537848),Te=L(Te,xe,Ce,Fe,Y[q+9],5,568446438),Fe=L(Fe,Te,xe,Ce,Y[q+14],9,-1019803690),Ce=L(Ce,Fe,Te,xe,Y[q+3],14,-187363961),xe=L(xe,Ce,Fe,Te,Y[q+8],20,1163531501),Te=L(Te,xe,Ce,Fe,Y[q+13],5,-1444681467),Fe=L(Fe,Te,xe,Ce,Y[q+2],9,-51403784),Ce=L(Ce,Fe,Te,xe,Y[q+7],14,1735328473),xe=L(xe,Ce,Fe,Te,Y[q+12],20,-1926607734),Te=V(Te,xe,Ce,Fe,Y[q+5],4,-378558),Fe=V(Fe,Te,xe,Ce,Y[q+8],11,-2022574463),Ce=V(Ce,Fe,Te,xe,Y[q+11],16,1839030562),xe=V(xe,Ce,Fe,Te,Y[q+14],23,-35309556),Te=V(Te,xe,Ce,Fe,Y[q+1],4,-1530992060),Fe=V(Fe,Te,xe,Ce,Y[q+4],11,1272893353),Ce=V(Ce,Fe,Te,xe,Y[q+7],16,-155497632),xe=V(xe,Ce,Fe,Te,Y[q+10],23,-1094730640),Te=V(Te,xe,Ce,Fe,Y[q+13],4,681279174),Fe=V(Fe,Te,xe,Ce,Y[q+0],11,-358537222),Ce=V(Ce,Fe,Te,xe,Y[q+3],16,-722521979),xe=V(xe,Ce,Fe,Te,Y[q+6],23,76029189),Te=V(Te,xe,Ce,Fe,Y[q+9],4,-640364487),Fe=V(Fe,Te,xe,Ce,Y[q+12],11,-421815835),Ce=V(Ce,Fe,Te,xe,Y[q+15],16,530742520),xe=V(xe,Ce,Fe,Te,Y[q+2],23,-995338651),Te=K(Te,xe,Ce,Fe,Y[q+0],6,-198630844),Fe=K(Fe,Te,xe,Ce,Y[q+7],10,1126891415),Ce=K(Ce,Fe,Te,xe,Y[q+14],15,-1416354905),xe=K(xe,Ce,Fe,Te,Y[q+5],21,-57434055),Te=K(Te,xe,Ce,Fe,Y[q+12],6,1700485571),Fe=K(Fe,Te,xe,Ce,Y[q+3],10,-1894986606),Ce=K(Ce,Fe,Te,xe,Y[q+10],15,-1051523),xe=K(xe,Ce,Fe,Te,Y[q+1],21,-2054922799),Te=K(Te,xe,Ce,Fe,Y[q+8],6,1873313359),Fe=K(Fe,Te,xe,Ce,Y[q+15],10,-30611744),Ce=K(Ce,Fe,Te,xe,Y[q+6],15,-1560198380),xe=K(xe,Ce,Fe,Te,Y[q+13],21,1309151649),Te=K(Te,xe,Ce,Fe,Y[q+4],6,-145523070),Fe=K(Fe,Te,xe,Ce,Y[q+11],10,-1120210379),Ce=K(Ce,Fe,Te,xe,Y[q+2],15,718787259),xe=K(xe,Ce,Fe,Te,Y[q+9],21,-343485551),Te=T(Te,ue),xe=T(xe,me),Ce=T(Ce,ye),Fe=T(Fe,qe);return S(Te)+S(xe)+S(Ce)+S(Fe)}(""+r+o)).slice(0,16),l=s.slice(0,12),h=await window.crypto.subtle.importKey("raw",s,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:l},h,n))};function dM(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}const EX=new Map([["moderation",1],["supervise",2]]);class W0 extends Zn{get connectionState(){return this._connectionState}set connectionState(r){if(this._connectionState===r)return;const o=this._connectionState;this._connectionState=r,this.emit(xr.CONNECTION_STATE_CHANGE,o,r)}get inspectType(){return this._inspectType}set inspectType(r){var o;this._inspectMode=Wc(o=r.map(s=>EX.get(s)||0)).call(o,(s,l)=>s+l),this._inspectType=r}get quality(){return this._quality}set quality(r){this._quality=r>1?1:r<.1?.1:r,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(r){super(),N(this,"name","AgoraRTCVideoContentInspect"),N(this,"_connectionState",jo.CONNECTING),N(this,"_innerConnectionState",void 0),N(this,"sequence",0),N(this,"inspectStartTime",void 0),N(this,"workerManagerConnection",void 0),N(this,"workerConnection",void 0),N(this,"workerMessageLengthLimit",void 0),N(this,"inspectIntervalMinimum",void 0),N(this,"qualityRatio",void 0),N(this,"_connectInfo",void 0),N(this,"_cancelTokenSource",Pa.CancelToken.source()),N(this,"_retryConfig",void 0),N(this,"wmSequence",0),N(this,"inspectInterval",void 0),N(this,"inspectTimer",null),N(this,"ossFilePrefix",void 0),N(this,"extraInfo",void 0),N(this,"_inspectType",void 0),N(this,"_inspectMode",void 0),N(this,"_quality",1),N(this,"qualityTimer",null),N(this,"_inspectId",void 0),N(this,"_needWorkUrlOnly",!1),N(this,"inspectImage",()=>{if(this.connectionState!==jo.CONNECTED)throw new Q(z.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===jo.CONNECTED?this.requestToInspectImage():U.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=jn(5,"inspect-"),this.workerMessageLengthLimit=re("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=re("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=re("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=r.interval,this.ossFilePrefix=r.ossFilePrefix,this.extraInfo=r.extraInfo,this.inspectType=r.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new bd("worker-manager-"+this._inspectId,kr),this.on(xr.STATE_CHANGE,(o,s)=>{this._innerConnectionState=o,U.debug("[".concat(this._inspectId,"] Inspect operation :").concat($o[o]," ").concat(s||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new bd("worker-"+this._inspectId,kr),this.handleWorkerEvents()}async init(r,o){this.emit(xr.STATE_CHANGE,$o.CONNECT_AP),this._connectInfo=r;const s=this._cancelTokenSource.token;return this._retryConfig=o,new Me((l,h)=>{this.on(xr.CONNECTION_STATE_CHANGE,(m,v)=>{v===jo.CONNECTED&&l()}),this.requestAP(r,s,o).then(m=>{this.connectWorkerManager(m)}).catch(m=>{h(m)})})}async requestAP(r,o,s){const l=re("WEBCS_DOMAIN").map(v=>"https://".concat(v,"/api/v1")),h=await function(v,S,T,b){let{appId:I,areaCode:L,cname:V,sid:K,token:Y,uid:q}=S;EC++;const ue="image_moderation_api",me={service_name:ue,json_body:JSON.stringify({appId:I,areaCode:L,cname:V,command:"allocateEdge",requestId:EC,seq:EC,sid:K,token:Y,ts:Date.now(),uid:q+""})};let ye,qe,Te=v[0];return Vs(async()=>{ye=Date.now();const xe=await ps(Te,{data:me,cancelToken:T,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(qe=Date.now()-ye,xe.code!==0){const bt=new Q(z.UNEXPECTED_RESPONSE,"image inspect ap error, code"+xe.code,{retry:!0,responseTime:qe});throw U.error(bt.toString()),bt}const Ce=JSON.parse(xe.json_body);if(Ce.code!==200){const bt=new Q(z.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(Ce.code,", reason: ").concat(Ce.reason),{code:Ce.code,responseTime:qe});throw U.error(bt.toString()),bt}if(!Ce.servers||!Array.isArray(Ce.servers)||Ce.servers.length===0){const bt=new Q(z.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:Ce.code,responseTime:qe});throw U.error(bt.toString()),bt}const Fe=re("VIDEO_INSPECT_WORKER_MANAGER_HOST"),fn=re("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:Ce.servers.map(bt=>{let{address:Un,wss:bn}=bt;if(Un&&bn)return"wss://".concat(Un.replace(/\./g,"-"),".").concat(Fe,":").concat(fn||bn)}).filter(bt=>!!bt),workerToken:Ce.workerToken,vid:Ce.vid,responseTime:qe}},(xe,Ce)=>(Je.apworkerEvent(K,{success:!0,sc:200,serviceName:ue,responseDetail:JSON.stringify(xe.addressList),firstSuccess:Ce===0,responseTime:qe,serverIp:v[Ce%v.length]}),!1),(xe,Ce)=>(Je.apworkerEvent(K,{success:!1,sc:xe.data&&xe.data.code||200,serviceName:ue,responseTime:qe,serverIp:v[Ce%v.length]}),!!(xe.code!==z.OPERATION_ABORTED&&xe.code!==z.UNEXPECTED_RESPONSE||xe.data&&xe.data.retry)&&(Te=v[(Ce+1)%v.length],!0)),b)}(l,r,o,s);this.emit(xr.STATE_CHANGE,$o.AP_CONNECTED);const{addressList:m}=h;return this.wmSequence++,m}async connectWorkerManager(r){let o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this._needWorkUrlOnly=o,this.emit(xr.STATE_CHANGE,$o.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(r,1e4)}async connectWorker(r){await this.workerConnection.init([r])}handleWorkerManagerEvents(){this.workerManagerConnection.on(Nt.CONNECTED,async()=>{this.emit(xr.STATE_CHANGE,$o.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.18.0",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on(Nt.CLOSED,()=>{this._innerConnectionState<$o.GET_WORKER_MANAGER_RESPONSE&&U.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on(Nt.FAILED,()=>{this._innerConnectionState<$o.GET_WORKER_MANAGER_RESPONSE&&U.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on(Nt.RECONNECTING,()=>{this._innerConnectionState<$o.GET_WORKER_MANAGER_RESPONSE&&U.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on(Nt.ON_MESSAGE,async r=>{this.emit(xr.STATE_CHANGE,$o.GET_WORKER_MANAGER_RESPONSE);const o=this.workerManagerConnection.url;this.workerManagerConnection.close();const s=JSON.parse(r.data);if(s.code!==200)throw U.error("[".concat(this._inspectId,"] Unexpected code ").concat(s.code," from worker manager")),new Q(z.UNEXPECTED_RESPONSE,"response code of worker is unexpected",s);if(!(s.serverResponse&&s.serverResponse.portWss&&o))throw U.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(s))),new Q(z.UNEXPECTED_RESPONSE,"response content of worker is unexpected",s);{const l=re("VIDEO_INSPECT_WORKER_PORT")||s.serverResponse.portWss,h=o.replace(/:\d+\/?$/,":".concat(l));this.emit(xr.STATE_CHANGE,$o.CONNECT_WORKER,h),this._needWorkUrlOnly?this.emit(xr.REQUEST_NEW_WORKER_URL,h):await this.connectWorker(h)}}),this.workerManagerConnection.on(Nt.WILL_RECONNECT,(r,o)=>{o(r)}),this.workerManagerConnection.on(Nt.REQUEST_NEW_URLS,(r,o)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(r).catch(o)})}handleWorkerEvents(){this.workerConnection.on(Nt.CONNECTED,async()=>{this.emit(xr.STATE_CHANGE,$o.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=jo.CONNECTED}),this.workerConnection.on(Nt.ON_MESSAGE,async r=>{if(r.data instanceof ArrayBuffer){const s=uX(new Uint8Array(r.data));if(re("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&U.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(s)),s.code===200){if(Array.isArray(this.inspectType)&&this.inspectType.length===1&&this.inspectType[0]==="supervise")return void this.emit(xr.INSPECT_RESULT,void 0,void 0);if(s.data&&s.data.scorePorn&&s.data.scoreSexy&&s.data.scoreNeutral){var o;const l={porn:s.data.scorePorn,sexy:s.data.scoreSexy,neutral:s.data.scoreNeutral},h=Wc(o=Object.keys(l)).call(o,(v,S)=>l[v]>l[S]?v:S,"porn"),m=Object.keys(l).find(v=>v===h);this.emit(xr.INSPECT_RESULT,m)}else this.emit(xr.INSPECT_RESULT,void 0,new Q(z.UNEXPECTED_RESPONSE,s.code+"","There is an unexpected data on message"))}else this.emit(xr.INSPECT_RESULT,void 0,new Q(z.UNEXPECTED_RESPONSE,s.code+"",s.msg))}else U.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(xr.INSPECT_RESULT,void 0,new Q(z.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on(Nt.CLOSED,()=>{this.connectionState=jo.CLOSED}),this.workerConnection.on(Nt.FAILED,()=>{this.connectionState=jo.CLOSED}),this.workerConnection.on(Nt.RECONNECTING,()=>{this.connectionState=this.connectionState===jo.CONNECTED?jo.RECONNECTING:jo.CONNECTING}),this.workerConnection.on(Nt.WILL_RECONNECT,(r,o)=>{r==="recover"&&o(r),o("tryNext")}),this.workerConnection.on(Nt.REQUEST_NEW_URLS,(r,o)=>{this.workerManagerConnection.close(),this.once(xr.REQUEST_NEW_WORKER_URL,s=>{r([s])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(s=>{this.connectWorkerManager(s,!0)}).catch(s=>{o(s)})})}static intToLong(r){return{low:r|=0,high:r>>31,unsigned:r>=0}}async requestToInspectImage(){this.sequence++;const r=fs(this,xr.CLIENT_LOCAL_VIDEO_TRACK),o={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(r){if(!r.isPlaying)return void this.emit(xr.INSPECT_RESULT,void 0,new Q(z.INVALID_OPERATION,"Only the track being played can be inspected"));const s=await this.generateRequestData(r,o);this.workerConnection.sendMessage(s,!0,!0)}else this.emit(xr.INSPECT_RESULT,void 0,new Q(z.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(r,o){let{appId:s,cname:l,cid:h,vid:m,sid:v,uid:S}=o;const T=Date.now(),b=await r.getCurrentFrameImage("image/jpeg",this.quality),I=await(async(Y,q,ue)=>await vX(Y.buffer,q,ue))(b,s,l),L=this.sequence+"-"+h+"-"+S+"-"+T+"-"+jn(12,""),V={appId:s,cid:h,cname:l,deviceId:"",elapse:W0.intToLong(Number(T-this.inspectStartTime)),fileSize:I.byteLength,jpgEncryption:2,height:b.height,width:b.width,jpg:I,networkType:6,osType:7,requestId:L,sdkVersion:"4.18.0",sequence:this.sequence,sid:v,timestamp:W0.intToLong(T),uid:S,vid:m,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};this.extraInfo===void 0&&delete V.callbackData,this.ossFilePrefix===void 0&&delete V.ossFilePrefix;const K=lX(V);if(K.byteLength<this.workerMessageLengthLimit){if(re("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const Y=function(q){for(var ue=1;ue<arguments.length;ue++){var me=arguments[ue]!=null?arguments[ue]:{};ue%2?dM(Object(me),!0).forEach(function(ye){N(q,ye,me[ye])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(me)):dM(Object(me)).forEach(function(ye){Object.defineProperty(q,ye,Object.getOwnPropertyDescriptor(me,ye))})}return q}({},V);delete Y.jpg,U.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(Y))}return K}{const Y=this.quality*this.qualityRatio;return this.quality=Y,await this.generateRequestData(r,{appId:s,cname:l,cid:h,vid:m,sid:v,uid:S})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Pa.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=jo.CLOSED,this.emit(xr.STATE_CHANGE,$o.CLOSED)}}var hM,pM,fM,mM,gM,vM,EM,_M,SM,yM,CM,bM,TM,RM,IM,wM,OM,AM,NM,xM,PM,DM,kM,LM,MM,UM,VM,FM,BM,jM,$M,HM,WM,zM,GM,KM,YM,qM,De;function XM(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function Ap(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?XM(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):XM(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}let _X=(hM=rt(),pM=rt({argsMap:(n,r)=>(Array.isArray(r)||(r=[r]),r.map(o=>o?Object(o).toString():"null"))}),fM=rt({argsMap:(n,r)=>(r||(r=[]),Array.isArray(r)||(r=[r]),r.map(o=>o.getTrackId()))}),mM=rt({argsMap:(n,r,o)=>[r.uid,o]}),gM=rt({argsMap:(n,r)=>r.map(o=>{let{user:s,mediaType:l}=o;return[s==null?void 0:s.uid,l]})}),vM=rt({argsMap:(n,r,o)=>[r.uid,o]}),EM=rt({argsMap:(n,r)=>r.map(o=>{let{user:s,mediaType:l}=o;return{uid:s==null?void 0:s.uid,mediaType:l}})}),_M=rt(),SM=rt(),yM=rt(),CM=rt(),bM=rt(),TM=rt(),RM=rt(),IM=rt(),wM=rt(),OM=rt(),AM=rt(),NM=rt(),xM=rt(),PM=rt(),DM=rt({argsMap:(n,r)=>[r]}),kM=rt(),LM=rt(),MM=rt(),UM=rt(),VM=rt(),FM=rt(),BM=rt(),jM=rt(),$M=rt(),HM=rt(),WM=rt({argsMap:(n,r)=>(Array.isArray(r)||(r=[r]),[JSON.stringify(r)])}),zM=rt(),GM=rt(),KM=rt(),YM=rt({reportResult:!0}),qM=rt(),_e((De=class extends Zn{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(n){let r;if(super(),N(this,"store",void 0),N(this,"_uid",void 0),N(this,"_channelName",void 0),N(this,"_uintUid",void 0),N(this,"_users",[]),N(this,"_codec",void 0),N(this,"_mode",void 0),N(this,"_config",void 0),N(this,"_clientId",void 0),N(this,"_appId",void 0),N(this,"_sessionId",null),N(this,"_key",void 0),N(this,"_joinInfo",void 0),N(this,"_gateway",void 0),N(this,"_statsCollector",void 0),N(this,"_configDistribute",void 0),N(this,"_leaveMutex",new Ui("client-leave")),N(this,"_publishMutex",new Ui("client-publish")),N(this,"_renewTokenMutex",new Ui("client-renewtoken")),N(this,"_subscribeMutex",new Ui("client-subscribe")),N(this,"_encryptionMode","none"),N(this,"_encryptionSecret",null),N(this,"_encryptionSalt",null),N(this,"_proxyServer",void 0),N(this,"_turnServer",{servers:[],mode:"auto"}),N(this,"_cloudProxyServerMode","disabled"),N(this,"_isDualStreamEnabled",!1),N(this,"_defaultStreamFallbackType",void 0),N(this,"_lowStreamParameter",void 0),N(this,"_streamFallbackTypeCacheMap",new Map),N(this,"_remoteStreamTypeCacheMap",new Map),N(this,"_axiosCancelSource",Pa.CancelToken.source()),N(this,"_audioVolumeIndicationInterval",void 0),N(this,"_networkQualityInterval",void 0),N(this,"_userOfflineTimeout",void 0),N(this,"_streamRemovedTimeout",void 0),N(this,"_injectStreamingClient",void 0),N(this,"_liveTranscodeStreamingClient",void 0),N(this,"_liveRawStreamingClient",void 0),N(this,"_channelMediaRelayClient",void 0),N(this,"_networkQualitySensitivity","normal"),N(this,"_p2pChannel",void 0),N(this,"_useLocalAccessPoint",!1),N(this,"_setLocalAPVersion",void 0),N(this,"_joinAndNotLeaveYet",!1),N(this,"_numberOfJoinCount",0),N(this,"_remoteDefaultVideoStreamType",void 0),N(this,"_inspect",void 0),N(this,"_license",void 0),N(this,"_handleLocalTrackEnable",(o,s,l)=>{this.publish(o,!1).then(s).catch(l)}),N(this,"_handleLocalTrackDisable",(o,s,l)=>{this.unpublish(o).then(s).catch(l)}),N(this,"_handleUserOnline",o=>{if(re("BLOCK_LOCAL_CLIENT")&&iu(o.uid,this.channelName))return void U.debug("[".concat(o.uid,"] will be ignored in local"));this.isStringUID&&typeof o.uid!="string"&&U.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const s=this._users.find(l=>l.uid===o.uid);if(s)s._trust_in_room_=!0;else{const l=new CC(o.uid,o.uint_id||o.uid);this._users.push(l),U.debug("[".concat(this._clientId,"] user online"),o.uid),this.emit(Ht.USER_JOINED,l)}}),N(this,"_handleUserOffline",o=>{if(re("BLOCK_LOCAL_CLIENT")&&iu(o.uid,this.channelName))return;const s=this._users.find(l=>l.uid===o.uid);s&&(this._handleRemoveStream(o),dC(this._users,s),this._remoteStreamTypeCacheMap.delete(s.uid),this._streamFallbackTypeCacheMap.delete(s.uid),U.debug("[".concat(this._clientId,"] user offline"),o.uid,"reason:",o.reason),this.emit(Ht.USER_LEAVED,s,o.reason))}),N(this,"_handleAddAudioOrVideoStream",(o,s,l,h,m,v,S)=>{if(re("BLOCK_LOCAL_CLIENT")&&iu(s,this.channelName))return;const T=this._users.find(I=>I.uid===s);if(!T)return void U.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));U.debug("[".concat(this._clientId,"] stream added with uid ").concat(s,", type ").concat(o)),this.store.subscribe(T.uid,o,void 0,void 0,void 0,Date.now());const b=o==="audio"?T.hasAudio:T.hasVideo;T._uintid||(T._uintid=m||s),o==="audio"?T._trust_audio_stream_added_state_=!0:T._trust_video_stream_added_state_=!0,o==="audio"?(T._audio_added_=!0,l!==void 0&&(T._audioSSRC=l),h!==void 0&&(T._cname=h),v&&(T._audioOrtc=v)):(T._video_added_=!0,l!==void 0&&(T._videoSSRC=l),h!==void 0&&(T._cname=h),S!==void 0&&(T._rtxSsrcId=S),v&&(T._videoOrtc=v)),(o==="audio"?T.hasAudio:T.hasVideo)&&!b&&(U.info("[".concat(this._clientId,"] remote user ").concat(T.uid," published ").concat(o)),this.emit(Ht.USER_PUBLISHED,T,o)),o==="video"?Je.onGatewayStream(this._sessionId,ni.ON_ADD_VIDEO_STREAM,Kn.ON_ADD_VIDEO_STREAM,{peer:m||s}):Je.onGatewayStream(this._sessionId,ni.ON_ADD_AUDIO_STREAM,Kn.ON_ADD_AUDIO_STREAM,{peer:m||s}),this._p2pChannel.remoteMediaSsrcChanged(T,o,l).then(I=>{if(I)return U.debug("[".concat(this._clientId,"] resubscribe ").concat(o," for user ").concat(T.uid," after rejoin because SSRC id changed.")),this._p2pChannel.unsubscribe(T,o,!0).then(()=>this._subscribe(T,o,!0).catch(L=>{U.error("[".concat(this._clientId,"] resubscribe error"),L.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(T,o)&&(U.debug("[".concat(this._clientId,"] resubscribe ").concat(o," for user ").concat(T.uid," after reconnect.")),this._subscribe(T,o,!0).catch(I=>{U.error("[".concat(this._clientId,"] resubscribe error"),I.toString())}))}),N(this,"_handleRemoveStream",o=>{if(re("BLOCK_LOCAL_CLIENT")&&iu(o.uid,this.channelName))return;const s=this._users.find(h=>h.uid===o.uid);if(!s)return void U.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));U.debug("[".concat(this._clientId,"] stream removed with uid ").concat(o.uid));let l=()=>{};s.hasAudio&&s.hasVideo?l=()=>{U.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished audio track")),this.emit(Ht.USER_UNPUBLISHED,s,"audio"),U.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished video track")),this.emit(Ht.USER_UNPUBLISHED,s,"video")}:s.hasVideo?l=()=>{U.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished video track")),this.emit(Ht.USER_UNPUBLISHED,s,"video")}:s.hasAudio&&(l=()=>{U.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished audio track")),this.emit(Ht.USER_UNPUBLISHED,s,"audio")}),s._trust_audio_stream_added_state_=!0,s._trust_video_stream_added_state_=!0,s._audio_added_=!1,s._video_added_=!1,this._p2pChannel.unsubscribe(s).then(h=>{if(h)return this._gateway.unsubscribe(h,s.uid)}),s._audioSSRC=void 0,s._videoSSRC=void 0,s._audioOrtc=void 0,s._videoOrtc=void 0,s._rtxSsrcId=void 0,Je.onGatewayStream(this._sessionId,ni.ON_REMOVE_STREAM,Kn.ON_REMOVE_STREAM,{peer:o.uint_id||o.uid}),l()}),N(this,"_handleSetStreamLocalEnable",(o,s,l)=>{if(re("BLOCK_LOCAL_CLIENT")&&iu(s,this.channelName))return;const h=this._users.find(S=>S.uid===s);if(!h)return void U.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));U.debug("[".concat(this._clientId,"] local ").concat(o," ").concat(l?"enabled":"disabled"," with uid ").concat(s));const m=o==="audio"?h.hasAudio:h.hasVideo;if(o==="audio"){h._trust_audio_enabled_state_=!0;const S=h._audio_enabled_;if(h._audio_enabled_=l,h._audio_enabled_===S)return;{const T=h._audio_enabled_?"enable-local-audio":"disable-local-audio";U.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(s,", msg: ").concat(T)),this.emit(Ht.USER_INFO_UPDATED,s,T)}}else{h._trust_video_enabled_state_=!0;const S=h._video_enabled_;if(h._video_enabled_=l,h._video_enabled_===S)return;{const T=h._video_enabled_?"enable-local-video":"disable-local-video";U.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(s,", msg: ").concat(T)),this.emit(Ht.USER_INFO_UPDATED,s,T)}}const v=o==="audio"?h.hasAudio:h.hasVideo;return m!==v?!m&&v?(U.info("[".concat(this._clientId,"] remote user ").concat(s," published ").concat(o)),void this.emit(Ht.USER_PUBLISHED,h,o)):(o==="video"&&h._videoTrack&&h._videoTrack._destroy(),o==="audio"&&h._audioTrack,this._p2pChannel.muteRemote(h,o),U.info("[".concat(this._clientId,"] remote user ").concat(s," unpublished ").concat(o)),void this.emit(Ht.USER_UNPUBLISHED,h,o)):void 0}),N(this,"_handleMuteStream",(o,s,l)=>{if(re("BLOCK_LOCAL_CLIENT")&&iu(o,this.channelName))return;U.debug("[".concat(this._clientId,"] receive mute message"),o,s,l);const h=this._users.find(S=>S.uid===o);if(!h)return void U.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(o));const m=s==="audio"?h.hasAudio:h.hasVideo;if(s==="audio"){h._trust_audio_mute_state_=!0;const S=h._audio_muted_;if(h._audio_muted_=l,h._audio_muted_===S)return;{const T=h._audio_muted_?"mute-audio":"unmute-audio";U.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(o,", msg: ").concat(T)),this.emit(Ht.USER_INFO_UPDATED,o,T)}}else{h._trust_video_mute_state_=!0;const S=h._video_muted_;if(h._video_muted_=l,h._video_muted_===S)return;{const T=h._video_muted_?"mute-video":"unmute-video";U.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(o,", msg: ").concat(T)),this.emit(Ht.USER_INFO_UPDATED,o,T)}}const v=s==="audio"?h.hasAudio:h.hasVideo;if(m!==v){if(!m&&v)return(s==="audio"?h._audioSSRC:h._videoSSRC)?(U.info("[".concat(this._clientId,"] remote user ").concat(o," published ").concat(s)),void this.emit(Ht.USER_PUBLISHED,h,s)):void U.warning("[".concat(this._clientId,"] remote user ").concat(o," receive ").concat(s," unmute message  before add stream message, ").concat(s," SSRC doesn't exist yet."));s==="video"&&h._videoTrack&&h._videoTrack._destroy(),s==="audio"&&h._audioTrack,this._p2pChannel.muteRemote(h,s),U.info("[".concat(this._clientId,"] remote user ").concat(o," unpublished ").concat(s)),this.emit(Ht.USER_UNPUBLISHED,h,s)}}),N(this,"_handleP2PLost",async o=>{U.debug("[".concat(this._clientId,"] receive p2p lost"),o),parseInt(o.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():U.warning("[".concat(this._clientId,"] P2PLost stream not found"),o)}),N(this,"_handleTokenWillExpire",()=>{U.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.emit(Ht.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),N(this,"_handleBeforeUnload",o=>{o.type==="beforeunload"&&o.returnValue!==void 0&&o.returnValue!==""||(this.leave(),U.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),N(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.emit(Ht.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const o={downlinkNetworkQuality:0,uplinkNetworkQuality:0};o.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),o.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.emit(Ht.NETWORK_QUALITY,o)}),this._codec=n.codec,this._mode=n.mode,this._clientId=jn(5,"client-"),this.store=new sX(n.codec,n.audioCodec,n.mode,this._clientId),this.store.clientCreated(),n.proxyServer&&this.setProxyServer(n.proxyServer,!0),n.turnServer&&this.setTurnServer(n.turnServer,!0),U.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(la," build: ").concat(Iy,", mode: ").concat(this._mode,", codec: ").concat(this._codec)),n.clientRoleOptions)try{Nx(n.clientRoleOptions),r=Object.assign({},n.clientRoleOptions)}catch(o){U.warning("[".concat(this._clientId,"] ").concat(o.toString()))}this._statsCollector=new Sd(this.store),this._statsCollector.onStatsException=(o,s,l)=>{U.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(o,", msg: ").concat(s,", uid: ").concat(l)),this.emit(Ht.EXCEPTION,{code:o,msg:s,uid:l})},this._statsCollector.onUploadPublishDuration=(o,s,l,h)=>{const m=this._users.find(v=>v.uid===o);m&&Je.peerPublishStatus(this._sessionId,{subscribeElapse:h,audioPublishDuration:s,videoPublishDuration:l,peer:m._uintid})},this.store.useDataChannel=gr().supportDataChannel&&re("SIGNAL_CHANNEL"),this._gateway=new zY(this.store,{clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:n.websocketRetryConfig||kr,httpRetryConfig:n.httpRetryConfig||kr,forceWaitGatewayResponse:n.forceWaitGatewayResponse===void 0||n.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:n.role,clientRoleOptions:r}),this._config=n,this._configDistribute=new eq,this._p2pChannel=new aX(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async join(n,r,o,s,l){const h=++this._numberOfJoinCount;this.store.joinStart(),s&&(this.store.uid=s);const m=cX(),v=rM()?window.isSecureContext:"Browser Not Support";if(!rM()&&!m||!window.isSecureContext){const V="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";U.warning(V)}const S=uC();this.connectionState==="DISCONNECTED"&&(this.store.avoidJoinStart=Math.round(Date.now()),U.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart)));const T=Je.reportApiInvoke(S,{name:Or.JOIN,options:[n,r,o,s],states:{isHttps:m,isSecureContext:v},tag:Yn.TRACER});Je.setAppId(n);try{if(!o&&o!==null)throw new Q(z.INVALID_PARAMS,"Invalid token: ".concat(o,". If you don not use token, set it to null"));o&&hi(o,"token",1,2047),hi(n,"appid",1,2047),My(r),s&&Uy(s),l&&hi(l,"optionalInfo",1,2047)}catch(V){throw T.onError(V),V}if(U.info("[".concat(this._clientId,"] start join channel ").concat(r,", join number: ").concat(h)),this._leaveMutex.isLocked&&(U.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),U.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){const V=new Q(z.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw T.onError(V),V}this._sessionId||(this._sessionId=S,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING";const b=Ap({clientId:this._clientId,appId:n,sid:this._sessionId,cname:r,uid:typeof s!="string"?s:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:o||n,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:l,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(b.setLocalAPVersion=this._setLocalAPVersion),typeof s=="string"&&(b.stringUid=s,this._uintUid?(b.uid=this._uintUid,this._uintUid=void 0):b.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(b.aesmode=this._encryptionMode,b.aespassword=await(async V=>{const K=hC(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),Y=await window.crypto.subtle.importKey("spki",K,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),q=eC(V),ue=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},Y,q);return T0(new Uint8Array(ue))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new Q(z.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(b.aessalt=this._encryptionSalt)}this._startSession(this._sessionId,{channel:r,appId:n});const I=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&I===this._sessionId&&Je.joinChannelTimeout(this._sessionId,5)},5e3);try{let V;const K=b.cloudProxyServer;if(["proxy3","proxy4","proxy5"].includes(K)){const me=re("PROXY_SERVER_TYPE3");Array.isArray(me)?b.proxyServer=me[0]:b.proxyServer=me}if(Je.setProxyServer(b.proxyServer),U.setProxyServer(b.proxyServer),this.store.requestAPStart(),b.stringUid&&!b.uid){const me=await LD(b.stringUid,b,this._axiosCancelSource.token,this._config.httpRetryConfig||kr,this.store);U.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(b.stringUid," => ").concat(me)),b.uid=me,V=await kD(b,this._axiosCancelSource.token,this._config.httpRetryConfig||kr,!0,this.store)}else V=await kD(b,this._axiosCancelSource.token,this._config.httpRetryConfig||kr,!0,this.store);if(!this._joinAndNotLeaveYet)throw new Q(z.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(b,this._axiosCancelSource.token),this._configDistribute.on(pp.UPDATE_BITRATE_LIMIT,me=>{this._p2pChannel.updateBitrateLimit(me)})},0),this._key=o||n;const Y=V.gatewayInfo;this._joinInfo=Ap(Ap({},b),{},{cid:Y.cid,uid:b.uid?b.uid:Y.uid,vid:Y.vid,apResponse:Y.res,uni_lbs_ip:Y.uni_lbs_ip,gatewayAddrs:Y.gatewayAddrs});const q=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new Q(z.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));T.onSuccess(q),this._appId=n,this._channelName=b.cname,this._uid=q,this.store.uid=q,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(Di()?"beforeunload":"pagehide",this._handleBeforeUnload)},0);const ue=b.stringUid?"string uid: ".concat(b.stringUid,",uid: ").concat(b.uid):"uid: ".concat(this._uid);return U.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(r,",").concat(ue)),setTimeout(()=>{U.startUpload()},5e3),this.store.joinEnd(),L=this,ru.includes(L)||ru.push(L),q}catch(V){const K=Array.isArray(V)?V[0]:V;throw U.error("[".concat(this._clientId,"] join number: ").concat(h,", Joining channel failed, rollback"),K),K.code!==z.OPERATION_ABORTED&&this._numberOfJoinCount===h&&(this._gateway.state="DISCONNECTED",this._reset()),T.onError(K),K}var L}_joinGateway(){if(!this._joinInfo||!this._key)throw new Q(z.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||this._joinInfo.proxyServer||!re("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(n=>n).catch(n=>{if(n.code===z.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,sn.FALLBACK),n;if(n.code===z.INIT_DATACHANNEL_TIMEOUT)return this._gateway.leave(!0,sn.FALLBACK),n;throw n}).then(n=>{if(n instanceof Q){if(n.code===z.INIT_WEBSOCKET_TIMEOUT){if(U.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new Q(z.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const r=re("PROXY_SERVER_TYPE3");if(Array.isArray(r))if(this._joinInfo.apUrl){const s=/^https?:\/\/(.+?)(\/.*)?$/.exec(this._joinInfo.apUrl)[1].split("."),l=s.slice(s.length-2).join(".");r.forEach(h=>{this._joinInfo&&h.includes(l)&&(this._joinInfo.proxyServer=h)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=r[0])}else this._joinInfo.proxyServer=r[0];else this._joinInfo.proxyServer=r;const o=re("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);return o&&o[1]&&o[1]!=="443"&&U.setProxyServer(this._joinInfo.proxyServer),re("STATS_COLLECTOR_PORT").toString()!=="443"&&Je.setProxyServer(this._joinInfo.proxyServer),Je.reportApiInvoke(this._sessionId,{name:Or.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:Yn.TRACER}).onSuccess(),this.emit(Ht.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),re("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&this._joinInfo.turnServer.servers.forEach(s=>{"forceturn"in s&&(s.forceturn=!0)}),this._gateway.join(this._joinInfo,this._key)}if(U.info("[".concat(this._clientId,"] join by datachannel timeout, fallback to websocket")),!this._joinInfo||!this._key)throw new Q(z.INVALID_OPERATION);return Je.reportApiInvoke(this._sessionId,{name:Or.DATACHANNEL_FAILBACK,options:[this.store.clientId],tag:Yn.TRACER}).onSuccess(),this._joinGateway()}return n}).then(n=>n)}async leave(){U.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(Di()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(r){const o=ru.indexOf(r);o!==-1&&ru.splice(o,1)}(this);const n=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return U.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void n();await this._gateway.leave(this.connectionState!=="CONNECTED"),U.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),n()}async publish(n){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Array.isArray(n)||(n=[n]),n.length===0)throw new Q(z.INVALID_PARAMS,"track list is empty");if(this._gateway.role==="audience")throw new Q(z.INVALID_OPERATION,"audience can not publish stream");for(const s of n){if(!(s instanceof tC))throw new Q(z.INVALID_PARAMS,"parameter is not local track");if(!s._enabled&&r)throw new Q(z.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(s.getTrackId()))}U.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(n.map(s=>"".concat(s.getTrackId()," ")))),await this._configDistribute.awaitConfigDistributeComplete(),r&&n.forEach(s=>{const l=this._configDistribute.getBitrateLimit();s instanceof Rr&&l&&s.setBitrateLimit(l.uplink)});const o=await this._publishMutex.lock();try{await this._publishHighStream(n),U.info("[".concat(this._clientId,"] Publish success, id ").concat(n.map(s=>"".concat(s.getTrackId()," "))))}catch(s){throw U.error("[".concat(this._clientId,"] publish error"),s.toString()),s}finally{o()}}async unpublish(n){if(!this._joinInfo||this._uid===void 0)throw new Q(z.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");n?Array.isArray(n)||(n=[n]):n=this._p2pChannel.getAllTracks(!0),U.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(n.map(o=>"".concat(o.getTrackId()," "))," "));const r=await this._publishMutex.lock();try{const o=await this._p2pChannel.unpublish(n);o&&await this._gateway.unpublish(o,this._uid),U.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(n.map(s=>"".concat(s.getTrackId()))))}catch(o){throw U.error("[".concat(this._clientId,"] unpublish error"),o.toString()),o}finally{r&&r()}}async subscribe(n,r){return this._subscribe(n,r)}async _subscribe(n,r,o){if(zr(r,"mediaType",["audio","video"]),!this._joinInfo)throw new Q(z.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Q(z.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(S=>S===n)){const S=new Q(z.INVALID_REMOTE_USER,"user is not in the channel");throw U.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid,", this user is not in the channel")),S}if(!n.hasAudio&&!n.hasVideo){const S=new Q(z.INVALID_REMOTE_USER,"user is not published");throw U.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid,", user is not published")),S}if(!(o||(r!=="audio"||n.hasAudio&&n._audioSSRC!==void 0)&&(r!=="video"||n.hasVideo&&n._videoSSRC!==void 0))){const S=new Q(z.REMOTE_USER_IS_NOT_PUBLISHED);throw U.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid," with mediaType ").concat(r,", remote track is not published")),S}const s=r==="audio"?n._audioSSRC:n._videoSSRC,l=r==="audio"?n._audioOrtc:n._videoOrtc,h=r==="video"?n._rtxSsrcId:void 0,m={stream_type:r==="audio"?It.AUDIO:It.VIDEO,ssrcId:s},v=await this._subscribeMutex.lock();U.info("[".concat(this._clientId,"] subscribe user ").concat(n.uid,", mediaType: ").concat(r));try{if(await this._p2pChannel.hasRemoteMediaWithLock(n,r))await this._p2pChannel.unmuteRemote(n,r);else try{ua.markSubscribeStart(this.store.clientId,s),this.store.subscribe(n.uid,r,Date.now()),await this._p2pChannel.subscribe(n,r,s,h,l);try{await this._gateway.subscribe(n.uid,m,!0)}catch(T){if((T==null?void 0:T.code)!==z.WS_ABORT)throw await this._p2pChannel.unsubscribe(n,r),T;await this._p2pChannel.unsubscribe(n,r,!0),this._p2pChannel.setPendingRemoteMedia(n,r)}this.store.subscribe(n.uid,r,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,n,r)}catch(T){throw this._p2pChannel.reportSubscribeEvent(!1,T==null?void 0:T.code,n,r),T}U.info("[".concat(this._clientId,"] subscribe success user ").concat(n.uid,", mediaType: ").concat(r)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(n.uid,this._defaultStreamFallbackType).catch(T=>{U.warning("[".concat(this._clientId,"] auto set fallback failed"),T)});const S=r==="audio"?n._audioTrack:n._videoTrack;if(!S)throw new Q(z.UNEXPECTED_ERROR,"can not find remote track in user object");return S}catch(S){throw U.error("[".concat(this._clientId,"] subscribe user ").concat(n.uid," error"),S),S}finally{v()}}async massSubscribe(n){if(hc(n,"subscribeList"),!this._joinInfo)throw new Q(z.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Q(z.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const r=Date.now(),o=new Map,s=await this._subscribeMutex.lock();U.info("[".concat(this._clientId,"]start massSubscribe user ").concat(n.map(v=>{let{user:S,mediaType:T}=v;return"user: ".concat(S==null?void 0:S.uid,", mediaType: ").concat(T)}).join("; ")));const l=(n=[...n]).map(v=>{let{user:S,mediaType:T}=v;return{user:S,mediaType:T}}),h=await this._p2pChannel.globalLock();try{var m;for(let S=n.length-1;S>=0;S--){const T=n[S],{user:b,mediaType:I}=T;if(zr(I,"mediaType",["audio","video"]),!b){const K=new Q(z.INVALID_PARAMS,"user property does not exist in subscribeList item");throw U.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),K}if(!this._users.find(K=>K===b)){const K=new Q(z.INVALID_REMOTE_USER,"user is not in the channel");U.error("[".concat(this._clientId,"] can not massSubscribe ").concat(b.uid,", this user is not in the channel")),l[S].error=K,n.splice(S,1);continue}if(I==="audio"&&(!b.hasAudio||b._audioSSRC===void 0)||I==="video"&&(!b.hasVideo||b._videoSSRC===void 0)){const K=new Q(z.REMOTE_USER_IS_NOT_PUBLISHED);U.error("[".concat(this._clientId,"] can not subscribe ").concat(b.uid," with mediaType ").concat(I,", remote user is not published")),l[S].error=K,n.splice(S,1);continue}const L=Cr.Video|Cr.LwoVideo,V=o.get(b);if(V){if(I==="video"?V&L:V&Cr.Audio){n.splice(S,1),U.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(b.uid,", mediaType:").concat(I," twice"));continue}o.set(b,V|(I==="video"?L:Cr.Audio))}else o.set(b,I==="video"?L:Cr.Audio)}for(let S=n.length-1;S>=0;S--){const T=n[S],{user:b,mediaType:I}=T,L=Cr.Video|Cr.LwoVideo;if(this._p2pChannel.hasRemoteMedia(b,I)){await this._p2pChannel.unmuteRemoteNoLock(b,I);const V=o.get(b);o.set(b,I==="video"?V^L:V^Cr.Audio),n.splice(S,1)}}this.store.massSubscribe(n.map(S=>({userId:S.user.uid,type:S.mediaType})),r);const v=Wc(m=Array.from(o.entries())).call(m,(S,T)=>{let[b,I]=T;if(I===0)return S;const L={stream_id:b.uid,stream_type:I};return I&Cr.Audio&&(L.audio_ssrc=b._audioSSRC),I&Cr.Video&&(L.video_ssrc=b._videoSSRC),S.push(L),S},[]);try{n.length>0&&await this._p2pChannel.massSubscribeNoLock(n.map(T=>{let{user:b,mediaType:I}=T;return{user:b,mediaType:I,ssrcId:I===It.VIDEO?b._videoSSRC:b._audioSSRC,rtxSsrcId:I===It.VIDEO?b._rtxSsrcId:void 0}}));const S=new Map;if(v.length>0){const T=await this._gateway.subscribeAll(v,!0);((T==null?void 0:T.users)||[]).forEach(b=>{let{stream_id:I,video_error_code:L,audio_error_code:V,error_code:K}=b;(L||V||K)&&S.set(I,{video_error_code:L,audio_error_code:V,error_code:K})})}if(Array.from(S.entries()).length>0){const T=Array.from(S.entries()).map(b=>{let I,[L,V]=b;return V.error_code||V.video_error_code&&V.audio_error_code?I=void 0:V.video_error_code?I=It.VIDEO:V.audio_error_code&&(I=It.AUDIO),{user:this.remoteUsers.find(K=>K.uid===L),mediaType:I}});await this._p2pChannel.massUnsubscribeNoLock(T)}for(const T of l){const b=S.get(T.user.uid);if(b){const I=b.error_code||T.mediaType==="audio"&&b.audio_error_code||T.mediaType==="video"&&b.video_error_code;if(I){const L=vp(I);U.error("user:".concat(T.user.uid," mediaType:").concat(T.mediaType," has massSubscribe error ").concat(L.desc)),T.error=new Q(z.SUBSCRIBE_FAILED,"code ".concat(I,": ").concat(L.desc))}}T.error||(T.mediaType==="video"?T.track=T.user.videoTrack:T.track=T.user.audioTrack)}return this.store.massSubscribe(l.filter(T=>!T.error).map(T=>({userId:T.user.uid,type:T.mediaType})),void 0,Date.now()),l.forEach(T=>{var b;Je.subscribe(this.store.sessionId,{succ:!!T.error,ec:((b=T.error)===null||b===void 0?void 0:b.code)||null,video:T.mediaType===It.VIDEO,audio:T.mediaType===It.AUDIO,peerid:T.user.uid,subscribeRequestid:T.mediaType===It.VIDEO?T.user._videoSSRC:T.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-r)},!0)}),U.info("[".concat(this._clientId,"] massSubscribe success ").concat(n.map(T=>{let{user:b,mediaType:I}=T;return"user: ".concat(b==null?void 0:b.uid,", mediaType: ").concat(I)}).join("; "))),l}catch(S){throw await this._p2pChannel.massUnsubscribeNoLock(n),S}}finally{h(),s()}}async unsubscribe(n,r){if(r&&zr(r,"mediaType",["audio","video"]),!this._joinInfo)throw new Q(z.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(o=>o===n)){const o=new Q(z.INVALID_REMOTE_USER,"user is not in the channel");throw U.error("[".concat(this._clientId,"] can not unsubscribe ").concat(n.uid,", user is not in the channel")),o}U.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(n.uid,", mediaType: ").concat(r));try{const o=await this._p2pChannel.unsubscribe(n,r);o&&await this._gateway.unsubscribe(o,n.uid),U.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(n.uid,", mediaType: ").concat(r))}catch(o){if(o.code===z.DISCONNECT_P2P)return void U.warning("disconnecting p2p, abort unsubscribe request.");throw U.error("[".concat(this._clientId,"] unsubscribe user ").concat(n.uid," error"),o.toString()),o}}async massUnsubscribe(n){if(hc(n,"unsubscribeList"),!this._joinInfo)throw new Q(z.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");U.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(n.map(o=>{let{user:s,mediaType:l}=o;return"user: ".concat(s==null?void 0:s.uid,", mediaType: ").concat(l,";")}).join())),n=[...n];const r=new Map;for(let o=n.length-1;o>=0;o--){const{user:s,mediaType:l}=n[o];if(!s){const m=new Q(z.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw U.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),m}if(zr(l,"mediaType",["video","audio",void 0]),!this._users.find(m=>m===s)){U.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(s.uid,", user is not in the channel")),n.splice(o,1);continue}const h=Cr.Video|Cr.LwoVideo;if(r.has(s)){const m=r.get(s);let v;switch(l){case"video":v=m&h;break;case"audio":v=m&Cr.Audio;break;default:v=m&(Cr.Audio|h)}if(v){U.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(s.uid,",mediaType:").concat(l," twice.")),n.splice(o,1);continue}l?l==="audio"?r.set(s,m|Cr.Audio):l==="video"&&r.set(s,m|h):r.set(s,m|Cr.Audio|h)}else l?l==="audio"?r.set(s,Cr.Audio):l==="video"&&r.set(s,h):r.set(s,Cr.Audio|h)}try{const o=await this._p2pChannel.massUnsubscribe(n);o&&await this._gateway.massUnsubscribe(o),U.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(n.map(s=>{let{user:l,mediaType:h}=s;return"user: ".concat(l==null?void 0:l.uid,", mediaType: ").concat(h,";")}).join()))}catch(o){if(o.code===z.DISCONNECT_P2P)return void U.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw U.error("[".concat(this._clientId,"] massUnsubscribe error"),o.toString()),o}}setLowStreamParameter(n){(function(o){if(!o)throw new Q(z.INVALID_PARAMS);Bn(o.width)||Ly(o.width,"streamParameter.width"),Bn(o.height)||Ly(o.height,"streamParameter.height"),Bn(o.framerate)||Ly(o.framerate,"streamParameter.framerate"),Bn(o.bitrate)||xn(o.bitrate,"streamParameter.bitrate")})(n),(!n.width&&n.height||n.width&&!n.height)&&U.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),U.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(n));const r=this._configDistribute.getLowStreamConfigDistribute();r&&r.bitrate&&n.bitrate&&r.bitrate<n.bitrate&&(n.bitrate=r.bitrate),this._lowStreamParameter=n}async enableDualStream(){if(!gr().supportDualStream)throw Je.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new Q(z.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new Q(z.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(n){throw Je.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),n}this._isDualStreamEnabled=!0,Je.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),U.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new Q(z.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(We.LocalVideoLowTrack))try{const n=await this._p2pChannel.unpublishLowStream();n&&await this._gateway.unpublish(n,this._joinInfo.stringUid||this._joinInfo.uid)}catch(n){throw Je.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),n}this._isDualStreamEnabled=!1,Je.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),U.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(n,r){if(function(o){zr(o,"role",["audience","host"])}(n),r&&Nx(r),this._mode==="rtc")throw U.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole")),new Q(z.INVALID_OPERATION,"rtc mode can not use setClientRole");if(r&&r.level&&n==="host")throw new Q(z.INVALID_OPERATION,"host mode can not set audience latency level");if(n==="audience"&&this._p2pChannel.hasLocalMedia())throw new Q(z.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(n,r),U.info("[".concat(this._clientId,"] set client role to ").concat(n,", level: ").concat(r&&r.level))}setProxyServer(n,r){if(hi(n,"proxyServer"),!r){if(this.connectionState!=="DISCONNECTED")throw new Q(z.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new Q(z.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=n,Je.setProxyServer(this._proxyServer),U.setProxyServer(this._proxyServer),U.info("[".concat(this._clientId,"] Set proxy server ").concat(r?"by initialize call":""," success."))}setTurnServer(n,r){if(Array.isArray(n)||(n=[n]),!r){if(this.connectionState!=="DISCONNECTED")throw new Q(z.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new Q(z.INVALID_OPERATION,"You have already set the proxy")}if(dp(n))return this._turnServer={servers:n,mode:"original-manual"},void U.info("[".concat(this._clientId,"] Set original turnserver ").concat(r?"by initialize call":""," success: ").concat(n.map(o=>o.urls).join(","),"."));n.forEach(o=>Ax(o)),this._turnServer={servers:n,mode:"manual"},U.info("[".concat(this._clientId,"] Set turnserver ").concat(r?"by initialize call":""," success."))}setLicense(n){if(this.connectionState!=="DISCONNECTED")throw new Q(z.INVALID_OPERATION,"you should set license before join channel");if(hi(n,"license",32,32),!/^[A-Za-z\d]+$/.test(n))throw new Q(z.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=n,U.info("[".concat(this._clientId,"] set license success"),n)}startProxyServer(n){if(this.connectionState!=="DISCONNECTED")throw new Q(z.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint)throw new Q(z.INVALID_OPERATION,"You have already set the proxy");const r=[3,4,5];let o;switch(n===void 0&&(n=3),n){case 1:case 2:throw new Q(z.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:o="proxy3";break;case 4:o="proxy4";break;case 5:o="proxy5";break;default:throw new Q(z.INVALID_PARAMS,"proxy server mode must be ".concat(r.join("|")))}this._cloudProxyServerMode=o,this.store.cloudProxyServerMode=o,U.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if(this.connectionState!=="DISCONNECTED")throw new Q(z.INVALID_OPERATION,"Stop proxy server after leave channel");Je.setProxyServer(),U.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",U.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(n){if(!n.accessPoints)throw new Q(z.INVALID_PARAMS,"accessPoints is required.");hc(n.accessPoints.serverList,"accessPoints.serverList"),hi(n.accessPoints.domain,"accessPoints.domain");const r=(L,V)=>{xn(L,V,0,65535,!0)};let o=443;if(n.accessPoints.port&&(r(n.accessPoints.port,"accessPoints.port"),o=n.accessPoints.port),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new Q(z.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");re("CLOSE_AFB_FOR_LOCAL_AP")&&(Cn("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),Cn("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const s=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,l=n.accessPoints.domain,h=n.accessPoints.serverList.map(L=>s.test(L)?"".concat(L.replace(/\./g,"-"),".").concat(l):L),m=h.map(L=>"".concat(L,":").concat(o));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,Cn("WEBCS_DOMAIN",m),Cn("WEBCS_DOMAIN_BACKUP_LIST",m),Cn("GATEWAY_DOMAINS",[l]),n.report&&n.report.hostname&&Array.isArray(n.report.hostname)&&n.report.hostname.length?(hc(n.report.hostname,"report.hostname"),Cn("EVENT_REPORT_DOMAIN",n.report.hostname[0]),Cn("EVENT_REPORT_BACKUP_DOMAIN",n.report.hostname[1]||n.report.hostname[0])):(Cn("EVENT_REPORT_DOMAIN",h[0]),Cn("EVENT_REPORT_BACKUP_DOMAIN",h[1]||h[0]));let v=6443;n.report&&n.report.port&&(r(n.report.port,"report.port"),v=n.report.port),Cn("STATS_COLLECTOR_PORT",v),n.report?Cn("ENABLE_EVENT_REPORT",!0):Cn("ENABLE_EVENT_REPORT",!1);let S="";n.log&&n.log.hostname&&Array.isArray(n.log.hostname)&&n.log.hostname.length?(hc(n.log.hostname,"log.hostname"),S=n.log.hostname[0]):S=h[0];let T=6444;n.log&&n.log.port&&(r(n.log.port,"log.port"),T=n.log.port),Cn("LOG_UPLOAD_SERVER","".concat(S,":").concat(T));let b=[];n.cds&&n.cds.hostname&&Array.isArray(n.cds.hostname)&&n.cds.hostname.length?(hc(n.cds.hostname,"cds.hostname"),b=n.cds.hostname):b=h;let I=443;n.cds&&n.cds.port&&(r(n.cds.port,"cds.port"),I=n.cds.port),Cn("CDS_AP",b.map(L=>"".concat(L,":").concat(I))),n.cds?Cn("ENABLE_CONFIG_DISTRIBUTE",!0):Cn("ENABLE_CONFIG_DISTRIBUTE",!1),U.info("set local access point v2 success")}setLocalAccessPoints(n,r){if(hc(n,"serverList"),hi(r,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new Q(z.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const o=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;n=n.map(s=>o.test(s)?"".concat(s.replace(/\./g,"-"),".").concat(r):s),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,Cn("WEBCS_DOMAIN",n),Cn("WEBCS_DOMAIN_BACKUP_LIST",n),Cn("GATEWAY_DOMAINS",[r]),Cn("EVENT_REPORT_DOMAIN",n[0]),Cn("EVENT_REPORT_BACKUP_DOMAIN",n[1]||n[0]),Cn("LOG_UPLOAD_SERVER","".concat(n[0],":6444")),U.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(n){if(zr(n,"streamType",[0,1]),this._remoteDefaultVideoStreamType=n,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(n),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(r){throw U.error("[".concat(this._clientId,"] set default remote video stream type error"),r.toString()),r}else U.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(n))}async setRemoteVideoStreamType(n,r){zr(r,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(n,r),setTimeout(()=>{const o=this._users.find(s=>s.uid===n);o&&o.videoTrack&&o.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(o){throw U.error("[".concat(this._clientId,"] set remote video stream type error"),o.toString()),o}U.info("[".concat(this._clientId,"] set remote ").concat(n," video stream type to ").concat(r)),this._remoteStreamTypeCacheMap.set(n,r)}async setStreamFallbackOption(n,r){zr(r,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(n,r)}catch(o){throw U.error("[".concat(this._clientId,"] set stream fallback option"),o.toString()),o}U.info("[".concat(this._clientId,"] set remote ").concat(n," stream fallback type to ").concat(r)),this._streamFallbackTypeCacheMap.set(n,r)}setEncryptionConfig(n,r,o){if(function(s){zr(s,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(n),hi(r,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(n)){if(!o||!(o instanceof Uint8Array&&o.length===32))throw new Q(z.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(o)throw new Q(z.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test(r)||U.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),this._encryptionMode=n,this._encryptionSecret=r,o&&(this._encryptionSalt=T0(o))}async renewToken(n){if(hi(n,"token",1,2047),!this._key||!this._joinInfo)throw new Q(z.INVALID_OPERATION,"renewToken should not be called before user join");const r=this._key;this._key=n,this._joinInfo&&(this._joinInfo.token=n);const o=await this._renewTokenMutex.lock();try{if(re("USE_NEW_TOKEN")){U.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const s=await ZY(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||kr);U.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:n,ticket:s})}else U.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:n});U.debug("[".concat(this._clientId,"] renewToken success"))}catch(s){throw this._key=r,this._joinInfo.token=r,U.error("[".concat(this._clientId,"] renewToken failed"),s.toString()),s}finally{o()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?U.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{const n=this._p2pChannel.getAudioLevels();this.emit(Ht.VOLUME_INDICATOR,n)},re("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const n=this._statsCollector.getRTCStats(),r=this._gateway.getInChannelInfo();return n.Duration=Math.round(r.duration/1e3),n}async startLiveStreaming(n,r){if(!r){if(this._codec!=="h264")throw new Q(z.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new Q(z.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(n)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(n))throw new Q(z.LIVE_STREAMING_TASK_CONFLICT);const o=r?Ar.TRANSCODE:Ar.RAW;return this._createLiveStreamingClient(o).startLiveStreamingTask(n,o)}setLiveTranscoding(n){return this._createLiveStreamingClient(Ar.TRANSCODE).setTranscodingConfig(n)}async stopLiveStreaming(n){const r=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(o=>o&&o.hasUrl(n));if(!r.length)throw new Q(z.INVALID_PARAMS,"can not find live streaming url to stop");await Me.all(r.map(o=>o&&o.stopLiveStreamingTask(n)))}async addInjectStreamUrl(n,r){if(!this._joinInfo)throw new Q(z.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const o=this._createLiveStreamingClient(Ar.INJECT);o.setInjectStreamConfig(r,0),await o.startLiveStreamingTask(n,Ar.INJECT)}async removeInjectStreamUrl(){var n;const r=this._createLiveStreamingClient(Ar.INJECT),o=Array.from(Bs(n=r.streamingTasks).call(n)).find(s=>s.mode===Ar.INJECT);if(!this._joinInfo||!o)throw new Q(z.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await r.stopLiveStreamingTask(o.url)}async startChannelMediaRelay(n){HD(n),await this._createChannelMediaRelayClient().startChannelMediaRelay(n)}async updateChannelMediaRelay(n){HD(n),await this._createChannelMediaRelayClient().updateChannelMediaRelay(n)}async stopChannelMediaRelay(){await this._createChannelMediaRelayClient().stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}sendStreamMessage(n){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new Q(z.INVALID_OPERATION,"can not send data stream, not joined");if(typeof n=="string"&&(n=new TextEncoder().encode(n)),new Blob([n]).size>1024)throw new Q(z.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(ut.DATA_STREAM,{payload:T0(n)},!r)}sendMetadata(n){if(!this._joinInfo)throw new Q(z.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([n]).size>1024)throw new Q(z.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(ut.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:T0(n)})}async sendCustomReportMessage(n){if(Array.isArray(n)||(n=[n]),n.forEach(pK),!this._joinInfo)throw new Q(z.INVALID_OPERATION,"can not send custom report, not joined");await Je.sendCustomReportMessage(this._joinInfo.sid,n)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(n,r){zr(r.spatialLayer,"spatialLayer",[0,1,2,3]),zr(r.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(n,r)}catch(o){throw U.error("[".concat(this._clientId,"] pick SVC layer failed"),o.toString()),o}}_reset(){if(U.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=Pa.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach(n=>{n._audioTrack&&n._audioTrack._destroy(),n._videoTrack&&n._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new Ui("client-publish"),this._subscribeMutex=new Ui("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}}_startSession(n,r){const o=n||uC();n?U.debug("[".concat(this._clientId,"] new Session ").concat(o)):U.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(o)),this._sessionId=o,this.store.sessionId=o,r?Je.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:r.channel,appid:r.appId,mode:this._mode}):this._joinInfo?Je.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&Je.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=o),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=o)}async _publishHighStream(n){if(!this._joinInfo||this._uid===void 0)throw new Q(z.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Q(z.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&re("FORCE_TURN")&&!re("TURN_ENABLE_TCP")&&!re("TURN_ENABLE_UDP"))throw new Q(z.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");U.debug("[".concat(this._clientId,"] publish high stream"));try{const o=await this._p2pChannel.publish(n,this._isDualStreamEnabled,this._lowStreamParameter),s=(await o.next()).value;if(s){var r;let l;try{l=await this._gateway.publish(this._uid,s,!0)}catch(h){if(h.code!==z.DISCONNECT_P2P)throw o.throw(h),h}await o.next(((r=l)===null||r===void 0?void 0:r.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const l of n)l instanceof Rr&&l._encoderConfig&&this._gateway.setVideoProfile(l._encoderConfig),!l.muted&&l.enabled||await this._p2pChannel.muteLocalTrack(l)}catch(o){if(this._p2pChannel.reportPublishEvent(!1,o==null?void 0:o.code,n),(o==null?void 0:o.code)===z.WS_ABORT)return;throw o}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new Q(z.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Q(z.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));U.debug("[".concat(this._clientId,"] publish low stream"));const n=this._configDistribute.getLowStreamConfigDistribute();n&&n.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&n.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=n.bitrate));try{const o=await this._p2pChannel.publishLowStream(this._lowStreamParameter),s=(await o.next()).value;if(s){var r;let l;try{l=await this._gateway.publish(this._uid,s,!0)}catch(h){if(h.code!==z.DISCONNECT_P2P)throw o.throw(h),h}o.next(((r=l)===null||r===void 0?void 0:r.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(o){if(this._p2pChannel.reportPublishEvent(!1,o==null?void 0:o.code,void 0,!0),(o==null?void 0:o.code)===z.WS_ABORT)return;throw o}}_createLiveStreamingClient(n){if(!this._joinInfo||!this._appId)return new Q(z.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const r=()=>new nq(this._joinInfo,this._config.websocketRetryConfig||kr,this._config.httpRetryConfig||kr),o=s=>{s.onLiveStreamError=(l,h)=>{Je.reportApiInvoke(this._sessionId,{name:Or.ON_LIVE_STREAM_ERROR,options:[l,h],tag:Yn.TRACER}).onSuccess(),this.emit(Ht.LIVE_STREAMING_ERROR,l,h)},s.onLiveStreamWarning=(l,h)=>{Je.reportApiInvoke(this._sessionId,{name:Or.ON_LIVE_STREAM_WARNING,options:[l,h],tag:Yn.TRACER}).onSuccess(),this.emit(Ht.LIVE_STREAMING_WARNING,l,h)},s.on(pd.REQUEST_WORKER_MANAGER_LIST,(l,h,m)=>{if(!this._joinInfo)return m(new Q(z.INVALID_OPERATION,"can not find join info to get worker manager"));UD(l,this._joinInfo,this._axiosCancelSource.token,kr).then(h).catch(m)})};switch(n){case Ar.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=r(),o(this._liveRawStreamingClient)),this._liveRawStreamingClient;case Ar.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=r(),o(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case Ar.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=r(),this._injectStreamingClient.on(pd.REQUEST_WORKER_MANAGER_LIST,(s,l,h)=>{if(!this._joinInfo)return h(new Q(z.INVALID_OPERATION,"can not find join info to get worker manager"));UD(s,this._joinInfo,this._axiosCancelSource.token,kr).then(l).catch(h)}),this._injectStreamingClient.onInjectStatusChange=(s,l,h)=>{this.emit(Ht.INJECT_STREAM_STATUS,s,l,h)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){if(!this._joinInfo)return new Q(z.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:n,sendResolutionHeight:r}=this.getLocalVideoStats(),o={width:n,height:r};this._channelMediaRelayClient=new iq(this._joinInfo,this._clientId,this._config.websocketRetryConfig||kr,this._config.httpRetryConfig||kr,o),this._channelMediaRelayClient.on("state",s=>{s===Mi.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(Ht.CHANNEL_MEDIA_RELAY_STATE,s)}),this._channelMediaRelayClient.on("event",s=>{this.emit(Ht.CHANNEL_MEDIA_RELAY_EVENT,s)}),this._statsCollector.onStatsChanged=(s,l)=>{var h;s==="resolution"&&((h=this._channelMediaRelayClient)===null||h===void 0||h.setVideoProfile(l))}}return this._channelMediaRelayClient}_handleGatewayEvents(){this._gateway.on(Wn.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(Wn.CONNECTION_STATE_CHANGE,(n,r,o)=>{var s;if(o===sn.FALLBACK)return;const l=()=>{this.emit(Ht.CONNECTION_STATE_CHANGE,n,r,o)};if(Je.reportApiInvoke(this._sessionId||((s=this._gateway.joinInfo)===null||s===void 0?void 0:s.sid)||null,{name:Or.CONNECTION_STATE_CHANGE,options:[n,r,o],tag:Yn.TRACER}).onSuccess(JSON.stringify({cur:n,prev:r,reason:o})),U.info("[".concat(this._clientId,"] connection state change: ").concat(r," -> ").concat(n)),n==="DISCONNECTED")return this._reset(),void l();if(n==="RECONNECTING")this._users.forEach(m=>{m._trust_in_room_=!1,m._trust_audio_enabled_state_=!1,m._trust_video_enabled_state_=!1,m._trust_audio_mute_state_=!1,m._trust_video_mute_state_=!1,m._trust_audio_stream_added_state_=!1,m._trust_video_stream_added_state_=!1,m._audioSSRC=void 0,m._videoSSRC=void 0,m._videoOrtc=void 0,m._audioOrtc=void 0,m._cname=void 0,m._rtxSsrcId=void 0}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(n==="CONNECTED"){var h;this._streamFallbackTypeCacheMap.forEach((m,v)=>{this._gateway.setStreamFallbackOption(v,m).catch(S=>{U.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),S)})}),this._remoteStreamTypeCacheMap.forEach((m,v)=>{this._gateway.setRemoteVideoStreamType(v,m).catch(S=>{U.warning("[".concat(this._clientId,"] auto set remote stream type failed"),S)})}),this._remoteDefaultVideoStreamType!==void 0&&((h=this._joinInfo)===null||h===void 0?void 0:h.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{U.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(m=>{U.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(m))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(m=>!m._trust_in_room_).forEach(m=>{U.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(m.uid)),this._handleUserOffline({uid:m.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(m=>{m._trust_audio_mute_state_||(U.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(m.uid)),this._handleMuteStream(m.uid,"audio",!1)),m._trust_video_mute_state_||(U.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(m.uid)),this._handleMuteStream(m.uid,"video",!1)),m._trust_audio_enabled_state_||(U.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(m.uid)),this._handleSetStreamLocalEnable("audio",m.uid,!0)),m._trust_video_enabled_state_||(U.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(m.uid)),this._handleSetStreamLocalEnable("video",m.uid,!0)),m._trust_video_stream_added_state_||(U.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(m.uid)),this._handleResetAddStream(m,"video")),m._trust_audio_stream_added_state_||(U.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(m.uid)),this._handleResetAddStream(m,"audio")),m._video_added_||m._audio_added_||(U.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(m.uid)),this._handleRemoveStream({uid:m.uid,uint_id:m._uintid}))}))},1e3)}l()}),this._gateway.on(Wn.REQUEST_NEW_GATEWAY_LIST,(n,r)=>{if(!this._joinInfo)return r(new Q(z.UNEXPECTED_ERROR,"can not recover, no join info"));_C(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||kr,this.store).then(o=>{this._joinInfo&&(this._joinInfo.apResponse=o.gatewayInfo.res,this._joinInfo.gatewayAddrs=o.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=o.gatewayInfo.uni_lbs_ip),n(o.gatewayInfo.gatewayAddrs.map(s=>{if(this._joinInfo&&this._joinInfo.proxyServer){const l=s.address.split(":");return"wss://".concat(this._joinInfo.proxyServer,"/ws/?h=").concat(l[0],"&p=").concat(l[1])}return"wss://".concat(s.address)}))}).catch(r)}),this._gateway.on(Wn.NETWORK_QUALITY,n=>{this._networkQualitySensitivity==="normal"&&this.emit(Ht.NETWORK_QUALITY,n)}),this._gateway.on(Wn.STREAM_TYPE_CHANGE,(n,r)=>{this.emit(Ht.STREAM_TYPE_CHANGED,n,r),Je.reportApiInvoke(this._sessionId,{name:Or.STREAM_TYPE_CHANGE,options:[n,r],tag:Yn.TRACER}).onSuccess(JSON.stringify({uid:n,streamType:r}))}),this._gateway.on(Wn.IS_P2P_DISCONNECTED,n=>{this._p2pChannel.isP2PDisconnected()?n(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?n(!1):n(!0)}),this._gateway.on(Wn.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(Wn.REQUEST_P2P_CONNECTION_PARAMS,async(n,r,o)=>{try{r(await this._p2pChannel.startP2PConnection(n))}catch(s){o(s)}}),this._gateway.on(Wn.JOIN_RESPONSE,(n,r)=>{const{dtlsParameters:o,iceParameters:s,candidates:l,rtpCapabilities:h,setup:m,cname:v}=hL(n.ortc,r);this._p2pChannel.connect(s,o,l,h,m,v)}),this._gateway.on(Wn.REQUEST_DC_CONNECTION_PARAMS,n=>{n(this._p2pChannel.getEstablishParams())}),this._gateway.on(Wn.RESET_SIGNAL,n=>{this._p2pChannel.resetConnection(n),this._handleGatewaySignalEvents()}),this._gateway.on(Wn.DATACHANNEL_FAILBACK,()=>{this._joinGateway()}),this._gateway.on(Wn.DATACHANNEL_PRECONNECT,async(n,r,o,s)=>{var l,h,m,v,S,T;await this._p2pChannel.startP2PConnection({turnServer:(l=this._joinInfo)===null||l===void 0?void 0:l.turnServer},!0);const b=function(I,L){let V;return L&&L.ip&&typeof L.port=="number"?(V=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:L.ip,port:L.port.toString(),type:"host",extension:{}}],U.debug("Using remote candidate from AP ".concat(L.ip,":").concat(L.port)),L.ip6&&(V.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:L.ip6,port:L.port.toString(),type:"host",extension:{}}),U.debug("Using IPV6 remote candidate from AP ".concat(L.ip6,":").concat(L.port)))):V=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:I.ip,port:I.port.toString(),type:"host",extension:{}}],V}(n,r);return this._p2pChannel.preConnect({iceUfrag:"".concat((h=this._joinInfo)===null||h===void 0?void 0:h.apResponse.cid,"_").concat((m=this._joinInfo)===null||m===void 0?void 0:m.apResponse.cert),icePwd:"".concat((v=this._joinInfo)===null||v===void 0?void 0:v.apResponse.cid,"_").concat((S=this._joinInfo)===null||S===void 0?void 0:S.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:(T=re("FINGERPRINT"))!==null&&T!==void 0?T:n.fingerprint}]},b,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(o).catch(s)})}_handleGatewaySignalEvents(){this._gateway.signal.on(kt.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(kt.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(kt.ON_ADD_AUDIO_STREAM,n=>this._handleAddAudioOrVideoStream("audio",n.uid,n.ssrcId,n.cname,n.uint_id,n.ortc)),this._gateway.signal.on(kt.ON_ADD_VIDEO_STREAM,n=>this._handleAddAudioOrVideoStream("video",n.uid,n.ssrcId,n.cname,n.uint_id,n.ortc,n.rtxSsrcId)),this._gateway.signal.on(kt.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(kt.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(kt.MUTE_AUDIO,n=>this._handleMuteStream(n.uid,"audio",!0)),this._gateway.signal.on(kt.UNMUTE_AUDIO,n=>this._handleMuteStream(n.uid,"audio",!1)),this._gateway.signal.on(kt.MUTE_VIDEO,n=>this._handleMuteStream(n.uid,"video",!0)),this._gateway.signal.on(kt.UNMUTE_VIDEO,n=>this._handleMuteStream(n.uid,"video",!1)),this._gateway.signal.on(kt.RECEIVE_METADATA,n=>{const r=hC(n.metadata);this.emit(Ht.RECEIVE_METADATA,n.uid,r)}),this._gateway.signal.on(kt.ON_DATA_STREAM,n=>{n.seq&&delete n.seq,n.payload=hC(n.payload),this.emit(Ht.STREAM_MESSAGE,n.uid,n.payload),this.onStreamMessage&&this.onStreamMessage(n)}),this._gateway.signal.on(kt.ON_CRYPT_ERROR,()=>{mp(()=>{U.warning("[".concat(this._clientId,"] on crypt error")),this.emit(Ht.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(kt.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(kt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{U.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0),this.emit(Ht.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(kt.ON_STREAM_FALLBACK_UPDATE,n=>{U.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(n.stream_id,", attr: ").concat(n.stream_type)),this.emit(Ht.STREAM_FALLBACK,n.stream_id,n.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(kt.ON_PUBLISH_STREAM,n=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:n.proxy})),U.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(n))))}),this._gateway.signal.on(kt.ENABLE_LOCAL_VIDEO,n=>{this._handleSetStreamLocalEnable("video",n.uid,!0)}),this._gateway.signal.on(kt.DISABLE_LOCAL_VIDEO,n=>{this._handleSetStreamLocalEnable("video",n.uid,!1)}),this._gateway.signal.on(Xe.REQUEST_TIMEOUT,(n,r)=>{if(this._joinInfo)switch(n){case ut.PUBLISH:{if(!r)return;const m=(r=r).ortc;if(m){var o,s,l,h;const v=m.some(b=>{let{stream_type:I}=b;return I===Nr.Audio}),S=m.some(b=>{let{stream_type:I}=b;return I!==Nr.Audio}),T=m.some(b=>{let{stream_type:I}=b;return I===Nr.Screen||I===Nr.ScreenLow});r.state==="offer"&&Je.publish(this._joinInfo.sid,{eventElapse:ua.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:z.TIMEOUT,audio:v,video:S,p2pid:r.p2p_id,publishRequestid:this.store.pubId,screenshare:T,audioName:v?(o=m.find(b=>{let{stream_type:I}=b;return I===Nr.Audio}))===null||o===void 0||(s=o.ssrcs[0])===null||s===void 0?void 0:s.ssrcId.toString():void 0,videoName:S?(l=m.find(b=>{let{stream_type:I}=b;return I!==Nr.Audio}))===null||l===void 0||(h=l.ssrcs[0])===null||h===void 0?void 0:h.ssrcId.toString():void 0})}break}case ut.SUBSCRIBE:(r=r)&&Je.subscribe(this._joinInfo.sid,{succ:!1,ec:z.TIMEOUT,audio:r.stream_type===It.AUDIO,video:r.stream_type===It.VIDEO,peerid:r.stream_id,subscribeRequestid:r.ssrcId,p2pid:this.store.p2pId,eventElapse:ua.measureFromSubscribeStart(this.store.clientId,r.ssrcId)})}}),this._gateway.signal.on(kt.ON_P2P_OK,n=>{this.uid,this._uid}),this._gateway.signal.on(kt.ON_PUBLISHED_USER_LIST,n=>{if(n==null||!n.users)return;re("BLOCK_LOCAL_CLIENT")&&(n.users=n.users.filter(s=>!iu(s.audio_ssrc,this.channelName)));const r=[],o=[];for(const s of n.users){let l=this._users.find(T=>T.uid===s.stream_id);l?l._trust_in_room_=!0:(l=new CC(s.stream_id,s.stream_id),this._users.push(l),this.getListeners(Ht.PUBLISHED_USER_LIST).length===0&&(U.debug("[".concat(this._clientId,"] user online"),s.stream_id),this.emit(Ht.USER_JOINED,l)));const h=Cr.Audio&s.stream_type,m=(Cr.Video|Cr.LwoVideo)&s.stream_type,v=h&&l.hasAudio,S=m&&l.hasVideo;m&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0,l._videoSSRC=s.video_ssrc,l._rtxSsrcId=s.video_rtx),h&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0,l._audioSSRC=s.audio_ssrc),h&&!v&&this.getListeners(Ht.PUBLISHED_USER_LIST).length===0&&(U.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published audio")),this.emit(Ht.USER_PUBLISHED,l,"audio")),m&&!S&&this.getListeners(Ht.PUBLISHED_USER_LIST).length===0&&(U.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published video")),this.emit(Ht.USER_PUBLISHED,l,"video")),(h&&!v||m&&!S)&&r.push(l),m&&this._p2pChannel.hasPendingRemoteMedia(l,"video")&&o.push({user:l,mediaType:"video"}),h&&this._p2pChannel.hasPendingRemoteMedia(l,"audio")&&o.push({user:l,mediaType:"audio"})}o.length>0&&(U.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(o.map(s=>"user: ".concat(s.user.uid,", mediaType: ").concat(s.mediaType)).join("; ")," ")),this.massSubscribe(o).catch(s=>{U.error("[".concat(this._clientId,"] mass resubscribe error"),s.toString())})),this.getListeners(Ht.PUBLISHED_USER_LIST).length>0?(U.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(r.map(s=>s.uid).join(", "))),this.emit(Ht.PUBLISHED_USER_LIST,r)):U.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(r.map(s=>s.uid).join(", ")))})}_handleP2PChannelEvents(){this._p2pChannel.on(Yt.RequestMuteLocal,async(n,r,o)=>{if(this._joinInfo)try{await this._gateway.muteLocal(n,this._joinInfo.stringUid||this._joinInfo.uid),r()}catch(s){s.code===z.DISCONNECT_P2P?r():o(s)}else r()}),this._p2pChannel.on(Yt.RequestUnmuteLocal,async(n,r,o)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(n,this._joinInfo.stringUid||this._joinInfo.uid),r()}catch(s){s.code===z.DISCONNECT_P2P?r():o(s)}else r()}),this._p2pChannel.on(Yt.RequestRePublish,(n,r,o)=>{this.publish(n,!1).then(r).catch(o)}),this._p2pChannel.on(Yt.RequestReSubscribe,async(n,r,o)=>{try{for(const{user:s,kind:l}of n)l===It.VIDEO?await this.subscribe(s,"video"):await this.subscribe(s,"audio");r()}catch(s){o(s)}}),this._p2pChannel.on(Yt.RequestUploadStats,(n,r)=>{this._gateway.uploadStats(n,r)}),this._p2pChannel.on(Yt.MediaReconnectStart,n=>{this.emit(Ht.MEDIA_RECONNECT_START,n)}),this._p2pChannel.on(Yt.MediaReconnectEnd,n=>{this.emit(Ht.MEDIA_RECONNECT_END,n)}),this._p2pChannel.on(Yt.NeedSignalRTT,n=>{n(this._gateway.getSignalRTT())}),this._p2pChannel.on(Yt.RequestRestartICE,async n=>{const r=await this._p2pChannel.restartICE(n),o=await r.next();if(o.done)return;const s=o.value;let l;try{l=await this._gateway.restartICE({iceParameters:s})}catch(m){return void r.throw(m)}const{iceParameters:h}=function(m){const v=m.iceParameters;return{iceParameters:{iceUfrag:v.iceUfrag,icePwd:v.icePwd}}}(l);await r.next({remoteIceParameters:h})}),this._p2pChannel.on(Yt.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(Yt.RequestReconnectPC,async()=>{var n;const{iceParameters:r,dtlsParameters:o,rtpCapabilities:s}=await this._p2pChannel.startP2PConnection({turnServer:(n=this._joinInfo)===null||n===void 0?void 0:n.turnServer}),{gatewayEstablishParams:l,gatewayAddress:h}=await this._gateway.reconnectPC({iceParameters:r,dtlsParameters:o,rtpCapabilities:s}),{dtlsParameters:m,iceParameters:v,candidates:S,rtpCapabilities:T,setup:b,cname:I}=hL(l,h);await this._p2pChannel.connect(v,m,S,T,b,I),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(Yt.RequestUnpublishForReconnectPC,async(n,r,o)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(n,this._uid),r()):o()}),this._p2pChannel.on(Yt.P2PLost,()=>{this.emit(Ht.P2P_LOST,this.store.uid)}),this._p2pChannel.on(Yt.UpdateVideoEncoder,n=>{n._encoderConfig&&this._gateway.setVideoProfile(n._encoderConfig)}),this._p2pChannel.on(Yt.ConnectionTypeChange,n=>{this.emit(Ht.IS_USING_CLOUD_PROXY,n)}),this._p2pChannel.on(Yt.RequestLowStreamParameter,n=>{n(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(Yt.QueryClientConnectionState,n=>{n(this.connectionState)})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(n){if(this.connectionState!=="CONNECTED"||!this._joinInfo)throw new Q(z.INVALID_OPERATION,"[".concat(this._clientId,"] Client did not join channel"));if(this._inspect)throw new Q(z.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));if(!n)throw new Q(z.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig is necessary"));if(!n.inspectType||!Array.isArray(n.inspectType))throw new Q(z.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));{const r=[...new Set(n.inspectType)];r.forEach(o=>{if(!["supervise","moderation"].includes(o))throw new Q(z.INVALID_PARAMS,"[".concat(this._clientId,"] ").concat(o," is not a valid inspect type."))}),n.inspectType=r}if(n&&n.extraInfo&&n.extraInfo.length>1024)throw new Q(z.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const r=new W0(n);this._inspect=r,this.handleVideoInspectEvents(this._inspect),await r.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},kr)}catch(r){throw Array.isArray(r)?r[0]:r}}async disableContentInspect(){if(!this._inspect)throw new Q(z.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(n){throw Array.isArray(n)?n[0]:n}}handleVideoInspectEvents(n){n.on(xr.CONNECTION_STATE_CHANGE,(r,o)=>{switch(this.emit(Ht.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,r,o),o){case jo.CONNECTED:if(this.connectionState!=="CONNECTED")return void this.emit(Ht.CONTENT_INSPECT_ERROR,new Q(z.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));n.inspectImage()}}),n.on(xr.INSPECT_RESULT,(r,o)=>{var s;if((o==null?void 0:o.code)===z.INVALID_OPERATION&&this.connectionState==="DISCONNECTED")return U.debug("Stop inspect content because that has left channel"),this==null||(s=this._inspect)===null||s===void 0||s.close(),void(this._inspect=void 0);this.emit(Ht.CONTENT_INSPECT_RESULT,r,o)}),n.on(xr.CLIENT_LOCAL_VIDEO_TRACK,r=>{r(this.localTracks.filter(o=>o.trackMediaType==="video")[0])})}getJoinChannelServiceRecords(){return U.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(n){lp(n,"enabled"),Cn("ENABLE_PUBLISH_AUDIO_FILTER",n),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(n)}_handleResetAddStream(n,r){switch(r){case"audio":n._audio_added_=!1,n._trust_audio_stream_added_state_=!0;break;case"video":n._video_added_=!1,n._trust_video_stream_added_state_=!0}}}).prototype,"leave",[hM],Object.getOwnPropertyDescriptor(De.prototype,"leave"),De.prototype),_e(De.prototype,"publish",[pM],Object.getOwnPropertyDescriptor(De.prototype,"publish"),De.prototype),_e(De.prototype,"unpublish",[fM],Object.getOwnPropertyDescriptor(De.prototype,"unpublish"),De.prototype),_e(De.prototype,"subscribe",[mM],Object.getOwnPropertyDescriptor(De.prototype,"subscribe"),De.prototype),_e(De.prototype,"massSubscribe",[gM],Object.getOwnPropertyDescriptor(De.prototype,"massSubscribe"),De.prototype),_e(De.prototype,"unsubscribe",[vM],Object.getOwnPropertyDescriptor(De.prototype,"unsubscribe"),De.prototype),_e(De.prototype,"massUnsubscribe",[EM],Object.getOwnPropertyDescriptor(De.prototype,"massUnsubscribe"),De.prototype),_e(De.prototype,"setLowStreamParameter",[_M],Object.getOwnPropertyDescriptor(De.prototype,"setLowStreamParameter"),De.prototype),_e(De.prototype,"enableDualStream",[SM],Object.getOwnPropertyDescriptor(De.prototype,"enableDualStream"),De.prototype),_e(De.prototype,"disableDualStream",[yM],Object.getOwnPropertyDescriptor(De.prototype,"disableDualStream"),De.prototype),_e(De.prototype,"setClientRole",[CM],Object.getOwnPropertyDescriptor(De.prototype,"setClientRole"),De.prototype),_e(De.prototype,"setProxyServer",[bM],Object.getOwnPropertyDescriptor(De.prototype,"setProxyServer"),De.prototype),_e(De.prototype,"setTurnServer",[TM],Object.getOwnPropertyDescriptor(De.prototype,"setTurnServer"),De.prototype),_e(De.prototype,"setLicense",[RM],Object.getOwnPropertyDescriptor(De.prototype,"setLicense"),De.prototype),_e(De.prototype,"startProxyServer",[IM],Object.getOwnPropertyDescriptor(De.prototype,"startProxyServer"),De.prototype),_e(De.prototype,"stopProxyServer",[wM],Object.getOwnPropertyDescriptor(De.prototype,"stopProxyServer"),De.prototype),_e(De.prototype,"setLocalAccessPointsV2",[OM],Object.getOwnPropertyDescriptor(De.prototype,"setLocalAccessPointsV2"),De.prototype),_e(De.prototype,"setLocalAccessPoints",[AM],Object.getOwnPropertyDescriptor(De.prototype,"setLocalAccessPoints"),De.prototype),_e(De.prototype,"setRemoteDefaultVideoStreamType",[NM],Object.getOwnPropertyDescriptor(De.prototype,"setRemoteDefaultVideoStreamType"),De.prototype),_e(De.prototype,"setRemoteVideoStreamType",[xM],Object.getOwnPropertyDescriptor(De.prototype,"setRemoteVideoStreamType"),De.prototype),_e(De.prototype,"setStreamFallbackOption",[PM],Object.getOwnPropertyDescriptor(De.prototype,"setStreamFallbackOption"),De.prototype),_e(De.prototype,"setEncryptionConfig",[DM],Object.getOwnPropertyDescriptor(De.prototype,"setEncryptionConfig"),De.prototype),_e(De.prototype,"renewToken",[kM],Object.getOwnPropertyDescriptor(De.prototype,"renewToken"),De.prototype),_e(De.prototype,"enableAudioVolumeIndicator",[LM],Object.getOwnPropertyDescriptor(De.prototype,"enableAudioVolumeIndicator"),De.prototype),_e(De.prototype,"startLiveStreaming",[MM],Object.getOwnPropertyDescriptor(De.prototype,"startLiveStreaming"),De.prototype),_e(De.prototype,"setLiveTranscoding",[UM],Object.getOwnPropertyDescriptor(De.prototype,"setLiveTranscoding"),De.prototype),_e(De.prototype,"stopLiveStreaming",[VM],Object.getOwnPropertyDescriptor(De.prototype,"stopLiveStreaming"),De.prototype),_e(De.prototype,"addInjectStreamUrl",[FM],Object.getOwnPropertyDescriptor(De.prototype,"addInjectStreamUrl"),De.prototype),_e(De.prototype,"removeInjectStreamUrl",[BM],Object.getOwnPropertyDescriptor(De.prototype,"removeInjectStreamUrl"),De.prototype),_e(De.prototype,"startChannelMediaRelay",[jM],Object.getOwnPropertyDescriptor(De.prototype,"startChannelMediaRelay"),De.prototype),_e(De.prototype,"updateChannelMediaRelay",[$M],Object.getOwnPropertyDescriptor(De.prototype,"updateChannelMediaRelay"),De.prototype),_e(De.prototype,"stopChannelMediaRelay",[HM],Object.getOwnPropertyDescriptor(De.prototype,"stopChannelMediaRelay"),De.prototype),_e(De.prototype,"sendCustomReportMessage",[WM],Object.getOwnPropertyDescriptor(De.prototype,"sendCustomReportMessage"),De.prototype),_e(De.prototype,"pickSVCLayer",[zM],Object.getOwnPropertyDescriptor(De.prototype,"pickSVCLayer"),De.prototype),_e(De.prototype,"enableContentInspect",[GM],Object.getOwnPropertyDescriptor(De.prototype,"enableContentInspect"),De.prototype),_e(De.prototype,"disableContentInspect",[KM],Object.getOwnPropertyDescriptor(De.prototype,"disableContentInspect"),De.prototype),_e(De.prototype,"getJoinChannelServiceRecords",[YM],Object.getOwnPropertyDescriptor(De.prototype,"getJoinChannelServiceRecords"),De.prototype),_e(De.prototype,"setPublishAudioFilterEnabled",[qM],Object.getOwnPropertyDescriptor(De.prototype,"setPublishAudioFilterEnabled"),De.prototype),De);class SX extends oP{set currentState(r){r!==this._currentState&&(this._currentState=r,this.emit(oo.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),N(this,"audioBuffer",void 0),N(this,"sourceNode",void 0),N(this,"startPlayTime",0),N(this,"startPlayOffset",0),N(this,"pausePlayTime",0),N(this,"options",void 0),N(this,"currentLoopCount",0),N(this,"currentPlaybackSpeed",100),N(this,"_currentState","stopped"),this.audioBuffer=r,this.options=o,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(r){this.currentState==="stopped"?(this.options=r,this.startPlayOffset=this.options.startPlayTime||0):U.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(r){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=r,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=r))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}setAudioBufferPlaybackSpeed(r){this.sourceNode&&(this.currentState==="playing"&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=r/100),this.currentPlaybackSpeed=r}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const r=this.context.createBufferSource();return r.buffer=this.audioBuffer,r.loop=!!this.options.loop,r.connect(this.outputNode),r.playbackRate.value=this.currentPlaybackSpeed/100,r}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const JM=new Map;async function yX(n,r){let o=null;if(typeof n=="string"){const l=JM.get(n);if(l)return U.debug("use cached audio resource: ",n),l;try{o=(await Vs(()=>Pa.get(n,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(h){throw new Q(z.FETCH_AUDIO_FILE_FAILED,h.toString())}}else o=await new Me((h,m)=>{const v=new FileReader;v.onload=S=>{S.target?h(S.target.result):m(new Q(z.READ_LOCAL_AUDIO_FILE_ERROR))},v.onerror=()=>{m(new Q(z.READ_LOCAL_AUDIO_FILE_ERROR))},v.readAsArrayBuffer(n)});const s=await function(l){const h=vd();return new Me((m,v)=>{h.decodeAudioData(l,S=>{m(S)},S=>{v(new Q(z.DECODE_AUDIO_FILE_FAILED,S.toString()))})})}(o);return typeof n=="string"&&r&&JM.set(n,s),s}function QM(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function z0(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?QM(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):QM(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function nb(n,r,o,s){o.optimizationMode&&(s&&s.width&&s.height?(o.encoderConfig=z0(z0({},s),{},{bitrateMin:s.bitrateMin,bitrateMax:s.bitrateMax}),o.optimizationMode!=="motion"&&o.optimizationMode!=="detail"||(r.contentHint=o.optimizationMode,r.contentHint===o.optimizationMode?U.debug("[".concat(n,"] set content hint to"),o.optimizationMode):U.debug("[".concat(n,"] set content hint failed")))):U.warning("[".concat(n,"] can not apply optimization mode bitrate config, no encoderConfig")))}const CX=an().name;function bX(n,r,o,s){let l,h=0,m=null;return new Me((v,S)=>{setTimeout(()=>{l&&(l(),v(h))},r),l=rP(()=>{(function(){h>s&&l&&(l(),v(h));const T=o.getContext("2d");if(!T){const L=new Q(z.UNEXPECTED_ERROR,"can not get canvas 2d context.");return U.error(L.toString()),void S(L)}T.drawImage(n,0,0,160,120);const b=T.getImageData(0,0,o.width,o.height),I=Math.floor(b.data.length/3);if(m){for(let L=0;L<I;L+=3)if(b.data[L]!==m[L])return h+=1,void(m=b.data);m=b.data}else m=b.data})()},30)})}class Np{constructor(r,o){N(this,"id",0),N(this,"element",void 0),N(this,"peerPair",void 0),N(this,"context",void 0),N(this,"audioPlayerElement",void 0),N(this,"audioTrack",void 0),Np.count+=1,this.id=Np.count,this.element=r,this.context=o}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=r=>{const o=document.createElement("audio");o.srcObject=new MediaStream([r.track]),o.play(),this.audioPlayerElement=o}}async switchSdp(){if(!this.peerPair)return;const r=async(s,l)=>{const h=l==="offer"?await s.createOffer():await s.createAnswer();return await s.setLocalDescription(h),s.iceGatheringState==="complete"?s.localDescription:new Me(m=>{s.onicegatheringstatechange=()=>{s.iceGatheringState==="complete"&&m(s.localDescription)}})},o=async(s,l)=>await s.setRemoteDescription(l);try{const s=await r(this.peerPair[0],"offer");await o(this.peerPair[1],s);const l=await r(this.peerPair[1],"answer");await o(this.peerPair[0],l)}catch(s){throw new Q(z.LOCAL_AEC_ERROR,s.toString()).print()}}async getTracksFromMediaElement(r){if(this.audioTrack)return this.audioTrack;let o;try{r instanceof HTMLVideoElement&&(r.captureStream?r.captureStream():r.mozCaptureStream()),o=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(r).connect(o)}catch(l){throw new Q(z.LOCAL_AEC_ERROR,l.toString()).print()}if(!o)throw new Q(z.LOCAL_AEC_ERROR,"no dest node when local aec").print();const s=o.stream.getAudioTracks()[0];return this.audioTrack=s,s}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const r=this.element,o=await this.getTracksFromMediaElement(r);this.peerPair&&this.peerPair[0].addTrack(o),await this.switchSdp()}close(){U.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(r=>{r.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var ZM,G0;N(Np,"count",0);const TX=window.AudioContext||window.webkitAudioContext,RX=new(ZM=rt({report:Je}),_e((G0=class{constructor(){N(this,"units",[]),N(this,"context",void 0)}processExternalMediaAEC(n){if(!this._doesEnvironmentNeedAEC())return U.debug("the system does not need to process local aec"),-1;this.context||(this.context=new TX);let r=this.units.find(o=>o&&o.getElement()===n);return r||(r=new Np(n,this.context),this.units.push(r)),r.startEchoCancellation(),U.debug("start processing local audio echo cancellation, id is",r.id),r.id}_doesEnvironmentNeedAEC(){return an().name!==pn.SAFARI}}).prototype,"processExternalMediaAEC",[ZM],Object.getOwnPropertyDescriptor(G0.prototype,"processExternalMediaAEC"),G0.prototype),G0);function e2(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),o.push.apply(o,s)}return o}function t2(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?e2(Object(o),!0).forEach(function(s){N(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):e2(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}const rb=window||document;function n2(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!rb)return;const o=Ur._cspEventHandlerPointer;if(o&&r)return void console.error(o,r);const s=l=>{if(!(l&&l.blockedURI&&(Ur.onSecurityPolicyViolation||Ur.getListeners(hs.SECURITY_POLICY_VIOLATION).length>0)))return;const h=l.blockedURI;re("CSP_DETECTED_HOSTNAME_LIST").some(m=>h.includes(m))&&(Ur.onSecurityPolicyViolation&&typeof Ur.onSecurityPolicyViolation=="function"&&Ur.onSecurityPolicyViolation(l),Ur.getListeners(hs.SECURITY_POLICY_VIOLATION).length>0&&Ur.emit(hs.SECURITY_POLICY_VIOLATION,l))};o&&rb.removeEventListener("securitypolicyviolation",o),(r||n&&typeof n=="function"||Ur.getListeners(hs.SECURITY_POLICY_VIOLATION).length>0)&&rb.addEventListener("securitypolicyviolation",s),Ur._cspEventHandlerPointer=s}Cn("PROCESS_ID","process-".concat(jn(8,""),"-").concat(jn(4,""),"-").concat(jn(4,""),"-").concat(jn(4,""),"-").concat(jn(12,""))),function(){const n=an();Ri.getDisplayMedia=function(r){return!!(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)}(),Ri.getStreamFromExtension=n.name===pn.CHROME&&Number(n.version)>34,Ri.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const r=new RTCPeerConnection;let o=!1;try{r.addTransceiver("audio"),o=!0}catch{}return r.close(),o}(),Ri.supportMinBitrate=n.name===pn.CHROME||n.name===pn.EDGE,Ri.supportSetRtpSenderParameters=function(){const r=an();return!window.RTCRtpSender||!window.RTCRtpSender.prototype.setParameters||!window.RTCRtpSender.prototype.getParameters?!1:!!Zl()||!(!Di()&&!Jm())||r.name===pn.FIREFOX&&Number(r.version)>=64}(),n.name===pn.SAFARI&&(Number(n.version)>=14?Ri.supportDualStream=!0:Ri.supportDualStream=!1),Ri.webAudioMediaStreamDest=function(){const r=an();return!(r.name===pn.SAFARI&&Number(r.version)<12)}(),Ri.supportReplaceTrack=function(){return window.RTCRtpSender?typeof RTCRtpSender.prototype.replaceTrack=="function":!1}(),Ri.supportWebGL=typeof WebGLRenderingContext<"u",Ri.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Zl()||(Ri.webAudioWithAEC=!0),Ri.supportShareAudio=function(){const r=an();return(r.os===di.WIN_10||r.os===di.WIN_81||r.os===di.WIN_7||r.os===di.LINUX||r.os===di.MAC_OS)&&r.name===pn.CHROME&&Number(r.version)>=74}(),Ri.supportDualStreamEncoding=function(){const r=an();return re("DISABLE_WEBAUDIO")?!0:r.name==="Safari"&&Number(r.version)>=14||!!(r.name==="Chrome"&&/Windows/i.test(r.os||"")&&Number(r.version)>=100&&re("CHROME_DUAL_STREAM_USE_ENCODING"))}(),Ri.supportDataChannel=function(){return!!(sy(76)||function(r){const o=an();return!(o.name!==pn.FIREFOX||!o.osVersion)&&Number(o.version)>=r}(68)||function(r){const o=an();return!(o.name!==pn.SAFARI||!o.osVersion)&&Number(o.version)>=r}(14))}(),Ri.supportPCSetConfiguration=function(){const r=window.RTCPeerConnection;return!Qn()&&!!r&&r.prototype.setConfiguration instanceof Function}(),Ri.supportWebRTCEncodedTransform=function(){const r=an();return r.name==="Chrome"&&Number(r.version)>=86}(),U.info("browser compatibility",JSON.stringify(Ri),JSON.stringify(n))}(),function(){let n;try{n=window.localStorage.getItem("websdk_ng_global_parameter")}catch(r){return void U.error("Error loading sdk config",r.message)}if(n)try{const r=JSON.parse(window.atob(n)),o=Date.now();U.debug("Loading global parameters from cache",r),Object.keys(r).forEach(s=>{if(Object.prototype.hasOwnProperty.call(io,s)){const{value:l,expires:h}=r[s];if(h&&h<=o)return;nu[s]=l,io[s]=l}})}catch(r){U.error("Error loading mutableParamsCache: ".concat(n),r.message)}}(),Array.isArray(nu.AREAS)&&nu.AREAS.length>0&&mC(nu.AREAS,!0);const Ur=function(n){const r=new Zn,o=n,s={getListeners:r.getListeners.bind(r),on:(l,h)=>(function(m,v){m===hs.SECURITY_POLICY_VIOLATION&&n2(v,!0)}(l,h),r.on.bind(r)(l,h)),addListener:r.addListener.bind(r),once:r.once.bind(r),off:r.off.bind(r),removeAllListeners:r.removeAllListeners.bind(r),emit:r.emit.bind(r)};return t2(t2({},o),s)}({__CLIENT_LIST__:ru,__TRACK_LIST__:cp,VERSION:la,BUILD:Iy,setParameter:(n,r,o)=>{U.debug("setParameter key:".concat(n,", value:").concat(JSON.stringify(r))),Cn(n,r,o)},getParameter:re,getSupportedCodec:async function(){let n={audio:[],video:[]};try{let r=new RTCPeerConnection;r.addTransceiver("video",{direction:"recvonly"}),r.addTransceiver("audio",{direction:"recvonly"});const o=(await r.createOffer()).sdp;if(!o)return n;r.close(),r=null,n=function(s){const l={video:[],audio:[]};return s.match(/ VP8/i)&&l.video.push("VP8"),s.match(/ VP9/i)&&l.video.push("VP9"),s.match(/ AV1/i)&&l.video.push("AV1"),s.match(/ H264/i)&&l.video.push("H264"),s.match(/ H265/i)&&l.video.push("H265"),s.match(/ opus/i)&&l.audio.push("OPUS"),s.match(/ PCMU/i)&&l.audio.push("PCMU"),s.match(/ PCMA/i)&&l.audio.push("PCMA"),s.match(/ G722/i)&&l.audio.push("G722"),l}(o)}catch(r){throw new Q(z.CREATE_OFFER_FAILED,r.toString&&r.toString()).print()}return n},checkSystemRequirements:function(){const n=Je.reportApiInvoke(null,{name:Or.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Yn.TRACER});let r=!1;try{const h=window.RTCPeerConnection,m=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,v=window.WebSocket;r=!!(h&&m&&v)}catch(h){return U.error("check system requirement failed: ",h),!1}let o=!1;const s=an();s.name===pn.CHROME&&Number(s.version)>=58&&(!BG()||FG())&&(o=!0),s.name===pn.FIREFOX&&Number(s.version)>=56&&(o=!0),s.name===pn.OPERA&&Number(s.version)>=45&&(o=!0),s.name===pn.SAFARI&&Number(s.version)>=11&&(o=!0),(NN()||an().name===pn.QQ)&&(o=!0),U.debug("checkSystemRequirements, api:",r,"browser",o);const l=r&&o;return n.onSuccess(l),l},getDevices:function(n){return zo.enumerateDevices(!0,!0,n)},getMicrophones:function(n){return zo.getRecordingDevices(n)},getCameras:function(n){return zo.getCamerasDevices(n)},getElectronScreenSources:sP,getPlaybackDevices:function(n){return zo.getSpeakers(n)},createClient:function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const r=Je.reportApiInvoke(null,{name:Or.CREATE_CLIENT,options:[n],tag:Yn.TRACER});try{mK(n)}catch(o){throw r.onError(o),o}return n.audioCodec===void 0&&(n.audioCodec="opus"),r.onSuccess(),new _X(Ap(Ap({forceWaitGatewayResponse:!0},n),{},{role:n.mode==="rtc"?"host":n.role}))},createCameraVideoTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=Je.reportApiInvoke(null,{tag:Yn.TRACER,name:Or.CREATE_CAM_VIDEO_TRACK,options:[z0({},n)]}),o=O0(n),s=jn(8,"track-cam-");let l=null;U.info("start create camera video track with config",JSON.stringify(n),"trackId",s);try{l=(await La({video:o},s)).getVideoTracks()[0]||null}catch(m){throw r.onError(m),m}if(!l){const m=new Q(z.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(m),m.throw()}n.optimizationMode&&nb(s,l,n,tu(n.encoderConfig));const h=new Nk(l,n,o,n.scalabiltyMode?l0(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,s);return r.onSuccess(h.getTrackId()),U.info("create camera video success, trackId:",s),h},createCustomVideoTrack:function(n){const r=Je.reportApiInvoke(null,{tag:Yn.TRACER,name:Or.CREATE_CUSTOM_VIDEO_TRACK,options:[n]}),o=new Rr(n.mediaStreamTrack,{width:n.width,height:n.height,frameRate:n.frameRate,bitrateMax:n.bitrateMax,bitrateMin:n.bitrateMin},n.scalabiltyMode?l0(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,jn(8,"track-cus-"),[Lr.CUSTOM_TRACK]);return r.onSuccess(o.getTrackId()),U.info("create custom video track success with config",n,"trackId",o.getTrackId()),o},createScreenVideoTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable";const o=Je.reportApiInvoke(null,{tag:Yn.TRACER,name:Or.CREATE_SCREEN_VIDEO_TRACK,options:[z0({},n),r]});n.encoderConfig?typeof n.encoderConfig=="string"||n.encoderConfig.width&&n.encoderConfig.height||(n.encoderConfig.width={max:1920},n.encoderConfig.height={max:1080}):n.encoderConfig="1080p_2";const s=oq(n),l=jn(8,"track-scr-v-");let h=null,m=null;const v=gr();if(!v.supportShareAudio&&r==="enable"){const b=new Q(z.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return o.onError(b),b.throw()}U.info("start create screen video track with config",n,"withAudio",r,"trackId",l);try{const b=await La({screen:s,screenAudio:r==="auto"?v.supportShareAudio:r==="enable"},l);h=b.getVideoTracks()[0]||null,m=b.getAudioTracks()[0]||null}catch(b){throw o.onError(b),b}if(!h){const b=new Q(z.UNEXPECTED_ERROR,"can not find track in media stream");return o.onError(b),b.throw()}if(!m&&r==="enable"){h&&h.stop();const b=new Q(z.SHARE_AUDIO_NOT_ALLOWED);return o.onError(b),b.throw()}n.optimizationMode||(n.optimizationMode="detail"),n.optimizationMode&&(nb(l,h,n,n.encoderConfig&&Oy(n.encoderConfig)),n.encoderConfig&&typeof n.encoderConfig!="string"&&(n.encoderConfig.bitrateMin=n.encoderConfig.bitrateMax));const S=new Rr(h,n.encoderConfig?Oy(n.encoderConfig):{},n.scalabiltyMode?l0(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,l,[Lr.SCREEN_TRACK]);if(!m)return o.onSuccess(S.getTrackId()),U.info("create screen video track success","video:",S.getTrackId()),S;const T=new vi(m,void 0,jn(8,"track-scr-a-"),!1,!0);return o.onSuccess([S.getTrackId(),T.getTrackId()]),U.info("create screen video track success","video:",S.getTrackId(),"audio:",T.getTrackId()),[S,T]},createMicrophoneAndCameraTracks:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=Je.reportApiInvoke(null,{tag:Yn.TRACER,name:Or.CREATE_MIC_AND_CAM_TRACKS,options:[n,r]}),s=O0(r),l=qD(n),h=jn(8,"track-mic-"),m=jn(8,"track-cam-");let v=null,S=null;U.info("start create camera video track(".concat(m,") and microphone audio track(").concat(h,") with config, audio: ").concat(JSON.stringify(n),", video: ").concat(JSON.stringify(r)));try{const I=await La({audio:l,video:s},"".concat(h,"-").concat(m));v=I.getAudioTracks()[0],S=I.getVideoTracks()[0]}catch(I){throw o.onError(I),I}if(!v||!S){const I=new Q(z.UNEXPECTED_ERROR,"can not find tracks in media stream");return o.onError(I),I.throw()}r.optimizationMode&&nb(m,S,r,tu(r.encoderConfig));const T=new _0(v,n,l,h),b=new Nk(S,r,s,r.scalabiltyMode?l0(r.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},r.optimizationMode,m);return o.onSuccess([T.getTrackId(),b.getTrackId()]),U.info("create camera video track(".concat(m,") and microphone audio track(").concat(h,") success")),[T,b]},createMicrophoneAudioTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=Je.reportApiInvoke(null,{tag:Yn.TRACER,name:Or.CREATE_MIC_AUDIO_TRACK,options:[n]}),o=qD(n),s=jn(8,"track-mic-");let l=null;U.info("start create microphone audio track with config",JSON.stringify(n),"trackId",s);try{l=(await La({audio:o},s)).getAudioTracks()[0]||null}catch(m){throw r.onError(m),m}if(!l){const m=new Q(z.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(m),m.throw()}const h=new _0(l,n,o,s);return r.onSuccess(h.getTrackId()),U.info("create microphone audio track success, trackId:",s),h},createCustomAudioTrack:function(n){const r=Je.reportApiInvoke(null,{tag:Yn.TRACER,name:Or.CREATE_CUSTOM_AUDIO_TRACK,options:[n]}),o=new vi(n.mediaStreamTrack,n.encoderConfig?u0(n.encoderConfig):{},jn(8,"track-cus-"),!1,!0);return U.info("create custom audio track success with config",n,"trackId",o.getTrackId()),r.onSuccess(o.getTrackId()),o},createBufferSourceAudioTrack:async function(n){const r=Je.reportApiInvoke(null,{tag:Yn.TRACER,name:Or.CREATE_BUFFER_AUDIO_TRACK,options:[n]});if(re("DISABLE_WEBAUDIO"))throw new Q(z.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");const o=jn(8,"track-buf-");U.info("start create buffer source audio track with config",JSON.stringify(n),"trackId",o);const s=n.source;if(!(n.source instanceof AudioBuffer))try{n.source=await yX(n.source,n.cacheOnlineFile)}catch(m){return r.onError(m),m.throw()}const l=new SX(n.source),h=new MY(s,l,n.encoderConfig?u0(n.encoderConfig):{},o);return U.info("create buffer source audio track success, trackId:",o),r.onSuccess(h.getTrackId()),h},setAppType:function(n){if(U.debug("setAppType: ".concat(n)),!(Number.isInteger(n)&&n>=0))throw U.debug("Invalid appType"),new Q(z.INVALID_PARAMS,"invalid app type",n);Cn("APP_TYPE",Math.floor(n))},setLogLevel:function(n){U.setLogLevel(n)},enableLogUpload:function(){re("USE_NEW_LOG")?Cn("UPLOAD_LOG",!0):U.enableLogUpload()},disableLogUpload:function(){re("USE_NEW_LOG")?Cn("UPLOAD_LOG",!1):U.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new $D},checkAudioTrackIsActive:async function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const o=Je.reportApiInvoke(null,{tag:Yn.TRACER,name:Or.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[r]});if(!(n instanceof vi||n instanceof B0)){const S=new Q(z.INVALID_TRACK,"the parameter is not a audio track");return o.onError(S),S.throw()}r&&r<1e3&&(r=1e3);const s=n instanceof vi?n.getTrackLabel():"remote_track",l=n.getVolumeLevel();let h=l,m=l;const v=Date.now();return new Me(S=>{const T=setInterval(()=>{const b=n.getVolumeLevel();h=b>h?b:h,m=b<m?b:m;const I=h-m>1e-4,L=Date.now()-v;if(I||L>r){clearInterval(T);const V=I,K={duration:L,deviceLabel:s,maxVolumeLevel:h,result:V};U.info("[track-".concat(n.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(K))),o.onSuccess(K),S(V)}},200)})},checkVideoTrackIsActive:async function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const o=Je.reportApiInvoke(null,{tag:Yn.TRACER,name:Or.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[r]});if(!(n instanceof Rr||n instanceof F0)){const L=new Q(z.INVALID_TRACK,"the parameter is not a video track");return o.onError(L),L.throw()}const s=4;r&&r<1e3&&(r=1e3);const l=n instanceof Rr?n.getTrackLabel():"remote_track",h=n.getMediaStreamTrack(!0),m=document.createElement("video");m.style.width="1px",m.style.height="1px",m.setAttribute("muted",""),m.muted=!0,m.setAttribute("playsinline",""),m.controls=!1,(Di()||Jm())&&(m.style.opacity="0.01",m.style.position="fixed",m.style.left="0",m.style.top="0",document.body.appendChild(m)),m.srcObject=new MediaStream([h]),m.play();const v=document.createElement("canvas");v.width=160,v.height=120;let S=0,T=0;try{const L=Date.now();S=await bX(m,r,v,s),T=Date.now()-L}catch(L){throw o.onError(L),L}CX===pn.SAFARI&&(m.pause(),m.remove()),m.srcObject=null;const b=S>s,I={duration:T,changedPicNum:S,deviceLabel:l,result:b};return U.info("[track-".concat(n.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(I))),o.onSuccess(I),b},setArea:mC,audioElementPlayCenter:bo,processExternalMediaAEC:function(n){RX.processExternalMediaAEC(n)},registerExtensions:function(n){n.forEach(r=>{const o=r;o.__registered__=!0,o.logger.hookLog=U.extLog,o.reporter.hookApiInvoke=Je.extApiInvoke,o.parameters&&Object.keys(o.parameters).forEach(s=>{o.parameters[s]=re(s)})})},ChannelMediaRelayError:Xc,ChannelMediaRelayEvent:us,ChannelMediaRelayState:Mi,RemoteStreamFallbackType:Gy,RemoteStreamType:zy,ConnectionDisconnectedReason:sn,AudienceLatencyLevelType:By,AREAS:Kt});return Object.defineProperties(Ur,{onAudioAutoplayFailed:{get:()=>Ho.onAudioAutoplayFailed,set:n=>{Ho.onAudioAutoplayFailed=n}},onAutoplayFailed:{get:()=>Ho.onAutoplayFailed,set:n=>{Ho.onAutoplayFailed=n}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>Ur._onSecurityPolicyViolation,set(n){Ur._onSecurityPolicyViolation=n,n2(n)}}}),zo.on(pc.CAMERA_DEVICE_CHANGED,n=>{U.info("camera device changed",JSON.stringify(n)),Ur.onCameraChanged&&Ur.onCameraChanged(n),Ur.emit(hs.CAMERA_CHANGED,n)}),zo.on(pc.RECORDING_DEVICE_CHANGED,n=>{U.info("microphone device changed",JSON.stringify(n)),Ur.onMicrophoneChanged&&Ur.onMicrophoneChanged(n),Ur.emit(hs.MICROPHONE_CHANGED,n)}),zo.on(pc.PLAYOUT_DEVICE_CHANGED,n=>{U.debug("playout device changed",JSON.stringify(n)),Ur.onPlaybackDeviceChanged&&Ur.onPlaybackDeviceChanged(n),Ur.emit(hs.PLAYBACK_DEVICE_CHANGED,n)}),bo.onAutoplayFailed=()=>{U.info("detect audio element autoplay failed"),Ho.onAudioAutoplayFailed&&Ho.onAudioAutoplayFailed()},cn.on("autoplay-failed",()=>{U.info("detect webaudio autoplay failed"),Ho.onAudioAutoplayFailed&&Ho.onAudioAutoplayFailed(),Ur.emit(hs.AUTOPLAY_FAILED)}),window&&(window.__ARTC__=Ur),Ur})})(QX);const Pl=ME(NT);var xT={},wc={},ZX={get exports(){return wc},set exports(e){wc=e}},wa={},PT={},eJ={get exports(){return PT},set exports(e){PT=e}},jF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(oe,fe){var ge=oe.length;oe.push(fe);e:for(;0<ge;){var ae=ge-1>>>1,se=oe[ae];if(0<c(se,fe))oe[ae]=fe,oe[ge]=se,ge=ae;else break e}}function i(oe){return oe.length===0?null:oe[0]}function a(oe){if(oe.length===0)return null;var fe=oe[0],ge=oe.pop();if(ge!==fe){oe[0]=ge;e:for(var ae=0,se=oe.length,he=se>>>1;ae<he;){var pe=2*(ae+1)-1,Oe=oe[pe],be=pe+1,Ne=oe[be];if(0>c(Oe,ge))be<se&&0>c(Ne,Oe)?(oe[ae]=Ne,oe[be]=ge,ae=be):(oe[ae]=Oe,oe[pe]=ge,ae=pe);else if(be<se&&0>c(Ne,ge))oe[ae]=Ne,oe[be]=ge,ae=be;else break e}}return fe}function c(oe,fe){var ge=oe.sortIndex-fe.sortIndex;return ge!==0?ge:oe.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();e.unstable_now=function(){return d.now()-p}}var f=[],g=[],E=1,y=null,C=3,w=!1,R=!1,O=!1,k=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(oe){for(var fe=i(g);fe!==null;){if(fe.callback===null)a(g);else if(fe.startTime<=oe)a(g),fe.sortIndex=fe.expirationTime,t(f,fe);else break;fe=i(g)}}function M(oe){if(O=!1,P(oe),!R)if(i(f)!==null)R=!0,ie(B);else{var fe=i(g);fe!==null&&de(M,fe.startTime-oe)}}function B(oe,fe){R=!1,O&&(O=!1,A($),$=-1),w=!0;var ge=C;try{for(P(fe),y=i(f);y!==null&&(!(y.expirationTime>fe)||oe&&!J());){var ae=y.callback;if(typeof ae=="function"){y.callback=null,C=y.priorityLevel;var se=ae(y.expirationTime<=fe);fe=e.unstable_now(),typeof se=="function"?y.callback=se:y===i(f)&&a(f),P(fe)}else a(f);y=i(f)}if(y!==null)var he=!0;else{var pe=i(g);pe!==null&&de(M,pe.startTime-fe),he=!1}return he}finally{y=null,C=ge,w=!1}}var F=!1,j=null,$=-1,ee=5,H=-1;function J(){return!(e.unstable_now()-H<ee)}function X(){if(j!==null){var oe=e.unstable_now();H=oe;var fe=!0;try{fe=j(!0,oe)}finally{fe?W():(F=!1,j=null)}}else F=!1}var W;if(typeof x=="function")W=function(){x(X)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ne=Z.port2;Z.port1.onmessage=X,W=function(){ne.postMessage(null)}}else W=function(){k(X,0)};function ie(oe){j=oe,F||(F=!0,W())}function de(oe,fe){$=k(function(){oe(e.unstable_now())},fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(oe){oe.callback=null},e.unstable_continueExecution=function(){R||w||(R=!0,ie(B))},e.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<oe?Math.floor(1e3/oe):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_getFirstCallbackNode=function(){return i(f)},e.unstable_next=function(oe){switch(C){case 1:case 2:case 3:var fe=3;break;default:fe=C}var ge=C;C=fe;try{return oe()}finally{C=ge}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(oe,fe){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ge=C;C=oe;try{return fe()}finally{C=ge}},e.unstable_scheduleCallback=function(oe,fe,ge){var ae=e.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?ae+ge:ae):ge=ae,oe){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=ge+se,oe={id:E++,callback:fe,priorityLevel:oe,startTime:ge,expirationTime:se,sortIndex:-1},ge>ae?(oe.sortIndex=ge,t(g,oe),i(f)===null&&oe===i(g)&&(O?(A($),$=-1):O=!0,de(M,ge-ae))):(oe.sortIndex=se,t(f,oe),R||w||(R=!0,ie(B))),oe},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(oe){var fe=C;return function(){var ge=C;C=fe;try{return oe.apply(this,arguments)}finally{C=ge}}}})(jF);(function(e){e.exports=jF})(eJ);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $F=_,Ia=PT;function Ke(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HF=new Set,Cf={};function Vu(e,t){Eh(e,t),Eh(e+"Capture",t)}function Eh(e,t){for(Cf[e]=t,e=0;e<t.length;e++)HF.add(t[e])}var Oc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),DT=Object.prototype.hasOwnProperty,tJ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s2={},c2={};function nJ(e){return DT.call(c2,e)?!0:DT.call(s2,e)?!1:tJ.test(e)?c2[e]=!0:(s2[e]=!0,!1)}function rJ(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function iJ(e,t,i,a){if(t===null||typeof t>"u"||rJ(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function No(e,t,i,a,c,u,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=d}var eo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){eo[e]=new No(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];eo[t]=new No(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){eo[e]=new No(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){eo[e]=new No(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){eo[e]=new No(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){eo[e]=new No(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){eo[e]=new No(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){eo[e]=new No(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){eo[e]=new No(e,5,!1,e.toLowerCase(),null,!1,!1)});var KI=/[\-:]([a-z])/g;function YI(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(KI,YI);eo[t]=new No(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(KI,YI);eo[t]=new No(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(KI,YI);eo[t]=new No(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){eo[e]=new No(e,1,!1,e.toLowerCase(),null,!1,!1)});eo.xlinkHref=new No("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){eo[e]=new No(e,1,!1,e.toLowerCase(),null,!0,!0)});function qI(e,t,i,a){var c=eo.hasOwnProperty(t)?eo[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(iJ(t,i,c,a)&&(i=null),a||c===null?nJ(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var Mc=$F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,q0=Symbol.for("react.element"),Kd=Symbol.for("react.portal"),Yd=Symbol.for("react.fragment"),XI=Symbol.for("react.strict_mode"),kT=Symbol.for("react.profiler"),WF=Symbol.for("react.provider"),zF=Symbol.for("react.context"),JI=Symbol.for("react.forward_ref"),LT=Symbol.for("react.suspense"),MT=Symbol.for("react.suspense_list"),QI=Symbol.for("react.memo"),fl=Symbol.for("react.lazy"),GF=Symbol.for("react.offscreen"),l2=Symbol.iterator;function xp(e){return e===null||typeof e!="object"?null:(e=l2&&e[l2]||e["@@iterator"],typeof e=="function"?e:null)}var qr=Object.assign,ob;function Xp(e){if(ob===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);ob=t&&t[1]||""}return`
`+ob+e}var ab=!1;function sb(e,t){if(!e||ab)return"";ab=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var a=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){a=g}e.call(t.prototype)}else{try{throw Error()}catch(g){a=g}e()}}catch(g){if(g&&a&&typeof g.stack=="string"){for(var c=g.stack.split(`
`),u=a.stack.split(`
`),d=c.length-1,p=u.length-1;1<=d&&0<=p&&c[d]!==u[p];)p--;for(;1<=d&&0<=p;d--,p--)if(c[d]!==u[p]){if(d!==1||p!==1)do if(d--,p--,0>p||c[d]!==u[p]){var f=`
`+c[d].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=d&&0<=p);break}}}finally{ab=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Xp(e):""}function oJ(e){switch(e.tag){case 5:return Xp(e.type);case 16:return Xp("Lazy");case 13:return Xp("Suspense");case 19:return Xp("SuspenseList");case 0:case 2:case 15:return e=sb(e.type,!1),e;case 11:return e=sb(e.type.render,!1),e;case 1:return e=sb(e.type,!0),e;default:return""}}function UT(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yd:return"Fragment";case Kd:return"Portal";case kT:return"Profiler";case XI:return"StrictMode";case LT:return"Suspense";case MT:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zF:return(e.displayName||"Context")+".Consumer";case WF:return(e._context.displayName||"Context")+".Provider";case JI:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case QI:return t=e.displayName||null,t!==null?t:UT(e.type)||"Memo";case fl:t=e._payload,e=e._init;try{return UT(e(t))}catch{}}return null}function aJ(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return UT(t);case 8:return t===XI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Dl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function KF(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sJ(e){var t=KF(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,u=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(d){a=""+d,u.call(this,d)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function X0(e){e._valueTracker||(e._valueTracker=sJ(e))}function YF(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=KF(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function av(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function VT(e,t){var i=t.checked;return qr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function u2(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=Dl(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qF(e,t){t=t.checked,t!=null&&qI(e,"checked",t,!1)}function FT(e,t){qF(e,t);var i=Dl(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?BT(e,t.type,i):t.hasOwnProperty("defaultValue")&&BT(e,t.type,Dl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function d2(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function BT(e,t,i){(t!=="number"||av(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Jp=Array.isArray;function ch(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+Dl(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function jT(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ke(91));return qr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function h2(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(Ke(92));if(Jp(i)){if(1<i.length)throw Error(Ke(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Dl(i)}}function XF(e,t){var i=Dl(t.value),a=Dl(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function p2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function JF(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $T(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?JF(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var J0,QF=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(J0=J0||document.createElement("div"),J0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=J0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function bf(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var rf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cJ=["Webkit","ms","Moz","O"];Object.keys(rf).forEach(function(e){cJ.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),rf[t]=rf[e]})});function ZF(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||rf.hasOwnProperty(e)&&rf[e]?(""+t).trim():t+"px"}function e3(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=ZF(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var lJ=qr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function HT(e,t){if(t){if(lJ[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ke(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ke(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ke(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ke(62))}}function WT(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zT=null;function ZI(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var GT=null,lh=null,uh=null;function f2(e){if(e=Zf(e)){if(typeof GT!="function")throw Error(Ke(280));var t=e.stateNode;t&&(t=$E(t),GT(e.stateNode,e.type,t))}}function t3(e){lh?uh?uh.push(e):uh=[e]:lh=e}function n3(){if(lh){var e=lh,t=uh;if(uh=lh=null,f2(e),t)for(e=0;e<t.length;e++)f2(t[e])}}function r3(e,t){return e(t)}function i3(){}var cb=!1;function o3(e,t,i){if(cb)return e(t,i);cb=!0;try{return r3(e,t,i)}finally{cb=!1,(lh!==null||uh!==null)&&(i3(),n3())}}function Tf(e,t){var i=e.stateNode;if(i===null)return null;var a=$E(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(Ke(231,t,typeof i));return i}var KT=!1;if(Oc)try{var Pp={};Object.defineProperty(Pp,"passive",{get:function(){KT=!0}}),window.addEventListener("test",Pp,Pp),window.removeEventListener("test",Pp,Pp)}catch{KT=!1}function uJ(e,t,i,a,c,u,d,p,f){var g=Array.prototype.slice.call(arguments,3);try{t.apply(i,g)}catch(E){this.onError(E)}}var of=!1,sv=null,cv=!1,YT=null,dJ={onError:function(e){of=!0,sv=e}};function hJ(e,t,i,a,c,u,d,p,f){of=!1,sv=null,uJ.apply(dJ,arguments)}function pJ(e,t,i,a,c,u,d,p,f){if(hJ.apply(this,arguments),of){if(of){var g=sv;of=!1,sv=null}else throw Error(Ke(198));cv||(cv=!0,YT=g)}}function Fu(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function a3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m2(e){if(Fu(e)!==e)throw Error(Ke(188))}function fJ(e){var t=e.alternate;if(!t){if(t=Fu(e),t===null)throw Error(Ke(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var u=c.alternate;if(u===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===i)return m2(c),e;if(u===a)return m2(c),t;u=u.sibling}throw Error(Ke(188))}if(i.return!==a.return)i=c,a=u;else{for(var d=!1,p=c.child;p;){if(p===i){d=!0,i=c,a=u;break}if(p===a){d=!0,a=c,i=u;break}p=p.sibling}if(!d){for(p=u.child;p;){if(p===i){d=!0,i=u,a=c;break}if(p===a){d=!0,a=u,i=c;break}p=p.sibling}if(!d)throw Error(Ke(189))}}if(i.alternate!==a)throw Error(Ke(190))}if(i.tag!==3)throw Error(Ke(188));return i.stateNode.current===i?e:t}function s3(e){return e=fJ(e),e!==null?c3(e):null}function c3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=c3(e);if(t!==null)return t;e=e.sibling}return null}var l3=Ia.unstable_scheduleCallback,g2=Ia.unstable_cancelCallback,mJ=Ia.unstable_shouldYield,gJ=Ia.unstable_requestPaint,ci=Ia.unstable_now,vJ=Ia.unstable_getCurrentPriorityLevel,ew=Ia.unstable_ImmediatePriority,u3=Ia.unstable_UserBlockingPriority,lv=Ia.unstable_NormalPriority,EJ=Ia.unstable_LowPriority,d3=Ia.unstable_IdlePriority,VE=null,Zs=null;function _J(e){if(Zs&&typeof Zs.onCommitFiberRoot=="function")try{Zs.onCommitFiberRoot(VE,e,void 0,(e.current.flags&128)===128)}catch{}}var Rs=Math.clz32?Math.clz32:CJ,SJ=Math.log,yJ=Math.LN2;function CJ(e){return e>>>=0,e===0?32:31-(SJ(e)/yJ|0)|0}var Q0=64,Z0=4194304;function Qp(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uv(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,u=e.pingedLanes,d=i&268435455;if(d!==0){var p=d&~c;p!==0?a=Qp(p):(u&=d,u!==0&&(a=Qp(u)))}else d=i&~c,d!==0?a=Qp(d):u!==0&&(a=Qp(u));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,u=t&-t,c>=u||c===16&&(u&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-Rs(t),c=1<<i,a|=e[i],t&=~c;return a}function bJ(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TJ(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes;0<u;){var d=31-Rs(u),p=1<<d,f=c[d];f===-1?(!(p&i)||p&a)&&(c[d]=bJ(p,t)):f<=t&&(e.expiredLanes|=p),u&=~p}}function qT(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function h3(){var e=Q0;return Q0<<=1,!(Q0&4194240)&&(Q0=64),e}function lb(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Jf(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Rs(t),e[t]=i}function RJ(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-Rs(i),u=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~u}}function tw(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-Rs(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var hr=0;function p3(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var f3,nw,m3,g3,v3,XT=!1,eg=[],Tl=null,Rl=null,Il=null,Rf=new Map,If=new Map,gl=[],IJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function v2(e,t){switch(e){case"focusin":case"focusout":Tl=null;break;case"dragenter":case"dragleave":Rl=null;break;case"mouseover":case"mouseout":Il=null;break;case"pointerover":case"pointerout":Rf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":If.delete(t.pointerId)}}function Dp(e,t,i,a,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:u,targetContainers:[c]},t!==null&&(t=Zf(t),t!==null&&nw(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function wJ(e,t,i,a,c){switch(t){case"focusin":return Tl=Dp(Tl,e,t,i,a,c),!0;case"dragenter":return Rl=Dp(Rl,e,t,i,a,c),!0;case"mouseover":return Il=Dp(Il,e,t,i,a,c),!0;case"pointerover":var u=c.pointerId;return Rf.set(u,Dp(Rf.get(u)||null,e,t,i,a,c)),!0;case"gotpointercapture":return u=c.pointerId,If.set(u,Dp(If.get(u)||null,e,t,i,a,c)),!0}return!1}function E3(e){var t=yu(e.target);if(t!==null){var i=Fu(t);if(i!==null){if(t=i.tag,t===13){if(t=a3(i),t!==null){e.blockedOn=t,v3(e.priority,function(){m3(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=JT(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);zT=a,i.target.dispatchEvent(a),zT=null}else return t=Zf(i),t!==null&&nw(t),e.blockedOn=i,!1;t.shift()}return!0}function E2(e,t,i){jg(e)&&i.delete(t)}function OJ(){XT=!1,Tl!==null&&jg(Tl)&&(Tl=null),Rl!==null&&jg(Rl)&&(Rl=null),Il!==null&&jg(Il)&&(Il=null),Rf.forEach(E2),If.forEach(E2)}function kp(e,t){e.blockedOn===t&&(e.blockedOn=null,XT||(XT=!0,Ia.unstable_scheduleCallback(Ia.unstable_NormalPriority,OJ)))}function wf(e){function t(c){return kp(c,e)}if(0<eg.length){kp(eg[0],e);for(var i=1;i<eg.length;i++){var a=eg[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Tl!==null&&kp(Tl,e),Rl!==null&&kp(Rl,e),Il!==null&&kp(Il,e),Rf.forEach(t),If.forEach(t),i=0;i<gl.length;i++)a=gl[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<gl.length&&(i=gl[0],i.blockedOn===null);)E3(i),i.blockedOn===null&&gl.shift()}var dh=Mc.ReactCurrentBatchConfig,dv=!0;function AJ(e,t,i,a){var c=hr,u=dh.transition;dh.transition=null;try{hr=1,rw(e,t,i,a)}finally{hr=c,dh.transition=u}}function NJ(e,t,i,a){var c=hr,u=dh.transition;dh.transition=null;try{hr=4,rw(e,t,i,a)}finally{hr=c,dh.transition=u}}function rw(e,t,i,a){if(dv){var c=JT(e,t,i,a);if(c===null)_b(e,t,a,hv,i),v2(e,a);else if(wJ(c,e,t,i,a))a.stopPropagation();else if(v2(e,a),t&4&&-1<IJ.indexOf(e)){for(;c!==null;){var u=Zf(c);if(u!==null&&f3(u),u=JT(e,t,i,a),u===null&&_b(e,t,a,hv,i),u===c)break;c=u}c!==null&&a.stopPropagation()}else _b(e,t,a,null,i)}}var hv=null;function JT(e,t,i,a){if(hv=null,e=ZI(a),e=yu(e),e!==null)if(t=Fu(e),t===null)e=null;else if(i=t.tag,i===13){if(e=a3(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return hv=e,null}function _3(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vJ()){case ew:return 1;case u3:return 4;case lv:case EJ:return 16;case d3:return 536870912;default:return 16}default:return 16}}var El=null,iw=null,$g=null;function S3(){if($g)return $g;var e,t=iw,i=t.length,a,c="value"in El?El.value:El.textContent,u=c.length;for(e=0;e<i&&t[e]===c[e];e++);var d=i-e;for(a=1;a<=d&&t[i-a]===c[u-a];a++);return $g=c.slice(e,1<a?1-a:void 0)}function Hg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tg(){return!0}function _2(){return!1}function Oa(e){function t(i,a,c,u,d){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=u,this.target=d,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(i=e[p],this[p]=i?i(u):u[p]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?tg:_2,this.isPropagationStopped=_2,this}return qr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=tg)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=tg)},persist:function(){},isPersistent:tg}),t}var Ph={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ow=Oa(Ph),Qf=qr({},Ph,{view:0,detail:0}),xJ=Oa(Qf),ub,db,Lp,FE=qr({},Qf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Lp&&(Lp&&e.type==="mousemove"?(ub=e.screenX-Lp.screenX,db=e.screenY-Lp.screenY):db=ub=0,Lp=e),ub)},movementY:function(e){return"movementY"in e?e.movementY:db}}),S2=Oa(FE),PJ=qr({},FE,{dataTransfer:0}),DJ=Oa(PJ),kJ=qr({},Qf,{relatedTarget:0}),hb=Oa(kJ),LJ=qr({},Ph,{animationName:0,elapsedTime:0,pseudoElement:0}),MJ=Oa(LJ),UJ=qr({},Ph,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),VJ=Oa(UJ),FJ=qr({},Ph,{data:0}),y2=Oa(FJ),BJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$J={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HJ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$J[e])?!!t[e]:!1}function aw(){return HJ}var WJ=qr({},Qf,{key:function(e){if(e.key){var t=BJ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Hg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jJ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aw,charCode:function(e){return e.type==="keypress"?Hg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zJ=Oa(WJ),GJ=qr({},FE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C2=Oa(GJ),KJ=qr({},Qf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aw}),YJ=Oa(KJ),qJ=qr({},Ph,{propertyName:0,elapsedTime:0,pseudoElement:0}),XJ=Oa(qJ),JJ=qr({},FE,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),QJ=Oa(JJ),ZJ=[9,13,27,32],sw=Oc&&"CompositionEvent"in window,af=null;Oc&&"documentMode"in document&&(af=document.documentMode);var eQ=Oc&&"TextEvent"in window&&!af,y3=Oc&&(!sw||af&&8<af&&11>=af),b2=String.fromCharCode(32),T2=!1;function C3(e,t){switch(e){case"keyup":return ZJ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b3(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qd=!1;function tQ(e,t){switch(e){case"compositionend":return b3(t);case"keypress":return t.which!==32?null:(T2=!0,b2);case"textInput":return e=t.data,e===b2&&T2?null:e;default:return null}}function nQ(e,t){if(qd)return e==="compositionend"||!sw&&C3(e,t)?(e=S3(),$g=iw=El=null,qd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return y3&&t.locale!=="ko"?null:t.data;default:return null}}var rQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function R2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rQ[e.type]:t==="textarea"}function T3(e,t,i,a){t3(a),t=pv(t,"onChange"),0<t.length&&(i=new ow("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var sf=null,Of=null;function iQ(e){L3(e,0)}function BE(e){var t=Qd(e);if(YF(t))return e}function oQ(e,t){if(e==="change")return t}var R3=!1;if(Oc){var pb;if(Oc){var fb="oninput"in document;if(!fb){var I2=document.createElement("div");I2.setAttribute("oninput","return;"),fb=typeof I2.oninput=="function"}pb=fb}else pb=!1;R3=pb&&(!document.documentMode||9<document.documentMode)}function w2(){sf&&(sf.detachEvent("onpropertychange",I3),Of=sf=null)}function I3(e){if(e.propertyName==="value"&&BE(Of)){var t=[];T3(t,Of,e,ZI(e)),o3(iQ,t)}}function aQ(e,t,i){e==="focusin"?(w2(),sf=t,Of=i,sf.attachEvent("onpropertychange",I3)):e==="focusout"&&w2()}function sQ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return BE(Of)}function cQ(e,t){if(e==="click")return BE(t)}function lQ(e,t){if(e==="input"||e==="change")return BE(t)}function uQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ws=typeof Object.is=="function"?Object.is:uQ;function Af(e,t){if(ws(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!DT.call(t,c)||!ws(e[c],t[c]))return!1}return!0}function O2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function A2(e,t){var i=O2(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=O2(i)}}function w3(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?w3(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function O3(){for(var e=window,t=av();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=av(e.document)}return t}function cw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function dQ(e){var t=O3(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&w3(i.ownerDocument.documentElement,i)){if(a!==null&&cw(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,u=Math.min(a.start,c);a=a.end===void 0?u:Math.min(a.end,c),!e.extend&&u>a&&(c=a,a=u,u=c),c=A2(i,u);var d=A2(i,a);c&&d&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),u>a?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hQ=Oc&&"documentMode"in document&&11>=document.documentMode,Xd=null,QT=null,cf=null,ZT=!1;function N2(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;ZT||Xd==null||Xd!==av(a)||(a=Xd,"selectionStart"in a&&cw(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),cf&&Af(cf,a)||(cf=a,a=pv(QT,"onSelect"),0<a.length&&(t=new ow("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=Xd)))}function ng(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Jd={animationend:ng("Animation","AnimationEnd"),animationiteration:ng("Animation","AnimationIteration"),animationstart:ng("Animation","AnimationStart"),transitionend:ng("Transition","TransitionEnd")},mb={},A3={};Oc&&(A3=document.createElement("div").style,"AnimationEvent"in window||(delete Jd.animationend.animation,delete Jd.animationiteration.animation,delete Jd.animationstart.animation),"TransitionEvent"in window||delete Jd.transitionend.transition);function jE(e){if(mb[e])return mb[e];if(!Jd[e])return e;var t=Jd[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in A3)return mb[e]=t[i];return e}var N3=jE("animationend"),x3=jE("animationiteration"),P3=jE("animationstart"),D3=jE("transitionend"),k3=new Map,x2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ll(e,t){k3.set(e,t),Vu(t,[e])}for(var gb=0;gb<x2.length;gb++){var vb=x2[gb],pQ=vb.toLowerCase(),fQ=vb[0].toUpperCase()+vb.slice(1);Ll(pQ,"on"+fQ)}Ll(N3,"onAnimationEnd");Ll(x3,"onAnimationIteration");Ll(P3,"onAnimationStart");Ll("dblclick","onDoubleClick");Ll("focusin","onFocus");Ll("focusout","onBlur");Ll(D3,"onTransitionEnd");Eh("onMouseEnter",["mouseout","mouseover"]);Eh("onMouseLeave",["mouseout","mouseover"]);Eh("onPointerEnter",["pointerout","pointerover"]);Eh("onPointerLeave",["pointerout","pointerover"]);Vu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zp));function P2(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,pJ(a,t,void 0,e),e.currentTarget=null}function L3(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var u=void 0;if(t)for(var d=a.length-1;0<=d;d--){var p=a[d],f=p.instance,g=p.currentTarget;if(p=p.listener,f!==u&&c.isPropagationStopped())break e;P2(c,p,g),u=f}else for(d=0;d<a.length;d++){if(p=a[d],f=p.instance,g=p.currentTarget,p=p.listener,f!==u&&c.isPropagationStopped())break e;P2(c,p,g),u=f}}}if(cv)throw e=YT,cv=!1,YT=null,e}function Vr(e,t){var i=t[iR];i===void 0&&(i=t[iR]=new Set);var a=e+"__bubble";i.has(a)||(M3(t,e,2,!1),i.add(a))}function Eb(e,t,i){var a=0;t&&(a|=4),M3(i,e,a,t)}var rg="_reactListening"+Math.random().toString(36).slice(2);function Nf(e){if(!e[rg]){e[rg]=!0,HF.forEach(function(i){i!=="selectionchange"&&(mQ.has(i)||Eb(i,!1,e),Eb(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[rg]||(t[rg]=!0,Eb("selectionchange",!1,t))}}function M3(e,t,i,a){switch(_3(t)){case 1:var c=AJ;break;case 4:c=NJ;break;default:c=rw}i=c.bind(null,t,i,e),c=void 0,!KT||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function _b(e,t,i,a,c){var u=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var p=a.stateNode.containerInfo;if(p===c||p.nodeType===8&&p.parentNode===c)break;if(d===4)for(d=a.return;d!==null;){var f=d.tag;if((f===3||f===4)&&(f=d.stateNode.containerInfo,f===c||f.nodeType===8&&f.parentNode===c))return;d=d.return}for(;p!==null;){if(d=yu(p),d===null)return;if(f=d.tag,f===5||f===6){a=u=d;continue e}p=p.parentNode}}a=a.return}o3(function(){var g=u,E=ZI(i),y=[];e:{var C=k3.get(e);if(C!==void 0){var w=ow,R=e;switch(e){case"keypress":if(Hg(i)===0)break e;case"keydown":case"keyup":w=zJ;break;case"focusin":R="focus",w=hb;break;case"focusout":R="blur",w=hb;break;case"beforeblur":case"afterblur":w=hb;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=S2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=DJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=YJ;break;case N3:case x3:case P3:w=MJ;break;case D3:w=XJ;break;case"scroll":w=xJ;break;case"wheel":w=QJ;break;case"copy":case"cut":case"paste":w=VJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=C2}var O=(t&4)!==0,k=!O&&e==="scroll",A=O?C!==null?C+"Capture":null:C;O=[];for(var x=g,P;x!==null;){P=x;var M=P.stateNode;if(P.tag===5&&M!==null&&(P=M,A!==null&&(M=Tf(x,A),M!=null&&O.push(xf(x,M,P)))),k)break;x=x.return}0<O.length&&(C=new w(C,R,null,i,E),y.push({event:C,listeners:O}))}}if(!(t&7)){e:{if(C=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",C&&i!==zT&&(R=i.relatedTarget||i.fromElement)&&(yu(R)||R[Ac]))break e;if((w||C)&&(C=E.window===E?E:(C=E.ownerDocument)?C.defaultView||C.parentWindow:window,w?(R=i.relatedTarget||i.toElement,w=g,R=R?yu(R):null,R!==null&&(k=Fu(R),R!==k||R.tag!==5&&R.tag!==6)&&(R=null)):(w=null,R=g),w!==R)){if(O=S2,M="onMouseLeave",A="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(O=C2,M="onPointerLeave",A="onPointerEnter",x="pointer"),k=w==null?C:Qd(w),P=R==null?C:Qd(R),C=new O(M,x+"leave",w,i,E),C.target=k,C.relatedTarget=P,M=null,yu(E)===g&&(O=new O(A,x+"enter",R,i,E),O.target=P,O.relatedTarget=k,M=O),k=M,w&&R)t:{for(O=w,A=R,x=0,P=O;P;P=Pd(P))x++;for(P=0,M=A;M;M=Pd(M))P++;for(;0<x-P;)O=Pd(O),x--;for(;0<P-x;)A=Pd(A),P--;for(;x--;){if(O===A||A!==null&&O===A.alternate)break t;O=Pd(O),A=Pd(A)}O=null}else O=null;w!==null&&D2(y,C,w,O,!1),R!==null&&k!==null&&D2(y,k,R,O,!0)}}e:{if(C=g?Qd(g):window,w=C.nodeName&&C.nodeName.toLowerCase(),w==="select"||w==="input"&&C.type==="file")var B=oQ;else if(R2(C))if(R3)B=lQ;else{B=sQ;var F=aQ}else(w=C.nodeName)&&w.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(B=cQ);if(B&&(B=B(e,g))){T3(y,B,i,E);break e}F&&F(e,C,g),e==="focusout"&&(F=C._wrapperState)&&F.controlled&&C.type==="number"&&BT(C,"number",C.value)}switch(F=g?Qd(g):window,e){case"focusin":(R2(F)||F.contentEditable==="true")&&(Xd=F,QT=g,cf=null);break;case"focusout":cf=QT=Xd=null;break;case"mousedown":ZT=!0;break;case"contextmenu":case"mouseup":case"dragend":ZT=!1,N2(y,i,E);break;case"selectionchange":if(hQ)break;case"keydown":case"keyup":N2(y,i,E)}var j;if(sw)e:{switch(e){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else qd?C3(e,i)&&($="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&($="onCompositionStart");$&&(y3&&i.locale!=="ko"&&(qd||$!=="onCompositionStart"?$==="onCompositionEnd"&&qd&&(j=S3()):(El=E,iw="value"in El?El.value:El.textContent,qd=!0)),F=pv(g,$),0<F.length&&($=new y2($,e,null,i,E),y.push({event:$,listeners:F}),j?$.data=j:(j=b3(i),j!==null&&($.data=j)))),(j=eQ?tQ(e,i):nQ(e,i))&&(g=pv(g,"onBeforeInput"),0<g.length&&(E=new y2("onBeforeInput","beforeinput",null,i,E),y.push({event:E,listeners:g}),E.data=j))}L3(y,t)})}function xf(e,t,i){return{instance:e,listener:t,currentTarget:i}}function pv(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,u=c.stateNode;c.tag===5&&u!==null&&(c=u,u=Tf(e,i),u!=null&&a.unshift(xf(e,u,c)),u=Tf(e,t),u!=null&&a.push(xf(e,u,c))),e=e.return}return a}function Pd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function D2(e,t,i,a,c){for(var u=t._reactName,d=[];i!==null&&i!==a;){var p=i,f=p.alternate,g=p.stateNode;if(f!==null&&f===a)break;p.tag===5&&g!==null&&(p=g,c?(f=Tf(i,u),f!=null&&d.unshift(xf(i,f,p))):c||(f=Tf(i,u),f!=null&&d.push(xf(i,f,p)))),i=i.return}d.length!==0&&e.push({event:t,listeners:d})}var gQ=/\r\n?/g,vQ=/\u0000|\uFFFD/g;function k2(e){return(typeof e=="string"?e:""+e).replace(gQ,`
`).replace(vQ,"")}function ig(e,t,i){if(t=k2(t),k2(e)!==t&&i)throw Error(Ke(425))}function fv(){}var eR=null,tR=null;function nR(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rR=typeof setTimeout=="function"?setTimeout:void 0,EQ=typeof clearTimeout=="function"?clearTimeout:void 0,L2=typeof Promise=="function"?Promise:void 0,_Q=typeof queueMicrotask=="function"?queueMicrotask:typeof L2<"u"?function(e){return L2.resolve(null).then(e).catch(SQ)}:rR;function SQ(e){setTimeout(function(){throw e})}function Sb(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),wf(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);wf(t)}function wl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function M2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Dh=Math.random().toString(36).slice(2),Xs="__reactFiber$"+Dh,Pf="__reactProps$"+Dh,Ac="__reactContainer$"+Dh,iR="__reactEvents$"+Dh,yQ="__reactListeners$"+Dh,CQ="__reactHandles$"+Dh;function yu(e){var t=e[Xs];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ac]||i[Xs]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=M2(e);e!==null;){if(i=e[Xs])return i;e=M2(e)}return t}e=i,i=e.parentNode}return null}function Zf(e){return e=e[Xs]||e[Ac],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ke(33))}function $E(e){return e[Pf]||null}var oR=[],Zd=-1;function Ml(e){return{current:e}}function Fr(e){0>Zd||(e.current=oR[Zd],oR[Zd]=null,Zd--)}function Pr(e,t){Zd++,oR[Zd]=e.current,e.current=t}var kl={},vo=Ml(kl),Jo=Ml(!1),Pu=kl;function _h(e,t){var i=e.type.contextTypes;if(!i)return kl;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},u;for(u in i)c[u]=t[u];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Qo(e){return e=e.childContextTypes,e!=null}function mv(){Fr(Jo),Fr(vo)}function U2(e,t,i){if(vo.current!==kl)throw Error(Ke(168));Pr(vo,t),Pr(Jo,i)}function U3(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(Ke(108,aJ(e)||"Unknown",c));return qr({},i,a)}function gv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||kl,Pu=vo.current,Pr(vo,e),Pr(Jo,Jo.current),!0}function V2(e,t,i){var a=e.stateNode;if(!a)throw Error(Ke(169));i?(e=U3(e,t,Pu),a.__reactInternalMemoizedMergedChildContext=e,Fr(Jo),Fr(vo),Pr(vo,e)):Fr(Jo),Pr(Jo,i)}var Cc=null,HE=!1,yb=!1;function V3(e){Cc===null?Cc=[e]:Cc.push(e)}function bQ(e){HE=!0,V3(e)}function Ul(){if(!yb&&Cc!==null){yb=!0;var e=0,t=hr;try{var i=Cc;for(hr=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}Cc=null,HE=!1}catch(c){throw Cc!==null&&(Cc=Cc.slice(e+1)),l3(ew,Ul),c}finally{hr=t,yb=!1}}return null}var eh=[],th=0,vv=null,Ev=0,Ha=[],Wa=0,Du=null,bc=1,Tc="";function gu(e,t){eh[th++]=Ev,eh[th++]=vv,vv=e,Ev=t}function F3(e,t,i){Ha[Wa++]=bc,Ha[Wa++]=Tc,Ha[Wa++]=Du,Du=e;var a=bc;e=Tc;var c=32-Rs(a)-1;a&=~(1<<c),i+=1;var u=32-Rs(t)+c;if(30<u){var d=c-c%5;u=(a&(1<<d)-1).toString(32),a>>=d,c-=d,bc=1<<32-Rs(t)+c|i<<c|a,Tc=u+e}else bc=1<<u|i<<c|a,Tc=e}function lw(e){e.return!==null&&(gu(e,1),F3(e,1,0))}function uw(e){for(;e===vv;)vv=eh[--th],eh[th]=null,Ev=eh[--th],eh[th]=null;for(;e===Du;)Du=Ha[--Wa],Ha[Wa]=null,Tc=Ha[--Wa],Ha[Wa]=null,bc=Ha[--Wa],Ha[Wa]=null}var Ta=null,Ca=null,Hr=!1,bs=null;function B3(e,t){var i=za(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function F2(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ta=e,Ca=wl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ta=e,Ca=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Du!==null?{id:bc,overflow:Tc}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=za(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Ta=e,Ca=null,!0):!1;default:return!1}}function aR(e){return(e.mode&1)!==0&&(e.flags&128)===0}function sR(e){if(Hr){var t=Ca;if(t){var i=t;if(!F2(e,t)){if(aR(e))throw Error(Ke(418));t=wl(i.nextSibling);var a=Ta;t&&F2(e,t)?B3(a,i):(e.flags=e.flags&-4097|2,Hr=!1,Ta=e)}}else{if(aR(e))throw Error(Ke(418));e.flags=e.flags&-4097|2,Hr=!1,Ta=e}}}function B2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ta=e}function og(e){if(e!==Ta)return!1;if(!Hr)return B2(e),Hr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!nR(e.type,e.memoizedProps)),t&&(t=Ca)){if(aR(e))throw j3(),Error(Ke(418));for(;t;)B3(e,t),t=wl(t.nextSibling)}if(B2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ke(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Ca=wl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Ca=null}}else Ca=Ta?wl(e.stateNode.nextSibling):null;return!0}function j3(){for(var e=Ca;e;)e=wl(e.nextSibling)}function Sh(){Ca=Ta=null,Hr=!1}function dw(e){bs===null?bs=[e]:bs.push(e)}var TQ=Mc.ReactCurrentBatchConfig;function Ss(e,t){if(e&&e.defaultProps){t=qr({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var _v=Ml(null),Sv=null,nh=null,hw=null;function pw(){hw=nh=Sv=null}function fw(e){var t=_v.current;Fr(_v),e._currentValue=t}function cR(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function hh(e,t){Sv=e,hw=nh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(qo=!0),e.firstContext=null)}function Xa(e){var t=e._currentValue;if(hw!==e)if(e={context:e,memoizedValue:t,next:null},nh===null){if(Sv===null)throw Error(Ke(308));nh=e,Sv.dependencies={lanes:0,firstContext:e}}else nh=nh.next=e;return t}var Cu=null;function mw(e){Cu===null?Cu=[e]:Cu.push(e)}function $3(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,mw(t)):(i.next=c.next,c.next=i),t.interleaved=i,Nc(e,a)}function Nc(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var ml=!1;function gw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ic(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ol(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,$n&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Nc(e,i)}return c=a.interleaved,c===null?(t.next=t,mw(a)):(t.next=c.next,c.next=t),a.interleaved=t,Nc(e,i)}function Wg(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,tw(e,i)}}function j2(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,u=null;if(i=i.firstBaseUpdate,i!==null){do{var d={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};u===null?c=u=d:u=u.next=d,i=i.next}while(i!==null);u===null?c=u=t:u=u.next=t}else c=u=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function yv(e,t,i,a){var c=e.updateQueue;ml=!1;var u=c.firstBaseUpdate,d=c.lastBaseUpdate,p=c.shared.pending;if(p!==null){c.shared.pending=null;var f=p,g=f.next;f.next=null,d===null?u=g:d.next=g,d=f;var E=e.alternate;E!==null&&(E=E.updateQueue,p=E.lastBaseUpdate,p!==d&&(p===null?E.firstBaseUpdate=g:p.next=g,E.lastBaseUpdate=f))}if(u!==null){var y=c.baseState;d=0,E=g=f=null,p=u;do{var C=p.lane,w=p.eventTime;if((a&C)===C){E!==null&&(E=E.next={eventTime:w,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var R=e,O=p;switch(C=t,w=i,O.tag){case 1:if(R=O.payload,typeof R=="function"){y=R.call(w,y,C);break e}y=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=O.payload,C=typeof R=="function"?R.call(w,y,C):R,C==null)break e;y=qr({},y,C);break e;case 2:ml=!0}}p.callback!==null&&p.lane!==0&&(e.flags|=64,C=c.effects,C===null?c.effects=[p]:C.push(p))}else w={eventTime:w,lane:C,tag:p.tag,payload:p.payload,callback:p.callback,next:null},E===null?(g=E=w,f=y):E=E.next=w,d|=C;if(p=p.next,p===null){if(p=c.shared.pending,p===null)break;C=p,p=C.next,C.next=null,c.lastBaseUpdate=C,c.shared.pending=null}}while(1);if(E===null&&(f=y),c.baseState=f,c.firstBaseUpdate=g,c.lastBaseUpdate=E,t=c.shared.interleaved,t!==null){c=t;do d|=c.lane,c=c.next;while(c!==t)}else u===null&&(c.shared.lanes=0);Lu|=d,e.lanes=d,e.memoizedState=y}}function $2(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(Ke(191,c));c.call(a)}}}var W3=new $F.Component().refs;function lR(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:qr({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var WE={isMounted:function(e){return(e=e._reactInternals)?Fu(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=Io(),c=Nl(e),u=Ic(a,c);u.payload=t,i!=null&&(u.callback=i),t=Ol(e,u,c),t!==null&&(Is(t,e,c,a),Wg(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=Io(),c=Nl(e),u=Ic(a,c);u.tag=1,u.payload=t,i!=null&&(u.callback=i),t=Ol(e,u,c),t!==null&&(Is(t,e,c,a),Wg(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Io(),a=Nl(e),c=Ic(i,a);c.tag=2,t!=null&&(c.callback=t),t=Ol(e,c,a),t!==null&&(Is(t,e,a,i),Wg(t,e,a))}};function H2(e,t,i,a,c,u,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,u,d):t.prototype&&t.prototype.isPureReactComponent?!Af(i,a)||!Af(c,u):!0}function z3(e,t,i){var a=!1,c=kl,u=t.contextType;return typeof u=="object"&&u!==null?u=Xa(u):(c=Qo(t)?Pu:vo.current,a=t.contextTypes,u=(a=a!=null)?_h(e,c):kl),t=new t(i,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=WE,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=u),t}function W2(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&WE.enqueueReplaceState(t,t.state,null)}function uR(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=W3,gw(e);var u=t.contextType;typeof u=="object"&&u!==null?c.context=Xa(u):(u=Qo(t)?Pu:vo.current,c.context=_h(e,u)),c.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(lR(e,t,u,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&WE.enqueueReplaceState(c,c.state,null),yv(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Mp(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Ke(309));var a=i.stateNode}if(!a)throw Error(Ke(147,e));var c=a,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(d){var p=c.refs;p===W3&&(p=c.refs={}),d===null?delete p[u]:p[u]=d},t._stringRef=u,t)}if(typeof e!="string")throw Error(Ke(284));if(!i._owner)throw Error(Ke(290,e))}return e}function ag(e,t){throw e=Object.prototype.toString.call(t),Error(Ke(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function z2(e){var t=e._init;return t(e._payload)}function G3(e){function t(A,x){if(e){var P=A.deletions;P===null?(A.deletions=[x],A.flags|=16):P.push(x)}}function i(A,x){if(!e)return null;for(;x!==null;)t(A,x),x=x.sibling;return null}function a(A,x){for(A=new Map;x!==null;)x.key!==null?A.set(x.key,x):A.set(x.index,x),x=x.sibling;return A}function c(A,x){return A=xl(A,x),A.index=0,A.sibling=null,A}function u(A,x,P){return A.index=P,e?(P=A.alternate,P!==null?(P=P.index,P<x?(A.flags|=2,x):P):(A.flags|=2,x)):(A.flags|=1048576,x)}function d(A){return e&&A.alternate===null&&(A.flags|=2),A}function p(A,x,P,M){return x===null||x.tag!==6?(x=Ob(P,A.mode,M),x.return=A,x):(x=c(x,P),x.return=A,x)}function f(A,x,P,M){var B=P.type;return B===Yd?E(A,x,P.props.children,M,P.key):x!==null&&(x.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===fl&&z2(B)===x.type)?(M=c(x,P.props),M.ref=Mp(A,x,P),M.return=A,M):(M=Xg(P.type,P.key,P.props,null,A.mode,M),M.ref=Mp(A,x,P),M.return=A,M)}function g(A,x,P,M){return x===null||x.tag!==4||x.stateNode.containerInfo!==P.containerInfo||x.stateNode.implementation!==P.implementation?(x=Ab(P,A.mode,M),x.return=A,x):(x=c(x,P.children||[]),x.return=A,x)}function E(A,x,P,M,B){return x===null||x.tag!==7?(x=Ou(P,A.mode,M,B),x.return=A,x):(x=c(x,P),x.return=A,x)}function y(A,x,P){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ob(""+x,A.mode,P),x.return=A,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case q0:return P=Xg(x.type,x.key,x.props,null,A.mode,P),P.ref=Mp(A,null,x),P.return=A,P;case Kd:return x=Ab(x,A.mode,P),x.return=A,x;case fl:var M=x._init;return y(A,M(x._payload),P)}if(Jp(x)||xp(x))return x=Ou(x,A.mode,P,null),x.return=A,x;ag(A,x)}return null}function C(A,x,P,M){var B=x!==null?x.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return B!==null?null:p(A,x,""+P,M);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case q0:return P.key===B?f(A,x,P,M):null;case Kd:return P.key===B?g(A,x,P,M):null;case fl:return B=P._init,C(A,x,B(P._payload),M)}if(Jp(P)||xp(P))return B!==null?null:E(A,x,P,M,null);ag(A,P)}return null}function w(A,x,P,M,B){if(typeof M=="string"&&M!==""||typeof M=="number")return A=A.get(P)||null,p(x,A,""+M,B);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case q0:return A=A.get(M.key===null?P:M.key)||null,f(x,A,M,B);case Kd:return A=A.get(M.key===null?P:M.key)||null,g(x,A,M,B);case fl:var F=M._init;return w(A,x,P,F(M._payload),B)}if(Jp(M)||xp(M))return A=A.get(P)||null,E(x,A,M,B,null);ag(x,M)}return null}function R(A,x,P,M){for(var B=null,F=null,j=x,$=x=0,ee=null;j!==null&&$<P.length;$++){j.index>$?(ee=j,j=null):ee=j.sibling;var H=C(A,j,P[$],M);if(H===null){j===null&&(j=ee);break}e&&j&&H.alternate===null&&t(A,j),x=u(H,x,$),F===null?B=H:F.sibling=H,F=H,j=ee}if($===P.length)return i(A,j),Hr&&gu(A,$),B;if(j===null){for(;$<P.length;$++)j=y(A,P[$],M),j!==null&&(x=u(j,x,$),F===null?B=j:F.sibling=j,F=j);return Hr&&gu(A,$),B}for(j=a(A,j);$<P.length;$++)ee=w(j,A,$,P[$],M),ee!==null&&(e&&ee.alternate!==null&&j.delete(ee.key===null?$:ee.key),x=u(ee,x,$),F===null?B=ee:F.sibling=ee,F=ee);return e&&j.forEach(function(J){return t(A,J)}),Hr&&gu(A,$),B}function O(A,x,P,M){var B=xp(P);if(typeof B!="function")throw Error(Ke(150));if(P=B.call(P),P==null)throw Error(Ke(151));for(var F=B=null,j=x,$=x=0,ee=null,H=P.next();j!==null&&!H.done;$++,H=P.next()){j.index>$?(ee=j,j=null):ee=j.sibling;var J=C(A,j,H.value,M);if(J===null){j===null&&(j=ee);break}e&&j&&J.alternate===null&&t(A,j),x=u(J,x,$),F===null?B=J:F.sibling=J,F=J,j=ee}if(H.done)return i(A,j),Hr&&gu(A,$),B;if(j===null){for(;!H.done;$++,H=P.next())H=y(A,H.value,M),H!==null&&(x=u(H,x,$),F===null?B=H:F.sibling=H,F=H);return Hr&&gu(A,$),B}for(j=a(A,j);!H.done;$++,H=P.next())H=w(j,A,$,H.value,M),H!==null&&(e&&H.alternate!==null&&j.delete(H.key===null?$:H.key),x=u(H,x,$),F===null?B=H:F.sibling=H,F=H);return e&&j.forEach(function(X){return t(A,X)}),Hr&&gu(A,$),B}function k(A,x,P,M){if(typeof P=="object"&&P!==null&&P.type===Yd&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case q0:e:{for(var B=P.key,F=x;F!==null;){if(F.key===B){if(B=P.type,B===Yd){if(F.tag===7){i(A,F.sibling),x=c(F,P.props.children),x.return=A,A=x;break e}}else if(F.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===fl&&z2(B)===F.type){i(A,F.sibling),x=c(F,P.props),x.ref=Mp(A,F,P),x.return=A,A=x;break e}i(A,F);break}else t(A,F);F=F.sibling}P.type===Yd?(x=Ou(P.props.children,A.mode,M,P.key),x.return=A,A=x):(M=Xg(P.type,P.key,P.props,null,A.mode,M),M.ref=Mp(A,x,P),M.return=A,A=M)}return d(A);case Kd:e:{for(F=P.key;x!==null;){if(x.key===F)if(x.tag===4&&x.stateNode.containerInfo===P.containerInfo&&x.stateNode.implementation===P.implementation){i(A,x.sibling),x=c(x,P.children||[]),x.return=A,A=x;break e}else{i(A,x);break}else t(A,x);x=x.sibling}x=Ab(P,A.mode,M),x.return=A,A=x}return d(A);case fl:return F=P._init,k(A,x,F(P._payload),M)}if(Jp(P))return R(A,x,P,M);if(xp(P))return O(A,x,P,M);ag(A,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,x!==null&&x.tag===6?(i(A,x.sibling),x=c(x,P),x.return=A,A=x):(i(A,x),x=Ob(P,A.mode,M),x.return=A,A=x),d(A)):i(A,x)}return k}var yh=G3(!0),K3=G3(!1),em={},ec=Ml(em),Df=Ml(em),kf=Ml(em);function bu(e){if(e===em)throw Error(Ke(174));return e}function vw(e,t){switch(Pr(kf,t),Pr(Df,e),Pr(ec,em),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$T(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$T(t,e)}Fr(ec),Pr(ec,t)}function Ch(){Fr(ec),Fr(Df),Fr(kf)}function Y3(e){bu(kf.current);var t=bu(ec.current),i=$T(t,e.type);t!==i&&(Pr(Df,e),Pr(ec,i))}function Ew(e){Df.current===e&&(Fr(ec),Fr(Df))}var Kr=Ml(0);function Cv(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cb=[];function _w(){for(var e=0;e<Cb.length;e++)Cb[e]._workInProgressVersionPrimary=null;Cb.length=0}var zg=Mc.ReactCurrentDispatcher,bb=Mc.ReactCurrentBatchConfig,ku=0,Yr=null,Oi=null,Vi=null,bv=!1,lf=!1,Lf=0,RQ=0;function ho(){throw Error(Ke(321))}function Sw(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!ws(e[i],t[i]))return!1;return!0}function yw(e,t,i,a,c,u){if(ku=u,Yr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,zg.current=e===null||e.memoizedState===null?AQ:NQ,e=i(a,c),lf){u=0;do{if(lf=!1,Lf=0,25<=u)throw Error(Ke(301));u+=1,Vi=Oi=null,t.updateQueue=null,zg.current=xQ,e=i(a,c)}while(lf)}if(zg.current=Tv,t=Oi!==null&&Oi.next!==null,ku=0,Vi=Oi=Yr=null,bv=!1,t)throw Error(Ke(300));return e}function Cw(){var e=Lf!==0;return Lf=0,e}function Ks(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vi===null?Yr.memoizedState=Vi=e:Vi=Vi.next=e,Vi}function Ja(){if(Oi===null){var e=Yr.alternate;e=e!==null?e.memoizedState:null}else e=Oi.next;var t=Vi===null?Yr.memoizedState:Vi.next;if(t!==null)Vi=t,Oi=e;else{if(e===null)throw Error(Ke(310));Oi=e,e={memoizedState:Oi.memoizedState,baseState:Oi.baseState,baseQueue:Oi.baseQueue,queue:Oi.queue,next:null},Vi===null?Yr.memoizedState=Vi=e:Vi=Vi.next=e}return Vi}function Mf(e,t){return typeof t=="function"?t(e):t}function Tb(e){var t=Ja(),i=t.queue;if(i===null)throw Error(Ke(311));i.lastRenderedReducer=e;var a=Oi,c=a.baseQueue,u=i.pending;if(u!==null){if(c!==null){var d=c.next;c.next=u.next,u.next=d}a.baseQueue=c=u,i.pending=null}if(c!==null){u=c.next,a=a.baseState;var p=d=null,f=null,g=u;do{var E=g.lane;if((ku&E)===E)f!==null&&(f=f.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),a=g.hasEagerState?g.eagerState:e(a,g.action);else{var y={lane:E,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};f===null?(p=f=y,d=a):f=f.next=y,Yr.lanes|=E,Lu|=E}g=g.next}while(g!==null&&g!==u);f===null?d=a:f.next=p,ws(a,t.memoizedState)||(qo=!0),t.memoizedState=a,t.baseState=d,t.baseQueue=f,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do u=c.lane,Yr.lanes|=u,Lu|=u,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Rb(e){var t=Ja(),i=t.queue;if(i===null)throw Error(Ke(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,u=t.memoizedState;if(c!==null){i.pending=null;var d=c=c.next;do u=e(u,d.action),d=d.next;while(d!==c);ws(u,t.memoizedState)||(qo=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),i.lastRenderedState=u}return[u,a]}function q3(){}function X3(e,t){var i=Yr,a=Ja(),c=t(),u=!ws(a.memoizedState,c);if(u&&(a.memoizedState=c,qo=!0),a=a.queue,bw(Z3.bind(null,i,a,e),[e]),a.getSnapshot!==t||u||Vi!==null&&Vi.memoizedState.tag&1){if(i.flags|=2048,Uf(9,Q3.bind(null,i,a,c,t),void 0,null),Fi===null)throw Error(Ke(349));ku&30||J3(i,t,c)}return c}function J3(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Yr.updateQueue,t===null?(t={lastEffect:null,stores:null},Yr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Q3(e,t,i,a){t.value=i,t.getSnapshot=a,eB(t)&&tB(e)}function Z3(e,t,i){return i(function(){eB(t)&&tB(e)})}function eB(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!ws(e,i)}catch{return!0}}function tB(e){var t=Nc(e,1);t!==null&&Is(t,e,1,-1)}function G2(e){var t=Ks();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mf,lastRenderedState:e},t.queue=e,e=e.dispatch=OQ.bind(null,Yr,e),[t.memoizedState,e]}function Uf(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=Yr.updateQueue,t===null?(t={lastEffect:null,stores:null},Yr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function nB(){return Ja().memoizedState}function Gg(e,t,i,a){var c=Ks();Yr.flags|=e,c.memoizedState=Uf(1|t,i,void 0,a===void 0?null:a)}function zE(e,t,i,a){var c=Ja();a=a===void 0?null:a;var u=void 0;if(Oi!==null){var d=Oi.memoizedState;if(u=d.destroy,a!==null&&Sw(a,d.deps)){c.memoizedState=Uf(t,i,u,a);return}}Yr.flags|=e,c.memoizedState=Uf(1|t,i,u,a)}function K2(e,t){return Gg(8390656,8,e,t)}function bw(e,t){return zE(2048,8,e,t)}function rB(e,t){return zE(4,2,e,t)}function iB(e,t){return zE(4,4,e,t)}function oB(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function aB(e,t,i){return i=i!=null?i.concat([e]):null,zE(4,4,oB.bind(null,t,e),i)}function Tw(){}function sB(e,t){var i=Ja();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&Sw(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function cB(e,t){var i=Ja();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&Sw(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function lB(e,t,i){return ku&21?(ws(i,t)||(i=h3(),Yr.lanes|=i,Lu|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,qo=!0),e.memoizedState=i)}function IQ(e,t){var i=hr;hr=i!==0&&4>i?i:4,e(!0);var a=bb.transition;bb.transition={};try{e(!1),t()}finally{hr=i,bb.transition=a}}function uB(){return Ja().memoizedState}function wQ(e,t,i){var a=Nl(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},dB(e))hB(t,i);else if(i=$3(e,t,i,a),i!==null){var c=Io();Is(i,e,a,c),pB(i,t,a)}}function OQ(e,t,i){var a=Nl(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(dB(e))hB(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var d=t.lastRenderedState,p=u(d,i);if(c.hasEagerState=!0,c.eagerState=p,ws(p,d)){var f=t.interleaved;f===null?(c.next=c,mw(t)):(c.next=f.next,f.next=c),t.interleaved=c;return}}catch{}finally{}i=$3(e,t,c,a),i!==null&&(c=Io(),Is(i,e,a,c),pB(i,t,a))}}function dB(e){var t=e.alternate;return e===Yr||t!==null&&t===Yr}function hB(e,t){lf=bv=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function pB(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,tw(e,i)}}var Tv={readContext:Xa,useCallback:ho,useContext:ho,useEffect:ho,useImperativeHandle:ho,useInsertionEffect:ho,useLayoutEffect:ho,useMemo:ho,useReducer:ho,useRef:ho,useState:ho,useDebugValue:ho,useDeferredValue:ho,useTransition:ho,useMutableSource:ho,useSyncExternalStore:ho,useId:ho,unstable_isNewReconciler:!1},AQ={readContext:Xa,useCallback:function(e,t){return Ks().memoizedState=[e,t===void 0?null:t],e},useContext:Xa,useEffect:K2,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Gg(4194308,4,oB.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Gg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Gg(4,2,e,t)},useMemo:function(e,t){var i=Ks();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=Ks();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=wQ.bind(null,Yr,e),[a.memoizedState,e]},useRef:function(e){var t=Ks();return e={current:e},t.memoizedState=e},useState:G2,useDebugValue:Tw,useDeferredValue:function(e){return Ks().memoizedState=e},useTransition:function(){var e=G2(!1),t=e[0];return e=IQ.bind(null,e[1]),Ks().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=Yr,c=Ks();if(Hr){if(i===void 0)throw Error(Ke(407));i=i()}else{if(i=t(),Fi===null)throw Error(Ke(349));ku&30||J3(a,t,i)}c.memoizedState=i;var u={value:i,getSnapshot:t};return c.queue=u,K2(Z3.bind(null,a,u,e),[e]),a.flags|=2048,Uf(9,Q3.bind(null,a,u,i,t),void 0,null),i},useId:function(){var e=Ks(),t=Fi.identifierPrefix;if(Hr){var i=Tc,a=bc;i=(a&~(1<<32-Rs(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=Lf++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=RQ++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},NQ={readContext:Xa,useCallback:sB,useContext:Xa,useEffect:bw,useImperativeHandle:aB,useInsertionEffect:rB,useLayoutEffect:iB,useMemo:cB,useReducer:Tb,useRef:nB,useState:function(){return Tb(Mf)},useDebugValue:Tw,useDeferredValue:function(e){var t=Ja();return lB(t,Oi.memoizedState,e)},useTransition:function(){var e=Tb(Mf)[0],t=Ja().memoizedState;return[e,t]},useMutableSource:q3,useSyncExternalStore:X3,useId:uB,unstable_isNewReconciler:!1},xQ={readContext:Xa,useCallback:sB,useContext:Xa,useEffect:bw,useImperativeHandle:aB,useInsertionEffect:rB,useLayoutEffect:iB,useMemo:cB,useReducer:Rb,useRef:nB,useState:function(){return Rb(Mf)},useDebugValue:Tw,useDeferredValue:function(e){var t=Ja();return Oi===null?t.memoizedState=e:lB(t,Oi.memoizedState,e)},useTransition:function(){var e=Rb(Mf)[0],t=Ja().memoizedState;return[e,t]},useMutableSource:q3,useSyncExternalStore:X3,useId:uB,unstable_isNewReconciler:!1};function bh(e,t){try{var i="",a=t;do i+=oJ(a),a=a.return;while(a);var c=i}catch(u){c=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:c,digest:null}}function Ib(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function dR(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var PQ=typeof WeakMap=="function"?WeakMap:Map;function fB(e,t,i){i=Ic(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){Iv||(Iv=!0,yR=a),dR(e,t)},i}function mB(e,t,i){i=Ic(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){dR(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(i.callback=function(){dR(e,t),typeof a!="function"&&(Al===null?Al=new Set([this]):Al.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),i}function Y2(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new PQ;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=GQ.bind(null,e,t,i),t.then(e,e))}function q2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function X2(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Ic(-1,1),t.tag=2,Ol(i,t,1))),i.lanes|=1),e)}var DQ=Mc.ReactCurrentOwner,qo=!1;function Ro(e,t,i,a){t.child=e===null?K3(t,null,i,a):yh(t,e.child,i,a)}function J2(e,t,i,a,c){i=i.render;var u=t.ref;return hh(t,c),a=yw(e,t,i,a,u,c),i=Cw(),e!==null&&!qo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,xc(e,t,c)):(Hr&&i&&lw(t),t.flags|=1,Ro(e,t,a,c),t.child)}function Q2(e,t,i,a,c){if(e===null){var u=i.type;return typeof u=="function"&&!Pw(u)&&u.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=u,gB(e,t,u,a,c)):(e=Xg(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&c)){var d=u.memoizedProps;if(i=i.compare,i=i!==null?i:Af,i(d,a)&&e.ref===t.ref)return xc(e,t,c)}return t.flags|=1,e=xl(u,a),e.ref=t.ref,e.return=t,t.child=e}function gB(e,t,i,a,c){if(e!==null){var u=e.memoizedProps;if(Af(u,a)&&e.ref===t.ref)if(qo=!1,t.pendingProps=a=u,(e.lanes&c)!==0)e.flags&131072&&(qo=!0);else return t.lanes=e.lanes,xc(e,t,c)}return hR(e,t,i,a,c)}function vB(e,t,i){var a=t.pendingProps,c=a.children,u=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pr(ih,ya),ya|=i;else{if(!(i&1073741824))return e=u!==null?u.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pr(ih,ya),ya|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=u!==null?u.baseLanes:i,Pr(ih,ya),ya|=a}else u!==null?(a=u.baseLanes|i,t.memoizedState=null):a=i,Pr(ih,ya),ya|=a;return Ro(e,t,c,i),t.child}function EB(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function hR(e,t,i,a,c){var u=Qo(i)?Pu:vo.current;return u=_h(t,u),hh(t,c),i=yw(e,t,i,a,u,c),a=Cw(),e!==null&&!qo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,xc(e,t,c)):(Hr&&a&&lw(t),t.flags|=1,Ro(e,t,i,c),t.child)}function Z2(e,t,i,a,c){if(Qo(i)){var u=!0;gv(t)}else u=!1;if(hh(t,c),t.stateNode===null)Kg(e,t),z3(t,i,a),uR(t,i,a,c),a=!0;else if(e===null){var d=t.stateNode,p=t.memoizedProps;d.props=p;var f=d.context,g=i.contextType;typeof g=="object"&&g!==null?g=Xa(g):(g=Qo(i)?Pu:vo.current,g=_h(t,g));var E=i.getDerivedStateFromProps,y=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function";y||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(p!==a||f!==g)&&W2(t,d,a,g),ml=!1;var C=t.memoizedState;d.state=C,yv(t,a,d,c),f=t.memoizedState,p!==a||C!==f||Jo.current||ml?(typeof E=="function"&&(lR(t,i,E,a),f=t.memoizedState),(p=ml||H2(t,i,p,a,C,f,g))?(y||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=f),d.props=a,d.state=f,d.context=g,a=p):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{d=t.stateNode,H3(e,t),p=t.memoizedProps,g=t.type===t.elementType?p:Ss(t.type,p),d.props=g,y=t.pendingProps,C=d.context,f=i.contextType,typeof f=="object"&&f!==null?f=Xa(f):(f=Qo(i)?Pu:vo.current,f=_h(t,f));var w=i.getDerivedStateFromProps;(E=typeof w=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(p!==y||C!==f)&&W2(t,d,a,f),ml=!1,C=t.memoizedState,d.state=C,yv(t,a,d,c);var R=t.memoizedState;p!==y||C!==R||Jo.current||ml?(typeof w=="function"&&(lR(t,i,w,a),R=t.memoizedState),(g=ml||H2(t,i,g,a,C,R,f)||!1)?(E||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,R,f),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,R,f)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||p===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=R),d.props=a,d.state=R,d.context=f,a=g):(typeof d.componentDidUpdate!="function"||p===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),a=!1)}return pR(e,t,i,a,u,c)}function pR(e,t,i,a,c,u){EB(e,t);var d=(t.flags&128)!==0;if(!a&&!d)return c&&V2(t,i,!1),xc(e,t,u);a=t.stateNode,DQ.current=t;var p=d&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&d?(t.child=yh(t,e.child,null,u),t.child=yh(t,null,p,u)):Ro(e,t,p,u),t.memoizedState=a.state,c&&V2(t,i,!0),t.child}function _B(e){var t=e.stateNode;t.pendingContext?U2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&U2(e,t.context,!1),vw(e,t.containerInfo)}function eU(e,t,i,a,c){return Sh(),dw(c),t.flags|=256,Ro(e,t,i,a),t.child}var fR={dehydrated:null,treeContext:null,retryLane:0};function mR(e){return{baseLanes:e,cachePool:null,transitions:null}}function SB(e,t,i){var a=t.pendingProps,c=Kr.current,u=!1,d=(t.flags&128)!==0,p;if((p=d)||(p=e!==null&&e.memoizedState===null?!1:(c&2)!==0),p?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Pr(Kr,c&1),e===null)return sR(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=a.children,e=a.fallback,u?(a=t.mode,u=t.child,d={mode:"hidden",children:d},!(a&1)&&u!==null?(u.childLanes=0,u.pendingProps=d):u=YE(d,a,0,null),e=Ou(e,a,i,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=mR(i),t.memoizedState=fR,e):Rw(t,d));if(c=e.memoizedState,c!==null&&(p=c.dehydrated,p!==null))return kQ(e,t,d,a,p,c,i);if(u){u=a.fallback,d=t.mode,c=e.child,p=c.sibling;var f={mode:"hidden",children:a.children};return!(d&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=f,t.deletions=null):(a=xl(c,f),a.subtreeFlags=c.subtreeFlags&14680064),p!==null?u=xl(p,u):(u=Ou(u,d,i,null),u.flags|=2),u.return=t,a.return=t,a.sibling=u,t.child=a,a=u,u=t.child,d=e.child.memoizedState,d=d===null?mR(i):{baseLanes:d.baseLanes|i,cachePool:null,transitions:d.transitions},u.memoizedState=d,u.childLanes=e.childLanes&~i,t.memoizedState=fR,a}return u=e.child,e=u.sibling,a=xl(u,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function Rw(e,t){return t=YE({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function sg(e,t,i,a){return a!==null&&dw(a),yh(t,e.child,null,i),e=Rw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kQ(e,t,i,a,c,u,d){if(i)return t.flags&256?(t.flags&=-257,a=Ib(Error(Ke(422))),sg(e,t,d,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=a.fallback,c=t.mode,a=YE({mode:"visible",children:a.children},c,0,null),u=Ou(u,c,d,null),u.flags|=2,a.return=t,u.return=t,a.sibling=u,t.child=a,t.mode&1&&yh(t,e.child,null,d),t.child.memoizedState=mR(d),t.memoizedState=fR,u);if(!(t.mode&1))return sg(e,t,d,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var p=a.dgst;return a=p,u=Error(Ke(419)),a=Ib(u,a,void 0),sg(e,t,d,a)}if(p=(d&e.childLanes)!==0,qo||p){if(a=Fi,a!==null){switch(d&-d){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|d)?0:c,c!==0&&c!==u.retryLane&&(u.retryLane=c,Nc(e,c),Is(a,e,c,-1))}return xw(),a=Ib(Error(Ke(421))),sg(e,t,d,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=KQ.bind(null,e),c._reactRetry=t,null):(e=u.treeContext,Ca=wl(c.nextSibling),Ta=t,Hr=!0,bs=null,e!==null&&(Ha[Wa++]=bc,Ha[Wa++]=Tc,Ha[Wa++]=Du,bc=e.id,Tc=e.overflow,Du=t),t=Rw(t,a.children),t.flags|=4096,t)}function tU(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),cR(e.return,t,i)}function wb(e,t,i,a,c){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=a,u.tail=i,u.tailMode=c)}function yB(e,t,i){var a=t.pendingProps,c=a.revealOrder,u=a.tail;if(Ro(e,t,a.children,i),a=Kr.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tU(e,i,t);else if(e.tag===19)tU(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Pr(Kr,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&Cv(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),wb(t,!1,c,i,u);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Cv(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}wb(t,!0,i,null,u);break;case"together":wb(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Kg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xc(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Lu|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ke(153));if(t.child!==null){for(e=t.child,i=xl(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=xl(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function LQ(e,t,i){switch(t.tag){case 3:_B(t),Sh();break;case 5:Y3(t);break;case 1:Qo(t.type)&&gv(t);break;case 4:vw(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;Pr(_v,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Pr(Kr,Kr.current&1),t.flags|=128,null):i&t.child.childLanes?SB(e,t,i):(Pr(Kr,Kr.current&1),e=xc(e,t,i),e!==null?e.sibling:null);Pr(Kr,Kr.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return yB(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Pr(Kr,Kr.current),a)break;return null;case 22:case 23:return t.lanes=0,vB(e,t,i)}return xc(e,t,i)}var CB,gR,bB,TB;CB=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};gR=function(){};bB=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,bu(ec.current);var u=null;switch(i){case"input":c=VT(e,c),a=VT(e,a),u=[];break;case"select":c=qr({},c,{value:void 0}),a=qr({},a,{value:void 0}),u=[];break;case"textarea":c=jT(e,c),a=jT(e,a),u=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=fv)}HT(i,a);var d;i=null;for(g in c)if(!a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&c[g]!=null)if(g==="style"){var p=c[g];for(d in p)p.hasOwnProperty(d)&&(i||(i={}),i[d]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Cf.hasOwnProperty(g)?u||(u=[]):(u=u||[]).push(g,null));for(g in a){var f=a[g];if(p=c!=null?c[g]:void 0,a.hasOwnProperty(g)&&f!==p&&(f!=null||p!=null))if(g==="style")if(p){for(d in p)!p.hasOwnProperty(d)||f&&f.hasOwnProperty(d)||(i||(i={}),i[d]="");for(d in f)f.hasOwnProperty(d)&&p[d]!==f[d]&&(i||(i={}),i[d]=f[d])}else i||(u||(u=[]),u.push(g,i)),i=f;else g==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,p=p?p.__html:void 0,f!=null&&p!==f&&(u=u||[]).push(g,f)):g==="children"?typeof f!="string"&&typeof f!="number"||(u=u||[]).push(g,""+f):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Cf.hasOwnProperty(g)?(f!=null&&g==="onScroll"&&Vr("scroll",e),u||p===f||(u=[])):(u=u||[]).push(g,f))}i&&(u=u||[]).push("style",i);var g=u;(t.updateQueue=g)&&(t.flags|=4)}};TB=function(e,t,i,a){i!==a&&(t.flags|=4)};function Up(e,t){if(!Hr)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function po(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function MQ(e,t,i){var a=t.pendingProps;switch(uw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return po(t),null;case 1:return Qo(t.type)&&mv(),po(t),null;case 3:return a=t.stateNode,Ch(),Fr(Jo),Fr(vo),_w(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(og(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,bs!==null&&(TR(bs),bs=null))),gR(e,t),po(t),null;case 5:Ew(t);var c=bu(kf.current);if(i=t.type,e!==null&&t.stateNode!=null)bB(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Ke(166));return po(t),null}if(e=bu(ec.current),og(t)){a=t.stateNode,i=t.type;var u=t.memoizedProps;switch(a[Xs]=t,a[Pf]=u,e=(t.mode&1)!==0,i){case"dialog":Vr("cancel",a),Vr("close",a);break;case"iframe":case"object":case"embed":Vr("load",a);break;case"video":case"audio":for(c=0;c<Zp.length;c++)Vr(Zp[c],a);break;case"source":Vr("error",a);break;case"img":case"image":case"link":Vr("error",a),Vr("load",a);break;case"details":Vr("toggle",a);break;case"input":u2(a,u),Vr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!u.multiple},Vr("invalid",a);break;case"textarea":h2(a,u),Vr("invalid",a)}HT(i,u),c=null;for(var d in u)if(u.hasOwnProperty(d)){var p=u[d];d==="children"?typeof p=="string"?a.textContent!==p&&(u.suppressHydrationWarning!==!0&&ig(a.textContent,p,e),c=["children",p]):typeof p=="number"&&a.textContent!==""+p&&(u.suppressHydrationWarning!==!0&&ig(a.textContent,p,e),c=["children",""+p]):Cf.hasOwnProperty(d)&&p!=null&&d==="onScroll"&&Vr("scroll",a)}switch(i){case"input":X0(a),d2(a,u,!0);break;case"textarea":X0(a),p2(a);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(a.onclick=fv)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{d=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=JF(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=d.createElement(i,{is:a.is}):(e=d.createElement(i),i==="select"&&(d=e,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):e=d.createElementNS(e,i),e[Xs]=t,e[Pf]=a,CB(e,t,!1,!1),t.stateNode=e;e:{switch(d=WT(i,a),i){case"dialog":Vr("cancel",e),Vr("close",e),c=a;break;case"iframe":case"object":case"embed":Vr("load",e),c=a;break;case"video":case"audio":for(c=0;c<Zp.length;c++)Vr(Zp[c],e);c=a;break;case"source":Vr("error",e),c=a;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),c=a;break;case"details":Vr("toggle",e),c=a;break;case"input":u2(e,a),c=VT(e,a),Vr("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=qr({},a,{value:void 0}),Vr("invalid",e);break;case"textarea":h2(e,a),c=jT(e,a),Vr("invalid",e);break;default:c=a}HT(i,c),p=c;for(u in p)if(p.hasOwnProperty(u)){var f=p[u];u==="style"?e3(e,f):u==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&QF(e,f)):u==="children"?typeof f=="string"?(i!=="textarea"||f!=="")&&bf(e,f):typeof f=="number"&&bf(e,""+f):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Cf.hasOwnProperty(u)?f!=null&&u==="onScroll"&&Vr("scroll",e):f!=null&&qI(e,u,f,d))}switch(i){case"input":X0(e),d2(e,a,!1);break;case"textarea":X0(e),p2(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Dl(a.value));break;case"select":e.multiple=!!a.multiple,u=a.value,u!=null?ch(e,!!a.multiple,u,!1):a.defaultValue!=null&&ch(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=fv)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return po(t),null;case 6:if(e&&t.stateNode!=null)TB(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Ke(166));if(i=bu(kf.current),bu(ec.current),og(t)){if(a=t.stateNode,i=t.memoizedProps,a[Xs]=t,(u=a.nodeValue!==i)&&(e=Ta,e!==null))switch(e.tag){case 3:ig(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ig(a.nodeValue,i,(e.mode&1)!==0)}u&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[Xs]=t,t.stateNode=a}return po(t),null;case 13:if(Fr(Kr),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Hr&&Ca!==null&&t.mode&1&&!(t.flags&128))j3(),Sh(),t.flags|=98560,u=!1;else if(u=og(t),a!==null&&a.dehydrated!==null){if(e===null){if(!u)throw Error(Ke(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(Ke(317));u[Xs]=t}else Sh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;po(t),u=!1}else bs!==null&&(TR(bs),bs=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Kr.current&1?Ai===0&&(Ai=3):xw())),t.updateQueue!==null&&(t.flags|=4),po(t),null);case 4:return Ch(),gR(e,t),e===null&&Nf(t.stateNode.containerInfo),po(t),null;case 10:return fw(t.type._context),po(t),null;case 17:return Qo(t.type)&&mv(),po(t),null;case 19:if(Fr(Kr),u=t.memoizedState,u===null)return po(t),null;if(a=(t.flags&128)!==0,d=u.rendering,d===null)if(a)Up(u,!1);else{if(Ai!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=Cv(e),d!==null){for(t.flags|=128,Up(u,!1),a=d.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)u=i,e=a,u.flags&=14680066,d=u.alternate,d===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=d.childLanes,u.lanes=d.lanes,u.child=d.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=d.memoizedProps,u.memoizedState=d.memoizedState,u.updateQueue=d.updateQueue,u.type=d.type,e=d.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Pr(Kr,Kr.current&1|2),t.child}e=e.sibling}u.tail!==null&&ci()>Th&&(t.flags|=128,a=!0,Up(u,!1),t.lanes=4194304)}else{if(!a)if(e=Cv(d),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Up(u,!0),u.tail===null&&u.tailMode==="hidden"&&!d.alternate&&!Hr)return po(t),null}else 2*ci()-u.renderingStartTime>Th&&i!==1073741824&&(t.flags|=128,a=!0,Up(u,!1),t.lanes=4194304);u.isBackwards?(d.sibling=t.child,t.child=d):(i=u.last,i!==null?i.sibling=d:t.child=d,u.last=d)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=ci(),t.sibling=null,i=Kr.current,Pr(Kr,a?i&1|2:i&1),t):(po(t),null);case 22:case 23:return Nw(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?ya&1073741824&&(po(t),t.subtreeFlags&6&&(t.flags|=8192)):po(t),null;case 24:return null;case 25:return null}throw Error(Ke(156,t.tag))}function UQ(e,t){switch(uw(t),t.tag){case 1:return Qo(t.type)&&mv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ch(),Fr(Jo),Fr(vo),_w(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ew(t),null;case 13:if(Fr(Kr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ke(340));Sh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fr(Kr),null;case 4:return Ch(),null;case 10:return fw(t.type._context),null;case 22:case 23:return Nw(),null;case 24:return null;default:return null}}var cg=!1,mo=!1,VQ=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function rh(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Jr(e,t,a)}else i.current=null}function vR(e,t,i){try{i()}catch(a){Jr(e,t,a)}}var nU=!1;function FQ(e,t){if(eR=dv,e=O3(),cw(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,u=a.focusNode;a=a.focusOffset;try{i.nodeType,u.nodeType}catch{i=null;break e}var d=0,p=-1,f=-1,g=0,E=0,y=e,C=null;t:for(;;){for(var w;y!==i||c!==0&&y.nodeType!==3||(p=d+c),y!==u||a!==0&&y.nodeType!==3||(f=d+a),y.nodeType===3&&(d+=y.nodeValue.length),(w=y.firstChild)!==null;)C=y,y=w;for(;;){if(y===e)break t;if(C===i&&++g===c&&(p=d),C===u&&++E===a&&(f=d),(w=y.nextSibling)!==null)break;y=C,C=y.parentNode}y=w}i=p===-1||f===-1?null:{start:p,end:f}}else i=null}i=i||{start:0,end:0}}else i=null;for(tR={focusedElem:e,selectionRange:i},dv=!1,Ct=t;Ct!==null;)if(t=Ct,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ct=e;else for(;Ct!==null;){t=Ct;try{var R=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var O=R.memoizedProps,k=R.memoizedState,A=t.stateNode,x=A.getSnapshotBeforeUpdate(t.elementType===t.type?O:Ss(t.type,O),k);A.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var P=t.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ke(163))}}catch(M){Jr(t,t.return,M)}if(e=t.sibling,e!==null){e.return=t.return,Ct=e;break}Ct=t.return}return R=nU,nU=!1,R}function uf(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var u=c.destroy;c.destroy=void 0,u!==void 0&&vR(t,i,u)}c=c.next}while(c!==a)}}function GE(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function ER(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function RB(e){var t=e.alternate;t!==null&&(e.alternate=null,RB(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xs],delete t[Pf],delete t[iR],delete t[yQ],delete t[CQ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function IB(e){return e.tag===5||e.tag===3||e.tag===4}function rU(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||IB(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _R(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=fv));else if(a!==4&&(e=e.child,e!==null))for(_R(e,t,i),e=e.sibling;e!==null;)_R(e,t,i),e=e.sibling}function SR(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(SR(e,t,i),e=e.sibling;e!==null;)SR(e,t,i),e=e.sibling}var Ki=null,ys=!1;function ul(e,t,i){for(i=i.child;i!==null;)wB(e,t,i),i=i.sibling}function wB(e,t,i){if(Zs&&typeof Zs.onCommitFiberUnmount=="function")try{Zs.onCommitFiberUnmount(VE,i)}catch{}switch(i.tag){case 5:mo||rh(i,t);case 6:var a=Ki,c=ys;Ki=null,ul(e,t,i),Ki=a,ys=c,Ki!==null&&(ys?(e=Ki,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Ki.removeChild(i.stateNode));break;case 18:Ki!==null&&(ys?(e=Ki,i=i.stateNode,e.nodeType===8?Sb(e.parentNode,i):e.nodeType===1&&Sb(e,i),wf(e)):Sb(Ki,i.stateNode));break;case 4:a=Ki,c=ys,Ki=i.stateNode.containerInfo,ys=!0,ul(e,t,i),Ki=a,ys=c;break;case 0:case 11:case 14:case 15:if(!mo&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var u=c,d=u.destroy;u=u.tag,d!==void 0&&(u&2||u&4)&&vR(i,t,d),c=c.next}while(c!==a)}ul(e,t,i);break;case 1:if(!mo&&(rh(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(p){Jr(i,t,p)}ul(e,t,i);break;case 21:ul(e,t,i);break;case 22:i.mode&1?(mo=(a=mo)||i.memoizedState!==null,ul(e,t,i),mo=a):ul(e,t,i);break;default:ul(e,t,i)}}function iU(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new VQ),t.forEach(function(a){var c=YQ.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function Es(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var u=e,d=t,p=d;e:for(;p!==null;){switch(p.tag){case 5:Ki=p.stateNode,ys=!1;break e;case 3:Ki=p.stateNode.containerInfo,ys=!0;break e;case 4:Ki=p.stateNode.containerInfo,ys=!0;break e}p=p.return}if(Ki===null)throw Error(Ke(160));wB(u,d,c),Ki=null,ys=!1;var f=c.alternate;f!==null&&(f.return=null),c.return=null}catch(g){Jr(c,t,g)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)OB(t,e),t=t.sibling}function OB(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Es(t,e),Gs(e),a&4){try{uf(3,e,e.return),GE(3,e)}catch(O){Jr(e,e.return,O)}try{uf(5,e,e.return)}catch(O){Jr(e,e.return,O)}}break;case 1:Es(t,e),Gs(e),a&512&&i!==null&&rh(i,i.return);break;case 5:if(Es(t,e),Gs(e),a&512&&i!==null&&rh(i,i.return),e.flags&32){var c=e.stateNode;try{bf(c,"")}catch(O){Jr(e,e.return,O)}}if(a&4&&(c=e.stateNode,c!=null)){var u=e.memoizedProps,d=i!==null?i.memoizedProps:u,p=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{p==="input"&&u.type==="radio"&&u.name!=null&&qF(c,u),WT(p,d);var g=WT(p,u);for(d=0;d<f.length;d+=2){var E=f[d],y=f[d+1];E==="style"?e3(c,y):E==="dangerouslySetInnerHTML"?QF(c,y):E==="children"?bf(c,y):qI(c,E,y,g)}switch(p){case"input":FT(c,u);break;case"textarea":XF(c,u);break;case"select":var C=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!u.multiple;var w=u.value;w!=null?ch(c,!!u.multiple,w,!1):C!==!!u.multiple&&(u.defaultValue!=null?ch(c,!!u.multiple,u.defaultValue,!0):ch(c,!!u.multiple,u.multiple?[]:"",!1))}c[Pf]=u}catch(O){Jr(e,e.return,O)}}break;case 6:if(Es(t,e),Gs(e),a&4){if(e.stateNode===null)throw Error(Ke(162));c=e.stateNode,u=e.memoizedProps;try{c.nodeValue=u}catch(O){Jr(e,e.return,O)}}break;case 3:if(Es(t,e),Gs(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{wf(t.containerInfo)}catch(O){Jr(e,e.return,O)}break;case 4:Es(t,e),Gs(e);break;case 13:Es(t,e),Gs(e),c=e.child,c.flags&8192&&(u=c.memoizedState!==null,c.stateNode.isHidden=u,!u||c.alternate!==null&&c.alternate.memoizedState!==null||(Ow=ci())),a&4&&iU(e);break;case 22:if(E=i!==null&&i.memoizedState!==null,e.mode&1?(mo=(g=mo)||E,Es(t,e),mo=g):Es(t,e),Gs(e),a&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!E&&e.mode&1)for(Ct=e,E=e.child;E!==null;){for(y=Ct=E;Ct!==null;){switch(C=Ct,w=C.child,C.tag){case 0:case 11:case 14:case 15:uf(4,C,C.return);break;case 1:rh(C,C.return);var R=C.stateNode;if(typeof R.componentWillUnmount=="function"){a=C,i=C.return;try{t=a,R.props=t.memoizedProps,R.state=t.memoizedState,R.componentWillUnmount()}catch(O){Jr(a,i,O)}}break;case 5:rh(C,C.return);break;case 22:if(C.memoizedState!==null){aU(y);continue}}w!==null?(w.return=C,Ct=w):aU(y)}E=E.sibling}e:for(E=null,y=e;;){if(y.tag===5){if(E===null){E=y;try{c=y.stateNode,g?(u=c.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(p=y.stateNode,f=y.memoizedProps.style,d=f!=null&&f.hasOwnProperty("display")?f.display:null,p.style.display=ZF("display",d))}catch(O){Jr(e,e.return,O)}}}else if(y.tag===6){if(E===null)try{y.stateNode.nodeValue=g?"":y.memoizedProps}catch(O){Jr(e,e.return,O)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;E===y&&(E=null),y=y.return}E===y&&(E=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Es(t,e),Gs(e),a&4&&iU(e);break;case 21:break;default:Es(t,e),Gs(e)}}function Gs(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(IB(i)){var a=i;break e}i=i.return}throw Error(Ke(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(bf(c,""),a.flags&=-33);var u=rU(e);SR(e,u,c);break;case 3:case 4:var d=a.stateNode.containerInfo,p=rU(e);_R(e,p,d);break;default:throw Error(Ke(161))}}catch(f){Jr(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function BQ(e,t,i){Ct=e,AB(e)}function AB(e,t,i){for(var a=(e.mode&1)!==0;Ct!==null;){var c=Ct,u=c.child;if(c.tag===22&&a){var d=c.memoizedState!==null||cg;if(!d){var p=c.alternate,f=p!==null&&p.memoizedState!==null||mo;p=cg;var g=mo;if(cg=d,(mo=f)&&!g)for(Ct=c;Ct!==null;)d=Ct,f=d.child,d.tag===22&&d.memoizedState!==null?sU(c):f!==null?(f.return=d,Ct=f):sU(c);for(;u!==null;)Ct=u,AB(u),u=u.sibling;Ct=c,cg=p,mo=g}oU(e)}else c.subtreeFlags&8772&&u!==null?(u.return=c,Ct=u):oU(e)}}function oU(e){for(;Ct!==null;){var t=Ct;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:mo||GE(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!mo)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:Ss(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&$2(t,u,a);break;case 3:var d=t.updateQueue;if(d!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}$2(t,d,i)}break;case 5:var p=t.stateNode;if(i===null&&t.flags&4){i=p;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&i.focus();break;case"img":f.src&&(i.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var g=t.alternate;if(g!==null){var E=g.memoizedState;if(E!==null){var y=E.dehydrated;y!==null&&wf(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ke(163))}mo||t.flags&512&&ER(t)}catch(C){Jr(t,t.return,C)}}if(t===e){Ct=null;break}if(i=t.sibling,i!==null){i.return=t.return,Ct=i;break}Ct=t.return}}function aU(e){for(;Ct!==null;){var t=Ct;if(t===e){Ct=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Ct=i;break}Ct=t.return}}function sU(e){for(;Ct!==null;){var t=Ct;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{GE(4,t)}catch(f){Jr(t,i,f)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(f){Jr(t,c,f)}}var u=t.return;try{ER(t)}catch(f){Jr(t,u,f)}break;case 5:var d=t.return;try{ER(t)}catch(f){Jr(t,d,f)}}}catch(f){Jr(t,t.return,f)}if(t===e){Ct=null;break}var p=t.sibling;if(p!==null){p.return=t.return,Ct=p;break}Ct=t.return}}var jQ=Math.ceil,Rv=Mc.ReactCurrentDispatcher,Iw=Mc.ReactCurrentOwner,Ga=Mc.ReactCurrentBatchConfig,$n=0,Fi=null,Ci=null,Ji=0,ya=0,ih=Ml(0),Ai=0,Vf=null,Lu=0,KE=0,ww=0,df=null,Yo=null,Ow=0,Th=1/0,yc=null,Iv=!1,yR=null,Al=null,lg=!1,_l=null,wv=0,hf=0,CR=null,Yg=-1,qg=0;function Io(){return $n&6?ci():Yg!==-1?Yg:Yg=ci()}function Nl(e){return e.mode&1?$n&2&&Ji!==0?Ji&-Ji:TQ.transition!==null?(qg===0&&(qg=h3()),qg):(e=hr,e!==0||(e=window.event,e=e===void 0?16:_3(e.type)),e):1}function Is(e,t,i,a){if(50<hf)throw hf=0,CR=null,Error(Ke(185));Jf(e,i,a),(!($n&2)||e!==Fi)&&(e===Fi&&(!($n&2)&&(KE|=i),Ai===4&&vl(e,Ji)),Zo(e,a),i===1&&$n===0&&!(t.mode&1)&&(Th=ci()+500,HE&&Ul()))}function Zo(e,t){var i=e.callbackNode;TJ(e,t);var a=uv(e,e===Fi?Ji:0);if(a===0)i!==null&&g2(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&g2(i),t===1)e.tag===0?bQ(cU.bind(null,e)):V3(cU.bind(null,e)),_Q(function(){!($n&6)&&Ul()}),i=null;else{switch(p3(a)){case 1:i=ew;break;case 4:i=u3;break;case 16:i=lv;break;case 536870912:i=d3;break;default:i=lv}i=UB(i,NB.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function NB(e,t){if(Yg=-1,qg=0,$n&6)throw Error(Ke(327));var i=e.callbackNode;if(ph()&&e.callbackNode!==i)return null;var a=uv(e,e===Fi?Ji:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Ov(e,a);else{t=a;var c=$n;$n|=2;var u=PB();(Fi!==e||Ji!==t)&&(yc=null,Th=ci()+500,wu(e,t));do try{WQ();break}catch(p){xB(e,p)}while(1);pw(),Rv.current=u,$n=c,Ci!==null?t=0:(Fi=null,Ji=0,t=Ai)}if(t!==0){if(t===2&&(c=qT(e),c!==0&&(a=c,t=bR(e,c))),t===1)throw i=Vf,wu(e,0),vl(e,a),Zo(e,ci()),i;if(t===6)vl(e,a);else{if(c=e.current.alternate,!(a&30)&&!$Q(c)&&(t=Ov(e,a),t===2&&(u=qT(e),u!==0&&(a=u,t=bR(e,u))),t===1))throw i=Vf,wu(e,0),vl(e,a),Zo(e,ci()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(Ke(345));case 2:vu(e,Yo,yc);break;case 3:if(vl(e,a),(a&130023424)===a&&(t=Ow+500-ci(),10<t)){if(uv(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){Io(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=rR(vu.bind(null,e,Yo,yc),t);break}vu(e,Yo,yc);break;case 4:if(vl(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var d=31-Rs(a);u=1<<d,d=t[d],d>c&&(c=d),a&=~u}if(a=c,a=ci()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*jQ(a/1960))-a,10<a){e.timeoutHandle=rR(vu.bind(null,e,Yo,yc),a);break}vu(e,Yo,yc);break;case 5:vu(e,Yo,yc);break;default:throw Error(Ke(329))}}}return Zo(e,ci()),e.callbackNode===i?NB.bind(null,e):null}function bR(e,t){var i=df;return e.current.memoizedState.isDehydrated&&(wu(e,t).flags|=256),e=Ov(e,t),e!==2&&(t=Yo,Yo=i,t!==null&&TR(t)),e}function TR(e){Yo===null?Yo=e:Yo.push.apply(Yo,e)}function $Q(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],u=c.getSnapshot;c=c.value;try{if(!ws(u(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vl(e,t){for(t&=~ww,t&=~KE,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Rs(t),a=1<<i;e[i]=-1,t&=~a}}function cU(e){if($n&6)throw Error(Ke(327));ph();var t=uv(e,0);if(!(t&1))return Zo(e,ci()),null;var i=Ov(e,t);if(e.tag!==0&&i===2){var a=qT(e);a!==0&&(t=a,i=bR(e,a))}if(i===1)throw i=Vf,wu(e,0),vl(e,t),Zo(e,ci()),i;if(i===6)throw Error(Ke(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vu(e,Yo,yc),Zo(e,ci()),null}function Aw(e,t){var i=$n;$n|=1;try{return e(t)}finally{$n=i,$n===0&&(Th=ci()+500,HE&&Ul())}}function Mu(e){_l!==null&&_l.tag===0&&!($n&6)&&ph();var t=$n;$n|=1;var i=Ga.transition,a=hr;try{if(Ga.transition=null,hr=1,e)return e()}finally{hr=a,Ga.transition=i,$n=t,!($n&6)&&Ul()}}function Nw(){ya=ih.current,Fr(ih)}function wu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,EQ(i)),Ci!==null)for(i=Ci.return;i!==null;){var a=i;switch(uw(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&mv();break;case 3:Ch(),Fr(Jo),Fr(vo),_w();break;case 5:Ew(a);break;case 4:Ch();break;case 13:Fr(Kr);break;case 19:Fr(Kr);break;case 10:fw(a.type._context);break;case 22:case 23:Nw()}i=i.return}if(Fi=e,Ci=e=xl(e.current,null),Ji=ya=t,Ai=0,Vf=null,ww=KE=Lu=0,Yo=df=null,Cu!==null){for(t=0;t<Cu.length;t++)if(i=Cu[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,u=i.pending;if(u!==null){var d=u.next;u.next=c,a.next=d}i.pending=a}Cu=null}return e}function xB(e,t){do{var i=Ci;try{if(pw(),zg.current=Tv,bv){for(var a=Yr.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}bv=!1}if(ku=0,Vi=Oi=Yr=null,lf=!1,Lf=0,Iw.current=null,i===null||i.return===null){Ai=1,Vf=t,Ci=null;break}e:{var u=e,d=i.return,p=i,f=t;if(t=Ji,p.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var g=f,E=p,y=E.tag;if(!(E.mode&1)&&(y===0||y===11||y===15)){var C=E.alternate;C?(E.updateQueue=C.updateQueue,E.memoizedState=C.memoizedState,E.lanes=C.lanes):(E.updateQueue=null,E.memoizedState=null)}var w=q2(d);if(w!==null){w.flags&=-257,X2(w,d,p,u,t),w.mode&1&&Y2(u,g,t),t=w,f=g;var R=t.updateQueue;if(R===null){var O=new Set;O.add(f),t.updateQueue=O}else R.add(f);break e}else{if(!(t&1)){Y2(u,g,t),xw();break e}f=Error(Ke(426))}}else if(Hr&&p.mode&1){var k=q2(d);if(k!==null){!(k.flags&65536)&&(k.flags|=256),X2(k,d,p,u,t),dw(bh(f,p));break e}}u=f=bh(f,p),Ai!==4&&(Ai=2),df===null?df=[u]:df.push(u),u=d;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var A=fB(u,f,t);j2(u,A);break e;case 1:p=f;var x=u.type,P=u.stateNode;if(!(u.flags&128)&&(typeof x.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Al===null||!Al.has(P)))){u.flags|=65536,t&=-t,u.lanes|=t;var M=mB(u,p,t);j2(u,M);break e}}u=u.return}while(u!==null)}kB(i)}catch(B){t=B,Ci===i&&i!==null&&(Ci=i=i.return);continue}break}while(1)}function PB(){var e=Rv.current;return Rv.current=Tv,e===null?Tv:e}function xw(){(Ai===0||Ai===3||Ai===2)&&(Ai=4),Fi===null||!(Lu&268435455)&&!(KE&268435455)||vl(Fi,Ji)}function Ov(e,t){var i=$n;$n|=2;var a=PB();(Fi!==e||Ji!==t)&&(yc=null,wu(e,t));do try{HQ();break}catch(c){xB(e,c)}while(1);if(pw(),$n=i,Rv.current=a,Ci!==null)throw Error(Ke(261));return Fi=null,Ji=0,Ai}function HQ(){for(;Ci!==null;)DB(Ci)}function WQ(){for(;Ci!==null&&!mJ();)DB(Ci)}function DB(e){var t=MB(e.alternate,e,ya);e.memoizedProps=e.pendingProps,t===null?kB(e):Ci=t,Iw.current=null}function kB(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=UQ(i,t),i!==null){i.flags&=32767,Ci=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ai=6,Ci=null;return}}else if(i=MQ(i,t,ya),i!==null){Ci=i;return}if(t=t.sibling,t!==null){Ci=t;return}Ci=t=e}while(t!==null);Ai===0&&(Ai=5)}function vu(e,t,i){var a=hr,c=Ga.transition;try{Ga.transition=null,hr=1,zQ(e,t,i,a)}finally{Ga.transition=c,hr=a}return null}function zQ(e,t,i,a){do ph();while(_l!==null);if($n&6)throw Error(Ke(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(Ke(177));e.callbackNode=null,e.callbackPriority=0;var u=i.lanes|i.childLanes;if(RJ(e,u),e===Fi&&(Ci=Fi=null,Ji=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||lg||(lg=!0,UB(lv,function(){return ph(),null})),u=(i.flags&15990)!==0,i.subtreeFlags&15990||u){u=Ga.transition,Ga.transition=null;var d=hr;hr=1;var p=$n;$n|=4,Iw.current=null,FQ(e,i),OB(i,e),dQ(tR),dv=!!eR,tR=eR=null,e.current=i,BQ(i),gJ(),$n=p,hr=d,Ga.transition=u}else e.current=i;if(lg&&(lg=!1,_l=e,wv=c),u=e.pendingLanes,u===0&&(Al=null),_J(i.stateNode),Zo(e,ci()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(Iv)throw Iv=!1,e=yR,yR=null,e;return wv&1&&e.tag!==0&&ph(),u=e.pendingLanes,u&1?e===CR?hf++:(hf=0,CR=e):hf=0,Ul(),null}function ph(){if(_l!==null){var e=p3(wv),t=Ga.transition,i=hr;try{if(Ga.transition=null,hr=16>e?16:e,_l===null)var a=!1;else{if(e=_l,_l=null,wv=0,$n&6)throw Error(Ke(331));var c=$n;for($n|=4,Ct=e.current;Ct!==null;){var u=Ct,d=u.child;if(Ct.flags&16){var p=u.deletions;if(p!==null){for(var f=0;f<p.length;f++){var g=p[f];for(Ct=g;Ct!==null;){var E=Ct;switch(E.tag){case 0:case 11:case 15:uf(8,E,u)}var y=E.child;if(y!==null)y.return=E,Ct=y;else for(;Ct!==null;){E=Ct;var C=E.sibling,w=E.return;if(RB(E),E===g){Ct=null;break}if(C!==null){C.return=w,Ct=C;break}Ct=w}}}var R=u.alternate;if(R!==null){var O=R.child;if(O!==null){R.child=null;do{var k=O.sibling;O.sibling=null,O=k}while(O!==null)}}Ct=u}}if(u.subtreeFlags&2064&&d!==null)d.return=u,Ct=d;else e:for(;Ct!==null;){if(u=Ct,u.flags&2048)switch(u.tag){case 0:case 11:case 15:uf(9,u,u.return)}var A=u.sibling;if(A!==null){A.return=u.return,Ct=A;break e}Ct=u.return}}var x=e.current;for(Ct=x;Ct!==null;){d=Ct;var P=d.child;if(d.subtreeFlags&2064&&P!==null)P.return=d,Ct=P;else e:for(d=x;Ct!==null;){if(p=Ct,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:GE(9,p)}}catch(B){Jr(p,p.return,B)}if(p===d){Ct=null;break e}var M=p.sibling;if(M!==null){M.return=p.return,Ct=M;break e}Ct=p.return}}if($n=c,Ul(),Zs&&typeof Zs.onPostCommitFiberRoot=="function")try{Zs.onPostCommitFiberRoot(VE,e)}catch{}a=!0}return a}finally{hr=i,Ga.transition=t}}return!1}function lU(e,t,i){t=bh(i,t),t=fB(e,t,1),e=Ol(e,t,1),t=Io(),e!==null&&(Jf(e,1,t),Zo(e,t))}function Jr(e,t,i){if(e.tag===3)lU(e,e,i);else for(;t!==null;){if(t.tag===3){lU(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Al===null||!Al.has(a))){e=bh(i,e),e=mB(t,e,1),t=Ol(t,e,1),e=Io(),t!==null&&(Jf(t,1,e),Zo(t,e));break}}t=t.return}}function GQ(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=Io(),e.pingedLanes|=e.suspendedLanes&i,Fi===e&&(Ji&i)===i&&(Ai===4||Ai===3&&(Ji&130023424)===Ji&&500>ci()-Ow?wu(e,0):ww|=i),Zo(e,t)}function LB(e,t){t===0&&(e.mode&1?(t=Z0,Z0<<=1,!(Z0&130023424)&&(Z0=4194304)):t=1);var i=Io();e=Nc(e,t),e!==null&&(Jf(e,t,i),Zo(e,i))}function KQ(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),LB(e,i)}function YQ(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Ke(314))}a!==null&&a.delete(t),LB(e,i)}var MB;MB=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Jo.current)qo=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return qo=!1,LQ(e,t,i);qo=!!(e.flags&131072)}else qo=!1,Hr&&t.flags&1048576&&F3(t,Ev,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Kg(e,t),e=t.pendingProps;var c=_h(t,vo.current);hh(t,i),c=yw(null,t,a,e,c,i);var u=Cw();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Qo(a)?(u=!0,gv(t)):u=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,gw(t),c.updater=WE,t.stateNode=c,c._reactInternals=t,uR(t,a,e,i),t=pR(null,t,a,!0,u,i)):(t.tag=0,Hr&&u&&lw(t),Ro(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(Kg(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=XQ(a),e=Ss(a,e),c){case 0:t=hR(null,t,a,e,i);break e;case 1:t=Z2(null,t,a,e,i);break e;case 11:t=J2(null,t,a,e,i);break e;case 14:t=Q2(null,t,a,Ss(a.type,e),i);break e}throw Error(Ke(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ss(a,c),hR(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ss(a,c),Z2(e,t,a,c,i);case 3:e:{if(_B(t),e===null)throw Error(Ke(387));a=t.pendingProps,u=t.memoizedState,c=u.element,H3(e,t),yv(t,a,null,i);var d=t.memoizedState;if(a=d.element,u.isDehydrated)if(u={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){c=bh(Error(Ke(423)),t),t=eU(e,t,a,i,c);break e}else if(a!==c){c=bh(Error(Ke(424)),t),t=eU(e,t,a,i,c);break e}else for(Ca=wl(t.stateNode.containerInfo.firstChild),Ta=t,Hr=!0,bs=null,i=K3(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Sh(),a===c){t=xc(e,t,i);break e}Ro(e,t,a,i)}t=t.child}return t;case 5:return Y3(t),e===null&&sR(t),a=t.type,c=t.pendingProps,u=e!==null?e.memoizedProps:null,d=c.children,nR(a,c)?d=null:u!==null&&nR(a,u)&&(t.flags|=32),EB(e,t),Ro(e,t,d,i),t.child;case 6:return e===null&&sR(t),null;case 13:return SB(e,t,i);case 4:return vw(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=yh(t,null,a,i):Ro(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ss(a,c),J2(e,t,a,c,i);case 7:return Ro(e,t,t.pendingProps,i),t.child;case 8:return Ro(e,t,t.pendingProps.children,i),t.child;case 12:return Ro(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,u=t.memoizedProps,d=c.value,Pr(_v,a._currentValue),a._currentValue=d,u!==null)if(ws(u.value,d)){if(u.children===c.children&&!Jo.current){t=xc(e,t,i);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var p=u.dependencies;if(p!==null){d=u.child;for(var f=p.firstContext;f!==null;){if(f.context===a){if(u.tag===1){f=Ic(-1,i&-i),f.tag=2;var g=u.updateQueue;if(g!==null){g=g.shared;var E=g.pending;E===null?f.next=f:(f.next=E.next,E.next=f),g.pending=f}}u.lanes|=i,f=u.alternate,f!==null&&(f.lanes|=i),cR(u.return,i,t),p.lanes|=i;break}f=f.next}}else if(u.tag===10)d=u.type===t.type?null:u.child;else if(u.tag===18){if(d=u.return,d===null)throw Error(Ke(341));d.lanes|=i,p=d.alternate,p!==null&&(p.lanes|=i),cR(d,i,t),d=u.sibling}else d=u.child;if(d!==null)d.return=u;else for(d=u;d!==null;){if(d===t){d=null;break}if(u=d.sibling,u!==null){u.return=d.return,d=u;break}d=d.return}u=d}Ro(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,hh(t,i),c=Xa(c),a=a(c),t.flags|=1,Ro(e,t,a,i),t.child;case 14:return a=t.type,c=Ss(a,t.pendingProps),c=Ss(a.type,c),Q2(e,t,a,c,i);case 15:return gB(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ss(a,c),Kg(e,t),t.tag=1,Qo(a)?(e=!0,gv(t)):e=!1,hh(t,i),z3(t,a,c),uR(t,a,c,i),pR(null,t,a,!0,e,i);case 19:return yB(e,t,i);case 22:return vB(e,t,i)}throw Error(Ke(156,t.tag))};function UB(e,t){return l3(e,t)}function qQ(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function za(e,t,i,a){return new qQ(e,t,i,a)}function Pw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function XQ(e){if(typeof e=="function")return Pw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===JI)return 11;if(e===QI)return 14}return 2}function xl(e,t){var i=e.alternate;return i===null?(i=za(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Xg(e,t,i,a,c,u){var d=2;if(a=e,typeof e=="function")Pw(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case Yd:return Ou(i.children,c,u,t);case XI:d=8,c|=8;break;case kT:return e=za(12,i,t,c|2),e.elementType=kT,e.lanes=u,e;case LT:return e=za(13,i,t,c),e.elementType=LT,e.lanes=u,e;case MT:return e=za(19,i,t,c),e.elementType=MT,e.lanes=u,e;case GF:return YE(i,c,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case WF:d=10;break e;case zF:d=9;break e;case JI:d=11;break e;case QI:d=14;break e;case fl:d=16,a=null;break e}throw Error(Ke(130,e==null?e:typeof e,""))}return t=za(d,i,t,c),t.elementType=e,t.type=a,t.lanes=u,t}function Ou(e,t,i,a){return e=za(7,e,a,t),e.lanes=i,e}function YE(e,t,i,a){return e=za(22,e,a,t),e.elementType=GF,e.lanes=i,e.stateNode={isHidden:!1},e}function Ob(e,t,i){return e=za(6,e,null,t),e.lanes=i,e}function Ab(e,t,i){return t=za(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function JQ(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lb(0),this.expirationTimes=lb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lb(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Dw(e,t,i,a,c,u,d,p,f){return e=new JQ(e,t,i,p,f),t===1?(t=1,u===!0&&(t|=8)):t=0,u=za(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},gw(u),e}function QQ(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kd,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function VB(e){if(!e)return kl;e=e._reactInternals;e:{if(Fu(e)!==e||e.tag!==1)throw Error(Ke(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Qo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ke(171))}if(e.tag===1){var i=e.type;if(Qo(i))return U3(e,i,t)}return t}function FB(e,t,i,a,c,u,d,p,f){return e=Dw(i,a,!0,e,c,u,d,p,f),e.context=VB(null),i=e.current,a=Io(),c=Nl(i),u=Ic(a,c),u.callback=t??null,Ol(i,u,c),e.current.lanes=c,Jf(e,c,a),Zo(e,a),e}function qE(e,t,i,a){var c=t.current,u=Io(),d=Nl(c);return i=VB(i),t.context===null?t.context=i:t.pendingContext=i,t=Ic(u,d),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Ol(c,t,d),e!==null&&(Is(e,c,d,u),Wg(e,c,d)),d}function Av(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function uU(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function kw(e,t){uU(e,t),(e=e.alternate)&&uU(e,t)}function ZQ(){return null}var BB=typeof reportError=="function"?reportError:function(e){console.error(e)};function Lw(e){this._internalRoot=e}XE.prototype.render=Lw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ke(409));qE(e,t,null,null)};XE.prototype.unmount=Lw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mu(function(){qE(null,e,null,null)}),t[Ac]=null}};function XE(e){this._internalRoot=e}XE.prototype.unstable_scheduleHydration=function(e){if(e){var t=g3();e={blockedOn:null,target:e,priority:t};for(var i=0;i<gl.length&&t!==0&&t<gl[i].priority;i++);gl.splice(i,0,e),i===0&&E3(e)}};function Mw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function JE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dU(){}function eZ(e,t,i,a,c){if(c){if(typeof a=="function"){var u=a;a=function(){var g=Av(d);u.call(g)}}var d=FB(t,a,e,0,null,!1,!1,"",dU);return e._reactRootContainer=d,e[Ac]=d.current,Nf(e.nodeType===8?e.parentNode:e),Mu(),d}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var p=a;a=function(){var g=Av(f);p.call(g)}}var f=Dw(e,0,!1,null,null,!1,!1,"",dU);return e._reactRootContainer=f,e[Ac]=f.current,Nf(e.nodeType===8?e.parentNode:e),Mu(function(){qE(t,f,i,a)}),f}function QE(e,t,i,a,c){var u=i._reactRootContainer;if(u){var d=u;if(typeof c=="function"){var p=c;c=function(){var f=Av(d);p.call(f)}}qE(t,d,e,c)}else d=eZ(i,t,e,c,a);return Av(d)}f3=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Qp(t.pendingLanes);i!==0&&(tw(t,i|1),Zo(t,ci()),!($n&6)&&(Th=ci()+500,Ul()))}break;case 13:Mu(function(){var a=Nc(e,1);if(a!==null){var c=Io();Is(a,e,1,c)}}),kw(e,1)}};nw=function(e){if(e.tag===13){var t=Nc(e,134217728);if(t!==null){var i=Io();Is(t,e,134217728,i)}kw(e,134217728)}};m3=function(e){if(e.tag===13){var t=Nl(e),i=Nc(e,t);if(i!==null){var a=Io();Is(i,e,t,a)}kw(e,t)}};g3=function(){return hr};v3=function(e,t){var i=hr;try{return hr=e,t()}finally{hr=i}};GT=function(e,t,i){switch(t){case"input":if(FT(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=$E(a);if(!c)throw Error(Ke(90));YF(a),FT(a,c)}}}break;case"textarea":XF(e,i);break;case"select":t=i.value,t!=null&&ch(e,!!i.multiple,t,!1)}};r3=Aw;i3=Mu;var tZ={usingClientEntryPoint:!1,Events:[Zf,Qd,$E,t3,n3,Aw]},Vp={findFiberByHostInstance:yu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nZ={bundleType:Vp.bundleType,version:Vp.version,rendererPackageName:Vp.rendererPackageName,rendererConfig:Vp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=s3(e),e===null?null:e.stateNode},findFiberByHostInstance:Vp.findFiberByHostInstance||ZQ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ug=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ug.isDisabled&&ug.supportsFiber)try{VE=ug.inject(nZ),Zs=ug}catch{}}wa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tZ;wa.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mw(t))throw Error(Ke(200));return QQ(e,t,null,i)};wa.createRoot=function(e,t){if(!Mw(e))throw Error(Ke(299));var i=!1,a="",c=BB;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=Dw(e,1,!1,null,null,i,!1,a,c),e[Ac]=t.current,Nf(e.nodeType===8?e.parentNode:e),new Lw(t)};wa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ke(188)):(e=Object.keys(e).join(","),Error(Ke(268,e)));return e=s3(t),e=e===null?null:e.stateNode,e};wa.flushSync=function(e){return Mu(e)};wa.hydrate=function(e,t,i){if(!JE(t))throw Error(Ke(200));return QE(null,e,t,!0,i)};wa.hydrateRoot=function(e,t,i){if(!Mw(e))throw Error(Ke(405));var a=i!=null&&i.hydratedSources||null,c=!1,u="",d=BB;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),t=FB(t,null,e,1,i??null,c,!1,u,d),e[Ac]=t.current,Nf(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new XE(t)};wa.render=function(e,t,i){if(!JE(t))throw Error(Ke(200));return QE(null,e,t,!1,i)};wa.unmountComponentAtNode=function(e){if(!JE(e))throw Error(Ke(40));return e._reactRootContainer?(Mu(function(){QE(null,null,e,!1,function(){e._reactRootContainer=null,e[Ac]=null})}),!0):!1};wa.unstable_batchedUpdates=Aw;wa.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!JE(i))throw Error(Ke(200));if(e==null||e._reactInternals===void 0)throw Error(Ke(38));return QE(e,t,i,!1,a)};wa.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}t(),e.exports=wa})(ZX);const Rh=ME(wc),rZ=xF({__proto__:null,default:Rh},[wc]);var hU=wc;xT.createRoot=hU.createRoot,xT.hydrateRoot=hU.hydrateRoot;/**
 * @remix-run/router v1.6.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ff(){return Ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Ff.apply(this,arguments)}var Sl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Sl||(Sl={}));const pU="popstate";function iZ(e){e===void 0&&(e={});function t(c,u){let{pathname:d="/",search:p="",hash:f=""}=Bu(c.location.hash.substr(1));return RR("",{pathname:d,search:p,hash:f},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function i(c,u){let d=c.document.querySelector("base"),p="";if(d&&d.getAttribute("href")){let f=c.location.href,g=f.indexOf("#");p=g===-1?f:f.slice(0,g)}return p+"#"+(typeof u=="string"?u:jB(u))}function a(c,u){ZE(c.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(u)+")")}return aZ(t,i,a,e)}function Ni(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ZE(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function oZ(){return Math.random().toString(36).substr(2,8)}function fU(e,t){return{usr:e.state,key:e.key,idx:t}}function RR(e,t,i,a){return i===void 0&&(i=null),Ff({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Bu(t):t,{state:i,key:t&&t.key||a||oZ()})}function jB(e){let{pathname:t="/",search:i="",hash:a=""}=e;return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Bu(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function aZ(e,t,i,a){a===void 0&&(a={});let{window:c=document.defaultView,v5Compat:u=!1}=a,d=c.history,p=Sl.Pop,f=null,g=E();g==null&&(g=0,d.replaceState(Ff({},d.state,{idx:g}),""));function E(){return(d.state||{idx:null}).idx}function y(){p=Sl.Pop;let k=E(),A=k==null?null:k-g;g=k,f&&f({action:p,location:O.location,delta:A})}function C(k,A){p=Sl.Push;let x=RR(O.location,k,A);i&&i(x,k),g=E()+1;let P=fU(x,g),M=O.createHref(x);try{d.pushState(P,"",M)}catch{c.location.assign(M)}u&&f&&f({action:p,location:O.location,delta:1})}function w(k,A){p=Sl.Replace;let x=RR(O.location,k,A);i&&i(x,k),g=E();let P=fU(x,g),M=O.createHref(x);d.replaceState(P,"",M),u&&f&&f({action:p,location:O.location,delta:0})}function R(k){let A=c.location.origin!=="null"?c.location.origin:c.location.href,x=typeof k=="string"?k:jB(k);return Ni(A,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,A)}let O={get action(){return p},get location(){return e(c,d)},listen(k){if(f)throw new Error("A history only accepts one active listener");return c.addEventListener(pU,y),f=k,()=>{c.removeEventListener(pU,y),f=null}},createHref(k){return t(c,k)},createURL:R,encodeLocation(k){let A=R(k);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:C,replace:w,go(k){return d.go(k)}};return O}var mU;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(mU||(mU={}));function sZ(e,t,i){i===void 0&&(i="/");let a=typeof t=="string"?Bu(t):t,c=WB(a.pathname||"/",i);if(c==null)return null;let u=$B(e);cZ(u);let d=null;for(let p=0;d==null&&p<u.length;++p)d=vZ(u[p],SZ(c));return d}function $B(e,t,i,a){t===void 0&&(t=[]),i===void 0&&(i=[]),a===void 0&&(a="");let c=(u,d,p)=>{let f={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};f.relativePath.startsWith("/")&&(Ni(f.relativePath.startsWith(a),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(a.length));let g=Au([a,f.relativePath]),E=i.concat(f);u.children&&u.children.length>0&&(Ni(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),$B(u.children,t,E,g)),!(u.path==null&&!u.index)&&t.push({path:g,score:mZ(g,u.index),routesMeta:E})};return e.forEach((u,d)=>{var p;if(u.path===""||!((p=u.path)!=null&&p.includes("?")))c(u,d);else for(let f of HB(u.path))c(u,d,f)}),t}function HB(e){let t=e.split("/");if(t.length===0)return[];let[i,...a]=t,c=i.endsWith("?"),u=i.replace(/\?$/,"");if(a.length===0)return c?[u,""]:[u];let d=HB(a.join("/")),p=[];return p.push(...d.map(f=>f===""?u:[u,f].join("/"))),c&&p.push(...d),p.map(f=>e.startsWith("/")&&f===""?"/":f)}function cZ(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:gZ(t.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}const lZ=/^:\w+$/,uZ=3,dZ=2,hZ=1,pZ=10,fZ=-2,gU=e=>e==="*";function mZ(e,t){let i=e.split("/"),a=i.length;return i.some(gU)&&(a+=fZ),t&&(a+=dZ),i.filter(c=>!gU(c)).reduce((c,u)=>c+(lZ.test(u)?uZ:u===""?hZ:pZ),a)}function gZ(e,t){return e.length===t.length&&e.slice(0,-1).every((a,c)=>a===t[c])?e[e.length-1]-t[t.length-1]:0}function vZ(e,t){let{routesMeta:i}=e,a={},c="/",u=[];for(let d=0;d<i.length;++d){let p=i[d],f=d===i.length-1,g=c==="/"?t:t.slice(c.length)||"/",E=EZ({path:p.relativePath,caseSensitive:p.caseSensitive,end:f},g);if(!E)return null;Object.assign(a,E.params);let y=p.route;u.push({params:a,pathname:Au([c,E.pathname]),pathnameBase:IZ(Au([c,E.pathnameBase])),route:y}),E.pathnameBase!=="/"&&(c=Au([c,E.pathnameBase]))}return u}function EZ(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,a]=_Z(e.path,e.caseSensitive,e.end),c=t.match(i);if(!c)return null;let u=c[0],d=u.replace(/(.)\/+$/,"$1"),p=c.slice(1);return{params:a.reduce((g,E,y)=>{if(E==="*"){let C=p[y]||"";d=u.slice(0,u.length-C.length).replace(/(.)\/+$/,"$1")}return g[E]=yZ(p[y]||"",E),g},{}),pathname:u,pathnameBase:d,pattern:e}}function _Z(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!0),ZE(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(d,p)=>(a.push(p),"/([^\\/]+)"));return e.endsWith("*")?(a.push("*"),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),a]}function SZ(e){try{return decodeURI(e)}catch(t){return ZE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function yZ(e,t){try{return decodeURIComponent(e)}catch(i){return ZE(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+i+").")),e}}function WB(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,a=e.charAt(i);return a&&a!=="/"?null:e.slice(i)||"/"}function CZ(e,t){t===void 0&&(t="/");let{pathname:i,search:a="",hash:c=""}=typeof e=="string"?Bu(e):e;return{pathname:i?i.startsWith("/")?i:bZ(i,t):t,search:wZ(a),hash:OZ(c)}}function bZ(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?i.length>1&&i.pop():c!=="."&&i.push(c)}),i.length>1?i.join("/"):"/"}function Nb(e,t,i,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function TZ(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function RZ(e,t,i,a){a===void 0&&(a=!1);let c;typeof e=="string"?c=Bu(e):(c=Ff({},e),Ni(!c.pathname||!c.pathname.includes("?"),Nb("?","pathname","search",c)),Ni(!c.pathname||!c.pathname.includes("#"),Nb("#","pathname","hash",c)),Ni(!c.search||!c.search.includes("#"),Nb("#","search","hash",c)));let u=e===""||c.pathname==="",d=u?"/":c.pathname,p;if(a||d==null)p=i;else{let y=t.length-1;if(d.startsWith("..")){let C=d.split("/");for(;C[0]==="..";)C.shift(),y-=1;c.pathname=C.join("/")}p=y>=0?t[y]:"/"}let f=CZ(c,p),g=d&&d!=="/"&&d.endsWith("/"),E=(u||d===".")&&i.endsWith("/");return!f.pathname.endsWith("/")&&(g||E)&&(f.pathname+="/"),f}const Au=e=>e.join("/").replace(/\/\/+/g,"/"),IZ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wZ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,OZ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function AZ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const NZ=["post","put","patch","delete"];[...NZ];/**
 * React Router v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nv(){return Nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Nv.apply(this,arguments)}const zB=_.createContext(null),xZ=_.createContext(null),e_=_.createContext(null),t_=_.createContext(null),kh=_.createContext({outlet:null,matches:[],isDataRoute:!1}),GB=_.createContext(null);function n_(){return _.useContext(t_)!=null}function KB(){return n_()||Ni(!1),_.useContext(t_).location}function YB(e){_.useContext(e_).static||_.useLayoutEffect(e)}function PZ(){let{isDataRoute:e}=_.useContext(kh);return e?zZ():DZ()}function DZ(){n_()||Ni(!1);let{basename:e,navigator:t}=_.useContext(e_),{matches:i}=_.useContext(kh),{pathname:a}=KB(),c=JSON.stringify(TZ(i).map(p=>p.pathnameBase)),u=_.useRef(!1);return YB(()=>{u.current=!0}),_.useCallback(function(p,f){if(f===void 0&&(f={}),!u.current)return;if(typeof p=="number"){t.go(p);return}let g=RZ(p,JSON.parse(c),a,f.relative==="path");e!=="/"&&(g.pathname=g.pathname==="/"?e:Au([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,c,a])}function kZ(e,t){return LZ(e,t)}function LZ(e,t,i){n_()||Ni(!1);let{navigator:a}=_.useContext(e_),{matches:c}=_.useContext(kh),u=c[c.length-1],d=u?u.params:{};u&&u.pathname;let p=u?u.pathnameBase:"/";u&&u.route;let f=KB(),g;if(t){var E;let O=typeof t=="string"?Bu(t):t;p==="/"||(E=O.pathname)!=null&&E.startsWith(p)||Ni(!1),g=O}else g=f;let y=g.pathname||"/",C=p==="/"?y:y.slice(p.length)||"/",w=sZ(e,{pathname:C}),R=BZ(w&&w.map(O=>Object.assign({},O,{params:Object.assign({},d,O.params),pathname:Au([p,a.encodeLocation?a.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?p:Au([p,a.encodeLocation?a.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),c,i);return t&&R?_.createElement(t_.Provider,{value:{location:Nv({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Sl.Pop}},R):R}function MZ(){let e=WZ(),t=AZ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},u=null;return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),i?_.createElement("pre",{style:c},i):null,u)}const UZ=_.createElement(MZ,null);class VZ extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error?_.createElement(kh.Provider,{value:this.props.routeContext},_.createElement(GB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FZ(e){let{routeContext:t,match:i,children:a}=e,c=_.useContext(zB);return c&&c.static&&c.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=i.route.id),_.createElement(kh.Provider,{value:t},a)}function BZ(e,t,i){var a;if(t===void 0&&(t=[]),i===void 0&&(i=null),e==null){var c;if((c=i)!=null&&c.errors)e=i.matches;else return null}let u=e,d=(a=i)==null?void 0:a.errors;if(d!=null){let p=u.findIndex(f=>f.route.id&&(d==null?void 0:d[f.route.id]));p>=0||Ni(!1),u=u.slice(0,Math.min(u.length,p+1))}return u.reduceRight((p,f,g)=>{let E=f.route.id?d==null?void 0:d[f.route.id]:null,y=null;i&&(y=f.route.errorElement||UZ);let C=t.concat(u.slice(0,g+1)),w=()=>{let R;return E?R=y:f.route.Component?R=_.createElement(f.route.Component,null):f.route.element?R=f.route.element:R=p,_.createElement(FZ,{match:f,routeContext:{outlet:p,matches:C,isDataRoute:i!=null},children:R})};return i&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?_.createElement(VZ,{location:i.location,revalidation:i.revalidation,component:y,error:E,children:w(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):w()},null)}var IR;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(IR||(IR={}));var Bf;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(Bf||(Bf={}));function jZ(e){let t=_.useContext(zB);return t||Ni(!1),t}function $Z(e){let t=_.useContext(xZ);return t||Ni(!1),t}function HZ(e){let t=_.useContext(kh);return t||Ni(!1),t}function qB(e){let t=HZ(),i=t.matches[t.matches.length-1];return i.route.id||Ni(!1),i.route.id}function WZ(){var e;let t=_.useContext(GB),i=$Z(Bf.UseRouteError),a=qB(Bf.UseRouteError);return t||((e=i.errors)==null?void 0:e[a])}function zZ(){let{router:e}=jZ(IR.UseNavigateStable),t=qB(Bf.UseNavigateStable),i=_.useRef(!1);return YB(()=>{i.current=!0}),_.useCallback(function(c,u){u===void 0&&(u={}),i.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,Nv({fromRouteId:t},u)))},[e,t])}function Eu(e){Ni(!1)}function GZ(e){let{basename:t="/",children:i=null,location:a,navigationType:c=Sl.Pop,navigator:u,static:d=!1}=e;n_()&&Ni(!1);let p=t.replace(/^\/*/,"/"),f=_.useMemo(()=>({basename:p,navigator:u,static:d}),[p,u,d]);typeof a=="string"&&(a=Bu(a));let{pathname:g="/",search:E="",hash:y="",state:C=null,key:w="default"}=a,R=_.useMemo(()=>{let O=WB(g,p);return O==null?null:{location:{pathname:O,search:E,hash:y,state:C,key:w},navigationType:c}},[p,g,E,y,C,w,c]);return R==null?null:_.createElement(e_.Provider,{value:f},_.createElement(t_.Provider,{children:i,value:R}))}function KZ(e){let{children:t,location:i}=e;return kZ(wR(t),i)}var vU;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(vU||(vU={}));new Promise(()=>{});function wR(e,t){t===void 0&&(t=[]);let i=[];return _.Children.forEach(e,(a,c)=>{if(!_.isValidElement(a))return;let u=[...t,c];if(a.type===_.Fragment){i.push.apply(i,wR(a.props.children,u));return}a.type!==Eu&&Ni(!1),!a.props.index||!a.props.children||Ni(!1);let d={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=wR(a.props.children,u)),i.push(d)}),i}/**
 * React Router DOM v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function YZ(e){let{basename:t,children:i,window:a}=e,c=_.useRef();c.current==null&&(c.current=iZ({window:a,v5Compat:!0}));let u=c.current,[d,p]=_.useState({action:u.action,location:u.location});return _.useLayoutEffect(()=>u.listen(p),[u]),_.createElement(GZ,{basename:t,children:i,location:d.location,navigationType:d.action,navigator:u})}var EU;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(EU||(EU={}));var _U;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(_U||(_U={}));function xo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function An(e){return An=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},An(e)}function qZ(e,t){if(An(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t||"default");if(An(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XB(e){var t=qZ(e,"string");return An(t)==="symbol"?t:String(t)}function SU(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,XB(a.key),a)}}function Po(e,t,i){return t&&SU(e.prototype,t),i&&SU(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function OR(e,t){return OR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},OR(e,t)}function Vl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OR(e,t)}function xv(e){return xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},xv(e)}function XZ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function En(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JZ(e,t){if(t&&(An(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return En(e)}function Fl(e){var t=XZ();return function(){var a=xv(e),c;if(t){var u=xv(this).constructor;c=Reflect.construct(a,arguments,u)}else c=a.apply(this,arguments);return JZ(this,c)}}var AR={},QZ={get exports(){return AR},set exports(e){AR=e}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function i(){for(var a=[],c=0;c<arguments.length;c++){var u=arguments[c];if(u){var d=typeof u;if(d==="string"||d==="number")a.push(u);else if(Array.isArray(u)){if(u.length){var p=i.apply(null,u);p&&a.push(p)}}else if(d==="object"){if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]")){a.push(u.toString());continue}for(var f in u)t.call(u,f)&&u[f]&&a.push(f)}}}return a.join(" ")}e.exports?(i.default=i,e.exports=i):window.classNames=i})()})(QZ);const ct=AR;function He(){return He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},He.apply(this,arguments)}var jf={},ZZ={get exports(){return jf},set exports(e){jf=e}},pr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bi=typeof Symbol=="function"&&Symbol.for,Uw=Bi?Symbol.for("react.element"):60103,Vw=Bi?Symbol.for("react.portal"):60106,r_=Bi?Symbol.for("react.fragment"):60107,i_=Bi?Symbol.for("react.strict_mode"):60108,o_=Bi?Symbol.for("react.profiler"):60114,a_=Bi?Symbol.for("react.provider"):60109,s_=Bi?Symbol.for("react.context"):60110,Fw=Bi?Symbol.for("react.async_mode"):60111,c_=Bi?Symbol.for("react.concurrent_mode"):60111,l_=Bi?Symbol.for("react.forward_ref"):60112,u_=Bi?Symbol.for("react.suspense"):60113,eee=Bi?Symbol.for("react.suspense_list"):60120,d_=Bi?Symbol.for("react.memo"):60115,h_=Bi?Symbol.for("react.lazy"):60116,tee=Bi?Symbol.for("react.block"):60121,nee=Bi?Symbol.for("react.fundamental"):60117,ree=Bi?Symbol.for("react.responder"):60118,iee=Bi?Symbol.for("react.scope"):60119;function Aa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Uw:switch(e=e.type,e){case Fw:case c_:case r_:case o_:case i_:case u_:return e;default:switch(e=e&&e.$$typeof,e){case s_:case l_:case h_:case d_:case a_:return e;default:return t}}case Vw:return t}}}function JB(e){return Aa(e)===c_}pr.AsyncMode=Fw;pr.ConcurrentMode=c_;pr.ContextConsumer=s_;pr.ContextProvider=a_;pr.Element=Uw;pr.ForwardRef=l_;pr.Fragment=r_;pr.Lazy=h_;pr.Memo=d_;pr.Portal=Vw;pr.Profiler=o_;pr.StrictMode=i_;pr.Suspense=u_;pr.isAsyncMode=function(e){return JB(e)||Aa(e)===Fw};pr.isConcurrentMode=JB;pr.isContextConsumer=function(e){return Aa(e)===s_};pr.isContextProvider=function(e){return Aa(e)===a_};pr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Uw};pr.isForwardRef=function(e){return Aa(e)===l_};pr.isFragment=function(e){return Aa(e)===r_};pr.isLazy=function(e){return Aa(e)===h_};pr.isMemo=function(e){return Aa(e)===d_};pr.isPortal=function(e){return Aa(e)===Vw};pr.isProfiler=function(e){return Aa(e)===o_};pr.isStrictMode=function(e){return Aa(e)===i_};pr.isSuspense=function(e){return Aa(e)===u_};pr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===r_||e===c_||e===o_||e===i_||e===u_||e===eee||typeof e=="object"&&e!==null&&(e.$$typeof===h_||e.$$typeof===d_||e.$$typeof===a_||e.$$typeof===s_||e.$$typeof===l_||e.$$typeof===nee||e.$$typeof===ree||e.$$typeof===iee||e.$$typeof===tee)};pr.typeOf=Aa;(function(e){e.exports=pr})(ZZ);function Pc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=[];return Ot.Children.forEach(e,function(a){a==null&&!t.keepEmpty||(Array.isArray(a)?i=i.concat(Pc(a)):jf.isFragment(a)&&a.props?i=i.concat(Pc(a.props.children,t)):i.push(a))}),i}var NR={},oee=function(t){};function aee(e,t){}function see(e,t){}function cee(){NR={}}function QB(e,t,i){!t&&!NR[i]&&(e(!1,i),NR[i]=!0)}function go(e,t){QB(aee,e,t)}function lee(e,t){QB(see,e,t)}go.preMessage=oee;go.resetWarned=cee;go.noteOnce=lee;function Ie(e,t,i){return t=XB(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function yU(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function ce(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?yU(Object(i),!0).forEach(function(a){Ie(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):yU(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function tm(e,t,i){var a=_.useRef({});return(!("value"in a.current)||i(a.current.condition,t))&&(a.current.value=e(),a.current.condition=t),a.current.value}function Bw(e,t){typeof e=="function"?e(t):An(e)==="object"&&e&&"current"in e&&(e.current=t)}function rc(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=t.filter(function(c){return c});return a.length<=1?a[0]:function(c){t.forEach(function(u){Bw(u,c)})}}function p_(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return tm(function(){return rc.apply(void 0,t)},t,function(a,c){return a.length===c.length&&a.every(function(u,d){return u===c[d]})})}function Lh(e){var t,i,a=jf.isMemo(e)?e.type.type:e.type;return!(typeof a=="function"&&!((t=a.prototype)!==null&&t!==void 0&&t.render)||typeof e=="function"&&!((i=e.prototype)!==null&&i!==void 0&&i.render))}function Pv(e){return e instanceof HTMLElement||e instanceof SVGElement}function $f(e){return Pv(e)?e:e instanceof Ot.Component?Rh.findDOMNode(e):null}var ZB=function(){if(typeof Map<"u")return Map;function e(t,i){var a=-1;return t.some(function(c,u){return c[0]===i?(a=u,!0):!1}),a}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(i){var a=e(this.__entries__,i),c=this.__entries__[a];return c&&c[1]},t.prototype.set=function(i,a){var c=e(this.__entries__,i);~c?this.__entries__[c][1]=a:this.__entries__.push([i,a])},t.prototype.delete=function(i){var a=this.__entries__,c=e(a,i);~c&&a.splice(c,1)},t.prototype.has=function(i){return!!~e(this.__entries__,i)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(i,a){a===void 0&&(a=null);for(var c=0,u=this.__entries__;c<u.length;c++){var d=u[c];i.call(a,d[1],d[0])}},t}()}(),xR=typeof window<"u"&&typeof document<"u"&&window.document===document,Dv=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),uee=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Dv):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),dee=2;function hee(e,t){var i=!1,a=!1,c=0;function u(){i&&(i=!1,e()),a&&p()}function d(){uee(u)}function p(){var f=Date.now();if(i){if(f-c<dee)return;a=!0}else i=!0,a=!1,setTimeout(d,t);c=f}return p}var pee=20,fee=["top","right","bottom","left","width","height","size","weight"],mee=typeof MutationObserver<"u",gee=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=hee(this.refresh.bind(this),pee)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var i=this.observers_,a=i.indexOf(t);~a&&i.splice(a,1),!i.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(i){return i.gatherActive(),i.hasActive()});return t.forEach(function(i){return i.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!xR||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),mee?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!xR||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var i=t.propertyName,a=i===void 0?"":i,c=fee.some(function(u){return!!~a.indexOf(u)});c&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),ej=function(e,t){for(var i=0,a=Object.keys(t);i<a.length;i++){var c=a[i];Object.defineProperty(e,c,{value:t[c],enumerable:!1,writable:!1,configurable:!0})}return e},Ih=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||Dv},tj=f_(0,0,0,0);function kv(e){return parseFloat(e)||0}function CU(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return t.reduce(function(a,c){var u=e["border-"+c+"-width"];return a+kv(u)},0)}function vee(e){for(var t=["top","right","bottom","left"],i={},a=0,c=t;a<c.length;a++){var u=c[a],d=e["padding-"+u];i[u]=kv(d)}return i}function Eee(e){var t=e.getBBox();return f_(0,0,t.width,t.height)}function _ee(e){var t=e.clientWidth,i=e.clientHeight;if(!t&&!i)return tj;var a=Ih(e).getComputedStyle(e),c=vee(a),u=c.left+c.right,d=c.top+c.bottom,p=kv(a.width),f=kv(a.height);if(a.boxSizing==="border-box"&&(Math.round(p+u)!==t&&(p-=CU(a,"left","right")+u),Math.round(f+d)!==i&&(f-=CU(a,"top","bottom")+d)),!yee(e)){var g=Math.round(p+u)-t,E=Math.round(f+d)-i;Math.abs(g)!==1&&(p-=g),Math.abs(E)!==1&&(f-=E)}return f_(c.left,c.top,p,f)}var See=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Ih(e).SVGGraphicsElement}:function(e){return e instanceof Ih(e).SVGElement&&typeof e.getBBox=="function"}}();function yee(e){return e===Ih(e).document.documentElement}function Cee(e){return xR?See(e)?Eee(e):_ee(e):tj}function bee(e){var t=e.x,i=e.y,a=e.width,c=e.height,u=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,d=Object.create(u.prototype);return ej(d,{x:t,y:i,width:a,height:c,top:i,right:t+a,bottom:c+i,left:t}),d}function f_(e,t,i,a){return{x:e,y:t,width:i,height:a}}var Tee=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=f_(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=Cee(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),Ree=function(){function e(t,i){var a=bee(i);ej(this,{target:t,contentRect:a})}return e}(),Iee=function(){function e(t,i,a){if(this.activeObservations_=[],this.observations_=new ZB,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=i,this.callbackCtx_=a}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Ih(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;i.has(t)||(i.set(t,new Tee(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Ih(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;i.has(t)&&(i.delete(t),i.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(i){i.isActive()&&t.activeObservations_.push(i)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,i=this.activeObservations_.map(function(a){return new Ree(a.target,a.broadcastRect())});this.callback_.call(t,i,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),nj=typeof WeakMap<"u"?new WeakMap:new ZB,rj=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=gee.getInstance(),a=new Iee(t,i,this);nj.set(this,a)}return e}();["observe","unobserve","disconnect"].forEach(function(e){rj.prototype[e]=function(){var t;return(t=nj.get(this))[e].apply(t,arguments)}});var ij=function(){return typeof Dv.ResizeObserver<"u"?Dv.ResizeObserver:rj}(),yl=new Map;function wee(e){e.forEach(function(t){var i,a=t.target;(i=yl.get(a))===null||i===void 0||i.forEach(function(c){return c(a)})})}var oj=new ij(wee);function Oee(e,t){yl.has(e)||(yl.set(e,new Set),oj.observe(e)),yl.get(e).add(t)}function Aee(e,t){yl.has(e)&&(yl.get(e).delete(t),yl.get(e).size||(oj.unobserve(e),yl.delete(e)))}var Nee=function(e){Vl(i,e);var t=Fl(i);function i(){return xo(this,i),t.apply(this,arguments)}return Po(i,[{key:"render",value:function(){return this.props.children}}]),i}(_.Component),PR=_.createContext(null);function xee(e){var t=e.children,i=e.onBatchResize,a=_.useRef(0),c=_.useRef([]),u=_.useContext(PR),d=_.useCallback(function(p,f,g){a.current+=1;var E=a.current;c.current.push({size:p,element:f,data:g}),Promise.resolve().then(function(){E===a.current&&(i==null||i(c.current),c.current=[])}),u==null||u(p,f,g)},[i,u]);return _.createElement(PR.Provider,{value:d},t)}function Pee(e,t){var i=e.children,a=e.disabled,c=_.useRef(null),u=_.useRef(null),d=_.useContext(PR),p=typeof i=="function",f=p?i(c):i,g=_.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),E=!p&&_.isValidElement(f)&&Lh(f),y=E?f.ref:null,C=_.useMemo(function(){return rc(y,c)},[y,c]),w=function(){return $f(c.current)||$f(u.current)};_.useImperativeHandle(t,function(){return w()});var R=_.useRef(e);R.current=e;var O=_.useCallback(function(k){var A=R.current,x=A.onResize,P=A.data,M=k.getBoundingClientRect(),B=M.width,F=M.height,j=k.offsetWidth,$=k.offsetHeight,ee=Math.floor(B),H=Math.floor(F);if(g.current.width!==ee||g.current.height!==H||g.current.offsetWidth!==j||g.current.offsetHeight!==$){var J={width:ee,height:H,offsetWidth:j,offsetHeight:$};g.current=J;var X=j===Math.round(B)?B:j,W=$===Math.round(F)?F:$,Z=ce(ce({},J),{},{offsetWidth:X,offsetHeight:W});d==null||d(Z,k,P),x&&Promise.resolve().then(function(){x(Z,k)})}},[]);return _.useEffect(function(){var k=w();return k&&!a&&Oee(k,O),function(){return Aee(k,O)}},[c.current,a]),_.createElement(Nee,{ref:u},E?_.cloneElement(f,{ref:C}):f)}var Dee=_.forwardRef(Pee),kee="rc-observer-key";function Lee(e,t){var i=e.children,a=typeof i=="function"?[i]:Pc(i);return a.map(function(c,u){var d=(c==null?void 0:c.key)||"".concat(kee,"-").concat(u);return _.createElement(Dee,He({},e,{key:d,ref:u===0?t:void 0}),c)})}var Bl=_.forwardRef(Lee);Bl.Collection=xee;function Za(e,t){var i=ce({},e);return Array.isArray(t)&&t.forEach(function(a){delete i[a]}),i}function DR(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Mee(e){if(Array.isArray(e))return DR(e)}function aj(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jw(e,t){if(e){if(typeof e=="string")return DR(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return DR(e,t)}}function Uee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Et(e){return Mee(e)||aj(e)||jw(e)||Uee()}function $w(e){for(var t=0,i,a=0,c=e.length;c>=4;++a,c-=4)i=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function Vee(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,u;for(u=0;u<a.length;u++)c=a[u],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function mn(e,t){if(e==null)return{};var i=Vee(e,t),a,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)a=u[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function m_(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=new Set;function c(u,d){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,f=a.has(u);if(go(!f,"Warning: There may be circular references"),f)return!1;if(u===d)return!0;if(i&&p>1)return!1;a.add(u);var g=p+1;if(Array.isArray(u)){if(!Array.isArray(d)||u.length!==d.length)return!1;for(var E=0;E<u.length;E++)if(!c(u[E],d[E],g))return!1;return!0}if(u&&d&&An(u)==="object"&&An(d)==="object"){var y=Object.keys(u);return y.length!==Object.keys(d).length?!1:y.every(function(C){return c(u[C],d[C],g)})}return!1}return c(e,t)}var Fee=function(){function e(t){xo(this,e),Ie(this,"instanceId",void 0),Ie(this,"cache",new Map),this.instanceId=t}return Po(e,[{key:"get",value:function(i){return this.cache.get(i.join("%"))||null}},{key:"update",value:function(i,a){var c=i.join("%"),u=this.cache.get(c),d=a(u);d===null?this.cache.delete(c):this.cache.set(c,d)}}]),e}(),kR="data-token-hash",fh="data-css-hash",oh="__cssinjs_instance__";function Bee(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(fh,"]"))||[],i=document.head.firstChild;Array.from(t).forEach(function(c){c[oh]=c[oh]||e,c[oh]===e&&document.head.insertBefore(c,i)});var a={};Array.from(document.querySelectorAll("style[".concat(fh,"]"))).forEach(function(c){var u=c.getAttribute(fh);if(a[u]){if(c[oh]===e){var d;(d=c.parentNode)===null||d===void 0||d.removeChild(c)}}else a[u]=!0})}return new Fee(e)}var Hw=_.createContext({hashPriority:"low",cache:Bee(),defaultCache:!0});function wo(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function pf(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var i=t;i;){if(i===e)return!0;i=i.parentNode}return!1}var bU="data-rc-order",jee="rc-util-key",LR=new Map;function sj(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):jee}function g_(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function $ee(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function cj(e){return Array.from((LR.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function lj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!wo())return null;var i=t.csp,a=t.prepend,c=document.createElement("style");c.setAttribute(bU,$ee(a)),i!=null&&i.nonce&&(c.nonce=i==null?void 0:i.nonce),c.innerHTML=e;var u=g_(t),d=u.firstChild;if(a){if(a==="queue"){var p=cj(u).filter(function(f){return["prepend","prependQueue"].includes(f.getAttribute(bU))});if(p.length)return u.insertBefore(c,p[p.length-1].nextSibling),c}u.insertBefore(c,d)}else u.appendChild(c);return c}function uj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=g_(t);return cj(i).find(function(a){return a.getAttribute(sj(t))===e})}function Lv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=uj(e,t);if(i){var a=g_(t);a.removeChild(i)}}function Hee(e,t){var i=LR.get(e);if(!i||!pf(document,i)){var a=lj("",t),c=a.parentNode;LR.set(e,c),e.removeChild(a)}}function wh(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=g_(i);Hee(a,i);var c=uj(t,i);if(c){var u,d;if((u=i.csp)!==null&&u!==void 0&&u.nonce&&c.nonce!==((d=i.csp)===null||d===void 0?void 0:d.nonce)){var p;c.nonce=(p=i.csp)===null||p===void 0?void 0:p.nonce}return c.innerHTML!==e&&(c.innerHTML=e),c}var f=lj(e,i);return f.setAttribute(sj(i),t),f}function Mv(e){var t="";return Object.keys(e).forEach(function(i){var a=e[i];t+=i,a&&An(a)==="object"?t+=Mv(a):t+=a}),t}function Wee(e,t){return $w("".concat(t,"_").concat(Mv(e)))}var ff="layer-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),dj="903px";function zee(e,t){if(wo()){var i;wh(e,ff);var a=document.createElement("div");a.style.position="fixed",a.style.left="0",a.style.top="0",t==null||t(a),document.body.appendChild(a);var c=getComputedStyle(a).width===dj;return(i=a.parentNode)===null||i===void 0||i.removeChild(a),Lv(ff),c}return!1}var xb=void 0;function Gee(){return xb===void 0&&(xb=zee("@layer ".concat(ff," { .").concat(ff," { width: ").concat(dj,"!important; } }"),function(e){e.className=ff})),xb}function hj(e){if(Array.isArray(e))return e}function Kee(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,c,u,d,p=[],f=!0,g=!1;try{if(u=(i=i.call(e)).next,t===0){if(Object(i)!==i)return;f=!1}else for(;!(f=(a=u.call(i)).done)&&(p.push(a.value),p.length!==t);f=!0);}catch(E){g=!0,c=E}finally{try{if(!f&&i.return!=null&&(d=i.return(),Object(d)!==d))return}finally{if(g)throw c}}return p}}function pj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function we(e,t){return hj(e)||Kee(e,t)||jw(e,t)||pj()}function fj(e,t,i,a){var c=_.useContext(Hw),u=c.cache,d=[e].concat(Et(t));return _.useMemo(function(){u.update(d,function(p){var f=p||[],g=we(f,2),E=g[0],y=E===void 0?0:E,C=g[1],w=C,R=w||i();return[y+1,R]})},[d.join("_")]),_.useEffect(function(){return function(){u.update(d,function(p){var f=p||[],g=we(f,2),E=g[0],y=E===void 0?0:E,C=g[1],w=y-1;return w===0?(a==null||a(C,!1),null):[y-1,C]})}},d),u.get(d)[1]}var Yee={},qee="css",Su=new Map;function Xee(e){Su.set(e,(Su.get(e)||0)+1)}function Jee(e,t){if(typeof document<"u"){var i=document.querySelectorAll("style[".concat(kR,'="').concat(e,'"]'));i.forEach(function(a){if(a[oh]===t){var c;(c=a.parentNode)===null||c===void 0||c.removeChild(a)}})}}function Qee(e,t){Su.set(e,(Su.get(e)||0)-1);var i=Array.from(Su.keys()),a=i.filter(function(c){var u=Su.get(c)||0;return u<=0});a.length<i.length&&a.forEach(function(c){Jee(c,t),Su.delete(c)})}function Zee(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=_.useContext(Hw),c=a.cache.instanceId,u=i.salt,d=u===void 0?"":u,p=i.override,f=p===void 0?Yee:p,g=i.formatToken,E=_.useMemo(function(){return Object.assign.apply(Object,[{}].concat(Et(t)))},[t]),y=_.useMemo(function(){return Mv(E)},[E]),C=_.useMemo(function(){return Mv(f)},[f]),w=fj("token",[d,e.id,y,C],function(){var R=e.getDerivativeToken(E),O=ce(ce({},R),f);g&&(O=g(O));var k=Wee(O,d);O._tokenKey=k,Xee(k);var A="".concat(qee,"-").concat($w(k));return O._hashId=A,[O,A]},function(R){Qee(R[0]._tokenKey,c)});return w}var ete={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},fo="-ms-",Uv="-moz-",qn="-webkit-",mj="comm",Ww="rule",zw="decl",tte="@import",gj="@keyframes",nte=Math.abs,v_=String.fromCharCode,rte=Object.assign;function ite(e,t){return qi(e,0)^45?(((t<<2^qi(e,0))<<2^qi(e,1))<<2^qi(e,2))<<2^qi(e,3):0}function vj(e){return e.trim()}function ote(e,t){return(e=t.exec(e))?e[0]:e}function or(e,t,i){return e.replace(t,i)}function MR(e,t){return e.indexOf(t)}function qi(e,t){return e.charCodeAt(t)|0}function Hf(e,t,i){return e.slice(t,i)}function Ys(e){return e.length}function Gw(e){return e.length}function dg(e,t){return t.push(e),e}function ate(e,t){return e.map(t).join("")}var E_=1,Oh=1,Ej=0,ea=0,yi=0,Mh="";function __(e,t,i,a,c,u,d){return{value:e,root:t,parent:i,type:a,props:c,children:u,line:E_,column:Oh,length:d,return:""}}function Fp(e,t){return rte(__("",null,null,"",null,null,0),e,{length:-e.length},t)}function ste(){return yi}function cte(){return yi=ea>0?qi(Mh,--ea):0,Oh--,yi===10&&(Oh=1,E_--),yi}function Ra(){return yi=ea<Ej?qi(Mh,ea++):0,Oh++,yi===10&&(Oh=1,E_++),yi}function tc(){return qi(Mh,ea)}function Jg(){return ea}function nm(e,t){return Hf(Mh,e,t)}function Wf(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function _j(e){return E_=Oh=1,Ej=Ys(Mh=e),ea=0,[]}function Sj(e){return Mh="",e}function Qg(e){return vj(nm(ea-1,UR(e===91?e+2:e===40?e+1:e)))}function lte(e){for(;(yi=tc())&&yi<33;)Ra();return Wf(e)>2||Wf(yi)>3?"":" "}function ute(e,t){for(;--t&&Ra()&&!(yi<48||yi>102||yi>57&&yi<65||yi>70&&yi<97););return nm(e,Jg()+(t<6&&tc()==32&&Ra()==32))}function UR(e){for(;Ra();)switch(yi){case e:return ea;case 34:case 39:e!==34&&e!==39&&UR(yi);break;case 40:e===41&&UR(e);break;case 92:Ra();break}return ea}function dte(e,t){for(;Ra()&&e+yi!==47+10;)if(e+yi===42+42&&tc()===47)break;return"/*"+nm(t,ea-1)+"*"+v_(e===47?e:Ra())}function hte(e){for(;!Wf(tc());)Ra();return nm(e,ea)}function yj(e){return Sj(Zg("",null,null,null,[""],e=_j(e),0,[0],e))}function Zg(e,t,i,a,c,u,d,p,f){for(var g=0,E=0,y=d,C=0,w=0,R=0,O=1,k=1,A=1,x=0,P="",M=c,B=u,F=a,j=P;k;)switch(R=x,x=Ra()){case 40:if(R!=108&&qi(j,y-1)==58){MR(j+=or(Qg(x),"&","&\f"),"&\f")!=-1&&(A=-1);break}case 34:case 39:case 91:j+=Qg(x);break;case 9:case 10:case 13:case 32:j+=lte(R);break;case 92:j+=ute(Jg()-1,7);continue;case 47:switch(tc()){case 42:case 47:dg(pte(dte(Ra(),Jg()),t,i),f);break;default:j+="/"}break;case 123*O:p[g++]=Ys(j)*A;case 125*O:case 59:case 0:switch(x){case 0:case 125:k=0;case 59+E:w>0&&Ys(j)-y&&dg(w>32?RU(j+";",a,i,y-1):RU(or(j," ","")+";",a,i,y-2),f);break;case 59:j+=";";default:if(dg(F=TU(j,t,i,g,E,c,p,P,M=[],B=[],y),u),x===123)if(E===0)Zg(j,t,F,F,M,u,y,p,B);else switch(C===99&&qi(j,3)===110?100:C){case 100:case 109:case 115:Zg(e,F,F,a&&dg(TU(e,F,F,0,0,c,p,P,c,M=[],y),B),c,B,y,p,a?M:B);break;default:Zg(j,F,F,F,[""],B,0,p,B)}}g=E=w=0,O=A=1,P=j="",y=d;break;case 58:y=1+Ys(j),w=R;default:if(O<1){if(x==123)--O;else if(x==125&&O++==0&&cte()==125)continue}switch(j+=v_(x),x*O){case 38:A=E>0?1:(j+="\f",-1);break;case 44:p[g++]=(Ys(j)-1)*A,A=1;break;case 64:tc()===45&&(j+=Qg(Ra())),C=tc(),E=y=Ys(P=j+=hte(Jg())),x++;break;case 45:R===45&&Ys(j)==2&&(O=0)}}return u}function TU(e,t,i,a,c,u,d,p,f,g,E){for(var y=c-1,C=c===0?u:[""],w=Gw(C),R=0,O=0,k=0;R<a;++R)for(var A=0,x=Hf(e,y+1,y=nte(O=d[R])),P=e;A<w;++A)(P=vj(O>0?C[A]+" "+x:or(x,/&\f/g,C[A])))&&(f[k++]=P);return __(e,t,i,c===0?Ww:p,f,g,E)}function pte(e,t,i){return __(e,t,i,mj,v_(ste()),Hf(e,2,-2),0)}function RU(e,t,i,a){return __(e,t,i,zw,Hf(e,0,a),Hf(e,a+1,-1),a)}function Nu(e,t){for(var i="",a=Gw(e),c=0;c<a;c++)i+=t(e[c],c,e,t)||"";return i}function Cj(e,t,i,a){switch(e.type){case tte:case zw:return e.return=e.return||e.value;case mj:return"";case gj:return e.return=e.value+"{"+Nu(e.children,a)+"}";case Ww:e.value=e.props.join(",")}return Ys(i=Nu(e.children,a))?e.return=e.value+"{"+i+"}":""}function fte(e){var t=Gw(e);return function(i,a,c,u){for(var d="",p=0;p<t;p++)d+=e[p](i,a,c,u)||"";return d}}function mte(e){return function(t){t.root||(t=t.return)&&e(t)}}var IU=wo(),gte="_skip_check_",bj="_multi_value_";function wU(e){var t=Nu(yj(e),Cj);return t.replace(/\{%%%\:[^;];}/g,";")}function vte(e){return An(e)==="object"&&e&&(gte in e||bj in e)}function Ete(e,t,i){if(!t)return e;var a=".".concat(t),c=i==="low"?":where(".concat(a,")"):a,u=e.split(",").map(function(d){var p,f=d.trim().split(/\s+/),g=f[0]||"",E=((p=g.match(/^\w+/))===null||p===void 0?void 0:p[0])||"";return g="".concat(E).concat(c).concat(g.slice(E.length)),[g].concat(Et(f.slice(1))).join(" ")});return u.join(",")}var _te=function e(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},c=a.root,u=a.injectHash,d=a.parentSelectors,p=i.hashId,f=i.layer;i.path;var g=i.hashPriority,E=i.transformers,y=E===void 0?[]:E;i.linters;var C="",w={};function R(P){var M=P.getName(p);if(!w[M]){var B=e(P.style,i,{root:!1,parentSelectors:d}),F=we(B,1),j=F[0];w[M]="@keyframes ".concat(P.getName(p)).concat(j)}}function O(P){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return P.forEach(function(B){Array.isArray(B)?O(B,M):B&&M.push(B)}),M}var k=O(Array.isArray(t)?t:[t]);if(k.forEach(function(P){var M=typeof P=="string"&&!c?{}:P;if(typeof M=="string")C+="".concat(M,`
`);else if(M._keyframe)R(M);else{var B=y.reduce(function(F,j){var $;return(j==null||($=j.visit)===null||$===void 0?void 0:$.call(j,F))||F},M);Object.keys(B).forEach(function(F){var j=B[F];if(An(j)==="object"&&j&&(F!=="animationName"||!j._keyframe)&&!vte(j)){var $=!1,ee=F.trim(),H=!1;(c||u)&&p?ee.startsWith("@")?$=!0:ee=Ete(F,p,g):c&&!p&&(ee==="&"||ee==="")&&(ee="",H=!0);var J=e(j,i,{root:H,injectHash:$,parentSelectors:[].concat(Et(d),[ee])}),X=we(J,2),W=X[0],Z=X[1];w=ce(ce({},w),Z),C+="".concat(ee).concat(W)}else{let oe=function(fe,ge){var ae=fe.replace(/[A-Z]/g,function(he){return"-".concat(he.toLowerCase())}),se=ge;!ete[fe]&&typeof se=="number"&&se!==0&&(se="".concat(se,"px")),fe==="animationName"&&ge!==null&&ge!==void 0&&ge._keyframe&&(R(ge),se=ge.getName(p)),C+="".concat(ae,":").concat(se,";")};var de=oe,ne,ie=(ne=j==null?void 0:j.value)!==null&&ne!==void 0?ne:j;An(j)==="object"&&j!==null&&j!==void 0&&j[bj]&&Array.isArray(ie)?ie.forEach(function(fe){oe(F,fe)}):oe(F,ie)}})}}),!c)C="{".concat(C,"}");else if(f&&Gee()){var A=f.split(","),x=A[A.length-1].trim();C="@layer ".concat(x," {").concat(C,"}"),A.length>1&&(C="@layer ".concat(f,"{%%%:%}").concat(C))}return[C,w]};function Ste(e,t){return $w("".concat(e.join("%")).concat(t))}function yte(){return null}function VR(e,t){var i=e.token,a=e.path,c=e.hashId,u=e.layer,d=e.nonce,p=_.useContext(Hw),f=p.autoClear;p.mock;var g=p.defaultCache,E=p.hashPriority,y=p.container,C=p.ssrInline,w=p.transformers,R=p.linters,O=p.cache,k=i._tokenKey,A=[k].concat(Et(a)),x=IU,P=fj("style",A,function(){var $=t(),ee=_te($,{hashId:c,hashPriority:E,layer:u,path:a.join("-"),transformers:w,linters:R}),H=we(ee,2),J=H[0],X=H[1],W=wU(J),Z=Ste(A,W);if(x){var ne={mark:fh,prepend:"queue",attachTo:y},ie=typeof d=="function"?d():d;ie&&(ne.csp={nonce:ie});var de=wh(W,Z,ne);de[oh]=O.instanceId,de.setAttribute(kR,k),Object.keys(X).forEach(function(oe){wh(wU(X[oe]),"_effect-".concat(oe),ne)})}return[W,k,Z]},function($,ee){var H=we($,3),J=H[2];(ee||f)&&IU&&Lv(J,{mark:fh})}),M=we(P,3),B=M[0],F=M[1],j=M[2];return function($){var ee;if(!C||x||!g)ee=_.createElement(yte,null);else{var H;ee=_.createElement("style",He({},(H={},Ie(H,kR,F),Ie(H,fh,j),H),{dangerouslySetInnerHTML:{__html:B}}))}return _.createElement(_.Fragment,null,ee,$)}}var Sr=function(){function e(t,i){xo(this,e),Ie(this,"name",void 0),Ie(this,"style",void 0),Ie(this,"_keyframe",!0),this.name=t,this.style=i}return Po(e,[{key:"getName",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return i?"".concat(i,"-").concat(this.name):this.name}}]),e}();function Cte(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var Kw=function(){function e(){xo(this,e),Ie(this,"cache",void 0),Ie(this,"keys",void 0),Ie(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Po(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(i){var a,c,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,d={map:this.cache};return i.forEach(function(p){if(!d)d=void 0;else{var f,g;d=(f=d)===null||f===void 0||(g=f.map)===null||g===void 0?void 0:g.get(p)}}),(a=d)!==null&&a!==void 0&&a.value&&u&&(d.value[1]=this.cacheCallTimes++),(c=d)===null||c===void 0?void 0:c.value}},{key:"get",value:function(i){var a;return(a=this.internalGet(i,!0))===null||a===void 0?void 0:a[0]}},{key:"has",value:function(i){return!!this.internalGet(i)}},{key:"set",value:function(i,a){var c=this;if(!this.has(i)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var u=this.keys.reduce(function(g,E){var y=we(g,2),C=y[1];return c.internalGet(E)[1]<C?[E,c.internalGet(E)[1]]:g},[this.keys[0],this.cacheCallTimes]),d=we(u,1),p=d[0];this.delete(p)}this.keys.push(i)}var f=this.cache;i.forEach(function(g,E){if(E===i.length-1)f.set(g,{value:[a,c.cacheCallTimes++]});else{var y=f.get(g);y?y.map||(y.map=new Map):f.set(g,{map:new Map}),f=f.get(g).map}})}},{key:"deleteByPath",value:function(i,a){var c=i.get(a[0]);if(a.length===1){var u;return c.map?i.set(a[0],{map:c.map}):i.delete(a[0]),(u=c.value)===null||u===void 0?void 0:u[0]}var d=this.deleteByPath(c.map,a.slice(1));return(!c.map||c.map.size===0)&&!c.value&&i.delete(a[0]),d}},{key:"delete",value:function(i){if(this.has(i))return this.keys=this.keys.filter(function(a){return!Cte(a,i)}),this.deleteByPath(this.cache,i)}}]),e}();Ie(Kw,"MAX_CACHE_SIZE",20);Ie(Kw,"MAX_CACHE_OFFSET",5);var OU=0,bte=function(){function e(t){xo(this,e),Ie(this,"derivatives",void 0),Ie(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=OU,t.length===0&&(t.length>0,void 0),OU+=1}return Po(e,[{key:"getDerivativeToken",value:function(i){return this.derivatives.reduce(function(a,c){return c(i,a)},void 0)}}]),e}(),Pb=new Kw;function Tj(e){var t=Array.isArray(e)?e:[e];return Pb.has(t)||Pb.set(t,new bte(t)),Pb.get(t)}function Dd(e){return e.notSplit=!0,e}Dd(["borderTop","borderBottom"]),Dd(["borderTop"]),Dd(["borderBottom"]),Dd(["borderLeft","borderRight"]),Dd(["borderLeft"]),Dd(["borderRight"]);var Tte=_.createContext({});const Yw=Tte;var Tu="RC_FORM_INTERNAL_HOOKS",Er=function(){go(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Ah=_.createContext({getFieldValue:Er,getFieldsValue:Er,getFieldError:Er,getFieldWarning:Er,getFieldsError:Er,isFieldsTouched:Er,isFieldTouched:Er,isFieldValidating:Er,isFieldsValidating:Er,resetFields:Er,setFields:Er,setFieldValue:Er,setFieldsValue:Er,validateFields:Er,submit:Er,getInternalHooks:function(){return Er(),{dispatch:Er,initEntityValue:Er,registerField:Er,useSubscribe:Er,setInitialValues:Er,destroyForm:Er,setCallbacks:Er,registerWatch:Er,getFields:Er,setValidateMessages:Er,setPreserve:Er,getInitialValue:Er}}}),FR=_.createContext(null);function BR(e){return e==null?[]:Array.isArray(e)?e:[e]}function Rte(e){return e&&!!e._init}function Oo(){Oo=function(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,a=Object.defineProperty||function(X,W,Z){X[W]=Z.value},c=typeof Symbol=="function"?Symbol:{},u=c.iterator||"@@iterator",d=c.asyncIterator||"@@asyncIterator",p=c.toStringTag||"@@toStringTag";function f(X,W,Z){return Object.defineProperty(X,W,{value:Z,enumerable:!0,configurable:!0,writable:!0}),X[W]}try{f({},"")}catch{f=function(Z,ne,ie){return Z[ne]=ie}}function g(X,W,Z,ne){var ie=W&&W.prototype instanceof C?W:C,de=Object.create(ie.prototype),oe=new ee(ne||[]);return a(de,"_invoke",{value:B(X,Z,oe)}),de}function E(X,W,Z){try{return{type:"normal",arg:X.call(W,Z)}}catch(ne){return{type:"throw",arg:ne}}}e.wrap=g;var y={};function C(){}function w(){}function R(){}var O={};f(O,u,function(){return this});var k=Object.getPrototypeOf,A=k&&k(k(H([])));A&&A!==t&&i.call(A,u)&&(O=A);var x=R.prototype=C.prototype=Object.create(O);function P(X){["next","throw","return"].forEach(function(W){f(X,W,function(Z){return this._invoke(W,Z)})})}function M(X,W){function Z(ie,de,oe,fe){var ge=E(X[ie],X,de);if(ge.type!=="throw"){var ae=ge.arg,se=ae.value;return se&&An(se)=="object"&&i.call(se,"__await")?W.resolve(se.__await).then(function(he){Z("next",he,oe,fe)},function(he){Z("throw",he,oe,fe)}):W.resolve(se).then(function(he){ae.value=he,oe(ae)},function(he){return Z("throw",he,oe,fe)})}fe(ge.arg)}var ne;a(this,"_invoke",{value:function(de,oe){function fe(){return new W(function(ge,ae){Z(de,oe,ge,ae)})}return ne=ne?ne.then(fe,fe):fe()}})}function B(X,W,Z){var ne="suspendedStart";return function(ie,de){if(ne==="executing")throw new Error("Generator is already running");if(ne==="completed"){if(ie==="throw")throw de;return J()}for(Z.method=ie,Z.arg=de;;){var oe=Z.delegate;if(oe){var fe=F(oe,Z);if(fe){if(fe===y)continue;return fe}}if(Z.method==="next")Z.sent=Z._sent=Z.arg;else if(Z.method==="throw"){if(ne==="suspendedStart")throw ne="completed",Z.arg;Z.dispatchException(Z.arg)}else Z.method==="return"&&Z.abrupt("return",Z.arg);ne="executing";var ge=E(X,W,Z);if(ge.type==="normal"){if(ne=Z.done?"completed":"suspendedYield",ge.arg===y)continue;return{value:ge.arg,done:Z.done}}ge.type==="throw"&&(ne="completed",Z.method="throw",Z.arg=ge.arg)}}}function F(X,W){var Z=W.method,ne=X.iterator[Z];if(ne===void 0)return W.delegate=null,Z==="throw"&&X.iterator.return&&(W.method="return",W.arg=void 0,F(X,W),W.method==="throw")||Z!=="return"&&(W.method="throw",W.arg=new TypeError("The iterator does not provide a '"+Z+"' method")),y;var ie=E(ne,X.iterator,W.arg);if(ie.type==="throw")return W.method="throw",W.arg=ie.arg,W.delegate=null,y;var de=ie.arg;return de?de.done?(W[X.resultName]=de.value,W.next=X.nextLoc,W.method!=="return"&&(W.method="next",W.arg=void 0),W.delegate=null,y):de:(W.method="throw",W.arg=new TypeError("iterator result is not an object"),W.delegate=null,y)}function j(X){var W={tryLoc:X[0]};1 in X&&(W.catchLoc=X[1]),2 in X&&(W.finallyLoc=X[2],W.afterLoc=X[3]),this.tryEntries.push(W)}function $(X){var W=X.completion||{};W.type="normal",delete W.arg,X.completion=W}function ee(X){this.tryEntries=[{tryLoc:"root"}],X.forEach(j,this),this.reset(!0)}function H(X){if(X){var W=X[u];if(W)return W.call(X);if(typeof X.next=="function")return X;if(!isNaN(X.length)){var Z=-1,ne=function ie(){for(;++Z<X.length;)if(i.call(X,Z))return ie.value=X[Z],ie.done=!1,ie;return ie.value=void 0,ie.done=!0,ie};return ne.next=ne}}return{next:J}}function J(){return{value:void 0,done:!0}}return w.prototype=R,a(x,"constructor",{value:R,configurable:!0}),a(R,"constructor",{value:w,configurable:!0}),w.displayName=f(R,p,"GeneratorFunction"),e.isGeneratorFunction=function(X){var W=typeof X=="function"&&X.constructor;return!!W&&(W===w||(W.displayName||W.name)==="GeneratorFunction")},e.mark=function(X){return Object.setPrototypeOf?Object.setPrototypeOf(X,R):(X.__proto__=R,f(X,p,"GeneratorFunction")),X.prototype=Object.create(x),X},e.awrap=function(X){return{__await:X}},P(M.prototype),f(M.prototype,d,function(){return this}),e.AsyncIterator=M,e.async=function(X,W,Z,ne,ie){ie===void 0&&(ie=Promise);var de=new M(g(X,W,Z,ne),ie);return e.isGeneratorFunction(W)?de:de.next().then(function(oe){return oe.done?oe.value:de.next()})},P(x),f(x,p,"Generator"),f(x,u,function(){return this}),f(x,"toString",function(){return"[object Generator]"}),e.keys=function(X){var W=Object(X),Z=[];for(var ne in W)Z.push(ne);return Z.reverse(),function ie(){for(;Z.length;){var de=Z.pop();if(de in W)return ie.value=de,ie.done=!1,ie}return ie.done=!0,ie}},e.values=H,ee.prototype={constructor:ee,reset:function(W){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach($),!W)for(var Z in this)Z.charAt(0)==="t"&&i.call(this,Z)&&!isNaN(+Z.slice(1))&&(this[Z]=void 0)},stop:function(){this.done=!0;var W=this.tryEntries[0].completion;if(W.type==="throw")throw W.arg;return this.rval},dispatchException:function(W){if(this.done)throw W;var Z=this;function ne(ae,se){return oe.type="throw",oe.arg=W,Z.next=ae,se&&(Z.method="next",Z.arg=void 0),!!se}for(var ie=this.tryEntries.length-1;ie>=0;--ie){var de=this.tryEntries[ie],oe=de.completion;if(de.tryLoc==="root")return ne("end");if(de.tryLoc<=this.prev){var fe=i.call(de,"catchLoc"),ge=i.call(de,"finallyLoc");if(fe&&ge){if(this.prev<de.catchLoc)return ne(de.catchLoc,!0);if(this.prev<de.finallyLoc)return ne(de.finallyLoc)}else if(fe){if(this.prev<de.catchLoc)return ne(de.catchLoc,!0)}else{if(!ge)throw new Error("try statement without catch or finally");if(this.prev<de.finallyLoc)return ne(de.finallyLoc)}}}},abrupt:function(W,Z){for(var ne=this.tryEntries.length-1;ne>=0;--ne){var ie=this.tryEntries[ne];if(ie.tryLoc<=this.prev&&i.call(ie,"finallyLoc")&&this.prev<ie.finallyLoc){var de=ie;break}}de&&(W==="break"||W==="continue")&&de.tryLoc<=Z&&Z<=de.finallyLoc&&(de=null);var oe=de?de.completion:{};return oe.type=W,oe.arg=Z,de?(this.method="next",this.next=de.finallyLoc,y):this.complete(oe)},complete:function(W,Z){if(W.type==="throw")throw W.arg;return W.type==="break"||W.type==="continue"?this.next=W.arg:W.type==="return"?(this.rval=this.arg=W.arg,this.method="return",this.next="end"):W.type==="normal"&&Z&&(this.next=Z),y},finish:function(W){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var ne=this.tryEntries[Z];if(ne.finallyLoc===W)return this.complete(ne.completion,ne.afterLoc),$(ne),y}},catch:function(W){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var ne=this.tryEntries[Z];if(ne.tryLoc===W){var ie=ne.completion;if(ie.type==="throw"){var de=ie.arg;$(ne)}return de}}throw new Error("illegal catch attempt")},delegateYield:function(W,Z,ne){return this.delegate={iterator:H(W),resultName:Z,nextLoc:ne},this.method==="next"&&(this.arg=void 0),y}},e}function AU(e,t,i,a,c,u,d){try{var p=e[u](d),f=p.value}catch(g){i(g);return}p.done?t(f):Promise.resolve(f).then(a,c)}function ju(e){return function(){var t=this,i=arguments;return new Promise(function(a,c){var u=e.apply(t,i);function d(f){AU(u,a,c,d,p,"next",f)}function p(f){AU(u,a,c,d,p,"throw",f)}d(void 0)})}}function Ru(){return Ru=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Ru.apply(this,arguments)}function Ite(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,zf(e,t)}function jR(e){return jR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},jR(e)}function zf(e,t){return zf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},zf(e,t)}function wte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ev(e,t,i){return wte()?ev=Reflect.construct.bind():ev=function(c,u,d){var p=[null];p.push.apply(p,u);var f=Function.bind.apply(c,p),g=new f;return d&&zf(g,d.prototype),g},ev.apply(null,arguments)}function Ote(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function $R(e){var t=typeof Map=="function"?new Map:void 0;return $R=function(a){if(a===null||!Ote(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(a))return t.get(a);t.set(a,c)}function c(){return ev(a,arguments,jR(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),zf(c,a)},$R(e)}var Ate=/%[sdj%]/g,Nte=function(){};typeof process<"u"&&process.env;function HR(e){if(!e||!e.length)return null;var t={};return e.forEach(function(i){var a=i.field;t[a]=t[a]||[],t[a].push(i)}),t}function ba(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var c=0,u=i.length;if(typeof e=="function")return e.apply(null,i);if(typeof e=="string"){var d=e.replace(Ate,function(p){if(p==="%%")return"%";if(c>=u)return p;switch(p){case"%s":return String(i[c++]);case"%d":return Number(i[c++]);case"%j":try{return JSON.stringify(i[c++])}catch{return"[Circular]"}break;default:return p}});return d}return e}function xte(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function xi(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||xte(t)&&typeof e=="string"&&!e)}function Pte(e,t,i){var a=[],c=0,u=e.length;function d(p){a.push.apply(a,p||[]),c++,c===u&&i(a)}e.forEach(function(p){t(p,d)})}function NU(e,t,i){var a=0,c=e.length;function u(d){if(d&&d.length){i(d);return}var p=a;a=a+1,p<c?t(e[p],u):i([])}u([])}function Dte(e){var t=[];return Object.keys(e).forEach(function(i){t.push.apply(t,e[i]||[])}),t}var xU=function(e){Ite(t,e);function t(i,a){var c;return c=e.call(this,"Async Validation Error")||this,c.errors=i,c.fields=a,c}return t}($R(Error));function kte(e,t,i,a,c){if(t.first){var u=new Promise(function(C,w){var R=function(A){return a(A),A.length?w(new xU(A,HR(A))):C(c)},O=Dte(e);NU(O,i,R)});return u.catch(function(C){return C}),u}var d=t.firstFields===!0?Object.keys(e):t.firstFields||[],p=Object.keys(e),f=p.length,g=0,E=[],y=new Promise(function(C,w){var R=function(k){if(E.push.apply(E,k),g++,g===f)return a(E),E.length?w(new xU(E,HR(E))):C(c)};p.length||(a(E),C(c)),p.forEach(function(O){var k=e[O];d.indexOf(O)!==-1?NU(k,i,R):Pte(k,i,R)})});return y.catch(function(C){return C}),y}function Lte(e){return!!(e&&e.message!==void 0)}function Mte(e,t){for(var i=e,a=0;a<t.length;a++){if(i==null)return i;i=i[t[a]]}return i}function PU(e,t){return function(i){var a;return e.fullFields?a=Mte(t,e.fullFields):a=t[i.field||e.fullField],Lte(i)?(i.field=i.field||e.fullField,i.fieldValue=a,i):{message:typeof i=="function"?i():i,fieldValue:a,field:i.field||e.fullField}}}function DU(e,t){if(t){for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];typeof a=="object"&&typeof e[i]=="object"?e[i]=Ru({},e[i],a):e[i]=a}}return e}var Rj=function(t,i,a,c,u,d){t.required&&(!a.hasOwnProperty(t.field)||xi(i,d||t.type))&&c.push(ba(u.messages.required,t.fullField))},Ute=function(t,i,a,c,u){(/^\s+$/.test(i)||i==="")&&c.push(ba(u.messages.whitespace,t.fullField))},hg,Vte=function(){if(hg)return hg;var e="[a-fA-F\\d:]",t=function(M){return M&&M.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},i="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",c=(`
(?:
(?:`+a+":){7}(?:"+a+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+a+":){6}(?:"+i+"|:"+a+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+a+":){5}(?::"+i+"|(?::"+a+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+a+":){4}(?:(?::"+a+"){0,1}:"+i+"|(?::"+a+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+a+":){3}(?:(?::"+a+"){0,2}:"+i+"|(?::"+a+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+a+":){2}(?:(?::"+a+"){0,3}:"+i+"|(?::"+a+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+a+":){1}(?:(?::"+a+"){0,4}:"+i+"|(?::"+a+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+a+"){0,5}:"+i+"|(?::"+a+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),u=new RegExp("(?:^"+i+"$)|(?:^"+c+"$)"),d=new RegExp("^"+i+"$"),p=new RegExp("^"+c+"$"),f=function(M){return M&&M.exact?u:new RegExp("(?:"+t(M)+i+t(M)+")|(?:"+t(M)+c+t(M)+")","g")};f.v4=function(P){return P&&P.exact?d:new RegExp(""+t(P)+i+t(P),"g")},f.v6=function(P){return P&&P.exact?p:new RegExp(""+t(P)+c+t(P),"g")};var g="(?:(?:[a-z]+:)?//)",E="(?:\\S+(?::\\S*)?@)?",y=f.v4().source,C=f.v6().source,w="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",R="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",O="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",k="(?::\\d{2,5})?",A='(?:[/?#][^\\s"]*)?',x="(?:"+g+"|www\\.)"+E+"(?:localhost|"+y+"|"+C+"|"+w+R+O+")"+k+A;return hg=new RegExp("(?:^"+x+"$)","i"),hg},kU={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},ef={integer:function(t){return ef.number(t)&&parseInt(t,10)===t},float:function(t){return ef.number(t)&&!ef.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!ef.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(kU.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(Vte())},hex:function(t){return typeof t=="string"&&!!t.match(kU.hex)}},Fte=function(t,i,a,c,u){if(t.required&&i===void 0){Rj(t,i,a,c,u);return}var d=["integer","float","array","regexp","object","method","email","number","date","url","hex"],p=t.type;d.indexOf(p)>-1?ef[p](i)||c.push(ba(u.messages.types[p],t.fullField,t.type)):p&&typeof i!==t.type&&c.push(ba(u.messages.types[p],t.fullField,t.type))},Bte=function(t,i,a,c,u){var d=typeof t.len=="number",p=typeof t.min=="number",f=typeof t.max=="number",g=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,E=i,y=null,C=typeof i=="number",w=typeof i=="string",R=Array.isArray(i);if(C?y="number":w?y="string":R&&(y="array"),!y)return!1;R&&(E=i.length),w&&(E=i.replace(g,"_").length),d?E!==t.len&&c.push(ba(u.messages[y].len,t.fullField,t.len)):p&&!f&&E<t.min?c.push(ba(u.messages[y].min,t.fullField,t.min)):f&&!p&&E>t.max?c.push(ba(u.messages[y].max,t.fullField,t.max)):p&&f&&(E<t.min||E>t.max)&&c.push(ba(u.messages[y].range,t.fullField,t.min,t.max))},kd="enum",jte=function(t,i,a,c,u){t[kd]=Array.isArray(t[kd])?t[kd]:[],t[kd].indexOf(i)===-1&&c.push(ba(u.messages[kd],t.fullField,t[kd].join(", ")))},$te=function(t,i,a,c,u){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(i)||c.push(ba(u.messages.pattern.mismatch,t.fullField,i,t.pattern));else if(typeof t.pattern=="string"){var d=new RegExp(t.pattern);d.test(i)||c.push(ba(u.messages.pattern.mismatch,t.fullField,i,t.pattern))}}},Pn={required:Rj,whitespace:Ute,type:Fte,range:Bte,enum:jte,pattern:$te},Hte=function(t,i,a,c,u){var d=[],p=t.required||!t.required&&c.hasOwnProperty(t.field);if(p){if(xi(i,"string")&&!t.required)return a();Pn.required(t,i,c,d,u,"string"),xi(i,"string")||(Pn.type(t,i,c,d,u),Pn.range(t,i,c,d,u),Pn.pattern(t,i,c,d,u),t.whitespace===!0&&Pn.whitespace(t,i,c,d,u))}a(d)},Wte=function(t,i,a,c,u){var d=[],p=t.required||!t.required&&c.hasOwnProperty(t.field);if(p){if(xi(i)&&!t.required)return a();Pn.required(t,i,c,d,u),i!==void 0&&Pn.type(t,i,c,d,u)}a(d)},zte=function(t,i,a,c,u){var d=[],p=t.required||!t.required&&c.hasOwnProperty(t.field);if(p){if(i===""&&(i=void 0),xi(i)&&!t.required)return a();Pn.required(t,i,c,d,u),i!==void 0&&(Pn.type(t,i,c,d,u),Pn.range(t,i,c,d,u))}a(d)},Gte=function(t,i,a,c,u){var d=[],p=t.required||!t.required&&c.hasOwnProperty(t.field);if(p){if(xi(i)&&!t.required)return a();Pn.required(t,i,c,d,u),i!==void 0&&Pn.type(t,i,c,d,u)}a(d)},Kte=function(t,i,a,c,u){var d=[],p=t.required||!t.required&&c.hasOwnProperty(t.field);if(p){if(xi(i)&&!t.required)return a();Pn.required(t,i,c,d,u),xi(i)||Pn.type(t,i,c,d,u)}a(d)},Yte=function(t,i,a,c,u){var d=[],p=t.required||!t.required&&c.hasOwnProperty(t.field);if(p){if(xi(i)&&!t.required)return a();Pn.required(t,i,c,d,u),i!==void 0&&(Pn.type(t,i,c,d,u),Pn.range(t,i,c,d,u))}a(d)},qte=function(t,i,a,c,u){var d=[],p=t.required||!t.required&&c.hasOwnProperty(t.field);if(p){if(xi(i)&&!t.required)return a();Pn.required(t,i,c,d,u),i!==void 0&&(Pn.type(t,i,c,d,u),Pn.range(t,i,c,d,u))}a(d)},Xte=function(t,i,a,c,u){var d=[],p=t.required||!t.required&&c.hasOwnProperty(t.field);if(p){if(i==null&&!t.required)return a();Pn.required(t,i,c,d,u,"array"),i!=null&&(Pn.type(t,i,c,d,u),Pn.range(t,i,c,d,u))}a(d)},Jte=function(t,i,a,c,u){var d=[],p=t.required||!t.required&&c.hasOwnProperty(t.field);if(p){if(xi(i)&&!t.required)return a();Pn.required(t,i,c,d,u),i!==void 0&&Pn.type(t,i,c,d,u)}a(d)},Qte="enum",Zte=function(t,i,a,c,u){var d=[],p=t.required||!t.required&&c.hasOwnProperty(t.field);if(p){if(xi(i)&&!t.required)return a();Pn.required(t,i,c,d,u),i!==void 0&&Pn[Qte](t,i,c,d,u)}a(d)},ene=function(t,i,a,c,u){var d=[],p=t.required||!t.required&&c.hasOwnProperty(t.field);if(p){if(xi(i,"string")&&!t.required)return a();Pn.required(t,i,c,d,u),xi(i,"string")||Pn.pattern(t,i,c,d,u)}a(d)},tne=function(t,i,a,c,u){var d=[],p=t.required||!t.required&&c.hasOwnProperty(t.field);if(p){if(xi(i,"date")&&!t.required)return a();if(Pn.required(t,i,c,d,u),!xi(i,"date")){var f;i instanceof Date?f=i:f=new Date(i),Pn.type(t,f,c,d,u),f&&Pn.range(t,f.getTime(),c,d,u)}}a(d)},nne=function(t,i,a,c,u){var d=[],p=Array.isArray(i)?"array":typeof i;Pn.required(t,i,c,d,u,p),a(d)},Db=function(t,i,a,c,u){var d=t.type,p=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(xi(i,d)&&!t.required)return a();Pn.required(t,i,c,p,u,d),xi(i,d)||Pn.type(t,i,c,p,u)}a(p)},rne=function(t,i,a,c,u){var d=[],p=t.required||!t.required&&c.hasOwnProperty(t.field);if(p){if(xi(i)&&!t.required)return a();Pn.required(t,i,c,d,u)}a(d)},mf={string:Hte,method:Wte,number:zte,boolean:Gte,regexp:Kte,integer:Yte,float:qte,array:Xte,object:Jte,enum:Zte,pattern:ene,date:tne,url:Db,hex:Db,email:Db,required:nne,any:rne};function WR(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var zR=WR(),rm=function(){function e(i){this.rules=null,this._messages=zR,this.define(i)}var t=e.prototype;return t.define=function(a){var c=this;if(!a)throw new Error("Cannot configure a schema with no rules");if(typeof a!="object"||Array.isArray(a))throw new Error("Rules must be an object");this.rules={},Object.keys(a).forEach(function(u){var d=a[u];c.rules[u]=Array.isArray(d)?d:[d]})},t.messages=function(a){return a&&(this._messages=DU(WR(),a)),this._messages},t.validate=function(a,c,u){var d=this;c===void 0&&(c={}),u===void 0&&(u=function(){});var p=a,f=c,g=u;if(typeof f=="function"&&(g=f,f={}),!this.rules||Object.keys(this.rules).length===0)return g&&g(null,p),Promise.resolve(p);function E(O){var k=[],A={};function x(M){if(Array.isArray(M)){var B;k=(B=k).concat.apply(B,M)}else k.push(M)}for(var P=0;P<O.length;P++)x(O[P]);k.length?(A=HR(k),g(k,A)):g(null,p)}if(f.messages){var y=this.messages();y===zR&&(y=WR()),DU(y,f.messages),f.messages=y}else f.messages=this.messages();var C={},w=f.keys||Object.keys(this.rules);w.forEach(function(O){var k=d.rules[O],A=p[O];k.forEach(function(x){var P=x;typeof P.transform=="function"&&(p===a&&(p=Ru({},p)),A=p[O]=P.transform(A)),typeof P=="function"?P={validator:P}:P=Ru({},P),P.validator=d.getValidationMethod(P),P.validator&&(P.field=O,P.fullField=P.fullField||O,P.type=d.getType(P),C[O]=C[O]||[],C[O].push({rule:P,value:A,source:p,field:O}))})});var R={};return kte(C,f,function(O,k){var A=O.rule,x=(A.type==="object"||A.type==="array")&&(typeof A.fields=="object"||typeof A.defaultField=="object");x=x&&(A.required||!A.required&&O.value),A.field=O.field;function P(F,j){return Ru({},j,{fullField:A.fullField+"."+F,fullFields:A.fullFields?[].concat(A.fullFields,[F]):[F]})}function M(F){F===void 0&&(F=[]);var j=Array.isArray(F)?F:[F];!f.suppressWarning&&j.length&&e.warning("async-validator:",j),j.length&&A.message!==void 0&&(j=[].concat(A.message));var $=j.map(PU(A,p));if(f.first&&$.length)return R[A.field]=1,k($);if(!x)k($);else{if(A.required&&!O.value)return A.message!==void 0?$=[].concat(A.message).map(PU(A,p)):f.error&&($=[f.error(A,ba(f.messages.required,A.field))]),k($);var ee={};A.defaultField&&Object.keys(O.value).map(function(X){ee[X]=A.defaultField}),ee=Ru({},ee,O.rule.fields);var H={};Object.keys(ee).forEach(function(X){var W=ee[X],Z=Array.isArray(W)?W:[W];H[X]=Z.map(P.bind(null,X))});var J=new e(H);J.messages(f.messages),O.rule.options&&(O.rule.options.messages=f.messages,O.rule.options.error=f.error),J.validate(O.value,O.rule.options||f,function(X){var W=[];$&&$.length&&W.push.apply(W,$),X&&X.length&&W.push.apply(W,X),k(W.length?W:null)})}}var B;if(A.asyncValidator)B=A.asyncValidator(A,O.value,M,O.source,f);else if(A.validator){try{B=A.validator(A,O.value,M,O.source,f)}catch(F){console.error==null||console.error(F),f.suppressValidatorError||setTimeout(function(){throw F},0),M(F.message)}B===!0?M():B===!1?M(typeof A.message=="function"?A.message(A.fullField||A.field):A.message||(A.fullField||A.field)+" fails"):B instanceof Array?M(B):B instanceof Error&&M(B.message)}B&&B.then&&B.then(function(){return M()},function(F){return M(F)})},function(O){E(O)},p)},t.getType=function(a){if(a.type===void 0&&a.pattern instanceof RegExp&&(a.type="pattern"),typeof a.validator!="function"&&a.type&&!mf.hasOwnProperty(a.type))throw new Error(ba("Unknown rule type %s",a.type));return a.type||"string"},t.getValidationMethod=function(a){if(typeof a.validator=="function")return a.validator;var c=Object.keys(a),u=c.indexOf("message");return u!==-1&&c.splice(u,1),c.length===1&&c[0]==="required"?mf.required:mf[this.getType(a)]||void 0},e}();rm.register=function(t,i){if(typeof i!="function")throw new Error("Cannot register a validator by type, validator is not a function");mf[t]=i};rm.warning=Nte;rm.messages=zR;rm.validators=mf;var Ea="'${name}' is not a valid ${type}",Ij={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Ea,method:Ea,array:Ea,object:Ea,number:Ea,date:Ea,boolean:Ea,integer:Ea,float:Ea,regexp:Ea,email:Ea,url:Ea,hex:Ea},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}};function Rc(e,t){for(var i=e,a=0;a<t.length;a+=1){if(i==null)return;i=i[t[a]]}return i}function wj(e){return hj(e)||aj(e)||jw(e)||pj()}function Oj(e,t,i,a){if(!t.length)return i;var c=wj(t),u=c[0],d=c.slice(1),p;return!e&&typeof u=="number"?p=[]:Array.isArray(e)?p=Et(e):p=ce({},e),a&&i===void 0&&d.length===1?delete p[u][d[0]]:p[u]=Oj(p[u],d,i,a),p}function pl(e,t,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&a&&i===void 0&&!Rc(e,t.slice(0,-1))?e:Oj(e,t,i,a)}function S_(e){return Array.isArray(e)?one(e):An(e)==="object"&&e!==null?ine(e):e}function ine(e){if(Object.getPrototypeOf(e)===Object.prototype){var t={};for(var i in e)t[i]=S_(e[i]);return t}return e}function one(e){return e.map(function(t){return S_(t)})}function si(e){return BR(e)}function LU(e,t){var i={};return t.forEach(function(a){var c=Rc(e,a);i=pl(i,a,c)}),i}function gf(e,t){return e&&e.some(function(i){return Nj(i,t)})}function MU(e){return An(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function Aj(e,t){var i=Array.isArray(e)?Et(e):ce({},e);return t&&Object.keys(t).forEach(function(a){var c=i[a],u=t[a],d=MU(c)&&MU(u);i[a]=d?Aj(c,u||{}):S_(u)}),i}function vf(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return i.reduce(function(c,u){return Aj(c,u)},e)}function Nj(e,t){return!e||!t||e.length!==t.length?!1:e.every(function(i,a){return t[a]===i})}function ane(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||An(e)!=="object"||An(t)!=="object")return!1;var i=Object.keys(e),a=Object.keys(t),c=new Set([].concat(i,a));return Et(c).every(function(u){var d=e[u],p=t[u];return typeof d=="function"&&typeof p=="function"?!0:d===p})}function sne(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&An(t.target)==="object"&&e in t.target?t.target[e]:t}function UU(e,t,i){var a=e.length;if(t<0||t>=a||i<0||i>=a)return e;var c=e[t],u=t-i;return u>0?[].concat(Et(e.slice(0,i)),[c],Et(e.slice(i,t)),Et(e.slice(t+1,a))):u<0?[].concat(Et(e.slice(0,t)),Et(e.slice(t+1,i+1)),[c],Et(e.slice(i+1,a))):e}var VU=rm;function cne(e,t){return e.replace(/\$\{\w+\}/g,function(i){var a=i.slice(2,-1);return t[a]})}var FU="CODE_LOGIC_ERROR";function GR(e,t,i,a,c){return KR.apply(this,arguments)}function KR(){return KR=ju(Oo().mark(function e(t,i,a,c,u){var d,p,f,g,E,y,C,w,R;return Oo().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return d=ce({},a),delete d.ruleIndex,VU.warning=function(){},d.validator&&(p=d.validator,d.validator=function(){try{return p.apply(void 0,arguments)}catch(A){return console.error(A),Promise.reject(FU)}}),f=null,d&&d.type==="array"&&d.defaultField&&(f=d.defaultField,delete d.defaultField),g=new VU(Ie({},t,[d])),E=vf({},Ij,c.validateMessages),g.messages(E),y=[],k.prev=10,k.next=13,Promise.resolve(g.validate(Ie({},t,i),ce({},c)));case 13:k.next=18;break;case 15:k.prev=15,k.t0=k.catch(10),k.t0.errors&&(y=k.t0.errors.map(function(A,x){var P=A.message,M=P===FU?E.default:P;return _.isValidElement(M)?_.cloneElement(M,{key:"error_".concat(x)}):M}));case 18:if(!(!y.length&&f)){k.next=23;break}return k.next=21,Promise.all(i.map(function(A,x){return GR("".concat(t,".").concat(x),A,f,c,u)}));case 21:return C=k.sent,k.abrupt("return",C.reduce(function(A,x){return[].concat(Et(A),Et(x))},[]));case 23:return w=ce(ce({},a),{},{name:t,enum:(a.enum||[]).join(", ")},u),R=y.map(function(A){return typeof A=="string"?cne(A,w):A}),k.abrupt("return",R);case 26:case"end":return k.stop()}},e,null,[[10,15]])})),KR.apply(this,arguments)}function lne(e,t,i,a,c,u){var d=e.join("."),p=i.map(function(E,y){var C=E.validator,w=ce(ce({},E),{},{ruleIndex:y});return C&&(w.validator=function(R,O,k){var A=!1,x=function(){for(var B=arguments.length,F=new Array(B),j=0;j<B;j++)F[j]=arguments[j];Promise.resolve().then(function(){go(!A,"Your validator function has already return a promise. `callback` will be ignored."),A||k.apply(void 0,F)})},P=C(R,O,x);A=P&&typeof P.then=="function"&&typeof P.catch=="function",go(A,"`callback` is deprecated. Please return a promise instead."),A&&P.then(function(){k()}).catch(function(M){k(M||" ")})}),w}).sort(function(E,y){var C=E.warningOnly,w=E.ruleIndex,R=y.warningOnly,O=y.ruleIndex;return!!C==!!R?w-O:C?1:-1}),f;if(c===!0)f=new Promise(function(){var E=ju(Oo().mark(function y(C,w){var R,O,k;return Oo().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:R=0;case 1:if(!(R<p.length)){x.next=12;break}return O=p[R],x.next=5,GR(d,t,O,a,u);case 5:if(k=x.sent,!k.length){x.next=9;break}return w([{errors:k,rule:O}]),x.abrupt("return");case 9:R+=1,x.next=1;break;case 12:C([]);case 13:case"end":return x.stop()}},y)}));return function(y,C){return E.apply(this,arguments)}}());else{var g=p.map(function(E){return GR(d,t,E,a,u).then(function(y){return{errors:y,rule:E}})});f=(c?dne(g):une(g)).then(function(E){return Promise.reject(E)})}return f.catch(function(E){return E}),f}function une(e){return YR.apply(this,arguments)}function YR(){return YR=ju(Oo().mark(function e(t){return Oo().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.all(t).then(function(c){var u,d=(u=[]).concat.apply(u,Et(c));return d}));case 1:case"end":return a.stop()}},e)})),YR.apply(this,arguments)}function dne(e){return qR.apply(this,arguments)}function qR(){return qR=ju(Oo().mark(function e(t){var i;return Oo().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i=0,c.abrupt("return",new Promise(function(u){t.forEach(function(d){d.then(function(p){p.errors.length&&u([p]),i+=1,i===t.length&&u([])})})}));case 2:case"end":return c.stop()}},e)})),qR.apply(this,arguments)}var hne=["name"],Ba=[];function BU(e,t,i,a,c,u){return typeof e=="function"?e(t,i,"source"in u?{source:u.source}:{}):a!==c}var qw=function(e){Vl(i,e);var t=Fl(i);function i(a){var c;if(xo(this,i),c=t.call(this,a),c.state={resetCount:0},c.cancelRegisterFunc=null,c.mounted=!1,c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.prevValidating=void 0,c.errors=Ba,c.warnings=Ba,c.cancelRegister=function(){var f=c.props,g=f.preserve,E=f.isListField,y=f.name;c.cancelRegisterFunc&&c.cancelRegisterFunc(E,g,si(y)),c.cancelRegisterFunc=null},c.getNamePath=function(){var f=c.props,g=f.name,E=f.fieldContext,y=E.prefixName,C=y===void 0?[]:y;return g!==void 0?[].concat(Et(C),Et(g)):[]},c.getRules=function(){var f=c.props,g=f.rules,E=g===void 0?[]:g,y=f.fieldContext;return E.map(function(C){return typeof C=="function"?C(y):C})},c.refresh=function(){c.mounted&&c.setState(function(f){var g=f.resetCount;return{resetCount:g+1}})},c.triggerMetaEvent=function(f){var g=c.props.onMetaChange;g==null||g(ce(ce({},c.getMeta()),{},{destroy:f}))},c.onStoreChange=function(f,g,E){var y=c.props,C=y.shouldUpdate,w=y.dependencies,R=w===void 0?[]:w,O=y.onReset,k=E.store,A=c.getNamePath(),x=c.getValue(f),P=c.getValue(k),M=g&&gf(g,A);switch(E.type==="valueUpdate"&&E.source==="external"&&x!==P&&(c.touched=!0,c.dirty=!0,c.validatePromise=null,c.errors=Ba,c.warnings=Ba,c.triggerMetaEvent()),E.type){case"reset":if(!g||M){c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.errors=Ba,c.warnings=Ba,c.triggerMetaEvent(),O==null||O(),c.refresh();return}break;case"remove":{if(C){c.reRender();return}break}case"setField":{if(M){var B=E.data;"touched"in B&&(c.touched=B.touched),"validating"in B&&!("originRCField"in B)&&(c.validatePromise=B.validating?Promise.resolve([]):null),"errors"in B&&(c.errors=B.errors||Ba),"warnings"in B&&(c.warnings=B.warnings||Ba),c.dirty=!0,c.triggerMetaEvent(),c.reRender();return}if(C&&!A.length&&BU(C,f,k,x,P,E)){c.reRender();return}break}case"dependenciesUpdate":{var F=R.map(si);if(F.some(function(j){return gf(E.relatedFields,j)})){c.reRender();return}break}default:if(M||(!R.length||A.length||C)&&BU(C,f,k,x,P,E)){c.reRender();return}break}C===!0&&c.reRender()},c.validateRules=function(f){var g=c.getNamePath(),E=c.getValue(),y=Promise.resolve().then(function(){if(!c.mounted)return[];var C=c.props,w=C.validateFirst,R=w===void 0?!1:w,O=C.messageVariables,k=f||{},A=k.triggerName,x=c.getRules();A&&(x=x.filter(function(M){return M}).filter(function(M){var B=M.validateTrigger;if(!B)return!0;var F=BR(B);return F.includes(A)}));var P=lne(g,E,x,f,R,O);return P.catch(function(M){return M}).then(function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ba;if(c.validatePromise===y){var B;c.validatePromise=null;var F=[],j=[];(B=M.forEach)===null||B===void 0||B.call(M,function($){var ee=$.rule.warningOnly,H=$.errors,J=H===void 0?Ba:H;ee?j.push.apply(j,Et(J)):F.push.apply(F,Et(J))}),c.errors=F,c.warnings=j,c.triggerMetaEvent(),c.reRender()}}),P});return c.validatePromise=y,c.dirty=!0,c.errors=Ba,c.warnings=Ba,c.triggerMetaEvent(),c.reRender(),y},c.isFieldValidating=function(){return!!c.validatePromise},c.isFieldTouched=function(){return c.touched},c.isFieldDirty=function(){if(c.dirty||c.props.initialValue!==void 0)return!0;var f=c.props.fieldContext,g=f.getInternalHooks(Tu),E=g.getInitialValue;return E(c.getNamePath())!==void 0},c.getErrors=function(){return c.errors},c.getWarnings=function(){return c.warnings},c.isListField=function(){return c.props.isListField},c.isList=function(){return c.props.isList},c.isPreserve=function(){return c.props.preserve},c.getMeta=function(){c.prevValidating=c.isFieldValidating();var f={touched:c.isFieldTouched(),validating:c.prevValidating,errors:c.errors,warnings:c.warnings,name:c.getNamePath(),validated:c.validatePromise===null};return f},c.getOnlyChild=function(f){if(typeof f=="function"){var g=c.getMeta();return ce(ce({},c.getOnlyChild(f(c.getControlled(),g,c.props.fieldContext))),{},{isFunction:!0})}var E=Pc(f);return E.length!==1||!_.isValidElement(E[0])?{child:E,isFunction:!1}:{child:E[0],isFunction:!1}},c.getValue=function(f){var g=c.props.fieldContext.getFieldsValue,E=c.getNamePath();return Rc(f||g(!0),E)},c.getControlled=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=c.props,E=g.trigger,y=g.validateTrigger,C=g.getValueFromEvent,w=g.normalize,R=g.valuePropName,O=g.getValueProps,k=g.fieldContext,A=y!==void 0?y:k.validateTrigger,x=c.getNamePath(),P=k.getInternalHooks,M=k.getFieldsValue,B=P(Tu),F=B.dispatch,j=c.getValue(),$=O||function(X){return Ie({},R,X)},ee=f[E],H=ce(ce({},f),$(j));H[E]=function(){c.touched=!0,c.dirty=!0,c.triggerMetaEvent();for(var X,W=arguments.length,Z=new Array(W),ne=0;ne<W;ne++)Z[ne]=arguments[ne];C?X=C.apply(void 0,Z):X=sne.apply(void 0,[R].concat(Z)),w&&(X=w(X,j,M(!0))),F({type:"updateValue",namePath:x,value:X}),ee&&ee.apply(void 0,Z)};var J=BR(A||[]);return J.forEach(function(X){var W=H[X];H[X]=function(){W&&W.apply(void 0,arguments);var Z=c.props.rules;Z&&Z.length&&F({type:"validateField",namePath:x,triggerName:X})}}),H},a.fieldContext){var u=a.fieldContext.getInternalHooks,d=u(Tu),p=d.initEntityValue;p(En(c))}return c}return Po(i,[{key:"componentDidMount",value:function(){var c=this.props,u=c.shouldUpdate,d=c.fieldContext;if(this.mounted=!0,d){var p=d.getInternalHooks,f=p(Tu),g=f.registerField;this.cancelRegisterFunc=g(this)}u===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var c=this.state.resetCount,u=this.props.children,d=this.getOnlyChild(u),p=d.child,f=d.isFunction,g;return f?g=p:_.isValidElement(p)?g=_.cloneElement(p,this.getControlled(p.props)):(go(!p,"`children` of Field is not validate ReactElement."),g=p),_.createElement(_.Fragment,{key:c},g)}}]),i}(_.Component);qw.contextType=Ah;qw.defaultProps={trigger:"onChange",valuePropName:"value"};function xj(e){var t=e.name,i=mn(e,hne),a=_.useContext(Ah),c=_.useContext(FR),u=t!==void 0?si(t):void 0,d="keep";return i.isListField||(d="_".concat((u||[]).join("_"))),_.createElement(qw,He({key:d,name:u,isListField:!!c},i,{fieldContext:a}))}var pne=function(t){var i=t.name,a=t.initialValue,c=t.children,u=t.rules,d=t.validateTrigger,p=t.isListField,f=_.useContext(Ah),g=_.useContext(FR),E=_.useRef({keys:[],id:0}),y=E.current,C=_.useMemo(function(){var k=si(f.prefixName)||[];return[].concat(Et(k),Et(si(i)))},[f.prefixName,i]),w=_.useMemo(function(){return ce(ce({},f),{},{prefixName:C})},[f,C]),R=_.useMemo(function(){return{getKey:function(A){var x=C.length,P=A[x];return[y.keys[P],A.slice(x+1)]}}},[C]);if(typeof c!="function")return go(!1,"Form.List only accepts function as children."),null;var O=function(A,x,P){var M=P.source;return M==="internal"?!1:A!==x};return _.createElement(FR.Provider,{value:R},_.createElement(Ah.Provider,{value:w},_.createElement(xj,{name:[],shouldUpdate:O,rules:u,validateTrigger:d,initialValue:a,isList:!0,isListField:p??!!g},function(k,A){var x=k.value,P=x===void 0?[]:x,M=k.onChange,B=f.getFieldValue,F=function(){var H=B(C||[]);return H||[]},j={add:function(H,J){var X=F();J>=0&&J<=X.length?(y.keys=[].concat(Et(y.keys.slice(0,J)),[y.id],Et(y.keys.slice(J))),M([].concat(Et(X.slice(0,J)),[H],Et(X.slice(J))))):(y.keys=[].concat(Et(y.keys),[y.id]),M([].concat(Et(X),[H]))),y.id+=1},remove:function(H){var J=F(),X=new Set(Array.isArray(H)?H:[H]);X.size<=0||(y.keys=y.keys.filter(function(W,Z){return!X.has(Z)}),M(J.filter(function(W,Z){return!X.has(Z)})))},move:function(H,J){if(H!==J){var X=F();H<0||H>=X.length||J<0||J>=X.length||(y.keys=UU(y.keys,H,J),M(UU(X,H,J)))}}},$=P||[];return Array.isArray($)||($=[]),c($.map(function(ee,H){var J=y.keys[H];return J===void 0&&(y.keys[H]=y.id,J=y.keys[H],y.id+=1),{name:H,key:J,isListField:!0}}),j,A)})))};function fne(e){var t=!1,i=e.length,a=[];return e.length?new Promise(function(c,u){e.forEach(function(d,p){d.catch(function(f){return t=!0,f}).then(function(f){i-=1,a[p]=f,!(i>0)&&(t&&u(a),c(a))})})}):Promise.resolve([])}var Pj="__@field_split__";function kb(e){return e.map(function(t){return"".concat(An(t),":").concat(t)}).join(Pj)}var Ld=function(){function e(){xo(this,e),this.kvs=new Map}return Po(e,[{key:"set",value:function(i,a){this.kvs.set(kb(i),a)}},{key:"get",value:function(i){return this.kvs.get(kb(i))}},{key:"update",value:function(i,a){var c=this.get(i),u=a(c);u?this.set(i,u):this.delete(i)}},{key:"delete",value:function(i){this.kvs.delete(kb(i))}},{key:"map",value:function(i){return Et(this.kvs.entries()).map(function(a){var c=we(a,2),u=c[0],d=c[1],p=u.split(Pj);return i({key:p.map(function(f){var g=f.match(/^([^:]*):(.*)$/),E=we(g,3),y=E[1],C=E[2];return y==="number"?Number(C):C}),value:d})})}},{key:"toJSON",value:function(){var i={};return this.map(function(a){var c=a.key,u=a.value;return i[c.join(".")]=u,null}),i}}]),e}(),mne=["name"],gne=Po(function e(t){var i=this;xo(this,e),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:i.getFieldValue,getFieldsValue:i.getFieldsValue,getFieldError:i.getFieldError,getFieldWarning:i.getFieldWarning,getFieldsError:i.getFieldsError,isFieldsTouched:i.isFieldsTouched,isFieldTouched:i.isFieldTouched,isFieldValidating:i.isFieldValidating,isFieldsValidating:i.isFieldsValidating,resetFields:i.resetFields,setFields:i.setFields,setFieldValue:i.setFieldValue,setFieldsValue:i.setFieldsValue,validateFields:i.validateFields,submit:i.submit,_init:!0,getInternalHooks:i.getInternalHooks}},this.getInternalHooks=function(a){return a===Tu?(i.formHooked=!0,{dispatch:i.dispatch,initEntityValue:i.initEntityValue,registerField:i.registerField,useSubscribe:i.useSubscribe,setInitialValues:i.setInitialValues,destroyForm:i.destroyForm,setCallbacks:i.setCallbacks,setValidateMessages:i.setValidateMessages,getFields:i.getFields,setPreserve:i.setPreserve,getInitialValue:i.getInitialValue,registerWatch:i.registerWatch}):(go(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(a){i.subscribable=a},this.prevWithoutPreserves=null,this.setInitialValues=function(a,c){if(i.initialValues=a||{},c){var u,d=vf({},a,i.store);(u=i.prevWithoutPreserves)===null||u===void 0||u.map(function(p){var f=p.key;d=pl(d,f,Rc(a,f))}),i.prevWithoutPreserves=null,i.updateStore(d)}},this.destroyForm=function(){var a=new Ld;i.getFieldEntities(!0).forEach(function(c){i.isMergedPreserve(c.isPreserve())||a.set(c.getNamePath(),!0)}),i.prevWithoutPreserves=a},this.getInitialValue=function(a){var c=Rc(i.initialValues,a);return a.length?S_(c):c},this.setCallbacks=function(a){i.callbacks=a},this.setValidateMessages=function(a){i.validateMessages=a},this.setPreserve=function(a){i.preserve=a},this.watchList=[],this.registerWatch=function(a){return i.watchList.push(a),function(){i.watchList=i.watchList.filter(function(c){return c!==a})}},this.notifyWatch=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(i.watchList.length){var c=i.getFieldsValue(),u=i.getFieldsValue(!0);i.watchList.forEach(function(d){d(c,u,a)})}},this.timeoutId=null,this.warningUnhooked=function(){},this.updateStore=function(a){i.store=a},this.getFieldEntities=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return a?i.fieldEntities.filter(function(c){return c.getNamePath().length}):i.fieldEntities},this.getFieldsMap=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,c=new Ld;return i.getFieldEntities(a).forEach(function(u){var d=u.getNamePath();c.set(d,u)}),c},this.getFieldEntitiesForNamePathList=function(a){if(!a)return i.getFieldEntities(!0);var c=i.getFieldsMap(!0);return a.map(function(u){var d=si(u);return c.get(d)||{INVALIDATE_NAME_PATH:si(u)}})},this.getFieldsValue=function(a,c){if(i.warningUnhooked(),a===!0&&!c)return i.store;var u=i.getFieldEntitiesForNamePathList(Array.isArray(a)?a:null),d=[];return u.forEach(function(p){var f,g="INVALIDATE_NAME_PATH"in p?p.INVALIDATE_NAME_PATH:p.getNamePath();if(!(!a&&(!((f=p.isListField)===null||f===void 0)&&f.call(p))))if(!c)d.push(g);else{var E="getMeta"in p?p.getMeta():null;c(E)&&d.push(g)}}),LU(i.store,d.map(si))},this.getFieldValue=function(a){i.warningUnhooked();var c=si(a);return Rc(i.store,c)},this.getFieldsError=function(a){i.warningUnhooked();var c=i.getFieldEntitiesForNamePathList(a);return c.map(function(u,d){return u&&!("INVALIDATE_NAME_PATH"in u)?{name:u.getNamePath(),errors:u.getErrors(),warnings:u.getWarnings()}:{name:si(a[d]),errors:[],warnings:[]}})},this.getFieldError=function(a){i.warningUnhooked();var c=si(a),u=i.getFieldsError([c])[0];return u.errors},this.getFieldWarning=function(a){i.warningUnhooked();var c=si(a),u=i.getFieldsError([c])[0];return u.warnings},this.isFieldsTouched=function(){i.warningUnhooked();for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];var d=c[0],p=c[1],f,g=!1;c.length===0?f=null:c.length===1?Array.isArray(d)?(f=d.map(si),g=!1):(f=null,g=d):(f=d.map(si),g=p);var E=i.getFieldEntities(!0),y=function(k){return k.isFieldTouched()};if(!f)return g?E.every(y):E.some(y);var C=new Ld;f.forEach(function(O){C.set(O,[])}),E.forEach(function(O){var k=O.getNamePath();f.forEach(function(A){A.every(function(x,P){return k[P]===x})&&C.update(A,function(x){return[].concat(Et(x),[O])})})});var w=function(k){return k.some(y)},R=C.map(function(O){var k=O.value;return k});return g?R.every(w):R.some(w)},this.isFieldTouched=function(a){return i.warningUnhooked(),i.isFieldsTouched([a])},this.isFieldsValidating=function(a){i.warningUnhooked();var c=i.getFieldEntities();if(!a)return c.some(function(d){return d.isFieldValidating()});var u=a.map(si);return c.some(function(d){var p=d.getNamePath();return gf(u,p)&&d.isFieldValidating()})},this.isFieldValidating=function(a){return i.warningUnhooked(),i.isFieldsValidating([a])},this.resetWithFieldInitialValue=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=new Ld,u=i.getFieldEntities(!0);u.forEach(function(f){var g=f.props.initialValue,E=f.getNamePath();if(g!==void 0){var y=c.get(E)||new Set;y.add({entity:f,value:g}),c.set(E,y)}});var d=function(g){g.forEach(function(E){var y=E.props.initialValue;if(y!==void 0){var C=E.getNamePath(),w=i.getInitialValue(C);if(w!==void 0)go(!1,"Form already set 'initialValues' with path '".concat(C.join("."),"'. Field can not overwrite it."));else{var R=c.get(C);if(R&&R.size>1)go(!1,"Multiple Field with path '".concat(C.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(R){var O=i.getFieldValue(C);(!a.skipExist||O===void 0)&&i.updateStore(pl(i.store,C,Et(R)[0].value))}}}})},p;a.entities?p=a.entities:a.namePathList?(p=[],a.namePathList.forEach(function(f){var g=c.get(f);if(g){var E;(E=p).push.apply(E,Et(Et(g).map(function(y){return y.entity})))}})):p=u,d(p)},this.resetFields=function(a){i.warningUnhooked();var c=i.store;if(!a){i.updateStore(vf({},i.initialValues)),i.resetWithFieldInitialValue(),i.notifyObservers(c,null,{type:"reset"}),i.notifyWatch();return}var u=a.map(si);u.forEach(function(d){var p=i.getInitialValue(d);i.updateStore(pl(i.store,d,p))}),i.resetWithFieldInitialValue({namePathList:u}),i.notifyObservers(c,u,{type:"reset"}),i.notifyWatch(u)},this.setFields=function(a){i.warningUnhooked();var c=i.store,u=[];a.forEach(function(d){var p=d.name,f=mn(d,mne),g=si(p);u.push(g),"value"in f&&i.updateStore(pl(i.store,g,f.value)),i.notifyObservers(c,[g],{type:"setField",data:d})}),i.notifyWatch(u)},this.getFields=function(){var a=i.getFieldEntities(!0),c=a.map(function(u){var d=u.getNamePath(),p=u.getMeta(),f=ce(ce({},p),{},{name:d,value:i.getFieldValue(d)});return Object.defineProperty(f,"originRCField",{value:!0}),f});return c},this.initEntityValue=function(a){var c=a.props.initialValue;if(c!==void 0){var u=a.getNamePath(),d=Rc(i.store,u);d===void 0&&i.updateStore(pl(i.store,u,c))}},this.isMergedPreserve=function(a){var c=a!==void 0?a:i.preserve;return c??!0},this.registerField=function(a){i.fieldEntities.push(a);var c=a.getNamePath();if(i.notifyWatch([c]),a.props.initialValue!==void 0){var u=i.store;i.resetWithFieldInitialValue({entities:[a],skipExist:!0}),i.notifyObservers(u,[a.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(d,p){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(i.fieldEntities=i.fieldEntities.filter(function(y){return y!==a}),!i.isMergedPreserve(p)&&(!d||f.length>1)){var g=d?void 0:i.getInitialValue(c);if(c.length&&i.getFieldValue(c)!==g&&i.fieldEntities.every(function(y){return!Nj(y.getNamePath(),c)})){var E=i.store;i.updateStore(pl(E,c,g,!0)),i.notifyObservers(E,[c],{type:"remove"}),i.triggerDependenciesUpdate(E,c)}}i.notifyWatch([c])}},this.dispatch=function(a){switch(a.type){case"updateValue":{var c=a.namePath,u=a.value;i.updateValue(c,u);break}case"validateField":{var d=a.namePath,p=a.triggerName;i.validateFields([d],{triggerName:p});break}}},this.notifyObservers=function(a,c,u){if(i.subscribable){var d=ce(ce({},u),{},{store:i.getFieldsValue(!0)});i.getFieldEntities().forEach(function(p){var f=p.onStoreChange;f(a,c,d)})}else i.forceRootUpdate()},this.triggerDependenciesUpdate=function(a,c){var u=i.getDependencyChildrenFields(c);return u.length&&i.validateFields(u),i.notifyObservers(a,u,{type:"dependenciesUpdate",relatedFields:[c].concat(Et(u))}),u},this.updateValue=function(a,c){var u=si(a),d=i.store;i.updateStore(pl(i.store,u,c)),i.notifyObservers(d,[u],{type:"valueUpdate",source:"internal"}),i.notifyWatch([u]);var p=i.triggerDependenciesUpdate(d,u),f=i.callbacks.onValuesChange;if(f){var g=LU(i.store,[u]);f(g,i.getFieldsValue())}i.triggerOnFieldsChange([u].concat(Et(p)))},this.setFieldsValue=function(a){i.warningUnhooked();var c=i.store;if(a){var u=vf(i.store,a);i.updateStore(u)}i.notifyObservers(c,null,{type:"valueUpdate",source:"external"}),i.notifyWatch()},this.setFieldValue=function(a,c){i.setFields([{name:a,value:c}])},this.getDependencyChildrenFields=function(a){var c=new Set,u=[],d=new Ld;i.getFieldEntities().forEach(function(f){var g=f.props.dependencies;(g||[]).forEach(function(E){var y=si(E);d.update(y,function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return C.add(f),C})})});var p=function f(g){var E=d.get(g)||new Set;E.forEach(function(y){if(!c.has(y)){c.add(y);var C=y.getNamePath();y.isFieldDirty()&&C.length&&(u.push(C),f(C))}})};return p(a),u},this.triggerOnFieldsChange=function(a,c){var u=i.callbacks.onFieldsChange;if(u){var d=i.getFields();if(c){var p=new Ld;c.forEach(function(g){var E=g.name,y=g.errors;p.set(E,y)}),d.forEach(function(g){g.errors=p.get(g.name)||g.errors})}var f=d.filter(function(g){var E=g.name;return gf(a,E)});u(f,d)}},this.validateFields=function(a,c){i.warningUnhooked();var u=!!a,d=u?a.map(si):[],p=[];i.getFieldEntities(!0).forEach(function(E){if(u||d.push(E.getNamePath()),c!=null&&c.recursive&&u){var y=E.getNamePath();y.every(function(R,O){return a[O]===R||a[O]===void 0})&&d.push(y)}if(!(!E.props.rules||!E.props.rules.length)){var C=E.getNamePath();if(!u||gf(d,C)){var w=E.validateRules(ce({validateMessages:ce(ce({},Ij),i.validateMessages)},c));p.push(w.then(function(){return{name:C,errors:[],warnings:[]}}).catch(function(R){var O,k=[],A=[];return(O=R.forEach)===null||O===void 0||O.call(R,function(x){var P=x.rule.warningOnly,M=x.errors;P?A.push.apply(A,Et(M)):k.push.apply(k,Et(M))}),k.length?Promise.reject({name:C,errors:k,warnings:A}):{name:C,errors:k,warnings:A}}))}}});var f=fne(p);i.lastValidatePromise=f,f.catch(function(E){return E}).then(function(E){var y=E.map(function(C){var w=C.name;return w});i.notifyObservers(i.store,y,{type:"validateFinish"}),i.triggerOnFieldsChange(y,E)});var g=f.then(function(){return i.lastValidatePromise===f?Promise.resolve(i.getFieldsValue(d)):Promise.reject([])}).catch(function(E){var y=E.filter(function(C){return C&&C.errors.length});return Promise.reject({values:i.getFieldsValue(d),errorFields:y,outOfDate:i.lastValidatePromise!==f})});return g.catch(function(E){return E}),i.triggerOnFieldsChange(d),g},this.submit=function(){i.warningUnhooked(),i.validateFields().then(function(a){var c=i.callbacks.onFinish;if(c)try{c(a)}catch(u){console.error(u)}}).catch(function(a){var c=i.callbacks.onFinishFailed;c&&c(a)})},this.forceRootUpdate=t});function Dj(e){var t=_.useRef(),i=_.useState({}),a=we(i,2),c=a[1];if(!t.current)if(e)t.current=e;else{var u=function(){c({})},d=new gne(u);t.current=d.getForm()}return[t.current]}var XR=_.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),kj=function(t){var i=t.validateMessages,a=t.onFormChange,c=t.onFormFinish,u=t.children,d=_.useContext(XR),p=_.useRef({});return _.createElement(XR.Provider,{value:ce(ce({},d),{},{validateMessages:ce(ce({},d.validateMessages),i),triggerFormChange:function(g,E){a&&a(g,{changedFields:E,forms:p.current}),d.triggerFormChange(g,E)},triggerFormFinish:function(g,E){c&&c(g,{values:E,forms:p.current}),d.triggerFormFinish(g,E)},registerForm:function(g,E){g&&(p.current=ce(ce({},p.current),{},Ie({},g,E))),d.registerForm(g,E)},unregisterForm:function(g){var E=ce({},p.current);delete E[g],p.current=E,d.unregisterForm(g)}})},u)},vne=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],Ene=function(t,i){var a=t.name,c=t.initialValues,u=t.fields,d=t.form,p=t.preserve,f=t.children,g=t.component,E=g===void 0?"form":g,y=t.validateMessages,C=t.validateTrigger,w=C===void 0?"onChange":C,R=t.onValuesChange,O=t.onFieldsChange,k=t.onFinish,A=t.onFinishFailed,x=mn(t,vne),P=_.useContext(XR),M=Dj(d),B=we(M,1),F=B[0],j=F.getInternalHooks(Tu),$=j.useSubscribe,ee=j.setInitialValues,H=j.setCallbacks,J=j.setValidateMessages,X=j.setPreserve,W=j.destroyForm;_.useImperativeHandle(i,function(){return F}),_.useEffect(function(){return P.registerForm(a,F),function(){P.unregisterForm(a)}},[P,F,a]),J(ce(ce({},P.validateMessages),y)),H({onValuesChange:R,onFieldsChange:function(se){if(P.triggerFormChange(a,se),O){for(var he=arguments.length,pe=new Array(he>1?he-1:0),Oe=1;Oe<he;Oe++)pe[Oe-1]=arguments[Oe];O.apply(void 0,[se].concat(pe))}},onFinish:function(se){P.triggerFormFinish(a,se),k&&k(se)},onFinishFailed:A}),X(p);var Z=_.useRef(null);ee(c,!Z.current),Z.current||(Z.current=!0),_.useEffect(function(){return W},[]);var ne,ie=typeof f=="function";if(ie){var de=F.getFieldsValue(!0);ne=f(de,F)}else ne=f;$(!ie);var oe=_.useRef();_.useEffect(function(){ane(oe.current||[],u||[])||F.setFields(u||[]),oe.current=u},[u,F]);var fe=_.useMemo(function(){return ce(ce({},F),{},{validateTrigger:w})},[F,w]),ge=_.createElement(Ah.Provider,{value:fe},ne);return E===!1?ge:_.createElement(E,He({},x,{onSubmit:function(se){se.preventDefault(),se.stopPropagation(),F.submit()},onReset:function(se){var he;se.preventDefault(),F.resetFields(),(he=x.onReset)===null||he===void 0||he.call(x,se)}}),ge)};function jU(e){try{return JSON.stringify(e)}catch{return Math.random()}}function _ne(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=t[0],c=a===void 0?[]:a,u=t[1],d=u===void 0?{}:u,p=Rte(d)?{form:d}:d,f=p.form,g=_.useState(),E=we(g,2),y=E[0],C=E[1],w=_.useMemo(function(){return jU(y)},[y]),R=_.useRef(w);R.current=w;var O=_.useContext(Ah),k=f||O,A=k&&k._init,x=si(c),P=_.useRef(x);return P.current=x,_.useEffect(function(){if(A){var M=k.getFieldsValue,B=k.getInternalHooks,F=B(Tu),j=F.registerWatch,$=j(function(H,J){var X=Rc(p.preserve?J:H,P.current),W=jU(X);R.current!==W&&(R.current=W,C(X))}),ee=Rc(p.preserve?M(!0):M(),P.current);return C(ee),$}},[A]),y}var Sne=_.forwardRef(Ene),im=Sne;im.FormProvider=kj;im.Field=xj;im.List=pne;im.useForm=Dj;im.useWatch=_ne;const yne={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};var Cne={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const bne={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},Lj=bne,Tne={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},Cne),timePickerLocale:Object.assign({},Lj)},$U=Tne,_a="${label} is not a valid ${type}",Rne={locale:"en",Pagination:yne,DatePicker:$U,TimePicker:Lj,Calendar:$U,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:_a,method:_a,array:_a,object:_a,number:_a,date:_a,boolean:_a,integer:_a,float:_a,regexp:_a,email:_a,url:_a,hex:_a},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"}},Gf=Rne;let Lb=Object.assign({},Gf.Modal);function HU(e){e?Lb=Object.assign(Object.assign({},Lb),e):Lb=Object.assign({},Gf.Modal)}const Ine=_.createContext(void 0),Xw=Ine,wne=(e,t)=>{const i=_.useContext(Xw),a=_.useMemo(()=>{var u;const d=t||Gf[e],p=(u=i==null?void 0:i[e])!==null&&u!==void 0?u:{};return Object.assign(Object.assign({},typeof d=="function"?d():d),p||{})},[e,t,i]),c=_.useMemo(()=>{const u=i==null?void 0:i.locale;return i!=null&&i.exist&&!u?Gf.locale:u},[i]);return[a,c]},Mj=wne,One="internalMark",Ane=e=>{const{locale:t={},children:i,_ANT_MARK__:a}=e;_.useEffect(()=>(HU(t&&t.Modal),()=>{HU()}),[t]);const c=_.useMemo(()=>Object.assign(Object.assign({},t),{exist:!0}),[t]);return _.createElement(Xw.Provider,{value:c},i)},Nne=Ane,xne="5.4.7",Vv=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];function Qi(e,t){Pne(e)&&(e="100%");var i=Dne(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),i&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function pg(e){return Math.min(1,Math.max(0,e))}function Pne(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function Dne(e){return typeof e=="string"&&e.indexOf("%")!==-1}function Uj(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function fg(e){return e<=1?"".concat(Number(e)*100,"%"):e}function Iu(e){return e.length===1?"0"+e:String(e)}function kne(e,t,i){return{r:Qi(e,255)*255,g:Qi(t,255)*255,b:Qi(i,255)*255}}function WU(e,t,i){e=Qi(e,255),t=Qi(t,255),i=Qi(i,255);var a=Math.max(e,t,i),c=Math.min(e,t,i),u=0,d=0,p=(a+c)/2;if(a===c)d=0,u=0;else{var f=a-c;switch(d=p>.5?f/(2-a-c):f/(a+c),a){case e:u=(t-i)/f+(t<i?6:0);break;case t:u=(i-e)/f+2;break;case i:u=(e-t)/f+4;break}u/=6}return{h:u,s:d,l:p}}function Mb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*(6*i):i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function Lne(e,t,i){var a,c,u;if(e=Qi(e,360),t=Qi(t,100),i=Qi(i,100),t===0)c=i,u=i,a=i;else{var d=i<.5?i*(1+t):i+t-i*t,p=2*i-d;a=Mb(p,d,e+1/3),c=Mb(p,d,e),u=Mb(p,d,e-1/3)}return{r:a*255,g:c*255,b:u*255}}function JR(e,t,i){e=Qi(e,255),t=Qi(t,255),i=Qi(i,255);var a=Math.max(e,t,i),c=Math.min(e,t,i),u=0,d=a,p=a-c,f=a===0?0:p/a;if(a===c)u=0;else{switch(a){case e:u=(t-i)/p+(t<i?6:0);break;case t:u=(i-e)/p+2;break;case i:u=(e-t)/p+4;break}u/=6}return{h:u,s:f,v:d}}function Mne(e,t,i){e=Qi(e,360)*6,t=Qi(t,100),i=Qi(i,100);var a=Math.floor(e),c=e-a,u=i*(1-t),d=i*(1-c*t),p=i*(1-(1-c)*t),f=a%6,g=[i,d,u,u,p,i][f],E=[p,i,i,d,u,u][f],y=[u,u,p,i,i,d][f];return{r:g*255,g:E*255,b:y*255}}function QR(e,t,i,a){var c=[Iu(Math.round(e).toString(16)),Iu(Math.round(t).toString(16)),Iu(Math.round(i).toString(16))];return a&&c[0].startsWith(c[0].charAt(1))&&c[1].startsWith(c[1].charAt(1))&&c[2].startsWith(c[2].charAt(1))?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0):c.join("")}function Une(e,t,i,a,c){var u=[Iu(Math.round(e).toString(16)),Iu(Math.round(t).toString(16)),Iu(Math.round(i).toString(16)),Iu(Vne(a))];return c&&u[0].startsWith(u[0].charAt(1))&&u[1].startsWith(u[1].charAt(1))&&u[2].startsWith(u[2].charAt(1))&&u[3].startsWith(u[3].charAt(1))?u[0].charAt(0)+u[1].charAt(0)+u[2].charAt(0)+u[3].charAt(0):u.join("")}function Vne(e){return Math.round(parseFloat(e)*255).toString(16)}function zU(e){return Sa(e)/255}function Sa(e){return parseInt(e,16)}function Fne(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var ZR={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function zd(e){var t={r:0,g:0,b:0},i=1,a=null,c=null,u=null,d=!1,p=!1;return typeof e=="string"&&(e=$ne(e)),typeof e=="object"&&(_c(e.r)&&_c(e.g)&&_c(e.b)?(t=kne(e.r,e.g,e.b),d=!0,p=String(e.r).substr(-1)==="%"?"prgb":"rgb"):_c(e.h)&&_c(e.s)&&_c(e.v)?(a=fg(e.s),c=fg(e.v),t=Mne(e.h,a,c),d=!0,p="hsv"):_c(e.h)&&_c(e.s)&&_c(e.l)&&(a=fg(e.s),u=fg(e.l),t=Lne(e.h,a,u),d=!0,p="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(i=e.a)),i=Uj(i),{ok:d,format:e.format||p,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:i}}var Bne="[-\\+]?\\d+%?",jne="[-\\+]?\\d*\\.\\d+%?",Cl="(?:".concat(jne,")|(?:").concat(Bne,")"),Ub="[\\s|\\(]+(".concat(Cl,")[,|\\s]+(").concat(Cl,")[,|\\s]+(").concat(Cl,")\\s*\\)?"),Vb="[\\s|\\(]+(".concat(Cl,")[,|\\s]+(").concat(Cl,")[,|\\s]+(").concat(Cl,")[,|\\s]+(").concat(Cl,")\\s*\\)?"),_s={CSS_UNIT:new RegExp(Cl),rgb:new RegExp("rgb"+Ub),rgba:new RegExp("rgba"+Vb),hsl:new RegExp("hsl"+Ub),hsla:new RegExp("hsla"+Vb),hsv:new RegExp("hsv"+Ub),hsva:new RegExp("hsva"+Vb),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function $ne(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(ZR[e])e=ZR[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var i=_s.rgb.exec(e);return i?{r:i[1],g:i[2],b:i[3]}:(i=_s.rgba.exec(e),i?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=_s.hsl.exec(e),i?{h:i[1],s:i[2],l:i[3]}:(i=_s.hsla.exec(e),i?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=_s.hsv.exec(e),i?{h:i[1],s:i[2],v:i[3]}:(i=_s.hsva.exec(e),i?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=_s.hex8.exec(e),i?{r:Sa(i[1]),g:Sa(i[2]),b:Sa(i[3]),a:zU(i[4]),format:t?"name":"hex8"}:(i=_s.hex6.exec(e),i?{r:Sa(i[1]),g:Sa(i[2]),b:Sa(i[3]),format:t?"name":"hex"}:(i=_s.hex4.exec(e),i?{r:Sa(i[1]+i[1]),g:Sa(i[2]+i[2]),b:Sa(i[3]+i[3]),a:zU(i[4]+i[4]),format:t?"name":"hex8"}:(i=_s.hex3.exec(e),i?{r:Sa(i[1]+i[1]),g:Sa(i[2]+i[2]),b:Sa(i[3]+i[3]),format:t?"name":"hex"}:!1)))))))))}function _c(e){return Boolean(_s.CSS_UNIT.exec(String(e)))}var li=function(){function e(t,i){t===void 0&&(t=""),i===void 0&&(i={});var a;if(t instanceof e)return t;typeof t=="number"&&(t=Fne(t)),this.originalInput=t;var c=zd(t);this.originalInput=t,this.r=c.r,this.g=c.g,this.b=c.b,this.a=c.a,this.roundA=Math.round(100*this.a)/100,this.format=(a=i.format)!==null&&a!==void 0?a:c.format,this.gradientType=i.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=c.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),i,a,c,u=t.r/255,d=t.g/255,p=t.b/255;return u<=.03928?i=u/12.92:i=Math.pow((u+.055)/1.055,2.4),d<=.03928?a=d/12.92:a=Math.pow((d+.055)/1.055,2.4),p<=.03928?c=p/12.92:c=Math.pow((p+.055)/1.055,2.4),.2126*i+.7152*a+.0722*c},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=Uj(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=JR(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=JR(this.r,this.g,this.b),i=Math.round(t.h*360),a=Math.round(t.s*100),c=Math.round(t.v*100);return this.a===1?"hsv(".concat(i,", ").concat(a,"%, ").concat(c,"%)"):"hsva(".concat(i,", ").concat(a,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=WU(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=WU(this.r,this.g,this.b),i=Math.round(t.h*360),a=Math.round(t.s*100),c=Math.round(t.l*100);return this.a===1?"hsl(".concat(i,", ").concat(a,"%, ").concat(c,"%)"):"hsla(".concat(i,", ").concat(a,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),QR(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),Une(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),i=Math.round(this.g),a=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(i,", ").concat(a,")"):"rgba(".concat(t,", ").concat(i,", ").concat(a,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(i){return"".concat(Math.round(Qi(i,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(i){return Math.round(Qi(i,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+QR(this.r,this.g,this.b,!1),i=0,a=Object.entries(ZR);i<a.length;i++){var c=a[i],u=c[0],d=c[1];if(t===d)return u}return!1},e.prototype.toString=function(t){var i=Boolean(t);t=t??this.format;var a=!1,c=this.a<1&&this.a>=0,u=!i&&c&&(t.startsWith("hex")||t==="name");return u?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(a=this.toRgbString()),t==="prgb"&&(a=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(a=this.toHexString()),t==="hex3"&&(a=this.toHexString(!0)),t==="hex4"&&(a=this.toHex8String(!0)),t==="hex8"&&(a=this.toHex8String()),t==="name"&&(a=this.toName()),t==="hsl"&&(a=this.toHslString()),t==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.l+=t/100,i.l=pg(i.l),new e(i)},e.prototype.brighten=function(t){t===void 0&&(t=10);var i=this.toRgb();return i.r=Math.max(0,Math.min(255,i.r-Math.round(255*-(t/100)))),i.g=Math.max(0,Math.min(255,i.g-Math.round(255*-(t/100)))),i.b=Math.max(0,Math.min(255,i.b-Math.round(255*-(t/100)))),new e(i)},e.prototype.darken=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.l-=t/100,i.l=pg(i.l),new e(i)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.s-=t/100,i.s=pg(i.s),new e(i)},e.prototype.saturate=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.s+=t/100,i.s=pg(i.s),new e(i)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var i=this.toHsl(),a=(i.h+t)%360;return i.h=a<0?360+a:a,new e(i)},e.prototype.mix=function(t,i){i===void 0&&(i=50);var a=this.toRgb(),c=new e(t).toRgb(),u=i/100,d={r:(c.r-a.r)*u+a.r,g:(c.g-a.g)*u+a.g,b:(c.b-a.b)*u+a.b,a:(c.a-a.a)*u+a.a};return new e(d)},e.prototype.analogous=function(t,i){t===void 0&&(t=6),i===void 0&&(i=30);var a=this.toHsl(),c=360/i,u=[this];for(a.h=(a.h-(c*t>>1)+720)%360;--t;)a.h=(a.h+c)%360,u.push(new e(a));return u},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var i=this.toHsv(),a=i.h,c=i.s,u=i.v,d=[],p=1/t;t--;)d.push(new e({h:a,s:c,v:u})),u=(u+p)%1;return d},e.prototype.splitcomplement=function(){var t=this.toHsl(),i=t.h;return[this,new e({h:(i+72)%360,s:t.s,l:t.l}),new e({h:(i+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var i=this.toRgb(),a=new e(t).toRgb(),c=i.a+a.a*(1-i.a);return new e({r:(i.r*i.a+a.r*a.a*(1-i.a))/c,g:(i.g*i.a+a.g*a.a*(1-i.a))/c,b:(i.b*i.a+a.b*a.a*(1-i.a))/c,a:c})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var i=this.toHsl(),a=i.h,c=[this],u=360/t,d=1;d<t;d++)c.push(new e({h:(a+d*u)%360,s:i.s,l:i.l}));return c},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),mg=2,GU=.16,Hne=.05,Wne=.05,zne=.15,Vj=5,Fj=4,Gne=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function KU(e){var t=e.r,i=e.g,a=e.b,c=JR(t,i,a);return{h:c.h*360,s:c.s,v:c.v}}function gg(e){var t=e.r,i=e.g,a=e.b;return"#".concat(QR(t,i,a,!1))}function Kne(e,t,i){var a=i/100,c={r:(t.r-e.r)*a+e.r,g:(t.g-e.g)*a+e.g,b:(t.b-e.b)*a+e.b};return c}function YU(e,t,i){var a;return Math.round(e.h)>=60&&Math.round(e.h)<=240?a=i?Math.round(e.h)-mg*t:Math.round(e.h)+mg*t:a=i?Math.round(e.h)+mg*t:Math.round(e.h)-mg*t,a<0?a+=360:a>=360&&(a-=360),a}function qU(e,t,i){if(e.h===0&&e.s===0)return e.s;var a;return i?a=e.s-GU*t:t===Fj?a=e.s+GU:a=e.s+Hne*t,a>1&&(a=1),i&&t===Vj&&a>.1&&(a=.1),a<.06&&(a=.06),Number(a.toFixed(2))}function XU(e,t,i){var a;return i?a=e.v+Wne*t:a=e.v-zne*t,a>1&&(a=1),Number(a.toFixed(2))}function Dc(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=[],a=zd(e),c=Vj;c>0;c-=1){var u=KU(a),d=gg(zd({h:YU(u,c,!0),s:qU(u,c,!0),v:XU(u,c,!0)}));i.push(d)}i.push(gg(a));for(var p=1;p<=Fj;p+=1){var f=KU(a),g=gg(zd({h:YU(f,p),s:qU(f,p),v:XU(f,p)}));i.push(g)}return t.theme==="dark"?Gne.map(function(E){var y=E.index,C=E.opacity,w=gg(Kne(zd(t.backgroundColor||"#141414"),zd(i[y]),C*100));return w}):i}var Fb={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},tv={},Bb={};Object.keys(Fb).forEach(function(e){tv[e]=Dc(Fb[e]),tv[e].primary=tv[e][5],Bb[e]=Dc(Fb[e],{theme:"dark",backgroundColor:"#141414"}),Bb[e].primary=Bb[e][5]});var Yne=tv.gold;const qne=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}},Bj=qne;function Xne(e){const{sizeUnit:t,sizeStep:i}=e;return{sizeXXL:t*(i+8),sizeXL:t*(i+4),sizeLG:t*(i+2),sizeMD:t*(i+1),sizeMS:t*i,size:t*i,sizeSM:t*(i-1),sizeXS:t*(i-2),sizeXXS:t*(i-3)}}const Jw={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},Jne=Object.assign(Object.assign({},Jw),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1}),y_=Jne;function jj(e,t){let{generateColorPalettes:i,generateNeutralColorPalettes:a}=t;const{colorSuccess:c,colorWarning:u,colorError:d,colorInfo:p,colorPrimary:f,colorBgBase:g,colorTextBase:E}=e,y=i(f),C=i(c),w=i(u),R=i(d),O=i(p),k=a(g,E);return Object.assign(Object.assign({},k),{colorPrimaryBg:y[1],colorPrimaryBgHover:y[2],colorPrimaryBorder:y[3],colorPrimaryBorderHover:y[4],colorPrimaryHover:y[5],colorPrimary:y[6],colorPrimaryActive:y[7],colorPrimaryTextHover:y[8],colorPrimaryText:y[9],colorPrimaryTextActive:y[10],colorSuccessBg:C[1],colorSuccessBgHover:C[2],colorSuccessBorder:C[3],colorSuccessBorderHover:C[4],colorSuccessHover:C[4],colorSuccess:C[6],colorSuccessActive:C[7],colorSuccessTextHover:C[8],colorSuccessText:C[9],colorSuccessTextActive:C[10],colorErrorBg:R[1],colorErrorBgHover:R[2],colorErrorBorder:R[3],colorErrorBorderHover:R[4],colorErrorHover:R[5],colorError:R[6],colorErrorActive:R[7],colorErrorTextHover:R[8],colorErrorText:R[9],colorErrorTextActive:R[10],colorWarningBg:w[1],colorWarningBgHover:w[2],colorWarningBorder:w[3],colorWarningBorderHover:w[4],colorWarningHover:w[4],colorWarning:w[6],colorWarningActive:w[7],colorWarningTextHover:w[8],colorWarningText:w[9],colorWarningTextActive:w[10],colorInfoBg:O[1],colorInfoBgHover:O[2],colorInfoBorder:O[3],colorInfoBorderHover:O[4],colorInfoHover:O[4],colorInfo:O[6],colorInfoActive:O[7],colorInfoTextHover:O[8],colorInfoText:O[9],colorInfoTextActive:O[10],colorBgMask:new li("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const Qne=e=>{let t=e,i=e,a=e,c=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?i=4:e<8&&e>=7?i=5:e<14&&e>=8?i=6:e<16&&e>=14?i=7:e>=16&&(i=8),e<6&&e>=2?a=1:e>=6&&(a=2),e>4&&e<8?c=4:e>=8&&(c=6),{borderRadius:e>16?16:e,borderRadiusXS:a,borderRadiusSM:i,borderRadiusLG:t,borderRadiusOuter:c}},Zne=Qne;function ere(e){const{motionUnit:t,motionBase:i,borderRadius:a,lineWidth:c}=e;return Object.assign({motionDurationFast:`${(i+t).toFixed(1)}s`,motionDurationMid:`${(i+t*2).toFixed(1)}s`,motionDurationSlow:`${(i+t*3).toFixed(1)}s`,lineWidthBold:c+1},Zne(a))}const Sc=(e,t)=>new li(e).setAlpha(t).toRgbString(),Bp=(e,t)=>new li(e).darken(t).toHexString(),tre=e=>{const t=Dc(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},nre=(e,t)=>{const i=e||"#fff",a=t||"#000";return{colorBgBase:i,colorTextBase:a,colorText:Sc(a,.88),colorTextSecondary:Sc(a,.65),colorTextTertiary:Sc(a,.45),colorTextQuaternary:Sc(a,.25),colorFill:Sc(a,.15),colorFillSecondary:Sc(a,.06),colorFillTertiary:Sc(a,.04),colorFillQuaternary:Sc(a,.02),colorBgLayout:Bp(i,4),colorBgContainer:Bp(i,0),colorBgElevated:Bp(i,0),colorBgSpotlight:Sc(a,.85),colorBorder:Bp(i,15),colorBorderSecondary:Bp(i,6)}};function rre(e){const t=new Array(10).fill(null).map((i,a)=>{const c=a-1,u=e*Math.pow(2.71828,c/5),d=a>1?Math.floor(u):Math.ceil(u);return Math.floor(d/2)*2});return t[1]=e,t.map(i=>{const a=i+8;return{size:i,lineHeight:a/i}})}const ire=e=>{const t=rre(e),i=t.map(c=>c.size),a=t.map(c=>c.lineHeight);return{fontSizeSM:i[0],fontSize:i[1],fontSizeLG:i[2],fontSizeXL:i[3],fontSizeHeading1:i[6],fontSizeHeading2:i[5],fontSizeHeading3:i[4],fontSizeHeading4:i[3],fontSizeHeading5:i[2],lineHeight:a[1],lineHeightLG:a[2],lineHeightSM:a[0],lineHeightHeading1:a[6],lineHeightHeading2:a[5],lineHeightHeading3:a[4],lineHeightHeading4:a[3],lineHeightHeading5:a[2]}},$j=ire;function C_(e){const t=Object.keys(Jw).map(i=>{const a=Dc(e[i]);return new Array(10).fill(1).reduce((c,u,d)=>(c[`${i}-${d+1}`]=a[d],c[`${i}${d+1}`]=a[d],c),{})}).reduce((i,a)=>(i=Object.assign(Object.assign({},i),a),i),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),jj(e,{generateColorPalettes:tre,generateNeutralColorPalettes:nre})),$j(e.fontSize)),Xne(e)),Bj(e)),ere(e))}function jb(e){return e>=0&&e<=255}function vg(e,t){const{r:i,g:a,b:c,a:u}=new li(e).toRgb();if(u<1)return e;const{r:d,g:p,b:f}=new li(t).toRgb();for(let g=.01;g<=1;g+=.01){const E=Math.round((i-d*(1-g))/g),y=Math.round((a-p*(1-g))/g),C=Math.round((c-f*(1-g))/g);if(jb(E)&&jb(y)&&jb(C))return new li({r:E,g:y,b:C,a:Math.round(g*100)/100}).toRgbString()}return new li({r:i,g:a,b:c,a:1}).toRgbString()}var ore=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function are(e){const{override:t}=e,i=ore(e,["override"]),a=Object.assign({},t);Object.keys(y_).forEach(C=>{delete a[C]});const c=Object.assign(Object.assign({},i),a),u=480,d=576,p=768,f=992,g=1200,E=1600;return Object.assign(Object.assign(Object.assign({},c),{colorLink:c.colorInfoText,colorLinkHover:c.colorInfoHover,colorLinkActive:c.colorInfoActive,colorFillContent:c.colorFillSecondary,colorFillContentHover:c.colorFill,colorFillAlter:c.colorFillQuaternary,colorBgContainerDisabled:c.colorFillTertiary,colorBorderBg:c.colorBgContainer,colorSplit:vg(c.colorBorderSecondary,c.colorBgContainer),colorTextPlaceholder:c.colorTextQuaternary,colorTextDisabled:c.colorTextQuaternary,colorTextHeading:c.colorText,colorTextLabel:c.colorTextSecondary,colorTextDescription:c.colorTextTertiary,colorTextLightSolid:c.colorWhite,colorHighlight:c.colorError,colorBgTextHover:c.colorFillSecondary,colorBgTextActive:c.colorFill,colorIcon:c.colorTextTertiary,colorIconHover:c.colorText,colorErrorOutline:vg(c.colorErrorBg,c.colorBgContainer),colorWarningOutline:vg(c.colorWarningBg,c.colorBgContainer),fontSizeIcon:c.fontSizeSM,lineWidthFocus:c.lineWidth*4,lineWidth:c.lineWidth,controlOutlineWidth:c.lineWidth*2,controlInteractiveSize:c.controlHeight/2,controlItemBgHover:c.colorFillTertiary,controlItemBgActive:c.colorPrimaryBg,controlItemBgActiveHover:c.colorPrimaryBgHover,controlItemBgActiveDisabled:c.colorFill,controlTmpOutline:c.colorFillQuaternary,controlOutline:vg(c.colorPrimaryBg,c.colorBgContainer),lineType:c.lineType,borderRadius:c.borderRadius,borderRadiusXS:c.borderRadiusXS,borderRadiusSM:c.borderRadiusSM,borderRadiusLG:c.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:c.sizeXXS,paddingXS:c.sizeXS,paddingSM:c.sizeSM,padding:c.size,paddingMD:c.sizeMD,paddingLG:c.sizeLG,paddingXL:c.sizeXL,paddingContentHorizontalLG:c.sizeLG,paddingContentVerticalLG:c.sizeMS,paddingContentHorizontal:c.sizeMS,paddingContentVertical:c.sizeSM,paddingContentHorizontalSM:c.size,paddingContentVerticalSM:c.sizeXS,marginXXS:c.sizeXXS,marginXS:c.sizeXS,marginSM:c.sizeSM,margin:c.size,marginMD:c.sizeMD,marginLG:c.sizeLG,marginXL:c.sizeXL,marginXXL:c.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:u,screenXSMin:u,screenXSMax:d-1,screenSM:d,screenSMMin:d,screenSMMax:p-1,screenMD:p,screenMDMin:p,screenMDMax:f-1,screenLG:f,screenLGMin:f,screenLGMax:g-1,screenXL:g,screenXLMin:g,screenXLMax:E-1,screenXXL:E,screenXXLMin:E,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new li("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new li("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new li("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),a)}const Hj="anticon",sre=(e,t)=>t||(e?`ant-${e}`:"ant"),ei=_.createContext({getPrefixCls:sre,iconPrefixCls:Hj}),Wj=e=>({color:e.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}}),cre=(e,t,i,a,c)=>{const u=e/2,d=0,p=u,f=i*1/Math.sqrt(2),g=u-i*(1-1/Math.sqrt(2)),E=u-t*(1/Math.sqrt(2)),y=i*(Math.sqrt(2)-1)+t*(1/Math.sqrt(2)),C=2*u-E,w=y,R=2*u-f,O=g,k=2*u-d,A=p,x=u*Math.sqrt(2)+i*(Math.sqrt(2)-2),P=i*(Math.sqrt(2)-1);return{pointerEvents:"none",width:e,height:e,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:e,height:e/2,background:a,clipPath:{_multi_value_:!0,value:[`polygon(${P}px 100%, 50% ${P}px, ${2*u-P}px 100%, ${P}px 100%)`,`path('M ${d} ${p} A ${i} ${i} 0 0 0 ${f} ${g} L ${E} ${y} A ${t} ${t} 0 0 1 ${C} ${w} L ${R} ${O} A ${i} ${i} 0 0 0 ${k} ${A} Z')`]},content:'""'},"&::after":{content:'""',position:"absolute",width:x,height:x,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${t}px 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:c,zIndex:0,background:"transparent"}}},mh={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},$u=e=>({boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:e.fontFamily}),b_=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),eI=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),lre=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},[`&:active,
  &:hover`]:{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),ure=(e,t)=>{const{fontFamily:i,fontSize:a}=e,c=`[class^="${t}"], [class*=" ${t}"]`;return{[c]:{fontFamily:i,fontSize:a,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[c]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},zj=e=>({outline:`${e.lineWidthFocus}px solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),dre=e=>({"&:focus-visible":Object.assign({},zj(e))});function Uc(e,t,i,a){return c=>{const[u,d,p]=Uh(),{getPrefixCls:f,iconPrefixCls:g,csp:E}=_.useContext(ei),y=f(),C={theme:u,token:d,hashId:p,nonce:()=>E==null?void 0:E.nonce};return VR(Object.assign(Object.assign({},C),{path:["Shared",y]}),()=>[{"&":lre(d)}]),[VR(Object.assign(Object.assign({},C),{path:[e,c,g]}),()=>{const{token:w,flush:R}=pre(d),O=typeof i=="function"?i(w):i,k=Object.assign(Object.assign({},O),d[e]),A=`.${c}`,x=Qr(w,{componentCls:A,prefixCls:c,iconCls:`.${g}`,antCls:`.${y}`},k),P=t(x,{hashId:p,prefixCls:c,rootPrefixCls:y,iconPrefixCls:g,overrideComponentToken:d[e]});return R(e,k),[(a==null?void 0:a.resetStyle)===!1?null:ure(d,c),P]}),p]}}const Gj=typeof CSSINJS_STATISTIC<"u";let tI=!0;function Qr(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(!Gj)return Object.assign.apply(Object,[{}].concat(t));tI=!1;const a={};return t.forEach(c=>{Object.keys(c).forEach(d=>{Object.defineProperty(a,d,{configurable:!0,enumerable:!0,get:()=>c[d]})})}),tI=!0,a}function hre(){}function pre(e){let t,i=e,a=hre;return Gj&&(t=new Set,i=new Proxy(e,{get(c,u){return tI&&t.add(u),c[u]}}),a=(c,u)=>{Array.from(t)}),{token:i,keys:t,flush:a}}function fre(e,t){return Vv.reduce((i,a)=>{const c=e[`${a}1`],u=e[`${a}3`],d=e[`${a}6`],p=e[`${a}7`];return Object.assign(Object.assign({},i),t(a,{lightColor:c,lightBorderColor:u,darkColor:d,textColor:p}))},{})}const mre=Tj(C_),Fv={token:y_,hashed:!0},Kj=Ot.createContext(Fv);function Uh(){const{token:e,hashed:t,theme:i,components:a}=Ot.useContext(Kj),c=`${xne}-${t||""}`,u=i||mre,[d,p]=Zee(u,[y_,e],{salt:c,override:Object.assign({override:e},a),formatToken:are});return[u,d,t?p:""]}const gre=`-ant-${Date.now()}-${Math.random()}`;function vre(e,t){const i={},a=(d,p)=>{let f=d.clone();return f=(p==null?void 0:p(f))||f,f.toRgbString()},c=(d,p)=>{const f=new li(d),g=Dc(f.toRgbString());i[`${p}-color`]=a(f),i[`${p}-color-disabled`]=g[1],i[`${p}-color-hover`]=g[4],i[`${p}-color-active`]=g[6],i[`${p}-color-outline`]=f.clone().setAlpha(.2).toRgbString(),i[`${p}-color-deprecated-bg`]=g[0],i[`${p}-color-deprecated-border`]=g[2]};if(t.primaryColor){c(t.primaryColor,"primary");const d=new li(t.primaryColor),p=Dc(d.toRgbString());p.forEach((g,E)=>{i[`primary-${E+1}`]=g}),i["primary-color-deprecated-l-35"]=a(d,g=>g.lighten(35)),i["primary-color-deprecated-l-20"]=a(d,g=>g.lighten(20)),i["primary-color-deprecated-t-20"]=a(d,g=>g.tint(20)),i["primary-color-deprecated-t-50"]=a(d,g=>g.tint(50)),i["primary-color-deprecated-f-12"]=a(d,g=>g.setAlpha(g.getAlpha()*.12));const f=new li(p[0]);i["primary-color-active-deprecated-f-30"]=a(f,g=>g.setAlpha(g.getAlpha()*.3)),i["primary-color-active-deprecated-d-02"]=a(f,g=>g.darken(2))}return t.successColor&&c(t.successColor,"success"),t.warningColor&&c(t.warningColor,"warning"),t.errorColor&&c(t.errorColor,"error"),t.infoColor&&c(t.infoColor,"info"),`
  :root {
    ${Object.keys(i).map(d=>`--${e}-${d}: ${i[d]};`).join(`
`)}
  }
  `.trim()}function Ere(e,t){const i=vre(e,t);wo()&&wh(i,`${gre}-dynamic-theme`)}const nI=_.createContext(!1),_re=e=>{let{children:t,disabled:i}=e;const a=_.useContext(nI);return _.createElement(nI.Provider,{value:i??a},t)},T_=nI,rI=_.createContext(void 0),Sre=e=>{let{children:t,size:i}=e;const a=_.useContext(rI);return _.createElement(rI.Provider,{value:i||a},t)},Vh=rI;function yre(){const e=_.useContext(T_),t=_.useContext(Vh);return{componentDisabled:e,componentSize:t}}function Cre(e,t){const i=e||{},a=i.inherit===!1||!t?Fv:t;return tm(()=>{if(!e)return t;const u=Object.assign({},a.components);return Object.keys(e.components||{}).forEach(d=>{u[d]=Object.assign(Object.assign({},u[d]),e.components[d])}),Object.assign(Object.assign(Object.assign({},a),i),{token:Object.assign(Object.assign({},a.token),i.token),components:u})},[i,a],(u,d)=>u.some((p,f)=>{const g=d[f];return!m_(p,g,!0)}))}const bre=(e,t)=>{const[i,a]=Uh();return VR({theme:i,token:a,hashId:"",path:["ant-design-icons",e],nonce:()=>t==null?void 0:t.nonce},()=>[{[`.${e}`]:Object.assign(Object.assign({},b_()),{[`.${e} .${e}-icon`]:{display:"block"}})}])},Tre=bre;var Rre=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Ire=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select"],wre="ant";let Yj;function Ore(){return Yj||wre}const Are=e=>{let{prefixCls:t,iconPrefixCls:i,theme:a}=e;t!==void 0&&(Yj=t),a&&Ere(Ore(),a)},Nre=e=>{const{children:t,csp:i,autoInsertSpaceInButton:a,form:c,locale:u,componentSize:d,direction:p,space:f,virtual:g,dropdownMatchSelectWidth:E,legacyLocale:y,parentContext:C,iconPrefixCls:w,theme:R,componentDisabled:O}=e,k=_.useCallback((W,Z)=>{const{prefixCls:ne}=e;if(Z)return Z;const ie=ne||C.getPrefixCls("");return W?`${ie}-${W}`:ie},[C.getPrefixCls,e.prefixCls]),A=w||C.iconPrefixCls||Hj,x=A!==C.iconPrefixCls,P=i||C.csp,M=Tre(A,P),B=Cre(R,C.theme),F={csp:P,autoInsertSpaceInButton:a,locale:u||y,direction:p,space:f,virtual:g,dropdownMatchSelectWidth:E,getPrefixCls:k,iconPrefixCls:A,theme:B},j=Object.assign({},C);Object.keys(F).forEach(W=>{F[W]!==void 0&&(j[W]=F[W])}),Ire.forEach(W=>{const Z=e[W];Z&&(j[W]=Z)});const $=tm(()=>j,j,(W,Z)=>{const ne=Object.keys(W),ie=Object.keys(Z);return ne.length!==ie.length||ne.some(de=>W[de]!==Z[de])}),ee=_.useMemo(()=>({prefixCls:A,csp:P}),[A,P]);let H=x?M(t):t;const J=_.useMemo(()=>{var W,Z,ne;return vf({},((W=Gf.Form)===null||W===void 0?void 0:W.defaultValidateMessages)||{},((ne=(Z=$.locale)===null||Z===void 0?void 0:Z.Form)===null||ne===void 0?void 0:ne.defaultValidateMessages)||{},(c==null?void 0:c.validateMessages)||{})},[$,c==null?void 0:c.validateMessages]);Object.keys(J).length>0&&(H=_.createElement(kj,{validateMessages:J},t)),u&&(H=_.createElement(Nne,{locale:u,_ANT_MARK__:One},H)),(A||P)&&(H=_.createElement(Yw.Provider,{value:ee},H)),d&&(H=_.createElement(Sre,{size:d},H));const X=_.useMemo(()=>{const W=B||{},{algorithm:Z,token:ne}=W,ie=Rre(W,["algorithm","token"]),de=Z&&(!Array.isArray(Z)||Z.length>0)?Tj(Z):void 0;return Object.assign(Object.assign({},ie),{theme:de,token:Object.assign(Object.assign({},y_),ne)})},[B]);return R&&(H=_.createElement(Kj.Provider,{value:X},H)),O!==void 0&&(H=_.createElement(_re,{disabled:O},H)),_.createElement(ei.Provider,{value:$},H)},Fh=e=>{const t=_.useContext(ei),i=_.useContext(Xw);return _.createElement(Nre,Object.assign({parentContext:t,legacyLocale:i},e))};Fh.ConfigContext=ei;Fh.SizeContext=Vh;Fh.config=Are;Fh.useConfig=yre;Object.defineProperty(Fh,"SizeContext",{get:()=>Vh});var qj=function(t){return+setTimeout(t,16)},Xj=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(qj=function(t){return window.requestAnimationFrame(t)},Xj=function(t){return window.cancelAnimationFrame(t)});var JU=0,Qw=new Map;function Jj(e){Qw.delete(e)}var _r=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;JU+=1;var a=JU;function c(u){if(u===0)Jj(a),t();else{var d=qj(function(){c(u-1)});Qw.set(a,d)}}return c(i),a};_r.cancel=function(e){var t=Qw.get(e);return Jj(t),Xj(t)};function tf(e,t,i,a){var c=Rh.unstable_batchedUpdates?function(d){Rh.unstable_batchedUpdates(i,d)}:i;return e.addEventListener&&e.addEventListener(t,c,a),{remove:function(){e.removeEventListener&&e.removeEventListener(t,c,a)}}}function xre(e,t){go(e,"[@ant-design/icons] ".concat(t))}function QU(e){return An(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(An(e.icon)==="object"||typeof e.icon=="function")}function ZU(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,i){var a=e[i];switch(i){case"class":t.className=a,delete t.class;break;default:t[i]=a}return t},{})}function iI(e,t,i){return i?Ot.createElement(e.tag,ce(ce({key:t},ZU(e.attrs)),i),(e.children||[]).map(function(a,c){return iI(a,"".concat(t,"-").concat(e.tag,"-").concat(c))})):Ot.createElement(e.tag,ce({key:t},ZU(e.attrs)),(e.children||[]).map(function(a,c){return iI(a,"".concat(t,"-").concat(e.tag,"-").concat(c))}))}function Qj(e){return Dc(e)[0]}function Zj(e){return e?Array.isArray(e)?e:[e]:[]}var Pre=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Dre=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pre,i=_.useContext(Yw),a=i.csp,c=i.prefixCls,u=t;c&&(u=u.replace(/anticon/g,c)),_.useEffect(function(){wh(u,"@ant-design-icons",{prepend:!0,csp:a})},[])},kre=["icon","className","onClick","style","primaryColor","secondaryColor"],Ef={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function Lre(e){var t=e.primaryColor,i=e.secondaryColor;Ef.primaryColor=t,Ef.secondaryColor=i||Qj(t),Ef.calculated=!!i}function Mre(){return ce({},Ef)}var R_=function(t){var i=t.icon,a=t.className,c=t.onClick,u=t.style,d=t.primaryColor,p=t.secondaryColor,f=mn(t,kre),g=Ef;if(d&&(g={primaryColor:d,secondaryColor:p||Qj(d)}),Dre(),xre(QU(i),"icon should be icon definiton, but got ".concat(i)),!QU(i))return null;var E=i;return E&&typeof E.icon=="function"&&(E=ce(ce({},E),{},{icon:E.icon(g.primaryColor,g.secondaryColor)})),iI(E.icon,"svg-".concat(E.name),ce({className:a,onClick:c,style:u,"data-icon":E.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},f))};R_.displayName="IconReact";R_.getTwoToneColors=Mre;R_.setTwoToneColors=Lre;const Zw=R_;function e8(e){var t=Zj(e),i=we(t,2),a=i[0],c=i[1];return Zw.setTwoToneColors({primaryColor:a,secondaryColor:c})}function Ure(){var e=Zw.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var Vre=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];e8("#1890ff");var I_=_.forwardRef(function(e,t){var i,a=e.className,c=e.icon,u=e.spin,d=e.rotate,p=e.tabIndex,f=e.onClick,g=e.twoToneColor,E=mn(e,Vre),y=_.useContext(Yw),C=y.prefixCls,w=C===void 0?"anticon":C,R=y.rootClassName,O=ct(R,w,(i={},Ie(i,"".concat(w,"-").concat(c.name),!!c.name),Ie(i,"".concat(w,"-spin"),!!u||c.name==="loading"),i),a),k=p;k===void 0&&f&&(k=-1);var A=d?{msTransform:"rotate(".concat(d,"deg)"),transform:"rotate(".concat(d,"deg)")}:void 0,x=Zj(g),P=we(x,2),M=P[0],B=P[1];return _.createElement("span",ce(ce({role:"img","aria-label":c.name},E),{},{ref:t,tabIndex:k,onClick:f,className:O}),_.createElement(Zw,{icon:c,primaryColor:M,secondaryColor:B,style:A}))});I_.displayName="AntdIcon";I_.getTwoToneColor=Ure;I_.setTwoToneColor=e8;const Na=I_;var Fre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"};const Bre=Fre;var t8=function(t,i){return _.createElement(Na,ce(ce({},t),{},{ref:i,icon:Bre}))};t8.displayName="CloseCircleFilled";const n8=_.forwardRef(t8);var jre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"};const $re=jre;var r8=function(t,i){return _.createElement(Na,ce(ce({},t),{},{ref:i,icon:$re}))};r8.displayName="CloseOutlined";const Hre=_.forwardRef(r8);var Wre=_.createContext({}),zre=function(e){Vl(i,e);var t=Fl(i);function i(){return xo(this,i),t.apply(this,arguments)}return Po(i,[{key:"render",value:function(){return this.props.children}}]),i}(_.Component);function xu(e){var t=_.useRef(!1),i=_.useState(e),a=we(i,2),c=a[0],u=a[1];_.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function d(p,f){f&&t.current||u(p)}return[c,d]}var _u="none",Eg="appear",_g="enter",Sg="leave",eV="none",Cs="prepare",ah="start",sh="active",e1="end",i8="prepared";function tV(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit".concat(e)]="webkit".concat(t),i["Moz".concat(e)]="moz".concat(t),i["ms".concat(e)]="MS".concat(t),i["O".concat(e)]="o".concat(t.toLowerCase()),i}function Gre(e,t){var i={animationend:tV("Animation","AnimationEnd"),transitionend:tV("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete i.animationend.animation,"TransitionEvent"in t||delete i.transitionend.transition),i}var Kre=Gre(wo(),typeof window<"u"?window:{}),o8={};if(wo()){var Yre=document.createElement("div");o8=Yre.style}var yg={};function a8(e){if(yg[e])return yg[e];var t=Kre[e];if(t)for(var i=Object.keys(t),a=i.length,c=0;c<a;c+=1){var u=i[c];if(Object.prototype.hasOwnProperty.call(t,u)&&u in o8)return yg[e]=t[u],yg[e]}return""}var s8=a8("animationend"),c8=a8("transitionend"),l8=!!(s8&&c8),nV=s8||"animationend",rV=c8||"transitionend";function iV(e,t){if(!e)return null;if(An(e)==="object"){var i=t.replace(/-\w/g,function(a){return a[1].toUpperCase()});return e[i]}return"".concat(e,"-").concat(t)}const qre=function(e){var t=_.useRef(),i=_.useRef(e);i.current=e;var a=_.useCallback(function(d){i.current(d)},[]);function c(d){d&&(d.removeEventListener(rV,a),d.removeEventListener(nV,a))}function u(d){t.current&&t.current!==d&&c(t.current),d&&d!==t.current&&(d.addEventListener(rV,a),d.addEventListener(nV,a),t.current=d)}return _.useEffect(function(){return function(){c(t.current)}},[]),[u,c]};var u8=wo()?_.useLayoutEffect:_.useEffect;const Xre=function(){var e=_.useRef(null);function t(){_r.cancel(e.current)}function i(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var u=_r(function(){c<=1?a({isCanceled:function(){return u!==e.current}}):i(a,c-1)});e.current=u}return _.useEffect(function(){return function(){t()}},[]),[i,t]};var Jre=[Cs,ah,sh,e1],Qre=[Cs,i8],d8=!1,Zre=!0;function h8(e){return e===sh||e===e1}const eie=function(e,t,i){var a=xu(eV),c=we(a,2),u=c[0],d=c[1],p=Xre(),f=we(p,2),g=f[0],E=f[1];function y(){d(Cs,!0)}var C=t?Qre:Jre;return u8(function(){if(u!==eV&&u!==e1){var w=C.indexOf(u),R=C[w+1],O=i(u);O===d8?d(R,!0):R&&g(function(k){function A(){k.isCanceled()||d(R,!0)}O===!0?A():Promise.resolve(O).then(A)})}},[e,u]),_.useEffect(function(){return function(){E()}},[]),[y,u]};function tie(e,t,i,a){var c=a.motionEnter,u=c===void 0?!0:c,d=a.motionAppear,p=d===void 0?!0:d,f=a.motionLeave,g=f===void 0?!0:f,E=a.motionDeadline,y=a.motionLeaveImmediately,C=a.onAppearPrepare,w=a.onEnterPrepare,R=a.onLeavePrepare,O=a.onAppearStart,k=a.onEnterStart,A=a.onLeaveStart,x=a.onAppearActive,P=a.onEnterActive,M=a.onLeaveActive,B=a.onAppearEnd,F=a.onEnterEnd,j=a.onLeaveEnd,$=a.onVisibleChanged,ee=xu(),H=we(ee,2),J=H[0],X=H[1],W=xu(_u),Z=we(W,2),ne=Z[0],ie=Z[1],de=xu(null),oe=we(de,2),fe=oe[0],ge=oe[1],ae=_.useRef(!1),se=_.useRef(null);function he(){return i()}var pe=_.useRef(!1);function Oe(){ie(_u,!0),ge(null,!0)}function be($e){var ke=he();if(!($e&&!$e.deadline&&$e.target!==ke)){var et=pe.current,ft;ne===Eg&&et?ft=B==null?void 0:B(ke,$e):ne===_g&&et?ft=F==null?void 0:F(ke,$e):ne===Sg&&et&&(ft=j==null?void 0:j(ke,$e)),ne!==_u&&et&&ft!==!1&&Oe()}}var Ne=qre(be),Ae=we(Ne,1),at=Ae[0],it=function(ke){var et,ft,Rt;switch(ke){case Eg:return et={},Ie(et,Cs,C),Ie(et,ah,O),Ie(et,sh,x),et;case _g:return ft={},Ie(ft,Cs,w),Ie(ft,ah,k),Ie(ft,sh,P),ft;case Sg:return Rt={},Ie(Rt,Cs,R),Ie(Rt,ah,A),Ie(Rt,sh,M),Rt;default:return{}}},ze=_.useMemo(function(){return it(ne)},[ne]),ht=eie(ne,!e,function($e){if($e===Cs){var ke=ze[Cs];return ke?ke(he()):d8}if(lt in ze){var et;ge(((et=ze[lt])===null||et===void 0?void 0:et.call(ze,he(),null))||null)}return lt===sh&&(at(he()),E>0&&(clearTimeout(se.current),se.current=setTimeout(function(){be({deadline:!0})},E))),lt===i8&&Oe(),Zre}),Pe=we(ht,2),Ye=Pe[0],lt=Pe[1],At=h8(lt);pe.current=At,u8(function(){X(t);var $e=ae.current;ae.current=!0;var ke;!$e&&t&&p&&(ke=Eg),$e&&t&&u&&(ke=_g),($e&&!t&&g||!$e&&y&&!t&&g)&&(ke=Sg);var et=it(ke);ke&&(e||et[Cs])?(ie(ke),Ye()):ie(_u)},[t]),_.useEffect(function(){(ne===Eg&&!p||ne===_g&&!u||ne===Sg&&!g)&&ie(_u)},[p,u,g]),_.useEffect(function(){return function(){ae.current=!1,clearTimeout(se.current)}},[]);var _t=_.useRef(!1);_.useEffect(function(){J&&(_t.current=!0),J!==void 0&&ne===_u&&((_t.current||J)&&($==null||$(J)),_t.current=!0)},[J,ne]);var Be=fe;return ze[Cs]&&lt===ah&&(Be=ce({transition:"none"},Be)),[ne,lt,Be,J??t]}function nie(e){var t=e;An(e)==="object"&&(t=e.transitionSupport);function i(c,u){return!!(c.motionName&&t&&u!==!1)}var a=_.forwardRef(function(c,u){var d=c.visible,p=d===void 0?!0:d,f=c.removeOnLeave,g=f===void 0?!0:f,E=c.forceRender,y=c.children,C=c.motionName,w=c.leavedClassName,R=c.eventProps,O=_.useContext(Wre),k=O.motion,A=i(c,k),x=_.useRef(),P=_.useRef();function M(){try{return x.current instanceof HTMLElement?x.current:$f(P.current)}catch{return null}}var B=tie(A,p,M,c),F=we(B,4),j=F[0],$=F[1],ee=F[2],H=F[3],J=_.useRef(H);H&&(J.current=!0);var X=_.useCallback(function(ge){x.current=ge,Bw(u,ge)},[u]),W,Z=ce(ce({},R),{},{visible:p});if(!y)W=null;else if(j===_u)H?W=y(ce({},Z),X):!g&&J.current&&w?W=y(ce(ce({},Z),{},{className:w}),X):E||!g&&!w?W=y(ce(ce({},Z),{},{style:{display:"none"}}),X):W=null;else{var ne,ie;$===Cs?ie="prepare":h8($)?ie="active":$===ah&&(ie="start");var de=iV(C,"".concat(j,"-").concat(ie));W=y(ce(ce({},Z),{},{className:ct(iV(C,j),(ne={},Ie(ne,de,de&&ie),Ie(ne,C,typeof C=="string"),ne)),style:ee}),X)}if(_.isValidElement(W)&&Lh(W)){var oe=W,fe=oe.ref;fe||(W=_.cloneElement(W,{ref:X}))}return _.createElement(zre,{ref:P},W)});return a.displayName="CSSMotion",a}const Vc=nie(l8);var oI="add",aI="keep",sI="remove",$b="removed";function rie(e){var t;return e&&An(e)==="object"&&"key"in e?t=e:t={key:e},ce(ce({},t),{},{key:String(t.key)})}function cI(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(rie)}function iie(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=[],a=0,c=t.length,u=cI(e),d=cI(t);u.forEach(function(g){for(var E=!1,y=a;y<c;y+=1){var C=d[y];if(C.key===g.key){a<y&&(i=i.concat(d.slice(a,y).map(function(w){return ce(ce({},w),{},{status:oI})})),a=y),i.push(ce(ce({},C),{},{status:aI})),a+=1,E=!0;break}}E||i.push(ce(ce({},g),{},{status:sI}))}),a<c&&(i=i.concat(d.slice(a).map(function(g){return ce(ce({},g),{},{status:oI})})));var p={};i.forEach(function(g){var E=g.key;p[E]=(p[E]||0)+1});var f=Object.keys(p).filter(function(g){return p[g]>1});return f.forEach(function(g){i=i.filter(function(E){var y=E.key,C=E.status;return y!==g||C!==sI}),i.forEach(function(E){E.key===g&&(E.status=aI)})}),i}var oie=["component","children","onVisibleChanged","onAllRemoved"],aie=["status"],sie=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function cie(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vc,i=function(a){Vl(u,a);var c=Fl(u);function u(){var d;xo(this,u);for(var p=arguments.length,f=new Array(p),g=0;g<p;g++)f[g]=arguments[g];return d=c.call.apply(c,[this].concat(f)),Ie(En(d),"state",{keyEntities:[]}),Ie(En(d),"removeKey",function(E){var y=d.state.keyEntities,C=y.map(function(w){return w.key!==E?w:ce(ce({},w),{},{status:$b})});return d.setState({keyEntities:C}),C.filter(function(w){var R=w.status;return R!==$b}).length}),d}return Po(u,[{key:"render",value:function(){var p=this,f=this.state.keyEntities,g=this.props,E=g.component,y=g.children,C=g.onVisibleChanged,w=g.onAllRemoved,R=mn(g,oie),O=E||_.Fragment,k={};return sie.forEach(function(A){k[A]=R[A],delete R[A]}),delete R.keys,_.createElement(O,R,f.map(function(A){var x=A.status,P=mn(A,aie),M=x===oI||x===aI;return _.createElement(t,He({},k,{key:P.key,visible:M,eventProps:P,onVisibleChanged:function(F){if(C==null||C(F,{key:P.key}),!F){var j=p.removeKey(P.key);j===0&&w&&w()}}}),y)}))}}],[{key:"getDerivedStateFromProps",value:function(p,f){var g=p.keys,E=f.keyEntities,y=cI(g),C=iie(E,y);return{keyEntities:C.filter(function(w){var R=E.find(function(O){var k=O.key;return w.key===k});return!(R&&R.status===$b&&w.status===sI)})}}}]),u}(_.Component);return Ie(i,"defaultProps",{component:"div"}),i}cie(l8);const{isValidElement:Uu}=ov;function p8(e){return e&&Uu(e)&&e.type===_.Fragment}function lie(e,t,i){return Uu(e)?_.cloneElement(e,typeof i=="function"?i(e.props||{}):i):t}function jl(e,t){return lie(e,e,t)}function Ts(e){var t=_.useRef();t.current=e;var i=_.useCallback(function(){for(var a,c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return(a=t.current)===null||a===void 0?void 0:a.call.apply(a,[t].concat(u))},[]);return i}var Ve={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var i=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||i>=Ve.F1&&i<=Ve.F12)return!1;switch(i){case Ve.ALT:case Ve.CAPS_LOCK:case Ve.CONTEXT_MENU:case Ve.CTRL:case Ve.DOWN:case Ve.END:case Ve.ESC:case Ve.HOME:case Ve.INSERT:case Ve.LEFT:case Ve.MAC_FF_META:case Ve.META:case Ve.NUMLOCK:case Ve.NUM_CENTER:case Ve.PAGE_DOWN:case Ve.PAGE_UP:case Ve.PAUSE:case Ve.PRINT_SCREEN:case Ve.RIGHT:case Ve.SHIFT:case Ve.UP:case Ve.WIN_KEY:case Ve.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=Ve.ZERO&&t<=Ve.NINE||t>=Ve.NUM_ZERO&&t<=Ve.NUM_MULTIPLY||t>=Ve.A&&t<=Ve.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case Ve.SPACE:case Ve.QUESTION_MARK:case Ve.NUM_PLUS:case Ve.NUM_MINUS:case Ve.NUM_PERIOD:case Ve.NUM_DIVISION:case Ve.SEMICOLON:case Ve.DASH:case Ve.EQUALS:case Ve.COMMA:case Ve.PERIOD:case Ve.SLASH:case Ve.APOSTROPHE:case Ve.SINGLE_QUOTE:case Ve.OPEN_SQUARE_BRACKET:case Ve.BACKSLASH:case Ve.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},uie={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const die=uie;var f8=function(t,i){return _.createElement(Na,ce(ce({},t),{},{ref:i,icon:die}))};f8.displayName="LoadingOutlined";const lI=_.forwardRef(f8);var om=ce({},rZ),hie=om.version,pie=om.render,fie=om.unmountComponentAtNode,w_;try{var mie=Number((hie||"").split(".")[0]);mie>=18&&(w_=om.createRoot)}catch{}function oV(e){var t=om.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&An(t)==="object"&&(t.usingClientEntryPoint=e)}var Bv="__rc_react_root__";function gie(e,t){oV(!0);var i=t[Bv]||w_(t);oV(!1),i.render(e),t[Bv]=i}function vie(e,t){pie(e,t)}function Eie(e,t){if(w_){gie(e,t);return}vie(e,t)}function _ie(e){return uI.apply(this,arguments)}function uI(){return uI=ju(Oo().mark(function e(t){return Oo().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.resolve().then(function(){var c;(c=t[Bv])===null||c===void 0||c.unmount(),delete t[Bv]}));case 1:case"end":return a.stop()}},e)})),uI.apply(this,arguments)}function Sie(e){fie(e)}function yie(e){return dI.apply(this,arguments)}function dI(){return dI=ju(Oo().mark(function e(t){return Oo().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(w_===void 0){a.next=2;break}return a.abrupt("return",_ie(t));case 2:Sie(t);case 3:case"end":return a.stop()}},e)})),dI.apply(this,arguments)}const O_=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),i=t.width,a=t.height;if(i||a)return!0}if(e.getBoundingClientRect){var c=e.getBoundingClientRect(),u=c.width,d=c.height;if(u||d)return!0}}return!1},Cie=e=>{const{componentCls:t,colorPrimary:i}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${i})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}},bie=Uc("Wave",e=>[Cie(e)]);function Tie(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function Hb(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&Tie(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function Rie(e){const{borderTopColor:t,borderColor:i,backgroundColor:a}=getComputedStyle(e);return Hb(t)?t:Hb(i)?i:Hb(a)?a:null}function Wb(e){return Number.isNaN(e)?0:e}const Iie=e=>{const{className:t,target:i}=e,a=_.useRef(null),[c,u]=_.useState(null),[d,p]=_.useState([]),[f,g]=_.useState(0),[E,y]=_.useState(0),[C,w]=_.useState(0),[R,O]=_.useState(0),[k,A]=_.useState(!1),x={left:f,top:E,width:C,height:R,borderRadius:d.map(M=>`${M}px`).join(" ")};c&&(x["--wave-color"]=c);function P(){const M=getComputedStyle(i);u(Rie(i));const B=M.position==="static",{borderLeftWidth:F,borderTopWidth:j}=M;g(B?i.offsetLeft:Wb(-parseFloat(F))),y(B?i.offsetTop:Wb(-parseFloat(j))),w(i.offsetWidth),O(i.offsetHeight);const{borderTopLeftRadius:$,borderTopRightRadius:ee,borderBottomLeftRadius:H,borderBottomRightRadius:J}=M;p([$,ee,J,H].map(X=>Wb(parseFloat(X))))}return _.useEffect(()=>{if(i){const M=_r(()=>{P(),A(!0)});let B;return typeof ResizeObserver<"u"&&(B=new ResizeObserver(P),B.observe(i)),()=>{_r.cancel(M),B==null||B.disconnect()}}},[]),k?_.createElement(Vc,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(M,B)=>{var F;if(B.deadline||B.propertyName==="opacity"){const j=(F=a.current)===null||F===void 0?void 0:F.parentElement;yie(j).then(()=>{j==null||j.remove()})}return!1}},M=>{let{className:B}=M;return _.createElement("div",{ref:a,className:ct(t,B),style:x})}):null};function wie(e,t){const i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.top="0px",e==null||e.insertBefore(i,e==null?void 0:e.firstChild),Eie(_.createElement(Iie,{target:e,className:t}),i)}function Oie(e,t){function i(){const a=e.current;wie(a,t)}return i}const Aie=e=>{const{children:t,disabled:i}=e,{getPrefixCls:a}=_.useContext(ei),c=_.useRef(null),u=a("wave"),[,d]=bie(u),p=Oie(c,ct(u,d));if(Ot.useEffect(()=>{const g=c.current;if(!g||g.nodeType!==1||i)return;const E=y=>{y.target.tagName==="INPUT"||!O_(y.target)||!g.getAttribute||g.getAttribute("disabled")||g.disabled||g.className.includes("disabled")||g.className.includes("-leave")||p()};return g.addEventListener("click",E,!0),()=>{g.removeEventListener("click",E,!0)}},[i]),!Ot.isValidElement(t))return t??null;const f=Lh(t)?rc(t.ref,c):c;return jl(t,{ref:f})},Nie=Aie;globalThis&&globalThis.__rest;const m8=_.createContext(null),g8=(e,t)=>{const i=_.useContext(m8),a=_.useMemo(()=>{if(!i)return"";const{compactDirection:c,isFirstItem:u,isLastItem:d}=i,p=c==="vertical"?"-vertical-":"-";return ct({[`${e}-compact${p}item`]:!0,[`${e}-compact${p}first-item`]:u,[`${e}-compact${p}last-item`]:d,[`${e}-compact${p}item-rtl`]:t==="rtl"})},[e,t,i]);return{compactSize:i==null?void 0:i.compactSize,compactDirection:i==null?void 0:i.compactDirection,compactItemClassnames:a}},xie=e=>{let{children:t}=e;return _.createElement(m8.Provider,{value:null},t)},zb=()=>({width:0,opacity:0,transform:"scale(0)"}),Gb=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),Pie=e=>{let{prefixCls:t,loading:i,existIcon:a}=e;const c=!!i;return a?Ot.createElement("span",{className:`${t}-loading-icon`},Ot.createElement(lI,null)):Ot.createElement(Vc,{visible:c,motionName:`${t}-loading-icon-motion`,removeOnLeave:!0,onAppearStart:zb,onAppearActive:Gb,onEnterStart:zb,onEnterActive:Gb,onLeaveStart:Gb,onLeaveActive:zb},(u,d)=>{let{className:p,style:f}=u;return Ot.createElement("span",{className:`${t}-loading-icon`,style:f,ref:d},Ot.createElement(lI,{className:p}))})},Die=Pie;var kie=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const v8=_.createContext(void 0),Lie=e=>{const{getPrefixCls:t,direction:i}=_.useContext(ei),{prefixCls:a,size:c,className:u}=e,d=kie(e,["prefixCls","size","className"]),p=t("btn-group",a),[,,f]=Uh();let g="";switch(c){case"large":g="lg";break;case"small":g="sm";break}const E=ct(p,{[`${p}-${g}`]:g,[`${p}-rtl`]:i==="rtl"},u,f);return _.createElement(v8.Provider,{value:c},_.createElement("div",Object.assign({},d,{className:E})))},Mie=Lie,aV=/^[\u4e00-\u9fa5]{2}$/,hI=aV.test.bind(aV);function Uie(e){return typeof e=="string"}function Kb(e){return e==="text"||e==="link"}function Vie(e,t){if(e==null)return;const i=t?" ":"";return typeof e!="string"&&typeof e!="number"&&Uie(e.type)&&hI(e.props.children)?jl(e,{children:e.props.children.split("").join(i)}):typeof e=="string"?hI(e)?Ot.createElement("span",null,e.split("").join(i)):Ot.createElement("span",null,e):p8(e)?Ot.createElement("span",null,e):e}function Fie(e,t){let i=!1;const a=[];return Ot.Children.forEach(e,c=>{const u=typeof c,d=u==="string"||u==="number";if(i&&d){const p=a.length-1,f=a[p];a[p]=`${f}${c}`}else a.push(c);i=d}),Ot.Children.map(a,c=>Vie(c,t))}const sV=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),Bie=e=>{const{componentCls:t,fontSize:i,lineWidth:a,colorPrimaryHover:c,colorErrorHover:u}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:-a,[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,[`&:hover,
          &:focus,
          &:active`]:{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:i}},sV(`${t}-primary`,c),sV(`${t}-danger`,u)]}},jie=Bie;function $ie(e,t,i){const{focusElCls:a,focus:c,borderElCls:u}=i,d=u?"> *":"",p=["hover",c?"focus":null,"active"].filter(Boolean).map(f=>`&:${f} ${d}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:-e.lineWidth},"&-item":Object.assign(Object.assign({[p]:{zIndex:2}},a?{[`&${a}`]:{zIndex:2}}:{}),{[`&[disabled] ${d}`]:{zIndex:0}})}}function Hie(e,t,i){const{borderElCls:a}=i,c=a?`> ${a}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${c}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function t1(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:i}=e,a=`${i}-compact`;return{[a]:Object.assign(Object.assign({},$ie(e,a,t)),Hie(i,a,t))}}function Wie(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:-e.lineWidth},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function zie(e,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function Gie(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:Object.assign(Object.assign({},Wie(e,t)),zie(e.componentCls,t))}}const Kie=e=>{const{componentCls:t,iconCls:i}=e;return{[t]:{outline:"none",position:"relative",display:"inline-block",fontWeight:400,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:`${e.lineWidth}px ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:e.lineHeight,color:e.colorText,"> span":{display:"inline-block"},[`> ${i} + span, > span + ${i}`]:{marginInlineStart:e.marginXS},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},dre(e)),[`&-icon-only${t}-compact-item`]:{flex:"none"},[`&-compact-item${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:e.lineWidth,height:`calc(100% + ${e.lineWidth*2}px)`,backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-vertical-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:`calc(100% + ${e.lineWidth*2}px)`,height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},kc=(e,t)=>({"&:not(:disabled)":{"&:hover":e,"&:active":t}}),Yie=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),qie=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.controlHeight/2,paddingInlineEnd:e.controlHeight/2}),pI=e=>({cursor:"not-allowed",borderColor:e.colorBorder,color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,boxShadow:"none"}),jv=(e,t,i,a,c,u,d)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:t||void 0,backgroundColor:"transparent",borderColor:i||void 0,boxShadow:"none"},kc(Object.assign({backgroundColor:"transparent"},u),Object.assign({backgroundColor:"transparent"},d))),{"&:disabled":{cursor:"not-allowed",color:a||void 0,borderColor:c||void 0}})}),n1=e=>({"&:disabled":Object.assign({},pI(e))}),E8=e=>Object.assign({},n1(e)),$v=e=>({"&:disabled":{cursor:"not-allowed",color:e.colorTextDisabled}}),_8=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},E8(e)),{backgroundColor:e.colorBgContainer,borderColor:e.colorBorder,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`}),kc({color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),jv(e.componentCls,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:e.colorError,borderColor:e.colorError},kc({color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),jv(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),n1(e))}),Xie=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},E8(e)),{color:e.colorTextLightSolid,backgroundColor:e.colorPrimary,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`}),kc({color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryHover},{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryActive})),jv(e.componentCls,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({backgroundColor:e.colorError,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`},kc({backgroundColor:e.colorErrorHover},{backgroundColor:e.colorErrorActive})),jv(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),n1(e))}),Jie=e=>Object.assign(Object.assign({},_8(e)),{borderStyle:"dashed"}),Qie=e=>Object.assign(Object.assign(Object.assign({color:e.colorLink},kc({color:e.colorLinkHover},{color:e.colorLinkActive})),$v(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},kc({color:e.colorErrorHover},{color:e.colorErrorActive})),$v(e))}),Zie=e=>Object.assign(Object.assign(Object.assign({},kc({color:e.colorText,backgroundColor:e.colorBgTextHover},{color:e.colorText,backgroundColor:e.colorBgTextActive})),$v(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},$v(e)),kc({color:e.colorErrorHover,backgroundColor:e.colorErrorBg},{color:e.colorErrorHover,backgroundColor:e.colorErrorBg}))}),eoe=e=>Object.assign(Object.assign({},pI(e)),{[`&${e.componentCls}:hover`]:Object.assign({},pI(e))}),toe=e=>{const{componentCls:t}=e;return{[`${t}-default`]:_8(e),[`${t}-primary`]:Xie(e),[`${t}-dashed`]:Jie(e),[`${t}-link`]:Qie(e),[`${t}-text`]:Zie(e),[`${t}-disabled`]:eoe(e)}},r1=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:i,iconCls:a,controlHeight:c,fontSize:u,lineHeight:d,lineWidth:p,borderRadius:f,buttonPaddingHorizontal:g}=e,E=Math.max(0,(c-u*d)/2-p),y=g-p,C=`${i}-icon-only`;return[{[`${i}${t}`]:{fontSize:u,height:c,padding:`${E}px ${y}px`,borderRadius:f,[`&${C}`]:{width:c,paddingInlineStart:0,paddingInlineEnd:0,[`&${i}-round`]:{width:"auto"},"> span":{transform:"scale(1.143)"}},[`&${i}-loading`]:{opacity:e.opacityLoading,cursor:"default"},[`${i}-loading-icon`]:{transition:`width ${e.motionDurationSlow} ${e.motionEaseInOut}, opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`},[`&:not(${C}) ${i}-loading-icon > ${a}`]:{marginInlineEnd:e.marginXS}}},{[`${i}${i}-circle${t}`]:Yie(e)},{[`${i}${i}-round${t}`]:qie(e)}]},noe=e=>r1(e),roe=e=>{const t=Qr(e,{controlHeight:e.controlHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:8,borderRadius:e.borderRadiusSM});return r1(t,`${e.componentCls}-sm`)},ioe=e=>{const t=Qr(e,{controlHeight:e.controlHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG});return r1(t,`${e.componentCls}-lg`)},ooe=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},aoe=Uc("Button",e=>{const{controlTmpOutline:t,paddingContentHorizontal:i}=e,a=Qr(e,{colorOutlineDefault:t,buttonPaddingHorizontal:i});return[Kie(a),roe(a),noe(a),ioe(a),ooe(a),toe(a),jie(a),t1(e),Gie(e)]});var soe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function coe(e){if(typeof e=="object"&&e){const t=e==null?void 0:e.delay;return{loading:!1,delay:!Number.isNaN(t)&&typeof t=="number"?t:0}}return{loading:!!e,delay:0}}const loe=(e,t)=>{const{loading:i=!1,prefixCls:a,type:c="default",danger:u,shape:d="default",size:p,disabled:f,className:g,rootClassName:E,children:y,icon:C,ghost:w=!1,block:R=!1,htmlType:O="button"}=e,k=soe(e,["loading","prefixCls","type","danger","shape","size","disabled","className","rootClassName","children","icon","ghost","block","htmlType"]),{getPrefixCls:A,autoInsertSpaceInButton:x,direction:P}=_.useContext(ei),M=A("btn",a),[B,F]=aoe(M),j=_.useContext(Vh),$=_.useContext(T_),ee=f??$,H=_.useContext(v8),J=_.useMemo(()=>coe(i),[i]),[X,W]=_.useState(J.loading),[Z,ne]=_.useState(!1),de=rc(t,_.createRef()),oe=_.Children.count(y)===1&&!C&&!Kb(c);_.useEffect(()=>{let Pe=null;J.delay>0?Pe=setTimeout(()=>{Pe=null,W(!0)},J.delay):W(J.loading);function Ye(){Pe&&(clearTimeout(Pe),Pe=null)}return Ye},[J]),_.useEffect(()=>{if(!de||!de.current||x===!1)return;const Pe=de.current.textContent;oe&&hI(Pe)?Z||ne(!0):Z&&ne(!1)},[de]);const fe=Pe=>{const{onClick:Ye}=e;if(X||ee){Pe.preventDefault();return}Ye==null||Ye(Pe)},ge=x!==!1,{compactSize:ae,compactItemClassnames:se}=g8(M,P),he={large:"lg",small:"sm",middle:void 0},pe=ae||H||p||j,Oe=pe&&he[pe]||"",be=X?"loading":C,Ne=Za(k,["navigate"]),Ae=Ne.href!==void 0&&ee,at=ct(M,F,{[`${M}-${d}`]:d!=="default"&&d,[`${M}-${c}`]:c,[`${M}-${Oe}`]:Oe,[`${M}-icon-only`]:!y&&y!==0&&!!be,[`${M}-background-ghost`]:w&&!Kb(c),[`${M}-loading`]:X,[`${M}-two-chinese-chars`]:Z&&ge&&!X,[`${M}-block`]:R,[`${M}-dangerous`]:!!u,[`${M}-rtl`]:P==="rtl",[`${M}-disabled`]:Ae},se,g,E),it=C&&!X?C:Ot.createElement(Die,{existIcon:!!C,prefixCls:M,loading:!!X}),ze=y||y===0?Fie(y,oe&&ge):null;if(Ne.href!==void 0)return B(Ot.createElement("a",Object.assign({},Ne,{className:at,onClick:fe,ref:de}),it,ze));let ht=Ot.createElement("button",Object.assign({},k,{type:O,className:at,onClick:fe,disabled:ee,ref:de}),it,ze);return Kb(c)||(ht=Ot.createElement(Nie,{disabled:!!X},ht)),B(ht)},i1=_.forwardRef(loe);i1.Group=Mie;i1.__ANT_BUTTON=!0;const Xi=i1,Yb=()=>({height:0,opacity:0}),cV=e=>{const{scrollHeight:t}=e;return{height:t,opacity:1}},uoe=e=>({height:e?e.offsetHeight:0}),qb=(e,t)=>(t==null?void 0:t.deadline)===!0||t.propertyName==="height",doe=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:Yb,onEnterStart:Yb,onAppearActive:cV,onEnterActive:cV,onLeaveStart:uoe,onLeaveActive:Yb,onAppearEnd:qb,onEnterEnd:qb,onLeaveEnd:qb,motionDeadline:500}},hoe=e=>e!==void 0&&(e==="topLeft"||e==="topRight")?"slide-down":"slide-up",S8=(e,t,i)=>i!==void 0?i:`${e}-${t}`,poe=doe;var y8=_.createContext(null),ar=wo()?_.useLayoutEffect:_.useEffect,lV=function(t,i){var a=_.useRef(!0);ar(function(){if(!a.current)return t()},i),ar(function(){return a.current=!1,function(){a.current=!0}},[])},uV=[];function foe(e,t){var i=_.useState(function(){if(!wo())return null;var R=document.createElement("div");return R}),a=we(i,1),c=a[0],u=_.useRef(!1),d=_.useContext(y8),p=_.useState(uV),f=we(p,2),g=f[0],E=f[1],y=d||(u.current?void 0:function(R){E(function(O){var k=[R].concat(Et(O));return k})});function C(){c.parentElement||document.body.appendChild(c),u.current=!0}function w(){var R;(R=c.parentElement)===null||R===void 0||R.removeChild(c),u.current=!1}return ar(function(){return e?d?d(C):C():w(),w},[e]),ar(function(){g.length&&(g.forEach(function(R){return R()}),E(uV))},[g]),[c,y]}var Xb;function moe(e){if(typeof document>"u")return 0;if(e||Xb===void 0){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var i=document.createElement("div"),a=i.style;a.position="absolute",a.top="0",a.left="0",a.pointerEvents="none",a.visibility="hidden",a.width="200px",a.height="150px",a.overflow="hidden",i.appendChild(t),document.body.appendChild(i);var c=t.offsetWidth;i.style.overflow="scroll";var u=t.offsetWidth;c===u&&(u=i.clientWidth),document.body.removeChild(i),Xb=c-u}return Xb}function goe(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var voe="rc-util-locker-".concat(Date.now()),dV=0;function Eoe(e){var t=!!e,i=_.useState(function(){return dV+=1,"".concat(voe,"_").concat(dV)}),a=we(i,1),c=a[0];ar(function(){if(t){var u=moe(),d=goe();wh(`
html body {
  overflow-y: hidden;
  `.concat(d?"width: calc(100% - ".concat(u,"px);"):"",`
}`),c)}else Lv(c);return function(){Lv(c)}},[t,c])}var hV=!1;function _oe(e){return typeof e=="boolean"&&(hV=e),hV}var pV=function(t){return t===!1?!1:!wo()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},C8=_.forwardRef(function(e,t){var i=e.open,a=e.autoLock,c=e.getContainer;e.debug;var u=e.autoDestroy,d=u===void 0?!0:u,p=e.children,f=_.useState(i),g=we(f,2),E=g[0],y=g[1],C=E||i;_.useEffect(function(){(d||i)&&y(i)},[i,d]);var w=_.useState(function(){return pV(c)}),R=we(w,2),O=R[0],k=R[1];_.useEffect(function(){var J=pV(c);k(J??null)});var A=foe(C&&!O),x=we(A,2),P=x[0],M=x[1],B=O??P;Eoe(a&&i&&wo()&&(B===P||B===document.body));var F=null;if(p&&Lh(p)&&t){var j=p;F=j.ref}var $=p_(F,t);if(!C||!wo()||O===void 0)return null;var ee=B===!1||_oe(),H=p;return t&&(H=_.cloneElement(p,{ref:$})),_.createElement(y8.Provider,{value:M},ee?H:wc.createPortal(H,B))});function Soe(){var e=ce({},ov);return e.useId}var fV=0;function yoe(e){var t=_.useState("ssr-id"),i=we(t,2),a=i[0],c=i[1],u=Soe(),d=u==null?void 0:u();return _.useEffect(function(){if(!u){var p=fV;fV+=1,c("rc_unique_".concat(p))}},[]),e||d||a}var Coe=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,boe=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,Toe="".concat(Coe," ").concat(boe).split(/[\s\n]+/),Roe="aria-",Ioe="data-";function mV(e,t){return e.indexOf(t)===0}function Hv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i;t===!1?i={aria:!0,data:!0,attr:!0}:t===!0?i={aria:!0}:i=ce({},t);var a={};return Object.keys(e).forEach(function(c){(i.aria&&(c==="role"||mV(c,Roe))||i.data&&mV(c,Ioe)||i.attr&&Toe.includes(c))&&(a[c]=e[c])}),a}const b8=_.createContext({});var T8=function(t){if(wo()&&window.document.documentElement){var i=Array.isArray(t)?t:[t],a=window.document.documentElement;return i.some(function(c){return c in a.style})}return!1},woe=function(t,i){if(!T8(t))return!1;var a=document.createElement("div"),c=a.style[t];return a.style[t]=i,a.style[t]!==c};function gV(e,t){return!Array.isArray(e)&&t!==void 0?woe(e,t):T8(e)}const Ooe=e=>({animationDuration:e,animationFillMode:"both"}),Aoe=e=>({animationDuration:e,animationFillMode:"both"}),o1=function(e,t,i,a){const u=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${u}${e}-enter,
      ${u}${e}-appear
    `]:Object.assign(Object.assign({},Ooe(a)),{animationPlayState:"paused"}),[`${u}${e}-leave`]:Object.assign(Object.assign({},Aoe(a)),{animationPlayState:"paused"}),[`
      ${u}${e}-enter${e}-enter-active,
      ${u}${e}-appear${e}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${u}${e}-leave${e}-leave-active`]:{animationName:i,animationPlayState:"running",pointerEvents:"none"}}},Noe=new Sr("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),xoe=new Sr("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),Poe=new Sr("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Doe=new Sr("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),koe=new Sr("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Loe=new Sr("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),Moe=new Sr("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Uoe=new Sr("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),Voe={"move-up":{inKeyframes:Moe,outKeyframes:Uoe},"move-down":{inKeyframes:Noe,outKeyframes:xoe},"move-left":{inKeyframes:Poe,outKeyframes:Doe},"move-right":{inKeyframes:koe,outKeyframes:Loe}},vV=(e,t)=>{const{antCls:i}=e,a=`${i}-${t}`,{inKeyframes:c,outKeyframes:u}=Voe[t];return[o1(a,c,u,e.motionDurationMid),{[`
        ${a}-enter,
        ${a}-appear
      `]:{opacity:0,animationTimingFunction:e.motionEaseOutCirc},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},R8=new Sr("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),I8=new Sr("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),w8=new Sr("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),O8=new Sr("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),Foe=new Sr("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),Boe=new Sr("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),joe=new Sr("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),$oe=new Sr("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),Hoe={"slide-up":{inKeyframes:R8,outKeyframes:I8},"slide-down":{inKeyframes:w8,outKeyframes:O8},"slide-left":{inKeyframes:Foe,outKeyframes:Boe},"slide-right":{inKeyframes:joe,outKeyframes:$oe}},Wv=(e,t)=>{const{antCls:i}=e,a=`${i}-${t}`,{inKeyframes:c,outKeyframes:u}=Hoe[t];return[o1(a,c,u,e.motionDurationMid),{[`
      ${a}-enter,
      ${a}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,["&-prepare"]:{transform:"scale(1)"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]},Woe=new Sr("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),zoe=new Sr("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),EV=new Sr("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),_V=new Sr("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),Goe=new Sr("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),Koe=new Sr("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),Yoe=new Sr("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),qoe=new Sr("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),Xoe=new Sr("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),Joe=new Sr("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),Qoe=new Sr("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),Zoe=new Sr("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),eae={zoom:{inKeyframes:Woe,outKeyframes:zoe},"zoom-big":{inKeyframes:EV,outKeyframes:_V},"zoom-big-fast":{inKeyframes:EV,outKeyframes:_V},"zoom-left":{inKeyframes:Yoe,outKeyframes:qoe},"zoom-right":{inKeyframes:Xoe,outKeyframes:Joe},"zoom-up":{inKeyframes:Goe,outKeyframes:Koe},"zoom-down":{inKeyframes:Qoe,outKeyframes:Zoe}},A8=(e,t)=>{const{antCls:i}=e,a=`${i}-${t}`,{inKeyframes:c,outKeyframes:u}=eae[t];return[o1(a,c,u,t==="zoom-big-fast"?e.motionDurationFast:e.motionDurationMid),{[`
        ${a}-enter,
        ${a}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},tae=e=>({[e.componentCls]:{[`${e.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}},[`${e.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}}}),nae=tae;function Jb(e){return e!==void 0}function Ka(e,t){var i=t||{},a=i.defaultValue,c=i.value,u=i.onChange,d=i.postState,p=xu(function(){return Jb(c)?c:Jb(a)?typeof a=="function"?a():a:typeof e=="function"?e():e}),f=we(p,2),g=f[0],E=f[1],y=c!==void 0?c:g,C=d?d(y):y,w=Ts(u),R=xu([y]),O=we(R,2),k=O[0],A=O[1];lV(function(){var P=k[0];g!==P&&w(g,P)},[k]),lV(function(){Jb(c)||E(c)},[c]);var x=Ts(function(P,M){E(P,M),A([y],M)});return[C,x]}const a1=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var N8=_.createContext(null);function rae(){return _.useContext(N8)}function iae(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,t=_.useState(!1),i=we(t,2),a=i[0],c=i[1],u=_.useRef(null),d=function(){window.clearTimeout(u.current)};_.useEffect(function(){return d},[]);var p=function(g,E){d(),u.current=window.setTimeout(function(){c(g),E&&E()},e)};return[a,p,d]}function x8(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,t=_.useRef(null),i=_.useRef(null);_.useEffect(function(){return function(){window.clearTimeout(i.current)}},[]);function a(c){(c||t.current===null)&&(t.current=c),window.clearTimeout(i.current),i.current=window.setTimeout(function(){t.current=null},e)}return[function(){return t.current},a]}function oae(e,t,i,a){var c=_.useRef(null);c.current={open:t,triggerOpen:i,customizedTrigger:a},_.useEffect(function(){function u(d){var p;if(!((p=c.current)!==null&&p!==void 0&&p.customizedTrigger)){var f=d.target;f.shadowRoot&&d.composed&&(f=d.composedPath()[0]||f),c.current.open&&e().filter(function(g){return g}).every(function(g){return!g.contains(f)&&g!==f})&&c.current.triggerOpen(!1)}}return window.addEventListener("mousedown",u),function(){return window.removeEventListener("mousedown",u)}},[])}var aae=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Md=void 0;function sae(e,t){var i=e.prefixCls,a=e.invalidate,c=e.item,u=e.renderItem,d=e.responsive,p=e.responsiveDisabled,f=e.registerSize,g=e.itemKey,E=e.className,y=e.style,C=e.children,w=e.display,R=e.order,O=e.component,k=O===void 0?"div":O,A=mn(e,aae),x=d&&!w;function P($){f(g,$)}_.useEffect(function(){return function(){P(null)}},[]);var M=u&&c!==Md?u(c):C,B;a||(B={opacity:x?0:1,height:x?0:Md,overflowY:x?"hidden":Md,order:d?R:Md,pointerEvents:x?"none":Md,position:x?"absolute":Md});var F={};x&&(F["aria-hidden"]=!0);var j=_.createElement(k,He({className:ct(!a&&i,E),style:ce(ce({},B),y)},F,A,{ref:t}),M);return d&&(j=_.createElement(Bl,{onResize:function(ee){var H=ee.offsetWidth;P(H)},disabled:p},j)),j}var _f=_.forwardRef(sae);_f.displayName="Item";function cae(e){if(typeof MessageChannel>"u")_r(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}function lae(){var e=_.useRef(null),t=function(a){e.current||(e.current=[],cae(function(){wc.unstable_batchedUpdates(function(){e.current.forEach(function(c){c()}),e.current=null})})),e.current.push(a)};return t}function jp(e,t){var i=_.useState(t),a=we(i,2),c=a[0],u=a[1],d=Ts(function(p){e(function(){u(p)})});return[c,d]}var uae=["component"],dae=["className"],hae=["className"],pae=function(t,i){var a=_.useContext(zv);if(!a){var c=t.component,u=c===void 0?"div":c,d=mn(t,uae);return _.createElement(u,He({},d,{ref:i}))}var p=a.className,f=mn(a,dae),g=t.className,E=mn(t,hae);return _.createElement(zv.Provider,{value:null},_.createElement(_f,He({ref:i,className:ct(p,g)},f,E)))},P8=_.forwardRef(pae);P8.displayName="RawItem";var fae=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],zv=_.createContext(null),D8="responsive",k8="invalidate";function mae(e){return"+ ".concat(e.length," ...")}function gae(e,t){var i=e.prefixCls,a=i===void 0?"rc-overflow":i,c=e.data,u=c===void 0?[]:c,d=e.renderItem,p=e.renderRawItem,f=e.itemKey,g=e.itemWidth,E=g===void 0?10:g,y=e.ssr,C=e.style,w=e.className,R=e.maxCount,O=e.renderRest,k=e.renderRawRest,A=e.suffix,x=e.component,P=x===void 0?"div":x,M=e.itemComponent,B=e.onVisibleChange,F=mn(e,fae),j=y==="full",$=lae(),ee=jp($,null),H=we(ee,2),J=H[0],X=H[1],W=J||0,Z=jp($,new Map),ne=we(Z,2),ie=ne[0],de=ne[1],oe=jp($,0),fe=we(oe,2),ge=fe[0],ae=fe[1],se=jp($,0),he=we(se,2),pe=he[0],Oe=he[1],be=jp($,0),Ne=we(be,2),Ae=Ne[0],at=Ne[1],it=_.useState(null),ze=we(it,2),ht=ze[0],Pe=ze[1],Ye=_.useState(null),lt=we(Ye,2),At=lt[0],_t=lt[1],Be=_.useMemo(function(){return At===null&&j?Number.MAX_SAFE_INTEGER:At||0},[At,J]),$e=_.useState(!1),ke=we($e,2),et=ke[0],ft=ke[1],Rt="".concat(a,"-item"),on=Math.max(ge,pe),dn=R===D8,jt=u.length&&dn,zt=R===k8,Mn=jt||typeof R=="number"&&u.length>R,_n=_.useMemo(function(){var je=u;return jt?J===null&&j?je=u:je=u.slice(0,Math.min(u.length,W/E)):typeof R=="number"&&(je=u.slice(0,R)),je},[u,E,J,R,jt]),Lt=_.useMemo(function(){return jt?u.slice(Be+1):u.slice(_n.length)},[u,_n,jt,Be]),xt=_.useCallback(function(je,Qe){var Ue;return typeof f=="function"?f(je):(Ue=f&&(je==null?void 0:je[f]))!==null&&Ue!==void 0?Ue:Qe},[f]),en=_.useCallback(d||function(je){return je},[d]);function st(je,Qe,Ue){At===je&&(Qe===void 0||Qe===ht)||(_t(je),Ue||(ft(je<u.length-1),B==null||B(je)),Qe!==void 0&&Pe(Qe))}function mt(je,Qe){X(Qe.clientWidth)}function $t(je,Qe){de(function(Ue){var yt=new Map(Ue);return Qe===null?yt.delete(je):yt.set(je,Qe),yt})}function yr(je,Qe){Oe(Qe),ae(pe)}function Rn(je,Qe){at(Qe)}function fr(je){return ie.get(xt(_n[je],je))}ar(function(){if(W&&typeof on=="number"&&_n){var je=Ae,Qe=_n.length,Ue=Qe-1;if(!Qe){st(0,null);return}for(var yt=0;yt<Qe;yt+=1){var Ut=fr(yt);if(j&&(Ut=Ut||0),Ut===void 0){st(yt-1,void 0,!0);break}if(je+=Ut,Ue===0&&je<=W||yt===Ue-1&&je+fr(Ue)<=W){st(Ue,null);break}else if(je+on>W){st(yt-1,je-Ut-Ae+pe);break}}A&&fr(0)+Ae>W&&Pe(null)}},[W,ie,pe,Ae,xt,_n]);var kn=et&&!!Lt.length,tt={};ht!==null&&jt&&(tt={position:"absolute",left:ht,top:0});var gt={prefixCls:Rt,responsive:jt,component:M,invalidate:zt},gn=p?function(je,Qe){var Ue=xt(je,Qe);return _.createElement(zv.Provider,{key:Ue,value:ce(ce({},gt),{},{order:Qe,item:je,itemKey:Ue,registerSize:$t,display:Qe<=Be})},p(je,Qe))}:function(je,Qe){var Ue=xt(je,Qe);return _.createElement(_f,He({},gt,{order:Qe,key:Ue,item:je,renderItem:en,itemKey:Ue,registerSize:$t,display:Qe<=Be}))},Mt,Dr={order:kn?Be:Number.MAX_SAFE_INTEGER,className:"".concat(Rt,"-rest"),registerSize:yr,display:kn};if(k)k&&(Mt=_.createElement(zv.Provider,{value:ce(ce({},gt),Dr)},k(Lt)));else{var mr=O||mae;Mt=_.createElement(_f,He({},gt,Dr),typeof mr=="function"?mr(Lt):mr)}var Ln=_.createElement(P,He({className:ct(!zt&&a,w),style:C,ref:t},F),_n.map(gn),Mn?Mt:null,A&&_.createElement(_f,He({},gt,{responsive:dn,responsiveDisabled:!jt,order:Be,className:"".concat(Rt,"-suffix"),registerSize:Rn,display:!0,style:tt}),A));return dn&&(Ln=_.createElement(Bl,{onResize:mt,disabled:!jt},Ln)),Ln}var nc=_.forwardRef(gae);nc.displayName="Overflow";nc.Item=P8;nc.RESPONSIVE=D8;nc.INVALIDATE=k8;var Gv=function(t){var i=t.className,a=t.customizeIcon,c=t.customizeIconProps,u=t.onMouseDown,d=t.onClick,p=t.children,f;return typeof a=="function"?f=a(c):f=a,_.createElement("span",{className:i,onMouseDown:function(E){E.preventDefault(),u&&u(E)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:d,"aria-hidden":!0},f!==void 0?f:_.createElement("span",{className:ct(i.split(/\s+/).map(function(g){return"".concat(g,"-icon")}))},p))},vae=function(t,i){var a,c,u=t.prefixCls,d=t.id,p=t.inputElement,f=t.disabled,g=t.tabIndex,E=t.autoFocus,y=t.autoComplete,C=t.editable,w=t.activeDescendantId,R=t.value,O=t.maxLength,k=t.onKeyDown,A=t.onMouseDown,x=t.onChange,P=t.onPaste,M=t.onCompositionStart,B=t.onCompositionEnd,F=t.open,j=t.attrs,$=p||_.createElement("input",null),ee=$,H=ee.ref,J=ee.props,X=J.onKeyDown,W=J.onChange,Z=J.onMouseDown,ne=J.onCompositionStart,ie=J.onCompositionEnd,de=J.style;return"maxLength"in $.props,$=_.cloneElement($,ce(ce(ce({type:"search"},J),{},{id:d,ref:rc(i,H),disabled:f,tabIndex:g,autoComplete:y||"off",autoFocus:E,className:ct("".concat(u,"-selection-search-input"),(a=$)===null||a===void 0||(c=a.props)===null||c===void 0?void 0:c.className),role:"combobox","aria-expanded":F,"aria-haspopup":"listbox","aria-owns":"".concat(d,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(d,"_list"),"aria-activedescendant":w},j),{},{value:C?R:"",maxLength:O,readOnly:!C,unselectable:C?null:"on",style:ce(ce({},de),{},{opacity:C?null:0}),onKeyDown:function(fe){k(fe),X&&X(fe)},onMouseDown:function(fe){A(fe),Z&&Z(fe)},onChange:function(fe){x(fe),W&&W(fe)},onCompositionStart:function(fe){M(fe),ne&&ne(fe)},onCompositionEnd:function(fe){B(fe),ie&&ie(fe)},onPaste:P})),$},s1=_.forwardRef(vae);s1.displayName="Input";function L8(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}var Eae=typeof window<"u"&&window.document&&window.document.documentElement,_ae=Eae;function Sae(e){return e!=null}function SV(e){return["string","number"].includes(An(e))}function M8(e){var t=void 0;return e&&(SV(e.title)?t=e.title.toString():SV(e.label)&&(t=e.label.toString())),t}function yae(e,t){_ae?_.useLayoutEffect(e,t):_.useEffect(e,t)}function Cae(e){var t;return(t=e.key)!==null&&t!==void 0?t:e.value}var yV=function(t){t.preventDefault(),t.stopPropagation()},bae=function(t){var i=t.id,a=t.prefixCls,c=t.values,u=t.open,d=t.searchValue,p=t.autoClearSearchValue,f=t.inputRef,g=t.placeholder,E=t.disabled,y=t.mode,C=t.showSearch,w=t.autoFocus,R=t.autoComplete,O=t.activeDescendantId,k=t.tabIndex,A=t.removeIcon,x=t.maxTagCount,P=t.maxTagTextLength,M=t.maxTagPlaceholder,B=M===void 0?function(Pe){return"+ ".concat(Pe.length," ...")}:M,F=t.tagRender,j=t.onToggleOpen,$=t.onRemove,ee=t.onInputChange,H=t.onInputPaste,J=t.onInputKeyDown,X=t.onInputMouseDown,W=t.onInputCompositionStart,Z=t.onInputCompositionEnd,ne=_.useRef(null),ie=_.useState(0),de=we(ie,2),oe=de[0],fe=de[1],ge=_.useState(!1),ae=we(ge,2),se=ae[0],he=ae[1],pe="".concat(a,"-selection"),Oe=u||y==="multiple"&&p===!1||y==="tags"?d:"",be=y==="tags"||y==="multiple"&&p===!1||C&&(u||se);yae(function(){fe(ne.current.scrollWidth)},[Oe]);function Ne(Pe,Ye,lt,At,_t){return _.createElement("span",{className:ct("".concat(pe,"-item"),Ie({},"".concat(pe,"-item-disabled"),lt)),title:M8(Pe)},_.createElement("span",{className:"".concat(pe,"-item-content")},Ye),At&&_.createElement(Gv,{className:"".concat(pe,"-item-remove"),onMouseDown:yV,onClick:_t,customizeIcon:A},"Ã"))}function Ae(Pe,Ye,lt,At,_t){var Be=function(ke){yV(ke),j(!u)};return _.createElement("span",{onMouseDown:Be},F({label:Ye,value:Pe,disabled:lt,closable:At,onClose:_t}))}function at(Pe){var Ye=Pe.disabled,lt=Pe.label,At=Pe.value,_t=!E&&!Ye,Be=lt;if(typeof P=="number"&&(typeof lt=="string"||typeof lt=="number")){var $e=String(Be);$e.length>P&&(Be="".concat($e.slice(0,P),"..."))}var ke=function(ft){ft&&ft.stopPropagation(),$(Pe)};return typeof F=="function"?Ae(At,Be,Ye,_t,ke):Ne(Pe,Be,Ye,_t,ke)}function it(Pe){var Ye=typeof B=="function"?B(Pe):B;return Ne({title:Ye},Ye,!1)}var ze=_.createElement("div",{className:"".concat(pe,"-search"),style:{width:oe},onFocus:function(){he(!0)},onBlur:function(){he(!1)}},_.createElement(s1,{ref:f,open:u,prefixCls:a,id:i,inputElement:null,disabled:E,autoFocus:w,autoComplete:R,editable:be,activeDescendantId:O,value:Oe,onKeyDown:J,onMouseDown:X,onChange:ee,onPaste:H,onCompositionStart:W,onCompositionEnd:Z,tabIndex:k,attrs:Hv(t,!0)}),_.createElement("span",{ref:ne,className:"".concat(pe,"-search-mirror"),"aria-hidden":!0},Oe,"Â ")),ht=_.createElement(nc,{prefixCls:"".concat(pe,"-overflow"),data:c,renderItem:at,renderRest:it,suffix:ze,itemKey:Cae,maxCount:x});return _.createElement(_.Fragment,null,ht,!c.length&&!Oe&&_.createElement("span",{className:"".concat(pe,"-placeholder")},g))},Tae=function(t){var i=t.inputElement,a=t.prefixCls,c=t.id,u=t.inputRef,d=t.disabled,p=t.autoFocus,f=t.autoComplete,g=t.activeDescendantId,E=t.mode,y=t.open,C=t.values,w=t.placeholder,R=t.tabIndex,O=t.showSearch,k=t.searchValue,A=t.activeValue,x=t.maxLength,P=t.onInputKeyDown,M=t.onInputMouseDown,B=t.onInputChange,F=t.onInputPaste,j=t.onInputCompositionStart,$=t.onInputCompositionEnd,ee=t.title,H=_.useState(!1),J=we(H,2),X=J[0],W=J[1],Z=E==="combobox",ne=Z||O,ie=C[0],de=k||"";Z&&A&&!X&&(de=A),_.useEffect(function(){Z&&W(!1)},[Z,A]);var oe=E!=="combobox"&&!y&&!O?!1:!!de,fe=ee===void 0?M8(ie):ee,ge=function(){if(ie)return null;var se=oe?{visibility:"hidden"}:void 0;return _.createElement("span",{className:"".concat(a,"-selection-placeholder"),style:se},w)};return _.createElement(_.Fragment,null,_.createElement("span",{className:"".concat(a,"-selection-search")},_.createElement(s1,{ref:u,prefixCls:a,id:c,open:y,inputElement:i,disabled:d,autoFocus:p,autoComplete:f,editable:ne,activeDescendantId:g,value:de,onKeyDown:P,onMouseDown:M,onChange:function(se){W(!0),B(se)},onPaste:F,onCompositionStart:j,onCompositionEnd:$,tabIndex:R,attrs:Hv(t,!0),maxLength:Z?x:void 0})),!Z&&ie?_.createElement("span",{className:"".concat(a,"-selection-item"),title:fe,style:oe?{visibility:"hidden"}:void 0},ie.label):null,ge())};function Rae(e){return![Ve.ESC,Ve.SHIFT,Ve.BACKSPACE,Ve.TAB,Ve.WIN_KEY,Ve.ALT,Ve.META,Ve.WIN_KEY_RIGHT,Ve.CTRL,Ve.SEMICOLON,Ve.EQUALS,Ve.CAPS_LOCK,Ve.CONTEXT_MENU,Ve.F1,Ve.F2,Ve.F3,Ve.F4,Ve.F5,Ve.F6,Ve.F7,Ve.F8,Ve.F9,Ve.F10,Ve.F11,Ve.F12].includes(e)}var Iae=function(t,i){var a=_.useRef(null),c=_.useRef(!1),u=t.prefixCls,d=t.open,p=t.mode,f=t.showSearch,g=t.tokenWithEnter,E=t.autoClearSearchValue,y=t.onSearch,C=t.onSearchSubmit,w=t.onToggleOpen,R=t.onInputKeyDown,O=t.domRef;_.useImperativeHandle(i,function(){return{focus:function(){a.current.focus()},blur:function(){a.current.blur()}}});var k=x8(0),A=we(k,2),x=A[0],P=A[1],M=function(de){var oe=de.which;(oe===Ve.UP||oe===Ve.DOWN)&&de.preventDefault(),R&&R(de),oe===Ve.ENTER&&p==="tags"&&!c.current&&!d&&(C==null||C(de.target.value)),Rae(oe)&&w(!0)},B=function(){P(!0)},F=_.useRef(null),j=function(de){y(de,!0,c.current)!==!1&&w(!0)},$=function(){c.current=!0},ee=function(de){c.current=!1,p!=="combobox"&&j(de.target.value)},H=function(de){var oe=de.target.value;if(g&&F.current&&/[\r\n]/.test(F.current)){var fe=F.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");oe=oe.replace(fe,F.current)}F.current=null,j(oe)},J=function(de){var oe=de.clipboardData,fe=oe.getData("text");F.current=fe},X=function(de){var oe=de.target;if(oe!==a.current){var fe=document.body.style.msTouchAction!==void 0;fe?setTimeout(function(){a.current.focus()}):a.current.focus()}},W=function(de){var oe=x();de.target!==a.current&&!oe&&p!=="combobox"&&de.preventDefault(),(p!=="combobox"&&(!f||!oe)||!d)&&(d&&E!==!1&&y("",!0,!1),w())},Z={inputRef:a,onInputKeyDown:M,onInputMouseDown:B,onInputChange:H,onInputPaste:J,onInputCompositionStart:$,onInputCompositionEnd:ee},ne=p==="multiple"||p==="tags"?_.createElement(bae,He({},t,Z)):_.createElement(Tae,He({},t,Z));return _.createElement("div",{ref:O,className:"".concat(u,"-selector"),onClick:X,onMouseDown:W},ne)},U8=_.forwardRef(Iae);U8.displayName="Selector";var CV=_.createContext(null);function bV(e){return e?Array.isArray(e)?e:[e]:[]}function wae(e,t,i,a){return _.useMemo(function(){var c=bV(i??t),u=bV(a??t),d=new Set(c),p=new Set(u);return e&&(d.has("hover")&&(d.delete("hover"),d.add("click")),p.has("hover")&&(p.delete("hover"),p.add("click"))),[d,p]},[e,t,i,a])}function Oae(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return i?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function Aae(e,t,i,a){for(var c=i.points,u=Object.keys(e),d=0;d<u.length;d+=1){var p,f=u[d];if(Oae((p=e[f])===null||p===void 0?void 0:p.points,c,a))return"".concat(t,"-placement-").concat(f)}return""}function TV(e,t,i,a){return t||(i?{motionName:"".concat(e,"-").concat(i)}:a?{motionName:a}:null)}function am(e){return e.ownerDocument.defaultView}function fI(e){for(var t=[],i=e==null?void 0:e.parentElement,a=["hidden","scroll","auto"];i;){var c=am(i).getComputedStyle(i),u=c.overflowX,d=c.overflowY;(a.includes(u)||a.includes(d))&&t.push(i),i=i.parentElement}return t}function Kv(e){return Number.isNaN(e)?1:e}function Nae(e,t){var i=ce({},e);return(t||[]).forEach(function(a){if(!(a instanceof HTMLBodyElement)){var c=am(a).getComputedStyle(a),u=c.position;if(u!=="static"){var d=a.getBoundingClientRect(),p=a.offsetHeight,f=a.clientHeight,g=a.offsetWidth,E=a.clientWidth,y=Kv(Math.round(d.width/g*1e3)/1e3),C=Kv(Math.round(d.height/p*1e3)/1e3),w=(g-E)*y,R=(p-f)*C,O=d.x+d.width-w,k=d.y+d.height-R;i.left=Math.max(i.left,d.x),i.top=Math.max(i.top,d.y),i.right=Math.min(i.right,O),i.bottom=Math.min(i.bottom,k)}}}),i}function RV(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function Ud(e,t){var i=t[0],a=t[1],c,u;return i==="t"?u=e.y:i==="b"?u=e.y+e.height:u=e.y+e.height/2,a==="l"?c=e.x:a==="r"?c=e.x+e.width:c=e.x+e.width/2,{x:c,y:u}}function dl(e,t){var i={t:"b",b:"t",l:"r",r:"l"};return e.map(function(a,c){return c===t?i[a]||"c":a}).join("")}function xae(e,t,i,a,c,u,d){var p=_.useState({ready:!1,offsetX:0,offsetY:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:c[a]||{}}),f=we(p,2),g=f[0],E=f[1],y=_.useRef(0),C=_.useMemo(function(){return t?fI(t):[]},[t]),w=_.useRef({}),R=function(){w.current={}};e||R();var O=Ts(function(){if(t&&i&&e){let ro=function(Xn,So){var oa=H.x+Xn,rs=H.y+So,oc=oa+se,ac=rs+ae,is=Math.max(oa,Oe.left),os=Math.max(rs,Oe.top),vt=Math.min(oc,Oe.right),ot=Math.min(ac,Oe.bottom);return Math.max(0,(vt-is)*(ot-os))},ns=function(){Dr=H.y+en,mr=Dr+ae,Ln=H.x+xt,je=Ln+se};var Lo=ro,ti=ns,x=t,P=x.style.left,M=x.style.top,B=x.ownerDocument,F=am(x),j=ce(ce({},c[a]),u);x.style.left="0",x.style.top="0";var $;if(Array.isArray(i))$={x:i[0],y:i[1],width:0,height:0};else{var ee=i.getBoundingClientRect();$={x:ee.x,y:ee.y,width:ee.width,height:ee.height}}var H=x.getBoundingClientRect(),J=F.getComputedStyle(x),X=J.width,W=J.height,Z=B.documentElement,ne=Z.clientWidth,ie=Z.clientHeight,de=Z.scrollWidth,oe=Z.scrollHeight,fe=Z.scrollTop,ge=Z.scrollLeft,ae=H.height,se=H.width,he=$.height,pe=$.width,Oe=j.htmlRegion==="scroll"?{left:-ge,top:-fe,right:de-ge,bottom:oe-fe}:{left:0,top:0,right:ne,bottom:ie};Oe=Nae(Oe,C),x.style.left=P,x.style.top=M;var be=Kv(Math.round(se/parseFloat(X)*1e3)/1e3),Ne=Kv(Math.round(ae/parseFloat(W)*1e3)/1e3);if(be===0||Ne===0||Pv(i)&&!O_(i))return;var Ae=j.offset,at=j.targetOffset,it=Ae||[],ze=we(it,2),ht=ze[0],Pe=ht===void 0?0:ht,Ye=ze[1],lt=Ye===void 0?0:Ye,At=at||[],_t=we(At,2),Be=_t[0],$e=Be===void 0?0:Be,ke=_t[1],et=ke===void 0?0:ke;$.x+=$e,$.y+=et;var ft=j.points||[],Rt=we(ft,2),on=Rt[0],dn=Rt[1],jt=RV(dn),zt=RV(on),Mn=Ud($,jt),_n=Ud(H,zt),Lt=ce({},j),xt=Mn.x-_n.x+Pe,en=Mn.y-_n.y+lt,st=ro(xt,en),mt=Ud($,["t","l"]),$t=Ud(H,["t","l"]),yr=Ud($,["b","r"]),Rn=Ud(H,["b","r"]),fr=j.overflow||{},kn=fr.adjustX,tt=fr.adjustY,gt=fr.shiftX,gn=fr.shiftY,Mt=function(So){return typeof So=="boolean"?So:So>=0},Dr,mr,Ln,je;ns();var Qe=Mt(tt),Ue=zt[0]===jt[0];if(Qe&&zt[0]==="t"&&(mr>Oe.bottom||w.current.bt)){var yt=en;Ue?yt-=ae-he:yt=mt.y-Rn.y-lt,ro(xt,yt)>=st?(w.current.bt=!0,en=yt,Lt.points=[dl(zt,0),dl(jt,0)]):w.current.bt=!1}if(Qe&&zt[0]==="b"&&(Dr<Oe.top||w.current.tb)){var Ut=en;Ue?Ut+=ae-he:Ut=yr.y-$t.y-lt,ro(xt,Ut)>=st?(w.current.tb=!0,en=Ut,Lt.points=[dl(zt,0),dl(jt,0)]):w.current.tb=!1}var Dt=Mt(kn),sr=zt[1]===jt[1];if(Dt&&zt[1]==="l"&&(je>Oe.right||w.current.rl)){var zn=xt;sr?zn-=se-pe:zn=mt.x-Rn.x-Pe,ro(zn,en)>=st?(w.current.rl=!0,xt=zn,Lt.points=[dl(zt,1),dl(jt,1)]):w.current.rl=!1}if(Dt&&zt[1]==="r"&&(Ln<Oe.left||w.current.lr)){var Xr=xt;sr?Xr+=se-pe:Xr=yr.x-$t.x-Pe,ro(Xr,en)>=st?(w.current.lr=!0,xt=Xr,Lt.points=[dl(zt,1),dl(jt,1)]):w.current.lr=!1}ns();var Fn=gt===!0?0:gt;typeof Fn=="number"&&(Ln<Oe.left&&(xt-=Ln-Oe.left,$.x+pe<Oe.left+Fn&&(xt+=$.x-Oe.left+pe-Fn)),je>Oe.right&&(xt-=je-Oe.right,$.x>Oe.right-Fn&&(xt+=$.x-Oe.right+Fn)));var cr=gn===!0?0:gn;typeof cr=="number"&&(Dr<Oe.top&&(en-=Dr-Oe.top,$.y+he<Oe.top+cr&&(en+=$.y-Oe.top+he-cr)),mr>Oe.bottom&&(en-=mr-Oe.bottom,$.y>Oe.bottom-cr&&(en+=$.y-Oe.bottom+cr)));var Eo=H.x+xt,bi=Eo+se,ta=H.y+en,_o=ta+ae,Hn=$.x,na=Hn+pe,Ps=$.y,ji=Ps+he,Do=Math.max(Eo,Hn),ts=Math.min(bi,na),Ds=(Do+ts)/2,ko=Ds-Eo,ra=Math.max(ta,Ps),ic=Math.min(_o,ji),ks=(ra+ic)/2,ia=ks-ta;d==null||d(t,Lt),E({ready:!0,offsetX:xt/be,offsetY:en/Ne,arrowX:ko/be,arrowY:ia/Ne,scaleX:be,scaleY:Ne,align:Lt})}}),k=function(){y.current+=1;var P=y.current;Promise.resolve().then(function(){y.current===P&&O()})},A=function(){E(function(P){return ce(ce({},P),{},{ready:!1})})};return ar(A,[a]),ar(function(){e||A()},[e]),[g.ready,g.offsetX,g.offsetY,g.arrowX,g.arrowY,g.scaleX,g.scaleY,g.align,k]}function Pae(e,t,i,a){ar(function(){if(e&&t&&i){let y=function(){a()};var E=y,c=t,u=i,d=fI(c),p=fI(u),f=am(u),g=new Set([f].concat(Et(d),Et(p)));return g.forEach(function(C){C.addEventListener("scroll",y,{passive:!0})}),f.addEventListener("resize",y,{passive:!0}),a(),function(){g.forEach(function(C){C.removeEventListener("scroll",y),f.removeEventListener("resize",y)})}}},[e,t,i])}function Dae(e){var t=e.prefixCls,i=e.align,a=e.arrow,c=a||{},u=c.x,d=u===void 0?0:u,p=c.y,f=p===void 0?0:p,g=c.className,E=_.useRef();if(!i||!i.points)return null;var y={position:"absolute"};if(i.autoArrow!==!1){var C=i.points[0],w=i.points[1],R=C[0],O=C[1],k=w[0],A=w[1];R===k||!["t","b"].includes(R)?y.top=f:R==="t"?y.top=0:y.bottom=0,O===A||!["l","r"].includes(O)?y.left=d:O==="l"?y.left=0:y.right=0}return _.createElement("div",{ref:E,className:ct("".concat(t,"-arrow"),g),style:y})}function kae(e){var t=e.prefixCls,i=e.open,a=e.zIndex,c=e.mask,u=e.motion;return c?React.createElement(Vc,He({},u,{motionAppear:!0,visible:i,removeOnLeave:!0}),function(d){var p=d.className;return React.createElement("div",{style:{zIndex:a},className:ct("".concat(t,"-mask"),p)})}):null}var Lae=_.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),Mae=_.forwardRef(function(e,t){var i=e.popup,a=e.className,c=e.prefixCls,u=e.style,d=e.target,p=e.onVisibleChanged,f=e.open,g=e.keepDom,E=e.onClick,y=e.mask,C=e.arrow,w=e.align,R=e.motion,O=e.maskMotion,k=e.forceRender,A=e.getPopupContainer,x=e.autoDestroy,P=e.portal,M=e.zIndex,B=e.onMouseEnter,F=e.onMouseLeave,j=e.ready,$=e.offsetX,ee=e.offsetY,H=e.onAlign,J=e.onPrepare,X=e.stretch,W=e.targetWidth,Z=e.targetHeight,ne=typeof i=="function"?i():i,ie=f||g,de=(A==null?void 0:A.length)>0,oe=_.useState(!A||!de),fe=we(oe,2),ge=fe[0],ae=fe[1];if(ar(function(){!ge&&de&&d&&ae(!0)},[ge,de,d]),!ge)return null;var se=j||!f?{left:$,top:ee}:{left:"-1000vw",top:"-1000vh"},he={};return X&&(X.includes("height")&&Z?he.height=Z:X.includes("minHeight")&&Z&&(he.minHeight=Z),X.includes("width")&&W?he.width=W:X.includes("minWidth")&&W&&(he.minWidth=W)),f||(he.pointerEvents="none"),_.createElement(P,{open:k||ie,getContainer:A&&function(){return A(d)},autoDestroy:x},_.createElement(kae,{prefixCls:c,open:f,zIndex:M,mask:y,motion:O}),_.createElement(Bl,{onResize:H,disabled:!f},function(pe){return _.createElement(Vc,He({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:k,leavedClassName:"".concat(c,"-hidden")},R,{onAppearPrepare:J,onEnterPrepare:J,visible:f,onVisibleChanged:function(be){var Ne;R==null||(Ne=R.onVisibleChanged)===null||Ne===void 0||Ne.call(R,be),p(be)}}),function(Oe,be){var Ne=Oe.className,Ae=Oe.style,at=ct(c,Ne,a);return _.createElement("div",{ref:rc(pe,t,be),className:at,style:ce(ce(ce(ce({},se),he),Ae),{},{boxSizing:"border-box",zIndex:M},u),onMouseEnter:B,onMouseLeave:F,onClick:E},C&&_.createElement(Dae,{prefixCls:c,arrow:C,align:w}),_.createElement(Lae,{cache:!f},ne))})}))}),Uae=_.forwardRef(function(e,t){var i=e.children,a=e.getTriggerDOMNode,c=Lh(i),u=_.useCallback(function(p){Bw(t,a?a(p):p)},[a]),d=p_(u,i.ref);return c?_.cloneElement(i,{ref:d}):i}),Vae=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function Fae(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C8,t=_.forwardRef(function(i,a){var c=i.prefixCls,u=c===void 0?"rc-trigger-popup":c,d=i.children,p=i.action,f=p===void 0?"hover":p,g=i.showAction,E=i.hideAction,y=i.popupVisible,C=i.defaultPopupVisible,w=i.onPopupVisibleChange,R=i.afterPopupVisibleChange,O=i.mouseEnterDelay,k=i.mouseLeaveDelay,A=k===void 0?.1:k,x=i.focusDelay,P=i.blurDelay,M=i.mask,B=i.maskClosable,F=B===void 0?!0:B,j=i.getPopupContainer,$=i.forceRender,ee=i.autoDestroy,H=i.destroyPopupOnHide,J=i.popup,X=i.popupClassName,W=i.popupStyle,Z=i.popupPlacement,ne=i.builtinPlacements,ie=ne===void 0?{}:ne,de=i.popupAlign,oe=i.zIndex,fe=i.stretch,ge=i.getPopupClassNameFromAlign,ae=i.alignPoint,se=i.onPopupClick,he=i.onPopupAlign,pe=i.arrow,Oe=i.popupMotion,be=i.maskMotion,Ne=i.popupTransitionName,Ae=i.popupAnimation,at=i.maskTransitionName,it=i.maskAnimation,ze=i.className,ht=i.getTriggerDOMNode,Pe=mn(i,Vae),Ye=ee||H||!1,lt=_.useState(!1),At=we(lt,2),_t=At[0],Be=At[1];ar(function(){Be(a1())},[]);var $e=_.useRef({}),ke=_.useContext(CV),et=_.useMemo(function(){return{registerSubPopup:function(Qt,Gn){$e.current[Qt]=Gn,ke==null||ke.registerSubPopup(Qt,Gn)}}},[ke]),ft=yoe(),Rt=_.useState(null),on=we(Rt,2),dn=on[0],jt=on[1],zt=Ts(function(Pt){Pv(Pt)&&dn!==Pt&&jt(Pt),ke==null||ke.registerSubPopup(ft,Pt)}),Mn=_.useState(null),_n=we(Mn,2),Lt=_n[0],xt=_n[1],en=Ts(function(Pt){Pv(Pt)&&Lt!==Pt&&xt(Pt)}),st=_.Children.only(d),mt=(st==null?void 0:st.props)||{},$t={},yr=Ts(function(Pt){var Qt,Gn,lr=Lt;return(lr==null?void 0:lr.contains(Pt))||(lr==null||(Qt=lr.getRootNode())===null||Qt===void 0?void 0:Qt.host)===Pt||Pt===lr||(dn==null?void 0:dn.contains(Pt))||(dn==null||(Gn=dn.getRootNode())===null||Gn===void 0?void 0:Gn.host)===Pt||Pt===dn||Object.values($e.current).some(function(Nn){return(Nn==null?void 0:Nn.contains(Pt))||Pt===Nn})}),Rn=TV(u,Oe,Ae,Ne),fr=TV(u,be,it,at),kn=_.useState(C||!1),tt=we(kn,2),gt=tt[0],gn=tt[1],Mt=y??gt,Dr=Ts(function(Pt){y===void 0&&gn(Pt)});ar(function(){gn(y||!1)},[y]);var mr=_.useRef(Mt);mr.current=Mt;var Ln=Ts(function(Pt){Mt!==Pt&&(Dr(Pt),w==null||w(Pt))}),je=_.useRef(),Qe=function(){clearTimeout(je.current)},Ue=function(Qt){var Gn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Qe(),Gn===0?Ln(Qt):je.current=setTimeout(function(){Ln(Qt)},Gn*1e3)};_.useEffect(function(){return Qe},[]);var yt=_.useState(!1),Ut=we(yt,2),Dt=Ut[0],sr=Ut[1],zn=_.useRef(!0);ar(function(){(!zn.current||Mt)&&sr(!0),zn.current=!0},[Mt]);var Xr=_.useState(null),Fn=we(Xr,2),cr=Fn[0],Eo=Fn[1],bi=_.useState([0,0]),ta=we(bi,2),_o=ta[0],Hn=ta[1],na=function(Qt){Hn([Qt.clientX,Qt.clientY])},Ps=xae(Mt,dn,ae?_o:Lt,Z,ie,de,he),ji=we(Ps,9),Do=ji[0],ts=ji[1],Ds=ji[2],ko=ji[3],ra=ji[4],ic=ji[5],ks=ji[6],ia=ji[7],Lo=ji[8],ti=Ts(function(){Dt||Lo()});Pae(Mt,Lt,dn,ti),ar(function(){ti()},[_o]),ar(function(){Mt&&!(ie!=null&&ie[Z])&&ti()},[JSON.stringify(de)]);var ro=_.useMemo(function(){var Pt=Aae(ie,u,ia,ae);return ct(Pt,ge==null?void 0:ge(ia))},[ia,ge,ie,u,ae]);_.useImperativeHandle(a,function(){return{forceAlign:ti}});var ns=function(Qt){sr(!1),Lo(),R==null||R(Qt)},Xn=function(){return new Promise(function(Qt){Eo(function(){return Qt})})};ar(function(){cr&&(Lo(),cr(),Eo(null))},[cr]);var So=_.useState(0),oa=we(So,2),rs=oa[0],oc=oa[1],ac=_.useState(0),is=we(ac,2),os=is[0],vt=is[1],ot=function(Qt,Gn){if(ti(),fe){var lr=Gn.getBoundingClientRect();oc(lr.width),vt(lr.height)}},tn=wae(_t,f,g,E),In=we(tn,2),hn=In[0],Jn=In[1],Br=function(Qt,Gn,lr,Nn){$t[Qt]=function(zl){var Bc;Nn==null||Nn(zl),Ue(Gn,lr);for(var sc=arguments.length,jc=new Array(sc>1?sc-1:0),Gl=1;Gl<sc;Gl++)jc[Gl-1]=arguments[Gl];(Bc=mt[Qt])===null||Bc===void 0||Bc.call.apply(Bc,[mt,zl].concat(jc))}},Mo=hn.has("click"),yo=Jn.has("click")||Jn.has("contextMenu");(Mo||yo)&&($t.onClick=function(Pt){var Qt;mr.current&&yo?Ue(!1):!mr.current&&Mo&&(na(Pt),Ue(!0));for(var Gn=arguments.length,lr=new Array(Gn>1?Gn-1:0),Nn=1;Nn<Gn;Nn++)lr[Nn-1]=arguments[Nn];(Qt=mt.onClick)===null||Qt===void 0||Qt.call.apply(Qt,[mt,Pt].concat(lr))}),_.useEffect(function(){if(yo&&dn&&(!M||F)){var Pt=!1,Qt=function(sc){var jc=sc.target;Pt=yr(jc)},Gn=function(sc){var jc=sc.target;mr.current&&!Pt&&!yr(jc)&&Ue(!1)},lr=am(dn),Nn=Lt==null?void 0:Lt.getRootNode();lr.addEventListener("mousedown",Qt),lr.addEventListener("click",Gn);var zl=Nn&&Nn!==Lt.ownerDocument;return zl&&(Nn.addEventListener("mousedown",Qt),Nn.addEventListener("click",Gn)),function(){lr.removeEventListener("mousedown",Qt),lr.removeEventListener("click",Gn),zl&&(Nn.removeEventListener("mousedown",Qt),Nn.removeEventListener("click",Gn))}}},[yo,Lt,dn,M,F]);var as=hn.has("hover"),xa=Jn.has("hover"),Wl,fm;as&&(Br("onMouseEnter",!0,O,function(Pt){na(Pt)}),Wl=function(){Ue(!0,O)},ae&&($t.onMouseMove=function(Pt){var Qt;(Qt=mt.onMouseMove)===null||Qt===void 0||Qt.call(mt,Pt)})),xa&&(Br("onMouseLeave",!1,A),fm=function(){Ue(!1,A)}),hn.has("focus")&&Br("onFocus",!0,x),Jn.has("focus")&&Br("onBlur",!1,P),hn.has("contextMenu")&&($t.onContextMenu=function(Pt){var Qt;na(Pt),Ue(!0),Pt.preventDefault();for(var Gn=arguments.length,lr=new Array(Gn>1?Gn-1:0),Nn=1;Nn<Gn;Nn++)lr[Nn-1]=arguments[Nn];(Qt=mt.onContextMenu)===null||Qt===void 0||Qt.call.apply(Qt,[mt,Pt].concat(lr))}),ze&&($t.className=ct(mt.className,ze));var qh=ce(ce({},mt),$t),mm={},W_=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];W_.forEach(function(Pt){Pe[Pt]&&(mm[Pt]=function(){for(var Qt,Gn=arguments.length,lr=new Array(Gn),Nn=0;Nn<Gn;Nn++)lr[Nn]=arguments[Nn];(Qt=qh[Pt])===null||Qt===void 0||Qt.call.apply(Qt,[qh].concat(lr)),Pe[Pt].apply(Pe,lr)})});var z_=_.cloneElement(st,ce(ce({},qh),mm)),G_=pe?ce(ce({},pe!==!0?pe:{}),{},{x:ko,y:ra}):null;return _.createElement(_.Fragment,null,_.createElement(Bl,{disabled:!Mt,ref:en,onResize:ot},_.createElement(Uae,{getTriggerDOMNode:ht},z_)),_.createElement(CV.Provider,{value:et},_.createElement(Mae,{portal:e,ref:zt,prefixCls:u,popup:J,className:ct(X,ro),style:W,target:Lt,onMouseEnter:Wl,onMouseLeave:fm,zIndex:oe,open:Mt,keepDom:Dt,onClick:se,mask:M,motion:Rn,maskMotion:fr,onVisibleChanged:ns,onPrepare:Xn,forceRender:$,autoDestroy:Ye,getPopupContainer:j,align:ia,arrow:G_,ready:Do,offsetX:ts,offsetY:Ds,onAlign:ti,stretch:fe,targetWidth:rs/ic,targetHeight:os/ks})))});return t}const V8=Fae(C8);var Bae=["prefixCls","disabled","visible","children","popupElement","containerWidth","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],jae=function(t){var i=t===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:i,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:i,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:i,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:i,adjustY:1},htmlRegion:"scroll"}}},$ae=function(t,i){var a=t.prefixCls;t.disabled;var c=t.visible,u=t.children,d=t.popupElement,p=t.containerWidth,f=t.animation,g=t.transitionName,E=t.dropdownStyle,y=t.dropdownClassName,C=t.direction,w=C===void 0?"ltr":C,R=t.placement,O=t.builtinPlacements,k=t.dropdownMatchSelectWidth,A=t.dropdownRender,x=t.dropdownAlign,P=t.getPopupContainer,M=t.empty,B=t.getTriggerDOMNode,F=t.onPopupVisibleChange,j=t.onPopupMouseEnter,$=mn(t,Bae),ee="".concat(a,"-dropdown"),H=d;A&&(H=A(d));var J=_.useMemo(function(){return O||jae(k)},[O,k]),X=f?"".concat(ee,"-").concat(f):g,W=_.useRef(null);_.useImperativeHandle(i,function(){return{getPopupElement:function(){return W.current}}});var Z=ce({minWidth:p},E);return typeof k=="number"?Z.width=k:k&&(Z.width=p),_.createElement(V8,He({},$,{showAction:F?["click"]:[],hideAction:F?["click"]:[],popupPlacement:R||(w==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:J,prefixCls:ee,popupTransitionName:X,popup:_.createElement("div",{ref:W,onMouseEnter:j},H),popupAlign:x,popupVisible:c,getPopupContainer:P,popupClassName:ct(y,Ie({},"".concat(ee,"-empty"),M)),popupStyle:Z,getTriggerDOMNode:B,onPopupVisibleChange:F}),u)},F8=_.forwardRef($ae);F8.displayName="SelectTrigger";function IV(e,t){var i=e.key,a;return"value"in e&&(a=e.value),i??(a!==void 0?a:"rc-index-key-".concat(t))}function B8(e,t){var i=e||{},a=i.label,c=i.value,u=i.options;return{label:a||(t?"children":"label"),value:c||"value",options:u||"options"}}function Hae(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.fieldNames,a=t.childrenAsData,c=[],u=B8(i,!1),d=u.label,p=u.value,f=u.options;function g(E,y){E.forEach(function(C){var w=C[d];if(y||!(f in C)){var R=C[p];c.push({key:IV(C,c.length),groupOption:y,data:C,label:w,value:R})}else{var O=w;O===void 0&&a&&(O=C.label),c.push({key:IV(C,c.length),group:!0,data:C,label:O}),g(C[f],!0)}})}return g(e,!1),c}function mI(e){var t=ce({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return go(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}function Wae(e,t){if(!t||!t.length)return null;var i=!1;function a(u,d){var p=wj(d),f=p[0],g=p.slice(1);if(!f)return[u];var E=u.split(f);return i=i||E.length>1,E.reduce(function(y,C){return[].concat(Et(y),Et(a(C,g)))},[]).filter(function(y){return y})}var c=a(e,t);return i?c:null}var zae=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","showArrow","inputIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],Gae=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"];function gI(e){return e==="tags"||e==="multiple"}var Kae=_.forwardRef(function(e,t){var i,a,c=e.id,u=e.prefixCls,d=e.className,p=e.showSearch,f=e.tagRender,g=e.direction,E=e.omitDomProps,y=e.displayValues,C=e.onDisplayValuesChange,w=e.emptyOptions,R=e.notFoundContent,O=R===void 0?"Not Found":R,k=e.onClear,A=e.mode,x=e.disabled,P=e.loading,M=e.getInputElement,B=e.getRawInputElement,F=e.open,j=e.defaultOpen,$=e.onDropdownVisibleChange,ee=e.activeValue,H=e.onActiveValueChange,J=e.activeDescendantId,X=e.searchValue,W=e.autoClearSearchValue,Z=e.onSearch,ne=e.onSearchSplit,ie=e.tokenSeparators,de=e.allowClear,oe=e.showArrow,fe=e.inputIcon,ge=e.clearIcon,ae=e.OptionList,se=e.animation,he=e.transitionName,pe=e.dropdownStyle,Oe=e.dropdownClassName,be=e.dropdownMatchSelectWidth,Ne=e.dropdownRender,Ae=e.dropdownAlign,at=e.placement,it=e.builtinPlacements,ze=e.getPopupContainer,ht=e.showAction,Pe=ht===void 0?[]:ht,Ye=e.onFocus,lt=e.onBlur,At=e.onKeyUp,_t=e.onKeyDown,Be=e.onMouseDown,$e=mn(e,zae),ke=gI(A),et=(p!==void 0?p:ke)||A==="combobox",ft=ce({},$e);Gae.forEach(function(vt){delete ft[vt]}),E==null||E.forEach(function(vt){delete ft[vt]});var Rt=_.useState(!1),on=we(Rt,2),dn=on[0],jt=on[1];_.useEffect(function(){jt(a1())},[]);var zt=_.useRef(null),Mn=_.useRef(null),_n=_.useRef(null),Lt=_.useRef(null),xt=_.useRef(null),en=iae(),st=we(en,3),mt=st[0],$t=st[1],yr=st[2];_.useImperativeHandle(t,function(){var vt,ot;return{focus:(vt=Lt.current)===null||vt===void 0?void 0:vt.focus,blur:(ot=Lt.current)===null||ot===void 0?void 0:ot.blur,scrollTo:function(In){var hn;return(hn=xt.current)===null||hn===void 0?void 0:hn.scrollTo(In)}}});var Rn=_.useMemo(function(){var vt;if(A!=="combobox")return X;var ot=(vt=y[0])===null||vt===void 0?void 0:vt.value;return typeof ot=="string"||typeof ot=="number"?String(ot):""},[X,A,y]),fr=A==="combobox"&&typeof M=="function"&&M()||null,kn=typeof B=="function"&&B(),tt=p_(Mn,kn==null||(i=kn.props)===null||i===void 0?void 0:i.ref),gt=_.useState(!1),gn=we(gt,2),Mt=gn[0],Dr=gn[1];ar(function(){Dr(!0)},[]);var mr=Ka(!1,{defaultValue:j,value:F}),Ln=we(mr,2),je=Ln[0],Qe=Ln[1],Ue=Mt?je:!1,yt=!O&&w;(x||yt&&Ue&&A==="combobox")&&(Ue=!1);var Ut=yt?!1:Ue,Dt=_.useCallback(function(vt){var ot=vt!==void 0?vt:!Ue;x||(Qe(ot),Ue!==ot&&($==null||$(ot)))},[x,Ue,Qe,$]),sr=_.useMemo(function(){return(ie||[]).some(function(vt){return[`
`,`\r
`].includes(vt)})},[ie]),zn=function(ot,tn,In){var hn=!0,Jn=ot;H==null||H(null);var Br=In?null:Wae(ot,ie);return A!=="combobox"&&Br&&(Jn="",ne==null||ne(Br),Dt(!1),hn=!1),Z&&Rn!==Jn&&Z(Jn,{source:tn?"typing":"effect"}),hn},Xr=function(ot){!ot||!ot.trim()||Z(ot,{source:"submit"})};_.useEffect(function(){!Ue&&!ke&&A!=="combobox"&&zn("",!1,!1)},[Ue]),_.useEffect(function(){je&&x&&Qe(!1),x&&$t(!1)},[x]);var Fn=x8(),cr=we(Fn,2),Eo=cr[0],bi=cr[1],ta=function(ot){var tn=Eo(),In=ot.which;if(In===Ve.ENTER&&(A!=="combobox"&&ot.preventDefault(),Ue||Dt(!0)),bi(!!Rn),In===Ve.BACKSPACE&&!tn&&ke&&!Rn&&y.length){for(var hn=Et(y),Jn=null,Br=hn.length-1;Br>=0;Br-=1){var Mo=hn[Br];if(!Mo.disabled){hn.splice(Br,1),Jn=Mo;break}}Jn&&C(hn,{type:"remove",values:[Jn]})}for(var yo=arguments.length,as=new Array(yo>1?yo-1:0),xa=1;xa<yo;xa++)as[xa-1]=arguments[xa];if(Ue&&xt.current){var Wl;(Wl=xt.current).onKeyDown.apply(Wl,[ot].concat(as))}_t==null||_t.apply(void 0,[ot].concat(as))},_o=function(ot){for(var tn=arguments.length,In=new Array(tn>1?tn-1:0),hn=1;hn<tn;hn++)In[hn-1]=arguments[hn];if(Ue&&xt.current){var Jn;(Jn=xt.current).onKeyUp.apply(Jn,[ot].concat(In))}At==null||At.apply(void 0,[ot].concat(In))},Hn=function(ot){var tn=y.filter(function(In){return In!==ot});C(tn,{type:"remove",values:[ot]})},na=_.useRef(!1),Ps=function(){$t(!0),x||(Ye&&!na.current&&Ye.apply(void 0,arguments),Pe.includes("focus")&&Dt(!0)),na.current=!0},ji=function(){$t(!1,function(){na.current=!1,Dt(!1)}),!x&&(Rn&&(A==="tags"?Z(Rn,{source:"submit"}):A==="multiple"&&Z("",{source:"blur"})),lt&&lt.apply(void 0,arguments))},Do=[];_.useEffect(function(){return function(){Do.forEach(function(vt){return clearTimeout(vt)}),Do.splice(0,Do.length)}},[]);var ts=function(ot){var tn,In=ot.target,hn=(tn=_n.current)===null||tn===void 0?void 0:tn.getPopupElement();if(hn&&hn.contains(In)){var Jn=setTimeout(function(){var as=Do.indexOf(Jn);if(as!==-1&&Do.splice(as,1),yr(),!dn&&!hn.contains(document.activeElement)){var xa;(xa=Lt.current)===null||xa===void 0||xa.focus()}});Do.push(Jn)}for(var Br=arguments.length,Mo=new Array(Br>1?Br-1:0),yo=1;yo<Br;yo++)Mo[yo-1]=arguments[yo];Be==null||Be.apply(void 0,[ot].concat(Mo))},Ds=_.useState(null),ko=we(Ds,2),ra=ko[0],ic=ko[1],ks=_.useState({}),ia=we(ks,2),Lo=ia[1];function ti(){Lo({})}ar(function(){if(Ut){var vt,ot=Math.ceil((vt=zt.current)===null||vt===void 0?void 0:vt.offsetWidth);ra!==ot&&!Number.isNaN(ot)&&ic(ot)}},[Ut]);var ro;kn&&(ro=function(ot){Dt(ot)}),oae(function(){var vt;return[zt.current,(vt=_n.current)===null||vt===void 0?void 0:vt.getPopupElement()]},Ut,Dt,!!kn);var ns=_.useMemo(function(){return ce(ce({},e),{},{notFoundContent:O,open:Ue,triggerOpen:Ut,id:c,showSearch:et,multiple:ke,toggleOpen:Dt})},[e,O,Ut,Ue,c,et,ke,Dt]),Xn=oe!==void 0?oe:P||!ke&&A!=="combobox",So;Xn&&(So=_.createElement(Gv,{className:ct("".concat(u,"-arrow"),Ie({},"".concat(u,"-arrow-loading"),P)),customizeIcon:fe,customizeIconProps:{loading:P,searchValue:Rn,open:Ue,focused:mt,showSearch:et}}));var oa,rs=function(){var ot;k==null||k(),(ot=Lt.current)===null||ot===void 0||ot.focus(),C([],{type:"clear",values:y}),zn("",!1,!1)};!x&&de&&(y.length||Rn)&&!(A==="combobox"&&Rn==="")&&(oa=_.createElement(Gv,{className:"".concat(u,"-clear"),onMouseDown:rs,customizeIcon:ge},"Ã"));var oc=_.createElement(ae,{ref:xt}),ac=ct(u,d,(a={},Ie(a,"".concat(u,"-focused"),mt),Ie(a,"".concat(u,"-multiple"),ke),Ie(a,"".concat(u,"-single"),!ke),Ie(a,"".concat(u,"-allow-clear"),de),Ie(a,"".concat(u,"-show-arrow"),Xn),Ie(a,"".concat(u,"-disabled"),x),Ie(a,"".concat(u,"-loading"),P),Ie(a,"".concat(u,"-open"),Ue),Ie(a,"".concat(u,"-customize-input"),fr),Ie(a,"".concat(u,"-show-search"),et),a)),is=_.createElement(F8,{ref:_n,disabled:x,prefixCls:u,visible:Ut,popupElement:oc,containerWidth:ra,animation:se,transitionName:he,dropdownStyle:pe,dropdownClassName:Oe,direction:g,dropdownMatchSelectWidth:be,dropdownRender:Ne,dropdownAlign:Ae,placement:at,builtinPlacements:it,getPopupContainer:ze,empty:w,getTriggerDOMNode:function(){return Mn.current},onPopupVisibleChange:ro,onPopupMouseEnter:ti},kn?_.cloneElement(kn,{ref:tt}):_.createElement(U8,He({},e,{domRef:Mn,prefixCls:u,inputElement:fr,ref:Lt,id:c,showSearch:et,autoClearSearchValue:W,mode:A,activeDescendantId:J,tagRender:f,values:y,open:Ue,onToggleOpen:Dt,activeValue:ee,searchValue:Rn,onSearch:zn,onSearchSubmit:Xr,onRemove:Hn,tokenWithEnter:sr}))),os;return kn?os=is:os=_.createElement("div",He({className:ac},ft,{ref:zt,onMouseDown:ts,onKeyDown:ta,onKeyUp:_o,onFocus:Ps,onBlur:ji}),mt&&!Ue&&_.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(y.map(function(vt){var ot=vt.label,tn=vt.value;return["number","string"].includes(An(ot))?ot:tn}).join(", "))),is,So,oa),_.createElement(N8.Provider,{value:ns},os)});const Yae=function(e,t){var i=_.useRef({values:new Map,options:new Map}),a=_.useMemo(function(){var u=i.current,d=u.values,p=u.options,f=e.map(function(y){if(y.label===void 0){var C;return ce(ce({},y),{},{label:(C=d.get(y.value))===null||C===void 0?void 0:C.label})}return y}),g=new Map,E=new Map;return f.forEach(function(y){g.set(y.value,y),E.set(y.value,t.get(y.value)||p.get(y.value))}),i.current.values=g,i.current.options=E,f},[e,t]),c=_.useCallback(function(u){return t.get(u)||i.current.options.get(u)},[t]);return[a,c]};function Qb(e,t){return L8(e).join("").toUpperCase().includes(t)}const qae=function(e,t,i,a,c){return _.useMemo(function(){if(!i||a===!1)return e;var u=t.options,d=t.label,p=t.value,f=[],g=typeof a=="function",E=i.toUpperCase(),y=g?a:function(w,R){return c?Qb(R[c],E):R[u]?Qb(R[d!=="children"?d:"label"],E):Qb(R[p],E)},C=g?function(w){return mI(w)}:function(w){return w};return e.forEach(function(w){if(w[u]){var R=y(i,C(w));if(R)f.push(w);else{var O=w[u].filter(function(k){return y(i,C(k))});O.length&&f.push(ce(ce({},w),{},Ie({},u,O)))}return}y(i,C(w))&&f.push(w)}),f},[e,a,c,i,t])};var wV=0,Xae=wo();function Jae(){var e;return Xae?(e=wV,wV+=1):e="TEST_OR_SSR",e}function Qae(e){var t=_.useState(),i=we(t,2),a=i[0],c=i[1];return _.useEffect(function(){c("rc_select_".concat(Jae()))},[]),e||a}var Zae=["children","value"],ese=["children"];function tse(e){var t=e,i=t.key,a=t.props,c=a.children,u=a.value,d=mn(a,Zae);return ce({key:i,value:u!==void 0?u:i,children:c},d)}function j8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Pc(e).map(function(i,a){if(!_.isValidElement(i)||!i.type)return null;var c=i,u=c.type.isSelectOptGroup,d=c.key,p=c.props,f=p.children,g=mn(p,ese);return t||!u?tse(i):ce(ce({key:"__RC_SELECT_GRP__".concat(d===null?a:d,"__"),label:d},g),{},{options:j8(f)})}).filter(function(i){return i})}function nse(e,t,i,a,c){return _.useMemo(function(){var u=e,d=!e;d&&(u=j8(t));var p=new Map,f=new Map,g=function(C,w,R){R&&typeof R=="string"&&C.set(w[R],w)};function E(y){for(var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,w=0;w<y.length;w+=1){var R=y[w];!R[i.options]||C?(p.set(R[i.value],R),g(f,R,i.label),g(f,R,a),g(f,R,c)):E(R[i.options],!0)}}return E(u),{options:u,valueOptions:p,labelOptions:f}},[e,t,i,a,c])}function OV(e){var t=_.useRef();t.current=e;var i=_.useCallback(function(){return t.current.apply(t,arguments)},[]);return i}var c1=function(){return null};c1.isSelectOptGroup=!0;var l1=function(){return null};l1.isSelectOption=!0;var $8=_.forwardRef(function(e,t){var i=e.height,a=e.offset,c=e.children,u=e.prefixCls,d=e.onInnerResize,p=e.innerProps,f={},g={display:"flex",flexDirection:"column"};return a!==void 0&&(f={height:i,position:"relative",overflow:"hidden"},g=ce(ce({},g),{},{transform:"translateY(".concat(a,"px)"),position:"absolute",left:0,right:0,top:0})),_.createElement("div",{style:f},_.createElement(Bl,{onResize:function(y){var C=y.offsetHeight;C&&d&&d()}},_.createElement("div",He({style:g,className:ct(Ie({},"".concat(u,"-holder-inner"),u)),ref:t},p),c)))});$8.displayName="Filler";var rse=20;function AV(e){return"touches"in e?e.touches[0].pageY:e.pageY}var ise=function(e){Vl(i,e);var t=Fl(i);function i(){var a;xo(this,i);for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return a=t.call.apply(t,[this].concat(u)),a.moveRaf=null,a.scrollbarRef=_.createRef(),a.thumbRef=_.createRef(),a.visibleTimeout=null,a.state={dragging:!1,pageY:null,startTop:null,visible:!1},a.delayHidden=function(){clearTimeout(a.visibleTimeout),a.setState({visible:!0}),a.visibleTimeout=setTimeout(function(){a.setState({visible:!1})},2e3)},a.onScrollbarTouchStart=function(p){p.preventDefault()},a.onContainerMouseDown=function(p){p.stopPropagation(),p.preventDefault()},a.patchEvents=function(){window.addEventListener("mousemove",a.onMouseMove),window.addEventListener("mouseup",a.onMouseUp),a.thumbRef.current.addEventListener("touchmove",a.onMouseMove),a.thumbRef.current.addEventListener("touchend",a.onMouseUp)},a.removeEvents=function(){var p;window.removeEventListener("mousemove",a.onMouseMove),window.removeEventListener("mouseup",a.onMouseUp),(p=a.scrollbarRef.current)===null||p===void 0||p.removeEventListener("touchstart",a.onScrollbarTouchStart),a.thumbRef.current&&(a.thumbRef.current.removeEventListener("touchstart",a.onMouseDown),a.thumbRef.current.removeEventListener("touchmove",a.onMouseMove),a.thumbRef.current.removeEventListener("touchend",a.onMouseUp)),_r.cancel(a.moveRaf)},a.onMouseDown=function(p){var f=a.props.onStartMove;a.setState({dragging:!0,pageY:AV(p),startTop:a.getTop()}),f(),a.patchEvents(),p.stopPropagation(),p.preventDefault()},a.onMouseMove=function(p){var f=a.state,g=f.dragging,E=f.pageY,y=f.startTop,C=a.props.onScroll;if(_r.cancel(a.moveRaf),g){var w=AV(p)-E,R=y+w,O=a.getEnableScrollRange(),k=a.getEnableHeightRange(),A=k?R/k:0,x=Math.ceil(A*O);a.moveRaf=_r(function(){C(x)})}},a.onMouseUp=function(){var p=a.props.onStopMove;a.setState({dragging:!1}),p(),a.removeEvents()},a.getSpinHeight=function(){var p=a.props,f=p.height,g=p.count,E=f/g*10;return E=Math.max(E,rse),E=Math.min(E,f/2),Math.floor(E)},a.getEnableScrollRange=function(){var p=a.props,f=p.scrollHeight,g=p.height;return f-g||0},a.getEnableHeightRange=function(){var p=a.props.height,f=a.getSpinHeight();return p-f||0},a.getTop=function(){var p=a.props.scrollTop,f=a.getEnableScrollRange(),g=a.getEnableHeightRange();if(p===0||f===0)return 0;var E=p/f;return E*g},a.showScroll=function(){var p=a.props,f=p.height,g=p.scrollHeight;return g>f},a}return Po(i,[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(c){c.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var c=this.state,u=c.dragging,d=c.visible,p=this.props.prefixCls,f=this.getSpinHeight(),g=this.getTop(),E=this.showScroll(),y=E&&d;return _.createElement("div",{ref:this.scrollbarRef,className:ct("".concat(p,"-scrollbar"),Ie({},"".concat(p,"-scrollbar-show"),E)),style:{width:8,top:0,bottom:0,right:0,position:"absolute",display:y?null:"none"},onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},_.createElement("div",{ref:this.thumbRef,className:ct("".concat(p,"-scrollbar-thumb"),Ie({},"".concat(p,"-scrollbar-thumb-moving"),u)),style:{width:"100%",height:f,top:g,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}]),i}(_.Component);function ose(e){var t=e.children,i=e.setRef,a=_.useCallback(function(c){i(c)},[]);return _.cloneElement(t,{ref:a})}function ase(e,t,i,a,c,u){var d=u.getKey;return e.slice(t,i+1).map(function(p,f){var g=t+f,E=c(p,g,{}),y=d(p);return _.createElement(ose,{key:y,setRef:function(w){return a(p,w)}},E)})}var sse=function(){function e(){xo(this,e),this.maps=void 0,this.maps=Object.create(null)}return Po(e,[{key:"set",value:function(i,a){this.maps[i]=a}},{key:"get",value:function(i){return this.maps[i]}}]),e}();function cse(e,t,i){var a=_.useState(0),c=we(a,2),u=c[0],d=c[1],p=_.useRef(new Map),f=_.useRef(new sse),g=_.useRef();function E(){_r.cancel(g.current)}function y(){E(),g.current=_r(function(){p.current.forEach(function(w,R){if(w&&w.offsetParent){var O=$f(w),k=O.offsetHeight;f.current.get(R)!==k&&f.current.set(R,O.offsetHeight)}}),d(function(w){return w+1})})}function C(w,R){var O=e(w),k=p.current.get(O);R?(p.current.set(O,R),y()):p.current.delete(O),!k!=!R&&(R?t==null||t(w):i==null||i(w))}return _.useEffect(function(){return E},[]),[C,y,f.current,u]}function lse(e,t,i,a,c,u,d,p){var f=_.useRef();return function(g){if(g==null){p();return}if(_r.cancel(f.current),typeof g=="number")d(g);else if(g&&An(g)==="object"){var E,y=g.align;"index"in g?E=g.index:E=t.findIndex(function(O){return c(O)===g.key});var C=g.offset,w=C===void 0?0:C,R=function O(k,A){if(!(k<0||!e.current)){var x=e.current.clientHeight,P=!1,M=A;if(x){for(var B=A||y,F=0,j=0,$=0,ee=Math.min(t.length,E),H=0;H<=ee;H+=1){var J=c(t[H]);j=F;var X=i.get(J);$=j+(X===void 0?a:X),F=$,H===E&&X===void 0&&(P=!0)}var W=null;switch(B){case"top":W=j-w;break;case"bottom":W=$-x+w;break;default:{var Z=e.current.scrollTop,ne=Z+x;j<Z?M="top":$>ne&&(M="bottom")}}W!==null&&W!==e.current.scrollTop&&d(W)}f.current=_r(function(){P&&u(),O(k-1,M)},2)}};R(3)}}}function use(e,t,i){var a=e.length,c=t.length,u,d;if(a===0&&c===0)return null;a<c?(u=e,d=t):(u=t,d=e);var p={__EMPTY_ITEM__:!0};function f(R){return R!==void 0?i(R):p}for(var g=null,E=Math.abs(a-c)!==1,y=0;y<d.length;y+=1){var C=f(u[y]),w=f(d[y]);if(C!==w){g=y,E=E||C!==f(d[y+1]);break}}return g===null?null:{index:g,multiple:E}}function dse(e,t,i){var a=_.useState(e),c=we(a,2),u=c[0],d=c[1],p=_.useState(null),f=we(p,2),g=f[0],E=f[1];return _.useEffect(function(){var y=use(u||[],e||[],t);(y==null?void 0:y.index)!==void 0&&(i==null||i(y.index),E(e[y.index])),d(e)},[e]),[g]}var hse=(typeof navigator>"u"?"undefined":An(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const H8=function(e,t){var i=_.useRef(!1),a=_.useRef(null);function c(){clearTimeout(a.current),i.current=!0,a.current=setTimeout(function(){i.current=!1},50)}var u=_.useRef({top:e,bottom:t});return u.current.top=e,u.current.bottom=t,function(d){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=d<0&&u.current.top||d>0&&u.current.bottom;return p&&f?(clearTimeout(a.current),i.current=!1):(!f||i.current)&&c(),!i.current&&f}};function pse(e,t,i,a){var c=_.useRef(0),u=_.useRef(null),d=_.useRef(null),p=_.useRef(!1),f=H8(t,i);function g(y){if(e){_r.cancel(u.current);var C=y.deltaY;c.current+=C,d.current=C,!f(C)&&(hse||y.preventDefault(),u.current=_r(function(){var w=p.current?10:1;a(c.current*w),c.current=0}))}}function E(y){e&&(p.current=y.detail===d.current)}return[g,E]}var fse=14/15;function mse(e,t,i){var a=_.useRef(!1),c=_.useRef(0),u=_.useRef(null),d=_.useRef(null),p,f=function(C){if(a.current){var w=Math.ceil(C.touches[0].pageY),R=c.current-w;c.current=w,i(R)&&C.preventDefault(),clearInterval(d.current),d.current=setInterval(function(){R*=fse,(!i(R,!0)||Math.abs(R)<=.1)&&clearInterval(d.current)},16)}},g=function(){a.current=!1,p()},E=function(C){p(),C.touches.length===1&&!a.current&&(a.current=!0,c.current=Math.ceil(C.touches[0].pageY),u.current=C.target,u.current.addEventListener("touchmove",f),u.current.addEventListener("touchend",g))};p=function(){u.current&&(u.current.removeEventListener("touchmove",f),u.current.removeEventListener("touchend",g))},ar(function(){return e&&t.current.addEventListener("touchstart",E),function(){var y;(y=t.current)===null||y===void 0||y.removeEventListener("touchstart",E),p(),clearInterval(d.current)}},[e])}var gse=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","component","onScroll","onVisibleChange","innerProps"],vse=[],Ese={overflowY:"auto",overflowAnchor:"none"};function _se(e,t){var i=e.prefixCls,a=i===void 0?"rc-virtual-list":i,c=e.className,u=e.height,d=e.itemHeight,p=e.fullHeight,f=p===void 0?!0:p,g=e.style,E=e.data,y=e.children,C=e.itemKey,w=e.virtual,R=e.component,O=R===void 0?"div":R,k=e.onScroll,A=e.onVisibleChange,x=e.innerProps,P=mn(e,gse),M=!!(w!==!1&&u&&d),B=M&&E&&d*E.length>u,F=_.useState(0),j=we(F,2),$=j[0],ee=j[1],H=_.useState(!1),J=we(H,2),X=J[0],W=J[1],Z=ct(a,c),ne=E||vse,ie=_.useRef(),de=_.useRef(),oe=_.useRef(),fe=_.useCallback(function(st){return typeof C=="function"?C(st):st==null?void 0:st[C]},[C]),ge={getKey:fe};function ae(st){ee(function(mt){var $t;typeof st=="function"?$t=st(mt):$t=st;var yr=ke($t);return ie.current.scrollTop=yr,yr})}var se=_.useRef({start:0,end:ne.length}),he=_.useRef(),pe=dse(ne,fe),Oe=we(pe,1),be=Oe[0];he.current=be;var Ne=cse(fe,null,null),Ae=we(Ne,4),at=Ae[0],it=Ae[1],ze=Ae[2],ht=Ae[3],Pe=_.useMemo(function(){if(!M)return{scrollHeight:void 0,start:0,end:ne.length-1,offset:void 0};if(!B){var st;return{scrollHeight:((st=de.current)===null||st===void 0?void 0:st.offsetHeight)||0,start:0,end:ne.length-1,offset:void 0}}for(var mt=0,$t,yr,Rn,fr=ne.length,kn=0;kn<fr;kn+=1){var tt=ne[kn],gt=fe(tt),gn=ze.get(gt),Mt=mt+(gn===void 0?d:gn);Mt>=$&&$t===void 0&&($t=kn,yr=mt),Mt>$+u&&Rn===void 0&&(Rn=kn),mt=Mt}return $t===void 0&&($t=0,yr=0,Rn=Math.ceil(u/d)),Rn===void 0&&(Rn=ne.length-1),Rn=Math.min(Rn+1,ne.length),{scrollHeight:mt,start:$t,end:Rn,offset:yr}},[B,M,$,ne,ht,u]),Ye=Pe.scrollHeight,lt=Pe.start,At=Pe.end,_t=Pe.offset;se.current.start=lt,se.current.end=At;var Be=Ye-u,$e=_.useRef(Be);$e.current=Be;function ke(st){var mt=st;return Number.isNaN($e.current)||(mt=Math.min(mt,$e.current)),mt=Math.max(mt,0),mt}var et=$<=0,ft=$>=Be,Rt=H8(et,ft);function on(st){var mt=st;ae(mt)}function dn(st){var mt=st.currentTarget.scrollTop;mt!==$&&ae(mt),k==null||k(st)}var jt=pse(M,et,ft,function(st){ae(function(mt){var $t=mt+st;return $t})}),zt=we(jt,2),Mn=zt[0],_n=zt[1];mse(M,ie,function(st,mt){return Rt(st,mt)?!1:(Mn({preventDefault:function(){},deltaY:st}),!0)}),ar(function(){function st(mt){M&&mt.preventDefault()}return ie.current.addEventListener("wheel",Mn),ie.current.addEventListener("DOMMouseScroll",_n),ie.current.addEventListener("MozMousePixelScroll",st),function(){ie.current&&(ie.current.removeEventListener("wheel",Mn),ie.current.removeEventListener("DOMMouseScroll",_n),ie.current.removeEventListener("MozMousePixelScroll",st))}},[M]);var Lt=lse(ie,ne,ze,d,fe,it,ae,function(){var st;(st=oe.current)===null||st===void 0||st.delayHidden()});_.useImperativeHandle(t,function(){return{scrollTo:Lt}}),ar(function(){if(A){var st=ne.slice(lt,At+1);A(st,ne)}},[lt,At,ne]);var xt=ase(ne,lt,At,at,y,ge),en=null;return u&&(en=ce(Ie({},f?"height":"maxHeight",u),Ese),M&&(en.overflowY="hidden",X&&(en.pointerEvents="none"))),_.createElement("div",He({style:ce(ce({},g),{},{position:"relative"}),className:Z},P),_.createElement(O,{className:"".concat(a,"-holder"),style:en,ref:ie,onScroll:dn},_.createElement($8,{prefixCls:a,height:Ye,offset:_t,onInnerResize:it,ref:de,innerProps:x},xt)),M&&_.createElement(ise,{ref:oe,prefixCls:a,scrollTop:$,height:u,scrollHeight:Ye,count:ne.length,onScroll:on,onStartMove:function(){W(!0)},onStopMove:function(){W(!1)}}))}var W8=_.forwardRef(_se);W8.displayName="List";var z8=_.createContext(null);function Sse(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var yse=["disabled","title","children","style","className"];function NV(e){return typeof e=="string"||typeof e=="number"}var Cse=function(t,i){var a=rae(),c=a.prefixCls,u=a.id,d=a.open,p=a.multiple,f=a.mode,g=a.searchValue,E=a.toggleOpen,y=a.notFoundContent,C=a.onPopupScroll,w=_.useContext(z8),R=w.flattenOptions,O=w.onActiveValue,k=w.defaultActiveFirstOption,A=w.onSelect,x=w.menuItemSelectedIcon,P=w.rawValues,M=w.fieldNames,B=w.virtual,F=w.listHeight,j=w.listItemHeight,$="".concat(c,"-item"),ee=tm(function(){return R},[d,R],function(be,Ne){return Ne[0]&&be[1]!==Ne[1]}),H=_.useRef(null),J=function(Ne){Ne.preventDefault()},X=function(Ne){H.current&&H.current.scrollTo(typeof Ne=="number"?{index:Ne}:Ne)},W=function(Ne){for(var Ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,at=ee.length,it=0;it<at;it+=1){var ze=(Ne+it*Ae+at)%at,ht=ee[ze],Pe=ht.group,Ye=ht.data;if(!Pe&&!Ye.disabled)return ze}return-1},Z=_.useState(function(){return W(0)}),ne=we(Z,2),ie=ne[0],de=ne[1],oe=function(Ne){var Ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;de(Ne);var at={source:Ae?"keyboard":"mouse"},it=ee[Ne];if(!it){O(null,-1,at);return}O(it.value,Ne,at)};_.useEffect(function(){oe(k!==!1?W(0):-1)},[ee.length,g]);var fe=_.useCallback(function(be){return P.has(be)&&f!=="combobox"},[f,Et(P).toString(),P.size]);_.useEffect(function(){var be=setTimeout(function(){if(!p&&d&&P.size===1){var Ae=Array.from(P)[0],at=ee.findIndex(function(it){var ze=it.data;return ze.value===Ae});at!==-1&&(oe(at),X(at))}});if(d){var Ne;(Ne=H.current)===null||Ne===void 0||Ne.scrollTo(void 0)}return function(){return clearTimeout(be)}},[d,g,R.length]);var ge=function(Ne){Ne!==void 0&&A(Ne,{selected:!P.has(Ne)}),p||E(!1)};if(_.useImperativeHandle(i,function(){return{onKeyDown:function(Ne){var Ae=Ne.which,at=Ne.ctrlKey;switch(Ae){case Ve.N:case Ve.P:case Ve.UP:case Ve.DOWN:{var it=0;if(Ae===Ve.UP?it=-1:Ae===Ve.DOWN?it=1:Sse()&&at&&(Ae===Ve.N?it=1:Ae===Ve.P&&(it=-1)),it!==0){var ze=W(ie+it,it);X(ze),oe(ze,!0)}break}case Ve.ENTER:{var ht=ee[ie];ht&&!ht.data.disabled?ge(ht.value):ge(void 0),d&&Ne.preventDefault();break}case Ve.ESC:E(!1),d&&Ne.stopPropagation()}},onKeyUp:function(){},scrollTo:function(Ne){X(Ne)}}}),ee.length===0)return _.createElement("div",{role:"listbox",id:"".concat(u,"_list"),className:"".concat($,"-empty"),onMouseDown:J},y);var ae=Object.keys(M).map(function(be){return M[be]}),se=function(Ne){return Ne.label};function he(be,Ne){var Ae=be.group;return{role:Ae?"presentation":"option",id:"".concat(u,"_list_").concat(Ne)}}var pe=function(Ne){var Ae=ee[Ne];if(!Ae)return null;var at=Ae.data||{},it=at.value,ze=Ae.group,ht=Hv(at,!0),Pe=se(Ae);return Ae?_.createElement("div",He({"aria-label":typeof Pe=="string"&&!ze?Pe:null},ht,{key:Ne},he(Ae,Ne),{"aria-selected":fe(it)}),it):null},Oe={role:"listbox",id:"".concat(u,"_list")};return _.createElement(_.Fragment,null,B&&_.createElement("div",He({},Oe,{style:{height:0,width:0,overflow:"hidden"}}),pe(ie-1),pe(ie),pe(ie+1)),_.createElement(W8,{itemKey:"key",ref:H,data:ee,height:F,itemHeight:j,fullHeight:!1,onMouseDown:J,onScroll:C,virtual:B,innerProps:B?null:Oe},function(be,Ne){var Ae,at=be.group,it=be.groupOption,ze=be.data,ht=be.label,Pe=be.value,Ye=ze.key;if(at){var lt,At=(lt=ze.title)!==null&&lt!==void 0?lt:NV(ht)?ht.toString():void 0;return _.createElement("div",{className:ct($,"".concat($,"-group")),title:At},ht!==void 0?ht:Ye)}var _t=ze.disabled,Be=ze.title;ze.children;var $e=ze.style,ke=ze.className,et=mn(ze,yse),ft=Za(et,ae),Rt=fe(Pe),on="".concat($,"-option"),dn=ct($,on,ke,(Ae={},Ie(Ae,"".concat(on,"-grouped"),it),Ie(Ae,"".concat(on,"-active"),ie===Ne&&!_t),Ie(Ae,"".concat(on,"-disabled"),_t),Ie(Ae,"".concat(on,"-selected"),Rt),Ae)),jt=se(be),zt=!x||typeof x=="function"||Rt,Mn=typeof jt=="number"?jt:jt||Pe,_n=NV(Mn)?Mn.toString():void 0;return Be!==void 0&&(_n=Be),_.createElement("div",He({},Hv(ft),B?{}:he(be,Ne),{"aria-selected":Rt,className:dn,title:_n,onMouseMove:function(){ie===Ne||_t||oe(Ne)},onClick:function(){_t||ge(Pe)},style:$e}),_.createElement("div",{className:"".concat(on,"-content")},Mn),_.isValidElement(x)||Rt,zt&&_.createElement(Gv,{className:"".concat($,"-option-state"),customizeIcon:x,customizeIconProps:{isSelected:Rt}},Rt?"â":null))}))},G8=_.forwardRef(Cse);G8.displayName="OptionList";var bse=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"],Tse=["inputValue"];function Rse(e){return!e||An(e)!=="object"}var Ise=_.forwardRef(function(e,t){var i=e.id,a=e.mode,c=e.prefixCls,u=c===void 0?"rc-select":c,d=e.backfill,p=e.fieldNames,f=e.inputValue,g=e.searchValue,E=e.onSearch,y=e.autoClearSearchValue,C=y===void 0?!0:y,w=e.onSelect,R=e.onDeselect,O=e.dropdownMatchSelectWidth,k=O===void 0?!0:O,A=e.filterOption,x=e.filterSort,P=e.optionFilterProp,M=e.optionLabelProp,B=e.options,F=e.children,j=e.defaultActiveFirstOption,$=e.menuItemSelectedIcon,ee=e.virtual,H=e.listHeight,J=H===void 0?200:H,X=e.listItemHeight,W=X===void 0?20:X,Z=e.value,ne=e.defaultValue,ie=e.labelInValue,de=e.onChange,oe=mn(e,bse),fe=Qae(i),ge=gI(a),ae=!!(!B&&F),se=_.useMemo(function(){return A===void 0&&a==="combobox"?!1:A},[A,a]),he=_.useMemo(function(){return B8(p,ae)},[JSON.stringify(p),ae]),pe=Ka("",{value:g!==void 0?g:f,postState:function(Qe){return Qe||""}}),Oe=we(pe,2),be=Oe[0],Ne=Oe[1],Ae=nse(B,F,he,P,M),at=Ae.valueOptions,it=Ae.labelOptions,ze=Ae.options,ht=_.useCallback(function(je){var Qe=L8(je);return Qe.map(function(Ue){var yt,Ut,Dt,sr,zn;if(Rse(Ue))yt=Ue;else{var Xr;Dt=Ue.key,Ut=Ue.label,yt=(Xr=Ue.value)!==null&&Xr!==void 0?Xr:Dt}var Fn=at.get(yt);if(Fn){var cr;Ut===void 0&&(Ut=Fn==null?void 0:Fn[M||he.label]),Dt===void 0&&(Dt=(cr=Fn==null?void 0:Fn.key)!==null&&cr!==void 0?cr:yt),sr=Fn==null?void 0:Fn.disabled,zn=Fn==null?void 0:Fn.title}return{label:Ut,value:yt,key:Dt,disabled:sr,title:zn}})},[he,M,at]),Pe=Ka(ne,{value:Z}),Ye=we(Pe,2),lt=Ye[0],At=Ye[1],_t=_.useMemo(function(){var je,Qe=ht(lt);return a==="combobox"&&!((je=Qe[0])!==null&&je!==void 0&&je.value)?[]:Qe},[lt,ht,a]),Be=Yae(_t,at),$e=we(Be,2),ke=$e[0],et=$e[1],ft=_.useMemo(function(){if(!a&&ke.length===1){var je=ke[0];if(je.value===null&&(je.label===null||je.label===void 0))return[]}return ke.map(function(Qe){var Ue;return ce(ce({},Qe),{},{label:(Ue=Qe.label)!==null&&Ue!==void 0?Ue:Qe.value})})},[a,ke]),Rt=_.useMemo(function(){return new Set(ke.map(function(je){return je.value}))},[ke]);_.useEffect(function(){if(a==="combobox"){var je,Qe=(je=ke[0])===null||je===void 0?void 0:je.value;Ne(Sae(Qe)?String(Qe):"")}},[ke]);var on=OV(function(je,Qe){var Ue,yt=Qe??je;return Ue={},Ie(Ue,he.value,je),Ie(Ue,he.label,yt),Ue}),dn=_.useMemo(function(){if(a!=="tags")return ze;var je=Et(ze),Qe=function(yt){return at.has(yt)};return Et(ke).sort(function(Ue,yt){return Ue.value<yt.value?-1:1}).forEach(function(Ue){var yt=Ue.value;Qe(yt)||je.push(on(yt,Ue.label))}),je},[on,ze,at,ke,a]),jt=qae(dn,he,be,se,P),zt=_.useMemo(function(){return a!=="tags"||!be||jt.some(function(je){return je[P||"value"]===be})?jt:[on(be)].concat(Et(jt))},[on,P,a,jt,be]),Mn=_.useMemo(function(){return x?Et(zt).sort(function(je,Qe){return x(je,Qe)}):zt},[zt,x]),_n=_.useMemo(function(){return Hae(Mn,{fieldNames:he,childrenAsData:ae})},[Mn,he,ae]),Lt=function(Qe){var Ue=ht(Qe);if(At(Ue),de&&(Ue.length!==ke.length||Ue.some(function(Dt,sr){var zn;return((zn=ke[sr])===null||zn===void 0?void 0:zn.value)!==(Dt==null?void 0:Dt.value)}))){var yt=ie?Ue:Ue.map(function(Dt){return Dt.value}),Ut=Ue.map(function(Dt){return mI(et(Dt.value))});de(ge?yt:yt[0],ge?Ut:Ut[0])}},xt=_.useState(null),en=we(xt,2),st=en[0],mt=en[1],$t=_.useState(0),yr=we($t,2),Rn=yr[0],fr=yr[1],kn=j!==void 0?j:a!=="combobox",tt=_.useCallback(function(je,Qe){var Ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},yt=Ue.source,Ut=yt===void 0?"keyboard":yt;fr(Qe),d&&a==="combobox"&&je!==null&&Ut==="keyboard"&&mt(String(je))},[d,a]),gt=function(Qe,Ue,yt){var Ut=function(){var _o,Hn=et(Qe);return[ie?{label:Hn==null?void 0:Hn[he.label],value:Qe,key:(_o=Hn==null?void 0:Hn.key)!==null&&_o!==void 0?_o:Qe}:Qe,mI(Hn)]};if(Ue&&w){var Dt=Ut(),sr=we(Dt,2),zn=sr[0],Xr=sr[1];w(zn,Xr)}else if(!Ue&&R&&yt!=="clear"){var Fn=Ut(),cr=we(Fn,2),Eo=cr[0],bi=cr[1];R(Eo,bi)}},gn=OV(function(je,Qe){var Ue,yt=ge?Qe.selected:!0;yt?Ue=ge?[].concat(Et(ke),[je]):[je]:Ue=ke.filter(function(Ut){return Ut.value!==je}),Lt(Ue),gt(je,yt),a==="combobox"?mt(""):(!gI||C)&&(Ne(""),mt(""))}),Mt=function(Qe,Ue){Lt(Qe);var yt=Ue.type,Ut=Ue.values;(yt==="remove"||yt==="clear")&&Ut.forEach(function(Dt){gt(Dt.value,!1,yt)})},Dr=function(Qe,Ue){if(Ne(Qe),mt(null),Ue.source==="submit"){var yt=(Qe||"").trim();if(yt){var Ut=Array.from(new Set([].concat(Et(Rt),[yt])));Lt(Ut),gt(yt,!0),Ne("")}return}Ue.source!=="blur"&&(a==="combobox"&&Lt(Qe),E==null||E(Qe))},mr=function(Qe){var Ue=Qe;a!=="tags"&&(Ue=Qe.map(function(Ut){var Dt=it.get(Ut);return Dt==null?void 0:Dt.value}).filter(function(Ut){return Ut!==void 0}));var yt=Array.from(new Set([].concat(Et(Rt),Et(Ue))));Lt(yt),yt.forEach(function(Ut){gt(Ut,!0)})},Ln=_.useMemo(function(){var je=ee!==!1&&k!==!1;return ce(ce({},Ae),{},{flattenOptions:_n,onActiveValue:tt,defaultActiveFirstOption:kn,onSelect:gn,menuItemSelectedIcon:$,rawValues:Rt,fieldNames:he,virtual:je,listHeight:J,listItemHeight:W,childrenAsData:ae})},[Ae,_n,tt,kn,gn,$,Rt,he,ee,k,J,W,ae]);return _.createElement(z8.Provider,{value:Ln},_.createElement(Kae,He({},oe,{id:fe,prefixCls:u,ref:t,omitDomProps:Tse,mode:a,displayValues:ft,onDisplayValuesChange:Mt,searchValue:be,onSearch:Dr,autoClearSearchValue:C,onSearchSplit:mr,dropdownMatchSelectWidth:k,OptionList:G8,emptyOptions:!_n.length,activeValue:st,activeDescendantId:"".concat(fe,"_list_").concat(Rn)})))}),u1=Ise;u1.Option=l1;u1.OptGroup=c1;function wse(e,t,i,a){return function(u){const{prefixCls:d,style:p}=u,f=_.useRef(null),[g,E]=_.useState(0),[y,C]=_.useState(0),[w,R]=Ka(!1,{value:u.open}),{getPrefixCls:O}=_.useContext(ei),k=O(t||"select",d);_.useEffect(()=>{if(R(!0),typeof ResizeObserver<"u"){const x=new ResizeObserver(M=>{const B=M[0].target;E(B.offsetHeight+8),C(B.offsetWidth)}),P=setInterval(()=>{var M;const B=i?`.${i(k)}`:`.${k}-dropdown`,F=(M=f.current)===null||M===void 0?void 0:M.querySelector(B);F&&(clearInterval(P),x.observe(F))},10);return()=>{clearInterval(P),x.disconnect()}}},[]);let A=Object.assign(Object.assign({},u),{style:Object.assign(Object.assign({},p),{margin:0}),open:w,visible:w,getPopupContainer:()=>f.current});return a&&(A=a(A)),_.createElement(Fh,{theme:{token:{motionDurationFast:"0.01s",motionDurationMid:"0.01s",motionDurationSlow:"0.01s"}}},_.createElement("div",{ref:f,style:{paddingBottom:g,position:"relative",width:"fit-content",minWidth:y}},_.createElement(e,Object.assign({},A))))}}function vI(e,t,i){return ct({[`${e}-status-success`]:t==="success",[`${e}-status-warning`]:t==="warning",[`${e}-status-error`]:t==="error",[`${e}-status-validating`]:t==="validating",[`${e}-has-feedback`]:i})}const K8=(e,t)=>t||e,Ose=()=>{const[,e]=Uh(),t=new li(e.colorBgBase);let i={};return t.toHsl().l<.5&&(i={opacity:.65}),_.createElement("svg",{style:i,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},_.createElement("g",{fill:"none",fillRule:"evenodd"},_.createElement("g",{transform:"translate(24 31.67)"},_.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),_.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),_.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),_.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),_.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),_.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),_.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},_.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),_.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},Ase=Ose,Nse=()=>{const[,e]=Uh(),{colorFill:t,colorFillTertiary:i,colorFillQuaternary:a,colorBgContainer:c}=e,{borderColor:u,shadowColor:d,contentColor:p}=_.useMemo(()=>({borderColor:new li(t).onBackground(c).toHexShortString(),shadowColor:new li(i).onBackground(c).toHexShortString(),contentColor:new li(a).onBackground(c).toHexShortString()}),[t,i,a,c]);return _.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},_.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},_.createElement("ellipse",{fill:d,cx:"32",cy:"33",rx:"32",ry:"7"}),_.createElement("g",{fillRule:"nonzero",stroke:u},_.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),_.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:p}))))},xse=Nse,Pse=e=>{const{componentCls:t,margin:i,marginXS:a,marginXL:c,fontSize:u,lineHeight:d}=e;return{[t]:{marginInline:a,fontSize:u,lineHeight:d,textAlign:"center",[`${t}-image`]:{height:e.emptyImgHeight,marginBottom:a,opacity:e.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${t}-description`]:{color:e.colorText},[`${t}-footer`]:{marginTop:i},"&-normal":{marginBlock:c,color:e.colorTextDisabled,[`${t}-description`]:{color:e.colorTextDisabled},[`${t}-image`]:{height:e.emptyImgHeightMD}},"&-small":{marginBlock:a,color:e.colorTextDisabled,[`${t}-image`]:{height:e.emptyImgHeightSM}}}}},Dse=Uc("Empty",e=>{const{componentCls:t,controlHeightLG:i}=e,a=Qr(e,{emptyImgCls:`${t}-img`,emptyImgHeight:i*2.5,emptyImgHeightMD:i,emptyImgHeightSM:i*.875});return[Pse(a)]});var kse=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Y8=_.createElement(Ase,null),q8=_.createElement(xse,null),d1=e=>{var{className:t,rootClassName:i,prefixCls:a,image:c=Y8,description:u,children:d,imageStyle:p}=e,f=kse(e,["className","rootClassName","prefixCls","image","description","children","imageStyle"]);const{getPrefixCls:g,direction:E}=_.useContext(ei),y=g("empty",a),[C,w]=Dse(y),[R]=Mj("Empty"),O=typeof u<"u"?u:R==null?void 0:R.description,k=typeof O=="string"?O:"empty";let A=null;return typeof c=="string"?A=_.createElement("img",{alt:k,src:c}):A=c,C(_.createElement("div",Object.assign({className:ct(w,y,{[`${y}-normal`]:c===q8,[`${y}-rtl`]:E==="rtl"},t,i)},f),_.createElement("div",{className:`${y}-image`,style:p},A),O&&_.createElement("div",{className:`${y}-description`},O),d&&_.createElement("div",{className:`${y}-footer`},d)))};d1.PRESENTED_IMAGE_DEFAULT=Y8;d1.PRESENTED_IMAGE_SIMPLE=q8;const $p=d1,Lse=e=>{const{componentName:t}=e,{getPrefixCls:i}=_.useContext(ei),a=i("empty");switch(t){case"Table":case"List":return Ot.createElement($p,{image:$p.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return Ot.createElement($p,{image:$p.PRESENTED_IMAGE_SIMPLE,className:`${a}-small`});default:return Ot.createElement($p,null)}},Mse=Lse,Use=e=>{const{controlPaddingHorizontal:t}=e;return{position:"relative",display:"block",minHeight:e.controlHeight,padding:`${(e.controlHeight-e.fontSize*e.lineHeight)/2}px ${t}px`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,boxSizing:"border-box"}},Vse=e=>{const{antCls:t,componentCls:i}=e,a=`${i}-item`;return[{[`${i}-dropdown`]:Object.assign(Object.assign({},$u(e)),{position:"absolute",top:-9999,zIndex:e.zIndexPopup,boxSizing:"border-box",padding:e.paddingXXS,overflow:"hidden",fontSize:e.fontSize,fontVariant:"initial",backgroundColor:e.colorBgElevated,borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,[`
            &${t}-slide-up-enter${t}-slide-up-enter-active${i}-dropdown-placement-bottomLeft,
            &${t}-slide-up-appear${t}-slide-up-appear-active${i}-dropdown-placement-bottomLeft
          `]:{animationName:R8},[`
            &${t}-slide-up-enter${t}-slide-up-enter-active${i}-dropdown-placement-topLeft,
            &${t}-slide-up-appear${t}-slide-up-appear-active${i}-dropdown-placement-topLeft
          `]:{animationName:w8},[`&${t}-slide-up-leave${t}-slide-up-leave-active${i}-dropdown-placement-bottomLeft`]:{animationName:I8},[`&${t}-slide-up-leave${t}-slide-up-leave-active${i}-dropdown-placement-topLeft`]:{animationName:O8},"&-hidden":{display:"none"},[`${a}`]:Object.assign(Object.assign({},Use(e)),{cursor:"pointer",transition:`background ${e.motionDurationSlow} ease`,borderRadius:e.borderRadiusSM,"&-group":{color:e.colorTextDescription,fontSize:e.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign(Object.assign({flex:"auto"},mh),{"> *":Object.assign({},mh)}),"&-state":{flex:"none"},[`&-active:not(${a}-option-disabled)`]:{backgroundColor:e.controlItemBgHover},[`&-selected:not(${a}-option-disabled)`]:{color:e.colorText,fontWeight:e.fontWeightStrong,backgroundColor:e.controlItemBgActive,[`${a}-option-state`]:{color:e.colorPrimary}},"&-disabled":{[`&${a}-option-selected`]:{backgroundColor:e.colorBgContainerDisabled},color:e.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:e.controlPaddingHorizontal*2}}}),"&-rtl":{direction:"rtl"}})},Wv(e,"slide-up"),Wv(e,"slide-down"),vV(e,"move-up"),vV(e,"move-down")]},Fse=Vse,Vd=2;function X8(e){let{controlHeightSM:t,controlHeight:i,lineWidth:a}=e;const c=(i-t)/2-a,u=Math.ceil(c/2);return[c,u]}function Zb(e,t){const{componentCls:i,iconCls:a}=e,c=`${i}-selection-overflow`,u=e.controlHeightSM,[d]=X8(e),p=t?`${i}-${t}`:"";return{[`${i}-multiple${p}`]:{fontSize:e.fontSize,[c]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"}},[`${i}-selector`]:{display:"flex",flexWrap:"wrap",alignItems:"center",padding:`${d-Vd}px ${Vd*2}px`,borderRadius:e.borderRadius,[`${i}-show-search&`]:{cursor:"text"},[`${i}-disabled&`]:{background:e.colorBgContainerDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${Vd}px 0`,lineHeight:`${u}px`,content:'"\\a0"'}},[`
        &${i}-show-arrow ${i}-selector,
        &${i}-allow-clear ${i}-selector
      `]:{paddingInlineEnd:e.fontSizeIcon+e.controlPaddingHorizontal},[`${i}-selection-item`]:{position:"relative",display:"flex",flex:"none",boxSizing:"border-box",maxWidth:"100%",height:u,marginTop:Vd,marginBottom:Vd,lineHeight:`${u-e.lineWidth*2}px`,background:e.colorFillSecondary,border:`${e.lineWidth}px solid ${e.colorSplit}`,borderRadius:e.borderRadiusSM,cursor:"default",transition:`font-size ${e.motionDurationSlow}, line-height ${e.motionDurationSlow}, height ${e.motionDurationSlow}`,userSelect:"none",marginInlineEnd:Vd*2,paddingInlineStart:e.paddingXS,paddingInlineEnd:e.paddingXS/2,[`${i}-disabled&`]:{color:e.colorTextDisabled,borderColor:e.colorBorder,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:e.paddingXS/2,overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},b_()),{display:"inline-block",color:e.colorIcon,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${a}`]:{verticalAlign:"-0.2em"},"&:hover":{color:e.colorIconHover}})},[`${c}-item + ${c}-item`]:{[`${i}-selection-search`]:{marginInlineStart:0}},[`${i}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:e.inputPaddingHorizontalBase-d,[`
          &-input,
          &-mirror
        `]:{height:u,fontFamily:e.fontFamily,lineHeight:`${u}px`,transition:`all ${e.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${i}-selection-placeholder `]:{position:"absolute",top:"50%",insetInlineStart:e.inputPaddingHorizontalBase,insetInlineEnd:e.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${e.motionDurationSlow}`}}}}function Bse(e){const{componentCls:t}=e,i=Qr(e,{controlHeight:e.controlHeightSM,controlHeightSM:e.controlHeightXS,borderRadius:e.borderRadiusSM,borderRadiusSM:e.borderRadiusXS}),[,a]=X8(e);return[Zb(e),Zb(i,"sm"),{[`${t}-multiple${t}-sm`]:{[`${t}-selection-placeholder`]:{insetInline:e.controlPaddingHorizontalSM-e.lineWidth},[`${t}-selection-search`]:{marginInlineStart:a}}},Zb(Qr(e,{fontSize:e.fontSizeLG,controlHeight:e.controlHeightLG,controlHeightSM:e.controlHeight,borderRadius:e.borderRadiusLG,borderRadiusSM:e.borderRadius}),"lg")]}function eT(e,t){const{componentCls:i,inputPaddingHorizontalBase:a,borderRadius:c}=e,u=e.controlHeight-e.lineWidth*2,d=Math.ceil(e.fontSize*1.25),p=t?`${i}-${t}`:"";return{[`${i}-single${p}`]:{fontSize:e.fontSize,[`${i}-selector`]:Object.assign(Object.assign({},$u(e)),{display:"flex",borderRadius:c,[`${i}-selection-search`]:{position:"absolute",top:0,insetInlineStart:a,insetInlineEnd:a,bottom:0,"&-input":{width:"100%"}},[`
          ${i}-selection-item,
          ${i}-selection-placeholder
        `]:{padding:0,lineHeight:`${u}px`,transition:`all ${e.motionDurationSlow}, visibility 0s`,"@supports (-moz-appearance: meterbar)":{lineHeight:`${u}px`}},[`${i}-selection-item`]:{position:"relative",userSelect:"none"},[`${i}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${i}-selection-item:after`,`${i}-selection-placeholder:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${i}-show-arrow ${i}-selection-item,
        &${i}-show-arrow ${i}-selection-placeholder
      `]:{paddingInlineEnd:d},[`&${i}-open ${i}-selection-item`]:{color:e.colorTextPlaceholder},[`&:not(${i}-customize-input)`]:{[`${i}-selector`]:{width:"100%",height:e.controlHeight,padding:`0 ${a}px`,[`${i}-selection-search-input`]:{height:u},"&:after":{lineHeight:`${u}px`}}},[`&${i}-customize-input`]:{[`${i}-selector`]:{"&:after":{display:"none"},[`${i}-selection-search`]:{position:"static",width:"100%"},[`${i}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${a}px`,"&:after":{display:"none"}}}}}}}function jse(e){const{componentCls:t}=e,i=e.controlPaddingHorizontalSM-e.lineWidth;return[eT(e),eT(Qr(e,{controlHeight:e.controlHeightSM,borderRadius:e.borderRadiusSM}),"sm"),{[`${t}-single${t}-sm`]:{[`&:not(${t}-customize-input)`]:{[`${t}-selection-search`]:{insetInlineStart:i,insetInlineEnd:i},[`${t}-selector`]:{padding:`0 ${i}px`},[`&${t}-show-arrow ${t}-selection-search`]:{insetInlineEnd:i+e.fontSize*1.5},[`
            &${t}-show-arrow ${t}-selection-item,
            &${t}-show-arrow ${t}-selection-placeholder
          `]:{paddingInlineEnd:e.fontSize*1.5}}}},eT(Qr(e,{controlHeight:e.controlHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG}),"lg")]}const $se=e=>{const{componentCls:t}=e;return{position:"relative",backgroundColor:e.colorBgContainer,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,input:{cursor:"pointer"},[`${t}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit"}},[`${t}-disabled&`]:{color:e.colorTextDisabled,background:e.colorBgContainerDisabled,cursor:"not-allowed",[`${t}-multiple&`]:{background:e.colorBgContainerDisabled},input:{cursor:"not-allowed"}}}},tT=function(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const{componentCls:a,borderHoverColor:c,outlineColor:u,antCls:d}=t,p=i?{[`${a}-selector`]:{borderColor:c}}:{};return{[e]:{[`&:not(${a}-disabled):not(${a}-customize-input):not(${d}-pagination-size-changer)`]:Object.assign(Object.assign({},p),{[`${a}-focused& ${a}-selector`]:{borderColor:c,boxShadow:`0 0 0 ${t.controlOutlineWidth}px ${u}`,outline:0},[`&:hover ${a}-selector`]:{borderColor:c}})}}},Hse=e=>{const{componentCls:t}=e;return{[`${t}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},Wse=e=>{const{componentCls:t,inputPaddingHorizontalBase:i,iconCls:a}=e;return{[t]:Object.assign(Object.assign({},$u(e)),{position:"relative",display:"inline-block",cursor:"pointer",[`&:not(${t}-customize-input) ${t}-selector`]:Object.assign(Object.assign({},$se(e)),Hse(e)),[`${t}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal"},mh),{"> *":Object.assign({lineHeight:"inherit"},mh)}),[`${t}-selection-placeholder`]:Object.assign(Object.assign({},mh),{flex:1,color:e.colorTextPlaceholder,pointerEvents:"none"}),[`${t}-arrow`]:Object.assign(Object.assign({},b_()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:i,height:e.fontSizeIcon,marginTop:-e.fontSizeIcon/2,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",[a]:{verticalAlign:"top",transition:`transform ${e.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${t}-suffix)`]:{pointerEvents:"auto"}},[`${t}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${t}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:i,zIndex:1,display:"inline-block",width:e.fontSizeIcon,height:e.fontSizeIcon,marginTop:-e.fontSizeIcon/2,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",background:e.colorBgContainer,cursor:"pointer",opacity:0,transition:`color ${e.motionDurationMid} ease, opacity ${e.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:e.colorTextTertiary}},"&:hover":{[`${t}-clear`]:{opacity:1}}}),[`${t}-has-feedback`]:{[`${t}-clear`]:{insetInlineEnd:i+e.fontSize+e.paddingXXS}}}},zse=e=>{const{componentCls:t}=e;return[{[t]:{[`&-borderless ${t}-selector`]:{backgroundColor:"transparent !important",borderColor:"transparent !important",boxShadow:"none !important"},[`&${t}-in-form-item`]:{width:"100%"}}},Wse(e),jse(e),Bse(e),Fse(e),{[`${t}-rtl`]:{direction:"rtl"}},tT(t,Qr(e,{borderHoverColor:e.colorPrimaryHover,outlineColor:e.controlOutline})),tT(`${t}-status-error`,Qr(e,{borderHoverColor:e.colorErrorHover,outlineColor:e.colorErrorOutline}),!0),tT(`${t}-status-warning`,Qr(e,{borderHoverColor:e.colorWarningHover,outlineColor:e.colorWarningOutline}),!0),t1(e,{borderElCls:`${t}-selector`,focusElCls:`${t}-focused`})]},Gse=Uc("Select",(e,t)=>{let{rootPrefixCls:i}=t;const a=Qr(e,{rootPrefixCls:i,inputPaddingHorizontalBase:e.paddingSM-1});return[zse(a)]},e=>({zIndexPopup:e.zIndexPopupBase+50})),Cg={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:"visible"},Kse={bottomLeft:Object.assign(Object.assign({},Cg),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},Cg),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},Cg),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},Cg),{points:["br","tr"],offset:[0,-4]})};function Yse(e){return e||Kse}function qse(e){return e??!0}var Xse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const Jse=Xse;var J8=function(t,i){return _.createElement(Na,ce(ce({},t),{},{ref:i,icon:Jse}))};J8.displayName="CheckOutlined";const Q8=_.forwardRef(J8);var Qse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};const Zse=Qse;var Z8=function(t,i){return _.createElement(Na,ce(ce({},t),{},{ref:i,icon:Zse}))};Z8.displayName="DownOutlined";const ece=_.forwardRef(Z8);var tce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};const nce=tce;var e5=function(t,i){return _.createElement(Na,ce(ce({},t),{},{ref:i,icon:nce}))};e5.displayName="SearchOutlined";const rce=_.forwardRef(e5);function ice(e){let{suffixIcon:t,clearIcon:i,menuItemSelectedIcon:a,removeIcon:c,loading:u,multiple:d,hasFeedback:p,prefixCls:f,showArrow:g,feedbackIcon:E}=e;const y=i??_.createElement(n8,null),C=k=>_.createElement(_.Fragment,null,g!==!1&&k,p&&E);let w=null;if(t!==void 0)w=C(t);else if(u)w=C(_.createElement(lI,{spin:!0}));else{const k=`${f}-suffix`;w=A=>{let{open:x,showSearch:P}=A;return C(x&&P?_.createElement(rce,{className:k}):_.createElement(ece,{className:k}))}}let R=null;a!==void 0?R=a:d?R=_.createElement(Q8,null):R=null;let O=null;return c!==void 0?O=c:O=_.createElement(Hre,null),{clearIcon:y,suffixIcon:w,itemIcon:R,removeIcon:O}}var oce=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const t5="SECRET_COMBOBOX_MODE_DO_NOT_USE",ace=(e,t)=>{var{prefixCls:i,bordered:a=!0,className:c,rootClassName:u,getPopupContainer:d,popupClassName:p,dropdownClassName:f,listHeight:g=256,placement:E,listItemHeight:y=24,size:C,disabled:w,notFoundContent:R,status:O,showArrow:k,builtinPlacements:A}=e,x=oce(e,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","showArrow","builtinPlacements"]);const{getPopupContainer:P,getPrefixCls:M,renderEmpty:B,direction:F,virtual:j,dropdownMatchSelectWidth:$,select:ee}=_.useContext(ei),H=_.useContext(Vh),J=M("select",i),X=M(),{compactSize:W,compactItemClassnames:Z}=g8(J,F),[ne,ie]=Gse(J),de=_.useMemo(()=>{const{mode:Be}=x;if(Be!=="combobox")return Be===t5?"combobox":Be},[x.mode]),oe=de==="multiple"||de==="tags",fe=qse(k),{status:ge,hasFeedback:ae,isFormItemInput:se,feedbackIcon:he}=_.useContext(b8),pe=K8(ge,O);let Oe;R!==void 0?Oe=R:de==="combobox"?Oe=null:Oe=(B==null?void 0:B("Select"))||_.createElement(Mse,{componentName:"Select"});const{suffixIcon:be,itemIcon:Ne,removeIcon:Ae,clearIcon:at}=ice(Object.assign(Object.assign({},x),{multiple:oe,hasFeedback:ae,feedbackIcon:he,showArrow:fe,prefixCls:J})),it=Za(x,["suffixIcon","itemIcon"]),ze=ct(p||f,{[`${J}-dropdown-${F}`]:F==="rtl"},u,ie),ht=W||C||H,Pe=_.useContext(T_),Ye=w??Pe,lt=ct({[`${J}-lg`]:ht==="large",[`${J}-sm`]:ht==="small",[`${J}-rtl`]:F==="rtl",[`${J}-borderless`]:!a,[`${J}-in-form-item`]:se},vI(J,pe,ae),Z,c,u,ie),At=_.useMemo(()=>E!==void 0?E:F==="rtl"?"bottomRight":"bottomLeft",[E,F]),_t=Yse(A);return ne(_.createElement(u1,Object.assign({ref:t,virtual:j,dropdownMatchSelectWidth:$,showSearch:ee==null?void 0:ee.showSearch},it,{builtinPlacements:_t,transitionName:S8(X,hoe(E),x.transitionName),listHeight:g,listItemHeight:y,mode:de,prefixCls:J,placement:At,direction:F,inputIcon:be,menuItemSelectedIcon:Ne,removeIcon:Ae,clearIcon:at,notFoundContent:Oe,className:lt,getPopupContainer:d||P,dropdownClassName:ze,showArrow:ae||fe,disabled:Ye})))},Bh=_.forwardRef(ace),sce=wse(Bh);Bh.SECRET_COMBOBOX_MODE_DO_NOT_USE=t5;Bh.Option=l1;Bh.OptGroup=c1;Bh._InternalPanelDoNotUseOrYouWillBeFired=sce;const n5=Bh;var Fd={shiftX:64,adjustY:1},Bd={adjustX:1,shiftY:!0},ja=[0,0],cce={left:{points:["cr","cl"],overflow:Bd,offset:[-4,0],targetOffset:ja},right:{points:["cl","cr"],overflow:Bd,offset:[4,0],targetOffset:ja},top:{points:["bc","tc"],overflow:Fd,offset:[0,-4],targetOffset:ja},bottom:{points:["tc","bc"],overflow:Fd,offset:[0,4],targetOffset:ja},topLeft:{points:["bl","tl"],overflow:Fd,offset:[0,-4],targetOffset:ja},leftTop:{points:["tr","tl"],overflow:Bd,offset:[-4,0],targetOffset:ja},topRight:{points:["br","tr"],overflow:Fd,offset:[0,-4],targetOffset:ja},rightTop:{points:["tl","tr"],overflow:Bd,offset:[4,0],targetOffset:ja},bottomRight:{points:["tr","br"],overflow:Fd,offset:[0,4],targetOffset:ja},rightBottom:{points:["bl","br"],overflow:Bd,offset:[4,0],targetOffset:ja},bottomLeft:{points:["tl","bl"],overflow:Fd,offset:[0,4],targetOffset:ja},leftBottom:{points:["br","bl"],overflow:Bd,offset:[-4,0],targetOffset:ja}};function r5(e){var t=e.children,i=e.prefixCls,a=e.id,c=e.overlayInnerStyle,u=e.className,d=e.style;return _.createElement("div",{className:ct("".concat(i,"-content"),u),style:d},_.createElement("div",{className:"".concat(i,"-inner"),id:a,role:"tooltip",style:c},typeof t=="function"?t():t))}var lce=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],uce=function(t,i){var a=t.overlayClassName,c=t.trigger,u=c===void 0?["hover"]:c,d=t.mouseEnterDelay,p=d===void 0?0:d,f=t.mouseLeaveDelay,g=f===void 0?.1:f,E=t.overlayStyle,y=t.prefixCls,C=y===void 0?"rc-tooltip":y,w=t.children,R=t.onVisibleChange,O=t.afterVisibleChange,k=t.transitionName,A=t.animation,x=t.motion,P=t.placement,M=P===void 0?"right":P,B=t.align,F=B===void 0?{}:B,j=t.destroyTooltipOnHide,$=j===void 0?!1:j,ee=t.defaultVisible,H=t.getTooltipContainer,J=t.overlayInnerStyle;t.arrowContent;var X=t.overlay,W=t.id,Z=t.showArrow,ne=Z===void 0?!0:Z,ie=mn(t,lce),de=_.useRef(null);_.useImperativeHandle(i,function(){return de.current});var oe=ce({},ie);"visible"in t&&(oe.popupVisible=t.visible);var fe=function(){return _.createElement(r5,{key:"content",prefixCls:C,id:W,overlayInnerStyle:J},X)};return _.createElement(V8,He({popupClassName:a,prefixCls:C,popup:fe,action:u,builtinPlacements:cce,popupPlacement:M,ref:de,popupAlign:F,getPopupContainer:H,onPopupVisibleChange:R,afterPopupVisibleChange:O,popupTransitionName:k,popupAnimation:A,popupMotion:x,defaultPopupVisible:ee,autoDestroy:$,mouseLeaveDelay:g,popupStyle:E,mouseEnterDelay:p,arrow:ne},oe),w)};const dce=_.forwardRef(uce),hl=(e,t)=>new li(e).setAlpha(t).toRgbString(),jd=(e,t)=>new li(e).lighten(t).toHexString(),hce=e=>{const t=Dc(e,{theme:"dark"});return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[6],6:t[5],7:t[4],8:t[6],9:t[5],10:t[4]}},pce=(e,t)=>{const i=e||"#000",a=t||"#fff";return{colorBgBase:i,colorTextBase:a,colorText:hl(a,.85),colorTextSecondary:hl(a,.65),colorTextTertiary:hl(a,.45),colorTextQuaternary:hl(a,.25),colorFill:hl(a,.18),colorFillSecondary:hl(a,.12),colorFillTertiary:hl(a,.08),colorFillQuaternary:hl(a,.04),colorBgElevated:jd(i,12),colorBgContainer:jd(i,8),colorBgLayout:jd(i,0),colorBgSpotlight:jd(i,26),colorBorder:jd(i,26),colorBorderSecondary:jd(i,19)}},fce=(e,t)=>{const i=Object.keys(Jw).map(c=>{const u=Dc(e[c],{theme:"dark"});return new Array(10).fill(1).reduce((d,p,f)=>(d[`${c}-${f+1}`]=u[f],d[`${c}${f+1}`]=u[f],d),{})}).reduce((c,u)=>(c=Object.assign(Object.assign({},c),u),c),{}),a=t??C_(e);return Object.assign(Object.assign(Object.assign({},a),i),jj(e,{generateColorPalettes:hce,generateNeutralColorPalettes:pce}))},mce=fce;function gce(e){const{sizeUnit:t,sizeStep:i}=e,a=i-2;return{sizeXXL:t*(a+10),sizeXL:t*(a+6),sizeLG:t*(a+2),sizeMD:t*(a+2),sizeMS:t*(a+1),size:t*a,sizeSM:t*a,sizeXS:t*(a-1),sizeXXS:t*(a-1)}}const vce=(e,t)=>{const i=t??C_(e),a=i.fontSizeSM,c=i.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},i),gce(t??e)),$j(a)),{controlHeight:c}),Bj(Object.assign(Object.assign({},i),{controlHeight:c})))},Ece=vce;function _ce(){const[e,t,i]=Uh();return{theme:e,token:t,hashId:i}}const Sce={defaultConfig:Fv,defaultSeed:Fv.token,useToken:_ce,defaultAlgorithm:C_,darkAlgorithm:mce,compactAlgorithm:Ece},i5=8;function o5(e){const t=i5,{contentRadius:i,limitVerticalRadius:a}=e,c=i>12?i+2:12;return{dropdownArrowOffset:c,dropdownArrowOffsetVertical:a?t:c}}function bg(e,t){return e?t:{}}function yce(e,t){const{componentCls:i,sizePopupArrow:a,borderRadiusXS:c,borderRadiusOuter:u,boxShadowPopoverArrow:d}=e,{colorBg:p,contentRadius:f=e.borderRadiusLG,limitVerticalRadius:g,arrowDistance:E=0,arrowPlacement:y={left:!0,right:!0,top:!0,bottom:!0}}=t,{dropdownArrowOffsetVertical:C,dropdownArrowOffset:w}=o5({contentRadius:f,limitVerticalRadius:g});return{[i]:Object.assign(Object.assign(Object.assign(Object.assign({[`${i}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},cre(a,c,u,p,d)),{"&:before":{background:p}})]},bg(!!y.top,{[[`&-placement-top ${i}-arrow`,`&-placement-topLeft ${i}-arrow`,`&-placement-topRight ${i}-arrow`].join(",")]:{bottom:E,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${i}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${i}-arrow`]:{left:{_skip_check_:!0,value:w}},[`&-placement-topRight ${i}-arrow`]:{right:{_skip_check_:!0,value:w}}})),bg(!!y.bottom,{[[`&-placement-bottom ${i}-arrow`,`&-placement-bottomLeft ${i}-arrow`,`&-placement-bottomRight ${i}-arrow`].join(",")]:{top:E,transform:"translateY(-100%)"},[`&-placement-bottom ${i}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${i}-arrow`]:{left:{_skip_check_:!0,value:w}},[`&-placement-bottomRight ${i}-arrow`]:{right:{_skip_check_:!0,value:w}}})),bg(!!y.left,{[[`&-placement-left ${i}-arrow`,`&-placement-leftTop ${i}-arrow`,`&-placement-leftBottom ${i}-arrow`].join(",")]:{right:{_skip_check_:!0,value:E},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${i}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${i}-arrow`]:{top:C},[`&-placement-leftBottom ${i}-arrow`]:{bottom:C}})),bg(!!y.right,{[[`&-placement-right ${i}-arrow`,`&-placement-rightTop ${i}-arrow`,`&-placement-rightBottom ${i}-arrow`].join(",")]:{left:{_skip_check_:!0,value:E},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${i}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${i}-arrow`]:{top:C},[`&-placement-rightBottom ${i}-arrow`]:{bottom:C}}))}}function Cce(e,t,i,a){if(a===!1)return{adjustX:!1,adjustY:!1};const c=a&&typeof a=="object"?a:{},u={};switch(e){case"top":case"bottom":u.shiftX=t.dropdownArrowOffset*2+i;break;case"left":case"right":u.shiftY=t.dropdownArrowOffsetVertical*2+i;break}const d=Object.assign(Object.assign({},u),c);return d.shiftX||(d.adjustX=!0),d.shiftY||(d.adjustY=!0),d}const xV={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},bce={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},Tce=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function Rce(e){const{arrowWidth:t,autoAdjustOverflow:i,arrowPointAtCenter:a,offset:c,borderRadius:u}=e,d=t/2,p={};return Object.keys(xV).forEach(f=>{const g=a&&bce[f]||xV[f],E=Object.assign(Object.assign({},g),{offset:[0,0]});switch(p[f]=E,Tce.has(f)&&(E.autoArrow=!1),f){case"top":case"topLeft":case"topRight":E.offset[1]=-d-c;break;case"bottom":case"bottomLeft":case"bottomRight":E.offset[1]=d+c;break;case"left":case"leftTop":case"leftBottom":E.offset[0]=-d-c;break;case"right":case"rightTop":case"rightBottom":E.offset[0]=d+c;break}const y=o5({contentRadius:u,limitVerticalRadius:!0});if(a)switch(f){case"topLeft":case"bottomLeft":E.offset[0]=-y.dropdownArrowOffset-d;break;case"topRight":case"bottomRight":E.offset[0]=y.dropdownArrowOffset+d;break;case"leftTop":case"rightTop":E.offset[1]=-y.dropdownArrowOffset-d;break;case"leftBottom":case"rightBottom":E.offset[1]=y.dropdownArrowOffset+d;break}E.overflow=Cce(f,y,t,i)}),p}const Ice=e=>{const{componentCls:t,tooltipMaxWidth:i,tooltipColor:a,tooltipBg:c,tooltipBorderRadius:u,zIndexPopup:d,controlHeight:p,boxShadowSecondary:f,paddingSM:g,paddingXS:E,tooltipRadiusOuter:y}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},$u(e)),{position:"absolute",zIndex:d,display:"block",width:"max-content",maxWidth:i,visibility:"visible","&-hidden":{display:"none"},"--antd-arrow-background-color":c,[`${t}-inner`]:{minWidth:p,minHeight:p,padding:`${g/2}px ${E}px`,color:a,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:c,borderRadius:u,boxShadow:f},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${t}-inner`]:{borderRadius:Math.min(u,i5)}},[`${t}-content`]:{position:"relative"}}),fre(e,(C,w)=>{let{darkColor:R}=w;return{[`&${t}-${C}`]:{[`${t}-inner`]:{backgroundColor:R},[`${t}-arrow`]:{"--antd-arrow-background-color":R}}}})),{"&-rtl":{direction:"rtl"}})},yce(Qr(e,{borderRadiusOuter:y}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:u,limitVerticalRadius:!0}),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},a5=(e,t)=>Uc("Tooltip",a=>{if(t===!1)return[];const{borderRadius:c,colorTextLightSolid:u,colorBgDefault:d,borderRadiusOuter:p}=a,f=Qr(a,{tooltipMaxWidth:250,tooltipColor:u,tooltipBorderRadius:c,tooltipBg:d,tooltipRadiusOuter:p>4?4:p});return[Ice(f),A8(a,"zoom-big-fast")]},a=>{let{zIndexPopupBase:c,colorBgSpotlight:u}=a;return{zIndexPopup:c+70,colorBgDefault:u}})(e),wce=Vv.map(e=>`${e}-inverse`);function Oce(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(Et(wce),Et(Vv)).includes(e):Vv.includes(e)}function s5(e,t){const i=Oce(t),a=ct({[`${e}-${t}`]:t&&i}),c={},u={};return t&&!i&&(c.background=t,u["--antd-arrow-background-color"]=t),{className:a,overlayStyle:c,arrowStyle:u}}function Ace(e){const{prefixCls:t,className:i,placement:a="top",title:c,color:u,overlayInnerStyle:d}=e,{getPrefixCls:p}=_.useContext(ei),f=p("tooltip",t),[g,E]=a5(f,!0),y=s5(f,u),C=Object.assign(Object.assign({},d),y.overlayStyle),w=y.arrowStyle;return g(_.createElement("div",{className:ct(E,f,`${f}-pure`,`${f}-placement-${a}`,i,y.className),style:w},_.createElement("div",{className:`${f}-arrow`}),_.createElement(r5,Object.assign({},e,{className:E,prefixCls:f,overlayInnerStyle:C}),c)))}var Nce=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const{useToken:xce}=Sce,Pce=(e,t)=>{const i={},a=Object.assign({},e);return t.forEach(c=>{e&&c in e&&(i[c]=e[c],delete a[c])}),{picked:i,omitted:a}};function Dce(e,t){const i=e.type;if((i.__ANT_BUTTON===!0||e.type==="button")&&e.props.disabled||i.__ANT_SWITCH===!0&&(e.props.disabled||e.props.loading)||i.__ANT_RADIO===!0&&e.props.disabled){const{picked:a,omitted:c}=Pce(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),u=Object.assign(Object.assign({display:"inline-block"},a),{cursor:"not-allowed",width:e.props.block?"100%":void 0}),d=Object.assign(Object.assign({},c),{pointerEvents:"none"}),p=jl(e,{style:d,className:null});return _.createElement("span",{style:u,className:ct(e.props.className,`${t}-disabled-compatible-wrapper`)},p)}return e}const c5=_.forwardRef((e,t)=>{var i,a;const{prefixCls:c,openClassName:u,getTooltipContainer:d,overlayClassName:p,color:f,overlayInnerStyle:g,children:E,afterOpenChange:y,afterVisibleChange:C,destroyTooltipOnHide:w,arrow:R=!0,title:O,overlay:k,builtinPlacements:A,arrowPointAtCenter:x=!1,autoAdjustOverflow:P=!0}=e,M=!!R,{token:B}=xce(),{getPopupContainer:F,getPrefixCls:j,direction:$}=_.useContext(ei),ee=_.useRef(null),H=()=>{var $e;($e=ee.current)===null||$e===void 0||$e.forceAlign()};_.useImperativeHandle(t,()=>({forceAlign:H,forcePopupAlign:()=>{H()}}));const[J,X]=Ka(!1,{value:(i=e.open)!==null&&i!==void 0?i:e.visible,defaultValue:(a=e.defaultOpen)!==null&&a!==void 0?a:e.defaultVisible}),W=!O&&!k&&O!==0,Z=$e=>{var ke,et;X(W?!1:$e),W||((ke=e.onOpenChange)===null||ke===void 0||ke.call(e,$e),(et=e.onVisibleChange)===null||et===void 0||et.call(e,$e))},ne=_.useMemo(()=>{var $e,ke;let et=x;return typeof R=="object"&&(et=(ke=($e=R.pointAtCenter)!==null&&$e!==void 0?$e:R.arrowPointAtCenter)!==null&&ke!==void 0?ke:x),A||Rce({arrowPointAtCenter:et,autoAdjustOverflow:P,arrowWidth:M?B.sizePopupArrow:0,borderRadius:B.borderRadius,offset:B.marginXXS})},[x,R,A,B]),ie=($e,ke)=>{const et=Object.keys(ne).find(ft=>{var Rt,on;return ne[ft].points[0]===((Rt=ke.points)===null||Rt===void 0?void 0:Rt[0])&&ne[ft].points[1]===((on=ke.points)===null||on===void 0?void 0:on[1])});if(et){const ft=$e.getBoundingClientRect(),Rt={top:"50%",left:"50%"};/top|Bottom/.test(et)?Rt.top=`${ft.height-ke.offset[1]}px`:/Top|bottom/.test(et)&&(Rt.top=`${-ke.offset[1]}px`),/left|Right/.test(et)?Rt.left=`${ft.width-ke.offset[0]}px`:/right|Left/.test(et)&&(Rt.left=`${-ke.offset[0]}px`),$e.style.transformOrigin=`${Rt.left} ${Rt.top}`}},de=_.useMemo(()=>O===0?O:k||O||"",[k,O]),oe=_.createElement(xie,null,typeof de=="function"?de():de),{getPopupContainer:fe,placement:ge="top",mouseEnterDelay:ae=.1,mouseLeaveDelay:se=.1,overlayStyle:he,rootClassName:pe}=e,Oe=Nce(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),be=j("tooltip",c),Ne=j(),Ae=e["data-popover-inject"];let at=J;!("open"in e)&&!("visible"in e)&&W&&(at=!1);const it=Dce(Uu(E)&&!p8(E)?E:_.createElement("span",null,E),be),ze=it.props,ht=!ze.className||typeof ze.className=="string"?ct(ze.className,{[u||`${be}-open`]:!0}):ze.className,[Pe,Ye]=a5(be,!Ae),lt=s5(be,f),At=Object.assign(Object.assign({},g),lt.overlayStyle),_t=lt.arrowStyle,Be=ct(p,{[`${be}-rtl`]:$==="rtl"},lt.className,pe,Ye);return Pe(_.createElement(dce,Object.assign({},Oe,{showArrow:M,placement:ge,mouseEnterDelay:ae,mouseLeaveDelay:se,prefixCls:be,overlayClassName:Be,overlayStyle:Object.assign(Object.assign({},_t),he),getTooltipContainer:fe||d||F,ref:ee,builtinPlacements:ne,overlay:oe,visible:at,onVisibleChange:Z,afterVisibleChange:y??C,onPopupAlign:ie,overlayInnerStyle:At,arrowContent:_.createElement("span",{className:`${be}-arrow-content`}),motion:{motionName:S8(Ne,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!w}),at?jl(it,{className:ht}):it))});c5._InternalPanelDoNotUseOrYouWillBeFired=Ace;const Yv=c5;var kce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};const Lce=kce;var l5=function(t,i){return _.createElement(Na,ce(ce({},t),{},{ref:i,icon:Lce}))};l5.displayName="RightOutlined";const PV=_.forwardRef(l5);var Mce=_.forwardRef(function(e,t){var i=e.didUpdate,a=e.getContainer,c=e.children,u=_.useRef(),d=_.useRef();_.useImperativeHandle(t,function(){return{}});var p=_.useRef(!1);return!p.current&&wo()&&(d.current=a(),u.current=d.current.parentNode,p.current=!0),_.useEffect(function(){i==null||i(e)}),_.useEffect(function(){return d.current.parentNode===null&&u.current!==null&&u.current.appendChild(d.current),function(){var f,g;(f=d.current)===null||f===void 0||(g=f.parentNode)===null||g===void 0||g.removeChild(d.current)}},[]),d.current?Rh.createPortal(c,d.current):null});function Uce(e,t,i){return i?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function Vce(e,t,i){var a=e[t]||{};return ce(ce({},a),i)}function Fce(e,t,i,a){for(var c=i.points,u=Object.keys(e),d=0;d<u.length;d+=1){var p=u[d];if(Uce(e[p].points,c,a))return"".concat(t,"-placement-").concat(p)}return""}function u5(e){var t=e.prefixCls,i=e.motion,a=e.animation,c=e.transitionName;return i||(a?{motionName:"".concat(t,"-").concat(a)}:c?{motionName:c}:null)}function Bce(e){var t=e.prefixCls,i=e.visible,a=e.zIndex,c=e.mask,u=e.maskMotion,d=e.maskAnimation,p=e.maskTransitionName;if(!c)return null;var f={};return(u||p||d)&&(f=ce({motionAppear:!0},u5({motion:u,prefixCls:t,transitionName:p,animation:d}))),_.createElement(Vc,He({},f,{visible:i,removeOnLeave:!0}),function(g){var E=g.className;return _.createElement("div",{style:{zIndex:a},className:ct("".concat(t,"-mask"),E)})})}function DV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function kV(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?DV(Object(i),!0).forEach(function(a){jce(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):DV(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function EI(e){return EI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},EI(e)}function jce(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Hp,$ce={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function qv(){if(Hp!==void 0)return Hp;Hp="";var e=document.createElement("p").style,t="Transform";for(var i in $ce)i+t in e&&(Hp=i);return Hp}function d5(){return qv()?"".concat(qv(),"TransitionProperty"):"transitionProperty"}function A_(){return qv()?"".concat(qv(),"Transform"):"transform"}function LV(e,t){var i=d5();i&&(e.style[i]=t,i!=="transitionProperty"&&(e.style.transitionProperty=t))}function nT(e,t){var i=A_();i&&(e.style[i]=t,i!=="transform"&&(e.style.transform=t))}function Hce(e){return e.style.transitionProperty||e.style[d5()]}function Wce(e){var t=window.getComputedStyle(e,null),i=t.getPropertyValue("transform")||t.getPropertyValue(A_());if(i&&i!=="none"){var a=i.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(a[12]||a[4],0),y:parseFloat(a[13]||a[5],0)}}return{x:0,y:0}}var zce=/matrix\((.*)\)/,Gce=/matrix3d\((.*)\)/;function Kce(e,t){var i=window.getComputedStyle(e,null),a=i.getPropertyValue("transform")||i.getPropertyValue(A_());if(a&&a!=="none"){var c,u=a.match(zce);if(u)u=u[1],c=u.split(",").map(function(p){return parseFloat(p,10)}),c[4]=t.x,c[5]=t.y,nT(e,"matrix(".concat(c.join(","),")"));else{var d=a.match(Gce)[1];c=d.split(",").map(function(p){return parseFloat(p,10)}),c[12]=t.x,c[13]=t.y,nT(e,"matrix3d(".concat(c.join(","),")"))}}else nT(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}var Yce=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,sm;function MV(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function gh(e,t,i){var a=i;if(EI(t)==="object"){for(var c in t)t.hasOwnProperty(c)&&gh(e,c,t[c]);return}if(typeof a<"u"){typeof a=="number"&&(a="".concat(a,"px")),e.style[t]=a;return}return sm(e,t)}function qce(e){var t,i,a,c=e.ownerDocument,u=c.body,d=c&&c.documentElement;return t=e.getBoundingClientRect(),i=Math.floor(t.left),a=Math.floor(t.top),i-=d.clientLeft||u.clientLeft||0,a-=d.clientTop||u.clientTop||0,{left:i,top:a}}function h5(e,t){var i=e["page".concat(t?"Y":"X","Offset")],a="scroll".concat(t?"Top":"Left");if(typeof i!="number"){var c=e.document;i=c.documentElement[a],typeof i!="number"&&(i=c.body[a])}return i}function p5(e){return h5(e)}function f5(e){return h5(e,!0)}function Kf(e){var t=qce(e),i=e.ownerDocument,a=i.defaultView||i.parentWindow;return t.left+=p5(a),t.top+=f5(a),t}function h1(e){return e!=null&&e==e.window}function m5(e){return h1(e)?e.document:e.nodeType===9?e:e.ownerDocument}function Xce(e,t,i){var a=i,c="",u=m5(e);return a=a||u.defaultView.getComputedStyle(e,null),a&&(c=a.getPropertyValue(t)||a[t]),c}var Jce=new RegExp("^(".concat(Yce,")(?!px)[a-z%]+$"),"i"),Qce=/^(top|right|bottom|left)$/,rT="currentStyle",iT="runtimeStyle",mu="left",Zce="px";function ele(e,t){var i=e[rT]&&e[rT][t];if(Jce.test(i)&&!Qce.test(t)){var a=e.style,c=a[mu],u=e[iT][mu];e[iT][mu]=e[rT][mu],a[mu]=t==="fontSize"?"1em":i||0,i=a.pixelLeft+Zce,a[mu]=c,e[iT][mu]=u}return i===""?"auto":i}typeof window<"u"&&(sm=window.getComputedStyle?Xce:ele);function Tg(e,t){return e==="left"?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function UV(e){if(e==="left")return"right";if(e==="right")return"left";if(e==="top")return"bottom";if(e==="bottom")return"top"}function VV(e,t,i){gh(e,"position")==="static"&&(e.style.position="relative");var a=-999,c=-999,u=Tg("left",i),d=Tg("top",i),p=UV(u),f=UV(d);u!=="left"&&(a=999),d!=="top"&&(c=999);var g="",E=Kf(e);("left"in t||"top"in t)&&(g=Hce(e)||"",LV(e,"none")),"left"in t&&(e.style[p]="",e.style[u]="".concat(a,"px")),"top"in t&&(e.style[f]="",e.style[d]="".concat(c,"px")),MV(e);var y=Kf(e),C={};for(var w in t)if(t.hasOwnProperty(w)){var R=Tg(w,i),O=w==="left"?a:c,k=E[w]-y[w];R===w?C[R]=O+k:C[R]=O-k}gh(e,C),MV(e),("left"in t||"top"in t)&&LV(e,g);var A={};for(var x in t)if(t.hasOwnProperty(x)){var P=Tg(x,i),M=t[x]-E[x];x===P?A[P]=C[P]+M:A[P]=C[P]-M}gh(e,A)}function tle(e,t){var i=Kf(e),a=Wce(e),c={x:a.x,y:a.y};"left"in t&&(c.x=a.x+t.left-i.left),"top"in t&&(c.y=a.y+t.top-i.top),Kce(e,c)}function nle(e,t,i){if(i.ignoreShake){var a=Kf(e),c=a.left.toFixed(0),u=a.top.toFixed(0),d=t.left.toFixed(0),p=t.top.toFixed(0);if(c===d&&u===p)return}i.useCssRight||i.useCssBottom?VV(e,t,i):i.useCssTransform&&A_()in document.body.style?tle(e,t):VV(e,t,i)}function p1(e,t){for(var i=0;i<e.length;i++)t(e[i])}function g5(e){return sm(e,"boxSizing")==="border-box"}var rle=["margin","border","padding"],_I=-1,ile=2,SI=1,ole=0;function ale(e,t,i){var a={},c=e.style,u;for(u in t)t.hasOwnProperty(u)&&(a[u]=c[u],c[u]=t[u]);i.call(e);for(u in t)t.hasOwnProperty(u)&&(c[u]=a[u])}function nf(e,t,i){var a=0,c,u,d;for(u=0;u<t.length;u++)if(c=t[u],c)for(d=0;d<i.length;d++){var p=void 0;c==="border"?p="".concat(c).concat(i[d],"Width"):p=c+i[d],a+=parseFloat(sm(e,p))||0}return a}var Js={getParent:function(t){var i=t;do i.nodeType===11&&i.host?i=i.host:i=i.parentNode;while(i&&i.nodeType!==1&&i.nodeType!==9);return i}};p1(["Width","Height"],function(e){Js["doc".concat(e)]=function(t){var i=t.document;return Math.max(i.documentElement["scroll".concat(e)],i.body["scroll".concat(e)],Js["viewport".concat(e)](i))},Js["viewport".concat(e)]=function(t){var i="client".concat(e),a=t.document,c=a.body,u=a.documentElement,d=u[i];return a.compatMode==="CSS1Compat"&&d||c&&c[i]||d}});function FV(e,t,i){var a=i;if(h1(e))return t==="width"?Js.viewportWidth(e):Js.viewportHeight(e);if(e.nodeType===9)return t==="width"?Js.docWidth(e):Js.docHeight(e);var c=t==="width"?["Left","Right"]:["Top","Bottom"],u=Math.floor(t==="width"?e.getBoundingClientRect().width:e.getBoundingClientRect().height),d=g5(e),p=0;(u==null||u<=0)&&(u=void 0,p=sm(e,t),(p==null||Number(p)<0)&&(p=e.style[t]||0),p=Math.floor(parseFloat(p))||0),a===void 0&&(a=d?SI:_I);var f=u!==void 0||d,g=u||p;return a===_I?f?g-nf(e,["border","padding"],c):p:f?a===SI?g:g+(a===ile?-nf(e,["border"],c):nf(e,["margin"],c)):p+nf(e,rle.slice(a),c)}var sle={position:"absolute",visibility:"hidden",display:"block"};function BV(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a,c=t[0];return c.offsetWidth!==0?a=FV.apply(void 0,t):ale(c,sle,function(){a=FV.apply(void 0,t)}),a}p1(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);Js["outer".concat(t)]=function(a,c){return a&&BV(a,e,c?ole:SI)};var i=e==="width"?["Left","Right"]:["Top","Bottom"];Js[e]=function(a,c){var u=c;if(u!==void 0){if(a){var d=g5(a);return d&&(u+=nf(a,["padding","border"],i)),gh(a,e,u)}return}return a&&BV(a,e,_I)}});function v5(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}var rn={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var i=t.ownerDocument||t;return i.defaultView||i.parentWindow},getDocument:m5,offset:function(t,i,a){if(typeof i<"u")nle(t,i,a||{});else return Kf(t)},isWindow:h1,each:p1,css:gh,clone:function(t){var i,a={};for(i in t)t.hasOwnProperty(i)&&(a[i]=t[i]);var c=t.overflow;if(c)for(i in t)t.hasOwnProperty(i)&&(a.overflow[i]=t.overflow[i]);return a},mix:v5,getWindowScrollLeft:function(t){return p5(t)},getWindowScrollTop:function(t){return f5(t)},merge:function(){for(var t={},i=0;i<arguments.length;i++)rn.mix(t,i<0||arguments.length<=i?void 0:arguments[i]);return t},viewportWidth:0,viewportHeight:0};v5(rn,Js);var oT=rn.getParent;function yI(e){if(rn.isWindow(e)||e.nodeType===9)return null;var t=rn.getDocument(e),i=t.body,a,c=rn.css(e,"position"),u=c==="fixed"||c==="absolute";if(!u)return e.nodeName.toLowerCase()==="html"?null:oT(e);for(a=oT(e);a&&a!==i&&a.nodeType!==9;a=oT(a))if(c=rn.css(a,"position"),c!=="static")return a;return null}var jV=rn.getParent;function cle(e){if(rn.isWindow(e)||e.nodeType===9)return!1;var t=rn.getDocument(e),i=t.body,a=null;for(a=jV(e);a&&a!==i&&a!==t;a=jV(a)){var c=rn.css(a,"position");if(c==="fixed")return!0}return!1}function f1(e,t){for(var i={left:0,right:1/0,top:0,bottom:1/0},a=yI(e),c=rn.getDocument(e),u=c.defaultView||c.parentWindow,d=c.body,p=c.documentElement;a;){if((navigator.userAgent.indexOf("MSIE")===-1||a.clientWidth!==0)&&a!==d&&a!==p&&rn.css(a,"overflow")!=="visible"){var f=rn.offset(a);f.left+=a.clientLeft,f.top+=a.clientTop,i.top=Math.max(i.top,f.top),i.right=Math.min(i.right,f.left+a.clientWidth),i.bottom=Math.min(i.bottom,f.top+a.clientHeight),i.left=Math.max(i.left,f.left)}else if(a===d||a===p)break;a=yI(a)}var g=null;if(!rn.isWindow(e)&&e.nodeType!==9){g=e.style.position;var E=rn.css(e,"position");E==="absolute"&&(e.style.position="fixed")}var y=rn.getWindowScrollLeft(u),C=rn.getWindowScrollTop(u),w=rn.viewportWidth(u),R=rn.viewportHeight(u),O=p.scrollWidth,k=p.scrollHeight,A=window.getComputedStyle(d);if(A.overflowX==="hidden"&&(O=u.innerWidth),A.overflowY==="hidden"&&(k=u.innerHeight),e.style&&(e.style.position=g),t||cle(e))i.left=Math.max(i.left,y),i.top=Math.max(i.top,C),i.right=Math.min(i.right,y+w),i.bottom=Math.min(i.bottom,C+R);else{var x=Math.max(O,y+w);i.right=Math.min(i.right,x);var P=Math.max(k,C+R);i.bottom=Math.min(i.bottom,P)}return i.top>=0&&i.left>=0&&i.bottom>i.top&&i.right>i.left?i:null}function lle(e,t,i,a){var c=rn.clone(e),u={width:t.width,height:t.height};return a.adjustX&&c.left<i.left&&(c.left=i.left),a.resizeWidth&&c.left>=i.left&&c.left+u.width>i.right&&(u.width-=c.left+u.width-i.right),a.adjustX&&c.left+u.width>i.right&&(c.left=Math.max(i.right-u.width,i.left)),a.adjustY&&c.top<i.top&&(c.top=i.top),a.resizeHeight&&c.top>=i.top&&c.top+u.height>i.bottom&&(u.height-=c.top+u.height-i.bottom),a.adjustY&&c.top+u.height>i.bottom&&(c.top=Math.max(i.bottom-u.height,i.top)),rn.mix(c,u)}function m1(e){var t,i,a;if(!rn.isWindow(e)&&e.nodeType!==9)t=rn.offset(e),i=rn.outerWidth(e),a=rn.outerHeight(e);else{var c=rn.getWindow(e);t={left:rn.getWindowScrollLeft(c),top:rn.getWindowScrollTop(c)},i=rn.viewportWidth(c),a=rn.viewportHeight(c)}return t.width=i,t.height=a,t}function $V(e,t){var i=t.charAt(0),a=t.charAt(1),c=e.width,u=e.height,d=e.left,p=e.top;return i==="c"?p+=u/2:i==="b"&&(p+=u),a==="c"?d+=c/2:a==="r"&&(d+=c),{left:d,top:p}}function Rg(e,t,i,a,c){var u=$V(t,i[1]),d=$V(e,i[0]),p=[d.left-u.left,d.top-u.top];return{left:Math.round(e.left-p[0]+a[0]-c[0]),top:Math.round(e.top-p[1]+a[1]-c[1])}}function HV(e,t,i){return e.left<i.left||e.left+t.width>i.right}function WV(e,t,i){return e.top<i.top||e.top+t.height>i.bottom}function ule(e,t,i){return e.left>i.right||e.left+t.width<i.left}function dle(e,t,i){return e.top>i.bottom||e.top+t.height<i.top}function Ig(e,t,i){var a=[];return rn.each(e,function(c){a.push(c.replace(t,function(u){return i[u]}))}),a}function wg(e,t){return e[t]=-e[t],e}function zV(e,t){var i;return/%$/.test(e)?i=parseInt(e.substring(0,e.length-1),10)/100*t:i=parseInt(e,10),i||0}function GV(e,t){e[0]=zV(e[0],t.width),e[1]=zV(e[1],t.height)}function E5(e,t,i,a){var c=i.points,u=i.offset||[0,0],d=i.targetOffset||[0,0],p=i.overflow,f=i.source||e;u=[].concat(u),d=[].concat(d),p=p||{};var g={},E=0,y=!!(p&&p.alwaysByViewport),C=f1(f,y),w=m1(f);GV(u,w),GV(d,t);var R=Rg(w,t,c,u,d),O=rn.merge(w,R);if(C&&(p.adjustX||p.adjustY)&&a){if(p.adjustX&&HV(R,w,C)){var k=Ig(c,/[lr]/gi,{l:"r",r:"l"}),A=wg(u,0),x=wg(d,0),P=Rg(w,t,k,A,x);ule(P,w,C)||(E=1,c=k,u=A,d=x)}if(p.adjustY&&WV(R,w,C)){var M=Ig(c,/[tb]/gi,{t:"b",b:"t"}),B=wg(u,1),F=wg(d,1),j=Rg(w,t,M,B,F);dle(j,w,C)||(E=1,c=M,u=B,d=F)}E&&(R=Rg(w,t,c,u,d),rn.mix(O,R));var $=HV(R,w,C),ee=WV(R,w,C);if($||ee){var H=c;$&&(H=Ig(c,/[lr]/gi,{l:"r",r:"l"})),ee&&(H=Ig(c,/[tb]/gi,{t:"b",b:"t"})),c=H,u=i.offset||[0,0],d=i.targetOffset||[0,0]}g.adjustX=p.adjustX&&$,g.adjustY=p.adjustY&&ee,(g.adjustX||g.adjustY)&&(O=lle(R,w,C,g))}return O.width!==w.width&&rn.css(f,"width",rn.width(f)+O.width-w.width),O.height!==w.height&&rn.css(f,"height",rn.height(f)+O.height-w.height),rn.offset(f,{left:O.left,top:O.top},{useCssRight:i.useCssRight,useCssBottom:i.useCssBottom,useCssTransform:i.useCssTransform,ignoreShake:i.ignoreShake}),{points:c,offset:u,targetOffset:d,overflow:g}}function hle(e,t){var i=f1(e,t),a=m1(e);return!i||a.left+a.width<=i.left||a.top+a.height<=i.top||a.left>=i.right||a.top>=i.bottom}function g1(e,t,i){var a=i.target||t,c=m1(a),u=!hle(a,i.overflow&&i.overflow.alwaysByViewport);return E5(e,c,i,u)}g1.__getOffsetParent=yI;g1.__getVisibleRectForElement=f1;function ple(e,t,i){var a,c,u=rn.getDocument(e),d=u.defaultView||u.parentWindow,p=rn.getWindowScrollLeft(d),f=rn.getWindowScrollTop(d),g=rn.viewportWidth(d),E=rn.viewportHeight(d);"pageX"in t?a=t.pageX:a=p+t.clientX,"pageY"in t?c=t.pageY:c=f+t.clientY;var y={left:a,top:c,width:0,height:0},C=a>=0&&a<=p+g&&c>=0&&c<=f+E,w=[i.points[0],"cc"];return E5(e,y,kV(kV({},i),{},{points:w}),C)}const fle=function(e,t){var i=Ot.useRef(!1),a=Ot.useRef(null);function c(){window.clearTimeout(a.current)}function u(d){if(c(),!i.current||d===!0){if(e(d)===!1)return;i.current=!0,a.current=window.setTimeout(function(){i.current=!1},t)}else a.current=window.setTimeout(function(){i.current=!1,u()},t)}return[u,function(){i.current=!1,c()}]};function mle(e,t){return e===t?!0:!e||!t?!1:"pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t?e.clientX===t.clientX&&e.clientY===t.clientY:!1}function gle(e,t){e!==document.activeElement&&pf(t,e)&&typeof e.focus=="function"&&e.focus()}function KV(e,t){var i=null,a=null;function c(d){var p=we(d,1),f=p[0].target;if(document.documentElement.contains(f)){var g=f.getBoundingClientRect(),E=g.width,y=g.height,C=Math.floor(E),w=Math.floor(y);(i!==C||a!==w)&&Promise.resolve().then(function(){t({width:C,height:w})}),i=C,a=w}}var u=new ij(c);return e&&u.observe(e),function(){u.disconnect()}}function YV(e){return typeof e!="function"?null:e()}function qV(e){return An(e)!=="object"||!e?null:e}var vle=function(t,i){var a=t.children,c=t.disabled,u=t.target,d=t.align,p=t.onAlign,f=t.monitorWindowResize,g=t.monitorBufferTime,E=g===void 0?0:g,y=Ot.useRef({}),C=Ot.useRef(),w=Ot.Children.only(a),R=Ot.useRef({});R.current.disabled=c,R.current.target=u,R.current.align=d,R.current.onAlign=p;var O=fle(function(){var J=R.current,X=J.disabled,W=J.target,Z=J.align,ne=J.onAlign,ie=C.current;if(!X&&W&&ie){var de,oe=YV(W),fe=qV(W);y.current.element=oe,y.current.point=fe,y.current.align=Z;var ge=document,ae=ge.activeElement;return oe&&O_(oe)?de=g1(ie,oe,Z):fe&&(de=ple(ie,fe,Z)),gle(ae,ie),ne&&de&&ne(ie,de),!0}return!1},E),k=we(O,2),A=k[0],x=k[1],P=Ot.useState(),M=we(P,2),B=M[0],F=M[1],j=Ot.useState(),$=we(j,2),ee=$[0],H=$[1];return ar(function(){F(YV(u)),H(qV(u))}),Ot.useEffect(function(){(y.current.element!==B||!mle(y.current.point,ee)||!m_(y.current.align,d))&&A()}),Ot.useEffect(function(){var J=KV(C.current,A);return J},[C.current]),Ot.useEffect(function(){var J=KV(B,A);return J},[B]),Ot.useEffect(function(){c?x():A()},[c]),Ot.useEffect(function(){if(f){var J=tf(window,"resize",A);return J.remove}},[f]),Ot.useEffect(function(){return function(){x()}},[]),Ot.useImperativeHandle(i,function(){return{forceAlign:function(){return A(!0)}}}),Ot.isValidElement(w)&&(w=Ot.cloneElement(w,{ref:rc(w.ref,C)})),w},_5=Ot.forwardRef(vle);_5.displayName="Align";var XV=["measure","alignPre","align",null,"motion"];const Ele=function(e,t){var i=xu(null),a=we(i,2),c=a[0],u=a[1],d=_.useRef();function p(E){u(E,!0)}function f(){_r.cancel(d.current)}function g(E){f(),d.current=_r(function(){p(function(y){switch(c){case"align":return"motion";case"motion":return"stable"}return y}),E==null||E()})}return _.useEffect(function(){p("measure")},[e]),_.useEffect(function(){switch(c){case"measure":t();break}c&&(d.current=_r(ju(Oo().mark(function E(){var y,C;return Oo().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:y=XV.indexOf(c),C=XV[y+1],C&&y!==-1&&p(C);case 3:case"end":return R.stop()}},E)}))))},[c]),_.useEffect(function(){return function(){f()}},[]),[c,g]},_le=function(e){var t=_.useState({width:0,height:0}),i=we(t,2),a=i[0],c=i[1];function u(p){var f=p.offsetWidth,g=p.offsetHeight,E=p.getBoundingClientRect(),y=E.width,C=E.height;Math.abs(f-y)<1&&Math.abs(g-C)<1&&(f=y,g=C),c({width:f,height:g})}var d=_.useMemo(function(){var p={};if(e){var f=a.width,g=a.height;e.indexOf("height")!==-1&&g?p.height=g:e.indexOf("minHeight")!==-1&&g&&(p.minHeight=g),e.indexOf("width")!==-1&&f?p.width=f:e.indexOf("minWidth")!==-1&&f&&(p.minWidth=f)}return p},[e,a]);return[d,u]};var S5=_.forwardRef(function(e,t){var i=e.visible,a=e.prefixCls,c=e.className,u=e.style,d=e.children,p=e.zIndex,f=e.stretch,g=e.destroyPopupOnHide,E=e.forceRender,y=e.align,C=e.point,w=e.getRootDomNode,R=e.getClassNameFromAlign,O=e.onAlign,k=e.onMouseEnter,A=e.onMouseLeave,x=e.onMouseDown,P=e.onTouchStart,M=e.onClick,B=_.useRef(),F=_.useRef(),j=_.useState(),$=we(j,2),ee=$[0],H=$[1],J=_le(f),X=we(J,2),W=X[0],Z=X[1];function ne(){f&&Z(w())}var ie=Ele(i,ne),de=we(ie,2),oe=de[0],fe=de[1],ge=_.useState(0),ae=we(ge,2),se=ae[0],he=ae[1],pe=_.useRef();ar(function(){oe==="alignPre"&&he(0)},[oe]);function Oe(){return C||w}function be(){var Pe;(Pe=B.current)===null||Pe===void 0||Pe.forceAlign()}function Ne(Pe,Ye){var lt=R(Ye);ee!==lt&&H(lt),he(function(At){return At+1}),oe==="align"&&(O==null||O(Pe,Ye))}ar(function(){oe==="align"&&(se<3?be():fe(function(){var Pe;(Pe=pe.current)===null||Pe===void 0||Pe.call(pe)}))},[se]);var Ae=ce({},u5(e));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(Pe){var Ye=Ae[Pe];Ae[Pe]=function(lt,At){return fe(),Ye==null?void 0:Ye(lt,At)}});function at(){return new Promise(function(Pe){pe.current=Pe})}_.useEffect(function(){!Ae.motionName&&oe==="motion"&&fe()},[Ae.motionName,oe]),_.useImperativeHandle(t,function(){return{forceAlign:be,getElement:function(){return F.current}}});var it=ce(ce({},W),{},{zIndex:p,opacity:oe==="motion"||oe==="stable"||!i?void 0:0,pointerEvents:!i&&oe!=="stable"?"none":void 0},u),ze=!0;y!=null&&y.points&&(oe==="align"||oe==="stable")&&(ze=!1);var ht=d;return _.Children.count(d)>1&&(ht=_.createElement("div",{className:"".concat(a,"-content")},d)),_.createElement(Vc,He({visible:i,ref:F,leavedClassName:"".concat(a,"-hidden")},Ae,{onAppearPrepare:at,onEnterPrepare:at,removeOnLeave:g,forceRender:E}),function(Pe,Ye){var lt=Pe.className,At=Pe.style,_t=ct(a,c,ee,lt);return _.createElement(_5,{target:Oe(),key:"popup",ref:B,monitorWindowResize:!0,disabled:ze,align:y,onAlign:Ne},_.createElement("div",{ref:Ye,className:_t,onMouseEnter:k,onMouseLeave:A,onMouseDownCapture:x,onTouchStartCapture:P,onClick:M,style:ce(ce({},At),it)},ht))})});S5.displayName="PopupInner";var y5=_.forwardRef(function(e,t){var i=e.prefixCls,a=e.visible,c=e.zIndex,u=e.children,d=e.mobile;d=d===void 0?{}:d;var p=d.popupClassName,f=d.popupStyle,g=d.popupMotion,E=g===void 0?{}:g,y=d.popupRender,C=e.onClick,w=_.useRef();_.useImperativeHandle(t,function(){return{forceAlign:function(){},getElement:function(){return w.current}}});var R=ce({zIndex:c},f),O=u;return _.Children.count(u)>1&&(O=_.createElement("div",{className:"".concat(i,"-content")},u)),y&&(O=y(O)),_.createElement(Vc,He({visible:a,ref:w,removeOnLeave:!0},E),function(k,A){var x=k.className,P=k.style,M=ct(i,p,x);return _.createElement("div",{ref:A,className:M,onClick:C,style:ce(ce({},P),R)},O)})});y5.displayName="MobilePopupInner";var Sle=["visible","mobile"],C5=_.forwardRef(function(e,t){var i=e.visible,a=e.mobile,c=mn(e,Sle),u=_.useState(i),d=we(u,2),p=d[0],f=d[1],g=_.useState(!1),E=we(g,2),y=E[0],C=E[1],w=ce(ce({},c),{},{visible:p});_.useEffect(function(){f(i),i&&a&&C(a1())},[i,a]);var R=y?_.createElement(y5,He({},w,{mobile:a,ref:t})):_.createElement(S5,He({},w,{ref:t}));return _.createElement("div",null,_.createElement(Bce,w),R)});C5.displayName="Popup";var JV=_.createContext(null);function aT(){}function yle(){return""}function Cle(e){return e?e.ownerDocument:window.document}var ble=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function Tle(e){var t=function(i){Vl(c,i);var a=Fl(c);function c(u){var d;xo(this,c),d=a.call(this,u),Ie(En(d),"popupRef",_.createRef()),Ie(En(d),"triggerRef",_.createRef()),Ie(En(d),"portalContainer",void 0),Ie(En(d),"attachId",void 0),Ie(En(d),"clickOutsideHandler",void 0),Ie(En(d),"touchOutsideHandler",void 0),Ie(En(d),"contextMenuOutsideHandler1",void 0),Ie(En(d),"contextMenuOutsideHandler2",void 0),Ie(En(d),"mouseDownTimeout",void 0),Ie(En(d),"focusTime",void 0),Ie(En(d),"preClickTime",void 0),Ie(En(d),"preTouchTime",void 0),Ie(En(d),"delayTimer",void 0),Ie(En(d),"hasPopupMouseDown",void 0),Ie(En(d),"onMouseEnter",function(f){var g=d.props.mouseEnterDelay;d.fireEvents("onMouseEnter",f),d.delaySetPopupVisible(!0,g,g?null:f)}),Ie(En(d),"onMouseMove",function(f){d.fireEvents("onMouseMove",f),d.setPoint(f)}),Ie(En(d),"onMouseLeave",function(f){d.fireEvents("onMouseLeave",f),d.delaySetPopupVisible(!1,d.props.mouseLeaveDelay)}),Ie(En(d),"onPopupMouseEnter",function(){d.clearDelayTimer()}),Ie(En(d),"onPopupMouseLeave",function(f){var g;f.relatedTarget&&!f.relatedTarget.setTimeout&&pf((g=d.popupRef.current)===null||g===void 0?void 0:g.getElement(),f.relatedTarget)||d.delaySetPopupVisible(!1,d.props.mouseLeaveDelay)}),Ie(En(d),"onFocus",function(f){d.fireEvents("onFocus",f),d.clearDelayTimer(),d.isFocusToShow()&&(d.focusTime=Date.now(),d.delaySetPopupVisible(!0,d.props.focusDelay))}),Ie(En(d),"onMouseDown",function(f){d.fireEvents("onMouseDown",f),d.preClickTime=Date.now()}),Ie(En(d),"onTouchStart",function(f){d.fireEvents("onTouchStart",f),d.preTouchTime=Date.now()}),Ie(En(d),"onBlur",function(f){d.fireEvents("onBlur",f),d.clearDelayTimer(),d.isBlurToHide()&&d.delaySetPopupVisible(!1,d.props.blurDelay)}),Ie(En(d),"onContextMenu",function(f){f.preventDefault(),d.fireEvents("onContextMenu",f),d.setPopupVisible(!0,f)}),Ie(En(d),"onContextMenuClose",function(){d.isContextMenuToShow()&&d.close()}),Ie(En(d),"onClick",function(f){if(d.fireEvents("onClick",f),d.focusTime){var g;if(d.preClickTime&&d.preTouchTime?g=Math.min(d.preClickTime,d.preTouchTime):d.preClickTime?g=d.preClickTime:d.preTouchTime&&(g=d.preTouchTime),Math.abs(g-d.focusTime)<20)return;d.focusTime=0}d.preClickTime=0,d.preTouchTime=0,d.isClickToShow()&&(d.isClickToHide()||d.isBlurToHide())&&f&&f.preventDefault&&f.preventDefault();var E=!d.state.popupVisible;(d.isClickToHide()&&!E||E&&d.isClickToShow())&&d.setPopupVisible(!d.state.popupVisible,f)}),Ie(En(d),"onPopupMouseDown",function(){if(d.hasPopupMouseDown=!0,clearTimeout(d.mouseDownTimeout),d.mouseDownTimeout=window.setTimeout(function(){d.hasPopupMouseDown=!1},0),d.context){var f;(f=d.context).onPopupMouseDown.apply(f,arguments)}}),Ie(En(d),"onDocumentClick",function(f){if(!(d.props.mask&&!d.props.maskClosable)){var g=f.target,E=d.getRootDomNode(),y=d.getPopupDomNode();(!pf(E,g)||d.isContextMenuOnly())&&!pf(y,g)&&!d.hasPopupMouseDown&&d.close()}}),Ie(En(d),"getRootDomNode",function(){var f=d.props.getTriggerDOMNode;if(f)return f(d.triggerRef.current);try{var g=$f(d.triggerRef.current);if(g)return g}catch{}return Rh.findDOMNode(En(d))}),Ie(En(d),"getPopupClassNameFromAlign",function(f){var g=[],E=d.props,y=E.popupPlacement,C=E.builtinPlacements,w=E.prefixCls,R=E.alignPoint,O=E.getPopupClassNameFromAlign;return y&&C&&g.push(Fce(C,w,f,R)),O&&g.push(O(f)),g.join(" ")}),Ie(En(d),"getComponent",function(){var f=d.props,g=f.prefixCls,E=f.destroyPopupOnHide,y=f.popupClassName,C=f.onPopupAlign,w=f.popupMotion,R=f.popupAnimation,O=f.popupTransitionName,k=f.popupStyle,A=f.mask,x=f.maskAnimation,P=f.maskTransitionName,M=f.maskMotion,B=f.zIndex,F=f.popup,j=f.stretch,$=f.alignPoint,ee=f.mobile,H=f.forceRender,J=f.onPopupClick,X=d.state,W=X.popupVisible,Z=X.point,ne=d.getPopupAlign(),ie={};return d.isMouseEnterToShow()&&(ie.onMouseEnter=d.onPopupMouseEnter),d.isMouseLeaveToHide()&&(ie.onMouseLeave=d.onPopupMouseLeave),ie.onMouseDown=d.onPopupMouseDown,ie.onTouchStart=d.onPopupMouseDown,_.createElement(C5,He({prefixCls:g,destroyPopupOnHide:E,visible:W,point:$&&Z,className:y,align:ne,onAlign:C,animation:R,getClassNameFromAlign:d.getPopupClassNameFromAlign},ie,{stretch:j,getRootDomNode:d.getRootDomNode,style:k,mask:A,zIndex:B,transitionName:O,maskAnimation:x,maskTransitionName:P,maskMotion:M,ref:d.popupRef,motion:w,mobile:ee,forceRender:H,onClick:J}),typeof F=="function"?F():F)}),Ie(En(d),"attachParent",function(f){_r.cancel(d.attachId);var g=d.props,E=g.getPopupContainer,y=g.getDocument,C=d.getRootDomNode(),w;E?(C||E.length===0)&&(w=E(C)):w=y(d.getRootDomNode()).body,w?w.appendChild(f):d.attachId=_r(function(){d.attachParent(f)})}),Ie(En(d),"getContainer",function(){if(!d.portalContainer){var f=d.props.getDocument,g=f(d.getRootDomNode()).createElement("div");g.style.position="absolute",g.style.top="0",g.style.left="0",g.style.width="100%",d.portalContainer=g}return d.attachParent(d.portalContainer),d.portalContainer}),Ie(En(d),"setPoint",function(f){var g=d.props.alignPoint;!g||!f||d.setState({point:{pageX:f.pageX,pageY:f.pageY}})}),Ie(En(d),"handlePortalUpdate",function(){d.state.prevPopupVisible!==d.state.popupVisible&&d.props.afterPopupVisibleChange(d.state.popupVisible)}),Ie(En(d),"triggerContextValue",{onPopupMouseDown:d.onPopupMouseDown});var p;return"popupVisible"in u?p=!!u.popupVisible:p=!!u.defaultPopupVisible,d.state={prevPopupVisible:p,popupVisible:p},ble.forEach(function(f){d["fire".concat(f)]=function(g){d.fireEvents(f,g)}}),d}return Po(c,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var d=this.props,p=this.state;if(p.popupVisible){var f;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(f=d.getDocument(this.getRootDomNode()),this.clickOutsideHandler=tf(f,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(f=f||d.getDocument(this.getRootDomNode()),this.touchOutsideHandler=tf(f,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(f=f||d.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=tf(f,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=tf(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),_r.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var d;return((d=this.popupRef.current)===null||d===void 0?void 0:d.getElement())||null}},{key:"getPopupAlign",value:function(){var d=this.props,p=d.popupPlacement,f=d.popupAlign,g=d.builtinPlacements;return p&&g?Vce(g,p,f):f}},{key:"setPopupVisible",value:function(d,p){var f=this.props.alignPoint,g=this.state.popupVisible;this.clearDelayTimer(),g!==d&&("popupVisible"in this.props||this.setState({popupVisible:d,prevPopupVisible:g}),this.props.onPopupVisibleChange(d)),f&&p&&d&&this.setPoint(p)}},{key:"delaySetPopupVisible",value:function(d,p,f){var g=this,E=p*1e3;if(this.clearDelayTimer(),E){var y=f?{pageX:f.pageX,pageY:f.pageY}:null;this.delayTimer=window.setTimeout(function(){g.setPopupVisible(d,y),g.clearDelayTimer()},E)}else this.setPopupVisible(d,f)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(d){var p=this.props.children.props,f=this.props;return p[d]&&f[d]?this["fire".concat(d)]:p[d]||f[d]}},{key:"isClickToShow",value:function(){var d=this.props,p=d.action,f=d.showAction;return p.indexOf("click")!==-1||f.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var d=this.props.action;return d==="contextMenu"||d.length===1&&d[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var d=this.props,p=d.action,f=d.showAction;return p.indexOf("contextMenu")!==-1||f.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var d=this.props,p=d.action,f=d.hideAction;return p.indexOf("click")!==-1||f.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var d=this.props,p=d.action,f=d.showAction;return p.indexOf("hover")!==-1||f.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var d=this.props,p=d.action,f=d.hideAction;return p.indexOf("hover")!==-1||f.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var d=this.props,p=d.action,f=d.showAction;return p.indexOf("focus")!==-1||f.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var d=this.props,p=d.action,f=d.hideAction;return p.indexOf("focus")!==-1||f.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var d;(d=this.popupRef.current)===null||d===void 0||d.forceAlign()}}},{key:"fireEvents",value:function(d,p){var f=this.props.children.props[d];f&&f(p);var g=this.props[d];g&&g(p)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var d=this.state.popupVisible,p=this.props,f=p.children,g=p.forceRender,E=p.alignPoint,y=p.className,C=p.autoDestroy,w=_.Children.only(f),R={key:"trigger"};this.isContextMenuToShow()?R.onContextMenu=this.onContextMenu:R.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(R.onClick=this.onClick,R.onMouseDown=this.onMouseDown,R.onTouchStart=this.onTouchStart):(R.onClick=this.createTwoChains("onClick"),R.onMouseDown=this.createTwoChains("onMouseDown"),R.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(R.onMouseEnter=this.onMouseEnter,E&&(R.onMouseMove=this.onMouseMove)):R.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?R.onMouseLeave=this.onMouseLeave:R.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(R.onFocus=this.onFocus,R.onBlur=this.onBlur):(R.onFocus=this.createTwoChains("onFocus"),R.onBlur=this.createTwoChains("onBlur"));var O=ct(w&&w.props&&w.props.className,y);O&&(R.className=O);var k=ce({},R);Lh(w)&&(k.ref=rc(this.triggerRef,w.ref));var A=_.cloneElement(w,k),x;return(d||this.popupRef.current||g)&&(x=_.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!d&&C&&(x=null),_.createElement(JV.Provider,{value:this.triggerContextValue},A,x)}}],[{key:"getDerivedStateFromProps",value:function(d,p){var f=d.popupVisible,g={};return f!==void 0&&p.popupVisible!==f&&(g.popupVisible=f,g.prevPopupVisible=p.popupVisible),g}}]),c}(_.Component);return Ie(t,"contextType",JV),Ie(t,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:yle,getDocument:Cle,onPopupVisibleChange:aT,afterPopupVisibleChange:aT,onPopupAlign:aT,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),t}const Rle=Tle(Mce);function QV(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(O_(e)){var i=e.nodeName.toLowerCase(),a=["input","select","textarea","button"].includes(i)||e.isContentEditable||i==="a"&&!!e.getAttribute("href"),c=e.getAttribute("tabindex"),u=Number(c),d=null;return c&&!Number.isNaN(u)?d=u:a&&d===null&&(d=0),a&&e.disabled&&(d=null),d!==null&&(d>=0||t&&d<0)}return!1}function Ile(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=Et(e.querySelectorAll("*")).filter(function(a){return QV(a,t)});return QV(e,t)&&i.unshift(e),i}var b5=_.createContext(null);function v1(e,t){return e===void 0?null:"".concat(e,"-").concat(t)}function T5(e){var t=_.useContext(b5);return v1(t,e)}var wle=["children","locked"],Os=_.createContext(null);function Ole(e,t){var i=ce({},e);return Object.keys(t).forEach(function(a){var c=t[a];c!==void 0&&(i[a]=c)}),i}function Yf(e){var t=e.children,i=e.locked,a=mn(e,wle),c=_.useContext(Os),u=tm(function(){return Ole(c,a)},[c,a],function(d,p){return!i&&(d[0]!==p[0]||!m_(d[1],p[1],!0))});return _.createElement(Os.Provider,{value:u},t)}var Ale=[],R5=_.createContext(null);function N_(){return _.useContext(R5)}var I5=_.createContext(Ale);function jh(e){var t=_.useContext(I5);return _.useMemo(function(){return e!==void 0?[].concat(Et(t),[e]):t},[t,e])}var w5=_.createContext(null),E1=_.createContext({}),CI=Ve.LEFT,bI=Ve.RIGHT,TI=Ve.UP,nv=Ve.DOWN,rv=Ve.ENTER,O5=Ve.ESC,Wp=Ve.HOME,zp=Ve.END,ZV=[TI,nv,CI,bI];function Nle(e,t,i,a){var c,u,d,p,f="prev",g="next",E="children",y="parent";if(e==="inline"&&a===rv)return{inlineTrigger:!0};var C=(c={},Ie(c,TI,f),Ie(c,nv,g),c),w=(u={},Ie(u,CI,i?g:f),Ie(u,bI,i?f:g),Ie(u,nv,E),Ie(u,rv,E),u),R=(d={},Ie(d,TI,f),Ie(d,nv,g),Ie(d,rv,E),Ie(d,O5,y),Ie(d,CI,i?E:y),Ie(d,bI,i?y:E),d),O={inline:C,horizontal:w,vertical:R,inlineSub:C,horizontalSub:R,verticalSub:R},k=(p=O["".concat(e).concat(t?"":"Sub")])===null||p===void 0?void 0:p[a];switch(k){case f:return{offset:-1,sibling:!0};case g:return{offset:1,sibling:!0};case y:return{offset:-1,sibling:!1};case E:return{offset:1,sibling:!1};default:return null}}function xle(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}function Ple(e,t){for(var i=e||document.activeElement;i;){if(t.has(i))return i;i=i.parentElement}return null}function A5(e,t){var i=Ile(e,!0);return i.filter(function(a){return t.has(a)})}function e4(e,t,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!e)return null;var c=A5(e,t),u=c.length,d=c.findIndex(function(p){return i===p});return a<0?d===-1?d=u-1:d-=1:a>0&&(d+=1),d=(d+u)%u,c[d]}function Dle(e,t,i,a,c,u,d,p,f,g){var E=_.useRef(),y=_.useRef();y.current=t;var C=function(){_r.cancel(E.current)};return _.useEffect(function(){return function(){C()}},[]),function(w){var R=w.which;if([].concat(ZV,[rv,O5,Wp,zp]).includes(R)){var O,k,A,x=function(){O=new Set,k=new Map,A=new Map;var ne=u();return ne.forEach(function(ie){var de=document.querySelector("[data-menu-id='".concat(v1(a,ie),"']"));de&&(O.add(de),A.set(de,ie),k.set(ie,de))}),O};x();var P=k.get(t),M=Ple(P,O),B=A.get(M),F=Nle(e,d(B,!0).length===1,i,R);if(!F&&R!==Wp&&R!==zp)return;(ZV.includes(R)||[Wp,zp].includes(R))&&w.preventDefault();var j=function(ne){if(ne){var ie=ne,de=ne.querySelector("a");de!=null&&de.getAttribute("href")&&(ie=de);var oe=A.get(ne);p(oe),C(),E.current=_r(function(){y.current===oe&&ie.focus()})}};if([Wp,zp].includes(R)||F.sibling||!M){var $;!M||e==="inline"?$=c.current:$=xle(M);var ee,H=A5($,O);R===Wp?ee=H[0]:R===zp?ee=H[H.length-1]:ee=e4($,O,M,F.offset),j(ee)}else if(F.inlineTrigger)f(B);else if(F.offset>0)f(B,!0),C(),E.current=_r(function(){x();var Z=M.getAttribute("aria-controls"),ne=document.getElementById(Z),ie=e4(ne,O);j(ie)},5);else if(F.offset<0){var J=d(B,!0),X=J[J.length-2],W=k.get(X);f(X,!1),j(W)}}g==null||g(w)}}function kle(e){Promise.resolve().then(e)}var _1="__RC_UTIL_PATH_SPLIT__",t4=function(t){return t.join(_1)},Lle=function(t){return t.split(_1)},RI="rc-menu-more";function Mle(){var e=_.useState({}),t=we(e,2),i=t[1],a=_.useRef(new Map),c=_.useRef(new Map),u=_.useState([]),d=we(u,2),p=d[0],f=d[1],g=_.useRef(0),E=_.useRef(!1),y=function(){E.current||i({})},C=_.useCallback(function(P,M){var B=t4(M);c.current.set(B,P),a.current.set(P,B),g.current+=1;var F=g.current;kle(function(){F===g.current&&y()})},[]),w=_.useCallback(function(P,M){var B=t4(M);c.current.delete(B),a.current.delete(P)},[]),R=_.useCallback(function(P){f(P)},[]),O=_.useCallback(function(P,M){var B=a.current.get(P)||"",F=Lle(B);return M&&p.includes(F[0])&&F.unshift(RI),F},[p]),k=_.useCallback(function(P,M){return P.some(function(B){var F=O(B,!0);return F.includes(M)})},[O]),A=function(){var M=Et(a.current.keys());return p.length&&M.push(RI),M},x=_.useCallback(function(P){var M="".concat(a.current.get(P)).concat(_1),B=new Set;return Et(c.current.keys()).forEach(function(F){F.startsWith(M)&&B.add(c.current.get(F))}),B},[]);return _.useEffect(function(){return function(){E.current=!0}},[]),{registerPath:C,unregisterPath:w,refreshOverflowKeys:R,isSubPathKey:k,getKeyPath:O,getKeys:A,getSubPathKeys:x}}function Gd(e){var t=_.useRef(e);t.current=e;var i=_.useCallback(function(){for(var a,c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return(a=t.current)===null||a===void 0?void 0:a.call.apply(a,[t].concat(u))},[]);return e?i:void 0}var Ule=Math.random().toFixed(5).toString().slice(2),n4=0;function Vle(e){var t=Ka(e,{value:e}),i=we(t,2),a=i[0],c=i[1];return _.useEffect(function(){n4+=1;var u="".concat(Ule,"-").concat(n4);c("rc-menu-uuid-".concat(u))},[]),a}function N5(e,t,i,a){var c=_.useContext(Os),u=c.activeKey,d=c.onActive,p=c.onInactive,f={active:u===e};return t||(f.onMouseEnter=function(g){i==null||i({key:e,domEvent:g}),d(e)},f.onMouseLeave=function(g){a==null||a({key:e,domEvent:g}),p(e)}),f}function x5(e){var t=_.useContext(Os),i=t.mode,a=t.rtl,c=t.inlineIndent;if(i!=="inline")return null;var u=e;return a?{paddingRight:u*c}:{paddingLeft:u*c}}function P5(e){var t=e.icon,i=e.props,a=e.children,c;return typeof t=="function"?c=_.createElement(t,ce({},i)):c=t,c||a||null}var Fle=["item"];function Xv(e){var t=e.item,i=mn(e,Fle);return Object.defineProperty(i,"item",{get:function(){return go(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),i}var Ble=["title","attribute","elementRef"],jle=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],$le=["active"],Hle=function(e){Vl(i,e);var t=Fl(i);function i(){return xo(this,i),t.apply(this,arguments)}return Po(i,[{key:"render",value:function(){var c=this.props,u=c.title,d=c.attribute,p=c.elementRef,f=mn(c,Ble),g=Za(f,["eventKey","popupClassName","popupOffset","onTitleClick"]);return go(!d,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),_.createElement(nc.Item,He({},d,{title:typeof u=="string"?u:void 0},g,{ref:p}))}}]),i}(_.Component),Wle=_.forwardRef(function(e,t){var i,a=e.style,c=e.className,u=e.eventKey;e.warnKey;var d=e.disabled,p=e.itemIcon,f=e.children,g=e.role,E=e.onMouseEnter,y=e.onMouseLeave,C=e.onClick,w=e.onKeyDown,R=e.onFocus,O=mn(e,jle),k=T5(u),A=_.useContext(Os),x=A.prefixCls,P=A.onItemClick,M=A.disabled,B=A.overflowDisabled,F=A.itemIcon,j=A.selectedKeys,$=A.onActive,ee=_.useContext(E1),H=ee._internalRenderMenuItem,J="".concat(x,"-item"),X=_.useRef(),W=_.useRef(),Z=M||d,ne=p_(t,W),ie=jh(u),de=function(it){return{key:u,keyPath:Et(ie).reverse(),item:X.current,domEvent:it}},oe=p||F,fe=N5(u,Z,E,y),ge=fe.active,ae=mn(fe,$le),se=j.includes(u),he=x5(ie.length),pe=function(it){if(!Z){var ze=de(it);C==null||C(Xv(ze)),P(ze)}},Oe=function(it){if(w==null||w(it),it.which===Ve.ENTER){var ze=de(it);C==null||C(Xv(ze)),P(ze)}},be=function(it){$(u),R==null||R(it)},Ne={};e.role==="option"&&(Ne["aria-selected"]=se);var Ae=_.createElement(Hle,He({ref:X,elementRef:ne,role:g===null?"none":g||"menuitem",tabIndex:d?null:-1,"data-menu-id":B&&k?null:k},O,ae,Ne,{component:"li","aria-disabled":d,style:ce(ce({},he),a),className:ct(J,(i={},Ie(i,"".concat(J,"-active"),ge),Ie(i,"".concat(J,"-selected"),se),Ie(i,"".concat(J,"-disabled"),Z),i),c),onClick:pe,onKeyDown:Oe,onFocus:be}),f,_.createElement(P5,{props:ce(ce({},e),{},{isSelected:se}),icon:oe}));return H&&(Ae=H(Ae,e,{selected:se})),Ae});function zle(e,t){var i=e.eventKey,a=N_(),c=jh(i);return _.useEffect(function(){if(a)return a.registerPath(i,c),function(){a.unregisterPath(i,c)}},[c]),a?null:_.createElement(Wle,He({},e,{ref:t}))}const x_=_.forwardRef(zle);var Gle=["className","children"],Kle=function(t,i){var a=t.className,c=t.children,u=mn(t,Gle),d=_.useContext(Os),p=d.prefixCls,f=d.mode,g=d.rtl;return _.createElement("ul",He({className:ct(p,g&&"".concat(p,"-rtl"),"".concat(p,"-sub"),"".concat(p,"-").concat(f==="inline"?"inline":"vertical"),a),role:"menu"},u,{"data-menu-list":!0,ref:i}),c)},S1=_.forwardRef(Kle);S1.displayName="SubMenuList";var Yle=["label","children","key","type"];function y1(e,t){return Pc(e).map(function(i,a){if(_.isValidElement(i)){var c,u,d=i.key,p=(c=(u=i.props)===null||u===void 0?void 0:u.eventKey)!==null&&c!==void 0?c:d,f=p==null;f&&(p="tmp_key-".concat([].concat(Et(t),[a]).join("-")));var g={key:p,eventKey:p};return _.cloneElement(i,g)}return i})}function II(e){return(e||[]).map(function(t,i){if(t&&An(t)==="object"){var a=t,c=a.label,u=a.children,d=a.key,p=a.type,f=mn(a,Yle),g=d??"tmp-".concat(i);return u||p==="group"?p==="group"?_.createElement(D_,He({key:g},f,{title:c}),II(u)):_.createElement(P_,He({key:g},f,{title:c}),II(u)):p==="divider"?_.createElement(C1,He({key:g},f)):_.createElement(x_,He({key:g},f),c)}return null}).filter(function(t){return t})}function qle(e,t,i){var a=e;return t&&(a=II(t)),y1(a,i)}var bl={adjustX:1,adjustY:1},Xle={topLeft:{points:["bl","tl"],overflow:bl,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:bl,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:bl,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:bl,offset:[4,0]}},Jle={topLeft:{points:["bl","tl"],overflow:bl,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:bl,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:bl,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:bl,offset:[4,0]}};function D5(e,t,i){if(t)return t;if(i)return i[e]||i.other}var Qle={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Zle(e){var t=e.prefixCls,i=e.visible,a=e.children,c=e.popup,u=e.popupClassName,d=e.popupOffset,p=e.disabled,f=e.mode,g=e.onVisibleChange,E=_.useContext(Os),y=E.getPopupContainer,C=E.rtl,w=E.subMenuOpenDelay,R=E.subMenuCloseDelay,O=E.builtinPlacements,k=E.triggerSubMenuAction,A=E.forceSubMenuRender,x=E.rootClassName,P=E.motion,M=E.defaultMotions,B=_.useState(!1),F=we(B,2),j=F[0],$=F[1],ee=ce(C?ce({},Jle):ce({},Xle),O),H=Qle[f],J=D5(f,P,M),X=_.useRef(J);f!=="inline"&&(X.current=J);var W=ce(ce({},X.current),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),Z=_.useRef();return _.useEffect(function(){return Z.current=_r(function(){$(i)}),function(){_r.cancel(Z.current)}},[i]),_.createElement(Rle,{prefixCls:t,popupClassName:ct("".concat(t,"-popup"),Ie({},"".concat(t,"-rtl"),C),u,x),stretch:f==="horizontal"?"minWidth":null,getPopupContainer:y,builtinPlacements:ee,popupPlacement:H,popupVisible:j,popup:c,popupAlign:d&&{offset:d},action:p?[]:[k],mouseEnterDelay:w,mouseLeaveDelay:R,onPopupVisibleChange:g,forceRender:A,popupMotion:W},a)}function eue(e){var t=e.id,i=e.open,a=e.keyPath,c=e.children,u="inline",d=_.useContext(Os),p=d.prefixCls,f=d.forceSubMenuRender,g=d.motion,E=d.defaultMotions,y=d.mode,C=_.useRef(!1);C.current=y===u;var w=_.useState(!C.current),R=we(w,2),O=R[0],k=R[1],A=C.current?i:!1;_.useEffect(function(){C.current&&k(!1)},[y]);var x=ce({},D5(u,g,E));a.length>1&&(x.motionAppear=!1);var P=x.onVisibleChanged;return x.onVisibleChanged=function(M){return!C.current&&!M&&k(!0),P==null?void 0:P(M)},O?null:_.createElement(Yf,{mode:u,locked:!C.current},_.createElement(Vc,He({visible:A},x,{forceRender:f,removeOnLeave:!1,leavedClassName:"".concat(p,"-hidden")}),function(M){var B=M.className,F=M.style;return _.createElement(S1,{id:t,className:B,style:F},c)}))}var tue=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],nue=["active"],rue=function(t){var i,a=t.style,c=t.className,u=t.title,d=t.eventKey;t.warnKey;var p=t.disabled,f=t.internalPopupClose,g=t.children,E=t.itemIcon,y=t.expandIcon,C=t.popupClassName,w=t.popupOffset,R=t.onClick,O=t.onMouseEnter,k=t.onMouseLeave,A=t.onTitleClick,x=t.onTitleMouseEnter,P=t.onTitleMouseLeave,M=mn(t,tue),B=T5(d),F=_.useContext(Os),j=F.prefixCls,$=F.mode,ee=F.openKeys,H=F.disabled,J=F.overflowDisabled,X=F.activeKey,W=F.selectedKeys,Z=F.itemIcon,ne=F.expandIcon,ie=F.onItemClick,de=F.onOpenChange,oe=F.onActive,fe=_.useContext(E1),ge=fe._internalRenderSubMenuItem,ae=_.useContext(w5),se=ae.isSubPathKey,he=jh(),pe="".concat(j,"-submenu"),Oe=H||p,be=_.useRef(),Ne=_.useRef(),Ae=E||Z,at=y||ne,it=ee.includes(d),ze=!J&&it,ht=se(W,d),Pe=N5(d,Oe,x,P),Ye=Pe.active,lt=mn(Pe,nue),At=_.useState(!1),_t=we(At,2),Be=_t[0],$e=_t[1],ke=function($t){Oe||$e($t)},et=function($t){ke(!0),O==null||O({key:d,domEvent:$t})},ft=function($t){ke(!1),k==null||k({key:d,domEvent:$t})},Rt=_.useMemo(function(){return Ye||($!=="inline"?Be||se([X],d):!1)},[$,Ye,X,Be,d,se]),on=x5(he.length),dn=function($t){Oe||(A==null||A({key:d,domEvent:$t}),$==="inline"&&de(d,!it))},jt=Gd(function(mt){R==null||R(Xv(mt)),ie(mt)}),zt=function($t){$!=="inline"&&de(d,$t)},Mn=function(){oe(d)},_n=B&&"".concat(B,"-popup"),Lt=_.createElement("div",He({role:"menuitem",style:on,className:"".concat(pe,"-title"),tabIndex:Oe?null:-1,ref:be,title:typeof u=="string"?u:null,"data-menu-id":J&&B?null:B,"aria-expanded":ze,"aria-haspopup":!0,"aria-controls":_n,"aria-disabled":Oe,onClick:dn,onFocus:Mn},lt),u,_.createElement(P5,{icon:$!=="horizontal"?at:null,props:ce(ce({},t),{},{isOpen:ze,isSubMenu:!0})},_.createElement("i",{className:"".concat(pe,"-arrow")}))),xt=_.useRef($);if($!=="inline"&&he.length>1?xt.current="vertical":xt.current=$,!J){var en=xt.current;Lt=_.createElement(Zle,{mode:en,prefixCls:pe,visible:!f&&ze&&$!=="inline",popupClassName:C,popupOffset:w,popup:_.createElement(Yf,{mode:en==="horizontal"?"vertical":en},_.createElement(S1,{id:_n,ref:Ne},g)),disabled:Oe,onVisibleChange:zt},Lt)}var st=_.createElement(nc.Item,He({role:"none"},M,{component:"li",style:a,className:ct(pe,"".concat(pe,"-").concat($),c,(i={},Ie(i,"".concat(pe,"-open"),ze),Ie(i,"".concat(pe,"-active"),Rt),Ie(i,"".concat(pe,"-selected"),ht),Ie(i,"".concat(pe,"-disabled"),Oe),i)),onMouseEnter:et,onMouseLeave:ft}),Lt,!J&&_.createElement(eue,{id:_n,open:ze,keyPath:he},g));return ge&&(st=ge(st,t,{selected:ht,active:Rt,open:ze,disabled:Oe})),_.createElement(Yf,{onItemClick:jt,mode:$==="horizontal"?"vertical":$,itemIcon:Ae,expandIcon:at},st)};function P_(e){var t=e.eventKey,i=e.children,a=jh(t),c=y1(i,a),u=N_();_.useEffect(function(){if(u)return u.registerPath(t,a),function(){u.unregisterPath(t,a)}},[a]);var d;return u?d=c:d=_.createElement(rue,e,c),_.createElement(I5.Provider,{value:a},d)}var iue=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],$d=[],oue=_.forwardRef(function(e,t){var i,a,c=e,u=c.prefixCls,d=u===void 0?"rc-menu":u,p=c.rootClassName,f=c.style,g=c.className,E=c.tabIndex,y=E===void 0?0:E,C=c.items,w=c.children,R=c.direction,O=c.id,k=c.mode,A=k===void 0?"vertical":k,x=c.inlineCollapsed,P=c.disabled,M=c.disabledOverflow,B=c.subMenuOpenDelay,F=B===void 0?.1:B,j=c.subMenuCloseDelay,$=j===void 0?.1:j,ee=c.forceSubMenuRender,H=c.defaultOpenKeys,J=c.openKeys,X=c.activeKey,W=c.defaultActiveFirst,Z=c.selectable,ne=Z===void 0?!0:Z,ie=c.multiple,de=ie===void 0?!1:ie,oe=c.defaultSelectedKeys,fe=c.selectedKeys,ge=c.onSelect,ae=c.onDeselect,se=c.inlineIndent,he=se===void 0?24:se,pe=c.motion,Oe=c.defaultMotions,be=c.triggerSubMenuAction,Ne=be===void 0?"hover":be,Ae=c.builtinPlacements,at=c.itemIcon,it=c.expandIcon,ze=c.overflowedIndicator,ht=ze===void 0?"...":ze,Pe=c.overflowedIndicatorPopupClassName,Ye=c.getPopupContainer,lt=c.onClick,At=c.onOpenChange,_t=c.onKeyDown;c.openAnimation,c.openTransitionName;var Be=c._internalRenderMenuItem,$e=c._internalRenderSubMenuItem,ke=mn(c,iue),et=_.useMemo(function(){return qle(w,C,$d)},[w,C]),ft=_.useState(!1),Rt=we(ft,2),on=Rt[0],dn=Rt[1],jt=_.useRef(),zt=Vle(O),Mn=R==="rtl",_n=Ka(H,{value:J,postState:function(ot){return ot||$d}}),Lt=we(_n,2),xt=Lt[0],en=Lt[1],st=function(ot){var tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function In(){en(ot),At==null||At(ot)}tn?wc.flushSync(In):In()},mt=_.useState(xt),$t=we(mt,2),yr=$t[0],Rn=$t[1],fr=_.useRef(!1),kn=_.useMemo(function(){return(A==="inline"||A==="vertical")&&x?["vertical",x]:[A,!1]},[A,x]),tt=we(kn,2),gt=tt[0],gn=tt[1],Mt=gt==="inline",Dr=_.useState(gt),mr=we(Dr,2),Ln=mr[0],je=mr[1],Qe=_.useState(gn),Ue=we(Qe,2),yt=Ue[0],Ut=Ue[1];_.useEffect(function(){je(gt),Ut(gn),fr.current&&(Mt?en(yr):st($d))},[gt,gn]);var Dt=_.useState(0),sr=we(Dt,2),zn=sr[0],Xr=sr[1],Fn=zn>=et.length-1||Ln!=="horizontal"||M;_.useEffect(function(){Mt&&Rn(xt)},[xt]),_.useEffect(function(){return fr.current=!0,function(){fr.current=!1}},[]);var cr=Mle(),Eo=cr.registerPath,bi=cr.unregisterPath,ta=cr.refreshOverflowKeys,_o=cr.isSubPathKey,Hn=cr.getKeyPath,na=cr.getKeys,Ps=cr.getSubPathKeys,ji=_.useMemo(function(){return{registerPath:Eo,unregisterPath:bi}},[Eo,bi]),Do=_.useMemo(function(){return{isSubPathKey:_o}},[_o]);_.useEffect(function(){ta(Fn?$d:et.slice(zn+1).map(function(vt){return vt.key}))},[zn,Fn]);var ts=Ka(X||W&&((i=et[0])===null||i===void 0?void 0:i.key),{value:X}),Ds=we(ts,2),ko=Ds[0],ra=Ds[1],ic=Gd(function(vt){ra(vt)}),ks=Gd(function(){ra(void 0)});_.useImperativeHandle(t,function(){return{list:jt.current,focus:function(ot){var tn,In=ko??((tn=et.find(function(Mo){return!Mo.props.disabled}))===null||tn===void 0?void 0:tn.key);if(In){var hn,Jn,Br;(hn=jt.current)===null||hn===void 0||(Jn=hn.querySelector("li[data-menu-id='".concat(v1(zt,In),"']")))===null||Jn===void 0||(Br=Jn.focus)===null||Br===void 0||Br.call(Jn,ot)}}}});var ia=Ka(oe||[],{value:fe,postState:function(ot){return Array.isArray(ot)?ot:ot==null?$d:[ot]}}),Lo=we(ia,2),ti=Lo[0],ro=Lo[1],ns=function(ot){if(ne){var tn=ot.key,In=ti.includes(tn),hn;de?In?hn=ti.filter(function(Br){return Br!==tn}):hn=[].concat(Et(ti),[tn]):hn=[tn],ro(hn);var Jn=ce(ce({},ot),{},{selectedKeys:hn});In?ae==null||ae(Jn):ge==null||ge(Jn)}!de&&xt.length&&Ln!=="inline"&&st($d)},Xn=Gd(function(vt){lt==null||lt(Xv(vt)),ns(vt)}),So=Gd(function(vt,ot){var tn=xt.filter(function(hn){return hn!==vt});if(ot)tn.push(vt);else if(Ln!=="inline"){var In=Ps(vt);tn=tn.filter(function(hn){return!In.has(hn)})}m_(xt,tn,!0)||st(tn,!0)}),oa=Gd(Ye),rs=function(ot,tn){var In=tn??!xt.includes(ot);So(ot,In)},oc=Dle(Ln,ko,Mn,zt,jt,na,Hn,ra,rs,_t);_.useEffect(function(){dn(!0)},[]);var ac=_.useMemo(function(){return{_internalRenderMenuItem:Be,_internalRenderSubMenuItem:$e}},[Be,$e]),is=Ln!=="horizontal"||M?et:et.map(function(vt,ot){return _.createElement(Yf,{key:vt.key,overflowDisabled:ot>zn},vt)}),os=_.createElement(nc,He({id:O,ref:jt,prefixCls:"".concat(d,"-overflow"),component:"ul",itemComponent:x_,className:ct(d,"".concat(d,"-root"),"".concat(d,"-").concat(Ln),g,(a={},Ie(a,"".concat(d,"-inline-collapsed"),yt),Ie(a,"".concat(d,"-rtl"),Mn),a),p),dir:R,style:f,role:"menu",tabIndex:y,data:is,renderRawItem:function(ot){return ot},renderRawRest:function(ot){var tn=ot.length,In=tn?et.slice(-tn):null;return _.createElement(P_,{eventKey:RI,title:ht,disabled:Fn,internalPopupClose:tn===0,popupClassName:Pe},In)},maxCount:Ln!=="horizontal"||M?nc.INVALIDATE:nc.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(ot){Xr(ot)},onKeyDown:oc},ke));return _.createElement(E1.Provider,{value:ac},_.createElement(b5.Provider,{value:zt},_.createElement(Yf,{prefixCls:d,rootClassName:p,mode:Ln,openKeys:xt,rtl:Mn,disabled:P,motion:on?pe:null,defaultMotions:on?Oe:null,activeKey:ko,onActive:ic,onInactive:ks,selectedKeys:ti,inlineIndent:he,subMenuOpenDelay:F,subMenuCloseDelay:$,forceSubMenuRender:ee,builtinPlacements:Ae,triggerSubMenuAction:Ne,getPopupContainer:oa,itemIcon:at,expandIcon:it,onItemClick:Xn,onOpenChange:So},_.createElement(w5.Provider,{value:Do},os),_.createElement("div",{style:{display:"none"},"aria-hidden":!0},_.createElement(R5.Provider,{value:ji},et)))))}),aue=["className","title","eventKey","children"],sue=["children"],cue=function(t){var i=t.className,a=t.title;t.eventKey;var c=t.children,u=mn(t,aue),d=_.useContext(Os),p=d.prefixCls,f="".concat(p,"-item-group");return _.createElement("li",He({role:"presentation"},u,{onClick:function(E){return E.stopPropagation()},className:ct(f,i)}),_.createElement("div",{role:"presentation",className:"".concat(f,"-title"),title:typeof a=="string"?a:void 0},a),_.createElement("ul",{role:"group",className:"".concat(f,"-list")},c))};function D_(e){var t=e.children,i=mn(e,sue),a=jh(i.eventKey),c=y1(t,a),u=N_();return u?c:_.createElement(cue,Za(i,["warnKey"]),c)}function C1(e){var t=e.className,i=e.style,a=_.useContext(Os),c=a.prefixCls,u=N_();return u?null:_.createElement("li",{className:ct("".concat(c,"-item-divider"),t),style:i})}var cm=oue;cm.Item=x_;cm.SubMenu=P_;cm.ItemGroup=D_;cm.Divider=C1;var lue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"};const uue=lue;var k5=function(t,i){return _.createElement(Na,ce(ce({},t),{},{ref:i,icon:uue}))};k5.displayName="EllipsisOutlined";const due=_.forwardRef(k5),hue=e=>{const{componentCls:t,motionDurationSlow:i,menuHorizontalHeight:a,colorSplit:c,lineWidth:u,lineType:d,menuItemPaddingInline:p}=e;return{[`${t}-horizontal`]:{lineHeight:`${a}px`,border:0,borderBottom:`${u}px ${d} ${c}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${t}-item, ${t}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:p},[`> ${t}-item:hover,
        > ${t}-item-active,
        > ${t}-submenu ${t}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${t}-item, ${t}-submenu-title`]:{transition:[`border-color ${i}`,`background ${i}`].join(",")},[`${t}-submenu-arrow`]:{display:"none"}}}},pue=hue,fue=e=>{let{componentCls:t,menuArrowOffset:i}=e;return{[`${t}-rtl`]:{direction:"rtl"},[`${t}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${t}-rtl${t}-vertical,
    ${t}-submenu-rtl ${t}-vertical`]:{[`${t}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(-${i})`},"&::after":{transform:`rotate(45deg) translateY(${i})`}}}}},mue=fue,r4=e=>Object.assign({},zj(e)),gue=(e,t)=>{const{componentCls:i,colorItemText:a,colorItemTextSelected:c,colorGroupTitle:u,colorItemBg:d,colorSubItemBg:p,colorItemBgSelected:f,colorActiveBarHeight:g,colorActiveBarWidth:E,colorActiveBarBorderSize:y,motionDurationSlow:C,motionEaseInOut:w,motionEaseOut:R,menuItemPaddingInline:O,motionDurationMid:k,colorItemTextHover:A,lineType:x,colorSplit:P,colorItemTextDisabled:M,colorDangerItemText:B,colorDangerItemTextHover:F,colorDangerItemTextSelected:j,colorDangerItemBgActive:$,colorDangerItemBgSelected:ee,colorItemBgHover:H,menuSubMenuBg:J,colorItemTextSelectedHorizontal:X,colorItemBgSelectedHorizontal:W}=e;return{[`${i}-${t}, ${i}-${t} > ${i}`]:{color:a,background:d,[`&${i}-root:focus-visible`]:Object.assign({},r4(e)),[`${i}-item-group-title`]:{color:u},[`${i}-submenu-selected`]:{[`> ${i}-submenu-title`]:{color:c}},[`${i}-item-disabled, ${i}-submenu-disabled`]:{color:`${M} !important`},[`${i}-item:hover, ${i}-submenu-title:hover`]:{[`&:not(${i}-item-selected):not(${i}-submenu-selected)`]:{color:A}},[`&:not(${i}-horizontal)`]:{[`${i}-item:not(${i}-item-selected)`]:{"&:hover":{backgroundColor:H},"&:active":{backgroundColor:f}},[`${i}-submenu-title`]:{"&:hover":{backgroundColor:H},"&:active":{backgroundColor:f}}},[`${i}-item-danger`]:{color:B,[`&${i}-item:hover`]:{[`&:not(${i}-item-selected):not(${i}-submenu-selected)`]:{color:F}},[`&${i}-item:active`]:{background:$}},[`${i}-item a`]:{"&, &:hover":{color:"inherit"}},[`${i}-item-selected`]:{color:c,[`&${i}-item-danger`]:{color:j},["a, a:hover"]:{color:"inherit"}},[`& ${i}-item-selected`]:{backgroundColor:f,[`&${i}-item-danger`]:{backgroundColor:ee}},[`${i}-item, ${i}-submenu-title`]:{[`&:not(${i}-item-disabled):focus-visible`]:Object.assign({},r4(e))},[`&${i}-submenu > ${i}`]:{backgroundColor:J},[`&${i}-popup > ${i}`]:{backgroundColor:d},[`&${i}-horizontal`]:Object.assign(Object.assign({},t==="dark"?{borderBottom:0}:{}),{[`> ${i}-item, > ${i}-submenu`]:{top:y,marginTop:-y,marginBottom:0,borderRadius:0,"&::after":{position:"absolute",insetInline:O,bottom:0,borderBottom:`${g}px solid transparent`,transition:`border-color ${C} ${w}`,content:'""'},["&:hover, &-active, &-open"]:{"&::after":{borderBottomWidth:g,borderBottomColor:X}},["&-selected"]:{color:X,backgroundColor:W,"&::after":{borderBottomWidth:g,borderBottomColor:X}}}}),[`&${i}-root`]:{[`&${i}-inline, &${i}-vertical`]:{borderInlineEnd:`${y}px ${x} ${P}`}},[`&${i}-inline`]:{[`${i}-sub${i}-inline`]:{background:p},[`${i}-item, ${i}-submenu-title`]:y&&E?{width:`calc(100% + ${y}px)`}:{},[`${i}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${E}px solid ${c}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${k} ${R}`,`opacity ${k} ${R}`].join(","),content:'""'},[`&${i}-item-danger`]:{"&::after":{borderInlineEndColor:j}}},[`${i}-selected, ${i}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${k} ${w}`,`opacity ${k} ${w}`].join(",")}}}}}},i4=gue,o4=e=>{const{componentCls:t,menuItemHeight:i,itemMarginInline:a,padding:c,menuArrowSize:u,marginXS:d,marginXXS:p}=e,f=c+u+d;return{[`${t}-item`]:{position:"relative",["&:not(:last-child)"]:{marginBottom:d}},[`${t}-item, ${t}-submenu-title`]:{height:i,lineHeight:`${i}px`,paddingInline:c,overflow:"hidden",textOverflow:"ellipsis",marginInline:a,marginBlock:p,width:`calc(100% - ${a*2}px)`},[`${t}-submenu`]:{paddingBottom:.02},[`> ${t}-item,
            > ${t}-submenu > ${t}-submenu-title`]:{height:i,lineHeight:`${i}px`},[`${t}-item-group-list ${t}-submenu-title,
            ${t}-submenu-title`]:{paddingInlineEnd:f}}},vue=e=>{const{componentCls:t,iconCls:i,menuItemHeight:a,colorTextLightSolid:c,dropdownWidth:u,controlHeightLG:d,motionDurationMid:p,motionEaseOut:f,paddingXL:g,fontSizeSM:E,fontSizeLG:y,motionDurationSlow:C,paddingXS:w,boxShadowSecondary:R}=e,O={height:a,lineHeight:`${a}px`,listStylePosition:"inside",listStyleType:"disc"};return[{[t]:{["&-inline, &-vertical"]:Object.assign({[`&${t}-root`]:{boxShadow:"none"}},o4(e))},[`${t}-submenu-popup`]:{[`${t}-vertical`]:Object.assign(Object.assign({},o4(e)),{boxShadow:R})}},{[`${t}-submenu-popup ${t}-vertical${t}-sub`]:{minWidth:u,maxHeight:`calc(100vh - ${d*2.5}px)`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${t}-inline`]:{width:"100%",[`&${t}-root`]:{[`${t}-item, ${t}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${C}`,`background ${C}`,`padding ${p} ${f}`].join(","),[`> ${t}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${t}-sub${t}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${t}-submenu > ${t}-submenu-title`]:O,[`& ${t}-item-group-title`]:{paddingInlineStart:g}},[`${t}-item`]:O}},{[`${t}-inline-collapsed`]:{width:a*2,[`&${t}-root`]:{[`${t}-item, ${t}-submenu ${t}-submenu-title`]:{[`> ${t}-inline-collapsed-noicon`]:{fontSize:y,textAlign:"center"}}},[`> ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-submenu > ${t}-submenu-title,
          > ${t}-submenu > ${t}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${E}px)`,textOverflow:"clip",[`
            ${t}-submenu-arrow,
            ${t}-submenu-expand-icon
          `]:{opacity:0},[`${t}-item-icon, ${i}`]:{margin:0,fontSize:y,lineHeight:`${a}px`,"+ span":{display:"inline-block",opacity:0}}},[`${t}-item-icon, ${i}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${t}-item-icon, ${i}`]:{display:"none"},"a, a:hover":{color:c}},[`${t}-item-group-title`]:Object.assign(Object.assign({},mh),{paddingInline:w})}}]},Eue=vue,a4=e=>{const{componentCls:t,fontSize:i,motionDurationSlow:a,motionDurationMid:c,motionEaseInOut:u,motionEaseOut:d,iconCls:p,controlHeightSM:f}=e;return{[`${t}-item, ${t}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${a}`,`background ${a}`,`padding ${a} ${u}`].join(","),[`${t}-item-icon, ${p}`]:{minWidth:i,fontSize:i,transition:[`font-size ${c} ${d}`,`margin ${a} ${u}`,`color ${a}`].join(","),"+ span":{marginInlineStart:f-i,opacity:1,transition:[`opacity ${a} ${u}`,`margin ${a}`,`color ${a}`].join(",")}},[`${t}-item-icon`]:Object.assign({},b_()),[`&${t}-item-only-child`]:{[`> ${p}, > ${t}-item-icon`]:{marginInlineEnd:0}}},[`${t}-item-disabled, ${t}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${t}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},s4=e=>{const{componentCls:t,motionDurationSlow:i,motionEaseInOut:a,borderRadius:c,menuArrowSize:u,menuArrowOffset:d}=e;return{[`${t}-submenu`]:{["&-expand-icon, &-arrow"]:{position:"absolute",top:"50%",insetInlineEnd:e.margin,width:u,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${i} ${a}, opacity ${i}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:u*.6,height:u*.15,backgroundColor:"currentcolor",borderRadius:c,transition:[`background ${i} ${a}`,`transform ${i} ${a}`,`top ${i} ${a}`,`color ${i} ${a}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(-${d})`},"&::after":{transform:`rotate(-45deg) translateY(${d})`}}}}},_ue=e=>{const{antCls:t,componentCls:i,fontSize:a,motionDurationSlow:c,motionDurationMid:u,motionEaseInOut:d,lineHeight:p,paddingXS:f,padding:g,colorSplit:E,lineWidth:y,zIndexPopup:C,borderRadiusLG:w,radiusSubMenuItem:R,menuArrowSize:O,menuArrowOffset:k,lineType:A,menuPanelMaskInset:x}=e;return[{"":{[`${i}`]:Object.assign(Object.assign({},eI()),{["&-hidden"]:{display:"none"}})},[`${i}-submenu-hidden`]:{display:"none"}},{[i]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},$u(e)),eI()),{marginBottom:0,paddingInlineStart:0,fontSize:a,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${c} cubic-bezier(0.2, 0, 0, 1) 0s`,["ul, ol"]:{margin:0,padding:0,listStyle:"none"},["&-overflow"]:{display:"flex",[`${i}-item`]:{flex:"none"}},[`${i}-item, ${i}-submenu, ${i}-submenu-title`]:{borderRadius:e.radiusItem},[`${i}-item-group-title`]:{padding:`${f}px ${g}px`,fontSize:a,lineHeight:p,transition:`all ${c}`},[`&-horizontal ${i}-submenu`]:{transition:[`border-color ${c} ${d}`,`background ${c} ${d}`].join(",")},[`${i}-submenu, ${i}-submenu-inline`]:{transition:[`border-color ${c} ${d}`,`background ${c} ${d}`,`padding ${u} ${d}`].join(",")},[`${i}-submenu ${i}-sub`]:{cursor:"initial",transition:[`background ${c} ${d}`,`padding ${c} ${d}`].join(",")},[`${i}-title-content`]:{transition:`color ${c}`},[`${i}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${i}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:E,borderStyle:A,borderWidth:0,borderTopWidth:y,marginBlock:y,padding:0,"&-dashed":{borderStyle:"dashed"}}}),a4(e)),{[`${i}-item-group`]:{[`${i}-item-group-list`]:{margin:0,padding:0,[`${i}-item, ${i}-submenu-title`]:{paddingInline:`${a*2}px ${g}px`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:C,background:"transparent",borderRadius:w,boxShadow:"none",transformOrigin:"0 0","&::before":{position:"absolute",inset:`${x}px 0 0`,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'}},"&-placement-rightTop::before":{top:0,insetInlineStart:x},[`> ${i}`]:Object.assign(Object.assign(Object.assign({borderRadius:w},a4(e)),s4(e)),{[`${i}-item, ${i}-submenu > ${i}-submenu-title`]:{borderRadius:R},[`${i}-submenu-title::after`]:{transition:`transform ${c} ${d}`}})}}),s4(e)),{[`&-inline-collapsed ${i}-submenu-arrow,
        &-inline ${i}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${k})`},"&::after":{transform:`rotate(45deg) translateX(-${k})`}},[`${i}-submenu-open${i}-submenu-inline > ${i}-submenu-title > ${i}-submenu-arrow`]:{transform:`translateY(-${O*.2}px)`,"&::after":{transform:`rotate(-45deg) translateX(-${k})`},"&::before":{transform:`rotate(45deg) translateX(${k})`}}})},{[`${t}-layout-header`]:{[i]:{lineHeight:"inherit"}}}]},Sue=(e,t)=>Uc("Menu",(a,c)=>{let{overrideComponentToken:u}=c;if(t===!1)return[];const{colorBgElevated:d,colorPrimary:p,colorError:f,colorErrorHover:g,colorTextLightSolid:E,controlHeightLG:y,fontSize:C}=a,w=C/7*5,R=Qr(a,{menuItemHeight:y,menuItemPaddingInline:a.margin,menuArrowSize:w,menuHorizontalHeight:y*1.15,menuArrowOffset:`${w*.25}px`,menuPanelMaskInset:-7,menuSubMenuBg:d}),O=new li(E).setAlpha(.65).toRgbString(),k=Qr(R,{colorItemText:O,colorItemTextHover:E,colorGroupTitle:O,colorItemTextSelected:E,colorItemBg:"#001529",colorSubItemBg:"#000c17",colorItemBgActive:"transparent",colorItemBgSelected:p,colorActiveBarWidth:0,colorActiveBarHeight:0,colorActiveBarBorderSize:0,colorItemTextDisabled:new li(E).setAlpha(.25).toRgbString(),colorDangerItemText:f,colorDangerItemTextHover:g,colorDangerItemTextSelected:E,colorDangerItemBgActive:f,colorDangerItemBgSelected:f,menuSubMenuBg:"#001529",colorItemTextSelectedHorizontal:E,colorItemBgSelectedHorizontal:p},Object.assign({},u));return[_ue(R),pue(R),Eue(R),i4(R,"light"),i4(k,"dark"),mue(R),nae(R),Wv(R,"slide-up"),Wv(R,"slide-down"),A8(R,"zoom-big")]},a=>{const{colorPrimary:c,colorError:u,colorTextDisabled:d,colorErrorBg:p,colorText:f,colorTextDescription:g,colorBgContainer:E,colorFillAlter:y,colorFillContent:C,lineWidth:w,lineWidthBold:R,controlItemBgActive:O,colorBgTextHover:k}=a;return{dropdownWidth:160,zIndexPopup:a.zIndexPopupBase+50,radiusItem:a.borderRadiusLG,radiusSubMenuItem:a.borderRadiusSM,colorItemText:f,colorItemTextHover:f,colorItemTextHoverHorizontal:c,colorGroupTitle:g,colorItemTextSelected:c,colorItemTextSelectedHorizontal:c,colorItemBg:E,colorItemBgHover:k,colorItemBgActive:C,colorSubItemBg:y,colorItemBgSelected:O,colorItemBgSelectedHorizontal:"transparent",colorActiveBarWidth:0,colorActiveBarHeight:R,colorActiveBarBorderSize:w,colorItemTextDisabled:d,colorDangerItemText:u,colorDangerItemTextHover:u,colorDangerItemTextSelected:u,colorDangerItemBgActive:p,colorDangerItemBgSelected:p,itemMarginInline:a.marginXXS}})(e);globalThis&&globalThis.__rest;const yue=_.createContext(null),c4=yue;var Cue=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const bue=e=>{const{prefixCls:t,className:i,dashed:a}=e,c=Cue(e,["prefixCls","className","dashed"]),{getPrefixCls:u}=_.useContext(ei),d=u("menu",t),p=ct({[`${d}-item-divider-dashed`]:!!a},i);return _.createElement(C1,Object.assign({className:p},c))},L5=bue;var Tue={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"};const Rue=Tue;var M5=function(t,i){return _.createElement(Na,ce(ce({},t),{},{ref:i,icon:Rue}))};M5.displayName="BarsOutlined";const Iue=_.forwardRef(M5);var wue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};const Oue=wue;var U5=function(t,i){return _.createElement(Na,ce(ce({},t),{},{ref:i,icon:Oue}))};U5.displayName="LeftOutlined";const l4=_.forwardRef(U5),Aue=e=>!isNaN(parseFloat(e))&&isFinite(e),Nue=Aue,xue=e=>{const{componentCls:t,colorBgContainer:i,colorBgBody:a,colorText:c}=e;return{[`${t}-sider-light`]:{background:i,[`${t}-sider-trigger`]:{color:c,background:i},[`${t}-sider-zero-width-trigger`]:{color:c,background:i,border:`1px solid ${a}`,borderInlineStart:0}}}},Pue=xue,Due=e=>{const{antCls:t,componentCls:i,colorText:a,colorTextLightSolid:c,colorBgHeader:u,colorBgBody:d,colorBgTrigger:p,layoutHeaderHeight:f,layoutHeaderPaddingInline:g,layoutHeaderColor:E,layoutFooterPadding:y,layoutTriggerHeight:C,layoutZeroTriggerSize:w,motionDurationMid:R,motionDurationSlow:O,fontSize:k,borderRadius:A}=e;return{[i]:Object.assign(Object.assign({display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:d,"&, *":{boxSizing:"border-box"},[`&${i}-has-sider`]:{flexDirection:"row",[`> ${i}, > ${i}-content`]:{width:0}},[`${i}-header, &${i}-footer`]:{flex:"0 0 auto"},[`${i}-sider`]:{position:"relative",minWidth:0,background:u,transition:`all ${R}, background 0s`,"&-children":{height:"100%",marginTop:-.1,paddingTop:.1,[`${t}-menu${t}-menu-inline-collapsed`]:{width:"auto"}},"&-has-trigger":{paddingBottom:C},"&-right":{order:1},"&-trigger":{position:"fixed",bottom:0,zIndex:1,height:C,color:c,lineHeight:`${C}px`,textAlign:"center",background:p,cursor:"pointer",transition:`all ${R}`},"&-zero-width":{"> *":{overflow:"hidden"},"&-trigger":{position:"absolute",top:f,insetInlineEnd:-w,zIndex:1,width:w,height:w,color:c,fontSize:e.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:u,borderStartStartRadius:0,borderStartEndRadius:A,borderEndEndRadius:A,borderEndStartRadius:0,cursor:"pointer",transition:`background ${O} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${O}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:-w,borderStartStartRadius:A,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:A}}}}},Pue(e)),{"&-rtl":{direction:"rtl"}}),[`${i}-header`]:{height:f,paddingInline:g,color:E,lineHeight:`${f}px`,background:u,[`${t}-menu`]:{lineHeight:"inherit"}},[`${i}-footer`]:{padding:y,color:a,fontSize:k,background:d},[`${i}-content`]:{flex:"auto",minHeight:0}}},V5=Uc("Layout",e=>{const{colorText:t,controlHeightSM:i,controlHeight:a,controlHeightLG:c,marginXXS:u}=e,d=c*1.25,p=Qr(e,{layoutHeaderHeight:a*2,layoutHeaderPaddingInline:d,layoutHeaderColor:t,layoutFooterPadding:`${i}px ${d}px`,layoutTriggerHeight:c+u*2,layoutZeroTriggerSize:c});return[Due(p)]},e=>{const{colorBgLayout:t}=e;return{colorBgHeader:"#001529",colorBgBody:t,colorBgTrigger:"#002140"}});var F5=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const B5=_.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}});function k_(e){let{suffixCls:t,tagName:i,displayName:a}=e;return c=>_.forwardRef((d,p)=>_.createElement(c,Object.assign({ref:p,suffixCls:t,tagName:i},d)))}const b1=_.forwardRef((e,t)=>{const{prefixCls:i,suffixCls:a,className:c,tagName:u}=e,d=F5(e,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:p}=_.useContext(ei),f=p("layout",i),[g,E]=V5(f),y=a?`${f}-${a}`:f;return g(_.createElement(u,Object.assign({className:ct(i||y,c,E),ref:t},d)))}),kue=_.forwardRef((e,t)=>{const{direction:i}=_.useContext(ei),[a,c]=_.useState([]),{prefixCls:u,className:d,rootClassName:p,children:f,hasSider:g,tagName:E}=e,y=F5(e,["prefixCls","className","rootClassName","children","hasSider","tagName"]),C=Za(y,["suffixCls"]),{getPrefixCls:w}=_.useContext(ei),R=w("layout",u),[O,k]=V5(R),A=ct(R,{[`${R}-has-sider`]:typeof g=="boolean"?g:a.length>0,[`${R}-rtl`]:i==="rtl"},d,p,k),x=_.useMemo(()=>({siderHook:{addSider:P=>{c(M=>[].concat(Et(M),[P]))},removeSider:P=>{c(M=>M.filter(B=>B!==P))}}}),[]);return O(_.createElement(B5.Provider,{value:x},_.createElement(E,Object.assign({ref:t,className:A},C),f)))}),Lue=k_({tagName:"section",displayName:"Layout"})(kue),Mue=k_({suffixCls:"header",tagName:"header",displayName:"Header"})(b1),Uue=k_({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(b1),Vue=k_({suffixCls:"content",tagName:"main",displayName:"Content"})(b1),Fue=Lue;var Bue=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const u4={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},T1=_.createContext({}),jue=(()=>{let e=0;return function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e+=1,`${t}${e}`}})(),$ue=_.forwardRef((e,t)=>{var{prefixCls:i,className:a,trigger:c,children:u,defaultCollapsed:d=!1,theme:p="dark",style:f={},collapsible:g=!1,reverseArrow:E=!1,width:y=200,collapsedWidth:C=80,zeroWidthTriggerStyle:w,breakpoint:R,onCollapse:O,onBreakpoint:k}=e,A=Bue(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]);const{siderHook:x}=_.useContext(B5),[P,M]=_.useState("collapsed"in A?A.collapsed:d),[B,F]=_.useState(!1);_.useEffect(()=>{"collapsed"in A&&M(A.collapsed)},[A.collapsed]);const j=(W,Z)=>{"collapsed"in A||M(W),O==null||O(W,Z)},$=_.useRef();$.current=W=>{F(W.matches),k==null||k(W.matches),P!==W.matches&&j(W.matches,"responsive")},_.useEffect(()=>{function W(ne){return $.current(ne)}let Z;if(typeof window<"u"){const{matchMedia:ne}=window;if(ne&&R&&R in u4){Z=ne(`(max-width: ${u4[R]})`);try{Z.addEventListener("change",W)}catch{Z.addListener(W)}W(Z)}}return()=>{try{Z==null||Z.removeEventListener("change",W)}catch{Z==null||Z.removeListener(W)}}},[R]),_.useEffect(()=>{const W=jue("ant-sider-");return x.addSider(W),()=>x.removeSider(W)},[]);const ee=()=>{j(!P,"clickTrigger")},{getPrefixCls:H}=_.useContext(ei),J=()=>{const W=H("layout-sider",i),Z=Za(A,["collapsed"]),ne=P?C:y,ie=Nue(ne)?`${ne}px`:String(ne),de=parseFloat(String(C||0))===0?_.createElement("span",{onClick:ee,className:ct(`${W}-zero-width-trigger`,`${W}-zero-width-trigger-${E?"right":"left"}`),style:w},c||_.createElement(Iue,null)):null,ge={expanded:E?_.createElement(PV,null):_.createElement(l4,null),collapsed:E?_.createElement(l4,null):_.createElement(PV,null)}[P?"collapsed":"expanded"],ae=c!==null?de||_.createElement("div",{className:`${W}-trigger`,onClick:ee,style:{width:ie}},c||ge):null,se=Object.assign(Object.assign({},f),{flex:`0 0 ${ie}`,maxWidth:ie,minWidth:ie,width:ie}),he=ct(W,`${W}-${p}`,{[`${W}-collapsed`]:!!P,[`${W}-has-trigger`]:g&&c!==null&&!de,[`${W}-below`]:!!B,[`${W}-zero-width`]:parseFloat(ie)===0},a);return _.createElement("aside",Object.assign({className:he},Z,{style:se,ref:t}),_.createElement("div",{className:`${W}-children`},u),g||B&&de?ae:null)},X=_.useMemo(()=>({siderCollapsed:P}),[P]);return _.createElement(T1.Provider,{value:X},J())}),Hue=$ue,Wue=_.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),Jv=Wue,zue=e=>{var t;const{className:i,children:a,icon:c,title:u,danger:d}=e,{prefixCls:p,firstLevel:f,direction:g,disableMenuItemTitleTooltip:E,inlineCollapsed:y}=_.useContext(Jv),C=x=>{const P=_.createElement("span",{className:`${p}-title-content`},a);return(!c||Uu(a)&&a.type==="span")&&a&&x&&f&&typeof a=="string"?_.createElement("div",{className:`${p}-inline-collapsed-noicon`},a.charAt(0)):P},{siderCollapsed:w}=_.useContext(T1);let R=u;typeof u>"u"?R=f?a:"":u===!1&&(R="");const O={title:R};!w&&!y&&(O.title=null,O.open=!1);const k=Pc(a).length;let A=_.createElement(x_,Object.assign({},Za(e,["title","icon","danger"]),{className:ct({[`${p}-item-danger`]:d,[`${p}-item-only-child`]:(c?k+1:k)===1},i),title:typeof u=="string"?u:void 0}),jl(c,{className:ct(Uu(c)?(t=c.props)===null||t===void 0?void 0:t.className:"",`${p}-item-icon`)}),C(y));return E||(A=_.createElement(Yv,Object.assign({},O,{placement:g==="rtl"?"left":"right",overlayClassName:`${p}-inline-collapsed-tooltip`}),A)),A},j5=zue,Gue=e=>{var t;const{popupClassName:i,icon:a,title:c,theme:u}=e,d=_.useContext(Jv),{prefixCls:p,inlineCollapsed:f,theme:g,mode:E}=d,y=jh();let C;if(!a)C=f&&!y.length&&c&&typeof c=="string"?_.createElement("div",{className:`${p}-inline-collapsed-noicon`},c.charAt(0)):_.createElement("span",{className:`${p}-title-content`},c);else{const O=Uu(c)&&c.type==="span";C=_.createElement(_.Fragment,null,jl(a,{className:ct(Uu(a)?(t=a.props)===null||t===void 0?void 0:t.className:"",`${p}-item-icon`)}),O?c:_.createElement("span",{className:`${p}-title-content`},c))}const w=_.useMemo(()=>Object.assign(Object.assign({},d),{firstLevel:!1}),[d]),R=E==="horizontal"?[0,8]:[10,0];return _.createElement(Jv.Provider,{value:w},_.createElement(P_,Object.assign({popupOffset:R},Za(e,["icon"]),{title:C,popupClassName:ct(p,i,`${p}-${u||g}`)})))},$5=Gue;var Kue=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function wI(e){return(e||[]).map((t,i)=>{if(t&&typeof t=="object"){const a=t,{label:c,children:u,key:d,type:p}=a,f=Kue(a,["label","children","key","type"]),g=d??`tmp-${i}`;return u||p==="group"?p==="group"?_.createElement(D_,Object.assign({key:g},f,{title:c}),wI(u)):_.createElement($5,Object.assign({key:g},f,{title:c}),wI(u)):p==="divider"?_.createElement(L5,Object.assign({key:g},f)):_.createElement(j5,Object.assign({key:g},f),c)}return null}).filter(t=>t)}function Yue(e){return _.useMemo(()=>e&&wI(e),[e])}var que=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Xue=_.forwardRef((e,t)=>{var i,a;const c=_.useContext(c4),u=c||{},{getPrefixCls:d,getPopupContainer:p,direction:f}=_.useContext(ei),g=d(),{prefixCls:E,className:y,theme:C="light",expandIcon:w,_internalDisableMenuItemTitleTooltip:R,inlineCollapsed:O,siderCollapsed:k,items:A,children:x,rootClassName:P,mode:M,selectable:B,onClick:F}=e,j=que(e,["prefixCls","className","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","items","children","rootClassName","mode","selectable","onClick"]),$=Za(j,["collapsedWidth"]),ee=Yue(A)||x;(i=u.validator)===null||i===void 0||i.call(u,{mode:M});const H=Ts(function(){var ae;F==null||F.apply(void 0,arguments),(ae=u.onClick)===null||ae===void 0||ae.call(u)}),J=u.mode||M,X=B??u.selectable,W=_.useMemo(()=>k!==void 0?k:O,[O,k]),Z={horizontal:{motionName:`${g}-slide-up`},inline:poe(g),other:{motionName:`${g}-zoom-big`}},ne=d("menu",E||u.prefixCls),[ie,de]=Sue(ne,!c),oe=ct(`${ne}-${C}`,y);let fe;if(typeof w=="function")fe=w;else{const ae=w||u.expandIcon;fe=jl(ae,{className:ct(`${ne}-submenu-expand-icon`,(a=ae==null?void 0:ae.props)===null||a===void 0?void 0:a.className)})}const ge=_.useMemo(()=>({prefixCls:ne,inlineCollapsed:W||!1,direction:f,firstLevel:!0,theme:C,mode:J,disableMenuItemTitleTooltip:R}),[ne,W,f,R,C]);return ie(_.createElement(c4.Provider,{value:null},_.createElement(Jv.Provider,{value:ge},_.createElement(cm,Object.assign({getPopupContainer:p,overflowedIndicator:_.createElement(due,null),overflowedIndicatorPopupClassName:`${ne}-${C}`,mode:J,selectable:X,onClick:H},$,{inlineCollapsed:W,className:oe,prefixCls:ne,direction:f,defaultMotions:Z,expandIcon:fe,ref:t,rootClassName:ct(P,de)}),ee))))}),Jue=Xue,lm=_.forwardRef((e,t)=>{const i=_.useRef(null),a=_.useContext(T1);return _.useImperativeHandle(t,()=>({menu:i.current,focus:c=>{var u;(u=i.current)===null||u===void 0||u.focus(c)}})),_.createElement(Jue,Object.assign({ref:i},e,a))});lm.Item=j5;lm.SubMenu=$5;lm.Divider=L5;lm.ItemGroup=D_;const Que=lm,Zue=e=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),R1=e=>({borderColor:e.inputBorderHoverColor,borderInlineEndWidth:e.lineWidth}),OI=e=>({borderColor:e.inputBorderHoverColor,boxShadow:`0 0 0 ${e.controlOutlineWidth}px ${e.controlOutline}`,borderInlineEndWidth:e.lineWidth,outline:0}),H5=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover":Object.assign({},R1(Qr(e,{inputBorderHoverColor:e.colorBorder})))}),W5=e=>{const{inputPaddingVerticalLG:t,fontSizeLG:i,lineHeightLG:a,borderRadiusLG:c,inputPaddingHorizontalLG:u}=e;return{padding:`${t}px ${u}px`,fontSize:i,lineHeight:a,borderRadius:c}},z5=e=>({padding:`${e.inputPaddingVerticalSM}px ${e.controlPaddingHorizontalSM-1}px`,borderRadius:e.borderRadiusSM}),G5=(e,t)=>{const{componentCls:i,colorError:a,colorWarning:c,colorErrorOutline:u,colorWarningOutline:d,colorErrorBorderHover:p,colorWarningBorderHover:f}=e;return{[`&-status-error:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:a,"&:hover":{borderColor:p},"&:focus, &-focused":Object.assign({},OI(Qr(e,{inputBorderActiveColor:a,inputBorderHoverColor:a,controlOutline:u}))),[`${i}-prefix, ${i}-suffix`]:{color:a}},[`&-status-warning:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:c,"&:hover":{borderColor:f},"&:focus, &-focused":Object.assign({},OI(Qr(e,{inputBorderActiveColor:c,inputBorderHoverColor:c,controlOutline:d}))),[`${i}-prefix, ${i}-suffix`]:{color:c}}}},K5=e=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${e.inputPaddingVertical}px ${e.inputPaddingHorizontal}px`,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,backgroundColor:e.colorBgContainer,backgroundImage:"none",borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:e.colorBorder,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`},Zue(e.colorTextPlaceholder)),{"&:hover":Object.assign({},R1(e)),"&:focus, &-focused":Object.assign({},OI(e)),"&-disabled, &[disabled]":Object.assign({},H5(e)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},W5(e)),"&-sm":Object.assign({},z5(e)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}}),ede=e=>{const{componentCls:t,antCls:i}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,["&[class*='col-']"]:{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${t}, &-lg > ${t}-group-addon`]:Object.assign({},W5(e)),[`&-sm ${t}, &-sm > ${t}-group-addon`]:Object.assign({},z5(e)),[`&-lg ${i}-select-single ${i}-select-selector`]:{height:e.controlHeightLG},[`&-sm ${i}-select-single ${i}-select-selector`]:{height:e.controlHeightSM},[`> ${t}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${t}-group`]:{["&-addon, &-wrap"]:{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${e.inputPaddingHorizontal}px`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,textAlign:"center",backgroundColor:e.colorFillAlter,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${i}-select`]:{margin:`-${e.inputPaddingVertical+1}px -${e.inputPaddingHorizontal}px`,[`&${i}-select-single:not(${i}-select-customize-input)`]:{[`${i}-select-selector`]:{backgroundColor:"inherit",border:`${e.lineWidth}px ${e.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${i}-select-selector`]:{color:e.colorPrimary}}},[`${i}-cascader-picker`]:{margin:`-9px -${e.inputPaddingHorizontal}px`,backgroundColor:"transparent",[`${i}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},[`${t}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${t}-search-with-button &`]:{zIndex:0}}},[`> ${t}:first-child, ${t}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${i}-select ${i}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}-affix-wrapper`]:{[`&:not(:first-child) ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}:last-child, ${t}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${i}-select ${i}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${t}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${t}-search &`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}},[`&:not(:first-child), ${t}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${t}-group-compact`]:Object.assign(Object.assign({display:"block"},eI()),{[`${t}-group-addon, ${t}-group-wrap, > ${t}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`& > ${t}-affix-wrapper`]:{display:"inline-flex"},[`& > ${i}-picker-range`]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:-e.lineWidth,borderInlineEndWidth:e.lineWidth},[`${t}`]:{float:"none"},[`& > ${i}-select > ${i}-select-selector,
      & > ${i}-select-auto-complete ${t},
      & > ${i}-cascader-picker ${t},
      & > ${t}-group-wrapper ${t}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${i}-select-focused`]:{zIndex:1},[`& > ${i}-select > ${i}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${i}-select:first-child > ${i}-select-selector,
      & > ${i}-select-auto-complete:first-child ${t},
      & > ${i}-cascader-picker:first-child ${t}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,
      & > ${i}-select:last-child > ${i}-select-selector,
      & > ${i}-cascader-picker:last-child ${t},
      & > ${i}-cascader-picker-focused:last-child ${t}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${i}-select-auto-complete ${t}`]:{verticalAlign:"top"},[`${t}-group-wrapper + ${t}-group-wrapper`]:{marginInlineStart:-e.lineWidth,[`${t}-affix-wrapper`]:{borderRadius:0}},[`${t}-group-wrapper:not(:last-child)`]:{[`&${t}-search > ${t}-group`]:{[`& > ${t}-group-addon > ${t}-search-button`]:{borderRadius:0},[`& > ${t}`]:{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}}}})}},tde=e=>{const{componentCls:t,controlHeightSM:i,lineWidth:a}=e,c=16,u=(i-a*2-c)/2;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},$u(e)),K5(e)),G5(e,t)),{'&[type="color"]':{height:e.controlHeight,[`&${t}-lg`]:{height:e.controlHeightLG},[`&${t}-sm`]:{height:i,paddingTop:u,paddingBottom:u}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},nde=e=>{const{componentCls:t}=e;return{[`${t}-clear-icon`]:{margin:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${e.inputAffixPadding}px`}}}},rde=e=>{const{componentCls:t,inputAffixPadding:i,colorTextDescription:a,motionDurationSlow:c,colorIcon:u,colorIconHover:d,iconCls:p}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},K5(e)),{display:"inline-flex",[`&:not(${t}-affix-wrapper-disabled):hover`]:Object.assign(Object.assign({},R1(e)),{zIndex:1,[`${t}-search-with-button &`]:{zIndex:0}}),"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${t}[disabled]`]:{background:"transparent"}},[`> input${t}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{width:0,visibility:"hidden",content:'"\\a0"'},[`${t}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:a},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:i},"&-suffix":{marginInlineStart:i}}}),nde(e)),{[`${p}${t}-password-icon`]:{color:u,cursor:"pointer",transition:`all ${c}`,"&:hover":{color:d}}}),G5(e,`${t}-affix-wrapper`))}},ide=e=>{const{componentCls:t,colorError:i,colorWarning:a,borderRadiusLG:c,borderRadiusSM:u}=e;return{[`${t}-group`]:Object.assign(Object.assign(Object.assign({},$u(e)),ede(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${t}-group-addon`]:{borderRadius:c}},"&-sm":{[`${t}-group-addon`]:{borderRadius:u}},"&-status-error":{[`${t}-group-addon`]:{color:i,borderColor:i}},"&-status-warning":{[`${t}-group-addon`]:{color:a,borderColor:a}},"&-disabled":{[`${t}-group-addon`]:Object.assign({},H5(e))}}})}},ode=e=>{const{componentCls:t,antCls:i}=e,a=`${t}-search`;return{[a]:{[`${t}`]:{"&:hover, &:focus":{borderColor:e.colorPrimaryHover,[`+ ${t}-group-addon ${a}-button:not(${i}-btn-primary)`]:{borderInlineStartColor:e.colorPrimaryHover}}},[`${t}-affix-wrapper`]:{borderRadius:0},[`${t}-lg`]:{lineHeight:e.lineHeightLG-2e-4},[`> ${t}-group`]:{[`> ${t}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${a}-button`]:{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius,borderEndStartRadius:0},[`${a}-button:not(${i}-btn-primary)`]:{color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive},[`&${i}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${a}-button`]:{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${a}-button`]:{height:e.controlHeightLG},[`&-small ${a}-button`]:{height:e.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${t}-compact-item`]:{[`&:not(${t}-compact-last-item)`]:{[`${t}-group-addon`]:{[`${t}-search-button`]:{marginInlineEnd:-e.lineWidth,borderRadius:0}}},[`&:not(${t}-compact-first-item)`]:{[`${t},${t}-affix-wrapper`]:{borderRadius:0}},[`> ${t}-group-addon ${t}-search-button,
        > ${t},
        ${t}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${t}-affix-wrapper-focused`]:{zIndex:2}}}}};function Y5(e){return Qr(e,{inputAffixPadding:e.paddingXXS,inputPaddingVertical:Math.max(Math.round((e.controlHeight-e.fontSize*e.lineHeight)/2*10)/10-e.lineWidth,3),inputPaddingVerticalLG:Math.ceil((e.controlHeightLG-e.fontSizeLG*e.lineHeightLG)/2*10)/10-e.lineWidth,inputPaddingVerticalSM:Math.max(Math.round((e.controlHeightSM-e.fontSize*e.lineHeight)/2*10)/10-e.lineWidth,0),inputPaddingHorizontal:e.paddingSM-e.lineWidth,inputPaddingHorizontalSM:e.paddingXS-e.lineWidth,inputPaddingHorizontalLG:e.controlPaddingHorizontal-e.lineWidth,inputBorderHoverColor:e.colorPrimaryHover,inputBorderActiveColor:e.colorPrimaryHover})}const ade=e=>{const{componentCls:t,paddingLG:i}=e,a=`${t}-textarea`;return{[a]:{position:"relative","&-show-count":{[`> ${t}`]:{height:"100%"},[`${t}-data-count`]:{position:"absolute",bottom:-e.fontSize*e.lineHeight,insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`&-affix-wrapper${a}-has-feedback`]:{[`${t}`]:{paddingInlineEnd:i}},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingXS,insetBlockStart:e.paddingXS},[`${a}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.inputPaddingHorizontal,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},sde=Uc("Input",e=>{const t=Y5(e);return[tde(t),ade(t),rde(t),ide(t),ode(t),t1(t)]});function Hd(e){return!!(e.addonBefore||e.addonAfter)}function sT(e){return!!(e.prefix||e.suffix||e.allowClear)}function cT(e,t,i,a){if(i){var c=t;if(t.type==="click"){var u=e.cloneNode(!0);c=Object.create(t,{target:{value:u},currentTarget:{value:u}}),u.value="",i(c);return}if(a!==void 0){c=Object.create(t,{target:{value:e},currentTarget:{value:e}}),e.value=a,i(c);return}i(c)}}function cde(e){return typeof e>"u"||e===null?"":String(e)}var lde=function(t){var i,a,c=t.inputElement,u=t.prefixCls,d=t.prefix,p=t.suffix,f=t.addonBefore,g=t.addonAfter,E=t.className,y=t.style,C=t.disabled,w=t.readOnly,R=t.focused,O=t.triggerFocus,k=t.allowClear,A=t.value,x=t.handleReset,P=t.hidden,M=t.classes,B=t.classNames,F=t.dataAttrs,j=t.styles,$=_.useRef(null),ee=function(ae){var se;(se=$.current)!==null&&se!==void 0&&se.contains(ae.target)&&(O==null||O())},H=function(){var ae;if(!k)return null;var se=!C&&!w&&A,he="".concat(u,"-clear-icon"),pe=An(k)==="object"&&k!==null&&k!==void 0&&k.clearIcon?k.clearIcon:"â";return Ot.createElement("span",{onClick:x,onMouseDown:function(be){return be.preventDefault()},className:ct(he,(ae={},Ie(ae,"".concat(he,"-hidden"),!se),Ie(ae,"".concat(he,"-has-suffix"),!!p),ae)),role:"button",tabIndex:-1},pe)},J=_.cloneElement(c,{value:A,hidden:P,className:ct((i=c.props)===null||i===void 0?void 0:i.className,!sT(t)&&!Hd(t)&&E)||null,style:ce(ce({},(a=c.props)===null||a===void 0?void 0:a.style),!sT(t)&&!Hd(t)?y:{})});if(sT(t)){var X,W="".concat(u,"-affix-wrapper"),Z=ct(W,(X={},Ie(X,"".concat(W,"-disabled"),C),Ie(X,"".concat(W,"-focused"),R),Ie(X,"".concat(W,"-readonly"),w),Ie(X,"".concat(W,"-input-with-clear-btn"),p&&k&&A),X),!Hd(t)&&E,M==null?void 0:M.affixWrapper),ne=(p||k)&&Ot.createElement("span",{className:ct("".concat(u,"-suffix"),B==null?void 0:B.suffix),style:j==null?void 0:j.suffix},H(),p);J=Ot.createElement("span",He({className:Z,style:Hd(t)?void 0:y,hidden:!Hd(t)&&P,onClick:ee},F==null?void 0:F.affixWrapper,{ref:$}),d&&Ot.createElement("span",{className:ct("".concat(u,"-prefix"),B==null?void 0:B.prefix),style:j==null?void 0:j.prefix},d),_.cloneElement(c,{value:A,hidden:null}),ne)}if(Hd(t)){var ie="".concat(u,"-group"),de="".concat(ie,"-addon"),oe=ct("".concat(u,"-wrapper"),ie,M==null?void 0:M.wrapper),fe=ct("".concat(u,"-group-wrapper"),E,M==null?void 0:M.group);return Ot.createElement("span",{className:fe,style:y,hidden:P},Ot.createElement("span",{className:oe},f&&Ot.createElement("span",{className:de},f),_.cloneElement(J,{hidden:null}),g&&Ot.createElement("span",{className:de},g)))}return J};globalThis&&globalThis.__rest;function ude(e,t){if(!e)return;e.focus(t);const{cursor:i}=t||{};if(i){const a=e.value.length;switch(i){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(a,a);break;default:e.setSelectionRange(0,a);break}}}var dde=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,hde=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],lT={},$a;function pde(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&lT[i])return lT[i];var a=window.getComputedStyle(e),c=a.getPropertyValue("box-sizing")||a.getPropertyValue("-moz-box-sizing")||a.getPropertyValue("-webkit-box-sizing"),u=parseFloat(a.getPropertyValue("padding-bottom"))+parseFloat(a.getPropertyValue("padding-top")),d=parseFloat(a.getPropertyValue("border-bottom-width"))+parseFloat(a.getPropertyValue("border-top-width")),p=hde.map(function(g){return"".concat(g,":").concat(a.getPropertyValue(g))}).join(";"),f={sizingStyle:p,paddingSize:u,borderSize:d,boxSizing:c};return t&&i&&(lT[i]=f),f}function fde(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;$a||($a=document.createElement("textarea"),$a.setAttribute("tab-index","-1"),$a.setAttribute("aria-hidden","true"),document.body.appendChild($a)),e.getAttribute("wrap")?$a.setAttribute("wrap",e.getAttribute("wrap")):$a.removeAttribute("wrap");var c=pde(e,t),u=c.paddingSize,d=c.borderSize,p=c.boxSizing,f=c.sizingStyle;$a.setAttribute("style","".concat(f,";").concat(dde)),$a.value=e.value||e.placeholder||"";var g=void 0,E=void 0,y,C=$a.scrollHeight;if(p==="border-box"?C+=d:p==="content-box"&&(C-=u),i!==null||a!==null){$a.value=" ";var w=$a.scrollHeight-u;i!==null&&(g=w*i,p==="border-box"&&(g=g+u+d),C=Math.max(g,C)),a!==null&&(E=w*a,p==="border-box"&&(E=E+u+d),y=C>E?"":"hidden",C=Math.min(E,C))}var R={height:C,overflowY:y,resize:"none"};return g&&(R.minHeight=g),E&&(R.maxHeight=E),R}var mde=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],uT=0,dT=1,hT=2,gde=_.forwardRef(function(e,t){var i=e,a=i.prefixCls;i.onPressEnter;var c=i.defaultValue,u=i.value,d=i.autoSize,p=i.onResize,f=i.className,g=i.style,E=i.disabled,y=i.onChange;i.onInternalAutoSize;var C=mn(i,mde),w=Ka(c,{value:u,postState:function(pe){return pe??""}}),R=we(w,2),O=R[0],k=R[1],A=function(pe){k(pe.target.value),y==null||y(pe)},x=_.useRef();_.useImperativeHandle(t,function(){return{textArea:x.current}});var P=_.useMemo(function(){return d&&An(d)==="object"?[d.minRows,d.maxRows]:[]},[d]),M=we(P,2),B=M[0],F=M[1],j=!!d,$=function(){try{if(document.activeElement===x.current){var pe=x.current,Oe=pe.selectionStart,be=pe.selectionEnd,Ne=pe.scrollTop;x.current.setSelectionRange(Oe,be),x.current.scrollTop=Ne}}catch{}},ee=_.useState(hT),H=we(ee,2),J=H[0],X=H[1],W=_.useState(),Z=we(W,2),ne=Z[0],ie=Z[1],de=function(){X(uT)};ar(function(){j&&de()},[u,B,F,j]),ar(function(){if(J===uT)X(dT);else if(J===dT){var he=fde(x.current,!1,B,F);X(hT),ie(he)}else $()},[J]);var oe=_.useRef(),fe=function(){_r.cancel(oe.current)},ge=function(pe){J===hT&&(p==null||p(pe),d&&(fe(),oe.current=_r(function(){de()})))};_.useEffect(function(){return fe},[]);var ae=j?ne:null,se=ce(ce({},g),ae);return(J===uT||J===dT)&&(se.overflowY="hidden",se.overflowX="hidden"),_.createElement(Bl,{onResize:ge,disabled:!(d||p)},_.createElement("textarea",He({},C,{ref:x,style:se,className:ct(a,f,Ie({},"".concat(a,"-disabled"),E)),disabled:E,value:O,onChange:A})))}),vde=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","className","style","disabled","hidden","classNames","styles"];function q5(e,t){return Et(e||"").slice(0,t).join("")}function d4(e,t,i,a){var c=i;return e?c=q5(i,a):Et(t||"").length<i.length&&Et(i||"").length>a&&(c=t),c}var Ede=Ot.forwardRef(function(e,t){var i,a=e.defaultValue,c=e.value,u=e.onFocus,d=e.onBlur,p=e.onChange,f=e.allowClear,g=e.maxLength,E=e.onCompositionStart,y=e.onCompositionEnd,C=e.suffix,w=e.prefixCls,R=w===void 0?"rc-textarea":w,O=e.classes,k=e.showCount,A=e.className,x=e.style,P=e.disabled,M=e.hidden,B=e.classNames,F=e.styles,j=mn(e,vde),$=Ka(a,{value:c,defaultValue:a}),ee=we($,2),H=ee[0],J=ee[1],X=_.useRef(null),W=Ot.useState(!1),Z=we(W,2),ne=Z[0],ie=Z[1],de=Ot.useState(!1),oe=we(de,2),fe=oe[0],ge=oe[1],ae=Ot.useRef(),se=Ot.useRef(0),he=function(){X.current.textArea.focus()};_.useImperativeHandle(t,function(){return{resizableTextArea:X.current,focus:he,blur:function(){X.current.textArea.blur()}}}),_.useEffect(function(){ie(function(_t){return!P&&_t})},[P]);var pe=Number(g)>0,Oe=function(Be){ge(!0),ae.current=H,se.current=Be.currentTarget.selectionStart,E==null||E(Be)},be=function(Be){ge(!1);var $e=Be.currentTarget.value;if(pe){var ke,et=se.current>=g+1||se.current===((ke=ae.current)===null||ke===void 0?void 0:ke.length);$e=d4(et,ae.current,$e,g)}$e!==H&&(J($e),cT(Be.currentTarget,Be,p,$e)),y==null||y(Be)},Ne=function(Be){var $e=Be.target.value;if(!fe&&pe){var ke=Be.target.selectionStart>=g+1||Be.target.selectionStart===$e.length||!Be.target.selectionStart;$e=d4(ke,H,$e,g)}J($e),cT(Be.currentTarget,Be,p,$e)},Ae=function(Be){var $e=j.onPressEnter,ke=j.onKeyDown;Be.key==="Enter"&&$e&&$e(Be),ke==null||ke(Be)},at=function(Be){ie(!0),u==null||u(Be)},it=function(Be){ie(!1),d==null||d(Be)},ze=function(Be){J(""),he(),cT(X.current.textArea,Be,p)},ht=cde(H);!fe&&pe&&c==null&&(ht=q5(ht,g));var Pe=C,Ye;if(k){var lt=Et(ht).length;An(k)==="object"?Ye=k.formatter({value:ht,count:lt,maxLength:g}):Ye="".concat(lt).concat(pe?" / ".concat(g):""),Pe=Ot.createElement(Ot.Fragment,null,Pe,Ot.createElement("span",{className:ct("".concat(R,"-data-count"),B==null?void 0:B.count),style:F==null?void 0:F.count},Ye))}var At=Ot.createElement(lde,{value:ht,allowClear:f,handleReset:ze,suffix:Pe,prefixCls:R,classes:{affixWrapper:ct(O==null?void 0:O.affixWrapper,(i={},Ie(i,"".concat(R,"-show-count"),k),Ie(i,"".concat(R,"-textarea-allow-clear"),f),i))},disabled:P,focused:ne,className:A,style:x,dataAttrs:{affixWrapper:{"data-count":typeof Ye=="string"?Ye:void 0}},hidden:M,inputElement:Ot.createElement(gde,He({},j,{onKeyDown:Ae,onChange:Ne,onFocus:at,onBlur:it,onCompositionStart:Oe,onCompositionEnd:be,className:B==null?void 0:B.textarea,style:ce(ce({},F==null?void 0:F.textarea),{},{resize:x==null?void 0:x.resize}),disabled:P,prefixCls:R,ref:X}))});return At}),_de=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Sde=_.forwardRef((e,t)=>{var{prefixCls:i,bordered:a=!0,size:c,disabled:u,status:d,allowClear:p,showCount:f,classNames:g}=e,E=_de(e,["prefixCls","bordered","size","disabled","status","allowClear","showCount","classNames"]);const{getPrefixCls:y,direction:C}=_.useContext(ei),w=_.useContext(Vh),R=c||w,O=_.useContext(T_),k=u??O,{status:A,hasFeedback:x,feedbackIcon:P}=_.useContext(b8),M=K8(A,d),B=_.useRef(null);_.useImperativeHandle(t,()=>{var H;return{resizableTextArea:(H=B.current)===null||H===void 0?void 0:H.resizableTextArea,focus:J=>{var X,W;ude((W=(X=B.current)===null||X===void 0?void 0:X.resizableTextArea)===null||W===void 0?void 0:W.textArea,J)},blur:()=>{var J;return(J=B.current)===null||J===void 0?void 0:J.blur()}}});const F=y("input",i);let j;typeof p=="object"&&(p!=null&&p.clearIcon)?j=p:p&&(j={clearIcon:_.createElement(n8,null)});const[$,ee]=sde(F);return $(_.createElement(Ede,Object.assign({},E,{disabled:k,allowClear:j,classes:{affixWrapper:ct(`${F}-textarea-affix-wrapper`,{[`${F}-affix-wrapper-rtl`]:C==="rtl",[`${F}-affix-wrapper-borderless`]:!a,[`${F}-affix-wrapper-sm`]:R==="small",[`${F}-affix-wrapper-lg`]:R==="large",[`${F}-textarea-show-count`]:f},vI(`${F}-affix-wrapper`,M),ee)},classNames:Object.assign(Object.assign({},g),{textarea:ct({[`${F}-borderless`]:!a,[`${F}-sm`]:R==="small",[`${F}-lg`]:R==="large"},vI(F,M),ee,g==null?void 0:g.textarea)}),prefixCls:F,suffix:x&&_.createElement("span",{className:`${F}-textarea-suffix`},P),showCount:f,ref:B})))}),yde=Sde,um=Fue;um.Header=Mue;um.Footer=Uue;um.Content=Vue;um.Sider=Hue;const AI=um;var Cde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const bde=Cde;var X5=function(t,i){return _.createElement(Na,ce(ce({},t),{},{ref:i,icon:bde}))};X5.displayName="CopyOutlined";const Tde=_.forwardRef(X5);var Rde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};const Ide=Rde;var J5=function(t,i){return _.createElement(Na,ce(ce({},t),{},{ref:i,icon:Ide}))};J5.displayName="EditOutlined";const wde=_.forwardRef(J5);var Ode={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};const Ade=Ode;var Q5=function(t,i){return _.createElement(Na,ce(ce({},t),{},{ref:i,icon:Ade}))};Q5.displayName="EnterOutlined";const Nde=_.forwardRef(Q5);var xde=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Pde={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},Dde=_.forwardRef((e,t)=>{const i=g=>{const{keyCode:E}=g;E===Ve.ENTER&&g.preventDefault()},a=g=>{const{keyCode:E}=g,{onClick:y}=e;E===Ve.ENTER&&y&&y()},{style:c,noStyle:u,disabled:d}=e,p=xde(e,["style","noStyle","disabled"]);let f={};return u||(f=Object.assign({},Pde)),d&&(f.pointerEvents="none"),f=Object.assign(Object.assign({},f),c),_.createElement("div",Object.assign({role:"button",tabIndex:0,ref:t},p,{onKeyDown:i,onKeyUp:a,style:f}))}),h4=Dde;var kde=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,i=[],a=0;a<e.rangeCount;a++)i.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||i.forEach(function(c){e.addRange(c)}),t&&t.focus()}},Lde=kde,p4={"text/plain":"Text","text/html":"Url",default:"Text"},Mde="Copy to clipboard: #{key}, Enter";function Ude(e){var t=(/mac os x/i.test(navigator.userAgent)?"â":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function Vde(e,t){var i,a,c,u,d,p,f=!1;t||(t={}),i=t.debug||!1;try{c=Lde(),u=document.createRange(),d=document.getSelection(),p=document.createElement("span"),p.textContent=e,p.ariaHidden="true",p.style.all="unset",p.style.position="fixed",p.style.top=0,p.style.clip="rect(0, 0, 0, 0)",p.style.whiteSpace="pre",p.style.webkitUserSelect="text",p.style.MozUserSelect="text",p.style.msUserSelect="text",p.style.userSelect="text",p.addEventListener("copy",function(E){if(E.stopPropagation(),t.format)if(E.preventDefault(),typeof E.clipboardData>"u"){i&&console.warn("unable to use e.clipboardData"),i&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var y=p4[t.format]||p4.default;window.clipboardData.setData(y,e)}else E.clipboardData.clearData(),E.clipboardData.setData(t.format,e);t.onCopy&&(E.preventDefault(),t.onCopy(E.clipboardData))}),document.body.appendChild(p),u.selectNodeContents(p),d.addRange(u);var g=document.execCommand("copy");if(!g)throw new Error("copy command was unsuccessful");f=!0}catch(E){i&&console.error("unable to copy using execCommand: ",E),i&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),f=!0}catch(y){i&&console.error("unable to copy using clipboardData: ",y),i&&console.error("falling back to prompt"),a=Ude("message"in t?t.message:Mde),window.prompt(a,e)}}finally{d&&(typeof d.removeRange=="function"?d.removeRange(u):d.removeAllRanges()),p&&document.body.removeChild(p),c()}return f}var Fde=Vde;const Bde=(e,t,i,a)=>{const{sizeMarginHeadingVerticalEnd:c,fontWeightStrong:u}=a;return{marginBottom:c,color:i,fontWeight:u,fontSize:e,lineHeight:t}},jde=e=>{const t=[1,2,3,4,5],i={};return t.forEach(a=>{i[`
      h${a}&,
      div&-h${a},
      div&-h${a} > textarea,
      h${a}
    `]=Bde(e[`fontSizeHeading${a}`],e[`lineHeightHeading${a}`],e.colorTextHeading,e)}),i},$de=e=>{const{componentCls:t}=e;return{"a&, a":Object.assign(Object.assign({},Wj(e)),{textDecoration:e.linkDecoration,"&:active, &:hover":{textDecoration:e.linkHoverDecoration},[`&[disabled], &${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:e.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},Hde=e=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:Yne[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:e.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),Wde=e=>{const{componentCls:t}=e,a=Y5(e).inputPaddingVertical+1;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:-e.paddingSM,marginTop:-a,marginBottom:`calc(1em - ${a}px)`},[`${t}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:e.marginXS+2,insetBlockEnd:e.marginXS,color:e.colorTextDescription,fontWeight:"normal",fontSize:e.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},zde=e=>({"&-copy-success":{[`
    &,
    &:hover,
    &:focus`]:{color:e.colorSuccess}}}),Gde=()=>({[`
  a&-ellipsis,
  span&-ellipsis
  `]:{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),Kde=e=>{const{componentCls:t,sizeMarginHeadingVerticalStart:i}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorText,wordBreak:"break-word",lineHeight:e.lineHeight,[`&${t}-secondary`]:{color:e.colorTextDescription},[`&${t}-success`]:{color:e.colorSuccess},[`&${t}-warning`]:{color:e.colorWarning},[`&${t}-danger`]:{color:e.colorError,"a&:active, a&:focus":{color:e.colorErrorActive},"a&:hover":{color:e.colorErrorHover}},[`&${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},[`
        div&,
        p
      `]:{marginBottom:"1em"}},jde(e)),{[`
      & + h1${t},
      & + h2${t},
      & + h3${t},
      & + h4${t},
      & + h5${t}
      `]:{marginTop:i},[`
      div,
      ul,
      li,
      p,
      h1,
      h2,
      h3,
      h4,
      h5`]:{[`
        + h1,
        + h2,
        + h3,
        + h4,
        + h5
        `]:{marginTop:i}}}),Hde(e)),$de(e)),{[`
        ${t}-expand,
        ${t}-edit,
        ${t}-copy
      `]:Object.assign(Object.assign({},Wj(e)),{marginInlineStart:e.marginXXS})}),Wde(e)),zde(e)),Gde()),{"&-rtl":{direction:"rtl"}})}},Z5=Uc("Typography",e=>[Kde(e)],{sizeMarginHeadingVerticalStart:"1.2em",sizeMarginHeadingVerticalEnd:"0.5em"}),Yde=e=>{let{prefixCls:t,"aria-label":i,className:a,style:c,direction:u,maxLength:d,autoSize:p=!0,value:f,onSave:g,onCancel:E,onEnd:y,component:C,enterIcon:w=_.createElement(Nde,null)}=e;const R=_.useRef(null),O=_.useRef(!1),k=_.useRef(),[A,x]=_.useState(f);_.useEffect(()=>{x(f)},[f]),_.useEffect(()=>{if(R.current&&R.current.resizableTextArea){const{textArea:Z}=R.current.resizableTextArea;Z.focus();const{length:ne}=Z.value;Z.setSelectionRange(ne,ne)}},[]);const P=Z=>{let{target:ne}=Z;x(ne.value.replace(/[\n\r]/g,""))},M=()=>{O.current=!0},B=()=>{O.current=!1},F=Z=>{let{keyCode:ne}=Z;O.current||(k.current=ne)},j=()=>{g(A.trim())},$=Z=>{let{keyCode:ne,ctrlKey:ie,altKey:de,metaKey:oe,shiftKey:fe}=Z;k.current===ne&&!O.current&&!ie&&!de&&!oe&&!fe&&(ne===Ve.ENTER?(j(),y==null||y()):ne===Ve.ESC&&E())},ee=()=>{j()},H=C?`${t}-${C}`:"",[J,X]=Z5(t),W=ct(t,`${t}-edit-content`,{[`${t}-rtl`]:u==="rtl"},a,H,X);return J(_.createElement("div",{className:W,style:c},_.createElement(yde,{ref:R,maxLength:d,value:A,onChange:P,onKeyDown:F,onKeyUp:$,onCompositionStart:M,onCompositionEnd:B,onBlur:ee,"aria-label":i,rows:1,autoSize:p}),w!==null?jl(w,{className:`${t}-edit-content-confirm`}):null))},qde=Yde;function pT(e,t){return _.useMemo(()=>{const i=!!e;return[i,Object.assign(Object.assign({},t),i&&typeof e=="object"?e:null)]},[e])}const Xde=(e,t)=>{const i=_.useRef(!1);_.useEffect(()=>{i.current?e():i.current=!0},t)},Jde=Xde;var Qde=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const Zde=_.forwardRef((e,t)=>{var{prefixCls:i,component:a="article",className:c,rootClassName:u,setContentRef:d,children:p,direction:f}=e,g=Qde(e,["prefixCls","component","className","rootClassName","setContentRef","children","direction"]);const{getPrefixCls:E,direction:y}=_.useContext(ei),C=f??y;let w=t;d&&(w=rc(t,d));const R=E("typography",i),[O,k]=Z5(R),A=ct(R,{[`${R}-rtl`]:C==="rtl"},c,u,k);return O(_.createElement(a,Object.assign({className:A,ref:w},g),p))}),e6=Zde;function t6(e){const t=typeof e;return t==="string"||t==="number"}function ehe(e){let t=0;return e.forEach(i=>{t6(i)?t+=String(i).length:t+=1}),t}function f4(e,t){let i=0;const a=[];for(let c=0;c<e.length;c+=1){if(i===t)return a;const u=e[c],p=t6(u)?String(u).length:1,f=i+p;if(f>t){const g=t-i;return a.push(String(u).slice(0,g)),a}a.push(u),i=f}return e}const the=0,Og=1,m4=2,fT=3,g4=4,nhe=e=>{let{enabledMeasure:t,children:i,text:a,width:c,fontSize:u,rows:d,onEllipsis:p}=e;const[[f,g,E],y]=_.useState([0,0,0]),[C,w]=_.useState(the),[R,O]=_.useState(0),k=_.useRef(null),A=_.useRef(null),x=_.useMemo(()=>Pc(a),[a]),P=_.useMemo(()=>ehe(x),[x]),M=_.useMemo(()=>!t||C!==fT?i(x,!1):i(f4(x,g),g<P),[t,C,i,x,g,P]);ar(()=>{t&&c&&u&&P&&(w(Og),y([0,Math.ceil(P/2),P]))},[t,c,u,a,P,d]),ar(()=>{var $;C===Og&&O((($=k.current)===null||$===void 0?void 0:$.offsetHeight)||0)},[C]),ar(()=>{var $,ee;if(R){if(C===Og){const H=(($=A.current)===null||$===void 0?void 0:$.offsetHeight)||0,J=d*R;H<=J?(w(g4),p(!1)):w(m4)}else if(C===m4)if(f!==E){const H=((ee=A.current)===null||ee===void 0?void 0:ee.offsetHeight)||0,J=d*R;let X=f,W=E;f===E-1?W=f:H<=J?X=g:W=g;const Z=Math.ceil((X+W)/2);y([X,Z,W])}else w(fT),p(!0)}},[C,f,E,d,R]);const B={width:c,whiteSpace:"normal",margin:0,padding:0},F=($,ee,H)=>_.createElement("span",{"aria-hidden":!0,ref:ee,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.floor(u/2)*2},H)},$),j=($,ee)=>{const H=f4(x,$);return F(i(H,!0),ee,B)};return _.createElement(_.Fragment,null,M,t&&C!==fT&&C!==g4&&_.createElement(_.Fragment,null,F("lg",k,{wordBreak:"keep-all",whiteSpace:"nowrap"}),C===Og?F(i(x,!1),A,B):j(g,A)))},rhe=nhe,ihe=e=>{let{enabledEllipsis:t,isEllipsis:i,children:a,tooltipProps:c}=e;return!(c!=null&&c.title)||!t?a:_.createElement(Yv,Object.assign({open:i?void 0:!1},c),a)},ohe=ihe;var ahe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};function she(e,t){let{mark:i,code:a,underline:c,delete:u,strong:d,keyboard:p,italic:f}=e,g=t;function E(y,C){C&&(g=_.createElement(y,{},g))}return E("strong",d),E("u",c),E("del",u),E("code",a),E("mark",i),E("kbd",p),E("i",f),g}function Ag(e,t,i){return e===!0||e===void 0?t:e||i&&t}function v4(e){return e===!1?[!1,!1]:Array.isArray(e)?e:[e]}const che="...",lhe=_.forwardRef((e,t)=>{var i,a,c;const{prefixCls:u,className:d,style:p,type:f,disabled:g,children:E,ellipsis:y,editable:C,copyable:w,component:R,title:O}=e,k=ahe(e,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:A,direction:x}=_.useContext(ei),[P]=Mj("Text"),M=_.useRef(null),B=_.useRef(null),F=A("typography",u),j=Za(k,["mark","code","delete","underline","strong","keyboard","italic"]),[$,ee]=pT(C),[H,J]=Ka(!1,{value:ee.editing}),{triggerType:X=["icon"]}=ee,W=tt=>{var gt;tt&&((gt=ee.onStart)===null||gt===void 0||gt.call(ee)),J(tt)};Jde(()=>{var tt;H||(tt=B.current)===null||tt===void 0||tt.focus()},[H]);const Z=tt=>{tt==null||tt.preventDefault(),W(!0)},ne=tt=>{var gt;(gt=ee.onChange)===null||gt===void 0||gt.call(ee,tt),W(!1)},ie=()=>{var tt;(tt=ee.onCancel)===null||tt===void 0||tt.call(ee),W(!1)},[de,oe]=pT(w),[fe,ge]=_.useState(!1),ae=_.useRef(),se={};oe.format&&(se.format=oe.format);const he=()=>{window.clearTimeout(ae.current)},pe=tt=>{var gt;tt==null||tt.preventDefault(),tt==null||tt.stopPropagation(),Fde(oe.text||String(E)||"",se),ge(!0),he(),ae.current=window.setTimeout(()=>{ge(!1)},3e3),(gt=oe.onCopy)===null||gt===void 0||gt.call(oe,tt)};_.useEffect(()=>he,[]);const[Oe,be]=_.useState(!1),[Ne,Ae]=_.useState(!1),[at,it]=_.useState(!1),[ze,ht]=_.useState(!1),[Pe,Ye]=_.useState(!1),[lt,At]=_.useState(!0),[_t,Be]=pT(y,{expandable:!1}),$e=_t&&!at,{rows:ke=1}=Be,et=_.useMemo(()=>!$e||Be.suffix!==void 0||Be.onEllipsis||Be.expandable||$||de,[$e,Be,$,de]);ar(()=>{_t&&!et&&(be(gV("webkitLineClamp")),Ae(gV("textOverflow")))},[et,_t]);const ft=_.useMemo(()=>et?!1:ke===1?Ne:Oe,[et,Ne,Oe]),Rt=$e&&(ft?Pe:ze),on=$e&&ke===1&&ft,dn=$e&&ke>1&&ft,jt=tt=>{var gt;it(!0),(gt=Be.onExpand)===null||gt===void 0||gt.call(Be,tt)},[zt,Mn]=_.useState(0),[_n,Lt]=_.useState(0),xt=(tt,gt)=>{let{offsetWidth:gn}=tt;var Mt;Mn(gn),Lt(parseInt((Mt=window.getComputedStyle)===null||Mt===void 0?void 0:Mt.call(window,gt).fontSize,10)||0)},en=tt=>{var gt;ht(tt),ze!==tt&&((gt=Be.onEllipsis)===null||gt===void 0||gt.call(Be,tt))};_.useEffect(()=>{const tt=M.current;if(_t&&ft&&tt){const gt=dn?tt.offsetHeight<tt.scrollHeight:tt.offsetWidth<tt.scrollWidth;Pe!==gt&&Ye(gt)}},[_t,ft,E,dn,lt]),_.useEffect(()=>{const tt=M.current;if(typeof IntersectionObserver>"u"||!tt||!ft||!$e)return;const gt=new IntersectionObserver(()=>{At(!!tt.offsetParent)});return gt.observe(tt),()=>{gt.disconnect()}},[ft,$e]);let st={};Be.tooltip===!0?st={title:(i=ee.text)!==null&&i!==void 0?i:E}:_.isValidElement(Be.tooltip)?st={title:Be.tooltip}:typeof Be.tooltip=="object"?st=Object.assign({title:(a=ee.text)!==null&&a!==void 0?a:E},Be.tooltip):st={title:Be.tooltip};const mt=_.useMemo(()=>{const tt=gt=>["string","number"].includes(typeof gt);if(!(!_t||ft)){if(tt(ee.text))return ee.text;if(tt(E))return E;if(tt(O))return O;if(tt(st.title))return st.title}},[_t,ft,O,st.title,Rt]);if(H)return _.createElement(qde,{value:(c=ee.text)!==null&&c!==void 0?c:typeof E=="string"?E:"",onSave:ne,onCancel:ie,onEnd:ee.onEnd,prefixCls:F,className:d,style:p,direction:x,component:R,maxLength:ee.maxLength,autoSize:ee.autoSize,enterIcon:ee.enterIcon});const $t=()=>{const{expandable:tt,symbol:gt}=Be;if(!tt)return null;let gn;return gt?gn=gt:gn=P==null?void 0:P.expand,_.createElement("a",{key:"expand",className:`${F}-expand`,onClick:jt,"aria-label":P==null?void 0:P.expand},gn)},yr=()=>{if(!$)return;const{icon:tt,tooltip:gt}=ee,gn=Pc(gt)[0]||(P==null?void 0:P.edit),Mt=typeof gn=="string"?gn:"";return X.includes("icon")?_.createElement(Yv,{key:"edit",title:gt===!1?"":gn},_.createElement(h4,{ref:B,className:`${F}-edit`,onClick:Z,"aria-label":Mt},tt||_.createElement(wde,{role:"button"}))):null},Rn=()=>{if(!de)return;const{tooltips:tt,icon:gt}=oe,gn=v4(tt),Mt=v4(gt),Dr=fe?Ag(gn[1],P==null?void 0:P.copied):Ag(gn[0],P==null?void 0:P.copy),mr=fe?P==null?void 0:P.copied:P==null?void 0:P.copy,Ln=typeof Dr=="string"?Dr:mr;return _.createElement(Yv,{key:"copy",title:Dr},_.createElement(h4,{className:ct(`${F}-copy`,fe&&`${F}-copy-success`),onClick:pe,"aria-label":Ln},fe?Ag(Mt[1],_.createElement(Q8,null),!0):Ag(Mt[0],_.createElement(Tde,null),!0)))},fr=tt=>[tt&&$t(),yr(),Rn()],kn=tt=>[tt&&_.createElement("span",{"aria-hidden":!0,key:"ellipsis"},che),Be.suffix,fr(tt)];return _.createElement(Bl,{onResize:xt,disabled:!$e||ft},tt=>_.createElement(ohe,{tooltipProps:st,enabledEllipsis:$e,isEllipsis:Rt},_.createElement(e6,Object.assign({className:ct({[`${F}-${f}`]:f,[`${F}-disabled`]:g,[`${F}-ellipsis`]:_t,[`${F}-single-line`]:$e&&ke===1,[`${F}-ellipsis-single-line`]:on,[`${F}-ellipsis-multiple-line`]:dn},d),prefixCls:u,style:Object.assign(Object.assign({},p),{WebkitLineClamp:dn?ke:void 0}),component:R,ref:rc(tt,M,t),direction:x,onClick:X.includes("text")?Z:void 0,"aria-label":mt==null?void 0:mt.toString(),title:O},j),_.createElement(rhe,{enabledMeasure:$e&&!ft,text:E,rows:ke,width:zt,fontSize:_n,onEllipsis:en},(gt,gn)=>{let Mt=gt;return gt.length&&gn&&mt&&(Mt=_.createElement("span",{key:"show-content","aria-hidden":!0},Mt)),she(e,_.createElement(_.Fragment,null,Mt,kn(gn)))}))))}),L_=lhe;var uhe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const dhe=_.forwardRef((e,t)=>{var{ellipsis:i,rel:a}=e,c=uhe(e,["ellipsis","rel"]);const u=Object.assign(Object.assign({},c),{rel:a===void 0&&c.target==="_blank"?"noopener noreferrer":a});return delete u.navigate,_.createElement(L_,Object.assign({},u,{ref:t,ellipsis:!!i,component:"a"}))}),hhe=dhe,phe=_.forwardRef((e,t)=>_.createElement(L_,Object.assign({ref:t},e,{component:"div"}))),fhe=phe;var mhe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const ghe=(e,t)=>{var{ellipsis:i}=e,a=mhe(e,["ellipsis"]);const c=_.useMemo(()=>i&&typeof i=="object"?Za(i,["expandable","rows"]):i,[i]);return _.createElement(L_,Object.assign({ref:t},a,{ellipsis:c,component:"span"}))},vhe=_.forwardRef(ghe);var Ehe=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(i[a[c]]=e[a[c]]);return i};const _he=[1,2,3,4,5],She=_.forwardRef((e,t)=>{const{level:i=1}=e,a=Ehe(e,["level"]);let c;return _he.includes(i)?c=`h${i}`:c="h1",_.createElement(L_,Object.assign({ref:t},a,{component:c}))}),yhe=She,dm=e6;dm.Text=vhe;dm.Link=hhe;dm.Title=yhe;dm.Paragraph=fhe;const Pi=dm;function n6(e){var t,i,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=n6(e[t]))&&(a&&(a+=" "),a+=i);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function I1(){for(var e,t,i=0,a="";i<arguments.length;)(e=arguments[i++])&&(t=n6(e))&&(a&&(a+=" "),a+=t);return a}const Che=_.forwardRef(({className:e,children:t},i)=>le("div",{className:I1(e,"b-1 b-solid b-coolgray-6 rd of-hidden relative"),ref:i,style:{width:288,height:216},children:t})),Ya=Object.assign(_.forwardRef(({className:e,children:t},i)=>le("div",{className:I1(e,"flex-1 p-10 p-t-4 flex gap-5"),ref:i,children:t})),{Item:Che}),Wr=({children:e})=>le("div",{className:"h-screen flex flex-col",children:e}),Lc=({children:e})=>le("samp",{className:"z-2 inline-flex items-center gap-1 absolute bottom-0 bg-black c-white px-1 text-sm",children:e});function Xo(e,t,i){return e.on(t,i),()=>e.off(t,i)}function bhe(e){try{return e()}catch(t){console.error(t)}}function $h(e){return()=>e.forEach(bhe)}function w1(e,t){const i=setTimeout(e,t);return()=>clearTimeout(i)}function r6(){let e,t,i;function a(){if(t){const g=t;t=void 0,g()}}async function c(){if(i){const g=i;i=void 0;try{await g()}catch(E){console.error(E)}}}async function u(g){e=!0,await c();try{i=await g()}catch(E){console.error(E)}e=!1,a()}async function d(){e=!0,await c(),e=!1,a()}function p(g){e?t=()=>u(g):u(g)}function f(){e?t=d:d()}return{run:p,dispose:f}}const i6=typeof document<"u"?_.useLayoutEffect:_.useEffect;function The(e){return e!=null&&typeof e.then=="function"}function Hu(){const e=_.useRef(!1);return _.useEffect(()=>(e.current=!1,()=>{e.current=!0}),[]),e}function Rhe(){const e=Hu();function t(i,a){return new Promise(async(c,u)=>{try{const d=await i;e.current||c(d)}catch(d){e.current?a&&a(d):u(d)}})}return _.useCallback(t,[e])}function M_(e){const t=Rhe(),[i,a]=_.useState();return i6(()=>{The(e)?t(e).then(a):a(e)},[e,t]),i}function Hh(e,t){const i=_.useRef();_.useEffect(()=>{const{run:a,dispose:c}=i.current||(i.current=r6());return a(e),c},t)}class qa extends Error{constructor(i,a){var t=(...args)=>{super(...args);K0(this,"rtcMethod");K0(this,"rtcError");K0(this,"name","AgoraRTCReactException")};t(typeof a=="string"?a:a.message),this.rtcMethod=i,this.rtcError=a}print(i){typeof this.rtcError=="string"?console[i](this.rtcError):console[i](this.rtcError.message)}}const o6=_.createContext(null);function a6({client:e,children:t}){return le(o6.Provider,{value:e,children:t})}function Ihe(e){const t=_.useContext(o6);return e||t}function es(e){const t=Ihe(e);if(!t)throw new Error("Agora RTC client not found. Should be wrapped in <AgoraRTCProvider value={client} />");return t}function whe(e){const t=es(e),[i,a]=_.useState(t?t.connectionState:"DISCONNECTED");return _.useEffect(()=>{if(t){a(t.connectionState);let c;return $h([Xo(t,"connection-state-change",u=>{c==null||c(),u==="CONNECTED"?c=w1(()=>a(u),0):a(u)}),()=>c==null?void 0:c()])}else a("DISCONNECTED")},[t]),i}function Ns(e){const t=es(e),[i,a]=_.useState(t?t.connectionState==="CONNECTED":!1);return _.useEffect(()=>{if(t){a(t.connectionState==="CONNECTED");let c;return $h([Xo(t,"connection-state-change",u=>{c==null||c(),c=w1(()=>a(u==="CONNECTED"),0)}),()=>c==null?void 0:c()])}else a(!1)},[t]),i}function U_(e){const t=es(e),[i,a]=_.useState(t==null?void 0:t.uid);return _.useEffect(()=>{if(t)return Xo(t,"connection-state-change",c=>{if(c==="CONNECTED")return w1(()=>a(t.uid),0);c==="DISCONNECTED"&&a(void 0)})},[t]),i}const E4=()=>({uplink:0,downlink:0,delay:0});function Ohe(e){const t=es(e),[i,a]=_.useState(E4);return _.useEffect(()=>{if(t)return Xo(t,"network-quality",c=>a({uplink:c.uplinkNetworkQuality,downlink:c.downlinkNetworkQuality,delay:t.getRTCStats().RTT??0}));a(E4())},[t]),i}function ui(e,t=!0,i){const a=es(i),c=Ns(i),[u,d]=_.useState(!1),[p,f]=_.useState(0),[g,E]=_.useState(null),y=Hu();return Hh(async()=>{if(y.current||(E(null),f(0),d(!1)),t&&a){try{y.current||d(!0);const{appid:C,channel:w,token:R,uid:O}=typeof e=="function"?await e():e,k=await a.join(C,w,R,O);y.current||f(k)}catch(C){console.error(C),y.current||E(new qa("IAgoraRTCClient.join",C))}return y.current||d(!1),()=>{for(const C of a.localTracks)C.isPlaying&&C.stop(),C.close();return a.leave()}}},[t,i]),{data:p,isLoading:u,isConnected:c,error:g}}function _4(e,t,i){const a=es(i),c=t==="audio"?"audioTrack":"videoTrack",[u,d]=_.useState(e&&e[c]),p=Ns(),f=_.useRef(),[g,E]=_.useState(!1),[y,C]=_.useState(null);return _.useEffect(()=>{if(!e||!p)return;let w=!1;w||C(null);const R=t==="audio"?"hasAudio":"hasVideo",O=e.uid,k=async(P,M)=>{if(P[c]&&a.remoteUsers.some(({uid:B})=>P.uid===B))try{w||E(!0),await a.unsubscribe(P,M)}catch(B){w||C(new qa("IAgoraRTCClient.unsubscribe",B)),console.error(B)}w||(d(void 0),E(!1))},A=async(P,M)=>{try{!P[c]&&a.remoteUsers.some(({uid:B})=>P.uid===B)&&(w||E(!0),await a.subscribe(P,M)),w||d(P[c])}catch(B){w||C(new qa("IAgoraRTCClient.subscribe",B)),console.error(B)}w||E(!1)},x=f.current||(f.current=r6());return!e[c]&&e[R]?x.run(()=>A(e,t)):d(e[c]),$h([()=>{w=!0,x.dispose()},Xo(a,"user-published",(P,M)=>{P.uid===O&&M===t&&x.run(()=>A(P,t))}),Xo(a,"user-unpublished",(P,M)=>{P.uid===O&&M===t&&x.run(()=>k(P,t))})])},[p,a,e,t,c]),{track:u,isLoading:g,error:y}}function hm(e,t){const i=es(t),[a,c]=_.useState([]),u=Ns(),d=_.useRef([]),[p,f]=_.useState(!1),[g,E]=_.useState(null),y=Hu();return Hh(async()=>{if(y.current||E(null),!Array.isArray(e)||!u)return;const C=async O=>{if(!O.audioTrack&&e.some(({uid:k})=>O.uid===k)){try{y.current||f(!0),await i.subscribe(O,"audio")}catch(k){console.error(k),y.current||E(new qa("IAgoraRTCClient.subscribe",k))}O.audioTrack&&!d.current.some(k=>k.getUserId()===O.uid)&&d.current.push(O.audioTrack),d.current=d.current.map(k=>O.audioTrack&&k.getUserId()===O.uid&&k.getTrackId()!==O.audioTrack.getTrackId()?O.audioTrack:k),y.current||(c(d.current),f(!1))}},w=async O=>{if(e.some(({uid:k})=>O.uid===k)){y.current||(d.current=d.current.filter(k=>k.getUserId()!==O.uid),c(d.current));try{y.current||f(!0),await i.unsubscribe(O,"audio")}catch(k){console.error(k),y.current||E(new qa("IAgoraRTCClient.unsubscribe",k))}y.current||f(!1)}};e.map(O=>{!O.audioTrack&&O.hasAudio&&C(O)});const R=[];for(let O=0;O<d.current.length;O++){const k=d.current[O];if(!e.some(A=>A.uid===k.getUserId())){const A=i.remoteUsers.find(x=>x.uid===k.getUserId());A&&(R.push({user:A,mediaType:"audio"}),d.current.splice(O,1),O--)}}if(R.length>0){try{y.current||f(!0),await i.massUnsubscribe(R)}catch(O){console.error(O),y.current||E(new qa("IAgoraRTCClient.massUnsubscribe",O))}y.current||(c(d.current.slice()),f(!1))}return $h([Xo(i,"user-published",(O,k)=>{e.find(A=>A.uid===O.uid)&&k==="audio"&&C(O)}),Xo(i,"user-unpublished",(O,k)=>{e.find(A=>A.uid===O.uid)&&k==="audio"&&w(O)})])},[u,i,e]),{audioTracks:a,isLoading:p,error:g}}function Wh(e,t){const i=es(t),[a,c]=_.useState([]),u=Ns(),d=_.useRef([]),[p,f]=_.useState(!1),[g,E]=_.useState(null),y=Hu();return Hh(async()=>{if(y.current||E(null),!Array.isArray(e)||!u)return;const C=async O=>{if(!O.videoTrack&&e.some(({uid:k})=>O.uid===k)){try{y.current||f(!0),await i.subscribe(O,"video")}catch(k){console.error(k),y.current||E(new qa("IAgoraRTCClient.subscribe",k))}O.videoTrack&&!d.current.some(k=>k.getUserId()===O.uid)&&d.current.push(O.videoTrack),d.current=d.current.map(k=>O.videoTrack&&k.getUserId()===O.uid&&k.getTrackId()!==O.videoTrack.getTrackId()?O.videoTrack:k),y.current||(c(d.current),f(!1))}},w=async O=>{if(e.some(({uid:k})=>O.uid===k)){y.current||(d.current=d.current.filter(k=>k.getUserId()!==O.uid),c(d.current));try{y.current||f(!0),await i.unsubscribe(O,"video")}catch(k){console.error(k),y.current||E(new qa("IAgoraRTCClient.unsubscribe",k))}y.current||f(!1)}};e.map(O=>{!O.videoTrack&&O.hasVideo&&C(O)});const R=[];for(let O=0;O<d.current.length;O++){const k=d.current[O];if(!e.some(A=>A.uid===k.getUserId())){const A=i.remoteUsers.find(x=>x.uid===k.getUserId());A&&(R.push({user:A,mediaType:"video"}),d.current.splice(O,1),O--)}}if(R.length>0){try{y.current||f(!0),await i.massUnsubscribe(R)}catch(O){console.error(O),y.current||E(new qa("IAgoraRTCClient.massUnsubscribe",O))}y.current||(c(d.current.slice()),f(!1))}return $h([Xo(i,"user-published",(O,k)=>{e.find(A=>A.uid===O.uid)&&k==="video"&&C(O)}),Xo(i,"user-unpublished",(O,k)=>{e.find(A=>A.uid===O.uid)&&k==="video"&&w(O)})])},[u,i,e]),{videoTracks:a,isLoading:p,error:g}}function $l(e=!0,t){const i=Ns(t),[a,c]=_.useState(null),[u,d]=_.useState(!1),[p,f]=_.useState(null),g=Hu();return Hh(async()=>{if(g.current||(d(!1),f(null)),i&&e&&!a){try{g.current||d(!0);const E=await Pl.createCameraVideoTrack();g.current||c(E)}catch(E){console.error(E),g.current||f(new qa("IAgoraRTC.createCameraVideoTrack",E))}g.current||d(!1)}!i&&!g.current&&c(null)},[i,e]),{localCameraTrack:a,isLoading:u,error:p}}function Hl(e=!0,t={ANS:!0,AEC:!0},i){const a=Ns(i),[c,u]=_.useState(null),[d,p]=_.useState(!1),[f,g]=_.useState(null),E=Hu();return Hh(async()=>{if(a&&e&&!c){try{E.current||p(!0);const y=await Pl.createMicrophoneAudioTrack(t);E.current||u(y)}catch(y){console.error(y),E.current||g(new qa("IAgoraRTC.createMicrophoneAudioTrack",y))}E.current||p(!1)}!a&&!E.current&&u(null)},[a,e]),{localMicrophoneTrack:c,isLoading:d,error:f}}function Fc(e,t=!0,i){const a=es(i),c=Ns(i),u=_.useRef([]),[d,p]=_.useState(!1),[f,g]=_.useState(null),E=Hu();return Hh(async()=>{if(E.current||(p(!1),g(null)),!a||!c||!t)return;const y=e.filter(Boolean),C=R=>u.current.some(O=>O&&O.getTrackId()===R.getTrackId()),w=R=>R.enabled&&t&&!C(R);for(let R=0;R<y.length;R++){const O=y[R];if(O&&w(O)){try{E.current||p(!0),await a.publish(O)}catch(k){console.error(k),E.current||g(new qa("IAgoraRTCClient.publish",k))}E.current||p(!1)}}u.current=y},[c,t,a,e]),{isLoading:d,error:f}}function xs(e){const t=es(e),[i,a]=_.useState(t?t.remoteUsers:[]);return _.useEffect(()=>{if(t){const c=()=>a(t.remoteUsers.slice());return $h([Xo(t,"user-joined",c),Xo(t,"user-left",c),Xo(t,"user-published",c),Xo(t,"user-unpublished",c)])}},[t]),i}const s6=_.createContext(void 0);function O1(e,t,i){const a=_.useContext(s6);_.useEffect(()=>{if(e)return i&&t?e.play(i):e.stop(),a?(a.onMount(e),()=>a.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,i,t,a])}function A1(e,t){const i=_.useContext(s6);i6(()=>{if(e)return t?e.play():e.stop(),i?(i.onMount(e),()=>i.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,t,i])}function N1({track:e,play:t=!1,volume:i,disabled:a,muted:c,children:u}){const d=M_(e);return A1(d,t),_.useEffect(()=>{d&&i!=null&&d.setVolume(i)},[d,i]),_.useEffect(()=>{d&&a!=null&&d.setEnabled(!a).catch(console.warn)},[a,d]),_.useEffect(()=>{d&&c!=null&&d.setMuted(c).catch(console.warn)},[c,d]),u?le(Zi,{children:u}):null}const V_={position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#000"},c6={width:"100%",height:"100%"},pm={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:2},zh=(e,t)=>_.useMemo(()=>({...e,...t}),[e,t]);function x1({track:e,play:t,disabled:i,muted:a,style:c,...u}){const d=zh(c6,c),[p,f]=_.useState(null),g=M_(e);return O1(g,t,p),_.useEffect(()=>{g&&i!=null&&g.setEnabled(!i).catch(console.warn)},[i,g]),_.useEffect(()=>{g&&a!=null&&g.setMuted(a).catch(console.warn)},[a,g]),le("div",{...u,ref:f,style:d})}function l6({track:e,deviceId:t,...i}){const a=M_(e);return _.useEffect(()=>{a&&t!=null&&a.setDevice(t).catch(console.warn)},[t,a]),le(N1,{track:e,...i})}function u6({track:e,deviceId:t,...i}){const a=M_(e);return _.useEffect(()=>{a&&t!=null&&a.setDevice(t).catch(console.warn)},[t,a]),le(x1,{track:e,...i})}const Ahe={width:"100%",height:"100%",background:"#1a1e21 center/cover no-repeat",filter:"blur(16px) brightness(0.4)"},Nhe={position:"absolute",top:"50%",left:"50%",maxWidth:"50%",maxHeight:"50%",aspectRatio:"1",transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",objectFit:"cover"};function F_({cover:e}){return le("div",{style:pm,children:typeof e=="string"?Ze(Zi,{children:[le("div",{style:{...Ahe,backgroundImage:`url(${e})`}}),le("img",{src:e,style:Nhe})]}):e()})}function B_({micOn:e,cameraOn:t,audioTrack:i,videoTrack:a,playAudio:c,playVideo:u,micDeviceId:d,cameraDeviceId:p,volume:f,cover:g,children:E,style:y,...C}){const w=zh(V_,y);return u=u??!!t,c=c??!!e,Ze("div",{...C,style:w,children:[le(u6,{deviceId:p,disabled:!t,play:u,track:a}),le(l6,{deviceId:d,disabled:!e,play:c,track:i,volume:f}),g&&!t&&le(F_,{cover:g}),le("div",{style:pm,children:E})]})}function d6({micOn:e,cameraOn:t,audioTrack:i,videoTrack:a,playAudio:c,playVideo:u,volume:d,cover:p,children:f,style:g,...E}){const y=zh(V_,g);return u=u??!!t,c=c??!!e,Ze("div",{...E,style:y,children:[le(x1,{disabled:!t,play:u,track:a}),le(N1,{disabled:!e,play:c,track:i,volume:d}),p&&!t&&le(F_,{cover:p}),le("div",{style:pm,children:f})]})}function h6({track:e,play:t=!1,playbackDeviceId:i,volume:a,children:c}){return A1(e,t),_.useEffect(()=>{e&&i!=null&&e.setPlaybackDevice(i).catch(console.warn)},[e,i]),_.useEffect(()=>{e&&a!=null&&e.setVolume(a)},[e,a]),c?le(Zi,{children:c}):null}function P1({track:e,play:t,style:i,...a}){const c=zh(c6,i),[u,d]=_.useState(null);return O1(e,t,u),le("div",{...a,ref:d,style:c})}function D1({user:e,playVideo:t,playAudio:i,playbackDeviceId:a,volume:c,cover:u,style:d,children:p,...f}){const g=zh(V_,d),{track:E}=_4(e,"video"),{track:y}=_4(e,"audio");return t=t??(e==null?void 0:e.hasVideo),i=i??(e==null?void 0:e.hasAudio),Ze("div",{...f,style:g,children:[le(P1,{play:t,track:E}),le(h6,{play:i,playbackDeviceId:a,track:y,volume:c}),u&&!t&&le(F_,{cover:u}),le("div",{style:pm,children:p})]})}function Gh({track:e,playVideo:t,cover:i,client:a,style:c,children:u,...d}){var E,y;const p=zh(V_,c),g=(y=(E=es(a).remoteUsers)==null?void 0:E.find(C=>C.uid===(e==null?void 0:e.getUserId())))==null?void 0:y.hasVideo;return t=t??g,Ze("div",{...d,style:p,children:[le(P1,{play:t,track:e}),i&&!t&&le(F_,{cover:i}),le("div",{style:pm,children:u})]})}const k1=({published:e,total:t})=>le("div",{className:"p-4 text-xl",children:Ze("span",{className:"inline-flex items-center gap-1 py-2 px-3 rd b-1 b-solid",children:[le("i",{className:"i-lucide-users"}),Ze("samp",{className:"text-base",children:[e,"/",t]})]})});var NI={},xhe={get exports(){return NI},set exports(e){NI=e}};(function(e){(function(t,i,a){function c(f){var g=this,E=p();g.next=function(){var y=2091639*g.s0+g.c*23283064365386963e-26;return g.s0=g.s1,g.s1=g.s2,g.s2=y-(g.c=y|0)},g.c=1,g.s0=E(" "),g.s1=E(" "),g.s2=E(" "),g.s0-=E(f),g.s0<0&&(g.s0+=1),g.s1-=E(f),g.s1<0&&(g.s1+=1),g.s2-=E(f),g.s2<0&&(g.s2+=1),E=null}function u(f,g){return g.c=f.c,g.s0=f.s0,g.s1=f.s1,g.s2=f.s2,g}function d(f,g){var E=new c(f),y=g&&g.state,C=E.next;return C.int32=function(){return E.next()*4294967296|0},C.double=function(){return C()+(C()*2097152|0)*11102230246251565e-32},C.quick=C,y&&(typeof y=="object"&&u(y,E),C.state=function(){return u(E,{})}),C}function p(){var f=4022871197,g=function(E){E=String(E);for(var y=0;y<E.length;y++){f+=E.charCodeAt(y);var C=.02519603282416938*f;f=C>>>0,C-=f,C*=f,f=C>>>0,C-=f,f+=C*4294967296}return(f>>>0)*23283064365386963e-26};return g}i&&i.exports?i.exports=d:a&&a.amd?a(function(){return d}):this.alea=d})(Xt,e,!1)})(xhe);var xI={},Phe={get exports(){return xI},set exports(e){xI=e}};(function(e){(function(t,i,a){function c(p){var f=this,g="";f.x=0,f.y=0,f.z=0,f.w=0,f.next=function(){var y=f.x^f.x<<11;return f.x=f.y,f.y=f.z,f.z=f.w,f.w^=f.w>>>19^y^y>>>8},p===(p|0)?f.x=p:g+=p;for(var E=0;E<g.length+64;E++)f.x^=g.charCodeAt(E)|0,f.next()}function u(p,f){return f.x=p.x,f.y=p.y,f.z=p.z,f.w=p.w,f}function d(p,f){var g=new c(p),E=f&&f.state,y=function(){return(g.next()>>>0)/4294967296};return y.double=function(){do var C=g.next()>>>11,w=(g.next()>>>0)/4294967296,R=(C+w)/(1<<21);while(R===0);return R},y.int32=g.next,y.quick=y,E&&(typeof E=="object"&&u(E,g),y.state=function(){return u(g,{})}),y}i&&i.exports?i.exports=d:a&&a.amd?a(function(){return d}):this.xor128=d})(Xt,e,!1)})(Phe);var PI={},Dhe={get exports(){return PI},set exports(e){PI=e}};(function(e){(function(t,i,a){function c(p){var f=this,g="";f.next=function(){var y=f.x^f.x>>>2;return f.x=f.y,f.y=f.z,f.z=f.w,f.w=f.v,(f.d=f.d+362437|0)+(f.v=f.v^f.v<<4^(y^y<<1))|0},f.x=0,f.y=0,f.z=0,f.w=0,f.v=0,p===(p|0)?f.x=p:g+=p;for(var E=0;E<g.length+64;E++)f.x^=g.charCodeAt(E)|0,E==g.length&&(f.d=f.x<<10^f.x>>>4),f.next()}function u(p,f){return f.x=p.x,f.y=p.y,f.z=p.z,f.w=p.w,f.v=p.v,f.d=p.d,f}function d(p,f){var g=new c(p),E=f&&f.state,y=function(){return(g.next()>>>0)/4294967296};return y.double=function(){do var C=g.next()>>>11,w=(g.next()>>>0)/4294967296,R=(C+w)/(1<<21);while(R===0);return R},y.int32=g.next,y.quick=y,E&&(typeof E=="object"&&u(E,g),y.state=function(){return u(g,{})}),y}i&&i.exports?i.exports=d:a&&a.amd?a(function(){return d}):this.xorwow=d})(Xt,e,!1)})(Dhe);var DI={},khe={get exports(){return DI},set exports(e){DI=e}};(function(e){(function(t,i,a){function c(p){var f=this;f.next=function(){var E=f.x,y=f.i,C,w;return C=E[y],C^=C>>>7,w=C^C<<24,C=E[y+1&7],w^=C^C>>>10,C=E[y+3&7],w^=C^C>>>3,C=E[y+4&7],w^=C^C<<7,C=E[y+7&7],C=C^C<<13,w^=C^C<<9,E[y]=w,f.i=y+1&7,w};function g(E,y){var C,w=[];if(y===(y|0))w[0]=y;else for(y=""+y,C=0;C<y.length;++C)w[C&7]=w[C&7]<<15^y.charCodeAt(C)+w[C+1&7]<<13;for(;w.length<8;)w.push(0);for(C=0;C<8&&w[C]===0;++C);for(C==8?w[7]=-1:w[C],E.x=w,E.i=0,C=256;C>0;--C)E.next()}g(f,p)}function u(p,f){return f.x=p.x.slice(),f.i=p.i,f}function d(p,f){p==null&&(p=+new Date);var g=new c(p),E=f&&f.state,y=function(){return(g.next()>>>0)/4294967296};return y.double=function(){do var C=g.next()>>>11,w=(g.next()>>>0)/4294967296,R=(C+w)/(1<<21);while(R===0);return R},y.int32=g.next,y.quick=y,E&&(E.x&&u(E,g),y.state=function(){return u(g,{})}),y}i&&i.exports?i.exports=d:a&&a.amd?a(function(){return d}):this.xorshift7=d})(Xt,e,!1)})(khe);var kI={},Lhe={get exports(){return kI},set exports(e){kI=e}};(function(e){(function(t,i,a){function c(p){var f=this;f.next=function(){var E=f.w,y=f.X,C=f.i,w,R;return f.w=E=E+1640531527|0,R=y[C+34&127],w=y[C=C+1&127],R^=R<<13,w^=w<<17,R^=R>>>15,w^=w>>>12,R=y[C]=R^w,f.i=C,R+(E^E>>>16)|0};function g(E,y){var C,w,R,O,k,A=[],x=128;for(y===(y|0)?(w=y,y=null):(y=y+"\0",w=0,x=Math.max(x,y.length)),R=0,O=-32;O<x;++O)y&&(w^=y.charCodeAt((O+32)%y.length)),O===0&&(k=w),w^=w<<10,w^=w>>>15,w^=w<<4,w^=w>>>13,O>=0&&(k=k+1640531527|0,C=A[O&127]^=w+k,R=C==0?R+1:0);for(R>=128&&(A[(y&&y.length||0)&127]=-1),R=127,O=4*128;O>0;--O)w=A[R+34&127],C=A[R=R+1&127],w^=w<<13,C^=C<<17,w^=w>>>15,C^=C>>>12,A[R]=w^C;E.w=k,E.X=A,E.i=R}g(f,p)}function u(p,f){return f.i=p.i,f.w=p.w,f.X=p.X.slice(),f}function d(p,f){p==null&&(p=+new Date);var g=new c(p),E=f&&f.state,y=function(){return(g.next()>>>0)/4294967296};return y.double=function(){do var C=g.next()>>>11,w=(g.next()>>>0)/4294967296,R=(C+w)/(1<<21);while(R===0);return R},y.int32=g.next,y.quick=y,E&&(E.X&&u(E,g),y.state=function(){return u(g,{})}),y}i&&i.exports?i.exports=d:a&&a.amd?a(function(){return d}):this.xor4096=d})(Xt,e,!1)})(Lhe);var LI={},Mhe={get exports(){return LI},set exports(e){LI=e}};(function(e){(function(t,i,a){function c(p){var f=this,g="";f.next=function(){var y=f.b,C=f.c,w=f.d,R=f.a;return y=y<<25^y>>>7^C,C=C-w|0,w=w<<24^w>>>8^R,R=R-y|0,f.b=y=y<<20^y>>>12^C,f.c=C=C-w|0,f.d=w<<16^C>>>16^R,f.a=R-y|0},f.a=0,f.b=0,f.c=-1640531527,f.d=1367130551,p===Math.floor(p)?(f.a=p/4294967296|0,f.b=p|0):g+=p;for(var E=0;E<g.length+20;E++)f.b^=g.charCodeAt(E)|0,f.next()}function u(p,f){return f.a=p.a,f.b=p.b,f.c=p.c,f.d=p.d,f}function d(p,f){var g=new c(p),E=f&&f.state,y=function(){return(g.next()>>>0)/4294967296};return y.double=function(){do var C=g.next()>>>11,w=(g.next()>>>0)/4294967296,R=(C+w)/(1<<21);while(R===0);return R},y.int32=g.next,y.quick=y,E&&(typeof E=="object"&&u(E,g),y.state=function(){return u(g,{})}),y}i&&i.exports?i.exports=d:a&&a.amd?a(function(){return d}):this.tychei=d})(Xt,e,!1)})(Mhe);var MI={},Uhe={get exports(){return MI},set exports(e){MI=e}};(function(e){(function(t,i,a){var c=256,u=6,d=52,p="random",f=a.pow(c,u),g=a.pow(2,d),E=g*2,y=c-1,C;function w(M,B,F){var j=[];B=B==!0?{entropy:!0}:B||{};var $=A(k(B.entropy?[M,P(i)]:M??x(),3),j),ee=new R(j),H=function(){for(var J=ee.g(u),X=f,W=0;J<g;)J=(J+W)*c,X*=c,W=ee.g(1);for(;J>=E;)J/=2,X/=2,W>>>=1;return(J+W)/X};return H.int32=function(){return ee.g(4)|0},H.quick=function(){return ee.g(4)/4294967296},H.double=H,A(P(ee.S),i),(B.pass||F||function(J,X,W,Z){return Z&&(Z.S&&O(Z,ee),J.state=function(){return O(ee,{})}),W?(a[p]=J,X):J})(H,$,"global"in B?B.global:this==a,B.state)}function R(M){var B,F=M.length,j=this,$=0,ee=j.i=j.j=0,H=j.S=[];for(F||(M=[F++]);$<c;)H[$]=$++;for($=0;$<c;$++)H[$]=H[ee=y&ee+M[$%F]+(B=H[$])],H[ee]=B;(j.g=function(J){for(var X,W=0,Z=j.i,ne=j.j,ie=j.S;J--;)X=ie[Z=y&Z+1],W=W*c+ie[y&(ie[Z]=ie[ne=y&ne+X])+(ie[ne]=X)];return j.i=Z,j.j=ne,W})(c)}function O(M,B){return B.i=M.i,B.j=M.j,B.S=M.S.slice(),B}function k(M,B){var F=[],j=typeof M,$;if(B&&j=="object")for($ in M)try{F.push(k(M[$],B-1))}catch{}return F.length?F:j=="string"?M:M+"\0"}function A(M,B){for(var F=M+"",j,$=0;$<F.length;)B[y&$]=y&(j^=B[y&$]*19)+F.charCodeAt($++);return P(B)}function x(){try{var M;return C&&(M=C.randomBytes)||(M=new Uint8Array(c),(t.crypto||t.msCrypto).getRandomValues(M)),P(M)}catch{var B=t.navigator,F=B&&B.plugins;return[+new Date,t,F,t.screen,P(i)]}}function P(M){return String.fromCharCode.apply(0,M)}A(a.random(),i),e.exports?e.exports=w:a["seed"+p]=w})(typeof self<"u"?self:Xt,[],Math)})(Uhe);var Vhe=NI,Fhe=xI,Bhe=PI,jhe=DI,$he=kI,Hhe=LI,Wu=MI;Wu.alea=Vhe;Wu.xor128=Fhe;Wu.xorwow=Bhe;Wu.xorshift7=jhe;Wu.xor4096=$he;Wu.tychei=Hhe;var Whe=Wu;const p6=Whe;let f6=p6();function zhe(){return f6()}function S4(e){f6=p6(e)}function m6(e,t){const i=Array.isArray(e)?()=>Ghe(e):e;return(t==null?void 0:t.length)===void 0?i(0):Array.from({length:t.length},(a,c)=>i(c))}function Ghe(e){return e[Math.floor(zhe()*e.length)]}function Khe(e,t){return m6(e,t)}var y4={withAccents:{male:["AdriÃ¡n","Ãgir","Ãlvaro","AndrÃ©","AndrÃ©s","Ãrni","AsbjÃ¸rn","BjÃ¶rn","CÃ©sar","DanÃ­el","DavÃ­Ã°","EmÃ­lio","FaÃ±ch","FranÃ§ois","FrantiÅ¡ek","GÃ­sli","GÃ¶tz","GuÃ°jÃ³n","GuÃ°mundur","GÃ¼nter","HalldÃ³r","Hans-JÃ¶rg","Hans-JÃ¼rgen","HÃ¼seyin","IÃ±aki","JÃ¡nos","JesÃºs","JiÅÃ­","JÃ³hann","JÃ³hannes","JokÅ«bas","JÃ³n","JosÃ©","JÃ¶rn","JuliÃ£o","JÃ¼rgen","KristjÃ¡n","MaÃ«l","MagnÃºs","MathÃ©o","MÃ¡tyÃ¡s","MichaÅ","NoÃ«l","NuÃ±ez","Ãlafur","Ãscar","Ãyvind","PÃ¡ll","PaweÅ","PÃ©tur","RamÃ³n","RaÃºl","RenÃ©","RuairÃ­","RubÃ©n","SeÃ¡n","SÃ©rgio","SigurÃ°ur","SÃ¶nke","StefÃ¡n","TomÃ¡Å¡","Ãorsteinn"],female:["Ãdel","AgnÃ¨s","AlÃ­cia","Ãnne","AntÃ³nia","Ãsta","AuÃ°ur","CÃ¤cilia","ChloÃ«","ClaÃºdia","DÃ¶rte","ElÃ­n","ElÃ­sabet","EliÅ¡ka","FrantiÅ¡ka","GlÃ³ria","GraÅ¼yna","GuÃ°bjÃ¶rg","GuÃ°nÃ½","GuÃ°rÃºn","HenriÃ«tte","IngibjÃ¶rg","Ãris","JÃ³hanna","JÃ³na","JÃºlia","KÃ¤te","KatrÃ­n","KolbrÃºn","KristÃ­n","KÅ the","LetÃ­cia","LÃ­dia","LÃºcia","MaÅgorzata","MargrÃ©t","MarÃ­a","MÃ³nica","NatÃ¡lia","ÃlÃ¶f","PatrÃ­cia","RagnheiÃ°ur","RenÃ©e","RuÅ¾ena","SiÃ¢n","SigrÃ­Ã°ur","SigrÃºn","SÃ­lvia","SÃ¸rina","VÄra","VirgÃ­nia","ZoÃ«","ÃÃ³ra","ÃÃ³runn"]},withoutAccents:{male:["Abdul","Abdullahi","Abubakar","Adam","Adamu","Adiy","Ahmad","Ajay","Akira","Alan","Alberto","Alejandro","Aleksander","Aleksandr","Aleksey","Alex","Alexander","Alexey","Ali","Aliyu","Aminu","Amit","Amiyr","Amiyt","Amnuai","Amphon","Anah","Anan","Andreas","Andrew","Andrey","Andri","Andries","Andrzej","Anil","Anthony","Anton","Antonio","Arnar","Artur","Artyom","Arun","Ashok","Atli","Avraham","Bartosz","Bello","Bernd","Bin","Birgir","Bjarni","Blessing","Bongani","Brian","Bunmi","Carlos","Carol","Chan","Chao","Charles","Charoen","Chen","Cheng","Christian","Christopher","Colin","Daniel","Daniyel","Dariusz","David","Denis","Dennis","Diego","Dieter","Dilip","Dinesh","Dmitriy","Dmitry","Einar","Eliyahu","Emmanuel","Evgeniy","Fernando","Fran","Francis","Francisco","Francisco-Javier","Frank","Franz","Gang","Gareth","Gary","George","Gerhard","Graham","Grzegorz","Gunnar","Guy","Haim","Haiyan","Hans","Hans-Ulrich","Haruna","Hassan","Heike","Heinz","Helgi","Helmut","Hendrik","Herbert","Hideo","Hiromi","Hiroshi","Hong","Horst","Hui","Ian","Ibrahim","Idris","Igor","Ilya","Isa","Isaac","Isah","Ivan","Jabulani","Jacek","Jacobus","Jakub","James","Jan","Janusz","Javier","Jean","Jerzy","Jesus","Jason","Jianguo","Jianhua","Jianjun","Jianping","Jin","Joan","Johan","Johannes","John","Jonathan","Jorge","Jose","Jose-Antonio","Jose-Luis","Jose-Manuel","Jose-Maria","Josef","Joseph","Joyce","Juan","Kabiru","Kai","Kamil","Karen","Karl","Karl-Heinz","Katsumi","Kazuo","Kelvin","Kenji","Kenneth","Kevin","Kiran","Kirill","Kiyoshi","Kjartan","Klaus","Ko","Koichi","Koji","Konstantin","Koshi","Krishna","Kristinn","Krzysztof","Kun","Lakshmi","Lan","Laxmi","Lei","Li","Lihua","Lijun","Lilian","Lin","Ling","Liping","Liyor","Luis","Lukasz","Maciej","Mahmood","Maksim","Manfred","Manoj","Manuel","Marcin","Mardkhay","Marek","Mariusz","Mark","Martin","Masami","Masao","Mateusz","Matt","Matthew","Meiyr","Michael","Michal","Miguel","Miguel-Angel","Mikhail","Min","Ming","Mitsuo","Miykhael","Miykhal","Mo","Mohamed","Mohammad","Mohammed","Mohan","Moses","Moshe","Mpho","Muhammad","Muhammed","Mukesh","Musa","Narong","Nathan","Nicola","Nikita","Nikolay","Ning","Nkosinathi","Noam","Oleg","Omer","Otieno","Pablo","Patrick","Paul","Pavel","Pawel","Pedro","Peng","Peter","Petrus","Philip","Pieter","Ping","Piotr","Prasit","Prasoet","Pricha","Pushpa","Qiang","Qing","Radha","Rafael","Ragnar","Raj","Rajendra","Rajesh","Raju","Rakesh","Ram","Ramesh","Raphael","Rattana","Ravi","Richard","Robert","Roman","Rong","Roy","Ryan","Salisu","Saman","Samran","Samuel","Sani","Sanjay","Santosh","Sam","Sammy","Sawat","Sebastian","Sergey","Sergio","Shankar","Shay","Shigeru","Shimon","Shlomo","Shoji","Sibusiso","Simon","Sipho","Sombat","Sombun","Somchai","Somchit","Somkhit","Somkiat","Sommai","Somnuek","Somphon","Somphong","Somsak","Sri","Stefan","Stephen","Steve","Steven","Suman","Sunday","Sunil","Sunthon","Suresh","Sushila","Suwit","Sveinn","Tadashi","Takashi","Takeshi","Tal","Tebogo","Thabo","Thawi","Themba","Thomas","Thulani","Tomasz","Toshio","Udom","Umar","Uriy","Usman","Uwe","Victor","Vijay","Viktor","Vincent","Vinod","Vladimir","Walter","Wanchai","Waraphon","Wei","Werner","Wichai","Wichian","Willem","William","Winai","Wirat","Wirot","Wojciech","Wolfgang","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Xolani","Yaakv","Yahaya","Yakubu","Yan","Yasuo","Yhudah","Ying","Yisrael","Yong","Yosef","Yoshie","Yoshimi","Yoshio","Yu","Yue","Yukio","Yun","Yuriy","Yusuf","Yuval","Zbigniew","Zhen","Zhiqiang"],female:["Agata","Agnieszka","Aisha","Akira","Aleksandra","Alina","Alyona","Amina","Amnuai","Ana","Ana-Maria","Anah","Anan","Anastasiya","Andrea","Angela","Anita","Ann","Anna","Anong","Antonia","Asha","Barbara","Beata","Berglind","Bin","Birgit","Birna","Blessing","Brigitte","Bunmi","Busisiwe","Carmen","Carol","Caroline","Catherine","Chan","Chanah","Chao","Charoen","Chayah","Chen","Cheng","Christa","Christine","Claire","Claudia","Cristina","Darya","Dolores","Dorota","Edda","Ekaterina","Elena","Elisabeth","Elizabeth","Elke","Emiko","Emma","Erika","Erla","Erna","Ester","Esther","Eunice","Eva","Eugenia","Ewa","Faith","Fatima","Fiona","Fran","Francisca","Fumiko","Galina","Gabra","Gisela","Gita","Grace","Hadiza","Haiyan","Hanna","Haruna","Hauwa","Heike","Helen","Helga","Hildur","Hiroko","Hiromi","Hisako","Hong","Hui","Hulda","Inga","Ingrid","Irina","Isa","Isabel","Isah","Iwona","Jackline","Jan","Jane","Janet","Jean","Jennifer","Jianhua","Jianping","Jin","Joan","Joanna","Johanna","Josefa","Joy","Joyce","Juan","Julie","Justyna","Kai","Kanchana","Karen","Karin","Karolina","Kasia","Katarzyna","Katsumi","Keiko","Kiran","Kiyoko","Kristina","Kseniya","Kun","Lakshmi","Lalita","Lan","Latda","Laura","Laxmi","Leah","Lei","Li","Lihua","Lijun","Lilian","Lilja","Lin","Linda","Lindiwe","Ling","Liping","Lisa","Lucia","Lucy","Lyubov","Lyudmila","Magda","Magdalena","Mali","Manju","Margaret","Maria","Maria-Isabel","Maria-Jose","Maria-Pilar","Marina","Mariya","Marta","Martha","Mary","Maryam","Masako","Masami","Mei","Mercy","Michal","Michiko","Mieko","Min","Mina","Ming","Miriam","Miyoko","Mo","Monika","Mpho","Na","Nadezhda","Nan","Nancy","Natalya","Ngozi","Nicola","Ning","Nittaya","Noam","Nobuko","Nokuthula","Nonhlanhla","Noriko","Nushi","Olga","Omer","Patricia","Paula","Paulina","Peng","Petra","Phonthip","Pilar","Ping","Prani","Purity","Pushpa","Qing","Rachel","Radha","Rattana","Rebecca","Reiko","Rekha","Renate","Rita","Rong","Rosa","Rose","Rut","Ruth","Ryoko","Sabine","Sachiko","Samran","Santosh","Sara","Sarah","Sam","Sammy","Sawat","Shanti","Sharon","Shay","Shizuko","Shoshanah","Sibongile","Sita","Sombat","Sombun","Somchit","Somkhit","Sommai","Somnuek","Somphon","Somphong","Sri","Steinunn","Sukanya","Suman","Sunday","Sunita","Suphaphon","Susan","Susanne","Sushila","Svetlana","Takako","Tamar","Tatyana","Tal","Tebogo","Teruko","Thawi","Tomiko","Toshiko","Unnur","Urai","Urmila","Ursula","Usha","Valentina","Victoria","Wanjiru","Wanphen","Watsana","Wei","Wilai","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Yael","Yan","Yasuko","Yelena","Yhudiyt","Ying","Yoko","Yong","Yoshie","Yoshiko","Yoshimi","Yu","Yue","Yuko","Yuliya","Yun","Yuval","Zainab","Zandile","Zanele","Zhen"]}};function Yhe(e){var t,i;const a=(t=e==null?void 0:e.withAccents)!=null&&t,c=(i=e==null?void 0:e.gender)!=null?i:Khe(["male","female"]),u=e==null?void 0:e.locale;return m6(a?u?u==null?void 0:u.withAccents[c]:y4.withAccents[c]:u?u==null?void 0:u.withoutAccents[c]:y4.withoutAccents[c],e)}var qhe={china:["Peking roasted duck","Kung pao chicken","Sweet and sour pork","Hot pot","Dim sum","Dumplings","Ma po tofu","Char siu","Chicken chow mein","Beef chow mein","vegetable chow mein","Chicken fried rice","Beef fried rice","Vegetable fried Rice","Special fried Rice","Sichuan pork","Xiaolongbao","Zhajiangmian","Wonton soup","Sweet and sour pork","Duck spring Rolls","Vegetable spring Rolls","Wonton","Peking duck","Lamb hot pot","Spicy crayfish","Guilin rice noodles","Lanzhou hand-pulled noodles","Steamed crab","Shredded pork with garlic sauce","Red braised pork","Sweet and sour Ribs","Xinjiang","Braised pork with vermicelli"],italy:["Butternut squash risotto","Mushroom risotto","Beetroot risotto","Courgette risotto","Pizza","Gnocchi","Spaghetti bolognese","Spaghetti carbonara","Pesto alla Genovese","Beef lasagne","Vegetable lasagne","Gelato","Prosciutto di Parma","Ribollita","Bagna cauda","Polenta","Tortelli and ravioli","Focaccia","Garlic bread","Arancini","Il tartufo","Panzerotto fritto","Fiorentina","Minestrone","Frico","Arrosticini","Olive ascolante","Fritto misto piemontes","TiramisÃ¹"],india:["Biryani","Dosa","Tandoori chicken","Samosas","Chaat","Plain naan","Garlic naan","Pilau rice","Steamed rice","Chicken madras","Vegetable madras","Chicken vindaloo","Chicken jalfrezi","Chicken roghan josh","Lamb roghan josh","Beef roghan josh","Butter chicken","Dosa","Gulab jamun","Chicken korma","Mutter paneer","Papadum","Paratha","Raita","Saag paneer","Tandoori chicken","Chicken tikka masala","Pakora","Dal","Chapati","Pasanda","Aloo gobi","Kofta","Chicken makhani","Paneer naan","Chana Aloo Curry"],mexico:["Chilaquiles","Pozole","Tacos al pastor","Tostadas","Chiles en nogada","Elote","Enchiladas","Mole","Guacamole","Tamales","Huevos rancheros","Machaca","Discada","Beef Burrito","Chicken Burrito","Pozole de pollo o duajolote","Menudo","Cochinita pibil","Tamale","Quesadilla","Frijoles puercos","Chile en nogada","Esquites","Alegria de amaranto","PipiÃ¡n","Aguachile","Ceviche","Pescado zarandeado","Camarones a la diabla","Birria de chivo","Tlayuda","Guacamole con chapulines","Flautas","Torta Ahogada","Carnitas","Caldo Azteca","Gorditas de Nata"],japan:["Sushi","Udon","Tofu","Tempura","Yakitori","Sashimi","Ramen","Donburi","Natto","Oden","Tamagoyaki","Soba","Tonkatsu","Kashipan","Sukiyaki","Miso soup","Okonomiyaki","Mentaiko","Nikujaga","Unagi no kabayaki","Shabu Shabu","Onigiri","Gyoza","Takoyaki","aiseki ryori","Edamame","Yakisoba","Chawanmushi","Wagashi"],france:["Foie gras","HuÃ®tres","Cassoulet","Poulet basquaise","Escargots au beurre persillÃ©","Mouclade charentaise","Galettes bretonnes","Flemish carbonnade","Quiche lorraine","Raclette","Cheese fondue","Beef fondue","Gratin dauphinois","Tartiflette","Bouillabaisse","Ratatouille","Boeuf bourguignon","Blanquette de veau","Pot-au-feu","Coq-au-vin","Hachis parmentier","Steak tartare","Choucroute","SoufflÃ© au fromage","Cuisses de grenouilles","Soupe Ã  lâoignon","Baguette","Croissant","French cheeses","Fondant au chocolat","Tarte tatin","Macarons","CrÃ¨me brÃ»lÃ©e","Ãle flottante","Profiteroles","Pain au chocolat"],lebanon:["Kibbeh","Kafta","Kanafeh","Hummus","Rice pilaf","Fattoush","Manakish","Tabbouleh","Sfeeha","Fattoush","Labneh","Muhammara","Lahm bi ajin","Kaak","Chanklich","Mssabaha","Shawarma","Kebbe","Falafel","Halewit el jeben","Namoura","Maamoul","Foul mdammas","Balila","Kawarma","Fattouch"],thailand:["Pad kra pao moo","Tom kha gai","Khao Pad","Chicken pad Thai","Vegetable pad Thai","Moo satay","Tom yum goong","Khao niew mamuang","Kai yad sai","Khao soi","Pad see ew","Laab moo","Gaeng panang","Gai pad med ma muang","Som tam","Poh pia tod","Gaeng massaman","Pla kapung nueng manao","Tod mun pla","Gaeng ped","Gaeng garee","Gaeng keow wan","Moo ping","Durian","Sai ooah","Hoy tod","Kuay teow reua","Mu kratha","Kao ka moo","Yam nua"],greece:["Moussaka","Papoutsakia","Pastitsio","Souvlaki","Soutzoukakia","Stifado","Tomatokeftedes","Tzatziki","Kolokithokeftedes","Giouvetsi","Choriatiki","Kleftiko","Gemista","Fasolada","Bougatsa","Tiropita","Spanakopita","Feta Cheese with Honey","Horta","Tirokroketes","Briam","Saganaki","Gigantes","Dolmades","Fasolatha","Koulouri","Loukoumades","Gyros","Galaktoboureko","Baklava"],turkey:["ÅiÅ kebap","DÃ¶ner","KÃ¶fte","Pide","Kumpir","Meze","MantÄ±","Lahmacun","Menemen","ÅiÅ kebap","Ä°skender kebab","Corba","Kuzu tandir","ÃiÄ KÃ¶fte","Pilav","Yaprak sarma","Dolma","Ä°mam bayÄ±ldÄ±","Borek","Durum","Kumpir","Balik ekmek","Simit","Kunefe","Baklava","Lokum","Halva","Mozzaik pasta","GÃ¼llaÃ§","Mercimek KÃ¶ftesi","Haydari","Tursu suyu","Kahvalti","Kazan dibi","Hunkar begendi","Islak burgers","Salep","Yogurtlu kebab"],spain:["Tortilla de patatas","Fabada asturiana","CalÃ§ots","Boquerones al vinagre","Empanada gallega","Paella","Gazpacho","Gachas","Migas","Bocadillo de calamares","Pulpo a feira","Caldo gallego","Lentejas con chorizo","Cocido madrileÃ±o","Cachopo","Caracoles"],venezuela:["PabellÃ³n criollo","Arepa","Mondongo","Empanadas","Quesillo","Chicha andina","TequeÃ±os","Cachapa","Hallaca","Perico","Pasticho","Mandocas","Caraotas negras","Patacones","Dulce de leche","Pan de JamÃ³n"],chile:["Humitas","Empanadas","Porotos con riendas","Completos","Manjar","Cordero al palo","Pastel de choclo","Mote con huesillos","Sopaipillas","Curanto"],argentina:["Milanesas","Empanadas","Pizza fugazeta","Asado","Choripan","Bondiola","Bife de chorizo"],colombia:["Bandeja paisa","Chuleta valluna","Sancocho trifÃ¡sico","Empanada valluna","Salpicon de frutas","Pastel de garbanzo","Ajiaco","Arepas","Arroz de lisa","Sancocho","Pan de bono","Cuchuco","Oblea","Cazuela de mariscos","Pan de yuca","Bollo Limpio","AlmojÃ¡bana","Empanadas","Arroz con Coco","Sopa de mondongo","Cazuela de Mariscos","Arroz con Pollo","Arepa de Huevo","Mote de Queso"],ecuador:["Encebollado","Ceviche","Tigrillo","Bolon de verde","Llapingacho","Mote pillo","Locro de papa","Churrasco"],peru:["Ceviche","Arroz con pollo","Aji de gallina","Llunca de gallina"],"el salvador":["Pupusa","Sopa de patas","Rigua","Flor de izote con huevo","Gallo en chicha"],romania:["Sarmale","Mici","Pomana porcului","CiorbÄ de fasole cu ciolan","CiorbÄ de burtÄ","CiorbÄ rÄdÄuÈeanÄ","PlÄcintÄ cu brÃ¢nzÄ","CiorbÄ de potroace","MÄmÄligÄ cu brÃ¢nzÄ Èi smÃ¢ntÃ¢nÄ","TochiturÄ","Piftie","Iahnie de fasole","SlÄninÄ afumatÄ","CÃ¢rnaÈi afumaÈi","VarzÄ a la Cluj","GulaÈ de cartofi cu afumÄturÄ","Cozonac de casÄ","CiorbÄ ardeleneascÄ de porc","Mucenici moldoveneÈti","SalatÄ de boeuf","Dovleac copt","PapanaÈi cu brÃ¢nzÄ de vacÄ Èi afine","Drob de miel","PÃ¢rjoale moldoveneÈti","ZacuscÄ de vinete","ZacuscÄ de fasole","TurtÄ dulce","ClÄtitele cu gem","ClÄtitele cu brÃ¢nza de vacÄ","BalmoÈ","Cozonac","Chiftele"]},C4;(C4=Object.keys(qhe))==null||C4.length;var b4,Xhe={olympic:["Archery","Artistic Gymnastics","Artistic Swimming","Athletics","Badminton","Baseball Softball","Basketball","Beach Volleyball","BMX Freestyle","BMX Racing","Boxing","Kayak Flatwater","Kayak Slalom","Diving","Equestrian","Fencing","Football","Golf","Handball","Hockey","Judo","Karate","Marathon Swimming","Modern Pentathlon","Mountain Bike","Rhythmic Gymnastics","Road Cycling","Rowing","Rugby","Sailing","Shooting","Skateboarding","Sport Climbing","Surfing","Swimming","Table Tennis","Taekwondo","Tennis","Track Cycling","Trampoline","Triathlon","Volleyball","Water Polo","Weightlifting","Wrestling"],winterOlympic:["Alpine Skiing","Biathlon","Bobsleigh","Cross-Country Skiing","Curling","Figure Skating","Freestyle Skiing","Ice Hockey","Luge","Nordic Combined","Short Track Speed Skating","Skeleton","Ski Jumping","Snowboard","Speed Skating"],outdoor:["Archery","Athletics","Badminton","Baseball","Basketball","Bowling","Boxing","Camping","Canoeing","Climbing","Cricket","Curling","Cycling","Equestrian","Fencing","Football","Golf","Gymnastics","Handball","Hang Gliding","High Jumping","Hockey","Ice Hockey","Judo","Karate","Kite Flying","Monkey Bars","Motorsports","Netball","Rowing","Rugby","Running","Sailing","Skateboarding","Slide","Snow Skiing","Soccer","Street Hockey","Surfing","Swimming","Table Tennis","Tennis","Trekking","Triathlon","Volleyball","Weightlifting","Wrestling"]};(b4=Object.keys(Xhe))==null||b4.length;var UI={},Jhe={get exports(){return UI},set exports(e){UI=e}};function Qhe(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Qv={},Zhe={get exports(){return Qv},set exports(e){Qv=e}};const epe={},tpe=Object.freeze(Object.defineProperty({__proto__:null,default:epe},Symbol.toStringTag,{value:"Module"})),npe=OX(tpe);var T4;function Vn(){return T4||(T4=1,function(e,t){(function(i,a){e.exports=a()})(Xt,function(){var i=i||function(a,c){var u;if(typeof window<"u"&&window.crypto&&(u=window.crypto),typeof self<"u"&&self.crypto&&(u=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(u=globalThis.crypto),!u&&typeof window<"u"&&window.msCrypto&&(u=window.msCrypto),!u&&typeof Xt<"u"&&Xt.crypto&&(u=Xt.crypto),!u&&typeof Qhe=="function")try{u=npe}catch{}var d=function(){if(u){if(typeof u.getRandomValues=="function")try{return u.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof u.randomBytes=="function")try{return u.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},p=Object.create||function(){function x(){}return function(P){var M;return x.prototype=P,M=new x,x.prototype=null,M}}(),f={},g=f.lib={},E=g.Base=function(){return{extend:function(x){var P=p(this);return x&&P.mixIn(x),(!P.hasOwnProperty("init")||this.init===P.init)&&(P.init=function(){P.$super.init.apply(this,arguments)}),P.init.prototype=P,P.$super=this,P},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var P in x)x.hasOwnProperty(P)&&(this[P]=x[P]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),y=g.WordArray=E.extend({init:function(x,P){x=this.words=x||[],P!=c?this.sigBytes=P:this.sigBytes=x.length*4},toString:function(x){return(x||w).stringify(this)},concat:function(x){var P=this.words,M=x.words,B=this.sigBytes,F=x.sigBytes;if(this.clamp(),B%4)for(var j=0;j<F;j++){var $=M[j>>>2]>>>24-j%4*8&255;P[B+j>>>2]|=$<<24-(B+j)%4*8}else for(var ee=0;ee<F;ee+=4)P[B+ee>>>2]=M[ee>>>2];return this.sigBytes+=F,this},clamp:function(){var x=this.words,P=this.sigBytes;x[P>>>2]&=4294967295<<32-P%4*8,x.length=a.ceil(P/4)},clone:function(){var x=E.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var P=[],M=0;M<x;M+=4)P.push(d());return new y.init(P,x)}}),C=f.enc={},w=C.Hex={stringify:function(x){for(var P=x.words,M=x.sigBytes,B=[],F=0;F<M;F++){var j=P[F>>>2]>>>24-F%4*8&255;B.push((j>>>4).toString(16)),B.push((j&15).toString(16))}return B.join("")},parse:function(x){for(var P=x.length,M=[],B=0;B<P;B+=2)M[B>>>3]|=parseInt(x.substr(B,2),16)<<24-B%8*4;return new y.init(M,P/2)}},R=C.Latin1={stringify:function(x){for(var P=x.words,M=x.sigBytes,B=[],F=0;F<M;F++){var j=P[F>>>2]>>>24-F%4*8&255;B.push(String.fromCharCode(j))}return B.join("")},parse:function(x){for(var P=x.length,M=[],B=0;B<P;B++)M[B>>>2]|=(x.charCodeAt(B)&255)<<24-B%4*8;return new y.init(M,P)}},O=C.Utf8={stringify:function(x){try{return decodeURIComponent(escape(R.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return R.parse(unescape(encodeURIComponent(x)))}},k=g.BufferedBlockAlgorithm=E.extend({reset:function(){this._data=new y.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=O.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var P,M=this._data,B=M.words,F=M.sigBytes,j=this.blockSize,$=j*4,ee=F/$;x?ee=a.ceil(ee):ee=a.max((ee|0)-this._minBufferSize,0);var H=ee*j,J=a.min(H*4,F);if(H){for(var X=0;X<H;X+=j)this._doProcessBlock(B,X);P=B.splice(0,H),M.sigBytes-=J}return new y.init(P,J)},clone:function(){var x=E.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0});g.Hasher=k.extend({cfg:E.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){k.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){x&&this._append(x);var P=this._doFinalize();return P},blockSize:16,_createHelper:function(x){return function(P,M){return new x.init(M).finalize(P)}},_createHmacHelper:function(x){return function(P,M){return new A.HMAC.init(x,M).finalize(P)}}});var A=f.algo={};return f}(Math);return i})}(Zhe)),Qv}var Zv={},rpe={get exports(){return Zv},set exports(e){Zv=e}},R4;function j_(){return R4||(R4=1,function(e,t){(function(i,a){e.exports=a(Vn())})(Xt,function(i){return function(a){var c=i,u=c.lib,d=u.Base,p=u.WordArray,f=c.x64={};f.Word=d.extend({init:function(g,E){this.high=g,this.low=E}}),f.WordArray=d.extend({init:function(g,E){g=this.words=g||[],E!=a?this.sigBytes=E:this.sigBytes=g.length*8},toX32:function(){for(var g=this.words,E=g.length,y=[],C=0;C<E;C++){var w=g[C];y.push(w.high),y.push(w.low)}return p.create(y,this.sigBytes)},clone:function(){for(var g=d.clone.call(this),E=g.words=this.words.slice(0),y=E.length,C=0;C<y;C++)E[C]=E[C].clone();return g}})}(),i})}(rpe)),Zv}var eE={},ipe={get exports(){return eE},set exports(e){eE=e}},I4;function ope(){return I4||(I4=1,function(e,t){(function(i,a){e.exports=a(Vn())})(Xt,function(i){return function(){if(typeof ArrayBuffer=="function"){var a=i,c=a.lib,u=c.WordArray,d=u.init,p=u.init=function(f){if(f instanceof ArrayBuffer&&(f=new Uint8Array(f)),(f instanceof Int8Array||typeof Uint8ClampedArray<"u"&&f instanceof Uint8ClampedArray||f instanceof Int16Array||f instanceof Uint16Array||f instanceof Int32Array||f instanceof Uint32Array||f instanceof Float32Array||f instanceof Float64Array)&&(f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength)),f instanceof Uint8Array){for(var g=f.byteLength,E=[],y=0;y<g;y++)E[y>>>2]|=f[y]<<24-y%4*8;d.call(this,E,g)}else d.apply(this,arguments)};p.prototype=u}}(),i.lib.WordArray})}(ipe)),eE}var tE={},ape={get exports(){return tE},set exports(e){tE=e}},w4;function spe(){return w4||(w4=1,function(e,t){(function(i,a){e.exports=a(Vn())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,d=a.enc;d.Utf16=d.Utf16BE={stringify:function(f){for(var g=f.words,E=f.sigBytes,y=[],C=0;C<E;C+=2){var w=g[C>>>2]>>>16-C%4*8&65535;y.push(String.fromCharCode(w))}return y.join("")},parse:function(f){for(var g=f.length,E=[],y=0;y<g;y++)E[y>>>1]|=f.charCodeAt(y)<<16-y%2*16;return u.create(E,g*2)}},d.Utf16LE={stringify:function(f){for(var g=f.words,E=f.sigBytes,y=[],C=0;C<E;C+=2){var w=p(g[C>>>2]>>>16-C%4*8&65535);y.push(String.fromCharCode(w))}return y.join("")},parse:function(f){for(var g=f.length,E=[],y=0;y<g;y++)E[y>>>1]|=p(f.charCodeAt(y)<<16-y%2*16);return u.create(E,g*2)}};function p(f){return f<<8&4278255360|f>>>8&16711935}}(),i.enc.Utf16})}(ape)),tE}var nE={},cpe={get exports(){return nE},set exports(e){nE=e}},O4;function Kh(){return O4||(O4=1,function(e,t){(function(i,a){e.exports=a(Vn())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,d=a.enc;d.Base64={stringify:function(f){var g=f.words,E=f.sigBytes,y=this._map;f.clamp();for(var C=[],w=0;w<E;w+=3)for(var R=g[w>>>2]>>>24-w%4*8&255,O=g[w+1>>>2]>>>24-(w+1)%4*8&255,k=g[w+2>>>2]>>>24-(w+2)%4*8&255,A=R<<16|O<<8|k,x=0;x<4&&w+x*.75<E;x++)C.push(y.charAt(A>>>6*(3-x)&63));var P=y.charAt(64);if(P)for(;C.length%4;)C.push(P);return C.join("")},parse:function(f){var g=f.length,E=this._map,y=this._reverseMap;if(!y){y=this._reverseMap=[];for(var C=0;C<E.length;C++)y[E.charCodeAt(C)]=C}var w=E.charAt(64);if(w){var R=f.indexOf(w);R!==-1&&(g=R)}return p(f,g,y)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function p(f,g,E){for(var y=[],C=0,w=0;w<g;w++)if(w%4){var R=E[f.charCodeAt(w-1)]<<w%4*2,O=E[f.charCodeAt(w)]>>>6-w%4*2,k=R|O;y[C>>>2]|=k<<24-C%4*8,C++}return u.create(y,C)}}(),i.enc.Base64})}(cpe)),nE}var rE={},lpe={get exports(){return rE},set exports(e){rE=e}},A4;function upe(){return A4||(A4=1,function(e,t){(function(i,a){e.exports=a(Vn())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,d=a.enc;d.Base64url={stringify:function(f,g=!0){var E=f.words,y=f.sigBytes,C=g?this._safe_map:this._map;f.clamp();for(var w=[],R=0;R<y;R+=3)for(var O=E[R>>>2]>>>24-R%4*8&255,k=E[R+1>>>2]>>>24-(R+1)%4*8&255,A=E[R+2>>>2]>>>24-(R+2)%4*8&255,x=O<<16|k<<8|A,P=0;P<4&&R+P*.75<y;P++)w.push(C.charAt(x>>>6*(3-P)&63));var M=C.charAt(64);if(M)for(;w.length%4;)w.push(M);return w.join("")},parse:function(f,g=!0){var E=f.length,y=g?this._safe_map:this._map,C=this._reverseMap;if(!C){C=this._reverseMap=[];for(var w=0;w<y.length;w++)C[y.charCodeAt(w)]=w}var R=y.charAt(64);if(R){var O=f.indexOf(R);O!==-1&&(E=O)}return p(f,E,C)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function p(f,g,E){for(var y=[],C=0,w=0;w<g;w++)if(w%4){var R=E[f.charCodeAt(w-1)]<<w%4*2,O=E[f.charCodeAt(w)]>>>6-w%4*2,k=R|O;y[C>>>2]|=k<<24-C%4*8,C++}return u.create(y,C)}}(),i.enc.Base64url})}(lpe)),rE}var iE={},dpe={get exports(){return iE},set exports(e){iE=e}},N4;function Yh(){return N4||(N4=1,function(e,t){(function(i,a){e.exports=a(Vn())})(Xt,function(i){return function(a){var c=i,u=c.lib,d=u.WordArray,p=u.Hasher,f=c.algo,g=[];(function(){for(var O=0;O<64;O++)g[O]=a.abs(a.sin(O+1))*4294967296|0})();var E=f.MD5=p.extend({_doReset:function(){this._hash=new d.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(O,k){for(var A=0;A<16;A++){var x=k+A,P=O[x];O[x]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}var M=this._hash.words,B=O[k+0],F=O[k+1],j=O[k+2],$=O[k+3],ee=O[k+4],H=O[k+5],J=O[k+6],X=O[k+7],W=O[k+8],Z=O[k+9],ne=O[k+10],ie=O[k+11],de=O[k+12],oe=O[k+13],fe=O[k+14],ge=O[k+15],ae=M[0],se=M[1],he=M[2],pe=M[3];ae=y(ae,se,he,pe,B,7,g[0]),pe=y(pe,ae,se,he,F,12,g[1]),he=y(he,pe,ae,se,j,17,g[2]),se=y(se,he,pe,ae,$,22,g[3]),ae=y(ae,se,he,pe,ee,7,g[4]),pe=y(pe,ae,se,he,H,12,g[5]),he=y(he,pe,ae,se,J,17,g[6]),se=y(se,he,pe,ae,X,22,g[7]),ae=y(ae,se,he,pe,W,7,g[8]),pe=y(pe,ae,se,he,Z,12,g[9]),he=y(he,pe,ae,se,ne,17,g[10]),se=y(se,he,pe,ae,ie,22,g[11]),ae=y(ae,se,he,pe,de,7,g[12]),pe=y(pe,ae,se,he,oe,12,g[13]),he=y(he,pe,ae,se,fe,17,g[14]),se=y(se,he,pe,ae,ge,22,g[15]),ae=C(ae,se,he,pe,F,5,g[16]),pe=C(pe,ae,se,he,J,9,g[17]),he=C(he,pe,ae,se,ie,14,g[18]),se=C(se,he,pe,ae,B,20,g[19]),ae=C(ae,se,he,pe,H,5,g[20]),pe=C(pe,ae,se,he,ne,9,g[21]),he=C(he,pe,ae,se,ge,14,g[22]),se=C(se,he,pe,ae,ee,20,g[23]),ae=C(ae,se,he,pe,Z,5,g[24]),pe=C(pe,ae,se,he,fe,9,g[25]),he=C(he,pe,ae,se,$,14,g[26]),se=C(se,he,pe,ae,W,20,g[27]),ae=C(ae,se,he,pe,oe,5,g[28]),pe=C(pe,ae,se,he,j,9,g[29]),he=C(he,pe,ae,se,X,14,g[30]),se=C(se,he,pe,ae,de,20,g[31]),ae=w(ae,se,he,pe,H,4,g[32]),pe=w(pe,ae,se,he,W,11,g[33]),he=w(he,pe,ae,se,ie,16,g[34]),se=w(se,he,pe,ae,fe,23,g[35]),ae=w(ae,se,he,pe,F,4,g[36]),pe=w(pe,ae,se,he,ee,11,g[37]),he=w(he,pe,ae,se,X,16,g[38]),se=w(se,he,pe,ae,ne,23,g[39]),ae=w(ae,se,he,pe,oe,4,g[40]),pe=w(pe,ae,se,he,B,11,g[41]),he=w(he,pe,ae,se,$,16,g[42]),se=w(se,he,pe,ae,J,23,g[43]),ae=w(ae,se,he,pe,Z,4,g[44]),pe=w(pe,ae,se,he,de,11,g[45]),he=w(he,pe,ae,se,ge,16,g[46]),se=w(se,he,pe,ae,j,23,g[47]),ae=R(ae,se,he,pe,B,6,g[48]),pe=R(pe,ae,se,he,X,10,g[49]),he=R(he,pe,ae,se,fe,15,g[50]),se=R(se,he,pe,ae,H,21,g[51]),ae=R(ae,se,he,pe,de,6,g[52]),pe=R(pe,ae,se,he,$,10,g[53]),he=R(he,pe,ae,se,ne,15,g[54]),se=R(se,he,pe,ae,F,21,g[55]),ae=R(ae,se,he,pe,W,6,g[56]),pe=R(pe,ae,se,he,ge,10,g[57]),he=R(he,pe,ae,se,J,15,g[58]),se=R(se,he,pe,ae,oe,21,g[59]),ae=R(ae,se,he,pe,ee,6,g[60]),pe=R(pe,ae,se,he,ie,10,g[61]),he=R(he,pe,ae,se,j,15,g[62]),se=R(se,he,pe,ae,Z,21,g[63]),M[0]=M[0]+ae|0,M[1]=M[1]+se|0,M[2]=M[2]+he|0,M[3]=M[3]+pe|0},_doFinalize:function(){var O=this._data,k=O.words,A=this._nDataBytes*8,x=O.sigBytes*8;k[x>>>5]|=128<<24-x%32;var P=a.floor(A/4294967296),M=A;k[(x+64>>>9<<4)+15]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,k[(x+64>>>9<<4)+14]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,O.sigBytes=(k.length+1)*4,this._process();for(var B=this._hash,F=B.words,j=0;j<4;j++){var $=F[j];F[j]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360}return B},clone:function(){var O=p.clone.call(this);return O._hash=this._hash.clone(),O}});function y(O,k,A,x,P,M,B){var F=O+(k&A|~k&x)+P+B;return(F<<M|F>>>32-M)+k}function C(O,k,A,x,P,M,B){var F=O+(k&x|A&~x)+P+B;return(F<<M|F>>>32-M)+k}function w(O,k,A,x,P,M,B){var F=O+(k^A^x)+P+B;return(F<<M|F>>>32-M)+k}function R(O,k,A,x,P,M,B){var F=O+(A^(k|~x))+P+B;return(F<<M|F>>>32-M)+k}c.MD5=p._createHelper(E),c.HmacMD5=p._createHmacHelper(E)}(Math),i.MD5})}(dpe)),iE}var oE={},hpe={get exports(){return oE},set exports(e){oE=e}},x4;function L1(){return x4||(x4=1,function(e,t){(function(i,a){e.exports=a(Vn())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,d=c.Hasher,p=a.algo,f=[],g=p.SHA1=d.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(E,y){for(var C=this._hash.words,w=C[0],R=C[1],O=C[2],k=C[3],A=C[4],x=0;x<80;x++){if(x<16)f[x]=E[y+x]|0;else{var P=f[x-3]^f[x-8]^f[x-14]^f[x-16];f[x]=P<<1|P>>>31}var M=(w<<5|w>>>27)+A+f[x];x<20?M+=(R&O|~R&k)+1518500249:x<40?M+=(R^O^k)+1859775393:x<60?M+=(R&O|R&k|O&k)-1894007588:M+=(R^O^k)-899497514,A=k,k=O,O=R<<30|R>>>2,R=w,w=M}C[0]=C[0]+w|0,C[1]=C[1]+R|0,C[2]=C[2]+O|0,C[3]=C[3]+k|0,C[4]=C[4]+A|0},_doFinalize:function(){var E=this._data,y=E.words,C=this._nDataBytes*8,w=E.sigBytes*8;return y[w>>>5]|=128<<24-w%32,y[(w+64>>>9<<4)+14]=Math.floor(C/4294967296),y[(w+64>>>9<<4)+15]=C,E.sigBytes=y.length*4,this._process(),this._hash},clone:function(){var E=d.clone.call(this);return E._hash=this._hash.clone(),E}});a.SHA1=d._createHelper(g),a.HmacSHA1=d._createHmacHelper(g)}(),i.SHA1})}(hpe)),oE}var aE={},ppe={get exports(){return aE},set exports(e){aE=e}},P4;function g6(){return P4||(P4=1,function(e,t){(function(i,a){e.exports=a(Vn())})(Xt,function(i){return function(a){var c=i,u=c.lib,d=u.WordArray,p=u.Hasher,f=c.algo,g=[],E=[];(function(){function w(A){for(var x=a.sqrt(A),P=2;P<=x;P++)if(!(A%P))return!1;return!0}function R(A){return(A-(A|0))*4294967296|0}for(var O=2,k=0;k<64;)w(O)&&(k<8&&(g[k]=R(a.pow(O,1/2))),E[k]=R(a.pow(O,1/3)),k++),O++})();var y=[],C=f.SHA256=p.extend({_doReset:function(){this._hash=new d.init(g.slice(0))},_doProcessBlock:function(w,R){for(var O=this._hash.words,k=O[0],A=O[1],x=O[2],P=O[3],M=O[4],B=O[5],F=O[6],j=O[7],$=0;$<64;$++){if($<16)y[$]=w[R+$]|0;else{var ee=y[$-15],H=(ee<<25|ee>>>7)^(ee<<14|ee>>>18)^ee>>>3,J=y[$-2],X=(J<<15|J>>>17)^(J<<13|J>>>19)^J>>>10;y[$]=H+y[$-7]+X+y[$-16]}var W=M&B^~M&F,Z=k&A^k&x^A&x,ne=(k<<30|k>>>2)^(k<<19|k>>>13)^(k<<10|k>>>22),ie=(M<<26|M>>>6)^(M<<21|M>>>11)^(M<<7|M>>>25),de=j+ie+W+E[$]+y[$],oe=ne+Z;j=F,F=B,B=M,M=P+de|0,P=x,x=A,A=k,k=de+oe|0}O[0]=O[0]+k|0,O[1]=O[1]+A|0,O[2]=O[2]+x|0,O[3]=O[3]+P|0,O[4]=O[4]+M|0,O[5]=O[5]+B|0,O[6]=O[6]+F|0,O[7]=O[7]+j|0},_doFinalize:function(){var w=this._data,R=w.words,O=this._nDataBytes*8,k=w.sigBytes*8;return R[k>>>5]|=128<<24-k%32,R[(k+64>>>9<<4)+14]=a.floor(O/4294967296),R[(k+64>>>9<<4)+15]=O,w.sigBytes=R.length*4,this._process(),this._hash},clone:function(){var w=p.clone.call(this);return w._hash=this._hash.clone(),w}});c.SHA256=p._createHelper(C),c.HmacSHA256=p._createHmacHelper(C)}(Math),i.SHA256})}(ppe)),aE}var sE={},fpe={get exports(){return sE},set exports(e){sE=e}},D4;function mpe(){return D4||(D4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),g6())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,d=a.algo,p=d.SHA256,f=d.SHA224=p.extend({_doReset:function(){this._hash=new u.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var g=p._doFinalize.call(this);return g.sigBytes-=4,g}});a.SHA224=p._createHelper(f),a.HmacSHA224=p._createHmacHelper(f)}(),i.SHA224})}(fpe)),sE}var cE={},gpe={get exports(){return cE},set exports(e){cE=e}},k4;function v6(){return k4||(k4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),j_())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.Hasher,d=a.x64,p=d.Word,f=d.WordArray,g=a.algo;function E(){return p.create.apply(p,arguments)}var y=[E(1116352408,3609767458),E(1899447441,602891725),E(3049323471,3964484399),E(3921009573,2173295548),E(961987163,4081628472),E(1508970993,3053834265),E(2453635748,2937671579),E(2870763221,3664609560),E(3624381080,2734883394),E(310598401,1164996542),E(607225278,1323610764),E(1426881987,3590304994),E(1925078388,4068182383),E(2162078206,991336113),E(2614888103,633803317),E(3248222580,3479774868),E(3835390401,2666613458),E(4022224774,944711139),E(264347078,2341262773),E(604807628,2007800933),E(770255983,1495990901),E(1249150122,1856431235),E(1555081692,3175218132),E(1996064986,2198950837),E(2554220882,3999719339),E(2821834349,766784016),E(2952996808,2566594879),E(3210313671,3203337956),E(3336571891,1034457026),E(3584528711,2466948901),E(113926993,3758326383),E(338241895,168717936),E(666307205,1188179964),E(773529912,1546045734),E(1294757372,1522805485),E(1396182291,2643833823),E(1695183700,2343527390),E(1986661051,1014477480),E(2177026350,1206759142),E(2456956037,344077627),E(2730485921,1290863460),E(2820302411,3158454273),E(3259730800,3505952657),E(3345764771,106217008),E(3516065817,3606008344),E(3600352804,1432725776),E(4094571909,1467031594),E(275423344,851169720),E(430227734,3100823752),E(506948616,1363258195),E(659060556,3750685593),E(883997877,3785050280),E(958139571,3318307427),E(1322822218,3812723403),E(1537002063,2003034995),E(1747873779,3602036899),E(1955562222,1575990012),E(2024104815,1125592928),E(2227730452,2716904306),E(2361852424,442776044),E(2428436474,593698344),E(2756734187,3733110249),E(3204031479,2999351573),E(3329325298,3815920427),E(3391569614,3928383900),E(3515267271,566280711),E(3940187606,3454069534),E(4118630271,4000239992),E(116418474,1914138554),E(174292421,2731055270),E(289380356,3203993006),E(460393269,320620315),E(685471733,587496836),E(852142971,1086792851),E(1017036298,365543100),E(1126000580,2618297676),E(1288033470,3409855158),E(1501505948,4234509866),E(1607167915,987167468),E(1816402316,1246189591)],C=[];(function(){for(var R=0;R<80;R++)C[R]=E()})();var w=g.SHA512=u.extend({_doReset:function(){this._hash=new f.init([new p.init(1779033703,4089235720),new p.init(3144134277,2227873595),new p.init(1013904242,4271175723),new p.init(2773480762,1595750129),new p.init(1359893119,2917565137),new p.init(2600822924,725511199),new p.init(528734635,4215389547),new p.init(1541459225,327033209)])},_doProcessBlock:function(R,O){for(var k=this._hash.words,A=k[0],x=k[1],P=k[2],M=k[3],B=k[4],F=k[5],j=k[6],$=k[7],ee=A.high,H=A.low,J=x.high,X=x.low,W=P.high,Z=P.low,ne=M.high,ie=M.low,de=B.high,oe=B.low,fe=F.high,ge=F.low,ae=j.high,se=j.low,he=$.high,pe=$.low,Oe=ee,be=H,Ne=J,Ae=X,at=W,it=Z,ze=ne,ht=ie,Pe=de,Ye=oe,lt=fe,At=ge,_t=ae,Be=se,$e=he,ke=pe,et=0;et<80;et++){var ft,Rt,on=C[et];if(et<16)Rt=on.high=R[O+et*2]|0,ft=on.low=R[O+et*2+1]|0;else{var dn=C[et-15],jt=dn.high,zt=dn.low,Mn=(jt>>>1|zt<<31)^(jt>>>8|zt<<24)^jt>>>7,_n=(zt>>>1|jt<<31)^(zt>>>8|jt<<24)^(zt>>>7|jt<<25),Lt=C[et-2],xt=Lt.high,en=Lt.low,st=(xt>>>19|en<<13)^(xt<<3|en>>>29)^xt>>>6,mt=(en>>>19|xt<<13)^(en<<3|xt>>>29)^(en>>>6|xt<<26),$t=C[et-7],yr=$t.high,Rn=$t.low,fr=C[et-16],kn=fr.high,tt=fr.low;ft=_n+Rn,Rt=Mn+yr+(ft>>>0<_n>>>0?1:0),ft=ft+mt,Rt=Rt+st+(ft>>>0<mt>>>0?1:0),ft=ft+tt,Rt=Rt+kn+(ft>>>0<tt>>>0?1:0),on.high=Rt,on.low=ft}var gt=Pe&lt^~Pe&_t,gn=Ye&At^~Ye&Be,Mt=Oe&Ne^Oe&at^Ne&at,Dr=be&Ae^be&it^Ae&it,mr=(Oe>>>28|be<<4)^(Oe<<30|be>>>2)^(Oe<<25|be>>>7),Ln=(be>>>28|Oe<<4)^(be<<30|Oe>>>2)^(be<<25|Oe>>>7),je=(Pe>>>14|Ye<<18)^(Pe>>>18|Ye<<14)^(Pe<<23|Ye>>>9),Qe=(Ye>>>14|Pe<<18)^(Ye>>>18|Pe<<14)^(Ye<<23|Pe>>>9),Ue=y[et],yt=Ue.high,Ut=Ue.low,Dt=ke+Qe,sr=$e+je+(Dt>>>0<ke>>>0?1:0),Dt=Dt+gn,sr=sr+gt+(Dt>>>0<gn>>>0?1:0),Dt=Dt+Ut,sr=sr+yt+(Dt>>>0<Ut>>>0?1:0),Dt=Dt+ft,sr=sr+Rt+(Dt>>>0<ft>>>0?1:0),zn=Ln+Dr,Xr=mr+Mt+(zn>>>0<Ln>>>0?1:0);$e=_t,ke=Be,_t=lt,Be=At,lt=Pe,At=Ye,Ye=ht+Dt|0,Pe=ze+sr+(Ye>>>0<ht>>>0?1:0)|0,ze=at,ht=it,at=Ne,it=Ae,Ne=Oe,Ae=be,be=Dt+zn|0,Oe=sr+Xr+(be>>>0<Dt>>>0?1:0)|0}H=A.low=H+be,A.high=ee+Oe+(H>>>0<be>>>0?1:0),X=x.low=X+Ae,x.high=J+Ne+(X>>>0<Ae>>>0?1:0),Z=P.low=Z+it,P.high=W+at+(Z>>>0<it>>>0?1:0),ie=M.low=ie+ht,M.high=ne+ze+(ie>>>0<ht>>>0?1:0),oe=B.low=oe+Ye,B.high=de+Pe+(oe>>>0<Ye>>>0?1:0),ge=F.low=ge+At,F.high=fe+lt+(ge>>>0<At>>>0?1:0),se=j.low=se+Be,j.high=ae+_t+(se>>>0<Be>>>0?1:0),pe=$.low=pe+ke,$.high=he+$e+(pe>>>0<ke>>>0?1:0)},_doFinalize:function(){var R=this._data,O=R.words,k=this._nDataBytes*8,A=R.sigBytes*8;O[A>>>5]|=128<<24-A%32,O[(A+128>>>10<<5)+30]=Math.floor(k/4294967296),O[(A+128>>>10<<5)+31]=k,R.sigBytes=O.length*4,this._process();var x=this._hash.toX32();return x},clone:function(){var R=u.clone.call(this);return R._hash=this._hash.clone(),R},blockSize:1024/32});a.SHA512=u._createHelper(w),a.HmacSHA512=u._createHmacHelper(w)}(),i.SHA512})}(gpe)),cE}var lE={},vpe={get exports(){return lE},set exports(e){lE=e}},L4;function Epe(){return L4||(L4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),j_(),v6())})(Xt,function(i){return function(){var a=i,c=a.x64,u=c.Word,d=c.WordArray,p=a.algo,f=p.SHA512,g=p.SHA384=f.extend({_doReset:function(){this._hash=new d.init([new u.init(3418070365,3238371032),new u.init(1654270250,914150663),new u.init(2438529370,812702999),new u.init(355462360,4144912697),new u.init(1731405415,4290775857),new u.init(2394180231,1750603025),new u.init(3675008525,1694076839),new u.init(1203062813,3204075428)])},_doFinalize:function(){var E=f._doFinalize.call(this);return E.sigBytes-=16,E}});a.SHA384=f._createHelper(g),a.HmacSHA384=f._createHmacHelper(g)}(),i.SHA384})}(vpe)),lE}var uE={},_pe={get exports(){return uE},set exports(e){uE=e}},M4;function Spe(){return M4||(M4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),j_())})(Xt,function(i){return function(a){var c=i,u=c.lib,d=u.WordArray,p=u.Hasher,f=c.x64,g=f.Word,E=c.algo,y=[],C=[],w=[];(function(){for(var k=1,A=0,x=0;x<24;x++){y[k+5*A]=(x+1)*(x+2)/2%64;var P=A%5,M=(2*k+3*A)%5;k=P,A=M}for(var k=0;k<5;k++)for(var A=0;A<5;A++)C[k+5*A]=A+(2*k+3*A)%5*5;for(var B=1,F=0;F<24;F++){for(var j=0,$=0,ee=0;ee<7;ee++){if(B&1){var H=(1<<ee)-1;H<32?$^=1<<H:j^=1<<H-32}B&128?B=B<<1^113:B<<=1}w[F]=g.create(j,$)}})();var R=[];(function(){for(var k=0;k<25;k++)R[k]=g.create()})();var O=E.SHA3=p.extend({cfg:p.cfg.extend({outputLength:512}),_doReset:function(){for(var k=this._state=[],A=0;A<25;A++)k[A]=new g.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(k,A){for(var x=this._state,P=this.blockSize/2,M=0;M<P;M++){var B=k[A+2*M],F=k[A+2*M+1];B=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,F=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360;var j=x[M];j.high^=F,j.low^=B}for(var $=0;$<24;$++){for(var ee=0;ee<5;ee++){for(var H=0,J=0,X=0;X<5;X++){var j=x[ee+5*X];H^=j.high,J^=j.low}var W=R[ee];W.high=H,W.low=J}for(var ee=0;ee<5;ee++)for(var Z=R[(ee+4)%5],ne=R[(ee+1)%5],ie=ne.high,de=ne.low,H=Z.high^(ie<<1|de>>>31),J=Z.low^(de<<1|ie>>>31),X=0;X<5;X++){var j=x[ee+5*X];j.high^=H,j.low^=J}for(var oe=1;oe<25;oe++){var H,J,j=x[oe],fe=j.high,ge=j.low,ae=y[oe];ae<32?(H=fe<<ae|ge>>>32-ae,J=ge<<ae|fe>>>32-ae):(H=ge<<ae-32|fe>>>64-ae,J=fe<<ae-32|ge>>>64-ae);var se=R[C[oe]];se.high=H,se.low=J}var he=R[0],pe=x[0];he.high=pe.high,he.low=pe.low;for(var ee=0;ee<5;ee++)for(var X=0;X<5;X++){var oe=ee+5*X,j=x[oe],Oe=R[oe],be=R[(ee+1)%5+5*X],Ne=R[(ee+2)%5+5*X];j.high=Oe.high^~be.high&Ne.high,j.low=Oe.low^~be.low&Ne.low}var j=x[0],Ae=w[$];j.high^=Ae.high,j.low^=Ae.low}},_doFinalize:function(){var k=this._data,A=k.words;this._nDataBytes*8;var x=k.sigBytes*8,P=this.blockSize*32;A[x>>>5]|=1<<24-x%32,A[(a.ceil((x+1)/P)*P>>>5)-1]|=128,k.sigBytes=A.length*4,this._process();for(var M=this._state,B=this.cfg.outputLength/8,F=B/8,j=[],$=0;$<F;$++){var ee=M[$],H=ee.high,J=ee.low;H=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360,J=(J<<8|J>>>24)&16711935|(J<<24|J>>>8)&4278255360,j.push(J),j.push(H)}return new d.init(j,B)},clone:function(){for(var k=p.clone.call(this),A=k._state=this._state.slice(0),x=0;x<25;x++)A[x]=A[x].clone();return k}});c.SHA3=p._createHelper(O),c.HmacSHA3=p._createHmacHelper(O)}(Math),i.SHA3})}(_pe)),uE}var dE={},ype={get exports(){return dE},set exports(e){dE=e}},U4;function Cpe(){return U4||(U4=1,function(e,t){(function(i,a){e.exports=a(Vn())})(Xt,function(i){/** @preserve
			(c) 2012 by CÃ©dric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(a){var c=i,u=c.lib,d=u.WordArray,p=u.Hasher,f=c.algo,g=d.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),E=d.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),y=d.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),C=d.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),w=d.create([0,1518500249,1859775393,2400959708,2840853838]),R=d.create([1352829926,1548603684,1836072691,2053994217,0]),O=f.RIPEMD160=p.extend({_doReset:function(){this._hash=d.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(F,j){for(var $=0;$<16;$++){var ee=j+$,H=F[ee];F[ee]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360}var J=this._hash.words,X=w.words,W=R.words,Z=g.words,ne=E.words,ie=y.words,de=C.words,oe,fe,ge,ae,se,he,pe,Oe,be,Ne;he=oe=J[0],pe=fe=J[1],Oe=ge=J[2],be=ae=J[3],Ne=se=J[4];for(var Ae,$=0;$<80;$+=1)Ae=oe+F[j+Z[$]]|0,$<16?Ae+=k(fe,ge,ae)+X[0]:$<32?Ae+=A(fe,ge,ae)+X[1]:$<48?Ae+=x(fe,ge,ae)+X[2]:$<64?Ae+=P(fe,ge,ae)+X[3]:Ae+=M(fe,ge,ae)+X[4],Ae=Ae|0,Ae=B(Ae,ie[$]),Ae=Ae+se|0,oe=se,se=ae,ae=B(ge,10),ge=fe,fe=Ae,Ae=he+F[j+ne[$]]|0,$<16?Ae+=M(pe,Oe,be)+W[0]:$<32?Ae+=P(pe,Oe,be)+W[1]:$<48?Ae+=x(pe,Oe,be)+W[2]:$<64?Ae+=A(pe,Oe,be)+W[3]:Ae+=k(pe,Oe,be)+W[4],Ae=Ae|0,Ae=B(Ae,de[$]),Ae=Ae+Ne|0,he=Ne,Ne=be,be=B(Oe,10),Oe=pe,pe=Ae;Ae=J[1]+ge+be|0,J[1]=J[2]+ae+Ne|0,J[2]=J[3]+se+he|0,J[3]=J[4]+oe+pe|0,J[4]=J[0]+fe+Oe|0,J[0]=Ae},_doFinalize:function(){var F=this._data,j=F.words,$=this._nDataBytes*8,ee=F.sigBytes*8;j[ee>>>5]|=128<<24-ee%32,j[(ee+64>>>9<<4)+14]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360,F.sigBytes=(j.length+1)*4,this._process();for(var H=this._hash,J=H.words,X=0;X<5;X++){var W=J[X];J[X]=(W<<8|W>>>24)&16711935|(W<<24|W>>>8)&4278255360}return H},clone:function(){var F=p.clone.call(this);return F._hash=this._hash.clone(),F}});function k(F,j,$){return F^j^$}function A(F,j,$){return F&j|~F&$}function x(F,j,$){return(F|~j)^$}function P(F,j,$){return F&$|j&~$}function M(F,j,$){return F^(j|~$)}function B(F,j){return F<<j|F>>>32-j}c.RIPEMD160=p._createHelper(O),c.HmacRIPEMD160=p._createHmacHelper(O)}(),i.RIPEMD160})}(ype)),dE}var hE={},bpe={get exports(){return hE},set exports(e){hE=e}},V4;function M1(){return V4||(V4=1,function(e,t){(function(i,a){e.exports=a(Vn())})(Xt,function(i){(function(){var a=i,c=a.lib,u=c.Base,d=a.enc,p=d.Utf8,f=a.algo;f.HMAC=u.extend({init:function(g,E){g=this._hasher=new g.init,typeof E=="string"&&(E=p.parse(E));var y=g.blockSize,C=y*4;E.sigBytes>C&&(E=g.finalize(E)),E.clamp();for(var w=this._oKey=E.clone(),R=this._iKey=E.clone(),O=w.words,k=R.words,A=0;A<y;A++)O[A]^=1549556828,k[A]^=909522486;w.sigBytes=R.sigBytes=C,this.reset()},reset:function(){var g=this._hasher;g.reset(),g.update(this._iKey)},update:function(g){return this._hasher.update(g),this},finalize:function(g){var E=this._hasher,y=E.finalize(g);E.reset();var C=E.finalize(this._oKey.clone().concat(y));return C}})})()})}(bpe)),hE}var pE={},Tpe={get exports(){return pE},set exports(e){pE=e}},F4;function Rpe(){return F4||(F4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),L1(),M1())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.Base,d=c.WordArray,p=a.algo,f=p.SHA1,g=p.HMAC,E=p.PBKDF2=u.extend({cfg:u.extend({keySize:128/32,hasher:f,iterations:1}),init:function(y){this.cfg=this.cfg.extend(y)},compute:function(y,C){for(var w=this.cfg,R=g.create(w.hasher,y),O=d.create(),k=d.create([1]),A=O.words,x=k.words,P=w.keySize,M=w.iterations;A.length<P;){var B=R.update(C).finalize(k);R.reset();for(var F=B.words,j=F.length,$=B,ee=1;ee<M;ee++){$=R.finalize($),R.reset();for(var H=$.words,J=0;J<j;J++)F[J]^=H[J]}O.concat(B),x[0]++}return O.sigBytes=P*4,O}});a.PBKDF2=function(y,C,w){return E.create(w).compute(y,C)}}(),i.PBKDF2})}(Tpe)),pE}var fE={},Ipe={get exports(){return fE},set exports(e){fE=e}},B4;function zu(){return B4||(B4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),L1(),M1())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.Base,d=c.WordArray,p=a.algo,f=p.MD5,g=p.EvpKDF=u.extend({cfg:u.extend({keySize:128/32,hasher:f,iterations:1}),init:function(E){this.cfg=this.cfg.extend(E)},compute:function(E,y){for(var C,w=this.cfg,R=w.hasher.create(),O=d.create(),k=O.words,A=w.keySize,x=w.iterations;k.length<A;){C&&R.update(C),C=R.update(E).finalize(y),R.reset();for(var P=1;P<x;P++)C=R.finalize(C),R.reset();O.concat(C)}return O.sigBytes=A*4,O}});a.EvpKDF=function(E,y,C){return g.create(C).compute(E,y)}}(),i.EvpKDF})}(Ipe)),fE}var mE={},wpe={get exports(){return mE},set exports(e){mE=e}},j4;function to(){return j4||(j4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),zu())})(Xt,function(i){i.lib.Cipher||function(a){var c=i,u=c.lib,d=u.Base,p=u.WordArray,f=u.BufferedBlockAlgorithm,g=c.enc;g.Utf8;var E=g.Base64,y=c.algo,C=y.EvpKDF,w=u.Cipher=f.extend({cfg:d.extend(),createEncryptor:function(H,J){return this.create(this._ENC_XFORM_MODE,H,J)},createDecryptor:function(H,J){return this.create(this._DEC_XFORM_MODE,H,J)},init:function(H,J,X){this.cfg=this.cfg.extend(X),this._xformMode=H,this._key=J,this.reset()},reset:function(){f.reset.call(this),this._doReset()},process:function(H){return this._append(H),this._process()},finalize:function(H){H&&this._append(H);var J=this._doFinalize();return J},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function H(J){return typeof J=="string"?ee:F}return function(J){return{encrypt:function(X,W,Z){return H(W).encrypt(J,X,W,Z)},decrypt:function(X,W,Z){return H(W).decrypt(J,X,W,Z)}}}}()});u.StreamCipher=w.extend({_doFinalize:function(){var H=this._process(!0);return H},blockSize:1});var R=c.mode={},O=u.BlockCipherMode=d.extend({createEncryptor:function(H,J){return this.Encryptor.create(H,J)},createDecryptor:function(H,J){return this.Decryptor.create(H,J)},init:function(H,J){this._cipher=H,this._iv=J}}),k=R.CBC=function(){var H=O.extend();H.Encryptor=H.extend({processBlock:function(X,W){var Z=this._cipher,ne=Z.blockSize;J.call(this,X,W,ne),Z.encryptBlock(X,W),this._prevBlock=X.slice(W,W+ne)}}),H.Decryptor=H.extend({processBlock:function(X,W){var Z=this._cipher,ne=Z.blockSize,ie=X.slice(W,W+ne);Z.decryptBlock(X,W),J.call(this,X,W,ne),this._prevBlock=ie}});function J(X,W,Z){var ne,ie=this._iv;ie?(ne=ie,this._iv=a):ne=this._prevBlock;for(var de=0;de<Z;de++)X[W+de]^=ne[de]}return H}(),A=c.pad={},x=A.Pkcs7={pad:function(H,J){for(var X=J*4,W=X-H.sigBytes%X,Z=W<<24|W<<16|W<<8|W,ne=[],ie=0;ie<W;ie+=4)ne.push(Z);var de=p.create(ne,W);H.concat(de)},unpad:function(H){var J=H.words[H.sigBytes-1>>>2]&255;H.sigBytes-=J}};u.BlockCipher=w.extend({cfg:w.cfg.extend({mode:k,padding:x}),reset:function(){var H;w.reset.call(this);var J=this.cfg,X=J.iv,W=J.mode;this._xformMode==this._ENC_XFORM_MODE?H=W.createEncryptor:(H=W.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==H?this._mode.init(this,X&&X.words):(this._mode=H.call(W,this,X&&X.words),this._mode.__creator=H)},_doProcessBlock:function(H,J){this._mode.processBlock(H,J)},_doFinalize:function(){var H,J=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(J.pad(this._data,this.blockSize),H=this._process(!0)):(H=this._process(!0),J.unpad(H)),H},blockSize:128/32});var P=u.CipherParams=d.extend({init:function(H){this.mixIn(H)},toString:function(H){return(H||this.formatter).stringify(this)}}),M=c.format={},B=M.OpenSSL={stringify:function(H){var J,X=H.ciphertext,W=H.salt;return W?J=p.create([1398893684,1701076831]).concat(W).concat(X):J=X,J.toString(E)},parse:function(H){var J,X=E.parse(H),W=X.words;return W[0]==1398893684&&W[1]==1701076831&&(J=p.create(W.slice(2,4)),W.splice(0,4),X.sigBytes-=16),P.create({ciphertext:X,salt:J})}},F=u.SerializableCipher=d.extend({cfg:d.extend({format:B}),encrypt:function(H,J,X,W){W=this.cfg.extend(W);var Z=H.createEncryptor(X,W),ne=Z.finalize(J),ie=Z.cfg;return P.create({ciphertext:ne,key:X,iv:ie.iv,algorithm:H,mode:ie.mode,padding:ie.padding,blockSize:H.blockSize,formatter:W.format})},decrypt:function(H,J,X,W){W=this.cfg.extend(W),J=this._parse(J,W.format);var Z=H.createDecryptor(X,W).finalize(J.ciphertext);return Z},_parse:function(H,J){return typeof H=="string"?J.parse(H,this):H}}),j=c.kdf={},$=j.OpenSSL={execute:function(H,J,X,W){W||(W=p.random(64/8));var Z=C.create({keySize:J+X}).compute(H,W),ne=p.create(Z.words.slice(J),X*4);return Z.sigBytes=J*4,P.create({key:Z,iv:ne,salt:W})}},ee=u.PasswordBasedCipher=F.extend({cfg:F.cfg.extend({kdf:$}),encrypt:function(H,J,X,W){W=this.cfg.extend(W);var Z=W.kdf.execute(X,H.keySize,H.ivSize);W.iv=Z.iv;var ne=F.encrypt.call(this,H,J,Z.key,W);return ne.mixIn(Z),ne},decrypt:function(H,J,X,W){W=this.cfg.extend(W),J=this._parse(J,W.format);var Z=W.kdf.execute(X,H.keySize,H.ivSize,J.salt);W.iv=Z.iv;var ne=F.decrypt.call(this,H,J,Z.key,W);return ne}})}()})}(wpe)),mE}var gE={},Ope={get exports(){return gE},set exports(e){gE=e}},$4;function Ape(){return $4||($4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),to())})(Xt,function(i){return i.mode.CFB=function(){var a=i.lib.BlockCipherMode.extend();a.Encryptor=a.extend({processBlock:function(u,d){var p=this._cipher,f=p.blockSize;c.call(this,u,d,f,p),this._prevBlock=u.slice(d,d+f)}}),a.Decryptor=a.extend({processBlock:function(u,d){var p=this._cipher,f=p.blockSize,g=u.slice(d,d+f);c.call(this,u,d,f,p),this._prevBlock=g}});function c(u,d,p,f){var g,E=this._iv;E?(g=E.slice(0),this._iv=void 0):g=this._prevBlock,f.encryptBlock(g,0);for(var y=0;y<p;y++)u[d+y]^=g[y]}return a}(),i.mode.CFB})}(Ope)),gE}var vE={},Npe={get exports(){return vE},set exports(e){vE=e}},H4;function xpe(){return H4||(H4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),to())})(Xt,function(i){return i.mode.CTR=function(){var a=i.lib.BlockCipherMode.extend(),c=a.Encryptor=a.extend({processBlock:function(u,d){var p=this._cipher,f=p.blockSize,g=this._iv,E=this._counter;g&&(E=this._counter=g.slice(0),this._iv=void 0);var y=E.slice(0);p.encryptBlock(y,0),E[f-1]=E[f-1]+1|0;for(var C=0;C<f;C++)u[d+C]^=y[C]}});return a.Decryptor=c,a}(),i.mode.CTR})}(Npe)),vE}var EE={},Ppe={get exports(){return EE},set exports(e){EE=e}},W4;function Dpe(){return W4||(W4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),to())})(Xt,function(i){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return i.mode.CTRGladman=function(){var a=i.lib.BlockCipherMode.extend();function c(p){if((p>>24&255)===255){var f=p>>16&255,g=p>>8&255,E=p&255;f===255?(f=0,g===255?(g=0,E===255?E=0:++E):++g):++f,p=0,p+=f<<16,p+=g<<8,p+=E}else p+=1<<24;return p}function u(p){return(p[0]=c(p[0]))===0&&(p[1]=c(p[1])),p}var d=a.Encryptor=a.extend({processBlock:function(p,f){var g=this._cipher,E=g.blockSize,y=this._iv,C=this._counter;y&&(C=this._counter=y.slice(0),this._iv=void 0),u(C);var w=C.slice(0);g.encryptBlock(w,0);for(var R=0;R<E;R++)p[f+R]^=w[R]}});return a.Decryptor=d,a}(),i.mode.CTRGladman})}(Ppe)),EE}var _E={},kpe={get exports(){return _E},set exports(e){_E=e}},z4;function Lpe(){return z4||(z4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),to())})(Xt,function(i){return i.mode.OFB=function(){var a=i.lib.BlockCipherMode.extend(),c=a.Encryptor=a.extend({processBlock:function(u,d){var p=this._cipher,f=p.blockSize,g=this._iv,E=this._keystream;g&&(E=this._keystream=g.slice(0),this._iv=void 0),p.encryptBlock(E,0);for(var y=0;y<f;y++)u[d+y]^=E[y]}});return a.Decryptor=c,a}(),i.mode.OFB})}(kpe)),_E}var SE={},Mpe={get exports(){return SE},set exports(e){SE=e}},G4;function Upe(){return G4||(G4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),to())})(Xt,function(i){return i.mode.ECB=function(){var a=i.lib.BlockCipherMode.extend();return a.Encryptor=a.extend({processBlock:function(c,u){this._cipher.encryptBlock(c,u)}}),a.Decryptor=a.extend({processBlock:function(c,u){this._cipher.decryptBlock(c,u)}}),a}(),i.mode.ECB})}(Mpe)),SE}var yE={},Vpe={get exports(){return yE},set exports(e){yE=e}},K4;function Fpe(){return K4||(K4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),to())})(Xt,function(i){return i.pad.AnsiX923={pad:function(a,c){var u=a.sigBytes,d=c*4,p=d-u%d,f=u+p-1;a.clamp(),a.words[f>>>2]|=p<<24-f%4*8,a.sigBytes+=p},unpad:function(a){var c=a.words[a.sigBytes-1>>>2]&255;a.sigBytes-=c}},i.pad.Ansix923})}(Vpe)),yE}var CE={},Bpe={get exports(){return CE},set exports(e){CE=e}},Y4;function jpe(){return Y4||(Y4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),to())})(Xt,function(i){return i.pad.Iso10126={pad:function(a,c){var u=c*4,d=u-a.sigBytes%u;a.concat(i.lib.WordArray.random(d-1)).concat(i.lib.WordArray.create([d<<24],1))},unpad:function(a){var c=a.words[a.sigBytes-1>>>2]&255;a.sigBytes-=c}},i.pad.Iso10126})}(Bpe)),CE}var bE={},$pe={get exports(){return bE},set exports(e){bE=e}},q4;function Hpe(){return q4||(q4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),to())})(Xt,function(i){return i.pad.Iso97971={pad:function(a,c){a.concat(i.lib.WordArray.create([2147483648],1)),i.pad.ZeroPadding.pad(a,c)},unpad:function(a){i.pad.ZeroPadding.unpad(a),a.sigBytes--}},i.pad.Iso97971})}($pe)),bE}var TE={},Wpe={get exports(){return TE},set exports(e){TE=e}},X4;function zpe(){return X4||(X4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),to())})(Xt,function(i){return i.pad.ZeroPadding={pad:function(a,c){var u=c*4;a.clamp(),a.sigBytes+=u-(a.sigBytes%u||u)},unpad:function(a){for(var c=a.words,u=a.sigBytes-1,u=a.sigBytes-1;u>=0;u--)if(c[u>>>2]>>>24-u%4*8&255){a.sigBytes=u+1;break}}},i.pad.ZeroPadding})}(Wpe)),TE}var RE={},Gpe={get exports(){return RE},set exports(e){RE=e}},J4;function Kpe(){return J4||(J4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),to())})(Xt,function(i){return i.pad.NoPadding={pad:function(){},unpad:function(){}},i.pad.NoPadding})}(Gpe)),RE}var IE={},Ype={get exports(){return IE},set exports(e){IE=e}},Q4;function qpe(){return Q4||(Q4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),to())})(Xt,function(i){return function(a){var c=i,u=c.lib,d=u.CipherParams,p=c.enc,f=p.Hex,g=c.format;g.Hex={stringify:function(E){return E.ciphertext.toString(f)},parse:function(E){var y=f.parse(E);return d.create({ciphertext:y})}}}(),i.format.Hex})}(Ype)),IE}var wE={},Xpe={get exports(){return wE},set exports(e){wE=e}},Z4;function Jpe(){return Z4||(Z4=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),Kh(),Yh(),zu(),to())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.BlockCipher,d=a.algo,p=[],f=[],g=[],E=[],y=[],C=[],w=[],R=[],O=[],k=[];(function(){for(var P=[],M=0;M<256;M++)M<128?P[M]=M<<1:P[M]=M<<1^283;for(var B=0,F=0,M=0;M<256;M++){var j=F^F<<1^F<<2^F<<3^F<<4;j=j>>>8^j&255^99,p[B]=j,f[j]=B;var $=P[B],ee=P[$],H=P[ee],J=P[j]*257^j*16843008;g[B]=J<<24|J>>>8,E[B]=J<<16|J>>>16,y[B]=J<<8|J>>>24,C[B]=J;var J=H*16843009^ee*65537^$*257^B*16843008;w[j]=J<<24|J>>>8,R[j]=J<<16|J>>>16,O[j]=J<<8|J>>>24,k[j]=J,B?(B=$^P[P[P[H^$]]],F^=P[P[F]]):B=F=1}})();var A=[0,1,2,4,8,16,32,64,128,27,54],x=d.AES=u.extend({_doReset:function(){var P;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var M=this._keyPriorReset=this._key,B=M.words,F=M.sigBytes/4,j=this._nRounds=F+6,$=(j+1)*4,ee=this._keySchedule=[],H=0;H<$;H++)H<F?ee[H]=B[H]:(P=ee[H-1],H%F?F>6&&H%F==4&&(P=p[P>>>24]<<24|p[P>>>16&255]<<16|p[P>>>8&255]<<8|p[P&255]):(P=P<<8|P>>>24,P=p[P>>>24]<<24|p[P>>>16&255]<<16|p[P>>>8&255]<<8|p[P&255],P^=A[H/F|0]<<24),ee[H]=ee[H-F]^P);for(var J=this._invKeySchedule=[],X=0;X<$;X++){var H=$-X;if(X%4)var P=ee[H];else var P=ee[H-4];X<4||H<=4?J[X]=P:J[X]=w[p[P>>>24]]^R[p[P>>>16&255]]^O[p[P>>>8&255]]^k[p[P&255]]}}},encryptBlock:function(P,M){this._doCryptBlock(P,M,this._keySchedule,g,E,y,C,p)},decryptBlock:function(P,M){var B=P[M+1];P[M+1]=P[M+3],P[M+3]=B,this._doCryptBlock(P,M,this._invKeySchedule,w,R,O,k,f);var B=P[M+1];P[M+1]=P[M+3],P[M+3]=B},_doCryptBlock:function(P,M,B,F,j,$,ee,H){for(var J=this._nRounds,X=P[M]^B[0],W=P[M+1]^B[1],Z=P[M+2]^B[2],ne=P[M+3]^B[3],ie=4,de=1;de<J;de++){var oe=F[X>>>24]^j[W>>>16&255]^$[Z>>>8&255]^ee[ne&255]^B[ie++],fe=F[W>>>24]^j[Z>>>16&255]^$[ne>>>8&255]^ee[X&255]^B[ie++],ge=F[Z>>>24]^j[ne>>>16&255]^$[X>>>8&255]^ee[W&255]^B[ie++],ae=F[ne>>>24]^j[X>>>16&255]^$[W>>>8&255]^ee[Z&255]^B[ie++];X=oe,W=fe,Z=ge,ne=ae}var oe=(H[X>>>24]<<24|H[W>>>16&255]<<16|H[Z>>>8&255]<<8|H[ne&255])^B[ie++],fe=(H[W>>>24]<<24|H[Z>>>16&255]<<16|H[ne>>>8&255]<<8|H[X&255])^B[ie++],ge=(H[Z>>>24]<<24|H[ne>>>16&255]<<16|H[X>>>8&255]<<8|H[W&255])^B[ie++],ae=(H[ne>>>24]<<24|H[X>>>16&255]<<16|H[W>>>8&255]<<8|H[Z&255])^B[ie++];P[M]=oe,P[M+1]=fe,P[M+2]=ge,P[M+3]=ae},keySize:256/32});a.AES=u._createHelper(x)}(),i.AES})}(Xpe)),wE}var OE={},Qpe={get exports(){return OE},set exports(e){OE=e}},eF;function Zpe(){return eF||(eF=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),Kh(),Yh(),zu(),to())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.WordArray,d=c.BlockCipher,p=a.algo,f=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],g=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],E=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],y=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],C=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],w=p.DES=d.extend({_doReset:function(){for(var A=this._key,x=A.words,P=[],M=0;M<56;M++){var B=f[M]-1;P[M]=x[B>>>5]>>>31-B%32&1}for(var F=this._subKeys=[],j=0;j<16;j++){for(var $=F[j]=[],ee=E[j],M=0;M<24;M++)$[M/6|0]|=P[(g[M]-1+ee)%28]<<31-M%6,$[4+(M/6|0)]|=P[28+(g[M+24]-1+ee)%28]<<31-M%6;$[0]=$[0]<<1|$[0]>>>31;for(var M=1;M<7;M++)$[M]=$[M]>>>(M-1)*4+3;$[7]=$[7]<<5|$[7]>>>27}for(var H=this._invSubKeys=[],M=0;M<16;M++)H[M]=F[15-M]},encryptBlock:function(A,x){this._doCryptBlock(A,x,this._subKeys)},decryptBlock:function(A,x){this._doCryptBlock(A,x,this._invSubKeys)},_doCryptBlock:function(A,x,P){this._lBlock=A[x],this._rBlock=A[x+1],R.call(this,4,252645135),R.call(this,16,65535),O.call(this,2,858993459),O.call(this,8,16711935),R.call(this,1,1431655765);for(var M=0;M<16;M++){for(var B=P[M],F=this._lBlock,j=this._rBlock,$=0,ee=0;ee<8;ee++)$|=y[ee][((j^B[ee])&C[ee])>>>0];this._lBlock=j,this._rBlock=F^$}var H=this._lBlock;this._lBlock=this._rBlock,this._rBlock=H,R.call(this,1,1431655765),O.call(this,8,16711935),O.call(this,2,858993459),R.call(this,16,65535),R.call(this,4,252645135),A[x]=this._lBlock,A[x+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function R(A,x){var P=(this._lBlock>>>A^this._rBlock)&x;this._rBlock^=P,this._lBlock^=P<<A}function O(A,x){var P=(this._rBlock>>>A^this._lBlock)&x;this._lBlock^=P,this._rBlock^=P<<A}a.DES=d._createHelper(w);var k=p.TripleDES=d.extend({_doReset:function(){var A=this._key,x=A.words;if(x.length!==2&&x.length!==4&&x.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var P=x.slice(0,2),M=x.length<4?x.slice(0,2):x.slice(2,4),B=x.length<6?x.slice(0,2):x.slice(4,6);this._des1=w.createEncryptor(u.create(P)),this._des2=w.createEncryptor(u.create(M)),this._des3=w.createEncryptor(u.create(B))},encryptBlock:function(A,x){this._des1.encryptBlock(A,x),this._des2.decryptBlock(A,x),this._des3.encryptBlock(A,x)},decryptBlock:function(A,x){this._des3.decryptBlock(A,x),this._des2.encryptBlock(A,x),this._des1.decryptBlock(A,x)},keySize:192/32,ivSize:64/32,blockSize:64/32});a.TripleDES=d._createHelper(k)}(),i.TripleDES})}(Qpe)),OE}var AE={},efe={get exports(){return AE},set exports(e){AE=e}},tF;function tfe(){return tF||(tF=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),Kh(),Yh(),zu(),to())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.StreamCipher,d=a.algo,p=d.RC4=u.extend({_doReset:function(){for(var E=this._key,y=E.words,C=E.sigBytes,w=this._S=[],R=0;R<256;R++)w[R]=R;for(var R=0,O=0;R<256;R++){var k=R%C,A=y[k>>>2]>>>24-k%4*8&255;O=(O+w[R]+A)%256;var x=w[R];w[R]=w[O],w[O]=x}this._i=this._j=0},_doProcessBlock:function(E,y){E[y]^=f.call(this)},keySize:256/32,ivSize:0});function f(){for(var E=this._S,y=this._i,C=this._j,w=0,R=0;R<4;R++){y=(y+1)%256,C=(C+E[y])%256;var O=E[y];E[y]=E[C],E[C]=O,w|=E[(E[y]+E[C])%256]<<24-R*8}return this._i=y,this._j=C,w}a.RC4=u._createHelper(p);var g=d.RC4Drop=p.extend({cfg:p.cfg.extend({drop:192}),_doReset:function(){p._doReset.call(this);for(var E=this.cfg.drop;E>0;E--)f.call(this)}});a.RC4Drop=u._createHelper(g)}(),i.RC4})}(efe)),AE}var NE={},nfe={get exports(){return NE},set exports(e){NE=e}},nF;function rfe(){return nF||(nF=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),Kh(),Yh(),zu(),to())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.StreamCipher,d=a.algo,p=[],f=[],g=[],E=d.Rabbit=u.extend({_doReset:function(){for(var C=this._key.words,w=this.cfg.iv,R=0;R<4;R++)C[R]=(C[R]<<8|C[R]>>>24)&16711935|(C[R]<<24|C[R]>>>8)&4278255360;var O=this._X=[C[0],C[3]<<16|C[2]>>>16,C[1],C[0]<<16|C[3]>>>16,C[2],C[1]<<16|C[0]>>>16,C[3],C[2]<<16|C[1]>>>16],k=this._C=[C[2]<<16|C[2]>>>16,C[0]&4294901760|C[1]&65535,C[3]<<16|C[3]>>>16,C[1]&4294901760|C[2]&65535,C[0]<<16|C[0]>>>16,C[2]&4294901760|C[3]&65535,C[1]<<16|C[1]>>>16,C[3]&4294901760|C[0]&65535];this._b=0;for(var R=0;R<4;R++)y.call(this);for(var R=0;R<8;R++)k[R]^=O[R+4&7];if(w){var A=w.words,x=A[0],P=A[1],M=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,B=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,F=M>>>16|B&4294901760,j=B<<16|M&65535;k[0]^=M,k[1]^=F,k[2]^=B,k[3]^=j,k[4]^=M,k[5]^=F,k[6]^=B,k[7]^=j;for(var R=0;R<4;R++)y.call(this)}},_doProcessBlock:function(C,w){var R=this._X;y.call(this),p[0]=R[0]^R[5]>>>16^R[3]<<16,p[1]=R[2]^R[7]>>>16^R[5]<<16,p[2]=R[4]^R[1]>>>16^R[7]<<16,p[3]=R[6]^R[3]>>>16^R[1]<<16;for(var O=0;O<4;O++)p[O]=(p[O]<<8|p[O]>>>24)&16711935|(p[O]<<24|p[O]>>>8)&4278255360,C[w+O]^=p[O]},blockSize:128/32,ivSize:64/32});function y(){for(var C=this._X,w=this._C,R=0;R<8;R++)f[R]=w[R];w[0]=w[0]+1295307597+this._b|0,w[1]=w[1]+3545052371+(w[0]>>>0<f[0]>>>0?1:0)|0,w[2]=w[2]+886263092+(w[1]>>>0<f[1]>>>0?1:0)|0,w[3]=w[3]+1295307597+(w[2]>>>0<f[2]>>>0?1:0)|0,w[4]=w[4]+3545052371+(w[3]>>>0<f[3]>>>0?1:0)|0,w[5]=w[5]+886263092+(w[4]>>>0<f[4]>>>0?1:0)|0,w[6]=w[6]+1295307597+(w[5]>>>0<f[5]>>>0?1:0)|0,w[7]=w[7]+3545052371+(w[6]>>>0<f[6]>>>0?1:0)|0,this._b=w[7]>>>0<f[7]>>>0?1:0;for(var R=0;R<8;R++){var O=C[R]+w[R],k=O&65535,A=O>>>16,x=((k*k>>>17)+k*A>>>15)+A*A,P=((O&4294901760)*O|0)+((O&65535)*O|0);g[R]=x^P}C[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,C[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,C[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,C[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,C[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,C[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,C[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,C[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}a.Rabbit=u._createHelper(E)}(),i.Rabbit})}(nfe)),NE}var xE={},ife={get exports(){return xE},set exports(e){xE=e}},rF;function ofe(){return rF||(rF=1,function(e,t){(function(i,a,c){e.exports=a(Vn(),Kh(),Yh(),zu(),to())})(Xt,function(i){return function(){var a=i,c=a.lib,u=c.StreamCipher,d=a.algo,p=[],f=[],g=[],E=d.RabbitLegacy=u.extend({_doReset:function(){var C=this._key.words,w=this.cfg.iv,R=this._X=[C[0],C[3]<<16|C[2]>>>16,C[1],C[0]<<16|C[3]>>>16,C[2],C[1]<<16|C[0]>>>16,C[3],C[2]<<16|C[1]>>>16],O=this._C=[C[2]<<16|C[2]>>>16,C[0]&4294901760|C[1]&65535,C[3]<<16|C[3]>>>16,C[1]&4294901760|C[2]&65535,C[0]<<16|C[0]>>>16,C[2]&4294901760|C[3]&65535,C[1]<<16|C[1]>>>16,C[3]&4294901760|C[0]&65535];this._b=0;for(var k=0;k<4;k++)y.call(this);for(var k=0;k<8;k++)O[k]^=R[k+4&7];if(w){var A=w.words,x=A[0],P=A[1],M=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,B=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,F=M>>>16|B&4294901760,j=B<<16|M&65535;O[0]^=M,O[1]^=F,O[2]^=B,O[3]^=j,O[4]^=M,O[5]^=F,O[6]^=B,O[7]^=j;for(var k=0;k<4;k++)y.call(this)}},_doProcessBlock:function(C,w){var R=this._X;y.call(this),p[0]=R[0]^R[5]>>>16^R[3]<<16,p[1]=R[2]^R[7]>>>16^R[5]<<16,p[2]=R[4]^R[1]>>>16^R[7]<<16,p[3]=R[6]^R[3]>>>16^R[1]<<16;for(var O=0;O<4;O++)p[O]=(p[O]<<8|p[O]>>>24)&16711935|(p[O]<<24|p[O]>>>8)&4278255360,C[w+O]^=p[O]},blockSize:128/32,ivSize:64/32});function y(){for(var C=this._X,w=this._C,R=0;R<8;R++)f[R]=w[R];w[0]=w[0]+1295307597+this._b|0,w[1]=w[1]+3545052371+(w[0]>>>0<f[0]>>>0?1:0)|0,w[2]=w[2]+886263092+(w[1]>>>0<f[1]>>>0?1:0)|0,w[3]=w[3]+1295307597+(w[2]>>>0<f[2]>>>0?1:0)|0,w[4]=w[4]+3545052371+(w[3]>>>0<f[3]>>>0?1:0)|0,w[5]=w[5]+886263092+(w[4]>>>0<f[4]>>>0?1:0)|0,w[6]=w[6]+1295307597+(w[5]>>>0<f[5]>>>0?1:0)|0,w[7]=w[7]+3545052371+(w[6]>>>0<f[6]>>>0?1:0)|0,this._b=w[7]>>>0<f[7]>>>0?1:0;for(var R=0;R<8;R++){var O=C[R]+w[R],k=O&65535,A=O>>>16,x=((k*k>>>17)+k*A>>>15)+A*A,P=((O&4294901760)*O|0)+((O&65535)*O|0);g[R]=x^P}C[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,C[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,C[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,C[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,C[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,C[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,C[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,C[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}a.RabbitLegacy=u._createHelper(E)}(),i.RabbitLegacy})}(ife)),xE}(function(e,t){(function(i,a,c){e.exports=a(Vn(),j_(),ope(),spe(),Kh(),upe(),Yh(),L1(),g6(),mpe(),v6(),Epe(),Spe(),Cpe(),M1(),Rpe(),zu(),to(),Ape(),xpe(),Dpe(),Lpe(),Upe(),Fpe(),jpe(),Hpe(),zpe(),Kpe(),qpe(),Jpe(),Zpe(),tfe(),rfe(),ofe())})(Xt,function(i){return i})})(Jhe);const iF=UI;let E6="U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==";{const e=iF.AES.decrypt("U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==","U2FsdGVkX1/fp5K6GAphzVxz");E6=JSON.parse(e.toString(iF.enc.Utf8))}const Tt={appId:E6,channel:{}.AGORA_CHANNEL||"test",token:{}.AGORA_TOKEN?{}.AGORA_TOKEN:null};function afe(){return[{channel:{}.AGORA_CHANNEL_0||"test0",token:{}.AGORA_TOKEN_0},{channel:{}.AGORA_CHANNEL_1||"test1",token:{}.AGORA_TOKEN_1},{channel:{}.AGORA_CHANNEL_2||"test2",token:{}.AGORA_TOKEN_2},{channel:{}.AGORA_CHANNEL_3||"test3",token:{}.AGORA_TOKEN_3},{channel:{}.AGORA_CHANNEL_4||"test4",token:{}.AGORA_TOKEN_4},{channel:{}.AGORA_CHANNEL_5||"test5",token:{}.AGORA_TOKEN_5},{channel:{}.AGORA_CHANNEL_6||"test6",token:{}.AGORA_TOKEN_6},{channel:{}.AGORA_CHANNEL_7||"test7",token:{}.AGORA_TOKEN_7},{channel:{}.AGORA_CHANNEL_8||"test8",token:{}.AGORA_TOKEN_8},{channel:{}.AGORA_CHANNEL_9||"test9",token:{}.AGORA_TOKEN_9}]}const As=e=>{S4(String(e));const t=Yhe();return S4(),t},Qa=()=>"https://www.agora.io/en/wp-content/uploads/2022/10/3d-spatial-audio-icon.svg";function U1({micOn:e,cameraOn:t,renderAction:i,renderLocalUser:a,renderRemoteUsers:c}){const u=Ns(),d=U_()||0,p=_.useMemo(()=>As(d),[d]),f=_.useMemo(()=>Qa(),[]),g=xs(),E=g.filter(R=>R.hasAudio||R.hasVideo),y=e||t,{localMicrophoneTrack:C}=Hl(e),{localCameraTrack:w}=$l(t);return Fc([C,w]),Ze(Zi,{children:[i?i():void 0,le(k1,{published:E.length+(y?1:0),total:g.length+1}),Ze(Ya,{children:[u&&(a?a():le(Ya.Item,{children:le(B_,{audioTrack:C,cameraOn:t,cover:f,micOn:e,videoTrack:w,children:le(Lc,{children:`${p}{${d}}`})})})),c?c():void 0]})]})}const Ng=({children:e,clientConfig:t={mode:"rtc",codec:"vp8"}})=>{const[i]=_.useState(()=>Pl.createClient(t));return le(a6,{client:i,children:e})},xg=14,Pg=8,mT=8,gT=4;function sfe({volumeLevel:e=0,noise:t=.075,...i}){const[a,c]=_.useState(0);return _.useEffect(()=>{if(e&&t){const u=Math.max(0,Math.min(1,t)),d=setInterval(()=>{c(e+Math.random()*u*(Math.random()>.5?1:-1))},50);return()=>clearInterval(d)}},[e,t]),Ze("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...i,children:[le("defs",{children:le("clipPath",{id:"icon-mic-v-clip",children:le("rect",{height:xg,rx:Pg/2,width:Pg,x:mT,y:gT})})}),le("path",{d:"M0 0h24v24H0z",fill:"#999CA3",opacity:".01"}),le("rect",{clipPath:"url(#icon-mic-v-clip)",fill:"#fff",height:xg,width:Pg,x:mT,y:gT}),le("path",{d:"M4 16.625h2v-1.25H4v1.25Zm6 4h4v-1.25h-4v1.25Zm8-4h2v-1.25h-2v1.25Zm-4 4A4.625 4.625 0 0 0 18.625 16h-1.25A3.375 3.375 0 0 1 14 19.375v1.25ZM5.375 16A4.625 4.625 0 0 0 10 20.625v-1.25A3.375 3.375 0 0 1 6.625 16h-1.25Z",fill:"#fff"}),le("g",{clipPath:"url(#icon-mic-v-clip)",children:le("rect",{fill:"#44AD00",height:xg*2,style:{transform:`translateY(${(1-a)*xg}px)`,transition:"transform .1s"},width:Pg,x:mT,y:gT})})]})}const cfe=_.memo(function(t){return Ze("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[le("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),le("path",{clipRule:"evenodd",d:"M19.277 16.625H20v-1.25h-1.973l1.25 1.25Zm-3.239 2.065.89.89a4.602 4.602 0 0 1-2.716 1.04l-.212.005h-4a4.626 4.626 0 0 1-4.55-3.787l-.033-.213H4v-1.25h2c.345 0 .625.28.625.625a3.375 3.375 0 0 0 3.19 3.37l.185.005h4a3.36 3.36 0 0 0 2.038-.685Zm.587-4.717V8a4.625 4.625 0 0 0-8.5-2.526l.911.91a3.374 3.374 0 0 1 6.281.991H14v1.25h1.375v.75H14v1.25h1.375v.75h-1.348l1.25 1.25h.098v.098l1.25 1.25Zm-2.587 2.717.89.89A4.625 4.625 0 0 1 7.375 14v-3.973l1.25 1.25v.098h.098l1.25 1.25H8.625V14a3.375 3.375 0 0 0 5.413 2.69Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})}),lfe=_.memo(function(t){return Ze("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[le("circle",{cx:"12",cy:"11",r:"7",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),le("circle",{cx:"12",cy:"11",r:"3",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),le("circle",{cx:"14.625",cy:"6.625",fill:"#fff",r:".625"}),le("path",{d:"M7 18.25a8.004 8.004 0 0 0 10 0",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"})]})}),ufe=_.memo(function(t){return Ze("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[le("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),le("path",{clipRule:"evenodd",d:"m15.72 18.373.91.909a8.63 8.63 0 0 1-9.788-.364l-.232-.18.78-.976a7.38 7.38 0 0 0 8.33.61Zm2.434-2.87A7.625 7.625 0 0 0 7.497 4.846l.897.896a6.375 6.375 0 0 1 8.864 8.864l.896.897Zm-3.857 1.446.952.951A7.625 7.625 0 0 1 5.1 7.751l.951.952a6.375 6.375 0 0 0 8.246 8.246Zm.956-4.348a3.625 3.625 0 0 0-4.854-4.854l.964.964a2.378 2.378 0 0 1 2.926 2.926l.964.964Zm-.628-5.351a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})});const no=({calling:e,micOn:t,cameraOn:i,setMic:a,setCamera:c,setCalling:u})=>le(Zi,{children:Ze("div",{className:"inset-0 top-a flex justify-center items-center gap-3 px-6 py-3 bg-#21242c c-coolgray-3",children:[Ze("div",{className:"flex-1 flex top-0 left-0 h-full items-center gap-3 px-6 py-3",children:[a&&le("button",{className:"btn",onClick:()=>a(),children:t?le(sfe,{}):le(cfe,{})}),c&&le("button",{className:"btn",onClick:()=>c(),children:i?le(lfe,{}):le(ufe,{})})]}),u&&le("button",{className:I1("btn btn-phone",{"btn-phone-active":e}),onClick:()=>u(),children:e?le("i",{className:"i-mdi-phone-hangup"}):le("i",{className:"i-mdi-phone"})})]})}),oF=e=>{let t;const i=new Set,a=(f,g)=>{const E=typeof f=="function"?f(t):f;if(!Object.is(E,t)){const y=t;t=g??typeof E!="object"?E:Object.assign({},t,E),i.forEach(C=>C(t,y))}},c=()=>t,p={setState:a,getState:c,subscribe:f=>(i.add(f),()=>i.delete(f)),destroy:()=>{({AGORA_AES_SALT:"U2FsdGVkX1/fp5K6GAphzVxz",AGORA_APPID:"U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}};return t=e(a,c,p),p},dfe=e=>e?oF(e):oF;var VI={},hfe={get exports(){return VI},set exports(e){VI=e}},_6={},FI={},pfe={get exports(){return FI},set exports(e){FI=e}},S6={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nh=_;function ffe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mfe=typeof Object.is=="function"?Object.is:ffe,gfe=Nh.useState,vfe=Nh.useEffect,Efe=Nh.useLayoutEffect,_fe=Nh.useDebugValue;function Sfe(e,t){var i=t(),a=gfe({inst:{value:i,getSnapshot:t}}),c=a[0].inst,u=a[1];return Efe(function(){c.value=i,c.getSnapshot=t,vT(c)&&u({inst:c})},[e,i,t]),vfe(function(){return vT(c)&&u({inst:c}),e(function(){vT(c)&&u({inst:c})})},[e]),_fe(i),i}function vT(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!mfe(e,i)}catch{return!0}}function yfe(e,t){return t()}var Cfe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?yfe:Sfe;S6.useSyncExternalStore=Nh.useSyncExternalStore!==void 0?Nh.useSyncExternalStore:Cfe;(function(e){e.exports=S6})(pfe);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_=_,bfe=FI;function Tfe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rfe=typeof Object.is=="function"?Object.is:Tfe,Ife=bfe.useSyncExternalStore,wfe=$_.useRef,Ofe=$_.useEffect,Afe=$_.useMemo,Nfe=$_.useDebugValue;_6.useSyncExternalStoreWithSelector=function(e,t,i,a,c){var u=wfe(null);if(u.current===null){var d={hasValue:!1,value:null};u.current=d}else d=u.current;u=Afe(function(){function f(w){if(!g){if(g=!0,E=w,w=a(w),c!==void 0&&d.hasValue){var R=d.value;if(c(R,w))return y=R}return y=w}if(R=y,Rfe(E,w))return R;var O=a(w);return c!==void 0&&c(R,O)?R:(E=w,y=O)}var g=!1,E,y,C=i===void 0?null:i;return[function(){return f(t())},C===null?void 0:function(){return f(C())}]},[t,i,a,c]);var p=Ife(e,u[0],u[1]);return Ofe(function(){d.hasValue=!0,d.value=p},[p]),Nfe(p),p};(function(e){e.exports=_6})(hfe);const xfe=ME(VI),{useSyncExternalStoreWithSelector:Pfe}=xfe;function Dfe(e,t=e.getState,i){const a=Pfe(e.subscribe,e.getState,e.getServerState||e.getState,t,i);return _.useDebugValue(a),a}const aF=e=>{({AGORA_AES_SALT:"U2FsdGVkX1/fp5K6GAphzVxz",AGORA_APPID:"U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?dfe(e):e,i=(a,c)=>Dfe(t,a,c);return Object.assign(i,t),i},kfe=e=>e?aF(e):aF,Lfe=Tt.appId,Mfe=afe(),Sf=kfe((e,t)=>({getRooms:()=>{let{rooms:i}=t();i=Mfe.map(({token:a,channel:c})=>{const u=Pl.createClient({mode:"live",codec:"vp8"});return u.join(Lfe,c,a||null,null),{channel:c,token:a,client:u}}),e({rooms:i})},selectChannel:async i=>{let{hostRoom:a,localTracks:c}=t();const{rooms:u}=t();if(!i){a&&(c&&a.client.localTracks.length>0&&await a.client.unpublish(c),a.client.setClientRole("audience"),a=null,e({hostRoom:a,localTracks:c}));return}if(a){if(a.client.channelName===i)return;c&&await a.client.unpublish(c),await a.client.setClientRole("audience")}a=u==null?void 0:u.find(d=>d.client.channelName===i),a&&(await a.client.setClientRole("host"),c||(c=await Pl.createMicrophoneAndCameraTracks()),await a.client.publish(c)),e({localTracks:c,hostRoom:a})},dispose:()=>{const{rooms:i,hostRoom:a}=t();if(a==null||a.client.leave(),i)for(const c of i)c.client.leave()}}));var Ufe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Vfe(e){var t=e.defaultInputValue,i=t===void 0?"":t,a=e.defaultMenuIsOpen,c=a===void 0?!1:a,u=e.defaultValue,d=u===void 0?null:u,p=e.inputValue,f=e.menuIsOpen,g=e.onChange,E=e.onInputChange,y=e.onMenuClose,C=e.onMenuOpen,w=e.value,R=mn(e,Ufe),O=_.useState(p!==void 0?p:i),k=we(O,2),A=k[0],x=k[1],P=_.useState(f!==void 0?f:c),M=we(P,2),B=M[0],F=M[1],j=_.useState(w!==void 0?w:d),$=we(j,2),ee=$[0],H=$[1],J=_.useCallback(function(oe,fe){typeof g=="function"&&g(oe,fe),H(oe)},[g]),X=_.useCallback(function(oe,fe){var ge;typeof E=="function"&&(ge=E(oe,fe)),x(ge!==void 0?ge:oe)},[E]),W=_.useCallback(function(){typeof C=="function"&&C(),F(!0)},[C]),Z=_.useCallback(function(){typeof y=="function"&&y(),F(!1)},[y]),ne=p!==void 0?p:A,ie=f!==void 0?f:B,de=w!==void 0?w:ee;return ce(ce({},R),{},{inputValue:ne,menuIsOpen:ie,onChange:J,onInputChange:X,onMenuClose:Z,onMenuOpen:W,value:de})}function Ffe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Bfe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var jfe=function(){function e(i){var a=this;this._insertTag=function(c){var u;a.tags.length===0?a.insertionPoint?u=a.insertionPoint.nextSibling:a.prepend?u=a.container.firstChild:u=a.before:u=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(c,u),a.tags.push(c)},this.isSpeedy=i.speedy===void 0?!0:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Bfe(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var u=Ffe(c);try{u.insertRule(a,u.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){return a.parentNode&&a.parentNode.removeChild(a)}),this.tags=[],this.ctr=0},e}();function $fe(e){var t=Object.create(null);return function(i){return t[i]===void 0&&(t[i]=e(i)),t[i]}}var Hfe=function(t,i,a){for(var c=0,u=0;c=u,u=tc(),c===38&&u===12&&(i[a]=1),!Wf(u);)Ra();return nm(t,ea)},Wfe=function(t,i){var a=-1,c=44;do switch(Wf(c)){case 0:c===38&&tc()===12&&(i[a]=1),t[a]+=Hfe(ea-1,i,a);break;case 2:t[a]+=Qg(c);break;case 4:if(c===44){t[++a]=tc()===58?"&\f":"",i[a]=t[a].length;break}default:t[a]+=v_(c)}while(c=Ra());return t},zfe=function(t,i){return Sj(Wfe(_j(t),i))},sF=new WeakMap,Gfe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var i=t.value,a=t.parent,c=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&i.charCodeAt(0)!==58&&!sF.get(a))&&!c){sF.set(t,!0);for(var u=[],d=zfe(i,u),p=a.props,f=0,g=0;f<d.length;f++)for(var E=0;E<p.length;E++,g++)t.props[g]=u[f]?d[f].replace(/&\f/g,p[E]):p[E]+" "+d[f]}}},Kfe=function(t){if(t.type==="decl"){var i=t.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(t.return="",t.value="")}};function y6(e,t){switch(ite(e,t)){case 5103:return qn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return qn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return qn+e+Uv+e+fo+e+e;case 6828:case 4268:return qn+e+fo+e+e;case 6165:return qn+e+fo+"flex-"+e+e;case 5187:return qn+e+or(e,/(\w+).+(:[^]+)/,qn+"box-$1$2"+fo+"flex-$1$2")+e;case 5443:return qn+e+fo+"flex-item-"+or(e,/flex-|-self/,"")+e;case 4675:return qn+e+fo+"flex-line-pack"+or(e,/align-content|flex-|-self/,"")+e;case 5548:return qn+e+fo+or(e,"shrink","negative")+e;case 5292:return qn+e+fo+or(e,"basis","preferred-size")+e;case 6060:return qn+"box-"+or(e,"-grow","")+qn+e+fo+or(e,"grow","positive")+e;case 4554:return qn+or(e,/([^-])(transform)/g,"$1"+qn+"$2")+e;case 6187:return or(or(or(e,/(zoom-|grab)/,qn+"$1"),/(image-set)/,qn+"$1"),e,"")+e;case 5495:case 3959:return or(e,/(image-set\([^]*)/,qn+"$1$`$1");case 4968:return or(or(e,/(.+:)(flex-)?(.*)/,qn+"box-pack:$3"+fo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+qn+e+e;case 4095:case 3583:case 4068:case 2532:return or(e,/(.+)-inline(.+)/,qn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ys(e)-1-t>6)switch(qi(e,t+1)){case 109:if(qi(e,t+4)!==45)break;case 102:return or(e,/(.+:)(.+)-([^]+)/,"$1"+qn+"$2-$3$1"+Uv+(qi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~MR(e,"stretch")?y6(or(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(qi(e,t+1)!==115)break;case 6444:switch(qi(e,Ys(e)-3-(~MR(e,"!important")&&10))){case 107:return or(e,":",":"+qn)+e;case 101:return or(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+qn+(qi(e,14)===45?"inline-":"")+"box$3$1"+qn+"$2$3$1"+fo+"$2box$3")+e}break;case 5936:switch(qi(e,t+11)){case 114:return qn+e+fo+or(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return qn+e+fo+or(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return qn+e+fo+or(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return qn+e+fo+e+e}return e}var Yfe=function(t,i,a,c){if(t.length>-1&&!t.return)switch(t.type){case zw:t.return=y6(t.value,t.length);break;case gj:return Nu([Fp(t,{value:or(t.value,"@","@"+qn)})],c);case Ww:if(t.length)return ate(t.props,function(u){switch(ote(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Nu([Fp(t,{props:[or(u,/:(read-\w+)/,":"+Uv+"$1")]})],c);case"::placeholder":return Nu([Fp(t,{props:[or(u,/:(plac\w+)/,":"+qn+"input-$1")]}),Fp(t,{props:[or(u,/:(plac\w+)/,":"+Uv+"$1")]}),Fp(t,{props:[or(u,/:(plac\w+)/,fo+"input-$1")]})],c)}return""})}},qfe=[Yfe],Xfe=function(t){var i=t.key;if(i==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(O){var k=O.getAttribute("data-emotion");k.indexOf(" ")!==-1&&(document.head.appendChild(O),O.setAttribute("data-s",""))})}var c=t.stylisPlugins||qfe,u={},d,p=[];d=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(O){for(var k=O.getAttribute("data-emotion").split(" "),A=1;A<k.length;A++)u[k[A]]=!0;p.push(O)});var f,g=[Gfe,Kfe];{var E,y=[Cj,mte(function(O){E.insert(O)})],C=fte(g.concat(c,y)),w=function(k){return Nu(yj(k),C)};f=function(k,A,x,P){E=x,w(k?k+"{"+A.styles+"}":A.styles),P&&(R.inserted[A.name]=!0)}}var R={key:i,sheet:new jfe({key:i,container:d,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:u,registered:{},insert:f};return R.sheet.hydrate(p),R},C6=jf,Jfe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Qfe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},b6={};b6[C6.ForwardRef]=Jfe;b6[C6.Memo]=Qfe;var Zfe=!0;function eme(e,t,i){var a="";return i.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):a+=c+" "}),a}var T6=function(t,i,a){var c=t.key+"-"+i.name;(a===!1||Zfe===!1)&&t.registered[c]===void 0&&(t.registered[c]=i.styles)},tme=function(t,i,a){T6(t,i,a);var c=t.key+"-"+i.name;if(t.inserted[i.name]===void 0){var u=i;do t.insert(i===u?"."+c:"",u,t.sheet,!0),u=u.next;while(u!==void 0)}};function nme(e){for(var t=0,i,a=0,c=e.length;c>=4;++a,c-=4)i=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var rme={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ime=/[A-Z]|^ms/g,ome=/_EMO_([^_]+?)_([^]*?)_EMO_/g,R6=function(t){return t.charCodeAt(1)===45},cF=function(t){return t!=null&&typeof t!="boolean"},ET=$fe(function(e){return R6(e)?e:e.replace(ime,"-$&").toLowerCase()}),lF=function(t,i){switch(t){case"animation":case"animationName":if(typeof i=="string")return i.replace(ome,function(a,c,u){return qs={name:c,styles:u,next:qs},c})}return rme[t]!==1&&!R6(t)&&typeof i=="number"&&i!==0?i+"px":i};function qf(e,t,i){if(i==null)return"";if(i.__emotion_styles!==void 0)return i;switch(typeof i){case"boolean":return"";case"object":{if(i.anim===1)return qs={name:i.name,styles:i.styles,next:qs},i.name;if(i.styles!==void 0){var a=i.next;if(a!==void 0)for(;a!==void 0;)qs={name:a.name,styles:a.styles,next:qs},a=a.next;var c=i.styles+";";return c}return ame(e,t,i)}case"function":{if(e!==void 0){var u=qs,d=i(e);return qs=u,qf(e,t,d)}break}}if(t==null)return i;var p=t[i];return p!==void 0?p:i}function ame(e,t,i){var a="";if(Array.isArray(i))for(var c=0;c<i.length;c++)a+=qf(e,t,i[c])+";";else for(var u in i){var d=i[u];if(typeof d!="object")t!=null&&t[d]!==void 0?a+=u+"{"+t[d]+"}":cF(d)&&(a+=ET(u)+":"+lF(u,d)+";");else if(Array.isArray(d)&&typeof d[0]=="string"&&(t==null||t[d[0]]===void 0))for(var p=0;p<d.length;p++)cF(d[p])&&(a+=ET(u)+":"+lF(u,d[p])+";");else{var f=qf(e,t,d);switch(u){case"animation":case"animationName":{a+=ET(u)+":"+f+";";break}default:a+=u+"{"+f+"}"}}}return a}var uF=/label:\s*([^\s;\n{]+)\s*(;|$)/g,qs,I6=function(t,i,a){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var c=!0,u="";qs=void 0;var d=t[0];d==null||d.raw===void 0?(c=!1,u+=qf(a,i,d)):u+=d[0];for(var p=1;p<t.length;p++)u+=qf(a,i,t[p]),c&&(u+=d[p]);uF.lastIndex=0;for(var f="",g;(g=uF.exec(u))!==null;)f+="-"+g[1];var E=nme(u)+f;return{name:E,styles:u,next:qs}},sme=function(t){return t()},cme=ov["useInsertionEffect"]?ov["useInsertionEffect"]:!1,lme=cme||sme,V1={}.hasOwnProperty,w6=_.createContext(typeof HTMLElement<"u"?Xfe({key:"css"}):null);w6.Provider;var ume=function(t){return _.forwardRef(function(i,a){var c=_.useContext(w6);return t(i,c,a)})},dme=_.createContext({}),BI="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",hme=function(t,i){var a={};for(var c in i)V1.call(i,c)&&(a[c]=i[c]);return a[BI]=t,a},pme=function(t){var i=t.cache,a=t.serialized,c=t.isStringTag;return T6(i,a,c),lme(function(){return tme(i,a,c)}),null},fme=ume(function(e,t,i){var a=e.css;typeof a=="string"&&t.registered[a]!==void 0&&(a=t.registered[a]);var c=e[BI],u=[a],d="";typeof e.className=="string"?d=eme(t.registered,u,e.className):e.className!=null&&(d=e.className+" ");var p=I6(u,void 0,_.useContext(dme));d+=t.key+"-"+p.name;var f={};for(var g in e)V1.call(e,g)&&g!=="css"&&g!==BI&&(f[g]=e[g]);return f.ref=i,f.className=d,_.createElement(_.Fragment,null,_.createElement(pme,{cache:t,serialized:p,isStringTag:typeof c=="string"}),_.createElement(c,f))}),Wt=function(t,i){var a=arguments;if(i==null||!V1.call(i,"css"))return _.createElement.apply(void 0,a);var c=a.length,u=new Array(c);u[0]=fme,u[1]=hme(t,i);for(var d=2;d<c;d++)u[d]=a[d];return _.createElement.apply(null,u)};function F1(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return I6(t)}var mme=function(){var t=F1.apply(void 0,arguments),i="animation-"+t.name;return{name:i,styles:"@keyframes "+i+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function gme(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function vme(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}const Eme=["top","right","bottom","left"];Eme.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);function Qs(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function O6(e){return Qs(e).getComputedStyle(e)}function A6(e){return e instanceof Qs(e).Node}function N6(e){return A6(e)?(e.nodeName||"").toLowerCase():""}let Dg;function _me(){if(Dg)return Dg;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(Dg=e.brands.map(t=>t.brand+"/"+t.version).join(" "),Dg):navigator.userAgent}function B1(e){return e instanceof Qs(e).HTMLElement}function vh(e){return e instanceof Qs(e).Element}function dF(e){return typeof ShadowRoot>"u"?!1:e instanceof Qs(e).ShadowRoot||e instanceof ShadowRoot}function x6(e){const{overflow:t,overflowX:i,overflowY:a,display:c}=O6(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+i)&&!["inline","contents"].includes(c)}function Sme(){return/^((?!chrome|android).)*safari/i.test(_me())}function yme(e){return["html","body","#document"].includes(N6(e))}const PE=Math.round;function Cme(e){const t=O6(e);let i=parseFloat(t.width),a=parseFloat(t.height);const c=B1(e),u=c?e.offsetWidth:i,d=c?e.offsetHeight:a,p=PE(i)!==u||PE(a)!==d;return p&&(i=u,a=d),{width:i,height:a,fallback:p}}function P6(e){return vh(e)?e:e.contextElement}const D6={x:1,y:1};function _T(e){const t=P6(e);if(!B1(t))return D6;const i=t.getBoundingClientRect(),{width:a,height:c,fallback:u}=Cme(t);let d=(u?PE(i.width):i.width)/a,p=(u?PE(i.height):i.height)/c;return d&&Number.isFinite(d)||(d=1),p&&Number.isFinite(p)||(p=1),{x:d,y:p}}function hF(e,t,i,a){var c,u;t===void 0&&(t=!1),i===void 0&&(i=!1);const d=e.getBoundingClientRect(),p=P6(e);let f=D6;t&&(a?vh(a)&&(f=_T(a)):f=_T(e));const g=p?Qs(p):window,E=Sme()&&i;let y=(d.left+(E&&((c=g.visualViewport)==null?void 0:c.offsetLeft)||0))/f.x,C=(d.top+(E&&((u=g.visualViewport)==null?void 0:u.offsetTop)||0))/f.y,w=d.width/f.x,R=d.height/f.y;if(p){const O=Qs(p),k=a&&vh(a)?Qs(a):a;let A=O.frameElement;for(;A&&a&&k!==O;){const x=_T(A),P=A.getBoundingClientRect(),M=getComputedStyle(A);P.x+=(A.clientLeft+parseFloat(M.paddingLeft))*x.x,P.y+=(A.clientTop+parseFloat(M.paddingTop))*x.y,y*=x.x,C*=x.y,w*=x.x,R*=x.y,y+=P.x,C+=P.y,A=Qs(A).frameElement}}return vme({width:w,height:R,x:y,y:C})}function bme(e){return((A6(e)?e.ownerDocument:e.document)||window.document).documentElement}function Tme(e){if(N6(e)==="html")return e;const t=e.assignedSlot||e.parentNode||dF(e)&&e.host||bme(e);return dF(t)?t.host:t}function k6(e){const t=Tme(e);return yme(t)?t.ownerDocument.body:B1(t)&&x6(t)?t:k6(t)}function iv(e,t){var i;t===void 0&&(t=[]);const a=k6(e),c=a===((i=e.ownerDocument)==null?void 0:i.body),u=Qs(a);return c?t.concat(u,u.visualViewport||[],x6(a)?a:[]):t.concat(a,iv(a))}function Rme(e,t,i,a){a===void 0&&(a={});const{ancestorScroll:c=!0,ancestorResize:u=!0,elementResize:d=!0,animationFrame:p=!1}=a,f=c&&!p,g=f||u?[...vh(e)?iv(e):e.contextElement?iv(e.contextElement):[],...iv(t)]:[];g.forEach(w=>{f&&w.addEventListener("scroll",i,{passive:!0}),u&&w.addEventListener("resize",i)});let E,y=null;d&&(y=new ResizeObserver(()=>{i()}),vh(e)&&!p&&y.observe(e),vh(e)||!e.contextElement||p||y.observe(e.contextElement),y.observe(t));let C=p?hF(e):null;return p&&function w(){const R=hF(e);!C||R.x===C.x&&R.y===C.y&&R.width===C.width&&R.height===C.height||i(),C=R,E=requestAnimationFrame(w)}(),i(),()=>{var w;g.forEach(R=>{f&&R.removeEventListener("scroll",i),u&&R.removeEventListener("resize",i)}),(w=y)==null||w.disconnect(),y=null,p&&cancelAnimationFrame(E)}}var jI=_.useLayoutEffect,Ime=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],DE=function(){};function wme(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function Ome(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];var u=[].concat(a);if(t&&e)for(var d in t)t.hasOwnProperty(d)&&t[d]&&u.push("".concat(wme(e,d)));return u.filter(function(p){return p}).map(function(p){return String(p).trim()}).join(" ")}var pF=function(t){return Ume(t)?t.filter(Boolean):An(t)==="object"&&t!==null?[t]:[]},L6=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var i=mn(t,Ime);return ce({},i)},Zr=function(t,i,a){var c=t.cx,u=t.getStyles,d=t.getClassNames,p=t.className;return{css:u(i,t),className:c(a??{},d(i,t),p)}};function H_(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Ame(e){return H_(e)?window.innerHeight:e.clientHeight}function M6(e){return H_(e)?window.pageYOffset:e.scrollTop}function kE(e,t){if(H_(e)){window.scrollTo(0,t);return}e.scrollTop=t}function Nme(e){var t=getComputedStyle(e),i=t.position==="absolute",a=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var c=e;c=c.parentElement;)if(t=getComputedStyle(c),!(i&&t.position==="static")&&a.test(t.overflow+t.overflowY+t.overflowX))return c;return document.documentElement}function xme(e,t,i,a){return i*((e=e/a-1)*e*e+1)+t}function kg(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:DE,c=M6(e),u=t-c,d=10,p=0;function f(){p+=d;var g=xme(p,c,u,i);kE(e,g),p<i?window.requestAnimationFrame(f):a(e)}f()}function fF(e,t){var i=e.getBoundingClientRect(),a=t.getBoundingClientRect(),c=t.offsetHeight/3;a.bottom+c>i.bottom?kE(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+c,e.scrollHeight)):a.top-c<i.top&&kE(e,Math.max(t.offsetTop-c,0))}function Pme(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function mF(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Dme(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var U6=!1,kme={get passive(){return U6=!0}},Lg=typeof window<"u"?window:{};Lg.addEventListener&&Lg.removeEventListener&&(Lg.addEventListener("p",DE,kme),Lg.removeEventListener("p",DE,!1));var Lme=U6;function Mme(e){return e!=null}function Ume(e){return Array.isArray(e)}function Mg(e,t,i){return e?t:i}var Vme=function(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),c=1;c<i;c++)a[c-1]=arguments[c];var u=Object.entries(t).filter(function(d){var p=we(d,1),f=p[0];return!a.includes(f)});return u.reduce(function(d,p){var f=we(p,2),g=f[0],E=f[1];return d[g]=E,d},{})};function Fme(e){var t=e.maxHeight,i=e.menuEl,a=e.minHeight,c=e.placement,u=e.shouldScroll,d=e.isFixedPosition,p=e.controlHeight,f=Nme(i),g={placement:"bottom",maxHeight:t};if(!i||!i.offsetParent)return g;var E=f.getBoundingClientRect(),y=E.height,C=i.getBoundingClientRect(),w=C.bottom,R=C.height,O=C.top,k=i.offsetParent.getBoundingClientRect(),A=k.top,x=d?window.innerHeight:Ame(f),P=M6(f),M=parseInt(getComputedStyle(i).marginBottom,10),B=parseInt(getComputedStyle(i).marginTop,10),F=A-B,j=x-O,$=F+P,ee=y-P-O,H=w-x+P+M,J=P+O-B,X=160;switch(c){case"auto":case"bottom":if(j>=R)return{placement:"bottom",maxHeight:t};if(ee>=R&&!d)return u&&kg(f,H,X),{placement:"bottom",maxHeight:t};if(!d&&ee>=a||d&&j>=a){u&&kg(f,H,X);var W=d?j-M:ee-M;return{placement:"bottom",maxHeight:W}}if(c==="auto"||d){var Z=t,ne=d?F:$;return ne>=a&&(Z=Math.min(ne-M-p,t)),{placement:"top",maxHeight:Z}}if(c==="bottom")return u&&kE(f,H),{placement:"bottom",maxHeight:t};break;case"top":if(F>=R)return{placement:"top",maxHeight:t};if($>=R&&!d)return u&&kg(f,J,X),{placement:"top",maxHeight:t};if(!d&&$>=a||d&&F>=a){var ie=t;return(!d&&$>=a||d&&F>=a)&&(ie=d?F-B:$-B),u&&kg(f,J,X),{placement:"top",maxHeight:ie}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(c,'".'))}return g}function Bme(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var V6=function(t){return t==="auto"?"bottom":t},jme=function(t,i){var a,c=t.placement,u=t.theme,d=u.borderRadius,p=u.spacing,f=u.colors;return ce((a={label:"menu"},Ie(a,Bme(c),"100%"),Ie(a,"position","absolute"),Ie(a,"width","100%"),Ie(a,"zIndex",1),a),i?{}:{backgroundColor:f.neutral0,borderRadius:d,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:p.menuGutter,marginTop:p.menuGutter})},F6=_.createContext(null),$me=function(t){var i=t.children,a=t.minMenuHeight,c=t.maxMenuHeight,u=t.menuPlacement,d=t.menuPosition,p=t.menuShouldScrollIntoView,f=t.theme,g=_.useContext(F6)||{},E=g.setPortalPlacement,y=_.useRef(null),C=_.useState(c),w=we(C,2),R=w[0],O=w[1],k=_.useState(null),A=we(k,2),x=A[0],P=A[1],M=f.spacing.controlHeight;return jI(function(){var B=y.current;if(B){var F=d==="fixed",j=p&&!F,$=Fme({maxHeight:c,menuEl:B,minHeight:a,placement:u,shouldScroll:j,isFixedPosition:F,controlHeight:M});O($.maxHeight),P($.placement),E==null||E($.placement)}},[c,u,d,p,a,E,M]),i({ref:y,placerProps:ce(ce({},t),{},{placement:x||V6(u),maxHeight:R})})},Hme=function(t){var i=t.children,a=t.innerRef,c=t.innerProps;return Wt("div",He({},Zr(t,"menu",{menu:!0}),{ref:a},c),i)},Wme=function(t,i){var a=t.maxHeight,c=t.theme.spacing.baseUnit;return ce({maxHeight:a,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},i?{}:{paddingBottom:c,paddingTop:c})},zme=function(t){var i=t.children,a=t.innerProps,c=t.innerRef,u=t.isMulti;return Wt("div",He({},Zr(t,"menuList",{"menu-list":!0,"menu-list--is-multi":u}),{ref:c},a),i)},B6=function(t,i){var a=t.theme,c=a.spacing.baseUnit,u=a.colors;return ce({textAlign:"center"},i?{}:{color:u.neutral40,padding:"".concat(c*2,"px ").concat(c*3,"px")})},Gme=B6,Kme=B6,j6=function(t){var i=t.children,a=t.innerProps;return Wt("div",He({},Zr(t,"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),i)};j6.defaultProps={children:"No options"};var $6=function(t){var i=t.children,a=t.innerProps;return Wt("div",He({},Zr(t,"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),i)};$6.defaultProps={children:"Loading..."};var Yme=function(t){var i=t.rect,a=t.offset,c=t.position;return{left:i.left,position:c,top:a,width:i.width,zIndex:1}},qme=function(t){var i=t.appendTo,a=t.children,c=t.controlElement,u=t.innerProps,d=t.menuPlacement,p=t.menuPosition,f=_.useRef(null),g=_.useRef(null),E=_.useState(V6(d)),y=we(E,2),C=y[0],w=y[1],R=_.useMemo(function(){return{setPortalPlacement:w}},[]),O=_.useState(null),k=we(O,2),A=k[0],x=k[1],P=_.useCallback(function(){if(c){var j=Pme(c),$=p==="fixed"?0:window.pageYOffset,ee=j[C]+$;(ee!==(A==null?void 0:A.offset)||j.left!==(A==null?void 0:A.rect.left)||j.width!==(A==null?void 0:A.rect.width))&&x({offset:ee,rect:j})}},[c,p,C,A==null?void 0:A.offset,A==null?void 0:A.rect.left,A==null?void 0:A.rect.width]);jI(function(){P()},[P]);var M=_.useCallback(function(){typeof g.current=="function"&&(g.current(),g.current=null),c&&f.current&&(g.current=Rme(c,f.current,P,{elementResize:"ResizeObserver"in window}))},[c,P]);jI(function(){M()},[M]);var B=_.useCallback(function(j){f.current=j,M()},[M]);if(!i&&p!=="fixed"||!A)return null;var F=Wt("div",He({ref:B},Zr(ce(ce({},t),{},{offset:A.offset,position:p,rect:A.rect}),"menuPortal",{"menu-portal":!0}),u),a);return Wt(F6.Provider,{value:R},i?wc.createPortal(F,i):F)},Xme=function(t){var i=t.isDisabled,a=t.isRtl;return{label:"container",direction:a?"rtl":void 0,pointerEvents:i?"none":void 0,position:"relative"}},Jme=function(t){var i=t.children,a=t.innerProps,c=t.isDisabled,u=t.isRtl;return Wt("div",He({},Zr(t,"container",{"--is-disabled":c,"--is-rtl":u}),a),i)},Qme=function(t,i){var a=t.theme.spacing,c=t.isMulti,u=t.hasValue,d=t.selectProps.controlShouldRenderValue;return ce({alignItems:"center",display:c&&u&&d?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},i?{}:{padding:"".concat(a.baseUnit/2,"px ").concat(a.baseUnit*2,"px")})},Zme=function(t){var i=t.children,a=t.innerProps,c=t.isMulti,u=t.hasValue;return Wt("div",He({},Zr(t,"valueContainer",{"value-container":!0,"value-container--is-multi":c,"value-container--has-value":u}),a),i)},e0e=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},t0e=function(t){var i=t.children,a=t.innerProps;return Wt("div",He({},Zr(t,"indicatorsContainer",{indicators:!0}),a),i)},gF,n0e=["size"],r0e={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},H6=function(t){var i=t.size,a=mn(t,n0e);return Wt("svg",He({height:i,width:i,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:r0e},a))},j1=function(t){return Wt(H6,He({size:20},t),Wt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},W6=function(t){return Wt(H6,He({size:20},t),Wt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},z6=function(t,i){var a=t.isFocused,c=t.theme,u=c.spacing.baseUnit,d=c.colors;return ce({label:"indicatorContainer",display:"flex",transition:"color 150ms"},i?{}:{color:a?d.neutral60:d.neutral20,padding:u*2,":hover":{color:a?d.neutral80:d.neutral40}})},i0e=z6,o0e=function(t){var i=t.children,a=t.innerProps;return Wt("div",He({},Zr(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),a),i||Wt(W6,null))},a0e=z6,s0e=function(t){var i=t.children,a=t.innerProps;return Wt("div",He({},Zr(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),a),i||Wt(j1,null))},c0e=function(t,i){var a=t.isDisabled,c=t.theme,u=c.spacing.baseUnit,d=c.colors;return ce({label:"indicatorSeparator",alignSelf:"stretch",width:1},i?{}:{backgroundColor:a?d.neutral10:d.neutral20,marginBottom:u*2,marginTop:u*2})},l0e=function(t){var i=t.innerProps;return Wt("span",He({},i,Zr(t,"indicatorSeparator",{"indicator-separator":!0})))},u0e=mme(gF||(gF=gme([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),d0e=function(t,i){var a=t.isFocused,c=t.size,u=t.theme,d=u.colors,p=u.spacing.baseUnit;return ce({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:c,lineHeight:1,marginRight:c,textAlign:"center",verticalAlign:"middle"},i?{}:{color:a?d.neutral60:d.neutral20,padding:p*2})},ST=function(t){var i=t.delay,a=t.offset;return Wt("span",{css:F1({animation:"".concat(u0e," 1s ease-in-out ").concat(i,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:a?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},G6=function(t){var i=t.innerProps,a=t.isRtl;return Wt("div",He({},Zr(t,"loadingIndicator",{indicator:!0,"loading-indicator":!0}),i),Wt(ST,{delay:0,offset:a}),Wt(ST,{delay:160,offset:!0}),Wt(ST,{delay:320,offset:!a}))};G6.defaultProps={size:4};var h0e=function(t,i){var a=t.isDisabled,c=t.isFocused,u=t.theme,d=u.colors,p=u.borderRadius,f=u.spacing;return ce({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:f.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},i?{}:{backgroundColor:a?d.neutral5:d.neutral0,borderColor:a?d.neutral10:c?d.primary:d.neutral20,borderRadius:p,borderStyle:"solid",borderWidth:1,boxShadow:c?"0 0 0 1px ".concat(d.primary):void 0,"&:hover":{borderColor:c?d.primary:d.neutral30}})},p0e=function(t){var i=t.children,a=t.isDisabled,c=t.isFocused,u=t.innerRef,d=t.innerProps,p=t.menuIsOpen;return Wt("div",He({ref:u},Zr(t,"control",{control:!0,"control--is-disabled":a,"control--is-focused":c,"control--menu-is-open":p}),d),i)},f0e=["data"],m0e=function(t,i){var a=t.theme.spacing;return i?{}:{paddingBottom:a.baseUnit*2,paddingTop:a.baseUnit*2}},g0e=function(t){var i=t.children,a=t.cx,c=t.getStyles,u=t.getClassNames,d=t.Heading,p=t.headingProps,f=t.innerProps,g=t.label,E=t.theme,y=t.selectProps;return Wt("div",He({},Zr(t,"group",{group:!0}),f),Wt(d,He({},p,{selectProps:y,theme:E,getStyles:c,getClassNames:u,cx:a}),g),Wt("div",null,i))},v0e=function(t,i){var a=t.theme,c=a.colors,u=a.spacing;return ce({label:"group",cursor:"default",display:"block"},i?{}:{color:c.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:u.baseUnit*3,paddingRight:u.baseUnit*3,textTransform:"uppercase"})},E0e=function(t){var i=L6(t);i.data;var a=mn(i,f0e);return Wt("div",He({},Zr(t,"groupHeading",{"group-heading":!0}),a))},_0e=["innerRef","isDisabled","isHidden","inputClassName"],S0e=function(t,i){var a=t.isDisabled,c=t.value,u=t.theme,d=u.spacing,p=u.colors;return ce(ce({visibility:a?"hidden":"visible",transform:c?"translateZ(0)":""},y0e),i?{}:{margin:d.baseUnit/2,paddingBottom:d.baseUnit/2,paddingTop:d.baseUnit/2,color:p.neutral80})},K6={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},y0e={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":ce({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},K6)},C0e=function(t){return ce({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},K6)},b0e=function(t){var i=t.cx,a=t.value,c=L6(t),u=c.innerRef,d=c.isDisabled,p=c.isHidden,f=c.inputClassName,g=mn(c,_0e);return Wt("div",He({},Zr(t,"input",{"input-container":!0}),{"data-value":a||""}),Wt("input",He({className:i({input:!0},f),ref:u,style:C0e(p),disabled:d},g)))},T0e=function(t,i){var a=t.theme,c=a.spacing,u=a.borderRadius,d=a.colors;return ce({label:"multiValue",display:"flex",minWidth:0},i?{}:{backgroundColor:d.neutral10,borderRadius:u/2,margin:c.baseUnit/2})},R0e=function(t,i){var a=t.theme,c=a.borderRadius,u=a.colors,d=t.cropWithEllipsis;return ce({overflow:"hidden",textOverflow:d||d===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},i?{}:{borderRadius:c/2,color:u.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},I0e=function(t,i){var a=t.theme,c=a.spacing,u=a.borderRadius,d=a.colors,p=t.isFocused;return ce({alignItems:"center",display:"flex"},i?{}:{borderRadius:u/2,backgroundColor:p?d.dangerLight:void 0,paddingLeft:c.baseUnit,paddingRight:c.baseUnit,":hover":{backgroundColor:d.dangerLight,color:d.danger}})},Y6=function(t){var i=t.children,a=t.innerProps;return Wt("div",a,i)},w0e=Y6,O0e=Y6;function A0e(e){var t=e.children,i=e.innerProps;return Wt("div",He({role:"button"},i),t||Wt(j1,{size:14}))}var N0e=function(t){var i=t.children,a=t.components,c=t.data,u=t.innerProps,d=t.isDisabled,p=t.removeProps,f=t.selectProps,g=a.Container,E=a.Label,y=a.Remove;return Wt(g,{data:c,innerProps:ce(ce({},Zr(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":d})),u),selectProps:f},Wt(E,{data:c,innerProps:ce({},Zr(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:f},i),Wt(y,{data:c,innerProps:ce(ce({},Zr(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(i||"option")},p),selectProps:f}))},x0e=function(t,i){var a=t.isDisabled,c=t.isFocused,u=t.isSelected,d=t.theme,p=d.spacing,f=d.colors;return ce({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},i?{}:{backgroundColor:u?f.primary:c?f.primary25:"transparent",color:a?f.neutral20:u?f.neutral0:"inherit",padding:"".concat(p.baseUnit*2,"px ").concat(p.baseUnit*3,"px"),":active":{backgroundColor:a?void 0:u?f.primary:f.primary50}})},P0e=function(t){var i=t.children,a=t.isDisabled,c=t.isFocused,u=t.isSelected,d=t.innerRef,p=t.innerProps;return Wt("div",He({},Zr(t,"option",{option:!0,"option--is-disabled":a,"option--is-focused":c,"option--is-selected":u}),{ref:d,"aria-disabled":a},p),i)},D0e=function(t,i){var a=t.theme,c=a.spacing,u=a.colors;return ce({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},i?{}:{color:u.neutral50,marginLeft:c.baseUnit/2,marginRight:c.baseUnit/2})},k0e=function(t){var i=t.children,a=t.innerProps;return Wt("div",He({},Zr(t,"placeholder",{placeholder:!0}),a),i)},L0e=function(t,i){var a=t.isDisabled,c=t.theme,u=c.spacing,d=c.colors;return ce({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},i?{}:{color:a?d.neutral40:d.neutral80,marginLeft:u.baseUnit/2,marginRight:u.baseUnit/2})},M0e=function(t){var i=t.children,a=t.isDisabled,c=t.innerProps;return Wt("div",He({},Zr(t,"singleValue",{"single-value":!0,"single-value--is-disabled":a}),c),i)},U0e={ClearIndicator:s0e,Control:p0e,DropdownIndicator:o0e,DownChevron:W6,CrossIcon:j1,Group:g0e,GroupHeading:E0e,IndicatorsContainer:t0e,IndicatorSeparator:l0e,Input:b0e,LoadingIndicator:G6,Menu:Hme,MenuList:zme,MenuPortal:qme,LoadingMessage:$6,NoOptionsMessage:j6,MultiValue:N0e,MultiValueContainer:w0e,MultiValueLabel:O0e,MultiValueRemove:A0e,Option:P0e,Placeholder:k0e,SelectContainer:Jme,SingleValue:M0e,ValueContainer:Zme},V0e=function(t){return ce(ce({},U0e),t.components)},vF=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function F0e(e,t){return!!(e===t||vF(e)&&vF(t))}function B0e(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!F0e(e[i],t[i]))return!1;return!0}function j0e(e,t){t===void 0&&(t=B0e);var i=null;function a(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];if(i&&i.lastThis===this&&t(c,i.lastArgs))return i.lastResult;var d=e.apply(this,c);return i={lastResult:d,lastArgs:c,lastThis:this},d}return a.clear=function(){i=null},a}var $0e={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},EF=function(t){return Wt("span",He({css:$0e},t))},H0e={guidance:function(t){var i=t.isSearchable,a=t.isMulti,c=t.isDisabled,u=t.tabSelectsValue,d=t.context;switch(d){case"menu":return"Use Up and Down to choose options".concat(c?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(u?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(t["aria-label"]||"Select"," is focused ").concat(i?",type to refine list":"",", press Down to open the menu, ").concat(a?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var i=t.action,a=t.label,c=a===void 0?"":a,u=t.labels,d=t.isDisabled;switch(i){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(c,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(u.length>1?"s":""," ").concat(u.join(","),", selected.");case"select-option":return d?"option ".concat(c," is disabled. Select another option."):"option ".concat(c,", selected.");default:return""}},onFocus:function(t){var i=t.context,a=t.focused,c=t.options,u=t.label,d=u===void 0?"":u,p=t.selectValue,f=t.isDisabled,g=t.isSelected,E=function(R,O){return R&&R.length?"".concat(R.indexOf(O)+1," of ").concat(R.length):""};if(i==="value"&&p)return"value ".concat(d," focused, ").concat(E(p,a),".");if(i==="menu"){var y=f?" disabled":"",C="".concat(g?"selected":"focused").concat(y);return"option ".concat(d," ").concat(C,", ").concat(E(c,a),".")}return""},onFilter:function(t){var i=t.inputValue,a=t.resultsMessage;return"".concat(a).concat(i?" for search term "+i:"",".")}},W0e=function(t){var i=t.ariaSelection,a=t.focusedOption,c=t.focusedValue,u=t.focusableOptions,d=t.isFocused,p=t.selectValue,f=t.selectProps,g=t.id,E=f.ariaLiveMessages,y=f.getOptionLabel,C=f.inputValue,w=f.isMulti,R=f.isOptionDisabled,O=f.isSearchable,k=f.menuIsOpen,A=f.options,x=f.screenReaderStatus,P=f.tabSelectsValue,M=f["aria-label"],B=f["aria-live"],F=_.useMemo(function(){return ce(ce({},H0e),E||{})},[E]),j=_.useMemo(function(){var Z="";if(i&&F.onChange){var ne=i.option,ie=i.options,de=i.removedValue,oe=i.removedValues,fe=i.value,ge=function(Ne){return Array.isArray(Ne)?null:Ne},ae=de||ne||ge(fe),se=ae?y(ae):"",he=ie||oe||void 0,pe=he?he.map(y):[],Oe=ce({isDisabled:ae&&R(ae,p),label:se,labels:pe},i);Z=F.onChange(Oe)}return Z},[i,F,R,p,y]),$=_.useMemo(function(){var Z="",ne=a||c,ie=!!(a&&p&&p.includes(a));if(ne&&F.onFocus){var de={focused:ne,label:y(ne),isDisabled:R(ne,p),isSelected:ie,options:u,context:ne===a?"menu":"value",selectValue:p};Z=F.onFocus(de)}return Z},[a,c,y,R,F,u,p]),ee=_.useMemo(function(){var Z="";if(k&&A.length&&F.onFilter){var ne=x({count:u.length});Z=F.onFilter({inputValue:C,resultsMessage:ne})}return Z},[u,C,k,F,A,x]),H=_.useMemo(function(){var Z="";if(F.guidance){var ne=c?"value":k?"menu":"input";Z=F.guidance({"aria-label":M,context:ne,isDisabled:a&&R(a,p),isMulti:w,isSearchable:O,tabSelectsValue:P})}return Z},[M,a,c,w,R,O,k,F,p,P]),J="".concat($," ").concat(ee," ").concat(H),X=Wt(_.Fragment,null,Wt("span",{id:"aria-selection"},j),Wt("span",{id:"aria-context"},J)),W=(i==null?void 0:i.action)==="initial-input-focus";return Wt(_.Fragment,null,Wt(EF,{id:g},W&&X),Wt(EF,{"aria-live":B,"aria-atomic":"false","aria-relevant":"additions text"},d&&!W&&X))},$I=[{base:"A",letters:"Aâ¶ï¼¡ÃÃÃáº¦áº¤áºªáº¨ÃÄÄáº°áº®áº´áº²È¦Ç ÃÇáº¢ÃÇºÇÈÈáº áº¬áº¶á¸ÄÈºâ±¯"},{base:"AA",letters:"ê²"},{base:"AE",letters:"ÃÇ¼Ç¢"},{base:"AO",letters:"ê´"},{base:"AU",letters:"ê¶"},{base:"AV",letters:"ê¸êº"},{base:"AY",letters:"ê¼"},{base:"B",letters:"Bâ·ï¼¢á¸á¸á¸ÉÆÆ"},{base:"C",letters:"Câ¸ï¼£ÄÄÄÄÃá¸ÆÈ»ê¾"},{base:"D",letters:"Dâ¹ï¼¤á¸Äá¸á¸á¸á¸ÄÆÆÆê¹"},{base:"DZ",letters:"Ç±Ç"},{base:"Dz",letters:"Ç²Ç"},{base:"E",letters:"Eâºï¼¥ÃÃÃá»áº¾á»á»áº¼Äá¸á¸ÄÄÃáººÄÈÈáº¸á»È¨á¸Äá¸á¸ÆÆ"},{base:"F",letters:"Fâ»ï¼¦á¸Æê»"},{base:"G",letters:"Gâ¼ï¼§Ç´Äá¸ ÄÄ Ç¦Ä¢Ç¤Æê ê½ê¾"},{base:"H",letters:"Hâ½ï¼¨Ä¤á¸¢á¸¦Èá¸¤á¸¨á¸ªÄ¦â±§â±µê"},{base:"I",letters:"Iâ¾ï¼©ÃÃÃÄ¨ÄªÄ¬Ä°Ãá¸®á»ÇÈÈá»Ä®á¸¬Æ"},{base:"J",letters:"Jâ¿ï¼ªÄ´É"},{base:"K",letters:"Kâï¼«á¸°Ç¨á¸²Ä¶á¸´Æâ±©êêêê¢"},{base:"L",letters:"Lâï¼¬Ä¿Ä¹Ä½á¸¶á¸¸Ä»á¸¼á¸ºÅÈ½â±¢â± êêê"},{base:"LJ",letters:"Ç"},{base:"Lj",letters:"Ç"},{base:"M",letters:"Mâï¼­á¸¾á¹á¹â±®Æ"},{base:"N",letters:"Nâï¼®Ç¸ÅÃá¹Åá¹Åá¹á¹È Æêê¤"},{base:"NJ",letters:"Ç"},{base:"Nj",letters:"Ç"},{base:"O",letters:"Oâï¼¯ÃÃÃá»á»á»á»Ãá¹È¬á¹Åá¹á¹ÅÈ®È°ÃÈªá»ÅÇÈÈÆ á»á»á» á»á»¢á»á»ÇªÇ¬ÃÇ¾ÆÆêê"},{base:"OI",letters:"Æ¢"},{base:"OO",letters:"ê"},{base:"OU",letters:"È¢"},{base:"P",letters:"Pâï¼°á¹á¹Æ¤â±£êêê"},{base:"Q",letters:"Qâï¼±êêÉ"},{base:"R",letters:"Râï¼²Åá¹ÅÈÈá¹á¹Åá¹Éâ±¤êê¦ê"},{base:"S",letters:"Sâï¼³áºÅá¹¤Åá¹ Å á¹¦á¹¢á¹¨ÈÅâ±¾ê¨ê"},{base:"T",letters:"Tâï¼´á¹ªÅ¤á¹¬ÈÅ¢á¹°á¹®Å¦Æ¬Æ®È¾ê"},{base:"TZ",letters:"ê¨"},{base:"U",letters:"Uâï¼µÃÃÃÅ¨á¹¸Åªá¹ºÅ¬ÃÇÇÇÇá»¦Å®Å°ÇÈÈÆ¯á»ªá»¨á»®á»¬á»°á»¤á¹²Å²á¹¶á¹´É"},{base:"V",letters:"Vâï¼¶á¹¼á¹¾Æ²êÉ"},{base:"VY",letters:"ê "},{base:"W",letters:"Wâï¼·áºáºÅ´áºáºáºâ±²"},{base:"X",letters:"Xâï¼¸áºáº"},{base:"Y",letters:"Yâï¼¹á»²ÃÅ¶á»¸È²áºÅ¸á»¶á»´Æ³Éá»¾"},{base:"Z",letters:"Zâï¼ºÅ¹áºÅ»Å½áºáºÆµÈ¤â±¿â±«ê¢"},{base:"a",letters:"aâï½áºÃ Ã¡Ã¢áº§áº¥áº«áº©Ã£ÄÄáº±áº¯áºµáº³È§Ç¡Ã¤Çáº£Ã¥Ç»ÇÈÈáº¡áº­áº·á¸Äâ±¥É"},{base:"aa",letters:"ê³"},{base:"ae",letters:"Ã¦Ç½Ç£"},{base:"ao",letters:"êµ"},{base:"au",letters:"ê·"},{base:"av",letters:"ê¹ê»"},{base:"ay",letters:"ê½"},{base:"b",letters:"bâï½á¸á¸á¸ÆÆÉ"},{base:"c",letters:"câï½ÄÄÄÄÃ§á¸ÆÈ¼ê¿â"},{base:"d",letters:"dâï½á¸Äá¸á¸á¸á¸ÄÆÉÉêº"},{base:"dz",letters:"Ç³Ç"},{base:"e",letters:"eâï½Ã¨Ã©Ãªá»áº¿á»á»áº½Äá¸á¸ÄÄÃ«áº»ÄÈÈáº¹á»È©á¸Äá¸á¸ÉÉÇ"},{base:"f",letters:"fâï½á¸Æê¼"},{base:"g",letters:"gâï½ÇµÄá¸¡ÄÄ¡Ç§Ä£Ç¥É ê¡áµ¹ê¿"},{base:"h",letters:"hâï½Ä¥á¸£á¸§Èá¸¥á¸©á¸«áºÄ§â±¨â±¶É¥"},{base:"hv",letters:"Æ"},{base:"i",letters:"iâï½Ã¬Ã­Ã®Ä©Ä«Ä­Ã¯á¸¯á»ÇÈÈá»Ä¯á¸­É¨Ä±"},{base:"j",letters:"jâï½ÄµÇ°É"},{base:"k",letters:"kâï½á¸±Ç©á¸³Ä·á¸µÆâ±ªêêêê£"},{base:"l",letters:"lâï½ÅÄºÄ¾á¸·á¸¹Ä¼á¸½á¸»Å¿ÅÆÉ«â±¡êêê"},{base:"lj",letters:"Ç"},{base:"m",letters:"mâï½á¸¿á¹á¹É±É¯"},{base:"n",letters:"nâï½Ç¹ÅÃ±á¹Åá¹Åá¹á¹ÆÉ²Åêê¥"},{base:"nj",letters:"Ç"},{base:"o",letters:"oâï½Ã²Ã³Ã´á»á»á»á»Ãµá¹È­á¹Åá¹á¹ÅÈ¯È±Ã¶È«á»ÅÇÈÈÆ¡á»á»á»¡á»á»£á»á»Ç«Ç­Ã¸Ç¿ÉêêÉµ"},{base:"oi",letters:"Æ£"},{base:"ou",letters:"È£"},{base:"oo",letters:"ê"},{base:"p",letters:"pâï½á¹á¹Æ¥áµ½êêê"},{base:"q",letters:"qâ ï½Éêê"},{base:"r",letters:"râ¡ï½Åá¹ÅÈÈá¹á¹Åá¹ÉÉ½êê§ê"},{base:"s",letters:"sâ¢ï½ÃÅá¹¥Åá¹¡Å¡á¹§á¹£á¹©ÈÅÈ¿ê©êáº"},{base:"t",letters:"tâ£ï½á¹«áºÅ¥á¹­ÈÅ£á¹±á¹¯Å§Æ­Êâ±¦ê"},{base:"tz",letters:"ê©"},{base:"u",letters:"uâ¤ï½Ã¹ÃºÃ»Å©á¹¹Å«á¹»Å­Ã¼ÇÇÇÇá»§Å¯Å±ÇÈÈÆ°á»«á»©á»¯á»­á»±á»¥á¹³Å³á¹·á¹µÊ"},{base:"v",letters:"vâ¥ï½á¹½á¹¿ÊêÊ"},{base:"vy",letters:"ê¡"},{base:"w",letters:"wâ¦ï½áºáºÅµáºáºáºáºâ±³"},{base:"x",letters:"xâ§ï½áºáº"},{base:"y",letters:"yâ¨ï½á»³Ã½Å·á»¹È³áºÃ¿á»·áºá»µÆ´Éá»¿"},{base:"z",letters:"zâ©ï½ÅºáºÅ¼Å¾áºáºÆ¶È¥Éâ±¬ê£"}],z0e=new RegExp("["+$I.map(function(e){return e.letters}).join("")+"]","g"),q6={};for(var yT=0;yT<$I.length;yT++)for(var CT=$I[yT],bT=0;bT<CT.letters.length;bT++)q6[CT.letters[bT]]=CT.base;var X6=function(t){return t.replace(z0e,function(i){return q6[i]})},G0e=j0e(X6),_F=function(t){return t.replace(/^\s+|\s+$/g,"")},K0e=function(t){return"".concat(t.label," ").concat(t.value)},Y0e=function(t){return function(i,a){if(i.data.__isNew__)return!0;var c=ce({ignoreCase:!0,ignoreAccents:!0,stringify:K0e,trim:!0,matchFrom:"any"},t),u=c.ignoreCase,d=c.ignoreAccents,p=c.stringify,f=c.trim,g=c.matchFrom,E=f?_F(a):a,y=f?_F(p(i)):p(i);return u&&(E=E.toLowerCase(),y=y.toLowerCase()),d&&(E=G0e(E),y=X6(y)),g==="start"?y.substr(0,E.length)===E:y.indexOf(E)>-1}},q0e=["innerRef"];function X0e(e){var t=e.innerRef,i=mn(e,q0e),a=Vme(i,"onExited","in","enter","exit","appear");return Wt("input",He({ref:t},a,{css:F1({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var J0e=function(t){t.preventDefault(),t.stopPropagation()};function Q0e(e){var t=e.isEnabled,i=e.onBottomArrive,a=e.onBottomLeave,c=e.onTopArrive,u=e.onTopLeave,d=_.useRef(!1),p=_.useRef(!1),f=_.useRef(0),g=_.useRef(null),E=_.useCallback(function(k,A){if(g.current!==null){var x=g.current,P=x.scrollTop,M=x.scrollHeight,B=x.clientHeight,F=g.current,j=A>0,$=M-B-P,ee=!1;$>A&&d.current&&(a&&a(k),d.current=!1),j&&p.current&&(u&&u(k),p.current=!1),j&&A>$?(i&&!d.current&&i(k),F.scrollTop=M,ee=!0,d.current=!0):!j&&-A>P&&(c&&!p.current&&c(k),F.scrollTop=0,ee=!0,p.current=!0),ee&&J0e(k)}},[i,a,c,u]),y=_.useCallback(function(k){E(k,k.deltaY)},[E]),C=_.useCallback(function(k){f.current=k.changedTouches[0].clientY},[]),w=_.useCallback(function(k){var A=f.current-k.changedTouches[0].clientY;E(k,A)},[E]),R=_.useCallback(function(k){if(k){var A=Lme?{passive:!1}:!1;k.addEventListener("wheel",y,A),k.addEventListener("touchstart",C,A),k.addEventListener("touchmove",w,A)}},[w,C,y]),O=_.useCallback(function(k){k&&(k.removeEventListener("wheel",y,!1),k.removeEventListener("touchstart",C,!1),k.removeEventListener("touchmove",w,!1))},[w,C,y]);return _.useEffect(function(){if(t){var k=g.current;return R(k),function(){O(k)}}},[t,R,O]),function(k){g.current=k}}var SF=["boxSizing","height","overflow","paddingRight","position"],yF={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function CF(e){e.preventDefault()}function bF(e){e.stopPropagation()}function TF(){var e=this.scrollTop,t=this.scrollHeight,i=e+this.offsetHeight;e===0?this.scrollTop=1:i===t&&(this.scrollTop=e-1)}function RF(){return"ontouchstart"in window||navigator.maxTouchPoints}var IF=!!(typeof window<"u"&&window.document&&window.document.createElement),Gp=0,Wd={capture:!1,passive:!1};function Z0e(e){var t=e.isEnabled,i=e.accountForScrollbars,a=i===void 0?!0:i,c=_.useRef({}),u=_.useRef(null),d=_.useCallback(function(f){if(IF){var g=document.body,E=g&&g.style;if(a&&SF.forEach(function(R){var O=E&&E[R];c.current[R]=O}),a&&Gp<1){var y=parseInt(c.current.paddingRight,10)||0,C=document.body?document.body.clientWidth:0,w=window.innerWidth-C+y||0;Object.keys(yF).forEach(function(R){var O=yF[R];E&&(E[R]=O)}),E&&(E.paddingRight="".concat(w,"px"))}g&&RF()&&(g.addEventListener("touchmove",CF,Wd),f&&(f.addEventListener("touchstart",TF,Wd),f.addEventListener("touchmove",bF,Wd))),Gp+=1}},[a]),p=_.useCallback(function(f){if(IF){var g=document.body,E=g&&g.style;Gp=Math.max(Gp-1,0),a&&Gp<1&&SF.forEach(function(y){var C=c.current[y];E&&(E[y]=C)}),g&&RF()&&(g.removeEventListener("touchmove",CF,Wd),f&&(f.removeEventListener("touchstart",TF,Wd),f.removeEventListener("touchmove",bF,Wd)))}},[a]);return _.useEffect(function(){if(t){var f=u.current;return d(f),function(){p(f)}}},[t,d,p]),function(f){u.current=f}}var ege=function(){return document.activeElement&&document.activeElement.blur()},tge={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function nge(e){var t=e.children,i=e.lockEnabled,a=e.captureEnabled,c=a===void 0?!0:a,u=e.onBottomArrive,d=e.onBottomLeave,p=e.onTopArrive,f=e.onTopLeave,g=Q0e({isEnabled:c,onBottomArrive:u,onBottomLeave:d,onTopArrive:p,onTopLeave:f}),E=Z0e({isEnabled:i}),y=function(w){g(w),E(w)};return Wt(_.Fragment,null,i&&Wt("div",{onClick:ege,css:tge}),t(y))}var rge={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},ige=function(t){var i=t.name,a=t.onFocus;return Wt("input",{required:!0,name:i,tabIndex:-1,"aria-hidden":"true",onFocus:a,css:rge,value:"",onChange:function(){}})},oge=function(t){return t.label},age=function(t){return t.label},sge=function(t){return t.value},cge=function(t){return!!t.isDisabled},lge={clearIndicator:a0e,container:Xme,control:h0e,dropdownIndicator:i0e,group:m0e,groupHeading:v0e,indicatorsContainer:e0e,indicatorSeparator:c0e,input:S0e,loadingIndicator:d0e,loadingMessage:Kme,menu:jme,menuList:Wme,menuPortal:Yme,multiValue:T0e,multiValueLabel:R0e,multiValueRemove:I0e,noOptionsMessage:Gme,option:x0e,placeholder:D0e,singleValue:L0e,valueContainer:Qme},uge={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},dge=4,J6=4,hge=38,pge=J6*2,fge={baseUnit:J6,controlHeight:hge,menuGutter:pge},TT={borderRadius:dge,colors:uge,spacing:fge},mge={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:mF(),captureMenuScroll:!mF(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Y0e(),formatGroupLabel:oge,getOptionLabel:age,getOptionValue:sge,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:cge,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Dme(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var i=t.count;return"".concat(i," result").concat(i!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function wF(e,t,i,a){var c=t$(e,t,i),u=n$(e,t,i),d=e$(e,t),p=LE(e,t);return{type:"option",data:t,isDisabled:c,isSelected:u,label:d,value:p,index:a}}function Q6(e,t){return e.options.map(function(i,a){if("options"in i){var c=i.options.map(function(d,p){return wF(e,d,t,p)}).filter(function(d){return OF(e,d)});return c.length>0?{type:"group",data:i,options:c,index:a}:void 0}var u=wF(e,i,t,a);return OF(e,u)?u:void 0}).filter(Mme)}function Z6(e){return e.reduce(function(t,i){return i.type==="group"?t.push.apply(t,Et(i.options.map(function(a){return a.data}))):t.push(i.data),t},[])}function gge(e,t){return Z6(Q6(e,t))}function OF(e,t){var i=e.inputValue,a=i===void 0?"":i,c=t.data,u=t.isSelected,d=t.label,p=t.value;return(!i$(e)||!u)&&r$(e,{label:d,value:p,data:c},a)}function vge(e,t){var i=e.focusedValue,a=e.selectValue,c=a.indexOf(i);if(c>-1){var u=t.indexOf(i);if(u>-1)return i;if(c<t.length)return t[c]}return null}function Ege(e,t){var i=e.focusedOption;return i&&t.indexOf(i)>-1?i:t[0]}var e$=function(t,i){return t.getOptionLabel(i)},LE=function(t,i){return t.getOptionValue(i)};function t$(e,t,i){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,i):!1}function n$(e,t,i){if(i.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,i);var a=LE(e,t);return i.some(function(c){return LE(e,c)===a})}function r$(e,t,i){return e.filterOption?e.filterOption(t,i):!0}var i$=function(t){var i=t.hideSelectedOptions,a=t.isMulti;return i===void 0?a:i},_ge=1,o$=function(e){Vl(i,e);var t=Fl(i);function i(a){var c;if(xo(this,i),c=t.call(this,a),c.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},c.blockOptionHover=!1,c.isComposing=!1,c.commonProps=void 0,c.initialTouchX=0,c.initialTouchY=0,c.instancePrefix="",c.openAfterFocus=!1,c.scrollToFocusedOptionOnUpdate=!1,c.userIsDragging=void 0,c.controlRef=null,c.getControlRef=function(p){c.controlRef=p},c.focusedOptionRef=null,c.getFocusedOptionRef=function(p){c.focusedOptionRef=p},c.menuListRef=null,c.getMenuListRef=function(p){c.menuListRef=p},c.inputRef=null,c.getInputRef=function(p){c.inputRef=p},c.focus=c.focusInput,c.blur=c.blurInput,c.onChange=function(p,f){var g=c.props,E=g.onChange,y=g.name;f.name=y,c.ariaOnChange(p,f),E(p,f)},c.setValue=function(p,f,g){var E=c.props,y=E.closeMenuOnSelect,C=E.isMulti,w=E.inputValue;c.onInputChange("",{action:"set-value",prevInputValue:w}),y&&(c.setState({inputIsHiddenAfterUpdate:!C}),c.onMenuClose()),c.setState({clearFocusValueOnUpdate:!0}),c.onChange(p,{action:f,option:g})},c.selectOption=function(p){var f=c.props,g=f.blurInputOnSelect,E=f.isMulti,y=f.name,C=c.state.selectValue,w=E&&c.isOptionSelected(p,C),R=c.isOptionDisabled(p,C);if(w){var O=c.getOptionValue(p);c.setValue(C.filter(function(k){return c.getOptionValue(k)!==O}),"deselect-option",p)}else if(!R)E?c.setValue([].concat(Et(C),[p]),"select-option",p):c.setValue(p,"select-option");else{c.ariaOnChange(p,{action:"select-option",option:p,name:y});return}g&&c.blurInput()},c.removeValue=function(p){var f=c.props.isMulti,g=c.state.selectValue,E=c.getOptionValue(p),y=g.filter(function(w){return c.getOptionValue(w)!==E}),C=Mg(f,y,y[0]||null);c.onChange(C,{action:"remove-value",removedValue:p}),c.focusInput()},c.clearValue=function(){var p=c.state.selectValue;c.onChange(Mg(c.props.isMulti,[],null),{action:"clear",removedValues:p})},c.popValue=function(){var p=c.props.isMulti,f=c.state.selectValue,g=f[f.length-1],E=f.slice(0,f.length-1),y=Mg(p,E,E[0]||null);c.onChange(y,{action:"pop-value",removedValue:g})},c.getValue=function(){return c.state.selectValue},c.cx=function(){for(var p=arguments.length,f=new Array(p),g=0;g<p;g++)f[g]=arguments[g];return Ome.apply(void 0,[c.props.classNamePrefix].concat(f))},c.getOptionLabel=function(p){return e$(c.props,p)},c.getOptionValue=function(p){return LE(c.props,p)},c.getStyles=function(p,f){var g=c.props.unstyled,E=lge[p](f,g);E.boxSizing="border-box";var y=c.props.styles[p];return y?y(E,f):E},c.getClassNames=function(p,f){var g,E;return(g=(E=c.props.classNames)[p])===null||g===void 0?void 0:g.call(E,f)},c.getElementId=function(p){return"".concat(c.instancePrefix,"-").concat(p)},c.getComponents=function(){return V0e(c.props)},c.buildCategorizedOptions=function(){return Q6(c.props,c.state.selectValue)},c.getCategorizedOptions=function(){return c.props.menuIsOpen?c.buildCategorizedOptions():[]},c.buildFocusableOptions=function(){return Z6(c.buildCategorizedOptions())},c.getFocusableOptions=function(){return c.props.menuIsOpen?c.buildFocusableOptions():[]},c.ariaOnChange=function(p,f){c.setState({ariaSelection:ce({value:p},f)})},c.onMenuMouseDown=function(p){p.button===0&&(p.stopPropagation(),p.preventDefault(),c.focusInput())},c.onMenuMouseMove=function(p){c.blockOptionHover=!1},c.onControlMouseDown=function(p){if(!p.defaultPrevented){var f=c.props.openMenuOnClick;c.state.isFocused?c.props.menuIsOpen?p.target.tagName!=="INPUT"&&p.target.tagName!=="TEXTAREA"&&c.onMenuClose():f&&c.openMenu("first"):(f&&(c.openAfterFocus=!0),c.focusInput()),p.target.tagName!=="INPUT"&&p.target.tagName!=="TEXTAREA"&&p.preventDefault()}},c.onDropdownIndicatorMouseDown=function(p){if(!(p&&p.type==="mousedown"&&p.button!==0)&&!c.props.isDisabled){var f=c.props,g=f.isMulti,E=f.menuIsOpen;c.focusInput(),E?(c.setState({inputIsHiddenAfterUpdate:!g}),c.onMenuClose()):c.openMenu("first"),p.preventDefault()}},c.onClearIndicatorMouseDown=function(p){p&&p.type==="mousedown"&&p.button!==0||(c.clearValue(),p.preventDefault(),c.openAfterFocus=!1,p.type==="touchend"?c.focusInput():setTimeout(function(){return c.focusInput()}))},c.onScroll=function(p){typeof c.props.closeMenuOnScroll=="boolean"?p.target instanceof HTMLElement&&H_(p.target)&&c.props.onMenuClose():typeof c.props.closeMenuOnScroll=="function"&&c.props.closeMenuOnScroll(p)&&c.props.onMenuClose()},c.onCompositionStart=function(){c.isComposing=!0},c.onCompositionEnd=function(){c.isComposing=!1},c.onTouchStart=function(p){var f=p.touches,g=f&&f.item(0);g&&(c.initialTouchX=g.clientX,c.initialTouchY=g.clientY,c.userIsDragging=!1)},c.onTouchMove=function(p){var f=p.touches,g=f&&f.item(0);if(g){var E=Math.abs(g.clientX-c.initialTouchX),y=Math.abs(g.clientY-c.initialTouchY),C=5;c.userIsDragging=E>C||y>C}},c.onTouchEnd=function(p){c.userIsDragging||(c.controlRef&&!c.controlRef.contains(p.target)&&c.menuListRef&&!c.menuListRef.contains(p.target)&&c.blurInput(),c.initialTouchX=0,c.initialTouchY=0)},c.onControlTouchEnd=function(p){c.userIsDragging||c.onControlMouseDown(p)},c.onClearIndicatorTouchEnd=function(p){c.userIsDragging||c.onClearIndicatorMouseDown(p)},c.onDropdownIndicatorTouchEnd=function(p){c.userIsDragging||c.onDropdownIndicatorMouseDown(p)},c.handleInputChange=function(p){var f=c.props.inputValue,g=p.currentTarget.value;c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange(g,{action:"input-change",prevInputValue:f}),c.props.menuIsOpen||c.onMenuOpen()},c.onInputFocus=function(p){c.props.onFocus&&c.props.onFocus(p),c.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(c.openAfterFocus||c.props.openMenuOnFocus)&&c.openMenu("first"),c.openAfterFocus=!1},c.onInputBlur=function(p){var f=c.props.inputValue;if(c.menuListRef&&c.menuListRef.contains(document.activeElement)){c.inputRef.focus();return}c.props.onBlur&&c.props.onBlur(p),c.onInputChange("",{action:"input-blur",prevInputValue:f}),c.onMenuClose(),c.setState({focusedValue:null,isFocused:!1})},c.onOptionHover=function(p){c.blockOptionHover||c.state.focusedOption===p||c.setState({focusedOption:p})},c.shouldHideSelectedOptions=function(){return i$(c.props)},c.onValueInputFocus=function(p){p.preventDefault(),p.stopPropagation(),c.focus()},c.onKeyDown=function(p){var f=c.props,g=f.isMulti,E=f.backspaceRemovesValue,y=f.escapeClearsValue,C=f.inputValue,w=f.isClearable,R=f.isDisabled,O=f.menuIsOpen,k=f.onKeyDown,A=f.tabSelectsValue,x=f.openMenuOnFocus,P=c.state,M=P.focusedOption,B=P.focusedValue,F=P.selectValue;if(!R&&!(typeof k=="function"&&(k(p),p.defaultPrevented))){switch(c.blockOptionHover=!0,p.key){case"ArrowLeft":if(!g||C)return;c.focusValue("previous");break;case"ArrowRight":if(!g||C)return;c.focusValue("next");break;case"Delete":case"Backspace":if(C)return;if(B)c.removeValue(B);else{if(!E)return;g?c.popValue():w&&c.clearValue()}break;case"Tab":if(c.isComposing||p.shiftKey||!O||!A||!M||x&&c.isOptionSelected(M,F))return;c.selectOption(M);break;case"Enter":if(p.keyCode===229)break;if(O){if(!M||c.isComposing)return;c.selectOption(M);break}return;case"Escape":O?(c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange("",{action:"menu-close",prevInputValue:C}),c.onMenuClose()):w&&y&&c.clearValue();break;case" ":if(C)return;if(!O){c.openMenu("first");break}if(!M)return;c.selectOption(M);break;case"ArrowUp":O?c.focusOption("up"):c.openMenu("last");break;case"ArrowDown":O?c.focusOption("down"):c.openMenu("first");break;case"PageUp":if(!O)return;c.focusOption("pageup");break;case"PageDown":if(!O)return;c.focusOption("pagedown");break;case"Home":if(!O)return;c.focusOption("first");break;case"End":if(!O)return;c.focusOption("last");break;default:return}p.preventDefault()}},c.instancePrefix="react-select-"+(c.props.instanceId||++_ge),c.state.selectValue=pF(a.value),a.menuIsOpen&&c.state.selectValue.length){var u=c.buildFocusableOptions(),d=u.indexOf(c.state.selectValue[0]);c.state.focusedOption=u[d]}return c}return Po(i,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&fF(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(c){var u=this.props,d=u.isDisabled,p=u.menuIsOpen,f=this.state.isFocused;(f&&!d&&c.isDisabled||f&&p&&!c.menuIsOpen)&&this.focusInput(),f&&d&&!c.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!f&&!d&&c.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(fF(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(c,u){this.props.onInputChange(c,u)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(c){var u=this,d=this.state,p=d.selectValue,f=d.isFocused,g=this.buildFocusableOptions(),E=c==="first"?0:g.length-1;if(!this.props.isMulti){var y=g.indexOf(p[0]);y>-1&&(E=y)}this.scrollToFocusedOptionOnUpdate=!(f&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:g[E]},function(){return u.onMenuOpen()})}},{key:"focusValue",value:function(c){var u=this.state,d=u.selectValue,p=u.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var f=d.indexOf(p);p||(f=-1);var g=d.length-1,E=-1;if(d.length){switch(c){case"previous":f===0?E=0:f===-1?E=g:E=f-1;break;case"next":f>-1&&f<g&&(E=f+1);break}this.setState({inputIsHidden:E!==-1,focusedValue:d[E]})}}}},{key:"focusOption",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",u=this.props.pageSize,d=this.state.focusedOption,p=this.getFocusableOptions();if(p.length){var f=0,g=p.indexOf(d);d||(g=-1),c==="up"?f=g>0?g-1:p.length-1:c==="down"?f=(g+1)%p.length:c==="pageup"?(f=g-u,f<0&&(f=0)):c==="pagedown"?(f=g+u,f>p.length-1&&(f=p.length-1)):c==="last"&&(f=p.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:p[f],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(TT):ce(ce({},TT),this.props.theme):TT}},{key:"getCommonProps",value:function(){var c=this.clearValue,u=this.cx,d=this.getStyles,p=this.getClassNames,f=this.getValue,g=this.selectOption,E=this.setValue,y=this.props,C=y.isMulti,w=y.isRtl,R=y.options,O=this.hasValue();return{clearValue:c,cx:u,getStyles:d,getClassNames:p,getValue:f,hasValue:O,isMulti:C,isRtl:w,options:R,selectOption:g,selectProps:y,setValue:E,theme:this.getTheme()}}},{key:"hasValue",value:function(){var c=this.state.selectValue;return c.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var c=this.props,u=c.isClearable,d=c.isMulti;return u===void 0?d:u}},{key:"isOptionDisabled",value:function(c,u){return t$(this.props,c,u)}},{key:"isOptionSelected",value:function(c,u){return n$(this.props,c,u)}},{key:"filterOption",value:function(c,u){return r$(this.props,c,u)}},{key:"formatOptionLabel",value:function(c,u){if(typeof this.props.formatOptionLabel=="function"){var d=this.props.inputValue,p=this.state.selectValue;return this.props.formatOptionLabel(c,{context:u,inputValue:d,selectValue:p})}else return this.getOptionLabel(c)}},{key:"formatGroupLabel",value:function(c){return this.props.formatGroupLabel(c)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var c=this.props,u=c.isDisabled,d=c.isSearchable,p=c.inputId,f=c.inputValue,g=c.tabIndex,E=c.form,y=c.menuIsOpen,C=c.required,w=this.getComponents(),R=w.Input,O=this.state,k=O.inputIsHidden,A=O.ariaSelection,x=this.commonProps,P=p||this.getElementId("input"),M=ce(ce(ce({"aria-autocomplete":"list","aria-expanded":y,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":C,role:"combobox"},y&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!d&&{"aria-readonly":!0}),this.hasValue()?(A==null?void 0:A.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return d?_.createElement(R,He({},x,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:P,innerRef:this.getInputRef,isDisabled:u,isHidden:k,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:g,form:E,type:"text",value:f},M)):_.createElement(X0e,He({id:P,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:DE,onFocus:this.onInputFocus,disabled:u,tabIndex:g,inputMode:"none",form:E,value:""},M))}},{key:"renderPlaceholderOrValue",value:function(){var c=this,u=this.getComponents(),d=u.MultiValue,p=u.MultiValueContainer,f=u.MultiValueLabel,g=u.MultiValueRemove,E=u.SingleValue,y=u.Placeholder,C=this.commonProps,w=this.props,R=w.controlShouldRenderValue,O=w.isDisabled,k=w.isMulti,A=w.inputValue,x=w.placeholder,P=this.state,M=P.selectValue,B=P.focusedValue,F=P.isFocused;if(!this.hasValue()||!R)return A?null:_.createElement(y,He({},C,{key:"placeholder",isDisabled:O,isFocused:F,innerProps:{id:this.getElementId("placeholder")}}),x);if(k)return M.map(function($,ee){var H=$===B,J="".concat(c.getOptionLabel($),"-").concat(c.getOptionValue($));return _.createElement(d,He({},C,{components:{Container:p,Label:f,Remove:g},isFocused:H,isDisabled:O,key:J,index:ee,removeProps:{onClick:function(){return c.removeValue($)},onTouchEnd:function(){return c.removeValue($)},onMouseDown:function(W){W.preventDefault()}},data:$}),c.formatOptionLabel($,"value"))});if(A)return null;var j=M[0];return _.createElement(E,He({},C,{data:j,isDisabled:O}),this.formatOptionLabel(j,"value"))}},{key:"renderClearIndicator",value:function(){var c=this.getComponents(),u=c.ClearIndicator,d=this.commonProps,p=this.props,f=p.isDisabled,g=p.isLoading,E=this.state.isFocused;if(!this.isClearable()||!u||f||!this.hasValue()||g)return null;var y={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return _.createElement(u,He({},d,{innerProps:y,isFocused:E}))}},{key:"renderLoadingIndicator",value:function(){var c=this.getComponents(),u=c.LoadingIndicator,d=this.commonProps,p=this.props,f=p.isDisabled,g=p.isLoading,E=this.state.isFocused;if(!u||!g)return null;var y={"aria-hidden":"true"};return _.createElement(u,He({},d,{innerProps:y,isDisabled:f,isFocused:E}))}},{key:"renderIndicatorSeparator",value:function(){var c=this.getComponents(),u=c.DropdownIndicator,d=c.IndicatorSeparator;if(!u||!d)return null;var p=this.commonProps,f=this.props.isDisabled,g=this.state.isFocused;return _.createElement(d,He({},p,{isDisabled:f,isFocused:g}))}},{key:"renderDropdownIndicator",value:function(){var c=this.getComponents(),u=c.DropdownIndicator;if(!u)return null;var d=this.commonProps,p=this.props.isDisabled,f=this.state.isFocused,g={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return _.createElement(u,He({},d,{innerProps:g,isDisabled:p,isFocused:f}))}},{key:"renderMenu",value:function(){var c=this,u=this.getComponents(),d=u.Group,p=u.GroupHeading,f=u.Menu,g=u.MenuList,E=u.MenuPortal,y=u.LoadingMessage,C=u.NoOptionsMessage,w=u.Option,R=this.commonProps,O=this.state.focusedOption,k=this.props,A=k.captureMenuScroll,x=k.inputValue,P=k.isLoading,M=k.loadingMessage,B=k.minMenuHeight,F=k.maxMenuHeight,j=k.menuIsOpen,$=k.menuPlacement,ee=k.menuPosition,H=k.menuPortalTarget,J=k.menuShouldBlockScroll,X=k.menuShouldScrollIntoView,W=k.noOptionsMessage,Z=k.onMenuScrollToTop,ne=k.onMenuScrollToBottom;if(!j)return null;var ie=function(he,pe){var Oe=he.type,be=he.data,Ne=he.isDisabled,Ae=he.isSelected,at=he.label,it=he.value,ze=O===be,ht=Ne?void 0:function(){return c.onOptionHover(be)},Pe=Ne?void 0:function(){return c.selectOption(be)},Ye="".concat(c.getElementId("option"),"-").concat(pe),lt={id:Ye,onClick:Pe,onMouseMove:ht,onMouseOver:ht,tabIndex:-1};return _.createElement(w,He({},R,{innerProps:lt,data:be,isDisabled:Ne,isSelected:Ae,key:Ye,label:at,type:Oe,value:it,isFocused:ze,innerRef:ze?c.getFocusedOptionRef:void 0}),c.formatOptionLabel(he.data,"menu"))},de;if(this.hasOptions())de=this.getCategorizedOptions().map(function(se){if(se.type==="group"){var he=se.data,pe=se.options,Oe=se.index,be="".concat(c.getElementId("group"),"-").concat(Oe),Ne="".concat(be,"-heading");return _.createElement(d,He({},R,{key:be,data:he,options:pe,Heading:p,headingProps:{id:Ne,data:se.data},label:c.formatGroupLabel(se.data)}),se.options.map(function(Ae){return ie(Ae,"".concat(Oe,"-").concat(Ae.index))}))}else if(se.type==="option")return ie(se,"".concat(se.index))});else if(P){var oe=M({inputValue:x});if(oe===null)return null;de=_.createElement(y,R,oe)}else{var fe=W({inputValue:x});if(fe===null)return null;de=_.createElement(C,R,fe)}var ge={minMenuHeight:B,maxMenuHeight:F,menuPlacement:$,menuPosition:ee,menuShouldScrollIntoView:X},ae=_.createElement($me,He({},R,ge),function(se){var he=se.ref,pe=se.placerProps,Oe=pe.placement,be=pe.maxHeight;return _.createElement(f,He({},R,ge,{innerRef:he,innerProps:{onMouseDown:c.onMenuMouseDown,onMouseMove:c.onMenuMouseMove,id:c.getElementId("listbox")},isLoading:P,placement:Oe}),_.createElement(nge,{captureEnabled:A,onTopArrive:Z,onBottomArrive:ne,lockEnabled:J},function(Ne){return _.createElement(g,He({},R,{innerRef:function(at){c.getMenuListRef(at),Ne(at)},isLoading:P,maxHeight:be,focusedOption:O}),de)}))});return H||ee==="fixed"?_.createElement(E,He({},R,{appendTo:H,controlElement:this.controlRef,menuPlacement:$,menuPosition:ee}),ae):ae}},{key:"renderFormField",value:function(){var c=this,u=this.props,d=u.delimiter,p=u.isDisabled,f=u.isMulti,g=u.name,E=u.required,y=this.state.selectValue;if(E&&!this.hasValue()&&!p)return _.createElement(ige,{name:g,onFocus:this.onValueInputFocus});if(!(!g||p))if(f)if(d){var C=y.map(function(O){return c.getOptionValue(O)}).join(d);return _.createElement("input",{name:g,type:"hidden",value:C})}else{var w=y.length>0?y.map(function(O,k){return _.createElement("input",{key:"i-".concat(k),name:g,type:"hidden",value:c.getOptionValue(O)})}):_.createElement("input",{name:g,type:"hidden",value:""});return _.createElement("div",null,w)}else{var R=y[0]?this.getOptionValue(y[0]):"";return _.createElement("input",{name:g,type:"hidden",value:R})}}},{key:"renderLiveRegion",value:function(){var c=this.commonProps,u=this.state,d=u.ariaSelection,p=u.focusedOption,f=u.focusedValue,g=u.isFocused,E=u.selectValue,y=this.getFocusableOptions();return _.createElement(W0e,He({},c,{id:this.getElementId("live-region"),ariaSelection:d,focusedOption:p,focusedValue:f,isFocused:g,selectValue:E,focusableOptions:y}))}},{key:"render",value:function(){var c=this.getComponents(),u=c.Control,d=c.IndicatorsContainer,p=c.SelectContainer,f=c.ValueContainer,g=this.props,E=g.className,y=g.id,C=g.isDisabled,w=g.menuIsOpen,R=this.state.isFocused,O=this.commonProps=this.getCommonProps();return _.createElement(p,He({},O,{className:E,innerProps:{id:y,onKeyDown:this.onKeyDown},isDisabled:C,isFocused:R}),this.renderLiveRegion(),_.createElement(u,He({},O,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:C,isFocused:R,menuIsOpen:w}),_.createElement(f,He({},O,{isDisabled:C}),this.renderPlaceholderOrValue(),this.renderInput()),_.createElement(d,He({},O,{isDisabled:C}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(c,u){var d=u.prevProps,p=u.clearFocusValueOnUpdate,f=u.inputIsHiddenAfterUpdate,g=u.ariaSelection,E=u.isFocused,y=u.prevWasFocused,C=c.options,w=c.value,R=c.menuIsOpen,O=c.inputValue,k=c.isMulti,A=pF(w),x={};if(d&&(w!==d.value||C!==d.options||R!==d.menuIsOpen||O!==d.inputValue)){var P=R?gge(c,A):[],M=p?vge(u,A):null,B=Ege(u,P);x={selectValue:A,focusedOption:B,focusedValue:M,clearFocusValueOnUpdate:!1}}var F=f!=null&&c!==d?{inputIsHidden:f,inputIsHiddenAfterUpdate:void 0}:{},j=g,$=E&&y;return E&&!$&&(j={value:Mg(k,A,A[0]||null),options:A,action:"initial-input-focus"},$=!y),(g==null?void 0:g.action)==="initial-input-focus"&&(j=null),ce(ce(ce({},x),F),{},{prevProps:c,ariaSelection:j,prevWasFocused:$})}}]),i}(_.Component);o$.defaultProps=mge;var Sge=_.forwardRef(function(e,t){var i=Vfe(e);return _.createElement(o$,He({ref:t},i))});const yge=Sge;const{Title:Cge,Paragraph:bge}=Pi,Tge=_.memo(function({label:t}){const a=xs().filter(f=>f.hasAudio||f.hasVideo),c=Sf(f=>f.localTracks),u=Sf(f=>f.hostRoom),d=Ns(),p=es();return Ze("div",{className:"room-selector-item",children:[le("i",{className:"i-mdi-chat-processing-outline text-5 color-zinc"}),le("code",{className:"bg-rose color-white px-2 rounded",children:t}),d&&c&&p.uid&&(u==null?void 0:u.client.channelName)===p.channelName&&Ze("div",{className:"user",children:[le(d6,{audioTrack:c[0],cameraOn:!0,micOn:!0,videoTrack:c[1]}),le("div",{className:"mask"}),le("label",{className:"label",children:As(p.uid)})]},p.uid),le(Zi,{children:a.map(f=>Ze("div",{className:"user",children:[le(D1,{user:f}),le("div",{className:"mask"}),le("label",{className:"label",children:As(f.uid)})]},f.uid))})]})}),Rge=({innerProps:e,isDisabled:t,label:i,data:a})=>{const{client:c}=a.value;return t?null:le("div",{...e,children:le(a6,{client:c,children:le(Tge,{label:i})})})},Ige=()=>{const e=Sf(d=>d.getRooms),[t,i]=_.useState(!1);_.useEffect(()=>{e()},[]);const a=Sf(d=>d.rooms),c=Sf(d=>d.selectChannel),u=_.useMemo(()=>a==null?void 0:a.map(d=>({label:d.channel.replace(/[^0-9]*/,"Room"),value:d})),[a]);return le(Wr,{children:t?le("div",{className:"max-w-lg p-10",children:le(yge,{components:{Option:Rge},isMulti:!1,menuIsOpen:!0,onChange:d=>{var p;return c((p=d==null?void 0:d.value)==null?void 0:p.channel)},options:u})}):Ze("div",{className:"h-screen p-3",children:[le(Cge,{children:"multi-channel"}),le(bge,{children:"This is multi-channel example. By create multi Agora Client. You can join multi-channel"}),le("div",{className:"text-xl",children:le(Xi,{onClick:()=>i(!0),type:"primary",children:"show demo"})})]})})};const{Title:wge,Paragraph:Oge,Text:Age}=Pi,Nge=()=>{const[e,t]=_.useState(!1);ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},e);const[i,a]=_.useState(!1),[c,u]=_.useState(!1),d=xs(),[p,f]=_.useState(!0),{videoTracks:g}=Wh(p?d:d.filter((w,R)=>R==0)),{audioTracks:E}=hm(d);return E.map(w=>w.play()),Ze(Wr,{children:[e?le(U1,{cameraOn:c,micOn:i,renderAction:()=>le("div",{className:"p-4 text-xl",children:le(Xi,{onClick:()=>f(w=>!w),type:"primary",children:`switch to layout ${p?2:1}`})}),renderRemoteUsers:()=>le(Zi,{children:p?le(xge,{videoTracks:g}):le(Pge,{videoTracks:g})})}):Ze("div",{className:"h-screen p-3",children:[le(wge,{children:"SwitchLayout"}),Ze(Oge,{children:["By using ",le(Age,{keyboard:!0,children:"useRemoteVideoTracks"})," hook to dynamically switch the camera track, this will not generate a new track, but only dynamically subscribe and unsubscribe the track according to your needs."]})]}),le(no,{calling:e,cameraOn:c,micOn:i,setCalling:()=>{t(w=>!w)},setCamera:()=>{u(w=>!w)},setMic:()=>{a(w=>!w)}})]})};function xge({videoTracks:e}){return le(Zi,{children:e.map(t=>Ze(Ya.Item,{children:[le(Gh,{cover:Qa(),track:t},t.getUserId()),le(Lc,{children:`Layout1 ${As(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}function Pge({videoTracks:e}){return le(Zi,{children:e.map(t=>Ze(Ya.Item,{children:[le(Gh,{cover:Qa(),track:t},t.getUserId()),le(Lc,{children:`Layout2 ${As(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}const a$=[{label:"switch-layout",component:Nge},{label:"multi-channel",component:Ige}];function Dge({videoTracks:e}){return le(Zi,{children:e.map(t=>Ze(Ya.Item,{children:[le(Gh,{cover:Qa(),track:t},t.getUserId()),le(Lc,{children:`${As(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}const kge=()=>{const[e,t]=_.useState(!1);ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},e);const[i,a]=_.useState(!1),[c,u]=_.useState(!1),d=xs(),{videoTracks:p}=Wh(d),{audioTracks:f}=hm(d);return f.map(g=>g.play()),Ze(Wr,{children:[e?le(U1,{cameraOn:c,micOn:i,renderRemoteUsers:()=>le(Dge,{videoTracks:p})}):le(Wr,{}),le(no,{calling:e,cameraOn:c,micOn:i,setCalling:()=>{t(g=>!g)},setCamera:()=>{u(g=>!g)},setMic:()=>{a(g=>!g)}})]})},s$=[{label:"overview",component:kge}],{Title:Lge}=Pi,Mge=()=>{ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},!0);const[e,t]=_.useState(!1),[i,a]=_.useState([]),[c,u]=_.useState(""),{localCameraTrack:d}=$l();return Fc([d]),_.useEffect(()=>{Pl.getCameras().then(f=>{a(f),u(f[0].deviceId)}).catch()},[]),Ze(Wr,{children:[Ze("div",{className:"h-screen p-3",children:[le(Lge,{children:"CameraVideoTrack"}),le(n5,{fieldNames:{label:"label",value:"deviceId"},onChange:f=>{u(f)},options:i,value:c}),le(u6,{deviceId:c,play:e,style:{width:"300px",height:"300px"},track:d})]}),le(no,{cameraOn:e,setCamera:()=>{t(f=>!f)}})]})},{Title:Uge,Paragraph:RT}=Pi,Vge=()=>{ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},!0);const[e,t]=_.useState(!1),[i,a]=_.useState(),{localMicrophoneTrack:c}=Hl(e);return Fc([c]),_.useEffect(()=>{c&&a({muted:c.muted,isPlaying:c.isPlaying,enabled:c.enabled})},[e,c]),Ze(Wr,{children:[Ze("div",{className:"h-screen p-3",children:[le(Uge,{children:"local audio track status"}),i&&Ze(Zi,{children:[le(RT,{children:`muted: ${i==null?void 0:i.muted}`}),le(RT,{children:`isPlaying: ${i.isPlaying}`}),le(RT,{children:`enabled: ${i==null?void 0:i.enabled}`})]}),le(N1,{play:e,track:c})]}),le(no,{micOn:e,setMic:()=>{t(u=>!u)}})]})},{Title:Fge}=Pi,Bge=()=>{ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},!0);const[e,t]=_.useState(!1),[i,a]=_.useState(!1),c=_.useMemo(()=>Qa(),[]),{localMicrophoneTrack:u}=Hl(e),{localCameraTrack:d}=$l(i);return Fc([u,d]),Ze(Wr,{children:[Ze("div",{className:"h-screen p-3",children:[le(Fge,{children:"local microphone and camera"}),le(B_,{audioTrack:u,cameraOn:i,cover:c,micOn:e,style:{width:"300px",height:"300px"},videoTrack:d})]}),le(no,{cameraOn:i,micOn:e,setCamera:()=>{a(p=>!p)},setMic:()=>{t(p=>!p)}})]})},{Title:jge}=Pi,$ge=()=>{ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},!0);const[e,t]=_.useState(!1),[i,a]=_.useState(!1),[c,u]=_.useState(!1),[d,p]=_.useState(!1),{localMicrophoneTrack:f}=Hl(e),{localCameraTrack:g}=$l(i);return Fc([f,g]),Ze(Wr,{children:[Ze("div",{className:"h-screen p-3 overflow-auto",children:[le(jge,{children:"local user status"}),Ze(Xi,{className:"m-2",onClick:()=>{p(E=>!E)},type:d?"primary":"default",children:["playAudio : ",JSON.stringify(d)]}),Ze(Xi,{className:"m-2",onClick:()=>{u(E=>!E)},type:c?"primary":"default",children:["playVideo : ",JSON.stringify(c)]}),le(Xi,{className:"m-2",onClick:()=>{u(!0),a(!1)},type:"primary",children:"cameraOn=false playVideo=true"}),le(Xi,{className:"m-2",onClick:()=>{u(!1),a(!0)},type:"primary",children:"cameraOn=true playVideo=false"}),le(d6,{audioTrack:f,cameraOn:i,className:"m-2",micOn:e,playAudio:d,playVideo:c,style:{width:"300px",height:"300px"},videoTrack:g})]}),le(no,{cameraOn:i,micOn:e,setCamera:()=>{a(E=>!E)},setMic:()=>{t(E=>!E)}})]})},{Title:Hge}=Pi,Wge=()=>{ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},!0);const[e,t]=_.useState(!1),{localCameraTrack:i}=$l();return Fc([i]),Ze(Wr,{children:[Ze("div",{className:"h-screen p-3",children:[le(Hge,{children:"local video track"}),le(x1,{play:e,style:{width:"300px",height:"300px"},track:i})]}),le(no,{cameraOn:e,setCamera:()=>{t(a=>!a)}})]})},{Title:zge,Paragraph:IT}=Pi,Gge=()=>{ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},!0);const[e,t]=_.useState(!1),[i,a]=_.useState(),[c,u]=_.useState([]),[d,p]=_.useState(""),{localMicrophoneTrack:f}=Hl();Fc([f]),_.useEffect(()=>{Pl.getMicrophones().then(E=>{u(E),p(E[0].deviceId)}).catch()},[]),_.useEffect(()=>{f&&a({muted:f.muted,isPlaying:f.isPlaying,enabled:f.enabled})},[e,f]);const g=E=>{p(E)};return Ze(Wr,{children:[Ze("div",{className:"h-screen p-3",children:[le(zge,{children:"local audio track status"}),i&&Ze(Zi,{children:[le(IT,{children:`muted: ${i==null?void 0:i.muted}`}),le(IT,{children:`isPlaying: ${i.isPlaying}`}),le(IT,{children:`enabled: ${i==null?void 0:i.enabled}`})]}),le(n5,{fieldNames:{label:"label",value:"deviceId"},onChange:g,options:c,value:d}),le(l6,{deviceId:d,play:e,track:f})]}),le(no,{micOn:e,setMic:()=>{t(E=>!E)}})]})},{Title:Kge}=Pi,Yge=()=>{const[e,t]=_.useState(!1);ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},e);const[i,a]=_.useState(),c=xs(),{audioTracks:u}=hm(c);return _.useEffect(()=>{if(u&&u.length>0){const d=[];u.map(p=>{d.push({isPlay:p.isPlaying,id:p.getTrackId(),track:p})}),a(d)}else a([])},[u]),_.useEffect(()=>{e||a([])},[e]),Ze(Wr,{children:[Ze("div",{className:"h-screen p-3",children:[le(Kge,{children:"remote audio track status"}),i&&i.length>0&&i.map(d=>Ze("div",{children:[le("div",{className:"p-4 text-xl",children:le(Xi,{onClick:()=>{d.isPlay=!d.isPlay,a([...i])},type:"primary",children:"switch this remote audio track play status"})}),d.isPlay,le(h6,{play:d.isPlay,track:d.track})]},d.id))]}),le(no,{calling:e,setCalling:()=>{t(d=>!d)}})]})},{Title:qge}=Pi,Xge=()=>{const[e,t]=_.useState(!1),i=_.useMemo(()=>Qa(),[]);ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},e);const[a,c]=_.useState(),u=xs();return _.useEffect(()=>{if(u.length>0){const d=[];u.map(p=>{d.push({playVideo:!0,playAudio:!0,id:p.uid,user:p})}),c(d)}else c([])},[u]),_.useEffect(()=>{e||c([])},[e]),Ze(Wr,{children:[Ze("div",{className:"h-screen p-3",children:[le(qge,{children:"RemoteUser"}),a&&a.length>0&&a.map(d=>Ze("div",{children:[Ze("div",{className:"text-xl",children:[le(Xi,{className:"m-2",onClick:()=>{d.playVideo=!d.playVideo,c([...a])},type:d.playVideo?"default":"primary",children:`${d.playVideo?"stop":"play"} RemoteUser Video`}),le(Xi,{className:"m-2",onClick:()=>{d.playAudio=!d.playAudio,c([...a])},type:d.playAudio?"default":"primary",children:`${d.playAudio?"stop":"play"} RemoteUser Audio`})]}),le("div",{className:"p-4 text-xl",children:le(D1,{cover:i,playAudio:d.playAudio,playVideo:d.playVideo,style:{width:"150px",height:"100px"},user:d.user})})]},d.id))]}),le(no,{calling:e,setCalling:()=>{t(d=>!d)}})]})},{Title:Jge}=Pi,Qge=()=>{const[e,t]=_.useState(!1),i=_.useMemo(()=>Qa(),[]);ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},e);const[a,c]=_.useState(),u=xs(),{videoTracks:d}=Wh(u);return _.useEffect(()=>{if(d&&d.length>0){const p=[];d.map(f=>{p.push({isPlay:!0,id:f.getTrackId(),track:f})}),c(p)}else c([])},[d]),_.useEffect(()=>{e||c([])},[e]),Ze(Wr,{children:[Ze("div",{className:"h-screen p-3",children:[le(Jge,{children:"RemoteVideoPlayer"}),a&&a.length>0&&a.map(p=>Ze("div",{children:[le("div",{className:"p-4 text-xl",children:le(Xi,{onClick:()=>{p.isPlay=!p.isPlay,c([...a])},type:p.isPlay?"default":"primary",children:`${p.isPlay?"stop":"play"} RemoteVideoPlayer`})}),le("div",{className:"p-4 text-xl",children:le(Gh,{cover:i,playVideo:p.isPlay,style:{width:"150px",height:"100px"},track:p.track})})]},p.id))]}),le(no,{calling:e,setCalling:()=>{t(p=>!p)}})]})},{Title:Zge}=Pi,eve=()=>{const[e,t]=_.useState(!1);ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},e);const[i,a]=_.useState(),c=xs(),{videoTracks:u}=Wh(c);return _.useEffect(()=>{if(u&&u.length>0){const d=[];u.map(p=>{d.push({isPlay:!0,id:p.getTrackId(),track:p})}),a(d)}else a([])},[u]),_.useEffect(()=>{e||a([])},[e]),Ze(Wr,{children:[Ze("div",{className:"h-screen p-3",children:[le(Zge,{children:"remote video track status"}),i&&i.length>0&&i.map(d=>Ze("div",{children:[le("div",{className:"p-4 text-xl",children:le(Xi,{onClick:()=>{d.isPlay=!d.isPlay,a([...i])},type:"primary",children:"switch this remote video track play status"})}),le("div",{className:"p-4 text-xl",children:le(P1,{play:d.isPlay,style:{width:"150px",height:"100px"},track:d.track})})]},d.id))]}),le(no,{calling:e,setCalling:()=>{t(d=>!d)}})]})},c$=[{label:"LocalAudioTrack",component:Vge},{label:"RemoteAudioTrack",component:Yge},{label:"LocalVideoTrack",component:Wge},{label:"RemoteVideoTrack",component:eve},{label:"LocalUser",component:$ge},{label:"LocalMicrophoneAndCameraUser",component:Bge},{label:"CameraVideoTrack",component:Mge},{label:"MicrophoneAudioTrack",component:Gge},{label:"RemoteUser",component:Xge},{label:"RemoteVideoPlayer",component:Qge}],{Title:tve}=Pi,nve=()=>{ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},!0);const[e,t]=_.useState(!1),{localMicrophoneTrack:i}=Hl();return A1(i,e),Ze(Wr,{children:[le("div",{className:"h-screen p-3",children:le(tve,{children:"useAutoPlayAudioTrack"})}),le(no,{micOn:e,setMic:()=>{t(a=>!a)}})]})},{Title:rve}=Pi,ive=()=>{ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},!0);const[e,t]=_.useState(!1),i=_.useRef(null),{localCameraTrack:a}=$l();return O1(a,e,i.current),Ze(Wr,{children:[Ze("div",{className:"h-screen p-3",children:[le(rve,{children:"useAutoPlayVideoTrack"}),le("div",{className:"p-4 text-xl",children:le("div",{ref:c=>i.current=c,style:{width:"150px",height:"100px"}})})]}),le(no,{cameraOn:e,setCamera:()=>{t(c=>!c)}})]})},{Title:ove,Paragraph:wT,Text:ave}=Pi,sve=()=>{const[e,t]=_.useState(!1),i=whe();return ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},e),le(Wr,{children:Ze("div",{className:"h-screen p-3",children:[le(ove,{children:"useConnectionState"}),Ze(wT,{children:["By using ",le(ave,{keyboard:!0,children:"useConnectionState"})," hook to get the current connection state of the client."]}),le(wT,{children:`result: ${i}`}),Ze(wT,{children:[le(Xi,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),le(Xi,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:cve,Paragraph:OT,Text:lve}=Pi,uve=()=>{const[e,t]=_.useState(!1),i=U_();return ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},e),le(Wr,{children:Ze("div",{className:"h-screen p-3",children:[le(cve,{children:"useCurrentUID"}),Ze(OT,{children:["By using ",le(lve,{keyboard:!0,children:"useCurrentUID"})," hook to get the UID of the current user."]}),le(OT,{children:`result: ${i}`}),Ze(OT,{children:[le(Xi,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),le(Xi,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:dve,Paragraph:AT,Text:hve}=Pi,pve=()=>{const[e,t]=_.useState(!1),i=Ns();return ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},e),le(Wr,{children:Ze("div",{className:"h-screen p-3",children:[le(dve,{children:"useIsConnected"}),Ze(AT,{children:["By using ",le(hve,{keyboard:!0,children:"useIsConnected"})," hook to determines whether the client is successfully connected to Agora server."]}),le(AT,{children:`result: ${i}`}),Ze(AT,{children:[le(Xi,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),le(Xi,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:fve,Paragraph:AF,Text:Kp}=Pi,mve=()=>{const[e,t]=_.useState(!1),{data:i,isLoading:a,isConnected:c,error:u}=ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},e),[d,p]=_.useState(!1),[f,g]=_.useState(!1),E=xs(),{videoTracks:y}=Wh(E),{audioTracks:C}=hm(E);C.map(R=>R.play());const w=()=>le(Zi,{children:y.map(R=>Ze(Ya.Item,{children:[le(Gh,{cover:Qa(),track:R},R.getUserId()),le(Lc,{children:`${As(R.getUserId())}{${R.getUserId()}}`})]},R.getUserId()))});return Ze(Wr,{children:[Ze("div",{className:"h-screen p-3",children:[le(fve,{children:"UseJoin"}),Ze(AF,{children:["By using ",le(Kp,{keyboard:!0,children:"UseJoin"})," hook to join room."]}),Ze(AF,{children:["You can do some actions like fetching token before calling join.",le("br",{}),"Below is the returned data."]}),Ze(Kp,{children:["data: ",i]}),Ze(Kp,{className:"pl-3",children:["isLoading: ",`${a}`]}),Ze(Kp,{className:"pl-3",children:["isConnected: ",`${c}`]}),Ze(Kp,{className:"pl-3",children:["error: ",`${JSON.stringify(u)}`]})]}),e&&le(U1,{cameraOn:f,micOn:d,renderRemoteUsers:w}),le(no,{calling:e,cameraOn:f,micOn:d,setCalling:()=>{t(R=>!R)},setCamera:()=>{g(R=>!R)},setMic:()=>{p(R=>!R)}})]})},{Title:gve,Paragraph:vve}=Pi,Eve=()=>{const e=Ohe();return ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},!0),le(Wr,{children:Ze("div",{className:"h-screen p-3",children:[le(gve,{children:"useNetworkQuality"}),le(vve,{children:`result: ${JSON.stringify(e)}`})]})})},_ve=()=>{const[e,t]=_.useState(!1),i=U_()||0,a=_.useMemo(()=>As(i),[i]),c=_.useMemo(()=>Qa(),[]),{isConnected:u}=ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},e),[d,p]=_.useState(!1),[f,g]=_.useState(!1),{localMicrophoneTrack:E}=Hl(d),{localCameraTrack:y}=$l(f);Fc([E,y]);const C=xs(),w=C.filter(A=>A.hasAudio||A.hasVideo),{videoTracks:R}=Wh(C),{audioTracks:O}=hm(C);O.map(A=>A.play());const k=()=>le(Zi,{children:R.map(A=>Ze(Ya.Item,{children:[le(Gh,{cover:Qa(),track:A},A.getUserId()),le(Lc,{children:`Layout1 ${As(A.getUserId())}{${A.getUserId()}}`})]},A.getUserId()))});return Ze(Wr,{children:[Ze(Zi,{children:[le(k1,{published:w.length+(d||f?1:0),total:C.length+1}),Ze(Ya,{children:[u&&le(Ya.Item,{children:le(B_,{audioTrack:E,cameraOn:f,cover:c,micOn:d,videoTrack:y,children:le(Lc,{children:`${a}{${i}}`})})}),k?k():void 0]})]}),le(no,{calling:e,cameraOn:f,micOn:d,setCalling:()=>t(A=>!A),setCamera:()=>{g(A=>!A)},setMic:()=>{p(A=>!A)}})]})},Sve=()=>{const[e,t]=_.useState(!1),i=Ns(),a=U_()||0,c=_.useMemo(()=>As(a),[a]),u=_.useMemo(()=>Qa(),[]);ui({appid:Tt.appId,channel:Tt.channel,token:Tt.token},e);const[d,p]=_.useState(!1),[f,g]=_.useState(!1),{localMicrophoneTrack:E}=Hl(d),{localCameraTrack:y}=$l(f);Fc([E,y]);const C=xs(),w=C.filter(R=>R.hasAudio||R.hasVideo);return Ze(Wr,{children:[Ze(Zi,{children:[le(k1,{published:w.length+(d||f?1:0),total:C.length+1}),Ze(Ya,{children:[i&&le(Ya.Item,{children:le(B_,{audioTrack:E,cameraOn:f,cover:u,micOn:d,videoTrack:y,children:le(Lc,{children:`${c}{${a}}`})})}),C.map(R=>Ze(Ya.Item,{children:[le(D1,{cover:Qa(),user:R}),le(Lc,{children:`${As(R.uid)}{${R.uid}}`})]},R.uid))]})]}),le(no,{calling:e,cameraOn:f,micOn:d,setCalling:()=>t(R=>!R),setCamera:()=>{g(R=>!R)},setMic:()=>{p(R=>!R)}})]})},l$=[{label:"useJoin",component:mve},{label:"usePublish",component:_ve},{label:"useRemoteUsers",component:Sve},{label:"useConnectionState",component:sve},{label:"useIsConnected",component:pve},{label:"useCurrentUID",component:uve},{label:"useAutoPlayAudioTrack",component:nve},{label:"useAutoPlayVideoTrack",component:ive},{label:"useNetworkQuality",component:Eve}],NF=()=>le(Wr,{}),{Content:yve,Sider:Cve}=AI,Yi=["Basic","Hooks","Components","Advanced","Setting"],bve=[{label:Yi[0],key:Yi[0],children:s$.map(e=>({key:`/${Yi[0]}/${e.label}`,label:e.label}))},{label:Yi[1],key:Yi[1],children:l$.map(e=>({key:`/${Yi[1]}/${e.label}`,label:e.label}))},{label:Yi[2],key:Yi[2],children:c$.map(e=>({key:`/${Yi[2]}/${e.label}`,label:e.label}))},{label:Yi[3],key:Yi[3],children:a$.map(e=>({key:`/${Yi[3]}/${e.label}`,label:e.label}))}];function Tve(){const[e,t]=_.useState(!1),[i,a]=_.useState([window.location.hash.slice(1).split("/")[1]]),c=d=>{const p=d.find(f=>i.indexOf(f)===-1);p&&Yi.indexOf(p)===-1?a(d):a(p?[p]:[])},u=PZ();return le(Zi,{children:Ze(AI,{children:[le(Cve,{collapsed:e,collapsible:!0,onCollapse:d=>t(d),style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0},children:le(Que,{items:bve,mode:"inline",onClick:d=>{u(d.key)},onOpenChange:c,openKeys:i,selectedKeys:[window.location.hash.slice(1)],theme:"dark"})}),le(AI,{style:{marginLeft:e?80:200},children:le(yve,{children:Ze(KZ,{children:[le(Eu,{Component:()=>le(NF,{}),path:"/*"}),le(Eu,{Component:()=>le(NF,{}),path:"/setting"}),s$.map(({label:d,component:p})=>{const f=p;return le(Eu,{Component:()=>le(Ng,{children:le(f,{})}),path:`/${Yi[0]}/${d}`},d)}),l$.map(({label:d,component:p})=>{const f=p;return le(Eu,{Component:()=>le(Ng,{children:le(f,{})}),path:`/${Yi[1]}/${d}`},d)}),c$.map(({label:d,component:p})=>{const f=p;return le(Eu,{Component:()=>le(Ng,{children:le(f,{})}),path:`/${Yi[2]}/${d}`},d)}),a$.map(({label:d,component:p})=>{const f=p;return le(Eu,{Component:()=>le(Ng,{children:le(f,{})}),path:`/${Yi[3]}/${d}`},d)})]})})})]})})}Pl.setLogLevel(2);xT.createRoot(document.getElementById("root")).render(le(_.StrictMode,{children:le(YZ,{children:le(Tve,{})})}));
