var tX=Object.defineProperty;var nX=(e,t,o)=>t in e?tX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var q0=(e,t,o)=>(nX(e,typeof t!="symbol"?t+"":t,o),o);function OF(e,t){for(var o=0;o<t.length;o++){const a=t[o];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const u=Object.getOwnPropertyDescriptor(a,c);u&&Object.defineProperty(e,c,u.get?u:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function o(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(c){if(c.ep)return;c.ep=!0;const u=o(c);fetch(c.href,u)}})();var At=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function LE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function rX(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var o=function a(){if(this instanceof a){var c=[null];c.push.apply(c,arguments);var u=Function.bind.apply(t,c);return new u}return t.apply(this,arguments)};o.prototype=t.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(o,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),o}var _f={},iX={get exports(){return _f},set exports(e){_f=e}},ME={},b={},oX={get exports(){return b},set exports(e){b=e}},gn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kf=Symbol.for("react.element"),aX=Symbol.for("react.portal"),sX=Symbol.for("react.fragment"),cX=Symbol.for("react.strict_mode"),lX=Symbol.for("react.profiler"),uX=Symbol.for("react.provider"),dX=Symbol.for("react.context"),hX=Symbol.for("react.forward_ref"),pX=Symbol.for("react.suspense"),fX=Symbol.for("react.memo"),mX=Symbol.for("react.lazy"),s2=Symbol.iterator;function gX(e){return e===null||typeof e!="object"?null:(e=s2&&e[s2]||e["@@iterator"],typeof e=="function"?e:null)}var AF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},NF=Object.assign,PF={};function Dh(e,t,o){this.props=e,this.context=t,this.refs=PF,this.updater=o||AF}Dh.prototype.isReactComponent={};Dh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Dh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function xF(){}xF.prototype=Dh.prototype;function LI(e,t,o){this.props=e,this.context=t,this.refs=PF,this.updater=o||AF}var MI=LI.prototype=new xF;MI.constructor=LI;NF(MI,Dh.prototype);MI.isPureReactComponent=!0;var c2=Array.isArray,DF=Object.prototype.hasOwnProperty,UI={current:null},kF={key:!0,ref:!0,__self:!0,__source:!0};function LF(e,t,o){var a,c={},u=null,d=null;if(t!=null)for(a in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(u=""+t.key),t)DF.call(t,a)&&!kF.hasOwnProperty(a)&&(c[a]=t[a]);var f=arguments.length-2;if(f===1)c.children=o;else if(1<f){for(var m=Array(f),g=0;g<f;g++)m[g]=arguments[g+2];c.children=m}if(e&&e.defaultProps)for(a in f=e.defaultProps,f)c[a]===void 0&&(c[a]=f[a]);return{$$typeof:Kf,type:e,key:u,ref:d,props:c,_owner:UI.current}}function vX(e,t){return{$$typeof:Kf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function VI(e){return typeof e=="object"&&e!==null&&e.$$typeof===Kf}function EX(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(o){return t[o]})}var l2=/\/+/g;function oT(e,t){return typeof e=="object"&&e!==null&&e.key!=null?EX(""+e.key):t.toString(36)}function Vg(e,t,o,a,c){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(u){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case Kf:case aX:d=!0}}if(d)return d=e,c=c(d),e=a===""?"."+oT(d,0):a,c2(c)?(o="",e!=null&&(o=e.replace(l2,"$&/")+"/"),Vg(c,t,o,"",function(g){return g})):c!=null&&(VI(c)&&(c=vX(c,o+(!c.key||d&&d.key===c.key?"":(""+c.key).replace(l2,"$&/")+"/")+e)),t.push(c)),1;if(d=0,a=a===""?".":a+":",c2(e))for(var f=0;f<e.length;f++){u=e[f];var m=a+oT(u,f);d+=Vg(u,t,o,m,c)}else if(m=gX(e),typeof m=="function")for(e=m.call(e),f=0;!(u=e.next()).done;)u=u.value,m=a+oT(u,f++),d+=Vg(u,t,o,m,c);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function X0(e,t,o){if(e==null)return e;var a=[],c=0;return Vg(e,a,"","",function(u){return t.call(o,u,c++)}),a}function _X(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(o){(e._status===0||e._status===-1)&&(e._status=1,e._result=o)},function(o){(e._status===0||e._status===-1)&&(e._status=2,e._result=o)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var So={current:null},Fg={transition:null},SX={ReactCurrentDispatcher:So,ReactCurrentBatchConfig:Fg,ReactCurrentOwner:UI};gn.Children={map:X0,forEach:function(e,t,o){X0(e,function(){t.apply(this,arguments)},o)},count:function(e){var t=0;return X0(e,function(){t++}),t},toArray:function(e){return X0(e,function(t){return t})||[]},only:function(e){if(!VI(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};gn.Component=Dh;gn.Fragment=sX;gn.Profiler=lX;gn.PureComponent=LI;gn.StrictMode=cX;gn.Suspense=pX;gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SX;gn.cloneElement=function(e,t,o){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=NF({},e.props),c=e.key,u=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,d=UI.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var f=e.type.defaultProps;for(m in t)DF.call(t,m)&&!kF.hasOwnProperty(m)&&(a[m]=t[m]===void 0&&f!==void 0?f[m]:t[m])}var m=arguments.length-2;if(m===1)a.children=o;else if(1<m){f=Array(m);for(var g=0;g<m;g++)f[g]=arguments[g+2];a.children=f}return{$$typeof:Kf,type:e.type,key:c,ref:u,props:a,_owner:d}};gn.createContext=function(e){return e={$$typeof:dX,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:uX,_context:e},e.Consumer=e};gn.createElement=LF;gn.createFactory=function(e){var t=LF.bind(null,e);return t.type=e,t};gn.createRef=function(){return{current:null}};gn.forwardRef=function(e){return{$$typeof:hX,render:e}};gn.isValidElement=VI;gn.lazy=function(e){return{$$typeof:mX,_payload:{_status:-1,_result:e},_init:_X}};gn.memo=function(e,t){return{$$typeof:fX,type:e,compare:t===void 0?null:t}};gn.startTransition=function(e){var t=Fg.transition;Fg.transition={};try{e()}finally{Fg.transition=t}};gn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};gn.useCallback=function(e,t){return So.current.useCallback(e,t)};gn.useContext=function(e){return So.current.useContext(e)};gn.useDebugValue=function(){};gn.useDeferredValue=function(e){return So.current.useDeferredValue(e)};gn.useEffect=function(e,t){return So.current.useEffect(e,t)};gn.useId=function(){return So.current.useId()};gn.useImperativeHandle=function(e,t,o){return So.current.useImperativeHandle(e,t,o)};gn.useInsertionEffect=function(e,t){return So.current.useInsertionEffect(e,t)};gn.useLayoutEffect=function(e,t){return So.current.useLayoutEffect(e,t)};gn.useMemo=function(e,t){return So.current.useMemo(e,t)};gn.useReducer=function(e,t,o){return So.current.useReducer(e,t,o)};gn.useRef=function(e){return So.current.useRef(e)};gn.useState=function(e){return So.current.useState(e)};gn.useSyncExternalStore=function(e,t,o){return So.current.useSyncExternalStore(e,t,o)};gn.useTransition=function(){return So.current.useTransition()};gn.version="18.2.0";(function(e){e.exports=gn})(oX);const ht=LE(b),av=OF({__proto__:null,default:ht},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yX=b,CX=Symbol.for("react.element"),TX=Symbol.for("react.fragment"),bX=Object.prototype.hasOwnProperty,RX=yX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IX={key:!0,ref:!0,__self:!0,__source:!0};function MF(e,t,o){var a,c={},u=null,d=null;o!==void 0&&(u=""+o),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(d=t.ref);for(a in t)bX.call(t,a)&&!IX.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:CX,type:e,key:u,ref:d,props:c,_owner:RX.current}}ME.Fragment=TX;ME.jsx=MF;ME.jsxs=MF;(function(e){e.exports=ME})(iX);const oo=_f.Fragment,ce=_f.jsx,Ye=_f.jsxs;var Ib={},wX={get exports(){return Ib},set exports(e){Ib=e}};(function(e,t){(function(o,a){e.exports=a()})(At,function(){function o(n,r){return r.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(s){if(s!=="default"&&!(s in n)){var l=Object.getOwnPropertyDescriptor(i,s);Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:function(){return i[s]}})}})}),Object.freeze(n)}var a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof At<"u"?At:typeof self<"u"?self:{},c=function(n){try{return!!n()}catch{return!0}},u=!c(function(){var n=function(){}.bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),d=u,f=Function.prototype,m=f.bind,g=f.call,_=d&&m.bind(g,g),S=d?function(n){return n&&_(n)}:function(n){return n&&function(){return g.apply(n,arguments)}},C=S({}.isPrototypeOf),O=function(n){return n&&n.Math==Math&&n},I=O(typeof globalThis=="object"&&globalThis)||O(typeof window=="object"&&window)||O(typeof self=="object"&&self)||O(typeof a=="object"&&a)||function(){return this}()||Function("return this")(),A=u,L=Function.prototype,N=L.apply,P=L.call,D=typeof Reflect=="object"&&Reflect.apply||(A?P.bind(N):function(){return P.apply(N,arguments)}),U=function(n){return typeof n=="function"},B={},F=!c(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),H=u,K=Function.prototype.call,te=H?K.bind(K):function(){return K.apply(K,arguments)},Y={},Q={}.propertyIsEnumerable,J=Object.getOwnPropertyDescriptor,q=J&&!Q.call({1:2},1);Y.f=q?function(n){var r=J(this,n);return!!r&&r.enumerable}:Q;var ee,re,le=function(n,r){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:r}},me=S,ue=me({}.toString),ve=me("".slice),Ee=function(n){return ve(ue(n),8,-1)},oe=S,ae=c,he=Ee,pe=I.Object,Ae=oe("".split),Le=ae(function(){return!pe("z").propertyIsEnumerable(0)})?function(n){return he(n)=="String"?Ae(n,""):pe(n)}:pe,Qe=I.TypeError,je=function(n){if(n==null)throw Qe("Can't call method on "+n);return n},Ut=Le,Nt=je,at=function(n){return Ut(Nt(n))},Ht=U,He=function(n){return typeof n=="object"?n!==null:Ht(n)},ot={},It=ot,tn=I,xt=U,Xe=function(n){return xt(n)?n:void 0},$e=function(n,r){return arguments.length<2?Xe(It[n])||Xe(tn[n]):It[n]&&It[n][r]||tn[n]&&tn[n][r]},ze=$e("navigator","userAgent")||"",tt=I,mt=ze,Dt=tt.process,lr=tt.Deno,yn=Dt&&Dt.versions||lr&&lr.version,rn=yn&&yn.v8;rn&&(re=(ee=rn.split("."))[0]>0&&ee[0]<4?1:+(ee[0]+ee[1])),!re&&mt&&(!(ee=mt.match(/Edge\/(\d+)/))||ee[1]>=74)&&(ee=mt.match(/Chrome\/(\d+)/))&&(re=+ee[1]);var an=re,si=an,ur=c,sn=!!Object.getOwnPropertySymbols&&!ur(function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&si&&si<41}),kt=sn&&!Symbol.sham&&typeof Symbol.iterator=="symbol",vn=$e,En=U,pn=C,In=kt,so=I.Object,Gi=In?function(n){return typeof n=="symbol"}:function(n){var r=vn("Symbol");return En(r)&&pn(r.prototype,so(n))},Mr=I.String,Ni=function(n){try{return Mr(n)}catch{return"Object"}},qe=U,dt=Ni,wn=I.TypeError,Vt=function(n){if(qe(n))return n;throw wn(dt(n)+" is not a function")},Ur=Vt,Cr=function(n,r){var i=n[r];return i==null?void 0:Ur(i)},Ln=te,vt=U,Yt=He,cn=I.TypeError,dr={exports:{}},Vr=I,Ir=Object.defineProperty,ci=function(n,r){try{Ir(Vr,n,{value:r,configurable:!0,writable:!0})}catch{Vr[n]=r}return r},Si="__core-js_shared__",To=I[Si]||ci(Si,{}),co=To;(dr.exports=function(n,r){return co[n]||(co[n]=r!==void 0?r:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var li=je,Ga=I.Object,lo=function(n){return Ga(li(n))},vs=lo,Ws=S({}.hasOwnProperty),xr=Object.hasOwn||function(n,r){return Ws(vs(n),r)},Gs=S,wc=0,uo=Math.random(),Ll=Gs(1 .toString),zs=function(n){return"Symbol("+(n===void 0?"":n)+")_"+Ll(++wc+uo,36)},Oc=I,za=dr.exports,Es=xr,Ml=zs,Ac=sn,Ka=kt,ya=za("wks"),ui=Oc.Symbol,Wo=ui&&ui.for,Ks=Ka?ui:ui&&ui.withoutSetter||Ml,er=function(n){if(!Es(ya,n)||!Ac&&typeof ya[n]!="string"){var r="Symbol."+n;Ac&&Es(ui,n)?ya[n]=ui[n]:ya[n]=Ka&&Wo?Wo(r):Ks(r)}return ya[n]},Ca=te,_s=He,Ys=Gi,Ul=Cr,Vl=function(n,r){var i,s;if(r==="string"&&vt(i=n.toString)&&!Yt(s=Ln(i,n))||vt(i=n.valueOf)&&!Yt(s=Ln(i,n))||r!=="string"&&vt(i=n.toString)&&!Yt(s=Ln(i,n)))return s;throw cn("Can't convert object to primitive value")},Nc=er,Fl=I.TypeError,Yn=Nc("toPrimitive"),Cn=function(n,r){if(!_s(n)||Ys(n))return n;var i,s=Ul(n,Yn);if(s){if(r===void 0&&(r="default"),i=Ca(s,n,r),!_s(i)||Ys(i))return i;throw Fl("Can't convert object to primitive value")}return r===void 0&&(r="number"),Vl(n,r)},qn=Gi,Dr=function(n){var r=Cn(n,"string");return qn(r)?r:r+""},Fr=He,zi=I.document,Ta=Fr(zi)&&Fr(zi.createElement),Pc=function(n){return Ta?zi.createElement(n):{}},zu=Pc,fm=!F&&!c(function(){return Object.defineProperty(zu("div"),"a",{get:function(){return 7}}).a!=7}),H_=F,mm=te,gm=Y,Yh=le,vm=at,$_=Dr,W_=xr,G_=fm,pt=Object.getOwnPropertyDescriptor;B.f=H_?pt:function(n,r){if(n=vm(n),r=$_(r),G_)try{return pt(n,r)}catch{}if(W_(n,r))return Yh(!mm(gm.f,n,r),n[r])};var Lt=c,Pn=U,$n=/#|\.prototype\./,fn=function(n,r){var i=xc[Bl(n)];return i==Dc||i!=qs&&(Pn(r)?Lt(r):!!r)},Bl=fn.normalize=function(n){return String(n).replace($n,".").toLowerCase()},xc=fn.data={},qs=fn.NATIVE="N",Dc=fn.POLYFILL="P",jl=fn,A6=Vt,N6=u,P6=S(S.bind),qh=function(n,r){return A6(n),r===void 0?n:N6?P6(n,r):function(){return n.apply(r,arguments)}},Ya={},A1=F&&c(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),N1=I,x6=He,D6=N1.String,k6=N1.TypeError,qa=function(n){if(x6(n))return n;throw k6(D6(n)+" is not an object")},L6=F,M6=fm,U6=A1,Em=qa,P1=Dr,V6=I.TypeError,z_=Object.defineProperty,F6=Object.getOwnPropertyDescriptor,B6="enumerable",j6="configurable",H6="writable";Ya.f=L6?U6?function(n,r,i){if(Em(n),r=P1(r),Em(i),typeof n=="function"&&r==="prototype"&&"value"in i&&H6 in i&&!i.writable){var s=F6(n,r);s&&s.writable&&(n[r]=i.value,i={configurable:j6 in i?i.configurable:s.configurable,enumerable:B6 in i?i.enumerable:s.enumerable,writable:!1})}return z_(n,r,i)}:z_:function(n,r,i){if(Em(n),r=P1(r),Em(i),M6)try{return z_(n,r,i)}catch{}if("get"in i||"set"in i)throw V6("Accessors not supported");return"value"in i&&(n[r]=i.value),n};var $6=Ya,W6=le,Hl=F?function(n,r,i){return $6.f(n,r,W6(1,i))}:function(n,r,i){return n[r]=i,n},_m=I,G6=D,z6=S,K6=U,Y6=B.f,q6=jl,Ku=ot,X6=qh,Yu=Hl,x1=xr,J6=function(n){var r=function(i,s,l){if(this instanceof r){switch(arguments.length){case 0:return new n;case 1:return new n(i);case 2:return new n(i,s)}return new n(i,s,l)}return G6(n,this,arguments)};return r.prototype=n.prototype,r},Pi=function(n,r){var i,s,l,h,p,v,E,T,y=n.target,R=n.global,k=n.stat,V=n.proto,$=R?_m:k?_m[y]:(_m[y]||{}).prototype,W=R?Ku:Ku[y]||Yu(Ku,y,{})[y],G=W.prototype;for(l in r)i=!q6(R?l:y+(k?".":"#")+l,n.forced)&&$&&x1($,l),p=W[l],i&&(v=n.noTargetGet?(T=Y6($,l))&&T.value:$[l]),h=i&&v?v:r[l],i&&typeof p==typeof h||(E=n.bind&&i?X6(h,_m):n.wrap&&i?J6(h):V&&K6(h)?z6(h):h,(n.sham||h&&h.sham||p&&p.sham)&&Yu(E,"sham",!0),Yu(W,l,E),V&&(x1(Ku,s=y+"Prototype")||Yu(Ku,s,{}),Yu(Ku[s],l,h),n.real&&G&&!G[l]&&Yu(G,l,h)))},Q6=Math.ceil,Z6=Math.floor,K_=function(n){var r=+n;return r!=r||r===0?0:(r>0?Z6:Q6)(r)},eH=K_,tH=Math.min,nH=function(n){return n>0?tH(eH(n),9007199254740991):0},kc=function(n){return nH(n.length)},rH=Vt,iH=lo,oH=Le,aH=kc,sH=I.TypeError,D1=function(n){return function(r,i,s,l){rH(i);var h=iH(r),p=oH(h),v=aH(h),E=n?v-1:0,T=n?-1:1;if(s<2)for(;;){if(E in p){l=p[E],E+=T;break}if(E+=T,n?E<0:v<=E)throw sH("Reduce of empty array with no initial value")}for(;n?E>=0:v>E;E+=T)E in p&&(l=i(l,p[E],E,h));return l}},cH={left:D1(!1),right:D1(!0)},lH=c,Y_=function(n,r){var i=[][n];return!!i&&lH(function(){i.call(null,r||function(){throw 1},1)})},Sm=Ee(I.process)=="process",uH=cH.left,k1=an,dH=Sm;Pi({target:"Array",proto:!0,forced:!Y_("reduce")||!dH&&k1>79&&k1<83},{reduce:function(n){var r=arguments.length;return uH(this,n,r,r>1?arguments[1]:void 0)}});var hH=ot,Lc=function(n){return hH[n+"Prototype"]},pH=Lc("Array").reduce,fH=C,mH=pH,q_=Array.prototype,L1=function(n){var r=n.reduce;return n===q_||fH(q_,n)&&r===q_.reduce?mH:r},Mc=L1;let M1=!0,U1=!0;function ym(n,r,i){const s=n.match(r);return s&&s.length>=i&&parseInt(s[i],10)}function $l(n,r,i){if(!n.RTCPeerConnection)return;const s=n.RTCPeerConnection.prototype,l=s.addEventListener;s.addEventListener=function(p,v){if(p!==r)return l.apply(this,arguments);const E=T=>{const y=i(T);y&&(v.handleEvent?v.handleEvent(y):v(y))};return this._eventMap=this._eventMap||{},this._eventMap[r]||(this._eventMap[r]=new Map),this._eventMap[r].set(v,E),l.apply(this,[p,E])};const h=s.removeEventListener;s.removeEventListener=function(p,v){if(p!==r||!this._eventMap||!this._eventMap[r])return h.apply(this,arguments);if(!this._eventMap[r].has(v))return h.apply(this,arguments);const E=this._eventMap[r].get(v);return this._eventMap[r].delete(v),this._eventMap[r].size===0&&delete this._eventMap[r],Object.keys(this._eventMap).length===0&&delete this._eventMap,h.apply(this,[p,E])},Object.defineProperty(s,"on"+r,{get(){return this["_on"+r]},set(p){this["_on"+r]&&(this.removeEventListener(r,this["_on"+r]),delete this["_on"+r]),p&&this.addEventListener(r,this["_on"+r]=p)},enumerable:!0,configurable:!0})}function gH(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(M1=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function vH(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(U1=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function V1(){if(typeof window=="object"){if(M1)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function X_(n,r){U1&&console.warn(n+" is deprecated, please use "+r+" instead.")}function EH(n){const r={browser:null,version:null};if(n===void 0||!n.navigator)return r.browser="Not a browser.",r;const{navigator:i}=n;if(i.mozGetUserMedia)r.browser="firefox",r.version=ym(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)r.browser="chrome",r.version=ym(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!n.RTCPeerConnection||!i.userAgent.match(/AppleWebKit\/(\d+)\./))return r.browser="Not a supported browser.",r;r.browser="safari",r.version=ym(i.userAgent,/AppleWebKit\/(\d+)\./,1),r.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype}return r}function F1(n){return Object.prototype.toString.call(n)==="[object Object]"}function B1(n){var r;return F1(n)?Mc(r=Object.keys(n)).call(r,function(i,s){const l=F1(n[s]),h=l?B1(n[s]):n[s],p=l&&!Object.keys(h).length;return h===void 0||p?i:Object.assign(i,{[s]:h})},{}):n}function j1(n,r,i){const s=i?"outbound-rtp":"inbound-rtp",l=new Map;if(r===null)return l;const h=[];return n.forEach(p=>{p.type==="track"&&p.trackIdentifier===r.id&&h.push(p)}),h.forEach(p=>{n.forEach(v=>{v.type===s&&v.trackId===p.id&&function E(T,y,R){y&&!R.has(y.id)&&(R.set(y.id,y),Object.keys(y).forEach(k=>{k.endsWith("Id")?E(T,T.get(y[k]),R):k.endsWith("Ids")&&y[k].forEach(V=>{E(T,T.get(V),R)})}))}(n,v,l)})}),l}var _H=dr.exports,SH=zs,H1=_H("keys"),Cm=function(n){return H1[n]||(H1[n]=SH(n))},yH=!c(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),CH=I,TH=xr,bH=U,RH=lo,IH=yH,$1=Cm("IE_PROTO"),J_=CH.Object,wH=J_.prototype,Q_=IH?J_.getPrototypeOf:function(n){var r=RH(n);if(TH(r,$1))return r[$1];var i=r.constructor;return bH(i)&&r instanceof i?i.prototype:r instanceof J_?wH:null},W1=I,OH=U,AH=W1.String,NH=W1.TypeError,PH=S,xH=qa,DH=function(n){if(typeof n=="object"||OH(n))return n;throw NH("Can't set "+AH(n)+" as a prototype")},kH=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,i={};try{(n=PH(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]),r=i instanceof Array}catch{}return function(s,l){return xH(s),DH(l),r?n(s,l):s.__proto__=l,s}}():void 0),Tm={},LH=K_,MH=Math.max,UH=Math.min,Z_=function(n,r){var i=LH(n);return i<0?MH(i+r,0):UH(i,r)},VH=at,FH=Z_,BH=kc,G1=function(n){return function(r,i,s){var l,h=VH(r),p=BH(h),v=FH(s,p);if(n&&i!=i){for(;p>v;)if((l=h[v++])!=l)return!0}else for(;p>v;v++)if((n||v in h)&&h[v]===i)return n||v||0;return!n&&-1}},jH={includes:G1(!0),indexOf:G1(!1)},bm={},eS=xr,HH=at,$H=jH.indexOf,WH=bm,z1=S([].push),K1=function(n,r){var i,s=HH(n),l=0,h=[];for(i in s)!eS(WH,i)&&eS(s,i)&&z1(h,i);for(;r.length>l;)eS(s,i=r[l++])&&(~$H(h,i)||z1(h,i));return h},tS=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],GH=K1,zH=tS.concat("length","prototype");Tm.f=Object.getOwnPropertyNames||function(n){return GH(n,zH)};var nS={};nS.f=Object.getOwnPropertySymbols;var KH=$e,YH=Tm,qH=nS,XH=qa,JH=S([].concat),QH=KH("Reflect","ownKeys")||function(n){var r=YH.f(XH(n)),i=qH.f;return i?JH(r,i(n)):r},Y1=xr,ZH=QH,e$=B,t$=Ya,rS={},n$=K1,r$=tS,iS=Object.keys||function(n){return n$(n,r$)},i$=F,o$=A1,a$=Ya,s$=qa,c$=at,l$=iS;rS.f=i$&&!o$?Object.defineProperties:function(n,r){s$(n);for(var i,s=c$(r),l=l$(r),h=l.length,p=0;h>p;)a$.f(n,i=l[p++],s[i]);return n};var Rm,q1=$e("document","documentElement"),u$=qa,d$=rS,X1=tS,h$=bm,p$=q1,f$=Pc,J1=Cm("IE_PROTO"),oS=function(){},Q1=function(n){return"<script>"+n+"<\/script>"},Z1=function(n){n.write(Q1("")),n.close();var r=n.parentWindow.Object;return n=null,r},Im=function(){try{Rm=new ActiveXObject("htmlfile")}catch{}var n,r;Im=typeof document<"u"?document.domain&&Rm?Z1(Rm):((r=f$("iframe")).style.display="none",p$.appendChild(r),r.src=String("javascript:"),(n=r.contentWindow.document).open(),n.write(Q1("document.F=Object")),n.close(),n.F):Z1(Rm);for(var i=X1.length;i--;)delete Im.prototype[X1[i]];return Im()};h$[J1]=!0;var wm=Object.create||function(n,r){var i;return n!==null?(oS.prototype=u$(n),i=new oS,oS.prototype=null,i[J1]=n):i=Im(),r===void 0?i:d$.f(i,r)},m$=S("".replace),g$=String(Error("zxcasd").stack),eO=/\n\s*at [^:]*:[^\n]*/,v$=eO.test(g$),E$=He,_$=Hl,qu={},S$=qu,y$=er("iterator"),C$=Array.prototype,tO={};tO[er("toStringTag")]="z";var aS=String(tO)==="[object z]",T$=I,b$=aS,R$=U,Om=Ee,I$=er("toStringTag"),w$=T$.Object,O$=Om(function(){return arguments}())=="Arguments",Uc=b$?Om:function(n){var r,i,s;return n===void 0?"Undefined":n===null?"Null":typeof(i=function(l,h){try{return l[h]}catch{}}(r=w$(n),I$))=="string"?i:O$?Om(r):(s=Om(r))=="Object"&&R$(r.callee)?"Arguments":s},A$=Uc,nO=Cr,N$=qu,P$=er("iterator"),rO=function(n){if(n!=null)return nO(n,P$)||nO(n,"@@iterator")||N$[A$(n)]},x$=te,D$=Vt,k$=qa,L$=Ni,M$=rO,U$=I.TypeError,V$=te,iO=qa,F$=Cr,B$=qh,j$=te,H$=qa,$$=Ni,W$=function(n){return n!==void 0&&(S$.Array===n||C$[y$]===n)},G$=kc,oO=C,z$=function(n,r){var i=arguments.length<2?M$(n):r;if(D$(i))return k$(x$(i,n));throw U$(L$(n)+" is not iterable")},K$=rO,aO=function(n,r,i){var s,l;iO(n);try{if(!(s=F$(n,"return"))){if(r==="throw")throw i;return i}s=V$(s,n)}catch(h){l=!0,s=h}if(r==="throw")throw i;if(l)throw s;return iO(s),i},Y$=I.TypeError,Am=function(n,r){this.stopped=n,this.result=r},sO=Am.prototype,Nm=function(n,r,i){var s,l,h,p,v,E,T,y=i&&i.that,R=!(!i||!i.AS_ENTRIES),k=!(!i||!i.IS_ITERATOR),V=!(!i||!i.INTERRUPTED),$=B$(r,y),W=function(ie){return s&&aO(s,"normal",ie),new Am(!0,ie)},G=function(ie){return R?(H$(ie),V?$(ie[0],ie[1],W):$(ie[0],ie[1])):V?$(ie,W):$(ie)};if(k)s=n;else{if(!(l=K$(n)))throw Y$($$(n)+" is not iterable");if(W$(l)){for(h=0,p=G$(n);p>h;h++)if((v=G(n[h]))&&oO(sO,v))return v;return new Am(!1)}s=z$(n,l)}for(E=s.next;!(T=j$(E,s)).done;){try{v=G(T.value)}catch(ie){aO(s,"throw",ie)}if(typeof v=="object"&&v&&oO(sO,v))return v}return new Am(!1)},q$=Uc,X$=I.String,Xu=function(n){if(q$(n)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return X$(n)},J$=Xu,Q$=le,Z$=!c(function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",Q$(1,7)),n.stack!==7)}),eW=Pi,tW=I,nW=C,rW=Q_,Pm=kH,iW=function(n,r,i){for(var s=ZH(r),l=t$.f,h=e$.f,p=0;p<s.length;p++){var v=s[p];Y1(n,v)||i&&Y1(i,v)||l(n,v,h(r,v))}},cO=wm,xm=Hl,sS=le,oW=function(n,r){if(v$&&typeof n=="string")for(;r--;)n=m$(n,eO,"");return n},aW=function(n,r){E$(r)&&"cause"in r&&_$(n,"cause",r.cause)},sW=Nm,cW=function(n,r){return n===void 0?arguments.length<2?"":r:J$(n)},lW=Z$,uW=er("toStringTag"),Dm=tW.Error,dW=[].push,Xh=function(n,r){var i,s=arguments.length>2?arguments[2]:void 0,l=nW(cS,this);Pm?i=Pm(new Dm,l?rW(this):cS):(i=l?this:cO(cS),xm(i,uW,"Error")),r!==void 0&&xm(i,"message",cW(r)),lW&&xm(i,"stack",oW(i.stack,1)),aW(i,s);var h=[];return sW(n,dW,{that:h}),xm(i,"errors",h),i};Pm?Pm(Xh,Dm):iW(Xh,Dm,{name:!0});var cS=Xh.prototype=cO(Dm.prototype,{constructor:sS(1,Xh),message:sS(1,""),name:sS(1,"AggregateError")});eW({global:!0},{AggregateError:Xh});var hW=U,lS=To,pW=S(Function.toString);hW(lS.inspectSource)||(lS.inspectSource=function(n){return pW(n)});var km,Jh,Lm,uS=lS.inspectSource,fW=U,mW=uS,lO=I.WeakMap,gW=fW(lO)&&/native code/.test(mW(lO)),uO=I,dS=S,vW=He,EW=Hl,hS=xr,pS=To,_W=Cm,SW=bm,dO="Object already initialized",fS=uO.TypeError,yW=uO.WeakMap;if(gW||pS.state){var Wl=pS.state||(pS.state=new yW),CW=dS(Wl.get),hO=dS(Wl.has),TW=dS(Wl.set);km=function(n,r){if(hO(Wl,n))throw new fS(dO);return r.facade=n,TW(Wl,n,r),r},Jh=function(n){return CW(Wl,n)||{}},Lm=function(n){return hO(Wl,n)}}else{var Ju=_W("state");SW[Ju]=!0,km=function(n,r){if(hS(n,Ju))throw new fS(dO);return r.facade=n,EW(n,Ju,r),r},Jh=function(n){return hS(n,Ju)?n[Ju]:{}},Lm=function(n){return hS(n,Ju)}}var Gl,pO,fO,Mm={set:km,get:Jh,has:Lm,enforce:function(n){return Lm(n)?Jh(n):km(n,{})},getterFor:function(n){return function(r){var i;if(!vW(r)||(i=Jh(r)).type!==n)throw fS("Incompatible receiver, "+n+" required");return i}}},mS=F,bW=xr,mO=Function.prototype,RW=mS&&Object.getOwnPropertyDescriptor,gS=bW(mO,"name"),gO={EXISTS:gS,PROPER:gS&&function(){}.name==="something",CONFIGURABLE:gS&&(!mS||mS&&RW(mO,"name").configurable)},IW=Hl,Um=function(n,r,i,s){s&&s.enumerable?n[r]=i:IW(n,r,i)},wW=c,OW=U,AW=wm,vO=Q_,NW=Um,vS=er("iterator"),EO=!1;[].keys&&("next"in(fO=[].keys())?(pO=vO(vO(fO)))!==Object.prototype&&(Gl=pO):EO=!0);var PW=Gl==null||wW(function(){var n={};return Gl[vS].call(n)!==n});OW((Gl=PW?{}:AW(Gl))[vS])||NW(Gl,vS,function(){return this});var _O={IteratorPrototype:Gl,BUGGY_SAFARI_ITERATORS:EO},xW=Uc,DW=aS?{}.toString:function(){return"[object "+xW(this)+"]"},kW=aS,LW=Ya.f,MW=Hl,UW=xr,VW=DW,SO=er("toStringTag"),Qh=function(n,r,i,s){if(n){var l=i?n:n.prototype;UW(l,SO)||LW(l,SO,{configurable:!0,value:r}),s&&!kW&&MW(l,"toString",VW)}},FW=_O.IteratorPrototype,BW=wm,jW=le,HW=Qh,$W=qu,WW=function(){return this},GW=Pi,zW=te,KW=function(n,r,i,s){var l=r+" Iterator";return n.prototype=BW(FW,{next:jW(+!s,i)}),HW(n,l,!1,!0),$W[l]=WW,n},YW=Q_,qW=Qh,yO=Um,CO=qu,XW=gO.PROPER,Vm=_O.BUGGY_SAFARI_ITERATORS,ES=er("iterator"),TO="keys",Fm="values",bO="entries",JW=function(){return this},RO=function(n,r,i,s,l,h,p){KW(i,r,s);var v,E,T,y=function(ie){if(ie===l&&W)return W;if(!Vm&&ie in V)return V[ie];switch(ie){case TO:case Fm:case bO:return function(){return new i(this,ie)}}return function(){return new i(this)}},R=r+" Iterator",k=!1,V=n.prototype,$=V[ES]||V["@@iterator"]||l&&V[l],W=!Vm&&$||y(l),G=r=="Array"&&V.entries||$;if(G&&(v=YW(G.call(new n)))!==Object.prototype&&v.next&&(qW(v,R,!0,!0),CO[R]=JW),XW&&l==Fm&&$&&$.name!==Fm&&(k=!0,W=function(){return zW($,this)}),l)if(E={values:y(Fm),keys:h?W:y(TO),entries:y(bO)},p)for(T in E)(Vm||k||!(T in V))&&yO(V,T,E[T]);else GW({target:r,proto:!0,forced:Vm||k},E);return p&&V[ES]!==W&&yO(V,ES,W,{name:l}),CO[r]=W,E},QW=at,IO=qu,wO=Mm;Ya.f;var ZW=RO,OO="Array Iterator",eG=wO.set,tG=wO.getterFor(OO);ZW(Array,"Array",function(n,r){eG(this,{type:OO,target:QW(n),index:0,kind:r})},function(){var n=tG(this),r=n.target,i=n.kind,s=n.index++;return!r||s>=r.length?(n.target=void 0,{value:void 0,done:!0}):i=="keys"?{value:s,done:!1}:i=="values"?{value:r[s],done:!1}:{value:[s,r[s]],done:!1}},"values"),IO.Arguments=IO.Array;var AO=I.Promise,nG=Um,rG=$e,iG=Ya,oG=F,NO=er("species"),aG=C,sG=I.TypeError,PO=er("iterator"),xO=!1;try{var cG=0,DO={next:function(){return{done:!!cG++}},return:function(){xO=!0}};DO[PO]=function(){return this},Array.from(DO,function(){throw 2})}catch{}var lG=S,uG=c,kO=U,dG=Uc,hG=uS,LO=function(){},pG=[],MO=$e("Reflect","construct"),_S=/^\s*(?:class|function)\b/,fG=lG(_S.exec),mG=!_S.exec(LO),Zh=function(n){if(!kO(n))return!1;try{return MO(LO,pG,n),!0}catch{return!1}},UO=function(n){if(!kO(n))return!1;switch(dG(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return mG||!!fG(_S,hG(n))}catch{return!0}};UO.sham=!0;var ep,Qu,VO,SS,yS=!MO||uG(function(){var n;return Zh(Zh.call)||!Zh(Object)||!Zh(function(){n=!0})||n})?UO:Zh,gG=yS,vG=Ni,EG=I.TypeError,FO=qa,_G=function(n){if(gG(n))return n;throw EG(vG(n)+" is not a constructor")},SG=er("species"),BO=function(n,r){var i,s=FO(n).constructor;return s===void 0||(i=FO(s)[SG])==null?r:_G(i)},CS=S([].slice),jO=/(?:ipad|iphone|ipod).*applewebkit/i.test(ze),Go=I,yG=D,CG=qh,HO=U,TG=xr,bG=c,$O=q1,RG=CS,WO=Pc,IG=jO,wG=Sm,TS=Go.setImmediate,bS=Go.clearImmediate,OG=Go.process,RS=Go.Dispatch,AG=Go.Function,GO=Go.MessageChannel,NG=Go.String,IS=0,tp={},PG="onreadystatechange";try{ep=Go.location}catch{}var wS=function(n){if(TG(tp,n)){var r=tp[n];delete tp[n],r()}},OS=function(n){return function(){wS(n)}},zO=function(n){wS(n.data)},KO=function(n){Go.postMessage(NG(n),ep.protocol+"//"+ep.host)};TS&&bS||(TS=function(n){var r=RG(arguments,1);return tp[++IS]=function(){yG(HO(n)?n:AG(n),void 0,r)},Qu(IS),IS},bS=function(n){delete tp[n]},wG?Qu=function(n){OG.nextTick(OS(n))}:RS&&RS.now?Qu=function(n){RS.now(OS(n))}:GO&&!IG?(SS=(VO=new GO).port2,VO.port1.onmessage=zO,Qu=CG(SS.postMessage,SS)):Go.addEventListener&&HO(Go.postMessage)&&!Go.importScripts&&ep&&ep.protocol!=="file:"&&!bG(KO)?(Qu=KO,Go.addEventListener("message",zO,!1)):Qu=PG in WO("script")?function(n){$O.appendChild(WO("script")).onreadystatechange=function(){$O.removeChild(this),wS(n)}}:function(n){setTimeout(OS(n),0)});var np,zl,rp,Zu,AS,NS,PS,YO,qO={set:TS,clear:bS},xG=I,DG=/ipad|iphone|ipod/i.test(ze)&&xG.Pebble!==void 0,kG=/web0s(?!.*chrome)/i.test(ze),Kl=I,XO=qh,LG=B.f,xS=qO.set,MG=jO,UG=DG,VG=kG,DS=Sm,JO=Kl.MutationObserver||Kl.WebKitMutationObserver,QO=Kl.document,ZO=Kl.process,Bm=Kl.Promise,eA=LG(Kl,"queueMicrotask"),tA=eA&&eA.value;tA||(np=function(){var n,r;for(DS&&(n=ZO.domain)&&n.exit();zl;){r=zl.fn,zl=zl.next;try{r()}catch(i){throw zl?Zu():rp=void 0,i}}rp=void 0,n&&n.enter()},MG||DS||VG||!JO||!QO?!UG&&Bm&&Bm.resolve?((PS=Bm.resolve(void 0)).constructor=Bm,YO=XO(PS.then,PS),Zu=function(){YO(np)}):DS?Zu=function(){ZO.nextTick(np)}:(xS=XO(xS,Kl),Zu=function(){xS(np)}):(AS=!0,NS=QO.createTextNode(""),new JO(np).observe(NS,{characterData:!0}),Zu=function(){NS.data=AS=!AS}));var FG=tA||function(n){var r={fn:n,next:void 0};rp&&(rp.next=r),zl||(zl=r,Zu()),rp=r},ed={},nA=Vt,BG=function(n){var r,i;this.promise=new n(function(s,l){if(r!==void 0||i!==void 0)throw TypeError("Bad Promise constructor");r=s,i=l}),this.resolve=nA(r),this.reject=nA(i)};ed.f=function(n){return new BG(n)};var jG=qa,HG=He,$G=ed,rA=function(n,r){if(jG(n),HG(r)&&r.constructor===n)return r;var i=$G.f(n);return(0,i.resolve)(r),i.promise},WG=I,jm=function(n){try{return{error:!1,value:n()}}catch(r){return{error:!0,value:r}}},iA=function(){this.head=null,this.tail=null};iA.prototype={add:function(n){var r={item:n,next:null};this.head?this.tail.next=r:this.head=r,this.tail=r},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}};var kS,oA,LS,GG=typeof window=="object",Hm=Pi,Xs=I,zG=$e,Vc=te,MS=AO,KG=function(n,r,i){for(var s in r)i&&i.unsafe&&n[s]?n[s]=r[s]:nG(n,s,r[s],i);return n},YG=Qh,qG=function(n){var r=rG(n),i=iG.f;oG&&r&&!r[NO]&&i(r,NO,{configurable:!0,get:function(){return this}})},US=Vt,$m=U,XG=He,JG=function(n,r){if(aG(r,n))return n;throw sG("Incorrect invocation")},QG=uS,aA=Nm,ZG=function(n,r){if(!r&&!xO)return!1;var i=!1;try{var s={};s[PO]=function(){return{next:function(){return{done:i=!0}}}},n(s)}catch{}return i},ez=BO,sA=qO.set,VS=FG,tz=rA,nz=function(n,r){var i=WG.console;i&&i.error&&(arguments.length==1?i.error(n):i.error(n,r))},cA=ed,FS=jm,rz=iA,BS=Mm,iz=jl,oz=GG,Wm=Sm,lA=an,az=er("species"),Ss="Promise",uA=BS.getterFor(Ss),sz=BS.set,cz=BS.getterFor(Ss),lz=MS&&MS.prototype,ys=MS,Gm=lz,dA=Xs.TypeError,jS=Xs.document,HS=Xs.process,td=cA.f,uz=td,dz=!!(jS&&jS.createEvent&&Xs.dispatchEvent),hA=$m(Xs.PromiseRejectionEvent),pA="unhandledrejection",zm=iz(Ss,function(){var n=QG(ys),r=n!==String(ys);if(!r&&lA===66||!Gm.finally)return!0;if(lA>=51&&/native code/.test(n))return!1;var i=new ys(function(l){l(1)}),s=function(l){l(function(){},function(){})};return(i.constructor={})[az]=s,!(i.then(function(){})instanceof s)||!r&&oz&&!hA}),hz=zm||!ZG(function(n){ys.all(n).catch(function(){})}),fA=function(n){var r;return!(!XG(n)||!$m(r=n.then))&&r},mA=function(n,r){var i,s,l,h=r.value,p=r.state==1,v=p?n.ok:n.fail,E=n.resolve,T=n.reject,y=n.domain;try{v?(p||(r.rejection===2&&fz(r),r.rejection=1),v===!0?i=h:(y&&y.enter(),i=v(h),y&&(y.exit(),l=!0)),i===n.promise?T(dA("Promise-chain cycle")):(s=fA(i))?Vc(s,i,E,T):E(i)):T(h)}catch(R){y&&!l&&y.exit(),T(R)}},gA=function(n,r){n.notified||(n.notified=!0,VS(function(){for(var i,s=n.reactions;i=s.get();)mA(i,n);n.notified=!1,r&&!n.rejection&&pz(n)}))},vA=function(n,r,i){var s,l;dz?((s=jS.createEvent("Event")).promise=r,s.reason=i,s.initEvent(n,!1,!0),Xs.dispatchEvent(s)):s={promise:r,reason:i},!hA&&(l=Xs["on"+n])?l(s):n===pA&&nz("Unhandled promise rejection",i)},pz=function(n){Vc(sA,Xs,function(){var r,i=n.facade,s=n.value;if(EA(n)&&(r=FS(function(){Wm?HS.emit("unhandledRejection",s,i):vA(pA,i,s)}),n.rejection=Wm||EA(n)?2:1,r.error))throw r.value})},EA=function(n){return n.rejection!==1&&!n.parent},fz=function(n){Vc(sA,Xs,function(){var r=n.facade;Wm?HS.emit("rejectionHandled",r):vA("rejectionhandled",r,n.value)})},nd=function(n,r,i){return function(s){n(r,s,i)}},rd=function(n,r,i){n.done||(n.done=!0,i&&(n=i),n.value=r,n.state=2,gA(n,!0))},$S=function(n,r,i){if(!n.done){n.done=!0,i&&(n=i);try{if(n.facade===r)throw dA("Promise can't be resolved itself");var s=fA(r);s?VS(function(){var l={done:!1};try{Vc(s,r,nd($S,l,n),nd(rd,l,n))}catch(h){rd(l,h,n)}}):(n.value=r,n.state=1,gA(n,!1))}catch(l){rd({done:!1},l,n)}}};zm&&(Gm=(ys=function(n){JG(this,Gm),US(n),Vc(kS,this);var r=uA(this);try{n(nd($S,r),nd(rd,r))}catch(i){rd(r,i)}}).prototype,(kS=function(n){sz(this,{type:Ss,done:!1,notified:!1,parent:!1,reactions:new rz,rejection:!1,state:0,value:void 0})}).prototype=KG(Gm,{then:function(n,r){var i=cz(this),s=td(ez(this,ys));return i.parent=!0,s.ok=!$m(n)||n,s.fail=$m(r)&&r,s.domain=Wm?HS.domain:void 0,i.state==0?i.reactions.add(s):VS(function(){mA(s,i)}),s.promise},catch:function(n){return this.then(void 0,n)}}),oA=function(){var n=new kS,r=uA(n);this.promise=n,this.resolve=nd($S,r),this.reject=nd(rd,r)},cA.f=td=function(n){return n===ys||n===LS?new oA(n):uz(n)}),Hm({global:!0,wrap:!0,forced:zm},{Promise:ys}),YG(ys,Ss,!1,!0),qG(Ss),LS=zG(Ss),Hm({target:Ss,stat:!0,forced:zm},{reject:function(n){var r=td(this);return Vc(r.reject,void 0,n),r.promise}}),Hm({target:Ss,stat:!0,forced:!0},{resolve:function(n){return tz(this===LS?ys:this,n)}}),Hm({target:Ss,stat:!0,forced:hz},{all:function(n){var r=this,i=td(r),s=i.resolve,l=i.reject,h=FS(function(){var p=US(r.resolve),v=[],E=0,T=1;aA(n,function(y){var R=E++,k=!1;T++,Vc(p,r,y).then(function(V){k||(k=!0,v[R]=V,--T||s(v))},l)}),--T||s(v)});return h.error&&l(h.value),i.promise},race:function(n){var r=this,i=td(r),s=i.reject,l=FS(function(){var h=US(r.resolve);aA(n,function(p){Vc(h,r,p).then(i.resolve,s)})});return l.error&&s(l.value),i.promise}});var mz=te,gz=Vt,vz=ed,Ez=jm,_z=Nm;Pi({target:"Promise",stat:!0},{allSettled:function(n){var r=this,i=vz.f(r),s=i.resolve,l=i.reject,h=Ez(function(){var p=gz(r.resolve),v=[],E=0,T=1;_z(n,function(y){var R=E++,k=!1;T++,mz(p,r,y).then(function(V){k||(k=!0,v[R]={status:"fulfilled",value:V},--T||s(v))},function(V){k||(k=!0,v[R]={status:"rejected",reason:V},--T||s(v))})}),--T||s(v)});return h.error&&l(h.value),i.promise}});var Sz=Vt,yz=$e,Cz=te,Tz=ed,bz=jm,Rz=Nm,_A="No one promise resolved";Pi({target:"Promise",stat:!0},{any:function(n){var r=this,i=yz("AggregateError"),s=Tz.f(r),l=s.resolve,h=s.reject,p=bz(function(){var v=Sz(r.resolve),E=[],T=0,y=1,R=!1;Rz(n,function(k){var V=T++,$=!1;y++,Cz(v,r,k).then(function(W){$||R||(R=!0,l(W))},function(W){$||R||($=!0,E[V]=W,--y||h(new i(E,_A)))})}),--y||h(new i(E,_A))});return p.error&&h(p.value),s.promise}});var SA=AO,Iz=$e,wz=U,Oz=BO,yA=rA;Pi({target:"Promise",proto:!0,real:!0,forced:!!SA&&c(function(){SA.prototype.finally.call({then:function(){}},function(){})})},{finally:function(n){var r=Oz(this,Iz("Promise")),i=wz(n);return this.then(i?function(s){return yA(r,n()).then(function(){return s})}:n,i?function(s){return yA(r,n()).then(function(){throw s})}:n)}});var WS=S,Az=K_,Nz=Xu,Pz=je,xz=WS("".charAt),CA=WS("".charCodeAt),Dz=WS("".slice),TA=function(n){return function(r,i){var s,l,h=Nz(Pz(r)),p=Az(i),v=h.length;return p<0||p>=v?n?"":void 0:(s=CA(h,p))<55296||s>56319||p+1===v||(l=CA(h,p+1))<56320||l>57343?n?xz(h,p):s:n?Dz(h,p,p+2):l-56320+(s-55296<<10)+65536}},kz={codeAt:TA(!1),charAt:TA(!0)}.charAt,Lz=Xu,bA=Mm,Mz=RO,RA="String Iterator",Uz=bA.set,Vz=bA.getterFor(RA);Mz(String,"String",function(n){Uz(this,{type:RA,string:Lz(n),index:0})},function(){var n,r=Vz(this),i=r.string,s=r.index;return s>=i.length?{value:void 0,done:!0}:(n=kz(i,s),r.index+=n.length,{value:n,done:!1})});var Fz=ot.Promise,Bz={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},jz=I,Hz=Uc,$z=Hl,IA=qu,wA=er("toStringTag");for(var GS in Bz){var OA=jz[GS],zS=OA&&OA.prototype;zS&&Hz(zS)!==wA&&$z(zS,wA,GS),IA[GS]=IA.Array}var AA=Fz,Pe=AA;const NA=V1;function PA(n,r){const i=n&&n.navigator;if(!i.mediaDevices)return;const s=function(p){if(typeof p!="object"||p.mandatory||p.optional)return p;const v={};return Object.keys(p).forEach(E=>{if(E==="require"||E==="advanced"||E==="mediaSource")return;const T=typeof p[E]=="object"?p[E]:{ideal:p[E]};T.exact!==void 0&&typeof T.exact=="number"&&(T.min=T.max=T.exact);const y=function(R,k){return R?R+k.charAt(0).toUpperCase()+k.slice(1):k==="deviceId"?"sourceId":k};if(T.ideal!==void 0){v.optional=v.optional||[];let R={};typeof T.ideal=="number"?(R[y("min",E)]=T.ideal,v.optional.push(R),R={},R[y("max",E)]=T.ideal,v.optional.push(R)):(R[y("",E)]=T.ideal,v.optional.push(R))}T.exact!==void 0&&typeof T.exact!="number"?(v.mandatory=v.mandatory||{},v.mandatory[y("",E)]=T.exact):["min","max"].forEach(R=>{T[R]!==void 0&&(v.mandatory=v.mandatory||{},v.mandatory[y(R,E)]=T[R])})}),p.advanced&&(v.optional=(v.optional||[]).concat(p.advanced)),v},l=function(p,v){if(r.version>=61)return v(p);if((p=JSON.parse(JSON.stringify(p)))&&typeof p.audio=="object"){const E=function(T,y,R){y in T&&!(R in T)&&(T[R]=T[y],delete T[y])};E((p=JSON.parse(JSON.stringify(p))).audio,"autoGainControl","googAutoGainControl"),E(p.audio,"noiseSuppression","googNoiseSuppression"),p.audio=s(p.audio)}if(p&&typeof p.video=="object"){let E=p.video.facingMode;E=E&&(typeof E=="object"?E:{ideal:E});const T=r.version<66;if(E&&(E.exact==="user"||E.exact==="environment"||E.ideal==="user"||E.ideal==="environment")&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||T)){let y;if(delete p.video.facingMode,E.exact==="environment"||E.ideal==="environment"?y=["back","rear"]:E.exact!=="user"&&E.ideal!=="user"||(y=["front"]),y)return i.mediaDevices.enumerateDevices().then(R=>{let k=(R=R.filter(V=>V.kind==="videoinput")).find(V=>y.some($=>V.label.toLowerCase().includes($)));return!k&&R.length&&y.includes("back")&&(k=R[R.length-1]),k&&(p.video.deviceId=E.exact?{exact:k.deviceId}:{ideal:k.deviceId}),p.video=s(p.video),NA("chrome: "+JSON.stringify(p)),v(p)})}p.video=s(p.video)}return NA("chrome: "+JSON.stringify(p)),v(p)},h=function(p){return r.version>=64?p:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[p.name]||p.name,message:p.message,constraint:p.constraint||p.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(i.getUserMedia=function(p,v,E){l(p,T=>{i.webkitGetUserMedia(T,v,y=>{E&&E(h(y))})})}.bind(i),i.mediaDevices.getUserMedia){const p=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(v){return l(v,E=>p(E).then(T=>{if(E.audio&&!T.getAudioTracks().length||E.video&&!T.getVideoTracks().length)throw T.getTracks().forEach(y=>{y.stop()}),new DOMException("","NotFoundError");return T},T=>Pe.reject(h(T))))}}}function xA(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function DA(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(i){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=i)},enumerable:!0,configurable:!0});const r=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",s=>{let l;l=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(p=>p.track&&p.track.id===s.track.id):{track:s.track};const h=new Event("track");h.track=s.track,h.receiver=l,h.transceiver={receiver:l},h.streams=[i.stream],this.dispatchEvent(h)}),i.stream.getTracks().forEach(s=>{let l;l=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(p=>p.track&&p.track.id===s.id):{track:s};const h=new Event("track");h.track=s,h.receiver=l,h.transceiver={receiver:l},h.streams=[i.stream],this.dispatchEvent(h)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}else $l(n,"track",r=>(r.transceiver||Object.defineProperty(r,"transceiver",{value:{receiver:r.receiver}}),r))}function kA(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const r=function(l,h){return{track:h,get dtmf(){return this._dtmf===void 0&&(h.kind==="audio"?this._dtmf=l.createDTMFSender(h):this._dtmf=null),this._dtmf},_pc:l}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const l=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(p,v){let E=l.apply(this,arguments);return E||(E=r(this,p),this._senders.push(E)),E};const h=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(p){h.apply(this,arguments);const v=this._senders.indexOf(p);v!==-1&&this._senders.splice(v,1)}}const i=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],i.apply(this,[l]),l.getTracks().forEach(h=>{this._senders.push(r(this,h))})};const s=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],s.apply(this,[l]),l.getTracks().forEach(h=>{const p=this._senders.find(v=>v.track===h);p&&this._senders.splice(this._senders.indexOf(p),1)})}}else if(typeof n=="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const r=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const i=r.apply(this,[]);return i.forEach(s=>s._pc=this),i},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function LA(n){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[i,s,l]=arguments;if(arguments.length>0&&typeof i=="function")return r.apply(this,arguments);if(r.length===0&&(arguments.length===0||typeof i!="function"))return r.apply(this,[]);const h=function(v){const E={};return v.result().forEach(T=>{const y={id:T.id,timestamp:T.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[T.type]||T.type};T.names().forEach(R=>{y[R]=T.stat(R)}),E[y.id]=y}),E},p=function(v){return new Map(Object.keys(v).map(E=>[E,v[E]]))};if(arguments.length>=2){const v=function(E){s(p(h(E)))};return r.apply(this,[v,i])}return new Pe((v,E)=>{r.apply(this,[function(T){v(p(h(T)))},E])}).then(s,l)}}function MA(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const i=n.RTCPeerConnection.prototype.getSenders;i&&(n.RTCPeerConnection.prototype.getSenders=function(){const l=i.apply(this,[]);return l.forEach(h=>h._pc=this),l});const s=n.RTCPeerConnection.prototype.addTrack;s&&(n.RTCPeerConnection.prototype.addTrack=function(){const l=s.apply(this,arguments);return l._pc=this,l}),n.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(h=>j1(h,l.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const i=n.RTCPeerConnection.prototype.getReceivers;i&&(n.RTCPeerConnection.prototype.getReceivers=function(){const s=i.apply(this,[]);return s.forEach(l=>l._pc=this),s}),$l(n,"track",s=>(s.receiver._pc=s.srcElement,s)),n.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>j1(l,s.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype)||!("getStats"in n.RTCRtpReceiver.prototype))return;const r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const i=arguments[0];let s,l,h;return this.getSenders().forEach(p=>{p.track===i&&(s?h=!0:s=p)}),this.getReceivers().forEach(p=>(p.track===i&&(l?h=!0:l=p),p.track===i)),h||s&&l?Pe.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():l?l.getStats():Pe.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return r.apply(this,arguments)}}function UA(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(h=>this._shimmedLocalStreams[h][0])};const r=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(h,p){if(!p)return r.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const v=r.apply(this,arguments);return this._shimmedLocalStreams[p.id]?this._shimmedLocalStreams[p.id].indexOf(v)===-1&&this._shimmedLocalStreams[p.id].push(v):this._shimmedLocalStreams[p.id]=[p,v],v};const i=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(h){this._shimmedLocalStreams=this._shimmedLocalStreams||{},h.getTracks().forEach(E=>{if(this.getSenders().find(T=>T.track===E))throw new DOMException("Track already exists.","InvalidAccessError")});const p=this.getSenders();i.apply(this,arguments);const v=this.getSenders().filter(E=>p.indexOf(E)===-1);this._shimmedLocalStreams[h.id]=[h].concat(v)};const s=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(h){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[h.id],s.apply(this,arguments)};const l=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(h){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},h&&Object.keys(this._shimmedLocalStreams).forEach(p=>{const v=this._shimmedLocalStreams[p].indexOf(h);v!==-1&&this._shimmedLocalStreams[p].splice(v,1),this._shimmedLocalStreams[p].length===1&&delete this._shimmedLocalStreams[p]}),l.apply(this,arguments)}}function VA(n,r){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&r.version>=65)return UA(n);const i=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const T=i.apply(this);return this._reverseStreams=this._reverseStreams||{},T.map(y=>this._reverseStreams[y.id])};const s=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(T){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},T.getTracks().forEach(y=>{if(this.getSenders().find(R=>R.track===y))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[T.id]){const y=new n.MediaStream(T.getTracks());this._streams[T.id]=y,this._reverseStreams[y.id]=T,T=y}s.apply(this,[T])};const l=n.RTCPeerConnection.prototype.removeStream;function h(T,y){let R=y.sdp;return Object.keys(T._reverseStreams||[]).forEach(k=>{const V=T._reverseStreams[k],$=T._streams[V.id];R=R.replace(new RegExp($.id,"g"),V.id)}),new RTCSessionDescription({type:y.type,sdp:R})}function p(T,y){let R=y.sdp;return Object.keys(T._reverseStreams||[]).forEach(k=>{const V=T._reverseStreams[k],$=T._streams[V.id];R=R.replace(new RegExp(V.id,"g"),$.id)}),new RTCSessionDescription({type:y.type,sdp:R})}n.RTCPeerConnection.prototype.removeStream=function(T){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.apply(this,[this._streams[T.id]||T]),delete this._reverseStreams[this._streams[T.id]?this._streams[T.id].id:T.id],delete this._streams[T.id]},n.RTCPeerConnection.prototype.addTrack=function(T,y){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const R=[].slice.call(arguments,1);if(R.length!==1||!R[0].getTracks().find($=>$===T))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find($=>$.track===T))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const V=this._streams[y.id];if(V)V.addTrack(T),Pe.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const $=new n.MediaStream([T]);this._streams[y.id]=$,this._reverseStreams[$.id]=y,this.addStream($)}return this.getSenders().find($=>$.track===T)},["createOffer","createAnswer"].forEach(function(T){const y=n.RTCPeerConnection.prototype[T],R={[T](){const k=arguments;return arguments.length&&typeof arguments[0]=="function"?y.apply(this,[V=>{const $=h(this,V);k[0].apply(null,[$])},V=>{k[1]&&k[1].apply(null,V)},arguments[2]]):y.apply(this,arguments).then(V=>h(this,V))}};n.RTCPeerConnection.prototype[T]=R[T]});const v=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=p(this,arguments[0]),v.apply(this,arguments)):v.apply(this,arguments)};const E=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const T=E.get.apply(this);return T.type===""?T:h(this,T)}}),n.RTCPeerConnection.prototype.removeTrack=function(T){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!T._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(T._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let y;this._streams=this._streams||{},Object.keys(this._streams).forEach(R=>{this._streams[R].getTracks().find(k=>T.track===k)&&(y=this._streams[R])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(T.track),this.dispatchEvent(new Event("negotiationneeded")))}}function KS(n,r){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=n.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};n.RTCPeerConnection.prototype[i]=l[i]})}function FA(n,r){$l(n,"negotiationneeded",i=>{const s=i.target;if(!(r.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")||s.signalingState==="stable")return i})}var BA=Object.freeze({__proto__:null,shimMediaStream:xA,shimOnTrack:DA,shimGetSendersWithDtmf:kA,shimGetStats:LA,shimSenderReceiverGetStats:MA,shimAddTrackRemoveTrackWithNative:UA,shimAddTrackRemoveTrack:VA,shimPeerConnection:KS,fixNegotiationNeeded:FA,shimGetUserMedia:PA,shimGetDisplayMedia:function(n,r){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(typeof r=="function"?n.navigator.mediaDevices.getDisplayMedia=function(i){return r(i).then(s=>{const l=i.video&&i.video.width,h=i.video&&i.video.height,p=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:s,maxFrameRate:p||3}},l&&(i.video.mandatory.maxWidth=l),h&&(i.video.mandatory.maxHeight=h),n.navigator.mediaDevices.getUserMedia(i)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});function jA(n,r){const i=n&&n.navigator,s=n&&n.MediaStreamTrack;if(i.getUserMedia=function(l,h,p){X_("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(l).then(h,p)},!(r.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const l=function(p,v,E){v in p&&!(E in p)&&(p[E]=p[v],delete p[v])},h=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(p){return typeof p=="object"&&typeof p.audio=="object"&&(p=JSON.parse(JSON.stringify(p)),l(p.audio,"autoGainControl","mozAutoGainControl"),l(p.audio,"noiseSuppression","mozNoiseSuppression")),h(p)},s&&s.prototype.getSettings){const p=s.prototype.getSettings;s.prototype.getSettings=function(){const v=p.apply(this,arguments);return l(v,"mozAutoGainControl","autoGainControl"),l(v,"mozNoiseSuppression","noiseSuppression"),v}}if(s&&s.prototype.applyConstraints){const p=s.prototype.applyConstraints;s.prototype.applyConstraints=function(v){return this.kind==="audio"&&typeof v=="object"&&(v=JSON.parse(JSON.stringify(v)),l(v,"autoGainControl","mozAutoGainControl"),l(v,"noiseSuppression","mozNoiseSuppression")),p.apply(this,[v])}}}}function HA(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function YS(n,r){if(typeof n!="object"||!n.RTCPeerConnection&&!n.mozRTCPeerConnection)return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(l){const h=n.RTCPeerConnection.prototype[l],p={[l](){return arguments[0]=new(l==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),h.apply(this,arguments)}};n.RTCPeerConnection.prototype[l]=p[l]});const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[l,h,p]=arguments;return s.apply(this,[l||null]).then(v=>{if(r.version<53&&!h)try{v.forEach(E=>{E.type=i[E.type]||E.type})}catch(E){if(E.name!=="TypeError")throw E;v.forEach((T,y)=>{v.set(y,Object.assign({},T,{type:i[T.type]||T.type}))})}return v}).then(h,p)}}function $A(n){if(typeof n!="object"||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const r=n.RTCPeerConnection.prototype.getSenders;r&&(n.RTCPeerConnection.prototype.getSenders=function(){const s=r.apply(this,[]);return s.forEach(l=>l._pc=this),s});const i=n.RTCPeerConnection.prototype.addTrack;i&&(n.RTCPeerConnection.prototype.addTrack=function(){const s=i.apply(this,arguments);return s._pc=this,s}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Pe.resolve(new Map)}}function WA(n){if(typeof n!="object"||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const r=n.RTCPeerConnection.prototype.getReceivers;r&&(n.RTCPeerConnection.prototype.getReceivers=function(){const i=r.apply(this,[]);return i.forEach(s=>s._pc=this),i}),$l(n,"track",i=>(i.receiver._pc=i.srcElement,i)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function GA(n){n.RTCPeerConnection&&!("removeStream"in n.RTCPeerConnection.prototype)&&(n.RTCPeerConnection.prototype.removeStream=function(r){X_("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&r.getTracks().includes(i.track)&&this.removeTrack(i)})})}function zA(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function KA(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.addTransceiver;r&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const s=i.length>0;s&&i.forEach(h=>{if("rid"in h&&!/^[a-z0-9]{0,16}$/i.test(h.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in h&&!(parseFloat(h.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in h&&!(parseFloat(h.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=r.apply(this,arguments);if(s){const{sender:h}=l,p=h.getParameters();(!("encodings"in p)||p.encodings.length===1&&Object.keys(p.encodings[0]).length===0)&&(p.encodings=i,h.sendEncodings=i,this.setParametersPromises.push(h.setParameters(p).then(()=>{delete h.sendEncodings}).catch(()=>{delete h.sendEncodings})))}return l})}function YA(n){if(typeof n!="object"||!n.RTCRtpSender)return;const r=n.RTCRtpSender.prototype.getParameters;r&&(n.RTCRtpSender.prototype.getParameters=function(){const i=r.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function qA(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Pe.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}function XA(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Pe.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}var JA=Object.freeze({__proto__:null,shimOnTrack:HA,shimPeerConnection:YS,shimSenderGetStats:$A,shimReceiverGetStats:WA,shimRemoveStream:GA,shimRTCDataChannel:zA,shimAddTransceiver:KA,shimGetParameters:YA,shimCreateOffer:qA,shimCreateAnswer:XA,shimGetUserMedia:jA,shimGetDisplayMedia:function(n,r){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Pe.reject(s)}return i.video===!0?i.video={mediaSource:r}:i.video.mediaSource=r,n.navigator.mediaDevices.getUserMedia(i)})}});function QA(n){if(typeof n=="object"&&n.RTCPeerConnection){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const r=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(s=>r.call(this,s,i)),i.getVideoTracks().forEach(s=>r.call(this,s,i))},n.RTCPeerConnection.prototype.addTrack=function(i){for(var s=arguments.length,l=new Array(s>1?s-1:0),h=1;h<s;h++)l[h-1]=arguments[h];return l&&l.forEach(p=>{this._localStreams?this._localStreams.includes(p)||this._localStreams.push(p):this._localStreams=[p]}),r.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(r);if(i===-1)return;this._localStreams.splice(i,1);const s=r.getTracks();this.getSenders().forEach(l=>{s.includes(l.track)&&this.removeTrack(l)})})}}function ZA(n){if(typeof n=="object"&&n.RTCPeerConnection&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(i){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=i),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(l=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(l))return;this._remoteStreams.push(l);const h=new Event("addstream");h.stream=l,this.dispatchEvent(h)})})}});const r=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(l=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(l)>=0)return;i._remoteStreams.push(l);const h=new Event("addstream");h.stream=l,i.dispatchEvent(h)})}),r.apply(i,arguments)}}}function eN(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype,i=r.createOffer,s=r.createAnswer,l=r.setLocalDescription,h=r.setRemoteDescription,p=r.addIceCandidate;r.createOffer=function(E,T){const y=arguments.length>=2?arguments[2]:arguments[0],R=i.apply(this,[y]);return T?(R.then(E,T),Pe.resolve()):R},r.createAnswer=function(E,T){const y=arguments.length>=2?arguments[2]:arguments[0],R=s.apply(this,[y]);return T?(R.then(E,T),Pe.resolve()):R};let v=function(E,T,y){const R=l.apply(this,[E]);return y?(R.then(T,y),Pe.resolve()):R};r.setLocalDescription=v,v=function(E,T,y){const R=h.apply(this,[E]);return y?(R.then(T,y),Pe.resolve()):R},r.setRemoteDescription=v,v=function(E,T,y){const R=p.apply(this,[E]);return y?(R.then(T,y),Pe.resolve()):R},r.addIceCandidate=v}function tN(n){const r=n&&n.navigator;if(r.mediaDevices&&r.mediaDevices.getUserMedia){const i=r.mediaDevices,s=i.getUserMedia.bind(i);r.mediaDevices.getUserMedia=l=>s(nN(l))}!r.getUserMedia&&r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=function(i,s,l){r.mediaDevices.getUserMedia(i).then(s,l)}.bind(r))}function nN(n){return n&&n.video!==void 0?Object.assign({},n,{video:B1(n.video)}):n}function rN(n){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection;n.RTCPeerConnection=function(i,s){if(i&&i.iceServers){const l=[];for(let h=0;h<i.iceServers.length;h++){let p=i.iceServers[h];!p.hasOwnProperty("urls")&&p.hasOwnProperty("url")?(X_("RTCIceServer.url","RTCIceServer.urls"),p=JSON.parse(JSON.stringify(p)),p.urls=p.url,delete p.url,l.push(p)):l.push(i.iceServers[h])}i.iceServers=l}return new r(i,s)},n.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:()=>r.generateCertificate})}function iN(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function oN(n){const r=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(i){if(i){i.offerToReceiveAudio!==void 0&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const s=this.getTransceivers().find(h=>h.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):i.offerToReceiveAudio!==!0||s||this.addTransceiver("audio",{direction:"recvonly"}),i.offerToReceiveVideo!==void 0&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const l=this.getTransceivers().find(h=>h.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):i.offerToReceiveVideo!==!0||l||this.addTransceiver("video",{direction:"recvonly"})}return r.apply(this,arguments)}}function aN(n){typeof n!="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}var sN=Object.freeze({__proto__:null,shimLocalStreamsAPI:QA,shimRemoteStreamsAPI:ZA,shimCallbacksAPI:eN,shimGetUserMedia:tN,shimConstraints:nN,shimRTCIceServerUrls:rN,shimTrackEventTransceiver:iN,shimCreateOfferLegacy:oN,shimAudioContext:aN}),Wz=`	
\v\f\r                　\u2028\u2029\uFEFF`,Gz=je,zz=Xu,cN=S("".replace),Km=`[	
\v\f\r                　\u2028\u2029\uFEFF]`,Kz=RegExp("^"+Km+Km+"*"),Yz=RegExp(Km+Km+"*$"),qS=function(n){return function(r){var i=zz(Gz(r));return 1&n&&(i=cN(i,Kz,"")),2&n&&(i=cN(i,Yz,"")),i}},qz={start:qS(1),end:qS(2),trim:qS(3)},Xz=gO.PROPER,Jz=c,lN=Wz,Qz=qz.trim;Pi({target:"String",proto:!0,forced:function(n){return Jz(function(){return!!lN[n]()||"​᠎"[n]()!=="​᠎"||Xz&&lN[n].name!==n})}("trim")},{trim:function(){return Qz(this)}});var Zz=Lc("String").trim,e7=C,t7=Zz,XS=String.prototype,Js=function(n){var r=n.trim;return typeof n=="string"||n===XS||e7(XS,n)&&r===XS.trim?t7:r},JS={exports:{}};(function(n){const r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(i){return Js(i).call(i).split(`
`).map(s=>Js(s).call(s))},r.splitSections=function(i){return i.split(`
m=`).map((s,l)=>{var h;return Js(h=l>0?"m="+s:s).call(h)+`\r
`})},r.getDescription=function(i){const s=r.splitSections(i);return s&&s[0]},r.getMediaSections=function(i){const s=r.splitSections(i);return s.shift(),s},r.matchPrefix=function(i,s){return r.splitLines(i).filter(l=>l.indexOf(s)===0)},r.parseCandidate=function(i){let s;s=i.indexOf("a=candidate:")===0?i.substring(12).split(" "):i.substring(10).split(" ");const l={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let h=8;h<s.length;h+=2)switch(s[h]){case"raddr":l.relatedAddress=s[h+1];break;case"rport":l.relatedPort=parseInt(s[h+1],10);break;case"tcptype":l.tcpType=s[h+1];break;case"ufrag":l.ufrag=s[h+1],l.usernameFragment=s[h+1];break;default:l[s[h]]===void 0&&(l[s[h]]=s[h+1])}return l},r.writeCandidate=function(i){const s=[];s.push(i.foundation);const l=i.component;l==="rtp"?s.push(1):l==="rtcp"?s.push(2):s.push(l),s.push(i.protocol.toUpperCase()),s.push(i.priority),s.push(i.address||i.ip),s.push(i.port);const h=i.type;return s.push("typ"),s.push(h),h!=="host"&&i.relatedAddress&&i.relatedPort&&(s.push("raddr"),s.push(i.relatedAddress),s.push("rport"),s.push(i.relatedPort)),i.tcpType&&i.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(i.tcpType)),(i.usernameFragment||i.ufrag)&&(s.push("ufrag"),s.push(i.usernameFragment||i.ufrag)),"candidate:"+s.join(" ")},r.parseIceOptions=function(i){return i.substr(14).split(" ")},r.parseRtpMap=function(i){let s=i.substr(9).split(" ");const l={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),l.name=s[0],l.clockRate=parseInt(s[1],10),l.channels=s.length===3?parseInt(s[2],10):1,l.numChannels=l.channels,l},r.writeRtpMap=function(i){let s=i.payloadType;i.preferredPayloadType!==void 0&&(s=i.preferredPayloadType);const l=i.channels||i.numChannels||1;return"a=rtpmap:"+s+" "+i.name+"/"+i.clockRate+(l!==1?"/"+l:"")+`\r
`},r.parseExtmap=function(i){const s=i.substr(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1]}},r.writeExtmap=function(i){return"a=extmap:"+(i.id||i.preferredId)+(i.direction&&i.direction!=="sendrecv"?"/"+i.direction:"")+" "+i.uri+`\r
`},r.parseFmtp=function(i){const s={};let l;const h=i.substr(i.indexOf(" ")+1).split(";");for(let E=0;E<h.length;E++){var p,v;l=Js(p=h[E]).call(p).split("="),s[Js(v=l[0]).call(v)]=l[1]}return s},r.writeFmtp=function(i){let s="",l=i.payloadType;if(i.preferredPayloadType!==void 0&&(l=i.preferredPayloadType),i.parameters&&Object.keys(i.parameters).length){const h=[];Object.keys(i.parameters).forEach(p=>{i.parameters[p]!==void 0?h.push(p+"="+i.parameters[p]):h.push(p)}),s+="a=fmtp:"+l+" "+h.join(";")+`\r
`}return s},r.parseRtcpFb=function(i){const s=i.substr(i.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},r.writeRtcpFb=function(i){let s="",l=i.payloadType;return i.preferredPayloadType!==void 0&&(l=i.preferredPayloadType),i.rtcpFeedback&&i.rtcpFeedback.length&&i.rtcpFeedback.forEach(h=>{s+="a=rtcp-fb:"+l+" "+h.type+(h.parameter&&h.parameter.length?" "+h.parameter:"")+`\r
`}),s},r.parseSsrcMedia=function(i){const s=i.indexOf(" "),l={ssrc:parseInt(i.substr(7,s-7),10)},h=i.indexOf(":",s);return h>-1?(l.attribute=i.substr(s+1,h-s-1),l.value=i.substr(h+1)):l.attribute=i.substr(s+1),l},r.parseSsrcGroup=function(i){const s=i.substr(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(l=>parseInt(l,10))}},r.getMid=function(i){const s=r.matchPrefix(i,"a=mid:")[0];if(s)return s.substr(6)},r.parseFingerprint=function(i){const s=i.substr(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},r.getDtlsParameters=function(i,s){return{role:"auto",fingerprints:r.matchPrefix(i+s,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(i,s){let l="a=setup:"+s+`\r
`;return i.fingerprints.forEach(h=>{l+="a=fingerprint:"+h.algorithm+" "+h.value+`\r
`}),l},r.parseCryptoLine=function(i){const s=i.substr(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},r.writeCryptoLine=function(i){return"a=crypto:"+i.tag+" "+i.cryptoSuite+" "+(typeof i.keyParams=="object"?r.writeCryptoKeyParams(i.keyParams):i.keyParams)+(i.sessionParams?" "+i.sessionParams.join(" "):"")+`\r
`},r.parseCryptoKeyParams=function(i){if(i.indexOf("inline:")!==0)return null;const s=i.substr(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(i){return i.keyMethod+":"+i.keySalt+(i.lifeTime?"|"+i.lifeTime:"")+(i.mkiValue&&i.mkiLength?"|"+i.mkiValue+":"+i.mkiLength:"")},r.getCryptoParameters=function(i,s){return r.matchPrefix(i+s,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(i,s){const l=r.matchPrefix(i+s,"a=ice-ufrag:")[0],h=r.matchPrefix(i+s,"a=ice-pwd:")[0];return l&&h?{usernameFragment:l.substr(12),password:h.substr(10)}:null},r.writeIceParameters=function(i){let s="a=ice-ufrag:"+i.usernameFragment+`\r
a=ice-pwd:`+i.password+`\r
`;return i.iceLite&&(s+=`a=ice-lite\r
`),s},r.parseRtpParameters=function(i){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=r.splitLines(i)[0].split(" ");for(let h=3;h<l.length;h++){const p=l[h],v=r.matchPrefix(i,"a=rtpmap:"+p+" ")[0];if(v){const E=r.parseRtpMap(v),T=r.matchPrefix(i,"a=fmtp:"+p+" ");switch(E.parameters=T.length?r.parseFmtp(T[0]):{},E.rtcpFeedback=r.matchPrefix(i,"a=rtcp-fb:"+p+" ").map(r.parseRtcpFb),s.codecs.push(E),E.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(E.name.toUpperCase())}}}return r.matchPrefix(i,"a=extmap:").forEach(h=>{s.headerExtensions.push(r.parseExtmap(h))}),s},r.writeRtpDescription=function(i,s){let l="";l+="m="+i+" ",l+=s.codecs.length>0?"9":"0",l+=" UDP/TLS/RTP/SAVPF ",l+=s.codecs.map(p=>p.preferredPayloadType!==void 0?p.preferredPayloadType:p.payloadType).join(" ")+`\r
`,l+=`c=IN IP4 0.0.0.0\r
`,l+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(p=>{l+=r.writeRtpMap(p),l+=r.writeFmtp(p),l+=r.writeRtcpFb(p)});let h=0;return s.codecs.forEach(p=>{p.maxptime>h&&(h=p.maxptime)}),h>0&&(l+="a=maxptime:"+h+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(p=>{l+=r.writeExtmap(p)}),l},r.parseRtpEncodingParameters=function(i){const s=[],l=r.parseRtpParameters(i),h=l.fecMechanisms.indexOf("RED")!==-1,p=l.fecMechanisms.indexOf("ULPFEC")!==-1,v=r.matchPrefix(i,"a=ssrc:").map(k=>r.parseSsrcMedia(k)).filter(k=>k.attribute==="cname"),E=v.length>0&&v[0].ssrc;let T;const y=r.matchPrefix(i,"a=ssrc-group:FID").map(k=>k.substr(17).split(" ").map(V=>parseInt(V,10)));y.length>0&&y[0].length>1&&y[0][0]===E&&(T=y[0][1]),l.codecs.forEach(k=>{if(k.name.toUpperCase()==="RTX"&&k.parameters.apt){let V={ssrc:E,codecPayloadType:parseInt(k.parameters.apt,10)};E&&T&&(V.rtx={ssrc:T}),s.push(V),h&&(V=JSON.parse(JSON.stringify(V)),V.fec={ssrc:E,mechanism:p?"red+ulpfec":"red"},s.push(V))}}),s.length===0&&E&&s.push({ssrc:E});let R=r.matchPrefix(i,"b=");return R.length&&(R=R[0].indexOf("b=TIAS:")===0?parseInt(R[0].substr(7),10):R[0].indexOf("b=AS:")===0?1e3*parseInt(R[0].substr(5),10)*.95-16e3:void 0,s.forEach(k=>{k.maxBitrate=R})),s},r.parseRtcpParameters=function(i){const s={},l=r.matchPrefix(i,"a=ssrc:").map(v=>r.parseSsrcMedia(v)).filter(v=>v.attribute==="cname")[0];l&&(s.cname=l.value,s.ssrc=l.ssrc);const h=r.matchPrefix(i,"a=rtcp-rsize");s.reducedSize=h.length>0,s.compound=h.length===0;const p=r.matchPrefix(i,"a=rtcp-mux");return s.mux=p.length>0,s},r.writeRtcpParameters=function(i){let s="";return i.reducedSize&&(s+=`a=rtcp-rsize\r
`),i.mux&&(s+=`a=rtcp-mux\r
`),i.ssrc!==void 0&&i.cname&&(s+="a=ssrc:"+i.ssrc+" cname:"+i.cname+`\r
`),s},r.parseMsid=function(i){let s;const l=r.matchPrefix(i,"a=msid:");if(l.length===1)return s=l[0].substr(7).split(" "),{stream:s[0],track:s[1]};const h=r.matchPrefix(i,"a=ssrc:").map(p=>r.parseSsrcMedia(p)).filter(p=>p.attribute==="msid");return h.length>0?(s=h[0].value.split(" "),{stream:s[0],track:s[1]}):void 0},r.parseSctpDescription=function(i){const s=r.parseMLine(i),l=r.matchPrefix(i,"a=max-message-size:");let h;l.length>0&&(h=parseInt(l[0].substr(19),10)),isNaN(h)&&(h=65536);const p=r.matchPrefix(i,"a=sctp-port:");if(p.length>0)return{port:parseInt(p[0].substr(12),10),protocol:s.fmt,maxMessageSize:h};const v=r.matchPrefix(i,"a=sctpmap:");if(v.length>0){const E=v[0].substr(10).split(" ");return{port:parseInt(E[0],10),protocol:E[1],maxMessageSize:h}}},r.writeSctpDescription=function(i,s){let l=[];return l=i.protocol!=="DTLS/SCTP"?["m="+i.kind+" 9 "+i.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:["m="+i.kind+" 9 "+i.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&l.push("a=max-message-size:"+s.maxMessageSize+`\r
`),l.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(i,s,l){let h;const p=s!==void 0?s:2;return h=i||r.generateSessionId(),`v=0\r
o=`+(l||"thisisadapterortc")+" "+h+" "+p+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},r.getDirection=function(i,s){const l=r.splitLines(i);for(let h=0;h<l.length;h++)switch(l[h]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return l[h].substr(2)}return s?r.getDirection(s):"sendrecv"},r.getKind=function(i){return r.splitLines(i)[0].split(" ")[0].substr(2)},r.isRejected=function(i){return i.split(" ",2)[1]==="0"},r.parseMLine=function(i){const s=r.splitLines(i)[0].substr(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},r.parseOLine=function(i){const s=r.matchPrefix(i,"o=")[0].substr(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},r.isValidSDP=function(i){if(typeof i!="string"||i.length===0)return!1;const s=r.splitLines(i);for(let l=0;l<s.length;l++)if(s[l].length<2||s[l].charAt(1)!=="=")return!1;return!0},n.exports=r})(JS);var id=JS.exports,n7=Object.freeze(o({__proto__:null,default:id},[JS.exports]));function Ym(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const r=n.RTCIceCandidate;n.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&((i=JSON.parse(JSON.stringify(i))).candidate=i.candidate.substr(2)),i.candidate&&i.candidate.length){const s=new r(i),l=id.parseCandidate(i.candidate),h=Object.assign(s,l);return h.toJSON=function(){return{candidate:h.candidate,sdpMid:h.sdpMid,sdpMLineIndex:h.sdpMLineIndex,usernameFragment:h.usernameFragment}},h}return new r(i)},n.RTCIceCandidate.prototype=r.prototype,$l(n,"icecandidate",i=>(i.candidate&&Object.defineProperty(i,"candidate",{value:new n.RTCIceCandidate(i.candidate),writable:"false"}),i))}function QS(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||$l(n,"icecandidate",r=>{if(r.candidate){const i=id.parseCandidate(r.candidate.candidate);i.type==="relay"&&(r.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[i.priority>>24])}return r})}function qm(n,r){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const i=function(v){if(!v||!v.sdp)return!1;const E=id.splitSections(v.sdp);return E.shift(),E.some(T=>{const y=id.parseMLine(T);return y&&y.kind==="application"&&y.protocol.indexOf("SCTP")!==-1})},s=function(v){const E=v.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(E===null||E.length<2)return-1;const T=parseInt(E[1],10);return T!=T?-1:T},l=function(v){let E=65536;return r.browser==="firefox"&&(E=r.version<57?v===-1?16384:2147483637:r.version<60?r.version===57?65535:65536:2147483637),E},h=function(v,E){let T=65536;r.browser==="firefox"&&r.version===57&&(T=65535);const y=id.matchPrefix(v.sdp,"a=max-message-size:");return y.length>0?T=parseInt(y[0].substr(19),10):r.browser==="firefox"&&E!==-1&&(T=2147483637),T},p=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,r.browser==="chrome"&&r.version>=76){const{sdpSemantics:v}=this.getConfiguration();v==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const v=s(arguments[0]),E=l(v),T=h(arguments[0],v);let y;y=E===0&&T===0?Number.POSITIVE_INFINITY:E===0||T===0?Math.max(E,T):Math.min(E,T);const R={};Object.defineProperty(R,"maxMessageSize",{get:()=>y}),this._sctp=R}return p.apply(this,arguments)}}function Xm(n){if(!n.RTCPeerConnection||!("createDataChannel"in n.RTCPeerConnection.prototype))return;function r(s,l){const h=s.send;s.send=function(){const p=arguments[0],v=p.length||p.size||p.byteLength;if(s.readyState==="open"&&l.sctp&&v>l.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+l.sctp.maxMessageSize+" bytes)");return h.apply(s,arguments)}}const i=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const s=i.apply(this,arguments);return r(s,this),s},$l(n,"datachannel",s=>(r(s.channel,s.target),s))}function ZS(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const r=n.RTCPeerConnection.prototype;Object.defineProperty(r,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(r,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(i){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),i&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=i)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(i=>{const s=r[i];r[i]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=l=>{const h=l.target;if(h._lastConnectionState!==h.connectionState){h._lastConnectionState=h.connectionState;const p=new Event("connectionstatechange",l);h.dispatchEvent(p)}return l},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function ey(n,r){if(!n.RTCPeerConnection||r.browser==="chrome"&&r.version>=71||r.browser==="safari"&&r.version>=605)return;const i=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=s.sdp.split(`
`).filter(h=>Js(h).call(h)!=="a=extmap-allow-mixed").join(`
`);n.RTCSessionDescription&&s instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:s.type,sdp:l}):s.sdp=l}return i.apply(this,arguments)}}function Jm(n,r){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const i=n.RTCPeerConnection.prototype.addIceCandidate;i&&i.length!==0&&(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(r.browser==="chrome"&&r.version<78||r.browser==="firefox"&&r.version<68||r.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Pe.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Pe.resolve())})}function Qm(n,r){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const i=n.RTCPeerConnection.prototype.setLocalDescription;i&&i.length!==0&&(n.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return i.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer"}return s.sdp||s.type!=="offer"&&s.type!=="answer"?i.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(h=>i.apply(this,[h]))})}var r7=Object.freeze({__proto__:null,shimRTCIceCandidate:Ym,shimRTCIceCandidateRelayProtocol:QS,shimMaxMessageSize:qm,shimSendThrowTypeError:Xm,shimConnectionState:ZS,removeExtmapAllowMixed:ey,shimAddIceCandidateNullOrEmpty:Jm,shimParameterlessSetLocalDescription:Qm});let Kr,qt;(function(){let{window:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const i=V1,s=EH(n),l={browserDetails:s,commonShim:r7,extractVersion:ym,disableLog:gH,disableWarnings:vH,sdp:n7};switch(s.browser){case"chrome":if(!BA||!KS||!r.shimChrome)return i("Chrome shim is not included in this adapter release."),l;if(s.version===null)return i("Chrome shim can not determine version, not shimming."),l;i("adapter.js shimming chrome."),l.browserShim=BA,Jm(n,s),Qm(n),PA(n,s),xA(n),KS(n,s),DA(n),VA(n,s),kA(n),LA(n),MA(n),FA(n,s),Ym(n),QS(n),ZS(n),qm(n,s),Xm(n),ey(n,s);break;case"firefox":if(!JA||!YS||!r.shimFirefox)return i("Firefox shim is not included in this adapter release."),l;i("adapter.js shimming firefox."),l.browserShim=JA,Jm(n,s),Qm(n),jA(n,s),YS(n,s),HA(n),GA(n),$A(n),WA(n),zA(n),KA(n),YA(n),qA(n),XA(n),Ym(n),ZS(n),qm(n,s),Xm(n);break;case"safari":if(!sN||!r.shimSafari)return i("Safari shim is not included in this adapter release."),l;i("adapter.js shimming safari."),l.browserShim=sN,Jm(n,s),Qm(n),rN(n),oN(n),eN(n),QA(n),ZA(n),iN(n),tN(n),aN(n),Ym(n),QS(n),qm(n,s),Xm(n),ey(n,s);break;default:i("Unsupported browser!")}})({window:typeof window>"u"?void 0:window}),function(n){n.WIN_10="Windows 10",n.WIN_81="Windows 8.1",n.WIN_8="Windows 8",n.WIN_7="Windows 7",n.WIN_VISTA="Windows Vista",n.WIN_SERVER_2003="Windows Server 2003",n.WIN_XP="Windows XP",n.WIN_2000="Windows 2000",n.ANDROID="Android",n.HARMONY_OS="HarmonyOS",n.OPEN_BSD="Open BSD",n.SUN_OS="Sun OS",n.LINUX="Linux",n.IOS="iOS",n.MAC_OS="Mac OS",n.QNX="QNX",n.UNIX="UNIX",n.BEOS="BeOS",n.OS_2="OS/2",n.SEARCH_BOT="Search Bot"}(Kr||(Kr={})),function(n){n.CHROME="Chrome",n.SAFARI="Safari",n.EDGE="Edge",n.FIREFOX="Firefox",n.OPERA="OPR",n.QQ="QQBrowser",n.WECHAT="MicroMessenger"}(qt||(qt={}));var ty={exports:{}};(function(n,r){(function(i,s){var l="function",h="undefined",p="object",v="string",E="major",T="model",y="name",R="type",k="vendor",V="version",$="architecture",W="console",G="mobile",ie="tablet",se="smarttv",ye="wearable",De="embedded",Te="Amazon",be="Apple",Se="ASUS",Ie="BlackBerry",Bt="Firefox",We="Google",dn="Huawei",Jt="LG",Qn="Microsoft",$r="Motorola",Gn="Opera",Qi="Samsung",fe="Sharp",Ce="Sony",Oe="Xiaomi",et="Zebra",Pt="Facebook",Re="Chromium OS",x="Mac OS",z=function(Bn){for(var cr={},on=0;on<Bn.length;on++)cr[Bn[on].toUpperCase()]=Bn[on];return cr},Z=function(Bn,cr){return typeof Bn===v&&ge(cr).indexOf(ge(Bn))!==-1},ge=function(Bn){return Bn.toLowerCase()},rt=function(Bn,cr){if(typeof Bn===v)return Bn=Bn.replace(/^\s\s*/,""),typeof cr===h?Bn:Bn.substring(0,350)},hn=function(Bn,cr){for(var on,Li,As,jn,Ot,Zi,il=0;il<cr.length&&!Ot;){var rs=cr[il],a2=cr[il+1];for(on=Li=0;on<rs.length&&!Ot&&rs[on];)if(Ot=rs[on++].exec(Bn))for(As=0;As<a2.length;As++)Zi=Ot[++Li],typeof(jn=a2[As])===p&&jn.length>0?jn.length===2?typeof jn[1]==l?this[jn[0]]=jn[1].call(this,Zi):this[jn[0]]=jn[1]:jn.length===3?typeof jn[1]!==l||jn[1].exec&&jn[1].test?this[jn[0]]=Zi?Zi.replace(jn[1],jn[2]):s:this[jn[0]]=Zi?jn[1].call(this,Zi,jn[2]):s:jn.length===4&&(this[jn[0]]=Zi?jn[3].call(this,Zi.replace(jn[1],jn[2])):s):this[jn]=Zi||s;il+=2}},Wr=function(Bn,cr){for(var on in cr)if(typeof cr[on]===p&&cr[on].length>0){for(var Li=0;Li<cr[on].length;Li++)if(Z(cr[on][Li],Bn))return on==="?"?s:on}else if(Z(cr[on],Bn))return on==="?"?s:on;return Bn},Da={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},nl={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[V,[y,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[V,[y,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[y,V],[/opios[\/ ]+([\w\.]+)/i],[V,[y,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[V,[y,Gn]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[y,V],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[V,[y,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[V,[y,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[V,[y,"WeChat"]],[/konqueror\/([\w\.]+)/i],[V,[y,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[V,[y,"IE"]],[/yabrowser\/([\w\.]+)/i],[V,[y,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[y,/(.+)/,"$1 Secure Browser"],V],[/\bfocus\/([\w\.]+)/i],[V,[y,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[V,[y,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[V,[y,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[V,[y,"Dolphin"]],[/coast\/([\w\.]+)/i],[V,[y,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[V,[y,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[V,[y,Bt]],[/\bqihu|(qi?ho?o?|360)browser/i],[[y,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[y,/(.+)/,"$1 Browser"],V],[/(comodo_dragon)\/([\w\.]+)/i],[[y,/_/g," "],V],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[y,V],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[y],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[y,Pt],V],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[y,V],[/\bgsa\/([\w\.]+) .*safari\//i],[V,[y,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[V,[y,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[y,"Chrome WebView"],V],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[V,[y,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[y,V],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[V,[y,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[V,y],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[y,[V,Wr,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[y,V],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[y,"Netscape"],V],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[V,[y,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[y,V],[/(cobalt)\/([\w\.]+)/i],[y,[V,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[$,"amd64"]],[/(ia32(?=;))/i],[[$,ge]],[/((?:i[346]|x)86)[;\)]/i],[[$,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[$,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[$,"armhf"]],[/windows (ce|mobile); ppc;/i],[[$,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[$,/ower/,"",ge]],[/(sun4\w)[;\)]/i],[[$,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[$,ge]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[T,[k,Qi],[R,ie]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[T,[k,Qi],[R,G]],[/\((ip(?:hone|od)[\w ]*);/i],[T,[k,be],[R,G]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[T,[k,be],[R,ie]],[/(macintosh);/i],[T,[k,be]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[T,[k,fe],[R,G]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[T,[k,dn],[R,ie]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[T,[k,dn],[R,G]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[T,/_/g," "],[k,Oe],[R,G]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[T,/_/g," "],[k,Oe],[R,ie]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[T,[k,"OPPO"],[R,G]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[T,[k,"Vivo"],[R,G]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[T,[k,"Realme"],[R,G]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[T,[k,$r],[R,G]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[T,[k,$r],[R,ie]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[T,[k,Jt],[R,ie]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[T,[k,Jt],[R,G]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[T,[k,"Lenovo"],[R,ie]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[T,/_/g," "],[k,"Nokia"],[R,G]],[/(pixel c)\b/i],[T,[k,We],[R,ie]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[T,[k,We],[R,G]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[T,[k,Ce],[R,G]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[T,"Xperia Tablet"],[k,Ce],[R,ie]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[T,[k,"OnePlus"],[R,G]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[T,[k,Te],[R,ie]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[T,/(.+)/g,"Fire Phone $1"],[k,Te],[R,G]],[/(playbook);[-\w\),; ]+(rim)/i],[T,k,[R,ie]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[T,[k,Ie],[R,G]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[T,[k,Se],[R,ie]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[T,[k,Se],[R,G]],[/(nexus 9)/i],[T,[k,"HTC"],[R,ie]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[k,[T,/_/g," "],[R,G]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[T,[k,"Acer"],[R,ie]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[T,[k,"Meizu"],[R,G]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[k,T,[R,G]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[k,T,[R,ie]],[/(surface duo)/i],[T,[k,Qn],[R,ie]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[T,[k,"Fairphone"],[R,G]],[/(u304aa)/i],[T,[k,"AT&T"],[R,G]],[/\bsie-(\w*)/i],[T,[k,"Siemens"],[R,G]],[/\b(rct\w+) b/i],[T,[k,"RCA"],[R,ie]],[/\b(venue[\d ]{2,7}) b/i],[T,[k,"Dell"],[R,ie]],[/\b(q(?:mv|ta)\w+) b/i],[T,[k,"Verizon"],[R,ie]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[T,[k,"Barnes & Noble"],[R,ie]],[/\b(tm\d{3}\w+) b/i],[T,[k,"NuVision"],[R,ie]],[/\b(k88) b/i],[T,[k,"ZTE"],[R,ie]],[/\b(nx\d{3}j) b/i],[T,[k,"ZTE"],[R,G]],[/\b(gen\d{3}) b.+49h/i],[T,[k,"Swiss"],[R,G]],[/\b(zur\d{3}) b/i],[T,[k,"Swiss"],[R,ie]],[/\b((zeki)?tb.*\b) b/i],[T,[k,"Zeki"],[R,ie]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[k,"Dragon Touch"],T,[R,ie]],[/\b(ns-?\w{0,9}) b/i],[T,[k,"Insignia"],[R,ie]],[/\b((nxa|next)-?\w{0,9}) b/i],[T,[k,"NextBook"],[R,ie]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[k,"Voice"],T,[R,G]],[/\b(lvtel\-)?(v1[12]) b/i],[[k,"LvTel"],T,[R,G]],[/\b(ph-1) /i],[T,[k,"Essential"],[R,G]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[T,[k,"Envizen"],[R,ie]],[/\b(trio[-\w\. ]+) b/i],[T,[k,"MachSpeed"],[R,ie]],[/\btu_(1491) b/i],[T,[k,"Rotor"],[R,ie]],[/(shield[\w ]+) b/i],[T,[k,"Nvidia"],[R,ie]],[/(sprint) (\w+)/i],[k,T,[R,G]],[/(kin\.[onetw]{3})/i],[[T,/\./g," "],[k,Qn],[R,G]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[T,[k,et],[R,ie]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[T,[k,et],[R,G]],[/smart-tv.+(samsung)/i],[k,[R,se]],[/hbbtv.+maple;(\d+)/i],[[T,/^/,"SmartTV"],[k,Qi],[R,se]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[k,Jt],[R,se]],[/(apple) ?tv/i],[k,[T,"Apple TV"],[R,se]],[/crkey/i],[[T,"Chromecast"],[k,We],[R,se]],[/droid.+aft(\w)( bui|\))/i],[T,[k,Te],[R,se]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[T,[k,fe],[R,se]],[/(bravia[\w ]+)( bui|\))/i],[T,[k,Ce],[R,se]],[/(mitv-\w{5}) bui/i],[T,[k,Oe],[R,se]],[/Hbbtv.*(technisat) (.*);/i],[k,T,[R,se]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[k,rt],[T,rt],[R,se]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[R,se]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[k,T,[R,W]],[/droid.+; (shield) bui/i],[T,[k,"Nvidia"],[R,W]],[/(playstation [345portablevi]+)/i],[T,[k,Ce],[R,W]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[T,[k,Qn],[R,W]],[/((pebble))app/i],[k,T,[R,ye]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[T,[k,be],[R,ye]],[/droid.+; (glass) \d/i],[T,[k,We],[R,ye]],[/droid.+; (wt63?0{2,3})\)/i],[T,[k,et],[R,ye]],[/(quest( 2| pro)?)/i],[T,[k,Pt],[R,ye]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[k,[R,De]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[T,[R,G]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[T,[R,ie]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[R,ie]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[R,G]],[/(android[-\w\. ]{0,9});.+buil/i],[T,[k,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[V,[y,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[V,[y,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[y,V],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[V,y]],os:[[/microsoft (windows) (vista|xp)/i],[y,V],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[y,[V,Wr,Da]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[y,"Windows"],[V,Wr,Da]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[V,/_/g,"."],[y,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[y,x],[V,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[V,y],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[y,V],[/\(bb(10);/i],[V,[y,Ie]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[V,[y,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[V,[y,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[V,[y,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[V,[y,"watchOS"]],[/crkey\/([\d\.]+)/i],[V,[y,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[y,Re],V],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[y,V],[/(sunos) ?([\w\.\d]*)/i],[[y,"Solaris"],V],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[y,V]]},ra=function(Bn,cr){if(typeof Bn===p&&(cr=Bn,Bn=s),!(this instanceof ra))return new ra(Bn,cr).getResult();var on=typeof i!==h&&i.navigator?i.navigator:s,Li=Bn||(on&&on.userAgent?on.userAgent:""),As=on&&on.userAgentData?on.userAgentData:s,jn=cr?function(Ot,Zi){var il={};for(var rs in Ot)Zi[rs]&&Zi[rs].length%2==0?il[rs]=Zi[rs].concat(Ot[rs]):il[rs]=Ot[rs];return il}(nl,cr):nl;return this.getBrowser=function(){var Ot={};return Ot.name=s,Ot.version=s,hn.call(Ot,Li,jn.browser),Ot.major=function(Zi){return typeof Zi===v?Zi.replace(/[^\d\.]/g,"").split(".")[0]:s}(Ot.version),on&&on.brave&&typeof on.brave.isBrave==l&&(Ot.name="Brave"),Ot},this.getCPU=function(){var Ot={};return Ot.architecture=s,hn.call(Ot,Li,jn.cpu),Ot},this.getDevice=function(){var Ot={};return Ot.vendor=s,Ot.model=s,Ot.type=s,hn.call(Ot,Li,jn.device),!Ot.type&&As&&As.mobile&&(Ot.type=G),Ot.model=="Macintosh"&&on&&typeof on.standalone!==h&&on.maxTouchPoints&&on.maxTouchPoints>2&&(Ot.model="iPad",Ot.type=ie),Ot},this.getEngine=function(){var Ot={};return Ot.name=s,Ot.version=s,hn.call(Ot,Li,jn.engine),Ot},this.getOS=function(){var Ot={};return Ot.name=s,Ot.version=s,hn.call(Ot,Li,jn.os),!Ot.name&&As&&As.platform!="Unknown"&&(Ot.name=As.platform.replace(/chrome os/i,Re).replace(/macos/i,x)),Ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Li},this.setUA=function(Ot){return Li=typeof Ot===v&&Ot.length>350?rt(Ot,350):Ot,this},this.setUA(Li),this};ra.VERSION="0.7.34",ra.BROWSER=z([y,V,E]),ra.CPU=z([$]),ra.DEVICE=z([T,k,R,W,G,se,ie,ye,De]),ra.ENGINE=ra.OS=z([y,V]),n.exports&&(r=n.exports=ra),r.UAParser=ra;var rl=typeof i!==h&&(i.jQuery||i.Zepto);if(rl&&!rl.ua){var Ld=new ra;rl.ua=Ld.getResult(),rl.ua.get=function(){return Ld.getUA()},rl.ua.set=function(Bn){Ld.setUA(Bn);var cr=Ld.getResult();for(var on in cr)rl.ua[on]=cr[on]}}})(typeof window=="object"?window:a)})(ty,ty.exports);const ny=new ty.exports;let ry,bo,Qs=ny.getResult(),iy=null;function $t(n){if(!iy){n&&ny.setUA(n),Qs=ny.getResult();const r=function(h){if(h.engine.name==="Blink"&&h.browser.name!=="WeChat")return qt.CHROME;switch(h.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return qt.CHROME;case"Safari":case"Mobile Safari":return qt.SAFARI;case"Edge":return qt.EDGE;case"Firefox":return qt.FIREFOX;case"QQBrowser":return qt.QQ;case"Opera":return qt.OPERA;case"WeChat":return qt.WECHAT;default:return h.browser.name||""}}(Qs),i=function(h){let p;return p=h.engine.name==="Blink"?h.engine.version||"":h.browser.version||"",p.split(".")[0]}(Qs),s=function(h){switch(h.os.name){case"Windows":return h.os.version?h.os.name+" "+h.os.version:h.os.name;default:return h.os.name||""}}(Qs),l=Qs.os.version;if(!(r&&i&&s&&l))return{name:r,version:i,os:s,osVersion:l};iy={name:r,version:i,os:s,osVersion:l}}return iy}function uN(){return $t().os}function dN(){const n=$t();return"".concat(n.os," ").concat(n.osVersion)}function Zm(){const n=$t();return!!(Qs.engine.name==="WebKit"&&n.os===Kr.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&n.name!==qt.SAFARI||Ci()&&n.name!==qt.SAFARI)}function i7(){const n=$t();if(Zm()){if(n.os===Kr.MAC_OS)return!0;if(n.os===Kr.IOS){const r=Qs.os.version&&Qs.os.version.split(".");if(r&&Number(r[0])===14&&r[1]&&Number(r[1])>=3||r&&Number(r[0])>14)return!0}}return!1}function o7(){return Qs.engine.name==="WebKit"}function oy(){return $t().name===qt.CHROME}function yi(){return $t().name===qt.SAFARI}function Mn(){return $t().name===qt.FIREFOX}function Ci(){return $t().os===Kr.IOS}function ay(n){const r=$t();return!(r.name!==qt.CHROME||!r.osVersion)&&Number(r.version)>=n}function hN(n){const r=$t();return!(r.name!==qt.EDGE||!r.osVersion)&&Number(r.version)>=n}function pN(n){const r=$t();return!(r.name!==qt.OPERA||!r.osVersion)&&Number(r.version)>=n}function fN(){const n=$t();return!(n.name!==qt.CHROME||!n.osVersion)&&Number(n.version)<=90}function mN(){const n=$t();if(n.os!==Kr.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])<14||Number(r[0])===14&&Number(r[1])<=6}function od(){const n=$t();if(n.os!==Kr.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===15}function sy(){const n=$t();if(n.os!==Kr.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===16}function gN(){const n=$t();if(n.os!==Kr.IOS||!n.osVersion)return!1;const r=n.osVersion.split(".");return Number(r[0])===15&&Number(r[1])>=1}function Cs(){return yi()&&navigator.maxTouchPoints>0}function vN(){return $t().name===qt.WECHAT}function EN(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function Yl(){const n=$t();return n.name===qt.EDGE||n.name===qt.SAFARI?!1:!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function e0(){return uN()===Kr.ANDROID}function ip(){const n=$t();return e0()&&(n.name===qt.CHROME||n.name===qt.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}(function(n){n.L1T1="L1T1",n.L1T2="L1T2",n.L1T3="L1T3",n.L2T1_KEY="L2T1_KEY",n.L2T2_KEY="L2T2_KEY",n.L2T3_KEY="L2T3_KEY",n.L3T1_KEY="L3T1_KEY",n.L3T2_KEY="L3T2_KEY",n.L3T3_KEY="L3T3_KEY"})(ry||(ry={})),function(n){n.CERTIFICATE="certificate",n.CODEC="codec",n.CANDIDATE_PAIR="candidate-pair",n.LOCAL_CANDIDATE="local-candidate",n.REMOTE_CANDIDATE="remote-candidate",n.INBOUND="inbound-rtp",n.TRACK="track",n.OUTBOUND="outbound-rtp",n.PC="peer-connection",n.REMOTE_INBOUND="remote-inbound-rtp",n.REMOTE_OUTBOUND="remote-outbound-rtp",n.TRANSPORT="transport",n.CSRC="csrc",n.DATA_CHANNEL="data-channel",n.STREAM="stream",n.SENDER="sender",n.RECEIVER="receiver"}(bo||(bo={}));var _N={exports:{}},a7=Pi,s7=F,SN=Ya.f;a7({target:"Object",stat:!0,forced:Object.defineProperty!==SN,sham:!s7},{defineProperty:SN});var yN=ot.Object,c7=_N.exports=function(n,r,i){return yN.defineProperty(n,r,i)};yN.defineProperty.sham&&(c7.sham=!0);var CN=_N.exports;function w(n,r,i){return r in n?CN(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}var cy,ly={exports:{}},TN=function(n,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return n.apply(r,i)}},l7=TN,uy=Object.prototype.toString,dy=(cy=Object.create(null),function(n){var r=uy.call(n);return cy[r]||(cy[r]=r.slice(8,-1).toLowerCase())});function ql(n){return n=n.toLowerCase(),function(r){return dy(r)===n}}function hy(n){return Array.isArray(n)}function t0(n){return n===void 0}var bN=ql("ArrayBuffer");function RN(n){return n!==null&&typeof n=="object"}function n0(n){if(dy(n)!=="object")return!1;var r=Object.getPrototypeOf(n);return r===null||r===Object.prototype}var u7=ql("Date"),d7=ql("File"),h7=ql("Blob"),p7=ql("FileList");function py(n){return uy.call(n)==="[object Function]"}var f7=ql("URLSearchParams");function fy(n,r){if(n!=null)if(typeof n!="object"&&(n=[n]),hy(n))for(var i=0,s=n.length;i<s;i++)r.call(null,n[i],i,n);else for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&r.call(null,n[l],l,n)}var my,m7=(my=typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array),function(n){return my&&n instanceof my}),xi={isArray:hy,isArrayBuffer:bN,isBuffer:function(n){return n!==null&&!t0(n)&&n.constructor!==null&&!t0(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)},isFormData:function(n){var r="[object FormData]";return n&&(typeof FormData=="function"&&n instanceof FormData||uy.call(n)===r||py(n.toString)&&n.toString()===r)},isArrayBufferView:function(n){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer&&bN(n.buffer)},isString:function(n){return typeof n=="string"},isNumber:function(n){return typeof n=="number"},isObject:RN,isPlainObject:n0,isUndefined:t0,isDate:u7,isFile:d7,isBlob:h7,isFunction:py,isStream:function(n){return RN(n)&&py(n.pipe)},isURLSearchParams:f7,isStandardBrowserEnv:function(){return(typeof navigator>"u"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window<"u"&&typeof document<"u"},forEach:fy,merge:function n(){var r={};function i(h,p){n0(r[p])&&n0(h)?r[p]=n(r[p],h):n0(h)?r[p]=n({},h):hy(h)?r[p]=h.slice():r[p]=h}for(var s=0,l=arguments.length;s<l;s++)fy(arguments[s],i);return r},extend:function(n,r,i){return fy(r,function(s,l){n[l]=i&&typeof s=="function"?l7(s,i):s}),n},trim:function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},stripBOM:function(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n},inherits:function(n,r,i,s){n.prototype=Object.create(r.prototype,s),n.prototype.constructor=n,i&&Object.assign(n.prototype,i)},toFlatObject:function(n,r,i){var s,l,h,p={};r=r||{};do{for(l=(s=Object.getOwnPropertyNames(n)).length;l-- >0;)p[h=s[l]]||(r[h]=n[h],p[h]=!0);n=Object.getPrototypeOf(n)}while(n&&(!i||i(n,r))&&n!==Object.prototype);return r},kindOf:dy,kindOfTest:ql,endsWith:function(n,r,i){n=String(n),(i===void 0||i>n.length)&&(i=n.length),i-=r.length;var s=n.indexOf(r,i);return s!==-1&&s===i},toArray:function(n){if(!n)return null;var r=n.length;if(t0(r))return null;for(var i=new Array(r);r-- >0;)i[r]=n[r];return i},isTypedArray:m7,isFileList:p7},ad=xi;function IN(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var wN=function(n,r,i){if(!r)return n;var s;if(i)s=i(r);else if(ad.isURLSearchParams(r))s=r.toString();else{var l=[];ad.forEach(r,function(p,v){p!=null&&(ad.isArray(p)?v+="[]":p=[p],ad.forEach(p,function(E){ad.isDate(E)?E=E.toISOString():ad.isObject(E)&&(E=JSON.stringify(E)),l.push(IN(v)+"="+IN(E))}))}),s=l.join("&")}if(s){var h=n.indexOf("#");h!==-1&&(n=n.slice(0,h)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n},g7=xi;function r0(){this.handlers=[]}r0.prototype.use=function(n,r,i){return this.handlers.push({fulfilled:n,rejected:r,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1},r0.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)},r0.prototype.forEach=function(n){g7.forEach(this.handlers,function(r){r!==null&&n(r)})};var v7=r0,E7=xi,ON=xi;function sd(n,r,i,s,l){Error.call(this),this.message=n,this.name="AxiosError",r&&(this.code=r),i&&(this.config=i),s&&(this.request=s),l&&(this.response=l)}ON.inherits(sd,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var AN=sd.prototype,NN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(n){NN[n]={value:n}}),Object.defineProperties(sd,NN),Object.defineProperty(AN,"isAxiosError",{value:!0}),sd.from=function(n,r,i,s,l,h){var p=Object.create(AN);return ON.toFlatObject(n,p,function(v){return v!==Error.prototype}),sd.call(p,n.message,r,i,s,l),p.name=n.name,h&&Object.assign(p,h),p};var cd=sd,PN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xa=xi,xN=function(n,r){r=r||new FormData;var i=[];function s(l){return l===null?"":Xa.isDate(l)?l.toISOString():Xa.isArrayBuffer(l)||Xa.isTypedArray(l)?typeof Blob=="function"?new Blob([l]):Buffer.from(l):l}return function l(h,p){if(Xa.isPlainObject(h)||Xa.isArray(h)){if(i.indexOf(h)!==-1)throw Error("Circular reference detected in "+p);i.push(h),Xa.forEach(h,function(v,E){if(!Xa.isUndefined(v)){var T,y=p?p+"."+E:E;if(v&&!p&&typeof v=="object"){if(Xa.endsWith(E,"{}"))v=JSON.stringify(v);else if(Xa.endsWith(E,"[]")&&(T=Xa.toArray(v)))return void T.forEach(function(R){!Xa.isUndefined(R)&&r.append(y,s(R))})}l(v,y)}}),i.pop()}else r.append(p,s(h))}(n),r},gy=cd,i0=xi,_7=i0.isStandardBrowserEnv()?{write:function(n,r,i,s,l,h){var p=[];p.push(n+"="+encodeURIComponent(r)),i0.isNumber(i)&&p.push("expires="+new Date(i).toGMTString()),i0.isString(s)&&p.push("path="+s),i0.isString(l)&&p.push("domain="+l),h===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},S7=function(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)},y7=function(n,r){return r?n.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):n},DN=function(n,r){return n&&!S7(r)?y7(n,r):r},vy=xi,C7=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],kN=xi,T7=kN.isStandardBrowserEnv()?function(){var n,r=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function s(l){var h=l;return r&&(i.setAttribute("href",h),h=i.href),i.setAttribute("href",h),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return n=s(window.location.href),function(l){var h=kN.isString(l)?s(l):l;return h.protocol===n.protocol&&h.host===n.host}}():function(){return!0},Ey=cd;function LN(n){Ey.call(this,n??"canceled",Ey.ERR_CANCELED),this.name="CanceledError"}xi.inherits(LN,Ey,{__CANCEL__:!0});var o0=LN,op=xi,b7=function(n,r,i){var s=i.config.validateStatus;i.status&&s&&!s(i.status)?r(new gy("Request failed with status code "+i.status,[gy.ERR_BAD_REQUEST,gy.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):n(i)},R7=_7,I7=wN,w7=DN,O7=function(n){var r,i,s,l={};return n&&vy.forEach(n.split(`
`),function(h){if(s=h.indexOf(":"),r=vy.trim(h.substr(0,s)).toLowerCase(),i=vy.trim(h.substr(s+1)),r){if(l[r]&&C7.indexOf(r)>=0)return;l[r]=r==="set-cookie"?(l[r]?l[r]:[]).concat([i]):l[r]?l[r]+", "+i:i}}),l},A7=T7,N7=PN,Zs=cd,P7=o0,x7=function(n){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""},D7=function(n){return new Promise(function(r,i){var s,l=n.data,h=n.headers,p=n.responseType;function v(){n.cancelToken&&n.cancelToken.unsubscribe(s),n.signal&&n.signal.removeEventListener("abort",s)}op.isFormData(l)&&op.isStandardBrowserEnv()&&delete h["Content-Type"];var E=new XMLHttpRequest;if(n.auth){var T=n.auth.username||"",y=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";h.Authorization="Basic "+btoa(T+":"+y)}var R=w7(n.baseURL,n.url);function k(){if(E){var W="getAllResponseHeaders"in E?O7(E.getAllResponseHeaders()):null,G={data:p&&p!=="text"&&p!=="json"?E.response:E.responseText,status:E.status,statusText:E.statusText,headers:W,config:n,request:E};b7(function(ie){r(ie),v()},function(ie){i(ie),v()},G),E=null}}if(E.open(n.method.toUpperCase(),I7(R,n.params,n.paramsSerializer),!0),E.timeout=n.timeout,"onloadend"in E?E.onloadend=k:E.onreadystatechange=function(){E&&E.readyState===4&&(E.status!==0||E.responseURL&&E.responseURL.indexOf("file:")===0)&&setTimeout(k)},E.onabort=function(){E&&(i(new Zs("Request aborted",Zs.ECONNABORTED,n,E)),E=null)},E.onerror=function(){i(new Zs("Network Error",Zs.ERR_NETWORK,n,E,E)),E=null},E.ontimeout=function(){var W=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded",G=n.transitional||N7;n.timeoutErrorMessage&&(W=n.timeoutErrorMessage),i(new Zs(W,G.clarifyTimeoutError?Zs.ETIMEDOUT:Zs.ECONNABORTED,n,E)),E=null},op.isStandardBrowserEnv()){var V=(n.withCredentials||A7(R))&&n.xsrfCookieName?R7.read(n.xsrfCookieName):void 0;V&&(h[n.xsrfHeaderName]=V)}"setRequestHeader"in E&&op.forEach(h,function(W,G){l===void 0&&G.toLowerCase()==="content-type"?delete h[G]:E.setRequestHeader(G,W)}),op.isUndefined(n.withCredentials)||(E.withCredentials=!!n.withCredentials),p&&p!=="json"&&(E.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&E.addEventListener("progress",n.onDownloadProgress),typeof n.onUploadProgress=="function"&&E.upload&&E.upload.addEventListener("progress",n.onUploadProgress),(n.cancelToken||n.signal)&&(s=function(W){E&&(i(!W||W&&W.type?new P7:W),E.abort(),E=null)},n.cancelToken&&n.cancelToken.subscribe(s),n.signal&&(n.signal.aborted?s():n.signal.addEventListener("abort",s))),l||(l=null);var $=x7(R);$&&["http","https","file"].indexOf($)===-1?i(new Zs("Unsupported protocol "+$+":",Zs.ERR_BAD_REQUEST,n)):E.send(l)})},Ti=xi,MN=function(n,r){E7.forEach(n,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(n[r]=i,delete n[s])})},UN=cd,k7=xN,L7={"Content-Type":"application/x-www-form-urlencoded"};function VN(n,r){!Ti.isUndefined(n)&&Ti.isUndefined(n["Content-Type"])&&(n["Content-Type"]=r)}var FN,a0={transitional:PN,adapter:((typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(FN=D7),FN),transformRequest:[function(n,r){if(MN(r,"Accept"),MN(r,"Content-Type"),Ti.isFormData(n)||Ti.isArrayBuffer(n)||Ti.isBuffer(n)||Ti.isStream(n)||Ti.isFile(n)||Ti.isBlob(n))return n;if(Ti.isArrayBufferView(n))return n.buffer;if(Ti.isURLSearchParams(n))return VN(r,"application/x-www-form-urlencoded;charset=utf-8"),n.toString();var i,s=Ti.isObject(n),l=r&&r["Content-Type"];if((i=Ti.isFileList(n))||s&&l==="multipart/form-data"){var h=this.env&&this.env.FormData;return k7(i?{"files[]":n}:n,h&&new h)}return s||l==="application/json"?(VN(r,"application/json"),function(p,v,E){if(Ti.isString(p))try{return(v||JSON.parse)(p),Ti.trim(p)}catch(T){if(T.name!=="SyntaxError")throw T}return(E||JSON.stringify)(p)}(n)):n}],transformResponse:[function(n){var r=this.transitional||a0.transitional,i=r&&r.silentJSONParsing,s=r&&r.forcedJSONParsing,l=!i&&this.responseType==="json";if(l||s&&Ti.isString(n)&&n.length)try{return JSON.parse(n)}catch(h){if(l)throw h.name==="SyntaxError"?UN.from(h,UN.ERR_BAD_RESPONSE,this,null,this.response):h}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:null},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ti.forEach(["delete","get","head"],function(n){a0.headers[n]={}}),Ti.forEach(["post","put","patch"],function(n){a0.headers[n]=Ti.merge(L7)});var _y=a0,M7=xi,U7=_y,BN=function(n){return!(!n||!n.__CANCEL__)},jN=xi,Sy=function(n,r,i){var s=this||U7;return M7.forEach(i,function(l){n=l.call(s,n,r)}),n},V7=BN,F7=_y,B7=o0;function yy(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new B7}var zo=xi,HN=function(n,r){r=r||{};var i={};function s(T,y){return zo.isPlainObject(T)&&zo.isPlainObject(y)?zo.merge(T,y):zo.isPlainObject(y)?zo.merge({},y):zo.isArray(y)?y.slice():y}function l(T){return zo.isUndefined(r[T])?zo.isUndefined(n[T])?void 0:s(void 0,n[T]):s(n[T],r[T])}function h(T){if(!zo.isUndefined(r[T]))return s(void 0,r[T])}function p(T){return zo.isUndefined(r[T])?zo.isUndefined(n[T])?void 0:s(void 0,n[T]):s(void 0,r[T])}function v(T){return T in r?s(n[T],r[T]):T in n?s(void 0,n[T]):void 0}var E={url:h,method:h,data:h,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,beforeRedirect:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:v};return zo.forEach(Object.keys(n).concat(Object.keys(r)),function(T){var y=E[T]||l,R=y(T);zo.isUndefined(R)&&y!==v||(i[T]=R)}),i},$N="0.27.2",j7=$N,Fc=cd,Cy={};["object","boolean","number","function","string","symbol"].forEach(function(n,r){Cy[n]=function(i){return typeof i===n||"a"+(r<1?"n ":" ")+n}});var WN={};Cy.transitional=function(n,r,i){function s(l,h){return"[Axios v"+j7+"] Transitional option '"+l+"'"+h+(i?". "+i:"")}return function(l,h,p){if(n===!1)throw new Fc(s(h," has been removed"+(r?" in "+r:"")),Fc.ERR_DEPRECATED);return r&&!WN[h]&&(WN[h]=!0,console.warn(s(h," has been deprecated since v"+r+" and will be removed in the near future"))),!n||n(l,h,p)}};var GN=xi,H7=wN,zN=v7,KN=function(n){return yy(n),n.headers=n.headers||{},n.data=Sy.call(n,n.data,n.headers,n.transformRequest),n.headers=jN.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),jN.forEach(["delete","get","head","post","put","patch","common"],function(r){delete n.headers[r]}),(n.adapter||F7.adapter)(n).then(function(r){return yy(n),r.data=Sy.call(n,r.data,r.headers,n.transformResponse),r},function(r){return V7(r)||(yy(n),r&&r.response&&(r.response.data=Sy.call(n,r.response.data,r.response.headers,n.transformResponse))),Promise.reject(r)})},s0=HN,$7=DN,YN={assertOptions:function(n,r,i){if(typeof n!="object")throw new Fc("options must be an object",Fc.ERR_BAD_OPTION_VALUE);for(var s=Object.keys(n),l=s.length;l-- >0;){var h=s[l],p=r[h];if(p){var v=n[h],E=v===void 0||p(v,h,n);if(E!==!0)throw new Fc("option "+h+" must be "+E,Fc.ERR_BAD_OPTION_VALUE)}else if(i!==!0)throw new Fc("Unknown option "+h,Fc.ERR_BAD_OPTION)}},validators:Cy},ld=YN.validators;function ud(n){this.defaults=n,this.interceptors={request:new zN,response:new zN}}ud.prototype.request=function(n,r){typeof n=="string"?(r=r||{}).url=n:r=n||{},(r=s0(this.defaults,r)).method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var i=r.transitional;i!==void 0&&YN.assertOptions(i,{silentJSONParsing:ld.transitional(ld.boolean),forcedJSONParsing:ld.transitional(ld.boolean),clarifyTimeoutError:ld.transitional(ld.boolean)},!1);var s=[],l=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(r)===!1||(l=l&&R.synchronous,s.unshift(R.fulfilled,R.rejected))});var h,p=[];if(this.interceptors.response.forEach(function(R){p.push(R.fulfilled,R.rejected)}),!l){var v=[KN,void 0];for(Array.prototype.unshift.apply(v,s),v=v.concat(p),h=Promise.resolve(r);v.length;)h=h.then(v.shift(),v.shift());return h}for(var E=r;s.length;){var T=s.shift(),y=s.shift();try{E=T(E)}catch(R){y(R);break}}try{h=KN(E)}catch(R){return Promise.reject(R)}for(;p.length;)h=h.then(p.shift(),p.shift());return h},ud.prototype.getUri=function(n){n=s0(this.defaults,n);var r=$7(n.baseURL,n.url);return H7(r,n.params,n.paramsSerializer)},GN.forEach(["delete","get","head","options"],function(n){ud.prototype[n]=function(r,i){return this.request(s0(i||{},{method:n,url:r,data:(i||{}).data}))}}),GN.forEach(["post","put","patch"],function(n){function r(i){return function(s,l,h){return this.request(s0(h||{},{method:n,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:l}))}}ud.prototype[n]=r(),ud.prototype[n+"Form"]=r(!0)});var W7=ud,G7=o0;function dd(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(s){r=s});var i=this;this.promise.then(function(s){if(i._listeners){var l,h=i._listeners.length;for(l=0;l<h;l++)i._listeners[l](s);i._listeners=null}}),this.promise.then=function(s){var l,h=new Promise(function(p){i.subscribe(p),l=p}).then(s);return h.cancel=function(){i.unsubscribe(l)},h},n(function(s){i.reason||(i.reason=new G7(s),r(i.reason))})}dd.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},dd.prototype.subscribe=function(n){this.reason?n(this.reason):this._listeners?this._listeners.push(n):this._listeners=[n]},dd.prototype.unsubscribe=function(n){if(this._listeners){var r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}},dd.source=function(){var n;return{token:new dd(function(r){n=r}),cancel:n}};var z7=dd,K7=xi,qN=xi,Y7=TN,c0=W7,q7=HN,Ro=function n(r){var i=new c0(r),s=Y7(c0.prototype.request,i);return qN.extend(s,c0.prototype,i),qN.extend(s,i),s.create=function(l){return n(q7(r,l))},s}(_y);Ro.Axios=c0,Ro.CanceledError=o0,Ro.CancelToken=z7,Ro.isCancel=BN,Ro.VERSION=$N,Ro.toFormData=xN,Ro.AxiosError=cd,Ro.Cancel=Ro.CanceledError,Ro.all=function(n){return Promise.all(n)},Ro.spread=function(n){return function(r){return n.apply(null,r)}},Ro.isAxiosError=function(n){return K7.isObject(n)&&n.isAxiosError===!0},ly.exports=Ro,ly.exports.default=Ro;var Io=ly.exports;class X7{constructor(r){w(this,"logger",void 0),w(this,"prefixLists",[]),this.logger=r}debug(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];this.logger.debug(...this.prefixLists,...i)}info(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];this.logger.info(...this.prefixLists,...i)}warning(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];this.logger.warning(...this.prefixLists,...i)}error(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];this.logger.error(...this.prefixLists,...i)}prefix(r){return this.prefixLists.push(r),this}popPrefix(){return this.prefixLists.pop(),this}}class xn{constructor(){w(this,"_events",{}),w(this,"addListener",this.on)}getListeners(r){return this._events[r]?this._events[r].map(i=>i.listener):[]}on(r,i){this._events[r]||(this._events[r]=[]);const s=this._events[r];this._indexOfListener(s,i)===-1&&s.push({listener:i,once:!1})}once(r,i){this._events[r]||(this._events[r]=[]);const s=this._events[r];this._indexOfListener(s,i)===-1&&s.push({listener:i,once:!0})}off(r,i){if(!this._events[r])return;const s=this._events[r],l=this._indexOfListener(s,i);l!==-1&&s.splice(l,1),this._events[r].length===0&&delete this._events[r]}removeAllListeners(r){r?delete this._events[r]:this._events={}}emit(r){this._events[r]||(this._events[r]=[]);const i=this._events[r].map(p=>p);for(var s=arguments.length,l=new Array(s>1?s-1:0),h=1;h<s;h++)l[h-1]=arguments[h];for(let p=0;p<i.length;p+=1){const v=i[p];v.once&&this.off(r,v.listener),v.listener.apply(this,l||[])}}safeEmit(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),l=1;l<i;l++)s[l-1]=arguments[l];[...this._events[r]||[]].forEach(h=>{h.once&&this.off(r,h.listener);try{h.listener.apply(this,s)}catch(p){M.error("safeEmit event:".concat(r," error ").concat(p==null?void 0:p.toString()))}})}_indexOfListener(r,i){let s=r.length;for(;s--;)if(r[s].listener===i)return s;return-1}}const l0=new class extends xn{reportLogUploadError(n){this.emit("REPORT_LOG_UPLOAD",n)}};let j;(function(n){n.UNEXPECTED_ERROR="UNEXPECTED_ERROR",n.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",n.TIMEOUT="TIMEOUT",n.INVALID_PARAMS="INVALID_PARAMS",n.NOT_READABLE="NOT_READABLE",n.NOT_SUPPORTED="NOT_SUPPORTED",n.INVALID_OPERATION="INVALID_OPERATION",n.OPERATION_ABORTED="OPERATION_ABORTED",n.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",n.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",n.NETWORK_ERROR="NETWORK_ERROR",n.NETWORK_TIMEOUT="NETWORK_TIMEOUT",n.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",n.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",n.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",n.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",n.ELECTRON_IS_NULL="ELECTRON_IS_NULL",n.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",n.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",n.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",n.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",n.PERMISSION_DENIED="PERMISSION_DENIED",n.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",n.TRACK_IS_DISABLED="TRACK_IS_DISABLED",n.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",n.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",n.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",n.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",n.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",n.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",n.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",n.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",n.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",n.UID_CONFLICT="UID_CONFLICT",n.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",n.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",n.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",n.INVALID_TRACK="INVALID_TRACK",n.SENDER_NOT_FOUND="SENDER_NOT_FOUND",n.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",n.SET_ANSWER_FAILED="SET_ANSWER_FAILED",n.ICE_FAILED="ICE_FAILED",n.PC_CLOSED="PC_CLOSED",n.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",n.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",n.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",n.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",n.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",n.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",n.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",n.INVALID_REMOTE_USER="INVALID_REMOTE_USER",n.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",n.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",n.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",n.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",n.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",n.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",n.WS_ABORT="WS_ABORT",n.WS_DISCONNECT="WS_DISCONNECT",n.WS_ERR="WS_ERR",n.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",n.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",n.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",n.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",n.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",n.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",n.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",n.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",n.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",n.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",n.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",n.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",n.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",n.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",n.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",n.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",n.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",n.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",n.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",n.INVALID_PLUGIN="INVALID_PLUGIN",n.DISCONNECT_P2P="DISCONNECT_P2P",n.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",n.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",n.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",n.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",n.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",n.PROHIBITED_OPERATION="PROHIBITED_OPERATION",n.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED"})(j||(j={}));class X extends Error{constructor(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=arguments.length>2?arguments[2]:void 0;super(i),w(this,"code",void 0),w(this,"message",void 0),w(this,"data",void 0),w(this,"name","AgoraRTCException"),this.code=r,this.message="AgoraRTCError ".concat(this.code,": ").concat(i),this.data=s}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),`
`).concat(this.stack):"".concat(this.stack)}print(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return r==="error"&&M.error(this.toString()),r==="warning"&&M.warning(this.toString()),this}throw(){throw this.print(),this}}const tr={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function Ty(n,r){const i=Math.floor(r.timeout*Math.pow(r.timeoutFactor,n));return Math.min(r.maxRetryTimeout,i)}function Ja(n,r,i,s){const l=Object.assign({},tr,s);let h=l.timeout;const p=async()=>{await function(T){return new Pe(y=>{window.setTimeout(y,T)})}(h),h*=l.timeoutFactor,h=Math.min(l.maxRetryTimeout,h)};let v=!1;const E=new Pe(async(T,y)=>{r=r||(()=>!1),i=i||(()=>!0);for(let R=0;R<l.maxRetryCount;R+=1){if(v)return y(new X(j.OPERATION_ABORTED));try{const k=await n();if(!r(k,R)||R+1===l.maxRetryCount)return T(k);await p()}catch(k){if(!i(k,R)||R+1===l.maxRetryCount)return y(k);await p()}}});return E.cancel=()=>v=!0,E}function by(){const n=new Date;return n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()}function XN(){const n=new Date,r=/((\d+:){2}\d+)/.exec(new Date().toUTCString());return r?(r==null?void 0:r[0])+":"+n.getUTCMilliseconds():n.toTimeString().split(" ")[0]+":"+n.getMilliseconds()}const Ko={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},u0=Date.now(),ap=n=>{for(const r in Ko)if(Object.prototype.hasOwnProperty.call(Ko,r)&&Ko[r]===n)return r;return"DEFAULT"},M=new class{constructor(){w(this,"proxyServerURL",void 0),w(this,"logLevel",Ko.DEBUG),w(this,"uploadState","collecting"),w(this,"uploadLogWaitingList",[]),w(this,"uploadLogUploadingList",[]),w(this,"uploadErrorCount",0),w(this,"currentLogID",0),w(this,"url",void 0),w(this,"extLog",(n,r)=>{this.appendLogToWaitingList(n,...r)})}debug(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const s=[Ko.DEBUG].concat(r);this.log.apply(this,s)}info(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const s=[Ko.INFO].concat(r);this.log.apply(this,s)}warning(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const s=[Ko.WARNING].concat(r);this.log.apply(this,s)}error(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const s=[Ko.ERROR].concat(r);this.log.apply(this,s)}upload(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const s=[Ko.DEBUG].concat(r);this.uploadLog.apply(this,s)}setLogLevel(n){n=Math.min(Math.max(0,n),4),this.logLevel=n}enableLogUpload(){nn("UPLOAD_LOG",!0)}disableLogUpload(){nn("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(n){this.proxyServerURL=n}prefix(n){return new X7(this).prefix(n)}log(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(Date.now()-u0<100)return void setTimeout(()=>{this.log(...r)},Date.now()-u0);const s=Math.max(0,Math.min(4,r[0]));if(r[0]=by()+" Agora-SDK [".concat(ap(s),"]:"),this.appendLogToWaitingList(s,...r),s<this.logLevel)return;const l=by()+" %cAgora-SDK [".concat(ap(s),"]:");let h=[];if(!ne("USE_NEW_LOG"))switch(s){case Ko.DEBUG:h=[l,"color: #64B5F6;"].concat(r.slice(1)),console.log.apply(console,h);break;case Ko.INFO:h=[l,"color: #1E88E5; font-weight: bold;"].concat(r.slice(1)),console.log.apply(console,h);break;case Ko.WARNING:h=[l,"color: #FB8C00; font-weight: bold;"].concat(r.slice(1)),console.warn.apply(console,h);break;case Ko.ERROR:h=[l,"color: #B00020; font-weight: bold;"].concat(r.slice(1)),console.error.apply(console,h)}}uploadLog(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(Date.now()-u0<100)return void setTimeout(()=>{this.uploadLog(...r)},Date.now()-u0);const s=Math.max(0,Math.min(4,r[0]));r[0]=by()+" Agora-SDK [".concat(ap(s),"]:"),this.appendLogToWaitingList(s,...r)}appendLogToWaitingList(n){if(!ne("UPLOAD_LOG"))return;for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];Array.isArray(i[0])?i[0][0]=XN()+" Agora-SDK [".concat(ap(n),"]:"):i[0]=XN()+" Agora-SDK [".concat(ap(n),"]:");let l="";i.forEach(h=>{typeof h=="object"&&(h=JSON.stringify(h)),l+="".concat(h," ")}),this.uploadLogWaitingList.push({payload_str:l,log_level:n,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){const n=this.uploadLogUploadingList,r={sdk_version:Yo,process_id:ne("PROCESS_ID"),payload:JSON.stringify(n)};return Ja(async()=>{const i=await Io.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(ne("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(ne("LOG_UPLOAD_SERVER"),"/upload/v1")),r,{responseType:"text"});if(i.data!=="OK"){const s=new Error("unexpected upload log response");throw s.response=i,s}},()=>(this.uploadLogUploadingList=[],!1),i=>(i.response?l0.reportLogUploadError({status:i.response.status,data:i.response.data,headers:i.response.headers,message:i.message}):i.request?l0.reportLogUploadError({status:i.request.status,message:i.message}):l0.reportLogUploadError({status:-1,message:i.message}),!0),{timeout:ne("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:ne("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,ne("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),ne("UPLOAD_LOG_INTERVAL"))}).catch(n=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),ne("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),ne("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},Ry="v4.18.1-0-ge3033d03-dirty(7/7/2023, 4:00:56 PM)",Yo=function(n){if(n.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return n;const r=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(r&&r[1]&&r[2]){const s=r[1],l=r[2];return"".concat(s,".").concat(l)}const i=n.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(i&&i[1]&&i[2]){const s=i[1],l=i[2];return"".concat(s,".").concat(100*(Number(l)+1))}return"4.0.0.999"}("4.18.1"),Iy=function(){try{return JSON.parse("true")===!0}catch{return!0}}(),JN=["CHINA","GLOBAL"],wo=function(){const n="us".concat("erna","me"),r="pa".concat("sswo","rd"),i=["t","s","t"];i.splice(1,0,"e");const s=i.join(""),l=[];for(let v=0;v<6;v++)l.push("1");const h=l.join(""),p={};return p[n]=s,p[r]=h,Object.assign(p,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=wo;const J7={"90p":bt(160,90),"90p_1":bt(160,90),"120p":bt(160,120,15,30,65),"120p_1":bt(160,120,15,30,65),"120p_3":bt(120,120,15,30,50),"120p_4":bt(212,120),"180p":bt(320,180,15,30,140),"180p_1":bt(320,180,15,30,140),"180p_3":bt(180,180,15,30,100),"180p_4":bt(240,180,15,30,120),"240p":bt(320,240,15,40,200),"240p_1":bt(320,240,15,40,200),"240p_3":bt(240,240,15,40,140),"240p_4":bt(424,240,15,40,220),"360p":bt(640,360,15,80,400),"360p_1":bt(640,360,15,80,400),"360p_3":bt(360,360,15,80,260),"360p_4":bt(640,360,30,80,600),"360p_6":bt(360,360,30,80,400),"360p_7":bt(480,360,15,80,320),"360p_8":bt(480,360,30,80,490),"360p_9":bt(640,360,15,80,800),"360p_10":bt(640,360,24,80,800),"360p_11":bt(640,360,24,80,1e3),"480p":bt(640,480,15,100,500),"480p_1":bt(640,480,15,100,500),"480p_2":bt(640,480,30,100,1e3),"480p_3":bt(480,480,15,100,400),"480p_4":bt(640,480,30,100,750),"480p_6":bt(480,480,30,100,600),"480p_8":bt(848,480,15,100,610),"480p_9":bt(848,480,30,100,930),"480p_10":bt(640,480,10,100,400),"720p":bt(1280,720,15,120,1130),"720p_1":bt(1280,720,15,120,1130),"720p_2":bt(1280,720,30,120,2e3),"720p_3":bt(1280,720,30,120,1710),"720p_5":bt(960,720,15,120,910),"720p_6":bt(960,720,30,120,1380),"1080p":bt(1920,1080,15,120,2080),"1080p_1":bt(1920,1080,15,120,2080),"1080p_2":bt(1920,1080,30,120,3e3),"1080p_3":bt(1920,1080,30,120,3150),"1080p_5":bt(1920,1080,60,120,4780),"1440p":bt(2560,1440,30,120,4850),"1440p_1":bt(2560,1440,30,120,4850),"1440p_2":bt(2560,1440,60,120,7350),"4k":bt(3840,2160,30,120,8910),"4k_1":bt(3840,2160,30,120,8910),"4k_3":bt(3840,2160,60,120,13500)},Q7={"480p":ba(640,480,5),"480p_1":ba(640,480,5),"480p_2":ba(640,480,30),"480p_3":ba(640,480,15),"720p":ba(1280,720,5),"720p_1":ba(1280,720,5),"720p_2":ba(1280,720,30),"720p_3":ba(1280,720,15),"1080p":ba(1920,1080,5),"1080p_1":ba(1920,1080,5),"1080p_2":ba(1920,1080,30),"1080p_3":ba(1920,1080,15)},Z7={"1SL1TL":Oy(1,1),"3SL3TL":Oy(3,3),"2SL3TL":Oy(2,3)};function Xl(n){return n||(n="480p_1"),typeof n=="string"?Object.assign({},J7[n]):n}function wy(n){return typeof n=="string"?Object.assign({},Q7[n]):n}function d0(n){return typeof n=="string"?Object.assign({},Z7[n]):n}const e9={speech_low_quality:hd(16e3,!1),speech_standard:hd(32e3,!1,18),music_standard:hd(48e3,!1),standard_stereo:hd(48e3,!0,56),high_quality:hd(48e3,!1,128),high_quality_stereo:hd(48e3,!0,192)};function h0(n){return typeof n=="string"?Object.assign({},e9[n]):n}function nn(n,r,i){Object.keys(Ki).includes(n)&&(!i&&Object.keys(Jl).includes(n)||(Ki[n]=r))}function ne(n){return Ki[n]}const Ki={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:JN,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TWCC:!1,PUBLISH_TWCC:!1,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_PUB_RTX:!1,USE_SUB_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,SVC:[],ENABLE_ENCODED_TRANSFORM:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0}},Jl={};function hd(n,r,i){return{sampleRate:n,stereo:r,bitrate:i}}function bt(n,r,i,s,l){return{width:n,height:r,frameRate:i,bitrateMin:s,bitrateMax:l}}function ba(n,r,i,s,l){return{width:{max:n},height:{max:r},frameRate:i,bitrateMin:s,bitrateMax:l}}function Oy(n,r){return{numSpatialLayers:n,numTemporalLayers:r}}Iy||(Ki.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],Ki.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],Ki.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],Ki.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],Ki.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],Ki.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],Ki.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",Ki.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",Ki.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",Ki.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",Ki.AREAS=["NORTH_AMERICA","OVERSEA"]);const t9=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],Ql=[],sp=[];function Zl(n,r){return!!r&&Ql.some(i=>i.uid===n&&i.channelName===r)}var n9=Dr,r9=Ya,i9=le,Ay=function(n,r,i){var s=n9(r);s in n?r9.f(n,s,i9(0,i)):n[s]=i},QN=Z_,o9=kc,a9=Ay,s9=I.Array,c9=Math.max,ZN=function(n,r,i){for(var s=o9(n),l=QN(r,s),h=QN(i===void 0?s:i,s),p=s9(c9(h-l,0)),v=0;l<h;l++,v++)a9(p,v,n[l]);return p.length=v,p},eP=ZN,l9=Math.floor,Ny=function(n,r){var i=n.length,s=l9(i/2);return i<8?u9(n,r):d9(n,Ny(eP(n,0,s),r),Ny(eP(n,s),r),r)},u9=function(n,r){for(var i,s,l=n.length,h=1;h<l;){for(s=h,i=n[h];s&&r(n[s-1],i)>0;)n[s]=n[--s];s!==h++&&(n[s]=i)}return n},d9=function(n,r,i,s){for(var l=r.length,h=i.length,p=0,v=0;p<l||v<h;)n[p+v]=p<l&&v<h?s(r[p],i[v])<=0?r[p++]:i[v++]:p<l?r[p++]:i[v++];return n},h9=Ny,tP=ze.match(/firefox\/(\d+)/i),p9=!!tP&&+tP[1],f9=/MSIE|Trident/.test(ze),nP=ze.match(/AppleWebKit\/(\d+)\./),m9=!!nP&&+nP[1],g9=Pi,rP=S,v9=Vt,E9=lo,_9=kc,iP=Xu,Py=c,S9=h9,y9=Y_,oP=p9,C9=f9,aP=an,sP=m9,Bc=[],cP=rP(Bc.sort),T9=rP(Bc.push),b9=Py(function(){Bc.sort(void 0)}),R9=Py(function(){Bc.sort(null)}),I9=y9("sort"),lP=!Py(function(){if(aP)return aP<70;if(!(oP&&oP>3)){if(C9)return!0;if(sP)return sP<603;var n,r,i,s,l="";for(n=65;n<76;n++){switch(r=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(s=0;s<47;s++)Bc.push({k:r+s,v:i})}for(Bc.sort(function(h,p){return p.v-h.v}),s=0;s<Bc.length;s++)r=Bc[s].k.charAt(0),l.charAt(l.length-1)!==r&&(l+=r);return l!=="DGBEFHACIJK"}});g9({target:"Array",proto:!0,forced:b9||!R9||!I9||!lP},{sort:function(n){n!==void 0&&v9(n);var r=E9(this);if(lP)return n===void 0?cP(r):cP(r,n);var i,s,l=[],h=_9(r);for(s=0;s<h;s++)s in r&&T9(l,r[s]);for(S9(l,function(p){return function(v,E){return E===void 0?-1:v===void 0?1:p!==void 0?+p(v,E)||0:iP(v)>iP(E)?1:-1}}(n)),i=l.length,s=0;s<i;)r[s]=l[s++];for(;s<h;)delete r[s++];return r}});var w9=Lc("Array").sort,O9=C,A9=w9,xy=Array.prototype,Dy=function(n){var r=n.sort;return n===xy||O9(xy,n)&&r===xy.sort?A9:r};function pd(n,r){if(typeof n!="boolean")throw new X(j.INVALID_PARAMS,"Invalid ".concat(r,": The value is of the boolean type."))}function wr(n,r,i){if(!i.includes(n))throw new X(j.INVALID_PARAMS,"".concat(r," can only be set as ").concat(JSON.stringify(i)))}function ln(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4,l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(n<i||n>s||l&&!N9(n))throw new X(j.INVALID_PARAMS,"invalid ".concat(r,": the value range is [").concat(i,", ").concat(s,"]. integer only"))}function ky(n,r){if(typeof n!="number"){if(!(n.min||n.max||n.ideal||n.exact))throw new X(j.INVALID_PARAMS,"".concat(r," is not a valid ConstrainLong"));n.min!==void 0&&ln(n.min,"".concat(r,".min"),0,1/0),n.max!==void 0&&ln(n.max,"".concat(r,".max"),1,1/0),n.exact!==void 0&&ln(n.exact,"".concat(r,".exact"),1,1/0),n.ideal!==void 0&&ln(n.ideal,"".concat(r,".ideal"),1,1/0)}else ln(n,r,1,1/0)}function Yr(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(n==null)throw new X(j.INVALID_PARAMS,"".concat(r||"param"," cannot be empty"));if(!uP(n,i,s,l))throw new X(j.INVALID_PARAMS,"Invalid ".concat(r||"string param",": Length of the string: [").concat(i,",").concat(s,"].").concat(l?" ASCII characters only.":""))}function ec(n,r){if(!Array.isArray(n))throw new X(j.INVALID_PARAMS,"".concat(r," should be an array"))}function Ly(n){if(typeof n!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(n))throw M.error("Invalid Channel Name ".concat(n)),new X(j.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function My(n){if(r=n,!(typeof r=="number"&&Math.floor(r)===r&&0<=r&&r<=4294967295||uP(n,1,255)))throw M.error("Invalid UID ".concat(n," ").concat(typeof n)),new X(j.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var r;typeof n=="string"&&M.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function bn(n){return n==null}function uP(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof n=="string"&&n.length<=i&&n.length>=r&&(!s||P9(n))}function N9(n){return typeof n=="number"&&n%1==0}function P9(n){if(typeof n!="string")return!1;for(let r=0;r<n.length;r+=1){const i=n.charCodeAt(r);if(i<0||i>255)return!1}return!0}let dP,hP,qr;(function(n){n.FREE="free",n.UPLOADING="uploading"})(dP||(dP={})),function(n){n[n.MISC=0]="MISC",n[n.INTERNAL_EVENT=1]="INTERNAL_EVENT",n[n.PUBLIC_EVENT=2]="PUBLIC_EVENT",n[n.WEB_EVENT=3]="WEB_EVENT",n[n.INTERNAL_API=4]="INTERNAL_API",n[n.WEB_API=5]="WEB_API",n[n.PUBLIC_API=6]="PUBLIC_API"}(hP||(hP={})),function(n){n.NONE="none",n.INIT="init",n.CANPLAY="canplay",n.PLAYING="playing",n.PAUSED="paused",n.SUSPEND="suspend",n.STALLED="stalled",n.WAITING="waiting",n.ERROR="error",n.DESTROYED="destroyed",n.ABORT="abort",n.ENDED="ended",n.EMPTIED="emptied",n.LOADEDDATA="loadeddata"}(qr||(qr={}));const Uy={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function x9(n){return Yr(n.reportId,"params.reportId",0,100,!1),Yr(n.category,"params.category",0,100,!1),Yr(n.event,"params.event",0,100,!1),Yr(n.label,"params.label",0,100,!1),ln(n.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}const D9={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let Br,Dn,pP,Vy,nr,On,jc,tc,fd,cp,Oo,Xr,Ke,Fy,Wt,_t,Di,Xt,Fe,Je,ho,gt,fP,Yi;function mP(n){return ln(n.timeout,"config.timeout",0,1e5),ln(n.timeoutFactor,"config.timeoutFactor",0,100,!1),ln(n.maxRetryCount,"config.maxRetryConfig",0,1/0),ln(n.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function k9(n){return wr(n.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),wr(n.mode,"config.mode",["rtc","live"]),n.audioCodec!==void 0&&wr(n.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),n.proxyServer!==void 0&&Yr(n.proxyServer,"config.proxyServer",1,1e4),n.turnServer!==void 0&&gP(n.turnServer),n.httpRetryConfig!==void 0&&mP(n.httpRetryConfig),n.websocketRetryConfig!==void 0&&mP(n.websocketRetryConfig),!0}function lp(n){if(!Array.isArray(n)||n.length<1)return!1;try{n.forEach(r=>{if(!r.urls)throw Error()})}catch{return!1}return!0}function gP(n){return Yr(n.turnServerURL,"turnServerURL"),Yr(n.username,"username"),Yr(n.password,"password"),n.udpport&&ln(n.udpport,"udpport",1,99999,!0),n.forceturn&&pd(n.forceturn,"forceturn"),n.security&&pd(n.security,"security"),n.tcpport&&ln(n.tcpport,"tcpport",1,99999,!0),!0}function vP(n){return n.level!==void 0&&wr(n.level,"level",[1,2,3]),!0}(function(n){n.PUBLISH="publish",n.SUBSCRIBE="subscribe",n.WS_COMPRESSOR_INIT="ws_compressor_init",n.SESSION_INIT="session_init",n.JOIN_CHOOSE_SERVER="join_choose_server",n.REQ_USER_ACCOUNT="req_user_account",n.JOIN_GATEWAY="join_gateway",n.REJOIN_GATEWAY="rejoin_gateway",n.STREAM_SWITCH="stream_switch",n.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",n.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",n.FIRST_VIDEO_RECEIVED="first_video_received",n.FIRST_AUDIO_RECEIVED="first_audio_received",n.FIRST_VIDEO_DECODE="first_video_decode",n.FIRST_AUDIO_DECODE="first_audio_decode",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_UPDATE_STREAM="on_update_stream",n.ON_REMOVE_STREAM="on_remove_stream",n.USER_ANALYTICS="req_user_analytics",n.PC_STATS="pc_stats"})(Br||(Br={})),function(n){n.SESSION="io.agora.pb.Wrtc.Session",n.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",n.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",n.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",n.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",n.PUBLISH="io.agora.pb.Wrtc.Publish",n.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",n.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",n.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",n.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",n.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",n.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",n.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",n.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",n.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",n.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",n.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",n.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",n.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",n.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",n.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",n.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",n.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",n.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",n.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",n.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",n.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",n.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",n.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",n.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",n.PC_STATS="io.agora.pb.Wrtc.PCStats"}(Dn||(Dn={})),function(n){n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(pP||(pP={})),function(n){n[n.SESSION=26]="SESSION",n[n.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",n[n.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",n[n.JOIN_GATEWAY=28]="JOIN_GATEWAY",n[n.PUBLISH=30]="PUBLISH",n[n.SUBSCRIBE=29]="SUBSCRIBE",n[n.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",n[n.STREAM_SWITCH=32]="STREAM_SWITCH",n[n.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",n[n.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",n[n.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",n[n.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",n[n.API_INVOKE=41]="API_INVOKE",n[n.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",n[n.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",n[n.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",n[n.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",n[n.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",n[n.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",n[n.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",n[n.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",n[n.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",n[n.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",n[n.WORKER_EVENT=156]="WORKER_EVENT",n[n.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",n[n.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",n[n.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",n[n.USER_ANALYTICS=1e4]="USER_ANALYTICS",n[n.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(Vy||(Vy={})),function(n){n.CREATE_CLIENT="createClient",n.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",n.SET_AREA="setArea",n.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",n.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",n.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",n.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",n.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",n.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",n.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",n.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",n.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",n.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",n.START_PROXY_SERVER="Client.startProxyServer",n.STOP_PROXY_SERVER="Client.stopProxyServer",n.SET_PROXY_SERVER="Client.setProxyServer",n.SET_TURN_SERVER="Client.setTurnServer",n.SET_CLIENT_ROLE="Client.setClientRole",n.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",n.ENABLE_DUAL_STREAM="Client.enableDualStream",n.DISABLE_DUAL_STREAM="Client.disableDualStream",n.JOIN="Client.join",n.LEAVE="Client.leave",n.PUBLISH="Client.publish",n.UNPUBLISH="Client.unpublish",n.SUBSCRIBE="Client.subscribe",n.MASS_SUBSCRIBE="Client.massSubscribe",n.MASS_UNSUBSCRIBE="Client.massUnsubscribe",n.UNSUBSCRIBE="Client.unsubscribe",n.RENEW_TOKEN="Client.renewToken",n.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",n.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",n.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",n.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",n.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",n.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",n.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",n.DATACHANNEL_FAILBACK="Client._datachannelFailback",n.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",n.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",n.START_LIVE_STREAMING="Client.startLiveStreaming",n.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",n.STOP_LIVE_STREAMING="Client.stopLiveStreaming",n.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",n.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",n.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",n.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",n.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",n.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",n.SET_CONFIG_DISTRIBUTE="_configDistribute",n.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",n.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",n.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",n.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",n.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",n.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",n.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",n.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",n.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",n.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",n.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",n.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",n.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",n.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",n.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",n.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",n.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",n.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",n.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",n.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",n.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",n.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",n.STREAM_TYPE_CHANGE="streamTypeChange",n.CONNECTION_STATE_CHANGE="connectionStateChange",n.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",n.IMAGE_MODERATION_UPLOAD="imageModerationUpload"}(nr||(nr={})),function(n){n.TRACER="tracer"}(On||(On={})),function(n){n.IDLE="IDLE",n.INITING="INITING",n.INITEND="INITEND"}(jc||(jc={})),function(n){n.STATE_CHANGE="state_change",n.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",n.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",n.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(tc||(tc={})),function(n){n[n.ACCESS_POINT=101]="ACCESS_POINT",n[n.UNILBS=201]="UNILBS",n[n.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(fd||(fd={})),function(n){n[n.IIIEGAL_APPID=1]="IIIEGAL_APPID",n[n.IIIEGAL_UID=2]="IIIEGAL_UID",n[n.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(cp||(cp={})),function(n){n[n.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",n[n.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",n[n.INTERNAL_ERROR=8]="INTERNAL_ERROR",n[n.NO_AUTHORIZED=9]="NO_AUTHORIZED",n[n.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",n[n.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",n[n.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",n[n.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",n[n.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",n[n.USER_OVERLOAD=16]="USER_OVERLOAD",n[n.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",n[n.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(Oo||(Oo={})),function(n){n[n.NO_FLAG_SET=100]="NO_FLAG_SET",n[n.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",n[n.INVALID_FALG_SET=102]="INVALID_FALG_SET",n[n.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",n[n.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",n[n.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",n[n.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",n[n.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",n[n.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",n[n.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",n[n.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",n[n.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",n[n.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",n[n.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",n[n.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",n[n.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",n[n.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",n[n.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",n[n.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(Xr||(Xr={})),function(n){n[n.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",n[n.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",n[n.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",n[n.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",n[n.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",n[n.K_TICKET_INVALID=7]="K_TICKET_INVALID",n[n.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",n[n.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",n[n.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",n[n.K_UID_BANNED=14]="K_UID_BANNED",n[n.K_IP_BANNED=15]="K_IP_BANNED",n[n.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",n[n.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",n[n.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",n[n.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",n[n.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",n[n.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",n[n.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",n[n.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",n[n.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",n[n.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",n[n.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",n[n.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",n[n.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",n[n.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",n[n.ERR_INVALID_UID=117]="ERR_INVALID_UID",n[n.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",n[n.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",n[n.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",n[n.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",n[n.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",n[n.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",n[n.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",n[n.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",n[n.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",n[n.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",n[n.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",n[n.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",n[n.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",n[n.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",n[n.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",n[n.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",n[n.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",n[n.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",n[n.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",n[n.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",n[n.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",n[n.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",n[n.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",n[n.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",n[n.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",n[n.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",n[n.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",n[n.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",n[n.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",n[n.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",n[n.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",n[n.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",n[n.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",n[n.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",n[n.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",n[n.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",n[n.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(Ke||(Ke={})),function(n){n[n.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",n[n.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",n[n.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(Fy||(Fy={})),function(n){n.LEAVE="LEAVE",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.UID_BANNED="UID_BANNED",n.IP_BANNED="IP_BANNED",n.CHANNEL_BANNED="CHANNEL_BANNED",n.FALLBACK="FALLBACK",n.LICENSE_MISSING="LICENSE_MISSING",n.LICENSE_EXPIRED="LICENSE_EXPIRED",n.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",n.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",n.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",n.LICENSE_ILLEGAL="LICENSE_ILLEGAL"}(Wt||(Wt={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.MEDIA_RECONNECT_START="media-reconnect-start",n.MEDIA_RECONNECT_END="media-reconnect-end",n.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",n.USER_JOINED="user-joined",n.USER_LEAVED="user-left",n.USER_PUBLISHED="user-published",n.USER_UNPUBLISHED="user-unpublished",n.USER_INFO_UPDATED="user-info-updated",n.CLIENT_BANNED="client-banned",n.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",n.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",n.VOLUME_INDICATOR="volume-indicator",n.CRYPT_ERROR="crypt-error",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGED="stream-type-changed",n.STREAM_FALLBACK="stream-fallback",n.RECEIVE_METADATA="receive-metadata",n.STREAM_MESSAGE="stream-message",n.LIVE_STREAMING_ERROR="live-streaming-error",n.LIVE_STREAMING_WARNING="live-streaming-warning",n.INJECT_STREAM_STATUS="stream-inject-status",n.EXCEPTION="exception",n.ERROR="error",n.P2P_LOST="p2p_lost",n.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",n.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",n.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",n.PUBLISHED_USER_LIST="published-user-list",n.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",n.CONTENT_INSPECT_ERROR="content-inspect-error",n.CONTENT_INSPECT_RESULT="content-inspect-result",n.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change"}(_t||(_t={})),function(n){n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.MULTI_IP="MULTI_IP",n.TIMEOUT="TIMEOUT",n.OFFLINE="OFFLINE",n.LEAVE="LEAVE",n.P2P_FAILED="P2P_FAILED",n.FALLBACK="FALLBACK"}(Di||(Di={})),function(n){n.CONNECTING="connecting",n.CONNECTED="connected",n.RECONNECTING="reconnecting",n.CLOSED="closed"}(Xt||(Xt={})),function(n){n.WS_CONNECTED="ws_connected",n.WS_RECONNECTING="ws_reconnecting",n.WS_CLOSED="ws_closed",n.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",n.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",n.ON_BINARY_DATA="on_binary_data",n.REQUEST_RECOVER="request_recover",n.REQUEST_JOIN_INFO="request_join_info",n.REQUEST_REJOIN_INFO="req_rejoin_info",n.IS_P2P_DISCONNECTED="is_p2p_dis",n.DISCONNECT_P2P="dis_p2p",n.ABORT_P2P_EXECUTION="abort_p2p_execution",n.NEED_RENEW_SESSION="need-sid",n.REPORT_JOIN_GATEWAY="report_join_gateway",n.REQUEST_TIMEOUT="request_timeout",n.REQUEST_SUCCESS="request_success",n.JOIN_RESPONSE="join_response",n.DATACHANNEL_PRECONNECT="datachannel_preconnect",n.DATACHANNEL_CONNECTING="datachannel_connecting",n.DATACHANNEL_FAILBACK="datachannel_failback"}(Fe||(Fe={})),function(n){n.PING="ping",n.PING_BACK="ping_back",n.JOIN="join_v3",n.REJOIN="rejoin_v3",n.LEAVE="leave",n.SET_CLIENT_ROLE="set_client_role",n.PUBLISH="publish",n.UNPUBLISH="unpublish",n.SUBSCRIBE="subscribe",n.SUBSCRIBE_STREAMS="subscribe_streams",n.UNSUBSCRIBE="unsubscribe",n.UNSUBSCRIBE_STREAMS="unsubscribe_streams",n.SUBSCRIBE_CHANGE="subscribe_change",n.TRAFFIC_STATS="traffic_stats",n.RENEW_TOKEN="renew_token",n.SWITCH_VIDEO_STREAM="switch_video_stream",n.DEFAULT_VIDEO_STREAM="default_video_stream",n.SET_FALLBACK_OPTION="set_fallback_option",n.GATEWAY_INFO="gateway_info",n.CONTROL="control",n.SEND_METADATA="send_metadata",n.DATA_STREAM="data_stream",n.PICK_SVC_LAYER="pick_svc_layer",n.RESTART_ICE="restart_ice",n.CONNECT_PC="connect_pc",n.SET_VIDEO_PROFILE="set_video_profile",n.SET_PARAMETER="set_parameter"}(Je||(Je={})),function(n){n.PUBLISH_STATS="publish_stats",n.PUBLISH_RELATED_STATS="publish_related_stats",n.SUBSCRIBE_STATS="subscribe_stats",n.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",n.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",n.DENOISER_STATS="denoiser_stats",n.TRANSPORT_STATS="transport_stats",n.EXTENSION_USAGE_STATS="extension_usage_stats"}(ho||(ho={})),function(n){n.ON_USER_ONLINE="on_user_online",n.ON_USER_OFFLINE="on_user_offline",n.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",n.ON_PUBLISH_STREAM="on_publish_stream",n.ON_UPLINK_STATS="on_uplink_stats",n.ON_P2P_LOST="on_p2p_lost",n.ON_REMOVE_STREAM="on_remove_stream",n.ON_ADD_AUDIO_STREAM="on_add_audio_stream",n.ON_ADD_VIDEO_STREAM="on_add_video_stream",n.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",n.ON_USER_BANNED="on_user_banned",n.ON_USER_LICENSE_BANNED="on_user_license_banned",n.ON_NOTIFICATION="on_notification",n.ON_CRYPT_ERROR="on_crypt_error",n.MUTE_AUDIO="mute_audio",n.MUTE_VIDEO="mute_video",n.UNMUTE_AUDIO="unmute_audio",n.UNMUTE_VIDEO="unmute_video",n.ON_P2P_OK="on_p2p_ok",n.RECEIVE_METADATA="receive_metadata",n.ON_DATA_STREAM="on_data_stream",n.ENABLE_LOCAL_VIDEO="enable_local_video",n.DISABLE_LOCAL_VIDEO="disable_local_video",n.ENABLE_LOCAL_AUDIO="enable_local_audio",n.DISABLE_LOCAL_AUDIO="disable_local_audio",n.ON_PUBLISHED_USER_LIST="on_published_user_list"}(gt||(gt={})),function(n){n.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",n.NEED_ANSWER="NEED_ANSWER",n.NEED_RENEGOTIATE="NEED_RENEGOTIATE",n.P2P_LOST="P2P_LOST",n.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",n.NEED_UNPUB="NEED_UNPUB",n.NEED_UNSUB="NEED_UNSUB",n.NEED_UPLOAD="NEED_UPLOAD",n.NEED_CONTROL="NEED_CONTROL",n.START_RECONNECT="START_RECONNECT",n.END_RECONNECT="END_RECONNECT",n.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(fP||(fP={})),function(n){n.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",n.RECEIVE_TRACK_BUFFER="receive_track_buffer",n.ON_AUDIO_BUFFER="on_audio_buffer",n.UPDATE_SOURCE="update_source"}(Yi||(Yi={}));const By={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},jy={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},EP={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},L9={uplinkNetworkQuality:0,downlinkNetworkQuality:0},_P={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let nt,hr,Hc;(function(n){n.CONNECTED="websocket:connected",n.RECONNECTING="websocket:reconnecting",n.WILL_RECONNECT="websocket:will_reconnect",n.CLOSED="websocket:closed",n.FAILED="websocket:failed",n.ON_MESSAGE="websocket:on_message",n.REQUEST_NEW_URLS="websocket:request_new_urls",n.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",n.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire"})(nt||(nt={})),function(n){n.TRANSCODE="mix_streaming",n.RAW="raw_streaming",n.INJECT="inject_streaming"}(hr||(hr={})),function(n){n[n.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",n[n.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",n[n.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",n[n.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",n[n.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",n[n.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",n[n.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",n[n.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",n[n.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",n[n.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(Hc||(Hc={}));const M9={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},Hy={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function $y(n,r){Yr(n.url,"".concat(r,".url"),1,1e3,!1),bn(n.x)||ln(n.x,"".concat(r,".x"),0,1e4),bn(n.y)||ln(n.y,"".concat(r,".y"),0,1e4),bn(n.width)||ln(n.width,"".concat(r,".width"),0,1e4),bn(n.height)||ln(n.height,"".concat(r,".height"),0,1e4),bn(n.zOrder)||ln(n.zOrder,"".concat(r,".zOrder"),0,255),bn(n.alpha)||ln(n.alpha,"".concat(r,".alpha"),0,1,!1)}const U9={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},V9={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};let Ra,md,Wn,SP,Jr,Qa,bi,$c,pr,An,rr,p0,Ze,gr,gd,Wy,Gy,up,Wc,vd,Rt;function yP(n){if(!n.channelName)throw new X(j.INVALID_PARAMS,"invalid channelName in info");if(typeof n.uid!="number")throw new X(j.INVALID_PARAMS,"invalid uid in info, uid must be a number");return n.token&&Yr(n.token,"info.token",1,2047),My(n.uid),Ly(n.channelName),!0}function CP(n){return wr(n,"mediaSource",["screen","window","application"]),!0}(function(n){n.WARNING="@live_uap-warning",n.ERROR="@line_uap-error",n.PUBLISH_STREAM_STATUS="@live_uap-publish-status",n.INJECT_STREAM_STATUS="@live_uap-inject-status",n.WORKER_STATUS="@live_uap-worker-status",n.REQUEST_NEW_ADDRESS="@live_uap-request-address"})(Ra||(Ra={})),function(n){n.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(md||(md={})),function(n){n[n.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",n[n.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",n[n.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",n[n.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",n[n.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",n[n.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",n[n.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",n[n.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",n[n.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",n[n.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",n[n.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",n[n.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",n[n.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",n[n.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",n[n.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",n[n.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",n[n.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",n[n.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(Wn||(Wn={})),function(n){n.CONNECT_FAILED="connect failed",n.CONNECT_TIMEOUT="connect timeout",n.WS_DISCONNECTED="websocket disconnected",n.REQUEST_TIMEOUT="request timeout",n.REQUEST_FAILED="request failed",n.WAIT_STATUS_TIMEOUT="wait status timeout",n.WAIT_STATUS_ERROR="wait status error",n.BAD_STATE="bad state",n.WS_ABORT="ws abort",n.AP_REQUEST_TIMEOUT="AP request timeout",n.AP_JSON_PARSE_ERROR="AP json parse error",n.AP_REQUEST_ERROR="AP request error",n.AP_REQUEST_ABORT="AP request abort"}(SP||(SP={})),function(n){n[n.SetSdkProfile=0]="SetSdkProfile",n[n.SetSourceChannel=1]="SetSourceChannel",n[n.SetSourceUserId=2]="SetSourceUserId",n[n.SetDestChannel=3]="SetDestChannel",n[n.StartPacketTransfer=4]="StartPacketTransfer",n[n.StopPacketTransfer=5]="StopPacketTransfer",n[n.UpdateDestChannel=6]="UpdateDestChannel",n[n.Reconnect=7]="Reconnect",n[n.SetVideoProfile=8]="SetVideoProfile"}(Jr||(Jr={})),function(n){n.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",n.NETWORK_CONNECTED="NETWORK_CONNECTED",n.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",n.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",n.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",n.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",n.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",n.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",n.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",n.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(Qa||(Qa={})),function(n){n.RELAY_STATE_IDLE="RELAY_STATE_IDLE",n.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",n.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",n.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(bi||(bi={})),function(n){n.RELAY_OK="RELAY_OK",n.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",n.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",n.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}($c||($c={})),function(n){n.High="high",n.Low="low",n.Audio="audio",n.Screen="screen",n.ScreenLow="screen_low"}(pr||(pr={})),function(n){n.DISCONNECT="disconnect",n.CONNECTION_STATE_CHANGE="connection-state-change",n.NETWORK_QUALITY="network-quality",n.STREAM_TYPE_CHANGE="stream-type-change",n.IS_P2P_DISCONNECTED="is-p2p-dis",n.DISCONNECT_P2P="dis-p2p",n.REQUEST_NEW_GATEWAY_LIST="req-gate-url",n.NEED_RENEW_SESSION="need-sid",n.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",n.JOIN_RESPONSE="join-response",n.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",n.RESET_CONNECTION_EVENTS="reset-connection-events",n.DATACHANNEL_PRECONNECT="datachannel_preconnect",n.DATACHANNEL_FAILBACK="datachannel_failback",n.RESET_SIGNAL="reset-signal"}(An||(An={})),function(n){n[n.Nothing=0]="Nothing",n[n.Audio=1]="Audio",n[n.LwoVideo=2]="LwoVideo",n[n.Video=4]="Video",n[n.Data=8]="Data"}(rr||(rr={})),function(n){n[n.websocket=0]="websocket",n[n.datachannel=1]="datachannel"}(p0||(p0={})),function(n){n.NEED_RENEGOTIATE="@need_renegotiate",n.NEED_REPLACE_TRACK="@need_replace_track",n.NEED_CLOSE="@need_close",n.NEED_ENABLE_TRACK="@need_enable_track",n.NEED_DISABLE_TRACK="@need_disable_track",n.NEED_SESSION_ID="@need_sid",n.SET_OPTIMIZATION_MODE="@set_optimization_mode",n.GET_STATS="@get_stats",n.GET_LOW_VIDEO_TRACK="@get_low_video_track",n.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",n.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",n.NEED_MUTE_TRACK="@need_mute_track",n.NEED_UNMUTE_TRACK="@need_unmute_track"}(Ze||(Ze={})),function(n){n.SCREEN_TRACK="screen_track",n.CUSTOM_TRACK="custome_track",n.LOW_STREAM="low_stream"}(gr||(gr={})),function(n){n[n.HIGH_STREAM=0]="HIGH_STREAM",n[n.LOW_STREAM=1]="LOW_STREAM"}(gd||(gd={})),function(n){n[n.HIGH_STREAM=0]="HIGH_STREAM",n[n.LOW_STREAM=1]="LOW_STREAM"}(Wy||(Wy={})),function(n){n[n.DISABLE=0]="DISABLE",n[n.LOW_STREAM=1]="LOW_STREAM",n[n.AUDIO_ONLY=2]="AUDIO_ONLY"}(Gy||(Gy={})),function(n){n.TRANSCEIVER_UPDATED="transceiver-updated"}(up||(up={})),function(n){n.SOURCE_STATE_CHANGE="source-state-change",n.TRACK_ENDED="track-ended",n.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",n.CLOSED="closed"}(Wc||(Wc={})),function(n){n.FIRST_FRAME_DECODED="first-frame-decoded",n.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(vd||(vd={})),function(n){n.CHINA="CHINA",n.ASIA="ASIA",n.NORTH_AMERICA="NORTH_AMERICA",n.EUROPE="EUROPE",n.JAPAN="JAPAN",n.INDIA="INDIA",n.KOREA="KOREA",n.HKMC="HKMC",n.US="US",n.OCEANIA="OCEANIA",n.SOUTH_AMERICA="SOUTH_AMERICA",n.AFRICA="AFRICA",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL",n.EXTENSIONS="EXTENSIONS"}(Rt||(Rt={}));const F9=[Rt.AFRICA,Rt.ASIA,Rt.CHINA,Rt.EUROPE,Rt.GLOBAL,Rt.INDIA,Rt.JAPAN,Rt.NORTH_AMERICA,Rt.OCEANIA,Rt.OVERSEA,Rt.SOUTH_AMERICA];let Or;(function(n){n.CHINA="CN",n.ASIA="AS",n.NORTH_AMERICA="NA",n.EUROPE="EU",n.JAPAN="JP",n.INDIA="IN",n.KOREA="KR",n.HKMC="HK",n.US="US",n.OCEANIA="OC",n.SOUTH_AMERICA="SA",n.AFRICA="AF",n.OVERSEA="OVERSEA",n.GLOBAL="GLOBAL",n.EXTENSIONS="GLOBAL"})(Or||(Or={}));const f0={CHINA:{},ASIA:{CODE:Or.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Or.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Or.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Or.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","	uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Or.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Or.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:Or.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:Or.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Or.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Or.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Or.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Or.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Or.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};let dp,TP,st,jr,Za,ke,vr,wt,di,Gc,Qr,qi,Ao,No,fr,Ts,Un,es,bP,po,qo,zc;Iy&&(f0.CHINA={CODE:Or.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(n){n.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(dp||(dp={}));class m0 extends xn{constructor(r,i){super(),w(this,"onICEConnectionStateChange",void 0),w(this,"onConnectionStateChange",void 0),w(this,"onDTLSTransportStateChange",void 0),w(this,"onDTLSTransportError",void 0),w(this,"onICETransportStateChange",void 0),w(this,"onFirstAudioReceived",void 0),w(this,"onFirstVideoReceived",void 0),w(this,"onFirstAudioDecoded",void 0),w(this,"onFirstVideoDecoded",void 0),w(this,"onFirstVideoDecodedTimeout",void 0),w(this,"onSelectedLocalCandidateChanged",void 0),w(this,"onSelectedRemoteCandidateChanged",void 0),w(this,"establishPromise",void 0)}}(function(n){n.SEND="sendonly",n.RECV="recvonly",n.SENDRECV="sendrecv",n.INACTIVE="inactive"})(TP||(TP={})),function(n){n.VIDEO="video",n.AUDIO="audio"}(st||(st={})),function(n){n[n.UDP=0]="UDP",n[n.TCP=1]="TCP",n[n.RELAY=2]="RELAY"}(jr||(jr={})),function(n){n[n.FIRST_CONNECTION=0]="FIRST_CONNECTION",n[n.TCP_RESTART=1]="TCP_RESTART",n[n.RELAY_RESTART=2]="RELAY_RESTART",n[n.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",n[n.OLD_RESTART=11]="OLD_RESTART",n[n.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED"}(Za||(Za={})),function(n){n.LocalVideoTrack="videoTrack",n.LocalAudioTrack="audioTrack",n.LocalVideoLowTrack="videoLowTrack"}(ke||(ke={})),function(n){n.New="new",n.Connected="connected",n.Reconnecting="reconnecting",n.Disconnected="disconnected"}(vr||(vr={})),function(n){n.StateChange="stateChange",n.IceConnectionStateChange="iceConnectionStateChange",n.RequestMuteLocal="requestMuteLocal",n.RequestUnmuteLocal="requestUnmuteLocal",n.RequestRePublish="requestRePublish",n.RequestReSubscribe="requestReSubscribe",n.RequestUploadStats="requestUploadStats",n.MediaReconnectStart="MediaReconnectStart",n.MediaReconnectEnd="MediaReconnectEnd",n.NeedSignalRTT="NeedSignalRTT",n.RequestRestartICE="RequestRestartIce",n.PeerConnectionStateChange="PeerConnectionStateChange",n.RequestReconnect="RequestReconnect",n.RequestReconnectPC="RequestReconnectPC",n.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",n.P2PLost="P2PLost",n.UpdateVideoEncoder="UpdateVideoEncoder",n.ConnectionTypeChange="ConnectionTypeChange",n.RequestLowStreamParameter="RequestLowStreamParameter",n.QueryClientConnectionState="QueryClientConnectionState"}(wt||(wt={})),function(n){n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(di||(di={})),function(n){n.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",n.ONLINE="ONLINE",n.OFFLINE="OFFLINE"}(Gc||(Gc={})),function(n){n.ON_TRACK="on_track",n.ON_NODE="on_node"}(Qr||(Qr={})),function(n){n.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",n.REQUEST_CONSTRAINTS="request_constraints"}(qi||(qi={})),function(n){n.CONNECTING="CONNECTING",n.RECONNECTING="RECONNECTING",n.CONNECTED="CONNECTED",n.CLOSED="CLOSED"}(Ao||(Ao={})),function(n){n[n.CONNECT_AP=0]="CONNECT_AP",n[n.AP_CONNECTED=1]="AP_CONNECTED",n[n.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",n[n.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",n[n.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",n[n.CONNECT_WORKER=5]="CONNECT_WORKER",n[n.WORKER_CONNECTED=6]="WORKER_CONNECTED",n[n.CLOSED=7]="CLOSED"}(No||(No={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.STATE_CHANGE="state-change",n.INSPECT_RESULT="inspect-result",n.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",n.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(fr||(fr={})),function(n){n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.MULTI_IP="MULTI_IP",n.TIMEOUT="TIMEOUT",n.OFFLINE="OFFLINE",n.LEAVE="LEAVE",n.P2P_FAILED="P2P_FAILED",n.FALLBACK="FALLBACK"}(Ts||(Ts={})),function(n){n.CONNECTED="transmitter:connected",n.RECONNECTING="transmitter:reconnecting",n.WILL_RECONNECT="transmitter:will_reconnect",n.CLOSED="transmitter:closed",n.FAILED="transmitter:failed",n.ON_MESSAGE="transmitter:on_message",n.REQUEST_NEW_URLS="transmitter:request_new_urls",n.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",n.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",n.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",n.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",n.FAILBACK="transmitter:failback"}(Un||(Un={})),function(n){n.CAMERA_CHANGED="camera-changed",n.MICROPHONE_CHANGED="microphone-changed",n.PLAYBACK_DEVICE_CHANGED="playback-device-changed",n.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",n.AUTOPLAY_FAILED="autoplay-failed",n.SECURITY_POLICY_VIOLATION="security-policy-violation"}(es||(es={})),function(n){n[n.APP_TYPE_INVALID_VALUE=-1]="APP_TYPE_INVALID_VALUE",n[n.APP_TYPE_NATIVE=0]="APP_TYPE_NATIVE",n[n.APP_TYPE_NATIVE_COCOS=1]="APP_TYPE_NATIVE_COCOS",n[n.APP_TYPE_NATIVE_UNITY=2]="APP_TYPE_NATIVE_UNITY",n[n.APP_TYPE_NATIVE_ELECTRON=3]="APP_TYPE_NATIVE_ELECTRON",n[n.APP_TYPE_NATIVE_FLUTTER=4]="APP_TYPE_NATIVE_FLUTTER",n[n.APP_TYPE_NATIVE_UNREAL=5]="APP_TYPE_NATIVE_UNREAL",n[n.APP_TYPE_NATIVE_XAMARIN=6]="APP_TYPE_NATIVE_XAMARIN",n[n.APP_TYPE_NATIVE_API_CLOUD=7]="APP_TYPE_NATIVE_API_CLOUD",n[n.APP_TYPE_NATIVE_REACT_NATIVE=8]="APP_TYPE_NATIVE_REACT_NATIVE",n[n.APP_TYPE_NATIVE_PYTHON=9]="APP_TYPE_NATIVE_PYTHON",n[n.APP_TYPE_NATIVE_COCOS_CREATOR=10]="APP_TYPE_NATIVE_COCOS_CREATOR",n[n.APP_TYPE_NATIVE_RUST=11]="APP_TYPE_NATIVE_RUST",n[n.APP_TYPE_NATIVE_C_SHARP=12]="APP_TYPE_NATIVE_C_SHARP",n[n.APP_TYPE_NATIVE_CEF=13]="APP_TYPE_NATIVE_CEF",n[n.APP_TYPE_NATIVE_UNI_APP=14]="APP_TYPE_NATIVE_UNI_APP",n[n.APP_TYPE_WEBRTC=1e3]="APP_TYPE_WEBRTC",n[n.APP_TYPE_WEBRTC_REACT=1001]="APP_TYPE_WEBRTC_REACT",n[n.APP_TYPE_WEBRTC_VUE=1002]="APP_TYPE_WEBRTC_VUE",n[n.APP_TYPE_WEBRTC_ANGULAR=1003]="APP_TYPE_WEBRTC_ANGULAR"}(bP||(bP={})),function(n){n.CONNECTING="CONNECTING",n.RECONNECTING="RECONNECTING",n.CONNECTED="CONNECTED",n.CLOSED="CLOSED"}(po||(po={})),function(n){n.CONNECTION_STATE_CHANGE="connection-state-change",n.STATE_CHANGE="state-change",n.INSPECT_RESULT="inspect-result",n.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",n.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(qo||(qo={})),function(n){n[n.CONNECT_AP=0]="CONNECT_AP",n[n.AP_CONNECTED=1]="AP_CONNECTED",n[n.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",n[n.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",n[n.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",n[n.CONNECT_WORKER=5]="CONNECT_WORKER",n[n.WORKER_CONNECTED=6]="WORKER_CONNECTED",n[n.CLOSED=7]="CLOSED"}(zc||(zc={}));const hi={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1};function Xn(){return hi}let Tr;(function(n){n[n.CHOOSE_SERVER=11]="CHOOSE_SERVER",n[n.CLOUD_PROXY=18]="CLOUD_PROXY",n[n.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",n[n.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"})(Tr||(Tr={}));var B9=Ee,hp=Array.isArray||function(n){return B9(n)=="Array"},j9=I,RP=hp,H9=yS,$9=He,W9=er("species"),IP=j9.Array,G9=function(n){var r;return RP(n)&&(r=n.constructor,(H9(r)&&(r===IP||RP(r.prototype))||$9(r)&&(r=r[W9])===null)&&(r=void 0)),r===void 0?IP:r},wP=function(n,r){return new(G9(n))(r===0?0:r)},z9=qh,K9=Le,Y9=lo,q9=kc,X9=wP,OP=S([].push),Kc=function(n){var r=n==1,i=n==2,s=n==3,l=n==4,h=n==6,p=n==7,v=n==5||h;return function(E,T,y,R){for(var k,V,$=Y9(E),W=K9($),G=z9(T,y),ie=q9(W),se=0,ye=R||X9,De=r?ye(E,ie):i||p?ye(E,0):void 0;ie>se;se++)if((v||se in W)&&(V=G(k=W[se],se,$),n))if(r)De[se]=V;else if(V)switch(n){case 3:return!0;case 5:return k;case 6:return se;case 2:OP(De,k)}else switch(n){case 4:return!1;case 7:OP(De,k)}return h?-1:s||l?l:De}},AP={forEach:Kc(0),map:Kc(1),filter:Kc(2),some:Kc(3),every:Kc(4),find:Kc(5),findIndex:Kc(6),filterReject:Kc(7)},J9=AP.forEach,NP=Y_("forEach")?[].forEach:function(n){return J9(this,n,arguments.length>1?arguments[1]:void 0)};Pi({target:"Array",proto:!0,forced:[].forEach!=NP},{forEach:NP});var Q9=Lc("Array").forEach,Z9=Uc,eK=xr,tK=C,nK=Q9,zy=Array.prototype,rK={DOMTokenList:!0,NodeList:!0},iK=function(n){var r=n.forEach;return n===zy||tK(zy,n)&&r===zy.forEach||eK(rK,Z9(n))?nK:r},oK=lo,PP=iS;Pi({target:"Object",stat:!0,forced:c(function(){PP(1)})},{keys:function(n){return PP(oK(n))}});var aK=ot.Object.keys,sK=L1,cK=Pi,lK=hp,uK=S([].reverse),xP=[1,2];cK({target:"Array",proto:!0,forced:String(xP)===String(xP.reverse())},{reverse:function(){return lK(this)&&(this.length=this.length),uK(this)}});var dK=Lc("Array").reverse,hK=C,pK=dK,Ky=Array.prototype,fK=function(n){var r=n.reverse;return n===Ky||hK(Ky,n)&&r===Ky.reverse?pK:r},mK=c,gK=an,vK=er("species"),DP=function(n){return gK>=51||!mK(function(){var r=[];return(r.constructor={})[vK]=function(){return{foo:1}},r[n](Boolean).foo!==1})},EK=Pi,_K=I,kP=hp,SK=yS,yK=He,LP=Z_,CK=kc,TK=at,bK=Ay,RK=er,IK=CS,wK=DP("slice"),OK=RK("species"),Yy=_K.Array,AK=Math.max;EK({target:"Array",proto:!0,forced:!wK},{slice:function(n,r){var i,s,l,h=TK(this),p=CK(h),v=LP(n,p),E=LP(r===void 0?p:r,p);if(kP(h)&&(i=h.constructor,(SK(i)&&(i===Yy||kP(i.prototype))||yK(i)&&(i=i[OK])===null)&&(i=void 0),i===Yy||i===void 0))return IK(h,v,E);for(s=new(i===void 0?Yy:i)(AK(E-v,0)),l=0;v<E;v++,l++)v in h&&bK(s,l,h[v]);return s.length=l,s}});var NK=Lc("Array").slice,PK=C,xK=NK,qy=Array.prototype,DK=function(n){var r=n.slice;return n===qy||PK(qy,n)&&r===qy.slice?xK:r};function _e(n,r,i,s,l){var h,p,v,E={};return iK(h=aK(s)).call(h,function(T){E[T]=s[T]}),E.enumerable=!!E.enumerable,E.configurable=!!E.configurable,("value"in E||E.initializer)&&(E.writable=!0),E=sK(p=fK(v=DK(i).call(i)).call(v)).call(p,function(T,y){return y(n,r,T)||T},E),l&&E.initializer!==void 0&&(E.value=E.initializer?E.initializer.call(l):void 0,E.initializer=void 0),E.initializer===void 0&&(CN(n,r,E),E=null),E}var kK=Lc("Array").keys,LK=Uc,MK=xr,UK=C,VK=kK,Xy=Array.prototype,FK={DOMTokenList:!0,NodeList:!0},eu=function(n){var r=n.keys;return n===Xy||UK(Xy,n)&&r===Xy.keys||MK(FK,LK(n))?VK:r};function MP(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function UP(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?MP(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):MP(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}let g0=0,Jy=0;function Ia(n,r,i,s){return new Pe((l,h)=>{r.timeout=r.timeout||ne("HTTP_CONNECT_TIMEOUT"),r.responseType=r.responseType||"json",r.data&&!i?(r.data=JSON.stringify(r.data),g0+=Td(r.data)):i&&(r.data.size?g0+=r.data.size:r.data instanceof FormData?g0+=function(p){let v=0;return/DingTalk/i.test(navigator.userAgent)&&p.realFormData&&(p=p.realFormData),p.forEach(E=>{v+=typeof E=="string"?Td(E):E.size}),v+138}(r.data):g0+=Td(JSON.stringify(r.data))),r.headers=r.headers||{},r.headers["Content-Type"]=r.headers["Content-Type"]||"application/json",r.method="POST",r.url=n,Io.request(r).then(p=>{typeof p.data=="string"?Jy+=Td(p.data):p.data instanceof ArrayBuffer||p.data instanceof Uint8Array?Jy+=p.data.byteLength:Jy+=Td(JSON.stringify(p.data)),s&&l({data:p.data,headers:p.headers}),l(p.data)}).catch(p=>{Io.isCancel(p)?h(new X(j.OPERATION_ABORTED,"cancel token canceled")):p.code==="ECONNABORTED"?h(new X(j.NETWORK_TIMEOUT,p.message)):p.response?h(new X(j.NETWORK_RESPONSE_ERROR,p.response.status)):h(new X(j.NETWORK_ERROR,p.message))})})}async function BK(n,r){const i=new Blob([r.data],{type:"buffer"});return await Ia(n,UP(UP({},r),{},{data:i,headers:{"Content-Type":"application/octet-stream"}}),!0)}const ir=new class extends xn{set networkState(n){M.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+n),this.emit(Gc.NETWORK_STATE_CHANGE,n,this._networkState),n===di.ONLINE?this.emit(Gc.ONLINE):n===di.OFFLINE&&(this.onlineWaiter=new Pe(r=>{this.once(Gc.ONLINE,()=>{this.onlineWaiter=void 0,r(di.ONLINE)})}),this.emit(Gc.OFFLINE)),this._networkState=n}get networkState(){return this._networkState}constructor(){super(),w(this,"_moduleName","network-indicator"),w(this,"_networkState",di.ONLINE),w(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=di.ONLINE}),window.addEventListener("offline",()=>{this.networkState=di.OFFLINE})}};let Qy=!1;const Po=new class extends xn{constructor(){super(...arguments),w(this,"onAutoplayFailed",void 0),w(this,"onAudioAutoplayFailed",void 0)}};function VP(){if($t(),!Qy){const n=r=>{r.preventDefault(),Qy=!1,ip()?document.body.removeEventListener("click",n,!0):(document.body.removeEventListener("touchstart",n,!0),document.body.removeEventListener("mousedown",n,!0))};Qy=!0,ip()?document.body.addEventListener("click",n,!0):(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0)),M.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Po.onAutoplayFailed?Po.onAutoplayFailed():Po.onAudioAutoplayFailed?M.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):M.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),Po.emit("autoplay-failed")}}function Zy(n){return new TextEncoder().encode(n)}const FP=function(n,r){const i=new Uint8Array(n.byteLength+r.byteLength);return i.set(new Uint8Array(n),0),i.set(new Uint8Array(r),n.byteLength),i},jK=async n=>function(r,i){let s="";return new Uint8Array(r).forEach(l=>{s+=l.toString(i).padStart(2,"0")}),s}(await crypto.subtle.digest("SHA-256",Zy(n)),16);function BP(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function ct(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?BP(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):BP(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function Ge(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(r,i,s){const l=s.value;if(typeof l=="function"){const h=n.className||r.__className__||(r.constructor.name==="AgoraRTCClient"?"Client":r.constructor.name);s.value=function(){for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];let T=v;if(n.argsMap)try{T=n.argsMap(this,...v)}catch(R){M.warning(R),T=[]}try{JSON.stringify(T)}catch{M.warning("arguments for method ".concat(h,".").concat(String(i)," not serializable for apiInvoke.")),T=[]}const y=(n.report||Me).reportApiInvoke(this._sessionId||null,{name:"".concat(h,".").concat(String(i)),options:T,tag:On.TRACER,reportResult:n.reportResult},n.throttleTime);try{const R=l.apply(this,v);return R instanceof Pe?R.then(k=>(y.onSuccess(n.reportResult&&k),k)).catch(k=>{throw y.onError(k),k}):(y.onSuccess(n.reportResult&&R),R)}catch(R){throw y.onError(R),R}}}return s}}const Me=new class{constructor(){w(this,"baseInfoMap",new Map),w(this,"proxyServer",void 0),w(this,"clientList",Ql),w(this,"eventUploadTimer",void 0),w(this,"setSessionIdTimer",void 0),w(this,"url",void 0),w(this,"backupUrl",void 0),w(this,"_appId",void 0),w(this,"keyEventUploadPendingItems",[]),w(this,"normalEventUploadPendingItems",[]),w(this,"apiInvokeUploadPendingItems",[]),w(this,"apiInvokeCount",0),w(this,"ltsList",[]),w(this,"lastSendNormalEventTime",Date.now()),w(this,"customReportCounterTimer",void 0),w(this,"customReportCount",0),w(this,"extApiInvoke",async n=>{for(const r of n){const i=ct(ct({},r),{},{sid:null,invokeId:++this.apiInvokeCount,tag:On.TRACER});this.sendApiInvoke(i)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),ne("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),ne("EVENT_REPORT_SEND_INTERVAL"))}adjustSessionStartTime(n){if(!this.baseInfoMap.has(n)&&!this.baseInfoMap.get(n))return void M.error("adjust session ".concat(n," start time, sid is not exist or info is undefined"));const r=this.baseInfoMap.get(n),i=Date.now(),s=r.startTime;r.startTime=i,M.debug("rewrite session ".concat(n," startTime: ").concat(i," , ").concat(i-s,"ms")),this.baseInfoMap.set(n,r)}setAppId(n){this._appId=n}reportApiInvoke(n,r,i){r.timeout=r.timeout||6e4,r.reportResult=r.reportResult===void 0||r.reportResult;const s=Date.now();this.apiInvokeCount+=1;const l=this.apiInvokeCount,h=()=>({tag:r.tag,invokeId:l,sid:n,name:r.name,apiInvokeTime:s,options:r.options,states:r.states||null}),p=!!ne("SHOW_REPORT_INVOKER_LOG");p&&M.info("".concat(r.name," start"),r.options);let v=!1;ei(r.timeout).then(()=>{v||(this.sendApiInvoke(ct(ct({},h()),{},{error:j.API_INVOKE_TIMEOUT,success:!1})),M.debug("".concat(r.name," timeout")))});const E=new X(j.UNEXPECTED_ERROR,"".concat(r.name,": this api invoke is end"));return{onSuccess:T=>{const y=()=>{if(v)throw E;return v=!0,this.sendApiInvoke(ct(ct({},h()),{},{success:!0},r.reportResult&&{result:T})),p&&M.info("".concat(r.name," onSuccess")),T};return i?rD(y,r.name+"Success",i,()=>v=!0):y()},onError:T=>{const y=()=>{if(v)throw T;v=!0,this.sendApiInvoke(ct(ct({},h()),{},{success:!1,error:T})),p&&M.info("".concat(r.name," onFailure"),T.toString())};return i?rD(y,r.name+"Error",i,()=>v=!0):y()}}}sessionInit(n,r){if(this.baseInfoMap.has(n))return;const i=Date.now(),s=this.createBaseInfo(n,i);s.cname=r.cname;const l=Object.assign({},{willUploadConsoleLog:ne("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:Iy?"global":"oversea",areas:ne("AREAS")&&ne("AREAS").join(",")},r.extend),h=Date.now(),p=ct(ct({},s),{},{eventType:Br.SESSION_INIT,appid:r.appid,browser:navigator.userAgent,build:Ry,lts:h,elapse:h-i,extend:JSON.stringify(l),mode:r.mode,process:ne("PROCESS_ID"),appType:ne("APP_TYPE"),success:!0,version:Yo});this.send({type:Dn.SESSION,data:p},!0)}joinChooseServer(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),h=ct(ct({},s),{},{eventType:Br.JOIN_CHOOSE_SERVER,lts:l,eventElapse:l-r.lts,chooseServerAddr:r.csAddr,errorCode:r.ec,elapse:l-i.startTime,success:r.succ,chooseServerAddrList:JSON.stringify(r.serverList),uid:r.uid?parseInt(r.uid):null,cid:r.cid?parseInt(r.cid):null,chooseServerIp:r.csIp||"",opid:r.opid,unilbsServerIds:r.unilbsServerIds,extend:r.extend||void 0,isHttp3:r.isHttp3});this.send({type:Dn.JOIN_CHOOSE_SERVER,data:h},!0)}reqUserAccount(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),h=ct(ct({},s),{},{eventType:Br.REQ_USER_ACCOUNT,lts:l,success:r.success,serverAddress:r.serverAddr,stringUid:r.stringUid,uid:r.uid,errorCode:r.errorCode,elapse:l-i.startTime,eventElapse:l-r.lts,extend:JSON.stringify(r.extend)});this.send({type:Dn.REQ_USER_ACCOUNT,data:h},!0)}joinGateway(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info;r.vid&&(s.vid=r.vid),s.uid=r.uid,s.cid=r.cid;const l=Date.now(),{firstSuccess:h,avoidJoinStartTime:p,isProxy:v,addr:E}=r,T=l-(h&&p?p:i.startTime),y=ct(ct({},s),{},{eventType:Br.JOIN_GATEWAY,lts:l,gatewayAddr:r.addr,success:r.succ,errorCode:r.ec,elapse:T,eventElapse:l-r.lts,firstSuccess:h,signalChannel:r.signalChannel}),R=y.success?1:0;if(r.succ&&(i.lastJoinSuccessTime=l),h)this.send({type:Dn.JOIN_GATEWAY,data:y},!0);else{let k;if(E)if(v){const $=E.match(/h=(\d{1,3}-){3}\d{1,3}/g),W=E.match(/p=[0-9]{1,6}/g);k={isSuccess:R,gatewayIp:$&&$.length?$[0].split("=")[1].replace(/-/g,"."):"",port:W&&W.length?W[0].split("=")[1]:"",isProxy:v?1:0}}else{const $=E.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),W=E.match(/:[0-9]{1,6}/g);k={isSuccess:R,gatewayIp:$&&$.length?$[0].split("//")[1].replace(/-/g,"."):"",port:W&&W.length?W[0].split(":")[1]:"",isProxy:v?1:0}}else k={isSuccess:R,gatewayIp:"",port:"",isProxy:v?1:0};delete y.success,delete y.eventType,delete y.firstSuccess,y.vid=Number(y.vid);const V=Object.assign({},y,k,{eventType:Br.REJOIN_GATEWAY});this.send({type:Dn.RE_JOIN_GATEWAY,data:V},!0)}}joinChannelTimeout(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=Date.now(),l=ct(ct({},i.info),{},{lts:s,timeout:r,elapse:s-i.startTime});this.send({type:Dn.JOIN_CHANNEL_TIMEOUT,data:l},!0)}publish(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),h=ct(ct({},s),{},{eventType:Br.PUBLISH,lts:l,eventElapse:r.eventElapse,elapse:l-i.startTime,success:r.succ,errorCode:r.ec,videoName:r.videoName,audioName:r.audioName,screenName:r.screenName,screenshare:r.screenshare,audio:r.audio,video:r.video,p2pid:r.p2pid,publishRequestid:r.publishRequestid});this.send({type:Dn.PUBLISH,data:h},!0)}subscribe(n,r,i){const s=this.baseInfoMap.get(n);if(!s)return;const l=s.info,h=Date.now(),p=ct(ct({},l),{},{eventType:Br.SUBSCRIBE,lts:h,eventElapse:r.eventElapse,elapse:h-s.startTime,success:r.succ,errorCode:r.ec,video:r.video,audio:r.audio,subscribeRequestid:r.subscribeRequestid,p2pid:r.p2pid},i&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof r.peerid=="string"?p.peerSuid=r.peerid:p.peer=r.peerid,this.send({type:Dn.SUBSCRIBE,data:p},!0)}wsCompressorInit(n){var r;const i=[...eu(r=this.baseInfoMap).call(r)],s=i.length?i[0]:"UnableToGetSid",l=this.baseInfoMap.get(s);if(!l)return;const h=l.info,p=Date.now(),v=ct(ct({},h),{},{eventType:Br.WS_COMPRESSOR_INIT,lts:p,eventElapse:n.eventElapse,elapse:p-l.startTime,status:n.status?1:2});this.send({type:Dn.WS_COMPRESSOR_INIT,data:v},!0)}firstRemoteVideoDecode(n,r,i,s){const l=this.baseInfoMap.get(n);if(!l)return;const h=l.info,p=Date.now(),v=ct(ct(ct({},h),s),{},{elapse:p-l.startTime,eventType:r,lts:p,firstDecodeFrame:Math.max(p-l.startTime,0),apEnd:Math.max(s.apEnd-l.startTime,0),apStart:Math.max(s.apStart-l.startTime,0),joinGwEnd:Math.max(s.joinGwEnd-l.startTime,0),joinGwStart:Math.max(s.joinGwStart-l.startTime,0),pcEnd:Math.max(s.pcEnd-l.startTime,0),pcStart:Math.max(s.pcStart-l.startTime,0),subscriberEnd:Math.max(s.subscriberEnd-l.startTime,0),subscriberStart:Math.max(s.subscriberStart-l.startTime,0),videoAddNotify:Math.max(s.videoAddNotify-l.startTime,0)});this.send({type:i,data:v},!0)}firstRemoteFrame(n,r,i,s){const l=this.baseInfoMap.get(n);if(!l)return;const h=l.info,p=Date.now(),v=ct(ct(ct({},h),s),{},{elapse:p-l.startTime,eventType:r,lts:p});this.send({type:i,data:v},!0)}pcStats(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),h=ct(ct(ct({},s),r),{},{vid:s.vid===void 0?0:Number(s.vid),elapse:l-i.startTime,eventType:Br.PC_STATS,lts:l});this.send({type:Dn.PC_STATS,data:h},!0)}onGatewayStream(n,r,i,s){const l=this.baseInfoMap.get(n);if(!l)return;const h=l.info,p=Date.now(),v=ct(ct(ct({},h),s),{},{eventType:r,lts:p});this.send({type:i,data:v},!0)}streamSwitch(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),h=ct(ct({},s),{},{eventType:Br.STREAM_SWITCH,lts:l,isDual:r.isdual,elapse:l-i.startTime,success:r.succ});this.send({type:Dn.STREAM_SWITCH,data:h},!0)}requestProxyAppCenter(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),h=ct(ct({},s),{},{eventType:Br.REQUEST_PROXY_APPCENTER,lts:l,eventElapse:l-r.lts,elapse:l-i.startTime,APAddr:r.APAddr,workerManagerList:r.workerManagerList,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:Dn.REQUEST_PROXY_APPCENTER,data:h},!0)}requestProxyWorkerManager(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),h=ct(ct({},s),{},{eventType:Br.REQUEST_PROXY_WORKER_MANAGER,lts:l,eventElapse:l-r.lts,elapse:l-i.startTime,workerManagerAddr:r.workerManagerAddr,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:Dn.REQUEST_PROXY_WORKER_MANAGER,data:h},!0)}setProxyServer(n){this.proxyServer=n,n?M.debug("reportProxyServerurl: ".concat(n)):M.debug("disable reportProxyServerurl: ".concat(n))}peerPublishStatus(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),h=ct(ct({},s),{},{subscribeElapse:r.subscribeElapse,peer:r.peer,peerPublishDuration:Math.max(r.audioPublishDuration,r.videoPublishDuration),audiotag:r.audioPublishDuration>0?1:-1,videotag:r.videoPublishDuration>0?1:-1,lts:l,elapse:l-i.startTime,joinChannelSuccessElapse:l-(i.lastJoinSuccessTime||l),peerPublishDurationVideo:r.videoPublishDuration,peerPublishDurationAudio:r.audioPublishDuration});this.send({type:Dn.PEER_PUBLISH_STATUS,data:h},!0)}workerEvent(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now();(function(h,p,v){const E=h[p];if(!E||typeof E!="string")return[h];h[p]="";const T=Td(JSON.stringify(h));let y=0;const R=[];let k=0;for(let V=0;V<E.length;V++)k+=E.charCodeAt(V)<=127?1:3,k<=v-T||(R[R.length]=ru(ru({},h),{},{[p]:E.substring(y,V)}),y=V,k=E.charCodeAt(V)<=127?1:3);return y!==E.length-1&&(R[R.length]=ru(ru({},h),{},{[p]:E.substring(y)})),R})(ct(ct(ct({},s),r),{},{elapse:l-i.startTime,lts:l,productType:"WebRTC"}),"payload",1300).forEach(h=>this.send({type:Dn.WORKER_EVENT,data:h},!0))}apworkerEvent(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),h=ct(ct(ct({},s),r),{},{elapse:l-i.startTime,lts:l});this.send({type:Dn.AP_WORKER_EVENT,data:h},!0)}joinWebProxyAP(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),h=ct(ct(ct({},s),r),{},{elapse:l-i.startTime,lts:l,extend:r.extend||void 0});this.send({type:Dn.JOIN_WEB_PROXY_AP,data:h},!0)}WebSocketQuit(n,r){const i=this.baseInfoMap.get(n);if(!i)return;const s=i.info,l=Date.now(),h=ct(ct(ct({},s),r),{},{elapse:l-i.startTime,lts:l});this.send({type:Dn.WEBSOCKET_QUIT,data:h},!0)}async sendCustomReportMessage(n,r){if(this.customReportCount+=r.length,this.customReportCount>ne("CUSTOM_REPORT_LIMIT"))throw new X(j.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const i=Date.now(),s=r.map(l=>({type:Dn.USER_ANALYTICS,data:ct(ct({sid:n},l),{},{lts:i})}));try{ne("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(s):await this.postDataToStatsCollector(s)}catch(l){throw M.error("send custom report message failed",l.toString()),new X(j.CUSTOM_REPORT_SEND_FAILED,l.message)}}autoplayFailed(n,r,i,s){if(!n)return;const l=this.baseInfoMap.get(n);if(!l)return;const h=l.info,p=Date.now(),v=ct(ct({},h),{},{vid:h.vid===void 0?0:Number(h.vid),lts:p,elapse:p-l.startTime,cbRegistered:Po.onAutoplayFailed||Po.onAudioAutoplayFailed?1:-1,errorMsg:i,mediaType:r,trackId:s,extend:void 0});this.send({type:Dn.AUTOPLAY_FAILED,data:v},!0)}sendApiInvoke(n){const r=ne("NOT_REPORT_EVENT");if(n.tag&&r.includes&&r.includes(n.tag))return!1;if(n.sid===null)return this.apiInvokeUploadPendingItems.push(n),!1;const i=this.baseInfoMap.get(n.sid);if(!i)return this.apiInvokeUploadPendingItems.push(n),!1;const{cname:s,uid:l,cid:h}=i.info;n.lts=n.lts||Date.now();let p;if(n.error)if(n.error instanceof X){const{code:E,message:T}=n.error;p=E||T||n.error.toString()}else p=n.error.toString();const v={invokeId:n.invokeId,sid:n.sid,cname:s,cid:h,uid:l,lts:n.lts,success:n.success,elapse:n.lts-i.startTime,execElapse:n.lts-n.apiInvokeTime,apiName:n.name,options:n.options?JSON.stringify(n.options):void 0,execStates:n.states?JSON.stringify(n.states):void 0,execResult:n.result?JSON.stringify(n.result):void 0,errorCode:n.error?p:void 0,errorMsg:n.error?JSON.stringify(n.error):void 0};return this.send({type:Dn.API_INVOKE,data:v},!1),!0}appendSessionId(){this.clientList.forEach(n=>{if(n._sessionId){const r=this.apiInvokeUploadPendingItems.length;for(let i=0;i<r;i++){const s=this.apiInvokeUploadPendingItems.shift();s&&(s.sid=n._sessionId,this.sendApiInvoke(Object.assign({},s)))}}})}send(n,r){if(r)return this.keyEventUploadPendingItems.push(n),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(n),this.normalEventUploadPendingItems.length>ne("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(n,r){const i=[],s=[];for(;n.length;){const h=n.shift();i.length<20?i.push(h):s.push(h)}n.push(...s);for(const h of[...i]){var l;this.ltsList.indexOf(h.data.lts)!==-1?(h.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(h.data.lts)):(this.ltsList.push(h.data.lts),Dy(l=this.ltsList).call(l,(p,v)=>p-v))}return r||(this.lastSendNormalEventTime=Date.now()),ne("ENABLE_EVENT_REPORT")&&i.length&&(ne("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(i):this.postDataToStatsCollector(i)).catch((h=>p=>{ne("EVENT_REPORT_RETRY")&&(r?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(h):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(h),this.normalEventUploadPendingItems.length>ne("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-ne("NORMAL_EVENT_QUEUE_CAPACITY")),M.warning("report: drop normal events"))))})(i)),n}async postDataToStatsCollector2(n){ir.networkState===di.OFFLINE&&await Pe.race([ir.onlineWaiter,ei(2*tr.maxRetryTimeout)]);const r=l=>{let h=new Uint8Array;return l.forEach(p=>{const v=Zy(JSON.stringify(p.data)),E=new ArrayBuffer(5),T=(R=>{let k=0;return Object.entries(Dn).forEach(V=>{let[$,W]=V;W===R.type&&(k=Vy[$])}),k})(p),y=new DataView(E);y.setUint16(0,v.byteLength,!0),y.setUint8(2,255&T),y.setUint8(3,T>>>8&255),y.setUint8(4,T>>>16&255),h=FP(h,new Uint8Array(E)),h=FP(h,v)}),h},i="event";let s=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ne("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(i):"https://".concat(ne("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(i);for(let l=0;l<2;l+=1){l===1&&(s=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ne("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(i):"https://".concat(ne("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(i));try{await Ia(s,{timeout:1e4,data:r(n),headers:ct(ct({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(h){if(l===1)throw h;continue}return}}async postDataToStatsCollector(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:n.map(h=>JSON.stringify(h)),vid:(h=>{const p=h&&h.data.sid&&this.baseInfoMap.get(h.data.sid);return p&&p.info.vid&&+p.info.vid||0})(n[0])};ir.networkState===di.OFFLINE&&await Pe.race([ir.onlineWaiter,ei(2*tr.maxRetryTimeout)]);const s=r?"/events/proto-raws":"/events/messages";let l=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ne("EVENT_REPORT_DOMAIN"),"&p=").concat(ne("STATS_COLLECTOR_PORT"),"&d=").concat(s):"https://".concat(ne("EVENT_REPORT_DOMAIN"),":").concat(ne("STATS_COLLECTOR_PORT")).concat(s));for(let h=0;h<2;h+=1){h===1&&(l=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(ne("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(ne("STATS_COLLECTOR_PORT"),"&d=").concat(s):"https://".concat(ne("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(ne("STATS_COLLECTOR_PORT")).concat(s)));try{r?await BK(l,{timeout:1e4,data:i}):await Ia(l,{timeout:1e4,data:i})}catch(p){if(h===1)throw p;continue}return}}createBaseInfo(n,r){const i=Object.assign({},D9);return i.sid=n,this.baseInfoMap.set(n,{info:i,startTime:r}),i}reportResourceTiming(n,r){const i=performance.getEntriesByName(n),s=i[i.length-1];s&&this.reportApiInvoke(r,{name:"Client.resourceTiming",options:s,tag:On.TRACER}).onSuccess()}};l0.on("REPORT_LOG_UPLOAD",n=>{n.networkState=ir.networkState,Me.reportApiInvoke(null,{name:"logUploadError",options:n,tag:On.TRACER})});class jP extends xn{constructor(r,i){super(),w(this,"trackMediaType",void 0),w(this,"_ID",void 0),w(this,"_rtpTransceiver",void 0),w(this,"_lowRtpTransceiver",void 0),w(this,"_hints",[]),w(this,"_isClosed",!1),w(this,"_originMediaStreamTrack",void 0),w(this,"_mediaStreamTrack",void 0),w(this,"_external",{}),this._ID=i||_n(8,"track-"),this._originMediaStreamTrack=r,this._mediaStreamTrack=r,function(s){sp.includes(s)||sp.push(s)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(r){if(!r){const i=Me.reportApiInvoke(null,{name:nr.GET_MEDIA_STREAM_TRACK,options:[],tag:On.TRACER});this._mediaStreamTrack&&typeof this._mediaStreamTrack.label=="string"?i.onSuccess(this._mediaStreamTrack.label):i.onSuccess("")}return this._mediaStreamTrack}getRTCRtpTransceiver(r){return r===gd.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(r){const i=sp.indexOf(r);i!==-1&&sp.splice(i,1)}(this),this.emit(Wc.CLOSED)}_updateRtpTransceiver(r,i){if(i===gd.LOW_STREAM){if(this._lowRtpTransceiver===r)return;this._lowRtpTransceiver=r}else{if(this._rtpTransceiver===r)return;this._rtpTransceiver=r}this.emit(up.TRANSCEIVER_UPDATED,r,i)}}let br,HK=1;class Ri{constructor(r){w(this,"lockingPromise",Pe.resolve()),w(this,"locks",0),w(this,"name",""),w(this,"lockId",void 0),this.lockId=HK++,r&&(this.name=r),M.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(r){let i;this.locks+=1,M.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat(typeof r=="string"?r:""));const s=new Pe(h=>{i=()=>{this.locks-=1,M.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat(typeof r=="string"?r:"")),h()}}),l=this.lockingPromise.then(()=>i);return this.lockingPromise=this.lockingPromise.then(()=>s),l}}function Ed(n,r){return function(i,s,l){const h=l.value;if(typeof h!="function")throw new Error("Cannot use mutex on object property.");return l.value=async function(){const p=this[r];if(!p)throw new Error("mutex property key ".concat(r," doesn't exist on ").concat(n));const v=await p.lock("From ".concat(n,".").concat(s));try{for(var E=arguments.length,T=new Array(E),y=0;y<E;y++)T[y]=arguments[y];return await h.apply(this,T)}finally{v()}},l}}class eC extends jP{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}set processorContext(r){this._processorContext=r}constructor(r,i){super(r,i),w(this,"_enabled",!0),w(this,"_muted",!1),w(this,"_isExternalTrack",!1),w(this,"_isClosed",!1),w(this,"_enabledMutex",void 0),w(this,"processor",void 0),w(this,"_processorContext",void 0),w(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new Ri("".concat(this.getTrackId())),r.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var r,i;return(r=(i=this._originMediaStreamTrack)===null||i===void 0?void 0:i.label)!==null&&r!==void 0?r:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,M.debug("[".concat(this.getTrackId(),"] close")),this.emit(Ze.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(r,i){let s=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this._isExternalTrack=s,r!==this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),i&&this._originMediaStreamTrack.stop(),r.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=r,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Fn(this,Ze.NEED_REPLACE_TRACK,this),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){M.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Wc.TRACK_ENDED)}stateCheck(r,i){if(M.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(r,": ").concat(i,"]")),pd(i,r),this._enabled&&this._muted&&r==="enabled"&&i===!1)throw new X(j.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&r==="muted"&&i===!0)throw new X(j.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}function HP(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}(function(n){n.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",n.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",n.IOS_INTERRUPTION_START="ios-interruption-start",n.IOS_INTERRUPTION_END="ios-interruption-end",n.STATE_CHANGE="state-change"})(br||(br={}));const $P=window.AudioContext||window.webkitAudioContext;let xo=null;const Gt=new class extends xn{constructor(){super(...arguments),w(this,"prevState",void 0),w(this,"curState",void 0),w(this,"currentTime",void 0),w(this,"currentTimeStuckAt",void 0),w(this,"interruptDetectorTrack",void 0),w(this,"onLocalAudioTrackMute",()=>{M.info("ios15-interruption-start"),this.emit(br.IOS_15_16_INTERRUPTION_START)}),w(this,"onLocalAudioTrackUnmute",async()=>{M.info("ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?M.info("ios15-interruption-end-canceled"):(xo&&await xo.suspend(),this.emit(br.IOS_15_16_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(n){M.debug("webaudio bindInterruptDetectorTrack ".concat(n.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=n,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(n){M.debug("webaudio unbindInterruptDetectorTrack ".concat(n.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===n&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function $K(){if(!$P)return void M.error("your browser is not support web audio");M.info("create audio context");const n=function(r){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?HP(Object(s),!0).forEach(function(l){w(r,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):HP(Object(s)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(s,l))})}return r}({},ne("WEBAUDIO_INIT_OPTIONS"));M.debug("audio context init option:",JSON.stringify(n)),xo=new $P(n),Gt.curState=xo.state,xo.onstatechange=()=>{Gt.prevState=Gt.curState,Gt.curState=xo?xo.state:void 0;const{prevState:r,curState:i}=Gt,s=i==="running",l=i==="interrupted",h=r==="running",p=r==="suspended",v=r==="interrupted",E=$t().osVersion;(Ci()||Cs())&&h&&l&&(M.info("ios".concat(E,"-interruption-start")),Gt.emit(br.IOS_INTERRUPTION_START)),(Ci()||Cs())&&(p||v)&&s&&(M.info("ios".concat(E,"-interruption-end")),Gt.emit(br.IOS_INTERRUPTION_END)),r!==i&&(M.debug("AudioContext State Change","".concat(r,"=>").concat(i)),Gt.emit(br.STATE_CHANGE))},setInterval(()=>{var r;const i=(r=xo)===null||r===void 0?void 0:r.currentTime;Gt.currentTime!==i?(Gt.currentTimeStuckAt&&(M.debug("AudioContext current time resume at ".concat(i)),Gt.currentTimeStuckAt=void 0),Gt.currentTime=i):(i!==Gt.currentTimeStuckAt&&(Me.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:i},tag:On.TRACER}).onSuccess(),M.warning("AudioContext current time stuck at ".concat(i))),Gt.currentTimeStuckAt=i)},5e3),async function(r){const i=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let s,l=!1,h=!1,p=!1;function v(G){r.state==="running"?E(!1):Ci()||Cs()?r.state==="suspended"&&(E(!0),G&&r.resume().then(y,y)):r.state!=="closed"&&(E(!0),G&&r.resume().then(y,y))}function E(G){if(l!==G){l=G;for(let ie=0,se=i;ie<se.length;ie+=1){const ye=se[ie];G?window.addEventListener(ye,R,{capture:!0,passive:!0}):window.removeEventListener(ye,R,{capture:!0,passive:!0})}}}function T(){v(!0)}function y(){v(!1)}function R(){v(!0)}function k(G){if(!p)if(s.paused)if(G){V(!1),p=!0;let ie;try{ie=s.play(),ie?ie.then($,$):(s.addEventListener("playing",$),s.addEventListener("abort",$),s.addEventListener("error",$))}catch{$()}}else V(!0);else V(!1)}function V(G){if(h!==G){h=G;for(let ie=0,se=i;ie<se.length;ie++){const ye=se[ie];G?window.addEventListener(ye,W,{capture:!0,passive:!0}):window.removeEventListener(ye,W,{capture:!0,passive:!0})}}}function $(){s.removeEventListener("playing",$),s.removeEventListener("abort",$),s.removeEventListener("error",$),p=!1,k(!1)}function W(){k(!0)}if(Ci()){const G=r.createMediaStreamDestination(),ie=document.createElement("div");ie.innerHTML="<audio x-webkit-airplay='deny'></audio>",s=ie.children.item(0),s.controls=!1,s.disableRemotePlayback=!0,s.preload="auto",s.srcObject=G.stream,k(!0)}Gt.on(br.STATE_CHANGE,T),v(!1)}(xo)}function _d(){if(!xo){if($K(),!xo)throw new X(j.NOT_SUPPORTED,"can not create audio context");return xo}return xo}function WP(){return!!xo}function tu(n){if(function(){if(tC!==null)return tC;const s=_d(),l=s.createBufferSource(),h=s.createGain(),p=s.createGain();l.connect(h),l.connect(p),l.disconnect(h);let v=!1;try{l.disconnect(h)}catch{v=!0}return l.disconnect(),tC=v,v}())return;const r=n.connect,i=n.disconnect;n.connect=(s,l,h)=>(n._inputNodes||(n._inputNodes=[]),n._inputNodes.includes(s)||(s instanceof AudioNode?(n._inputNodes.push(s),r.call(n,s,l,h)):r.call(n,s,l)),n),n.disconnect=(s,l,h)=>{i.call(n),s?uC(n._inputNodes,s):n._inputNodes=[];for(const p of n._inputNodes)r.call(n,p)}}let tC=null;function GP(n,r){let i=!1;const s=1/r;if(ne("DISABLE_WEBAUDIO")){const l=window.setInterval(()=>{i?window.clearInterval(l):n(performance.now()/1e3)},1e3*s)}else{const l=_d();let h=l.createGain();h.gain.value=0,h.connect(l.destination);const p=()=>{if(i)return void(h=null);const v=l.createOscillator();v.onended=p,v.connect(h),v.start(0),v.stop(l.currentTime+s),n(l.currentTime)};p()}return()=>{i=!0}}class zP{constructor(){w(this,"context",void 0),w(this,"analyserNode",void 0),w(this,"sourceNode",void 0),this.context=_d(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(r){if(r!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch{}this.sourceNode=r,r==null||r.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||Ci()||Cs()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode))return 0;const r=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(r);else{const s=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(s);for(let l=0;l<r.length;++l)r[l]=s[l]/128-1}const i=Mc(r).call(r,(s,l)=>s+l*l,0)/r.length;return Math.max(10*Math.log10(i)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var r,i;(r=this.sourceNode)===null||r===void 0||r.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,(i=this.sourceNode)===null||i===void 0||i.connect(this.analyserNode)}catch{M.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class KP extends xn{get processSourceNode(){return this.sourceNode}set processedNode(r){var i;if(!this.isDestroyed&&this._processedNode!==r){try{var s;(s=this.sourceNode)===null||s===void 0||s.disconnect(this.outputNode)}catch{}(i=this._processedNode)===null||i===void 0||i.disconnect(),this._processedNode=r,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),w(this,"outputNode",void 0),w(this,"outputTrack",void 0),w(this,"isPlayed",!1),w(this,"sourceNode",void 0),w(this,"context",void 0),w(this,"audioBufferNode",void 0),w(this,"destNode",void 0),w(this,"audioOutputLevel",0),w(this,"volumeLevelAnalyser",void 0),w(this,"_processedNode",void 0),w(this,"playNode",void 0),w(this,"isDestroyed",!1),w(this,"onNoAudioInput",void 0),w(this,"isNoAudioInput",!1),w(this,"_noAudioInputCount",0),this.context=_d(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),tu(this.outputNode),this.volumeLevelAnalyser=new zP}startGetAudioBuffer(r){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(r),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=i=>{this.emit(Yi.ON_AUDIO_BUFFER,function(s){for(let l=0;l<s.outputBuffer.numberOfChannels;l+=1){const h=s.outputBuffer.getChannelData(l);for(let p=0;p<h.length;p+=1)h[p]=0}return s.inputBuffer}(i))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Xn().webAudioMediaStreamDest)throw new X(j.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(r){this.context.state!=="running"&&ts(()=>{Gt.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=r||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(r>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;Ci()||Cs()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume();const i=this.volumeLevelAnalyser.getAnalyserNode();let s;i.getFloatTimeDomainData?(s=new Float32Array(i.fftSize),i.getFloatTimeDomainData(s)):(s=new Uint8Array(i.fftSize),i.getByteTimeDomainData(s));let l=!1;for(let h=0;h<s.length;h++)s[h]!==0&&(l=!0);return l?(this.isNoAudioInput=!1,!0):(await ei(200),await this.checkHasAudioInput(r?r+1:1)&&l)}getAudioVolume(){return this.outputNode.gain.value}setVolume(r){this.outputNode.gain.setValueAtTime(r,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var r,i;(r=this.processedNode)===null||r===void 0||r.disconnect(),(i=this.sourceNode)===null||i===void 0||i.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var r;this.processedNode?(r=this.processedNode)===null||r===void 0||r.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class nC extends KP{get isFreeze(){return!1}constructor(r,i,s){var l;if(super(),w(this,"sourceNode",void 0),w(this,"track",void 0),w(this,"clonedTrack",void 0),w(this,"audioElement",void 0),w(this,"isCurrentTrackCloned",!1),w(this,"isRemoteTrack",!1),w(this,"originVolumeLevelAnalyser",void 0),w(this,"rebuildWebAudio",async()=>{if(M.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void M.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>M.info("resume success")),M.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const v=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?v.stop():this.isCurrentTrackCloned=!0;const E=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(E),tu(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const T=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(T,this.context.currentTime),tu(this.outputNode),this.emit(Yi.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=E,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),r.kind!=="audio")throw new X(j.UNEXPECTED_ERROR);this.track=r;const h=new MediaStream([this.track]);if(this.isRemoteTrack=!!i,this.sourceNode=this.context.createMediaStreamSource(h),tu(this.sourceNode),s){const v=s.clone();v.enabled=!0,this.clonedTrack=v,M.debug("create an unmuted track ".concat(v.id," from the original track ").concat(s.id," to get the volume"));const E=this.context.createMediaStreamSource(new MediaStream([v]));tu(E),this.originVolumeLevelAnalyser=new zP,this.originVolumeLevelAnalyser.updateSource(E)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=h;const p=$t();i&&p.os===Kr.IOS&&Number((l=p.osVersion)===null||l===void 0?void 0:l.split(".")[0])<15&&(Gt.on(br.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(v=>{v||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(r){this.sourceNode.disconnect(),this.track=r,this.isCurrentTrackCloned=!1;const i=new MediaStream([r]);this.sourceNode=this.context.createMediaStreamSource(i),tu(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(Yi.UPDATE_SOURCE),this.audioElement.srcObject=i}destroy(){var r;this.audioElement.srcObject=null,this.audioElement.remove(),Gt.off("state-change",this.rebuildWebAudio),(r=this.originVolumeLevelAnalyser)===null||r===void 0||r.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(r){return this.context.createMediaStreamSource(new MediaStream([r]))}updateOriginTrack(r){const i=r.clone();i.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=i),M.debug("create an unmuted track ".concat(i.id," from the original track ").concat(r.id," to get the volume"));const s=this.context.createMediaStreamSource(new MediaStream([i]));tu(s),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(s)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function YP(n,r){const i=(l,h)=>l?typeof l!="number"?l.max||l.exact||l.ideal||l.min||h:l:h,s={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxHeight:i(r.height,1080),maxWidth:i(r.width,1920)}}};return r.frameRate&&typeof r.frameRate!="number"?(s.video.mandatory.maxFrameRate=r.frameRate.max,s.video.mandatory.minFrameRate=r.frameRate.min):typeof r.frameRate=="number"&&(s.video.mandatory.maxFrameRate=r.frameRate),await navigator.mediaDevices.getUserMedia(s)}async function WK(n){const r=await qP(n.mediaSource),i=await function(s){return new Pe((l,h)=>{const p=document.createElement("div");p.innerText="share screen",p.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const v=document.createElement("div");v.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const E=document.createElement("div");E.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",E.setAttribute("style","height: 12%;");const T=document.createElement("div");T.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const y=document.createElement("div");y.setAttribute("style","text-align: right; padding: 16px 0;");const R=document.createElement("button");R.innerHTML="cancel",R.setAttribute("style","width: 85px;"),R.onclick=()=>{document.body.removeChild(k);const V=new Error("NotAllowedError");V.name="NotAllowedError",h(V)},y.appendChild(R),v.appendChild(E),v.appendChild(T),v.appendChild(y);const k=document.createElement("div");k.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),k.appendChild(p),k.appendChild(v),document.body.appendChild(k),s.map(V=>{if(V.id){const $=document.createElement("div");$.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let W=V.thumbnail;const{width:G}=W.getSize();G>1920&&(W=W.resize({width:1920})),$.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+W.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+(V.name.replace(/[\u00A0-\u9999<>\&]/g,function(ie){return"&#"+ie.charCodeAt(0)+";"})+"</span>"),$.onclick=()=>{document.body.removeChild(k),l(V.id)},T.appendChild($)}})})}(r);return await YP(i,n)}async function qP(n){let r=["window","screen"];n!=="application"&&n!=="window"||(r=["window"]),n==="screen"&&(r=["screen"]);const i=XP();if(!i)throw new X(j.ELECTRON_IS_NULL);let s=null;try{var l;s=((l=i.desktopCapturer)===null||l===void 0?void 0:l.getSources({types:r}))||i.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:r})}catch{s=null}s&&s.then||(s=new Pe((h,p)=>{i.desktopCapturer.getSources({types:r},(v,E)=>{v?p(v):h(E)})}));try{return await s}catch(h){throw new X(j.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,h.toString())}}let v0=null;function XP(){if(v0)return v0;try{return v0=window.require("electron"),v0}catch{return null}}function JP(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}const rC=new Ri("safari");let QP=!1,ZP=!1;async function wa(n,r){let i=0,s=null;for(;i<2;)try{s=await GK(n,r,i>0);break}catch(l){if(l instanceof X)throw M.error("[".concat(r,"] ").concat(l.toString())),l;const h=ex(l.name||l.code||l,l.message);if(h.code===j.MEDIA_OPTION_INVALID){M.debug("[".concat(r,"] detect media option invalid, retry")),i+=1,await ei(500);continue}throw M.error("[".concat(r,"] ").concat(h.toString())),h}if(!s)throw new X(j.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return s}async function GK(n,r,i){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new X(j.NOT_SUPPORTED,"can not find getUserMedia");i&&(n.video&&(delete n.video.width,delete n.video.height),n.screen&&(delete n.screen.width,delete n.screen.height));const s=Xn(),l=new MediaStream;if(n.audioSource&&l.addTrack(n.audioSource),n.videoSource&&l.addTrack(n.videoSource),!n.audio&&!n.video&&!n.screen)return M.debug("Using Video Source/ Audio Source"),l;if(n.screen)if(XP())n.screen.sourceId?Sd(l,await YP(n.screen.sourceId,n.screen)):Sd(l,await WK(n.screen));else if(oy()&&n.screen.extensionId&&n.screen.mandatory){if(!s.getStreamFromExtension)throw new X(j.NOT_SUPPORTED,"This browser does not support screen sharing");M.debug("[".concat(r,'] Screen access on chrome stable, looking for extension"'));const k=await(p=n.screen.extensionId,v=r,new Pe((V,$)=>{try{chrome.runtime.sendMessage(p,{getStream:!0},W=>{if(!W||!W.streamId)return M.error("[".concat(v,"] No response from Chrome Plugin. Plugin not installed properly"),W),void $(new X(j.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));V(W.streamId)})}catch(W){M.error("[".concat(v,"] AgoraRTC screensharing plugin is not accessible(").concat(p,")"),W.toString()),$(new X(j.CHROME_PLUGIN_NOT_INSTALL))}}));n.screen.mandatory.chromeMediaSourceId=k,Sd(l,await navigator.mediaDevices.getUserMedia({video:{mandatory:n.screen.mandatory}}))}else if(s.getDisplayMedia){var h;n.screen.mediaSource&&CP(n.screen.mediaSource);const k={width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate,displaySurface:(h=n.screen.displaySurface)!==null&&h!==void 0?h:n.screen.mediaSource==="screen"?"monitor":n.screen.mediaSource},{selfBrowserSurface:V,surfaceSwitching:$,systemAudio:W}=n.screen,G={selfBrowserSurface:V,surfaceSwitching:$,systemAudio:W};!V&&delete G.selfBrowserSurface,!$&&delete G.surfaceSwitching,!W&&delete G.systemAudio,M.debug("[".concat(r,"] getDisplayMedia:"),JSON.stringify({video:k,audio:!!n.screenAudio,controls:G})),Sd(l,await navigator.mediaDevices.getDisplayMedia(function(ie){for(var se=1;se<arguments.length;se++){var ye=arguments[se]!=null?arguments[se]:{};se%2?JP(Object(ye),!0).forEach(function(De){w(ie,De,ye[De])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ie,Object.getOwnPropertyDescriptors(ye)):JP(Object(ye)).forEach(function(De){Object.defineProperty(ie,De,Object.getOwnPropertyDescriptor(ye,De))})}return ie}({video:k,audio:!!n.screenAudio},G)))}else{if(!Mn())throw M.error("[".concat(r,"] This browser does not support screenSharing")),new X(j.NOT_SUPPORTED,"This browser does not support screen sharing");{n.screen.mediaSource&&CP(n.screen.mediaSource);const k={video:{mediaSource:n.screen.mediaSource,width:n.screen.width,height:n.screen.height,frameRate:n.screen.frameRate}};M.debug("[".concat(r,"] getUserMedia: ").concat(JSON.stringify(k))),Sd(l,await navigator.mediaDevices.getUserMedia(k))}}var p,v;if(!n.video&&!n.audio)return l;let E={video:n.video,audio:n.audio},T=ne("MEDIA_DEVICE_CONSTRAINTS");if(T)try{typeof T=="string"&&(T=JSON.parse(T)),E=function k(V,$){if(!iD(V)||!iD($)||Array.isArray(V)&&!Array.isArray($)||!Array.isArray(V)&&Array.isArray($))return $;if(Array.isArray($)&&Array.isArray(V)){const W=[...V];for(let G=0;G<$.length;G++)W[G]=k(V[G],$[G]);return W}{const W=ru({},V);for(const G in $)Object.prototype.hasOwnProperty.call($,G)&&(Object.prototype.hasOwnProperty.call(V,G)?W[G]=k(V[G],$[G]):W[G]=$[G]);return W}}(E,T)}catch{}M.debug("[".concat(r,"] GetUserMedia"),JSON.stringify(E)),$t();let y,R=null;(yi()||Ci()||Zm())&&(R=await rC.lock());try{y=await navigator.mediaDevices.getUserMedia(E)}catch(k){throw R&&R(),k}return E.audio&&(QP=!0),E.video&&(ZP=!0),Sd(l,y),R&&R(),l}function ex(n,r){switch(n){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new X(j.MEDIA_OPTION_INVALID,"".concat(n,": ").concat(r));case"NotFoundError":case"DevicesNotFoundError":return new X(j.DEVICE_NOT_FOUND,"".concat(n,": ").concat(r));case"NotSupportedError":return new X(j.NOT_SUPPORTED,"".concat(n,": ").concat(r));case"NotReadableError":return new X(j.NOT_READABLE,"".concat(n,": ").concat(r));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new X(j.PERMISSION_DENIED,"".concat(n,": ").concat(r));case"ConstraintNotSatisfiedError":return new X(j.CONSTRAINT_NOT_SATISFIED,"".concat(n,": ").concat(r));default:return M.error("getUserMedia unexpected error",n),new X(j.UNEXPECTED_ERROR,"".concat(n,": ").concat(r))}}function Sd(n,r){const i=n.getVideoTracks()[0],s=n.getAudioTracks()[0],l=r.getVideoTracks()[0],h=r.getAudioTracks()[0];h&&(s&&n.removeTrack(s),n.addTrack(h)),l&&(i&&n.removeTrack(i),n.addTrack(l))}const Do=new class extends xn{get state(){return this._state}set state(n){n!==this._state&&(this.emit(tc.STATE_CHANGE,n),this._state=n)}constructor(){super(),w(this,"_state",jc.IDLE),w(this,"isAudioPermitted",!1),w(this,"isVideoPermitted",!1),w(this,"lastDeviceStatus",{audioPermitted:!1,videoPermitted:!1,hasVideoDevice:!1,hasAudioInputDevice:!1,hasAudioOutputDevice:!1}),w(this,"checkDeviceMatched",!1),w(this,"deviceInfoMap",new Map),this.init().then(()=>{var n,r;(n=navigator.mediaDevices)===null||n===void 0||(r=n.addEventListener)===null||r===void 0||r.call(n,"devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(ne("ENUMERATE_DEVICES_INTERVAL")||(e0()||uN()===Kr.HARMONY_OS)&&Yl())&&this.updateDevicesInfo()},ne("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(n=>M.error(n.toString()))}async enumerateDevices(n,r){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new X(j.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const s=await navigator.mediaDevices.enumerateDevices(),l=await this.checkMediaDeviceStatus(s);l.audioPermitted&&(this.isAudioPermitted=!0),l.videoPermitted&&(this.isVideoPermitted=!0);let h=n,p=r;(this.isAudioPermitted||!l.hasAudioInputDevice||this.lastDeviceStatus.hasAudioInputDevice)&&(h=!1),(this.isVideoPermitted||!l.hasVideoDevice||this.lastDeviceStatus.hasVideoDevice)&&(p=!1);let v=null;if(!i&&(h||p)){if(rC.isLocked&&(M.debug("[device manager] wait GUM lock"),(await rC.lock())(),M.debug("[device manager] GUM unlock")),QP&&(h=!1,this.isAudioPermitted=!0),ZP&&(p=!1,this.isVideoPermitted=!0),M.debug("[device manager] check media device permissions",n,r,h,p),h||p){try{v=await navigator.mediaDevices.getUserMedia({audio:h,video:p})}catch(E){const T=ex(E.name||E.code||E,E.message);if(T.code===j.PERMISSION_DENIED)throw T;M.warning("getUserMedia failed in getDevices",T)}h&&(this.isAudioPermitted=!0),p&&(this.isVideoPermitted=!0)}M.debug("[device manager] mic permission",n,"cam permission",r)}v&&v.getTracks().forEach(E=>E.stop()),v=null;try{return navigator.mediaDevices.enumerateDevices()}catch(E){return new X(j.ENUMERATE_DEVICES_FAILED,E.toString()).throw()}}async getRecordingDevices(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,n)).filter(r=>r.kind==="audioinput")}async getCamerasDevices(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,n)).filter(r=>r.kind==="videoinput")}async getSpeakers(){let n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,n)).filter(r=>r.kind==="audiooutput")}searchDeviceIdByName(n){let r=null;return this.deviceInfoMap.forEach(i=>{i.device.label===n&&(r=i.device.deviceId)}),r}async getDeviceById(n){const r=(await this.enumerateDevices(!0,!0,!0)).find(i=>i.deviceId===n);if(!r)throw new X(j.DEVICE_NOT_FOUND,"deviceId: ".concat(n));return r}async init(){this.state=jc.INITING;try{await this.updateDevicesInfo(),this.state=jc.INITEND}catch(n){if(n instanceof X&&[j.DEVICE_NOT_FOUND,j.PERMISSION_DENIED].includes(n.code))return void(this.state=jc.INITEND);throw M.warning("Device Detection functionality cannot start properly.",n.toString()),this.state=jc.IDLE,!function(){return typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1"}()&&new X(j.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),n}}async updateDevicesInfo(){let n=[];try{n=await this.enumerateDevices(!0,!0,this.lastDeviceStatus.audioPermitted&&this.lastDeviceStatus.videoPermitted)}catch(l){if(l instanceof X&&l.code===j.PERMISSION_DENIED){const h=await this.checkMediaDeviceStatus();this.lastDeviceStatus.hasAudioInputDevice=h.hasAudioInputDevice,this.lastDeviceStatus.hasAudioOutputDevice=h.hasAudioOutputDevice,this.lastDeviceStatus.hasVideoDevice=h.hasVideoDevice}throw l}const r=Date.now(),i=[];if(n[0]&&n[0].label&&this.checkDeviceMatched===!1){this.checkDeviceMatched=!0;const l=n.find(p=>p.kind==="audioinput"&&p.deviceId==="default"),h=n.find(p=>p.kind==="audiooutput"&&p.deviceId==="default");l&&h?h.groupId===l.groupId?M.debug("[device-check] default input ".concat(l.label," and output ").concat(h.label," is the same group")):M.warning("[device-check] default input ".concat(l.label," and output ").concat(h.label," is not the same group")):M.debug("[device-check] default input or output not found")}const s=await this.checkMediaDeviceStatus(n);n.forEach(l=>{if(!l.deviceId)return;const h=this.deviceInfoMap.get("".concat(l.kind,"_").concat(l.deviceId));if((h?h.state:"INACTIVE")!=="ACTIVE"){const p={initAt:r,updateAt:r,device:l,state:"ACTIVE"};this.deviceInfoMap.set("".concat(l.kind,"_").concat(l.deviceId),p),i.push(p)}h&&(h.updateAt=r)}),this.deviceInfoMap.forEach((l,h)=>{l.state==="ACTIVE"&&l.updateAt!==r&&(l.state="INACTIVE",i.push(l))}),this.state===jc.INITEND&&i.forEach(l=>{switch(l.device.kind){case"audioinput":(this.lastDeviceStatus.audioPermitted||!this.lastDeviceStatus.hasAudioInputDevice)&&this.isAudioPermitted&&this.emit(tc.RECORDING_DEVICE_CHANGED,l);break;case"videoinput":(this.lastDeviceStatus.videoPermitted||!this.lastDeviceStatus.hasVideoDevice)&&this.isVideoPermitted&&this.emit(tc.CAMERA_DEVICE_CHANGED,l);break;case"audiooutput":(this.lastDeviceStatus.audioPermitted||!this.lastDeviceStatus.hasAudioOutputDevice)&&this.isAudioPermitted&&this.emit(tc.PLAYOUT_DEVICE_CHANGED,l)}}),s.audioPermitted&&(this.lastDeviceStatus.audioPermitted=!0,this.isAudioPermitted=!0),s.videoPermitted&&(this.lastDeviceStatus.videoPermitted=!0,this.isVideoPermitted=!0),this.lastDeviceStatus.hasAudioInputDevice=s.hasAudioInputDevice,this.lastDeviceStatus.hasAudioOutputDevice=s.hasAudioOutputDevice,this.lastDeviceStatus.hasVideoDevice=s.hasVideoDevice}async checkMediaDeviceStatus(n){if(!n)try{n=await navigator.mediaDevices.enumerateDevices()}catch(h){return new X(j.ENUMERATE_DEVICES_FAILED,h.toString()).throw()}const r=n.filter(h=>h.kind==="audioinput"),i=n.filter(h=>h.kind==="audiooutput"),s=n.filter(h=>h.kind==="audioinput"||h.kind==="audiooutput"),l=n.filter(h=>h.kind==="videoinput");return{audioPermitted:s.some(h=>h.label&&h.deviceId),videoPermitted:l.some(h=>h.label&&h.deviceId),hasAudioDevice:s.length>0,hasVideoDevice:l.length>0,hasAudioInputDevice:r.length>0,hasAudioOutputDevice:i.length>0}}},zK=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],fo=new class{constructor(){w(this,"onAutoplayFailed",void 0),w(this,"elementMap",new Map),w(this,"elementStateMap",new Map),w(this,"elementsNeedToResume",[]),w(this,"sinkIdMap",new Map),w(this,"autoResumeAfterInterruption",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[r,i]=n;const s=this.elementStateMap.get(r),l=i.srcObject.getAudioTracks()[0];od()?l&&l.readyState==="live"&&Gt.curState==="running"&&(M.debug("auto resume after interruption for iOS 15"),i.pause(),i.play()):s&&s==="paused"&&l&&l.readyState==="live"&&Gt.curState==="running"&&(M.debug("auto resume after interruption for iOS"),i.play())})}),w(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{Array.from(this.elementMap.entries()).forEach(n=>{let[r,i]=n;const s=i.srcObject.getAudioTracks()[0];s&&s.readyState==="live"&&(M.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),i.pause(),i.play())})}),this.autoResumeAudioElement(),Gt.on(br.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Gt.on(br.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),Gt.on(br.STATE_CHANGE,()=>{Ci()&&Gt.prevState==="suspended"&&Gt.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(n,r){const i=this.elementMap.get(n);if(this.sinkIdMap.set(n,r),i)try{await i.setSinkId(r)}catch(s){throw new X(j.PERMISSION_DENIED,"can not set sink id: "+s.toString())}}play(n,r,i,s){if(this.elementMap.has(r))return;const l=document.createElement("audio");l.autoplay=!0,l.srcObject=new MediaStream([n]),this.bindAudioElementEvents(r,l),this.elementMap.set(r,l),this.elementStateMap.set(r,qr.INIT),this.setVolume(r,i);const h=this.sinkIdMap.get(r);if(h)try{l.setSinkId(h).catch(v=>{M.warning("[".concat(r,"] set sink id failed"),v.toString())})}catch(v){M.warning("[".concat(r,"] set sink id failed"),v.toString())}const p=l.play();p&&p.then&&p.catch(v=>{s&&Me.autoplayFailed(s,"audio",v.message,r),M.warning("audio element play warning",v.toString()),this.elementMap.has(r)&&v.name==="NotAllowedError"&&(M.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(l),ts(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),VP()}))})}updateTrack(n,r){const i=this.elementMap.get(n);i&&(i.srcObject=new MediaStream([r]))}isPlaying(n){return this.elementMap.has(n)&&this.elementStateMap.get(n)==="playing"}setVolume(n,r){const i=this.elementMap.get(n);i&&(r=Math.max(0,Math.min(100,r)),i.volume=r/100)}stop(n){const r=this.elementMap.get(n);if(this.sinkIdMap.delete(n),!r)return;const i=this.elementsNeedToResume.indexOf(r);this.elementsNeedToResume.splice(i,1),r.srcObject=null,r.remove(),this.elementMap.delete(n),this.elementStateMap.delete(n)}bindAudioElementEvents(n,r){zK.forEach(i=>{r.addEventListener(i,s=>{const l=this.elementStateMap.get(n),h=s.type==="pause"?"paused":s.type;if(M.debug("[".concat(n,"] audio-element-status change ").concat(l," => ").concat(h)),s.type==="error"){const p=r==null?void 0:r.error;p&&M.error("[".concat(n,"] media error, code: ").concat(p.code,", message: ").concat(p.message))}this.elementStateMap.set(n,h)})})}getPlayerState(n){return this.elementStateMap.get(n)||"uninit"}autoResumeAudioElement(){const n=()=>{this.elementsNeedToResume.forEach(r=>{r.play().then(i=>{M.debug("Auto resume audio element success")}).catch(i=>{M.warning("Auto resume audio element failed!",i)})}),this.elementsNeedToResume=[]};new Pe(r=>{document.body?r():window.addEventListener("load",()=>r())}).then(()=>{ip()?document.body.addEventListener("click",n,!0):(document.body.addEventListener("touchstart",n,!0),document.body.addEventListener("mousedown",n,!0))})}};function Vn(){return function(n,r,i){const s=i.value;return typeof s=="function"&&(i.value=function(){this._isClosed&&new X(j.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var l=arguments.length,h=new Array(l),p=0;p<l;p++)h[p]=arguments[p];const v=s.apply(this,h);return v instanceof Pe?new Pe((E,T)=>{v.then(E).catch(T)}):v}),i}}var KK=Lc("Array").values,YK=Uc,qK=xr,XK=C,JK=KK,iC=Array.prototype,QK={DOMTokenList:!0,NodeList:!0},bs=function(n){var r=n.values;return n===iC||XK(iC,n)&&r===iC.values||qK(QK,YK(n))?JK:r};function tx(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function E0(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?tx(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):tx(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class nx extends xn{constructor(r){super(),w(this,"name","VideoProcessorDestination"),w(this,"ID","0"),w(this,"_source",void 0),w(this,"videoContext",void 0),w(this,"inputTrack",void 0),this.videoContext=r}get kind(){return"video"}get enabled(){return!0}pipe(){throw new X(j.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new X(j.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(r){if(r.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);r.track&&r.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=r.track,this.emit(Qr.ON_TRACK,r.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(Qr.ON_TRACK,void 0)}}class rx extends xn{set chained(r){this._chained=r}get chained(){return this._chained}constructor(r,i){super(),w(this,"constraintsMap",new Map),w(this,"statsRegistry",[]),w(this,"usageRegistry",[]),w(this,"trackId",void 0),w(this,"direction",void 0),w(this,"_chained",!1),this.trackId=r,this.direction=i}async getConstraints(){return await ti(this,qi.REQUEST_CONSTRAINTS)}async requestApplyConstraints(r,i){var s;return M.info("processor ".concat(i.name," requestApplyConstraints for ").concat(this.trackId)),r&&this.constraintsMap.set(i,r),Fn(this,qi.REQUEST_UPDATE_CONSTRAINTS,Array.from(bs(s=this.constraintsMap).call(s)))}async requestRevertConstraints(r){var i;if(this.constraintsMap.has(r))return M.info("processor ".concat(r.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(r),Fn(this,qi.REQUEST_UPDATE_CONSTRAINTS,Array.from(bs(i=this.constraintsMap).call(i)))}registerStats(r,i,s){this.statsRegistry.find(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===i)||this.statsRegistry.push({processorName:r.name,processorID:r.ID,type:i,cb:s})}unregisterStats(r,i){const s=this.statsRegistry.findIndex(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===i);s!==-1&&this.statsRegistry.splice(s,1)}gatherStats(){const r=[];for(const{processorID:i,processorName:s,type:l,cb:h}of this.statsRegistry)try{const p=h();r.push({processorID:i,processorName:s,type:l,stats:p})}catch(p){M.error(new X(j.UNEXPECTED_ERROR,p.message))}return r}registerUsage(r,i){this.usageRegistry.find(s=>s.processorID===r.ID&&s.processorName===r.name)||this.usageRegistry.push({processorID:r.ID,processorName:r.name,cb:i})}unregisterUsage(r){const i=this.usageRegistry.findIndex(s=>s.processorID===r.ID&&s.processorName===r.name);i!==-1&&this.usageRegistry.splice(i,1)}async gatherUsage(){const r=[];if(!this.chained)return[];for(const{cb:i}of this.usageRegistry)try{let s=i();s instanceof Pe&&(s=await s),r.push(E0(E0({},s),{},{direction:this.direction}))}catch(s){M.error("gather extension usage error",s)}return r}getDirection(){return this.direction}}class ix extends xn{constructor(r){super(),w(this,"name","AudioProcessorDestination"),w(this,"ID","0"),w(this,"inputTrack",void 0),w(this,"inputNode",void 0),w(this,"audioProcessorContext",void 0),w(this,"_source",void 0),this.audioProcessorContext=r}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new X(j.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new X(j.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(Qr.ON_TRACK,void 0),this.emit(Qr.ON_NODE,void 0)}updateInput(r){if(r.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);r.track&&this.inputTrack!==r.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=r.track,this.emit(Qr.ON_TRACK,this.inputTrack)),r.node&&this.inputNode!==r.node&&(this.audioProcessorContext.chained=!0,this.inputNode=r.node,this.emit(Qr.ON_NODE,this.inputNode))}}class ox extends xn{set chained(r){this._chained=r}get chained(){return this._chained}constructor(r,i,s){super(),w(this,"constraintsMap",new Map),w(this,"statsRegistry",[]),w(this,"audioContext",void 0),w(this,"trackId",void 0),w(this,"direction",void 0),w(this,"usageRegistry",[]),w(this,"_chained",!1),this.audioContext=r,this.trackId=i,this.direction=s}async getConstraints(){return ti(this,qi.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(r,i){var s;return M.info("processor ".concat(i.name," requestApplyConstraints for ").concat(this.trackId)),r&&this.constraintsMap.set(i,r),Fn(this,qi.REQUEST_UPDATE_CONSTRAINTS,Array.from(bs(s=this.constraintsMap).call(s)))}async requestRevertConstraints(r){var i;if(this.constraintsMap.has(r))return this.constraintsMap.delete(r),Fn(this,qi.REQUEST_UPDATE_CONSTRAINTS,Array.from(bs(i=this.constraintsMap).call(i)))}registerStats(r,i,s){this.statsRegistry.find(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===i)||this.statsRegistry.push({processorName:r.name,processorID:r.ID,type:i,cb:s})}unregisterStats(r,i){const s=this.statsRegistry.findIndex(l=>l.processorID===r.ID&&l.processorName===r.name&&l.type===i);s!==-1&&this.statsRegistry.splice(s,1)}gatherStats(){const r=[];for(const{processorID:i,processorName:s,type:l,cb:h}of this.statsRegistry)try{const p=h();r.push({processorID:i,processorName:s,type:l,stats:p})}catch(p){M.error(new X(j.UNEXPECTED_ERROR,p.message))}return r}registerUsage(r,i){this.usageRegistry.find(s=>s.processorID===r.ID&&s.processorName===r.name)||this.usageRegistry.push({processorID:r.ID,processorName:r.name,cb:i})}unregisterUsage(r){const i=this.usageRegistry.findIndex(s=>s.processorID===r.ID&&s.processorName===r.name);i!==-1&&this.usageRegistry.splice(i,1)}async gatherUsage(){const r=[];if(!this.chained)return[];for(const{cb:i}of this.usageRegistry)try{let s=i();s instanceof Pe&&(s=await s),r.push(E0(E0({},s),{},{direction:this.direction}))}catch(s){M.error("gather extension usage error",s)}return r}getDirection(){return this.direction}}class oC extends xn{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),w(this,"context",void 0),w(this,"processSourceNode",void 0),w(this,"outputTrack",void 0),w(this,"processedNode",void 0),w(this,"clonedTrack",void 0),w(this,"outputNode",void 0),this.outputNode=new ZK}setVolume(){}createOutputTrack(){throw new X(j.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class ZK{disconnect(){}connect(){}}let _0,yd=null;class eY{constructor(){w(this,"state","open"),w(this,"trigger",void 0),w(this,"tasks",[]),M.debug("[macro-task-queue] is created."),this.trigger=setTimeout(()=>{this.state="closed",M.debug("[macro-task-queue] will be closed, all remaining tasks will execute. [".concat(this.tasks.map(r=>r.key),"]")),this.trigger=void 0,this.tasks.forEach(r=>{let{func:i}=r;return i()}),this.tasks.length=0,M.debug("[macro-task-queue] is closed.")})}enqueue(r,i){this.state!=="closed"&&(this.tasks.push({key:r,func:i}),M.debug("[macro-task-queue] is queued, current queue ".concat(this.tasks.length,". ").concat(typeof r=="string"?r:"")))}runTask(r){if(this.state==="closed")return;const i=this.tasks.findIndex(s=>s.key===r);if(i!==-1){const s=this.tasks.splice(i,1);M.debug("[macro-task-queue] is unqueued, current queue ".concat(this.tasks.length,". ").concat(typeof r=="string"?r:"")),s[0].func()}}release(){this.trigger&&(this.state="closed",clearTimeout(this.trigger),this.trigger=void 0,this.tasks.length=0,M.debug("[macro-task-queue] is closed."))}}function aC(n){return function(r,i,s){var l;const h=(l=s.value)!==null&&l!==void 0?l:s.get,p=function(){yd&&yd.state==="open"&&yd.runTask(n);for(var v=arguments.length,E=new Array(v),T=0;T<v;T++)E[T]=arguments[T];return h==null?void 0:h.apply(this,...E)};return s.value?s.value=p:s.get=p,s}}var ax,sx,cx,lx,ux,dx,hx,px,fx,mx,gx,vx,Ex,_x,Sx,yx,Cx,Tx,bx,Rx,Ix,zt,wx,Ox,Ax,Nx,Px,xx,Rs,Dx,kx,Lx,Mx,Ux,Vx,Fx,Bx,jx,Hx,$x,Wx,pi;function Gx(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function sC(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Gx(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Gx(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}(function(n){n.UPDATE_TRACK_SOURCE="update-track-source"})(_0||(_0={}));let Zr=(ax=aC("INIT_WEBAUDIO"),sx=aC("INIT_WEBAUDIO"),cx=aC("INIT_WEBAUDIO"),lx=Ge({argsMap:(n,r)=>[n.getTrackId(),r],throttleTime:300}),ux=Ge({argsMap:(n,r)=>[n.getTrackId(),r]}),dx=Vn(),hx=Ed("LocalAudioTrack","_enabledMutex"),px=Ge({argsMap:(n,r)=>[n.getTrackId(),r]}),fx=Vn(),mx=Ed("LocalAudioTrack","_enabledMutex"),gx=Ge({argsMap:(n,r)=>[n.getTrackId(),r]}),vx=Vn(),Ex=Vn(),_x=Vn(),Sx=Ge({argsMap:n=>[n.getTrackId()]}),yx=Vn(),Cx=Ge({argsMap:n=>[n.getTrackId()]}),Tx=Vn(),bx=Ge({argsMap:n=>[n.getTrackId()]}),Rx=Ge({argsMap:(n,r)=>[n.getTrackId(),r.name]}),Ix=Ge({argsMap:n=>[n.getTrackId()]}),_e((zt=class extends eC{get _source(){return this._trackSource}set _source(n){this._trackSource=n}get processorContext(){return this._processorContext}set processorContext(n){this._processorContext=n}get processorDestination(){return this._processorDestination}set processorDestination(n){this._processorDestination=n}get isPlaying(){return this._useAudioElement?fo.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(n,r,i,s,l){super(n,i),w(this,"trackMediaType","audio"),w(this,"_encoderConfig",void 0),w(this,"_trackSource",void 0),w(this,"_enabled",!0),w(this,"_volume",100),w(this,"_useAudioElement",!1),w(this,"_bypassWebAudio",!1),w(this,"processor",void 0),w(this,"_processorContext",void 0),w(this,"_processorDestination",void 0),w(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=r,this._getOriginVolumeLevel=!!s;const h=()=>{this.processorContext=new ox(this._source.context,this.getTrackId(),"local"),this.processorDestination=new ix(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(Yi.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})},p=l&&yi()&&!WP();ne("DISABLE_WEBAUDIO")?(this._source=new oC,this._useAudioElement=!0,this._bypassWebAudio=!0):p?this._source=new oC:(this._source=new nC(n,!1,this._getOriginVolumeLevel?n:void 0),ne("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0)),h(),!ne("DISABLE_WEBAUDIO")&&p&&(yd||(yd=new eY),yd).enqueue("INIT_WEBAUDIO",()=>{this._source=new nC(n,!1,this._getOriginVolumeLevel?n:void 0),ne("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0),h(),this.emit(_0.UPDATE_TRACK_SOURCE)})}setVolume(n){ln(n,"volume",0,1e3),this._volume=n,this._source.setVolume(n/100),this._useAudioElement&&fo.setVolume(this.getTrackId(),n);try{if(this._bypassWebAudio)return void M.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const r=this._source.createOutputTrack();this._mediaStreamTrack!==r&&(this._mediaStreamTrack=r,Fn(this,Ze.NEED_REPLACE_TRACK,this).then(()=>{M.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(i=>{M.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),i)}))}catch{}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(n){if(!this._useAudioElement)throw new X(j.NOT_SUPPORTED,"your browser does not support setting the audio output device");await fo.setSinkID(this.getTrackId(),n)}async setEnabled(n,r,i){return this._setEnabled(n,r,i)}async _setEnabled(n,r,i){if(!i){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(M.info("[".concat(this.getTrackId(),"] start setEnabled"),n),n){this._originMediaStreamTrack.enabled=!0;try{i||(this._enabled=!0),await Fn(this,Ze.NEED_ENABLE_TRACK,this),M.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(n," success"))}catch(s){throw i||(this._enabled=!1),M.error("[".concat(this.getTrackId(),"] setEnabled to true error"),s.toString()),s}}else{this._originMediaStreamTrack.enabled=!1,i||(this._enabled=!1);try{await Fn(this,Ze.NEED_DISABLE_TRACK,this)}catch(s){throw i||(this._enabled=!0),M.error("[".concat(this.getTrackId(),"] setEnabled to false error"),s.toString()),s}}}async setMuted(n){n!==this._muted&&(this.stateCheck("muted",n),this._muted=n,this._originMediaStreamTrack.enabled=!n,M.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(n)),n?await Fn(this,Ze.NEED_MUTE_TRACK,this):await Fn(this,Ze.NEED_UNMUTE_TRACK,this))}getStats(){return pp(()=>{M.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),Oa(this,Ze.GET_STATS)||sC({},By)}setAudioFrameCallback(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!n)return this._source.removeAllListeners(Yi.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(r),this._source.removeAllListeners(Yi.ON_AUDIO_BUFFER),this._source.on(Yi.ON_AUDIO_BUFFER,i=>n(i))}play(){M.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(M.debug("[".concat(this.getTrackId(),"] start audio playback in element")),fo.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){M.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?fo.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];M.debug("[".concat(this.getTrackId(),"] update player source track")),n&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&fo.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(n,r){this._originMediaStreamTrack!==n&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),n.addEventListener("ended",this._handleTrackEnded),r&&this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=n,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this.processor.updateInput({track:n,context:this.processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Fn(this,Ze.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(n))}renewMediaStreamTrack(n){return Pe.resolve(void 0)}pipe(n){if(this._bypassWebAudio)throw new X(j.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===n)return n;if(n._source)throw new X(j.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),n}unpipe(){var n;if(!this.processor)return;const r=this.processor;(n=this._source.processSourceNode)===null||n===void 0||n.disconnect(),this.processor._source=!1,this.processor=void 0,r.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Qr.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(n),await Fn(this,Ze.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Fn(this,Ze.NEED_REPLACE_TRACK,this))}),this.processorDestination.on(Qr.ON_NODE,n=>{this._source.processedNode=n})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Qr.ON_TRACK),this.processorDestination.removeAllListeners(Qr.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(qi.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(qi.REQUEST_CONSTRAINTS)}}).prototype,"_source",[ax],Object.getOwnPropertyDescriptor(zt.prototype,"_source"),zt.prototype),_e(zt.prototype,"processorContext",[sx],Object.getOwnPropertyDescriptor(zt.prototype,"processorContext"),zt.prototype),_e(zt.prototype,"processorDestination",[cx],Object.getOwnPropertyDescriptor(zt.prototype,"processorDestination"),zt.prototype),_e(zt.prototype,"setVolume",[lx],Object.getOwnPropertyDescriptor(zt.prototype,"setVolume"),zt.prototype),_e(zt.prototype,"setPlaybackDevice",[ux,dx],Object.getOwnPropertyDescriptor(zt.prototype,"setPlaybackDevice"),zt.prototype),_e(zt.prototype,"setEnabled",[hx,px,fx],Object.getOwnPropertyDescriptor(zt.prototype,"setEnabled"),zt.prototype),_e(zt.prototype,"setMuted",[mx,gx,vx],Object.getOwnPropertyDescriptor(zt.prototype,"setMuted"),zt.prototype),_e(zt.prototype,"getStats",[Ex],Object.getOwnPropertyDescriptor(zt.prototype,"getStats"),zt.prototype),_e(zt.prototype,"setAudioFrameCallback",[_x],Object.getOwnPropertyDescriptor(zt.prototype,"setAudioFrameCallback"),zt.prototype),_e(zt.prototype,"play",[Sx,yx],Object.getOwnPropertyDescriptor(zt.prototype,"play"),zt.prototype),_e(zt.prototype,"stop",[Cx,Tx],Object.getOwnPropertyDescriptor(zt.prototype,"stop"),zt.prototype),_e(zt.prototype,"close",[bx],Object.getOwnPropertyDescriptor(zt.prototype,"close"),zt.prototype),_e(zt.prototype,"pipe",[Rx],Object.getOwnPropertyDescriptor(zt.prototype,"pipe"),zt.prototype),_e(zt.prototype,"unpipe",[Ix],Object.getOwnPropertyDescriptor(zt.prototype,"unpipe"),zt.prototype),zt),S0=(wx=Ge({argsMap:(n,r)=>[n.getTrackId(),r]}),Ox=Vn(),Ax=Ed("MicrophoneAudioTrack","_enabledMutex"),Nx=Ge({argsMap:(n,r,i)=>[n.getTrackId(),r,i]}),Px=Vn(),xx=Ge({argsMap:n=>[n.getTrackId()]}),_e((Rs=class extends Zr{get __className__(){return"MicrophoneAudioTrack"}constructor(n,r,i,s){super(n,r.encoderConfig?h0(r.encoderConfig):{},s,ne("GET_VOLUME_OF_MUTED_AUDIO_TRACK"),!0),w(this,"_config",void 0),w(this,"_deviceName","default"),w(this,"_constraints",void 0),w(this,"_originalConstraints",void 0),w(this,"_enabled",!0),this._config=r,this._constraints=i,this._originalConstraints=i,this._deviceName=n.label,typeof r.bypassWebAudio=="boolean"&&(this._bypassWebAudio=r.bypassWebAudio),(od()||sy())&&Gt.bindInterruptDetectorTrack(this),this.on(_0.UPDATE_TRACK_SOURCE,()=>{this.bindProcessorContextEvents()}),WP()&&this.bindProcessorContextEvents()}async setDevice(n){if(M.info("[".concat(this.getTrackId(),"] start set device to ").concat(n)),this._enabled)try{const r=await Do.getDeviceById(n),i={};i.audio=sC({},this._constraints),i.audio.deviceId={exact:n},this._originMediaStreamTrack.stop();let s=null;try{s=await wa(i,this.getTrackId())}catch(l){throw M.error("[".concat(this.getTrackId(),"] setDevice failed"),l.toString()),s=await wa({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(s.getAudioTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(s.getAudioTracks()[0],!1),this._deviceName=r.label,this._config.microphoneId=n,this._constraints.deviceId={exact:n}}catch(r){throw M.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}else try{const r=await Do.getDeviceById(n);this._deviceName=r.label,this._config.microphoneId=n,this._constraints.deviceId={exact:n}}catch(r){throw M.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}M.info("[".concat(this.getTrackId(),"] set device to ").concat(n," success"))}async setEnabled(n,r,i){if(r)return M.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(n);if(!i){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(M.info("[".concat(this.getTrackId(),"] start setEnabled"),n),!n){var s;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),(s=this._source.clonedTrack)===null||s===void 0||s.stop(),i||(this._enabled=!1);try{await Fn(this,Ze.NEED_DISABLE_TRACK,this)}catch(p){throw M.error("[".concat(this.getTrackId(),"] setEnabled false failed"),p.toString()),p}return}const l=sC({},this._constraints),h=Do.searchDeviceIdByName(this._deviceName);h&&!l.deviceId&&(l.deviceId=h);try{i||(this._enabled=!0);const p=await wa({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(p.getAudioTracks()[0],!1),await Fn(this,Ze.NEED_ENABLE_TRACK,this)}catch(p){throw i||(this._enabled=!1),M.error("[".concat(this.getTrackId(),"] setEnabled true failed"),p.toString()),p}M.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(od()||sy())&&Gt.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Ci()||Cs())&&this._enabled&&!this._isClosed&&Gt.duringInterruption){const n=async()=>{Gt.off(br.IOS_INTERRUPTION_END,n),this._enabled&&!this._isClosed&&(M.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Gt.on(br.IOS_INTERRUPTION_END,n)}else M.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Wc.TRACK_ENDED)}async renewMediaStreamTrack(n){const r=n||this._constraints,i=Do.searchDeviceIdByName(this._deviceName);if(i&&!r.deviceId&&(r.deviceId=i),this._constraints=r,this._enabled){this._originMediaStreamTrack.stop();const s=await wa({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(s.getAudioTracks()[0],!0)}}bindProcessorContextEvents(){this.processorContext.on(qi.REQUEST_UPDATE_CONSTRAINTS,async(n,r,i)=>{try{const s=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(s),r()}catch(s){i(s)}}),this.processorContext.on(qi.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[wx,Ox],Object.getOwnPropertyDescriptor(Rs.prototype,"setDevice"),Rs.prototype),_e(Rs.prototype,"setEnabled",[Ax,Nx,Px],Object.getOwnPropertyDescriptor(Rs.prototype,"setEnabled"),Rs.prototype),_e(Rs.prototype,"close",[xx],Object.getOwnPropertyDescriptor(Rs.prototype,"close"),Rs.prototype),Rs),tY=(Dx=Ge({argsMap:(n,r)=>[n.getTrackId(),r,n.duration]}),kx=Vn(),Lx=Ge({argsMap:n=>[n.getTrackId()]}),Mx=Vn(),Ux=Ge({argsMap:n=>[n.getTrackId()]}),Vx=Vn(),Fx=Ge({argsMap:n=>[n.getTrackId()]}),Bx=Vn(),jx=Ge({argsMap:n=>[n.getTrackId()]}),Hx=Vn(),$x=Ge({argsMap:n=>[n.getTrackId()]}),Wx=Vn(),_e((pi=class extends Zr{get __className__(){return"BufferSourceAudioTrack"}constructor(n,r,i,s){super(r.createOutputTrack(),i,s),w(this,"source",void 0),w(this,"_bufferSource",void 0),this.source=n,this._bufferSource=r,this._bufferSource.on(Yi.AUDIO_SOURCE_STATE_CHANGE,l=>{this.safeEmit(Wc.SOURCE_STATE_CHANGE,l)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(n){n&&this._bufferSource.updateOptions(n),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(n){this._bufferSource.seekAudioBuffer(n)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}setAudioBufferPlaybackSpeed(n){ln(n,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(n)}}).prototype,"startProcessAudioBuffer",[Dx,kx],Object.getOwnPropertyDescriptor(pi.prototype,"startProcessAudioBuffer"),pi.prototype),_e(pi.prototype,"pauseProcessAudioBuffer",[Lx,Mx],Object.getOwnPropertyDescriptor(pi.prototype,"pauseProcessAudioBuffer"),pi.prototype),_e(pi.prototype,"seekAudioBuffer",[Ux,Vx],Object.getOwnPropertyDescriptor(pi.prototype,"seekAudioBuffer"),pi.prototype),_e(pi.prototype,"resumeProcessAudioBuffer",[Fx,Bx],Object.getOwnPropertyDescriptor(pi.prototype,"resumeProcessAudioBuffer"),pi.prototype),_e(pi.prototype,"stopProcessAudioBuffer",[jx,Hx],Object.getOwnPropertyDescriptor(pi.prototype,"stopProcessAudioBuffer"),pi.prototype),_e(pi.prototype,"setAudioBufferPlaybackSpeed",[$x,Wx],Object.getOwnPropertyDescriptor(pi.prototype,"setAudioBufferPlaybackSpeed"),pi.prototype),pi);class Xi extends Zr{get __className__(){return"MixingAudioTrack"}get isActive(){for(const r of this.trackList)if(r._enabled&&!r._isClosed&&!r.muted)return!0;return!1}constructor(){const r=_d().createMediaStreamDestination();super(r.stream.getAudioTracks()[0],void 0,_n(8,"track-mix-")),w(this,"trackList",void 0),w(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=r,this.trackList=[]}hasAudioTrack(r){return this.trackList.indexOf(r)!==-1}addAudioTrack(r){this.trackList.indexOf(r)===-1?(M.debug("add ".concat(r.getTrackId()," to mixing track")),r._source.outputNode.connect(this.destNode),this.trackList.push(r),this.updateEncoderConfig()):M.debug("track ".concat(r.getTrackId()," is already added"))}removeAudioTrack(r){if(this.trackList.indexOf(r)!==-1){M.debug("remove ".concat(r.getTrackId()," from mixing track"));try{r._source.outputNode.disconnect(this.destNode)}catch{}uC(this.trackList,r),this.updateEncoderConfig()}}updateEncoderConfig(){const r={};this.trackList.forEach(i=>{i._encoderConfig&&((i._encoderConfig.bitrate||0)>(r.bitrate||0)&&(r.bitrate=i._encoderConfig.bitrate),(i._encoderConfig.sampleRate||0)>(r.sampleRate||0)&&(r.sampleRate=i._encoderConfig.sampleRate),(i._encoderConfig.sampleSize||0)>(r.sampleSize||0)&&(r.sampleSize=i._encoderConfig.sampleSize),i._encoderConfig.stereo&&(r.stereo=!0))}),this._encoderConfig=r}_updateRtpTransceiver(r){this._rtpTransceiver!==r&&(this._rtpTransceiver=r,this.trackList.forEach(i=>{i instanceof Xi?i.emit(up.TRANSCEIVER_UPDATED,r):i._updateRtpTransceiver(r)}))}}class nY extends xn{constructor(){super(...arguments),w(this,"resultStorage",new Map)}setLocalAudioStats(r,i,s){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",r,this.checkAudioInputLevel(s,i)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",r,this.checkSendAudioBitrate(s,i))}setLocalVideoStats(r,i,s){this.record("SEND_VIDEO_BITRATE_TOO_LOW",r,this.checkSendVideoBitrate(s,i)),this.record("FRAMERATE_INPUT_TOO_LOW",r,this.checkFramerateInput(s,i)),this.record("FRAMERATE_SENT_TOO_LOW",r,this.checkFramerateSent(s))}setRemoteAudioStats(r,i){const s=r.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",s,this.checkAudioOutputLevel(i))}setRemoteVideoStats(r,i){const s=r.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",s,this.checkVideoDecode(i))}record(r,i,s){if(ne("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(r)||this.resultStorage.set(r,{result:[],isPrevNormal:!0});const l=this.resultStorage.get(r);if(l&&(l.result.push(s),l.result.length>=5)){const h=l.result.includes(!0);l.isPrevNormal&&!h&&this.emit("exception",zx[r],r,i),!l.isPrevNormal&&h&&this.emit("exception",zx[r]+2e3,r+"_RECOVER",i),l.isPrevNormal=h,l.result=[]}}checkAudioOutputLevel(r){return!(r.receiveBitrate>0&&r.receiveLevel===0)}checkAudioInputLevel(r,i){return i instanceof Xi&&!i.isActive||!!i.muted||r.sendVolumeLevel!==0}checkFramerateInput(r,i){let s=null;i._encoderConfig&&i._encoderConfig.frameRate&&(s=rc(i._encoderConfig.frameRate));const l=r.captureFrameRate;return!s||!l||!(s>10&&l<5||s<10&&s>=5&&l<=1)}checkFramerateSent(r){return!(r.captureFrameRate&&r.sendFrameRate&&r.captureFrameRate>5&&r.sendFrameRate<=1)}checkSendVideoBitrate(r,i){return!!i.muted||r.sendBitrate!==0}checkSendAudioBitrate(r,i){return i instanceof Xi&&!i.isActive||!!i.muted||r.sendBitrate!==0}checkVideoDecode(r){return r.receiveBitrate===0||r.decodeFrameRate!==0}}const zx={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},Xo=new class{markSubscribeStart(n,r){performance.mark("agora-web-sdk/".concat(n,"/subscribe-").concat(r))}markPublishStart(n,r){performance.mark("agora-web-sdk/".concat(n,"/publish-").concat(r))}measureFromSubscribeStart(n,r){const i=performance.getEntriesByName("agora-web-sdk/".concat(n,"/subscribe-").concat(r));if(i.length>0){const s=i[i.length-1];return Math.round(performance.now()-s.startTime)}return 0}measureFromPublishStart(n,r){const i=performance.getEntriesByName("agora-web-sdk/".concat(n,"/publish-").concat(r));if(i.length>0){const s=i[i.length-1];return Math.round(performance.now()-s.startTime)}return 0}};function Kx(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function nu(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Kx(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Kx(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class Cd{constructor(r){w(this,"store",void 0),w(this,"onStatsException",void 0),w(this,"onUploadPublishDuration",void 0),w(this,"onStatsChanged",void 0),w(this,"localStats",new Map),w(this,"remoteStats",new Map),w(this,"updateStatsInterval",void 0),w(this,"trafficStats",void 0),w(this,"trafficStatsPeerList",[]),w(this,"uplinkStats",void 0),w(this,"exceptionMonitor",void 0),w(this,"p2pChannel",void 0),w(this,"scalabilityMode",ry.L1T1),w(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=r,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new nY,this.exceptionMonitor.on("exception",(i,s,l)=>{this.onStatsException&&this.onStatsException(i,s,l)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(ke.LocalAudioTrack)||nu({},By)}getLocalVideoTrackStats(){return this.localStats.get(ke.LocalVideoTrack)||nu({},jy)}getRemoteAudioTrackStats(r){const i=(h,p)=>{if(!this.trafficStats)return p;const v=this.trafficStats.peer_delay.find(E=>E.peer_uid===h);return v&&(p.publishDuration=v.B_ppad+(Date.now()-this.trafficStats.timestamp)),p},s={};if(r){var l;const h=(l=this.remoteStats.get(r))===null||l===void 0?void 0:l.audioStats;h&&(s[r]=i(r,h))}else Array.from(this.remoteStats.entries()).forEach(h=>{let[p,{audioStats:v}]=h;v&&(s[p]=i(p,v))});return s}getRemoteNetworkQualityStats(r){const i={};if(r){var s;const l=(s=this.remoteStats.get(r))===null||s===void 0?void 0:s.networkStats;l&&(i[r]=l)}else Array.from(this.remoteStats.entries()).forEach(l=>{let[h,{networkStats:p}]=l;p&&(i[h]=p)});return i}getRemoteVideoTrackStats(r){const i=(h,p)=>{if(!this.trafficStats)return p;const v=this.trafficStats.peer_delay.find(E=>E.peer_uid===h);return v&&(p.publishDuration=v.B_ppvd+(Date.now()-this.trafficStats.timestamp)),p},s={};if(r){var l;const h=(l=this.remoteStats.get(r))===null||l===void 0?void 0:l.videoStats;h&&(s[r]=i(r,h))}else Array.from(this.remoteStats.entries()).forEach(h=>{let[p,{videoStats:v}]=h;v&&(s[p]=i(p,v))});return s}getRTCStats(){let r=0,i=0,s=0,l=0;const h=this.localStats.get(ke.LocalAudioTrack);h&&(r+=h.sendBytes,i+=h.sendBitrate);const p=this.localStats.get(ke.LocalVideoTrack);p&&(r+=p.sendBytes,i+=p.sendBitrate);const v=this.localStats.get(ke.LocalVideoLowTrack);v&&(r+=v.sendBytes,i+=v.sendBitrate),this.remoteStats.forEach(T=>{let{audioStats:y,videoStats:R}=T;y&&(s+=y.receiveBytes,l+=y.receiveBitrate),R&&(s+=R.receiveBytes,l+=R.receiveBitrate)});let E=1;return this.trafficStats&&(E+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:E,SendBitrate:i,SendBytes:r,RecvBytes:s,RecvBitrate:l,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(r){this.localStats.set(r,void 0)}removeLocalStats(r){r?this.localStats.delete(r):this.localStats.clear()}addRemoteStats(r){this.remoteStats.set(r,{})}removeRemoteStats(r){r?this.remoteStats.delete(r):this.remoteStats.clear()}addP2PChannel(r){this.p2pChannel=r}updateTrafficStats(r){r.peer_delay=r.peer_delay.filter(i=>i.B_ppad!==void 0||i.B_ppvd!==void 0),r.peer_delay.filter(i=>this.trafficStatsPeerList.indexOf(i.peer_uid)===-1).forEach(i=>{var s;const l=(s=this.p2pChannel)===null||s===void 0?void 0:s.getRemoteMedia(i.peer_uid),h=l!=null&&l.videoSSRC?Xo.measureFromSubscribeStart(this.store.clientId,l.videoSSRC):0,p=l!=null&&l.audioSSRC?Xo.measureFromSubscribeStart(this.store.clientId,l.audioSSRC):0;i.B_ppad!==void 0&&i.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(i.peer_uid,i.B_ppad,i.B_ppvd,h>p?h:p),this.trafficStatsPeerList.push(i.peer_uid))}),this.trafficStats=r}updateUplinkStats(r){this.uplinkStats&&this.uplinkStats.B_fir!==r.B_fir&&M.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(r.B_fir)),this.uplinkStats=r}static isRemoteVideoFreeze(r,i,s){if(!r)return!1;const l=!!s&&i.framesDecodeFreezeTime>s.framesDecodeFreezeTime,h=!s||i.framesDecodeCount>s.framesDecodeCount;return l||!h}static isRemoteAudioFreeze(r){return!!r&&r._isFreeze()}isLocalVideoFreeze(r){return!(!r.inputFrame||!r.sentFrame)&&r.inputFrame.frameRate>5&&r.sentFrame.frameRate<3}updateLocalStats(r){Array.from(this.localStats.entries()).forEach(i=>{let[s,l]=i;switch(s){case ke.LocalVideoTrack:case ke.LocalVideoLowTrack:{const p=l,v=nu({},jy),E=r.getStats(),T=r.getLocalMedia(s);if(E){const y=E.videoSend.find(R=>R.ssrc===(T==null?void 0:T.ssrcs[0].ssrcId));if(y){const R=r.getLocalVideoSize(),k=r.getEncoderConfig(ke.LocalVideoTrack);y.codec!=="H264"&&y.codec!=="H265"&&y.codec!=="VP8"&&y.codec!=="VP9"&&y.codec!=="AV1X"&&y.codec!=="AV1"||(v.codecType=y.codec),v.sendBytes=y.bytes,v.sendBitrate=p?8*Math.max(0,v.sendBytes-p.sendBytes):0,y.inputFrame?(v.captureFrameRate=y.inputFrame.frameRate,v.captureResolutionHeight=y.inputFrame.height,v.captureResolutionWidth=y.inputFrame.width):R&&(v.captureResolutionWidth=R.width,v.captureResolutionHeight=R.height),y.sentFrame?(v.sendFrameRate=y.sentFrame.frameRate,v.sendResolutionHeight=y.sentFrame.height,v.sendResolutionWidth=y.sentFrame.width):R&&(v.sendResolutionWidth=R.width,v.sendResolutionHeight=R.height),y.avgEncodeMs&&(v.encodeDelay=y.avgEncodeMs),k&&k.bitrateMax&&(v.targetSendBitrate=1e3*k.bitrateMax),v.sendPackets=y.packets,v.sendPacketsLost=y.packetsLost,v.totalDuration=p?p.totalDuration+1:1,v.totalFreezeTime=p?p.totalFreezeTime:0,this.isLocalVideoFreeze(y)&&(v.totalFreezeTime+=1),y.scalabilityMode&&this.scalabilityMode!==y.scalabilityMode&&(M.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(y.scalabilityMode)),this.scalabilityMode=y.scalabilityMode)}this.trafficStats&&(v.sendPacketsLost=this.trafficStats.B_pvlr4/100)}var h;this.localStats.set(s,v),((p==null?void 0:p.sendResolutionWidth)!==v.sendResolutionWidth||(p==null?void 0:p.sendResolutionHeight)!==v.sendResolutionHeight)&&((h=this.onStatsChanged)===null||h===void 0||h.call(this,"resolution",{width:v.sendResolutionWidth,height:v.sendResolutionHeight})),v&&T&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,T.track,v);break}case ke.LocalAudioTrack:{const p=l,v=nu({},By),E=r.getStats(),T=r.getLocalMedia(s);if(E){const y=E.audioSend.find(R=>R.ssrc===(T==null?void 0:T.ssrcs[0].ssrcId));if(y){if(y.codec!=="opus"&&y.codec!=="aac"&&y.codec!=="PCMU"&&y.codec!=="PCMA"&&y.codec!=="G722"||(v.codecType=y.codec),y.inputLevel)v.sendVolumeLevel=Math.round(32767*y.inputLevel);else{const R=r.getLocalAudioVolume();R&&(v.sendVolumeLevel=Math.round(32767*R))}v.sendBytes=y.bytes,v.sendPackets=y.packets,v.sendPacketsLost=y.packetsLost,v.sendBitrate=p?8*Math.max(0,v.sendBytes-p.sendBytes):0}}this.trafficStats&&(v.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(ke.LocalAudioTrack,v),v&&T&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,T.track,v);break}}})}updateRemoteStats(r){Array.from(this.remoteStats.entries()).forEach(i=>{let[s,{videoStats:l,audioStats:h,videoPcStats:p}]=i;const v=h,E=l,T=p,y=nu({},EP),R=nu({},_P),k=nu({},L9),{audioTrack:V,videoTrack:$,audioSSRC:W,videoSSRC:G}=r.getRemoteMedia(s),ie=r.getStats(),se=ie==null?void 0:ie.audioRecv.find(Te=>Te.ssrc===W),ye=ie==null?void 0:ie.videoRecv.find(Te=>Te.ssrc===G),De=this.trafficStats&&this.trafficStats.peer_delay.find(Te=>Te.peer_uid===s);if(se&&(se.codec!=="opus"&&se.codec!=="aac"&&se.codec!=="PCMU"&&se.codec!=="PCMA"&&se.codec!=="G722"||(y.codecType=se.codec),se.outputLevel?y.receiveLevel=Math.round(32767*se.outputLevel):V&&(y.receiveLevel=Math.round(32767*V.getVolumeLevel())),y.receiveBytes=se.bytes,y.receivePackets=se.packets,y.receivePacketsLost=se.packetsLost,y.packetLossRate=y.receivePacketsLost/(y.receivePackets+y.receivePacketsLost),y.receiveBitrate=v?8*Math.max(0,y.receiveBytes-v.receiveBytes):0,y.totalDuration=v?v.totalDuration+1:1,y.totalFreezeTime=v?v.totalFreezeTime:0,y.freezeRate=y.totalFreezeTime/y.totalDuration,y.receiveDelay=se.jitterBufferMs,y.totalDuration>10&&Cd.isRemoteAudioFreeze(V)&&(y.totalFreezeTime+=1)),ye){ye.codec!=="H264"&&ye.codec!=="H265"&&ye.codec!=="VP8"&&ye.codec!=="VP9"&&ye.codec!=="AV1X"&&ye.codec!=="AV1"||(R.codecType=ye.codec),R.receiveBytes=ye.bytes,R.receiveBitrate=E?8*Math.max(0,R.receiveBytes-E.receiveBytes):0,R.decodeFrameRate=ye.decodeFrameRate<0?0:ye.decodeFrameRate,R.renderFrameRate=ye.decodeFrameRate<0?0:ye.decodeFrameRate,ye.outputFrame&&(R.renderFrameRate=ye.outputFrame.frameRate),ye.receivedFrame?(R.receiveFrameRate=ye.receivedFrame.frameRate,R.receiveResolutionHeight=ye.receivedFrame.height,R.receiveResolutionWidth=ye.receivedFrame.width):$&&(R.receiveResolutionHeight=$._videoHeight||0,R.receiveResolutionWidth=$._videoWidth||0),ye.framesRateFirefox!==void 0&&(R.receiveFrameRate=Math.round(ye.framesRateFirefox)),R.receivePackets=ye.packets,R.receivePacketsLost=ye.packetsLost,R.packetLossRate=R.receivePacketsLost/(R.receivePackets+R.receivePacketsLost),R.totalDuration=E?E.totalDuration+1:1,R.totalFreezeTime=E?E.totalFreezeTime:0,R.receiveDelay=ye.jitterBufferMs||0;const Te=!!G&&r.getRemoteVideoIsReady(G);$&&Te&&Cd.isRemoteVideoFreeze($,ye,T)&&(R.totalFreezeTime+=1),R.freezeRate=R.totalFreezeTime/R.totalDuration}De&&(y.end2EndDelay=De.B_ad,R.end2EndDelay=De.B_vd,y.transportDelay=De.B_ed,R.transportDelay=De.B_ed,y.currentPacketLossRate=De.B_ealr4/100,R.currentPacketLossRate=De.B_evlr4/100,k.uplinkNetworkQuality=De.B_punq?De.B_punq:0,k.downlinkNetworkQuality=De.B_pdnq?De.B_pdnq:0),this.remoteStats.set(s,{audioStats:y,videoStats:R,videoPcStats:ye,networkStats:k}),V&&this.exceptionMonitor.setRemoteAudioStats(V,y),$&&this.exceptionMonitor.setRemoteVideoStats($,R)})}}const nc=new class extends xn{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),w(this,"_lastHiddenTime",0),w(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),M.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}};function Yx(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function y0(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Yx(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Yx(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function C0(n){return n.match(/^[\.\:\d]+$/)?"".concat(n.replace(/[^\d]/g,"-"),".").concat(ne("TURN_DOMAIN")):(M.info("Cannot recognized as IP address ".concat(n,". Used As Host instead")),n)}function qx(n,r){var i,s;const l=ne("GATEWAY_DOMAINS");let h=l[1]&&r.indexOf(l[1])!==-1?1:0;n.addresses=n.addresses||[];const p=n.addresses.map(E=>E.domain_prefix?{address:"".concat(E.domain_prefix,".").concat(l[h++%l.length],":").concat(E.port)}:E.ip.match(/^[\.\:\d]+$/)?{ip:E.ip,port:E.port,address:"".concat(E.ip.replace(/[^\d]/g,"-"),".").concat(l[h++%l.length],":").concat(E.port)}:(M.info("Cannot recognized as IP address ".concat(E.ip,". Used As Host instead")),{ip:E.ip,port:E.port,address:"".concat(E.ip,":").concat(E.port)}));if((i=n.detail)!==null&&i!==void 0&&i[18]&&typeof((s=n.detail)===null||s===void 0?void 0:s[18])=="string"){const E=n.detail[18],T=E==null?void 0:E.split(";");for(let y=0;y<T.length;y++){var v;const R=Js(v=T[y]).call(v);p[y]&&R&&(p[y].ip6=R)}}return{gatewayAddrs:p,uid:n.uid,cid:n.cid,cert:n.cert,vid:n.detail&&n.detail[8],uni_lbs_ip:n.detail&&n.detail[1],res:n,csIp:n.detail&&n.detail[502]}}function rc(n){return typeof n=="number"?n:n.exact||n.ideal||n.max||n.min||0}function Xx(n){const r=n._encoderConfig;if(!r)return{};const i={resolution:r.width&&r.height?"".concat(rc(r.width),"x").concat(rc(r.height)):void 0,maxVideoBW:r.bitrateMax,minVideoBW:r.bitrateMin};return typeof r.frameRate=="number"?(i.maxFrameRate=r.frameRate,i.minFrameRate=r.frameRate):r.frameRate&&(i.maxFrameRate=r.frameRate.max||r.frameRate.ideal||r.frameRate.exact||r.frameRate.min,i.minFrameRate=r.frameRate.min||r.frameRate.ideal||r.frameRate.exact||r.frameRate.max),i}function Jx(n){return n>=0&&n<.17?1:n>=.17&&n<.36?2:n>=.36&&n<.59?3:n>=.59&&n<=1?4:n>1?5:0}function cC(n,r){let i,s,l;switch(r){case Tr.CHOOSE_SERVER:i=4096,s="choose server";break;case Tr.CLOUD_PROXY:i=1048576,s="proxy";break;case Tr.CLOUD_PROXY_5:i=4194304,s="proxy5";break;case Tr.CLOUD_PROXY_FALLBACK:i=4194310,s="proxy fallback";break;default:throw new X(j.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:n.detail&&n.detail[502],retry:!1})}if(n.response_body.forEach(h=>{h.buffer&&h.buffer.flag===i&&(l={code:h.buffer.code,addresses:(h.buffer.edges_services||[]).map(p=>y0(y0({},p),{},{ticket:h.buffer.cert})),server_ts:n.enter_ts,uid:h.buffer.uid,cid:h.buffer.cid,cname:h.buffer.cname,detail:y0(y0({},h.buffer.detail),n.detail),flag:h.buffer.flag,opid:n.opid,cert:h.buffer.cert})}),!l)throw new X(j.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(s," from multi unilbs response"),{csIp:n.detail&&n.detail[502]});return l}async function rY(n,r){return await Pe.all(n.addresses.map(async i=>({address:C0(i.ip),tcpport:i.port,udpport:i.port,username:r&&ne("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?r.toString():wo.username,password:r&&ne("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await jK(r.toString()):wo.password})))}function iY(n,r){const i=r._videoWidth||r.getMediaStreamTrack(!0).getSettings().width;return i||M.warning("cannot get original video track's width, default scale down 4 times for low stream"),i?i/rc(n.width):4}function T0(n){let{candidateType:r,relayProtocol:i,type:s,address:l,port:h,protocol:p}=n;return s==="local-candidate"?{candidateType:r,relayProtocol:i,protocol:p}:{candidateType:r,relayProtocol:i,address:l,port:h,protocol:p}}function Qx(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function ru(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Qx(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Qx(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function Td(n){return window.TextEncoder?new TextEncoder().encode(n).length:n.length}function ei(n){return new Pe(r=>{window.setTimeout(r,n)})}function oY(n){const r=new X(j.TIMEOUT,"timeout");return new Pe((i,s)=>{window.setTimeout(()=>s(r),n)})}function _n(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,r=arguments.length>1?arguments[1]:void 0;const i=Math.random().toString(16).substr(2,n).toLowerCase();return i.length===n?"".concat(r).concat(i):"".concat(r).concat(i)+_n(n-i.length,"")}function lC(){return _n(32,"").toUpperCase()}const b0=()=>{};function Zx(n){return new Pe((r,i)=>{let s=!1;const l=document.createElement("video");l.setAttribute("autoplay",""),l.setAttribute("muted",""),l.muted=!0,l.autoplay=!0,l.setAttribute("playsinline",""),l.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(l);const h=Ci()?"canplay":"playing";l.addEventListener(h,()=>{const p=l.videoWidth,v=l.videoHeight;!p&&Mn()||(s=!0,l.srcObject=null,l.remove(),r([p,v]))}),l.srcObject=new MediaStream([n]),l.play().catch(b0),setTimeout(()=>{s||(l.srcObject=null,l.remove(),r([l.videoWidth,l.videoHeight]))},4e3)})}function bd(n){return Pe.all(n.map(r=>r.then(i=>{throw i},i=>i))).then(r=>{throw r},r=>r)}function ti(n,r){for(var i=arguments.length,s=new Array(i>2?i-2:0),l=2;l<i;l++)s[l-2]=arguments[l];return n.getListeners(r).length===0?Pe.reject(new X(j.UNEXPECTED_ERROR,"can not emit promise")):new Pe((h,p)=>{n.emit(r,...s,h,p)})}function Fn(n,r){if(n.getListeners(r).length===0)return Pe.resolve();for(var i=arguments.length,s=new Array(i>2?i-2:0),l=2;l<i;l++)s[l-2]=arguments[l];return ti(n,r,...s)}function Oa(n,r){if(n.getListeners(r).length===0)return null;for(var i=arguments.length,s=new Array(i>2?i-2:0),l=2;l<i;l++)s[l-2]=arguments[l];return iu(n,r,...s)}function iu(n,r){let i=null,s=null;for(var l=arguments.length,h=new Array(l>2?l-2:0),p=2;p<l;p++)h[p-2]=arguments[p];if(n.emit(r,...h,v=>{i=v},v=>{s=v}),s!==null)throw s;if(i===null)throw new X(j.UNEXPECTED_ERROR,"handler is not sync");return i}function uC(n,r){const i=n.indexOf(r);i!==-1&&n.splice(i,1)}function eD(n){const r=[];return n.forEach(i=>{r.indexOf(i)===-1&&r.push(i)}),r}function ts(n){Pe.resolve().then(n)}function or(n){return JSON.parse(JSON.stringify(n))}const tD={};function pp(n,r){tD[r]||(tD[r]=!0,n())}function dC(n){const r=window.atob(n),i=new Uint8Array(new ArrayBuffer(r.length));for(let s=0;s<r.length;s+=1)i[s]=r.charCodeAt(s);return i}function R0(n){let r="";for(let i=0;i<n.length;i+=1)r+=String.fromCharCode(n[i]);return window.btoa(r)}const nD=new class{constructor(){w(this,"fnMap",new Map)}throttleByKey(n,r,i,s){for(var l=arguments.length,h=new Array(l>4?l-4:0),p=4;p<l;p++)h[p-4]=arguments[p];if(this.fnMap.has(r)){const v=this.fnMap.get(r);if(v.threshold!==i){v.fn(...v.args),clearTimeout(v.timer);const E=window.setTimeout(()=>{const T=this.fnMap.get(r);T&&T.fn(...T.args),this.fnMap.delete(r)},i);this.fnMap.set(r,{fn:n,threshold:i,timer:E,args:h,skipFn:s})}else v.skipFn&&v.skipFn(...v.args),this.fnMap.set(r,ru(ru({},v),{},{fn:n,args:h,skipFn:s}))}else{const v=window.setTimeout(()=>{const E=this.fnMap.get(r);E&&E.fn(...E.args),this.fnMap.delete(r)},i);this.fnMap.set(r,{fn:n,threshold:i,timer:v,args:h,skipFn:s})}}},rD=nD.throttleByKey.bind(nD),fp=async n=>{let{fragementLength:r,referenceList:i,asyncMapHandler:s,allFailedhandler:l,promisesCollector:h}=n,p=0;const v=r;let E,T=0;const y=async()=>{const R=(()=>{const k=p*v,V=k+v;return i.slice(k,V).map(s)})();h&&h.push(...R);try{E=await bd(R)}catch(k){if(T+=v,p++,!(T>=i.length))return void await y();l(k)}R.forEach(k=>k.cancel())};return await y(),E};function iD(n){return typeof n=="object"&&n!==null&&!(n instanceof RegExp)}const aY={[fd.ACCESS_POINT]:{[Xr.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[Xr.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[Xr.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[Xr.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[Xr.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[Xr.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[Xr.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[Xr.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[Xr.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[Xr.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[Xr.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[Xr.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[Xr.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[Xr.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[Xr.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[Xr.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[Xr.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[Xr.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[fd.UNILBS]:{[Oo.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Oo.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Oo.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Oo.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Oo.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Oo.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Oo.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Oo.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Oo.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Oo.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Oo.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Oo.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[fd.STRING_UID_ALLOCATOR]:{[cp.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[cp.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[cp.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function I0(n){const r=aY[Math.floor(n/1e4)];if(!r)return{desc:"unkonw error",retry:!1};const i=r[n%1e4];if(!i){if(Math.floor(n/1e4)===fd.ACCESS_POINT){const s=n%1e4;if(s.toString()[0]==="1")return{desc:n.toString(),retry:!1};if(s.toString()[0]==="2")return{desc:n.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return i}const sY={[Ke.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[Ke.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[Ke.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[Ke.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[Ke.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[Ke.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[Ke.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[Ke.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[Ke.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[Ke.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[Ke.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[Ke.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Ke.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Ke.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[Ke.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[Ke.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[Ke.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[Ke.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[Ke.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[Ke.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[Ke.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[Ke.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[Ke.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[Ke.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[Ke.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[Ke.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[Ke.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[Ke.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[Ke.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[Ke.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[Ke.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[Ke.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[Ke.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[Ke.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[Ke.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[Ke.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[Ke.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[Ke.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Ke.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Ke.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[Ke.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[Ke.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Ke.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Ke.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[Ke.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[Ke.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[Ke.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[Ke.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[Ke.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[Ke.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[Ke.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[Ke.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[Ke.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[Ke.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[Ke.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[Ke.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[Ke.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[Ke.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[Ke.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[Ke.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[Ke.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[Ke.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[Ke.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[Ke.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function mp(n){return sY[n]||{desc:"UNKNOW_ERROR_".concat(n),action:"failed"}}function oD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}class ou extends xn{get url(){return this.websocket?this.websocket.url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(r){["tryNext","recover"].includes(r)&&this.resetReconnectCount(r),this._reconnectMode=r}get state(){return this._state}set state(r){r!==this._state&&(this._state=r,this._state==="reconnecting"?this.emit(nt.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(nt.CONNECTED):this._state==="closed"?this.emit(nt.CLOSED):this._state==="failed"&&this.emit(nt.FAILED))}resetReconnectCount(r){M.debug("websocket reset reconnect count, reason: "+r),this.reconnectCount=0}constructor(r,i){let s=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=arguments.length>3&&arguments[3]!==void 0&&arguments[3],h=arguments.length>4?arguments[4]:void 0;super(),w(this,"connectionID",0),w(this,"currentURLIndex",0),w(this,"urls",void 0),w(this,"_reconnectMode","tryNext"),w(this,"reconnectReason",void 0),w(this,"_initMutex",new Ri("websocket")),w(this,"name",void 0),w(this,"_state","closed"),w(this,"reconnectInterrupter",void 0),w(this,"websocket",void 0),w(this,"retryConfig",void 0),w(this,"reconnectCount",0),w(this,"forceCloseTimeout",5e3),w(this,"onlineReconnectListener",void 0),w(this,"useCompress",void 0),w(this,"tryDoubleDomain",!1),w(this,"wsInflateLength",0),w(this,"wsDeflateLength",0),w(this,"closeEstablishingWs",()=>{}),w(this,"store",void 0),w(this,"joinChannelServiceRecordIndex",void 0),this.store=h,this.name=r,this.retryConfig=function(y){for(var R=1;R<arguments.length;R++){var k=arguments[R]!=null?arguments[R]:{};R%2?oD(Object(k),!0).forEach(function(V){w(y,V,k[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(k)):oD(Object(k)).forEach(function(V){Object.defineProperty(y,V,Object.getOwnPropertyDescriptor(k,V))})}return y}({},i),this.useCompress=s,this.tryDoubleDomain=l;const{timeout:p,timeoutFactor:v}=i,E=Math.max(300,Math.floor(3*p/5)),T=Math.max(1.2,Math.floor(8*v)/10);di.ONLINE&&(this.retryConfig.timeout=E,this.retryConfig.timeoutFactor=T),ir.on(Gc.NETWORK_STATE_CHANGE,(y,R)=>{y!==R&&(this.resetReconnectCount("network state change: ".concat(R," -> ").concat(y)),y===di.ONLINE?(this.retryConfig.timeout=E,this.retryConfig.timeoutFactor=T):(this.retryConfig.timeout=p,this.retryConfig.timeoutFactor=v))})}getConnection(){return this.websocket||void 0}init(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;this.forceCloseTimeout=i;const s=(l,h)=>{this.urls=r;const p=this.urls[this.currentURLIndex];this.state="connecting",this.createWebSocketConnection(p).then(l).catch(h),this.once(nt.CLOSED,()=>h(new X(j.WS_DISCONNECT))),this.once(nt.CONNECTED,()=>l())};return this._initMutex.lock().then(l=>new Pe((h,p)=>{s(h,p)}).then(()=>{l()}).catch(()=>{l()}))}close(r,i){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const s=this.websocket;i?setTimeout(()=>s.close(),500):s.close(),this.websocket=void 0}this.state=r?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(r,i){if(!this.websocket)return void M.warning("[".concat(this.name,"] can not reconnect, no websocket"));var s;r!==void 0&&(this.reconnectMode=r),M.debug("[".concat(this.name,"] reconnect is triggered initiative")),typeof this.joinChannelServiceRecordIndex=="number"&&((s=this.store)===null||s===void 0||s.recordJoinChannelService({status:"error",errors:[new Error(i)]},this.joinChannelServiceRecordIndex));const l=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),l&&l.bind(this.websocket)({code:9999,reason:i})}sendMessage(r){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new X(j.WS_ABORT,"websocket is not ready");try{i||(r=JSON.stringify(r)),this.websocket.send(r)}catch(s){throw new X(j.WS_ERR,"send websocket message error"+s.toString())}}setWsInflateData(r){this.wsDeflateLength=this.wsDeflateLength+r.originLength,this.wsInflateLength=this.wsInflateLength+r.compressedLength}getWsInflateData(){const r=this.wsInflateLength,i=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:r,wsDeflateLength:i}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(r,i){return this.connectionID+=1,this.connectionID,this.joinChannelServiceRecordIndex=void 0,new Pe((s,l)=>{var h;const p=y=>{var R;(R=this.store)===null||R===void 0||R.signalChannelOpen(),M.debug("[".concat(this.name,"] websocket opened:"),y),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),s()},v=async y=>{if(M.debug("[".concat(this.name,"] websocket close ").concat(this.websocket&&this.websocket.url,", code: ").concat(y.code,", reason: ").concat(y.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount<this.retryConfig.maxRetryCount){this.state==="connected"&&(this.reconnectReason=y.reason,this.state="reconnecting");const R=Oa(this,nt.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,k=await this.reconnectWithAction(R);if(this.state==="closed")return void M.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!k)return l(new X(j.WS_DISCONNECT,"websocket reconnect failed: ".concat(y.code))),void this.close(!0);s()}else l(new X(j.WS_DISCONNECT,"websocket close: ".concat(y.code))),this.close()},E=y=>{this.emit(nt.ON_MESSAGE,y)};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),ne("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(r=ne("GATEWAY_WSS_ADDRESS")),M.debug("[".concat(this.name,"] start connect, url: ").concat(r));const T=(h=this.store)===null||h===void 0?void 0:h.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});this.chooseBestWebsocketConnection(r,!!i,T).then(y=>{var R;this.websocket=y,p&&p(y.url),y.onclose=v,y.onmessage=E,(R=this.store)===null||R===void 0||R.recordJoinChannelService({endTs:Date.now(),status:"success"},T),this.joinChannelServiceRecordIndex=T}).catch(y=>{var R;if((R=this.store)===null||R===void 0||R.recordJoinChannelService({endTs:Date.now(),status:y instanceof X&&y.code===j.WS_ABORT?"aborted":"error",errors:[y]},T),this.state!=="closed"){if(y instanceof X&&y.code===j.WS_ERR){const k=new X(j.WS_ERR,"init websocket failed! Error: ".concat(y.toString()));return M.error("[".concat(this.name,"]").concat(k)),void l(k)}v&&v(y)}else l(new X(j.WS_DISCONNECT,"websocket is closed: ".concat(y.toString())))})})}async reconnectWithAction(r){let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||!this.urls||this.state==="closed")return!1;this.onlineReconnectListener||ir.networkState!==di.OFFLINE||(this.onlineReconnectListener=ir.onlineWaiter&&ir.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let s=!0;if(this.reconnectInterrupter=()=>{s=!1},i){const p=Ty(this.reconnectCount,this.retryConfig);M.debug("[".concat(this.name,"] wait ").concat(p,"ms to reconnect websocket, mode: ").concat(r)),await Pe.race([ei(p),this.onlineReconnectListener||new Pe(()=>{})])}if(this.state==="closed"||!s)return!1;this.reconnectCount+=1;const l=async(p,v)=>{this.emit(nt.RECONNECT_CREATE_CONNECTION,v),await this.createWebSocketConnection(p)};try{if(r==="retry"){const p=this.urls[this.currentURLIndex];this.emit(nt.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else if(r==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return await this.reconnectWithAction("recover",!1);M.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex));const p=this.urls[this.currentURLIndex];this.emit(nt.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else if(r==="recover"){M.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(nt.RECONNECT_WAITTING_FINISH,r),this.urls=await ti(this,nt.REQUEST_NEW_URLS),this.currentURLIndex=0;const p=this.urls[this.currentURLIndex];await l(p,r)}return!0}catch(p){var h;return M.error("[".concat(this.name,"] reconnect failed"),p.toString()),p!=null&&(h=p.data)!==null&&h!==void 0&&h.desc&&Array.isArray(p.data.desc)&&p.data.desc.length&&p.data.desc.includes("dynamic key expired")?(this.emit(nt.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(r,i)}}async chooseBestWebsocketConnection(r,i,s){return new Pe((l,h)=>{let p=!1;const v=[];this.closeEstablishingWs=()=>{M.debug("[choose-best-ws] close establishing websockets"),v.forEach(W=>{W.onclose=null,W.onopen=null,W.onmessage=null,W.close()}),h(new X(j.WS_ABORT,"choose best websocket aborted"))};const E=ne("GATEWAY_DOMAINS");let T;const y=r.indexOf("?h="),R=E.find(W=>y!==-1?r.includes(W,y):r.includes(W));M.debug("[choose-best-ws] currentDomain: ",R,", domains: ",E);let k=!this.tryDoubleDomain||i||!R;if(!k&&R){var V;const W=Date.now();try{E.forEach(G=>{const ie=y===-1?r.replace(R,G):r.substr(0,y)+r.substr(y).replace(R,G),se=new WebSocket(ie);se.binaryType="arraybuffer",v.push(se),M.debug("[choose-best-ws] ws is connecting:",se.url)})}catch{for(M.debug("[choose-best-ws] ws create failed, fallback to single url"),v.forEach(ie=>ie.close());v.length;)v.pop();k=!0}(V=this.store)===null||V===void 0||V.recordJoinChannelService({urls:v.map(G=>G.url),service:"gateway"},s),v.forEach(G=>{G.onopen=()=>{if(p)return;const ie=Date.now()-W;M.debug("[choose-best-ws] ws open cost ".concat(ie,"ms")),v.filter(se=>se!==G).forEach(se=>{M.debug("[choose-best-ws]close backup websocket: ".concat(se.url)),se.close()}),p=!0,l(G)},G.onclose=ie=>{T=ie,!p&&(v.find(se=>!(se.readyState===WebSocket.CLOSED||se.readyState===WebSocket.CLOSING))||(M.debug("[choose-best-ws] all websocket is closed"),p=!0,h(T)))},G.onmessage=ie=>{M.debug("[choose-best-ws]".concat(G.url," onmessage: ").concat(ie.data))}}),ei(this.forceCloseTimeout).then(()=>{v.forEach(G=>{G.readyState!==WebSocket.OPEN&&G.close()})})}if(k){var $;let W;M.debug("[choose-best-ws] use single url: ",r),($=this.store)===null||$===void 0||$.recordJoinChannelService({urls:[r],service:"gateway"},s);try{W=new WebSocket(r),v.push(W),W.binaryType="arraybuffer"}catch(G){const ie=new X(j.WS_ERR,"init websocket failed! Error: ".concat(G.toString()));return M.error("[".concat(this.name,"]").concat(ie)),void h(ie)}W.onopen=()=>{l(W)},W.onclose=G=>{h(G)},W.onmessage=G=>{M.debug("[choose-best-ws]".concat(W.url," onmessage: ").concat(G.data))},ei(this.forceCloseTimeout).then(()=>{W&&W.readyState!==WebSocket.OPEN&&W.close()})}}).then(l=>(this.closeEstablishingWs=void 0,l)).catch(l=>{throw this.closeEstablishingWs=void 0,l})}}class aD{constructor(r){w(this,"input",[]),w(this,"size",void 0),this.size=r}add(r){this.input.push(r),this.input.length>this.size&&this.input.splice(0,1)}mean(){var r;return this.input.length===0?0:Mc(r=this.input).call(r,(i,s)=>i+s)/this.input.length}}class sD extends xn{get connectionState(){return this._connectionState}set connectionState(r){r!==this._connectionState&&(this._connectionState=r,r===Xt.CONNECTED?this.emit(Fe.WS_CONNECTED):r===Xt.RECONNECTING?this.emit(Fe.WS_RECONNECTING,this._websocketReconnectReason):r===Xt.CLOSED&&this.emit(Fe.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(r,i){super(),w(this,"_disconnectedReason",void 0),w(this,"_websocketReconnectReason",void 0),w(this,"_connectionState",Xt.CLOSED),w(this,"reconnectToken",void 0),w(this,"websocket",void 0),w(this,"openConnectionTime",void 0),w(this,"clientId",void 0),w(this,"lastMsgTime",Date.now()),w(this,"uploadCache",[]),w(this,"uploadCacheInterval",void 0),w(this,"rttRolling",new aD(5)),w(this,"pingpongTimer",void 0),w(this,"wsInflateDataTimer",void 0),w(this,"pingpongTimeoutCount",0),w(this,"joinResponse",void 0),w(this,"multiIpOption",void 0),w(this,"initError",void 0),w(this,"spec",void 0),w(this,"store",void 0),w(this,"onWebsocketMessage",s=>{if(s.data instanceof ArrayBuffer)return void this.emit(Fe.ON_BINARY_DATA,s.data);const l=JSON.parse(s.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const h="res-@".concat(l._id);this.emit(h,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")){if(this.emit(l._type,l._message),l._type===gt.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===gt.ON_USER_BANNED)switch(l._message.error_code){case 14:this.close(Wt.UID_BANNED);break;case 15:this.close(Wt.IP_BANNED);break;case 16:this.close(Wt.CHANNEL_BANNED)}if(l._type===gt.ON_USER_LICENSE_BANNED)switch(l._message.error_code){case Ke.ERR_LICENSE_MISSING:this.close(Wt.LICENSE_MISSING);break;case Ke.ERR_LICENSE_EXPIRED:this.close(Wt.LICENSE_EXPIRED);break;case Ke.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Wt.LICENSE_MINUTES_EXCEEDED);break;case Ke.ERR_LICENSE_PERIOD_INVALID:this.close(Wt.LICENSE_PERIOD_INVALID);break;case Ke.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Wt.LICENSE_MULTIPLE_SDK_SERVICE);break;case Ke.ERR_LICENSE_ILLEGAL:this.close(Wt.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=r.clientId,this.spec=r,this.store=i,this.websocket=new ou("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,i),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Xt.CONNECTED&&this.reconnect("retry",Di.OFFLINE)})}async request(r,i,s,l){const h=_n(6,""),p={_id:h,_type:r,_message:i},v=this.websocket.connectionID,E=()=>new Pe(($,W)=>{if(this.connectionState===Xt.CONNECTED)return $();const G=()=>{this.off(Fe.WS_CLOSED,ie),$()},ie=()=>{this.off(Fe.WS_CONNECTED,G),W(new X(j.WS_ABORT))};this.once(Fe.WS_CONNECTED,G),this.once(Fe.WS_CLOSED,ie),r!==Je.PUBLISH&&r!==Je.SUBSCRIBE&&r!==Je.UNSUBSCRIBE&&r!==Je.UNPUBLISH&&r!==Je.CONTROL&&r!==Je.RESTART_ICE||this.once(Fe.DISCONNECT_P2P,()=>{W(new X(j.DISCONNECT_P2P))}),r!==Je.PUBLISH&&r!==Je.RESTART_ICE||this.once(Fe.ABORT_P2P_EXECUTION,()=>{W(new X(j.DISCONNECT_P2P))})});if(this.connectionState!==Xt.CONNECTING&&this.connectionState!==Xt.RECONNECTING||r===Je.JOIN||r===Je.REJOIN||await E(),this.websocket.sendMessage(p,!0),l)return;const T=new Pe(($,W)=>{let G=!1;const ie=(ye,De)=>{G=!0,$({isSuccess:ye==="success",message:De||{}}),this.off(Fe.WS_CLOSED,se),this.off(Fe.WS_RECONNECTING,se),this.emit(Fe.REQUEST_SUCCESS,r,i)};this.once("res-@".concat(h),ie);const se=()=>{W(new X(j.WS_ABORT,"type: ".concat(r))),this.off(Fe.WS_CLOSED,se),this.off(Fe.WS_RECONNECTING,se),this.off("res-@".concat(h),ie)};this.once(Fe.WS_CLOSED,se),this.once(Fe.WS_RECONNECTING,se),ei(ne("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==v||G||(M.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(r)),this.emit(Fe.REQUEST_TIMEOUT,r,i))})});let y=null;try{y=await T}catch($){if(this.connectionState===Xt.CLOSED||r===Je.LEAVE)throw new X(j.WS_ABORT);return!this.spec.forceWaitGatewayResponse||s?$.throw():r===Je.JOIN||r===Je.REJOIN?null:(await E(),await this.request(r,i))}if(y.isSuccess)return y.message;const R=Number(y.message.error_code||y.message.code),k=mp(R),V=new X(j.UNEXPECTED_RESPONSE,"".concat(k.desc,": ").concat(y.message.error_str),{code:R,data:y.message});return k.action==="success"?y.message:(M.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(r,", error_code: ").concat(R,", message: ").concat(k.desc,", action: ").concat(k.action)),R===Ke.ERR_TOO_MANY_BROADCASTERS?((r===Je.JOIN||r===Je.REJOIN)&&(this.initError=V,this.close()),V.throw()):k.action==="failed"?V.throw():k.action==="quit"?(this.initError=V,this.close(),V.throw()):(R===Ke.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=y.message.option,M.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Di.MULTI_IP)):this.reconnect(k.action,Di.SERVER_ERROR),r===Je.JOIN||r===Je.REJOIN?null:await this.request(r,i)))}waitMessage(r,i){return new Pe(s=>{const l=h=>{(!i||i(h))&&(this.off(r,l),s(h))};this.on(r,l)})}upload(r,i){const s={_type:r,_message:i};try{this.websocket.sendMessage(s)}catch{const h=ne("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(s),this.uploadCache.length>h&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Xt.CONNECTED)return;const p=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(p._type,p._message)},ne("UPLOAD_CACHE_INTERVAL")||2e3))}}send(r,i){const s={_type:r,_message:i};this.websocket.sendMessage(s)}init(r,i){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Pe((s,l)=>{this.once(Fe.WS_CONNECTED,()=>s(this.joinResponse)),this.once(Fe.WS_CLOSED,()=>l(this.initError||new X(j.WS_ABORT))),this.connectionState=Xt.CONNECTING,this.websocket.init(r).catch(l),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4),setTimeout(()=>{i&&this.openConnectionTime===void 0&&(M.debug("[".concat(this.clientId,"] init websocket timeout while join with fallback to proxy")),l(new X(j.INIT_WEBSOCKET_TIMEOUT)))},ne("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))})}close(r){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=r||Wt.LEAVE,this.connectionState=Xt.CLOSED,M.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),r===Wt.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new ou("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(Fe.ABORT_P2P_EXECUTION);const r=await ti(this,Fe.REQUEST_JOIN_INFO),i=await this.request(Je.JOIN,r);if(!i)return this.emit(Fe.REPORT_JOIN_GATEWAY,j.TIMEOUT,this.url||""),!1;this.joinResponse=i,this.emit(Fe.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Xt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new X(j.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const r=iu(this,Fe.REQUEST_REJOIN_INFO);r.token=this.reconnectToken;const i=await this.request(Je.REJOIN,r);return!!i&&(this.connectionState=Xt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),i.peers&&i.peers.forEach(s=>{this.emit(gt.ON_USER_ONLINE,{uid:s.uid}),s.audio&&this.emit(gt.ON_ADD_AUDIO_STREAM,{uid:s.uid,uint_id:s.uint_id,audio:!0,ssrcId:s.audio_ssrc}),s.video&&this.emit(gt.ON_ADD_VIDEO_STREAM,{uid:s.uid,uint_id:s.uint_id,video:!0,ssrcId:s.video_ssrc}),s.audio_mute?this.emit(gt.MUTE_AUDIO,{uid:s.uid}):this.emit(gt.UNMUTE_AUDIO,{uid:s.uid}),s.video_mute?this.emit(gt.MUTE_VIDEO,{uid:s.uid}):this.emit(gt.UNMUTE_VIDEO,{uid:s.uid}),s.audio_enable_local?this.emit(gt.ENABLE_LOCAL_AUDIO,{uid:s.uid}):this.emit(gt.DISABLE_LOCAL_AUDIO,{uid:s.uid}),s.video_enable_local?this.emit(gt.ENABLE_LOCAL_VIDEO,{uid:s.uid}):this.emit(gt.DISABLE_LOCAL_VIDEO,{uid:s.uid}),s.audio||s.video||this.emit(gt.ON_REMOVE_STREAM,{uid:s.uid,uint_id:s.uint_id})}),!0)}reconnect(r,i){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(r,i)}handleNotification(r){M.debug("[".concat(this.clientId,"] receive notification: "),r);const i=mp(r.code);if(i.action!=="success"){if(i.action!=="failed")return i.action==="quit"?(i.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Wt.UID_BANNED),void this.close()):void this.reconnect(i.action,Di.SERVER_ERROR);M.error("[".concat(this.clientId,"] ignore error: "),i.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const r=ne("PING_PONG_TIME_OUT"),i=Date.now();this.pingpongTimeoutCount>=r&&(M.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(i-this.lastMsgTime,"ms")),i-this.lastMsgTime>ne("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Di.TIMEOUT):this.request(Je.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const s=Date.now()-i;this.rttRolling.add(s),ne("REPORT_STATS")&&this.send(Je.PING_BACK,{pingpongElapse:s})}).catch(s=>{})}handleWsInflateData(){const{wsInflateLength:r,wsDeflateLength:i}=this.websocket.getWsInflateData();r!==0&&i!==0&&this.upload(ho.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:i,ws_inflate_length:r})}handleWebsocketEvents(){this.websocket.on(nt.RECONNECT_WAITTING_FINISH,r=>{this.emit(Fe.WS_RECONNECT_WAITTING_FINISH,r)}),this.websocket.on(nt.RECONNECT_CREATE_CONNECTION,r=>{this.emit(Fe.WS_RECONNECT_CREATE_CONNECTION,r)}),this.websocket.on(nt.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(nt.CLOSED,()=>{this.connectionState=Xt.CLOSED}),this.websocket.on(nt.FAILED,()=>{this._disconnectedReason=Wt.NETWORK_ERROR,this.connectionState=Xt.CLOSED}),this.websocket.on(nt.RECONNECTING,r=>{this._websocketReconnectReason=r,this.joinResponse=void 0,this.connectionState===Xt.CONNECTED?this.connectionState=Xt.RECONNECTING:this.connectionState=Xt.CONNECTING}),this.websocket.on(nt.WILL_RECONNECT,(r,i)=>{if(iu(this,Fe.IS_P2P_DISCONNECTED)&&r==="retry")return M.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(Fe.NEED_RENEW_SESSION),this.emit(Fe.DISCONNECT_P2P),i("tryNext");r!=="retry"&&(M.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(r)),this.reconnectToken=void 0,this.emit(Fe.NEED_RENEW_SESSION),this.emit(Fe.DISCONNECT_P2P)),i(r)}),this.websocket.on(nt.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(r=>{M.warning("[".concat(this.clientId,"] rejoin failed ").concat(r)),this.reconnect("tryNext",Di.SERVER_ERROR)}):this.join().catch(r=>{if(this.emit(Fe.REPORT_JOIN_GATEWAY,r.message||r.code,this.url||""),r instanceof X&&r.code===j.UNEXPECTED_RESPONSE&&r.data.code===Ke.ERR_NO_AUTHORIZED)return M.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Di.SERVER_ERROR);M.error("[".concat(this.clientId,"] join gateway request failed"),r.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Di.SERVER_ERROR):(this.initError=r,this.close())})}),this.websocket.on(nt.REQUEST_NEW_URLS,(r,i)=>{ti(this,Fe.REQUEST_RECOVER,this.multiIpOption).then(r).catch(i)}),this.websocket.on(nt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(gt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}}function cD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}class cY extends xn{get url(){return this._url?this._url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(r){["tryNext","recover"].includes(r)&&this.resetReconnectCount(r),this._reconnectMode=r}get state(){return this._state}set state(r){r!==this._state&&(this._state=r,this._state==="reconnecting"?this.emit(Un.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(Un.CONNECTED):this._state==="closed"?this.emit(Un.CLOSED):this._state==="failed"&&this.emit(Un.FAILED))}constructor(r,i,s,l){super(),w(this,"connectionID",0),w(this,"currentURLIndex",0),w(this,"reconnectReason",void 0),w(this,"_reconnectMode","tryNext"),w(this,"_initMutex",void 0),w(this,"_name",void 0),w(this,"_state","closed"),w(this,"_reconnectInterrupter",void 0),w(this,"_url",void 0),w(this,"_retryConfig",void 0),w(this,"_reconnectCount",0),w(this,"_forceCloseTimeout",5e3),w(this,"_onlineReconnectListener",void 0),w(this,"_closeEstablishingTransmitter",()=>{}),w(this,"_store",void 0),w(this,"_joinChannelServiceRecordIndex",void 0),w(this,"_transmitter",void 0),w(this,"_useCompress",void 0),w(this,"_inflateLength",0),w(this,"_deflateLength",0),this._store=l,this._name=r,this._retryConfig=function(h){for(var p=1;p<arguments.length;p++){var v=arguments[p]!=null?arguments[p]:{};p%2?cD(Object(v),!0).forEach(function(E){w(h,E,v[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(v)):cD(Object(v)).forEach(function(E){Object.defineProperty(h,E,Object.getOwnPropertyDescriptor(v,E))})}return h}({},i),this._useCompress=s}resetReconnectCount(r){M.debug("".concat(this._name," reset reconnect count, reason: ").concat(r)),this._reconnectCount=0}close(r,i){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;const s=this._transmitter;i?setTimeout(()=>s.close(),500):s.close(),this._transmitter=void 0}this.state=r?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()}reconnect(r,i){if(!this._transmitter)return void M.warning("[".concat(this._name,"] can not reconnect, no websocket"));var s;r!==void 0&&(this.reconnectMode=r),M.debug("[".concat(this._name,"] reconnect is triggered initiative")),typeof this._joinChannelServiceRecordIndex=="number"&&((s=this._store)===null||s===void 0||s.recordJoinChannelService({status:"error",errors:[new Error(i)]},this._joinChannelServiceRecordIndex));const l=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),l&&l.bind(this._transmitter)({code:9999,reason:i})}getInflateData(){const r=this._inflateLength,i=this._deflateLength;return this.clearInflateData(),{inflateLength:r,deflateLength:i}}setInflateData(r){this._deflateLength=this._deflateLength+r.originLength,this._inflateLength=this._inflateLength+r.compressedLength}clearInflateData(){this._inflateLength=0,this._deflateLength=0}}function lD(n,r,i){if("getBigUint64"in DataView.prototype)return n.getBigUint64(r,i);const s=n.getUint32(r,i),l=n.getUint32(r+4,i),h=Number(!!i),p=Number(!i);return BigInt(s*p+l*h)<<BigInt(32)|BigInt(s*h+l*p)}function uD(n,r,i,s){if("setBigUint64"in DataView.prototype)return n.setBigUint64(r,i,s);const l=Number(i>>BigInt(32)),h=Number(i&BigInt(4294967295));s?(n.setUint32(r+4,l,s),n.setUint32(r,h,s)):(n.setUint32(r,l,s),n.setUint32(r+4,h,s))}let Jo;(function(n){n[n.Default=0]="Default",n[n.Ack=1]="Ack"})(Jo||(Jo={}));class lY{constructor(r,i,s){w(this,"version",1),w(this,"initialRTO",void 0),w(this,"maxBatchAckCount",void 0),w(this,"maxRTO",void 0),w(this,"initialRTT",void 0),w(this,"ID",void 0),w(this,"rtt",void 0),w(this,"packetNumber",1),w(this,"rtoRatioMap",new Map),w(this,"timeoutMap",new Map),w(this,"unorderedPacketQueue",[]),w(this,"batchAckPacketQueue",[]),w(this,"lastOrderedPacketNumber",0),w(this,"batchAckTimer",void 0),w(this,"sendImpl",void 0),w(this,"receiveImpl",void 0),this.sendImpl=r,this.receiveImpl=i,this.ID=_n(7,"transmitter-"),this.initialRTO=(s==null?void 0:s.initialRTO)!==void 0?s.initialRTO:ne("TRANSMITTER_INITIAL_RTO"),this.initialRTT=(s==null?void 0:s.initialRTT)!==void 0?s.initialRTT:ne("TRANSMITTER_INITIAL_RTT"),this.rtt=(s==null?void 0:s.initialRTT)!==void 0?s.initialRTT:ne("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=(s==null?void 0:s.maxBatchAckCount)!==void 0?s.maxBatchAckCount:ne("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=(s==null?void 0:s.maxRTO)!==void 0?s.maxRTO:ne("TRANSMITTER_MAX_RTO")}packetize(r,i){return{type:Jo.Default,version:this.version,packetNumber:i,payload:r}}serialize(r){switch(r.type){case Jo.Default:{let i;typeof r.payload=="string"?i=new TextEncoder().encode(r.payload):i=r.payload;const s=new ArrayBuffer(i.length+15),l=new DataView(s);return l.setUint16(0,r.version),l.setUint8(2,r.type),l.setUint32(3,r.packetNumber),uD(l,7,BigInt(r.sendTs)),new Uint8Array(l.buffer).set(i,15),s}case Jo.Ack:{const i=new ArrayBuffer(16),s=new DataView(i);return s.setUint16(0,r.version),s.setUint8(2,r.type),s.setUint32(3,r.maxAckPacketNumber),s.setUint8(7,r.shift),uD(s,8,BigInt(r.ackSendTs)),i}}}deserialize(r){const i=new DataView(r),s=i.getUint16(0),l=i.getUint8(2);switch(l){case Jo.Default:{const h=i.getUint32(3),p=lD(i,7),v=r.slice(15),E=new TextDecoder().decode(v);return{version:s,type:l,packetNumber:h,sendTs:Number(p),payload:E}}case Jo.Ack:{const h=i.getUint32(3),p=i.getUint8(7),v=lD(i,8);return{version:s,type:l,maxAckPacketNumber:h,shift:p,ackSendTs:Number(v)}}default:throw M.error("[".concat(this.ID,"] Unrecognized packet type ").concat(l)),new Error("Unrecognized packet type ".concat(l))}}sendMessage(r){const i=this.packetize(r,this.packetNumber);this.packetNumber=this.packetNumber===4294967295?1:this.packetNumber+1;const s=this.calculateRTO(i),l=window.setTimeout(()=>{this.resendMessage(i)},s);this.timeoutMap.set(i.packetNumber,l),this.sendPacket(i)}onData(r){const i=this.deserialize(r);i.type===Jo.Default?this.ack(i):i.type===Jo.Ack&&(this.updateRTT(i,Math.round(performance.now())),this.clearRTO(i))}close(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach(r=>{let[i,s]=r;window.clearTimeout(s)}),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,this.batchAckTimer!==void 0&&window.clearTimeout(this.batchAckTimer)}resendMessage(r){const i=this.calculateRTO(r),s=window.setTimeout(()=>{this.resendMessage(r)},i);this.timeoutMap.set(r.packetNumber,s),this.sendPacket(r)}calculateRTO(r){const i=this.rtoRatioMap.get(r.packetNumber);if(i===void 0)return this.rtoRatioMap.set(r.packetNumber,1),this.initialRTO;{const s=9*this.rtt/8*i;return this.rtoRatioMap.set(r.packetNumber,i+1),s>this.maxRTO?this.maxRTO:s}}updateRTT(r,i){const s=r.ackSendTs;this.rtt=this.rtt*(7/8)+(i-s-this.rtt)/8}ack(r){if(r.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(r):(this.batchAckPacketQueue.push(r),this.batchAckTimer=window.setTimeout(()=>{this.batchAck()},this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(r.payload);;){const i=this.unorderedPacketQueue[0];if(!i){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl(i.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else if(r.packetNumber<=this.lastOrderedPacketNumber){const i={ackSendTs:r.sendTs,maxAckPacketNumber:r.packetNumber,shift:0,type:Jo.Ack,version:this.version};this.sendPacket(i)}else if(r.packetNumber>this.lastOrderedPacketNumber){this.unorderedPacketQueue[r.packetNumber-this.lastOrderedPacketNumber-2]=r;const i={ackSendTs:r.sendTs,maxAckPacketNumber:r.packetNumber,shift:0,type:Jo.Ack,version:this.version};this.sendPacket(i)}}batchAck(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0;const r={ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:Jo.Ack,version:this.version};this.sendPacket(r),this.batchAckPacketQueue=[]}sendPacket(r){r.type===Jo.Default&&(r.sendTs=Math.round(performance.now()));const i=this.serialize(r);this.sendImpl(i)}clearRTO(r){for(let i=r.maxAckPacketNumber-r.shift;i<=r.maxAckPacketNumber;i++){const s=this.timeoutMap.get(i);s!==void 0&&window.clearTimeout(s),this.timeoutMap.delete(i),this.rtoRatioMap.delete(i)}}}class dD extends cY{constructor(r,i){super(r,i,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3?arguments[3]:void 0),w(this,"_initMutex",void 0),w(this,"_reconnectInterrupter",void 0),w(this,"_url",void 0),w(this,"_transmitter",void 0),w(this,"_addresses",void 0),w(this,"_reliableTransmission",void 0),this._initMutex=new Ri("datachannel");const{timeout:s,timeoutFactor:l}=i,h=Math.max(300,Math.floor(3*s/5)),p=Math.max(1.2,Math.floor(8*l)/10);di.ONLINE&&(this._retryConfig.timeout=h,this._retryConfig.timeoutFactor=p),ir.on(Gc.NETWORK_STATE_CHANGE,(v,E)=>{v!==E&&(this.resetReconnectCount("network state change: ".concat(E," -> ").concat(v)),v===di.ONLINE?(this._retryConfig.timeout=h,this._retryConfig.timeoutFactor=p):(this._retryConfig.timeout=s,this._retryConfig.timeoutFactor=l))})}getConnection(){if(this._reliableTransmission)return this._reliableTransmission}async init(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;this._forceCloseTimeout=i;const s=(l,h)=>{this._addresses=r,this.currentURLIndex=this._addresses.findIndex(v=>v.fingerprint||ne("FINGERPRINT"));const p=this._addresses[this.currentURLIndex];this.state="connecting",this.createTransmitterConnection(p).then(l).catch(h),this.once(Un.CLOSED,()=>h(new X(j.WS_DISCONNECT))),this.once(Un.CONNECTED,()=>l())};return this._initMutex.lock().then(l=>new Pe((h,p)=>{s(h,p)}).then(()=>{l()}).catch(()=>{l()}))}sendMessage(r){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new X(j.WS_ABORT,"datachannel is not ready");try{i||(r=JSON.stringify(r)),this._reliableTransmission.sendMessage(r)}catch(s){throw new X(j.WS_ERR,"send datachannel signal message error"+s.toString())}}unbindDcCloseEventListener(){this._transmitter&&(this._transmitter.onclose=null)}sendMessageWithJSON(r){const i=JSON.stringify(r);return{compressed:i,compressedLength:i.length,origin:r}}sendMessageWithUint8Array(r){return{compressed:r,compressedLength:r.byteLength,origin:r}}createTransmitterConnection(r){return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(r.ip,":").concat(r.port),new Pe((i,s)=>{var l;const h=()=>{M.debug("[".concat(this._name,"] datachannel opened:"),this._url),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),i()},p=async y=>{var R;if((R=this._closeEstablishingTransmitter)===null||R===void 0||R.call(this),M.debug("[".concat(this._name,"] datachannel close ").concat(this._url,", code: ").concat(y.code,", reason: ").concat(y.reason,", current mode: ").concat(this.reconnectMode)),this._reconnectCount<this._retryConfig.maxRetryCount){this.state==="connected"&&(this.reconnectReason=y.reason,this.state="reconnecting");const k=Oa(this,Un.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,V=await this.reconnectWithAction(k);if(this.state==="closed")return void M.debug("[".concat(this.connectionID,"] dc is closed, no need to reconnect"));if(!V)return s(new X(j.WS_DISCONNECT,"datachannel reconnect failed: ".concat(y.code))),void this.close(!0);i()}else s(new X(j.WS_DISCONNECT,"datachannel close: ".concat(y.code))),this.close()},v=y=>{var R;(R=this._reliableTransmission)===null||R===void 0||R.onData(y.data)};this._transmitter&&(this._transmitter.onclose=null,this._transmitter.close()),this._reliableTransmission&&(this._reliableTransmission.close(),this._reliableTransmission=void 0),M.debug("[".concat(this._name,"] start connect, address: ").concat(JSON.stringify(r)));const E=(l=this._store)===null||l===void 0?void 0:l.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),T=Date.now();ti(this,Un.TO_CONNECT_DATACHANNEL,r).then(y=>{var R,k;if(!y)throw new Error("transmissonInfo not exist yet");const{transmitter:V,close:$}=y;this._transmitter=V,(R=this._store)===null||R===void 0||R.signalChannelOpen();const W=Date.now()-T;M.debug("[choose dc] dc open cost ".concat(W,"ms")),this._reliableTransmission=new lY(G=>{var ie;this._transmitter&&this._transmitter.readyState==="open"&&((ie=this._transmitter)===null||ie===void 0||ie.send(G))},G=>{typeof G=="string"&&this.emit(Un.ON_MESSAGE,G)}),this._closeEstablishingTransmitter=()=>{var G;(G=this._reliableTransmission)===null||G===void 0||G.close(),this._reliableTransmission=void 0,$()},h&&h(),V.onclose=p,V.onmessage=v,(k=this._store)===null||k===void 0||k.recordJoinChannelService({endTs:Date.now(),status:"success"},E),this._joinChannelServiceRecordIndex=E}).catch(y=>{var R;if((R=this._store)===null||R===void 0||R.recordJoinChannelService({endTs:Date.now(),status:y instanceof X&&y.code===j.WS_ABORT?"aborted":"error",errors:[y]},E),this.state!=="closed"){if(y instanceof X&&y.code===j.WS_ERR){const k=new X(j.WS_ERR,"init datachannel failed! Error: ".concat(y.toString()));return M.error("[".concat(this._name,"]").concat(k)),void s(k)}p&&p(y)}else s(new X(j.WS_DISCONNECT,"datachannel is closed: ".concat(y.toString())))})})}async reconnectWithAction(r){let i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this._reconnectCount>=this._retryConfig.maxRetryCount||!this._addresses||this.state==="closed")return!1;this._onlineReconnectListener||ir.networkState!==di.OFFLINE||(this._onlineReconnectListener=ir.onlineWaiter&&ir.onlineWaiter.then(()=>{this._onlineReconnectListener=void 0}));let s=!0;if(this._reconnectInterrupter=()=>{s=!1},i){const p=Ty(this._reconnectCount,this._retryConfig);M.debug("[".concat(this._name,"] wait ").concat(p,"ms to reconnect datachannel, mode: ").concat(r)),await Pe.race([ei(p),this._onlineReconnectListener||new Pe(()=>{})])}if(this.state==="closed"||!s)return!1;this._reconnectCount+=1;const l=async(p,v)=>{this.emit(Un.RECONNECT_CREATE_CONNECTION,v),await this.createTransmitterConnection(p)};try{if(r==="retry"){const p=this._addresses[this.currentURLIndex];this.emit(Un.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else if(r==="tryNext"){this.currentURLIndex+=1;for(let v=this.currentURLIndex;v<this._addresses.length;v++){if(this._addresses[v].fingerprint||ne("FINGERPRINT")){this.currentURLIndex=v;break}this.currentURLIndex+=1}if(this.currentURLIndex>=this._addresses.length)return M.debug("[".concat(this._name,"] the available addresses are exhausted, change to recover")),await this.reconnectWithAction("recover",!1);M.debug("[".concat(this._name,"] datachannel url length: ").concat(this._addresses.length," current index: ").concat(this.currentURLIndex));const p=this._addresses[this.currentURLIndex];this.emit(Un.RECONNECT_WAITTING_FINISH,r),await l(p,r)}else r==="recover"&&(M.debug("[".concat(this._name,"] start to failback to websocket")),this.resetReconnectCount("recover mode"),this.emit(Un.RECONNECT_WAITTING_FINISH,r),this.emit(Un.FAILBACK));return!0}catch(p){var h;return M.error("[".concat(this._name,"] reconnect failed"),p.toString()),p!=null&&(h=p.data)!==null&&h!==void 0&&h.desc&&Array.isArray(p.data.desc)&&p.data.desc.length&&p.data.desc.includes("dynamic key expired")?(this.emit(Un.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(r,i)}}}class ic extends xn{get connectionState(){return this._connectionState}set connectionState(r){r!==this._connectionState&&(this._connectionState=r,r===Xt.CONNECTED?this.emit(Fe.WS_CONNECTED):r===Xt.RECONNECTING?this.emit(Fe.WS_RECONNECTING,this._websocketReconnectReason):r===Xt.CLOSED&&this.emit(Fe.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(r,i){super(),w(this,"_disconnectedReason",void 0),w(this,"_websocketReconnectReason",void 0),w(this,"_connectionState",Xt.CLOSED),w(this,"reconnectToken",void 0),w(this,"websocket",void 0),w(this,"openConnectionTime",void 0),w(this,"clientId",void 0),w(this,"lastMsgTime",Date.now()),w(this,"uploadCache",[]),w(this,"uploadCacheInterval",void 0),w(this,"rttRolling",new aD(5)),w(this,"pingpongTimer",void 0),w(this,"inflateDataTimer",void 0),w(this,"pingpongTimeoutCount",0),w(this,"joinResponse",void 0),w(this,"multiIpOption",void 0),w(this,"initError",void 0),w(this,"spec",void 0),w(this,"store",void 0),w(this,"onWebsocketMessage",s=>{if(s instanceof ArrayBuffer)return void this.emit(Fe.ON_BINARY_DATA,s);const l=JSON.parse(s);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(l,"_id")){const h="res-@".concat(l._id);this.emit(h,l._result,l._message)}else if(Object.prototype.hasOwnProperty.call(l,"_type")&&(this.emit(l._type,l._message),l._type===gt.ON_NOTIFICATION&&this.handleNotification(l._message),l._type===gt.ON_USER_BANNED))switch(l._message.error_code){case 14:this.close(Wt.UID_BANNED);break;case 15:this.close(Wt.IP_BANNED);break;case 16:this.close(Wt.CHANNEL_BANNED)}}),this.clientId=r.clientId,this.spec=r,this.store=i,this.websocket=new dD("gateway-".concat(this.clientId),this.spec.retryConfig,!0,i),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Xt.CONNECTED&&this.reconnect("retry",Ts.OFFLINE)})}async request(r,i,s,l){const h=_n(6,""),p={_id:h,_type:r,_message:i},v=this.websocket.connectionID,E=()=>new Pe(($,W)=>{if(this.connectionState===Xt.CONNECTED)return $();const G=()=>{this.off(Fe.WS_CLOSED,ie),$()},ie=()=>{this.off(Fe.WS_CONNECTED,G),W(new X(j.WS_ABORT))};this.once(Fe.WS_CONNECTED,G),this.once(Fe.WS_CLOSED,ie),r!==Je.PUBLISH&&r!==Je.SUBSCRIBE&&r!==Je.UNSUBSCRIBE&&r!==Je.UNPUBLISH&&r!==Je.CONTROL&&r!==Je.RESTART_ICE||this.once(Fe.DISCONNECT_P2P,()=>{W(new X(j.DISCONNECT_P2P))}),r!==Je.PUBLISH&&r!==Je.RESTART_ICE||this.once(Fe.ABORT_P2P_EXECUTION,()=>{W(new X(j.DISCONNECT_P2P))})});if(this.connectionState!==Xt.CONNECTING&&this.connectionState!==Xt.RECONNECTING||r===Je.JOIN||r===Je.REJOIN||await E(),r===Je.LEAVE&&(this.websocket.unbindDcCloseEventListener(),l=!0),this.websocket.sendMessage(p,!0,!1),l)return;const T=new Pe(($,W)=>{let G=!1;const ie=(ye,De)=>{G=!0,$({isSuccess:ye==="success",message:De||{}}),this.off(Fe.WS_CLOSED,se),this.off(Fe.WS_RECONNECTING,se),this.emit(Fe.REQUEST_SUCCESS,r,i)};this.once("res-@".concat(h),ie);const se=()=>{W(new X(j.WS_ABORT,"type: ".concat(r))),this.off(Fe.WS_CLOSED,se),this.off(Fe.WS_RECONNECTING,se),this.off("res-@".concat(h),ie)};this.once(Fe.WS_CLOSED,se),this.once(Fe.WS_RECONNECTING,se),ei(ne("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==v||G||(M.warning("dc request timeout, type: ".concat(r)),this.emit(Fe.REQUEST_TIMEOUT,r,i))})});let y=null;try{y=await T}catch($){if(this.connectionState===Xt.CLOSED||r===Je.LEAVE)throw new X(j.WS_ABORT);return!this.spec.forceWaitGatewayResponse||s?$.throw():r===Je.JOIN||r===Je.REJOIN?null:(await E(),await this.request(r,i))}if(y.isSuccess)return y.message;const R=Number(y.message.error_code||y.message.code),k=mp(R),V=new X(j.UNEXPECTED_RESPONSE,"".concat(k.desc,": ").concat(y.message.error_str),{code:R,data:y.message});return k.action==="success"?y.message:(M.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(r,", error_code: ").concat(R,", message: ").concat(k.desc,", action: ").concat(k.action)),R===Ke.ERR_TOO_MANY_BROADCASTERS?((r===Je.JOIN||r===Je.REJOIN)&&(this.initError=V,this.close()),V.throw()):k.action==="failed"?V.throw():k.action==="quit"?(this.initError=V,this.close(),V.throw()):(R===Ke.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=y.message.option,M.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Ts.MULTI_IP)):this.reconnect(k.action,Ts.SERVER_ERROR),r===Je.JOIN||r===Je.REJOIN?null:await this.request(r,i)))}waitMessage(r,i){return new Pe(s=>{const l=h=>{(!i||i(h))&&(this.off(r,l),s(h))};this.on(r,l)})}upload(r,i){const s={_type:r,_message:i};try{this.websocket.sendMessage(s)}catch{const h=ne("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(s),this.uploadCache.length>h&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Xt.CONNECTED)return;const p=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(p._type,p._message)},ne("UPLOAD_CACHE_INTERVAL")||2e3))}}send(r,i){const s={_type:r,_message:i};this.websocket.sendMessage(s)}init(r,i){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Pe((s,l)=>{this.once(Fe.WS_CONNECTED,()=>s(this.joinResponse)),this.once(Fe.WS_CLOSED,()=>l(this.initError||new X(j.WS_ABORT))),this.connectionState=Xt.CONNECTING,this.websocket.init(r).catch(l),this.websocket.once(Un.FAILBACK,()=>{this.openConnectionTime===void 0&&l(new X(j.INIT_DATACHANNEL_TIMEOUT))}),this.inflateDataTimer&&window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=window.setInterval(()=>{this.handleInflateData()},2e4),setTimeout(()=>{i&&this.openConnectionTime===void 0&&(M.debug("[".concat(this.clientId,"] init datachannel timeout while join with failback to websocket")),l(new X(j.INIT_DATACHANNEL_TIMEOUT)))},ne("DC_JOIN_WITH_FAILBACK"))})}close(r){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=r||Wt.LEAVE,this.connectionState=Xt.CLOSED,M.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),r===Wt.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new dD("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(Fe.ABORT_P2P_EXECUTION);const r=await ti(this,Fe.DATACHANNEL_CONNECTING),i=await this.request(Je.JOIN,r);if(!i)return this.emit(Fe.REPORT_JOIN_GATEWAY,j.TIMEOUT,this.url||""),!1;this.joinResponse=i,this.emit(Fe.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Xt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new X(j.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const r=iu(this,Fe.REQUEST_REJOIN_INFO);r.token=this.reconnectToken;const i=await this.request(Je.REJOIN,r);return!!i&&(this.connectionState=Xt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),i.peers&&i.peers.forEach(s=>{this.emit(gt.ON_USER_ONLINE,{uid:s.uid}),s.audio&&this.emit(gt.ON_ADD_AUDIO_STREAM,{uid:s.uid,uint_id:s.uint_id,audio:!0,ssrcId:s.audio_ssrc}),s.video&&this.emit(gt.ON_ADD_VIDEO_STREAM,{uid:s.uid,uint_id:s.uint_id,video:!0,ssrcId:s.video_ssrc}),s.audio_mute?this.emit(gt.MUTE_AUDIO,{uid:s.uid}):this.emit(gt.UNMUTE_AUDIO,{uid:s.uid}),s.video_mute?this.emit(gt.MUTE_VIDEO,{uid:s.uid}):this.emit(gt.UNMUTE_VIDEO,{uid:s.uid}),s.audio_enable_local?this.emit(gt.ENABLE_LOCAL_AUDIO,{uid:s.uid}):this.emit(gt.DISABLE_LOCAL_AUDIO,{uid:s.uid}),s.video_enable_local?this.emit(gt.ENABLE_LOCAL_VIDEO,{uid:s.uid}):this.emit(gt.DISABLE_LOCAL_VIDEO,{uid:s.uid}),s.audio||s.video||this.emit(gt.ON_REMOVE_STREAM,{uid:s.uid,uint_id:s.uint_id})}),!0)}reconnect(r,i){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(r,i)}handleNotification(r){M.debug("[".concat(this.clientId,"] receive notification: "),r);const i=mp(r.code);if(i.action!=="success"){if(i.action!=="failed")return i.action==="quit"?(i.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Wt.UID_BANNED),void this.close()):void this.reconnect(i.action,Ts.SERVER_ERROR);M.error("[".concat(this.clientId,"] ignore error: "),i.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const r=ne("PING_PONG_TIME_OUT"),i=Date.now();this.pingpongTimeoutCount>=r&&(M.warning("PINGPONG Timeout. Last Socket Message: ".concat(i-this.lastMsgTime,"ms")),i-this.lastMsgTime>ne("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Ts.TIMEOUT):this.request(Je.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const s=Date.now()-i;this.rttRolling.add(s),ne("REPORT_STATS")&&this.send(Je.PING_BACK,{pingpongElapse:s})}).catch(s=>{})}handleInflateData(){const{inflateLength:r,deflateLength:i}=this.websocket.getInflateData();r!==0&&i!==0&&this.upload(ho.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:i,ws_inflate_length:r})}handleWebsocketEvents(){this.websocket.on(Un.RECONNECT_WAITTING_FINISH,r=>{this.emit(Fe.WS_RECONNECT_WAITTING_FINISH,r)}),this.websocket.on(Un.RECONNECT_CREATE_CONNECTION,r=>{this.emit(Fe.WS_RECONNECT_CREATE_CONNECTION,r)}),this.websocket.on(Un.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Un.CLOSED,()=>{this.connectionState=Xt.CLOSED}),this.websocket.on(Un.FAILED,()=>{this._disconnectedReason=Wt.NETWORK_ERROR,this.connectionState=Xt.CLOSED}),this.websocket.on(Un.RECONNECTING,r=>{this._websocketReconnectReason=r,this.joinResponse=void 0,this.connectionState===Xt.CONNECTED?this.connectionState=Xt.RECONNECTING:this.connectionState=Xt.CONNECTING}),this.websocket.on(Un.WILL_RECONNECT,(r,i)=>{if(iu(this,Fe.IS_P2P_DISCONNECTED)&&r==="retry")return M.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(Fe.NEED_RENEW_SESSION),this.emit(Fe.DISCONNECT_P2P),i("tryNext");r!=="retry"&&(M.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(r)),this.reconnectToken=void 0,this.emit(Fe.NEED_RENEW_SESSION),this.emit(Fe.DISCONNECT_P2P)),i(r)}),this.websocket.on(Un.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(r=>{M.warning("[".concat(this.clientId,"] rejoin failed ").concat(r)),this.reconnect("tryNext",Ts.SERVER_ERROR)}):this.join().catch(r=>{if(this.emit(Fe.REPORT_JOIN_GATEWAY,r.message||r.code,this.url||""),r instanceof X&&r.code===j.UNEXPECTED_RESPONSE&&r.data.code===Ke.ERR_NO_AUTHORIZED)return M.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Ts.SERVER_ERROR);M.error("[".concat(this.clientId,"] join gateway request failed"),r.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Ts.SERVER_ERROR):(this.initError=r,this.close())})}),this.websocket.on(Un.REQUEST_NEW_URLS,(r,i)=>{ti(this,Fe.REQUEST_RECOVER,this.multiIpOption).then(r).catch(i)}),this.websocket.on(Un.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(gt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(Un.TO_CONNECT_DATACHANNEL,async(r,i,s)=>ti(this,Fe.DATACHANNEL_PRECONNECT,r).then(i).catch(s)),this.websocket.on(Un.FAILBACK,()=>{this.openConnectionTime!==void 0&&this.emit(Fe.DATACHANNEL_FAILBACK)})}}function hD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function Is(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?hD(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):hD(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}const hC=new Map;class uY extends xn{get state(){return this._state}set state(r){if(r===this._state)return;const i=this._state;this._state=r,r==="DISCONNECTED"&&this._disconnectedReason?this.emit(An.CONNECTION_STATE_CHANGE,r,i,this._disconnectedReason):this.emit(An.CONNECTION_STATE_CHANGE,r,i)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(r){M.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(r)),this._joinGatewayStartTime=r}constructor(r,i){super(),w(this,"store",void 0),w(this,"joinInfo",void 0),w(this,"key",void 0),w(this,"signal",void 0),w(this,"role",void 0),w(this,"inChannelInfo",{joinAt:null,duration:0}),w(this,"spec",void 0),w(this,"_state","DISCONNECTED"),w(this,"_statsCollector",void 0),w(this,"_disconnectedReason",void 0),w(this,"isSignalRecover",!1),w(this,"hasChangeBGPAddress",!1),w(this,"trafficStatsInterval",void 0),w(this,"networkQualityInterval",void 0),w(this,"_joinGatewayStartTime",0),w(this,"_signalTimeout",!1),w(this,"_clientRoleOptions",void 0),w(this,"_isProactiveJoin",!1),this.store=r,this.spec=i,this.signal=this.store.useDataChannel?new ic(Is(Is({},i),{},{retryConfig:i.websocketRetryConfig}),r):new sD(Is(Is({},i),{},{retryConfig:i.websocketRetryConfig}),r),this._statsCollector=i.statsCollector,this.role=i.role||"audience",this._clientRoleOptions=i.clientRoleOptions,this.handleSignalEvents()}async join(r,i,s){if(this.signal instanceof ic){let E=!1;r.cloudProxyServer!=="disabled"?(M.debug("[".concat(this.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(r.cloudProxyServer,")")),E=!0):"".concat(r.apResponse.cid,"_").concat(r.apResponse.cert).length>255||"".concat(r.apResponse.cid,"_").concat(r.apResponse.cert).length<22?(M.debug("[".concat(this.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),E=!0):r.apResponse.addresses.some(T=>T.fingerprint)||ne("FINGERPRINT")||(M.debug("[".concat(this.store.clientId,"] Dc is not supported, because fingerprint does not exist")),E=!0),E&&this.resetSignal()}this.store.joinGatewayStart(),r.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);const l=Date.now();let h=hC.get(r.cname);if(h||(h=new Map,hC.set(r.cname,h)),this._isProactiveJoin=!0,h.has(r.uid)){const E=new X(j.UID_CONFLICT);throw Me.joinGateway(r.sid,{lts:l,succ:!1,ec:E.message,addr:null,uid:r.uid,cid:r.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!r.proxyServer,signalChannel:this.signal instanceof ic?"1":"0"}),this._isProactiveJoin=!1,E}h.set(r.uid,!0),this.joinInfo=r,this.key=i;let p=0;this.joinGatewayStartTime=l;const v=r.proxyServer;try{let E;if(M.debug("[".concat(this.store.clientId,"] use ").concat(this.signal instanceof ic?"datachannel":"websocket"," join uid ").concat(p)),this.signal instanceof ic)E=await this.signal.init(r.apResponse.addresses,s);else{const T=r.proxyServer,y=T?r.gatewayAddrs.map(R=>{const k=R.address.split(":");return"wss://".concat(T,"/ws/?h=").concat(k[0],"&p=").concat(k[1])}):r.gatewayAddrs.map(R=>"wss://".concat(R.address));E=await this.signal.init(y,s)}p=E.uid,M.debug("[".concat(this.store.clientId,"] ").concat(this.signal instanceof ic?"datachannel":"websocket"," join uid ").concat(p," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(E){throw E&&E.code===j.INIT_WEBSOCKET_TIMEOUT?(M.warning("[".concat(this.store.clientId,"] User join failed"),E.toString()),E):E&&E.code===j.INIT_DATACHANNEL_TIMEOUT?(M.warning("[".concat(this.store.clientId,"] User join datachannel failed"),E.toString()),this.resetSignal(),E):(M.error("[".concat(this.store.clientId,"] User join failed"),E.toString()),Me.joinGateway(r.sid,{lts:l,succ:!1,ec:E.message,addr:this.signal.url,uid:r.uid,cid:r.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!v,signalChannel:this.signal instanceof ic?"1":"0"}),this._isProactiveJoin=!1,h.delete(r.uid),this.signal.close(),E)}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),M.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(E=>{M.warning("[".concat(this.store.clientId,"] get traffic stats error"),E.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(An.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(An.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(An.NETWORK_QUALITY,{uplinkNetworkQuality:Jx(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:Jx(this._statsCollector.trafficStats.B_dnq)}):this.emit(An.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),p}async leave(){let r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){i!==Wt.FALLBACK&&(this.state="DISCONNECTING");try{r||this.signal.connectionState!==Xt.CONNECTED||await function(s,l){return l===1/0?s:Pe.race([s,oY(l)])}(this.signal.request(Je.LEAVE,void 0,!0),3e3)}catch(s){M.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),s)}this.signal.close(i),i!==Wt.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(r,i,s){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new X(j.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const l={state:"offer",p2p_id:this.store.p2pId,ortc:i,mode:this.spec.mode,extend:ne("PUB_EXTEND"),twcc:!!ne("PUBLISH_TWCC"),rtx:!!ne("USE_PUB_RTX")};try{return(await this.signal.request(Je.PUBLISH,l,!0))._message}catch(h){if(s&&h.data&&h.data.code===Ke.ERR_PUBLISH_REQUEST_INVALID)return M.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),h.toString()),await this.tryUnpubBeforeRepub(r,i),this.publish(r,i,!1);throw h}}async unpublish(r,i){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new X(j.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(Je.UNPUBLISH,{stream_id:i,ortc:r},!0)}catch(s){M.warning("[".concat(this.store.clientId,"] unpublish warning: "),s)}}async subscribe(r,i,s){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new X(j.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const l={stream_id:r,stream_type:i.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!ne("SUBSCRIBE_TWCC"),rtx:!!ne("USE_SUB_RTX"),extend:ne("SUB_EXTEND"),ssrcId:i.ssrcId,svc:Array.isArray(ne("SVC"))&&ne("SVC").length!==0?ne("SVC"):void 0};try{return(await this.signal.request(Je.SUBSCRIBE,l,!0))._message}catch(h){if(s&&h.data&&h.data.code===Ke.ERR_SUBSCRIBE_REQUEST_INVALID)return M.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),h.toString()),await this.tryUnsubBeforeResub(r,i),await this.subscribe(r,i,!1);throw h}}async subscribeAll(r,i){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new X(j.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const s={p2p_id:this.store.p2pId,users:r,dtx:!1,rtx:!!ne("USE_SUB_RTX")};try{return await this.signal.request(Je.SUBSCRIBE_STREAMS,s,!0)}catch(l){if(i&&l.data&&l.data.code===Ke.ERR_SUBSCRIBE_REQUEST_INVALID)return M.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),l.toString()),await this.tryMassUnsubBeforeResub(r),await this.subscribeAll(r,!1);throw l}}async setVideoProfile(r){const i=function(s){if(!(s.bitrateMax&&s.bitrateMin&&s.frameRate&&s.height&&s.width))return;let l=s.frameRate,h=s.width,p=s.height,v=!0;return typeof l!="number"&&(l=l.exact||l.ideal||l.max||l.min||0,l||(v=!1)),typeof h!="number"&&(h=h.exact||h.ideal||h.max||h.min||0,h||(v=!1)),typeof p!="number"&&(p=p.exact||p.ideal||p.max||p.min||0,l||(v=!1)),v?{stream_type:0,width:h,height:p,fps:l,start_bps:1e3*s.bitrateMax,min_bps:1e3*s.bitrateMin,target_bps:1e3*s.bitrateMax}:void 0}(r);if(i)return this.signal.request(Je.SET_VIDEO_PROFILE,i);M.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(r,i){try{await this.signal.request(Je.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:r,stream_id:i},!0)}catch(s){M.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),s)}}async massUnsubscribe(r){try{await this.signal.request(Je.UNSUBSCRIBE_STREAMS,r,!0)}catch(i){M.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),i)}}async reconnectPC(r){const{iceParameters:i,dtlsParameters:s,rtpCapabilities:l}=r;return{gatewayEstablishParams:await this.signal.request(Je.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:i,dtlsParameters:s,rtpCapabilities:l}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(Je.GATEWAY_INFO)}async renewToken(r){await this.signal.request(Je.RENEW_TOKEN,r),this.key=r.token}async setClientRole(r,i){if(i&&(this._clientRoleOptions=Object.assign({},i)),this.state!=="CONNECTED")return void(this.role=r);let s;s=r==="audience"?this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:0,await this.signal.request(Je.SET_CLIENT_ROLE,{role:r,level:s,client_ts:Date.now()}),this.role=r}async setRemoteVideoStreamType(r,i){await this.signal.request(Je.SWITCH_VIDEO_STREAM,{stream_id:r,stream_type:i})}async setDefaultRemoteVideoStreamType(r){await this.signal.request(Je.DEFAULT_VIDEO_STREAM,{stream_type:r})}async setStreamFallbackOption(r,i){await this.signal.request(Je.SET_FALLBACK_OPTION,{stream_id:r,fallback_type:i})}async pickSVCLayer(r,i){await this.signal.request(Je.PICK_SVC_LAYER,{stream_id:r,spatial_layer:i.spatialLayer,temporal_layer:i.temporalLayer})}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),Is({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(Je.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const r=hC.get(this.joinInfo.cname);r&&r.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const r=function(i){let s;return s=i.startsWith("dc")?i.match(/(dc\:\/\/)?([^:]+):(\d+)/):i.match(/(wss\:\/\/)?([^:]+):(\d+)/),s?{username:wo.username,password:wo.password,turnServerURL:s[2],tcpport:parseInt(s[3])+30,udpport:parseInt(s[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],r&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push(Is(Is({},wo),{},{turnServerURL:r.turnServerURL,tcpport:r.tcpport,udpport:r.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;const r=await this.signal.request(Je.TRAFFIC_STATS,void 0,!0);r.timestamp=Date.now(),r.peer_delay.forEach(i=>{const s=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(l=>l.peer_uid===i.peer_uid);s&&s.B_st!==i.B_st&&ts(()=>{this.emit(An.STREAM_TYPE_CHANGE,i.peer_uid,i.B_st)})}),this._statsCollector.updateTrafficStats(r)}getJoinMessage(r){if(!this.joinInfo||!this.key)throw new X(j.UNEXPECTED_ERROR,"can not generate join message, no join info");const i=Object.assign({},this.joinInfo.apResponse);let s=ne("REPORT_APP_SCENARIO");if(typeof s!="string")try{s=JSON.stringify(s)}catch{s=void 0}s&&s.length>128&&(s=void 0);const l=Is({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:Yo,browser:navigator.userAgent,process_id:ne("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:i,extend:ne("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:s,attributes:{userAttributes:{enablePublishedUserList:ne("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:ne("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:typeof ne("SUBSCRIBE_AUDIO_FILTER_TOPN")=="number"?ne("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:typeof ne("ENABLE_PUBLISH_AUDIO_FILTER")=="boolean"?ne("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:typeof ne("ENABLE_USER_LICENSE_CHECK")=="boolean"?ne("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:ne("USE_PUB_RTX")===!0||ne("USE_SUB_RTX")===!0||void 0}},join_ts:this.joinGatewayStartTime},r);return this.joinInfo.stringUid&&(l.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(l.aes_mode=this.joinInfo.aesmode,ne("ENCRYPT_AES")?(l.aes_secret=this.joinInfo.aespassword,l.aes_encrypt=!0):l.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(l.aes_salt=this.joinInfo.aessalt)),i.addresses[this.signal.websocket.currentURLIndex]&&(l.ap_response.ticket=i.addresses[this.signal.websocket.currentURLIndex].ticket,delete i.addresses),this.joinInfo.defaultVideoStream!==void 0&&(l.default_video_stream=this.joinInfo.defaultVideoStream),l}getRejoinMessage(){if(!this.joinInfo)throw new X(j.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(Fe.WS_RECONNECT_WAITTING_FINISH,r=>{["tryNext","recover"].includes(r)&&this.joinInfo&&Me.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(Fe.WS_RECONNECT_CREATE_CONNECTION,r=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(Fe.WS_RECONNECTING,r=>{this.joinInfo&&Me.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:r||Di.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",Me.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(Fe.WS_CLOSED,r=>{let i;switch(r){case Wt.LEAVE:i=Di.LEAVE;break;case Wt.UID_BANNED:case Wt.IP_BANNED:case Wt.CHANNEL_BANNED:case Wt.SERVER_ERROR:i=Di.SERVER_ERROR;break;case Wt.FALLBACK:i=Di.FALLBACK;break;case Wt.LICENSE_MISSING:case Wt.LICENSE_EXPIRED:case Wt.LICENSE_MINUTES_EXCEEDED:case Wt.LICENSE_PERIOD_INVALID:case Wt.LICENSE_MULTIPLE_SDK_SERVICE:case Wt.LICENSE_ILLEGAL:i=r;break;default:i=Di.NETWORK_ERROR}M.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(i||"undefined -> "+Di.NETWORK_ERROR)),this.joinInfo&&Me.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:r===Wt.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:i}),this._disconnectedReason=r,r!==Wt.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(Fe.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&(this.role==="audience"&&this._clientRoleOptions&&this._clientRoleOptions.level&&(M.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),Me.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof ic?"1":"0"}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&this.joinInfo.setLocalAPVersion===1)){const r=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!r)return void M.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(r));nn("EVENT_REPORT_DOMAIN",r[1]),nn("EVENT_REPORT_BACKUP_DOMAIN",r[1]),nn("LOG_UPLOAD_SERVER","".concat(r[1],":6444"))}}),this.signal.on(gt.ON_UPLINK_STATS,r=>{this._statsCollector.updateUplinkStats(r)}),this.signal.on(Fe.REQUEST_RECOVER,(r,i,s)=>{if(!this.joinInfo)return s(new X(j.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));r&&(this.joinInfo.multiIP=r,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,ti(this,An.REQUEST_NEW_GATEWAY_LIST).then(i).catch(s)}),this.signal.on(Fe.REQUEST_JOIN_INFO,async r=>{var i;this.updateTurnConfigFromSignal();const{iceParameters:s,dtlsParameters:l,rtpCapabilities:h}=await ti(this,An.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:(i=this.joinInfo)===null||i===void 0?void 0:i.turnServer});r(this.getJoinMessage({ortc:{iceParameters:s,dtlsParameters:l,rtpCapabilities:h,version:"2"}}))}),this.signal.on(Fe.REQUEST_REJOIN_INFO,r=>{r(this.getRejoinMessage())}),this.signal.on(Fe.REPORT_JOIN_GATEWAY,(r,i)=>{this.joinInfo&&(Me.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:r,addr:i,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof ic?"1":"0"}),this._isProactiveJoin=!1)}),this.signal.on(Fe.IS_P2P_DISCONNECTED,r=>{r(iu(this,An.IS_P2P_DISCONNECTED))}),this.signal.on(Fe.DISCONNECT_P2P,()=>{this.emit(An.DISCONNECT_P2P)}),this.signal.on(Fe.NEED_RENEW_SESSION,()=>{this.emit(An.NEED_RENEW_SESSION)}),this.signal.on(Fe.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(Fe.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(Fe.JOIN_RESPONSE,r=>{const i=this.getCurrentGatewayAddress();this.emit(An.JOIN_RESPONSE,r,i)}),this.signal.on(Fe.DATACHANNEL_PRECONNECT,async(r,i,s)=>{this.updateTurnConfigFromSignal();const l=this.getCurrentGatewayAddress();return ti(this,An.DATACHANNEL_PRECONNECT,r,l).then(i).catch(s)}),this.signal.on(Fe.DATACHANNEL_CONNECTING,async r=>{const{iceParameters:i,dtlsParameters:s,rtpCapabilities:l}=await ti(this,An.REQUEST_DC_CONNECTION_PARAMS);r(this.getJoinMessage({ortc:{iceParameters:i,dtlsParameters:s,rtpCapabilities:l,version:"2"}}))}),this.signal.on(Fe.DATACHANNEL_FAILBACK,()=>{M.warning("[".concat(this.store.clientId,"] User join datachannel failed")),this.reset(),this.resetSignal(),this.emit(An.DATACHANNEL_FAILBACK)})}async tryUnsubBeforeResub(r,i){try{await this.signal.request(Je.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:r,ortc:[i]},!0)}catch(s){throw M.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),s),s}}async tryUnpubBeforeRepub(r,i){try{await this.signal.request(Je.UNPUBLISH,{stream_id:r,ortc:i},!0)}catch(s){throw M.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),s),s}}async tryMassUnsubBeforeResub(r){const i={users:r.map(s=>({stream_id:s.stream_id,stream_type:s.stream_type}))};try{await this.signal.request(Je.UNSUBSCRIBE_STREAMS,i,!0)}catch(s){throw M.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),s),s}}async muteLocal(r,i){const s={action:r.find(l=>l.stream_type===pr.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:r,stream_id:i};try{await this.signal.request(Je.CONTROL,s,!0,!0)}catch(l){throw M.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),l),l}}async unmuteLocal(r,i){const s={action:r.find(l=>l.stream_type===pr.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:r,stream_id:i};try{await this.signal.request(Je.CONTROL,s,!0,!0)}catch(l){throw M.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),l),l}}uploadStats(r,i){this.signal.upload(r,i)}getSignalRTT(){return this.signal.rtt}async restartICE(r){const i={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:r};try{return await this.signal.request(Je.RESTART_ICE,i,!0)}catch(s){throw M.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),s),s}}reconnect(){this.state==="CONNECTED"&&this.signal.reconnect(void 0,Di.P2P_FAILED)}getCurrentGatewayAddress(){var r;if(!ne("GATEWAY_WSS_ADDRESS"))return(r=this.joinInfo)!==null&&r!==void 0&&r.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(r){await this.signal.request(Je.SET_PARAMETER,{enablePublishAudioFilter:r})}resetSignal(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(Wt.FALLBACK)),this.store.useDataChannel=!1,this.signal=new sD(Is(Is({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(An.RESET_SIGNAL,p0.websocket)}}/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */(function(){var n;function r(fe){var Ce=0;return function(){return Ce<fe.length?{done:!1,value:fe[Ce++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(fe,Ce,Oe){return fe==Array.prototype||fe==Object.prototype||(fe[Ce]=Oe.value),fe},s,l=function(fe){fe=[typeof globalThis=="object"&&globalThis,fe,typeof window=="object"&&window,typeof self=="object"&&self,typeof a=="object"&&a];for(var Ce=0;Ce<fe.length;++Ce){var Oe=fe[Ce];if(Oe&&Oe.Math==Math)return Oe}throw Error("Cannot find global object")}(this);function h(fe,Ce){if(Ce)e:{var Oe=l;fe=fe.split(".");for(var et=0;et<fe.length-1;et++){var Pt=fe[et];if(!(Pt in Oe))break e;Oe=Oe[Pt]}(Ce=Ce(et=Oe[fe=fe[fe.length-1]]))!=et&&Ce!=null&&i(Oe,fe,{configurable:!0,writable:!0,value:Ce})}}function p(fe){return(fe={next:fe})[Symbol.iterator]=function(){return this},fe}function v(fe){var Ce=typeof Symbol<"u"&&Symbol.iterator&&fe[Symbol.iterator];return Ce?Ce.call(fe):{next:r(fe)}}if(h("Symbol",function(fe){function Ce(Pt,Re){this.A=Pt,i(this,"description",{configurable:!0,writable:!0,value:Re})}if(fe)return fe;Ce.prototype.toString=function(){return this.A};var Oe="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",et=0;return function Pt(Re){if(this instanceof Pt)throw new TypeError("Symbol is not a constructor");return new Ce(Oe+(Re||"")+"_"+et++,Re)}}),h("Symbol.iterator",function(fe){if(fe)return fe;fe=Symbol("Symbol.iterator");for(var Ce="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Oe=0;Oe<Ce.length;Oe++){var et=l[Ce[Oe]];typeof et=="function"&&typeof et.prototype[fe]!="function"&&i(et.prototype,fe,{configurable:!0,writable:!0,value:function(){return p(r(this))}})}return fe}),typeof Object.setPrototypeOf=="function")s=Object.setPrototypeOf;else{var E;e:{var T={};try{T.__proto__={a:!0},E=T.a;break e}catch{}E=!1}s=E?function(fe,Ce){if(fe.__proto__=Ce,fe.__proto__!==Ce)throw new TypeError(fe+" is not extensible");return fe}:null}var y=s;function R(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function k(fe){if(fe.m)throw new TypeError("Generator is already running");fe.m=!0}function V(fe,Ce){return fe.h=3,{value:Ce}}function $(fe){this.g=new R,this.G=fe}function W(fe,Ce,Oe,et){try{var Pt=Ce.call(fe.g.j,Oe);if(!(Pt instanceof Object))throw new TypeError("Iterator result "+Pt+" is not an object");if(!Pt.done)return fe.g.m=!1,Pt;var Re=Pt.value}catch(x){return fe.g.j=null,fe.g.s(x),G(fe)}return fe.g.j=null,et.call(fe.g,Re),G(fe)}function G(fe){for(;fe.g.h;)try{var Ce=fe.G(fe.g);if(Ce)return fe.g.m=!1,{value:Ce.value,done:!1}}catch(Oe){fe.g.v=void 0,fe.g.s(Oe)}if(fe.g.m=!1,fe.g.l){if(Ce=fe.g.l,fe.g.l=null,Ce.F)throw Ce.D;return{value:Ce.return,done:!0}}return{value:void 0,done:!0}}function ie(fe){this.next=function(Ce){return fe.o(Ce)},this.throw=function(Ce){return fe.s(Ce)},this.return=function(Ce){return function(Oe,et){k(Oe.g);var Pt=Oe.g.j;return Pt?W(Oe,"return"in Pt?Pt.return:function(Re){return{value:Re,done:!0}},et,Oe.g.return):(Oe.g.return(et),G(Oe))}(fe,Ce)},this[Symbol.iterator]=function(){return this}}function se(fe,Ce){return Ce=new ie(new $(Ce)),y&&fe.prototype&&y(Ce,fe.prototype),Ce}if(R.prototype.o=function(fe){this.v=fe},R.prototype.s=function(fe){this.l={D:fe,F:!0},this.h=this.C||this.u},R.prototype.return=function(fe){this.l={return:fe},this.h=this.u},$.prototype.o=function(fe){return k(this.g),this.g.j?W(this,this.g.j.next,fe,this.g.o):(this.g.o(fe),G(this))},$.prototype.s=function(fe){return k(this.g),this.g.j?W(this,this.g.j.throw,fe,this.g.o):(this.g.s(fe),G(this))},h("Array.prototype.entries",function(fe){return fe||function(){return function(Ce,Oe){Ce instanceof String&&(Ce+="");var et=0,Pt=!1,Re={next:function(){if(!Pt&&et<Ce.length){var x=et++;return{value:Oe(x,Ce[x]),done:!1}}return Pt=!0,{done:!0,value:void 0}}};return Re[Symbol.iterator]=function(){return Re},Re}(this,function(Ce,Oe){return[Ce,Oe]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var ye=function(fe,Ce){for(var Oe=0;Oe<fe.length;Oe++)Ce(fe[Oe])},De=function(fe){return fe.replace(/\r?\n|\r/g,`\r
`)},Te=function(fe,Ce,Oe){return Ce instanceof Blob?(Oe=Oe!==void 0?String(Oe+""):typeof Ce.name=="string"?Ce.name:"blob",Ce.name===Oe&&Object.prototype.toString.call(Ce)!=="[object Blob]"||(Ce=new File([Ce],Oe)),[String(fe),Ce]):[String(fe),String(Ce)]},be=function(fe,Ce){if(fe.length<Ce)throw new TypeError(Ce+" argument required, but only "+fe.length+" present.")},Se=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,Ie=Se.FormData,Bt=Se.XMLHttpRequest&&Se.XMLHttpRequest.prototype.send,We=Se.Request&&Se.fetch,dn=Se.navigator&&Se.navigator.sendBeacon,Jt=Se.Element&&Se.Element.prototype,Qn=Se.Symbol&&Symbol.toStringTag;Qn&&(Blob.prototype[Qn]||(Blob.prototype[Qn]="Blob"),"File"in Se&&!File.prototype[Qn]&&(File.prototype[Qn]="File"));try{new File([],"")}catch{Se.File=function(Ce,Oe,et){return Ce=new Blob(Ce,et||{}),Object.defineProperties(Ce,{name:{value:Oe},lastModified:{value:+(et&&et.lastModified!==void 0?new Date(et.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),Qn&&Object.defineProperty(Ce,Qn,{value:"File"}),Ce}}var $r=function(fe){return fe.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},Gn=function(fe){this.i=[];var Ce=this;fe&&ye(fe.elements,function(Oe){if(Oe.name&&!Oe.disabled&&Oe.type!=="submit"&&Oe.type!=="button"&&!Oe.matches("form fieldset[disabled] *"))if(Oe.type==="file"){var et=Oe.files&&Oe.files.length?Oe.files:[new File([],"",{type:"application/octet-stream"})];ye(et,function(Pt){Ce.append(Oe.name,Pt)})}else Oe.type==="select-multiple"||Oe.type==="select-one"?ye(Oe.options,function(Pt){!Pt.disabled&&Pt.selected&&Ce.append(Oe.name,Pt.value)}):Oe.type==="checkbox"||Oe.type==="radio"?Oe.checked&&Ce.append(Oe.name,Oe.value):(et=Oe.type==="textarea"?De(Oe.value):Oe.value,Ce.append(Oe.name,et))})};if((n=Gn.prototype).append=function(fe,Ce,Oe){be(arguments,2),this.i.push(Te(fe,Ce,Oe))},n.delete=function(fe){be(arguments,1);var Ce=[];fe=String(fe),ye(this.i,function(Oe){Oe[0]!==fe&&Ce.push(Oe)}),this.i=Ce},n.entries=function fe(){var Ce,Oe=this;return se(fe,function(et){if(et.h==1&&(Ce=0),et.h!=3)return Ce<Oe.i.length?et=V(et,Oe.i[Ce]):(et.h=0,et=void 0),et;Ce++,et.h=2})},n.forEach=function(fe,Ce){be(arguments,1);for(var Oe=v(this),et=Oe.next();!et.done;et=Oe.next()){var Pt=v(et.value);et=Pt.next().value,Pt=Pt.next().value,fe.call(Ce,Pt,et,this)}},n.get=function(fe){be(arguments,1);var Ce=this.i;fe=String(fe);for(var Oe=0;Oe<Ce.length;Oe++)if(Ce[Oe][0]===fe)return Ce[Oe][1];return null},n.getAll=function(fe){be(arguments,1);var Ce=[];return fe=String(fe),ye(this.i,function(Oe){Oe[0]===fe&&Ce.push(Oe[1])}),Ce},n.has=function(fe){be(arguments,1),fe=String(fe);for(var Ce=0;Ce<this.i.length;Ce++)if(this.i[Ce][0]===fe)return!0;return!1},n.keys=function fe(){var Ce,Oe,et,Pt,Re=this;return se(fe,function(x){if(x.h==1&&(Ce=v(Re),Oe=Ce.next()),x.h!=3)return Oe.done?void(x.h=0):(et=Oe.value,Pt=v(et),V(x,Pt.next().value));Oe=Ce.next(),x.h=2})},n.set=function(fe,Ce,Oe){be(arguments,2),fe=String(fe);var et=[],Pt=Te(fe,Ce,Oe),Re=!0;ye(this.i,function(x){x[0]===fe?Re&&(Re=!et.push(Pt)):et.push(x)}),Re&&et.push(Pt),this.i=et},n.values=function fe(){var Ce,Oe,et,Pt,Re=this;return se(fe,function(x){if(x.h==1&&(Ce=v(Re),Oe=Ce.next()),x.h!=3)return Oe.done?void(x.h=0):(et=Oe.value,(Pt=v(et)).next(),V(x,Pt.next().value));Oe=Ce.next(),x.h=2})},Gn.prototype._asNative=function(){for(var fe=new Ie,Ce=v(this),Oe=Ce.next();!Oe.done;Oe=Ce.next()){var et=v(Oe.value);Oe=et.next().value,et=et.next().value,fe.append(Oe,et)}return fe},Gn.prototype._blob=function(){var fe="----formdata-polyfill-"+Math.random(),Ce=[],Oe="--"+fe+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(et,Pt){return typeof et=="string"?Ce.push(Oe+$r(De(Pt))+`"\r
\r
`+De(et)+`\r
`):Ce.push(Oe+$r(De(Pt))+'"; filename="'+$r(et.name)+`"\r
Content-Type: `+(et.type||"application/octet-stream")+`\r
\r
`,et,`\r
`)}),Ce.push("--"+fe+"--"),new Blob(Ce,{type:"multipart/form-data; boundary="+fe})},Gn.prototype[Symbol.iterator]=function(){return this.entries()},Gn.prototype.toString=function(){return"[object FormData]"},Jt&&!Jt.matches&&(Jt.matches=Jt.matchesSelector||Jt.mozMatchesSelector||Jt.msMatchesSelector||Jt.oMatchesSelector||Jt.webkitMatchesSelector||function(fe){for(var Ce=(fe=(this.document||this.ownerDocument).querySelectorAll(fe)).length;0<=--Ce&&fe.item(Ce)!==this;);return-1<Ce}),Qn&&(Gn.prototype[Qn]="FormData"),Bt){var Qi=Se.XMLHttpRequest.prototype.setRequestHeader;Se.XMLHttpRequest.prototype.setRequestHeader=function(fe,Ce){Qi.call(this,fe,Ce),fe.toLowerCase()==="content-type"&&(this.B=!0)},Se.XMLHttpRequest.prototype.send=function(fe){fe instanceof Gn?(fe=fe._blob(),this.B||this.setRequestHeader("Content-Type",fe.type),Bt.call(this,fe)):Bt.call(this,fe)}}We&&(Se.fetch=function(fe,Ce){return Ce&&Ce.body&&Ce.body instanceof Gn&&(Ce.body=Ce.body._blob()),We.call(this,fe,Ce)}),dn&&(Se.navigator.sendBeacon=function(fe,Ce){return Ce instanceof Gn&&(Ce=Ce._asNative()),dn.call(this,fe,Ce)}),Se.FormData=Gn}})();const w0=()=>{const n=ne("AREAS");return n.length===0&&n.push(Rt.GLOBAL),Mc(n).call(n,(r,i,s)=>{const l=pD(i);return l?s===0?l:"".concat(r,",").concat(l):r},"")},pD=n=>n===Rt.OVERSEA?"".concat(Or.ASIA,",").concat(Or.EUROPE,",").concat(Or.AFRICA,",").concat(Or.NORTH_AMERICA,",").concat(Or.SOUTH_AMERICA,",").concat(Or.OCEANIA):Or[n],dY=n=>{const r={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return n.map(i=>{const s=f0[i],l=Object.keys(s);l&&l.map(h=>{h!=="CODE"&&(r[h]=r[h].concat(s[h]))})}),r},O0={GLOBAL:{ASIA:[Rt.CHINA,Rt.JAPAN,Rt.INDIA,Rt.KOREA,Rt.HKMC],EUROPE:[],NORTH_AMERICA:[Rt.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},pC=Object.keys(O0[Rt.GLOBAL]),fD=[Rt.CHINA,Rt.NORTH_AMERICA,Rt.EUROPE,Rt.ASIA,Rt.JAPAN,Rt.INDIA,Rt.OCEANIA,Rt.SOUTH_AMERICA,Rt.AFRICA,Rt.KOREA,Rt.HKMC,Rt.US],hY=function(n,r){let i=[];if(n.includes(Rt.GLOBAL)){const h=[Rt.GLOBAL,Rt.OVERSEA],p=Object.keys(f0);if(r===Rt.GLOBAL)throw new X(j.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(r===Rt.CHINA)i=[Rt.OVERSEA];else if(l=r,pC.includes(l)){const v=(s=r,O0[Rt.GLOBAL][s]||[]),E=[...h,r,...v];i=p.filter(T=>!E.includes(T))}else if(function(v){let E=!1;return pC.forEach(T=>{O0[Rt.GLOBAL][T].includes(v)&&(E=!0)}),E}(r)){const v=function(T){let y;return pC.forEach(R=>{O0[Rt.GLOBAL][R].includes(T)&&(y=R)}),y}(r),E=[...h,v,r];i=p.filter(T=>!E.includes(T))}else i=n;i=function(v){const E=[];return fD.forEach(T=>{v.includes(T)&&E.push(T)}),E.concat(v.filter(T=>!fD.includes(T)))}(i)}else i=n;var s,l;return i};function mD(n){if(!n&&ne("AREAS").includes(Rt.EXTENSIONS))return M.debug("update area from ap : reset"),void fC(JN,!0);if(!ne("AREAS").includes(Rt.GLOBAL)||!n)return;let r=f0.EXTENSIONS;r&&(r={CODE:pD(Rt.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(n,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(n,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(n,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(n,".agora.io"),"cds-ap-web-2-".concat(n,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(n,".agora.io"),"sua-ap-web-2-".concat(n,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(n,".agora.io"),"uap-ap-web-2-".concat(n,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(n,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(n,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(n,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(n,".agora.io")]},M.debug("update area from ap success: ".concat(n,",config is "),r),nn("AREAS",[Rt.EXTENSIONS],!0),Object.keys(r).map(i=>{i==="LOG_UPLOAD_SERVER"||i==="EVENT_REPORT_DOMAIN"||i==="EVENT_REPORT_BACKUP_DOMAIN"||i==="PROXY_SERVER_TYPE3"?nn(i,r[i][0]):nn(i,r[i])}))}function fC(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=Me.reportApiInvoke(null,{name:nr.SET_AREA,options:n,tag:On.TRACER});try{let s=[];if(typeof n=="string"&&(s=[n]),Array.isArray(n)&&(n.forEach(h=>{if(!F9.includes(h))throw new X(j.INVALID_PARAMS,"invalid area code")}),s=n),Object.prototype.toString.call(n)==="[object Object]"){const{areaCode:h,excludedArea:p}=n;if(!h)throw new X(j.INVALID_PARAMS,"area code is needed");let v=h;typeof h=="string"&&(v=[h]),s=p?hY(v,p):v}if(!r){if(Jl.AREAS){const h=new X(j.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return i.onError(h),void M.warning("setArea is prohibited because of config-distribute")}if(s.includes(Rt.GLOBAL)&&ne("AREAS")===Rt.EXTENSIONS){const h=new X(j.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return i.onError(h),void M.warning("setArea is prohibited because of ap extensions")}}nn("AREAS",s,r);const l=dY(s);Object.keys(l).map(h=>{h==="LOG_UPLOAD_SERVER"||h==="EVENT_REPORT_DOMAIN"||h==="EVENT_REPORT_BACKUP_DOMAIN"||h==="PROXY_SERVER_TYPE3"?nn(h,l[h][0]):nn(h,l[h])}),M.debug("set area success:",s.join(","))}catch(s){throw i.onError(s),s}i.onSuccess()}function gD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function vD(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?gD(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):gD(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}let mC=1;function pY(n,r,i,s,l){mC+=1;const h={sid:i.sid,command:"convergeAllocateEdge",uid:"666",appId:i.appId,ts:Math.floor(Date.now()/1e3),seq:mC,requestId:mC,version:Yo,cname:i.cname},p={service_name:r,json_body:JSON.stringify(h)};let v,E,T=n[0];return Ja(async()=>{v=Date.now();const y=await Ia(T,{data:p,cancelToken:s,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(E=Date.now()-v,y.code!==0){const V=new X(j.UNEXPECTED_RESPONSE,"live streaming ap error, code"+y.code,{retry:!0,responseTime:E});throw M.error(V.toString()),V}const R=JSON.parse(y.json_body);if(R.code!==200){const V=new X(j.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(R.code,", reason: ").concat(R.reason),{code:R.code,responseTime:E});throw M.error(V.toString()),V}if(!R.servers||R.servers.length===0){const V=new X(j.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:R.code,responseTime:E});throw M.error(V.toString()),V}const k=function(V,$){return{addressList:V.servers.map(W=>"wss://".concat(W.address.replace(/\./g,"-"),".").concat(ne("WORKER_DOMAIN"),":").concat(W.wss,"?serviceName=").concat(encodeURIComponent($))),workerToken:V.workerToken,vid:V.vid}}(R,r);return ne("LIVE_STREAMING_ADDRESS")&&(k.addressList=ne("LIVE_STREAMING_ADDRESS")instanceof Array?ne("LIVE_STREAMING_ADDRESS"):[ne("LIVE_STREAMING_ADDRESS")]),vD(vD({},k),{},{responseTime:E})},(y,R)=>(Me.apworkerEvent(i.sid,{success:!0,sc:200,serviceName:r,responseDetail:JSON.stringify(y.addressList),firstSuccess:R===0,responseTime:E,serverIp:n[R%n.length]}),!1),(y,R)=>(Me.apworkerEvent(i.sid,{success:!1,sc:y.data&&y.data.code||200,serviceName:r,responseTime:E,serverIp:n[R%n.length]}),!!(y.code!==j.OPERATION_ABORTED&&y.code!==j.UNEXPECTED_RESPONSE||y.data&&y.data.retry)&&(T=n[(R+1)%n.length],!0)),l)}let gC=1;function ED(n,r,i,s){let{url:l,areaCode:h}=n;const p=Date.now();let v;const[E,T]=CD(r,h,[Tr.CHOOSE_SERVER]);let y=ir.networkState;return Ja(async()=>{y&&ir.networkState===di.OFFLINE&&ir.onlineWaiter&&await Pe.race([ir.onlineWaiter,ei(s&&s.maxRetryTimeout||tr.maxRetryTimeout)]),y=ir.networkState;const{data:R,headers:k}=await Ia(l,{data:E,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);v=k.http3==="1"?1:-1,Me.reportResourceTiming(l,r.sid),SD(R,l,r,p,[Tr.CHOOSE_SERVER],v);const V=cC(R,Tr.CHOOSE_SERVER);return yD(V),qx(V,l)},R=>(R&&Me.joinChooseServer(r.sid,{lts:p,succ:!0,csAddr:l,opid:T,serverList:R.gatewayAddrs.map(k=>k.address),ec:null,cid:R.cid.toString(),uid:R.uid.toString(),csIp:R.csIp,unilbsServerIds:[Tr.CHOOSE_SERVER].toString(),isHttp3:v}),!1),R=>R.code!==j.OPERATION_ABORTED&&(R.code===j.CAN_NOT_GET_GATEWAY_SERVER?R.data.retry:(Me.joinChooseServer(r.sid,{lts:p,succ:!1,csAddr:l,serverList:null,opid:T,ec:R.code,csIp:R.data&&R.data.csIp,unilbsServerIds:[Tr.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:y}),isHttp3:v}),M.warning("[".concat(r.clientId,"] Choose server network error, retry"),R),!0)),s)}function _D(n,r,i,s){let l,{url:h,areaCode:p,serviceIds:v}=n;const E=Date.now(),[T,y]=CD(r,p,v);let R;return Ja(async()=>{R&&ir.networkState===di.OFFLINE&&ir.onlineWaiter&&await Pe.race([ir.onlineWaiter,ei(s&&s.maxRetryTimeout||tr.maxRetryTimeout)]),R=ir.networkState;const{data:k,headers:V}=await Ia(h,{data:T,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);l=V.http3==="1"?1:-1,Me.reportResourceTiming(h,r.sid),SD(k,h,r,E,v,l);const $=cC(k,Tr.CHOOSE_SERVER),W=cC(k,r.cloudProxyServer==="proxy5"?Tr.CLOUD_PROXY_5:r.cloudProxyServer==="proxy3"||r.cloudProxyServer==="proxy4"?Tr.CLOUD_PROXY:Tr.CLOUD_PROXY_FALLBACK);return yD($),{gatewayInfo:qx($,h),proxyInfo:W,url:h}},k=>(k.gatewayInfo&&Me.joinChooseServer(r.sid,{lts:E,succ:!0,csAddr:h,serverList:k.gatewayInfo.gatewayAddrs.map(V=>V.address),ec:null,opid:y,cid:k.gatewayInfo.cid.toString(),uid:k.gatewayInfo.uid.toString(),csIp:k.gatewayInfo.csIp,unilbsServerIds:v.toString(),isHttp3:l}),k.proxyInfo&&Me.joinWebProxyAP(r.sid,{lts:E,sucess:1,apServerAddr:h,turnServerAddrList:k.proxyInfo.addresses.map(V=>V.ip).join(","),errorCode:null,eventType:r.cloudProxyServer,unilbsServerIds:v.toString()}),!1),k=>k.code!==j.OPERATION_ABORTED&&(k.code===j.CAN_NOT_GET_GATEWAY_SERVER?k.data.retry:(Me.joinWebProxyAP(r.sid,{lts:E,sucess:0,apServerAddr:h,turnServerAddrList:null,errorCode:k.code,eventType:r.cloudProxyServer,unilbsServerIds:v.toString(),extend:JSON.stringify({networkState:R})}),M.warning("[".concat(r.clientId,"] multi unilbs network error, retry"),k),!0)),s)}const SD=(n,r,i,s,l,h)=>{const p=[],v=E=>{E.flag===4096?Me.joinChooseServer(i.sid,{lts:s,succ:!1,csAddr:r,opid:n.opid,serverList:null,ec:E.error.message,csIp:E.error.data&&E.error.data.csIp,unilbsServerIds:l.toString(),isHttp3:h}):E.flag!==1048576&&E.flag!==4194304&&E.flag!==4194310||Me.joinWebProxyAP(i.sid,{lts:s,sucess:0,apServerAddr:r,turnServerAddrList:null,errorCode:E.error.code,eventType:i.cloudProxyServer,unilbsServerIds:l.toString()})};if(n.response_body.forEach(E=>{const T=E.buffer.code;if(E.uri===23&&T===0&&!E.buffer.edges_services)if(E.buffer.flag===4194310)M.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),E.buffer.edges_services=[];else{const y={error:new X(j.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:n.detail[502]}),flag:E.buffer.flag};p.push(y),v(y)}if(T!==0){const y=I0(T),R={error:new X(j.CAN_NOT_GET_GATEWAY_SERVER,y.desc,{desc:y.desc,retry:y.retry,csIp:n.detail[502]}),flag:E.buffer.flag};E.buffer.flag===4194310?M.warning(R.error.toString()):p.push(R),v(R)}}),p.length)throw M.warning("[".concat(i.clientId,"] multi unilbs ").concat(r," failed, ").concat(p.map(E=>"flag: ".concat(E.flag,", message: ").concat(E.error.message,", retry: ").concat(E.error.data.retry)).join(" | "))),new X(j.CAN_NOT_GET_GATEWAY_SERVER,p.map(E=>"flag: ".concat(E.flag,", message: ").concat(E.error.message)).join(" | "),{retry:!!p.find(E=>E.error.data.retry),csIp:n.detail[502],desc:[...new Set(p.map(E=>{var T,y;return E==null||(T=E.error)===null||T===void 0||(y=T.data)===null||y===void 0?void 0:y.desc}).filter(E=>!!E))]})},yD=n=>{var r,i,s,l;if(n.addresses&&n.addresses.length===0&&n.code===0)throw new X(j.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:n.detail&&n.detail[502]});if(ne("AP_AREA")&&((s=n.detail)!==null&&s!==void 0&&s[23]&&typeof((l=n.detail)===null||l===void 0?void 0:l[23])=="string"?mD(n.detail[23].toLowerCase()):mD()),(r=n.detail)!==null&&r!==void 0&&r[19]&&typeof((i=n.detail)===null||i===void 0?void 0:i[19])=="string"){const p=n.detail[19],v=p==null?void 0:p.split(";");for(let E=0;E<v.length;E++){var h;const T=Js(h=v[E]).call(h);n.addresses[E]&&v&&(n.addresses[E].fingerprint=T)}}if(ne("GATEWAY_ADDRESS")&&ne("GATEWAY_ADDRESS").length>0){M.debug("assign gateway address to",ne("GATEWAY_ADDRESS"));const p=ne("GATEWAY_ADDRESS").map(v=>{var E,T;const y=(E=(T=n.addresses.find(R=>R.ip===v.ip&&R.port===v.port))===null||T===void 0?void 0:T.fingerprint)!==null&&E!==void 0?E:"";return{ip:v.ip,port:v.port,ticket:n.addresses[0]&&n.addresses[0].ticket,fingerprint:y}});n.addresses=p}},fY=(n,r)=>{if(n.response_body&&n.response_body.length){const i=n.response_body[0];if(i.buffer.code!==0){const s=I0(i.buffer.code);throw new X(j.UPDATE_TICKET_FAILED,"[".concat(i.buffer.code,"]: ").concat(s.desc),{retry:s.retry})}return i.buffer.ticket}throw M.debug("update ticket request received ap response without response body:",r),new X(j.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},CD=(n,r,i)=>{const s=Math.floor(Math.random()*1e12),l={appid:n.appId,client_ts:Date.now(),opid:s,sid:n.sid,request_bodies:[{uri:22,buffer:{cname:n.cname,detail:{6:n.stringUid,11:r,12:ne("USE_NEW_TOKEN")?"1":void 0,22:r},key:n.token,service_ids:i,uid:n.uid||0}}]};l.request_bodies.forEach(p=>{n.multiIP&&n.multiIP.gateway_ip&&(p.buffer.detail[5]=JSON.stringify({vocs_ip:[n.multiIP.uni_lbs_ip],vos_ip:[n.multiIP.gateway_ip]}))});const h=new FormData;return h.append("request",JSON.stringify(l)),[h,s]},mY=(n,r)=>{const i=Math.floor(Math.random()*1e12),s={appid:n.appId,client_ts:Date.now(),opid:i,sid:n.sid,request_bodies:[{uri:28,buffer:{cname:n.cname,detail:{1:"",6:n.stringUid,12:"1"},token:n.token,service_ids:r,uid:n.uid||0,edges_services:n.apResponse.addresses.map(h=>({ip:h.ip,port:h.port}))}}]},l=new FormData;return l.append("request",JSON.stringify(s)),[l,i]};let Rd=0;async function vC(n,r,i,s){return{gatewayInfo:await async function(h,p,v,E){let T=null;const y=[],R=async()=>{const V=ne("WEBCS_DOMAIN").slice(0,ne("AJAX_REQUEST_CONCURRENT")).map(G=>({url:h.proxyServer?"https://".concat(h.proxyServer,"/ap/?url=").concat(G+"/api/v2/transpond/webrtc?v=2"):"https://".concat(G,"/api/v2/transpond/webrtc?v=2"),areaCode:w0()})),$=E.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:V.map(G=>G.url)}),W=await fp({fragementLength:ne("FRAGEMENT_LENGTH"),referenceList:V,asyncMapHandler:G=>(M.debug("[".concat(h.clientId,"] Connect to choose_server:"),G.url),ED(G,h,p,v)),allFailedhandler:G=>{throw E.recordJoinChannelService({endTs:Date.now(),status:"error",errors:G},$),G[0]},promisesCollector:y});return E.recordJoinChannelService({endTs:Date.now(),status:"success"},$),W},k=async()=>{if(await ei(1e3),T!==null)return T;const V=ne("WEBCS_DOMAIN_BACKUP_LIST").map(G=>({url:h.proxyServer?"https://".concat(h.proxyServer,"/ap/?url=").concat(G+"/api/v2/transpond/webrtc?v=2"):"https://".concat(G,"/api/v2/transpond/webrtc?v=2"),areaCode:w0()})),$=E.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:V.map(G=>G.url)}),W=await fp({fragementLength:ne("FRAGEMENT_LENGTH"),referenceList:V,asyncMapHandler:G=>(M.debug("[".concat(h.clientId,"] Connect to backup choose_server:"),G.url),ED(G,h,p,v)),allFailedhandler:G=>{throw E.recordJoinChannelService({endTs:Date.now(),status:"error",errors:G},$),G[0]},promisesCollector:y});return E.recordJoinChannelService({endTs:Date.now(),status:"success"},$),W};try{return T=await bd([R(),k()]),y.length&&y.forEach(V=>V.cancel&&typeof V.cancel=="function"&&V.cancel()),T}catch(V){throw V[0]}}(n,r,i,s)}}async function TD(n,r,i,s,l){const h=n.cloudProxyServer;if(h==="disabled"){if(!s)return;if(n.useLocalAccessPoint)return await vC(n,r,i,l);if(ne("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:T,proxyInfo:y}=await RD(n,r,i,l);return n.turnServer&&n.turnServer.mode!=="auto"||(n.turnServer={mode:"manual",servers:y.map(R=>({turnServerURL:R.address,tcpport:R.tcpport||wo.tcpport,udpport:R.udpport||wo.udpport,username:R.username||wo.username,password:R.password||wo.password,forceturn:!1,security:!0}))}),{gatewayInfo:T}}return await vC(n,r,i,l)}const{proxyInfo:p,gatewayInfo:v}=await RD(n,r,i,l),E={gatewayInfo:v};return n.turnServer={mode:"manual",servers:p.map(T=>({turnServerURL:T.address,tcpport:h==="proxy3"?void 0:T.tcpport?T.tcpport:wo.tcpport,udpport:h==="proxy4"?void 0:T.udpport?T.udpport:wo.udpport,username:T.username||wo.username,password:T.password||wo.password,forceturn:h!=="proxy4",security:h==="proxy5"}))},M.debug("[".concat(n.clientId,"] set proxy server: ").concat(n.proxyServer,", mode: ").concat(h)),E}async function bD(n,r,i,s,l){const h=ne("ACCOUNT_REGISTER").slice(0,ne("AJAX_REQUEST_CONCURRENT"));let p=[];p=r.proxyServer?h.map(E=>"https://".concat(r.proxyServer,"/ap/?url=").concat(E+"/api/v1")):h.map(E=>"https://".concat(E,"/api/v1"));const v=l==null?void 0:l.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:p});try{const E=await async function(T,y,R,k,V){const $=Date.now(),W={sid:R.sid,opid:10,appid:R.appId,string_uid:y};let G=T[0];const ie=await Ja(()=>Ia(G+"".concat(G.indexOf("?")===-1?"?":"&","action=stringuid"),{data:W,cancelToken:k,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(se,ye)=>{if(se.code===0){if(se.uid<=0||se.uid>=Math.pow(2,32))throw M.error("Invalid Uint Uid ".concat(y," => ").concat(se.uid),se),Me.reqUserAccount(W.sid,{lts:$,success:!1,serverAddr:G,stringUid:W.string_uid,uid:se.uid,errorCode:j.INVALID_UINT_UID_FROM_STRING_UID,extend:W}),new X(j.INVALID_UINT_UID_FROM_STRING_UID);return Me.reqUserAccount(W.sid,{lts:$,success:!0,serverAddr:G,stringUid:W.string_uid,uid:se.uid,errorCode:null,extend:W}),!1}const De=I0(se.code);return De.retry&&(G=T[(ye+1)%T.length]),Me.reqUserAccount(W.sid,{lts:$,success:!1,serverAddr:G,stringUid:W.string_uid,uid:se.uid,errorCode:De.desc,extend:W}),De.retry},(se,ye)=>se.code!==j.OPERATION_ABORTED&&(Me.reqUserAccount(W.sid,{lts:$,success:!1,serverAddr:G,stringUid:W.string_uid,uid:null,errorCode:se.code,extend:W}),G=T[(ye+1)%T.length],!0),V);if(ie.code!==0){const se=I0(ie.code);throw new X(j.UNEXPECTED_RESPONSE,se.desc)}return ie}(p,n,r,i,s);return l==null||l.recordJoinChannelService({status:"success",endTs:Date.now()},v),E.uid}catch(E){throw l==null||l.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[E]},v),E}}async function gY(n,r,i){const s=ne("CDS_AP").slice(0,ne("AJAX_REQUEST_CONCURRENT")).map(v=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(v+"/api/v1"):"https://".concat(v,"/api/v1?action=config")).map(v=>function(E,T,y,R){const k=$t(),V={flag:64,cipher_method:0,features:{device:k.name,system:k.os,system_general:navigator.userAgent,vendor:T.appId,version:Yo,cname:T.cname,sid:T.sid,session_id:T.sid,detail:"",proxyServer:T.proxyServer}};return Ja(()=>Ia(E,{data:V,timeout:1e3,cancelToken:y,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,$=>$.code!==j.OPERATION_ABORTED,R)}(v,n,r,i));let l=null,h=null,p={};try{l=await bd(s)}catch(v){if(v.code===j.OPERATION_ABORTED)throw v;h=v}if(s.forEach(v=>v.cancel()),Me.reportApiInvoke(n.sid,{name:nr.REQUEST_CONFIG_DISTRIBUTE,options:{error:h,res:l}}).onSuccess(),l&&l.test_tags)try{p=function(v){if(!v.test_tags)return{};const E=v.test_tags,T=Object.keys(E),y={};return T.forEach(R=>{var k;const V=Js(k=R.slice(4)).call(k),$=JSON.parse(E[R])[1];y[V]=$}),y}(l)}catch{}return p}async function RD(n,r,i,s){const l=ne("PROXY_SERVER_TYPE3"),h=(V,$,W)=>{let G=W||l;return Array.isArray(G)&&(G=$%2==0?l[1]:l[0]),"https://".concat(G,"/ap/?url=").concat(V)};let p=null;const v=[],E=async()=>{const V=ne("WEBCS_DOMAIN").slice(0,ne("AJAX_REQUEST_CONCURRENT")).map((G,ie)=>{let se;return se=n.cloudProxyServer==="disabled"&&n.proxyServer?h("".concat(G,"/api/v2/transpond/webrtc?v=2"),ie,n.proxyServer):n.cloudProxyServer==="disabled"||n.cloudProxyServer==="fallback"?"https://".concat(G,"/api/v2/transpond/webrtc?v=2"):h("".concat(G,"/api/v2/transpond/webrtc?v=2"),ie),{url:se,areaCode:w0(),serviceIds:[Tr.CHOOSE_SERVER,n.cloudProxyServer==="proxy5"?Tr.CLOUD_PROXY_5:n.cloudProxyServer==="proxy3"||n.cloudProxyServer==="proxy4"?Tr.CLOUD_PROXY:Tr.CLOUD_PROXY_FALLBACK]}}),$=s.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:V.map(G=>G.url)}),W=await fp({fragementLength:ne("FRAGEMENT_LENGTH"),referenceList:V,asyncMapHandler:G=>(M.debug("[".concat(n.clientId,"] Connect to choose_server:"),G.url),_D(G,n,r,i)),allFailedhandler:G=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:G},$),G[0]},promisesCollector:v});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},$),W},T=async()=>{if(await ei(1e3),p!==null)return p;const V=ne("WEBCS_DOMAIN_BACKUP_LIST").map((G,ie)=>{let se;return se=n.cloudProxyServer==="disabled"&&n.proxyServer?h("".concat(G,"/api/v2/transpond/webrtc?v=2"),ie,n.proxyServer):n.cloudProxyServer==="disabled"||n.cloudProxyServer==="fallback"?"https://".concat(G,"/api/v2/transpond/webrtc?v=2"):h("".concat(G,"/api/v2/transpond/webrtc?v=2"),ie),{url:se,areaCode:w0(),serviceIds:[Tr.CHOOSE_SERVER,n.cloudProxyServer==="proxy5"?Tr.CLOUD_PROXY_5:n.cloudProxyServer==="proxy3"||n.cloudProxyServer==="proxy4"?Tr.CLOUD_PROXY:Tr.CLOUD_PROXY_FALLBACK]}}),$=s.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:V.map(G=>G.url)}),W=await fp({fragementLength:ne("FRAGEMENT_LENGTH"),referenceList:V,asyncMapHandler:G=>(M.debug("[".concat(n.clientId,"] Connect to backup choose_server:"),G.url),_D(G,n,r,i)),allFailedhandler:G=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:G},$),G[0]},promisesCollector:v});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},$),W};let y,R,k;try{({gatewayInfo:y,proxyInfo:R,url:k}=await bd([E(),T()]))}catch(V){throw V[0]}if(v.length&&v.forEach(V=>V.cancel&&typeof V.cancel=="function"&&V.cancel()),!y||!R)throw new X(j.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(n.apUrl=k,n.cloudProxyServer!=="disabled"&&Array.isArray(l)&&k){const V=/^https?:\/\/(.+?)(\/.*)?$/.exec(k)[1];l.includes(V)&&(n.proxyServer=V,M.setProxyServer(V),Me.setProxyServer(V))}return p={gatewayInfo:y,proxyInfo:await rY(R,y.uid)},p}async function ID(n,r,i,s){const l=ne("UAP_AP").slice(0,ne("AJAX_REQUEST_CONCURRENT")).map(h=>r.proxyServer?"https://".concat(r.proxyServer,"/ap/?url=").concat(h+"/api/v1?action=uap"):"https://".concat(h,"/api/v1?action=uap"));return await pY(l,n,r,i,s)}async function vY(n,r,i){const s=ne("UAP_AP").slice(0,ne("AJAX_REQUEST_CONCURRENT")).map(l=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(l+"/api/v1?action=uap"):"https://".concat(l,"/api/v1?action=uap")).map(l=>function(h,p,v,E){const T={command:"convergeAllocateEdge",sid:p.sid,appId:p.appId,token:p.token,ts:Date.now(),version:Yo,cname:p.cname,uid:p.uid.toString(),requestId:gC,seq:gC};gC+=1;const y={service_name:"tele_channel",json_body:JSON.stringify(T)};return Ja(async()=>{const R=await Ia(h,{data:y,cancelToken:v,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(R.code!==0){const V=new X(j.UNEXPECTED_RESPONSE,"cross channel ap error, code"+R.code,{retry:!0});throw M.error(V.toString()),V}const k=JSON.parse(R.json_body);if(k.code!==200){const V=new X(j.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(k.code,", reason: ").concat(k.reason));throw M.error(V.toString()),V}if(!k.servers||k.servers.length===0){const V=new X(j.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw M.error(V.toString()),V}return{vid:k.vid,workerToken:k.workerToken,addressList:(ne("CHANNEL_MEDIA_RELAY_SERVERS")||k.servers).map(V=>"wss://".concat(V.address.replace(/\./g,"-"),".").concat(ne("WORKER_DOMAIN"),":").concat(V.wss))}},void 0,R=>!!(R.code!==j.OPERATION_ABORTED&&R.code!==j.UNEXPECTED_RESPONSE||R.data&&R.data.retry),E)}(l,n,r,i));try{const l=await bd(s);return s.forEach(h=>h.cancel()),l}catch(l){throw l[0]}}async function EY(n,r,i){let s=null;const l=[],h=async p=>{const v=ne(p?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(E=>n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(E+"/api/v2/transpond/webrtc?v=2"):"https://".concat(E,"/api/v2/transpond/webrtc?v=2"));return p&&(await ei(1e3),s!==null)?s:await fp({fragementLength:ne("FRAGEMENT_LENGTH"),referenceList:v,asyncMapHandler:E=>(M.debug("[".concat(n.clientId,"] update ticket, Connect to ").concat(p?"backup":""," choose_server:"),E),function(T,y,R,k){const[V]=mY(y,[Tr.CHOOSE_SERVER]);let $=ir.networkState;return Ja(async()=>{$&&ir.networkState===di.OFFLINE&&ir.onlineWaiter&&await Pe.race([ir.onlineWaiter,ei(k&&k.maxRetryTimeout||tr.maxRetryTimeout)]),$=ir.networkState;const W=await Ia(T,{data:V,cancelToken:R,headers:{"Content-Type":"multipart/form-data;"}},!0);return fY(W,T)},()=>!1,W=>W.code!==j.OPERATION_ABORTED&&(W.code===j.UPDATE_TICKET_FAILED?W.data.retry:(M.warning("[".concat(y.clientId,"] update ticket network error, retry"),W),!0)),k)}(E,n,r,i)),allFailedhandler:E=>{throw E[0]},promisesCollector:l})};try{return s=await bd([h(!1),h(!0)]),l.length&&l.forEach(p=>p.cancel&&typeof p.cancel=="function"&&p.cancel()),s}catch(p){throw p[0]}}function wD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function OD(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?wD(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):wD(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class _Y extends xn{constructor(){super(),w(this,"configs",void 0),w(this,"joinInfo",void 0),w(this,"cancelToken",void 0),w(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),w(this,"interval",void 0),w(this,"mutex",new Ri("config-distribute")),w(this,"mutableParamsRead",!1)}startGetConfigDistribute(r,i){this.joinInfo=r,this.cancelToken=i,this.interval&&this.stopGetConfigDistribute(),ne("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},ne("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,Me.reportApiInvoke(null,{options:void 0,name:nr.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:On.TRACER}).onSuccess(JSON.stringify(Jl))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void M.debug("[config-distribute] get config distribute interrupted have no joininfo");let r;const i=await this.mutex.lock();try{r=await gY(this.joinInfo,this.cancelToken,this.retryConfig),M.debug("[config-distribute] get config distribute",JSON.stringify(r)),r.limit_bitrate&&this.handleBitrateLimit(r.limit_bitrate),this.cacheGlobalParameterConfig(r),this.configs=r}catch(s){const l=new X(j.NETWORK_RESPONSE_ERROR,s);M.warning("[config-distribute] ".concat(l.toString()))}finally{i()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(r){var i;(i=r)&&i.uplink&&i.id&&i.uplink.max_bitrate!==void 0&&i.uplink.min_bitrate!==void 0&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==r.id&&this.emit(dp.UPDATE_BITRATE_LIMIT,r):this.emit(dp.UPDATE_BITRATE_LIMIT,r))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&OD({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(r){var i;const s=Dy(i=Object.keys(r).filter(h=>/^webrtc_ng_global_parameter/.test(h))).call(i);for(let h=0;h<s.length;h++)for(let p=s.length-1;p>h;p--){const v=s[p];if(typeof r[v].__priority=="number"){const E=r[v].__priority,T=s[p-1];if(typeof r[T].__priority=="number"){if(!(E>r[T].__priority))continue;{const y=v;s[p]=s[p-1],s[p-1]=y}}else{const y=v;s[p]=s[p-1],s[p-1]=y}}}const l={};s.forEach(h=>{const p=r[h],v=p.__expires;Object.keys(p).forEach(E=>{E==="__priority"||E==="__expires"||Object.prototype.hasOwnProperty.call(l,E)||(l[E]=OD({value:p[E]},v&&{expires:v}))})});try{const h=JSON.stringify(l),p=window.btoa(h);window.localStorage.setItem("websdk_ng_global_parameter",p),M.debug("Caching global parameters ".concat(h))}catch(h){M.error("Error caching global parameters:",h.message)}}}function AD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function gp(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?AD(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):AD(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class SY extends xn{constructor(r,i,s,l){super(),w(this,"spec",void 0),w(this,"token",void 0),w(this,"websocket",void 0),w(this,"pingpongTimer",void 0),w(this,"reconnectMode","retry"),w(this,"serviceMode",void 0),w(this,"reqId",0),w(this,"commandReqId",0),w(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),w(this,"handleWebSocketMessage",h=>{if(!h.data)return;const p=JSON.parse(h.data);p.requestId?this.emit("@".concat(p.requestId,"-").concat(p.sid),p):this.serviceMode===hr.INJECT?this.emit(Ra.INJECT_STREAM_STATUS,p):(Me.workerEvent(this.spec.sid,{actionType:"status",serverCode:p.code,workerType:this.serviceMode===hr.TRANSCODE?1:2}),this.emit(Ra.PUBLISH_STREAM_STATUS,p))}),this.spec=i,this.token=r,this.serviceMode=l,this.websocket=new ou("live-streaming",s),this.websocket.on(nt.CONNECTED,this.handleWebSocketOpen),this.websocket.on(nt.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(nt.REQUEST_NEW_URLS,(h,p)=>{ti(this,Ra.REQUEST_NEW_ADDRESS).then(h).catch(p)}),this.websocket.on(nt.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(r){return this.websocket.init(r)}async request(r,i,s,l){this.reqId+=1,r==="request"&&(this.commandReqId+=1);const h=this.commandReqId,p=this.reqId;if(!p||!this.websocket)throw new X(j.UNEXPECTED_ERROR);const v=gp({command:r,sdkVersion:Yo==="4.18.1"?"0.0.1":Yo,seq:p,requestId:p,allocate:s,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},i);if(this.websocket.state==="closed")throw new X(j.WS_DISCONNECT);const E=()=>new Pe((k,V)=>{this.websocket.once(nt.CLOSED,()=>V(new X(j.WS_ABORT))),this.websocket.once(nt.CONNECTED,k)});this.websocket.state!=="connected"&&await E(),v.clientRequest&&(v.clientRequest.workerToken=this.token);const T=new Pe((k,V)=>{const $=()=>{V(new X(j.WS_ABORT))};this.websocket.once(nt.RECONNECTING,$),this.websocket.once(nt.CLOSED,$),this.once("@".concat(p,"-").concat(this.spec.sid),W=>{k(W)})});l&&Me.workerEvent(this.spec.sid,gp(gp({},l),{},{requestId:h,actionType:"request",payload:JSON.stringify(i.clientRequest),serverCode:0,code:0}));const y=Date.now();this.websocket.sendMessage(v);let R=null;try{R=await T}catch(k){if(this.websocket.state==="closed")throw k;return await E(),await this.request(r,i,s)}return l&&Me.workerEvent(this.spec.sid,gp(gp({},l),{},{requestId:h,actionType:"response",payload:JSON.stringify(R.serverResponse),serverCode:R.code,success:R.code===200,responseTime:Date.now()-y})),R.code!==200&&this.handleResponseError(R),R}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const r=Yo==="4.18.1"?"0.0.1":Yo;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:r,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(r){switch(r.code){case Wn.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void M.warning("live stream response already exists stream");case Wn.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case Wn.LIVE_STREAM_RESPONSE_BAD_STREAM:case Wn.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new X(j.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:r.code}).throw();case Wn.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;throw new X(j.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Wn.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new X(j.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:r.code}).throw();case Wn.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const i=new X(j.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(Ra.WARNING,i,r.serverResponse.url)}case Wn.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const i=new X(j.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(Ra.WARNING,i,r.serverResponse.url)}case Wn.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new X(j.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Wn.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new X(j.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:r.code}).throw();case Wn.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const i=new X(j.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(Ra.WARNING,i,r.serverResponse.url)}case Wn.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new X(j.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:r.code}).throw();case Wn.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new X(j.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case Wn.LIVE_STREAM_RESPONSE_WORKER_LOST:case Wn.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;throw new X(j.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Wn.ERROR_FAIL_SEND_MESSAGE:if(r.serverResponse.command==="UnpublishStream"||r.serverResponse.command==="UninjectStream")return;if(r.serverResponse.command==="UpdateTranscoding"||r.serverResponse.command==="ControlStream")return new X(j.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:r.code}).throw();throw new X(j.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Wn.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Wn.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Wn.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Wn.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new X(j.LIVE_STREAMING_CDN_ERROR,"",{code:r.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(b0)},6e3)}}function ND(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function ki(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?ND(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ND(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class yY extends xn{constructor(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tr,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:tr;super(),w(this,"onLiveStreamWarning",void 0),w(this,"onLiveStreamError",void 0),w(this,"onInjectStatusChange",void 0),w(this,"spec",void 0),w(this,"retryTimeout",1e4),w(this,"connection",void 0),w(this,"httpRetryConfig",void 0),w(this,"wsRetryConfig",void 0),w(this,"streamingTasks",new Map),w(this,"isStartingStreamingTask",!1),w(this,"taskMutex",new Ri("live-streaming")),w(this,"cancelToken",Io.CancelToken.source()),w(this,"transcodingConfig",void 0),w(this,"injectConfig",ki({},V9)),w(this,"injectLoopTimes",0),w(this,"uapResponse",void 0),w(this,"lastTaskId",1),w(this,"statusError",new Map),this.spec=r,this.httpRetryConfig=s,this.wsRetryConfig=i}async setTranscodingConfig(r){const i=ki(ki({},U9),r);i.videoCodecProfile!==66&&i.videoCodecProfile!==77&&i.videoCodecProfile!==100&&(M.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(i.videoCodecProfile," -> 100")),i.videoCodecProfile=100),i.transcodingUsers||(i.transcodingUsers=i.userConfigs),i.transcodingUsers&&(i.transcodingUsers=i.transcodingUsers.map(p=>ki(ki(ki({},M9),p),{},{zOrder:p.zOrder?p.zOrder+1:1}))),function(p){bn(p.width)||ln(p.width,"config.width",0,1e4),bn(p.height)||ln(p.height,"config.height",0,1e4),bn(p.videoBitrate)||ln(p.videoBitrate,"config.videoBitrate",1,1e6),bn(p.videoFrameRate)||ln(p.videoFrameRate,"config.videoFrameRate"),bn(p.lowLatency)||pd(p.lowLatency,"config.lowLatency"),bn(p.audioSampleRate)||wr(p.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),bn(p.audioBitrate)||ln(p.audioBitrate,"config.audioBitrate",1,128),bn(p.audioChannels)||wr(p.audioChannels,"config.audioChannels",[1,2,3,4,5]),bn(p.videoGop)||ln(p.videoGop,"config.videoGop"),bn(p.videoCodecProfile)||wr(p.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),bn(p.userCount)||ln(p.userCount,"config.userCount",0,17),bn(p.backgroundColor)||ln(p.backgroundColor,"config.backgroundColor",0,16777215),bn(p.userConfigExtraInfo)||Yr(p.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),p.transcodingUsers&&!bn(p.transcodingUsers)&&(ec(p.transcodingUsers,"config.transcodingUsers"),p.transcodingUsers.forEach((v,E)=>{My(v.uid),bn(v.x)||ln(v.x,"transcodingUser[".concat(E,"].x"),0,1e4),bn(v.y)||ln(v.y,"transcodingUser[".concat(E,"].y"),0,1e4),bn(v.width)||ln(v.width,"transcodingUser[".concat(E,"].width"),0,1e4),bn(v.height)||ln(v.height,"transcodingUser[".concat(E,"].height"),0,1e4),bn(v.zOrder)||ln(v.zOrder-1,"transcodingUser[".concat(E,"].zOrder"),0,100),bn(v.alpha)||ln(v.alpha,"transcodingUser[".concat(E,"].alpha"),0,1,!1)})),bn(p.watermark)||$y(p.watermark,"watermark"),bn(p.backgroundImage)||$y(p.backgroundImage,"backgroundImage"),p.images&&!bn(p.images)&&(ec(p.images,"config.images"),p.images.forEach((v,E)=>{$y(v,"images[".concat(E,"]"))}))}(i);const s=[];i.images&&s.push(...i.images.map(p=>ki(ki(ki({},Hy),p),{},{zOrder:255}))),i.backgroundImage&&(s.push(ki(ki(ki({},Hy),i.backgroundImage),{},{zOrder:0})),delete i.backgroundImage),i.watermark&&(s.push(ki(ki(ki({},Hy),i.watermark),{},{zOrder:255})),delete i.watermark),i.images=s,i.transcodingUsers&&(i.userConfigs=i.transcodingUsers.map(p=>ki({},p)),i.userCount=i.transcodingUsers.length,delete i.transcodingUsers);const l=(i.userConfigs||[]).map(p=>typeof p.uid=="number"?Pe.resolve(p.uid):bD(p.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await Pe.all(l)).forEach((p,v)=>{i.userConfigs&&i.userConfigs[v]&&(i.userConfigs[v].uid=p)}),this.transcodingConfig=i,this.connection)try{var h;const p=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(bs(h=this.streamingTasks).call(h)).map(v=>v.taskId).join("#")});M.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(p.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(p){if(!p.data||!p.data.retry)throw p;p.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(v=>{M.warning("[".concat(this.spec.clientId,"] live streaming receive error"),p.toString(),"try to republish",v.url),this.startLiveStreamingTask(v.url,v.mode,p).then(()=>{M.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(v.url," success"))}).catch(E=>{M.error("[".concat(this.spec.clientId,"] live streaming republish failed"),v.url,E.toString()),this.onLiveStreamError&&this.onLiveStreamError(v.url,E)})})}}setInjectStreamConfig(r,i){this.injectConfig=Object.assign({},this.injectConfig,r),this.injectLoopTimes=i}async startLiveStreamingTask(r,i,s){var l;if(Array.from(bs(l=this.streamingTasks).call(l)).find(E=>E.mode===hr.INJECT)&&i===hr.INJECT)return new X(j.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&i===hr.TRANSCODE)throw new X(j.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let h={command:"PublishStream",ts:Date.now(),url:r,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};M.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(r,", mode: ").concat(i));const p=await this.taskMutex.lock();if(!this.connection&&s)return void p();if(this.streamingTasks.get(r)&&!s)return p(),new X(j.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(i))}catch(E){throw p(),E}switch(i){case hr.TRANSCODE:h.transcodingConfig=ki({},this.transcodingConfig);break;case hr.RAW:break;case hr.INJECT:h={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:r,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(h.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const v=this.lastTaskId++;try{const E=new Pe((y,R)=>{ei(this.retryTimeout).then(()=>{if(s)return R(s);const k=this.statusError.get(r);return k?(this.statusError.delete(r),R(k)):void 0})}),T=await Pe.race([this.connection.request("request",{clientRequest:h},!0,{url:r,command:"PublishStream",workerType:i===hr.TRANSCODE?1:2,requestByUser:!s,tid:v.toString()}),E]);this.isStartingStreamingTask=!1,M.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(T.code)),this.streamingTasks.set(r,{clientRequest:h,mode:i,url:r,taskId:v}),p()}catch(E){if(p(),this.isStartingStreamingTask=!1,!E.data||!E.data.retry||s)throw E;return E.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(r,i,E)):await this.startLiveStreamingTask(r,i,E)}}stopLiveStreamingTask(r){return new Pe((i,s)=>{const l=this.streamingTasks.get(r);if(!l||!this.connection)return new X(j.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const h=l.mode;l.abortTask=()=>{M.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(r),i()},this.connection.request("request",{clientRequest:{command:h===hr.INJECT?"UninjectStream":"UnpublishStream",url:l.url}},!1,{url:r,command:"UnPublishStream",workerType:h===hr.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(p=>{M.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(p.code)),this.streamingTasks.delete(r),this.streamingTasks.size===0&&h!==hr.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),i(),h===hr.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(Hc.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,r)}).catch(s)})}async controlInjectStream(r,i,s,l){const h=this.streamingTasks.get(r);if(!h||!this.connection||h.mode!==hr.INJECT)throw new X(j.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:r,control:i,audioVolume:s,position:l}})).serverResponse}resetAllTask(){var r;const i=Array.from(bs(r=this.streamingTasks).call(r));this.terminate();for(const s of i)this.startLiveStreamingTask(s.url,s.mode).catch(l=>{this.onLiveStreamError&&this.onLiveStreamError(s.url,l)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=Io.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(r){if(this.connection)throw new X(j.UNEXPECTED_ERROR,"live streaming connection has already connected");const i=await ti(this,md.REQUEST_WORKER_MANAGER_LIST,r);return this.uapResponse=i,this.connection=new SY(i.workerToken,this.spec,this.wsRetryConfig,r),this.connection.on(Ra.WARNING,(s,l)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(l,s)),this.connection.on(Ra.PUBLISH_STREAM_STATUS,s=>this.handlePublishStreamServer(s)),this.connection.on(Ra.INJECT_STREAM_STATUS,s=>this.handleInjectStreamServerStatus(s)),this.connection.on(Ra.REQUEST_NEW_ADDRESS,(s,l)=>{if(!this.connection)return l(new X(j.UNEXPECTED_ERROR,"can not get new live streaming address list"));ti(this,md.REQUEST_WORKER_MANAGER_LIST,r).then(h=>{this.uapResponse=h,s(h.addressList)}).catch(l)}),await this.connection.init(i.addressList),this.connection}handlePublishStreamServer(r){const i=r.serverStatus&&r.serverStatus.url||"empty_url",s=this.streamingTasks.get(i),l=r.reason;switch(r.code){case Wn.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Wn.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Wn.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Wn.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const p=new X(j.LIVE_STREAMING_CDN_ERROR,"",{code:r.code});if(s)return M.error(p.toString()),this.onLiveStreamError&&this.onLiveStreamError(i,p);if(!this.isStartingStreamingTask)return;this.statusError.set(i,p)}case Wn.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const p=new X(j.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,l);return this.onLiveStreamWarning&&this.onLiveStreamWarning(i,p)}case Wn.LIVE_STREAM_RESPONSE_WORKER_LOST:case Wn.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var h;if(!this.connection)return;this.connection.tryNextAddress();const p=Array.from(bs(h=this.streamingTasks).call(h));for(const v of p)v.abortTask?v.abortTask():(M.warning("[".concat(this.spec.clientId,"] publish stream status code"),r.code,"try to republish",v.url),this.startLiveStreamingTask(v.url,v.mode,new X(j.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:r.code})).then(()=>{M.debug("[".concat(this.spec.clientId,"] republish live stream success"),v.url)}).catch(E=>{M.error(E.toString()),this.onLiveStreamError&&this.onLiveStreamError(v.url,E)}));return}}}handleInjectStreamServerStatus(r){const i=Number(r.uid),s=r.serverStatus&&r.serverStatus.url;switch(r.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(Hc.INJECT_STREAM_STATUS_START_SUCCESS,i,s));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(Hc.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,i,s),void this.streamingTasks.delete(s);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(Hc.INJECT_STREAM_STATUS_START_UNAUTHORIZED,i,s),void this.streamingTasks.delete(s);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(Hc.INJECT_STREAM_STATUS_BROKEN,i,s),void this.streamingTasks.delete(s);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(Hc.INJECT_STREAM_STATUS_START_TIMEOUT,i,s),void this.streamingTasks.delete(s);default:return void M.debug("inject stream server status",r)}}hasUrl(r){return this.streamingTasks.has(r)}}class PD{constructor(){w(this,"destChannelMediaInfos",new Map),w(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(r){yP(r),this.srcChannelMediaInfo=r}addDestChannelInfo(r){yP(r),this.destChannelMediaInfos.set(r.channelName,r)}removeDestChannelInfo(r){Ly(r),this.destChannelMediaInfos.delete(r)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function xD(n){if(!(n instanceof PD))return new X(j.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const r=n.getSrcChannelMediaInfo(),i=n.getDestChannelMediaInfo();if(!r)return new X(j.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if(i.size===0)return new X(j.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}class CY extends xn{constructor(r,i,s){super(),w(this,"ws",void 0),w(this,"requestId",1),w(this,"heartBeatTimer",void 0),w(this,"joinInfo",void 0),w(this,"clientId",void 0),w(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),w(this,"onClose",l=>{this.emit("close"),this.dispose()}),w(this,"onMessage",l=>{const h=JSON.parse(l.data);if(!h||h.command!=="serverResponse"||!h.requestId)return h&&h.command==="serverStatus"&&h.serverStatus&&h.serverStatus.command?(this.emit("status",h.serverStatus),void this.emit(h.serverStatus.command,h.serverStatus)):void 0;this.emit("req_".concat(h.requestId),h)}),this.joinInfo=r,this.clientId=i,this.ws=new ou("cross-channel-".concat(this.clientId),s),this.ws.on(nt.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(nt.CONNECTED,this.onOpen),this.ws.on(nt.ON_MESSAGE,this.onMessage),this.ws.on(nt.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(r){const i=this.requestId++;return r.requestId=i,r.seq=i,this.ws.sendMessage(r),i}waitStatus(r){return new Pe((i,s)=>{const l=window.setTimeout(()=>{s(new X(j.TIMEOUT,"wait status timeout, status: ".concat(r)))},5e3);this.once(r,h=>{window.clearTimeout(l),h.state&&h.state!==0?s(new X(j.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(r))):i(void 0)}),this.once("dispose",()=>{window.clearTimeout(l),s(new X(j.WS_ABORT))})})}async request(r){if(this.ws.state==="closed")throw new X(j.WS_DISCONNECT);const i=()=>new Pe((p,v)=>{this.ws.once(nt.CLOSED,()=>v(new X(j.WS_ABORT))),this.ws.once(nt.CONNECTED,p)});this.ws.state!=="connected"&&await i();const s=this.sendMessage(r),l=new Pe((p,v)=>{const E=()=>{v(new X(j.WS_ABORT))};this.ws.once(nt.RECONNECTING,E),this.ws.once(nt.CLOSED,E),this.once("req_".concat(s),p),ei(3e3).then(()=>{this.removeAllListeners("req_".concat(s)),this.ws.off(nt.RECONNECTING,E),this.ws.off(nt.CLOSED,E),v(new X(j.TIMEOUT,"cross channel ws request timeout"))})}),h=await l;if(!h||h.code!==200)throw new X(j.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(h)));return h}async connect(r){this.ws.removeAllListeners(nt.REQUEST_NEW_URLS),this.ws.on(nt.REQUEST_NEW_URLS,i=>{i(r)}),await this.ws.init(r)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(r){const i=this.requestId++;return r.requestId=i,this.ws.sendMessage(r),i}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class TY extends xn{set state(r){r!==this._state&&(r!==bi.RELAY_STATE_FAILURE&&(this.errorCode=$c.RELAY_OK),this.emit("state",r,this.errorCode),this._state=r)}get state(){return this._state}constructor(r,i,s,l,h){super(),w(this,"joinInfo",void 0),w(this,"sid",void 0),w(this,"clientId",void 0),w(this,"cancelToken",Io.CancelToken.source()),w(this,"workerToken",void 0),w(this,"requestId",0),w(this,"signal",void 0),w(this,"prevChannelMediaConfig",void 0),w(this,"httpRetryConfig",void 0),w(this,"_resolution",void 0),w(this,"_state",bi.RELAY_STATE_IDLE),w(this,"errorCode",$c.RELAY_OK),w(this,"onStatus",p=>{M.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(p))),p&&p.command&&(p.command==="onAudioPacketReceived"&&this.emit("event",Qa.PACKET_RECEIVED_AUDIO_FROM_SRC),p.command==="onVideoPacketReceived"&&this.emit("event",Qa.PACKET_RECEIVED_VIDEO_FROM_SRC),p.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=$c.SRC_TOKEN_EXPIRED,this.state=bi.RELAY_STATE_FAILURE),p.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=$c.DEST_TOKEN_EXPIRED,this.state=bi.RELAY_STATE_FAILURE))}),w(this,"onReconnect",async()=>{M.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",Qa.NETWORK_DISCONNECTED),this.state=bi.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(p=>{this.state!==bi.RELAY_STATE_IDLE&&(M.error("auto restart channel media relay failed",p.toString()),this.errorCode=$c.SERVER_CONNECTION_LOST,this.state=bi.RELAY_STATE_FAILURE)})}),this.joinInfo=r,this.clientId=i,this.sid=lC(),this.signal=new CY(this.joinInfo,this.clientId,s),this.httpRetryConfig=l,this._resolution=h}async startChannelMediaRelay(r){if(this.state!==bi.RELAY_STATE_IDLE)throw new X(j.INVALID_OPERATION);this.state=bi.RELAY_STATE_CONNECTING,await this.connect(),M.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(r)}catch(i){throw i.data&&i.data.serverResponse&&i.data.serverResponse.command==="SetSourceChannel"?new X(j.CROSS_CHANNEL_FAILED_JOIN_SRC):i.data&&i.data.serverResponse&&i.serverResponse.command==="SetDestChannelStatus"?new X(j.CROSS_CHANNEL_FAILED_JOIN_DEST):i.data&&i.data.serverResponse&&i.serverResponse.command==="StartPacketTransfer"?new X(j.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):i}this.prevChannelMediaConfig=r}async updateChannelMediaRelay(r){if(this.state!==bi.RELAY_STATE_RUNNING)throw new X(j.INVALID_OPERATION);await this.sendUpdateMessage(r),this.prevChannelMediaConfig=r}async setVideoProfile(r){if(this._resolution=r,this.state!==bi.RELAY_STATE_RUNNING)throw new X(j.INVALID_OPERATION);const i=this.genMessage(Jr.SetVideoProfile);await this.signal.request(i),M.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),M.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=bi.RELAY_STATE_IDLE,this.dispose()}dispose(){M.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=Io.CancelToken.source(),this.state=bi.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const r=await vY(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=r.workerToken,await this.signal.connect(r.addressList),this.emit("event",Qa.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(r){const i=this.genMessage(Jr.StopPacketTransfer);await this.signal.request(i),await this.signal.waitStatus("Normal Quit"),M.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const s=this.genMessage(Jr.SetSdkProfile,r);await this.signal.request(s),M.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const l=this.genMessage(Jr.SetSourceChannel,r);await this.signal.request(l),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",Qa.PACKET_JOINED_SRC_CHANNEL),M.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const h=this.genMessage(Jr.SetSourceUserId,r);await this.signal.request(h),M.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const p=this.genMessage(Jr.SetDestChannel,r);await this.signal.request(p),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",Qa.PACKET_JOINED_DEST_CHANNEL),M.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const v=this.genMessage(Jr.StartPacketTransfer,r);await this.signal.request(v),this.emit("event",Qa.PACKET_SENT_TO_DEST_CHANNEL),this.state=bi.RELAY_STATE_RUNNING,M.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(r){const i=this.genMessage(Jr.UpdateDestChannel,r);await this.signal.request(i),this.emit("event",Qa.PACKET_UPDATE_DEST_CHANNEL),M.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const r=this.genMessage(Jr.StopPacketTransfer);await this.signal.request(r),M.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(r,i){const s=[],l=[],h=[];this.requestId+=1;const p={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:Yo,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};p.sdkVersion==="4.18.1"&&(p.sdkVersion="0.0.1");let v=null,E=null;switch(r){case Jr.SetSdkProfile:return p.clientRequest={command:"SetSdkProfile",type:"multi_channel"},p;case Jr.SetSourceChannel:if(E=i&&i.getSrcChannelMediaInfo(),!E)throw new X(j.UNEXPECTED_ERROR,"can not find source config");return p.clientRequest={command:"SetSourceChannel",uid:"0",channelName:E.channelName,token:E.token||this.joinInfo.appId},p;case Jr.SetSourceUserId:if(E=i&&i.getSrcChannelMediaInfo(),!E)throw new X(j.UNEXPECTED_ERROR,"can not find source config");return p.clientRequest={command:"SetSourceUserId",uid:E.uid+""},p;case Jr.SetDestChannel:if(v=i&&i.getDestChannelMediaInfo(),!v)throw new X(j.UNEXPECTED_ERROR,"can not find dest config");return v.forEach(T=>{s.push(T.channelName),l.push(T.uid+""),h.push(T.token||this.joinInfo.appId)}),p.clientRequest={command:"SetDestChannel",channelName:s,uid:l,token:h},p;case Jr.StartPacketTransfer:return p.clientRequest={command:"StartPacketTransfer"},p;case Jr.Reconnect:return p.clientRequest={command:"Reconnect"},p;case Jr.StopPacketTransfer:return p.clientRequest={command:"StopPacketTransfer"},p;case Jr.UpdateDestChannel:if(v=i&&i.getDestChannelMediaInfo(),!v)throw new X(j.UNEXPECTED_ERROR,"can not find dest config");return v.forEach(T=>{s.push(T.channelName),l.push(T.uid+""),h.push(T.token||this.joinInfo.appId)}),p.clientRequest={command:"UpdateDestChannel",channelName:s,uid:l,token:h},p;case Jr.SetVideoProfile:p.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return p}}const EC=n=>{const r=document.createElement("canvas");return r.width=2,r.height=2,new Pe((i,s)=>{r.toBlob(async l=>{if(r.remove(),l){const h=await DD(l);i({buffer:h,width:r.width,height:r.height})}else s(new X(j.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},n,1)})},DD=async n=>{const r=await n.arrayBuffer();return new Uint8Array(r)};function kD(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function LD(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?kD(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):kD(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class _C{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(r){r!==this._videoElementStatus&&(M.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(r)),this._videoElementStatus=r)}constructor(r){w(this,"trackId",void 0),w(this,"config",void 0),w(this,"onFirstVideoFrameDecoded",void 0),w(this,"freezeTimeCounterList",[]),w(this,"renderFreezeAccTime",0),w(this,"isKeepLastFrame",!1),w(this,"timeUpdatedCount",0),w(this,"freezeTime",0),w(this,"playbackTime",0),w(this,"lastTimeUpdatedTime",0),w(this,"autoplayFailed",!1),w(this,"videoTrack",void 0),w(this,"videoElement",void 0),w(this,"cacheVideoElement",void 0),w(this,"videoElementCheckInterval",void 0),w(this,"_videoElementStatus",qr.NONE),w(this,"isGettingVideoDimensions",!1),w(this,"startGetVideoDimensions",()=>{const i=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return M.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(i,500)};!this.isGettingVideoDimensions&&i()}),w(this,"autoResumeAfterInterruption",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&Gt.curState==="running"&&(M.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(dN())),gN()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),w(this,"handleVideoEvents",i=>{switch(i.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=qr.PLAYING;break;case"loadeddata":if(this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch{}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=qr.CANPLAY;break;case"stalled":this.videoElementStatus=qr.STALLED;break;case"suspend":this.videoElementStatus=qr.SUSPEND;break;case"pause":this.videoElementStatus=qr.PAUSED,Ci()||Cs()||yi()&&this.autoplayFailed||!this.videoTrack||this.videoTrack.readyState!=="live"||(M.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=qr.WAITING;break;case"abort":this.videoElementStatus=qr.ABORT;break;case"ended":this.videoElementStatus=qr.ENDED;break;case"emptied":this.videoElementStatus=qr.EMPTIED;break;case"error":{this.videoElementStatus=qr.ERROR;const s=this.videoElement.error;s&&M.error("[".concat(this.trackId,"] media error, code: ").concat(s.code,", message: ").concat(s.message));break}case"timeupdate":{const s=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=s);const l=s-this.lastTimeUpdatedTime,h=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=s,nc.lastVisibleTime<nc.lastHiddenTime||h<nc.lastHiddenTime||h<nc.lastVisibleTime)return;for(l>ne("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=l),this.playbackTime+=l;this.playbackTime>=6e3;){this.playbackTime-=6e3;const p=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(p),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),w(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&(M.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(dN())),gN()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),this.trackId=r.trackId,this.config=r,r.element instanceof HTMLVideoElement?this.videoElement=r.element:this.videoElement=document.createElement("video"),Gt.on(br.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Gt.on(br.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var r;return(r=this.videoElement.parentElement)!==null&&r!==void 0?r:void 0}updateConfig(r){this.config=r,this.trackId=r.trackId,r.element!==this.videoElement&&(this.destroy(),this.videoElement=r.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(r){this.videoTrack!==r&&(this.videoTrack=r,this.initVideoElement())}play(r){const i=this.videoElement.play();i&&i.catch&&i.catch(l=>{r&&Me.autoplayFailed(r,"video",l.message,this.trackId),l.name==="NotAllowedError"?(M.warning("detected video element autoplay failed",l),this.autoplayFailed=!0,this.handleAutoPlayFailed()):M.warning("[".concat(this.trackId,"] play warning: "),l)});const s=$t();if((s.name==="Safari"&&Number(s.version)===15||od())&&i&&i.then&&i.catch){const l=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};i.then(l).catch(l)}}getCurrentFrame(){const r=document.createElement("canvas");r.width=this.videoElement.videoWidth,r.height=this.videoElement.videoHeight;const i=r.getContext("2d");if(!i)return M.error("create canvas context failed!"),new ImageData(2,2);i.drawImage(this.videoElement,0,0,r.width,r.height);const s=i.getImageData(0,0,r.width,r.height);return r.remove(),s}async getCurrentFrameToUint8Array(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const s=document.createElement("canvas");s.width=this.videoElement.videoWidth,s.height=this.videoElement.videoHeight;const l=s.getContext("2d");return l?(l.drawImage(this.videoElement,0,0,s.width,s.height),new Pe((h,p)=>{s.toBlob(async v=>{if(s.remove(),v){const E=await DD(v);h({buffer:E,width:s.width,height:s.height})}else p(new X(j.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},r,i<0?.1:i>1?1:i)})):await EC(r)}destroy(){Gt.off(br.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Gt.off(br.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[]}initVideoElement(){if(this.videoElementStatus=qr.INIT,!this.videoElementCheckInterval&&(MD.forEach(h=>{this.videoElement.addEventListener(h,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{(function(h){return h!==document.body&&document.body.contains(h)})(this.videoElement)||(this.videoElementStatus=qr.DESTROYED)},1e3),ne("ENABLE_VIDEO_FRAME_CALLBACK"))){var r,i;let h;const p=(v,E)=>{if(this.videoElementStatus===qr.PLAYING){if(h){const R=E.presentationTime-h.presentationTime;R>ne("VIDEO_FREEZE_DURATION")&&nc.lastVisibleTime>=nc.lastHiddenTime&&h.timestamp>nc.lastVisibleTime&&h.timestamp>nc.lastHiddenTime&&(this.renderFreezeAccTime+=R)}h=LD(LD({},E),{},{timestamp:v})}var T,y;ne("ENABLE_VIDEO_FRAME_CALLBACK")&&((T=(y=this.videoElement).requestVideoFrameCallback)===null||T===void 0||T.call(y,p))};(r=(i=this.videoElement).requestVideoFrameCallback)===null||r===void 0||r.call(i,p)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),e0()&&(this.videoElement.poster="noposter");const s=$t();s.name==="Safari"&&Number(s.version)===15||od()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Mn()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Mn()&&this.videoElement.load());const l=this.videoElement.play();l!==void 0&&l.catch(h=>{M.debug("[".concat(this.trackId,"] playback interrupted"),h.toString())})}resetVideoElement(){MD.forEach(r=>{this.videoElement&&this.videoElement.removeEventListener(r,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=qr.NONE}handleAutoPlayFailed(){const r=i=>{i.preventDefault(),this.videoElement.play().then(()=>{M.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(s=>{M.error(s)}),this.autoplayFailed=!1,ip()?document.body.removeEventListener("click",r,!0):(document.body.removeEventListener("touchstart",r,!0),document.body.removeEventListener("mousedown",r,!0))};ip()?document.body.addEventListener("click",r,!0):(document.body.addEventListener("touchstart",r,!0),document.body.addEventListener("mousedown",r,!0)),VP()}}const MD=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class UD extends _C{constructor(r){super(r),w(this,"container",void 0),w(this,"slot",void 0),this.slot=r.element,this.updateConfig(r)}updateConfig(r){this.config=r,this.trackId=r.trackId;const i=r.element;i!==this.slot&&(this.destroy(),this.slot=i),this.createElements()}updateVideoTrack(r){this.videoTrack!==r&&(this.videoTrack=r,this.createElements())}play(r){var i;(i=this.container)!==null&&i!==void 0&&i.contains(this.videoElement)&&super.play(r)}getCurrentFrame(){var r;return(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(r){var i;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(i=this.container)!==null&&i!==void 0&&i.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(r,s):await EC(r)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",ne("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var r;!this.container||(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var r;if((r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=document.createElement("video")}}resetVideoElement(){var r;(r=this.container)!==null&&r!==void 0&&r.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}function A0(n){const r={};n.facingMode&&(r.facingMode=n.facingMode),n.cameraId&&(r.deviceId={exact:n.cameraId});const i=Xl(n.encoderConfig);return r.width=i.width,r.height=i.height,!EN()&&i.frameRate&&(r.frameRate=i.frameRate),$t().name===qt.EDGE&&typeof r.frameRate=="object"&&(r.frameRate.max=60),Mn()&&(r.frameRate={ideal:30,max:30}),r}function bY(n){const r={};n.screenSourceType&&(r.mediaSource=n.screenSourceType),n.extensionId&&oy()&&(r.extensionId=n.extensionId);const{displaySurface:i,selfBrowserSurface:s,surfaceSwitching:l,systemAudio:h}=n;(ay(107)||hN(107)||pN(93))&&(i&&(wr(i,"displaySurface",["browser","window","monitor"]),r.displaySurface=i),s?(wr(s,"selfBrowserSurface",["exclude","include"]),r.selfBrowserSurface=s):r.selfBrowserSurface="include",l&&(wr(l,"surfaceSwitching",["exclude","include"]),r.surfaceSwitching=l)),(ay(105)||hN(105)||pN(91))&&h&&(wr(h,"systemAudio",["exclude","include"]),r.systemAudio=h),n.electronScreenSourceId&&(r.sourceId=n.electronScreenSourceId);const p=n.encoderConfig?wy(n.encoderConfig):null;return r.mandatory={chromeMediaSource:"desktop",maxWidth:p?p.width:void 0,maxHeight:p?p.height:void 0},p&&(p.frameRate&&(typeof p.frameRate=="number"?(r.mandatory.maxFrameRate=p.frameRate,r.mandatory.minFrameRate=p.frameRate):(r.mandatory.maxFrameRate=p.frameRate.max||p.frameRate.ideal||p.frameRate.exact||void 0,r.mandatory.minFrameRate=p.frameRate.min||p.frameRate.ideal||p.frameRate.exact||void 0),r.frameRate=p.frameRate),p.width&&(r.width=p.width),p.height&&(r.height=p.height)),r}function VD(n){const r={};if(EN()||(n.AGC!==void 0&&(r.autoGainControl=n.AGC),n.AEC!==void 0&&(r.echoCancellation=n.AEC),n.ANS!==void 0&&(r.noiseSuppression=n.ANS,oy()&&n.ANS&&(r.googHighpassFilter=n.ANS))),n.encoderConfig){const i=h0(n.encoderConfig);r.channelCount=i.stereo?2:1,r.sampleRate=i.sampleRate,r.sampleSize=i.sampleSize}return n.microphoneId&&(r.deviceId={exact:n.microphoneId}),e0()&&(r.sampleRate=void 0),r}var Id,N0;(function(n){n.COVERED="COVERED",n.POSITION="POSITION",n.SIZE="SIZE",n.STYLE="STYLE"})(Id||(Id={})),function(n){n.UNMOUNTED="UNMOUNTED",n.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(N0||(N0={}));var FD,BD,jD,HD,$D,WD,GD,zD,KD,YD,qD,XD,JD,QD,ZD,ek,tk,nk,rk,ik,ok,ak,sk,ck,St,lk,uk,dk,hk,pk,fk,mk,gk,Qo,vk=new class{constructor(){w(this,"_clientSize",null),w(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),w(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),w(this,"getStyle",n=>window.getComputedStyle(n,null)),w(this,"checkCssVisibleProperty",n=>{let r=!0;const i=this.getStyle(n),{display:s,visibility:l,opacity:h,filter:p}=i;return(s==="none"||["hidden","collapse"].includes(l)||Number(h)<.1)&&(r=!1),r?(p&&p.split(" ").filter(v=>{const E=v.split("(")[0];return["brightness","blur","opacity"].includes(E)}).map(v=>{const[E,T]=v.split(/\(|\)/);return[E,Number(T.match(/^[0-9\.]+/))]}).forEach(v=>{const[E,T]=v;switch(E){case"brightness":(T<.1||T>3)&&(r=!1);break;case"blur":T>3&&(r=!1);break;case"opacity":T<.1&&(r=!1)}}),r):!1}),w(this,"checkPropertyUpToAllParentNodes",(n,r)=>{let i=!0,s=!0;const l=p=>r(p);let h=n;for(;h&&s;)l(h)||(i=!1,s=!1),h=h.parentElement,h||(s=!1);return i}),w(this,"checkActualCssVisibleIncludeInherit",n=>this.checkPropertyUpToAllParentNodes(n,this.checkCssVisibleProperty)),w(this,"getSizeAboutClient",n=>{const{width:r,height:i,left:s,right:l,top:h,bottom:p}=n.getBoundingClientRect(),v=this.getClientWidth(),E=this.getClientHeight();return{width:r,height:i,left:s,right:l,top:h,bottom:p,clientWidth:v,clientHeight:E,clientMin:Math.min(v,E)}}),w(this,"checkActualSize",()=>{const{width:n,height:r,clientMin:i}=this._clientSize;return this.checkSizeIsVisible(n,r,i)}),w(this,"elementFromPoint",(n,r)=>document.elementFromPoint?document.elementFromPoint(n,r):null),w(this,"checkCoverForAPoint",(n,r,i)=>{const s=this.elementFromPoint(n,r);return s!==null&&s!==i}),w(this,"getPointPositionList",()=>{const{width:n,height:r,left:i,top:s}=this._clientSize,l=n/6,h=r/6,p=[],v=10**6;for(let E=0;E<5;E++)for(let T=0;T<5;T++){const y=(i*v+(E===0?.1:E===4?(l*E*v-1e5)/v:l*E)*v)/v,R=(s*v+(T===0?.1:T===4?(h*T*v-1e5)/v:h*T)*v)/v;p.push({x:y,y:R})}return[...p]}),w(this,"checkElementCover",n=>this.getPointPositionList().map(r=>this.checkCoverForAPoint(r.x,r.y,n)).filter(r=>!!r).length>6),w(this,"checkSizeIsVisible",(n,r,i)=>(n>50||i/n<=10)&&(r>50||i/r<=10)),w(this,"checkSizeOfPartInClient",()=>{const{left:n,right:r,top:i,bottom:s,clientHeight:l,clientWidth:h,clientMin:p}=this._clientSize;let v,E,T,y;if(n<0)v=0;else{if(!(n<h))return!1;v=n}if(r<0)return!1;if(E=r<h?r:h,i<0)T=0;else{if(!(i<l))return!1;T=i}if(s<0)return!1;y=s<l?s:l;const R=E-v,k=y-T;return this.checkSizeIsVisible(R,k,p)}),w(this,"returnHiddenResult",n=>(this._clientSize=null,{visible:!1,reason:n})),w(this,"checkOneElementVisible",n=>{if(n instanceof HTMLElement){if(this.checkElementIsMountedOnDom(n)){if(this.checkActualCssVisibleIncludeInherit(n)){if(this._clientSize=this.getSizeAboutClient(n),this.checkElementCover(n))return this.returnHiddenResult(Id.COVERED);{const r=this.checkActualSize(),i=this.checkSizeOfPartInClient();return r&&!i?this.returnHiddenResult(Id.POSITION):r?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(Id.SIZE)}}return this.returnHiddenResult(Id.STYLE)}return this.returnHiddenResult(N0.UNMOUNTED)}return this.returnHiddenResult(N0.INVALID_HTML_ELEMENT)}),w(this,"checkElementIsMountedOnDom",n=>this.checkPropertyUpToAllParentNodes(n,r=>r.nodeName.toUpperCase()!=="HTML"?r.parentElement!==null:!!document.documentElement))}};function Ek(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function vp(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Ek(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ek(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}let ar=(FD=Ge({argsMap:(n,r,i)=>[n.getTrackId(),typeof r=="string"?r:r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",i]}),BD=Vn(),jD=Ge({argsMap:n=>[n.getTrackId()]}),HD=Ed("LocalVideoTrack","_enabledMutex"),$D=Ge({argsMap:(n,r)=>[n.getTrackId(),r]}),WD=Vn(),GD=Ed("LocalVideoTrack","_enabledMutex"),zD=Ge({argsMap:(n,r)=>[n.getTrackId(),r]}),KD=Vn(),YD=Ge({argsMap:(n,r)=>[n.getTrackId(),r]}),qD=Vn(),XD=Vn(),JD=Ge({argsMap:(n,r,i)=>[n.getTrackId(),r,i]}),QD=Vn(),ZD=Vn(),ek=Vn(),tk=Vn(),nk=Vn(),rk=Vn(),ik=Vn(),ok=Ge({argsMap:(n,r)=>[n.getTrackId(),r.name]}),ak=Ge({argsMap:n=>[n.getTrackId()]}),sk=Ge({argsMap:n=>[n.getTrackId()]}),ck=Ge({argsMap:(n,r,i)=>[n.getTrackId(),r.label,i]}),_e((St=class UF extends eC{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==qr.PLAYING)}get processorContext(){return this._processorContext}set processorContext(r){this._processorContext=r}get __className__(){return"LocalVideoTrack"}constructor(r,i,s,l,h,p){if(super(r,h),w(this,"trackMediaType","video"),w(this,"_player",void 0),w(this,"_videoVisibleTimer",null),w(this,"_previousVideoVisibleStatus",void 0),w(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),w(this,"_encoderConfig",void 0),w(this,"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),w(this,"_optimizationMode",void 0),w(this,"_videoHeight",void 0),w(this,"_videoWidth",void 0),w(this,"_forceBitrateLimit",void 0),w(this,"_enabled",!0),w(this,"processorDestination",void 0),w(this,"_processorContext",void 0),yi()){const{width:v,height:E}=r.getSettings();this._videoWidth=v,this._videoHeight=E}else this.updateMediaStreamTrackResolution();this._encoderConfig=i,this._scalabiltyMode=s,this._optimizationMode=l,this._hints=p||[],this._hints.indexOf(gr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile(),i&&this._hints.indexOf(gr.CUSTOM_TRACK)!==-1&&this.setEncoderConfiguration(i),this.processorContext=new rx(this.getTrackId(),"local"),this.processorDestination=new nx(this.processorContext),this.bindProcessorDestinationEvents()}play(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof r=="string"){const l=document.getElementById(r);l?r=l:(M.warning("[".concat(this.getTrackId(),'] can not find "#').concat(r,'" element, use document.body')),r=document.body)}M.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(i));const s=vp(vp(vp({},this._getDefaultPlayerConfig()),i),{},{trackId:this.getTrackId(),element:r});this._player?this._player.updateConfig(s):(r instanceof HTMLVideoElement?this._player=new _C(s):this._player=new UD(s),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const l=this.getVideoElementVisibleStatus();this.safeEmit(Wc.VIDEO_ELEMENT_VISIBLE_STATUS,l)}catch{}},ne("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,M.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(r,i){if(!i){if(r===this._enabled)return;this.stateCheck("enabled",r)}if(M.info("[".concat(this.getTrackId(),"] start setEnabled"),r),!r){this._originMediaStreamTrack.enabled=!1;try{await Fn(this,Ze.NEED_DISABLE_TRACK,this)}catch(s){throw M.error("[".concat(this.getTrackId(),"] setEnabled to false error"),s.toString()),s}return i||(this._enabled=!1),void M.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await Fn(this,Ze.NEED_ENABLE_TRACK,this)}catch(s){throw M.error("[".concat(this.getTrackId(),"] setEnabled to true error"),s.toString()),s}M.info("[".concat(this.getTrackId(),"] setEnabled to true success")),i||(this._enabled=!0)}async setMuted(r){r!==this._muted&&(this.stateCheck("muted",r),this._muted=r,this._originMediaStreamTrack.enabled=!r,M.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(r)),r?await Fn(this,Ze.NEED_MUTE_TRACK,this):await Fn(this,Ze.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(r,i){if(!this._enabled)throw new X(j.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(r=Xl(r),this._forceBitrateLimit&&(r.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:r.bitrateMax,r.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:r.bitrateMin),r.width||r.height||r.frameRate){const s=A0({encoderConfig:r});(yi()||Ci()||Cs())&&(s.deviceId=void 0),M.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(r),JSON.stringify(s));try{await this._originMediaStreamTrack.applyConstraints(s),this.updateMediaStreamTrackResolution()}catch(l){const h=new X(j.UNEXPECTED_ERROR,l.toString());throw M.error("[".concat(this.getTrackId(),"] applyConstraints error"),h.toString()),h}}this._encoderConfig=r,this._hints.indexOf(gr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Fn(this,Ze.NEED_UPDATE_VIDEO_ENCODER,this)}catch(s){return s.throw()}}getStats(){return pp(()=>{M.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),Oa(this,Ze.GET_STATS)||vp({},jy)}async setBeautyEffect(r){M.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(r,i):await EC(r)}clone(r,i,s,l){const h=this._mediaStreamTrack.clone();return new UF(h,r,i,s,l)}async setBitrateLimit(r){if(M.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(r))),r){this._forceBitrateLimit=r,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<r.max_bitrate?this._encoderConfig.bitrateMax:r.max_bitrate:this._encoderConfig.bitrateMax=r.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=r.min_bitrate);try{await Fn(this,Ze.NEED_UPDATE_VIDEO_ENCODER,this)}catch(i){return i.throw()}}}async setOptimizationMode(r){if(r!=="motion"&&r!=="detail"&&r!=="balanced")return void M.error(j.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const i=this._optimizationMode;try{this._optimizationMode=r,await Fn(this,Ze.SET_OPTIMIZATION_MODE,this)}catch(s){throw this._optimizationMode=i,M.error("[".concat(this.getTrackId(),"] set optimization mode failed"),s.toString()),s}M.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(r,")"))}setScalabiltyMode(r){if(r.numSpatialLayers===1&&r.numTemporalLayers!==1)return M.error(j.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=r,M.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(r,")"))}updateMediaStreamTrackResolution(){Zx(this._originMediaStreamTrack).then(r=>{let[i,s]=r;this._videoHeight=s,this._videoWidth=i}).catch(b0)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:r,height:i,frameRate:s}=this.getMediaStreamTrackSettings();if(!r||!i||!s)return;const[l,h]=function(p,v,E){const T=ne("BITRATE_ADAPTER_TYPE");let y;const R=200*Math.pow(E/15,.6)*Math.pow(p*v/640/360,.75),k=R;if(T==="STANDARD_BITRATE")y=4*R;else{if(T!=="COMPATIABLE_BITRATE")return;y=2*R}return[Math.floor(y),Math.floor(k)]}(r,i,s)||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=h,this._encoderConfig.bitrateMax=l,M.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(r,", h: ").concat(i,", fps: ").concat(s,"] => [brMax: ").concat(l,", brMin: ").concat(h,"]")))}getVideoElementVisibleStatus(){try{var r,i;const s=this==null||(r=this._player)===null||r===void 0?void 0:r.getContainerElement(),l={track:this,element:this==null||(i=this._player)===null||i===void 0?void 0:i.getVideoElement(),slot:s==null?void 0:s.parentElement},{element:h,slot:p}=l;if(this.isPlaying&&h instanceof HTMLVideoElement&&p instanceof HTMLElement){const v=vk.checkOneElementVisible(h),E=Object.assign({},v);if(E.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=E.visible;const T=Me.reportApiInvoke(null,{tag:On.TRACER,name:nr.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});E.visible?T.onSuccess("Video is visible"):T.onSuccess("Invisible because of ".concat(E.reason))}return E}return}catch(s){throw new X(j.GET_VIDEO_ELEMENT_VISIBLE_ERROR,s.message)}}async renewMediaStreamTrack(r){}pipe(r){if(this.processor===r)return r;if(r._source)throw new X(j.INVALID_OPERATION,"Processor ".concat(r.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=r,this.processor._source=this,r.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),r}unpipe(){if(!this.processor)return;const r=this.processor;this.processor._source=void 0,this.processor=void 0,r.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}async replaceTrack(r,i){if(!(r instanceof MediaStreamTrack))throw new X(j.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if(r.kind!=="video")throw new X(j.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(r,i,!0),this.updateMediaStreamTrackResolution()}bindProcessorDestinationEvents(){this.processorDestination.on(Qr.ON_TRACK,async r=>{r?r!==this._mediaStreamTrack&&(this._mediaStreamTrack=r,this._updatePlayerSource(),await Fn(this,Ze.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Fn(this,Ze.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Qr.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(qi.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(qi.REQUEST_CONSTRAINTS)}}).prototype,"play",[FD,BD],Object.getOwnPropertyDescriptor(St.prototype,"play"),St.prototype),_e(St.prototype,"stop",[jD],Object.getOwnPropertyDescriptor(St.prototype,"stop"),St.prototype),_e(St.prototype,"setEnabled",[HD,$D,WD],Object.getOwnPropertyDescriptor(St.prototype,"setEnabled"),St.prototype),_e(St.prototype,"setMuted",[GD,zD,KD],Object.getOwnPropertyDescriptor(St.prototype,"setMuted"),St.prototype),_e(St.prototype,"setEncoderConfiguration",[YD,qD],Object.getOwnPropertyDescriptor(St.prototype,"setEncoderConfiguration"),St.prototype),_e(St.prototype,"getStats",[XD],Object.getOwnPropertyDescriptor(St.prototype,"getStats"),St.prototype),_e(St.prototype,"setBeautyEffect",[JD,QD],Object.getOwnPropertyDescriptor(St.prototype,"setBeautyEffect"),St.prototype),_e(St.prototype,"getCurrentFrameData",[ZD],Object.getOwnPropertyDescriptor(St.prototype,"getCurrentFrameData"),St.prototype),_e(St.prototype,"getCurrentFrameImage",[ek],Object.getOwnPropertyDescriptor(St.prototype,"getCurrentFrameImage"),St.prototype),_e(St.prototype,"setBitrateLimit",[tk],Object.getOwnPropertyDescriptor(St.prototype,"setBitrateLimit"),St.prototype),_e(St.prototype,"setOptimizationMode",[nk],Object.getOwnPropertyDescriptor(St.prototype,"setOptimizationMode"),St.prototype),_e(St.prototype,"setScalabiltyMode",[rk],Object.getOwnPropertyDescriptor(St.prototype,"setScalabiltyMode"),St.prototype),_e(St.prototype,"updateMediaStreamTrackResolution",[ik],Object.getOwnPropertyDescriptor(St.prototype,"updateMediaStreamTrackResolution"),St.prototype),_e(St.prototype,"pipe",[ok],Object.getOwnPropertyDescriptor(St.prototype,"pipe"),St.prototype),_e(St.prototype,"unpipe",[ak],Object.getOwnPropertyDescriptor(St.prototype,"unpipe"),St.prototype),_e(St.prototype,"close",[sk],Object.getOwnPropertyDescriptor(St.prototype,"close"),St.prototype),_e(St.prototype,"replaceTrack",[ck],Object.getOwnPropertyDescriptor(St.prototype,"replaceTrack"),St.prototype),St),_k=(lk=Ge({argsMap:(n,r)=>[n.getTrackId(),r]}),uk=Vn(),dk=Ed("CameraVideoTrack","_enabledMutex"),hk=Ge({argsMap:(n,r)=>[n.getTrackId(),r]}),pk=Vn(),fk=Ge({argsMap:(n,r)=>[n.getTrackId(),r]}),mk=Vn(),gk=Ge({argsMap:n=>[n.getTrackId()]}),_e((Qo=class extends ar{get __className__(){return"CameraVideoTrack"}constructor(n,r,i,s,l,h){super(n,Xl(r.encoderConfig),s,l,h),w(this,"_config",void 0),w(this,"_originalConstraints",void 0),w(this,"_constraints",void 0),w(this,"_enabled",!0),w(this,"_deviceName","default"),w(this,"tryResumeVideoForIOS15_16WeChat",async()=>{(od()||sy())&&!function(){const p=$t();if(p.os!==Kr.IOS||!p.osVersion)return!1;const v=p.osVersion.split(".");return Number(v[0])===15&&Number(v[1])>=2}()&&vN()&&this._enabled&&!this._isClosed&&(M.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=r,this._originalConstraints=i,this._constraints=i,this._deviceName=n.label,this._encoderConfig=Xl(this._config.encoderConfig),Gt.on(br.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Gt.on(br.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(n){if(M.info("[".concat(this.getTrackId(),"] set device to ").concat(n)),this._enabled)try{const r=await Do.getDeviceById(n),i={};i.video=vp({},this._constraints),i.video.deviceId={exact:n},i.video.facingMode=void 0,this._originMediaStreamTrack.stop();let s=null;try{s=await wa(i,this.getTrackId())}catch(l){throw M.error("[".concat(this.getTrackId(),"] setDevice failed"),l.toString()),s=await wa({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(s.getVideoTracks()[0],!1),l}await this._updateOriginMediaStreamTrack(s.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=r.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(r){throw M.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}else try{const r=await Do.getDeviceById(n);this._deviceName=r.label,this._config.cameraId=n,this._constraints.deviceId={exact:n}}catch(r){throw M.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}M.info("[".concat(this.getTrackId(),"] setDevice success"))}async setEnabled(n,r){if(!r){if(n===this._enabled)return;this.stateCheck("enabled",n)}if(M.info("[".concat(this.getTrackId(),"] start setEnabled"),n),n){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const i=await wa({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1)}await Fn(this,Ze.NEED_ENABLE_TRACK,this)}catch(i){throw M.error("[".concat(this.getTrackId(),"] setEnabled true error"),i.toString()),i}this.updateMediaStreamTrackResolution(),M.info("[".concat(this.getTrackId(),"] setEnabled to true success")),r||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),r||(this._enabled=!1);try{await Fn(this,Ze.NEED_DISABLE_TRACK,this)}catch(i){throw M.error("[".concat(this.getTrackId(),"] setEnabled to false error"),i.toString()),i}M.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(n,r){if(!this._enabled)throw new X(j.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");n=Xl(n),this._forceBitrateLimit&&(n.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:n.bitrateMax,n.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:n.bitrateMin);const i=or(this._config);i.encoderConfig=n;const s=A0(i);(yi()||Ci()||Cs())&&(s.deviceId=void 0),M.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(n),JSON.stringify(s));try{await this._originMediaStreamTrack.applyConstraints(s),this.updateMediaStreamTrackResolution()}catch(l){const h=new X(j.UNEXPECTED_ERROR,l.toString());throw M.error("[".concat(this.getTrackId(),"] applyConstraints error"),h.toString()),h}this._config=i,this._constraints=s,this._originalConstraints=s,this._encoderConfig=n,this._hints.indexOf(gr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Fn(this,Ze.NEED_UPDATE_VIDEO_ENCODER,this)}catch(l){return l.throw()}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Ci()||Cs())&&this._enabled&&!this._isClosed&&Gt.duringInterruption){const n=async()=>{Gt.off(br.IOS_INTERRUPTION_END,n),this._enabled&&!this._isClosed&&(M.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Gt.on(br.IOS_INTERRUPTION_END,n)}else M.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Wc.TRACK_ENDED)}async renewMediaStreamTrack(n){const r=n||this._constraints,i=Do.searchDeviceIdByName(this._deviceName);if(i&&!r.deviceId&&(r.deviceId={exact:i}),this._enabled){const s=await wa({video:r},this.getTrackId());this._constraints=r,await this._updateOriginMediaStreamTrack(s.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),Gt.off(br.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Gt.off(br.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}bindProcessorContextEvents(){this.processorContext.on(qi.REQUEST_UPDATE_CONSTRAINTS,async(n,r,i)=>{try{const s=Object.assign({},this._originalConstraints,...n);await this.renewMediaStreamTrack(s),r()}catch(s){i(s)}}),this.processorContext.on(qi.REQUEST_CONSTRAINTS,async n=>{n(this._originMediaStreamTrack.getSettings())})}}).prototype,"setDevice",[lk,uk],Object.getOwnPropertyDescriptor(Qo.prototype,"setDevice"),Qo.prototype),_e(Qo.prototype,"setEnabled",[dk,hk,pk],Object.getOwnPropertyDescriptor(Qo.prototype,"setEnabled"),Qo.prototype),_e(Qo.prototype,"setEncoderConfiguration",[fk,mk],Object.getOwnPropertyDescriptor(Qo.prototype,"setEncoderConfiguration"),Qo.prototype),_e(Qo.prototype,"close",[gk],Object.getOwnPropertyDescriptor(Qo.prototype,"close"),Qo.prototype),Qo);class SC{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}constructor(r,i){w(this,"uid",void 0),w(this,"_uintid",void 0),w(this,"_trust_in_room_",!0),w(this,"_trust_audio_enabled_state_",!0),w(this,"_trust_video_enabled_state_",!0),w(this,"_trust_audio_mute_state_",!0),w(this,"_trust_video_mute_state_",!0),w(this,"_audio_muted_",!1),w(this,"_video_muted_",!1),w(this,"_audio_enabled_",!0),w(this,"_video_enabled_",!0),w(this,"_audio_added_",!1),w(this,"_video_added_",!1),w(this,"_trust_video_stream_added_state_",!0),w(this,"_trust_audio_stream_added_state_",!0),w(this,"_audioTrack",void 0),w(this,"_videoTrack",void 0),w(this,"_audioSSRC",void 0),w(this,"_videoSSRC",void 0),w(this,"_audioOrtc",void 0),w(this,"_videoOrtc",void 0),w(this,"_cname",void 0),w(this,"_rtxSsrcId",void 0),this.uid=r,this._uintid=i}}var RY=AA,IY=ed,wY=jm;Pi({target:"Promise",stat:!0},{try:function(n){var r=IY.f(this),i=wY(n);return(i.error?r.reject:r.resolve)(i.value),r.promise}});var yC=RY,OY=Pi,AY=I,NY=c,PY=hp,xY=He,DY=lo,kY=kc,Sk=Ay,LY=wP,MY=DP,UY=an,yk=er("isConcatSpreadable"),Ck=9007199254740991,Tk="Maximum allowed index exceeded",bk=AY.TypeError,VY=UY>=51||!NY(function(){var n=[];return n[yk]=!1,n.concat()[0]!==n}),FY=MY("concat"),BY=function(n){if(!xY(n))return!1;var r=n[yk];return r!==void 0?!!r:PY(n)};OY({target:"Array",proto:!0,forced:!VY||!FY},{concat:function(n){var r,i,s,l,h,p=DY(this),v=LY(p,0),E=0;for(r=-1,s=arguments.length;r<s;r++)if(BY(h=r===-1?p:arguments[r])){if(E+(l=kY(h))>Ck)throw bk(Tk);for(i=0;i<l;i++,E++)i in h&&Sk(v,E,h[i])}else{if(E>=Ck)throw bk(Tk);Sk(v,E++,h)}return v.length=E,v}});var Rk={},jY=Ee,HY=at,Ik=Tm.f,$Y=ZN,wk=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Rk.f=function(n){return wk&&jY(n)=="Window"?function(r){try{return Ik(r)}catch{return $Y(wk)}}(n):Ik(HY(n))};var Ep={},WY=er;Ep.f=WY;var Ok=ot,GY=xr,zY=Ep,KY=Ya.f,Hr=function(n){var r=Ok.Symbol||(Ok.Symbol={});GY(r,n)||KY(r,n,{value:zY.f(n)})},wd=Pi,CC=I,YY=$e,qY=D,_p=te,XY=S,Od=F,au=sn,TC=c,ni=xr,JY=hp,QY=U,ZY=He,eq=C,bC=Gi,RC=qa,tq=lo,P0=at,IC=Dr,Ak=Xu,wC=le,Sp=wm,Nk=iS,nq=Tm,Pk=Rk,OC=nS,xk=B,Dk=Ya,rq=rS,kk=Y,iq=CS,AC=Um,yp=dr.exports,Lk=bm,Mk=zs,Uk=er,oq=Ep,aq=Hr,sq=Qh,Vk=Mm,x0=AP.forEach,ko=Cm("hidden"),D0="Symbol",Fk=Uk("toPrimitive"),cq=Vk.set,Bk=Vk.getterFor(D0),ns=Object.prototype,Yc=CC.Symbol,su=Yc&&Yc.prototype,jk=CC.TypeError,NC=CC.QObject,Cp=YY("JSON","stringify"),Hk=xk.f,qc=Dk.f,$k=Pk.f,lq=kk.f,Wk=XY([].push),oc=yp("symbols"),Tp=yp("op-symbols"),PC=yp("string-to-symbol-registry"),xC=yp("symbol-to-string-registry"),uq=yp("wks"),DC=!NC||!NC.prototype||!NC.prototype.findChild,kC=Od&&TC(function(){return Sp(qc({},"a",{get:function(){return qc(this,"a",{value:7}).a}})).a!=7})?function(n,r,i){var s=Hk(ns,r);s&&delete ns[r],qc(n,r,i),s&&n!==ns&&qc(ns,r,s)}:qc,LC=function(n,r){var i=oc[n]=Sp(su);return cq(i,{type:D0,tag:n,description:r}),Od||(i.description=r),i},k0=function(n,r,i){n===ns&&k0(Tp,r,i),RC(n);var s=IC(r);return RC(i),ni(oc,s)?(i.enumerable?(ni(n,ko)&&n[ko][s]&&(n[ko][s]=!1),i=Sp(i,{enumerable:wC(0,!1)})):(ni(n,ko)||qc(n,ko,wC(1,{})),n[ko][s]=!0),kC(n,s,i)):qc(n,s,i)},MC=function(n,r){RC(n);var i=P0(r),s=Nk(i).concat(UC(i));return x0(s,function(l){Od&&!_p(Gk,i,l)||k0(n,l,i[l])}),n},Gk=function(n){var r=IC(n),i=_p(lq,this,r);return!(this===ns&&ni(oc,r)&&!ni(Tp,r))&&(!(i||!ni(this,r)||!ni(oc,r)||ni(this,ko)&&this[ko][r])||i)},zk=function(n,r){var i=P0(n),s=IC(r);if(i!==ns||!ni(oc,s)||ni(Tp,s)){var l=Hk(i,s);return!l||!ni(oc,s)||ni(i,ko)&&i[ko][s]||(l.enumerable=!0),l}},Kk=function(n){var r=$k(P0(n)),i=[];return x0(r,function(s){ni(oc,s)||ni(Lk,s)||Wk(i,s)}),i},UC=function(n){var r=n===ns,i=$k(r?Tp:P0(n)),s=[];return x0(i,function(l){!ni(oc,l)||r&&!ni(ns,l)||Wk(s,oc[l])}),s};if(au||(AC(su=(Yc=function(){if(eq(su,this))throw jk("Symbol is not a constructor");var n=arguments.length&&arguments[0]!==void 0?Ak(arguments[0]):void 0,r=Mk(n),i=function(s){this===ns&&_p(i,Tp,s),ni(this,ko)&&ni(this[ko],r)&&(this[ko][r]=!1),kC(this,r,wC(1,s))};return Od&&DC&&kC(ns,r,{configurable:!0,set:i}),LC(r,n)}).prototype,"toString",function(){return Bk(this).tag}),AC(Yc,"withoutSetter",function(n){return LC(Mk(n),n)}),kk.f=Gk,Dk.f=k0,rq.f=MC,xk.f=zk,nq.f=Pk.f=Kk,OC.f=UC,oq.f=function(n){return LC(Uk(n),n)},Od&&qc(su,"description",{configurable:!0,get:function(){return Bk(this).description}})),wd({global:!0,wrap:!0,forced:!au,sham:!au},{Symbol:Yc}),x0(Nk(uq),function(n){aq(n)}),wd({target:D0,stat:!0,forced:!au},{for:function(n){var r=Ak(n);if(ni(PC,r))return PC[r];var i=Yc(r);return PC[r]=i,xC[i]=r,i},keyFor:function(n){if(!bC(n))throw jk(n+" is not a symbol");if(ni(xC,n))return xC[n]},useSetter:function(){DC=!0},useSimple:function(){DC=!1}}),wd({target:"Object",stat:!0,forced:!au,sham:!Od},{create:function(n,r){return r===void 0?Sp(n):MC(Sp(n),r)},defineProperty:k0,defineProperties:MC,getOwnPropertyDescriptor:zk}),wd({target:"Object",stat:!0,forced:!au},{getOwnPropertyNames:Kk,getOwnPropertySymbols:UC}),wd({target:"Object",stat:!0,forced:TC(function(){OC.f(1)})},{getOwnPropertySymbols:function(n){return OC.f(tq(n))}}),Cp&&wd({target:"JSON",stat:!0,forced:!au||TC(function(){var n=Yc();return Cp([n])!="[null]"||Cp({a:n})!="{}"||Cp(Object(n))!="{}"})},{stringify:function(n,r,i){var s=iq(arguments),l=r;if((ZY(r)||n!==void 0)&&!bC(n))return JY(r)||(r=function(h,p){if(QY(l)&&(p=_p(l,this,h,p)),!bC(p))return p}),s[1]=r,qY(Cp,null,s)}}),!su[Fk]){var dq=su.valueOf;AC(su,Fk,function(n){return _p(dq,this)})}sq(Yc,D0),Lk[ko]=!0,Hr("asyncIterator"),Hr("hasInstance"),Hr("isConcatSpreadable"),Hr("iterator"),Hr("match"),Hr("matchAll"),Hr("replace"),Hr("search"),Hr("species"),Hr("split"),Hr("toPrimitive"),Hr("toStringTag"),Hr("unscopables"),Qh(I.JSON,"JSON",!0);var hq=ot.Symbol;Hr("asyncDispose"),Hr("dispose"),Hr("matcher"),Hr("metadata"),Hr("observable"),Hr("patternMatch"),Hr("replaceAll");var Yk=hq,qk=Ep.f("asyncIterator"),pq=qk;function Xk(n){this.wrapped=n}function bp(n){var r,i;function s(h,p){try{var v=n[h](p),E=v.value,T=E instanceof Xk;yC.resolve(T?E.wrapped:E).then(function(y){T?s(h==="return"?"return":"next",y):l(v.done?"return":"normal",y)},function(y){s("throw",y)})}catch(y){l("throw",y)}}function l(h,p){switch(h){case"return":r.resolve({value:p,done:!0});break;case"throw":r.reject(p);break;default:r.resolve({value:p,done:!1})}(r=r.next)?s(r.key,r.arg):i=null}this._invoke=function(h,p){return new yC(function(v,E){var T={key:h,arg:p,resolve:v,reject:E,next:null};i?i=i.next=T:(r=i=T,s(h,p))})},typeof n.return!="function"&&(this.return=void 0)}function Aa(n){return function(){return new bp(n.apply(this,arguments))}}function yt(n){return new Xk(n)}bp.prototype[typeof Yk=="function"&&pq||"@@asyncIterator"]=function(){return this},bp.prototype.next=function(n){return this._invoke("next",n)},bp.prototype.throw=function(n){return this._invoke("throw",n)},bp.prototype.return=function(n){return this._invoke("return",n)};var fq=Ep.f("iterator");function L0(n,r){var i={},s=!1;function l(h,p){return s=!0,p=new yC(function(v){v(n[h](p))}),{done:!1,value:r(p)}}return i[Yk!==void 0&&fq||"@@iterator"]=function(){return this},i.next=function(h){return s?(s=!1,h):l("next",h)},typeof n.throw=="function"&&(i.throw=function(h){if(s)throw s=!1,h;return l("throw",h)}),typeof n.return=="function"&&(i.return=function(h){return s?(s=!1,h):l("return",h)}),i}var Jk=qk,sr={exports:{}};function Qk(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function Zk(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Qk(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Qk(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function VC(n,r,i,s,l,h,p){let v=[],E=[],T=[],y=[],R=!1,k=!1;if(sr.exports.parse(n).mediaDescriptions.forEach(V=>{p&&p!==V.attributes.direction||(V.media.mediaType!=="video"||R||(E=V.attributes.payloads,y=V.attributes.extmaps,R=!0),V.media.mediaType!=="audio"||k||(v=V.attributes.payloads,T=V.attributes.extmaps,k=!0))}),!y||E.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!T||v.length===0)throw new Error("Cannot get audio capabilities from SDP.");return E.forEach(V=>{var $;($=V.rtpMap)!==null&&$!==void 0&&$.clockRate&&(V.rtpMap.clockRate=parseInt(V.rtpMap.clockRate))}),v.forEach(V=>{var $;($=V.rtpMap)!==null&&$!==void 0&&$.clockRate&&(V.rtpMap.clockRate=parseInt(V.rtpMap.clockRate))}),r&&(v=v.filter(V=>{var $;return(($=V.rtpMap)===null||$===void 0?void 0:$.encodingName.toLowerCase())!=="rtx"}),E=E.filter(V=>{var $;return(($=V.rtpMap)===null||$===void 0?void 0:$.encodingName.toLowerCase())!=="rtx"})),i&&(E=E.filter(V=>{var $;return!/(red)|(ulpfec)|(flexfec)/i.test((($=V.rtpMap)===null||$===void 0?void 0:$.encodingName)||"")})),s&&(v=v.filter(V=>{var $;return!/(red)|(ulpfec)|(flexfec)/i.test((($=V.rtpMap)===null||$===void 0?void 0:$.encodingName)||"")})),l&&(l==null?void 0:l.length)>0&&(v=v.filter(V=>{var $;return l.includes((($=V.rtpMap)===null||$===void 0?void 0:$.encodingName.toLowerCase())||"")})),h&&(h==null?void 0:h.length)>0&&(E=E.filter(V=>{var $;return h.includes((($=V.rtpMap)===null||$===void 0?void 0:$.encodingName.toLowerCase())||"")})),{audioCodecs:v,videoCodecs:E,audioExtensions:T,videoExtensions:y}}function cu(n){const r=sr.exports.parse(n);let i,s;for(const l of r.mediaDescriptions){if(!i){const h=l.attributes.iceUfrag,p=l.attributes.icePwd;if(!h||!p)throw new Error("Cannot get iceUfrag or icePwd from SDP.");i={iceUfrag:h,icePwd:p}}if(!s){const h=l.attributes.fingerprints;h.length>0&&(s={fingerprints:h})}}if(!s&&r.attributes.fingerprints.length>0&&(s={fingerprints:r.attributes.fingerprints}),!s||!i)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:i,dtlsParameters:s}}function eL(n,r){const i=[],s=n.attributes.ssrcGroups.filter(p=>p.semantic==="FID"),l=n.attributes.ssrcGroups.find(p=>p.semantic==="SIM"),h=n.attributes.ssrcs;if(l)l.ssrcIds.forEach(p=>{var v;const E=(v=s.find(T=>T.ssrcIds[0]===p))===null||v===void 0?void 0:v.ssrcIds[1];i.push({ssrcId:p,rtx:r?E:void 0})});else if(s.length>0){const p=s[0].ssrcIds[0],v=s[0].ssrcIds[1];i.push({ssrcId:p,rtx:r?v:void 0})}else{if(h.length===0)throw new Error("No ssrcs found on local media description.");i.push({ssrcId:h[0].ssrcId})}return i}function tL(n,r){const{cname:i}=n;let s;r&&r.ip&&typeof r.port=="number"?(s=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:r.ip,port:r.port.toString(),type:"host",extension:{}}],M.debug("Using remote candidate from AP ".concat(r.ip,":").concat(r.port)),r.ip6&&(s.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:r.ip6,port:r.port.toString(),type:"host",extension:{}}),M.debug("Using IPV6 remote candidate from AP ".concat(r.ip6,":").concat(r.port)))):s=n.iceParameters.candidates.map(v=>({foundation:v.foundation,componentId:"1",transport:v.protocol,priority:v.priority.toString(),connectionAddress:v.ip,port:v.port.toString(),type:v.type,extension:{}}));const l={fingerprints:n.dtlsParameters.fingerprints.map(v=>({hashFunction:v.algorithm,fingerprint:v.fingerprint}))},h={iceUfrag:n.iceParameters.iceUfrag,icePwd:n.iceParameters.icePwd};let p;switch(n.dtlsParameters.role){case"server":p="passive";break;case"client":p="active";break;case"auto":p="actpass"}return{dtlsParameters:l,iceParameters:h,candidates:s,rtpCapabilities:jC(n.rtpCapabilities),setup:p,cname:i}}function Zo(n,r,i){const s=[],l=[];return n.forEach(h=>{let{ssrcId:p,rtx:v}=h;const E=_n(8,"track-"),T={ssrcId:p,attributes:Zk({label:E,mslabel:i=i||_n(10,""),msid:"".concat(i," ").concat(E)},r&&{cname:r})};if(s.push(T),v!==void 0){const y={ssrcId:v,attributes:Zk({label:E,mslabel:i,msid:"".concat(i," ").concat(E)},r&&{cname:r})};s.push(y),l.push({semantic:"FID",ssrcIds:[p,v]})}}),n.length>1&&l.push({semantic:"SIM",ssrcIds:n.map(h=>{let{ssrcId:p}=h;return p})}),{ssrcs:s,ssrcGroups:l}}function Ad(n,r){r instanceof Zr&&n.attributes.payloads.forEach(i=>{var s;const l=(s=i.rtpMap)===null||s===void 0?void 0:s.encodingName.toLowerCase();if(!l||["opus","pcmu","pcma","g722"].indexOf(l)===-1)return;i.fmtp||(i.fmtp={parameters:{}}),i.fmtp.parameters.minptime="10",i.fmtp.parameters.useinbandfec="1";const h=r._encoderConfig;h&&l!=="pcmu"&&l!=="pcma"&&l!=="g722"&&(h.bitrate&&!Mn()&&(i.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*h.bitrate))),h.sampleRate&&(i.fmtp.parameters.maxplaybackrate="".concat(h.sampleRate),i.fmtp.parameters["sprop-maxcapturerate"]="".concat(h.sampleRate)),h.stereo&&(i.fmtp.parameters.stereo="1",i.fmtp.parameters["sprop-stereo"]="1"))})}function FC(n){const r=n.attributes.unrecognized.findIndex(i=>i.attField==="x-google-flag"&&i.attValue==="conference");r!==-1&&n.attributes.unrecognized.splice(r,1)}function BC(n,r){if(!(r instanceof ar&&r._encoderConfig&&r._hints.indexOf(gr.SCREEN_TRACK)===-1))return;const i=r._encoderConfig;Xn().supportMinBitrate&&i.bitrateMin&&n.attributes.payloads.forEach(s=>{var l;["h264","h265","vp8","vp9","av1"].includes(((l=s.rtpMap)===null||l===void 0?void 0:l.encodingName.toLowerCase())||"")&&(s.fmtp||(s.fmtp={parameters:{}}),s.fmtp.parameters["x-google-min-bitrate"]="".concat(i.bitrateMin))}),Xn().supportMinBitrate&&!r._hints.includes(gr.LOW_STREAM)&&i.bitrateMax&&n.attributes.payloads.forEach(s=>{var l;["h264","h265","vp8","vp9","av1"].includes(((l=s.rtpMap)===null||l===void 0?void 0:l.encodingName.toLowerCase())||"")&&(s.fmtp||(s.fmtp={parameters:{}}),s.fmtp.parameters["x-google-start-bitrate"]="".concat(ne("X_GOOGLE_START_BITRATE")||Math.floor(i.bitrateMax)))})}function nL(n){if(n.media.mediaType!=="video")return;const r=$t();if(r.name!==qt.SAFARI&&r.os!==Kr.IOS)return;const i=n.attributes.extmaps.findIndex(s=>/video-orientation/g.test(s.extensionName));i!==-1&&n.attributes.extmaps.splice(i,1)}function M0(n,r,i){if(!r)return;let s,l;if(n.media.mediaType==="video"?(s=i.videoExtensions,l=i.videoCodecs):(s=i.audioExtensions,l=i.audioCodecs),r.twcc===!0){const h=s.find(p=>p.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");h&&(n.attributes.extmaps.find(p=>p.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")||n.attributes.extmaps.push({entry:h.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(p,v){return v.filter(E=>!!p.find(T=>T.payloadType===E.payloadType&&!!T.rtcpFeedbacks.find(y=>y.type==="transport-cc")))}(l,n.attributes.payloads).forEach(p=>{p.rtcpFeedbacks.find(v=>v.type==="transport-cc")||p.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(r.twcc===!1){const h=n.attributes.extmaps.findIndex(p=>p.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");h!==-1&&n.attributes.extmaps.splice(h,1),n.attributes.payloads.forEach(p=>{const v=p.rtcpFeedbacks.findIndex(E=>E.type==="transport-cc");v!==-1&&p.rtcpFeedbacks.splice(v,1)})}if(r.remb===!0){const h=s.find(p=>p.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");h&&(n.attributes.extmaps.find(p=>p.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time")||n.attributes.extmaps.push({entry:h.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(p,v){return v.filter(E=>!!p.find(T=>T.payloadType===E.payloadType&&!!T.rtcpFeedbacks.find(y=>y.type==="goog-remb")))}(l,n.attributes.payloads).forEach(p=>{p.rtcpFeedbacks.find(v=>v.type==="goog-remb")||p.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(r.remb===!1){const h=n.attributes.extmaps.findIndex(p=>p.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");h!==-1&&n.attributes.extmaps.splice(h,1),n.attributes.payloads.forEach(p=>{const v=p.rtcpFeedbacks.findIndex(E=>E.type==="goog-remb");v!==-1&&p.rtcpFeedbacks.splice(v,1)})}}function rL(n,r,i){if(Mn()||n.media.mediaType!=="video"||!(r instanceof ar)||i!=="vp9"&&i!=="vp8"||i==="vp8"&&!ne("SIMULCAST")||r._scalabiltyMode===void 0||r._scalabiltyMode.numSpatialLayers<=1)return;const s=i==="vp8"?2:r._scalabiltyMode.numSpatialLayers,l=n.attributes.ssrcs[0],h=n.attributes.ssrcGroups.find(v=>v.semantic==="FID"&&v.ssrcIds[0]===l.ssrcId),p={semantic:"SIM",ssrcIds:[l.ssrcId]};for(let v=1;v<s;v++)n.attributes.ssrcs.push({ssrcId:l.ssrcId+v,attributes:or(l.attributes)}),p.ssrcIds.push(l.ssrcId+v),h&&(n.attributes.ssrcs.push({ssrcId:h.ssrcIds[1]+v,attributes:or(l.attributes)}),n.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[l.ssrcId+v,h.ssrcIds[1]+v]}));n.attributes.ssrcGroups.unshift(p)}async function iL(n,r,i,s,l){const h=new RTCPeerConnection;h.addTransceiver("video",{direction:"sendonly"}),h.addTransceiver("audio",{direction:"sendonly"}),h.addTransceiver("video",{direction:"recvonly"}),h.addTransceiver("audio",{direction:"recvonly"});const p=(await h.createOffer()).sdp,v=VC(p,n,r,i,s,l,"sendonly"),E=VC(p,n,r,i,s,l,"recvonly"),T={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},y={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},R={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(U0(v,E,"videoExtensions",T,y,R),U0(v,E,"videoCodecs",T,y,R),U0(v,E,"audioExtensions",T,y,R),U0(v,E,"audioCodecs",T,y,R),ne("RAISE_H264_BASELINE_PRIORITY")){const k=R.videoCodecs.findIndex(V=>{var $,W;return(($=V.rtpMap)===null||$===void 0?void 0:$.encodingName.toLocaleLowerCase())==="h264"&&((W=V.fmtp)===null||W===void 0?void 0:W.parameters["profile-level-id"])==="42001f"});if(k!==-1){const V=R.videoCodecs.findIndex($=>{var W;return((W=$.rtpMap)===null||W===void 0?void 0:W.encodingName.toLocaleLowerCase())==="h264"});if(V<k){M.debug("raising H264 baseline profile priority");const $=R.videoCodecs[k];R.videoCodecs.splice(k,1),R.videoCodecs.splice(V,0,$)}V!==-1&&(y.videoCodecs=y.videoCodecs.filter($=>{var W,G;return!(((W=$.rtpMap)===null||W===void 0?void 0:W.encodingName.toLocaleLowerCase())==="h264"&&((G=$.fmtp)===null||G===void 0?void 0:G.parameters["profile-level-id"])!=="42001f")})),V!==-1&&ne("FILTER_SEND_H264_BASELINE")&&(T.videoCodecs=T.videoCodecs.filter($=>{var W,G;return!(((W=$.rtpMap)===null||W===void 0?void 0:W.encodingName.toLocaleLowerCase())==="h264"&&((G=$.fmtp)===null||G===void 0?void 0:G.parameters["profile-level-id"])!=="42001f")}))}}try{h.close()}catch{}return{send:T,recv:y,sendrecv:R}}function U0(n,r,i,s,l,h){if(i==="videoExtensions"||i==="audioExtensions"){const p=[];return n[i].forEach(v=>{r[i].some((E,T)=>{if(v.entry===E.entry&&v.extensionName===E.extensionName)return p.push(T),!0})?h[i].push(v):s[i].push(v)}),void r[i].forEach((v,E)=>{p.indexOf(E)===-1&&l[i].push(v)})}if(i==="videoCodecs"||i==="audioCodecs"){const p=[];return n[i].forEach(v=>{r[i].some((E,T)=>{if(v.payloadType===E.payloadType&&JSON.stringify(v)===JSON.stringify(E))return p.push(T),!0})?h[i].push(v):s[i].push(v)}),void r[i].forEach((v,E)=>{p.indexOf(E)===-1&&l[i].push(v)})}}function jC(n){const{send:r,recv:i,sendrecv:s}=n;if(!s){if(!r||!i)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:r,recv:i}}let l,h;return r?(l={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},l.audioCodecs=[...r.audioCodecs,...s.audioCodecs],l.videoCodecs=[...r.videoCodecs,...s.videoCodecs],l.audioExtensions=[...r.audioExtensions,...s.audioExtensions],l.videoExtensions=[...r.videoExtensions,...s.videoExtensions]):l=s,i?(h={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},h.audioCodecs=[...i.audioCodecs,...s.audioCodecs],h.videoCodecs=[...i.videoCodecs,...s.videoCodecs],h.audioExtensions=[...i.audioExtensions,...s.audioExtensions],h.videoExtensions=[...i.videoExtensions,...s.videoExtensions]):h=s,{send:l,recv:h}}function Xc(n){n.media.mediaType==="audio"&&n.attributes.payloads.filter(r=>{var i;return((i=r.rtpMap)===null||i===void 0?void 0:i.encodingName.toLowerCase())==="opus"}).forEach(r=>{r.fmtp||(r.fmtp={parameters:{}}),r.fmtp.parameters.stereo="1",r.fmtp.parameters["sprop-stereo"]="1"})}function oL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function aL(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?oL(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):oL(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}(function(n,r){n.exports=(()=>{var i={8:(h,p,v)=>{v.r(p),v.d(p,{Parser:()=>dn,Printer:()=>Qi,parse:()=>et,print:()=>Pt});const E=`
`,T="".concat("\r").concat(E),y=" ";let R;function k(Re){return Re>="0"&&Re<="9"}function V(Re){return Re>="!"&&Re<="~"}function $(Re){return V(Re)||Re>=""&&Re<="ÿ"}function W(Re){return Re==="!"||Re>="#"&&Re<="'"||Re>="*"&&Re<="+"||Re>="-"&&Re<="."||Re>="0"&&Re<="9"||Re>="A"&&Re<="Z"||Re>="^"&&Re<="~"}function G(Re){return Re>="1"&&Re<="9"}function ie(Re){return Re>="A"&&Re<="Z"||Re>="a"&&Re<="z"}function se(Re){return Re==="d"||Re==="h"||Re==="m"||Re==="s"}function ye(Re){return Re>""&&Re<"	"||Re>"\v"&&Re<"\f"||Re>""&&Re<"ÿ"}function De(Re){return ie(Re)||k(Re)||Re==="+"||Re==="/"}function Te(Re){return k(Re)||ie(Re)||Re==="+"||Re==="/"||Re==="-"||Re==="_"}function be(Re){return ie(Re)||k(Re)||Re==="+"||Re==="/"}function Se(Re,x){var z=Object.keys(Re);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(Re);x&&(Z=Z.filter(function(ge){return Object.getOwnPropertyDescriptor(Re,ge).enumerable})),z.push.apply(z,Z)}return z}function Ie(Re){for(var x=1;x<arguments.length;x++){var z=arguments[x]!=null?arguments[x]:{};x%2?Se(Object(z),!0).forEach(function(Z){Bt(Re,Z,z[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Re,Object.getOwnPropertyDescriptors(z)):Se(Object(z)).forEach(function(Z){Object.defineProperty(Re,Z,Object.getOwnPropertyDescriptor(z,Z))})}return Re}function Bt(Re,x,z){return x in Re?Object.defineProperty(Re,x,{value:z,enumerable:!0,configurable:!0,writable:!0}):Re[x]=z,Re}(function(Re){Re.VERSION="v",Re.ORIGIN="o",Re.SESSION_NAME="s",Re.INFORMATION="i",Re.URI="u",Re.EMAIL="e",Re.PHONE="p",Re.CONNECTION="c",Re.BANDWIDTH="b",Re.TIME="t",Re.REPEAT="r",Re.ZONE_ADJUSTMENTS="z",Re.KEY="k",Re.ATTRIBUTE="a",Re.MEDIA="m"})(R||(R={}));class We{consumeText(x,z){let Z=z;for(;Z<x.length;){const ge=x[Z];if(ge==="\0"||ge==="\r"||ge===E)break;Z+=1}if(Z-z==0)throw new Error("Invalid text, at ".concat(x));return Z}consumeUnicastAddress(x,z,Z){return this.consumeTill(x,z,y)}consumeOneOrMore(x,z,Z){let ge=z;for(;Z(x[ge]);)ge++;if(ge-z==0)throw new Error("Invalid rule at ".concat(z,"."));return ge}consumeSpace(x,z){if(x[z]===y)return z+1;throw new Error("Invalid space at ".concat(z,"."))}consumeIP4Address(x,z){let Z=z;for(let ge=0;ge<4;ge++)if(Z=this.consumeDecimalUChar(x,Z),ge!==3){if(x[Z]!==".")throw new Error("Invalid IP4 address.");Z++}return Z}consumeDecimalUChar(x,z){let Z=z;for(let rt=0;rt<3&&k(x[Z]);rt++,Z++);if(Z-z==0)throw new Error("Invalid decimal uchar.");const ge=parseInt(x.slice(z,Z));if(ge>=0&&ge<=255)return Z;throw new Error("Invalid decimal uchar")}consumeIP6Address(x,z){let Z=this.consumeHexpart(x,z);return x[Z]===":"&&(Z+=1,Z=this.consumeIP4Address(x,Z)),Z}consumeHexpart(x,z){let Z=z;if(x[Z]===":"&&x[Z+1]===":"){Z+=2;try{Z=this.consumeHexseq(x,Z)}catch{}return Z}if(Z=this.consumeHexseq(x,Z),x[Z]===":"&&x[Z+1]===":"){Z+=2;try{Z=this.consumeHexseq(x,Z)}catch{}return Z}return Z}consumeHexseq(x,z){let Z=z;for(;Z=this.consumeHex4(x,Z),x[Z]===":"&&x[Z+1]!==":";)Z+=1;return Z}consumeHex4(x,z){let Z=0;for(;Z<4;Z++)if(!((ge=x[z+Z])>="0"&&ge<="9"||ge>="a"&&ge<="f"||ge>="A"&&ge<="F")){if(Z===0)throw new Error("Invalid hex 4");break}var ge;return z+Z}consumeFQDN(x,z){let Z=z;for(;k(x[Z])||ie(x[Z])||x[Z]==="-"||x[Z]===".";)Z+=1;if(Z-z<4)throw new Error("Invalid FQDN");return Z}consumeExtnAddr(x,z){return this.consumeOneOrMore(x,z,$)}consumeMulticastAddress(x,z,Z){switch(Z){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(x,z);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(x,z);default:try{return this.consumeFQDN(x,z)}catch{return this.consumeExtnAddr(x,z)}}}consumeIP6MulticastAddress(x,z){const Z=this.consumeHexpart(x,z);return x[Z]==="/"?this.consumeInteger(x,Z+1):Z}consumeIP4MulticastAddress(x,z){let Z=z+3;const ge=x.slice(z,Z),rt=parseInt(ge);if(rt<224||rt>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let hn=0;hn<3;hn++){if(x[Z]!==".")throw new Error("Invalid IP4 multicast address.");Z+=1,Z=this.consumeDecimalUChar(x,Z)}return x[Z]==="/"&&(Z+=1),Z=this.consumeTTL(x,Z),x[Z]==="/"&&(Z=this.consumeInteger(x,Z)),Z}consumeInteger(x,z){if(!G(x[z]))throw new Error("Invalid integer.");for(z+=1;k(x[z]);)z+=1;return z}consumeTTL(x,z){if(x[z]==="0")return z+1;if(!G(x[z]))throw new Error("Invalid TTL.");z+=1;for(let Z=0;Z<2&&k(x[z]);Z++)z+=1;return z}consumeToken(x,z){return this.consumeOneOrMore(x,z,W)}consumeTime(x,z){let Z=z;if(x[Z]==="0")return Z+1;for(G(x[Z])&&(Z+=1);k(x[Z]);)Z++;if(Z-z<10)throw new Error("Invalid time");return Z}consumeAddress(x,z){return this.consumeTill(x,z,y)}consumeTypedTime(x,z){let Z=z;return Z=this.consumeOneOrMore(x,Z,k),se(x[Z])?Z+1:Z}consumeRepeatInterval(x,z){if(!G(x[z]))throw new Error("Invalid repeat interval");for(z+=1;k(x[z]);)z+=1;return se(x[z])&&(z+=1),z}consumePort(x,z){return this.consumeOneOrMore(x,z,k)}consume(x,z,Z){for(let ge=0;ge<Z.length;ge++){if(z+ge>=x.length)throw new Error("consume exceeding value length");if(x[z+ge]!==Z[ge])throw new Error("consume ".concat(Z," failed at ").concat(ge))}return z+Z.length}consumeTill(x,z,Z){let ge=z;for(;ge<x.length&&(typeof Z!="string"||x[ge]!==Z)&&(typeof Z!="function"||!Z(x[ge]));)ge++;return ge}}class dn extends We{constructor(){super(),Bt(this,"records",[]),Bt(this,"currentLine",0)}parse(x){const z=this.probeEOL(x);this.records=x.split(z).filter(Li=>!!Li.trim()).map(this.parseLine),this.currentLine=0;const Z=this.parseVersion(),ge=this.parseOrigin(),rt=this.parseSessionName(),hn=this.parseInformation(),Wr=this.parseUri(),Da=this.parseEmail(),nl=this.parsePhone(),ra=this.parseConnection(),rl=this.parseBandWidth(),Ld=this.parseTimeFields(),Bn=this.parseKey(),cr=this.parseSessionAttribute(),on=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:Z,origin:ge,sessionName:rt,information:hn,uri:Wr,emails:Da,phones:nl,connection:ra,bandwidths:rl,timeFields:Ld,key:Bn,attributes:cr,mediaDescriptions:on}}getCurrentRecord(){const x=this.records[this.currentLine];if(!x)throw new Error("Record doesn't exit.");return x}probeEOL(x){for(let z=0;z<x.length;z++)if(x[z]===E)return x[z-1]==="\r"?T:E;throw new Error("Invalid newline character.")}parseLine(x,z){if(x.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const Z=x[0];if(x[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:Z,value:x.slice(2),line:z,cur:0}}parseSessionAttribute(){const x=new Qn;for(;this.currentLine<this.records.length;){const z=this.getCurrentRecord();if(z.type!==R.ATTRIBUTE)break;const Z={attField:this.extractOneOrMore(z,ge=>W(ge)&&ge!==":"),_cur:0};z.value[z.cur]===":"&&(z.cur+=1,Z.attValue=this.extractOneOrMore(z,ye)),x.parse(Z),this.currentLine++}return x.digest()}parseMediaAttributes(x){const z=new $r(x);for(;this.currentLine<this.records.length;){const Z=this.getCurrentRecord();if(Z.type!==R.ATTRIBUTE)break;const ge={attField:this.extractOneOrMore(Z,rt=>W(rt)&&rt!==":"),_cur:0};Z.value[Z.cur]===":"&&(Z.cur+=1,ge.attValue=this.extractOneOrMore(Z,ye)),z.parse(ge),this.currentLine++}return z.digest()}parseKey(){const x=this.getCurrentRecord();if(x.type===R.KEY){if(x.value==="prompt"||x.value==="clear:"||x.value==="base64:"||x.value==="uri:")return x.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const x=this.getCurrentRecord();if(x.type===R.ZONE_ADJUSTMENTS){const z=[];for(;;)try{const Z=this.extract(x,this.consumeTime);this.consumeSpaceForRecord(x);let ge=!1;x.value[x.cur]==="-"&&(ge=!0,x.cur+=1);const rt=this.extract(x,this.consumeTypedTime);z.push({time:Z,typedTime:rt,back:ge})}catch{break}if(z.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,z}return[]}parseRepeat(){const x=[];for(;;){const z=this.getCurrentRecord();if(z.type!==R.REPEAT)break;{const Z=this.extract(z,this.consumeRepeatInterval),ge=this.parseTypedTime(z);x.push({repeatInterval:Z,typedTimes:ge}),this.currentLine++}}return x}parseTypedTime(x){const z=[];for(;;)try{this.consumeSpaceForRecord(x),z.push(this.extract(x,this.consumeTypedTime))}catch{break}if(z.length===0)throw new Error("Invalid typed time.");return z}parseTime(){const x=this.getCurrentRecord(),z=this.extract(x,this.consumeTime);this.consumeSpaceForRecord(x);const Z=this.extract(x,this.consumeTime);return this.currentLine++,{startTime:z,stopTime:Z}}parseBandWidth(){const x=[];for(;this.currentLine<this.records.length;){const z=this.getCurrentRecord();if(z.type!==R.BANDWIDTH)break;{const Z=this.extractOneOrMore(z,W);if(z.value[z.cur]!==":")throw new Error("Invalid bandwidth field.");z.cur++;const ge=this.extractOneOrMore(z,k);x.push({bwtype:Z,bandwidth:ge}),this.currentLine++}}return x}parseVersion(){const x=this.getCurrentRecord();if(x.type!==R.VERSION)throw new Error("first sdp record must be version");const z=x.value.slice(0,this.consumeOneOrMore(x.value,0,k));if(z.length!==x.value.length)throw new Error('invalid proto version, "v='.concat(x.value,'"'));return this.currentLine++,z}parseOrigin(){const x=this.getCurrentRecord();if(x.type!==R.ORIGIN)throw new Error("second line of sdp must be origin");const z=this.extractOneOrMore(x,$);this.consumeSpaceForRecord(x);const Z=this.extractOneOrMore(x,k);this.consumeSpaceForRecord(x);const ge=this.extractOneOrMore(x,k);this.consumeSpaceForRecord(x);const rt=this.extractOneOrMore(x,W);this.consumeSpaceForRecord(x);const hn=this.extractOneOrMore(x,W);this.consumeSpaceForRecord(x);const Wr=this.extract(x,this.consumeUnicastAddress);return this.currentLine++,{username:z,sessId:Z,sessVersion:ge,nettype:rt,addrtype:hn,unicastAddress:Wr}}parseSessionName(){const x=this.getCurrentRecord();if(x.type===R.SESSION_NAME){const z=this.extract(x,this.consumeText);return this.currentLine++,z}}parseInformation(){const x=this.getCurrentRecord();if(x.type!==R.INFORMATION)return;const z=this.extract(x,this.consumeText);return this.currentLine++,z}parseUri(){const x=this.getCurrentRecord();if(x.type===R.URI)return this.currentLine++,x.value}parseEmail(){const x=[];for(;;){const z=this.getCurrentRecord();if(z.type!==R.EMAIL)break;x.push(z.value),this.currentLine++}return x}parsePhone(){const x=[];for(;;){const z=this.getCurrentRecord();if(z.type!==R.PHONE)break;x.push(z.value),this.currentLine++}return x}parseConnection(){const x=this.getCurrentRecord();if(x.type===R.CONNECTION){const z=this.extractOneOrMore(x,W);this.consumeSpaceForRecord(x);const Z=this.extractOneOrMore(x,W);this.consumeSpaceForRecord(x);const ge=this.extract(x,this.consumeAddress);return this.currentLine++,{nettype:z,addrtype:Z,address:ge}}}parseMedia(){const x=this.getCurrentRecord(),z=this.extract(x,this.consumeToken);this.consumeSpaceForRecord(x);let Z=this.extract(x,this.consumePort);x.value[x.cur]==="/"&&(x.cur+=1,Z+=this.extract(x,this.consumeInteger)),this.consumeSpaceForRecord(x);const ge=[];for(ge.push(this.extract(x,this.consumeToken));x.value[x.cur]==="/";)x.cur+=1,ge.push(this.extract(x,this.consumeToken));if(ge.length===0)throw new Error("Invalid proto");const rt=this.parseFmt(x);return this.currentLine++,{mediaType:z,port:Z,protos:ge,fmts:rt}}parseTimeFields(){const x=[];for(;this.getCurrentRecord().type===R.TIME;){const z=this.parseTime(),Z=this.parseRepeat(),ge=this.parseZone();x.push({time:z,repeats:Z,zones:ge})}return x}parseMediaDescription(){const x=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===R.MEDIA;){const z=this.parseMedia(),Z=this.parseInformation(),ge=this.parseConnections(),rt=this.parseBandWidth(),hn=this.parseKey(),Wr=this.parseMediaAttributes(z);x.push({media:z,information:Z,connections:ge,bandwidths:rt,key:hn,attributes:Wr})}return x}parseConnections(){const x=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===R.CONNECTION;)x.push(this.parseConnection());return x}parseFmt(x){const z=[];for(;;)try{this.consumeSpaceForRecord(x),z.push(this.extract(x,this.consumeToken))}catch{break}if(z.length===0)throw new Error("Invalid fmts");return z}extract(x,z,...Z){const ge=z.call(this,x.value,x.cur,...Z),rt=x.value.slice(x.cur,ge);return x.cur=ge,rt}extractOneOrMore(x,z){const Z=this.consumeOneOrMore(x.value,x.cur,z),ge=x.value.slice(x.cur,Z);return x.cur=Z,ge}consumeSpaceForRecord(x){if(x.value[x.cur]!==y)throw new Error("Invalid space at ".concat(x.cur,"."));x.cur+=1}}class Jt extends We{constructor(...x){super(...x),Bt(this,"attributes",void 0),Bt(this,"digested",!1)}extractOneOrMore(x,z,Z){const ge=this.consumeOneOrMore(x.attValue,x._cur,z),rt=x.attValue.slice(x._cur,ge),[hn,Wr]=Z||[];if(typeof hn=="number"&&rt.length<hn)throw new Error("error in length, should be more or equal than ".concat(hn," characters."));if(typeof Wr=="number"&&rt.length>Wr)throw new Error("error in length, should be less or equal than ".concat(Wr," characters."));return x._cur=ge,rt}consumeAttributeSpace(x){if(x.attValue[x._cur]!==y)throw new Error("Invalid space at ".concat(x._cur,"."));x._cur+=1}extract(x,z,...Z){if(!x.attValue)throw new Error("Nothing to extract from attValue.");const ge=z.call(this,x.attValue,x._cur,...Z),rt=x.attValue.slice(x._cur,ge);return x._cur=ge,rt}atEnd(x){if(!x.attValue)throw new Error;return x._cur>=x.attValue.length}peekChar(x){if(!x.attValue)throw new Error;return x.attValue[x._cur]}peek(x,z){if(!x.attValue)throw new Error;for(let Z=0;Z<z.length;Z++)if(z[Z]!==x.attValue[x._cur+Z])return!1;return!0}parseIceUfrag(x){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(x,De,[4,256])}parseIcePwd(x){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(x,De,[22,256])}parseIceOptions(x){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const z=[];for(;!this.atEnd(x);){z.push(this.extractOneOrMore(x,De));try{this.consumeAttributeSpace(x)}catch(Z){if(this.atEnd(x))break;throw Z}}this.attributes.iceOptions=z}parseFingerprint(x){const z=this.extract(x,this.consumeToken);this.consumeAttributeSpace(x);const Z=this.extract(x,this.consumeTill);this.attributes.fingerprints.push({hashFunction:z,fingerprint:Z})}parseExtmap(x){const z=this.extractOneOrMore(x,k);let Z;this.peekChar(x)==="/"&&(this.extract(x,this.consume,"/"),Z=this.extract(x,this.consumeToken)),this.consumeAttributeSpace(x);const ge=this.extract(x,this.consumeTill,y),rt=Ie(Ie({entry:parseInt(z,10)},Z&&{direction:Z}),{},{extensionName:ge});this.peekChar(x)===y&&(this.consumeAttributeSpace(x),rt.extensionAttributes=this.extract(x,this.consumeTill)),this.attributes.extmaps.push(rt)}parseSetup(x){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const z=this.extract(x,this.consumeTill);if(z!=="active"&&z!=="passive"&&z!=="actpass"&&z!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=z}}class Qn extends Jt{constructor(...x){super(...x),Bt(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(x){if(this.digested)throw new Error("already digested");try{switch(x.attField){case"group":this.parseGroup(x);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(x);break;case"ice-pwd":this.parseIcePwd(x);break;case"ice-options":this.parseIceOptions(x);break;case"fingerprint":this.parseFingerprint(x);break;case"setup":this.parseSetup(x);break;case"tls-id":this.parseTlsId(x);break;case"identity":this.parseIdentity(x);break;case"extmap":this.parseExtmap(x);break;case"msid-semantic":this.parseMsidSemantic(x);break;default:x.ignored=!0,this.attributes.unrecognized.push(x)}}catch(z){throw console.error("parsing session attribute ".concat(x.attField,' error, "a=').concat(x.attField,":").concat(x.attValue,'"')),z}if(!x.ignored&&x.attValue&&!this.atEnd(x))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(x){const z=this.extract(x,this.consumeToken),Z=[];for(;!this.atEnd(x)&&this.peekChar(x)===y;)this.consumeAttributeSpace(x),Z.push(this.extract(x,this.consumeToken));this.attributes.groups.push({semantic:z,identificationTag:Z})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(x){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(x,Te)}parseIdentity(x){const z=this.extractOneOrMore(x,be),Z=[];for(;!this.atEnd(x)&&this.peekChar(x)===y;){this.consumeAttributeSpace(x);const ge=this.extract(x,this.consumeToken);this.extract(x,this.consume,"=");const rt=this.extractOneOrMore(x,hn=>hn!==y&&ye(hn));Z.push({name:ge,value:rt})}this.attributes.identities.push({assertionValue:z,extensions:Z})}parseMsidSemantic(x){this.peekChar(x)===y&&this.consumeAttributeSpace(x);const z={semantic:this.extract(x,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(x)}catch{break}if(this.peekChar(x)==="*"){this.extract(x,this.consume,"*"),z.applyForAll=!0;break}{const Z=this.extract(x,this.consumeTill,y);z.identifierList.push(Z)}}this.attributes.msidSemantic=z}}class $r extends Jt{constructor(x){super(),Bt(this,"attributes",void 0),x.protos.indexOf("RTP")!==-1||x.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(x){if(this.digested)throw new Error("already digested");try{switch(x.attField){case"extmap":this.parseExtmap(x);break;case"setup":this.parseSetup(x);break;case"ice-ufrag":this.parseIceUfrag(x);break;case"ice-pwd":this.parseIcePwd(x);break;case"ice-options":this.parseIceOptions(x);break;case"candidate":this.parseCandidate(x);break;case"remote-candidate":this.parseRemoteCandidate(x);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(x);break;case"rtpmap":this.parseRtpmap(x);break;case"ptime":this.parsePtime(x);break;case"maxptime":this.parseMaxPtime(x);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(x);break;case"ssrc":this.parseSSRC(x);break;case"fmtp":this.parseFmtp(x);break;case"rtcp-fb":this.parseRtcpFb(x);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(x);break;case"mid":this.parseMid(x);break;case"msid":this.parseMsid(x);break;case"imageattr":this.parseImageAttr(x);break;case"rid":this.parseRid(x);break;case"simulcast":this.parseSimulcast(x);break;case"sctp-port":this.parseSctpPort(x);break;case"max-message-size":this.parseMaxMessageSize(x);break;case"ssrc-group":this.parseSSRCGroup(x);break;default:x.ignored=!0,this.attributes.unrecognized.push(x)}}catch(z){throw console.error("parsing media attribute ".concat(x.attField,' error, "a=').concat(x.attField,":").concat(x.attValue,'"')),z}if(!x.ignored&&x.attValue&&!this.atEnd(x))throw new Error("attribute parsing error")}parseCandidate(x){const z=this.extractOneOrMore(x,De,[1,32]);this.consumeAttributeSpace(x);const Z=this.extractOneOrMore(x,k,[1,5]);this.consumeAttributeSpace(x);const ge=this.extract(x,this.consumeToken);this.consumeAttributeSpace(x);const rt=this.extractOneOrMore(x,k,[1,10]);this.consumeAttributeSpace(x);const hn=this.extract(x,this.consumeAddress);this.consumeAttributeSpace(x);const Wr=this.extract(x,this.consumePort);this.consumeAttributeSpace(x),this.extract(x,this.consume,"typ"),this.consumeAttributeSpace(x);const Da={foundation:z,componentId:Z,transport:ge,priority:rt,connectionAddress:hn,port:Wr,type:this.extract(x,this.consumeToken),extension:{}};for(this.peek(x," raddr")&&(this.extract(x,this.consume," raddr"),this.consumeAttributeSpace(x),Da.relAddr=this.extract(x,this.consumeAddress)),this.peek(x," rport")&&(this.extract(x,this.consume," rport"),this.consumeAttributeSpace(x),Da.relPort=this.extract(x,this.consumePort));this.peekChar(x)===y;){this.consumeAttributeSpace(x);const nl=this.extract(x,this.consumeToken);this.consumeAttributeSpace(x),Da.extension[nl]=this.extractOneOrMore(x,V)}this.attributes.candidates.push(Da)}parseRemoteCandidate(x){const z=[];for(;;){const Z=this.extractOneOrMore(x,k,[1,5]);this.consumeAttributeSpace(x);const ge=this.extract(x,this.consumeAddress);this.consumeAttributeSpace(x);const rt=this.extract(x,this.consumePort);z.push({componentId:Z,connectionAddress:ge,port:rt});try{this.consumeAttributeSpace(x)}catch{break}}this.attributes.remoteCandidatesList.push(z)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(x){const z=this.extract(x,this.consumeToken);this.consumeAttributeSpace(x);const Z=this.extract(x,this.consumeTill,"/");this.extract(x,this.consume,"/");const ge={encodingName:Z,clockRate:this.extractOneOrMore(x,k)};this.atEnd(x)||this.peekChar(x)!=="/"||(this.extract(x,this.consume,"/"),ge.encodingParameters=parseInt(this.extract(x,this.consumeTill),10));const rt=this.attributes.payloads.find(hn=>hn.payloadType===parseInt(z,10));rt?rt.rtpMap=ge:this.attributes.payloads.push({payloadType:parseInt(z,10),rtpMap:ge,rtcpFeedbacks:[]})}parsePtime(x){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(x,this.consumeTill)}parseMaxPtime(x){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(x,this.consumeTill)}parseDirection(x){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=x.attField}parseSSRC(x){const z=this.extractOneOrMore(x,k);this.consumeAttributeSpace(x);const Z=this.extract(x,this.consumeTill,":");let ge;this.peekChar(x)===":"&&(this.extract(x,this.consume,":"),ge=this.extract(x,this.consumeTill));const rt=this.attributes.ssrcs.find(hn=>hn.ssrcId===parseInt(z,10));rt?rt.attributes[Z]=ge:this.attributes.ssrcs.push({ssrcId:parseInt(z,10),attributes:{[Z]:ge}})}parseFmtp(x){const z=this.extract(x,this.consumeTill,y);this.consumeAttributeSpace(x);const Z=this.extract(x,this.consumeTill),ge={};Z.split(";").forEach(hn=>{let[Wr,Da]=hn.split("=");Wr=Wr.trim();const nl=typeof Da=="string"?Da.trim():null;typeof Wr=="string"&&Wr.length>0&&(ge[Wr]=nl)});const rt=this.attributes.payloads.find(hn=>hn.payloadType===parseInt(z,10));rt?rt.fmtp={parameters:ge}:this.attributes.payloads.push({payloadType:parseInt(z,10),rtcpFeedbacks:[],fmtp:{parameters:ge}})}parseFmtParameters(x){const z={},Z=this.extract(x,this.consumeTill,"=");x._cur++;const ge=this.extract(x,this.consumeTill,";");for(z[Z]=ge;x.attValue[x._cur]===";";){const rt=this.extract(x,this.consumeTill,"=");x._cur++;const hn=this.extract(x,this.consumeTill,";");z[rt]=hn}return z}parseRtcpFb(x){let z="";z=this.peekChar(x)==="*"?this.extract(x,this.consume,"*"):this.extract(x,this.consumeTill,y),this.consumeAttributeSpace(x);const Z=this.extract(x,this.consumeTill,y);let ge;switch(Z){case"trr-int":ge={type:Z,interval:this.extract(x,this.consumeTill)};break;case"ack":case"nack":default:{const rt={type:Z};this.peekChar(x)===y&&(this.consumeAttributeSpace(x),rt.parameter=this.extract(x,this.consumeToken),this.peekChar(x)===y&&(rt.additional=this.extract(x,this.consumeTill))),ge=rt}}if(z==="*")this.attributes.rtcpFeedbackWildcards.push(ge);else{const rt=this.attributes.payloads.find(hn=>hn.payloadType===parseInt(z,10));rt?rt.rtcpFeedbacks.push(ge):this.attributes.payloads.push({payloadType:parseInt(z,10),rtcpFeedbacks:[ge]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(x){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const z={port:this.extract(x,this.consumePort)};this.peekChar(x)===y&&(this.consumeAttributeSpace(x),z.netType=this.extractOneOrMore(x,W),this.consumeAttributeSpace(x),z.addressType=this.extractOneOrMore(x,W),this.consumeAttributeSpace(x),z.address=this.extract(x,this.consumeAddress)),this.attributes.rtcp=z}parseMsid(x){const z={id:this.extractOneOrMore(x,W,[1,64])};this.peekChar(x)===y&&(this.consumeAttributeSpace(x),z.appdata=this.extractOneOrMore(x,W,[1,64])),this.attributes.msids.push(z)}parseImageAttr(x){this.attributes.imageattr.push(x.attValue)}parseRid(x){const z=this.extractOneOrMore(x,ge=>ie(ge)||k(ge)||ge==="_"||ge==="-");this.consumeAttributeSpace(x);const Z={id:z,direction:this.extract(x,this.consumeToken),params:[]};if(this.peekChar(x)===y){if(this.consumeAttributeSpace(x),this.peek(x,"pt=")){this.extract(x,this.consume,"pt=");const ge=[];for(;;){const rt=this.extract(x,this.consumeToken);ge.push(rt);try{this.extract(x,this.consume,",")}catch{break}}Z.payloads=ge,this.peekChar(x)===y&&this.extract(x,this.consume,y)}for(;;){const ge=this.extract(x,this.consumeToken);switch(ge){case"depend":{const rt={type:ge,rids:this.extract(x,this.consume,"=").split(",")};Z.params.push(rt);break}case"max-width":case"height-width":case"max-fps":case"max-fs":case"max-br":case"max-pps":case"max-bpp":default:{const rt={type:ge};this.peekChar(x)==="="&&(this.extract(x,this.consume,"="),rt.val=this.extract(x,this.consumeTill,";")),Z.params.push(rt)}}try{this.extract(x,this.consume,";")}catch{break}}}this.attributes.rids.push(Z)}parseSimulcast(x){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=x.attValue,this.extract(x,this.consumeTill)}parseSctpPort(x){this.attributes.sctpPort=this.extractOneOrMore(x,k,[1,5])}parseMaxMessageSize(x){this.attributes.maxMessageSize=this.extractOneOrMore(x,k,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(x){this.attributes.mid=this.extract(x,this.consumeToken)}parseSSRCGroup(x){const z=this.extract(x,this.consumeToken),Z=[];for(;;)try{this.consumeAttributeSpace(x);const ge=this.extract(x,this.consumeInteger);Z.push(parseInt(ge,10))}catch{break}this.attributes.ssrcGroups.push({semantic:z,ssrcIds:Z})}}function Gn(Re,x,z){return x in Re?Object.defineProperty(Re,x,{value:z,enumerable:!0,configurable:!0,writable:!0}):Re[x]=z,Re}class Qi{constructor(){Gn(this,"eol",T)}print(x,z){let Z="";return z&&(this.eol=z),Z+=this.printVersion(x.version),Z+=this.printOrigin(x.origin),Z+=this.printSessionName(x.sessionName),Z+=this.printInformation(x.information),Z+=this.printUri(x.uri),Z+=this.printEmail(x.emails),Z+=this.printPhone(x.phones),Z+=this.printConnection(x.connection),Z+=this.printBandwidth(x.bandwidths),Z+=this.printTimeFields(x.timeFields),Z+=this.printKey(x.key),Z+=this.printSessionAttributes(x.attributes),Z+=this.printMediaDescription(x.mediaDescriptions),Z}printVersion(x){return"v=".concat(x).concat(this.eol)}printOrigin(x){return"o=".concat(x.username," ").concat(x.sessId," ").concat(x.sessVersion," ").concat(x.nettype," ").concat(x.addrtype," ").concat(x.unicastAddress).concat(this.eol)}printSessionName(x){return x?"s=".concat(x).concat(this.eol):""}printInformation(x){return x?"i=".concat(x).concat(this.eol):""}printUri(x){return x?"u=".concat(x).concat(this.eol):""}printEmail(x){let z="";for(const Z of x)z+="e=".concat(Z).concat(this.eol);return z}printPhone(x){let z="";for(const Z of x)z+="e=".concat(Z).concat(this.eol);return z}printConnection(x){return x?"c=".concat(x.nettype," ").concat(x.addrtype," ").concat(x.address).concat(this.eol):""}printBandwidth(x){let z="";for(const Z of x)z+="b=".concat(Z.bwtype,":").concat(Z.bandwidth).concat(this.eol);return z}printTimeFields(x){let z="";for(const Z of x){z+="t=".concat(Z.time.startTime," ").concat(Z.time.startTime).concat(this.eol);for(const ge of Z.repeats)z+="r=".concat(ge.repeatInterval," ").concat(ge.typedTimes.join(" ")).concat(this.eol);Z.zoneAdjustments&&(z+="z=",z+="z=".concat(Z.zoneAdjustments.map(ge=>"".concat(ge.time," ").concat(ge.back?"-":""," ").concat(ge.typedTime)).join(" ")).concat(this.eol),z+=this.eol)}return z}printKey(x){return x?"k=".concat(x).concat(this.eol):""}printAttributes(x){let z="";for(const Z of x)z+="a=".concat(Z.attField).concat(Z.attValue?":".concat(Z.attValue):"").concat(this.eol);return z}printMediaDescription(x){let z="";for(const Z of x)z+=this.printMedia(Z.media),z+=this.printInformation(Z.information),z+=this.printConnections(Z.connections),z+=this.printBandwidth(Z.bandwidths),z+=this.printKey(Z.key),z+=this.printMediaAttributes(Z);return z}printConnections(x){let z="";for(const Z of x)z+=this.printConnection(Z);return z}printMedia(x){return"m=".concat(x.mediaType," ").concat(x.port," ").concat(x.protos.join("/")," ").concat(x.fmts.join(" ")).concat(this.eol)}printSessionAttributes(x){return new Ce(this.eol).print(x)}printMediaAttributes(x){return new Oe(this.eol).print(x)}}class fe{constructor(x){Gn(this,"eol",void 0),this.eol=x}printIceUfrag(x){return x===void 0?"":"a=ice-ufrag:".concat(x).concat(this.eol)}printIcePwd(x){return x===void 0?"":"a=ice-pwd:".concat(x).concat(this.eol)}printIceOptions(x){return x===void 0?"":"a=ice-options:".concat(x.join(y)).concat(this.eol)}printFingerprints(x){return x.length>0?x.map(z=>"a=fingerprint:".concat(z.hashFunction).concat(y).concat(z.fingerprint)).join(this.eol)+this.eol:""}printExtmap(x){return x.map(z=>"a=extmap:".concat(z.entry).concat(z.direction?"/".concat(z.direction):"").concat(y).concat(z.extensionName).concat(z.extensionAttributes?"".concat(y).concat(z.extensionAttributes):"").concat(this.eol)).join("")}printSetup(x){return x===void 0?"":"a=setup:".concat(x).concat(this.eol)}printUnrecognized(x){return x.map(z=>"a=".concat(z.attField).concat(z.attValue?":".concat(z.attValue):"").concat(this.eol)).join("")}}class Ce extends fe{print(x){let z="";return z+=this.printGroups(x.groups),z+=this.printMsidSemantic(x.msidSemantic),z+=this.printIceLite(x.iceLite),z+=this.printIceUfrag(x.iceUfrag),z+=this.printIcePwd(x.icePwd),z+=this.printIceOptions(x.iceOptions),z+=this.printFingerprints(x.fingerprints),z+=this.printSetup(x.setup),z+=this.printTlsId(x.tlsId),z+=this.printIdentity(x.identities),z+=this.printExtmap(x.extmaps),z+=this.printUnrecognized(x.unrecognized),z}printGroups(x){let z="";return x.length>0&&(z+=x.map(Z=>"a=group:".concat(Z.semantic).concat(Z.identificationTag.map(ge=>"".concat(y).concat(ge)).join("")).concat(this.eol)).join("")),z}printIceLite(x){return x===void 0?"":"a=ice-lite"+this.eol}printTlsId(x){return x?"a=tls-id:".concat(x).concat(this.eol):""}printIdentity(x){return x.length===0?"":x.map(z=>"a=identity:".concat(z.assertionValue).concat(z.extensions.map(Z=>"".concat(y).concat(Z.name).concat(Z.value?"=".concat(Z.value):"")))).join(this.eol)+this.eol}printMsidSemantic(x){if(!x)return"";let z="a=msid-semantic:".concat(x.semantic);return x.applyForAll?z+="".concat(y,"*"):x.identifierList.length>0&&(z+=x.identifierList.map(Z=>"".concat(y).concat(Z))),z+this.eol}}class Oe extends fe{print(x){const z=x.attributes;let Z="";return Z+=this.printRTCP(z.rtcp),Z+=this.printIceUfrag(z.iceUfrag),Z+=this.printIcePwd(z.icePwd),Z+=this.printIceOptions(z.iceOptions),Z+=this.printCandidates(z.candidates),Z+=this.printRemoteCandidatesList(z.remoteCandidatesList),Z+=this.printEndOfCandidates(z.endOfCandidates),Z+=this.printFingerprints(z.fingerprints),Z+=this.printSetup(z.setup),Z+=this.printMid(z.mid),Z+=this.printExtmap(z.extmaps),Z+=this.printRTPRelated(z),Z+=this.printPtime(z.ptime),Z+=this.printMaxPtime(z.maxPtime),Z+=this.printDirection(z.direction),Z+=this.printSSRCGroups(z.ssrcGroups),Z+=this.printSSRC(z.ssrcs),Z+=this.printRTCPMux(z.rtcpMux),Z+=this.printRTCPMuxOnly(z.rtcpMuxOnly),Z+=this.printRTCPRsize(z.rtcpRsize),Z+=this.printMSId(z.msids),Z+=this.printImageattr(z.imageattr),Z+=this.printRid(z.rids),Z+=this.printSimulcast(z.simulcast),Z+=this.printSCTPPort(z.sctpPort),Z+=this.printMaxMessageSize(z.maxMessageSize),Z+=this.printUnrecognized(z.unrecognized),Z}printCandidates(x){return x.map(z=>"a=candidate:".concat(z.foundation).concat(y).concat(z.componentId).concat(y).concat(z.transport).concat(y).concat(z.priority).concat(y).concat(z.connectionAddress).concat(y).concat(z.port).concat(y,"typ").concat(y).concat(z.type).concat(z.relAddr?"".concat(y,"raddr").concat(y).concat(z.relAddr):"").concat(z.relPort?"".concat(y,"rport").concat(y).concat(z.relPort):"").concat(Object.keys(z.extension).map(Z=>"".concat(y).concat(Z).concat(y).concat(z.extension[Z])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(x){return x.map(z=>"a=remote-candidates:".concat(z.join(y)).concat(this.eol)).join("")}printEndOfCandidates(x){return x===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(x){if(!x.payloads)return"";const z=x.payloads;let Z="";Z+=x.rtcpFeedbackWildcards.map(ge=>this.printRTCPFeedback("*",ge)).join("");for(const ge of z)Z+=this.printRtpMap(ge.payloadType,ge.rtpMap),Z+=this.printFmtp(ge.payloadType,ge.fmtp),Z+=ge.rtcpFeedbacks.map(rt=>this.printRTCPFeedback(ge.payloadType,rt)).join("");return Z}printFmtp(x,z){if(!z)return"";const Z=Object.keys(z.parameters);return Z.length===1&&z.parameters[Z[0]]===null?"a=fmtp:".concat(x).concat(y).concat(Z[0]).concat(this.eol):"a=fmtp:".concat(x).concat(y).concat(Object.keys(z.parameters).map(ge=>"".concat(ge,"=").concat(z.parameters[ge])).join(";")).concat(this.eol)}printRtpMap(x,z){return z?"a=rtpmap:".concat(x).concat(y).concat(z.encodingName,"/").concat(z.clockRate).concat(z.encodingParameters?"/".concat(z.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(x,z){let Z="a=rtcp-fb:".concat(x).concat(y),ge=z;switch(ge.type){case"trr-int":Z+="ttr-int".concat(y).concat(ge.interval);break;case"ack":case"nack":default:ge=ge,Z+="".concat(ge.type),ge.parameter&&(Z+="".concat(y).concat(ge.parameter),ge.additional&&(Z+="".concat(y).concat(ge.additional)))}return Z+this.eol}printPtime(x){return x===void 0?"":"a=ptime:".concat(x).concat(this.eol)}printMaxPtime(x){return x===void 0?"":"a=maxptime:".concat(x).concat(this.eol)}printDirection(x){return x===void 0?"":"a=".concat(x).concat(this.eol)}printSSRC(x){return x.map(z=>Object.keys(z.attributes).map(Z=>"a=ssrc:".concat(z.ssrcId.toString(10)).concat(y).concat(Z).concat(z.attributes[Z]?":".concat(z.attributes[Z]):"").concat(this.eol)).join("")).join("")}printRTCPMux(x){return x===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(x){return x===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(x){return x===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(x){if(x===void 0)return"";let z="a=rtcp:".concat(x.port);return x.netType&&(z+="".concat(y).concat(x.netType)),x.addressType&&(z+="".concat(y).concat(x.addressType)),x.address&&(z+="".concat(y).concat(x.address)),z+this.eol}printMSId(x){return x.map(z=>"a=msid:".concat(z.id).concat(z.appdata?"".concat(y).concat(z.appdata):"").concat(this.eol)).join("")}printImageattr(x){return x.map(z=>"a=imageattr:".concat(z).concat(this.eol)).join("")}printRid(x){return x.map(z=>{let Z="a=rid:".concat(z.id).concat(y).concat(z.direction);return z.payloads&&(Z+="".concat(y,"pt=").concat(z.payloads.join(","))),z.params.length>0&&(Z+="".concat(y).concat(z.params.map(ge=>ge.type==="depend"?"depend=".concat(ge.rids.join(",")):"".concat(ge.type,"=").concat(ge.val)).join(";"))),Z+this.eol}).join("")}printSimulcast(x){return x===void 0?"":"a=simulcast:".concat(x).concat(this.eol)}printSCTPPort(x){return x===void 0?"":"a=sctp-port:".concat(x).concat(this.eol)}printMaxMessageSize(x){return x===void 0?"":"a=max-message-size:".concat(x).concat(this.eol)}printMid(x){return x===void 0?"":"a=mid:".concat(x).concat(this.eol)}printSSRCGroups(x){return x.map(z=>"a=ssrc-group:".concat(z.semantic).concat(z.ssrcIds.map(Z=>"".concat(y).concat(Z.toString(10))).join("")).concat(this.eol)).join("")}}function et(Re){return new dn().parse(Re)}function Pt(Re,x){return new Qi().print(Re,x)}}},s={};function l(h){if(s[h])return s[h].exports;var p=s[h]={exports:{}};return i[h](p,p.exports,l),p.exports}return l.d=(h,p)=>{for(var v in p)l.o(p,v)&&!l.o(h,v)&&Object.defineProperty(h,v,{enumerable:!0,get:p[v]})},l.o=(h,p)=>Object.prototype.hasOwnProperty.call(h,p),l.r=h=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},l(8)})()})(sr);class mq{constructor(r){w(this,"sessionDesc",void 0),w(this,"localCapabilities",void 0),w(this,"rtpCapabilities",void 0),w(this,"candidates",void 0),w(this,"iceParameters",void 0),w(this,"dtlsParameters",void 0),w(this,"setup",void 0),w(this,"currentMidIndex",void 0),w(this,"cname",void 0),r=or(r);const{remoteIceParameters:i,remoteDtlsParameters:s,candidates:l,remoteRTPCapabilities:h,remoteSetup:p,localCapabilities:v,sdkCodec:E,cname:T}=r,y=sr.exports.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=h,this.candidates=l,this.iceParameters=i,this.dtlsParameters=s,this.setup=p,this.localCapabilities=v,this.cname=T;for(let R=0;R<y.mediaDescriptions.length;R++){const k=y.mediaDescriptions[R];k.attributes.iceUfrag=i.iceUfrag,k.attributes.icePwd=i.icePwd,k.attributes.fingerprints=s.fingerprints,k.attributes.candidates=l,k.attributes.setup=p,k.media.mediaType==="video"&&(k.media.fmts=h.videoCodecs.map(V=>V.payloadType.toString(10)),k.attributes.payloads=h.videoCodecs,k.attributes.extmaps=h.videoExtensions),k.media.mediaType==="audio"&&(k.media.fmts=h.audioCodecs.map(V=>V.payloadType.toString(10)),k.attributes.payloads=h.audioCodecs,k.attributes.extmaps=h.audioExtensions),y.mediaDescriptions[R]=this.mungMediaDesc(k)}this.sessionDesc=y,this.currentMidIndex=y.mediaDescriptions.length-1}toString(){return sr.exports.print(this.sessionDesc)}send(r,i,s){const{ssrcs:l,ssrcGroups:h}=Zo(i,this.cname),p=this.sessionDesc.mediaDescriptions.find(T=>r===st.VIDEO?T.media.mediaType==="video":T.media.mediaType==="audio"),v=l[0].attributes.label,E=l[0].attributes.mslabel;return p.attributes.ssrcs=p.attributes.ssrcs.concat(l),p.attributes.ssrcGroups=p.attributes.ssrcGroups.concat(h),{id:v,mslabel:E}}batchSend(r){return r.map(i=>{let{kind:s,ssrcMsg:l}=i;return this.send(s,l,void 0)})}stopSending(r){this.sessionDesc.mediaDescriptions.forEach(i=>{const s=[],l=[],h=[];i.attributes.ssrcs.forEach(p=>{r.includes(p.attributes.label||"")?h.push(p):s.push(p)}),i.attributes.ssrcGroups.forEach(p=>{h.map(v=>v.ssrcId).includes(p.ssrcIds[0])||l.push(p)}),i.attributes.ssrcs=s,i.attributes.ssrcGroups=l})}mute(r){const i=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(r){const i=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}receive(r,i,s){r.forEach((l,h)=>{const p=l._mediaStreamTrack,v=this.sessionDesc.mediaDescriptions.findIndex(T=>T.attributes.mid===p.kind),E=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[v],l);this.sessionDesc.mediaDescriptions[v]=E})}stopReceiving(r){}updateCandidates(r){r===jr.TCP?this.candidates.forEach(i=>{this.candidates.findIndex(s=>s.transport==="tcp"&&s.connectionAddress===i.connectionAddress&&s.port===i.port)===-1&&this.candidates.push(aL(aL({},i),{},{foundation:"tcpcandidate",priority:Number(i.priority)-1+"",transport:"tcp",port:Number(i.port)+90+""}))}):this.candidates=this.candidates.filter(i=>i.transport!=="tcp");for(const i of this.sessionDesc.mediaDescriptions)i.attributes.candidates=this.candidates}restartICE(r){r=or(r),this.iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=r.iceUfrag,i.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const i=[];for(let s=0;s<r;s++)i.push((this.currentMidIndex+s+1).toString(10));return i}mungRecvMediaDsec(r,i){const s=or(r);return Ad(s,i),BC(s,i),s}updateRecvMedia(r,i){const s=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(s!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[s],i);this.sessionDesc.mediaDescriptions[s]=l}}bumpMid(r){this.currentMidIndex+=r}updateTrackLabel(r,i,s){const l=this.sessionDesc.mediaDescriptions.find(p=>r===st.VIDEO?p.attributes.mid==="video":p.attributes.mid==="audio");if(l){const p=l.attributes.ssrcs.find(v=>v.attributes.label===i);var h;p&&(p.attributes.label=s,(h=p.attributes.msid)===null||h===void 0||h.replace(i,s))}}mungMediaDesc(r){const i=or(r);return FC(i),function(s){const l=s.attributes.extmaps.find(h=>h.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");l&&s.attributes.extmaps.splice(s.attributes.extmaps.indexOf(l),1),s.attributes.payloads.forEach(h=>{const p=h.rtcpFeedbacks.findIndex(v=>v.type==="transport-cc");p!==-1&&h.rtcpFeedbacks.splice(p,1)})}(i),i}getSSRC(r){for(const i of this.sessionDesc.mediaDescriptions)for(const s of i.attributes.ssrcs)if(s.attributes.label===r)return[s]}}function Na(n){if(Array.isArray(n))return n.map(i=>i);if(!sL(n))return n;const r={};for(const i in n)sL(n[i])||Array.isArray(n[i])?r[i]=Na(n[i]):r[i]=n[i];return r}function sL(n){return!(typeof n!="object"||Array.isArray(n)||!n)}function gq(){const n=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return n&&n[0]?Number(n[0].split("/")[1]):null}function vq(n){return window.RTCStatsReport?n.getStats()instanceof Pe:!1}class HC{constructor(r){w(this,"input",[]),w(this,"size",void 0),this.size=r}add(r){this.input.push(r),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const Jc={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},Rp={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:Jc,remoteCandidate:Jc}},cL={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},lL={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},uL={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},dL={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function hL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function pL(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?hL(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):hL(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class $C{constructor(r,i){w(this,"onFirstVideoReceived",void 0),w(this,"onFirstVideoDecoded",void 0),w(this,"onFirstAudioReceived",void 0),w(this,"onFirstVideoDecodedTimeout",void 0),w(this,"onFirstAudioDecoded",void 0),w(this,"onSelectedLocalCandidateChanged",void 0),w(this,"onSelectedRemoteCandidateChanged",void 0),w(this,"videoIsReady",!1),w(this,"videoIsReady2",{}),w(this,"pc",void 0),w(this,"options",void 0),w(this,"intervalTimer",void 0),w(this,"stats",Na(Rp)),w(this,"isFirstVideoReceived",{}),w(this,"isFirstVideoDecoded",{}),w(this,"isFirstAudioReceived",{}),w(this,"isFirstAudioDecoded",{}),w(this,"isFirstVideoDecodedTimeout",{}),w(this,"lossRateWindowStats",[]),this.pc=r,this.options=i,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new Pe(r=>{r({local:pL({},Jc),remote:pL({},Jc)})})}setVideoIsReady(r){this.videoIsReady=r}setVideoIsReady2(r,i){this.videoIsReady2[r]=i}getVideoIsReady(r){return this.videoIsReady2[r]||!1}setIsFirstAudioDecoded(r){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(r){this.lossRateWindowStats.push(r),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const i=this.lossRateWindowStats.length,s=["videoSend","audioSend","videoRecv","audioRecv"];let l=0,h=0,p=0,v=0;for(const E of s)r[E].forEach((T,y)=>{if(!this.lossRateWindowStats[i-1][E][y]||!this.lossRateWindowStats[0][E][y])return;const R=this.lossRateWindowStats[i-1][E][y].packets-this.lossRateWindowStats[0][E][y].packets,k=this.lossRateWindowStats[i-1][E][y].packetsLost-this.lossRateWindowStats[0][E][y].packetsLost;E==="videoSend"||E==="audioSend"?(l+=R,p+=k):(h+=R,v+=k),Number.isNaN(R)||Number.isNaN(R)?T.packetLostRate=0:T.packetLostRate=R<=0||k<=0?0:k/(R+k)});r.sendPacketLossRate=l<=0||p<=0?0:p/(l+p),r.recvPacketLossRate=h<=0||v<=0?0:v/(h+v)}}function fL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function Eq(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?fL(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):fL(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class _q extends $C{constructor(){super(...arguments),w(this,"_stats",Rp),w(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const r=await this._getStats(),i=this.statsResponsesToObjects(r);this._stats=Na(Rp);const s=i.filter(h=>h.type==="ssrc");this.processSSRCStats(s);const l=i.find(h=>h.type==="VideoBwe");l&&this.processBandwidthStats(l),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(r){this._stats.bitrate={actualEncoded:Number(r.googActualEncBitrate),targetEncoded:Number(r.googTargetEncBitrate),retransmit:Number(r.googRetransmitBitrate),transmit:Number(r.googTransmitBitrate)},this._stats.sendBandwidth=Number(r.googAvailableSendBandwidth)}processSSRCStats(r){r.forEach(i=>{const s=i.id.includes("send");switch("".concat(i.mediaType,"_").concat(s?"send":"recv")){case"video_send":{const l=Na(lL);l.codec=i.googCodecName,l.adaptionChangeReason="none",i.googCpuLimitedResolution&&(l.adaptionChangeReason="cpu"),i.googBandwidthLimitedResolution&&(l.adaptionChangeReason="bandwidth"),l.avgEncodeMs=Number(i.googAvgEncodeMs),l.inputFrame={width:Number(i.googFrameWidthInput)||Number(i.googFrameWidthSent),height:Number(i.googFrameHeightInput)||Number(i.googFrameHeightSent),frameRate:Number(i.googFrameRateInput)},l.sentFrame={width:Number(i.googFrameWidthSent),height:Number(i.googFrameHeightSent),frameRate:Number(i.googFrameRateInput)},l.firsCount=Number(i.googFirReceived),l.nacksCount=Number(i.googNacksReceived),l.plisCount=Number(i.googPlisReceived),l.frameCount=Number(i.framesEncoded),l.bytes=Number(i.bytesSent),l.packets=Number(i.packetsSent),l.packetsLost=Number(i.packetsLost),l.ssrc=Number(i.ssrc),l.rttMs=Number(i.googRtt||0),this._stats.videoSend.push(l),this._stats.rtt=l.rttMs;break}case"video_recv":{const l=Na(cL),h=this.lastDecodeVideoReceiverStats.get(Number(i.ssrc));if(l.codec=i.googCodecName,l.targetDelayMs=Number(i.googTargetDelayMs),l.renderDelayMs=Number(i.googRenderDelayMs),l.currentDelayMs=Number(i.googCurrentDelayMs),l.minPlayoutDelayMs=Number(i.googMinPlayoutDelayMs),l.decodeMs=Number(i.googDecodeMs),l.maxDecodeMs=Number(i.googMaxDecodeMs),l.receivedFrame={width:Number(i.googFrameWidthReceived),height:Number(i.googFrameHeightReceived),frameRate:Number(i.googFrameRateReceived)},l.decodedFrame={width:Number(i.googFrameWidthReceived),height:Number(i.googFrameHeightReceived),frameRate:Number(i.googFrameRateDecoded)},l.decodeFrameRate=Number(i.googFrameRateDecoded),l.outputFrame={width:Number(i.googFrameWidthReceived),height:Number(i.googFrameHeightReceived),frameRate:Number(i.googFrameRateOutput)},l.jitterBufferMs=Number(i.googJitterBufferMs),l.firsCount=Number(i.googFirsSent),l.nacksCount=Number(i.googNacksSent),l.plisCount=Number(i.googPlisSent),l.framesDecodeCount=Number(i.framesDecoded),l.bytes=Number(i.bytesReceived),l.packets=Number(i.packetsReceived),l.packetsLost=Number(i.packetsLost),l.ssrc=Number(i.ssrc),l.packets>0&&!this.isFirstVideoReceived[l.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(l.ssrc),this.isFirstVideoReceived[l.ssrc]=!0),l.framesDecodeCount>0&&!this.isFirstVideoDecoded[l.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(l.ssrc,l.decodedFrame.width,l.decodedFrame.height),this.isFirstVideoDecoded[l.ssrc]=!0),h){const p=h.stats,v=Date.now()-h.lts;l.framesDecodeFreezeTime=p.framesDecodeFreezeTime,l.framesDecodeInterval=p.framesDecodeInterval,l.framesDecodeCount>p.framesDecodeCount&&this.isFirstVideoDecoded[l.ssrc]?(h.lts=Date.now(),l.framesDecodeInterval=v,l.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(i.ssrc,10))?l.framesDecodeFreezeTime+=l.framesDecodeInterval:this.setVideoIsReady2(parseInt(i.ssrc,10),!0))):l.framesDecodeCount<h.stats.framesDecodeCount&&(l.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(l.ssrc,{stats:Eq({},l),lts:Date.now()}),this._stats.videoRecv.push(l);break}case"audio_recv":{const l=Na(dL);l.codec=i.googCodecName,l.outputLevel=Math.abs(Number(i.audioOutputLevel))/32767,l.decodingCNG=Number(i.googDecodingCNG),l.decodingCTN=Number(i.googDecodingCTN),l.decodingCTSG=Number(i.googDecodingCTSG),l.decodingNormal=Number(i.googDecodingNormal),l.decodingPLC=Number(i.googDecodingPLC),l.decodingPLCCNG=Number(i.googDecodingPLCCNG),l.expandRate=Number(i.googExpandRate),l.accelerateRate=Number(i.googAccelerateRate),l.preemptiveExpandRate=Number(i.googPreemptiveExpandRate),l.secondaryDecodedRate=Number(i.googSecondaryDecodedRate),l.speechExpandRate=Number(i.googSpeechExpandRate),l.preferredJitterBufferMs=Number(i.googPreferredJitterBufferMs),l.jitterBufferMs=Number(i.googJitterBufferMs),l.jitterMs=Number(i.googJitterReceived),l.bytes=Number(i.bytesReceived),l.packets=Number(i.packetsReceived),l.packetsLost=Number(i.packetsLost),l.ssrc=Number(i.ssrc),l.receivedFrames=Number(i.googDecodingCTN)||Number(i.packetsReceived),l.droppedFrames=Number(i.googDecodingPLC)+Number(i.googDecodingPLCCNG)||Number(i.packetsLost),l.receivedFrames>0&&!this.isFirstAudioReceived[l.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(l.ssrc),this.isFirstAudioReceived[l.ssrc]=!0),l.decodingNormal>0&&!this.isFirstAudioDecoded[l.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(l.ssrc),this.isFirstAudioDecoded[l.ssrc]=!0),this._stats.audioRecv.push(l);break}case"audio_send":{const l=Na(uL);l.codec=i.googCodecName,l.inputLevel=Math.abs(Number(i.audioInputLevel))/32767,l.aecReturnLoss=Number(i.googEchoCancellationReturnLoss||0),l.aecReturnLossEnhancement=Number(i.googEchoCancellationReturnLossEnhancement||0),l.residualEchoLikelihood=Number(i.googResidualEchoLikelihood||0),l.residualEchoLikelihoodRecentMax=Number(i.googResidualEchoLikelihoodRecentMax||0),l.bytes=Number(i.bytesSent),l.packets=Number(i.packetsSent),l.packetsLost=Number(i.packetsLost),l.ssrc=Number(i.ssrc),l.rttMs=Number(i.googRtt||0),this._stats.rtt=l.rttMs,this._stats.audioSend.push(l);break}}})}_getStats(){return new Pe((r,i)=>{this.pc.getStats(r,i)})}statsResponsesToObjects(r){const i=[];return r.result().forEach(s=>{const l={id:s.id,timestamp:s.timestamp.valueOf().toString(),type:s.type};s.names().forEach(h=>{l[h]=s.stat(h)}),i.push(l)}),i}}function mL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function lu(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?mL(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):mL(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class gL extends $C{constructor(){super(...arguments),w(this,"_stats",Rp),w(this,"report",void 0),w(this,"lastDecodeVideoReceiverStats",new Map),w(this,"lastVideoFramesRecv",new Map),w(this,"lastVideoFramesSent",new Map),w(this,"lastVideoFramesDecode",new Map),w(this,"lastVideoJBDelay",new Map),w(this,"lastAudioJBDelay",new Map),w(this,"mediaBytesSent",new Map),w(this,"mediaBytesRetransmit",new Map),w(this,"mediaBytesTargetEncode",new Map),w(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=Na(Rp),this.report.forEach(r=>{switch(r.type){case bo.OUTBOUND:r.mediaType==="audio"?this.processAudioOutboundStats(r):r.mediaType==="video"&&this.processVideoOutboundStats(r);break;case bo.INBOUND:r.mediaType==="audio"?this.processAudioInboundStats(r):r.mediaType==="video"&&this.processVideoInboundStats(r);break;case bo.TRANSPORT:{const i=this.report.get(r.selectedCandidatePairId);i&&this.processCandidatePairStats(i);break}case bo.CANDIDATE_PAIR:r.selected&&this.processCandidatePairStats(r)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const r=await this.pc.getStats(),i={local:lu({},Jc),remote:lu({},Jc)};return r.forEach(s=>{let l;if(s.type===bo.TRANSPORT&&(l=r.get(s.selectedCandidatePairId)),s.type===bo.CANDIDATE_PAIR&&s.selected&&(l=s),l){const h=(p,v)=>{p.type=v.type,p.id=v.id,v.address&&(p.address=v.address),v.candidateType&&(p.candidateType=v.candidateType),v.port&&(p.port=v.port),v.priority&&(p.priority=v.priority),v.protocol&&(p.protocol=v.protocol),v.relayProtocol&&(p.relayProtocol=v.relayProtocol)};if(l.localCandidateId){const p=r.get(l.localCandidateId);p&&h(i.local,p)}if(l.remoteCandidateId){const p=r.get(l.remoteCandidateId);p&&h(i.remote,p)}}}),i}processCandidatePairStats(r){if(this._stats.sendBandwidth=r.availableOutgoingBitrate||0,r.currentRoundTripTime&&(this._stats.rtt=1e3*r.currentRoundTripTime),this._stats.videoSend.forEach(i=>{r.currentRoundTripTime&&(i.rttMs=1e3*r.currentRoundTripTime)}),this._stats.audioSend.forEach(i=>{r.currentRoundTripTime&&(i.rttMs=1e3*r.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=r.id,r.localCandidateId){const i=this.report.get(r.localCandidateId);i&&this.processCandidateStats(i)}if(r.remoteCandidateId){const i=this.report.get(r.remoteCandidateId);i&&this.processCandidateStats(i)}}processCandidateStats(r){let i;r.type===bo.LOCAL_CANDIDATE&&(i=this._stats.selectedCandidatePair.localCandidate),r.type===bo.REMOTE_CANDIDATE&&(i=this._stats.selectedCandidatePair.remoteCandidate),i&&(i.type=r.type,i.id=r.id,r.address&&(i.address=r.address),r.candidateType&&(i.candidateType=r.candidateType),r.port&&(i.port=r.port),r.priority&&(i.priority=r.priority),r.protocol&&(i.protocol=r.protocol),r.relayProtocol&&(i.relayProtocol=r.relayProtocol),r.type===bo.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==i.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(lu({},i),lu({},this.stats.selectedCandidatePair.localCandidate)),r.type===bo.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==i.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(lu({},i),lu({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(r){let i=this._stats.audioRecv.find(s=>s.ssrc===r.ssrc);i||(i=Na(dL),this._stats.audioRecv.push(i)),i.ssrc=r.ssrc,i.packets=r.packetsReceived,i.packetsLost=r.packetsLost,i.bytes=r.bytesReceived,i.jitterMs=1e3*r.jitter,this.processAudioTrackReceiverStats(r,r.trackId,i),r.codecId&&(i.codec=this.getCodecFromCodecStats(r.codecId)),i.receivedFrames||(i.receivedFrames=r.packetsReceived),i.droppedFrames||(i.droppedFrames=r.packetsLost),i.receivedFrames>0&&!this.isFirstAudioReceived[i.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(i.ssrc),this.isFirstAudioReceived[i.ssrc]=!0),i.outputLevel&&i.outputLevel>0&&!this.isFirstAudioDecoded[i.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(i.ssrc),this.isFirstAudioDecoded[i.ssrc]=!0),typeof r.concealedSamples=="number"&&(i.concealedSamples=r.concealedSamples)}processVideoInboundStats(r){let i=this._stats.videoRecv.find(p=>p.ssrc===r.ssrc);i||(i=Na(cL),this._stats.videoRecv.push(i)),i.ssrc=r.ssrc,i.packets=r.packetsReceived,i.packetsLost=r.packetsLost,i.bytes=r.bytesReceived,i.firsCount=r.firCount,i.nacksCount=r.nackCount,i.plisCount=r.pliCount,i.framesDecodeCount=r.framesDecoded,i.totalInterFrameDelay=r.totalInterFrameDelay,i.totalSquaredInterFrameDelay=r.totalSquaredInterFrameDelay;const s=this.lastDecodeVideoReceiverStats.get(i.ssrc),l=this.lastVideoFramesDecode.get(i.ssrc),h=Date.now();if(i.framesDecodeCount>0&&!this.isFirstVideoDecoded[i.ssrc]){const p=i.decodedFrame?i.decodedFrame.width:0,v=i.decodedFrame?i.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(i.ssrc,p,v),this.isFirstVideoDecoded[i.ssrc]=!0}if(s){const p=s.stats,v=h-s.lts;i.framesDecodeFreezeTime=p.framesDecodeFreezeTime,i.framesDecodeInterval=p.framesDecodeInterval,!this.isFirstVideoDecoded[i.ssrc]&&v>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[i.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(i.ssrc),this.isFirstVideoDecodedTimeout[i.ssrc]=!0),i.framesDecodeCount>p.framesDecodeCount&&this.isFirstVideoDecoded[i.ssrc]?(s.lts=Date.now(),i.framesDecodeInterval=v,i.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(r.ssrc))?i.framesDecodeFreezeTime+=i.framesDecodeInterval:this.setVideoIsReady2(parseInt(r.ssrc,10),!0))):i.framesDecodeCount<p.framesDecodeCount&&(i.framesDecodeInterval=0),r.framesDecoded&&r.qpSum&&(s.stats.framesDecodeCount>r.framesDecoded?i.qpSumPerFrame=r.qpSum/r.framesDecoded:i.qpSumPerFrame=(r.qpSum-s.qpSum)/(r.framesDecoded-s.stats.framesDecodeCount))}l&&h-l.lts>=800?(i.decodeFrameRate=Math.round((i.framesDecodeCount-l.count)/((h-l.lts)/1e3)),this.lastVideoFramesDecode.set(i.ssrc,{count:i.framesDecodeCount,lts:h,rate:i.decodeFrameRate})):l?i.decodeFrameRate=l.rate:this.lastVideoFramesDecode.set(i.ssrc,{count:i.framesDecodeCount,lts:h,rate:0}),r.totalDecodeTime&&(i.decodeMs=1e3*r.totalDecodeTime),this.processVideoTrackReceiverStats(r,r.trackId,i),r.codecId&&(i.codec=this.getCodecFromCodecStats(r.codecId)),r.framerateMean&&(i.framesRateFirefox=r.framerateMean),i.packets>0&&!this.isFirstVideoReceived[i.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(i.ssrc),this.isFirstVideoReceived[i.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(i.ssrc,{stats:lu({},i),lts:s?s.lts:Date.now(),qpSum:r.qpSum})}processVideoOutboundStats(r){let i=this._stats.videoSend.find(l=>l.ssrc===r.ssrc);i||(i=Na(lL),this._stats.videoSend.push(i));const s=this.mediaBytesSent.get(r.ssrc);if(s)s.add(r.bytesSent);else{const l=new HC(10);l.add(r.bytesSent),this.mediaBytesSent.set(r.ssrc,l)}if(r.retransmittedBytesSent!==void 0){const l=this.mediaBytesRetransmit.get(r.ssrc);if(l)l.add(r.retransmittedBytesSent);else{const h=new HC(10);h.add(r.retransmittedBytesSent),this.mediaBytesRetransmit.set(r.ssrc,h)}}if(r.totalEncodedBytesTarget){const l=this.mediaBytesTargetEncode.get(r.ssrc);if(l)l.add(r.totalEncodedBytesTarget);else{const h=new HC(10);h.add(r.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(r.ssrc,h)}}if(i.ssrc=r.ssrc,i.bytes=r.bytesSent,i.packets=r.packetsSent,i.firsCount=r.firCount,i.nacksCount=r.nackCount,i.plisCount=r.pliCount,i.frameCount=r.framesEncoded,i.adaptionChangeReason=r.qualityLimitationReason,i.scalabilityMode=r.scalabilityMode,r.totalEncodeTime&&r.framesEncoded){const l=this.lastEncoderMs.get(r.ssrc);if(!l||l.lastFrameCount>r.framesEncoded)i.avgEncodeMs=1e3*r.totalEncodeTime/r.framesEncoded;else{const h=r.framesEncoded-l.lastFrameCount,p=r.totalEncodeTime-l.lastEncoderTime;i.avgEncodeMs=1e3*p/h}}if(r.framesEncoded&&r.qpSum){const l=this.lastEncoderMs.get(r.ssrc);!l||l.lastFrameCount>r.framesEncoded?i.qpSumPerFrame=r.qpSum/r.framesEncoded:i.qpSumPerFrame=(r.qpSum-l.lastQpSum)/(r.framesEncoded-l.lastFrameCount)}if(this.lastEncoderMs.set(r.ssrc,{lastFrameCount:r.framesEncoded,lastEncoderTime:r.totalEncodeTime,lastQpSum:r.qpSum,lts:Date.now()}),r.codecId&&(i.codec=this.getCodecFromCodecStats(r.codecId)),r.mediaSourceId&&this.processVideoMediaSource(r.mediaSourceId,i),this.processVideoTrackSenderStats(r,r.trackId,i),r.remoteId)this.processRemoteInboundStats(r.remoteId,i);else{const l=this.findRemoteStatsId(r.ssrc,bo.REMOTE_INBOUND);l&&this.processRemoteInboundStats(l,i)}}processAudioOutboundStats(r){let i=this._stats.audioSend.find(s=>s.ssrc===r.ssrc);if(i||(i=Na(uL),this._stats.audioSend.push(i)),i.ssrc=r.ssrc,i.packets=r.packetsSent,i.bytes=r.bytesSent,r.mediaSourceId&&this.processAudioMediaSource(r.mediaSourceId,i),r.codecId&&(i.codec=this.getCodecFromCodecStats(r.codecId)),this.processAudioTrackSenderStats(r,r.trackId,i),r.remoteId)this.processRemoteInboundStats(r.remoteId,i);else{const s=this.findRemoteStatsId(r.ssrc,bo.REMOTE_INBOUND);s&&this.processRemoteInboundStats(s,i)}}findRemoteStatsId(r,i){var s;const l=Array.from(bs(s=this.report).call(s)).find(h=>h.type===i&&h.ssrc===r);return l?l.id:null}processVideoMediaSource(r,i){const s=this.report.get(r);s&&s.width&&s.height&&s.framesPerSecond&&(i.inputFrame={width:s.width,height:s.height,frameRate:s.framesPerSecond})}processAudioMediaSource(r,i){const s=this.report.get(r);s&&(i.inputLevel=s.audioLevel)}processVideoTrackSenderStats(r,i,s){var l,h,p;const v=i?this.report.get(i):void 0,E=(l=v==null?void 0:v.framesSent)!==null&&l!==void 0?l:r.framesSent;let T=(h=v==null?void 0:v.frameWidth)!==null&&h!==void 0?h:r.frameWidth,y=(p=v==null?void 0:v.frameHeight)!==null&&p!==void 0?p:r.frameHeight;if(typeof E!="number")return;typeof T=="number"&&typeof y=="number"||(T=0,y=0);let R=0;const k=Date.now(),V=this.lastVideoFramesSent.get(s.ssrc);V&&k-V.lts>=800?(R=Math.round((E-V.count)/((k-V.lts)/1e3)),this.lastVideoFramesSent.set(s.ssrc,{count:E,lts:k,rate:R})):V?R=V.rate:this.lastVideoFramesSent.set(s.ssrc,{count:E,lts:k,rate:0}),s.sentFrame={width:T,height:y,frameRate:Math.max(0,R)}}processVideoTrackReceiverStats(r,i,s){var l,h,p,v,E;const T=i?this.report.get(i):void 0,y=(l=T==null?void 0:T.framesReceived)!==null&&l!==void 0?l:r.framesReceived,R=(h=T==null?void 0:T.frameWidth)!==null&&h!==void 0?h:r.frameWidth,k=(p=T==null?void 0:T.frameHeight)!==null&&p!==void 0?p:r.frameHeight,V=(v=T==null?void 0:T.jitterBufferDelay)!==null&&v!==void 0?v:r.jitterBufferDelay,$=(E=T==null?void 0:T.jitterBufferEmittedCount)!==null&&E!==void 0?E:r.jitterBufferEmittedCount;if(typeof y=="number"){const W=this.lastVideoFramesRecv.get(s.ssrc),G=Date.now();s.framesReceivedCount=y;let ie=0;W&&G-W.lts>=800?(ie=Math.round((y-W.count)/((G-W.lts)/1e3)),this.lastVideoFramesRecv.set(s.ssrc,{count:y,lts:G,rate:ie})):W?ie=W.rate:this.lastVideoFramesRecv.set(s.ssrc,{count:y,lts:G,rate:0}),s.receivedFrame={width:R||0,height:k||0,frameRate:ie||0},s.decodedFrame={width:R||0,height:k||0,frameRate:s.decodeFrameRate||0},s.outputFrame={width:R||0,height:k||0,frameRate:s.decodeFrameRate||0}}if(V&&$){let W=this.lastVideoJBDelay.get(s.ssrc);this.lastVideoJBDelay.set(s.ssrc,{jitterBufferDelay:V,jitterBufferEmittedCount:$}),W||(W={jitterBufferDelay:0,jitterBufferEmittedCount:0});const G=1e3*(V-W.jitterBufferDelay)/($-W.jitterBufferEmittedCount);s.jitterBufferMs=G,s.currentDelayMs=Math.round(G)}}processAudioTrackSenderStats(r,i,s){var l,h,p,v;const E=i?this.report.get(i):void 0,T=(l=(h=E==null?void 0:E.echoReturnLoss)!==null&&h!==void 0?h:r.echoReturnLoss)!==null&&l!==void 0?l:0,y=(p=(v=E==null?void 0:E.echoReturnLossEnhancement)!==null&&v!==void 0?v:r.echoReturnLossEnhancement)!==null&&p!==void 0?p:0;s.aecReturnLoss=T,s.aecReturnLossEnhancement=y}processAudioTrackReceiverStats(r,i,s){var l,h,p,v,E,T,y;const R=i?this.report.get(i):void 0,k=(l=R==null?void 0:R.removedSamplesForAcceleration)!==null&&l!==void 0?l:r.removedSamplesForAcceleration,V=(h=R==null?void 0:R.totalSamplesReceived)!==null&&h!==void 0?h:r.totalSamplesReceived,$=(p=R==null?void 0:R.jitterBufferDelay)!==null&&p!==void 0?p:r.jitterBufferDelay,W=(v=R==null?void 0:R.jitterBufferEmittedCount)!==null&&v!==void 0?v:r.jitterBufferEmittedCount,G=(E=R==null?void 0:R.audioLevel)!==null&&E!==void 0?E:r==null?void 0:r.audioLevel,ie=(T=R==null?void 0:R.totalSamplesDuration)!==null&&T!==void 0?T:r==null?void 0:r.totalSamplesDuration,se=(y=R==null?void 0:R.concealedSamples)!==null&&y!==void 0?y:r.concealedSamples;if(k&&V&&(s.accelerateRate=k/V),$&&W){let De=this.lastAudioJBDelay.get(s.ssrc);this.lastAudioJBDelay.set(s.ssrc,{jitterBufferDelay:$,jitterBufferEmittedCount:W}),De||(De={jitterBufferDelay:0,jitterBufferEmittedCount:0});const Te=1e3*($-De.jitterBufferDelay)/(W-De.jitterBufferEmittedCount);s.jitterBufferMs=Math.round(Te)}s.outputLevel=G;let ye=1920;ie&&V&&(ye=V/ie/50,s.receivedFrames=Math.round(V/ye)),se&&(s.droppedFrames=Math.round(se/ye))}processRemoteInboundStats(r,i){const s=this.report.get(r);s&&(i.packetsLost=s.packetsLost,s.roundTripTime&&(i.rttMs=1e3*s.roundTripTime))}getCodecFromCodecStats(r){const i=this.report.get(r);if(!i)return"";const s=i.mimeType.match(/\/(.*)$/);return s&&s[1]?s[1]:""}updateSendBitrate(){let r=0,i=null,s=null;this.mediaBytesSent.forEach(h=>{r+=h.diffMean()}),this.mediaBytesRetransmit.forEach(h=>{i=i===null?h.diffMean():i+h.diffMean()}),this.mediaBytesTargetEncode.forEach(h=>{s=s===null?h.diffMean():s+h.diffMean()});const l=i!==null?r-i:r;this._stats.bitrate={actualEncoded:8*l/(this.options.updateInterval/1e3),transmit:8*r/(this.options.updateInterval/1e3)},i!==null&&(this._stats.bitrate.retransmit=8*i/(this.options.updateInterval/1e3)),s!==null&&(this._stats.bitrate.targetEncoded=8*s/(this.options.updateInterval/1e3))}}class Sq extends $C{updateStats(){return Pe.resolve()}}function WC(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:500,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e4;const h=gq();return h?h<76?new _q(n,{updateInterval:r,lossRateInterval:i,freezeRateLimit:s,firstVideoDecodedTimeout:l}):new gL(n,{updateInterval:r,lossRateInterval:i,freezeRateLimit:s,firstVideoDecodedTimeout:l}):vq(n)?new gL(n,{updateInterval:r,lossRateInterval:i,freezeRateLimit:s,firstVideoDecodedTimeout:l}):new Sq(n,{updateInterval:r,lossRateInterval:i,freezeRateLimit:s,firstVideoDecodedTimeout:l})}var Zt;function vL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function EL(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?vL(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):vL(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}let Ip=(_e((Zt=class zp extends m0{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}constructor(r,i){super(r,i),w(this,"store",void 0),w(this,"peerConnection",void 0),w(this,"remoteSDP",void 0),w(this,"initialOffer",void 0),w(this,"statsFilter",void 0),w(this,"useRTX",!1),w(this,"localCapabilities",void 0),w(this,"localCandidateCount",0),w(this,"allCandidatesReceived",!1),w(this,"establishPromise",void 0),w(this,"mutex",new Ri("P2PConnection-mutex")),this.store=i,this.peerConnection=new RTCPeerConnection(zp.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.statsFilter=WC(this.peerConnection,ne("STATS_UPDATE_INTERVAL"),void 0,Mn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const r=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!r.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const i=cu(r.sdp),s=VC(r.sdp,!this.useRTX,ne("FILTER_VIDEO_FEC"),ne("FILTER_AUDIO_FEC"),["opus"]);return this.localCapabilities=s,this.initialOffer=r,EL(EL({},i),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:s},offerSDP:r.sdp})}catch(r){throw new X(j.GET_LOCAL_CONNECTION_PARAMS_FAILED,r.toString())}}async connect(r,i,s,l,h,p){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new mq({remoteIceParameters:r,remoteDtlsParameters:i,candidates:s,remoteRTPCapabilities:l.send,remoteSetup:h,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:p});const v=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(v){throw new X(j.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(v.toString()))}}send(r,i){var s=this;return Aa(function*(){const l=yield yt(s.mutex.lock());try{if(!s.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const h=r.map(k=>s.peerConnection.addTrack(k._mediaStreamTrack)),p=yield yt(s.peerConnection.createOffer()),v=sr.exports.parse(p.sdp),E=r.map(k=>{const V=k._mediaStreamTrack,$=v.mediaDescriptions.find(W=>W.attributes.mid===V.kind);if(!$)throw new Error("Cannot extract ssrc from mediaDescription.");return function(W,G,ie){const se=W.attributes.ssrcs.filter(De=>De.attributes.label===G),ye=W.attributes.ssrcGroups;if(se.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(ye&&se.length>1){const De=ye.find(Te=>Te.ssrcIds.indexOf(se[0].ssrcId)!==-1);return De?[{ssrcId:De.ssrcIds[0],rtx:ie?De.ssrcIds[1]:void 0}]:[{ssrcId:se[0].ssrcId}]}return[{ssrcId:se[0].ssrcId}]}($,V.id,s.useRTX)});let T;try{T=yield E}catch(k){throw h.forEach(V=>{yi()&&V.replaceTrack(null),s.peerConnection.removeTrack(V)}),k}const y=s.mungSendOfferSDP(p.sdp,r);s.remoteSDP.receive(r,i,T);const R=s.remoteSDP.toString();return yield yt(s.peerConnection.setLocalDescription({type:"offer",sdp:y})),yield yt(s.applySendEncodings(h,r)),yield yt(s.peerConnection.setRemoteDescription({type:"answer",sdp:R})),r.map((k,V)=>{const $=k._mediaStreamTrack.id;return{localSSRC:E[V],id:$}})}catch(h){throw new X(j.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(h.toString()))}finally{l()}})()}async stopSending(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const i=this.peerConnection.getSenders().filter(h=>{var p;return r.indexOf(((p=h.track)===null||p===void 0?void 0:p.id)||"")!==-1});if(i.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");i.map(h=>{yi()&&h.replaceTrack(null),this.peerConnection.removeTrack(h)});const s=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(s),this.remoteSDP.stopReceiving(r);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(i){throw new X(j.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(i.toString()))}}async receive(r,i,s,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(r," before remoteSDP created."));const{id:h,mslabel:p}=this.remoteSDP.send(r,i,l),v=new Pe((y,R)=>{const k=setTimeout(()=>{R(new Error("Cannot receive track, id: ".concat(h)))},1e4),V=$=>{const W=$t();if((W.name==="Safari"&&Number(W.version)===11||Ci())&&$.track.id!==h&&$.streams[0].id===p){var G;const ie=$.streams[0].getTracks()[0];return(G=this.remoteSDP)===null||G===void 0||G.updateTrackLabel(r,h,$.track.id),this.peerConnection.removeEventListener("track",V),clearTimeout(k),void y(ie)}if($.track.id===h)return this.peerConnection.removeEventListener("track",V),clearTimeout(k),void y($.track)};this.peerConnection.addEventListener("track",V)}),E=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:E});const T=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(T),{track:await v,id:h}}catch(h){throw new X(j.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(h.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const s=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(s)}catch(i){throw new X(j.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}async muteRemote(r){}async unmuteRemote(r){}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getSenders().filter(s=>{var l;return r.indexOf(((l=s.track)===null||l===void 0?void 0:l.id)||"")!==-1});if(i.length!==r.length)throw new Error("sender' length doesn't match mids' length.");i.map(s=>{if(yi()&&s.track)s.track.enabled=!1;else{const l=s.getParameters();l.encodings.forEach(h=>h.active=!1),s.setParameters(l)}})}catch(i){throw new X(j.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getSenders().filter(h=>{var p;return r.indexOf(((p=h.track)===null||p===void 0?void 0:p.id)||"")!==-1});if(i.length!==r.length)throw new Error("Senders' length doesn't match mids' length.");i.map(async h=>{if(yi()&&h.track)h.track.enabled=!0;else{const p=h.getParameters();p.encodings.forEach(v=>v.active=!0),await h.setParameters(p)}});const s=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(s);const l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:l})}catch(i){throw new X(j.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(i.toString()))}}restartICE(r){var i=this;return Aa(function*(){const s=yield yt(i.mutex.lock("From P2PConnection.restartICE"));try{if(!i.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Xn().supportPCSetConfiguration){const E=i.peerConnection.getConfiguration(),T=r===jr.RELAY?"relay":"all";E.iceTransportPolicy!==T&&(M.debug("[".concat(i.store.clientId,"] restartICE change iceTransportPolicy from [").concat(E.iceTransportPolicy,"] to [").concat(T,"]")),E.iceTransportPolicy=T,i.peerConnection.setConfiguration(E))}else if(r===jr.RELAY)return;r!==jr.RELAY&&i.remoteSDP.updateCandidates(r);const l=yield yt(i.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const h=cu(l.sdp),{remoteIceParameters:p}=yield h.iceParameters;i.remoteSDP.restartICE(p);const v=i.remoteSDP.toString();yield yt(i.peerConnection.setLocalDescription(l)),yield yt(i.peerConnection.setRemoteDescription({type:"answer",sdp:v}))}catch(l){M.warning("[".concat(i.store.clientId,"] restart ICE failed, abort operation"),l)}finally{s()}})()}close(){var r;this.peerConnection.close(),(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const s=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(s.sdp,[i]);this.remoteSDP.updateRecvMedia(i._mediaStreamTrack.kind,i);const h=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(s){throw new X(j.EXCHANGE_SDP_FAILED,s.toString())}}async updateSendParameters(r,i){const s=this.peerConnection.getSenders().filter(l=>{var h;return((h=l.track)===null||h===void 0?void 0:h.id)===r});s.length===1&&await this.applySendEncodings(s,[i])}setStatsRemoteVideoIsReady(r,i){this.statsFilter.setVideoIsReady2(r,i)}async replaceTrack(r,i){const s=this.peerConnection.getSenders().find(l=>{var h;return((h=l.track)===null||h===void 0?void 0:h.id)===i});s&&await s.replaceTrack(r._mediaStreamTrack)}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,M.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,M.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},ne("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const i={iceServers:[],sdpSemantics:"plan-b"};return r.iceServers?i.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(lp(r.turnServer.servers)?i.iceServers=r.turnServer.servers:(i.iceServers&&i.iceServers.push(...zp.turnServerConfigToIceServers(r.turnServer.servers)),ne("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&r.turnServer.serversFromGateway&&i.iceServers.push(...zp.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(r){const i=[];return r.forEach(s=>{s.security?s.tcpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),i}async applySendEncodings(r,i){try{if(!Xn().supportSetRtpSenderParameters||r.length!==i.length)return;for(let l=0;l<r.length;l++){var s;const h=r[l],p=i[l];if(!p)continue;const v={},E={};if(p instanceof ar)switch(p._optimizationMode){case"motion":v.degradationPreference="maintain-framerate";break;case"detail":v.degradationPreference="maintain-resolution";break;default:v.degradationPreference="balanced"}if(ne("DSCP_TYPE")&&Yl()){const R=ne("DSCP_TYPE");["very-low","low","medium","high"].includes(R)&&(E.networkPriority=R)}const T=h.getParameters(),y=(s=T.encodings)===null||s===void 0?void 0:s[0];y&&Object.assign(y,E),Object.assign(T,v),await h.setParameters(T)}}catch{M.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(r,i){const s=sr.exports.parse(r);return i.forEach((l,h)=>{const p=l._mediaStreamTrack,v=s.mediaDescriptions.find(E=>E.attributes.mid===p.kind);v&&Ad(v,l)}),sr.exports.print(s)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,i,s)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,i,s)},this.statsFilter.onSelectedLocalCandidateChanged=(r,i)=>{var s;(s=this.onSelectedLocalCandidateChanged)===null||s===void 0||s.call(this,r,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,i)=>{var s;(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0||s.call(this,r,i)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const i=this.remoteSDP.batchSend(r).map((h,p)=>{let{id:v,mslabel:E}=h;const{kind:T}=r[p];return new Pe((y,R)=>{const k=setTimeout(()=>{R(new Error("Cannot receive track, id: ".concat(v)))},1e4),V=$=>{const W=$t();if(W.name==="Safari"&&Number(W.version)===11&&$.track.id!==v&&$.streams[0].id===E){var G;const ie=$.streams[0].getTracks()[0];return(G=this.remoteSDP)===null||G===void 0||G.updateTrackLabel(T,v,$.track.id),this.peerConnection.removeEventListener("track",V),clearTimeout(k),void y({track:ie,id:v})}if($.track.id===v)return this.peerConnection.removeEventListener("track",V),clearTimeout(k),void y({track:$.track,id:v})};this.peerConnection.addEventListener("track",V)})}),s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});const l=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(l),await Pe.all(i)}catch(i){throw new X(j.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(i.toString()))}}async getRemoteSSRC(r){if(!this.remoteSDP)return;const i=this.remoteSDP.getSSRC(r);return i==null?void 0:i[0].ssrcId}setConfiguration(r){if(Xn().supportPCSetConfiguration){const i=zp.resolvePCConfiguration(r);this.peerConnection.setConfiguration(i)}}}).prototype,"connect",[ea],Object.getOwnPropertyDescriptor(Zt.prototype,"connect"),Zt.prototype),_e(Zt.prototype,"stopSending",[ea],Object.getOwnPropertyDescriptor(Zt.prototype,"stopSending"),Zt.prototype),_e(Zt.prototype,"receive",[ea],Object.getOwnPropertyDescriptor(Zt.prototype,"receive"),Zt.prototype),_e(Zt.prototype,"stopReceiving",[ea],Object.getOwnPropertyDescriptor(Zt.prototype,"stopReceiving"),Zt.prototype),_e(Zt.prototype,"muteRemote",[ea],Object.getOwnPropertyDescriptor(Zt.prototype,"muteRemote"),Zt.prototype),_e(Zt.prototype,"unmuteRemote",[ea],Object.getOwnPropertyDescriptor(Zt.prototype,"unmuteRemote"),Zt.prototype),_e(Zt.prototype,"muteLocal",[ea],Object.getOwnPropertyDescriptor(Zt.prototype,"muteLocal"),Zt.prototype),_e(Zt.prototype,"unmuteLocal",[ea],Object.getOwnPropertyDescriptor(Zt.prototype,"unmuteLocal"),Zt.prototype),_e(Zt.prototype,"close",[ea],Object.getOwnPropertyDescriptor(Zt.prototype,"close"),Zt.prototype),_e(Zt.prototype,"updateEncoderConfig",[ea],Object.getOwnPropertyDescriptor(Zt.prototype,"updateEncoderConfig"),Zt.prototype),_e(Zt.prototype,"updateSendParameters",[ea],Object.getOwnPropertyDescriptor(Zt.prototype,"updateSendParameters"),Zt.prototype),_e(Zt.prototype,"replaceTrack",[ea],Object.getOwnPropertyDescriptor(Zt.prototype,"replaceTrack"),Zt.prototype),_e(Zt.prototype,"getRemoteSSRC",[ea],Object.getOwnPropertyDescriptor(Zt.prototype,"getRemoteSSRC"),Zt.prototype),Zt);function ea(n,r,i){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,h=await l.lock("Locking from P2PConnection.".concat(r));try{for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];return await s.apply(this,v)}finally{h()}},i}function _L(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function SL(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?_L(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):_L(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}const V0="9",yL=4e4;class yq{get localCapabilities(){return or(this._localCapabilities)}get rtpCapabilities(){return or(this._rtpCapabilities)}get candidates(){return or(this._candidates)}get iceParameters(){return or(this._iceParameters)}get dtlsParameters(){return or(this._dtlsParameters)}constructor(r){w(this,"sessionDesc",void 0),w(this,"_localCapabilities",void 0),w(this,"_rtpCapabilities",void 0),w(this,"_candidates",void 0),w(this,"_iceParameters",void 0),w(this,"_dtlsParameters",void 0),w(this,"setup",void 0),w(this,"currentMidIndex",void 0),w(this,"cname",void 0),w(this,"firefoxSsrcMidMap",new Map),r=or(r);const{remoteIceParameters:i,remoteDtlsParameters:s,candidates:l,remoteRTPCapabilities:h,remoteSetup:p,localCapabilities:v,cname:E}=r,T=sr.exports.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`);this._rtpCapabilities=h,this._candidates=l,this._iceParameters=i,this._dtlsParameters=s,this._localCapabilities=v,this.setup=p,this.cname=E;const y=this.rtpCapabilities.send;for(const R of T.mediaDescriptions){if(R.attributes.iceUfrag=i.iceUfrag,R.attributes.icePwd=i.icePwd,R.attributes.fingerprints=s.fingerprints,R.attributes.candidates=l,R.attributes.setup=p,R.media.mediaType==="video"&&(R.media.fmts=y.videoCodecs.map(k=>k.payloadType.toString(10)),R.attributes.payloads=y.videoCodecs,R.attributes.extmaps=y.videoExtensions,ne("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:k,ssrcGroups:V}=Zo([{ssrcId:yL,rtx:ne("USE_SUB_RTX")?40001:void 0}],this.cname);R.attributes.ssrcs=k,R.attributes.ssrcGroups=V}if(R.media.mediaType==="audio"&&(R.media.fmts=y.audioCodecs.map(k=>k.payloadType.toString(10)),R.attributes.payloads=y.audioCodecs,R.attributes.extmaps=y.audioExtensions,Xc(R),ne("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:k,ssrcGroups:V}=Zo([{ssrcId:2e4}],this.cname);R.attributes.ssrcs=k,R.attributes.ssrcGroups=V}}this.sessionDesc=T,this.currentMidIndex=T.mediaDescriptions.length-1}preloadRemoteMedia(){const r=ne("PRELOAD_MEDIA_COUNT");this.rtpCapabilities;const i=this.candidates,s=this.dtlsParameters,l=this.iceParameters,h=this.rtpCapabilities.send;for(let p=1;p<r;p++){const v=2*p+2e4,E=2*p+yL,{ssrcs:T,ssrcGroups:y}=Zo([{ssrcId:v}],this.cname),{ssrcs:R,ssrcGroups:k}=Zo([{ssrcId:E,rtx:ne("USE_SUB_RTX")?E+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:V0,protos:["UDP","TLS","RTP","SAVPF"],fmts:h.videoCodecs.map(V=>V.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:i,extmaps:h.videoExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:R,ssrcGroups:k,rtcpFeedbackWildcards:[],payloads:h.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:V0,protos:["UDP","TLS","RTP","SAVPF"],fmts:h.audioCodecs.map(V=>V.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:i,extmaps:h.audioExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:T,ssrcGroups:y,rtcpFeedbackWildcards:[],payloads:h.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return sr.exports.print(this.sessionDesc)}send(r,i,s,l){const{ssrcs:h,ssrcGroups:p}=Zo(i,this.cname,ne("SYNC_GROUP")?s:void 0),v=this.findPreloadMediaDesc(h);if(v){if(Mn()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,v.attributes.mid),l&&(l.twcc||l.remb)){const E=this.sessionDesc.mediaDescriptions.indexOf(v);return this.sessionDesc.mediaDescriptions[E]=this.mungSendMediaDesc(v,l),{mid:v.attributes.mid,needExchangeSDP:!0}}return{mid:v.attributes.mid,needExchangeSDP:!1}}{const E=this.findAvailableMediaIndex(r,h);let T;return E===-1||E===1&&(yi()||fN())||E===0&&ne("USE_SUB_RTX")||mN()?(T=this.createOrRecycleSendMedia(r,h,p,"sendonly",l),this.updateBundleMids()):(T=or(this.sessionDesc.mediaDescriptions[E]),T.attributes.direction="sendonly",T.attributes.ssrcs=h,T.attributes.ssrcGroups=p,this.sessionDesc.mediaDescriptions[E]=this.mungSendMediaDesc(T,l)),Mn()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,T.attributes.mid),{mid:T.attributes.mid,needExchangeSDP:!0}}}batchSend(r){const i=r.map(h=>{let{kind:p,ssrcMsg:v,mslabel:E}=h;return this.send(p,v,E)}),s=[];let l=!1;return i.forEach(h=>{let{mid:p,needExchangeSDP:v}=h;v&&(l=!0),s.push(p)}),{mids:s,needExchangeSDP:l}}stopSending(r){const i=this.sessionDesc.mediaDescriptions.filter(s=>s.attributes.mid&&r.indexOf(s.attributes.mid)!==-1);if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");i.forEach(s=>{s.attributes.mid==="0"||Mn()||mN()?s.attributes.ssrcs=[]:(s.attributes.ssrcs=[],s.attributes.direction="inactive",s.media.port="0")}),this.updateBundleMids()}mute(r){const i=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(r){const i=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}muteRemote(r){const i=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(s=>{s.attributes.direction="inactive"})}unmuteRemote(r){const i=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(s=>{s.attributes.direction="recvonly"})}receive(r,i,s,l){r.forEach((h,p)=>{this.createOrRecycleRecvMedia(h,[],"recvonly",i,s,l[p])}),this.updateBundleMids()}stopReceiving(r){const i=this.sessionDesc.mediaDescriptions.filter(s=>r.indexOf(s.attributes.mid)!==-1);if(i.length!==r.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");i.forEach(s=>{s.media.port="0",s.attributes.direction="inactive"}),this.updateBundleMids()}updateCandidates(r){r===jr.TCP?this._candidates.forEach(i=>{this._candidates.findIndex(s=>s.transport==="tcp"&&s.connectionAddress===i.connectionAddress&&s.port===i.port)===-1&&this._candidates.push(SL(SL({},i),{},{foundation:"tcpcandidate",priority:Number(i.priority)-1+"",transport:"tcp",port:Number(i.port)+90+""}))}):this._candidates=this._candidates.filter(i=>i.transport!=="tcp");for(const i of this.sessionDesc.mediaDescriptions)i.attributes.candidates=this.candidates}restartICE(r){r=or(r),this._iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=r.iceUfrag,i.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const i=[];for(let s=0;s<r;s++)i.push((this.currentMidIndex+s+1).toString(10));return i}findAvailableMediaIndex(r,i){return this.sessionDesc.mediaDescriptions.findIndex(s=>{const l=s.media.mediaType===r&&s.media.port!=="0"&&(s.attributes.direction==="sendonly"||s.attributes.direction==="sendrecv")&&s.attributes.ssrcs.length===0;if(Mn()){if(l){const h=this.firefoxSsrcMidMap.get(i[0].ssrcId);return!(h||s.attributes.mid!=="0"&&s.attributes.mid!=="1")||!(!h||h!==s.attributes.mid)}return!1}return l})}createOrRecycleRecvMedia(r,i,s,l,h,p){const v=r._mediaStreamTrack.kind,E=this.rtpCapabilities.recv,T=this.localCapabilities.send;let y=[];if(v===st.VIDEO){var R,k;if(ne("H264_PROFILE_LEVEL_ID")&&l==="h264"&&(y=E.videoCodecs.filter(ie=>{var se,ye;return(((se=ie.rtpMap)===null||se===void 0?void 0:se.encodingName.toLowerCase())||"").includes(l)&&(ie==null||(ye=ie.fmtp)===null||ye===void 0?void 0:ye.parameters["profile-level-id"])===ne("H264_PROFILE_LEVEL_ID")})),!y||((R=y)===null||R===void 0?void 0:R.length)===0){const ie=T.videoCodecs.filter(se=>{var ye;return(((ye=se.rtpMap)===null||ye===void 0?void 0:ye.encodingName.toLowerCase())||"").includes(l)});ie.length!==0&&(y=E.videoCodecs.filter(se=>ie.some(ye=>ye.payloadType===se.payloadType)))}if(ne("USE_PUB_RTX")){const ie=y.map(ye=>ye.payloadType.toString()),se=E.videoCodecs.filter(ye=>{var De,Te;return((De=ye.rtpMap)===null||De===void 0?void 0:De.encodingName)==="rtx"&&ie.includes(((Te=ye.fmtp)===null||Te===void 0?void 0:Te.parameters.apt)||"")});y=[...y,...se]}y.length===0&&(M.warning("codec ".concat(l," not included in rtpCapabilities, fallback to default payloads: ").concat((k=E.videoCodecs[0].rtpMap)===null||k===void 0?void 0:k.encodingName)),y=E.videoCodecs)}else y=E.audioCodecs.filter(ie=>{var se;return(((se=ie.rtpMap)===null||se===void 0?void 0:se.encodingName.toLowerCase())||"").includes(h)}),y.length===0&&(M.warning("codec ".concat(h," not included in rtpCapabilities, fallback to opus")),y=E.audioCodecs.filter(ie=>{var se;return(((se=ie.rtpMap)===null||se===void 0?void 0:se.encodingName.toLowerCase())||"").includes("opus")}));const V=v===st.VIDEO?E.videoExtensions:E.audioExtensions;this.currentMidIndex+=1;const $="".concat(this.currentMidIndex);let W={media:{mediaType:v,port:V0,protos:["UDP","TLS","RTP","SAVPF"],fmts:y.map(ie=>ie.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:V,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:y,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:s,rtcpMux:!0,rtcpRsize:!0,mid:"".concat($)}};W=this.mungRecvMediaDsec(W,r,p);const G=this.findFirstClosedMedia(v);if(G){const ie=this.sessionDesc.mediaDescriptions.indexOf(G);this.sessionDesc.mediaDescriptions[ie]=W}else this.sessionDesc.mediaDescriptions.push(W);return W}createOrRecycleSendMedia(r,i,s,l,h){const p=this.rtpCapabilities.send,v=r===st.VIDEO?p.videoCodecs:p.audioCodecs,E=r===st.VIDEO?p.videoExtensions:p.audioExtensions;this.currentMidIndex+=1;const T="".concat(this.currentMidIndex);let y={media:{mediaType:r,port:V0,protos:["UDP","TLS","RTP","SAVPF"],fmts:v.map(k=>k.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:E,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:s,rtcpFeedbackWildcards:[],payloads:v,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:l,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(T)}};y=this.mungSendMediaDesc(y,h);const R=this.findFirstClosedMedia(r);if(R){const k=this.sessionDesc.mediaDescriptions.indexOf(R);this.sessionDesc.mediaDescriptions[k]=y}else this.sessionDesc.mediaDescriptions.push(y);return y}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(r=>r.media.port!=="0").map(r=>r.attributes.mid)}mungRecvMediaDsec(r,i,s){const l=or(r);return FC(l),Ad(l,i),BC(l,i),nL(l),M0(l,s,this.localCapabilities.send),l}mungSendMediaDesc(r,i){const s=or(r);return M0(s,i,this.localCapabilities.recv),Xc(s),s}updateRecvMedia(r,i){const s=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(s!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[s],i);this.sessionDesc.mediaDescriptions[s]=l}}bumpMid(r){this.currentMidIndex+=r}findFirstClosedMedia(r){return this.sessionDesc.mediaDescriptions.find(i=>Mn()?i.media.port==="0"&&i.media.mediaType===r:i.media.port==="0")}findPreloadMediaDesc(r){return this.sessionDesc.mediaDescriptions.find(i=>{var s,l;return((s=i.attributes)===null||s===void 0||(l=s.ssrcs[0])===null||l===void 0?void 0:l.ssrcId)===r[0].ssrcId})}getSSRC(r){var i;return(i=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r))===null||i===void 0?void 0:i.attributes.ssrcs}}var en;function CL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function Nd(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?CL(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):CL(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}let ac=(_e((en=class Kp extends m0{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var r,i,s;return(r=(i=this.peerConnection.getReceivers()[0])===null||i===void 0||(s=i.transport)===null||s===void 0?void 0:s.state)!==null&&r!==void 0?r:null}constructor(r,i){super(r,i),w(this,"store",void 0),w(this,"peerConnection",void 0),w(this,"remoteSDP",void 0),w(this,"initialOffer",void 0),w(this,"transportEventReceiver",void 0),w(this,"statsFilter",void 0),w(this,"localCapabilities",void 0),w(this,"localCandidateCount",0),w(this,"allCandidatesReceived",!1),w(this,"selectedCandidatePairTimer",void 0),w(this,"establishPromise",void 0),w(this,"mutex",new Ri("P2PConnection-mutex")),this.store=i,this.peerConnection=new RTCPeerConnection(Kp.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.statsFilter=WC(this.peerConnection,ne("STATS_UPDATE_INTERVAL"),void 0,Mn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const r=await this.peerConnection.createOffer();if(!r.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const i=cu(r.sdp),s=await iL(!ne("USE_PUB_RTX")&&!ne("USE_SUB_RTX"),ne("FILTER_VIDEO_FEC"),ne("FILTER_AUDIO_FEC"));return this.localCapabilities=jC(s),this.initialOffer=r,Nd(Nd({},i),{},{rtpCapabilities:s,offerSDP:r.sdp})}catch(r){throw new X(j.GET_LOCAL_CONNECTION_PARAMS_FAILED,r.toString())}}async connect(r,i,s,l,h,p){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new yq({remoteIceParameters:r,remoteDtlsParameters:i,candidates:s,remoteRTPCapabilities:l,remoteSetup:h,localCapabilities:this.localCapabilities,cname:p});const v=this.remoteSDP.toString(),E=sr.exports.parse(this.initialOffer.sdp),T=E.mediaDescriptions.find(V=>V.media.mediaType==="audio");T&&Xc(T);const y=sr.exports.print(E),R=this.logSDPExchange(y||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:y}),R==null||R(v),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v});const k=this.peerConnection.getTransceivers()[0];if(k!=null&&k.receiver&&this.tryBindTransportEvents(k.receiver),ne("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia();const V=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:V});const $=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription($)}}catch(v){throw new X(j.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(v.toString()))}}send(r,i,s){var l=this;return Aa(function*(){const h=yield yt(l.mutex.lock("From P2PConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const p=[];r.forEach(W=>{const G=l.peerConnection.addTransceiver(W._mediaStreamTrack,{direction:"sendonly"});p.push(G),W._updateRtpTransceiver(G)}),Mn()&&ne("SIMULCAST")===!0&&(yield yt(l.applySimulcastForFirefox(p,r)));const v=yield yt(l.peerConnection.createOffer()),E=l.remoteSDP.predictReceivingMids(r.length),T=l.mungSendOfferSDP(v.sdp,r,E),y=sr.exports.parse(T),R=E.map(W=>{const G=y.mediaDescriptions.find(ie=>ie.attributes.mid===W);if(!G)throw new Error("Cannot extract ssrc from mediaDescription.");return eL(G,ne("USE_PUB_RTX"))});let k;try{k=yield R}catch(W){k=[],l.remoteSDP.receive(r,i,s,k);const G=l.remoteSDP.toString();throw yield yt(l.peerConnection.setLocalDescription({type:"offer",sdp:T})),yield yt(l.peerConnection.setRemoteDescription({type:"answer",sdp:G})),yield yt(l.stopSending(E,!0)),W}l.remoteSDP.receive(r,i,s,k);const V=l.remoteSDP.toString(),$=l.logSDPExchange(T,"offer","local","send");return yield yt(l.peerConnection.setLocalDescription({type:"offer",sdp:T})),yield yt(l.applySimulcastEncodings(p,r)),yield yt(l.applySendEncodings(p,r)),$==null||$(V),yield yt(l.peerConnection.setRemoteDescription({type:"answer",sdp:V})),p.map((W,G)=>{const ie=E[G];return{localSSRC:R[G],id:ie,transceiver:W}})}catch(p){throw p instanceof X?p:new X(j.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(p.toString()))}finally{h()}})()}async stopSending(r,i){const s=i?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(E=>r.indexOf(E.mid)!==-1);if(l.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");l.map(E=>{var T;E.direction="inactive",(T=E.stop)===null||T===void 0||T.call(E)});const h=await this.peerConnection.createOffer(),p=this.logSDPExchange(h.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(h),this.remoteSDP.stopReceiving(r);const v=this.remoteSDP.toString();p==null||p(v),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(l){throw new X(j.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(l.toString()))}finally{s&&s()}}async receive(r,i,s,l){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(r," before remoteSDP created."));const{mid:h,needExchangeSDP:p}=this.remoteSDP.send(r,i,s,l);if(p){const E=this.remoteSDP.toString(),T=this.logSDPExchange(E,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:E});const y=await this.peerConnection.createAnswer(),R=this.mungReceiveAnswerSDP(y.sdp,h,r);T==null||T(R||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:R}),M.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(r," by exchanging SDP."))}else M.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(r," no need to exchange SDP."));const v=this.peerConnection.getTransceivers().find(E=>E.mid===h);if(!v)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:v.receiver.track,id:h,transceiver:v}}catch(h){throw new X(j.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(h.toString()))}}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:i,needExchangeSDP:s}=this.remoteSDP.batchSend(r);if(s){const l=this.remoteSDP.toString(),h=this.logSDPExchange(l,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:l});const p=await this.peerConnection.createAnswer();h==null||h(p.sdp||""),await this.peerConnection.setLocalDescription(p),M.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))}else M.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive no need to exchange SDP."));return i.map(l=>{const h=this.peerConnection.getTransceivers().find(p=>p.mid===l);if(!h)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:h.receiver.track,id:l,transceiver:h}})}catch(i){throw new X(j.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(i.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const i=this.remoteSDP.toString(),s=this.logSDPExchange(i,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new X(j.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(i.toString()))}}async muteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.mute(r);const i=this.remoteSDP.toString(),s=this.logSDPExchange(i,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new X(j.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(i.toString()))}}async unmuteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.unmute(r);const i=this.remoteSDP.toString(),s=this.logSDPExchange(i,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new X(j.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(i.toString()))}}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(i.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(p=>{p.direction="inactive"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.muteRemote(r);const h=this.remoteSDP.toString();l==null||l(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(i){throw new X(j.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(i.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(async(p,v)=>{p.direction="sendonly"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.unmuteRemote(r);const h=this.remoteSDP.toString();l==null||l(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(i){throw new X(j.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(i.toString()))}}restartICE(r){var i=this;return Aa(function*(){const s=yield yt(i.mutex.lock("From P2PConnection.restartICE"));try{if(!i.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Xn().supportPCSetConfiguration){const T=i.peerConnection.getConfiguration(),y=r===jr.RELAY?"relay":"all";T.iceTransportPolicy!==y&&(M.debug("[".concat(i.store.clientId,"] restartICE change iceTransportPolicy from [").concat(T.iceTransportPolicy,"] to [").concat(y,"]")),T.iceTransportPolicy=y,i.peerConnection.setConfiguration(T))}else if(r===jr.RELAY)return;r!==jr.RELAY&&i.remoteSDP.updateCandidates(r);const l=yield yt(i.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const h=cu(l.sdp),{remoteIceParameters:p}=yield h.iceParameters;i.remoteSDP.restartICE(p);const v=i.remoteSDP.toString(),E=i.logSDPExchange(l.sdp||"","offer","local","restartICE");i.store.descriptionStart(),yield yt(i.peerConnection.setLocalDescription(l)),E==null||E(v),yield yt(i.peerConnection.setRemoteDescription({type:"answer",sdp:v}))}catch(l){M.warning("[".concat(i.store.clientId,"] restart ICE failed, abort operation"),l)}finally{s()}})()}close(){var r;this.peerConnection.close(),(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const s=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(s.sdp,[i],[r]);this.remoteSDP.updateRecvMedia(r,i);const h=this.remoteSDP.toString(),p=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),p==null||p(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(s){throw new X(j.EXCHANGE_SDP_FAILED,s.toString())}}async updateSendParameters(r,i){const s=this.peerConnection.getTransceivers().filter(l=>l.mid===r);s.length===1&&(this.isVP8Simulcast(i)?Mn()||await this.applySimulcastEncodings(s,[i]):await this.applySendEncodings(s,[i]))}setStatsRemoteVideoIsReady(r,i){this.statsFilter.setVideoIsReady2(r,i)}async replaceTrack(r,i){const s=this.peerConnection.getTransceivers().find(l=>l.mid===i);s&&await s.sender.replaceTrack(r._mediaStreamTrack)}async getSelectedCandidatePair(){const r=this.peerConnection.getReceivers();if(r.length>0&&r[0].transport&&r[0].transport.iceTransport&&r[0].transport.iceTransport.getSelectedCandidatePair&&r[0].transport.iceTransport.getSelectedCandidatePair()){const i=r[0].transport.iceTransport,{local:s,remote:l}=i.getSelectedCandidatePair();return{local:Nd(Nd({},Jc),{},{candidateType:s.type,protocol:s.protocol,address:s.address,port:s.port}),remote:Nd(Nd({},Jc),{},{candidateType:l.type,protocol:l.protocol,address:l.address,port:l.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,M.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,M.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},ne("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const i={iceServers:[]};return r.iceServers?i.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(lp(r.turnServer.servers)?i.iceServers=r.turnServer.servers:(i.iceServers&&i.iceServers.push(...Kp.turnServerConfigToIceServers(r.turnServer.servers)),ne("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&r.turnServer.serversFromGateway&&i.iceServers.push(...Kp.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),ne("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(i.iceTransportPolicy="relay")}))),ne("ENABLE_ENCODED_TRANSFORM")&&Xn().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),i}static turnServerConfigToIceServers(r){const i=[];return r.forEach(s=>{s.security?s.tcpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(C0(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&!ne("FORCE_TURN_TCP")&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),i}tryBindTransportEvents(r){const i=r.transport;if(i){this.transportEventReceiver=r,i.onstatechange=()=>{var l;i!=null&&i.state&&((l=this.onDTLSTransportStateChange)===null||l===void 0||l.call(this,i.state))},i.onerror=l=>{var h;(h=this.onDTLSTransportError)===null||h===void 0||h.call(this,"error"in l?l.error:l)};const s=i.iceTransport;s&&(s.onstatechange=()=>{const l=i==null?void 0:i.iceTransport.state;var h;l&&((h=this.onICETransportStateChange)===null||h===void 0||h.call(this,l))},s.getSelectedCandidatePair&&(s.onselectedcandidatepairchange=()=>{if(s.getSelectedCandidatePair()){const{local:l,remote:h}=s.getSelectedCandidatePair();M.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:l.type,protocol:l.protocol}),", remote ").concat(JSON.stringify({candidateType:h.type,protocol:h.protocol,address:h.address,port:h.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async applySendEncodings(r,i){try{if(!Xn().supportSetRtpSenderParameters||r.length!==i.length)return;for(let T=0;T<r.length;T++){const y=r[T],R=i[T];if(R&&R instanceof ar){var s,l;if(this.isVP8Simulcast(R))continue;const k={},V={};switch(R._optimizationMode){case"motion":k.degradationPreference="maintain-framerate";break;case"detail":k.degradationPreference="maintain-resolution";break;default:k.degradationPreference="balanced"}var h,p,v,E;if((s=R._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&(V.maxBitrate=1e3*((h=R._encoderConfig)===null||h===void 0?void 0:h.bitrateMax)),R._hints.includes(gr.LOW_STREAM)&&((p=R._encoderConfig)!==null&&p!==void 0&&p.frameRate&&(V.maxFramerate=rc(R._encoderConfig.frameRate)),(v=R._encoderConfig)!==null&&v!==void 0&&v.scaleResolutionDownBy&&((E=R._encoderConfig)===null||E===void 0?void 0:E.scaleResolutionDownBy)>1&&(V.scaleResolutionDownBy=R._encoderConfig.scaleResolutionDownBy)),ne("DSCP_TYPE")&&Yl()){const G=ne("DSCP_TYPE");["very-low","low","medium","high"].includes(G)&&(V.networkPriority=G)}const $=y.sender.getParameters(),W=(l=$.encodings)===null||l===void 0?void 0:l[0];Mn()&&!W&&(k.encodings=[V]),W&&Object.assign(W,V),Object.assign($,k),await y.sender.setParameters($)}}}catch{M.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(r,i,s){const l=sr.exports.parse(r);return i.forEach((h,p)=>{const v=s[p],E=l.mediaDescriptions.find(T=>T.attributes.mid===v);E&&(Ad(E,h),rL(E,h,this.store.codec))}),sr.exports.print(l)}mungReceiveAnswerSDP(r,i,s){const l=sr.exports.parse(r),h=l.mediaDescriptions.find(p=>p.attributes.mid===i);return h&&s===st.AUDIO&&h.media.mediaType==="audio"&&Xc(h),sr.exports.print(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,i,s)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,i,s)},this.statsFilter.onSelectedLocalCandidateChanged=(r,i)=>{var s;(s=this.onSelectedLocalCandidateChanged)===null||s===void 0||s.call(this,r,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,i)=>{var s;(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0||s.call(this,r,i)},this.statsFilter.onFirstVideoDecodedTimeout=r=>{var i;(i=this.onFirstVideoDecodedTimeout)===null||i===void 0||i.call(this,r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(r,i){if(r.length===i.length)for(let v=0;v<r.length;v++){var s,l,h,p;const E=r[v],T=i[v];if(T instanceof ar&&!T._hints.includes(gr.LOW_STREAM)&&(s=T._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&((l=T._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(h=T._scalabiltyMode)!==null&&h!==void 0&&h.numSpatialLayers&&((p=T._scalabiltyMode)===null||p===void 0?void 0:p.numSpatialLayers)>1&&this.store.codec==="vp8"){const y={},R={high:1e3*(T._encoderConfig.bitrateMax-50),medium:5e4};y.encodings=[{rid:"m",active:!0,maxBitrate:R.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:R.high}];const k=E.sender.getParameters();await E.sender.setParameters(Object.assign(k,y))}}}async applySimulcastEncodings(r,i){if(!Mn()&&r.length===i.length)for(let s=0;s<r.length;s++){const l=i[s];if(l instanceof ar&&this.isVP8Simulcast(l)){const h=r[s],p={},v={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};p.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:v.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:v.medium,scaleResolutionDownBy:4}];const E=h.sender.getParameters();await h.sender.setParameters(Object.assign(E,p))}}}isVP8Simulcast(r){var i,s,l,h;return!!(r instanceof ar&&ne("SIMULCAST")&&this.store.codec==="vp8"&&!r._hints.includes(gr.LOW_STREAM)&&(i=r._encoderConfig)!==null&&i!==void 0&&i.bitrateMax&&((s=r._encoderConfig)===null||s===void 0?void 0:s.bitrateMax)>200&&(l=r._scalabiltyMode)!==null&&l!==void 0&&l.numSpatialLayers&&((h=r._scalabiltyMode)===null||h===void 0?void 0:h.numSpatialLayers)>1)}logSDPExchange(r,i,s,l){if(ne("SDP_LOGGING"))return M.upload("[".concat(this.store.clientId,"] exchanging ").concat(s," ").concat(i," SDP during P2PConnection.").concat(l,`
`),r),i==="offer"?h=>{this.logSDPExchange(h,"answer",s==="local"?"remote":"local",l)}:void 0}async getRemoteSSRC(r){if(!this.remoteSDP)return;const i=this.remoteSDP.getSSRC(r);return i==null?void 0:i[0].ssrcId}setConfiguration(r){if(Xn().supportPCSetConfiguration){const i=Kp.resolvePCConfiguration(r);this.peerConnection.setConfiguration(i)}}}).prototype,"connect",[ta],Object.getOwnPropertyDescriptor(en.prototype,"connect"),en.prototype),_e(en.prototype,"receive",[ta],Object.getOwnPropertyDescriptor(en.prototype,"receive"),en.prototype),_e(en.prototype,"batchReceive",[ta],Object.getOwnPropertyDescriptor(en.prototype,"batchReceive"),en.prototype),_e(en.prototype,"stopReceiving",[ta],Object.getOwnPropertyDescriptor(en.prototype,"stopReceiving"),en.prototype),_e(en.prototype,"muteRemote",[ta],Object.getOwnPropertyDescriptor(en.prototype,"muteRemote"),en.prototype),_e(en.prototype,"unmuteRemote",[ta],Object.getOwnPropertyDescriptor(en.prototype,"unmuteRemote"),en.prototype),_e(en.prototype,"muteLocal",[ta],Object.getOwnPropertyDescriptor(en.prototype,"muteLocal"),en.prototype),_e(en.prototype,"unmuteLocal",[ta],Object.getOwnPropertyDescriptor(en.prototype,"unmuteLocal"),en.prototype),_e(en.prototype,"close",[ta],Object.getOwnPropertyDescriptor(en.prototype,"close"),en.prototype),_e(en.prototype,"updateEncoderConfig",[ta],Object.getOwnPropertyDescriptor(en.prototype,"updateEncoderConfig"),en.prototype),_e(en.prototype,"updateSendParameters",[ta],Object.getOwnPropertyDescriptor(en.prototype,"updateSendParameters"),en.prototype),_e(en.prototype,"replaceTrack",[ta],Object.getOwnPropertyDescriptor(en.prototype,"replaceTrack"),en.prototype),_e(en.prototype,"getRemoteSSRC",[ta],Object.getOwnPropertyDescriptor(en.prototype,"getRemoteSSRC"),en.prototype),en);function ta(n,r,i){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,h=await l.lock("From P2PConnection.".concat(r));try{for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];return await s.apply(this,v)}finally{h()}},i}function TL(n,r){let i=document.createElement("video"),s=document.createElement("canvas");i.setAttribute("style","display:none"),s.setAttribute("style","display:none"),i.setAttribute("muted",""),i.muted=!0,i.setAttribute("autoplay",""),i.autoplay=!0,i.setAttribute("playsinline",""),s.width=rc(r.width),s.height=rc(r.height);const l=rc(r.framerate||15);document.body.append(i),document.body.append(s);let h=n._mediaStreamTrack;i.srcObject=new MediaStream([h]),i.play();const p=s.getContext("2d");if(!p)throw new X(j.UNEXPECTED_ERROR,"can not get canvas context");const v=Xn(),E=s.captureStream(v.supportRequestFrame?0:l).getVideoTracks()[0],T=GP(()=>(()=>{if(i.paused&&i.play(),i.videoHeight>2&&i.videoWidth>2){const R=i.videoWidth,k=i.videoHeight/R,V=s.width*k;Math.abs(V-s.height)>=2&&(M.debug("adjust low stream resolution","".concat(s.width,"x").concat(s.height," -> ").concat(s.width,"x").concat(V)),s.height=V)}p.drawImage(i,0,0,s.width,s.height),E.requestFrame&&E.requestFrame(),h!==n._mediaStreamTrack&&(h=n._mediaStreamTrack,i.srcObject=new MediaStream([h]))})(),l),y=E.stop;return E.stop=()=>{y.call(E),T(),i&&(i.remove(),i=null),s&&(s.width=0,s.remove(),s=null),M.debug("clean low stream renderer")},E}var bL,RL,IL,wL,na,OL,AL,NL,PL,xL,DL,fi;function kL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function F0(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?kL(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):kL(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class LL extends jP{getUserId(){return this._userId}constructor(r,i,s,l){super(r,"track-".concat(r.kind,"-").concat(i,"-").concat(l.clientId,"_").concat(_n(5,""))),w(this,"_userId",void 0),w(this,"_uintId",void 0),w(this,"_isDestroyed",!1),w(this,"store",void 0),w(this,"processor",void 0),w(this,"processorContext",void 0),this._userId=i,this._uintId=s,this.store=l}_updateOriginMediaStreamTrack(r){this._originMediaStreamTrack=r,this._mediaStreamTrack=r,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,M.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let B0=(bL=Ge({argsMap:(n,r,i)=>[n.getTrackId(),typeof r=="string"?r:r instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",i]}),RL=Ge({argsMap:n=>[n.getTrackId()]}),IL=Ge({argsMap:(n,r)=>[n.getTrackId(),r.name]}),wL=Ge({argsMap:n=>[n.getTrackId()]}),_e((na=class extends LL{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==qr.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(n,r,i,s){super(n,r,i,s),w(this,"_videoVisibleTimer",null),w(this,"_previousVideoVisibleStatus",void 0),w(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),w(this,"trackMediaType","video"),w(this,"_videoWidth",void 0),w(this,"_videoHeight",void 0),w(this,"_player",void 0),w(this,"processorDestination",void 0),w(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new rx(this.getTrackId(),"remote"),this.processorDestination=new nx(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return pp(()=>{M.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),Oa(this,Ze.GET_STATS)||F0({},_P)}play(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof n=="string"){const s=document.getElementById(n);s?n=s:(M.warning("[".concat(this.getTrackId(),'] can not find "#').concat(n,'" element, use document.body')),n=document.body)}M.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(n instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(r));const i=F0(F0({fit:"cover"},r),{},{trackId:this.getTrackId(),element:n});this._player?this._player.updateConfig(i):(n instanceof HTMLVideoElement?this._player=new _C(i):this._player=new UD(i),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(vd.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{const s=this.getVideoElementVisibleStatus();this.safeEmit(vd.VIDEO_ELEMENT_VISIBLE_STATUS,s)}catch{}},ne("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,M.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){Zx(this._originMediaStreamTrack).then(n=>{let[r,i]=n;this._videoHeight=i,this._videoWidth=r}).catch(b0)}_updatePlayerSource(){M.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var n,r;const i=this==null||(n=this._player)===null||n===void 0?void 0:n.getContainerElement(),s={track:this,element:this==null||(r=this._player)===null||r===void 0?void 0:r.getVideoElement(),slot:i==null?void 0:i.parentElement},{element:l,slot:h}=s;if(this.isPlaying&&l instanceof HTMLVideoElement&&h instanceof HTMLElement){const p=vk.checkOneElementVisible(l),v=Object.assign({},p);if(v.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=v.visible;const E=Me.reportApiInvoke(null,{tag:On.TRACER,name:nr.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});v.visible?E.onSuccess("Video is visible"):E.onSuccess("Invisible because of ".concat(v.reason))}return v}return}catch(i){throw new X(j.GET_VIDEO_ELEMENT_VISIBLE_ERROR,i.message)}}pipe(n){if(this.processor===n)return n;if(n._source)throw new X(j.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),n}unpipe(){if(!this.processor)return;const n=this.processor;this.processor._source=void 0,this.processor=void 0,n.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Qr.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Qr.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}}).prototype,"play",[bL],Object.getOwnPropertyDescriptor(na.prototype,"play"),na.prototype),_e(na.prototype,"stop",[RL],Object.getOwnPropertyDescriptor(na.prototype,"stop"),na.prototype),_e(na.prototype,"pipe",[IL],Object.getOwnPropertyDescriptor(na.prototype,"pipe"),na.prototype),_e(na.prototype,"unpipe",[wL],Object.getOwnPropertyDescriptor(na.prototype,"unpipe"),na.prototype),na),j0=(OL=Ge({argsMap:(n,r)=>[n.getTrackId(),r],throttleTime:300}),AL=Ge({argsMap:(n,r)=>[n.getTrackId(),r]}),NL=Ge({argsMap:n=>[n.getTrackId()]}),PL=Ge({argsMap:n=>[n.getTrackId()]}),xL=Ge({argsMap:(n,r)=>[n.getTrackId(),r.name]}),DL=Ge({argsMap:n=>[n.getTrackId()]}),_e((fi=class extends LL{get isPlaying(){return this._useAudioElement?fo.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(n,r,i,s){super(n,r,i,s),w(this,"trackMediaType","audio"),w(this,"_source",void 0),w(this,"_useAudioElement",!0),w(this,"_volume",100),w(this,"processorContext",void 0),w(this,"processorDestination",void 0),w(this,"_played",!1),w(this,"_bypassWebAudio",!1),ne("DISABLE_WEBAUDIO")?(this._source=new oC,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new nC(n,!0),ne("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(Yi.RECEIVE_TRACK_BUFFER,()=>{this.safeEmit(vd.FIRST_FRAME_DECODED)}),this.processorContext=new ox(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new ix(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(Yi.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!n)return this._source.removeAllListeners(Yi.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(r),this._source.removeAllListeners(Yi.ON_AUDIO_BUFFER),this._source.on(Yi.ON_AUDIO_BUFFER,i=>n(i))}setVolume(n){this._volume=n,this._useAudioElement?fo.setVolume(this.getTrackId(),n):this._source.setVolume(n/100)}async setPlaybackDevice(n){if(!this._useAudioElement)throw new X(j.NOT_SUPPORTED,"your browser does not support setting the audio output device");await fo.setSinkID(this.getTrackId(),n)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return pp(()=>{M.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),Oa(this,Ze.GET_STATS)||F0({},EP)}play(){M.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(M.debug("[".concat(this.getTrackId(),"] use audio element to play")),fo.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){M.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?fo.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];M.debug("[".concat(this.getTrackId(),"] update player source track")),n&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&fo.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(n){if(this._bypassWebAudio)throw new X(j.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===n)return n;if(n._source)throw new X(j.INVALID_OPERATION,"Processor ".concat(n.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=n,this.processor._source=this,n.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),n}unpipe(){var n;if(this._bypassWebAudio)throw new X(j.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const r=this.processor;(n=this._source.processSourceNode)===null||n===void 0||n.disconnect(),this.processor._source=!1,this.processor=void 0,r.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Qr.ON_TRACK,async n=>{n?n!==this._mediaStreamTrack&&(this._mediaStreamTrack=n,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(n)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(Qr.ON_NODE,n=>{this._source.processedNode=n;const r=!n;this._useAudioElement!==r&&(this._played?(this.stop(),this._useAudioElement=r,this.play()):this._useAudioElement=r)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Qr.ON_TRACK),this.processorDestination.removeAllListeners(Qr.ON_NODE)}}).prototype,"setVolume",[OL],Object.getOwnPropertyDescriptor(fi.prototype,"setVolume"),fi.prototype),_e(fi.prototype,"setPlaybackDevice",[AL],Object.getOwnPropertyDescriptor(fi.prototype,"setPlaybackDevice"),fi.prototype),_e(fi.prototype,"play",[NL],Object.getOwnPropertyDescriptor(fi.prototype,"play"),fi.prototype),_e(fi.prototype,"stop",[PL],Object.getOwnPropertyDescriptor(fi.prototype,"stop"),fi.prototype),_e(fi.prototype,"pipe",[xL],Object.getOwnPropertyDescriptor(fi.prototype,"pipe"),fi.prototype),_e(fi.prototype,"unpipe",[DL],Object.getOwnPropertyDescriptor(fi.prototype,"unpipe"),fi.prototype),fi);function ML(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function UL(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?ML(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ML(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class Cq extends xn{constructor(){super(),w(this,"uplinkStatsUploadInterval",void 0),w(this,"uplinkRelatedStatsUploadInterval",void 0),w(this,"uplinkDenoiserStatsUploadInterval",void 0),w(this,"transportStatsUploadInterval",void 0),w(this,"uplinkExtensionStatsUploadInterval",void 0),w(this,"downlinkExtensionStatsUploadInterval",void 0),w(this,"extensionUsageStatsUploadInterval",void 0),w(this,"downlinkStatsUploadInterval",void 0),w(this,"downlinkRelatedStatsUploadInterval",void 0),w(this,"lastStats",void 0),w(this,"uploadUnplinkStarted",!1),w(this,"uploadDownlinkStarted",!1),w(this,"uploadTransportStarted",!1),w(this,"uploadExtensionUsageStarted",!1),w(this,"requestStats",void 0),w(this,"requestLocalMedia",void 0),w(this,"requestRemoteMedia",void 0),w(this,"requestAllTracks",void 0),w(this,"requestVideoIsReady",void 0),w(this,"requestUpload",void 0)}startUploadTransportStats(){this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval(()=>{var r;const i=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);i&&this.uploadTransportStats(i)},1e3))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval);const r=new Map;this.extensionUsageStatsUploadInterval=window.setInterval(async()=>{var i,s,l;const h=Date.now(),p={connectionInterval:ne("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:h};let v=[];const E=((i=this.requestAllTracks)===null||i===void 0?void 0:i.call(this))||[];for(const k of E)!k.muted&&k.enabled&&(v=v.concat(await k.getProcessorUsage()));const T=((s=this.requestRemoteMedia)===null||s===void 0?void 0:s.call(this))||[];for(const[k,V]of T)V.has(st.VIDEO)&&k.videoTrack&&(v=v.concat(await k.videoTrack.getProcessorUsage())),V.has(st.AUDIO)&&k.audioTrack&&(v=v.concat(await k.audioTrack.getProcessorUsage()));if(v.length===0)return;p.details=function(k,V){const $={};for(const{id:se,value:ye,level:De,direction:Te}of k){var W;const be=(W=V.get(se))!==null&&W!==void 0?W:0,Se=ye===2?be+ne("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:be;var G,ie;V.set(se,Se),$[se]?(ye===2&&($[se].value=ye),De>$[se].level&&($[se].level=De),Te==="remote"&&($[se].remoteUidCount+=1),$[se].totalTs=(G=V.get(se))!==null&&G!==void 0?G:0):$[se]={value:ye,level:De,remoteUidCount:Te==="local"?0:1,totalTs:(ie=V.get(se))!==null&&ie!==void 0?ie:0}}return Object.keys($).map(se=>{const{level:ye,value:De,totalTs:Te}=$[se];return{id:se,level:ye,value:De,totalTs:Te}})}(v,r);const y=Date.now(),R=y>h?y:h+1;(l=this.requestUpload)===null||l===void 0||l.call(this,ho.EXTENSION_USAGE_STATS,{usageStats:p,sendTs:R})},ne("EXTENSION_USAGE_UPLOAD_INTERVAL"))}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var r;const i=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);i&&(this.uploadUplinkStats(i),this.lastStats=i)},3e3),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var r;const i=(r=this.requestStats)===null||r===void 0?void 0:r.call(this);i&&this.uploadRelatedUplinkStats(i,this.lastStats),this.lastStats=i},1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval(()=>{var r;const i=(r=this.requestAllTracks)===null||r===void 0?void 0:r.call(this);i&&this.uploadDenoiserStats(i)},2e3),this.uplinkExtensionStatsUploadInterval&&window.clearInterval(this.uplinkExtensionStatsUploadInterval),this.uplinkExtensionStatsUploadInterval=window.setInterval(()=>{var r;const i=(r=this.requestAllTracks)===null||r===void 0?void 0:r.call(this);i&&this.uploadExtensionStats(i)},2e3))}uploadTransportStats(r){ts(()=>{var i;(i=this.requestUpload)===null||i===void 0||i.call(this,ho.TRANSPORT_STATS,function(s){const l={connectionType:100,googRtt:s.rtt};if(s.selectedCandidatePair.localCandidate.candidateType==="relay"){const h=s.selectedCandidatePair.localCandidate.relayProtocol;h==="udp"&&(l.connectionType=101),h==="tcp"&&(l.connectionType=103),h==="tls"&&(l.connectionType=104)}return l}(r))})}uploadUplinkStats(r){var i;(((i=this.requestLocalMedia)===null||i===void 0?void 0:i.call(this))||[]).forEach(s=>{let[l,{track:h,ssrcs:p}]=s;switch(l){case ke.LocalVideoLowTrack:case ke.LocalVideoTrack:{const v=function(y,R,k){var V;const $=R.videoSend.find(G=>G.ssrc===y);if(!$)return null;const W={id:_n(10,""),timestamp:new Date(R.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:$.ssrc.toString()};switch(W.A_vstd=k._originMediaStreamTrack&&!k._originMediaStreamTrack.enabled||k._mediaStreamTrack&&!k._mediaStreamTrack.enabled?"1":"0",$.sentFrame&&(W.A_fhs=$.sentFrame.height.toString(),W.A_frs=$.sentFrame.frameRate.toString(),W.A_fws=$.sentFrame.width.toString()),$.adaptionChangeReason){case"none":W.A_ac="0";break;case"cpu":W.A_ac="1";break;case"bandwidth":W.A_ac="2";break;case"other":W.A_ac="3"}return W.A_lvps=Uy[k._player?k._player.videoElementStatus:"uninit"].toString(),W.A_nr=(V=$.nacksCount)===null||V===void 0?void 0:V.toString(),$.avgEncodeMs&&(W.A_aem=$.avgEncodeMs.toFixed(0).toString()),W}(p[0].ssrcId,r,h),E=l===ke.LocalVideoTrack?function(y,R,k){var V,$,W,G,ie,se,ye,De;const Te=R.videoSend.find(We=>We.ssrc===y);if(!Te)return null;const be={id:_n(10,""),timestamp:new Date(R.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:Te.ssrc.toString()},Se=(V=($=(W=Te.inputFrame)===null||W===void 0?void 0:W.height)!==null&&$!==void 0?$:k==null?void 0:k._videoHeight)!==null&&V!==void 0?V:0,Ie=(G=(ie=(se=Te.inputFrame)===null||se===void 0?void 0:se.width)!==null&&ie!==void 0?ie:k==null?void 0:k._videoWidth)!==null&&G!==void 0?G:0,Bt=(ye=(De=Te.inputFrame)===null||De===void 0?void 0:De.frameRate)!==null&&ye!==void 0?ye:0;return Se&&(be.A_fhi=Se+""),Ie&&(be.A_fwi=Ie+""),Bt&&(be.A_fri=Bt+""),be}(p[0].ssrcId,r,h):null;v&&ts(()=>{var y;return(y=this.requestUpload)===null||y===void 0?void 0:y.call(this,ho.PUBLISH_STATS,{stream_type:l===ke.LocalVideoLowTrack?"low":"high",stats:UL(UL({},v),E)})});const T=function(y){const R={id:"bweforvideo",timestamp:new Date(y.timestamp).toISOString(),type:"VideoBwe"};return y.bitrate.retransmit&&(R.A_rb=y.bitrate.retransmit.toString()),y.bitrate.targetEncoded&&(R.A_teb=y.bitrate.targetEncoded.toString()),R.A_aeb=y.bitrate.actualEncoded.toString(),R.A_tb=y.bitrate.transmit.toString(),y.sendBandwidth!==void 0&&(R.A_asb=y.sendBandwidth.toString()),R}(r);T&&setTimeout(()=>{var y;return(y=this.requestUpload)===null||y===void 0?void 0:y.call(this,ho.PUBLISH_STATS,{stream_type:l===ke.LocalVideoLowTrack?"low":"high",stats:T})},1e3);break}case ke.LocalAudioTrack:{const v=function(E,T,y){const R=T.audioSend.find(V=>V.ssrc===E);if(!R)return null;const k={id:_n(10,""),timestamp:new Date(T.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:R.ssrc.toString()};return k.A_astd=y._originMediaStreamTrack&&!y._originMediaStreamTrack.enabled||y._mediaStreamTrack&&!y._mediaStreamTrack.enabled?"1":"0",R.inputLevel?k.A_ail=Math.round(100*R.inputLevel).toString():k.A_ail=Math.round(100*y._source.getAccurateVolumeLevel()).toString(),k.A_apil=Math.round(100*y._source.getAccurateVolumeLevel()).toString(),R.aecReturnLoss&&(k.A_ecrl=Math.round(R.aecReturnLoss).toString()),R.aecReturnLossEnhancement&&(k.A_ecrle=Math.round(R.aecReturnLossEnhancement).toString()),k}(p[0].ssrcId,r,h);v&&ts(()=>{var E;return(E=this.requestUpload)===null||E===void 0?void 0:E.call(this,ho.PUBLISH_STATS,{stream_type:"high",stats:v})});break}}})}uploadRelatedUplinkStats(r,i){var s;(((s=this.requestLocalMedia)===null||s===void 0?void 0:s.call(this))||[]).filter(l=>{let[h]=l;return h===ke.LocalVideoLowTrack||h===ke.LocalVideoTrack}).forEach(l=>{let[h,{ssrcs:p}]=l;const v=function(E,T){const y=T.videoSend.find(R=>R.ssrc===E);return y?{mediaType:"video",isVideoMute:!1,frameRateInput:y.inputFrame&&y.inputFrame.frameRate.toString(),frameRateSent:y.sentFrame&&y.sentFrame.frameRate.toString(),googRtt:y.rttMs.toString(),qpSumPerFrame:Math.floor(y.qpSumPerFrame).toString()}:null}(p[0].ssrcId,r);v&&ts(()=>{var E;(E=this.requestUpload)===null||E===void 0||E.call(this,ho.PUBLISH_RELATED_STATS,{stream_type:h===ke.LocalVideoLowTrack?"low":"high",stats:v})})})}uploadDenoiserStats(r){for(let h=0;h<r.length;h++){const p=r[h];if(p instanceof S0){var i,s,l;const v=(i=(s=p._external).getDenoiserStats)===null||i===void 0?void 0:i.call(s);return void(v&&((l=this.requestUpload)===null||l===void 0||l.call(this,ho.DENOISER_STATS,v)))}}}uploadExtensionStats(r){for(let i=0;i<r.length;i++)r[i].getProcessorStats().forEach(s=>{var l;(l=this.requestUpload)===null||l===void 0||l.call(this,s.type,s.stats)})}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}startUploadDownlinkStats(){if(this.uploadDownlinkStarted)return;let r;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);let i=!1;this.downlinkStatsUploadInterval=window.setInterval(()=>{var s;const l=(s=this.requestStats)===null||s===void 0?void 0:s.call(this);l&&(this.uploadDownlinkStats(l,i,r),r=l),i=!i},3e3),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var s;const l=(s=this.requestStats)===null||s===void 0?void 0:s.call(this);l&&(this.uploadRelatedDownlinkStats(l,this.lastStats),this.lastStats=l)},1e3),this.downlinkExtensionStatsUploadInterval&&window.clearInterval(this.downlinkExtensionStatsUploadInterval),this.downlinkExtensionStatsUploadInterval=window.setInterval(()=>{var s;const l=(s=this.requestRemoteMedia)===null||s===void 0?void 0:s.call(this);l&&this.uploadDownlinkExtensionStats(l)},2e3)}uploadDownlinkStats(r,i,s){var l;(((l=this.requestRemoteMedia)===null||l===void 0?void 0:l.call(this))||[]).forEach(h=>{let[p,v]=h;if(v.has(st.VIDEO)&&p.videoTrack){const E=p.videoTrack?function(T,y,R,k,V){const $=y.videoRecv.find(se=>se.ssrc===T);if(!$)return null;const W={id:_n(10,""),timestamp:new Date(y.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:$.ssrc.toString()};var G,ie;if(W.bytesReceived=$.bytes.toString(),W.packetsLost=$.packetsLost.toString(),W.packetsReceived=$.packets.toString(),$.framesRateFirefox&&(W.A_frr=$.framesRateFirefox.toString()),$.receivedFrame?(W.A_frr=$.receivedFrame.frameRate.toString(),W.A_fhr=$.receivedFrame.height.toString(),W.A_fwr=$.receivedFrame.width.toString()):(W.A_fhr=(G=k._videoHeight)===null||G===void 0?void 0:G.toString(),W.A_fwr=(ie=k._videoWidth)===null||ie===void 0?void 0:ie.toString()),W.A_frd=$.decodeFrameRate.toString(),$.outputFrame&&(W.A_fro=$.outputFrame.frameRate.toString()),$.jitterBufferMs!==void 0&&(W.A_jbm=Math.floor($.jitterBufferMs).toString()),$.currentDelayMs!==void 0&&(W.A_cdm=Math.floor($.currentDelayMs).toString()),W.A_fs=$.firsCount.toString(),W.A_ns=$.nacksCount.toString(),W.A_ps=$.plisCount.toString(),k&&(W.A_vrtd=k._originMediaStreamTrack.enabled&&k._mediaStreamTrack.enabled?"0":"1"),k._player&&k._player.freezeTimeCounterList.length>0&&(W.A_vrft=Math.round(k._player.freezeTimeCounterList.splice(0,1)[0]).toString()),V&&k._player&&nc.visibility==="visible"){const se=Math.min(6e3,k._player.renderFreezeAccTime);W.A_vrrft=Math.round(se).toString(),k._player.renderFreezeAccTime=Math.max(0,k._player.renderFreezeAccTime-se)}if(W.A_rvps=Uy[k._player?k._player.videoElementStatus:"uninit"].toString(),R){const se=R.videoRecv.find(ye=>ye.ssrc===T);if(se&&$.totalInterFrameDelay!==void 0&&$.totalSquaredInterFrameDelay!==void 0&&se.totalInterFrameDelay!==void 0&&se.totalSquaredInterFrameDelay!==void 0){const ye=$.totalInterFrameDelay-se.totalInterFrameDelay,De=$.totalSquaredInterFrameDelay-se.totalSquaredInterFrameDelay,Te=$.framesDecodeCount-se.framesDecodeCount,be=ye/Te*1e3,Se=Math.round(1e3*Math.sqrt((De-Math.pow(ye,2)/Te)/Te));!isNaN(Se)&&be+Se>Math.max(3*be,be+150)&&(W.A_ifdsd=Se.toString())}}return W}(p._videoSSRC,r,s,p.videoTrack,i):void 0;E&&ts(()=>{var T;return(T=this.requestUpload)===null||T===void 0?void 0:T.call(this,ho.SUBSCRIBE_STATS,{stream_id:p.uid,stats:E})})}if(v.has(st.AUDIO)&&p.audioTrack){const E=p.audioTrack?function(T,y,R,k){const V=y.audioRecv.find(W=>W.ssrc===T);if(!V)return null;const $={id:_n(10,""),timestamp:new Date(y.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:V.ssrc.toString()};if($.bytesReceived=V.bytes.toString(),$.packetsLost=V.packetsLost.toString(),$.packetsReceived=V.packets.toString(),V.outputLevel?$.A_aol=Math.round(100*V.outputLevel).toString():$.A_aol=Math.round(100*k._source.getAccurateVolumeLevel()).toString(),$.A_apol=Math.round(100*k._source.getAccurateVolumeLevel()).toString(),k&&($.A_artd=k._originMediaStreamTrack.enabled&&k._mediaStreamTrack.enabled?"0":"1"),$.A_jr=V.jitterMs.toString(),$.A_jbm=Math.floor(V.jitterBufferMs).toString(),$.A_cdm=Math.floor(V.jitterBufferMs).toString(),$.A_raps=Uy[fo.getPlayerState(k.getTrackId())].toString(),R){const W=R.audioRecv.find(G=>G.ssrc===T);if(W){const G=V.concealedSamples-W.concealedSamples;G>0&&($.A_cs=Math.round(G).toString())}}return $}(p._audioSSRC,r,s,p.audioTrack):void 0;E&&ts(()=>{var T;return(T=this.requestUpload)===null||T===void 0?void 0:T.call(this,ho.SUBSCRIBE_STATS,{stream_id:p.uid,stats:E})})}})}uploadRelatedDownlinkStats(r,i){var s;(((s=this.requestRemoteMedia)===null||s===void 0?void 0:s.call(this))||[]).forEach(l=>{let[h,p]=l;if(p.has(st.VIDEO)&&h.videoTrack){var v;const E=(h._videoSSRC&&((v=this.requestVideoIsReady)===null||v===void 0?void 0:v.call(this,h._videoSSRC))||!1)===!0,T=function(y,R,k,V,$,W){const G=k.videoRecv.find(De=>De.ssrc===y),ie=$?$.videoRecv.find(De=>De.ssrc===y):void 0;if(!G)return null;const se=Cd.isRemoteVideoFreeze(W,G,ie)&&R,ye={mediaType:"video",isVideoMute:!1,peerId:V,frameRateReceived:G.receivedFrame&&G.receivedFrame.frameRate.toString(),frameRateDecoded:G.decodedFrame&&G.decodedFrame.frameRate.toString(),isFreeze:se,bytesReceived:G.bytes.toString(),packetsReceived:G.packets.toString(),packetsLost:G.packetsLost.toString(),qpSumPerFrame:Math.floor(G.qpSumPerFrame).toString()};return G.framesRateFirefox&&(ye.frameRateDecoded=G.framesRateFirefox.toString(),ye.frameRateReceived=G.framesRateFirefox.toString()),ye}(h._videoSSRC,E,r,h.uid,i,h.videoTrack);T&&ts(()=>{var y;(y=this.requestUpload)===null||y===void 0||y.call(this,ho.SUBSCRIBE_RELATED_STATS,{stream_id:h.uid,stats:T})})}if(p.has(st.AUDIO)&&h.audioTrack){const E=function(T,y,R,k){const V=y.audioRecv.find(W=>W.ssrc===T);if(!V)return null;const $=Cd.isRemoteAudioFreeze(k);return{mediaType:"audio",isAudioMute:!1,peerId:R,googJitterReceived:V.jitterMs.toString(),isFreeze:$,bytesReceived:V.bytes.toString(),packetsReceived:V.packets.toString(),packetsLost:V.packetsLost.toString(),frameReceived:V.receivedFrames.toString(),frameDropped:V.droppedFrames.toString()}}(h._audioSSRC,r,h.uid,h.audioTrack);E&&ts(()=>{var T;(T=this.requestUpload)===null||T===void 0||T.call(this,ho.SUBSCRIBE_RELATED_STATS,{stream_id:h.uid,stats:E})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}stopUploadTransportStats(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval),this.extensionUsageStatsUploadInterval=void 0)}uploadDownlinkExtensionStats(r){r.forEach(i=>{let[s,l]=i;l.has(st.VIDEO)&&s.videoTrack&&s.videoTrack.getProcessorStats().forEach(h=>{var p;(p=this.requestUpload)===null||p===void 0||p.call(this,h.type,h.stats)}),l.has(st.AUDIO)&&s.audioTrack&&s.audioTrack.getProcessorStats().forEach(h=>{var p;(p=this.requestUpload)===null||p===void 0||p.call(this,h.type,h.stats)})})}}function VL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function FL(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?VL(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):VL(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}const BL=`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0
a=msid-semantic: WMS
a=ice-lite
m=application 9 UDP/DTLS/SCTP webrtc-datachannel
c=IN IP4 127.0.0.1
a=mid:0
`,H0="9",GC=2e4,zC=4e4;class Tq{get localCapabilities(){return or(this._localCapabilities)}get rtpCapabilities(){return or(this._rtpCapabilities)}get candidates(){return or(this._candidates)}get iceParameters(){return or(this._iceParameters)}get dtlsParameters(){return or(this._dtlsParameters)}constructor(r){w(this,"sessionDesc",void 0),w(this,"_localCapabilities",void 0),w(this,"_rtpCapabilities",void 0),w(this,"_candidates",void 0),w(this,"_iceParameters",void 0),w(this,"_dtlsParameters",void 0),w(this,"setup",void 0),w(this,"currentMidIndex",void 0),w(this,"cname",void 0),w(this,"firefoxSsrcMidMap",new Map),r=or(r);const{remoteIceParameters:i,remoteDtlsParameters:s,candidates:l,remoteRTPCapabilities:h,remoteSetup:p,localCapabilities:v,cname:E}=r,T=sr.exports.parse(BL);this._rtpCapabilities=h,this._candidates=l,this._iceParameters=i,this._dtlsParameters=s,this._localCapabilities=v,this.setup=p,this.cname=E;const y=this.rtpCapabilities.send;for(const R of T.mediaDescriptions){if(R.attributes.iceUfrag=i.iceUfrag,R.attributes.icePwd=i.icePwd,R.attributes.fingerprints=s.fingerprints,R.attributes.candidates=l,R.attributes.setup=p,R.media.mediaType==="application"&&(R.attributes.sctpPort="5000"),R.media.mediaType==="video"&&(R.media.fmts=y.videoCodecs.map(k=>k.payloadType.toString(10)),R.attributes.payloads=y.videoCodecs,R.attributes.extmaps=y.videoExtensions,ne("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:k,ssrcGroups:V}=Zo([{ssrcId:zC,rtx:ne("USE_SUB_RTX")?40001:void 0}],this.cname);R.attributes.ssrcs=k,R.attributes.ssrcGroups=V}if(R.media.mediaType==="audio"&&(R.media.fmts=y.audioCodecs.map(k=>k.payloadType.toString(10)),R.attributes.payloads=y.audioCodecs,R.attributes.extmaps=y.audioExtensions,Xc(R),ne("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:k,ssrcGroups:V}=Zo([{ssrcId:GC}],this.cname);R.attributes.ssrcs=k,R.attributes.ssrcGroups=V}}this.sessionDesc=T,this.currentMidIndex=T.mediaDescriptions.length-1}updateRemoteRTPCapabilities(r){const i=sr.exports.parse(BL);this._rtpCapabilities=r;const s=this.rtpCapabilities.send;for(const l of i.mediaDescriptions){if(l.attributes.iceUfrag=this._iceParameters.iceUfrag,l.attributes.icePwd=this._iceParameters.icePwd,l.attributes.fingerprints=this._dtlsParameters.fingerprints,l.attributes.candidates=this._candidates,l.attributes.setup=this.setup,l.media.mediaType==="application"&&(l.attributes.sctpPort="5000"),l.media.mediaType==="video"&&(l.media.fmts=s.videoCodecs.map(h=>h.payloadType.toString(10)),l.attributes.payloads=s.videoCodecs,l.attributes.extmaps=s.videoExtensions,ne("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:h,ssrcGroups:p}=Zo([{ssrcId:zC,rtx:ne("USE_SUB_RTX")?40001:void 0}],this.cname);l.attributes.ssrcs=h,l.attributes.ssrcGroups=p}if(l.media.mediaType==="audio"&&(l.media.fmts=s.audioCodecs.map(h=>h.payloadType.toString(10)),l.attributes.payloads=s.audioCodecs,l.attributes.extmaps=s.audioExtensions,ne("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:h,ssrcGroups:p}=Zo([{ssrcId:GC}],this.cname);l.attributes.ssrcs=h,l.attributes.ssrcGroups=p}}this.sessionDesc=i,this.currentMidIndex=i.mediaDescriptions.length-1}preloadRemoteMedia(r){this.rtpCapabilities;const i=this.candidates,s=this.dtlsParameters,l=this.iceParameters,h=this.rtpCapabilities.send;for(let p=1;p<r;p++){const v=2*p+GC,E=2*p+zC,{ssrcs:T,ssrcGroups:y}=Zo([{ssrcId:v}],this.cname),{ssrcs:R,ssrcGroups:k}=Zo([{ssrcId:E,rtx:ne("USE_SUB_RTX")?E+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:H0,protos:["UDP","TLS","RTP","SAVPF"],fmts:h.videoCodecs.map(V=>V.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:i,extmaps:h.videoExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:R,ssrcGroups:k,rtcpFeedbackWildcards:[],payloads:h.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:H0,protos:["UDP","TLS","RTP","SAVPF"],fmts:h.audioCodecs.map(V=>V.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:l.iceUfrag,icePwd:l.icePwd,unrecognized:[],candidates:i,extmaps:h.audioExtensions,fingerprints:s.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:T,ssrcGroups:y,rtcpFeedbackWildcards:[],payloads:h.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*p)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return sr.exports.print(this.sessionDesc)}send(r,i,s,l){const{ssrcs:h,ssrcGroups:p}=Zo(i,this.cname,ne("SYNC_GROUP")?s:void 0),v=this.findPreloadMediaDesc(h);if(v){if(Mn()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,v.attributes.mid),l&&(l.twcc||l.remb)){const E=this.sessionDesc.mediaDescriptions.indexOf(v);return this.sessionDesc.mediaDescriptions[E]=this.mungSendMediaDesc(v,l),{mid:v.attributes.mid,needExchangeSDP:!0}}return{mid:v.attributes.mid,needExchangeSDP:!1}}{const E=this.findAvailableMediaIndex(r,h);let T;return E===-1||yi()||Ci()||fN()||E===0&&ne("USE_SUB_RTX")?(T=this.createOrRecycleSendMedia(r,h,p,"sendonly",l),this.updateBundleMids()):(T=or(this.sessionDesc.mediaDescriptions[E]),T.attributes.direction="sendonly",T.attributes.ssrcs=h,T.attributes.ssrcGroups=p,this.sessionDesc.mediaDescriptions[E]=this.mungSendMediaDesc(T,l)),Mn()&&this.firefoxSsrcMidMap.set(h[0].ssrcId,T.attributes.mid),{mid:T.attributes.mid,needExchangeSDP:!0}}}batchSend(r){const i=r.map(h=>{let{kind:p,ssrcMsg:v,mslabel:E}=h;return this.send(p,v,E)}),s=[];let l=!1;return i.forEach(h=>{let{mid:p,needExchangeSDP:v}=h;v&&(l=!0),s.push(p)}),{mids:s,needExchangeSDP:l}}stopSending(r){const i=this.sessionDesc.mediaDescriptions.filter(s=>s.attributes.mid&&r.indexOf(s.attributes.mid)!==-1);if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");i.forEach(s=>{s.attributes.mid==="0"||Mn()||yi()||Ci()?s.attributes.ssrcs=[]:(s.attributes.ssrcs=[],s.attributes.direction="inactive",s.media.port="0")}),this.updateBundleMids()}mute(r){const i=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(r){const i=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r);if(!i)throw new Error("mediaDescription not found with ".concat(r," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}muteRemote(r){const i=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(s=>{s.attributes.direction="inactive"})}unmuteRemote(r){const i=this.sessionDesc.mediaDescriptions.filter(s=>r.includes(s.attributes.mid||""));if(i.length!==r.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");i.forEach(s=>{s.attributes.direction="recvonly"})}receive(r,i,s,l){r.forEach((h,p)=>{this.createOrRecycleRecvMedia(h,[],"recvonly",i,s,l[p])}),this.updateBundleMids()}stopReceiving(r){const i=this.sessionDesc.mediaDescriptions.filter(s=>r.indexOf(s.attributes.mid)!==-1);if(i.length!==r.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");i.forEach(s=>{s.media.port="0",s.attributes.direction="inactive"}),this.updateBundleMids()}updateCandidates(r){r===jr.TCP?this._candidates.forEach(i=>{this._candidates.findIndex(s=>s.transport==="tcp"&&s.connectionAddress===i.connectionAddress&&s.port===i.port)===-1&&this._candidates.push(FL(FL({},i),{},{foundation:"tcpcandidate",priority:Number(i.priority)-1+"",transport:"tcp",port:Number(i.port)+90+""}))}):this._candidates=this._candidates.filter(i=>i.transport!=="tcp");for(const i of this.sessionDesc.mediaDescriptions)i.attributes.candidates=this.candidates}restartICE(r){r=or(r),this._iceParameters=r,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=r.iceUfrag,i.attributes.icePwd=r.icePwd})}predictReceivingMids(r){const i=[];for(let s=0;s<r;s++)i.push((this.currentMidIndex+s+1).toString(10));return i}findAvailableMediaIndex(r,i){return this.sessionDesc.mediaDescriptions.findIndex(s=>{const l=s.media.mediaType===r&&s.media.port!=="0"&&(s.attributes.direction==="sendonly"||s.attributes.direction==="sendrecv")&&s.attributes.ssrcs.length===0;if(Mn()){if(l){const h=this.firefoxSsrcMidMap.get(i[0].ssrcId);return!(h||s.attributes.mid!=="0"&&s.attributes.mid!=="1")||!(!h||h!==s.attributes.mid)}return!1}return l})}createOrRecycleRecvMedia(r,i,s,l,h,p){const v=r._mediaStreamTrack.kind,E=this.rtpCapabilities.recv,T=this.localCapabilities.send;let y=[];if(v===st.VIDEO){var R,k;if(ne("H264_PROFILE_LEVEL_ID")&&l==="h264"&&(y=E.videoCodecs.filter(ie=>{var se,ye;return(((se=ie.rtpMap)===null||se===void 0?void 0:se.encodingName.toLowerCase())||"").includes(l)&&(ie==null||(ye=ie.fmtp)===null||ye===void 0?void 0:ye.parameters["profile-level-id"])===ne("H264_PROFILE_LEVEL_ID")})),!y||((R=y)===null||R===void 0?void 0:R.length)===0){const ie=T.videoCodecs.filter(se=>{var ye;return(((ye=se.rtpMap)===null||ye===void 0?void 0:ye.encodingName.toLowerCase())||"").includes(l)});ie.length!==0&&(y=E.videoCodecs.filter(se=>ie.some(ye=>ye.payloadType===se.payloadType)))}if(ne("USE_PUB_RTX")){const ie=y.map(ye=>ye.payloadType.toString()),se=E.videoCodecs.filter(ye=>{var De,Te;return((De=ye.rtpMap)===null||De===void 0?void 0:De.encodingName)==="rtx"&&ie.includes(((Te=ye.fmtp)===null||Te===void 0?void 0:Te.parameters.apt)||"")});y=[...y,...se]}y.length===0&&(M.warning("codec ".concat(l," not included in rtpCapabilities, fallback to default payloads: ").concat((k=E.videoCodecs[0].rtpMap)===null||k===void 0?void 0:k.encodingName)),y=E.videoCodecs)}else y=E.audioCodecs.filter(ie=>{var se;return(((se=ie.rtpMap)===null||se===void 0?void 0:se.encodingName.toLowerCase())||"").includes(h)}),y.length===0&&(M.warning("codec ".concat(h," not included in rtpCapabilities, fallback to opus")),y=E.audioCodecs.filter(ie=>{var se;return(((se=ie.rtpMap)===null||se===void 0?void 0:se.encodingName.toLowerCase())||"").includes("opus")}));const V=v===st.VIDEO?E.videoExtensions:E.audioExtensions;this.currentMidIndex+=1;const $="".concat(this.currentMidIndex);let W={media:{mediaType:v,port:H0,protos:["UDP","TLS","RTP","SAVPF"],fmts:y.map(ie=>ie.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:V,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:y,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:s,rtcpMux:!0,rtcpRsize:!0,mid:"".concat($)}};W=this.mungRecvMediaDsec(W,r,p);const G=this.findFirstClosedMedia(v);if(G){const ie=this.sessionDesc.mediaDescriptions.indexOf(G);this.sessionDesc.mediaDescriptions[ie]=W}else this.sessionDesc.mediaDescriptions.push(W);return W}createOrRecycleSendMedia(r,i,s,l,h){const p=this.rtpCapabilities.send,v=r===st.VIDEO?p.videoCodecs:p.audioCodecs,E=r===st.VIDEO?p.videoExtensions:p.audioExtensions;this.currentMidIndex+=1;const T="".concat(this.currentMidIndex);let y={media:{mediaType:r,port:H0,protos:["UDP","TLS","RTP","SAVPF"],fmts:v.map(k=>k.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:E,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:i,ssrcGroups:s,rtcpFeedbackWildcards:[],payloads:v,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:l,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(T)}};y=this.mungSendMediaDesc(y,h);const R=this.findFirstClosedMedia(r);if(R){const k=this.sessionDesc.mediaDescriptions.indexOf(R);this.sessionDesc.mediaDescriptions[k]=y}else this.sessionDesc.mediaDescriptions.push(y);return y}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(r=>r.media.port!=="0").map(r=>r.attributes.mid)}mungRecvMediaDsec(r,i,s){const l=or(r);return FC(l),Ad(l,i),BC(l,i),nL(l),M0(l,s,this.localCapabilities.send),l}mungSendMediaDesc(r,i){const s=or(r);return M0(s,i,this.localCapabilities.recv),Xc(s),s}updateRecvMedia(r,i){const s=this.sessionDesc.mediaDescriptions.findIndex(l=>l.attributes.mid===r);if(s!==-1){const l=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[s],i);this.sessionDesc.mediaDescriptions[s]=l}}bumpMid(r){this.currentMidIndex+=r}findFirstClosedMedia(r){return this.sessionDesc.mediaDescriptions.find(i=>Mn()?i.media.port==="0"&&i.media.mediaType===r:i.media.port==="0")}findPreloadMediaDesc(r){return this.sessionDesc.mediaDescriptions.find(i=>{var s,l;return((s=i.attributes)===null||s===void 0||(l=s.ssrcs[0])===null||l===void 0?void 0:l.ssrcId)===r[0].ssrcId})}getSSRC(r){var i;return(i=this.sessionDesc.mediaDescriptions.find(s=>s.attributes.mid===r))===null||i===void 0?void 0:i.attributes.ssrcs}}var Kt;function jL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function $0(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?jL(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):jL(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}let bq=(_e((Kt=class Bg extends m0{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(r,i,s){super(r,i),w(this,"store",void 0),w(this,"peerConnection",void 0),w(this,"remoteSDP",void 0),w(this,"initialOffer",void 0),w(this,"transportEventReceiver",void 0),w(this,"statsFilter",void 0),w(this,"localCapabilities",void 0),w(this,"localCandidateCount",0),w(this,"allCandidatesReceived",!1),w(this,"establishPromise",void 0),w(this,"mutex",new Ri("NVExtentionsConnection-mutex")),w(this,"rtcMedia",void 0),this.store=i,this.peerConnection=s,this.statsFilter=WC(this.peerConnection,ne("STATS_UPDATE_INTERVAL"),void 0,Mn()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(r){try{const i=await this.peerConnection.createOffer();if(!i.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const s=cu(i.sdp),l=await iL(!ne("USE_PUB_RTX")&&!ne("USE_SUB_RTX"),ne("FILTER_VIDEO_FEC"),ne("FILTER_AUDIO_FEC"));return this.localCapabilities=l,this.initialOffer=i,$0($0({},s),{},{rtpCapabilities:l,offerSDP:i.sdp})}catch(i){throw new X(j.GET_LOCAL_CONNECTION_PARAMS_FAILED,i.toString())}}async connect(r,i,s,l,h,p){try{if(!this.initialOffer)throw new Error("Cannot establish NVConnection without initial offer.");this.remoteSDP=new Tq({remoteIceParameters:r,remoteDtlsParameters:i,candidates:s,remoteRTPCapabilities:l,remoteSetup:h,localCapabilities:jC(this.localCapabilities),cname:p});const v=this.remoteSDP.toString(),E=sr.exports.parse(this.initialOffer.sdp),T=E.mediaDescriptions.find(k=>k.media.mediaType==="audio");T&&Xc(T);const y=sr.exports.print(E),R=this.logSDPExchange(y||"","offer","local","connect");await this.peerConnection.setLocalDescription({type:"offer",sdp:y}),R==null||R(v),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(v){throw new X(j.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(v.toString()))}}async updateRemoteConnect(r){var i,s,l;(i=this.remoteSDP)===null||i===void 0||i.updateRemoteRTPCapabilities(r),(s=this.remoteSDP)===null||s===void 0||s.preloadRemoteMedia(2);const h=(l=this.remoteSDP)===null||l===void 0?void 0:l.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:h});const p=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(p),M.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.")}send(r,i,s){var l=this;return Aa(function*(){const h=yield yt(l.mutex.lock("From NVExtentionsConnection.send"));try{if(!l.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");const p=[];r.forEach(W=>{const G=l.peerConnection.addTransceiver(W._mediaStreamTrack,{direction:"sendonly"});p.push(G)}),Mn()&&ne("SIMULCAST")===!0&&(yield yt(l.applySimulcastForFirefox(p,r)));const v=yield yt(l.peerConnection.createOffer()),E=l.remoteSDP.predictReceivingMids(r.length),T=l.mungSendOfferSDP(v.sdp,r,E),y=sr.exports.parse(T),R=E.map(W=>{const G=y.mediaDescriptions.find(ie=>ie.attributes.mid===W);if(!G)throw new Error("Cannot extract ssrc from mediaDescription.");return eL(G,ne("USE_PUB_RTX"))});let k;try{k=yield R}catch(W){k=[],l.remoteSDP.receive(r,i,s,k);const G=l.remoteSDP.toString();throw yield yt(l.peerConnection.setLocalDescription({type:"offer",sdp:T})),yield yt(l.peerConnection.setRemoteDescription({type:"answer",sdp:G})),yield yt(l.stopSending(E,!0)),W}l.remoteSDP.receive(r,i,s,k);const V=l.remoteSDP.toString(),$=l.logSDPExchange(T,"offer","local","send");return yield yt(l.peerConnection.setLocalDescription({type:"offer",sdp:T})),yield yt(l.applySimulcastEncodings(p,r)),yield yt(l.applySendEncodings(p,r)),$==null||$(V),yield yt(l.peerConnection.setRemoteDescription({type:"answer",sdp:V})),p.map((W,G)=>{const ie=E[G];return{localSSRC:R[G],id:ie,transceiver:W}})}catch(p){throw p instanceof X?p:new X(j.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(p.toString()))}finally{h()}})()}async stopSending(r,i){const s=i?void 0:await this.mutex.lock("From NVExtentionsConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");const l=this.peerConnection.getTransceivers().filter(E=>r.indexOf(E.mid)!==-1);if(l.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");l.map(E=>{var T;E.direction="inactive",(T=E.stop)===null||T===void 0||T.call(E)});const h=await this.peerConnection.createOffer(),p=this.logSDPExchange(h.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(h),this.remoteSDP.stopReceiving(r);const v=this.remoteSDP.toString();p==null||p(v),await this.peerConnection.setRemoteDescription({type:"answer",sdp:v})}catch(l){throw new X(j.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(l.toString()))}finally{s&&s()}}async receive(r,i,s,l){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.receive ".concat(r," before remoteSDP created."));const{mid:h,needExchangeSDP:p}=this.remoteSDP.send(r,i,s,l);if(p){const E=this.remoteSDP.toString(),T=this.logSDPExchange(E,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:E});const y=await this.peerConnection.createAnswer(),R=this.mungReceiveAnswerSDP(y.sdp,h,r);T==null||T(R||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:R}),M.debug("[NVExtentionsConnection] receive ".concat(r," by exchanging SDP."))}else M.debug("[NVExtentionsConnection] receive ".concat(r," no need to exchange SDP."));const v=this.peerConnection.getTransceivers().find(E=>E.mid===h);if(!v)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:v.receiver.track,id:h}}catch(h){throw new X(j.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(h.toString()))}}async batchReceive(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");const{mids:i,needExchangeSDP:s}=this.remoteSDP.batchSend(r);if(s){const l=this.remoteSDP.toString(),h=this.logSDPExchange(l,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:l});const p=await this.peerConnection.createAnswer();h==null||h(p.sdp||""),await this.peerConnection.setLocalDescription(p),M.debug("[NVExtentionsConnection] batchReceive by exchanging SDP.")}else M.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");return i.map(l=>{const h=this.peerConnection.getTransceivers().find(p=>p.mid===l);if(!h)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:h.receiver.track,id:l}})}catch(i){throw new X(j.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(i.toString()))}}async stopReceiving(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(r);const i=this.remoteSDP.toString(),s=this.logSDPExchange(i,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new X(j.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat(i.toString()))}}async muteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.mute(r);const i=this.remoteSDP.toString(),s=this.logSDPExchange(i,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new X(j.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat(i.toString()))}}async unmuteRemote(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(r," before remote SDP created."));this.remoteSDP.unmute(r);const i=this.remoteSDP.toString(),s=this.logSDPExchange(i,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:i});const l=await this.peerConnection.createAnswer();s==null||s(l.sdp||""),await this.peerConnection.setLocalDescription(l)}catch(i){throw new X(j.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat(i.toString()))}}async muteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(i.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(p=>{p.direction="inactive"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.muteRemote(r);const h=this.remoteSDP.toString();l==null||l(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(i){throw new X(j.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat(i.toString()))}}async unmuteLocal(r){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");const i=this.peerConnection.getTransceivers().filter(p=>p.mid&&r.indexOf(p.mid)!==-1);if(i.length!==r.length)throw new Error("Transceivers' length doesn't match mids' length.");i.map(async(p,v)=>{p.direction="sendonly"});const s=await this.peerConnection.createOffer(),l=this.logSDPExchange(s.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(s),this.remoteSDP.unmuteRemote(r);const h=this.remoteSDP.toString();l==null||l(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(i){throw new X(j.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat(i.toString()))}}restartICE(r){var i=this;return Aa(function*(){const s=yield yt(i.mutex.lock("From NVExtentionsConnection.restartICE"));try{if(!i.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Xn().supportPCSetConfiguration){const T=i.peerConnection.getConfiguration(),y=r===jr.RELAY?"relay":"all";T.iceTransportPolicy!==y&&(M.debug("restartICE change iceTransportPolicy from [".concat(T.iceTransportPolicy,"] to [").concat(y,"]")),T.iceTransportPolicy=y,i.peerConnection.setConfiguration(T))}else if(r===jr.RELAY)return;r!==jr.RELAY&&i.remoteSDP.updateCandidates(r);const l=yield yt(i.peerConnection.createOffer({iceRestart:!0}));if(!l.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const h=cu(l.sdp),{remoteIceParameters:p}=yield h.iceParameters;i.remoteSDP.restartICE(p);const v=i.remoteSDP.toString(),E=i.logSDPExchange(l.sdp||"","offer","local","restartICE");yield yt(i.peerConnection.setLocalDescription(l)),E==null||E(v),yield yt(i.peerConnection.setRemoteDescription({type:"answer",sdp:v}))}catch(l){M.warning("restart ICE failed, abort operation",l)}finally{s()}})()}close(){var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(r){return this.statsFilter.getVideoIsReady(r)}async updateEncoderConfig(r,i){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");const s=await this.peerConnection.createOffer(),l=this.mungSendOfferSDP(s.sdp,[i],[r]);this.remoteSDP.updateRecvMedia(r,i);const h=this.remoteSDP.toString(),p=this.logSDPExchange(l,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:l}),p==null||p(h),await this.peerConnection.setRemoteDescription({type:"answer",sdp:h})}catch(s){throw new X(j.EXCHANGE_SDP_FAILED,s.toString())}}async updateSendParameters(r,i){const s=this.peerConnection.getTransceivers().filter(l=>l.mid===r);s.length===1&&(this.isVP8Simulcast(i)?Mn()||await this.applySimulcastEncodings(s,[i]):await this.applySendEncodings(s,[i]))}setStatsRemoteVideoIsReady(r,i){this.statsFilter.setVideoIsReady2(r,i)}async replaceTrack(r,i){const s=this.peerConnection.getTransceivers().find(l=>l.mid===i);s&&await s.sender.replaceTrack(r._mediaStreamTrack)}getP2PConnectionParams(){var r;if((r=this.peerConnection.currentLocalDescription)===null||r===void 0||!r.sdp||!this.localCapabilities)throw new Error;return $0($0({},cu(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var r;(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var r;(r=this.onConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=r=>{r.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,M.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,M.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},ne("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(r){const i={iceServers:[]};return r.iceServers?i.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(lp(r.turnServer.servers)?i.iceServers=r.turnServer.servers:(i.iceServers&&i.iceServers.push(...Bg.turnServerConfigToIceServers(r.turnServer.servers)),ne("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&r.turnServer.serversFromGateway&&i.iceServers.push(...Bg.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),ne("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(r){const i=[];return r.forEach(s=>{s.security?s.tcpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(C0(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&!ne("FORCE_TURN_TCP")&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),i}async applySendEncodings(r,i){try{if(!Xn().supportSetRtpSenderParameters||r.length!==i.length)return;for(let T=0;T<r.length;T++){const y=r[T],R=i[T];if(R&&R instanceof ar){var s,l;if(this.isVP8Simulcast(R))continue;const k={},V={};switch(R._optimizationMode){case"motion":k.degradationPreference="maintain-framerate";break;case"detail":k.degradationPreference="maintain-resolution";break;default:k.degradationPreference="balanced"}var h,p,v,E;if((s=R._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&(V.maxBitrate=1e3*((h=R._encoderConfig)===null||h===void 0?void 0:h.bitrateMax)),R._hints.includes(gr.LOW_STREAM)&&((p=R._encoderConfig)!==null&&p!==void 0&&p.frameRate&&(V.maxFramerate=rc(R._encoderConfig.frameRate)),(v=R._encoderConfig)!==null&&v!==void 0&&v.scaleResolutionDownBy&&((E=R._encoderConfig)===null||E===void 0?void 0:E.scaleResolutionDownBy)>1&&(V.scaleResolutionDownBy=R._encoderConfig.scaleResolutionDownBy)),ne("DSCP_TYPE")&&Yl()){const G=ne("DSCP_TYPE");["very-low","low","medium","high"].includes(G)&&(V.networkPriority=G)}const $=y.sender.getParameters(),W=(l=$.encodings)===null||l===void 0?void 0:l[0];Mn()&&!W&&(k.encodings=[V]),W&&Object.assign(W,V),Object.assign($,k),await y.sender.setParameters($)}}}catch{M.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(r,i,s){const l=sr.exports.parse(r);return i.forEach((h,p)=>{const v=s[p],E=l.mediaDescriptions.find(T=>T.attributes.mid===v);E&&(Ad(E,h),rL(E,h,this.store.codec))}),sr.exports.print(l)}mungReceiveAnswerSDP(r,i,s){const l=sr.exports.parse(r),h=l.mediaDescriptions.find(p=>p.attributes.mid===i);return h&&s===st.AUDIO&&h.media.mediaType==="audio"&&Xc(h),sr.exports.print(l)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=r=>{var i;(i=this.onFirstAudioReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoReceived=r=>{var i;(i=this.onFirstVideoReceived)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstAudioDecoded=r=>{var i;(i=this.onFirstAudioDecoded)===null||i===void 0||i.call(this,r)},this.statsFilter.onFirstVideoDecoded=(r,i,s)=>{var l;(l=this.onFirstVideoDecoded)===null||l===void 0||l.call(this,r,i,s)},this.statsFilter.onSelectedLocalCandidateChanged=(r,i)=>{var s;(s=this.onSelectedLocalCandidateChanged)===null||s===void 0||s.call(this,r,i)},this.statsFilter.onSelectedRemoteCandidateChanged=(r,i)=>{var s;(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0||s.call(this,r,i)},this.statsFilter.onFirstVideoDecodedTimeout=r=>{var i;(i=this.onFirstVideoDecodedTimeout)===null||i===void 0||i.call(this,r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(r,i){if(r.length===i.length)for(let v=0;v<r.length;v++){var s,l,h,p;const E=r[v],T=i[v];if(T instanceof ar&&!T._hints.includes(gr.LOW_STREAM)&&(s=T._encoderConfig)!==null&&s!==void 0&&s.bitrateMax&&((l=T._encoderConfig)===null||l===void 0?void 0:l.bitrateMax)>200&&(h=T._scalabiltyMode)!==null&&h!==void 0&&h.numSpatialLayers&&((p=T._scalabiltyMode)===null||p===void 0?void 0:p.numSpatialLayers)>1&&this.store.codec==="vp8"){const y={},R={high:1e3*(T._encoderConfig.bitrateMax-50),medium:5e4};y.encodings=[{rid:"m",active:!0,maxBitrate:R.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:R.high}];const k=E.sender.getParameters();await E.sender.setParameters(Object.assign(k,y))}}}async applySimulcastEncodings(r,i){if(!Mn()&&r.length===i.length)for(let s=0;s<r.length;s++){const l=i[s];if(l instanceof ar&&this.isVP8Simulcast(l)){const h=r[s],p={},v={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};p.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:v.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:v.medium,scaleResolutionDownBy:4}];const E=h.sender.getParameters();await h.sender.setParameters(Object.assign(E,p))}}}isVP8Simulcast(r){var i,s,l,h;return!!(r instanceof ar&&ne("SIMULCAST")&&this.store.codec==="vp8"&&!r._hints.includes(gr.LOW_STREAM)&&(i=r._encoderConfig)!==null&&i!==void 0&&i.bitrateMax&&((s=r._encoderConfig)===null||s===void 0?void 0:s.bitrateMax)>200&&(l=r._scalabiltyMode)!==null&&l!==void 0&&l.numSpatialLayers&&((h=r._scalabiltyMode)===null||h===void 0?void 0:h.numSpatialLayers)>1)}logSDPExchange(r,i,s,l){if(ne("SDP_LOGGING"))return M.upload("exchanging ".concat(s," ").concat(i," SDP during NVExtentionsConnection.").concat(l,`
`),r),i==="offer"?h=>{this.logSDPExchange(h,"answer",s==="local"?"remote":"local",l)}:void 0}async getRemoteSSRC(r){if(!this.remoteSDP)return;const i=this.remoteSDP.getSSRC(r);return i==null?void 0:i[0].ssrcId}setConfiguration(r){if(Xn().supportPCSetConfiguration){const i=Bg.resolvePCConfiguration(r);this.peerConnection.setConfiguration(i)}}}).prototype,"connect",[Lo],Object.getOwnPropertyDescriptor(Kt.prototype,"connect"),Kt.prototype),_e(Kt.prototype,"updateRemoteConnect",[Lo],Object.getOwnPropertyDescriptor(Kt.prototype,"updateRemoteConnect"),Kt.prototype),_e(Kt.prototype,"receive",[Lo],Object.getOwnPropertyDescriptor(Kt.prototype,"receive"),Kt.prototype),_e(Kt.prototype,"batchReceive",[Lo],Object.getOwnPropertyDescriptor(Kt.prototype,"batchReceive"),Kt.prototype),_e(Kt.prototype,"stopReceiving",[Lo],Object.getOwnPropertyDescriptor(Kt.prototype,"stopReceiving"),Kt.prototype),_e(Kt.prototype,"muteRemote",[Lo],Object.getOwnPropertyDescriptor(Kt.prototype,"muteRemote"),Kt.prototype),_e(Kt.prototype,"unmuteRemote",[Lo],Object.getOwnPropertyDescriptor(Kt.prototype,"unmuteRemote"),Kt.prototype),_e(Kt.prototype,"muteLocal",[Lo],Object.getOwnPropertyDescriptor(Kt.prototype,"muteLocal"),Kt.prototype),_e(Kt.prototype,"unmuteLocal",[Lo],Object.getOwnPropertyDescriptor(Kt.prototype,"unmuteLocal"),Kt.prototype),_e(Kt.prototype,"close",[Lo],Object.getOwnPropertyDescriptor(Kt.prototype,"close"),Kt.prototype),_e(Kt.prototype,"updateEncoderConfig",[Lo],Object.getOwnPropertyDescriptor(Kt.prototype,"updateEncoderConfig"),Kt.prototype),_e(Kt.prototype,"updateSendParameters",[Lo],Object.getOwnPropertyDescriptor(Kt.prototype,"updateSendParameters"),Kt.prototype),_e(Kt.prototype,"replaceTrack",[Lo],Object.getOwnPropertyDescriptor(Kt.prototype,"replaceTrack"),Kt.prototype),_e(Kt.prototype,"getRemoteSSRC",[Lo],Object.getOwnPropertyDescriptor(Kt.prototype,"getRemoteSSRC"),Kt.prototype),Kt);function Lo(n,r,i){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,h=await l.lock("From NVExtentionsConnection.".concat(r));try{for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];return await s.apply(this,v)}finally{h()}},i}var un;function HL(n){var r,i,s,l=2;for(typeof Symbol<"u"&&(i=Jk,s=Symbol.iterator);l--;){if(i&&(r=n[i])!=null)return r.call(n);if(s&&(r=n[s])!=null)return new KC(r.call(n));i="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}function KC(n){function r(i){if(Object(i)!==i)return Pe.reject(new TypeError(i+" is not an object."));var s=i.done;return Pe.resolve(i.value).then(function(l){return{value:l,done:s}})}return(KC=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(i){var s=this.s.return;return s===void 0?Pe.resolve({value:i,done:!0}):r(s.apply(this.s,arguments))},throw:function(i){var s=this.s.return;return s===void 0?Pe.reject(i):r(s.apply(this.s,arguments))}},new KC(n)}let Qc=(_e((un=class jg extends m0{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}constructor(r,i){super(r,i),w(this,"store",void 0),w(this,"peerConnection",void 0),w(this,"cname",void 0),w(this,"mutex",new Ri("DataChannelConnection-mutex")),w(this,"dataChannel",void 0),w(this,"_p2pConnection",void 0),w(this,"establishPromise",void 0),w(this,"_nvMedia",void 0),this.store=i,this.store.dcId=this.store.dcId+1,this.peerConnection=new RTCPeerConnection(jg.resolvePCConfiguration(r),{optional:[{googDscp:!0}]}),this.dataChannel=this.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),this.dataChannel.binaryType="arraybuffer",this._p2pConnection=new bq(r,i,this.peerConnection),this.bindPCEvents(),this.establishPromise=this._p2pConnection.establishPromise}async establish(){var r;const i=(r=this._nvMedia)===null||r===void 0?void 0:r.getLocalRtpCapabilities();return await this._p2pConnection.establish(i)}getP2PConnectionParams(){return this._p2pConnection.getP2PConnectionParams()}async connect(r,i,s,l,h,p){return this.cname=p,await this._p2pConnection.connect(r,i,s,l,h,p),await new Pe((v,E)=>{const T=setTimeout(()=>{this.closeSignal(),E(new X(j.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(s))))},2e3);this.dataChannel.onopen=()=>{if(this.dataChannel.readyState==="open")return clearTimeout(T),void v()},this.dataChannel.onerror=y=>{this.closeSignal(),E(y)}}),{transmitter:this.dataChannel,close:this.closeSignal.bind(this)}}send(r,i,s){var l=this;return Aa(function*(){const h=yield yt(l.mutex.lock("From DataChannelConnection.send"));try{return yield*L0(HL(l._p2pConnection.send(r,i,s)),yt)}finally{h()}})()}async stopSending(r,i){return this._p2pConnection.stopSending(r,i)}async receive(r,i,s,l){return this._nvMedia?(M.debug("[DataChannelConnection] receive ".concat(r," by DataChannel.")),await this._nvMedia.reveiveByRTCMedia(r,i,this.cname)):(M.debug("[DataChannelConnection] receive ".concat(r," by WebRTC.")),await this._p2pConnection.receive(r,i,s,l))}async batchReceive(r){return[...await this._p2pConnection.batchReceive(r)]}async stopReceiving(r){return await this._p2pConnection.stopReceiving(r)}async muteRemote(r){return await this._p2pConnection.muteRemote(r)}async unmuteRemote(r){return await this._p2pConnection.unmuteRemote(r)}async muteLocal(r){return await this._p2pConnection.muteLocal(r)}async unmuteLocal(r){return await this._p2pConnection.unmuteLocal(r)}restartICE(r){var i=this;return Aa(function*(){return yield*L0(HL(i._p2pConnection.restartICE(r)),yt)})()}close(){var r;(r=this._nvMedia)===null||r===void 0||r.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)}getStats(){return this._p2pConnection.getStats()}getRemoteVideoIsReady(r){return this._p2pConnection.getRemoteVideoIsReady(r)}updateRemoteConnect(r){var i;(i=this._nvMedia)===null||i===void 0||i.setRemoteRtpCapabilities(r),this._p2pConnection.updateRemoteConnect(r)}async updateEncoderConfig(r,i){return await this._p2pConnection.updateEncoderConfig(r,i)}async updateSendParameters(r,i){return await this._p2pConnection.updateSendParameters(r,i)}setStatsRemoteVideoIsReady(r,i){this._p2pConnection.setStatsRemoteVideoIsReady(r,i)}async replaceTrack(r,i){return await this._p2pConnection.replaceTrack(r,i)}async getRemoteSSRC(r){return this._p2pConnection.getRemoteSSRC(r)}logSDPExchange(r,i,s,l){if(ne("SDP_LOGGING"))return M.upload("exchanging ".concat(s," ").concat(i," SDP during DataChannelConnection.").concat(l,`
`),r),i==="offer"?h=>{this.logSDPExchange(h,"answer",s==="local"?"remote":"local",l)}:void 0}static resolvePCConfiguration(r){const i={iceServers:[]};return r.iceServers?i.iceServers=r.iceServers:r.turnServer&&r.turnServer.mode!=="off"&&(lp(r.turnServer.servers)?i.iceServers=r.turnServer.servers:(i.iceServers&&i.iceServers.push(...jg.turnServerConfigToIceServers(r.turnServer.servers)),ne("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&r.turnServer.serversFromGateway&&i.iceServers.push(...jg.turnServerConfigToIceServers(r.turnServer.serversFromGateway)),ne("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":r.turnServer.servers.concat(r.turnServer.serversFromGateway||[]).forEach(s=>{s.forceturn&&(i.iceTransportPolicy="relay")}))),i}static turnServerConfigToIceServers(r){const i=[];return r.forEach(s=>{s.security?s.tcpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turns:".concat(C0(s.turnServerURL),":").concat(s.tcpport,"?transport=tcp")}):(s.udpport&&!ne("FORCE_TURN_TCP")&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.udpport,"?transport=udp")}),s.tcpport&&i.push({username:s.username,credential:s.password,credentialType:"password",urls:"turn:".concat(s.turnServerURL,":").concat(s.tcpport,"?transport=tcp")}))}),i}bindPCEvents(){this._p2pConnection.onICEConnectionStateChange=r=>{var i;return(i=this.onICEConnectionStateChange)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onConnectionStateChange=r=>{var i;return(i=this.onConnectionStateChange)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onDTLSTransportStateChange=r=>{var i;return(i=this.onDTLSTransportStateChange)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onDTLSTransportError=r=>{var i;return(i=this.onDTLSTransportError)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onICETransportStateChange=r=>{var i;return(i=this.onICETransportStateChange)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onFirstAudioReceived=r=>{var i;return(i=this.onFirstAudioReceived)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onFirstVideoReceived=r=>{var i;return(i=this.onFirstVideoReceived)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onFirstAudioDecoded=r=>{var i;return(i=this.onFirstAudioDecoded)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onFirstVideoDecoded=(r,i,s)=>{var l;return(l=this.onFirstVideoDecoded)===null||l===void 0?void 0:l.call(this,r,i,s)},this._p2pConnection.onFirstVideoDecodedTimeout=r=>{var i;return(i=this.onFirstVideoDecodedTimeout)===null||i===void 0?void 0:i.call(this,r)},this._p2pConnection.onSelectedLocalCandidateChanged=(r,i)=>{var s;return(s=this.onSelectedLocalCandidateChanged)===null||s===void 0?void 0:s.call(this,r,i)},this._p2pConnection.onSelectedRemoteCandidateChanged=(r,i)=>{var s;return(s=this.onSelectedRemoteCandidateChanged)===null||s===void 0?void 0:s.call(this,r,i)}}closeSignal(){this.dataChannel.close(),this.peerConnection.close()}unbindConnectionEvents(r){r.onConnectionStateChange=void 0,r.onICEConnectionStateChange=void 0,r.onICETransportStateChange=void 0,r.onDTLSTransportStateChange=void 0,r.onDTLSTransportError=void 0,r.onFirstAudioDecoded=void 0,r.onFirstAudioReceived=void 0,r.onFirstVideoDecoded=void 0,r.onFirstVideoReceived=void 0,r.onSelectedLocalCandidateChanged=void 0,r.onSelectedRemoteCandidateChanged=void 0,r.onFirstVideoDecodedTimeout=void 0}setConfiguration(r){this._p2pConnection.setConfiguration(r)}}).prototype,"connect",[Pa],Object.getOwnPropertyDescriptor(un.prototype,"connect"),un.prototype),_e(un.prototype,"receive",[Pa],Object.getOwnPropertyDescriptor(un.prototype,"receive"),un.prototype),_e(un.prototype,"stopReceiving",[Pa],Object.getOwnPropertyDescriptor(un.prototype,"stopReceiving"),un.prototype),_e(un.prototype,"muteRemote",[Pa],Object.getOwnPropertyDescriptor(un.prototype,"muteRemote"),un.prototype),_e(un.prototype,"unmuteRemote",[Pa],Object.getOwnPropertyDescriptor(un.prototype,"unmuteRemote"),un.prototype),_e(un.prototype,"muteLocal",[Pa],Object.getOwnPropertyDescriptor(un.prototype,"muteLocal"),un.prototype),_e(un.prototype,"unmuteLocal",[Pa],Object.getOwnPropertyDescriptor(un.prototype,"unmuteLocal"),un.prototype),_e(un.prototype,"close",[Pa],Object.getOwnPropertyDescriptor(un.prototype,"close"),un.prototype),_e(un.prototype,"updateEncoderConfig",[Pa],Object.getOwnPropertyDescriptor(un.prototype,"updateEncoderConfig"),un.prototype),_e(un.prototype,"updateSendParameters",[Pa],Object.getOwnPropertyDescriptor(un.prototype,"updateSendParameters"),un.prototype),_e(un.prototype,"replaceTrack",[Pa],Object.getOwnPropertyDescriptor(un.prototype,"replaceTrack"),un.prototype),_e(un.prototype,"getRemoteSSRC",[Pa],Object.getOwnPropertyDescriptor(un.prototype,"getRemoteSSRC"),un.prototype),un);function Pa(n,r,i){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,h=await l.lock("From DataChannelConnection.".concat(r));try{for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];return await s.apply(this,v)}finally{h()}},i}var Mt;function $L(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function Zc(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?$L(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):$L(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function WL(n){var r,i,s,l=2;for(typeof Symbol<"u"&&(i=Jk,s=Symbol.iterator);l--;){if(i&&(r=n[i])!=null)return r.call(n);if(s&&(r=n[s])!=null)return new YC(r.call(n));i="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}function YC(n){function r(i){if(Object(i)!==i)return Pe.reject(new TypeError(i+" is not an object."));var s=i.done;return Pe.resolve(i.value).then(function(l){return{value:l,done:s}})}return(YC=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(i){var s=this.s.return;return s===void 0?Pe.resolve({value:i,done:!0}):r(s.apply(this.s,arguments))},throw:function(i){var s=this.s.return;return s===void 0?Pe.reject(i):r(s.apply(this.s,arguments))}},new YC(n)}let Rq=(_e((Mt=class extends xn{get state(){return this._state}set state(n){const r=this._state;this._state=n,this.emit(wt.StateChange,r,this._state)}constructor(n,r){super(),w(this,"store",void 0),w(this,"statsUploader",void 0),w(this,"connection",void 0),w(this,"localTrackMap",new Map),w(this,"remoteUserMap",new Map),w(this,"pendingLocalTracks",[]),w(this,"pendingRemoteTracks",[]),w(this,"statsCollector",void 0),w(this,"isPlanB",!1),w(this,"shouldForwardP2PCreation",void 0),w(this,"iceFailedCount",0),w(this,"dtlsFailedCount",0),w(this,"mutex",new Ri("P2PChannel-mutex")),w(this,"_state",vr.Disconnected),w(this,"_pcStatsUploadType",ne("NEW_ICE_RESTART")?Za.FIRST_CONNECTION:Za.OLD_FIRST_CONNECTION),w(this,"_isInRestartIce",!1),w(this,"_isStartRestartIce",!1),w(this,"_restartStates",["disconnected","failed"]),w(this,"_restartTimer",void 0),w(this,"_isFirstConnected",!0),w(this,"handleMuteLocalTrack",async(i,s,l)=>{const h=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==vr.Connected)return void l(new X(j.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const p=this.filterTobeMutedTracks(i);if(p.length===0)return void s();const v=p.find(T=>T[0]==="videoLowTrack");v&&v[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(p.map(T=>{let[,{id:y}]=T;return y}));const E=this.createMuteMessage(p);await Fn(this,wt.RequestMuteLocal,E),s()}catch(p){l(p)}finally{h()}}),w(this,"handleUnmuteLocalTrack",async(i,s,l)=>{const h=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==vr.Connected)return void l(new X(j.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const p=this.filterTobeUnmutedTracks(i);if(p.length===0)return void s();const v=p.find(T=>T[0]==="videoLowTrack");if(v){const T=v[1];if(T.track._originMediaStreamTrack.stop(),Xn().supportDualStreamEncoding){const y=i._mediaStreamTrack.clone();T.track._mediaStreamTrack=y,T.track._originMediaStreamTrack=y}else{const y=TL(i,iu(this,wt.RequestLowStreamParameter));T.track._mediaStreamTrack=y,T.track._originMediaStreamTrack=y}await new Pe((y,R)=>{this.handleReplaceTrack(T.track,y,R,!0)})}await this.connection.unmuteLocal(p.map(T=>{let[,{id:y}]=T;return y}));const E=this.createUnmuteMessage(p);await Fn(this,wt.RequestUnmuteLocal,E),s()}catch(p){l(p)}finally{h()}}),w(this,"handleUpdateVideoEncoder",async(i,s,l)=>{const h=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const p=this.localTrackMap.get(ke.LocalVideoTrack);if(!this.connection||!p||p.track!==i||this.state!==vr.Connected)return void s();const{id:v,track:E}=p;await this.connection.updateSendParameters(v,E),await this.connection.updateEncoderConfig(v,E),this.emit(wt.UpdateVideoEncoder,E),s()}catch(p){l(p)}finally{h()}}),w(this,"handleSetOptimizationMode",async(i,s,l)=>{const h=await this.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const p=this.localTrackMap.get(ke.LocalVideoTrack);if(!this.connection||!p||p.track!==i||this.state!==vr.Connected)return;const{id:v,track:E}=p;await this.connection.updateSendParameters(v,E),s()}catch(p){l(p)}finally{h()}}),w(this,"handleReplaceTrack",async(i,s,l,h)=>{let p;M.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(i.getTrackId(),"]")),typeof h=="boolean"&&h||(p=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var v;const T=Array.from(this.localTrackMap.entries()).find(y=>{let[,{track:R}]=y;return i===R});if(!this.connection||!T||this.state!==vr.Connected)return void s();if(await((v=this.connection)===null||v===void 0?void 0:v.replaceTrack(i,T[1].id)),this.isPlanB){const y=T[1];y.id=i._mediaStreamTrack.id,this.localTrackMap.set(T[0],y)}if(T[0]===ke.LocalVideoTrack&&Xn().supportDualStreamEncoding){const y=this.localTrackMap.get(ke.LocalVideoLowTrack);if(y){const R=i._mediaStreamTrack.clone();y.track._originMediaStreamTrack.stop(),y.track._mediaStreamTrack=R,y.track._originMediaStreamTrack=R,await new Pe((k,V)=>{this.handleReplaceTrack(y.track,k,V,!0)})}}s()}catch(T){l(T)}finally{var E;(E=p)===null||E===void 0||E()}}),w(this,"handleGetLocalVideoStats",i=>{i(this.statsCollector.getLocalVideoTrackStats())}),w(this,"handleGetLocalAudioStats",i=>{i(this.statsCollector.getLocalAudioTrackStats())}),w(this,"handleGetRemoteVideoStats",i=>this.statsCollector.getRemoteVideoTrackStats(i.uid)[i.uid]),w(this,"handleGetRemoteAudioStats",i=>this.statsCollector.getRemoteAudioTrackStats(i.uid)[i.uid]),this.store=n,this.statsCollector=r,this.statsCollector.addP2PChannel(this),this.statsUploader=new Cq,this.bindStatsUploaderEvents(),this.isPlanB=!Xn().supportUnifiedPlan||ne("CHROME_FORCE_PLAN_B")&&Yl(),this.shouldForwardP2PCreation=ne("FORWARD_P2P_CREATION")&&Xn().supportPCSetConfiguration,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new Qc({},this.store):this.isPlanB?new Ip({},this.store):new ac({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(n,r){var i;this.state=vr.New;const s=this.shouldForwardP2PCreation&&((i=this.connection)===null||i===void 0?void 0:i.peerConnectionState)==="closed";if(this.shouldForwardP2PCreation&&!s||(s&&this.connection&&(M.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.store.useDataChannel?new Qc(n,this.store):this.isPlanB?new Ip(n,this.store):new ac(n,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new X(j.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=ne("NEW_ICE_RESTART")?Za.FIRST_CONNECTION:Za.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(n),this.connection.establishPromise}async connect(n,r,i,s,l,h){if(!this.connection)throw new X(j.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.connection instanceof Qc?this.connection.updateRemoteConnect(s):(this.store.peerConnectionStart(),await this.connection.connect(n,r,i,s,l,h),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=vr.Connected)}async preConnect(n,r,i,s,l,h){if(!this.connection)throw new X(j.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.store.peerConnectionStart();const p=await this.connection.connect(n,r,i,s,l,h);return this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=vr.Connected,p}getEstablishParams(){if(this.connection instanceof Qc)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")}publish(n,r,i){var s=this;return Aa(function*(){const l=yield yt(s.mutex.lock("From P2PChannel.publish"));try{if(!s.connection||s.state!==vr.Connected){if(s.state===vr.Disconnected)throw new X(j.UNEXPECTED_ERROR,"PeerConnection already disconnected.");s.throwIfTrackTypeNotMatch(n);const p=n.filter(v=>s.pendingLocalTracks.indexOf(v)===-1);return void(s.pendingLocalTracks=s.pendingLocalTracks.concat(p))}s.store.pubId=s.store.pubId+1,Xo.markPublishStart(s.store.clientId,s.store.pubId);const h=s.filterTobePublishedTracks(n,r,i);if(h.length===0)return void(yield yt(s.tryToUnmuteAudio(n)));yield*L0(WL(s.doPublish(s.connection,h)),yt)}finally{l()}})()}doPublish(n,r){var i=this;return Aa(function*(){r.forEach(T=>{let{track:y,type:R}=T;const k=Date.now();i.store.publish(y.getTrackId(),R===ke.LocalAudioTrack?"audio":"video",k)}),i.bindLocalTrackEvents(r);const s=yield yt(n.send(r.map(T=>{let{track:y}=T;return y}),i.store.codec,i.store.audioCodec)),l=(yield yt(s.next())).value,h=i.createGatewayPublishMessage(r,l);let p;try{p=yield h}catch(T){throw s.throw(T),(T==null?void 0:T.code)===j.WS_ABORT&&r.forEach(y=>{let{track:R}=y;i.pendingLocalTracks.indexOf(R)===-1&&i.pendingLocalTracks.push(R)}),i.unbindLocalTrackEvents(r),T}const v=i.mapPubResToRemoteConfig(h,p),E=(yield yt(s.next(v))).value;r.forEach(T=>{let{type:y}=T;i.statsCollector.addLocalStats(y)}),i.assignLocalTracks(r,E),i.statsUploader.startUploadUplinkStats(),r.forEach(T=>{let{track:y,type:R}=T;const k=Date.now();i.store.publish(y.getTrackId(),R===ke.LocalAudioTrack?"audio":"video",void 0,k)})})()}publishLowStream(n){var r=this;return Aa(function*(){if(!r.connection||r.state!==vr.Connected)return;const i=yield yt(r.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const l=r.localTrackMap.get(ke.LocalVideoTrack);if(!l)throw new X(j.UNEXPECTED_ERROR,"Could not find high stream");if(r.localTrackMap.has(ke.LocalVideoLowTrack))throw new X(j.UNEXPECTED_ERROR,"[".concat(r.store.clientId,"] Can't publish low stream when stream already publish"));const h=[{track:r.getLowVideoTrack(l.track,n),type:ke.LocalVideoLowTrack}];if(yield*L0(WL(r.doPublish(r.connection,h)),yt),l.track.muted||!l.track.enabled){var s;const p=(s=r.localTrackMap.get(ke.LocalVideoLowTrack))===null||s===void 0?void 0:s.id;p!==void 0&&(yield yt(r.connection.muteLocal([p])))}}finally{i()}})()}async republish(){this.pendingLocalTracks.length>0&&(M.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await ti(this,wt.RequestRePublish,this.pendingLocalTracks),this.emit(wt.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async reSubscribe(n){for(let r=this.pendingRemoteTracks.length-1;r>=0;r--){const{user:i,kind:s}=this.pendingRemoteTracks[r];(s!==st.AUDIO||i._audio_added_&&i._audioSSRC)&&(s!==st.VIDEO||i._video_added_&&i._videoSSRC)||this.pendingRemoteTracks.splice(r,1)}if(n)await ti(this,wt.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:r,kind:i}of this.pendingRemoteTracks)await this.subscribe(r,i,i===st.VIDEO?r._videoSSRC:r._audioSSRC);this.pendingRemoteTracks.forEach(r=>{let{user:i}=r;this.emit(wt.MediaReconnectEnd,i.uid)}),this.pendingRemoteTracks=[]}async unpublish(n){if(!this.connection||this.state!==vr.Connected)return void n.forEach(s=>{const l=this.pendingLocalTracks.indexOf(s);l!==-1&&this.pendingLocalTracks.splice(l,1)});const r=this.filterTobeUnpublishedTracks(n);if(r.length===0)return;const i=r.find(s=>s[0]==="videoLowTrack");return i&&i[1].track.close(),this.doUnpublish(this.connection,r)}async unpublishLowStream(){if(!this.connection||this.state!==vr.Connected)return;const n=this.localTrackMap.get(ke.LocalVideoLowTrack);if(!n)return;n.track.close();const r=[[ke.LocalVideoLowTrack,n]];return this.doUnpublish(this.connection,r)}async doUnpublish(n,r){const i=this.createGatewayUnpublishMessage(r);return await n.stopSending(r.map(s=>{let[,{id:l}]=s;return l})),this.withdrawLocalTracks(r),this.unbindLocalTrackEvents(r.map(s=>{let[l,{track:h}]=s;return{type:l,track:h}})),r.forEach(s=>{let[l]=s;this.statsCollector.removeLocalStats(l)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadUplinkStats(),i}async subscribe(n,r,i,s,l){var h;if(!this.connection||this.state!==vr.Connected)throw new X(j.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if((h=this.remoteUserMap.get(n))!==null&&h!==void 0&&h.has(r))return;let p,v,E;if(l){const R=l.find(V=>{let{stream_type:$}=V;return $===r});if(!R)throw new X(j.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(r," for user: ").concat(n.uid," because subscribe answer from gateway does not contain stream_type: ").concat(r,"."));const k=await this.connection.receive(r,R.ssrcs,String(n._uintid),R.attributes);this.connection instanceof ac&&(E=k.transceiver),p=k.track,v=k.id}else{const R=await this.connection.receive(r,[{ssrcId:i,rtx:s}],String(n._uintid),void 0);this.connection instanceof ac&&(E=R.transceiver),p=R.track,v=R.id}r===st.AUDIO?(n._audioTrack?n._audioTrack._updateOriginMediaStreamTrack(p):(n._audioTrack=new j0(p,n.uid,n._uintid,this.store),M.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(n._audioTrack.getTrackId()))),E&&n._audioTrack._updateRtpTransceiver(E),this.bindRemoteTrackEvents(n,n._audioTrack)):(n._videoTrack?n._videoTrack._updateOriginMediaStreamTrack(p):(n._videoTrack=new B0(p,n.uid,n._uintid,this.store),M.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(n._videoTrack.getTrackId()))),E&&n._videoTrack._updateRtpTransceiver(E),this.bindRemoteTrackEvents(n,n._videoTrack));const T=this.remoteUserMap.get(n);T?T.set(r,v):this.remoteUserMap.set(n,new Map([[r,v]])),this.statsCollector.addRemoteStats(n.uid),this.statsUploader.startUploadDownlinkStats();const y=this.pendingRemoteTracks.findIndex(R=>{let{user:k,kind:V}=R;return k.uid===n.uid&&r===V});y!==-1&&(this.pendingRemoteTracks.splice(y,1),this.emit(wt.MediaReconnectEnd,n.uid))}async massSubscribe(n){return this.massSubscribeNoLock(n)}async massSubscribeNoLock(n){if(!this.connection||this.state!==vr.Connected)throw new X(j.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");n=n.filter(i=>{var s;let{user:l,mediaType:h}=i;return!((s=this.remoteUserMap.get(l))!==null&&s!==void 0&&s.has(h))});const r=await this.connection.batchReceive(n.map(i=>{let{user:s,mediaType:l,ssrcId:h,rtxSsrcId:p}=i;return{kind:l,ssrcMsg:[{ssrcId:h,rtx:p}],mslabel:String(s._uintid)}}));n.forEach((i,s)=>{let{user:l,mediaType:h}=i;const{track:p,id:v,transceiver:E}=r[s];h===st.AUDIO?(l._audioTrack?l._audioTrack._updateOriginMediaStreamTrack(p):(l._audioTrack=new j0(p,l.uid,l._uintid,this.store),M.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(l._audioTrack.getTrackId()))),E&&l._audioTrack._updateRtpTransceiver(E),this.bindRemoteTrackEvents(l,l._audioTrack)):(l._videoTrack?l._videoTrack._updateOriginMediaStreamTrack(p):(l._videoTrack=new B0(p,l.uid,l._uintid,this.store),M.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(l._videoTrack.getTrackId()))),E&&l._videoTrack._updateRtpTransceiver(E),this.bindRemoteTrackEvents(l,l._videoTrack));const T=this.remoteUserMap.get(l);T?T.set(h,v):this.remoteUserMap.set(l,new Map([[h,v]])),this.statsCollector.addRemoteStats(l.uid),this.statsUploader.startUploadDownlinkStats();const y=this.pendingRemoteTracks.findIndex(R=>{let{user:k,kind:V}=R;return k.uid===l.uid&&h===V});y!==-1&&(this.pendingRemoteTracks.splice(y,1),this.emit(wt.MediaReconnectEnd,l.uid))})}async unsubscribe(n,r,i){const s=this.pendingRemoteTracks.filter(p=>{let{user:v,kind:E}=p;return r!==void 0?v.uid===n.uid&&r===E:v.uid===n.uid});if(s.forEach(p=>{const v=this.pendingRemoteTracks.indexOf(p);this.pendingRemoteTracks.splice(v,1)}),this.connection&&this.state===vr.Connected||i||s.forEach(p=>{let{kind:v}=p;var E;if(v===st.AUDIO)(E=n._audioTrack)===null||E===void 0||E._destroy(),n._audioTrack=void 0;else if(v===st.VIDEO){var T;(T=n._videoTrack)===null||T===void 0||T._destroy(),n._videoTrack=void 0}}),!this.connection||this.state!==vr.Connected)return;const l=this.filterTobeUnSubscribedTracks(n,r);if(l.length===0)return;await this.connection.stopReceiving(l.map(p=>{let[,{id:v}]=p;return v}));const h=this.createUnsubscribeMessage(l);return this.withdrawRemoteTracks(l),this.remoteUserMap.size===0&&this.statsUploader.stopUploadDownlinkStats(),l.forEach(p=>{let[v,{kind:E}]=p;var T,y;if(E===st.VIDEO&&v._videoSSRC&&((T=this.connection)===null||T===void 0||T.setStatsRemoteVideoIsReady(v._videoSSRC,!1)),E===st.VIDEO)this.unbindRemoteTrackEvents(v._videoTrack),i||((y=v._videoTrack)===null||y===void 0||y._destroy(),v._videoTrack=void 0);else if(E===st.AUDIO){var R;this.unbindRemoteTrackEvents(v._audioTrack),!i&&((R=v._audioTrack)===null||R===void 0||R._destroy(),v._audioTrack=void 0)}}),h}async massUnsubscribe(n){return this.massUnsubscribeNoLock(n)}async massUnsubscribeNoLock(n){let r=[];for(const{user:l,mediaType:h}of n){const p=this.pendingRemoteTracks.filter(v=>{let{user:E,kind:T}=v;return h!==void 0?E.uid===l.uid&&h===T:E.uid===l.uid});p.forEach(v=>{const E=this.pendingRemoteTracks.indexOf(v);this.pendingRemoteTracks.splice(E,1)}),r=r.concat(p)}if(!this.connection||this.state!==vr.Connected)return void r.forEach(l=>{let{user:h,kind:p}=l;var v;if(p===st.AUDIO)(v=h._audioTrack)===null||v===void 0||v._destroy(),h._audioTrack=void 0;else if(p===st.VIDEO){var E;(E=h._videoTrack)===null||E===void 0||E._destroy(),h._videoTrack=void 0}});const i=Mc(n).call(n,(l,h)=>{let{user:p,mediaType:v}=h;const E=this.filterTobeUnSubscribedTracks(p,v);return l.concat(E)},[]);if(i.length===0)return;await this.connection.stopReceiving(i.map(l=>{let[,{id:h}]=l;return h}));const s=this.createUnsubscribeAllMessage(i);return this.withdrawRemoteTracks(i),this.remoteUserMap.size===0&&this.statsUploader.stopUploadDownlinkStats(),i.forEach(l=>{let[h,{kind:p}]=l;var v,E;if(p===st.VIDEO&&h._videoSSRC&&((v=this.connection)===null||v===void 0||v.setStatsRemoteVideoIsReady(h._videoSSRC,!1)),p===st.VIDEO)this.unbindRemoteTrackEvents(h._videoTrack),(E=h._videoTrack)===null||E===void 0||E._destroy(),h._videoTrack=void 0;else if(p===st.AUDIO){var T;this.unbindRemoteTrackEvents(h._audioTrack),(T=h._audioTrack)===null||T===void 0||T._destroy(),h._audioTrack=void 0}}),s}async muteRemote(n,r){if(!this.connection)return;const i=this.remoteUserMap.get(n);if(!i)return void M.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(n.uid,"."));if(!i.get(r))return void M.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(n.uid," media type ").concat(r,"."));const s=r===st.VIDEO?n._videoSSRC:n._audioSSRC;s!==void 0&&this.connection.setStatsRemoteVideoIsReady(s,!1)}async unmuteRemote(n,r){return this.unmuteRemoteNoLock(n,r)}async unmuteRemoteNoLock(n,r){if(!this.connection)return;const i=this.remoteUserMap.get(n);if(!i)return void M.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(n.uid,"."));i.get(r)||M.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(n.uid," media type ").concat(r,"."))}getAllTracks(n){const r=this.localTrackMap.get(ke.LocalAudioTrack);if((r==null?void 0:r.track)instanceof Xi){const i=r.track;return Array.from(this.localTrackMap.entries()).filter(s=>{let[l]=s;return l!==ke.LocalAudioTrack}).filter(s=>{let[l]=s;return!(n&&l===ke.LocalVideoLowTrack)}).map(s=>{let[,{track:l}]=s;return l}).concat(i.trackList)}return Array.from(this.localTrackMap.entries()).filter(i=>{let[s]=i;return!(n&&s===ke.LocalVideoLowTrack)}).map(i=>{let[,{track:s}]=i;return s})}reportPublishEvent(n,r,i,s,l){if(n){const p=this.localTrackMap.get(ke.LocalAudioTrack),v=s?this.localTrackMap.get(ke.LocalVideoLowTrack):this.localTrackMap.get(ke.LocalVideoTrack);Me.publish(this.store.sessionId,{eventElapse:Xo.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:r,audioName:p==null?void 0:p.track.getTrackLabel(),videoName:v==null?void 0:v.track.getTrackLabel(),screenshare:(v==null?void 0:v.track._hints.indexOf(gr.SCREEN_TRACK))!==-1,audio:!!p,video:!!v,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}else{var h;i||(i=[]);const p=i.find(E=>E instanceof Zr),v=s?(h=this.localTrackMap.get(ke.LocalVideoTrack))===null||h===void 0?void 0:h.track:i.find(E=>E instanceof ar);Me.publish(this.store.sessionId,{eventElapse:Xo.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:n,ec:r,audioName:p==null?void 0:p.getTrackLabel(),videoName:v==null?void 0:v.getTrackLabel(),screenshare:(v==null?void 0:v._hints.indexOf(gr.SCREEN_TRACK))!==-1,audio:!!p,video:!!v,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:l})}}reportSubscribeEvent(n,r,i,s){const l=s===st.VIDEO?i._videoSSRC:i._audioSSRC;l&&Me.subscribe(this.store.sessionId,{succ:n,ec:r,video:s===st.VIDEO,audio:s===st.AUDIO,peerid:i.uid,subscribeRequestid:s===st.VIDEO?i._videoSSRC:i._audioSSRC,p2pid:this.store.p2pId,eventElapse:Xo.measureFromSubscribeStart(this.store.clientId,l)})}reset(){M.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new Ri("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new Qc({},this.store):this.isPlanB?new Ip({},this.store):new ac({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const n=this.localTrackMap.get(ke.LocalAudioTrack);if((n==null?void 0:n.track)instanceof Xi){if(n.track.trackList.length>0){const r=n.track;n.track.trackList.forEach(i=>{r.removeAudioTrack(i)})}n.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=vr.Disconnected}getStats(){var n;return(n=this.connection)===null||n===void 0?void 0:n.getStats()}getRemoteVideoIsReady(n){var r;return((r=this.connection)===null||r===void 0?void 0:r.getRemoteVideoIsReady(n))||!1}getLocalAudioVolume(){const n=this.localTrackMap.get(ke.LocalAudioTrack);if(n)return n.track.getVolumeLevel()}getLocalVideoSize(){const n=this.localTrackMap.get(ke.LocalVideoTrack);if(n)return{width:n.track._videoWidth||0,height:n.track._videoHeight||0}}getEncoderConfig(n){const r=this.localTrackMap.get(n);return r&&r.track instanceof ar||r&&r.track instanceof Zr?r.track._encoderConfig:void 0}getLocalMedia(n){return this.localTrackMap.get(n)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(n,r){if(!n)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(n);return!!i&&(!r||i.has(r))}async hasRemoteMediaWithLock(n,r){if(!n)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(n);return!!i&&(!r||i.has(r))}getRemoteMedia(n){var r;const i=Array.from(eu(r=this.remoteUserMap).call(r)).find(s=>s.uid===n);return i?{audioTrack:i.audioTrack,audioSSRC:i._audioSSRC,videoTrack:i.videoTrack,videoSSRC:i._videoSSRC}:{}}getAudioLevels(){let n=Array.from(this.remoteUserMap.entries()).map(i=>{let[s]=i;return{uid:s.uid,level:s.audioTrack?100*s.audioTrack._source.getAccurateVolumeLevel():0}});const r=this.localTrackMap.get(ke.LocalAudioTrack);return r&&n.push({level:100*r.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),n=Dy(n).call(n,(i,s)=>i.level-s.level),n}async disconnectForReconnect(){this.connection&&(M.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=vr.Reconnecting,ne("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r]=n;var i;r._videoTrack&&r._videoTrack._player&&((i=r._videoTrack._player.getVideoElement())===null||i===void 0||i.pause(),r._videoTrack._player.isKeepLastFrame=!0,r._videoTrack._originMediaStreamTrack.stop())}),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new Qc({},this.store):this.isPlanB?new Ip({},this.store):new ac({},this.store),this.bindConnectionEvents(this.connection)),this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(n=>{let[r,{track:i}]=n;switch(r){case ke.LocalVideoTrack:i._hints.includes(gr.LOW_STREAM)?i.close():this.pendingLocalTracks.push(i);break;case ke.LocalAudioTrack:i instanceof Xi?this.pendingLocalTracks=this.pendingLocalTracks.concat(i.trackList):this.pendingLocalTracks.push(i);break;case ke.LocalVideoLowTrack:}}),this.emit(wt.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r,i]=n;Array.from(eu(i).call(i)).forEach(s=>{this.setPendingRemoteMedia(r,s)}),this.emit(wt.MediaReconnectStart,r.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),M.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(n,r){for(const i of this.pendingRemoteTracks){const{user:s,kind:l}=i;if((n instanceof SC?n.uid:n)===s.uid&&r===l)return!0}return!1}setPendingRemoteMedia(n,r){this.hasPendingRemoteMedia(n,r)||this.pendingRemoteTracks.push({user:n,kind:r})}restartICE(n){var r=this;return Aa(function*(){if(!r.connection||r.state!==vr.Connected||r.connection instanceof Qc)return;const i=yield yt(r.mutex.lock("From P2PChannel.restartICE"));let s;try{s=yield yt(r.connection.restartICE(n));const h=yield yt(s.next());if(h.done)return;const p=h.value,v=yield p;switch(r.reportPCDisconnectedOrFailed(n),n){case jr.TCP:r._pcStatsUploadType=Za.TCP_RESTART;break;case jr.RELAY:r._pcStatsUploadType=Za.RELAY_RESTART;break;default:r._pcStatsUploadType=Za.OLD_RESTART}r._isInRestartIce=!0,s.next(v)}catch(h){var l;(l=s)===null||l===void 0||l.throw(h)}finally{i()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats(),r=this.localTrackMap.get(ke.LocalVideoTrack),i=this.localTrackMap.get(ke.LocalAudioTrack),s=n.videoSend.find(V=>V.ssrc===(r==null?void 0:r.ssrcs[0].ssrcId)),l=n.audioSend.find(V=>V.ssrc===(i==null?void 0:i.ssrcs[0].ssrcId));if(!s||!l)return 1;const h=Oa(this,wt.NeedSignalRTT),p=s?s.rttMs:void 0,v=l?l.rttMs:void 0,E=p&&v?(p+v)/2:p||v,T=(E&&h?(E+h)/2:E||h)||0,y=100*n.sendPacketLossRate*.7/50+.3*T/1500,R=y<.17?1:y<.36?2:y<.59?3:y<.1?4:5,k=r==null?void 0:r.track;if(k&&k._encoderConfig&&k._hints.indexOf(gr.SCREEN_TRACK)===-1){const V=k._encoderConfig.bitrateMax,$=n.bitrate.actualEncoded;if(V&&$){const W=(1e3*V-$)/(1e3*V);return t9[W<.15?0:W<.3?1:W<.45?2:W<.6?3:4][R]}}return R}getDownlinkNetworkQuality(){if(!this.connection)return 0;const n=this.connection.getStats();let r=0;return Array.from(this.remoteUserMap.entries()).forEach(i=>{let[s]=i;const l=s._audioSSRC,h=s._videoSSRC,p=n.audioRecv.find($=>$.ssrc===l),v=n.videoRecv.find($=>$.ssrc===h);if(!p&&!v)return void(r+=1);const E=Oa(this,wt.NeedSignalRTT),T=n.rtt,y=(T&&E?(T+E)/2:T||E)||0,R=p?p.jitterMs:void 0,k=n.recvPacketLossRate;let V=.7*k*100/50+.3*y/1500;R&&(V=.6*k*100/50+.2*y/1500+.2*R/400),r+=V<.1?1:V<.17?2:V<.36?3:V<.59?4:5}),this.remoteUserMap.size>0?Math.round(r/this.remoteUserMap.size):r}async muteLocalTrack(n){return new Pe((r,i)=>{this.handleMuteLocalTrack(n,r,i)})}filterTobePublishedTracks(n,r,i){const s=[],l=Xn(),h=this.getAllTracks();n=eD(n=n.filter(E=>h.indexOf(E)===-1));let p=!1,v=!1;for(const E of n){if(E instanceof ar&&(this.localTrackMap.has(ke.LocalVideoTrack)||p?new X(j.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(s.push({track:E,type:ke.LocalVideoTrack}),p=!0),r)){const T=this.getLowVideoTrack(E,i);s.push({track:T,type:ke.LocalVideoLowTrack})}if(E instanceof Zr){const T=this.localTrackMap.get(ke.LocalAudioTrack);if(T){if(!(T.track instanceof Xi))throw new X(j.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(E._bypassWebAudio)throw new X(j.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");T.track.addAudioTrack(E),this.bindLocalAudioTrackEvents(E,!0)}else if(v){const y=s.find(R=>{let{type:k}=R;return k===ke.LocalAudioTrack});if(!(y.track instanceof Xi))throw new X(j.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(E._bypassWebAudio)throw new X(j.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");y.track.addAudioTrack(E)}else{if(!l.webAudioMediaStreamDest||E instanceof Xi||E._bypassWebAudio)s.push({track:E,type:ke.LocalAudioTrack});else{const y=new Xi;y.addAudioTrack(E),s.push({track:y,type:ke.LocalAudioTrack})}v=!0}}}return s}filterTobeUnpublishedTracks(n){const r=[],i=this.getAllTracks();n=eD(n=n.filter(s=>i.indexOf(s)!==-1));for(const s of n){if(s instanceof Zr){const l=this.localTrackMap.get(ke.LocalAudioTrack);if(!l)continue;l.track instanceof Xi?(l.track.removeAudioTrack(s),this.unbindLocalAudioTrackEvents(s),l.track.trackList.length===0&&(r.push([ke.LocalAudioTrack,l]),l.track.close())):r.push([ke.LocalAudioTrack,l])}if(s instanceof ar){const l=this.localTrackMap.get(ke.LocalVideoTrack);if(!l)continue;r.push([ke.LocalVideoTrack,l]);const h=this.localTrackMap.get(ke.LocalVideoLowTrack);h&&r.push([ke.LocalVideoLowTrack,h])}}return r}bindLocalTrackEvents(n){n.forEach(r=>{let{track:i,type:s}=r;switch(s){case ke.LocalVideoTrack:i.addListener(Ze.GET_STATS,this.handleGetLocalVideoStats),i.addListener(Ze.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(Ze.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(Ze.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.addListener(Ze.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),i.addListener(Ze.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.addListener(Ze.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(Ze.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case ke.LocalAudioTrack:this.bindLocalAudioTrackEvents(i);break;case ke.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(n,r){n instanceof Xi?n.trackList.forEach(i=>{i.addListener(Ze.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.addListener(Ze.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.addListener(Ze.GET_STATS,this.handleGetLocalAudioStats),i.addListener(Ze.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.addListener(Ze.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.addListener(Ze.GET_STATS,this.handleGetLocalAudioStats),n.addListener(Ze.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.addListener(Ze.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.addListener(Ze.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.addListener(Ze.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),r||n.addListener(Ze.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(n){n||(n=Array.from(this.localTrackMap.entries()).map(r=>{let[i,{track:s}]=r;return{track:s,type:i}})),n.forEach(r=>{let{track:i,type:s}=r;switch(s){case ke.LocalVideoTrack:i.off(Ze.GET_STATS,this.handleGetLocalVideoStats),i.off(Ze.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),i.off(Ze.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),i.off(Ze.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),i.off(Ze.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),i.off(Ze.NEED_REPLACE_TRACK,this.handleReplaceTrack),i.off(Ze.NEED_MUTE_TRACK,this.handleMuteLocalTrack),i.off(Ze.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case ke.LocalAudioTrack:this.unbindLocalAudioTrackEvents(i);break;case ke.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(n){n instanceof Xi?n.trackList.forEach(r=>{r.off(Ze.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(Ze.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(Ze.GET_STATS,this.handleGetLocalAudioStats),r.off(Ze.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(Ze.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(n.off(Ze.GET_STATS,this.handleGetLocalAudioStats),n.off(Ze.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),n.off(Ze.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),n.off(Ze.NEED_REPLACE_TRACK,this.handleReplaceTrack),n.off(Ze.NEED_MUTE_TRACK,this.handleMuteLocalTrack),n.off(Ze.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(n,r){r instanceof B0&&r.addListener(Ze.GET_STATS,i=>{i(this.handleGetRemoteVideoStats(n))}),r instanceof j0&&r.addListener(Ze.GET_STATS,i=>{i(this.handleGetRemoteAudioStats(n))})}unbindRemoteTrackEvents(n){n&&n.removeAllListeners(Ze.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(n=>{let[r,i]=n;i.has(st.AUDIO)&&this.unbindRemoteTrackEvents(r._audioTrack),i.has(st.VIDEO)&&this.unbindRemoteTrackEvents(r._videoTrack)})}createGatewayPublishMessage(n,r){return n.map((i,s)=>{let l,h,{track:p,type:v}=i;switch(v){case ke.LocalAudioTrack:l=pr.Audio,h={dtx:p instanceof S0&&p._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case ke.LocalVideoTrack:l=p._hints.includes(gr.SCREEN_TRACK)?pr.Screen:pr.High,h=Zc(Zc({},Xx(p)),{},{codec:this.store.codec});break;case ke.LocalVideoLowTrack:l=pr.Low,h=Zc(Zc({},Xx(p)),{},{codec:this.store.codec})}return{stream_type:l,attributes:h,ssrcs:r[s]}})}createGatewayUnpublishMessage(n){return n.map(r=>{let i,[s,{track:l,ssrcs:h,id:p}]=r;switch(s){case ke.LocalVideoTrack:i=l._hints.includes(gr.SCREEN_TRACK)?pr.Screen:pr.High;break;case ke.LocalAudioTrack:i=pr.Audio;break;case ke.LocalVideoLowTrack:i=pr.Low}return{stream_type:i,ssrcs:h,mid:p}})}assignLocalTracks(n,r){n.forEach((i,s)=>{let{track:l,type:h}=i;this.localTrackMap.set(h,{track:l,id:r[s].id,ssrcs:r[s].localSSRC})})}withdrawLocalTracks(n){n.forEach(r=>{let[i]=r;this.localTrackMap.delete(i)})}bindConnectionEvents(n){n.onConnectionStateChange=async r=>{if(M.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(r,")")),this.emit(wt.PeerConnectionStateChange,r),r!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),r==="connected"&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),ne("NEW_ICE_RESTART")){if(this._restartStates.includes(r)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const i=h=>{(n.iceConnectionState==="disconnected"||n.iceConnectionState==="checking"||n.iceConnectionState==="failed")&&(M.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(h)),Oa(this,wt.QueryClientConnectionState)==="CONNECTED"&&this.emit(wt.RequestRestartICE,h))},s=()=>{n.iceConnectionState!=="disconnected"&&n.iceConnectionState!=="checking"&&n.iceConnectionState!=="failed"||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),M.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout(()=>this.emit(wt.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},l=ne("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout(()=>{if(ne("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&Xn().supportPCSetConfiguration)i(jr.RELAY),this._restartTimer=window.setTimeout(s,l);else if(Mn())i(jr.UDP),this._restartTimer=window.setTimeout(s,4e3);else{if(i(jr.TCP),Xn().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout(()=>{i(jr.RELAY),this._restartTimer=window.setTimeout(s,l)},l));this._restartTimer=window.setTimeout(s,l)}},800))}}else{if(r==="disconnected"&&n.iceConnectionState==="disconnected")return setTimeout(()=>{n.iceConnectionState==="disconnected"&&ne("ICE_RESTART")&&Oa(this,wt.QueryClientConnectionState)==="CONNECTED"&&this.emit(wt.RequestRestartICE)},800),void setTimeout(()=>{n.peerConnectionState==="disconnected"&&(M.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout(()=>this.emit(wt.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);r==="failed"&&(M.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout(()=>this.emit(wt.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())}},n.onICEConnectionStateChange=r=>{r!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),M.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(r,")")),Me.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:r,tag:On.TRACER}).onSuccess(),this.emit(wt.IceConnectionStateChange,r)},n.onICETransportStateChange=r=>{M.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(r,")"))},n.onDTLSTransportStateChange=r=>{M.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(r,")"))},n.onDTLSTransportError=r=>{M.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(r,")"))},n.onFirstAudioDecoded=r=>{var i;const s=Array.from(eu(i=this.remoteUserMap).call(i)).find(h=>h._audioSSRC===r);var l;s&&(this.store.subscribe(s.uid,"audio",void 0,void 0,void 0,Date.now()),(l=s.audioTrack)===null||l===void 0||l.emit(vd.FIRST_FRAME_DECODED),Me.firstRemoteFrame(this.store.sessionId,Br.FIRST_AUDIO_DECODE,Dn.FIRST_AUDIO_DECODE,{peer:s._uintid,subscribeElapse:Xo.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId}))},n.onFirstAudioReceived=r=>{var i;const s=Array.from(eu(i=this.remoteUserMap).call(i)).find(l=>l._audioSSRC===r);s&&Me.firstRemoteFrame(this.store.sessionId,Br.FIRST_AUDIO_RECEIVED,Dn.FIRST_AUDIO_RECEIVED,{peer:s._uintid,subscribeElapse:Xo.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId})},n.onFirstVideoDecoded=(r,i,s)=>{this.reportVideoFirstFrameDecoded(r,i,s)},n.onFirstVideoReceived=r=>{var i;const s=Array.from(eu(i=this.remoteUserMap).call(i)).find(l=>l._videoSSRC===r);s&&Me.firstRemoteFrame(this.store.sessionId,Br.FIRST_VIDEO_RECEIVED,Dn.FIRST_VIDEO_RECEIVED,{peer:s._uintid,subscribeElapse:Xo.measureFromSubscribeStart(this.store.clientId,r),subscribeRequestid:r,p2pid:this.store.p2pId})},n.onSelectedLocalCandidateChanged=(r,i)=>{const s=r.candidateType==="relay",l=i.candidateType==="relay";i.candidateType!=="unknown"&&s===l||this.emit(wt.ConnectionTypeChange,s),M.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(T0(i))," -> ").concat(JSON.stringify(T0(r)),")"))},n.onSelectedRemoteCandidateChanged=(r,i)=>{M.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(T0(i))," -> ").concat(JSON.stringify(T0(r)),")"))},n.onFirstVideoDecodedTimeout=r=>{this.reportVideoFirstFrameDecoded(r,void 0,void 0,!0)}}unbindConnectionEvents(n){n.onConnectionStateChange=void 0,n.onICEConnectionStateChange=void 0,n.onICETransportStateChange=void 0,n.onDTLSTransportStateChange=void 0,n.onDTLSTransportError=void 0,n.onFirstAudioDecoded=void 0,n.onFirstAudioReceived=void 0,n.onFirstVideoDecoded=void 0,n.onFirstVideoReceived=void 0,n.onSelectedLocalCandidateChanged=void 0,n.onSelectedRemoteCandidateChanged=void 0,n.onFirstVideoDecodedTimeout=void 0}filterTobeMutedTracks(n){const r=[];if(this.getAllTracks().indexOf(n)===-1)return r;const i=this.localTrackMap.get(ke.LocalAudioTrack);if(n instanceof Zr&&(i==null?void 0:i.track)instanceof Xi)return i.track.isActive||r.push([ke.LocalAudioTrack,i]),r;const s=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:h}]=l;return n===h});if(s&&(r.push(s),s[0]===ke.LocalVideoTrack)){const l=this.localTrackMap.get(ke.LocalVideoLowTrack);l&&r.push([ke.LocalVideoLowTrack,l])}return r}filterTobeUnmutedTracks(n){const r=[],i=this.localTrackMap.get(ke.LocalAudioTrack);if(n instanceof Zr&&(i==null?void 0:i.track)instanceof Xi)return i.track.isActive&&r.push([ke.LocalAudioTrack,i]),r;const s=Array.from(this.localTrackMap.entries()).find(l=>{let[,{track:h}]=l;return n===h});if(s)if(s[0]===ke.LocalVideoTrack){r.push(s);const l=this.localTrackMap.get(ke.LocalVideoLowTrack);l&&r.push([ke.LocalVideoLowTrack,l])}else r.push(s);return r}createMuteMessage(n){return n.map(r=>{let i,[s,{track:l,ssrcs:h,id:p}]=r;switch(s){case ke.LocalAudioTrack:i=pr.Audio;break;case ke.LocalVideoTrack:i=l._hints.includes(gr.SCREEN_TRACK)?pr.Screen:pr.High;break;case ke.LocalVideoLowTrack:i=pr.Low}return{stream_type:i,ssrcs:h,mid:p}})}createUnmuteMessage(n){return n.map(r=>{let i,[s,{track:l,ssrcs:h,id:p}]=r;switch(s){case ke.LocalAudioTrack:i=pr.Audio;break;case ke.LocalVideoTrack:i=l._hints.includes(gr.SCREEN_TRACK)?pr.Screen:pr.High;break;case ke.LocalVideoLowTrack:i=pr.Low}return{stream_type:i,ssrcs:h,mid:p}})}filterTobeUnSubscribedTracks(n,r){const i=[],s=this.remoteUserMap.get(n);if(!s)return i;if(r){const l=s.get(r);if(!l)return i;i.push([n,{kind:r,id:l}])}else Array.from(s.entries()).forEach(l=>{let[h,p]=l;i.push([n,{kind:h,id:p}])});return i}createUnsubscribeMessage(n){const r=[];return n.forEach(i=>{let[s,{kind:l,id:h}]=i;switch(l){case st.VIDEO:return void(s._videoSSRC&&r.push({stream_type:st.VIDEO,ssrcId:s._videoSSRC}));case st.AUDIO:return void(s._audioSSRC&&r.push({stream_type:st.AUDIO,ssrcId:s._audioSSRC}))}}),r}createUnsubscribeAllMessage(n){const r=new Map;return n.forEach(i=>{let[s,{kind:l}]=i;if(r.has(s)){let h=r.get(s);l===st.VIDEO?h|=rr.Video:h|=rr.Audio,r.set(s,h)}else l===st.VIDEO?r.set(s,rr.Video):r.set(s,rr.Audio)}),{users:Array.from(r.entries()).map(i=>{let[s,l]=i;return{stream_id:s.uid,stream_type:l}})}}withdrawRemoteTracks(n){n.forEach(r=>{let[i,{kind:s}]=r;const l=this.remoteUserMap.get(i);l&&(l.delete(s),Array.from(l.entries()).length===0&&this.remoteUserMap.delete(i))})}async updateBitrateLimit(n){const r=this.localTrackMap.get(ke.LocalVideoTrack),i=this.localTrackMap.get(ke.LocalVideoLowTrack);r&&await r.track.setBitrateLimit(n.uplink),i&&n.low_stream_uplink&&await i.track.setBitrateLimit({max_bitrate:n.low_stream_uplink.bitrate,min_bitrate:n.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}mapPubResToRemoteConfig(n,r){return n.map((i,s)=>{var l;let{stream_type:h}=i;return(l=r.find(p=>{let{stream_type:v}=p;return h===v}))===null||l===void 0?void 0:l.attributes})}async tryToUnmuteAudio(n){for(let i=0;i<n.length;i++)if(n[i]instanceof Zr){var r;const s=this.filterTobeUnmutedTracks(n[i]);if(s.length===0)continue;await((r=this.connection)===null||r===void 0?void 0:r.unmuteLocal(s.map(h=>{let[,{id:p}]=h;return p})));const l=this.createUnmuteMessage(s);return void await Fn(this,wt.RequestUnmuteLocal,l)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=n=>{var r;return!((r=this.connection)===null||r===void 0||!r.getRemoteVideoIsReady(n))},this.statsUploader.requestUpload=(n,r)=>this.emit(wt.RequestUploadStats,n,r),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await ei(Ty(this.dtlsFailedCount,tr)),this.emit(wt.RequestReconnect)}async reconnectP2P(){const n=Array.from(this.localTrackMap.entries()),r=this.createGatewayUnpublishMessage(n);Array.from(this.remoteUserMap.entries()),r.length>0&&await ti(this,wt.RequestUnpublishForReconnectPC,r),this.disconnectForReconnect(),this.emit(wt.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(ke.LocalVideoTrack)||this.pendingLocalTracks.some(n=>n instanceof ar)}throwIfTrackTypeNotMatch(n){if(n.filter(r=>r instanceof ar).length>1)throw new X(j.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(n.filter(r=>r instanceof Zr).length>1&&(n.some(r=>r instanceof Zr&&r._bypassWebAudio)||!Xn().webAudioMediaStreamDest))throw new X(j.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const r of n){if(r instanceof ar&&this.pendingLocalTracks.some(i=>i instanceof ar))throw new X(j.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(r instanceof Zr&&this.pendingLocalTracks.some(i=>i instanceof Zr)&&(!Xn().webAudioMediaStreamDest||r._bypassWebAudio||this.pendingLocalTracks.some(i=>i instanceof Zr&&i._bypassWebAudio)))throw new X(j.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(n,r){const i=Xn().supportDualStreamEncoding,s=Zc(Zc({},{width:160,height:120,framerate:15,bitrate:50}),r);let l;l=i?n._mediaStreamTrack.clone():TL(n,s);const h=_n(8,"track-low-"),p=new ar(l,Zc(Zc({},i&&{scaleResolutionDownBy:iY(s,n)}),{},{frameRate:s.framerate,bitrateMax:s.bitrate,bitrateMin:s.bitrate}),void 0,void 0,h);return p.on(up.TRANSCEIVER_UPDATED,v=>{n._updateRtpTransceiver(v,gd.LOW_STREAM)}),p._hints.push(gr.LOW_STREAM),n.addListener(Ze.NEED_CLOSE,()=>{p.close()}),p}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(n,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(this.connection&&this.connection instanceof ac){var l,h,p,v;const E=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:T,dtlsTransportState:y,peerConnectionState:R}=this.connection,{local:k,remote:V}=await this.connection.getSelectedCandidatePair();Me.pcStats(this.store.sessionId,{startTime:E,eventElapse:n-E||0,iceconnectionsate:T,dtlsstate:y,connectionstate:R,intSucc:r?1:2,error:s,selectedLocalCandidateProtocol:(l=k==null?void 0:k.protocol)!==null&&l!==void 0?l:"",selectedLocalCandidateType:(h=k.candidateType)!==null&&h!==void 0?h:"",selectedLocalCandidateAddress:"".concat(k.address,":").concat(k.port),selectedRemoteCandidateProtocol:(p=V.protocol)!==null&&p!==void 0?p:"",selectedRemoteCandidateType:(v=V.candidateType)!==null&&v!==void 0?v:"",selectedRemoteCandidateAddress:"".concat(V.address,":").concat(V.port),restartCnt:i})}}reportVideoFirstFrameDecoded(n,r,i,s){var l;const h=Array.from(eu(l=this.remoteUserMap).call(l)).find(p=>p._videoSSRC===n);if(h){s||this.store.subscribe(h.uid,"video",void 0,void 0,void 0,void 0,Date.now());const p=this.store.keyMetrics,v=p.subscribe.find(E=>E.userId===h.uid&&E.type==="video");Me.firstRemoteVideoDecode(this.store.sessionId,Br.FIRST_VIDEO_DECODE,Dn.FIRST_VIDEO_DECODE,{peer:h._uintid,videowidth:r,videoheight:i,subscribeElapse:Xo.measureFromSubscribeStart(this.store.clientId,n),subscribeRequestid:n,p2pid:this.store.p2pId,apEnd:p.requestAPEnd||0,apStart:p.requestAPStart||0,joinGwEnd:p.joinGatewayEnd||0,joinGwStart:p.joinGatewayStart||0,pcEnd:p.peerConnectionEnd||0,pcStart:p.peerConnectionStart||0,subscriberEnd:(v==null?void 0:v.subscribeEnd)||0,subscriberStart:(v==null?void 0:v.subscribeStart)||0,videoAddNotify:(v==null?void 0:v.streamAdded)||0,state:s?1:0})}}async remoteMediaSsrcChanged(n,r,i){if(!this.connection)return!1;const s=this.remoteUserMap.get(n);if(!s)return!1;const l=s.get(r);if(!l)return!1;const h=await this.connection.getRemoteSSRC(l);return h!==void 0&&h!==i}resetConnection(n){M.debug("[".concat(this.store.clientId,"] [P2PChannel] reset connection to ").concat(n)),this.state===vr.Connected?(M.debug("[".concat(this.store.clientId,"] [P2PChannel] fallback to websocket but P2PChannel state still connected, disconnect first")),this.disconnectForReconnect()):(this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=n===p0.datachannel?new Qc({},this.store):this.isPlanB?new Ip({},this.store):new ac({},this.store),this.bindConnectionEvents(this.connection)))}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(n=>{let[r,{track:i}]=n;r===ke.LocalVideoLowTrack?i._updateRtpTransceiver(void 0,gd.LOW_STREAM):i._updateRtpTransceiver(void 0)})}reportPCDisconnectedOrFailed(n){this.connection&&this.connection instanceof ac&&(this.connection.iceConnectionState!=="disconnected"&&this.connection.iceConnectionState!=="checking"&&this.connection.iceConnectionState!=="failed"||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===Za.TCP_RESTART&&n===jr.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,Za.DISCONNECTED_OR_FAILED)))}}).prototype,"startP2PConnection",[mo],Object.getOwnPropertyDescriptor(Mt.prototype,"startP2PConnection"),Mt.prototype),_e(Mt.prototype,"connect",[mo],Object.getOwnPropertyDescriptor(Mt.prototype,"connect"),Mt.prototype),_e(Mt.prototype,"preConnect",[mo],Object.getOwnPropertyDescriptor(Mt.prototype,"preConnect"),Mt.prototype),_e(Mt.prototype,"unpublish",[mo],Object.getOwnPropertyDescriptor(Mt.prototype,"unpublish"),Mt.prototype),_e(Mt.prototype,"unpublishLowStream",[mo],Object.getOwnPropertyDescriptor(Mt.prototype,"unpublishLowStream"),Mt.prototype),_e(Mt.prototype,"subscribe",[mo],Object.getOwnPropertyDescriptor(Mt.prototype,"subscribe"),Mt.prototype),_e(Mt.prototype,"massSubscribe",[mo],Object.getOwnPropertyDescriptor(Mt.prototype,"massSubscribe"),Mt.prototype),_e(Mt.prototype,"unsubscribe",[mo],Object.getOwnPropertyDescriptor(Mt.prototype,"unsubscribe"),Mt.prototype),_e(Mt.prototype,"massUnsubscribe",[mo],Object.getOwnPropertyDescriptor(Mt.prototype,"massUnsubscribe"),Mt.prototype),_e(Mt.prototype,"muteRemote",[mo],Object.getOwnPropertyDescriptor(Mt.prototype,"muteRemote"),Mt.prototype),_e(Mt.prototype,"unmuteRemote",[mo],Object.getOwnPropertyDescriptor(Mt.prototype,"unmuteRemote"),Mt.prototype),_e(Mt.prototype,"hasRemoteMediaWithLock",[mo],Object.getOwnPropertyDescriptor(Mt.prototype,"hasRemoteMediaWithLock"),Mt.prototype),_e(Mt.prototype,"disconnectForReconnect",[mo],Object.getOwnPropertyDescriptor(Mt.prototype,"disconnectForReconnect"),Mt.prototype),_e(Mt.prototype,"updateBitrateLimit",[mo],Object.getOwnPropertyDescriptor(Mt.prototype,"updateBitrateLimit"),Mt.prototype),_e(Mt.prototype,"remoteMediaSsrcChanged",[mo],Object.getOwnPropertyDescriptor(Mt.prototype,"remoteMediaSsrcChanged"),Mt.prototype),Mt);function mo(n,r,i){const s=n[r];if(typeof s!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){const l=this.mutex,h=await l.lock("From P2PChannel.".concat(r));try{for(var p=arguments.length,v=new Array(p),E=0;E<p;E++)v[E]=arguments[E];return await s.apply(this,v)}finally{h()}},i}function GL(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function Ue(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?GL(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):GL(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var Et;(function(n){n.SET_SESSION_ID="SET_SESSION_ID",n.SET_P2P_ID="SET_P2P_id",n.SET_DC_ID="SET_DC_id",n.SET_UID="SET_UID",n.SET_PUB_ID="SET_PUB_ID",n.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",n.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",n.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",n.AVOID_JOIN_START="AVOID_JOIN_START",n.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",n.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",n.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",n.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",n.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",n.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",n.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",n.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",n.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",n.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",n.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",n.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",n.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",n.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",n.RESET_KEY_METRICS="RESET_KEY_METRICS",n.SET_USE_DATACHANNEL="SET_USE_DATACHANNEL"})(Et||(Et={}));class Iq{constructor(r,i,s,l){w(this,"state",void 0),this.state={codec:r,audioCodec:i,mode:s,clientId:l,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useDataChannel:!1}}dispatch(r){this.state=function(i,s){switch(s.type){case Et.SET_SESSION_ID:return Ue(Ue({},i),{},{sessionId:s.sessionId});case Et.SET_P2P_ID:return Ue(Ue({},i),{},{p2pId:s.p2pId});case Et.SET_UID:return Ue(Ue({},i),{},{uid:s.uid});case Et.SET_PUB_ID:return Ue(Ue({},i),{},{pubId:s.pubId});case Et.KEY_METRIC_CLIENT_CREATED:return Ue(Ue({},i),{},{keyMetrics:Ue(Ue({},i.keyMetrics),{},{clientCreated:s.metric})});case Et.KEY_METRIC_JOIN_START:return Ue(Ue({},i),{},{keyMetrics:Ue(Ue({},i.keyMetrics),{},{joinStart:s.metric})});case Et.AVOID_JOIN_START:return Ue(Ue({},i),{},{avoidJoinStart:s.avoidJoinStart});case Et.KEY_METRIC_JOIN_END:return Ue(Ue({},i),{},{keyMetrics:Ue(Ue({},i.keyMetrics),{},{joinEnd:s.metric})});case Et.KEY_METRIC_REQUEST_AP_START:return Ue(Ue({},i),{},{keyMetrics:Ue(Ue({},i.keyMetrics),{},{requestAPStart:s.metric})});case Et.KEY_METRIC_REQUEST_AP_END:return Ue(Ue({},i),{},{keyMetrics:Ue(Ue({},i.keyMetrics),{},{requestAPEnd:s.metric})});case Et.KEY_METRIC_JOIN_GATEWAY_START:return Ue(Ue({},i),{},{keyMetrics:Ue(Ue({},i.keyMetrics),{},{joinGatewayStart:s.metric})});case Et.KEY_METRIC_JOIN_GATEWAY_END:return Ue(Ue({},i),{},{keyMetrics:Ue(Ue({},i.keyMetrics),{},{joinGatewayEnd:s.metric})});case Et.KEY_METRIC_PEER_CONNECTION_START:return Ue(Ue({},i),{},{keyMetrics:Ue(Ue({},i.keyMetrics),{},{peerConnectionStart:s.metric})});case Et.KEY_METRIC_PEER_CONNECTION_END:return Ue(Ue({},i),{},{keyMetrics:Ue(Ue({},i.keyMetrics),{},{peerConnectionEnd:s.metric})});case Et.KEY_METRIC_DESCRIPTION_START:return Ue(Ue({},i),{},{keyMetrics:Ue(Ue({},i.keyMetrics),{},{descriptionStart:s.metric})});case Et.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return Ue(Ue({},i),{},{keyMetrics:Ue(Ue({},i.keyMetrics),{},{signalChannelOpen:s.metric})});case Et.KEY_METRIC_ICE_CONNECTION_END:return Ue(Ue({},i),{},{keyMetrics:Ue(Ue({},i.keyMetrics),{},{iceConnectionEnd:s.metric})});case Et.KEY_METRIC_PUBLISH:{const l=i.keyMetrics.publish,h=l.findIndex(p=>p.trackId===s.metric.trackId);return h!==-1?(l[h]=Ue(Ue({},l[h]),s.metric),Ue(Ue({},i),{},{keyMetrics:Ue(Ue({},i.keyMetrics),{},{publish:[...l]})})):Ue(Ue({},i),{},{keyMetrics:Ue(Ue({},i.keyMetrics),{},{publish:[...i.keyMetrics.publish,s.metric]})})}case Et.KEY_METRIC_SUBSCRIBE:{const l=i.keyMetrics.subscribe,h=l.findIndex(p=>p.userId===s.metric.userId&&p.type===s.metric.type);return h!==-1?(l[h]=Ue(Ue({},l[h]),s.metric),Ue(Ue({},i),{},{keyMetrics:Ue(Ue({},i.keyMetrics),{},{subscribe:[...l]})})):Ue(Ue({},i),{},{keyMetrics:Ue(Ue({},i.keyMetrics),{},{subscribe:[...i.keyMetrics.subscribe,s.metric]})})}case Et.SET_CLOUD_PROXY_SERVER_MODE:return i.cloudProxyServerMode=s.mode,i;case Et.RECORD_JOIN_CHANNEL_SERVICE:return typeof s.index!="number"?i.joinChannelServiceRecords=[...i.joinChannelServiceRecords,s.record]:(i.joinChannelServiceRecords[s.index]=Ue(Ue({},i.joinChannelServiceRecords[s.index]),s.record),i.joinChannelServiceRecords=[...i.joinChannelServiceRecords]),i;case Et.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return i.joinChannelServiceRecords=[],i;case Et.RESET_KEY_METRICS:return i.keyMetrics={publish:[],subscribe:[]},i;case Et.SET_USE_DATACHANNEL:return Ue(Ue({},i),{},{useDataChannel:s.val});default:return i}}(this.state,r)}set sessionId(r){this.dispatch({type:Et.SET_SESSION_ID,sessionId:r})}get sessionId(){return this.state.sessionId}get codec(){return this.state.codec}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(r){this.dispatch({type:Et.SET_P2P_ID,p2pId:r})}get p2pId(){return this.state.p2pId}set dcId(r){this.dispatch({type:Et.SET_DC_ID,dcId:r})}get dcId(){return this.state.dcId}set uid(r){this.dispatch({type:Et.SET_UID,uid:r})}get uid(){return this.state.uid}set pubId(r){this.dispatch({type:Et.SET_PUB_ID,pubId:r})}get pubId(){return this.state.pubId}set cloudProxyServerMode(r){this.dispatch({type:Et.SET_CLOUD_PROXY_SERVER_MODE,mode:r})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useDataChannel(r){this.dispatch({type:Et.SET_USE_DATACHANNEL,val:r})}get useDataChannel(){return this.state.useDataChannel}clientCreated(){this.dispatch({type:Et.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:Et.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:Et.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:Et.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:Et.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:Et.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:Et.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:Et.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:Et.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:Et.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:Et.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:Et.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(r,i,s,l){this.dispatch({type:Et.KEY_METRIC_PUBLISH,metric:Ue(Ue({trackId:r,type:i},s&&{publishStart:s}),l&&{publishEnd:l})})}subscribe(r,i,s,l,h,p,v){this.dispatch({type:Et.KEY_METRIC_SUBSCRIBE,metric:Ue(Ue(Ue(Ue(Ue({userId:r,type:i},s&&{subscribeStart:s}),l&&{subscribeEnd:l}),h&&{firstFrame:h}),p&&{streamAdded:p}),v&&{firstDecoded:v})})}massSubscribe(r,i,s,l){r.forEach(h=>{this.dispatch({type:Et.KEY_METRIC_SUBSCRIBE,metric:Ue(Ue(Ue({userId:h.userId,type:h.type},i&&{subscribeStart:i}),s&&{subscribeEnd:s}),l&&{firstFrame:l})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(r,i){r.service==="gateway"&&Array.isArray(r.urls)&&(r.urls=r.urls.map(s=>s.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof i!="number"?(this.dispatch({type:Et.RECORD_JOIN_CHANNEL_SERVICE,record:Ue(Ue({},r),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(i<0||i>=this.state.joinChannelServiceRecords.length||this.dispatch({type:Et.RECORD_JOIN_CHANNEL_SERVICE,record:r,index:i}),i)}catch{return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:Et.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:Et.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch{return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(r){this.dispatch({type:Et.AVOID_JOIN_START,avoidJoinStart:r})}}let W0;const wq=()=>(W0||W0||(W0=(window.location.protocol.split(":")[0]||"").toUpperCase(),W0))==="HTTPS",zL=()=>window.isSecureContext!==void 0;function Oq(n){let r=qL();return function(i,s){let l=i.appId;l!==void 0&&(Ft(s,10),ws(s,l));let h=i.cid;h!==void 0&&(Ft(s,16),Ft(s,h));let p=i.cname;p!==void 0&&(Ft(s,26),ws(s,p));let v=i.deviceId;v!==void 0&&(Ft(s,34),ws(s,v));let E=i.elapse;E!==void 0&&(Ft(s,40),el(s,E));let T=i.fileSize;T!==void 0&&(Ft(s,48),el(s,Pd(T)));let y=i.height;y!==void 0&&(Ft(s,56),el(s,Pd(y)));let R=i.jpg;R!==void 0&&(Ft(s,66),Ft(s,R.length),function(Qi,fe){let Ce=xd(Qi,fe.length);Qi.bytes.set(fe,Ce)}(s,R));let k=i.networkType;k!==void 0&&(Ft(s,72),el(s,Pd(k)));let V=i.osType;V!==void 0&&(Ft(s,80),el(s,Pd(V)));let $=i.requestId;$!==void 0&&(Ft(s,90),ws(s,$));let W=i.sdkVersion;W!==void 0&&(Ft(s,98),ws(s,W));let G=i.sequence;G!==void 0&&(Ft(s,104),el(s,Pd(G)));let ie=i.sid;ie!==void 0&&(Ft(s,114),ws(s,ie));let se=i.timestamp;se!==void 0&&(Ft(s,120),el(s,se));let ye=i.uid;ye!==void 0&&(Ft(s,128),Ft(s,ye));let De=i.vid;De!==void 0&&(Ft(s,136),Ft(s,De));let Te=i.width;Te!==void 0&&(Ft(s,144),el(s,Pd(Te)));let be=i.service;be!==void 0&&(Ft(s,152),Ft(s,be));let Se=i.callbackData;Se!==void 0&&(Ft(s,162),ws(s,Se));let Ie=i.jpgEncryption;Ie!==void 0&&(Ft(s,168),Ft(s,Ie));let Bt=i.requestType;Bt!==void 0&&(Ft(s,176),Ft(s,Bt));let We=i.scorePorn;We!==void 0&&(Ft(s,185),ZC(s,We));let dn=i.scoreSexy;dn!==void 0&&(Ft(s,193),ZC(s,dn));let Jt=i.scoreNeutral;Jt!==void 0&&(Ft(s,201),ZC(s,Jt));let Qn=i.scene;Qn!==void 0&&(Ft(s,208),Ft(s,Qn));let $r=i.ossFilePrefix;$r!==void 0&&(Ft(s,218),ws(s,$r));let Gn=i.serviceVendor;if(Gn!==void 0)for(let Qi of Gn){Ft(s,226);let fe=qL();Pq(Qi,fe),Ft(s,fe.limit),Lq(s,fe),kq(fe)}}(n,r),function(i){let s=i.bytes,l=i.limit;return s.length===l?s:s.subarray(0,l)}(r)}function Aq(n){return function(i){let s={};e:for(;!XL(i);){let l=Os(i);switch(l>>>3){case 0:break e;case 1:s.code=Os(i);break;case 2:s.msg=JL(i,Os(i));break;case 3:{let h=xq(i);s.data=Nq(i),i.limit=h;break}default:KL(i,7&l)}}return s}({bytes:r=n,offset:0,limit:r.length});var r}function Nq(n){let r={};e:for(;!XL(n);){let i=Os(n);switch(i>>>3){case 0:break e;case 1:r.requestId=JL(n,Os(n));break;case 2:r.requestType=Os(n)>>>0;break;case 3:r.scorePorn=QC(n);break;case 4:r.scoreSexy=QC(n);break;case 5:r.scoreNeutral=QC(n);break;case 6:r.requestScene=Os(n)>>>0;break;case 7:r.scene=Os(n)>>>0;break;default:KL(n,7&i)}}return r}function Pq(n,r){let i=n.service;i!==void 0&&(Ft(r,8),Ft(r,i));let s=n.vendor;s!==void 0&&(Ft(r,16),Ft(r,s));let l=n.token;l!==void 0&&(Ft(r,26),ws(r,l));let h=n.callbackUrl;h!==void 0&&(Ft(r,34),ws(r,h))}function xq(n){let r=Os(n),i=n.limit;return n.limit=n.offset+r,i}function KL(n,r){switch(r){case 0:for(;128&QL(n););break;case 2:XC(n,Os(n));break;case 5:XC(n,4);break;case 1:XC(n,8);break;default:throw new Error("Unimplemented type: "+r)}}let Dq=new Float32Array(1);new Uint8Array(Dq.buffer);let qC=new Float64Array(1),Ji=new Uint8Array(qC.buffer);function Pd(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}let YL=[];function qL(){const n=YL.pop();return n?(n.offset=n.limit=0,n):{bytes:new Uint8Array(64),offset:0,limit:0}}function kq(n){YL.push(n)}function XC(n,r){if(n.offset+r>n.limit)throw new Error("Skip past limit");n.offset+=r}function XL(n){return n.offset>=n.limit}function xd(n,r){let i=n.bytes,s=n.offset,l=n.limit,h=s+r;if(h>i.length){let p=new Uint8Array(2*h);p.set(i),n.bytes=p}return n.offset=h,h>l&&(n.limit=h),s}function JC(n,r){let i=n.offset;if(i+r>n.limit)throw new Error("Read past limit");return n.offset+=r,i}function JL(n,r){let i=JC(n,r),s=String.fromCharCode,l=n.bytes,h="�",p="";for(let v=0;v<r;v++){let E,T,y,R,k=l[v+i];128&k?(224&k)==192?v+1>=r?p+=h:(E=l[v+i+1],(192&E)!=128?p+=h:(R=(31&k)<<6|63&E,R<128?p+=h:(p+=s(R),v++))):(240&k)==224?v+2>=r?p+=h:(E=l[v+i+1],T=l[v+i+2],(49344&(E|T<<8))!=32896?p+=h:(R=(15&k)<<12|(63&E)<<6|63&T,R<2048||R>=55296&&R<=57343?p+=h:(p+=s(R),v+=2))):(248&k)==240?v+3>=r?p+=h:(E=l[v+i+1],T=l[v+i+2],y=l[v+i+3],(12632256&(E|T<<8|y<<16))!=8421504?p+=h:(R=(7&k)<<18|(63&E)<<12|(63&T)<<6|63&y,R<65536||R>1114111?p+=h:(R-=65536,p+=s(55296+(R>>10),56320+(1023&R)),v+=3))):p+=h:p+=s(k)}return p}function ws(n,r){let i=r.length,s=0;for(let p=0;p<i;p++){let v=r.charCodeAt(p);v>=55296&&v<=56319&&p+1<i&&(v=(v<<10)+r.charCodeAt(++p)-56613888),s+=v<128?1:v<2048?2:v<65536?3:4}Ft(n,s);let l=xd(n,s),h=n.bytes;for(let p=0;p<i;p++){let v=r.charCodeAt(p);v>=55296&&v<=56319&&p+1<i&&(v=(v<<10)+r.charCodeAt(++p)-56613888),v<128?h[l++]=v:(v<2048?h[l++]=v>>6&31|192:(v<65536?h[l++]=v>>12&15|224:(h[l++]=v>>18&7|240,h[l++]=v>>12&63|128),h[l++]=v>>6&63|128),h[l++]=63&v|128)}}function Lq(n,r){let i=xd(n,r.limit),s=n.bytes,l=r.bytes;for(let h=0,p=r.limit;h<p;h++)s[h+i]=l[h]}function QL(n){return n.bytes[JC(n,1)]}function ZL(n,r){let i=xd(n,1);n.bytes[i]=r}function QC(n){let r=JC(n,8),i=n.bytes;return Ji[0]=i[r++],Ji[1]=i[r++],Ji[2]=i[r++],Ji[3]=i[r++],Ji[4]=i[r++],Ji[5]=i[r++],Ji[6]=i[r++],Ji[7]=i[r++],qC[0]}function ZC(n,r){let i=xd(n,8),s=n.bytes;qC[0]=r,s[i++]=Ji[0],s[i++]=Ji[1],s[i++]=Ji[2],s[i++]=Ji[3],s[i++]=Ji[4],s[i++]=Ji[5],s[i++]=Ji[6],s[i++]=Ji[7]}function Os(n){let r,i=0,s=0;do r=QL(n),i<32&&(s|=(127&r)<<i),i+=7;while(128&r);return s}function Ft(n,r){for(r>>>=0;r>=128;)ZL(n,127&r|128),r>>>=7;ZL(n,r)}function el(n,r){let i=r.low>>>0,s=(r.low>>>28|r.high<<4)>>>0,l=r.high>>>24,h=l===0?s===0?i<16384?i<128?1:2:i<1<<21?3:4:s<16384?s<128?5:6:s<1<<21?7:8:l<128?9:10,p=xd(n,h),v=n.bytes;switch(h){case 10:v[p+9]=l>>>7&1;case 9:v[p+8]=h!==9?128|l:127&l;case 8:v[p+7]=h!==8?s>>>21|128:s>>>21&127;case 7:v[p+6]=h!==7?s>>>14|128:s>>>14&127;case 6:v[p+5]=h!==6?s>>>7|128:s>>>7&127;case 5:v[p+4]=h!==5?128|s:127&s;case 4:v[p+3]=h!==4?i>>>21|128:i>>>21&127;case 3:v[p+2]=h!==3?i>>>14|128:i>>>14&127;case 2:v[p+1]=h!==2?i>>>7|128:i>>>7&127;case 1:v[p]=h!==1?128|i:127&i}}const Mq=async(n,r,i)=>{const s=function(p){const v=[];for(let E=0;E<p.length;E+=2)v.push(parseInt(p.slice(E,E+2),16));return Uint8Array.from(v)}(function(p){const v="0123456789abcdef";function E(Bt){let We,dn="";for(We=0;We<=3;We++)dn+=v.charAt(Bt>>8*We+4&15)+v.charAt(Bt>>8*We&15);return dn}function T(Bt,We){const dn=(65535&Bt)+(65535&We);return(Bt>>16)+(We>>16)+(dn>>16)<<16|65535&dn}function y(Bt,We,dn,Jt,Qn,$r){return T(function(Gn,Qi){return Gn<<Qi|Gn>>>32-Qi}(T(T(We,Bt),T(Jt,$r)),Qn),dn)}function R(Bt,We,dn,Jt,Qn,$r,Gn){return y(We&dn|~We&Jt,Bt,We,Qn,$r,Gn)}function k(Bt,We,dn,Jt,Qn,$r,Gn){return y(We&Jt|dn&~Jt,Bt,We,Qn,$r,Gn)}function V(Bt,We,dn,Jt,Qn,$r,Gn){return y(We^dn^Jt,Bt,We,Qn,$r,Gn)}function $(Bt,We,dn,Jt,Qn,$r,Gn){return y(dn^(We|~Jt),Bt,We,Qn,$r,Gn)}const W=function(Bt){let We;const dn=1+(Bt.length+8>>6),Jt=new Array(16*dn);for(We=0;We<16*dn;We++)Jt[We]=0;for(We=0;We<Bt.length;We++)Jt[We>>2]|=Bt.charCodeAt(We)<<We%4*8;return Jt[We>>2]|=128<<We%4*8,Jt[16*dn-2]=8*Bt.length,Jt}(p);let G,ie,se,ye,De,Te=1732584193,be=-271733879,Se=-1732584194,Ie=271733878;for(G=0;G<W.length;G+=16)ie=Te,se=be,ye=Se,De=Ie,Te=R(Te,be,Se,Ie,W[G+0],7,-680876936),Ie=R(Ie,Te,be,Se,W[G+1],12,-389564586),Se=R(Se,Ie,Te,be,W[G+2],17,606105819),be=R(be,Se,Ie,Te,W[G+3],22,-1044525330),Te=R(Te,be,Se,Ie,W[G+4],7,-176418897),Ie=R(Ie,Te,be,Se,W[G+5],12,1200080426),Se=R(Se,Ie,Te,be,W[G+6],17,-1473231341),be=R(be,Se,Ie,Te,W[G+7],22,-45705983),Te=R(Te,be,Se,Ie,W[G+8],7,1770035416),Ie=R(Ie,Te,be,Se,W[G+9],12,-1958414417),Se=R(Se,Ie,Te,be,W[G+10],17,-42063),be=R(be,Se,Ie,Te,W[G+11],22,-1990404162),Te=R(Te,be,Se,Ie,W[G+12],7,1804603682),Ie=R(Ie,Te,be,Se,W[G+13],12,-40341101),Se=R(Se,Ie,Te,be,W[G+14],17,-1502002290),be=R(be,Se,Ie,Te,W[G+15],22,1236535329),Te=k(Te,be,Se,Ie,W[G+1],5,-165796510),Ie=k(Ie,Te,be,Se,W[G+6],9,-1069501632),Se=k(Se,Ie,Te,be,W[G+11],14,643717713),be=k(be,Se,Ie,Te,W[G+0],20,-373897302),Te=k(Te,be,Se,Ie,W[G+5],5,-701558691),Ie=k(Ie,Te,be,Se,W[G+10],9,38016083),Se=k(Se,Ie,Te,be,W[G+15],14,-660478335),be=k(be,Se,Ie,Te,W[G+4],20,-405537848),Te=k(Te,be,Se,Ie,W[G+9],5,568446438),Ie=k(Ie,Te,be,Se,W[G+14],9,-1019803690),Se=k(Se,Ie,Te,be,W[G+3],14,-187363961),be=k(be,Se,Ie,Te,W[G+8],20,1163531501),Te=k(Te,be,Se,Ie,W[G+13],5,-1444681467),Ie=k(Ie,Te,be,Se,W[G+2],9,-51403784),Se=k(Se,Ie,Te,be,W[G+7],14,1735328473),be=k(be,Se,Ie,Te,W[G+12],20,-1926607734),Te=V(Te,be,Se,Ie,W[G+5],4,-378558),Ie=V(Ie,Te,be,Se,W[G+8],11,-2022574463),Se=V(Se,Ie,Te,be,W[G+11],16,1839030562),be=V(be,Se,Ie,Te,W[G+14],23,-35309556),Te=V(Te,be,Se,Ie,W[G+1],4,-1530992060),Ie=V(Ie,Te,be,Se,W[G+4],11,1272893353),Se=V(Se,Ie,Te,be,W[G+7],16,-155497632),be=V(be,Se,Ie,Te,W[G+10],23,-1094730640),Te=V(Te,be,Se,Ie,W[G+13],4,681279174),Ie=V(Ie,Te,be,Se,W[G+0],11,-358537222),Se=V(Se,Ie,Te,be,W[G+3],16,-722521979),be=V(be,Se,Ie,Te,W[G+6],23,76029189),Te=V(Te,be,Se,Ie,W[G+9],4,-640364487),Ie=V(Ie,Te,be,Se,W[G+12],11,-421815835),Se=V(Se,Ie,Te,be,W[G+15],16,530742520),be=V(be,Se,Ie,Te,W[G+2],23,-995338651),Te=$(Te,be,Se,Ie,W[G+0],6,-198630844),Ie=$(Ie,Te,be,Se,W[G+7],10,1126891415),Se=$(Se,Ie,Te,be,W[G+14],15,-1416354905),be=$(be,Se,Ie,Te,W[G+5],21,-57434055),Te=$(Te,be,Se,Ie,W[G+12],6,1700485571),Ie=$(Ie,Te,be,Se,W[G+3],10,-1894986606),Se=$(Se,Ie,Te,be,W[G+10],15,-1051523),be=$(be,Se,Ie,Te,W[G+1],21,-2054922799),Te=$(Te,be,Se,Ie,W[G+8],6,1873313359),Ie=$(Ie,Te,be,Se,W[G+15],10,-30611744),Se=$(Se,Ie,Te,be,W[G+6],15,-1560198380),be=$(be,Se,Ie,Te,W[G+13],21,1309151649),Te=$(Te,be,Se,Ie,W[G+4],6,-145523070),Ie=$(Ie,Te,be,Se,W[G+11],10,-1120210379),Se=$(Se,Ie,Te,be,W[G+2],15,718787259),be=$(be,Se,Ie,Te,W[G+9],21,-343485551),Te=T(Te,ie),be=T(be,se),Se=T(Se,ye),Ie=T(Ie,De);return E(Te)+E(be)+E(Se)+E(Ie)}(""+r+i)).slice(0,16),l=s.slice(0,12),h=await window.crypto.subtle.importKey("raw",s,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:l},h,n))},eM=async(n,r,i)=>await Mq(n.buffer,r,i);function tM(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}const Uq=new Map([["moderation",1],["supervise",2]]);class G0 extends xn{get connectionState(){return this._connectionState}set connectionState(r){if(this._connectionState===r)return;const i=this._connectionState;this._connectionState=r,this.emit(fr.CONNECTION_STATE_CHANGE,i,r)}get inspectType(){return this._inspectType}set inspectType(r){var i;this._inspectMode=Mc(i=r.map(s=>Uq.get(s)||0)).call(i,(s,l)=>s+l),this._inspectType=r}get quality(){return this._quality}set quality(r){this._quality=r>1?1:r<.1?.1:r,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(r){super(),w(this,"name","AgoraRTCVideoContentInspect"),w(this,"_connectionState",Ao.CONNECTING),w(this,"_innerConnectionState",void 0),w(this,"sequence",0),w(this,"inspectStartTime",void 0),w(this,"workerManagerConnection",void 0),w(this,"workerConnection",void 0),w(this,"workerMessageLengthLimit",void 0),w(this,"inspectIntervalMinimum",void 0),w(this,"qualityRatio",void 0),w(this,"_connectInfo",void 0),w(this,"_cancelTokenSource",Io.CancelToken.source()),w(this,"_retryConfig",void 0),w(this,"wmSequence",0),w(this,"inspectInterval",void 0),w(this,"inspectTimer",null),w(this,"ossFilePrefix",void 0),w(this,"extraInfo",void 0),w(this,"_inspectType",void 0),w(this,"_inspectMode",void 0),w(this,"_quality",1),w(this,"qualityTimer",null),w(this,"_inspectId",void 0),w(this,"_needWorkUrlOnly",!1),w(this,"inspectImage",()=>{if(this.connectionState!==Ao.CONNECTED)throw new X(j.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===Ao.CONNECTED?this.requestToInspectImage():M.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=_n(5,"inspect-"),this.workerMessageLengthLimit=ne("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=ne("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=ne("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=r.interval,this.ossFilePrefix=r.ossFilePrefix,this.extraInfo=r.extraInfo,this.inspectType=r.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new ou("worker-manager-"+this._inspectId,tr),this.on(fr.STATE_CHANGE,(i,s)=>{this._innerConnectionState=i,M.debug("[".concat(this._inspectId,"] Inspect operation :").concat(No[i]," ").concat(s||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new ou("worker-"+this._inspectId,tr),this.handleWorkerEvents()}async init(r,i){this.emit(fr.STATE_CHANGE,No.CONNECT_AP),this._connectInfo=r;const s=this._cancelTokenSource.token;return this._retryConfig=i,new Pe((l,h)=>{this.on(fr.CONNECTION_STATE_CHANGE,(p,v)=>{v===Ao.CONNECTED&&l()}),this.requestAP(r,s,i).then(p=>{this.connectWorkerManager(p)}).catch(p=>{h(p)})})}async requestAP(r,i,s){const l=ne("WEBCS_DOMAIN").map(v=>"https://".concat(v,"/api/v1")),h=await function(v,E,T,y){let{appId:R,areaCode:k,cname:V,sid:$,token:W,uid:G}=E;Rd++;const ie="image_moderation_api",se={service_name:ie,json_body:JSON.stringify({appId:R,areaCode:k,cname:V,command:"allocateEdge",requestId:Rd,seq:Rd,sid:$,token:W,ts:Date.now(),uid:G+""})};let ye,De,Te=v[0];return Ja(async()=>{ye=Date.now();const be=await Ia(Te,{data:se,cancelToken:T,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(De=Date.now()-ye,be.code!==0){const We=new X(j.UNEXPECTED_RESPONSE,"image inspect ap error, code"+be.code,{retry:!0,responseTime:De});throw M.error(We.toString()),We}const Se=JSON.parse(be.json_body);if(Se.code!==200){const We=new X(j.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(Se.code,", reason: ").concat(Se.reason),{code:Se.code,responseTime:De});throw M.error(We.toString()),We}if(!Se.servers||!Array.isArray(Se.servers)||Se.servers.length===0){const We=new X(j.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:Se.code,responseTime:De});throw M.error(We.toString()),We}const Ie=ne("VIDEO_INSPECT_WORKER_MANAGER_HOST"),Bt=ne("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:Se.servers.map(We=>{let{address:dn,wss:Jt}=We;if(dn&&Jt)return"wss://".concat(dn.replace(/\./g,"-"),".").concat(Ie,":").concat(Bt||Jt)}).filter(We=>!!We),workerToken:Se.workerToken,vid:Se.vid,responseTime:De}},(be,Se)=>(Me.apworkerEvent($,{success:!0,sc:200,serviceName:ie,responseDetail:JSON.stringify(be.addressList),firstSuccess:Se===0,responseTime:De,serverIp:v[Se%v.length]}),!1),(be,Se)=>(Me.apworkerEvent($,{success:!1,sc:be.data&&be.data.code||200,serviceName:ie,responseTime:De,serverIp:v[Se%v.length]}),!!(be.code!==j.OPERATION_ABORTED&&be.code!==j.UNEXPECTED_RESPONSE||be.data&&be.data.retry)&&(Te=v[(Se+1)%v.length],!0)),y)}(l,r,i,s);this.emit(fr.STATE_CHANGE,No.AP_CONNECTED);const{addressList:p}=h;return this.wmSequence++,p}async connectWorkerManager(r){let i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this._needWorkUrlOnly=i,this.emit(fr.STATE_CHANGE,No.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(r,1e4)}async connectWorker(r){await this.workerConnection.init([r])}handleWorkerManagerEvents(){this.workerManagerConnection.on(nt.CONNECTED,async()=>{this.emit(fr.STATE_CHANGE,No.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.18.1",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on(nt.CLOSED,()=>{this._innerConnectionState<No.GET_WORKER_MANAGER_RESPONSE&&M.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on(nt.FAILED,()=>{this._innerConnectionState<No.GET_WORKER_MANAGER_RESPONSE&&M.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on(nt.RECONNECTING,()=>{this._innerConnectionState<No.GET_WORKER_MANAGER_RESPONSE&&M.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on(nt.ON_MESSAGE,async r=>{this.emit(fr.STATE_CHANGE,No.GET_WORKER_MANAGER_RESPONSE);const i=this.workerManagerConnection.url;this.workerManagerConnection.close();const s=JSON.parse(r.data);if(s.code!==200)throw M.error("[".concat(this._inspectId,"] Unexpected code ").concat(s.code," from worker manager")),new X(j.UNEXPECTED_RESPONSE,"response code of worker is unexpected",s);if(!(s.serverResponse&&s.serverResponse.portWss&&i))throw M.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(s))),new X(j.UNEXPECTED_RESPONSE,"response content of worker is unexpected",s);{const l=ne("VIDEO_INSPECT_WORKER_PORT")||s.serverResponse.portWss,h=i.replace(/:\d+\/?$/,":".concat(l));this.emit(fr.STATE_CHANGE,No.CONNECT_WORKER,h),this._needWorkUrlOnly?this.emit(fr.REQUEST_NEW_WORKER_URL,h):await this.connectWorker(h)}}),this.workerManagerConnection.on(nt.WILL_RECONNECT,(r,i)=>{i(r)}),this.workerManagerConnection.on(nt.REQUEST_NEW_URLS,(r,i)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(r).catch(i)})}handleWorkerEvents(){this.workerConnection.on(nt.CONNECTED,async()=>{this.emit(fr.STATE_CHANGE,No.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=Ao.CONNECTED}),this.workerConnection.on(nt.ON_MESSAGE,async r=>{if(r.data instanceof ArrayBuffer){const s=Aq(new Uint8Array(r.data));if(ne("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&M.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(s)),s.code===200){if(Array.isArray(this.inspectType)&&this.inspectType.length===1&&this.inspectType[0]==="supervise")return void this.emit(fr.INSPECT_RESULT,void 0,void 0);if(s.data&&s.data.scorePorn&&s.data.scoreSexy&&s.data.scoreNeutral){var i;const l={porn:s.data.scorePorn,sexy:s.data.scoreSexy,neutral:s.data.scoreNeutral},h=Mc(i=Object.keys(l)).call(i,(v,E)=>l[v]>l[E]?v:E,"porn"),p=Object.keys(l).find(v=>v===h);this.emit(fr.INSPECT_RESULT,p)}else this.emit(fr.INSPECT_RESULT,void 0,new X(j.UNEXPECTED_RESPONSE,s.code+"","There is an unexpected data on message"))}else this.emit(fr.INSPECT_RESULT,void 0,new X(j.UNEXPECTED_RESPONSE,s.code+"",s.msg))}else M.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(fr.INSPECT_RESULT,void 0,new X(j.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on(nt.CLOSED,()=>{this.connectionState=Ao.CLOSED}),this.workerConnection.on(nt.FAILED,()=>{this.connectionState=Ao.CLOSED}),this.workerConnection.on(nt.RECONNECTING,()=>{this.connectionState=this.connectionState===Ao.CONNECTED?Ao.RECONNECTING:Ao.CONNECTING}),this.workerConnection.on(nt.WILL_RECONNECT,(r,i)=>{r==="recover"&&i(r),i("tryNext")}),this.workerConnection.on(nt.REQUEST_NEW_URLS,(r,i)=>{this.workerManagerConnection.close(),this.once(fr.REQUEST_NEW_WORKER_URL,s=>{r([s])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(s=>{this.connectWorkerManager(s,!0)}).catch(s=>{i(s)})})}static intToLong(r){return{low:r|=0,high:r>>31,unsigned:r>=0}}async requestToInspectImage(){this.sequence++;const r=Oa(this,fr.CLIENT_LOCAL_VIDEO_TRACK),i={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(r){if(!r.isPlaying)return void this.emit(fr.INSPECT_RESULT,void 0,new X(j.INVALID_OPERATION,"Only the track being played can be inspected"));const s=await this.generateRequestData(r,i);this.workerConnection.sendMessage(s,!0,!0)}else this.emit(fr.INSPECT_RESULT,void 0,new X(j.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(r,i){let{appId:s,cname:l,cid:h,vid:p,sid:v,uid:E}=i;const T=Date.now(),y=await r.getCurrentFrameImage("image/jpeg",this.quality),R=await eM(y,s,l),k=this.sequence+"-"+h+"-"+E+"-"+T+"-"+_n(12,""),V={appId:s,cid:h,cname:l,deviceId:"",elapse:G0.intToLong(Number(T-this.inspectStartTime)),fileSize:R.byteLength,jpgEncryption:2,height:y.height,width:y.width,jpg:R,networkType:6,osType:7,requestId:k,sdkVersion:"4.18.1",sequence:this.sequence,sid:v,timestamp:G0.intToLong(T),uid:E,vid:p,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};this.extraInfo===void 0&&delete V.callbackData,this.ossFilePrefix===void 0&&delete V.ossFilePrefix;const $=Oq(V);if($.byteLength<this.workerMessageLengthLimit){if(ne("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const W=function(G){for(var ie=1;ie<arguments.length;ie++){var se=arguments[ie]!=null?arguments[ie]:{};ie%2?tM(Object(se),!0).forEach(function(ye){w(G,ye,se[ye])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(se)):tM(Object(se)).forEach(function(ye){Object.defineProperty(G,ye,Object.getOwnPropertyDescriptor(se,ye))})}return G}({},V);delete W.jpg,M.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(W))}return $}{const W=this.quality*this.qualityRatio;return this.quality=W,await this.generateRequestData(r,{appId:s,cname:l,cid:h,vid:p,sid:v,uid:E})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Io.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=Ao.CLOSED,this.emit(fr.STATE_CHANGE,No.CLOSED)}}function Vq(n){let r=function(){const i=jq.pop();return i?(i.offset=i.limit=0,i):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(i,s){let l=i.appId;l!==void 0&&(Jn(s,10),uu(s,l));let h=i.cid;h!==void 0&&(Jn(s,16),Jn(s,h));let p=i.cname;p!==void 0&&(Jn(s,26),uu(s,p));let v=i.deviceId;v!==void 0&&(Jn(s,34),uu(s,v));let E=i.elapse;E!==void 0&&(Jn(s,40),tl(s,E));let T=i.fileSize;T!==void 0&&(Jn(s,48),tl(s,Dd(T)));let y=i.height;y!==void 0&&(Jn(s,56),tl(s,Dd(y)));let R=i.jpg;R!==void 0&&(Jn(s,66),Jn(s,R.length),rM(s,R));let k=i.networkType;k!==void 0&&(Jn(s,72),tl(s,Dd(k)));let V=i.osType;V!==void 0&&(Jn(s,80),tl(s,Dd(V)));let $=i.requestId;$!==void 0&&(Jn(s,90),uu(s,$));let W=i.sdkVersion;W!==void 0&&(Jn(s,98),uu(s,W));let G=i.sequence;G!==void 0&&(Jn(s,104),tl(s,Dd(G)));let ie=i.sid;ie!==void 0&&(Jn(s,114),uu(s,ie));let se=i.timestamp;se!==void 0&&(Jn(s,120),tl(s,se));let ye=i.uid;ye!==void 0&&(Jn(s,128),Jn(s,ye));let De=i.vid;De!==void 0&&(Jn(s,136),Jn(s,De));let Te=i.width;Te!==void 0&&(Jn(s,144),tl(s,Dd(Te)));let be=i.service;be!==void 0&&(Jn(s,152),Jn(s,be));let Se=i.callbackData;Se!==void 0&&(Jn(s,162),Jn(s,Se.length),rM(s,Se));let Ie=i.ticket;Ie!==void 0&&(Jn(s,170),uu(s,Ie))}(n,r),function(i){let s=i.bytes,l=i.limit;return s.length===l?s:s.subarray(0,l)}(r)}function Fq(n){return function(i){let s={};e:for(;!Hq(i);){let l=wp(i);switch(l>>>3){case 0:break e;case 1:s.code=wp(i);break;case 2:s.msg=iM(i,wp(i));break;case 3:s.requestId=iM(i,wp(i));break;case 4:s.timestamp=$q(i,!1);break;default:Bq(i,7&l)}}return s}({bytes:r=n,offset:0,limit:r.length});var r}function Bq(n,r){switch(r){case 0:for(;128&xa(n););break;case 2:eT(n,wp(n));break;case 5:eT(n,4);break;case 1:eT(n,8);break;default:throw new Error("Unimplemented type: "+r)}}function Dd(n){return{low:n|=0,high:n>>31,unsigned:n>=0}}let jq=[];function eT(n,r){if(n.offset+r>n.limit)throw new Error("Skip past limit");n.offset+=r}function Hq(n){return n.offset>=n.limit}function z0(n,r){let i=n.bytes,s=n.offset,l=n.limit,h=s+r;if(h>i.length){let p=new Uint8Array(2*h);p.set(i),n.bytes=p}return n.offset=h,h>l&&(n.limit=h),s}function nM(n,r){let i=n.offset;if(i+r>n.limit)throw new Error("Read past limit");return n.offset+=r,i}function rM(n,r){let i=z0(n,r.length);n.bytes.set(r,i)}function iM(n,r){let i=nM(n,r),s=String.fromCharCode,l=n.bytes,h="�",p="";for(let v=0;v<r;v++){let E,T,y,R,k=l[v+i];128&k?(224&k)==192?v+1>=r?p+=h:(E=l[v+i+1],(192&E)!=128?p+=h:(R=(31&k)<<6|63&E,R<128?p+=h:(p+=s(R),v++))):(240&k)==224?v+2>=r?p+=h:(E=l[v+i+1],T=l[v+i+2],(49344&(E|T<<8))!=32896?p+=h:(R=(15&k)<<12|(63&E)<<6|63&T,R<2048||R>=55296&&R<=57343?p+=h:(p+=s(R),v+=2))):(248&k)==240?v+3>=r?p+=h:(E=l[v+i+1],T=l[v+i+2],y=l[v+i+3],(12632256&(E|T<<8|y<<16))!=8421504?p+=h:(R=(7&k)<<18|(63&E)<<12|(63&T)<<6|63&y,R<65536||R>1114111?p+=h:(R-=65536,p+=s(55296+(R>>10),56320+(1023&R)),v+=3))):p+=h:p+=s(k)}return p}function uu(n,r){let i=r.length,s=0;for(let p=0;p<i;p++){let v=r.charCodeAt(p);v>=55296&&v<=56319&&p+1<i&&(v=(v<<10)+r.charCodeAt(++p)-56613888),s+=v<128?1:v<2048?2:v<65536?3:4}Jn(n,s);let l=z0(n,s),h=n.bytes;for(let p=0;p<i;p++){let v=r.charCodeAt(p);v>=55296&&v<=56319&&p+1<i&&(v=(v<<10)+r.charCodeAt(++p)-56613888),v<128?h[l++]=v:(v<2048?h[l++]=v>>6&31|192:(v<65536?h[l++]=v>>12&15|224:(h[l++]=v>>18&7|240,h[l++]=v>>12&63|128),h[l++]=v>>6&63|128),h[l++]=63&v|128)}}function xa(n){return n.bytes[nM(n,1)]}function oM(n,r){let i=z0(n,1);n.bytes[i]=r}function wp(n){let r,i=0,s=0;do r=xa(n),i<32&&(s|=(127&r)<<i),i+=7;while(128&r);return s}function Jn(n,r){for(r>>>=0;r>=128;)oM(n,127&r|128),r>>>=7;oM(n,r)}function $q(n,r){let i,s=0,l=0,h=0;return i=xa(n),s=127&i,128&i&&(i=xa(n),s|=(127&i)<<7,128&i&&(i=xa(n),s|=(127&i)<<14,128&i&&(i=xa(n),s|=(127&i)<<21,128&i&&(i=xa(n),l=127&i,128&i&&(i=xa(n),l|=(127&i)<<7,128&i&&(i=xa(n),l|=(127&i)<<14,128&i&&(i=xa(n),l|=(127&i)<<21,128&i&&(i=xa(n),h=127&i,128&i&&(i=xa(n),h|=(127&i)<<7))))))))),{low:s|l<<28,high:l>>>4|h<<24,unsigned:r}}function tl(n,r){let i=r.low>>>0,s=(r.low>>>28|r.high<<4)>>>0,l=r.high>>>24,h=l===0?s===0?i<16384?i<128?1:2:i<1<<21?3:4:s<16384?s<128?5:6:s<1<<21?7:8:l<128?9:10,p=z0(n,h),v=n.bytes;switch(h){case 10:v[p+9]=l>>>7&1;case 9:v[p+8]=h!==9?128|l:127&l;case 8:v[p+7]=h!==8?s>>>21|128:s>>>21&127;case 7:v[p+6]=h!==7?s>>>14|128:s>>>14&127;case 6:v[p+5]=h!==6?s>>>7|128:s>>>7&127;case 5:v[p+4]=h!==5?128|s:127&s;case 4:v[p+3]=h!==4?i>>>21|128:i>>>21&127;case 3:v[p+2]=h!==3?i>>>14|128:i>>>14&127;case 2:v[p+1]=h!==2?i>>>7|128:i>>>7&127;case 1:v[p]=h!==1?128|i:127&i}}const aM={},sM={},cM=4294967296,lM=18446744073709552e3,uM=lM/2,tT=hM(0,!0),dM=hM(0),Wq=kd(0,-2147483648,!1),Gq=kd(-1,2147483647,!1),zq=kd(-1,-1,!0);function hM(n,r){let i,s,l;return r?(l=0<=(n>>>=0)&&n<256)&&(s=sM[n],s)?s:(i=kd(n,0,!0),l&&(sM[n]=i),i):(l=-128<=(n|=0)&&n<128)&&(s=aM[n],s)?s:(i=kd(n,n<0?-1:0,!1),l&&(aM[n]=i),i)}function kd(n,r,i){return{low:0|n,high:0|r,unsigned:!!i}}function Kq(n,r){if(isNaN(n))return r?tT:dM;if(r){if(n<0)return tT;if(n>=lM)return zq}else{if(n<=-uM)return Wq;if(n+1>=uM)return Gq}return n<0?r?tT:dM:kd(n%cM|0,n/cM|0,r)}function pM(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}class nT extends xn{get connectionState(){return this._connectionState}set connectionState(r){if(this._connectionState===r)return;const i=this._connectionState;this._connectionState=r,this.emit(qo.CONNECTION_STATE_CHANGE,r,i)}get quality(){return this._quality}set quality(r){this._quality=r>1?1:r<.1?.1:r,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this._qualityRatio},6e4))}constructor(r){var i;super(),w(this,"name","AgoraRTCImageModeration"),w(this,"_connectionState",po.CONNECTING),w(this,"_sequence",0),w(this,"_moderationStartTime",void 0),w(this,"_workerConnection",void 0),w(this,"_workerMessageLengthLimit",void 0),w(this,"_qualityRatio",void 0),w(this,"_connectInfo",void 0),w(this,"_cancelTokenSource",Io.CancelToken.source()),w(this,"_retryConfig",void 0),w(this,"_moderationInterval",void 0),w(this,"_moderationTimer",null),w(this,"_moderationMode",1),w(this,"_quality",1),w(this,"_qualityTimer",null),w(this,"_ticket",void 0),w(this,"_moderationIntervalMinimum",void 0),w(this,"_uploadFailedNum",0),w(this,"_uploadNum",0),w(this,"_uploadTimer",null),w(this,"_moderationId",void 0),w(this,"inspectImage",()=>{if(this.connectionState!==po.CONNECTED)throw new X(j.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval(()=>{this.connectionState===po.CONNECTED?this.requestToInspectImage():M.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)},this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()}),this._moderationId=_n(5,"image-moderation-"),this._workerMessageLengthLimit=ne("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=ne("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=(i=r.interval)!==null&&i!==void 0?i:1e3,this._qualityRatio=ne("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new ou("worker-"+this._moderationId,tr),this.on(qo.STATE_CHANGE,(s,l)=>{M.debug("[".concat(this._moderationId,"] Moderation operation :").concat(zc[s]," ").concat(l||""))}),this.handleWorkerEvents()}async init(r,i){this.emit(qo.STATE_CHANGE,zc.CONNECT_AP),this._connectInfo=r;const s=this._cancelTokenSource.token;return this._retryConfig=i,new Pe((l,h)=>{this.on(qo.CONNECTION_STATE_CHANGE,(p,v)=>{p===po.CONNECTED&&l()}),this.requestAP(r,s,i).then(p=>{this.connectWorker(p)}).catch(p=>{h(p)})})}updateConfig(r){var i;this._moderationInterval=(i=r.interval)!==null&&i!==void 0?i:1e3,M.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(r))),this.connectionState===po.CONNECTED&&this.inspectImage()}async requestAP(r,i,s){const l=ne("WEBCS_DOMAIN").map(E=>"https://".concat(E,"/api/v1")),h=await function(E,T,y,R){let{appId:k,areaCode:V,cname:$,sid:W,token:G,uid:ie}=T;Rd++;const se="moderation_plugin",ye={service_name:se,json_body:JSON.stringify({appId:k,areaCode:V,cname:$,command:"allocateEdge",requestId:Rd,seq:Rd,sid:W,appToken:G,ts:Date.now(),uid:ie+""})};let De,Te,be=E[0];return Ja(async()=>{De=Date.now();const Se=await Ia(be,{data:ye,cancelToken:y,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(Te=Date.now()-De,Se.code!==0){const We=new X(j.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+Se.code,{retry:!0,responseTime:Te});throw M.error(We.toString()),We}const Ie=JSON.parse(Se.json_body);if(Ie.code!==200){const We=new X(j.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(Ie.code,", reason: ").concat(Ie.reason),{code:Ie.code,responseTime:Te});throw M.error(We.toString()),We}if(!Ie.servers||!Array.isArray(Ie.servers)||Ie.servers.length===0){const We=new X(j.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:Ie.code,responseTime:Te});throw M.error(We.toString()),We}if(!Ie.servers.some(We=>!!We.wss)){const We=new X(j.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:Ie.code,responseTime:Te});throw M.error(We.toString()),We}const Bt=ne("IMAGE_MODERATION_WORKER_HOST");return{addressList:Ie.servers.map(We=>{let{address:dn,wss:Jt}=We;if(dn&&Jt)return"wss://".concat(dn.replace(/\./g,"-"),".").concat(Bt,":").concat(Jt,"/moderation")}).filter(We=>!!We),workerToken:Ie.workerToken,vid:Ie.vid,ticket:Ie.appTicket,responseTime:Te}},(Se,Ie)=>(Me.apworkerEvent(W,{success:!0,sc:200,serviceName:se,responseDetail:JSON.stringify(Se.addressList),firstSuccess:Ie===0,responseTime:Te,serverIp:E[Ie%E.length]}),!1),(Se,Ie)=>(Me.apworkerEvent(W,{success:!1,sc:Se.data&&Se.data.code||200,serviceName:se,responseTime:Te,serverIp:E[Ie%E.length]}),!!(Se.code!==j.OPERATION_ABORTED&&Se.code!==j.UNEXPECTED_RESPONSE||Se.data&&Se.data.retry)&&(be=E[(Ie+1)%E.length],!0)),R)}(l,r,i,s);this.emit(qo.STATE_CHANGE,zc.AP_CONNECTED);const{addressList:p,ticket:v}=h;return this._ticket=v,p}async connectWorker(r){this.emit(qo.STATE_CHANGE,zc.CONNECT_WORKER),await this._workerConnection.init(r,1e4)}handleWorkerEvents(){this._workerConnection.on(nt.CONNECTED,async()=>{this.emit(qo.STATE_CHANGE,zc.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=po.CONNECTED}),this._workerConnection.on(nt.CLOSED,()=>{this.connectionState=po.CLOSED}),this._workerConnection.on(nt.FAILED,()=>{this.connectionState=po.CLOSED}),this._workerConnection.on(nt.RECONNECTING,()=>{this.connectionState=this.connectionState===po.CONNECTED?po.RECONNECTING:po.CONNECTING}),this._workerConnection.on(nt.ON_MESSAGE,async r=>{if(r.data instanceof ArrayBuffer){const i=Fq(new Uint8Array(r.data));ne("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&M.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(i)),this._uploadNum++,i.code===void 0||i.code===0||(this._uploadFailedNum++,M.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(i.code,", msg is ").concat(i.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout(()=>{Me.reportApiInvoke(this._connectInfo.sid||null,{name:nr.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,i.code],tag:On.TRACER}).onError(new X(j.IMAGE_MODERATION_UPLOAD_FAILED,i.msg)),this._uploadTimer=null},ne("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else M.error("[".concat(this._moderationId,"] Unexpected message type from worker"))}),this._workerConnection.on(nt.WILL_RECONNECT,(r,i)=>{r==="recover"&&i(r),i("tryNext")}),this._workerConnection.on(nt.REQUEST_NEW_URLS,(r,i)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(r).catch(i)})}static intToLong(r){return{low:r|=0,high:r>>31,unsigned:r>=0}}async requestToInspectImage(){const r=Oa(this,qo.CLIENT_LOCAL_VIDEO_TRACK),i={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(r){if(!r.isPlaying)return void(ne("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&M.debug("Only the track being played can be inspected"));this._sequence++;const s=await this.generateRequestData(r,i);this._workerConnection.sendMessage(s,!0,!0)}else ne("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&M.debug("Only the track being published can be inspected")}async generateRequestData(r,i){let{appId:s,cname:l,cid:h,vid:p,sid:v,uid:E}=i;const T=Date.now(),y=await r.getCurrentFrameImage("image/jpeg",this.quality),R=await eM(y,s,l),k=this._sequence+"-"+h+"-"+E+"-"+T+"-"+_n(12,""),V={appId:s,cid:h,cname:l,deviceId:"",elapse:nT.intToLong(Number(T-this._moderationStartTime)),fileSize:y.buffer.byteLength,height:y.height,width:y.width,jpg:R,networkType:6,osType:7,requestId:k,sdkVersion:"4.18.1",sequence:this._sequence,sid:v,timestamp:Kq(T),uid:E,vid:p,service:this._moderationMode,ticket:this._ticket},$=Vq(V);if($.byteLength<this._workerMessageLengthLimit){if(ne("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const W=function(G){for(var ie=1;ie<arguments.length;ie++){var se=arguments[ie]!=null?arguments[ie]:{};ie%2?pM(Object(se),!0).forEach(function(ye){w(G,ye,se[ye])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(se)):pM(Object(se)).forEach(function(ye){Object.defineProperty(G,ye,Object.getOwnPropertyDescriptor(se,ye))})}return G}({},V);delete W.jpg,M.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(W))}return $}{const W=this.quality*this._qualityRatio;return this.quality=W,await this.generateRequestData(r,{appId:s,cname:l,cid:h,vid:p,sid:v,uid:E})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Io.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=po.CLOSED,this.emit(qo.STATE_CHANGE,zc.CLOSED)}}var fM,mM,gM,vM,EM,_M,SM,yM,CM,TM,bM,RM,IM,wM,OM,AM,NM,PM,xM,DM,kM,LM,MM,UM,VM,FM,BM,jM,HM,$M,WM,GM,zM,KM,YM,qM,XM,JM,QM,we;function ZM(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function Op(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?ZM(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ZM(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}let Yq=(fM=Ge(),mM=Ge({argsMap:(n,r)=>(Array.isArray(r)||(r=[r]),r.map(i=>i?Object(i).toString():"null"))}),gM=Ge({argsMap:(n,r)=>(r||(r=[]),Array.isArray(r)||(r=[r]),r.map(i=>i.getTrackId()))}),vM=Ge({argsMap:(n,r,i)=>[r.uid,i]}),EM=Ge({argsMap:(n,r)=>r.map(i=>{let{user:s,mediaType:l}=i;return[s==null?void 0:s.uid,l]})}),_M=Ge({argsMap:(n,r,i)=>[r.uid,i]}),SM=Ge({argsMap:(n,r)=>r.map(i=>{let{user:s,mediaType:l}=i;return{uid:s==null?void 0:s.uid,mediaType:l}})}),yM=Ge(),CM=Ge(),TM=Ge(),bM=Ge(),RM=Ge(),IM=Ge(),wM=Ge(),OM=Ge(),AM=Ge(),NM=Ge(),PM=Ge(),xM=Ge(),DM=Ge(),kM=Ge(),LM=Ge({argsMap:(n,r)=>[r]}),MM=Ge(),UM=Ge(),VM=Ge(),FM=Ge(),BM=Ge(),jM=Ge(),HM=Ge(),$M=Ge(),WM=Ge(),GM=Ge(),zM=Ge({argsMap:(n,r)=>(Array.isArray(r)||(r=[r]),[JSON.stringify(r)])}),KM=Ge(),YM=Ge(),qM=Ge(),XM=Ge(),JM=Ge({reportResult:!0}),QM=Ge(),_e((we=class extends xn{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get mode(){return this._config.mode}get role(){var n;return((n=this._config)===null||n===void 0?void 0:n.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(n){let r;if(super(),w(this,"store",void 0),w(this,"_uid",void 0),w(this,"_channelName",void 0),w(this,"_uintUid",void 0),w(this,"_users",[]),w(this,"_config",void 0),w(this,"_clientId",void 0),w(this,"_appId",void 0),w(this,"_sessionId",null),w(this,"_key",void 0),w(this,"_joinInfo",void 0),w(this,"_gateway",void 0),w(this,"_statsCollector",void 0),w(this,"_configDistribute",void 0),w(this,"_leaveMutex",new Ri("client-leave")),w(this,"_publishMutex",new Ri("client-publish")),w(this,"_renewTokenMutex",new Ri("client-renewtoken")),w(this,"_subscribeMutex",new Ri("client-subscribe")),w(this,"_encryptionMode","none"),w(this,"_encryptionSecret",null),w(this,"_encryptionSalt",null),w(this,"_proxyServer",void 0),w(this,"_turnServer",{servers:[],mode:"auto"}),w(this,"_cloudProxyServerMode","disabled"),w(this,"_isDualStreamEnabled",!1),w(this,"_defaultStreamFallbackType",void 0),w(this,"_lowStreamParameter",void 0),w(this,"_streamFallbackTypeCacheMap",new Map),w(this,"_remoteStreamTypeCacheMap",new Map),w(this,"_axiosCancelSource",Io.CancelToken.source()),w(this,"_audioVolumeIndicationInterval",void 0),w(this,"_networkQualityInterval",void 0),w(this,"_userOfflineTimeout",void 0),w(this,"_streamRemovedTimeout",void 0),w(this,"_injectStreamingClient",void 0),w(this,"_liveTranscodeStreamingClient",void 0),w(this,"_liveRawStreamingClient",void 0),w(this,"_channelMediaRelayClient",void 0),w(this,"_networkQualitySensitivity","normal"),w(this,"_p2pChannel",void 0),w(this,"_useLocalAccessPoint",!1),w(this,"_setLocalAPVersion",void 0),w(this,"_joinAndNotLeaveYet",!1),w(this,"_numberOfJoinCount",0),w(this,"_remoteDefaultVideoStreamType",void 0),w(this,"_inspect",void 0),w(this,"_moderation",void 0),w(this,"_license",void 0),w(this,"_handleLocalTrackEnable",(i,s,l)=>{this.publish(i,!1).then(s).catch(l)}),w(this,"_handleLocalTrackDisable",(i,s,l)=>{this.unpublish(i).then(s).catch(l)}),w(this,"_handleUserOnline",i=>{if(ne("BLOCK_LOCAL_CLIENT")&&Zl(i.uid,this.channelName))return void M.debug("[".concat(i.uid,"] will be ignored in local"));this.isStringUID&&typeof i.uid!="string"&&M.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const s=this._users.find(l=>l.uid===i.uid);if(s)s._trust_in_room_=!0;else{const l=new SC(i.uid,i.uint_id||i.uid);this._users.push(l),M.debug("[".concat(this._clientId,"] user online"),i.uid),this.safeEmit(_t.USER_JOINED,l)}}),w(this,"_handleUserOffline",i=>{if(ne("BLOCK_LOCAL_CLIENT")&&Zl(i.uid,this.channelName))return;const s=this._users.find(l=>l.uid===i.uid);s&&(this._handleRemoveStream(i),uC(this._users,s),this._remoteStreamTypeCacheMap.delete(s.uid),this._streamFallbackTypeCacheMap.delete(s.uid),M.debug("[".concat(this._clientId,"] user offline"),i.uid,"reason:",i.reason),this.safeEmit(_t.USER_LEAVED,s,i.reason))}),w(this,"_handleAddAudioOrVideoStream",(i,s,l,h,p,v,E)=>{if(ne("BLOCK_LOCAL_CLIENT")&&Zl(s,this.channelName))return;const T=this._users.find(R=>R.uid===s);if(!T)return void M.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));M.debug("[".concat(this._clientId,"] stream added with uid ").concat(s,", type ").concat(i)),this.store.subscribe(T.uid,i,void 0,void 0,void 0,Date.now());const y=i==="audio"?T.hasAudio:T.hasVideo;T._uintid||(T._uintid=p||s),i==="audio"?T._trust_audio_stream_added_state_=!0:T._trust_video_stream_added_state_=!0,i==="audio"?(T._audio_added_=!0,l!==void 0&&(T._audioSSRC=l),h!==void 0&&(T._cname=h),v&&(T._audioOrtc=v)):(T._video_added_=!0,l!==void 0&&(T._videoSSRC=l),h!==void 0&&(T._cname=h),E!==void 0&&(T._rtxSsrcId=E),v&&(T._videoOrtc=v)),(i==="audio"?T.hasAudio:T.hasVideo)&&!y&&(M.info("[".concat(this._clientId,"] remote user ").concat(T.uid," published ").concat(i)),this.safeEmit(_t.USER_PUBLISHED,T,i)),i==="video"?Me.onGatewayStream(this._sessionId,Br.ON_ADD_VIDEO_STREAM,Dn.ON_ADD_VIDEO_STREAM,{peer:p||s}):Me.onGatewayStream(this._sessionId,Br.ON_ADD_AUDIO_STREAM,Dn.ON_ADD_AUDIO_STREAM,{peer:p||s}),this._p2pChannel.remoteMediaSsrcChanged(T,i,l).then(R=>{if(R)return M.debug("[".concat(this._clientId,"] resubscribe ").concat(i," for user ").concat(T.uid," after rejoin because SSRC id changed.")),this._p2pChannel.unsubscribe(T,i,!0).then(()=>this._subscribe(T,i,!0).catch(k=>{M.error("[".concat(this._clientId,"] resubscribe error"),k.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(T,i)&&(M.debug("[".concat(this._clientId,"] resubscribe ").concat(i," for user ").concat(T.uid," after reconnect.")),this._subscribe(T,i,!0).catch(R=>{M.error("[".concat(this._clientId,"] resubscribe error"),R.toString())}))}),w(this,"_handleRemoveStream",i=>{if(ne("BLOCK_LOCAL_CLIENT")&&Zl(i.uid,this.channelName))return;const s=this._users.find(h=>h.uid===i.uid);if(!s)return void M.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));M.debug("[".concat(this._clientId,"] stream removed with uid ").concat(i.uid));let l=()=>{};s.hasAudio&&s.hasVideo?l=()=>{M.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished audio track")),this.safeEmit(_t.USER_UNPUBLISHED,s,"audio"),M.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished video track")),this.safeEmit(_t.USER_UNPUBLISHED,s,"video")}:s.hasVideo?l=()=>{M.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished video track")),this.safeEmit(_t.USER_UNPUBLISHED,s,"video")}:s.hasAudio&&(l=()=>{M.info("[".concat(this._clientId,"] remote user ").concat(s.uid," unpublished audio track")),this.safeEmit(_t.USER_UNPUBLISHED,s,"audio")}),s._trust_audio_stream_added_state_=!0,s._trust_video_stream_added_state_=!0,s._audio_added_=!1,s._video_added_=!1,this._p2pChannel.unsubscribe(s).then(h=>{if(h)return this._gateway.unsubscribe(h,s.uid)}),s._audioSSRC=void 0,s._videoSSRC=void 0,s._audioOrtc=void 0,s._videoOrtc=void 0,s._rtxSsrcId=void 0,Me.onGatewayStream(this._sessionId,Br.ON_REMOVE_STREAM,Dn.ON_REMOVE_STREAM,{peer:i.uint_id||i.uid}),l()}),w(this,"_handleSetStreamLocalEnable",(i,s,l)=>{if(ne("BLOCK_LOCAL_CLIENT")&&Zl(s,this.channelName))return;const h=this._users.find(E=>E.uid===s);if(!h)return void M.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));M.debug("[".concat(this._clientId,"] local ").concat(i," ").concat(l?"enabled":"disabled"," with uid ").concat(s));const p=i==="audio"?h.hasAudio:h.hasVideo;if(i==="audio"){h._trust_audio_enabled_state_=!0;const E=h._audio_enabled_;if(h._audio_enabled_=l,h._audio_enabled_===E)return;{const T=h._audio_enabled_?"enable-local-audio":"disable-local-audio";M.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(s,", msg: ").concat(T)),this.safeEmit(_t.USER_INFO_UPDATED,s,T)}}else{h._trust_video_enabled_state_=!0;const E=h._video_enabled_;if(h._video_enabled_=l,h._video_enabled_===E)return;{const T=h._video_enabled_?"enable-local-video":"disable-local-video";M.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(s,", msg: ").concat(T)),this.safeEmit(_t.USER_INFO_UPDATED,s,T)}}const v=i==="audio"?h.hasAudio:h.hasVideo;return p!==v?!p&&v?(M.info("[".concat(this._clientId,"] remote user ").concat(s," published ").concat(i)),void this.safeEmit(_t.USER_PUBLISHED,h,i)):(i==="video"&&h._videoTrack&&h._videoTrack._destroy(),i==="audio"&&h._audioTrack,this._p2pChannel.muteRemote(h,i),M.info("[".concat(this._clientId,"] remote user ").concat(s," unpublished ").concat(i)),void this.safeEmit(_t.USER_UNPUBLISHED,h,i)):void 0}),w(this,"_handleMuteStream",(i,s,l)=>{if(ne("BLOCK_LOCAL_CLIENT")&&Zl(i,this.channelName))return;M.debug("[".concat(this._clientId,"] receive mute message"),i,s,l);const h=this._users.find(E=>E.uid===i);if(!h)return void M.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(i));const p=s==="audio"?h.hasAudio:h.hasVideo;if(s==="audio"){h._trust_audio_mute_state_=!0;const E=h._audio_muted_;if(h._audio_muted_=l,h._audio_muted_===E)return;{const T=h._audio_muted_?"mute-audio":"unmute-audio";M.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(i,", msg: ").concat(T)),this.safeEmit(_t.USER_INFO_UPDATED,i,T)}}else{h._trust_video_mute_state_=!0;const E=h._video_muted_;if(h._video_muted_=l,h._video_muted_===E)return;{const T=h._video_muted_?"mute-video":"unmute-video";M.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(i,", msg: ").concat(T)),this.safeEmit(_t.USER_INFO_UPDATED,i,T)}}const v=s==="audio"?h.hasAudio:h.hasVideo;if(p!==v){if(!p&&v)return(s==="audio"?h._audioSSRC:h._videoSSRC)?(M.info("[".concat(this._clientId,"] remote user ").concat(i," published ").concat(s)),void this.safeEmit(_t.USER_PUBLISHED,h,s)):void M.warning("[".concat(this._clientId,"] remote user ").concat(i," receive ").concat(s," unmute message  before add stream message, ").concat(s," SSRC doesn't exist yet."));s==="video"&&h._videoTrack&&h._videoTrack._destroy(),s==="audio"&&h._audioTrack,this._p2pChannel.muteRemote(h,s),M.info("[".concat(this._clientId,"] remote user ").concat(i," unpublished ").concat(s)),this.safeEmit(_t.USER_UNPUBLISHED,h,s)}}),w(this,"_handleP2PLost",async i=>{M.debug("[".concat(this._clientId,"] receive p2p lost"),i),parseInt(i.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():M.warning("[".concat(this._clientId,"] P2PLost stream not found"),i)}),w(this,"_handleTokenWillExpire",()=>{M.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(_t.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),w(this,"_handleBeforeUnload",i=>{i.type==="beforeunload"&&i.returnValue!==void 0&&i.returnValue!==""||(this.leave(),M.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),w(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.safeEmit(_t.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const i={downlinkNetworkQuality:0,uplinkNetworkQuality:0};i.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),i.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(_t.NETWORK_QUALITY,i)}),this._config=n,this._clientId=_n(5,"client-"),this.store=new Iq(n.codec,n.audioCodec,n.mode,this._clientId),this.store.clientCreated(),n.proxyServer&&this.setProxyServer(n.proxyServer,!0),n.turnServer&&this.setTurnServer(n.turnServer,!0),M.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(Yo," build: ").concat(Ry,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),n.clientRoleOptions)try{vP(n.clientRoleOptions),r=Object.assign({},n.clientRoleOptions)}catch(i){M.warning("[".concat(this._clientId,"] ").concat(i.toString()))}this._statsCollector=new Cd(this.store),this._statsCollector.onStatsException=(i,s,l)=>{M.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(i,", msg: ").concat(s,", uid: ").concat(l)),this.safeEmit(_t.EXCEPTION,{code:i,msg:s,uid:l})},this._statsCollector.onUploadPublishDuration=(i,s,l,h)=>{const p=this._users.find(v=>v.uid===i);p&&Me.peerPublishStatus(this._sessionId,{subscribeElapse:h,audioPublishDuration:s,videoPublishDuration:l,peer:p._uintid})},this.store.useDataChannel=Xn().supportDataChannel&&ne("SIGNAL_CHANNEL"),this._gateway=new uY(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:n.websocketRetryConfig||tr,httpRetryConfig:n.httpRetryConfig||tr,forceWaitGatewayResponse:n.forceWaitGatewayResponse===void 0||n.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:n.role,clientRoleOptions:r}),this._configDistribute=new _Y,this._p2pChannel=new Rq(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async join(n,r,i,s,l){const h=++this._numberOfJoinCount;this.store.joinStart(),s&&(this.store.uid=s);const p=wq(),v=zL()?window.isSecureContext:"Browser Not Support";if(!zL()&&!p||!window.isSecureContext){const V="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";M.warning(V)}const E=lC();this.connectionState==="DISCONNECTED"&&(this.store.avoidJoinStart=Math.round(Date.now()),M.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart)));const T=Me.reportApiInvoke(E,{name:nr.JOIN,options:[n,r,i,s],states:{isHttps:p,isSecureContext:v},tag:On.TRACER});Me.setAppId(n);try{if(!i&&i!==null)throw new X(j.INVALID_PARAMS,"Invalid token: ".concat(i,". If you don not use token, set it to null"));i&&Yr(i,"token",1,2047),Yr(n,"appid",1,2047),Ly(r),s&&My(s),l&&Yr(l,"optionalInfo",1,2047)}catch(V){throw T.onError(V),V}if(M.info("[".concat(this._clientId,"] start join channel ").concat(r,", join number: ").concat(h)),this._leaveMutex.isLocked&&(M.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),M.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){const V=new X(j.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw T.onError(V),V}this._sessionId||(this._sessionId=E,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING";const y=Op({clientId:this._clientId,appId:n,sid:this._sessionId,cname:r,uid:typeof s!="string"?s:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:i||n,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:l,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(y.setLocalAPVersion=this._setLocalAPVersion),typeof s=="string"&&(y.stringUid=s,this._uintUid?(y.uid=this._uintUid,this._uintUid=void 0):y.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(y.aesmode=this._encryptionMode,y.aespassword=await(async V=>{const $=dC(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),W=await window.crypto.subtle.importKey("spki",$,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),G=Zy(V),ie=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},W,G);return R0(new Uint8Array(ie))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new X(j.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(y.aessalt=this._encryptionSalt)}this._startSession(this._sessionId,{channel:r,appId:n});const R=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&R===this._sessionId&&Me.joinChannelTimeout(this._sessionId,5)},5e3);try{let V;const $=y.cloudProxyServer;if(["proxy3","proxy4","proxy5"].includes($)){const se=ne("PROXY_SERVER_TYPE3");Array.isArray(se)?y.proxyServer=se[0]:y.proxyServer=se}if(Me.setProxyServer(y.proxyServer),M.setProxyServer(y.proxyServer),this.store.requestAPStart(),y.stringUid&&!y.uid){const se=await bD(y.stringUid,y,this._axiosCancelSource.token,this._config.httpRetryConfig||tr,this.store);M.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(y.stringUid," => ").concat(se)),y.uid=se,V=await TD(y,this._axiosCancelSource.token,this._config.httpRetryConfig||tr,!0,this.store)}else V=await TD(y,this._axiosCancelSource.token,this._config.httpRetryConfig||tr,!0,this.store);if(!this._joinAndNotLeaveYet)throw new X(j.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(y,this._axiosCancelSource.token),this._configDistribute.on(dp.UPDATE_BITRATE_LIMIT,se=>{this._p2pChannel.updateBitrateLimit(se)})},0),this._key=i||n;const W=V.gatewayInfo;this._joinInfo=Op(Op({},y),{},{cid:W.cid,uid:y.uid?y.uid:W.uid,vid:W.vid,apResponse:W.res,uni_lbs_ip:W.uni_lbs_ip,gatewayAddrs:W.gatewayAddrs});const G=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new X(j.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));T.onSuccess(G),this._appId=n,this._channelName=y.cname,this._uid=G,this.store.uid=G,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(yi()?"beforeunload":"pagehide",this._handleBeforeUnload)},0);const ie=y.stringUid?"string uid: ".concat(y.stringUid,",uid: ").concat(y.uid):"uid: ".concat(this._uid);return M.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(r,",").concat(ie)),setTimeout(()=>{M.startUpload()},5e3),this.store.joinEnd(),k=this,Ql.includes(k)||Ql.push(k),G}catch(V){const $=Array.isArray(V)?V[0]:V;throw $&&$.code===j.OPERATION_ABORTED?M.warning("[".concat(this._clientId,"] join number: ").concat(h,", Joining channel failed, rollback"),$):M.error("[".concat(this._clientId,"] join number: ").concat(h,", Joining channel failed, rollback"),$),$.code!==j.OPERATION_ABORTED&&this._numberOfJoinCount===h&&(this._gateway.state="DISCONNECTED",this._reset()),T.onError($),$}var k}_joinGateway(){if(!this._joinInfo||!this._key)throw new X(j.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||this._joinInfo.proxyServer||!ne("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(n=>n).catch(n=>{if(n.code===j.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,Wt.FALLBACK),n;if(n.code===j.INIT_DATACHANNEL_TIMEOUT)return this._gateway.leave(!0,Wt.FALLBACK),n;throw n}).then(n=>{if(n instanceof X){if(n.code===j.INIT_WEBSOCKET_TIMEOUT){if(M.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new X(j.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";const r=ne("PROXY_SERVER_TYPE3");if(Array.isArray(r))if(this._joinInfo.apUrl){const s=/^https?:\/\/(.+?)(\/.*)?$/.exec(this._joinInfo.apUrl)[1].split("."),l=s.slice(s.length-2).join(".");r.forEach(h=>{this._joinInfo&&h.includes(l)&&(this._joinInfo.proxyServer=h)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=r[0])}else this._joinInfo.proxyServer=r[0];else this._joinInfo.proxyServer=r;const i=ne("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);return i&&i[1]&&i[1]!=="443"&&M.setProxyServer(this._joinInfo.proxyServer),ne("STATS_COLLECTOR_PORT").toString()!=="443"&&Me.setProxyServer(this._joinInfo.proxyServer),Me.reportApiInvoke(this._sessionId,{name:nr.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:On.TRACER}).onSuccess(),this.safeEmit(_t.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),ne("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&this._joinInfo.turnServer.servers.forEach(s=>{"forceturn"in s&&(s.forceturn=!0)}),this._gateway.join(this._joinInfo,this._key)}if(M.info("[".concat(this._clientId,"] join by datachannel timeout, fallback to websocket")),!this._joinInfo||!this._key)throw new X(j.INVALID_OPERATION);return Me.reportApiInvoke(this._sessionId,{name:nr.DATACHANNEL_FAILBACK,options:[this.store.clientId],tag:On.TRACER}).onSuccess(),this._joinGateway()}return n}).then(n=>n)}async leave(){M.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(yi()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(r){const i=Ql.indexOf(r);i!==-1&&Ql.splice(i,1)}(this);const n=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return M.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void n();await this._gateway.leave(this.connectionState!=="CONNECTED"),M.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),n()}async publish(n){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Array.isArray(n)||(n=[n]),n.length===0)throw new X(j.INVALID_PARAMS,"track list is empty");if(this._gateway.role==="audience")throw new X(j.INVALID_OPERATION,"audience can not publish stream");for(const s of n){if(!(s instanceof eC))throw new X(j.INVALID_PARAMS,"parameter is not local track");if(!s._enabled&&r)throw new X(j.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(s.getTrackId()))}M.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(n.map(s=>"".concat(s.getTrackId()," "))));const i=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),r&&n.forEach(s=>{const l=this._configDistribute.getBitrateLimit();s instanceof ar&&l&&s.setBitrateLimit(l.uplink)});try{await this._publishHighStream(n),M.info("[".concat(this._clientId,"] Publish success, id ").concat(n.map(s=>"".concat(s.getTrackId()," "))))}catch(s){throw M.error("[".concat(this._clientId,"] publish error"),s.toString()),s}finally{i()}}async unpublish(n){if(!this._joinInfo||this._uid===void 0)throw new X(j.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");n?Array.isArray(n)||(n=[n]):n=this._p2pChannel.getAllTracks(!0),M.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(n.map(i=>"".concat(i.getTrackId()," "))," "));const r=await this._publishMutex.lock();try{const i=await this._p2pChannel.unpublish(n);i&&await this._gateway.unpublish(i,this._uid),M.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(n.map(s=>"".concat(s.getTrackId()))))}catch(i){throw M.error("[".concat(this._clientId,"] unpublish error"),i.toString()),i}finally{r&&r()}}async subscribe(n,r){return this._subscribe(n,r)}async _subscribe(n,r,i){if(wr(r,"mediaType",["audio","video"]),!this._joinInfo)throw new X(j.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new X(j.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(E=>E===n)){const E=new X(j.INVALID_REMOTE_USER,"user is not in the channel");throw M.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid,", this user is not in the channel")),E}if(!n.hasAudio&&!n.hasVideo){const E=new X(j.INVALID_REMOTE_USER,"user is not published");throw M.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid,", user is not published")),E}if(!(i||(r!=="audio"||n.hasAudio&&n._audioSSRC!==void 0)&&(r!=="video"||n.hasVideo&&n._videoSSRC!==void 0))){const E=new X(j.REMOTE_USER_IS_NOT_PUBLISHED);throw M.error("[".concat(this._clientId,"] can not subscribe ").concat(n.uid," with mediaType ").concat(r,", remote track is not published")),E}const s=r==="audio"?n._audioSSRC:n._videoSSRC,l=r==="audio"?n._audioOrtc:n._videoOrtc,h=r==="video"?n._rtxSsrcId:void 0,p={stream_type:r==="audio"?st.AUDIO:st.VIDEO,ssrcId:s},v=await this._subscribeMutex.lock();M.info("[".concat(this._clientId,"] subscribe user ").concat(n.uid,", mediaType: ").concat(r));try{if(await this._p2pChannel.hasRemoteMediaWithLock(n,r))await this._p2pChannel.unmuteRemote(n,r);else try{Xo.markSubscribeStart(this.store.clientId,s),this.store.subscribe(n.uid,r,Date.now()),await this._p2pChannel.subscribe(n,r,s,h,l);try{await this._gateway.subscribe(n.uid,p,!0)}catch(T){if((T==null?void 0:T.code)!==j.WS_ABORT)throw await this._p2pChannel.unsubscribe(n,r),T;await this._p2pChannel.unsubscribe(n,r,!0),this._p2pChannel.setPendingRemoteMedia(n,r)}this.store.subscribe(n.uid,r,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,n,r)}catch(T){throw this._p2pChannel.reportSubscribeEvent(!1,T==null?void 0:T.code,n,r),T}M.info("[".concat(this._clientId,"] subscribe success user ").concat(n.uid,", mediaType: ").concat(r)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(n.uid,this._defaultStreamFallbackType).catch(T=>{M.warning("[".concat(this._clientId,"] auto set fallback failed"),T)});const E=r==="audio"?n._audioTrack:n._videoTrack;if(!E)throw new X(j.UNEXPECTED_ERROR,"can not find remote track in user object");return E}catch(E){throw M.error("[".concat(this._clientId,"] subscribe user ").concat(n.uid," error"),E),E}finally{v()}}async massSubscribe(n){if(ec(n,"subscribeList"),!this._joinInfo)throw new X(j.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new X(j.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const r=Date.now(),i=new Map,s=await this._subscribeMutex.lock();M.info("[".concat(this._clientId,"]start massSubscribe user ").concat(n.map(v=>{let{user:E,mediaType:T}=v;return"user: ".concat(E==null?void 0:E.uid,", mediaType: ").concat(T)}).join("; ")));const l=(n=[...n]).map(v=>{let{user:E,mediaType:T}=v;return{user:E,mediaType:T}}),h=await this._p2pChannel.globalLock();try{var p;for(let E=n.length-1;E>=0;E--){const T=n[E],{user:y,mediaType:R}=T;if(wr(R,"mediaType",["audio","video"]),!y){const $=new X(j.INVALID_PARAMS,"user property does not exist in subscribeList item");throw M.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),$}if(!this._users.find($=>$===y)){const $=new X(j.INVALID_REMOTE_USER,"user is not in the channel");M.error("[".concat(this._clientId,"] can not massSubscribe ").concat(y.uid,", this user is not in the channel")),l[E].error=$,n.splice(E,1);continue}if(R==="audio"&&(!y.hasAudio||y._audioSSRC===void 0)||R==="video"&&(!y.hasVideo||y._videoSSRC===void 0)){const $=new X(j.REMOTE_USER_IS_NOT_PUBLISHED);M.error("[".concat(this._clientId,"] can not subscribe ").concat(y.uid," with mediaType ").concat(R,", remote user is not published")),l[E].error=$,n.splice(E,1);continue}const k=rr.Video|rr.LwoVideo,V=i.get(y);if(V){if(R==="video"?V&k:V&rr.Audio){n.splice(E,1),M.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(y.uid,", mediaType:").concat(R," twice"));continue}i.set(y,V|(R==="video"?k:rr.Audio))}else i.set(y,R==="video"?k:rr.Audio)}for(let E=n.length-1;E>=0;E--){const T=n[E],{user:y,mediaType:R}=T,k=rr.Video|rr.LwoVideo;if(this._p2pChannel.hasRemoteMedia(y,R)){await this._p2pChannel.unmuteRemoteNoLock(y,R);const V=i.get(y);i.set(y,R==="video"?V^k:V^rr.Audio),n.splice(E,1)}}this.store.massSubscribe(n.map(E=>({userId:E.user.uid,type:E.mediaType})),r);const v=Mc(p=Array.from(i.entries())).call(p,(E,T)=>{let[y,R]=T;if(R===0)return E;const k={stream_id:y.uid,stream_type:R};return R&rr.Audio&&(k.audio_ssrc=y._audioSSRC),R&rr.Video&&(k.video_ssrc=y._videoSSRC),E.push(k),E},[]);try{n.length>0&&await this._p2pChannel.massSubscribeNoLock(n.map(T=>{let{user:y,mediaType:R}=T;return{user:y,mediaType:R,ssrcId:R===st.VIDEO?y._videoSSRC:y._audioSSRC,rtxSsrcId:R===st.VIDEO?y._rtxSsrcId:void 0}}));const E=new Map;if(v.length>0){const T=await this._gateway.subscribeAll(v,!0);((T==null?void 0:T.users)||[]).forEach(y=>{let{stream_id:R,video_error_code:k,audio_error_code:V,error_code:$}=y;(k||V||$)&&E.set(R,{video_error_code:k,audio_error_code:V,error_code:$})})}if(Array.from(E.entries()).length>0){const T=Array.from(E.entries()).map(y=>{let R,[k,V]=y;return V.error_code||V.video_error_code&&V.audio_error_code?R=void 0:V.video_error_code?R=st.VIDEO:V.audio_error_code&&(R=st.AUDIO),{user:this.remoteUsers.find($=>$.uid===k),mediaType:R}});await this._p2pChannel.massUnsubscribeNoLock(T)}for(const T of l){const y=E.get(T.user.uid);if(y){const R=y.error_code||T.mediaType==="audio"&&y.audio_error_code||T.mediaType==="video"&&y.video_error_code;if(R){const k=mp(R);M.error("user:".concat(T.user.uid," mediaType:").concat(T.mediaType," has massSubscribe error ").concat(k.desc)),T.error=new X(j.SUBSCRIBE_FAILED,"code ".concat(R,": ").concat(k.desc))}}T.error||(T.mediaType==="video"?T.track=T.user.videoTrack:T.track=T.user.audioTrack)}return this.store.massSubscribe(l.filter(T=>!T.error).map(T=>({userId:T.user.uid,type:T.mediaType})),void 0,Date.now()),l.forEach(T=>{var y;Me.subscribe(this.store.sessionId,{succ:!!T.error,ec:((y=T.error)===null||y===void 0?void 0:y.code)||null,video:T.mediaType===st.VIDEO,audio:T.mediaType===st.AUDIO,peerid:T.user.uid,subscribeRequestid:T.mediaType===st.VIDEO?T.user._videoSSRC:T.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-r)},!0)}),M.info("[".concat(this._clientId,"] massSubscribe success ").concat(n.map(T=>{let{user:y,mediaType:R}=T;return"user: ".concat(y==null?void 0:y.uid,", mediaType: ").concat(R)}).join("; "))),l}catch(E){throw await this._p2pChannel.massUnsubscribeNoLock(n),E}}finally{h(),s()}}async unsubscribe(n,r){if(r&&wr(r,"mediaType",["audio","video"]),!this._joinInfo)throw new X(j.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(s=>s===n)){const s=new X(j.INVALID_REMOTE_USER,"user is not in the channel");throw M.error("[".concat(this._clientId,"] can not unsubscribe ").concat(n.uid,", user is not in the channel")),s}M.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(n.uid,", mediaType: ").concat(r));const i=await this._subscribeMutex.lock();try{const s=await this._p2pChannel.unsubscribe(n,r);s&&await this._gateway.unsubscribe(s,n.uid),M.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(n.uid,", mediaType: ").concat(r))}catch(s){if(s.code===j.DISCONNECT_P2P)return void M.warning("disconnecting p2p, abort unsubscribe request.");throw M.error("[".concat(this._clientId,"] unsubscribe user ").concat(n.uid," error"),s.toString()),s}finally{i()}}async massUnsubscribe(n){if(ec(n,"unsubscribeList"),!this._joinInfo)throw new X(j.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");M.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(n.map(i=>{let{user:s,mediaType:l}=i;return"user: ".concat(s==null?void 0:s.uid,", mediaType: ").concat(l,";")}).join())),n=[...n];const r=new Map;for(let i=n.length-1;i>=0;i--){const{user:s,mediaType:l}=n[i];if(!s){const p=new X(j.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw M.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),p}if(wr(l,"mediaType",["video","audio",void 0]),!this._users.find(p=>p===s)){M.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(s.uid,", user is not in the channel")),n.splice(i,1);continue}const h=rr.Video|rr.LwoVideo;if(r.has(s)){const p=r.get(s);let v;switch(l){case"video":v=p&h;break;case"audio":v=p&rr.Audio;break;default:v=p&(rr.Audio|h)}if(v){M.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(s.uid,",mediaType:").concat(l," twice.")),n.splice(i,1);continue}l?l==="audio"?r.set(s,p|rr.Audio):l==="video"&&r.set(s,p|h):r.set(s,p|rr.Audio|h)}else l?l==="audio"?r.set(s,rr.Audio):l==="video"&&r.set(s,h):r.set(s,rr.Audio|h)}try{const i=await this._p2pChannel.massUnsubscribe(n);i&&await this._gateway.massUnsubscribe(i),M.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(n.map(s=>{let{user:l,mediaType:h}=s;return"user: ".concat(l==null?void 0:l.uid,", mediaType: ").concat(h,";")}).join()))}catch(i){if(i.code===j.DISCONNECT_P2P)return void M.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw M.error("[".concat(this._clientId,"] massUnsubscribe error"),i.toString()),i}}setLowStreamParameter(n){(function(i){if(!i)throw new X(j.INVALID_PARAMS);bn(i.width)||ky(i.width,"streamParameter.width"),bn(i.height)||ky(i.height,"streamParameter.height"),bn(i.framerate)||ky(i.framerate,"streamParameter.framerate"),bn(i.bitrate)||ln(i.bitrate,"streamParameter.bitrate")})(n),(!n.width&&n.height||n.width&&!n.height)&&M.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),M.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(n));const r=this._configDistribute.getLowStreamConfigDistribute();r&&r.bitrate&&n.bitrate&&r.bitrate<n.bitrate&&(n.bitrate=r.bitrate),this._lowStreamParameter=n}async enableDualStream(){if(!Xn().supportDualStream)throw Me.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new X(j.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new X(j.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(n){throw Me.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),n}this._isDualStreamEnabled=!0,Me.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),M.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new X(j.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(ke.LocalVideoLowTrack))try{const n=await this._p2pChannel.unpublishLowStream();n&&await this._gateway.unpublish(n,this._joinInfo.stringUid||this._joinInfo.uid)}catch(n){throw Me.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),n}this._isDualStreamEnabled=!1,Me.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),M.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(n,r){if(function(i){wr(i,"role",["audience","host"])}(n),r&&vP(r),this.mode==="rtc")throw M.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole")),new X(j.INVALID_OPERATION,"rtc mode can not use setClientRole");if(r&&r.level&&n==="host")throw new X(j.INVALID_OPERATION,"host mode can not set audience latency level");if(n==="audience"&&this._p2pChannel.hasLocalMedia())throw new X(j.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(n,r),this._config.role=n,M.info("[".concat(this._clientId,"] set client role to ").concat(n,", level: ").concat(r&&r.level))}setProxyServer(n,r){if(Yr(n,"proxyServer"),!r){if(this.connectionState!=="DISCONNECTED")throw new X(j.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new X(j.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=n,Me.setProxyServer(this._proxyServer),M.setProxyServer(this._proxyServer),M.info("[".concat(this._clientId,"] Set proxy server ").concat(r?"by initialize call":""," success."))}setTurnServer(n,r){if(Array.isArray(n)||(n=[n]),!r){if(this.connectionState!=="DISCONNECTED")throw new X(j.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new X(j.INVALID_OPERATION,"You have already set the proxy")}if(lp(n))return this._turnServer={servers:n,mode:"original-manual"},void M.info("[".concat(this._clientId,"] Set original turnserver ").concat(r?"by initialize call":""," success: ").concat(n.map(i=>i.urls).join(","),"."));n.forEach(i=>gP(i)),this._turnServer={servers:n,mode:"manual"},M.info("[".concat(this._clientId,"] Set turnserver ").concat(r?"by initialize call":""," success."))}setLicense(n){if(this.connectionState!=="DISCONNECTED")throw new X(j.INVALID_OPERATION,"you should set license before join channel");if(Yr(n,"license",32,32),!/^[A-Za-z\d]+$/.test(n))throw new X(j.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=n,M.info("[".concat(this._clientId,"] set license success"),n)}startProxyServer(n){if(this.connectionState!=="DISCONNECTED")throw new X(j.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint)throw new X(j.INVALID_OPERATION,"You have already set the proxy");const r=[3,4,5];let i;switch(n===void 0&&(n=3),n){case 1:case 2:throw new X(j.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:i="proxy3";break;case 4:i="proxy4";break;case 5:i="proxy5";break;default:throw new X(j.INVALID_PARAMS,"proxy server mode must be ".concat(r.join("|")))}this._cloudProxyServerMode=i,this.store.cloudProxyServerMode=i,M.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if(this.connectionState!=="DISCONNECTED")throw new X(j.INVALID_OPERATION,"Stop proxy server after leave channel");Me.setProxyServer(),M.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",M.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(n){if(!n.accessPoints)throw new X(j.INVALID_PARAMS,"accessPoints is required.");ec(n.accessPoints.serverList,"accessPoints.serverList"),Yr(n.accessPoints.domain,"accessPoints.domain");const r=(k,V)=>{ln(k,V,0,65535,!0)};let i=443;if(n.accessPoints.port&&(r(n.accessPoints.port,"accessPoints.port"),i=n.accessPoints.port),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new X(j.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");ne("CLOSE_AFB_FOR_LOCAL_AP")&&(nn("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),nn("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const s=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,l=n.accessPoints.domain,h=n.accessPoints.serverList.map(k=>s.test(k)?"".concat(k.replace(/\./g,"-"),".").concat(l):k),p=h.map(k=>"".concat(k,":").concat(i));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,nn("WEBCS_DOMAIN",p),nn("WEBCS_DOMAIN_BACKUP_LIST",p),nn("GATEWAY_DOMAINS",[l]),n.report&&n.report.hostname&&Array.isArray(n.report.hostname)&&n.report.hostname.length?(ec(n.report.hostname,"report.hostname"),nn("EVENT_REPORT_DOMAIN",n.report.hostname[0]),nn("EVENT_REPORT_BACKUP_DOMAIN",n.report.hostname[1]||n.report.hostname[0])):(nn("EVENT_REPORT_DOMAIN",h[0]),nn("EVENT_REPORT_BACKUP_DOMAIN",h[1]||h[0]));let v=6443;n.report&&n.report.port&&(r(n.report.port,"report.port"),v=n.report.port),nn("STATS_COLLECTOR_PORT",v),n.report?nn("ENABLE_EVENT_REPORT",!0):nn("ENABLE_EVENT_REPORT",!1);let E="";n.log&&n.log.hostname&&Array.isArray(n.log.hostname)&&n.log.hostname.length?(ec(n.log.hostname,"log.hostname"),E=n.log.hostname[0]):E=h[0];let T=6444;n.log&&n.log.port&&(r(n.log.port,"log.port"),T=n.log.port),nn("LOG_UPLOAD_SERVER","".concat(E,":").concat(T));let y=[];n.cds&&n.cds.hostname&&Array.isArray(n.cds.hostname)&&n.cds.hostname.length?(ec(n.cds.hostname,"cds.hostname"),y=n.cds.hostname):y=h;let R=443;n.cds&&n.cds.port&&(r(n.cds.port,"cds.port"),R=n.cds.port),nn("CDS_AP",y.map(k=>"".concat(k,":").concat(R))),n.cds?nn("ENABLE_CONFIG_DISTRIBUTE",!0):nn("ENABLE_CONFIG_DISTRIBUTE",!1),M.info("set local access point v2 success")}setLocalAccessPoints(n,r){if(ec(n,"serverList"),Yr(r,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new X(j.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const i=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;n=n.map(s=>i.test(s)?"".concat(s.replace(/\./g,"-"),".").concat(r):s),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,nn("WEBCS_DOMAIN",n),nn("WEBCS_DOMAIN_BACKUP_LIST",n),nn("GATEWAY_DOMAINS",[r]),nn("EVENT_REPORT_DOMAIN",n[0]),nn("EVENT_REPORT_BACKUP_DOMAIN",n[1]||n[0]),nn("LOG_UPLOAD_SERVER","".concat(n[0],":6444")),M.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(n){if(wr(n,"streamType",[0,1]),this._remoteDefaultVideoStreamType=n,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(n),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(r){throw M.error("[".concat(this._clientId,"] set default remote video stream type error"),r.toString()),r}else M.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(n))}async setRemoteVideoStreamType(n,r){wr(r,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(n,r),setTimeout(()=>{const i=this._users.find(s=>s.uid===n);i&&i.videoTrack&&i.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(i){throw M.error("[".concat(this._clientId,"] set remote video stream type error"),i.toString()),i}M.info("[".concat(this._clientId,"] set remote ").concat(n," video stream type to ").concat(r)),this._remoteStreamTypeCacheMap.set(n,r)}async setStreamFallbackOption(n,r){wr(r,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(n,r)}catch(i){throw M.error("[".concat(this._clientId,"] set stream fallback option"),i.toString()),i}M.info("[".concat(this._clientId,"] set remote ").concat(n," stream fallback type to ").concat(r)),this._streamFallbackTypeCacheMap.set(n,r)}setEncryptionConfig(n,r,i){if(function(s){wr(s,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(n),Yr(r,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(n)){if(!i||!(i instanceof Uint8Array&&i.length===32))throw new X(j.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(i)throw new X(j.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test(r)||M.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),this._encryptionMode=n,this._encryptionSecret=r,i&&(this._encryptionSalt=R0(i))}async renewToken(n){if(Yr(n,"token",1,2047),!this._key||!this._joinInfo)throw new X(j.INVALID_OPERATION,"renewToken should not be called before user join");const r=this._key;this._key=n,this._joinInfo&&(this._joinInfo.token=n);const i=await this._renewTokenMutex.lock();try{if(ne("USE_NEW_TOKEN")){M.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const s=await EY(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||tr);M.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:n,ticket:s})}else M.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:n});M.debug("[".concat(this._clientId,"] renewToken success"))}catch(s){throw this._key=r,this._joinInfo.token=r,M.error("[".concat(this._clientId,"] renewToken failed"),s.toString()),s}finally{i()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?M.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{const n=this._p2pChannel.getAudioLevels();this.safeEmit(_t.VOLUME_INDICATOR,n)},ne("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const n=this._statsCollector.getRTCStats(),r=this._gateway.getInChannelInfo();return n.Duration=Math.round(r.duration/1e3),n}async startLiveStreaming(n,r){if(!r){if(this.codec!=="h264")throw new X(j.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new X(j.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(n)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(n))throw new X(j.LIVE_STREAMING_TASK_CONFLICT);const i=r?hr.TRANSCODE:hr.RAW;return this._createLiveStreamingClient(i).startLiveStreamingTask(n,i)}setLiveTranscoding(n){return this._createLiveStreamingClient(hr.TRANSCODE).setTranscodingConfig(n)}async stopLiveStreaming(n){const r=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(i=>i&&i.hasUrl(n));if(!r.length)throw new X(j.INVALID_PARAMS,"can not find live streaming url to stop");await Pe.all(r.map(i=>i&&i.stopLiveStreamingTask(n)))}async addInjectStreamUrl(n,r){if(!this._joinInfo)throw new X(j.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const i=this._createLiveStreamingClient(hr.INJECT);i.setInjectStreamConfig(r,0),await i.startLiveStreamingTask(n,hr.INJECT)}async removeInjectStreamUrl(){var n;const r=this._createLiveStreamingClient(hr.INJECT),i=Array.from(bs(n=r.streamingTasks).call(n)).find(s=>s.mode===hr.INJECT);if(!this._joinInfo||!i)throw new X(j.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await r.stopLiveStreamingTask(i.url)}async startChannelMediaRelay(n){xD(n),await this._createChannelMediaRelayClient().startChannelMediaRelay(n)}async updateChannelMediaRelay(n){xD(n),await this._createChannelMediaRelayClient().updateChannelMediaRelay(n)}async stopChannelMediaRelay(){await this._createChannelMediaRelayClient().stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}sendStreamMessage(n){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new X(j.INVALID_OPERATION,"can not send data stream, not joined");if(typeof n=="string"&&(n=new TextEncoder().encode(n)),new Blob([n]).size>1024)throw new X(j.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(Je.DATA_STREAM,{payload:R0(n)},!r)}sendMetadata(n){if(!this._joinInfo)throw new X(j.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([n]).size>1024)throw new X(j.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Je.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:R0(n)})}async sendCustomReportMessage(n){if(Array.isArray(n)||(n=[n]),n.forEach(x9),!this._joinInfo)throw new X(j.INVALID_OPERATION,"can not send custom report, not joined");await Me.sendCustomReportMessage(this._joinInfo.sid,n)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(n,r){wr(r.spatialLayer,"spatialLayer",[0,1,2,3]),wr(r.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(n,r)}catch(i){throw M.error("[".concat(this._clientId,"] pick SVC layer failed"),i.toString()),i}}_reset(){if(M.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=Io.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach(n=>{n._audioTrack&&n._audioTrack._destroy(),n._videoTrack&&n._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new Ri("client-publish"),this._subscribeMutex=new Ri("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}if(this._moderation)try{this.setImageModeration(!1)}catch{}}_startSession(n,r){const i=n||lC();n?M.debug("[".concat(this._clientId,"] new Session ").concat(i)):M.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(i)),this._sessionId=i,this.store.sessionId=i,r?Me.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:r.channel,appid:r.appId,mode:this.mode}):this._joinInfo?Me.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this.mode}):this._gateway.joinInfo&&Me.sessionInit(this._sessionId,{lts:new Date().getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this.mode}),this._joinInfo&&(this._joinInfo.sid=i),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=i)}async _publishHighStream(n){if(!this._joinInfo||this._uid===void 0)throw new X(j.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new X(j.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&ne("FORCE_TURN")&&!ne("TURN_ENABLE_TCP")&&!ne("TURN_ENABLE_UDP"))throw new X(j.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");M.debug("[".concat(this._clientId,"] publish high stream"));try{const i=await this._p2pChannel.publish(n,this._isDualStreamEnabled,this._lowStreamParameter),s=(await i.next()).value;if(s){var r;let l;try{l=await this._gateway.publish(this._uid,s,!0)}catch(h){if(h.code!==j.DISCONNECT_P2P)throw i.throw(h),h}await i.next(((r=l)===null||r===void 0?void 0:r.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const l of n)l instanceof ar&&l._encoderConfig&&this._gateway.setVideoProfile(l._encoderConfig),!l.muted&&l.enabled||await this._p2pChannel.muteLocalTrack(l)}catch(i){if(this._p2pChannel.reportPublishEvent(!1,i==null?void 0:i.code,n),(i==null?void 0:i.code)===j.WS_ABORT)return;throw i}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new X(j.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new X(j.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));M.debug("[".concat(this._clientId,"] publish low stream"));const n=this._configDistribute.getLowStreamConfigDistribute();n&&n.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&n.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=n.bitrate));try{const i=await this._p2pChannel.publishLowStream(this._lowStreamParameter),s=(await i.next()).value;if(s){var r;let l;try{l=await this._gateway.publish(this._uid,s,!0)}catch(h){if(h.code!==j.DISCONNECT_P2P)throw i.throw(h),h}i.next(((r=l)===null||r===void 0?void 0:r.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(i){if(this._p2pChannel.reportPublishEvent(!1,i==null?void 0:i.code,void 0,!0),(i==null?void 0:i.code)===j.WS_ABORT)return;throw i}}_createLiveStreamingClient(n){if(!this._joinInfo||!this._appId)return new X(j.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const r=()=>new yY(this._joinInfo,this._config.websocketRetryConfig||tr,this._config.httpRetryConfig||tr),i=s=>{s.onLiveStreamError=(l,h)=>{Me.reportApiInvoke(this._sessionId,{name:nr.ON_LIVE_STREAM_ERROR,options:[l,h],tag:On.TRACER}).onSuccess(),this.safeEmit(_t.LIVE_STREAMING_ERROR,l,h)},s.onLiveStreamWarning=(l,h)=>{Me.reportApiInvoke(this._sessionId,{name:nr.ON_LIVE_STREAM_WARNING,options:[l,h],tag:On.TRACER}).onSuccess(),this.safeEmit(_t.LIVE_STREAMING_WARNING,l,h)},s.on(md.REQUEST_WORKER_MANAGER_LIST,(l,h,p)=>{if(!this._joinInfo)return p(new X(j.INVALID_OPERATION,"can not find join info to get worker manager"));ID(l,this._joinInfo,this._axiosCancelSource.token,tr).then(h).catch(p)})};switch(n){case hr.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=r(),i(this._liveRawStreamingClient)),this._liveRawStreamingClient;case hr.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=r(),i(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case hr.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=r(),this._injectStreamingClient.on(md.REQUEST_WORKER_MANAGER_LIST,(s,l,h)=>{if(!this._joinInfo)return h(new X(j.INVALID_OPERATION,"can not find join info to get worker manager"));ID(s,this._joinInfo,this._axiosCancelSource.token,tr).then(l).catch(h)}),this._injectStreamingClient.onInjectStatusChange=(s,l,h)=>{this.emit(_t.INJECT_STREAM_STATUS,s,l,h)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){if(!this._joinInfo)return new X(j.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:n,sendResolutionHeight:r}=this.getLocalVideoStats(),i={width:n,height:r};this._channelMediaRelayClient=new TY(this._joinInfo,this._clientId,this._config.websocketRetryConfig||tr,this._config.httpRetryConfig||tr,i),this._channelMediaRelayClient.on("state",s=>{s===bi.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.safeEmit(_t.CHANNEL_MEDIA_RELAY_STATE,s)}),this._channelMediaRelayClient.on("event",s=>{this.safeEmit(_t.CHANNEL_MEDIA_RELAY_EVENT,s)}),this._statsCollector.onStatsChanged=(s,l)=>{var h;s==="resolution"&&((h=this._channelMediaRelayClient)===null||h===void 0||h.setVideoProfile(l))}}return this._channelMediaRelayClient}_handleGatewayEvents(){this._gateway.on(An.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(An.CONNECTION_STATE_CHANGE,(n,r,i)=>{var s;if(i===Wt.FALLBACK)return;const l=()=>{this.safeEmit(_t.CONNECTION_STATE_CHANGE,n,r,i)};if(Me.reportApiInvoke(this._sessionId||((s=this._gateway.joinInfo)===null||s===void 0?void 0:s.sid)||null,{name:nr.CONNECTION_STATE_CHANGE,options:[n,r,i],tag:On.TRACER}).onSuccess(JSON.stringify({cur:n,prev:r,reason:i})),M.info("[".concat(this._clientId,"] connection state change: ").concat(r," -> ").concat(n)),n==="DISCONNECTED")return this._reset(),void l();if(n==="RECONNECTING")this._users.forEach(p=>{p._trust_in_room_=!1,p._trust_audio_enabled_state_=!1,p._trust_video_enabled_state_=!1,p._trust_audio_mute_state_=!1,p._trust_video_mute_state_=!1,p._trust_audio_stream_added_state_=!1,p._trust_video_stream_added_state_=!1,p._audioSSRC=void 0,p._videoSSRC=void 0,p._videoOrtc=void 0,p._audioOrtc=void 0,p._cname=void 0,p._rtxSsrcId=void 0}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(n==="CONNECTED"){var h;this._streamFallbackTypeCacheMap.forEach((p,v)=>{this._gateway.setStreamFallbackOption(v,p).catch(E=>{M.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),E)})}),this._remoteStreamTypeCacheMap.forEach((p,v)=>{this._gateway.setRemoteVideoStreamType(v,p).catch(E=>{M.warning("[".concat(this._clientId,"] auto set remote stream type failed"),E)})}),this._remoteDefaultVideoStreamType!==void 0&&((h=this._joinInfo)===null||h===void 0?void 0:h.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{M.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(p=>{M.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(p))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(p=>!p._trust_in_room_).forEach(p=>{M.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(p.uid)),this._handleUserOffline({uid:p.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(p=>{p._trust_audio_mute_state_||(M.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(p.uid)),this._handleMuteStream(p.uid,"audio",!1)),p._trust_video_mute_state_||(M.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(p.uid)),this._handleMuteStream(p.uid,"video",!1)),p._trust_audio_enabled_state_||(M.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(p.uid)),this._handleSetStreamLocalEnable("audio",p.uid,!0)),p._trust_video_enabled_state_||(M.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(p.uid)),this._handleSetStreamLocalEnable("video",p.uid,!0)),p._trust_video_stream_added_state_||(M.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(p.uid)),this._handleResetAddStream(p,"video")),p._trust_audio_stream_added_state_||(M.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(p.uid)),this._handleResetAddStream(p,"audio")),p._video_added_||p._audio_added_||(M.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(p.uid)),this._handleRemoveStream({uid:p.uid,uint_id:p._uintid}))}))},1e3)}l()}),this._gateway.on(An.REQUEST_NEW_GATEWAY_LIST,(n,r)=>{if(!this._joinInfo)return r(new X(j.UNEXPECTED_ERROR,"can not recover, no join info"));vC(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||tr,this.store).then(i=>{this._joinInfo&&(this._joinInfo.apResponse=i.gatewayInfo.res,this._joinInfo.gatewayAddrs=i.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=i.gatewayInfo.uni_lbs_ip),n(i.gatewayInfo.gatewayAddrs.map(s=>{if(this._joinInfo&&this._joinInfo.proxyServer){const l=s.address.split(":");return"wss://".concat(this._joinInfo.proxyServer,"/ws/?h=").concat(l[0],"&p=").concat(l[1])}return"wss://".concat(s.address)}))}).catch(r)}),this._gateway.on(An.NETWORK_QUALITY,n=>{this._networkQualitySensitivity==="normal"&&this.safeEmit(_t.NETWORK_QUALITY,n)}),this._gateway.on(An.STREAM_TYPE_CHANGE,(n,r)=>{this.safeEmit(_t.STREAM_TYPE_CHANGED,n,r),Me.reportApiInvoke(this._sessionId,{name:nr.STREAM_TYPE_CHANGE,options:[n,r],tag:On.TRACER}).onSuccess(JSON.stringify({uid:n,streamType:r}))}),this._gateway.on(An.IS_P2P_DISCONNECTED,n=>{this._p2pChannel.isP2PDisconnected()?n(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?n(!1):n(!0)}),this._gateway.on(An.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(An.REQUEST_P2P_CONNECTION_PARAMS,async(n,r,i)=>{try{r(await this._p2pChannel.startP2PConnection(n))}catch(s){i(s)}}),this._gateway.on(An.JOIN_RESPONSE,(n,r)=>{const{dtlsParameters:i,iceParameters:s,candidates:l,rtpCapabilities:h,setup:p,cname:v}=tL(n.ortc,r);this._p2pChannel.connect(s,i,l,h,p,v)}),this._gateway.on(An.REQUEST_DC_CONNECTION_PARAMS,n=>{n(this._p2pChannel.getEstablishParams())}),this._gateway.on(An.RESET_SIGNAL,n=>{this._p2pChannel.resetConnection(n),this._handleGatewaySignalEvents()}),this._gateway.on(An.DATACHANNEL_FAILBACK,()=>{this._joinGateway()}),this._gateway.on(An.DATACHANNEL_PRECONNECT,async(n,r,i,s)=>{var l,h,p,v,E,T;await this._p2pChannel.startP2PConnection({turnServer:(l=this._joinInfo)===null||l===void 0?void 0:l.turnServer},!0);const y=function(R,k){let V;return k&&k.ip&&typeof k.port=="number"?(V=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:k.ip,port:k.port.toString(),type:"host",extension:{}}],M.debug("Using remote candidate from AP ".concat(k.ip,":").concat(k.port)),k.ip6&&(V.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:k.ip6,port:k.port.toString(),type:"host",extension:{}}),M.debug("Using IPV6 remote candidate from AP ".concat(k.ip6,":").concat(k.port)))):V=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:R.ip,port:R.port.toString(),type:"host",extension:{}}],V}(n,r);return this._p2pChannel.preConnect({iceUfrag:"".concat((h=this._joinInfo)===null||h===void 0?void 0:h.apResponse.cid,"_").concat((p=this._joinInfo)===null||p===void 0?void 0:p.apResponse.cert),icePwd:"".concat((v=this._joinInfo)===null||v===void 0?void 0:v.apResponse.cid,"_").concat((E=this._joinInfo)===null||E===void 0?void 0:E.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:(T=ne("FINGERPRINT"))!==null&&T!==void 0?T:n.fingerprint}]},y,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(i).catch(s)})}_handleGatewaySignalEvents(){this._gateway.signal.on(gt.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(gt.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(gt.ON_ADD_AUDIO_STREAM,n=>this._handleAddAudioOrVideoStream("audio",n.uid,n.ssrcId,n.cname,n.uint_id,n.ortc)),this._gateway.signal.on(gt.ON_ADD_VIDEO_STREAM,n=>this._handleAddAudioOrVideoStream("video",n.uid,n.ssrcId,n.cname,n.uint_id,n.ortc,n.rtxSsrcId)),this._gateway.signal.on(gt.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(gt.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(gt.MUTE_AUDIO,n=>this._handleMuteStream(n.uid,"audio",!0)),this._gateway.signal.on(gt.UNMUTE_AUDIO,n=>this._handleMuteStream(n.uid,"audio",!1)),this._gateway.signal.on(gt.MUTE_VIDEO,n=>this._handleMuteStream(n.uid,"video",!0)),this._gateway.signal.on(gt.UNMUTE_VIDEO,n=>this._handleMuteStream(n.uid,"video",!1)),this._gateway.signal.on(gt.RECEIVE_METADATA,n=>{const r=dC(n.metadata);this.safeEmit(_t.RECEIVE_METADATA,n.uid,r)}),this._gateway.signal.on(gt.ON_DATA_STREAM,n=>{n.seq&&delete n.seq,n.payload=dC(n.payload),this.safeEmit(_t.STREAM_MESSAGE,n.uid,n.payload),this.onStreamMessage&&this.onStreamMessage(n)}),this._gateway.signal.on(gt.ON_CRYPT_ERROR,()=>{pp(()=>{M.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(_t.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(gt.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(gt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{M.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0),this.safeEmit(_t.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(gt.ON_STREAM_FALLBACK_UPDATE,n=>{M.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(n.stream_id,", attr: ").concat(n.stream_type)),this.safeEmit(_t.STREAM_FALLBACK,n.stream_id,n.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(gt.ON_PUBLISH_STREAM,n=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:n.proxy})),M.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(n))))}),this._gateway.signal.on(gt.ENABLE_LOCAL_VIDEO,n=>{this._handleSetStreamLocalEnable("video",n.uid,!0)}),this._gateway.signal.on(gt.DISABLE_LOCAL_VIDEO,n=>{this._handleSetStreamLocalEnable("video",n.uid,!1)}),this._gateway.signal.on(Fe.REQUEST_TIMEOUT,(n,r)=>{if(this._joinInfo)switch(n){case Je.PUBLISH:{if(!r)return;const p=(r=r).ortc;if(p){var i,s,l,h;const v=p.some(y=>{let{stream_type:R}=y;return R===pr.Audio}),E=p.some(y=>{let{stream_type:R}=y;return R!==pr.Audio}),T=p.some(y=>{let{stream_type:R}=y;return R===pr.Screen||R===pr.ScreenLow});r.state==="offer"&&Me.publish(this._joinInfo.sid,{eventElapse:Xo.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:j.TIMEOUT,audio:v,video:E,p2pid:r.p2p_id,publishRequestid:this.store.pubId,screenshare:T,audioName:v?(i=p.find(y=>{let{stream_type:R}=y;return R===pr.Audio}))===null||i===void 0||(s=i.ssrcs[0])===null||s===void 0?void 0:s.ssrcId.toString():void 0,videoName:E?(l=p.find(y=>{let{stream_type:R}=y;return R!==pr.Audio}))===null||l===void 0||(h=l.ssrcs[0])===null||h===void 0?void 0:h.ssrcId.toString():void 0})}break}case Je.SUBSCRIBE:(r=r)&&Me.subscribe(this._joinInfo.sid,{succ:!1,ec:j.TIMEOUT,audio:r.stream_type===st.AUDIO,video:r.stream_type===st.VIDEO,peerid:r.stream_id,subscribeRequestid:r.ssrcId,p2pid:this.store.p2pId,eventElapse:Xo.measureFromSubscribeStart(this.store.clientId,r.ssrcId)})}}),this._gateway.signal.on(gt.ON_P2P_OK,n=>{this.uid,this._uid}),this._gateway.signal.on(gt.ON_PUBLISHED_USER_LIST,n=>{if(n==null||!n.users)return;ne("BLOCK_LOCAL_CLIENT")&&(n.users=n.users.filter(s=>!Zl(s.audio_ssrc,this.channelName)));const r=[],i=[];for(const s of n.users){let l=this._users.find(T=>T.uid===s.stream_id);l?l._trust_in_room_=!0:(l=new SC(s.stream_id,s.stream_id),this._users.push(l),this.getListeners(_t.PUBLISHED_USER_LIST).length===0&&(M.debug("[".concat(this._clientId,"] user online"),s.stream_id),this.safeEmit(_t.USER_JOINED,l)));const h=rr.Audio&s.stream_type,p=(rr.Video|rr.LwoVideo)&s.stream_type,v=h&&l.hasAudio,E=p&&l.hasVideo;p&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0,l._videoSSRC=s.video_ssrc,l._rtxSsrcId=s.video_rtx),h&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0,l._audioSSRC=s.audio_ssrc),h&&!v&&this.getListeners(_t.PUBLISHED_USER_LIST).length===0&&(M.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published audio")),this.safeEmit(_t.USER_PUBLISHED,l,"audio")),p&&!E&&this.getListeners(_t.PUBLISHED_USER_LIST).length===0&&(M.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published video")),this.safeEmit(_t.USER_PUBLISHED,l,"video")),(h&&!v||p&&!E)&&r.push(l),p&&this._p2pChannel.hasPendingRemoteMedia(l,"video")&&i.push({user:l,mediaType:"video"}),h&&this._p2pChannel.hasPendingRemoteMedia(l,"audio")&&i.push({user:l,mediaType:"audio"})}i.length>0&&(M.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(i.map(s=>"user: ".concat(s.user.uid,", mediaType: ").concat(s.mediaType)).join("; ")," ")),this.massSubscribe(i).catch(s=>{M.error("[".concat(this._clientId,"] mass resubscribe error"),s.toString())})),this.getListeners(_t.PUBLISHED_USER_LIST).length>0?(M.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(r.map(s=>s.uid).join(", "))),this.safeEmit(_t.PUBLISHED_USER_LIST,r)):M.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(r.map(s=>s.uid).join(", ")))})}_handleP2PChannelEvents(){this._p2pChannel.on(wt.RequestMuteLocal,async(n,r,i)=>{if(this._joinInfo)try{await this._gateway.muteLocal(n,this._joinInfo.stringUid||this._joinInfo.uid),r()}catch(s){s.code===j.DISCONNECT_P2P?r():i(s)}else r()}),this._p2pChannel.on(wt.RequestUnmuteLocal,async(n,r,i)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(n,this._joinInfo.stringUid||this._joinInfo.uid),r()}catch(s){s.code===j.DISCONNECT_P2P?r():i(s)}else r()}),this._p2pChannel.on(wt.RequestRePublish,(n,r,i)=>{this.publish(n,!1).then(r).catch(i)}),this._p2pChannel.on(wt.RequestReSubscribe,async(n,r,i)=>{try{for(const{user:s,kind:l}of n)l===st.VIDEO?await this.subscribe(s,"video"):await this.subscribe(s,"audio");r()}catch(s){i(s)}}),this._p2pChannel.on(wt.RequestUploadStats,(n,r)=>{this._gateway.uploadStats(n,r)}),this._p2pChannel.on(wt.MediaReconnectStart,n=>{this.safeEmit(_t.MEDIA_RECONNECT_START,n)}),this._p2pChannel.on(wt.MediaReconnectEnd,n=>{this.safeEmit(_t.MEDIA_RECONNECT_END,n)}),this._p2pChannel.on(wt.NeedSignalRTT,n=>{n(this._gateway.getSignalRTT())}),this._p2pChannel.on(wt.RequestRestartICE,async n=>{const r=await this._p2pChannel.restartICE(n),i=await r.next();if(i.done)return;const s=i.value;let l;try{l=await this._gateway.restartICE({iceParameters:s})}catch(p){return void r.throw(p)}const{iceParameters:h}=function(p){const v=p.iceParameters;return{iceParameters:{iceUfrag:v.iceUfrag,icePwd:v.icePwd}}}(l);await r.next({remoteIceParameters:h})}),this._p2pChannel.on(wt.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(wt.RequestReconnectPC,async()=>{var n;const{iceParameters:r,dtlsParameters:i,rtpCapabilities:s}=await this._p2pChannel.startP2PConnection({turnServer:(n=this._joinInfo)===null||n===void 0?void 0:n.turnServer}),{gatewayEstablishParams:l,gatewayAddress:h}=await this._gateway.reconnectPC({iceParameters:r,dtlsParameters:i,rtpCapabilities:s}),{dtlsParameters:p,iceParameters:v,candidates:E,rtpCapabilities:T,setup:y,cname:R}=tL(l,h);await this._p2pChannel.connect(v,p,E,T,y,R),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(wt.RequestUnpublishForReconnectPC,async(n,r,i)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(n,this._uid),r()):i()}),this._p2pChannel.on(wt.P2PLost,()=>{this.safeEmit(_t.P2P_LOST,this.store.uid)}),this._p2pChannel.on(wt.UpdateVideoEncoder,n=>{n._encoderConfig&&this._gateway.setVideoProfile(n._encoderConfig)}),this._p2pChannel.on(wt.ConnectionTypeChange,n=>{this.safeEmit(_t.IS_USING_CLOUD_PROXY,n)}),this._p2pChannel.on(wt.RequestLowStreamParameter,n=>{n(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(wt.QueryClientConnectionState,n=>{n(this.connectionState)})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(n){if(this.connectionState!=="CONNECTED"||!this._joinInfo)throw new X(j.INVALID_OPERATION,"[".concat(this._clientId,"] Client did not join channel"));if(this._inspect)throw new X(j.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));if(!n)throw new X(j.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig is necessary"));if(!n.inspectType||!Array.isArray(n.inspectType))throw new X(j.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));{const r=[...new Set(n.inspectType)];r.forEach(i=>{if(!["supervise","moderation"].includes(i))throw new X(j.INVALID_PARAMS,"[".concat(this._clientId,"] ").concat(i," is not a valid inspect type."))}),n.inspectType=r}if(n&&n.extraInfo&&n.extraInfo.length>1024)throw new X(j.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{const r=new G0(n);this._inspect=r,this.handleVideoInspectEvents(this._inspect),await r.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},tr)}catch(r){throw Array.isArray(r)?r[0]:r}}async disableContentInspect(){if(!this._inspect)throw new X(j.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(n){throw Array.isArray(n)?n[0]:n}}async setImageModeration(n,r){if(pd(n,"enabled"),n){if(!r)throw new X(j.INVALID_PARAMS,"[".concat(this._clientId,"] config is necessary"));if(ln(r.interval,"interval",1e3,1/0),this.connectionState!=="CONNECTED"||!this._joinInfo)throw new X(j.INVALID_OPERATION,"[".concat(this._clientId,'] can not enable image moderation, not joined"'));try{if(this._moderation)return void this._moderation.updateConfig(r);const i=new nT(r);this._moderation=i,this.handleImageModerationEvents(this._moderation),await i.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},tr)}catch(i){throw Array.isArray(i)?i[0]:i}}else{if(!this._moderation)throw new X(j.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(i){throw Array.isArray(i)?i[0]:i}}}handleImageModerationEvents(n){n.on(qo.CONNECTION_STATE_CHANGE,(r,i)=>{switch(this.emit(_t.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,r,i),r){case po.CONNECTED:if(this.connectionState!=="CONNECTED")throw this.setImageModeration(!1),new X(j.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");n.inspectImage()}}),n.on(qo.CLIENT_LOCAL_VIDEO_TRACK,r=>{r(this.localTracks.filter(i=>i.trackMediaType==="video")[0])})}handleVideoInspectEvents(n){n.on(fr.CONNECTION_STATE_CHANGE,(r,i)=>{switch(this.emit(_t.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,r,i),i){case Ao.CONNECTED:if(this.connectionState!=="CONNECTED")return void this.emit(_t.CONTENT_INSPECT_ERROR,new X(j.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));n.inspectImage()}}),n.on(fr.INSPECT_RESULT,(r,i)=>{var s;if((i==null?void 0:i.code)===j.INVALID_OPERATION&&this.connectionState==="DISCONNECTED")return M.debug("Stop inspect content because that has left channel"),this==null||(s=this._inspect)===null||s===void 0||s.close(),void(this._inspect=void 0);this.emit(_t.CONTENT_INSPECT_RESULT,r,i)}),n.on(fr.CLIENT_LOCAL_VIDEO_TRACK,r=>{r(this.localTracks.filter(i=>i.trackMediaType==="video")[0])})}getJoinChannelServiceRecords(){return M.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(n){pd(n,"enabled"),nn("ENABLE_PUBLISH_AUDIO_FILTER",n),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(n)}_handleResetAddStream(n,r){switch(r){case"audio":n._audio_added_=!1,n._trust_audio_stream_added_state_=!0;break;case"video":n._video_added_=!1,n._trust_video_stream_added_state_=!0}}}).prototype,"leave",[fM],Object.getOwnPropertyDescriptor(we.prototype,"leave"),we.prototype),_e(we.prototype,"publish",[mM],Object.getOwnPropertyDescriptor(we.prototype,"publish"),we.prototype),_e(we.prototype,"unpublish",[gM],Object.getOwnPropertyDescriptor(we.prototype,"unpublish"),we.prototype),_e(we.prototype,"subscribe",[vM],Object.getOwnPropertyDescriptor(we.prototype,"subscribe"),we.prototype),_e(we.prototype,"massSubscribe",[EM],Object.getOwnPropertyDescriptor(we.prototype,"massSubscribe"),we.prototype),_e(we.prototype,"unsubscribe",[_M],Object.getOwnPropertyDescriptor(we.prototype,"unsubscribe"),we.prototype),_e(we.prototype,"massUnsubscribe",[SM],Object.getOwnPropertyDescriptor(we.prototype,"massUnsubscribe"),we.prototype),_e(we.prototype,"setLowStreamParameter",[yM],Object.getOwnPropertyDescriptor(we.prototype,"setLowStreamParameter"),we.prototype),_e(we.prototype,"enableDualStream",[CM],Object.getOwnPropertyDescriptor(we.prototype,"enableDualStream"),we.prototype),_e(we.prototype,"disableDualStream",[TM],Object.getOwnPropertyDescriptor(we.prototype,"disableDualStream"),we.prototype),_e(we.prototype,"setClientRole",[bM],Object.getOwnPropertyDescriptor(we.prototype,"setClientRole"),we.prototype),_e(we.prototype,"setProxyServer",[RM],Object.getOwnPropertyDescriptor(we.prototype,"setProxyServer"),we.prototype),_e(we.prototype,"setTurnServer",[IM],Object.getOwnPropertyDescriptor(we.prototype,"setTurnServer"),we.prototype),_e(we.prototype,"setLicense",[wM],Object.getOwnPropertyDescriptor(we.prototype,"setLicense"),we.prototype),_e(we.prototype,"startProxyServer",[OM],Object.getOwnPropertyDescriptor(we.prototype,"startProxyServer"),we.prototype),_e(we.prototype,"stopProxyServer",[AM],Object.getOwnPropertyDescriptor(we.prototype,"stopProxyServer"),we.prototype),_e(we.prototype,"setLocalAccessPointsV2",[NM],Object.getOwnPropertyDescriptor(we.prototype,"setLocalAccessPointsV2"),we.prototype),_e(we.prototype,"setLocalAccessPoints",[PM],Object.getOwnPropertyDescriptor(we.prototype,"setLocalAccessPoints"),we.prototype),_e(we.prototype,"setRemoteDefaultVideoStreamType",[xM],Object.getOwnPropertyDescriptor(we.prototype,"setRemoteDefaultVideoStreamType"),we.prototype),_e(we.prototype,"setRemoteVideoStreamType",[DM],Object.getOwnPropertyDescriptor(we.prototype,"setRemoteVideoStreamType"),we.prototype),_e(we.prototype,"setStreamFallbackOption",[kM],Object.getOwnPropertyDescriptor(we.prototype,"setStreamFallbackOption"),we.prototype),_e(we.prototype,"setEncryptionConfig",[LM],Object.getOwnPropertyDescriptor(we.prototype,"setEncryptionConfig"),we.prototype),_e(we.prototype,"renewToken",[MM],Object.getOwnPropertyDescriptor(we.prototype,"renewToken"),we.prototype),_e(we.prototype,"enableAudioVolumeIndicator",[UM],Object.getOwnPropertyDescriptor(we.prototype,"enableAudioVolumeIndicator"),we.prototype),_e(we.prototype,"startLiveStreaming",[VM],Object.getOwnPropertyDescriptor(we.prototype,"startLiveStreaming"),we.prototype),_e(we.prototype,"setLiveTranscoding",[FM],Object.getOwnPropertyDescriptor(we.prototype,"setLiveTranscoding"),we.prototype),_e(we.prototype,"stopLiveStreaming",[BM],Object.getOwnPropertyDescriptor(we.prototype,"stopLiveStreaming"),we.prototype),_e(we.prototype,"addInjectStreamUrl",[jM],Object.getOwnPropertyDescriptor(we.prototype,"addInjectStreamUrl"),we.prototype),_e(we.prototype,"removeInjectStreamUrl",[HM],Object.getOwnPropertyDescriptor(we.prototype,"removeInjectStreamUrl"),we.prototype),_e(we.prototype,"startChannelMediaRelay",[$M],Object.getOwnPropertyDescriptor(we.prototype,"startChannelMediaRelay"),we.prototype),_e(we.prototype,"updateChannelMediaRelay",[WM],Object.getOwnPropertyDescriptor(we.prototype,"updateChannelMediaRelay"),we.prototype),_e(we.prototype,"stopChannelMediaRelay",[GM],Object.getOwnPropertyDescriptor(we.prototype,"stopChannelMediaRelay"),we.prototype),_e(we.prototype,"sendCustomReportMessage",[zM],Object.getOwnPropertyDescriptor(we.prototype,"sendCustomReportMessage"),we.prototype),_e(we.prototype,"pickSVCLayer",[KM],Object.getOwnPropertyDescriptor(we.prototype,"pickSVCLayer"),we.prototype),_e(we.prototype,"enableContentInspect",[YM],Object.getOwnPropertyDescriptor(we.prototype,"enableContentInspect"),we.prototype),_e(we.prototype,"disableContentInspect",[qM],Object.getOwnPropertyDescriptor(we.prototype,"disableContentInspect"),we.prototype),_e(we.prototype,"setImageModeration",[XM],Object.getOwnPropertyDescriptor(we.prototype,"setImageModeration"),we.prototype),_e(we.prototype,"getJoinChannelServiceRecords",[JM],Object.getOwnPropertyDescriptor(we.prototype,"getJoinChannelServiceRecords"),we.prototype),_e(we.prototype,"setPublishAudioFilterEnabled",[QM],Object.getOwnPropertyDescriptor(we.prototype,"setPublishAudioFilterEnabled"),we.prototype),we);class qq extends KP{set currentState(r){r!==this._currentState&&(this._currentState=r,this.safeEmit(Yi.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),w(this,"audioBuffer",void 0),w(this,"sourceNode",void 0),w(this,"startPlayTime",0),w(this,"startPlayOffset",0),w(this,"pausePlayTime",0),w(this,"options",void 0),w(this,"currentLoopCount",0),w(this,"currentPlaybackSpeed",100),w(this,"_currentState","stopped"),this.audioBuffer=r,this.options=i,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(r){this.currentState==="stopped"?(this.options=r,this.startPlayOffset=this.options.startPlayTime||0):M.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(r){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=r,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=r))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}setAudioBufferPlaybackSpeed(r){this.sourceNode&&(this.currentState==="playing"&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=r/100),this.currentPlaybackSpeed=r}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const r=this.context.createBufferSource();return r.buffer=this.audioBuffer,r.loop=!!this.options.loop,r.connect(this.outputNode),r.playbackRate.value=this.currentPlaybackSpeed/100,r}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const e2=new Map;async function Xq(n,r){let i=null;if(typeof n=="string"){const l=e2.get(n);if(l)return M.debug("use cached audio resource: ",n),l;try{i=(await Ja(()=>Io.get(n,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(h){throw new X(j.FETCH_AUDIO_FILE_FAILED,h.toString())}}else i=await new Pe((h,p)=>{const v=new FileReader;v.onload=E=>{E.target?h(E.target.result):p(new X(j.READ_LOCAL_AUDIO_FILE_ERROR))},v.onerror=()=>{p(new X(j.READ_LOCAL_AUDIO_FILE_ERROR))},v.readAsArrayBuffer(n)});const s=await function(l){const h=_d();return new Pe((p,v)=>{h.decodeAudioData(l,E=>{p(E)},E=>{v(new X(j.DECODE_AUDIO_FILE_FAILED,E.toString()))})})}(i);return typeof n=="string"&&r&&e2.set(n,s),s}function t2(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function K0(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?t2(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):t2(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function rT(n,r,i,s){i.optimizationMode&&(s&&s.width&&s.height?(i.encoderConfig=K0(K0({},s),{},{bitrateMin:s.bitrateMin,bitrateMax:s.bitrateMax}),i.optimizationMode!=="motion"&&i.optimizationMode!=="detail"||(r.contentHint=i.optimizationMode,r.contentHint===i.optimizationMode?M.debug("[".concat(n,"] set content hint to"),i.optimizationMode):M.debug("[".concat(n,"] set content hint failed")))):M.warning("[".concat(n,"] can not apply optimization mode bitrate config, no encoderConfig")))}const Jq=$t().name;function Qq(n,r,i,s){let l,h=0,p=null;return new Pe((v,E)=>{setTimeout(()=>{l&&(l(),v(h))},r),l=GP(()=>{(function(){h>s&&l&&(l(),v(h));const T=i.getContext("2d");if(!T){const k=new X(j.UNEXPECTED_ERROR,"can not get canvas 2d context.");return M.error(k.toString()),void E(k)}T.drawImage(n,0,0,160,120);const y=T.getImageData(0,0,i.width,i.height),R=Math.floor(y.data.length/3);if(p){for(let k=0;k<R;k+=3)if(y.data[k]!==p[k])return h+=1,void(p=y.data);p=y.data}else p=y.data})()},30)})}class Ap{constructor(r,i){w(this,"id",0),w(this,"element",void 0),w(this,"peerPair",void 0),w(this,"context",void 0),w(this,"audioPlayerElement",void 0),w(this,"audioTrack",void 0),Ap.count+=1,this.id=Ap.count,this.element=r,this.context=i}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=r=>{const i=document.createElement("audio");i.srcObject=new MediaStream([r.track]),i.play(),this.audioPlayerElement=i}}async switchSdp(){if(!this.peerPair)return;const r=async(s,l)=>{const h=l==="offer"?await s.createOffer():await s.createAnswer();return await s.setLocalDescription(h),s.iceGatheringState==="complete"?s.localDescription:new Pe(p=>{s.onicegatheringstatechange=()=>{s.iceGatheringState==="complete"&&p(s.localDescription)}})},i=async(s,l)=>await s.setRemoteDescription(l);try{const s=await r(this.peerPair[0],"offer");await i(this.peerPair[1],s);const l=await r(this.peerPair[1],"answer");await i(this.peerPair[0],l)}catch(s){throw new X(j.LOCAL_AEC_ERROR,s.toString()).print()}}async getTracksFromMediaElement(r){if(this.audioTrack)return this.audioTrack;let i;try{r instanceof HTMLVideoElement&&(r.captureStream?r.captureStream():r.mozCaptureStream()),i=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(r).connect(i)}catch(l){throw new X(j.LOCAL_AEC_ERROR,l.toString()).print()}if(!i)throw new X(j.LOCAL_AEC_ERROR,"no dest node when local aec").print();const s=i.stream.getAudioTracks()[0];return this.audioTrack=s,s}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const r=this.element,i=await this.getTracksFromMediaElement(r);this.peerPair&&this.peerPair[0].addTrack(i),await this.switchSdp()}close(){M.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(r=>{r.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}var n2,Y0;w(Ap,"count",0);const Zq=window.AudioContext||window.webkitAudioContext,eX=new(n2=Ge({report:Me}),_e((Y0=class{constructor(){w(this,"units",[]),w(this,"context",void 0)}processExternalMediaAEC(n){if(!this._doesEnvironmentNeedAEC())return M.debug("the system does not need to process local aec"),-1;this.context||(this.context=new Zq);let r=this.units.find(i=>i&&i.getElement()===n);return r||(r=new Ap(n,this.context),this.units.push(r)),r.startEchoCancellation(),M.debug("start processing local audio echo cancellation, id is",r.id),r.id}_doesEnvironmentNeedAEC(){return $t().name!==qt.SAFARI}}).prototype,"processExternalMediaAEC",[n2],Object.getOwnPropertyDescriptor(Y0.prototype,"processExternalMediaAEC"),Y0.prototype),Y0);function r2(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function i2(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?r2(Object(i),!0).forEach(function(s){w(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):r2(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}const iT=window||document;function o2(n){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!iT)return;const i=Er._cspEventHandlerPointer;if(i&&r)return void console.error(i,r);const s=l=>{if(!(l&&l.blockedURI&&(Er.onSecurityPolicyViolation||Er.getListeners(es.SECURITY_POLICY_VIOLATION).length>0)))return;const h=l.blockedURI;ne("CSP_DETECTED_HOSTNAME_LIST").some(p=>h.includes(p))&&(Er.onSecurityPolicyViolation&&typeof Er.onSecurityPolicyViolation=="function"&&Er.onSecurityPolicyViolation(l),Er.getListeners(es.SECURITY_POLICY_VIOLATION).length>0&&Er.safeEmit(es.SECURITY_POLICY_VIOLATION,l))};i&&iT.removeEventListener("securitypolicyviolation",i),(r||n&&typeof n=="function"||Er.getListeners(es.SECURITY_POLICY_VIOLATION).length>0)&&iT.addEventListener("securitypolicyviolation",s),Er._cspEventHandlerPointer=s}nn("PROCESS_ID","process-".concat(_n(8,""),"-").concat(_n(4,""),"-").concat(_n(4,""),"-").concat(_n(4,""),"-").concat(_n(12,""))),function(){const n=$t();hi.getDisplayMedia=function(r){return!!(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)}(),hi.getStreamFromExtension=n.name===qt.CHROME&&Number(n.version)>34,hi.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const r=new RTCPeerConnection;let i=!1;try{r.addTransceiver("audio"),i=!0}catch{}return r.close(),i}(),hi.supportMinBitrate=n.name===qt.CHROME||n.name===qt.EDGE,hi.supportSetRtpSenderParameters=function(){const r=$t();return!window.RTCRtpSender||!window.RTCRtpSender.prototype.setParameters||!window.RTCRtpSender.prototype.getParameters?!1:!!Yl()||!(!yi()&&!Zm())||r.name===qt.FIREFOX&&Number(r.version)>=64}(),n.name===qt.SAFARI&&(Number(n.version)>=14?hi.supportDualStream=!0:hi.supportDualStream=!1),hi.webAudioMediaStreamDest=function(){const r=$t();return!(r.name===qt.SAFARI&&Number(r.version)<12)}(),hi.supportReplaceTrack=function(){return window.RTCRtpSender?typeof RTCRtpSender.prototype.replaceTrack=="function":!1}(),hi.supportWebGL=typeof WebGLRenderingContext<"u",hi.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Yl()||(hi.webAudioWithAEC=!0),hi.supportShareAudio=function(){const r=$t();return(r.os===Kr.WIN_10||r.os===Kr.WIN_81||r.os===Kr.WIN_7||r.os===Kr.LINUX||r.os===Kr.MAC_OS)&&r.name===qt.CHROME&&Number(r.version)>=74}(),hi.supportDualStreamEncoding=function(){const r=$t();return ne("DISABLE_WEBAUDIO")?!0:r.name==="Safari"&&Number(r.version)>=14||!!(r.name==="Chrome"&&/Windows/i.test(r.os||"")&&Number(r.version)>=100&&ne("CHROME_DUAL_STREAM_USE_ENCODING"))}(),hi.supportDataChannel=function(){return!!(ay(76)||function(r){const i=$t();return!(i.name!==qt.FIREFOX||!i.osVersion)&&Number(i.version)>=r}(68)||function(r){const i=$t();return!(i.name!==qt.SAFARI||!i.osVersion)&&Number(i.version)>=r}(14))}(),hi.supportPCSetConfiguration=function(){const r=window.RTCPeerConnection;return!Mn()&&!!r&&r.prototype.setConfiguration instanceof Function}(),hi.supportWebRTCEncodedTransform=function(){const r=$t();return r.name==="Chrome"&&Number(r.version)>=86}(),M.info("browser compatibility",JSON.stringify(hi),JSON.stringify(n))}(),function(){let n;try{n=window.localStorage.getItem("websdk_ng_global_parameter")}catch(r){return void M.error("Error loading sdk config",r.message)}if(n)try{const r=JSON.parse(window.atob(n)),i=Date.now();M.debug("Loading global parameters from cache",r),Object.keys(r).forEach(s=>{if(Object.prototype.hasOwnProperty.call(Ki,s)){const{value:l,expires:h}=r[s];if(h&&h<=i)return;Jl[s]=l,Ki[s]=l}})}catch(r){M.error("Error loading mutableParamsCache: ".concat(n),r.message)}}(),Array.isArray(Jl.AREAS)&&Jl.AREAS.length>0&&fC(Jl.AREAS,!0);const Er=function(n){const r=new xn,i=n,s={getListeners:r.getListeners.bind(r),on:(l,h)=>(function(p,v){p===es.SECURITY_POLICY_VIOLATION&&o2(v,!0)}(l,h),r.on.bind(r)(l,h)),addListener:r.addListener.bind(r),once:r.once.bind(r),off:r.off.bind(r),removeAllListeners:r.removeAllListeners.bind(r),emit:r.emit.bind(r),safeEmit:r.safeEmit.bind(r)};return i2(i2({},i),s)}({__CLIENT_LIST__:Ql,__TRACK_LIST__:sp,VERSION:Yo,BUILD:Ry,setParameter:(n,r,i)=>{M.debug("setParameter key:".concat(n,", value:").concat(JSON.stringify(r))),nn(n,r,i)},getParameter:ne,getSupportedCodec:async function(){let n={audio:[],video:[]};try{let r=new RTCPeerConnection;r.addTransceiver("video",{direction:"recvonly"}),r.addTransceiver("audio",{direction:"recvonly"});const i=(await r.createOffer()).sdp;if(!i)return n;r.close(),r=null,n=function(s){const l={video:[],audio:[]};return s.match(/ VP8/i)&&l.video.push("VP8"),s.match(/ VP9/i)&&l.video.push("VP9"),s.match(/ AV1/i)&&l.video.push("AV1"),s.match(/ H264/i)&&l.video.push("H264"),s.match(/ H265/i)&&l.video.push("H265"),s.match(/ opus/i)&&l.audio.push("OPUS"),s.match(/ PCMU/i)&&l.audio.push("PCMU"),s.match(/ PCMA/i)&&l.audio.push("PCMA"),s.match(/ G722/i)&&l.audio.push("G722"),l}(i)}catch(r){throw new X(j.CREATE_OFFER_FAILED,r.toString&&r.toString()).print()}return n},checkSystemRequirements:function(){const n=Me.reportApiInvoke(null,{name:nr.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:On.TRACER});let r=!1;try{const h=window.RTCPeerConnection,p=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,v=window.WebSocket;r=!!(h&&p&&v)}catch(h){return M.error("check system requirement failed: ",h),!1}let i=!1;const s=$t();s.name===qt.CHROME&&Number(s.version)>=58&&(!o7()||i7())&&(i=!0),s.name===qt.FIREFOX&&Number(s.version)>=56&&(i=!0),s.name===qt.OPERA&&Number(s.version)>=45&&(i=!0),s.name===qt.SAFARI&&Number(s.version)>=11&&(i=!0),(vN()||$t().name===qt.QQ)&&(i=!0),M.debug("checkSystemRequirements, api:",r,"browser",i);const l=r&&i;return n.onSuccess(l),l},getDevices:function(n){return Do.enumerateDevices(!0,!0,n)},getMicrophones:function(n){return Do.getRecordingDevices(n)},getCameras:function(n){return Do.getCamerasDevices(n)},getElectronScreenSources:qP,getPlaybackDevices:function(n){return Do.getSpeakers(n)},createClient:function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const r=Me.reportApiInvoke(null,{name:nr.CREATE_CLIENT,options:[n],tag:On.TRACER});try{k9(n)}catch(i){throw r.onError(i),i}return n.audioCodec===void 0&&(n.audioCodec="opus"),r.onSuccess(),new Yq(Op(Op({forceWaitGatewayResponse:!0},n),{},{role:n.mode==="rtc"?"host":n.role||"audience"}))},createCameraVideoTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=Me.reportApiInvoke(null,{tag:On.TRACER,name:nr.CREATE_CAM_VIDEO_TRACK,options:[K0({},n)]}),i=A0(n),s=_n(8,"track-cam-");let l=null;M.info("start create camera video track with config",JSON.stringify(n),"trackId",s);try{l=(await wa({video:i},s)).getVideoTracks()[0]||null}catch(p){throw r.onError(p),p}if(!l){const p=new X(j.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(p),p.throw()}n.optimizationMode&&rT(s,l,n,Xl(n.encoderConfig));const h=new _k(l,n,i,n.scalabiltyMode?d0(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,s);return r.onSuccess(h.getTrackId()),M.info("create camera video success, trackId:",s),h},createCustomVideoTrack:function(n){const r=Me.reportApiInvoke(null,{tag:On.TRACER,name:nr.CREATE_CUSTOM_VIDEO_TRACK,options:[n]}),i=new ar(n.mediaStreamTrack,{width:n.width,height:n.height,frameRate:n.frameRate,bitrateMax:n.bitrateMax,bitrateMin:n.bitrateMin},n.scalabiltyMode?d0(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,_n(8,"track-cus-"),[gr.CUSTOM_TRACK]);return r.onSuccess(i.getTrackId()),M.info("create custom video track success with config",n,"trackId",i.getTrackId()),i},createScreenVideoTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable";const i=Me.reportApiInvoke(null,{tag:On.TRACER,name:nr.CREATE_SCREEN_VIDEO_TRACK,options:[K0({},n),r]});n.encoderConfig?typeof n.encoderConfig=="string"||n.encoderConfig.width&&n.encoderConfig.height||(n.encoderConfig.width={max:1920},n.encoderConfig.height={max:1080}):n.encoderConfig="1080p_2";const s=bY(n),l=_n(8,"track-scr-v-");let h=null,p=null;const v=Xn();if(!v.supportShareAudio&&r==="enable"){const y=new X(j.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return i.onError(y),y.throw()}M.info("start create screen video track with config",n,"withAudio",r,"trackId",l);try{const y=await wa({screen:s,screenAudio:r==="auto"?v.supportShareAudio:r==="enable"},l);h=y.getVideoTracks()[0]||null,p=y.getAudioTracks()[0]||null}catch(y){throw i.onError(y),y}if(!h){const y=new X(j.UNEXPECTED_ERROR,"can not find track in media stream");return i.onError(y),y.throw()}if(!p&&r==="enable"){h&&h.stop();const y=new X(j.SHARE_AUDIO_NOT_ALLOWED);return i.onError(y),y.throw()}n.optimizationMode||(n.optimizationMode="detail"),n.optimizationMode&&(rT(l,h,n,n.encoderConfig&&wy(n.encoderConfig)),n.encoderConfig&&typeof n.encoderConfig!="string"&&(n.encoderConfig.bitrateMin=n.encoderConfig.bitrateMax));const E=new ar(h,n.encoderConfig?wy(n.encoderConfig):{},n.scalabiltyMode?d0(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,l,[gr.SCREEN_TRACK]);if(!p)return i.onSuccess(E.getTrackId()),M.info("create screen video track success","video:",E.getTrackId()),E;const T=new Zr(p,void 0,_n(8,"track-scr-a-"),!1,!0);return i.onSuccess([E.getTrackId(),T.getTrackId()]),M.info("create screen video track success","video:",E.getTrackId(),"audio:",T.getTrackId()),[E,T]},createMicrophoneAndCameraTracks:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=Me.reportApiInvoke(null,{tag:On.TRACER,name:nr.CREATE_MIC_AND_CAM_TRACKS,options:[n,r]}),s=A0(r),l=VD(n),h=_n(8,"track-mic-"),p=_n(8,"track-cam-");let v=null,E=null;M.info("start create camera video track(".concat(p,") and microphone audio track(").concat(h,") with config, audio: ").concat(JSON.stringify(n),", video: ").concat(JSON.stringify(r)));try{const R=await wa({audio:l,video:s},"".concat(h,"-").concat(p));v=R.getAudioTracks()[0],E=R.getVideoTracks()[0]}catch(R){throw i.onError(R),R}if(!v||!E){const R=new X(j.UNEXPECTED_ERROR,"can not find tracks in media stream");return i.onError(R),R.throw()}r.optimizationMode&&rT(p,E,r,Xl(r.encoderConfig));const T=new S0(v,n,l,h),y=new _k(E,r,s,r.scalabiltyMode?d0(r.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},r.optimizationMode,p);return i.onSuccess([T.getTrackId(),y.getTrackId()]),M.info("create camera video track(".concat(p,") and microphone audio track(").concat(h,") success")),[T,y]},createMicrophoneAudioTrack:async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=Me.reportApiInvoke(null,{tag:On.TRACER,name:nr.CREATE_MIC_AUDIO_TRACK,options:[n]}),i=VD(n),s=_n(8,"track-mic-");let l=null;M.info("start create microphone audio track with config",JSON.stringify(n),"trackId",s);try{l=(await wa({audio:i},s)).getAudioTracks()[0]||null}catch(p){throw r.onError(p),p}if(!l){const p=new X(j.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(p),p.throw()}const h=new S0(l,n,i,s);return r.onSuccess(h.getTrackId()),M.info("create microphone audio track success, trackId:",s),h},createCustomAudioTrack:function(n){const r=Me.reportApiInvoke(null,{tag:On.TRACER,name:nr.CREATE_CUSTOM_AUDIO_TRACK,options:[n]}),i=new Zr(n.mediaStreamTrack,n.encoderConfig?h0(n.encoderConfig):{},_n(8,"track-cus-"),!1,!0);return M.info("create custom audio track success with config",n,"trackId",i.getTrackId()),r.onSuccess(i.getTrackId()),i},createBufferSourceAudioTrack:async function(n){const r=Me.reportApiInvoke(null,{tag:On.TRACER,name:nr.CREATE_BUFFER_AUDIO_TRACK,options:[n]});if(ne("DISABLE_WEBAUDIO"))throw new X(j.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");const i=_n(8,"track-buf-");M.info("start create buffer source audio track with config",JSON.stringify(n),"trackId",i);const s=n.source;if(!(n.source instanceof AudioBuffer))try{n.source=await Xq(n.source,n.cacheOnlineFile)}catch(p){return r.onError(p),p.throw()}const l=new qq(n.source),h=new tY(s,l,n.encoderConfig?h0(n.encoderConfig):{},i);return M.info("create buffer source audio track success, trackId:",i),r.onSuccess(h.getTrackId()),h},setAppType:function(n){if(M.debug("setAppType: ".concat(n)),!(Number.isInteger(n)&&n>=0))throw M.debug("Invalid appType"),new X(j.INVALID_PARAMS,"invalid app type",n);nn("APP_TYPE",Math.floor(n))},setLogLevel:function(n){M.setLogLevel(n)},enableLogUpload:function(){ne("USE_NEW_LOG")?nn("UPLOAD_LOG",!0):M.enableLogUpload()},disableLogUpload:function(){ne("USE_NEW_LOG")?nn("UPLOAD_LOG",!1):M.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new PD},checkAudioTrackIsActive:async function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const i=Me.reportApiInvoke(null,{tag:On.TRACER,name:nr.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[r]});if(!(n instanceof Zr||n instanceof j0)){const E=new X(j.INVALID_TRACK,"the parameter is not a audio track");return i.onError(E),E.throw()}r&&r<1e3&&(r=1e3);const s=n instanceof Zr?n.getTrackLabel():"remote_track",l=n.getVolumeLevel();let h=l,p=l;const v=Date.now();return new Pe(E=>{const T=setInterval(()=>{const y=n.getVolumeLevel();h=y>h?y:h,p=y<p?y:p;const R=h-p>1e-4,k=Date.now()-v;if(R||k>r){clearInterval(T);const V=R,$={duration:k,deviceLabel:s,maxVolumeLevel:h,result:V};M.info("[track-".concat(n.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify($))),i.onSuccess($),E(V)}},200)})},checkVideoTrackIsActive:async function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;const i=Me.reportApiInvoke(null,{tag:On.TRACER,name:nr.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[r]});if(!(n instanceof ar||n instanceof B0)){const k=new X(j.INVALID_TRACK,"the parameter is not a video track");return i.onError(k),k.throw()}const s=4;r&&r<1e3&&(r=1e3);const l=n instanceof ar?n.getTrackLabel():"remote_track",h=n.getMediaStreamTrack(!0),p=document.createElement("video");p.style.width="1px",p.style.height="1px",p.setAttribute("muted",""),p.muted=!0,p.setAttribute("playsinline",""),p.controls=!1,(yi()||Zm())&&(p.style.opacity="0.01",p.style.position="fixed",p.style.left="0",p.style.top="0",document.body.appendChild(p)),p.srcObject=new MediaStream([h]),p.play();const v=document.createElement("canvas");v.width=160,v.height=120;let E=0,T=0;try{const k=Date.now();E=await Qq(p,r,v,s),T=Date.now()-k}catch(k){throw i.onError(k),k}Jq===qt.SAFARI&&(p.pause(),p.remove()),p.srcObject=null;const y=E>s,R={duration:T,changedPicNum:E,deviceLabel:l,result:y};return M.info("[track-".concat(n.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(R))),i.onSuccess(R),y},setArea:fC,audioElementPlayCenter:fo,processExternalMediaAEC:function(n){eX.processExternalMediaAEC(n)},registerExtensions:function(n){n.forEach(r=>{const i=r;i.__registered__=!0,i.logger.hookLog=M.extLog,i.reporter.hookApiInvoke=Me.extApiInvoke,i.parameters&&Object.keys(i.parameters).forEach(s=>{i.parameters[s]=ne(s)})})},ChannelMediaRelayError:$c,ChannelMediaRelayEvent:Qa,ChannelMediaRelayState:bi,RemoteStreamFallbackType:Gy,RemoteStreamType:Wy,ConnectionDisconnectedReason:Wt,AudienceLatencyLevelType:Fy,AREAS:Rt});return Object.defineProperties(Er,{onAudioAutoplayFailed:{get:()=>Po.onAudioAutoplayFailed,set:n=>{Po.onAudioAutoplayFailed=n}},onAutoplayFailed:{get:()=>Po.onAutoplayFailed,set:n=>{Po.onAutoplayFailed=n}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>Er._onSecurityPolicyViolation,set(n){Er._onSecurityPolicyViolation=n,o2(n)}}}),Do.on(tc.CAMERA_DEVICE_CHANGED,n=>{M.info("camera device changed",JSON.stringify(n)),Er.onCameraChanged&&Er.onCameraChanged(n),Er.safeEmit(es.CAMERA_CHANGED,n)}),Do.on(tc.RECORDING_DEVICE_CHANGED,n=>{M.info("microphone device changed",JSON.stringify(n)),Er.onMicrophoneChanged&&Er.onMicrophoneChanged(n),Er.safeEmit(es.MICROPHONE_CHANGED,n)}),Do.on(tc.PLAYOUT_DEVICE_CHANGED,n=>{M.debug("playout device changed",JSON.stringify(n)),Er.onPlaybackDeviceChanged&&Er.onPlaybackDeviceChanged(n),Er.safeEmit(es.PLAYBACK_DEVICE_CHANGED,n)}),fo.onAutoplayFailed=()=>{M.info("detect audio element autoplay failed"),Po.onAudioAutoplayFailed&&Po.onAudioAutoplayFailed()},Gt.on("autoplay-failed",()=>{M.info("detect webaudio autoplay failed"),Po.onAudioAutoplayFailed&&Po.onAudioAutoplayFailed(),Er.safeEmit(es.AUTOPLAY_FAILED)}),window&&(window.__ARTC__=Er),Er})})(wX);const Ou=LE(Ib);var wb={},gc={},OX={get exports(){return gc},set exports(e){gc=e}},ma={},Ob={},AX={get exports(){return Ob},set exports(e){Ob=e}},VF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ue,ve){var Ee=ue.length;ue.push(ve);e:for(;0<Ee;){var oe=Ee-1>>>1,ae=ue[oe];if(0<c(ae,ve))ue[oe]=ve,ue[Ee]=ae,Ee=oe;else break e}}function o(ue){return ue.length===0?null:ue[0]}function a(ue){if(ue.length===0)return null;var ve=ue[0],Ee=ue.pop();if(Ee!==ve){ue[0]=Ee;e:for(var oe=0,ae=ue.length,he=ae>>>1;oe<he;){var pe=2*(oe+1)-1,Ae=ue[pe],Le=pe+1,Qe=ue[Le];if(0>c(Ae,Ee))Le<ae&&0>c(Qe,Ae)?(ue[oe]=Qe,ue[Le]=Ee,oe=Le):(ue[oe]=Ae,ue[pe]=Ee,oe=pe);else if(Le<ae&&0>c(Qe,Ee))ue[oe]=Qe,ue[Le]=Ee,oe=Le;else break e}}return ve}function c(ue,ve){var Ee=ue.sortIndex-ve.sortIndex;return Ee!==0?Ee:ue.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var d=Date,f=d.now();e.unstable_now=function(){return d.now()-f}}var m=[],g=[],_=1,S=null,C=3,O=!1,I=!1,A=!1,L=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(ue){for(var ve=o(g);ve!==null;){if(ve.callback===null)a(g);else if(ve.startTime<=ue)a(g),ve.sortIndex=ve.expirationTime,t(m,ve);else break;ve=o(g)}}function U(ue){if(A=!1,D(ue),!I)if(o(m)!==null)I=!0,le(B);else{var ve=o(g);ve!==null&&me(U,ve.startTime-ue)}}function B(ue,ve){I=!1,A&&(A=!1,N(K),K=-1),O=!0;var Ee=C;try{for(D(ve),S=o(m);S!==null&&(!(S.expirationTime>ve)||ue&&!Q());){var oe=S.callback;if(typeof oe=="function"){S.callback=null,C=S.priorityLevel;var ae=oe(S.expirationTime<=ve);ve=e.unstable_now(),typeof ae=="function"?S.callback=ae:S===o(m)&&a(m),D(ve)}else a(m);S=o(m)}if(S!==null)var he=!0;else{var pe=o(g);pe!==null&&me(U,pe.startTime-ve),he=!1}return he}finally{S=null,C=Ee,O=!1}}var F=!1,H=null,K=-1,te=5,Y=-1;function Q(){return!(e.unstable_now()-Y<te)}function J(){if(H!==null){var ue=e.unstable_now();Y=ue;var ve=!0;try{ve=H(!0,ue)}finally{ve?q():(F=!1,H=null)}}else F=!1}var q;if(typeof P=="function")q=function(){P(J)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,re=ee.port2;ee.port1.onmessage=J,q=function(){re.postMessage(null)}}else q=function(){L(J,0)};function le(ue){H=ue,F||(F=!0,q())}function me(ue,ve){K=L(function(){ue(e.unstable_now())},ve)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ue){ue.callback=null},e.unstable_continueExecution=function(){I||O||(I=!0,le(B))},e.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<ue?Math.floor(1e3/ue):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_getFirstCallbackNode=function(){return o(m)},e.unstable_next=function(ue){switch(C){case 1:case 2:case 3:var ve=3;break;default:ve=C}var Ee=C;C=ve;try{return ue()}finally{C=Ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ue,ve){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var Ee=C;C=ue;try{return ve()}finally{C=Ee}},e.unstable_scheduleCallback=function(ue,ve,Ee){var oe=e.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?oe+Ee:oe):Ee=oe,ue){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Ee+ae,ue={id:_++,callback:ve,priorityLevel:ue,startTime:Ee,expirationTime:ae,sortIndex:-1},Ee>oe?(ue.sortIndex=Ee,t(g,ue),o(m)===null&&ue===o(g)&&(A?(N(K),K=-1):A=!0,me(U,Ee-oe))):(ue.sortIndex=ae,t(m,ue),I||O||(I=!0,le(B))),ue},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(ue){var ve=C;return function(){var Ee=C;C=ve;try{return ue.apply(this,arguments)}finally{C=Ee}}}})(VF);(function(e){e.exports=VF})(AX);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FF=b,pa=Ob;function Ve(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BF=new Set,Sf={};function Lu(e,t){Sh(e,t),Sh(e+"Capture",t)}function Sh(e,t){for(Sf[e]=t,e=0;e<t.length;e++)BF.add(t[e])}var vc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ab=Object.prototype.hasOwnProperty,NX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u2={},d2={};function PX(e){return Ab.call(d2,e)?!0:Ab.call(u2,e)?!1:NX.test(e)?d2[e]=!0:(u2[e]=!0,!1)}function xX(e,t,o,a){if(o!==null&&o.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function DX(e,t,o,a){if(t===null||typeof t>"u"||xX(e,t,o,a))return!0;if(a)return!1;if(o!==null)switch(o.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function yo(e,t,o,a,c,u,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=o,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=d}var Hi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Hi[e]=new yo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Hi[t]=new yo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Hi[e]=new yo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Hi[e]=new yo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Hi[e]=new yo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Hi[e]=new yo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Hi[e]=new yo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Hi[e]=new yo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Hi[e]=new yo(e,5,!1,e.toLowerCase(),null,!1,!1)});var FI=/[\-:]([a-z])/g;function BI(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(FI,BI);Hi[t]=new yo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(FI,BI);Hi[t]=new yo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(FI,BI);Hi[t]=new yo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Hi[e]=new yo(e,1,!1,e.toLowerCase(),null,!1,!1)});Hi.xlinkHref=new yo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Hi[e]=new yo(e,1,!1,e.toLowerCase(),null,!0,!0)});function jI(e,t,o,a){var c=Hi.hasOwnProperty(t)?Hi[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(DX(t,o,c,a)&&(o=null),a||c===null?PX(t)&&(o===null?e.removeAttribute(t):e.setAttribute(t,""+o)):c.mustUseProperty?e[c.propertyName]=o===null?c.type===3?!1:"":o:(t=c.attributeName,a=c.attributeNamespace,o===null?e.removeAttribute(t):(c=c.type,o=c===3||c===4&&o===!0?"":""+o,a?e.setAttributeNS(a,t,o):e.setAttribute(t,o))))}var bc=FF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J0=Symbol.for("react.element"),Xd=Symbol.for("react.portal"),Jd=Symbol.for("react.fragment"),HI=Symbol.for("react.strict_mode"),Nb=Symbol.for("react.profiler"),jF=Symbol.for("react.provider"),HF=Symbol.for("react.context"),$I=Symbol.for("react.forward_ref"),Pb=Symbol.for("react.suspense"),xb=Symbol.for("react.suspense_list"),WI=Symbol.for("react.memo"),ll=Symbol.for("react.lazy"),$F=Symbol.for("react.offscreen"),h2=Symbol.iterator;function Np(e){return e===null||typeof e!="object"?null:(e=h2&&e[h2]||e["@@iterator"],typeof e=="function"?e:null)}var Pr=Object.assign,aT;function Yp(e){if(aT===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);aT=t&&t[1]||""}return`
`+aT+e}var sT=!1;function cT(e,t){if(!e||sT)return"";sT=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var a=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){a=g}e.call(t.prototype)}else{try{throw Error()}catch(g){a=g}e()}}catch(g){if(g&&a&&typeof g.stack=="string"){for(var c=g.stack.split(`
`),u=a.stack.split(`
`),d=c.length-1,f=u.length-1;1<=d&&0<=f&&c[d]!==u[f];)f--;for(;1<=d&&0<=f;d--,f--)if(c[d]!==u[f]){if(d!==1||f!==1)do if(d--,f--,0>f||c[d]!==u[f]){var m=`
`+c[d].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=d&&0<=f);break}}}finally{sT=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?Yp(e):""}function kX(e){switch(e.tag){case 5:return Yp(e.type);case 16:return Yp("Lazy");case 13:return Yp("Suspense");case 19:return Yp("SuspenseList");case 0:case 2:case 15:return e=cT(e.type,!1),e;case 11:return e=cT(e.type.render,!1),e;case 1:return e=cT(e.type,!0),e;default:return""}}function Db(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Jd:return"Fragment";case Xd:return"Portal";case Nb:return"Profiler";case HI:return"StrictMode";case Pb:return"Suspense";case xb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case HF:return(e.displayName||"Context")+".Consumer";case jF:return(e._context.displayName||"Context")+".Provider";case $I:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case WI:return t=e.displayName||null,t!==null?t:Db(e.type)||"Memo";case ll:t=e._payload,e=e._init;try{return Db(e(t))}catch{}}return null}function LX(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Db(t);case 8:return t===HI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ol(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function WF(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function MX(e){var t=WF(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,u=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(d){a=""+d,u.call(this,d)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Q0(e){e._valueTracker||(e._valueTracker=MX(e))}function GF(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),a="";return e&&(a=WF(e)?e.checked?"true":"false":e.value),e=a,e!==o?(t.setValue(e),!0):!1}function sv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function kb(e,t){var o=t.checked;return Pr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function p2(e,t){var o=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;o=Ol(t.value!=null?t.value:o),e._wrapperState={initialChecked:a,initialValue:o,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function zF(e,t){t=t.checked,t!=null&&jI(e,"checked",t,!1)}function Lb(e,t){zF(e,t);var o=Ol(t.value),a=t.type;if(o!=null)a==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Mb(e,t.type,o):t.hasOwnProperty("defaultValue")&&Mb(e,t.type,Ol(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function f2(e,t,o){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,o||t===e.value||(e.value=t),e.defaultValue=t}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function Mb(e,t,o){(t!=="number"||sv(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var qp=Array.isArray;function dh(e,t,o,a){if(e=e.options,t){t={};for(var c=0;c<o.length;c++)t["$"+o[c]]=!0;for(o=0;o<e.length;o++)c=t.hasOwnProperty("$"+e[o].value),e[o].selected!==c&&(e[o].selected=c),c&&a&&(e[o].defaultSelected=!0)}else{for(o=""+Ol(o),t=null,c=0;c<e.length;c++){if(e[c].value===o){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Ub(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ve(91));return Pr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function m2(e,t){var o=t.value;if(o==null){if(o=t.children,t=t.defaultValue,o!=null){if(t!=null)throw Error(Ve(92));if(qp(o)){if(1<o.length)throw Error(Ve(93));o=o[0]}t=o}t==null&&(t=""),o=t}e._wrapperState={initialValue:Ol(o)}}function KF(e,t){var o=Ol(t.value),a=Ol(t.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),t.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),a!=null&&(e.defaultValue=""+a)}function g2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function YF(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vb(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?YF(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Z0,qF=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,o,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,o,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Z0=Z0||document.createElement("div"),Z0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Z0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function yf(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var tf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UX=["Webkit","ms","Moz","O"];Object.keys(tf).forEach(function(e){UX.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),tf[t]=tf[e]})});function XF(e,t,o){return t==null||typeof t=="boolean"||t===""?"":o||typeof t!="number"||t===0||tf.hasOwnProperty(e)&&tf[e]?(""+t).trim():t+"px"}function JF(e,t){e=e.style;for(var o in t)if(t.hasOwnProperty(o)){var a=o.indexOf("--")===0,c=XF(o,t[o],a);o==="float"&&(o="cssFloat"),a?e.setProperty(o,c):e[o]=c}}var VX=Pr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fb(e,t){if(t){if(VX[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ve(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ve(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ve(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ve(62))}}function Bb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jb=null;function GI(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hb=null,hh=null,ph=null;function v2(e){if(e=Xf(e)){if(typeof Hb!="function")throw Error(Ve(280));var t=e.stateNode;t&&(t=jE(t),Hb(e.stateNode,e.type,t))}}function QF(e){hh?ph?ph.push(e):ph=[e]:hh=e}function ZF(){if(hh){var e=hh,t=ph;if(ph=hh=null,v2(e),t)for(e=0;e<t.length;e++)v2(t[e])}}function e3(e,t){return e(t)}function t3(){}var lT=!1;function n3(e,t,o){if(lT)return e(t,o);lT=!0;try{return e3(e,t,o)}finally{lT=!1,(hh!==null||ph!==null)&&(t3(),ZF())}}function Cf(e,t){var o=e.stateNode;if(o===null)return null;var a=jE(o);if(a===null)return null;o=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(Ve(231,t,typeof o));return o}var $b=!1;if(vc)try{var Pp={};Object.defineProperty(Pp,"passive",{get:function(){$b=!0}}),window.addEventListener("test",Pp,Pp),window.removeEventListener("test",Pp,Pp)}catch{$b=!1}function FX(e,t,o,a,c,u,d,f,m){var g=Array.prototype.slice.call(arguments,3);try{t.apply(o,g)}catch(_){this.onError(_)}}var nf=!1,cv=null,lv=!1,Wb=null,BX={onError:function(e){nf=!0,cv=e}};function jX(e,t,o,a,c,u,d,f,m){nf=!1,cv=null,FX.apply(BX,arguments)}function HX(e,t,o,a,c,u,d,f,m){if(jX.apply(this,arguments),nf){if(nf){var g=cv;nf=!1,cv=null}else throw Error(Ve(198));lv||(lv=!0,Wb=g)}}function Mu(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function r3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function E2(e){if(Mu(e)!==e)throw Error(Ve(188))}function $X(e){var t=e.alternate;if(!t){if(t=Mu(e),t===null)throw Error(Ve(188));return t!==e?null:e}for(var o=e,a=t;;){var c=o.return;if(c===null)break;var u=c.alternate;if(u===null){if(a=c.return,a!==null){o=a;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===o)return E2(c),e;if(u===a)return E2(c),t;u=u.sibling}throw Error(Ve(188))}if(o.return!==a.return)o=c,a=u;else{for(var d=!1,f=c.child;f;){if(f===o){d=!0,o=c,a=u;break}if(f===a){d=!0,a=c,o=u;break}f=f.sibling}if(!d){for(f=u.child;f;){if(f===o){d=!0,o=u,a=c;break}if(f===a){d=!0,a=u,o=c;break}f=f.sibling}if(!d)throw Error(Ve(189))}}if(o.alternate!==a)throw Error(Ve(190))}if(o.tag!==3)throw Error(Ve(188));return o.stateNode.current===o?e:t}function i3(e){return e=$X(e),e!==null?o3(e):null}function o3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=o3(e);if(t!==null)return t;e=e.sibling}return null}var a3=pa.unstable_scheduleCallback,_2=pa.unstable_cancelCallback,WX=pa.unstable_shouldYield,GX=pa.unstable_requestPaint,zr=pa.unstable_now,zX=pa.unstable_getCurrentPriorityLevel,zI=pa.unstable_ImmediatePriority,s3=pa.unstable_UserBlockingPriority,uv=pa.unstable_NormalPriority,KX=pa.unstable_LowPriority,c3=pa.unstable_IdlePriority,UE=null,Us=null;function YX(e){if(Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(UE,e,void 0,(e.current.flags&128)===128)}catch{}}var ds=Math.clz32?Math.clz32:JX,qX=Math.log,XX=Math.LN2;function JX(e){return e>>>=0,e===0?32:31-(qX(e)/XX|0)|0}var eg=64,tg=4194304;function Xp(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dv(e,t){var o=e.pendingLanes;if(o===0)return 0;var a=0,c=e.suspendedLanes,u=e.pingedLanes,d=o&268435455;if(d!==0){var f=d&~c;f!==0?a=Xp(f):(u&=d,u!==0&&(a=Xp(u)))}else d=o&~c,d!==0?a=Xp(d):u!==0&&(a=Xp(u));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,u=t&-t,c>=u||c===16&&(u&4194240)!==0))return t;if(a&4&&(a|=o&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)o=31-ds(t),c=1<<o,a|=e[o],t&=~c;return a}function QX(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZX(e,t){for(var o=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes;0<u;){var d=31-ds(u),f=1<<d,m=c[d];m===-1?(!(f&o)||f&a)&&(c[d]=QX(f,t)):m<=t&&(e.expiredLanes|=f),u&=~f}}function Gb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function l3(){var e=eg;return eg<<=1,!(eg&4194240)&&(eg=64),e}function uT(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function Yf(e,t,o){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ds(t),e[t]=o}function eJ(e,t){var o=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<o;){var c=31-ds(o),u=1<<c;t[c]=0,a[c]=-1,e[c]=-1,o&=~u}}function KI(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var a=31-ds(o),c=1<<a;c&t|e[a]&t&&(e[a]|=t),o&=~c}}var zn=0;function u3(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var d3,YI,h3,p3,f3,zb=!1,ng=[],_l=null,Sl=null,yl=null,Tf=new Map,bf=new Map,dl=[],tJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function S2(e,t){switch(e){case"focusin":case"focusout":_l=null;break;case"dragenter":case"dragleave":Sl=null;break;case"mouseover":case"mouseout":yl=null;break;case"pointerover":case"pointerout":Tf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bf.delete(t.pointerId)}}function xp(e,t,o,a,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:o,eventSystemFlags:a,nativeEvent:u,targetContainers:[c]},t!==null&&(t=Xf(t),t!==null&&YI(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function nJ(e,t,o,a,c){switch(t){case"focusin":return _l=xp(_l,e,t,o,a,c),!0;case"dragenter":return Sl=xp(Sl,e,t,o,a,c),!0;case"mouseover":return yl=xp(yl,e,t,o,a,c),!0;case"pointerover":var u=c.pointerId;return Tf.set(u,xp(Tf.get(u)||null,e,t,o,a,c)),!0;case"gotpointercapture":return u=c.pointerId,bf.set(u,xp(bf.get(u)||null,e,t,o,a,c)),!0}return!1}function m3(e){var t=vu(e.target);if(t!==null){var o=Mu(t);if(o!==null){if(t=o.tag,t===13){if(t=r3(o),t!==null){e.blockedOn=t,f3(e.priority,function(){h3(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=Kb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var a=new o.constructor(o.type,o);jb=a,o.target.dispatchEvent(a),jb=null}else return t=Xf(o),t!==null&&YI(t),e.blockedOn=o,!1;t.shift()}return!0}function y2(e,t,o){Hg(e)&&o.delete(t)}function rJ(){zb=!1,_l!==null&&Hg(_l)&&(_l=null),Sl!==null&&Hg(Sl)&&(Sl=null),yl!==null&&Hg(yl)&&(yl=null),Tf.forEach(y2),bf.forEach(y2)}function Dp(e,t){e.blockedOn===t&&(e.blockedOn=null,zb||(zb=!0,pa.unstable_scheduleCallback(pa.unstable_NormalPriority,rJ)))}function Rf(e){function t(c){return Dp(c,e)}if(0<ng.length){Dp(ng[0],e);for(var o=1;o<ng.length;o++){var a=ng[o];a.blockedOn===e&&(a.blockedOn=null)}}for(_l!==null&&Dp(_l,e),Sl!==null&&Dp(Sl,e),yl!==null&&Dp(yl,e),Tf.forEach(t),bf.forEach(t),o=0;o<dl.length;o++)a=dl[o],a.blockedOn===e&&(a.blockedOn=null);for(;0<dl.length&&(o=dl[0],o.blockedOn===null);)m3(o),o.blockedOn===null&&dl.shift()}var fh=bc.ReactCurrentBatchConfig,hv=!0;function iJ(e,t,o,a){var c=zn,u=fh.transition;fh.transition=null;try{zn=1,qI(e,t,o,a)}finally{zn=c,fh.transition=u}}function oJ(e,t,o,a){var c=zn,u=fh.transition;fh.transition=null;try{zn=4,qI(e,t,o,a)}finally{zn=c,fh.transition=u}}function qI(e,t,o,a){if(hv){var c=Kb(e,t,o,a);if(c===null)ST(e,t,a,pv,o),S2(e,a);else if(nJ(c,e,t,o,a))a.stopPropagation();else if(S2(e,a),t&4&&-1<tJ.indexOf(e)){for(;c!==null;){var u=Xf(c);if(u!==null&&d3(u),u=Kb(e,t,o,a),u===null&&ST(e,t,a,pv,o),u===c)break;c=u}c!==null&&a.stopPropagation()}else ST(e,t,a,null,o)}}var pv=null;function Kb(e,t,o,a){if(pv=null,e=GI(a),e=vu(e),e!==null)if(t=Mu(e),t===null)e=null;else if(o=t.tag,o===13){if(e=r3(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return pv=e,null}function g3(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zX()){case zI:return 1;case s3:return 4;case uv:case KX:return 16;case c3:return 536870912;default:return 16}default:return 16}}var pl=null,XI=null,$g=null;function v3(){if($g)return $g;var e,t=XI,o=t.length,a,c="value"in pl?pl.value:pl.textContent,u=c.length;for(e=0;e<o&&t[e]===c[e];e++);var d=o-e;for(a=1;a<=d&&t[o-a]===c[u-a];a++);return $g=c.slice(e,1<a?1-a:void 0)}function Wg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function rg(){return!0}function C2(){return!1}function ga(e){function t(o,a,c,u,d){this._reactName=o,this._targetInst=c,this.type=a,this.nativeEvent=u,this.target=d,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(o=e[f],this[f]=o?o(u):u[f]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?rg:C2,this.isPropagationStopped=C2,this}return Pr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=rg)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=rg)},persist:function(){},isPersistent:rg}),t}var kh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},JI=ga(kh),qf=Pr({},kh,{view:0,detail:0}),aJ=ga(qf),dT,hT,kp,VE=Pr({},qf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:QI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==kp&&(kp&&e.type==="mousemove"?(dT=e.screenX-kp.screenX,hT=e.screenY-kp.screenY):hT=dT=0,kp=e),dT)},movementY:function(e){return"movementY"in e?e.movementY:hT}}),T2=ga(VE),sJ=Pr({},VE,{dataTransfer:0}),cJ=ga(sJ),lJ=Pr({},qf,{relatedTarget:0}),pT=ga(lJ),uJ=Pr({},kh,{animationName:0,elapsedTime:0,pseudoElement:0}),dJ=ga(uJ),hJ=Pr({},kh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pJ=ga(hJ),fJ=Pr({},kh,{data:0}),b2=ga(fJ),mJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EJ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=vJ[e])?!!t[e]:!1}function QI(){return EJ}var _J=Pr({},qf,{key:function(e){if(e.key){var t=mJ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Wg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gJ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:QI,charCode:function(e){return e.type==="keypress"?Wg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),SJ=ga(_J),yJ=Pr({},VE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R2=ga(yJ),CJ=Pr({},qf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:QI}),TJ=ga(CJ),bJ=Pr({},kh,{propertyName:0,elapsedTime:0,pseudoElement:0}),RJ=ga(bJ),IJ=Pr({},VE,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wJ=ga(IJ),OJ=[9,13,27,32],ZI=vc&&"CompositionEvent"in window,rf=null;vc&&"documentMode"in document&&(rf=document.documentMode);var AJ=vc&&"TextEvent"in window&&!rf,E3=vc&&(!ZI||rf&&8<rf&&11>=rf),I2=String.fromCharCode(32),w2=!1;function _3(e,t){switch(e){case"keyup":return OJ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function S3(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qd=!1;function NJ(e,t){switch(e){case"compositionend":return S3(t);case"keypress":return t.which!==32?null:(w2=!0,I2);case"textInput":return e=t.data,e===I2&&w2?null:e;default:return null}}function PJ(e,t){if(Qd)return e==="compositionend"||!ZI&&_3(e,t)?(e=v3(),$g=XI=pl=null,Qd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return E3&&t.locale!=="ko"?null:t.data;default:return null}}var xJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function O2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xJ[e.type]:t==="textarea"}function y3(e,t,o,a){QF(a),t=fv(t,"onChange"),0<t.length&&(o=new JI("onChange","change",null,o,a),e.push({event:o,listeners:t}))}var of=null,If=null;function DJ(e){x3(e,0)}function FE(e){var t=th(e);if(GF(t))return e}function kJ(e,t){if(e==="change")return t}var C3=!1;if(vc){var fT;if(vc){var mT="oninput"in document;if(!mT){var A2=document.createElement("div");A2.setAttribute("oninput","return;"),mT=typeof A2.oninput=="function"}fT=mT}else fT=!1;C3=fT&&(!document.documentMode||9<document.documentMode)}function N2(){of&&(of.detachEvent("onpropertychange",T3),If=of=null)}function T3(e){if(e.propertyName==="value"&&FE(If)){var t=[];y3(t,If,e,GI(e)),n3(DJ,t)}}function LJ(e,t,o){e==="focusin"?(N2(),of=t,If=o,of.attachEvent("onpropertychange",T3)):e==="focusout"&&N2()}function MJ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return FE(If)}function UJ(e,t){if(e==="click")return FE(t)}function VJ(e,t){if(e==="input"||e==="change")return FE(t)}function FJ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ps=typeof Object.is=="function"?Object.is:FJ;function wf(e,t){if(ps(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(a=0;a<o.length;a++){var c=o[a];if(!Ab.call(t,c)||!ps(e[c],t[c]))return!1}return!0}function P2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function x2(e,t){var o=P2(e);e=0;for(var a;o;){if(o.nodeType===3){if(a=e+o.textContent.length,e<=t&&a>=t)return{node:o,offset:t-e};e=a}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=P2(o)}}function b3(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?b3(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function R3(){for(var e=window,t=sv();t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=sv(e.document)}return t}function ew(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function BJ(e){var t=R3(),o=e.focusedElem,a=e.selectionRange;if(t!==o&&o&&o.ownerDocument&&b3(o.ownerDocument.documentElement,o)){if(a!==null&&ew(o)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in o)o.selectionStart=t,o.selectionEnd=Math.min(e,o.value.length);else if(e=(t=o.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=o.textContent.length,u=Math.min(a.start,c);a=a.end===void 0?u:Math.min(a.end,c),!e.extend&&u>a&&(c=a,a=u,u=c),c=x2(o,u);var d=x2(o,a);c&&d&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),u>a?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=o;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<t.length;o++)e=t[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var jJ=vc&&"documentMode"in document&&11>=document.documentMode,Zd=null,Yb=null,af=null,qb=!1;function D2(e,t,o){var a=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;qb||Zd==null||Zd!==sv(a)||(a=Zd,"selectionStart"in a&&ew(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),af&&wf(af,a)||(af=a,a=fv(Yb,"onSelect"),0<a.length&&(t=new JI("onSelect","select",null,t,o),e.push({event:t,listeners:a}),t.target=Zd)))}function ig(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var eh={animationend:ig("Animation","AnimationEnd"),animationiteration:ig("Animation","AnimationIteration"),animationstart:ig("Animation","AnimationStart"),transitionend:ig("Transition","TransitionEnd")},gT={},I3={};vc&&(I3=document.createElement("div").style,"AnimationEvent"in window||(delete eh.animationend.animation,delete eh.animationiteration.animation,delete eh.animationstart.animation),"TransitionEvent"in window||delete eh.transitionend.transition);function BE(e){if(gT[e])return gT[e];if(!eh[e])return e;var t=eh[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in I3)return gT[e]=t[o];return e}var w3=BE("animationend"),O3=BE("animationiteration"),A3=BE("animationstart"),N3=BE("transitionend"),P3=new Map,k2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pl(e,t){P3.set(e,t),Lu(t,[e])}for(var vT=0;vT<k2.length;vT++){var ET=k2[vT],HJ=ET.toLowerCase(),$J=ET[0].toUpperCase()+ET.slice(1);Pl(HJ,"on"+$J)}Pl(w3,"onAnimationEnd");Pl(O3,"onAnimationIteration");Pl(A3,"onAnimationStart");Pl("dblclick","onDoubleClick");Pl("focusin","onFocus");Pl("focusout","onBlur");Pl(N3,"onTransitionEnd");Sh("onMouseEnter",["mouseout","mouseover"]);Sh("onMouseLeave",["mouseout","mouseover"]);Sh("onPointerEnter",["pointerout","pointerover"]);Sh("onPointerLeave",["pointerout","pointerover"]);Lu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jp));function L2(e,t,o){var a=e.type||"unknown-event";e.currentTarget=o,HX(a,t,void 0,e),e.currentTarget=null}function x3(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var a=e[o],c=a.event;a=a.listeners;e:{var u=void 0;if(t)for(var d=a.length-1;0<=d;d--){var f=a[d],m=f.instance,g=f.currentTarget;if(f=f.listener,m!==u&&c.isPropagationStopped())break e;L2(c,f,g),u=m}else for(d=0;d<a.length;d++){if(f=a[d],m=f.instance,g=f.currentTarget,f=f.listener,m!==u&&c.isPropagationStopped())break e;L2(c,f,g),u=m}}}if(lv)throw e=Wb,lv=!1,Wb=null,e}function _r(e,t){var o=t[eR];o===void 0&&(o=t[eR]=new Set);var a=e+"__bubble";o.has(a)||(D3(t,e,2,!1),o.add(a))}function _T(e,t,o){var a=0;t&&(a|=4),D3(o,e,a,t)}var og="_reactListening"+Math.random().toString(36).slice(2);function Of(e){if(!e[og]){e[og]=!0,BF.forEach(function(o){o!=="selectionchange"&&(WJ.has(o)||_T(o,!1,e),_T(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[og]||(t[og]=!0,_T("selectionchange",!1,t))}}function D3(e,t,o,a){switch(g3(t)){case 1:var c=iJ;break;case 4:c=oJ;break;default:c=qI}o=c.bind(null,t,o,e),c=void 0,!$b||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,o,{capture:!0,passive:c}):e.addEventListener(t,o,!0):c!==void 0?e.addEventListener(t,o,{passive:c}):e.addEventListener(t,o,!1)}function ST(e,t,o,a,c){var u=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var f=a.stateNode.containerInfo;if(f===c||f.nodeType===8&&f.parentNode===c)break;if(d===4)for(d=a.return;d!==null;){var m=d.tag;if((m===3||m===4)&&(m=d.stateNode.containerInfo,m===c||m.nodeType===8&&m.parentNode===c))return;d=d.return}for(;f!==null;){if(d=vu(f),d===null)return;if(m=d.tag,m===5||m===6){a=u=d;continue e}f=f.parentNode}}a=a.return}n3(function(){var g=u,_=GI(o),S=[];e:{var C=P3.get(e);if(C!==void 0){var O=JI,I=e;switch(e){case"keypress":if(Wg(o)===0)break e;case"keydown":case"keyup":O=SJ;break;case"focusin":I="focus",O=pT;break;case"focusout":I="blur",O=pT;break;case"beforeblur":case"afterblur":O=pT;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=T2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=cJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=TJ;break;case w3:case O3:case A3:O=dJ;break;case N3:O=RJ;break;case"scroll":O=aJ;break;case"wheel":O=wJ;break;case"copy":case"cut":case"paste":O=pJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=R2}var A=(t&4)!==0,L=!A&&e==="scroll",N=A?C!==null?C+"Capture":null:C;A=[];for(var P=g,D;P!==null;){D=P;var U=D.stateNode;if(D.tag===5&&U!==null&&(D=U,N!==null&&(U=Cf(P,N),U!=null&&A.push(Af(P,U,D)))),L)break;P=P.return}0<A.length&&(C=new O(C,I,null,o,_),S.push({event:C,listeners:A}))}}if(!(t&7)){e:{if(C=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",C&&o!==jb&&(I=o.relatedTarget||o.fromElement)&&(vu(I)||I[Ec]))break e;if((O||C)&&(C=_.window===_?_:(C=_.ownerDocument)?C.defaultView||C.parentWindow:window,O?(I=o.relatedTarget||o.toElement,O=g,I=I?vu(I):null,I!==null&&(L=Mu(I),I!==L||I.tag!==5&&I.tag!==6)&&(I=null)):(O=null,I=g),O!==I)){if(A=T2,U="onMouseLeave",N="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(A=R2,U="onPointerLeave",N="onPointerEnter",P="pointer"),L=O==null?C:th(O),D=I==null?C:th(I),C=new A(U,P+"leave",O,o,_),C.target=L,C.relatedTarget=D,U=null,vu(_)===g&&(A=new A(N,P+"enter",I,o,_),A.target=D,A.relatedTarget=L,U=A),L=U,O&&I)t:{for(A=O,N=I,P=0,D=A;D;D=Md(D))P++;for(D=0,U=N;U;U=Md(U))D++;for(;0<P-D;)A=Md(A),P--;for(;0<D-P;)N=Md(N),D--;for(;P--;){if(A===N||N!==null&&A===N.alternate)break t;A=Md(A),N=Md(N)}A=null}else A=null;O!==null&&M2(S,C,O,A,!1),I!==null&&L!==null&&M2(S,L,I,A,!0)}}e:{if(C=g?th(g):window,O=C.nodeName&&C.nodeName.toLowerCase(),O==="select"||O==="input"&&C.type==="file")var B=kJ;else if(O2(C))if(C3)B=VJ;else{B=MJ;var F=LJ}else(O=C.nodeName)&&O.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(B=UJ);if(B&&(B=B(e,g))){y3(S,B,o,_);break e}F&&F(e,C,g),e==="focusout"&&(F=C._wrapperState)&&F.controlled&&C.type==="number"&&Mb(C,"number",C.value)}switch(F=g?th(g):window,e){case"focusin":(O2(F)||F.contentEditable==="true")&&(Zd=F,Yb=g,af=null);break;case"focusout":af=Yb=Zd=null;break;case"mousedown":qb=!0;break;case"contextmenu":case"mouseup":case"dragend":qb=!1,D2(S,o,_);break;case"selectionchange":if(jJ)break;case"keydown":case"keyup":D2(S,o,_)}var H;if(ZI)e:{switch(e){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else Qd?_3(e,o)&&(K="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(K="onCompositionStart");K&&(E3&&o.locale!=="ko"&&(Qd||K!=="onCompositionStart"?K==="onCompositionEnd"&&Qd&&(H=v3()):(pl=_,XI="value"in pl?pl.value:pl.textContent,Qd=!0)),F=fv(g,K),0<F.length&&(K=new b2(K,e,null,o,_),S.push({event:K,listeners:F}),H?K.data=H:(H=S3(o),H!==null&&(K.data=H)))),(H=AJ?NJ(e,o):PJ(e,o))&&(g=fv(g,"onBeforeInput"),0<g.length&&(_=new b2("onBeforeInput","beforeinput",null,o,_),S.push({event:_,listeners:g}),_.data=H))}x3(S,t)})}function Af(e,t,o){return{instance:e,listener:t,currentTarget:o}}function fv(e,t){for(var o=t+"Capture",a=[];e!==null;){var c=e,u=c.stateNode;c.tag===5&&u!==null&&(c=u,u=Cf(e,o),u!=null&&a.unshift(Af(e,u,c)),u=Cf(e,t),u!=null&&a.push(Af(e,u,c))),e=e.return}return a}function Md(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function M2(e,t,o,a,c){for(var u=t._reactName,d=[];o!==null&&o!==a;){var f=o,m=f.alternate,g=f.stateNode;if(m!==null&&m===a)break;f.tag===5&&g!==null&&(f=g,c?(m=Cf(o,u),m!=null&&d.unshift(Af(o,m,f))):c||(m=Cf(o,u),m!=null&&d.push(Af(o,m,f)))),o=o.return}d.length!==0&&e.push({event:t,listeners:d})}var GJ=/\r\n?/g,zJ=/\u0000|\uFFFD/g;function U2(e){return(typeof e=="string"?e:""+e).replace(GJ,`
`).replace(zJ,"")}function ag(e,t,o){if(t=U2(t),U2(e)!==t&&o)throw Error(Ve(425))}function mv(){}var Xb=null,Jb=null;function Qb(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zb=typeof setTimeout=="function"?setTimeout:void 0,KJ=typeof clearTimeout=="function"?clearTimeout:void 0,V2=typeof Promise=="function"?Promise:void 0,YJ=typeof queueMicrotask=="function"?queueMicrotask:typeof V2<"u"?function(e){return V2.resolve(null).then(e).catch(qJ)}:Zb;function qJ(e){setTimeout(function(){throw e})}function yT(e,t){var o=t,a=0;do{var c=o.nextSibling;if(e.removeChild(o),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(a===0){e.removeChild(c),Rf(t);return}a--}else o!=="$"&&o!=="$?"&&o!=="$!"||a++;o=c}while(o);Rf(t)}function Cl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function F2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(t===0)return e;t--}else o==="/$"&&t++}e=e.previousSibling}return null}var Lh=Math.random().toString(36).slice(2),ks="__reactFiber$"+Lh,Nf="__reactProps$"+Lh,Ec="__reactContainer$"+Lh,eR="__reactEvents$"+Lh,XJ="__reactListeners$"+Lh,JJ="__reactHandles$"+Lh;function vu(e){var t=e[ks];if(t)return t;for(var o=e.parentNode;o;){if(t=o[Ec]||o[ks]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=F2(e);e!==null;){if(o=e[ks])return o;e=F2(e)}return t}e=o,o=e.parentNode}return null}function Xf(e){return e=e[ks]||e[Ec],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function th(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ve(33))}function jE(e){return e[Nf]||null}var tR=[],nh=-1;function xl(e){return{current:e}}function yr(e){0>nh||(e.current=tR[nh],tR[nh]=null,nh--)}function mr(e,t){nh++,tR[nh]=e.current,e.current=t}var Al={},ao=xl(Al),Fo=xl(!1),Au=Al;function yh(e,t){var o=e.type.contextTypes;if(!o)return Al;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},u;for(u in o)c[u]=t[u];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Bo(e){return e=e.childContextTypes,e!=null}function gv(){yr(Fo),yr(ao)}function B2(e,t,o){if(ao.current!==Al)throw Error(Ve(168));mr(ao,t),mr(Fo,o)}function k3(e,t,o){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return o;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(Ve(108,LX(e)||"Unknown",c));return Pr({},o,a)}function vv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Al,Au=ao.current,mr(ao,e),mr(Fo,Fo.current),!0}function j2(e,t,o){var a=e.stateNode;if(!a)throw Error(Ve(169));o?(e=k3(e,t,Au),a.__reactInternalMemoizedMergedChildContext=e,yr(Fo),yr(ao),mr(ao,e)):yr(Fo),mr(Fo,o)}var uc=null,HE=!1,CT=!1;function L3(e){uc===null?uc=[e]:uc.push(e)}function QJ(e){HE=!0,L3(e)}function Dl(){if(!CT&&uc!==null){CT=!0;var e=0,t=zn;try{var o=uc;for(zn=1;e<o.length;e++){var a=o[e];do a=a(!0);while(a!==null)}uc=null,HE=!1}catch(c){throw uc!==null&&(uc=uc.slice(e+1)),a3(zI,Dl),c}finally{zn=t,CT=!1}}return null}var rh=[],ih=0,Ev=null,_v=0,Ua=[],Va=0,Nu=null,dc=1,hc="";function hu(e,t){rh[ih++]=_v,rh[ih++]=Ev,Ev=e,_v=t}function M3(e,t,o){Ua[Va++]=dc,Ua[Va++]=hc,Ua[Va++]=Nu,Nu=e;var a=dc;e=hc;var c=32-ds(a)-1;a&=~(1<<c),o+=1;var u=32-ds(t)+c;if(30<u){var d=c-c%5;u=(a&(1<<d)-1).toString(32),a>>=d,c-=d,dc=1<<32-ds(t)+c|o<<c|a,hc=u+e}else dc=1<<u|o<<c|a,hc=e}function tw(e){e.return!==null&&(hu(e,1),M3(e,1,0))}function nw(e){for(;e===Ev;)Ev=rh[--ih],rh[ih]=null,_v=rh[--ih],rh[ih]=null;for(;e===Nu;)Nu=Ua[--Va],Ua[Va]=null,hc=Ua[--Va],Ua[Va]=null,dc=Ua[--Va],Ua[Va]=null}var ua=null,ca=null,Rr=!1,ls=null;function U3(e,t){var o=Fa(5,null,null,0);o.elementType="DELETED",o.stateNode=t,o.return=e,t=e.deletions,t===null?(e.deletions=[o],e.flags|=16):t.push(o)}function H2(e,t){switch(e.tag){case 5:var o=e.type;return t=t.nodeType!==1||o.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ua=e,ca=Cl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ua=e,ca=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(o=Nu!==null?{id:dc,overflow:hc}:null,e.memoizedState={dehydrated:t,treeContext:o,retryLane:1073741824},o=Fa(18,null,null,0),o.stateNode=t,o.return=e,e.child=o,ua=e,ca=null,!0):!1;default:return!1}}function nR(e){return(e.mode&1)!==0&&(e.flags&128)===0}function rR(e){if(Rr){var t=ca;if(t){var o=t;if(!H2(e,t)){if(nR(e))throw Error(Ve(418));t=Cl(o.nextSibling);var a=ua;t&&H2(e,t)?U3(a,o):(e.flags=e.flags&-4097|2,Rr=!1,ua=e)}}else{if(nR(e))throw Error(Ve(418));e.flags=e.flags&-4097|2,Rr=!1,ua=e}}}function $2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ua=e}function sg(e){if(e!==ua)return!1;if(!Rr)return $2(e),Rr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Qb(e.type,e.memoizedProps)),t&&(t=ca)){if(nR(e))throw V3(),Error(Ve(418));for(;t;)U3(e,t),t=Cl(t.nextSibling)}if($2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ve(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(t===0){ca=Cl(e.nextSibling);break e}t--}else o!=="$"&&o!=="$!"&&o!=="$?"||t++}e=e.nextSibling}ca=null}}else ca=ua?Cl(e.stateNode.nextSibling):null;return!0}function V3(){for(var e=ca;e;)e=Cl(e.nextSibling)}function Ch(){ca=ua=null,Rr=!1}function rw(e){ls===null?ls=[e]:ls.push(e)}var ZJ=bc.ReactCurrentBatchConfig;function as(e,t){if(e&&e.defaultProps){t=Pr({},t),e=e.defaultProps;for(var o in e)t[o]===void 0&&(t[o]=e[o]);return t}return t}var Sv=xl(null),yv=null,oh=null,iw=null;function ow(){iw=oh=yv=null}function aw(e){var t=Sv.current;yr(Sv),e._currentValue=t}function iR(e,t,o){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===o)break;e=e.return}}function mh(e,t){yv=e,iw=oh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Uo=!0),e.firstContext=null)}function Ha(e){var t=e._currentValue;if(iw!==e)if(e={context:e,memoizedValue:t,next:null},oh===null){if(yv===null)throw Error(Ve(308));oh=e,yv.dependencies={lanes:0,firstContext:e}}else oh=oh.next=e;return t}var Eu=null;function sw(e){Eu===null?Eu=[e]:Eu.push(e)}function F3(e,t,o,a){var c=t.interleaved;return c===null?(o.next=o,sw(t)):(o.next=c.next,c.next=o),t.interleaved=o,_c(e,a)}function _c(e,t){e.lanes|=t;var o=e.alternate;for(o!==null&&(o.lanes|=t),o=e,e=e.return;e!==null;)e.childLanes|=t,o=e.alternate,o!==null&&(o.childLanes|=t),o=e,e=e.return;return o.tag===3?o.stateNode:null}var ul=!1;function cw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function B3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Tl(e,t,o){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Rn&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,_c(e,o)}return c=a.interleaved,c===null?(t.next=t,sw(a)):(t.next=c.next,c.next=t),a.interleaved=t,_c(e,o)}function Gg(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,o|=a,t.lanes=o,KI(e,o)}}function W2(e,t){var o=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,o===a)){var c=null,u=null;if(o=o.firstBaseUpdate,o!==null){do{var d={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};u===null?c=u=d:u=u.next=d,o=o.next}while(o!==null);u===null?c=u=t:u=u.next=t}else c=u=t;o={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:a.shared,effects:a.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}function Cv(e,t,o,a){var c=e.updateQueue;ul=!1;var u=c.firstBaseUpdate,d=c.lastBaseUpdate,f=c.shared.pending;if(f!==null){c.shared.pending=null;var m=f,g=m.next;m.next=null,d===null?u=g:d.next=g,d=m;var _=e.alternate;_!==null&&(_=_.updateQueue,f=_.lastBaseUpdate,f!==d&&(f===null?_.firstBaseUpdate=g:f.next=g,_.lastBaseUpdate=m))}if(u!==null){var S=c.baseState;d=0,_=g=m=null,f=u;do{var C=f.lane,O=f.eventTime;if((a&C)===C){_!==null&&(_=_.next={eventTime:O,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var I=e,A=f;switch(C=t,O=o,A.tag){case 1:if(I=A.payload,typeof I=="function"){S=I.call(O,S,C);break e}S=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=A.payload,C=typeof I=="function"?I.call(O,S,C):I,C==null)break e;S=Pr({},S,C);break e;case 2:ul=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,C=c.effects,C===null?c.effects=[f]:C.push(f))}else O={eventTime:O,lane:C,tag:f.tag,payload:f.payload,callback:f.callback,next:null},_===null?(g=_=O,m=S):_=_.next=O,d|=C;if(f=f.next,f===null){if(f=c.shared.pending,f===null)break;C=f,f=C.next,C.next=null,c.lastBaseUpdate=C,c.shared.pending=null}}while(1);if(_===null&&(m=S),c.baseState=m,c.firstBaseUpdate=g,c.lastBaseUpdate=_,t=c.shared.interleaved,t!==null){c=t;do d|=c.lane,c=c.next;while(c!==t)}else u===null&&(c.shared.lanes=0);xu|=d,e.lanes=d,e.memoizedState=S}}function G2(e,t,o){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=o,typeof c!="function")throw Error(Ve(191,c));c.call(a)}}}var j3=new FF.Component().refs;function oR(e,t,o,a){t=e.memoizedState,o=o(a,t),o=o==null?t:Pr({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var $E={isMounted:function(e){return(e=e._reactInternals)?Mu(e)===e:!1},enqueueSetState:function(e,t,o){e=e._reactInternals;var a=vo(),c=Rl(e),u=fc(a,c);u.payload=t,o!=null&&(u.callback=o),t=Tl(e,u,c),t!==null&&(hs(t,e,c,a),Gg(t,e,c))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var a=vo(),c=Rl(e),u=fc(a,c);u.tag=1,u.payload=t,o!=null&&(u.callback=o),t=Tl(e,u,c),t!==null&&(hs(t,e,c,a),Gg(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=vo(),a=Rl(e),c=fc(o,a);c.tag=2,t!=null&&(c.callback=t),t=Tl(e,c,a),t!==null&&(hs(t,e,a,o),Gg(t,e,a))}};function z2(e,t,o,a,c,u,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,u,d):t.prototype&&t.prototype.isPureReactComponent?!wf(o,a)||!wf(c,u):!0}function H3(e,t,o){var a=!1,c=Al,u=t.contextType;return typeof u=="object"&&u!==null?u=Ha(u):(c=Bo(t)?Au:ao.current,a=t.contextTypes,u=(a=a!=null)?yh(e,c):Al),t=new t(o,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$E,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=u),t}function K2(e,t,o,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,a),t.state!==e&&$E.enqueueReplaceState(t,t.state,null)}function aR(e,t,o,a){var c=e.stateNode;c.props=o,c.state=e.memoizedState,c.refs=j3,cw(e);var u=t.contextType;typeof u=="object"&&u!==null?c.context=Ha(u):(u=Bo(t)?Au:ao.current,c.context=yh(e,u)),c.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(oR(e,t,u,o),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&$E.enqueueReplaceState(c,c.state,null),Cv(e,o,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Lp(e,t,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(Ve(309));var a=o.stateNode}if(!a)throw Error(Ve(147,e));var c=a,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(d){var f=c.refs;f===j3&&(f=c.refs={}),d===null?delete f[u]:f[u]=d},t._stringRef=u,t)}if(typeof e!="string")throw Error(Ve(284));if(!o._owner)throw Error(Ve(290,e))}return e}function cg(e,t){throw e=Object.prototype.toString.call(t),Error(Ve(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Y2(e){var t=e._init;return t(e._payload)}function $3(e){function t(N,P){if(e){var D=N.deletions;D===null?(N.deletions=[P],N.flags|=16):D.push(P)}}function o(N,P){if(!e)return null;for(;P!==null;)t(N,P),P=P.sibling;return null}function a(N,P){for(N=new Map;P!==null;)P.key!==null?N.set(P.key,P):N.set(P.index,P),P=P.sibling;return N}function c(N,P){return N=Il(N,P),N.index=0,N.sibling=null,N}function u(N,P,D){return N.index=D,e?(D=N.alternate,D!==null?(D=D.index,D<P?(N.flags|=2,P):D):(N.flags|=2,P)):(N.flags|=1048576,P)}function d(N){return e&&N.alternate===null&&(N.flags|=2),N}function f(N,P,D,U){return P===null||P.tag!==6?(P=AT(D,N.mode,U),P.return=N,P):(P=c(P,D),P.return=N,P)}function m(N,P,D,U){var B=D.type;return B===Jd?_(N,P,D.props.children,U,D.key):P!==null&&(P.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===ll&&Y2(B)===P.type)?(U=c(P,D.props),U.ref=Lp(N,P,D),U.return=N,U):(U=Jg(D.type,D.key,D.props,null,N.mode,U),U.ref=Lp(N,P,D),U.return=N,U)}function g(N,P,D,U){return P===null||P.tag!==4||P.stateNode.containerInfo!==D.containerInfo||P.stateNode.implementation!==D.implementation?(P=NT(D,N.mode,U),P.return=N,P):(P=c(P,D.children||[]),P.return=N,P)}function _(N,P,D,U,B){return P===null||P.tag!==7?(P=bu(D,N.mode,U,B),P.return=N,P):(P=c(P,D),P.return=N,P)}function S(N,P,D){if(typeof P=="string"&&P!==""||typeof P=="number")return P=AT(""+P,N.mode,D),P.return=N,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case J0:return D=Jg(P.type,P.key,P.props,null,N.mode,D),D.ref=Lp(N,null,P),D.return=N,D;case Xd:return P=NT(P,N.mode,D),P.return=N,P;case ll:var U=P._init;return S(N,U(P._payload),D)}if(qp(P)||Np(P))return P=bu(P,N.mode,D,null),P.return=N,P;cg(N,P)}return null}function C(N,P,D,U){var B=P!==null?P.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return B!==null?null:f(N,P,""+D,U);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case J0:return D.key===B?m(N,P,D,U):null;case Xd:return D.key===B?g(N,P,D,U):null;case ll:return B=D._init,C(N,P,B(D._payload),U)}if(qp(D)||Np(D))return B!==null?null:_(N,P,D,U,null);cg(N,D)}return null}function O(N,P,D,U,B){if(typeof U=="string"&&U!==""||typeof U=="number")return N=N.get(D)||null,f(P,N,""+U,B);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case J0:return N=N.get(U.key===null?D:U.key)||null,m(P,N,U,B);case Xd:return N=N.get(U.key===null?D:U.key)||null,g(P,N,U,B);case ll:var F=U._init;return O(N,P,D,F(U._payload),B)}if(qp(U)||Np(U))return N=N.get(D)||null,_(P,N,U,B,null);cg(P,U)}return null}function I(N,P,D,U){for(var B=null,F=null,H=P,K=P=0,te=null;H!==null&&K<D.length;K++){H.index>K?(te=H,H=null):te=H.sibling;var Y=C(N,H,D[K],U);if(Y===null){H===null&&(H=te);break}e&&H&&Y.alternate===null&&t(N,H),P=u(Y,P,K),F===null?B=Y:F.sibling=Y,F=Y,H=te}if(K===D.length)return o(N,H),Rr&&hu(N,K),B;if(H===null){for(;K<D.length;K++)H=S(N,D[K],U),H!==null&&(P=u(H,P,K),F===null?B=H:F.sibling=H,F=H);return Rr&&hu(N,K),B}for(H=a(N,H);K<D.length;K++)te=O(H,N,K,D[K],U),te!==null&&(e&&te.alternate!==null&&H.delete(te.key===null?K:te.key),P=u(te,P,K),F===null?B=te:F.sibling=te,F=te);return e&&H.forEach(function(Q){return t(N,Q)}),Rr&&hu(N,K),B}function A(N,P,D,U){var B=Np(D);if(typeof B!="function")throw Error(Ve(150));if(D=B.call(D),D==null)throw Error(Ve(151));for(var F=B=null,H=P,K=P=0,te=null,Y=D.next();H!==null&&!Y.done;K++,Y=D.next()){H.index>K?(te=H,H=null):te=H.sibling;var Q=C(N,H,Y.value,U);if(Q===null){H===null&&(H=te);break}e&&H&&Q.alternate===null&&t(N,H),P=u(Q,P,K),F===null?B=Q:F.sibling=Q,F=Q,H=te}if(Y.done)return o(N,H),Rr&&hu(N,K),B;if(H===null){for(;!Y.done;K++,Y=D.next())Y=S(N,Y.value,U),Y!==null&&(P=u(Y,P,K),F===null?B=Y:F.sibling=Y,F=Y);return Rr&&hu(N,K),B}for(H=a(N,H);!Y.done;K++,Y=D.next())Y=O(H,N,K,Y.value,U),Y!==null&&(e&&Y.alternate!==null&&H.delete(Y.key===null?K:Y.key),P=u(Y,P,K),F===null?B=Y:F.sibling=Y,F=Y);return e&&H.forEach(function(J){return t(N,J)}),Rr&&hu(N,K),B}function L(N,P,D,U){if(typeof D=="object"&&D!==null&&D.type===Jd&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case J0:e:{for(var B=D.key,F=P;F!==null;){if(F.key===B){if(B=D.type,B===Jd){if(F.tag===7){o(N,F.sibling),P=c(F,D.props.children),P.return=N,N=P;break e}}else if(F.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===ll&&Y2(B)===F.type){o(N,F.sibling),P=c(F,D.props),P.ref=Lp(N,F,D),P.return=N,N=P;break e}o(N,F);break}else t(N,F);F=F.sibling}D.type===Jd?(P=bu(D.props.children,N.mode,U,D.key),P.return=N,N=P):(U=Jg(D.type,D.key,D.props,null,N.mode,U),U.ref=Lp(N,P,D),U.return=N,N=U)}return d(N);case Xd:e:{for(F=D.key;P!==null;){if(P.key===F)if(P.tag===4&&P.stateNode.containerInfo===D.containerInfo&&P.stateNode.implementation===D.implementation){o(N,P.sibling),P=c(P,D.children||[]),P.return=N,N=P;break e}else{o(N,P);break}else t(N,P);P=P.sibling}P=NT(D,N.mode,U),P.return=N,N=P}return d(N);case ll:return F=D._init,L(N,P,F(D._payload),U)}if(qp(D))return I(N,P,D,U);if(Np(D))return A(N,P,D,U);cg(N,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,P!==null&&P.tag===6?(o(N,P.sibling),P=c(P,D),P.return=N,N=P):(o(N,P),P=AT(D,N.mode,U),P.return=N,N=P),d(N)):o(N,P)}return L}var Th=$3(!0),W3=$3(!1),Jf={},Vs=xl(Jf),Pf=xl(Jf),xf=xl(Jf);function _u(e){if(e===Jf)throw Error(Ve(174));return e}function lw(e,t){switch(mr(xf,t),mr(Pf,e),mr(Vs,Jf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Vb(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Vb(t,e)}yr(Vs),mr(Vs,t)}function bh(){yr(Vs),yr(Pf),yr(xf)}function G3(e){_u(xf.current);var t=_u(Vs.current),o=Vb(t,e.type);t!==o&&(mr(Pf,e),mr(Vs,o))}function uw(e){Pf.current===e&&(yr(Vs),yr(Pf))}var Ar=xl(0);function Tv(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var TT=[];function dw(){for(var e=0;e<TT.length;e++)TT[e]._workInProgressVersionPrimary=null;TT.length=0}var zg=bc.ReactCurrentDispatcher,bT=bc.ReactCurrentBatchConfig,Pu=0,Nr=null,mi=null,Ii=null,bv=!1,sf=!1,Df=0,eQ=0;function eo(){throw Error(Ve(321))}function hw(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!ps(e[o],t[o]))return!1;return!0}function pw(e,t,o,a,c,u){if(Pu=u,Nr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,zg.current=e===null||e.memoizedState===null?iQ:oQ,e=o(a,c),sf){u=0;do{if(sf=!1,Df=0,25<=u)throw Error(Ve(301));u+=1,Ii=mi=null,t.updateQueue=null,zg.current=aQ,e=o(a,c)}while(sf)}if(zg.current=Rv,t=mi!==null&&mi.next!==null,Pu=0,Ii=mi=Nr=null,bv=!1,t)throw Error(Ve(300));return e}function fw(){var e=Df!==0;return Df=0,e}function Ps(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ii===null?Nr.memoizedState=Ii=e:Ii=Ii.next=e,Ii}function $a(){if(mi===null){var e=Nr.alternate;e=e!==null?e.memoizedState:null}else e=mi.next;var t=Ii===null?Nr.memoizedState:Ii.next;if(t!==null)Ii=t,mi=e;else{if(e===null)throw Error(Ve(310));mi=e,e={memoizedState:mi.memoizedState,baseState:mi.baseState,baseQueue:mi.baseQueue,queue:mi.queue,next:null},Ii===null?Nr.memoizedState=Ii=e:Ii=Ii.next=e}return Ii}function kf(e,t){return typeof t=="function"?t(e):t}function RT(e){var t=$a(),o=t.queue;if(o===null)throw Error(Ve(311));o.lastRenderedReducer=e;var a=mi,c=a.baseQueue,u=o.pending;if(u!==null){if(c!==null){var d=c.next;c.next=u.next,u.next=d}a.baseQueue=c=u,o.pending=null}if(c!==null){u=c.next,a=a.baseState;var f=d=null,m=null,g=u;do{var _=g.lane;if((Pu&_)===_)m!==null&&(m=m.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),a=g.hasEagerState?g.eagerState:e(a,g.action);else{var S={lane:_,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};m===null?(f=m=S,d=a):m=m.next=S,Nr.lanes|=_,xu|=_}g=g.next}while(g!==null&&g!==u);m===null?d=a:m.next=f,ps(a,t.memoizedState)||(Uo=!0),t.memoizedState=a,t.baseState=d,t.baseQueue=m,o.lastRenderedState=a}if(e=o.interleaved,e!==null){c=e;do u=c.lane,Nr.lanes|=u,xu|=u,c=c.next;while(c!==e)}else c===null&&(o.lanes=0);return[t.memoizedState,o.dispatch]}function IT(e){var t=$a(),o=t.queue;if(o===null)throw Error(Ve(311));o.lastRenderedReducer=e;var a=o.dispatch,c=o.pending,u=t.memoizedState;if(c!==null){o.pending=null;var d=c=c.next;do u=e(u,d.action),d=d.next;while(d!==c);ps(u,t.memoizedState)||(Uo=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),o.lastRenderedState=u}return[u,a]}function z3(){}function K3(e,t){var o=Nr,a=$a(),c=t(),u=!ps(a.memoizedState,c);if(u&&(a.memoizedState=c,Uo=!0),a=a.queue,mw(X3.bind(null,o,a,e),[e]),a.getSnapshot!==t||u||Ii!==null&&Ii.memoizedState.tag&1){if(o.flags|=2048,Lf(9,q3.bind(null,o,a,c,t),void 0,null),wi===null)throw Error(Ve(349));Pu&30||Y3(o,t,c)}return c}function Y3(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=Nr.updateQueue,t===null?(t={lastEffect:null,stores:null},Nr.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function q3(e,t,o,a){t.value=o,t.getSnapshot=a,J3(t)&&Q3(e)}function X3(e,t,o){return o(function(){J3(t)&&Q3(e)})}function J3(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!ps(e,o)}catch{return!0}}function Q3(e){var t=_c(e,1);t!==null&&hs(t,e,1,-1)}function q2(e){var t=Ps();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kf,lastRenderedState:e},t.queue=e,e=e.dispatch=rQ.bind(null,Nr,e),[t.memoizedState,e]}function Lf(e,t,o,a){return e={tag:e,create:t,destroy:o,deps:a,next:null},t=Nr.updateQueue,t===null?(t={lastEffect:null,stores:null},Nr.updateQueue=t,t.lastEffect=e.next=e):(o=t.lastEffect,o===null?t.lastEffect=e.next=e:(a=o.next,o.next=e,e.next=a,t.lastEffect=e)),e}function Z3(){return $a().memoizedState}function Kg(e,t,o,a){var c=Ps();Nr.flags|=e,c.memoizedState=Lf(1|t,o,void 0,a===void 0?null:a)}function WE(e,t,o,a){var c=$a();a=a===void 0?null:a;var u=void 0;if(mi!==null){var d=mi.memoizedState;if(u=d.destroy,a!==null&&hw(a,d.deps)){c.memoizedState=Lf(t,o,u,a);return}}Nr.flags|=e,c.memoizedState=Lf(1|t,o,u,a)}function X2(e,t){return Kg(8390656,8,e,t)}function mw(e,t){return WE(2048,8,e,t)}function eB(e,t){return WE(4,2,e,t)}function tB(e,t){return WE(4,4,e,t)}function nB(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rB(e,t,o){return o=o!=null?o.concat([e]):null,WE(4,4,nB.bind(null,t,e),o)}function gw(){}function iB(e,t){var o=$a();t=t===void 0?null:t;var a=o.memoizedState;return a!==null&&t!==null&&hw(t,a[1])?a[0]:(o.memoizedState=[e,t],e)}function oB(e,t){var o=$a();t=t===void 0?null:t;var a=o.memoizedState;return a!==null&&t!==null&&hw(t,a[1])?a[0]:(e=e(),o.memoizedState=[e,t],e)}function aB(e,t,o){return Pu&21?(ps(o,t)||(o=l3(),Nr.lanes|=o,xu|=o,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Uo=!0),e.memoizedState=o)}function tQ(e,t){var o=zn;zn=o!==0&&4>o?o:4,e(!0);var a=bT.transition;bT.transition={};try{e(!1),t()}finally{zn=o,bT.transition=a}}function sB(){return $a().memoizedState}function nQ(e,t,o){var a=Rl(e);if(o={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null},cB(e))lB(t,o);else if(o=F3(e,t,o,a),o!==null){var c=vo();hs(o,e,a,c),uB(o,t,a)}}function rQ(e,t,o){var a=Rl(e),c={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null};if(cB(e))lB(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var d=t.lastRenderedState,f=u(d,o);if(c.hasEagerState=!0,c.eagerState=f,ps(f,d)){var m=t.interleaved;m===null?(c.next=c,sw(t)):(c.next=m.next,m.next=c),t.interleaved=c;return}}catch{}finally{}o=F3(e,t,c,a),o!==null&&(c=vo(),hs(o,e,a,c),uB(o,t,a))}}function cB(e){var t=e.alternate;return e===Nr||t!==null&&t===Nr}function lB(e,t){sf=bv=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function uB(e,t,o){if(o&4194240){var a=t.lanes;a&=e.pendingLanes,o|=a,t.lanes=o,KI(e,o)}}var Rv={readContext:Ha,useCallback:eo,useContext:eo,useEffect:eo,useImperativeHandle:eo,useInsertionEffect:eo,useLayoutEffect:eo,useMemo:eo,useReducer:eo,useRef:eo,useState:eo,useDebugValue:eo,useDeferredValue:eo,useTransition:eo,useMutableSource:eo,useSyncExternalStore:eo,useId:eo,unstable_isNewReconciler:!1},iQ={readContext:Ha,useCallback:function(e,t){return Ps().memoizedState=[e,t===void 0?null:t],e},useContext:Ha,useEffect:X2,useImperativeHandle:function(e,t,o){return o=o!=null?o.concat([e]):null,Kg(4194308,4,nB.bind(null,t,e),o)},useLayoutEffect:function(e,t){return Kg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Kg(4,2,e,t)},useMemo:function(e,t){var o=Ps();return t=t===void 0?null:t,e=e(),o.memoizedState=[e,t],e},useReducer:function(e,t,o){var a=Ps();return t=o!==void 0?o(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=nQ.bind(null,Nr,e),[a.memoizedState,e]},useRef:function(e){var t=Ps();return e={current:e},t.memoizedState=e},useState:q2,useDebugValue:gw,useDeferredValue:function(e){return Ps().memoizedState=e},useTransition:function(){var e=q2(!1),t=e[0];return e=tQ.bind(null,e[1]),Ps().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,o){var a=Nr,c=Ps();if(Rr){if(o===void 0)throw Error(Ve(407));o=o()}else{if(o=t(),wi===null)throw Error(Ve(349));Pu&30||Y3(a,t,o)}c.memoizedState=o;var u={value:o,getSnapshot:t};return c.queue=u,X2(X3.bind(null,a,u,e),[e]),a.flags|=2048,Lf(9,q3.bind(null,a,u,o,t),void 0,null),o},useId:function(){var e=Ps(),t=wi.identifierPrefix;if(Rr){var o=hc,a=dc;o=(a&~(1<<32-ds(a)-1)).toString(32)+o,t=":"+t+"R"+o,o=Df++,0<o&&(t+="H"+o.toString(32)),t+=":"}else o=eQ++,t=":"+t+"r"+o.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oQ={readContext:Ha,useCallback:iB,useContext:Ha,useEffect:mw,useImperativeHandle:rB,useInsertionEffect:eB,useLayoutEffect:tB,useMemo:oB,useReducer:RT,useRef:Z3,useState:function(){return RT(kf)},useDebugValue:gw,useDeferredValue:function(e){var t=$a();return aB(t,mi.memoizedState,e)},useTransition:function(){var e=RT(kf)[0],t=$a().memoizedState;return[e,t]},useMutableSource:z3,useSyncExternalStore:K3,useId:sB,unstable_isNewReconciler:!1},aQ={readContext:Ha,useCallback:iB,useContext:Ha,useEffect:mw,useImperativeHandle:rB,useInsertionEffect:eB,useLayoutEffect:tB,useMemo:oB,useReducer:IT,useRef:Z3,useState:function(){return IT(kf)},useDebugValue:gw,useDeferredValue:function(e){var t=$a();return mi===null?t.memoizedState=e:aB(t,mi.memoizedState,e)},useTransition:function(){var e=IT(kf)[0],t=$a().memoizedState;return[e,t]},useMutableSource:z3,useSyncExternalStore:K3,useId:sB,unstable_isNewReconciler:!1};function Rh(e,t){try{var o="",a=t;do o+=kX(a),a=a.return;while(a);var c=o}catch(u){c=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:c,digest:null}}function wT(e,t,o){return{value:e,source:null,stack:o??null,digest:t??null}}function sR(e,t){try{console.error(t.value)}catch(o){setTimeout(function(){throw o})}}var sQ=typeof WeakMap=="function"?WeakMap:Map;function dB(e,t,o){o=fc(-1,o),o.tag=3,o.payload={element:null};var a=t.value;return o.callback=function(){wv||(wv=!0,vR=a),sR(e,t)},o}function hB(e,t,o){o=fc(-1,o),o.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;o.payload=function(){return a(c)},o.callback=function(){sR(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(o.callback=function(){sR(e,t),typeof a!="function"&&(bl===null?bl=new Set([this]):bl.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),o}function J2(e,t,o){var a=e.pingCache;if(a===null){a=e.pingCache=new sQ;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(o)||(c.add(o),e=yQ.bind(null,e,t,o),t.then(e,e))}function Q2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Z2(e,t,o,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(t=fc(-1,1),t.tag=2,Tl(o,t,1))),o.lanes|=1),e)}var cQ=bc.ReactCurrentOwner,Uo=!1;function go(e,t,o,a){t.child=e===null?W3(t,null,o,a):Th(t,e.child,o,a)}function eU(e,t,o,a,c){o=o.render;var u=t.ref;return mh(t,c),a=pw(e,t,o,a,u,c),o=fw(),e!==null&&!Uo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Sc(e,t,c)):(Rr&&o&&tw(t),t.flags|=1,go(e,t,a,c),t.child)}function tU(e,t,o,a,c){if(e===null){var u=o.type;return typeof u=="function"&&!bw(u)&&u.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(t.tag=15,t.type=u,pB(e,t,u,a,c)):(e=Jg(o.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&c)){var d=u.memoizedProps;if(o=o.compare,o=o!==null?o:wf,o(d,a)&&e.ref===t.ref)return Sc(e,t,c)}return t.flags|=1,e=Il(u,a),e.ref=t.ref,e.return=t,t.child=e}function pB(e,t,o,a,c){if(e!==null){var u=e.memoizedProps;if(wf(u,a)&&e.ref===t.ref)if(Uo=!1,t.pendingProps=a=u,(e.lanes&c)!==0)e.flags&131072&&(Uo=!0);else return t.lanes=e.lanes,Sc(e,t,c)}return cR(e,t,o,a,c)}function fB(e,t,o){var a=t.pendingProps,c=a.children,u=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mr(sh,sa),sa|=o;else{if(!(o&1073741824))return e=u!==null?u.baseLanes|o:o,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mr(sh,sa),sa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=u!==null?u.baseLanes:o,mr(sh,sa),sa|=a}else u!==null?(a=u.baseLanes|o,t.memoizedState=null):a=o,mr(sh,sa),sa|=a;return go(e,t,c,o),t.child}function mB(e,t){var o=t.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(t.flags|=512,t.flags|=2097152)}function cR(e,t,o,a,c){var u=Bo(o)?Au:ao.current;return u=yh(t,u),mh(t,c),o=pw(e,t,o,a,u,c),a=fw(),e!==null&&!Uo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Sc(e,t,c)):(Rr&&a&&tw(t),t.flags|=1,go(e,t,o,c),t.child)}function nU(e,t,o,a,c){if(Bo(o)){var u=!0;vv(t)}else u=!1;if(mh(t,c),t.stateNode===null)Yg(e,t),H3(t,o,a),aR(t,o,a,c),a=!0;else if(e===null){var d=t.stateNode,f=t.memoizedProps;d.props=f;var m=d.context,g=o.contextType;typeof g=="object"&&g!==null?g=Ha(g):(g=Bo(o)?Au:ao.current,g=yh(t,g));var _=o.getDerivedStateFromProps,S=typeof _=="function"||typeof d.getSnapshotBeforeUpdate=="function";S||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(f!==a||m!==g)&&K2(t,d,a,g),ul=!1;var C=t.memoizedState;d.state=C,Cv(t,a,d,c),m=t.memoizedState,f!==a||C!==m||Fo.current||ul?(typeof _=="function"&&(oR(t,o,_,a),m=t.memoizedState),(f=ul||z2(t,o,f,a,C,m,g))?(S||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=m),d.props=a,d.state=m,d.context=g,a=f):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{d=t.stateNode,B3(e,t),f=t.memoizedProps,g=t.type===t.elementType?f:as(t.type,f),d.props=g,S=t.pendingProps,C=d.context,m=o.contextType,typeof m=="object"&&m!==null?m=Ha(m):(m=Bo(o)?Au:ao.current,m=yh(t,m));var O=o.getDerivedStateFromProps;(_=typeof O=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(f!==S||C!==m)&&K2(t,d,a,m),ul=!1,C=t.memoizedState,d.state=C,Cv(t,a,d,c);var I=t.memoizedState;f!==S||C!==I||Fo.current||ul?(typeof O=="function"&&(oR(t,o,O,a),I=t.memoizedState),(g=ul||z2(t,o,g,a,C,I,m)||!1)?(_||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,I,m),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,I,m)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||f===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=I),d.props=a,d.state=I,d.context=m,a=g):(typeof d.componentDidUpdate!="function"||f===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),a=!1)}return lR(e,t,o,a,u,c)}function lR(e,t,o,a,c,u){mB(e,t);var d=(t.flags&128)!==0;if(!a&&!d)return c&&j2(t,o,!1),Sc(e,t,u);a=t.stateNode,cQ.current=t;var f=d&&typeof o.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&d?(t.child=Th(t,e.child,null,u),t.child=Th(t,null,f,u)):go(e,t,f,u),t.memoizedState=a.state,c&&j2(t,o,!0),t.child}function gB(e){var t=e.stateNode;t.pendingContext?B2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&B2(e,t.context,!1),lw(e,t.containerInfo)}function rU(e,t,o,a,c){return Ch(),rw(c),t.flags|=256,go(e,t,o,a),t.child}var uR={dehydrated:null,treeContext:null,retryLane:0};function dR(e){return{baseLanes:e,cachePool:null,transitions:null}}function vB(e,t,o){var a=t.pendingProps,c=Ar.current,u=!1,d=(t.flags&128)!==0,f;if((f=d)||(f=e!==null&&e.memoizedState===null?!1:(c&2)!==0),f?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),mr(Ar,c&1),e===null)return rR(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=a.children,e=a.fallback,u?(a=t.mode,u=t.child,d={mode:"hidden",children:d},!(a&1)&&u!==null?(u.childLanes=0,u.pendingProps=d):u=KE(d,a,0,null),e=bu(e,a,o,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=dR(o),t.memoizedState=uR,e):vw(t,d));if(c=e.memoizedState,c!==null&&(f=c.dehydrated,f!==null))return lQ(e,t,d,a,f,c,o);if(u){u=a.fallback,d=t.mode,c=e.child,f=c.sibling;var m={mode:"hidden",children:a.children};return!(d&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=m,t.deletions=null):(a=Il(c,m),a.subtreeFlags=c.subtreeFlags&14680064),f!==null?u=Il(f,u):(u=bu(u,d,o,null),u.flags|=2),u.return=t,a.return=t,a.sibling=u,t.child=a,a=u,u=t.child,d=e.child.memoizedState,d=d===null?dR(o):{baseLanes:d.baseLanes|o,cachePool:null,transitions:d.transitions},u.memoizedState=d,u.childLanes=e.childLanes&~o,t.memoizedState=uR,a}return u=e.child,e=u.sibling,a=Il(u,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=o),a.return=t,a.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=a,t.memoizedState=null,a}function vw(e,t){return t=KE({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function lg(e,t,o,a){return a!==null&&rw(a),Th(t,e.child,null,o),e=vw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lQ(e,t,o,a,c,u,d){if(o)return t.flags&256?(t.flags&=-257,a=wT(Error(Ve(422))),lg(e,t,d,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=a.fallback,c=t.mode,a=KE({mode:"visible",children:a.children},c,0,null),u=bu(u,c,d,null),u.flags|=2,a.return=t,u.return=t,a.sibling=u,t.child=a,t.mode&1&&Th(t,e.child,null,d),t.child.memoizedState=dR(d),t.memoizedState=uR,u);if(!(t.mode&1))return lg(e,t,d,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var f=a.dgst;return a=f,u=Error(Ve(419)),a=wT(u,a,void 0),lg(e,t,d,a)}if(f=(d&e.childLanes)!==0,Uo||f){if(a=wi,a!==null){switch(d&-d){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|d)?0:c,c!==0&&c!==u.retryLane&&(u.retryLane=c,_c(e,c),hs(a,e,c,-1))}return Tw(),a=wT(Error(Ve(421))),lg(e,t,d,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=CQ.bind(null,e),c._reactRetry=t,null):(e=u.treeContext,ca=Cl(c.nextSibling),ua=t,Rr=!0,ls=null,e!==null&&(Ua[Va++]=dc,Ua[Va++]=hc,Ua[Va++]=Nu,dc=e.id,hc=e.overflow,Nu=t),t=vw(t,a.children),t.flags|=4096,t)}function iU(e,t,o){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),iR(e.return,t,o)}function OT(e,t,o,a,c){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:o,tailMode:c}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=a,u.tail=o,u.tailMode=c)}function EB(e,t,o){var a=t.pendingProps,c=a.revealOrder,u=a.tail;if(go(e,t,a.children,o),a=Ar.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&iU(e,o,t);else if(e.tag===19)iU(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(mr(Ar,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(o=t.child,c=null;o!==null;)e=o.alternate,e!==null&&Tv(e)===null&&(c=o),o=o.sibling;o=c,o===null?(c=t.child,t.child=null):(c=o.sibling,o.sibling=null),OT(t,!1,c,o,u);break;case"backwards":for(o=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Tv(e)===null){t.child=c;break}e=c.sibling,c.sibling=o,o=c,c=e}OT(t,!0,o,null,u);break;case"together":OT(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Sc(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),xu|=t.lanes,!(o&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ve(153));if(t.child!==null){for(e=t.child,o=Il(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=Il(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function uQ(e,t,o){switch(t.tag){case 3:gB(t),Ch();break;case 5:G3(t);break;case 1:Bo(t.type)&&vv(t);break;case 4:lw(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;mr(Sv,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(mr(Ar,Ar.current&1),t.flags|=128,null):o&t.child.childLanes?vB(e,t,o):(mr(Ar,Ar.current&1),e=Sc(e,t,o),e!==null?e.sibling:null);mr(Ar,Ar.current&1);break;case 19:if(a=(o&t.childLanes)!==0,e.flags&128){if(a)return EB(e,t,o);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),mr(Ar,Ar.current),a)break;return null;case 22:case 23:return t.lanes=0,fB(e,t,o)}return Sc(e,t,o)}var _B,hR,SB,yB;_B=function(e,t){for(var o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};hR=function(){};SB=function(e,t,o,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,_u(Vs.current);var u=null;switch(o){case"input":c=kb(e,c),a=kb(e,a),u=[];break;case"select":c=Pr({},c,{value:void 0}),a=Pr({},a,{value:void 0}),u=[];break;case"textarea":c=Ub(e,c),a=Ub(e,a),u=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=mv)}Fb(o,a);var d;o=null;for(g in c)if(!a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&c[g]!=null)if(g==="style"){var f=c[g];for(d in f)f.hasOwnProperty(d)&&(o||(o={}),o[d]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Sf.hasOwnProperty(g)?u||(u=[]):(u=u||[]).push(g,null));for(g in a){var m=a[g];if(f=c!=null?c[g]:void 0,a.hasOwnProperty(g)&&m!==f&&(m!=null||f!=null))if(g==="style")if(f){for(d in f)!f.hasOwnProperty(d)||m&&m.hasOwnProperty(d)||(o||(o={}),o[d]="");for(d in m)m.hasOwnProperty(d)&&f[d]!==m[d]&&(o||(o={}),o[d]=m[d])}else o||(u||(u=[]),u.push(g,o)),o=m;else g==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,f=f?f.__html:void 0,m!=null&&f!==m&&(u=u||[]).push(g,m)):g==="children"?typeof m!="string"&&typeof m!="number"||(u=u||[]).push(g,""+m):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Sf.hasOwnProperty(g)?(m!=null&&g==="onScroll"&&_r("scroll",e),u||f===m||(u=[])):(u=u||[]).push(g,m))}o&&(u=u||[]).push("style",o);var g=u;(t.updateQueue=g)&&(t.flags|=4)}};yB=function(e,t,o,a){o!==a&&(t.flags|=4)};function Mp(e,t){if(!Rr)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function to(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,a=0;if(t)for(var c=e.child;c!==null;)o|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)o|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=o,t}function dQ(e,t,o){var a=t.pendingProps;switch(nw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return to(t),null;case 1:return Bo(t.type)&&gv(),to(t),null;case 3:return a=t.stateNode,bh(),yr(Fo),yr(ao),dw(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(sg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ls!==null&&(SR(ls),ls=null))),hR(e,t),to(t),null;case 5:uw(t);var c=_u(xf.current);if(o=t.type,e!==null&&t.stateNode!=null)SB(e,t,o,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Ve(166));return to(t),null}if(e=_u(Vs.current),sg(t)){a=t.stateNode,o=t.type;var u=t.memoizedProps;switch(a[ks]=t,a[Nf]=u,e=(t.mode&1)!==0,o){case"dialog":_r("cancel",a),_r("close",a);break;case"iframe":case"object":case"embed":_r("load",a);break;case"video":case"audio":for(c=0;c<Jp.length;c++)_r(Jp[c],a);break;case"source":_r("error",a);break;case"img":case"image":case"link":_r("error",a),_r("load",a);break;case"details":_r("toggle",a);break;case"input":p2(a,u),_r("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!u.multiple},_r("invalid",a);break;case"textarea":m2(a,u),_r("invalid",a)}Fb(o,u),c=null;for(var d in u)if(u.hasOwnProperty(d)){var f=u[d];d==="children"?typeof f=="string"?a.textContent!==f&&(u.suppressHydrationWarning!==!0&&ag(a.textContent,f,e),c=["children",f]):typeof f=="number"&&a.textContent!==""+f&&(u.suppressHydrationWarning!==!0&&ag(a.textContent,f,e),c=["children",""+f]):Sf.hasOwnProperty(d)&&f!=null&&d==="onScroll"&&_r("scroll",a)}switch(o){case"input":Q0(a),f2(a,u,!0);break;case"textarea":Q0(a),g2(a);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(a.onclick=mv)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{d=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=YF(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=d.createElement(o,{is:a.is}):(e=d.createElement(o),o==="select"&&(d=e,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):e=d.createElementNS(e,o),e[ks]=t,e[Nf]=a,_B(e,t,!1,!1),t.stateNode=e;e:{switch(d=Bb(o,a),o){case"dialog":_r("cancel",e),_r("close",e),c=a;break;case"iframe":case"object":case"embed":_r("load",e),c=a;break;case"video":case"audio":for(c=0;c<Jp.length;c++)_r(Jp[c],e);c=a;break;case"source":_r("error",e),c=a;break;case"img":case"image":case"link":_r("error",e),_r("load",e),c=a;break;case"details":_r("toggle",e),c=a;break;case"input":p2(e,a),c=kb(e,a),_r("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Pr({},a,{value:void 0}),_r("invalid",e);break;case"textarea":m2(e,a),c=Ub(e,a),_r("invalid",e);break;default:c=a}Fb(o,c),f=c;for(u in f)if(f.hasOwnProperty(u)){var m=f[u];u==="style"?JF(e,m):u==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&qF(e,m)):u==="children"?typeof m=="string"?(o!=="textarea"||m!=="")&&yf(e,m):typeof m=="number"&&yf(e,""+m):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Sf.hasOwnProperty(u)?m!=null&&u==="onScroll"&&_r("scroll",e):m!=null&&jI(e,u,m,d))}switch(o){case"input":Q0(e),f2(e,a,!1);break;case"textarea":Q0(e),g2(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Ol(a.value));break;case"select":e.multiple=!!a.multiple,u=a.value,u!=null?dh(e,!!a.multiple,u,!1):a.defaultValue!=null&&dh(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=mv)}switch(o){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return to(t),null;case 6:if(e&&t.stateNode!=null)yB(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Ve(166));if(o=_u(xf.current),_u(Vs.current),sg(t)){if(a=t.stateNode,o=t.memoizedProps,a[ks]=t,(u=a.nodeValue!==o)&&(e=ua,e!==null))switch(e.tag){case 3:ag(a.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ag(a.nodeValue,o,(e.mode&1)!==0)}u&&(t.flags|=4)}else a=(o.nodeType===9?o:o.ownerDocument).createTextNode(a),a[ks]=t,t.stateNode=a}return to(t),null;case 13:if(yr(Ar),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Rr&&ca!==null&&t.mode&1&&!(t.flags&128))V3(),Ch(),t.flags|=98560,u=!1;else if(u=sg(t),a!==null&&a.dehydrated!==null){if(e===null){if(!u)throw Error(Ve(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(Ve(317));u[ks]=t}else Ch(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;to(t),u=!1}else ls!==null&&(SR(ls),ls=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=o,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Ar.current&1?gi===0&&(gi=3):Tw())),t.updateQueue!==null&&(t.flags|=4),to(t),null);case 4:return bh(),hR(e,t),e===null&&Of(t.stateNode.containerInfo),to(t),null;case 10:return aw(t.type._context),to(t),null;case 17:return Bo(t.type)&&gv(),to(t),null;case 19:if(yr(Ar),u=t.memoizedState,u===null)return to(t),null;if(a=(t.flags&128)!==0,d=u.rendering,d===null)if(a)Mp(u,!1);else{if(gi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=Tv(e),d!==null){for(t.flags|=128,Mp(u,!1),a=d.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=o,o=t.child;o!==null;)u=o,e=a,u.flags&=14680066,d=u.alternate,d===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=d.childLanes,u.lanes=d.lanes,u.child=d.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=d.memoizedProps,u.memoizedState=d.memoizedState,u.updateQueue=d.updateQueue,u.type=d.type,e=d.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return mr(Ar,Ar.current&1|2),t.child}e=e.sibling}u.tail!==null&&zr()>Ih&&(t.flags|=128,a=!0,Mp(u,!1),t.lanes=4194304)}else{if(!a)if(e=Tv(d),e!==null){if(t.flags|=128,a=!0,o=e.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),Mp(u,!0),u.tail===null&&u.tailMode==="hidden"&&!d.alternate&&!Rr)return to(t),null}else 2*zr()-u.renderingStartTime>Ih&&o!==1073741824&&(t.flags|=128,a=!0,Mp(u,!1),t.lanes=4194304);u.isBackwards?(d.sibling=t.child,t.child=d):(o=u.last,o!==null?o.sibling=d:t.child=d,u.last=d)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=zr(),t.sibling=null,o=Ar.current,mr(Ar,a?o&1|2:o&1),t):(to(t),null);case 22:case 23:return Cw(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?sa&1073741824&&(to(t),t.subtreeFlags&6&&(t.flags|=8192)):to(t),null;case 24:return null;case 25:return null}throw Error(Ve(156,t.tag))}function hQ(e,t){switch(nw(t),t.tag){case 1:return Bo(t.type)&&gv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return bh(),yr(Fo),yr(ao),dw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return uw(t),null;case 13:if(yr(Ar),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ve(340));Ch()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return yr(Ar),null;case 4:return bh(),null;case 10:return aw(t.type._context),null;case 22:case 23:return Cw(),null;case 24:return null;default:return null}}var ug=!1,ro=!1,pQ=typeof WeakSet=="function"?WeakSet:Set,it=null;function ah(e,t){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(a){kr(e,t,a)}else o.current=null}function pR(e,t,o){try{o()}catch(a){kr(e,t,a)}}var oU=!1;function fQ(e,t){if(Xb=hv,e=R3(),ew(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var a=o.getSelection&&o.getSelection();if(a&&a.rangeCount!==0){o=a.anchorNode;var c=a.anchorOffset,u=a.focusNode;a=a.focusOffset;try{o.nodeType,u.nodeType}catch{o=null;break e}var d=0,f=-1,m=-1,g=0,_=0,S=e,C=null;t:for(;;){for(var O;S!==o||c!==0&&S.nodeType!==3||(f=d+c),S!==u||a!==0&&S.nodeType!==3||(m=d+a),S.nodeType===3&&(d+=S.nodeValue.length),(O=S.firstChild)!==null;)C=S,S=O;for(;;){if(S===e)break t;if(C===o&&++g===c&&(f=d),C===u&&++_===a&&(m=d),(O=S.nextSibling)!==null)break;S=C,C=S.parentNode}S=O}o=f===-1||m===-1?null:{start:f,end:m}}else o=null}o=o||{start:0,end:0}}else o=null;for(Jb={focusedElem:e,selectionRange:o},hv=!1,it=t;it!==null;)if(t=it,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,it=e;else for(;it!==null;){t=it;try{var I=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var A=I.memoizedProps,L=I.memoizedState,N=t.stateNode,P=N.getSnapshotBeforeUpdate(t.elementType===t.type?A:as(t.type,A),L);N.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var D=t.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ve(163))}}catch(U){kr(t,t.return,U)}if(e=t.sibling,e!==null){e.return=t.return,it=e;break}it=t.return}return I=oU,oU=!1,I}function cf(e,t,o){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var u=c.destroy;c.destroy=void 0,u!==void 0&&pR(t,o,u)}c=c.next}while(c!==a)}}function GE(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var o=t=t.next;do{if((o.tag&e)===e){var a=o.create;o.destroy=a()}o=o.next}while(o!==t)}}function fR(e){var t=e.ref;if(t!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof t=="function"?t(e):t.current=e}}function CB(e){var t=e.alternate;t!==null&&(e.alternate=null,CB(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ks],delete t[Nf],delete t[eR],delete t[XJ],delete t[JJ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function TB(e){return e.tag===5||e.tag===3||e.tag===4}function aU(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||TB(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mR(e,t,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?o.nodeType===8?o.parentNode.insertBefore(e,t):o.insertBefore(e,t):(o.nodeType===8?(t=o.parentNode,t.insertBefore(e,o)):(t=o,t.appendChild(e)),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=mv));else if(a!==4&&(e=e.child,e!==null))for(mR(e,t,o),e=e.sibling;e!==null;)mR(e,t,o),e=e.sibling}function gR(e,t,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(gR(e,t,o),e=e.sibling;e!==null;)gR(e,t,o),e=e.sibling}var Mi=null,ss=!1;function ol(e,t,o){for(o=o.child;o!==null;)bB(e,t,o),o=o.sibling}function bB(e,t,o){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(UE,o)}catch{}switch(o.tag){case 5:ro||ah(o,t);case 6:var a=Mi,c=ss;Mi=null,ol(e,t,o),Mi=a,ss=c,Mi!==null&&(ss?(e=Mi,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):Mi.removeChild(o.stateNode));break;case 18:Mi!==null&&(ss?(e=Mi,o=o.stateNode,e.nodeType===8?yT(e.parentNode,o):e.nodeType===1&&yT(e,o),Rf(e)):yT(Mi,o.stateNode));break;case 4:a=Mi,c=ss,Mi=o.stateNode.containerInfo,ss=!0,ol(e,t,o),Mi=a,ss=c;break;case 0:case 11:case 14:case 15:if(!ro&&(a=o.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var u=c,d=u.destroy;u=u.tag,d!==void 0&&(u&2||u&4)&&pR(o,t,d),c=c.next}while(c!==a)}ol(e,t,o);break;case 1:if(!ro&&(ah(o,t),a=o.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=o.memoizedProps,a.state=o.memoizedState,a.componentWillUnmount()}catch(f){kr(o,t,f)}ol(e,t,o);break;case 21:ol(e,t,o);break;case 22:o.mode&1?(ro=(a=ro)||o.memoizedState!==null,ol(e,t,o),ro=a):ol(e,t,o);break;default:ol(e,t,o)}}function sU(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new pQ),t.forEach(function(a){var c=TQ.bind(null,e,a);o.has(a)||(o.add(a),a.then(c,c))})}}function is(e,t){var o=t.deletions;if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];try{var u=e,d=t,f=d;e:for(;f!==null;){switch(f.tag){case 5:Mi=f.stateNode,ss=!1;break e;case 3:Mi=f.stateNode.containerInfo,ss=!0;break e;case 4:Mi=f.stateNode.containerInfo,ss=!0;break e}f=f.return}if(Mi===null)throw Error(Ve(160));bB(u,d,c),Mi=null,ss=!1;var m=c.alternate;m!==null&&(m.return=null),c.return=null}catch(g){kr(c,t,g)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)RB(t,e),t=t.sibling}function RB(e,t){var o=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(is(t,e),Ns(e),a&4){try{cf(3,e,e.return),GE(3,e)}catch(A){kr(e,e.return,A)}try{cf(5,e,e.return)}catch(A){kr(e,e.return,A)}}break;case 1:is(t,e),Ns(e),a&512&&o!==null&&ah(o,o.return);break;case 5:if(is(t,e),Ns(e),a&512&&o!==null&&ah(o,o.return),e.flags&32){var c=e.stateNode;try{yf(c,"")}catch(A){kr(e,e.return,A)}}if(a&4&&(c=e.stateNode,c!=null)){var u=e.memoizedProps,d=o!==null?o.memoizedProps:u,f=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{f==="input"&&u.type==="radio"&&u.name!=null&&zF(c,u),Bb(f,d);var g=Bb(f,u);for(d=0;d<m.length;d+=2){var _=m[d],S=m[d+1];_==="style"?JF(c,S):_==="dangerouslySetInnerHTML"?qF(c,S):_==="children"?yf(c,S):jI(c,_,S,g)}switch(f){case"input":Lb(c,u);break;case"textarea":KF(c,u);break;case"select":var C=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!u.multiple;var O=u.value;O!=null?dh(c,!!u.multiple,O,!1):C!==!!u.multiple&&(u.defaultValue!=null?dh(c,!!u.multiple,u.defaultValue,!0):dh(c,!!u.multiple,u.multiple?[]:"",!1))}c[Nf]=u}catch(A){kr(e,e.return,A)}}break;case 6:if(is(t,e),Ns(e),a&4){if(e.stateNode===null)throw Error(Ve(162));c=e.stateNode,u=e.memoizedProps;try{c.nodeValue=u}catch(A){kr(e,e.return,A)}}break;case 3:if(is(t,e),Ns(e),a&4&&o!==null&&o.memoizedState.isDehydrated)try{Rf(t.containerInfo)}catch(A){kr(e,e.return,A)}break;case 4:is(t,e),Ns(e);break;case 13:is(t,e),Ns(e),c=e.child,c.flags&8192&&(u=c.memoizedState!==null,c.stateNode.isHidden=u,!u||c.alternate!==null&&c.alternate.memoizedState!==null||(Sw=zr())),a&4&&sU(e);break;case 22:if(_=o!==null&&o.memoizedState!==null,e.mode&1?(ro=(g=ro)||_,is(t,e),ro=g):is(t,e),Ns(e),a&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!_&&e.mode&1)for(it=e,_=e.child;_!==null;){for(S=it=_;it!==null;){switch(C=it,O=C.child,C.tag){case 0:case 11:case 14:case 15:cf(4,C,C.return);break;case 1:ah(C,C.return);var I=C.stateNode;if(typeof I.componentWillUnmount=="function"){a=C,o=C.return;try{t=a,I.props=t.memoizedProps,I.state=t.memoizedState,I.componentWillUnmount()}catch(A){kr(a,o,A)}}break;case 5:ah(C,C.return);break;case 22:if(C.memoizedState!==null){lU(S);continue}}O!==null?(O.return=C,it=O):lU(S)}_=_.sibling}e:for(_=null,S=e;;){if(S.tag===5){if(_===null){_=S;try{c=S.stateNode,g?(u=c.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(f=S.stateNode,m=S.memoizedProps.style,d=m!=null&&m.hasOwnProperty("display")?m.display:null,f.style.display=XF("display",d))}catch(A){kr(e,e.return,A)}}}else if(S.tag===6){if(_===null)try{S.stateNode.nodeValue=g?"":S.memoizedProps}catch(A){kr(e,e.return,A)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===e)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===e)break e;for(;S.sibling===null;){if(S.return===null||S.return===e)break e;_===S&&(_=null),S=S.return}_===S&&(_=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:is(t,e),Ns(e),a&4&&sU(e);break;case 21:break;default:is(t,e),Ns(e)}}function Ns(e){var t=e.flags;if(t&2){try{e:{for(var o=e.return;o!==null;){if(TB(o)){var a=o;break e}o=o.return}throw Error(Ve(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(yf(c,""),a.flags&=-33);var u=aU(e);gR(e,u,c);break;case 3:case 4:var d=a.stateNode.containerInfo,f=aU(e);mR(e,f,d);break;default:throw Error(Ve(161))}}catch(m){kr(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mQ(e,t,o){it=e,IB(e)}function IB(e,t,o){for(var a=(e.mode&1)!==0;it!==null;){var c=it,u=c.child;if(c.tag===22&&a){var d=c.memoizedState!==null||ug;if(!d){var f=c.alternate,m=f!==null&&f.memoizedState!==null||ro;f=ug;var g=ro;if(ug=d,(ro=m)&&!g)for(it=c;it!==null;)d=it,m=d.child,d.tag===22&&d.memoizedState!==null?uU(c):m!==null?(m.return=d,it=m):uU(c);for(;u!==null;)it=u,IB(u),u=u.sibling;it=c,ug=f,ro=g}cU(e)}else c.subtreeFlags&8772&&u!==null?(u.return=c,it=u):cU(e)}}function cU(e){for(;it!==null;){var t=it;if(t.flags&8772){var o=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ro||GE(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!ro)if(o===null)a.componentDidMount();else{var c=t.elementType===t.type?o.memoizedProps:as(t.type,o.memoizedProps);a.componentDidUpdate(c,o.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&G2(t,u,a);break;case 3:var d=t.updateQueue;if(d!==null){if(o=null,t.child!==null)switch(t.child.tag){case 5:o=t.child.stateNode;break;case 1:o=t.child.stateNode}G2(t,d,o)}break;case 5:var f=t.stateNode;if(o===null&&t.flags&4){o=f;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&o.focus();break;case"img":m.src&&(o.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var g=t.alternate;if(g!==null){var _=g.memoizedState;if(_!==null){var S=_.dehydrated;S!==null&&Rf(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ve(163))}ro||t.flags&512&&fR(t)}catch(C){kr(t,t.return,C)}}if(t===e){it=null;break}if(o=t.sibling,o!==null){o.return=t.return,it=o;break}it=t.return}}function lU(e){for(;it!==null;){var t=it;if(t===e){it=null;break}var o=t.sibling;if(o!==null){o.return=t.return,it=o;break}it=t.return}}function uU(e){for(;it!==null;){var t=it;try{switch(t.tag){case 0:case 11:case 15:var o=t.return;try{GE(4,t)}catch(m){kr(t,o,m)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(m){kr(t,c,m)}}var u=t.return;try{fR(t)}catch(m){kr(t,u,m)}break;case 5:var d=t.return;try{fR(t)}catch(m){kr(t,d,m)}}}catch(m){kr(t,t.return,m)}if(t===e){it=null;break}var f=t.sibling;if(f!==null){f.return=t.return,it=f;break}it=t.return}}var gQ=Math.ceil,Iv=bc.ReactCurrentDispatcher,Ew=bc.ReactCurrentOwner,Ba=bc.ReactCurrentBatchConfig,Rn=0,wi=null,ii=null,Bi=0,sa=0,sh=xl(0),gi=0,Mf=null,xu=0,zE=0,_w=0,lf=null,Mo=null,Sw=0,Ih=1/0,lc=null,wv=!1,vR=null,bl=null,dg=!1,fl=null,Ov=0,uf=0,ER=null,qg=-1,Xg=0;function vo(){return Rn&6?zr():qg!==-1?qg:qg=zr()}function Rl(e){return e.mode&1?Rn&2&&Bi!==0?Bi&-Bi:ZJ.transition!==null?(Xg===0&&(Xg=l3()),Xg):(e=zn,e!==0||(e=window.event,e=e===void 0?16:g3(e.type)),e):1}function hs(e,t,o,a){if(50<uf)throw uf=0,ER=null,Error(Ve(185));Yf(e,o,a),(!(Rn&2)||e!==wi)&&(e===wi&&(!(Rn&2)&&(zE|=o),gi===4&&hl(e,Bi)),jo(e,a),o===1&&Rn===0&&!(t.mode&1)&&(Ih=zr()+500,HE&&Dl()))}function jo(e,t){var o=e.callbackNode;ZX(e,t);var a=dv(e,e===wi?Bi:0);if(a===0)o!==null&&_2(o),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(o!=null&&_2(o),t===1)e.tag===0?QJ(dU.bind(null,e)):L3(dU.bind(null,e)),YJ(function(){!(Rn&6)&&Dl()}),o=null;else{switch(u3(a)){case 1:o=zI;break;case 4:o=s3;break;case 16:o=uv;break;case 536870912:o=c3;break;default:o=uv}o=kB(o,wB.bind(null,e))}e.callbackPriority=t,e.callbackNode=o}}function wB(e,t){if(qg=-1,Xg=0,Rn&6)throw Error(Ve(327));var o=e.callbackNode;if(gh()&&e.callbackNode!==o)return null;var a=dv(e,e===wi?Bi:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Av(e,a);else{t=a;var c=Rn;Rn|=2;var u=AB();(wi!==e||Bi!==t)&&(lc=null,Ih=zr()+500,Tu(e,t));do try{_Q();break}catch(f){OB(e,f)}while(1);ow(),Iv.current=u,Rn=c,ii!==null?t=0:(wi=null,Bi=0,t=gi)}if(t!==0){if(t===2&&(c=Gb(e),c!==0&&(a=c,t=_R(e,c))),t===1)throw o=Mf,Tu(e,0),hl(e,a),jo(e,zr()),o;if(t===6)hl(e,a);else{if(c=e.current.alternate,!(a&30)&&!vQ(c)&&(t=Av(e,a),t===2&&(u=Gb(e),u!==0&&(a=u,t=_R(e,u))),t===1))throw o=Mf,Tu(e,0),hl(e,a),jo(e,zr()),o;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(Ve(345));case 2:pu(e,Mo,lc);break;case 3:if(hl(e,a),(a&130023424)===a&&(t=Sw+500-zr(),10<t)){if(dv(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){vo(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Zb(pu.bind(null,e,Mo,lc),t);break}pu(e,Mo,lc);break;case 4:if(hl(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var d=31-ds(a);u=1<<d,d=t[d],d>c&&(c=d),a&=~u}if(a=c,a=zr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*gQ(a/1960))-a,10<a){e.timeoutHandle=Zb(pu.bind(null,e,Mo,lc),a);break}pu(e,Mo,lc);break;case 5:pu(e,Mo,lc);break;default:throw Error(Ve(329))}}}return jo(e,zr()),e.callbackNode===o?wB.bind(null,e):null}function _R(e,t){var o=lf;return e.current.memoizedState.isDehydrated&&(Tu(e,t).flags|=256),e=Av(e,t),e!==2&&(t=Mo,Mo=o,t!==null&&SR(t)),e}function SR(e){Mo===null?Mo=e:Mo.push.apply(Mo,e)}function vQ(e){for(var t=e;;){if(t.flags&16384){var o=t.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var a=0;a<o.length;a++){var c=o[a],u=c.getSnapshot;c=c.value;try{if(!ps(u(),c))return!1}catch{return!1}}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hl(e,t){for(t&=~_w,t&=~zE,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var o=31-ds(t),a=1<<o;e[o]=-1,t&=~a}}function dU(e){if(Rn&6)throw Error(Ve(327));gh();var t=dv(e,0);if(!(t&1))return jo(e,zr()),null;var o=Av(e,t);if(e.tag!==0&&o===2){var a=Gb(e);a!==0&&(t=a,o=_R(e,a))}if(o===1)throw o=Mf,Tu(e,0),hl(e,t),jo(e,zr()),o;if(o===6)throw Error(Ve(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pu(e,Mo,lc),jo(e,zr()),null}function yw(e,t){var o=Rn;Rn|=1;try{return e(t)}finally{Rn=o,Rn===0&&(Ih=zr()+500,HE&&Dl())}}function Du(e){fl!==null&&fl.tag===0&&!(Rn&6)&&gh();var t=Rn;Rn|=1;var o=Ba.transition,a=zn;try{if(Ba.transition=null,zn=1,e)return e()}finally{zn=a,Ba.transition=o,Rn=t,!(Rn&6)&&Dl()}}function Cw(){sa=sh.current,yr(sh)}function Tu(e,t){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,KJ(o)),ii!==null)for(o=ii.return;o!==null;){var a=o;switch(nw(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&gv();break;case 3:bh(),yr(Fo),yr(ao),dw();break;case 5:uw(a);break;case 4:bh();break;case 13:yr(Ar);break;case 19:yr(Ar);break;case 10:aw(a.type._context);break;case 22:case 23:Cw()}o=o.return}if(wi=e,ii=e=Il(e.current,null),Bi=sa=t,gi=0,Mf=null,_w=zE=xu=0,Mo=lf=null,Eu!==null){for(t=0;t<Eu.length;t++)if(o=Eu[t],a=o.interleaved,a!==null){o.interleaved=null;var c=a.next,u=o.pending;if(u!==null){var d=u.next;u.next=c,a.next=d}o.pending=a}Eu=null}return e}function OB(e,t){do{var o=ii;try{if(ow(),zg.current=Rv,bv){for(var a=Nr.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}bv=!1}if(Pu=0,Ii=mi=Nr=null,sf=!1,Df=0,Ew.current=null,o===null||o.return===null){gi=1,Mf=t,ii=null;break}e:{var u=e,d=o.return,f=o,m=t;if(t=Bi,f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var g=m,_=f,S=_.tag;if(!(_.mode&1)&&(S===0||S===11||S===15)){var C=_.alternate;C?(_.updateQueue=C.updateQueue,_.memoizedState=C.memoizedState,_.lanes=C.lanes):(_.updateQueue=null,_.memoizedState=null)}var O=Q2(d);if(O!==null){O.flags&=-257,Z2(O,d,f,u,t),O.mode&1&&J2(u,g,t),t=O,m=g;var I=t.updateQueue;if(I===null){var A=new Set;A.add(m),t.updateQueue=A}else I.add(m);break e}else{if(!(t&1)){J2(u,g,t),Tw();break e}m=Error(Ve(426))}}else if(Rr&&f.mode&1){var L=Q2(d);if(L!==null){!(L.flags&65536)&&(L.flags|=256),Z2(L,d,f,u,t),rw(Rh(m,f));break e}}u=m=Rh(m,f),gi!==4&&(gi=2),lf===null?lf=[u]:lf.push(u),u=d;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var N=dB(u,m,t);W2(u,N);break e;case 1:f=m;var P=u.type,D=u.stateNode;if(!(u.flags&128)&&(typeof P.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(bl===null||!bl.has(D)))){u.flags|=65536,t&=-t,u.lanes|=t;var U=hB(u,f,t);W2(u,U);break e}}u=u.return}while(u!==null)}PB(o)}catch(B){t=B,ii===o&&o!==null&&(ii=o=o.return);continue}break}while(1)}function AB(){var e=Iv.current;return Iv.current=Rv,e===null?Rv:e}function Tw(){(gi===0||gi===3||gi===2)&&(gi=4),wi===null||!(xu&268435455)&&!(zE&268435455)||hl(wi,Bi)}function Av(e,t){var o=Rn;Rn|=2;var a=AB();(wi!==e||Bi!==t)&&(lc=null,Tu(e,t));do try{EQ();break}catch(c){OB(e,c)}while(1);if(ow(),Rn=o,Iv.current=a,ii!==null)throw Error(Ve(261));return wi=null,Bi=0,gi}function EQ(){for(;ii!==null;)NB(ii)}function _Q(){for(;ii!==null&&!WX();)NB(ii)}function NB(e){var t=DB(e.alternate,e,sa);e.memoizedProps=e.pendingProps,t===null?PB(e):ii=t,Ew.current=null}function PB(e){var t=e;do{var o=t.alternate;if(e=t.return,t.flags&32768){if(o=hQ(o,t),o!==null){o.flags&=32767,ii=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{gi=6,ii=null;return}}else if(o=dQ(o,t,sa),o!==null){ii=o;return}if(t=t.sibling,t!==null){ii=t;return}ii=t=e}while(t!==null);gi===0&&(gi=5)}function pu(e,t,o){var a=zn,c=Ba.transition;try{Ba.transition=null,zn=1,SQ(e,t,o,a)}finally{Ba.transition=c,zn=a}return null}function SQ(e,t,o,a){do gh();while(fl!==null);if(Rn&6)throw Error(Ve(327));o=e.finishedWork;var c=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(Ve(177));e.callbackNode=null,e.callbackPriority=0;var u=o.lanes|o.childLanes;if(eJ(e,u),e===wi&&(ii=wi=null,Bi=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||dg||(dg=!0,kB(uv,function(){return gh(),null})),u=(o.flags&15990)!==0,o.subtreeFlags&15990||u){u=Ba.transition,Ba.transition=null;var d=zn;zn=1;var f=Rn;Rn|=4,Ew.current=null,fQ(e,o),RB(o,e),BJ(Jb),hv=!!Xb,Jb=Xb=null,e.current=o,mQ(o),GX(),Rn=f,zn=d,Ba.transition=u}else e.current=o;if(dg&&(dg=!1,fl=e,Ov=c),u=e.pendingLanes,u===0&&(bl=null),YX(o.stateNode),jo(e,zr()),t!==null)for(a=e.onRecoverableError,o=0;o<t.length;o++)c=t[o],a(c.value,{componentStack:c.stack,digest:c.digest});if(wv)throw wv=!1,e=vR,vR=null,e;return Ov&1&&e.tag!==0&&gh(),u=e.pendingLanes,u&1?e===ER?uf++:(uf=0,ER=e):uf=0,Dl(),null}function gh(){if(fl!==null){var e=u3(Ov),t=Ba.transition,o=zn;try{if(Ba.transition=null,zn=16>e?16:e,fl===null)var a=!1;else{if(e=fl,fl=null,Ov=0,Rn&6)throw Error(Ve(331));var c=Rn;for(Rn|=4,it=e.current;it!==null;){var u=it,d=u.child;if(it.flags&16){var f=u.deletions;if(f!==null){for(var m=0;m<f.length;m++){var g=f[m];for(it=g;it!==null;){var _=it;switch(_.tag){case 0:case 11:case 15:cf(8,_,u)}var S=_.child;if(S!==null)S.return=_,it=S;else for(;it!==null;){_=it;var C=_.sibling,O=_.return;if(CB(_),_===g){it=null;break}if(C!==null){C.return=O,it=C;break}it=O}}}var I=u.alternate;if(I!==null){var A=I.child;if(A!==null){I.child=null;do{var L=A.sibling;A.sibling=null,A=L}while(A!==null)}}it=u}}if(u.subtreeFlags&2064&&d!==null)d.return=u,it=d;else e:for(;it!==null;){if(u=it,u.flags&2048)switch(u.tag){case 0:case 11:case 15:cf(9,u,u.return)}var N=u.sibling;if(N!==null){N.return=u.return,it=N;break e}it=u.return}}var P=e.current;for(it=P;it!==null;){d=it;var D=d.child;if(d.subtreeFlags&2064&&D!==null)D.return=d,it=D;else e:for(d=P;it!==null;){if(f=it,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:GE(9,f)}}catch(B){kr(f,f.return,B)}if(f===d){it=null;break e}var U=f.sibling;if(U!==null){U.return=f.return,it=U;break e}it=f.return}}if(Rn=c,Dl(),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(UE,e)}catch{}a=!0}return a}finally{zn=o,Ba.transition=t}}return!1}function hU(e,t,o){t=Rh(o,t),t=dB(e,t,1),e=Tl(e,t,1),t=vo(),e!==null&&(Yf(e,1,t),jo(e,t))}function kr(e,t,o){if(e.tag===3)hU(e,e,o);else for(;t!==null;){if(t.tag===3){hU(t,e,o);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(bl===null||!bl.has(a))){e=Rh(o,e),e=hB(t,e,1),t=Tl(t,e,1),e=vo(),t!==null&&(Yf(t,1,e),jo(t,e));break}}t=t.return}}function yQ(e,t,o){var a=e.pingCache;a!==null&&a.delete(t),t=vo(),e.pingedLanes|=e.suspendedLanes&o,wi===e&&(Bi&o)===o&&(gi===4||gi===3&&(Bi&130023424)===Bi&&500>zr()-Sw?Tu(e,0):_w|=o),jo(e,t)}function xB(e,t){t===0&&(e.mode&1?(t=tg,tg<<=1,!(tg&130023424)&&(tg=4194304)):t=1);var o=vo();e=_c(e,t),e!==null&&(Yf(e,t,o),jo(e,o))}function CQ(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),xB(e,o)}function TQ(e,t){var o=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(o=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Ve(314))}a!==null&&a.delete(t),xB(e,o)}var DB;DB=function(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps||Fo.current)Uo=!0;else{if(!(e.lanes&o)&&!(t.flags&128))return Uo=!1,uQ(e,t,o);Uo=!!(e.flags&131072)}else Uo=!1,Rr&&t.flags&1048576&&M3(t,_v,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Yg(e,t),e=t.pendingProps;var c=yh(t,ao.current);mh(t,o),c=pw(null,t,a,e,c,o);var u=fw();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bo(a)?(u=!0,vv(t)):u=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,cw(t),c.updater=$E,t.stateNode=c,c._reactInternals=t,aR(t,a,e,o),t=lR(null,t,a,!0,u,o)):(t.tag=0,Rr&&u&&tw(t),go(null,t,c,o),t=t.child),t;case 16:a=t.elementType;e:{switch(Yg(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=RQ(a),e=as(a,e),c){case 0:t=cR(null,t,a,e,o);break e;case 1:t=nU(null,t,a,e,o);break e;case 11:t=eU(null,t,a,e,o);break e;case 14:t=tU(null,t,a,as(a.type,e),o);break e}throw Error(Ve(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:as(a,c),cR(e,t,a,c,o);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:as(a,c),nU(e,t,a,c,o);case 3:e:{if(gB(t),e===null)throw Error(Ve(387));a=t.pendingProps,u=t.memoizedState,c=u.element,B3(e,t),Cv(t,a,null,o);var d=t.memoizedState;if(a=d.element,u.isDehydrated)if(u={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){c=Rh(Error(Ve(423)),t),t=rU(e,t,a,o,c);break e}else if(a!==c){c=Rh(Error(Ve(424)),t),t=rU(e,t,a,o,c);break e}else for(ca=Cl(t.stateNode.containerInfo.firstChild),ua=t,Rr=!0,ls=null,o=W3(t,null,a,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ch(),a===c){t=Sc(e,t,o);break e}go(e,t,a,o)}t=t.child}return t;case 5:return G3(t),e===null&&rR(t),a=t.type,c=t.pendingProps,u=e!==null?e.memoizedProps:null,d=c.children,Qb(a,c)?d=null:u!==null&&Qb(a,u)&&(t.flags|=32),mB(e,t),go(e,t,d,o),t.child;case 6:return e===null&&rR(t),null;case 13:return vB(e,t,o);case 4:return lw(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Th(t,null,a,o):go(e,t,a,o),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:as(a,c),eU(e,t,a,c,o);case 7:return go(e,t,t.pendingProps,o),t.child;case 8:return go(e,t,t.pendingProps.children,o),t.child;case 12:return go(e,t,t.pendingProps.children,o),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,u=t.memoizedProps,d=c.value,mr(Sv,a._currentValue),a._currentValue=d,u!==null)if(ps(u.value,d)){if(u.children===c.children&&!Fo.current){t=Sc(e,t,o);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var f=u.dependencies;if(f!==null){d=u.child;for(var m=f.firstContext;m!==null;){if(m.context===a){if(u.tag===1){m=fc(-1,o&-o),m.tag=2;var g=u.updateQueue;if(g!==null){g=g.shared;var _=g.pending;_===null?m.next=m:(m.next=_.next,_.next=m),g.pending=m}}u.lanes|=o,m=u.alternate,m!==null&&(m.lanes|=o),iR(u.return,o,t),f.lanes|=o;break}m=m.next}}else if(u.tag===10)d=u.type===t.type?null:u.child;else if(u.tag===18){if(d=u.return,d===null)throw Error(Ve(341));d.lanes|=o,f=d.alternate,f!==null&&(f.lanes|=o),iR(d,o,t),d=u.sibling}else d=u.child;if(d!==null)d.return=u;else for(d=u;d!==null;){if(d===t){d=null;break}if(u=d.sibling,u!==null){u.return=d.return,d=u;break}d=d.return}u=d}go(e,t,c.children,o),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,mh(t,o),c=Ha(c),a=a(c),t.flags|=1,go(e,t,a,o),t.child;case 14:return a=t.type,c=as(a,t.pendingProps),c=as(a.type,c),tU(e,t,a,c,o);case 15:return pB(e,t,t.type,t.pendingProps,o);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:as(a,c),Yg(e,t),t.tag=1,Bo(a)?(e=!0,vv(t)):e=!1,mh(t,o),H3(t,a,c),aR(t,a,c,o),lR(null,t,a,!0,e,o);case 19:return EB(e,t,o);case 22:return fB(e,t,o)}throw Error(Ve(156,t.tag))};function kB(e,t){return a3(e,t)}function bQ(e,t,o,a){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fa(e,t,o,a){return new bQ(e,t,o,a)}function bw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function RQ(e){if(typeof e=="function")return bw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$I)return 11;if(e===WI)return 14}return 2}function Il(e,t){var o=e.alternate;return o===null?(o=Fa(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function Jg(e,t,o,a,c,u){var d=2;if(a=e,typeof e=="function")bw(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case Jd:return bu(o.children,c,u,t);case HI:d=8,c|=8;break;case Nb:return e=Fa(12,o,t,c|2),e.elementType=Nb,e.lanes=u,e;case Pb:return e=Fa(13,o,t,c),e.elementType=Pb,e.lanes=u,e;case xb:return e=Fa(19,o,t,c),e.elementType=xb,e.lanes=u,e;case $F:return KE(o,c,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case jF:d=10;break e;case HF:d=9;break e;case $I:d=11;break e;case WI:d=14;break e;case ll:d=16,a=null;break e}throw Error(Ve(130,e==null?e:typeof e,""))}return t=Fa(d,o,t,c),t.elementType=e,t.type=a,t.lanes=u,t}function bu(e,t,o,a){return e=Fa(7,e,a,t),e.lanes=o,e}function KE(e,t,o,a){return e=Fa(22,e,a,t),e.elementType=$F,e.lanes=o,e.stateNode={isHidden:!1},e}function AT(e,t,o){return e=Fa(6,e,null,t),e.lanes=o,e}function NT(e,t,o){return t=Fa(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function IQ(e,t,o,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uT(0),this.expirationTimes=uT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uT(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Rw(e,t,o,a,c,u,d,f,m){return e=new IQ(e,t,o,f,m),t===1?(t=1,u===!0&&(t|=8)):t=0,u=Fa(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:a,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},cw(u),e}function wQ(e,t,o){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xd,key:a==null?null:""+a,children:e,containerInfo:t,implementation:o}}function LB(e){if(!e)return Al;e=e._reactInternals;e:{if(Mu(e)!==e||e.tag!==1)throw Error(Ve(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ve(171))}if(e.tag===1){var o=e.type;if(Bo(o))return k3(e,o,t)}return t}function MB(e,t,o,a,c,u,d,f,m){return e=Rw(o,a,!0,e,c,u,d,f,m),e.context=LB(null),o=e.current,a=vo(),c=Rl(o),u=fc(a,c),u.callback=t??null,Tl(o,u,c),e.current.lanes=c,Yf(e,c,a),jo(e,a),e}function YE(e,t,o,a){var c=t.current,u=vo(),d=Rl(c);return o=LB(o),t.context===null?t.context=o:t.pendingContext=o,t=fc(u,d),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Tl(c,t,d),e!==null&&(hs(e,c,d,u),Gg(e,c,d)),d}function Nv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pU(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function Iw(e,t){pU(e,t),(e=e.alternate)&&pU(e,t)}function OQ(){return null}var UB=typeof reportError=="function"?reportError:function(e){console.error(e)};function ww(e){this._internalRoot=e}qE.prototype.render=ww.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ve(409));YE(e,t,null,null)};qE.prototype.unmount=ww.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Du(function(){YE(null,e,null,null)}),t[Ec]=null}};function qE(e){this._internalRoot=e}qE.prototype.unstable_scheduleHydration=function(e){if(e){var t=p3();e={blockedOn:null,target:e,priority:t};for(var o=0;o<dl.length&&t!==0&&t<dl[o].priority;o++);dl.splice(o,0,e),o===0&&m3(e)}};function Ow(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function XE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fU(){}function AQ(e,t,o,a,c){if(c){if(typeof a=="function"){var u=a;a=function(){var g=Nv(d);u.call(g)}}var d=MB(t,a,e,0,null,!1,!1,"",fU);return e._reactRootContainer=d,e[Ec]=d.current,Of(e.nodeType===8?e.parentNode:e),Du(),d}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var f=a;a=function(){var g=Nv(m);f.call(g)}}var m=Rw(e,0,!1,null,null,!1,!1,"",fU);return e._reactRootContainer=m,e[Ec]=m.current,Of(e.nodeType===8?e.parentNode:e),Du(function(){YE(t,m,o,a)}),m}function JE(e,t,o,a,c){var u=o._reactRootContainer;if(u){var d=u;if(typeof c=="function"){var f=c;c=function(){var m=Nv(d);f.call(m)}}YE(t,d,e,c)}else d=AQ(o,t,e,c,a);return Nv(d)}d3=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var o=Xp(t.pendingLanes);o!==0&&(KI(t,o|1),jo(t,zr()),!(Rn&6)&&(Ih=zr()+500,Dl()))}break;case 13:Du(function(){var a=_c(e,1);if(a!==null){var c=vo();hs(a,e,1,c)}}),Iw(e,1)}};YI=function(e){if(e.tag===13){var t=_c(e,134217728);if(t!==null){var o=vo();hs(t,e,134217728,o)}Iw(e,134217728)}};h3=function(e){if(e.tag===13){var t=Rl(e),o=_c(e,t);if(o!==null){var a=vo();hs(o,e,t,a)}Iw(e,t)}};p3=function(){return zn};f3=function(e,t){var o=zn;try{return zn=e,t()}finally{zn=o}};Hb=function(e,t,o){switch(t){case"input":if(Lb(e,o),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<o.length;t++){var a=o[t];if(a!==e&&a.form===e.form){var c=jE(a);if(!c)throw Error(Ve(90));GF(a),Lb(a,c)}}}break;case"textarea":KF(e,o);break;case"select":t=o.value,t!=null&&dh(e,!!o.multiple,t,!1)}};e3=yw;t3=Du;var NQ={usingClientEntryPoint:!1,Events:[Xf,th,jE,QF,ZF,yw]},Up={findFiberByHostInstance:vu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},PQ={bundleType:Up.bundleType,version:Up.version,rendererPackageName:Up.rendererPackageName,rendererConfig:Up.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=i3(e),e===null?null:e.stateNode},findFiberByHostInstance:Up.findFiberByHostInstance||OQ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hg.isDisabled&&hg.supportsFiber)try{UE=hg.inject(PQ),Us=hg}catch{}}ma.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NQ;ma.createPortal=function(e,t){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ow(t))throw Error(Ve(200));return wQ(e,t,null,o)};ma.createRoot=function(e,t){if(!Ow(e))throw Error(Ve(299));var o=!1,a="",c=UB;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=Rw(e,1,!1,null,null,o,!1,a,c),e[Ec]=t.current,Of(e.nodeType===8?e.parentNode:e),new ww(t)};ma.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ve(188)):(e=Object.keys(e).join(","),Error(Ve(268,e)));return e=i3(t),e=e===null?null:e.stateNode,e};ma.flushSync=function(e){return Du(e)};ma.hydrate=function(e,t,o){if(!XE(t))throw Error(Ve(200));return JE(null,e,t,!0,o)};ma.hydrateRoot=function(e,t,o){if(!Ow(e))throw Error(Ve(405));var a=o!=null&&o.hydratedSources||null,c=!1,u="",d=UB;if(o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onRecoverableError!==void 0&&(d=o.onRecoverableError)),t=MB(t,null,e,1,o??null,c,!1,u,d),e[Ec]=t.current,Of(e),a)for(e=0;e<a.length;e++)o=a[e],c=o._getVersion,c=c(o._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[o,c]:t.mutableSourceEagerHydrationData.push(o,c);return new qE(t)};ma.render=function(e,t,o){if(!XE(t))throw Error(Ve(200));return JE(null,e,t,!1,o)};ma.unmountComponentAtNode=function(e){if(!XE(e))throw Error(Ve(40));return e._reactRootContainer?(Du(function(){JE(null,null,e,!1,function(){e._reactRootContainer=null,e[Ec]=null})}),!0):!1};ma.unstable_batchedUpdates=yw;ma.unstable_renderSubtreeIntoContainer=function(e,t,o,a){if(!XE(o))throw Error(Ve(200));if(e==null||e._reactInternals===void 0)throw Error(Ve(38));return JE(e,t,o,!1,a)};ma.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(o){console.error(o)}}t(),e.exports=ma})(OX);const wh=LE(gc),xQ=OF({__proto__:null,default:wh},[gc]);var mU=gc;wb.createRoot=mU.createRoot,wb.hydrateRoot=mU.hydrateRoot;/**
 * @remix-run/router v1.6.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uf(){return Uf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},Uf.apply(this,arguments)}var ml;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ml||(ml={}));const gU="popstate";function DQ(e){e===void 0&&(e={});function t(c,u){let{pathname:d="/",search:f="",hash:m=""}=Uu(c.location.hash.substr(1));return yR("",{pathname:d,search:f,hash:m},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function o(c,u){let d=c.document.querySelector("base"),f="";if(d&&d.getAttribute("href")){let m=c.location.href,g=m.indexOf("#");f=g===-1?m:m.slice(0,g)}return f+"#"+(typeof u=="string"?u:VB(u))}function a(c,u){QE(c.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(u)+")")}return LQ(t,o,a,e)}function vi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function QE(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function kQ(){return Math.random().toString(36).substr(2,8)}function vU(e,t){return{usr:e.state,key:e.key,idx:t}}function yR(e,t,o,a){return o===void 0&&(o=null),Uf({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Uu(t):t,{state:o,key:t&&t.key||a||kQ()})}function VB(e){let{pathname:t="/",search:o="",hash:a=""}=e;return o&&o!=="?"&&(t+=o.charAt(0)==="?"?o:"?"+o),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Uu(e){let t={};if(e){let o=e.indexOf("#");o>=0&&(t.hash=e.substr(o),e=e.substr(0,o));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function LQ(e,t,o,a){a===void 0&&(a={});let{window:c=document.defaultView,v5Compat:u=!1}=a,d=c.history,f=ml.Pop,m=null,g=_();g==null&&(g=0,d.replaceState(Uf({},d.state,{idx:g}),""));function _(){return(d.state||{idx:null}).idx}function S(){f=ml.Pop;let L=_(),N=L==null?null:L-g;g=L,m&&m({action:f,location:A.location,delta:N})}function C(L,N){f=ml.Push;let P=yR(A.location,L,N);o&&o(P,L),g=_()+1;let D=vU(P,g),U=A.createHref(P);try{d.pushState(D,"",U)}catch{c.location.assign(U)}u&&m&&m({action:f,location:A.location,delta:1})}function O(L,N){f=ml.Replace;let P=yR(A.location,L,N);o&&o(P,L),g=_();let D=vU(P,g),U=A.createHref(P);d.replaceState(D,"",U),u&&m&&m({action:f,location:A.location,delta:0})}function I(L){let N=c.location.origin!=="null"?c.location.origin:c.location.href,P=typeof L=="string"?L:VB(L);return vi(N,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,N)}let A={get action(){return f},get location(){return e(c,d)},listen(L){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(gU,S),m=L,()=>{c.removeEventListener(gU,S),m=null}},createHref(L){return t(c,L)},createURL:I,encodeLocation(L){let N=I(L);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:C,replace:O,go(L){return d.go(L)}};return A}var EU;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(EU||(EU={}));function MQ(e,t,o){o===void 0&&(o="/");let a=typeof t=="string"?Uu(t):t,c=jB(a.pathname||"/",o);if(c==null)return null;let u=FB(e);UQ(u);let d=null;for(let f=0;d==null&&f<u.length;++f)d=zQ(u[f],qQ(c));return d}function FB(e,t,o,a){t===void 0&&(t=[]),o===void 0&&(o=[]),a===void 0&&(a="");let c=(u,d,f)=>{let m={relativePath:f===void 0?u.path||"":f,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};m.relativePath.startsWith("/")&&(vi(m.relativePath.startsWith(a),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(a.length));let g=Ru([a,m.relativePath]),_=o.concat(m);u.children&&u.children.length>0&&(vi(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),FB(u.children,t,_,g)),!(u.path==null&&!u.index)&&t.push({path:g,score:WQ(g,u.index),routesMeta:_})};return e.forEach((u,d)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))c(u,d);else for(let m of BB(u.path))c(u,d,m)}),t}function BB(e){let t=e.split("/");if(t.length===0)return[];let[o,...a]=t,c=o.endsWith("?"),u=o.replace(/\?$/,"");if(a.length===0)return c?[u,""]:[u];let d=BB(a.join("/")),f=[];return f.push(...d.map(m=>m===""?u:[u,m].join("/"))),c&&f.push(...d),f.map(m=>e.startsWith("/")&&m===""?"/":m)}function UQ(e){e.sort((t,o)=>t.score!==o.score?o.score-t.score:GQ(t.routesMeta.map(a=>a.childrenIndex),o.routesMeta.map(a=>a.childrenIndex)))}const VQ=/^:\w+$/,FQ=3,BQ=2,jQ=1,HQ=10,$Q=-2,_U=e=>e==="*";function WQ(e,t){let o=e.split("/"),a=o.length;return o.some(_U)&&(a+=$Q),t&&(a+=BQ),o.filter(c=>!_U(c)).reduce((c,u)=>c+(VQ.test(u)?FQ:u===""?jQ:HQ),a)}function GQ(e,t){return e.length===t.length&&e.slice(0,-1).every((a,c)=>a===t[c])?e[e.length-1]-t[t.length-1]:0}function zQ(e,t){let{routesMeta:o}=e,a={},c="/",u=[];for(let d=0;d<o.length;++d){let f=o[d],m=d===o.length-1,g=c==="/"?t:t.slice(c.length)||"/",_=KQ({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},g);if(!_)return null;Object.assign(a,_.params);let S=f.route;u.push({params:a,pathname:Ru([c,_.pathname]),pathnameBase:tZ(Ru([c,_.pathnameBase])),route:S}),_.pathnameBase!=="/"&&(c=Ru([c,_.pathnameBase]))}return u}function KQ(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[o,a]=YQ(e.path,e.caseSensitive,e.end),c=t.match(o);if(!c)return null;let u=c[0],d=u.replace(/(.)\/+$/,"$1"),f=c.slice(1);return{params:a.reduce((g,_,S)=>{if(_==="*"){let C=f[S]||"";d=u.slice(0,u.length-C.length).replace(/(.)\/+$/,"$1")}return g[_]=XQ(f[S]||"",_),g},{}),pathname:u,pathnameBase:d,pattern:e}}function YQ(e,t,o){t===void 0&&(t=!1),o===void 0&&(o=!0),QE(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(d,f)=>(a.push(f),"/([^\\/]+)"));return e.endsWith("*")?(a.push("*"),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),a]}function qQ(e){try{return decodeURI(e)}catch(t){return QE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function XQ(e,t){try{return decodeURIComponent(e)}catch(o){return QE(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+o+").")),e}}function jB(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let o=t.endsWith("/")?t.length-1:t.length,a=e.charAt(o);return a&&a!=="/"?null:e.slice(o)||"/"}function JQ(e,t){t===void 0&&(t="/");let{pathname:o,search:a="",hash:c=""}=typeof e=="string"?Uu(e):e;return{pathname:o?o.startsWith("/")?o:QQ(o,t):t,search:nZ(a),hash:rZ(c)}}function QQ(e,t){let o=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?o.length>1&&o.pop():c!=="."&&o.push(c)}),o.length>1?o.join("/"):"/"}function PT(e,t,o,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ZQ(e){return e.filter((t,o)=>o===0||t.route.path&&t.route.path.length>0)}function eZ(e,t,o,a){a===void 0&&(a=!1);let c;typeof e=="string"?c=Uu(e):(c=Uf({},e),vi(!c.pathname||!c.pathname.includes("?"),PT("?","pathname","search",c)),vi(!c.pathname||!c.pathname.includes("#"),PT("#","pathname","hash",c)),vi(!c.search||!c.search.includes("#"),PT("#","search","hash",c)));let u=e===""||c.pathname==="",d=u?"/":c.pathname,f;if(a||d==null)f=o;else{let S=t.length-1;if(d.startsWith("..")){let C=d.split("/");for(;C[0]==="..";)C.shift(),S-=1;c.pathname=C.join("/")}f=S>=0?t[S]:"/"}let m=JQ(c,f),g=d&&d!=="/"&&d.endsWith("/"),_=(u||d===".")&&o.endsWith("/");return!m.pathname.endsWith("/")&&(g||_)&&(m.pathname+="/"),m}const Ru=e=>e.join("/").replace(/\/\/+/g,"/"),tZ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nZ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,rZ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function iZ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const oZ=["post","put","patch","delete"];[...oZ];/**
 * React Router v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pv(){return Pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},Pv.apply(this,arguments)}const HB=b.createContext(null),aZ=b.createContext(null),ZE=b.createContext(null),e_=b.createContext(null),Mh=b.createContext({outlet:null,matches:[],isDataRoute:!1}),$B=b.createContext(null);function t_(){return b.useContext(e_)!=null}function WB(){return t_()||vi(!1),b.useContext(e_).location}function GB(e){b.useContext(ZE).static||b.useLayoutEffect(e)}function sZ(){let{isDataRoute:e}=b.useContext(Mh);return e?SZ():cZ()}function cZ(){t_()||vi(!1);let{basename:e,navigator:t}=b.useContext(ZE),{matches:o}=b.useContext(Mh),{pathname:a}=WB(),c=JSON.stringify(ZQ(o).map(f=>f.pathnameBase)),u=b.useRef(!1);return GB(()=>{u.current=!0}),b.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){t.go(f);return}let g=eZ(f,JSON.parse(c),a,m.relative==="path");e!=="/"&&(g.pathname=g.pathname==="/"?e:Ru([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,c,a])}function lZ(e,t){return uZ(e,t)}function uZ(e,t,o){t_()||vi(!1);let{navigator:a}=b.useContext(ZE),{matches:c}=b.useContext(Mh),u=c[c.length-1],d=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=WB(),g;if(t){var _;let A=typeof t=="string"?Uu(t):t;f==="/"||(_=A.pathname)!=null&&_.startsWith(f)||vi(!1),g=A}else g=m;let S=g.pathname||"/",C=f==="/"?S:S.slice(f.length)||"/",O=MQ(e,{pathname:C}),I=mZ(O&&O.map(A=>Object.assign({},A,{params:Object.assign({},d,A.params),pathname:Ru([f,a.encodeLocation?a.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?f:Ru([f,a.encodeLocation?a.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),c,o);return t&&I?b.createElement(e_.Provider,{value:{location:Pv({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:ml.Pop}},I):I}function dZ(){let e=_Z(),t=iZ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),o=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},u=null;return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),o?b.createElement("pre",{style:c},o):null,u)}const hZ=b.createElement(dZ,null);class pZ extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,o){return o.location!==t.location||o.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||o.error,location:o.location,revalidation:t.revalidation||o.revalidation}}componentDidCatch(t,o){console.error("React Router caught the following error during render",t,o)}render(){return this.state.error?b.createElement(Mh.Provider,{value:this.props.routeContext},b.createElement($B.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fZ(e){let{routeContext:t,match:o,children:a}=e,c=b.useContext(HB);return c&&c.static&&c.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=o.route.id),b.createElement(Mh.Provider,{value:t},a)}function mZ(e,t,o){var a;if(t===void 0&&(t=[]),o===void 0&&(o=null),e==null){var c;if((c=o)!=null&&c.errors)e=o.matches;else return null}let u=e,d=(a=o)==null?void 0:a.errors;if(d!=null){let f=u.findIndex(m=>m.route.id&&(d==null?void 0:d[m.route.id]));f>=0||vi(!1),u=u.slice(0,Math.min(u.length,f+1))}return u.reduceRight((f,m,g)=>{let _=m.route.id?d==null?void 0:d[m.route.id]:null,S=null;o&&(S=m.route.errorElement||hZ);let C=t.concat(u.slice(0,g+1)),O=()=>{let I;return _?I=S:m.route.Component?I=b.createElement(m.route.Component,null):m.route.element?I=m.route.element:I=f,b.createElement(fZ,{match:m,routeContext:{outlet:f,matches:C,isDataRoute:o!=null},children:I})};return o&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?b.createElement(pZ,{location:o.location,revalidation:o.revalidation,component:S,error:_,children:O(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):O()},null)}var CR;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(CR||(CR={}));var Vf;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(Vf||(Vf={}));function gZ(e){let t=b.useContext(HB);return t||vi(!1),t}function vZ(e){let t=b.useContext(aZ);return t||vi(!1),t}function EZ(e){let t=b.useContext(Mh);return t||vi(!1),t}function zB(e){let t=EZ(),o=t.matches[t.matches.length-1];return o.route.id||vi(!1),o.route.id}function _Z(){var e;let t=b.useContext($B),o=vZ(Vf.UseRouteError),a=zB(Vf.UseRouteError);return t||((e=o.errors)==null?void 0:e[a])}function SZ(){let{router:e}=gZ(CR.UseNavigateStable),t=zB(Vf.UseNavigateStable),o=b.useRef(!1);return GB(()=>{o.current=!0}),b.useCallback(function(c,u){u===void 0&&(u={}),o.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,Pv({fromRouteId:t},u)))},[e,t])}function fu(e){vi(!1)}function yZ(e){let{basename:t="/",children:o=null,location:a,navigationType:c=ml.Pop,navigator:u,static:d=!1}=e;t_()&&vi(!1);let f=t.replace(/^\/*/,"/"),m=b.useMemo(()=>({basename:f,navigator:u,static:d}),[f,u,d]);typeof a=="string"&&(a=Uu(a));let{pathname:g="/",search:_="",hash:S="",state:C=null,key:O="default"}=a,I=b.useMemo(()=>{let A=jB(g,f);return A==null?null:{location:{pathname:A,search:_,hash:S,state:C,key:O},navigationType:c}},[f,g,_,S,C,O,c]);return I==null?null:b.createElement(ZE.Provider,{value:m},b.createElement(e_.Provider,{children:o,value:I}))}function CZ(e){let{children:t,location:o}=e;return lZ(TR(t),o)}var SU;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(SU||(SU={}));new Promise(()=>{});function TR(e,t){t===void 0&&(t=[]);let o=[];return b.Children.forEach(e,(a,c)=>{if(!b.isValidElement(a))return;let u=[...t,c];if(a.type===b.Fragment){o.push.apply(o,TR(a.props.children,u));return}a.type!==fu&&vi(!1),!a.props.index||!a.props.children||vi(!1);let d={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=TR(a.props.children,u)),o.push(d)}),o}/**
 * React Router DOM v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function TZ(e){let{basename:t,children:o,window:a}=e,c=b.useRef();c.current==null&&(c.current=DQ({window:a,v5Compat:!0}));let u=c.current,[d,f]=b.useState({action:u.action,location:u.location});return b.useLayoutEffect(()=>u.listen(f),[u]),b.createElement(yZ,{basename:t,children:o,location:d.location,navigationType:d.action,navigator:u})}var yU;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(yU||(yU={}));var CU;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(CU||(CU={}));function va(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nn(e){return Nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nn(e)}function bZ(e,t){if(Nn(e)!=="object"||e===null)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var a=o.call(e,t||"default");if(Nn(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KB(e){var t=bZ(e,"string");return Nn(t)==="symbol"?t:String(t)}function TU(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,KB(a.key),a)}}function Ea(e,t,o){return t&&TU(e.prototype,t),o&&TU(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function bR(e,t){return bR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},bR(e,t)}function Vu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bR(e,t)}function xv(e){return xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},xv(e)}function RZ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IZ(e,t){if(t&&(Nn(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qt(e)}function Fu(e){var t=RZ();return function(){var a=xv(e),c;if(t){var u=xv(this).constructor;c=Reflect.construct(a,arguments,u)}else c=a.apply(this,arguments);return IZ(this,c)}}var RR={},wZ={get exports(){return RR},set exports(e){RR=e}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function o(){for(var a=[],c=0;c<arguments.length;c++){var u=arguments[c];if(u){var d=typeof u;if(d==="string"||d==="number")a.push(u);else if(Array.isArray(u)){if(u.length){var f=o.apply(null,u);f&&a.push(f)}}else if(d==="object"){if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]")){a.push(u.toString());continue}for(var m in u)t.call(u,m)&&u[m]&&a.push(m)}}}return a.join(" ")}e.exports?(o.default=o,e.exports=o):window.classNames=o})()})(wZ);const lt=RR;function Be(){return Be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},Be.apply(this,arguments)}var Ff={},OZ={get exports(){return Ff},set exports(e){Ff=e}},Kn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ai=typeof Symbol=="function"&&Symbol.for,Aw=Ai?Symbol.for("react.element"):60103,Nw=Ai?Symbol.for("react.portal"):60106,n_=Ai?Symbol.for("react.fragment"):60107,r_=Ai?Symbol.for("react.strict_mode"):60108,i_=Ai?Symbol.for("react.profiler"):60114,o_=Ai?Symbol.for("react.provider"):60109,a_=Ai?Symbol.for("react.context"):60110,Pw=Ai?Symbol.for("react.async_mode"):60111,s_=Ai?Symbol.for("react.concurrent_mode"):60111,c_=Ai?Symbol.for("react.forward_ref"):60112,l_=Ai?Symbol.for("react.suspense"):60113,AZ=Ai?Symbol.for("react.suspense_list"):60120,u_=Ai?Symbol.for("react.memo"):60115,d_=Ai?Symbol.for("react.lazy"):60116,NZ=Ai?Symbol.for("react.block"):60121,PZ=Ai?Symbol.for("react.fundamental"):60117,xZ=Ai?Symbol.for("react.responder"):60118,DZ=Ai?Symbol.for("react.scope"):60119;function _a(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Aw:switch(e=e.type,e){case Pw:case s_:case n_:case i_:case r_:case l_:return e;default:switch(e=e&&e.$$typeof,e){case a_:case c_:case d_:case u_:case o_:return e;default:return t}}case Nw:return t}}}function YB(e){return _a(e)===s_}Kn.AsyncMode=Pw;Kn.ConcurrentMode=s_;Kn.ContextConsumer=a_;Kn.ContextProvider=o_;Kn.Element=Aw;Kn.ForwardRef=c_;Kn.Fragment=n_;Kn.Lazy=d_;Kn.Memo=u_;Kn.Portal=Nw;Kn.Profiler=i_;Kn.StrictMode=r_;Kn.Suspense=l_;Kn.isAsyncMode=function(e){return YB(e)||_a(e)===Pw};Kn.isConcurrentMode=YB;Kn.isContextConsumer=function(e){return _a(e)===a_};Kn.isContextProvider=function(e){return _a(e)===o_};Kn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Aw};Kn.isForwardRef=function(e){return _a(e)===c_};Kn.isFragment=function(e){return _a(e)===n_};Kn.isLazy=function(e){return _a(e)===d_};Kn.isMemo=function(e){return _a(e)===u_};Kn.isPortal=function(e){return _a(e)===Nw};Kn.isProfiler=function(e){return _a(e)===i_};Kn.isStrictMode=function(e){return _a(e)===r_};Kn.isSuspense=function(e){return _a(e)===l_};Kn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===n_||e===s_||e===i_||e===r_||e===l_||e===AZ||typeof e=="object"&&e!==null&&(e.$$typeof===d_||e.$$typeof===u_||e.$$typeof===o_||e.$$typeof===a_||e.$$typeof===c_||e.$$typeof===PZ||e.$$typeof===xZ||e.$$typeof===DZ||e.$$typeof===NZ)};Kn.typeOf=_a;(function(e){e.exports=Kn})(OZ);function Nl(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[];return ht.Children.forEach(e,function(a){a==null&&!t.keepEmpty||(Array.isArray(a)?o=o.concat(Nl(a)):Ff.isFragment(a)&&a.props?o=o.concat(Nl(a.props.children,t)):o.push(a))}),o}var IR={},kZ=function(t){};function LZ(e,t){}function MZ(e,t){}function UZ(){IR={}}function qB(e,t,o){!t&&!IR[o]&&(e(!1,o),IR[o]=!0)}function Eo(e,t){qB(LZ,e,t)}function VZ(e,t){qB(MZ,e,t)}Eo.preMessage=kZ;Eo.resetWarned=UZ;Eo.noteOnce=VZ;function Ne(e,t,o){return t=KB(t),t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function bU(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),o.push.apply(o,a)}return o}function de(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?bU(Object(o),!0).forEach(function(a){Ne(e,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):bU(Object(o)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))})}return e}function h_(e,t,o){var a=b.useRef({});return(!("value"in a.current)||o(a.current.condition,t))&&(a.current.value=e(),a.current.condition=t),a.current.value}function xw(e,t){typeof e=="function"?e(t):Nn(e)==="object"&&e&&"current"in e&&(e.current=t)}function Rc(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var a=t.filter(function(c){return c});return a.length<=1?a[0]:function(c){t.forEach(function(u){xw(u,c)})}}function Dw(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return h_(function(){return Rc.apply(void 0,t)},t,function(a,c){return a.length===c.length&&a.every(function(u,d){return u===c[d]})})}function Uh(e){var t,o,a=Ff.isMemo(e)?e.type.type:e.type;return!(typeof a=="function"&&!((t=a.prototype)!==null&&t!==void 0&&t.render)||typeof e=="function"&&!((o=e.prototype)!==null&&o!==void 0&&o.render))}function Dv(e){return e instanceof HTMLElement||e instanceof SVGElement}function kv(e){return Dv(e)?e:e instanceof ht.Component?wh.findDOMNode(e):null}var XB=function(){if(typeof Map<"u")return Map;function e(t,o){var a=-1;return t.some(function(c,u){return c[0]===o?(a=u,!0):!1}),a}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(o){var a=e(this.__entries__,o),c=this.__entries__[a];return c&&c[1]},t.prototype.set=function(o,a){var c=e(this.__entries__,o);~c?this.__entries__[c][1]=a:this.__entries__.push([o,a])},t.prototype.delete=function(o){var a=this.__entries__,c=e(a,o);~c&&a.splice(c,1)},t.prototype.has=function(o){return!!~e(this.__entries__,o)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(o,a){a===void 0&&(a=null);for(var c=0,u=this.__entries__;c<u.length;c++){var d=u[c];o.call(a,d[1],d[0])}},t}()}(),wR=typeof window<"u"&&typeof document<"u"&&window.document===document,Lv=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),FZ=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Lv):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),BZ=2;function jZ(e,t){var o=!1,a=!1,c=0;function u(){o&&(o=!1,e()),a&&f()}function d(){FZ(u)}function f(){var m=Date.now();if(o){if(m-c<BZ)return;a=!0}else o=!0,a=!1,setTimeout(d,t);c=m}return f}var HZ=20,$Z=["top","right","bottom","left","width","height","size","weight"],WZ=typeof MutationObserver<"u",GZ=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=jZ(this.refresh.bind(this),HZ)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var o=this.observers_,a=o.indexOf(t);~a&&o.splice(a,1),!o.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(o){return o.gatherActive(),o.hasActive()});return t.forEach(function(o){return o.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!wR||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),WZ?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!wR||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var o=t.propertyName,a=o===void 0?"":o,c=$Z.some(function(u){return!!~a.indexOf(u)});c&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),JB=function(e,t){for(var o=0,a=Object.keys(t);o<a.length;o++){var c=a[o];Object.defineProperty(e,c,{value:t[c],enumerable:!1,writable:!1,configurable:!0})}return e},Oh=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||Lv},QB=p_(0,0,0,0);function Mv(e){return parseFloat(e)||0}function RU(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return t.reduce(function(a,c){var u=e["border-"+c+"-width"];return a+Mv(u)},0)}function zZ(e){for(var t=["top","right","bottom","left"],o={},a=0,c=t;a<c.length;a++){var u=c[a],d=e["padding-"+u];o[u]=Mv(d)}return o}function KZ(e){var t=e.getBBox();return p_(0,0,t.width,t.height)}function YZ(e){var t=e.clientWidth,o=e.clientHeight;if(!t&&!o)return QB;var a=Oh(e).getComputedStyle(e),c=zZ(a),u=c.left+c.right,d=c.top+c.bottom,f=Mv(a.width),m=Mv(a.height);if(a.boxSizing==="border-box"&&(Math.round(f+u)!==t&&(f-=RU(a,"left","right")+u),Math.round(m+d)!==o&&(m-=RU(a,"top","bottom")+d)),!XZ(e)){var g=Math.round(f+u)-t,_=Math.round(m+d)-o;Math.abs(g)!==1&&(f-=g),Math.abs(_)!==1&&(m-=_)}return p_(c.left,c.top,f,m)}var qZ=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Oh(e).SVGGraphicsElement}:function(e){return e instanceof Oh(e).SVGElement&&typeof e.getBBox=="function"}}();function XZ(e){return e===Oh(e).document.documentElement}function JZ(e){return wR?qZ(e)?KZ(e):YZ(e):QB}function QZ(e){var t=e.x,o=e.y,a=e.width,c=e.height,u=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,d=Object.create(u.prototype);return JB(d,{x:t,y:o,width:a,height:c,top:o,right:t+a,bottom:c+o,left:t}),d}function p_(e,t,o,a){return{x:e,y:t,width:o,height:a}}var ZZ=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=p_(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=JZ(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),eee=function(){function e(t,o){var a=QZ(o);JB(this,{target:t,contentRect:a})}return e}(),tee=function(){function e(t,o,a){if(this.activeObservations_=[],this.observations_=new XB,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=o,this.callbackCtx_=a}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Oh(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(t)||(o.set(t,new ZZ(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Oh(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(t)&&(o.delete(t),o.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(o){o.isActive()&&t.activeObservations_.push(o)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,o=this.activeObservations_.map(function(a){return new eee(a.target,a.broadcastRect())});this.callback_.call(t,o,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),ZB=typeof WeakMap<"u"?new WeakMap:new XB,ej=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var o=GZ.getInstance(),a=new tee(t,o,this);ZB.set(this,a)}return e}();["observe","unobserve","disconnect"].forEach(function(e){ej.prototype[e]=function(){var t;return(t=ZB.get(this))[e].apply(t,arguments)}});var tj=function(){return typeof Lv.ResizeObserver<"u"?Lv.ResizeObserver:ej}(),gl=new Map;function nee(e){e.forEach(function(t){var o,a=t.target;(o=gl.get(a))===null||o===void 0||o.forEach(function(c){return c(a)})})}var nj=new tj(nee);function ree(e,t){gl.has(e)||(gl.set(e,new Set),nj.observe(e)),gl.get(e).add(t)}function iee(e,t){gl.has(e)&&(gl.get(e).delete(t),gl.get(e).size||(nj.unobserve(e),gl.delete(e)))}var oee=function(e){Vu(o,e);var t=Fu(o);function o(){return va(this,o),t.apply(this,arguments)}return Ea(o,[{key:"render",value:function(){return this.props.children}}]),o}(b.Component),OR=b.createContext(null);function aee(e){var t=e.children,o=e.onBatchResize,a=b.useRef(0),c=b.useRef([]),u=b.useContext(OR),d=b.useCallback(function(f,m,g){a.current+=1;var _=a.current;c.current.push({size:f,element:m,data:g}),Promise.resolve().then(function(){_===a.current&&(o==null||o(c.current),c.current=[])}),u==null||u(f,m,g)},[o,u]);return b.createElement(OR.Provider,{value:d},t)}function see(e,t){var o=e.children,a=e.disabled,c=b.useRef(null),u=b.useRef(null),d=b.useContext(OR),f=typeof o=="function",m=f?o(c):o,g=b.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),_=!f&&b.isValidElement(m)&&Uh(m),S=_?m.ref:null,C=b.useMemo(function(){return Rc(S,c)},[S,c]),O=function(){return kv(c.current)||kv(u.current)};b.useImperativeHandle(t,function(){return O()});var I=b.useRef(e);I.current=e;var A=b.useCallback(function(L){var N=I.current,P=N.onResize,D=N.data,U=L.getBoundingClientRect(),B=U.width,F=U.height,H=L.offsetWidth,K=L.offsetHeight,te=Math.floor(B),Y=Math.floor(F);if(g.current.width!==te||g.current.height!==Y||g.current.offsetWidth!==H||g.current.offsetHeight!==K){var Q={width:te,height:Y,offsetWidth:H,offsetHeight:K};g.current=Q;var J=H===Math.round(B)?B:H,q=K===Math.round(F)?F:K,ee=de(de({},Q),{},{offsetWidth:J,offsetHeight:q});d==null||d(ee,L,D),P&&Promise.resolve().then(function(){P(ee,L)})}},[]);return b.useEffect(function(){var L=O();return L&&!a&&ree(L,A),function(){return iee(L,A)}},[c.current,a]),b.createElement(oee,{ref:u},_?b.cloneElement(m,{ref:C}):m)}var cee=b.forwardRef(see),lee="rc-observer-key";function uee(e,t){var o=e.children,a=typeof o=="function"?[o]:Nl(o);return a.map(function(c,u){var d=(c==null?void 0:c.key)||"".concat(lee,"-").concat(u);return b.createElement(cee,Be({},e,{key:d,ref:u===0?t:void 0}),c)})}var Bu=b.forwardRef(uee);Bu.Collection=aee;function js(e,t){var o=de({},e);return Array.isArray(t)&&t.forEach(function(a){delete o[a]}),o}function AR(e,t){(t==null||t>e.length)&&(t=e.length);for(var o=0,a=new Array(t);o<t;o++)a[o]=e[o];return a}function dee(e){if(Array.isArray(e))return AR(e)}function rj(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kw(e,t){if(e){if(typeof e=="string")return AR(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return AR(e,t)}}function hee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ft(e){return dee(e)||rj(e)||kw(e)||hee()}function Lw(e){for(var t=0,o,a=0,c=e.length;c>=4;++a,c-=4)o=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,t=(o&65535)*1540483477+((o>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function pee(e,t){if(e==null)return{};var o={},a=Object.keys(e),c,u;for(u=0;u<a.length;u++)c=a[u],!(t.indexOf(c)>=0)&&(o[c]=e[c]);return o}function Sn(e,t){if(e==null)return{};var o=pee(e,t),a,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)a=u[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}function f_(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=new Set;function c(u,d){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,m=a.has(u);if(Eo(!m,"Warning: There may be circular references"),m)return!1;if(u===d)return!0;if(o&&f>1)return!1;a.add(u);var g=f+1;if(Array.isArray(u)){if(!Array.isArray(d)||u.length!==d.length)return!1;for(var _=0;_<u.length;_++)if(!c(u[_],d[_],g))return!1;return!0}if(u&&d&&Nn(u)==="object"&&Nn(d)==="object"){var S=Object.keys(u);return S.length!==Object.keys(d).length?!1:S.every(function(C){return c(u[C],d[C],g)})}return!1}return c(e,t)}var fee=function(){function e(t){va(this,e),Ne(this,"instanceId",void 0),Ne(this,"cache",new Map),this.instanceId=t}return Ea(e,[{key:"get",value:function(o){return this.cache.get(o.join("%"))||null}},{key:"update",value:function(o,a){var c=o.join("%"),u=this.cache.get(c),d=a(u);d===null?this.cache.delete(c):this.cache.set(c,d)}}]),e}(),NR="data-token-hash",vh="data-css-hash",ch="__cssinjs_instance__";function mee(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(vh,"]"))||[],o=document.head.firstChild;Array.from(t).forEach(function(c){c[ch]=c[ch]||e,c[ch]===e&&document.head.insertBefore(c,o)});var a={};Array.from(document.querySelectorAll("style[".concat(vh,"]"))).forEach(function(c){var u=c.getAttribute(vh);if(a[u]){if(c[ch]===e){var d;(d=c.parentNode)===null||d===void 0||d.removeChild(c)}}else a[u]=!0})}return new fee(e)}var Mw=b.createContext({hashPriority:"low",cache:mee(),defaultCache:!0});function Ho(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function df(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var o=t;o;){if(o===e)return!0;o=o.parentNode}return!1}var IU="data-rc-order",gee="rc-util-key",PR=new Map;function ij(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):gee}function m_(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function vee(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function oj(e){return Array.from((PR.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function aj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Ho())return null;var o=t.csp,a=t.prepend,c=document.createElement("style");c.setAttribute(IU,vee(a)),o!=null&&o.nonce&&(c.nonce=o==null?void 0:o.nonce),c.innerHTML=e;var u=m_(t),d=u.firstChild;if(a){if(a==="queue"){var f=oj(u).filter(function(m){return["prepend","prependQueue"].includes(m.getAttribute(IU))});if(f.length)return u.insertBefore(c,f[f.length-1].nextSibling),c}u.insertBefore(c,d)}else u.appendChild(c);return c}function sj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=m_(t);return oj(o).find(function(a){return a.getAttribute(ij(t))===e})}function Uv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=sj(e,t);if(o){var a=m_(t);a.removeChild(o)}}function Eee(e,t){var o=PR.get(e);if(!o||!df(document,o)){var a=aj("",t),c=a.parentNode;PR.set(e,c),e.removeChild(a)}}function Ah(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=m_(o);Eee(a,o);var c=sj(t,o);if(c){var u,d;if((u=o.csp)!==null&&u!==void 0&&u.nonce&&c.nonce!==((d=o.csp)===null||d===void 0?void 0:d.nonce)){var f;c.nonce=(f=o.csp)===null||f===void 0?void 0:f.nonce}return c.innerHTML!==e&&(c.innerHTML=e),c}var m=aj(e,o);return m.setAttribute(ij(o),t),m}function Vv(e){var t="";return Object.keys(e).forEach(function(o){var a=e[o];t+=o,a&&Nn(a)==="object"?t+=Vv(a):t+=a}),t}function _ee(e,t){return Lw("".concat(t,"_").concat(Vv(e)))}var hf="layer-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),cj="903px";function See(e,t){if(Ho()){var o;Ah(e,hf);var a=document.createElement("div");a.style.position="fixed",a.style.left="0",a.style.top="0",t==null||t(a),document.body.appendChild(a);var c=getComputedStyle(a).width===cj;return(o=a.parentNode)===null||o===void 0||o.removeChild(a),Uv(hf),c}return!1}var xT=void 0;function yee(){return xT===void 0&&(xT=See("@layer ".concat(hf," { .").concat(hf," { width: ").concat(cj,"!important; } }"),function(e){e.className=hf})),xT}function lj(e){if(Array.isArray(e))return e}function Cee(e,t){var o=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(o!=null){var a,c,u,d,f=[],m=!0,g=!1;try{if(u=(o=o.call(e)).next,t===0){if(Object(o)!==o)return;m=!1}else for(;!(m=(a=u.call(o)).done)&&(f.push(a.value),f.length!==t);m=!0);}catch(_){g=!0,c=_}finally{try{if(!m&&o.return!=null&&(d=o.return(),Object(d)!==d))return}finally{if(g)throw c}}return f}}function uj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xe(e,t){return lj(e)||Cee(e,t)||kw(e,t)||uj()}function dj(e,t,o,a){var c=b.useContext(Mw),u=c.cache,d=[e].concat(ft(t));return b.useMemo(function(){u.update(d,function(f){var m=f||[],g=xe(m,2),_=g[0],S=_===void 0?0:_,C=g[1],O=C,I=O||o();return[S+1,I]})},[d.join("_")]),b.useEffect(function(){return function(){u.update(d,function(f){var m=f||[],g=xe(m,2),_=g[0],S=_===void 0?0:_,C=g[1],O=S-1;return O===0?(a==null||a(C,!1),null):[S-1,C]})}},d),u.get(d)[1]}var Tee={},bee="css",gu=new Map;function Ree(e){gu.set(e,(gu.get(e)||0)+1)}function Iee(e,t){if(typeof document<"u"){var o=document.querySelectorAll("style[".concat(NR,'="').concat(e,'"]'));o.forEach(function(a){if(a[ch]===t){var c;(c=a.parentNode)===null||c===void 0||c.removeChild(a)}})}}function wee(e,t){gu.set(e,(gu.get(e)||0)-1);var o=Array.from(gu.keys()),a=o.filter(function(c){var u=gu.get(c)||0;return u<=0});a.length<o.length&&a.forEach(function(c){Iee(c,t),gu.delete(c)})}function Oee(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=b.useContext(Mw),c=a.cache.instanceId,u=o.salt,d=u===void 0?"":u,f=o.override,m=f===void 0?Tee:f,g=o.formatToken,_=b.useMemo(function(){return Object.assign.apply(Object,[{}].concat(ft(t)))},[t]),S=b.useMemo(function(){return Vv(_)},[_]),C=b.useMemo(function(){return Vv(m)},[m]),O=dj("token",[d,e.id,S,C],function(){var I=e.getDerivativeToken(_),A=de(de({},I),m);g&&(A=g(A));var L=_ee(A,d);A._tokenKey=L,Ree(L);var N="".concat(bee,"-").concat(Lw(L));return A._hashId=N,[A,N]},function(I){wee(I[0]._tokenKey,c)});return O}var Aee={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},no="-ms-",Fv="-moz-",kn="-webkit-",hj="comm",Uw="rule",Vw="decl",Nee="@import",pj="@keyframes",Pee=Math.abs,g_=String.fromCharCode,xee=Object.assign;function Dee(e,t){return Vi(e,0)^45?(((t<<2^Vi(e,0))<<2^Vi(e,1))<<2^Vi(e,2))<<2^Vi(e,3):0}function fj(e){return e.trim()}function kee(e,t){return(e=t.exec(e))?e[0]:e}function Hn(e,t,o){return e.replace(t,o)}function xR(e,t){return e.indexOf(t)}function Vi(e,t){return e.charCodeAt(t)|0}function Bf(e,t,o){return e.slice(t,o)}function xs(e){return e.length}function Fw(e){return e.length}function pg(e,t){return t.push(e),e}function Lee(e,t){return e.map(t).join("")}var v_=1,Nh=1,mj=0,$o=0,ri=0,Vh="";function E_(e,t,o,a,c,u,d){return{value:e,root:t,parent:o,type:a,props:c,children:u,line:v_,column:Nh,length:d,return:""}}function Vp(e,t){return xee(E_("",null,null,"",null,null,0),e,{length:-e.length},t)}function Mee(){return ri}function Uee(){return ri=$o>0?Vi(Vh,--$o):0,Nh--,ri===10&&(Nh=1,v_--),ri}function da(){return ri=$o<mj?Vi(Vh,$o++):0,Nh++,ri===10&&(Nh=1,v_++),ri}function Fs(){return Vi(Vh,$o)}function Qg(){return $o}function Qf(e,t){return Bf(Vh,e,t)}function jf(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function gj(e){return v_=Nh=1,mj=xs(Vh=e),$o=0,[]}function vj(e){return Vh="",e}function Zg(e){return fj(Qf($o-1,DR(e===91?e+2:e===40?e+1:e)))}function Vee(e){for(;(ri=Fs())&&ri<33;)da();return jf(e)>2||jf(ri)>3?"":" "}function Fee(e,t){for(;--t&&da()&&!(ri<48||ri>102||ri>57&&ri<65||ri>70&&ri<97););return Qf(e,Qg()+(t<6&&Fs()==32&&da()==32))}function DR(e){for(;da();)switch(ri){case e:return $o;case 34:case 39:e!==34&&e!==39&&DR(ri);break;case 40:e===41&&DR(e);break;case 92:da();break}return $o}function Bee(e,t){for(;da()&&e+ri!==47+10;)if(e+ri===42+42&&Fs()===47)break;return"/*"+Qf(t,$o-1)+"*"+g_(e===47?e:da())}function jee(e){for(;!jf(Fs());)da();return Qf(e,$o)}function Ej(e){return vj(ev("",null,null,null,[""],e=gj(e),0,[0],e))}function ev(e,t,o,a,c,u,d,f,m){for(var g=0,_=0,S=d,C=0,O=0,I=0,A=1,L=1,N=1,P=0,D="",U=c,B=u,F=a,H=D;L;)switch(I=P,P=da()){case 40:if(I!=108&&Vi(H,S-1)==58){xR(H+=Hn(Zg(P),"&","&\f"),"&\f")!=-1&&(N=-1);break}case 34:case 39:case 91:H+=Zg(P);break;case 9:case 10:case 13:case 32:H+=Vee(I);break;case 92:H+=Fee(Qg()-1,7);continue;case 47:switch(Fs()){case 42:case 47:pg(Hee(Bee(da(),Qg()),t,o),m);break;default:H+="/"}break;case 123*A:f[g++]=xs(H)*N;case 125*A:case 59:case 0:switch(P){case 0:case 125:L=0;case 59+_:O>0&&xs(H)-S&&pg(O>32?OU(H+";",a,o,S-1):OU(Hn(H," ","")+";",a,o,S-2),m);break;case 59:H+=";";default:if(pg(F=wU(H,t,o,g,_,c,f,D,U=[],B=[],S),u),P===123)if(_===0)ev(H,t,F,F,U,u,S,f,B);else switch(C===99&&Vi(H,3)===110?100:C){case 100:case 109:case 115:ev(e,F,F,a&&pg(wU(e,F,F,0,0,c,f,D,c,U=[],S),B),c,B,S,f,a?U:B);break;default:ev(H,F,F,F,[""],B,0,f,B)}}g=_=O=0,A=N=1,D=H="",S=d;break;case 58:S=1+xs(H),O=I;default:if(A<1){if(P==123)--A;else if(P==125&&A++==0&&Uee()==125)continue}switch(H+=g_(P),P*A){case 38:N=_>0?1:(H+="\f",-1);break;case 44:f[g++]=(xs(H)-1)*N,N=1;break;case 64:Fs()===45&&(H+=Zg(da())),C=Fs(),_=S=xs(D=H+=jee(Qg())),P++;break;case 45:I===45&&xs(H)==2&&(A=0)}}return u}function wU(e,t,o,a,c,u,d,f,m,g,_){for(var S=c-1,C=c===0?u:[""],O=Fw(C),I=0,A=0,L=0;I<a;++I)for(var N=0,P=Bf(e,S+1,S=Pee(A=d[I])),D=e;N<O;++N)(D=fj(A>0?C[N]+" "+P:Hn(P,/&\f/g,C[N])))&&(m[L++]=D);return E_(e,t,o,c===0?Uw:f,m,g,_)}function Hee(e,t,o){return E_(e,t,o,hj,g_(Mee()),Bf(e,2,-2),0)}function OU(e,t,o,a){return E_(e,t,o,Vw,Bf(e,0,a),Bf(e,a+1,-1),a)}function Iu(e,t){for(var o="",a=Fw(e),c=0;c<a;c++)o+=t(e[c],c,e,t)||"";return o}function _j(e,t,o,a){switch(e.type){case Nee:case Vw:return e.return=e.return||e.value;case hj:return"";case pj:return e.return=e.value+"{"+Iu(e.children,a)+"}";case Uw:e.value=e.props.join(",")}return xs(o=Iu(e.children,a))?e.return=e.value+"{"+o+"}":""}function $ee(e){var t=Fw(e);return function(o,a,c,u){for(var d="",f=0;f<t;f++)d+=e[f](o,a,c,u)||"";return d}}function Wee(e){return function(t){t.root||(t=t.return)&&e(t)}}var AU=Ho(),Gee="_skip_check_",Sj="_multi_value_";function NU(e){var t=Iu(Ej(e),_j);return t.replace(/\{%%%\:[^;];}/g,";")}function zee(e){return Nn(e)==="object"&&e&&(Gee in e||Sj in e)}function Kee(e,t,o){if(!t)return e;var a=".".concat(t),c=o==="low"?":where(".concat(a,")"):a,u=e.split(",").map(function(d){var f,m=d.trim().split(/\s+/),g=m[0]||"",_=((f=g.match(/^\w+/))===null||f===void 0?void 0:f[0])||"";return g="".concat(_).concat(c).concat(g.slice(_.length)),[g].concat(ft(m.slice(1))).join(" ")});return u.join(",")}var Yee=function e(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},c=a.root,u=a.injectHash,d=a.parentSelectors,f=o.hashId,m=o.layer;o.path;var g=o.hashPriority,_=o.transformers,S=_===void 0?[]:_;o.linters;var C="",O={};function I(D){var U=D.getName(f);if(!O[U]){var B=e(D.style,o,{root:!1,parentSelectors:d}),F=xe(B,1),H=F[0];O[U]="@keyframes ".concat(D.getName(f)).concat(H)}}function A(D){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return D.forEach(function(B){Array.isArray(B)?A(B,U):B&&U.push(B)}),U}var L=A(Array.isArray(t)?t:[t]);if(L.forEach(function(D){var U=typeof D=="string"&&!c?{}:D;if(typeof U=="string")C+="".concat(U,`
`);else if(U._keyframe)I(U);else{var B=S.reduce(function(F,H){var K;return(H==null||(K=H.visit)===null||K===void 0?void 0:K.call(H,F))||F},U);Object.keys(B).forEach(function(F){var H=B[F];if(Nn(H)==="object"&&H&&(F!=="animationName"||!H._keyframe)&&!zee(H)){var K=!1,te=F.trim(),Y=!1;(c||u)&&f?te.startsWith("@")?K=!0:te=Kee(F,f,g):c&&!f&&(te==="&"||te==="")&&(te="",Y=!0);var Q=e(H,o,{root:Y,injectHash:K,parentSelectors:[].concat(ft(d),[te])}),J=xe(Q,2),q=J[0],ee=J[1];O=de(de({},O),ee),C+="".concat(te).concat(q)}else{let ue=function(ve,Ee){var oe=ve.replace(/[A-Z]/g,function(he){return"-".concat(he.toLowerCase())}),ae=Ee;!Aee[ve]&&typeof ae=="number"&&ae!==0&&(ae="".concat(ae,"px")),ve==="animationName"&&Ee!==null&&Ee!==void 0&&Ee._keyframe&&(I(Ee),ae=Ee.getName(f)),C+="".concat(oe,":").concat(ae,";")};var me=ue,re,le=(re=H==null?void 0:H.value)!==null&&re!==void 0?re:H;Nn(H)==="object"&&H!==null&&H!==void 0&&H[Sj]&&Array.isArray(le)?le.forEach(function(ve){ue(F,ve)}):ue(F,le)}})}}),!c)C="{".concat(C,"}");else if(m&&yee()){var N=m.split(","),P=N[N.length-1].trim();C="@layer ".concat(P," {").concat(C,"}"),N.length>1&&(C="@layer ".concat(m,"{%%%:%}").concat(C))}return[C,O]};function qee(e,t){return Lw("".concat(e.join("%")).concat(t))}function Xee(){return null}function kR(e,t){var o=e.token,a=e.path,c=e.hashId,u=e.layer,d=e.nonce,f=b.useContext(Mw),m=f.autoClear;f.mock;var g=f.defaultCache,_=f.hashPriority,S=f.container,C=f.ssrInline,O=f.transformers,I=f.linters,A=f.cache,L=o._tokenKey,N=[L].concat(ft(a)),P=AU,D=dj("style",N,function(){var K=t(),te=Yee(K,{hashId:c,hashPriority:_,layer:u,path:a.join("-"),transformers:O,linters:I}),Y=xe(te,2),Q=Y[0],J=Y[1],q=NU(Q),ee=qee(N,q);if(P){var re={mark:vh,prepend:"queue",attachTo:S},le=typeof d=="function"?d():d;le&&(re.csp={nonce:le});var me=Ah(q,ee,re);me[ch]=A.instanceId,me.setAttribute(NR,L),Object.keys(J).forEach(function(ue){Ah(NU(J[ue]),"_effect-".concat(ue),re)})}return[q,L,ee]},function(K,te){var Y=xe(K,3),Q=Y[2];(te||m)&&AU&&Uv(Q,{mark:vh})}),U=xe(D,3),B=U[0],F=U[1],H=U[2];return function(K){var te;if(!C||P||!g)te=b.createElement(Xee,null);else{var Y;te=b.createElement("style",Be({},(Y={},Ne(Y,NR,F),Ne(Y,vh,H),Y),{dangerouslySetInnerHTML:{__html:B}}))}return b.createElement(b.Fragment,null,te,K)}}var ai=function(){function e(t,o){va(this,e),Ne(this,"name",void 0),Ne(this,"style",void 0),Ne(this,"_keyframe",!0),this.name=t,this.style=o}return Ea(e,[{key:"getName",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return o?"".concat(o,"-").concat(this.name):this.name}}]),e}();function Jee(e,t){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}var Bw=function(){function e(){va(this,e),Ne(this,"cache",void 0),Ne(this,"keys",void 0),Ne(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Ea(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(o){var a,c,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,d={map:this.cache};return o.forEach(function(f){if(!d)d=void 0;else{var m,g;d=(m=d)===null||m===void 0||(g=m.map)===null||g===void 0?void 0:g.get(f)}}),(a=d)!==null&&a!==void 0&&a.value&&u&&(d.value[1]=this.cacheCallTimes++),(c=d)===null||c===void 0?void 0:c.value}},{key:"get",value:function(o){var a;return(a=this.internalGet(o,!0))===null||a===void 0?void 0:a[0]}},{key:"has",value:function(o){return!!this.internalGet(o)}},{key:"set",value:function(o,a){var c=this;if(!this.has(o)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var u=this.keys.reduce(function(g,_){var S=xe(g,2),C=S[1];return c.internalGet(_)[1]<C?[_,c.internalGet(_)[1]]:g},[this.keys[0],this.cacheCallTimes]),d=xe(u,1),f=d[0];this.delete(f)}this.keys.push(o)}var m=this.cache;o.forEach(function(g,_){if(_===o.length-1)m.set(g,{value:[a,c.cacheCallTimes++]});else{var S=m.get(g);S?S.map||(S.map=new Map):m.set(g,{map:new Map}),m=m.get(g).map}})}},{key:"deleteByPath",value:function(o,a){var c=o.get(a[0]);if(a.length===1){var u;return c.map?o.set(a[0],{map:c.map}):o.delete(a[0]),(u=c.value)===null||u===void 0?void 0:u[0]}var d=this.deleteByPath(c.map,a.slice(1));return(!c.map||c.map.size===0)&&!c.value&&o.delete(a[0]),d}},{key:"delete",value:function(o){if(this.has(o))return this.keys=this.keys.filter(function(a){return!Jee(a,o)}),this.deleteByPath(this.cache,o)}}]),e}();Ne(Bw,"MAX_CACHE_SIZE",20);Ne(Bw,"MAX_CACHE_OFFSET",5);var PU=0,Qee=function(){function e(t){va(this,e),Ne(this,"derivatives",void 0),Ne(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=PU,t.length===0&&(t.length>0,void 0),PU+=1}return Ea(e,[{key:"getDerivativeToken",value:function(o){return this.derivatives.reduce(function(a,c){return c(o,a)},void 0)}}]),e}(),DT=new Bw;function yj(e){var t=Array.isArray(e)?e:[e];return DT.has(t)||DT.set(t,new Qee(t)),DT.get(t)}function Ud(e){return e.notSplit=!0,e}Ud(["borderTop","borderBottom"]),Ud(["borderTop"]),Ud(["borderBottom"]),Ud(["borderLeft","borderRight"]),Ud(["borderLeft"]),Ud(["borderRight"]);var Zee=b.createContext({});const jw=Zee;var Su="RC_FORM_INTERNAL_HOOKS",Zn=function(){Eo(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Ph=b.createContext({getFieldValue:Zn,getFieldsValue:Zn,getFieldError:Zn,getFieldWarning:Zn,getFieldsError:Zn,isFieldsTouched:Zn,isFieldTouched:Zn,isFieldValidating:Zn,isFieldsValidating:Zn,resetFields:Zn,setFields:Zn,setFieldValue:Zn,setFieldsValue:Zn,validateFields:Zn,submit:Zn,getInternalHooks:function(){return Zn(),{dispatch:Zn,initEntityValue:Zn,registerField:Zn,useSubscribe:Zn,setInitialValues:Zn,destroyForm:Zn,setCallbacks:Zn,registerWatch:Zn,getFields:Zn,setValidateMessages:Zn,setPreserve:Zn,getInitialValue:Zn}}}),LR=b.createContext(null);function MR(e){return e==null?[]:Array.isArray(e)?e:[e]}function ete(e){return e&&!!e._init}function _o(){_o=function(){return e};var e={},t=Object.prototype,o=t.hasOwnProperty,a=Object.defineProperty||function(J,q,ee){J[q]=ee.value},c=typeof Symbol=="function"?Symbol:{},u=c.iterator||"@@iterator",d=c.asyncIterator||"@@asyncIterator",f=c.toStringTag||"@@toStringTag";function m(J,q,ee){return Object.defineProperty(J,q,{value:ee,enumerable:!0,configurable:!0,writable:!0}),J[q]}try{m({},"")}catch{m=function(ee,re,le){return ee[re]=le}}function g(J,q,ee,re){var le=q&&q.prototype instanceof C?q:C,me=Object.create(le.prototype),ue=new te(re||[]);return a(me,"_invoke",{value:B(J,ee,ue)}),me}function _(J,q,ee){try{return{type:"normal",arg:J.call(q,ee)}}catch(re){return{type:"throw",arg:re}}}e.wrap=g;var S={};function C(){}function O(){}function I(){}var A={};m(A,u,function(){return this});var L=Object.getPrototypeOf,N=L&&L(L(Y([])));N&&N!==t&&o.call(N,u)&&(A=N);var P=I.prototype=C.prototype=Object.create(A);function D(J){["next","throw","return"].forEach(function(q){m(J,q,function(ee){return this._invoke(q,ee)})})}function U(J,q){function ee(le,me,ue,ve){var Ee=_(J[le],J,me);if(Ee.type!=="throw"){var oe=Ee.arg,ae=oe.value;return ae&&Nn(ae)=="object"&&o.call(ae,"__await")?q.resolve(ae.__await).then(function(he){ee("next",he,ue,ve)},function(he){ee("throw",he,ue,ve)}):q.resolve(ae).then(function(he){oe.value=he,ue(oe)},function(he){return ee("throw",he,ue,ve)})}ve(Ee.arg)}var re;a(this,"_invoke",{value:function(me,ue){function ve(){return new q(function(Ee,oe){ee(me,ue,Ee,oe)})}return re=re?re.then(ve,ve):ve()}})}function B(J,q,ee){var re="suspendedStart";return function(le,me){if(re==="executing")throw new Error("Generator is already running");if(re==="completed"){if(le==="throw")throw me;return Q()}for(ee.method=le,ee.arg=me;;){var ue=ee.delegate;if(ue){var ve=F(ue,ee);if(ve){if(ve===S)continue;return ve}}if(ee.method==="next")ee.sent=ee._sent=ee.arg;else if(ee.method==="throw"){if(re==="suspendedStart")throw re="completed",ee.arg;ee.dispatchException(ee.arg)}else ee.method==="return"&&ee.abrupt("return",ee.arg);re="executing";var Ee=_(J,q,ee);if(Ee.type==="normal"){if(re=ee.done?"completed":"suspendedYield",Ee.arg===S)continue;return{value:Ee.arg,done:ee.done}}Ee.type==="throw"&&(re="completed",ee.method="throw",ee.arg=Ee.arg)}}}function F(J,q){var ee=q.method,re=J.iterator[ee];if(re===void 0)return q.delegate=null,ee==="throw"&&J.iterator.return&&(q.method="return",q.arg=void 0,F(J,q),q.method==="throw")||ee!=="return"&&(q.method="throw",q.arg=new TypeError("The iterator does not provide a '"+ee+"' method")),S;var le=_(re,J.iterator,q.arg);if(le.type==="throw")return q.method="throw",q.arg=le.arg,q.delegate=null,S;var me=le.arg;return me?me.done?(q[J.resultName]=me.value,q.next=J.nextLoc,q.method!=="return"&&(q.method="next",q.arg=void 0),q.delegate=null,S):me:(q.method="throw",q.arg=new TypeError("iterator result is not an object"),q.delegate=null,S)}function H(J){var q={tryLoc:J[0]};1 in J&&(q.catchLoc=J[1]),2 in J&&(q.finallyLoc=J[2],q.afterLoc=J[3]),this.tryEntries.push(q)}function K(J){var q=J.completion||{};q.type="normal",delete q.arg,J.completion=q}function te(J){this.tryEntries=[{tryLoc:"root"}],J.forEach(H,this),this.reset(!0)}function Y(J){if(J){var q=J[u];if(q)return q.call(J);if(typeof J.next=="function")return J;if(!isNaN(J.length)){var ee=-1,re=function le(){for(;++ee<J.length;)if(o.call(J,ee))return le.value=J[ee],le.done=!1,le;return le.value=void 0,le.done=!0,le};return re.next=re}}return{next:Q}}function Q(){return{value:void 0,done:!0}}return O.prototype=I,a(P,"constructor",{value:I,configurable:!0}),a(I,"constructor",{value:O,configurable:!0}),O.displayName=m(I,f,"GeneratorFunction"),e.isGeneratorFunction=function(J){var q=typeof J=="function"&&J.constructor;return!!q&&(q===O||(q.displayName||q.name)==="GeneratorFunction")},e.mark=function(J){return Object.setPrototypeOf?Object.setPrototypeOf(J,I):(J.__proto__=I,m(J,f,"GeneratorFunction")),J.prototype=Object.create(P),J},e.awrap=function(J){return{__await:J}},D(U.prototype),m(U.prototype,d,function(){return this}),e.AsyncIterator=U,e.async=function(J,q,ee,re,le){le===void 0&&(le=Promise);var me=new U(g(J,q,ee,re),le);return e.isGeneratorFunction(q)?me:me.next().then(function(ue){return ue.done?ue.value:me.next()})},D(P),m(P,f,"Generator"),m(P,u,function(){return this}),m(P,"toString",function(){return"[object Generator]"}),e.keys=function(J){var q=Object(J),ee=[];for(var re in q)ee.push(re);return ee.reverse(),function le(){for(;ee.length;){var me=ee.pop();if(me in q)return le.value=me,le.done=!1,le}return le.done=!0,le}},e.values=Y,te.prototype={constructor:te,reset:function(q){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(K),!q)for(var ee in this)ee.charAt(0)==="t"&&o.call(this,ee)&&!isNaN(+ee.slice(1))&&(this[ee]=void 0)},stop:function(){this.done=!0;var q=this.tryEntries[0].completion;if(q.type==="throw")throw q.arg;return this.rval},dispatchException:function(q){if(this.done)throw q;var ee=this;function re(oe,ae){return ue.type="throw",ue.arg=q,ee.next=oe,ae&&(ee.method="next",ee.arg=void 0),!!ae}for(var le=this.tryEntries.length-1;le>=0;--le){var me=this.tryEntries[le],ue=me.completion;if(me.tryLoc==="root")return re("end");if(me.tryLoc<=this.prev){var ve=o.call(me,"catchLoc"),Ee=o.call(me,"finallyLoc");if(ve&&Ee){if(this.prev<me.catchLoc)return re(me.catchLoc,!0);if(this.prev<me.finallyLoc)return re(me.finallyLoc)}else if(ve){if(this.prev<me.catchLoc)return re(me.catchLoc,!0)}else{if(!Ee)throw new Error("try statement without catch or finally");if(this.prev<me.finallyLoc)return re(me.finallyLoc)}}}},abrupt:function(q,ee){for(var re=this.tryEntries.length-1;re>=0;--re){var le=this.tryEntries[re];if(le.tryLoc<=this.prev&&o.call(le,"finallyLoc")&&this.prev<le.finallyLoc){var me=le;break}}me&&(q==="break"||q==="continue")&&me.tryLoc<=ee&&ee<=me.finallyLoc&&(me=null);var ue=me?me.completion:{};return ue.type=q,ue.arg=ee,me?(this.method="next",this.next=me.finallyLoc,S):this.complete(ue)},complete:function(q,ee){if(q.type==="throw")throw q.arg;return q.type==="break"||q.type==="continue"?this.next=q.arg:q.type==="return"?(this.rval=this.arg=q.arg,this.method="return",this.next="end"):q.type==="normal"&&ee&&(this.next=ee),S},finish:function(q){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var re=this.tryEntries[ee];if(re.finallyLoc===q)return this.complete(re.completion,re.afterLoc),K(re),S}},catch:function(q){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var re=this.tryEntries[ee];if(re.tryLoc===q){var le=re.completion;if(le.type==="throw"){var me=le.arg;K(re)}return me}}throw new Error("illegal catch attempt")},delegateYield:function(q,ee,re){return this.delegate={iterator:Y(q),resultName:ee,nextLoc:re},this.method==="next"&&(this.arg=void 0),S}},e}function xU(e,t,o,a,c,u,d){try{var f=e[u](d),m=f.value}catch(g){o(g);return}f.done?t(m):Promise.resolve(m).then(a,c)}function ju(e){return function(){var t=this,o=arguments;return new Promise(function(a,c){var u=e.apply(t,o);function d(m){xU(u,a,c,d,f,"next",m)}function f(m){xU(u,a,c,d,f,"throw",m)}d(void 0)})}}function yu(){return yu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},yu.apply(this,arguments)}function tte(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Hf(e,t)}function UR(e){return UR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},UR(e)}function Hf(e,t){return Hf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},Hf(e,t)}function nte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tv(e,t,o){return nte()?tv=Reflect.construct.bind():tv=function(c,u,d){var f=[null];f.push.apply(f,u);var m=Function.bind.apply(c,f),g=new m;return d&&Hf(g,d.prototype),g},tv.apply(null,arguments)}function rte(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function VR(e){var t=typeof Map=="function"?new Map:void 0;return VR=function(a){if(a===null||!rte(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(a))return t.get(a);t.set(a,c)}function c(){return tv(a,arguments,UR(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),Hf(c,a)},VR(e)}var ite=/%[sdj%]/g,ote=function(){};typeof process<"u"&&process.env;function FR(e){if(!e||!e.length)return null;var t={};return e.forEach(function(o){var a=o.field;t[a]=t[a]||[],t[a].push(o)}),t}function la(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];var c=0,u=o.length;if(typeof e=="function")return e.apply(null,o);if(typeof e=="string"){var d=e.replace(ite,function(f){if(f==="%%")return"%";if(c>=u)return f;switch(f){case"%s":return String(o[c++]);case"%d":return Number(o[c++]);case"%j":try{return JSON.stringify(o[c++])}catch{return"[Circular]"}break;default:return f}});return d}return e}function ate(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function _i(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||ate(t)&&typeof e=="string"&&!e)}function ste(e,t,o){var a=[],c=0,u=e.length;function d(f){a.push.apply(a,f||[]),c++,c===u&&o(a)}e.forEach(function(f){t(f,d)})}function DU(e,t,o){var a=0,c=e.length;function u(d){if(d&&d.length){o(d);return}var f=a;a=a+1,f<c?t(e[f],u):o([])}u([])}function cte(e){var t=[];return Object.keys(e).forEach(function(o){t.push.apply(t,e[o]||[])}),t}var kU=function(e){tte(t,e);function t(o,a){var c;return c=e.call(this,"Async Validation Error")||this,c.errors=o,c.fields=a,c}return t}(VR(Error));function lte(e,t,o,a,c){if(t.first){var u=new Promise(function(C,O){var I=function(N){return a(N),N.length?O(new kU(N,FR(N))):C(c)},A=cte(e);DU(A,o,I)});return u.catch(function(C){return C}),u}var d=t.firstFields===!0?Object.keys(e):t.firstFields||[],f=Object.keys(e),m=f.length,g=0,_=[],S=new Promise(function(C,O){var I=function(L){if(_.push.apply(_,L),g++,g===m)return a(_),_.length?O(new kU(_,FR(_))):C(c)};f.length||(a(_),C(c)),f.forEach(function(A){var L=e[A];d.indexOf(A)!==-1?DU(L,o,I):ste(L,o,I)})});return S.catch(function(C){return C}),S}function ute(e){return!!(e&&e.message!==void 0)}function dte(e,t){for(var o=e,a=0;a<t.length;a++){if(o==null)return o;o=o[t[a]]}return o}function LU(e,t){return function(o){var a;return e.fullFields?a=dte(t,e.fullFields):a=t[o.field||e.fullField],ute(o)?(o.field=o.field||e.fullField,o.fieldValue=a,o):{message:typeof o=="function"?o():o,fieldValue:a,field:o.field||e.fullField}}}function MU(e,t){if(t){for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];typeof a=="object"&&typeof e[o]=="object"?e[o]=yu({},e[o],a):e[o]=a}}return e}var Cj=function(t,o,a,c,u,d){t.required&&(!a.hasOwnProperty(t.field)||_i(o,d||t.type))&&c.push(la(u.messages.required,t.fullField))},hte=function(t,o,a,c,u){(/^\s+$/.test(o)||o==="")&&c.push(la(u.messages.whitespace,t.fullField))},fg,pte=function(){if(fg)return fg;var e="[a-fA-F\\d:]",t=function(U){return U&&U.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},o="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",c=(`
(?:
(?:`+a+":){7}(?:"+a+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+a+":){6}(?:"+o+"|:"+a+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+a+":){5}(?::"+o+"|(?::"+a+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+a+":){4}(?:(?::"+a+"){0,1}:"+o+"|(?::"+a+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+a+":){3}(?:(?::"+a+"){0,2}:"+o+"|(?::"+a+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+a+":){2}(?:(?::"+a+"){0,3}:"+o+"|(?::"+a+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+a+":){1}(?:(?::"+a+"){0,4}:"+o+"|(?::"+a+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+a+"){0,5}:"+o+"|(?::"+a+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),u=new RegExp("(?:^"+o+"$)|(?:^"+c+"$)"),d=new RegExp("^"+o+"$"),f=new RegExp("^"+c+"$"),m=function(U){return U&&U.exact?u:new RegExp("(?:"+t(U)+o+t(U)+")|(?:"+t(U)+c+t(U)+")","g")};m.v4=function(D){return D&&D.exact?d:new RegExp(""+t(D)+o+t(D),"g")},m.v6=function(D){return D&&D.exact?f:new RegExp(""+t(D)+c+t(D),"g")};var g="(?:(?:[a-z]+:)?//)",_="(?:\\S+(?::\\S*)?@)?",S=m.v4().source,C=m.v6().source,O="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",I="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",A="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",L="(?::\\d{2,5})?",N='(?:[/?#][^\\s"]*)?',P="(?:"+g+"|www\\.)"+_+"(?:localhost|"+S+"|"+C+"|"+O+I+A+")"+L+N;return fg=new RegExp("(?:^"+P+"$)","i"),fg},UU={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Qp={integer:function(t){return Qp.number(t)&&parseInt(t,10)===t},float:function(t){return Qp.number(t)&&!Qp.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!Qp.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(UU.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(pte())},hex:function(t){return typeof t=="string"&&!!t.match(UU.hex)}},fte=function(t,o,a,c,u){if(t.required&&o===void 0){Cj(t,o,a,c,u);return}var d=["integer","float","array","regexp","object","method","email","number","date","url","hex"],f=t.type;d.indexOf(f)>-1?Qp[f](o)||c.push(la(u.messages.types[f],t.fullField,t.type)):f&&typeof o!==t.type&&c.push(la(u.messages.types[f],t.fullField,t.type))},mte=function(t,o,a,c,u){var d=typeof t.len=="number",f=typeof t.min=="number",m=typeof t.max=="number",g=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_=o,S=null,C=typeof o=="number",O=typeof o=="string",I=Array.isArray(o);if(C?S="number":O?S="string":I&&(S="array"),!S)return!1;I&&(_=o.length),O&&(_=o.replace(g,"_").length),d?_!==t.len&&c.push(la(u.messages[S].len,t.fullField,t.len)):f&&!m&&_<t.min?c.push(la(u.messages[S].min,t.fullField,t.min)):m&&!f&&_>t.max?c.push(la(u.messages[S].max,t.fullField,t.max)):f&&m&&(_<t.min||_>t.max)&&c.push(la(u.messages[S].range,t.fullField,t.min,t.max))},Vd="enum",gte=function(t,o,a,c,u){t[Vd]=Array.isArray(t[Vd])?t[Vd]:[],t[Vd].indexOf(o)===-1&&c.push(la(u.messages[Vd],t.fullField,t[Vd].join(", ")))},vte=function(t,o,a,c,u){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(o)||c.push(la(u.messages.pattern.mismatch,t.fullField,o,t.pattern));else if(typeof t.pattern=="string"){var d=new RegExp(t.pattern);d.test(o)||c.push(la(u.messages.pattern.mismatch,t.fullField,o,t.pattern))}}},mn={required:Cj,whitespace:hte,type:fte,range:mte,enum:gte,pattern:vte},Ete=function(t,o,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(o,"string")&&!t.required)return a();mn.required(t,o,c,d,u,"string"),_i(o,"string")||(mn.type(t,o,c,d,u),mn.range(t,o,c,d,u),mn.pattern(t,o,c,d,u),t.whitespace===!0&&mn.whitespace(t,o,c,d,u))}a(d)},_te=function(t,o,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(o)&&!t.required)return a();mn.required(t,o,c,d,u),o!==void 0&&mn.type(t,o,c,d,u)}a(d)},Ste=function(t,o,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(o===""&&(o=void 0),_i(o)&&!t.required)return a();mn.required(t,o,c,d,u),o!==void 0&&(mn.type(t,o,c,d,u),mn.range(t,o,c,d,u))}a(d)},yte=function(t,o,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(o)&&!t.required)return a();mn.required(t,o,c,d,u),o!==void 0&&mn.type(t,o,c,d,u)}a(d)},Cte=function(t,o,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(o)&&!t.required)return a();mn.required(t,o,c,d,u),_i(o)||mn.type(t,o,c,d,u)}a(d)},Tte=function(t,o,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(o)&&!t.required)return a();mn.required(t,o,c,d,u),o!==void 0&&(mn.type(t,o,c,d,u),mn.range(t,o,c,d,u))}a(d)},bte=function(t,o,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(o)&&!t.required)return a();mn.required(t,o,c,d,u),o!==void 0&&(mn.type(t,o,c,d,u),mn.range(t,o,c,d,u))}a(d)},Rte=function(t,o,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(o==null&&!t.required)return a();mn.required(t,o,c,d,u,"array"),o!=null&&(mn.type(t,o,c,d,u),mn.range(t,o,c,d,u))}a(d)},Ite=function(t,o,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(o)&&!t.required)return a();mn.required(t,o,c,d,u),o!==void 0&&mn.type(t,o,c,d,u)}a(d)},wte="enum",Ote=function(t,o,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(o)&&!t.required)return a();mn.required(t,o,c,d,u),o!==void 0&&mn[wte](t,o,c,d,u)}a(d)},Ate=function(t,o,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(o,"string")&&!t.required)return a();mn.required(t,o,c,d,u),_i(o,"string")||mn.pattern(t,o,c,d,u)}a(d)},Nte=function(t,o,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(o,"date")&&!t.required)return a();if(mn.required(t,o,c,d,u),!_i(o,"date")){var m;o instanceof Date?m=o:m=new Date(o),mn.type(t,m,c,d,u),m&&mn.range(t,m.getTime(),c,d,u)}}a(d)},Pte=function(t,o,a,c,u){var d=[],f=Array.isArray(o)?"array":typeof o;mn.required(t,o,c,d,u,f),a(d)},kT=function(t,o,a,c,u){var d=t.type,f=[],m=t.required||!t.required&&c.hasOwnProperty(t.field);if(m){if(_i(o,d)&&!t.required)return a();mn.required(t,o,c,f,u,d),_i(o,d)||mn.type(t,o,c,f,u)}a(f)},xte=function(t,o,a,c,u){var d=[],f=t.required||!t.required&&c.hasOwnProperty(t.field);if(f){if(_i(o)&&!t.required)return a();mn.required(t,o,c,d,u)}a(d)},pf={string:Ete,method:_te,number:Ste,boolean:yte,regexp:Cte,integer:Tte,float:bte,array:Rte,object:Ite,enum:Ote,pattern:Ate,date:Nte,url:kT,hex:kT,email:kT,required:Pte,any:xte};function BR(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var jR=BR(),Zf=function(){function e(o){this.rules=null,this._messages=jR,this.define(o)}var t=e.prototype;return t.define=function(a){var c=this;if(!a)throw new Error("Cannot configure a schema with no rules");if(typeof a!="object"||Array.isArray(a))throw new Error("Rules must be an object");this.rules={},Object.keys(a).forEach(function(u){var d=a[u];c.rules[u]=Array.isArray(d)?d:[d]})},t.messages=function(a){return a&&(this._messages=MU(BR(),a)),this._messages},t.validate=function(a,c,u){var d=this;c===void 0&&(c={}),u===void 0&&(u=function(){});var f=a,m=c,g=u;if(typeof m=="function"&&(g=m,m={}),!this.rules||Object.keys(this.rules).length===0)return g&&g(null,f),Promise.resolve(f);function _(A){var L=[],N={};function P(U){if(Array.isArray(U)){var B;L=(B=L).concat.apply(B,U)}else L.push(U)}for(var D=0;D<A.length;D++)P(A[D]);L.length?(N=FR(L),g(L,N)):g(null,f)}if(m.messages){var S=this.messages();S===jR&&(S=BR()),MU(S,m.messages),m.messages=S}else m.messages=this.messages();var C={},O=m.keys||Object.keys(this.rules);O.forEach(function(A){var L=d.rules[A],N=f[A];L.forEach(function(P){var D=P;typeof D.transform=="function"&&(f===a&&(f=yu({},f)),N=f[A]=D.transform(N)),typeof D=="function"?D={validator:D}:D=yu({},D),D.validator=d.getValidationMethod(D),D.validator&&(D.field=A,D.fullField=D.fullField||A,D.type=d.getType(D),C[A]=C[A]||[],C[A].push({rule:D,value:N,source:f,field:A}))})});var I={};return lte(C,m,function(A,L){var N=A.rule,P=(N.type==="object"||N.type==="array")&&(typeof N.fields=="object"||typeof N.defaultField=="object");P=P&&(N.required||!N.required&&A.value),N.field=A.field;function D(F,H){return yu({},H,{fullField:N.fullField+"."+F,fullFields:N.fullFields?[].concat(N.fullFields,[F]):[F]})}function U(F){F===void 0&&(F=[]);var H=Array.isArray(F)?F:[F];!m.suppressWarning&&H.length&&e.warning("async-validator:",H),H.length&&N.message!==void 0&&(H=[].concat(N.message));var K=H.map(LU(N,f));if(m.first&&K.length)return I[N.field]=1,L(K);if(!P)L(K);else{if(N.required&&!A.value)return N.message!==void 0?K=[].concat(N.message).map(LU(N,f)):m.error&&(K=[m.error(N,la(m.messages.required,N.field))]),L(K);var te={};N.defaultField&&Object.keys(A.value).map(function(J){te[J]=N.defaultField}),te=yu({},te,A.rule.fields);var Y={};Object.keys(te).forEach(function(J){var q=te[J],ee=Array.isArray(q)?q:[q];Y[J]=ee.map(D.bind(null,J))});var Q=new e(Y);Q.messages(m.messages),A.rule.options&&(A.rule.options.messages=m.messages,A.rule.options.error=m.error),Q.validate(A.value,A.rule.options||m,function(J){var q=[];K&&K.length&&q.push.apply(q,K),J&&J.length&&q.push.apply(q,J),L(q.length?q:null)})}}var B;if(N.asyncValidator)B=N.asyncValidator(N,A.value,U,A.source,m);else if(N.validator){try{B=N.validator(N,A.value,U,A.source,m)}catch(F){console.error==null||console.error(F),m.suppressValidatorError||setTimeout(function(){throw F},0),U(F.message)}B===!0?U():B===!1?U(typeof N.message=="function"?N.message(N.fullField||N.field):N.message||(N.fullField||N.field)+" fails"):B instanceof Array?U(B):B instanceof Error&&U(B.message)}B&&B.then&&B.then(function(){return U()},function(F){return U(F)})},function(A){_(A)},f)},t.getType=function(a){if(a.type===void 0&&a.pattern instanceof RegExp&&(a.type="pattern"),typeof a.validator!="function"&&a.type&&!pf.hasOwnProperty(a.type))throw new Error(la("Unknown rule type %s",a.type));return a.type||"string"},t.getValidationMethod=function(a){if(typeof a.validator=="function")return a.validator;var c=Object.keys(a),u=c.indexOf("message");return u!==-1&&c.splice(u,1),c.length===1&&c[0]==="required"?pf.required:pf[this.getType(a)]||void 0},e}();Zf.register=function(t,o){if(typeof o!="function")throw new Error("Cannot register a validator by type, validator is not a function");pf[t]=o};Zf.warning=ote;Zf.messages=jR;Zf.validators=pf;var ia="'${name}' is not a valid ${type}",Tj={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:ia,method:ia,array:ia,object:ia,number:ia,date:ia,boolean:ia,integer:ia,float:ia,regexp:ia,email:ia,url:ia,hex:ia},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}};function pc(e,t){for(var o=e,a=0;a<t.length;a+=1){if(o==null)return;o=o[t[a]]}return o}function Dte(e){return lj(e)||rj(e)||kw(e)||uj()}function bj(e,t,o,a){if(!t.length)return o;var c=Dte(t),u=c[0],d=c.slice(1),f;return!e&&typeof u=="number"?f=[]:Array.isArray(e)?f=ft(e):f=de({},e),a&&o===void 0&&d.length===1?delete f[u][d[0]]:f[u]=bj(f[u],d,o,a),f}function cl(e,t,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&a&&o===void 0&&!pc(e,t.slice(0,-1))?e:bj(e,t,o,a)}function __(e){return Array.isArray(e)?Lte(e):Nn(e)==="object"&&e!==null?kte(e):e}function kte(e){if(Object.getPrototypeOf(e)===Object.prototype){var t={};for(var o in e)t[o]=__(e[o]);return t}return e}function Lte(e){return e.map(function(t){return __(t)})}function Gr(e){return MR(e)}function VU(e,t){var o={};return t.forEach(function(a){var c=pc(e,a);o=cl(o,a,c)}),o}function ff(e,t){return e&&e.some(function(o){return Ij(o,t)})}function FU(e){return Nn(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function Rj(e,t){var o=Array.isArray(e)?ft(e):de({},e);return t&&Object.keys(t).forEach(function(a){var c=o[a],u=t[a],d=FU(c)&&FU(u);o[a]=d?Rj(c,u||{}):__(u)}),o}function mf(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];return o.reduce(function(c,u){return Rj(c,u)},e)}function Ij(e,t){return!e||!t||e.length!==t.length?!1:e.every(function(o,a){return t[a]===o})}function Mte(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||Nn(e)!=="object"||Nn(t)!=="object")return!1;var o=Object.keys(e),a=Object.keys(t),c=new Set([].concat(o,a));return ft(c).every(function(u){var d=e[u],f=t[u];return typeof d=="function"&&typeof f=="function"?!0:d===f})}function Ute(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&Nn(t.target)==="object"&&e in t.target?t.target[e]:t}function BU(e,t,o){var a=e.length;if(t<0||t>=a||o<0||o>=a)return e;var c=e[t],u=t-o;return u>0?[].concat(ft(e.slice(0,o)),[c],ft(e.slice(o,t)),ft(e.slice(t+1,a))):u<0?[].concat(ft(e.slice(0,t)),ft(e.slice(t+1,o+1)),[c],ft(e.slice(o+1,a))):e}var jU=Zf;function Vte(e,t){return e.replace(/\$\{\w+\}/g,function(o){var a=o.slice(2,-1);return t[a]})}var HU="CODE_LOGIC_ERROR";function HR(e,t,o,a,c){return $R.apply(this,arguments)}function $R(){return $R=ju(_o().mark(function e(t,o,a,c,u){var d,f,m,g,_,S,C,O,I;return _o().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return d=de({},a),delete d.ruleIndex,jU.warning=function(){},d.validator&&(f=d.validator,d.validator=function(){try{return f.apply(void 0,arguments)}catch(N){return console.error(N),Promise.reject(HU)}}),m=null,d&&d.type==="array"&&d.defaultField&&(m=d.defaultField,delete d.defaultField),g=new jU(Ne({},t,[d])),_=mf({},Tj,c.validateMessages),g.messages(_),S=[],L.prev=10,L.next=13,Promise.resolve(g.validate(Ne({},t,o),de({},c)));case 13:L.next=18;break;case 15:L.prev=15,L.t0=L.catch(10),L.t0.errors&&(S=L.t0.errors.map(function(N,P){var D=N.message,U=D===HU?_.default:D;return b.isValidElement(U)?b.cloneElement(U,{key:"error_".concat(P)}):U}));case 18:if(!(!S.length&&m)){L.next=23;break}return L.next=21,Promise.all(o.map(function(N,P){return HR("".concat(t,".").concat(P),N,m,c,u)}));case 21:return C=L.sent,L.abrupt("return",C.reduce(function(N,P){return[].concat(ft(N),ft(P))},[]));case 23:return O=de(de({},a),{},{name:t,enum:(a.enum||[]).join(", ")},u),I=S.map(function(N){return typeof N=="string"?Vte(N,O):N}),L.abrupt("return",I);case 26:case"end":return L.stop()}},e,null,[[10,15]])})),$R.apply(this,arguments)}function Fte(e,t,o,a,c,u){var d=e.join("."),f=o.map(function(_,S){var C=_.validator,O=de(de({},_),{},{ruleIndex:S});return C&&(O.validator=function(I,A,L){var N=!1,P=function(){for(var B=arguments.length,F=new Array(B),H=0;H<B;H++)F[H]=arguments[H];Promise.resolve().then(function(){Eo(!N,"Your validator function has already return a promise. `callback` will be ignored."),N||L.apply(void 0,F)})},D=C(I,A,P);N=D&&typeof D.then=="function"&&typeof D.catch=="function",Eo(N,"`callback` is deprecated. Please return a promise instead."),N&&D.then(function(){L()}).catch(function(U){L(U||" ")})}),O}).sort(function(_,S){var C=_.warningOnly,O=_.ruleIndex,I=S.warningOnly,A=S.ruleIndex;return!!C==!!I?O-A:C?1:-1}),m;if(c===!0)m=new Promise(function(){var _=ju(_o().mark(function S(C,O){var I,A,L;return _o().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:I=0;case 1:if(!(I<f.length)){P.next=12;break}return A=f[I],P.next=5,HR(d,t,A,a,u);case 5:if(L=P.sent,!L.length){P.next=9;break}return O([{errors:L,rule:A}]),P.abrupt("return");case 9:I+=1,P.next=1;break;case 12:C([]);case 13:case"end":return P.stop()}},S)}));return function(S,C){return _.apply(this,arguments)}}());else{var g=f.map(function(_){return HR(d,t,_,a,u).then(function(S){return{errors:S,rule:_}})});m=(c?jte(g):Bte(g)).then(function(_){return Promise.reject(_)})}return m.catch(function(_){return _}),m}function Bte(e){return WR.apply(this,arguments)}function WR(){return WR=ju(_o().mark(function e(t){return _o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.all(t).then(function(c){var u,d=(u=[]).concat.apply(u,ft(c));return d}));case 1:case"end":return a.stop()}},e)})),WR.apply(this,arguments)}function jte(e){return GR.apply(this,arguments)}function GR(){return GR=ju(_o().mark(function e(t){var o;return _o().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=0,c.abrupt("return",new Promise(function(u){t.forEach(function(d){d.then(function(f){f.errors.length&&u([f]),o+=1,o===t.length&&u([])})})}));case 2:case"end":return c.stop()}},e)})),GR.apply(this,arguments)}var Hte=["name"],ka=[];function $U(e,t,o,a,c,u){return typeof e=="function"?e(t,o,"source"in u?{source:u.source}:{}):a!==c}var Hw=function(e){Vu(o,e);var t=Fu(o);function o(a){var c;if(va(this,o),c=t.call(this,a),c.state={resetCount:0},c.cancelRegisterFunc=null,c.mounted=!1,c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.prevValidating=void 0,c.errors=ka,c.warnings=ka,c.cancelRegister=function(){var m=c.props,g=m.preserve,_=m.isListField,S=m.name;c.cancelRegisterFunc&&c.cancelRegisterFunc(_,g,Gr(S)),c.cancelRegisterFunc=null},c.getNamePath=function(){var m=c.props,g=m.name,_=m.fieldContext,S=_.prefixName,C=S===void 0?[]:S;return g!==void 0?[].concat(ft(C),ft(g)):[]},c.getRules=function(){var m=c.props,g=m.rules,_=g===void 0?[]:g,S=m.fieldContext;return _.map(function(C){return typeof C=="function"?C(S):C})},c.refresh=function(){c.mounted&&c.setState(function(m){var g=m.resetCount;return{resetCount:g+1}})},c.triggerMetaEvent=function(m){var g=c.props.onMetaChange;g==null||g(de(de({},c.getMeta()),{},{destroy:m}))},c.onStoreChange=function(m,g,_){var S=c.props,C=S.shouldUpdate,O=S.dependencies,I=O===void 0?[]:O,A=S.onReset,L=_.store,N=c.getNamePath(),P=c.getValue(m),D=c.getValue(L),U=g&&ff(g,N);switch(_.type==="valueUpdate"&&_.source==="external"&&P!==D&&(c.touched=!0,c.dirty=!0,c.validatePromise=null,c.errors=ka,c.warnings=ka,c.triggerMetaEvent()),_.type){case"reset":if(!g||U){c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.errors=ka,c.warnings=ka,c.triggerMetaEvent(),A==null||A(),c.refresh();return}break;case"remove":{if(C){c.reRender();return}break}case"setField":{if(U){var B=_.data;"touched"in B&&(c.touched=B.touched),"validating"in B&&!("originRCField"in B)&&(c.validatePromise=B.validating?Promise.resolve([]):null),"errors"in B&&(c.errors=B.errors||ka),"warnings"in B&&(c.warnings=B.warnings||ka),c.dirty=!0,c.triggerMetaEvent(),c.reRender();return}if(C&&!N.length&&$U(C,m,L,P,D,_)){c.reRender();return}break}case"dependenciesUpdate":{var F=I.map(Gr);if(F.some(function(H){return ff(_.relatedFields,H)})){c.reRender();return}break}default:if(U||(!I.length||N.length||C)&&$U(C,m,L,P,D,_)){c.reRender();return}break}C===!0&&c.reRender()},c.validateRules=function(m){var g=c.getNamePath(),_=c.getValue(),S=Promise.resolve().then(function(){if(!c.mounted)return[];var C=c.props,O=C.validateFirst,I=O===void 0?!1:O,A=C.messageVariables,L=m||{},N=L.triggerName,P=c.getRules();N&&(P=P.filter(function(U){return U}).filter(function(U){var B=U.validateTrigger;if(!B)return!0;var F=MR(B);return F.includes(N)}));var D=Fte(g,_,P,m,I,A);return D.catch(function(U){return U}).then(function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ka;if(c.validatePromise===S){var B;c.validatePromise=null;var F=[],H=[];(B=U.forEach)===null||B===void 0||B.call(U,function(K){var te=K.rule.warningOnly,Y=K.errors,Q=Y===void 0?ka:Y;te?H.push.apply(H,ft(Q)):F.push.apply(F,ft(Q))}),c.errors=F,c.warnings=H,c.triggerMetaEvent(),c.reRender()}}),D});return c.validatePromise=S,c.dirty=!0,c.errors=ka,c.warnings=ka,c.triggerMetaEvent(),c.reRender(),S},c.isFieldValidating=function(){return!!c.validatePromise},c.isFieldTouched=function(){return c.touched},c.isFieldDirty=function(){if(c.dirty||c.props.initialValue!==void 0)return!0;var m=c.props.fieldContext,g=m.getInternalHooks(Su),_=g.getInitialValue;return _(c.getNamePath())!==void 0},c.getErrors=function(){return c.errors},c.getWarnings=function(){return c.warnings},c.isListField=function(){return c.props.isListField},c.isList=function(){return c.props.isList},c.isPreserve=function(){return c.props.preserve},c.getMeta=function(){c.prevValidating=c.isFieldValidating();var m={touched:c.isFieldTouched(),validating:c.prevValidating,errors:c.errors,warnings:c.warnings,name:c.getNamePath(),validated:c.validatePromise===null};return m},c.getOnlyChild=function(m){if(typeof m=="function"){var g=c.getMeta();return de(de({},c.getOnlyChild(m(c.getControlled(),g,c.props.fieldContext))),{},{isFunction:!0})}var _=Nl(m);return _.length!==1||!b.isValidElement(_[0])?{child:_,isFunction:!1}:{child:_[0],isFunction:!1}},c.getValue=function(m){var g=c.props.fieldContext.getFieldsValue,_=c.getNamePath();return pc(m||g(!0),_)},c.getControlled=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=c.props,_=g.trigger,S=g.validateTrigger,C=g.getValueFromEvent,O=g.normalize,I=g.valuePropName,A=g.getValueProps,L=g.fieldContext,N=S!==void 0?S:L.validateTrigger,P=c.getNamePath(),D=L.getInternalHooks,U=L.getFieldsValue,B=D(Su),F=B.dispatch,H=c.getValue(),K=A||function(J){return Ne({},I,J)},te=m[_],Y=de(de({},m),K(H));Y[_]=function(){c.touched=!0,c.dirty=!0,c.triggerMetaEvent();for(var J,q=arguments.length,ee=new Array(q),re=0;re<q;re++)ee[re]=arguments[re];C?J=C.apply(void 0,ee):J=Ute.apply(void 0,[I].concat(ee)),O&&(J=O(J,H,U(!0))),F({type:"updateValue",namePath:P,value:J}),te&&te.apply(void 0,ee)};var Q=MR(N||[]);return Q.forEach(function(J){var q=Y[J];Y[J]=function(){q&&q.apply(void 0,arguments);var ee=c.props.rules;ee&&ee.length&&F({type:"validateField",namePath:P,triggerName:J})}}),Y},a.fieldContext){var u=a.fieldContext.getInternalHooks,d=u(Su),f=d.initEntityValue;f(Qt(c))}return c}return Ea(o,[{key:"componentDidMount",value:function(){var c=this.props,u=c.shouldUpdate,d=c.fieldContext;if(this.mounted=!0,d){var f=d.getInternalHooks,m=f(Su),g=m.registerField;this.cancelRegisterFunc=g(this)}u===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var c=this.state.resetCount,u=this.props.children,d=this.getOnlyChild(u),f=d.child,m=d.isFunction,g;return m?g=f:b.isValidElement(f)?g=b.cloneElement(f,this.getControlled(f.props)):(Eo(!f,"`children` of Field is not validate ReactElement."),g=f),b.createElement(b.Fragment,{key:c},g)}}]),o}(b.Component);Hw.contextType=Ph;Hw.defaultProps={trigger:"onChange",valuePropName:"value"};function wj(e){var t=e.name,o=Sn(e,Hte),a=b.useContext(Ph),c=b.useContext(LR),u=t!==void 0?Gr(t):void 0,d="keep";return o.isListField||(d="_".concat((u||[]).join("_"))),b.createElement(Hw,Be({key:d,name:u,isListField:!!c},o,{fieldContext:a}))}var $te=function(t){var o=t.name,a=t.initialValue,c=t.children,u=t.rules,d=t.validateTrigger,f=t.isListField,m=b.useContext(Ph),g=b.useContext(LR),_=b.useRef({keys:[],id:0}),S=_.current,C=b.useMemo(function(){var L=Gr(m.prefixName)||[];return[].concat(ft(L),ft(Gr(o)))},[m.prefixName,o]),O=b.useMemo(function(){return de(de({},m),{},{prefixName:C})},[m,C]),I=b.useMemo(function(){return{getKey:function(N){var P=C.length,D=N[P];return[S.keys[D],N.slice(P+1)]}}},[C]);if(typeof c!="function")return Eo(!1,"Form.List only accepts function as children."),null;var A=function(N,P,D){var U=D.source;return U==="internal"?!1:N!==P};return b.createElement(LR.Provider,{value:I},b.createElement(Ph.Provider,{value:O},b.createElement(wj,{name:[],shouldUpdate:A,rules:u,validateTrigger:d,initialValue:a,isList:!0,isListField:f??!!g},function(L,N){var P=L.value,D=P===void 0?[]:P,U=L.onChange,B=m.getFieldValue,F=function(){var Y=B(C||[]);return Y||[]},H={add:function(Y,Q){var J=F();Q>=0&&Q<=J.length?(S.keys=[].concat(ft(S.keys.slice(0,Q)),[S.id],ft(S.keys.slice(Q))),U([].concat(ft(J.slice(0,Q)),[Y],ft(J.slice(Q))))):(S.keys=[].concat(ft(S.keys),[S.id]),U([].concat(ft(J),[Y]))),S.id+=1},remove:function(Y){var Q=F(),J=new Set(Array.isArray(Y)?Y:[Y]);J.size<=0||(S.keys=S.keys.filter(function(q,ee){return!J.has(ee)}),U(Q.filter(function(q,ee){return!J.has(ee)})))},move:function(Y,Q){if(Y!==Q){var J=F();Y<0||Y>=J.length||Q<0||Q>=J.length||(S.keys=BU(S.keys,Y,Q),U(BU(J,Y,Q)))}}},K=D||[];return Array.isArray(K)||(K=[]),c(K.map(function(te,Y){var Q=S.keys[Y];return Q===void 0&&(S.keys[Y]=S.id,Q=S.keys[Y],S.id+=1),{name:Y,key:Q,isListField:!0}}),H,N)})))};function Wte(e){var t=!1,o=e.length,a=[];return e.length?new Promise(function(c,u){e.forEach(function(d,f){d.catch(function(m){return t=!0,m}).then(function(m){o-=1,a[f]=m,!(o>0)&&(t&&u(a),c(a))})})}):Promise.resolve([])}var Oj="__@field_split__";function LT(e){return e.map(function(t){return"".concat(Nn(t),":").concat(t)}).join(Oj)}var Fd=function(){function e(){va(this,e),this.kvs=new Map}return Ea(e,[{key:"set",value:function(o,a){this.kvs.set(LT(o),a)}},{key:"get",value:function(o){return this.kvs.get(LT(o))}},{key:"update",value:function(o,a){var c=this.get(o),u=a(c);u?this.set(o,u):this.delete(o)}},{key:"delete",value:function(o){this.kvs.delete(LT(o))}},{key:"map",value:function(o){return ft(this.kvs.entries()).map(function(a){var c=xe(a,2),u=c[0],d=c[1],f=u.split(Oj);return o({key:f.map(function(m){var g=m.match(/^([^:]*):(.*)$/),_=xe(g,3),S=_[1],C=_[2];return S==="number"?Number(C):C}),value:d})})}},{key:"toJSON",value:function(){var o={};return this.map(function(a){var c=a.key,u=a.value;return o[c.join(".")]=u,null}),o}}]),e}(),Gte=["name"],zte=Ea(function e(t){var o=this;va(this,e),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:o.getFieldValue,getFieldsValue:o.getFieldsValue,getFieldError:o.getFieldError,getFieldWarning:o.getFieldWarning,getFieldsError:o.getFieldsError,isFieldsTouched:o.isFieldsTouched,isFieldTouched:o.isFieldTouched,isFieldValidating:o.isFieldValidating,isFieldsValidating:o.isFieldsValidating,resetFields:o.resetFields,setFields:o.setFields,setFieldValue:o.setFieldValue,setFieldsValue:o.setFieldsValue,validateFields:o.validateFields,submit:o.submit,_init:!0,getInternalHooks:o.getInternalHooks}},this.getInternalHooks=function(a){return a===Su?(o.formHooked=!0,{dispatch:o.dispatch,initEntityValue:o.initEntityValue,registerField:o.registerField,useSubscribe:o.useSubscribe,setInitialValues:o.setInitialValues,destroyForm:o.destroyForm,setCallbacks:o.setCallbacks,setValidateMessages:o.setValidateMessages,getFields:o.getFields,setPreserve:o.setPreserve,getInitialValue:o.getInitialValue,registerWatch:o.registerWatch}):(Eo(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(a){o.subscribable=a},this.prevWithoutPreserves=null,this.setInitialValues=function(a,c){if(o.initialValues=a||{},c){var u,d=mf({},a,o.store);(u=o.prevWithoutPreserves)===null||u===void 0||u.map(function(f){var m=f.key;d=cl(d,m,pc(a,m))}),o.prevWithoutPreserves=null,o.updateStore(d)}},this.destroyForm=function(){var a=new Fd;o.getFieldEntities(!0).forEach(function(c){o.isMergedPreserve(c.isPreserve())||a.set(c.getNamePath(),!0)}),o.prevWithoutPreserves=a},this.getInitialValue=function(a){var c=pc(o.initialValues,a);return a.length?__(c):c},this.setCallbacks=function(a){o.callbacks=a},this.setValidateMessages=function(a){o.validateMessages=a},this.setPreserve=function(a){o.preserve=a},this.watchList=[],this.registerWatch=function(a){return o.watchList.push(a),function(){o.watchList=o.watchList.filter(function(c){return c!==a})}},this.notifyWatch=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(o.watchList.length){var c=o.getFieldsValue(),u=o.getFieldsValue(!0);o.watchList.forEach(function(d){d(c,u,a)})}},this.timeoutId=null,this.warningUnhooked=function(){},this.updateStore=function(a){o.store=a},this.getFieldEntities=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return a?o.fieldEntities.filter(function(c){return c.getNamePath().length}):o.fieldEntities},this.getFieldsMap=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,c=new Fd;return o.getFieldEntities(a).forEach(function(u){var d=u.getNamePath();c.set(d,u)}),c},this.getFieldEntitiesForNamePathList=function(a){if(!a)return o.getFieldEntities(!0);var c=o.getFieldsMap(!0);return a.map(function(u){var d=Gr(u);return c.get(d)||{INVALIDATE_NAME_PATH:Gr(u)}})},this.getFieldsValue=function(a,c){if(o.warningUnhooked(),a===!0&&!c)return o.store;var u=o.getFieldEntitiesForNamePathList(Array.isArray(a)?a:null),d=[];return u.forEach(function(f){var m,g="INVALIDATE_NAME_PATH"in f?f.INVALIDATE_NAME_PATH:f.getNamePath();if(!(!a&&(!((m=f.isListField)===null||m===void 0)&&m.call(f))))if(!c)d.push(g);else{var _="getMeta"in f?f.getMeta():null;c(_)&&d.push(g)}}),VU(o.store,d.map(Gr))},this.getFieldValue=function(a){o.warningUnhooked();var c=Gr(a);return pc(o.store,c)},this.getFieldsError=function(a){o.warningUnhooked();var c=o.getFieldEntitiesForNamePathList(a);return c.map(function(u,d){return u&&!("INVALIDATE_NAME_PATH"in u)?{name:u.getNamePath(),errors:u.getErrors(),warnings:u.getWarnings()}:{name:Gr(a[d]),errors:[],warnings:[]}})},this.getFieldError=function(a){o.warningUnhooked();var c=Gr(a),u=o.getFieldsError([c])[0];return u.errors},this.getFieldWarning=function(a){o.warningUnhooked();var c=Gr(a),u=o.getFieldsError([c])[0];return u.warnings},this.isFieldsTouched=function(){o.warningUnhooked();for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];var d=c[0],f=c[1],m,g=!1;c.length===0?m=null:c.length===1?Array.isArray(d)?(m=d.map(Gr),g=!1):(m=null,g=d):(m=d.map(Gr),g=f);var _=o.getFieldEntities(!0),S=function(L){return L.isFieldTouched()};if(!m)return g?_.every(S):_.some(S);var C=new Fd;m.forEach(function(A){C.set(A,[])}),_.forEach(function(A){var L=A.getNamePath();m.forEach(function(N){N.every(function(P,D){return L[D]===P})&&C.update(N,function(P){return[].concat(ft(P),[A])})})});var O=function(L){return L.some(S)},I=C.map(function(A){var L=A.value;return L});return g?I.every(O):I.some(O)},this.isFieldTouched=function(a){return o.warningUnhooked(),o.isFieldsTouched([a])},this.isFieldsValidating=function(a){o.warningUnhooked();var c=o.getFieldEntities();if(!a)return c.some(function(d){return d.isFieldValidating()});var u=a.map(Gr);return c.some(function(d){var f=d.getNamePath();return ff(u,f)&&d.isFieldValidating()})},this.isFieldValidating=function(a){return o.warningUnhooked(),o.isFieldsValidating([a])},this.resetWithFieldInitialValue=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=new Fd,u=o.getFieldEntities(!0);u.forEach(function(m){var g=m.props.initialValue,_=m.getNamePath();if(g!==void 0){var S=c.get(_)||new Set;S.add({entity:m,value:g}),c.set(_,S)}});var d=function(g){g.forEach(function(_){var S=_.props.initialValue;if(S!==void 0){var C=_.getNamePath(),O=o.getInitialValue(C);if(O!==void 0)Eo(!1,"Form already set 'initialValues' with path '".concat(C.join("."),"'. Field can not overwrite it."));else{var I=c.get(C);if(I&&I.size>1)Eo(!1,"Multiple Field with path '".concat(C.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(I){var A=o.getFieldValue(C);(!a.skipExist||A===void 0)&&o.updateStore(cl(o.store,C,ft(I)[0].value))}}}})},f;a.entities?f=a.entities:a.namePathList?(f=[],a.namePathList.forEach(function(m){var g=c.get(m);if(g){var _;(_=f).push.apply(_,ft(ft(g).map(function(S){return S.entity})))}})):f=u,d(f)},this.resetFields=function(a){o.warningUnhooked();var c=o.store;if(!a){o.updateStore(mf({},o.initialValues)),o.resetWithFieldInitialValue(),o.notifyObservers(c,null,{type:"reset"}),o.notifyWatch();return}var u=a.map(Gr);u.forEach(function(d){var f=o.getInitialValue(d);o.updateStore(cl(o.store,d,f))}),o.resetWithFieldInitialValue({namePathList:u}),o.notifyObservers(c,u,{type:"reset"}),o.notifyWatch(u)},this.setFields=function(a){o.warningUnhooked();var c=o.store,u=[];a.forEach(function(d){var f=d.name,m=Sn(d,Gte),g=Gr(f);u.push(g),"value"in m&&o.updateStore(cl(o.store,g,m.value)),o.notifyObservers(c,[g],{type:"setField",data:d})}),o.notifyWatch(u)},this.getFields=function(){var a=o.getFieldEntities(!0),c=a.map(function(u){var d=u.getNamePath(),f=u.getMeta(),m=de(de({},f),{},{name:d,value:o.getFieldValue(d)});return Object.defineProperty(m,"originRCField",{value:!0}),m});return c},this.initEntityValue=function(a){var c=a.props.initialValue;if(c!==void 0){var u=a.getNamePath(),d=pc(o.store,u);d===void 0&&o.updateStore(cl(o.store,u,c))}},this.isMergedPreserve=function(a){var c=a!==void 0?a:o.preserve;return c??!0},this.registerField=function(a){o.fieldEntities.push(a);var c=a.getNamePath();if(o.notifyWatch([c]),a.props.initialValue!==void 0){var u=o.store;o.resetWithFieldInitialValue({entities:[a],skipExist:!0}),o.notifyObservers(u,[a.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(d,f){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(o.fieldEntities=o.fieldEntities.filter(function(S){return S!==a}),!o.isMergedPreserve(f)&&(!d||m.length>1)){var g=d?void 0:o.getInitialValue(c);if(c.length&&o.getFieldValue(c)!==g&&o.fieldEntities.every(function(S){return!Ij(S.getNamePath(),c)})){var _=o.store;o.updateStore(cl(_,c,g,!0)),o.notifyObservers(_,[c],{type:"remove"}),o.triggerDependenciesUpdate(_,c)}}o.notifyWatch([c])}},this.dispatch=function(a){switch(a.type){case"updateValue":{var c=a.namePath,u=a.value;o.updateValue(c,u);break}case"validateField":{var d=a.namePath,f=a.triggerName;o.validateFields([d],{triggerName:f});break}}},this.notifyObservers=function(a,c,u){if(o.subscribable){var d=de(de({},u),{},{store:o.getFieldsValue(!0)});o.getFieldEntities().forEach(function(f){var m=f.onStoreChange;m(a,c,d)})}else o.forceRootUpdate()},this.triggerDependenciesUpdate=function(a,c){var u=o.getDependencyChildrenFields(c);return u.length&&o.validateFields(u),o.notifyObservers(a,u,{type:"dependenciesUpdate",relatedFields:[c].concat(ft(u))}),u},this.updateValue=function(a,c){var u=Gr(a),d=o.store;o.updateStore(cl(o.store,u,c)),o.notifyObservers(d,[u],{type:"valueUpdate",source:"internal"}),o.notifyWatch([u]);var f=o.triggerDependenciesUpdate(d,u),m=o.callbacks.onValuesChange;if(m){var g=VU(o.store,[u]);m(g,o.getFieldsValue())}o.triggerOnFieldsChange([u].concat(ft(f)))},this.setFieldsValue=function(a){o.warningUnhooked();var c=o.store;if(a){var u=mf(o.store,a);o.updateStore(u)}o.notifyObservers(c,null,{type:"valueUpdate",source:"external"}),o.notifyWatch()},this.setFieldValue=function(a,c){o.setFields([{name:a,value:c}])},this.getDependencyChildrenFields=function(a){var c=new Set,u=[],d=new Fd;o.getFieldEntities().forEach(function(m){var g=m.props.dependencies;(g||[]).forEach(function(_){var S=Gr(_);d.update(S,function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return C.add(m),C})})});var f=function m(g){var _=d.get(g)||new Set;_.forEach(function(S){if(!c.has(S)){c.add(S);var C=S.getNamePath();S.isFieldDirty()&&C.length&&(u.push(C),m(C))}})};return f(a),u},this.triggerOnFieldsChange=function(a,c){var u=o.callbacks.onFieldsChange;if(u){var d=o.getFields();if(c){var f=new Fd;c.forEach(function(g){var _=g.name,S=g.errors;f.set(_,S)}),d.forEach(function(g){g.errors=f.get(g.name)||g.errors})}var m=d.filter(function(g){var _=g.name;return ff(a,_)});u(m,d)}},this.validateFields=function(a,c){o.warningUnhooked();var u=!!a,d=u?a.map(Gr):[],f=[];o.getFieldEntities(!0).forEach(function(_){if(u||d.push(_.getNamePath()),c!=null&&c.recursive&&u){var S=_.getNamePath();S.every(function(I,A){return a[A]===I||a[A]===void 0})&&d.push(S)}if(!(!_.props.rules||!_.props.rules.length)){var C=_.getNamePath();if(!u||ff(d,C)){var O=_.validateRules(de({validateMessages:de(de({},Tj),o.validateMessages)},c));f.push(O.then(function(){return{name:C,errors:[],warnings:[]}}).catch(function(I){var A,L=[],N=[];return(A=I.forEach)===null||A===void 0||A.call(I,function(P){var D=P.rule.warningOnly,U=P.errors;D?N.push.apply(N,ft(U)):L.push.apply(L,ft(U))}),L.length?Promise.reject({name:C,errors:L,warnings:N}):{name:C,errors:L,warnings:N}}))}}});var m=Wte(f);o.lastValidatePromise=m,m.catch(function(_){return _}).then(function(_){var S=_.map(function(C){var O=C.name;return O});o.notifyObservers(o.store,S,{type:"validateFinish"}),o.triggerOnFieldsChange(S,_)});var g=m.then(function(){return o.lastValidatePromise===m?Promise.resolve(o.getFieldsValue(d)):Promise.reject([])}).catch(function(_){var S=_.filter(function(C){return C&&C.errors.length});return Promise.reject({values:o.getFieldsValue(d),errorFields:S,outOfDate:o.lastValidatePromise!==m})});return g.catch(function(_){return _}),o.triggerOnFieldsChange(d),g},this.submit=function(){o.warningUnhooked(),o.validateFields().then(function(a){var c=o.callbacks.onFinish;if(c)try{c(a)}catch(u){console.error(u)}}).catch(function(a){var c=o.callbacks.onFinishFailed;c&&c(a)})},this.forceRootUpdate=t});function Aj(e){var t=b.useRef(),o=b.useState({}),a=xe(o,2),c=a[1];if(!t.current)if(e)t.current=e;else{var u=function(){c({})},d=new zte(u);t.current=d.getForm()}return[t.current]}var zR=b.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Nj=function(t){var o=t.validateMessages,a=t.onFormChange,c=t.onFormFinish,u=t.children,d=b.useContext(zR),f=b.useRef({});return b.createElement(zR.Provider,{value:de(de({},d),{},{validateMessages:de(de({},d.validateMessages),o),triggerFormChange:function(g,_){a&&a(g,{changedFields:_,forms:f.current}),d.triggerFormChange(g,_)},triggerFormFinish:function(g,_){c&&c(g,{values:_,forms:f.current}),d.triggerFormFinish(g,_)},registerForm:function(g,_){g&&(f.current=de(de({},f.current),{},Ne({},g,_))),d.registerForm(g,_)},unregisterForm:function(g){var _=de({},f.current);delete _[g],f.current=_,d.unregisterForm(g)}})},u)},Kte=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],Yte=function(t,o){var a=t.name,c=t.initialValues,u=t.fields,d=t.form,f=t.preserve,m=t.children,g=t.component,_=g===void 0?"form":g,S=t.validateMessages,C=t.validateTrigger,O=C===void 0?"onChange":C,I=t.onValuesChange,A=t.onFieldsChange,L=t.onFinish,N=t.onFinishFailed,P=Sn(t,Kte),D=b.useContext(zR),U=Aj(d),B=xe(U,1),F=B[0],H=F.getInternalHooks(Su),K=H.useSubscribe,te=H.setInitialValues,Y=H.setCallbacks,Q=H.setValidateMessages,J=H.setPreserve,q=H.destroyForm;b.useImperativeHandle(o,function(){return F}),b.useEffect(function(){return D.registerForm(a,F),function(){D.unregisterForm(a)}},[D,F,a]),Q(de(de({},D.validateMessages),S)),Y({onValuesChange:I,onFieldsChange:function(ae){if(D.triggerFormChange(a,ae),A){for(var he=arguments.length,pe=new Array(he>1?he-1:0),Ae=1;Ae<he;Ae++)pe[Ae-1]=arguments[Ae];A.apply(void 0,[ae].concat(pe))}},onFinish:function(ae){D.triggerFormFinish(a,ae),L&&L(ae)},onFinishFailed:N}),J(f);var ee=b.useRef(null);te(c,!ee.current),ee.current||(ee.current=!0),b.useEffect(function(){return q},[]);var re,le=typeof m=="function";if(le){var me=F.getFieldsValue(!0);re=m(me,F)}else re=m;K(!le);var ue=b.useRef();b.useEffect(function(){Mte(ue.current||[],u||[])||F.setFields(u||[]),ue.current=u},[u,F]);var ve=b.useMemo(function(){return de(de({},F),{},{validateTrigger:O})},[F,O]),Ee=b.createElement(Ph.Provider,{value:ve},re);return _===!1?Ee:b.createElement(_,Be({},P,{onSubmit:function(ae){ae.preventDefault(),ae.stopPropagation(),F.submit()},onReset:function(ae){var he;ae.preventDefault(),F.resetFields(),(he=P.onReset)===null||he===void 0||he.call(P,ae)}}),Ee)};function WU(e){try{return JSON.stringify(e)}catch{return Math.random()}}function qte(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var a=t[0],c=a===void 0?[]:a,u=t[1],d=u===void 0?{}:u,f=ete(d)?{form:d}:d,m=f.form,g=b.useState(),_=xe(g,2),S=_[0],C=_[1],O=b.useMemo(function(){return WU(S)},[S]),I=b.useRef(O);I.current=O;var A=b.useContext(Ph),L=m||A,N=L&&L._init,P=Gr(c),D=b.useRef(P);return D.current=P,b.useEffect(function(){if(N){var U=L.getFieldsValue,B=L.getInternalHooks,F=B(Su),H=F.registerWatch,K=H(function(Y,Q){var J=pc(f.preserve?Q:Y,D.current),q=WU(J);I.current!==q&&(I.current=q,C(J))}),te=pc(f.preserve?U(!0):U(),D.current);return C(te),K}},[N]),S}var Xte=b.forwardRef(Yte),em=Xte;em.FormProvider=Nj;em.Field=wj;em.List=$te;em.useForm=Aj;em.useWatch=qte;const Jte={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};var Qte={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const Zte={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},Pj=Zte,ene={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},Qte),timePickerLocale:Object.assign({},Pj)},GU=ene,oa="${label} is not a valid ${type}",tne={locale:"en",Pagination:Jte,DatePicker:GU,TimePicker:Pj,Calendar:GU,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:oa,method:oa,array:oa,object:oa,number:oa,date:oa,boolean:oa,integer:oa,float:oa,regexp:oa,email:oa,url:oa,hex:oa},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"}},$f=tne;let MT=Object.assign({},$f.Modal);function zU(e){e?MT=Object.assign(Object.assign({},MT),e):MT=Object.assign({},$f.Modal)}const nne=b.createContext(void 0),$w=nne,rne=(e,t)=>{const o=b.useContext($w),a=b.useMemo(()=>{var u;const d=t||$f[e],f=(u=o==null?void 0:o[e])!==null&&u!==void 0?u:{};return Object.assign(Object.assign({},typeof d=="function"?d():d),f||{})},[e,t,o]),c=b.useMemo(()=>{const u=o==null?void 0:o.locale;return o!=null&&o.exist&&!u?$f.locale:u},[o]);return[a,c]},ine=rne,one="internalMark",ane=e=>{const{locale:t={},children:o,_ANT_MARK__:a}=e;b.useEffect(()=>(zU(t&&t.Modal),()=>{zU()}),[t]);const c=b.useMemo(()=>Object.assign(Object.assign({},t),{exist:!0}),[t]);return b.createElement($w.Provider,{value:c},o)},sne=ane,cne="5.4.7",Bv=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];function ji(e,t){lne(e)&&(e="100%");var o=une(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),o&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function mg(e){return Math.min(1,Math.max(0,e))}function lne(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function une(e){return typeof e=="string"&&e.indexOf("%")!==-1}function xj(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function gg(e){return e<=1?"".concat(Number(e)*100,"%"):e}function Cu(e){return e.length===1?"0"+e:String(e)}function dne(e,t,o){return{r:ji(e,255)*255,g:ji(t,255)*255,b:ji(o,255)*255}}function KU(e,t,o){e=ji(e,255),t=ji(t,255),o=ji(o,255);var a=Math.max(e,t,o),c=Math.min(e,t,o),u=0,d=0,f=(a+c)/2;if(a===c)d=0,u=0;else{var m=a-c;switch(d=f>.5?m/(2-a-c):m/(a+c),a){case e:u=(t-o)/m+(t<o?6:0);break;case t:u=(o-e)/m+2;break;case o:u=(e-t)/m+4;break}u/=6}return{h:u,s:d,l:f}}function UT(e,t,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?e+(t-e)*(6*o):o<1/2?t:o<2/3?e+(t-e)*(2/3-o)*6:e}function hne(e,t,o){var a,c,u;if(e=ji(e,360),t=ji(t,100),o=ji(o,100),t===0)c=o,u=o,a=o;else{var d=o<.5?o*(1+t):o+t-o*t,f=2*o-d;a=UT(f,d,e+1/3),c=UT(f,d,e),u=UT(f,d,e-1/3)}return{r:a*255,g:c*255,b:u*255}}function KR(e,t,o){e=ji(e,255),t=ji(t,255),o=ji(o,255);var a=Math.max(e,t,o),c=Math.min(e,t,o),u=0,d=a,f=a-c,m=a===0?0:f/a;if(a===c)u=0;else{switch(a){case e:u=(t-o)/f+(t<o?6:0);break;case t:u=(o-e)/f+2;break;case o:u=(e-t)/f+4;break}u/=6}return{h:u,s:m,v:d}}function pne(e,t,o){e=ji(e,360)*6,t=ji(t,100),o=ji(o,100);var a=Math.floor(e),c=e-a,u=o*(1-t),d=o*(1-c*t),f=o*(1-(1-c)*t),m=a%6,g=[o,d,u,u,f,o][m],_=[f,o,o,d,u,u][m],S=[u,u,f,o,o,d][m];return{r:g*255,g:_*255,b:S*255}}function YR(e,t,o,a){var c=[Cu(Math.round(e).toString(16)),Cu(Math.round(t).toString(16)),Cu(Math.round(o).toString(16))];return a&&c[0].startsWith(c[0].charAt(1))&&c[1].startsWith(c[1].charAt(1))&&c[2].startsWith(c[2].charAt(1))?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0):c.join("")}function fne(e,t,o,a,c){var u=[Cu(Math.round(e).toString(16)),Cu(Math.round(t).toString(16)),Cu(Math.round(o).toString(16)),Cu(mne(a))];return c&&u[0].startsWith(u[0].charAt(1))&&u[1].startsWith(u[1].charAt(1))&&u[2].startsWith(u[2].charAt(1))&&u[3].startsWith(u[3].charAt(1))?u[0].charAt(0)+u[1].charAt(0)+u[2].charAt(0)+u[3].charAt(0):u.join("")}function mne(e){return Math.round(parseFloat(e)*255).toString(16)}function YU(e){return aa(e)/255}function aa(e){return parseInt(e,16)}function gne(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var qR={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Yd(e){var t={r:0,g:0,b:0},o=1,a=null,c=null,u=null,d=!1,f=!1;return typeof e=="string"&&(e=_ne(e)),typeof e=="object"&&(sc(e.r)&&sc(e.g)&&sc(e.b)?(t=dne(e.r,e.g,e.b),d=!0,f=String(e.r).substr(-1)==="%"?"prgb":"rgb"):sc(e.h)&&sc(e.s)&&sc(e.v)?(a=gg(e.s),c=gg(e.v),t=pne(e.h,a,c),d=!0,f="hsv"):sc(e.h)&&sc(e.s)&&sc(e.l)&&(a=gg(e.s),u=gg(e.l),t=hne(e.h,a,u),d=!0,f="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(o=e.a)),o=xj(o),{ok:d,format:e.format||f,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:o}}var vne="[-\\+]?\\d+%?",Ene="[-\\+]?\\d*\\.\\d+%?",vl="(?:".concat(Ene,")|(?:").concat(vne,")"),VT="[\\s|\\(]+(".concat(vl,")[,|\\s]+(").concat(vl,")[,|\\s]+(").concat(vl,")\\s*\\)?"),FT="[\\s|\\(]+(".concat(vl,")[,|\\s]+(").concat(vl,")[,|\\s]+(").concat(vl,")[,|\\s]+(").concat(vl,")\\s*\\)?"),os={CSS_UNIT:new RegExp(vl),rgb:new RegExp("rgb"+VT),rgba:new RegExp("rgba"+FT),hsl:new RegExp("hsl"+VT),hsla:new RegExp("hsla"+FT),hsv:new RegExp("hsv"+VT),hsva:new RegExp("hsva"+FT),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function _ne(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(qR[e])e=qR[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var o=os.rgb.exec(e);return o?{r:o[1],g:o[2],b:o[3]}:(o=os.rgba.exec(e),o?{r:o[1],g:o[2],b:o[3],a:o[4]}:(o=os.hsl.exec(e),o?{h:o[1],s:o[2],l:o[3]}:(o=os.hsla.exec(e),o?{h:o[1],s:o[2],l:o[3],a:o[4]}:(o=os.hsv.exec(e),o?{h:o[1],s:o[2],v:o[3]}:(o=os.hsva.exec(e),o?{h:o[1],s:o[2],v:o[3],a:o[4]}:(o=os.hex8.exec(e),o?{r:aa(o[1]),g:aa(o[2]),b:aa(o[3]),a:YU(o[4]),format:t?"name":"hex8"}:(o=os.hex6.exec(e),o?{r:aa(o[1]),g:aa(o[2]),b:aa(o[3]),format:t?"name":"hex"}:(o=os.hex4.exec(e),o?{r:aa(o[1]+o[1]),g:aa(o[2]+o[2]),b:aa(o[3]+o[3]),a:YU(o[4]+o[4]),format:t?"name":"hex8"}:(o=os.hex3.exec(e),o?{r:aa(o[1]+o[1]),g:aa(o[2]+o[2]),b:aa(o[3]+o[3]),format:t?"name":"hex"}:!1)))))))))}function sc(e){return Boolean(os.CSS_UNIT.exec(String(e)))}var Fi=function(){function e(t,o){t===void 0&&(t=""),o===void 0&&(o={});var a;if(t instanceof e)return t;typeof t=="number"&&(t=gne(t)),this.originalInput=t;var c=Yd(t);this.originalInput=t,this.r=c.r,this.g=c.g,this.b=c.b,this.a=c.a,this.roundA=Math.round(100*this.a)/100,this.format=(a=o.format)!==null&&a!==void 0?a:c.format,this.gradientType=o.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=c.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),o,a,c,u=t.r/255,d=t.g/255,f=t.b/255;return u<=.03928?o=u/12.92:o=Math.pow((u+.055)/1.055,2.4),d<=.03928?a=d/12.92:a=Math.pow((d+.055)/1.055,2.4),f<=.03928?c=f/12.92:c=Math.pow((f+.055)/1.055,2.4),.2126*o+.7152*a+.0722*c},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=xj(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=KR(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=KR(this.r,this.g,this.b),o=Math.round(t.h*360),a=Math.round(t.s*100),c=Math.round(t.v*100);return this.a===1?"hsv(".concat(o,", ").concat(a,"%, ").concat(c,"%)"):"hsva(".concat(o,", ").concat(a,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=KU(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=KU(this.r,this.g,this.b),o=Math.round(t.h*360),a=Math.round(t.s*100),c=Math.round(t.l*100);return this.a===1?"hsl(".concat(o,", ").concat(a,"%, ").concat(c,"%)"):"hsla(".concat(o,", ").concat(a,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),YR(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),fne(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),o=Math.round(this.g),a=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(o,", ").concat(a,")"):"rgba(".concat(t,", ").concat(o,", ").concat(a,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(o){return"".concat(Math.round(ji(o,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(o){return Math.round(ji(o,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+YR(this.r,this.g,this.b,!1),o=0,a=Object.entries(qR);o<a.length;o++){var c=a[o],u=c[0],d=c[1];if(t===d)return u}return!1},e.prototype.toString=function(t){var o=Boolean(t);t=t??this.format;var a=!1,c=this.a<1&&this.a>=0,u=!o&&c&&(t.startsWith("hex")||t==="name");return u?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(a=this.toRgbString()),t==="prgb"&&(a=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(a=this.toHexString()),t==="hex3"&&(a=this.toHexString(!0)),t==="hex4"&&(a=this.toHex8String(!0)),t==="hex8"&&(a=this.toHex8String()),t==="name"&&(a=this.toName()),t==="hsl"&&(a=this.toHslString()),t==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var o=this.toHsl();return o.l+=t/100,o.l=mg(o.l),new e(o)},e.prototype.brighten=function(t){t===void 0&&(t=10);var o=this.toRgb();return o.r=Math.max(0,Math.min(255,o.r-Math.round(255*-(t/100)))),o.g=Math.max(0,Math.min(255,o.g-Math.round(255*-(t/100)))),o.b=Math.max(0,Math.min(255,o.b-Math.round(255*-(t/100)))),new e(o)},e.prototype.darken=function(t){t===void 0&&(t=10);var o=this.toHsl();return o.l-=t/100,o.l=mg(o.l),new e(o)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var o=this.toHsl();return o.s-=t/100,o.s=mg(o.s),new e(o)},e.prototype.saturate=function(t){t===void 0&&(t=10);var o=this.toHsl();return o.s+=t/100,o.s=mg(o.s),new e(o)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var o=this.toHsl(),a=(o.h+t)%360;return o.h=a<0?360+a:a,new e(o)},e.prototype.mix=function(t,o){o===void 0&&(o=50);var a=this.toRgb(),c=new e(t).toRgb(),u=o/100,d={r:(c.r-a.r)*u+a.r,g:(c.g-a.g)*u+a.g,b:(c.b-a.b)*u+a.b,a:(c.a-a.a)*u+a.a};return new e(d)},e.prototype.analogous=function(t,o){t===void 0&&(t=6),o===void 0&&(o=30);var a=this.toHsl(),c=360/o,u=[this];for(a.h=(a.h-(c*t>>1)+720)%360;--t;)a.h=(a.h+c)%360,u.push(new e(a));return u},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var o=this.toHsv(),a=o.h,c=o.s,u=o.v,d=[],f=1/t;t--;)d.push(new e({h:a,s:c,v:u})),u=(u+f)%1;return d},e.prototype.splitcomplement=function(){var t=this.toHsl(),o=t.h;return[this,new e({h:(o+72)%360,s:t.s,l:t.l}),new e({h:(o+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var o=this.toRgb(),a=new e(t).toRgb(),c=o.a+a.a*(1-o.a);return new e({r:(o.r*o.a+a.r*a.a*(1-o.a))/c,g:(o.g*o.a+a.g*a.a*(1-o.a))/c,b:(o.b*o.a+a.b*a.a*(1-o.a))/c,a:c})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var o=this.toHsl(),a=o.h,c=[this],u=360/t,d=1;d<t;d++)c.push(new e({h:(a+d*u)%360,s:o.s,l:o.l}));return c},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),vg=2,qU=.16,Sne=.05,yne=.05,Cne=.15,Dj=5,kj=4,Tne=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function XU(e){var t=e.r,o=e.g,a=e.b,c=KR(t,o,a);return{h:c.h*360,s:c.s,v:c.v}}function Eg(e){var t=e.r,o=e.g,a=e.b;return"#".concat(YR(t,o,a,!1))}function bne(e,t,o){var a=o/100,c={r:(t.r-e.r)*a+e.r,g:(t.g-e.g)*a+e.g,b:(t.b-e.b)*a+e.b};return c}function JU(e,t,o){var a;return Math.round(e.h)>=60&&Math.round(e.h)<=240?a=o?Math.round(e.h)-vg*t:Math.round(e.h)+vg*t:a=o?Math.round(e.h)+vg*t:Math.round(e.h)-vg*t,a<0?a+=360:a>=360&&(a-=360),a}function QU(e,t,o){if(e.h===0&&e.s===0)return e.s;var a;return o?a=e.s-qU*t:t===kj?a=e.s+qU:a=e.s+Sne*t,a>1&&(a=1),o&&t===Dj&&a>.1&&(a=.1),a<.06&&(a=.06),Number(a.toFixed(2))}function ZU(e,t,o){var a;return o?a=e.v+yne*t:a=e.v-Cne*t,a>1&&(a=1),Number(a.toFixed(2))}function yc(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[],a=Yd(e),c=Dj;c>0;c-=1){var u=XU(a),d=Eg(Yd({h:JU(u,c,!0),s:QU(u,c,!0),v:ZU(u,c,!0)}));o.push(d)}o.push(Eg(a));for(var f=1;f<=kj;f+=1){var m=XU(a),g=Eg(Yd({h:JU(m,f),s:QU(m,f),v:ZU(m,f)}));o.push(g)}return t.theme==="dark"?Tne.map(function(_){var S=_.index,C=_.opacity,O=Eg(bne(Yd(t.backgroundColor||"#141414"),Yd(o[S]),C*100));return O}):o}var BT={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},nv={},jT={};Object.keys(BT).forEach(function(e){nv[e]=yc(BT[e]),nv[e].primary=nv[e][5],jT[e]=yc(BT[e],{theme:"dark",backgroundColor:"#141414"}),jT[e].primary=jT[e][5]});var Rne=nv.gold;const Ine=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}},Lj=Ine;function wne(e){const{sizeUnit:t,sizeStep:o}=e;return{sizeXXL:t*(o+8),sizeXL:t*(o+4),sizeLG:t*(o+2),sizeMD:t*(o+1),sizeMS:t*o,size:t*o,sizeSM:t*(o-1),sizeXS:t*(o-2),sizeXXS:t*(o-3)}}const Ww={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},One=Object.assign(Object.assign({},Ww),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1}),S_=One;function Mj(e,t){let{generateColorPalettes:o,generateNeutralColorPalettes:a}=t;const{colorSuccess:c,colorWarning:u,colorError:d,colorInfo:f,colorPrimary:m,colorBgBase:g,colorTextBase:_}=e,S=o(m),C=o(c),O=o(u),I=o(d),A=o(f),L=a(g,_);return Object.assign(Object.assign({},L),{colorPrimaryBg:S[1],colorPrimaryBgHover:S[2],colorPrimaryBorder:S[3],colorPrimaryBorderHover:S[4],colorPrimaryHover:S[5],colorPrimary:S[6],colorPrimaryActive:S[7],colorPrimaryTextHover:S[8],colorPrimaryText:S[9],colorPrimaryTextActive:S[10],colorSuccessBg:C[1],colorSuccessBgHover:C[2],colorSuccessBorder:C[3],colorSuccessBorderHover:C[4],colorSuccessHover:C[4],colorSuccess:C[6],colorSuccessActive:C[7],colorSuccessTextHover:C[8],colorSuccessText:C[9],colorSuccessTextActive:C[10],colorErrorBg:I[1],colorErrorBgHover:I[2],colorErrorBorder:I[3],colorErrorBorderHover:I[4],colorErrorHover:I[5],colorError:I[6],colorErrorActive:I[7],colorErrorTextHover:I[8],colorErrorText:I[9],colorErrorTextActive:I[10],colorWarningBg:O[1],colorWarningBgHover:O[2],colorWarningBorder:O[3],colorWarningBorderHover:O[4],colorWarningHover:O[4],colorWarning:O[6],colorWarningActive:O[7],colorWarningTextHover:O[8],colorWarningText:O[9],colorWarningTextActive:O[10],colorInfoBg:A[1],colorInfoBgHover:A[2],colorInfoBorder:A[3],colorInfoBorderHover:A[4],colorInfoHover:A[4],colorInfo:A[6],colorInfoActive:A[7],colorInfoTextHover:A[8],colorInfoText:A[9],colorInfoTextActive:A[10],colorBgMask:new Fi("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const Ane=e=>{let t=e,o=e,a=e,c=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?o=4:e<8&&e>=7?o=5:e<14&&e>=8?o=6:e<16&&e>=14?o=7:e>=16&&(o=8),e<6&&e>=2?a=1:e>=6&&(a=2),e>4&&e<8?c=4:e>=8&&(c=6),{borderRadius:e>16?16:e,borderRadiusXS:a,borderRadiusSM:o,borderRadiusLG:t,borderRadiusOuter:c}},Nne=Ane;function Pne(e){const{motionUnit:t,motionBase:o,borderRadius:a,lineWidth:c}=e;return Object.assign({motionDurationFast:`${(o+t).toFixed(1)}s`,motionDurationMid:`${(o+t*2).toFixed(1)}s`,motionDurationSlow:`${(o+t*3).toFixed(1)}s`,lineWidthBold:c+1},Nne(a))}const cc=(e,t)=>new Fi(e).setAlpha(t).toRgbString(),Fp=(e,t)=>new Fi(e).darken(t).toHexString(),xne=e=>{const t=yc(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},Dne=(e,t)=>{const o=e||"#fff",a=t||"#000";return{colorBgBase:o,colorTextBase:a,colorText:cc(a,.88),colorTextSecondary:cc(a,.65),colorTextTertiary:cc(a,.45),colorTextQuaternary:cc(a,.25),colorFill:cc(a,.15),colorFillSecondary:cc(a,.06),colorFillTertiary:cc(a,.04),colorFillQuaternary:cc(a,.02),colorBgLayout:Fp(o,4),colorBgContainer:Fp(o,0),colorBgElevated:Fp(o,0),colorBgSpotlight:cc(a,.85),colorBorder:Fp(o,15),colorBorderSecondary:Fp(o,6)}};function kne(e){const t=new Array(10).fill(null).map((o,a)=>{const c=a-1,u=e*Math.pow(2.71828,c/5),d=a>1?Math.floor(u):Math.ceil(u);return Math.floor(d/2)*2});return t[1]=e,t.map(o=>{const a=o+8;return{size:o,lineHeight:a/o}})}const Lne=e=>{const t=kne(e),o=t.map(c=>c.size),a=t.map(c=>c.lineHeight);return{fontSizeSM:o[0],fontSize:o[1],fontSizeLG:o[2],fontSizeXL:o[3],fontSizeHeading1:o[6],fontSizeHeading2:o[5],fontSizeHeading3:o[4],fontSizeHeading4:o[3],fontSizeHeading5:o[2],lineHeight:a[1],lineHeightLG:a[2],lineHeightSM:a[0],lineHeightHeading1:a[6],lineHeightHeading2:a[5],lineHeightHeading3:a[4],lineHeightHeading4:a[3],lineHeightHeading5:a[2]}},Uj=Lne;function y_(e){const t=Object.keys(Ww).map(o=>{const a=yc(e[o]);return new Array(10).fill(1).reduce((c,u,d)=>(c[`${o}-${d+1}`]=a[d],c[`${o}${d+1}`]=a[d],c),{})}).reduce((o,a)=>(o=Object.assign(Object.assign({},o),a),o),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),Mj(e,{generateColorPalettes:xne,generateNeutralColorPalettes:Dne})),Uj(e.fontSize)),wne(e)),Lj(e)),Pne(e))}function HT(e){return e>=0&&e<=255}function _g(e,t){const{r:o,g:a,b:c,a:u}=new Fi(e).toRgb();if(u<1)return e;const{r:d,g:f,b:m}=new Fi(t).toRgb();for(let g=.01;g<=1;g+=.01){const _=Math.round((o-d*(1-g))/g),S=Math.round((a-f*(1-g))/g),C=Math.round((c-m*(1-g))/g);if(HT(_)&&HT(S)&&HT(C))return new Fi({r:_,g:S,b:C,a:Math.round(g*100)/100}).toRgbString()}return new Fi({r:o,g:a,b:c,a:1}).toRgbString()}var Mne=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};function Une(e){const{override:t}=e,o=Mne(e,["override"]),a=Object.assign({},t);Object.keys(S_).forEach(C=>{delete a[C]});const c=Object.assign(Object.assign({},o),a),u=480,d=576,f=768,m=992,g=1200,_=1600;return Object.assign(Object.assign(Object.assign({},c),{colorLink:c.colorInfoText,colorLinkHover:c.colorInfoHover,colorLinkActive:c.colorInfoActive,colorFillContent:c.colorFillSecondary,colorFillContentHover:c.colorFill,colorFillAlter:c.colorFillQuaternary,colorBgContainerDisabled:c.colorFillTertiary,colorBorderBg:c.colorBgContainer,colorSplit:_g(c.colorBorderSecondary,c.colorBgContainer),colorTextPlaceholder:c.colorTextQuaternary,colorTextDisabled:c.colorTextQuaternary,colorTextHeading:c.colorText,colorTextLabel:c.colorTextSecondary,colorTextDescription:c.colorTextTertiary,colorTextLightSolid:c.colorWhite,colorHighlight:c.colorError,colorBgTextHover:c.colorFillSecondary,colorBgTextActive:c.colorFill,colorIcon:c.colorTextTertiary,colorIconHover:c.colorText,colorErrorOutline:_g(c.colorErrorBg,c.colorBgContainer),colorWarningOutline:_g(c.colorWarningBg,c.colorBgContainer),fontSizeIcon:c.fontSizeSM,lineWidthFocus:c.lineWidth*4,lineWidth:c.lineWidth,controlOutlineWidth:c.lineWidth*2,controlInteractiveSize:c.controlHeight/2,controlItemBgHover:c.colorFillTertiary,controlItemBgActive:c.colorPrimaryBg,controlItemBgActiveHover:c.colorPrimaryBgHover,controlItemBgActiveDisabled:c.colorFill,controlTmpOutline:c.colorFillQuaternary,controlOutline:_g(c.colorPrimaryBg,c.colorBgContainer),lineType:c.lineType,borderRadius:c.borderRadius,borderRadiusXS:c.borderRadiusXS,borderRadiusSM:c.borderRadiusSM,borderRadiusLG:c.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:c.sizeXXS,paddingXS:c.sizeXS,paddingSM:c.sizeSM,padding:c.size,paddingMD:c.sizeMD,paddingLG:c.sizeLG,paddingXL:c.sizeXL,paddingContentHorizontalLG:c.sizeLG,paddingContentVerticalLG:c.sizeMS,paddingContentHorizontal:c.sizeMS,paddingContentVertical:c.sizeSM,paddingContentHorizontalSM:c.size,paddingContentVerticalSM:c.sizeXS,marginXXS:c.sizeXXS,marginXS:c.sizeXS,marginSM:c.sizeSM,margin:c.size,marginMD:c.sizeMD,marginLG:c.sizeLG,marginXL:c.sizeXL,marginXXL:c.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:u,screenXSMin:u,screenXSMax:d-1,screenSM:d,screenSMMin:d,screenSMMax:f-1,screenMD:f,screenMDMin:f,screenMDMax:m-1,screenLG:m,screenLGMin:m,screenLGMax:g-1,screenXL:g,screenXLMin:g,screenXLMax:_-1,screenXXL:_,screenXXLMin:_,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Fi("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Fi("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Fi("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),a)}const Vj="anticon",Vne=(e,t)=>t||(e?`ant-${e}`:"ant"),Oi=b.createContext({getPrefixCls:Vne,iconPrefixCls:Vj}),Fj=e=>({color:e.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}}),Fne=(e,t,o,a,c)=>{const u=e/2,d=0,f=u,m=o*1/Math.sqrt(2),g=u-o*(1-1/Math.sqrt(2)),_=u-t*(1/Math.sqrt(2)),S=o*(Math.sqrt(2)-1)+t*(1/Math.sqrt(2)),C=2*u-_,O=S,I=2*u-m,A=g,L=2*u-d,N=f,P=u*Math.sqrt(2)+o*(Math.sqrt(2)-2),D=o*(Math.sqrt(2)-1);return{pointerEvents:"none",width:e,height:e,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:e,height:e/2,background:a,clipPath:{_multi_value_:!0,value:[`polygon(${D}px 100%, 50% ${D}px, ${2*u-D}px 100%, ${D}px 100%)`,`path('M ${d} ${f} A ${o} ${o} 0 0 0 ${m} ${g} L ${_} ${S} A ${t} ${t} 0 0 1 ${C} ${O} L ${I} ${A} A ${o} ${o} 0 0 0 ${L} ${N} Z')`]},content:'""'},"&::after":{content:'""',position:"absolute",width:P,height:P,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${t}px 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:c,zIndex:0,background:"transparent"}}},Bne={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},C_=e=>({boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:e.fontFamily}),Bj=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),XR=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),jne=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},[`&:active,
  &:hover`]:{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),Hne=(e,t)=>{const{fontFamily:o,fontSize:a}=e,c=`[class^="${t}"], [class*=" ${t}"]`;return{[c]:{fontFamily:o,fontSize:a,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[c]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},jj=e=>({outline:`${e.lineWidthFocus}px solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),$ne=e=>({"&:focus-visible":Object.assign({},jj(e))});function Hu(e,t,o,a){return c=>{const[u,d,f]=T_(),{getPrefixCls:m,iconPrefixCls:g,csp:_}=b.useContext(Oi),S=m(),C={theme:u,token:d,hashId:f,nonce:()=>_==null?void 0:_.nonce};return kR(Object.assign(Object.assign({},C),{path:["Shared",S]}),()=>[{"&":jne(d)}]),[kR(Object.assign(Object.assign({},C),{path:[e,c,g]}),()=>{const{token:O,flush:I}=Gne(d),A=typeof o=="function"?o(O):o,L=Object.assign(Object.assign({},A),d[e]),N=`.${c}`,P=fa(O,{componentCls:N,prefixCls:c,iconCls:`.${g}`,antCls:`.${S}`},L),D=t(P,{hashId:f,prefixCls:c,rootPrefixCls:S,iconPrefixCls:g,overrideComponentToken:d[e]});return I(e,L),[(a==null?void 0:a.resetStyle)===!1?null:Hne(d,c),D]}),f]}}const Hj=typeof CSSINJS_STATISTIC<"u";let JR=!0;function fa(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];if(!Hj)return Object.assign.apply(Object,[{}].concat(t));JR=!1;const a={};return t.forEach(c=>{Object.keys(c).forEach(d=>{Object.defineProperty(a,d,{configurable:!0,enumerable:!0,get:()=>c[d]})})}),JR=!0,a}function Wne(){}function Gne(e){let t,o=e,a=Wne;return Hj&&(t=new Set,o=new Proxy(e,{get(c,u){return JR&&t.add(u),c[u]}}),a=(c,u)=>{Array.from(t)}),{token:o,keys:t,flush:a}}function zne(e,t){return Bv.reduce((o,a)=>{const c=e[`${a}1`],u=e[`${a}3`],d=e[`${a}6`],f=e[`${a}7`];return Object.assign(Object.assign({},o),t(a,{lightColor:c,lightBorderColor:u,darkColor:d,textColor:f}))},{})}const Kne=yj(y_),jv={token:S_,hashed:!0},$j=ht.createContext(jv);function T_(){const{token:e,hashed:t,theme:o,components:a}=ht.useContext($j),c=`${cne}-${t||""}`,u=o||Kne,[d,f]=Oee(u,[S_,e],{salt:c,override:Object.assign({override:e},a),formatToken:Une});return[u,d,t?f:""]}const Yne=`-ant-${Date.now()}-${Math.random()}`;function qne(e,t){const o={},a=(d,f)=>{let m=d.clone();return m=(f==null?void 0:f(m))||m,m.toRgbString()},c=(d,f)=>{const m=new Fi(d),g=yc(m.toRgbString());o[`${f}-color`]=a(m),o[`${f}-color-disabled`]=g[1],o[`${f}-color-hover`]=g[4],o[`${f}-color-active`]=g[6],o[`${f}-color-outline`]=m.clone().setAlpha(.2).toRgbString(),o[`${f}-color-deprecated-bg`]=g[0],o[`${f}-color-deprecated-border`]=g[2]};if(t.primaryColor){c(t.primaryColor,"primary");const d=new Fi(t.primaryColor),f=yc(d.toRgbString());f.forEach((g,_)=>{o[`primary-${_+1}`]=g}),o["primary-color-deprecated-l-35"]=a(d,g=>g.lighten(35)),o["primary-color-deprecated-l-20"]=a(d,g=>g.lighten(20)),o["primary-color-deprecated-t-20"]=a(d,g=>g.tint(20)),o["primary-color-deprecated-t-50"]=a(d,g=>g.tint(50)),o["primary-color-deprecated-f-12"]=a(d,g=>g.setAlpha(g.getAlpha()*.12));const m=new Fi(f[0]);o["primary-color-active-deprecated-f-30"]=a(m,g=>g.setAlpha(g.getAlpha()*.3)),o["primary-color-active-deprecated-d-02"]=a(m,g=>g.darken(2))}return t.successColor&&c(t.successColor,"success"),t.warningColor&&c(t.warningColor,"warning"),t.errorColor&&c(t.errorColor,"error"),t.infoColor&&c(t.infoColor,"info"),`
  :root {
    ${Object.keys(o).map(d=>`--${e}-${d}: ${o[d]};`).join(`
`)}
  }
  `.trim()}function Xne(e,t){const o=qne(e,t);Ho()&&Ah(o,`${Yne}-dynamic-theme`)}const QR=b.createContext(!1),Jne=e=>{let{children:t,disabled:o}=e;const a=b.useContext(QR);return b.createElement(QR.Provider,{value:o??a},t)},Gw=QR,ZR=b.createContext(void 0),Qne=e=>{let{children:t,size:o}=e;const a=b.useContext(ZR);return b.createElement(ZR.Provider,{value:o||a},t)},tm=ZR;function Zne(){const e=b.useContext(Gw),t=b.useContext(tm);return{componentDisabled:e,componentSize:t}}function ere(e,t){const o=e||{},a=o.inherit===!1||!t?jv:t;return h_(()=>{if(!e)return t;const u=Object.assign({},a.components);return Object.keys(e.components||{}).forEach(d=>{u[d]=Object.assign(Object.assign({},u[d]),e.components[d])}),Object.assign(Object.assign(Object.assign({},a),o),{token:Object.assign(Object.assign({},a.token),o.token),components:u})},[o,a],(u,d)=>u.some((f,m)=>{const g=d[m];return!f_(f,g,!0)}))}const tre=(e,t)=>{const[o,a]=T_();return kR({theme:o,token:a,hashId:"",path:["ant-design-icons",e],nonce:()=>t==null?void 0:t.nonce},()=>[{[`.${e}`]:Object.assign(Object.assign({},Bj()),{[`.${e} .${e}-icon`]:{display:"block"}})}])},nre=tre;var rre=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const ire=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select"],ore="ant";let Wj;function are(){return Wj||ore}const sre=e=>{let{prefixCls:t,iconPrefixCls:o,theme:a}=e;t!==void 0&&(Wj=t),a&&Xne(are(),a)},cre=e=>{const{children:t,csp:o,autoInsertSpaceInButton:a,form:c,locale:u,componentSize:d,direction:f,space:m,virtual:g,dropdownMatchSelectWidth:_,legacyLocale:S,parentContext:C,iconPrefixCls:O,theme:I,componentDisabled:A}=e,L=b.useCallback((q,ee)=>{const{prefixCls:re}=e;if(ee)return ee;const le=re||C.getPrefixCls("");return q?`${le}-${q}`:le},[C.getPrefixCls,e.prefixCls]),N=O||C.iconPrefixCls||Vj,P=N!==C.iconPrefixCls,D=o||C.csp,U=nre(N,D),B=ere(I,C.theme),F={csp:D,autoInsertSpaceInButton:a,locale:u||S,direction:f,space:m,virtual:g,dropdownMatchSelectWidth:_,getPrefixCls:L,iconPrefixCls:N,theme:B},H=Object.assign({},C);Object.keys(F).forEach(q=>{F[q]!==void 0&&(H[q]=F[q])}),ire.forEach(q=>{const ee=e[q];ee&&(H[q]=ee)});const K=h_(()=>H,H,(q,ee)=>{const re=Object.keys(q),le=Object.keys(ee);return re.length!==le.length||re.some(me=>q[me]!==ee[me])}),te=b.useMemo(()=>({prefixCls:N,csp:D}),[N,D]);let Y=P?U(t):t;const Q=b.useMemo(()=>{var q,ee,re;return mf({},((q=$f.Form)===null||q===void 0?void 0:q.defaultValidateMessages)||{},((re=(ee=K.locale)===null||ee===void 0?void 0:ee.Form)===null||re===void 0?void 0:re.defaultValidateMessages)||{},(c==null?void 0:c.validateMessages)||{})},[K,c==null?void 0:c.validateMessages]);Object.keys(Q).length>0&&(Y=b.createElement(Nj,{validateMessages:Q},t)),u&&(Y=b.createElement(sne,{locale:u,_ANT_MARK__:one},Y)),(N||D)&&(Y=b.createElement(jw.Provider,{value:te},Y)),d&&(Y=b.createElement(Qne,{size:d},Y));const J=b.useMemo(()=>{const q=B||{},{algorithm:ee,token:re}=q,le=rre(q,["algorithm","token"]),me=ee&&(!Array.isArray(ee)||ee.length>0)?yj(ee):void 0;return Object.assign(Object.assign({},le),{theme:me,token:Object.assign(Object.assign({},S_),re)})},[B]);return I&&(Y=b.createElement($j.Provider,{value:J},Y)),A!==void 0&&(Y=b.createElement(Jne,{disabled:A},Y)),b.createElement(Oi.Provider,{value:K},Y)},nm=e=>{const t=b.useContext(Oi),o=b.useContext($w);return b.createElement(cre,Object.assign({parentContext:t,legacyLocale:o},e))};nm.ConfigContext=Oi;nm.SizeContext=tm;nm.config=sre;nm.useConfig=Zne;Object.defineProperty(nm,"SizeContext",{get:()=>tm});var Gj=function(t){return+setTimeout(t,16)},zj=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(Gj=function(t){return window.requestAnimationFrame(t)},zj=function(t){return window.cancelAnimationFrame(t)});var eV=0,zw=new Map;function Kj(e){zw.delete(e)}var Ei=function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;eV+=1;var a=eV;function c(u){if(u===0)Kj(a),t();else{var d=Gj(function(){c(u-1)});zw.set(a,d)}}return c(o),a};Ei.cancel=function(e){var t=zw.get(e);return Kj(t),zj(t)};function Zp(e,t,o,a){var c=wh.unstable_batchedUpdates?function(d){wh.unstable_batchedUpdates(o,d)}:o;return e.addEventListener&&e.addEventListener(t,c,a),{remove:function(){e.removeEventListener&&e.removeEventListener(t,c,a)}}}function lre(e,t){Eo(e,"[@ant-design/icons] ".concat(t))}function tV(e){return Nn(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(Nn(e.icon)==="object"||typeof e.icon=="function")}function nV(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,o){var a=e[o];switch(o){case"class":t.className=a,delete t.class;break;default:t[o]=a}return t},{})}function eI(e,t,o){return o?ht.createElement(e.tag,de(de({key:t},nV(e.attrs)),o),(e.children||[]).map(function(a,c){return eI(a,"".concat(t,"-").concat(e.tag,"-").concat(c))})):ht.createElement(e.tag,de({key:t},nV(e.attrs)),(e.children||[]).map(function(a,c){return eI(a,"".concat(t,"-").concat(e.tag,"-").concat(c))}))}function Yj(e){return yc(e)[0]}function qj(e){return e?Array.isArray(e)?e:[e]:[]}var ure=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,dre=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ure,o=b.useContext(jw),a=o.csp,c=o.prefixCls,u=t;c&&(u=u.replace(/anticon/g,c)),b.useEffect(function(){Ah(u,"@ant-design-icons",{prepend:!0,csp:a})},[])},hre=["icon","className","onClick","style","primaryColor","secondaryColor"],gf={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function pre(e){var t=e.primaryColor,o=e.secondaryColor;gf.primaryColor=t,gf.secondaryColor=o||Yj(t),gf.calculated=!!o}function fre(){return de({},gf)}var b_=function(t){var o=t.icon,a=t.className,c=t.onClick,u=t.style,d=t.primaryColor,f=t.secondaryColor,m=Sn(t,hre),g=gf;if(d&&(g={primaryColor:d,secondaryColor:f||Yj(d)}),dre(),lre(tV(o),"icon should be icon definiton, but got ".concat(o)),!tV(o))return null;var _=o;return _&&typeof _.icon=="function"&&(_=de(de({},_),{},{icon:_.icon(g.primaryColor,g.secondaryColor)})),eI(_.icon,"svg-".concat(_.name),de({className:a,onClick:c,style:u,"data-icon":_.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},m))};b_.displayName="IconReact";b_.getTwoToneColors=fre;b_.setTwoToneColors=pre;const Kw=b_;function Xj(e){var t=qj(e),o=xe(t,2),a=o[0],c=o[1];return Kw.setTwoToneColors({primaryColor:a,secondaryColor:c})}function mre(){var e=Kw.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var gre=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Xj("#1890ff");var R_=b.forwardRef(function(e,t){var o,a=e.className,c=e.icon,u=e.spin,d=e.rotate,f=e.tabIndex,m=e.onClick,g=e.twoToneColor,_=Sn(e,gre),S=b.useContext(jw),C=S.prefixCls,O=C===void 0?"anticon":C,I=S.rootClassName,A=lt(I,O,(o={},Ne(o,"".concat(O,"-").concat(c.name),!!c.name),Ne(o,"".concat(O,"-spin"),!!u||c.name==="loading"),o),a),L=f;L===void 0&&m&&(L=-1);var N=d?{msTransform:"rotate(".concat(d,"deg)"),transform:"rotate(".concat(d,"deg)")}:void 0,P=qj(g),D=xe(P,2),U=D[0],B=D[1];return b.createElement("span",de(de({role:"img","aria-label":c.name},_),{},{ref:t,tabIndex:L,onClick:m,className:A}),b.createElement(Kw,{icon:c,primaryColor:U,secondaryColor:B,style:N}))});R_.displayName="AntdIcon";R_.getTwoToneColor=mre;R_.setTwoToneColor=Xj;const Hs=R_;var vre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"};const Ere=vre;var Jj=function(t,o){return b.createElement(Hs,de(de({},t),{},{ref:o,icon:Ere}))};Jj.displayName="CloseCircleFilled";const _re=b.forwardRef(Jj);var Sre=b.createContext({}),yre=function(e){Vu(o,e);var t=Fu(o);function o(){return va(this,o),t.apply(this,arguments)}return Ea(o,[{key:"render",value:function(){return this.props.children}}]),o}(b.Component);function wu(e){var t=b.useRef(!1),o=b.useState(e),a=xe(o,2),c=a[0],u=a[1];b.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function d(f,m){m&&t.current||u(f)}return[c,d]}var mu="none",Sg="appear",yg="enter",Cg="leave",rV="none",cs="prepare",lh="start",uh="active",Yw="end",Qj="prepared";function iV(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit".concat(e)]="webkit".concat(t),o["Moz".concat(e)]="moz".concat(t),o["ms".concat(e)]="MS".concat(t),o["O".concat(e)]="o".concat(t.toLowerCase()),o}function Cre(e,t){var o={animationend:iV("Animation","AnimationEnd"),transitionend:iV("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete o.animationend.animation,"TransitionEvent"in t||delete o.transitionend.transition),o}var Tre=Cre(Ho(),typeof window<"u"?window:{}),Zj={};if(Ho()){var bre=document.createElement("div");Zj=bre.style}var Tg={};function e8(e){if(Tg[e])return Tg[e];var t=Tre[e];if(t)for(var o=Object.keys(t),a=o.length,c=0;c<a;c+=1){var u=o[c];if(Object.prototype.hasOwnProperty.call(t,u)&&u in Zj)return Tg[e]=t[u],Tg[e]}return""}var t8=e8("animationend"),n8=e8("transitionend"),r8=!!(t8&&n8),oV=t8||"animationend",aV=n8||"transitionend";function sV(e,t){if(!e)return null;if(Nn(e)==="object"){var o=t.replace(/-\w/g,function(a){return a[1].toUpperCase()});return e[o]}return"".concat(e,"-").concat(t)}const Rre=function(e){var t=b.useRef(),o=b.useRef(e);o.current=e;var a=b.useCallback(function(d){o.current(d)},[]);function c(d){d&&(d.removeEventListener(aV,a),d.removeEventListener(oV,a))}function u(d){t.current&&t.current!==d&&c(t.current),d&&d!==t.current&&(d.addEventListener(aV,a),d.addEventListener(oV,a),t.current=d)}return b.useEffect(function(){return function(){c(t.current)}},[]),[u,c]};var i8=Ho()?b.useLayoutEffect:b.useEffect;const Ire=function(){var e=b.useRef(null);function t(){Ei.cancel(e.current)}function o(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var u=Ei(function(){c<=1?a({isCanceled:function(){return u!==e.current}}):o(a,c-1)});e.current=u}return b.useEffect(function(){return function(){t()}},[]),[o,t]};var wre=[cs,lh,uh,Yw],Ore=[cs,Qj],o8=!1,Are=!0;function a8(e){return e===uh||e===Yw}const Nre=function(e,t,o){var a=wu(rV),c=xe(a,2),u=c[0],d=c[1],f=Ire(),m=xe(f,2),g=m[0],_=m[1];function S(){d(cs,!0)}var C=t?Ore:wre;return i8(function(){if(u!==rV&&u!==Yw){var O=C.indexOf(u),I=C[O+1],A=o(u);A===o8?d(I,!0):I&&g(function(L){function N(){L.isCanceled()||d(I,!0)}A===!0?N():Promise.resolve(A).then(N)})}},[e,u]),b.useEffect(function(){return function(){_()}},[]),[S,u]};function Pre(e,t,o,a){var c=a.motionEnter,u=c===void 0?!0:c,d=a.motionAppear,f=d===void 0?!0:d,m=a.motionLeave,g=m===void 0?!0:m,_=a.motionDeadline,S=a.motionLeaveImmediately,C=a.onAppearPrepare,O=a.onEnterPrepare,I=a.onLeavePrepare,A=a.onAppearStart,L=a.onEnterStart,N=a.onLeaveStart,P=a.onAppearActive,D=a.onEnterActive,U=a.onLeaveActive,B=a.onAppearEnd,F=a.onEnterEnd,H=a.onLeaveEnd,K=a.onVisibleChanged,te=wu(),Y=xe(te,2),Q=Y[0],J=Y[1],q=wu(mu),ee=xe(q,2),re=ee[0],le=ee[1],me=wu(null),ue=xe(me,2),ve=ue[0],Ee=ue[1],oe=b.useRef(!1),ae=b.useRef(null);function he(){return o()}var pe=b.useRef(!1);function Ae(){le(mu,!0),Ee(null,!0)}function Le($e){var ze=he();if(!($e&&!$e.deadline&&$e.target!==ze)){var tt=pe.current,mt;re===Sg&&tt?mt=B==null?void 0:B(ze,$e):re===yg&&tt?mt=F==null?void 0:F(ze,$e):re===Cg&&tt&&(mt=H==null?void 0:H(ze,$e)),re!==mu&&tt&&mt!==!1&&Ae()}}var Qe=Rre(Le),je=xe(Qe,1),Ut=je[0],Nt=function(ze){var tt,mt,Dt;switch(ze){case Sg:return tt={},Ne(tt,cs,C),Ne(tt,lh,A),Ne(tt,uh,P),tt;case yg:return mt={},Ne(mt,cs,O),Ne(mt,lh,L),Ne(mt,uh,D),mt;case Cg:return Dt={},Ne(Dt,cs,I),Ne(Dt,lh,N),Ne(Dt,uh,U),Dt;default:return{}}},at=b.useMemo(function(){return Nt(re)},[re]),Ht=Nre(re,!e,function($e){if($e===cs){var ze=at[cs];return ze?ze(he()):o8}if(It in at){var tt;Ee(((tt=at[It])===null||tt===void 0?void 0:tt.call(at,he(),null))||null)}return It===uh&&(Ut(he()),_>0&&(clearTimeout(ae.current),ae.current=setTimeout(function(){Le({deadline:!0})},_))),It===Qj&&Ae(),Are}),He=xe(Ht,2),ot=He[0],It=He[1],tn=a8(It);pe.current=tn,i8(function(){J(t);var $e=oe.current;oe.current=!0;var ze;!$e&&t&&f&&(ze=Sg),$e&&t&&u&&(ze=yg),($e&&!t&&g||!$e&&S&&!t&&g)&&(ze=Cg);var tt=Nt(ze);ze&&(e||tt[cs])?(le(ze),ot()):le(mu)},[t]),b.useEffect(function(){(re===Sg&&!f||re===yg&&!u||re===Cg&&!g)&&le(mu)},[f,u,g]),b.useEffect(function(){return function(){oe.current=!1,clearTimeout(ae.current)}},[]);var xt=b.useRef(!1);b.useEffect(function(){Q&&(xt.current=!0),Q!==void 0&&re===mu&&((xt.current||Q)&&(K==null||K(Q)),xt.current=!0)},[Q,re]);var Xe=ve;return at[cs]&&It===lh&&(Xe=de({transition:"none"},Xe)),[re,It,Xe,Q??t]}function xre(e){var t=e;Nn(e)==="object"&&(t=e.transitionSupport);function o(c,u){return!!(c.motionName&&t&&u!==!1)}var a=b.forwardRef(function(c,u){var d=c.visible,f=d===void 0?!0:d,m=c.removeOnLeave,g=m===void 0?!0:m,_=c.forceRender,S=c.children,C=c.motionName,O=c.leavedClassName,I=c.eventProps,A=b.useContext(Sre),L=A.motion,N=o(c,L),P=b.useRef(),D=b.useRef();function U(){try{return P.current instanceof HTMLElement?P.current:kv(D.current)}catch{return null}}var B=Pre(N,f,U,c),F=xe(B,4),H=F[0],K=F[1],te=F[2],Y=F[3],Q=b.useRef(Y);Y&&(Q.current=!0);var J=b.useCallback(function(Ee){P.current=Ee,xw(u,Ee)},[u]),q,ee=de(de({},I),{},{visible:f});if(!S)q=null;else if(H===mu)Y?q=S(de({},ee),J):!g&&Q.current&&O?q=S(de(de({},ee),{},{className:O}),J):_||!g&&!O?q=S(de(de({},ee),{},{style:{display:"none"}}),J):q=null;else{var re,le;K===cs?le="prepare":a8(K)?le="active":K===lh&&(le="start");var me=sV(C,"".concat(H,"-").concat(le));q=S(de(de({},ee),{},{className:lt(sV(C,H),(re={},Ne(re,me,me&&le),Ne(re,C,typeof C=="string"),re)),style:te}),J)}if(b.isValidElement(q)&&Uh(q)){var ue=q,ve=ue.ref;ve||(q=b.cloneElement(q,{ref:J}))}return b.createElement(yre,{ref:D},q)});return a.displayName="CSSMotion",a}const Ic=xre(r8);var tI="add",nI="keep",rI="remove",$T="removed";function Dre(e){var t;return e&&Nn(e)==="object"&&"key"in e?t=e:t={key:e},de(de({},t),{},{key:String(t.key)})}function iI(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(Dre)}function kre(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=[],a=0,c=t.length,u=iI(e),d=iI(t);u.forEach(function(g){for(var _=!1,S=a;S<c;S+=1){var C=d[S];if(C.key===g.key){a<S&&(o=o.concat(d.slice(a,S).map(function(O){return de(de({},O),{},{status:tI})})),a=S),o.push(de(de({},C),{},{status:nI})),a+=1,_=!0;break}}_||o.push(de(de({},g),{},{status:rI}))}),a<c&&(o=o.concat(d.slice(a).map(function(g){return de(de({},g),{},{status:tI})})));var f={};o.forEach(function(g){var _=g.key;f[_]=(f[_]||0)+1});var m=Object.keys(f).filter(function(g){return f[g]>1});return m.forEach(function(g){o=o.filter(function(_){var S=_.key,C=_.status;return S!==g||C!==rI}),o.forEach(function(_){_.key===g&&(_.status=nI)})}),o}var Lre=["component","children","onVisibleChanged","onAllRemoved"],Mre=["status"],Ure=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function Vre(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ic,o=function(a){Vu(u,a);var c=Fu(u);function u(){var d;va(this,u);for(var f=arguments.length,m=new Array(f),g=0;g<f;g++)m[g]=arguments[g];return d=c.call.apply(c,[this].concat(m)),Ne(Qt(d),"state",{keyEntities:[]}),Ne(Qt(d),"removeKey",function(_){var S=d.state.keyEntities,C=S.map(function(O){return O.key!==_?O:de(de({},O),{},{status:$T})});return d.setState({keyEntities:C}),C.filter(function(O){var I=O.status;return I!==$T}).length}),d}return Ea(u,[{key:"render",value:function(){var f=this,m=this.state.keyEntities,g=this.props,_=g.component,S=g.children,C=g.onVisibleChanged,O=g.onAllRemoved,I=Sn(g,Lre),A=_||b.Fragment,L={};return Ure.forEach(function(N){L[N]=I[N],delete I[N]}),delete I.keys,b.createElement(A,I,m.map(function(N){var P=N.status,D=Sn(N,Mre),U=P===tI||P===nI;return b.createElement(t,Be({},L,{key:D.key,visible:U,eventProps:D,onVisibleChanged:function(F){if(C==null||C(F,{key:D.key}),!F){var H=f.removeKey(D.key);H===0&&O&&O()}}}),S)}))}}],[{key:"getDerivedStateFromProps",value:function(f,m){var g=f.keys,_=m.keyEntities,S=iI(g),C=kre(_,S);return{keyEntities:C.filter(function(O){var I=_.find(function(A){var L=A.key;return O.key===L});return!(I&&I.status===$T&&O.status===rI)})}}}]),u}(b.Component);return Ne(o,"defaultProps",{component:"div"}),o}Vre(r8);const{isValidElement:ku}=av;function s8(e){return e&&ku(e)&&e.type===b.Fragment}function Fre(e,t,o){return ku(e)?b.cloneElement(e,typeof o=="function"?o(e.props||{}):o):t}function kl(e,t){return Fre(e,e,t)}function us(e){var t=b.useRef();t.current=e;var o=b.useCallback(function(){for(var a,c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return(a=t.current)===null||a===void 0?void 0:a.call.apply(a,[t].concat(u))},[]);return o}var ut={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var o=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||o>=ut.F1&&o<=ut.F12)return!1;switch(o){case ut.ALT:case ut.CAPS_LOCK:case ut.CONTEXT_MENU:case ut.CTRL:case ut.DOWN:case ut.END:case ut.ESC:case ut.HOME:case ut.INSERT:case ut.LEFT:case ut.MAC_FF_META:case ut.META:case ut.NUMLOCK:case ut.NUM_CENTER:case ut.PAGE_DOWN:case ut.PAGE_UP:case ut.PAUSE:case ut.PRINT_SCREEN:case ut.RIGHT:case ut.SHIFT:case ut.UP:case ut.WIN_KEY:case ut.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=ut.ZERO&&t<=ut.NINE||t>=ut.NUM_ZERO&&t<=ut.NUM_MULTIPLY||t>=ut.A&&t<=ut.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case ut.SPACE:case ut.QUESTION_MARK:case ut.NUM_PLUS:case ut.NUM_MINUS:case ut.NUM_PERIOD:case ut.NUM_DIVISION:case ut.SEMICOLON:case ut.DASH:case ut.EQUALS:case ut.COMMA:case ut.PERIOD:case ut.SLASH:case ut.APOSTROPHE:case ut.SINGLE_QUOTE:case ut.OPEN_SQUARE_BRACKET:case ut.BACKSLASH:case ut.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Bre={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const jre=Bre;var c8=function(t,o){return b.createElement(Hs,de(de({},t),{},{ref:o,icon:jre}))};c8.displayName="LoadingOutlined";const cV=b.forwardRef(c8);var rm=de({},xQ),Hre=rm.version,$re=rm.render,Wre=rm.unmountComponentAtNode,I_;try{var Gre=Number((Hre||"").split(".")[0]);Gre>=18&&(I_=rm.createRoot)}catch{}function lV(e){var t=rm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&Nn(t)==="object"&&(t.usingClientEntryPoint=e)}var Hv="__rc_react_root__";function zre(e,t){lV(!0);var o=t[Hv]||I_(t);lV(!1),o.render(e),t[Hv]=o}function Kre(e,t){$re(e,t)}function Yre(e,t){if(I_){zre(e,t);return}Kre(e,t)}function qre(e){return oI.apply(this,arguments)}function oI(){return oI=ju(_o().mark(function e(t){return _o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.resolve().then(function(){var c;(c=t[Hv])===null||c===void 0||c.unmount(),delete t[Hv]}));case 1:case"end":return a.stop()}},e)})),oI.apply(this,arguments)}function Xre(e){Wre(e)}function Jre(e){return aI.apply(this,arguments)}function aI(){return aI=ju(_o().mark(function e(t){return _o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(I_===void 0){a.next=2;break}return a.abrupt("return",qre(t));case 2:Xre(t);case 3:case"end":return a.stop()}},e)})),aI.apply(this,arguments)}const w_=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),o=t.width,a=t.height;if(o||a)return!0}if(e.getBoundingClientRect){var c=e.getBoundingClientRect(),u=c.width,d=c.height;if(u||d)return!0}}return!1},Qre=e=>{const{componentCls:t,colorPrimary:o}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${o})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}},Zre=Hu("Wave",e=>[Qre(e)]);function eie(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function WT(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&eie(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function tie(e){const{borderTopColor:t,borderColor:o,backgroundColor:a}=getComputedStyle(e);return WT(t)?t:WT(o)?o:WT(a)?a:null}function GT(e){return Number.isNaN(e)?0:e}const nie=e=>{const{className:t,target:o}=e,a=b.useRef(null),[c,u]=b.useState(null),[d,f]=b.useState([]),[m,g]=b.useState(0),[_,S]=b.useState(0),[C,O]=b.useState(0),[I,A]=b.useState(0),[L,N]=b.useState(!1),P={left:m,top:_,width:C,height:I,borderRadius:d.map(U=>`${U}px`).join(" ")};c&&(P["--wave-color"]=c);function D(){const U=getComputedStyle(o);u(tie(o));const B=U.position==="static",{borderLeftWidth:F,borderTopWidth:H}=U;g(B?o.offsetLeft:GT(-parseFloat(F))),S(B?o.offsetTop:GT(-parseFloat(H))),O(o.offsetWidth),A(o.offsetHeight);const{borderTopLeftRadius:K,borderTopRightRadius:te,borderBottomLeftRadius:Y,borderBottomRightRadius:Q}=U;f([K,te,Q,Y].map(J=>GT(parseFloat(J))))}return b.useEffect(()=>{if(o){const U=Ei(()=>{D(),N(!0)});let B;return typeof ResizeObserver<"u"&&(B=new ResizeObserver(D),B.observe(o)),()=>{Ei.cancel(U),B==null||B.disconnect()}}},[]),L?b.createElement(Ic,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(U,B)=>{var F;if(B.deadline||B.propertyName==="opacity"){const H=(F=a.current)===null||F===void 0?void 0:F.parentElement;Jre(H).then(()=>{H==null||H.remove()})}return!1}},U=>{let{className:B}=U;return b.createElement("div",{ref:a,className:lt(t,B),style:P})}):null};function rie(e,t){const o=document.createElement("div");o.style.position="absolute",o.style.left="0px",o.style.top="0px",e==null||e.insertBefore(o,e==null?void 0:e.firstChild),Yre(b.createElement(nie,{target:e,className:t}),o)}function iie(e,t){function o(){const a=e.current;rie(a,t)}return o}const oie=e=>{const{children:t,disabled:o}=e,{getPrefixCls:a}=b.useContext(Oi),c=b.useRef(null),u=a("wave"),[,d]=Zre(u),f=iie(c,lt(u,d));if(ht.useEffect(()=>{const g=c.current;if(!g||g.nodeType!==1||o)return;const _=S=>{S.target.tagName==="INPUT"||!w_(S.target)||!g.getAttribute||g.getAttribute("disabled")||g.disabled||g.className.includes("disabled")||g.className.includes("-leave")||f()};return g.addEventListener("click",_,!0),()=>{g.removeEventListener("click",_,!0)}},[o]),!ht.isValidElement(t))return t??null;const m=Uh(t)?Rc(t.ref,c):c;return kl(t,{ref:m})},aie=oie;globalThis&&globalThis.__rest;const l8=b.createContext(null),sie=(e,t)=>{const o=b.useContext(l8),a=b.useMemo(()=>{if(!o)return"";const{compactDirection:c,isFirstItem:u,isLastItem:d}=o,f=c==="vertical"?"-vertical-":"-";return lt({[`${e}-compact${f}item`]:!0,[`${e}-compact${f}first-item`]:u,[`${e}-compact${f}last-item`]:d,[`${e}-compact${f}item-rtl`]:t==="rtl"})},[e,t,o]);return{compactSize:o==null?void 0:o.compactSize,compactDirection:o==null?void 0:o.compactDirection,compactItemClassnames:a}},cie=e=>{let{children:t}=e;return b.createElement(l8.Provider,{value:null},t)},zT=()=>({width:0,opacity:0,transform:"scale(0)"}),KT=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),lie=e=>{let{prefixCls:t,loading:o,existIcon:a}=e;const c=!!o;return a?ht.createElement("span",{className:`${t}-loading-icon`},ht.createElement(cV,null)):ht.createElement(Ic,{visible:c,motionName:`${t}-loading-icon-motion`,removeOnLeave:!0,onAppearStart:zT,onAppearActive:KT,onEnterStart:zT,onEnterActive:KT,onLeaveStart:KT,onLeaveActive:zT},(u,d)=>{let{className:f,style:m}=u;return ht.createElement("span",{className:`${t}-loading-icon`,style:m,ref:d},ht.createElement(cV,{className:f}))})},uie=lie;var die=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const u8=b.createContext(void 0),hie=e=>{const{getPrefixCls:t,direction:o}=b.useContext(Oi),{prefixCls:a,size:c,className:u}=e,d=die(e,["prefixCls","size","className"]),f=t("btn-group",a),[,,m]=T_();let g="";switch(c){case"large":g="lg";break;case"small":g="sm";break}const _=lt(f,{[`${f}-${g}`]:g,[`${f}-rtl`]:o==="rtl"},u,m);return b.createElement(u8.Provider,{value:c},b.createElement("div",Object.assign({},d,{className:_})))},pie=hie,uV=/^[\u4e00-\u9fa5]{2}$/,sI=uV.test.bind(uV);function fie(e){return typeof e=="string"}function YT(e){return e==="text"||e==="link"}function mie(e,t){if(e==null)return;const o=t?" ":"";return typeof e!="string"&&typeof e!="number"&&fie(e.type)&&sI(e.props.children)?kl(e,{children:e.props.children.split("").join(o)}):typeof e=="string"?sI(e)?ht.createElement("span",null,e.split("").join(o)):ht.createElement("span",null,e):s8(e)?ht.createElement("span",null,e):e}function gie(e,t){let o=!1;const a=[];return ht.Children.forEach(e,c=>{const u=typeof c,d=u==="string"||u==="number";if(o&&d){const f=a.length-1,m=a[f];a[f]=`${m}${c}`}else a.push(c);o=d}),ht.Children.map(a,c=>mie(c,t))}const dV=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),vie=e=>{const{componentCls:t,fontSize:o,lineWidth:a,colorPrimaryHover:c,colorErrorHover:u}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:-a,[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,[`&:hover,
          &:focus,
          &:active`]:{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:o}},dV(`${t}-primary`,c),dV(`${t}-danger`,u)]}},Eie=vie;function _ie(e,t,o){const{focusElCls:a,focus:c,borderElCls:u}=o,d=u?"> *":"",f=["hover",c?"focus":null,"active"].filter(Boolean).map(m=>`&:${m} ${d}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:-e.lineWidth},"&-item":Object.assign(Object.assign({[f]:{zIndex:2}},a?{[`&${a}`]:{zIndex:2}}:{}),{[`&[disabled] ${d}`]:{zIndex:0}})}}function Sie(e,t,o){const{borderElCls:a}=o,c=a?`> ${a}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${c}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function d8(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:o}=e,a=`${o}-compact`;return{[a]:Object.assign(Object.assign({},_ie(e,a,t)),Sie(o,a,t))}}function yie(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:-e.lineWidth},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function Cie(e,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function Tie(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:Object.assign(Object.assign({},yie(e,t)),Cie(e.componentCls,t))}}const bie=e=>{const{componentCls:t,iconCls:o}=e;return{[t]:{outline:"none",position:"relative",display:"inline-block",fontWeight:400,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:`${e.lineWidth}px ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:e.lineHeight,color:e.colorText,"> span":{display:"inline-block"},[`> ${o} + span, > span + ${o}`]:{marginInlineStart:e.marginXS},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},$ne(e)),[`&-icon-only${t}-compact-item`]:{flex:"none"},[`&-compact-item${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:e.lineWidth,height:`calc(100% + ${e.lineWidth*2}px)`,backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-vertical-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:`calc(100% + ${e.lineWidth*2}px)`,height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},Cc=(e,t)=>({"&:not(:disabled)":{"&:hover":e,"&:active":t}}),Rie=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),Iie=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.controlHeight/2,paddingInlineEnd:e.controlHeight/2}),cI=e=>({cursor:"not-allowed",borderColor:e.colorBorder,color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,boxShadow:"none"}),$v=(e,t,o,a,c,u,d)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:t||void 0,backgroundColor:"transparent",borderColor:o||void 0,boxShadow:"none"},Cc(Object.assign({backgroundColor:"transparent"},u),Object.assign({backgroundColor:"transparent"},d))),{"&:disabled":{cursor:"not-allowed",color:a||void 0,borderColor:c||void 0}})}),qw=e=>({"&:disabled":Object.assign({},cI(e))}),h8=e=>Object.assign({},qw(e)),Wv=e=>({"&:disabled":{cursor:"not-allowed",color:e.colorTextDisabled}}),p8=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},h8(e)),{backgroundColor:e.colorBgContainer,borderColor:e.colorBorder,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`}),Cc({color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),$v(e.componentCls,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:e.colorError,borderColor:e.colorError},Cc({color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),$v(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),qw(e))}),wie=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},h8(e)),{color:e.colorTextLightSolid,backgroundColor:e.colorPrimary,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`}),Cc({color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryHover},{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryActive})),$v(e.componentCls,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({backgroundColor:e.colorError,boxShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`},Cc({backgroundColor:e.colorErrorHover},{backgroundColor:e.colorErrorActive})),$v(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),qw(e))}),Oie=e=>Object.assign(Object.assign({},p8(e)),{borderStyle:"dashed"}),Aie=e=>Object.assign(Object.assign(Object.assign({color:e.colorLink},Cc({color:e.colorLinkHover},{color:e.colorLinkActive})),Wv(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},Cc({color:e.colorErrorHover},{color:e.colorErrorActive})),Wv(e))}),Nie=e=>Object.assign(Object.assign(Object.assign({},Cc({color:e.colorText,backgroundColor:e.colorBgTextHover},{color:e.colorText,backgroundColor:e.colorBgTextActive})),Wv(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},Wv(e)),Cc({color:e.colorErrorHover,backgroundColor:e.colorErrorBg},{color:e.colorErrorHover,backgroundColor:e.colorErrorBg}))}),Pie=e=>Object.assign(Object.assign({},cI(e)),{[`&${e.componentCls}:hover`]:Object.assign({},cI(e))}),xie=e=>{const{componentCls:t}=e;return{[`${t}-default`]:p8(e),[`${t}-primary`]:wie(e),[`${t}-dashed`]:Oie(e),[`${t}-link`]:Aie(e),[`${t}-text`]:Nie(e),[`${t}-disabled`]:Pie(e)}},Xw=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:o,iconCls:a,controlHeight:c,fontSize:u,lineHeight:d,lineWidth:f,borderRadius:m,buttonPaddingHorizontal:g}=e,_=Math.max(0,(c-u*d)/2-f),S=g-f,C=`${o}-icon-only`;return[{[`${o}${t}`]:{fontSize:u,height:c,padding:`${_}px ${S}px`,borderRadius:m,[`&${C}`]:{width:c,paddingInlineStart:0,paddingInlineEnd:0,[`&${o}-round`]:{width:"auto"},"> span":{transform:"scale(1.143)"}},[`&${o}-loading`]:{opacity:e.opacityLoading,cursor:"default"},[`${o}-loading-icon`]:{transition:`width ${e.motionDurationSlow} ${e.motionEaseInOut}, opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`},[`&:not(${C}) ${o}-loading-icon > ${a}`]:{marginInlineEnd:e.marginXS}}},{[`${o}${o}-circle${t}`]:Rie(e)},{[`${o}${o}-round${t}`]:Iie(e)}]},Die=e=>Xw(e),kie=e=>{const t=fa(e,{controlHeight:e.controlHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:8,borderRadius:e.borderRadiusSM});return Xw(t,`${e.componentCls}-sm`)},Lie=e=>{const t=fa(e,{controlHeight:e.controlHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG});return Xw(t,`${e.componentCls}-lg`)},Mie=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},Uie=Hu("Button",e=>{const{controlTmpOutline:t,paddingContentHorizontal:o}=e,a=fa(e,{colorOutlineDefault:t,buttonPaddingHorizontal:o});return[bie(a),kie(a),Die(a),Lie(a),Mie(a),xie(a),Eie(a),d8(e),Tie(e)]});var Vie=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};function Fie(e){if(typeof e=="object"&&e){const t=e==null?void 0:e.delay;return{loading:!1,delay:!Number.isNaN(t)&&typeof t=="number"?t:0}}return{loading:!!e,delay:0}}const Bie=(e,t)=>{const{loading:o=!1,prefixCls:a,type:c="default",danger:u,shape:d="default",size:f,disabled:m,className:g,rootClassName:_,children:S,icon:C,ghost:O=!1,block:I=!1,htmlType:A="button"}=e,L=Vie(e,["loading","prefixCls","type","danger","shape","size","disabled","className","rootClassName","children","icon","ghost","block","htmlType"]),{getPrefixCls:N,autoInsertSpaceInButton:P,direction:D}=b.useContext(Oi),U=N("btn",a),[B,F]=Uie(U),H=b.useContext(tm),K=b.useContext(Gw),te=m??K,Y=b.useContext(u8),Q=b.useMemo(()=>Fie(o),[o]),[J,q]=b.useState(Q.loading),[ee,re]=b.useState(!1),me=Rc(t,b.createRef()),ue=b.Children.count(S)===1&&!C&&!YT(c);b.useEffect(()=>{let He=null;Q.delay>0?He=setTimeout(()=>{He=null,q(!0)},Q.delay):q(Q.loading);function ot(){He&&(clearTimeout(He),He=null)}return ot},[Q]),b.useEffect(()=>{if(!me||!me.current||P===!1)return;const He=me.current.textContent;ue&&sI(He)?ee||re(!0):ee&&re(!1)},[me]);const ve=He=>{const{onClick:ot}=e;if(J||te){He.preventDefault();return}ot==null||ot(He)},Ee=P!==!1,{compactSize:oe,compactItemClassnames:ae}=sie(U,D),he={large:"lg",small:"sm",middle:void 0},pe=oe||Y||f||H,Ae=pe&&he[pe]||"",Le=J?"loading":C,Qe=js(L,["navigate"]),je=Qe.href!==void 0&&te,Ut=lt(U,F,{[`${U}-${d}`]:d!=="default"&&d,[`${U}-${c}`]:c,[`${U}-${Ae}`]:Ae,[`${U}-icon-only`]:!S&&S!==0&&!!Le,[`${U}-background-ghost`]:O&&!YT(c),[`${U}-loading`]:J,[`${U}-two-chinese-chars`]:ee&&Ee&&!J,[`${U}-block`]:I,[`${U}-dangerous`]:!!u,[`${U}-rtl`]:D==="rtl",[`${U}-disabled`]:je},ae,g,_),Nt=C&&!J?C:ht.createElement(uie,{existIcon:!!C,prefixCls:U,loading:!!J}),at=S||S===0?gie(S,ue&&Ee):null;if(Qe.href!==void 0)return B(ht.createElement("a",Object.assign({},Qe,{className:Ut,onClick:ve,ref:me}),Nt,at));let Ht=ht.createElement("button",Object.assign({},L,{type:A,className:Ut,onClick:ve,disabled:te,ref:me}),Nt,at);return YT(c)||(Ht=ht.createElement(aie,{disabled:!!J},Ht)),B(Ht)},Jw=b.forwardRef(Bie);Jw.Group=pie;Jw.__ANT_BUTTON=!0;const io=Jw,qT=()=>({height:0,opacity:0}),hV=e=>{const{scrollHeight:t}=e;return{height:t,opacity:1}},jie=e=>({height:e?e.offsetHeight:0}),XT=(e,t)=>(t==null?void 0:t.deadline)===!0||t.propertyName==="height",Hie=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:qT,onEnterStart:qT,onAppearActive:hV,onEnterActive:hV,onLeaveStart:jie,onLeaveActive:qT,onAppearEnd:XT,onEnterEnd:XT,onLeaveEnd:XT,motionDeadline:500}},$ie=(e,t,o)=>o!==void 0?o:`${e}-${t}`,Wie=Hie;var f8=b.createContext(null),Sr=Ho()?b.useLayoutEffect:b.useEffect,pV=function(t,o){var a=b.useRef(!0);Sr(function(){if(!a.current)return t()},o),Sr(function(){return a.current=!1,function(){a.current=!0}},[])},fV=[];function Gie(e,t){var o=b.useState(function(){if(!Ho())return null;var I=document.createElement("div");return I}),a=xe(o,1),c=a[0],u=b.useRef(!1),d=b.useContext(f8),f=b.useState(fV),m=xe(f,2),g=m[0],_=m[1],S=d||(u.current?void 0:function(I){_(function(A){var L=[I].concat(ft(A));return L})});function C(){c.parentElement||document.body.appendChild(c),u.current=!0}function O(){var I;(I=c.parentElement)===null||I===void 0||I.removeChild(c),u.current=!1}return Sr(function(){return e?d?d(C):C():O(),O},[e]),Sr(function(){g.length&&(g.forEach(function(I){return I()}),_(fV))},[g]),[c,S]}var JT;function zie(e){if(typeof document>"u")return 0;if(e||JT===void 0){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var o=document.createElement("div"),a=o.style;a.position="absolute",a.top="0",a.left="0",a.pointerEvents="none",a.visibility="hidden",a.width="200px",a.height="150px",a.overflow="hidden",o.appendChild(t),document.body.appendChild(o);var c=t.offsetWidth;o.style.overflow="scroll";var u=t.offsetWidth;c===u&&(u=o.clientWidth),document.body.removeChild(o),JT=c-u}return JT}function Kie(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Yie="rc-util-locker-".concat(Date.now()),mV=0;function qie(e){var t=!!e,o=b.useState(function(){return mV+=1,"".concat(Yie,"_").concat(mV)}),a=xe(o,1),c=a[0];Sr(function(){if(t){var u=zie(),d=Kie();Ah(`
html body {
  overflow-y: hidden;
  `.concat(d?"width: calc(100% - ".concat(u,"px);"):"",`
}`),c)}else Uv(c);return function(){Uv(c)}},[t,c])}var gV=!1;function Xie(e){return typeof e=="boolean"&&(gV=e),gV}var vV=function(t){return t===!1?!1:!Ho()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},m8=b.forwardRef(function(e,t){var o=e.open,a=e.autoLock,c=e.getContainer;e.debug;var u=e.autoDestroy,d=u===void 0?!0:u,f=e.children,m=b.useState(o),g=xe(m,2),_=g[0],S=g[1],C=_||o;b.useEffect(function(){(d||o)&&S(o)},[o,d]);var O=b.useState(function(){return vV(c)}),I=xe(O,2),A=I[0],L=I[1];b.useEffect(function(){var Q=vV(c);L(Q??null)});var N=Gie(C&&!A),P=xe(N,2),D=P[0],U=P[1],B=A??D;qie(a&&o&&Ho()&&(B===D||B===document.body));var F=null;if(f&&Uh(f)&&t){var H=f;F=H.ref}var K=Dw(F,t);if(!C||!Ho()||A===void 0)return null;var te=B===!1||Xie(),Y=f;return t&&(Y=b.cloneElement(f,{ref:K})),b.createElement(f8.Provider,{value:U},te?Y:gc.createPortal(Y,B))});function Jie(){var e=de({},av);return e.useId}var EV=0;function Qie(e){var t=b.useState("ssr-id"),o=xe(t,2),a=o[0],c=o[1],u=Jie(),d=u==null?void 0:u();return b.useEffect(function(){if(!u){var f=EV;EV+=1,c("rc_unique_".concat(f))}},[]),e||d||a}const Zie=b.createContext({});var g8=function(t){if(Ho()&&window.document.documentElement){var o=Array.isArray(t)?t:[t],a=window.document.documentElement;return o.some(function(c){return c in a.style})}return!1},eoe=function(t,o){if(!g8(t))return!1;var a=document.createElement("div"),c=a.style[t];return a.style[t]=o,a.style[t]!==c};function _V(e,t){return!Array.isArray(e)&&t!==void 0?eoe(e,t):g8(e)}const toe=e=>({animationDuration:e,animationFillMode:"both"}),noe=e=>({animationDuration:e,animationFillMode:"both"}),v8=function(e,t,o,a){const u=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${u}${e}-enter,
      ${u}${e}-appear
    `]:Object.assign(Object.assign({},toe(a)),{animationPlayState:"paused"}),[`${u}${e}-leave`]:Object.assign(Object.assign({},noe(a)),{animationPlayState:"paused"}),[`
      ${u}${e}-enter${e}-enter-active,
      ${u}${e}-appear${e}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${u}${e}-leave${e}-leave-active`]:{animationName:o,animationPlayState:"running",pointerEvents:"none"}}},roe=new ai("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),ioe=new ai("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),ooe=new ai("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),aoe=new ai("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),soe=new ai("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),coe=new ai("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),loe=new ai("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),uoe=new ai("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),doe={"slide-up":{inKeyframes:roe,outKeyframes:ioe},"slide-down":{inKeyframes:ooe,outKeyframes:aoe},"slide-left":{inKeyframes:soe,outKeyframes:coe},"slide-right":{inKeyframes:loe,outKeyframes:uoe}},SV=(e,t)=>{const{antCls:o}=e,a=`${o}-${t}`,{inKeyframes:c,outKeyframes:u}=doe[t];return[v8(a,c,u,e.motionDurationMid),{[`
      ${a}-enter,
      ${a}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,["&-prepare"]:{transform:"scale(1)"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]},hoe=new ai("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),poe=new ai("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),yV=new ai("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),CV=new ai("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),foe=new ai("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),moe=new ai("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),goe=new ai("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),voe=new ai("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),Eoe=new ai("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),_oe=new ai("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),Soe=new ai("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),yoe=new ai("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),Coe={zoom:{inKeyframes:hoe,outKeyframes:poe},"zoom-big":{inKeyframes:yV,outKeyframes:CV},"zoom-big-fast":{inKeyframes:yV,outKeyframes:CV},"zoom-left":{inKeyframes:goe,outKeyframes:voe},"zoom-right":{inKeyframes:Eoe,outKeyframes:_oe},"zoom-up":{inKeyframes:foe,outKeyframes:moe},"zoom-down":{inKeyframes:Soe,outKeyframes:yoe}},E8=(e,t)=>{const{antCls:o}=e,a=`${o}-${t}`,{inKeyframes:c,outKeyframes:u}=Coe[t];return[v8(a,c,u,t==="zoom-big-fast"?e.motionDurationFast:e.motionDurationMid),{[`
        ${a}-enter,
        ${a}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},Toe=e=>({[e.componentCls]:{[`${e.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}},[`${e.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}}}),boe=Toe;function QT(e){return e!==void 0}function wl(e,t){var o=t||{},a=o.defaultValue,c=o.value,u=o.onChange,d=o.postState,f=wu(function(){return QT(c)?c:QT(a)?typeof a=="function"?a():a:typeof e=="function"?e():e}),m=xe(f,2),g=m[0],_=m[1],S=c!==void 0?c:g,C=d?d(S):S,O=us(u),I=wu([S]),A=xe(I,2),L=A[0],N=A[1];pV(function(){var D=L[0];g!==D&&O(g,D)},[L]),pV(function(){QT(c)||_(c)},[c]);var P=us(function(D,U){_(D,U),N([S],U)});return[C,P]}const _8=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var Roe=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Bd=void 0;function Ioe(e,t){var o=e.prefixCls,a=e.invalidate,c=e.item,u=e.renderItem,d=e.responsive,f=e.responsiveDisabled,m=e.registerSize,g=e.itemKey,_=e.className,S=e.style,C=e.children,O=e.display,I=e.order,A=e.component,L=A===void 0?"div":A,N=Sn(e,Roe),P=d&&!O;function D(K){m(g,K)}b.useEffect(function(){return function(){D(null)}},[]);var U=u&&c!==Bd?u(c):C,B;a||(B={opacity:P?0:1,height:P?0:Bd,overflowY:P?"hidden":Bd,order:d?I:Bd,pointerEvents:P?"none":Bd,position:P?"absolute":Bd});var F={};P&&(F["aria-hidden"]=!0);var H=b.createElement(L,Be({className:lt(!a&&o,_),style:de(de({},B),S)},F,N,{ref:t}),U);return d&&(H=b.createElement(Bu,{onResize:function(te){var Y=te.offsetWidth;D(Y)},disabled:f},H)),H}var vf=b.forwardRef(Ioe);vf.displayName="Item";function woe(e){if(typeof MessageChannel>"u")Ei(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}function Ooe(){var e=b.useRef(null),t=function(a){e.current||(e.current=[],woe(function(){gc.unstable_batchedUpdates(function(){e.current.forEach(function(c){c()}),e.current=null})})),e.current.push(a)};return t}function Bp(e,t){var o=b.useState(t),a=xe(o,2),c=a[0],u=a[1],d=us(function(f){e(function(){u(f)})});return[c,d]}var Aoe=["component"],Noe=["className"],Poe=["className"],xoe=function(t,o){var a=b.useContext(Gv);if(!a){var c=t.component,u=c===void 0?"div":c,d=Sn(t,Aoe);return b.createElement(u,Be({},d,{ref:o}))}var f=a.className,m=Sn(a,Noe),g=t.className,_=Sn(t,Poe);return b.createElement(Gv.Provider,{value:null},b.createElement(vf,Be({ref:o,className:lt(f,g)},m,_)))},S8=b.forwardRef(xoe);S8.displayName="RawItem";var Doe=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],Gv=b.createContext(null),y8="responsive",C8="invalidate";function koe(e){return"+ ".concat(e.length," ...")}function Loe(e,t){var o=e.prefixCls,a=o===void 0?"rc-overflow":o,c=e.data,u=c===void 0?[]:c,d=e.renderItem,f=e.renderRawItem,m=e.itemKey,g=e.itemWidth,_=g===void 0?10:g,S=e.ssr,C=e.style,O=e.className,I=e.maxCount,A=e.renderRest,L=e.renderRawRest,N=e.suffix,P=e.component,D=P===void 0?"div":P,U=e.itemComponent,B=e.onVisibleChange,F=Sn(e,Doe),H=S==="full",K=Ooe(),te=Bp(K,null),Y=xe(te,2),Q=Y[0],J=Y[1],q=Q||0,ee=Bp(K,new Map),re=xe(ee,2),le=re[0],me=re[1],ue=Bp(K,0),ve=xe(ue,2),Ee=ve[0],oe=ve[1],ae=Bp(K,0),he=xe(ae,2),pe=he[0],Ae=he[1],Le=Bp(K,0),Qe=xe(Le,2),je=Qe[0],Ut=Qe[1],Nt=b.useState(null),at=xe(Nt,2),Ht=at[0],He=at[1],ot=b.useState(null),It=xe(ot,2),tn=It[0],xt=It[1],Xe=b.useMemo(function(){return tn===null&&H?Number.MAX_SAFE_INTEGER:tn||0},[tn,Q]),$e=b.useState(!1),ze=xe($e,2),tt=ze[0],mt=ze[1],Dt="".concat(a,"-item"),lr=Math.max(Ee,pe),yn=I===y8,rn=u.length&&yn,an=I===C8,si=rn||typeof I=="number"&&u.length>I,ur=b.useMemo(function(){var vt=u;return rn?Q===null&&H?vt=u:vt=u.slice(0,Math.min(u.length,q/_)):typeof I=="number"&&(vt=u.slice(0,I)),vt},[u,_,Q,I,rn]),sn=b.useMemo(function(){return rn?u.slice(Xe+1):u.slice(ur.length)},[u,ur,rn,Xe]),kt=b.useCallback(function(vt,Yt){var cn;return typeof m=="function"?m(vt):(cn=m&&(vt==null?void 0:vt[m]))!==null&&cn!==void 0?cn:Yt},[m]),vn=b.useCallback(d||function(vt){return vt},[d]);function En(vt,Yt,cn){tn===vt&&(Yt===void 0||Yt===Ht)||(xt(vt),cn||(mt(vt<u.length-1),B==null||B(vt)),Yt!==void 0&&He(Yt))}function pn(vt,Yt){J(Yt.clientWidth)}function In(vt,Yt){me(function(cn){var dr=new Map(cn);return Yt===null?dr.delete(vt):dr.set(vt,Yt),dr})}function so(vt,Yt){Ae(Yt),oe(pe)}function Gi(vt,Yt){Ut(Yt)}function Mr(vt){return le.get(kt(ur[vt],vt))}Sr(function(){if(q&&typeof lr=="number"&&ur){var vt=je,Yt=ur.length,cn=Yt-1;if(!Yt){En(0,null);return}for(var dr=0;dr<Yt;dr+=1){var Vr=Mr(dr);if(H&&(Vr=Vr||0),Vr===void 0){En(dr-1,void 0,!0);break}if(vt+=Vr,cn===0&&vt<=q||dr===cn-1&&vt+Mr(cn)<=q){En(cn,null);break}else if(vt+lr>q){En(dr-1,vt-Vr-je+pe);break}}N&&Mr(0)+je>q&&He(null)}},[q,le,pe,je,kt,ur]);var Ni=tt&&!!sn.length,qe={};Ht!==null&&rn&&(qe={position:"absolute",left:Ht,top:0});var dt={prefixCls:Dt,responsive:rn,component:U,invalidate:an},wn=f?function(vt,Yt){var cn=kt(vt,Yt);return b.createElement(Gv.Provider,{key:cn,value:de(de({},dt),{},{order:Yt,item:vt,itemKey:cn,registerSize:In,display:Yt<=Xe})},f(vt,Yt))}:function(vt,Yt){var cn=kt(vt,Yt);return b.createElement(vf,Be({},dt,{order:Yt,key:cn,item:vt,renderItem:vn,itemKey:cn,registerSize:In,display:Yt<=Xe}))},Vt,Ur={order:Ni?Xe:Number.MAX_SAFE_INTEGER,className:"".concat(Dt,"-rest"),registerSize:so,display:Ni};if(L)L&&(Vt=b.createElement(Gv.Provider,{value:de(de({},dt),Ur)},L(sn)));else{var Cr=A||koe;Vt=b.createElement(vf,Be({},dt,Ur),typeof Cr=="function"?Cr(sn):Cr)}var Ln=b.createElement(D,Be({className:lt(!an&&a,O),style:C,ref:t},F),ur.map(wn),si?Vt:null,N&&b.createElement(vf,Be({},dt,{responsive:yn,responsiveDisabled:!rn,order:Xe,className:"".concat(Dt,"-suffix"),registerSize:Gi,display:!0,style:qe}),N));return yn&&(Ln=b.createElement(Bu,{onResize:pn,disabled:!rn},Ln)),Ln}var mc=b.forwardRef(Loe);mc.displayName="Overflow";mc.Item=S8;mc.RESPONSIVE=y8;mc.INVALIDATE=C8;var TV=b.createContext(null);function bV(e){return e?Array.isArray(e)?e:[e]:[]}function Moe(e,t,o,a){return b.useMemo(function(){var c=bV(o??t),u=bV(a??t),d=new Set(c),f=new Set(u);return e&&(d.has("hover")&&(d.delete("hover"),d.add("click")),f.has("hover")&&(f.delete("hover"),f.add("click"))),[d,f]},[e,t,o,a])}function Uoe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;return o?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function Voe(e,t,o,a){for(var c=o.points,u=Object.keys(e),d=0;d<u.length;d+=1){var f,m=u[d];if(Uoe((f=e[m])===null||f===void 0?void 0:f.points,c,a))return"".concat(t,"-placement-").concat(m)}return""}function RV(e,t,o,a){return t||(o?{motionName:"".concat(e,"-").concat(o)}:a?{motionName:a}:null)}function im(e){return e.ownerDocument.defaultView}function lI(e){for(var t=[],o=e==null?void 0:e.parentElement,a=["hidden","scroll","auto"];o;){var c=im(o).getComputedStyle(o),u=c.overflowX,d=c.overflowY;(a.includes(u)||a.includes(d))&&t.push(o),o=o.parentElement}return t}function zv(e){return Number.isNaN(e)?1:e}function Foe(e,t){var o=de({},e);return(t||[]).forEach(function(a){if(!(a instanceof HTMLBodyElement)){var c=im(a).getComputedStyle(a),u=c.position;if(u!=="static"){var d=a.getBoundingClientRect(),f=a.offsetHeight,m=a.clientHeight,g=a.offsetWidth,_=a.clientWidth,S=zv(Math.round(d.width/g*1e3)/1e3),C=zv(Math.round(d.height/f*1e3)/1e3),O=(g-_)*S,I=(f-m)*C,A=d.x+d.width-O,L=d.y+d.height-I;o.left=Math.max(o.left,d.x),o.top=Math.max(o.top,d.y),o.right=Math.min(o.right,A),o.bottom=Math.min(o.bottom,L)}}}),o}function IV(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function jd(e,t){var o=t[0],a=t[1],c,u;return o==="t"?u=e.y:o==="b"?u=e.y+e.height:u=e.y+e.height/2,a==="l"?c=e.x:a==="r"?c=e.x+e.width:c=e.x+e.width/2,{x:c,y:u}}function al(e,t){var o={t:"b",b:"t",l:"r",r:"l"};return e.map(function(a,c){return c===t?o[a]||"c":a}).join("")}function Boe(e,t,o,a,c,u,d){var f=b.useState({ready:!1,offsetX:0,offsetY:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:c[a]||{}}),m=xe(f,2),g=m[0],_=m[1],S=b.useRef(0),C=b.useMemo(function(){return t?lI(t):[]},[t]),O=b.useRef({}),I=function(){O.current={}};e||I();var A=us(function(){if(t&&o&&e){let Wo=function(er,Ca){var _s=Y.x+er,Ys=Y.y+Ca,Ul=_s+ae,Vl=Ys+oe,Nc=Math.max(_s,Ae.left),Fl=Math.max(Ys,Ae.top),Yn=Math.min(Ul,Ae.right),Cn=Math.min(Vl,Ae.bottom);return Math.max(0,(Yn-Nc)*(Cn-Fl))},Ks=function(){Ur=Y.y+vn,Cr=Ur+oe,Ln=Y.x+kt,vt=Ln+ae};var ya=Wo,ui=Ks,P=t,D=P.style.left,U=P.style.top,B=P.ownerDocument,F=im(P),H=de(de({},c[a]),u);P.style.left="0",P.style.top="0";var K;if(Array.isArray(o))K={x:o[0],y:o[1],width:0,height:0};else{var te=o.getBoundingClientRect();K={x:te.x,y:te.y,width:te.width,height:te.height}}var Y=P.getBoundingClientRect(),Q=F.getComputedStyle(P),J=Q.width,q=Q.height,ee=B.documentElement,re=ee.clientWidth,le=ee.clientHeight,me=ee.scrollWidth,ue=ee.scrollHeight,ve=ee.scrollTop,Ee=ee.scrollLeft,oe=Y.height,ae=Y.width,he=K.height,pe=K.width,Ae=H.htmlRegion==="scroll"?{left:-Ee,top:-ve,right:me-Ee,bottom:ue-ve}:{left:0,top:0,right:re,bottom:le};Ae=Foe(Ae,C),P.style.left=D,P.style.top=U;var Le=zv(Math.round(ae/parseFloat(J)*1e3)/1e3),Qe=zv(Math.round(oe/parseFloat(q)*1e3)/1e3);if(Le===0||Qe===0||Dv(o)&&!w_(o))return;var je=H.offset,Ut=H.targetOffset,Nt=je||[],at=xe(Nt,2),Ht=at[0],He=Ht===void 0?0:Ht,ot=at[1],It=ot===void 0?0:ot,tn=Ut||[],xt=xe(tn,2),Xe=xt[0],$e=Xe===void 0?0:Xe,ze=xt[1],tt=ze===void 0?0:ze;K.x+=$e,K.y+=tt;var mt=H.points||[],Dt=xe(mt,2),lr=Dt[0],yn=Dt[1],rn=IV(yn),an=IV(lr),si=jd(K,rn),ur=jd(Y,an),sn=de({},H),kt=si.x-ur.x+He,vn=si.y-ur.y+It,En=Wo(kt,vn),pn=jd(K,["t","l"]),In=jd(Y,["t","l"]),so=jd(K,["b","r"]),Gi=jd(Y,["b","r"]),Mr=H.overflow||{},Ni=Mr.adjustX,qe=Mr.adjustY,dt=Mr.shiftX,wn=Mr.shiftY,Vt=function(Ca){return typeof Ca=="boolean"?Ca:Ca>=0},Ur,Cr,Ln,vt;Ks();var Yt=Vt(qe),cn=an[0]===rn[0];if(Yt&&an[0]==="t"&&(Cr>Ae.bottom||O.current.bt)){var dr=vn;cn?dr-=oe-he:dr=pn.y-Gi.y-It,Wo(kt,dr)>=En?(O.current.bt=!0,vn=dr,sn.points=[al(an,0),al(rn,0)]):O.current.bt=!1}if(Yt&&an[0]==="b"&&(Ur<Ae.top||O.current.tb)){var Vr=vn;cn?Vr+=oe-he:Vr=so.y-In.y-It,Wo(kt,Vr)>=En?(O.current.tb=!0,vn=Vr,sn.points=[al(an,0),al(rn,0)]):O.current.tb=!1}var Ir=Vt(Ni),ci=an[1]===rn[1];if(Ir&&an[1]==="l"&&(vt>Ae.right||O.current.rl)){var Si=kt;ci?Si-=ae-pe:Si=pn.x-Gi.x-He,Wo(Si,vn)>=En?(O.current.rl=!0,kt=Si,sn.points=[al(an,1),al(rn,1)]):O.current.rl=!1}if(Ir&&an[1]==="r"&&(Ln<Ae.left||O.current.lr)){var To=kt;ci?To+=ae-pe:To=so.x-In.x-He,Wo(To,vn)>=En?(O.current.lr=!0,kt=To,sn.points=[al(an,1),al(rn,1)]):O.current.lr=!1}Ks();var co=dt===!0?0:dt;typeof co=="number"&&(Ln<Ae.left&&(kt-=Ln-Ae.left,K.x+pe<Ae.left+co&&(kt+=K.x-Ae.left+pe-co)),vt>Ae.right&&(kt-=vt-Ae.right,K.x>Ae.right-co&&(kt+=K.x-Ae.right+co)));var li=wn===!0?0:wn;typeof li=="number"&&(Ur<Ae.top&&(vn-=Ur-Ae.top,K.y+he<Ae.top+li&&(vn+=K.y-Ae.top+he-li)),Cr>Ae.bottom&&(vn-=Cr-Ae.bottom,K.y>Ae.bottom-li&&(vn+=K.y-Ae.bottom+li)));var Ga=Y.x+kt,lo=Ga+ae,vs=Y.y+vn,Ws=vs+oe,xr=K.x,Gs=xr+pe,wc=K.y,uo=wc+he,Ll=Math.max(Ga,xr),zs=Math.min(lo,Gs),Oc=(Ll+zs)/2,za=Oc-Ga,Es=Math.max(vs,wc),Ml=Math.min(Ws,uo),Ac=(Es+Ml)/2,Ka=Ac-vs;d==null||d(t,sn),_({ready:!0,offsetX:kt/Le,offsetY:vn/Qe,arrowX:za/Le,arrowY:Ka/Qe,scaleX:Le,scaleY:Qe,align:sn})}}),L=function(){S.current+=1;var D=S.current;Promise.resolve().then(function(){S.current===D&&A()})},N=function(){_(function(D){return de(de({},D),{},{ready:!1})})};return Sr(N,[a]),Sr(function(){e||N()},[e]),[g.ready,g.offsetX,g.offsetY,g.arrowX,g.arrowY,g.scaleX,g.scaleY,g.align,L]}function joe(e,t,o,a){Sr(function(){if(e&&t&&o){let S=function(){a()};var _=S,c=t,u=o,d=lI(c),f=lI(u),m=im(u),g=new Set([m].concat(ft(d),ft(f)));return g.forEach(function(C){C.addEventListener("scroll",S,{passive:!0})}),m.addEventListener("resize",S,{passive:!0}),a(),function(){g.forEach(function(C){C.removeEventListener("scroll",S),m.removeEventListener("resize",S)})}}},[e,t,o])}function Hoe(e){var t=e.prefixCls,o=e.align,a=e.arrow,c=a||{},u=c.x,d=u===void 0?0:u,f=c.y,m=f===void 0?0:f,g=c.className,_=b.useRef();if(!o||!o.points)return null;var S={position:"absolute"};if(o.autoArrow!==!1){var C=o.points[0],O=o.points[1],I=C[0],A=C[1],L=O[0],N=O[1];I===L||!["t","b"].includes(I)?S.top=m:I==="t"?S.top=0:S.bottom=0,A===N||!["l","r"].includes(A)?S.left=d:A==="l"?S.left=0:S.right=0}return b.createElement("div",{ref:_,className:lt("".concat(t,"-arrow"),g),style:S})}function $oe(e){var t=e.prefixCls,o=e.open,a=e.zIndex,c=e.mask,u=e.motion;return c?React.createElement(Ic,Be({},u,{motionAppear:!0,visible:o,removeOnLeave:!0}),function(d){var f=d.className;return React.createElement("div",{style:{zIndex:a},className:lt("".concat(t,"-mask"),f)})}):null}var Woe=b.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),Goe=b.forwardRef(function(e,t){var o=e.popup,a=e.className,c=e.prefixCls,u=e.style,d=e.target,f=e.onVisibleChanged,m=e.open,g=e.keepDom,_=e.onClick,S=e.mask,C=e.arrow,O=e.align,I=e.motion,A=e.maskMotion,L=e.forceRender,N=e.getPopupContainer,P=e.autoDestroy,D=e.portal,U=e.zIndex,B=e.onMouseEnter,F=e.onMouseLeave,H=e.ready,K=e.offsetX,te=e.offsetY,Y=e.onAlign,Q=e.onPrepare,J=e.stretch,q=e.targetWidth,ee=e.targetHeight,re=typeof o=="function"?o():o,le=m||g,me=(N==null?void 0:N.length)>0,ue=b.useState(!N||!me),ve=xe(ue,2),Ee=ve[0],oe=ve[1];if(Sr(function(){!Ee&&me&&d&&oe(!0)},[Ee,me,d]),!Ee)return null;var ae=H||!m?{left:K,top:te}:{left:"-1000vw",top:"-1000vh"},he={};return J&&(J.includes("height")&&ee?he.height=ee:J.includes("minHeight")&&ee&&(he.minHeight=ee),J.includes("width")&&q?he.width=q:J.includes("minWidth")&&q&&(he.minWidth=q)),m||(he.pointerEvents="none"),b.createElement(D,{open:L||le,getContainer:N&&function(){return N(d)},autoDestroy:P},b.createElement($oe,{prefixCls:c,open:m,zIndex:U,mask:S,motion:A}),b.createElement(Bu,{onResize:Y,disabled:!m},function(pe){return b.createElement(Ic,Be({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:L,leavedClassName:"".concat(c,"-hidden")},I,{onAppearPrepare:Q,onEnterPrepare:Q,visible:m,onVisibleChanged:function(Le){var Qe;I==null||(Qe=I.onVisibleChanged)===null||Qe===void 0||Qe.call(I,Le),f(Le)}}),function(Ae,Le){var Qe=Ae.className,je=Ae.style,Ut=lt(c,Qe,a);return b.createElement("div",{ref:Rc(pe,t,Le),className:Ut,style:de(de(de(de({},ae),he),je),{},{boxSizing:"border-box",zIndex:U},u),onMouseEnter:B,onMouseLeave:F,onClick:_},C&&b.createElement(Hoe,{prefixCls:c,arrow:C,align:O}),b.createElement(Woe,{cache:!m},re))})}))}),zoe=b.forwardRef(function(e,t){var o=e.children,a=e.getTriggerDOMNode,c=Uh(o),u=b.useCallback(function(f){xw(t,a?a(f):f)},[a]),d=Dw(u,o.ref);return c?b.cloneElement(o,{ref:d}):o}),Koe=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function Yoe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m8,t=b.forwardRef(function(o,a){var c=o.prefixCls,u=c===void 0?"rc-trigger-popup":c,d=o.children,f=o.action,m=f===void 0?"hover":f,g=o.showAction,_=o.hideAction,S=o.popupVisible,C=o.defaultPopupVisible,O=o.onPopupVisibleChange,I=o.afterPopupVisibleChange,A=o.mouseEnterDelay,L=o.mouseLeaveDelay,N=L===void 0?.1:L,P=o.focusDelay,D=o.blurDelay,U=o.mask,B=o.maskClosable,F=B===void 0?!0:B,H=o.getPopupContainer,K=o.forceRender,te=o.autoDestroy,Y=o.destroyPopupOnHide,Q=o.popup,J=o.popupClassName,q=o.popupStyle,ee=o.popupPlacement,re=o.builtinPlacements,le=re===void 0?{}:re,me=o.popupAlign,ue=o.zIndex,ve=o.stretch,Ee=o.getPopupClassNameFromAlign,oe=o.alignPoint,ae=o.onPopupClick,he=o.onPopupAlign,pe=o.arrow,Ae=o.popupMotion,Le=o.maskMotion,Qe=o.popupTransitionName,je=o.popupAnimation,Ut=o.maskTransitionName,Nt=o.maskAnimation,at=o.className,Ht=o.getTriggerDOMNode,He=Sn(o,Koe),ot=te||Y||!1,It=b.useState(!1),tn=xe(It,2),xt=tn[0],Xe=tn[1];Sr(function(){Xe(_8())},[]);var $e=b.useRef({}),ze=b.useContext(TV),tt=b.useMemo(function(){return{registerSubPopup:function(Lt,Pn){$e.current[Lt]=Pn,ze==null||ze.registerSubPopup(Lt,Pn)}}},[ze]),mt=Qie(),Dt=b.useState(null),lr=xe(Dt,2),yn=lr[0],rn=lr[1],an=us(function(pt){Dv(pt)&&yn!==pt&&rn(pt),ze==null||ze.registerSubPopup(mt,pt)}),si=b.useState(null),ur=xe(si,2),sn=ur[0],kt=ur[1],vn=us(function(pt){Dv(pt)&&sn!==pt&&kt(pt)}),En=b.Children.only(d),pn=(En==null?void 0:En.props)||{},In={},so=us(function(pt){var Lt,Pn,$n=sn;return($n==null?void 0:$n.contains(pt))||($n==null||(Lt=$n.getRootNode())===null||Lt===void 0?void 0:Lt.host)===pt||pt===$n||(yn==null?void 0:yn.contains(pt))||(yn==null||(Pn=yn.getRootNode())===null||Pn===void 0?void 0:Pn.host)===pt||pt===yn||Object.values($e.current).some(function(fn){return(fn==null?void 0:fn.contains(pt))||pt===fn})}),Gi=RV(u,Ae,je,Qe),Mr=RV(u,Le,Nt,Ut),Ni=b.useState(C||!1),qe=xe(Ni,2),dt=qe[0],wn=qe[1],Vt=S??dt,Ur=us(function(pt){S===void 0&&wn(pt)});Sr(function(){wn(S||!1)},[S]);var Cr=b.useRef(Vt);Cr.current=Vt;var Ln=us(function(pt){Vt!==pt&&(Ur(pt),O==null||O(pt))}),vt=b.useRef(),Yt=function(){clearTimeout(vt.current)},cn=function(Lt){var Pn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Yt(),Pn===0?Ln(Lt):vt.current=setTimeout(function(){Ln(Lt)},Pn*1e3)};b.useEffect(function(){return Yt},[]);var dr=b.useState(!1),Vr=xe(dr,2),Ir=Vr[0],ci=Vr[1],Si=b.useRef(!0);Sr(function(){(!Si.current||Vt)&&ci(!0),Si.current=!0},[Vt]);var To=b.useState(null),co=xe(To,2),li=co[0],Ga=co[1],lo=b.useState([0,0]),vs=xe(lo,2),Ws=vs[0],xr=vs[1],Gs=function(Lt){xr([Lt.clientX,Lt.clientY])},wc=Boe(Vt,yn,oe?Ws:sn,ee,le,me,he),uo=xe(wc,9),Ll=uo[0],zs=uo[1],Oc=uo[2],za=uo[3],Es=uo[4],Ml=uo[5],Ac=uo[6],Ka=uo[7],ya=uo[8],ui=us(function(){Ir||ya()});joe(Vt,sn,yn,ui),Sr(function(){ui()},[Ws]),Sr(function(){Vt&&!(le!=null&&le[ee])&&ui()},[JSON.stringify(me)]);var Wo=b.useMemo(function(){var pt=Voe(le,u,Ka,oe);return lt(pt,Ee==null?void 0:Ee(Ka))},[Ka,Ee,le,u,oe]);b.useImperativeHandle(a,function(){return{forceAlign:ui}});var Ks=function(Lt){ci(!1),ya(),I==null||I(Lt)},er=function(){return new Promise(function(Lt){Ga(function(){return Lt})})};Sr(function(){li&&(ya(),li(),Ga(null))},[li]);var Ca=b.useState(0),_s=xe(Ca,2),Ys=_s[0],Ul=_s[1],Vl=b.useState(0),Nc=xe(Vl,2),Fl=Nc[0],Yn=Nc[1],Cn=function(Lt,Pn){if(ui(),ve){var $n=Pn.getBoundingClientRect();Ul($n.width),Yn($n.height)}},qn=Moe(xt,m,g,_),Dr=xe(qn,2),Fr=Dr[0],zi=Dr[1],Ta=function(Lt,Pn,$n,fn){In[Lt]=function(Bl){var xc;fn==null||fn(Bl),cn(Pn,$n);for(var qs=arguments.length,Dc=new Array(qs>1?qs-1:0),jl=1;jl<qs;jl++)Dc[jl-1]=arguments[jl];(xc=pn[Lt])===null||xc===void 0||xc.call.apply(xc,[pn,Bl].concat(Dc))}},Pc=Fr.has("click"),zu=zi.has("click")||zi.has("contextMenu");(Pc||zu)&&(In.onClick=function(pt){var Lt;Cr.current&&zu?cn(!1):!Cr.current&&Pc&&(Gs(pt),cn(!0));for(var Pn=arguments.length,$n=new Array(Pn>1?Pn-1:0),fn=1;fn<Pn;fn++)$n[fn-1]=arguments[fn];(Lt=pn.onClick)===null||Lt===void 0||Lt.call.apply(Lt,[pn,pt].concat($n))}),b.useEffect(function(){if(zu&&yn&&(!U||F)){var pt=!1,Lt=function(qs){var Dc=qs.target;pt=so(Dc)},Pn=function(qs){var Dc=qs.target;Cr.current&&!pt&&!so(Dc)&&cn(!1)},$n=im(yn),fn=sn==null?void 0:sn.getRootNode();$n.addEventListener("mousedown",Lt),$n.addEventListener("click",Pn);var Bl=fn&&fn!==sn.ownerDocument;return Bl&&(fn.addEventListener("mousedown",Lt),fn.addEventListener("click",Pn)),function(){$n.removeEventListener("mousedown",Lt),$n.removeEventListener("click",Pn),Bl&&(fn.removeEventListener("mousedown",Lt),fn.removeEventListener("click",Pn))}}},[zu,sn,yn,U,F]);var fm=Fr.has("hover"),H_=zi.has("hover"),mm,gm;fm&&(Ta("onMouseEnter",!0,A,function(pt){Gs(pt)}),mm=function(){cn(!0,A)},oe&&(In.onMouseMove=function(pt){var Lt;(Lt=pn.onMouseMove)===null||Lt===void 0||Lt.call(pn,pt)})),H_&&(Ta("onMouseLeave",!1,N),gm=function(){cn(!1,N)}),Fr.has("focus")&&Ta("onFocus",!0,P),zi.has("focus")&&Ta("onBlur",!1,D),Fr.has("contextMenu")&&(In.onContextMenu=function(pt){var Lt;Gs(pt),cn(!0),pt.preventDefault();for(var Pn=arguments.length,$n=new Array(Pn>1?Pn-1:0),fn=1;fn<Pn;fn++)$n[fn-1]=arguments[fn];(Lt=pn.onContextMenu)===null||Lt===void 0||Lt.call.apply(Lt,[pn,pt].concat($n))}),at&&(In.className=lt(pn.className,at));var Yh=de(de({},pn),In),vm={},$_=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];$_.forEach(function(pt){He[pt]&&(vm[pt]=function(){for(var Lt,Pn=arguments.length,$n=new Array(Pn),fn=0;fn<Pn;fn++)$n[fn]=arguments[fn];(Lt=Yh[pt])===null||Lt===void 0||Lt.call.apply(Lt,[Yh].concat($n)),He[pt].apply(He,$n)})});var W_=b.cloneElement(En,de(de({},Yh),vm)),G_=pe?de(de({},pe!==!0?pe:{}),{},{x:za,y:Es}):null;return b.createElement(b.Fragment,null,b.createElement(Bu,{disabled:!Vt,ref:vn,onResize:Cn},b.createElement(zoe,{getTriggerDOMNode:Ht},W_)),b.createElement(TV.Provider,{value:tt},b.createElement(Goe,{portal:e,ref:an,prefixCls:u,popup:Q,className:lt(J,Wo),style:q,target:sn,onMouseEnter:mm,onMouseLeave:gm,zIndex:ue,open:Vt,keepDom:Ir,onClick:ae,mask:U,motion:Gi,maskMotion:Mr,onVisibleChanged:Ks,onPrepare:er,forceRender:K,autoDestroy:ot,getPopupContainer:H,align:Ka,arrow:G_,ready:Ll,offsetX:zs,offsetY:Oc,onAlign:ui,stretch:ve,targetWidth:Ys/Ml,targetHeight:Fl/Ac})))});return t}const qoe=Yoe(m8);function wV(e,t,o){return lt({[`${e}-status-success`]:t==="success",[`${e}-status-warning`]:t==="warning",[`${e}-status-error`]:t==="error",[`${e}-status-validating`]:t==="validating",[`${e}-has-feedback`]:o})}const Xoe=(e,t)=>t||e;var Joe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const Qoe=Joe;var T8=function(t,o){return b.createElement(Hs,de(de({},t),{},{ref:o,icon:Qoe}))};T8.displayName="CheckOutlined";const Zoe=b.forwardRef(T8);var Hd={shiftX:64,adjustY:1},$d={adjustX:1,shiftY:!0},La=[0,0],eae={left:{points:["cr","cl"],overflow:$d,offset:[-4,0],targetOffset:La},right:{points:["cl","cr"],overflow:$d,offset:[4,0],targetOffset:La},top:{points:["bc","tc"],overflow:Hd,offset:[0,-4],targetOffset:La},bottom:{points:["tc","bc"],overflow:Hd,offset:[0,4],targetOffset:La},topLeft:{points:["bl","tl"],overflow:Hd,offset:[0,-4],targetOffset:La},leftTop:{points:["tr","tl"],overflow:$d,offset:[-4,0],targetOffset:La},topRight:{points:["br","tr"],overflow:Hd,offset:[0,-4],targetOffset:La},rightTop:{points:["tl","tr"],overflow:$d,offset:[4,0],targetOffset:La},bottomRight:{points:["tr","br"],overflow:Hd,offset:[0,4],targetOffset:La},rightBottom:{points:["bl","br"],overflow:$d,offset:[4,0],targetOffset:La},bottomLeft:{points:["tl","bl"],overflow:Hd,offset:[0,4],targetOffset:La},leftBottom:{points:["br","bl"],overflow:$d,offset:[-4,0],targetOffset:La}};function b8(e){var t=e.children,o=e.prefixCls,a=e.id,c=e.overlayInnerStyle,u=e.className,d=e.style;return b.createElement("div",{className:lt("".concat(o,"-content"),u),style:d},b.createElement("div",{className:"".concat(o,"-inner"),id:a,role:"tooltip",style:c},typeof t=="function"?t():t))}var tae=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],nae=function(t,o){var a=t.overlayClassName,c=t.trigger,u=c===void 0?["hover"]:c,d=t.mouseEnterDelay,f=d===void 0?0:d,m=t.mouseLeaveDelay,g=m===void 0?.1:m,_=t.overlayStyle,S=t.prefixCls,C=S===void 0?"rc-tooltip":S,O=t.children,I=t.onVisibleChange,A=t.afterVisibleChange,L=t.transitionName,N=t.animation,P=t.motion,D=t.placement,U=D===void 0?"right":D,B=t.align,F=B===void 0?{}:B,H=t.destroyTooltipOnHide,K=H===void 0?!1:H,te=t.defaultVisible,Y=t.getTooltipContainer,Q=t.overlayInnerStyle;t.arrowContent;var J=t.overlay,q=t.id,ee=t.showArrow,re=ee===void 0?!0:ee,le=Sn(t,tae),me=b.useRef(null);b.useImperativeHandle(o,function(){return me.current});var ue=de({},le);"visible"in t&&(ue.popupVisible=t.visible);var ve=function(){return b.createElement(b8,{key:"content",prefixCls:C,id:q,overlayInnerStyle:Q},J)};return b.createElement(qoe,Be({popupClassName:a,prefixCls:C,popup:ve,action:u,builtinPlacements:eae,popupPlacement:U,ref:me,popupAlign:F,getPopupContainer:Y,onPopupVisibleChange:I,afterPopupVisibleChange:A,popupTransitionName:L,popupAnimation:N,popupMotion:P,defaultPopupVisible:te,autoDestroy:K,mouseLeaveDelay:g,popupStyle:_,mouseEnterDelay:f,arrow:re},ue),O)};const rae=b.forwardRef(nae),sl=(e,t)=>new Fi(e).setAlpha(t).toRgbString(),Wd=(e,t)=>new Fi(e).lighten(t).toHexString(),iae=e=>{const t=yc(e,{theme:"dark"});return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[6],6:t[5],7:t[4],8:t[6],9:t[5],10:t[4]}},oae=(e,t)=>{const o=e||"#000",a=t||"#fff";return{colorBgBase:o,colorTextBase:a,colorText:sl(a,.85),colorTextSecondary:sl(a,.65),colorTextTertiary:sl(a,.45),colorTextQuaternary:sl(a,.25),colorFill:sl(a,.18),colorFillSecondary:sl(a,.12),colorFillTertiary:sl(a,.08),colorFillQuaternary:sl(a,.04),colorBgElevated:Wd(o,12),colorBgContainer:Wd(o,8),colorBgLayout:Wd(o,0),colorBgSpotlight:Wd(o,26),colorBorder:Wd(o,26),colorBorderSecondary:Wd(o,19)}},aae=(e,t)=>{const o=Object.keys(Ww).map(c=>{const u=yc(e[c],{theme:"dark"});return new Array(10).fill(1).reduce((d,f,m)=>(d[`${c}-${m+1}`]=u[m],d[`${c}${m+1}`]=u[m],d),{})}).reduce((c,u)=>(c=Object.assign(Object.assign({},c),u),c),{}),a=t??y_(e);return Object.assign(Object.assign(Object.assign({},a),o),Mj(e,{generateColorPalettes:iae,generateNeutralColorPalettes:oae}))},sae=aae;function cae(e){const{sizeUnit:t,sizeStep:o}=e,a=o-2;return{sizeXXL:t*(a+10),sizeXL:t*(a+6),sizeLG:t*(a+2),sizeMD:t*(a+2),sizeMS:t*(a+1),size:t*a,sizeSM:t*a,sizeXS:t*(a-1),sizeXXS:t*(a-1)}}const lae=(e,t)=>{const o=t??y_(e),a=o.fontSizeSM,c=o.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o),cae(t??e)),Uj(a)),{controlHeight:c}),Lj(Object.assign(Object.assign({},o),{controlHeight:c})))},uae=lae;function dae(){const[e,t,o]=T_();return{theme:e,token:t,hashId:o}}const hae={defaultConfig:jv,defaultSeed:jv.token,useToken:dae,defaultAlgorithm:y_,darkAlgorithm:sae,compactAlgorithm:uae},R8=8;function I8(e){const t=R8,{contentRadius:o,limitVerticalRadius:a}=e,c=o>12?o+2:12;return{dropdownArrowOffset:c,dropdownArrowOffsetVertical:a?t:c}}function bg(e,t){return e?t:{}}function pae(e,t){const{componentCls:o,sizePopupArrow:a,borderRadiusXS:c,borderRadiusOuter:u,boxShadowPopoverArrow:d}=e,{colorBg:f,contentRadius:m=e.borderRadiusLG,limitVerticalRadius:g,arrowDistance:_=0,arrowPlacement:S={left:!0,right:!0,top:!0,bottom:!0}}=t,{dropdownArrowOffsetVertical:C,dropdownArrowOffset:O}=I8({contentRadius:m,limitVerticalRadius:g});return{[o]:Object.assign(Object.assign(Object.assign(Object.assign({[`${o}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},Fne(a,c,u,f,d)),{"&:before":{background:f}})]},bg(!!S.top,{[[`&-placement-top ${o}-arrow`,`&-placement-topLeft ${o}-arrow`,`&-placement-topRight ${o}-arrow`].join(",")]:{bottom:_,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${o}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${o}-arrow`]:{left:{_skip_check_:!0,value:O}},[`&-placement-topRight ${o}-arrow`]:{right:{_skip_check_:!0,value:O}}})),bg(!!S.bottom,{[[`&-placement-bottom ${o}-arrow`,`&-placement-bottomLeft ${o}-arrow`,`&-placement-bottomRight ${o}-arrow`].join(",")]:{top:_,transform:"translateY(-100%)"},[`&-placement-bottom ${o}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${o}-arrow`]:{left:{_skip_check_:!0,value:O}},[`&-placement-bottomRight ${o}-arrow`]:{right:{_skip_check_:!0,value:O}}})),bg(!!S.left,{[[`&-placement-left ${o}-arrow`,`&-placement-leftTop ${o}-arrow`,`&-placement-leftBottom ${o}-arrow`].join(",")]:{right:{_skip_check_:!0,value:_},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${o}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${o}-arrow`]:{top:C},[`&-placement-leftBottom ${o}-arrow`]:{bottom:C}})),bg(!!S.right,{[[`&-placement-right ${o}-arrow`,`&-placement-rightTop ${o}-arrow`,`&-placement-rightBottom ${o}-arrow`].join(",")]:{left:{_skip_check_:!0,value:_},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${o}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${o}-arrow`]:{top:C},[`&-placement-rightBottom ${o}-arrow`]:{bottom:C}}))}}function fae(e,t,o,a){if(a===!1)return{adjustX:!1,adjustY:!1};const c=a&&typeof a=="object"?a:{},u={};switch(e){case"top":case"bottom":u.shiftX=t.dropdownArrowOffset*2+o;break;case"left":case"right":u.shiftY=t.dropdownArrowOffsetVertical*2+o;break}const d=Object.assign(Object.assign({},u),c);return d.shiftX||(d.adjustX=!0),d.shiftY||(d.adjustY=!0),d}const OV={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},mae={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},gae=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function vae(e){const{arrowWidth:t,autoAdjustOverflow:o,arrowPointAtCenter:a,offset:c,borderRadius:u}=e,d=t/2,f={};return Object.keys(OV).forEach(m=>{const g=a&&mae[m]||OV[m],_=Object.assign(Object.assign({},g),{offset:[0,0]});switch(f[m]=_,gae.has(m)&&(_.autoArrow=!1),m){case"top":case"topLeft":case"topRight":_.offset[1]=-d-c;break;case"bottom":case"bottomLeft":case"bottomRight":_.offset[1]=d+c;break;case"left":case"leftTop":case"leftBottom":_.offset[0]=-d-c;break;case"right":case"rightTop":case"rightBottom":_.offset[0]=d+c;break}const S=I8({contentRadius:u,limitVerticalRadius:!0});if(a)switch(m){case"topLeft":case"bottomLeft":_.offset[0]=-S.dropdownArrowOffset-d;break;case"topRight":case"bottomRight":_.offset[0]=S.dropdownArrowOffset+d;break;case"leftTop":case"rightTop":_.offset[1]=-S.dropdownArrowOffset-d;break;case"leftBottom":case"rightBottom":_.offset[1]=S.dropdownArrowOffset+d;break}_.overflow=fae(m,S,t,o)}),f}const Eae=e=>{const{componentCls:t,tooltipMaxWidth:o,tooltipColor:a,tooltipBg:c,tooltipBorderRadius:u,zIndexPopup:d,controlHeight:f,boxShadowSecondary:m,paddingSM:g,paddingXS:_,tooltipRadiusOuter:S}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},C_(e)),{position:"absolute",zIndex:d,display:"block",width:"max-content",maxWidth:o,visibility:"visible","&-hidden":{display:"none"},"--antd-arrow-background-color":c,[`${t}-inner`]:{minWidth:f,minHeight:f,padding:`${g/2}px ${_}px`,color:a,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:c,borderRadius:u,boxShadow:m},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${t}-inner`]:{borderRadius:Math.min(u,R8)}},[`${t}-content`]:{position:"relative"}}),zne(e,(C,O)=>{let{darkColor:I}=O;return{[`&${t}-${C}`]:{[`${t}-inner`]:{backgroundColor:I},[`${t}-arrow`]:{"--antd-arrow-background-color":I}}}})),{"&-rtl":{direction:"rtl"}})},pae(fa(e,{borderRadiusOuter:S}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:u,limitVerticalRadius:!0}),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},w8=(e,t)=>Hu("Tooltip",a=>{if(t===!1)return[];const{borderRadius:c,colorTextLightSolid:u,colorBgDefault:d,borderRadiusOuter:f}=a,m=fa(a,{tooltipMaxWidth:250,tooltipColor:u,tooltipBorderRadius:c,tooltipBg:d,tooltipRadiusOuter:f>4?4:f});return[Eae(m),E8(a,"zoom-big-fast")]},a=>{let{zIndexPopupBase:c,colorBgSpotlight:u}=a;return{zIndexPopup:c+70,colorBgDefault:u}})(e),_ae=Bv.map(e=>`${e}-inverse`);function Sae(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(ft(_ae),ft(Bv)).includes(e):Bv.includes(e)}function O8(e,t){const o=Sae(t),a=lt({[`${e}-${t}`]:t&&o}),c={},u={};return t&&!o&&(c.background=t,u["--antd-arrow-background-color"]=t),{className:a,overlayStyle:c,arrowStyle:u}}function yae(e){const{prefixCls:t,className:o,placement:a="top",title:c,color:u,overlayInnerStyle:d}=e,{getPrefixCls:f}=b.useContext(Oi),m=f("tooltip",t),[g,_]=w8(m,!0),S=O8(m,u),C=Object.assign(Object.assign({},d),S.overlayStyle),O=S.arrowStyle;return g(b.createElement("div",{className:lt(_,m,`${m}-pure`,`${m}-placement-${a}`,o,S.className),style:O},b.createElement("div",{className:`${m}-arrow`}),b.createElement(b8,Object.assign({},e,{className:_,prefixCls:m,overlayInnerStyle:C}),c)))}var Cae=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const{useToken:Tae}=hae,bae=(e,t)=>{const o={},a=Object.assign({},e);return t.forEach(c=>{e&&c in e&&(o[c]=e[c],delete a[c])}),{picked:o,omitted:a}};function Rae(e,t){const o=e.type;if((o.__ANT_BUTTON===!0||e.type==="button")&&e.props.disabled||o.__ANT_SWITCH===!0&&(e.props.disabled||e.props.loading)||o.__ANT_RADIO===!0&&e.props.disabled){const{picked:a,omitted:c}=bae(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),u=Object.assign(Object.assign({display:"inline-block"},a),{cursor:"not-allowed",width:e.props.block?"100%":void 0}),d=Object.assign(Object.assign({},c),{pointerEvents:"none"}),f=kl(e,{style:d,className:null});return b.createElement("span",{style:u,className:lt(e.props.className,`${t}-disabled-compatible-wrapper`)},f)}return e}const A8=b.forwardRef((e,t)=>{var o,a;const{prefixCls:c,openClassName:u,getTooltipContainer:d,overlayClassName:f,color:m,overlayInnerStyle:g,children:_,afterOpenChange:S,afterVisibleChange:C,destroyTooltipOnHide:O,arrow:I=!0,title:A,overlay:L,builtinPlacements:N,arrowPointAtCenter:P=!1,autoAdjustOverflow:D=!0}=e,U=!!I,{token:B}=Tae(),{getPopupContainer:F,getPrefixCls:H,direction:K}=b.useContext(Oi),te=b.useRef(null),Y=()=>{var $e;($e=te.current)===null||$e===void 0||$e.forceAlign()};b.useImperativeHandle(t,()=>({forceAlign:Y,forcePopupAlign:()=>{Y()}}));const[Q,J]=wl(!1,{value:(o=e.open)!==null&&o!==void 0?o:e.visible,defaultValue:(a=e.defaultOpen)!==null&&a!==void 0?a:e.defaultVisible}),q=!A&&!L&&A!==0,ee=$e=>{var ze,tt;J(q?!1:$e),q||((ze=e.onOpenChange)===null||ze===void 0||ze.call(e,$e),(tt=e.onVisibleChange)===null||tt===void 0||tt.call(e,$e))},re=b.useMemo(()=>{var $e,ze;let tt=P;return typeof I=="object"&&(tt=(ze=($e=I.pointAtCenter)!==null&&$e!==void 0?$e:I.arrowPointAtCenter)!==null&&ze!==void 0?ze:P),N||vae({arrowPointAtCenter:tt,autoAdjustOverflow:D,arrowWidth:U?B.sizePopupArrow:0,borderRadius:B.borderRadius,offset:B.marginXXS})},[P,I,N,B]),le=($e,ze)=>{const tt=Object.keys(re).find(mt=>{var Dt,lr;return re[mt].points[0]===((Dt=ze.points)===null||Dt===void 0?void 0:Dt[0])&&re[mt].points[1]===((lr=ze.points)===null||lr===void 0?void 0:lr[1])});if(tt){const mt=$e.getBoundingClientRect(),Dt={top:"50%",left:"50%"};/top|Bottom/.test(tt)?Dt.top=`${mt.height-ze.offset[1]}px`:/Top|bottom/.test(tt)&&(Dt.top=`${-ze.offset[1]}px`),/left|Right/.test(tt)?Dt.left=`${mt.width-ze.offset[0]}px`:/right|Left/.test(tt)&&(Dt.left=`${-ze.offset[0]}px`),$e.style.transformOrigin=`${Dt.left} ${Dt.top}`}},me=b.useMemo(()=>A===0?A:L||A||"",[L,A]),ue=b.createElement(cie,null,typeof me=="function"?me():me),{getPopupContainer:ve,placement:Ee="top",mouseEnterDelay:oe=.1,mouseLeaveDelay:ae=.1,overlayStyle:he,rootClassName:pe}=e,Ae=Cae(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),Le=H("tooltip",c),Qe=H(),je=e["data-popover-inject"];let Ut=Q;!("open"in e)&&!("visible"in e)&&q&&(Ut=!1);const Nt=Rae(ku(_)&&!s8(_)?_:b.createElement("span",null,_),Le),at=Nt.props,Ht=!at.className||typeof at.className=="string"?lt(at.className,{[u||`${Le}-open`]:!0}):at.className,[He,ot]=w8(Le,!je),It=O8(Le,m),tn=Object.assign(Object.assign({},g),It.overlayStyle),xt=It.arrowStyle,Xe=lt(f,{[`${Le}-rtl`]:K==="rtl"},It.className,pe,ot);return He(b.createElement(rae,Object.assign({},Ae,{showArrow:U,placement:Ee,mouseEnterDelay:oe,mouseLeaveDelay:ae,prefixCls:Le,overlayClassName:Xe,overlayStyle:Object.assign(Object.assign({},xt),he),getTooltipContainer:ve||d||F,ref:te,builtinPlacements:re,overlay:ue,visible:Ut,onVisibleChange:ee,afterVisibleChange:S??C,onPopupAlign:le,overlayInnerStyle:tn,arrowContent:b.createElement("span",{className:`${Le}-arrow-content`}),motion:{motionName:$ie(Qe,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!O}),Ut?kl(Nt,{className:Ht}):Nt))});A8._InternalPanelDoNotUseOrYouWillBeFired=yae;const Kv=A8;var Iae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};const wae=Iae;var N8=function(t,o){return b.createElement(Hs,de(de({},t),{},{ref:o,icon:wae}))};N8.displayName="RightOutlined";const AV=b.forwardRef(N8);var Oae=b.forwardRef(function(e,t){var o=e.didUpdate,a=e.getContainer,c=e.children,u=b.useRef(),d=b.useRef();b.useImperativeHandle(t,function(){return{}});var f=b.useRef(!1);return!f.current&&Ho()&&(d.current=a(),u.current=d.current.parentNode,f.current=!0),b.useEffect(function(){o==null||o(e)}),b.useEffect(function(){return d.current.parentNode===null&&u.current!==null&&u.current.appendChild(d.current),function(){var m,g;(m=d.current)===null||m===void 0||(g=m.parentNode)===null||g===void 0||g.removeChild(d.current)}},[]),d.current?wh.createPortal(c,d.current):null});function Aae(e,t,o){return o?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function Nae(e,t,o){var a=e[t]||{};return de(de({},a),o)}function Pae(e,t,o,a){for(var c=o.points,u=Object.keys(e),d=0;d<u.length;d+=1){var f=u[d];if(Aae(e[f].points,c,a))return"".concat(t,"-placement-").concat(f)}return""}function P8(e){var t=e.prefixCls,o=e.motion,a=e.animation,c=e.transitionName;return o||(a?{motionName:"".concat(t,"-").concat(a)}:c?{motionName:c}:null)}function xae(e){var t=e.prefixCls,o=e.visible,a=e.zIndex,c=e.mask,u=e.maskMotion,d=e.maskAnimation,f=e.maskTransitionName;if(!c)return null;var m={};return(u||f||d)&&(m=de({motionAppear:!0},P8({motion:u,prefixCls:t,transitionName:f,animation:d}))),b.createElement(Ic,Be({},m,{visible:o,removeOnLeave:!0}),function(g){var _=g.className;return b.createElement("div",{style:{zIndex:a},className:lt("".concat(t,"-mask"),_)})})}function NV(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),o.push.apply(o,a)}return o}function PV(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?NV(Object(o),!0).forEach(function(a){Dae(e,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):NV(Object(o)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))})}return e}function uI(e){return uI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uI(e)}function Dae(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var jp,kae={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function Yv(){if(jp!==void 0)return jp;jp="";var e=document.createElement("p").style,t="Transform";for(var o in kae)o+t in e&&(jp=o);return jp}function x8(){return Yv()?"".concat(Yv(),"TransitionProperty"):"transitionProperty"}function O_(){return Yv()?"".concat(Yv(),"Transform"):"transform"}function xV(e,t){var o=x8();o&&(e.style[o]=t,o!=="transitionProperty"&&(e.style.transitionProperty=t))}function ZT(e,t){var o=O_();o&&(e.style[o]=t,o!=="transform"&&(e.style.transform=t))}function Lae(e){return e.style.transitionProperty||e.style[x8()]}function Mae(e){var t=window.getComputedStyle(e,null),o=t.getPropertyValue("transform")||t.getPropertyValue(O_());if(o&&o!=="none"){var a=o.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(a[12]||a[4],0),y:parseFloat(a[13]||a[5],0)}}return{x:0,y:0}}var Uae=/matrix\((.*)\)/,Vae=/matrix3d\((.*)\)/;function Fae(e,t){var o=window.getComputedStyle(e,null),a=o.getPropertyValue("transform")||o.getPropertyValue(O_());if(a&&a!=="none"){var c,u=a.match(Uae);if(u)u=u[1],c=u.split(",").map(function(f){return parseFloat(f,10)}),c[4]=t.x,c[5]=t.y,ZT(e,"matrix(".concat(c.join(","),")"));else{var d=a.match(Vae)[1];c=d.split(",").map(function(f){return parseFloat(f,10)}),c[12]=t.x,c[13]=t.y,ZT(e,"matrix3d(".concat(c.join(","),")"))}}else ZT(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}var Bae=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,om;function DV(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function Eh(e,t,o){var a=o;if(uI(t)==="object"){for(var c in t)t.hasOwnProperty(c)&&Eh(e,c,t[c]);return}if(typeof a<"u"){typeof a=="number"&&(a="".concat(a,"px")),e.style[t]=a;return}return om(e,t)}function jae(e){var t,o,a,c=e.ownerDocument,u=c.body,d=c&&c.documentElement;return t=e.getBoundingClientRect(),o=Math.floor(t.left),a=Math.floor(t.top),o-=d.clientLeft||u.clientLeft||0,a-=d.clientTop||u.clientTop||0,{left:o,top:a}}function D8(e,t){var o=e["page".concat(t?"Y":"X","Offset")],a="scroll".concat(t?"Top":"Left");if(typeof o!="number"){var c=e.document;o=c.documentElement[a],typeof o!="number"&&(o=c.body[a])}return o}function k8(e){return D8(e)}function L8(e){return D8(e,!0)}function Wf(e){var t=jae(e),o=e.ownerDocument,a=o.defaultView||o.parentWindow;return t.left+=k8(a),t.top+=L8(a),t}function Qw(e){return e!=null&&e==e.window}function M8(e){return Qw(e)?e.document:e.nodeType===9?e:e.ownerDocument}function Hae(e,t,o){var a=o,c="",u=M8(e);return a=a||u.defaultView.getComputedStyle(e,null),a&&(c=a.getPropertyValue(t)||a[t]),c}var $ae=new RegExp("^(".concat(Bae,")(?!px)[a-z%]+$"),"i"),Wae=/^(top|right|bottom|left)$/,eb="currentStyle",tb="runtimeStyle",du="left",Gae="px";function zae(e,t){var o=e[eb]&&e[eb][t];if($ae.test(o)&&!Wae.test(t)){var a=e.style,c=a[du],u=e[tb][du];e[tb][du]=e[eb][du],a[du]=t==="fontSize"?"1em":o||0,o=a.pixelLeft+Gae,a[du]=c,e[tb][du]=u}return o===""?"auto":o}typeof window<"u"&&(om=window.getComputedStyle?Hae:zae);function Rg(e,t){return e==="left"?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function kV(e){if(e==="left")return"right";if(e==="right")return"left";if(e==="top")return"bottom";if(e==="bottom")return"top"}function LV(e,t,o){Eh(e,"position")==="static"&&(e.style.position="relative");var a=-999,c=-999,u=Rg("left",o),d=Rg("top",o),f=kV(u),m=kV(d);u!=="left"&&(a=999),d!=="top"&&(c=999);var g="",_=Wf(e);("left"in t||"top"in t)&&(g=Lae(e)||"",xV(e,"none")),"left"in t&&(e.style[f]="",e.style[u]="".concat(a,"px")),"top"in t&&(e.style[m]="",e.style[d]="".concat(c,"px")),DV(e);var S=Wf(e),C={};for(var O in t)if(t.hasOwnProperty(O)){var I=Rg(O,o),A=O==="left"?a:c,L=_[O]-S[O];I===O?C[I]=A+L:C[I]=A-L}Eh(e,C),DV(e),("left"in t||"top"in t)&&xV(e,g);var N={};for(var P in t)if(t.hasOwnProperty(P)){var D=Rg(P,o),U=t[P]-_[P];P===D?N[D]=C[D]+U:N[D]=C[D]-U}Eh(e,N)}function Kae(e,t){var o=Wf(e),a=Mae(e),c={x:a.x,y:a.y};"left"in t&&(c.x=a.x+t.left-o.left),"top"in t&&(c.y=a.y+t.top-o.top),Fae(e,c)}function Yae(e,t,o){if(o.ignoreShake){var a=Wf(e),c=a.left.toFixed(0),u=a.top.toFixed(0),d=t.left.toFixed(0),f=t.top.toFixed(0);if(c===d&&u===f)return}o.useCssRight||o.useCssBottom?LV(e,t,o):o.useCssTransform&&O_()in document.body.style?Kae(e,t):LV(e,t,o)}function Zw(e,t){for(var o=0;o<e.length;o++)t(e[o])}function U8(e){return om(e,"boxSizing")==="border-box"}var qae=["margin","border","padding"],dI=-1,Xae=2,hI=1,Jae=0;function Qae(e,t,o){var a={},c=e.style,u;for(u in t)t.hasOwnProperty(u)&&(a[u]=c[u],c[u]=t[u]);o.call(e);for(u in t)t.hasOwnProperty(u)&&(c[u]=a[u])}function ef(e,t,o){var a=0,c,u,d;for(u=0;u<t.length;u++)if(c=t[u],c)for(d=0;d<o.length;d++){var f=void 0;c==="border"?f="".concat(c).concat(o[d],"Width"):f=c+o[d],a+=parseFloat(om(e,f))||0}return a}var Ls={getParent:function(t){var o=t;do o.nodeType===11&&o.host?o=o.host:o=o.parentNode;while(o&&o.nodeType!==1&&o.nodeType!==9);return o}};Zw(["Width","Height"],function(e){Ls["doc".concat(e)]=function(t){var o=t.document;return Math.max(o.documentElement["scroll".concat(e)],o.body["scroll".concat(e)],Ls["viewport".concat(e)](o))},Ls["viewport".concat(e)]=function(t){var o="client".concat(e),a=t.document,c=a.body,u=a.documentElement,d=u[o];return a.compatMode==="CSS1Compat"&&d||c&&c[o]||d}});function MV(e,t,o){var a=o;if(Qw(e))return t==="width"?Ls.viewportWidth(e):Ls.viewportHeight(e);if(e.nodeType===9)return t==="width"?Ls.docWidth(e):Ls.docHeight(e);var c=t==="width"?["Left","Right"]:["Top","Bottom"],u=Math.floor(t==="width"?e.getBoundingClientRect().width:e.getBoundingClientRect().height),d=U8(e),f=0;(u==null||u<=0)&&(u=void 0,f=om(e,t),(f==null||Number(f)<0)&&(f=e.style[t]||0),f=Math.floor(parseFloat(f))||0),a===void 0&&(a=d?hI:dI);var m=u!==void 0||d,g=u||f;return a===dI?m?g-ef(e,["border","padding"],c):f:m?a===hI?g:g+(a===Xae?-ef(e,["border"],c):ef(e,["margin"],c)):f+ef(e,qae.slice(a),c)}var Zae={position:"absolute",visibility:"hidden",display:"block"};function UV(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var a,c=t[0];return c.offsetWidth!==0?a=MV.apply(void 0,t):Qae(c,Zae,function(){a=MV.apply(void 0,t)}),a}Zw(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);Ls["outer".concat(t)]=function(a,c){return a&&UV(a,e,c?Jae:hI)};var o=e==="width"?["Left","Right"]:["Top","Bottom"];Ls[e]=function(a,c){var u=c;if(u!==void 0){if(a){var d=U8(a);return d&&(u+=ef(a,["padding","border"],o)),Eh(a,e,u)}return}return a&&UV(a,e,dI)}});function V8(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}var jt={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var o=t.ownerDocument||t;return o.defaultView||o.parentWindow},getDocument:M8,offset:function(t,o,a){if(typeof o<"u")Yae(t,o,a||{});else return Wf(t)},isWindow:Qw,each:Zw,css:Eh,clone:function(t){var o,a={};for(o in t)t.hasOwnProperty(o)&&(a[o]=t[o]);var c=t.overflow;if(c)for(o in t)t.hasOwnProperty(o)&&(a.overflow[o]=t.overflow[o]);return a},mix:V8,getWindowScrollLeft:function(t){return k8(t)},getWindowScrollTop:function(t){return L8(t)},merge:function(){for(var t={},o=0;o<arguments.length;o++)jt.mix(t,o<0||arguments.length<=o?void 0:arguments[o]);return t},viewportWidth:0,viewportHeight:0};V8(jt,Ls);var nb=jt.getParent;function pI(e){if(jt.isWindow(e)||e.nodeType===9)return null;var t=jt.getDocument(e),o=t.body,a,c=jt.css(e,"position"),u=c==="fixed"||c==="absolute";if(!u)return e.nodeName.toLowerCase()==="html"?null:nb(e);for(a=nb(e);a&&a!==o&&a.nodeType!==9;a=nb(a))if(c=jt.css(a,"position"),c!=="static")return a;return null}var VV=jt.getParent;function ese(e){if(jt.isWindow(e)||e.nodeType===9)return!1;var t=jt.getDocument(e),o=t.body,a=null;for(a=VV(e);a&&a!==o&&a!==t;a=VV(a)){var c=jt.css(a,"position");if(c==="fixed")return!0}return!1}function e1(e,t){for(var o={left:0,right:1/0,top:0,bottom:1/0},a=pI(e),c=jt.getDocument(e),u=c.defaultView||c.parentWindow,d=c.body,f=c.documentElement;a;){if((navigator.userAgent.indexOf("MSIE")===-1||a.clientWidth!==0)&&a!==d&&a!==f&&jt.css(a,"overflow")!=="visible"){var m=jt.offset(a);m.left+=a.clientLeft,m.top+=a.clientTop,o.top=Math.max(o.top,m.top),o.right=Math.min(o.right,m.left+a.clientWidth),o.bottom=Math.min(o.bottom,m.top+a.clientHeight),o.left=Math.max(o.left,m.left)}else if(a===d||a===f)break;a=pI(a)}var g=null;if(!jt.isWindow(e)&&e.nodeType!==9){g=e.style.position;var _=jt.css(e,"position");_==="absolute"&&(e.style.position="fixed")}var S=jt.getWindowScrollLeft(u),C=jt.getWindowScrollTop(u),O=jt.viewportWidth(u),I=jt.viewportHeight(u),A=f.scrollWidth,L=f.scrollHeight,N=window.getComputedStyle(d);if(N.overflowX==="hidden"&&(A=u.innerWidth),N.overflowY==="hidden"&&(L=u.innerHeight),e.style&&(e.style.position=g),t||ese(e))o.left=Math.max(o.left,S),o.top=Math.max(o.top,C),o.right=Math.min(o.right,S+O),o.bottom=Math.min(o.bottom,C+I);else{var P=Math.max(A,S+O);o.right=Math.min(o.right,P);var D=Math.max(L,C+I);o.bottom=Math.min(o.bottom,D)}return o.top>=0&&o.left>=0&&o.bottom>o.top&&o.right>o.left?o:null}function tse(e,t,o,a){var c=jt.clone(e),u={width:t.width,height:t.height};return a.adjustX&&c.left<o.left&&(c.left=o.left),a.resizeWidth&&c.left>=o.left&&c.left+u.width>o.right&&(u.width-=c.left+u.width-o.right),a.adjustX&&c.left+u.width>o.right&&(c.left=Math.max(o.right-u.width,o.left)),a.adjustY&&c.top<o.top&&(c.top=o.top),a.resizeHeight&&c.top>=o.top&&c.top+u.height>o.bottom&&(u.height-=c.top+u.height-o.bottom),a.adjustY&&c.top+u.height>o.bottom&&(c.top=Math.max(o.bottom-u.height,o.top)),jt.mix(c,u)}function t1(e){var t,o,a;if(!jt.isWindow(e)&&e.nodeType!==9)t=jt.offset(e),o=jt.outerWidth(e),a=jt.outerHeight(e);else{var c=jt.getWindow(e);t={left:jt.getWindowScrollLeft(c),top:jt.getWindowScrollTop(c)},o=jt.viewportWidth(c),a=jt.viewportHeight(c)}return t.width=o,t.height=a,t}function FV(e,t){var o=t.charAt(0),a=t.charAt(1),c=e.width,u=e.height,d=e.left,f=e.top;return o==="c"?f+=u/2:o==="b"&&(f+=u),a==="c"?d+=c/2:a==="r"&&(d+=c),{left:d,top:f}}function Ig(e,t,o,a,c){var u=FV(t,o[1]),d=FV(e,o[0]),f=[d.left-u.left,d.top-u.top];return{left:Math.round(e.left-f[0]+a[0]-c[0]),top:Math.round(e.top-f[1]+a[1]-c[1])}}function BV(e,t,o){return e.left<o.left||e.left+t.width>o.right}function jV(e,t,o){return e.top<o.top||e.top+t.height>o.bottom}function nse(e,t,o){return e.left>o.right||e.left+t.width<o.left}function rse(e,t,o){return e.top>o.bottom||e.top+t.height<o.top}function wg(e,t,o){var a=[];return jt.each(e,function(c){a.push(c.replace(t,function(u){return o[u]}))}),a}function Og(e,t){return e[t]=-e[t],e}function HV(e,t){var o;return/%$/.test(e)?o=parseInt(e.substring(0,e.length-1),10)/100*t:o=parseInt(e,10),o||0}function $V(e,t){e[0]=HV(e[0],t.width),e[1]=HV(e[1],t.height)}function F8(e,t,o,a){var c=o.points,u=o.offset||[0,0],d=o.targetOffset||[0,0],f=o.overflow,m=o.source||e;u=[].concat(u),d=[].concat(d),f=f||{};var g={},_=0,S=!!(f&&f.alwaysByViewport),C=e1(m,S),O=t1(m);$V(u,O),$V(d,t);var I=Ig(O,t,c,u,d),A=jt.merge(O,I);if(C&&(f.adjustX||f.adjustY)&&a){if(f.adjustX&&BV(I,O,C)){var L=wg(c,/[lr]/gi,{l:"r",r:"l"}),N=Og(u,0),P=Og(d,0),D=Ig(O,t,L,N,P);nse(D,O,C)||(_=1,c=L,u=N,d=P)}if(f.adjustY&&jV(I,O,C)){var U=wg(c,/[tb]/gi,{t:"b",b:"t"}),B=Og(u,1),F=Og(d,1),H=Ig(O,t,U,B,F);rse(H,O,C)||(_=1,c=U,u=B,d=F)}_&&(I=Ig(O,t,c,u,d),jt.mix(A,I));var K=BV(I,O,C),te=jV(I,O,C);if(K||te){var Y=c;K&&(Y=wg(c,/[lr]/gi,{l:"r",r:"l"})),te&&(Y=wg(c,/[tb]/gi,{t:"b",b:"t"})),c=Y,u=o.offset||[0,0],d=o.targetOffset||[0,0]}g.adjustX=f.adjustX&&K,g.adjustY=f.adjustY&&te,(g.adjustX||g.adjustY)&&(A=tse(I,O,C,g))}return A.width!==O.width&&jt.css(m,"width",jt.width(m)+A.width-O.width),A.height!==O.height&&jt.css(m,"height",jt.height(m)+A.height-O.height),jt.offset(m,{left:A.left,top:A.top},{useCssRight:o.useCssRight,useCssBottom:o.useCssBottom,useCssTransform:o.useCssTransform,ignoreShake:o.ignoreShake}),{points:c,offset:u,targetOffset:d,overflow:g}}function ise(e,t){var o=e1(e,t),a=t1(e);return!o||a.left+a.width<=o.left||a.top+a.height<=o.top||a.left>=o.right||a.top>=o.bottom}function n1(e,t,o){var a=o.target||t,c=t1(a),u=!ise(a,o.overflow&&o.overflow.alwaysByViewport);return F8(e,c,o,u)}n1.__getOffsetParent=pI;n1.__getVisibleRectForElement=e1;function ose(e,t,o){var a,c,u=jt.getDocument(e),d=u.defaultView||u.parentWindow,f=jt.getWindowScrollLeft(d),m=jt.getWindowScrollTop(d),g=jt.viewportWidth(d),_=jt.viewportHeight(d);"pageX"in t?a=t.pageX:a=f+t.clientX,"pageY"in t?c=t.pageY:c=m+t.clientY;var S={left:a,top:c,width:0,height:0},C=a>=0&&a<=f+g&&c>=0&&c<=m+_,O=[o.points[0],"cc"];return F8(e,S,PV(PV({},o),{},{points:O}),C)}const ase=function(e,t){var o=ht.useRef(!1),a=ht.useRef(null);function c(){window.clearTimeout(a.current)}function u(d){if(c(),!o.current||d===!0){if(e(d)===!1)return;o.current=!0,a.current=window.setTimeout(function(){o.current=!1},t)}else a.current=window.setTimeout(function(){o.current=!1,u()},t)}return[u,function(){o.current=!1,c()}]};function sse(e,t){return e===t?!0:!e||!t?!1:"pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t?e.clientX===t.clientX&&e.clientY===t.clientY:!1}function cse(e,t){e!==document.activeElement&&df(t,e)&&typeof e.focus=="function"&&e.focus()}function WV(e,t){var o=null,a=null;function c(d){var f=xe(d,1),m=f[0].target;if(document.documentElement.contains(m)){var g=m.getBoundingClientRect(),_=g.width,S=g.height,C=Math.floor(_),O=Math.floor(S);(o!==C||a!==O)&&Promise.resolve().then(function(){t({width:C,height:O})}),o=C,a=O}}var u=new tj(c);return e&&u.observe(e),function(){u.disconnect()}}function GV(e){return typeof e!="function"?null:e()}function zV(e){return Nn(e)!=="object"||!e?null:e}var lse=function(t,o){var a=t.children,c=t.disabled,u=t.target,d=t.align,f=t.onAlign,m=t.monitorWindowResize,g=t.monitorBufferTime,_=g===void 0?0:g,S=ht.useRef({}),C=ht.useRef(),O=ht.Children.only(a),I=ht.useRef({});I.current.disabled=c,I.current.target=u,I.current.align=d,I.current.onAlign=f;var A=ase(function(){var Q=I.current,J=Q.disabled,q=Q.target,ee=Q.align,re=Q.onAlign,le=C.current;if(!J&&q&&le){var me,ue=GV(q),ve=zV(q);S.current.element=ue,S.current.point=ve,S.current.align=ee;var Ee=document,oe=Ee.activeElement;return ue&&w_(ue)?me=n1(le,ue,ee):ve&&(me=ose(le,ve,ee)),cse(oe,le),re&&me&&re(le,me),!0}return!1},_),L=xe(A,2),N=L[0],P=L[1],D=ht.useState(),U=xe(D,2),B=U[0],F=U[1],H=ht.useState(),K=xe(H,2),te=K[0],Y=K[1];return Sr(function(){F(GV(u)),Y(zV(u))}),ht.useEffect(function(){(S.current.element!==B||!sse(S.current.point,te)||!f_(S.current.align,d))&&N()}),ht.useEffect(function(){var Q=WV(C.current,N);return Q},[C.current]),ht.useEffect(function(){var Q=WV(B,N);return Q},[B]),ht.useEffect(function(){c?P():N()},[c]),ht.useEffect(function(){if(m){var Q=Zp(window,"resize",N);return Q.remove}},[m]),ht.useEffect(function(){return function(){P()}},[]),ht.useImperativeHandle(o,function(){return{forceAlign:function(){return N(!0)}}}),ht.isValidElement(O)&&(O=ht.cloneElement(O,{ref:Rc(O.ref,C)})),O},B8=ht.forwardRef(lse);B8.displayName="Align";var KV=["measure","alignPre","align",null,"motion"];const use=function(e,t){var o=wu(null),a=xe(o,2),c=a[0],u=a[1],d=b.useRef();function f(_){u(_,!0)}function m(){Ei.cancel(d.current)}function g(_){m(),d.current=Ei(function(){f(function(S){switch(c){case"align":return"motion";case"motion":return"stable"}return S}),_==null||_()})}return b.useEffect(function(){f("measure")},[e]),b.useEffect(function(){switch(c){case"measure":t();break}c&&(d.current=Ei(ju(_o().mark(function _(){var S,C;return _o().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:S=KV.indexOf(c),C=KV[S+1],C&&S!==-1&&f(C);case 3:case"end":return I.stop()}},_)}))))},[c]),b.useEffect(function(){return function(){m()}},[]),[c,g]},dse=function(e){var t=b.useState({width:0,height:0}),o=xe(t,2),a=o[0],c=o[1];function u(f){var m=f.offsetWidth,g=f.offsetHeight,_=f.getBoundingClientRect(),S=_.width,C=_.height;Math.abs(m-S)<1&&Math.abs(g-C)<1&&(m=S,g=C),c({width:m,height:g})}var d=b.useMemo(function(){var f={};if(e){var m=a.width,g=a.height;e.indexOf("height")!==-1&&g?f.height=g:e.indexOf("minHeight")!==-1&&g&&(f.minHeight=g),e.indexOf("width")!==-1&&m?f.width=m:e.indexOf("minWidth")!==-1&&m&&(f.minWidth=m)}return f},[e,a]);return[d,u]};var j8=b.forwardRef(function(e,t){var o=e.visible,a=e.prefixCls,c=e.className,u=e.style,d=e.children,f=e.zIndex,m=e.stretch,g=e.destroyPopupOnHide,_=e.forceRender,S=e.align,C=e.point,O=e.getRootDomNode,I=e.getClassNameFromAlign,A=e.onAlign,L=e.onMouseEnter,N=e.onMouseLeave,P=e.onMouseDown,D=e.onTouchStart,U=e.onClick,B=b.useRef(),F=b.useRef(),H=b.useState(),K=xe(H,2),te=K[0],Y=K[1],Q=dse(m),J=xe(Q,2),q=J[0],ee=J[1];function re(){m&&ee(O())}var le=use(o,re),me=xe(le,2),ue=me[0],ve=me[1],Ee=b.useState(0),oe=xe(Ee,2),ae=oe[0],he=oe[1],pe=b.useRef();Sr(function(){ue==="alignPre"&&he(0)},[ue]);function Ae(){return C||O}function Le(){var He;(He=B.current)===null||He===void 0||He.forceAlign()}function Qe(He,ot){var It=I(ot);te!==It&&Y(It),he(function(tn){return tn+1}),ue==="align"&&(A==null||A(He,ot))}Sr(function(){ue==="align"&&(ae<3?Le():ve(function(){var He;(He=pe.current)===null||He===void 0||He.call(pe)}))},[ae]);var je=de({},P8(e));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(He){var ot=je[He];je[He]=function(It,tn){return ve(),ot==null?void 0:ot(It,tn)}});function Ut(){return new Promise(function(He){pe.current=He})}b.useEffect(function(){!je.motionName&&ue==="motion"&&ve()},[je.motionName,ue]),b.useImperativeHandle(t,function(){return{forceAlign:Le,getElement:function(){return F.current}}});var Nt=de(de({},q),{},{zIndex:f,opacity:ue==="motion"||ue==="stable"||!o?void 0:0,pointerEvents:!o&&ue!=="stable"?"none":void 0},u),at=!0;S!=null&&S.points&&(ue==="align"||ue==="stable")&&(at=!1);var Ht=d;return b.Children.count(d)>1&&(Ht=b.createElement("div",{className:"".concat(a,"-content")},d)),b.createElement(Ic,Be({visible:o,ref:F,leavedClassName:"".concat(a,"-hidden")},je,{onAppearPrepare:Ut,onEnterPrepare:Ut,removeOnLeave:g,forceRender:_}),function(He,ot){var It=He.className,tn=He.style,xt=lt(a,c,te,It);return b.createElement(B8,{target:Ae(),key:"popup",ref:B,monitorWindowResize:!0,disabled:at,align:S,onAlign:Qe},b.createElement("div",{ref:ot,className:xt,onMouseEnter:L,onMouseLeave:N,onMouseDownCapture:P,onTouchStartCapture:D,onClick:U,style:de(de({},tn),Nt)},Ht))})});j8.displayName="PopupInner";var H8=b.forwardRef(function(e,t){var o=e.prefixCls,a=e.visible,c=e.zIndex,u=e.children,d=e.mobile;d=d===void 0?{}:d;var f=d.popupClassName,m=d.popupStyle,g=d.popupMotion,_=g===void 0?{}:g,S=d.popupRender,C=e.onClick,O=b.useRef();b.useImperativeHandle(t,function(){return{forceAlign:function(){},getElement:function(){return O.current}}});var I=de({zIndex:c},m),A=u;return b.Children.count(u)>1&&(A=b.createElement("div",{className:"".concat(o,"-content")},u)),S&&(A=S(A)),b.createElement(Ic,Be({visible:a,ref:O,removeOnLeave:!0},_),function(L,N){var P=L.className,D=L.style,U=lt(o,f,P);return b.createElement("div",{ref:N,className:U,onClick:C,style:de(de({},D),I)},A)})});H8.displayName="MobilePopupInner";var hse=["visible","mobile"],$8=b.forwardRef(function(e,t){var o=e.visible,a=e.mobile,c=Sn(e,hse),u=b.useState(o),d=xe(u,2),f=d[0],m=d[1],g=b.useState(!1),_=xe(g,2),S=_[0],C=_[1],O=de(de({},c),{},{visible:f});b.useEffect(function(){m(o),o&&a&&C(_8())},[o,a]);var I=S?b.createElement(H8,Be({},O,{mobile:a,ref:t})):b.createElement(j8,Be({},O,{ref:t}));return b.createElement("div",null,b.createElement(xae,O),I)});$8.displayName="Popup";var YV=b.createContext(null);function rb(){}function pse(){return""}function fse(e){return e?e.ownerDocument:window.document}var mse=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function gse(e){var t=function(o){Vu(c,o);var a=Fu(c);function c(u){var d;va(this,c),d=a.call(this,u),Ne(Qt(d),"popupRef",b.createRef()),Ne(Qt(d),"triggerRef",b.createRef()),Ne(Qt(d),"portalContainer",void 0),Ne(Qt(d),"attachId",void 0),Ne(Qt(d),"clickOutsideHandler",void 0),Ne(Qt(d),"touchOutsideHandler",void 0),Ne(Qt(d),"contextMenuOutsideHandler1",void 0),Ne(Qt(d),"contextMenuOutsideHandler2",void 0),Ne(Qt(d),"mouseDownTimeout",void 0),Ne(Qt(d),"focusTime",void 0),Ne(Qt(d),"preClickTime",void 0),Ne(Qt(d),"preTouchTime",void 0),Ne(Qt(d),"delayTimer",void 0),Ne(Qt(d),"hasPopupMouseDown",void 0),Ne(Qt(d),"onMouseEnter",function(m){var g=d.props.mouseEnterDelay;d.fireEvents("onMouseEnter",m),d.delaySetPopupVisible(!0,g,g?null:m)}),Ne(Qt(d),"onMouseMove",function(m){d.fireEvents("onMouseMove",m),d.setPoint(m)}),Ne(Qt(d),"onMouseLeave",function(m){d.fireEvents("onMouseLeave",m),d.delaySetPopupVisible(!1,d.props.mouseLeaveDelay)}),Ne(Qt(d),"onPopupMouseEnter",function(){d.clearDelayTimer()}),Ne(Qt(d),"onPopupMouseLeave",function(m){var g;m.relatedTarget&&!m.relatedTarget.setTimeout&&df((g=d.popupRef.current)===null||g===void 0?void 0:g.getElement(),m.relatedTarget)||d.delaySetPopupVisible(!1,d.props.mouseLeaveDelay)}),Ne(Qt(d),"onFocus",function(m){d.fireEvents("onFocus",m),d.clearDelayTimer(),d.isFocusToShow()&&(d.focusTime=Date.now(),d.delaySetPopupVisible(!0,d.props.focusDelay))}),Ne(Qt(d),"onMouseDown",function(m){d.fireEvents("onMouseDown",m),d.preClickTime=Date.now()}),Ne(Qt(d),"onTouchStart",function(m){d.fireEvents("onTouchStart",m),d.preTouchTime=Date.now()}),Ne(Qt(d),"onBlur",function(m){d.fireEvents("onBlur",m),d.clearDelayTimer(),d.isBlurToHide()&&d.delaySetPopupVisible(!1,d.props.blurDelay)}),Ne(Qt(d),"onContextMenu",function(m){m.preventDefault(),d.fireEvents("onContextMenu",m),d.setPopupVisible(!0,m)}),Ne(Qt(d),"onContextMenuClose",function(){d.isContextMenuToShow()&&d.close()}),Ne(Qt(d),"onClick",function(m){if(d.fireEvents("onClick",m),d.focusTime){var g;if(d.preClickTime&&d.preTouchTime?g=Math.min(d.preClickTime,d.preTouchTime):d.preClickTime?g=d.preClickTime:d.preTouchTime&&(g=d.preTouchTime),Math.abs(g-d.focusTime)<20)return;d.focusTime=0}d.preClickTime=0,d.preTouchTime=0,d.isClickToShow()&&(d.isClickToHide()||d.isBlurToHide())&&m&&m.preventDefault&&m.preventDefault();var _=!d.state.popupVisible;(d.isClickToHide()&&!_||_&&d.isClickToShow())&&d.setPopupVisible(!d.state.popupVisible,m)}),Ne(Qt(d),"onPopupMouseDown",function(){if(d.hasPopupMouseDown=!0,clearTimeout(d.mouseDownTimeout),d.mouseDownTimeout=window.setTimeout(function(){d.hasPopupMouseDown=!1},0),d.context){var m;(m=d.context).onPopupMouseDown.apply(m,arguments)}}),Ne(Qt(d),"onDocumentClick",function(m){if(!(d.props.mask&&!d.props.maskClosable)){var g=m.target,_=d.getRootDomNode(),S=d.getPopupDomNode();(!df(_,g)||d.isContextMenuOnly())&&!df(S,g)&&!d.hasPopupMouseDown&&d.close()}}),Ne(Qt(d),"getRootDomNode",function(){var m=d.props.getTriggerDOMNode;if(m)return m(d.triggerRef.current);try{var g=kv(d.triggerRef.current);if(g)return g}catch{}return wh.findDOMNode(Qt(d))}),Ne(Qt(d),"getPopupClassNameFromAlign",function(m){var g=[],_=d.props,S=_.popupPlacement,C=_.builtinPlacements,O=_.prefixCls,I=_.alignPoint,A=_.getPopupClassNameFromAlign;return S&&C&&g.push(Pae(C,O,m,I)),A&&g.push(A(m)),g.join(" ")}),Ne(Qt(d),"getComponent",function(){var m=d.props,g=m.prefixCls,_=m.destroyPopupOnHide,S=m.popupClassName,C=m.onPopupAlign,O=m.popupMotion,I=m.popupAnimation,A=m.popupTransitionName,L=m.popupStyle,N=m.mask,P=m.maskAnimation,D=m.maskTransitionName,U=m.maskMotion,B=m.zIndex,F=m.popup,H=m.stretch,K=m.alignPoint,te=m.mobile,Y=m.forceRender,Q=m.onPopupClick,J=d.state,q=J.popupVisible,ee=J.point,re=d.getPopupAlign(),le={};return d.isMouseEnterToShow()&&(le.onMouseEnter=d.onPopupMouseEnter),d.isMouseLeaveToHide()&&(le.onMouseLeave=d.onPopupMouseLeave),le.onMouseDown=d.onPopupMouseDown,le.onTouchStart=d.onPopupMouseDown,b.createElement($8,Be({prefixCls:g,destroyPopupOnHide:_,visible:q,point:K&&ee,className:S,align:re,onAlign:C,animation:I,getClassNameFromAlign:d.getPopupClassNameFromAlign},le,{stretch:H,getRootDomNode:d.getRootDomNode,style:L,mask:N,zIndex:B,transitionName:A,maskAnimation:P,maskTransitionName:D,maskMotion:U,ref:d.popupRef,motion:O,mobile:te,forceRender:Y,onClick:Q}),typeof F=="function"?F():F)}),Ne(Qt(d),"attachParent",function(m){Ei.cancel(d.attachId);var g=d.props,_=g.getPopupContainer,S=g.getDocument,C=d.getRootDomNode(),O;_?(C||_.length===0)&&(O=_(C)):O=S(d.getRootDomNode()).body,O?O.appendChild(m):d.attachId=Ei(function(){d.attachParent(m)})}),Ne(Qt(d),"getContainer",function(){if(!d.portalContainer){var m=d.props.getDocument,g=m(d.getRootDomNode()).createElement("div");g.style.position="absolute",g.style.top="0",g.style.left="0",g.style.width="100%",d.portalContainer=g}return d.attachParent(d.portalContainer),d.portalContainer}),Ne(Qt(d),"setPoint",function(m){var g=d.props.alignPoint;!g||!m||d.setState({point:{pageX:m.pageX,pageY:m.pageY}})}),Ne(Qt(d),"handlePortalUpdate",function(){d.state.prevPopupVisible!==d.state.popupVisible&&d.props.afterPopupVisibleChange(d.state.popupVisible)}),Ne(Qt(d),"triggerContextValue",{onPopupMouseDown:d.onPopupMouseDown});var f;return"popupVisible"in u?f=!!u.popupVisible:f=!!u.defaultPopupVisible,d.state={prevPopupVisible:f,popupVisible:f},mse.forEach(function(m){d["fire".concat(m)]=function(g){d.fireEvents(m,g)}}),d}return Ea(c,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var d=this.props,f=this.state;if(f.popupVisible){var m;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(m=d.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Zp(m,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(m=m||d.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Zp(m,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(m=m||d.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=Zp(m,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Zp(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Ei.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var d;return((d=this.popupRef.current)===null||d===void 0?void 0:d.getElement())||null}},{key:"getPopupAlign",value:function(){var d=this.props,f=d.popupPlacement,m=d.popupAlign,g=d.builtinPlacements;return f&&g?Nae(g,f,m):m}},{key:"setPopupVisible",value:function(d,f){var m=this.props.alignPoint,g=this.state.popupVisible;this.clearDelayTimer(),g!==d&&("popupVisible"in this.props||this.setState({popupVisible:d,prevPopupVisible:g}),this.props.onPopupVisibleChange(d)),m&&f&&d&&this.setPoint(f)}},{key:"delaySetPopupVisible",value:function(d,f,m){var g=this,_=f*1e3;if(this.clearDelayTimer(),_){var S=m?{pageX:m.pageX,pageY:m.pageY}:null;this.delayTimer=window.setTimeout(function(){g.setPopupVisible(d,S),g.clearDelayTimer()},_)}else this.setPopupVisible(d,m)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(d){var f=this.props.children.props,m=this.props;return f[d]&&m[d]?this["fire".concat(d)]:f[d]||m[d]}},{key:"isClickToShow",value:function(){var d=this.props,f=d.action,m=d.showAction;return f.indexOf("click")!==-1||m.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var d=this.props.action;return d==="contextMenu"||d.length===1&&d[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var d=this.props,f=d.action,m=d.showAction;return f.indexOf("contextMenu")!==-1||m.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var d=this.props,f=d.action,m=d.hideAction;return f.indexOf("click")!==-1||m.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var d=this.props,f=d.action,m=d.showAction;return f.indexOf("hover")!==-1||m.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var d=this.props,f=d.action,m=d.hideAction;return f.indexOf("hover")!==-1||m.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var d=this.props,f=d.action,m=d.showAction;return f.indexOf("focus")!==-1||m.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var d=this.props,f=d.action,m=d.hideAction;return f.indexOf("focus")!==-1||m.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var d;(d=this.popupRef.current)===null||d===void 0||d.forceAlign()}}},{key:"fireEvents",value:function(d,f){var m=this.props.children.props[d];m&&m(f);var g=this.props[d];g&&g(f)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var d=this.state.popupVisible,f=this.props,m=f.children,g=f.forceRender,_=f.alignPoint,S=f.className,C=f.autoDestroy,O=b.Children.only(m),I={key:"trigger"};this.isContextMenuToShow()?I.onContextMenu=this.onContextMenu:I.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(I.onClick=this.onClick,I.onMouseDown=this.onMouseDown,I.onTouchStart=this.onTouchStart):(I.onClick=this.createTwoChains("onClick"),I.onMouseDown=this.createTwoChains("onMouseDown"),I.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(I.onMouseEnter=this.onMouseEnter,_&&(I.onMouseMove=this.onMouseMove)):I.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?I.onMouseLeave=this.onMouseLeave:I.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(I.onFocus=this.onFocus,I.onBlur=this.onBlur):(I.onFocus=this.createTwoChains("onFocus"),I.onBlur=this.createTwoChains("onBlur"));var A=lt(O&&O.props&&O.props.className,S);A&&(I.className=A);var L=de({},I);Uh(O)&&(L.ref=Rc(this.triggerRef,O.ref));var N=b.cloneElement(O,L),P;return(d||this.popupRef.current||g)&&(P=b.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!d&&C&&(P=null),b.createElement(YV.Provider,{value:this.triggerContextValue},N,P)}}],[{key:"getDerivedStateFromProps",value:function(d,f){var m=d.popupVisible,g={};return m!==void 0&&f.popupVisible!==m&&(g.popupVisible=m,g.prevPopupVisible=f.popupVisible),g}}]),c}(b.Component);return Ne(t,"contextType",YV),Ne(t,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:pse,getDocument:fse,onPopupVisibleChange:rb,afterPopupVisibleChange:rb,onPopupAlign:rb,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),t}const vse=gse(Oae);function qV(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(w_(e)){var o=e.nodeName.toLowerCase(),a=["input","select","textarea","button"].includes(o)||e.isContentEditable||o==="a"&&!!e.getAttribute("href"),c=e.getAttribute("tabindex"),u=Number(c),d=null;return c&&!Number.isNaN(u)?d=u:a&&d===null&&(d=0),a&&e.disabled&&(d=null),d!==null&&(d>=0||t&&d<0)}return!1}function Ese(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=ft(e.querySelectorAll("*")).filter(function(a){return qV(a,t)});return qV(e,t)&&o.unshift(e),o}var W8=b.createContext(null);function r1(e,t){return e===void 0?null:"".concat(e,"-").concat(t)}function G8(e){var t=b.useContext(W8);return r1(t,e)}var _se=["children","locked"],fs=b.createContext(null);function Sse(e,t){var o=de({},e);return Object.keys(t).forEach(function(a){var c=t[a];c!==void 0&&(o[a]=c)}),o}function Gf(e){var t=e.children,o=e.locked,a=Sn(e,_se),c=b.useContext(fs),u=h_(function(){return Sse(c,a)},[c,a],function(d,f){return!o&&(d[0]!==f[0]||!f_(d[1],f[1],!0))});return b.createElement(fs.Provider,{value:u},t)}var yse=[],z8=b.createContext(null);function A_(){return b.useContext(z8)}var K8=b.createContext(yse);function Fh(e){var t=b.useContext(K8);return b.useMemo(function(){return e!==void 0?[].concat(ft(t),[e]):t},[t,e])}var Y8=b.createContext(null),i1=b.createContext({}),fI=ut.LEFT,mI=ut.RIGHT,gI=ut.UP,rv=ut.DOWN,iv=ut.ENTER,q8=ut.ESC,Hp=ut.HOME,$p=ut.END,XV=[gI,rv,fI,mI];function Cse(e,t,o,a){var c,u,d,f,m="prev",g="next",_="children",S="parent";if(e==="inline"&&a===iv)return{inlineTrigger:!0};var C=(c={},Ne(c,gI,m),Ne(c,rv,g),c),O=(u={},Ne(u,fI,o?g:m),Ne(u,mI,o?m:g),Ne(u,rv,_),Ne(u,iv,_),u),I=(d={},Ne(d,gI,m),Ne(d,rv,g),Ne(d,iv,_),Ne(d,q8,S),Ne(d,fI,o?_:S),Ne(d,mI,o?S:_),d),A={inline:C,horizontal:O,vertical:I,inlineSub:C,horizontalSub:I,verticalSub:I},L=(f=A["".concat(e).concat(t?"":"Sub")])===null||f===void 0?void 0:f[a];switch(L){case m:return{offset:-1,sibling:!0};case g:return{offset:1,sibling:!0};case S:return{offset:-1,sibling:!1};case _:return{offset:1,sibling:!1};default:return null}}function Tse(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}function bse(e,t){for(var o=e||document.activeElement;o;){if(t.has(o))return o;o=o.parentElement}return null}function X8(e,t){var o=Ese(e,!0);return o.filter(function(a){return t.has(a)})}function JV(e,t,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!e)return null;var c=X8(e,t),u=c.length,d=c.findIndex(function(f){return o===f});return a<0?d===-1?d=u-1:d-=1:a>0&&(d+=1),d=(d+u)%u,c[d]}function Rse(e,t,o,a,c,u,d,f,m,g){var _=b.useRef(),S=b.useRef();S.current=t;var C=function(){Ei.cancel(_.current)};return b.useEffect(function(){return function(){C()}},[]),function(O){var I=O.which;if([].concat(XV,[iv,q8,Hp,$p]).includes(I)){var A,L,N,P=function(){A=new Set,L=new Map,N=new Map;var re=u();return re.forEach(function(le){var me=document.querySelector("[data-menu-id='".concat(r1(a,le),"']"));me&&(A.add(me),N.set(me,le),L.set(le,me))}),A};P();var D=L.get(t),U=bse(D,A),B=N.get(U),F=Cse(e,d(B,!0).length===1,o,I);if(!F&&I!==Hp&&I!==$p)return;(XV.includes(I)||[Hp,$p].includes(I))&&O.preventDefault();var H=function(re){if(re){var le=re,me=re.querySelector("a");me!=null&&me.getAttribute("href")&&(le=me);var ue=N.get(re);f(ue),C(),_.current=Ei(function(){S.current===ue&&le.focus()})}};if([Hp,$p].includes(I)||F.sibling||!U){var K;!U||e==="inline"?K=c.current:K=Tse(U);var te,Y=X8(K,A);I===Hp?te=Y[0]:I===$p?te=Y[Y.length-1]:te=JV(K,A,U,F.offset),H(te)}else if(F.inlineTrigger)m(B);else if(F.offset>0)m(B,!0),C(),_.current=Ei(function(){P();var ee=U.getAttribute("aria-controls"),re=document.getElementById(ee),le=JV(re,A);H(le)},5);else if(F.offset<0){var Q=d(B,!0),J=Q[Q.length-2],q=L.get(J);m(J,!1),H(q)}}g==null||g(O)}}function Ise(e){Promise.resolve().then(e)}var o1="__RC_UTIL_PATH_SPLIT__",QV=function(t){return t.join(o1)},wse=function(t){return t.split(o1)},vI="rc-menu-more";function Ose(){var e=b.useState({}),t=xe(e,2),o=t[1],a=b.useRef(new Map),c=b.useRef(new Map),u=b.useState([]),d=xe(u,2),f=d[0],m=d[1],g=b.useRef(0),_=b.useRef(!1),S=function(){_.current||o({})},C=b.useCallback(function(D,U){var B=QV(U);c.current.set(B,D),a.current.set(D,B),g.current+=1;var F=g.current;Ise(function(){F===g.current&&S()})},[]),O=b.useCallback(function(D,U){var B=QV(U);c.current.delete(B),a.current.delete(D)},[]),I=b.useCallback(function(D){m(D)},[]),A=b.useCallback(function(D,U){var B=a.current.get(D)||"",F=wse(B);return U&&f.includes(F[0])&&F.unshift(vI),F},[f]),L=b.useCallback(function(D,U){return D.some(function(B){var F=A(B,!0);return F.includes(U)})},[A]),N=function(){var U=ft(a.current.keys());return f.length&&U.push(vI),U},P=b.useCallback(function(D){var U="".concat(a.current.get(D)).concat(o1),B=new Set;return ft(c.current.keys()).forEach(function(F){F.startsWith(U)&&B.add(c.current.get(F))}),B},[]);return b.useEffect(function(){return function(){_.current=!0}},[]),{registerPath:C,unregisterPath:O,refreshOverflowKeys:I,isSubPathKey:L,getKeyPath:A,getKeys:N,getSubPathKeys:P}}function qd(e){var t=b.useRef(e);t.current=e;var o=b.useCallback(function(){for(var a,c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return(a=t.current)===null||a===void 0?void 0:a.call.apply(a,[t].concat(u))},[]);return e?o:void 0}var Ase=Math.random().toFixed(5).toString().slice(2),ZV=0;function Nse(e){var t=wl(e,{value:e}),o=xe(t,2),a=o[0],c=o[1];return b.useEffect(function(){ZV+=1;var u="".concat(Ase,"-").concat(ZV);c("rc-menu-uuid-".concat(u))},[]),a}function J8(e,t,o,a){var c=b.useContext(fs),u=c.activeKey,d=c.onActive,f=c.onInactive,m={active:u===e};return t||(m.onMouseEnter=function(g){o==null||o({key:e,domEvent:g}),d(e)},m.onMouseLeave=function(g){a==null||a({key:e,domEvent:g}),f(e)}),m}function Q8(e){var t=b.useContext(fs),o=t.mode,a=t.rtl,c=t.inlineIndent;if(o!=="inline")return null;var u=e;return a?{paddingRight:u*c}:{paddingLeft:u*c}}function Z8(e){var t=e.icon,o=e.props,a=e.children,c;return typeof t=="function"?c=b.createElement(t,de({},o)):c=t,c||a||null}var Pse=["item"];function qv(e){var t=e.item,o=Sn(e,Pse);return Object.defineProperty(o,"item",{get:function(){return Eo(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),o}var xse=["title","attribute","elementRef"],Dse=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],kse=["active"],Lse=function(e){Vu(o,e);var t=Fu(o);function o(){return va(this,o),t.apply(this,arguments)}return Ea(o,[{key:"render",value:function(){var c=this.props,u=c.title,d=c.attribute,f=c.elementRef,m=Sn(c,xse),g=js(m,["eventKey","popupClassName","popupOffset","onTitleClick"]);return Eo(!d,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),b.createElement(mc.Item,Be({},d,{title:typeof u=="string"?u:void 0},g,{ref:f}))}}]),o}(b.Component),Mse=b.forwardRef(function(e,t){var o,a=e.style,c=e.className,u=e.eventKey;e.warnKey;var d=e.disabled,f=e.itemIcon,m=e.children,g=e.role,_=e.onMouseEnter,S=e.onMouseLeave,C=e.onClick,O=e.onKeyDown,I=e.onFocus,A=Sn(e,Dse),L=G8(u),N=b.useContext(fs),P=N.prefixCls,D=N.onItemClick,U=N.disabled,B=N.overflowDisabled,F=N.itemIcon,H=N.selectedKeys,K=N.onActive,te=b.useContext(i1),Y=te._internalRenderMenuItem,Q="".concat(P,"-item"),J=b.useRef(),q=b.useRef(),ee=U||d,re=Dw(t,q),le=Fh(u),me=function(Nt){return{key:u,keyPath:ft(le).reverse(),item:J.current,domEvent:Nt}},ue=f||F,ve=J8(u,ee,_,S),Ee=ve.active,oe=Sn(ve,kse),ae=H.includes(u),he=Q8(le.length),pe=function(Nt){if(!ee){var at=me(Nt);C==null||C(qv(at)),D(at)}},Ae=function(Nt){if(O==null||O(Nt),Nt.which===ut.ENTER){var at=me(Nt);C==null||C(qv(at)),D(at)}},Le=function(Nt){K(u),I==null||I(Nt)},Qe={};e.role==="option"&&(Qe["aria-selected"]=ae);var je=b.createElement(Lse,Be({ref:J,elementRef:re,role:g===null?"none":g||"menuitem",tabIndex:d?null:-1,"data-menu-id":B&&L?null:L},A,oe,Qe,{component:"li","aria-disabled":d,style:de(de({},he),a),className:lt(Q,(o={},Ne(o,"".concat(Q,"-active"),Ee),Ne(o,"".concat(Q,"-selected"),ae),Ne(o,"".concat(Q,"-disabled"),ee),o),c),onClick:pe,onKeyDown:Ae,onFocus:Le}),m,b.createElement(Z8,{props:de(de({},e),{},{isSelected:ae}),icon:ue}));return Y&&(je=Y(je,e,{selected:ae})),je});function Use(e,t){var o=e.eventKey,a=A_(),c=Fh(o);return b.useEffect(function(){if(a)return a.registerPath(o,c),function(){a.unregisterPath(o,c)}},[c]),a?null:b.createElement(Mse,Be({},e,{ref:t}))}const N_=b.forwardRef(Use);var Vse=["className","children"],Fse=function(t,o){var a=t.className,c=t.children,u=Sn(t,Vse),d=b.useContext(fs),f=d.prefixCls,m=d.mode,g=d.rtl;return b.createElement("ul",Be({className:lt(f,g&&"".concat(f,"-rtl"),"".concat(f,"-sub"),"".concat(f,"-").concat(m==="inline"?"inline":"vertical"),a),role:"menu"},u,{"data-menu-list":!0,ref:o}),c)},a1=b.forwardRef(Fse);a1.displayName="SubMenuList";var Bse=["label","children","key","type"];function s1(e,t){return Nl(e).map(function(o,a){if(b.isValidElement(o)){var c,u,d=o.key,f=(c=(u=o.props)===null||u===void 0?void 0:u.eventKey)!==null&&c!==void 0?c:d,m=f==null;m&&(f="tmp_key-".concat([].concat(ft(t),[a]).join("-")));var g={key:f,eventKey:f};return b.cloneElement(o,g)}return o})}function EI(e){return(e||[]).map(function(t,o){if(t&&Nn(t)==="object"){var a=t,c=a.label,u=a.children,d=a.key,f=a.type,m=Sn(a,Bse),g=d??"tmp-".concat(o);return u||f==="group"?f==="group"?b.createElement(x_,Be({key:g},m,{title:c}),EI(u)):b.createElement(P_,Be({key:g},m,{title:c}),EI(u)):f==="divider"?b.createElement(c1,Be({key:g},m)):b.createElement(N_,Be({key:g},m),c)}return null}).filter(function(t){return t})}function jse(e,t,o){var a=e;return t&&(a=EI(t)),s1(a,o)}var El={adjustX:1,adjustY:1},Hse={topLeft:{points:["bl","tl"],overflow:El,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:El,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:El,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:El,offset:[4,0]}},$se={topLeft:{points:["bl","tl"],overflow:El,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:El,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:El,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:El,offset:[4,0]}};function e5(e,t,o){if(t)return t;if(o)return o[e]||o.other}var Wse={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Gse(e){var t=e.prefixCls,o=e.visible,a=e.children,c=e.popup,u=e.popupClassName,d=e.popupOffset,f=e.disabled,m=e.mode,g=e.onVisibleChange,_=b.useContext(fs),S=_.getPopupContainer,C=_.rtl,O=_.subMenuOpenDelay,I=_.subMenuCloseDelay,A=_.builtinPlacements,L=_.triggerSubMenuAction,N=_.forceSubMenuRender,P=_.rootClassName,D=_.motion,U=_.defaultMotions,B=b.useState(!1),F=xe(B,2),H=F[0],K=F[1],te=de(C?de({},$se):de({},Hse),A),Y=Wse[m],Q=e5(m,D,U),J=b.useRef(Q);m!=="inline"&&(J.current=Q);var q=de(de({},J.current),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),ee=b.useRef();return b.useEffect(function(){return ee.current=Ei(function(){K(o)}),function(){Ei.cancel(ee.current)}},[o]),b.createElement(vse,{prefixCls:t,popupClassName:lt("".concat(t,"-popup"),Ne({},"".concat(t,"-rtl"),C),u,P),stretch:m==="horizontal"?"minWidth":null,getPopupContainer:S,builtinPlacements:te,popupPlacement:Y,popupVisible:H,popup:c,popupAlign:d&&{offset:d},action:f?[]:[L],mouseEnterDelay:O,mouseLeaveDelay:I,onPopupVisibleChange:g,forceRender:N,popupMotion:q},a)}function zse(e){var t=e.id,o=e.open,a=e.keyPath,c=e.children,u="inline",d=b.useContext(fs),f=d.prefixCls,m=d.forceSubMenuRender,g=d.motion,_=d.defaultMotions,S=d.mode,C=b.useRef(!1);C.current=S===u;var O=b.useState(!C.current),I=xe(O,2),A=I[0],L=I[1],N=C.current?o:!1;b.useEffect(function(){C.current&&L(!1)},[S]);var P=de({},e5(u,g,_));a.length>1&&(P.motionAppear=!1);var D=P.onVisibleChanged;return P.onVisibleChanged=function(U){return!C.current&&!U&&L(!0),D==null?void 0:D(U)},A?null:b.createElement(Gf,{mode:u,locked:!C.current},b.createElement(Ic,Be({visible:N},P,{forceRender:m,removeOnLeave:!1,leavedClassName:"".concat(f,"-hidden")}),function(U){var B=U.className,F=U.style;return b.createElement(a1,{id:t,className:B,style:F},c)}))}var Kse=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Yse=["active"],qse=function(t){var o,a=t.style,c=t.className,u=t.title,d=t.eventKey;t.warnKey;var f=t.disabled,m=t.internalPopupClose,g=t.children,_=t.itemIcon,S=t.expandIcon,C=t.popupClassName,O=t.popupOffset,I=t.onClick,A=t.onMouseEnter,L=t.onMouseLeave,N=t.onTitleClick,P=t.onTitleMouseEnter,D=t.onTitleMouseLeave,U=Sn(t,Kse),B=G8(d),F=b.useContext(fs),H=F.prefixCls,K=F.mode,te=F.openKeys,Y=F.disabled,Q=F.overflowDisabled,J=F.activeKey,q=F.selectedKeys,ee=F.itemIcon,re=F.expandIcon,le=F.onItemClick,me=F.onOpenChange,ue=F.onActive,ve=b.useContext(i1),Ee=ve._internalRenderSubMenuItem,oe=b.useContext(Y8),ae=oe.isSubPathKey,he=Fh(),pe="".concat(H,"-submenu"),Ae=Y||f,Le=b.useRef(),Qe=b.useRef(),je=_||ee,Ut=S||re,Nt=te.includes(d),at=!Q&&Nt,Ht=ae(q,d),He=J8(d,Ae,P,D),ot=He.active,It=Sn(He,Yse),tn=b.useState(!1),xt=xe(tn,2),Xe=xt[0],$e=xt[1],ze=function(In){Ae||$e(In)},tt=function(In){ze(!0),A==null||A({key:d,domEvent:In})},mt=function(In){ze(!1),L==null||L({key:d,domEvent:In})},Dt=b.useMemo(function(){return ot||(K!=="inline"?Xe||ae([J],d):!1)},[K,ot,J,Xe,d,ae]),lr=Q8(he.length),yn=function(In){Ae||(N==null||N({key:d,domEvent:In}),K==="inline"&&me(d,!Nt))},rn=qd(function(pn){I==null||I(qv(pn)),le(pn)}),an=function(In){K!=="inline"&&me(d,In)},si=function(){ue(d)},ur=B&&"".concat(B,"-popup"),sn=b.createElement("div",Be({role:"menuitem",style:lr,className:"".concat(pe,"-title"),tabIndex:Ae?null:-1,ref:Le,title:typeof u=="string"?u:null,"data-menu-id":Q&&B?null:B,"aria-expanded":at,"aria-haspopup":!0,"aria-controls":ur,"aria-disabled":Ae,onClick:yn,onFocus:si},It),u,b.createElement(Z8,{icon:K!=="horizontal"?Ut:null,props:de(de({},t),{},{isOpen:at,isSubMenu:!0})},b.createElement("i",{className:"".concat(pe,"-arrow")}))),kt=b.useRef(K);if(K!=="inline"&&he.length>1?kt.current="vertical":kt.current=K,!Q){var vn=kt.current;sn=b.createElement(Gse,{mode:vn,prefixCls:pe,visible:!m&&at&&K!=="inline",popupClassName:C,popupOffset:O,popup:b.createElement(Gf,{mode:vn==="horizontal"?"vertical":vn},b.createElement(a1,{id:ur,ref:Qe},g)),disabled:Ae,onVisibleChange:an},sn)}var En=b.createElement(mc.Item,Be({role:"none"},U,{component:"li",style:a,className:lt(pe,"".concat(pe,"-").concat(K),c,(o={},Ne(o,"".concat(pe,"-open"),at),Ne(o,"".concat(pe,"-active"),Dt),Ne(o,"".concat(pe,"-selected"),Ht),Ne(o,"".concat(pe,"-disabled"),Ae),o)),onMouseEnter:tt,onMouseLeave:mt}),sn,!Q&&b.createElement(zse,{id:ur,open:at,keyPath:he},g));return Ee&&(En=Ee(En,t,{selected:Ht,active:Dt,open:at,disabled:Ae})),b.createElement(Gf,{onItemClick:rn,mode:K==="horizontal"?"vertical":K,itemIcon:je,expandIcon:Ut},En)};function P_(e){var t=e.eventKey,o=e.children,a=Fh(t),c=s1(o,a),u=A_();b.useEffect(function(){if(u)return u.registerPath(t,a),function(){u.unregisterPath(t,a)}},[a]);var d;return u?d=c:d=b.createElement(qse,e,c),b.createElement(K8.Provider,{value:a},d)}var Xse=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],Gd=[],Jse=b.forwardRef(function(e,t){var o,a,c=e,u=c.prefixCls,d=u===void 0?"rc-menu":u,f=c.rootClassName,m=c.style,g=c.className,_=c.tabIndex,S=_===void 0?0:_,C=c.items,O=c.children,I=c.direction,A=c.id,L=c.mode,N=L===void 0?"vertical":L,P=c.inlineCollapsed,D=c.disabled,U=c.disabledOverflow,B=c.subMenuOpenDelay,F=B===void 0?.1:B,H=c.subMenuCloseDelay,K=H===void 0?.1:H,te=c.forceSubMenuRender,Y=c.defaultOpenKeys,Q=c.openKeys,J=c.activeKey,q=c.defaultActiveFirst,ee=c.selectable,re=ee===void 0?!0:ee,le=c.multiple,me=le===void 0?!1:le,ue=c.defaultSelectedKeys,ve=c.selectedKeys,Ee=c.onSelect,oe=c.onDeselect,ae=c.inlineIndent,he=ae===void 0?24:ae,pe=c.motion,Ae=c.defaultMotions,Le=c.triggerSubMenuAction,Qe=Le===void 0?"hover":Le,je=c.builtinPlacements,Ut=c.itemIcon,Nt=c.expandIcon,at=c.overflowedIndicator,Ht=at===void 0?"...":at,He=c.overflowedIndicatorPopupClassName,ot=c.getPopupContainer,It=c.onClick,tn=c.onOpenChange,xt=c.onKeyDown;c.openAnimation,c.openTransitionName;var Xe=c._internalRenderMenuItem,$e=c._internalRenderSubMenuItem,ze=Sn(c,Xse),tt=b.useMemo(function(){return jse(O,C,Gd)},[O,C]),mt=b.useState(!1),Dt=xe(mt,2),lr=Dt[0],yn=Dt[1],rn=b.useRef(),an=Nse(A),si=I==="rtl",ur=wl(Y,{value:Q,postState:function(Cn){return Cn||Gd}}),sn=xe(ur,2),kt=sn[0],vn=sn[1],En=function(Cn){var qn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function Dr(){vn(Cn),tn==null||tn(Cn)}qn?gc.flushSync(Dr):Dr()},pn=b.useState(kt),In=xe(pn,2),so=In[0],Gi=In[1],Mr=b.useRef(!1),Ni=b.useMemo(function(){return(N==="inline"||N==="vertical")&&P?["vertical",P]:[N,!1]},[N,P]),qe=xe(Ni,2),dt=qe[0],wn=qe[1],Vt=dt==="inline",Ur=b.useState(dt),Cr=xe(Ur,2),Ln=Cr[0],vt=Cr[1],Yt=b.useState(wn),cn=xe(Yt,2),dr=cn[0],Vr=cn[1];b.useEffect(function(){vt(dt),Vr(wn),Mr.current&&(Vt?vn(so):En(Gd))},[dt,wn]);var Ir=b.useState(0),ci=xe(Ir,2),Si=ci[0],To=ci[1],co=Si>=tt.length-1||Ln!=="horizontal"||U;b.useEffect(function(){Vt&&Gi(kt)},[kt]),b.useEffect(function(){return Mr.current=!0,function(){Mr.current=!1}},[]);var li=Ose(),Ga=li.registerPath,lo=li.unregisterPath,vs=li.refreshOverflowKeys,Ws=li.isSubPathKey,xr=li.getKeyPath,Gs=li.getKeys,wc=li.getSubPathKeys,uo=b.useMemo(function(){return{registerPath:Ga,unregisterPath:lo}},[Ga,lo]),Ll=b.useMemo(function(){return{isSubPathKey:Ws}},[Ws]);b.useEffect(function(){vs(co?Gd:tt.slice(Si+1).map(function(Yn){return Yn.key}))},[Si,co]);var zs=wl(J||q&&((o=tt[0])===null||o===void 0?void 0:o.key),{value:J}),Oc=xe(zs,2),za=Oc[0],Es=Oc[1],Ml=qd(function(Yn){Es(Yn)}),Ac=qd(function(){Es(void 0)});b.useImperativeHandle(t,function(){return{list:rn.current,focus:function(Cn){var qn,Dr=za??((qn=tt.find(function(Pc){return!Pc.props.disabled}))===null||qn===void 0?void 0:qn.key);if(Dr){var Fr,zi,Ta;(Fr=rn.current)===null||Fr===void 0||(zi=Fr.querySelector("li[data-menu-id='".concat(r1(an,Dr),"']")))===null||zi===void 0||(Ta=zi.focus)===null||Ta===void 0||Ta.call(zi,Cn)}}}});var Ka=wl(ue||[],{value:ve,postState:function(Cn){return Array.isArray(Cn)?Cn:Cn==null?Gd:[Cn]}}),ya=xe(Ka,2),ui=ya[0],Wo=ya[1],Ks=function(Cn){if(re){var qn=Cn.key,Dr=ui.includes(qn),Fr;me?Dr?Fr=ui.filter(function(Ta){return Ta!==qn}):Fr=[].concat(ft(ui),[qn]):Fr=[qn],Wo(Fr);var zi=de(de({},Cn),{},{selectedKeys:Fr});Dr?oe==null||oe(zi):Ee==null||Ee(zi)}!me&&kt.length&&Ln!=="inline"&&En(Gd)},er=qd(function(Yn){It==null||It(qv(Yn)),Ks(Yn)}),Ca=qd(function(Yn,Cn){var qn=kt.filter(function(Fr){return Fr!==Yn});if(Cn)qn.push(Yn);else if(Ln!=="inline"){var Dr=wc(Yn);qn=qn.filter(function(Fr){return!Dr.has(Fr)})}f_(kt,qn,!0)||En(qn,!0)}),_s=qd(ot),Ys=function(Cn,qn){var Dr=qn??!kt.includes(Cn);Ca(Cn,Dr)},Ul=Rse(Ln,za,si,an,rn,Gs,xr,Es,Ys,xt);b.useEffect(function(){yn(!0)},[]);var Vl=b.useMemo(function(){return{_internalRenderMenuItem:Xe,_internalRenderSubMenuItem:$e}},[Xe,$e]),Nc=Ln!=="horizontal"||U?tt:tt.map(function(Yn,Cn){return b.createElement(Gf,{key:Yn.key,overflowDisabled:Cn>Si},Yn)}),Fl=b.createElement(mc,Be({id:A,ref:rn,prefixCls:"".concat(d,"-overflow"),component:"ul",itemComponent:N_,className:lt(d,"".concat(d,"-root"),"".concat(d,"-").concat(Ln),g,(a={},Ne(a,"".concat(d,"-inline-collapsed"),dr),Ne(a,"".concat(d,"-rtl"),si),a),f),dir:I,style:m,role:"menu",tabIndex:S,data:Nc,renderRawItem:function(Cn){return Cn},renderRawRest:function(Cn){var qn=Cn.length,Dr=qn?tt.slice(-qn):null;return b.createElement(P_,{eventKey:vI,title:Ht,disabled:co,internalPopupClose:qn===0,popupClassName:He},Dr)},maxCount:Ln!=="horizontal"||U?mc.INVALIDATE:mc.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(Cn){To(Cn)},onKeyDown:Ul},ze));return b.createElement(i1.Provider,{value:Vl},b.createElement(W8.Provider,{value:an},b.createElement(Gf,{prefixCls:d,rootClassName:f,mode:Ln,openKeys:kt,rtl:si,disabled:D,motion:lr?pe:null,defaultMotions:lr?Ae:null,activeKey:za,onActive:Ml,onInactive:Ac,selectedKeys:ui,inlineIndent:he,subMenuOpenDelay:F,subMenuCloseDelay:K,forceSubMenuRender:te,builtinPlacements:je,triggerSubMenuAction:Qe,getPopupContainer:_s,itemIcon:Ut,expandIcon:Nt,onItemClick:er,onOpenChange:Ca},b.createElement(Y8.Provider,{value:Ll},Fl),b.createElement("div",{style:{display:"none"},"aria-hidden":!0},b.createElement(z8.Provider,{value:uo},tt)))))}),Qse=["className","title","eventKey","children"],Zse=["children"],ece=function(t){var o=t.className,a=t.title;t.eventKey;var c=t.children,u=Sn(t,Qse),d=b.useContext(fs),f=d.prefixCls,m="".concat(f,"-item-group");return b.createElement("li",Be({role:"presentation"},u,{onClick:function(_){return _.stopPropagation()},className:lt(m,o)}),b.createElement("div",{role:"presentation",className:"".concat(m,"-title"),title:typeof a=="string"?a:void 0},a),b.createElement("ul",{role:"group",className:"".concat(m,"-list")},c))};function x_(e){var t=e.children,o=Sn(e,Zse),a=Fh(o.eventKey),c=s1(t,a),u=A_();return u?c:b.createElement(ece,js(o,["warnKey"]),c)}function c1(e){var t=e.className,o=e.style,a=b.useContext(fs),c=a.prefixCls,u=A_();return u?null:b.createElement("li",{className:lt("".concat(c,"-item-divider"),t),style:o})}var am=Jse;am.Item=N_;am.SubMenu=P_;am.ItemGroup=x_;am.Divider=c1;var tce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"};const nce=tce;var t5=function(t,o){return b.createElement(Hs,de(de({},t),{},{ref:o,icon:nce}))};t5.displayName="EllipsisOutlined";const rce=b.forwardRef(t5),ice=e=>{const{componentCls:t,motionDurationSlow:o,menuHorizontalHeight:a,colorSplit:c,lineWidth:u,lineType:d,menuItemPaddingInline:f}=e;return{[`${t}-horizontal`]:{lineHeight:`${a}px`,border:0,borderBottom:`${u}px ${d} ${c}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${t}-item, ${t}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:f},[`> ${t}-item:hover,
        > ${t}-item-active,
        > ${t}-submenu ${t}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${t}-item, ${t}-submenu-title`]:{transition:[`border-color ${o}`,`background ${o}`].join(",")},[`${t}-submenu-arrow`]:{display:"none"}}}},oce=ice,ace=e=>{let{componentCls:t,menuArrowOffset:o}=e;return{[`${t}-rtl`]:{direction:"rtl"},[`${t}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${t}-rtl${t}-vertical,
    ${t}-submenu-rtl ${t}-vertical`]:{[`${t}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(-${o})`},"&::after":{transform:`rotate(45deg) translateY(${o})`}}}}},sce=ace,e4=e=>Object.assign({},jj(e)),cce=(e,t)=>{const{componentCls:o,colorItemText:a,colorItemTextSelected:c,colorGroupTitle:u,colorItemBg:d,colorSubItemBg:f,colorItemBgSelected:m,colorActiveBarHeight:g,colorActiveBarWidth:_,colorActiveBarBorderSize:S,motionDurationSlow:C,motionEaseInOut:O,motionEaseOut:I,menuItemPaddingInline:A,motionDurationMid:L,colorItemTextHover:N,lineType:P,colorSplit:D,colorItemTextDisabled:U,colorDangerItemText:B,colorDangerItemTextHover:F,colorDangerItemTextSelected:H,colorDangerItemBgActive:K,colorDangerItemBgSelected:te,colorItemBgHover:Y,menuSubMenuBg:Q,colorItemTextSelectedHorizontal:J,colorItemBgSelectedHorizontal:q}=e;return{[`${o}-${t}, ${o}-${t} > ${o}`]:{color:a,background:d,[`&${o}-root:focus-visible`]:Object.assign({},e4(e)),[`${o}-item-group-title`]:{color:u},[`${o}-submenu-selected`]:{[`> ${o}-submenu-title`]:{color:c}},[`${o}-item-disabled, ${o}-submenu-disabled`]:{color:`${U} !important`},[`${o}-item:hover, ${o}-submenu-title:hover`]:{[`&:not(${o}-item-selected):not(${o}-submenu-selected)`]:{color:N}},[`&:not(${o}-horizontal)`]:{[`${o}-item:not(${o}-item-selected)`]:{"&:hover":{backgroundColor:Y},"&:active":{backgroundColor:m}},[`${o}-submenu-title`]:{"&:hover":{backgroundColor:Y},"&:active":{backgroundColor:m}}},[`${o}-item-danger`]:{color:B,[`&${o}-item:hover`]:{[`&:not(${o}-item-selected):not(${o}-submenu-selected)`]:{color:F}},[`&${o}-item:active`]:{background:K}},[`${o}-item a`]:{"&, &:hover":{color:"inherit"}},[`${o}-item-selected`]:{color:c,[`&${o}-item-danger`]:{color:H},["a, a:hover"]:{color:"inherit"}},[`& ${o}-item-selected`]:{backgroundColor:m,[`&${o}-item-danger`]:{backgroundColor:te}},[`${o}-item, ${o}-submenu-title`]:{[`&:not(${o}-item-disabled):focus-visible`]:Object.assign({},e4(e))},[`&${o}-submenu > ${o}`]:{backgroundColor:Q},[`&${o}-popup > ${o}`]:{backgroundColor:d},[`&${o}-horizontal`]:Object.assign(Object.assign({},t==="dark"?{borderBottom:0}:{}),{[`> ${o}-item, > ${o}-submenu`]:{top:S,marginTop:-S,marginBottom:0,borderRadius:0,"&::after":{position:"absolute",insetInline:A,bottom:0,borderBottom:`${g}px solid transparent`,transition:`border-color ${C} ${O}`,content:'""'},["&:hover, &-active, &-open"]:{"&::after":{borderBottomWidth:g,borderBottomColor:J}},["&-selected"]:{color:J,backgroundColor:q,"&::after":{borderBottomWidth:g,borderBottomColor:J}}}}),[`&${o}-root`]:{[`&${o}-inline, &${o}-vertical`]:{borderInlineEnd:`${S}px ${P} ${D}`}},[`&${o}-inline`]:{[`${o}-sub${o}-inline`]:{background:f},[`${o}-item, ${o}-submenu-title`]:S&&_?{width:`calc(100% + ${S}px)`}:{},[`${o}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${_}px solid ${c}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${L} ${I}`,`opacity ${L} ${I}`].join(","),content:'""'},[`&${o}-item-danger`]:{"&::after":{borderInlineEndColor:H}}},[`${o}-selected, ${o}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${L} ${O}`,`opacity ${L} ${O}`].join(",")}}}}}},t4=cce,n4=e=>{const{componentCls:t,menuItemHeight:o,itemMarginInline:a,padding:c,menuArrowSize:u,marginXS:d,marginXXS:f}=e,m=c+u+d;return{[`${t}-item`]:{position:"relative",["&:not(:last-child)"]:{marginBottom:d}},[`${t}-item, ${t}-submenu-title`]:{height:o,lineHeight:`${o}px`,paddingInline:c,overflow:"hidden",textOverflow:"ellipsis",marginInline:a,marginBlock:f,width:`calc(100% - ${a*2}px)`},[`${t}-submenu`]:{paddingBottom:.02},[`> ${t}-item,
            > ${t}-submenu > ${t}-submenu-title`]:{height:o,lineHeight:`${o}px`},[`${t}-item-group-list ${t}-submenu-title,
            ${t}-submenu-title`]:{paddingInlineEnd:m}}},lce=e=>{const{componentCls:t,iconCls:o,menuItemHeight:a,colorTextLightSolid:c,dropdownWidth:u,controlHeightLG:d,motionDurationMid:f,motionEaseOut:m,paddingXL:g,fontSizeSM:_,fontSizeLG:S,motionDurationSlow:C,paddingXS:O,boxShadowSecondary:I}=e,A={height:a,lineHeight:`${a}px`,listStylePosition:"inside",listStyleType:"disc"};return[{[t]:{["&-inline, &-vertical"]:Object.assign({[`&${t}-root`]:{boxShadow:"none"}},n4(e))},[`${t}-submenu-popup`]:{[`${t}-vertical`]:Object.assign(Object.assign({},n4(e)),{boxShadow:I})}},{[`${t}-submenu-popup ${t}-vertical${t}-sub`]:{minWidth:u,maxHeight:`calc(100vh - ${d*2.5}px)`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${t}-inline`]:{width:"100%",[`&${t}-root`]:{[`${t}-item, ${t}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${C}`,`background ${C}`,`padding ${f} ${m}`].join(","),[`> ${t}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${t}-sub${t}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${t}-submenu > ${t}-submenu-title`]:A,[`& ${t}-item-group-title`]:{paddingInlineStart:g}},[`${t}-item`]:A}},{[`${t}-inline-collapsed`]:{width:a*2,[`&${t}-root`]:{[`${t}-item, ${t}-submenu ${t}-submenu-title`]:{[`> ${t}-inline-collapsed-noicon`]:{fontSize:S,textAlign:"center"}}},[`> ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-submenu > ${t}-submenu-title,
          > ${t}-submenu > ${t}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${_}px)`,textOverflow:"clip",[`
            ${t}-submenu-arrow,
            ${t}-submenu-expand-icon
          `]:{opacity:0},[`${t}-item-icon, ${o}`]:{margin:0,fontSize:S,lineHeight:`${a}px`,"+ span":{display:"inline-block",opacity:0}}},[`${t}-item-icon, ${o}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${t}-item-icon, ${o}`]:{display:"none"},"a, a:hover":{color:c}},[`${t}-item-group-title`]:Object.assign(Object.assign({},Bne),{paddingInline:O})}}]},uce=lce,r4=e=>{const{componentCls:t,fontSize:o,motionDurationSlow:a,motionDurationMid:c,motionEaseInOut:u,motionEaseOut:d,iconCls:f,controlHeightSM:m}=e;return{[`${t}-item, ${t}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${a}`,`background ${a}`,`padding ${a} ${u}`].join(","),[`${t}-item-icon, ${f}`]:{minWidth:o,fontSize:o,transition:[`font-size ${c} ${d}`,`margin ${a} ${u}`,`color ${a}`].join(","),"+ span":{marginInlineStart:m-o,opacity:1,transition:[`opacity ${a} ${u}`,`margin ${a}`,`color ${a}`].join(",")}},[`${t}-item-icon`]:Object.assign({},Bj()),[`&${t}-item-only-child`]:{[`> ${f}, > ${t}-item-icon`]:{marginInlineEnd:0}}},[`${t}-item-disabled, ${t}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${t}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},i4=e=>{const{componentCls:t,motionDurationSlow:o,motionEaseInOut:a,borderRadius:c,menuArrowSize:u,menuArrowOffset:d}=e;return{[`${t}-submenu`]:{["&-expand-icon, &-arrow"]:{position:"absolute",top:"50%",insetInlineEnd:e.margin,width:u,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${o} ${a}, opacity ${o}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:u*.6,height:u*.15,backgroundColor:"currentcolor",borderRadius:c,transition:[`background ${o} ${a}`,`transform ${o} ${a}`,`top ${o} ${a}`,`color ${o} ${a}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(-${d})`},"&::after":{transform:`rotate(-45deg) translateY(${d})`}}}}},dce=e=>{const{antCls:t,componentCls:o,fontSize:a,motionDurationSlow:c,motionDurationMid:u,motionEaseInOut:d,lineHeight:f,paddingXS:m,padding:g,colorSplit:_,lineWidth:S,zIndexPopup:C,borderRadiusLG:O,radiusSubMenuItem:I,menuArrowSize:A,menuArrowOffset:L,lineType:N,menuPanelMaskInset:P}=e;return[{"":{[`${o}`]:Object.assign(Object.assign({},XR()),{["&-hidden"]:{display:"none"}})},[`${o}-submenu-hidden`]:{display:"none"}},{[o]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},C_(e)),XR()),{marginBottom:0,paddingInlineStart:0,fontSize:a,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${c} cubic-bezier(0.2, 0, 0, 1) 0s`,["ul, ol"]:{margin:0,padding:0,listStyle:"none"},["&-overflow"]:{display:"flex",[`${o}-item`]:{flex:"none"}},[`${o}-item, ${o}-submenu, ${o}-submenu-title`]:{borderRadius:e.radiusItem},[`${o}-item-group-title`]:{padding:`${m}px ${g}px`,fontSize:a,lineHeight:f,transition:`all ${c}`},[`&-horizontal ${o}-submenu`]:{transition:[`border-color ${c} ${d}`,`background ${c} ${d}`].join(",")},[`${o}-submenu, ${o}-submenu-inline`]:{transition:[`border-color ${c} ${d}`,`background ${c} ${d}`,`padding ${u} ${d}`].join(",")},[`${o}-submenu ${o}-sub`]:{cursor:"initial",transition:[`background ${c} ${d}`,`padding ${c} ${d}`].join(",")},[`${o}-title-content`]:{transition:`color ${c}`},[`${o}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${o}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:_,borderStyle:N,borderWidth:0,borderTopWidth:S,marginBlock:S,padding:0,"&-dashed":{borderStyle:"dashed"}}}),r4(e)),{[`${o}-item-group`]:{[`${o}-item-group-list`]:{margin:0,padding:0,[`${o}-item, ${o}-submenu-title`]:{paddingInline:`${a*2}px ${g}px`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:C,background:"transparent",borderRadius:O,boxShadow:"none",transformOrigin:"0 0","&::before":{position:"absolute",inset:`${P}px 0 0`,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'}},"&-placement-rightTop::before":{top:0,insetInlineStart:P},[`> ${o}`]:Object.assign(Object.assign(Object.assign({borderRadius:O},r4(e)),i4(e)),{[`${o}-item, ${o}-submenu > ${o}-submenu-title`]:{borderRadius:I},[`${o}-submenu-title::after`]:{transition:`transform ${c} ${d}`}})}}),i4(e)),{[`&-inline-collapsed ${o}-submenu-arrow,
        &-inline ${o}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${L})`},"&::after":{transform:`rotate(45deg) translateX(-${L})`}},[`${o}-submenu-open${o}-submenu-inline > ${o}-submenu-title > ${o}-submenu-arrow`]:{transform:`translateY(-${A*.2}px)`,"&::after":{transform:`rotate(-45deg) translateX(-${L})`},"&::before":{transform:`rotate(45deg) translateX(${L})`}}})},{[`${t}-layout-header`]:{[o]:{lineHeight:"inherit"}}}]},hce=(e,t)=>Hu("Menu",(a,c)=>{let{overrideComponentToken:u}=c;if(t===!1)return[];const{colorBgElevated:d,colorPrimary:f,colorError:m,colorErrorHover:g,colorTextLightSolid:_,controlHeightLG:S,fontSize:C}=a,O=C/7*5,I=fa(a,{menuItemHeight:S,menuItemPaddingInline:a.margin,menuArrowSize:O,menuHorizontalHeight:S*1.15,menuArrowOffset:`${O*.25}px`,menuPanelMaskInset:-7,menuSubMenuBg:d}),A=new Fi(_).setAlpha(.65).toRgbString(),L=fa(I,{colorItemText:A,colorItemTextHover:_,colorGroupTitle:A,colorItemTextSelected:_,colorItemBg:"#001529",colorSubItemBg:"#000c17",colorItemBgActive:"transparent",colorItemBgSelected:f,colorActiveBarWidth:0,colorActiveBarHeight:0,colorActiveBarBorderSize:0,colorItemTextDisabled:new Fi(_).setAlpha(.25).toRgbString(),colorDangerItemText:m,colorDangerItemTextHover:g,colorDangerItemTextSelected:_,colorDangerItemBgActive:m,colorDangerItemBgSelected:m,menuSubMenuBg:"#001529",colorItemTextSelectedHorizontal:_,colorItemBgSelectedHorizontal:f},Object.assign({},u));return[dce(I),oce(I),uce(I),t4(I,"light"),t4(L,"dark"),sce(I),boe(I),SV(I,"slide-up"),SV(I,"slide-down"),E8(I,"zoom-big")]},a=>{const{colorPrimary:c,colorError:u,colorTextDisabled:d,colorErrorBg:f,colorText:m,colorTextDescription:g,colorBgContainer:_,colorFillAlter:S,colorFillContent:C,lineWidth:O,lineWidthBold:I,controlItemBgActive:A,colorBgTextHover:L}=a;return{dropdownWidth:160,zIndexPopup:a.zIndexPopupBase+50,radiusItem:a.borderRadiusLG,radiusSubMenuItem:a.borderRadiusSM,colorItemText:m,colorItemTextHover:m,colorItemTextHoverHorizontal:c,colorGroupTitle:g,colorItemTextSelected:c,colorItemTextSelectedHorizontal:c,colorItemBg:_,colorItemBgHover:L,colorItemBgActive:C,colorSubItemBg:S,colorItemBgSelected:A,colorItemBgSelectedHorizontal:"transparent",colorActiveBarWidth:0,colorActiveBarHeight:I,colorActiveBarBorderSize:O,colorItemTextDisabled:d,colorDangerItemText:u,colorDangerItemTextHover:u,colorDangerItemTextSelected:u,colorDangerItemBgActive:f,colorDangerItemBgSelected:f,itemMarginInline:a.marginXXS}})(e);globalThis&&globalThis.__rest;const pce=b.createContext(null),o4=pce;var fce=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const mce=e=>{const{prefixCls:t,className:o,dashed:a}=e,c=fce(e,["prefixCls","className","dashed"]),{getPrefixCls:u}=b.useContext(Oi),d=u("menu",t),f=lt({[`${d}-item-divider-dashed`]:!!a},o);return b.createElement(c1,Object.assign({className:f},c))},n5=mce;var gce={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"};const vce=gce;var r5=function(t,o){return b.createElement(Hs,de(de({},t),{},{ref:o,icon:vce}))};r5.displayName="BarsOutlined";const Ece=b.forwardRef(r5);var _ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};const Sce=_ce;var i5=function(t,o){return b.createElement(Hs,de(de({},t),{},{ref:o,icon:Sce}))};i5.displayName="LeftOutlined";const a4=b.forwardRef(i5),yce=e=>!isNaN(parseFloat(e))&&isFinite(e),Cce=yce,Tce=e=>{const{componentCls:t,colorBgContainer:o,colorBgBody:a,colorText:c}=e;return{[`${t}-sider-light`]:{background:o,[`${t}-sider-trigger`]:{color:c,background:o},[`${t}-sider-zero-width-trigger`]:{color:c,background:o,border:`1px solid ${a}`,borderInlineStart:0}}}},bce=Tce,Rce=e=>{const{antCls:t,componentCls:o,colorText:a,colorTextLightSolid:c,colorBgHeader:u,colorBgBody:d,colorBgTrigger:f,layoutHeaderHeight:m,layoutHeaderPaddingInline:g,layoutHeaderColor:_,layoutFooterPadding:S,layoutTriggerHeight:C,layoutZeroTriggerSize:O,motionDurationMid:I,motionDurationSlow:A,fontSize:L,borderRadius:N}=e;return{[o]:Object.assign(Object.assign({display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:d,"&, *":{boxSizing:"border-box"},[`&${o}-has-sider`]:{flexDirection:"row",[`> ${o}, > ${o}-content`]:{width:0}},[`${o}-header, &${o}-footer`]:{flex:"0 0 auto"},[`${o}-sider`]:{position:"relative",minWidth:0,background:u,transition:`all ${I}, background 0s`,"&-children":{height:"100%",marginTop:-.1,paddingTop:.1,[`${t}-menu${t}-menu-inline-collapsed`]:{width:"auto"}},"&-has-trigger":{paddingBottom:C},"&-right":{order:1},"&-trigger":{position:"fixed",bottom:0,zIndex:1,height:C,color:c,lineHeight:`${C}px`,textAlign:"center",background:f,cursor:"pointer",transition:`all ${I}`},"&-zero-width":{"> *":{overflow:"hidden"},"&-trigger":{position:"absolute",top:m,insetInlineEnd:-O,zIndex:1,width:O,height:O,color:c,fontSize:e.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:u,borderStartStartRadius:0,borderStartEndRadius:N,borderEndEndRadius:N,borderEndStartRadius:0,cursor:"pointer",transition:`background ${A} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${A}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:-O,borderStartStartRadius:N,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:N}}}}},bce(e)),{"&-rtl":{direction:"rtl"}}),[`${o}-header`]:{height:m,paddingInline:g,color:_,lineHeight:`${m}px`,background:u,[`${t}-menu`]:{lineHeight:"inherit"}},[`${o}-footer`]:{padding:S,color:a,fontSize:L,background:d},[`${o}-content`]:{flex:"auto",minHeight:0}}},o5=Hu("Layout",e=>{const{colorText:t,controlHeightSM:o,controlHeight:a,controlHeightLG:c,marginXXS:u}=e,d=c*1.25,f=fa(e,{layoutHeaderHeight:a*2,layoutHeaderPaddingInline:d,layoutHeaderColor:t,layoutFooterPadding:`${o}px ${d}px`,layoutTriggerHeight:c+u*2,layoutZeroTriggerSize:c});return[Rce(f)]},e=>{const{colorBgLayout:t}=e;return{colorBgHeader:"#001529",colorBgBody:t,colorBgTrigger:"#002140"}});var a5=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const s5=b.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}});function D_(e){let{suffixCls:t,tagName:o,displayName:a}=e;return c=>b.forwardRef((d,f)=>b.createElement(c,Object.assign({ref:f,suffixCls:t,tagName:o},d)))}const l1=b.forwardRef((e,t)=>{const{prefixCls:o,suffixCls:a,className:c,tagName:u}=e,d=a5(e,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:f}=b.useContext(Oi),m=f("layout",o),[g,_]=o5(m),S=a?`${m}-${a}`:m;return g(b.createElement(u,Object.assign({className:lt(o||S,c,_),ref:t},d)))}),Ice=b.forwardRef((e,t)=>{const{direction:o}=b.useContext(Oi),[a,c]=b.useState([]),{prefixCls:u,className:d,rootClassName:f,children:m,hasSider:g,tagName:_}=e,S=a5(e,["prefixCls","className","rootClassName","children","hasSider","tagName"]),C=js(S,["suffixCls"]),{getPrefixCls:O}=b.useContext(Oi),I=O("layout",u),[A,L]=o5(I),N=lt(I,{[`${I}-has-sider`]:typeof g=="boolean"?g:a.length>0,[`${I}-rtl`]:o==="rtl"},d,f,L),P=b.useMemo(()=>({siderHook:{addSider:D=>{c(U=>[].concat(ft(U),[D]))},removeSider:D=>{c(U=>U.filter(B=>B!==D))}}}),[]);return A(b.createElement(s5.Provider,{value:P},b.createElement(_,Object.assign({ref:t,className:N},C),m)))}),wce=D_({tagName:"section",displayName:"Layout"})(Ice),Oce=D_({suffixCls:"header",tagName:"header",displayName:"Header"})(l1),Ace=D_({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(l1),Nce=D_({suffixCls:"content",tagName:"main",displayName:"Content"})(l1),Pce=wce;var xce=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const s4={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},u1=b.createContext({}),Dce=(()=>{let e=0;return function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e+=1,`${t}${e}`}})(),kce=b.forwardRef((e,t)=>{var{prefixCls:o,className:a,trigger:c,children:u,defaultCollapsed:d=!1,theme:f="dark",style:m={},collapsible:g=!1,reverseArrow:_=!1,width:S=200,collapsedWidth:C=80,zeroWidthTriggerStyle:O,breakpoint:I,onCollapse:A,onBreakpoint:L}=e,N=xce(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]);const{siderHook:P}=b.useContext(s5),[D,U]=b.useState("collapsed"in N?N.collapsed:d),[B,F]=b.useState(!1);b.useEffect(()=>{"collapsed"in N&&U(N.collapsed)},[N.collapsed]);const H=(q,ee)=>{"collapsed"in N||U(q),A==null||A(q,ee)},K=b.useRef();K.current=q=>{F(q.matches),L==null||L(q.matches),D!==q.matches&&H(q.matches,"responsive")},b.useEffect(()=>{function q(re){return K.current(re)}let ee;if(typeof window<"u"){const{matchMedia:re}=window;if(re&&I&&I in s4){ee=re(`(max-width: ${s4[I]})`);try{ee.addEventListener("change",q)}catch{ee.addListener(q)}q(ee)}}return()=>{try{ee==null||ee.removeEventListener("change",q)}catch{ee==null||ee.removeListener(q)}}},[I]),b.useEffect(()=>{const q=Dce("ant-sider-");return P.addSider(q),()=>P.removeSider(q)},[]);const te=()=>{H(!D,"clickTrigger")},{getPrefixCls:Y}=b.useContext(Oi),Q=()=>{const q=Y("layout-sider",o),ee=js(N,["collapsed"]),re=D?C:S,le=Cce(re)?`${re}px`:String(re),me=parseFloat(String(C||0))===0?b.createElement("span",{onClick:te,className:lt(`${q}-zero-width-trigger`,`${q}-zero-width-trigger-${_?"right":"left"}`),style:O},c||b.createElement(Ece,null)):null,Ee={expanded:_?b.createElement(AV,null):b.createElement(a4,null),collapsed:_?b.createElement(a4,null):b.createElement(AV,null)}[D?"collapsed":"expanded"],oe=c!==null?me||b.createElement("div",{className:`${q}-trigger`,onClick:te,style:{width:le}},c||Ee):null,ae=Object.assign(Object.assign({},m),{flex:`0 0 ${le}`,maxWidth:le,minWidth:le,width:le}),he=lt(q,`${q}-${f}`,{[`${q}-collapsed`]:!!D,[`${q}-has-trigger`]:g&&c!==null&&!me,[`${q}-below`]:!!B,[`${q}-zero-width`]:parseFloat(le)===0},a);return b.createElement("aside",Object.assign({className:he},ee,{style:ae,ref:t}),b.createElement("div",{className:`${q}-children`},u),g||B&&me?oe:null)},J=b.useMemo(()=>({siderCollapsed:D}),[D]);return b.createElement(u1.Provider,{value:J},Q())}),Lce=kce,Mce=b.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),Xv=Mce,Uce=e=>{var t;const{className:o,children:a,icon:c,title:u,danger:d}=e,{prefixCls:f,firstLevel:m,direction:g,disableMenuItemTitleTooltip:_,inlineCollapsed:S}=b.useContext(Xv),C=P=>{const D=b.createElement("span",{className:`${f}-title-content`},a);return(!c||ku(a)&&a.type==="span")&&a&&P&&m&&typeof a=="string"?b.createElement("div",{className:`${f}-inline-collapsed-noicon`},a.charAt(0)):D},{siderCollapsed:O}=b.useContext(u1);let I=u;typeof u>"u"?I=m?a:"":u===!1&&(I="");const A={title:I};!O&&!S&&(A.title=null,A.open=!1);const L=Nl(a).length;let N=b.createElement(N_,Object.assign({},js(e,["title","icon","danger"]),{className:lt({[`${f}-item-danger`]:d,[`${f}-item-only-child`]:(c?L+1:L)===1},o),title:typeof u=="string"?u:void 0}),kl(c,{className:lt(ku(c)?(t=c.props)===null||t===void 0?void 0:t.className:"",`${f}-item-icon`)}),C(S));return _||(N=b.createElement(Kv,Object.assign({},A,{placement:g==="rtl"?"left":"right",overlayClassName:`${f}-inline-collapsed-tooltip`}),N)),N},c5=Uce,Vce=e=>{var t;const{popupClassName:o,icon:a,title:c,theme:u}=e,d=b.useContext(Xv),{prefixCls:f,inlineCollapsed:m,theme:g,mode:_}=d,S=Fh();let C;if(!a)C=m&&!S.length&&c&&typeof c=="string"?b.createElement("div",{className:`${f}-inline-collapsed-noicon`},c.charAt(0)):b.createElement("span",{className:`${f}-title-content`},c);else{const A=ku(c)&&c.type==="span";C=b.createElement(b.Fragment,null,kl(a,{className:lt(ku(a)?(t=a.props)===null||t===void 0?void 0:t.className:"",`${f}-item-icon`)}),A?c:b.createElement("span",{className:`${f}-title-content`},c))}const O=b.useMemo(()=>Object.assign(Object.assign({},d),{firstLevel:!1}),[d]),I=_==="horizontal"?[0,8]:[10,0];return b.createElement(Xv.Provider,{value:O},b.createElement(P_,Object.assign({popupOffset:I},js(e,["icon"]),{title:C,popupClassName:lt(f,o,`${f}-${u||g}`)})))},l5=Vce;var Fce=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};function _I(e){return(e||[]).map((t,o)=>{if(t&&typeof t=="object"){const a=t,{label:c,children:u,key:d,type:f}=a,m=Fce(a,["label","children","key","type"]),g=d??`tmp-${o}`;return u||f==="group"?f==="group"?b.createElement(x_,Object.assign({key:g},m,{title:c}),_I(u)):b.createElement(l5,Object.assign({key:g},m,{title:c}),_I(u)):f==="divider"?b.createElement(n5,Object.assign({key:g},m)):b.createElement(c5,Object.assign({key:g},m),c)}return null}).filter(t=>t)}function Bce(e){return b.useMemo(()=>e&&_I(e),[e])}var jce=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const Hce=b.forwardRef((e,t)=>{var o,a;const c=b.useContext(o4),u=c||{},{getPrefixCls:d,getPopupContainer:f,direction:m}=b.useContext(Oi),g=d(),{prefixCls:_,className:S,theme:C="light",expandIcon:O,_internalDisableMenuItemTitleTooltip:I,inlineCollapsed:A,siderCollapsed:L,items:N,children:P,rootClassName:D,mode:U,selectable:B,onClick:F}=e,H=jce(e,["prefixCls","className","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","items","children","rootClassName","mode","selectable","onClick"]),K=js(H,["collapsedWidth"]),te=Bce(N)||P;(o=u.validator)===null||o===void 0||o.call(u,{mode:U});const Y=us(function(){var oe;F==null||F.apply(void 0,arguments),(oe=u.onClick)===null||oe===void 0||oe.call(u)}),Q=u.mode||U,J=B??u.selectable,q=b.useMemo(()=>L!==void 0?L:A,[A,L]),ee={horizontal:{motionName:`${g}-slide-up`},inline:Wie(g),other:{motionName:`${g}-zoom-big`}},re=d("menu",_||u.prefixCls),[le,me]=hce(re,!c),ue=lt(`${re}-${C}`,S);let ve;if(typeof O=="function")ve=O;else{const oe=O||u.expandIcon;ve=kl(oe,{className:lt(`${re}-submenu-expand-icon`,(a=oe==null?void 0:oe.props)===null||a===void 0?void 0:a.className)})}const Ee=b.useMemo(()=>({prefixCls:re,inlineCollapsed:q||!1,direction:m,firstLevel:!0,theme:C,mode:Q,disableMenuItemTitleTooltip:I}),[re,q,m,I,C]);return le(b.createElement(o4.Provider,{value:null},b.createElement(Xv.Provider,{value:Ee},b.createElement(am,Object.assign({getPopupContainer:f,overflowedIndicator:b.createElement(rce,null),overflowedIndicatorPopupClassName:`${re}-${C}`,mode:Q,selectable:J,onClick:Y},K,{inlineCollapsed:q,className:ue,prefixCls:re,direction:m,defaultMotions:ee,expandIcon:ve,ref:t,rootClassName:lt(D,me)}),te))))}),$ce=Hce,sm=b.forwardRef((e,t)=>{const o=b.useRef(null),a=b.useContext(u1);return b.useImperativeHandle(t,()=>({menu:o.current,focus:c=>{var u;(u=o.current)===null||u===void 0||u.focus(c)}})),b.createElement($ce,Object.assign({ref:o},e,a))});sm.Item=c5;sm.SubMenu=l5;sm.Divider=n5;sm.ItemGroup=x_;const Wce=sm,Gce=e=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),d1=e=>({borderColor:e.inputBorderHoverColor,borderInlineEndWidth:e.lineWidth}),SI=e=>({borderColor:e.inputBorderHoverColor,boxShadow:`0 0 0 ${e.controlOutlineWidth}px ${e.controlOutline}`,borderInlineEndWidth:e.lineWidth,outline:0}),u5=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover":Object.assign({},d1(fa(e,{inputBorderHoverColor:e.colorBorder})))}),d5=e=>{const{inputPaddingVerticalLG:t,fontSizeLG:o,lineHeightLG:a,borderRadiusLG:c,inputPaddingHorizontalLG:u}=e;return{padding:`${t}px ${u}px`,fontSize:o,lineHeight:a,borderRadius:c}},h5=e=>({padding:`${e.inputPaddingVerticalSM}px ${e.controlPaddingHorizontalSM-1}px`,borderRadius:e.borderRadiusSM}),p5=(e,t)=>{const{componentCls:o,colorError:a,colorWarning:c,colorErrorOutline:u,colorWarningOutline:d,colorErrorBorderHover:f,colorWarningBorderHover:m}=e;return{[`&-status-error:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:a,"&:hover":{borderColor:f},"&:focus, &-focused":Object.assign({},SI(fa(e,{inputBorderActiveColor:a,inputBorderHoverColor:a,controlOutline:u}))),[`${o}-prefix, ${o}-suffix`]:{color:a}},[`&-status-warning:not(${t}-disabled):not(${t}-borderless)${t}`]:{borderColor:c,"&:hover":{borderColor:m},"&:focus, &-focused":Object.assign({},SI(fa(e,{inputBorderActiveColor:c,inputBorderHoverColor:c,controlOutline:d}))),[`${o}-prefix, ${o}-suffix`]:{color:c}}}},f5=e=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${e.inputPaddingVertical}px ${e.inputPaddingHorizontal}px`,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,backgroundColor:e.colorBgContainer,backgroundImage:"none",borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:e.colorBorder,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`},Gce(e.colorTextPlaceholder)),{"&:hover":Object.assign({},d1(e)),"&:focus, &-focused":Object.assign({},SI(e)),"&-disabled, &[disabled]":Object.assign({},u5(e)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},d5(e)),"&-sm":Object.assign({},h5(e)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}}),zce=e=>{const{componentCls:t,antCls:o}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,["&[class*='col-']"]:{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${t}, &-lg > ${t}-group-addon`]:Object.assign({},d5(e)),[`&-sm ${t}, &-sm > ${t}-group-addon`]:Object.assign({},h5(e)),[`&-lg ${o}-select-single ${o}-select-selector`]:{height:e.controlHeightLG},[`&-sm ${o}-select-single ${o}-select-selector`]:{height:e.controlHeightSM},[`> ${t}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${t}-group`]:{["&-addon, &-wrap"]:{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${e.inputPaddingHorizontal}px`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,textAlign:"center",backgroundColor:e.colorFillAlter,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${o}-select`]:{margin:`-${e.inputPaddingVertical+1}px -${e.inputPaddingHorizontal}px`,[`&${o}-select-single:not(${o}-select-customize-input)`]:{[`${o}-select-selector`]:{backgroundColor:"inherit",border:`${e.lineWidth}px ${e.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${o}-select-selector`]:{color:e.colorPrimary}}},[`${o}-cascader-picker`]:{margin:`-9px -${e.inputPaddingHorizontal}px`,backgroundColor:"transparent",[`${o}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},[`${t}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${t}-search-with-button &`]:{zIndex:0}}},[`> ${t}:first-child, ${t}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${o}-select ${o}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}-affix-wrapper`]:{[`&:not(:first-child) ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}:last-child, ${t}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${o}-select ${o}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${t}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${t}-search &`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}},[`&:not(:first-child), ${t}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${t}-group-compact`]:Object.assign(Object.assign({display:"block"},XR()),{[`${t}-group-addon, ${t}-group-wrap, > ${t}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`& > ${t}-affix-wrapper`]:{display:"inline-flex"},[`& > ${o}-picker-range`]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:-e.lineWidth,borderInlineEndWidth:e.lineWidth},[`${t}`]:{float:"none"},[`& > ${o}-select > ${o}-select-selector,
      & > ${o}-select-auto-complete ${t},
      & > ${o}-cascader-picker ${t},
      & > ${t}-group-wrapper ${t}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${o}-select-focused`]:{zIndex:1},[`& > ${o}-select > ${o}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${o}-select:first-child > ${o}-select-selector,
      & > ${o}-select-auto-complete:first-child ${t},
      & > ${o}-cascader-picker:first-child ${t}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,
      & > ${o}-select:last-child > ${o}-select-selector,
      & > ${o}-cascader-picker:last-child ${t},
      & > ${o}-cascader-picker-focused:last-child ${t}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${o}-select-auto-complete ${t}`]:{verticalAlign:"top"},[`${t}-group-wrapper + ${t}-group-wrapper`]:{marginInlineStart:-e.lineWidth,[`${t}-affix-wrapper`]:{borderRadius:0}},[`${t}-group-wrapper:not(:last-child)`]:{[`&${t}-search > ${t}-group`]:{[`& > ${t}-group-addon > ${t}-search-button`]:{borderRadius:0},[`& > ${t}`]:{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}}}})}},Kce=e=>{const{componentCls:t,controlHeightSM:o,lineWidth:a}=e,c=16,u=(o-a*2-c)/2;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},C_(e)),f5(e)),p5(e,t)),{'&[type="color"]':{height:e.controlHeight,[`&${t}-lg`]:{height:e.controlHeightLG},[`&${t}-sm`]:{height:o,paddingTop:u,paddingBottom:u}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},Yce=e=>{const{componentCls:t}=e;return{[`${t}-clear-icon`]:{margin:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${e.inputAffixPadding}px`}}}},qce=e=>{const{componentCls:t,inputAffixPadding:o,colorTextDescription:a,motionDurationSlow:c,colorIcon:u,colorIconHover:d,iconCls:f}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},f5(e)),{display:"inline-flex",[`&:not(${t}-affix-wrapper-disabled):hover`]:Object.assign(Object.assign({},d1(e)),{zIndex:1,[`${t}-search-with-button &`]:{zIndex:0}}),"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${t}[disabled]`]:{background:"transparent"}},[`> input${t}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{width:0,visibility:"hidden",content:'"\\a0"'},[`${t}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:a},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:o},"&-suffix":{marginInlineStart:o}}}),Yce(e)),{[`${f}${t}-password-icon`]:{color:u,cursor:"pointer",transition:`all ${c}`,"&:hover":{color:d}}}),p5(e,`${t}-affix-wrapper`))}},Xce=e=>{const{componentCls:t,colorError:o,colorWarning:a,borderRadiusLG:c,borderRadiusSM:u}=e;return{[`${t}-group`]:Object.assign(Object.assign(Object.assign({},C_(e)),zce(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${t}-group-addon`]:{borderRadius:c}},"&-sm":{[`${t}-group-addon`]:{borderRadius:u}},"&-status-error":{[`${t}-group-addon`]:{color:o,borderColor:o}},"&-status-warning":{[`${t}-group-addon`]:{color:a,borderColor:a}},"&-disabled":{[`${t}-group-addon`]:Object.assign({},u5(e))}}})}},Jce=e=>{const{componentCls:t,antCls:o}=e,a=`${t}-search`;return{[a]:{[`${t}`]:{"&:hover, &:focus":{borderColor:e.colorPrimaryHover,[`+ ${t}-group-addon ${a}-button:not(${o}-btn-primary)`]:{borderInlineStartColor:e.colorPrimaryHover}}},[`${t}-affix-wrapper`]:{borderRadius:0},[`${t}-lg`]:{lineHeight:e.lineHeightLG-2e-4},[`> ${t}-group`]:{[`> ${t}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${a}-button`]:{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius,borderEndStartRadius:0},[`${a}-button:not(${o}-btn-primary)`]:{color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive},[`&${o}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${a}-button`]:{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${a}-button`]:{height:e.controlHeightLG},[`&-small ${a}-button`]:{height:e.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${t}-compact-item`]:{[`&:not(${t}-compact-last-item)`]:{[`${t}-group-addon`]:{[`${t}-search-button`]:{marginInlineEnd:-e.lineWidth,borderRadius:0}}},[`&:not(${t}-compact-first-item)`]:{[`${t},${t}-affix-wrapper`]:{borderRadius:0}},[`> ${t}-group-addon ${t}-search-button,
        > ${t},
        ${t}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${t}-affix-wrapper-focused`]:{zIndex:2}}}}};function m5(e){return fa(e,{inputAffixPadding:e.paddingXXS,inputPaddingVertical:Math.max(Math.round((e.controlHeight-e.fontSize*e.lineHeight)/2*10)/10-e.lineWidth,3),inputPaddingVerticalLG:Math.ceil((e.controlHeightLG-e.fontSizeLG*e.lineHeightLG)/2*10)/10-e.lineWidth,inputPaddingVerticalSM:Math.max(Math.round((e.controlHeightSM-e.fontSize*e.lineHeight)/2*10)/10-e.lineWidth,0),inputPaddingHorizontal:e.paddingSM-e.lineWidth,inputPaddingHorizontalSM:e.paddingXS-e.lineWidth,inputPaddingHorizontalLG:e.controlPaddingHorizontal-e.lineWidth,inputBorderHoverColor:e.colorPrimaryHover,inputBorderActiveColor:e.colorPrimaryHover})}const Qce=e=>{const{componentCls:t,paddingLG:o}=e,a=`${t}-textarea`;return{[a]:{position:"relative","&-show-count":{[`> ${t}`]:{height:"100%"},[`${t}-data-count`]:{position:"absolute",bottom:-e.fontSize*e.lineHeight,insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`&-affix-wrapper${a}-has-feedback`]:{[`${t}`]:{paddingInlineEnd:o}},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingXS,insetBlockStart:e.paddingXS},[`${a}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.inputPaddingHorizontal,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},Zce=Hu("Input",e=>{const t=m5(e);return[Kce(t),Qce(t),qce(t),Xce(t),Jce(t),d8(t)]});function zd(e){return!!(e.addonBefore||e.addonAfter)}function ib(e){return!!(e.prefix||e.suffix||e.allowClear)}function ob(e,t,o,a){if(o){var c=t;if(t.type==="click"){var u=e.cloneNode(!0);c=Object.create(t,{target:{value:u},currentTarget:{value:u}}),u.value="",o(c);return}if(a!==void 0){c=Object.create(t,{target:{value:e},currentTarget:{value:e}}),e.value=a,o(c);return}o(c)}}function ele(e){return typeof e>"u"||e===null?"":String(e)}var tle=function(t){var o,a,c=t.inputElement,u=t.prefixCls,d=t.prefix,f=t.suffix,m=t.addonBefore,g=t.addonAfter,_=t.className,S=t.style,C=t.disabled,O=t.readOnly,I=t.focused,A=t.triggerFocus,L=t.allowClear,N=t.value,P=t.handleReset,D=t.hidden,U=t.classes,B=t.classNames,F=t.dataAttrs,H=t.styles,K=b.useRef(null),te=function(oe){var ae;(ae=K.current)!==null&&ae!==void 0&&ae.contains(oe.target)&&(A==null||A())},Y=function(){var oe;if(!L)return null;var ae=!C&&!O&&N,he="".concat(u,"-clear-icon"),pe=Nn(L)==="object"&&L!==null&&L!==void 0&&L.clearIcon?L.clearIcon:"✖";return ht.createElement("span",{onClick:P,onMouseDown:function(Le){return Le.preventDefault()},className:lt(he,(oe={},Ne(oe,"".concat(he,"-hidden"),!ae),Ne(oe,"".concat(he,"-has-suffix"),!!f),oe)),role:"button",tabIndex:-1},pe)},Q=b.cloneElement(c,{value:N,hidden:D,className:lt((o=c.props)===null||o===void 0?void 0:o.className,!ib(t)&&!zd(t)&&_)||null,style:de(de({},(a=c.props)===null||a===void 0?void 0:a.style),!ib(t)&&!zd(t)?S:{})});if(ib(t)){var J,q="".concat(u,"-affix-wrapper"),ee=lt(q,(J={},Ne(J,"".concat(q,"-disabled"),C),Ne(J,"".concat(q,"-focused"),I),Ne(J,"".concat(q,"-readonly"),O),Ne(J,"".concat(q,"-input-with-clear-btn"),f&&L&&N),J),!zd(t)&&_,U==null?void 0:U.affixWrapper),re=(f||L)&&ht.createElement("span",{className:lt("".concat(u,"-suffix"),B==null?void 0:B.suffix),style:H==null?void 0:H.suffix},Y(),f);Q=ht.createElement("span",Be({className:ee,style:zd(t)?void 0:S,hidden:!zd(t)&&D,onClick:te},F==null?void 0:F.affixWrapper,{ref:K}),d&&ht.createElement("span",{className:lt("".concat(u,"-prefix"),B==null?void 0:B.prefix),style:H==null?void 0:H.prefix},d),b.cloneElement(c,{value:N,hidden:null}),re)}if(zd(t)){var le="".concat(u,"-group"),me="".concat(le,"-addon"),ue=lt("".concat(u,"-wrapper"),le,U==null?void 0:U.wrapper),ve=lt("".concat(u,"-group-wrapper"),_,U==null?void 0:U.group);return ht.createElement("span",{className:ve,style:S,hidden:D},ht.createElement("span",{className:ue},m&&ht.createElement("span",{className:me},m),b.cloneElement(Q,{hidden:null}),g&&ht.createElement("span",{className:me},g)))}return Q};globalThis&&globalThis.__rest;function nle(e,t){if(!e)return;e.focus(t);const{cursor:o}=t||{};if(o){const a=e.value.length;switch(o){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(a,a);break;default:e.setSelectionRange(0,a);break}}}var rle=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,ile=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],ab={},Ma;function ole(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&ab[o])return ab[o];var a=window.getComputedStyle(e),c=a.getPropertyValue("box-sizing")||a.getPropertyValue("-moz-box-sizing")||a.getPropertyValue("-webkit-box-sizing"),u=parseFloat(a.getPropertyValue("padding-bottom"))+parseFloat(a.getPropertyValue("padding-top")),d=parseFloat(a.getPropertyValue("border-bottom-width"))+parseFloat(a.getPropertyValue("border-top-width")),f=ile.map(function(g){return"".concat(g,":").concat(a.getPropertyValue(g))}).join(";"),m={sizingStyle:f,paddingSize:u,borderSize:d,boxSizing:c};return t&&o&&(ab[o]=m),m}function ale(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Ma||(Ma=document.createElement("textarea"),Ma.setAttribute("tab-index","-1"),Ma.setAttribute("aria-hidden","true"),document.body.appendChild(Ma)),e.getAttribute("wrap")?Ma.setAttribute("wrap",e.getAttribute("wrap")):Ma.removeAttribute("wrap");var c=ole(e,t),u=c.paddingSize,d=c.borderSize,f=c.boxSizing,m=c.sizingStyle;Ma.setAttribute("style","".concat(m,";").concat(rle)),Ma.value=e.value||e.placeholder||"";var g=void 0,_=void 0,S,C=Ma.scrollHeight;if(f==="border-box"?C+=d:f==="content-box"&&(C-=u),o!==null||a!==null){Ma.value=" ";var O=Ma.scrollHeight-u;o!==null&&(g=O*o,f==="border-box"&&(g=g+u+d),C=Math.max(g,C)),a!==null&&(_=O*a,f==="border-box"&&(_=_+u+d),S=C>_?"":"hidden",C=Math.min(_,C))}var I={height:C,overflowY:S,resize:"none"};return g&&(I.minHeight=g),_&&(I.maxHeight=_),I}var sle=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],sb=0,cb=1,lb=2,cle=b.forwardRef(function(e,t){var o=e,a=o.prefixCls;o.onPressEnter;var c=o.defaultValue,u=o.value,d=o.autoSize,f=o.onResize,m=o.className,g=o.style,_=o.disabled,S=o.onChange;o.onInternalAutoSize;var C=Sn(o,sle),O=wl(c,{value:u,postState:function(pe){return pe??""}}),I=xe(O,2),A=I[0],L=I[1],N=function(pe){L(pe.target.value),S==null||S(pe)},P=b.useRef();b.useImperativeHandle(t,function(){return{textArea:P.current}});var D=b.useMemo(function(){return d&&Nn(d)==="object"?[d.minRows,d.maxRows]:[]},[d]),U=xe(D,2),B=U[0],F=U[1],H=!!d,K=function(){try{if(document.activeElement===P.current){var pe=P.current,Ae=pe.selectionStart,Le=pe.selectionEnd,Qe=pe.scrollTop;P.current.setSelectionRange(Ae,Le),P.current.scrollTop=Qe}}catch{}},te=b.useState(lb),Y=xe(te,2),Q=Y[0],J=Y[1],q=b.useState(),ee=xe(q,2),re=ee[0],le=ee[1],me=function(){J(sb)};Sr(function(){H&&me()},[u,B,F,H]),Sr(function(){if(Q===sb)J(cb);else if(Q===cb){var he=ale(P.current,!1,B,F);J(lb),le(he)}else K()},[Q]);var ue=b.useRef(),ve=function(){Ei.cancel(ue.current)},Ee=function(pe){Q===lb&&(f==null||f(pe),d&&(ve(),ue.current=Ei(function(){me()})))};b.useEffect(function(){return ve},[]);var oe=H?re:null,ae=de(de({},g),oe);return(Q===sb||Q===cb)&&(ae.overflowY="hidden",ae.overflowX="hidden"),b.createElement(Bu,{onResize:Ee,disabled:!(d||f)},b.createElement("textarea",Be({},C,{ref:P,style:ae,className:lt(a,m,Ne({},"".concat(a,"-disabled"),_)),disabled:_,value:A,onChange:N})))}),lle=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","className","style","disabled","hidden","classNames","styles"];function g5(e,t){return ft(e||"").slice(0,t).join("")}function c4(e,t,o,a){var c=o;return e?c=g5(o,a):ft(t||"").length<o.length&&ft(o||"").length>a&&(c=t),c}var ule=ht.forwardRef(function(e,t){var o,a=e.defaultValue,c=e.value,u=e.onFocus,d=e.onBlur,f=e.onChange,m=e.allowClear,g=e.maxLength,_=e.onCompositionStart,S=e.onCompositionEnd,C=e.suffix,O=e.prefixCls,I=O===void 0?"rc-textarea":O,A=e.classes,L=e.showCount,N=e.className,P=e.style,D=e.disabled,U=e.hidden,B=e.classNames,F=e.styles,H=Sn(e,lle),K=wl(a,{value:c,defaultValue:a}),te=xe(K,2),Y=te[0],Q=te[1],J=b.useRef(null),q=ht.useState(!1),ee=xe(q,2),re=ee[0],le=ee[1],me=ht.useState(!1),ue=xe(me,2),ve=ue[0],Ee=ue[1],oe=ht.useRef(),ae=ht.useRef(0),he=function(){J.current.textArea.focus()};b.useImperativeHandle(t,function(){return{resizableTextArea:J.current,focus:he,blur:function(){J.current.textArea.blur()}}}),b.useEffect(function(){le(function(xt){return!D&&xt})},[D]);var pe=Number(g)>0,Ae=function(Xe){Ee(!0),oe.current=Y,ae.current=Xe.currentTarget.selectionStart,_==null||_(Xe)},Le=function(Xe){Ee(!1);var $e=Xe.currentTarget.value;if(pe){var ze,tt=ae.current>=g+1||ae.current===((ze=oe.current)===null||ze===void 0?void 0:ze.length);$e=c4(tt,oe.current,$e,g)}$e!==Y&&(Q($e),ob(Xe.currentTarget,Xe,f,$e)),S==null||S(Xe)},Qe=function(Xe){var $e=Xe.target.value;if(!ve&&pe){var ze=Xe.target.selectionStart>=g+1||Xe.target.selectionStart===$e.length||!Xe.target.selectionStart;$e=c4(ze,Y,$e,g)}Q($e),ob(Xe.currentTarget,Xe,f,$e)},je=function(Xe){var $e=H.onPressEnter,ze=H.onKeyDown;Xe.key==="Enter"&&$e&&$e(Xe),ze==null||ze(Xe)},Ut=function(Xe){le(!0),u==null||u(Xe)},Nt=function(Xe){le(!1),d==null||d(Xe)},at=function(Xe){Q(""),he(),ob(J.current.textArea,Xe,f)},Ht=ele(Y);!ve&&pe&&c==null&&(Ht=g5(Ht,g));var He=C,ot;if(L){var It=ft(Ht).length;Nn(L)==="object"?ot=L.formatter({value:Ht,count:It,maxLength:g}):ot="".concat(It).concat(pe?" / ".concat(g):""),He=ht.createElement(ht.Fragment,null,He,ht.createElement("span",{className:lt("".concat(I,"-data-count"),B==null?void 0:B.count),style:F==null?void 0:F.count},ot))}var tn=ht.createElement(tle,{value:Ht,allowClear:m,handleReset:at,suffix:He,prefixCls:I,classes:{affixWrapper:lt(A==null?void 0:A.affixWrapper,(o={},Ne(o,"".concat(I,"-show-count"),L),Ne(o,"".concat(I,"-textarea-allow-clear"),m),o))},disabled:D,focused:re,className:N,style:P,dataAttrs:{affixWrapper:{"data-count":typeof ot=="string"?ot:void 0}},hidden:U,inputElement:ht.createElement(cle,Be({},H,{onKeyDown:je,onChange:Qe,onFocus:Ut,onBlur:Nt,onCompositionStart:Ae,onCompositionEnd:Le,className:B==null?void 0:B.textarea,style:de(de({},F==null?void 0:F.textarea),{},{resize:P==null?void 0:P.resize}),disabled:D,prefixCls:I,ref:J}))});return tn}),dle=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const hle=b.forwardRef((e,t)=>{var{prefixCls:o,bordered:a=!0,size:c,disabled:u,status:d,allowClear:f,showCount:m,classNames:g}=e,_=dle(e,["prefixCls","bordered","size","disabled","status","allowClear","showCount","classNames"]);const{getPrefixCls:S,direction:C}=b.useContext(Oi),O=b.useContext(tm),I=c||O,A=b.useContext(Gw),L=u??A,{status:N,hasFeedback:P,feedbackIcon:D}=b.useContext(Zie),U=Xoe(N,d),B=b.useRef(null);b.useImperativeHandle(t,()=>{var Y;return{resizableTextArea:(Y=B.current)===null||Y===void 0?void 0:Y.resizableTextArea,focus:Q=>{var J,q;nle((q=(J=B.current)===null||J===void 0?void 0:J.resizableTextArea)===null||q===void 0?void 0:q.textArea,Q)},blur:()=>{var Q;return(Q=B.current)===null||Q===void 0?void 0:Q.blur()}}});const F=S("input",o);let H;typeof f=="object"&&(f!=null&&f.clearIcon)?H=f:f&&(H={clearIcon:b.createElement(_re,null)});const[K,te]=Zce(F);return K(b.createElement(ule,Object.assign({},_,{disabled:L,allowClear:H,classes:{affixWrapper:lt(`${F}-textarea-affix-wrapper`,{[`${F}-affix-wrapper-rtl`]:C==="rtl",[`${F}-affix-wrapper-borderless`]:!a,[`${F}-affix-wrapper-sm`]:I==="small",[`${F}-affix-wrapper-lg`]:I==="large",[`${F}-textarea-show-count`]:m},wV(`${F}-affix-wrapper`,U),te)},classNames:Object.assign(Object.assign({},g),{textarea:lt({[`${F}-borderless`]:!a,[`${F}-sm`]:I==="small",[`${F}-lg`]:I==="large"},wV(F,U),te,g==null?void 0:g.textarea)}),prefixCls:F,suffix:P&&b.createElement("span",{className:`${F}-textarea-suffix`},D),showCount:m,ref:B})))}),ple=hle,cm=Pce;cm.Header=Oce;cm.Footer=Ace;cm.Content=Nce;cm.Sider=Lce;const yI=cm;var fle={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const mle=fle;var v5=function(t,o){return b.createElement(Hs,de(de({},t),{},{ref:o,icon:mle}))};v5.displayName="CopyOutlined";const gle=b.forwardRef(v5);var vle={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};const Ele=vle;var E5=function(t,o){return b.createElement(Hs,de(de({},t),{},{ref:o,icon:Ele}))};E5.displayName="EditOutlined";const _le=b.forwardRef(E5);var Sle={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};const yle=Sle;var _5=function(t,o){return b.createElement(Hs,de(de({},t),{},{ref:o,icon:yle}))};_5.displayName="EnterOutlined";const Cle=b.forwardRef(_5);var Tle=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const ble={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},Rle=b.forwardRef((e,t)=>{const o=g=>{const{keyCode:_}=g;_===ut.ENTER&&g.preventDefault()},a=g=>{const{keyCode:_}=g,{onClick:S}=e;_===ut.ENTER&&S&&S()},{style:c,noStyle:u,disabled:d}=e,f=Tle(e,["style","noStyle","disabled"]);let m={};return u||(m=Object.assign({},ble)),d&&(m.pointerEvents="none"),m=Object.assign(Object.assign({},m),c),b.createElement("div",Object.assign({role:"button",tabIndex:0,ref:t},f,{onKeyDown:o,onKeyUp:a,style:m}))}),l4=Rle;var Ile=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,o=[],a=0;a<e.rangeCount;a++)o.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||o.forEach(function(c){e.addRange(c)}),t&&t.focus()}},wle=Ile,u4={"text/plain":"Text","text/html":"Url",default:"Text"},Ole="Copy to clipboard: #{key}, Enter";function Ale(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function Nle(e,t){var o,a,c,u,d,f,m=!1;t||(t={}),o=t.debug||!1;try{c=wle(),u=document.createRange(),d=document.getSelection(),f=document.createElement("span"),f.textContent=e,f.ariaHidden="true",f.style.all="unset",f.style.position="fixed",f.style.top=0,f.style.clip="rect(0, 0, 0, 0)",f.style.whiteSpace="pre",f.style.webkitUserSelect="text",f.style.MozUserSelect="text",f.style.msUserSelect="text",f.style.userSelect="text",f.addEventListener("copy",function(_){if(_.stopPropagation(),t.format)if(_.preventDefault(),typeof _.clipboardData>"u"){o&&console.warn("unable to use e.clipboardData"),o&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var S=u4[t.format]||u4.default;window.clipboardData.setData(S,e)}else _.clipboardData.clearData(),_.clipboardData.setData(t.format,e);t.onCopy&&(_.preventDefault(),t.onCopy(_.clipboardData))}),document.body.appendChild(f),u.selectNodeContents(f),d.addRange(u);var g=document.execCommand("copy");if(!g)throw new Error("copy command was unsuccessful");m=!0}catch(_){o&&console.error("unable to copy using execCommand: ",_),o&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),m=!0}catch(S){o&&console.error("unable to copy using clipboardData: ",S),o&&console.error("falling back to prompt"),a=Ale("message"in t?t.message:Ole),window.prompt(a,e)}}finally{d&&(typeof d.removeRange=="function"?d.removeRange(u):d.removeAllRanges()),f&&document.body.removeChild(f),c()}return m}var Ple=Nle;const xle=(e,t,o,a)=>{const{sizeMarginHeadingVerticalEnd:c,fontWeightStrong:u}=a;return{marginBottom:c,color:o,fontWeight:u,fontSize:e,lineHeight:t}},Dle=e=>{const t=[1,2,3,4,5],o={};return t.forEach(a=>{o[`
      h${a}&,
      div&-h${a},
      div&-h${a} > textarea,
      h${a}
    `]=xle(e[`fontSizeHeading${a}`],e[`lineHeightHeading${a}`],e.colorTextHeading,e)}),o},kle=e=>{const{componentCls:t}=e;return{"a&, a":Object.assign(Object.assign({},Fj(e)),{textDecoration:e.linkDecoration,"&:active, &:hover":{textDecoration:e.linkHoverDecoration},[`&[disabled], &${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:e.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},Lle=e=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:Rne[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:e.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),Mle=e=>{const{componentCls:t}=e,a=m5(e).inputPaddingVertical+1;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:-e.paddingSM,marginTop:-a,marginBottom:`calc(1em - ${a}px)`},[`${t}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:e.marginXS+2,insetBlockEnd:e.marginXS,color:e.colorTextDescription,fontWeight:"normal",fontSize:e.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},Ule=e=>({"&-copy-success":{[`
    &,
    &:hover,
    &:focus`]:{color:e.colorSuccess}}}),Vle=()=>({[`
  a&-ellipsis,
  span&-ellipsis
  `]:{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),Fle=e=>{const{componentCls:t,sizeMarginHeadingVerticalStart:o}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorText,wordBreak:"break-word",lineHeight:e.lineHeight,[`&${t}-secondary`]:{color:e.colorTextDescription},[`&${t}-success`]:{color:e.colorSuccess},[`&${t}-warning`]:{color:e.colorWarning},[`&${t}-danger`]:{color:e.colorError,"a&:active, a&:focus":{color:e.colorErrorActive},"a&:hover":{color:e.colorErrorHover}},[`&${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},[`
        div&,
        p
      `]:{marginBottom:"1em"}},Dle(e)),{[`
      & + h1${t},
      & + h2${t},
      & + h3${t},
      & + h4${t},
      & + h5${t}
      `]:{marginTop:o},[`
      div,
      ul,
      li,
      p,
      h1,
      h2,
      h3,
      h4,
      h5`]:{[`
        + h1,
        + h2,
        + h3,
        + h4,
        + h5
        `]:{marginTop:o}}}),Lle(e)),kle(e)),{[`
        ${t}-expand,
        ${t}-edit,
        ${t}-copy
      `]:Object.assign(Object.assign({},Fj(e)),{marginInlineStart:e.marginXXS})}),Mle(e)),Ule(e)),Vle()),{"&-rtl":{direction:"rtl"}})}},S5=Hu("Typography",e=>[Fle(e)],{sizeMarginHeadingVerticalStart:"1.2em",sizeMarginHeadingVerticalEnd:"0.5em"}),Ble=e=>{let{prefixCls:t,"aria-label":o,className:a,style:c,direction:u,maxLength:d,autoSize:f=!0,value:m,onSave:g,onCancel:_,onEnd:S,component:C,enterIcon:O=b.createElement(Cle,null)}=e;const I=b.useRef(null),A=b.useRef(!1),L=b.useRef(),[N,P]=b.useState(m);b.useEffect(()=>{P(m)},[m]),b.useEffect(()=>{if(I.current&&I.current.resizableTextArea){const{textArea:ee}=I.current.resizableTextArea;ee.focus();const{length:re}=ee.value;ee.setSelectionRange(re,re)}},[]);const D=ee=>{let{target:re}=ee;P(re.value.replace(/[\n\r]/g,""))},U=()=>{A.current=!0},B=()=>{A.current=!1},F=ee=>{let{keyCode:re}=ee;A.current||(L.current=re)},H=()=>{g(N.trim())},K=ee=>{let{keyCode:re,ctrlKey:le,altKey:me,metaKey:ue,shiftKey:ve}=ee;L.current===re&&!A.current&&!le&&!me&&!ue&&!ve&&(re===ut.ENTER?(H(),S==null||S()):re===ut.ESC&&_())},te=()=>{H()},Y=C?`${t}-${C}`:"",[Q,J]=S5(t),q=lt(t,`${t}-edit-content`,{[`${t}-rtl`]:u==="rtl"},a,Y,J);return Q(b.createElement("div",{className:q,style:c},b.createElement(ple,{ref:I,maxLength:d,value:N,onChange:D,onKeyDown:F,onKeyUp:K,onCompositionStart:U,onCompositionEnd:B,onBlur:te,"aria-label":o,rows:1,autoSize:f}),O!==null?kl(O,{className:`${t}-edit-content-confirm`}):null))},jle=Ble;function ub(e,t){return b.useMemo(()=>{const o=!!e;return[o,Object.assign(Object.assign({},t),o&&typeof e=="object"?e:null)]},[e])}const Hle=(e,t)=>{const o=b.useRef(!1);b.useEffect(()=>{o.current?e():o.current=!0},t)},$le=Hle;var Wle=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const Gle=b.forwardRef((e,t)=>{var{prefixCls:o,component:a="article",className:c,rootClassName:u,setContentRef:d,children:f,direction:m}=e,g=Wle(e,["prefixCls","component","className","rootClassName","setContentRef","children","direction"]);const{getPrefixCls:_,direction:S}=b.useContext(Oi),C=m??S;let O=t;d&&(O=Rc(t,d));const I=_("typography",o),[A,L]=S5(I),N=lt(I,{[`${I}-rtl`]:C==="rtl"},c,u,L);return A(b.createElement(a,Object.assign({className:N,ref:O},g),f))}),y5=Gle;function C5(e){const t=typeof e;return t==="string"||t==="number"}function zle(e){let t=0;return e.forEach(o=>{C5(o)?t+=String(o).length:t+=1}),t}function d4(e,t){let o=0;const a=[];for(let c=0;c<e.length;c+=1){if(o===t)return a;const u=e[c],f=C5(u)?String(u).length:1,m=o+f;if(m>t){const g=t-o;return a.push(String(u).slice(0,g)),a}a.push(u),o=m}return e}const Kle=0,Ag=1,h4=2,db=3,p4=4,Yle=e=>{let{enabledMeasure:t,children:o,text:a,width:c,fontSize:u,rows:d,onEllipsis:f}=e;const[[m,g,_],S]=b.useState([0,0,0]),[C,O]=b.useState(Kle),[I,A]=b.useState(0),L=b.useRef(null),N=b.useRef(null),P=b.useMemo(()=>Nl(a),[a]),D=b.useMemo(()=>zle(P),[P]),U=b.useMemo(()=>!t||C!==db?o(P,!1):o(d4(P,g),g<D),[t,C,o,P,g,D]);Sr(()=>{t&&c&&u&&D&&(O(Ag),S([0,Math.ceil(D/2),D]))},[t,c,u,a,D,d]),Sr(()=>{var K;C===Ag&&A(((K=L.current)===null||K===void 0?void 0:K.offsetHeight)||0)},[C]),Sr(()=>{var K,te;if(I){if(C===Ag){const Y=((K=N.current)===null||K===void 0?void 0:K.offsetHeight)||0,Q=d*I;Y<=Q?(O(p4),f(!1)):O(h4)}else if(C===h4)if(m!==_){const Y=((te=N.current)===null||te===void 0?void 0:te.offsetHeight)||0,Q=d*I;let J=m,q=_;m===_-1?q=m:Y<=Q?J=g:q=g;const ee=Math.ceil((J+q)/2);S([J,ee,q])}else O(db),f(!0)}},[C,m,_,d,I]);const B={width:c,whiteSpace:"normal",margin:0,padding:0},F=(K,te,Y)=>b.createElement("span",{"aria-hidden":!0,ref:te,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.floor(u/2)*2},Y)},K),H=(K,te)=>{const Y=d4(P,K);return F(o(Y,!0),te,B)};return b.createElement(b.Fragment,null,U,t&&C!==db&&C!==p4&&b.createElement(b.Fragment,null,F("lg",L,{wordBreak:"keep-all",whiteSpace:"nowrap"}),C===Ag?F(o(P,!1),N,B):H(g,N)))},qle=Yle,Xle=e=>{let{enabledEllipsis:t,isEllipsis:o,children:a,tooltipProps:c}=e;return!(c!=null&&c.title)||!t?a:b.createElement(Kv,Object.assign({open:o?void 0:!1},c),a)},Jle=Xle;var Qle=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};function Zle(e,t){let{mark:o,code:a,underline:c,delete:u,strong:d,keyboard:f,italic:m}=e,g=t;function _(S,C){C&&(g=b.createElement(S,{},g))}return _("strong",d),_("u",c),_("del",u),_("code",a),_("mark",o),_("kbd",f),_("i",m),g}function Ng(e,t,o){return e===!0||e===void 0?t:e||o&&t}function f4(e){return e===!1?[!1,!1]:Array.isArray(e)?e:[e]}const eue="...",tue=b.forwardRef((e,t)=>{var o,a,c;const{prefixCls:u,className:d,style:f,type:m,disabled:g,children:_,ellipsis:S,editable:C,copyable:O,component:I,title:A}=e,L=Qle(e,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:N,direction:P}=b.useContext(Oi),[D]=ine("Text"),U=b.useRef(null),B=b.useRef(null),F=N("typography",u),H=js(L,["mark","code","delete","underline","strong","keyboard","italic"]),[K,te]=ub(C),[Y,Q]=wl(!1,{value:te.editing}),{triggerType:J=["icon"]}=te,q=qe=>{var dt;qe&&((dt=te.onStart)===null||dt===void 0||dt.call(te)),Q(qe)};$le(()=>{var qe;Y||(qe=B.current)===null||qe===void 0||qe.focus()},[Y]);const ee=qe=>{qe==null||qe.preventDefault(),q(!0)},re=qe=>{var dt;(dt=te.onChange)===null||dt===void 0||dt.call(te,qe),q(!1)},le=()=>{var qe;(qe=te.onCancel)===null||qe===void 0||qe.call(te),q(!1)},[me,ue]=ub(O),[ve,Ee]=b.useState(!1),oe=b.useRef(),ae={};ue.format&&(ae.format=ue.format);const he=()=>{window.clearTimeout(oe.current)},pe=qe=>{var dt;qe==null||qe.preventDefault(),qe==null||qe.stopPropagation(),Ple(ue.text||String(_)||"",ae),Ee(!0),he(),oe.current=window.setTimeout(()=>{Ee(!1)},3e3),(dt=ue.onCopy)===null||dt===void 0||dt.call(ue,qe)};b.useEffect(()=>he,[]);const[Ae,Le]=b.useState(!1),[Qe,je]=b.useState(!1),[Ut,Nt]=b.useState(!1),[at,Ht]=b.useState(!1),[He,ot]=b.useState(!1),[It,tn]=b.useState(!0),[xt,Xe]=ub(S,{expandable:!1}),$e=xt&&!Ut,{rows:ze=1}=Xe,tt=b.useMemo(()=>!$e||Xe.suffix!==void 0||Xe.onEllipsis||Xe.expandable||K||me,[$e,Xe,K,me]);Sr(()=>{xt&&!tt&&(Le(_V("webkitLineClamp")),je(_V("textOverflow")))},[tt,xt]);const mt=b.useMemo(()=>tt?!1:ze===1?Qe:Ae,[tt,Qe,Ae]),Dt=$e&&(mt?He:at),lr=$e&&ze===1&&mt,yn=$e&&ze>1&&mt,rn=qe=>{var dt;Nt(!0),(dt=Xe.onExpand)===null||dt===void 0||dt.call(Xe,qe)},[an,si]=b.useState(0),[ur,sn]=b.useState(0),kt=(qe,dt)=>{let{offsetWidth:wn}=qe;var Vt;si(wn),sn(parseInt((Vt=window.getComputedStyle)===null||Vt===void 0?void 0:Vt.call(window,dt).fontSize,10)||0)},vn=qe=>{var dt;Ht(qe),at!==qe&&((dt=Xe.onEllipsis)===null||dt===void 0||dt.call(Xe,qe))};b.useEffect(()=>{const qe=U.current;if(xt&&mt&&qe){const dt=yn?qe.offsetHeight<qe.scrollHeight:qe.offsetWidth<qe.scrollWidth;He!==dt&&ot(dt)}},[xt,mt,_,yn,It]),b.useEffect(()=>{const qe=U.current;if(typeof IntersectionObserver>"u"||!qe||!mt||!$e)return;const dt=new IntersectionObserver(()=>{tn(!!qe.offsetParent)});return dt.observe(qe),()=>{dt.disconnect()}},[mt,$e]);let En={};Xe.tooltip===!0?En={title:(o=te.text)!==null&&o!==void 0?o:_}:b.isValidElement(Xe.tooltip)?En={title:Xe.tooltip}:typeof Xe.tooltip=="object"?En=Object.assign({title:(a=te.text)!==null&&a!==void 0?a:_},Xe.tooltip):En={title:Xe.tooltip};const pn=b.useMemo(()=>{const qe=dt=>["string","number"].includes(typeof dt);if(!(!xt||mt)){if(qe(te.text))return te.text;if(qe(_))return _;if(qe(A))return A;if(qe(En.title))return En.title}},[xt,mt,A,En.title,Dt]);if(Y)return b.createElement(jle,{value:(c=te.text)!==null&&c!==void 0?c:typeof _=="string"?_:"",onSave:re,onCancel:le,onEnd:te.onEnd,prefixCls:F,className:d,style:f,direction:P,component:I,maxLength:te.maxLength,autoSize:te.autoSize,enterIcon:te.enterIcon});const In=()=>{const{expandable:qe,symbol:dt}=Xe;if(!qe)return null;let wn;return dt?wn=dt:wn=D==null?void 0:D.expand,b.createElement("a",{key:"expand",className:`${F}-expand`,onClick:rn,"aria-label":D==null?void 0:D.expand},wn)},so=()=>{if(!K)return;const{icon:qe,tooltip:dt}=te,wn=Nl(dt)[0]||(D==null?void 0:D.edit),Vt=typeof wn=="string"?wn:"";return J.includes("icon")?b.createElement(Kv,{key:"edit",title:dt===!1?"":wn},b.createElement(l4,{ref:B,className:`${F}-edit`,onClick:ee,"aria-label":Vt},qe||b.createElement(_le,{role:"button"}))):null},Gi=()=>{if(!me)return;const{tooltips:qe,icon:dt}=ue,wn=f4(qe),Vt=f4(dt),Ur=ve?Ng(wn[1],D==null?void 0:D.copied):Ng(wn[0],D==null?void 0:D.copy),Cr=ve?D==null?void 0:D.copied:D==null?void 0:D.copy,Ln=typeof Ur=="string"?Ur:Cr;return b.createElement(Kv,{key:"copy",title:Ur},b.createElement(l4,{className:lt(`${F}-copy`,ve&&`${F}-copy-success`),onClick:pe,"aria-label":Ln},ve?Ng(Vt[1],b.createElement(Zoe,null),!0):Ng(Vt[0],b.createElement(gle,null),!0)))},Mr=qe=>[qe&&In(),so(),Gi()],Ni=qe=>[qe&&b.createElement("span",{"aria-hidden":!0,key:"ellipsis"},eue),Xe.suffix,Mr(qe)];return b.createElement(Bu,{onResize:kt,disabled:!$e||mt},qe=>b.createElement(Jle,{tooltipProps:En,enabledEllipsis:$e,isEllipsis:Dt},b.createElement(y5,Object.assign({className:lt({[`${F}-${m}`]:m,[`${F}-disabled`]:g,[`${F}-ellipsis`]:xt,[`${F}-single-line`]:$e&&ze===1,[`${F}-ellipsis-single-line`]:lr,[`${F}-ellipsis-multiple-line`]:yn},d),prefixCls:u,style:Object.assign(Object.assign({},f),{WebkitLineClamp:yn?ze:void 0}),component:I,ref:Rc(qe,U,t),direction:P,onClick:J.includes("text")?ee:void 0,"aria-label":pn==null?void 0:pn.toString(),title:A},H),b.createElement(qle,{enabledMeasure:$e&&!mt,text:_,rows:ze,width:an,fontSize:ur,onEllipsis:vn},(dt,wn)=>{let Vt=dt;return dt.length&&wn&&pn&&(Vt=b.createElement("span",{key:"show-content","aria-hidden":!0},Vt)),Zle(e,b.createElement(b.Fragment,null,Vt,Ni(wn)))}))))}),k_=tue;var nue=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const rue=b.forwardRef((e,t)=>{var{ellipsis:o,rel:a}=e,c=nue(e,["ellipsis","rel"]);const u=Object.assign(Object.assign({},c),{rel:a===void 0&&c.target==="_blank"?"noopener noreferrer":a});return delete u.navigate,b.createElement(k_,Object.assign({},u,{ref:t,ellipsis:!!o,component:"a"}))}),iue=rue,oue=b.forwardRef((e,t)=>b.createElement(k_,Object.assign({ref:t},e,{component:"div"}))),aue=oue;var sue=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const cue=(e,t)=>{var{ellipsis:o}=e,a=sue(e,["ellipsis"]);const c=b.useMemo(()=>o&&typeof o=="object"?js(o,["expandable","rows"]):o,[o]);return b.createElement(k_,Object.assign({ref:t},a,{ellipsis:c,component:"span"}))},lue=b.forwardRef(cue);var uue=globalThis&&globalThis.__rest||function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(o[a[c]]=e[a[c]]);return o};const due=[1,2,3,4,5],hue=b.forwardRef((e,t)=>{const{level:o=1}=e,a=uue(e,["level"]);let c;return due.includes(o)?c=`h${o}`:c="h1",b.createElement(k_,Object.assign({ref:t},a,{component:c}))}),pue=hue,lm=y5;lm.Text=lue;lm.Link=iue;lm.Title=pue;lm.Paragraph=aue;const Co=lm;function T5(e){var t,o,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(o=T5(e[t]))&&(a&&(a+=" "),a+=o);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function h1(){for(var e,t,o=0,a="";o<arguments.length;)(e=arguments[o++])&&(t=T5(e))&&(a&&(a+=" "),a+=t);return a}const fue=b.forwardRef(({className:e,children:t},o)=>ce("div",{className:h1(e,"b-1 b-solid b-coolgray-6 rd of-hidden relative"),ref:o,style:{width:288,height:216},children:t})),ja=Object.assign(b.forwardRef(({className:e,children:t},o)=>ce("div",{className:h1(e,"flex-1 p-10 p-t-4 flex gap-5"),ref:o,children:t})),{Item:fue}),oi=({children:e})=>ce("div",{className:"h-screen flex flex-col",children:e}),Tc=({children:e})=>ce("samp",{className:"z-2 inline-flex items-center gap-1 absolute bottom-0 bg-black c-white px-1 text-sm",children:e}),Pg=14,xg=8,hb=8,pb=4;function mue({volumeLevel:e=0,noise:t=.075,...o}){const[a,c]=b.useState(0);return b.useEffect(()=>{if(e&&t){const u=Math.max(0,Math.min(1,t)),d=setInterval(()=>{c(e+Math.random()*u*(Math.random()>.5?1:-1))},50);return()=>clearInterval(d)}},[e,t]),Ye("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...o,children:[ce("defs",{children:ce("clipPath",{id:"icon-mic-v-clip",children:ce("rect",{height:Pg,rx:xg/2,width:xg,x:hb,y:pb})})}),ce("path",{d:"M0 0h24v24H0z",fill:"#999CA3",opacity:".01"}),ce("rect",{clipPath:"url(#icon-mic-v-clip)",fill:"#fff",height:Pg,width:xg,x:hb,y:pb}),ce("path",{d:"M4 16.625h2v-1.25H4v1.25Zm6 4h4v-1.25h-4v1.25Zm8-4h2v-1.25h-2v1.25Zm-4 4A4.625 4.625 0 0 0 18.625 16h-1.25A3.375 3.375 0 0 1 14 19.375v1.25ZM5.375 16A4.625 4.625 0 0 0 10 20.625v-1.25A3.375 3.375 0 0 1 6.625 16h-1.25Z",fill:"#fff"}),ce("g",{clipPath:"url(#icon-mic-v-clip)",children:ce("rect",{fill:"#44AD00",height:Pg*2,style:{transform:`translateY(${(1-a)*Pg}px)`,transition:"transform .1s"},width:xg,x:hb,y:pb})})]})}const gue=b.memo(function(t){return Ye("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[ce("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),ce("path",{clipRule:"evenodd",d:"M19.277 16.625H20v-1.25h-1.973l1.25 1.25Zm-3.239 2.065.89.89a4.602 4.602 0 0 1-2.716 1.04l-.212.005h-4a4.626 4.626 0 0 1-4.55-3.787l-.033-.213H4v-1.25h2c.345 0 .625.28.625.625a3.375 3.375 0 0 0 3.19 3.37l.185.005h4a3.36 3.36 0 0 0 2.038-.685Zm.587-4.717V8a4.625 4.625 0 0 0-8.5-2.526l.911.91a3.374 3.374 0 0 1 6.281.991H14v1.25h1.375v.75H14v1.25h1.375v.75h-1.348l1.25 1.25h.098v.098l1.25 1.25Zm-2.587 2.717.89.89A4.625 4.625 0 0 1 7.375 14v-3.973l1.25 1.25v.098h.098l1.25 1.25H8.625V14a3.375 3.375 0 0 0 5.413 2.69Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})}),vue=b.memo(function(t){return Ye("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[ce("circle",{cx:"12",cy:"11",r:"7",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),ce("circle",{cx:"12",cy:"11",r:"3",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"}),ce("circle",{cx:"14.625",cy:"6.625",fill:"#fff",r:".625"}),ce("path",{d:"M7 18.25a8.004 8.004 0 0 0 10 0",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"1.25"})]})}),Eue=b.memo(function(t){return Ye("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:[ce("path",{d:"m5 5 14 14",stroke:"rgb(225, 225, 225, 0.35)",strokeLinejoin:"round",strokeWidth:"1.25"}),ce("path",{clipRule:"evenodd",d:"m15.72 18.373.91.909a8.63 8.63 0 0 1-9.788-.364l-.232-.18.78-.976a7.38 7.38 0 0 0 8.33.61Zm2.434-2.87A7.625 7.625 0 0 0 7.497 4.846l.897.896a6.375 6.375 0 0 1 8.864 8.864l.896.897Zm-3.857 1.446.952.951A7.625 7.625 0 0 1 5.1 7.751l.951.952a6.375 6.375 0 0 0 8.246 8.246Zm.956-4.348a3.625 3.625 0 0 0-4.854-4.854l.964.964a2.378 2.378 0 0 1 2.926 2.926l.964.964Zm-.628-5.351a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25Z",fill:"rgb(225, 225, 225, 0.35)",fillRule:"evenodd"})]})});function Vo(e,t,o){return e.on(t,o),()=>e.off(t,o)}function _ue(e){try{return e()}catch(t){console.error(t)}}function Bh(e){return()=>e.forEach(_ue)}function p1(e,t){const o=setTimeout(e,t);return()=>clearTimeout(o)}function b5(){let e,t,o;function a(){if(t){const g=t;t=void 0,g()}}async function c(){if(o){const g=o;o=void 0;try{await g()}catch(_){console.error(_)}}}async function u(g){e=!0,await c();try{o=await g()}catch(_){console.error(_)}e=!1,a()}async function d(){e=!0,await c(),e=!1,a()}function f(g){e?t=()=>u(g):u(g)}function m(){e?t=d:d()}return{run:f,dispose:m}}const R5=typeof document<"u"?b.useLayoutEffect:b.useEffect;function Sue(e){return e!=null&&typeof e.then=="function"}function $u(){const e=b.useRef(!1);return b.useEffect(()=>(e.current=!1,()=>{e.current=!0}),[]),e}function yue(){const e=$u();function t(o,a){return new Promise(async(c,u)=>{try{const d=await o;e.current||c(d)}catch(d){e.current?a&&a(d):u(d)}})}return b.useCallback(t,[e])}function L_(e){const t=yue(),[o,a]=b.useState();return R5(()=>{Sue(e)?t(e).then(a):a(e)},[e,t]),o}function jh(e,t){const o=b.useRef();b.useEffect(()=>{const{run:a,dispose:c}=o.current||(o.current=b5());return a(e),c},t)}function Cue(e,t){const o=e.split("."),a=t.split("."),c=Math.max(o.length,a.length);for(let u=0;u<c;u++){const d=parseInt(o[u]||"0"),f=parseInt(a[u]||"0");if(d>f)return 1;if(d<f)return-1}return 0}const I5=b.createContext(null);function w5({client:e,children:t}){return ce(I5.Provider,{value:e,children:t})}function Tue(e){const t=b.useContext(I5);return e||t}function Wa(e){const t=Tue(e);if(!t)throw new Error("Agora RTC client not found. Should be wrapped in <AgoraRTCProvider value={client} />");return t}function bue(e){const t=Wa(e),[o,a]=b.useState(t?t.connectionState:"DISCONNECTED");return b.useEffect(()=>{if(t){a(t.connectionState);let c;return Bh([Vo(t,"connection-state-change",u=>{c==null||c(),u==="CONNECTED"?c=p1(()=>a(u),0):a(u)}),()=>c==null?void 0:c()])}else a("DISCONNECTED")},[t]),o}function gs(e){const t=Wa(e),[o,a]=b.useState(t?t.connectionState==="CONNECTED":!1);return b.useEffect(()=>{if(t){a(t.connectionState==="CONNECTED");let c;return Bh([Vo(t,"connection-state-change",u=>{c==null||c(),c=p1(()=>a(u==="CONNECTED"),0)}),()=>c==null?void 0:c()])}else a(!1)},[t]),o}function M_(e){const t=Wa(e),[o,a]=b.useState(t==null?void 0:t.uid);return b.useEffect(()=>{if(t)return Vo(t,"connection-state-change",c=>{if(c==="CONNECTED")return p1(()=>a(t.uid),0);c==="DISCONNECTED"&&a(void 0)})},[t]),o}class ha extends Error{constructor(o,a){var t=(...args)=>{super(...args);q0(this,"rtcMethod");q0(this,"rtcError");q0(this,"name","AgoraRTCReactException")};t(typeof a=="string"?a:a.message),this.rtcMethod=o,this.rtcError=a}log(o){console[o](this)}}function $i(e,t=!0,o){const a=Wa(o),c=gs(o),[u,d]=b.useState(!1),[f,m]=b.useState(0),[g,_]=b.useState(null),S=$u();return jh(async()=>{if(S.current||(_(null),m(0),d(!1)),t&&a){try{S.current||d(!0);const{appid:C,channel:O,token:I,uid:A}=typeof e=="function"?await e():e,L=await a.join(C,O,I,A);S.current||m(L)}catch(C){console.error(C),S.current||_(new ha("IAgoraRTCClient.join",C))}return S.current||d(!1),()=>{for(const C of a.localTracks)C.isPlaying&&C.stop(),C.close();return a.leave()}}},[t,o]),{data:f,isLoading:u,isConnected:c,error:g}}const m4=()=>({uplink:0,downlink:0,delay:0});function Rue(e){const t=Wa(e),[o,a]=b.useState(m4);return b.useEffect(()=>{if(t)return Vo(t,"network-quality",c=>a({uplink:c.uplinkNetworkQuality,downlink:c.downlinkNetworkQuality,delay:t.getRTCStats().RTT??0}));a(m4())},[t]),o}function Hh(e,t=!0,o){const a=Wa(o),c=gs(o),u=b.useRef([]),[d,f]=b.useState(!1),[m,g]=b.useState(null),_=$u();return jh(async()=>{if(_.current||(f(!1),g(null)),!a||!c||!t)return;const S=e.filter(Boolean),C=A=>{const L=Cue(Ou.VERSION,"4.18.1")>=0;return L||new ha("usePublish","please check your agora-rtc-sdk-ng version in package.json, it's recommend upgrade to >= 4.18.1").log("warn"),L?a.mode!=="live"||a.role!=="audience":!0},O=A=>u.current.some(L=>L&&L.getTrackId()===A.getTrackId()),I=A=>C()&&A.enabled&&t&&!O(A);for(let A=0;A<S.length;A++){const L=S[A];if(L&&I(L)){try{_.current||f(!0),await a.publish(L)}catch(N){console.error(N),_.current||g(new ha("IAgoraRTCClient.publish",N))}_.current||f(!1)}}u.current=S},[c,t,a,e]),{isLoading:d,error:m}}function $h(e=!0,t={ANS:!0,AEC:!0},o){const a=gs(o),[c,u]=b.useState(null),[d,f]=b.useState(!1),[m,g]=b.useState(null),_=$u();return jh(async()=>{if(a&&e&&!c){try{_.current||f(!0);const S=await Ou.createMicrophoneAudioTrack(t);_.current||u(S)}catch(S){console.error(S),_.current||g(new ha("IAgoraRTC.createMicrophoneAudioTrack",S))}_.current||f(!1)}!a&&!_.current&&u(null)},[a,e]),{localMicrophoneTrack:c,isLoading:d,error:m}}function Wh(e=!0,t){const o=gs(t),[a,c]=b.useState(null),[u,d]=b.useState(!1),[f,m]=b.useState(null),g=$u();return jh(async()=>{if(g.current||(d(!1),m(null)),o&&e&&!a){try{g.current||d(!0);const _=await Ou.createCameraVideoTrack();g.current||c(_)}catch(_){console.error(_),g.current||m(new ha("IAgoraRTC.createCameraVideoTrack",_))}g.current||d(!1)}!o&&!g.current&&c(null)},[o,e]),{localCameraTrack:a,isLoading:u,error:f}}function um(e,t){const o=Wa(t),[a,c]=b.useState([]),u=gs(),d=b.useRef([]),[f,m]=b.useState(!1),[g,_]=b.useState(null),S=$u();return jh(async()=>{if(S.current||_(null),!Array.isArray(e)||!u)return;const C=async A=>{if(!A.audioTrack&&e.some(({uid:L})=>A.uid===L)){try{S.current||m(!0),await o.subscribe(A,"audio")}catch(L){console.error(L),S.current||_(new ha("IAgoraRTCClient.subscribe",L))}A.audioTrack&&!d.current.some(L=>L.getUserId()===A.uid)&&d.current.push(A.audioTrack),d.current=d.current.map(L=>A.audioTrack&&L.getUserId()===A.uid&&L.getTrackId()!==A.audioTrack.getTrackId()?A.audioTrack:L),S.current||(c(d.current),m(!1))}},O=async A=>{if(e.some(({uid:L})=>A.uid===L)){S.current||(d.current=d.current.filter(L=>L.getUserId()!==A.uid),c(d.current));try{S.current||m(!0),await o.unsubscribe(A,"audio")}catch(L){console.error(L),S.current||_(new ha("IAgoraRTCClient.unsubscribe",L))}S.current||m(!1)}};e.map(A=>{!A.audioTrack&&A.hasAudio&&C(A)});const I=[];for(let A=0;A<d.current.length;A++){const L=d.current[A];if(!e.some(N=>N.uid===L.getUserId())){const N=o.remoteUsers.find(P=>P.uid===L.getUserId());N&&(I.push({user:N,mediaType:"audio"}),d.current.splice(A,1),A--)}}if(I.length>0){try{S.current||m(!0),await o.massUnsubscribe(I)}catch(A){console.error(A),S.current||_(new ha("IAgoraRTCClient.massUnsubscribe",A))}S.current||(c(d.current.slice()),m(!1))}return Bh([Vo(o,"user-published",(A,L)=>{e.find(N=>N.uid===A.uid)&&L==="audio"&&C(A)}),Vo(o,"user-unpublished",(A,L)=>{e.find(N=>N.uid===A.uid)&&L==="audio"&&O(A)})])},[u,o,e]),{audioTracks:a,isLoading:f,error:g}}function dm(e,t){const o=Wa(t),[a,c]=b.useState([]),u=gs(),d=b.useRef([]),[f,m]=b.useState(!1),[g,_]=b.useState(null),S=$u();return jh(async()=>{if(S.current||_(null),!Array.isArray(e)||!u)return;const C=async A=>{if(!A.videoTrack&&e.some(({uid:L})=>A.uid===L)){try{S.current||m(!0),await o.subscribe(A,"video")}catch(L){console.error(L),S.current||_(new ha("IAgoraRTCClient.subscribe",L))}A.videoTrack&&!d.current.some(L=>L.getUserId()===A.uid)&&d.current.push(A.videoTrack),d.current=d.current.map(L=>A.videoTrack&&L.getUserId()===A.uid&&L.getTrackId()!==A.videoTrack.getTrackId()?A.videoTrack:L),S.current||(c(d.current),m(!1))}},O=async A=>{if(e.some(({uid:L})=>A.uid===L)){S.current||(d.current=d.current.filter(L=>L.getUserId()!==A.uid),c(d.current));try{S.current||m(!0),await o.unsubscribe(A,"video")}catch(L){console.error(L),S.current||_(new ha("IAgoraRTCClient.unsubscribe",L))}S.current||m(!1)}};e.map(A=>{!A.videoTrack&&A.hasVideo&&C(A)});const I=[];for(let A=0;A<d.current.length;A++){const L=d.current[A];if(!e.some(N=>N.uid===L.getUserId())){const N=o.remoteUsers.find(P=>P.uid===L.getUserId());N&&(I.push({user:N,mediaType:"video"}),d.current.splice(A,1),A--)}}if(I.length>0){try{S.current||m(!0),await o.massUnsubscribe(I)}catch(A){console.error(A),S.current||_(new ha("IAgoraRTCClient.massUnsubscribe",A))}S.current||(c(d.current.slice()),m(!1))}return Bh([Vo(o,"user-published",(A,L)=>{e.find(N=>N.uid===A.uid)&&L==="video"&&C(A)}),Vo(o,"user-unpublished",(A,L)=>{e.find(N=>N.uid===A.uid)&&L==="video"&&O(A)})])},[u,o,e]),{videoTracks:a,isLoading:f,error:g}}function g4(e,t,o){const a=Wa(o),c=t==="audio"?"audioTrack":"videoTrack",[u,d]=b.useState(e&&e[c]),f=gs(),m=b.useRef(),[g,_]=b.useState(!1),[S,C]=b.useState(null);return b.useEffect(()=>{if(!e||!f)return;let O=!1;O||C(null);const I=t==="audio"?"hasAudio":"hasVideo",A=e.uid,L=async(D,U)=>{if(D[c]&&a.remoteUsers.some(({uid:B})=>D.uid===B))try{O||_(!0),await a.unsubscribe(D,U)}catch(B){O||C(new ha("IAgoraRTCClient.unsubscribe",B)),console.error(B)}O||(d(void 0),_(!1))},N=async(D,U)=>{try{!D[c]&&a.remoteUsers.some(({uid:B})=>D.uid===B)&&(O||_(!0),await a.subscribe(D,U)),O||d(D[c])}catch(B){O||C(new ha("IAgoraRTCClient.subscribe",B)),console.error(B)}O||_(!1)},P=m.current||(m.current=b5());return!e[c]&&e[I]?P.run(()=>N(e,t)):d(e[c]),Bh([()=>{O=!0,P.dispose()},Vo(a,"user-published",(D,U)=>{D.uid===A&&U===t&&P.run(()=>N(D,t))}),Vo(a,"user-unpublished",(D,U)=>{D.uid===A&&U===t&&P.run(()=>L(D,t))})])},[f,a,e,t,c]),{track:u,isLoading:g,error:S}}function $s(e){const t=Wa(e),[o,a]=b.useState(t?t.remoteUsers:[]);return b.useEffect(()=>{if(t){const c=()=>a(t.remoteUsers.slice());return Bh([Vo(t,"user-joined",c),Vo(t,"user-left",c),Vo(t,"user-published",c),Vo(t,"user-unpublished",c)])}},[t]),o}const O5=b.createContext(void 0);function f1(e,t,o){const a=b.useContext(O5);b.useEffect(()=>{if(e)return o&&t?e.play(o):e.stop(),a?(a.onMount(e),()=>a.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,o,t,a])}function m1(e,t){const o=b.useContext(O5);R5(()=>{if(e)return t?e.play():e.stop(),o?(o.onMount(e),()=>o.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,t,o])}function g1({track:e,play:t=!1,volume:o,disabled:a,muted:c,children:u}){const d=L_(e);return m1(d,t),b.useEffect(()=>{d&&o!=null&&d.setVolume(o)},[d,o]),b.useEffect(()=>{d&&a!=null&&d.setEnabled(!a).catch(console.warn)},[a,d]),b.useEffect(()=>{d&&c!=null&&d.setMuted(c).catch(console.warn)},[c,d]),u?ce(oo,{children:u}):null}const U_={position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#000"},A5={width:"100%",height:"100%"},hm={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:2},Gh=(e,t)=>b.useMemo(()=>({...e,...t}),[e,t]);function v1({track:e,play:t,disabled:o,muted:a,style:c,...u}){const d=Gh(A5,c),[f,m]=b.useState(null),g=L_(e);return f1(g,t,f),b.useEffect(()=>{g&&o!=null&&g.setEnabled(!o).catch(console.warn)},[o,g]),b.useEffect(()=>{g&&a!=null&&g.setMuted(a).catch(console.warn)},[a,g]),ce("div",{...u,ref:m,style:d})}const Iue={width:"100%",height:"100%",background:"#1a1e21 center/cover no-repeat",filter:"blur(16px) brightness(0.4)"},wue={position:"absolute",top:"50%",left:"50%",maxWidth:"50%",maxHeight:"50%",aspectRatio:"1",transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",objectFit:"cover"};function V_({cover:e}){return ce("div",{style:hm,children:typeof e=="string"?Ye(oo,{children:[ce("div",{style:{...Iue,backgroundImage:`url(${e})`}}),ce("img",{src:e,style:wue})]}):e()})}function N5({micOn:e,cameraOn:t,audioTrack:o,videoTrack:a,playAudio:c,playVideo:u,volume:d,cover:f,children:m,style:g,..._}){const S=Gh(U_,g);return u=u??!!t,c=c??!!e,Ye("div",{..._,style:S,children:[ce(v1,{disabled:!t,play:u,track:a}),ce(g1,{disabled:!e,play:c,track:o,volume:d}),f&&!t&&ce(V_,{cover:f}),ce("div",{style:hm,children:m})]})}function P5({track:e,play:t=!1,playbackDeviceId:o,volume:a,children:c}){return m1(e,t),b.useEffect(()=>{e&&o!=null&&e.setPlaybackDevice(o).catch(console.warn)},[e,o]),b.useEffect(()=>{e&&a!=null&&e.setVolume(a)},[e,a]),c?ce(oo,{children:c}):null}function E1({track:e,play:t,style:o,...a}){const c=Gh(A5,o),[u,d]=b.useState(null);return f1(e,t,u),ce("div",{...a,ref:d,style:c})}function _1({user:e,playVideo:t,playAudio:o,playbackDeviceId:a,volume:c,cover:u,style:d,children:f,...m}){const g=Gh(U_,d),{track:_}=g4(e,"video"),{track:S}=g4(e,"audio");return t=t??(e==null?void 0:e.hasVideo),o=o??(e==null?void 0:e.hasAudio),Ye("div",{...m,style:g,children:[ce(E1,{play:t,track:_}),ce(P5,{play:o,playbackDeviceId:a,track:S,volume:c}),u&&!t&&ce(V_,{cover:u}),ce("div",{style:hm,children:f})]})}function Oue({track:e,deviceId:t,...o}){const a=L_(e);return b.useEffect(()=>{a&&t!=null&&a.setDevice(t).catch(console.warn)},[t,a]),ce(g1,{track:e,...o})}function Aue({track:e,deviceId:t,...o}){const a=L_(e);return b.useEffect(()=>{a&&t!=null&&a.setDevice(t).catch(console.warn)},[t,a]),ce(v1,{track:e,...o})}function S1({micOn:e,cameraOn:t,audioTrack:o,videoTrack:a,playAudio:c=!1,playVideo:u,micDeviceId:d,cameraDeviceId:f,volume:m,cover:g,children:_,style:S,...C}){const O=Gh(U_,S);return u=u??!!t,c=c??!!e,Ye("div",{...C,style:O,children:[ce(Aue,{deviceId:f,disabled:!t,play:u,track:a}),ce(Oue,{deviceId:d,disabled:!e,play:c,track:o,volume:m}),g&&!t&&ce(V_,{cover:g}),ce("div",{style:hm,children:_})]})}function pm({track:e,playVideo:t,cover:o,client:a,style:c,children:u,...d}){var _,S;const f=Gh(U_,c),g=(S=(_=Wa(a).remoteUsers)==null?void 0:_.find(C=>C.uid===(e==null?void 0:e.getUserId())))==null?void 0:S.hasVideo;return t=t??g,Ye("div",{...d,style:f,children:[ce(E1,{play:t,track:e}),o&&!t&&ce(V_,{cover:o}),ce("div",{style:hm,children:u})]})}const y1=({published:e,total:t})=>ce("div",{className:"p-4 text-xl",children:Ye("span",{className:"inline-flex items-center gap-1 py-2 px-3 rd b-1 b-solid",children:[ce("i",{className:"i-lucide-users"}),Ye("samp",{className:"text-base",children:[e,"/",t]})]})});var CI={},Nue={get exports(){return CI},set exports(e){CI=e}};(function(e){(function(t,o,a){function c(m){var g=this,_=f();g.next=function(){var S=2091639*g.s0+g.c*23283064365386963e-26;return g.s0=g.s1,g.s1=g.s2,g.s2=S-(g.c=S|0)},g.c=1,g.s0=_(" "),g.s1=_(" "),g.s2=_(" "),g.s0-=_(m),g.s0<0&&(g.s0+=1),g.s1-=_(m),g.s1<0&&(g.s1+=1),g.s2-=_(m),g.s2<0&&(g.s2+=1),_=null}function u(m,g){return g.c=m.c,g.s0=m.s0,g.s1=m.s1,g.s2=m.s2,g}function d(m,g){var _=new c(m),S=g&&g.state,C=_.next;return C.int32=function(){return _.next()*4294967296|0},C.double=function(){return C()+(C()*2097152|0)*11102230246251565e-32},C.quick=C,S&&(typeof S=="object"&&u(S,_),C.state=function(){return u(_,{})}),C}function f(){var m=4022871197,g=function(_){_=String(_);for(var S=0;S<_.length;S++){m+=_.charCodeAt(S);var C=.02519603282416938*m;m=C>>>0,C-=m,C*=m,m=C>>>0,C-=m,m+=C*4294967296}return(m>>>0)*23283064365386963e-26};return g}o&&o.exports?o.exports=d:a&&a.amd?a(function(){return d}):this.alea=d})(At,e,!1)})(Nue);var TI={},Pue={get exports(){return TI},set exports(e){TI=e}};(function(e){(function(t,o,a){function c(f){var m=this,g="";m.x=0,m.y=0,m.z=0,m.w=0,m.next=function(){var S=m.x^m.x<<11;return m.x=m.y,m.y=m.z,m.z=m.w,m.w^=m.w>>>19^S^S>>>8},f===(f|0)?m.x=f:g+=f;for(var _=0;_<g.length+64;_++)m.x^=g.charCodeAt(_)|0,m.next()}function u(f,m){return m.x=f.x,m.y=f.y,m.z=f.z,m.w=f.w,m}function d(f,m){var g=new c(f),_=m&&m.state,S=function(){return(g.next()>>>0)/4294967296};return S.double=function(){do var C=g.next()>>>11,O=(g.next()>>>0)/4294967296,I=(C+O)/(1<<21);while(I===0);return I},S.int32=g.next,S.quick=S,_&&(typeof _=="object"&&u(_,g),S.state=function(){return u(g,{})}),S}o&&o.exports?o.exports=d:a&&a.amd?a(function(){return d}):this.xor128=d})(At,e,!1)})(Pue);var bI={},xue={get exports(){return bI},set exports(e){bI=e}};(function(e){(function(t,o,a){function c(f){var m=this,g="";m.next=function(){var S=m.x^m.x>>>2;return m.x=m.y,m.y=m.z,m.z=m.w,m.w=m.v,(m.d=m.d+362437|0)+(m.v=m.v^m.v<<4^(S^S<<1))|0},m.x=0,m.y=0,m.z=0,m.w=0,m.v=0,f===(f|0)?m.x=f:g+=f;for(var _=0;_<g.length+64;_++)m.x^=g.charCodeAt(_)|0,_==g.length&&(m.d=m.x<<10^m.x>>>4),m.next()}function u(f,m){return m.x=f.x,m.y=f.y,m.z=f.z,m.w=f.w,m.v=f.v,m.d=f.d,m}function d(f,m){var g=new c(f),_=m&&m.state,S=function(){return(g.next()>>>0)/4294967296};return S.double=function(){do var C=g.next()>>>11,O=(g.next()>>>0)/4294967296,I=(C+O)/(1<<21);while(I===0);return I},S.int32=g.next,S.quick=S,_&&(typeof _=="object"&&u(_,g),S.state=function(){return u(g,{})}),S}o&&o.exports?o.exports=d:a&&a.amd?a(function(){return d}):this.xorwow=d})(At,e,!1)})(xue);var RI={},Due={get exports(){return RI},set exports(e){RI=e}};(function(e){(function(t,o,a){function c(f){var m=this;m.next=function(){var _=m.x,S=m.i,C,O;return C=_[S],C^=C>>>7,O=C^C<<24,C=_[S+1&7],O^=C^C>>>10,C=_[S+3&7],O^=C^C>>>3,C=_[S+4&7],O^=C^C<<7,C=_[S+7&7],C=C^C<<13,O^=C^C<<9,_[S]=O,m.i=S+1&7,O};function g(_,S){var C,O=[];if(S===(S|0))O[0]=S;else for(S=""+S,C=0;C<S.length;++C)O[C&7]=O[C&7]<<15^S.charCodeAt(C)+O[C+1&7]<<13;for(;O.length<8;)O.push(0);for(C=0;C<8&&O[C]===0;++C);for(C==8?O[7]=-1:O[C],_.x=O,_.i=0,C=256;C>0;--C)_.next()}g(m,f)}function u(f,m){return m.x=f.x.slice(),m.i=f.i,m}function d(f,m){f==null&&(f=+new Date);var g=new c(f),_=m&&m.state,S=function(){return(g.next()>>>0)/4294967296};return S.double=function(){do var C=g.next()>>>11,O=(g.next()>>>0)/4294967296,I=(C+O)/(1<<21);while(I===0);return I},S.int32=g.next,S.quick=S,_&&(_.x&&u(_,g),S.state=function(){return u(g,{})}),S}o&&o.exports?o.exports=d:a&&a.amd?a(function(){return d}):this.xorshift7=d})(At,e,!1)})(Due);var II={},kue={get exports(){return II},set exports(e){II=e}};(function(e){(function(t,o,a){function c(f){var m=this;m.next=function(){var _=m.w,S=m.X,C=m.i,O,I;return m.w=_=_+1640531527|0,I=S[C+34&127],O=S[C=C+1&127],I^=I<<13,O^=O<<17,I^=I>>>15,O^=O>>>12,I=S[C]=I^O,m.i=C,I+(_^_>>>16)|0};function g(_,S){var C,O,I,A,L,N=[],P=128;for(S===(S|0)?(O=S,S=null):(S=S+"\0",O=0,P=Math.max(P,S.length)),I=0,A=-32;A<P;++A)S&&(O^=S.charCodeAt((A+32)%S.length)),A===0&&(L=O),O^=O<<10,O^=O>>>15,O^=O<<4,O^=O>>>13,A>=0&&(L=L+1640531527|0,C=N[A&127]^=O+L,I=C==0?I+1:0);for(I>=128&&(N[(S&&S.length||0)&127]=-1),I=127,A=4*128;A>0;--A)O=N[I+34&127],C=N[I=I+1&127],O^=O<<13,C^=C<<17,O^=O>>>15,C^=C>>>12,N[I]=O^C;_.w=L,_.X=N,_.i=I}g(m,f)}function u(f,m){return m.i=f.i,m.w=f.w,m.X=f.X.slice(),m}function d(f,m){f==null&&(f=+new Date);var g=new c(f),_=m&&m.state,S=function(){return(g.next()>>>0)/4294967296};return S.double=function(){do var C=g.next()>>>11,O=(g.next()>>>0)/4294967296,I=(C+O)/(1<<21);while(I===0);return I},S.int32=g.next,S.quick=S,_&&(_.X&&u(_,g),S.state=function(){return u(g,{})}),S}o&&o.exports?o.exports=d:a&&a.amd?a(function(){return d}):this.xor4096=d})(At,e,!1)})(kue);var wI={},Lue={get exports(){return wI},set exports(e){wI=e}};(function(e){(function(t,o,a){function c(f){var m=this,g="";m.next=function(){var S=m.b,C=m.c,O=m.d,I=m.a;return S=S<<25^S>>>7^C,C=C-O|0,O=O<<24^O>>>8^I,I=I-S|0,m.b=S=S<<20^S>>>12^C,m.c=C=C-O|0,m.d=O<<16^C>>>16^I,m.a=I-S|0},m.a=0,m.b=0,m.c=-1640531527,m.d=1367130551,f===Math.floor(f)?(m.a=f/4294967296|0,m.b=f|0):g+=f;for(var _=0;_<g.length+20;_++)m.b^=g.charCodeAt(_)|0,m.next()}function u(f,m){return m.a=f.a,m.b=f.b,m.c=f.c,m.d=f.d,m}function d(f,m){var g=new c(f),_=m&&m.state,S=function(){return(g.next()>>>0)/4294967296};return S.double=function(){do var C=g.next()>>>11,O=(g.next()>>>0)/4294967296,I=(C+O)/(1<<21);while(I===0);return I},S.int32=g.next,S.quick=S,_&&(typeof _=="object"&&u(_,g),S.state=function(){return u(g,{})}),S}o&&o.exports?o.exports=d:a&&a.amd?a(function(){return d}):this.tychei=d})(At,e,!1)})(Lue);var OI={},Mue={get exports(){return OI},set exports(e){OI=e}};(function(e){(function(t,o,a){var c=256,u=6,d=52,f="random",m=a.pow(c,u),g=a.pow(2,d),_=g*2,S=c-1,C;function O(U,B,F){var H=[];B=B==!0?{entropy:!0}:B||{};var K=N(L(B.entropy?[U,D(o)]:U??P(),3),H),te=new I(H),Y=function(){for(var Q=te.g(u),J=m,q=0;Q<g;)Q=(Q+q)*c,J*=c,q=te.g(1);for(;Q>=_;)Q/=2,J/=2,q>>>=1;return(Q+q)/J};return Y.int32=function(){return te.g(4)|0},Y.quick=function(){return te.g(4)/4294967296},Y.double=Y,N(D(te.S),o),(B.pass||F||function(Q,J,q,ee){return ee&&(ee.S&&A(ee,te),Q.state=function(){return A(te,{})}),q?(a[f]=Q,J):Q})(Y,K,"global"in B?B.global:this==a,B.state)}function I(U){var B,F=U.length,H=this,K=0,te=H.i=H.j=0,Y=H.S=[];for(F||(U=[F++]);K<c;)Y[K]=K++;for(K=0;K<c;K++)Y[K]=Y[te=S&te+U[K%F]+(B=Y[K])],Y[te]=B;(H.g=function(Q){for(var J,q=0,ee=H.i,re=H.j,le=H.S;Q--;)J=le[ee=S&ee+1],q=q*c+le[S&(le[ee]=le[re=S&re+J])+(le[re]=J)];return H.i=ee,H.j=re,q})(c)}function A(U,B){return B.i=U.i,B.j=U.j,B.S=U.S.slice(),B}function L(U,B){var F=[],H=typeof U,K;if(B&&H=="object")for(K in U)try{F.push(L(U[K],B-1))}catch{}return F.length?F:H=="string"?U:U+"\0"}function N(U,B){for(var F=U+"",H,K=0;K<F.length;)B[S&K]=S&(H^=B[S&K]*19)+F.charCodeAt(K++);return D(B)}function P(){try{var U;return C&&(U=C.randomBytes)||(U=new Uint8Array(c),(t.crypto||t.msCrypto).getRandomValues(U)),D(U)}catch{var B=t.navigator,F=B&&B.plugins;return[+new Date,t,F,t.screen,D(o)]}}function D(U){return String.fromCharCode.apply(0,U)}N(a.random(),o),e.exports?e.exports=O:a["seed"+f]=O})(typeof self<"u"?self:At,[],Math)})(Mue);var Uue=CI,Vue=TI,Fue=bI,Bue=RI,jue=II,Hue=wI,Wu=OI;Wu.alea=Uue;Wu.xor128=Vue;Wu.xorwow=Fue;Wu.xorshift7=Bue;Wu.xor4096=jue;Wu.tychei=Hue;var $ue=Wu;const x5=$ue;let D5=x5();function Wue(){return D5()}function v4(e){D5=x5(e)}function k5(e,t){const o=Array.isArray(e)?()=>Gue(e):e;return(t==null?void 0:t.length)===void 0?o(0):Array.from({length:t.length},(a,c)=>o(c))}function Gue(e){return e[Math.floor(Wue()*e.length)]}function zue(e,t){return k5(e,t)}var E4={withAccents:{male:["Adrián","Ægir","Álvaro","André","Andrés","Árni","Asbjørn","Björn","César","Daníel","Davíð","Emílio","Fañch","François","František","Gísli","Götz","Guðjón","Guðmundur","Günter","Halldór","Hans-Jörg","Hans-Jürgen","Hüseyin","Iñaki","János","Jesús","Jiří","Jóhann","Jóhannes","Jokūbas","Jón","José","Jörn","Julião","Jürgen","Kristján","Maël","Magnús","Mathéo","Mátyás","Michał","Noël","Nuñez","Ólafur","Óscar","Øyvind","Páll","Paweł","Pétur","Ramón","Raúl","René","Ruairí","Rubén","Seán","Sérgio","Sigurður","Sönke","Stefán","Tomáš","Þorsteinn"],female:["Ædel","Agnès","Alícia","Änne","Antónia","Ásta","Auður","Cäcilia","Chloë","Claúdia","Dörte","Elín","Elísabet","Eliška","Františka","Glória","Grażyna","Guðbjörg","Guðný","Guðrún","Henriëtte","Ingibjörg","Íris","Jóhanna","Jóna","Júlia","Käte","Katrín","Kolbrún","Kristín","KŠthe","Letícia","Lídia","Lúcia","Małgorzata","Margrét","María","Mónica","Natália","Ólöf","Patrícia","Ragnheiður","Renée","Ružena","Siân","Sigríður","Sigrún","Sílvia","Sørina","Věra","Virgínia","Zoë","Þóra","Þórunn"]},withoutAccents:{male:["Abdul","Abdullahi","Abubakar","Adam","Adamu","Adiy","Ahmad","Ajay","Akira","Alan","Alberto","Alejandro","Aleksander","Aleksandr","Aleksey","Alex","Alexander","Alexey","Ali","Aliyu","Aminu","Amit","Amiyr","Amiyt","Amnuai","Amphon","Anah","Anan","Andreas","Andrew","Andrey","Andri","Andries","Andrzej","Anil","Anthony","Anton","Antonio","Arnar","Artur","Artyom","Arun","Ashok","Atli","Avraham","Bartosz","Bello","Bernd","Bin","Birgir","Bjarni","Blessing","Bongani","Brian","Bunmi","Carlos","Carol","Chan","Chao","Charles","Charoen","Chen","Cheng","Christian","Christopher","Colin","Daniel","Daniyel","Dariusz","David","Denis","Dennis","Diego","Dieter","Dilip","Dinesh","Dmitriy","Dmitry","Einar","Eliyahu","Emmanuel","Evgeniy","Fernando","Fran","Francis","Francisco","Francisco-Javier","Frank","Franz","Gang","Gareth","Gary","George","Gerhard","Graham","Grzegorz","Gunnar","Guy","Haim","Haiyan","Hans","Hans-Ulrich","Haruna","Hassan","Heike","Heinz","Helgi","Helmut","Hendrik","Herbert","Hideo","Hiromi","Hiroshi","Hong","Horst","Hui","Ian","Ibrahim","Idris","Igor","Ilya","Isa","Isaac","Isah","Ivan","Jabulani","Jacek","Jacobus","Jakub","James","Jan","Janusz","Javier","Jean","Jerzy","Jesus","Jason","Jianguo","Jianhua","Jianjun","Jianping","Jin","Joan","Johan","Johannes","John","Jonathan","Jorge","Jose","Jose-Antonio","Jose-Luis","Jose-Manuel","Jose-Maria","Josef","Joseph","Joyce","Juan","Kabiru","Kai","Kamil","Karen","Karl","Karl-Heinz","Katsumi","Kazuo","Kelvin","Kenji","Kenneth","Kevin","Kiran","Kirill","Kiyoshi","Kjartan","Klaus","Ko","Koichi","Koji","Konstantin","Koshi","Krishna","Kristinn","Krzysztof","Kun","Lakshmi","Lan","Laxmi","Lei","Li","Lihua","Lijun","Lilian","Lin","Ling","Liping","Liyor","Luis","Lukasz","Maciej","Mahmood","Maksim","Manfred","Manoj","Manuel","Marcin","Mardkhay","Marek","Mariusz","Mark","Martin","Masami","Masao","Mateusz","Matt","Matthew","Meiyr","Michael","Michal","Miguel","Miguel-Angel","Mikhail","Min","Ming","Mitsuo","Miykhael","Miykhal","Mo","Mohamed","Mohammad","Mohammed","Mohan","Moses","Moshe","Mpho","Muhammad","Muhammed","Mukesh","Musa","Narong","Nathan","Nicola","Nikita","Nikolay","Ning","Nkosinathi","Noam","Oleg","Omer","Otieno","Pablo","Patrick","Paul","Pavel","Pawel","Pedro","Peng","Peter","Petrus","Philip","Pieter","Ping","Piotr","Prasit","Prasoet","Pricha","Pushpa","Qiang","Qing","Radha","Rafael","Ragnar","Raj","Rajendra","Rajesh","Raju","Rakesh","Ram","Ramesh","Raphael","Rattana","Ravi","Richard","Robert","Roman","Rong","Roy","Ryan","Salisu","Saman","Samran","Samuel","Sani","Sanjay","Santosh","Sam","Sammy","Sawat","Sebastian","Sergey","Sergio","Shankar","Shay","Shigeru","Shimon","Shlomo","Shoji","Sibusiso","Simon","Sipho","Sombat","Sombun","Somchai","Somchit","Somkhit","Somkiat","Sommai","Somnuek","Somphon","Somphong","Somsak","Sri","Stefan","Stephen","Steve","Steven","Suman","Sunday","Sunil","Sunthon","Suresh","Sushila","Suwit","Sveinn","Tadashi","Takashi","Takeshi","Tal","Tebogo","Thabo","Thawi","Themba","Thomas","Thulani","Tomasz","Toshio","Udom","Umar","Uriy","Usman","Uwe","Victor","Vijay","Viktor","Vincent","Vinod","Vladimir","Walter","Wanchai","Waraphon","Wei","Werner","Wichai","Wichian","Willem","William","Winai","Wirat","Wirot","Wojciech","Wolfgang","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Xolani","Yaakv","Yahaya","Yakubu","Yan","Yasuo","Yhudah","Ying","Yisrael","Yong","Yosef","Yoshie","Yoshimi","Yoshio","Yu","Yue","Yukio","Yun","Yuriy","Yusuf","Yuval","Zbigniew","Zhen","Zhiqiang"],female:["Agata","Agnieszka","Aisha","Akira","Aleksandra","Alina","Alyona","Amina","Amnuai","Ana","Ana-Maria","Anah","Anan","Anastasiya","Andrea","Angela","Anita","Ann","Anna","Anong","Antonia","Asha","Barbara","Beata","Berglind","Bin","Birgit","Birna","Blessing","Brigitte","Bunmi","Busisiwe","Carmen","Carol","Caroline","Catherine","Chan","Chanah","Chao","Charoen","Chayah","Chen","Cheng","Christa","Christine","Claire","Claudia","Cristina","Darya","Dolores","Dorota","Edda","Ekaterina","Elena","Elisabeth","Elizabeth","Elke","Emiko","Emma","Erika","Erla","Erna","Ester","Esther","Eunice","Eva","Eugenia","Ewa","Faith","Fatima","Fiona","Fran","Francisca","Fumiko","Galina","Gabra","Gisela","Gita","Grace","Hadiza","Haiyan","Hanna","Haruna","Hauwa","Heike","Helen","Helga","Hildur","Hiroko","Hiromi","Hisako","Hong","Hui","Hulda","Inga","Ingrid","Irina","Isa","Isabel","Isah","Iwona","Jackline","Jan","Jane","Janet","Jean","Jennifer","Jianhua","Jianping","Jin","Joan","Joanna","Johanna","Josefa","Joy","Joyce","Juan","Julie","Justyna","Kai","Kanchana","Karen","Karin","Karolina","Kasia","Katarzyna","Katsumi","Keiko","Kiran","Kiyoko","Kristina","Kseniya","Kun","Lakshmi","Lalita","Lan","Latda","Laura","Laxmi","Leah","Lei","Li","Lihua","Lijun","Lilian","Lilja","Lin","Linda","Lindiwe","Ling","Liping","Lisa","Lucia","Lucy","Lyubov","Lyudmila","Magda","Magdalena","Mali","Manju","Margaret","Maria","Maria-Isabel","Maria-Jose","Maria-Pilar","Marina","Mariya","Marta","Martha","Mary","Maryam","Masako","Masami","Mei","Mercy","Michal","Michiko","Mieko","Min","Mina","Ming","Miriam","Miyoko","Mo","Monika","Mpho","Na","Nadezhda","Nan","Nancy","Natalya","Ngozi","Nicola","Ning","Nittaya","Noam","Nobuko","Nokuthula","Nonhlanhla","Noriko","Nushi","Olga","Omer","Patricia","Paula","Paulina","Peng","Petra","Phonthip","Pilar","Ping","Prani","Purity","Pushpa","Qing","Rachel","Radha","Rattana","Rebecca","Reiko","Rekha","Renate","Rita","Rong","Rosa","Rose","Rut","Ruth","Ryoko","Sabine","Sachiko","Samran","Santosh","Sara","Sarah","Sam","Sammy","Sawat","Shanti","Sharon","Shay","Shizuko","Shoshanah","Sibongile","Sita","Sombat","Sombun","Somchit","Somkhit","Sommai","Somnuek","Somphon","Somphong","Sri","Steinunn","Sukanya","Suman","Sunday","Sunita","Suphaphon","Susan","Susanne","Sushila","Svetlana","Takako","Tamar","Tatyana","Tal","Tebogo","Teruko","Thawi","Tomiko","Toshiko","Unnur","Urai","Urmila","Ursula","Usha","Valentina","Victoria","Wanjiru","Wanphen","Watsana","Wei","Wilai","Xiang","Xiaohong","Xiaoli","Xiaoping","Xiaoyan","Xin","Yael","Yan","Yasuko","Yelena","Yhudiyt","Ying","Yoko","Yong","Yoshie","Yoshiko","Yoshimi","Yu","Yue","Yuko","Yuliya","Yun","Yuval","Zainab","Zandile","Zanele","Zhen"]}};function Kue(e){var t,o;const a=(t=e==null?void 0:e.withAccents)!=null&&t,c=(o=e==null?void 0:e.gender)!=null?o:zue(["male","female"]),u=e==null?void 0:e.locale;return k5(a?u?u==null?void 0:u.withAccents[c]:E4.withAccents[c]:u?u==null?void 0:u.withoutAccents[c]:E4.withoutAccents[c],e)}var Yue={china:["Peking roasted duck","Kung pao chicken","Sweet and sour pork","Hot pot","Dim sum","Dumplings","Ma po tofu","Char siu","Chicken chow mein","Beef chow mein","vegetable chow mein","Chicken fried rice","Beef fried rice","Vegetable fried Rice","Special fried Rice","Sichuan pork","Xiaolongbao","Zhajiangmian","Wonton soup","Sweet and sour pork","Duck spring Rolls","Vegetable spring Rolls","Wonton","Peking duck","Lamb hot pot","Spicy crayfish","Guilin rice noodles","Lanzhou hand-pulled noodles","Steamed crab","Shredded pork with garlic sauce","Red braised pork","Sweet and sour Ribs","Xinjiang","Braised pork with vermicelli"],italy:["Butternut squash risotto","Mushroom risotto","Beetroot risotto","Courgette risotto","Pizza","Gnocchi","Spaghetti bolognese","Spaghetti carbonara","Pesto alla Genovese","Beef lasagne","Vegetable lasagne","Gelato","Prosciutto di Parma","Ribollita","Bagna cauda","Polenta","Tortelli and ravioli","Focaccia","Garlic bread","Arancini","Il tartufo","Panzerotto fritto","Fiorentina","Minestrone","Frico","Arrosticini","Olive ascolante","Fritto misto piemontes","Tiramisù"],india:["Biryani","Dosa","Tandoori chicken","Samosas","Chaat","Plain naan","Garlic naan","Pilau rice","Steamed rice","Chicken madras","Vegetable madras","Chicken vindaloo","Chicken jalfrezi","Chicken roghan josh","Lamb roghan josh","Beef roghan josh","Butter chicken","Dosa","Gulab jamun","Chicken korma","Mutter paneer","Papadum","Paratha","Raita","Saag paneer","Tandoori chicken","Chicken tikka masala","Pakora","Dal","Chapati","Pasanda","Aloo gobi","Kofta","Chicken makhani","Paneer naan","Chana Aloo Curry"],mexico:["Chilaquiles","Pozole","Tacos al pastor","Tostadas","Chiles en nogada","Elote","Enchiladas","Mole","Guacamole","Tamales","Huevos rancheros","Machaca","Discada","Beef Burrito","Chicken Burrito","Pozole de pollo o duajolote","Menudo","Cochinita pibil","Tamale","Quesadilla","Frijoles puercos","Chile en nogada","Esquites","Alegria de amaranto","Pipián","Aguachile","Ceviche","Pescado zarandeado","Camarones a la diabla","Birria de chivo","Tlayuda","Guacamole con chapulines","Flautas","Torta Ahogada","Carnitas","Caldo Azteca","Gorditas de Nata"],japan:["Sushi","Udon","Tofu","Tempura","Yakitori","Sashimi","Ramen","Donburi","Natto","Oden","Tamagoyaki","Soba","Tonkatsu","Kashipan","Sukiyaki","Miso soup","Okonomiyaki","Mentaiko","Nikujaga","Unagi no kabayaki","Shabu Shabu","Onigiri","Gyoza","Takoyaki","aiseki ryori","Edamame","Yakisoba","Chawanmushi","Wagashi"],france:["Foie gras","Huîtres","Cassoulet","Poulet basquaise","Escargots au beurre persillé","Mouclade charentaise","Galettes bretonnes","Flemish carbonnade","Quiche lorraine","Raclette","Cheese fondue","Beef fondue","Gratin dauphinois","Tartiflette","Bouillabaisse","Ratatouille","Boeuf bourguignon","Blanquette de veau","Pot-au-feu","Coq-au-vin","Hachis parmentier","Steak tartare","Choucroute","Soufflé au fromage","Cuisses de grenouilles","Soupe à l’oignon","Baguette","Croissant","French cheeses","Fondant au chocolat","Tarte tatin","Macarons","Crème brûlée","Île flottante","Profiteroles","Pain au chocolat"],lebanon:["Kibbeh","Kafta","Kanafeh","Hummus","Rice pilaf","Fattoush","Manakish","Tabbouleh","Sfeeha","Fattoush","Labneh","Muhammara","Lahm bi ajin","Kaak","Chanklich","Mssabaha","Shawarma","Kebbe","Falafel","Halewit el jeben","Namoura","Maamoul","Foul mdammas","Balila","Kawarma","Fattouch"],thailand:["Pad kra pao moo","Tom kha gai","Khao Pad","Chicken pad Thai","Vegetable pad Thai","Moo satay","Tom yum goong","Khao niew mamuang","Kai yad sai","Khao soi","Pad see ew","Laab moo","Gaeng panang","Gai pad med ma muang","Som tam","Poh pia tod","Gaeng massaman","Pla kapung nueng manao","Tod mun pla","Gaeng ped","Gaeng garee","Gaeng keow wan","Moo ping","Durian","Sai ooah","Hoy tod","Kuay teow reua","Mu kratha","Kao ka moo","Yam nua"],greece:["Moussaka","Papoutsakia","Pastitsio","Souvlaki","Soutzoukakia","Stifado","Tomatokeftedes","Tzatziki","Kolokithokeftedes","Giouvetsi","Choriatiki","Kleftiko","Gemista","Fasolada","Bougatsa","Tiropita","Spanakopita","Feta Cheese with Honey","Horta","Tirokroketes","Briam","Saganaki","Gigantes","Dolmades","Fasolatha","Koulouri","Loukoumades","Gyros","Galaktoboureko","Baklava"],turkey:["Şiş kebap","Döner","Köfte","Pide","Kumpir","Meze","Mantı","Lahmacun","Menemen","Şiş kebap","İskender kebab","Corba","Kuzu tandir","Çiğ Köfte","Pilav","Yaprak sarma","Dolma","İmam bayıldı","Borek","Durum","Kumpir","Balik ekmek","Simit","Kunefe","Baklava","Lokum","Halva","Mozzaik pasta","Güllaç","Mercimek Köftesi","Haydari","Tursu suyu","Kahvalti","Kazan dibi","Hunkar begendi","Islak burgers","Salep","Yogurtlu kebab"],spain:["Tortilla de patatas","Fabada asturiana","Calçots","Boquerones al vinagre","Empanada gallega","Paella","Gazpacho","Gachas","Migas","Bocadillo de calamares","Pulpo a feira","Caldo gallego","Lentejas con chorizo","Cocido madrileño","Cachopo","Caracoles"],venezuela:["Pabellón criollo","Arepa","Mondongo","Empanadas","Quesillo","Chicha andina","Tequeños","Cachapa","Hallaca","Perico","Pasticho","Mandocas","Caraotas negras","Patacones","Dulce de leche","Pan de Jamón"],chile:["Humitas","Empanadas","Porotos con riendas","Completos","Manjar","Cordero al palo","Pastel de choclo","Mote con huesillos","Sopaipillas","Curanto"],argentina:["Milanesas","Empanadas","Pizza fugazeta","Asado","Choripan","Bondiola","Bife de chorizo"],colombia:["Bandeja paisa","Chuleta valluna","Sancocho trifásico","Empanada valluna","Salpicon de frutas","Pastel de garbanzo","Ajiaco","Arepas","Arroz de lisa","Sancocho","Pan de bono","Cuchuco","Oblea","Cazuela de mariscos","Pan de yuca","Bollo Limpio","Almojábana","Empanadas","Arroz con Coco","Sopa de mondongo","Cazuela de Mariscos","Arroz con Pollo","Arepa de Huevo","Mote de Queso"],ecuador:["Encebollado","Ceviche","Tigrillo","Bolon de verde","Llapingacho","Mote pillo","Locro de papa","Churrasco"],peru:["Ceviche","Arroz con pollo","Aji de gallina","Llunca de gallina"],"el salvador":["Pupusa","Sopa de patas","Rigua","Flor de izote con huevo","Gallo en chicha"],romania:["Sarmale","Mici","Pomana porcului","Ciorbă de fasole cu ciolan","Ciorbă de burtă","Ciorbă rădăuțeană","Plăcintă cu brânză","Ciorbă de potroace","Mămăligă cu brânză și smântână","Tochitură","Piftie","Iahnie de fasole","Slănină afumată","Cârnați afumați","Varză a la Cluj","Gulaș de cartofi cu afumătură","Cozonac de casă","Ciorbă ardelenească de porc","Mucenici moldovenești","Salată de boeuf","Dovleac copt","Papanași cu brânză de vacă și afine","Drob de miel","Pârjoale moldovenești","Zacuscă de vinete","Zacuscă de fasole","Turtă dulce","Clătitele cu gem","Clătitele cu brânza de vacă","Balmoș","Cozonac","Chiftele"]},_4;(_4=Object.keys(Yue))==null||_4.length;var S4,que={olympic:["Archery","Artistic Gymnastics","Artistic Swimming","Athletics","Badminton","Baseball Softball","Basketball","Beach Volleyball","BMX Freestyle","BMX Racing","Boxing","Kayak Flatwater","Kayak Slalom","Diving","Equestrian","Fencing","Football","Golf","Handball","Hockey","Judo","Karate","Marathon Swimming","Modern Pentathlon","Mountain Bike","Rhythmic Gymnastics","Road Cycling","Rowing","Rugby","Sailing","Shooting","Skateboarding","Sport Climbing","Surfing","Swimming","Table Tennis","Taekwondo","Tennis","Track Cycling","Trampoline","Triathlon","Volleyball","Water Polo","Weightlifting","Wrestling"],winterOlympic:["Alpine Skiing","Biathlon","Bobsleigh","Cross-Country Skiing","Curling","Figure Skating","Freestyle Skiing","Ice Hockey","Luge","Nordic Combined","Short Track Speed Skating","Skeleton","Ski Jumping","Snowboard","Speed Skating"],outdoor:["Archery","Athletics","Badminton","Baseball","Basketball","Bowling","Boxing","Camping","Canoeing","Climbing","Cricket","Curling","Cycling","Equestrian","Fencing","Football","Golf","Gymnastics","Handball","Hang Gliding","High Jumping","Hockey","Ice Hockey","Judo","Karate","Kite Flying","Monkey Bars","Motorsports","Netball","Rowing","Rugby","Running","Sailing","Skateboarding","Slide","Snow Skiing","Soccer","Street Hockey","Surfing","Swimming","Table Tennis","Tennis","Trekking","Triathlon","Volleyball","Weightlifting","Wrestling"]};(S4=Object.keys(que))==null||S4.length;var AI={},Xue={get exports(){return AI},set exports(e){AI=e}};function Jue(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Jv={},Que={get exports(){return Jv},set exports(e){Jv=e}};const Zue={},ede=Object.freeze(Object.defineProperty({__proto__:null,default:Zue},Symbol.toStringTag,{value:"Module"})),tde=rX(ede);var y4;function Tn(){return y4||(y4=1,function(e,t){(function(o,a){e.exports=a()})(At,function(){var o=o||function(a,c){var u;if(typeof window<"u"&&window.crypto&&(u=window.crypto),typeof self<"u"&&self.crypto&&(u=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(u=globalThis.crypto),!u&&typeof window<"u"&&window.msCrypto&&(u=window.msCrypto),!u&&typeof At<"u"&&At.crypto&&(u=At.crypto),!u&&typeof Jue=="function")try{u=tde}catch{}var d=function(){if(u){if(typeof u.getRandomValues=="function")try{return u.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof u.randomBytes=="function")try{return u.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},f=Object.create||function(){function P(){}return function(D){var U;return P.prototype=D,U=new P,P.prototype=null,U}}(),m={},g=m.lib={},_=g.Base=function(){return{extend:function(P){var D=f(this);return P&&D.mixIn(P),(!D.hasOwnProperty("init")||this.init===D.init)&&(D.init=function(){D.$super.init.apply(this,arguments)}),D.init.prototype=D,D.$super=this,D},create:function(){var P=this.extend();return P.init.apply(P,arguments),P},init:function(){},mixIn:function(P){for(var D in P)P.hasOwnProperty(D)&&(this[D]=P[D]);P.hasOwnProperty("toString")&&(this.toString=P.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),S=g.WordArray=_.extend({init:function(P,D){P=this.words=P||[],D!=c?this.sigBytes=D:this.sigBytes=P.length*4},toString:function(P){return(P||O).stringify(this)},concat:function(P){var D=this.words,U=P.words,B=this.sigBytes,F=P.sigBytes;if(this.clamp(),B%4)for(var H=0;H<F;H++){var K=U[H>>>2]>>>24-H%4*8&255;D[B+H>>>2]|=K<<24-(B+H)%4*8}else for(var te=0;te<F;te+=4)D[B+te>>>2]=U[te>>>2];return this.sigBytes+=F,this},clamp:function(){var P=this.words,D=this.sigBytes;P[D>>>2]&=4294967295<<32-D%4*8,P.length=a.ceil(D/4)},clone:function(){var P=_.clone.call(this);return P.words=this.words.slice(0),P},random:function(P){for(var D=[],U=0;U<P;U+=4)D.push(d());return new S.init(D,P)}}),C=m.enc={},O=C.Hex={stringify:function(P){for(var D=P.words,U=P.sigBytes,B=[],F=0;F<U;F++){var H=D[F>>>2]>>>24-F%4*8&255;B.push((H>>>4).toString(16)),B.push((H&15).toString(16))}return B.join("")},parse:function(P){for(var D=P.length,U=[],B=0;B<D;B+=2)U[B>>>3]|=parseInt(P.substr(B,2),16)<<24-B%8*4;return new S.init(U,D/2)}},I=C.Latin1={stringify:function(P){for(var D=P.words,U=P.sigBytes,B=[],F=0;F<U;F++){var H=D[F>>>2]>>>24-F%4*8&255;B.push(String.fromCharCode(H))}return B.join("")},parse:function(P){for(var D=P.length,U=[],B=0;B<D;B++)U[B>>>2]|=(P.charCodeAt(B)&255)<<24-B%4*8;return new S.init(U,D)}},A=C.Utf8={stringify:function(P){try{return decodeURIComponent(escape(I.stringify(P)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(P){return I.parse(unescape(encodeURIComponent(P)))}},L=g.BufferedBlockAlgorithm=_.extend({reset:function(){this._data=new S.init,this._nDataBytes=0},_append:function(P){typeof P=="string"&&(P=A.parse(P)),this._data.concat(P),this._nDataBytes+=P.sigBytes},_process:function(P){var D,U=this._data,B=U.words,F=U.sigBytes,H=this.blockSize,K=H*4,te=F/K;P?te=a.ceil(te):te=a.max((te|0)-this._minBufferSize,0);var Y=te*H,Q=a.min(Y*4,F);if(Y){for(var J=0;J<Y;J+=H)this._doProcessBlock(B,J);D=B.splice(0,Y),U.sigBytes-=Q}return new S.init(D,Q)},clone:function(){var P=_.clone.call(this);return P._data=this._data.clone(),P},_minBufferSize:0});g.Hasher=L.extend({cfg:_.extend(),init:function(P){this.cfg=this.cfg.extend(P),this.reset()},reset:function(){L.reset.call(this),this._doReset()},update:function(P){return this._append(P),this._process(),this},finalize:function(P){P&&this._append(P);var D=this._doFinalize();return D},blockSize:16,_createHelper:function(P){return function(D,U){return new P.init(U).finalize(D)}},_createHmacHelper:function(P){return function(D,U){return new N.HMAC.init(P,U).finalize(D)}}});var N=m.algo={};return m}(Math);return o})}(Que)),Jv}var Qv={},nde={get exports(){return Qv},set exports(e){Qv=e}},C4;function F_(){return C4||(C4=1,function(e,t){(function(o,a){e.exports=a(Tn())})(At,function(o){return function(a){var c=o,u=c.lib,d=u.Base,f=u.WordArray,m=c.x64={};m.Word=d.extend({init:function(g,_){this.high=g,this.low=_}}),m.WordArray=d.extend({init:function(g,_){g=this.words=g||[],_!=a?this.sigBytes=_:this.sigBytes=g.length*8},toX32:function(){for(var g=this.words,_=g.length,S=[],C=0;C<_;C++){var O=g[C];S.push(O.high),S.push(O.low)}return f.create(S,this.sigBytes)},clone:function(){for(var g=d.clone.call(this),_=g.words=this.words.slice(0),S=_.length,C=0;C<S;C++)_[C]=_[C].clone();return g}})}(),o})}(nde)),Qv}var Zv={},rde={get exports(){return Zv},set exports(e){Zv=e}},T4;function ide(){return T4||(T4=1,function(e,t){(function(o,a){e.exports=a(Tn())})(At,function(o){return function(){if(typeof ArrayBuffer=="function"){var a=o,c=a.lib,u=c.WordArray,d=u.init,f=u.init=function(m){if(m instanceof ArrayBuffer&&(m=new Uint8Array(m)),(m instanceof Int8Array||typeof Uint8ClampedArray<"u"&&m instanceof Uint8ClampedArray||m instanceof Int16Array||m instanceof Uint16Array||m instanceof Int32Array||m instanceof Uint32Array||m instanceof Float32Array||m instanceof Float64Array)&&(m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength)),m instanceof Uint8Array){for(var g=m.byteLength,_=[],S=0;S<g;S++)_[S>>>2]|=m[S]<<24-S%4*8;d.call(this,_,g)}else d.apply(this,arguments)};f.prototype=u}}(),o.lib.WordArray})}(rde)),Zv}var eE={},ode={get exports(){return eE},set exports(e){eE=e}},b4;function ade(){return b4||(b4=1,function(e,t){(function(o,a){e.exports=a(Tn())})(At,function(o){return function(){var a=o,c=a.lib,u=c.WordArray,d=a.enc;d.Utf16=d.Utf16BE={stringify:function(m){for(var g=m.words,_=m.sigBytes,S=[],C=0;C<_;C+=2){var O=g[C>>>2]>>>16-C%4*8&65535;S.push(String.fromCharCode(O))}return S.join("")},parse:function(m){for(var g=m.length,_=[],S=0;S<g;S++)_[S>>>1]|=m.charCodeAt(S)<<16-S%2*16;return u.create(_,g*2)}},d.Utf16LE={stringify:function(m){for(var g=m.words,_=m.sigBytes,S=[],C=0;C<_;C+=2){var O=f(g[C>>>2]>>>16-C%4*8&65535);S.push(String.fromCharCode(O))}return S.join("")},parse:function(m){for(var g=m.length,_=[],S=0;S<g;S++)_[S>>>1]|=f(m.charCodeAt(S)<<16-S%2*16);return u.create(_,g*2)}};function f(m){return m<<8&4278255360|m>>>8&16711935}}(),o.enc.Utf16})}(ode)),eE}var tE={},sde={get exports(){return tE},set exports(e){tE=e}},R4;function zh(){return R4||(R4=1,function(e,t){(function(o,a){e.exports=a(Tn())})(At,function(o){return function(){var a=o,c=a.lib,u=c.WordArray,d=a.enc;d.Base64={stringify:function(m){var g=m.words,_=m.sigBytes,S=this._map;m.clamp();for(var C=[],O=0;O<_;O+=3)for(var I=g[O>>>2]>>>24-O%4*8&255,A=g[O+1>>>2]>>>24-(O+1)%4*8&255,L=g[O+2>>>2]>>>24-(O+2)%4*8&255,N=I<<16|A<<8|L,P=0;P<4&&O+P*.75<_;P++)C.push(S.charAt(N>>>6*(3-P)&63));var D=S.charAt(64);if(D)for(;C.length%4;)C.push(D);return C.join("")},parse:function(m){var g=m.length,_=this._map,S=this._reverseMap;if(!S){S=this._reverseMap=[];for(var C=0;C<_.length;C++)S[_.charCodeAt(C)]=C}var O=_.charAt(64);if(O){var I=m.indexOf(O);I!==-1&&(g=I)}return f(m,g,S)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function f(m,g,_){for(var S=[],C=0,O=0;O<g;O++)if(O%4){var I=_[m.charCodeAt(O-1)]<<O%4*2,A=_[m.charCodeAt(O)]>>>6-O%4*2,L=I|A;S[C>>>2]|=L<<24-C%4*8,C++}return u.create(S,C)}}(),o.enc.Base64})}(sde)),tE}var nE={},cde={get exports(){return nE},set exports(e){nE=e}},I4;function lde(){return I4||(I4=1,function(e,t){(function(o,a){e.exports=a(Tn())})(At,function(o){return function(){var a=o,c=a.lib,u=c.WordArray,d=a.enc;d.Base64url={stringify:function(m,g=!0){var _=m.words,S=m.sigBytes,C=g?this._safe_map:this._map;m.clamp();for(var O=[],I=0;I<S;I+=3)for(var A=_[I>>>2]>>>24-I%4*8&255,L=_[I+1>>>2]>>>24-(I+1)%4*8&255,N=_[I+2>>>2]>>>24-(I+2)%4*8&255,P=A<<16|L<<8|N,D=0;D<4&&I+D*.75<S;D++)O.push(C.charAt(P>>>6*(3-D)&63));var U=C.charAt(64);if(U)for(;O.length%4;)O.push(U);return O.join("")},parse:function(m,g=!0){var _=m.length,S=g?this._safe_map:this._map,C=this._reverseMap;if(!C){C=this._reverseMap=[];for(var O=0;O<S.length;O++)C[S.charCodeAt(O)]=O}var I=S.charAt(64);if(I){var A=m.indexOf(I);A!==-1&&(_=A)}return f(m,_,C)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function f(m,g,_){for(var S=[],C=0,O=0;O<g;O++)if(O%4){var I=_[m.charCodeAt(O-1)]<<O%4*2,A=_[m.charCodeAt(O)]>>>6-O%4*2,L=I|A;S[C>>>2]|=L<<24-C%4*8,C++}return u.create(S,C)}}(),o.enc.Base64url})}(cde)),nE}var rE={},ude={get exports(){return rE},set exports(e){rE=e}},w4;function Kh(){return w4||(w4=1,function(e,t){(function(o,a){e.exports=a(Tn())})(At,function(o){return function(a){var c=o,u=c.lib,d=u.WordArray,f=u.Hasher,m=c.algo,g=[];(function(){for(var A=0;A<64;A++)g[A]=a.abs(a.sin(A+1))*4294967296|0})();var _=m.MD5=f.extend({_doReset:function(){this._hash=new d.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(A,L){for(var N=0;N<16;N++){var P=L+N,D=A[P];A[P]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}var U=this._hash.words,B=A[L+0],F=A[L+1],H=A[L+2],K=A[L+3],te=A[L+4],Y=A[L+5],Q=A[L+6],J=A[L+7],q=A[L+8],ee=A[L+9],re=A[L+10],le=A[L+11],me=A[L+12],ue=A[L+13],ve=A[L+14],Ee=A[L+15],oe=U[0],ae=U[1],he=U[2],pe=U[3];oe=S(oe,ae,he,pe,B,7,g[0]),pe=S(pe,oe,ae,he,F,12,g[1]),he=S(he,pe,oe,ae,H,17,g[2]),ae=S(ae,he,pe,oe,K,22,g[3]),oe=S(oe,ae,he,pe,te,7,g[4]),pe=S(pe,oe,ae,he,Y,12,g[5]),he=S(he,pe,oe,ae,Q,17,g[6]),ae=S(ae,he,pe,oe,J,22,g[7]),oe=S(oe,ae,he,pe,q,7,g[8]),pe=S(pe,oe,ae,he,ee,12,g[9]),he=S(he,pe,oe,ae,re,17,g[10]),ae=S(ae,he,pe,oe,le,22,g[11]),oe=S(oe,ae,he,pe,me,7,g[12]),pe=S(pe,oe,ae,he,ue,12,g[13]),he=S(he,pe,oe,ae,ve,17,g[14]),ae=S(ae,he,pe,oe,Ee,22,g[15]),oe=C(oe,ae,he,pe,F,5,g[16]),pe=C(pe,oe,ae,he,Q,9,g[17]),he=C(he,pe,oe,ae,le,14,g[18]),ae=C(ae,he,pe,oe,B,20,g[19]),oe=C(oe,ae,he,pe,Y,5,g[20]),pe=C(pe,oe,ae,he,re,9,g[21]),he=C(he,pe,oe,ae,Ee,14,g[22]),ae=C(ae,he,pe,oe,te,20,g[23]),oe=C(oe,ae,he,pe,ee,5,g[24]),pe=C(pe,oe,ae,he,ve,9,g[25]),he=C(he,pe,oe,ae,K,14,g[26]),ae=C(ae,he,pe,oe,q,20,g[27]),oe=C(oe,ae,he,pe,ue,5,g[28]),pe=C(pe,oe,ae,he,H,9,g[29]),he=C(he,pe,oe,ae,J,14,g[30]),ae=C(ae,he,pe,oe,me,20,g[31]),oe=O(oe,ae,he,pe,Y,4,g[32]),pe=O(pe,oe,ae,he,q,11,g[33]),he=O(he,pe,oe,ae,le,16,g[34]),ae=O(ae,he,pe,oe,ve,23,g[35]),oe=O(oe,ae,he,pe,F,4,g[36]),pe=O(pe,oe,ae,he,te,11,g[37]),he=O(he,pe,oe,ae,J,16,g[38]),ae=O(ae,he,pe,oe,re,23,g[39]),oe=O(oe,ae,he,pe,ue,4,g[40]),pe=O(pe,oe,ae,he,B,11,g[41]),he=O(he,pe,oe,ae,K,16,g[42]),ae=O(ae,he,pe,oe,Q,23,g[43]),oe=O(oe,ae,he,pe,ee,4,g[44]),pe=O(pe,oe,ae,he,me,11,g[45]),he=O(he,pe,oe,ae,Ee,16,g[46]),ae=O(ae,he,pe,oe,H,23,g[47]),oe=I(oe,ae,he,pe,B,6,g[48]),pe=I(pe,oe,ae,he,J,10,g[49]),he=I(he,pe,oe,ae,ve,15,g[50]),ae=I(ae,he,pe,oe,Y,21,g[51]),oe=I(oe,ae,he,pe,me,6,g[52]),pe=I(pe,oe,ae,he,K,10,g[53]),he=I(he,pe,oe,ae,re,15,g[54]),ae=I(ae,he,pe,oe,F,21,g[55]),oe=I(oe,ae,he,pe,q,6,g[56]),pe=I(pe,oe,ae,he,Ee,10,g[57]),he=I(he,pe,oe,ae,Q,15,g[58]),ae=I(ae,he,pe,oe,ue,21,g[59]),oe=I(oe,ae,he,pe,te,6,g[60]),pe=I(pe,oe,ae,he,le,10,g[61]),he=I(he,pe,oe,ae,H,15,g[62]),ae=I(ae,he,pe,oe,ee,21,g[63]),U[0]=U[0]+oe|0,U[1]=U[1]+ae|0,U[2]=U[2]+he|0,U[3]=U[3]+pe|0},_doFinalize:function(){var A=this._data,L=A.words,N=this._nDataBytes*8,P=A.sigBytes*8;L[P>>>5]|=128<<24-P%32;var D=a.floor(N/4294967296),U=N;L[(P+64>>>9<<4)+15]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,L[(P+64>>>9<<4)+14]=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360,A.sigBytes=(L.length+1)*4,this._process();for(var B=this._hash,F=B.words,H=0;H<4;H++){var K=F[H];F[H]=(K<<8|K>>>24)&16711935|(K<<24|K>>>8)&4278255360}return B},clone:function(){var A=f.clone.call(this);return A._hash=this._hash.clone(),A}});function S(A,L,N,P,D,U,B){var F=A+(L&N|~L&P)+D+B;return(F<<U|F>>>32-U)+L}function C(A,L,N,P,D,U,B){var F=A+(L&P|N&~P)+D+B;return(F<<U|F>>>32-U)+L}function O(A,L,N,P,D,U,B){var F=A+(L^N^P)+D+B;return(F<<U|F>>>32-U)+L}function I(A,L,N,P,D,U,B){var F=A+(N^(L|~P))+D+B;return(F<<U|F>>>32-U)+L}c.MD5=f._createHelper(_),c.HmacMD5=f._createHmacHelper(_)}(Math),o.MD5})}(ude)),rE}var iE={},dde={get exports(){return iE},set exports(e){iE=e}},O4;function C1(){return O4||(O4=1,function(e,t){(function(o,a){e.exports=a(Tn())})(At,function(o){return function(){var a=o,c=a.lib,u=c.WordArray,d=c.Hasher,f=a.algo,m=[],g=f.SHA1=d.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(_,S){for(var C=this._hash.words,O=C[0],I=C[1],A=C[2],L=C[3],N=C[4],P=0;P<80;P++){if(P<16)m[P]=_[S+P]|0;else{var D=m[P-3]^m[P-8]^m[P-14]^m[P-16];m[P]=D<<1|D>>>31}var U=(O<<5|O>>>27)+N+m[P];P<20?U+=(I&A|~I&L)+1518500249:P<40?U+=(I^A^L)+1859775393:P<60?U+=(I&A|I&L|A&L)-1894007588:U+=(I^A^L)-899497514,N=L,L=A,A=I<<30|I>>>2,I=O,O=U}C[0]=C[0]+O|0,C[1]=C[1]+I|0,C[2]=C[2]+A|0,C[3]=C[3]+L|0,C[4]=C[4]+N|0},_doFinalize:function(){var _=this._data,S=_.words,C=this._nDataBytes*8,O=_.sigBytes*8;return S[O>>>5]|=128<<24-O%32,S[(O+64>>>9<<4)+14]=Math.floor(C/4294967296),S[(O+64>>>9<<4)+15]=C,_.sigBytes=S.length*4,this._process(),this._hash},clone:function(){var _=d.clone.call(this);return _._hash=this._hash.clone(),_}});a.SHA1=d._createHelper(g),a.HmacSHA1=d._createHmacHelper(g)}(),o.SHA1})}(dde)),iE}var oE={},hde={get exports(){return oE},set exports(e){oE=e}},A4;function L5(){return A4||(A4=1,function(e,t){(function(o,a){e.exports=a(Tn())})(At,function(o){return function(a){var c=o,u=c.lib,d=u.WordArray,f=u.Hasher,m=c.algo,g=[],_=[];(function(){function O(N){for(var P=a.sqrt(N),D=2;D<=P;D++)if(!(N%D))return!1;return!0}function I(N){return(N-(N|0))*4294967296|0}for(var A=2,L=0;L<64;)O(A)&&(L<8&&(g[L]=I(a.pow(A,1/2))),_[L]=I(a.pow(A,1/3)),L++),A++})();var S=[],C=m.SHA256=f.extend({_doReset:function(){this._hash=new d.init(g.slice(0))},_doProcessBlock:function(O,I){for(var A=this._hash.words,L=A[0],N=A[1],P=A[2],D=A[3],U=A[4],B=A[5],F=A[6],H=A[7],K=0;K<64;K++){if(K<16)S[K]=O[I+K]|0;else{var te=S[K-15],Y=(te<<25|te>>>7)^(te<<14|te>>>18)^te>>>3,Q=S[K-2],J=(Q<<15|Q>>>17)^(Q<<13|Q>>>19)^Q>>>10;S[K]=Y+S[K-7]+J+S[K-16]}var q=U&B^~U&F,ee=L&N^L&P^N&P,re=(L<<30|L>>>2)^(L<<19|L>>>13)^(L<<10|L>>>22),le=(U<<26|U>>>6)^(U<<21|U>>>11)^(U<<7|U>>>25),me=H+le+q+_[K]+S[K],ue=re+ee;H=F,F=B,B=U,U=D+me|0,D=P,P=N,N=L,L=me+ue|0}A[0]=A[0]+L|0,A[1]=A[1]+N|0,A[2]=A[2]+P|0,A[3]=A[3]+D|0,A[4]=A[4]+U|0,A[5]=A[5]+B|0,A[6]=A[6]+F|0,A[7]=A[7]+H|0},_doFinalize:function(){var O=this._data,I=O.words,A=this._nDataBytes*8,L=O.sigBytes*8;return I[L>>>5]|=128<<24-L%32,I[(L+64>>>9<<4)+14]=a.floor(A/4294967296),I[(L+64>>>9<<4)+15]=A,O.sigBytes=I.length*4,this._process(),this._hash},clone:function(){var O=f.clone.call(this);return O._hash=this._hash.clone(),O}});c.SHA256=f._createHelper(C),c.HmacSHA256=f._createHmacHelper(C)}(Math),o.SHA256})}(hde)),oE}var aE={},pde={get exports(){return aE},set exports(e){aE=e}},N4;function fde(){return N4||(N4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),L5())})(At,function(o){return function(){var a=o,c=a.lib,u=c.WordArray,d=a.algo,f=d.SHA256,m=d.SHA224=f.extend({_doReset:function(){this._hash=new u.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var g=f._doFinalize.call(this);return g.sigBytes-=4,g}});a.SHA224=f._createHelper(m),a.HmacSHA224=f._createHmacHelper(m)}(),o.SHA224})}(pde)),aE}var sE={},mde={get exports(){return sE},set exports(e){sE=e}},P4;function M5(){return P4||(P4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),F_())})(At,function(o){return function(){var a=o,c=a.lib,u=c.Hasher,d=a.x64,f=d.Word,m=d.WordArray,g=a.algo;function _(){return f.create.apply(f,arguments)}var S=[_(1116352408,3609767458),_(1899447441,602891725),_(3049323471,3964484399),_(3921009573,2173295548),_(961987163,4081628472),_(1508970993,3053834265),_(2453635748,2937671579),_(2870763221,3664609560),_(3624381080,2734883394),_(310598401,1164996542),_(607225278,1323610764),_(1426881987,3590304994),_(1925078388,4068182383),_(2162078206,991336113),_(2614888103,633803317),_(3248222580,3479774868),_(3835390401,2666613458),_(4022224774,944711139),_(264347078,2341262773),_(604807628,2007800933),_(770255983,1495990901),_(1249150122,1856431235),_(1555081692,3175218132),_(1996064986,2198950837),_(2554220882,3999719339),_(2821834349,766784016),_(2952996808,2566594879),_(3210313671,3203337956),_(3336571891,1034457026),_(3584528711,2466948901),_(113926993,3758326383),_(338241895,168717936),_(666307205,1188179964),_(773529912,1546045734),_(1294757372,1522805485),_(1396182291,2643833823),_(1695183700,2343527390),_(1986661051,1014477480),_(2177026350,1206759142),_(2456956037,344077627),_(2730485921,1290863460),_(2820302411,3158454273),_(3259730800,3505952657),_(3345764771,106217008),_(3516065817,3606008344),_(3600352804,1432725776),_(4094571909,1467031594),_(275423344,851169720),_(430227734,3100823752),_(506948616,1363258195),_(659060556,3750685593),_(883997877,3785050280),_(958139571,3318307427),_(1322822218,3812723403),_(1537002063,2003034995),_(1747873779,3602036899),_(1955562222,1575990012),_(2024104815,1125592928),_(2227730452,2716904306),_(2361852424,442776044),_(2428436474,593698344),_(2756734187,3733110249),_(3204031479,2999351573),_(3329325298,3815920427),_(3391569614,3928383900),_(3515267271,566280711),_(3940187606,3454069534),_(4118630271,4000239992),_(116418474,1914138554),_(174292421,2731055270),_(289380356,3203993006),_(460393269,320620315),_(685471733,587496836),_(852142971,1086792851),_(1017036298,365543100),_(1126000580,2618297676),_(1288033470,3409855158),_(1501505948,4234509866),_(1607167915,987167468),_(1816402316,1246189591)],C=[];(function(){for(var I=0;I<80;I++)C[I]=_()})();var O=g.SHA512=u.extend({_doReset:function(){this._hash=new m.init([new f.init(1779033703,4089235720),new f.init(3144134277,2227873595),new f.init(1013904242,4271175723),new f.init(2773480762,1595750129),new f.init(1359893119,2917565137),new f.init(2600822924,725511199),new f.init(528734635,4215389547),new f.init(1541459225,327033209)])},_doProcessBlock:function(I,A){for(var L=this._hash.words,N=L[0],P=L[1],D=L[2],U=L[3],B=L[4],F=L[5],H=L[6],K=L[7],te=N.high,Y=N.low,Q=P.high,J=P.low,q=D.high,ee=D.low,re=U.high,le=U.low,me=B.high,ue=B.low,ve=F.high,Ee=F.low,oe=H.high,ae=H.low,he=K.high,pe=K.low,Ae=te,Le=Y,Qe=Q,je=J,Ut=q,Nt=ee,at=re,Ht=le,He=me,ot=ue,It=ve,tn=Ee,xt=oe,Xe=ae,$e=he,ze=pe,tt=0;tt<80;tt++){var mt,Dt,lr=C[tt];if(tt<16)Dt=lr.high=I[A+tt*2]|0,mt=lr.low=I[A+tt*2+1]|0;else{var yn=C[tt-15],rn=yn.high,an=yn.low,si=(rn>>>1|an<<31)^(rn>>>8|an<<24)^rn>>>7,ur=(an>>>1|rn<<31)^(an>>>8|rn<<24)^(an>>>7|rn<<25),sn=C[tt-2],kt=sn.high,vn=sn.low,En=(kt>>>19|vn<<13)^(kt<<3|vn>>>29)^kt>>>6,pn=(vn>>>19|kt<<13)^(vn<<3|kt>>>29)^(vn>>>6|kt<<26),In=C[tt-7],so=In.high,Gi=In.low,Mr=C[tt-16],Ni=Mr.high,qe=Mr.low;mt=ur+Gi,Dt=si+so+(mt>>>0<ur>>>0?1:0),mt=mt+pn,Dt=Dt+En+(mt>>>0<pn>>>0?1:0),mt=mt+qe,Dt=Dt+Ni+(mt>>>0<qe>>>0?1:0),lr.high=Dt,lr.low=mt}var dt=He&It^~He&xt,wn=ot&tn^~ot&Xe,Vt=Ae&Qe^Ae&Ut^Qe&Ut,Ur=Le&je^Le&Nt^je&Nt,Cr=(Ae>>>28|Le<<4)^(Ae<<30|Le>>>2)^(Ae<<25|Le>>>7),Ln=(Le>>>28|Ae<<4)^(Le<<30|Ae>>>2)^(Le<<25|Ae>>>7),vt=(He>>>14|ot<<18)^(He>>>18|ot<<14)^(He<<23|ot>>>9),Yt=(ot>>>14|He<<18)^(ot>>>18|He<<14)^(ot<<23|He>>>9),cn=S[tt],dr=cn.high,Vr=cn.low,Ir=ze+Yt,ci=$e+vt+(Ir>>>0<ze>>>0?1:0),Ir=Ir+wn,ci=ci+dt+(Ir>>>0<wn>>>0?1:0),Ir=Ir+Vr,ci=ci+dr+(Ir>>>0<Vr>>>0?1:0),Ir=Ir+mt,ci=ci+Dt+(Ir>>>0<mt>>>0?1:0),Si=Ln+Ur,To=Cr+Vt+(Si>>>0<Ln>>>0?1:0);$e=xt,ze=Xe,xt=It,Xe=tn,It=He,tn=ot,ot=Ht+Ir|0,He=at+ci+(ot>>>0<Ht>>>0?1:0)|0,at=Ut,Ht=Nt,Ut=Qe,Nt=je,Qe=Ae,je=Le,Le=Ir+Si|0,Ae=ci+To+(Le>>>0<Ir>>>0?1:0)|0}Y=N.low=Y+Le,N.high=te+Ae+(Y>>>0<Le>>>0?1:0),J=P.low=J+je,P.high=Q+Qe+(J>>>0<je>>>0?1:0),ee=D.low=ee+Nt,D.high=q+Ut+(ee>>>0<Nt>>>0?1:0),le=U.low=le+Ht,U.high=re+at+(le>>>0<Ht>>>0?1:0),ue=B.low=ue+ot,B.high=me+He+(ue>>>0<ot>>>0?1:0),Ee=F.low=Ee+tn,F.high=ve+It+(Ee>>>0<tn>>>0?1:0),ae=H.low=ae+Xe,H.high=oe+xt+(ae>>>0<Xe>>>0?1:0),pe=K.low=pe+ze,K.high=he+$e+(pe>>>0<ze>>>0?1:0)},_doFinalize:function(){var I=this._data,A=I.words,L=this._nDataBytes*8,N=I.sigBytes*8;A[N>>>5]|=128<<24-N%32,A[(N+128>>>10<<5)+30]=Math.floor(L/4294967296),A[(N+128>>>10<<5)+31]=L,I.sigBytes=A.length*4,this._process();var P=this._hash.toX32();return P},clone:function(){var I=u.clone.call(this);return I._hash=this._hash.clone(),I},blockSize:1024/32});a.SHA512=u._createHelper(O),a.HmacSHA512=u._createHmacHelper(O)}(),o.SHA512})}(mde)),sE}var cE={},gde={get exports(){return cE},set exports(e){cE=e}},x4;function vde(){return x4||(x4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),F_(),M5())})(At,function(o){return function(){var a=o,c=a.x64,u=c.Word,d=c.WordArray,f=a.algo,m=f.SHA512,g=f.SHA384=m.extend({_doReset:function(){this._hash=new d.init([new u.init(3418070365,3238371032),new u.init(1654270250,914150663),new u.init(2438529370,812702999),new u.init(355462360,4144912697),new u.init(1731405415,4290775857),new u.init(2394180231,1750603025),new u.init(3675008525,1694076839),new u.init(1203062813,3204075428)])},_doFinalize:function(){var _=m._doFinalize.call(this);return _.sigBytes-=16,_}});a.SHA384=m._createHelper(g),a.HmacSHA384=m._createHmacHelper(g)}(),o.SHA384})}(gde)),cE}var lE={},Ede={get exports(){return lE},set exports(e){lE=e}},D4;function _de(){return D4||(D4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),F_())})(At,function(o){return function(a){var c=o,u=c.lib,d=u.WordArray,f=u.Hasher,m=c.x64,g=m.Word,_=c.algo,S=[],C=[],O=[];(function(){for(var L=1,N=0,P=0;P<24;P++){S[L+5*N]=(P+1)*(P+2)/2%64;var D=N%5,U=(2*L+3*N)%5;L=D,N=U}for(var L=0;L<5;L++)for(var N=0;N<5;N++)C[L+5*N]=N+(2*L+3*N)%5*5;for(var B=1,F=0;F<24;F++){for(var H=0,K=0,te=0;te<7;te++){if(B&1){var Y=(1<<te)-1;Y<32?K^=1<<Y:H^=1<<Y-32}B&128?B=B<<1^113:B<<=1}O[F]=g.create(H,K)}})();var I=[];(function(){for(var L=0;L<25;L++)I[L]=g.create()})();var A=_.SHA3=f.extend({cfg:f.cfg.extend({outputLength:512}),_doReset:function(){for(var L=this._state=[],N=0;N<25;N++)L[N]=new g.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(L,N){for(var P=this._state,D=this.blockSize/2,U=0;U<D;U++){var B=L[N+2*U],F=L[N+2*U+1];B=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,F=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360;var H=P[U];H.high^=F,H.low^=B}for(var K=0;K<24;K++){for(var te=0;te<5;te++){for(var Y=0,Q=0,J=0;J<5;J++){var H=P[te+5*J];Y^=H.high,Q^=H.low}var q=I[te];q.high=Y,q.low=Q}for(var te=0;te<5;te++)for(var ee=I[(te+4)%5],re=I[(te+1)%5],le=re.high,me=re.low,Y=ee.high^(le<<1|me>>>31),Q=ee.low^(me<<1|le>>>31),J=0;J<5;J++){var H=P[te+5*J];H.high^=Y,H.low^=Q}for(var ue=1;ue<25;ue++){var Y,Q,H=P[ue],ve=H.high,Ee=H.low,oe=S[ue];oe<32?(Y=ve<<oe|Ee>>>32-oe,Q=Ee<<oe|ve>>>32-oe):(Y=Ee<<oe-32|ve>>>64-oe,Q=ve<<oe-32|Ee>>>64-oe);var ae=I[C[ue]];ae.high=Y,ae.low=Q}var he=I[0],pe=P[0];he.high=pe.high,he.low=pe.low;for(var te=0;te<5;te++)for(var J=0;J<5;J++){var ue=te+5*J,H=P[ue],Ae=I[ue],Le=I[(te+1)%5+5*J],Qe=I[(te+2)%5+5*J];H.high=Ae.high^~Le.high&Qe.high,H.low=Ae.low^~Le.low&Qe.low}var H=P[0],je=O[K];H.high^=je.high,H.low^=je.low}},_doFinalize:function(){var L=this._data,N=L.words;this._nDataBytes*8;var P=L.sigBytes*8,D=this.blockSize*32;N[P>>>5]|=1<<24-P%32,N[(a.ceil((P+1)/D)*D>>>5)-1]|=128,L.sigBytes=N.length*4,this._process();for(var U=this._state,B=this.cfg.outputLength/8,F=B/8,H=[],K=0;K<F;K++){var te=U[K],Y=te.high,Q=te.low;Y=(Y<<8|Y>>>24)&16711935|(Y<<24|Y>>>8)&4278255360,Q=(Q<<8|Q>>>24)&16711935|(Q<<24|Q>>>8)&4278255360,H.push(Q),H.push(Y)}return new d.init(H,B)},clone:function(){for(var L=f.clone.call(this),N=L._state=this._state.slice(0),P=0;P<25;P++)N[P]=N[P].clone();return L}});c.SHA3=f._createHelper(A),c.HmacSHA3=f._createHmacHelper(A)}(Math),o.SHA3})}(Ede)),lE}var uE={},Sde={get exports(){return uE},set exports(e){uE=e}},k4;function yde(){return k4||(k4=1,function(e,t){(function(o,a){e.exports=a(Tn())})(At,function(o){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(a){var c=o,u=c.lib,d=u.WordArray,f=u.Hasher,m=c.algo,g=d.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),_=d.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),S=d.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),C=d.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),O=d.create([0,1518500249,1859775393,2400959708,2840853838]),I=d.create([1352829926,1548603684,1836072691,2053994217,0]),A=m.RIPEMD160=f.extend({_doReset:function(){this._hash=d.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(F,H){for(var K=0;K<16;K++){var te=H+K,Y=F[te];F[te]=(Y<<8|Y>>>24)&16711935|(Y<<24|Y>>>8)&4278255360}var Q=this._hash.words,J=O.words,q=I.words,ee=g.words,re=_.words,le=S.words,me=C.words,ue,ve,Ee,oe,ae,he,pe,Ae,Le,Qe;he=ue=Q[0],pe=ve=Q[1],Ae=Ee=Q[2],Le=oe=Q[3],Qe=ae=Q[4];for(var je,K=0;K<80;K+=1)je=ue+F[H+ee[K]]|0,K<16?je+=L(ve,Ee,oe)+J[0]:K<32?je+=N(ve,Ee,oe)+J[1]:K<48?je+=P(ve,Ee,oe)+J[2]:K<64?je+=D(ve,Ee,oe)+J[3]:je+=U(ve,Ee,oe)+J[4],je=je|0,je=B(je,le[K]),je=je+ae|0,ue=ae,ae=oe,oe=B(Ee,10),Ee=ve,ve=je,je=he+F[H+re[K]]|0,K<16?je+=U(pe,Ae,Le)+q[0]:K<32?je+=D(pe,Ae,Le)+q[1]:K<48?je+=P(pe,Ae,Le)+q[2]:K<64?je+=N(pe,Ae,Le)+q[3]:je+=L(pe,Ae,Le)+q[4],je=je|0,je=B(je,me[K]),je=je+Qe|0,he=Qe,Qe=Le,Le=B(Ae,10),Ae=pe,pe=je;je=Q[1]+Ee+Le|0,Q[1]=Q[2]+oe+Qe|0,Q[2]=Q[3]+ae+he|0,Q[3]=Q[4]+ue+pe|0,Q[4]=Q[0]+ve+Ae|0,Q[0]=je},_doFinalize:function(){var F=this._data,H=F.words,K=this._nDataBytes*8,te=F.sigBytes*8;H[te>>>5]|=128<<24-te%32,H[(te+64>>>9<<4)+14]=(K<<8|K>>>24)&16711935|(K<<24|K>>>8)&4278255360,F.sigBytes=(H.length+1)*4,this._process();for(var Y=this._hash,Q=Y.words,J=0;J<5;J++){var q=Q[J];Q[J]=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360}return Y},clone:function(){var F=f.clone.call(this);return F._hash=this._hash.clone(),F}});function L(F,H,K){return F^H^K}function N(F,H,K){return F&H|~F&K}function P(F,H,K){return(F|~H)^K}function D(F,H,K){return F&K|H&~K}function U(F,H,K){return F^(H|~K)}function B(F,H){return F<<H|F>>>32-H}c.RIPEMD160=f._createHelper(A),c.HmacRIPEMD160=f._createHmacHelper(A)}(),o.RIPEMD160})}(Sde)),uE}var dE={},Cde={get exports(){return dE},set exports(e){dE=e}},L4;function T1(){return L4||(L4=1,function(e,t){(function(o,a){e.exports=a(Tn())})(At,function(o){(function(){var a=o,c=a.lib,u=c.Base,d=a.enc,f=d.Utf8,m=a.algo;m.HMAC=u.extend({init:function(g,_){g=this._hasher=new g.init,typeof _=="string"&&(_=f.parse(_));var S=g.blockSize,C=S*4;_.sigBytes>C&&(_=g.finalize(_)),_.clamp();for(var O=this._oKey=_.clone(),I=this._iKey=_.clone(),A=O.words,L=I.words,N=0;N<S;N++)A[N]^=1549556828,L[N]^=909522486;O.sigBytes=I.sigBytes=C,this.reset()},reset:function(){var g=this._hasher;g.reset(),g.update(this._iKey)},update:function(g){return this._hasher.update(g),this},finalize:function(g){var _=this._hasher,S=_.finalize(g);_.reset();var C=_.finalize(this._oKey.clone().concat(S));return C}})})()})}(Cde)),dE}var hE={},Tde={get exports(){return hE},set exports(e){hE=e}},M4;function bde(){return M4||(M4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),C1(),T1())})(At,function(o){return function(){var a=o,c=a.lib,u=c.Base,d=c.WordArray,f=a.algo,m=f.SHA1,g=f.HMAC,_=f.PBKDF2=u.extend({cfg:u.extend({keySize:128/32,hasher:m,iterations:1}),init:function(S){this.cfg=this.cfg.extend(S)},compute:function(S,C){for(var O=this.cfg,I=g.create(O.hasher,S),A=d.create(),L=d.create([1]),N=A.words,P=L.words,D=O.keySize,U=O.iterations;N.length<D;){var B=I.update(C).finalize(L);I.reset();for(var F=B.words,H=F.length,K=B,te=1;te<U;te++){K=I.finalize(K),I.reset();for(var Y=K.words,Q=0;Q<H;Q++)F[Q]^=Y[Q]}A.concat(B),P[0]++}return A.sigBytes=D*4,A}});a.PBKDF2=function(S,C,O){return _.create(O).compute(S,C)}}(),o.PBKDF2})}(Tde)),hE}var pE={},Rde={get exports(){return pE},set exports(e){pE=e}},U4;function Gu(){return U4||(U4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),C1(),T1())})(At,function(o){return function(){var a=o,c=a.lib,u=c.Base,d=c.WordArray,f=a.algo,m=f.MD5,g=f.EvpKDF=u.extend({cfg:u.extend({keySize:128/32,hasher:m,iterations:1}),init:function(_){this.cfg=this.cfg.extend(_)},compute:function(_,S){for(var C,O=this.cfg,I=O.hasher.create(),A=d.create(),L=A.words,N=O.keySize,P=O.iterations;L.length<N;){C&&I.update(C),C=I.update(_).finalize(S),I.reset();for(var D=1;D<P;D++)C=I.finalize(C),I.reset();A.concat(C)}return A.sigBytes=N*4,A}});a.EvpKDF=function(_,S,C){return g.create(C).compute(_,S)}}(),o.EvpKDF})}(Rde)),pE}var fE={},Ide={get exports(){return fE},set exports(e){fE=e}},V4;function Wi(){return V4||(V4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),Gu())})(At,function(o){o.lib.Cipher||function(a){var c=o,u=c.lib,d=u.Base,f=u.WordArray,m=u.BufferedBlockAlgorithm,g=c.enc;g.Utf8;var _=g.Base64,S=c.algo,C=S.EvpKDF,O=u.Cipher=m.extend({cfg:d.extend(),createEncryptor:function(Y,Q){return this.create(this._ENC_XFORM_MODE,Y,Q)},createDecryptor:function(Y,Q){return this.create(this._DEC_XFORM_MODE,Y,Q)},init:function(Y,Q,J){this.cfg=this.cfg.extend(J),this._xformMode=Y,this._key=Q,this.reset()},reset:function(){m.reset.call(this),this._doReset()},process:function(Y){return this._append(Y),this._process()},finalize:function(Y){Y&&this._append(Y);var Q=this._doFinalize();return Q},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function Y(Q){return typeof Q=="string"?te:F}return function(Q){return{encrypt:function(J,q,ee){return Y(q).encrypt(Q,J,q,ee)},decrypt:function(J,q,ee){return Y(q).decrypt(Q,J,q,ee)}}}}()});u.StreamCipher=O.extend({_doFinalize:function(){var Y=this._process(!0);return Y},blockSize:1});var I=c.mode={},A=u.BlockCipherMode=d.extend({createEncryptor:function(Y,Q){return this.Encryptor.create(Y,Q)},createDecryptor:function(Y,Q){return this.Decryptor.create(Y,Q)},init:function(Y,Q){this._cipher=Y,this._iv=Q}}),L=I.CBC=function(){var Y=A.extend();Y.Encryptor=Y.extend({processBlock:function(J,q){var ee=this._cipher,re=ee.blockSize;Q.call(this,J,q,re),ee.encryptBlock(J,q),this._prevBlock=J.slice(q,q+re)}}),Y.Decryptor=Y.extend({processBlock:function(J,q){var ee=this._cipher,re=ee.blockSize,le=J.slice(q,q+re);ee.decryptBlock(J,q),Q.call(this,J,q,re),this._prevBlock=le}});function Q(J,q,ee){var re,le=this._iv;le?(re=le,this._iv=a):re=this._prevBlock;for(var me=0;me<ee;me++)J[q+me]^=re[me]}return Y}(),N=c.pad={},P=N.Pkcs7={pad:function(Y,Q){for(var J=Q*4,q=J-Y.sigBytes%J,ee=q<<24|q<<16|q<<8|q,re=[],le=0;le<q;le+=4)re.push(ee);var me=f.create(re,q);Y.concat(me)},unpad:function(Y){var Q=Y.words[Y.sigBytes-1>>>2]&255;Y.sigBytes-=Q}};u.BlockCipher=O.extend({cfg:O.cfg.extend({mode:L,padding:P}),reset:function(){var Y;O.reset.call(this);var Q=this.cfg,J=Q.iv,q=Q.mode;this._xformMode==this._ENC_XFORM_MODE?Y=q.createEncryptor:(Y=q.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==Y?this._mode.init(this,J&&J.words):(this._mode=Y.call(q,this,J&&J.words),this._mode.__creator=Y)},_doProcessBlock:function(Y,Q){this._mode.processBlock(Y,Q)},_doFinalize:function(){var Y,Q=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Q.pad(this._data,this.blockSize),Y=this._process(!0)):(Y=this._process(!0),Q.unpad(Y)),Y},blockSize:128/32});var D=u.CipherParams=d.extend({init:function(Y){this.mixIn(Y)},toString:function(Y){return(Y||this.formatter).stringify(this)}}),U=c.format={},B=U.OpenSSL={stringify:function(Y){var Q,J=Y.ciphertext,q=Y.salt;return q?Q=f.create([1398893684,1701076831]).concat(q).concat(J):Q=J,Q.toString(_)},parse:function(Y){var Q,J=_.parse(Y),q=J.words;return q[0]==1398893684&&q[1]==1701076831&&(Q=f.create(q.slice(2,4)),q.splice(0,4),J.sigBytes-=16),D.create({ciphertext:J,salt:Q})}},F=u.SerializableCipher=d.extend({cfg:d.extend({format:B}),encrypt:function(Y,Q,J,q){q=this.cfg.extend(q);var ee=Y.createEncryptor(J,q),re=ee.finalize(Q),le=ee.cfg;return D.create({ciphertext:re,key:J,iv:le.iv,algorithm:Y,mode:le.mode,padding:le.padding,blockSize:Y.blockSize,formatter:q.format})},decrypt:function(Y,Q,J,q){q=this.cfg.extend(q),Q=this._parse(Q,q.format);var ee=Y.createDecryptor(J,q).finalize(Q.ciphertext);return ee},_parse:function(Y,Q){return typeof Y=="string"?Q.parse(Y,this):Y}}),H=c.kdf={},K=H.OpenSSL={execute:function(Y,Q,J,q){q||(q=f.random(64/8));var ee=C.create({keySize:Q+J}).compute(Y,q),re=f.create(ee.words.slice(Q),J*4);return ee.sigBytes=Q*4,D.create({key:ee,iv:re,salt:q})}},te=u.PasswordBasedCipher=F.extend({cfg:F.cfg.extend({kdf:K}),encrypt:function(Y,Q,J,q){q=this.cfg.extend(q);var ee=q.kdf.execute(J,Y.keySize,Y.ivSize);q.iv=ee.iv;var re=F.encrypt.call(this,Y,Q,ee.key,q);return re.mixIn(ee),re},decrypt:function(Y,Q,J,q){q=this.cfg.extend(q),Q=this._parse(Q,q.format);var ee=q.kdf.execute(J,Y.keySize,Y.ivSize,Q.salt);q.iv=ee.iv;var re=F.decrypt.call(this,Y,Q,ee.key,q);return re}})}()})}(Ide)),fE}var mE={},wde={get exports(){return mE},set exports(e){mE=e}},F4;function Ode(){return F4||(F4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),Wi())})(At,function(o){return o.mode.CFB=function(){var a=o.lib.BlockCipherMode.extend();a.Encryptor=a.extend({processBlock:function(u,d){var f=this._cipher,m=f.blockSize;c.call(this,u,d,m,f),this._prevBlock=u.slice(d,d+m)}}),a.Decryptor=a.extend({processBlock:function(u,d){var f=this._cipher,m=f.blockSize,g=u.slice(d,d+m);c.call(this,u,d,m,f),this._prevBlock=g}});function c(u,d,f,m){var g,_=this._iv;_?(g=_.slice(0),this._iv=void 0):g=this._prevBlock,m.encryptBlock(g,0);for(var S=0;S<f;S++)u[d+S]^=g[S]}return a}(),o.mode.CFB})}(wde)),mE}var gE={},Ade={get exports(){return gE},set exports(e){gE=e}},B4;function Nde(){return B4||(B4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),Wi())})(At,function(o){return o.mode.CTR=function(){var a=o.lib.BlockCipherMode.extend(),c=a.Encryptor=a.extend({processBlock:function(u,d){var f=this._cipher,m=f.blockSize,g=this._iv,_=this._counter;g&&(_=this._counter=g.slice(0),this._iv=void 0);var S=_.slice(0);f.encryptBlock(S,0),_[m-1]=_[m-1]+1|0;for(var C=0;C<m;C++)u[d+C]^=S[C]}});return a.Decryptor=c,a}(),o.mode.CTR})}(Ade)),gE}var vE={},Pde={get exports(){return vE},set exports(e){vE=e}},j4;function xde(){return j4||(j4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),Wi())})(At,function(o){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return o.mode.CTRGladman=function(){var a=o.lib.BlockCipherMode.extend();function c(f){if((f>>24&255)===255){var m=f>>16&255,g=f>>8&255,_=f&255;m===255?(m=0,g===255?(g=0,_===255?_=0:++_):++g):++m,f=0,f+=m<<16,f+=g<<8,f+=_}else f+=1<<24;return f}function u(f){return(f[0]=c(f[0]))===0&&(f[1]=c(f[1])),f}var d=a.Encryptor=a.extend({processBlock:function(f,m){var g=this._cipher,_=g.blockSize,S=this._iv,C=this._counter;S&&(C=this._counter=S.slice(0),this._iv=void 0),u(C);var O=C.slice(0);g.encryptBlock(O,0);for(var I=0;I<_;I++)f[m+I]^=O[I]}});return a.Decryptor=d,a}(),o.mode.CTRGladman})}(Pde)),vE}var EE={},Dde={get exports(){return EE},set exports(e){EE=e}},H4;function kde(){return H4||(H4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),Wi())})(At,function(o){return o.mode.OFB=function(){var a=o.lib.BlockCipherMode.extend(),c=a.Encryptor=a.extend({processBlock:function(u,d){var f=this._cipher,m=f.blockSize,g=this._iv,_=this._keystream;g&&(_=this._keystream=g.slice(0),this._iv=void 0),f.encryptBlock(_,0);for(var S=0;S<m;S++)u[d+S]^=_[S]}});return a.Decryptor=c,a}(),o.mode.OFB})}(Dde)),EE}var _E={},Lde={get exports(){return _E},set exports(e){_E=e}},$4;function Mde(){return $4||($4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),Wi())})(At,function(o){return o.mode.ECB=function(){var a=o.lib.BlockCipherMode.extend();return a.Encryptor=a.extend({processBlock:function(c,u){this._cipher.encryptBlock(c,u)}}),a.Decryptor=a.extend({processBlock:function(c,u){this._cipher.decryptBlock(c,u)}}),a}(),o.mode.ECB})}(Lde)),_E}var SE={},Ude={get exports(){return SE},set exports(e){SE=e}},W4;function Vde(){return W4||(W4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),Wi())})(At,function(o){return o.pad.AnsiX923={pad:function(a,c){var u=a.sigBytes,d=c*4,f=d-u%d,m=u+f-1;a.clamp(),a.words[m>>>2]|=f<<24-m%4*8,a.sigBytes+=f},unpad:function(a){var c=a.words[a.sigBytes-1>>>2]&255;a.sigBytes-=c}},o.pad.Ansix923})}(Ude)),SE}var yE={},Fde={get exports(){return yE},set exports(e){yE=e}},G4;function Bde(){return G4||(G4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),Wi())})(At,function(o){return o.pad.Iso10126={pad:function(a,c){var u=c*4,d=u-a.sigBytes%u;a.concat(o.lib.WordArray.random(d-1)).concat(o.lib.WordArray.create([d<<24],1))},unpad:function(a){var c=a.words[a.sigBytes-1>>>2]&255;a.sigBytes-=c}},o.pad.Iso10126})}(Fde)),yE}var CE={},jde={get exports(){return CE},set exports(e){CE=e}},z4;function Hde(){return z4||(z4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),Wi())})(At,function(o){return o.pad.Iso97971={pad:function(a,c){a.concat(o.lib.WordArray.create([2147483648],1)),o.pad.ZeroPadding.pad(a,c)},unpad:function(a){o.pad.ZeroPadding.unpad(a),a.sigBytes--}},o.pad.Iso97971})}(jde)),CE}var TE={},$de={get exports(){return TE},set exports(e){TE=e}},K4;function Wde(){return K4||(K4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),Wi())})(At,function(o){return o.pad.ZeroPadding={pad:function(a,c){var u=c*4;a.clamp(),a.sigBytes+=u-(a.sigBytes%u||u)},unpad:function(a){for(var c=a.words,u=a.sigBytes-1,u=a.sigBytes-1;u>=0;u--)if(c[u>>>2]>>>24-u%4*8&255){a.sigBytes=u+1;break}}},o.pad.ZeroPadding})}($de)),TE}var bE={},Gde={get exports(){return bE},set exports(e){bE=e}},Y4;function zde(){return Y4||(Y4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),Wi())})(At,function(o){return o.pad.NoPadding={pad:function(){},unpad:function(){}},o.pad.NoPadding})}(Gde)),bE}var RE={},Kde={get exports(){return RE},set exports(e){RE=e}},q4;function Yde(){return q4||(q4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),Wi())})(At,function(o){return function(a){var c=o,u=c.lib,d=u.CipherParams,f=c.enc,m=f.Hex,g=c.format;g.Hex={stringify:function(_){return _.ciphertext.toString(m)},parse:function(_){var S=m.parse(_);return d.create({ciphertext:S})}}}(),o.format.Hex})}(Kde)),RE}var IE={},qde={get exports(){return IE},set exports(e){IE=e}},X4;function Xde(){return X4||(X4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),zh(),Kh(),Gu(),Wi())})(At,function(o){return function(){var a=o,c=a.lib,u=c.BlockCipher,d=a.algo,f=[],m=[],g=[],_=[],S=[],C=[],O=[],I=[],A=[],L=[];(function(){for(var D=[],U=0;U<256;U++)U<128?D[U]=U<<1:D[U]=U<<1^283;for(var B=0,F=0,U=0;U<256;U++){var H=F^F<<1^F<<2^F<<3^F<<4;H=H>>>8^H&255^99,f[B]=H,m[H]=B;var K=D[B],te=D[K],Y=D[te],Q=D[H]*257^H*16843008;g[B]=Q<<24|Q>>>8,_[B]=Q<<16|Q>>>16,S[B]=Q<<8|Q>>>24,C[B]=Q;var Q=Y*16843009^te*65537^K*257^B*16843008;O[H]=Q<<24|Q>>>8,I[H]=Q<<16|Q>>>16,A[H]=Q<<8|Q>>>24,L[H]=Q,B?(B=K^D[D[D[Y^K]]],F^=D[D[F]]):B=F=1}})();var N=[0,1,2,4,8,16,32,64,128,27,54],P=d.AES=u.extend({_doReset:function(){var D;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var U=this._keyPriorReset=this._key,B=U.words,F=U.sigBytes/4,H=this._nRounds=F+6,K=(H+1)*4,te=this._keySchedule=[],Y=0;Y<K;Y++)Y<F?te[Y]=B[Y]:(D=te[Y-1],Y%F?F>6&&Y%F==4&&(D=f[D>>>24]<<24|f[D>>>16&255]<<16|f[D>>>8&255]<<8|f[D&255]):(D=D<<8|D>>>24,D=f[D>>>24]<<24|f[D>>>16&255]<<16|f[D>>>8&255]<<8|f[D&255],D^=N[Y/F|0]<<24),te[Y]=te[Y-F]^D);for(var Q=this._invKeySchedule=[],J=0;J<K;J++){var Y=K-J;if(J%4)var D=te[Y];else var D=te[Y-4];J<4||Y<=4?Q[J]=D:Q[J]=O[f[D>>>24]]^I[f[D>>>16&255]]^A[f[D>>>8&255]]^L[f[D&255]]}}},encryptBlock:function(D,U){this._doCryptBlock(D,U,this._keySchedule,g,_,S,C,f)},decryptBlock:function(D,U){var B=D[U+1];D[U+1]=D[U+3],D[U+3]=B,this._doCryptBlock(D,U,this._invKeySchedule,O,I,A,L,m);var B=D[U+1];D[U+1]=D[U+3],D[U+3]=B},_doCryptBlock:function(D,U,B,F,H,K,te,Y){for(var Q=this._nRounds,J=D[U]^B[0],q=D[U+1]^B[1],ee=D[U+2]^B[2],re=D[U+3]^B[3],le=4,me=1;me<Q;me++){var ue=F[J>>>24]^H[q>>>16&255]^K[ee>>>8&255]^te[re&255]^B[le++],ve=F[q>>>24]^H[ee>>>16&255]^K[re>>>8&255]^te[J&255]^B[le++],Ee=F[ee>>>24]^H[re>>>16&255]^K[J>>>8&255]^te[q&255]^B[le++],oe=F[re>>>24]^H[J>>>16&255]^K[q>>>8&255]^te[ee&255]^B[le++];J=ue,q=ve,ee=Ee,re=oe}var ue=(Y[J>>>24]<<24|Y[q>>>16&255]<<16|Y[ee>>>8&255]<<8|Y[re&255])^B[le++],ve=(Y[q>>>24]<<24|Y[ee>>>16&255]<<16|Y[re>>>8&255]<<8|Y[J&255])^B[le++],Ee=(Y[ee>>>24]<<24|Y[re>>>16&255]<<16|Y[J>>>8&255]<<8|Y[q&255])^B[le++],oe=(Y[re>>>24]<<24|Y[J>>>16&255]<<16|Y[q>>>8&255]<<8|Y[ee&255])^B[le++];D[U]=ue,D[U+1]=ve,D[U+2]=Ee,D[U+3]=oe},keySize:256/32});a.AES=u._createHelper(P)}(),o.AES})}(qde)),IE}var wE={},Jde={get exports(){return wE},set exports(e){wE=e}},J4;function Qde(){return J4||(J4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),zh(),Kh(),Gu(),Wi())})(At,function(o){return function(){var a=o,c=a.lib,u=c.WordArray,d=c.BlockCipher,f=a.algo,m=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],g=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],_=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],S=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],C=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],O=f.DES=d.extend({_doReset:function(){for(var N=this._key,P=N.words,D=[],U=0;U<56;U++){var B=m[U]-1;D[U]=P[B>>>5]>>>31-B%32&1}for(var F=this._subKeys=[],H=0;H<16;H++){for(var K=F[H]=[],te=_[H],U=0;U<24;U++)K[U/6|0]|=D[(g[U]-1+te)%28]<<31-U%6,K[4+(U/6|0)]|=D[28+(g[U+24]-1+te)%28]<<31-U%6;K[0]=K[0]<<1|K[0]>>>31;for(var U=1;U<7;U++)K[U]=K[U]>>>(U-1)*4+3;K[7]=K[7]<<5|K[7]>>>27}for(var Y=this._invSubKeys=[],U=0;U<16;U++)Y[U]=F[15-U]},encryptBlock:function(N,P){this._doCryptBlock(N,P,this._subKeys)},decryptBlock:function(N,P){this._doCryptBlock(N,P,this._invSubKeys)},_doCryptBlock:function(N,P,D){this._lBlock=N[P],this._rBlock=N[P+1],I.call(this,4,252645135),I.call(this,16,65535),A.call(this,2,858993459),A.call(this,8,16711935),I.call(this,1,1431655765);for(var U=0;U<16;U++){for(var B=D[U],F=this._lBlock,H=this._rBlock,K=0,te=0;te<8;te++)K|=S[te][((H^B[te])&C[te])>>>0];this._lBlock=H,this._rBlock=F^K}var Y=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Y,I.call(this,1,1431655765),A.call(this,8,16711935),A.call(this,2,858993459),I.call(this,16,65535),I.call(this,4,252645135),N[P]=this._lBlock,N[P+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function I(N,P){var D=(this._lBlock>>>N^this._rBlock)&P;this._rBlock^=D,this._lBlock^=D<<N}function A(N,P){var D=(this._rBlock>>>N^this._lBlock)&P;this._lBlock^=D,this._rBlock^=D<<N}a.DES=d._createHelper(O);var L=f.TripleDES=d.extend({_doReset:function(){var N=this._key,P=N.words;if(P.length!==2&&P.length!==4&&P.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var D=P.slice(0,2),U=P.length<4?P.slice(0,2):P.slice(2,4),B=P.length<6?P.slice(0,2):P.slice(4,6);this._des1=O.createEncryptor(u.create(D)),this._des2=O.createEncryptor(u.create(U)),this._des3=O.createEncryptor(u.create(B))},encryptBlock:function(N,P){this._des1.encryptBlock(N,P),this._des2.decryptBlock(N,P),this._des3.encryptBlock(N,P)},decryptBlock:function(N,P){this._des3.decryptBlock(N,P),this._des2.encryptBlock(N,P),this._des1.decryptBlock(N,P)},keySize:192/32,ivSize:64/32,blockSize:64/32});a.TripleDES=d._createHelper(L)}(),o.TripleDES})}(Jde)),wE}var OE={},Zde={get exports(){return OE},set exports(e){OE=e}},Q4;function ehe(){return Q4||(Q4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),zh(),Kh(),Gu(),Wi())})(At,function(o){return function(){var a=o,c=a.lib,u=c.StreamCipher,d=a.algo,f=d.RC4=u.extend({_doReset:function(){for(var _=this._key,S=_.words,C=_.sigBytes,O=this._S=[],I=0;I<256;I++)O[I]=I;for(var I=0,A=0;I<256;I++){var L=I%C,N=S[L>>>2]>>>24-L%4*8&255;A=(A+O[I]+N)%256;var P=O[I];O[I]=O[A],O[A]=P}this._i=this._j=0},_doProcessBlock:function(_,S){_[S]^=m.call(this)},keySize:256/32,ivSize:0});function m(){for(var _=this._S,S=this._i,C=this._j,O=0,I=0;I<4;I++){S=(S+1)%256,C=(C+_[S])%256;var A=_[S];_[S]=_[C],_[C]=A,O|=_[(_[S]+_[C])%256]<<24-I*8}return this._i=S,this._j=C,O}a.RC4=u._createHelper(f);var g=d.RC4Drop=f.extend({cfg:f.cfg.extend({drop:192}),_doReset:function(){f._doReset.call(this);for(var _=this.cfg.drop;_>0;_--)m.call(this)}});a.RC4Drop=u._createHelper(g)}(),o.RC4})}(Zde)),OE}var AE={},the={get exports(){return AE},set exports(e){AE=e}},Z4;function nhe(){return Z4||(Z4=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),zh(),Kh(),Gu(),Wi())})(At,function(o){return function(){var a=o,c=a.lib,u=c.StreamCipher,d=a.algo,f=[],m=[],g=[],_=d.Rabbit=u.extend({_doReset:function(){for(var C=this._key.words,O=this.cfg.iv,I=0;I<4;I++)C[I]=(C[I]<<8|C[I]>>>24)&16711935|(C[I]<<24|C[I]>>>8)&4278255360;var A=this._X=[C[0],C[3]<<16|C[2]>>>16,C[1],C[0]<<16|C[3]>>>16,C[2],C[1]<<16|C[0]>>>16,C[3],C[2]<<16|C[1]>>>16],L=this._C=[C[2]<<16|C[2]>>>16,C[0]&4294901760|C[1]&65535,C[3]<<16|C[3]>>>16,C[1]&4294901760|C[2]&65535,C[0]<<16|C[0]>>>16,C[2]&4294901760|C[3]&65535,C[1]<<16|C[1]>>>16,C[3]&4294901760|C[0]&65535];this._b=0;for(var I=0;I<4;I++)S.call(this);for(var I=0;I<8;I++)L[I]^=A[I+4&7];if(O){var N=O.words,P=N[0],D=N[1],U=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,B=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,F=U>>>16|B&4294901760,H=B<<16|U&65535;L[0]^=U,L[1]^=F,L[2]^=B,L[3]^=H,L[4]^=U,L[5]^=F,L[6]^=B,L[7]^=H;for(var I=0;I<4;I++)S.call(this)}},_doProcessBlock:function(C,O){var I=this._X;S.call(this),f[0]=I[0]^I[5]>>>16^I[3]<<16,f[1]=I[2]^I[7]>>>16^I[5]<<16,f[2]=I[4]^I[1]>>>16^I[7]<<16,f[3]=I[6]^I[3]>>>16^I[1]<<16;for(var A=0;A<4;A++)f[A]=(f[A]<<8|f[A]>>>24)&16711935|(f[A]<<24|f[A]>>>8)&4278255360,C[O+A]^=f[A]},blockSize:128/32,ivSize:64/32});function S(){for(var C=this._X,O=this._C,I=0;I<8;I++)m[I]=O[I];O[0]=O[0]+1295307597+this._b|0,O[1]=O[1]+3545052371+(O[0]>>>0<m[0]>>>0?1:0)|0,O[2]=O[2]+886263092+(O[1]>>>0<m[1]>>>0?1:0)|0,O[3]=O[3]+1295307597+(O[2]>>>0<m[2]>>>0?1:0)|0,O[4]=O[4]+3545052371+(O[3]>>>0<m[3]>>>0?1:0)|0,O[5]=O[5]+886263092+(O[4]>>>0<m[4]>>>0?1:0)|0,O[6]=O[6]+1295307597+(O[5]>>>0<m[5]>>>0?1:0)|0,O[7]=O[7]+3545052371+(O[6]>>>0<m[6]>>>0?1:0)|0,this._b=O[7]>>>0<m[7]>>>0?1:0;for(var I=0;I<8;I++){var A=C[I]+O[I],L=A&65535,N=A>>>16,P=((L*L>>>17)+L*N>>>15)+N*N,D=((A&4294901760)*A|0)+((A&65535)*A|0);g[I]=P^D}C[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,C[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,C[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,C[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,C[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,C[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,C[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,C[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}a.Rabbit=u._createHelper(_)}(),o.Rabbit})}(the)),AE}var NE={},rhe={get exports(){return NE},set exports(e){NE=e}},eF;function ihe(){return eF||(eF=1,function(e,t){(function(o,a,c){e.exports=a(Tn(),zh(),Kh(),Gu(),Wi())})(At,function(o){return function(){var a=o,c=a.lib,u=c.StreamCipher,d=a.algo,f=[],m=[],g=[],_=d.RabbitLegacy=u.extend({_doReset:function(){var C=this._key.words,O=this.cfg.iv,I=this._X=[C[0],C[3]<<16|C[2]>>>16,C[1],C[0]<<16|C[3]>>>16,C[2],C[1]<<16|C[0]>>>16,C[3],C[2]<<16|C[1]>>>16],A=this._C=[C[2]<<16|C[2]>>>16,C[0]&4294901760|C[1]&65535,C[3]<<16|C[3]>>>16,C[1]&4294901760|C[2]&65535,C[0]<<16|C[0]>>>16,C[2]&4294901760|C[3]&65535,C[1]<<16|C[1]>>>16,C[3]&4294901760|C[0]&65535];this._b=0;for(var L=0;L<4;L++)S.call(this);for(var L=0;L<8;L++)A[L]^=I[L+4&7];if(O){var N=O.words,P=N[0],D=N[1],U=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,B=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,F=U>>>16|B&4294901760,H=B<<16|U&65535;A[0]^=U,A[1]^=F,A[2]^=B,A[3]^=H,A[4]^=U,A[5]^=F,A[6]^=B,A[7]^=H;for(var L=0;L<4;L++)S.call(this)}},_doProcessBlock:function(C,O){var I=this._X;S.call(this),f[0]=I[0]^I[5]>>>16^I[3]<<16,f[1]=I[2]^I[7]>>>16^I[5]<<16,f[2]=I[4]^I[1]>>>16^I[7]<<16,f[3]=I[6]^I[3]>>>16^I[1]<<16;for(var A=0;A<4;A++)f[A]=(f[A]<<8|f[A]>>>24)&16711935|(f[A]<<24|f[A]>>>8)&4278255360,C[O+A]^=f[A]},blockSize:128/32,ivSize:64/32});function S(){for(var C=this._X,O=this._C,I=0;I<8;I++)m[I]=O[I];O[0]=O[0]+1295307597+this._b|0,O[1]=O[1]+3545052371+(O[0]>>>0<m[0]>>>0?1:0)|0,O[2]=O[2]+886263092+(O[1]>>>0<m[1]>>>0?1:0)|0,O[3]=O[3]+1295307597+(O[2]>>>0<m[2]>>>0?1:0)|0,O[4]=O[4]+3545052371+(O[3]>>>0<m[3]>>>0?1:0)|0,O[5]=O[5]+886263092+(O[4]>>>0<m[4]>>>0?1:0)|0,O[6]=O[6]+1295307597+(O[5]>>>0<m[5]>>>0?1:0)|0,O[7]=O[7]+3545052371+(O[6]>>>0<m[6]>>>0?1:0)|0,this._b=O[7]>>>0<m[7]>>>0?1:0;for(var I=0;I<8;I++){var A=C[I]+O[I],L=A&65535,N=A>>>16,P=((L*L>>>17)+L*N>>>15)+N*N,D=((A&4294901760)*A|0)+((A&65535)*A|0);g[I]=P^D}C[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,C[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,C[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,C[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,C[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,C[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,C[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,C[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}a.RabbitLegacy=u._createHelper(_)}(),o.RabbitLegacy})}(rhe)),NE}(function(e,t){(function(o,a,c){e.exports=a(Tn(),F_(),ide(),ade(),zh(),lde(),Kh(),C1(),L5(),fde(),M5(),vde(),_de(),yde(),T1(),bde(),Gu(),Wi(),Ode(),Nde(),xde(),kde(),Mde(),Vde(),Bde(),Hde(),Wde(),zde(),Yde(),Xde(),Qde(),ehe(),nhe(),ihe())})(At,function(o){return o})})(Xue);const tF=AI;let U5="U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==";{const e=tF.AES.decrypt("U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==","U2FsdGVkX1/fp5K6GAphzVxz");U5=JSON.parse(e.toString(tF.enc.Utf8))}const Ct={appId:U5,channel:{}.AGORA_CHANNEL||"test",token:{}.AGORA_TOKEN?{}.AGORA_TOKEN:null};function ohe(){return[{channel:{}.AGORA_CHANNEL_0||"test0",token:{}.AGORA_TOKEN_0},{channel:{}.AGORA_CHANNEL_1||"test1",token:{}.AGORA_TOKEN_1},{channel:{}.AGORA_CHANNEL_2||"test2",token:{}.AGORA_TOKEN_2},{channel:{}.AGORA_CHANNEL_3||"test3",token:{}.AGORA_TOKEN_3},{channel:{}.AGORA_CHANNEL_4||"test4",token:{}.AGORA_TOKEN_4},{channel:{}.AGORA_CHANNEL_5||"test5",token:{}.AGORA_TOKEN_5},{channel:{}.AGORA_CHANNEL_6||"test6",token:{}.AGORA_TOKEN_6},{channel:{}.AGORA_CHANNEL_7||"test7",token:{}.AGORA_TOKEN_7},{channel:{}.AGORA_CHANNEL_8||"test8",token:{}.AGORA_TOKEN_8},{channel:{}.AGORA_CHANNEL_9||"test9",token:{}.AGORA_TOKEN_9}]}const ms=e=>{v4(String(e));const t=Kue();return v4(),t},Bs=()=>"https://www.agora.io/en/wp-content/uploads/2022/10/3d-spatial-audio-icon.svg";function b1({micOn:e,cameraOn:t,renderAction:o,renderLocalUser:a,renderRemoteUsers:c}){const u=gs(),d=M_()||0,f=b.useMemo(()=>ms(d),[d]),m=b.useMemo(()=>Bs(),[]),g=$s(),_=g.filter(I=>I.hasAudio||I.hasVideo),S=e||t,{localMicrophoneTrack:C}=$h(e),{localCameraTrack:O}=Wh(t);return Hh([C,O]),Ye(oo,{children:[o?o():void 0,ce(y1,{published:_.length+(S?1:0),total:g.length+1}),Ye(ja,{children:[u&&(a?a():ce(ja.Item,{children:ce(S1,{audioTrack:C,cameraOn:t,cover:m,micOn:e,videoTrack:O,children:ce(Tc,{children:`${f}{${d}}`})})})),c?c():void 0]})]})}const Dg=({children:e,clientConfig:t={mode:"rtc",codec:"vp8"}})=>{const[o]=b.useState(()=>Ou.createClient(t));return ce(w5,{client:o,children:e})},Sa=({calling:e,micOn:t,cameraOn:o,setMic:a,setCamera:c,setCalling:u})=>ce(oo,{children:Ye("div",{className:"inset-0 top-a flex justify-center items-center gap-3 px-6 py-3 bg-#21242c c-coolgray-3",children:[Ye("div",{className:"flex-1 flex top-0 left-0 h-full items-center gap-3 px-6 py-3",children:[a&&ce("button",{className:"btn",onClick:()=>a(),children:t?ce(mue,{}):ce(gue,{})}),c&&ce("button",{className:"btn",onClick:()=>c(),children:o?ce(vue,{}):ce(Eue,{})})]}),u&&ce("button",{className:h1("btn btn-phone",{"btn-phone-active":e}),onClick:()=>u(),children:e?ce("i",{className:"i-mdi-phone-hangup"}):ce("i",{className:"i-mdi-phone"})})]})}),nF=e=>{let t;const o=new Set,a=(m,g)=>{const _=typeof m=="function"?m(t):m;if(!Object.is(_,t)){const S=t;t=g??typeof _!="object"?_:Object.assign({},t,_),o.forEach(C=>C(t,S))}},c=()=>t,f={setState:a,getState:c,subscribe:m=>(o.add(m),()=>o.delete(m)),destroy:()=>{({AGORA_AES_SALT:"U2FsdGVkX1/fp5K6GAphzVxz",AGORA_APPID:"U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}};return t=e(a,c,f),f},ahe=e=>e?nF(e):nF;var NI={},she={get exports(){return NI},set exports(e){NI=e}},V5={},PI={},che={get exports(){return PI},set exports(e){PI=e}},F5={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xh=b;function lhe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var uhe=typeof Object.is=="function"?Object.is:lhe,dhe=xh.useState,hhe=xh.useEffect,phe=xh.useLayoutEffect,fhe=xh.useDebugValue;function mhe(e,t){var o=t(),a=dhe({inst:{value:o,getSnapshot:t}}),c=a[0].inst,u=a[1];return phe(function(){c.value=o,c.getSnapshot=t,fb(c)&&u({inst:c})},[e,o,t]),hhe(function(){return fb(c)&&u({inst:c}),e(function(){fb(c)&&u({inst:c})})},[e]),fhe(o),o}function fb(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!uhe(e,o)}catch{return!0}}function ghe(e,t){return t()}var vhe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ghe:mhe;F5.useSyncExternalStore=xh.useSyncExternalStore!==void 0?xh.useSyncExternalStore:vhe;(function(e){e.exports=F5})(che);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_=b,Ehe=PI;function _he(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var She=typeof Object.is=="function"?Object.is:_he,yhe=Ehe.useSyncExternalStore,Che=B_.useRef,The=B_.useEffect,bhe=B_.useMemo,Rhe=B_.useDebugValue;V5.useSyncExternalStoreWithSelector=function(e,t,o,a,c){var u=Che(null);if(u.current===null){var d={hasValue:!1,value:null};u.current=d}else d=u.current;u=bhe(function(){function m(O){if(!g){if(g=!0,_=O,O=a(O),c!==void 0&&d.hasValue){var I=d.value;if(c(I,O))return S=I}return S=O}if(I=S,She(_,O))return I;var A=a(O);return c!==void 0&&c(I,A)?I:(_=O,S=A)}var g=!1,_,S,C=o===void 0?null:o;return[function(){return m(t())},C===null?void 0:function(){return m(C())}]},[t,o,a,c]);var f=yhe(e,u[0],u[1]);return The(function(){d.hasValue=!0,d.value=f},[f]),Rhe(f),f};(function(e){e.exports=V5})(she);const Ihe=LE(NI),{useSyncExternalStoreWithSelector:whe}=Ihe;function Ohe(e,t=e.getState,o){const a=whe(e.subscribe,e.getState,e.getServerState||e.getState,t,o);return b.useDebugValue(a),a}const rF=e=>{({AGORA_AES_SALT:"U2FsdGVkX1/fp5K6GAphzVxz",AGORA_APPID:"U2FsdGVkX1/nIO3//tPu/+LNS4S4tsxT3MzmKKuvXDxFFYxlol+eYrZkKcLoUBHMNoDedcuF62hF/qfPSSy59Q==",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?ahe(e):e,o=(a,c)=>Ohe(t,a,c);return Object.assign(o,t),o},Ahe=e=>e?rF(e):rF,Nhe=Ct.appId,Phe=ohe(),Ef=Ahe((e,t)=>({getRooms:()=>{let{rooms:o}=t();o=Phe.map(({token:a,channel:c})=>{const u=Ou.createClient({mode:"live",codec:"vp8"});return u.join(Nhe,c,a||null,null),{channel:c,token:a,client:u}}),e({rooms:o})},selectChannel:async o=>{let{hostRoom:a,localTracks:c}=t();const{rooms:u}=t();if(!o){a&&(c&&a.client.localTracks.length>0&&await a.client.unpublish(c),a.client.setClientRole("audience"),a=null,e({hostRoom:a,localTracks:c}));return}if(a){if(a.client.channelName===o)return;c&&await a.client.unpublish(c),await a.client.setClientRole("audience")}a=u==null?void 0:u.find(d=>d.client.channelName===o),a&&(await a.client.setClientRole("host"),c||(c=await Ou.createMicrophoneAndCameraTracks()),await a.client.publish(c)),e({localTracks:c,hostRoom:a})},dispose:()=>{const{rooms:o,hostRoom:a}=t();if(a==null||a.client.leave(),o)for(const c of o)c.client.leave()}}));var xhe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Dhe(e){var t=e.defaultInputValue,o=t===void 0?"":t,a=e.defaultMenuIsOpen,c=a===void 0?!1:a,u=e.defaultValue,d=u===void 0?null:u,f=e.inputValue,m=e.menuIsOpen,g=e.onChange,_=e.onInputChange,S=e.onMenuClose,C=e.onMenuOpen,O=e.value,I=Sn(e,xhe),A=b.useState(f!==void 0?f:o),L=xe(A,2),N=L[0],P=L[1],D=b.useState(m!==void 0?m:c),U=xe(D,2),B=U[0],F=U[1],H=b.useState(O!==void 0?O:d),K=xe(H,2),te=K[0],Y=K[1],Q=b.useCallback(function(ue,ve){typeof g=="function"&&g(ue,ve),Y(ue)},[g]),J=b.useCallback(function(ue,ve){var Ee;typeof _=="function"&&(Ee=_(ue,ve)),P(Ee!==void 0?Ee:ue)},[_]),q=b.useCallback(function(){typeof C=="function"&&C(),F(!0)},[C]),ee=b.useCallback(function(){typeof S=="function"&&S(),F(!1)},[S]),re=f!==void 0?f:N,le=m!==void 0?m:B,me=O!==void 0?O:te;return de(de({},I),{},{inputValue:re,menuIsOpen:le,onChange:Q,onInputChange:J,onMenuClose:ee,onMenuOpen:q,value:me})}function khe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Lhe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Mhe=function(){function e(o){var a=this;this._insertTag=function(c){var u;a.tags.length===0?a.insertionPoint?u=a.insertionPoint.nextSibling:a.prepend?u=a.container.firstChild:u=a.before:u=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(c,u),a.tags.push(c)},this.isSpeedy=o.speedy===void 0?!0:o.speedy,this.tags=[],this.ctr=0,this.nonce=o.nonce,this.key=o.key,this.container=o.container,this.prepend=o.prepend,this.insertionPoint=o.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Lhe(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var u=khe(c);try{u.insertRule(a,u.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){return a.parentNode&&a.parentNode.removeChild(a)}),this.tags=[],this.ctr=0},e}();function Uhe(e){var t=Object.create(null);return function(o){return t[o]===void 0&&(t[o]=e(o)),t[o]}}var Vhe=function(t,o,a){for(var c=0,u=0;c=u,u=Fs(),c===38&&u===12&&(o[a]=1),!jf(u);)da();return Qf(t,$o)},Fhe=function(t,o){var a=-1,c=44;do switch(jf(c)){case 0:c===38&&Fs()===12&&(o[a]=1),t[a]+=Vhe($o-1,o,a);break;case 2:t[a]+=Zg(c);break;case 4:if(c===44){t[++a]=Fs()===58?"&\f":"",o[a]=t[a].length;break}default:t[a]+=g_(c)}while(c=da());return t},Bhe=function(t,o){return vj(Fhe(gj(t),o))},iF=new WeakMap,jhe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var o=t.value,a=t.parent,c=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&o.charCodeAt(0)!==58&&!iF.get(a))&&!c){iF.set(t,!0);for(var u=[],d=Bhe(o,u),f=a.props,m=0,g=0;m<d.length;m++)for(var _=0;_<f.length;_++,g++)t.props[g]=u[m]?d[m].replace(/&\f/g,f[_]):f[_]+" "+d[m]}}},Hhe=function(t){if(t.type==="decl"){var o=t.value;o.charCodeAt(0)===108&&o.charCodeAt(2)===98&&(t.return="",t.value="")}};function B5(e,t){switch(Dee(e,t)){case 5103:return kn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return kn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return kn+e+Fv+e+no+e+e;case 6828:case 4268:return kn+e+no+e+e;case 6165:return kn+e+no+"flex-"+e+e;case 5187:return kn+e+Hn(e,/(\w+).+(:[^]+)/,kn+"box-$1$2"+no+"flex-$1$2")+e;case 5443:return kn+e+no+"flex-item-"+Hn(e,/flex-|-self/,"")+e;case 4675:return kn+e+no+"flex-line-pack"+Hn(e,/align-content|flex-|-self/,"")+e;case 5548:return kn+e+no+Hn(e,"shrink","negative")+e;case 5292:return kn+e+no+Hn(e,"basis","preferred-size")+e;case 6060:return kn+"box-"+Hn(e,"-grow","")+kn+e+no+Hn(e,"grow","positive")+e;case 4554:return kn+Hn(e,/([^-])(transform)/g,"$1"+kn+"$2")+e;case 6187:return Hn(Hn(Hn(e,/(zoom-|grab)/,kn+"$1"),/(image-set)/,kn+"$1"),e,"")+e;case 5495:case 3959:return Hn(e,/(image-set\([^]*)/,kn+"$1$`$1");case 4968:return Hn(Hn(e,/(.+:)(flex-)?(.*)/,kn+"box-pack:$3"+no+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+kn+e+e;case 4095:case 3583:case 4068:case 2532:return Hn(e,/(.+)-inline(.+)/,kn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xs(e)-1-t>6)switch(Vi(e,t+1)){case 109:if(Vi(e,t+4)!==45)break;case 102:return Hn(e,/(.+:)(.+)-([^]+)/,"$1"+kn+"$2-$3$1"+Fv+(Vi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~xR(e,"stretch")?B5(Hn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Vi(e,t+1)!==115)break;case 6444:switch(Vi(e,xs(e)-3-(~xR(e,"!important")&&10))){case 107:return Hn(e,":",":"+kn)+e;case 101:return Hn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+kn+(Vi(e,14)===45?"inline-":"")+"box$3$1"+kn+"$2$3$1"+no+"$2box$3")+e}break;case 5936:switch(Vi(e,t+11)){case 114:return kn+e+no+Hn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return kn+e+no+Hn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return kn+e+no+Hn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return kn+e+no+e+e}return e}var $he=function(t,o,a,c){if(t.length>-1&&!t.return)switch(t.type){case Vw:t.return=B5(t.value,t.length);break;case pj:return Iu([Vp(t,{value:Hn(t.value,"@","@"+kn)})],c);case Uw:if(t.length)return Lee(t.props,function(u){switch(kee(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Iu([Vp(t,{props:[Hn(u,/:(read-\w+)/,":"+Fv+"$1")]})],c);case"::placeholder":return Iu([Vp(t,{props:[Hn(u,/:(plac\w+)/,":"+kn+"input-$1")]}),Vp(t,{props:[Hn(u,/:(plac\w+)/,":"+Fv+"$1")]}),Vp(t,{props:[Hn(u,/:(plac\w+)/,no+"input-$1")]})],c)}return""})}},Whe=[$he],Ghe=function(t){var o=t.key;if(o==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(A){var L=A.getAttribute("data-emotion");L.indexOf(" ")!==-1&&(document.head.appendChild(A),A.setAttribute("data-s",""))})}var c=t.stylisPlugins||Whe,u={},d,f=[];d=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+o+' "]'),function(A){for(var L=A.getAttribute("data-emotion").split(" "),N=1;N<L.length;N++)u[L[N]]=!0;f.push(A)});var m,g=[jhe,Hhe];{var _,S=[_j,Wee(function(A){_.insert(A)})],C=$ee(g.concat(c,S)),O=function(L){return Iu(Ej(L),C)};m=function(L,N,P,D){_=P,O(L?L+"{"+N.styles+"}":N.styles),D&&(I.inserted[N.name]=!0)}}var I={key:o,sheet:new Mhe({key:o,container:d,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:u,registered:{},insert:m};return I.sheet.hydrate(f),I},j5=Ff,zhe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Khe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},H5={};H5[j5.ForwardRef]=zhe;H5[j5.Memo]=Khe;var Yhe=!0;function qhe(e,t,o){var a="";return o.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):a+=c+" "}),a}var $5=function(t,o,a){var c=t.key+"-"+o.name;(a===!1||Yhe===!1)&&t.registered[c]===void 0&&(t.registered[c]=o.styles)},Xhe=function(t,o,a){$5(t,o,a);var c=t.key+"-"+o.name;if(t.inserted[o.name]===void 0){var u=o;do t.insert(o===u?"."+c:"",u,t.sheet,!0),u=u.next;while(u!==void 0)}};function Jhe(e){for(var t=0,o,a=0,c=e.length;c>=4;++a,c-=4)o=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,t=(o&65535)*1540483477+((o>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Qhe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Zhe=/[A-Z]|^ms/g,epe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,W5=function(t){return t.charCodeAt(1)===45},oF=function(t){return t!=null&&typeof t!="boolean"},mb=Uhe(function(e){return W5(e)?e:e.replace(Zhe,"-$&").toLowerCase()}),aF=function(t,o){switch(t){case"animation":case"animationName":if(typeof o=="string")return o.replace(epe,function(a,c,u){return Ds={name:c,styles:u,next:Ds},c})}return Qhe[t]!==1&&!W5(t)&&typeof o=="number"&&o!==0?o+"px":o};function zf(e,t,o){if(o==null)return"";if(o.__emotion_styles!==void 0)return o;switch(typeof o){case"boolean":return"";case"object":{if(o.anim===1)return Ds={name:o.name,styles:o.styles,next:Ds},o.name;if(o.styles!==void 0){var a=o.next;if(a!==void 0)for(;a!==void 0;)Ds={name:a.name,styles:a.styles,next:Ds},a=a.next;var c=o.styles+";";return c}return tpe(e,t,o)}case"function":{if(e!==void 0){var u=Ds,d=o(e);return Ds=u,zf(e,t,d)}break}}if(t==null)return o;var f=t[o];return f!==void 0?f:o}function tpe(e,t,o){var a="";if(Array.isArray(o))for(var c=0;c<o.length;c++)a+=zf(e,t,o[c])+";";else for(var u in o){var d=o[u];if(typeof d!="object")t!=null&&t[d]!==void 0?a+=u+"{"+t[d]+"}":oF(d)&&(a+=mb(u)+":"+aF(u,d)+";");else if(Array.isArray(d)&&typeof d[0]=="string"&&(t==null||t[d[0]]===void 0))for(var f=0;f<d.length;f++)oF(d[f])&&(a+=mb(u)+":"+aF(u,d[f])+";");else{var m=zf(e,t,d);switch(u){case"animation":case"animationName":{a+=mb(u)+":"+m+";";break}default:a+=u+"{"+m+"}"}}}return a}var sF=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ds,G5=function(t,o,a){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var c=!0,u="";Ds=void 0;var d=t[0];d==null||d.raw===void 0?(c=!1,u+=zf(a,o,d)):u+=d[0];for(var f=1;f<t.length;f++)u+=zf(a,o,t[f]),c&&(u+=d[f]);sF.lastIndex=0;for(var m="",g;(g=sF.exec(u))!==null;)m+="-"+g[1];var _=Jhe(u)+m;return{name:_,styles:u,next:Ds}},npe=function(t){return t()},rpe=av["useInsertionEffect"]?av["useInsertionEffect"]:!1,ipe=rpe||npe,R1={}.hasOwnProperty,z5=b.createContext(typeof HTMLElement<"u"?Ghe({key:"css"}):null);z5.Provider;var ope=function(t){return b.forwardRef(function(o,a){var c=b.useContext(z5);return t(o,c,a)})},ape=b.createContext({}),xI="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",spe=function(t,o){var a={};for(var c in o)R1.call(o,c)&&(a[c]=o[c]);return a[xI]=t,a},cpe=function(t){var o=t.cache,a=t.serialized,c=t.isStringTag;return $5(o,a,c),ipe(function(){return Xhe(o,a,c)}),null},lpe=ope(function(e,t,o){var a=e.css;typeof a=="string"&&t.registered[a]!==void 0&&(a=t.registered[a]);var c=e[xI],u=[a],d="";typeof e.className=="string"?d=qhe(t.registered,u,e.className):e.className!=null&&(d=e.className+" ");var f=G5(u,void 0,b.useContext(ape));d+=t.key+"-"+f.name;var m={};for(var g in e)R1.call(e,g)&&g!=="css"&&g!==xI&&(m[g]=e[g]);return m.ref=o,m.className=d,b.createElement(b.Fragment,null,b.createElement(cpe,{cache:t,serialized:f,isStringTag:typeof c=="string"}),b.createElement(c,m))}),Tt=function(t,o){var a=arguments;if(o==null||!R1.call(o,"css"))return b.createElement.apply(void 0,a);var c=a.length,u=new Array(c);u[0]=lpe,u[1]=spe(t,o);for(var d=2;d<c;d++)u[d]=a[d];return b.createElement.apply(null,u)};function I1(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return G5(t)}var upe=function(){var t=I1.apply(void 0,arguments),o="animation-"+t.name;return{name:o,styles:"@keyframes "+o+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function dpe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function hpe(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}const ppe=["top","right","bottom","left"];ppe.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);function Ms(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function K5(e){return Ms(e).getComputedStyle(e)}function Y5(e){return e instanceof Ms(e).Node}function q5(e){return Y5(e)?(e.nodeName||"").toLowerCase():""}let kg;function fpe(){if(kg)return kg;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(kg=e.brands.map(t=>t.brand+"/"+t.version).join(" "),kg):navigator.userAgent}function w1(e){return e instanceof Ms(e).HTMLElement}function _h(e){return e instanceof Ms(e).Element}function cF(e){return typeof ShadowRoot>"u"?!1:e instanceof Ms(e).ShadowRoot||e instanceof ShadowRoot}function X5(e){const{overflow:t,overflowX:o,overflowY:a,display:c}=K5(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+o)&&!["inline","contents"].includes(c)}function mpe(){return/^((?!chrome|android).)*safari/i.test(fpe())}function gpe(e){return["html","body","#document"].includes(q5(e))}const PE=Math.round;function vpe(e){const t=K5(e);let o=parseFloat(t.width),a=parseFloat(t.height);const c=w1(e),u=c?e.offsetWidth:o,d=c?e.offsetHeight:a,f=PE(o)!==u||PE(a)!==d;return f&&(o=u,a=d),{width:o,height:a,fallback:f}}function J5(e){return _h(e)?e:e.contextElement}const Q5={x:1,y:1};function gb(e){const t=J5(e);if(!w1(t))return Q5;const o=t.getBoundingClientRect(),{width:a,height:c,fallback:u}=vpe(t);let d=(u?PE(o.width):o.width)/a,f=(u?PE(o.height):o.height)/c;return d&&Number.isFinite(d)||(d=1),f&&Number.isFinite(f)||(f=1),{x:d,y:f}}function lF(e,t,o,a){var c,u;t===void 0&&(t=!1),o===void 0&&(o=!1);const d=e.getBoundingClientRect(),f=J5(e);let m=Q5;t&&(a?_h(a)&&(m=gb(a)):m=gb(e));const g=f?Ms(f):window,_=mpe()&&o;let S=(d.left+(_&&((c=g.visualViewport)==null?void 0:c.offsetLeft)||0))/m.x,C=(d.top+(_&&((u=g.visualViewport)==null?void 0:u.offsetTop)||0))/m.y,O=d.width/m.x,I=d.height/m.y;if(f){const A=Ms(f),L=a&&_h(a)?Ms(a):a;let N=A.frameElement;for(;N&&a&&L!==A;){const P=gb(N),D=N.getBoundingClientRect(),U=getComputedStyle(N);D.x+=(N.clientLeft+parseFloat(U.paddingLeft))*P.x,D.y+=(N.clientTop+parseFloat(U.paddingTop))*P.y,S*=P.x,C*=P.y,O*=P.x,I*=P.y,S+=D.x,C+=D.y,N=Ms(N).frameElement}}return hpe({width:O,height:I,x:S,y:C})}function Epe(e){return((Y5(e)?e.ownerDocument:e.document)||window.document).documentElement}function _pe(e){if(q5(e)==="html")return e;const t=e.assignedSlot||e.parentNode||cF(e)&&e.host||Epe(e);return cF(t)?t.host:t}function Z5(e){const t=_pe(e);return gpe(t)?t.ownerDocument.body:w1(t)&&X5(t)?t:Z5(t)}function ov(e,t){var o;t===void 0&&(t=[]);const a=Z5(e),c=a===((o=e.ownerDocument)==null?void 0:o.body),u=Ms(a);return c?t.concat(u,u.visualViewport||[],X5(a)?a:[]):t.concat(a,ov(a))}function Spe(e,t,o,a){a===void 0&&(a={});const{ancestorScroll:c=!0,ancestorResize:u=!0,elementResize:d=!0,animationFrame:f=!1}=a,m=c&&!f,g=m||u?[..._h(e)?ov(e):e.contextElement?ov(e.contextElement):[],...ov(t)]:[];g.forEach(O=>{m&&O.addEventListener("scroll",o,{passive:!0}),u&&O.addEventListener("resize",o)});let _,S=null;d&&(S=new ResizeObserver(()=>{o()}),_h(e)&&!f&&S.observe(e),_h(e)||!e.contextElement||f||S.observe(e.contextElement),S.observe(t));let C=f?lF(e):null;return f&&function O(){const I=lF(e);!C||I.x===C.x&&I.y===C.y&&I.width===C.width&&I.height===C.height||o(),C=I,_=requestAnimationFrame(O)}(),o(),()=>{var O;g.forEach(I=>{m&&I.removeEventListener("scroll",o),u&&I.removeEventListener("resize",o)}),(O=S)==null||O.disconnect(),S=null,f&&cancelAnimationFrame(_)}}var DI=b.useLayoutEffect,ype=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],xE=function(){};function Cpe(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function Tpe(e,t){for(var o=arguments.length,a=new Array(o>2?o-2:0),c=2;c<o;c++)a[c-2]=arguments[c];var u=[].concat(a);if(t&&e)for(var d in t)t.hasOwnProperty(d)&&t[d]&&u.push("".concat(Cpe(e,d)));return u.filter(function(f){return f}).map(function(f){return String(f).trim()}).join(" ")}var uF=function(t){return xpe(t)?t.filter(Boolean):Nn(t)==="object"&&t!==null?[t]:[]},e6=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var o=Sn(t,ype);return de({},o)},Lr=function(t,o,a){var c=t.cx,u=t.getStyles,d=t.getClassNames,f=t.className;return{css:u(o,t),className:c(a??{},d(o,t),f)}};function j_(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function bpe(e){return j_(e)?window.innerHeight:e.clientHeight}function t6(e){return j_(e)?window.pageYOffset:e.scrollTop}function DE(e,t){if(j_(e)){window.scrollTo(0,t);return}e.scrollTop=t}function Rpe(e){var t=getComputedStyle(e),o=t.position==="absolute",a=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var c=e;c=c.parentElement;)if(t=getComputedStyle(c),!(o&&t.position==="static")&&a.test(t.overflow+t.overflowY+t.overflowX))return c;return document.documentElement}function Ipe(e,t,o,a){return o*((e=e/a-1)*e*e+1)+t}function Lg(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:xE,c=t6(e),u=t-c,d=10,f=0;function m(){f+=d;var g=Ipe(f,c,u,o);DE(e,g),f<o?window.requestAnimationFrame(m):a(e)}m()}function dF(e,t){var o=e.getBoundingClientRect(),a=t.getBoundingClientRect(),c=t.offsetHeight/3;a.bottom+c>o.bottom?DE(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+c,e.scrollHeight)):a.top-c<o.top&&DE(e,Math.max(t.offsetTop-c,0))}function wpe(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function hF(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Ope(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var n6=!1,Ape={get passive(){return n6=!0}},Mg=typeof window<"u"?window:{};Mg.addEventListener&&Mg.removeEventListener&&(Mg.addEventListener("p",xE,Ape),Mg.removeEventListener("p",xE,!1));var Npe=n6;function Ppe(e){return e!=null}function xpe(e){return Array.isArray(e)}function Ug(e,t,o){return e?t:o}var Dpe=function(t){for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];var u=Object.entries(t).filter(function(d){var f=xe(d,1),m=f[0];return!a.includes(m)});return u.reduce(function(d,f){var m=xe(f,2),g=m[0],_=m[1];return d[g]=_,d},{})};function kpe(e){var t=e.maxHeight,o=e.menuEl,a=e.minHeight,c=e.placement,u=e.shouldScroll,d=e.isFixedPosition,f=e.controlHeight,m=Rpe(o),g={placement:"bottom",maxHeight:t};if(!o||!o.offsetParent)return g;var _=m.getBoundingClientRect(),S=_.height,C=o.getBoundingClientRect(),O=C.bottom,I=C.height,A=C.top,L=o.offsetParent.getBoundingClientRect(),N=L.top,P=d?window.innerHeight:bpe(m),D=t6(m),U=parseInt(getComputedStyle(o).marginBottom,10),B=parseInt(getComputedStyle(o).marginTop,10),F=N-B,H=P-A,K=F+D,te=S-D-A,Y=O-P+D+U,Q=D+A-B,J=160;switch(c){case"auto":case"bottom":if(H>=I)return{placement:"bottom",maxHeight:t};if(te>=I&&!d)return u&&Lg(m,Y,J),{placement:"bottom",maxHeight:t};if(!d&&te>=a||d&&H>=a){u&&Lg(m,Y,J);var q=d?H-U:te-U;return{placement:"bottom",maxHeight:q}}if(c==="auto"||d){var ee=t,re=d?F:K;return re>=a&&(ee=Math.min(re-U-f,t)),{placement:"top",maxHeight:ee}}if(c==="bottom")return u&&DE(m,Y),{placement:"bottom",maxHeight:t};break;case"top":if(F>=I)return{placement:"top",maxHeight:t};if(K>=I&&!d)return u&&Lg(m,Q,J),{placement:"top",maxHeight:t};if(!d&&K>=a||d&&F>=a){var le=t;return(!d&&K>=a||d&&F>=a)&&(le=d?F-B:K-B),u&&Lg(m,Q,J),{placement:"top",maxHeight:le}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(c,'".'))}return g}function Lpe(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var r6=function(t){return t==="auto"?"bottom":t},Mpe=function(t,o){var a,c=t.placement,u=t.theme,d=u.borderRadius,f=u.spacing,m=u.colors;return de((a={label:"menu"},Ne(a,Lpe(c),"100%"),Ne(a,"position","absolute"),Ne(a,"width","100%"),Ne(a,"zIndex",1),a),o?{}:{backgroundColor:m.neutral0,borderRadius:d,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:f.menuGutter,marginTop:f.menuGutter})},i6=b.createContext(null),Upe=function(t){var o=t.children,a=t.minMenuHeight,c=t.maxMenuHeight,u=t.menuPlacement,d=t.menuPosition,f=t.menuShouldScrollIntoView,m=t.theme,g=b.useContext(i6)||{},_=g.setPortalPlacement,S=b.useRef(null),C=b.useState(c),O=xe(C,2),I=O[0],A=O[1],L=b.useState(null),N=xe(L,2),P=N[0],D=N[1],U=m.spacing.controlHeight;return DI(function(){var B=S.current;if(B){var F=d==="fixed",H=f&&!F,K=kpe({maxHeight:c,menuEl:B,minHeight:a,placement:u,shouldScroll:H,isFixedPosition:F,controlHeight:U});A(K.maxHeight),D(K.placement),_==null||_(K.placement)}},[c,u,d,f,a,_,U]),o({ref:S,placerProps:de(de({},t),{},{placement:P||r6(u),maxHeight:I})})},Vpe=function(t){var o=t.children,a=t.innerRef,c=t.innerProps;return Tt("div",Be({},Lr(t,"menu",{menu:!0}),{ref:a},c),o)},Fpe=function(t,o){var a=t.maxHeight,c=t.theme.spacing.baseUnit;return de({maxHeight:a,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},o?{}:{paddingBottom:c,paddingTop:c})},Bpe=function(t){var o=t.children,a=t.innerProps,c=t.innerRef,u=t.isMulti;return Tt("div",Be({},Lr(t,"menuList",{"menu-list":!0,"menu-list--is-multi":u}),{ref:c},a),o)},o6=function(t,o){var a=t.theme,c=a.spacing.baseUnit,u=a.colors;return de({textAlign:"center"},o?{}:{color:u.neutral40,padding:"".concat(c*2,"px ").concat(c*3,"px")})},jpe=o6,Hpe=o6,a6=function(t){var o=t.children,a=t.innerProps;return Tt("div",Be({},Lr(t,"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),o)};a6.defaultProps={children:"No options"};var s6=function(t){var o=t.children,a=t.innerProps;return Tt("div",Be({},Lr(t,"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),o)};s6.defaultProps={children:"Loading..."};var $pe=function(t){var o=t.rect,a=t.offset,c=t.position;return{left:o.left,position:c,top:a,width:o.width,zIndex:1}},Wpe=function(t){var o=t.appendTo,a=t.children,c=t.controlElement,u=t.innerProps,d=t.menuPlacement,f=t.menuPosition,m=b.useRef(null),g=b.useRef(null),_=b.useState(r6(d)),S=xe(_,2),C=S[0],O=S[1],I=b.useMemo(function(){return{setPortalPlacement:O}},[]),A=b.useState(null),L=xe(A,2),N=L[0],P=L[1],D=b.useCallback(function(){if(c){var H=wpe(c),K=f==="fixed"?0:window.pageYOffset,te=H[C]+K;(te!==(N==null?void 0:N.offset)||H.left!==(N==null?void 0:N.rect.left)||H.width!==(N==null?void 0:N.rect.width))&&P({offset:te,rect:H})}},[c,f,C,N==null?void 0:N.offset,N==null?void 0:N.rect.left,N==null?void 0:N.rect.width]);DI(function(){D()},[D]);var U=b.useCallback(function(){typeof g.current=="function"&&(g.current(),g.current=null),c&&m.current&&(g.current=Spe(c,m.current,D,{elementResize:"ResizeObserver"in window}))},[c,D]);DI(function(){U()},[U]);var B=b.useCallback(function(H){m.current=H,U()},[U]);if(!o&&f!=="fixed"||!N)return null;var F=Tt("div",Be({ref:B},Lr(de(de({},t),{},{offset:N.offset,position:f,rect:N.rect}),"menuPortal",{"menu-portal":!0}),u),a);return Tt(i6.Provider,{value:I},o?gc.createPortal(F,o):F)},Gpe=function(t){var o=t.isDisabled,a=t.isRtl;return{label:"container",direction:a?"rtl":void 0,pointerEvents:o?"none":void 0,position:"relative"}},zpe=function(t){var o=t.children,a=t.innerProps,c=t.isDisabled,u=t.isRtl;return Tt("div",Be({},Lr(t,"container",{"--is-disabled":c,"--is-rtl":u}),a),o)},Kpe=function(t,o){var a=t.theme.spacing,c=t.isMulti,u=t.hasValue,d=t.selectProps.controlShouldRenderValue;return de({alignItems:"center",display:c&&u&&d?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},o?{}:{padding:"".concat(a.baseUnit/2,"px ").concat(a.baseUnit*2,"px")})},Ype=function(t){var o=t.children,a=t.innerProps,c=t.isMulti,u=t.hasValue;return Tt("div",Be({},Lr(t,"valueContainer",{"value-container":!0,"value-container--is-multi":c,"value-container--has-value":u}),a),o)},qpe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Xpe=function(t){var o=t.children,a=t.innerProps;return Tt("div",Be({},Lr(t,"indicatorsContainer",{indicators:!0}),a),o)},pF,Jpe=["size"],Qpe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},c6=function(t){var o=t.size,a=Sn(t,Jpe);return Tt("svg",Be({height:o,width:o,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Qpe},a))},O1=function(t){return Tt(c6,Be({size:20},t),Tt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},l6=function(t){return Tt(c6,Be({size:20},t),Tt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},u6=function(t,o){var a=t.isFocused,c=t.theme,u=c.spacing.baseUnit,d=c.colors;return de({label:"indicatorContainer",display:"flex",transition:"color 150ms"},o?{}:{color:a?d.neutral60:d.neutral20,padding:u*2,":hover":{color:a?d.neutral80:d.neutral40}})},Zpe=u6,efe=function(t){var o=t.children,a=t.innerProps;return Tt("div",Be({},Lr(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),a),o||Tt(l6,null))},tfe=u6,nfe=function(t){var o=t.children,a=t.innerProps;return Tt("div",Be({},Lr(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),a),o||Tt(O1,null))},rfe=function(t,o){var a=t.isDisabled,c=t.theme,u=c.spacing.baseUnit,d=c.colors;return de({label:"indicatorSeparator",alignSelf:"stretch",width:1},o?{}:{backgroundColor:a?d.neutral10:d.neutral20,marginBottom:u*2,marginTop:u*2})},ife=function(t){var o=t.innerProps;return Tt("span",Be({},o,Lr(t,"indicatorSeparator",{"indicator-separator":!0})))},ofe=upe(pF||(pF=dpe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),afe=function(t,o){var a=t.isFocused,c=t.size,u=t.theme,d=u.colors,f=u.spacing.baseUnit;return de({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:c,lineHeight:1,marginRight:c,textAlign:"center",verticalAlign:"middle"},o?{}:{color:a?d.neutral60:d.neutral20,padding:f*2})},vb=function(t){var o=t.delay,a=t.offset;return Tt("span",{css:I1({animation:"".concat(ofe," 1s ease-in-out ").concat(o,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:a?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},d6=function(t){var o=t.innerProps,a=t.isRtl;return Tt("div",Be({},Lr(t,"loadingIndicator",{indicator:!0,"loading-indicator":!0}),o),Tt(vb,{delay:0,offset:a}),Tt(vb,{delay:160,offset:!0}),Tt(vb,{delay:320,offset:!a}))};d6.defaultProps={size:4};var sfe=function(t,o){var a=t.isDisabled,c=t.isFocused,u=t.theme,d=u.colors,f=u.borderRadius,m=u.spacing;return de({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:m.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},o?{}:{backgroundColor:a?d.neutral5:d.neutral0,borderColor:a?d.neutral10:c?d.primary:d.neutral20,borderRadius:f,borderStyle:"solid",borderWidth:1,boxShadow:c?"0 0 0 1px ".concat(d.primary):void 0,"&:hover":{borderColor:c?d.primary:d.neutral30}})},cfe=function(t){var o=t.children,a=t.isDisabled,c=t.isFocused,u=t.innerRef,d=t.innerProps,f=t.menuIsOpen;return Tt("div",Be({ref:u},Lr(t,"control",{control:!0,"control--is-disabled":a,"control--is-focused":c,"control--menu-is-open":f}),d),o)},lfe=["data"],ufe=function(t,o){var a=t.theme.spacing;return o?{}:{paddingBottom:a.baseUnit*2,paddingTop:a.baseUnit*2}},dfe=function(t){var o=t.children,a=t.cx,c=t.getStyles,u=t.getClassNames,d=t.Heading,f=t.headingProps,m=t.innerProps,g=t.label,_=t.theme,S=t.selectProps;return Tt("div",Be({},Lr(t,"group",{group:!0}),m),Tt(d,Be({},f,{selectProps:S,theme:_,getStyles:c,getClassNames:u,cx:a}),g),Tt("div",null,o))},hfe=function(t,o){var a=t.theme,c=a.colors,u=a.spacing;return de({label:"group",cursor:"default",display:"block"},o?{}:{color:c.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:u.baseUnit*3,paddingRight:u.baseUnit*3,textTransform:"uppercase"})},pfe=function(t){var o=e6(t);o.data;var a=Sn(o,lfe);return Tt("div",Be({},Lr(t,"groupHeading",{"group-heading":!0}),a))},ffe=["innerRef","isDisabled","isHidden","inputClassName"],mfe=function(t,o){var a=t.isDisabled,c=t.value,u=t.theme,d=u.spacing,f=u.colors;return de(de({visibility:a?"hidden":"visible",transform:c?"translateZ(0)":""},gfe),o?{}:{margin:d.baseUnit/2,paddingBottom:d.baseUnit/2,paddingTop:d.baseUnit/2,color:f.neutral80})},h6={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},gfe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":de({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},h6)},vfe=function(t){return de({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},h6)},Efe=function(t){var o=t.cx,a=t.value,c=e6(t),u=c.innerRef,d=c.isDisabled,f=c.isHidden,m=c.inputClassName,g=Sn(c,ffe);return Tt("div",Be({},Lr(t,"input",{"input-container":!0}),{"data-value":a||""}),Tt("input",Be({className:o({input:!0},m),ref:u,style:vfe(f),disabled:d},g)))},_fe=function(t,o){var a=t.theme,c=a.spacing,u=a.borderRadius,d=a.colors;return de({label:"multiValue",display:"flex",minWidth:0},o?{}:{backgroundColor:d.neutral10,borderRadius:u/2,margin:c.baseUnit/2})},Sfe=function(t,o){var a=t.theme,c=a.borderRadius,u=a.colors,d=t.cropWithEllipsis;return de({overflow:"hidden",textOverflow:d||d===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},o?{}:{borderRadius:c/2,color:u.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},yfe=function(t,o){var a=t.theme,c=a.spacing,u=a.borderRadius,d=a.colors,f=t.isFocused;return de({alignItems:"center",display:"flex"},o?{}:{borderRadius:u/2,backgroundColor:f?d.dangerLight:void 0,paddingLeft:c.baseUnit,paddingRight:c.baseUnit,":hover":{backgroundColor:d.dangerLight,color:d.danger}})},p6=function(t){var o=t.children,a=t.innerProps;return Tt("div",a,o)},Cfe=p6,Tfe=p6;function bfe(e){var t=e.children,o=e.innerProps;return Tt("div",Be({role:"button"},o),t||Tt(O1,{size:14}))}var Rfe=function(t){var o=t.children,a=t.components,c=t.data,u=t.innerProps,d=t.isDisabled,f=t.removeProps,m=t.selectProps,g=a.Container,_=a.Label,S=a.Remove;return Tt(g,{data:c,innerProps:de(de({},Lr(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":d})),u),selectProps:m},Tt(_,{data:c,innerProps:de({},Lr(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:m},o),Tt(S,{data:c,innerProps:de(de({},Lr(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(o||"option")},f),selectProps:m}))},Ife=function(t,o){var a=t.isDisabled,c=t.isFocused,u=t.isSelected,d=t.theme,f=d.spacing,m=d.colors;return de({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},o?{}:{backgroundColor:u?m.primary:c?m.primary25:"transparent",color:a?m.neutral20:u?m.neutral0:"inherit",padding:"".concat(f.baseUnit*2,"px ").concat(f.baseUnit*3,"px"),":active":{backgroundColor:a?void 0:u?m.primary:m.primary50}})},wfe=function(t){var o=t.children,a=t.isDisabled,c=t.isFocused,u=t.isSelected,d=t.innerRef,f=t.innerProps;return Tt("div",Be({},Lr(t,"option",{option:!0,"option--is-disabled":a,"option--is-focused":c,"option--is-selected":u}),{ref:d,"aria-disabled":a},f),o)},Ofe=function(t,o){var a=t.theme,c=a.spacing,u=a.colors;return de({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},o?{}:{color:u.neutral50,marginLeft:c.baseUnit/2,marginRight:c.baseUnit/2})},Afe=function(t){var o=t.children,a=t.innerProps;return Tt("div",Be({},Lr(t,"placeholder",{placeholder:!0}),a),o)},Nfe=function(t,o){var a=t.isDisabled,c=t.theme,u=c.spacing,d=c.colors;return de({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},o?{}:{color:a?d.neutral40:d.neutral80,marginLeft:u.baseUnit/2,marginRight:u.baseUnit/2})},Pfe=function(t){var o=t.children,a=t.isDisabled,c=t.innerProps;return Tt("div",Be({},Lr(t,"singleValue",{"single-value":!0,"single-value--is-disabled":a}),c),o)},xfe={ClearIndicator:nfe,Control:cfe,DropdownIndicator:efe,DownChevron:l6,CrossIcon:O1,Group:dfe,GroupHeading:pfe,IndicatorsContainer:Xpe,IndicatorSeparator:ife,Input:Efe,LoadingIndicator:d6,Menu:Vpe,MenuList:Bpe,MenuPortal:Wpe,LoadingMessage:s6,NoOptionsMessage:a6,MultiValue:Rfe,MultiValueContainer:Cfe,MultiValueLabel:Tfe,MultiValueRemove:bfe,Option:wfe,Placeholder:Afe,SelectContainer:zpe,SingleValue:Pfe,ValueContainer:Ype},Dfe=function(t){return de(de({},xfe),t.components)},fF=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function kfe(e,t){return!!(e===t||fF(e)&&fF(t))}function Lfe(e,t){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(!kfe(e[o],t[o]))return!1;return!0}function Mfe(e,t){t===void 0&&(t=Lfe);var o=null;function a(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];if(o&&o.lastThis===this&&t(c,o.lastArgs))return o.lastResult;var d=e.apply(this,c);return o={lastResult:d,lastArgs:c,lastThis:this},d}return a.clear=function(){o=null},a}var Ufe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},mF=function(t){return Tt("span",Be({css:Ufe},t))},Vfe={guidance:function(t){var o=t.isSearchable,a=t.isMulti,c=t.isDisabled,u=t.tabSelectsValue,d=t.context;switch(d){case"menu":return"Use Up and Down to choose options".concat(c?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(u?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(t["aria-label"]||"Select"," is focused ").concat(o?",type to refine list":"",", press Down to open the menu, ").concat(a?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var o=t.action,a=t.label,c=a===void 0?"":a,u=t.labels,d=t.isDisabled;switch(o){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(c,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(u.length>1?"s":""," ").concat(u.join(","),", selected.");case"select-option":return d?"option ".concat(c," is disabled. Select another option."):"option ".concat(c,", selected.");default:return""}},onFocus:function(t){var o=t.context,a=t.focused,c=t.options,u=t.label,d=u===void 0?"":u,f=t.selectValue,m=t.isDisabled,g=t.isSelected,_=function(I,A){return I&&I.length?"".concat(I.indexOf(A)+1," of ").concat(I.length):""};if(o==="value"&&f)return"value ".concat(d," focused, ").concat(_(f,a),".");if(o==="menu"){var S=m?" disabled":"",C="".concat(g?"selected":"focused").concat(S);return"option ".concat(d," ").concat(C,", ").concat(_(c,a),".")}return""},onFilter:function(t){var o=t.inputValue,a=t.resultsMessage;return"".concat(a).concat(o?" for search term "+o:"",".")}},Ffe=function(t){var o=t.ariaSelection,a=t.focusedOption,c=t.focusedValue,u=t.focusableOptions,d=t.isFocused,f=t.selectValue,m=t.selectProps,g=t.id,_=m.ariaLiveMessages,S=m.getOptionLabel,C=m.inputValue,O=m.isMulti,I=m.isOptionDisabled,A=m.isSearchable,L=m.menuIsOpen,N=m.options,P=m.screenReaderStatus,D=m.tabSelectsValue,U=m["aria-label"],B=m["aria-live"],F=b.useMemo(function(){return de(de({},Vfe),_||{})},[_]),H=b.useMemo(function(){var ee="";if(o&&F.onChange){var re=o.option,le=o.options,me=o.removedValue,ue=o.removedValues,ve=o.value,Ee=function(Qe){return Array.isArray(Qe)?null:Qe},oe=me||re||Ee(ve),ae=oe?S(oe):"",he=le||ue||void 0,pe=he?he.map(S):[],Ae=de({isDisabled:oe&&I(oe,f),label:ae,labels:pe},o);ee=F.onChange(Ae)}return ee},[o,F,I,f,S]),K=b.useMemo(function(){var ee="",re=a||c,le=!!(a&&f&&f.includes(a));if(re&&F.onFocus){var me={focused:re,label:S(re),isDisabled:I(re,f),isSelected:le,options:u,context:re===a?"menu":"value",selectValue:f};ee=F.onFocus(me)}return ee},[a,c,S,I,F,u,f]),te=b.useMemo(function(){var ee="";if(L&&N.length&&F.onFilter){var re=P({count:u.length});ee=F.onFilter({inputValue:C,resultsMessage:re})}return ee},[u,C,L,F,N,P]),Y=b.useMemo(function(){var ee="";if(F.guidance){var re=c?"value":L?"menu":"input";ee=F.guidance({"aria-label":U,context:re,isDisabled:a&&I(a,f),isMulti:O,isSearchable:A,tabSelectsValue:D})}return ee},[U,a,c,O,I,A,L,F,f,D]),Q="".concat(K," ").concat(te," ").concat(Y),J=Tt(b.Fragment,null,Tt("span",{id:"aria-selection"},H),Tt("span",{id:"aria-context"},Q)),q=(o==null?void 0:o.action)==="initial-input-focus";return Tt(b.Fragment,null,Tt(mF,{id:g},q&&J),Tt(mF,{"aria-live":B,"aria-atomic":"false","aria-relevant":"additions text"},d&&!q&&J))},kI=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Bfe=new RegExp("["+kI.map(function(e){return e.letters}).join("")+"]","g"),f6={};for(var Eb=0;Eb<kI.length;Eb++)for(var _b=kI[Eb],Sb=0;Sb<_b.letters.length;Sb++)f6[_b.letters[Sb]]=_b.base;var m6=function(t){return t.replace(Bfe,function(o){return f6[o]})},jfe=Mfe(m6),gF=function(t){return t.replace(/^\s+|\s+$/g,"")},Hfe=function(t){return"".concat(t.label," ").concat(t.value)},$fe=function(t){return function(o,a){if(o.data.__isNew__)return!0;var c=de({ignoreCase:!0,ignoreAccents:!0,stringify:Hfe,trim:!0,matchFrom:"any"},t),u=c.ignoreCase,d=c.ignoreAccents,f=c.stringify,m=c.trim,g=c.matchFrom,_=m?gF(a):a,S=m?gF(f(o)):f(o);return u&&(_=_.toLowerCase(),S=S.toLowerCase()),d&&(_=jfe(_),S=m6(S)),g==="start"?S.substr(0,_.length)===_:S.indexOf(_)>-1}},Wfe=["innerRef"];function Gfe(e){var t=e.innerRef,o=Sn(e,Wfe),a=Dpe(o,"onExited","in","enter","exit","appear");return Tt("input",Be({ref:t},a,{css:I1({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var zfe=function(t){t.preventDefault(),t.stopPropagation()};function Kfe(e){var t=e.isEnabled,o=e.onBottomArrive,a=e.onBottomLeave,c=e.onTopArrive,u=e.onTopLeave,d=b.useRef(!1),f=b.useRef(!1),m=b.useRef(0),g=b.useRef(null),_=b.useCallback(function(L,N){if(g.current!==null){var P=g.current,D=P.scrollTop,U=P.scrollHeight,B=P.clientHeight,F=g.current,H=N>0,K=U-B-D,te=!1;K>N&&d.current&&(a&&a(L),d.current=!1),H&&f.current&&(u&&u(L),f.current=!1),H&&N>K?(o&&!d.current&&o(L),F.scrollTop=U,te=!0,d.current=!0):!H&&-N>D&&(c&&!f.current&&c(L),F.scrollTop=0,te=!0,f.current=!0),te&&zfe(L)}},[o,a,c,u]),S=b.useCallback(function(L){_(L,L.deltaY)},[_]),C=b.useCallback(function(L){m.current=L.changedTouches[0].clientY},[]),O=b.useCallback(function(L){var N=m.current-L.changedTouches[0].clientY;_(L,N)},[_]),I=b.useCallback(function(L){if(L){var N=Npe?{passive:!1}:!1;L.addEventListener("wheel",S,N),L.addEventListener("touchstart",C,N),L.addEventListener("touchmove",O,N)}},[O,C,S]),A=b.useCallback(function(L){L&&(L.removeEventListener("wheel",S,!1),L.removeEventListener("touchstart",C,!1),L.removeEventListener("touchmove",O,!1))},[O,C,S]);return b.useEffect(function(){if(t){var L=g.current;return I(L),function(){A(L)}}},[t,I,A]),function(L){g.current=L}}var vF=["boxSizing","height","overflow","paddingRight","position"],EF={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function _F(e){e.preventDefault()}function SF(e){e.stopPropagation()}function yF(){var e=this.scrollTop,t=this.scrollHeight,o=e+this.offsetHeight;e===0?this.scrollTop=1:o===t&&(this.scrollTop=e-1)}function CF(){return"ontouchstart"in window||navigator.maxTouchPoints}var TF=!!(typeof window<"u"&&window.document&&window.document.createElement),Wp=0,Kd={capture:!1,passive:!1};function Yfe(e){var t=e.isEnabled,o=e.accountForScrollbars,a=o===void 0?!0:o,c=b.useRef({}),u=b.useRef(null),d=b.useCallback(function(m){if(TF){var g=document.body,_=g&&g.style;if(a&&vF.forEach(function(I){var A=_&&_[I];c.current[I]=A}),a&&Wp<1){var S=parseInt(c.current.paddingRight,10)||0,C=document.body?document.body.clientWidth:0,O=window.innerWidth-C+S||0;Object.keys(EF).forEach(function(I){var A=EF[I];_&&(_[I]=A)}),_&&(_.paddingRight="".concat(O,"px"))}g&&CF()&&(g.addEventListener("touchmove",_F,Kd),m&&(m.addEventListener("touchstart",yF,Kd),m.addEventListener("touchmove",SF,Kd))),Wp+=1}},[a]),f=b.useCallback(function(m){if(TF){var g=document.body,_=g&&g.style;Wp=Math.max(Wp-1,0),a&&Wp<1&&vF.forEach(function(S){var C=c.current[S];_&&(_[S]=C)}),g&&CF()&&(g.removeEventListener("touchmove",_F,Kd),m&&(m.removeEventListener("touchstart",yF,Kd),m.removeEventListener("touchmove",SF,Kd)))}},[a]);return b.useEffect(function(){if(t){var m=u.current;return d(m),function(){f(m)}}},[t,d,f]),function(m){u.current=m}}var qfe=function(){return document.activeElement&&document.activeElement.blur()},Xfe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Jfe(e){var t=e.children,o=e.lockEnabled,a=e.captureEnabled,c=a===void 0?!0:a,u=e.onBottomArrive,d=e.onBottomLeave,f=e.onTopArrive,m=e.onTopLeave,g=Kfe({isEnabled:c,onBottomArrive:u,onBottomLeave:d,onTopArrive:f,onTopLeave:m}),_=Yfe({isEnabled:o}),S=function(O){g(O),_(O)};return Tt(b.Fragment,null,o&&Tt("div",{onClick:qfe,css:Xfe}),t(S))}var Qfe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Zfe=function(t){var o=t.name,a=t.onFocus;return Tt("input",{required:!0,name:o,tabIndex:-1,"aria-hidden":"true",onFocus:a,css:Qfe,value:"",onChange:function(){}})},eme=function(t){return t.label},tme=function(t){return t.label},nme=function(t){return t.value},rme=function(t){return!!t.isDisabled},ime={clearIndicator:tfe,container:Gpe,control:sfe,dropdownIndicator:Zpe,group:ufe,groupHeading:hfe,indicatorsContainer:qpe,indicatorSeparator:rfe,input:mfe,loadingIndicator:afe,loadingMessage:Hpe,menu:Mpe,menuList:Fpe,menuPortal:$pe,multiValue:_fe,multiValueLabel:Sfe,multiValueRemove:yfe,noOptionsMessage:jpe,option:Ife,placeholder:Ofe,singleValue:Nfe,valueContainer:Kpe},ome={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},ame=4,g6=4,sme=38,cme=g6*2,lme={baseUnit:g6,controlHeight:sme,menuGutter:cme},yb={borderRadius:ame,colors:ome,spacing:lme},ume={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:hF(),captureMenuScroll:!hF(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:$fe(),formatGroupLabel:eme,getOptionLabel:tme,getOptionValue:nme,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:rme,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Ope(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var o=t.count;return"".concat(o," result").concat(o!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function bF(e,t,o,a){var c=S6(e,t,o),u=y6(e,t,o),d=_6(e,t),f=kE(e,t);return{type:"option",data:t,isDisabled:c,isSelected:u,label:d,value:f,index:a}}function v6(e,t){return e.options.map(function(o,a){if("options"in o){var c=o.options.map(function(d,f){return bF(e,d,t,f)}).filter(function(d){return RF(e,d)});return c.length>0?{type:"group",data:o,options:c,index:a}:void 0}var u=bF(e,o,t,a);return RF(e,u)?u:void 0}).filter(Ppe)}function E6(e){return e.reduce(function(t,o){return o.type==="group"?t.push.apply(t,ft(o.options.map(function(a){return a.data}))):t.push(o.data),t},[])}function dme(e,t){return E6(v6(e,t))}function RF(e,t){var o=e.inputValue,a=o===void 0?"":o,c=t.data,u=t.isSelected,d=t.label,f=t.value;return(!T6(e)||!u)&&C6(e,{label:d,value:f,data:c},a)}function hme(e,t){var o=e.focusedValue,a=e.selectValue,c=a.indexOf(o);if(c>-1){var u=t.indexOf(o);if(u>-1)return o;if(c<t.length)return t[c]}return null}function pme(e,t){var o=e.focusedOption;return o&&t.indexOf(o)>-1?o:t[0]}var _6=function(t,o){return t.getOptionLabel(o)},kE=function(t,o){return t.getOptionValue(o)};function S6(e,t,o){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,o):!1}function y6(e,t,o){if(o.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,o);var a=kE(e,t);return o.some(function(c){return kE(e,c)===a})}function C6(e,t,o){return e.filterOption?e.filterOption(t,o):!0}var T6=function(t){var o=t.hideSelectedOptions,a=t.isMulti;return o===void 0?a:o},fme=1,b6=function(e){Vu(o,e);var t=Fu(o);function o(a){var c;if(va(this,o),c=t.call(this,a),c.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},c.blockOptionHover=!1,c.isComposing=!1,c.commonProps=void 0,c.initialTouchX=0,c.initialTouchY=0,c.instancePrefix="",c.openAfterFocus=!1,c.scrollToFocusedOptionOnUpdate=!1,c.userIsDragging=void 0,c.controlRef=null,c.getControlRef=function(f){c.controlRef=f},c.focusedOptionRef=null,c.getFocusedOptionRef=function(f){c.focusedOptionRef=f},c.menuListRef=null,c.getMenuListRef=function(f){c.menuListRef=f},c.inputRef=null,c.getInputRef=function(f){c.inputRef=f},c.focus=c.focusInput,c.blur=c.blurInput,c.onChange=function(f,m){var g=c.props,_=g.onChange,S=g.name;m.name=S,c.ariaOnChange(f,m),_(f,m)},c.setValue=function(f,m,g){var _=c.props,S=_.closeMenuOnSelect,C=_.isMulti,O=_.inputValue;c.onInputChange("",{action:"set-value",prevInputValue:O}),S&&(c.setState({inputIsHiddenAfterUpdate:!C}),c.onMenuClose()),c.setState({clearFocusValueOnUpdate:!0}),c.onChange(f,{action:m,option:g})},c.selectOption=function(f){var m=c.props,g=m.blurInputOnSelect,_=m.isMulti,S=m.name,C=c.state.selectValue,O=_&&c.isOptionSelected(f,C),I=c.isOptionDisabled(f,C);if(O){var A=c.getOptionValue(f);c.setValue(C.filter(function(L){return c.getOptionValue(L)!==A}),"deselect-option",f)}else if(!I)_?c.setValue([].concat(ft(C),[f]),"select-option",f):c.setValue(f,"select-option");else{c.ariaOnChange(f,{action:"select-option",option:f,name:S});return}g&&c.blurInput()},c.removeValue=function(f){var m=c.props.isMulti,g=c.state.selectValue,_=c.getOptionValue(f),S=g.filter(function(O){return c.getOptionValue(O)!==_}),C=Ug(m,S,S[0]||null);c.onChange(C,{action:"remove-value",removedValue:f}),c.focusInput()},c.clearValue=function(){var f=c.state.selectValue;c.onChange(Ug(c.props.isMulti,[],null),{action:"clear",removedValues:f})},c.popValue=function(){var f=c.props.isMulti,m=c.state.selectValue,g=m[m.length-1],_=m.slice(0,m.length-1),S=Ug(f,_,_[0]||null);c.onChange(S,{action:"pop-value",removedValue:g})},c.getValue=function(){return c.state.selectValue},c.cx=function(){for(var f=arguments.length,m=new Array(f),g=0;g<f;g++)m[g]=arguments[g];return Tpe.apply(void 0,[c.props.classNamePrefix].concat(m))},c.getOptionLabel=function(f){return _6(c.props,f)},c.getOptionValue=function(f){return kE(c.props,f)},c.getStyles=function(f,m){var g=c.props.unstyled,_=ime[f](m,g);_.boxSizing="border-box";var S=c.props.styles[f];return S?S(_,m):_},c.getClassNames=function(f,m){var g,_;return(g=(_=c.props.classNames)[f])===null||g===void 0?void 0:g.call(_,m)},c.getElementId=function(f){return"".concat(c.instancePrefix,"-").concat(f)},c.getComponents=function(){return Dfe(c.props)},c.buildCategorizedOptions=function(){return v6(c.props,c.state.selectValue)},c.getCategorizedOptions=function(){return c.props.menuIsOpen?c.buildCategorizedOptions():[]},c.buildFocusableOptions=function(){return E6(c.buildCategorizedOptions())},c.getFocusableOptions=function(){return c.props.menuIsOpen?c.buildFocusableOptions():[]},c.ariaOnChange=function(f,m){c.setState({ariaSelection:de({value:f},m)})},c.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),c.focusInput())},c.onMenuMouseMove=function(f){c.blockOptionHover=!1},c.onControlMouseDown=function(f){if(!f.defaultPrevented){var m=c.props.openMenuOnClick;c.state.isFocused?c.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&c.onMenuClose():m&&c.openMenu("first"):(m&&(c.openAfterFocus=!0),c.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},c.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0)&&!c.props.isDisabled){var m=c.props,g=m.isMulti,_=m.menuIsOpen;c.focusInput(),_?(c.setState({inputIsHiddenAfterUpdate:!g}),c.onMenuClose()):c.openMenu("first"),f.preventDefault()}},c.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(c.clearValue(),f.preventDefault(),c.openAfterFocus=!1,f.type==="touchend"?c.focusInput():setTimeout(function(){return c.focusInput()}))},c.onScroll=function(f){typeof c.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&j_(f.target)&&c.props.onMenuClose():typeof c.props.closeMenuOnScroll=="function"&&c.props.closeMenuOnScroll(f)&&c.props.onMenuClose()},c.onCompositionStart=function(){c.isComposing=!0},c.onCompositionEnd=function(){c.isComposing=!1},c.onTouchStart=function(f){var m=f.touches,g=m&&m.item(0);g&&(c.initialTouchX=g.clientX,c.initialTouchY=g.clientY,c.userIsDragging=!1)},c.onTouchMove=function(f){var m=f.touches,g=m&&m.item(0);if(g){var _=Math.abs(g.clientX-c.initialTouchX),S=Math.abs(g.clientY-c.initialTouchY),C=5;c.userIsDragging=_>C||S>C}},c.onTouchEnd=function(f){c.userIsDragging||(c.controlRef&&!c.controlRef.contains(f.target)&&c.menuListRef&&!c.menuListRef.contains(f.target)&&c.blurInput(),c.initialTouchX=0,c.initialTouchY=0)},c.onControlTouchEnd=function(f){c.userIsDragging||c.onControlMouseDown(f)},c.onClearIndicatorTouchEnd=function(f){c.userIsDragging||c.onClearIndicatorMouseDown(f)},c.onDropdownIndicatorTouchEnd=function(f){c.userIsDragging||c.onDropdownIndicatorMouseDown(f)},c.handleInputChange=function(f){var m=c.props.inputValue,g=f.currentTarget.value;c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange(g,{action:"input-change",prevInputValue:m}),c.props.menuIsOpen||c.onMenuOpen()},c.onInputFocus=function(f){c.props.onFocus&&c.props.onFocus(f),c.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(c.openAfterFocus||c.props.openMenuOnFocus)&&c.openMenu("first"),c.openAfterFocus=!1},c.onInputBlur=function(f){var m=c.props.inputValue;if(c.menuListRef&&c.menuListRef.contains(document.activeElement)){c.inputRef.focus();return}c.props.onBlur&&c.props.onBlur(f),c.onInputChange("",{action:"input-blur",prevInputValue:m}),c.onMenuClose(),c.setState({focusedValue:null,isFocused:!1})},c.onOptionHover=function(f){c.blockOptionHover||c.state.focusedOption===f||c.setState({focusedOption:f})},c.shouldHideSelectedOptions=function(){return T6(c.props)},c.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),c.focus()},c.onKeyDown=function(f){var m=c.props,g=m.isMulti,_=m.backspaceRemovesValue,S=m.escapeClearsValue,C=m.inputValue,O=m.isClearable,I=m.isDisabled,A=m.menuIsOpen,L=m.onKeyDown,N=m.tabSelectsValue,P=m.openMenuOnFocus,D=c.state,U=D.focusedOption,B=D.focusedValue,F=D.selectValue;if(!I&&!(typeof L=="function"&&(L(f),f.defaultPrevented))){switch(c.blockOptionHover=!0,f.key){case"ArrowLeft":if(!g||C)return;c.focusValue("previous");break;case"ArrowRight":if(!g||C)return;c.focusValue("next");break;case"Delete":case"Backspace":if(C)return;if(B)c.removeValue(B);else{if(!_)return;g?c.popValue():O&&c.clearValue()}break;case"Tab":if(c.isComposing||f.shiftKey||!A||!N||!U||P&&c.isOptionSelected(U,F))return;c.selectOption(U);break;case"Enter":if(f.keyCode===229)break;if(A){if(!U||c.isComposing)return;c.selectOption(U);break}return;case"Escape":A?(c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange("",{action:"menu-close",prevInputValue:C}),c.onMenuClose()):O&&S&&c.clearValue();break;case" ":if(C)return;if(!A){c.openMenu("first");break}if(!U)return;c.selectOption(U);break;case"ArrowUp":A?c.focusOption("up"):c.openMenu("last");break;case"ArrowDown":A?c.focusOption("down"):c.openMenu("first");break;case"PageUp":if(!A)return;c.focusOption("pageup");break;case"PageDown":if(!A)return;c.focusOption("pagedown");break;case"Home":if(!A)return;c.focusOption("first");break;case"End":if(!A)return;c.focusOption("last");break;default:return}f.preventDefault()}},c.instancePrefix="react-select-"+(c.props.instanceId||++fme),c.state.selectValue=uF(a.value),a.menuIsOpen&&c.state.selectValue.length){var u=c.buildFocusableOptions(),d=u.indexOf(c.state.selectValue[0]);c.state.focusedOption=u[d]}return c}return Ea(o,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&dF(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(c){var u=this.props,d=u.isDisabled,f=u.menuIsOpen,m=this.state.isFocused;(m&&!d&&c.isDisabled||m&&f&&!c.menuIsOpen)&&this.focusInput(),m&&d&&!c.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!m&&!d&&c.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(dF(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(c,u){this.props.onInputChange(c,u)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(c){var u=this,d=this.state,f=d.selectValue,m=d.isFocused,g=this.buildFocusableOptions(),_=c==="first"?0:g.length-1;if(!this.props.isMulti){var S=g.indexOf(f[0]);S>-1&&(_=S)}this.scrollToFocusedOptionOnUpdate=!(m&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:g[_]},function(){return u.onMenuOpen()})}},{key:"focusValue",value:function(c){var u=this.state,d=u.selectValue,f=u.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var m=d.indexOf(f);f||(m=-1);var g=d.length-1,_=-1;if(d.length){switch(c){case"previous":m===0?_=0:m===-1?_=g:_=m-1;break;case"next":m>-1&&m<g&&(_=m+1);break}this.setState({inputIsHidden:_!==-1,focusedValue:d[_]})}}}},{key:"focusOption",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",u=this.props.pageSize,d=this.state.focusedOption,f=this.getFocusableOptions();if(f.length){var m=0,g=f.indexOf(d);d||(g=-1),c==="up"?m=g>0?g-1:f.length-1:c==="down"?m=(g+1)%f.length:c==="pageup"?(m=g-u,m<0&&(m=0)):c==="pagedown"?(m=g+u,m>f.length-1&&(m=f.length-1)):c==="last"&&(m=f.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:f[m],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(yb):de(de({},yb),this.props.theme):yb}},{key:"getCommonProps",value:function(){var c=this.clearValue,u=this.cx,d=this.getStyles,f=this.getClassNames,m=this.getValue,g=this.selectOption,_=this.setValue,S=this.props,C=S.isMulti,O=S.isRtl,I=S.options,A=this.hasValue();return{clearValue:c,cx:u,getStyles:d,getClassNames:f,getValue:m,hasValue:A,isMulti:C,isRtl:O,options:I,selectOption:g,selectProps:S,setValue:_,theme:this.getTheme()}}},{key:"hasValue",value:function(){var c=this.state.selectValue;return c.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var c=this.props,u=c.isClearable,d=c.isMulti;return u===void 0?d:u}},{key:"isOptionDisabled",value:function(c,u){return S6(this.props,c,u)}},{key:"isOptionSelected",value:function(c,u){return y6(this.props,c,u)}},{key:"filterOption",value:function(c,u){return C6(this.props,c,u)}},{key:"formatOptionLabel",value:function(c,u){if(typeof this.props.formatOptionLabel=="function"){var d=this.props.inputValue,f=this.state.selectValue;return this.props.formatOptionLabel(c,{context:u,inputValue:d,selectValue:f})}else return this.getOptionLabel(c)}},{key:"formatGroupLabel",value:function(c){return this.props.formatGroupLabel(c)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var c=this.props,u=c.isDisabled,d=c.isSearchable,f=c.inputId,m=c.inputValue,g=c.tabIndex,_=c.form,S=c.menuIsOpen,C=c.required,O=this.getComponents(),I=O.Input,A=this.state,L=A.inputIsHidden,N=A.ariaSelection,P=this.commonProps,D=f||this.getElementId("input"),U=de(de(de({"aria-autocomplete":"list","aria-expanded":S,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":C,role:"combobox"},S&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!d&&{"aria-readonly":!0}),this.hasValue()?(N==null?void 0:N.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return d?b.createElement(I,Be({},P,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:D,innerRef:this.getInputRef,isDisabled:u,isHidden:L,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:g,form:_,type:"text",value:m},U)):b.createElement(Gfe,Be({id:D,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:xE,onFocus:this.onInputFocus,disabled:u,tabIndex:g,inputMode:"none",form:_,value:""},U))}},{key:"renderPlaceholderOrValue",value:function(){var c=this,u=this.getComponents(),d=u.MultiValue,f=u.MultiValueContainer,m=u.MultiValueLabel,g=u.MultiValueRemove,_=u.SingleValue,S=u.Placeholder,C=this.commonProps,O=this.props,I=O.controlShouldRenderValue,A=O.isDisabled,L=O.isMulti,N=O.inputValue,P=O.placeholder,D=this.state,U=D.selectValue,B=D.focusedValue,F=D.isFocused;if(!this.hasValue()||!I)return N?null:b.createElement(S,Be({},C,{key:"placeholder",isDisabled:A,isFocused:F,innerProps:{id:this.getElementId("placeholder")}}),P);if(L)return U.map(function(K,te){var Y=K===B,Q="".concat(c.getOptionLabel(K),"-").concat(c.getOptionValue(K));return b.createElement(d,Be({},C,{components:{Container:f,Label:m,Remove:g},isFocused:Y,isDisabled:A,key:Q,index:te,removeProps:{onClick:function(){return c.removeValue(K)},onTouchEnd:function(){return c.removeValue(K)},onMouseDown:function(q){q.preventDefault()}},data:K}),c.formatOptionLabel(K,"value"))});if(N)return null;var H=U[0];return b.createElement(_,Be({},C,{data:H,isDisabled:A}),this.formatOptionLabel(H,"value"))}},{key:"renderClearIndicator",value:function(){var c=this.getComponents(),u=c.ClearIndicator,d=this.commonProps,f=this.props,m=f.isDisabled,g=f.isLoading,_=this.state.isFocused;if(!this.isClearable()||!u||m||!this.hasValue()||g)return null;var S={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(u,Be({},d,{innerProps:S,isFocused:_}))}},{key:"renderLoadingIndicator",value:function(){var c=this.getComponents(),u=c.LoadingIndicator,d=this.commonProps,f=this.props,m=f.isDisabled,g=f.isLoading,_=this.state.isFocused;if(!u||!g)return null;var S={"aria-hidden":"true"};return b.createElement(u,Be({},d,{innerProps:S,isDisabled:m,isFocused:_}))}},{key:"renderIndicatorSeparator",value:function(){var c=this.getComponents(),u=c.DropdownIndicator,d=c.IndicatorSeparator;if(!u||!d)return null;var f=this.commonProps,m=this.props.isDisabled,g=this.state.isFocused;return b.createElement(d,Be({},f,{isDisabled:m,isFocused:g}))}},{key:"renderDropdownIndicator",value:function(){var c=this.getComponents(),u=c.DropdownIndicator;if(!u)return null;var d=this.commonProps,f=this.props.isDisabled,m=this.state.isFocused,g={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(u,Be({},d,{innerProps:g,isDisabled:f,isFocused:m}))}},{key:"renderMenu",value:function(){var c=this,u=this.getComponents(),d=u.Group,f=u.GroupHeading,m=u.Menu,g=u.MenuList,_=u.MenuPortal,S=u.LoadingMessage,C=u.NoOptionsMessage,O=u.Option,I=this.commonProps,A=this.state.focusedOption,L=this.props,N=L.captureMenuScroll,P=L.inputValue,D=L.isLoading,U=L.loadingMessage,B=L.minMenuHeight,F=L.maxMenuHeight,H=L.menuIsOpen,K=L.menuPlacement,te=L.menuPosition,Y=L.menuPortalTarget,Q=L.menuShouldBlockScroll,J=L.menuShouldScrollIntoView,q=L.noOptionsMessage,ee=L.onMenuScrollToTop,re=L.onMenuScrollToBottom;if(!H)return null;var le=function(he,pe){var Ae=he.type,Le=he.data,Qe=he.isDisabled,je=he.isSelected,Ut=he.label,Nt=he.value,at=A===Le,Ht=Qe?void 0:function(){return c.onOptionHover(Le)},He=Qe?void 0:function(){return c.selectOption(Le)},ot="".concat(c.getElementId("option"),"-").concat(pe),It={id:ot,onClick:He,onMouseMove:Ht,onMouseOver:Ht,tabIndex:-1};return b.createElement(O,Be({},I,{innerProps:It,data:Le,isDisabled:Qe,isSelected:je,key:ot,label:Ut,type:Ae,value:Nt,isFocused:at,innerRef:at?c.getFocusedOptionRef:void 0}),c.formatOptionLabel(he.data,"menu"))},me;if(this.hasOptions())me=this.getCategorizedOptions().map(function(ae){if(ae.type==="group"){var he=ae.data,pe=ae.options,Ae=ae.index,Le="".concat(c.getElementId("group"),"-").concat(Ae),Qe="".concat(Le,"-heading");return b.createElement(d,Be({},I,{key:Le,data:he,options:pe,Heading:f,headingProps:{id:Qe,data:ae.data},label:c.formatGroupLabel(ae.data)}),ae.options.map(function(je){return le(je,"".concat(Ae,"-").concat(je.index))}))}else if(ae.type==="option")return le(ae,"".concat(ae.index))});else if(D){var ue=U({inputValue:P});if(ue===null)return null;me=b.createElement(S,I,ue)}else{var ve=q({inputValue:P});if(ve===null)return null;me=b.createElement(C,I,ve)}var Ee={minMenuHeight:B,maxMenuHeight:F,menuPlacement:K,menuPosition:te,menuShouldScrollIntoView:J},oe=b.createElement(Upe,Be({},I,Ee),function(ae){var he=ae.ref,pe=ae.placerProps,Ae=pe.placement,Le=pe.maxHeight;return b.createElement(m,Be({},I,Ee,{innerRef:he,innerProps:{onMouseDown:c.onMenuMouseDown,onMouseMove:c.onMenuMouseMove,id:c.getElementId("listbox")},isLoading:D,placement:Ae}),b.createElement(Jfe,{captureEnabled:N,onTopArrive:ee,onBottomArrive:re,lockEnabled:Q},function(Qe){return b.createElement(g,Be({},I,{innerRef:function(Ut){c.getMenuListRef(Ut),Qe(Ut)},isLoading:D,maxHeight:Le,focusedOption:A}),me)}))});return Y||te==="fixed"?b.createElement(_,Be({},I,{appendTo:Y,controlElement:this.controlRef,menuPlacement:K,menuPosition:te}),oe):oe}},{key:"renderFormField",value:function(){var c=this,u=this.props,d=u.delimiter,f=u.isDisabled,m=u.isMulti,g=u.name,_=u.required,S=this.state.selectValue;if(_&&!this.hasValue()&&!f)return b.createElement(Zfe,{name:g,onFocus:this.onValueInputFocus});if(!(!g||f))if(m)if(d){var C=S.map(function(A){return c.getOptionValue(A)}).join(d);return b.createElement("input",{name:g,type:"hidden",value:C})}else{var O=S.length>0?S.map(function(A,L){return b.createElement("input",{key:"i-".concat(L),name:g,type:"hidden",value:c.getOptionValue(A)})}):b.createElement("input",{name:g,type:"hidden",value:""});return b.createElement("div",null,O)}else{var I=S[0]?this.getOptionValue(S[0]):"";return b.createElement("input",{name:g,type:"hidden",value:I})}}},{key:"renderLiveRegion",value:function(){var c=this.commonProps,u=this.state,d=u.ariaSelection,f=u.focusedOption,m=u.focusedValue,g=u.isFocused,_=u.selectValue,S=this.getFocusableOptions();return b.createElement(Ffe,Be({},c,{id:this.getElementId("live-region"),ariaSelection:d,focusedOption:f,focusedValue:m,isFocused:g,selectValue:_,focusableOptions:S}))}},{key:"render",value:function(){var c=this.getComponents(),u=c.Control,d=c.IndicatorsContainer,f=c.SelectContainer,m=c.ValueContainer,g=this.props,_=g.className,S=g.id,C=g.isDisabled,O=g.menuIsOpen,I=this.state.isFocused,A=this.commonProps=this.getCommonProps();return b.createElement(f,Be({},A,{className:_,innerProps:{id:S,onKeyDown:this.onKeyDown},isDisabled:C,isFocused:I}),this.renderLiveRegion(),b.createElement(u,Be({},A,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:C,isFocused:I,menuIsOpen:O}),b.createElement(m,Be({},A,{isDisabled:C}),this.renderPlaceholderOrValue(),this.renderInput()),b.createElement(d,Be({},A,{isDisabled:C}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(c,u){var d=u.prevProps,f=u.clearFocusValueOnUpdate,m=u.inputIsHiddenAfterUpdate,g=u.ariaSelection,_=u.isFocused,S=u.prevWasFocused,C=c.options,O=c.value,I=c.menuIsOpen,A=c.inputValue,L=c.isMulti,N=uF(O),P={};if(d&&(O!==d.value||C!==d.options||I!==d.menuIsOpen||A!==d.inputValue)){var D=I?dme(c,N):[],U=f?hme(u,N):null,B=pme(u,D);P={selectValue:N,focusedOption:B,focusedValue:U,clearFocusValueOnUpdate:!1}}var F=m!=null&&c!==d?{inputIsHidden:m,inputIsHiddenAfterUpdate:void 0}:{},H=g,K=_&&S;return _&&!K&&(H={value:Ug(L,N,N[0]||null),options:N,action:"initial-input-focus"},K=!S),(g==null?void 0:g.action)==="initial-input-focus"&&(H=null),de(de(de({},P),F),{},{prevProps:c,ariaSelection:H,prevWasFocused:K})}}]),o}(b.Component);b6.defaultProps=ume;var mme=b.forwardRef(function(e,t){var o=Dhe(e);return b.createElement(b6,Be({ref:t},o))});const gme=mme;const{Title:vme,Paragraph:Eme}=Co,_me=b.memo(function({label:t}){const a=$s().filter(m=>m.hasAudio||m.hasVideo),c=Ef(m=>m.localTracks),u=Ef(m=>m.hostRoom),d=gs(),f=Wa();return Ye("div",{className:"room-selector-item",children:[ce("i",{className:"i-mdi-chat-processing-outline text-5 color-zinc"}),ce("code",{className:"bg-rose color-white px-2 rounded",children:t}),d&&c&&f.uid&&(u==null?void 0:u.client.channelName)===f.channelName&&Ye("div",{className:"user",children:[ce(N5,{audioTrack:c[0],cameraOn:!0,micOn:!0,videoTrack:c[1]}),ce("div",{className:"mask"}),ce("label",{className:"label",children:ms(f.uid)})]},f.uid),ce(oo,{children:a.map(m=>Ye("div",{className:"user",children:[ce(_1,{user:m}),ce("div",{className:"mask"}),ce("label",{className:"label",children:ms(m.uid)})]},m.uid))})]})}),Sme=({innerProps:e,isDisabled:t,label:o,data:a})=>{const{client:c}=a.value;return t?null:ce("div",{...e,children:ce(w5,{client:c,children:ce(_me,{label:o})})})},yme=()=>{const e=Ef(d=>d.getRooms),[t,o]=b.useState(!1);b.useEffect(()=>{e()},[]);const a=Ef(d=>d.rooms),c=Ef(d=>d.selectChannel),u=b.useMemo(()=>a==null?void 0:a.map(d=>({label:d.channel.replace(/[^0-9]*/,"Room"),value:d})),[a]);return ce(oi,{children:t?ce("div",{className:"max-w-lg p-10",children:ce(gme,{components:{Option:Sme},isMulti:!1,menuIsOpen:!0,onChange:d=>{var f;return c((f=d==null?void 0:d.value)==null?void 0:f.channel)},options:u})}):Ye("div",{className:"h-screen p-3",children:[ce(vme,{children:"multi-channel"}),ce(Eme,{children:"This is multi-channel example. By create multi Agora Client. You can join multi-channel"}),ce("div",{className:"text-xl",children:ce(io,{onClick:()=>o(!0),type:"primary",children:"show demo"})})]})})};const{Title:Cme,Paragraph:Tme,Text:bme}=Co,Rme=()=>{const[e,t]=b.useState(!1);$i({appid:Ct.appId,channel:Ct.channel,token:Ct.token},e);const[o,a]=b.useState(!1),[c,u]=b.useState(!1),d=$s(),[f,m]=b.useState(!0),{videoTracks:g}=dm(f?d:d.filter((O,I)=>I==0)),{audioTracks:_}=um(d);return _.map(O=>O.play()),Ye(oi,{children:[e?ce(b1,{cameraOn:c,micOn:o,renderAction:()=>ce("div",{className:"p-4 text-xl",children:ce(io,{onClick:()=>m(O=>!O),type:"primary",children:`switch to layout ${f?2:1}`})}),renderRemoteUsers:()=>ce(oo,{children:f?ce(Ime,{videoTracks:g}):ce(wme,{videoTracks:g})})}):Ye("div",{className:"h-screen p-3",children:[ce(Cme,{children:"SwitchLayout"}),Ye(Tme,{children:["By using ",ce(bme,{keyboard:!0,children:"useRemoteVideoTracks"})," hook to dynamically switch the camera track, this will not generate a new track, but only dynamically subscribe and unsubscribe the track according to your needs."]})]}),ce(Sa,{calling:e,cameraOn:c,micOn:o,setCalling:()=>{t(O=>!O)},setCamera:()=>{u(O=>!O)},setMic:()=>{a(O=>!O)}})]})};function Ime({videoTracks:e}){return ce(oo,{children:e.map(t=>Ye(ja.Item,{children:[ce(pm,{cover:Bs(),track:t},t.getUserId()),ce(Tc,{children:`Layout1 ${ms(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}function wme({videoTracks:e}){return ce(oo,{children:e.map(t=>Ye(ja.Item,{children:[ce(pm,{cover:Bs(),track:t},t.getUserId()),ce(Tc,{children:`Layout2 ${ms(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}const R6=[{label:"switch-layout",component:Rme},{label:"multi-channel",component:yme}];function Ome({videoTracks:e}){return ce(oo,{children:e.map(t=>Ye(ja.Item,{children:[ce(pm,{cover:Bs(),track:t},t.getUserId()),ce(Tc,{children:`${ms(t.getUserId())}{${t.getUserId()}}`})]},t.getUserId()))})}const Ame=()=>{const[e,t]=b.useState(!1);$i({appid:Ct.appId,channel:Ct.channel,token:Ct.token},e);const[o,a]=b.useState(!1),[c,u]=b.useState(!1),d=$s(),{videoTracks:f}=dm(d),{audioTracks:m}=um(d);return m.map(g=>g.play()),Ye(oi,{children:[e?ce(b1,{cameraOn:c,micOn:o,renderRemoteUsers:()=>ce(Ome,{videoTracks:f})}):ce(oi,{}),ce(Sa,{calling:e,cameraOn:c,micOn:o,setCalling:()=>{t(g=>!g)},setCamera:()=>{u(g=>!g)},setMic:()=>{a(g=>!g)}})]})},I6=[{label:"overview",component:Ame}],{Title:Nme,Paragraph:Cb}=Co,Pme=()=>{$i({appid:Ct.appId,channel:Ct.channel,token:Ct.token},!0);const[e,t]=b.useState(!1),[o,a]=b.useState(),{localMicrophoneTrack:c}=$h(e);return Hh([c]),b.useEffect(()=>{c&&a({muted:c.muted,isPlaying:c.isPlaying,enabled:c.enabled})},[e,c]),Ye(oi,{children:[Ye("div",{className:"h-screen p-3",children:[ce(Nme,{children:"local audio track status"}),o&&Ye(oo,{children:[ce(Cb,{children:`muted: ${o==null?void 0:o.muted}`}),ce(Cb,{children:`isPlaying: ${o.isPlaying}`}),ce(Cb,{children:`enabled: ${o==null?void 0:o.enabled}`})]}),ce(g1,{disabled:!e,track:c})]}),ce(Sa,{micOn:e,setMic:()=>{t(u=>!u)}})]})},{Title:xme}=Co,Dme=()=>{$i({appid:Ct.appId,channel:Ct.channel,token:Ct.token},!0);const[e,t]=b.useState(!1),[o,a]=b.useState(!1),[c,u]=b.useState(!1),[d,f]=b.useState(!1),{localMicrophoneTrack:m}=$h(e),{localCameraTrack:g}=Wh(o);return Hh([m,g]),Ye(oi,{children:[Ye("div",{className:"h-screen p-3 overflow-auto",children:[ce(xme,{children:"local user status"}),Ye(io,{className:"m-2",onClick:()=>{f(_=>!_)},type:d?"primary":"default",children:["playAudio : ",JSON.stringify(d)]}),Ye(io,{className:"m-2",onClick:()=>{u(_=>!_)},type:c?"primary":"default",children:["playVideo : ",JSON.stringify(c)]}),ce(io,{className:"m-2",onClick:()=>{u(!0),a(!1)},type:"primary",children:"cameraOn=false playVideo=true"}),ce(io,{className:"m-2",onClick:()=>{u(!1),a(!0)},type:"primary",children:"cameraOn=true playVideo=false"}),ce(N5,{audioTrack:m,cameraOn:o,className:"m-2",micOn:e,playAudio:d,playVideo:c,style:{width:"300px",height:"300px"},videoTrack:g})]}),ce(Sa,{cameraOn:o,micOn:e,setCamera:()=>{a(_=>!_)},setMic:()=>{t(_=>!_)}})]})},{Title:kme}=Co,Lme=()=>{$i({appid:Ct.appId,channel:Ct.channel,token:Ct.token},!0);const[e,t]=b.useState(!1),{localCameraTrack:o}=Wh();return Hh([o]),Ye(oi,{children:[Ye("div",{className:"h-screen p-3",children:[ce(kme,{children:"local video track"}),ce(v1,{disabled:!e,play:e,style:{width:"300px",height:"300px"},track:o})]}),ce(Sa,{cameraOn:e,setCamera:()=>{t(a=>!a)}})]})},{Title:Mme}=Co,Ume=()=>{const[e,t]=b.useState(!1);$i({appid:Ct.appId,channel:Ct.channel,token:Ct.token},e);const[o,a]=b.useState(),c=$s(),{audioTracks:u}=um(c);return b.useEffect(()=>{if(u&&u.length>0){const d=[];u.map(f=>{d.push({isPlay:f.isPlaying,id:f.getTrackId(),track:f})}),a(d)}else a([])},[u]),b.useEffect(()=>{e||a([])},[e]),Ye(oi,{children:[Ye("div",{className:"h-screen p-3",children:[ce(Mme,{children:"remote audio track status"}),o&&o.length>0&&o.map(d=>Ye("div",{children:[ce("div",{className:"p-4 text-xl",children:ce(io,{onClick:()=>{d.isPlay=!d.isPlay,a([...o])},type:"primary",children:"switch this remote audio track play status"})}),d.isPlay,ce(P5,{play:d.isPlay,track:d.track})]},d.id))]}),ce(Sa,{calling:e,setCalling:()=>{t(d=>!d)}})]})},{Title:Vme}=Co,Fme=()=>{const[e,t]=b.useState(!1),o=b.useMemo(()=>Bs(),[]);$i({appid:Ct.appId,channel:Ct.channel,token:Ct.token},e);const[a,c]=b.useState(),u=$s();return b.useEffect(()=>{if(u.length>0){const d=[];u.map(f=>{d.push({playVideo:!0,playAudio:!0,id:f.uid,user:f})}),c(d)}else c([])},[u]),b.useEffect(()=>{e||c([])},[e]),Ye(oi,{children:[Ye("div",{className:"h-screen p-3",children:[ce(Vme,{children:"RemoteUser"}),a&&a.length>0&&a.map(d=>Ye("div",{children:[Ye("div",{className:"text-xl",children:[ce(io,{className:"m-2",onClick:()=>{d.playVideo=!d.playVideo,c([...a])},type:d.playVideo?"default":"primary",children:`${d.playVideo?"stop":"play"} RemoteUser Video`}),ce(io,{className:"m-2",onClick:()=>{d.playAudio=!d.playAudio,c([...a])},type:d.playAudio?"default":"primary",children:`${d.playAudio?"stop":"play"} RemoteUser Audio`})]}),ce("div",{className:"p-4 text-xl",children:ce(_1,{cover:o,playAudio:d.playAudio,playVideo:d.playVideo,style:{width:"150px",height:"100px"},user:d.user})})]},d.id))]}),ce(Sa,{calling:e,setCalling:()=>{t(d=>!d)}})]})},{Title:Bme}=Co,jme=()=>{const[e,t]=b.useState(!1);$i({appid:Ct.appId,channel:Ct.channel,token:Ct.token},e);const[o,a]=b.useState(),c=$s(),{videoTracks:u}=dm(c);return b.useEffect(()=>{if(u&&u.length>0){const d=[];u.map(f=>{d.push({isPlay:!0,id:f.getTrackId(),track:f})}),a(d)}else a([])},[u]),b.useEffect(()=>{e||a([])},[e]),Ye(oi,{children:[Ye("div",{className:"h-screen p-3",children:[ce(Bme,{children:"remote video track status"}),o&&o.length>0&&o.map(d=>Ye("div",{children:[ce("div",{className:"p-4 text-xl",children:ce(io,{onClick:()=>{d.isPlay=!d.isPlay,a([...o])},type:"primary",children:"switch this remote video track play status"})}),ce("div",{className:"p-4 text-xl",children:ce(E1,{play:d.isPlay,style:{width:"150px",height:"100px"},track:d.track})})]},d.id))]}),ce(Sa,{calling:e,setCalling:()=>{t(d=>!d)}})]})},w6=[{label:"LocalAudioTrack",component:Pme},{label:"RemoteAudioTrack",component:Ume},{label:"LocalVideoTrack",component:Lme},{label:"RemoteVideoTrack",component:jme},{label:"LocalUser",component:Dme},{label:"RemoteUser",component:Fme}],{Title:Hme}=Co,$me=()=>{$i({appid:Ct.appId,channel:Ct.channel,token:Ct.token},!0);const[e,t]=b.useState(!1),{localMicrophoneTrack:o}=$h();return m1(o,e),Ye(oi,{children:[ce("div",{className:"h-screen p-3",children:ce(Hme,{children:"useAutoPlayAudioTrack"})}),ce(Sa,{micOn:e,setMic:()=>{t(a=>!a)}})]})},{Title:Wme}=Co,Gme=()=>{$i({appid:Ct.appId,channel:Ct.channel,token:Ct.token},!0);const[e,t]=b.useState(!1),o=b.useRef(null),{localCameraTrack:a}=Wh();return f1(a,e,o.current),Ye(oi,{children:[Ye("div",{className:"h-screen p-3",children:[ce(Wme,{children:"useAutoPlayVideoTrack"}),ce("div",{className:"p-4 text-xl",children:ce("div",{ref:c=>o.current=c,style:{width:"150px",height:"100px"}})})]}),ce(Sa,{cameraOn:e,setCamera:()=>{t(c=>!c)}})]})},{Title:zme,Paragraph:Tb,Text:Kme}=Co,Yme=()=>{const[e,t]=b.useState(!1),o=bue();return $i({appid:Ct.appId,channel:Ct.channel,token:Ct.token},e),ce(oi,{children:Ye("div",{className:"h-screen p-3",children:[ce(zme,{children:"useConnectionState"}),Ye(Tb,{children:["By using ",ce(Kme,{keyboard:!0,children:"useConnectionState"})," hook to get the current connection state of the client."]}),ce(Tb,{children:`result: ${o}`}),Ye(Tb,{children:[ce(io,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),ce(io,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:qme,Paragraph:bb,Text:Xme}=Co,Jme=()=>{const[e,t]=b.useState(!1),o=M_();return $i({appid:Ct.appId,channel:Ct.channel,token:Ct.token},e),ce(oi,{children:Ye("div",{className:"h-screen p-3",children:[ce(qme,{children:"useCurrentUID"}),Ye(bb,{children:["By using ",ce(Xme,{keyboard:!0,children:"useCurrentUID"})," hook to get the UID of the current user."]}),ce(bb,{children:`result: ${o}`}),Ye(bb,{children:[ce(io,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),ce(io,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:Qme,Paragraph:Rb,Text:Zme}=Co,e0e=()=>{const[e,t]=b.useState(!1),o=gs();return $i({appid:Ct.appId,channel:Ct.channel,token:Ct.token},e),ce(oi,{children:Ye("div",{className:"h-screen p-3",children:[ce(Qme,{children:"useIsConnected"}),Ye(Rb,{children:["By using ",ce(Zme,{keyboard:!0,children:"useIsConnected"})," hook to determines whether the client is successfully connected to Agora server."]}),ce(Rb,{children:`result: ${o}`}),Ye(Rb,{children:[ce(io,{className:"m-1",onClick:()=>t(!0),type:"primary",children:"Join"}),ce(io,{className:"m-1",onClick:()=>t(!1),type:"default",children:"Leave"})]})]})})},{Title:t0e,Paragraph:IF,Text:Gp}=Co,n0e=()=>{const[e,t]=b.useState(!1),{data:o,isLoading:a,isConnected:c,error:u}=$i({appid:Ct.appId,channel:Ct.channel,token:Ct.token},e),[d,f]=b.useState(!1),[m,g]=b.useState(!1),_=$s(),{videoTracks:S}=dm(_),{audioTracks:C}=um(_);C.map(I=>I.play());const O=()=>ce(oo,{children:S.map(I=>Ye(ja.Item,{children:[ce(pm,{cover:Bs(),track:I},I.getUserId()),ce(Tc,{children:`${ms(I.getUserId())}{${I.getUserId()}}`})]},I.getUserId()))});return Ye(oi,{children:[Ye("div",{className:"h-screen p-3",children:[ce(t0e,{children:"UseJoin"}),Ye(IF,{children:["By using ",ce(Gp,{keyboard:!0,children:"UseJoin"})," hook to join room."]}),Ye(IF,{children:["You can do some actions like fetching token before calling join.",ce("br",{}),"Below is the returned data."]}),Ye(Gp,{children:["data: ",o]}),Ye(Gp,{className:"pl-3",children:["isLoading: ",`${a}`]}),Ye(Gp,{className:"pl-3",children:["isConnected: ",`${c}`]}),Ye(Gp,{className:"pl-3",children:["error: ",`${JSON.stringify(u)}`]})]}),e&&ce(b1,{cameraOn:m,micOn:d,renderRemoteUsers:O}),ce(Sa,{calling:e,cameraOn:m,micOn:d,setCalling:()=>{t(I=>!I)},setCamera:()=>{g(I=>!I)},setMic:()=>{f(I=>!I)}})]})},{Title:r0e,Paragraph:i0e}=Co,o0e=()=>{const e=Rue();return $i({appid:Ct.appId,channel:Ct.channel,token:Ct.token},!0),ce(oi,{children:Ye("div",{className:"h-screen p-3",children:[ce(r0e,{children:"useNetworkQuality"}),ce(i0e,{children:`result: ${JSON.stringify(e)}`})]})})},a0e=()=>{const[e,t]=b.useState(!1),o=M_()||0,a=b.useMemo(()=>ms(o),[o]),c=b.useMemo(()=>Bs(),[]),{isConnected:u}=$i({appid:Ct.appId,channel:Ct.channel,token:Ct.token},e),[d,f]=b.useState(!1),[m,g]=b.useState(!1),{localMicrophoneTrack:_}=$h(d),{localCameraTrack:S}=Wh(m);Hh([_,S]);const C=$s(),O=C.filter(N=>N.hasAudio||N.hasVideo),{videoTracks:I}=dm(C),{audioTracks:A}=um(C);A.map(N=>N.play());const L=()=>ce(oo,{children:I.map(N=>Ye(ja.Item,{children:[ce(pm,{cover:Bs(),track:N},N.getUserId()),ce(Tc,{children:`Layout1 ${ms(N.getUserId())}{${N.getUserId()}}`})]},N.getUserId()))});return Ye(oi,{children:[Ye(oo,{children:[ce(y1,{published:O.length+(d||m?1:0),total:C.length+1}),Ye(ja,{children:[u&&ce(ja.Item,{children:ce(S1,{audioTrack:_,cameraOn:m,cover:c,micOn:d,videoTrack:S,children:ce(Tc,{children:`${a}{${o}}`})})}),L?L():void 0]})]}),ce(Sa,{calling:e,cameraOn:m,micOn:d,setCalling:()=>t(N=>!N),setCamera:()=>{g(N=>!N)},setMic:()=>{f(N=>!N)}})]})},s0e=()=>{const[e,t]=b.useState(!1),o=gs(),a=M_()||0,c=b.useMemo(()=>ms(a),[a]),u=b.useMemo(()=>Bs(),[]);$i({appid:Ct.appId,channel:Ct.channel,token:Ct.token},e);const[d,f]=b.useState(!1),[m,g]=b.useState(!1),{localMicrophoneTrack:_}=$h(d),{localCameraTrack:S}=Wh(m);Hh([_,S]);const C=$s(),O=C.filter(I=>I.hasAudio||I.hasVideo);return Ye(oi,{children:[Ye(oo,{children:[ce(y1,{published:O.length+(d||m?1:0),total:C.length+1}),Ye(ja,{children:[o&&ce(ja.Item,{children:ce(S1,{audioTrack:_,cameraOn:m,cover:u,micOn:d,videoTrack:S,children:ce(Tc,{children:`${c}{${a}}`})})}),C.map(I=>Ye(ja.Item,{children:[ce(_1,{cover:Bs(),user:I}),ce(Tc,{children:`${ms(I.uid)}{${I.uid}}`})]},I.uid))]})]}),ce(Sa,{calling:e,cameraOn:m,micOn:d,setCalling:()=>t(I=>!I),setCamera:()=>{g(I=>!I)},setMic:()=>{f(I=>!I)}})]})},O6=[{label:"useJoin",component:n0e},{label:"usePublish",component:a0e},{label:"useRemoteUsers",component:s0e},{label:"useConnectionState",component:Yme},{label:"useIsConnected",component:e0e},{label:"useCurrentUID",component:Jme},{label:"useAutoPlayAudioTrack",component:$me},{label:"useAutoPlayVideoTrack",component:Gme},{label:"useNetworkQuality",component:o0e}],wF=()=>ce(oi,{}),{Content:c0e,Sider:l0e}=yI,Ui=["Basic","Hooks","Components","Advanced","Setting"],u0e=[{label:Ui[0],key:Ui[0],children:I6.map(e=>({key:`/${Ui[0]}/${e.label}`,label:e.label}))},{label:Ui[1],key:Ui[1],children:O6.map(e=>({key:`/${Ui[1]}/${e.label}`,label:e.label}))},{label:Ui[2],key:Ui[2],children:w6.map(e=>({key:`/${Ui[2]}/${e.label}`,label:e.label}))},{label:Ui[3],key:Ui[3],children:R6.map(e=>({key:`/${Ui[3]}/${e.label}`,label:e.label}))}];function d0e(){const[e,t]=b.useState(!1),[o,a]=b.useState([window.location.hash.slice(1).split("/")[1]]),c=d=>{const f=d.find(m=>o.indexOf(m)===-1);f&&Ui.indexOf(f)===-1?a(d):a(f?[f]:[])},u=sZ();return ce(oo,{children:Ye(yI,{children:[ce(l0e,{collapsed:e,collapsible:!0,onCollapse:d=>t(d),style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0},children:ce(Wce,{items:u0e,mode:"inline",onClick:d=>{u(d.key)},onOpenChange:c,openKeys:o,selectedKeys:[window.location.hash.slice(1)],theme:"dark"})}),ce(yI,{style:{marginLeft:e?80:200},children:Ye(c0e,{children:[Ye(CZ,{children:[ce(fu,{Component:()=>ce(wF,{}),path:"/*"}),ce(fu,{Component:()=>ce(wF,{}),path:"/setting"}),I6.map(({label:d,component:f})=>{const m=f;return ce(fu,{Component:()=>ce(Dg,{children:ce(m,{})}),path:`/${Ui[0]}/${d}`},d)}),O6.map(({label:d,component:f})=>{const m=f;return ce(fu,{Component:()=>ce(Dg,{children:ce(m,{})}),path:`/${Ui[1]}/${d}`},d)}),w6.map(({label:d,component:f})=>{const m=f;return ce(fu,{Component:()=>ce(Dg,{children:ce(m,{})}),path:`/${Ui[2]}/${d}`},d)}),R6.map(({label:d,component:f})=>{const m=f;return ce(fu,{Component:()=>ce(Dg,{children:ce(m,{})}),path:`/${Ui[3]}/${d}`},d)})]}),ce("a",{"aria-label":"View source on GitHub",className:"github-corner",href:"https://github.com/AgoraIO-Extensions/agora-rtc-react",rel:"noreferrer",target:"_blank",children:Ye("svg",{"aria-hidden":"true",className:"github-corner-svg",height:"80",viewBox:"0 0 250 250",width:"80",children:[ce("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),ce("path",{className:"github-corner-svg-arm",d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}),ce("path",{className:"github-corner-svg-body",d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"})]})})]})})]})})}Ou.setLogLevel(2);wb.createRoot(document.getElementById("root")).render(ce(b.StrictMode,{children:ce(TZ,{children:ce(d0e,{})})}));
